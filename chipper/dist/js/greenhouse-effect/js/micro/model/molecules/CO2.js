// Copyright 2021, University of Colorado Boulder

/**
 * Class that represents CO2 ( carbon dioxide ) in the model.
 *
 * @author John Blanco
 * @author Jesse Greenberg
 */

import Vector2 from '../../../../../dot/js/Vector2.js';
import greenhouseEffect from '../../../greenhouseEffect.js';
import Atom from '../atoms/Atom.js';
import AtomicBond from '../atoms/AtomicBond.js';
import Molecule from '../Molecule.js';
import VibrationStrategy from '../VibrationStrategy.js';
import WavelengthConstants from '../WavelengthConstants.js';

// Model Data for the carbon dioxide molecule.
const INITIAL_CARBON_OXYGEN_DISTANCE = 170; // In picometers.

// Deflection amounts used for the vibration of the CO2 atoms.  These
// are calculated such that the actual center of gravity should remain
// constant.
const CARBON_MAX_DEFLECTION = 40;
const OXYGEN_MAX_DEFLECTION = Atom.carbon().mass * CARBON_MAX_DEFLECTION / (2 * Atom.oxygen().mass);
class CO2 extends Molecule {
  /**
   * Constructor for a carbon dioxide molecule.
   *
   * @param {Object} [options]
   */
  constructor(options) {
    // Supertype constructor
    super(options);

    // Instance data for the carbon dioxide molecule
    // @private
    this.carbonAtom = Atom.carbon();
    this.oxygenAtom1 = Atom.oxygen();
    this.oxygenAtom2 = Atom.oxygen();

    // Configure the base class.
    this.addAtom(this.carbonAtom);
    this.addAtom(this.oxygenAtom1);
    this.addAtom(this.oxygenAtom2);
    this.addAtomicBond(new AtomicBond(this.carbonAtom, this.oxygenAtom1, {
      bondCount: 2
    }));
    this.addAtomicBond(new AtomicBond(this.carbonAtom, this.oxygenAtom2, {
      bondCount: 2
    }));

    // Set up the photon wavelengths to absorb.
    this.setPhotonAbsorptionStrategy(WavelengthConstants.IR_WAVELENGTH, new VibrationStrategy(this));

    // Set the initial offsets
    this.initializeAtomOffsets();
  }

  /**
   * Set the vibration behavior for this CO2 molecule. Initialize and set center of gravity position offsets for the
   * composing atoms.
   * @public
   *
   * @param {number} vibrationRadians Where this molecule is in its vibration cycle in radians.
   */
  setVibration(vibrationRadians) {
    this.currentVibrationRadiansProperty.set(vibrationRadians);
    const multFactor = Math.sin(vibrationRadians);
    this.addInitialAtomCogOffset(this.carbonAtom, new Vector2(0, multFactor * CARBON_MAX_DEFLECTION));
    this.addInitialAtomCogOffset(this.oxygenAtom1, new Vector2(INITIAL_CARBON_OXYGEN_DISTANCE, -multFactor * OXYGEN_MAX_DEFLECTION));
    this.addInitialAtomCogOffset(this.oxygenAtom2, new Vector2(-INITIAL_CARBON_OXYGEN_DISTANCE, -multFactor * OXYGEN_MAX_DEFLECTION));
    this.updateAtomPositions();
  }

  /**
   * Set the initial positions of the atoms which compose this molecule.
   * @private
   */
  initializeAtomOffsets() {
    this.addInitialAtomCogOffset(this.carbonAtom, new Vector2(0, 0));
    this.addInitialAtomCogOffset(this.oxygenAtom1, new Vector2(INITIAL_CARBON_OXYGEN_DISTANCE, 0));
    this.addInitialAtomCogOffset(this.oxygenAtom2, new Vector2(-INITIAL_CARBON_OXYGEN_DISTANCE, 0));
    this.updateAtomPositions();
  }
}
greenhouseEffect.register('CO2', CO2);
export default CO2;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWZWN0b3IyIiwiZ3JlZW5ob3VzZUVmZmVjdCIsIkF0b20iLCJBdG9taWNCb25kIiwiTW9sZWN1bGUiLCJWaWJyYXRpb25TdHJhdGVneSIsIldhdmVsZW5ndGhDb25zdGFudHMiLCJJTklUSUFMX0NBUkJPTl9PWFlHRU5fRElTVEFOQ0UiLCJDQVJCT05fTUFYX0RFRkxFQ1RJT04iLCJPWFlHRU5fTUFYX0RFRkxFQ1RJT04iLCJjYXJib24iLCJtYXNzIiwib3h5Z2VuIiwiQ08yIiwiY29uc3RydWN0b3IiLCJvcHRpb25zIiwiY2FyYm9uQXRvbSIsIm94eWdlbkF0b20xIiwib3h5Z2VuQXRvbTIiLCJhZGRBdG9tIiwiYWRkQXRvbWljQm9uZCIsImJvbmRDb3VudCIsInNldFBob3RvbkFic29ycHRpb25TdHJhdGVneSIsIklSX1dBVkVMRU5HVEgiLCJpbml0aWFsaXplQXRvbU9mZnNldHMiLCJzZXRWaWJyYXRpb24iLCJ2aWJyYXRpb25SYWRpYW5zIiwiY3VycmVudFZpYnJhdGlvblJhZGlhbnNQcm9wZXJ0eSIsInNldCIsIm11bHRGYWN0b3IiLCJNYXRoIiwic2luIiwiYWRkSW5pdGlhbEF0b21Db2dPZmZzZXQiLCJ1cGRhdGVBdG9tUG9zaXRpb25zIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJDTzIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjEsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIENsYXNzIHRoYXQgcmVwcmVzZW50cyBDTzIgKCBjYXJib24gZGlveGlkZSApIGluIHRoZSBtb2RlbC5cclxuICpcclxuICogQGF1dGhvciBKb2huIEJsYW5jb1xyXG4gKiBAYXV0aG9yIEplc3NlIEdyZWVuYmVyZ1xyXG4gKi9cclxuXHJcbmltcG9ydCBWZWN0b3IyIGZyb20gJy4uLy4uLy4uLy4uLy4uL2RvdC9qcy9WZWN0b3IyLmpzJztcclxuaW1wb3J0IGdyZWVuaG91c2VFZmZlY3QgZnJvbSAnLi4vLi4vLi4vZ3JlZW5ob3VzZUVmZmVjdC5qcyc7XHJcbmltcG9ydCBBdG9tIGZyb20gJy4uL2F0b21zL0F0b20uanMnO1xyXG5pbXBvcnQgQXRvbWljQm9uZCBmcm9tICcuLi9hdG9tcy9BdG9taWNCb25kLmpzJztcclxuaW1wb3J0IE1vbGVjdWxlIGZyb20gJy4uL01vbGVjdWxlLmpzJztcclxuaW1wb3J0IFZpYnJhdGlvblN0cmF0ZWd5IGZyb20gJy4uL1ZpYnJhdGlvblN0cmF0ZWd5LmpzJztcclxuaW1wb3J0IFdhdmVsZW5ndGhDb25zdGFudHMgZnJvbSAnLi4vV2F2ZWxlbmd0aENvbnN0YW50cy5qcyc7XHJcblxyXG4vLyBNb2RlbCBEYXRhIGZvciB0aGUgY2FyYm9uIGRpb3hpZGUgbW9sZWN1bGUuXHJcbmNvbnN0IElOSVRJQUxfQ0FSQk9OX09YWUdFTl9ESVNUQU5DRSA9IDE3MDsgLy8gSW4gcGljb21ldGVycy5cclxuXHJcbi8vIERlZmxlY3Rpb24gYW1vdW50cyB1c2VkIGZvciB0aGUgdmlicmF0aW9uIG9mIHRoZSBDTzIgYXRvbXMuICBUaGVzZVxyXG4vLyBhcmUgY2FsY3VsYXRlZCBzdWNoIHRoYXQgdGhlIGFjdHVhbCBjZW50ZXIgb2YgZ3Jhdml0eSBzaG91bGQgcmVtYWluXHJcbi8vIGNvbnN0YW50LlxyXG5jb25zdCBDQVJCT05fTUFYX0RFRkxFQ1RJT04gPSA0MDtcclxuY29uc3QgT1hZR0VOX01BWF9ERUZMRUNUSU9OID0gQXRvbS5jYXJib24oKS5tYXNzICogQ0FSQk9OX01BWF9ERUZMRUNUSU9OIC8gKCAyICogQXRvbS5veHlnZW4oKS5tYXNzICk7XHJcblxyXG5jbGFzcyBDTzIgZXh0ZW5kcyBNb2xlY3VsZSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbnN0cnVjdG9yIGZvciBhIGNhcmJvbiBkaW94aWRlIG1vbGVjdWxlLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBvcHRpb25zICkge1xyXG5cclxuICAgIC8vIFN1cGVydHlwZSBjb25zdHJ1Y3RvclxyXG4gICAgc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcbiAgICAvLyBJbnN0YW5jZSBkYXRhIGZvciB0aGUgY2FyYm9uIGRpb3hpZGUgbW9sZWN1bGVcclxuICAgIC8vIEBwcml2YXRlXHJcbiAgICB0aGlzLmNhcmJvbkF0b20gPSBBdG9tLmNhcmJvbigpO1xyXG4gICAgdGhpcy5veHlnZW5BdG9tMSA9IEF0b20ub3h5Z2VuKCk7XHJcbiAgICB0aGlzLm94eWdlbkF0b20yID0gQXRvbS5veHlnZW4oKTtcclxuXHJcbiAgICAvLyBDb25maWd1cmUgdGhlIGJhc2UgY2xhc3MuXHJcbiAgICB0aGlzLmFkZEF0b20oIHRoaXMuY2FyYm9uQXRvbSApO1xyXG4gICAgdGhpcy5hZGRBdG9tKCB0aGlzLm94eWdlbkF0b20xICk7XHJcbiAgICB0aGlzLmFkZEF0b20oIHRoaXMub3h5Z2VuQXRvbTIgKTtcclxuICAgIHRoaXMuYWRkQXRvbWljQm9uZCggbmV3IEF0b21pY0JvbmQoIHRoaXMuY2FyYm9uQXRvbSwgdGhpcy5veHlnZW5BdG9tMSwgeyBib25kQ291bnQ6IDIgfSApICk7XHJcbiAgICB0aGlzLmFkZEF0b21pY0JvbmQoIG5ldyBBdG9taWNCb25kKCB0aGlzLmNhcmJvbkF0b20sIHRoaXMub3h5Z2VuQXRvbTIsIHsgYm9uZENvdW50OiAyIH0gKSApO1xyXG5cclxuICAgIC8vIFNldCB1cCB0aGUgcGhvdG9uIHdhdmVsZW5ndGhzIHRvIGFic29yYi5cclxuICAgIHRoaXMuc2V0UGhvdG9uQWJzb3JwdGlvblN0cmF0ZWd5KCBXYXZlbGVuZ3RoQ29uc3RhbnRzLklSX1dBVkVMRU5HVEgsIG5ldyBWaWJyYXRpb25TdHJhdGVneSggdGhpcyApICk7XHJcblxyXG4gICAgLy8gU2V0IHRoZSBpbml0aWFsIG9mZnNldHNcclxuICAgIHRoaXMuaW5pdGlhbGl6ZUF0b21PZmZzZXRzKCk7XHJcblxyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFNldCB0aGUgdmlicmF0aW9uIGJlaGF2aW9yIGZvciB0aGlzIENPMiBtb2xlY3VsZS4gSW5pdGlhbGl6ZSBhbmQgc2V0IGNlbnRlciBvZiBncmF2aXR5IHBvc2l0aW9uIG9mZnNldHMgZm9yIHRoZVxyXG4gICAqIGNvbXBvc2luZyBhdG9tcy5cclxuICAgKiBAcHVibGljXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge251bWJlcn0gdmlicmF0aW9uUmFkaWFucyBXaGVyZSB0aGlzIG1vbGVjdWxlIGlzIGluIGl0cyB2aWJyYXRpb24gY3ljbGUgaW4gcmFkaWFucy5cclxuICAgKi9cclxuICBzZXRWaWJyYXRpb24oIHZpYnJhdGlvblJhZGlhbnMgKSB7XHJcblxyXG4gICAgdGhpcy5jdXJyZW50VmlicmF0aW9uUmFkaWFuc1Byb3BlcnR5LnNldCggdmlicmF0aW9uUmFkaWFucyApO1xyXG4gICAgY29uc3QgbXVsdEZhY3RvciA9IE1hdGguc2luKCB2aWJyYXRpb25SYWRpYW5zICk7XHJcbiAgICB0aGlzLmFkZEluaXRpYWxBdG9tQ29nT2Zmc2V0KCB0aGlzLmNhcmJvbkF0b20sIG5ldyBWZWN0b3IyKCAwLCBtdWx0RmFjdG9yICogQ0FSQk9OX01BWF9ERUZMRUNUSU9OICkgKTtcclxuICAgIHRoaXMuYWRkSW5pdGlhbEF0b21Db2dPZmZzZXQoIHRoaXMub3h5Z2VuQXRvbTEsIG5ldyBWZWN0b3IyKCBJTklUSUFMX0NBUkJPTl9PWFlHRU5fRElTVEFOQ0UsIC1tdWx0RmFjdG9yICogT1hZR0VOX01BWF9ERUZMRUNUSU9OICkgKTtcclxuICAgIHRoaXMuYWRkSW5pdGlhbEF0b21Db2dPZmZzZXQoIHRoaXMub3h5Z2VuQXRvbTIsIG5ldyBWZWN0b3IyKCAtSU5JVElBTF9DQVJCT05fT1hZR0VOX0RJU1RBTkNFLCAtbXVsdEZhY3RvciAqIE9YWUdFTl9NQVhfREVGTEVDVElPTiApICk7XHJcbiAgICB0aGlzLnVwZGF0ZUF0b21Qb3NpdGlvbnMoKTtcclxuXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXQgdGhlIGluaXRpYWwgcG9zaXRpb25zIG9mIHRoZSBhdG9tcyB3aGljaCBjb21wb3NlIHRoaXMgbW9sZWN1bGUuXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBpbml0aWFsaXplQXRvbU9mZnNldHMoKSB7XHJcbiAgICB0aGlzLmFkZEluaXRpYWxBdG9tQ29nT2Zmc2V0KCB0aGlzLmNhcmJvbkF0b20sIG5ldyBWZWN0b3IyKCAwLCAwICkgKTtcclxuICAgIHRoaXMuYWRkSW5pdGlhbEF0b21Db2dPZmZzZXQoIHRoaXMub3h5Z2VuQXRvbTEsIG5ldyBWZWN0b3IyKCBJTklUSUFMX0NBUkJPTl9PWFlHRU5fRElTVEFOQ0UsIDAgKSApO1xyXG4gICAgdGhpcy5hZGRJbml0aWFsQXRvbUNvZ09mZnNldCggdGhpcy5veHlnZW5BdG9tMiwgbmV3IFZlY3RvcjIoIC1JTklUSUFMX0NBUkJPTl9PWFlHRU5fRElTVEFOQ0UsIDAgKSApO1xyXG4gICAgdGhpcy51cGRhdGVBdG9tUG9zaXRpb25zKCk7XHJcbiAgfVxyXG59XHJcblxyXG5ncmVlbmhvdXNlRWZmZWN0LnJlZ2lzdGVyKCAnQ08yJywgQ08yICk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDTzI7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsT0FBTyxNQUFNLGtDQUFrQztBQUN0RCxPQUFPQyxnQkFBZ0IsTUFBTSw4QkFBOEI7QUFDM0QsT0FBT0MsSUFBSSxNQUFNLGtCQUFrQjtBQUNuQyxPQUFPQyxVQUFVLE1BQU0sd0JBQXdCO0FBQy9DLE9BQU9DLFFBQVEsTUFBTSxnQkFBZ0I7QUFDckMsT0FBT0MsaUJBQWlCLE1BQU0seUJBQXlCO0FBQ3ZELE9BQU9DLG1CQUFtQixNQUFNLDJCQUEyQjs7QUFFM0Q7QUFDQSxNQUFNQyw4QkFBOEIsR0FBRyxHQUFHLENBQUMsQ0FBQzs7QUFFNUM7QUFDQTtBQUNBO0FBQ0EsTUFBTUMscUJBQXFCLEdBQUcsRUFBRTtBQUNoQyxNQUFNQyxxQkFB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