// Copyright 2021, University of Colorado Boulder

/**
 * PhotonEmissionSoundGenerator is a sound generator that produces sounds when photons are emitted.  Photons that are
 * emitted from one area in the model use one set of sounds, since they are meant to convey the initial emission from
 * the lamps or other emitters, and those emitted from another position use a different set of sounds, since they are
 * emitted by a molecule that had previously absorbed a photon.
 *
 * @author John Blanco (PhET Interactive Simulations)
 */

import merge from '../../../../phet-core/js/merge.js';
import SoundClip from '../../../../tambo/js/sound-generators/SoundClip.js';
import SoundGenerator from '../../../../tambo/js/sound-generators/SoundGenerator.js';
import soundManager from '../../../../tambo/js/soundManager.js';
import photonEmitIr_mp3 from '../../../sounds/photonEmitIr_mp3.js';
import photonEmitMicrowave_mp3 from '../../../sounds/photonEmitMicrowave_mp3.js';
import photonEmitUv_mp3 from '../../../sounds/photonEmitUv_mp3.js';
import photonEmitVisible_mp3 from '../../../sounds/photonEmitVisible_mp3.js';
import photonReleaseIr_mp3 from '../../../sounds/photonReleaseIr_mp3.js';
import photonReleaseMicrowave_mp3 from '../../../sounds/photonReleaseMicrowave_mp3.js';
import photonReleaseUv_mp3 from '../../../sounds/photonReleaseUv_mp3.js';
import photonReleaseVisible_mp3 from '../../../sounds/photonReleaseVisible_mp3.js';
import greenhouseEffect from '../../greenhouseEffect.js';
import WavelengthConstants from '../model/WavelengthConstants.js';

//---------------------------------------------------------------------------------------------------------------------
// constants
//---------------------------------------------------------------------------------------------------------------------

// sound output levels
const PHOTON_INITIAL_EMISSION_OUTPUT_LEVEL = 0.02;
const PHOTON_EMISSION_FROM_MOLECULE_OUTPUT_LEVEL = 0.09;

// X position at which the molecule emission sound is played
const PLAY_MOLECULE_EMISSION_X_POSITION = 0;
class PhotonEmissionSoundGenerator extends SoundGenerator {
  /**
   * @param {PhetioGroup} photonGroup
   * @param {Object} [options]
   */
  constructor(photonGroup, options) {
    options = merge({}, options);
    super(options);
    const photonInitialEmissionSoundClipOptions = {
      initialOutputLevel: PHOTON_INITIAL_EMISSION_OUTPUT_LEVEL
    };
    const photonEmissionFromMoleculeSoundClipOptions = {
      initialOutputLevel: PHOTON_EMISSION_FROM_MOLECULE_OUTPUT_LEVEL
    };

    // map of photon wavelengths to initial emission sounds
    // Note - can't use initialization constructor for Map due to lack of support in IE.
    const photonInitialEmissionSoundPlayers = new Map();
    photonInitialEmissionSoundPlayers.set(WavelengthConstants.MICRO_WAVELENGTH, new SoundClip(photonEmitMicrowave_mp3, photonInitialEmissionSoundClipOptions));
    photonInitialEmissionSoundPlayers.set(WavelengthConstants.IR_WAVELENGTH, new SoundClip(photonEmitIr_mp3, photonInitialEmissionSoundClipOptions));
    photonInitialEmissionSoundPlayers.set(WavelengthConstants.VISIBLE_WAVELENGTH, new SoundClip(photonEmitVisible_mp3, photonInitialEmissionSoundClipOptions));
    photonInitialEmissionSoundPlayers.set(WavelengthConstants.UV_WAVELENGTH, new SoundClip(photonEmitUv_mp3, photonInitialEmissionSoundClipOptions));
    photonInitialEmissionSoundPlayers.forEach(value => {
      soundManager.addSoundGenerator(value);
    });

    // map of wavelengths to the sounds used when photons are emitted from the active molecule
    // Note - can't use initialization constructor for Map due to lack of support in IE.
    const photonEmissionFromMoleculeSoundPlayers = new Map();
    photonEmissionFromMoleculeSoundPlayers.set(WavelengthConstants.MICRO_WAVELENGTH, new SoundClip(photonReleaseMicrowave_mp3, photonEmissionFromMoleculeSoundClipOptions));
    photonEmissionFromMoleculeSoundPlayers.set(WavelengthConstants.IR_WAVELENGTH, new SoundClip(photonReleaseIr_mp3, photonEmissionFromMoleculeSoundClipOptions));
    photonEmissionFromMoleculeSoundPlayers.set(WavelengthConstants.VISIBLE_WAVELENGTH, new SoundClip(photonReleaseVisible_mp3, photonEmissionFromMoleculeSoundClipOptions));
    photonEmissionFromMoleculeSoundPlayers.set(WavelengthConstants.UV_WAVELENGTH, new SoundClip(photonReleaseUv_mp3, photonEmissionFromMoleculeSoundClipOptions));
    photonEmissionFromMoleculeSoundPlayers.forEach(value => {
      soundManager.addSoundGenerator(value);
    });

    // listen for new photons and play sounds or set them up to be played later when appropriate
    photonGroup.elementCreatedEmitter.addListener(photon => {
      const photonXPosition = photon.positionProperty.value.x;
      if (photonXPosition === PLAY_MOLECULE_EMISSION_X_POSITION) {
        // this photon was just emitted from the active molecule, so play the appropriate emission sound
        photonEmissionFromMoleculeSoundPlayers.get(photon.wavelength).play();
      } else {
        photonInitialEmissionSoundPlayers.get(photon.wavelength).play();
      }
    });
  }
}
greenhouseEffect.register('PhotonEmissionSoundGenerator', PhotonEmissionSoundGenerator);
export default PhotonEmissionSoundGenerator;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtZXJnZSIsIlNvdW5kQ2xpcCIsIlNvdW5kR2VuZXJhdG9yIiwic291bmRNYW5hZ2VyIiwicGhvdG9uRW1pdElyX21wMyIsInBob3RvbkVtaXRNaWNyb3dhdmVfbXAzIiwicGhvdG9uRW1pdFV2X21wMyIsInBob3RvbkVtaXRWaXNpYmxlX21wMyIsInBob3RvblJlbGVhc2VJcl9tcDMiLCJwaG90b25SZWxlYXNlTWljcm93YXZlX21wMyIsInBob3RvblJlbGVhc2VVdl9tcDMiLCJwaG90b25SZWxlYXNlVmlzaWJsZV9tcDMiLCJncmVlbmhvdXNlRWZmZWN0IiwiV2F2ZWxlbmd0aENvbnN0YW50cyIsIlBIT1RPTl9JTklUSUFMX0VNSVNTSU9OX09VVFBVVF9MRVZFTCIsIlBIT1RPTl9FTUlTU0lPTl9GUk9NX01PTEVDVUxFX09VVFBVVF9MRVZFTCIsIlBMQVlfTU9MRUNVTEVfRU1JU1NJT05fWF9QT1NJVElPTiIsIlBob3RvbkVtaXNzaW9uU291bmRHZW5lcmF0b3IiLCJjb25zdHJ1Y3RvciIsInBob3Rvbkdyb3VwIiwib3B0aW9ucyIsInBob3RvbkluaXRpYWxFbWlzc2lvblNvdW5kQ2xpcE9wdGlvbnMiLCJpbml0aWFsT3V0cHV0TGV2ZWwiLCJwaG90b25FbWlzc2lvbkZyb21Nb2xlY3VsZVNvdW5kQ2xpcE9wdGlvbnMiLCJwaG90b25Jbml0aWFsRW1pc3Npb25Tb3VuZFBsYXllcnMiLCJNYXAiLCJzZXQiLCJNSUNST19XQVZFTEVOR1RIIiwiSVJfV0FWRUxFTkdUSCIsIlZJU0lCTEVfV0FWRUxFTkdUSCIsIlVWX1dBVkVMRU5HVEgiLCJmb3JFYWNoIiwidmFsdWUiLCJhZGRTb3VuZEdlbmVyYXRvciIsInBob3RvbkVtaXNzaW9uRnJvbU1vbGVjdWxlU291bmRQbGF5ZXJzIiwiZWxlbWVudENyZWF0ZWRFbWl0dGVyIiwiYWRkTGlzdGVuZXIiLCJwaG90b24iLCJwaG90b25YUG9zaXRpb24iLCJwb3NpdGlvblByb3BlcnR5IiwieCIsImdldCIsIndhdmVsZW5ndGgiLCJwbGF5IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJQaG90b25FbWlzc2lvblNvdW5kR2VuZXJhdG9yLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIxLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBQaG90b25FbWlzc2lvblNvdW5kR2VuZXJhdG9yIGlzIGEgc291bmQgZ2VuZXJhdG9yIHRoYXQgcHJvZHVjZXMgc291bmRzIHdoZW4gcGhvdG9ucyBhcmUgZW1pdHRlZC4gIFBob3RvbnMgdGhhdCBhcmVcclxuICogZW1pdHRlZCBmcm9tIG9uZSBhcmVhIGluIHRoZSBtb2RlbCB1c2Ugb25lIHNldCBvZiBzb3VuZHMsIHNpbmNlIHRoZXkgYXJlIG1lYW50IHRvIGNvbnZleSB0aGUgaW5pdGlhbCBlbWlzc2lvbiBmcm9tXHJcbiAqIHRoZSBsYW1wcyBvciBvdGhlciBlbWl0dGVycywgYW5kIHRob3NlIGVtaXR0ZWQgZnJvbSBhbm90aGVyIHBvc2l0aW9uIHVzZSBhIGRpZmZlcmVudCBzZXQgb2Ygc291bmRzLCBzaW5jZSB0aGV5IGFyZVxyXG4gKiBlbWl0dGVkIGJ5IGEgbW9sZWN1bGUgdGhhdCBoYWQgcHJldmlvdXNseSBhYnNvcmJlZCBhIHBob3Rvbi5cclxuICpcclxuICogQGF1dGhvciBKb2huIEJsYW5jbyAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICovXHJcblxyXG5pbXBvcnQgbWVyZ2UgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL21lcmdlLmpzJztcclxuaW1wb3J0IFNvdW5kQ2xpcCBmcm9tICcuLi8uLi8uLi8uLi90YW1iby9qcy9zb3VuZC1nZW5lcmF0b3JzL1NvdW5kQ2xpcC5qcyc7XHJcbmltcG9ydCBTb3VuZEdlbmVyYXRvciBmcm9tICcuLi8uLi8uLi8uLi90YW1iby9qcy9zb3VuZC1nZW5lcmF0b3JzL1NvdW5kR2VuZXJhdG9yLmpzJztcclxuaW1wb3J0IHNvdW5kTWFuYWdlciBmcm9tICcuLi8uLi8uLi8uLi90YW1iby9qcy9zb3VuZE1hbmFnZXIuanMnO1xyXG5pbXBvcnQgcGhvdG9uRW1pdElyX21wMyBmcm9tICcuLi8uLi8uLi9zb3VuZHMvcGhvdG9uRW1pdElyX21wMy5qcyc7XHJcbmltcG9ydCBwaG90b25FbWl0TWljcm93YXZlX21wMyBmcm9tICcuLi8uLi8uLi9zb3VuZHMvcGhvdG9uRW1pdE1pY3Jvd2F2ZV9tcDMuanMnO1xyXG5pbXBvcnQgcGhvdG9uRW1pdFV2X21wMyBmcm9tICcuLi8uLi8uLi9zb3VuZHMvcGhvdG9uRW1pdFV2X21wMy5qcyc7XHJcbmltcG9ydCBwaG90b25FbWl0VmlzaWJsZV9tcDMgZnJvbSAnLi4vLi4vLi4vc291bmRzL3Bob3RvbkVtaXRWaXNpYmxlX21wMy5qcyc7XHJcbmltcG9ydCBwaG90b25SZWxlYXNlSXJfbXAzIGZyb20gJy4uLy4uLy4uL3NvdW5kcy9waG90b25SZWxlYXNlSXJfbXAzLmpzJztcclxuaW1wb3J0IHBob3RvblJlbGVhc2VNaWNyb3dhdmVfbXAzIGZyb20gJy4uLy4uLy4uL3NvdW5kcy9waG90b25SZWxlYXNlTWljcm93YXZlX21wMy5qcyc7XHJcbmltcG9ydCBwaG90b25SZWxlYXNlVXZfbXAzIGZyb20gJy4uLy4uLy4uL3NvdW5kcy9waG90b25SZWxlYXNlVXZfbXAzLmpzJztcclxuaW1wb3J0IHBob3RvblJlbGVhc2VWaXNpYmxlX21wMyBmcm9tICcuLi8uLi8uLi9zb3VuZHMvcGhvdG9uUmVsZWFzZVZpc2libGVfbXAzLmpzJztcclxuaW1wb3J0IGdyZWVuaG91c2VFZmZlY3QgZnJvbSAnLi4vLi4vZ3JlZW5ob3VzZUVmZmVjdC5qcyc7XHJcbmltcG9ydCBXYXZlbGVuZ3RoQ29uc3RhbnRzIGZyb20gJy4uL21vZGVsL1dhdmVsZW5ndGhDb25zdGFudHMuanMnO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy8gY29uc3RhbnRzXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4vLyBzb3VuZCBvdXRwdXQgbGV2ZWxzXHJcbmNvbnN0IFBIT1RPTl9JTklUSUFMX0VNSVNTSU9OX09VVFBVVF9MRVZFTCA9IDAuMDI7XHJcbmNvbnN0IFBIT1RPTl9FTUlTU0lPTl9GUk9NX01PTEVDVUxFX09VVFBVVF9MRVZFTCA9IDAuMDk7XHJcblxyXG4vLyBYIHBvc2l0aW9uIGF0IHdoaWNoIHRoZSBtb2xlY3VsZSBlbWlzc2lvbiBzb3VuZCBpcyBwbGF5ZWRcclxuY29uc3QgUExBWV9NT0xFQ1VMRV9FTUlTU0lPTl9YX1BPU0lUSU9OID0gMDtcclxuXHJcbmNsYXNzIFBob3RvbkVtaXNzaW9uU291bmRHZW5lcmF0b3IgZXh0ZW5kcyBTb3VuZEdlbmVyYXRvciB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7UGhldGlvR3JvdXB9IHBob3Rvbkdyb3VwXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBwaG90b25Hcm91cCwgb3B0aW9ucyApIHtcclxuXHJcbiAgICBvcHRpb25zID0gbWVyZ2UoIHt9LCBvcHRpb25zICk7XHJcbiAgICBzdXBlciggb3B0aW9ucyApO1xyXG5cclxuICAgIGNvbnN0IHBob3RvbkluaXRpYWxFbWlzc2lvblNvdW5kQ2xpcE9wdGlvbnMgPSB7IGluaXRpYWxPdXRwdXRMZXZlbDogUEhPVE9OX0lOSVRJQUxfRU1JU1NJT05fT1VUUFVUX0xFVkVMIH07XHJcbiAgICBjb25zdCBwaG90b25FbWlzc2lvbkZyb21Nb2xlY3VsZVNvdW5kQ2xpcE9wdGlvbnMgPSB7IGluaXRpYWxPdXRwdXRMZXZlbDogUEhPVE9OX0VNSVNTSU9OX0ZST01fTU9MRUNVTEVfT1VUUFVUX0xFVkVMIH07XHJcblxyXG4gICAgLy8gbWFwIG9mIHBob3RvbiB3YXZlbGVuZ3RocyB0byBpbml0aWFsIGVtaXNzaW9uIHNvdW5kc1xyXG4gICAgLy8gTm90ZSAtIGNhbid0IHVzZSBpbml0aWFsaXphdGlvbiBjb25zdHJ1Y3RvciBmb3IgTWFwIGR1ZSB0byBsYWNrIG9mIHN1cHBvcnQgaW4gSUUuXHJcbiAgICBjb25zdCBwaG90b25Jbml0aWFsRW1pc3Npb25Tb3VuZFBsYXllcnMgPSBuZXcgTWFwKCk7XHJcbiAgICBwaG90b25Jbml0aWFsRW1pc3Npb25Tb3VuZFBsYXllcnMuc2V0KFxyXG4gICAgICBXYXZlbGVuZ3RoQ29uc3RhbnRzLk1JQ1JPX1dBVkVMRU5HVEgsXHJcbiAgICAgIG5ldyBTb3VuZENsaXAoIHBob3RvbkVtaXRNaWNyb3dhdmVfbXAzLCBwaG90b25Jbml0aWFsRW1pc3Npb25Tb3VuZENsaXBPcHRpb25zIClcclxuICAgICk7XHJcbiAgICBwaG90b25Jbml0aWFsRW1pc3Npb25Tb3VuZFBsYXllcnMuc2V0KFxyXG4gICAgICBXYXZlbGVuZ3RoQ29uc3RhbnRzLklSX1dBVkVMRU5HVEgsXHJcbiAgICAgIG5ldyBTb3VuZENsaXAoIHBob3RvbkVtaXRJcl9tcDMsIHBob3RvbkluaXRpYWxFbWlzc2lvblNvdW5kQ2xpcE9wdGlvbnMgKVxyXG4gICAgKTtcclxuICAgIHBob3RvbkluaXRpYWxFbWlzc2lvblNvdW5kUGxheWVycy5zZXQoXHJcbiAgICAgIFdhdmVsZW5ndGhDb25zdGFudHMuVklTSUJMRV9XQVZFTEVOR1RILFxyXG4gICAgICBuZXcgU291bmRDbGlwKCBwaG90b25FbWl0VmlzaWJsZV9tcDMsIHBob3RvbkluaXRpYWxFbWlzc2lvblNvdW5kQ2xpcE9wdGlvbnMgKVxyXG4gICAgKTtcclxuICAgIHBob3RvbkluaXRpYWxFbWlzc2lvblNvdW5kUGxheWVycy5zZXQoXHJcbiAgICAgIFdhdmVsZW5ndGhDb25zdGFudHMuVVZfV0FWRUxFTkdUSCxcclxuICAgICAgbmV3IFNvdW5kQ2xpcCggcGhvdG9uRW1pdFV2X21wMywgcGhvdG9uSW5pdGlhbEVtaXNzaW9uU291bmRDbGlwT3B0aW9ucyApXHJcbiAgICApO1xyXG4gICAgcGhvdG9uSW5pdGlhbEVtaXNzaW9uU291bmRQbGF5ZXJzLmZvckVhY2goIHZhbHVlID0+IHtcclxuICAgICAgc291bmRNYW5hZ2VyLmFkZFNvdW5kR2VuZXJhdG9yKCB2YWx1ZSApO1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIG1hcCBvZiB3YXZlbGVuZ3RocyB0byB0aGUgc291bmRzIHVzZWQgd2hlbiBwaG90b25zIGFyZSBlbWl0dGVkIGZyb20gdGhlIGFjdGl2ZSBtb2xlY3VsZVxyXG4gICAgLy8gTm90ZSAtIGNhbid0IHVzZSBpbml0aWFsaXphdGlvbiBjb25zdHJ1Y3RvciBmb3IgTWFwIGR1ZSB0byBsYWNrIG9mIHN1cHBvcnQgaW4gSUUuXHJcbiAgICBjb25zdCBwaG90b25FbWlzc2lvbkZyb21Nb2xlY3VsZVNvdW5kUGxheWVycyA9IG5ldyBNYXAoKTtcclxuICAgIHBob3RvbkVtaXNzaW9uRnJvbU1vbGVjdWxlU291bmRQbGF5ZXJzLnNldChcclxuICAgICAgV2F2ZWxlbmd0aENvbnN0YW50cy5NSUNST19XQVZFTEVOR1RILFxyXG4gICAgICBuZXcgU291bmRDbGlwKCBwaG90b25SZWxlYXNlTWljcm93YXZlX21wMywgcGhvdG9uRW1pc3Npb25Gcm9tTW9sZWN1bGVTb3VuZENsaXBPcHRpb25zIClcclxuICAgICk7XHJcbiAgICBwaG90b25FbWlzc2lvbkZyb21Nb2xlY3VsZVNvdW5kUGxheWVycy5zZXQoXHJcbiAgICAgIFdhdmVsZW5ndGhDb25zdGFudHMuSVJfV0FWRUxFTkdUSCxcclxuICAgICAgbmV3IFNvdW5kQ2xpcCggcGhvdG9uUmVsZWFzZUlyX21wMywgcGhvdG9uRW1pc3Npb25Gcm9tTW9sZWN1bGVTb3VuZENsaXBPcHRpb25zIClcclxuICAgICk7XHJcbiAgICBwaG90b25FbWlzc2lvbkZyb21Nb2xlY3VsZVNvdW5kUGxheWVycy5zZXQoXHJcbiAgICAgIFdhdmVsZW5ndGhDb25zdGFudHMuVklTSUJMRV9XQVZFTEVOR1RILFxyXG4gICAgICBuZXcgU291bmRDbGlwKCBwaG90b25SZWxlYXNlVmlzaWJsZV9tcDMsIHBob3RvbkVtaXNzaW9uRnJvbU1vbGVjdWxlU291bmRDbGlwT3B0aW9ucyApXHJcbiAgICApO1xyXG4gICAgcGhvdG9uRW1pc3Npb25Gcm9tTW9sZWN1bGVTb3VuZFBsYXllcnMuc2V0KFxyXG4gICAgICBXYXZlbGVuZ3RoQ29uc3RhbnRzLlVWX1dBVkVMRU5HVEgsXHJcbiAgICAgIG5ldyBTb3VuZENsaXAoIHBob3RvblJlbGVhc2VVdl9tcDMsIHBob3RvbkVtaXNzaW9uRnJvbU1vbGVjdWxlU291bmRDbGlwT3B0aW9ucyApXHJcbiAgICApO1xyXG4gICAgcGhvdG9uRW1pc3Npb25Gcm9tTW9sZWN1bGVTb3VuZFBsYXllcnMuZm9yRWFjaCggdmFsdWUgPT4ge1xyXG4gICAgICBzb3VuZE1hbmFnZXIuYWRkU291bmRHZW5lcmF0b3IoIHZhbHVlICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gbGlzdGVuIGZvciBuZXcgcGhvdG9ucyBhbmQgcGxheSBzb3VuZHMgb3Igc2V0IHRoZW0gdXAgdG8gYmUgcGxheWVkIGxhdGVyIHdoZW4gYXBwcm9wcmlhdGVcclxuICAgIHBob3Rvbkdyb3VwLmVsZW1lbnRDcmVhdGVkRW1pdHRlci5hZGRMaXN0ZW5lciggcGhvdG9uID0+IHtcclxuICAgICAgY29uc3QgcGhvdG9uWFBvc2l0aW9uID0gcGhvdG9uLnBvc2l0aW9uUHJvcGVydHkudmFsdWUueDtcclxuXHJcbiAgICAgIGlmICggcGhvdG9uWFBvc2l0aW9uID09PSBQTEFZX01PTEVDVUxFX0VNSVNTSU9OX1hfUE9TSVRJT04gKSB7XHJcblxyXG4gICAgICAgIC8vIHRoaXMgcGhvdG9uIHdhcyBqdXN0IGVtaXR0ZWQgZnJvbSB0aGUgYWN0aXZlIG1vbGVjdWxlLCBzbyBwbGF5IHRoZSBhcHByb3ByaWF0ZSBlbWlzc2lvbiBzb3VuZFxyXG4gICAgICAgIHBob3RvbkVtaXNzaW9uRnJvbU1vbGVjdWxlU291bmRQbGF5ZXJzLmdldCggcGhvdG9uLndhdmVsZW5ndGggKS5wbGF5KCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgcGhvdG9uSW5pdGlhbEVtaXNzaW9uU291bmRQbGF5ZXJzLmdldCggcGhvdG9uLndhdmVsZW5ndGggKS5wbGF5KCk7XHJcbiAgICAgIH1cclxuICAgIH0gKTtcclxuICB9XHJcbn1cclxuXHJcbmdyZWVuaG91c2VFZmZlY3QucmVnaXN0ZXIoICdQaG90b25FbWlzc2lvblNvdW5kR2VuZXJhdG9yJywgUGhvdG9uRW1pc3Npb25Tb3VuZEdlbmVyYXRvciApO1xyXG5leHBvcnQgZGVmYXVsdCBQaG90b25FbWlzc2lvblNvdW5kR2VuZXJhdG9yO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsS0FBSyxNQUFNLG1DQUFtQztBQUNyRCxPQUFPQyxTQUFTLE1BQU0sb0RBQW9EO0FBQzFFLE9BQU9DLGNBQWMsTUFBTSx5REFBeUQ7QUFDcEYsT0FBT0MsWUFBWSxNQUFNLHNDQUFzQztBQUMvRCxPQUFPQyxnQkFBZ0IsTUFBTSxxQ0FBcUM7QUFDbEUsT0FBT0MsdUJBQXVCLE1BQU0sNENBQTRDO0FBQ2hGLE9BQU9DLGdCQUFnQixNQUFNLHFDQUFxQztBQUNsRSxPQUFPQyxxQkFBcUIsTUFBTSwwQ0FBMEM7QUFDNUUsT0FBT0MsbUJBQW1CLE1BQU0sd0NBQXdDO0FBQ3hFLE9BQU9DLDBCQUEwQixNQUFNLCtDQUErQztBQUN0RixPQUFPQyxtQkFBbUIsTUFBTSx3Q0FBd0M7QUFDeEUsT0FBT0Msd0JBQXdCLE1BQU0sNkNBQTZDO0FBQ2xGLE9BQU9DLGdCQUFnQixNQUFNLDJCQUEyQjtBQUN4RCxP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