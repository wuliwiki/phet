// Copyright 2021-2022, University of Colorado Boulder

/**
 * PhotonLandscapeObservationWindow adds the ability to depict photons to its parent class.
 *
 * @author John Blanco (PhET Interactive Simulations)
 */

import optionize from '../../../../phet-core/js/optionize.js';
import soundManager from '../../../../tambo/js/soundManager.js';
import Tandem from '../../../../tandem/js/Tandem.js';
import PhotonSprites from '../../common/PhotonSprites.js';
import AtmosphericPhotonsSoundGenerator from '../../common/view/AtmosphericPhotonsSoundGenerator.js';
import LandscapeObservationWindow from '../../common/view/LandscapeObservationWindow.js';
import greenhouseEffect from '../../greenhouseEffect.js';
class PhotonLandscapeObservationWindow extends LandscapeObservationWindow {
  constructor(model, providedOptions) {
    const options = optionize()({
      // phet-io
      tandem: Tandem.REQUIRED
    }, providedOptions);
    super(model, options);

    // Add the node that will render the photons.
    this.photonsNode = new PhotonSprites(model.photonCollection, this.modelViewTransform);
    this.presentationLayer.addChild(this.photonsNode);

    // sound generation
    soundManager.addSoundGenerator(new AtmosphericPhotonsSoundGenerator(model.photonCollection, {
      // output level is pretty low, since a lot of these can be happening at once
      initialOutputLevel: 0.03
    }));
  }
  step(dt) {
    this.photonsNode.update();
    super.step(dt);
  }
}
greenhouseEffect.register('PhotonLandscapeObservationWindow', PhotonLandscapeObservationWindow);
export default PhotonLandscapeObservationWindow;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcHRpb25pemUiLCJzb3VuZE1hbmFnZXIiLCJUYW5kZW0iLCJQaG90b25TcHJpdGVzIiwiQXRtb3NwaGVyaWNQaG90b25zU291bmRHZW5lcmF0b3IiLCJMYW5kc2NhcGVPYnNlcnZhdGlvbldpbmRvdyIsImdyZWVuaG91c2VFZmZlY3QiLCJQaG90b25MYW5kc2NhcGVPYnNlcnZhdGlvbldpbmRvdyIsImNvbnN0cnVjdG9yIiwibW9kZWwiLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwidGFuZGVtIiwiUkVRVUlSRUQiLCJwaG90b25zTm9kZSIsInBob3RvbkNvbGxlY3Rpb24iLCJtb2RlbFZpZXdUcmFuc2Zvcm0iLCJwcmVzZW50YXRpb25MYXllciIsImFkZENoaWxkIiwiYWRkU291bmRHZW5lcmF0b3IiLCJpbml0aWFsT3V0cHV0TGV2ZWwiLCJzdGVwIiwiZHQiLCJ1cGRhdGUiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlBob3RvbkxhbmRzY2FwZU9ic2VydmF0aW9uV2luZG93LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIxLTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFBob3RvbkxhbmRzY2FwZU9ic2VydmF0aW9uV2luZG93IGFkZHMgdGhlIGFiaWxpdHkgdG8gZGVwaWN0IHBob3RvbnMgdG8gaXRzIHBhcmVudCBjbGFzcy5cclxuICpcclxuICogQGF1dGhvciBKb2huIEJsYW5jbyAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICovXHJcblxyXG5pbXBvcnQgb3B0aW9uaXplLCB7IEVtcHR5U2VsZk9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuaW1wb3J0IHNvdW5kTWFuYWdlciBmcm9tICcuLi8uLi8uLi8uLi90YW1iby9qcy9zb3VuZE1hbmFnZXIuanMnO1xyXG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uLy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xyXG5pbXBvcnQgUGhvdG9uU3ByaXRlcyBmcm9tICcuLi8uLi9jb21tb24vUGhvdG9uU3ByaXRlcy5qcyc7XHJcbmltcG9ydCBBdG1vc3BoZXJpY1Bob3RvbnNTb3VuZEdlbmVyYXRvciBmcm9tICcuLi8uLi9jb21tb24vdmlldy9BdG1vc3BoZXJpY1Bob3RvbnNTb3VuZEdlbmVyYXRvci5qcyc7XHJcbmltcG9ydCBMYW5kc2NhcGVPYnNlcnZhdGlvbldpbmRvdywgeyBMYW5kc2NhcGVPYnNlcnZhdGlvbldpbmRvd09wdGlvbnMgfSBmcm9tICcuLi8uLi9jb21tb24vdmlldy9MYW5kc2NhcGVPYnNlcnZhdGlvbldpbmRvdy5qcyc7XHJcbmltcG9ydCBncmVlbmhvdXNlRWZmZWN0IGZyb20gJy4uLy4uL2dyZWVuaG91c2VFZmZlY3QuanMnO1xyXG5pbXBvcnQgUGhvdG9uc01vZGVsIGZyb20gJy4uL21vZGVsL1Bob3RvbnNNb2RlbC5qcyc7XHJcblxyXG50eXBlIFNlbGZPcHRpb25zID0gRW1wdHlTZWxmT3B0aW9ucztcclxuZXhwb3J0IHR5cGUgUGhvdG9uTGFuZHNjYXBlT2JzZXJ2YXRpb25XaW5kb3dPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBMYW5kc2NhcGVPYnNlcnZhdGlvbldpbmRvd09wdGlvbnM7XHJcblxyXG5jbGFzcyBQaG90b25MYW5kc2NhcGVPYnNlcnZhdGlvbldpbmRvdyBleHRlbmRzIExhbmRzY2FwZU9ic2VydmF0aW9uV2luZG93IHtcclxuICBwcml2YXRlIHJlYWRvbmx5IHBob3RvbnNOb2RlOiBQaG90b25TcHJpdGVzO1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIG1vZGVsOiBQaG90b25zTW9kZWwsIHByb3ZpZGVkT3B0aW9ucz86IExhbmRzY2FwZU9ic2VydmF0aW9uV2luZG93T3B0aW9ucyApIHtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPFBob3RvbkxhbmRzY2FwZU9ic2VydmF0aW9uV2luZG93T3B0aW9ucywgU2VsZk9wdGlvbnMsIExhbmRzY2FwZU9ic2VydmF0aW9uV2luZG93T3B0aW9ucz4oKSgge1xyXG5cclxuICAgICAgLy8gcGhldC1pb1xyXG4gICAgICB0YW5kZW06IFRhbmRlbS5SRVFVSVJFRFxyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgc3VwZXIoIG1vZGVsLCBvcHRpb25zICk7XHJcblxyXG4gICAgLy8gQWRkIHRoZSBub2RlIHRoYXQgd2lsbCByZW5kZXIgdGhlIHBob3RvbnMuXHJcbiAgICB0aGlzLnBob3RvbnNOb2RlID0gbmV3IFBob3RvblNwcml0ZXMoIG1vZGVsLnBob3RvbkNvbGxlY3Rpb24sIHRoaXMubW9kZWxWaWV3VHJhbnNmb3JtICk7XHJcbiAgICB0aGlzLnByZXNlbnRhdGlvbkxheWVyLmFkZENoaWxkKCB0aGlzLnBob3RvbnNOb2RlICk7XHJcblxyXG4gICAgLy8gc291bmQgZ2VuZXJhdGlvblxyXG4gICAgc291bmRNYW5hZ2VyLmFkZFNvdW5kR2VuZXJhdG9yKCBuZXcgQXRtb3NwaGVyaWNQaG90b25zU291bmRHZW5lcmF0b3IoIG1vZGVsLnBob3RvbkNvbGxlY3Rpb24sIHtcclxuXHJcbiAgICAgIC8vIG91dHB1dCBsZXZlbCBpcyBwcmV0dHkgbG93LCBzaW5jZSBhIGxvdCBvZiB0aGVzZSBjYW4gYmUgaGFwcGVuaW5nIGF0IG9uY2VcclxuICAgICAgaW5pdGlhbE91dHB1dExldmVsOiAwLjAzXHJcbiAgICB9ICkgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvdmVycmlkZSBzdGVwKCBkdDogbnVtYmVyICk6IHZvaWQge1xyXG4gICAgdGhpcy5waG90b25zTm9kZS51cGRhdGUoKTtcclxuICAgIHN1cGVyLnN0ZXAoIGR0ICk7XHJcbiAgfVxyXG59XHJcblxyXG5ncmVlbmhvdXNlRWZmZWN0LnJlZ2lzdGVyKCAnUGhvdG9uTGFuZHNjYXBlT2JzZXJ2YXRpb25XaW5kb3cnLCBQaG90b25MYW5kc2NhcGVPYnNlcnZhdGlvbldpbmRvdyApO1xyXG5leHBvcnQgZGVmYXVsdCBQaG90b25MYW5kc2NhcGVPYnNlcnZhdGlvbldpbmRvdzsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsU0FBUyxNQUE0Qix1Q0FBdUM7QUFDbkYsT0FBT0MsWUFBWSxNQUFNLHNDQUFzQztBQUMvRCxPQUFPQyxNQUFNLE1BQU0saUNBQWlDO0FBQ3BELE9BQU9DLGFBQWEsTUFBTSwrQkFBK0I7QUFDekQsT0FBT0MsZ0NBQWdDLE1BQU0sdURBQXVEO0FBQ3BHLE9BQU9DLDBCQUEwQixNQUE2QyxpREFBaUQ7QUFDL0gsT0FBT0MsZ0JBQWdCLE1BQU0sMkJBQTJCO0FBTXhELE1BQU1DLGdDQUFnQyxTQUFTRiwwQkFBMEIsQ0FBQztFQUdqRUcsV0FBV0EsQ0FBRUMsS0FBbUIsRUFBRUMsZUFBbUQsRUFBRztJQUU3RixNQUFNQyxPQUFPLEdBQUdYLFNBQVMsQ0FBMEYsQ0FBQyxDQUFFO01BRXBIO01BQ0FZLE1BQU0sRUFBRVYsTUFBTSxDQUFDVztJQUNqQixDQUFDLEVBQUVILGVBQWdCLENBQUM7SUFFcEIsS0FBSyxDQUFFRCxLQUFLLEVBQUVFLE9BQVEsQ0FBQzs7SUFFdkI7SUFDQSxJQUFJLENBQUNHLFdBQVcsR0FBRyxJQUFJWCxhQUFhLENBQUVNLEtBQUssQ0FBQ00sZ0JBQWdCLEVBQUUsSUFBSSxDQUFDQyxrQkFBbUIsQ0FBQztJQUN2RixJQUFJLENBQUNDLGlCQUFpQixDQUFDQyxRQUFRLENBQUUsSUFBSSxDQUFDSixXQUFZLENBQUM7O0lBRW5EO0lBQ0FiLFlBQVksQ0FBQ2tCLGlCQUFpQixDQUFFLElBQUlmLGdDQUFnQyxDQUFFSyxLQUFLLENBQUNNLGdCQUFnQixFQUFFO01BRTVGO01BQ0FLLGtCQUFrQixFQUFFO0lBQ3RCLENBQUUsQ0FBRSxDQUFDO0VBQ1A7RUFFZ0JDLElBQUlBLENBQUVDLEVBQVUsRUFBUztJQUN2QyxJQUFJLENBQUNSLFdBQVcsQ0FBQ1MsTUFBTSxDQUFDLENBQUM7SUFDekIsS0FBSyxDQUFDRixJQUFJLENBQUVDLEVBQUcsQ0FBQztFQUNsQjtBQUNGO0FBRUFoQixnQkFBZ0IsQ0FBQ2tCLFFBQVEsQ0FBRSxrQ0FBa0MsRUFBRWpCLGdDQUFpQyxDQUFDO0FBQ2pHLGVBQWVBLGdDQUFnQyJ9