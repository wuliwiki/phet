// Copyright 2021-2022, University of Colorado Boulder

/**
 * The Node that manages and updates the screen summary in the PDOM.
 * @author Jesse Greenberg (PhET Interactive Simulations)
 */

import StringUtils from '../../../../phetcommon/js/util/StringUtils.js';
import { Node } from '../../../../scenery/js/imports.js';
import { ConcentrationControlMode } from '../../common/model/ConcentrationModel.js';
import ConcentrationDescriber from '../../common/view/describers/ConcentrationDescriber.js';
import TemperatureDescriber from '../../common/view/describers/TemperatureDescriber.js';
import greenhouseEffect from '../../greenhouseEffect.js';
import GreenhouseEffectStrings from '../../GreenhouseEffectStrings.js';
import Multilink from '../../../../axon/js/Multilink.js';

// constants
const currentlyStringProperty = GreenhouseEffectStrings.a11y.waves.screenSummary.currentlyStringProperty;
const currentlySimIsPausedStringProperty = GreenhouseEffectStrings.a11y.waves.screenSummary.currentlySimIsPausedStringProperty;
const currentlyNoSunlightStringProperty = GreenhouseEffectStrings.a11y.waves.screenSummary.currentlyNoSunlightStringProperty;
const currentlySimIsPausedNoSunlightStringProperty = GreenhouseEffectStrings.a11y.waves.screenSummary.currentlySimIsPausedNoSunlightStringProperty;
const summaryWithTemperaturePatternStringProperty = GreenhouseEffectStrings.a11y.waves.screenSummary.summaryWithTemperaturePatternStringProperty;
const summaryWithoutTemperaturePatternStringProperty = GreenhouseEffectStrings.a11y.waves.screenSummary.summaryWithoutTemperaturePatternStringProperty;
const surfaceTemperaturePatternStringProperty = GreenhouseEffectStrings.a11y.waves.screenSummary.surfaceTemperaturePatternStringProperty;
const qualitativeAndQuantitativeTemperatureDescriptionPatternStringProperty = GreenhouseEffectStrings.a11y.waves.screenSummary.qualitativeAndQuantitativeTemperatureDescriptionPatternStringProperty;
class WavesScreenSummaryContentNode extends Node {
  constructor(model) {
    super();
    const playAreaDescriptionNode = new Node({
      tagName: 'p',
      innerContent: GreenhouseEffectStrings.a11y.waves.screenSummary.playAreaDescriptionStringProperty
    });
    const controlAreaDescriptionNode = new Node({
      tagName: 'p',
      innerContent: GreenhouseEffectStrings.a11y.waves.screenSummary.controlAreaDescriptionStringProperty
    });
    const simStateDescriptionNode = new Node({
      tagName: 'p'
    }); // content set with the changing model
    const startSunlightHintNode = new Node({
      tagName: 'p',
      innerContent: GreenhouseEffectStrings.a11y.startSunlightHintStringProperty
    });
    this.children = [playAreaDescriptionNode, controlAreaDescriptionNode, simStateDescriptionNode, startSunlightHintNode];
    Multilink.multilink([model.sunEnergySource.isShiningProperty, model.isPlayingProperty, model.concentrationProperty, model.dateProperty, model.surfaceTemperatureKelvinProperty, model.concentrationControlModeProperty, model.surfaceTemperatureVisibleProperty, model.surfaceThermometerVisibleProperty, model.temperatureUnitsProperty, model.cloudEnabledProperty], (sunIsShining, isPlaying, concentration, date, surfaceTemperatureKelvin, concentrationControlMode, surfaceTemperatureVisible, surfaceThermometerVisible, temperatureUnits, cloudEnabled) => {
      simStateDescriptionNode.innerContent = this.getScreenDescriptionString(sunIsShining, isPlaying, concentration, date, surfaceTemperatureKelvin, concentrationControlMode, surfaceTemperatureVisible, surfaceThermometerVisible, temperatureUnits, cloudEnabled);
    });
  }

  /**
   * Returns a full summary of the waves screen. Dependent on most Properties of the WavesModel. Returns something like
   * "Currently, no sunlight in observation window; the time period is the year twenty-twenty. The sky is cloudy." or
   * "Currently, max levels of greenhouse gases in atmosphere. Earthâ€™s surface temperature is very high, 22 degrees
   * Celsius. The sky is cloudy."
   */
  getScreenDescriptionString(sunIsShining, isPlaying, concentration, date, surfaceTemperatureKelvin, concentrationControlMode, surfaceTemperatureVisible, surfaceThermometerVisible, temperatureUnits, cloudEnabled) {
    // the final description
    let descriptionString;

    // the leading portion of the summary may include an extra hint that sunlight isn't shining yet or that
    // the sim is paused
    const currentlyDescriptionString = sunIsShining && isPlaying ? currentlyStringProperty.value : sunIsShining && !isPlaying ? currentlySimIsPausedStringProperty.value : !sunIsShining && isPlaying ? currentlyNoSunlightStringProperty.value : currentlySimIsPausedNoSunlightStringProperty;

    // portion that describes the state of the sky
    const skyDescriptionString = ConcentrationDescriber.getSkyCloudDescription(cloudEnabled);

    // portion that describes the state of the concentration in the atmosphere
    let concentrationDescriptionString;
    if (concentrationControlMode === ConcentrationControlMode.BY_VALUE) {
      // If sun is shining and sim is playing, capitalize because this will be read after "Currently, ", otherwise
      // the concentration description will start the sentence.
      const capitalize = !(sunIsShining && isPlaying);
      concentrationDescriptionString = ConcentrationDescriber.getConcentrationDescriptionWithValue(concentration, capitalize);
    } else {
      // capitalize because it will be its own sentence in this content
      concentrationDescriptionString = ConcentrationDescriber.getFullTimePeriodDescription(date, true);
    }
    let patternString;

    // The rest of the description depends on whether we want to include information about temperature.
    // Temperature information is included if elected by the user in the UI while the sun is shining. Describing
    // temperature while the sun is not shining can create confusing descriptions where the concentration is high
    // but the temperature is still low.
    if ((surfaceTemperatureVisible || surfaceThermometerVisible) && sunIsShining) {
      patternString = summaryWithTemperaturePatternStringProperty.value;

      // Portion that generates the temperature description. If the thermometer is visible, it will include a
      // quantitative description of the temperature. If user has elected to view the temperature in another
      // representation we include a qualitative description of the temperature.
      const qualitativeTemperatureDescriptionString = TemperatureDescriber.getQualitativeTemperatureDescriptionString(surfaceTemperatureKelvin, concentrationControlMode, date);
      const quantitativeTemperatureDescriptionString = TemperatureDescriber.getQuantitativeTemperatureDescription(surfaceTemperatureKelvin, temperatureUnits);
      let temperatureFragmentString;
      if (surfaceTemperatureVisible && surfaceThermometerVisible) {
        temperatureFragmentString = StringUtils.fillIn(qualitativeAndQuantitativeTemperatureDescriptionPatternStringProperty.value, {
          qualitativeDescription: qualitativeTemperatureDescriptionString,
          quantitativeDescription: quantitativeTemperatureDescriptionString
        });
      } else if (surfaceTemperatureVisible) {
        temperatureFragmentString = qualitativeTemperatureDescriptionString;
      } else {
        temperatureFragmentString = quantitativeTemperatureDescriptionString;
      }
      const temperatureDescriptionString = StringUtils.fillIn(surfaceTemperaturePatternStringProperty, {
        temperatureDescription: temperatureFragmentString
      });

      // assemble the final description including temperature information
      descriptionString = StringUtils.fillIn(patternString, {
        currentlyDescription: currentlyDescriptionString,
        concentrationDescription: concentrationDescriptionString,
        temperatureDescription: temperatureDescriptionString,
        skyDescription: skyDescriptionString
      });
    } else {
      // assemble the final description without temperature information
      patternString = summaryWithoutTemperaturePatternStringProperty.value;
      descriptionString = StringUtils.fillIn(patternString, {
        currentlyDescription: currentlyDescriptionString,
        concentrationDescription: concentrationDescriptionString,
        skyDescription: skyDescriptionString
      });
    }
    return descriptionString;
  }
}
greenhouseEffect.register('WavesScreenSummaryContentNode', WavesScreenSummaryContentNode);
export default WavesScreenSummaryContentNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTdHJpbmdVdGlscyIsIk5vZGUiLCJDb25jZW50cmF0aW9uQ29udHJvbE1vZGUiLCJDb25jZW50cmF0aW9uRGVzY3JpYmVyIiwiVGVtcGVyYXR1cmVEZXNjcmliZXIiLCJncmVlbmhvdXNlRWZmZWN0IiwiR3JlZW5ob3VzZUVmZmVjdFN0cmluZ3MiLCJNdWx0aWxpbmsiLCJjdXJyZW50bHlTdHJpbmdQcm9wZXJ0eSIsImExMXkiLCJ3YXZlcyIsInNjcmVlblN1bW1hcnkiLCJjdXJyZW50bHlTaW1Jc1BhdXNlZFN0cmluZ1Byb3BlcnR5IiwiY3VycmVudGx5Tm9TdW5saWdodFN0cmluZ1Byb3BlcnR5IiwiY3VycmVudGx5U2ltSXNQYXVzZWROb1N1bmxpZ2h0U3RyaW5nUHJvcGVydHkiLCJzdW1tYXJ5V2l0aFRlbXBlcmF0dXJlUGF0dGVyblN0cmluZ1Byb3BlcnR5Iiwic3VtbWFyeVdpdGhvdXRUZW1wZXJhdHVyZVBhdHRlcm5TdHJpbmdQcm9wZXJ0eSIsInN1cmZhY2VUZW1wZXJhdHVyZVBhdHRlcm5TdHJpbmdQcm9wZXJ0eSIsInF1YWxpdGF0aXZlQW5kUXVhbnRpdGF0aXZlVGVtcGVyYXR1cmVEZXNjcmlwdGlvblBhdHRlcm5TdHJpbmdQcm9wZXJ0eSIsIldhdmVzU2NyZWVuU3VtbWFyeUNvbnRlbnROb2RlIiwiY29uc3RydWN0b3IiLCJtb2RlbCIsInBsYXlBcmVhRGVzY3JpcHRpb25Ob2RlIiwidGFnTmFtZSIsImlubmVyQ29udGVudCIsInBsYXlBcmVhRGVzY3JpcHRpb25TdHJpbmdQcm9wZXJ0eSIsImNvbnRyb2xBcmVhRGVzY3JpcHRpb25Ob2RlIiwiY29udHJvbEFyZWFEZXNjcmlwdGlvblN0cmluZ1Byb3BlcnR5Iiwic2ltU3RhdGVEZXNjcmlwdGlvbk5vZGUiLCJzdGFydFN1bmxpZ2h0SGludE5vZGUiLCJzdGFydFN1bmxpZ2h0SGludFN0cmluZ1Byb3BlcnR5IiwiY2hpbGRyZW4iLCJtdWx0aWxpbmsiLCJzdW5FbmVyZ3lTb3VyY2UiLCJpc1NoaW5pbmdQcm9wZXJ0eSIsImlzUGxheWluZ1Byb3BlcnR5IiwiY29uY2VudHJhdGlvblByb3BlcnR5IiwiZGF0ZVByb3BlcnR5Iiwic3VyZmFjZVRlbXBlcmF0dXJlS2VsdmluUHJvcGVydHkiLCJjb25jZW50cmF0aW9uQ29udHJvbE1vZGVQcm9wZXJ0eSIsInN1cmZhY2VUZW1wZXJhdHVyZVZpc2libGVQcm9wZXJ0eSIsInN1cmZhY2VUaGVybW9tZXRlclZpc2libGVQcm9wZXJ0eSIsInRlbXBlcmF0dXJlVW5pdHNQcm9wZXJ0eSIsImNsb3VkRW5hYmxlZFByb3BlcnR5Iiwic3VuSXNTaGluaW5nIiwiaXNQbGF5aW5nIiwiY29uY2VudHJhdGlvbiIsImRhdGUiLCJzdXJmYWNlVGVtcGVyYXR1cmVLZWx2aW4iLCJjb25jZW50cmF0aW9uQ29udHJvbE1vZGUiLCJzdXJmYWNlVGVtcGVyYXR1cmVWaXNpYmxlIiwic3VyZmFjZVRoZXJtb21ldGVyVmlzaWJsZSIsInRlbXBlcmF0dXJlVW5pdHMiLCJjbG91ZEVuYWJsZWQiLCJnZXRTY3JlZW5EZXNjcmlwdGlvblN0cmluZyIsImRlc2NyaXB0aW9uU3RyaW5nIiwiY3VycmVudGx5RGVzY3JpcHRpb25TdHJpbmciLCJ2YWx1ZSIsInNreURlc2NyaXB0aW9uU3RyaW5nIiwiZ2V0U2t5Q2xvdWREZXNjcmlwdGlvbiIsImNvbmNlbnRyYXRpb25EZXNjcmlwdGlvblN0cmluZyIsIkJZX1ZBTFVFIiwiY2FwaXRhbGl6ZSIsImdldENvbmNlbnRyYXRpb25EZXNjcmlwdGlvbldpdGhWYWx1ZSIsImdldEZ1bGxUaW1lUGVyaW9kRGVzY3JpcHRpb24iLCJwYXR0ZXJuU3RyaW5nIiwicXVhbGl0YXRpdmVUZW1wZXJhdHVyZURlc2NyaXB0aW9uU3RyaW5nIiwiZ2V0UXVhbGl0YXRpdmVUZW1wZXJhdHVyZURlc2NyaXB0aW9uU3RyaW5nIiwicXVhbnRpdGF0aXZlVGVtcGVyYXR1cmVEZXNjcmlwdGlvblN0cmluZyIsImdldFF1YW50aXRhdGl2ZVRlbXBlcmF0dXJlRGVzY3JpcHRpb24iLCJ0ZW1wZXJhdHVyZUZyYWdtZW50U3RyaW5nIiwiZmlsbEluIiwicXVhbGl0YXRpdmVEZXNjcmlwdGlvbiIsInF1YW50aXRhdGl2ZURlc2NyaXB0aW9uIiwidGVtcGVyYXR1cmVEZXNjcmlwdGlvblN0cmluZyIsInRlbXBlcmF0dXJlRGVzY3JpcHRpb24iLCJjdXJyZW50bHlEZXNjcmlwdGlvbiIsImNvbmNlbnRyYXRpb25EZXNjcmlwdGlvbiIsInNreURlc2NyaXB0aW9uIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJXYXZlc1NjcmVlblN1bW1hcnlDb250ZW50Tm9kZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMS0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBUaGUgTm9kZSB0aGF0IG1hbmFnZXMgYW5kIHVwZGF0ZXMgdGhlIHNjcmVlbiBzdW1tYXJ5IGluIHRoZSBQRE9NLlxyXG4gKiBAYXV0aG9yIEplc3NlIEdyZWVuYmVyZyAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICovXHJcblxyXG5pbXBvcnQgU3RyaW5nVXRpbHMgZnJvbSAnLi4vLi4vLi4vLi4vcGhldGNvbW1vbi9qcy91dGlsL1N0cmluZ1V0aWxzLmpzJztcclxuaW1wb3J0IHsgTm9kZSB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCB7IENvbmNlbnRyYXRpb25Db250cm9sTW9kZSwgQ29uY2VudHJhdGlvbkRhdGUgfSBmcm9tICcuLi8uLi9jb21tb24vbW9kZWwvQ29uY2VudHJhdGlvbk1vZGVsLmpzJztcclxuaW1wb3J0IENvbmNlbnRyYXRpb25EZXNjcmliZXIgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvZGVzY3JpYmVycy9Db25jZW50cmF0aW9uRGVzY3JpYmVyLmpzJztcclxuaW1wb3J0IFRlbXBlcmF0dXJlRGVzY3JpYmVyIGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L2Rlc2NyaWJlcnMvVGVtcGVyYXR1cmVEZXNjcmliZXIuanMnO1xyXG5pbXBvcnQgZ3JlZW5ob3VzZUVmZmVjdCBmcm9tICcuLi8uLi9ncmVlbmhvdXNlRWZmZWN0LmpzJztcclxuaW1wb3J0IEdyZWVuaG91c2VFZmZlY3RTdHJpbmdzIGZyb20gJy4uLy4uL0dyZWVuaG91c2VFZmZlY3RTdHJpbmdzLmpzJztcclxuaW1wb3J0IFdhdmVzTW9kZWwgZnJvbSAnLi4vbW9kZWwvV2F2ZXNNb2RlbC5qcyc7XHJcbmltcG9ydCBUZW1wZXJhdHVyZVVuaXRzIGZyb20gJy4uLy4uL2NvbW1vbi9tb2RlbC9UZW1wZXJhdHVyZVVuaXRzLmpzJztcclxuaW1wb3J0IE11bHRpbGluayBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL011bHRpbGluay5qcyc7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgY3VycmVudGx5U3RyaW5nUHJvcGVydHkgPSBHcmVlbmhvdXNlRWZmZWN0U3RyaW5ncy5hMTF5LndhdmVzLnNjcmVlblN1bW1hcnkuY3VycmVudGx5U3RyaW5nUHJvcGVydHk7XHJcbmNvbnN0IGN1cnJlbnRseVNpbUlzUGF1c2VkU3RyaW5nUHJvcGVydHkgPSBHcmVlbmhvdXNlRWZmZWN0U3RyaW5ncy5hMTF5LndhdmVzLnNjcmVlblN1bW1hcnkuY3VycmVudGx5U2ltSXNQYXVzZWRTdHJpbmdQcm9wZXJ0eTtcclxuY29uc3QgY3VycmVudGx5Tm9TdW5saWdodFN0cmluZ1Byb3BlcnR5ID0gR3JlZW5ob3VzZUVmZmVjdFN0cmluZ3MuYTExeS53YXZlcy5zY3JlZW5TdW1tYXJ5LmN1cnJlbnRseU5vU3VubGlnaHRTdHJpbmdQcm9wZXJ0eTtcclxuY29uc3QgY3VycmVudGx5U2ltSXNQYXVzZWROb1N1bmxpZ2h0U3RyaW5nUHJvcGVydHkgPSBHcmVlbmhvdXNlRWZmZWN0U3RyaW5ncy5hMTF5LndhdmVzLnNjcmVlblN1bW1hcnkuY3VycmVudGx5U2ltSXNQYXVzZWROb1N1bmxpZ2h0U3RyaW5nUHJvcGVydHk7XHJcbmNvbnN0IHN1bW1hcnlXaXRoVGVtcGVyYXR1cmVQYXR0ZXJuU3RyaW5nUHJvcGVydHkgPSBHcmVlbmhvdXNlRWZmZWN0U3RyaW5ncy5hMTF5LndhdmVzLnNjcmVlblN1bW1hcnkuc3VtbWFyeVdpdGhUZW1wZXJhdHVyZVBhdHRlcm5TdHJpbmdQcm9wZXJ0eTtcclxuY29uc3Qgc3VtbWFyeVdpdGhvdXRUZW1wZXJhdHVyZVBhdHRlcm5TdHJpbmdQcm9wZXJ0eSA9IEdyZWVuaG91c2VFZmZlY3RTdHJpbmdzLmExMXkud2F2ZXMuc2NyZWVuU3VtbWFyeS5zdW1tYXJ5V2l0aG91dFRlbXBlcmF0dXJlUGF0dGVyblN0cmluZ1Byb3BlcnR5O1xyXG5jb25zdCBzdXJmYWNlVGVtcGVyYXR1cmVQYXR0ZXJuU3RyaW5nUHJvcGVydHkgPSBHcmVlbmhvdXNlRWZmZWN0U3RyaW5ncy5hMTF5LndhdmVzLnNjcmVlblN1bW1hcnkuc3VyZmFjZVRlbXBlcmF0dXJlUGF0dGVyblN0cmluZ1Byb3BlcnR5O1xyXG5jb25zdCBxdWFsaXRhdGl2ZUFuZFF1YW50aXRhdGl2ZVRlbXBlcmF0dXJlRGVzY3JpcHRpb25QYXR0ZXJuU3RyaW5nUHJvcGVydHkgPSBHcmVlbmhvdXNlRWZmZWN0U3RyaW5ncy5hMTF5LndhdmVzLnNjcmVlblN1bW1hcnkucXVhbGl0YXRpdmVBbmRRdWFudGl0YXRpdmVUZW1wZXJhdHVyZURlc2NyaXB0aW9uUGF0dGVyblN0cmluZ1Byb3BlcnR5O1xyXG5cclxuY2xhc3MgV2F2ZXNTY3JlZW5TdW1tYXJ5Q29udGVudE5vZGUgZXh0ZW5kcyBOb2RlIHtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBtb2RlbDogV2F2ZXNNb2RlbCApIHtcclxuICAgIHN1cGVyKCk7XHJcblxyXG4gICAgY29uc3QgcGxheUFyZWFEZXNjcmlwdGlvbk5vZGUgPSBuZXcgTm9kZSgge1xyXG4gICAgICB0YWdOYW1lOiAncCcsXHJcbiAgICAgIGlubmVyQ29udGVudDogR3JlZW5ob3VzZUVmZmVjdFN0cmluZ3MuYTExeS53YXZlcy5zY3JlZW5TdW1tYXJ5LnBsYXlBcmVhRGVzY3JpcHRpb25TdHJpbmdQcm9wZXJ0eVxyXG4gICAgfSApO1xyXG4gICAgY29uc3QgY29udHJvbEFyZWFEZXNjcmlwdGlvbk5vZGUgPSBuZXcgTm9kZSgge1xyXG4gICAgICB0YWdOYW1lOiAncCcsXHJcbiAgICAgIGlubmVyQ29udGVudDogR3JlZW5ob3VzZUVmZmVjdFN0cmluZ3MuYTExeS53YXZlcy5zY3JlZW5TdW1tYXJ5LmNvbnRyb2xBcmVhRGVzY3JpcHRpb25TdHJpbmdQcm9wZXJ0eVxyXG4gICAgfSApO1xyXG4gICAgY29uc3Qgc2ltU3RhdGVEZXNjcmlwdGlvbk5vZGUgPSBuZXcgTm9kZSggeyB0YWdOYW1lOiAncCcgfSApOyAvLyBjb250ZW50IHNldCB3aXRoIHRoZSBjaGFuZ2luZyBtb2RlbFxyXG4gICAgY29uc3Qgc3RhcnRTdW5saWdodEhpbnROb2RlID0gbmV3IE5vZGUoIHtcclxuICAgICAgdGFnTmFtZTogJ3AnLFxyXG4gICAgICBpbm5lckNvbnRlbnQ6IEdyZWVuaG91c2VFZmZlY3RTdHJpbmdzLmExMXkuc3RhcnRTdW5saWdodEhpbnRTdHJpbmdQcm9wZXJ0eVxyXG4gICAgfSApO1xyXG5cclxuICAgIHRoaXMuY2hpbGRyZW4gPSBbXHJcbiAgICAgIHBsYXlBcmVhRGVzY3JpcHRpb25Ob2RlLFxyXG4gICAgICBjb250cm9sQXJlYURlc2NyaXB0aW9uTm9kZSxcclxuICAgICAgc2ltU3RhdGVEZXNjcmlwdGlvbk5vZGUsXHJcbiAgICAgIHN0YXJ0U3VubGlnaHRIaW50Tm9kZVxyXG4gICAgXTtcclxuXHJcbiAgICBNdWx0aWxpbmsubXVsdGlsaW5rKCBbXHJcbiAgICAgICAgbW9kZWwuc3VuRW5lcmd5U291cmNlLmlzU2hpbmluZ1Byb3BlcnR5LFxyXG4gICAgICAgIG1vZGVsLmlzUGxheWluZ1Byb3BlcnR5LFxyXG4gICAgICAgIG1vZGVsLmNvbmNlbnRyYXRpb25Qcm9wZXJ0eSxcclxuICAgICAgICBtb2RlbC5kYXRlUHJvcGVydHksXHJcbiAgICAgICAgbW9kZWwuc3VyZmFjZVRlbXBlcmF0dXJlS2VsdmluUHJvcGVydHksXHJcbiAgICAgICAgbW9kZWwuY29uY2VudHJhdGlvbkNvbnRyb2xNb2RlUHJvcGVydHksXHJcbiAgICAgICAgbW9kZWwuc3VyZmFjZVRlbXBlcmF0dXJlVmlzaWJsZVByb3BlcnR5LFxyXG4gICAgICAgIG1vZGVsLnN1cmZhY2VUaGVybW9tZXRlclZpc2libGVQcm9wZXJ0eSxcclxuICAgICAgICBtb2RlbC50ZW1wZXJhdHVyZVVuaXRzUHJvcGVydHksXHJcbiAgICAgICAgbW9kZWwuY2xvdWRFbmFibGVkUHJvcGVydHlcclxuICAgICAgXSxcclxuICAgICAgKFxyXG4gICAgICAgIHN1bklzU2hpbmluZyxcclxuICAgICAgICBpc1BsYXlpbmcsXHJcbiAgICAgICAgY29uY2VudHJhdGlvbixcclxuICAgICAgICBkYXRlLFxyXG4gICAgICAgIHN1cmZhY2VUZW1wZXJhdHVyZUtlbHZpbixcclxuICAgICAgICBjb25jZW50cmF0aW9uQ29udHJvbE1vZGUsXHJcbiAgICAgICAgc3VyZmFjZVRlbXBlcmF0dXJlVmlzaWJsZSxcclxuICAgICAgICBzdXJmYWNlVGhlcm1vbWV0ZXJWaXNpYmxlLFxyXG4gICAgICAgIHRlbXBlcmF0dXJlVW5pdHMsXHJcbiAgICAgICAgY2xvdWRFbmFibGVkXHJcbiAgICAgICkgPT4ge1xyXG4gICAgICAgIHNpbVN0YXRlRGVzY3JpcHRpb25Ob2RlLmlubmVyQ29udGVudCA9IHRoaXMuZ2V0U2NyZWVuRGVzY3JpcHRpb25TdHJpbmcoXHJcbiAgICAgICAgICBzdW5Jc1NoaW5pbmcsXHJcbiAgICAgICAgICBpc1BsYXlpbmcsXHJcbiAgICAgICAgICBjb25jZW50cmF0aW9uLFxyXG4gICAgICAgICAgZGF0ZSxcclxuICAgICAgICAgIHN1cmZhY2VUZW1wZXJhdHVyZUtlbHZpbixcclxuICAgICAgICAgIGNvbmNlbnRyYXRpb25Db250cm9sTW9kZSxcclxuICAgICAgICAgIHN1cmZhY2VUZW1wZXJhdHVyZVZpc2libGUsXHJcbiAgICAgICAgICBzdXJmYWNlVGhlcm1vbWV0ZXJWaXNpYmxlLFxyXG4gICAgICAgICAgdGVtcGVyYXR1cmVVbml0cyxcclxuICAgICAgICAgIGNsb3VkRW5hYmxlZFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm5zIGEgZnVsbCBzdW1tYXJ5IG9mIHRoZSB3YXZlcyBzY3JlZW4uIERlcGVuZGVudCBvbiBtb3N0IFByb3BlcnRpZXMgb2YgdGhlIFdhdmVzTW9kZWwuIFJldHVybnMgc29tZXRoaW5nIGxpa2VcclxuICAgKiBcIkN1cnJlbnRseSwgbm8gc3VubGlnaHQgaW4gb2JzZXJ2YXRpb24gd2luZG93OyB0aGUgdGltZSBwZXJpb2QgaXMgdGhlIHllYXIgdHdlbnR5LXR3ZW50eS4gVGhlIHNreSBpcyBjbG91ZHkuXCIgb3JcclxuICAgKiBcIkN1cnJlbnRseSwgbWF4IGxldmVscyBvZiBncmVlbmhvdXNlIGdhc2VzIGluIGF0bW9zcGhlcmUuIEVhcnRo4oCZcyBzdXJmYWNlIHRlbXBlcmF0dXJlIGlzIHZlcnkgaGlnaCwgMjIgZGVncmVlc1xyXG4gICAqIENlbHNpdXMuIFRoZSBza3kgaXMgY2xvdWR5LlwiXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBnZXRTY3JlZW5EZXNjcmlwdGlvblN0cmluZyggc3VuSXNTaGluaW5nOiBib29sZWFuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUGxheWluZzogYm9vbGVhbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25jZW50cmF0aW9uOiBudW1iZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogQ29uY2VudHJhdGlvbkRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VyZmFjZVRlbXBlcmF0dXJlS2VsdmluOiBudW1iZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uY2VudHJhdGlvbkNvbnRyb2xNb2RlOiBDb25jZW50cmF0aW9uQ29udHJvbE1vZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VyZmFjZVRlbXBlcmF0dXJlVmlzaWJsZTogYm9vbGVhbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdXJmYWNlVGhlcm1vbWV0ZXJWaXNpYmxlOiBib29sZWFuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlVW5pdHM6IFRlbXBlcmF0dXJlVW5pdHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvdWRFbmFibGVkOiBib29sZWFuICk6IHN0cmluZyB7XHJcblxyXG4gICAgLy8gdGhlIGZpbmFsIGRlc2NyaXB0aW9uXHJcbiAgICBsZXQgZGVzY3JpcHRpb25TdHJpbmc7XHJcblxyXG4gICAgLy8gdGhlIGxlYWRpbmcgcG9ydGlvbiBvZiB0aGUgc3VtbWFyeSBtYXkgaW5jbHVkZSBhbiBleHRyYSBoaW50IHRoYXQgc3VubGlnaHQgaXNuJ3Qgc2hpbmluZyB5ZXQgb3IgdGhhdFxyXG4gICAgLy8gdGhlIHNpbSBpcyBwYXVzZWRcclxuICAgIGNvbnN0IGN1cnJlbnRseURlc2NyaXB0aW9uU3RyaW5nID0gKCBzdW5Jc1NoaW5pbmcgJiYgaXNQbGF5aW5nICkgPyBjdXJyZW50bHlTdHJpbmdQcm9wZXJ0eS52YWx1ZSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICggc3VuSXNTaGluaW5nICYmICFpc1BsYXlpbmcgKSA/IGN1cnJlbnRseVNpbUlzUGF1c2VkU3RyaW5nUHJvcGVydHkudmFsdWUgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoICFzdW5Jc1NoaW5pbmcgJiYgaXNQbGF5aW5nICkgPyBjdXJyZW50bHlOb1N1bmxpZ2h0U3RyaW5nUHJvcGVydHkudmFsdWUgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHlTaW1Jc1BhdXNlZE5vU3VubGlnaHRTdHJpbmdQcm9wZXJ0eTtcclxuXHJcbiAgICAvLyBwb3J0aW9uIHRoYXQgZGVzY3JpYmVzIHRoZSBzdGF0ZSBvZiB0aGUgc2t5XHJcbiAgICBjb25zdCBza3lEZXNjcmlwdGlvblN0cmluZyA9IENvbmNlbnRyYXRpb25EZXNjcmliZXIuZ2V0U2t5Q2xvdWREZXNjcmlwdGlvbiggY2xvdWRFbmFibGVkICk7XHJcblxyXG4gICAgLy8gcG9ydGlvbiB0aGF0IGRlc2NyaWJlcyB0aGUgc3RhdGUgb2YgdGhlIGNvbmNlbnRyYXRpb24gaW4gdGhlIGF0bW9zcGhlcmVcclxuICAgIGxldCBjb25jZW50cmF0aW9uRGVzY3JpcHRpb25TdHJpbmc7XHJcbiAgICBpZiAoIGNvbmNlbnRyYXRpb25Db250cm9sTW9kZSA9PT0gQ29uY2VudHJhdGlvbkNvbnRyb2xNb2RlLkJZX1ZBTFVFICkge1xyXG5cclxuICAgICAgLy8gSWYgc3VuIGlzIHNoaW5pbmcgYW5kIHNpbSBpcyBwbGF5aW5nLCBjYXBpdGFsaXplIGJlY2F1c2UgdGhpcyB3aWxsIGJlIHJlYWQgYWZ0ZXIgXCJDdXJyZW50bHksIFwiLCBvdGhlcndpc2VcclxuICAgICAgLy8gdGhlIGNvbmNlbnRyYXRpb24gZGVzY3JpcHRpb24gd2lsbCBzdGFydCB0aGUgc2VudGVuY2UuXHJcbiAgICAgIGNvbnN0IGNhcGl0YWxpemUgPSAhKCBzdW5Jc1NoaW5pbmcgJiYgaXNQbGF5aW5nICk7XHJcbiAgICAgIGNvbmNlbnRyYXRpb25EZXNjcmlwdGlvblN0cmluZyA9IENvbmNlbnRyYXRpb25EZXNjcmliZXIuZ2V0Q29uY2VudHJhdGlvbkRlc2NyaXB0aW9uV2l0aFZhbHVlKCBjb25jZW50cmF0aW9uLCBjYXBpdGFsaXplICk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuXHJcbiAgICAgIC8vIGNhcGl0YWxpemUgYmVjYXVzZSBpdCB3aWxsIGJlIGl0cyBvd24gc2VudGVuY2UgaW4gdGhpcyBjb250ZW50XHJcbiAgICAgIGNvbmNlbnRyYXRpb25EZXNjcmlwdGlvblN0cmluZyA9IENvbmNlbnRyYXRpb25EZXNjcmliZXIuZ2V0RnVsbFRpbWVQZXJpb2REZXNjcmlwdGlvbiggZGF0ZSwgdHJ1ZSApO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBwYXR0ZXJuU3RyaW5nO1xyXG5cclxuICAgIC8vIFRoZSByZXN0IG9mIHRoZSBkZXNjcmlwdGlvbiBkZXBlbmRzIG9uIHdoZXRoZXIgd2Ugd2FudCB0byBpbmNsdWRlIGluZm9ybWF0aW9uIGFib3V0IHRlbXBlcmF0dXJlLlxyXG4gICAgLy8gVGVtcGVyYXR1cmUgaW5mb3JtYXRpb24gaXMgaW5jbHVkZWQgaWYgZWxlY3RlZCBieSB0aGUgdXNlciBpbiB0aGUgVUkgd2hpbGUgdGhlIHN1biBpcyBzaGluaW5nLiBEZXNjcmliaW5nXHJcbiAgICAvLyB0ZW1wZXJhdHVyZSB3aGlsZSB0aGUgc3VuIGlzIG5vdCBzaGluaW5nIGNhbiBjcmVhdGUgY29uZnVzaW5nIGRlc2NyaXB0aW9ucyB3aGVyZSB0aGUgY29uY2VudHJhdGlvbiBpcyBoaWdoXHJcbiAgICAvLyBidXQgdGhlIHRlbXBlcmF0dXJlIGlzIHN0aWxsIGxvdy5cclxuICAgIGlmICggKCBzdXJmYWNlVGVtcGVyYXR1cmVWaXNpYmxlIHx8IHN1cmZhY2VUaGVybW9tZXRlclZpc2libGUgKSAmJiBzdW5Jc1NoaW5pbmcgKSB7XHJcbiAgICAgIHBhdHRlcm5TdHJpbmcgPSBzdW1tYXJ5V2l0aFRlbXBlcmF0dXJlUGF0dGVyblN0cmluZ1Byb3BlcnR5LnZhbHVlO1xyXG5cclxuICAgICAgLy8gUG9ydGlvbiB0aGF0IGdlbmVyYXRlcyB0aGUgdGVtcGVyYXR1cmUgZGVzY3JpcHRpb24uIElmIHRoZSB0aGVybW9tZXRlciBpcyB2aXNpYmxlLCBpdCB3aWxsIGluY2x1ZGUgYVxyXG4gICAgICAvLyBxdWFudGl0YXRpdmUgZGVzY3JpcHRpb24gb2YgdGhlIHRlbXBlcmF0dXJlLiBJZiB1c2VyIGhhcyBlbGVjdGVkIHRvIHZpZXcgdGhlIHRlbXBlcmF0dXJlIGluIGFub3RoZXJcclxuICAgICAgLy8gcmVwcmVzZW50YXRpb24gd2UgaW5jbHVkZSBhIHF1YWxpdGF0aXZlIGRlc2NyaXB0aW9uIG9mIHRoZSB0ZW1wZXJhdHVyZS5cclxuICAgICAgY29uc3QgcXVhbGl0YXRpdmVUZW1wZXJhdHVyZURlc2NyaXB0aW9uU3RyaW5nID0gVGVtcGVyYXR1cmVEZXNjcmliZXIuZ2V0UXVhbGl0YXRpdmVUZW1wZXJhdHVyZURlc2NyaXB0aW9uU3RyaW5nKFxyXG4gICAgICAgIHN1cmZhY2VUZW1wZXJhdHVyZUtlbHZpbixcclxuICAgICAgICBjb25jZW50cmF0aW9uQ29udHJvbE1vZGUsXHJcbiAgICAgICAgZGF0ZVxyXG4gICAgICApO1xyXG4gICAgICBjb25zdCBxdWFudGl0YXRpdmVUZW1wZXJhdHVyZURlc2NyaXB0aW9uU3RyaW5nID0gVGVtcGVyYXR1cmVEZXNjcmliZXIuZ2V0UXVhbnRpdGF0aXZlVGVtcGVyYXR1cmVEZXNjcmlwdGlvbihcclxuICAgICAgICBzdXJmYWNlVGVtcGVyYXR1cmVLZWx2aW4sXHJcbiAgICAgICAgdGVtcGVyYXR1cmVVbml0c1xyXG4gICAgICApO1xyXG5cclxuICAgICAgbGV0IHRlbXBlcmF0dXJlRnJhZ21lbnRTdHJpbmc7XHJcbiAgICAgIGlmICggc3VyZmFjZVRlbXBlcmF0dXJlVmlzaWJsZSAmJiBzdXJmYWNlVGhlcm1vbWV0ZXJWaXNpYmxlICkge1xyXG4gICAgICAgIHRlbXBlcmF0dXJlRnJhZ21lbnRTdHJpbmcgPSBTdHJpbmdVdGlscy5maWxsSW4oXHJcbiAgICAgICAgICBxdWFsaXRhdGl2ZUFuZFF1YW50aXRhdGl2ZVRlbXBlcmF0dXJlRGVzY3JpcHRpb25QYXR0ZXJuU3RyaW5nUHJvcGVydHkudmFsdWUsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHF1YWxpdGF0aXZlRGVzY3JpcHRpb246IHF1YWxpdGF0aXZlVGVtcGVyYXR1cmVEZXNjcmlwdGlvblN0cmluZyxcclxuICAgICAgICAgICAgcXVhbnRpdGF0aXZlRGVzY3JpcHRpb246IHF1YW50aXRhdGl2ZVRlbXBlcmF0dXJlRGVzY3JpcHRpb25TdHJpbmdcclxuICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKCBzdXJmYWNlVGVtcGVyYXR1cmVWaXNpYmxlICkge1xyXG4gICAgICAgIHRlbXBlcmF0dXJlRnJhZ21lbnRTdHJpbmcgPSBxdWFsaXRhdGl2ZVRlbXBlcmF0dXJlRGVzY3JpcHRpb25TdHJpbmc7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGVtcGVyYXR1cmVGcmFnbWVudFN0cmluZyA9IHF1YW50aXRhdGl2ZVRlbXBlcmF0dXJlRGVzY3JpcHRpb25TdHJpbmc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHRlbXBlcmF0dXJlRGVzY3JpcHRpb25TdHJpbmcgPSBTdHJpbmdVdGlscy5maWxsSW4oIHN1cmZhY2VUZW1wZXJhdHVyZVBhdHRlcm5TdHJpbmdQcm9wZXJ0eSwge1xyXG4gICAgICAgIHRlbXBlcmF0dXJlRGVzY3JpcHRpb246IHRlbXBlcmF0dXJlRnJhZ21lbnRTdHJpbmdcclxuICAgICAgfSApO1xyXG5cclxuICAgICAgLy8gYXNzZW1ibGUgdGhlIGZpbmFsIGRlc2NyaXB0aW9uIGluY2x1ZGluZyB0ZW1wZXJhdHVyZSBpbmZvcm1hdGlvblxyXG4gICAgICBkZXNjcmlwdGlvblN0cmluZyA9IFN0cmluZ1V0aWxzLmZpbGxJbiggcGF0dGVyblN0cmluZywge1xyXG4gICAgICAgIGN1cnJlbnRseURlc2NyaXB0aW9uOiBjdXJyZW50bHlEZXNjcmlwdGlvblN0cmluZyxcclxuICAgICAgICBjb25jZW50cmF0aW9uRGVzY3JpcHRpb246IGNvbmNlbnRyYXRpb25EZXNjcmlwdGlvblN0cmluZyxcclxuICAgICAgICB0ZW1wZXJhdHVyZURlc2NyaXB0aW9uOiB0ZW1wZXJhdHVyZURlc2NyaXB0aW9uU3RyaW5nLFxyXG4gICAgICAgIHNreURlc2NyaXB0aW9uOiBza3lEZXNjcmlwdGlvblN0cmluZ1xyXG4gICAgICB9ICk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuXHJcbiAgICAgIC8vIGFzc2VtYmxlIHRoZSBmaW5hbCBkZXNjcmlwdGlvbiB3aXRob3V0IHRlbXBlcmF0dXJlIGluZm9ybWF0aW9uXHJcbiAgICAgIHBhdHRlcm5TdHJpbmcgPSBzdW1tYXJ5V2l0aG91dFRlbXBlcmF0dXJlUGF0dGVyblN0cmluZ1Byb3BlcnR5LnZhbHVlO1xyXG4gICAgICBkZXNjcmlwdGlvblN0cmluZyA9IFN0cmluZ1V0aWxzLmZpbGxJbiggcGF0dGVyblN0cmluZywge1xyXG4gICAgICAgIGN1cnJlbnRseURlc2NyaXB0aW9uOiBjdXJyZW50bHlEZXNjcmlwdGlvblN0cmluZyxcclxuICAgICAgICBjb25jZW50cmF0aW9uRGVzY3JpcHRpb246IGNvbmNlbnRyYXRpb25EZXNjcmlwdGlvblN0cmluZyxcclxuICAgICAgICBza3lEZXNjcmlwdGlvbjogc2t5RGVzY3JpcHRpb25TdHJpbmdcclxuICAgICAgfSApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkZXNjcmlwdGlvblN0cmluZztcclxuICB9XHJcbn1cclxuXHJcbmdyZWVuaG91c2VFZmZlY3QucmVnaXN0ZXIoICdXYXZlc1NjcmVlblN1bW1hcnlDb250ZW50Tm9kZScsIFdhdmVzU2NyZWVuU3VtbWFyeUNvbnRlbnROb2RlICk7XHJcbmV4cG9ydCBkZWZhdWx0IFdhdmVzU2NyZWVuU3VtbWFyeUNvbnRlbnROb2RlO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFdBQVcsTUFBTSwrQ0FBK0M7QUFDdkUsU0FBU0Ms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