// Copyright 2021-2023, University of Colorado Boulder

/**
 * EnergyRateTracker uses a moving average calculation to track the amount of energy that is moving into or out of a
 * system.
 *
 * This class has no `step` method, and is expected to be essentially stepped by consistent addition of energy amounts,
 * even if those amounts are zero.
 *
 * @author John Blanco (PhET Interactive Simulations)
 */

import NumberProperty from '../../../../axon/js/NumberProperty.js';
import Utils from '../../../../dot/js/Utils.js';
import optionize from '../../../../phet-core/js/optionize.js';
import PhetioObject from '../../../../tandem/js/PhetioObject.js';
import ArrayIO from '../../../../tandem/js/types/ArrayIO.js';
import IOType from '../../../../tandem/js/types/IOType.js';
import NumberIO from '../../../../tandem/js/types/NumberIO.js';
import greenhouseEffect from '../../greenhouseEffect.js';

// constants
const DEFAULT_ACCUMULATION_PERIOD = 1; // in seconds
const DECIMAL_PLACES = 1; // used to round the output value so that there isn't too much "noise" due to floating point errors and such

/**
 * Simple data type used for tracking energy within EnergyRateTracker.
 */
class EnergyInfoQueueItem {
  constructor(dt, energy) {
    this.dt = dt;
    this.energy = energy;
  }
  static EnergyInfoQueueItemIO = new IOType('EnergyInfoQueueItemIO', {
    valueType: EnergyInfoQueueItem,
    stateSchema: {
      dt: NumberIO,
      energy: NumberIO
    },
    fromStateObject: stateObject => new EnergyInfoQueueItem(stateObject.dt, stateObject.energy)
  });
}
class EnergyRateTracker extends PhetioObject {
  // the period of time over which the recorded values are averaged

  // current total energy for the accumulation period

  // a queue containing information about energy packets

  constructor(providedOptions) {
    const options = optionize()({
      accumulationPeriod: DEFAULT_ACCUMULATION_PERIOD,
      // phet-io
      phetioType: EnergyRateTracker.EnergyRateTrackerIO
    }, providedOptions);
    super(options);
    this.energyRateProperty = new NumberProperty(0, {
      units: 'W',
      tandem: options.tandem.createTandem('energyRateProperty'),
      phetioDocumentation: 'Amount of energy being produced or absorbed.'
    });
    this.energyInfoQueue = [];
    this.accumulationPeriod = options.accumulationPeriod;
  }

  /**
   * @param energy - amount of energy to be recorded for this step, in joules
   * @param dt - delta time, in seconds
   */
  addEnergyInfo(energy, dt) {
    // Put the new energy information into the queue.
    this.energyInfoQueue.push(new EnergyInfoQueueItem(dt, energy));

    // Variables for the accumulator calculation.
    let totalEnergy = 0;
    let totalTime = 0;
    const energyInfoQueueCopy = [...this.energyInfoQueue];

    // Move through the queue from the newest to the oldest entry, accumulating time and energy info and deleting
    // entries that have "aged out".
    for (let i = energyInfoQueueCopy.length - 1; i >= 0; i--) {
      const energyInfoEntry = energyInfoQueueCopy[i];
      if (totalTime + energyInfoEntry.dt <= this.accumulationPeriod) {
        // Add the information from this entry to the accumulator totals.
        totalEnergy += energyInfoEntry.energy;
        totalTime += energyInfoEntry.dt;
      } else {
        // There are entries in the queue that exceed the time span, so remove them and exit the loop.
        const entriesToRemove = i + 1;
        _.times(entriesToRemove, () => this.energyInfoQueue.shift());
        break;
      }
    }

    // Update the publicly available energy total value.
    this.energyRateProperty.set(Utils.toFixedNumber(totalEnergy / totalTime, DECIMAL_PLACES));
  }

  /**
   * Reset to initial state.
   */
  reset() {
    this.energyInfoQueue.length = 0;
    this.energyRateProperty.reset();
  }
  static EnergyRateTrackerIO = new IOType('EnergyRateTrackerIO', {
    valueType: EnergyRateTracker,
    stateSchema: {
      energyInfoQueue: ArrayIO(EnergyInfoQueueItem.EnergyInfoQueueItemIO)
    },
    defaultDeserializationMethod: 'applyState'
  });
}

/**
 * for phet-io
 */

greenhouseEffect.register('EnergyRateTracker', EnergyRateTracker);
export default EnergyRateTracker;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJOdW1iZXJQcm9wZXJ0eSIsIlV0aWxzIiwib3B0aW9uaXplIiwiUGhldGlvT2JqZWN0IiwiQXJyYXlJTyIsIklPVHlwZSIsIk51bWJlcklPIiwiZ3JlZW5ob3VzZUVmZmVjdCIsIkRFRkFVTFRfQUNDVU1VTEFUSU9OX1BFUklPRCIsIkRFQ0lNQUxfUExBQ0VTIiwiRW5lcmd5SW5mb1F1ZXVlSXRlbSIsImNvbnN0cnVjdG9yIiwiZHQiLCJlbmVyZ3kiLCJFbmVyZ3lJbmZvUXVldWVJdGVtSU8iLCJ2YWx1ZVR5cGUiLCJzdGF0ZVNjaGVtYSIsImZyb21TdGF0ZU9iamVjdCIsInN0YXRlT2JqZWN0IiwiRW5lcmd5UmF0ZVRyYWNrZXIiLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwiYWNjdW11bGF0aW9uUGVyaW9kIiwicGhldGlvVHlwZSIsIkVuZXJneVJhdGVUcmFja2VySU8iLCJlbmVyZ3lSYXRlUHJvcGVydHkiLCJ1bml0cyIsInRhbmRlbSIsImNyZWF0ZVRhbmRlbSIsInBoZXRpb0RvY3VtZW50YXRpb24iLCJlbmVyZ3lJbmZvUXVldWUiLCJhZGRFbmVyZ3lJbmZvIiwicHVzaCIsInRvdGFsRW5lcmd5IiwidG90YWxUaW1lIiwiZW5lcmd5SW5mb1F1ZXVlQ29weSIsImkiLCJsZW5ndGgiLCJlbmVyZ3lJbmZvRW50cnkiLCJlbnRyaWVzVG9SZW1vdmUiLCJfIiwidGltZXMiLCJzaGlmdCIsInNldCIsInRvRml4ZWROdW1iZXIiLCJyZXNldCIsImRlZmF1bHREZXNlcmlhbGl6YXRpb25NZXRob2QiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkVuZXJneVJhdGVUcmFja2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIxLTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIEVuZXJneVJhdGVUcmFja2VyIHVzZXMgYSBtb3ZpbmcgYXZlcmFnZSBjYWxjdWxhdGlvbiB0byB0cmFjayB0aGUgYW1vdW50IG9mIGVuZXJneSB0aGF0IGlzIG1vdmluZyBpbnRvIG9yIG91dCBvZiBhXHJcbiAqIHN5c3RlbS5cclxuICpcclxuICogVGhpcyBjbGFzcyBoYXMgbm8gYHN0ZXBgIG1ldGhvZCwgYW5kIGlzIGV4cGVjdGVkIHRvIGJlIGVzc2VudGlhbGx5IHN0ZXBwZWQgYnkgY29uc2lzdGVudCBhZGRpdGlvbiBvZiBlbmVyZ3kgYW1vdW50cyxcclxuICogZXZlbiBpZiB0aG9zZSBhbW91bnRzIGFyZSB6ZXJvLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvaG4gQmxhbmNvIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxyXG4gKi9cclxuXHJcbmltcG9ydCBOdW1iZXJQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL051bWJlclByb3BlcnR5LmpzJztcclxuaW1wb3J0IFV0aWxzIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9VdGlscy5qcyc7XHJcbmltcG9ydCBvcHRpb25pemUgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCBQaWNrUmVxdWlyZWQgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL1BpY2tSZXF1aXJlZC5qcyc7XHJcbmltcG9ydCBQaGV0aW9PYmplY3QsIHsgUGhldGlvT2JqZWN0T3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL3RhbmRlbS9qcy9QaGV0aW9PYmplY3QuanMnO1xyXG5pbXBvcnQgQXJyYXlJTyBmcm9tICcuLi8uLi8uLi8uLi90YW5kZW0vanMvdHlwZXMvQXJyYXlJTy5qcyc7XHJcbmltcG9ydCBJT1R5cGUgZnJvbSAnLi4vLi4vLi4vLi4vdGFuZGVtL2pzL3R5cGVzL0lPVHlwZS5qcyc7XHJcbmltcG9ydCBOdW1iZXJJTyBmcm9tICcuLi8uLi8uLi8uLi90YW5kZW0vanMvdHlwZXMvTnVtYmVySU8uanMnO1xyXG5pbXBvcnQgZ3JlZW5ob3VzZUVmZmVjdCBmcm9tICcuLi8uLi9ncmVlbmhvdXNlRWZmZWN0LmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBERUZBVUxUX0FDQ1VNVUxBVElPTl9QRVJJT0QgPSAxOyAvLyBpbiBzZWNvbmRzXHJcbmNvbnN0IERFQ0lNQUxfUExBQ0VTID0gMTsgLy8gdXNlZCB0byByb3VuZCB0aGUgb3V0cHV0IHZhbHVlIHNvIHRoYXQgdGhlcmUgaXNuJ3QgdG9vIG11Y2ggXCJub2lzZVwiIGR1ZSB0byBmbG9hdGluZyBwb2ludCBlcnJvcnMgYW5kIHN1Y2hcclxuXHJcbi8qKlxyXG4gKiBTaW1wbGUgZGF0YSB0eXBlIHVzZWQgZm9yIHRyYWNraW5nIGVuZXJneSB3aXRoaW4gRW5lcmd5UmF0ZVRyYWNrZXIuXHJcbiAqL1xyXG5jbGFzcyBFbmVyZ3lJbmZvUXVldWVJdGVtIHtcclxuICBwdWJsaWMgcmVhZG9ubHkgZHQ6IG51bWJlcjtcclxuICBwdWJsaWMgcmVhZG9ubHkgZW5lcmd5OiBudW1iZXI7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggZHQ6IG51bWJlciwgZW5lcmd5OiBudW1iZXIgKSB7XHJcbiAgICB0aGlzLmR0ID0gZHQ7XHJcbiAgICB0aGlzLmVuZXJneSA9IGVuZXJneTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRW5lcmd5SW5mb1F1ZXVlSXRlbUlPID0gbmV3IElPVHlwZSggJ0VuZXJneUluZm9RdWV1ZUl0ZW1JTycsIHtcclxuICAgIHZhbHVlVHlwZTogRW5lcmd5SW5mb1F1ZXVlSXRlbSxcclxuICAgIHN0YXRlU2NoZW1hOiB7XHJcbiAgICAgIGR0OiBOdW1iZXJJTyxcclxuICAgICAgZW5lcmd5OiBOdW1iZXJJT1xyXG4gICAgfSxcclxuICAgIGZyb21TdGF0ZU9iamVjdDogKCBzdGF0ZU9iamVjdDogRW5lcmd5SW5mb1F1ZXVlSXRlbVN0YXRlT2JqZWN0ICkgPT4gbmV3IEVuZXJneUluZm9RdWV1ZUl0ZW0oXHJcbiAgICAgIHN0YXRlT2JqZWN0LmR0LFxyXG4gICAgICBzdGF0ZU9iamVjdC5lbmVyZ3lcclxuICAgIClcclxuICB9ICk7XHJcbn1cclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSB7XHJcbiAgYWNjdW11bGF0aW9uUGVyaW9kPzogbnVtYmVyO1xyXG59O1xyXG5leHBvcnQgdHlwZSBFbmVyZ3lSYXRlVHJhY2tlck9wdGlvbnMgPSBTZWxmT3B0aW9ucyAmIFBoZXRpb09iamVjdE9wdGlvbnMgJiBQaWNrUmVxdWlyZWQ8UGhldGlvT2JqZWN0T3B0aW9ucywgJ3RhbmRlbSc+O1xyXG5cclxuY2xhc3MgRW5lcmd5UmF0ZVRyYWNrZXIgZXh0ZW5kcyBQaGV0aW9PYmplY3Qge1xyXG5cclxuICAvLyB0aGUgcGVyaW9kIG9mIHRpbWUgb3ZlciB3aGljaCB0aGUgcmVjb3JkZWQgdmFsdWVzIGFyZSBhdmVyYWdlZFxyXG4gIHByaXZhdGUgcmVhZG9ubHkgYWNjdW11bGF0aW9uUGVyaW9kOiBudW1iZXI7XHJcblxyXG4gIC8vIGN1cnJlbnQgdG90YWwgZW5lcmd5IGZvciB0aGUgYWNjdW11bGF0aW9uIHBlcmlvZFxyXG4gIHB1YmxpYyByZWFkb25seSBlbmVyZ3lSYXRlUHJvcGVydHk6IE51bWJlclByb3BlcnR5O1xyXG5cclxuICAvLyBhIHF1ZXVlIGNvbnRhaW5pbmcgaW5mb3JtYXRpb24gYWJvdXQgZW5lcmd5IHBhY2tldHNcclxuICBwcml2YXRlIHJlYWRvbmx5IGVuZXJneUluZm9RdWV1ZTogRW5lcmd5SW5mb1F1ZXVlSXRlbVtdO1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIHByb3ZpZGVkT3B0aW9ucz86IEVuZXJneVJhdGVUcmFja2VyT3B0aW9ucyApIHtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPEVuZXJneVJhdGVUcmFja2VyT3B0aW9ucywgU2VsZk9wdGlvbnMsIFBoZXRpb09iamVjdE9wdGlvbnM+KCkoIHtcclxuXHJcbiAgICAgIGFjY3VtdWxhdGlvblBlcmlvZDogREVGQVVMVF9BQ0NVTVVMQVRJT05fUEVSSU9ELFxyXG5cclxuICAgICAgLy8gcGhldC1pb1xyXG4gICAgICBwaGV0aW9UeXBlOiBFbmVyZ3lSYXRlVHJhY2tlci5FbmVyZ3lSYXRlVHJhY2tlcklPXHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICBzdXBlciggb3B0aW9ucyApO1xyXG5cclxuICAgIHRoaXMuZW5lcmd5UmF0ZVByb3BlcnR5ID0gbmV3IE51bWJlclByb3BlcnR5KCAwLCB7XHJcbiAgICAgIHVuaXRzOiAnVycsXHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnZW5lcmd5UmF0ZVByb3BlcnR5JyApLFxyXG4gICAgICBwaGV0aW9Eb2N1bWVudGF0aW9uOiAnQW1vdW50IG9mIGVuZXJneSBiZWluZyBwcm9kdWNlZCBvciBhYnNvcmJlZC4nXHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5lbmVyZ3lJbmZvUXVldWUgPSBbXTtcclxuXHJcbiAgICB0aGlzLmFjY3VtdWxhdGlvblBlcmlvZCA9IG9wdGlvbnMuYWNjdW11bGF0aW9uUGVyaW9kITtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSBlbmVyZ3kgLSBhbW91bnQgb2YgZW5lcmd5IHRvIGJlIHJlY29yZGVkIGZvciB0aGlzIHN0ZXAsIGluIGpvdWxlc1xyXG4gICAqIEBwYXJhbSBkdCAtIGRlbHRhIHRpbWUsIGluIHNlY29uZHNcclxuICAgKi9cclxuICBwdWJsaWMgYWRkRW5lcmd5SW5mbyggZW5lcmd5OiBudW1iZXIsIGR0OiBudW1iZXIgKTogdm9pZCB7XHJcblxyXG4gICAgLy8gUHV0IHRoZSBuZXcgZW5lcmd5IGluZm9ybWF0aW9uIGludG8gdGhlIHF1ZXVlLlxyXG4gICAgdGhpcy5lbmVyZ3lJbmZvUXVldWUucHVzaCggbmV3IEVuZXJneUluZm9RdWV1ZUl0ZW0oIGR0LCBlbmVyZ3kgKSApO1xyXG5cclxuICAgIC8vIFZhcmlhYmxlcyBmb3IgdGhlIGFjY3VtdWxhdG9yIGNhbGN1bGF0aW9uLlxyXG4gICAgbGV0IHRvdGFsRW5lcmd5ID0gMDtcclxuICAgIGxldCB0b3RhbFRpbWUgPSAwO1xyXG4gICAgY29uc3QgZW5lcmd5SW5mb1F1ZXVlQ29weSA9IFsgLi4udGhpcy5lbmVyZ3lJbmZvUXVldWUgXTtcclxuXHJcbiAgICAvLyBNb3ZlIHRocm91Z2ggdGhlIHF1ZXVlIGZyb20gdGhlIG5ld2VzdCB0byB0aGUgb2xkZXN0IGVudHJ5LCBhY2N1bXVsYXRpbmcgdGltZSBhbmQgZW5lcmd5IGluZm8gYW5kIGRlbGV0aW5nXHJcbiAgICAvLyBlbnRyaWVzIHRoYXQgaGF2ZSBcImFnZWQgb3V0XCIuXHJcbiAgICBmb3IgKCBsZXQgaSA9IGVuZXJneUluZm9RdWV1ZUNvcHkubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0gKSB7XHJcbiAgICAgIGNvbnN0IGVuZXJneUluZm9FbnRyeSA9IGVuZXJneUluZm9RdWV1ZUNvcHlbIGkgXTtcclxuICAgICAgaWYgKCB0b3RhbFRpbWUgKyBlbmVyZ3lJbmZvRW50cnkuZHQgPD0gdGhpcy5hY2N1bXVsYXRpb25QZXJpb2QgKSB7XHJcblxyXG4gICAgICAgIC8vIEFkZCB0aGUgaW5mb3JtYXRpb24gZnJvbSB0aGlzIGVudHJ5IHRvIHRoZSBhY2N1bXVsYXRvciB0b3RhbHMuXHJcbiAgICAgICAgdG90YWxFbmVyZ3kgKz0gZW5lcmd5SW5mb0VudHJ5LmVuZXJneTtcclxuICAgICAgICB0b3RhbFRpbWUgKz0gZW5lcmd5SW5mb0VudHJ5LmR0O1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG5cclxuICAgICAgICAvLyBUaGVyZSBhcmUgZW50cmllcyBpbiB0aGUgcXVldWUgdGhhdCBleGNlZWQgdGhlIHRpbWUgc3Bhbiwgc28gcmVtb3ZlIHRoZW0gYW5kIGV4aXQgdGhlIGxvb3AuXHJcbiAgICAgICAgY29uc3QgZW50cmllc1RvUmVtb3ZlID0gaSArIDE7XHJcbiAgICAgICAgXy50aW1lcyggZW50cmllc1RvUmVtb3ZlLCAoKSA9PiB0aGlzLmVuZXJneUluZm9RdWV1ZS5zaGlmdCgpICk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBVcGRhdGUgdGhlIHB1YmxpY2x5IGF2YWlsYWJsZSBlbmVyZ3kgdG90YWwgdmFsdWUuXHJcbiAgICB0aGlzLmVuZXJneVJhdGVQcm9wZXJ0eS5zZXQoIFV0aWxzLnRvRml4ZWROdW1iZXIoIHRvdGFsRW5lcmd5IC8gdG90YWxUaW1lLCBERUNJTUFMX1BMQUNFUyApICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXNldCB0byBpbml0aWFsIHN0YXRlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcclxuICAgIHRoaXMuZW5lcmd5SW5mb1F1ZXVlLmxlbmd0aCA9IDA7XHJcbiAgICB0aGlzLmVuZXJneVJhdGVQcm9wZXJ0eS5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBFbmVyZ3lSYXRlVHJhY2tlcklPID0gbmV3IElPVHlwZSggJ0VuZXJneVJhdGVUcmFja2VySU8nLCB7XHJcbiAgICB2YWx1ZVR5cGU6IEVuZXJneVJhdGVUcmFja2VyLFxyXG4gICAgc3RhdGVTY2hlbWE6IHtcclxuICAgICAgZW5lcmd5SW5mb1F1ZXVlOiBBcnJheUlPKCBFbmVyZ3lJbmZvUXVldWVJdGVtLkVuZXJneUluZm9RdWV1ZUl0ZW1JTyApXHJcbiAgICB9LFxyXG4gICAgZGVmYXVsdERlc2VyaWFsaXphdGlvbk1ldGhvZDogJ2FwcGx5U3RhdGUnXHJcbiAgfSApO1xyXG59XHJcblxyXG4vKipcclxuICogZm9yIHBoZXQtaW9cclxuICovXHJcbnR5cGUgRW5lcmd5SW5mb1F1ZXVlSXRlbVN0YXRlT2JqZWN0ID0ge1xyXG4gIGR0OiBudW1iZXI7XHJcbiAgZW5lcmd5OiBudW1iZXI7XHJcbn07XHJcblxyXG5ncmVlbmhvdXNlRWZmZWN0LnJlZ2lzdGVyKCAnRW5lcmd5UmF0ZVRyYWNrZXInLCBFbmVyZ3lSYXRlVHJhY2tlciApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgRW5lcmd5UmF0ZVRyYWNrZXI7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsY0FBYyxNQUFNLHVDQUF1QztBQUNsRSxPQUFPQyxLQUFLLE1BQU0sNkJBQTZCO0FBQy9DLE9BQU9DLFNBQVMsTUFBTSx1Q0FBdUM7QUFFN0QsT0FBT0MsWUFBWSxNQUErQix1Q0FBdUM7QUFDekYsT0FBT0MsT0FBTyxNQUFNLHdDQUF3QztBQUM1RCxPQUFPQyxNQUFNLE1BQU0sdUNBQXVDO0FBQzFELE9BQU9DLFFBQVEsTUFBTSx5Q0FBeUM7QUFDOUQsT0FBT0MsZ0JBQWdCLE1BQU0sMkJBQTJCOztBQUV4RDtBQUNBLE1BQU1DLDJCQUEyQixHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ3ZDLE1BQU1DLGNBQWMsR0FBRyxDQUFDLENBQUMsQ0FBQzs7QUFFMUI7QUFDQTtBQUNBO0FBQ0EsTUFBTUMsbUJBQW1CLENBQUM7RUFJakJDLFdBQVdBLENBQUVDLEVBQVUsRUFBRUMsTUFBYyxFQUFHO0lBQy9DLElBQUksQ0FBQ0QsRUFBRSxHQUFHQSxFQUFFO0lBQ1osSUFBSSxDQUFDQyxNQUFNLEdBQUdBLE1BQU07RUFDdEI7RUFFQSxPQUF1QkMscUJBQXFCLEdBQUcsSUFBSVQsTUFBTSxDQUFFLHVCQUF1QixFQUFFO0lBQ2xGVSxTQUFTLEVBQUVMLG1CQUFtQjtJQUM5Qk0sV0FBVyxFQUFFO01BQ1hKLEVBQUUsRUFBRU4sUUFBUTtNQUNaTyxNQUFNLEVBQUVQO0lBQ1YsQ0FBQztJQUNEVyxlQUFlLEVBQUlDLFdBQTJDLElBQU0sSUFBSVIsbUJBQW1CLENBQ3pGUSxXQUFXLENBQUNOLEVBQUUsRUFDZE0sV0FBVyxDQUFDTCxNQUNkO0VBQ0YsQ0FBRSxDQUFDO0FBQ0w7QUFPQSxNQUFNTSxpQkFBaUIsU0FBU2hCLFlBQVksQ0FBQztFQUUzQzs7RUFHQTs7RUFHQTs7RUFHT1EsV0FBV0EsQ0FBRVMsZUFBMEMsRUFBRztJQUUvRCxNQUFNQyxPQUFPLEdBQUduQixTQUFTLENBQTZELENBQUMsQ0FBRTtNQUV2Rm9CLGtCQUFrQixFQUFFZCwyQkFBMkI7TUFFL0M7TUFDQWUsVUFBVSxFQUFFSixpQkFBaUIsQ0FBQ0s7SUFDaEMsQ0FBQyxFQUFFSixlQUFnQixDQUFDO0lBRXBCLEtBQUssQ0FBRUMsT0FBUSxDQUFDO0lBRWhCLElBQUksQ0FBQ0ksa0JBQWtCLEdBQUcsSUFBSXpCLGNBQWMsQ0FBRSxDQUFDLEVBQUU7TUFDL0MwQixLQUFLLEVBQUUsR0FBRztNQUNWQyxNQUFNLEVBQUVOLE9BQU8sQ0FBQ00sTUFBTSxDQUFDQyxZQUFZLENBQUUsb0JBQXFCLENBQUM7TUFDM0RDLG1CQUFtQixFQUFFO0lBQ3ZCLENBQUUsQ0FBQztJQUVILElBQUksQ0FBQ0MsZUFBZSxHQUFHLEVBQUU7SUFFekIsSUFBSSxDQUFDUixrQkFBa0IsR0FBR0QsT0FBTyxDQUFDQyxrQkFBbUI7RUFDdkQ7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7RUFDU1MsYUFBYUEsQ0FBRWxCLE1BQWMsRUFBRUQsRUFBVSxFQUFTO0lBRXZEO0lBQ0EsSUFBSSxDQUFDa0IsZUFBZSxDQUFDRSxJQUFJLENBQUUsSUFBSXRCLG1CQUFtQixDQUFFRSxFQUFFLEVBQUVDLE1BQU8sQ0FBRSxDQUFDOztJQUVsRTtJQUNBLElBQUlvQixXQUFXLEdBQUcsQ0FBQztJQUNuQixJQUFJQyxTQUFTLEdBQUcsQ0FBQztJQUNqQixNQUFNQyxtQkFBbUIsR0FBRyxDQUFFLEdBQUcsSUFBSSxDQUFDTCxlQUFlLENBQUU7O0lBRXZEO0lBQ0E7SUFDQSxLQUFNLElBQUlNLENBQUMsR0FBR0QsbUJBQW1CLENBQUNFLE1BQU0sR0FBRyxDQUFDLEVBQUVELENBQUMsSUFBSSxDQUFDLEVBQUVBLENBQUMsRUFBRSxFQUFHO01BQzFELE1BQU1FLGVBQWUsR0FBR0gsbUJBQW1CLENBQUVDLENBQUMsQ0FBRTtNQUNoRCxJQUFLRixTQUFTLEdBQUdJLGVBQWUsQ0FBQzFCLEVBQUUsSUFBSSxJQUFJLENBQUNVLGtCQUFrQixFQUFHO1FBRS9EO1FBQ0FXLFdBQVcsSUFBSUssZUFBZSxDQUFDekIsTUFBTTtRQUNyQ3FCLFNBQVMsSUFBSUksZUFBZSxDQUFDMUIsRUFBRTtNQUNqQyxDQUFDLE1BQ0k7UUFFSDtRQUNBLE1BQU0yQixlQUFlLEdBQUdILENBQUMsR0FBRyxDQUFDO1FBQzdCSSxDQUFDLENBQUNDLEtBQUssQ0FBRUYsZUFBZSxFQUFFLE1BQU0sSUFBSSxDQUFDVCxlQUFlLENBQUNZLEtBQUssQ0FBQyxDQUFFLENBQUM7UUFDOUQ7TUFDRjtJQUNGOztJQUVBO0lBQ0EsSUFBSSxDQUFDakIsa0JBQWtCLENBQUNrQixHQUFHLENBQUUxQyxLQUFLLENBQUMyQyxhQUFhLENBQUVYLFdBQVcsR0FBR0MsU0FBUyxFQUFFekIsY0FBZSxDQUFFLENBQUM7RUFDL0Y7O0VBRUE7QUFDRjtBQUNBO0VBQ1NvQyxLQUFLQSxDQUFBLEVBQVM7SUFDbkIsSUFBSSxDQUFDZixlQUFlLENBQUNPLE1BQU0sR0FBRyxDQUFDO0lBQy9CLElBQUksQ0FBQ1osa0JBQWtCLENBQUNvQixLQUFLLENBQUMsQ0FBQztFQUNqQztFQUVBLE9BQXVCckIsbUJBQW1CLEdBQUcsSUFBSW5CLE1BQU0sQ0FBRSxxQkFBcUIsRUFBRTtJQUM5RVUsU0FBUyxFQUFFSSxpQkFBaUI7SUFDNUJILFdBQVcsRUFBRTtNQUNYYyxlQUFlLEVBQUUxQixPQUFPLENBQUVNLG1CQUFtQixDQUFDSSxxQkFBc0I7SUFDdEUsQ0FBQztJQUNEZ0MsNEJBQTRCLEVBQUU7RUFDaEMsQ0FBRSxDQUFDO0FBQ0w7O0FBRUE7QUFDQTtBQUNBOztBQU1BdkMsZ0JBQWdCLENBQUN3QyxRQUFRLENBQUUsbUJBQW1CLEVBQUU1QixpQkFBa0IsQ0FBQztBQUVuRSxlQUFlQSxpQkFBaUIifQ==