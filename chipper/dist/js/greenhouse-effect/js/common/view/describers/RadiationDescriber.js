// Copyright 2021-2022, University of Colorado Boulder

/**
 * Responsible for generating the descriptions related to radiation in this simulation.
 * @author Jesse Greenberg (PhET Interactive Simulations)
 */

import StringUtils from '../../../../../phetcommon/js/util/StringUtils.js';
import greenhouseEffect from '../../../greenhouseEffect.js';
import GreenhouseEffectStrings from '../../../GreenhouseEffectStrings.js';
import GroundLayer from '../../model/GroundLayer.js';
import TemperatureDescriber from './TemperatureDescriber.js';
import { ConcentrationControlMode } from '../../model/ConcentrationModel.js';
import ConcentrationDescriber from './ConcentrationDescriber.js';
const infraredEmissionIntensityPatternStringProperty = GreenhouseEffectStrings.a11y.infraredEmissionIntensityPatternStringProperty;
const infraredEmissionIntensityWithRedirectionPatternStringProperty = GreenhouseEffectStrings.a11y.infraredEmissionIntensityWithRedirectionPatternStringProperty;
const sunlightStartedStringProperty = GreenhouseEffectStrings.a11y.sunlightStartedStringProperty;
const sunlightStartedSimPausedStringProperty = GreenhouseEffectStrings.a11y.sunlightStartedSimPausedStringProperty;
class RadiationDescriber {
  constructor(model) {
    this.model = model;
  }

  /**
   * Generates a description of the changing radiation as it is redirected with changing concentrations. Will return
   * something like
   * "More infrared radiation redirecting back to surface." or
   * "Less infrared radiation redirecting back to surface." or
   * "No infrared radiation redirecting back to surface."
   */
  static getRadiationRedirectionDescription(newConcentration, oldConcentration) {
    return RadiationDescriber.getRadiationChangeDescription(GreenhouseEffectStrings.a11y.infraredRadiationRedirectingPatternStringProperty.value, newConcentration, oldConcentration, true // describe when no concentration is redirected from atmosphere
    );
  }

  /**
   * Generates a description of the change in radiation being emitting from the earth surface. Will return something like
   * "More infrared radiation emitting from surface." or
   * "Less infrared radiation emitting from surface.".
   */
  static getRadiationFromSurfaceChangeDescription(newConcentration, oldConcentration) {
    return RadiationDescriber.getRadiationChangeDescription(GreenhouseEffectStrings.a11y.infraredRadiationEmittedFromSurfacePatternStringProperty.value, newConcentration, oldConcentration);
  }

  /**
   * Generates a description for the changing radiation. Depending on the provided string patterns, will return
   * something like:
   * "More infrared radiation emitting from surface." or
   * "Less infrared radiation redirecting back to surface." or
   * "No infrared radiation redirecting back to surface".
   *
   * @param patternString - Must have a 'change' param to fill in
   * @param newConcentration
   * @param oldConcentration
   * @param describeNoConcentration - If true, 'no' concentration case will be described. Otherwise, reaching zero
   *                                  concentration will be described as 'less'.
   */
  static getRadiationChangeDescription(patternString, newConcentration, oldConcentration, describeNoConcentration) {
    let response = null;
    if (newConcentration !== oldConcentration) {
      let changeString;
      if (describeNoConcentration && newConcentration === 0) {
        changeString = GreenhouseEffectStrings.a11y.noStringProperty.value;
      } else {
        changeString = newConcentration > oldConcentration ? GreenhouseEffectStrings.a11y.moreStringProperty.value : GreenhouseEffectStrings.a11y.lessStringProperty.value;
      }
      response = StringUtils.fillIn(patternString, {
        moreOrLess: changeString
      });
    }
    return response;
  }
  static getRedirectedInfraredDescription(concentration, concentrationControlMode, date) {
    // Get the description from the concentration describer, since the amount of IR that is redirected it completely
    // dependent on the concentration level.
    const qualitativeDescriptionOfRedirection = concentrationControlMode === ConcentrationControlMode.BY_VALUE ? ConcentrationDescriber.getQualitativeConcentrationDescription(concentration) : ConcentrationDescriber.getHistoricalQualitativeConcentrationDescription(date);
    return StringUtils.capitalize(StringUtils.fillIn(GreenhouseEffectStrings.a11y.amountOfPatternStringProperty, {
      qualitativeDescription: qualitativeDescriptionOfRedirection
    }));
  }

  /**
   * Gets a description of the infrared radiation intensity at the surface, and the intensity of radiation redirected
   * back to the surface. The intensity of radiation emitted from the surface is directly correlated with the surface
   * temperature. Will return something like:
   * "Infrared waves emit with high intensity from surface and travel to space." or
   * "Infrared waves emit with low intensity from surface and travel to space. Low amount of infrared energy is
   * redirected back to surface."
   */
  static getInfraredRadiationIntensityDescription(surfaceTemperature, concentrationControlMode, date, concentration) {
    let radiationIntensityDescription = null;
    if (surfaceTemperature > GroundLayer.MINIMUM_EARTH_AT_NIGHT_TEMPERATURE) {
      const intensityDescription = TemperatureDescriber.getQualitativeTemperatureDescriptionString(surfaceTemperature, concentrationControlMode, date);
      radiationIntensityDescription = StringUtils.fillIn(infraredEmissionIntensityPatternStringProperty, {
        value: intensityDescription
      });
      if (concentration > 0) {
        radiationIntensityDescription = StringUtils.fillIn(infraredEmissionIntensityWithRedirectionPatternStringProperty, {
          surfaceEmission: radiationIntensityDescription,
          value: RadiationDescriber.getRedirectedInfraredDescription(concentration, concentrationControlMode, date)
        });
      }
    }
    return radiationIntensityDescription;
  }

  /**
   * Get a description of the sunlight traveling from space, and potentially if clouds reflect some of that radiation
   * back to space.
   */
  static getSunlightTravelDescription(includeCloudReflection, includeGlacierReflection) {
    let descriptionString;
    if (!includeCloudReflection && !includeGlacierReflection) {
      descriptionString = GreenhouseEffectStrings.a11y.sunlightWavesTravelFromSpaceStringProperty.value;
    } else if (includeCloudReflection && !includeGlacierReflection) {
      descriptionString = StringUtils.fillIn(GreenhouseEffectStrings.a11y.sunlightAndReflectionPatternStringProperty, {
        sunlightDescription: GreenhouseEffectStrings.a11y.sunlightWavesTravelFromSpaceStringProperty,
        reflectionDescription: GreenhouseEffectStrings.a11y.cloudRefectionStringProperty
      });
    } else if (!includeCloudReflection && includeGlacierReflection) {
      // This particular situation should never occur for any length of time because of the way the sim is designed, but
      // it can come up briefly when switching between date and manual control modes, so it can't be entirely ignored.
      descriptionString = '';
    } else {
      descriptionString = StringUtils.fillIn(GreenhouseEffectStrings.a11y.sunlightAndReflectionPatternStringProperty, {
        sunlightDescription: GreenhouseEffectStrings.a11y.sunlightWavesTravelFromSpaceStringProperty,
        reflectionDescription: GreenhouseEffectStrings.a11y.cloudAndGlacierRefectionStringProperty
      });
    }
    return descriptionString;
  }

  /**
   * A description that describes when the sunlight starts in the simulation, with an extra hint
   * when the sim is paused to describe that nothing will happen until animation starts. Returns
   * something like
   *
   * "Sunlight started." or
   * "Sunlight started, sim paused."
   */
  static getSunlightStartedDescription(isPlaying) {
    return isPlaying ? sunlightStartedStringProperty.value : sunlightStartedSimPausedStringProperty.value;
  }
}
greenhouseEffect.register('RadiationDescriber', RadiationDescriber);
export default RadiationDescriber;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTdHJpbmdVdGlscyIsImdyZWVuaG91c2VFZmZlY3QiLCJHcmVlbmhvdXNlRWZmZWN0U3RyaW5ncyIsIkdyb3VuZExheWVyIiwiVGVtcGVyYXR1cmVEZXNjcmliZXIiLCJDb25jZW50cmF0aW9uQ29udHJvbE1vZGUiLCJDb25jZW50cmF0aW9uRGVzY3JpYmVyIiwiaW5mcmFyZWRFbWlzc2lvbkludGVuc2l0eVBhdHRlcm5TdHJpbmdQcm9wZXJ0eSIsImExMXkiLCJpbmZyYXJlZEVtaXNzaW9uSW50ZW5zaXR5V2l0aFJlZGlyZWN0aW9uUGF0dGVyblN0cmluZ1Byb3BlcnR5Iiwic3VubGlnaHRTdGFydGVkU3RyaW5nUHJvcGVydHkiLCJzdW5saWdodFN0YXJ0ZWRTaW1QYXVzZWRTdHJpbmdQcm9wZXJ0eSIsIlJhZGlhdGlvbkRlc2NyaWJlciIsImNvbnN0cnVjdG9yIiwibW9kZWwiLCJnZXRSYWRpYXRpb25SZWRpcmVjdGlvbkRlc2NyaXB0aW9uIiwibmV3Q29uY2VudHJhdGlvbiIsIm9sZENvbmNlbnRyYXRpb24iLCJnZXRSYWRpYXRpb25DaGFuZ2VEZXNjcmlwdGlvbiIsImluZnJhcmVkUmFkaWF0aW9uUmVkaXJlY3RpbmdQYXR0ZXJuU3RyaW5nUHJvcGVydHkiLCJ2YWx1ZSIsImdldFJhZGlhdGlvbkZyb21TdXJmYWNlQ2hhbmdlRGVzY3JpcHRpb24iLCJpbmZyYXJlZFJhZGlhdGlvbkVtaXR0ZWRGcm9tU3VyZmFjZVBhdHRlcm5TdHJpbmdQcm9wZXJ0eSIsInBhdHRlcm5TdHJpbmciLCJkZXNjcmliZU5vQ29uY2VudHJhdGlvbiIsInJlc3BvbnNlIiwiY2hhbmdlU3RyaW5nIiwibm9TdHJpbmdQcm9wZXJ0eSIsIm1vcmVTdHJpbmdQcm9wZXJ0eSIsImxlc3NTdHJpbmdQcm9wZXJ0eSIsImZpbGxJbiIsIm1vcmVPckxlc3MiLCJnZXRSZWRpcmVjdGVkSW5mcmFyZWREZXNjcmlwdGlvbiIsImNvbmNlbnRyYXRpb24iLCJjb25jZW50cmF0aW9uQ29udHJvbE1vZGUiLCJkYXRlIiwicXVhbGl0YXRpdmVEZXNjcmlwdGlvbk9mUmVkaXJlY3Rpb24iLCJCWV9WQUxVRSIsImdldFF1YWxpdGF0aXZlQ29uY2VudHJhdGlvbkRlc2NyaXB0aW9uIiwiZ2V0SGlzdG9yaWNhbFF1YWxpdGF0aXZlQ29uY2VudHJhdGlvbkRlc2NyaXB0aW9uIiwiY2FwaXRhbGl6ZSIsImFtb3VudE9mUGF0dGVyblN0cmluZ1Byb3BlcnR5IiwicXVhbGl0YXRpdmVEZXNjcmlwdGlvbiIsImdldEluZnJhcmVkUmFkaWF0aW9uSW50ZW5zaXR5RGVzY3JpcHRpb24iLCJzdXJmYWNlVGVtcGVyYXR1cmUiLCJyYWRpYXRpb25JbnRlbnNpdHlEZXNjcmlwdGlvbiIsIk1JTklNVU1fRUFSVEhfQVRfTklHSFRfVEVNUEVSQVRVUkUiLCJpbnRlbnNpdHlEZXNjcmlwdGlvbiIsImdldFF1YWxpdGF0aXZlVGVtcGVyYXR1cmVEZXNjcmlwdGlvblN0cmluZyIsInN1cmZhY2VFbWlzc2lvbiIsImdldFN1bmxpZ2h0VHJhdmVsRGVzY3JpcHRpb24iLCJpbmNsdWRlQ2xvdWRSZWZsZWN0aW9uIiwiaW5jbHVkZUdsYWNpZXJSZWZsZWN0aW9uIiwiZGVzY3JpcHRpb25TdHJpbmciLCJzdW5saWdodFdhdmVzVHJhdmVsRnJvbVNwYWNlU3RyaW5nUHJvcGVydHkiLCJzdW5saWdodEFuZFJlZmxlY3Rpb25QYXR0ZXJuU3RyaW5nUHJvcGVydHkiLCJzdW5saWdodERlc2NyaXB0aW9uIiwicmVmbGVjdGlvbkRlc2NyaXB0aW9uIiwiY2xvdWRSZWZlY3Rpb25TdHJpbmdQcm9wZXJ0eSIsImNsb3VkQW5kR2xhY2llclJlZmVjdGlvblN0cmluZ1Byb3BlcnR5IiwiZ2V0U3VubGlnaHRTdGFydGVkRGVzY3JpcHRpb24iLCJpc1BsYXlpbmciLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlJhZGlhdGlvbkRlc2NyaWJlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMS0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBSZXNwb25zaWJsZSBmb3IgZ2VuZXJhdGluZyB0aGUgZGVzY3JpcHRpb25zIHJlbGF0ZWQgdG8gcmFkaWF0aW9uIGluIHRoaXMgc2ltdWxhdGlvbi5cclxuICogQGF1dGhvciBKZXNzZSBHcmVlbmJlcmcgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IFN0cmluZ1V0aWxzIGZyb20gJy4uLy4uLy4uLy4uLy4uL3BoZXRjb21tb24vanMvdXRpbC9TdHJpbmdVdGlscy5qcyc7XHJcbmltcG9ydCBncmVlbmhvdXNlRWZmZWN0IGZyb20gJy4uLy4uLy4uL2dyZWVuaG91c2VFZmZlY3QuanMnO1xyXG5pbXBvcnQgR3JlZW5ob3VzZUVmZmVjdFN0cmluZ3MgZnJvbSAnLi4vLi4vLi4vR3JlZW5ob3VzZUVmZmVjdFN0cmluZ3MuanMnO1xyXG5pbXBvcnQgR3JvdW5kTGF5ZXIgZnJvbSAnLi4vLi4vbW9kZWwvR3JvdW5kTGF5ZXIuanMnO1xyXG5pbXBvcnQgTGF5ZXJzTW9kZWwgZnJvbSAnLi4vLi4vbW9kZWwvTGF5ZXJzTW9kZWwuanMnO1xyXG5pbXBvcnQgVGVtcGVyYXR1cmVEZXNjcmliZXIgZnJvbSAnLi9UZW1wZXJhdHVyZURlc2NyaWJlci5qcyc7XHJcbmltcG9ydCB7IENvbmNlbnRyYXRpb25Db250cm9sTW9kZSwgQ29uY2VudHJhdGlvbkRhdGUgfSBmcm9tICcuLi8uLi9tb2RlbC9Db25jZW50cmF0aW9uTW9kZWwuanMnO1xyXG5pbXBvcnQgQ29uY2VudHJhdGlvbkRlc2NyaWJlciBmcm9tICcuL0NvbmNlbnRyYXRpb25EZXNjcmliZXIuanMnO1xyXG5cclxuY29uc3QgaW5mcmFyZWRFbWlzc2lvbkludGVuc2l0eVBhdHRlcm5TdHJpbmdQcm9wZXJ0eSA9IEdyZWVuaG91c2VFZmZlY3RTdHJpbmdzLmExMXkuaW5mcmFyZWRFbWlzc2lvbkludGVuc2l0eVBhdHRlcm5TdHJpbmdQcm9wZXJ0eTtcclxuY29uc3QgaW5mcmFyZWRFbWlzc2lvbkludGVuc2l0eVdpdGhSZWRpcmVjdGlvblBhdHRlcm5TdHJpbmdQcm9wZXJ0eSA9IEdyZWVuaG91c2VFZmZlY3RTdHJpbmdzLmExMXkuaW5mcmFyZWRFbWlzc2lvbkludGVuc2l0eVdpdGhSZWRpcmVjdGlvblBhdHRlcm5TdHJpbmdQcm9wZXJ0eTtcclxuY29uc3Qgc3VubGlnaHRTdGFydGVkU3RyaW5nUHJvcGVydHkgPSBHcmVlbmhvdXNlRWZmZWN0U3RyaW5ncy5hMTF5LnN1bmxpZ2h0U3RhcnRlZFN0cmluZ1Byb3BlcnR5O1xyXG5jb25zdCBzdW5saWdodFN0YXJ0ZWRTaW1QYXVzZWRTdHJpbmdQcm9wZXJ0eSA9IEdyZWVuaG91c2VFZmZlY3RTdHJpbmdzLmExMXkuc3VubGlnaHRTdGFydGVkU2ltUGF1c2VkU3RyaW5nUHJvcGVydHk7XHJcblxyXG5jbGFzcyBSYWRpYXRpb25EZXNjcmliZXIge1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgbW9kZWw6IExheWVyc01vZGVsO1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIG1vZGVsOiBMYXllcnNNb2RlbCApIHtcclxuICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdlbmVyYXRlcyBhIGRlc2NyaXB0aW9uIG9mIHRoZSBjaGFuZ2luZyByYWRpYXRpb24gYXMgaXQgaXMgcmVkaXJlY3RlZCB3aXRoIGNoYW5naW5nIGNvbmNlbnRyYXRpb25zLiBXaWxsIHJldHVyblxyXG4gICAqIHNvbWV0aGluZyBsaWtlXHJcbiAgICogXCJNb3JlIGluZnJhcmVkIHJhZGlhdGlvbiByZWRpcmVjdGluZyBiYWNrIHRvIHN1cmZhY2UuXCIgb3JcclxuICAgKiBcIkxlc3MgaW5mcmFyZWQgcmFkaWF0aW9uIHJlZGlyZWN0aW5nIGJhY2sgdG8gc3VyZmFjZS5cIiBvclxyXG4gICAqIFwiTm8gaW5mcmFyZWQgcmFkaWF0aW9uIHJlZGlyZWN0aW5nIGJhY2sgdG8gc3VyZmFjZS5cIlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0UmFkaWF0aW9uUmVkaXJlY3Rpb25EZXNjcmlwdGlvbiggbmV3Q29uY2VudHJhdGlvbjogbnVtYmVyLCBvbGRDb25jZW50cmF0aW9uOiBudW1iZXIgKTogc3RyaW5nIHwgbnVsbCB7XHJcbiAgICByZXR1cm4gUmFkaWF0aW9uRGVzY3JpYmVyLmdldFJhZGlhdGlvbkNoYW5nZURlc2NyaXB0aW9uKFxyXG4gICAgICBHcmVlbmhvdXNlRWZmZWN0U3RyaW5ncy5hMTF5LmluZnJhcmVkUmFkaWF0aW9uUmVkaXJlY3RpbmdQYXR0ZXJuU3RyaW5nUHJvcGVydHkudmFsdWUsXHJcbiAgICAgIG5ld0NvbmNlbnRyYXRpb24sXHJcbiAgICAgIG9sZENvbmNlbnRyYXRpb24sXHJcbiAgICAgIHRydWUgLy8gZGVzY3JpYmUgd2hlbiBubyBjb25jZW50cmF0aW9uIGlzIHJlZGlyZWN0ZWQgZnJvbSBhdG1vc3BoZXJlXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2VuZXJhdGVzIGEgZGVzY3JpcHRpb24gb2YgdGhlIGNoYW5nZSBpbiByYWRpYXRpb24gYmVpbmcgZW1pdHRpbmcgZnJvbSB0aGUgZWFydGggc3VyZmFjZS4gV2lsbCByZXR1cm4gc29tZXRoaW5nIGxpa2VcclxuICAgKiBcIk1vcmUgaW5mcmFyZWQgcmFkaWF0aW9uIGVtaXR0aW5nIGZyb20gc3VyZmFjZS5cIiBvclxyXG4gICAqIFwiTGVzcyBpbmZyYXJlZCByYWRpYXRpb24gZW1pdHRpbmcgZnJvbSBzdXJmYWNlLlwiLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0UmFkaWF0aW9uRnJvbVN1cmZhY2VDaGFuZ2VEZXNjcmlwdGlvbiggbmV3Q29uY2VudHJhdGlvbjogbnVtYmVyLCBvbGRDb25jZW50cmF0aW9uOiBudW1iZXIgKTogc3RyaW5nIHwgbnVsbCB7XHJcbiAgICByZXR1cm4gUmFkaWF0aW9uRGVzY3JpYmVyLmdldFJhZGlhdGlvbkNoYW5nZURlc2NyaXB0aW9uKFxyXG4gICAgICBHcmVlbmhvdXNlRWZmZWN0U3RyaW5ncy5hMTF5LmluZnJhcmVkUmFkaWF0aW9uRW1pdHRlZEZyb21TdXJmYWNlUGF0dGVyblN0cmluZ1Byb3BlcnR5LnZhbHVlLFxyXG4gICAgICBuZXdDb25jZW50cmF0aW9uLFxyXG4gICAgICBvbGRDb25jZW50cmF0aW9uXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2VuZXJhdGVzIGEgZGVzY3JpcHRpb24gZm9yIHRoZSBjaGFuZ2luZyByYWRpYXRpb24uIERlcGVuZGluZyBvbiB0aGUgcHJvdmlkZWQgc3RyaW5nIHBhdHRlcm5zLCB3aWxsIHJldHVyblxyXG4gICAqIHNvbWV0aGluZyBsaWtlOlxyXG4gICAqIFwiTW9yZSBpbmZyYXJlZCByYWRpYXRpb24gZW1pdHRpbmcgZnJvbSBzdXJmYWNlLlwiIG9yXHJcbiAgICogXCJMZXNzIGluZnJhcmVkIHJhZGlhdGlvbiByZWRpcmVjdGluZyBiYWNrIHRvIHN1cmZhY2UuXCIgb3JcclxuICAgKiBcIk5vIGluZnJhcmVkIHJhZGlhdGlvbiByZWRpcmVjdGluZyBiYWNrIHRvIHN1cmZhY2VcIi5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBwYXR0ZXJuU3RyaW5nIC0gTXVzdCBoYXZlIGEgJ2NoYW5nZScgcGFyYW0gdG8gZmlsbCBpblxyXG4gICAqIEBwYXJhbSBuZXdDb25jZW50cmF0aW9uXHJcbiAgICogQHBhcmFtIG9sZENvbmNlbnRyYXRpb25cclxuICAgKiBAcGFyYW0gZGVzY3JpYmVOb0NvbmNlbnRyYXRpb24gLSBJZiB0cnVlLCAnbm8nIGNvbmNlbnRyYXRpb24gY2FzZSB3aWxsIGJlIGRlc2NyaWJlZC4gT3RoZXJ3aXNlLCByZWFjaGluZyB6ZXJvXHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uY2VudHJhdGlvbiB3aWxsIGJlIGRlc2NyaWJlZCBhcyAnbGVzcycuXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0UmFkaWF0aW9uQ2hhbmdlRGVzY3JpcHRpb24oIHBhdHRlcm5TdHJpbmc6IHN0cmluZywgbmV3Q29uY2VudHJhdGlvbjogbnVtYmVyLCBvbGRDb25jZW50cmF0aW9uOiBudW1iZXIsIGRlc2NyaWJlTm9Db25jZW50cmF0aW9uPzogYm9vbGVhbiApOiBzdHJpbmcgfCBudWxsIHtcclxuICAgIGxldCByZXNwb25zZSA9IG51bGw7XHJcblxyXG4gICAgaWYgKCBuZXdDb25jZW50cmF0aW9uICE9PSBvbGRDb25jZW50cmF0aW9uICkge1xyXG4gICAgICBsZXQgY2hhbmdlU3RyaW5nOiBzdHJpbmc7XHJcbiAgICAgIGlmICggZGVzY3JpYmVOb0NvbmNlbnRyYXRpb24gJiYgbmV3Q29uY2VudHJhdGlvbiA9PT0gMCApIHtcclxuICAgICAgICBjaGFuZ2VTdHJpbmcgPSBHcmVlbmhvdXNlRWZmZWN0U3RyaW5ncy5hMTF5Lm5vU3RyaW5nUHJvcGVydHkudmFsdWU7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgY2hhbmdlU3RyaW5nID0gbmV3Q29uY2VudHJhdGlvbiA+IG9sZENvbmNlbnRyYXRpb24gP1xyXG4gICAgICAgICAgICAgICAgICAgICAgIEdyZWVuaG91c2VFZmZlY3RTdHJpbmdzLmExMXkubW9yZVN0cmluZ1Byb3BlcnR5LnZhbHVlIDpcclxuICAgICAgICAgICAgICAgICAgICAgICBHcmVlbmhvdXNlRWZmZWN0U3RyaW5ncy5hMTF5Lmxlc3NTdHJpbmdQcm9wZXJ0eS52YWx1ZTtcclxuICAgICAgfVxyXG4gICAgICByZXNwb25zZSA9IFN0cmluZ1V0aWxzLmZpbGxJbiggcGF0dGVyblN0cmluZywge1xyXG4gICAgICAgIG1vcmVPckxlc3M6IGNoYW5nZVN0cmluZ1xyXG4gICAgICB9ICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0UmVkaXJlY3RlZEluZnJhcmVkRGVzY3JpcHRpb24oIGNvbmNlbnRyYXRpb246IG51bWJlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uY2VudHJhdGlvbkNvbnRyb2xNb2RlOiBDb25jZW50cmF0aW9uRGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogQ29uY2VudHJhdGlvbkRhdGUgKTogc3RyaW5nIHtcclxuXHJcbiAgICAvLyBHZXQgdGhlIGRlc2NyaXB0aW9uIGZyb20gdGhlIGNvbmNlbnRyYXRpb24gZGVzY3JpYmVyLCBzaW5jZSB0aGUgYW1vdW50IG9mIElSIHRoYXQgaXMgcmVkaXJlY3RlZCBpdCBjb21wbGV0ZWx5XHJcbiAgICAvLyBkZXBlbmRlbnQgb24gdGhlIGNvbmNlbnRyYXRpb24gbGV2ZWwuXHJcbiAgICBjb25zdCBxdWFsaXRhdGl2ZURlc2NyaXB0aW9uT2ZSZWRpcmVjdGlvbiA9IGNvbmNlbnRyYXRpb25Db250cm9sTW9kZSA9PT0gQ29uY2VudHJhdGlvbkNvbnRyb2xNb2RlLkJZX1ZBTFVFID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29uY2VudHJhdGlvbkRlc2NyaWJlci5nZXRRdWFsaXRhdGl2ZUNvbmNlbnRyYXRpb25EZXNjcmlwdGlvbiggY29uY2VudHJhdGlvbiApIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29uY2VudHJhdGlvbkRlc2NyaWJlci5nZXRIaXN0b3JpY2FsUXVhbGl0YXRpdmVDb25jZW50cmF0aW9uRGVzY3JpcHRpb24oIGRhdGUgKTtcclxuXHJcbiAgICByZXR1cm4gU3RyaW5nVXRpbHMuY2FwaXRhbGl6ZSggU3RyaW5nVXRpbHMuZmlsbEluKCBHcmVlbmhvdXNlRWZmZWN0U3RyaW5ncy5hMTF5LmFtb3VudE9mUGF0dGVyblN0cmluZ1Byb3BlcnR5LCB7XHJcbiAgICAgIHF1YWxpdGF0aXZlRGVzY3JpcHRpb246IHF1YWxpdGF0aXZlRGVzY3JpcHRpb25PZlJlZGlyZWN0aW9uXHJcbiAgICB9ICkgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldHMgYSBkZXNjcmlwdGlvbiBvZiB0aGUgaW5mcmFyZWQgcmFkaWF0aW9uIGludGVuc2l0eSBhdCB0aGUgc3VyZmFjZSwgYW5kIHRoZSBpbnRlbnNpdHkgb2YgcmFkaWF0aW9uIHJlZGlyZWN0ZWRcclxuICAgKiBiYWNrIHRvIHRoZSBzdXJmYWNlLiBUaGUgaW50ZW5zaXR5IG9mIHJhZGlhdGlvbiBlbWl0dGVkIGZyb20gdGhlIHN1cmZhY2UgaXMgZGlyZWN0bHkgY29ycmVsYXRlZCB3aXRoIHRoZSBzdXJmYWNlXHJcbiAgICogdGVtcGVyYXR1cmUuIFdpbGwgcmV0dXJuIHNvbWV0aGluZyBsaWtlOlxyXG4gICAqIFwiSW5mcmFyZWQgd2F2ZXMgZW1pdCB3aXRoIGhpZ2ggaW50ZW5zaXR5IGZyb20gc3VyZmFjZSBhbmQgdHJhdmVsIHRvIHNwYWNlLlwiIG9yXHJcbiAgICogXCJJbmZyYXJlZCB3YXZlcyBlbWl0IHdpdGggbG93IGludGVuc2l0eSBmcm9tIHN1cmZhY2UgYW5kIHRyYXZlbCB0byBzcGFjZS4gTG93IGFtb3VudCBvZiBpbmZyYXJlZCBlbmVyZ3kgaXNcclxuICAgKiByZWRpcmVjdGVkIGJhY2sgdG8gc3VyZmFjZS5cIlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0SW5mcmFyZWRSYWRpYXRpb25JbnRlbnNpdHlEZXNjcmlwdGlvbiggc3VyZmFjZVRlbXBlcmF0dXJlOiBudW1iZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25jZW50cmF0aW9uQ29udHJvbE1vZGU6IENvbmNlbnRyYXRpb25Db250cm9sTW9kZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IENvbmNlbnRyYXRpb25EYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uY2VudHJhdGlvbjogbnVtYmVyICk6IHN0cmluZyB8IG51bGwge1xyXG4gICAgbGV0IHJhZGlhdGlvbkludGVuc2l0eURlc2NyaXB0aW9uID0gbnVsbDtcclxuXHJcbiAgICBpZiAoIHN1cmZhY2VUZW1wZXJhdHVyZSA+IEdyb3VuZExheWVyLk1JTklNVU1fRUFSVEhfQVRfTklHSFRfVEVNUEVSQVRVUkUgKSB7XHJcbiAgICAgIGNvbnN0IGludGVuc2l0eURlc2NyaXB0aW9uID0gVGVtcGVyYXR1cmVEZXNjcmliZXIuZ2V0UXVhbGl0YXRpdmVUZW1wZXJhdHVyZURlc2NyaXB0aW9uU3RyaW5nKFxyXG4gICAgICAgIHN1cmZhY2VUZW1wZXJhdHVyZSxcclxuICAgICAgICBjb25jZW50cmF0aW9uQ29udHJvbE1vZGUsXHJcbiAgICAgICAgZGF0ZVxyXG4gICAgICApO1xyXG5cclxuICAgICAgcmFkaWF0aW9uSW50ZW5zaXR5RGVzY3JpcHRpb24gPSBTdHJpbmdVdGlscy5maWxsSW4oIGluZnJhcmVkRW1pc3Npb25JbnRlbnNpdHlQYXR0ZXJuU3RyaW5nUHJvcGVydHksIHtcclxuICAgICAgICB2YWx1ZTogaW50ZW5zaXR5RGVzY3JpcHRpb25cclxuICAgICAgfSApO1xyXG5cclxuICAgICAgaWYgKCBjb25jZW50cmF0aW9uID4gMCApIHtcclxuICAgICAgICByYWRpYXRpb25JbnRlbnNpdHlEZXNjcmlwdGlvbiA9IFN0cmluZ1V0aWxzLmZpbGxJbihcclxuICAgICAgICAgIGluZnJhcmVkRW1pc3Npb25JbnRlbnNpdHlXaXRoUmVkaXJlY3Rpb25QYXR0ZXJuU3RyaW5nUHJvcGVydHksXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHN1cmZhY2VFbWlzc2lvbjogcmFkaWF0aW9uSW50ZW5zaXR5RGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIHZhbHVlOiBSYWRpYXRpb25EZXNjcmliZXIuZ2V0UmVkaXJlY3RlZEluZnJhcmVkRGVzY3JpcHRpb24oIGNvbmNlbnRyYXRpb24sIGNvbmNlbnRyYXRpb25Db250cm9sTW9kZSwgZGF0ZSApXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByYWRpYXRpb25JbnRlbnNpdHlEZXNjcmlwdGlvbjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBhIGRlc2NyaXB0aW9uIG9mIHRoZSBzdW5saWdodCB0cmF2ZWxpbmcgZnJvbSBzcGFjZSwgYW5kIHBvdGVudGlhbGx5IGlmIGNsb3VkcyByZWZsZWN0IHNvbWUgb2YgdGhhdCByYWRpYXRpb25cclxuICAgKiBiYWNrIHRvIHNwYWNlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0U3VubGlnaHRUcmF2ZWxEZXNjcmlwdGlvbiggaW5jbHVkZUNsb3VkUmVmbGVjdGlvbjogYm9vbGVhbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGVHbGFjaWVyUmVmbGVjdGlvbjogYm9vbGVhbiApOiBzdHJpbmcge1xyXG5cclxuICAgIGxldCBkZXNjcmlwdGlvblN0cmluZztcclxuICAgIGlmICggIWluY2x1ZGVDbG91ZFJlZmxlY3Rpb24gJiYgIWluY2x1ZGVHbGFjaWVyUmVmbGVjdGlvbiApIHtcclxuICAgICAgZGVzY3JpcHRpb25TdHJpbmcgPSBHcmVlbmhvdXNlRWZmZWN0U3RyaW5ncy5hMTF5LnN1bmxpZ2h0V2F2ZXNUcmF2ZWxGcm9tU3BhY2VTdHJpbmdQcm9wZXJ0eS52YWx1ZTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKCBpbmNsdWRlQ2xvdWRSZWZsZWN0aW9uICYmICFpbmNsdWRlR2xhY2llclJlZmxlY3Rpb24gKSB7XHJcbiAgICAgIGRlc2NyaXB0aW9uU3RyaW5nID0gU3RyaW5nVXRpbHMuZmlsbEluKCBHcmVlbmhvdXNlRWZmZWN0U3RyaW5ncy5hMTF5LnN1bmxpZ2h0QW5kUmVmbGVjdGlvblBhdHRlcm5TdHJpbmdQcm9wZXJ0eSwge1xyXG4gICAgICAgIHN1bmxpZ2h0RGVzY3JpcHRpb246IEdyZWVuaG91c2VFZmZlY3RTdHJpbmdzLmExMXkuc3VubGlnaHRXYXZlc1RyYXZlbEZyb21TcGFjZVN0cmluZ1Byb3BlcnR5LFxyXG4gICAgICAgIHJlZmxlY3Rpb25EZXNjcmlwdGlvbjogR3JlZW5ob3VzZUVmZmVjdFN0cmluZ3MuYTExeS5jbG91ZFJlZmVjdGlvblN0cmluZ1Byb3BlcnR5XHJcbiAgICAgIH0gKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKCAhaW5jbHVkZUNsb3VkUmVmbGVjdGlvbiAmJiBpbmNsdWRlR2xhY2llclJlZmxlY3Rpb24gKSB7XHJcblxyXG4gICAgICAvLyBUaGlzIHBhcnRpY3VsYXIgc2l0dWF0aW9uIHNob3VsZCBuZXZlciBvY2N1ciBmb3IgYW55IGxlbmd0aCBvZiB0aW1lIGJlY2F1c2Ugb2YgdGhlIHdheSB0aGUgc2ltIGlzIGRlc2lnbmVkLCBidXRcclxuICAgICAgLy8gaXQgY2FuIGNvbWUgdXAgYnJpZWZseSB3aGVuIHN3aXRjaGluZyBiZXR3ZWVuIGRhdGUgYW5kIG1hbnVhbCBjb250cm9sIG1vZGVzLCBzbyBpdCBjYW4ndCBiZSBlbnRpcmVseSBpZ25vcmVkLlxyXG4gICAgICBkZXNjcmlwdGlvblN0cmluZyA9ICcnO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGRlc2NyaXB0aW9uU3RyaW5nID0gU3RyaW5nVXRpbHMuZmlsbEluKCBHcmVlbmhvdXNlRWZmZWN0U3RyaW5ncy5hMTF5LnN1bmxpZ2h0QW5kUmVmbGVjdGlvblBhdHRlcm5TdHJpbmdQcm9wZXJ0eSwge1xyXG4gICAgICAgIHN1bmxpZ2h0RGVzY3JpcHRpb246IEdyZWVuaG91c2VFZmZlY3RTdHJpbmdzLmExMXkuc3VubGlnaHRXYXZlc1RyYXZlbEZyb21TcGFjZVN0cmluZ1Byb3BlcnR5LFxyXG4gICAgICAgIHJlZmxlY3Rpb25EZXNjcmlwdGlvbjogR3JlZW5ob3VzZUVmZmVjdFN0cmluZ3MuYTExeS5jbG91ZEFuZEdsYWNpZXJSZWZlY3Rpb25TdHJpbmdQcm9wZXJ0eVxyXG4gICAgICB9ICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGRlc2NyaXB0aW9uU3RyaW5nO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQSBkZXNjcmlwdGlvbiB0aGF0IGRlc2NyaWJlcyB3aGVuIHRoZSBzdW5saWdodCBzdGFydHMgaW4gdGhlIHNpbXVsYXRpb24sIHdpdGggYW4gZXh0cmEgaGludFxyXG4gICAqIHdoZW4gdGhlIHNpbSBpcyBwYXVzZWQgdG8gZGVzY3JpYmUgdGhhdCBub3RoaW5nIHdpbGwgaGFwcGVuIHVudGlsIGFuaW1hdGlvbiBzdGFydHMuIFJldHVybnNcclxuICAgKiBzb21ldGhpbmcgbGlrZVxyXG4gICAqXHJcbiAgICogXCJTdW5saWdodCBzdGFydGVkLlwiIG9yXHJcbiAgICogXCJTdW5saWdodCBzdGFydGVkLCBzaW0gcGF1c2VkLlwiXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXRTdW5saWdodFN0YXJ0ZWREZXNjcmlwdGlvbiggaXNQbGF5aW5nOiBib29sZWFuICk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gaXNQbGF5aW5nID8gc3VubGlnaHRTdGFydGVkU3RyaW5nUHJvcGVydHkudmFsdWUgOiBzdW5saWdodFN0YXJ0ZWRTaW1QYXVzZWRTdHJpbmdQcm9wZXJ0eS52YWx1ZTtcclxuICB9XHJcbn1cclxuXHJcbmdyZWVuaG91c2VFZmZlY3QucmVnaXN0ZXIoICdSYWRpYXRpb25EZXNjcmliZXInLCBSYWRpYXRpb25EZXNjcmliZXIgKTtcclxuZXhwb3J0IGRlZmF1bHQgUmFkaWF0aW9uRGVzY3JpYmVyO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFdBQVcsTUFBTSxrREFBa0Q7QUFDMUUsT0FBT0Ms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