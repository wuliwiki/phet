// Copyright 2021-2022, University of Colorado Boulder

/**
 * LandscapeObservationWindow is a Scenery Node that is used within the Greenhouse Effect simulation to present a view
 * of a landscape and sky, as well as artwork that represents different time periods.  It is intended to be used as a
 * base class, and subclasses are used to add representations of energy interacting with the landscape and atmosphere.
 *
 * @author John Blanco (PhET Interactive Simulations)
 */

import Multilink from '../../../../axon/js/Multilink.js';
import Range from '../../../../dot/js/Range.js';
import Utils from '../../../../dot/js/Utils.js';
import optionize from '../../../../phet-core/js/optionize.js';
import PhetColorScheme from '../../../../scenery-phet/js/PhetColorScheme.js';
import { Color, Image, LinearGradient, Node, Path, Rectangle } from '../../../../scenery/js/imports.js';
import Tandem from '../../../../tandem/js/Tandem.js';
import agriculturalLandscapeBackground_png from '../../../images/agriculturalLandscapeBackground_png.js';
import agriculturalLandscapeForeground_png from '../../../images/agriculturalLandscapeForeground_png.js';
import fiftiesLandscapeBackground_png from '../../../images/fiftiesLandscapeBackground_png.js';
import fiftiesLandscapeForeground_png from '../../../images/fiftiesLandscapeForeground_png.js';
import iceAgeLandscapeBackground_png from '../../../images/iceAgeLandscapeBackground_png.js';
import iceAgeLandscapeForeground_png from '../../../images/iceAgeLandscapeForeground_png.js';
import twentyTwentiesLandscapeBackground_png from '../../../images/twentyTwentiesLandscapeBackground_png.js';
import twentyTwentiesLandscapeForeground_png from '../../../images/twentyTwentiesLandscapeForeground_png.js';
import unadornedLandscape_png from '../../../images/unadornedLandscape_png.js';
import greenhouseEffect from '../../greenhouseEffect.js';
import GreenhouseEffectQueryParameters from '../GreenhouseEffectQueryParameters.js';
import { ConcentrationControlMode, ConcentrationDate } from '../model/ConcentrationModel.js';
import CloudNode from './CloudNode.js';
import GasConcentrationAlerter from './GasConcentrationAlerter.js';
import GreenhouseEffectObservationWindow from './GreenhouseEffectObservationWindow.js';
import LayerDebugNode from './LayerDebugNode.js';
import ThermometerAndReadout from './ThermometerAndReadout.js';
// constants
const SIZE = GreenhouseEffectObservationWindow.SIZE;

// The opacity of the surface temperature is scaled over this range.  The values, which are in Kelvin, were empirically
// determined and can be adjusted as needed to achieve the desired visual effect.
const SURFACE_TEMPERATURE_OPACITY_SCALING_RANGE = new Range(250, 295);
class LandscapeObservationWindow extends GreenhouseEffectObservationWindow {
  // Surface thermometer with value readout and units ComboBox, public for pdomOrder.

  constructor(model, providedOptions) {
    const options = optionize()({
      // phet-io
      tandem: Tandem.REQUIRED
    }, providedOptions);
    super(model, options);
    this.isPlayingProperty = model.isPlayingProperty;

    // thermometer
    const listParentNode = new Node();
    this.surfaceThermometer = new ThermometerAndReadout(model, {
      minTemperature: model.groundLayer.minimumTemperature - 5,
      // phet-io
      tandem: options.tandem.createTandem('surfaceThermometer')
    });
    this.surfaceThermometer.leftBottom = this.windowFrame.leftBottom.plusXY(GreenhouseEffectObservationWindow.CONTROL_AND_INSTRUMENT_INSET, -GreenhouseEffectObservationWindow.CONTROL_AND_INSTRUMENT_INSET);
    listParentNode.leftBottom = this.surfaceThermometer.leftBottom;
    this.controlsLayer.addChild(this.surfaceThermometer);
    this.controlsLayer.addChild(listParentNode);

    // Create the node that will make the sky look a bit hazy as more greenhouse gases are added.  Strictly speaking,
    // most greenhouse gases do not interact with visible light, so this is a bit of "Hollywooding" to make it clear
    // that something in the atmosphere is changing.
    const hazeNode = new Rectangle(0, 0, SIZE.width, SIZE.height);
    this.presentationLayer.addChild(hazeNode);

    // Adjust the amount of "haze" based on the concentration of greenhouse gases.
    model.concentrationProperty.link(concentration => {
      // mapping of concentration to alpha we empirically determined
      hazeNode.fill = Color.LIGHT_GRAY.withAlpha(concentration / 3);
    });

    // Debug code for representing layers, only added if the appropriate query parameter is set.
    const energyAbsorbingEmittingLayerNodes = [];
    if (GreenhouseEffectQueryParameters.showAllLayers) {
      // Add the ground layer node.
      energyAbsorbingEmittingLayerNodes.push(new LayerDebugNode(model.groundLayer, this.modelViewTransform, {
        lineOptions: {
          stroke: Color.GREEN
        },
        visible: GreenhouseEffectQueryParameters.showAllLayers
      }));

      // Add the atmosphere layer nodes.
      model.atmosphereLayers.forEach(atmosphereLayer => {
        energyAbsorbingEmittingLayerNodes.push(new LayerDebugNode(atmosphereLayer, this.modelViewTransform, {
          lineOptions: {
            stroke: new Color(50, 50, 200, 0.5)
          },
          visible: GreenhouseEffectQueryParameters.showAllLayers
        }));
      });
    }

    // Add the layer nodes.
    energyAbsorbingEmittingLayerNodes.forEach(layerNode => this.backgroundLayer.addChild(layerNode));

    // Add the cloud, if present.
    if (model.cloud) {
      this.backgroundLayer.addChild(new CloudNode(model.cloud, this.modelViewTransform));
    }

    // pdom - responsive descriptions
    this.gasConcentrationAlerter = new GasConcentrationAlerter(model, {
      descriptionAlertNode: this
    });
  }

  /**
   * Redraw components of the observation window. Does not get called if sim is paused for performance reasons.
   */
  step(dt) {
    super.step(dt);
  }

  /**
   * Step alerters of this ObservationWindow (mostly to support polling descriptions). This is separate from
   * step() because this needs to be stepped even while the sim is paused.
   */
  stepAlerters(dt) {
    this.gasConcentrationAlerter.step(dt);
  }
  reset() {
    this.gasConcentrationAlerter.reset();
    super.reset();
  }

  /**
   * Create the node that will represent the ground, and will use appropriate images for the various dates.
   */
  createGroundNode(model) {
    const sharedImageOptions = {
      maxWidth: this.width,
      bottom: SIZE.height
    };

    // background and foreground images
    const unadornedLandscapeImage = new Image(unadornedLandscape_png, sharedImageOptions);
    const agriculturalLandscapeBackgroundImage = new Image(agriculturalLandscapeBackground_png, sharedImageOptions);
    const agriculturalLandscapeForegroundImage = new Image(agriculturalLandscapeForeground_png, sharedImageOptions);
    const fiftiesLandscapeBackgroundImage = new Image(fiftiesLandscapeBackground_png, sharedImageOptions);
    const fiftiesLandscapeForegroundImage = new Image(fiftiesLandscapeForeground_png, sharedImageOptions);
    const denseCityLandscapeBackgroundImage = new Image(twentyTwentiesLandscapeBackground_png, sharedImageOptions);
    const denseCityLandscapeForegroundImage = new Image(twentyTwentiesLandscapeForeground_png, sharedImageOptions);
    const iceAgeLandscapeBackgroundImage = new Image(iceAgeLandscapeBackground_png, sharedImageOptions);
    const iceAgeLandscapeForegroundImage = new Image(iceAgeLandscapeForeground_png, sharedImageOptions);

    // surface temperature node, which is meant to look like a glow on the surface
    const groundShape = GreenhouseEffectObservationWindow.createGroundShape();
    const groundShapeBounds = groundShape.getBounds();
    const surfaceTemperatureNode = new Path(groundShape, {
      fill: new LinearGradient(0, groundShapeBounds.minY, 0, groundShapeBounds.maxY).addColorStop(0, PhetColorScheme.RED_COLORBLIND).addColorStop(1, 'rgba( 255, 0, 0, 0 )'),
      bottom: SIZE.height
    });
    model.surfaceTemperatureVisibleProperty.linkAttribute(surfaceTemperatureNode, 'visible');
    model.surfaceTemperatureKelvinProperty.link(surfaceTemperature => {
      surfaceTemperatureNode.opacity = Utils.clamp((surfaceTemperature - SURFACE_TEMPERATURE_OPACITY_SCALING_RANGE.min) / SURFACE_TEMPERATURE_OPACITY_SCALING_RANGE.getLength(), 0, 1);
    });

    // Control the visibility of the images based on the state of the model.
    Multilink.multilink([model.concentrationControlModeProperty, model.dateProperty], (concentrationControlMode, date) => {
      unadornedLandscapeImage.visible = concentrationControlMode === ConcentrationControlMode.BY_VALUE || date === ConcentrationDate.ICE_AGE || date === ConcentrationDate.TWENTY_TWENTY;
      iceAgeLandscapeBackgroundImage.visible = concentrationControlMode === ConcentrationControlMode.BY_DATE && date === ConcentrationDate.ICE_AGE;
      iceAgeLandscapeForegroundImage.visible = concentrationControlMode === ConcentrationControlMode.BY_DATE && date === ConcentrationDate.ICE_AGE;
      agriculturalLandscapeBackgroundImage.visible = concentrationControlMode === ConcentrationControlMode.BY_DATE && date === ConcentrationDate.SEVENTEEN_FIFTY;
      agriculturalLandscapeForegroundImage.visible = concentrationControlMode === ConcentrationControlMode.BY_DATE && date === ConcentrationDate.SEVENTEEN_FIFTY;
      fiftiesLandscapeBackgroundImage.visible = concentrationControlMode === ConcentrationControlMode.BY_DATE && date === ConcentrationDate.NINETEEN_FIFTY;
      fiftiesLandscapeForegroundImage.visible = concentrationControlMode === ConcentrationControlMode.BY_DATE && date === ConcentrationDate.NINETEEN_FIFTY;
      denseCityLandscapeBackgroundImage.visible = concentrationControlMode === ConcentrationControlMode.BY_DATE && date === ConcentrationDate.TWENTY_TWENTY;
      denseCityLandscapeForegroundImage.visible = concentrationControlMode === ConcentrationControlMode.BY_DATE && date === ConcentrationDate.TWENTY_TWENTY;
    });

    // Return a node that contains all the images.
    return new Node({
      children: [
      // landscape image backgrounds
      unadornedLandscapeImage, iceAgeLandscapeBackgroundImage, agriculturalLandscapeBackgroundImage, fiftiesLandscapeBackgroundImage, denseCityLandscapeBackgroundImage,
      // The surface temperature node must be between the background and foreground images for correct layering.
      surfaceTemperatureNode,
      // landscape image foregrounds
      agriculturalLandscapeForegroundImage, iceAgeLandscapeForegroundImage, fiftiesLandscapeForegroundImage, denseCityLandscapeForegroundImage]
    });
  }
}
greenhouseEffect.register('LandscapeObservationWindow', LandscapeObservationWindow);
export default LandscapeObservationWindow;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNdWx0aWxpbmsiLCJSYW5nZSIsIlV0aWxzIiwib3B0aW9uaXplIiwiUGhldENvbG9yU2NoZW1lIiwiQ29sb3IiLCJJbWFnZSIsIkxpbmVhckdyYWRpZW50IiwiTm9kZSIsIlBhdGgiLCJSZWN0YW5nbGUiLCJUYW5kZW0iLCJhZ3JpY3VsdHVyYWxMYW5kc2NhcGVCYWNrZ3JvdW5kX3BuZyIsImFncmljdWx0dXJhbExhbmRzY2FwZUZvcmVncm91bmRfcG5nIiwiZmlmdGllc0xhbmRzY2FwZUJhY2tncm91bmRfcG5nIiwiZmlmdGllc0xhbmRzY2FwZUZvcmVncm91bmRfcG5nIiwiaWNlQWdlTGFuZHNjYXBlQmFja2dyb3VuZF9wbmciLCJpY2VBZ2VMYW5kc2NhcGVGb3JlZ3JvdW5kX3BuZyIsInR3ZW50eVR3ZW50aWVzTGFuZHNjYXBlQmFja2dyb3VuZF9wbmciLCJ0d2VudHlUd2VudGllc0xhbmRzY2FwZUZvcmVncm91bmRfcG5nIiwidW5hZG9ybmVkTGFuZHNjYXBlX3BuZyIsImdyZWVuaG91c2VFZmZlY3QiLCJHcmVlbmhvdXNlRWZmZWN0UXVlcnlQYXJhbWV0ZXJzIiwiQ29uY2VudHJhdGlvbkNvbnRyb2xNb2RlIiwiQ29uY2VudHJhdGlvbkRhdGUiLCJDbG91ZE5vZGUiLCJHYXNDb25jZW50cmF0aW9uQWxlcnRlciIsIkdyZWVuaG91c2VFZmZlY3RPYnNlcnZhdGlvbldpbmRvdyIsIkxheWVyRGVidWdOb2RlIiwiVGhlcm1vbWV0ZXJBbmRSZWFkb3V0IiwiU0laRSIsIlNVUkZBQ0VfVEVNUEVSQVRVUkVfT1BBQ0lUWV9TQ0FMSU5HX1JBTkdFIiwiTGFuZHNjYXBlT2JzZXJ2YXRpb25XaW5kb3ciLCJjb25zdHJ1Y3RvciIsIm1vZGVsIiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsInRhbmRlbSIsIlJFUVVJUkVEIiwiaXNQbGF5aW5nUHJvcGVydHkiLCJsaXN0UGFyZW50Tm9kZSIsInN1cmZhY2VUaGVybW9tZXRlciIsIm1pblRlbXBlcmF0dXJlIiwiZ3JvdW5kTGF5ZXIiLCJtaW5pbXVtVGVtcGVyYXR1cmUiLCJjcmVhdGVUYW5kZW0iLCJsZWZ0Qm90dG9tIiwid2luZG93RnJhbWUiLCJwbHVzWFkiLCJDT05UUk9MX0FORF9JTlNUUlVNRU5UX0lOU0VUIiwiY29udHJvbHNMYXllciIsImFkZENoaWxkIiwiaGF6ZU5vZGUiLCJ3aWR0aCIsImhlaWdodCIsInByZXNlbnRhdGlvbkxheWVyIiwiY29uY2VudHJhdGlvblByb3BlcnR5IiwibGluayIsImNvbmNlbnRyYXRpb24iLCJmaWxsIiwiTElHSFRfR1JBWSIsIndpdGhBbHBoYSIsImVuZXJneUFic29yYmluZ0VtaXR0aW5nTGF5ZXJOb2RlcyIsInNob3dBbGxMYXllcnMiLCJwdXNoIiwibW9kZWxWaWV3VHJhbnNmb3JtIiwibGluZU9wdGlvbnMiLCJzdHJva2UiLCJHUkVFTiIsInZpc2libGUiLCJhdG1vc3BoZXJlTGF5ZXJzIiwiZm9yRWFjaCIsImF0bW9zcGhlcmVMYXllciIsImxheWVyTm9kZSIsImJhY2tncm91bmRMYXllciIsImNsb3VkIiwiZ2FzQ29uY2VudHJhdGlvbkFsZXJ0ZXIiLCJkZXNjcmlwdGlvbkFsZXJ0Tm9kZSIsInN0ZXAiLCJkdCIsInN0ZXBBbGVydGVycyIsInJlc2V0IiwiY3JlYXRlR3JvdW5kTm9kZSIsInNoYXJlZEltYWdlT3B0aW9ucyIsIm1heFdpZHRoIiwiYm90dG9tIiwidW5hZG9ybmVkTGFuZHNjYXBlSW1hZ2UiLCJhZ3JpY3VsdHVyYWxMYW5kc2NhcGVCYWNrZ3JvdW5kSW1hZ2UiLCJhZ3JpY3VsdHVyYWxMYW5kc2NhcGVGb3JlZ3JvdW5kSW1hZ2UiLCJmaWZ0aWVzTGFuZHNjYXBlQmFja2dyb3VuZEltYWdlIiwiZmlmdGllc0xhbmRzY2FwZUZvcmVncm91bmRJbWFnZSIsImRlbnNlQ2l0eUxhbmRzY2FwZUJhY2tncm91bmRJbWFnZSIsImRlbnNlQ2l0eUxhbmRzY2FwZUZvcmVncm91bmRJbWFnZSIsImljZUFnZUxhbmRzY2FwZUJhY2tncm91bmRJbWFnZSIsImljZUFnZUxhbmRzY2FwZUZvcmVncm91bmRJbWFnZSIsImdyb3VuZFNoYXBlIiwiY3JlYXRlR3JvdW5kU2hhcGUiLCJncm91bmRTaGFwZUJvdW5kcyIsImdldEJvdW5kcyIsInN1cmZhY2VUZW1wZXJhdHVyZU5vZGUiLCJtaW5ZIiwibWF4WSIsImFkZENvbG9yU3RvcCIsIlJFRF9DT0xPUkJMSU5EIiwic3VyZmFjZVRlbXBlcmF0dXJlVmlzaWJsZVByb3BlcnR5IiwibGlua0F0dHJpYnV0ZSIsInN1cmZhY2VUZW1wZXJhdHVyZUtlbHZpblByb3BlcnR5Iiwic3VyZmFjZVRlbXBlcmF0dXJlIiwib3BhY2l0eSIsImNsYW1wIiwibWluIiwiZ2V0TGVuZ3RoIiwibXVsdGlsaW5rIiwiY29uY2VudHJhdGlvbkNvbnRyb2xNb2RlUHJvcGVydHkiLCJkYXRlUHJvcGVydHkiLCJjb25jZW50cmF0aW9uQ29udHJvbE1vZGUiLCJkYXRlIiwiQllfVkFMVUUiLCJJQ0VfQUdFIiwiVFdFTlRZX1RXRU5UWSIsIkJZX0RBVEUiLCJTRVZFTlRFRU5fRklGVFkiLCJOSU5FVEVFTl9GSUZUWSIsImNoaWxkcmVuIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJMYW5kc2NhcGVPYnNlcnZhdGlvbldpbmRvdy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMS0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBMYW5kc2NhcGVPYnNlcnZhdGlvbldpbmRvdyBpcyBhIFNjZW5lcnkgTm9kZSB0aGF0IGlzIHVzZWQgd2l0aGluIHRoZSBHcmVlbmhvdXNlIEVmZmVjdCBzaW11bGF0aW9uIHRvIHByZXNlbnQgYSB2aWV3XHJcbiAqIG9mIGEgbGFuZHNjYXBlIGFuZCBza3ksIGFzIHdlbGwgYXMgYXJ0d29yayB0aGF0IHJlcHJlc2VudHMgZGlmZmVyZW50IHRpbWUgcGVyaW9kcy4gIEl0IGlzIGludGVuZGVkIHRvIGJlIHVzZWQgYXMgYVxyXG4gKiBiYXNlIGNsYXNzLCBhbmQgc3ViY2xhc3NlcyBhcmUgdXNlZCB0byBhZGQgcmVwcmVzZW50YXRpb25zIG9mIGVuZXJneSBpbnRlcmFjdGluZyB3aXRoIHRoZSBsYW5kc2NhcGUgYW5kIGF0bW9zcGhlcmUuXHJcbiAqXHJcbiAqIEBhdXRob3IgSm9obiBCbGFuY28gKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IE11bHRpbGluayBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL011bHRpbGluay5qcyc7XHJcbmltcG9ydCBUUmVhZE9ubHlQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1RSZWFkT25seVByb3BlcnR5LmpzJztcclxuaW1wb3J0IFJhbmdlIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9SYW5nZS5qcyc7XHJcbmltcG9ydCBVdGlscyBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVXRpbHMuanMnO1xyXG5pbXBvcnQgb3B0aW9uaXplLCB7IEVtcHR5U2VsZk9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuaW1wb3J0IFBoZXRDb2xvclNjaGVtZSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvUGhldENvbG9yU2NoZW1lLmpzJztcclxuaW1wb3J0IHsgQ29sb3IsIEltYWdlLCBMaW5lYXJHcmFkaWVudCwgTm9kZSwgUGF0aCwgUmVjdGFuZ2xlIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IFRhbmRlbSBmcm9tICcuLi8uLi8uLi8uLi90YW5kZW0vanMvVGFuZGVtLmpzJztcclxuaW1wb3J0IGFncmljdWx0dXJhbExhbmRzY2FwZUJhY2tncm91bmRfcG5nIGZyb20gJy4uLy4uLy4uL2ltYWdlcy9hZ3JpY3VsdHVyYWxMYW5kc2NhcGVCYWNrZ3JvdW5kX3BuZy5qcyc7XHJcbmltcG9ydCBhZ3JpY3VsdHVyYWxMYW5kc2NhcGVGb3JlZ3JvdW5kX3BuZyBmcm9tICcuLi8uLi8uLi9pbWFnZXMvYWdyaWN1bHR1cmFsTGFuZHNjYXBlRm9yZWdyb3VuZF9wbmcuanMnO1xyXG5pbXBvcnQgZmlmdGllc0xhbmRzY2FwZUJhY2tncm91bmRfcG5nIGZyb20gJy4uLy4uLy4uL2ltYWdlcy9maWZ0aWVzTGFuZHNjYXBlQmFja2dyb3VuZF9wbmcuanMnO1xyXG5pbXBvcnQgZmlmdGllc0xhbmRzY2FwZUZvcmVncm91bmRfcG5nIGZyb20gJy4uLy4uLy4uL2ltYWdlcy9maWZ0aWVzTGFuZHNjYXBlRm9yZWdyb3VuZF9wbmcuanMnO1xyXG5pbXBvcnQgaWNlQWdlTGFuZHNjYXBlQmFja2dyb3VuZF9wbmcgZnJvbSAnLi4vLi4vLi4vaW1hZ2VzL2ljZUFnZUxhbmRzY2FwZUJhY2tncm91bmRfcG5nLmpzJztcclxuaW1wb3J0IGljZUFnZUxhbmRzY2FwZUZvcmVncm91bmRfcG5nIGZyb20gJy4uLy4uLy4uL2ltYWdlcy9pY2VBZ2VMYW5kc2NhcGVGb3JlZ3JvdW5kX3BuZy5qcyc7XHJcbmltcG9ydCB0d2VudHlUd2VudGllc0xhbmRzY2FwZUJhY2tncm91bmRfcG5nIGZyb20gJy4uLy4uLy4uL2ltYWdlcy90d2VudHlUd2VudGllc0xhbmRzY2FwZUJhY2tncm91bmRfcG5nLmpzJztcclxuaW1wb3J0IHR3ZW50eVR3ZW50aWVzTGFuZHNjYXBlRm9yZWdyb3VuZF9wbmcgZnJvbSAnLi4vLi4vLi4vaW1hZ2VzL3R3ZW50eVR3ZW50aWVzTGFuZHNjYXBlRm9yZWdyb3VuZF9wbmcuanMnO1xyXG5pbXBvcnQgdW5hZG9ybmVkTGFuZHNjYXBlX3BuZyBmcm9tICcuLi8uLi8uLi9pbWFnZXMvdW5hZG9ybmVkTGFuZHNjYXBlX3BuZy5qcyc7XHJcbmltcG9ydCBncmVlbmhvdXNlRWZmZWN0IGZyb20gJy4uLy4uL2dyZWVuaG91c2VFZmZlY3QuanMnO1xyXG5pbXBvcnQgR3JlZW5ob3VzZUVmZmVjdFF1ZXJ5UGFyYW1ldGVycyBmcm9tICcuLi9HcmVlbmhvdXNlRWZmZWN0UXVlcnlQYXJhbWV0ZXJzLmpzJztcclxuaW1wb3J0IENvbmNlbnRyYXRpb25Nb2RlbCwgeyBDb25jZW50cmF0aW9uQ29udHJvbE1vZGUsIENvbmNlbnRyYXRpb25EYXRlIH0gZnJvbSAnLi4vbW9kZWwvQ29uY2VudHJhdGlvbk1vZGVsLmpzJztcclxuaW1wb3J0IENsb3VkTm9kZSBmcm9tICcuL0Nsb3VkTm9kZS5qcyc7XHJcbmltcG9ydCBHYXNDb25jZW50cmF0aW9uQWxlcnRlciBmcm9tICcuL0dhc0NvbmNlbnRyYXRpb25BbGVydGVyLmpzJztcclxuaW1wb3J0IEdyZWVuaG91c2VFZmZlY3RPYnNlcnZhdGlvbldpbmRvdywgeyBHcmVlbmhvdXNlRWZmZWN0T2JzZXJ2YXRpb25XaW5kb3dPcHRpb25zIH0gZnJvbSAnLi9HcmVlbmhvdXNlRWZmZWN0T2JzZXJ2YXRpb25XaW5kb3cuanMnO1xyXG5pbXBvcnQgTGF5ZXJEZWJ1Z05vZGUgZnJvbSAnLi9MYXllckRlYnVnTm9kZS5qcyc7XHJcbmltcG9ydCBUaGVybW9tZXRlckFuZFJlYWRvdXQgZnJvbSAnLi9UaGVybW9tZXRlckFuZFJlYWRvdXQuanMnO1xyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IEVtcHR5U2VsZk9wdGlvbnM7XHJcbnR5cGUgTGFuZHNjYXBlT2JzZXJ2YXRpb25XaW5kb3dPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBHcmVlbmhvdXNlRWZmZWN0T2JzZXJ2YXRpb25XaW5kb3dPcHRpb25zO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IFNJWkUgPSBHcmVlbmhvdXNlRWZmZWN0T2JzZXJ2YXRpb25XaW5kb3cuU0laRTtcclxuXHJcbi8vIFRoZSBvcGFjaXR5IG9mIHRoZSBzdXJmYWNlIHRlbXBlcmF0dXJlIGlzIHNjYWxlZCBvdmVyIHRoaXMgcmFuZ2UuICBUaGUgdmFsdWVzLCB3aGljaCBhcmUgaW4gS2VsdmluLCB3ZXJlIGVtcGlyaWNhbGx5XHJcbi8vIGRldGVybWluZWQgYW5kIGNhbiBiZSBhZGp1c3RlZCBhcyBuZWVkZWQgdG8gYWNoaWV2ZSB0aGUgZGVzaXJlZCB2aXN1YWwgZWZmZWN0LlxyXG5jb25zdCBTVVJGQUNFX1RFTVBFUkFUVVJFX09QQUNJVFlfU0NBTElOR19SQU5HRSA9IG5ldyBSYW5nZSggMjUwLCAyOTUgKTtcclxuXHJcbmNsYXNzIExhbmRzY2FwZU9ic2VydmF0aW9uV2luZG93IGV4dGVuZHMgR3JlZW5ob3VzZUVmZmVjdE9ic2VydmF0aW9uV2luZG93IHtcclxuICBwcml2YXRlIHJlYWRvbmx5IGdhc0NvbmNlbnRyYXRpb25BbGVydGVyOiBHYXNDb25jZW50cmF0aW9uQWxlcnRlcjtcclxuICBwcml2YXRlIHJlYWRvbmx5IGlzUGxheWluZ1Byb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxib29sZWFuPjtcclxuXHJcbiAgLy8gU3VyZmFjZSB0aGVybW9tZXRlciB3aXRoIHZhbHVlIHJlYWRvdXQgYW5kIHVuaXRzIENvbWJvQm94LCBwdWJsaWMgZm9yIHBkb21PcmRlci5cclxuICBwdWJsaWMgcmVhZG9ubHkgc3VyZmFjZVRoZXJtb21ldGVyOiBUaGVybW9tZXRlckFuZFJlYWRvdXQ7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggbW9kZWw6IENvbmNlbnRyYXRpb25Nb2RlbCwgcHJvdmlkZWRPcHRpb25zPzogTGFuZHNjYXBlT2JzZXJ2YXRpb25XaW5kb3dPcHRpb25zICkge1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8TGFuZHNjYXBlT2JzZXJ2YXRpb25XaW5kb3dPcHRpb25zLCBTZWxmT3B0aW9ucywgR3JlZW5ob3VzZUVmZmVjdE9ic2VydmF0aW9uV2luZG93T3B0aW9ucz4oKSgge1xyXG5cclxuICAgICAgLy8gcGhldC1pb1xyXG4gICAgICB0YW5kZW06IFRhbmRlbS5SRVFVSVJFRFxyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgc3VwZXIoIG1vZGVsLCBvcHRpb25zICk7XHJcbiAgICB0aGlzLmlzUGxheWluZ1Byb3BlcnR5ID0gbW9kZWwuaXNQbGF5aW5nUHJvcGVydHk7XHJcblxyXG4gICAgLy8gdGhlcm1vbWV0ZXJcclxuICAgIGNvbnN0IGxpc3RQYXJlbnROb2RlID0gbmV3IE5vZGUoKTtcclxuICAgIHRoaXMuc3VyZmFjZVRoZXJtb21ldGVyID0gbmV3IFRoZXJtb21ldGVyQW5kUmVhZG91dCggbW9kZWwsIHtcclxuXHJcbiAgICAgIG1pblRlbXBlcmF0dXJlOiBtb2RlbC5ncm91bmRMYXllci5taW5pbXVtVGVtcGVyYXR1cmUgLSA1LFxyXG5cclxuICAgICAgLy8gcGhldC1pb1xyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3N1cmZhY2VUaGVybW9tZXRlcicgKVxyXG4gICAgfSApO1xyXG4gICAgdGhpcy5zdXJmYWNlVGhlcm1vbWV0ZXIubGVmdEJvdHRvbSA9IHRoaXMud2luZG93RnJhbWUubGVmdEJvdHRvbS5wbHVzWFkoXHJcbiAgICAgIEdyZWVuaG91c2VFZmZlY3RPYnNlcnZhdGlvbldpbmRvdy5DT05UUk9MX0FORF9JTlNUUlVNRU5UX0lOU0VULFxyXG4gICAgICAtR3JlZW5ob3VzZUVmZmVjdE9ic2VydmF0aW9uV2luZG93LkNPTlRST0xfQU5EX0lOU1RSVU1FTlRfSU5TRVRcclxuICAgICk7XHJcbiAgICBsaXN0UGFyZW50Tm9kZS5sZWZ0Qm90dG9tID0gdGhpcy5zdXJmYWNlVGhlcm1vbWV0ZXIubGVmdEJvdHRvbTtcclxuICAgIHRoaXMuY29udHJvbHNMYXllci5hZGRDaGlsZCggdGhpcy5zdXJmYWNlVGhlcm1vbWV0ZXIgKTtcclxuICAgIHRoaXMuY29udHJvbHNMYXllci5hZGRDaGlsZCggbGlzdFBhcmVudE5vZGUgKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgdGhlIG5vZGUgdGhhdCB3aWxsIG1ha2UgdGhlIHNreSBsb29rIGEgYml0IGhhenkgYXMgbW9yZSBncmVlbmhvdXNlIGdhc2VzIGFyZSBhZGRlZC4gIFN0cmljdGx5IHNwZWFraW5nLFxyXG4gICAgLy8gbW9zdCBncmVlbmhvdXNlIGdhc2VzIGRvIG5vdCBpbnRlcmFjdCB3aXRoIHZpc2libGUgbGlnaHQsIHNvIHRoaXMgaXMgYSBiaXQgb2YgXCJIb2xseXdvb2RpbmdcIiB0byBtYWtlIGl0IGNsZWFyXHJcbiAgICAvLyB0aGF0IHNvbWV0aGluZyBpbiB0aGUgYXRtb3NwaGVyZSBpcyBjaGFuZ2luZy5cclxuICAgIGNvbnN0IGhhemVOb2RlID0gbmV3IFJlY3RhbmdsZSggMCwgMCwgU0laRS53aWR0aCwgU0laRS5oZWlnaHQgKTtcclxuICAgIHRoaXMucHJlc2VudGF0aW9uTGF5ZXIuYWRkQ2hpbGQoIGhhemVOb2RlICk7XHJcblxyXG4gICAgLy8gQWRqdXN0IHRoZSBhbW91bnQgb2YgXCJoYXplXCIgYmFzZWQgb24gdGhlIGNvbmNlbnRyYXRpb24gb2YgZ3JlZW5ob3VzZSBnYXNlcy5cclxuICAgIG1vZGVsLmNvbmNlbnRyYXRpb25Qcm9wZXJ0eS5saW5rKCBjb25jZW50cmF0aW9uID0+IHtcclxuXHJcbiAgICAgIC8vIG1hcHBpbmcgb2YgY29uY2VudHJhdGlvbiB0byBhbHBoYSB3ZSBlbXBpcmljYWxseSBkZXRlcm1pbmVkXHJcbiAgICAgIGhhemVOb2RlLmZpbGwgPSBDb2xvci5MSUdIVF9HUkFZLndpdGhBbHBoYSggY29uY2VudHJhdGlvbiAvIDMgKTtcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBEZWJ1ZyBjb2RlIGZvciByZXByZXNlbnRpbmcgbGF5ZXJzLCBvbmx5IGFkZGVkIGlmIHRoZSBhcHByb3ByaWF0ZSBxdWVyeSBwYXJhbWV0ZXIgaXMgc2V0LlxyXG4gICAgY29uc3QgZW5lcmd5QWJzb3JiaW5nRW1pdHRpbmdMYXllck5vZGVzID0gW107XHJcbiAgICBpZiAoIEdyZWVuaG91c2VFZmZlY3RRdWVyeVBhcmFtZXRlcnMuc2hvd0FsbExheWVycyApIHtcclxuXHJcbiAgICAgIC8vIEFkZCB0aGUgZ3JvdW5kIGxheWVyIG5vZGUuXHJcbiAgICAgIGVuZXJneUFic29yYmluZ0VtaXR0aW5nTGF5ZXJOb2Rlcy5wdXNoKCBuZXcgTGF5ZXJEZWJ1Z05vZGUoXHJcbiAgICAgICAgbW9kZWwuZ3JvdW5kTGF5ZXIsXHJcbiAgICAgICAgdGhpcy5tb2RlbFZpZXdUcmFuc2Zvcm0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbGluZU9wdGlvbnM6IHsgc3Ryb2tlOiBDb2xvci5HUkVFTiB9LFxyXG4gICAgICAgICAgdmlzaWJsZTogR3JlZW5ob3VzZUVmZmVjdFF1ZXJ5UGFyYW1ldGVycy5zaG93QWxsTGF5ZXJzXHJcbiAgICAgICAgfVxyXG4gICAgICApICk7XHJcblxyXG4gICAgICAvLyBBZGQgdGhlIGF0bW9zcGhlcmUgbGF5ZXIgbm9kZXMuXHJcbiAgICAgIG1vZGVsLmF0bW9zcGhlcmVMYXllcnMuZm9yRWFjaCggYXRtb3NwaGVyZUxheWVyID0+IHtcclxuICAgICAgICBlbmVyZ3lBYnNvcmJpbmdFbWl0dGluZ0xheWVyTm9kZXMucHVzaCggbmV3IExheWVyRGVidWdOb2RlKFxyXG4gICAgICAgICAgYXRtb3NwaGVyZUxheWVyLFxyXG4gICAgICAgICAgdGhpcy5tb2RlbFZpZXdUcmFuc2Zvcm0sXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGxpbmVPcHRpb25zOiB7IHN0cm9rZTogbmV3IENvbG9yKCA1MCwgNTAsIDIwMCwgMC41ICkgfSxcclxuICAgICAgICAgICAgdmlzaWJsZTogR3JlZW5ob3VzZUVmZmVjdFF1ZXJ5UGFyYW1ldGVycy5zaG93QWxsTGF5ZXJzXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKSApO1xyXG4gICAgICB9ICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWRkIHRoZSBsYXllciBub2Rlcy5cclxuICAgIGVuZXJneUFic29yYmluZ0VtaXR0aW5nTGF5ZXJOb2Rlcy5mb3JFYWNoKCBsYXllck5vZGUgPT4gdGhpcy5iYWNrZ3JvdW5kTGF5ZXIuYWRkQ2hpbGQoIGxheWVyTm9kZSApICk7XHJcblxyXG4gICAgLy8gQWRkIHRoZSBjbG91ZCwgaWYgcHJlc2VudC5cclxuICAgIGlmICggbW9kZWwuY2xvdWQgKSB7XHJcbiAgICAgIHRoaXMuYmFja2dyb3VuZExheWVyLmFkZENoaWxkKCBuZXcgQ2xvdWROb2RlKCBtb2RlbC5jbG91ZCwgdGhpcy5tb2RlbFZpZXdUcmFuc2Zvcm0gKSApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHBkb20gLSByZXNwb25zaXZlIGRlc2NyaXB0aW9uc1xyXG4gICAgdGhpcy5nYXNDb25jZW50cmF0aW9uQWxlcnRlciA9IG5ldyBHYXNDb25jZW50cmF0aW9uQWxlcnRlciggbW9kZWwsIHtcclxuICAgICAgZGVzY3JpcHRpb25BbGVydE5vZGU6IHRoaXNcclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlZHJhdyBjb21wb25lbnRzIG9mIHRoZSBvYnNlcnZhdGlvbiB3aW5kb3cuIERvZXMgbm90IGdldCBjYWxsZWQgaWYgc2ltIGlzIHBhdXNlZCBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucy5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgc3RlcCggZHQ6IG51bWJlciApOiB2b2lkIHtcclxuICAgIHN1cGVyLnN0ZXAoIGR0ICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTdGVwIGFsZXJ0ZXJzIG9mIHRoaXMgT2JzZXJ2YXRpb25XaW5kb3cgKG1vc3RseSB0byBzdXBwb3J0IHBvbGxpbmcgZGVzY3JpcHRpb25zKS4gVGhpcyBpcyBzZXBhcmF0ZSBmcm9tXHJcbiAgICogc3RlcCgpIGJlY2F1c2UgdGhpcyBuZWVkcyB0byBiZSBzdGVwcGVkIGV2ZW4gd2hpbGUgdGhlIHNpbSBpcyBwYXVzZWQuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHN0ZXBBbGVydGVycyggZHQ6IG51bWJlciApOiB2b2lkIHtcclxuICAgIHRoaXMuZ2FzQ29uY2VudHJhdGlvbkFsZXJ0ZXIuc3RlcCggZHQgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNldCgpOiB2b2lkIHtcclxuICAgIHRoaXMuZ2FzQ29uY2VudHJhdGlvbkFsZXJ0ZXIucmVzZXQoKTtcclxuICAgIHN1cGVyLnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGUgdGhlIG5vZGUgdGhhdCB3aWxsIHJlcHJlc2VudCB0aGUgZ3JvdW5kLCBhbmQgd2lsbCB1c2UgYXBwcm9wcmlhdGUgaW1hZ2VzIGZvciB0aGUgdmFyaW91cyBkYXRlcy5cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgb3ZlcnJpZGUgY3JlYXRlR3JvdW5kTm9kZSggbW9kZWw6IENvbmNlbnRyYXRpb25Nb2RlbCApOiBOb2RlIHtcclxuXHJcbiAgICBjb25zdCBzaGFyZWRJbWFnZU9wdGlvbnMgPSB7XHJcbiAgICAgIG1heFdpZHRoOiB0aGlzLndpZHRoLFxyXG4gICAgICBib3R0b206IFNJWkUuaGVpZ2h0XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGJhY2tncm91bmQgYW5kIGZvcmVncm91bmQgaW1hZ2VzXHJcbiAgICBjb25zdCB1bmFkb3JuZWRMYW5kc2NhcGVJbWFnZSA9IG5ldyBJbWFnZSggdW5hZG9ybmVkTGFuZHNjYXBlX3BuZywgc2hhcmVkSW1hZ2VPcHRpb25zICk7XHJcbiAgICBjb25zdCBhZ3JpY3VsdHVyYWxMYW5kc2NhcGVCYWNrZ3JvdW5kSW1hZ2UgPSBuZXcgSW1hZ2UoIGFncmljdWx0dXJhbExhbmRzY2FwZUJhY2tncm91bmRfcG5nLCBzaGFyZWRJbWFnZU9wdGlvbnMgKTtcclxuICAgIGNvbnN0IGFncmljdWx0dXJhbExhbmRzY2FwZUZvcmVncm91bmRJbWFnZSA9IG5ldyBJbWFnZSggYWdyaWN1bHR1cmFsTGFuZHNjYXBlRm9yZWdyb3VuZF9wbmcsIHNoYXJlZEltYWdlT3B0aW9ucyApO1xyXG4gICAgY29uc3QgZmlmdGllc0xhbmRzY2FwZUJhY2tncm91bmRJbWFnZSA9IG5ldyBJbWFnZSggZmlmdGllc0xhbmRzY2FwZUJhY2tncm91bmRfcG5nLCBzaGFyZWRJbWFnZU9wdGlvbnMgKTtcclxuICAgIGNvbnN0IGZpZnRpZXNMYW5kc2NhcGVGb3JlZ3JvdW5kSW1hZ2UgPSBuZXcgSW1hZ2UoIGZpZnRpZXNMYW5kc2NhcGVGb3JlZ3JvdW5kX3BuZywgc2hhcmVkSW1hZ2VPcHRpb25zICk7XHJcbiAgICBjb25zdCBkZW5zZUNpdHlMYW5kc2NhcGVCYWNrZ3JvdW5kSW1hZ2UgPSBuZXcgSW1hZ2UoIHR3ZW50eVR3ZW50aWVzTGFuZHNjYXBlQmFja2dyb3VuZF9wbmcsIHNoYXJlZEltYWdlT3B0aW9ucyApO1xyXG4gICAgY29uc3QgZGVuc2VDaXR5TGFuZHNjYXBlRm9yZWdyb3VuZEltYWdlID0gbmV3IEltYWdlKCB0d2VudHlUd2VudGllc0xhbmRzY2FwZUZvcmVncm91bmRfcG5nLCBzaGFyZWRJbWFnZU9wdGlvbnMgKTtcclxuICAgIGNvbnN0IGljZUFnZUxhbmRzY2FwZUJhY2tncm91bmRJbWFnZSA9IG5ldyBJbWFnZSggaWNlQWdlTGFuZHNjYXBlQmFja2dyb3VuZF9wbmcsIHNoYXJlZEltYWdlT3B0aW9ucyApO1xyXG4gICAgY29uc3QgaWNlQWdlTGFuZHNjYXBlRm9yZWdyb3VuZEltYWdlID0gbmV3IEltYWdlKCBpY2VBZ2VMYW5kc2NhcGVGb3JlZ3JvdW5kX3BuZywgc2hhcmVkSW1hZ2VPcHRpb25zICk7XHJcblxyXG4gICAgLy8gc3VyZmFjZSB0ZW1wZXJhdHVyZSBub2RlLCB3aGljaCBpcyBtZWFudCB0byBsb29rIGxpa2UgYSBnbG93IG9uIHRoZSBzdXJmYWNlXHJcbiAgICBjb25zdCBncm91bmRTaGFwZSA9IEdyZWVuaG91c2VFZmZlY3RPYnNlcnZhdGlvbldpbmRvdy5jcmVhdGVHcm91bmRTaGFwZSgpO1xyXG4gICAgY29uc3QgZ3JvdW5kU2hhcGVCb3VuZHMgPSBncm91bmRTaGFwZS5nZXRCb3VuZHMoKTtcclxuICAgIGNvbnN0IHN1cmZhY2VUZW1wZXJhdHVyZU5vZGUgPSBuZXcgUGF0aCggZ3JvdW5kU2hhcGUsIHtcclxuICAgICAgZmlsbDogbmV3IExpbmVhckdyYWRpZW50KCAwLCBncm91bmRTaGFwZUJvdW5kcy5taW5ZLCAwLCBncm91bmRTaGFwZUJvdW5kcy5tYXhZIClcclxuICAgICAgICAuYWRkQ29sb3JTdG9wKCAwLCBQaGV0Q29sb3JTY2hlbWUuUkVEX0NPTE9SQkxJTkQgKVxyXG4gICAgICAgIC5hZGRDb2xvclN0b3AoIDEsICdyZ2JhKCAyNTUsIDAsIDAsIDAgKScgKSxcclxuICAgICAgYm90dG9tOiBTSVpFLmhlaWdodFxyXG4gICAgfSApO1xyXG5cclxuICAgIG1vZGVsLnN1cmZhY2VUZW1wZXJhdHVyZVZpc2libGVQcm9wZXJ0eS5saW5rQXR0cmlidXRlKCBzdXJmYWNlVGVtcGVyYXR1cmVOb2RlLCAndmlzaWJsZScgKTtcclxuXHJcbiAgICBtb2RlbC5zdXJmYWNlVGVtcGVyYXR1cmVLZWx2aW5Qcm9wZXJ0eS5saW5rKCBzdXJmYWNlVGVtcGVyYXR1cmUgPT4ge1xyXG4gICAgICBzdXJmYWNlVGVtcGVyYXR1cmVOb2RlLm9wYWNpdHkgPSBVdGlscy5jbGFtcChcclxuICAgICAgICAoIHN1cmZhY2VUZW1wZXJhdHVyZSAtIFNVUkZBQ0VfVEVNUEVSQVRVUkVfT1BBQ0lUWV9TQ0FMSU5HX1JBTkdFLm1pbiApIC8gU1VSRkFDRV9URU1QRVJBVFVSRV9PUEFDSVRZX1NDQUxJTkdfUkFOR0UuZ2V0TGVuZ3RoKCksXHJcbiAgICAgICAgMCxcclxuICAgICAgICAxXHJcbiAgICAgICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gQ29udHJvbCB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgaW1hZ2VzIGJhc2VkIG9uIHRoZSBzdGF0ZSBvZiB0aGUgbW9kZWwuXHJcbiAgICBNdWx0aWxpbmsubXVsdGlsaW5rKFxyXG4gICAgICBbIG1vZGVsLmNvbmNlbnRyYXRpb25Db250cm9sTW9kZVByb3BlcnR5LCBtb2RlbC5kYXRlUHJvcGVydHkgXSxcclxuICAgICAgKCBjb25jZW50cmF0aW9uQ29udHJvbE1vZGUsIGRhdGUgKSA9PiB7XHJcbiAgICAgICAgdW5hZG9ybmVkTGFuZHNjYXBlSW1hZ2UudmlzaWJsZSA9IGNvbmNlbnRyYXRpb25Db250cm9sTW9kZSA9PT0gQ29uY2VudHJhdGlvbkNvbnRyb2xNb2RlLkJZX1ZBTFVFIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUgPT09IENvbmNlbnRyYXRpb25EYXRlLklDRV9BR0UgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZSA9PT0gQ29uY2VudHJhdGlvbkRhdGUuVFdFTlRZX1RXRU5UWTtcclxuICAgICAgICBpY2VBZ2VMYW5kc2NhcGVCYWNrZ3JvdW5kSW1hZ2UudmlzaWJsZSA9IGNvbmNlbnRyYXRpb25Db250cm9sTW9kZSA9PT0gQ29uY2VudHJhdGlvbkNvbnRyb2xNb2RlLkJZX0RBVEUgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlID09PSBDb25jZW50cmF0aW9uRGF0ZS5JQ0VfQUdFO1xyXG4gICAgICAgIGljZUFnZUxhbmRzY2FwZUZvcmVncm91bmRJbWFnZS52aXNpYmxlID0gY29uY2VudHJhdGlvbkNvbnRyb2xNb2RlID09PSBDb25jZW50cmF0aW9uQ29udHJvbE1vZGUuQllfREFURSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUgPT09IENvbmNlbnRyYXRpb25EYXRlLklDRV9BR0U7XHJcbiAgICAgICAgYWdyaWN1bHR1cmFsTGFuZHNjYXBlQmFja2dyb3VuZEltYWdlLnZpc2libGUgPSBjb25jZW50cmF0aW9uQ29udHJvbE1vZGUgPT09IENvbmNlbnRyYXRpb25Db250cm9sTW9kZS5CWV9EQVRFICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlID09PSBDb25jZW50cmF0aW9uRGF0ZS5TRVZFTlRFRU5fRklGVFk7XHJcbiAgICAgICAgYWdyaWN1bHR1cmFsTGFuZHNjYXBlRm9yZWdyb3VuZEltYWdlLnZpc2libGUgPSBjb25jZW50cmF0aW9uQ29udHJvbE1vZGUgPT09IENvbmNlbnRyYXRpb25Db250cm9sTW9kZS5CWV9EQVRFICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlID09PSBDb25jZW50cmF0aW9uRGF0ZS5TRVZFTlRFRU5fRklGVFk7XHJcbiAgICAgICAgZmlmdGllc0xhbmRzY2FwZUJhY2tncm91bmRJbWFnZS52aXNpYmxlID0gY29uY2VudHJhdGlvbkNvbnRyb2xNb2RlID09PSBDb25jZW50cmF0aW9uQ29udHJvbE1vZGUuQllfREFURSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUgPT09IENvbmNlbnRyYXRpb25EYXRlLk5JTkVURUVOX0ZJRlRZO1xyXG4gICAgICAgIGZpZnRpZXNMYW5kc2NhcGVGb3JlZ3JvdW5kSW1hZ2UudmlzaWJsZSA9IGNvbmNlbnRyYXRpb25Db250cm9sTW9kZSA9PT0gQ29uY2VudHJhdGlvbkNvbnRyb2xNb2RlLkJZX0RBVEUgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlID09PSBDb25jZW50cmF0aW9uRGF0ZS5OSU5FVEVFTl9GSUZUWTtcclxuICAgICAgICBkZW5zZUNpdHlMYW5kc2NhcGVCYWNrZ3JvdW5kSW1hZ2UudmlzaWJsZSA9IGNvbmNlbnRyYXRpb25Db250cm9sTW9kZSA9PT0gQ29uY2VudHJhdGlvbkNvbnRyb2xNb2RlLkJZX0RBVEUgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUgPT09IENvbmNlbnRyYXRpb25EYXRlLlRXRU5UWV9UV0VOVFk7XHJcbiAgICAgICAgZGVuc2VDaXR5TGFuZHNjYXBlRm9yZWdyb3VuZEltYWdlLnZpc2libGUgPSBjb25jZW50cmF0aW9uQ29udHJvbE1vZGUgPT09IENvbmNlbnRyYXRpb25Db250cm9sTW9kZS5CWV9EQVRFICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlID09PSBDb25jZW50cmF0aW9uRGF0ZS5UV0VOVFlfVFdFTlRZO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG5cclxuICAgIC8vIFJldHVybiBhIG5vZGUgdGhhdCBjb250YWlucyBhbGwgdGhlIGltYWdlcy5cclxuICAgIHJldHVybiBuZXcgTm9kZSgge1xyXG4gICAgICBjaGlsZHJlbjogW1xyXG5cclxuICAgICAgICAvLyBsYW5kc2NhcGUgaW1hZ2UgYmFja2dyb3VuZHNcclxuICAgICAgICB1bmFkb3JuZWRMYW5kc2NhcGVJbWFnZSxcclxuICAgICAgICBpY2VBZ2VMYW5kc2NhcGVCYWNrZ3JvdW5kSW1hZ2UsXHJcbiAgICAgICAgYWdyaWN1bHR1cmFsTGFuZHNjYXBlQmFja2dyb3VuZEltYWdlLFxyXG4gICAgICAgIGZpZnRpZXNMYW5kc2NhcGVCYWNrZ3JvdW5kSW1hZ2UsXHJcbiAgICAgICAgZGVuc2VDaXR5TGFuZHNjYXBlQmFja2dyb3VuZEltYWdlLFxyXG5cclxuICAgICAgICAvLyBUaGUgc3VyZmFjZSB0ZW1wZXJhdHVyZSBub2RlIG11c3QgYmUgYmV0d2VlbiB0aGUgYmFja2dyb3VuZCBhbmQgZm9yZWdyb3VuZCBpbWFnZXMgZm9yIGNvcnJlY3QgbGF5ZXJpbmcuXHJcbiAgICAgICAgc3VyZmFjZVRlbXBlcmF0dXJlTm9kZSxcclxuXHJcbiAgICAgICAgLy8gbGFuZHNjYXBlIGltYWdlIGZvcmVncm91bmRzXHJcbiAgICAgICAgYWdyaWN1bHR1cmFsTGFuZHNjYXBlRm9yZWdyb3VuZEltYWdlLFxyXG4gICAgICAgIGljZUFnZUxhbmRzY2FwZUZvcmVncm91bmRJbWFnZSxcclxuICAgICAgICBmaWZ0aWVzTGFuZHNjYXBlRm9yZWdyb3VuZEltYWdlLFxyXG4gICAgICAgIGRlbnNlQ2l0eUxhbmRzY2FwZUZvcmVncm91bmRJbWFnZVxyXG4gICAgICBdXHJcbiAgICB9ICk7XHJcbiAgfVxyXG59XHJcblxyXG5ncmVlbmhvdXNlRWZmZWN0LnJlZ2lzdGVyKCAnTGFuZHNjYXBlT2JzZXJ2YXRpb25XaW5kb3cnLCBMYW5kc2NhcGVPYnNlcnZhdGlvbldpbmRvdyApO1xyXG5leHBvcnQgdHlwZSB7IExhbmRzY2FwZU9ic2VydmF0aW9uV2luZG93T3B0aW9ucyB9O1xyXG5leHBvcnQgZGVmYXVsdCBMYW5kc2NhcGVPYnNlcnZhdGlvbldpbmRvdzsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFNBQVMsTUFBTSxrQ0FBa0M7QUFFeEQsT0FBT0MsS0FBSyxNQUFNLDZCQUE2QjtBQUMvQyxPQUFPQyxLQUFLLE1BQU0sNkJBQTZCO0FBQy9DLE9BQU9DLFNBQVMsTUFBNEIsdUNBQXVDO0FBQ25GLE9BQU9DLGVBQWUsTUFBTSxnREFBZ0Q7QUFDNUUsU0FBU0MsS0FBSyxFQUFFQyxLQUFLLEVBQUVDLGNBQWMsRUFBRUMsSUFBSSxFQUFFQyxJQUFJLEVBQUVDLFNBQVMsUUFBUSxtQ0FBbUM7QUFDdkcsT0FBT0MsTUFBTSxNQUFNLGlDQUFpQztBQUNwRCxPQUFPQyxtQ0FBbUMsTUFBTSx3REFBd0Q7QUFDeEcsT0FBT0MsbUNBQW1DLE1BQU0sd0RBQXdEO0FBQ3hHLE9BQU9DLDhCQUE4QixNQUFNLG1EQUFtRDtBQUM5RixPQUFPQyw4QkFBOEIsTUFBTSxtREFBbUQ7QUFDOUYsT0FBT0MsNkJBQTZCLE1BQU0sa0RBQWtEO0FBQzVGLE9BQU9DLDZCQUE2QixNQUFNLGtEQUFrRDtBQUM1RixPQUFPQyxxQ0FBcUMsTUFBTSwwREFBMEQ7QUFDNUcsT0FBT0MscUNBQXFDLE1BQU0sMERBQTBEO0FBQzVHLE9BQU9DLHNCQUFzQixNQUFNLDJDQUEyQztBQUM5RSxPQUFPQyxnQkFBZ0IsTUFBTSwyQkFBMkI7QUFDeEQsT0FBT0MsK0JB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