// Copyright 2019-2022, University of Colorado Boulder

/**
 * The controls for the "custom" projectile type. This is a special type because, unlike the others, for this type the
 * projectile panel is populated with controls to adjust values via a Keypad (instead of just NumberControl).
 *
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */

import BooleanProperty from '../../../../axon/js/BooleanProperty.js';
import merge from '../../../../phet-core/js/merge.js';
import StringUtils from '../../../../phetcommon/js/util/StringUtils.js';
import NumberDisplay from '../../../../scenery-phet/js/NumberDisplay.js';
import PhetColorScheme from '../../../../scenery-phet/js/PhetColorScheme.js';
import { AlignBox, AlignGroup, Color, FireListener, HStrut, Node, Path, Text } from '../../../../scenery/js/imports.js';
import editSolidShape from '../../../../sherpa/js/fontawesome-5/editSolidShape.js';
import RectangularPushButton from '../../../../sun/js/buttons/RectangularPushButton.js';
import ProjectileMotionConstants from '../../common/ProjectileMotionConstants.js';
import projectileMotion from '../../projectileMotion.js';
import ProjectileMotionStrings from '../../ProjectileMotionStrings.js';
import ProjectileObjectTypeControl from './ProjectileObjectTypeControl.js';
const altitudeString = ProjectileMotionStrings.altitude;
const diameterString = ProjectileMotionStrings.diameter;
const dragCoefficientString = ProjectileMotionStrings.dragCoefficient;
const gravityString = ProjectileMotionStrings.gravity;
const kgString = ProjectileMotionStrings.kg;
const massString = ProjectileMotionStrings.mass;
const metersPerSecondSquaredString = ProjectileMotionStrings.metersPerSecondSquared;
const mString = ProjectileMotionStrings.m;
const pattern0Value1UnitsString = ProjectileMotionStrings.pattern0Value1Units;
const pattern0Value1UnitsWithSpaceString = ProjectileMotionStrings.pattern0Value1UnitsWithSpace;

// constants
const LABEL_OPTIONS = ProjectileMotionConstants.PANEL_LABEL_OPTIONS;
const NUMBER_DISPLAY_OPTIONS = ProjectileMotionConstants.NUMBER_DISPLAY_OPTIONS;
class CustomProjectileObjectTypeControl extends ProjectileObjectTypeControl {
  /**
   * @private
   * @param {LabModel} model
   * @param {KeypadLayer} keypadLayer
   * @param {ProjectileObjectType} objectType
   * @param {Tandem} tandem
   * @param {Object} [options]
   */
  constructor(model, keypadLayer, objectType, tandem, options) {
    // arbitrary values, as these should be provided by the LabProjectileControlPanel
    options = merge({
      xMargin: 5,
      minWidth: 200,
      readoutXMargin: 20,
      textDisplayWidth: 50
    }, options);

    // Instead of passing up parameters here, set them after the fact. After construction all members will be set
    // correctly
    super();

    // @private
    this.keypadLayer = keypadLayer;
    this.options = options;

    // mass
    this.massControl = this.createCustomControl(massString, kgString, model.projectileMassProperty, objectType.massRange, tandem.createTandem('massControl'));

    // diameter
    this.diameterControl = this.createCustomControl(diameterString, mString, model.projectileDiameterProperty, objectType.diameterRange, tandem.createTandem('diameterControl'));

    // gravity
    this.gravityControl = this.createCustomControl(gravityString, metersPerSecondSquaredString, model.gravityProperty, ProjectileMotionConstants.GRAVITY_RANGE, tandem.createTandem('gravityControl'));

    // altitude
    this.altitudeControl = this.createCustomControl(altitudeString, mString, model.altitudeProperty, ProjectileMotionConstants.ALTITUDE_RANGE, tandem.createTandem('altitudeControl'));

    // dragCoefficient
    this.dragCoefficientControl = this.createCustomControl(dragCoefficientString, null, model.projectileDragCoefficientProperty, objectType.dragCoefficientRange, tandem.createTandem('dragCoefficientControl'));
  }

  /**
   * Auxiliary function that creates VBox for a parameter label and readouts
   * @param {string} labelString - label for the parameter
   * @param {string} unitsString - units
   * @param {Property.<number>} valueProperty - the Property that is set and linked to
   * @param {Range} range - range for the valueProperty value
   * @param {Tandem} tandem
   * @returns {VBox}
   * @private
   */
  createCustomControl(labelString, unitsString, valueProperty, range, tandem) {
    // label
    const parameterLabel = new Text(labelString, merge({
      tandem: tandem.createTandem('labelText')
    }, LABEL_OPTIONS));

    // value text
    const valuePattern = unitsString ? StringUtils.fillIn(pattern0Value1UnitsWithSpaceString, {
      units: unitsString
    }) : StringUtils.fillIn(pattern0Value1UnitsString, {
      units: ''
    });
    const valueLabelOptions = merge({}, NUMBER_DISPLAY_OPTIONS, {
      backgroundStroke: 'black',
      decimalPlaces: null,
      cornerRadius: 4,
      xMargin: 4,
      minBackgroundWidth: this.options.textDisplayWidth,
      textOptions: {
        maxWidth: this.options.textDisplayWidth - 2 * this.options.readoutXMargin
      }
    });
    const numberDisplayTandem = tandem.createTandem('numberDisplay');
    const numberDisplay = new NumberDisplay(valueProperty, range, merge(valueLabelOptions, {
      tandem: numberDisplayTandem,
      valuePattern: valuePattern
    }));
    const editValue = () => {
      this.keypadLayer.beginEdit(valueProperty, range, unitsString, {
        onBeginEdit: () => {
          numberDisplay.backgroundFill = PhetColorScheme.BUTTON_YELLOW;
        },
        onEndEdit: () => {
          numberDisplay.backgroundFill = 'white';
        }
      });
    };
    const editEnabledProperty = new BooleanProperty(true, {
      tandem: tandem.createTandem('editEnabledProperty')
    });

    // edit button
    const pencilIcon = new Path(editSolidShape, {
      scale: 0.025,
      fill: Color.BLACK
    });
    const editButton = new RectangularPushButton({
      minWidth: 25,
      minHeight: 20,
      centerY: numberDisplay.centerY,
      left: numberDisplay.right + this.options.xMargin,
      content: pencilIcon,
      baseColor: PhetColorScheme.BUTTON_YELLOW,
      listener: editValue,
      enabledProperty: editEnabledProperty,
      // phet-io
      tandem: tandem.createTandem('editButton'),
      phetioDocumentation: 'the button to open the keypad to adjust the value'
    });
    numberDisplay.addInputListener(new FireListener({
      // no removeInputListener required
      fire: editValue,
      fireOnDown: true,
      useInputListenerCursor: true,
      enabledProperty: editEnabledProperty,
      // phet-io
      tandem: numberDisplayTandem.createTandem('fireListener'),
      phetioDocumentation: 'When fired, calls listener to open UI to edit the value for this NumberDisplay'
    }));
    const valueNode = new Node({
      children: [numberDisplay, editButton]
    });
    parameterLabel.setMaxWidth(this.options.minWidth - 4 * this.options.xMargin - valueNode.width);

    // size the components to be left/right justified, respectively, with space in the middle.
    const spacer = new HStrut(this.options.minWidth - 2 * this.options.xMargin);
    const group = new AlignGroup({
      matchHorizontal: false
    });
    const labelBox = new AlignBox(parameterLabel, {
      group: group
    });
    labelBox.left = spacer.left;
    const valueBox = new AlignBox(valueNode, {
      group: group
    });
    valueBox.right = spacer.right;
    return new Node({
      children: [spacer, labelBox, valueBox],
      tandem: tandem
    });
  }
}
projectileMotion.register('CustomProjectileObjectTypeControl', CustomProjectileObjectTypeControl);
export default CustomProjectileObjectTypeControl;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb29sZWFuUHJvcGVydHkiLCJtZXJnZSIsIlN0cmluZ1V0aWxzIiwiTnVtYmVyRGlzcGxheSIsIlBoZXRDb2xvclNjaGVtZSIsIkFsaWduQm94IiwiQWxpZ25Hcm91cCIsIkNvbG9yIiwiRmlyZUxpc3RlbmVyIiwiSFN0cnV0IiwiTm9kZSIsIlBhdGgiLCJUZXh0IiwiZWRpdFNvbGlkU2hhcGUiLCJSZWN0YW5ndWxhclB1c2hCdXR0b24iLCJQcm9qZWN0aWxlTW90aW9uQ29uc3RhbnRzIiwicHJvamVjdGlsZU1vdGlvbiIsIlByb2plY3RpbGVNb3Rpb25TdHJpbmdzIiwiUHJvamVjdGlsZU9iamVjdFR5cGVDb250cm9sIiwiYWx0aXR1ZGVTdHJpbmciLCJhbHRpdHVkZSIsImRpYW1ldGVyU3RyaW5nIiwiZGlhbWV0ZXIiLCJkcmFnQ29lZmZpY2llbnRTdHJpbmciLCJkcmFnQ29lZmZpY2llbnQiLCJncmF2aXR5U3RyaW5nIiwiZ3Jhdml0eSIsImtnU3RyaW5nIiwia2ciLCJtYXNzU3RyaW5nIiwibWFzcyIsIm1ldGVyc1BlclNlY29uZFNxdWFyZWRTdHJpbmciLCJtZXRlcnNQZXJTZWNvbmRTcXVhcmVkIiwibVN0cmluZyIsIm0iLCJwYXR0ZXJuMFZhbHVlMVVuaXRzU3RyaW5nIiwicGF0dGVybjBWYWx1ZTFVbml0cyIsInBhdHRlcm4wVmFsdWUxVW5pdHNXaXRoU3BhY2VTdHJpbmciLCJwYXR0ZXJuMFZhbHVlMVVuaXRzV2l0aFNwYWNlIiwiTEFCRUxfT1BUSU9OUyIsIlBBTkVMX0xBQkVMX09QVElPTlMiLCJOVU1CRVJfRElTUExBWV9PUFRJT05TIiwiQ3VzdG9tUHJvamVjdGlsZU9iamVjdFR5cGVDb250cm9sIiwiY29uc3RydWN0b3IiLCJtb2RlbCIsImtleXBhZExheWVyIiwib2JqZWN0VHlwZSIsInRhbmRlbSIsIm9wdGlvbnMiLCJ4TWFyZ2luIiwibWluV2lkdGgiLCJyZWFkb3V0WE1hcmdpbiIsInRleHREaXNwbGF5V2lkdGgiLCJtYXNzQ29udHJvbCIsImNyZWF0ZUN1c3RvbUNvbnRyb2wiLCJwcm9qZWN0aWxlTWFzc1Byb3BlcnR5IiwibWFzc1JhbmdlIiwiY3JlYXRlVGFuZGVtIiwiZGlhbWV0ZXJDb250cm9sIiwicHJvamVjdGlsZURpYW1ldGVyUHJvcGVydHkiLCJkaWFtZXRlclJhbmdlIiwiZ3Jhdml0eUNvbnRyb2wiLCJncmF2aXR5UHJvcGVydHkiLCJHUkFWSVRZX1JBTkdFIiwiYWx0aXR1ZGVDb250cm9sIiwiYWx0aXR1ZGVQcm9wZXJ0eSIsIkFMVElUVURFX1JBTkdFIiwiZHJhZ0NvZWZmaWNpZW50Q29udHJvbCIsInByb2plY3RpbGVEcmFnQ29lZmZpY2llbnRQcm9wZXJ0eSIsImRyYWdDb2VmZmljaWVudFJhbmdlIiwibGFiZWxTdHJpbmciLCJ1bml0c1N0cmluZyIsInZhbHVlUHJvcGVydHkiLCJyYW5nZSIsInBhcmFtZXRlckxhYmVsIiwidmFsdWVQYXR0ZXJuIiwiZmlsbEluIiwidW5pdHMiLCJ2YWx1ZUxhYmVsT3B0aW9ucyIsImJhY2tncm91bmRTdHJva2UiLCJkZWNpbWFsUGxhY2VzIiwiY29ybmVyUmFkaXVzIiwibWluQmFja2dyb3VuZFdpZHRoIiwidGV4dE9wdGlvbnMiLCJtYXhXaWR0aCIsIm51bWJlckRpc3BsYXlUYW5kZW0iLCJudW1iZXJEaXNwbGF5IiwiZWRpdFZhbHVlIiwiYmVnaW5FZGl0Iiwib25CZWdpbkVkaXQiLCJiYWNrZ3JvdW5kRmlsbCIsIkJVVFRPTl9ZRUxMT1ciLCJvbkVuZEVkaXQiLCJlZGl0RW5hYmxlZFByb3BlcnR5IiwicGVuY2lsSWNvbiIsInNjYWxlIiwiZmlsbCIsIkJMQUNLIiwiZWRpdEJ1dHRvbiIsIm1pbkhlaWdodCIsImNlbnRlclkiLCJsZWZ0IiwicmlnaHQiLCJjb250ZW50IiwiYmFzZUNvbG9yIiwibGlzdGVuZXIiLCJlbmFibGVkUHJvcGVydHkiLCJwaGV0aW9Eb2N1bWVudGF0aW9uIiwiYWRkSW5wdXRMaXN0ZW5lciIsImZpcmUiLCJmaXJlT25Eb3duIiwidXNlSW5wdXRMaXN0ZW5lckN1cnNvciIsInZhbHVlTm9kZSIsImNoaWxkcmVuIiwic2V0TWF4V2lkdGgiLCJ3aWR0aCIsInNwYWNlciIsImdyb3VwIiwibWF0Y2hIb3Jpem9udGFsIiwibGFiZWxCb3giLCJ2YWx1ZUJveCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiQ3VzdG9tUHJvamVjdGlsZU9iamVjdFR5cGVDb250cm9sLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE5LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFRoZSBjb250cm9scyBmb3IgdGhlIFwiY3VzdG9tXCIgcHJvamVjdGlsZSB0eXBlLiBUaGlzIGlzIGEgc3BlY2lhbCB0eXBlIGJlY2F1c2UsIHVubGlrZSB0aGUgb3RoZXJzLCBmb3IgdGhpcyB0eXBlIHRoZVxyXG4gKiBwcm9qZWN0aWxlIHBhbmVsIGlzIHBvcHVsYXRlZCB3aXRoIGNvbnRyb2xzIHRvIGFkanVzdCB2YWx1ZXMgdmlhIGEgS2V5cGFkIChpbnN0ZWFkIG9mIGp1c3QgTnVtYmVyQ29udHJvbCkuXHJcbiAqXHJcbiAqIEBhdXRob3IgTWljaGFlbCBLYXV6bWFubiAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICovXHJcblxyXG5pbXBvcnQgQm9vbGVhblByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvQm9vbGVhblByb3BlcnR5LmpzJztcclxuaW1wb3J0IG1lcmdlIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9tZXJnZS5qcyc7XHJcbmltcG9ydCBTdHJpbmdVdGlscyBmcm9tICcuLi8uLi8uLi8uLi9waGV0Y29tbW9uL2pzL3V0aWwvU3RyaW5nVXRpbHMuanMnO1xyXG5pbXBvcnQgTnVtYmVyRGlzcGxheSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvTnVtYmVyRGlzcGxheS5qcyc7XHJcbmltcG9ydCBQaGV0Q29sb3JTY2hlbWUgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1BoZXRDb2xvclNjaGVtZS5qcyc7XHJcbmltcG9ydCB7IEFsaWduQm94LCBBbGlnbkdyb3VwLCBDb2xvciwgRmlyZUxpc3RlbmVyLCBIU3RydXQsIE5vZGUsIFBhdGgsIFRleHQgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgZWRpdFNvbGlkU2hhcGUgZnJvbSAnLi4vLi4vLi4vLi4vc2hlcnBhL2pzL2ZvbnRhd2Vzb21lLTUvZWRpdFNvbGlkU2hhcGUuanMnO1xyXG5pbXBvcnQgUmVjdGFuZ3VsYXJQdXNoQnV0dG9uIGZyb20gJy4uLy4uLy4uLy4uL3N1bi9qcy9idXR0b25zL1JlY3Rhbmd1bGFyUHVzaEJ1dHRvbi5qcyc7XHJcbmltcG9ydCBQcm9qZWN0aWxlTW90aW9uQ29uc3RhbnRzIGZyb20gJy4uLy4uL2NvbW1vbi9Qcm9qZWN0aWxlTW90aW9uQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IHByb2plY3RpbGVNb3Rpb24gZnJvbSAnLi4vLi4vcHJvamVjdGlsZU1vdGlvbi5qcyc7XHJcbmltcG9ydCBQcm9qZWN0aWxlTW90aW9uU3RyaW5ncyBmcm9tICcuLi8uLi9Qcm9qZWN0aWxlTW90aW9uU3RyaW5ncy5qcyc7XHJcbmltcG9ydCBQcm9qZWN0aWxlT2JqZWN0VHlwZUNvbnRyb2wgZnJvbSAnLi9Qcm9qZWN0aWxlT2JqZWN0VHlwZUNvbnRyb2wuanMnO1xyXG5cclxuY29uc3QgYWx0aXR1ZGVTdHJpbmcgPSBQcm9qZWN0aWxlTW90aW9uU3RyaW5ncy5hbHRpdHVkZTtcclxuY29uc3QgZGlhbWV0ZXJTdHJpbmcgPSBQcm9qZWN0aWxlTW90aW9uU3RyaW5ncy5kaWFtZXRlcjtcclxuY29uc3QgZHJhZ0NvZWZmaWNpZW50U3RyaW5nID0gUHJvamVjdGlsZU1vdGlvblN0cmluZ3MuZHJhZ0NvZWZmaWNpZW50O1xyXG5jb25zdCBncmF2aXR5U3RyaW5nID0gUHJvamVjdGlsZU1vdGlvblN0cmluZ3MuZ3Jhdml0eTtcclxuY29uc3Qga2dTdHJpbmcgPSBQcm9qZWN0aWxlTW90aW9uU3RyaW5ncy5rZztcclxuY29uc3QgbWFzc1N0cmluZyA9IFByb2plY3RpbGVNb3Rpb25TdHJpbmdzLm1hc3M7XHJcbmNvbnN0IG1ldGVyc1BlclNlY29uZFNxdWFyZWRTdHJpbmcgPSBQcm9qZWN0aWxlTW90aW9uU3RyaW5ncy5tZXRlcnNQZXJTZWNvbmRTcXVhcmVkO1xyXG5jb25zdCBtU3RyaW5nID0gUHJvamVjdGlsZU1vdGlvblN0cmluZ3MubTtcclxuY29uc3QgcGF0dGVybjBWYWx1ZTFVbml0c1N0cmluZyA9IFByb2plY3RpbGVNb3Rpb25TdHJpbmdzLnBhdHRlcm4wVmFsdWUxVW5pdHM7XHJcbmNvbnN0IHBhdHRlcm4wVmFsdWUxVW5pdHNXaXRoU3BhY2VTdHJpbmcgPSBQcm9qZWN0aWxlTW90aW9uU3RyaW5ncy5wYXR0ZXJuMFZhbHVlMVVuaXRzV2l0aFNwYWNlO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IExBQkVMX09QVElPTlMgPSBQcm9qZWN0aWxlTW90aW9uQ29uc3RhbnRzLlBBTkVMX0xBQkVMX09QVElPTlM7XHJcbmNvbnN0IE5VTUJFUl9ESVNQTEFZX09QVElPTlMgPSBQcm9qZWN0aWxlTW90aW9uQ29uc3RhbnRzLk5VTUJFUl9ESVNQTEFZX09QVElPTlM7XHJcblxyXG5jbGFzcyBDdXN0b21Qcm9qZWN0aWxlT2JqZWN0VHlwZUNvbnRyb2wgZXh0ZW5kcyBQcm9qZWN0aWxlT2JqZWN0VHlwZUNvbnRyb2wge1xyXG5cclxuICAvKipcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqIEBwYXJhbSB7TGFiTW9kZWx9IG1vZGVsXHJcbiAgICogQHBhcmFtIHtLZXlwYWRMYXllcn0ga2V5cGFkTGF5ZXJcclxuICAgKiBAcGFyYW0ge1Byb2plY3RpbGVPYmplY3RUeXBlfSBvYmplY3RUeXBlXHJcbiAgICogQHBhcmFtIHtUYW5kZW19IHRhbmRlbVxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cclxuICAgKi9cclxuICBjb25zdHJ1Y3RvciggbW9kZWwsIGtleXBhZExheWVyLCBvYmplY3RUeXBlLCB0YW5kZW0sIG9wdGlvbnMgKSB7XHJcblxyXG4gICAgLy8gYXJiaXRyYXJ5IHZhbHVlcywgYXMgdGhlc2Ugc2hvdWxkIGJlIHByb3ZpZGVkIGJ5IHRoZSBMYWJQcm9qZWN0aWxlQ29udHJvbFBhbmVsXHJcbiAgICBvcHRpb25zID0gbWVyZ2UoIHtcclxuICAgICAgeE1hcmdpbjogNSxcclxuICAgICAgbWluV2lkdGg6IDIwMCxcclxuICAgICAgcmVhZG91dFhNYXJnaW46IDIwLFxyXG4gICAgICB0ZXh0RGlzcGxheVdpZHRoOiA1MFxyXG4gICAgfSwgb3B0aW9ucyApO1xyXG5cclxuICAgIC8vIEluc3RlYWQgb2YgcGFzc2luZyB1cCBwYXJhbWV0ZXJzIGhlcmUsIHNldCB0aGVtIGFmdGVyIHRoZSBmYWN0LiBBZnRlciBjb25zdHJ1Y3Rpb24gYWxsIG1lbWJlcnMgd2lsbCBiZSBzZXRcclxuICAgIC8vIGNvcnJlY3RseVxyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZVxyXG4gICAgdGhpcy5rZXlwYWRMYXllciA9IGtleXBhZExheWVyO1xyXG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxuXHJcbiAgICAvLyBtYXNzXHJcbiAgICB0aGlzLm1hc3NDb250cm9sID0gdGhpcy5jcmVhdGVDdXN0b21Db250cm9sKFxyXG4gICAgICBtYXNzU3RyaW5nLFxyXG4gICAgICBrZ1N0cmluZyxcclxuICAgICAgbW9kZWwucHJvamVjdGlsZU1hc3NQcm9wZXJ0eSxcclxuICAgICAgb2JqZWN0VHlwZS5tYXNzUmFuZ2UsXHJcbiAgICAgIHRhbmRlbS5jcmVhdGVUYW5kZW0oICdtYXNzQ29udHJvbCcgKVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBkaWFtZXRlclxyXG4gICAgdGhpcy5kaWFtZXRlckNvbnRyb2wgPSB0aGlzLmNyZWF0ZUN1c3RvbUNvbnRyb2woXHJcbiAgICAgIGRpYW1ldGVyU3RyaW5nLFxyXG4gICAgICBtU3RyaW5nLFxyXG4gICAgICBtb2RlbC5wcm9qZWN0aWxlRGlhbWV0ZXJQcm9wZXJ0eSxcclxuICAgICAgb2JqZWN0VHlwZS5kaWFtZXRlclJhbmdlLFxyXG4gICAgICB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnZGlhbWV0ZXJDb250cm9sJyApXHJcbiAgICApO1xyXG5cclxuICAgIC8vIGdyYXZpdHlcclxuICAgIHRoaXMuZ3Jhdml0eUNvbnRyb2wgPSB0aGlzLmNyZWF0ZUN1c3RvbUNvbnRyb2woXHJcbiAgICAgIGdyYXZpdHlTdHJpbmcsXHJcbiAgICAgIG1ldGVyc1BlclNlY29uZFNxdWFyZWRTdHJpbmcsXHJcbiAgICAgIG1vZGVsLmdyYXZpdHlQcm9wZXJ0eSxcclxuICAgICAgUHJvamVjdGlsZU1vdGlvbkNvbnN0YW50cy5HUkFWSVRZX1JBTkdFLFxyXG4gICAgICB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnZ3Jhdml0eUNvbnRyb2wnIClcclxuICAgICk7XHJcblxyXG4gICAgLy8gYWx0aXR1ZGVcclxuICAgIHRoaXMuYWx0aXR1ZGVDb250cm9sID0gdGhpcy5jcmVhdGVDdXN0b21Db250cm9sKFxyXG4gICAgICBhbHRpdHVkZVN0cmluZyxcclxuICAgICAgbVN0cmluZyxcclxuICAgICAgbW9kZWwuYWx0aXR1ZGVQcm9wZXJ0eSxcclxuICAgICAgUHJvamVjdGlsZU1vdGlvbkNvbnN0YW50cy5BTFRJVFVERV9SQU5HRSxcclxuICAgICAgdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2FsdGl0dWRlQ29udHJvbCcgKVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBkcmFnQ29lZmZpY2llbnRcclxuICAgIHRoaXMuZHJhZ0NvZWZmaWNpZW50Q29udHJvbCA9IHRoaXMuY3JlYXRlQ3VzdG9tQ29udHJvbChcclxuICAgICAgZHJhZ0NvZWZmaWNpZW50U3RyaW5nLFxyXG4gICAgICBudWxsLFxyXG4gICAgICBtb2RlbC5wcm9qZWN0aWxlRHJhZ0NvZWZmaWNpZW50UHJvcGVydHksXHJcbiAgICAgIG9iamVjdFR5cGUuZHJhZ0NvZWZmaWNpZW50UmFuZ2UsXHJcbiAgICAgIHRhbmRlbS5jcmVhdGVUYW5kZW0oICdkcmFnQ29lZmZpY2llbnRDb250cm9sJyApXHJcbiAgICApO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEF1eGlsaWFyeSBmdW5jdGlvbiB0aGF0IGNyZWF0ZXMgVkJveCBmb3IgYSBwYXJhbWV0ZXIgbGFiZWwgYW5kIHJlYWRvdXRzXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxhYmVsU3RyaW5nIC0gbGFiZWwgZm9yIHRoZSBwYXJhbWV0ZXJcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdW5pdHNTdHJpbmcgLSB1bml0c1xyXG4gICAqIEBwYXJhbSB7UHJvcGVydHkuPG51bWJlcj59IHZhbHVlUHJvcGVydHkgLSB0aGUgUHJvcGVydHkgdGhhdCBpcyBzZXQgYW5kIGxpbmtlZCB0b1xyXG4gICAqIEBwYXJhbSB7UmFuZ2V9IHJhbmdlIC0gcmFuZ2UgZm9yIHRoZSB2YWx1ZVByb3BlcnR5IHZhbHVlXHJcbiAgICogQHBhcmFtIHtUYW5kZW19IHRhbmRlbVxyXG4gICAqIEByZXR1cm5zIHtWQm94fVxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgY3JlYXRlQ3VzdG9tQ29udHJvbCggbGFiZWxTdHJpbmcsIHVuaXRzU3RyaW5nLCB2YWx1ZVByb3BlcnR5LCByYW5nZSwgdGFuZGVtICkge1xyXG5cclxuICAgIC8vIGxhYmVsXHJcbiAgICBjb25zdCBwYXJhbWV0ZXJMYWJlbCA9IG5ldyBUZXh0KCBsYWJlbFN0cmluZywgbWVyZ2UoIHsgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnbGFiZWxUZXh0JyApIH0sIExBQkVMX09QVElPTlMgKSApO1xyXG5cclxuICAgIC8vIHZhbHVlIHRleHRcclxuICAgIGNvbnN0IHZhbHVlUGF0dGVybiA9IHVuaXRzU3RyaW5nID8gU3RyaW5nVXRpbHMuZmlsbEluKCBwYXR0ZXJuMFZhbHVlMVVuaXRzV2l0aFNwYWNlU3RyaW5nLCB7XHJcbiAgICAgIHVuaXRzOiB1bml0c1N0cmluZ1xyXG4gICAgfSApIDogU3RyaW5nVXRpbHMuZmlsbEluKCBwYXR0ZXJuMFZhbHVlMVVuaXRzU3RyaW5nLCB7XHJcbiAgICAgIHVuaXRzOiAnJ1xyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IHZhbHVlTGFiZWxPcHRpb25zID0gbWVyZ2UoIHt9LCBOVU1CRVJfRElTUExBWV9PUFRJT05TLCB7XHJcbiAgICAgIGJhY2tncm91bmRTdHJva2U6ICdibGFjaycsXHJcbiAgICAgIGRlY2ltYWxQbGFjZXM6IG51bGwsXHJcbiAgICAgIGNvcm5lclJhZGl1czogNCxcclxuICAgICAgeE1hcmdpbjogNCxcclxuICAgICAgbWluQmFja2dyb3VuZFdpZHRoOiB0aGlzLm9wdGlvbnMudGV4dERpc3BsYXlXaWR0aCxcclxuICAgICAgdGV4dE9wdGlvbnM6IHtcclxuICAgICAgICBtYXhXaWR0aDogdGhpcy5vcHRpb25zLnRleHREaXNwbGF5V2lkdGggLSAyICogdGhpcy5vcHRpb25zLnJlYWRvdXRYTWFyZ2luXHJcbiAgICAgIH1cclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCBudW1iZXJEaXNwbGF5VGFuZGVtID0gdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ251bWJlckRpc3BsYXknICk7XHJcbiAgICBjb25zdCBudW1iZXJEaXNwbGF5ID0gbmV3IE51bWJlckRpc3BsYXkoXHJcbiAgICAgIHZhbHVlUHJvcGVydHksXHJcbiAgICAgIHJhbmdlLFxyXG4gICAgICBtZXJnZSggdmFsdWVMYWJlbE9wdGlvbnMsIHsgdGFuZGVtOiBudW1iZXJEaXNwbGF5VGFuZGVtLCB2YWx1ZVBhdHRlcm46IHZhbHVlUGF0dGVybiB9IClcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgZWRpdFZhbHVlID0gKCkgPT4ge1xyXG4gICAgICB0aGlzLmtleXBhZExheWVyLmJlZ2luRWRpdCggdmFsdWVQcm9wZXJ0eSwgcmFuZ2UsIHVuaXRzU3RyaW5nLCB7XHJcbiAgICAgICAgb25CZWdpbkVkaXQ6ICgpID0+IHsgbnVtYmVyRGlzcGxheS5iYWNrZ3JvdW5kRmlsbCA9IFBoZXRDb2xvclNjaGVtZS5CVVRUT05fWUVMTE9XOyB9LFxyXG4gICAgICAgIG9uRW5kRWRpdDogKCkgPT4geyBudW1iZXJEaXNwbGF5LmJhY2tncm91bmRGaWxsID0gJ3doaXRlJzsgfVxyXG4gICAgICB9ICk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGVkaXRFbmFibGVkUHJvcGVydHkgPSBuZXcgQm9vbGVhblByb3BlcnR5KCB0cnVlLCB7IHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2VkaXRFbmFibGVkUHJvcGVydHknICkgfSApO1xyXG5cclxuICAgIC8vIGVkaXQgYnV0dG9uXHJcbiAgICBjb25zdCBwZW5jaWxJY29uID0gbmV3IFBhdGgoIGVkaXRTb2xpZFNoYXBlLCB7IHNjYWxlOiAwLjAyNSwgZmlsbDogQ29sb3IuQkxBQ0sgfSApO1xyXG4gICAgY29uc3QgZWRpdEJ1dHRvbiA9IG5ldyBSZWN0YW5ndWxhclB1c2hCdXR0b24oIHtcclxuICAgICAgbWluV2lkdGg6IDI1LFxyXG4gICAgICBtaW5IZWlnaHQ6IDIwLFxyXG4gICAgICBjZW50ZXJZOiBudW1iZXJEaXNwbGF5LmNlbnRlclksXHJcbiAgICAgIGxlZnQ6IG51bWJlckRpc3BsYXkucmlnaHQgKyB0aGlzLm9wdGlvbnMueE1hcmdpbixcclxuICAgICAgY29udGVudDogcGVuY2lsSWNvbixcclxuICAgICAgYmFzZUNvbG9yOiBQaGV0Q29sb3JTY2hlbWUuQlVUVE9OX1lFTExPVyxcclxuICAgICAgbGlzdGVuZXI6IGVkaXRWYWx1ZSxcclxuICAgICAgZW5hYmxlZFByb3BlcnR5OiBlZGl0RW5hYmxlZFByb3BlcnR5LFxyXG5cclxuICAgICAgLy8gcGhldC1pb1xyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdlZGl0QnV0dG9uJyApLFxyXG4gICAgICBwaGV0aW9Eb2N1bWVudGF0aW9uOiAndGhlIGJ1dHRvbiB0byBvcGVuIHRoZSBrZXlwYWQgdG8gYWRqdXN0IHRoZSB2YWx1ZSdcclxuICAgIH0gKTtcclxuXHJcbiAgICBudW1iZXJEaXNwbGF5LmFkZElucHV0TGlzdGVuZXIoIG5ldyBGaXJlTGlzdGVuZXIoIHsgLy8gbm8gcmVtb3ZlSW5wdXRMaXN0ZW5lciByZXF1aXJlZFxyXG4gICAgICBmaXJlOiBlZGl0VmFsdWUsXHJcbiAgICAgIGZpcmVPbkRvd246IHRydWUsXHJcbiAgICAgIHVzZUlucHV0TGlzdGVuZXJDdXJzb3I6IHRydWUsXHJcbiAgICAgIGVuYWJsZWRQcm9wZXJ0eTogZWRpdEVuYWJsZWRQcm9wZXJ0eSxcclxuXHJcbiAgICAgIC8vIHBoZXQtaW9cclxuICAgICAgdGFuZGVtOiBudW1iZXJEaXNwbGF5VGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2ZpcmVMaXN0ZW5lcicgKSxcclxuICAgICAgcGhldGlvRG9jdW1lbnRhdGlvbjogJ1doZW4gZmlyZWQsIGNhbGxzIGxpc3RlbmVyIHRvIG9wZW4gVUkgdG8gZWRpdCB0aGUgdmFsdWUgZm9yIHRoaXMgTnVtYmVyRGlzcGxheSdcclxuICAgIH0gKSApO1xyXG5cclxuICAgIGNvbnN0IHZhbHVlTm9kZSA9IG5ldyBOb2RlKCB7IGNoaWxkcmVuOiBbIG51bWJlckRpc3BsYXksIGVkaXRCdXR0b24gXSB9ICk7XHJcblxyXG4gICAgcGFyYW1ldGVyTGFiZWwuc2V0TWF4V2lkdGgoIHRoaXMub3B0aW9ucy5taW5XaWR0aCAtIDQgKiB0aGlzLm9wdGlvbnMueE1hcmdpbiAtIHZhbHVlTm9kZS53aWR0aCApO1xyXG5cclxuICAgIC8vIHNpemUgdGhlIGNvbXBvbmVudHMgdG8gYmUgbGVmdC9yaWdodCBqdXN0aWZpZWQsIHJlc3BlY3RpdmVseSwgd2l0aCBzcGFjZSBpbiB0aGUgbWlkZGxlLlxyXG4gICAgY29uc3Qgc3BhY2VyID0gbmV3IEhTdHJ1dCggdGhpcy5vcHRpb25zLm1pbldpZHRoIC0gMiAqIHRoaXMub3B0aW9ucy54TWFyZ2luICk7XHJcbiAgICBjb25zdCBncm91cCA9IG5ldyBBbGlnbkdyb3VwKCB7IG1hdGNoSG9yaXpvbnRhbDogZmFsc2UgfSApO1xyXG5cclxuICAgIGNvbnN0IGxhYmVsQm94ID0gbmV3IEFsaWduQm94KCBwYXJhbWV0ZXJMYWJlbCwgeyBncm91cDogZ3JvdXAgfSApO1xyXG4gICAgbGFiZWxCb3gubGVmdCA9IHNwYWNlci5sZWZ0O1xyXG5cclxuICAgIGNvbnN0IHZhbHVlQm94ID0gbmV3IEFsaWduQm94KCB2YWx1ZU5vZGUsIHsgZ3JvdXA6IGdyb3VwIH0gKTtcclxuICAgIHZhbHVlQm94LnJpZ2h0ID0gc3BhY2VyLnJpZ2h0O1xyXG5cclxuICAgIHJldHVybiBuZXcgTm9kZSggeyBjaGlsZHJlbjogWyBzcGFjZXIsIGxhYmVsQm94LCB2YWx1ZUJveCBdLCB0YW5kZW06IHRhbmRlbSB9ICk7XHJcbiAgfVxyXG59XHJcblxyXG5wcm9qZWN0aWxlTW90aW9uLnJlZ2lzdGVyKCAnQ3VzdG9tUHJvamVjdGlsZU9iamVjdFR5cGVDb250cm9sJywgQ3VzdG9tUHJvamVjdGlsZU9iamVjdFR5cGVDb250cm9sICk7XHJcbmV4cG9ydCBkZWZhdWx0IEN1c3RvbVByb2plY3RpbGVPYmplY3RUeXBlQ29udHJvbDsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxlQUFlLE1BQU0sd0NBQXdDO0FBQ3BFLE9BQU9DLEtBQUssTUFBTSxtQ0FBbUM7QUFDckQsT0FBT0MsV0FBVyxNQUFNLCtDQUErQztBQUN2RSxPQUFPQyxhQUFhLE1BQU0sOENBQThDO0FBQ3hFLE9BQU9DLGVBQWUsTUFBTSxnREFBZ0Q7QUFDNUUsU0FBU0MsUUFBUSxFQUFFQyxVQUFVLEVBQUVDLEtBQUssRUFBRUMsWUFBWSxFQUFFQyxNQUFNLEVBQUVDLElBQUksRUFBRUMsSUFBSSxFQUFFQyxJQUFJLFFBQVEsbUNBQW1DO0FBQ3ZILE9BQU9DLGNBQWMsTUFBTSx1REFBdUQ7QUFDbEYs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