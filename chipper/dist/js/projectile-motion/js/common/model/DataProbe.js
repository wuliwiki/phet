// Copyright 2016-2023, University of Colorado Boulder

/**
 * Model for the dataProbe tool.
 * Knows about trajectories, which contain arrays of points on their paths
 *
 * @author Andrea Lin (PhET Interactive Simulations)
 */

import BooleanProperty from '../../../../axon/js/BooleanProperty.js';
import Property from '../../../../axon/js/Property.js';
import Utils from '../../../../dot/js/Utils.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import Vector2Property from '../../../../dot/js/Vector2Property.js';
import NullableIO from '../../../../tandem/js/types/NullableIO.js';
import projectileMotion from '../../projectileMotion.js';
import ProjectileMotionConstants from '../ProjectileMotionConstants.js';
import DataPoint from './DataPoint.js';
// constants
const SENSING_RADIUS = 0.2; // meters, will change to view units. How close the dataProbe needs to get to a datapoint
const TIME_PER_MINOR_DOT = ProjectileMotionConstants.TIME_PER_MINOR_DOT;
class DataProbe {
  // used to adjust the tolerance of the sensing radius when detecting data points on trajectories.

  /**
   * @param trajectoryGroup
   * @param dataProbeX - x initial position of the dataProbe
   * @param dataProbeY - y initial position of the dataProbe
   * @param zoomProperty - current zoom of the play area
   * @param tandem
   */
  constructor(trajectoryGroup, dataProbeX, dataProbeY, zoomProperty, tandem) {
    this.positionProperty = new Vector2Property(new Vector2(dataProbeX, dataProbeY), {
      tandem: tandem.createTandem('positionProperty'),
      units: 'm',
      phetioDocumentation: 'The position of the dataProbe in model coordinates, in meters.'
    });
    this.dataPointProperty = new Property(null, {
      tandem: tandem.createTandem('dataPointProperty'),
      phetioDocumentation: 'Data point that the dataProbe is displaying information about, or null if no info displayed. ' + 'See DataPointIO for more information about the data point value.',
      phetioValueType: NullableIO(DataPoint.DataPointIO)
    });
    this.isActiveProperty = new BooleanProperty(false, {
      tandem: tandem.createTandem('isActiveProperty'),
      phetioDocumentation: 'Whether the dataProbe is out in the play area (false when in toolbox)'
    });
    this.zoomProperty = zoomProperty;
    this.trajectoryGroup = trajectoryGroup;
    this.trajectoryGroup.elementDisposedEmitter.addListener(() => {
      this.isActiveProperty.value && this.updateData();
    });
  }

  /**
   * Reset these Properties
   */
  reset() {
    this.positionProperty.reset();
    this.dataPointProperty.reset();
    this.isActiveProperty.reset();
  }

  /**
   * if the position provided is close enough to the dataProbe position to be sensed.
   */
  pointWithinTolerance(dataPointPosition) {
    return dataPointPosition.distance(this.positionProperty.get()) <= SENSING_RADIUS / this.zoomProperty.value;
  }

  /**
   * Checks for if there is a point the dataProbe is close to. If so, updates dataPointProperty
   */
  updateData() {
    for (let i = this.trajectoryGroup.count - 1; i >= 0; i--) {
      const currentTrajectory = this.trajectoryGroup.getElement(i);

      // current point shown is apex and it is still within sensing radius
      if (currentTrajectory.apexPoint && this.pointWithinTolerance(currentTrajectory.apexPoint.position)) {
        this.dataPointProperty.set(currentTrajectory.apexPoint);
        return;
      }
      const point = currentTrajectory.getNearestPoint(this.positionProperty.get().x, this.positionProperty.get().y);
      const pointIsReadable = point && (point.apex || point.position.y === 0 || Utils.toFixedNumber(point.time * 1000, 0) % TIME_PER_MINOR_DOT === 0);
      if (pointIsReadable && this.pointWithinTolerance(point.position)) {
        this.dataPointProperty.set(point);
        return;
      }
    }
    this.dataPointProperty.set(null);
  }

  /**
   * Checks if the given point is close enough to the dataProbe and updates information if so
   */
  updateDataIfWithinRange(point) {
    // point can be read by dataProbe if it exists, it is on the ground, or it is the right timestep
    const pointIsReadable = point && (point.apex || point.position.y === 0 || Utils.toFixedNumber(point.time * 1000, 0) % TIME_PER_MINOR_DOT === 0);
    if (pointIsReadable && this.pointWithinTolerance(point.position)) {
      this.dataPointProperty.set(point);
    }
  }
}
projectileMotion.register('DataProbe', DataProbe);
export default DataProbe;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb29sZWFuUHJvcGVydHkiLCJQcm9wZXJ0eSIsIlV0aWxzIiwiVmVjdG9yMiIsIlZlY3RvcjJQcm9wZXJ0eSIsIk51bGxhYmxlSU8iLCJwcm9qZWN0aWxlTW90aW9uIiwiUHJvamVjdGlsZU1vdGlvbkNvbnN0YW50cyIsIkRhdGFQb2ludCIsIlNFTlNJTkdfUkFESVVTIiwiVElNRV9QRVJfTUlOT1JfRE9UIiwiRGF0YVByb2JlIiwiY29uc3RydWN0b3IiLCJ0cmFqZWN0b3J5R3JvdXAiLCJkYXRhUHJvYmVYIiwiZGF0YVByb2JlWSIsInpvb21Qcm9wZXJ0eSIsInRhbmRlbSIsInBvc2l0aW9uUHJvcGVydHkiLCJjcmVhdGVUYW5kZW0iLCJ1bml0cyIsInBoZXRpb0RvY3VtZW50YXRpb24iLCJkYXRhUG9pbnRQcm9wZXJ0eSIsInBoZXRpb1ZhbHVlVHlwZSIsIkRhdGFQb2ludElPIiwiaXNBY3RpdmVQcm9wZXJ0eSIsImVsZW1lbnREaXNwb3NlZEVtaXR0ZXIiLCJhZGRMaXN0ZW5lciIsInZhbHVlIiwidXBkYXRlRGF0YSIsInJlc2V0IiwicG9pbnRXaXRoaW5Ub2xlcmFuY2UiLCJkYXRhUG9pbnRQb3NpdGlvbiIsImRpc3RhbmNlIiwiZ2V0IiwiaSIsImNvdW50IiwiY3VycmVudFRyYWplY3RvcnkiLCJnZXRFbGVtZW50IiwiYXBleFBvaW50IiwicG9zaXRpb24iLCJzZXQiLCJwb2ludCIsImdldE5lYXJlc3RQb2ludCIsIngiLCJ5IiwicG9pbnRJc1JlYWRhYmxlIiwiYXBleCIsInRvRml4ZWROdW1iZXIiLCJ0aW1lIiwidXBkYXRlRGF0YUlmV2l0aGluUmFuZ2UiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkRhdGFQcm9iZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNi0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBNb2RlbCBmb3IgdGhlIGRhdGFQcm9iZSB0b29sLlxyXG4gKiBLbm93cyBhYm91dCB0cmFqZWN0b3JpZXMsIHdoaWNoIGNvbnRhaW4gYXJyYXlzIG9mIHBvaW50cyBvbiB0aGVpciBwYXRoc1xyXG4gKlxyXG4gKiBAYXV0aG9yIEFuZHJlYSBMaW4gKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IEJvb2xlYW5Qcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL0Jvb2xlYW5Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1Byb3BlcnR5LmpzJztcclxuaW1wb3J0IFRSZWFkT25seVByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvVFJlYWRPbmx5UHJvcGVydHkuanMnO1xyXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1V0aWxzLmpzJztcclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgVmVjdG9yMlByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9WZWN0b3IyUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgUGhldGlvR3JvdXAgZnJvbSAnLi4vLi4vLi4vLi4vdGFuZGVtL2pzL1BoZXRpb0dyb3VwLmpzJztcclxuaW1wb3J0IFRhbmRlbSBmcm9tICcuLi8uLi8uLi8uLi90YW5kZW0vanMvVGFuZGVtLmpzJztcclxuaW1wb3J0IE51bGxhYmxlSU8gZnJvbSAnLi4vLi4vLi4vLi4vdGFuZGVtL2pzL3R5cGVzL051bGxhYmxlSU8uanMnO1xyXG5pbXBvcnQgcHJvamVjdGlsZU1vdGlvbiBmcm9tICcuLi8uLi9wcm9qZWN0aWxlTW90aW9uLmpzJztcclxuaW1wb3J0IFByb2plY3RpbGVNb3Rpb25Db25zdGFudHMgZnJvbSAnLi4vUHJvamVjdGlsZU1vdGlvbkNvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBEYXRhUG9pbnQgZnJvbSAnLi9EYXRhUG9pbnQuanMnO1xyXG5pbXBvcnQgVHJhamVjdG9yeSwgeyBUcmFqZWN0b3J5R3JvdXBDcmVhdGVFbGVtZW50QXJndW1lbnRzIH0gZnJvbSAnLi9UcmFqZWN0b3J5LmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBTRU5TSU5HX1JBRElVUyA9IDAuMjsgLy8gbWV0ZXJzLCB3aWxsIGNoYW5nZSB0byB2aWV3IHVuaXRzLiBIb3cgY2xvc2UgdGhlIGRhdGFQcm9iZSBuZWVkcyB0byBnZXQgdG8gYSBkYXRhcG9pbnRcclxuY29uc3QgVElNRV9QRVJfTUlOT1JfRE9UID0gUHJvamVjdGlsZU1vdGlvbkNvbnN0YW50cy5USU1FX1BFUl9NSU5PUl9ET1Q7XHJcblxyXG5jbGFzcyBEYXRhUHJvYmUge1xyXG4gIHB1YmxpYyByZWFkb25seSBwb3NpdGlvblByb3BlcnR5OiBQcm9wZXJ0eTxWZWN0b3IyPjtcclxuICBwdWJsaWMgcmVhZG9ubHkgaXNBY3RpdmVQcm9wZXJ0eTogUHJvcGVydHk8Ym9vbGVhbj47XHJcbiAgcHVibGljIHJlYWRvbmx5IGRhdGFQb2ludFByb3BlcnR5OiBQcm9wZXJ0eTxudWxsIHwgRGF0YVBvaW50PjtcclxuICBwcml2YXRlIHJlYWRvbmx5IHRyYWplY3RvcnlHcm91cDogUGhldGlvR3JvdXA8VHJhamVjdG9yeSwgVHJhamVjdG9yeUdyb3VwQ3JlYXRlRWxlbWVudEFyZ3VtZW50cz47XHJcblxyXG4gIC8vIHVzZWQgdG8gYWRqdXN0IHRoZSB0b2xlcmFuY2Ugb2YgdGhlIHNlbnNpbmcgcmFkaXVzIHdoZW4gZGV0ZWN0aW5nIGRhdGEgcG9pbnRzIG9uIHRyYWplY3Rvcmllcy5cclxuICBwcml2YXRlIHJlYWRvbmx5IHpvb21Qcm9wZXJ0eTogVFJlYWRPbmx5UHJvcGVydHk8bnVtYmVyPjtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHRyYWplY3RvcnlHcm91cFxyXG4gICAqIEBwYXJhbSBkYXRhUHJvYmVYIC0geCBpbml0aWFsIHBvc2l0aW9uIG9mIHRoZSBkYXRhUHJvYmVcclxuICAgKiBAcGFyYW0gZGF0YVByb2JlWSAtIHkgaW5pdGlhbCBwb3NpdGlvbiBvZiB0aGUgZGF0YVByb2JlXHJcbiAgICogQHBhcmFtIHpvb21Qcm9wZXJ0eSAtIGN1cnJlbnQgem9vbSBvZiB0aGUgcGxheSBhcmVhXHJcbiAgICogQHBhcmFtIHRhbmRlbVxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggdHJhamVjdG9yeUdyb3VwOiBQaGV0aW9Hcm91cDxUcmFqZWN0b3J5LCBUcmFqZWN0b3J5R3JvdXBDcmVhdGVFbGVtZW50QXJndW1lbnRzPiwgZGF0YVByb2JlWDogbnVtYmVyLCBkYXRhUHJvYmVZOiBudW1iZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICB6b29tUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PG51bWJlcj4sIHRhbmRlbTogVGFuZGVtICkge1xyXG5cclxuICAgIHRoaXMucG9zaXRpb25Qcm9wZXJ0eSA9IG5ldyBWZWN0b3IyUHJvcGVydHkoIG5ldyBWZWN0b3IyKCBkYXRhUHJvYmVYLCBkYXRhUHJvYmVZICksIHtcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAncG9zaXRpb25Qcm9wZXJ0eScgKSxcclxuICAgICAgdW5pdHM6ICdtJyxcclxuICAgICAgcGhldGlvRG9jdW1lbnRhdGlvbjogJ1RoZSBwb3NpdGlvbiBvZiB0aGUgZGF0YVByb2JlIGluIG1vZGVsIGNvb3JkaW5hdGVzLCBpbiBtZXRlcnMuJ1xyXG4gICAgfSApO1xyXG5cclxuICAgIHRoaXMuZGF0YVBvaW50UHJvcGVydHkgPSBuZXcgUHJvcGVydHk8bnVsbCB8IERhdGFQb2ludD4oIG51bGwsIHtcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnZGF0YVBvaW50UHJvcGVydHknICksXHJcbiAgICAgIHBoZXRpb0RvY3VtZW50YXRpb246ICdEYXRhIHBvaW50IHRoYXQgdGhlIGRhdGFQcm9iZSBpcyBkaXNwbGF5aW5nIGluZm9ybWF0aW9uIGFib3V0LCBvciBudWxsIGlmIG5vIGluZm8gZGlzcGxheWVkLiAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1NlZSBEYXRhUG9pbnRJTyBmb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZGF0YSBwb2ludCB2YWx1ZS4nLFxyXG4gICAgICBwaGV0aW9WYWx1ZVR5cGU6IE51bGxhYmxlSU8oIERhdGFQb2ludC5EYXRhUG9pbnRJTyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5pc0FjdGl2ZVByb3BlcnR5ID0gbmV3IEJvb2xlYW5Qcm9wZXJ0eSggZmFsc2UsIHtcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnaXNBY3RpdmVQcm9wZXJ0eScgKSxcclxuICAgICAgcGhldGlvRG9jdW1lbnRhdGlvbjogJ1doZXRoZXIgdGhlIGRhdGFQcm9iZSBpcyBvdXQgaW4gdGhlIHBsYXkgYXJlYSAoZmFsc2Ugd2hlbiBpbiB0b29sYm94KSdcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLnpvb21Qcm9wZXJ0eSA9IHpvb21Qcm9wZXJ0eTtcclxuICAgIHRoaXMudHJhamVjdG9yeUdyb3VwID0gdHJhamVjdG9yeUdyb3VwO1xyXG5cclxuICAgIHRoaXMudHJhamVjdG9yeUdyb3VwLmVsZW1lbnREaXNwb3NlZEVtaXR0ZXIuYWRkTGlzdGVuZXIoICgpID0+IHtcclxuICAgICAgdGhpcy5pc0FjdGl2ZVByb3BlcnR5LnZhbHVlICYmIHRoaXMudXBkYXRlRGF0YSgpO1xyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVzZXQgdGhlc2UgUHJvcGVydGllc1xyXG4gICAqL1xyXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcclxuICAgIHRoaXMucG9zaXRpb25Qcm9wZXJ0eS5yZXNldCgpO1xyXG4gICAgdGhpcy5kYXRhUG9pbnRQcm9wZXJ0eS5yZXNldCgpO1xyXG4gICAgdGhpcy5pc0FjdGl2ZVByb3BlcnR5LnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBpZiB0aGUgcG9zaXRpb24gcHJvdmlkZWQgaXMgY2xvc2UgZW5vdWdoIHRvIHRoZSBkYXRhUHJvYmUgcG9zaXRpb24gdG8gYmUgc2Vuc2VkLlxyXG4gICAqL1xyXG4gIHByaXZhdGUgcG9pbnRXaXRoaW5Ub2xlcmFuY2UoIGRhdGFQb2ludFBvc2l0aW9uOiBWZWN0b3IyICk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIGRhdGFQb2ludFBvc2l0aW9uLmRpc3RhbmNlKCB0aGlzLnBvc2l0aW9uUHJvcGVydHkuZ2V0KCkgKSA8PSBTRU5TSU5HX1JBRElVUyAvIHRoaXMuem9vbVByb3BlcnR5LnZhbHVlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2tzIGZvciBpZiB0aGVyZSBpcyBhIHBvaW50IHRoZSBkYXRhUHJvYmUgaXMgY2xvc2UgdG8uIElmIHNvLCB1cGRhdGVzIGRhdGFQb2ludFByb3BlcnR5XHJcbiAgICovXHJcbiAgcHVibGljIHVwZGF0ZURhdGEoKTogdm9pZCB7XHJcbiAgICBmb3IgKCBsZXQgaSA9IHRoaXMudHJhamVjdG9yeUdyb3VwLmNvdW50IC0gMTsgaSA+PSAwOyBpLS0gKSB7XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRUcmFqZWN0b3J5ID0gdGhpcy50cmFqZWN0b3J5R3JvdXAuZ2V0RWxlbWVudCggaSApO1xyXG5cclxuICAgICAgLy8gY3VycmVudCBwb2ludCBzaG93biBpcyBhcGV4IGFuZCBpdCBpcyBzdGlsbCB3aXRoaW4gc2Vuc2luZyByYWRpdXNcclxuICAgICAgaWYgKCBjdXJyZW50VHJhamVjdG9yeS5hcGV4UG9pbnQgJiYgdGhpcy5wb2ludFdpdGhpblRvbGVyYW5jZSggY3VycmVudFRyYWplY3RvcnkuYXBleFBvaW50LnBvc2l0aW9uICkgKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhUG9pbnRQcm9wZXJ0eS5zZXQoIGN1cnJlbnRUcmFqZWN0b3J5LmFwZXhQb2ludCApO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBwb2ludCA9IGN1cnJlbnRUcmFqZWN0b3J5LmdldE5lYXJlc3RQb2ludCggdGhpcy5wb3NpdGlvblByb3BlcnR5LmdldCgpLngsIHRoaXMucG9zaXRpb25Qcm9wZXJ0eS5nZXQoKS55ICk7XHJcbiAgICAgIGNvbnN0IHBvaW50SXNSZWFkYWJsZSA9IHBvaW50ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICggcG9pbnQuYXBleCB8fCBwb2ludC5wb3NpdGlvbi55ID09PSAwIHx8IFV0aWxzLnRvRml4ZWROdW1iZXIoIHBvaW50LnRpbWUgKiAxMDAwLCAwICkgJSBUSU1FX1BFUl9NSU5PUl9ET1QgPT09IDAgKTtcclxuICAgICAgaWYgKCBwb2ludElzUmVhZGFibGUgJiYgdGhpcy5wb2ludFdpdGhpblRvbGVyYW5jZSggcG9pbnQucG9zaXRpb24gKSApIHtcclxuICAgICAgICB0aGlzLmRhdGFQb2ludFByb3BlcnR5LnNldCggcG9pbnQgKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuZGF0YVBvaW50UHJvcGVydHkuc2V0KCBudWxsICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDaGVja3MgaWYgdGhlIGdpdmVuIHBvaW50IGlzIGNsb3NlIGVub3VnaCB0byB0aGUgZGF0YVByb2JlIGFuZCB1cGRhdGVzIGluZm9ybWF0aW9uIGlmIHNvXHJcbiAgICovXHJcbiAgcHVibGljIHVwZGF0ZURhdGFJZldpdGhpblJhbmdlKCBwb2ludDogRGF0YVBvaW50ICk6IHZvaWQge1xyXG4gICAgLy8gcG9pbnQgY2FuIGJlIHJlYWQgYnkgZGF0YVByb2JlIGlmIGl0IGV4aXN0cywgaXQgaXMgb24gdGhlIGdyb3VuZCwgb3IgaXQgaXMgdGhlIHJpZ2h0IHRpbWVzdGVwXHJcbiAgICBjb25zdCBwb2ludElzUmVhZGFibGUgPSBwb2ludCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKCBwb2ludC5hcGV4IHx8IHBvaW50LnBvc2l0aW9uLnkgPT09IDAgfHwgVXRpbHMudG9GaXhlZE51bWJlciggcG9pbnQudGltZSAqIDEwMDAsIDAgKSAlIFRJTUVfUEVSX01JTk9SX0RPVCA9PT0gMCApO1xyXG4gICAgaWYgKCBwb2ludElzUmVhZGFibGUgJiYgdGhpcy5wb2ludFdpdGhpblRvbGVyYW5jZSggcG9pbnQucG9zaXRpb24gKSApIHtcclxuICAgICAgdGhpcy5kYXRhUG9pbnRQcm9wZXJ0eS5zZXQoIHBvaW50ICk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5wcm9qZWN0aWxlTW90aW9uLnJlZ2lzdGVyKCAnRGF0YVByb2JlJywgRGF0YVByb2JlICk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBEYXRhUHJvYmU7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGVBQWUsTUFBTSx3Q0FBd0M7QUFDcEUsT0FBT0MsUUFBUSxNQUFNLGlDQUFpQztBQUV0RCxPQUFPQyxLQUFLLE1BQU0sNkJBQTZCO0FBQy9DLE9BQU9DLE9BQU8sTUFBTSwrQkFBK0I7QUFDbkQsT0FBT0MsZUFBZSxNQUFNLHVDQUF1QztBQUduRSxPQUFPQyxVQUFVLE1BQU0sMkNBQTJDO0FBQ2xFLE9BQU9DLGdCQUFnQixNQUFNLDJCQUEyQjtBQUN4RCxPQUFPQyx5QkFBeUIsTUFBTSxpQ0FBaUM7QUFDdkUsT0FBT0MsU0FBUyxNQUFNLGdCQUFnQjtBQUd0QztBQUNBLE1BQU1DLGNBQWMsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUM1QixNQUFNQyxrQkFBa0IsR0FBR0gseUJBQXlCLENBQUNHLGtCQUFrQjtBQUV2RSxNQUFNQyxTQUFTLENBQUM7RUFNZDs7RUFHQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNTQyxXQUFXQSxDQUFFQyxlQUErRSxFQUFFQyxVQUFrQixFQUFFQyxVQUFrQixFQUN2SEMsWUFBdUMsRUFBRUMsTUFBYyxFQUFHO0lBRTVF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