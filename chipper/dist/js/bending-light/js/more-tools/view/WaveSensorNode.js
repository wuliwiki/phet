// Copyright 2015-2023, University of Colorado Boulder

/**
 * View for the wave sensor, which shows 2 sensor probes and a chart area (the body)
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Chandrashekar Bemagoni (Actual Concepts)
 */

import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import Bounds2 from '../../../../dot/js/Bounds2.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import Vector2Property from '../../../../dot/js/Vector2Property.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import ProbeNode from '../../../../scenery-phet/js/ProbeNode.js';
import ShadedRectangle from '../../../../scenery-phet/js/ShadedRectangle.js';
import WireNode from '../../../../scenery-phet/js/WireNode.js';
import { Color, LinearGradient, Node, Rectangle, Text } from '../../../../scenery/js/imports.js';
import BendingLightStrings from '../../BendingLightStrings.js';
import bendingLight from '../../bendingLight.js';
import Series from '../model/Series.js';
import ChartNode from './ChartNode.js';
const timeString = BendingLightStrings.time;

// constants
const NORMAL_DISTANCE = 25;
const bodyNormalProperty = new Vector2Property(new Vector2(NORMAL_DISTANCE, 0));
const sensorNormalProperty = new Vector2Property(new Vector2(0, NORMAL_DISTANCE));
class ProbeNodeWrapper extends Node {
  /**
   * View for rendering a probe that can be used to sense wave values
   *
   * @param probe - probe containing position and recorded data series
   * @param color
   * @param modelViewTransform - Transform between model and view coordinate frames
   */
  constructor(probe, color, modelViewTransform) {
    super({
      cursor: 'pointer'
    });

    // Add the probe
    this.addChild(new ProbeNode({
      radius: 43,
      innerRadius: 32,
      handleWidth: 40,
      handleHeight: 30,
      handleCornerRadius: 9,
      color: color,
      // {Color|string} darkish green

      // The circular part of the ProbeNode is called the sensor, where it receives light or has crosshairs, etc.
      // or null for an empty region
      sensorTypeFunction: ProbeNode.crosshairs(),
      scale: 0.35
    }));

    // Probe position
    probe.positionProperty.link(position => {
      this.translation = modelViewTransform.modelToViewPosition(position);
    });
    this.syncModelFromView = () => {
      probe.positionProperty.value = modelViewTransform.viewToModelPosition(this.translation);
    };
  }
}
class WaveSensorNode extends Node {
  /**
   * @param modelViewTransform - Transform between model and view coordinate frames
   * @param waveSensor - model for the wave sensor
   * @param [providedOptions]
   */
  constructor(modelViewTransform, waveSensor, providedOptions) {
    super({
      cursor: 'pointer'
    });

    // Color taken from the image
    const darkProbeColor = new Color(88, 89, 91);
    const lightProbeColor = new Color(147, 149, 152);
    this.modelViewTransform = modelViewTransform; // (read-only)
    this.waveSensor = waveSensor; // (read-only)

    // Add body node
    const rectangleWidth = 135;
    const rectangleHeight = 100;

    // Adding outer rectangle
    const outerRectangle = new Rectangle(0, 0, rectangleWidth, rectangleHeight, 5, 5, {
      stroke: new LinearGradient(0, 0, 0, rectangleHeight).addColorStop(0, '#2F9BCE').addColorStop(1, '#00486A'),
      fill: new LinearGradient(0, 0, 0, rectangleHeight).addColorStop(0, '#5EB4DE').addColorStop(1, '#005B86'),
      lineWidth: 2
    });

    // Second rectangle
    const innerRectangle = new Rectangle(0, 0, rectangleWidth - 5, rectangleHeight - 10, 0, 0, {
      fill: '#0078B0',
      stroke: '#0081BE',
      centerX: outerRectangle.centerX,
      centerY: outerRectangle.centerY
    });

    // Adding inner rectangle
    const innerMostRectangle = new ShadedRectangle(new Bounds2(10, 0, rectangleWidth * 0.98, rectangleHeight * 0.63), {
      baseColor: 'white',
      lightSource: 'rightBottom',
      centerX: innerRectangle.centerX,
      centerY: rectangleHeight * 0.4,
      cornerRadius: 5
    });

    // Combine all the shapes to form the body node
    this.bodyNode = new Node({
      children: [outerRectangle, innerRectangle, innerMostRectangle],
      scale: 0.93
    });

    // Add the "time" axis label at the bottom center of the chart
    const titleNode = new Text(timeString, {
      font: new PhetFont(16),
      fill: 'white'
    });
    if (titleNode.width > rectangleWidth - 15) {
      titleNode.scale((rectangleWidth - 15) / titleNode.width);
    }
    this.bodyNode.addChild(titleNode);
    titleNode.centerX = outerRectangle.centerX;
    const fractionalVerticalDistanceToTitle = 0.82;
    titleNode.y = this.bodyNode.height * fractionalVerticalDistanceToTitle;

    // Add the chart inside the body, with one series for each of the dark and light probes
    this.chartNode = new ChartNode(innerMostRectangle.bounds.eroded(3), [new Series(waveSensor.probe1.seriesProperty, darkProbeColor), new Series(waveSensor.probe2.seriesProperty, lightProbeColor)]);
    this.bodyNode.addChild(this.chartNode);

    // Create the probes
    this.probe1Node = new ProbeNodeWrapper(waveSensor.probe1, '#5c5d5f', modelViewTransform); // (read-only)
    this.probe2Node = new ProbeNodeWrapper(waveSensor.probe2, '#ccced0', modelViewTransform); // (read-only)

    // Connect the sensor to the body with a gray wire
    const above = amount => {
      // Nudge behind the body a so there is no gap
      return position => position.plusXY(-2, -amount);
    };
    const rightBottomProperty = new DerivedProperty([this.bodyNode.boundsProperty], bounds => bounds.rightBottom);
    this.wire1Node = new WireNode(new DerivedProperty([rightBottomProperty], above((1 - fractionalVerticalDistanceToTitle) * this.bodyNode.height)), bodyNormalProperty, new DerivedProperty([this.probe1Node.boundsProperty], bounds => bounds.centerBottom), sensorNormalProperty, {
      lineWidth: 3,
      stroke: darkProbeColor.toCSS()
    });
    this.wire2Node = new WireNode(new DerivedProperty([rightBottomProperty], above((1 - fractionalVerticalDistanceToTitle) * this.bodyNode.height)), bodyNormalProperty, new DerivedProperty([this.probe2Node.boundsProperty], bounds => bounds.centerBottom), sensorNormalProperty, {
      lineWidth: 3,
      stroke: lightProbeColor.toCSS()
    });
    this.addChild(this.wire1Node);
    this.addChild(this.wire2Node);

    // Synchronize the body position with the model (centered on the model point)
    waveSensor.bodyPositionProperty.link(position => {
      this.bodyNode.center = modelViewTransform.modelToViewPosition(position);
    });
    this.syncModelFromView = () => {
      waveSensor.bodyPositionProperty.value = modelViewTransform.viewToModelPosition(this.bodyNode.center);
      this.probe1Node.syncModelFromView();
      this.probe2Node.syncModelFromView();
    };
    this.addChild(this.bodyNode);
    this.addChild(this.probe1Node);
    this.addChild(this.probe2Node);
    this.resetRelativePositions();
    this.mutate(providedOptions);
  }

  /**
   */
  resetRelativePositions() {
    this.probe1Node.center = this.bodyNode.center.plusXY(110, 12);
    this.probe2Node.center = this.probe1Node.center.plusXY(-25, -37);
    this.syncModelFromView();
  }
}
bendingLight.register('WaveSensorNode', WaveSensorNode);
export default WaveSensorNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJCb3VuZHMyIiwiVmVjdG9yMiIsIlZlY3RvcjJQcm9wZXJ0eSIsIlBoZXRGb250IiwiUHJvYmVOb2RlIiwiU2hhZGVkUmVjdGFuZ2xlIiwiV2lyZU5vZGUiLCJDb2xvciIsIkxpbmVhckdyYWRpZW50IiwiTm9kZSIsIlJlY3RhbmdsZSIsIlRleHQiLCJCZW5kaW5nTGlnaHRTdHJpbmdzIiwiYmVuZGluZ0xpZ2h0IiwiU2VyaWVzIiwiQ2hhcnROb2RlIiwidGltZVN0cmluZyIsInRpbWUiLCJOT1JNQUxfRElTVEFOQ0UiLCJib2R5Tm9ybWFsUHJvcGVydHkiLCJzZW5zb3JOb3JtYWxQcm9wZXJ0eSIsIlByb2JlTm9kZVdyYXBwZXIiLCJjb25zdHJ1Y3RvciIsInByb2JlIiwiY29sb3IiLCJtb2RlbFZpZXdUcmFuc2Zvcm0iLCJjdXJzb3IiLCJhZGRDaGlsZCIsInJhZGl1cyIsImlubmVyUmFkaXVzIiwiaGFuZGxlV2lkdGgiLCJoYW5kbGVIZWlnaHQiLCJoYW5kbGVDb3JuZXJSYWRpdXMiLCJzZW5zb3JUeXBlRnVuY3Rpb24iLCJjcm9zc2hhaXJzIiwic2NhbGUiLCJwb3NpdGlvblByb3BlcnR5IiwibGluayIsInBvc2l0aW9uIiwidHJhbnNsYXRpb24iLCJtb2RlbFRvVmlld1Bvc2l0aW9uIiwic3luY01vZGVsRnJvbVZpZXciLCJ2YWx1ZSIsInZpZXdUb01vZGVsUG9zaXRpb24iLCJXYXZlU2Vuc29yTm9kZSIsIndhdmVTZW5zb3IiLCJwcm92aWRlZE9wdGlvbnMiLCJkYXJrUHJvYmVDb2xvciIsImxpZ2h0UHJvYmVDb2xvciIsInJlY3RhbmdsZVdpZHRoIiwicmVjdGFuZ2xlSGVpZ2h0Iiwib3V0ZXJSZWN0YW5nbGUiLCJzdHJva2UiLCJhZGRDb2xvclN0b3AiLCJmaWxsIiwibGluZVdpZHRoIiwiaW5uZXJSZWN0YW5nbGUiLCJjZW50ZXJYIiwiY2VudGVyWSIsImlubmVyTW9zdFJlY3RhbmdsZSIsImJhc2VDb2xvciIsImxpZ2h0U291cmNlIiwiY29ybmVyUmFkaXVzIiwiYm9keU5vZGUiLCJjaGlsZHJlbiIsInRpdGxlTm9kZSIsImZvbnQiLCJ3aWR0aCIsImZyYWN0aW9uYWxWZXJ0aWNhbERpc3RhbmNlVG9UaXRsZSIsInkiLCJoZWlnaHQiLCJjaGFydE5vZGUiLCJib3VuZHMiLCJlcm9kZWQiLCJwcm9iZTEiLCJzZXJpZXNQcm9wZXJ0eSIsInByb2JlMiIsInByb2JlMU5vZGUiLCJwcm9iZTJOb2RlIiwiYWJvdmUiLCJhbW91bnQiLCJwbHVzWFkiLCJyaWdodEJvdHRvbVByb3BlcnR5IiwiYm91bmRzUHJvcGVydHkiLCJyaWdodEJvdHRvbSIsIndpcmUxTm9kZSIsImNlbnRlckJvdHRvbSIsInRvQ1NTIiwid2lyZTJOb2RlIiwiYm9keVBvc2l0aW9uUHJvcGVydHkiLCJjZW50ZXIiLCJyZXNldFJlbGF0aXZlUG9zaXRpb25zIiwibXV0YXRlIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJXYXZlU2Vuc29yTm9kZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNS0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBWaWV3IGZvciB0aGUgd2F2ZSBzZW5zb3IsIHdoaWNoIHNob3dzIDIgc2Vuc29yIHByb2JlcyBhbmQgYSBjaGFydCBhcmVhICh0aGUgYm9keSlcclxuICpcclxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICogQGF1dGhvciBDaGFuZHJhc2hla2FyIEJlbWFnb25pIChBY3R1YWwgQ29uY2VwdHMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IERlcml2ZWRQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL0Rlcml2ZWRQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBCb3VuZHMyIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9Cb3VuZHMyLmpzJztcclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgVmVjdG9yMlByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9WZWN0b3IyUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgUGhldEZvbnQgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1BoZXRGb250LmpzJztcclxuaW1wb3J0IFByb2JlTm9kZSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvUHJvYmVOb2RlLmpzJztcclxuaW1wb3J0IFNoYWRlZFJlY3RhbmdsZSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvU2hhZGVkUmVjdGFuZ2xlLmpzJztcclxuaW1wb3J0IFdpcmVOb2RlIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9XaXJlTm9kZS5qcyc7XHJcbmltcG9ydCB7IENvbG9yLCBMaW5lYXJHcmFkaWVudCwgTm9kZSwgTm9kZU9wdGlvbnMsIFJlY3RhbmdsZSwgVGV4dCB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBCZW5kaW5nTGlnaHRTdHJpbmdzIGZyb20gJy4uLy4uL0JlbmRpbmdMaWdodFN0cmluZ3MuanMnO1xyXG5pbXBvcnQgYmVuZGluZ0xpZ2h0IGZyb20gJy4uLy4uL2JlbmRpbmdMaWdodC5qcyc7XHJcbmltcG9ydCBTZXJpZXMgZnJvbSAnLi4vbW9kZWwvU2VyaWVzLmpzJztcclxuaW1wb3J0IENoYXJ0Tm9kZSBmcm9tICcuL0NoYXJ0Tm9kZS5qcyc7XHJcbmltcG9ydCBNb2RlbFZpZXdUcmFuc2Zvcm0yIGZyb20gJy4uLy4uLy4uLy4uL3BoZXRjb21tb24vanMvdmlldy9Nb2RlbFZpZXdUcmFuc2Zvcm0yLmpzJztcclxuaW1wb3J0IFdhdmVTZW5zb3IgZnJvbSAnLi4vbW9kZWwvV2F2ZVNlbnNvci5qcyc7XHJcbmltcG9ydCBQcm9iZSBmcm9tICcuLi9tb2RlbC9Qcm9iZS5qcyc7XHJcblxyXG5jb25zdCB0aW1lU3RyaW5nID0gQmVuZGluZ0xpZ2h0U3RyaW5ncy50aW1lO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IE5PUk1BTF9ESVNUQU5DRSA9IDI1O1xyXG5jb25zdCBib2R5Tm9ybWFsUHJvcGVydHkgPSBuZXcgVmVjdG9yMlByb3BlcnR5KCBuZXcgVmVjdG9yMiggTk9STUFMX0RJU1RBTkNFLCAwICkgKTtcclxuY29uc3Qgc2Vuc29yTm9ybWFsUHJvcGVydHkgPSBuZXcgVmVjdG9yMlByb3BlcnR5KCBuZXcgVmVjdG9yMiggMCwgTk9STUFMX0RJU1RBTkNFICkgKTtcclxuXHJcbmNsYXNzIFByb2JlTm9kZVdyYXBwZXIgZXh0ZW5kcyBOb2RlIHtcclxuICBwdWJsaWMgc3luY01vZGVsRnJvbVZpZXc6ICgpID0+IHZvaWQ7XHJcblxyXG4gIC8qKlxyXG4gICAqIFZpZXcgZm9yIHJlbmRlcmluZyBhIHByb2JlIHRoYXQgY2FuIGJlIHVzZWQgdG8gc2Vuc2Ugd2F2ZSB2YWx1ZXNcclxuICAgKlxyXG4gICAqIEBwYXJhbSBwcm9iZSAtIHByb2JlIGNvbnRhaW5pbmcgcG9zaXRpb24gYW5kIHJlY29yZGVkIGRhdGEgc2VyaWVzXHJcbiAgICogQHBhcmFtIGNvbG9yXHJcbiAgICogQHBhcmFtIG1vZGVsVmlld1RyYW5zZm9ybSAtIFRyYW5zZm9ybSBiZXR3ZWVuIG1vZGVsIGFuZCB2aWV3IGNvb3JkaW5hdGUgZnJhbWVzXHJcbiAgICovXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBwcm9iZTogUHJvYmUsIGNvbG9yOiBzdHJpbmcsIG1vZGVsVmlld1RyYW5zZm9ybTogTW9kZWxWaWV3VHJhbnNmb3JtMiApIHtcclxuXHJcbiAgICBzdXBlciggeyBjdXJzb3I6ICdwb2ludGVyJyB9ICk7XHJcblxyXG4gICAgLy8gQWRkIHRoZSBwcm9iZVxyXG4gICAgdGhpcy5hZGRDaGlsZCggbmV3IFByb2JlTm9kZSgge1xyXG4gICAgICByYWRpdXM6IDQzLFxyXG4gICAgICBpbm5lclJhZGl1czogMzIsXHJcbiAgICAgIGhhbmRsZVdpZHRoOiA0MCxcclxuICAgICAgaGFuZGxlSGVpZ2h0OiAzMCxcclxuICAgICAgaGFuZGxlQ29ybmVyUmFkaXVzOiA5LFxyXG5cclxuICAgICAgY29sb3I6IGNvbG9yLCAvLyB7Q29sb3J8c3RyaW5nfSBkYXJraXNoIGdyZWVuXHJcblxyXG4gICAgICAvLyBUaGUgY2lyY3VsYXIgcGFydCBvZiB0aGUgUHJvYmVOb2RlIGlzIGNhbGxlZCB0aGUgc2Vuc29yLCB3aGVyZSBpdCByZWNlaXZlcyBsaWdodCBvciBoYXMgY3Jvc3NoYWlycywgZXRjLlxyXG4gICAgICAvLyBvciBudWxsIGZvciBhbiBlbXB0eSByZWdpb25cclxuICAgICAgc2Vuc29yVHlwZUZ1bmN0aW9uOiBQcm9iZU5vZGUuY3Jvc3NoYWlycygpLFxyXG4gICAgICBzY2FsZTogMC4zNVxyXG4gICAgfSApICk7XHJcblxyXG4gICAgLy8gUHJvYmUgcG9zaXRpb25cclxuICAgIHByb2JlLnBvc2l0aW9uUHJvcGVydHkubGluayggcG9zaXRpb24gPT4ge1xyXG4gICAgICB0aGlzLnRyYW5zbGF0aW9uID0gbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3UG9zaXRpb24oIHBvc2l0aW9uICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5zeW5jTW9kZWxGcm9tVmlldyA9ICgpID0+IHtcclxuICAgICAgcHJvYmUucG9zaXRpb25Qcm9wZXJ0eS52YWx1ZSA9IG1vZGVsVmlld1RyYW5zZm9ybS52aWV3VG9Nb2RlbFBvc2l0aW9uKCB0aGlzLnRyYW5zbGF0aW9uICk7XHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuY2xhc3MgV2F2ZVNlbnNvck5vZGUgZXh0ZW5kcyBOb2RlIHtcclxuICBwcml2YXRlIG1vZGVsVmlld1RyYW5zZm9ybTogTW9kZWxWaWV3VHJhbnNmb3JtMjtcclxuICBwdWJsaWMgd2F2ZVNlbnNvcjogV2F2ZVNlbnNvcjtcclxuICBwdWJsaWMgYm9keU5vZGU6IE5vZGU7XHJcbiAgcHVibGljIGNoYXJ0Tm9kZTogQ2hhcnROb2RlO1xyXG4gIHB1YmxpYyBwcm9iZTFOb2RlOiBQcm9iZU5vZGVXcmFwcGVyO1xyXG4gIHB1YmxpYyBwcm9iZTJOb2RlOiBQcm9iZU5vZGVXcmFwcGVyO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgd2lyZTFOb2RlOiBXaXJlTm9kZTtcclxuICBwcml2YXRlIHJlYWRvbmx5IHdpcmUyTm9kZTogV2lyZU5vZGU7XHJcbiAgcHVibGljIHN5bmNNb2RlbEZyb21WaWV3OiAoKSA9PiB2b2lkO1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0gbW9kZWxWaWV3VHJhbnNmb3JtIC0gVHJhbnNmb3JtIGJldHdlZW4gbW9kZWwgYW5kIHZpZXcgY29vcmRpbmF0ZSBmcmFtZXNcclxuICAgKiBAcGFyYW0gd2F2ZVNlbnNvciAtIG1vZGVsIGZvciB0aGUgd2F2ZSBzZW5zb3JcclxuICAgKiBAcGFyYW0gW3Byb3ZpZGVkT3B0aW9uc11cclxuICAgKi9cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIG1vZGVsVmlld1RyYW5zZm9ybTogTW9kZWxWaWV3VHJhbnNmb3JtMiwgd2F2ZVNlbnNvcjogV2F2ZVNlbnNvciwgcHJvdmlkZWRPcHRpb25zPzogTm9kZU9wdGlvbnMgKSB7XHJcblxyXG4gICAgc3VwZXIoIHsgY3Vyc29yOiAncG9pbnRlcicgfSApO1xyXG5cclxuICAgIC8vIENvbG9yIHRha2VuIGZyb20gdGhlIGltYWdlXHJcbiAgICBjb25zdCBkYXJrUHJvYmVDb2xvciA9IG5ldyBDb2xvciggODgsIDg5LCA5MSApO1xyXG4gICAgY29uc3QgbGlnaHRQcm9iZUNvbG9yID0gbmV3IENvbG9yKCAxNDcsIDE0OSwgMTUyICk7XHJcblxyXG4gICAgdGhpcy5tb2RlbFZpZXdUcmFuc2Zvcm0gPSBtb2RlbFZpZXdUcmFuc2Zvcm07IC8vIChyZWFkLW9ubHkpXHJcbiAgICB0aGlzLndhdmVTZW5zb3IgPSB3YXZlU2Vuc29yOyAvLyAocmVhZC1vbmx5KVxyXG5cclxuICAgIC8vIEFkZCBib2R5IG5vZGVcclxuICAgIGNvbnN0IHJlY3RhbmdsZVdpZHRoID0gMTM1O1xyXG4gICAgY29uc3QgcmVjdGFuZ2xlSGVpZ2h0ID0gMTAwO1xyXG5cclxuICAgIC8vIEFkZGluZyBvdXRlciByZWN0YW5nbGVcclxuICAgIGNvbnN0IG91dGVyUmVjdGFuZ2xlID0gbmV3IFJlY3RhbmdsZSggMCwgMCwgcmVjdGFuZ2xlV2lkdGgsIHJlY3RhbmdsZUhlaWdodCwgNSwgNSwge1xyXG4gICAgICBzdHJva2U6IG5ldyBMaW5lYXJHcmFkaWVudCggMCwgMCwgMCwgcmVjdGFuZ2xlSGVpZ2h0IClcclxuICAgICAgICAuYWRkQ29sb3JTdG9wKCAwLCAnIzJGOUJDRScgKVxyXG4gICAgICAgIC5hZGRDb2xvclN0b3AoIDEsICcjMDA0ODZBJyApLFxyXG4gICAgICBmaWxsOiBuZXcgTGluZWFyR3JhZGllbnQoIDAsIDAsIDAsIHJlY3RhbmdsZUhlaWdodCApXHJcbiAgICAgICAgLmFkZENvbG9yU3RvcCggMCwgJyM1RUI0REUnIClcclxuICAgICAgICAuYWRkQ29sb3JTdG9wKCAxLCAnIzAwNUI4NicgKSxcclxuICAgICAgbGluZVdpZHRoOiAyXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gU2Vjb25kIHJlY3RhbmdsZVxyXG4gICAgY29uc3QgaW5uZXJSZWN0YW5nbGUgPSBuZXcgUmVjdGFuZ2xlKCAwLCAwLCByZWN0YW5nbGVXaWR0aCAtIDUsIHJlY3RhbmdsZUhlaWdodCAtIDEwLCAwLCAwLCB7XHJcbiAgICAgIGZpbGw6ICcjMDA3OEIwJyxcclxuICAgICAgc3Ryb2tlOiAnIzAwODFCRScsXHJcbiAgICAgIGNlbnRlclg6IG91dGVyUmVjdGFuZ2xlLmNlbnRlclgsXHJcbiAgICAgIGNlbnRlclk6IG91dGVyUmVjdGFuZ2xlLmNlbnRlcllcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBBZGRpbmcgaW5uZXIgcmVjdGFuZ2xlXHJcbiAgICBjb25zdCBpbm5lck1vc3RSZWN0YW5nbGUgPSBuZXcgU2hhZGVkUmVjdGFuZ2xlKCBuZXcgQm91bmRzMiggMTAsIDAsIHJlY3RhbmdsZVdpZHRoICogMC45OCwgcmVjdGFuZ2xlSGVpZ2h0ICogMC42MyApLCB7XHJcbiAgICAgIGJhc2VDb2xvcjogJ3doaXRlJyxcclxuICAgICAgbGlnaHRTb3VyY2U6ICdyaWdodEJvdHRvbScsXHJcbiAgICAgIGNlbnRlclg6IGlubmVyUmVjdGFuZ2xlLmNlbnRlclgsXHJcbiAgICAgIGNlbnRlclk6IHJlY3RhbmdsZUhlaWdodCAqIDAuNCxcclxuICAgICAgY29ybmVyUmFkaXVzOiA1XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gQ29tYmluZSBhbGwgdGhlIHNoYXBlcyB0byBmb3JtIHRoZSBib2R5IG5vZGVcclxuICAgIHRoaXMuYm9keU5vZGUgPSBuZXcgTm9kZSggeyBjaGlsZHJlbjogWyBvdXRlclJlY3RhbmdsZSwgaW5uZXJSZWN0YW5nbGUsIGlubmVyTW9zdFJlY3RhbmdsZSBdLCBzY2FsZTogMC45MyB9ICk7XHJcblxyXG4gICAgLy8gQWRkIHRoZSBcInRpbWVcIiBheGlzIGxhYmVsIGF0IHRoZSBib3R0b20gY2VudGVyIG9mIHRoZSBjaGFydFxyXG4gICAgY29uc3QgdGl0bGVOb2RlID0gbmV3IFRleHQoIHRpbWVTdHJpbmcsIHsgZm9udDogbmV3IFBoZXRGb250KCAxNiApLCBmaWxsOiAnd2hpdGUnIH0gKTtcclxuICAgIGlmICggdGl0bGVOb2RlLndpZHRoID4gcmVjdGFuZ2xlV2lkdGggLSAxNSApIHtcclxuICAgICAgdGl0bGVOb2RlLnNjYWxlKCAoIHJlY3RhbmdsZVdpZHRoIC0gMTUgKSAvIHRpdGxlTm9kZS53aWR0aCApO1xyXG4gICAgfVxyXG4gICAgdGhpcy5ib2R5Tm9kZS5hZGRDaGlsZCggdGl0bGVOb2RlICk7XHJcbiAgICB0aXRsZU5vZGUuY2VudGVyWCA9IG91dGVyUmVjdGFuZ2xlLmNlbnRlclg7XHJcbiAgICBjb25zdCBmcmFjdGlvbmFsVmVydGljYWxEaXN0YW5jZVRvVGl0bGUgPSAwLjgyO1xyXG4gICAgdGl0bGVOb2RlLnkgPSB0aGlzLmJvZHlOb2RlLmhlaWdodCAqIGZyYWN0aW9uYWxWZXJ0aWNhbERpc3RhbmNlVG9UaXRsZTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIGNoYXJ0IGluc2lkZSB0aGUgYm9keSwgd2l0aCBvbmUgc2VyaWVzIGZvciBlYWNoIG9mIHRoZSBkYXJrIGFuZCBsaWdodCBwcm9iZXNcclxuICAgIHRoaXMuY2hhcnROb2RlID0gbmV3IENoYXJ0Tm9kZSggaW5uZXJNb3N0UmVjdGFuZ2xlLmJvdW5kcy5lcm9kZWQoIDMgKSwgW1xyXG4gICAgICBuZXcgU2VyaWVzKCB3YXZlU2Vuc29yLnByb2JlMS5zZXJpZXNQcm9wZXJ0eSwgZGFya1Byb2JlQ29sb3IgKSxcclxuICAgICAgbmV3IFNlcmllcyggd2F2ZVNlbnNvci5wcm9iZTIuc2VyaWVzUHJvcGVydHksIGxpZ2h0UHJvYmVDb2xvciApXHJcbiAgICBdICk7XHJcbiAgICB0aGlzLmJvZHlOb2RlLmFkZENoaWxkKCB0aGlzLmNoYXJ0Tm9kZSApO1xyXG5cclxuICAgIC8vIENyZWF0ZSB0aGUgcHJvYmVzXHJcbiAgICB0aGlzLnByb2JlMU5vZGUgPSBuZXcgUHJvYmVOb2RlV3JhcHBlciggd2F2ZVNlbnNvci5wcm9iZTEsICcjNWM1ZDVmJywgbW9kZWxWaWV3VHJhbnNmb3JtICk7IC8vIChyZWFkLW9ubHkpXHJcbiAgICB0aGlzLnByb2JlMk5vZGUgPSBuZXcgUHJvYmVOb2RlV3JhcHBlciggd2F2ZVNlbnNvci5wcm9iZTIsICcjY2NjZWQwJywgbW9kZWxWaWV3VHJhbnNmb3JtICk7IC8vIChyZWFkLW9ubHkpXHJcblxyXG4gICAgLy8gQ29ubmVjdCB0aGUgc2Vuc29yIHRvIHRoZSBib2R5IHdpdGggYSBncmF5IHdpcmVcclxuICAgIGNvbnN0IGFib3ZlID0gKCBhbW91bnQ6IG51bWJlciApID0+IHtcclxuXHJcbiAgICAgIC8vIE51ZGdlIGJlaGluZCB0aGUgYm9keSBhIHNvIHRoZXJlIGlzIG5vIGdhcFxyXG4gICAgICByZXR1cm4gKCBwb3NpdGlvbjogVmVjdG9yMiApID0+IHBvc2l0aW9uLnBsdXNYWSggLTIsIC1hbW91bnQgKTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgcmlnaHRCb3R0b21Qcm9wZXJ0eSA9IG5ldyBEZXJpdmVkUHJvcGVydHkoIFsgdGhpcy5ib2R5Tm9kZS5ib3VuZHNQcm9wZXJ0eSBdLCBib3VuZHMgPT4gYm91bmRzLnJpZ2h0Qm90dG9tICk7XHJcblxyXG4gICAgdGhpcy53aXJlMU5vZGUgPSBuZXcgV2lyZU5vZGUoXHJcbiAgICAgIG5ldyBEZXJpdmVkUHJvcGVydHkoIFsgcmlnaHRCb3R0b21Qcm9wZXJ0eSBdLCBhYm92ZSggKCAxIC0gZnJhY3Rpb25hbFZlcnRpY2FsRGlzdGFuY2VUb1RpdGxlICkgKiB0aGlzLmJvZHlOb2RlLmhlaWdodCApICksXHJcbiAgICAgIGJvZHlOb3JtYWxQcm9wZXJ0eSxcclxuICAgICAgbmV3IERlcml2ZWRQcm9wZXJ0eSggWyB0aGlzLnByb2JlMU5vZGUuYm91bmRzUHJvcGVydHkgXSwgYm91bmRzID0+IGJvdW5kcy5jZW50ZXJCb3R0b20gKSxcclxuICAgICAgc2Vuc29yTm9ybWFsUHJvcGVydHksIHtcclxuICAgICAgICBsaW5lV2lkdGg6IDMsXHJcbiAgICAgICAgc3Ryb2tlOiBkYXJrUHJvYmVDb2xvci50b0NTUygpXHJcbiAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgdGhpcy53aXJlMk5vZGUgPSBuZXcgV2lyZU5vZGUoXHJcbiAgICAgIG5ldyBEZXJpdmVkUHJvcGVydHkoIFsgcmlnaHRCb3R0b21Qcm9wZXJ0eSBdLCBhYm92ZSggKCAxIC0gZnJhY3Rpb25hbFZlcnRpY2FsRGlzdGFuY2VUb1RpdGxlICkgKiB0aGlzLmJvZHlOb2RlLmhlaWdodCApICksXHJcbiAgICAgIGJvZHlOb3JtYWxQcm9wZXJ0eSxcclxuICAgICAgbmV3IERlcml2ZWRQcm9wZXJ0eSggWyB0aGlzLnByb2JlMk5vZGUuYm91bmRzUHJvcGVydHkgXSwgYm91bmRzID0+IGJvdW5kcy5jZW50ZXJCb3R0b20gKSxcclxuICAgICAgc2Vuc29yTm9ybWFsUHJvcGVydHksIHtcclxuICAgICAgICBsaW5lV2lkdGg6IDMsXHJcbiAgICAgICAgc3Ryb2tlOiBsaWdodFByb2JlQ29sb3IudG9DU1MoKVxyXG4gICAgICB9XHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMud2lyZTFOb2RlICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCB0aGlzLndpcmUyTm9kZSApO1xyXG5cclxuICAgIC8vIFN5bmNocm9uaXplIHRoZSBib2R5IHBvc2l0aW9uIHdpdGggdGhlIG1vZGVsIChjZW50ZXJlZCBvbiB0aGUgbW9kZWwgcG9pbnQpXHJcbiAgICB3YXZlU2Vuc29yLmJvZHlQb3NpdGlvblByb3BlcnR5LmxpbmsoIHBvc2l0aW9uID0+IHtcclxuICAgICAgdGhpcy5ib2R5Tm9kZS5jZW50ZXIgPSBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdQb3NpdGlvbiggcG9zaXRpb24gKTtcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLnN5bmNNb2RlbEZyb21WaWV3ID0gKCkgPT4ge1xyXG4gICAgICB3YXZlU2Vuc29yLmJvZHlQb3NpdGlvblByb3BlcnR5LnZhbHVlID0gbW9kZWxWaWV3VHJhbnNmb3JtLnZpZXdUb01vZGVsUG9zaXRpb24oIHRoaXMuYm9keU5vZGUuY2VudGVyICk7XHJcbiAgICAgIHRoaXMucHJvYmUxTm9kZS5zeW5jTW9kZWxGcm9tVmlldygpO1xyXG4gICAgICB0aGlzLnByb2JlMk5vZGUuc3luY01vZGVsRnJvbVZpZXcoKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5hZGRDaGlsZCggdGhpcy5ib2R5Tm9kZSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggdGhpcy5wcm9iZTFOb2RlICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCB0aGlzLnByb2JlMk5vZGUgKTtcclxuXHJcbiAgICB0aGlzLnJlc2V0UmVsYXRpdmVQb3NpdGlvbnMoKTtcclxuXHJcbiAgICB0aGlzLm11dGF0ZSggcHJvdmlkZWRPcHRpb25zICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKi9cclxuICBwdWJsaWMgcmVzZXRSZWxhdGl2ZVBvc2l0aW9ucygpOiB2b2lkIHtcclxuICAgIHRoaXMucHJvYmUxTm9kZS5jZW50ZXIgPSB0aGlzLmJvZHlOb2RlLmNlbnRlci5wbHVzWFkoIDExMCwgMTIgKTtcclxuICAgIHRoaXMucHJvYmUyTm9kZS5jZW50ZXIgPSB0aGlzLnByb2JlMU5vZGUuY2VudGVyLnBsdXNYWSggLTI1LCAtMzcgKTtcclxuICAgIHRoaXMuc3luY01vZGVsRnJvbVZpZXcoKTtcclxuICB9XHJcbn1cclxuXHJcbmJlbmRpbmdMaWdodC5yZWdpc3RlciggJ1dhdmVTZW5zb3JOb2RlJywgV2F2ZVNlbnNvck5vZGUgKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFdhdmVTZW5zb3JOb2RlOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGVBQWUsTUFBTSx3Q0FBd0M7QUFDcEUsT0FBT0MsT0FBTyxNQUFNLCtCQUErQjtBQUNuRCxPQUFPQyxPQUFPLE1BQU0sK0JBQStCO0FBQ25ELE9BQU9DLGVBQWUsTUFBTSx1Q0FBdUM7QUFDbkUsT0FBT0MsUUFBUSxNQUFNLHlDQUF5QztBQUM5RCxPQUFPQyxTQUFTLE1BQU0sMENBQTBDO0FBQ2hFLE9BQU9DLGVBQWUsTUFBTSxnREFBZ0Q7QUFDNUUsT0FBT0MsUUFBUSxNQUFNLHlDQUF5QztBQUM5RCxTQUFTQyxLQUFLLEVBQUVDLGNBQWMsRUFBRUMsSUFBSSxFQUFlQyxTQUFTLEVBQUVDLElBQUksUUFBUSxtQ0FBbUM7QUFDN0csT0FBT0MsbUJBQW1CLE1BQU0sOEJBQThCO0FBQzlELE9BQU9DLFlBQVksTUFBTSx1QkFBdUI7QUFDaEQsT0FBT0MsTUFBTSxNQUFNLG9CQUFvQjtBQUN2QyxPQUFPQyxTQUFTLE1BQU0sZ0JBQWdCO0FBS3RDLE1BQU1DLFVBQVUsR0FBR0osbUJBQW1CLENBQUNLLElBQUk7O0FBRTNDO0FBQ0EsTUFBTUMsZUFBZSxHQUFHLEVBQUU7QUFDMUIsTUFBTUMsa0JBQWtCLEdBQUcsSUFBSWpCLGVBQWUsQ0FBRSxJQUFJRCxPQUFPLENBQUVpQixlQUFlLEVBQUUsQ0FBRSxDQUFFLENBQUM7QUFDbkYsTUFBTUUsb0JBQW9CLEdBQUcsSUFBSWxCLGVBQWUsQ0FBRSxJQUFJRCxPQUFPLENBQUUsQ0FBQyxFQUFFaUIsZUFBZ0IsQ0FBRSxDQUFDO0FBRXJGLE1BQU1HLGdCQUFnQixTQUFTWixJQUFJLENBQUM7RUFHbEM7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDU2EsV0FBV0EsQ0FBRUMsS0FBWSxFQUFFQyxLQUFhLEVBQUVDLGtCQUF1QyxFQUFHO0lBRXpGLEtBQUssQ0FBRTtNQUFFQyxNQUFNLEVBQUU7SUFBVSxDQUFFLENBQUM7O0lBRTlCO0lBQ0EsSUFBSSxDQUFDQyxRQUFRLENBQUUsSUFBSXZCLFNBQVMsQ0FBRTtNQUM1QndCLE1BQU0sRUFBRSxFQUFFO01BQ1ZDLFdBQVcsRUFBRSxFQUFFO01BQ2ZDLFdBQVcsRUFBRSxFQUFFO01BQ2ZDLFlBQVksRUFBRSxFQUFFO01BQ2hCQyxrQkFBa0IsRUFBRSxDQUFDO01BRXJCUixLQUFLLEVBQUVBLEtBQUs7TUFBRTs7TUFFZDtNQUNBO01BQ0FTLGtCQUFrQixFQUFFN0IsU0FBUyxDQUFDOEIsVUFBVSxDQUFDLENBQUM7TUFDMUNDLEtBQUssRUFBRTtJQUNULENBQUUsQ0FBRSxDQUFDOztJQUVMO0lBQ0FaLEtBQUssQ0FBQ2EsZ0JBQWdCLENBQUNDLElBQUksQ0FBRUMsUUFBUSxJQUFJO01BQ3ZDLElBQUksQ0FBQ0MsV0FBVyxHQUFHZCxrQkFBa0IsQ0FBQ2UsbUJBQW1CLENBQUVGLFFBQVMsQ0FBQztJQUN2RSxDQUFFLENBQUM7SUFFSCxJQUFJLENBQUNHLGlCQUFpQixHQUFHLE1BQU07TUFDN0JsQixLQUFLLENBQUNhLGdCQUFnQixDQUFDTSxLQUFLLEdBQUdqQixrQkFBa0IsQ0FBQ2tCLG1CQUFtQixDQUFFLElBQUksQ0FBQ0osV0FBWSxDQUFDO0lBQzNGLENBQUM7RUFDSDtBQUNGO0FBRUEsTUFBTUssY0FBYyxTQUFTbkMsSUFBSSxDQUFDO0VBV2hDO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDU2EsV0FBV0EsQ0FBRUcsa0JBQXVDLEVBQUVvQixVQUFzQixFQUFFQyxlQUE2QixFQUFHO0lBRW5ILEtBQUssQ0FBRTtNQUFFcEIsTUFBTSxFQUFFO0lBQVUsQ0FBRSxDQUFDOztJQUU5QjtJQUNBLE1BQU1xQixjQUFjLEdBQUcsSUFBSXhDLEtBQUssQ0FBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUcsQ0FBQztJQUM5QyxNQUFNeUMsZUFBZSxHQUFHLElBQUl6QyxLQUFLLENBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFJLENBQUM7SUFFbEQsSUFBSSxDQUFDa0Isa0JBQWtCLEdBQUdBLGtCQUFrQixDQUFDLENBQUM7SUFDOUMsSUFBSSxDQUFDb0IsVUFBVSxHQUFHQSxVQUFVLENBQUMsQ0FBQzs7SUFFOUI7SUFDQSxNQUFNSSxjQUFjLEdBQUcsR0FBRztJQUMxQixNQUFNQyxlQUFlLEdBQUcsR0FBRzs7SUFFM0I7SUFDQSxNQUFNQyxjQUFjLEdBQUcsSUFBSXpDLFNBQVMsQ0FBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFdUMsY0FBYyxFQUFFQyxlQUFlLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtNQUNqRkUsTUFBTSxFQUFFLElBQUk1QyxjQUFjLENBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUwQyxlQUFnQixDQUFDLENBQ25ERyxZQUFZLENBQUUsQ0FBQyxFQUFFLFNBQVUsQ0FBQyxDQUM1QkEsWUFBWSxDQUFFLENBQUMsRUFBRSxTQUFVLENBQUM7TUFDL0JDLElBQUksRUFBRSxJQUFJOUMsY0FBYyxDQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFMEMsZUFBZ0IsQ0FBQyxDQUNqREcsWUFBWSxDQUFFLENBQUMsRUFBRSxTQUFVLENBQUMsQ0FDNUJBLFlBQVksQ0FBRSxDQUFDLEVBQUUsU0FBVSxDQUFDO01BQy9CRSxTQUFTLEVBQUU7SUFDYixDQUFFLENBQUM7O0lBRUg7SUFDQSxNQUFNQyxjQUFjLEdBQUcsSUFBSTlDLFNBQVMsQ0FBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFdUMsY0FBYyxHQUFHLENBQUMsRUFBRUMsZUFBZSxHQUFHLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO01BQzFGSSxJQUFJLEVBQUUsU0FBUztNQUNmRixNQUFNLEVBQUUsU0FBUztNQUNqQkssT0FBTyxFQUFFTixjQUFjLENBQUNNLE9BQU87TUFDL0JDLE9BQU8sRUFBRVAsY0FBYyxDQUFDTztJQUMxQixDQUFFLENBQUM7O0lBRUg7SUFDQSxNQUFNQyxrQkFBa0IsR0FBRyxJQUFJdEQsZUFBZSxDQUFFLElBQUlMLE9BQU8sQ0FBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFaUQsY0FBYyxHQUFHLElBQUksRUFBRUMsZUFBZSxHQUFHLElBQUssQ0FBQyxFQUFFO01BQ25IVSxTQUFTLEVBQUUsT0FBTztNQUNsQkMsV0FBVyxFQUFFLGFBQWE7TUFDMUJKLE9BQU8sRUFBRUQsY0FBYyxDQUFDQyxPQUFPO01BQy9CQyxPQUFPLEVBQUVSLGVBQWUsR0FBRyxHQUFHO01BQzlCWSxZQUFZLEVBQUU7SUFDaEIsQ0FBRSxDQUFDOztJQUVIO0lBQ0EsSUFBSSxDQUFDQyxRQUFRLEdBQUcsSUFBSXRELElBQUksQ0FBRTtNQUFFdUQsUUFBUSxFQUFFLENBQUViLGNBQWMsRUFBRUssY0FBYyxFQUFFRyxrQkFBa0IsQ0FBRTtNQUFFeEIsS0FBSyxFQUFFO0lBQUssQ0FBRSxDQUFDOztJQUU3RztJQUNBLE1BQU04QixTQUFTLEdBQUcsSUFBSXRELElBQUksQ0FBRUssVUFBVSxFQUFFO01BQUVrRCxJQUFJLEVBQUUsSUFBSS9ELFFBQVEsQ0FBRSxFQUFHLENBQUM7TUFBRW1ELElBQUksRUFBRTtJQUFRLENBQUUsQ0FBQztJQUNyRixJQUFLVyxTQUFTLENBQUNFLEtBQUssR0FBR2xCLGNBQWMsR0FBRyxFQUFFLEVBQUc7TUFDM0NnQixTQUFTLENBQUM5QixLQUFLLENBQUUsQ0FBRWMsY0FBYyxHQUFHLEVBQUUsSUFBS2dCLFNBQVMsQ0FBQ0UsS0FBTSxDQUFDO0lBQzlEO0lBQ0EsSUFBSSxDQUFDSixRQUFRLENBQUNwQyxRQUFRLENBQUVzQyxTQUFVLENBQUM7SUFDbkNBLFNBQVMsQ0FBQ1IsT0FBTyxHQUFHTixjQUFjLENBQUNNLE9BQU87SUFDMUMsTUFBTVcsaUNBQWlDLEdBQUcsSUFBSTtJQUM5Q0gsU0FBUyxDQUFDSSxDQUFDLEdBQUcsSUFBSSxDQUFDTixRQUFRLENBQUNPLE1BQU0sR0FBR0YsaUNBQWlDOztJQUV0RTtJQUNBLElBQUksQ0FBQ0csU0FBUyxHQUFHLElBQUl4RCxTQUFTLENBQUU0QyxrQkFBa0IsQ0FBQ2EsTUFBTSxDQUFDQyxNQUFNLENBQUUsQ0FBRSxDQUFDLEVBQUUsQ0FDckUsSUFBSTNELE1BQU0sQ0FBRStCLFVBQVUsQ0FBQzZCLE1BQU0sQ0FBQ0MsY0FBYyxFQUFFNUIsY0FBZSxDQUFDLEVBQzlELElBQUlqQyxNQUFNLENBQUUrQixVQUFVLENBQUMrQixNQUFNLENBQUNELGNBQWMsRUFBRTNCLGVBQWdCLENBQUMsQ0FDL0QsQ0FBQztJQUNILElBQUksQ0FBQ2UsUUFBUSxDQUFDcEMsUUFBUSxDQUFFLElBQUksQ0FBQzRDLFNBQVUsQ0FBQzs7SUFFeEM7SUFDQSxJQUFJLENBQUNNLFVBQVUsR0FBRyxJQUFJeEQsZ0JBQWdCLENBQUV3QixVQUFVLENBQUM2QixNQUFNLEVBQUUsU0FBUyxFQUFFakQsa0JBQW1CLENBQUMsQ0FBQyxDQUFDO0lBQzVGLElBQUksQ0FBQ3FELFVBQVUsR0FBRyxJQUFJekQsZ0JBQWdCLENBQUV3QixVQUFVLENBQUMrQixNQUFNLEVBQUUsU0FBUyxFQUFFbkQsa0JBQW1CLENBQUMsQ0FBQyxDQUFDOztJQUU1RjtJQUNBLE1BQU1zRCxLQUFLLEdBQUtDLE1BQWMsSUFBTTtNQUVsQztNQUNBLE9BQVMxQyxRQUFpQixJQUFNQSxRQUFRLENBQUMyQyxNQUFNLENBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQ0QsTUFBTyxDQUFDO0lBQ2hFLENBQUM7SUFFRCxNQUFNRSxtQkFBbUIsR0FBRyxJQUFJbkYsZUFBZSxDQUFFLENBQUUsSUFBSSxDQUFDZ0UsUUFBUSxDQUFDb0IsY0FBYyxDQUFFLEVBQUVYLE1BQU0sSUFBSUEsTUFBTSxDQUFDWSxXQUFZLENBQUM7SUFFakgsSUFBSSxDQUFDQyxTQUFTLEdBQUcsSUFBSS9FLFFBQVEsQ0FDM0IsSUFBSVAsZUFBZSxDQUFFLENBQUVtRixtQkFBbUIsQ0FBRSxFQUFFSCxLQUFLLENBQUUsQ0FBRSxDQUFDLEdBQUdYLGlDQUFpQyxJQUFLLElBQUksQ0FBQ0wsUUFBUSxDQUFDTyxNQUFPLENBQUUsQ0FBQyxFQUN6SG5ELGtCQUFrQixFQUNsQixJQUFJcEIsZUFBZSxDQUFFLENBQUUsSUFBSSxDQUFDOEUsVUFBVSxDQUFDTSxjQUFjLENBQUUsRUFBRVgsTUFBTSxJQUFJQSxNQUFNLENBQUNjLFlBQWEsQ0FBQyxFQUN4RmxFLG9CQUFvQixFQUFFO01BQ3BCbUMsU0FBUyxFQUFFLENBQUM7TUFDWkgsTUFBTSxFQUFFTCxjQUFjLENBQUN3QyxLQUFLLENBQUM7SUFDL0IsQ0FDRixDQUFDO0lBRUQsSUFBSSxDQUFDQyxTQUFTLEdBQUcsSUFBSWxGLFFBQVEsQ0FDM0IsSUFBSVAsZUFBZSxDQUFFLENBQUVtRixtQkFBbUIsQ0FBRSxFQUFFSCxLQUFLLENBQUUsQ0FBRSxDQUFDLEdBQUdYLGlDQUFpQyxJQUFLLElBQUksQ0FBQ0wsUUFBUSxDQUFDTyxNQUFPLENBQUUsQ0FBQyxFQUN6SG5ELGtCQUFrQixFQUNsQixJQUFJcEIsZUFBZSxDQUFFLENBQUUsSUFBSSxDQUFDK0UsVUFBVSxDQUFDSyxjQUFjLENBQUUsRUFBRVgsTUFBTSxJQUFJQSxNQUFNLENBQUNjLFlBQWEsQ0FBQyxFQUN4RmxFLG9CQUFvQixFQUFFO01BQ3BCbUMsU0FBUyxFQUFFLENBQUM7TUFDWkgsTUFBTSxFQUFFSixlQUFlLENBQUN1QyxLQUFLLENBQUM7SUFDaEMsQ0FDRixDQUFDO0lBRUQsSUFBSSxDQUFDNUQsUUFBUSxDQUFFLElBQUksQ0FBQzBELFNBQVUsQ0FBQztJQUMvQixJQUFJLENBQUMxRCxRQUFRLENBQUUsSUFBSSxDQUFDNkQsU0FBVSxDQUFDOztJQUUvQjtJQUNBM0MsVUFBVSxDQUFDNEMsb0JBQW9CLENBQUNwRCxJQUFJLENBQUVDLFFBQVEsSUFBSTtNQUNoRCxJQUFJLENBQUN5QixRQUFRLENBQUMyQixNQUFNLEdBQUdqRSxrQkFBa0IsQ0FBQ2UsbUJBQW1CLENBQUVGLFFBQVMsQ0FBQztJQUMzRSxDQUFFLENBQUM7SUFFSCxJQUFJLENBQUNHLGlCQUFpQixHQUFHLE1BQU07TUFDN0JJLFVBQVUsQ0FBQzRDLG9CQUFvQixDQUFDL0MsS0FBSyxHQUFHakIsa0JBQWtCLENBQUNrQixtQkFBbUIsQ0FBRSxJQUFJLENBQUNvQixRQUFRLENBQUMyQixNQUFPLENBQUM7TUFDdEcsSUFBSSxDQUFDYixVQUFVLENBQUNwQyxpQkFBaUIsQ0FBQyxDQUFDO01BQ25DLElBQUksQ0FBQ3FDLFVBQVUsQ0FBQ3JDLGlCQUFpQixDQUFDLENBQUM7SUFDckMsQ0FBQztJQUVELElBQUksQ0FBQ2QsUUFBUSxDQUFFLElBQUksQ0FBQ29DLFFBQVMsQ0FBQztJQUM5QixJQUFJLENBQUNwQyxRQUFRLENBQUUsSUFBSSxDQUFDa0QsVUFBVyxDQUFDO0lBQ2hDLElBQUksQ0FBQ2xELFFBQVEsQ0FBRSxJQUFJLENBQUNtRCxVQUFXLENBQUM7SUFFaEMsSUFBSSxDQUFDYSxzQkFBc0IsQ0FBQyxDQUFDO0lBRTdCLElBQUksQ0FBQ0MsTUFBTSxDQUFFOUMsZUFBZ0IsQ0FBQztFQUNoQzs7RUFFQTtBQUNGO0VBQ1M2QyxzQkFBc0JBLENBQUEsRUFBUztJQUNwQyxJQUFJLENBQUNkLFVBQVUsQ0FBQ2EsTUFBTSxHQUFHLElBQUksQ0FBQzNCLFFBQVEsQ0FBQzJCLE1BQU0sQ0FBQ1QsTUFBTSxDQUFFLEdBQUcsRUFBRSxFQUFHLENBQUM7SUFDL0QsSUFBSSxDQUFDSCxVQUFVLENBQUNZLE1BQU0sR0FBRyxJQUFJLENBQUNiLFVBQVUsQ0FBQ2EsTUFBTSxDQUFDVCxNQUFNLENBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFHLENBQUM7SUFDbEUsSUFBSSxDQUFDeEMsaUJBQWlCLENBQUMsQ0FBQztFQUMxQjtBQUNGO0FBRUE1QixZQUFZLENBQUNnRixRQUFRLENBQUUsZ0JBQWdCLEVBQUVqRCxjQUFlLENBQUM7QUFFekQsZUFBZUEsY0FBYyJ9