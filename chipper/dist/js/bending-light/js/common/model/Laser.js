// Copyright 2015-2023, University of Colorado Boulder

/**
 * Model for the laser, which emits LightRays.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Chandrashekar Bemagoni (Actual Concepts)
 */

import BooleanProperty from '../../../../axon/js/BooleanProperty.js';
import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import EnumerationProperty from '../../../../axon/js/EnumerationProperty.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import Vector2Property from '../../../../dot/js/Vector2Property.js';
import bendingLight from '../../bendingLight.js';
import BendingLightConstants from '../BendingLightConstants.js';
import LaserColor from './LaserColor.js';
import ColorModeEnum from './ColorModeEnum.js';
class Laser {
  // true if the laser is activated and emitting light

  // laser direction vector
  directionUnitVector = new Vector2(0, 0);

  // point to be pivoted about, and at which the laser points

  /**
   * @param wavelengthProperty - wavelength of light
   * @param distanceFromPivot - distance from laser pivot point
   * @param angle - laser angle
   * @param topLeftQuadrant - specifies whether laser in topLeftQuadrant
   */
  constructor(wavelengthProperty, distanceFromPivot, angle, topLeftQuadrant) {
    this.topLeftQuadrant = topLeftQuadrant;
    this.pivotProperty = new Vector2Property(new Vector2(0, 0));
    this.onProperty = new BooleanProperty(false);
    this.waveProperty = new BooleanProperty(false);
    this.colorModeProperty = new EnumerationProperty(ColorModeEnum.SINGLE_COLOR);

    // model the point where light comes out of the laser where the light comes from
    this.emissionPointProperty = new Vector2Property(Vector2.createPolar(distanceFromPivot, angle));
    this.colorProperty = new DerivedProperty([wavelengthProperty], wavelength => new LaserColor(wavelength));
    this.wavelengthProperty = wavelengthProperty;
    this.waveProperty.link(() => {
      // prevent laser from going to 90 degrees when in wave mode, should go until laser bumps into edge.
      if (this.waveProperty.value && this.getAngle() > BendingLightConstants.MAX_ANGLE_IN_WAVE_MODE && topLeftQuadrant) {
        this.setAngle(BendingLightConstants.MAX_ANGLE_IN_WAVE_MODE);
      }
    });
  }

  // Restore to initial values.
  reset() {
    this.pivotProperty.reset();
    this.onProperty.reset();
    this.waveProperty.reset();
    this.colorModeProperty.reset();
    this.emissionPointProperty.reset();
  }

  /**
   * Translate the laser in model
   * @param deltaX - amount of space in x direction laser to be translated
   * @param deltaY - amount of space in y direction laser to be translated
   */
  translate(deltaX, deltaY) {
    // Caution -- For reasons unknown to @samreid, if the order of the following instructions is switched, the
    // laser will rotate while being dragged, see #221
    this.pivotProperty.value = this.pivotProperty.value.plusXY(deltaX, deltaY);
    this.emissionPointProperty.value = this.emissionPointProperty.value.plusXY(deltaX, deltaY);
  }

  /**
   * Determines the unit vector of light ray
   */
  getDirectionUnitVector() {
    const magnitude = this.pivotProperty.value.distance(this.emissionPointProperty.value);
    this.directionUnitVector.x = (this.pivotProperty.value.x - this.emissionPointProperty.value.x) / magnitude;
    this.directionUnitVector.y = (this.pivotProperty.value.y - this.emissionPointProperty.value.y) / magnitude;
    return this.directionUnitVector;
  }

  /**
   * Rotate about the fixed pivot
   * @param angle - angle to be rotated
   */
  setAngle(angle) {
    const distFromPivot = this.pivotProperty.value.distance(this.emissionPointProperty.value);
    this.emissionPointProperty.value = new Vector2(distFromPivot * Math.cos(angle) + this.pivotProperty.value.x, distFromPivot * Math.sin(angle) + this.pivotProperty.value.y);
  }

  /**
   * Determines the angle of the laser
   */
  getAngle() {
    return this.getDirectionUnitVector().angle + Math.PI;
  }

  /**
   * Determines the distance of laser from pivot point
   */
  getDistanceFromPivot() {
    return this.pivotProperty.value.distance(this.emissionPointProperty.value);
  }

  /**
   * Determines the wavelength of the laser
   */
  getWavelength() {
    return this.colorProperty.get().wavelength;
  }

  /**
   * Determines the wavelength of the laser
   */
  getFrequency() {
    return BendingLightConstants.SPEED_OF_LIGHT / this.getWavelength();
  }
}
bendingLight.register('Laser', Laser);
export default Laser;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb29sZWFuUHJvcGVydHkiLCJEZXJpdmVkUHJvcGVydHkiLCJFbnVtZXJhdGlvblByb3BlcnR5IiwiVmVjdG9yMiIsIlZlY3RvcjJQcm9wZXJ0eSIsImJlbmRpbmdMaWdodCIsIkJlbmRpbmdMaWdodENvbnN0YW50cyIsIkxhc2VyQ29sb3IiLCJDb2xvck1vZGVFbnVtIiwiTGFzZXIiLCJkaXJlY3Rpb25Vbml0VmVjdG9yIiwiY29uc3RydWN0b3IiLCJ3YXZlbGVuZ3RoUHJvcGVydHkiLCJkaXN0YW5jZUZyb21QaXZvdCIsImFuZ2xlIiwidG9wTGVmdFF1YWRyYW50IiwicGl2b3RQcm9wZXJ0eSIsIm9uUHJvcGVydHkiLCJ3YXZlUHJvcGVydHkiLCJjb2xvck1vZGVQcm9wZXJ0eSIsIlNJTkdMRV9DT0xPUiIsImVtaXNzaW9uUG9pbnRQcm9wZXJ0eSIsImNyZWF0ZVBvbGFyIiwiY29sb3JQcm9wZXJ0eSIsIndhdmVsZW5ndGgiLCJsaW5rIiwidmFsdWUiLCJnZXRBbmdsZSIsIk1BWF9BTkdMRV9JTl9XQVZFX01PREUiLCJzZXRBbmdsZSIsInJlc2V0IiwidHJhbnNsYXRlIiwiZGVsdGFYIiwiZGVsdGFZIiwicGx1c1hZIiwiZ2V0RGlyZWN0aW9uVW5pdFZlY3RvciIsIm1hZ25pdHVkZSIsImRpc3RhbmNlIiwieCIsInkiLCJkaXN0RnJvbVBpdm90IiwiTWF0aCIsImNvcyIsInNpbiIsIlBJIiwiZ2V0RGlzdGFuY2VGcm9tUGl2b3QiLCJnZXRXYXZlbGVuZ3RoIiwiZ2V0IiwiZ2V0RnJlcXVlbmN5IiwiU1BFRURfT0ZfTElHSFQiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkxhc2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE1LTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIE1vZGVsIGZvciB0aGUgbGFzZXIsIHdoaWNoIGVtaXRzIExpZ2h0UmF5cy5cclxuICpcclxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICogQGF1dGhvciBDaGFuZHJhc2hla2FyIEJlbWFnb25pIChBY3R1YWwgQ29uY2VwdHMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IEJvb2xlYW5Qcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL0Jvb2xlYW5Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBEZXJpdmVkUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9EZXJpdmVkUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgRW51bWVyYXRpb25Qcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL0VudW1lcmF0aW9uUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgVFJlYWRPbmx5UHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9UUmVhZE9ubHlQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1Byb3BlcnR5LmpzJztcclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgVmVjdG9yMlByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9WZWN0b3IyUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgYmVuZGluZ0xpZ2h0IGZyb20gJy4uLy4uL2JlbmRpbmdMaWdodC5qcyc7XHJcbmltcG9ydCBCZW5kaW5nTGlnaHRDb25zdGFudHMgZnJvbSAnLi4vQmVuZGluZ0xpZ2h0Q29uc3RhbnRzLmpzJztcclxuaW1wb3J0IExhc2VyQ29sb3IgZnJvbSAnLi9MYXNlckNvbG9yLmpzJztcclxuaW1wb3J0IENvbG9yTW9kZUVudW0gZnJvbSAnLi9Db2xvck1vZGVFbnVtLmpzJztcclxuXHJcbmNsYXNzIExhc2VyIHtcclxuICBwdWJsaWMgcmVhZG9ubHkgdG9wTGVmdFF1YWRyYW50OiBib29sZWFuO1xyXG5cclxuICAvLyB0cnVlIGlmIHRoZSBsYXNlciBpcyBhY3RpdmF0ZWQgYW5kIGVtaXR0aW5nIGxpZ2h0XHJcbiAgcHVibGljIHJlYWRvbmx5IG9uUHJvcGVydHk6IFByb3BlcnR5PGJvb2xlYW4+O1xyXG4gIHB1YmxpYyByZWFkb25seSB3YXZlUHJvcGVydHk6IFByb3BlcnR5PGJvb2xlYW4+O1xyXG4gIHB1YmxpYyByZWFkb25seSBjb2xvck1vZGVQcm9wZXJ0eTogRW51bWVyYXRpb25Qcm9wZXJ0eTxDb2xvck1vZGVFbnVtPjtcclxuICBwdWJsaWMgcmVhZG9ubHkgZW1pc3Npb25Qb2ludFByb3BlcnR5OiBQcm9wZXJ0eTxWZWN0b3IyPjtcclxuICBwdWJsaWMgcmVhZG9ubHkgY29sb3JQcm9wZXJ0eTogVFJlYWRPbmx5UHJvcGVydHk8TGFzZXJDb2xvcj47XHJcbiAgcHVibGljIHJlYWRvbmx5IHdhdmVsZW5ndGhQcm9wZXJ0eTogUHJvcGVydHk8bnVtYmVyPjtcclxuXHJcbiAgLy8gbGFzZXIgZGlyZWN0aW9uIHZlY3RvclxyXG4gIHByaXZhdGUgcmVhZG9ubHkgZGlyZWN0aW9uVW5pdFZlY3RvcjogVmVjdG9yMiA9IG5ldyBWZWN0b3IyKCAwLCAwICk7XHJcblxyXG4gIC8vIHBvaW50IHRvIGJlIHBpdm90ZWQgYWJvdXQsIGFuZCBhdCB3aGljaCB0aGUgbGFzZXIgcG9pbnRzXHJcbiAgcHVibGljIHJlYWRvbmx5IHBpdm90UHJvcGVydHk6IFZlY3RvcjJQcm9wZXJ0eTtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHdhdmVsZW5ndGhQcm9wZXJ0eSAtIHdhdmVsZW5ndGggb2YgbGlnaHRcclxuICAgKiBAcGFyYW0gZGlzdGFuY2VGcm9tUGl2b3QgLSBkaXN0YW5jZSBmcm9tIGxhc2VyIHBpdm90IHBvaW50XHJcbiAgICogQHBhcmFtIGFuZ2xlIC0gbGFzZXIgYW5nbGVcclxuICAgKiBAcGFyYW0gdG9wTGVmdFF1YWRyYW50IC0gc3BlY2lmaWVzIHdoZXRoZXIgbGFzZXIgaW4gdG9wTGVmdFF1YWRyYW50XHJcbiAgICovXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCB3YXZlbGVuZ3RoUHJvcGVydHk6IFByb3BlcnR5PG51bWJlcj4sIGRpc3RhbmNlRnJvbVBpdm90OiBudW1iZXIsIGFuZ2xlOiBudW1iZXIsIHRvcExlZnRRdWFkcmFudDogYm9vbGVhbiApIHtcclxuXHJcbiAgICB0aGlzLnRvcExlZnRRdWFkcmFudCA9IHRvcExlZnRRdWFkcmFudDtcclxuICAgIHRoaXMucGl2b3RQcm9wZXJ0eSA9IG5ldyBWZWN0b3IyUHJvcGVydHkoIG5ldyBWZWN0b3IyKCAwLCAwICkgKTtcclxuICAgIHRoaXMub25Qcm9wZXJ0eSA9IG5ldyBCb29sZWFuUHJvcGVydHkoIGZhbHNlICk7XHJcbiAgICB0aGlzLndhdmVQcm9wZXJ0eSA9IG5ldyBCb29sZWFuUHJvcGVydHkoIGZhbHNlICk7XHJcbiAgICB0aGlzLmNvbG9yTW9kZVByb3BlcnR5ID0gbmV3IEVudW1lcmF0aW9uUHJvcGVydHkoIENvbG9yTW9kZUVudW0uU0lOR0xFX0NPTE9SICk7XHJcblxyXG4gICAgLy8gbW9kZWwgdGhlIHBvaW50IHdoZXJlIGxpZ2h0IGNvbWVzIG91dCBvZiB0aGUgbGFzZXIgd2hlcmUgdGhlIGxpZ2h0IGNvbWVzIGZyb21cclxuICAgIHRoaXMuZW1pc3Npb25Qb2ludFByb3BlcnR5ID0gbmV3IFZlY3RvcjJQcm9wZXJ0eSggVmVjdG9yMi5jcmVhdGVQb2xhciggZGlzdGFuY2VGcm9tUGl2b3QsIGFuZ2xlICkgKTtcclxuICAgIHRoaXMuY29sb3JQcm9wZXJ0eSA9IG5ldyBEZXJpdmVkUHJvcGVydHkoIFsgd2F2ZWxlbmd0aFByb3BlcnR5IF0sIHdhdmVsZW5ndGggPT4gbmV3IExhc2VyQ29sb3IoIHdhdmVsZW5ndGggKSApO1xyXG4gICAgdGhpcy53YXZlbGVuZ3RoUHJvcGVydHkgPSB3YXZlbGVuZ3RoUHJvcGVydHk7XHJcblxyXG4gICAgdGhpcy53YXZlUHJvcGVydHkubGluayggKCkgPT4ge1xyXG5cclxuICAgICAgLy8gcHJldmVudCBsYXNlciBmcm9tIGdvaW5nIHRvIDkwIGRlZ3JlZXMgd2hlbiBpbiB3YXZlIG1vZGUsIHNob3VsZCBnbyB1bnRpbCBsYXNlciBidW1wcyBpbnRvIGVkZ2UuXHJcbiAgICAgIGlmICggdGhpcy53YXZlUHJvcGVydHkudmFsdWUgJiYgdGhpcy5nZXRBbmdsZSgpID4gQmVuZGluZ0xpZ2h0Q29uc3RhbnRzLk1BWF9BTkdMRV9JTl9XQVZFX01PREUgJiYgdG9wTGVmdFF1YWRyYW50ICkge1xyXG4gICAgICAgIHRoaXMuc2V0QW5nbGUoIEJlbmRpbmdMaWdodENvbnN0YW50cy5NQVhfQU5HTEVfSU5fV0FWRV9NT0RFICk7XHJcbiAgICAgIH1cclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIC8vIFJlc3RvcmUgdG8gaW5pdGlhbCB2YWx1ZXMuXHJcbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5waXZvdFByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICB0aGlzLm9uUHJvcGVydHkucmVzZXQoKTtcclxuICAgIHRoaXMud2F2ZVByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICB0aGlzLmNvbG9yTW9kZVByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICB0aGlzLmVtaXNzaW9uUG9pbnRQcm9wZXJ0eS5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVHJhbnNsYXRlIHRoZSBsYXNlciBpbiBtb2RlbFxyXG4gICAqIEBwYXJhbSBkZWx0YVggLSBhbW91bnQgb2Ygc3BhY2UgaW4geCBkaXJlY3Rpb24gbGFzZXIgdG8gYmUgdHJhbnNsYXRlZFxyXG4gICAqIEBwYXJhbSBkZWx0YVkgLSBhbW91bnQgb2Ygc3BhY2UgaW4geSBkaXJlY3Rpb24gbGFzZXIgdG8gYmUgdHJhbnNsYXRlZFxyXG4gICAqL1xyXG4gIHB1YmxpYyB0cmFuc2xhdGUoIGRlbHRhWDogbnVtYmVyLCBkZWx0YVk6IG51bWJlciApOiB2b2lkIHtcclxuXHJcbiAgICAvLyBDYXV0aW9uIC0tIEZvciByZWFzb25zIHVua25vd24gdG8gQHNhbXJlaWQsIGlmIHRoZSBvcmRlciBvZiB0aGUgZm9sbG93aW5nIGluc3RydWN0aW9ucyBpcyBzd2l0Y2hlZCwgdGhlXHJcbiAgICAvLyBsYXNlciB3aWxsIHJvdGF0ZSB3aGlsZSBiZWluZyBkcmFnZ2VkLCBzZWUgIzIyMVxyXG4gICAgdGhpcy5waXZvdFByb3BlcnR5LnZhbHVlID0gdGhpcy5waXZvdFByb3BlcnR5LnZhbHVlLnBsdXNYWSggZGVsdGFYLCBkZWx0YVkgKTtcclxuICAgIHRoaXMuZW1pc3Npb25Qb2ludFByb3BlcnR5LnZhbHVlID0gdGhpcy5lbWlzc2lvblBvaW50UHJvcGVydHkudmFsdWUucGx1c1hZKCBkZWx0YVgsIGRlbHRhWSApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRGV0ZXJtaW5lcyB0aGUgdW5pdCB2ZWN0b3Igb2YgbGlnaHQgcmF5XHJcbiAgICovXHJcbiAgcHVibGljIGdldERpcmVjdGlvblVuaXRWZWN0b3IoKTogVmVjdG9yMiB7XHJcbiAgICBjb25zdCBtYWduaXR1ZGUgPSB0aGlzLnBpdm90UHJvcGVydHkudmFsdWUuZGlzdGFuY2UoIHRoaXMuZW1pc3Npb25Qb2ludFByb3BlcnR5LnZhbHVlICk7XHJcbiAgICB0aGlzLmRpcmVjdGlvblVuaXRWZWN0b3IueCA9ICggdGhpcy5waXZvdFByb3BlcnR5LnZhbHVlLnggLSB0aGlzLmVtaXNzaW9uUG9pbnRQcm9wZXJ0eS52YWx1ZS54ICkgLyBtYWduaXR1ZGU7XHJcbiAgICB0aGlzLmRpcmVjdGlvblVuaXRWZWN0b3IueSA9ICggdGhpcy5waXZvdFByb3BlcnR5LnZhbHVlLnkgLSB0aGlzLmVtaXNzaW9uUG9pbnRQcm9wZXJ0eS52YWx1ZS55ICkgLyBtYWduaXR1ZGU7XHJcbiAgICByZXR1cm4gdGhpcy5kaXJlY3Rpb25Vbml0VmVjdG9yO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUm90YXRlIGFib3V0IHRoZSBmaXhlZCBwaXZvdFxyXG4gICAqIEBwYXJhbSBhbmdsZSAtIGFuZ2xlIHRvIGJlIHJvdGF0ZWRcclxuICAgKi9cclxuICBwdWJsaWMgc2V0QW5nbGUoIGFuZ2xlOiBudW1iZXIgKTogdm9pZCB7XHJcbiAgICBjb25zdCBkaXN0RnJvbVBpdm90ID0gdGhpcy5waXZvdFByb3BlcnR5LnZhbHVlLmRpc3RhbmNlKCB0aGlzLmVtaXNzaW9uUG9pbnRQcm9wZXJ0eS52YWx1ZSApO1xyXG4gICAgdGhpcy5lbWlzc2lvblBvaW50UHJvcGVydHkudmFsdWUgPSBuZXcgVmVjdG9yMihcclxuICAgICAgZGlzdEZyb21QaXZvdCAqIE1hdGguY29zKCBhbmdsZSApICsgdGhpcy5waXZvdFByb3BlcnR5LnZhbHVlLngsXHJcbiAgICAgIGRpc3RGcm9tUGl2b3QgKiBNYXRoLnNpbiggYW5nbGUgKSArIHRoaXMucGl2b3RQcm9wZXJ0eS52YWx1ZS55XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRGV0ZXJtaW5lcyB0aGUgYW5nbGUgb2YgdGhlIGxhc2VyXHJcbiAgICovXHJcbiAgcHVibGljIGdldEFuZ2xlKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5nZXREaXJlY3Rpb25Vbml0VmVjdG9yKCkuYW5nbGUgKyBNYXRoLlBJO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRGV0ZXJtaW5lcyB0aGUgZGlzdGFuY2Ugb2YgbGFzZXIgZnJvbSBwaXZvdCBwb2ludFxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXREaXN0YW5jZUZyb21QaXZvdCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMucGl2b3RQcm9wZXJ0eS52YWx1ZS5kaXN0YW5jZSggdGhpcy5lbWlzc2lvblBvaW50UHJvcGVydHkudmFsdWUgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERldGVybWluZXMgdGhlIHdhdmVsZW5ndGggb2YgdGhlIGxhc2VyXHJcbiAgICovXHJcbiAgcHVibGljIGdldFdhdmVsZW5ndGgoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLmNvbG9yUHJvcGVydHkuZ2V0KCkud2F2ZWxlbmd0aDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERldGVybWluZXMgdGhlIHdhdmVsZW5ndGggb2YgdGhlIGxhc2VyXHJcbiAgICovXHJcbiAgcHVibGljIGdldEZyZXF1ZW5jeSgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIEJlbmRpbmdMaWdodENvbnN0YW50cy5TUEVFRF9PRl9MSUdIVCAvIHRoaXMuZ2V0V2F2ZWxlbmd0aCgpO1xyXG4gIH1cclxufVxyXG5cclxuYmVuZGluZ0xpZ2h0LnJlZ2lzdGVyKCAnTGFzZXInLCBMYXNlciApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgTGFzZXI7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsZUFBZSxNQUFNLHdDQUF3QztBQUNwRSxPQUFPQyxlQUFlLE1BQU0sd0NBQXdDO0FBQ3BFLE9BQU9DLG1CQUFtQixNQUFNLDRDQUE0QztBQUc1RSxPQUFPQyxPQUFPLE1BQU0sK0JBQStCO0FBQ25ELE9BQU9DLGVBQWUsTUFBTSx1Q0FBdUM7QUFDbkUsT0FBT0MsWUFBWSxNQUFNLHVCQUF1QjtBQUNoRCxPQUFPQyxxQkFBcUIsTUFBTSw2QkFBNkI7QUFDL0QsT0FBT0MsVUFBVSxNQUFNLGlCQUFpQjtBQUN4QyxPQUFPQyxhQUFhLE1BQU0sb0JBQW9CO0FBRTlDLE1BQU1DLEtBQUssQ0FBQztFQUdWOztFQVFBO0VBQ2lCQyxtQkFBbUIsR0FBWSxJQUFJUCxPQUFPLENBQUUsQ0FBQyxFQUFFLENBQUUsQ0FBQzs7RUFFbkU7O0VBR0E7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ1NRLFdBQVdBLENBQUVDLGtCQUFvQyxFQUFFQyxpQkFBeUIsRUFBRUMsS0FBYSxFQUFFQyxlQUF3QixFQUFHO0lBRTdILElBQUksQ0FBQ0EsZUFBZSxHQUFHQSxlQUFlO0lBQ3RDLElBQUksQ0FBQ0MsYUFBYSxHQUFHLElBQUlaLGVBQWUsQ0FBRSxJQUFJRCxPQUFPLENB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