// Copyright 2020-2023, University of Colorado Boulder

/**
 * Shows the main controls, including frequency/wavelength and amplitude.
 *
 * @author Todd Holden (https://tholden79.wixsite.com/mysite2)
 */

import Dimension2 from '../../../../dot/js/Dimension2.js';
import Range from '../../../../dot/js/Range.js';
import Utils from '../../../../dot/js/Utils.js';
import { Shape } from '../../../../kite/js/imports.js';
import merge from '../../../../phet-core/js/merge.js';
import StringUtils from '../../../../phetcommon/js/util/StringUtils.js';
import NumberControl from '../../../../scenery-phet/js/NumberControl.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { HBox, HSeparator, Node, Path, Text, VBox } from '../../../../scenery/js/imports.js';
import AccordionBox from '../../../../sun/js/AccordionBox.js';
import RectangularRadioButtonGroup from '../../../../sun/js/buttons/RectangularRadioButtonGroup.js';
import Checkbox from '../../../../sun/js/Checkbox.js';
import Panel from '../../../../sun/js/Panel.js';
import xrayDiffraction from '../../xrayDiffraction.js';
import XrayDiffractionStrings from '../../XrayDiffractionStrings.js';

// strings
const angleUnitString = XrayDiffractionStrings.angleUnit;
const aLatticeEqualsString = XrayDiffractionStrings.aLatticeEquals;
const bdLatticeEqualsString = XrayDiffractionStrings.bdLatticeEquals;
const horizontalRaysString = XrayDiffractionStrings.horizontalRays;
const incidentAngleString = XrayDiffractionStrings.incidentAngle;
const lengthUnitString = XrayDiffractionStrings.lengthUnit;
const moreParametersString = XrayDiffractionStrings.moreParameters;
const pathDifferenceString = XrayDiffractionStrings.pathDifference;
const showTransmittedString = XrayDiffractionStrings.showTransmitted;
const verticalRaysString = XrayDiffractionStrings.verticalRays;
const wavefrontsMarkersString = XrayDiffractionStrings.waveFrontMarkers;
const wavelengthString = XrayDiffractionStrings.wavelength;
const TEXT_OPTIONS = {
  font: new PhetFont({
    family: 'Verdana',
    size: 14
  }),
  maxWidth: 200,
  align: 'center',
  setBoundsMethod: 'accurate'
};
const SLIDER_OPTIONS = {
  trackSize: new Dimension2(90, 1),
  thumbSize: new Dimension2(13, 22)
};
const Y_SPACING = 7;
class XrayControlPanel extends VBox {
  /**
   * @param {XrayDiffractionModel} model
   * @param {Node} timeControlNode
   * @param {Object} [options]
   */

  constructor(model, timeControlNode, options) {
    options = merge({
      xMargin: 15,
      yMargin: 8,
      fill: '#F0F0F0',
      stroke: 'gray',
      lineWidth: 1,
      cornerRadius: 6
    }, options);

    // We are manually controlling the title and the number rather than the built in NumberControl functionality so that
    // we can convert from radians to degrees and accomodate right-to-left languages.
    const angleTitle = new Text('?', TEXT_OPTIONS);
    // Links the current angle and converts it to degrees
    const angleControl = new NumberControl(angleTitle.string, model.sourceAngleProperty, new Range(0, Math.PI / 2), {
      delta: Math.PI / 900,
      // 0.2 degree resolution
      sliderOptions: SLIDER_OPTIONS,
      layoutFunction: createControlLayoutFunction(angleTitle)
    });
    model.sourceAngleProperty.link(angle => {
      angleTitle.string = StringUtils.fillIn(incidentAngleString, {
        value: Utils.toFixed(angle * 180 / Math.PI, 1),
        unit: angleUnitString
      });
    });

    // Control for the wavelength
    const wavelengthTitle = new Text('?', TEXT_OPTIONS);
    const wavelengthControl = new NumberControl('?', model.sourceWavelengthProperty, new Range(1, 20), {
      delta: 0.1,
      // 0.1 Angstrom resolution
      sliderOptions: SLIDER_OPTIONS,
      layoutFunction: createControlLayoutFunction(wavelengthTitle)
    });
    model.sourceWavelengthProperty.link(wavelength => {
      wavelengthTitle.string = StringUtils.fillIn(wavelengthString, {
        value: wavelength,
        unit: lengthUnitString
      });
    });

    // Control for the b lattice constant (= interplane distance for this orientation)
    const bLatticeTitle = new Text('?', TEXT_OPTIONS);
    const bLatticeControl = new NumberControl('?', model.lattice.cConstantProperty, new Range(2, 20), {
      delta: 0.1,
      // 0.1 Angstrom resolution
      sliderOptions: SLIDER_OPTIONS,
      layoutFunction: createControlLayoutFunction(bLatticeTitle)
    });
    model.lattice.cConstantProperty.link(constant => {
      bLatticeTitle.string = StringUtils.fillIn(bdLatticeEqualsString, {
        value: constant,
        unit: XrayDiffractionStrings.lengthUnit
      });
    });

    // Control for the a lattice constant
    const aLatticeTitle = new Text('?', TEXT_OPTIONS);
    model.lattice.aConstantProperty.link(constant => {
      aLatticeTitle.string = StringUtils.fillIn(aLatticeEqualsString, {
        value: constant,
        unit: XrayDiffractionStrings.lengthUnit
      });
    });
    const aLatticeControl = new NumberControl(aLatticeTitle.string, model.lattice.aConstantProperty, new Range(2, 20), {
      delta: 0.1,
      // 0.1 Angstrom resolution
      sliderOptions: SLIDER_OPTIONS,
      layoutFunction: createControlLayoutFunction(aLatticeTitle)
    });
    model.lattice.aConstantProperty.link(constant => {
      aLatticeTitle.string = StringUtils.fillIn(aLatticeEqualsString, {
        value: constant,
        unit: XrayDiffractionStrings.lengthUnit
      });
    });

    // Control for number of vertical rays
    const verticalControl = new NumberControl('?', model.verticalRaysProperty, new Range(1, 5), {
      delta: 1,
      // interger number of rays
      sliderOptions: SLIDER_OPTIONS,
      layoutFunction: createControlLayoutFunction(new Text(verticalRaysString, TEXT_OPTIONS))
    });

    // Control for number of horizontal rays
    const horizontalControl = new NumberControl('?', model.horizontalRaysProperty, new Range(0, 2), {
      delta: 1,
      // interger number of rays
      sliderOptions: SLIDER_OPTIONS,
      layoutFunction: createControlLayoutFunction(new Text(horizontalRaysString, TEXT_OPTIONS))
    });
    const wavefrontRadioContent = [
    // value set to color iterator used by LightPathNode or 'none' for no wavefronts
    {
      value: 'none',
      createNode: () => createLines(() => 'transparent')
    }, {
      value: () => 'black',
      createNode: () => createLines(() => 'black')
    }, {
      value: i => `hsl(0, 0%, ${40 * ((i % 3 + 3) % 3)}%)`,
      createNode: () => createLines(i => `hsl(0, 0%, ${40 * ((i % 3 + 3) % 3)}%)`) // three levels, 0,40,80
    }, {
      value: i => `hsl(${(60 * i % 360 + 360) % 360}, 100%, 50%)`,
      createNode: () => createLines(i => `hsl(${(60 * i % 360 + 360) % 360}, 100%, 50%)`) // 60*i gives 6 different colors ),
    }];

    const wavefrontRadioButtonGroup = new RectangularRadioButtonGroup(model.wavefrontProperty, wavefrontRadioContent, {
      orientation: 'horizontal',
      radioButtonOptions: {
        cornerRadius: 5,
        baseColor: 'white',
        buttonAppearanceStrategyOptions: {
          selectedLineWidth: 1,
          selectedStroke: 'black',
          deselectedLineWidth: 0,
          deselectedContentOpacity: 1
        }
      }
    });
    const pathDifferenceCheckbox = new Checkbox(model.pathDifferenceProperty, new Text(pathDifferenceString, TEXT_OPTIONS), {
      boxWidth: 15
    });
    const showTransmittedCheckbox = new Checkbox(model.showTransmittedProperty, new Text(showTransmittedString, TEXT_OPTIONS), {
      boxWidth: 15
    });
    const waveFrontMarkersTitle = new Text(wavefrontsMarkersString, TEXT_OPTIONS);
    const waveFrontGroup = new VBox({
      align: 'left',
      children: [waveFrontMarkersTitle, wavefrontRadioButtonGroup],
      spacing: Y_SPACING
    });
    const separator = new HSeparator();
    const separator2 = new HSeparator();

    // Set pointer areas for the checkboxes, now that we have the separator dimensions.
    pathDifferenceCheckbox.mouseArea = pathDifferenceCheckbox.localBounds.dilated(2).withX(separator.right);
    pathDifferenceCheckbox.touchArea = pathDifferenceCheckbox.mouseArea;
    showTransmittedCheckbox.mouseArea = showTransmittedCheckbox.localBounds.dilated(2).withX(separator.right);
    showTransmittedCheckbox.touchArea = showTransmittedCheckbox.mouseArea;

    // main control panel. Items can easily be rearranged here. Use Panel if you have to set a width inside a VBox.
    const content = new VBox({
      align: 'left',
      children: [angleControl, wavelengthControl, bLatticeControl, separator, pathDifferenceCheckbox, showTransmittedCheckbox, separator2, waveFrontGroup],
      spacing: Y_SPACING
    });
    const mainContent = new Panel(content, options);

    // optional controls hidden in an accordian box
    const optionalParameters = new VBox({
      align: 'left',
      children: [aLatticeControl, verticalControl, horizontalControl],
      spacing: Y_SPACING
    });
    const accordianOptional = new AccordionBox(optionalParameters, merge({
      titleNode: new Text(moreParametersString, TEXT_OPTIONS),
      minWidth: mainContent.width,
      expandedProperty: model.moreParmsExpandedProperty,
      showTitleWhenExpanded: true
    }, options));
    super({
      children: [mainContent, timeControlNode, accordianOptional],
      spacing: 2 * Y_SPACING,
      align: 'left'
    });
  }
}

/**
 * Creates a layout functions that can be used for options.layoutFunction. Sends in a titleTextNode so we can change it later.
 * Arranges subcomponents like this:
 *
 *        title
 *  < ------|------ >
 *
 * @param {Node} titleTextNode
 * @param {Object} [options]
 * @returns {function}
 * @public
 * @static
 */
function createControlLayoutFunction(titleTextNode, options) {
  return (titleNode, numberDisplay, slider, leftArrowButton, rightArrowButton) => {
    return new VBox({
      spacing: 2,
      children: [titleTextNode, new HBox({
        spacing: 2,
        resize: false,
        // prevent slider from causing a resize when thumb is at min or max
        children: [leftArrowButton, slider, rightArrowButton]
      })]
    });
  };
}

/**
 * Creates lines symbols for wavefront markers radioButton.
 *
 * @param {function} interationFunction
 * @returns {Node}
 * @public
 * @static
 */
function createLines(interationFunction) {
  const height = 20; // arbitrary size of icon. set by hand
  const spacing = height / 4; // square icon for 4 wavefronts. set by hand
  const linesNode = new Node();
  for (let i = 0; i < 4; i++) {
    linesNode.addChild(new Path(Shape.lineSegment(i * spacing, 0, i * spacing, height), {
      stroke: interationFunction(i),
      // defines the color/shading patterns
      lineWidth: 3 // arbitrary linewidth for the icon
    }));
  }

  return linesNode;
}
xrayDiffraction.register('XrayControlPanel', XrayControlPanel);
export default XrayControlPanel;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEaW1lbnNpb24yIiwiUmFuZ2UiLCJVdGlscyIsIlNoYXBlIiwibWVyZ2UiLCJTdHJpbmdVdGlscyIsIk51bWJlckNvbnRyb2wiLCJQaGV0Rm9udCIsIkhCb3giLCJIU2VwYXJhdG9yIiwiTm9kZSIsIlBhdGgiLCJUZXh0IiwiVkJveCIsIkFjY29yZGlvbkJveCIsIlJlY3Rhbmd1bGFyUmFkaW9CdXR0b25Hcm91cCIsIkNoZWNrYm94IiwiUGFuZWwiLCJ4cmF5RGlmZnJhY3Rpb24iLCJYcmF5RGlmZnJhY3Rpb25TdHJpbmdzIiwiYW5nbGVVbml0U3RyaW5nIiwiYW5nbGVVbml0IiwiYUxhdHRpY2VFcXVhbHNTdHJpbmciLCJhTGF0dGljZUVxdWFscyIsImJkTGF0dGljZUVxdWFsc1N0cmluZyIsImJkTGF0dGljZUVxdWFscyIsImhvcml6b250YWxSYXlzU3RyaW5nIiwiaG9yaXpvbnRhbFJheXMiLCJpbmNpZGVudEFuZ2xlU3RyaW5nIiwiaW5jaWRlbnRBbmdsZSIsImxlbmd0aFVuaXRTdHJpbmciLCJsZW5ndGhVbml0IiwibW9yZVBhcmFtZXRlcnNTdHJpbmciLCJtb3JlUGFyYW1ldGVycyIsInBhdGhEaWZmZXJlbmNlU3RyaW5nIiwicGF0aERpZmZlcmVuY2UiLCJzaG93VHJhbnNtaXR0ZWRTdHJpbmciLCJzaG93VHJhbnNtaXR0ZWQiLCJ2ZXJ0aWNhbFJheXNTdHJpbmciLCJ2ZXJ0aWNhbFJheXMiLCJ3YXZlZnJvbnRzTWFya2Vyc1N0cmluZyIsIndhdmVGcm9udE1hcmtlcnMiLCJ3YXZlbGVuZ3RoU3RyaW5nIiwid2F2ZWxlbmd0aCIsIlRFWFRfT1BUSU9OUyIsImZvbnQiLCJmYW1pbHkiLCJzaXplIiwibWF4V2lkdGgiLCJhbGlnbiIsInNldEJvdW5kc01ldGhvZCIsIlNMSURFUl9PUFRJT05TIiwidHJhY2tTaXplIiwidGh1bWJTaXplIiwiWV9TUEFDSU5HIiwiWHJheUNvbnRyb2xQYW5lbCIsImNvbnN0cnVjdG9yIiwibW9kZWwiLCJ0aW1lQ29udHJvbE5vZGUiLCJvcHRpb25zIiwieE1hcmdpbiIsInlNYXJnaW4iLCJmaWxsIiwic3Ryb2tlIiwibGluZVdpZHRoIiwiY29ybmVyUmFkaXVzIiwiYW5nbGVUaXRsZSIsImFuZ2xlQ29udHJvbCIsInN0cmluZyIsInNvdXJjZUFuZ2xlUHJvcGVydHkiLCJNYXRoIiwiUEkiLCJkZWx0YSIsInNsaWRlck9wdGlvbnMiLCJsYXlvdXRGdW5jdGlvbiIsImNyZWF0ZUNvbnRyb2xMYXlvdXRGdW5jdGlvbiIsImxpbmsiLCJhbmdsZSIsImZpbGxJbiIsInZhbHVlIiwidG9GaXhlZCIsInVuaXQiLCJ3YXZlbGVuZ3RoVGl0bGUiLCJ3YXZlbGVuZ3RoQ29udHJvbCIsInNvdXJjZVdhdmVsZW5ndGhQcm9wZXJ0eSIsImJMYXR0aWNlVGl0bGUiLCJiTGF0dGljZUNvbnRyb2wiLCJsYXR0aWNlIiwiY0NvbnN0YW50UHJvcGVydHkiLCJjb25zdGFudCIsImFMYXR0aWNlVGl0bGUiLCJhQ29uc3RhbnRQcm9wZXJ0eSIsImFMYXR0aWNlQ29udHJvbCIsInZlcnRpY2FsQ29udHJvbCIsInZlcnRpY2FsUmF5c1Byb3BlcnR5IiwiaG9yaXpvbnRhbENvbnRyb2wiLCJob3Jpem9udGFsUmF5c1Byb3BlcnR5Iiwid2F2ZWZyb250UmFkaW9Db250ZW50IiwiY3JlYXRlTm9kZSIsImNyZWF0ZUxpbmVzIiwiaSIsIndhdmVmcm9udFJhZGlvQnV0dG9uR3JvdXAiLCJ3YXZlZnJvbnRQcm9wZXJ0eSIsIm9yaWVudGF0aW9uIiwicmFkaW9CdXR0b25PcHRpb25zIiwiYmFzZUNvbG9yIiwiYnV0dG9uQXBwZWFyYW5jZVN0cmF0ZWd5T3B0aW9ucyIsInNlbGVjdGVkTGluZVdpZHRoIiwic2VsZWN0ZWRTdHJva2UiLCJkZXNlbGVjdGVkTGluZVdpZHRoIiwiZGVzZWxlY3RlZENvbnRlbnRPcGFjaXR5IiwicGF0aERpZmZlcmVuY2VDaGVja2JveCIsInBhdGhEaWZmZXJlbmNlUHJvcGVydHkiLCJib3hXaWR0aCIsInNob3dUcmFuc21pdHRlZENoZWNrYm94Iiwic2hvd1RyYW5zbWl0dGVkUHJvcGVydHkiLCJ3YXZlRnJvbnRNYXJrZXJzVGl0bGUiLCJ3YXZlRnJvbnRHcm91cCIsImNoaWxkcmVuIiwic3BhY2luZyIsInNlcGFyYXRvciIsInNlcGFyYXRvcjIiLCJtb3VzZUFyZWEiLCJsb2NhbEJvdW5kcyIsImRpbGF0ZWQiLCJ3aXRoWCIsInJpZ2h0IiwidG91Y2hBcmVhIiwiY29udGVudCIsIm1haW5Db250ZW50Iiwib3B0aW9uYWxQYXJhbWV0ZXJzIiwiYWNjb3JkaWFuT3B0aW9uYWwiLCJ0aXRsZU5vZGUiLCJtaW5XaWR0aCIsIndpZHRoIiwiZXhwYW5kZWRQcm9wZXJ0eSIsIm1vcmVQYXJtc0V4cGFuZGVkUHJvcGVydHkiLCJzaG93VGl0bGVXaGVuRXhwYW5kZWQiLCJ0aXRsZVRleHROb2RlIiwibnVtYmVyRGlzcGxheSIsInNsaWRlciIsImxlZnRBcnJvd0J1dHRvbiIsInJpZ2h0QXJyb3dCdXR0b24iLCJyZXNpemUiLCJpbnRlcmF0aW9uRnVuY3Rpb24iLCJoZWlnaHQiLCJsaW5lc05vZGUiLCJhZGRDaGlsZCIsImxpbmVTZWdtZW50IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJYcmF5Q29udHJvbFBhbmVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIwLTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFNob3dzIHRoZSBtYWluIGNvbnRyb2xzLCBpbmNsdWRpbmcgZnJlcXVlbmN5L3dhdmVsZW5ndGggYW5kIGFtcGxpdHVkZS5cclxuICpcclxuICogQGF1dGhvciBUb2RkIEhvbGRlbiAoaHR0cHM6Ly90aG9sZGVuNzkud2l4c2l0ZS5jb20vbXlzaXRlMilcclxuICovXHJcblxyXG5pbXBvcnQgRGltZW5zaW9uMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvRGltZW5zaW9uMi5qcyc7XHJcbmltcG9ydCBSYW5nZSBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvUmFuZ2UuanMnO1xyXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1V0aWxzLmpzJztcclxuaW1wb3J0IHsgU2hhcGUgfSBmcm9tICcuLi8uLi8uLi8uLi9raXRlL2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgbWVyZ2UgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL21lcmdlLmpzJztcclxuaW1wb3J0IFN0cmluZ1V0aWxzIGZyb20gJy4uLy4uLy4uLy4uL3BoZXRjb21tb24vanMvdXRpbC9TdHJpbmdVdGlscy5qcyc7XHJcbmltcG9ydCBOdW1iZXJDb250cm9sIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9OdW1iZXJDb250cm9sLmpzJztcclxuaW1wb3J0IFBoZXRGb250IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9QaGV0Rm9udC5qcyc7XHJcbmltcG9ydCB7IEhCb3gsIEhTZXBhcmF0b3IsIE5vZGUsIFBhdGgsIFRleHQsIFZCb3ggfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgQWNjb3JkaW9uQm94IGZyb20gJy4uLy4uLy4uLy4uL3N1bi9qcy9BY2NvcmRpb25Cb3guanMnO1xyXG5pbXBvcnQgUmVjdGFuZ3VsYXJSYWRpb0J1dHRvbkdyb3VwIGZyb20gJy4uLy4uLy4uLy4uL3N1bi9qcy9idXR0b25zL1JlY3Rhbmd1bGFyUmFkaW9CdXR0b25Hcm91cC5qcyc7XHJcbmltcG9ydCBDaGVja2JveCBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvQ2hlY2tib3guanMnO1xyXG5pbXBvcnQgUGFuZWwgZnJvbSAnLi4vLi4vLi4vLi4vc3VuL2pzL1BhbmVsLmpzJztcclxuaW1wb3J0IHhyYXlEaWZmcmFjdGlvbiBmcm9tICcuLi8uLi94cmF5RGlmZnJhY3Rpb24uanMnO1xyXG5pbXBvcnQgWHJheURpZmZyYWN0aW9uU3RyaW5ncyBmcm9tICcuLi8uLi9YcmF5RGlmZnJhY3Rpb25TdHJpbmdzLmpzJztcclxuXHJcbi8vIHN0cmluZ3NcclxuY29uc3QgYW5nbGVVbml0U3RyaW5nID0gWHJheURpZmZyYWN0aW9uU3RyaW5ncy5hbmdsZVVuaXQ7XHJcbmNvbnN0IGFMYXR0aWNlRXF1YWxzU3RyaW5nID0gWHJheURpZmZyYWN0aW9uU3RyaW5ncy5hTGF0dGljZUVxdWFscztcclxuY29uc3QgYmRMYXR0aWNlRXF1YWxzU3RyaW5nID0gWHJheURpZmZyYWN0aW9uU3RyaW5ncy5iZExhdHRpY2VFcXVhbHM7XHJcbmNvbnN0IGhvcml6b250YWxSYXlzU3RyaW5nID0gWHJheURpZmZyYWN0aW9uU3RyaW5ncy5ob3Jpem9udGFsUmF5cztcclxuY29uc3QgaW5jaWRlbnRBbmdsZVN0cmluZyA9IFhyYXlEaWZmcmFjdGlvblN0cmluZ3MuaW5jaWRlbnRBbmdsZTtcclxuY29uc3QgbGVuZ3RoVW5pdFN0cmluZyA9IFhyYXlEaWZmcmFjdGlvblN0cmluZ3MubGVuZ3RoVW5pdDtcclxuY29uc3QgbW9yZVBhcmFtZXRlcnNTdHJpbmcgPSBYcmF5RGlmZnJhY3Rpb25TdHJpbmdzLm1vcmVQYXJhbWV0ZXJzO1xyXG5jb25zdCBwYXRoRGlmZmVyZW5jZVN0cmluZyA9IFhyYXlEaWZmcmFjdGlvblN0cmluZ3MucGF0aERpZmZlcmVuY2U7XHJcbmNvbnN0IHNob3dUcmFuc21pdHRlZFN0cmluZyA9IFhyYXlEaWZmcmFjdGlvblN0cmluZ3Muc2hvd1RyYW5zbWl0dGVkO1xyXG5jb25zdCB2ZXJ0aWNhbFJheXNTdHJpbmcgPSBYcmF5RGlmZnJhY3Rpb25TdHJpbmdzLnZlcnRpY2FsUmF5cztcclxuY29uc3Qgd2F2ZWZyb250c01hcmtlcnNTdHJpbmcgPSBYcmF5RGlmZnJhY3Rpb25TdHJpbmdzLndhdmVGcm9udE1hcmtlcnM7XHJcbmNvbnN0IHdhdmVsZW5ndGhTdHJpbmcgPSBYcmF5RGlmZnJhY3Rpb25TdHJpbmdzLndhdmVsZW5ndGg7XHJcblxyXG5jb25zdCBURVhUX09QVElPTlMgPSB7IGZvbnQ6IG5ldyBQaGV0Rm9udCggeyBmYW1pbHk6ICdWZXJkYW5hJywgc2l6ZTogMTQgfSApLCBtYXhXaWR0aDogMjAwLCBhbGlnbjogJ2NlbnRlcicsIHNldEJvdW5kc01ldGhvZDogJ2FjY3VyYXRlJyB9O1xyXG5jb25zdCBTTElERVJfT1BUSU9OUyA9IHsgdHJhY2tTaXplOiBuZXcgRGltZW5zaW9uMiggOTAsIDEgKSwgdGh1bWJTaXplOiBuZXcgRGltZW5zaW9uMiggMTMsIDIyICkgfTtcclxuY29uc3QgWV9TUEFDSU5HID0gNztcclxuXHJcbmNsYXNzIFhyYXlDb250cm9sUGFuZWwgZXh0ZW5kcyBWQm94IHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtYcmF5RGlmZnJhY3Rpb25Nb2RlbH0gbW9kZWxcclxuICAgKiBAcGFyYW0ge05vZGV9IHRpbWVDb250cm9sTm9kZVxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cclxuICAgKi9cclxuXHJcbiAgY29uc3RydWN0b3IoIG1vZGVsLCB0aW1lQ29udHJvbE5vZGUsIG9wdGlvbnMgKSB7XHJcblxyXG4gICAgb3B0aW9ucyA9IG1lcmdlKCB7XHJcbiAgICAgIHhNYXJnaW46IDE1LFxyXG4gICAgICB5TWFyZ2luOiA4LFxyXG4gICAgICBmaWxsOiAnI0YwRjBGMCcsXHJcbiAgICAgIHN0cm9rZTogJ2dyYXknLFxyXG4gICAgICBsaW5lV2lkdGg6IDEsXHJcbiAgICAgIGNvcm5lclJhZGl1czogNlxyXG4gICAgfSwgb3B0aW9ucyApO1xyXG5cclxuICAgIC8vIFdlIGFyZSBtYW51YWxseSBjb250cm9sbGluZyB0aGUgdGl0bGUgYW5kIHRoZSBudW1iZXIgcmF0aGVyIHRoYW4gdGhlIGJ1aWx0IGluIE51bWJlckNvbnRyb2wgZnVuY3Rpb25hbGl0eSBzbyB0aGF0XHJcbiAgICAvLyB3ZSBjYW4gY29udmVydCBmcm9tIHJhZGlhbnMgdG8gZGVncmVlcyBhbmQgYWNjb21vZGF0ZSByaWdodC10by1sZWZ0IGxhbmd1YWdlcy5cclxuICAgIGNvbnN0IGFuZ2xlVGl0bGUgPSBuZXcgVGV4dCggJz8nLCBURVhUX09QVElPTlMgKTtcclxuICAgIC8vIExpbmtzIHRoZSBjdXJyZW50IGFuZ2xlIGFuZCBjb252ZXJ0cyBpdCB0byBkZWdyZWVzXHJcbiAgICBjb25zdCBhbmdsZUNvbnRyb2wgPSBuZXcgTnVtYmVyQ29udHJvbCggYW5nbGVUaXRsZS5zdHJpbmcsIG1vZGVsLnNvdXJjZUFuZ2xlUHJvcGVydHksIG5ldyBSYW5nZSggMCwgTWF0aC5QSSAvIDIgKSxcclxuICAgICAge1xyXG4gICAgICAgIGRlbHRhOiBNYXRoLlBJIC8gOTAwLCAvLyAwLjIgZGVncmVlIHJlc29sdXRpb25cclxuICAgICAgICBzbGlkZXJPcHRpb25zOiBTTElERVJfT1BUSU9OUyxcclxuICAgICAgICBsYXlvdXRGdW5jdGlvbjogY3JlYXRlQ29udHJvbExheW91dEZ1bmN0aW9uKCBhbmdsZVRpdGxlIClcclxuICAgICAgfSApO1xyXG4gICAgbW9kZWwuc291cmNlQW5nbGVQcm9wZXJ0eS5saW5rKCBhbmdsZSA9PiB7XHJcbiAgICAgIGFuZ2xlVGl0bGUuc3RyaW5nID0gU3RyaW5nVXRpbHMuZmlsbEluKCBpbmNpZGVudEFuZ2xlU3RyaW5nLCB7XHJcbiAgICAgICAgdmFsdWU6IFV0aWxzLnRvRml4ZWQoIGFuZ2xlICogMTgwIC8gTWF0aC5QSSwgMSApLFxyXG4gICAgICAgIHVuaXQ6IGFuZ2xlVW5pdFN0cmluZ1xyXG4gICAgICB9ICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gQ29udHJvbCBmb3IgdGhlIHdhdmVsZW5ndGhcclxuICAgIGNvbnN0IHdhdmVsZW5ndGhUaXRsZSA9IG5ldyBUZXh0KCAnPycsIFRFWFRfT1BUSU9OUyApO1xyXG4gICAgY29uc3Qgd2F2ZWxlbmd0aENvbnRyb2wgPSBuZXcgTnVtYmVyQ29udHJvbCggJz8nLCBtb2RlbC5zb3VyY2VXYXZlbGVuZ3RoUHJvcGVydHksIG5ldyBSYW5nZSggMSwgMjAgKSxcclxuICAgICAge1xyXG4gICAgICAgIGRlbHRhOiAwLjEsIC8vIDAuMSBBbmdzdHJvbSByZXNvbHV0aW9uXHJcbiAgICAgICAgc2xpZGVyT3B0aW9uczogU0xJREVSX09QVElPTlMsXHJcbiAgICAgICAgbGF5b3V0RnVuY3Rpb246IGNyZWF0ZUNvbnRyb2xMYXlvdXRGdW5jdGlvbiggd2F2ZWxlbmd0aFRpdGxlIClcclxuICAgICAgfSApO1xyXG4gICAgbW9kZWwuc291cmNlV2F2ZWxlbmd0aFByb3BlcnR5LmxpbmsoIHdhdmVsZW5ndGggPT4ge1xyXG4gICAgICB3YXZlbGVuZ3RoVGl0bGUuc3RyaW5nID0gU3RyaW5nVXRpbHMuZmlsbEluKCB3YXZlbGVuZ3RoU3RyaW5nLCB7XHJcbiAgICAgICAgdmFsdWU6IHdhdmVsZW5ndGgsXHJcbiAgICAgICAgdW5pdDogbGVuZ3RoVW5pdFN0cmluZ1xyXG4gICAgICB9ICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gQ29udHJvbCBmb3IgdGhlIGIgbGF0dGljZSBjb25zdGFudCAoPSBpbnRlcnBsYW5lIGRpc3RhbmNlIGZvciB0aGlzIG9yaWVudGF0aW9uKVxyXG4gICAgY29uc3QgYkxhdHRpY2VUaXRsZSA9IG5ldyBUZXh0KCAnPycsIFRFWFRfT1BUSU9OUyApO1xyXG4gICAgY29uc3QgYkxhdHRpY2VDb250cm9sID0gbmV3IE51bWJlckNvbnRyb2woICc/JywgbW9kZWwubGF0dGljZS5jQ29uc3RhbnRQcm9wZXJ0eSwgbmV3IFJhbmdlKCAyLCAyMCApLFxyXG4gICAgICB7XHJcbiAgICAgICAgZGVsdGE6IDAuMSwgLy8gMC4xIEFuZ3N0cm9tIHJlc29sdXRpb25cclxuICAgICAgICBzbGlkZXJPcHRpb25zOiBTTElERVJfT1BUSU9OUyxcclxuICAgICAgICBsYXlvdXRGdW5jdGlvbjogY3JlYXRlQ29udHJvbExheW91dEZ1bmN0aW9uKCBiTGF0dGljZVRpdGxlIClcclxuICAgICAgfSApO1xyXG4gICAgbW9kZWwubGF0dGljZS5jQ29uc3RhbnRQcm9wZXJ0eS5saW5rKCBjb25zdGFudCA9PiB7XHJcbiAgICAgIGJMYXR0aWNlVGl0bGUuc3RyaW5nID0gU3RyaW5nVXRpbHMuZmlsbEluKCBiZExhdHRpY2VFcXVhbHNTdHJpbmcsIHtcclxuICAgICAgICB2YWx1ZTogY29uc3RhbnQsXHJcbiAgICAgICAgdW5pdDogWHJheURpZmZyYWN0aW9uU3RyaW5ncy5sZW5ndGhVbml0XHJcbiAgICAgIH0gKTtcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBDb250cm9sIGZvciB0aGUgYSBsYXR0aWNlIGNvbnN0YW50XHJcbiAgICBjb25zdCBhTGF0dGljZVRpdGxlID0gbmV3IFRleHQoICc/JywgVEVYVF9PUFRJT05TICk7XHJcbiAgICBtb2RlbC5sYXR0aWNlLmFDb25zdGFudFByb3BlcnR5LmxpbmsoIGNvbnN0YW50ID0+IHtcclxuICAgICAgYUxhdHRpY2VUaXRsZS5zdHJpbmcgPSBTdHJpbmdVdGlscy5maWxsSW4oIGFMYXR0aWNlRXF1YWxzU3RyaW5nLCB7XHJcbiAgICAgICAgdmFsdWU6IGNvbnN0YW50LFxyXG4gICAgICAgIHVuaXQ6IFhyYXlEaWZmcmFjdGlvblN0cmluZ3MubGVuZ3RoVW5pdFxyXG4gICAgICB9ICk7XHJcbiAgICB9ICk7XHJcbiAgICBjb25zdCBhTGF0dGljZUNvbnRyb2wgPSBuZXcgTnVtYmVyQ29udHJvbCggYUxhdHRpY2VUaXRsZS5zdHJpbmcsIG1vZGVsLmxhdHRpY2UuYUNvbnN0YW50UHJvcGVydHksIG5ldyBSYW5nZSggMiwgMjAgKSxcclxuICAgICAge1xyXG4gICAgICAgIGRlbHRhOiAwLjEsIC8vIDAuMSBBbmdzdHJvbSByZXNvbHV0aW9uXHJcbiAgICAgICAgc2xpZGVyT3B0aW9uczogU0xJREVSX09QVElPTlMsXHJcbiAgICAgICAgbGF5b3V0RnVuY3Rpb246IGNyZWF0ZUNvbnRyb2xMYXlvdXRGdW5jdGlvbiggYUxhdHRpY2VUaXRsZSApXHJcbiAgICAgIH0gKTtcclxuICAgIG1vZGVsLmxhdHRpY2UuYUNvbnN0YW50UHJvcGVydHkubGluayggY29uc3RhbnQgPT4ge1xyXG4gICAgICBhTGF0dGljZVRpdGxlLnN0cmluZyA9IFN0cmluZ1V0aWxzLmZpbGxJbiggYUxhdHRpY2VFcXVhbHNTdHJpbmcsIHtcclxuICAgICAgICB2YWx1ZTogY29uc3RhbnQsXHJcbiAgICAgICAgdW5pdDogWHJheURpZmZyYWN0aW9uU3RyaW5ncy5sZW5ndGhVbml0XHJcbiAgICAgIH0gKTtcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBDb250cm9sIGZvciBudW1iZXIgb2YgdmVydGljYWwgcmF5c1xyXG4gICAgY29uc3QgdmVydGljYWxDb250cm9sID0gbmV3IE51bWJlckNvbnRyb2woICc/JywgbW9kZWwudmVydGljYWxSYXlzUHJvcGVydHksIG5ldyBSYW5nZSggMSwgNSApLFxyXG4gICAgICB7XHJcbiAgICAgICAgZGVsdGE6IDEsIC8vIGludGVyZ2VyIG51bWJlciBvZiByYXlzXHJcbiAgICAgICAgc2xpZGVyT3B0aW9uczogU0xJREVSX09QVElPTlMsXHJcbiAgICAgICAgbGF5b3V0RnVuY3Rpb246IGNyZWF0ZUNvbnRyb2xMYXlvdXRGdW5jdGlvbiggbmV3IFRleHQoIHZlcnRpY2FsUmF5c1N0cmluZywgVEVYVF9PUFRJT05TICkgKVxyXG4gICAgICB9ICk7XHJcblxyXG4gICAgLy8gQ29udHJvbCBmb3IgbnVtYmVyIG9mIGhvcml6b250YWwgcmF5c1xyXG4gICAgY29uc3QgaG9yaXpvbnRhbENvbnRyb2wgPSBuZXcgTnVtYmVyQ29udHJvbCggJz8nLCBtb2RlbC5ob3Jpem9udGFsUmF5c1Byb3BlcnR5LCBuZXcgUmFuZ2UoIDAsIDIgKSxcclxuICAgICAge1xyXG4gICAgICAgIGRlbHRhOiAxLCAvLyBpbnRlcmdlciBudW1iZXIgb2YgcmF5c1xyXG4gICAgICAgIHNsaWRlck9wdGlvbnM6IFNMSURFUl9PUFRJT05TLFxyXG4gICAgICAgIGxheW91dEZ1bmN0aW9uOiBjcmVhdGVDb250cm9sTGF5b3V0RnVuY3Rpb24oIG5ldyBUZXh0KCBob3Jpem9udGFsUmF5c1N0cmluZywgVEVYVF9PUFRJT05TICkgKVxyXG4gICAgICB9ICk7XHJcblxyXG4gICAgY29uc3Qgd2F2ZWZyb250UmFkaW9Db250ZW50ID0gWyAvLyB2YWx1ZSBzZXQgdG8gY29sb3IgaXRlcmF0b3IgdXNlZCBieSBMaWdodFBhdGhOb2RlIG9yICdub25lJyBmb3Igbm8gd2F2ZWZyb250c1xyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWU6ICdub25lJyxcclxuICAgICAgICBjcmVhdGVOb2RlOiAoKSA9PiBjcmVhdGVMaW5lcyggKCkgPT4gJ3RyYW5zcGFyZW50JyApXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZTogKCkgPT4gJ2JsYWNrJyxcclxuICAgICAgICBjcmVhdGVOb2RlOiAoKSA9PiBjcmVhdGVMaW5lcyggKCkgPT4gJ2JsYWNrJyApXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZTogaSA9PiBgaHNsKDAsIDAlLCAkezQwICogKCAoICggaSAlIDMgKSArIDMgKSAlIDMgKX0lKWAsXHJcbiAgICAgICAgY3JlYXRlTm9kZTogKCkgPT4gY3JlYXRlTGluZXMoIGkgPT4gYGhzbCgwLCAwJSwgJHs0MCAqICggKCAoIGkgJSAzICkgKyAzICkgJSAzICl9JSlgICkgLy8gdGhyZWUgbGV2ZWxzLCAwLDQwLDgwXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZTogaSA9PiBgaHNsKCR7KCAoIDYwICogaSAlIDM2MCApICsgMzYwICkgJSAzNjB9LCAxMDAlLCA1MCUpYCxcclxuICAgICAgICBjcmVhdGVOb2RlOiAoKSA9PiBjcmVhdGVMaW5lcyggaSA9PiBgaHNsKCR7KCAoIDYwICogaSAlIDM2MCApICsgMzYwICkgJSAzNjB9LCAxMDAlLCA1MCUpYCApIC8vIDYwKmkgZ2l2ZXMgNiBkaWZmZXJlbnQgY29sb3JzICksXHJcbiAgICAgIH1cclxuICAgIF07XHJcblxyXG4gICAgY29uc3Qgd2F2ZWZyb250UmFkaW9CdXR0b25Hcm91cCA9IG5ldyBSZWN0YW5ndWxhclJhZGlvQnV0dG9uR3JvdXAoIG1vZGVsLndhdmVmcm9udFByb3BlcnR5LCB3YXZlZnJvbnRSYWRpb0NvbnRlbnQsIHtcclxuICAgICAgb3JpZW50YXRpb246ICdob3Jpem9udGFsJyxcclxuICAgICAgcmFkaW9CdXR0b25PcHRpb25zOiB7XHJcbiAgICAgICAgY29ybmVyUmFkaXVzOiA1LFxyXG4gICAgICAgIGJhc2VDb2xvcjogJ3doaXRlJyxcclxuICAgICAgICBidXR0b25BcHBlYXJhbmNlU3RyYXRlZ3lPcHRpb25zOiB7XHJcbiAgICAgICAgICBzZWxlY3RlZExpbmVXaWR0aDogMSxcclxuICAgICAgICAgIHNlbGVjdGVkU3Ryb2tlOiAnYmxhY2snLFxyXG4gICAgICAgICAgZGVzZWxlY3RlZExpbmVXaWR0aDogMCxcclxuICAgICAgICAgIGRlc2VsZWN0ZWRDb250ZW50T3BhY2l0eTogMVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IHBhdGhEaWZmZXJlbmNlQ2hlY2tib3ggPSBuZXcgQ2hlY2tib3goIG1vZGVsLnBhdGhEaWZmZXJlbmNlUHJvcGVydHksIG5ldyBUZXh0KCBwYXRoRGlmZmVyZW5jZVN0cmluZywgVEVYVF9PUFRJT05TICksIHsgYm94V2lkdGg6IDE1IH0gKTtcclxuICAgIGNvbnN0IHNob3dUcmFuc21pdHRlZENoZWNrYm94ID0gbmV3IENoZWNrYm94KCBtb2RlbC5zaG93VHJhbnNtaXR0ZWRQcm9wZXJ0eSwgbmV3IFRleHQoIHNob3dUcmFuc21pdHRlZFN0cmluZywgVEVYVF9PUFRJT05TICksIHsgYm94V2lkdGg6IDE1IH0gKTtcclxuXHJcbiAgICBjb25zdCB3YXZlRnJvbnRNYXJrZXJzVGl0bGUgPSBuZXcgVGV4dCggd2F2ZWZyb250c01hcmtlcnNTdHJpbmcsIFRFWFRfT1BUSU9OUyApO1xyXG4gICAgY29uc3Qgd2F2ZUZyb250R3JvdXAgPSBuZXcgVkJveCgge1xyXG4gICAgICBhbGlnbjogJ2xlZnQnLFxyXG4gICAgICBjaGlsZHJlbjogWyB3YXZlRnJvbnRNYXJrZXJzVGl0bGUsIHdhdmVmcm9udFJhZGlvQnV0dG9uR3JvdXAgXSxcclxuICAgICAgc3BhY2luZzogWV9TUEFDSU5HXHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3Qgc2VwYXJhdG9yID0gbmV3IEhTZXBhcmF0b3IoKTtcclxuICAgIGNvbnN0IHNlcGFyYXRvcjIgPSBuZXcgSFNlcGFyYXRvcigpO1xyXG5cclxuICAgIC8vIFNldCBwb2ludGVyIGFyZWFzIGZvciB0aGUgY2hlY2tib3hlcywgbm93IHRoYXQgd2UgaGF2ZSB0aGUgc2VwYXJhdG9yIGRpbWVuc2lvbnMuXHJcbiAgICBwYXRoRGlmZmVyZW5jZUNoZWNrYm94Lm1vdXNlQXJlYSA9IHBhdGhEaWZmZXJlbmNlQ2hlY2tib3gubG9jYWxCb3VuZHMuZGlsYXRlZCggMiApLndpdGhYKCBzZXBhcmF0b3IucmlnaHQgKTtcclxuICAgIHBhdGhEaWZmZXJlbmNlQ2hlY2tib3gudG91Y2hBcmVhID0gcGF0aERpZmZlcmVuY2VDaGVja2JveC5tb3VzZUFyZWE7XHJcbiAgICBzaG93VHJhbnNtaXR0ZWRDaGVja2JveC5tb3VzZUFyZWEgPSBzaG93VHJhbnNtaXR0ZWRDaGVja2JveC5sb2NhbEJvdW5kcy5kaWxhdGVkKCAyICkud2l0aFgoIHNlcGFyYXRvci5yaWdodCApO1xyXG4gICAgc2hvd1RyYW5zbWl0dGVkQ2hlY2tib3gudG91Y2hBcmVhID0gc2hvd1RyYW5zbWl0dGVkQ2hlY2tib3gubW91c2VBcmVhO1xyXG5cclxuICAgIC8vIG1haW4gY29udHJvbCBwYW5lbC4gSXRlbXMgY2FuIGVhc2lseSBiZSByZWFycmFuZ2VkIGhlcmUuIFVzZSBQYW5lbCBpZiB5b3UgaGF2ZSB0byBzZXQgYSB3aWR0aCBpbnNpZGUgYSBWQm94LlxyXG4gICAgY29uc3QgY29udGVudCA9IG5ldyBWQm94KCB7XHJcbiAgICAgIGFsaWduOiAnbGVmdCcsXHJcbiAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgYW5nbGVDb250cm9sLFxyXG4gICAgICAgIHdhdmVsZW5ndGhDb250cm9sLFxyXG4gICAgICAgIGJMYXR0aWNlQ29udHJvbCxcclxuICAgICAgICBzZXBhcmF0b3IsXHJcbiAgICAgICAgcGF0aERpZmZlcmVuY2VDaGVja2JveCxcclxuICAgICAgICBzaG93VHJhbnNtaXR0ZWRDaGVja2JveCxcclxuICAgICAgICBzZXBhcmF0b3IyLFxyXG4gICAgICAgIHdhdmVGcm9udEdyb3VwXHJcbiAgICAgIF0sXHJcbiAgICAgIHNwYWNpbmc6IFlfU1BBQ0lOR1xyXG4gICAgfSApO1xyXG4gICAgY29uc3QgbWFpbkNvbnRlbnQgPSBuZXcgUGFuZWwoIGNvbnRlbnQsIG9wdGlvbnMgKTtcclxuXHJcbiAgICAvLyBvcHRpb25hbCBjb250cm9scyBoaWRkZW4gaW4gYW4gYWNjb3JkaWFuIGJveFxyXG4gICAgY29uc3Qgb3B0aW9uYWxQYXJhbWV0ZXJzID0gbmV3IFZCb3goIHtcclxuICAgICAgYWxpZ246ICdsZWZ0JyxcclxuICAgICAgY2hpbGRyZW46IFsgYUxhdHRpY2VDb250cm9sLCB2ZXJ0aWNhbENvbnRyb2wsIGhvcml6b250YWxDb250cm9sIF0sXHJcbiAgICAgIHNwYWNpbmc6IFlfU1BBQ0lOR1xyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IGFjY29yZGlhbk9wdGlvbmFsID0gbmV3IEFjY29yZGlvbkJveCggb3B0aW9uYWxQYXJhbWV0ZXJzLCBtZXJnZSgge1xyXG4gICAgICB0aXRsZU5vZGU6IG5ldyBUZXh0KCBtb3JlUGFyYW1ldGVyc1N0cmluZywgVEVYVF9PUFRJT05TICksXHJcbiAgICAgIG1pbldpZHRoOiBtYWluQ29udGVudC53aWR0aCxcclxuICAgICAgZXhwYW5kZWRQcm9wZXJ0eTogbW9kZWwubW9yZVBhcm1zRXhwYW5kZWRQcm9wZXJ0eSxcclxuICAgICAgc2hvd1RpdGxlV2hlbkV4cGFuZGVkOiB0cnVlXHJcbiAgICB9LCBvcHRpb25zICkgKTtcclxuXHJcbiAgICBzdXBlcigge1xyXG4gICAgICBjaGlsZHJlbjogWyBtYWluQ29udGVudCwgdGltZUNvbnRyb2xOb2RlLCBhY2NvcmRpYW5PcHRpb25hbCBdLFxyXG4gICAgICBzcGFjaW5nOiAyICogWV9TUEFDSU5HLFxyXG4gICAgICBhbGlnbjogJ2xlZnQnXHJcbiAgICB9ICk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhIGxheW91dCBmdW5jdGlvbnMgdGhhdCBjYW4gYmUgdXNlZCBmb3Igb3B0aW9ucy5sYXlvdXRGdW5jdGlvbi4gU2VuZHMgaW4gYSB0aXRsZVRleHROb2RlIHNvIHdlIGNhbiBjaGFuZ2UgaXQgbGF0ZXIuXHJcbiAqIEFycmFuZ2VzIHN1YmNvbXBvbmVudHMgbGlrZSB0aGlzOlxyXG4gKlxyXG4gKiAgICAgICAgdGl0bGVcclxuICogIDwgLS0tLS0tfC0tLS0tLSA+XHJcbiAqXHJcbiAqIEBwYXJhbSB7Tm9kZX0gdGl0bGVUZXh0Tm9kZVxyXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXHJcbiAqIEByZXR1cm5zIHtmdW5jdGlvbn1cclxuICogQHB1YmxpY1xyXG4gKiBAc3RhdGljXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVDb250cm9sTGF5b3V0RnVuY3Rpb24oIHRpdGxlVGV4dE5vZGUsIG9wdGlvbnMgKSB7XHJcbiAgcmV0dXJuICggdGl0bGVOb2RlLCBudW1iZXJEaXNwbGF5LCBzbGlkZXIsIGxlZnRBcnJvd0J1dHRvbiwgcmlnaHRBcnJvd0J1dHRvbiApID0+IHtcclxuICAgIHJldHVybiBuZXcgVkJveCgge1xyXG4gICAgICBzcGFjaW5nOiAyLFxyXG4gICAgICBjaGlsZHJlbjogWyB0aXRsZVRleHROb2RlLFxyXG4gICAgICAgIG5ldyBIQm94KCB7XHJcbiAgICAgICAgICBzcGFjaW5nOiAyLFxyXG4gICAgICAgICAgcmVzaXplOiBmYWxzZSwgLy8gcHJldmVudCBzbGlkZXIgZnJvbSBjYXVzaW5nIGEgcmVzaXplIHdoZW4gdGh1bWIgaXMgYXQgbWluIG9yIG1heFxyXG4gICAgICAgICAgY2hpbGRyZW46IFsgbGVmdEFycm93QnV0dG9uLCBzbGlkZXIsIHJpZ2h0QXJyb3dCdXR0b24gXVxyXG4gICAgICAgIH0gKVxyXG4gICAgICBdXHJcbiAgICB9ICk7XHJcbiAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgbGluZXMgc3ltYm9scyBmb3Igd2F2ZWZyb250IG1hcmtlcnMgcmFkaW9CdXR0b24uXHJcbiAqXHJcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGludGVyYXRpb25GdW5jdGlvblxyXG4gKiBAcmV0dXJucyB7Tm9kZX1cclxuICogQHB1YmxpY1xyXG4gKiBAc3RhdGljXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVMaW5lcyggaW50ZXJhdGlvbkZ1bmN0aW9uICkge1xyXG4gIGNvbnN0IGhlaWdodCA9IDIwOyAvLyBhcmJpdHJhcnkgc2l6ZSBvZiBpY29uLiBzZXQgYnkgaGFuZFxyXG4gIGNvbnN0IHNwYWNpbmcgPSBoZWlnaHQgLyA0OyAvLyBzcXVhcmUgaWNvbiBmb3IgNCB3YXZlZnJvbnRzLiBzZXQgYnkgaGFuZFxyXG4gIGNvbnN0IGxpbmVzTm9kZSA9IG5ldyBOb2RlKCk7XHJcbiAgZm9yICggbGV0IGkgPSAwOyBpIDwgNDsgaSsrICkge1xyXG4gICAgbGluZXNOb2RlLmFkZENoaWxkKCBuZXcgUGF0aCggU2hhcGUubGluZVNlZ21lbnQoIGkgKiBzcGFjaW5nLCAwLCBpICogc3BhY2luZywgaGVpZ2h0ICksIHtcclxuICAgICAgc3Ryb2tlOiBpbnRlcmF0aW9uRnVuY3Rpb24oIGkgKSwgLy8gZGVmaW5lcyB0aGUgY29sb3Ivc2hhZGluZyBwYXR0ZXJuc1xyXG4gICAgICBsaW5lV2lkdGg6IDMgIC8vIGFyYml0cmFyeSBsaW5ld2lkdGggZm9yIHRoZSBpY29uXHJcbiAgICB9ICkgKTtcclxuICB9XHJcbiAgcmV0dXJuIGxpbmVzTm9kZTtcclxufVxyXG5cclxueHJheURpZmZyYWN0aW9uLnJlZ2lzdGVyKCAnWHJheUNvbnRyb2xQYW5lbCcsIFhy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