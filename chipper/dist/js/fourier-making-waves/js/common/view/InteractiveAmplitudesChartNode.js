// Copyright 2020-2023, University of Colorado Boulder

/**
 * InteractiveAmplitudesChartNode is the base class for the Amplitudes charts in the 'Discrete' and 'Wave Game' screens,
 * where amplitudes can be interactively adjusted using a set of bar-like sliders. The x axis is harmonic order (1-N),
 * the y axis is amplitude. Amplitudes are displayed as an interactive bar chart, where each bar is a slider.
 * Amplitude can be adjusted using the slider, or by using a Keypad that opens when a NumberDisplay is pressed.
 *
 * This class is not used in the 'Wave Packet' screen, where the Amplitudes chart is not interactive, and uses
 * a much different underlying model.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import ChartRectangle from '../../../../bamboo/js/ChartRectangle.js';
import ChartTransform from '../../../../bamboo/js/ChartTransform.js';
import GridLineSet from '../../../../bamboo/js/GridLineSet.js';
import TickLabelSet from '../../../../bamboo/js/TickLabelSet.js';
import Range from '../../../../dot/js/Range.js';
import Utils from '../../../../dot/js/Utils.js';
import merge from '../../../../phet-core/js/merge.js';
import Orientation from '../../../../phet-core/js/Orientation.js';
import { Node, RichText, Text } from '../../../../scenery/js/imports.js';
import Tandem from '../../../../tandem/js/Tandem.js';
import fourierMakingWaves from '../../fourierMakingWaves.js';
import FourierMakingWavesStrings from '../../FourierMakingWavesStrings.js';
import FMWColors from '../FMWColors.js';
import FMWConstants from '../FMWConstants.js';
import FMWSymbols from '../FMWSymbols.js';
import InteractiveAmplitudesChart from '../model/InteractiveAmplitudesChart.js';
import AmplitudeKeypadDialog from './AmplitudeKeypadDialog.js';
import AmplitudeNumberDisplay from './AmplitudeNumberDisplay.js';
import AmplitudeSlider from './AmplitudeSlider.js';

// constants
const X_MARGIN = 0.5; // x-axis margins, in model coordinates
const Y_TICK_SPACING = 0.5; // spacing of y-axis tick marks, in model coordinates
const Y_TICK_LABEL_DECIMAL_PLACES = 1;
export default class InteractiveAmplitudesChartNode extends Node {
  /**
   * @param {InteractiveAmplitudesChart} amplitudesChart
   * @param {AmplitudeKeypadDialog} amplitudeKeypadDialog - keypad for editing amplitude values
   * @param {Object} [options]
   */
  constructor(amplitudesChart, amplitudeKeypadDialog, options) {
    assert && assert(amplitudesChart instanceof InteractiveAmplitudesChart);
    assert && assert(amplitudeKeypadDialog instanceof AmplitudeKeypadDialog);
    options = merge({
      // InteractiveAmplitudesChartNode options
      // {function} called when the user starts editing any amplitude value
      onEdit: _.noop,
      // AmplitudeSlider options
      amplitudeSliderOptions: null,
      // AmplitudeNumberDisplay options
      amplitudeNumberDisplayOptions: null,
      chartTransformOptions: {
        viewWidth: FMWConstants.CHART_RECTANGLE_SIZE.width,
        viewHeight: FMWConstants.CHART_RECTANGLE_SIZE.height
      },
      // phet-io options
      tandem: Tandem.REQUIRED
    }, options);
    assert && assert(!options.chartTransformOptions.modelXRange, 'InteractiveAmplitudesChartNode sets modelXRange');
    assert && assert(!options.chartTransformOptions.modelYRange, 'InteractiveAmplitudesChartNode sets modelYRange');

    // Fields of interest in amplitudesChart, to improve readability
    const fourierSeries = amplitudesChart.fourierSeries;
    const emphasizedHarmonics = amplitudesChart.emphasizedHarmonics;

    // the transform from model to view coordinates
    const chartTransform = new ChartTransform(merge({
      modelXRange: new Range(1 - X_MARGIN, fourierSeries.harmonics.length + X_MARGIN),
      modelYRange: fourierSeries.amplitudeRange
    }, options.chartTransformOptions));
    const chartRectangle = new ChartRectangle(chartTransform);

    // x axis ---------------------------------------------------------

    const xAxisLabelText = new RichText(FMWSymbols.nStringProperty, {
      font: FMWConstants.AXIS_LABEL_FONT,
      left: chartRectangle.right + FMWConstants.X_AXIS_LABEL_SPACING,
      centerY: chartRectangle.centerY,
      maxWidth: FMWConstants.X_AXIS_LABEL_MAX_WIDTH,
      tandem: options.tandem.createTandem('xAxisLabelText')
    });

    // {AmplitudeSlider[]} Create a slider for each harmonic's amplitude
    const sliders = fourierSeries.harmonics.map(harmonic => new AmplitudeSlider(harmonic, emphasizedHarmonics, merge({
      startDrag: options.onEdit,
      trackHeight: options.chartTransformOptions.viewHeight,
      center: chartTransform.modelToViewXY(harmonic.order, 0),
      tandem: options.tandem.createTandem(`amplitude${harmonic.order}Slider`)
    }, options.amplitudeSliderOptions)));
    const slidersParent = new Node({
      children: sliders
    });

    // {AmplitudeNumberDisplay[]} Create a number display for each harmonic's amplitude
    const numberDisplays = fourierSeries.harmonics.map(harmonic => new AmplitudeNumberDisplay(harmonic, emphasizedHarmonics, amplitudeKeypadDialog, merge({
      press: options.onEdit,
      centerX: chartTransform.modelToViewX(harmonic.order),
      bottom: chartRectangle.top - 10,
      tandem: options.tandem.createTandem(`amplitude${harmonic.order}NumberDisplay`)
    }, options.amplitudeNumberDisplayOptions)));
    const numberDisplaysParent = new Node({
      children: numberDisplays
    });

    // y axis ---------------------------------------------------------

    const yAxisLabelText = new RichText(FourierMakingWavesStrings.amplitudeStringProperty, {
      font: FMWConstants.AXIS_LABEL_FONT,
      rotation: -Math.PI / 2,
      maxWidth: 0.85 * chartRectangle.height,
      tandem: options.tandem.createTandem('yAxisLabelText')
    });
    yAxisLabelText.boundsProperty.link(bounds => {
      yAxisLabelText.right = -FMWConstants.Y_AXIS_LABEL_SPACING;
      yAxisLabelText.centerY = chartRectangle.centerY;
    });
    const yGridLineSet = new GridLineSet(chartTransform, Orientation.VERTICAL, Y_TICK_SPACING, {
      stroke: FMWColors.amplitudesGridLinesStrokeProperty,
      lineWidth: 0.5
    });
    const yLabelSet = new TickLabelSet(chartTransform, Orientation.VERTICAL, Y_TICK_SPACING, {
      edge: 'min',
      // Create tick labels. Using toFixedNumber removes trailing zeros.
      createLabel: value => new Text(Utils.toFixedNumber(value, Y_TICK_LABEL_DECIMAL_PLACES), {
        font: FMWConstants.TICK_LABEL_FONT
      })
    });

    // ---------------------------------------------------------------

    // Group all of the non-interactive pieces, so that we can easily keep track of how many times
    // the user presses on the interactive pieces.
    const chartPiecesNode = new Node({
      pickable: false,
      children: [chartRectangle, xAxisLabelText, yAxisLabelText, yGridLineSet, yLabelSet]
    });
    assert && assert(!options.children, 'InteractiveAmplitudesChartNode sets children');
    options.children = [chartPiecesNode, slidersParent, numberDisplaysParent];
    super(options);

    // pdom - traversal order
    this.pdomOrder = [...sliders, ...numberDisplays];

    // @protected
    this.sliders = sliders; // {AmplitudeSlider[]}
    this.slidersParent = slidersParent; // {Node}
    this.numberDisplays = numberDisplays; // {AmplitudeNumberDisplay[]}

    // @public
    this.chartTransform = chartTransform; // {ChartTransform}
    this.chartRectangle = chartRectangle; // {ChartRectangle}
  }

  /**
   * @public
   */
  dispose() {
    assert && assert(false, 'dispose is not supported, exists for the lifetime of the sim');
    super.dispose();
  }
}
fourierMakingWaves.register('InteractiveAmplitudesChartNode', InteractiveAmplitudesChartNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDaGFydFJlY3RhbmdsZSIsIkNoYXJ0VHJhbnNmb3JtIiwiR3JpZExpbmVTZXQiLCJUaWNrTGFiZWxTZXQiLCJSYW5nZSIsIlV0aWxzIiwibWVyZ2UiLCJPcmllbnRhdGlvbiIsIk5vZGUiLCJSaWNoVGV4dCIsIlRleHQiLCJUYW5kZW0iLCJmb3VyaWVyTWFraW5nV2F2ZXMiLCJGb3VyaWVyTWFraW5nV2F2ZXNTdHJpbmdzIiwiRk1XQ29sb3JzIiwiRk1XQ29uc3RhbnRzIiwiRk1XU3ltYm9scyIsIkludGVyYWN0aXZlQW1wbGl0dWRlc0NoYXJ0IiwiQW1wbGl0dWRlS2V5cGFkRGlhbG9nIiwiQW1wbGl0dWRlTnVtYmVyRGlzcGxheSIsIkFtcGxpdHVkZVNsaWRlciIsIlhfTUFSR0lOIiwiWV9USUNLX1NQQUNJTkciLCJZX1RJQ0tfTEFCRUxfREVDSU1BTF9QTEFDRVMiLCJJbnRlcmFjdGl2ZUFtcGxpdHVkZXNDaGFydE5vZGUiLCJjb25zdHJ1Y3RvciIsImFtcGxpdHVkZXNDaGFydCIsImFtcGxpdHVkZUtleXBhZERpYWxvZyIsIm9wdGlvbnMiLCJhc3NlcnQiLCJvbkVkaXQiLCJfIiwibm9vcCIsImFtcGxpdHVkZVNsaWRlck9wdGlvbnMiLCJhbXBsaXR1ZGVOdW1iZXJEaXNwbGF5T3B0aW9ucyIsImNoYXJ0VHJhbnNmb3JtT3B0aW9ucyIsInZpZXdXaWR0aCIsIkNIQVJUX1JFQ1RBTkdMRV9TSVpFIiwid2lkdGgiLCJ2aWV3SGVpZ2h0IiwiaGVpZ2h0IiwidGFuZGVtIiwiUkVRVUlSRUQiLCJtb2RlbFhSYW5nZSIsIm1vZGVsWVJhbmdlIiwiZm91cmllclNlcmllcyIsImVtcGhhc2l6ZWRIYXJtb25pY3MiLCJjaGFydFRyYW5zZm9ybSIsImhhcm1vbmljcyIsImxlbmd0aCIsImFtcGxpdHVkZVJhbmdlIiwiY2hhcnRSZWN0YW5nbGUiLCJ4QXhpc0xhYmVsVGV4dCIsIm5TdHJpbmdQcm9wZXJ0eSIsImZvbnQiLCJBWElTX0xBQkVMX0ZPTlQiLCJsZWZ0IiwicmlnaHQiLCJYX0FYSVNfTEFCRUxfU1BBQ0lORyIsImNlbnRlclkiLCJtYXhXaWR0aCIsIlhfQVhJU19MQUJFTF9NQVhfV0lEVEgiLCJjcmVhdGVUYW5kZW0iLCJzbGlkZXJzIiwibWFwIiwiaGFybW9uaWMiLCJzdGFydERyYWciLCJ0cmFja0hlaWdodCIsImNlbnRlciIsIm1vZGVsVG9WaWV3WFkiLCJvcmRlciIsInNsaWRlcnNQYXJlbnQiLCJjaGlsZHJlbiIsIm51bWJlckRpc3BsYXlzIiwicHJlc3MiLCJjZW50ZXJYIiwibW9kZWxUb1ZpZXdYIiwiYm90dG9tIiwidG9wIiwibnVtYmVyRGlzcGxheXNQYXJlbnQiLCJ5QXhpc0xhYmVsVGV4dCIsImFtcGxpdHVkZVN0cmluZ1Byb3BlcnR5Iiwicm90YXRpb24iLCJNYXRoIiwiUEkiLCJib3VuZHNQcm9wZXJ0eSIsImxpbmsiLCJib3VuZHMiLCJZX0FYSVNfTEFCRUxfU1BBQ0lORyIsInlHcmlkTGluZVNldCIsIlZFUlRJQ0FMIiwic3Ryb2tlIiwiYW1wbGl0dWRlc0dyaWRMaW5lc1N0cm9rZVByb3BlcnR5IiwibGluZVdpZHRoIiwieUxhYmVsU2V0IiwiZWRnZSIsImNyZWF0ZUxhYmVsIiwidmFsdWUiLCJ0b0ZpeGVkTnVtYmVyIiwiVElDS19MQUJFTF9GT05UIiwiY2hhcnRQaWVjZXNOb2RlIiwicGlja2FibGUiLCJwZG9tT3JkZXIiLCJkaXNwb3NlIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJJbnRlcmFjdGl2ZUFtcGxpdHVkZXNDaGFydE5vZGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjAtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogSW50ZXJhY3RpdmVBbXBsaXR1ZGVzQ2hhcnROb2RlIGlzIHRoZSBiYXNlIGNsYXNzIGZvciB0aGUgQW1wbGl0dWRlcyBjaGFydHMgaW4gdGhlICdEaXNjcmV0ZScgYW5kICdXYXZlIEdhbWUnIHNjcmVlbnMsXHJcbiAqIHdoZXJlIGFtcGxpdHVkZXMgY2FuIGJlIGludGVyYWN0aXZlbHkgYWRqdXN0ZWQgdXNpbmcgYSBzZXQgb2YgYmFyLWxpa2Ugc2xpZGVycy4gVGhlIHggYXhpcyBpcyBoYXJtb25pYyBvcmRlciAoMS1OKSxcclxuICogdGhlIHkgYXhpcyBpcyBhbXBsaXR1ZGUuIEFtcGxpdHVkZXMgYXJlIGRpc3BsYXllZCBhcyBhbiBpbnRlcmFjdGl2ZSBiYXIgY2hhcnQsIHdoZXJlIGVhY2ggYmFyIGlzIGEgc2xpZGVyLlxyXG4gKiBBbXBsaXR1ZGUgY2FuIGJlIGFkanVzdGVkIHVzaW5nIHRoZSBzbGlkZXIsIG9yIGJ5IHVzaW5nIGEgS2V5cGFkIHRoYXQgb3BlbnMgd2hlbiBhIE51bWJlckRpc3BsYXkgaXMgcHJlc3NlZC5cclxuICpcclxuICogVGhpcyBjbGFzcyBpcyBub3QgdXNlZCBpbiB0aGUgJ1dhdmUgUGFja2V0JyBzY3JlZW4sIHdoZXJlIHRoZSBBbXBsaXR1ZGVzIGNoYXJ0IGlzIG5vdCBpbnRlcmFjdGl2ZSwgYW5kIHVzZXNcclxuICogYSBtdWNoIGRpZmZlcmVudCB1bmRlcmx5aW5nIG1vZGVsLlxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCBDaGFydFJlY3RhbmdsZSBmcm9tICcuLi8uLi8uLi8uLi9iYW1ib28vanMvQ2hhcnRSZWN0YW5nbGUuanMnO1xyXG5pbXBvcnQgQ2hhcnRUcmFuc2Zvcm0gZnJvbSAnLi4vLi4vLi4vLi4vYmFtYm9vL2pzL0NoYXJ0VHJhbnNmb3JtLmpzJztcclxuaW1wb3J0IEdyaWRMaW5lU2V0IGZyb20gJy4uLy4uLy4uLy4uL2JhbWJvby9qcy9HcmlkTGluZVNldC5qcyc7XHJcbmltcG9ydCBUaWNrTGFiZWxTZXQgZnJvbSAnLi4vLi4vLi4vLi4vYmFtYm9vL2pzL1RpY2tMYWJlbFNldC5qcyc7XHJcbmltcG9ydCBSYW5nZSBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvUmFuZ2UuanMnO1xyXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1V0aWxzLmpzJztcclxuaW1wb3J0IG1lcmdlIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9tZXJnZS5qcyc7XHJcbmltcG9ydCBPcmllbnRhdGlvbiBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvT3JpZW50YXRpb24uanMnO1xyXG5pbXBvcnQgeyBOb2RlLCBSaWNoVGV4dCwgVGV4dCB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBUYW5kZW0gZnJvbSAnLi4vLi4vLi4vLi4vdGFuZGVtL2pzL1RhbmRlbS5qcyc7XHJcbmltcG9ydCBmb3VyaWVyTWFraW5nV2F2ZXMgZnJvbSAnLi4vLi4vZm91cmllck1ha2luZ1dhdmVzLmpzJztcclxuaW1wb3J0IEZvdXJpZXJNYWtpbmdXYXZlc1N0cmluZ3MgZnJvbSAnLi4vLi4vRm91cmllck1ha2luZ1dhdmVzU3RyaW5ncy5qcyc7XHJcbmltcG9ydCBGTVdDb2xvcnMgZnJvbSAnLi4vRk1XQ29sb3JzLmpzJztcclxuaW1wb3J0IEZNV0NvbnN0YW50cyBmcm9tICcuLi9GTVdDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgRk1XU3ltYm9scyBmcm9tICcuLi9GTVdTeW1ib2xzLmpzJztcclxuaW1wb3J0IEludGVyYWN0aXZlQW1wbGl0dWRlc0NoYXJ0IGZyb20gJy4uL21vZGVsL0ludGVyYWN0aXZlQW1wbGl0dWRlc0NoYXJ0LmpzJztcclxuaW1wb3J0IEFtcGxpdHVkZUtleXBhZERpYWxvZyBmcm9tICcuL0FtcGxpdHVkZUtleXBhZERpYWxvZy5qcyc7XHJcbmltcG9ydCBBbXBsaXR1ZGVOdW1iZXJEaXNwbGF5IGZyb20gJy4vQW1wbGl0dWRlTnVtYmVyRGlzcGxheS5qcyc7XHJcbmltcG9ydCBBbXBsaXR1ZGVTbGlkZXIgZnJvbSAnLi9BbXBsaXR1ZGVTbGlkZXIuanMnO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IFhfTUFSR0lOID0gMC41OyAvLyB4LWF4aXMgbWFyZ2lucywgaW4gbW9kZWwgY29vcmRpbmF0ZXNcclxuY29uc3QgWV9USUNLX1NQQUNJTkcgPSAwLjU7IC8vIHNwYWNpbmcgb2YgeS1heGlzIHRpY2sgbWFya3MsIGluIG1vZGVsIGNvb3JkaW5hdGVzXHJcbmNvbnN0IFlfVElDS19MQUJFTF9ERUNJTUFMX1BMQUNFUyA9IDE7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbnRlcmFjdGl2ZUFtcGxpdHVkZXNDaGFydE5vZGUgZXh0ZW5kcyBOb2RlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtJbnRlcmFjdGl2ZUFtcGxpdHVkZXNDaGFydH0gYW1wbGl0dWRlc0NoYXJ0XHJcbiAgICogQHBhcmFtIHtBbXBsaXR1ZGVLZXlwYWREaWFsb2d9IGFtcGxpdHVkZUtleXBhZERpYWxvZyAtIGtleXBhZCBmb3IgZWRpdGluZyBhbXBsaXR1ZGUgdmFsdWVzXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBhbXBsaXR1ZGVzQ2hhcnQsIGFtcGxpdHVkZUtleXBhZERpYWxvZywgb3B0aW9ucyApIHtcclxuXHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBhbXBsaXR1ZGVzQ2hhcnQgaW5zdGFuY2VvZiBJbnRlcmFjdGl2ZUFtcGxpdHVkZXNDaGFydCApO1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggYW1wbGl0dWRlS2V5cGFkRGlhbG9nIGluc3RhbmNlb2YgQW1wbGl0dWRlS2V5cGFkRGlhbG9nICk7XHJcblxyXG4gICAgb3B0aW9ucyA9IG1lcmdlKCB7XHJcblxyXG4gICAgICAvLyBJbnRlcmFjdGl2ZUFtcGxpdHVkZXNDaGFydE5vZGUgb3B0aW9uc1xyXG4gICAgICAvLyB7ZnVuY3Rpb259IGNhbGxlZCB3aGVuIHRoZSB1c2VyIHN0YXJ0cyBlZGl0aW5nIGFueSBhbXBsaXR1ZGUgdmFsdWVcclxuICAgICAgb25FZGl0OiBfLm5vb3AsXHJcblxyXG4gICAgICAvLyBBbXBsaXR1ZGVTbGlkZXIgb3B0aW9uc1xyXG4gICAgICBhbXBsaXR1ZGVTbGlkZXJPcHRpb25zOiBudWxsLFxyXG5cclxuICAgICAgLy8gQW1wbGl0dWRlTnVtYmVyRGlzcGxheSBvcHRpb25zXHJcbiAgICAgIGFtcGxpdHVkZU51bWJlckRpc3BsYXlPcHRpb25zOiBudWxsLFxyXG5cclxuICAgICAgY2hhcnRUcmFuc2Zvcm1PcHRpb25zOiB7XHJcbiAgICAgICAgdmlld1dpZHRoOiBGTVdDb25zdGFudHMuQ0hBUlRfUkVDVEFOR0xFX1NJWkUud2lkdGgsXHJcbiAgICAgICAgdmlld0hlaWdodDogRk1XQ29uc3RhbnRzLkNIQVJUX1JFQ1RBTkdMRV9TSVpFLmhlaWdodFxyXG4gICAgICB9LFxyXG5cclxuICAgICAgLy8gcGhldC1pbyBvcHRpb25zXHJcbiAgICAgIHRhbmRlbTogVGFuZGVtLlJFUVVJUkVEXHJcbiAgICB9LCBvcHRpb25zICk7XHJcblxyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggIW9wdGlvbnMuY2hhcnRUcmFuc2Zvcm1PcHRpb25zLm1vZGVsWFJhbmdlLCAnSW50ZXJhY3RpdmVBbXBsaXR1ZGVzQ2hhcnROb2RlIHNldHMgbW9kZWxYUmFuZ2UnICk7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhb3B0aW9ucy5jaGFydFRyYW5zZm9ybU9wdGlvbnMubW9kZWxZUmFuZ2UsICdJbnRlcmFjdGl2ZUFtcGxpdHVkZXNDaGFydE5vZGUgc2V0cyBtb2RlbFlSYW5nZScgKTtcclxuXHJcbiAgICAvLyBGaWVsZHMgb2YgaW50ZXJlc3QgaW4gYW1wbGl0dWRlc0NoYXJ0LCB0byBpbXByb3ZlIHJlYWRhYmlsaXR5XHJcbiAgICBjb25zdCBmb3VyaWVyU2VyaWVzID0gYW1wbGl0dWRlc0NoYXJ0LmZvdXJpZXJTZXJpZXM7XHJcbiAgICBjb25zdCBlbXBoYXNpemVkSGFybW9uaWNzID0gYW1wbGl0dWRlc0NoYXJ0LmVtcGhhc2l6ZWRIYXJtb25pY3M7XHJcblxyXG4gICAgLy8gdGhlIHRyYW5zZm9ybSBmcm9tIG1vZGVsIHRvIHZpZXcgY29vcmRpbmF0ZXNcclxuICAgIGNvbnN0IGNoYXJ0VHJhbnNmb3JtID0gbmV3IENoYXJ0VHJhbnNmb3JtKCBtZXJnZSgge1xyXG4gICAgICBtb2RlbFhSYW5nZTogbmV3IFJhbmdlKCAxIC0gWF9NQVJHSU4sIGZvdXJpZXJTZXJpZXMuaGFybW9uaWNzLmxlbmd0aCArIFhfTUFSR0lOICksXHJcbiAgICAgIG1vZGVsWVJhbmdlOiBmb3VyaWVyU2VyaWVzLmFtcGxpdHVkZVJhbmdlXHJcbiAgICB9LCBvcHRpb25zLmNoYXJ0VHJhbnNmb3JtT3B0aW9ucyApICk7XHJcblxyXG4gICAgY29uc3QgY2hhcnRSZWN0YW5nbGUgPSBuZXcgQ2hhcnRSZWN0YW5nbGUoIGNoYXJ0VHJhbnNmb3JtICk7XHJcblxyXG4gICAgLy8geCBheGlzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIGNvbnN0IHhBeGlzTGFiZWxUZXh0ID0gbmV3IFJpY2hUZXh0KCBGTVdTeW1ib2xzLm5TdHJpbmdQcm9wZXJ0eSwge1xyXG4gICAgICBmb250OiBGTVdDb25zdGFudHMuQVhJU19MQUJFTF9GT05ULFxyXG4gICAgICBsZWZ0OiBjaGFydFJlY3RhbmdsZS5yaWdodCArIEZNV0NvbnN0YW50cy5YX0FYSVNfTEFCRUxfU1BBQ0lORyxcclxuICAgICAgY2VudGVyWTogY2hhcnRSZWN0YW5nbGUuY2VudGVyWSxcclxuICAgICAgbWF4V2lkdGg6IEZNV0NvbnN0YW50cy5YX0FYSVNfTEFCRUxfTUFYX1dJRFRILFxyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3hBeGlzTGFiZWxUZXh0JyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8ge0FtcGxpdHVkZVNsaWRlcltdfSBDcmVhdGUgYSBzbGlkZXIgZm9yIGVhY2ggaGFybW9uaWMncyBhbXBsaXR1ZGVcclxuICAgIGNvbnN0IHNsaWRlcnMgPSBmb3VyaWVyU2VyaWVzLmhhcm1vbmljcy5tYXAoIGhhcm1vbmljID0+XHJcbiAgICAgIG5ldyBBbXBsaXR1ZGVTbGlkZXIoIGhhcm1vbmljLCBlbXBoYXNpemVkSGFybW9uaWNzLCBtZXJnZSgge1xyXG4gICAgICAgIHN0YXJ0RHJhZzogb3B0aW9ucy5vbkVkaXQsXHJcbiAgICAgICAgdHJhY2tIZWlnaHQ6IG9wdGlvbnMuY2hhcnRUcmFuc2Zvcm1PcHRpb25zLnZpZXdIZWlnaHQsXHJcbiAgICAgICAgY2VudGVyOiBjaGFydFRyYW5zZm9ybS5tb2RlbFRvVmlld1hZKCBoYXJtb25pYy5vcmRlciwgMCApLFxyXG4gICAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCBgYW1wbGl0dWRlJHtoYXJtb25pYy5vcmRlcn1TbGlkZXJgIClcclxuICAgICAgfSwgb3B0aW9ucy5hbXBsaXR1ZGVTbGlkZXJPcHRpb25zICkgKVxyXG4gICAgKTtcclxuICAgIGNvbnN0IHNsaWRlcnNQYXJlbnQgPSBuZXcgTm9kZSgge1xyXG4gICAgICBjaGlsZHJlbjogc2xpZGVyc1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIHtBbXBsaXR1ZGVOdW1iZXJEaXNwbGF5W119IENyZWF0ZSBhIG51bWJlciBkaXNwbGF5IGZvciBlYWNoIGhhcm1vbmljJ3MgYW1wbGl0dWRlXHJcbiAgICBjb25zdCBudW1iZXJEaXNwbGF5cyA9IGZvdXJpZXJTZXJpZXMuaGFybW9uaWNzLm1hcCggaGFybW9uaWMgPT5cclxuICAgICAgbmV3IEFtcGxpdHVkZU51bWJlckRpc3BsYXkoIGhhcm1vbmljLCBlbXBoYXNpemVkSGFybW9uaWNzLCBhbXBsaXR1ZGVLZXlwYWREaWFsb2csIG1lcmdlKCB7XHJcbiAgICAgICAgcHJlc3M6IG9wdGlvbnMub25FZGl0LFxyXG4gICAgICAgIGNlbnRlclg6IGNoYXJ0VHJhbnNmb3JtLm1vZGVsVG9WaWV3WCggaGFybW9uaWMub3JkZXIgKSxcclxuICAgICAgICBib3R0b206IGNoYXJ0UmVjdGFuZ2xlLnRvcCAtIDEwLFxyXG4gICAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCBgYW1wbGl0dWRlJHtoYXJtb25pYy5vcmRlcn1OdW1iZXJEaXNwbGF5YCApXHJcbiAgICAgIH0sIG9wdGlvbnMuYW1wbGl0dWRlTnVtYmVyRGlzcGxheU9wdGlvbnMgKSApXHJcbiAgICApO1xyXG4gICAgY29uc3QgbnVtYmVyRGlzcGxheXNQYXJlbnQgPSBuZXcgTm9kZSgge1xyXG4gICAgICBjaGlsZHJlbjogbnVtYmVyRGlzcGxheXNcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyB5IGF4aXMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgY29uc3QgeUF4aXNMYWJlbFRleHQgPSBuZXcgUmljaFRleHQoIEZvdXJpZXJNYWtpbmdXYXZlc1N0cmluZ3MuYW1wbGl0dWRlU3RyaW5nUHJvcGVydHksIHtcclxuICAgICAgZm9udDogRk1XQ29uc3RhbnRzLkFYSVNfTEFCRUxfRk9OVCxcclxuICAgICAgcm90YXRpb246IC1NYXRoLlBJIC8gMixcclxuICAgICAgbWF4V2lkdGg6IDAuODUgKiBjaGFydFJlY3RhbmdsZS5oZWlnaHQsXHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAneUF4aXNMYWJlbFRleHQnIClcclxuICAgIH0gKTtcclxuICAgIHlBeGlzTGFiZWxUZXh0LmJvdW5kc1Byb3BlcnR5LmxpbmsoIGJvdW5kcyA9PiB7XHJcbiAgICAgIHlBeGlzTGFiZWxUZXh0LnJpZ2h0ID0gLUZNV0NvbnN0YW50cy5ZX0FYSVNfTEFCRUxfU1BBQ0lORztcclxuICAgICAgeUF4aXNMYWJlbFRleHQuY2VudGVyWSA9IGNoYXJ0UmVjdGFuZ2xlLmNlbnRlclk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgeUdyaWRMaW5lU2V0ID0gbmV3IEdyaWRMaW5lU2V0KCBjaGFydFRyYW5zZm9ybSwgT3JpZW50YXRpb24uVkVSVElDQUwsIFlfVElDS19TUEFDSU5HLCB7XHJcbiAgICAgIHN0cm9rZTogRk1XQ29sb3JzLmFtcGxpdHVkZXNHcmlkTGluZXNTdHJva2VQcm9wZXJ0eSxcclxuICAgICAgbGluZVdpZHRoOiAwLjVcclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCB5TGFiZWxTZXQgPSBuZXcgVGlja0xhYmVsU2V0KCBjaGFydFRyYW5zZm9ybSwgT3JpZW50YXRpb24uVkVSVElDQUwsIFlfVElDS19TUEFDSU5HLCB7XHJcbiAgICAgIGVkZ2U6ICdtaW4nLFxyXG5cclxuICAgICAgLy8gQ3JlYXRlIHRpY2sgbGFiZWxzLiBVc2luZyB0b0ZpeGVkTnVtYmVyIHJlbW92ZXMgdHJhaWxpbmcgemVyb3MuXHJcbiAgICAgIGNyZWF0ZUxhYmVsOiB2YWx1ZSA9PiBuZXcgVGV4dCggVXRpbHMudG9GaXhlZE51bWJlciggdmFsdWUsIFlfVElDS19MQUJFTF9ERUNJTUFMX1BMQUNFUyApLCB7XHJcbiAgICAgICAgZm9udDogRk1XQ29uc3RhbnRzLlRJQ0tfTEFCRUxfRk9OVFxyXG4gICAgICB9IClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBHcm91cCBhbGwgb2YgdGhlIG5vbi1pbnRlcmFjdGl2ZSBwaWVjZXMsIHNvIHRoYXQgd2UgY2FuIGVhc2lseSBrZWVwIHRyYWNrIG9mIGhvdyBtYW55IHRpbWVzXHJcbiAgICAvLyB0aGUgdXNlciBwcmVzc2VzIG9uIHRoZSBpbnRlcmFjdGl2ZSBwaWVjZXMuXHJcbiAgICBjb25zdCBjaGFydFBpZWNlc05vZGUgPSBuZXcgTm9kZSgge1xyXG4gICAgICBwaWNrYWJsZTogZmFsc2UsXHJcbiAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgY2hhcnRSZWN0YW5nbGUsXHJcbiAgICAgICAgeEF4aXNMYWJlbFRleHQsXHJcbiAgICAgICAgeUF4aXNMYWJlbFRleHQsIHlHcmlkTGluZVNldCwgeUxhYmVsU2V0XHJcbiAgICAgIF1cclxuICAgIH0gKTtcclxuXHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhb3B0aW9ucy5jaGlsZHJlbiwgJ0ludGVyYWN0aXZlQW1wbGl0dWRlc0NoYXJ0Tm9kZSBzZXRzIGNoaWxkcmVuJyApO1xyXG4gICAgb3B0aW9ucy5jaGlsZHJlbiA9IFtcclxuICAgICAgY2hhcnRQaWVjZXNOb2RlLFxyXG4gICAgICBzbGlkZXJzUGFyZW50LFxyXG4gICAgICBudW1iZXJEaXNwbGF5c1BhcmVudFxyXG4gICAgXTtcclxuXHJcbiAgICBzdXBlciggb3B0aW9ucyApO1xyXG5cclxuICAgIC8vIHBkb20gLSB0cmF2ZXJzYWwgb3JkZXJcclxuICAgIHRoaXMucGRvbU9yZGVyID0gWyAuLi5zbGlkZXJzLCAuLi5udW1iZXJEaXNwbGF5cyBdO1xyXG5cclxuICAgIC8vIEBwcm90ZWN0ZWRcclxuICAgIHRoaXMuc2xpZGVycyA9IHNsaWRlcnM7IC8vIHtBbXBsaXR1ZGVTbGlkZXJbXX1cclxuICAgIHRoaXMuc2xpZGVyc1BhcmVudCA9IHNsaWRlcnNQYXJlbnQ7IC8vIHtOb2RlfVxyXG4gICAgdGhpcy5udW1iZXJEaXNwbGF5cyA9IG51bWJlckRpc3BsYXlzOyAvLyB7QW1wbGl0dWRlTnVtYmVyRGlzcGxheVtdfVxyXG5cclxuICAgIC8vIEBwdWJsaWNcclxuICAgIHRoaXMuY2hhcnRUcmFuc2Zvcm0gPSBjaGFydFRyYW5zZm9ybTsgLy8ge0NoYXJ0VHJhbnNmb3JtfVxyXG4gICAgdGhpcy5jaGFydFJlY3RhbmdsZSA9IGNoYXJ0UmVjdGFuZ2xlOyAvLyB7Q2hhcnRSZWN0YW5nbGV9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgZGlzcG9zZSgpIHtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIGZhbHNlLCAnZGlzcG9zZSBpcyBub3Qgc3VwcG9ydGVkLCBleGlzdHMgZm9yIHRoZSBsaWZldGltZSBvZiB0aGUgc2ltJyApO1xyXG4gICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gIH1cclxufVxyXG5cclxuZm91cmllck1ha2luZ1dhdmVzLnJlZ2lzdGVyKCAnSW50ZXJhY3RpdmVBbXBsaXR1ZGVzQ2hhcnROb2RlJywgSW50ZXJhY3RpdmVBbXBsaXR1ZGVzQ2hhcnROb2RlICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGNBQWMsTUFBTSx5Q0FBeUM7QUFDcEUsT0FBT0MsY0FBYyxNQUFNLHlDQUF5QztBQUNwRSxPQUFPQyxXQUFXLE1BQU0sc0NBQXNDO0FBQzlELE9BQU9DLFlBQVksTUFBTSx1Q0FBdUM7QUFDaEUsT0FBT0MsS0FBSyxNQUFNLDZCQUE2QjtBQUMvQyxPQUFPQyxLQUFLLE1BQU0sNkJBQTZCO0FBQy9DLE9BQU9DLEtBQUssTUFBTSxtQ0FBbUM7QUFDckQsT0FBT0MsV0FBVyxNQUFNLHlDQUF5QztBQUNqRSxTQUFTQyxJQUFJLEVBQUVDLFFBQVEsRUFBRUMsSUFBSSxRQUFRLG1DQUFtQztBQUN4RSxPQUFPQyxNQUFNLE1BQU0saUNBQWlDO0FBQ3BELE9BQU9DLGtCQUFrQixNQUFNLDZCQUE2QjtBQUM1RCxPQUFPQyx5QkFBeUIsTUFBTSxvQ0FBb0M7QUFDMUUsT0FBT0MsU0FBUyxNQUFNLGlCQUFpQjtBQUN2QyxPQUFPQyxZQUFZLE1BQU0sb0JBQW9CO0FBQzdDLE9BQU9DLFVBQVUsTUFBTSxrQkFBa0I7QUFDekMsT0FBT0MsMEJBQTBCLE1BQU0sd0NBQXdDO0FBQy9FLE9BQU9DLHFCQUFxQixNQUFNLDRCQUE0QjtBQUM5RCxPQUFPQyxzQkFBc0IsTUFBTSw2QkFBNkI7QUFDaEUsT0FBT0MsZUFBZSxNQUFNLHNCQUFzQjs7QUFFbEQ7QUFDQSxNQUFNQyxRQUFRLEdBQUcsR0FBRyxDQUFD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