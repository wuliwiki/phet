// Copyright 2020-2023, University of Colorado Boulder

/**
 * AmplitudeNumberDisplay is a specialization of NumberDisplay that displays the value of a harmonic's amplitude.
 * Clicking on it opens an AmplitudeKeypadDialog, where the user can enter an amplitude value using a keypad.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import merge from '../../../../phet-core/js/merge.js';
import NumberDisplay from '../../../../scenery-phet/js/NumberDisplay.js';
import PhetColorScheme from '../../../../scenery-phet/js/PhetColorScheme.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { InteractiveHighlighting, PressListener, RichText, VBox } from '../../../../scenery/js/imports.js';
import fourierMakingWaves from '../../fourierMakingWaves.js';
import FMWConstants from '../FMWConstants.js';
import FMWQueryParameters from '../FMWQueryParameters.js';
import FMWSymbols from '../FMWSymbols.js';
import EmphasizedHarmonics from '../model/EmphasizedHarmonics.js';
import Harmonic from '../model/Harmonic.js';
import AmplitudeKeypadDialog from './AmplitudeKeypadDialog.js';

// constants
const DEFAULT_FONT = new PhetFont(14);
export default class AmplitudeNumberDisplay extends InteractiveHighlighting(VBox) {
  /**
   * @param {Harmonic} harmonic
   * @param {EmphasizedHarmonics} emphasizedHarmonics
   * @param {AmplitudeKeypadDialog} amplitudeKeypadDialog
   * @param {Object} [options]
   */
  constructor(harmonic, emphasizedHarmonics, amplitudeKeypadDialog, options) {
    assert && assert(harmonic instanceof Harmonic);
    assert && assert(emphasizedHarmonics instanceof EmphasizedHarmonics);
    assert && assert(amplitudeKeypadDialog instanceof AmplitudeKeypadDialog);
    options = merge({
      // AmplitudeNumberDisplay options
      // {function} called when there's a press anywhere on this Node
      press: _.noop,
      // VBox options
      cursor: 'pointer',
      spacing: 2,
      align: 'center',
      // NumberDisplay options
      numberDisplayOptions: {
        align: 'center',
        decimalPlaces: FMWConstants.DISCRETE_AMPLITUDE_DECIMAL_PLACES,
        textOptions: {
          font: DEFAULT_FONT
        }
      },
      // pdom
      tagName: 'button',
      // must be an HTML5 tagName that supports click events
      focusable: FMWQueryParameters.focusableAmplitudeNumberDisplay
    }, options);
    const numberDisplay = new NumberDisplay(harmonic.amplitudeProperty, harmonic.amplitudeProperty.range, options.numberDisplayOptions);
    const labelString = new DerivedProperty([FMWSymbols.AStringProperty], A => `${A}<sub>${harmonic.order}</sub>`);
    const labelNode = new RichText(labelString, {
      font: DEFAULT_FONT,
      maxWidth: numberDisplay.width
    });
    assert && assert(!options.children, 'NAME sets children');
    options.children = [labelNode, numberDisplay];
    super(options);
    const pressListener = new PressListener({
      press: () => {
        // We have started editing
        options.press();

        // Change the background fill to indicate which amplitude we're editing.
        const restoreBackgroundFill = numberDisplay.getBackgroundFill();
        numberDisplay.setBackgroundFill(PhetColorScheme.BUTTON_YELLOW);

        // Emphasize the associated harmonic.
        emphasizedHarmonics.push(amplitudeKeypadDialog, harmonic);

        // Open the keypad dialog.
        amplitudeKeypadDialog.show(harmonic.order,
        // enterCallback, called when the keypad's Enter key fires.
        amplitude => {
          harmonic.amplitudeProperty.value = amplitude;
        },
        // closeCallback, called when the dialog is closed.
        () => {
          numberDisplay.setBackgroundFill(restoreBackgroundFill);

          // De-emphasize the associated harmonic.
          if (emphasizedHarmonics.includesNode(amplitudeKeypadDialog)) {
            emphasizedHarmonics.remove(amplitudeKeypadDialog);
          }
        });
      },
      tandem: options.tandem.createTandem('pressListener'),
      phetioEnabledPropertyInstrumented: true
    });
    this.addInputListener(pressListener);

    // Whether this associated harmonic is emphasized.
    const isEmphasizedProperty = DerivedProperty.or([pressListener.isHighlightedProperty, pressListener.isFocusedProperty]);

    // Emphasize the associated harmonic.
    isEmphasizedProperty.link(isEmphasized => {
      if (isEmphasized) {
        emphasizedHarmonics.push(this, harmonic);
      } else if (emphasizedHarmonics.includesNode(this)) {
        emphasizedHarmonics.remove(this);
      }
    });
  }

  /**
   * @public
   * @override
   */
  dispose() {
    assert && assert(false, 'dispose is not supported, exists for the lifetime of the sim');
    super.dispose();
  }
}
fourierMakingWaves.register('AmplitudeNumberDisplay', AmplitudeNumberDisplay);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJtZXJnZSIsIk51bWJlckRpc3BsYXkiLCJQaGV0Q29sb3JTY2hlbWUiLCJQaGV0Rm9udCIsIkludGVyYWN0aXZlSGlnaGxpZ2h0aW5nIiwiUHJlc3NMaXN0ZW5lciIsIlJpY2hUZXh0IiwiVkJveCIsImZvdXJpZXJNYWtpbmdXYXZlcyIsIkZNV0NvbnN0YW50cyIsIkZNV1F1ZXJ5UGFyYW1ldGVycyIsIkZNV1N5bWJvbHMiLCJFbXBoYXNpemVkSGFybW9uaWNzIiwiSGFybW9uaWMiLCJBbXBsaXR1ZGVLZXlwYWREaWFsb2ciLCJERUZBVUxUX0ZPTlQiLCJBbXBsaXR1ZGVOdW1iZXJEaXNwbGF5IiwiY29uc3RydWN0b3IiLCJoYXJtb25pYyIsImVtcGhhc2l6ZWRIYXJtb25pY3MiLCJhbXBsaXR1ZGVLZXlwYWREaWFsb2ciLCJvcHRpb25zIiwiYXNzZXJ0IiwicHJlc3MiLCJfIiwibm9vcCIsImN1cnNvciIsInNwYWNpbmciLCJhbGlnbiIsIm51bWJlckRpc3BsYXlPcHRpb25zIiwiZGVjaW1hbFBsYWNlcyIsIkRJU0NSRVRFX0FNUExJVFVERV9ERUNJTUFMX1BMQUNFUyIsInRleHRPcHRpb25zIiwiZm9udCIsInRhZ05hbWUiLCJmb2N1c2FibGUiLCJmb2N1c2FibGVBbXBsaXR1ZGVOdW1iZXJEaXNwbGF5IiwibnVtYmVyRGlzcGxheSIsImFtcGxpdHVkZVByb3BlcnR5IiwicmFuZ2UiLCJsYWJlbFN0cmluZyIsIkFTdHJpbmdQcm9wZXJ0eSIsIkEiLCJvcmRlciIsImxhYmVsTm9kZSIsIm1heFdpZHRoIiwid2lkdGgiLCJjaGlsZHJlbiIsInByZXNzTGlzdGVuZXIiLCJyZXN0b3JlQmFja2dyb3VuZEZpbGwiLCJnZXRCYWNrZ3JvdW5kRmlsbCIsInNldEJhY2tncm91bmRGaWxsIiwiQlVUVE9OX1lFTExPVyIsInB1c2giLCJzaG93IiwiYW1wbGl0dWRlIiwidmFsdWUiLCJpbmNsdWRlc05vZGUiLCJyZW1vdmUiLCJ0YW5kZW0iLCJjcmVhdGVUYW5kZW0iLCJwaGV0aW9FbmFibGVkUHJvcGVydHlJbnN0cnVtZW50ZWQiLCJhZGRJbnB1dExpc3RlbmVyIiwiaXNFbXBoYXNpemVkUHJvcGVydHkiLCJvciIsImlzSGlnaGxpZ2h0ZWRQcm9wZXJ0eSIsImlzRm9jdXNlZFByb3BlcnR5IiwibGluayIsImlzRW1waGFzaXplZCIsImRpc3Bvc2UiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkFtcGxpdHVkZU51bWJlckRpc3BsYXkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjAtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogQW1wbGl0dWRlTnVtYmVyRGlzcGxheSBpcyBhIHNwZWNpYWxpemF0aW9uIG9mIE51bWJlckRpc3BsYXkgdGhhdCBkaXNwbGF5cyB0aGUgdmFsdWUgb2YgYSBoYXJtb25pYydzIGFtcGxpdHVkZS5cclxuICogQ2xpY2tpbmcgb24gaXQgb3BlbnMgYW4gQW1wbGl0dWRlS2V5cGFkRGlhbG9nLCB3aGVyZSB0aGUgdXNlciBjYW4gZW50ZXIgYW4gYW1wbGl0dWRlIHZhbHVlIHVzaW5nIGEga2V5cGFkLlxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCBEZXJpdmVkUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9EZXJpdmVkUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgbWVyZ2UgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL21lcmdlLmpzJztcclxuaW1wb3J0IE51bWJlckRpc3BsYXkgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL051bWJlckRpc3BsYXkuanMnO1xyXG5pbXBvcnQgUGhldENvbG9yU2NoZW1lIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9QaGV0Q29sb3JTY2hlbWUuanMnO1xyXG5pbXBvcnQgUGhldEZvbnQgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1BoZXRGb250LmpzJztcclxuaW1wb3J0IHsgSW50ZXJhY3RpdmVIaWdobGlnaHRpbmcsIFByZXNzTGlzdGVuZXIsIFJpY2hUZXh0LCBWQm94IH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IGZvdXJpZXJNYWtpbmdXYXZlcyBmcm9tICcuLi8uLi9mb3VyaWVyTWFraW5nV2F2ZXMuanMnO1xyXG5pbXBvcnQgRk1XQ29uc3RhbnRzIGZyb20gJy4uL0ZNV0NvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBGTVdRdWVyeVBhcmFtZXRlcnMgZnJvbSAnLi4vRk1XUXVlcnlQYXJhbWV0ZXJzLmpzJztcclxuaW1wb3J0IEZNV1N5bWJvbHMgZnJvbSAnLi4vRk1XU3ltYm9scy5qcyc7XHJcbmltcG9ydCBFbXBoYXNpemVkSGFybW9uaWNzIGZyb20gJy4uL21vZGVsL0VtcGhhc2l6ZWRIYXJtb25pY3MuanMnO1xyXG5pbXBvcnQgSGFybW9uaWMgZnJvbSAnLi4vbW9kZWwvSGFybW9uaWMuanMnO1xyXG5pbXBvcnQgQW1wbGl0dWRlS2V5cGFkRGlhbG9nIGZyb20gJy4vQW1wbGl0dWRlS2V5cGFkRGlhbG9nLmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBERUZBVUxUX0ZPTlQgPSBuZXcgUGhldEZvbnQoIDE0ICk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbXBsaXR1ZGVOdW1iZXJEaXNwbGF5IGV4dGVuZHMgSW50ZXJhY3RpdmVIaWdobGlnaHRpbmcoIFZCb3ggKSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7SGFybW9uaWN9IGhhcm1vbmljXHJcbiAgICogQHBhcmFtIHtFbXBoYXNpemVkSGFybW9uaWNzfSBlbXBoYXNpemVkSGFybW9uaWNzXHJcbiAgICogQHBhcmFtIHtBbXBsaXR1ZGVLZXlwYWREaWFsb2d9IGFtcGxpdHVkZUtleXBhZERpYWxvZ1xyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cclxuICAgKi9cclxuICBjb25zdHJ1Y3RvciggaGFybW9uaWMsIGVtcGhhc2l6ZWRIYXJtb25pY3MsIGFtcGxpdHVkZUtleXBhZERpYWxvZywgb3B0aW9ucyApIHtcclxuXHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBoYXJtb25pYyBpbnN0YW5jZW9mIEhhcm1vbmljICk7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBlbXBoYXNpemVkSGFybW9uaWNzIGluc3RhbmNlb2YgRW1waGFzaXplZEhhcm1vbmljcyApO1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggYW1wbGl0dWRlS2V5cGFkRGlhbG9nIGluc3RhbmNlb2YgQW1wbGl0dWRlS2V5cGFkRGlhbG9nICk7XHJcblxyXG4gICAgb3B0aW9ucyA9IG1lcmdlKCB7XHJcblxyXG4gICAgICAvLyBBbXBsaXR1ZGVOdW1iZXJEaXNwbGF5IG9wdGlvbnNcclxuICAgICAgLy8ge2Z1bmN0aW9ufSBjYWxsZWQgd2hlbiB0aGVyZSdzIGEgcHJlc3MgYW55d2hlcmUgb24gdGhpcyBOb2RlXHJcbiAgICAgIHByZXNzOiBfLm5vb3AsXHJcblxyXG4gICAgICAvLyBWQm94IG9wdGlvbnNcclxuICAgICAgY3Vyc29yOiAncG9pbnRlcicsXHJcbiAgICAgIHNwYWNpbmc6IDIsXHJcbiAgICAgIGFsaWduOiAnY2VudGVyJyxcclxuXHJcbiAgICAgIC8vIE51bWJlckRpc3BsYXkgb3B0aW9uc1xyXG4gICAgICBudW1iZXJEaXNwbGF5T3B0aW9uczoge1xyXG4gICAgICAgIGFsaWduOiAnY2VudGVyJyxcclxuICAgICAgICBkZWNpbWFsUGxhY2VzOiBGTVdDb25zdGFudHMuRElTQ1JFVEVfQU1QTElUVURFX0RFQ0lNQUxfUExBQ0VTLFxyXG4gICAgICAgIHRleHRPcHRpb25zOiB7XHJcbiAgICAgICAgICBmb250OiBERUZBVUxUX0ZPTlRcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvLyBwZG9tXHJcbiAgICAgIHRhZ05hbWU6ICdidXR0b24nLCAvLyBtdXN0IGJlIGFuIEhUTUw1IHRhZ05hbWUgdGhhdCBzdXBwb3J0cyBjbGljayBldmVudHNcclxuICAgICAgZm9jdXNhYmxlOiBGTVdRdWVyeVBhcmFtZXRlcnMuZm9jdXNhYmxlQW1wbGl0dWRlTnVtYmVyRGlzcGxheVxyXG4gICAgfSwgb3B0aW9ucyApO1xyXG5cclxuICAgIGNvbnN0IG51bWJlckRpc3BsYXkgPSBuZXcgTnVtYmVyRGlzcGxheSggaGFybW9uaWMuYW1wbGl0dWRlUHJvcGVydHksIGhhcm1vbmljLmFtcGxpdHVkZVByb3BlcnR5LnJhbmdlLFxyXG4gICAgICBvcHRpb25zLm51bWJlckRpc3BsYXlPcHRpb25zICk7XHJcblxyXG4gICAgY29uc3QgbGFiZWxTdHJpbmcgPSBuZXcgRGVyaXZlZFByb3BlcnR5KCBbIEZNV1N5bWJvbHMuQVN0cmluZ1Byb3BlcnR5IF0sXHJcbiAgICAgIEEgPT4gYCR7QX08c3ViPiR7aGFybW9uaWMub3JkZXJ9PC9zdWI+YCApO1xyXG5cclxuICAgIGNvbnN0IGxhYmVsTm9kZSA9IG5ldyBSaWNoVGV4dCggbGFiZWxTdHJpbmcsIHtcclxuICAgICAgZm9udDogREVGQVVMVF9GT05ULFxyXG4gICAgICBtYXhXaWR0aDogbnVtYmVyRGlzcGxheS53aWR0aFxyXG4gICAgfSApO1xyXG5cclxuICAgIGFzc2VydCAmJiBhc3NlcnQoICFvcHRpb25zLmNoaWxkcmVuLCAnTkFNRSBzZXRzIGNoaWxkcmVuJyApO1xyXG4gICAgb3B0aW9ucy5jaGlsZHJlbiA9IFsgbGFiZWxOb2RlLCBudW1iZXJEaXNwbGF5IF07XHJcblxyXG4gICAgc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcbiAgICBjb25zdCBwcmVzc0xpc3RlbmVyID0gbmV3IFByZXNzTGlzdGVuZXIoIHtcclxuICAgICAgcHJlc3M6ICgpID0+IHtcclxuXHJcbiAgICAgICAgLy8gV2UgaGF2ZSBzdGFydGVkIGVkaXRpbmdcclxuICAgICAgICBvcHRpb25zLnByZXNzKCk7XHJcblxyXG4gICAgICAgIC8vIENoYW5nZSB0aGUgYmFja2dyb3VuZCBmaWxsIHRvIGluZGljYXRlIHdoaWNoIGFtcGxpdHVkZSB3ZSdyZSBlZGl0aW5nLlxyXG4gICAgICAgIGNvbnN0IHJlc3RvcmVCYWNrZ3JvdW5kRmlsbCA9IG51bWJlckRpc3BsYXkuZ2V0QmFja2dyb3VuZEZpbGwoKTtcclxuICAgICAgICBudW1iZXJEaXNwbGF5LnNldEJhY2tncm91bmRGaWxsKCBQaGV0Q29sb3JTY2hlbWUuQlVUVE9OX1lFTExPVyApO1xyXG5cclxuICAgICAgICAvLyBFbXBoYXNpemUgdGhlIGFzc29jaWF0ZWQgaGFybW9uaWMuXHJcbiAgICAgICAgZW1waGFzaXplZEhhcm1vbmljcy5wdXNoKCBhbXBsaXR1ZGVLZXlwYWREaWFsb2csIGhhcm1vbmljICk7XHJcblxyXG4gICAgICAgIC8vIE9wZW4gdGhlIGtleXBhZCBkaWFsb2cuXHJcbiAgICAgICAgYW1wbGl0dWRlS2V5cGFkRGlhbG9nLnNob3coIGhhcm1vbmljLm9yZGVyLFxyXG5cclxuICAgICAgICAgIC8vIGVudGVyQ2FsbGJhY2ssIGNhbGxlZCB3aGVuIHRoZSBrZXlwYWQncyBFbnRlciBrZXkgZmlyZXMuXHJcbiAgICAgICAgICBhbXBsaXR1ZGUgPT4geyBoYXJtb25pYy5hbXBsaXR1ZGVQcm9wZXJ0eS52YWx1ZSA9IGFtcGxpdHVkZTsgfSxcclxuXHJcbiAgICAgICAgICAvLyBjbG9zZUNhbGxiYWNrLCBjYWxsZWQgd2hlbiB0aGUgZGlhbG9nIGlzIGNsb3NlZC5cclxuICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgbnVtYmVyRGlzcGxheS5zZXRCYWNrZ3JvdW5kRmlsbCggcmVzdG9yZUJhY2tncm91bmRGaWxsICk7XHJcblxyXG4gICAgICAgICAgICAvLyBEZS1lbXBoYXNpemUgdGhlIGFzc29jaWF0ZWQgaGFybW9uaWMuXHJcbiAgICAgICAgICAgIGlmICggZW1waGFzaXplZEhhcm1vbmljcy5pbmNsdWRlc05vZGUoIGFtcGxpdHVkZUtleXBhZERpYWxvZyApICkge1xyXG4gICAgICAgICAgICAgIGVtcGhhc2l6ZWRIYXJtb25pY3MucmVtb3ZlKCBhbXBsaXR1ZGVLZXlwYWREaWFsb2cgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAncHJlc3NMaXN0ZW5lcicgKSxcclxuICAgICAgcGhldGlvRW5hYmxlZFByb3BlcnR5SW5zdHJ1bWVudGVkOiB0cnVlXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmFkZElucHV0TGlzdGVuZXIoIHByZXNzTGlzdGVuZXIgKTtcclxuXHJcbiAgICAvLyBXaGV0aGVyIHRoaXMgYXNzb2NpYXRlZCBoYXJtb25pYyBpcyBlbXBoYXNpemVkLlxyXG4gICAgY29uc3QgaXNFbXBoYXNpemVkUHJvcGVydHkgPSBEZXJpdmVkUHJvcGVydHkub3IoIFsgcHJlc3NMaXN0ZW5lci5pc0hpZ2hsaWdodGVkUHJvcGVydHksIHByZXNzTGlzdGVuZXIuaXNGb2N1c2VkUHJvcGVydHkgXSApO1xyXG5cclxuICAgIC8vIEVtcGhhc2l6ZSB0aGUgYXNzb2NpYXRlZCBoYXJtb25pYy5cclxuICAgIGlzRW1waGFzaXplZFByb3BlcnR5LmxpbmsoIGlzRW1waGFzaXplZCA9PiB7XHJcbiAgICAgIGlmICggaXNFbXBoYXNpemVkICkge1xyXG4gICAgICAgIGVtcGhhc2l6ZWRIYXJtb25pY3MucHVzaCggdGhpcywgaGFybW9uaWMgKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmICggZW1waGFzaXplZEhhcm1vbmljcy5pbmNsdWRlc05vZGUoIHRoaXMgKSApIHtcclxuICAgICAgICBlbXBoYXNpemVkSGFybW9uaWNzLnJlbW92ZSggdGhpcyApO1xyXG4gICAgICB9XHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcHVibGljXHJcbiAgICogQG92ZXJyaWRlXHJcbiAgICovXHJcbiAgZGlzcG9zZSgpIHtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIGZhbHNlLCAnZGlzcG9zZSBpcyBub3Qgc3VwcG9ydGVkLCBleGlzdHMgZm9yIHRoZSBsaWZldGltZSBvZiB0aGUgc2ltJyApO1xyXG4gICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gIH1cclxufVxyXG5cclxuZm91cmllck1ha2luZ1dhdmVzLnJlZ2lzdGVyKCAnQW1wbGl0dWRlTnVtYmVyRGlzcGxheScsIEFtcGxpdHVkZU51bWJlckRpc3BsYXkgKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxlQUFlLE1BQU0sd0NBQXdDO0FBQ3BFLE9BQU9DLEtBQUssTUFBTSxtQ0FBbUM7QUFDckQsT0FBT0MsYUFBYSxNQUFNLDhDQUE4QztBQUN4RSxPQUFPQyxlQUFlLE1BQU0sZ0RBQWdEO0FBQzVFLE9BQU9DLFFBQVEsTUFBTSx5Q0FBeUM7QUFDOUQsU0FBU0MsdUJBQXVCLEVBQUVDLGFBQWEsRUFBRUMsUUFBUSxFQUFFQyxJQUFJLFFBQVEsbUNBQW1DO0FBQzFHLE9BQU9DLGtCQUFrQixNQUFNLDZCQUE2QjtBQUM1RCxPQUFPQyxZQUFZLE1BQU0sb0JBQW9CO0FBQzdDLE9BQU9DLGtCQUFrQixNQUFNLDBCQUEwQjtBQUN6RCxPQUFPQyxVQUFVLE1BQU0sa0JBQWtCO0FBQ3pDLE9BQU9DLG1CQUFtQixNQUFNLGlDQUFpQztBQUNqRSxPQUFPQyxRQUFRLE1BQU0sc0JBQXNCO0FBQzNDLE9BQU9DLHFCQUFxQixNQUFNLDRCQUE0Qjs7QUFFOUQ7QUFDQSxNQUFNQyxZQUFZLEdBQUcsSUFBSVosUUFBUSxDQUFFLEVBQUcsQ0FBQztBQUV2QyxlQUFlLE1BQU1hLHNCQUFzQixTQUFTWix1QkFBdUIsQ0FBRUcsSUFBSyxDQUFDLENBQUM7RUFFbEY7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VVLFdBQVdBLENBQUVDLFFB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