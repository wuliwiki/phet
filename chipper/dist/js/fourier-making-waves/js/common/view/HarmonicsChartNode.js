// Copyright 2020-2023, University of Colorado Boulder

/**
 * HarmonicsChartNode is the view base class for the 'Harmonics' chart in the 'Discrete' and 'Wave Game' screens.
 * It creates and manages a plot for each harmonic in a Fourier series.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import ChartCanvasNode from '../../../../bamboo/js/ChartCanvasNode.js';
import { Shape } from '../../../../kite/js/imports.js';
import merge from '../../../../phet-core/js/merge.js';
import { Color } from '../../../../scenery/js/imports.js';
import HarmonicPlot from '../../discrete/view/HarmonicPlot.js';
import fourierMakingWaves from '../../fourierMakingWaves.js';
import HarmonicsChart from '../model/HarmonicsChart.js';
import DomainChartNode from './DomainChartNode.js';

// constants
const NORMAL_LINE_WIDTH = 1;
const EMPHASIZED_LINE_WIDTH = 2;
const DE_EMPHASIZED_LINE_WIDTH = 0.5;
const DE_EMPHASIZED_STROKE = Color.grayColor(150);
export default class HarmonicsChartNode extends DomainChartNode {
  /**
   * @param {HarmonicsChart} harmonicsChart
   * @param {Object} [options]
   */
  constructor(harmonicsChart, options) {
    assert && assert(harmonicsChart instanceof HarmonicsChart);

    // Fields of interest in harmonicsChart, to improve readability
    const harmonics = harmonicsChart.fourierSeries.harmonics;
    const harmonicDataSetProperties = harmonicsChart.harmonicDataSetProperties;
    const emphasizedHarmonics = harmonicsChart.emphasizedHarmonics;
    const yAxisDescription = harmonicsChart.yAxisDescription;
    options = merge({
      chartTransformOptions: {
        modelYRange: yAxisDescription.range
      },
      yGridLineSpacing: yAxisDescription.gridLineSpacing,
      yTickMarkSpacing: yAxisDescription.tickMarkSpacing,
      yTickLabelSpacing: yAxisDescription.tickLabelSpacing
    }, options);
    super(harmonicsChart, options);

    // {HarmonicPlot[]} a plot for each harmonic in the Fourier series, in harmonic order, rendered using Canvas
    const plots = [];
    assert && assert(harmonics.length === harmonicDataSetProperties.length, 'a data set is required for each harmonic');
    for (let i = 0; i < harmonics.length; i++) {
      plots.push(new HarmonicPlot(this.chartTransform, harmonics[i], harmonicDataSetProperties[i]));
    }

    // Render the plots using Canvas, clipped to chartRectangle.
    // Reverse the order, so that the fundamental is rendered last and is therefore in the foreground.
    const chartCanvasNode = new ChartCanvasNode(this.chartTransform, plots.slice().reverse(), {
      clipArea: Shape.bounds(this.chartRectangle.bounds)
    });
    this.addChild(chartCanvasNode);

    // When any plot changes, redraw the entire Canvas.
    const plotChangedListener = () => chartCanvasNode.update();
    plots.forEach(plot => plot.changedEmitter.addListener(plotChangedListener));

    // Visually emphasize harmonics, see https://github.com/phetsims/fourier-making-waves/issues/31
    const emphasizedHarmonicsChangedListener = () => {
      plots.forEach(plot => {
        const harmonic = plot.harmonic;
        if (emphasizedHarmonics.length === 0) {
          // No emphasis, all plots have their normal color and lineWidth.
          plot.lineWidth = NORMAL_LINE_WIDTH;
          plot.setStroke(harmonic.colorProperty.value);
        } else {
          // Emphasize some plots, de-emphasize other plots.
          if (emphasizedHarmonics.includesHarmonic(harmonic)) {
            plot.lineWidth = EMPHASIZED_LINE_WIDTH;
            plot.setStroke(harmonic.colorProperty.value);
          } else {
            plot.lineWidth = DE_EMPHASIZED_LINE_WIDTH;
            plot.setStroke(DE_EMPHASIZED_STROKE);
          }
        }
      });
      chartCanvasNode.update();
    };
    emphasizedHarmonics.addChangedListener(emphasizedHarmonicsChangedListener);
  }
}
fourierMakingWaves.register('HarmonicsChartNode', HarmonicsChartNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDaGFydENhbnZhc05vZGUiLCJTaGFwZSIsIm1lcmdlIiwiQ29sb3IiLCJIYXJtb25pY1Bsb3QiLCJmb3VyaWVyTWFraW5nV2F2ZXMiLCJIYXJtb25pY3NDaGFydCIsIkRvbWFpbkNoYXJ0Tm9kZSIsIk5PUk1BTF9MSU5FX1dJRFRIIiwiRU1QSEFTSVpFRF9MSU5FX1dJRFRIIiwiREVfRU1QSEFTSVpFRF9MSU5FX1dJRFRIIiwiREVfRU1QSEFTSVpFRF9TVFJPS0UiLCJncmF5Q29sb3IiLCJIYXJtb25pY3NDaGFydE5vZGUiLCJjb25zdHJ1Y3RvciIsImhhcm1vbmljc0NoYXJ0Iiwib3B0aW9ucyIsImFzc2VydCIsImhhcm1vbmljcyIsImZvdXJpZXJTZXJpZXMiLCJoYXJtb25pY0RhdGFTZXRQcm9wZXJ0aWVzIiwiZW1waGFzaXplZEhhcm1vbmljcyIsInlBeGlzRGVzY3JpcHRpb24iLCJjaGFydFRyYW5zZm9ybU9wdGlvbnMiLCJtb2RlbFlSYW5nZSIsInJhbmdlIiwieUdyaWRMaW5lU3BhY2luZyIsImdyaWRMaW5lU3BhY2luZyIsInlUaWNrTWFya1NwYWNpbmciLCJ0aWNrTWFya1NwYWNpbmciLCJ5VGlja0xhYmVsU3BhY2luZyIsInRpY2tMYWJlbFNwYWNpbmciLCJwbG90cyIsImxlbmd0aCIsImkiLCJwdXNoIiwiY2hhcnRUcmFuc2Zvcm0iLCJjaGFydENhbnZhc05vZGUiLCJzbGljZSIsInJldmVyc2UiLCJjbGlwQXJlYSIsImJvdW5kcyIsImNoYXJ0UmVjdGFuZ2xlIiwiYWRkQ2hpbGQiLCJwbG90Q2hhbmdlZExpc3RlbmVyIiwidXBkYXRlIiwiZm9yRWFjaCIsInBsb3QiLCJjaGFuZ2VkRW1pdHRlciIsImFkZExpc3RlbmVyIiwiZW1waGFzaXplZEhhcm1vbmljc0NoYW5nZWRMaXN0ZW5lciIsImhhcm1vbmljIiwibGluZVdpZHRoIiwic2V0U3Ryb2tlIiwiY29sb3JQcm9wZXJ0eSIsInZhbHVlIiwiaW5jbHVkZXNIYXJtb25pYyIsImFkZENoYW5nZWRMaXN0ZW5lciIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiSGFybW9uaWNzQ2hhcnROb2RlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIwLTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIEhhcm1vbmljc0NoYXJ0Tm9kZSBpcyB0aGUgdmlldyBiYXNlIGNsYXNzIGZvciB0aGUgJ0hhcm1vbmljcycgY2hhcnQgaW4gdGhlICdEaXNjcmV0ZScgYW5kICdXYXZlIEdhbWUnIHNjcmVlbnMuXHJcbiAqIEl0IGNyZWF0ZXMgYW5kIG1hbmFnZXMgYSBwbG90IGZvciBlYWNoIGhhcm1vbmljIGluIGEgRm91cmllciBzZXJpZXMuXHJcbiAqXHJcbiAqIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXHJcbiAqL1xyXG5cclxuaW1wb3J0IENoYXJ0Q2FudmFzTm9kZSBmcm9tICcuLi8uLi8uLi8uLi9iYW1ib28vanMvQ2hhcnRDYW52YXNOb2RlLmpzJztcclxuaW1wb3J0IHsgU2hhcGUgfSBmcm9tICcuLi8uLi8uLi8uLi9raXRlL2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgbWVyZ2UgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL21lcmdlLmpzJztcclxuaW1wb3J0IHsgQ29sb3IgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgSGFybW9uaWNQbG90IGZyb20gJy4uLy4uL2Rpc2NyZXRlL3ZpZXcvSGFybW9uaWNQbG90LmpzJztcclxuaW1wb3J0IGZvdXJpZXJNYWtpbmdXYXZlcyBmcm9tICcuLi8uLi9mb3VyaWVyTWFraW5nV2F2ZXMuanMnO1xyXG5pbXBvcnQgSGFybW9uaWNzQ2hhcnQgZnJvbSAnLi4vbW9kZWwvSGFybW9uaWNzQ2hhcnQuanMnO1xyXG5pbXBvcnQgRG9tYWluQ2hhcnROb2RlIGZyb20gJy4vRG9tYWluQ2hhcnROb2RlLmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBOT1JNQUxfTElORV9XSURUSCA9IDE7XHJcbmNvbnN0IEVNUEhBU0laRURfTElORV9XSURUSCA9IDI7XHJcbmNvbnN0IERFX0VNUEhBU0laRURfTElORV9XSURUSCA9IDAuNTtcclxuY29uc3QgREVfRU1QSEFTSVpFRF9TVFJPS0UgPSBDb2xvci5ncmF5Q29sb3IoIDE1MCApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSGFybW9uaWNzQ2hhcnROb2RlIGV4dGVuZHMgRG9tYWluQ2hhcnROb2RlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtIYXJtb25pY3NDaGFydH0gaGFybW9uaWNzQ2hhcnRcclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIGhhcm1vbmljc0NoYXJ0LCBvcHRpb25zICkge1xyXG5cclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIGhhcm1vbmljc0NoYXJ0IGluc3RhbmNlb2YgSGFybW9uaWNzQ2hhcnQgKTtcclxuXHJcbiAgICAvLyBGaWVsZHMgb2YgaW50ZXJlc3QgaW4gaGFybW9uaWNzQ2hhcnQsIHRvIGltcHJvdmUgcmVhZGFiaWxpdHlcclxuICAgIGNvbnN0IGhhcm1vbmljcyA9IGhhcm1vbmljc0NoYXJ0LmZvdXJpZXJTZXJpZXMuaGFybW9uaWNzO1xyXG4gICAgY29uc3QgaGFybW9uaWNEYXRhU2V0UHJvcGVydGllcyA9IGhhcm1vbmljc0NoYXJ0Lmhhcm1vbmljRGF0YVNldFByb3BlcnRpZXM7XHJcbiAgICBjb25zdCBlbXBoYXNpemVkSGFybW9uaWNzID0gaGFybW9uaWNzQ2hhcnQuZW1waGFzaXplZEhhcm1vbmljcztcclxuICAgIGNvbnN0IHlBeGlzRGVzY3JpcHRpb24gPSBoYXJtb25pY3NDaGFydC55QXhpc0Rlc2NyaXB0aW9uO1xyXG5cclxuICAgIG9wdGlvbnMgPSBtZXJnZSgge1xyXG4gICAgICBjaGFydFRyYW5zZm9ybU9wdGlvbnM6IHtcclxuICAgICAgICBtb2RlbFlSYW5nZTogeUF4aXNEZXNjcmlwdGlvbi5yYW5nZVxyXG4gICAgICB9LFxyXG4gICAgICB5R3JpZExpbmVTcGFjaW5nOiB5QXhpc0Rlc2NyaXB0aW9uLmdyaWRMaW5lU3BhY2luZyxcclxuICAgICAgeVRpY2tNYXJrU3BhY2luZzogeUF4aXNEZXNjcmlwdGlvbi50aWNrTWFya1NwYWNpbmcsXHJcbiAgICAgIHlUaWNrTGFiZWxTcGFjaW5nOiB5QXhpc0Rlc2NyaXB0aW9uLnRpY2tMYWJlbFNwYWNpbmdcclxuICAgIH0sIG9wdGlvbnMgKTtcclxuXHJcbiAgICBzdXBlciggaGFybW9uaWNzQ2hhcnQsIG9wdGlvbnMgKTtcclxuXHJcbiAgICAvLyB7SGFybW9uaWNQbG90W119IGEgcGxvdCBmb3IgZWFjaCBoYXJtb25pYyBpbiB0aGUgRm91cmllciBzZXJpZXMsIGluIGhhcm1vbmljIG9yZGVyLCByZW5kZXJlZCB1c2luZyBDYW52YXNcclxuICAgIGNvbnN0IHBsb3RzID0gW107XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBoYXJtb25pY3MubGVuZ3RoID09PSBoYXJtb25pY0RhdGFTZXRQcm9wZXJ0aWVzLmxlbmd0aCwgJ2EgZGF0YSBzZXQgaXMgcmVxdWlyZWQgZm9yIGVhY2ggaGFybW9uaWMnICk7XHJcbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBoYXJtb25pY3MubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgIHBsb3RzLnB1c2goIG5ldyBIYXJtb25pY1Bsb3QoIHRoaXMuY2hhcnRUcmFuc2Zvcm0sIGhhcm1vbmljc1sgaSBdLCBoYXJtb25pY0RhdGFTZXRQcm9wZXJ0aWVzWyBpIF0gKSApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJlbmRlciB0aGUgcGxvdHMgdXNpbmcgQ2FudmFzLCBjbGlwcGVkIHRvIGNoYXJ0UmVjdGFuZ2xlLlxyXG4gICAgLy8gUmV2ZXJzZSB0aGUgb3JkZXIsIHNvIHRoYXQgdGhlIGZ1bmRhbWVudGFsIGlzIHJlbmRlcmVkIGxhc3QgYW5kIGlzIHRoZXJlZm9yZSBpbiB0aGUgZm9yZWdyb3VuZC5cclxuICAgIGNvbnN0IGNoYXJ0Q2FudmFzTm9kZSA9IG5ldyBDaGFydENhbnZhc05vZGUoIHRoaXMuY2hhcnRUcmFuc2Zvcm0sIHBsb3RzLnNsaWNlKCkucmV2ZXJzZSgpLCB7XHJcbiAgICAgIGNsaXBBcmVhOiBTaGFwZS5ib3VuZHMoIHRoaXMuY2hhcnRSZWN0YW5nbGUuYm91bmRzIClcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIGNoYXJ0Q2FudmFzTm9kZSApO1xyXG5cclxuICAgIC8vIFdoZW4gYW55IHBsb3QgY2hhbmdlcywgcmVkcmF3IHRoZSBlbnRpcmUgQ2FudmFzLlxyXG4gICAgY29uc3QgcGxvdENoYW5nZWRMaXN0ZW5lciA9ICgpID0+IGNoYXJ0Q2FudmFzTm9kZS51cGRhdGUoKTtcclxuICAgIHBsb3RzLmZvckVhY2goIHBsb3QgPT4gcGxvdC5jaGFuZ2VkRW1pdHRlci5hZGRMaXN0ZW5lciggcGxvdENoYW5nZWRMaXN0ZW5lciApICk7XHJcblxyXG4gICAgLy8gVmlzdWFsbHkgZW1waGFzaXplIGhhcm1vbmljcywgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9mb3VyaWVyLW1ha2luZy13YXZlcy9pc3N1ZXMvMzFcclxuICAgIGNvbnN0IGVtcGhhc2l6ZWRIYXJtb25pY3NDaGFuZ2VkTGlzdGVuZXIgPSAoKSA9PiB7XHJcbiAgICAgIHBsb3RzLmZvckVhY2goIHBsb3QgPT4ge1xyXG4gICAgICAgIGNvbnN0IGhhcm1vbmljID0gcGxvdC5oYXJtb25pYztcclxuICAgICAgICBpZiAoIGVtcGhhc2l6ZWRIYXJtb25pY3MubGVuZ3RoID09PSAwICkge1xyXG5cclxuICAgICAgICAgIC8vIE5vIGVtcGhhc2lzLCBhbGwgcGxvdHMgaGF2ZSB0aGVpciBub3JtYWwgY29sb3IgYW5kIGxpbmVXaWR0aC5cclxuICAgICAgICAgIHBsb3QubGluZVdpZHRoID0gTk9STUFMX0xJTkVfV0lEVEg7XHJcbiAgICAgICAgICBwbG90LnNldFN0cm9rZSggaGFybW9uaWMuY29sb3JQcm9wZXJ0eS52YWx1ZSApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuXHJcbiAgICAgICAgICAvLyBFbXBoYXNpemUgc29tZSBwbG90cywgZGUtZW1waGFzaXplIG90aGVyIHBsb3RzLlxyXG4gICAgICAgICAgaWYgKCBlbXBoYXNpemVkSGFybW9uaWNzLmluY2x1ZGVzSGFybW9uaWMoIGhhcm1vbmljICkgKSB7XHJcbiAgICAgICAgICAgIHBsb3QubGluZVdpZHRoID0gRU1QSEFTSVpFRF9MSU5FX1dJRFRIO1xyXG4gICAgICAgICAgICBwbG90LnNldFN0cm9rZSggaGFybW9uaWMuY29sb3JQcm9wZXJ0eS52YWx1ZSApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBsb3QubGluZVdpZHRoID0gREVfRU1QSEFTSVpFRF9MSU5FX1dJRFRIO1xyXG4gICAgICAgICAgICBwbG90LnNldFN0cm9rZSggREVfRU1QSEFTSVpFRF9TVFJPS0UgKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gKTtcclxuICAgICAgY2hhcnRDYW52YXNOb2RlLnVwZGF0ZSgpO1xyXG4gICAgfTtcclxuICAgIGVtcGhhc2l6ZWRIYXJtb25pY3MuYWRkQ2hhbmdlZExpc3RlbmVyKCBlbXBoYXNpemVkSGFybW9uaWNzQ2hhbmdlZExpc3RlbmVyICk7XHJcbiAgfVxyXG59XHJcblxyXG5mb3VyaWVyTWFraW5nV2F2ZXMucmVnaXN0ZXIoICdIYXJtb25pY3NDaGFydE5vZGUnLCBIYXJtb25pY3NDaGFydE5vZGUgKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxlQUFlLE1BQU0sMENBQTBDO0FBQ3RFLFNBQVNDLEtBQUssUUFBUSxnQ0FBZ0M7QUFDdEQsT0FBT0MsS0FBSyxNQUFNLG1DQUFtQztBQUNyRCxT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