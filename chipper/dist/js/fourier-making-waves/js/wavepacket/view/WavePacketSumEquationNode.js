// Copyright 2021-2023, University of Colorado Boulder

/**
 * WavePacketSumEquationNode is the equation that appears above the 'Sum' chart in the 'Wave Packet' screen.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import EnumerationProperty from '../../../../axon/js/EnumerationProperty.js';
import Multilink from '../../../../axon/js/Multilink.js';
import NumberProperty from '../../../../axon/js/NumberProperty.js';
import merge from '../../../../phet-core/js/merge.js';
import AssertUtils from '../../../../phetcommon/js/AssertUtils.js';
import MathSymbols from '../../../../scenery-phet/js/MathSymbols.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { Node, RichText } from '../../../../scenery/js/imports.js';
import FMWConstants from '../../common/FMWConstants.js';
import FMWSymbols from '../../common/FMWSymbols.js';
import Domain from '../../common/model/Domain.js';
import SeriesType from '../../common/model/SeriesType.js';
import EquationMarkup from '../../common/view/EquationMarkup.js';
import SumSymbolNode from '../../common/view/SumSymbolNode.js';
import fourierMakingWaves from '../../fourierMakingWaves.js';
export default class WavePacketSumEquationNode extends Node {
  /**
   * @param {EnumerationProperty.<Domain>} domainProperty
   * @param {EnumerationProperty.<SeriesType>} seriesTypeProperty
   * @param {Property.<number>} componentSpacingProperty
   * @param {Object} [options]
   */
  constructor(domainProperty, seriesTypeProperty, componentSpacingProperty, options) {
    assert && assert(domainProperty instanceof EnumerationProperty);
    assert && assert(seriesTypeProperty instanceof EnumerationProperty);
    assert && AssertUtils.assertPropertyOf(componentSpacingProperty, 'number');
    options = merge({
      // WavePacketSumEquationNode options
      font: FMWConstants.EQUATION_FONT
    }, options);

    // Everything to the left of the summation symbol, set in domainProperty listener below.
    const leftNode = new RichText('', {
      font: options.font
    });

    // Capital sigma, summation symbol
    const sumSymbolNode = new SumSymbolNode(FMWSymbols.nStringProperty, -Infinity, new NumberProperty(Infinity), {
      minMaxFont: new PhetFont(16)
    });

    // Everything to the right of the summation symbol, same as the equation above the Components chart.
    const rightNode = new RichText('', {
      font: options.font
    });
    assert && assert(!options.children, 'WavePacketSumEquationNode sets children');
    options.children = [leftNode, sumSymbolNode, rightNode];
    super(options);
    Multilink.multilink([domainProperty, seriesTypeProperty, componentSpacingProperty, FMWSymbols.xStringProperty, FMWSymbols.tStringProperty, FMWSymbols.kStringProperty, FMWSymbols.omegaStringProperty, FMWSymbols.sinStringProperty, FMWSymbols.cosStringProperty, FMWSymbols.AStringProperty, FMWSymbols.dStringProperty], (domain, seriesType, componentSpacing, x, t, k, omega, sin, cos, A, d) => {
      // Update the left side of the equation to match the Domain.
      leftNode.string = `${EquationMarkup.getFunctionOfMarkup(domain)} ${MathSymbols.EQUAL_TO}`; // F(...) =

      const hasInfiniteComponents = componentSpacing === 0;

      // Summation vs integration
      sumSymbolNode.integrationProperty.value = hasInfiniteComponents;

      // Right side of the equation
      if (hasInfiniteComponents) {
        // Infinite number of components
        const domainSymbol = domain === Domain.SPACE ? x : t;
        const componentSymbol = domain === Domain.SPACE ? k : omega;
        const seriesTypeString = seriesType === SeriesType.SIN ? sin : cos;
        rightNode.string = `${A}(${componentSymbol}) ${seriesTypeString}( ${componentSymbol}${domainSymbol} ) ${d}${componentSymbol}`;
      } else {
        // Finite number of components, use same equation as above the Components chart.
        rightNode.string = EquationMarkup.getComponentsEquationMarkup(domain, seriesType);
      }
    });

    // Layout
    Multilink.multilink([leftNode.boundsProperty, sumSymbolNode.boundsProperty, rightNode.boundsProperty], () => {
      sumSymbolNode.left = leftNode.right + 2;
      sumSymbolNode.y = leftNode.y + 5; // lower sum symbol a bit, determined empirically
      rightNode.left = sumSymbolNode.right + 2;
      rightNode.y = leftNode.y;
    });
  }

  /**
   * @public
   * @override
   */
  dispose() {
    assert && assert(false, 'dispose is not supported, exists for the lifetime of the sim');
    super.dispose();
  }
}
fourierMakingWaves.register('WavePacketSumEquationNode', WavePacketSumEquationNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFbnVtZXJhdGlvblByb3BlcnR5IiwiTXVsdGlsaW5rIiwiTnVtYmVyUHJvcGVydHkiLCJtZXJnZSIsIkFzc2VydFV0aWxzIiwiTWF0aFN5bWJvbHMiLCJQaGV0Rm9udCIsIk5vZGUiLCJSaWNoVGV4dCIsIkZNV0NvbnN0YW50cyIsIkZNV1N5bWJvbHMiLCJEb21haW4iLCJTZXJpZXNUeXBlIiwiRXF1YXRpb25NYXJrdXAiLCJTdW1TeW1ib2xOb2RlIiwiZm91cmllck1ha2luZ1dhdmVzIiwiV2F2ZVBhY2tldFN1bUVxdWF0aW9uTm9kZSIsImNvbnN0cnVjdG9yIiwiZG9tYWluUHJvcGVydHkiLCJzZXJpZXNUeXBlUHJvcGVydHkiLCJjb21wb25lbnRTcGFjaW5nUHJvcGVydHkiLCJvcHRpb25zIiwiYXNzZXJ0IiwiYXNzZXJ0UHJvcGVydHlPZiIsImZvbnQiLCJFUVVBVElPTl9GT05UIiwibGVmdE5vZGUiLCJzdW1TeW1ib2xOb2RlIiwiblN0cmluZ1Byb3BlcnR5IiwiSW5maW5pdHkiLCJtaW5NYXhGb250IiwicmlnaHROb2RlIiwiY2hpbGRyZW4iLCJtdWx0aWxpbmsiLCJ4U3RyaW5nUHJvcGVydHkiLCJ0U3RyaW5nUHJvcGVydHkiLCJrU3RyaW5nUHJvcGVydHkiLCJvbWVnYVN0cmluZ1Byb3BlcnR5Iiwic2luU3RyaW5nUHJvcGVydHkiLCJjb3NTdHJpbmdQcm9wZXJ0eSIsIkFTdHJpbmdQcm9wZXJ0eSIsImRTdHJpbmdQcm9wZXJ0eSIsImRvbWFpbiIsInNlcmllc1R5cGUiLCJjb21wb25lbnRTcGFjaW5nIiwieCIsInQiLCJrIiwib21lZ2EiLCJzaW4iLCJjb3MiLCJBIiwiZCIsInN0cmluZyIsImdldEZ1bmN0aW9uT2ZNYXJrdXAiLCJFUVVBTF9UTyIsImhhc0luZmluaXRlQ29tcG9uZW50cyIsImludGVncmF0aW9uUHJvcGVydHkiLCJ2YWx1ZSIsImRvbWFpblN5bWJvbCIsIlNQQUNFIiwiY29tcG9uZW50U3ltYm9sIiwic2VyaWVzVHlwZVN0cmluZyIsIlNJTiIsImdldENvbXBvbmVudHNFcXVhdGlvbk1hcmt1cCIsImJvdW5kc1Byb3BlcnR5IiwibGVmdCIsInJpZ2h0IiwieSIsImRpc3Bvc2UiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIldhdmVQYWNrZXRTdW1FcXVhdGlvbk5vZGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjEtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogV2F2ZVBhY2tldFN1bUVxdWF0aW9uTm9kZSBpcyB0aGUgZXF1YXRpb24gdGhhdCBhcHBlYXJzIGFib3ZlIHRoZSAnU3VtJyBjaGFydCBpbiB0aGUgJ1dhdmUgUGFja2V0JyBzY3JlZW4uXHJcbiAqXHJcbiAqIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXHJcbiAqL1xyXG5cclxuaW1wb3J0IEVudW1lcmF0aW9uUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9FbnVtZXJhdGlvblByb3BlcnR5LmpzJztcclxuaW1wb3J0IE11bHRpbGluayBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL011bHRpbGluay5qcyc7XHJcbmltcG9ydCBOdW1iZXJQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL051bWJlclByb3BlcnR5LmpzJztcclxuaW1wb3J0IG1lcmdlIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9tZXJnZS5qcyc7XHJcbmltcG9ydCBBc3NlcnRVdGlscyBmcm9tICcuLi8uLi8uLi8uLi9waGV0Y29tbW9uL2pzL0Fzc2VydFV0aWxzLmpzJztcclxuaW1wb3J0IE1hdGhTeW1ib2xzIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9NYXRoU3ltYm9scy5qcyc7XHJcbmltcG9ydCBQaGV0Rm9udCBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvUGhldEZvbnQuanMnO1xyXG5pbXBvcnQgeyBOb2RlLCBSaWNoVGV4dCB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBGTVdDb25zdGFudHMgZnJvbSAnLi4vLi4vY29tbW9uL0ZNV0NvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBGTVdTeW1ib2xzIGZyb20gJy4uLy4uL2NvbW1vbi9GTVdTeW1ib2xzLmpzJztcclxuaW1wb3J0IERvbWFpbiBmcm9tICcuLi8uLi9jb21tb24vbW9kZWwvRG9tYWluLmpzJztcclxuaW1wb3J0IFNlcmllc1R5cGUgZnJvbSAnLi4vLi4vY29tbW9uL21vZGVsL1Nlcmllc1R5cGUuanMnO1xyXG5pbXBvcnQgRXF1YXRpb25NYXJrdXAgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvRXF1YXRpb25NYXJrdXAuanMnO1xyXG5pbXBvcnQgU3VtU3ltYm9sTm9kZSBmcm9tICcuLi8uLi9jb21tb24vdmlldy9TdW1TeW1ib2xOb2RlLmpzJztcclxuaW1wb3J0IGZvdXJpZXJNYWtpbmdXYXZlcyBmcm9tICcuLi8uLi9mb3VyaWVyTWFraW5nV2F2ZXMuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2F2ZVBhY2tldFN1bUVxdWF0aW9uTm9kZSBleHRlbmRzIE5vZGUge1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge0VudW1lcmF0aW9uUHJvcGVydHkuPERvbWFpbj59IGRvbWFpblByb3BlcnR5XHJcbiAgICogQHBhcmFtIHtFbnVtZXJhdGlvblByb3BlcnR5LjxTZXJpZXNUeXBlPn0gc2VyaWVzVHlwZVByb3BlcnR5XHJcbiAgICogQHBhcmFtIHtQcm9wZXJ0eS48bnVtYmVyPn0gY29tcG9uZW50U3BhY2luZ1Byb3BlcnR5XHJcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBkb21haW5Qcm9wZXJ0eSwgc2VyaWVzVHlwZVByb3BlcnR5LCBjb21wb25lbnRTcGFjaW5nUHJvcGVydHksIG9wdGlvbnMgKSB7XHJcblxyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggZG9tYWluUHJvcGVydHkgaW5zdGFuY2VvZiBFbnVtZXJhdGlvblByb3BlcnR5ICk7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBzZXJpZXNUeXBlUHJvcGVydHkgaW5zdGFuY2VvZiBFbnVtZXJhdGlvblByb3BlcnR5ICk7XHJcbiAgICBhc3NlcnQgJiYgQXNzZXJ0VXRpbHMuYXNzZXJ0UHJvcGVydHlPZiggY29tcG9uZW50U3BhY2luZ1Byb3BlcnR5LCAnbnVtYmVyJyApO1xyXG5cclxuICAgIG9wdGlvbnMgPSBtZXJnZSgge1xyXG5cclxuICAgICAgLy8gV2F2ZVBhY2tldFN1bUVxdWF0aW9uTm9kZSBvcHRpb25zXHJcbiAgICAgIGZvbnQ6IEZNV0NvbnN0YW50cy5FUVVBVElPTl9GT05UXHJcbiAgICB9LCBvcHRpb25zICk7XHJcblxyXG4gICAgLy8gRXZlcnl0aGluZyB0byB0aGUgbGVmdCBvZiB0aGUgc3VtbWF0aW9uIHN5bWJvbCwgc2V0IGluIGRvbWFpblByb3BlcnR5IGxpc3RlbmVyIGJlbG93LlxyXG4gICAgY29uc3QgbGVmdE5vZGUgPSBuZXcgUmljaFRleHQoICcnLCB7XHJcbiAgICAgIGZvbnQ6IG9wdGlvbnMuZm9udFxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIENhcGl0YWwgc2lnbWEsIHN1bW1hdGlvbiBzeW1ib2xcclxuICAgIGNvbnN0IHN1bVN5bWJvbE5vZGUgPSBuZXcgU3VtU3ltYm9sTm9kZSggRk1XU3ltYm9scy5uU3RyaW5nUHJvcGVydHksIC1JbmZpbml0eSwgbmV3IE51bWJlclByb3BlcnR5KCBJbmZpbml0eSApLCB7XHJcbiAgICAgIG1pbk1heEZvbnQ6IG5ldyBQaGV0Rm9udCggMTYgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIEV2ZXJ5dGhpbmcgdG8gdGhlIHJpZ2h0IG9mIHRoZSBzdW1tYXRpb24gc3ltYm9sLCBzYW1lIGFzIHRoZSBlcXVhdGlvbiBhYm92ZSB0aGUgQ29tcG9uZW50cyBjaGFydC5cclxuICAgIGNvbnN0IHJpZ2h0Tm9kZSA9IG5ldyBSaWNoVGV4dCggJycsIHtcclxuICAgICAgZm9udDogb3B0aW9ucy5mb250XHJcbiAgICB9ICk7XHJcblxyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggIW9wdGlvbnMuY2hpbGRyZW4sICdXYXZlUGFja2V0U3VtRXF1YXRpb25Ob2RlIHNldHMgY2hpbGRyZW4nICk7XHJcbiAgICBvcHRpb25zLmNoaWxkcmVuID0gWyBsZWZ0Tm9kZSwgc3VtU3ltYm9sTm9kZSwgcmlnaHROb2RlIF07XHJcblxyXG4gICAgc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcbiAgICBNdWx0aWxpbmsubXVsdGlsaW5rKCBbXHJcbiAgICAgICAgZG9tYWluUHJvcGVydHksIHNlcmllc1R5cGVQcm9wZXJ0eSwgY29tcG9uZW50U3BhY2luZ1Byb3BlcnR5LFxyXG4gICAgICAgIEZNV1N5bWJvbHMueFN0cmluZ1Byb3BlcnR5LCBGTVdTeW1ib2xzLnRTdHJpbmdQcm9wZXJ0eSwgRk1XU3ltYm9scy5rU3RyaW5nUHJvcGVydHksIEZNV1N5bWJvbHMub21lZ2FTdHJpbmdQcm9wZXJ0eSxcclxuICAgICAgICBGTVdTeW1ib2xzLnNpblN0cmluZ1Byb3BlcnR5LCBGTVdTeW1ib2xzLmNvc1N0cmluZ1Byb3BlcnR5LCBGTVdTeW1ib2xzLkFTdHJpbmdQcm9wZXJ0eSwgRk1XU3ltYm9scy5kU3RyaW5nUHJvcGVydHlcclxuICAgICAgXSxcclxuICAgICAgKCBkb21haW4sIHNlcmllc1R5cGUsIGNvbXBvbmVudFNwYWNpbmcsIHgsIHQsIGssIG9tZWdhLCBzaW4sIGNvcywgQSwgZCApID0+IHtcclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBsZWZ0IHNpZGUgb2YgdGhlIGVxdWF0aW9uIHRvIG1hdGNoIHRoZSBEb21haW4uXHJcbiAgICAgICAgbGVmdE5vZGUuc3RyaW5nID0gYCR7RXF1YXRpb25NYXJrdXAuZ2V0RnVuY3Rpb25PZk1hcmt1cCggZG9tYWluICl9ICR7TWF0aFN5bWJvbHMuRVFVQUxfVE99YDsgLy8gRiguLi4pID1cclxuXHJcbiAgICAgICAgY29uc3QgaGFzSW5maW5pdGVDb21wb25lbnRzID0gKCBjb21wb25lbnRTcGFjaW5nID09PSAwICk7XHJcblxyXG4gICAgICAgIC8vIFN1bW1hdGlvbiB2cyBpbnRlZ3JhdGlvblxyXG4gICAgICAgIHN1bVN5bWJvbE5vZGUuaW50ZWdyYXRpb25Qcm9wZXJ0eS52YWx1ZSA9IGhhc0luZmluaXRlQ29tcG9uZW50cztcclxuXHJcbiAgICAgICAgLy8gUmlnaHQgc2lkZSBvZiB0aGUgZXF1YXRpb25cclxuICAgICAgICBpZiAoIGhhc0luZmluaXRlQ29tcG9uZW50cyApIHtcclxuXHJcbiAgICAgICAgICAvLyBJbmZpbml0ZSBudW1iZXIgb2YgY29tcG9uZW50c1xyXG4gICAgICAgICAgY29uc3QgZG9tYWluU3ltYm9sID0gKCBkb21haW4gPT09IERvbWFpbi5TUEFDRSApID8geCA6IHQ7XHJcbiAgICAgICAgICBjb25zdCBjb21wb25lbnRTeW1ib2wgPSAoIGRvbWFpbiA9PT0gRG9tYWluLlNQQUNFICkgPyBrIDogb21lZ2E7XHJcbiAgICAgICAgICBjb25zdCBzZXJpZXNUeXBlU3RyaW5nID0gKCBzZXJpZXNUeXBlID09PSBTZXJpZXNUeXBlLlNJTiApID8gc2luIDogY29zO1xyXG4gICAgICAgICAgcmlnaHROb2RlLnN0cmluZyA9IGAke0F9KCR7Y29tcG9uZW50U3ltYm9sfSkgJHtzZXJpZXNUeXBlU3RyaW5nfSggJHtjb21wb25lbnRTeW1ib2x9JHtkb21haW5TeW1ib2x9ICkgJHtkfSR7Y29tcG9uZW50U3ltYm9sfWA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG5cclxuICAgICAgICAgIC8vIEZpbml0ZSBudW1iZXIgb2YgY29tcG9uZW50cywgdXNlIHNhbWUgZXF1YXRpb24gYXMgYWJvdmUgdGhlIENvbXBvbmVudHMgY2hhcnQuXHJcbiAgICAgICAgICByaWdodE5vZGUuc3RyaW5nID0gRXF1YXRpb25NYXJrdXAuZ2V0Q29tcG9uZW50c0VxdWF0aW9uTWFya3VwKCBkb21haW4sIHNlcmllc1R5cGUgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgLy8gTGF5b3V0XHJcbiAgICBNdWx0aWxpbmsubXVsdGlsaW5rKFxyXG4gICAgICBbIGxlZnROb2RlLmJvdW5kc1Byb3BlcnR5LCBzdW1TeW1ib2xOb2RlLmJvdW5kc1Byb3BlcnR5LCByaWdodE5vZGUuYm91bmRzUHJvcGVydHkgXSxcclxuICAgICAgKCkgPT4ge1xyXG4gICAgICAgIHN1bVN5bWJvbE5vZGUubGVmdCA9IGxlZnROb2RlLnJpZ2h0ICsgMjtcclxuICAgICAgICBzdW1TeW1ib2xOb2RlLnkgPSBsZWZ0Tm9kZS55ICsgNTsgLy8gbG93ZXIgc3VtIHN5bWJvbCBhIGJpdCwgZGV0ZXJtaW5lZCBlbXBpcmljYWxseVxyXG4gICAgICAgIHJpZ2h0Tm9kZS5sZWZ0ID0gc3VtU3ltYm9sTm9kZS5yaWdodCArIDI7XHJcbiAgICAgICAgcmlnaHROb2RlLnkgPSBsZWZ0Tm9kZS55O1xyXG4gICAgICB9ICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcHVibGljXHJcbiAgICogQG92ZXJyaWRlXHJcbiAgICovXHJcbiAgZGlzcG9zZSgpIHtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIGZhbHNlLCAnZGlzcG9zZSBpcyBub3Qgc3VwcG9ydGVkLCBleGlzdHMgZm9yIHRoZSBsaWZldGltZSBvZiB0aGUgc2ltJyApO1xyXG4gICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gIH1cclxufVxyXG5cclxuZm91cmllck1ha2luZ1dhdmVzLnJlZ2lzdGVyKCAnV2F2ZVBhY2tldFN1bUVxdWF0aW9uTm9kZScsIFdhdmVQYWNrZXRTdW1FcXVhdGlvbk5vZGUgKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsbUJBQW1CLE1BQU0sNENBQTRDO0FBQzVFLE9BQU9DLFNBQVMsTUFBTSxrQ0FB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