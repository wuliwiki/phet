// Copyright 2021-2023, University of Colorado Boulder

/**
 * WavePacketAmplitudesChartNode is the view for the 'Amplitudes of Fourier Components' chart in
 * the 'Wave Packet' screen.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import Multilink from '../../../../axon/js/Multilink.js';
import BarPlot from '../../../../bamboo/js/BarPlot.js';
import CanvasLinePlot from '../../../../bamboo/js/CanvasLinePlot.js';
import ChartCanvasNode from '../../../../bamboo/js/ChartCanvasNode.js';
import Range from '../../../../dot/js/Range.js';
import { Shape } from '../../../../kite/js/imports.js';
import merge from '../../../../phet-core/js/merge.js';
import { Color, LinearGradient, Node } from '../../../../scenery/js/imports.js';
import FMWColors from '../../common/FMWColors.js';
import FMWConstants from '../../common/FMWConstants.js';
import FMWSymbols from '../../common/FMWSymbols.js';
import DomainChartNode from '../../common/view/DomainChartNode.js';
import TickLabelUtils from '../../common/view/TickLabelUtils.js';
import fourierMakingWaves from '../../fourierMakingWaves.js';
import WavePacketAmplitudesChart from '../model/WavePacketAmplitudesChart.js';
import GaussianAreaPlot from './GaussianAreaPlot.js';
import WidthIndicatorPlot from './WidthIndicatorPlot.js';

// constants
const X_TICK_LABEL_DECIMALS = 0;
const Y_TICK_LABEL_DECIMALS = 2;
const GRAY_RANGE = FMWColors.FOURIER_COMPONENT_GRAY_RANGE;
export default class WavePacketAmplitudesChartNode extends DomainChartNode {
  /**
   * @param {WavePacketAmplitudesChart} amplitudesChart
   * @param {Object} [options]
   */
  constructor(amplitudesChart, options) {
    assert && assert(amplitudesChart instanceof WavePacketAmplitudesChart);

    // Fields of interest in amplitudesChart, to improve readability
    const domainProperty = amplitudesChart.domainProperty;
    const finiteComponentsDataSetProperty = amplitudesChart.finiteComponentsDataSetProperty;
    const infiniteComponentsDataSetProperty = amplitudesChart.infiniteComponentsDataSetProperty;
    const continuousWaveformDataSetProperty = amplitudesChart.continuousWaveformDataSetProperty;
    const continuousWaveformVisibleProperty = amplitudesChart.continuousWaveformVisibleProperty;
    const waveNumberRange = amplitudesChart.waveNumberRange;
    const widthIndicatorWidthProperty = amplitudesChart.widthIndicatorWidthProperty;
    const widthIndicatorPositionProperty = amplitudesChart.widthIndicatorPositionProperty;
    const widthIndicatorsVisibleProperty = amplitudesChart.widthIndicatorsVisibleProperty;
    const peakAmplitudeProperty = amplitudesChart.peakAmplitudeProperty;
    const yAxisDescriptionProperty = amplitudesChart.yAxisDescriptionProperty;
    options = merge({
      // DomainChartNode options
      // Units for the x-axis labels are omitted by request, due to space constraints.
      // See https://github.com/phetsims/fourier-making-waves/issues/137.
      xSpaceLabelProperty: FMWSymbols.kStringProperty,
      xTimeLabelProperty: FMWSymbols.omegaStringProperty,
      // FMWChartNode options
      xTickMarkSpacing: Math.PI,
      xTickLabelSpacing: 2 * Math.PI,
      xTickLabelSetOptions: {
        createLabel: value => TickLabelUtils.createPiTickLabel(value, X_TICK_LABEL_DECIMALS)
      },
      yTickLabelSetOptions: {
        createLabel: value => TickLabelUtils.createNumericTickLabel(value, Y_TICK_LABEL_DECIMALS)
      }
    }, options);
    super(amplitudesChart, options);

    // No x-axis grid lines for this chart.
    this.xGridLines.visible = false;

    // NOTE: Data sets for plots are initialized to [] because the listeners for their data sets handle y-axis scaling.

    // Displays a finite number of Fourier components as vertical bars
    const finiteComponentsPlot = new BarPlot(this.chartTransform, [], {
      barWidth: 5,
      // Assign a grayscale color to each bar in the BarPlot.
      pointToPaintableFields: point => {
        let rgb = GRAY_RANGE.min + GRAY_RANGE.getLength() * point.x / waveNumberRange.max;
        rgb = GRAY_RANGE.constrainValue(rgb);
        return {
          fill: Color.grayColor(rgb)
        };
      }
    });

    // Displays an infinite number of components. This uses the same data set as continuousWaveformPlot, but fills
    // the area under that curve with the same grayscale gradient that is used to color the bars.
    const infiniteComponentsPlot = new GaussianAreaPlot(this.chartTransform, [], {
      fill: new LinearGradient(0, 0, this.chartRectangle.width, 0).addColorStop(0, Color.grayColor(GRAY_RANGE.min)).addColorStop(1, Color.grayColor(GRAY_RANGE.max))
    });

    // Displays the continuous waveform
    const continuousWaveformPlot = new CanvasLinePlot(this.chartTransform, [], {
      stroke: FMWColors.secondaryWaveformStrokeProperty.value,
      lineWidth: FMWConstants.SECONDARY_WAVEFORM_LINE_WIDTH
    });

    // Render the plots using Canvas.
    // Remember! When any of the associated plots is updated, you must call update().
    const chartCanvasNode = new ChartCanvasNode(this.chartTransform, [continuousWaveformPlot], {
      clipArea: Shape.bounds(this.chartRectangle.bounds)
    });

    // CanvasLinePlot stroke does not support Property, so handle updates here.
    FMWColors.secondaryWaveformStrokeProperty.lazyLink(stroke => {
      continuousWaveformPlot.setStroke(stroke);
      chartCanvasNode.update();
    });

    // Width indicator, labeled dimensional arrows
    const widthIndicatorPlot = new WidthIndicatorPlot(this.chartTransform, widthIndicatorWidthProperty, widthIndicatorPositionProperty, domainProperty, FMWSymbols.kStringProperty, FMWSymbols.omegaStringProperty, {
      visibleProperty: widthIndicatorsVisibleProperty
    });

    // Clip these elements to the chartRectangle bounds.
    const clipNode = new Node({
      clipArea: this.chartRectangle.getShape(),
      children: [infiniteComponentsPlot, chartCanvasNode, finiteComponentsPlot, widthIndicatorPlot]
    });
    this.addChild(clipNode);

    // Update plots when their data sets change.
    finiteComponentsDataSetProperty.link(dataSet => finiteComponentsPlot.setDataSet(dataSet));
    infiniteComponentsDataSetProperty.link(dataSet => infiniteComponentsPlot.setDataSet(dataSet));

    // CanvasLinePlot does not support visibleProperty, so handle it here by clearing the data set when invisible.
    Multilink.multilink([continuousWaveformVisibleProperty, continuousWaveformDataSetProperty], (visible, dataSet) => {
      continuousWaveformPlot.setDataSet(visible ? dataSet : FMWConstants.EMPTY_DATA_SET);
      chartCanvasNode.update();
    });

    // Scale the y axis, with some padding above peakAmplitude.
    peakAmplitudeProperty.link(peakAmplitude => this.chartTransform.setModelYRange(new Range(0, 1.05 * peakAmplitude)));

    // Update the y-axis decorations.
    yAxisDescriptionProperty.link(yAxisDescription => {
      // NOTE: this.chartTransform.setModelYRange is handled via peakAmplitudeProperty listener, above.
      this.yGridLines.setSpacing(yAxisDescription.gridLineSpacing);
      this.yTickMarks.setSpacing(yAxisDescription.tickMarkSpacing);
      this.yTickLabels.setSpacing(yAxisDescription.tickLabelSpacing);
    });
  }

  /**
   * @public
   * @override
   */
  dispose() {
    assert && assert(false, 'dispose is not supported, exists for the lifetime of the sim');
    super.dispose();
  }
}
fourierMakingWaves.register('WavePacketAmplitudesChartNode', WavePacketAmplitudesChartNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNdWx0aWxpbmsiLCJCYXJQbG90IiwiQ2FudmFzTGluZVBsb3QiLCJDaGFydENhbnZhc05vZGUiLCJSYW5nZSIsIlNoYXBlIiwibWVyZ2UiLCJDb2xvciIsIkxpbmVhckdyYWRpZW50IiwiTm9kZSIsIkZNV0NvbG9ycyIsIkZNV0NvbnN0YW50cyIsIkZNV1N5bWJvbHMiLCJEb21haW5DaGFydE5vZGUiLCJUaWNrTGFiZWxVdGlscyIsImZvdXJpZXJNYWtpbmdXYXZlcyIsIldhdmVQYWNrZXRBbXBsaXR1ZGVzQ2hhcnQiLCJHYXVzc2lhbkFyZWFQbG90IiwiV2lkdGhJbmRpY2F0b3JQbG90IiwiWF9USUNLX0xBQkVMX0RFQ0lNQUxTIiwiWV9USUNLX0xBQkVMX0RFQ0lNQUxTIiwiR1JBWV9SQU5HRSIsIkZPVVJJRVJfQ09NUE9ORU5UX0dSQVlfUkFOR0UiLCJXYXZlUGFja2V0QW1wbGl0dWRlc0NoYXJ0Tm9kZSIsImNvbnN0cnVjdG9yIiwiYW1wbGl0dWRlc0NoYXJ0Iiwib3B0aW9ucyIsImFzc2VydCIsImRvbWFpblByb3BlcnR5IiwiZmluaXRlQ29tcG9uZW50c0RhdGFTZXRQcm9wZXJ0eSIsImluZmluaXRlQ29tcG9uZW50c0RhdGFTZXRQcm9wZXJ0eSIsImNvbnRpbnVvdXNXYXZlZm9ybURhdGFTZXRQcm9wZXJ0eSIsImNvbnRpbnVvdXNXYXZlZm9ybVZpc2libGVQcm9wZXJ0eSIsIndhdmVOdW1iZXJSYW5nZSIsIndpZHRoSW5kaWNhdG9yV2lkdGhQcm9wZXJ0eSIsIndpZHRoSW5kaWNhdG9yUG9zaXRpb25Qcm9wZXJ0eSIsIndpZHRoSW5kaWNhdG9yc1Zpc2libGVQcm9wZXJ0eSIsInBlYWtBbXBsaXR1ZGVQcm9wZXJ0eSIsInlBeGlzRGVzY3JpcHRpb25Qcm9wZXJ0eSIsInhTcGFjZUxhYmVsUHJvcGVydHkiLCJrU3RyaW5nUHJvcGVydHkiLCJ4VGltZUxhYmVsUHJvcGVydHkiLCJvbWVnYVN0cmluZ1Byb3BlcnR5IiwieFRpY2tNYXJrU3BhY2luZyIsIk1hdGgiLCJQSSIsInhUaWNrTGFiZWxTcGFjaW5nIiwieFRpY2tMYWJlbFNldE9wdGlvbnMiLCJjcmVhdGVMYWJlbCIsInZhbHVlIiwiY3JlYXRlUGlUaWNrTGFiZWwiLCJ5VGlja0xhYmVsU2V0T3B0aW9ucyIsImNyZWF0ZU51bWVyaWNUaWNrTGFiZWwiLCJ4R3JpZExpbmVzIiwidmlzaWJsZSIsImZpbml0ZUNvbXBvbmVudHNQbG90IiwiY2hhcnRUcmFuc2Zvcm0iLCJiYXJXaWR0aCIsInBvaW50VG9QYWludGFibGVGaWVsZHMiLCJwb2ludCIsInJnYiIsIm1pbiIsImdldExlbmd0aCIsIngiLCJtYXgiLCJjb25zdHJhaW5WYWx1ZSIsImZpbGwiLCJncmF5Q29sb3IiLCJpbmZpbml0ZUNvbXBvbmVudHNQbG90IiwiY2hhcnRSZWN0YW5nbGUiLCJ3aWR0aCIsImFkZENvbG9yU3RvcCIsImNvbnRpbnVvdXNXYXZlZm9ybVBsb3QiLCJzdHJva2UiLCJzZWNvbmRhcnlXYXZlZm9ybVN0cm9rZVByb3BlcnR5IiwibGluZVdpZHRoIiwiU0VDT05EQVJZX1dBVkVGT1JNX0xJTkVfV0lEVEgiLCJjaGFydENhbnZhc05vZGUiLCJjbGlwQXJlYSIsImJvdW5kcyIsImxhenlMaW5rIiwic2V0U3Ryb2tlIiwidXBkYXRlIiwid2lkdGhJbmRpY2F0b3JQbG90IiwidmlzaWJsZVByb3BlcnR5IiwiY2xpcE5vZGUiLCJnZXRTaGFwZSIsImNoaWxkcmVuIiwiYWRkQ2hpbGQiLCJsaW5rIiwiZGF0YVNldCIsInNldERhdGFTZXQiLCJtdWx0aWxpbmsiLCJFTVBUWV9EQVRBX1NFVCIsInBlYWtBbXBsaXR1ZGUiLCJzZXRNb2RlbFlSYW5nZSIsInlBeGlzRGVzY3JpcHRpb24iLCJ5R3JpZExpbmVzIiwic2V0U3BhY2luZyIsImdyaWRMaW5lU3BhY2luZyIsInlUaWNrTWFya3MiLCJ0aWNrTWFya1NwYWNpbmciLCJ5VGlja0xhYmVscyIsInRpY2tMYWJlbFNwYWNpbmciLCJkaXNwb3NlIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJXYXZlUGFja2V0QW1wbGl0dWRlc0NoYXJ0Tm9kZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMS0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBXYXZlUGFja2V0QW1wbGl0dWRlc0NoYXJ0Tm9kZSBpcyB0aGUgdmlldyBmb3IgdGhlICdBbXBsaXR1ZGVzIG9mIEZvdXJpZXIgQ29tcG9uZW50cycgY2hhcnQgaW5cclxuICogdGhlICdXYXZlIFBhY2tldCcgc2NyZWVuLlxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCBNdWx0aWxpbmsgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9NdWx0aWxpbmsuanMnO1xyXG5pbXBvcnQgQmFyUGxvdCBmcm9tICcuLi8uLi8uLi8uLi9iYW1ib28vanMvQmFyUGxvdC5qcyc7XHJcbmltcG9ydCBDYW52YXNMaW5lUGxvdCBmcm9tICcuLi8uLi8uLi8uLi9iYW1ib28vanMvQ2FudmFzTGluZVBsb3QuanMnO1xyXG5pbXBvcnQgQ2hhcnRDYW52YXNOb2RlIGZyb20gJy4uLy4uLy4uLy4uL2JhbWJvby9qcy9DaGFydENhbnZhc05vZGUuanMnO1xyXG5pbXBvcnQgUmFuZ2UgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1JhbmdlLmpzJztcclxuaW1wb3J0IHsgU2hhcGUgfSBmcm9tICcuLi8uLi8uLi8uLi9raXRlL2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgbWVyZ2UgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL21lcmdlLmpzJztcclxuaW1wb3J0IHsgQ29sb3IsIExpbmVhckdyYWRpZW50LCBOb2RlIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IEZNV0NvbG9ycyBmcm9tICcuLi8uLi9jb21tb24vRk1XQ29sb3JzLmpzJztcclxuaW1wb3J0IEZNV0NvbnN0YW50cyBmcm9tICcuLi8uLi9jb21tb24vRk1XQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IEZNV1N5bWJvbHMgZnJvbSAnLi4vLi4vY29tbW9uL0ZNV1N5bWJvbHMuanMnO1xyXG5pbXBvcnQgRG9tYWluQ2hhcnROb2RlIGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L0RvbWFpbkNoYXJ0Tm9kZS5qcyc7XHJcbmltcG9ydCBUaWNrTGFiZWxVdGlscyBmcm9tICcuLi8uLi9jb21tb24vdmlldy9UaWNrTGFiZWxVdGlscy5qcyc7XHJcbmltcG9ydCBmb3VyaWVyTWFraW5nV2F2ZXMgZnJvbSAnLi4vLi4vZm91cmllck1ha2luZ1dhdmVzLmpzJztcclxuaW1wb3J0IFdhdmVQYWNrZXRBbXBsaXR1ZGVzQ2hhcnQgZnJvbSAnLi4vbW9kZWwvV2F2ZVBhY2tldEFtcGxpdHVkZXNDaGFydC5qcyc7XHJcbmltcG9ydCBHYXVzc2lhbkFyZWFQbG90IGZyb20gJy4vR2F1c3NpYW5BcmVhUGxvdC5qcyc7XHJcbmltcG9ydCBXaWR0aEluZGljYXRvclBsb3QgZnJvbSAnLi9XaWR0aEluZGljYXRvclBsb3QuanMnO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IFhfVElDS19MQUJFTF9ERUNJTUFMUyA9IDA7XHJcbmNvbnN0IFlfVElDS19MQUJFTF9ERUNJTUFMUyA9IDI7XHJcbmNvbnN0IEdSQVlfUkFOR0UgPSBGTVdDb2xvcnMuRk9VUklFUl9DT01QT05FTlRfR1JBWV9SQU5HRTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdhdmVQYWNrZXRBbXBsaXR1ZGVzQ2hhcnROb2RlIGV4dGVuZHMgRG9tYWluQ2hhcnROb2RlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtXYXZlUGFja2V0QW1wbGl0dWRlc0NoYXJ0fSBhbXBsaXR1ZGVzQ2hhcnRcclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIGFtcGxpdHVkZXNDaGFydCwgb3B0aW9ucyApIHtcclxuXHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBhbXBsaXR1ZGVzQ2hhcnQgaW5zdGFuY2VvZiBXYXZlUGFja2V0QW1wbGl0dWRlc0NoYXJ0ICk7XHJcblxyXG4gICAgLy8gRmllbGRzIG9mIGludGVyZXN0IGluIGFtcGxpdHVkZXNDaGFydCwgdG8gaW1wcm92ZSByZWFkYWJpbGl0eVxyXG4gICAgY29uc3QgZG9tYWluUHJvcGVydHkgPSBhbXBsaXR1ZGVzQ2hhcnQuZG9tYWluUHJvcGVydHk7XHJcbiAgICBjb25zdCBmaW5pdGVDb21wb25lbnRzRGF0YVNldFByb3BlcnR5ID0gYW1wbGl0dWRlc0NoYXJ0LmZpbml0ZUNvbXBvbmVudHNEYXRhU2V0UHJvcGVydHk7XHJcbiAgICBjb25zdCBpbmZpbml0ZUNvbXBvbmVudHNEYXRhU2V0UHJvcGVydHkgPSBhbXBsaXR1ZGVzQ2hhcnQuaW5maW5pdGVDb21wb25lbnRzRGF0YVNldFByb3BlcnR5O1xyXG4gICAgY29uc3QgY29udGludW91c1dhdmVmb3JtRGF0YVNldFByb3BlcnR5ID0gYW1wbGl0dWRlc0NoYXJ0LmNvbnRpbnVvdXNXYXZlZm9ybURhdGFTZXRQcm9wZXJ0eTtcclxuICAgIGNvbnN0IGNvbnRpbnVvdXNXYXZlZm9ybVZpc2libGVQcm9wZXJ0eSA9IGFtcGxpdHVkZXNDaGFydC5jb250aW51b3VzV2F2ZWZvcm1WaXNpYmxlUHJvcGVydHk7XHJcbiAgICBjb25zdCB3YXZlTnVtYmVyUmFuZ2UgPSBhbXBsaXR1ZGVzQ2hhcnQud2F2ZU51bWJlclJhbmdlO1xyXG4gICAgY29uc3Qgd2lkdGhJbmRpY2F0b3JXaWR0aFByb3BlcnR5ID0gYW1wbGl0dWRlc0NoYXJ0LndpZHRoSW5kaWNhdG9yV2lkdGhQcm9wZXJ0eTtcclxuICAgIGNvbnN0IHdpZHRoSW5kaWNhdG9yUG9zaXRpb25Qcm9wZXJ0eSA9IGFtcGxpdHVkZXNDaGFydC53aWR0aEluZGljYXRvclBvc2l0aW9uUHJvcGVydHk7XHJcbiAgICBjb25zdCB3aWR0aEluZGljYXRvcnNWaXNpYmxlUHJvcGVydHkgPSBhbXBsaXR1ZGVzQ2hhcnQud2lkdGhJbmRpY2F0b3JzVmlzaWJsZVByb3BlcnR5O1xyXG4gICAgY29uc3QgcGVha0FtcGxpdHVkZVByb3BlcnR5ID0gYW1wbGl0dWRlc0NoYXJ0LnBlYWtBbXBsaXR1ZGVQcm9wZXJ0eTtcclxuICAgIGNvbnN0IHlBeGlzRGVzY3JpcHRpb25Qcm9wZXJ0eSA9IGFtcGxpdHVkZXNDaGFydC55QXhpc0Rlc2NyaXB0aW9uUHJvcGVydHk7XHJcblxyXG4gICAgb3B0aW9ucyA9IG1lcmdlKCB7XHJcblxyXG4gICAgICAvLyBEb21haW5DaGFydE5vZGUgb3B0aW9uc1xyXG4gICAgICAvLyBVbml0cyBmb3IgdGhlIHgtYXhpcyBsYWJlbHMgYXJlIG9taXR0ZWQgYnkgcmVxdWVzdCwgZHVlIHRvIHNwYWNlIGNvbnN0cmFpbnRzLlxyXG4gICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL2ZvdXJpZXItbWFraW5nLXdhdmVzL2lzc3Vlcy8xMzcuXHJcbiAgICAgIHhTcGFjZUxhYmVsUHJvcGVydHk6IEZNV1N5bWJvbHMua1N0cmluZ1Byb3BlcnR5LFxyXG4gICAgICB4VGltZUxhYmVsUHJvcGVydHk6IEZNV1N5bWJvbHMub21lZ2FTdHJpbmdQcm9wZXJ0eSxcclxuXHJcbiAgICAgIC8vIEZNV0NoYXJ0Tm9kZSBvcHRpb25zXHJcbiAgICAgIHhUaWNrTWFya1NwYWNpbmc6IE1hdGguUEksXHJcbiAgICAgIHhUaWNrTGFiZWxTcGFjaW5nOiAyICogTWF0aC5QSSxcclxuICAgICAgeFRpY2tMYWJlbFNldE9wdGlvbnM6IHtcclxuICAgICAgICBjcmVhdGVMYWJlbDogdmFsdWUgPT4gVGlja0xhYmVsVXRpbHMuY3JlYXRlUGlUaWNrTGFiZWwoIHZhbHVlLCBYX1RJQ0tfTEFCRUxfREVDSU1BTFMgKVxyXG4gICAgICB9LFxyXG4gICAgICB5VGlja0xhYmVsU2V0T3B0aW9uczoge1xyXG4gICAgICAgIGNyZWF0ZUxhYmVsOiB2YWx1ZSA9PiBUaWNrTGFiZWxVdGlscy5jcmVhdGVOdW1lcmljVGlja0xhYmVsKCB2YWx1ZSwgWV9USUNLX0xBQkVMX0RFQ0lNQUxTIClcclxuICAgICAgfVxyXG4gICAgfSwgb3B0aW9ucyApO1xyXG5cclxuICAgIHN1cGVyKCBhbXBsaXR1ZGVzQ2hhcnQsIG9wdGlvbnMgKTtcclxuXHJcbiAgICAvLyBObyB4LWF4aXMgZ3JpZCBsaW5lcyBmb3IgdGhpcyBjaGFydC5cclxuICAgIHRoaXMueEdyaWRMaW5lcy52aXNpYmxlID0gZmFsc2U7XHJcblxyXG4gICAgLy8gTk9URTogRGF0YSBzZXRzIGZvciBwbG90cyBhcmUgaW5pdGlhbGl6ZWQgdG8gW10gYmVjYXVzZSB0aGUgbGlzdGVuZXJzIGZvciB0aGVpciBkYXRhIHNldHMgaGFuZGxlIHktYXhpcyBzY2FsaW5nLlxyXG5cclxuICAgIC8vIERpc3BsYXlzIGEgZmluaXRlIG51bWJlciBvZiBGb3VyaWVyIGNvbXBvbmVudHMgYXMgdmVydGljYWwgYmFyc1xyXG4gICAgY29uc3QgZmluaXRlQ29tcG9uZW50c1Bsb3QgPSBuZXcgQmFyUGxvdCggdGhpcy5jaGFydFRyYW5zZm9ybSwgW10sIHtcclxuICAgICAgYmFyV2lkdGg6IDUsXHJcblxyXG4gICAgICAvLyBBc3NpZ24gYSBncmF5c2NhbGUgY29sb3IgdG8gZWFjaCBiYXIgaW4gdGhlIEJhclBsb3QuXHJcbiAgICAgIHBvaW50VG9QYWludGFibGVGaWVsZHM6IHBvaW50ID0+IHtcclxuICAgICAgICBsZXQgcmdiID0gR1JBWV9SQU5HRS5taW4gKyBHUkFZX1JBTkdFLmdldExlbmd0aCgpICogcG9pbnQueCAvIHdhdmVOdW1iZXJSYW5nZS5tYXg7XHJcbiAgICAgICAgcmdiID0gR1JBWV9SQU5HRS5jb25zdHJhaW5WYWx1ZSggcmdiICk7XHJcbiAgICAgICAgcmV0dXJuIHsgZmlsbDogQ29sb3IuZ3JheUNvbG9yKCByZ2IgKSB9O1xyXG4gICAgICB9XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gRGlzcGxheXMgYW4gaW5maW5pdGUgbnVtYmVyIG9mIGNvbXBvbmVudHMuIFRoaXMgdXNlcyB0aGUgc2FtZSBkYXRhIHNldCBhcyBjb250aW51b3VzV2F2ZWZvcm1QbG90LCBidXQgZmlsbHNcclxuICAgIC8vIHRoZSBhcmVhIHVuZGVyIHRoYXQgY3VydmUgd2l0aCB0aGUgc2FtZSBncmF5c2NhbGUgZ3JhZGllbnQgdGhhdCBpcyB1c2VkIHRvIGNvbG9yIHRoZSBiYXJzLlxyXG4gICAgY29uc3QgaW5maW5pdGVDb21wb25lbnRzUGxvdCA9IG5ldyBHYXVzc2lhbkFyZWFQbG90KCB0aGlzLmNoYXJ0VHJhbnNmb3JtLCBbXSwge1xyXG4gICAgICBmaWxsOiBuZXcgTGluZWFyR3JhZGllbnQoIDAsIDAsIHRoaXMuY2hhcnRSZWN0YW5nbGUud2lkdGgsIDAgKVxyXG4gICAgICAgIC5hZGRDb2xvclN0b3AoIDAsIENvbG9yLmdyYXlDb2xvciggR1JBWV9SQU5HRS5taW4gKSApXHJcbiAgICAgICAgLmFkZENvbG9yU3RvcCggMSwgQ29sb3IuZ3JheUNvbG9yKCBHUkFZX1JBTkdFLm1heCApIClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBEaXNwbGF5cyB0aGUgY29udGludW91cyB3YXZlZm9ybVxyXG4gICAgY29uc3QgY29udGludW91c1dhdmVmb3JtUGxvdCA9IG5ldyBDYW52YXNMaW5lUGxvdCggdGhpcy5jaGFydFRyYW5zZm9ybSwgW10sIHtcclxuICAgICAgc3Ryb2tlOiBGTVdDb2xvcnMuc2Vjb25kYXJ5V2F2ZWZvcm1TdHJva2VQcm9wZXJ0eS52YWx1ZSxcclxuICAgICAgbGluZVdpZHRoOiBGTVdDb25zdGFudHMuU0VDT05EQVJZX1dBVkVGT1JNX0xJTkVfV0lEVEhcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBSZW5kZXIgdGhlIHBsb3RzIHVzaW5nIENhbnZhcy5cclxuICAgIC8vIFJlbWVtYmVyISBXaGVuIGFueSBvZiB0aGUgYXNzb2NpYXRlZCBwbG90cyBpcyB1cGRhdGVkLCB5b3UgbXVzdCBjYWxsIHVwZGF0ZSgpLlxyXG4gICAgY29uc3QgY2hhcnRDYW52YXNOb2RlID0gbmV3IENoYXJ0Q2FudmFzTm9kZSggdGhpcy5jaGFydFRyYW5zZm9ybSwgWyBjb250aW51b3VzV2F2ZWZvcm1QbG90IF0sIHtcclxuICAgICAgY2xpcEFyZWE6IFNoYXBlLmJvdW5kcyggdGhpcy5jaGFydFJlY3RhbmdsZS5ib3VuZHMgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIENhbnZhc0xpbmVQbG90IHN0cm9rZSBkb2VzIG5vdCBzdXBwb3J0IFByb3BlcnR5LCBzbyBoYW5kbGUgdXBkYXRlcyBoZXJlLlxyXG4gICAgRk1XQ29sb3JzLnNlY29uZGFyeVdhdmVmb3JtU3Ryb2tlUHJvcGVydHkubGF6eUxpbmsoIHN0cm9rZSA9PiB7XHJcbiAgICAgIGNvbnRpbnVvdXNXYXZlZm9ybVBsb3Quc2V0U3Ryb2tlKCBzdHJva2UgKTtcclxuICAgICAgY2hhcnRDYW52YXNOb2RlLnVwZGF0ZSgpO1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIFdpZHRoIGluZGljYXRvciwgbGFiZWxlZCBkaW1lbnNpb25hbCBhcnJvd3NcclxuICAgIGNvbnN0IHdpZHRoSW5kaWNhdG9yUGxvdCA9IG5ldyBXaWR0aEluZGljYXRvclBsb3QoIHRoaXMuY2hhcnRUcmFuc2Zvcm0sIHdpZHRoSW5kaWNhdG9yV2lkdGhQcm9wZXJ0eSxcclxuICAgICAgd2lkdGhJbmRpY2F0b3JQb3NpdGlvblByb3BlcnR5LCBkb21haW5Qcm9wZXJ0eSwgRk1XU3ltYm9scy5rU3RyaW5nUHJvcGVydHksIEZNV1N5bWJvbHMub21lZ2FTdHJpbmdQcm9wZXJ0eSwge1xyXG4gICAgICAgIHZpc2libGVQcm9wZXJ0eTogd2lkdGhJbmRpY2F0b3JzVmlzaWJsZVByb3BlcnR5XHJcbiAgICAgIH0gKTtcclxuXHJcbiAgICAvLyBDbGlwIHRoZXNlIGVsZW1lbnRzIHRvIHRoZSBjaGFydFJlY3RhbmdsZSBib3VuZHMuXHJcbiAgICBjb25zdCBjbGlwTm9kZSA9IG5ldyBOb2RlKCB7XHJcbiAgICAgIGNsaXBBcmVhOiB0aGlzLmNoYXJ0UmVjdGFuZ2xlLmdldFNoYXBlKCksXHJcbiAgICAgIGNoaWxkcmVuOiBbIGluZmluaXRlQ29tcG9uZW50c1Bsb3QsIGNoYXJ0Q2FudmFzTm9kZSwgZmluaXRlQ29tcG9uZW50c1Bsb3QsIHdpZHRoSW5kaWNhdG9yUGxvdCBdXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBjbGlwTm9kZSApO1xyXG5cclxuICAgIC8vIFVwZGF0ZSBwbG90cyB3aGVuIHRoZWlyIGRhdGEgc2V0cyBjaGFuZ2UuXHJcbiAgICBmaW5pdGVDb21wb25lbnRzRGF0YVNldFByb3BlcnR5LmxpbmsoIGRhdGFTZXQgPT4gZmluaXRlQ29tcG9uZW50c1Bsb3Quc2V0RGF0YVNldCggZGF0YVNldCApICk7XHJcbiAgICBpbmZpbml0ZUNvbXBvbmVudHNEYXRhU2V0UHJvcGVydHkubGluayggZGF0YVNldCA9PiBpbmZpbml0ZUNvbXBvbmVudHNQbG90LnNldERhdGFTZXQoIGRhdGFTZXQgKSApO1xyXG5cclxuICAgIC8vIENhbnZhc0xpbmVQbG90IGRvZXMgbm90IHN1cHBvcnQgdmlzaWJsZVByb3BlcnR5LCBzbyBoYW5kbGUgaXQgaGVyZSBieSBjbGVhcmluZyB0aGUgZGF0YSBzZXQgd2hlbiBpbnZpc2libGUuXHJcbiAgICBNdWx0aWxpbmsubXVsdGlsaW5rKCBbIGNvbnRpbnVvdXNXYXZlZm9ybVZpc2libGVQcm9wZXJ0eSwgY29udGludW91c1dhdmVmb3JtRGF0YVNldFByb3BlcnR5IF0sXHJcbiAgICAgICggdmlzaWJsZSwgZGF0YVNldCApID0+IHtcclxuICAgICAgICBjb250aW51b3VzV2F2ZWZvcm1QbG90LnNldERhdGFTZXQoIHZpc2libGUgPyBkYXRhU2V0IDogRk1XQ29uc3RhbnRzLkVNUFRZX0RBVEFfU0VUICk7XHJcbiAgICAgICAgY2hhcnRDYW52YXNOb2RlLnVwZGF0ZSgpO1xyXG4gICAgICB9ICk7XHJcblxyXG4gICAgLy8gU2NhbGUgdGhlIHkgYXhpcywgd2l0aCBzb21lIHBhZGRpbmcgYWJvdmUgcGVha0FtcGxpdHVkZS5cclxuICAgIHBlYWtBbXBsaXR1ZGVQcm9wZXJ0eS5saW5rKCBwZWFrQW1wbGl0dWRlID0+XHJcbiAgICAgIHRoaXMuY2hhcnRUcmFuc2Zvcm0uc2V0TW9kZWxZUmFuZ2UoIG5ldyBSYW5nZSggMCwgMS4wNSAqIHBlYWtBbXBsaXR1ZGUgKSApXHJcbiAgICApO1xyXG5cclxuICAgIC8vIFVwZGF0ZSB0aGUgeS1heGlzIGRlY29yYXRpb25zLlxyXG4gICAgeUF4aXNEZXNjcmlwdGlvblByb3BlcnR5LmxpbmsoIHlBeGlzRGVzY3JpcHRpb24gPT4ge1xyXG4gICAgICAvLyBOT1RFOiB0aGlzLmNoYXJ0VHJhbnNmb3JtLnNldE1vZGVsWVJhbmdlIGlzIGhhbmRsZWQgdmlhIHBlYWtBbXBsaXR1ZGVQcm9wZXJ0eSBsaXN0ZW5lciwgYWJvdmUuXHJcbiAgICAgIHRoaXMueUdyaWRMaW5lcy5zZXRTcGFjaW5nKCB5QXhpc0Rlc2NyaXB0aW9uLmdyaWRMaW5lU3BhY2luZyApO1xyXG4gICAgICB0aGlzLnlUaWNrTWFya3Muc2V0U3BhY2luZyggeUF4aXNEZXNjcmlwdGlvbi50aWNrTWFya1NwYWNpbmcgKTtcclxuICAgICAgdGhpcy55VGlja0xhYmVscy5zZXRTcGFjaW5nKCB5QXhpc0Rlc2NyaXB0aW9uLnRpY2tMYWJlbFNwYWNpbmcgKTtcclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwdWJsaWNcclxuICAgKiBAb3ZlcnJpZGVcclxuICAgKi9cclxuICBkaXNwb3NlKCkge1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggZmFsc2UsICdkaXNwb3NlIGlzIG5vdCBzdXBwb3J0ZWQsIGV4aXN0cyBmb3IgdGhlIGxpZmV0aW1lIG9mIHRoZSBzaW0nICk7XHJcbiAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgfVxyXG59XHJcblxyXG5mb3VyaWVyTWFraW5nV2F2ZXMucmVnaXN0ZXIoICdXYXZlUGFja2V0QW1wbGl0dWRlc0NoYXJ0Tm9kZScsIFdhdmVQYWNrZXRBbXBsaXR1ZGVzQ2hhcnROb2RlICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsU0FBUyxNQUFNLGtDQUFrQztBQUN4RCxPQUFPQyxPQUFPLE1BQU0sa0NBQWtDO0FBQ3RELE9BQU9DLGNBQWMsTUFBTSx5Q0FBeUM7QUFDcEUsT0FBT0MsZUFBZSxNQUFNLDBDQUEwQztBQUN0RSxPQUFPQyxLQUFLLE1BQU0sNkJBQTZCO0FBQy9DLFNBQVNDLEtBQUssUUFBUSxnQ0FBZ0M7QUFDdEQsT0FBT0MsS0FBSyxNQUFNLG1DQUFtQztBQUNyRCxTQUFTQyxLQUFLLEVBQUVDLGNBQWMsRUFBRUMsSUFBSSxRQUFRLG1DQUFtQztBQUMvRSxPQUFPQyxTQUFTLE1BQU0sMkJBQTJCO0FBQ2pELE9BQU9DLFlBQVksTUFBTSw4QkFBOEI7QUFDdkQsT0FBT0MsVUFBVSxNQUFNLDRCQUE0QjtBQUNuRCxPQUFPQyxlQUFlLE1BQU0sc0NBQXNDO0FBQ2xFLE9BQU9DLGNBQWMsTUFBTSxxQ0FBcUM7QUFDaEUsT0FBT0Msa0JBQWtCLE1BQU0sNkJBQTZCO0FBQzVELE9BQU9DLHlCQUF5QixNQUFNLHVDQUF1QztBQUM3RSxPQUFPQyxnQkFBZ0IsTUFBTSx1QkFBdUI7QUFDcEQsT0FBT0Msa0JBQWtCLE1BQU0seUJBQXlCOztBQUV4RDtBQUNBLE1BQU1DLHFCQUFxQixHQUFHLENBQUM7QUFDL0IsTUFBTUMscUJBQXFCLEdBQUcsQ0FBQztBQUMvQixNQUFNQyxVQUFVLEdBQUdYLFNBQVMsQ0FBQ1ksNEJBQTRCO0FBRXpELGVBQWUsTUFBTUMsNkJBQTZCLFNBQVNWLGVBQWUsQ0FBQztFQUV6RTtBQUNGO0FBQ0E7QUFDQTtFQUNFVyxXQUFXQSxDQUFFQyxlQUFlLEVBQUVDLE9BQU8sRUFBRztJQUV0Q0MsTUFBTSxJQUFJQSxNQUFNLENBQUVGLGVBQWUsWUFBWVQseUJBQTBCLENBQUM7O0lBRXhFO0lB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