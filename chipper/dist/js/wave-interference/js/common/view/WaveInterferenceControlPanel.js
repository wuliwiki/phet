// Copyright 2018-2022, University of Colorado Boulder
// @ts-nocheck
/**
 * Shows the main controls, including frequency/wavelength and amplitude.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */

import merge from '../../../../phet-core/js/merge.js';
import { Node, Line } from '../../../../scenery/js/imports.js';
import soundManager from '../../../../tambo/js/soundManager.js';
import waveInterference from '../../waveInterference.js';
import WaveInterferenceStrings from '../../WaveInterferenceStrings.js';
import WaveInterferenceConstants from '../WaveInterferenceConstants.js';
import AmplitudeControl from './AmplitudeControl.js';
import FrequencyControl from './FrequencyControl.js';
import SceneRadioButtonGroup from './SceneRadioButtonGroup.js';
import SoundViewTypeRadioButtonGroup from './SoundViewTypeRadioButtonGroup.js';
import WaveInterferenceCheckbox from './WaveInterferenceCheckbox.js';
import WaveInterferencePanel from './WaveInterferencePanel.js';
import WaveInterferenceText from './WaveInterferenceText.js';
const graphString = WaveInterferenceStrings.graph;
const intensityString = WaveInterferenceStrings.intensity;
const playToneString = WaveInterferenceStrings.playTone;
const screenLabelString = WaveInterferenceStrings.screenLabel;
const soundEffectString = WaveInterferenceStrings.soundEffect;
class WaveInterferenceControlPanel extends WaveInterferencePanel {
  constructor(model, alignGroup, options) {
    options = merge({
      // {Node|null} This additional control (if present) will be shown beneath the Amplitude slider in the
      // WaveInterferenceControlPanel
      additionalControl: null,
      showIntensityCheckbox: true,
      maxWidth: WaveInterferenceConstants.PANEL_MAX_WIDTH,
      yMargin: 4,
      showSceneRadioButtons: true,
      showPlaySoundControl: false,
      audioEnabled: true
    }, options);
    const frequencyControl = new FrequencyControl(model);
    const amplitudeControl = new AmplitudeControl(model);
    let soundViewTypeRadioButtonGroup = null;
    if (model.soundScene && model.soundScene.showSoundParticles) {
      soundViewTypeRadioButtonGroup = new SoundViewTypeRadioButtonGroup(model);
    }
    const graphCheckbox = new WaveInterferenceCheckbox(model.showGraphProperty, new WaveInterferenceText(graphString, WaveInterferenceConstants.CONTROL_PANEL_TEXT_MAX_WIDTH_OPTIONS));
    const screenCheckbox = new WaveInterferenceCheckbox(model.showScreenProperty, new WaveInterferenceText(screenLabelString, WaveInterferenceConstants.CONTROL_PANEL_TEXT_MAX_WIDTH_OPTIONS));
    const intensityCheckbox = new WaveInterferenceCheckbox(model.showIntensityGraphProperty, new WaveInterferenceText(intensityString, WaveInterferenceConstants.CONTROL_PANEL_TEXT_MAX_WIDTH_OPTIONS));

    // Only enable the intensity checkbox when the screen is selected
    model.showScreenProperty.link(showScreen => intensityCheckbox.setEnabled(showScreen));
    const maxComponentWidth = _.max([...(soundViewTypeRadioButtonGroup ? [soundViewTypeRadioButtonGroup.width] : []), screenCheckbox.width, graphCheckbox.width, frequencyControl.width, amplitudeControl.width]);
    const separator = new Line(0, 0, maxComponentWidth, 0, {
      stroke: 'rgb( 100, 100, 100 )'
    });

    // Set pointer areas for the checkboxes, now that we have the separator dimensions.
    const updatePointerAreas = checkbox => {
      checkbox.mouseArea = checkbox.localBounds.dilated(2).withX(maxComponentWidth);
      checkbox.touchArea = checkbox.mouseArea;
    };
    updatePointerAreas(graphCheckbox);
    updatePointerAreas(screenCheckbox);
    updatePointerAreas(intensityCheckbox);

    // See also playToneCheckbox mouseArea/touchArea set below

    const sceneRadioButtonGroup = options.showSceneRadioButtons ? new SceneRadioButtonGroup(model.waterScene, model.soundScene, model.lightScene, model.sceneProperty) : null;
    let playToneCheckbox = null;

    // Only show the Play Tone checkbox for the Sound Scene, if specified.
    if (model.soundScene && options.showPlaySoundControl) {
      playToneCheckbox = new WaveInterferenceCheckbox(model.soundScene.isTonePlayingProperty, new WaveInterferenceText(playToneString, WaveInterferenceConstants.CONTROL_PANEL_TEXT_MAX_WIDTH_OPTIONS), {
        audioEnabled: options.audioEnabled
      });

      // In terms of PhET-iO, there could be a situation where a client wants to control the enabledProperty of the
      // sound-related checkboxes, and toggling the mute button in the navbar will override their customization. There
      // is precedent for handling this sort of situation in other sims, such as the neutralIndicatorNode in ph-scale
      // (phetsims/ph-scale#102) and the phaseDiagramContainer in states-of-matter (phetsims/states-of-matter#332).
      soundManager.enabledProperty.link(enabled => {
        playToneCheckbox.enabled = enabled;
      });
      updatePointerAreas(playToneCheckbox);
    }

    // Horizontal layout
    const centerX = frequencyControl.centerX;
    frequencyControl.centerX = centerX;
    amplitudeControl.centerX = centerX;
    if (options.additionalControl) {
      options.additionalControl.centerX = centerX;
    }
    if (sceneRadioButtonGroup) {
      sceneRadioButtonGroup.centerX = centerX;
    }
    separator.centerX = centerX;
    const minX = _.min([frequencyControl.left, amplitudeControl.left, ...(sceneRadioButtonGroup ? [sceneRadioButtonGroup.left] : [])]);

    // Align controls to the left
    if (soundViewTypeRadioButtonGroup) {
      soundViewTypeRadioButtonGroup.left = minX;
    }
    graphCheckbox.left = minX;
    screenCheckbox.left = minX;
    if (playToneCheckbox) {
      playToneCheckbox.left = minX;
    }

    // Indent the intensity checkbox
    intensityCheckbox.left = minX + 20;

    // Vertical layout
    amplitudeControl.top = frequencyControl.bottom + 7;
    const y = amplitudeControl.bottom + 5;

    // The Separation NumberControl is an additionalControl
    if (options.additionalControl) {
      options.additionalControl.top = y + 8;
      if (sceneRadioButtonGroup) {
        sceneRadioButtonGroup.top = options.additionalControl.bottom + 8 + 8;
      }
    } else {
      if (sceneRadioButtonGroup) {
        sceneRadioButtonGroup.top = y + 8;
      }
    }
    const HORIZONTAL_SEPARATOR_MARGIN = 7;
    const CHECKBOX_SPACING = 6;
    separator.top = sceneRadioButtonGroup ? sceneRadioButtonGroup.bottom + 8 : y;
    graphCheckbox.top = separator.bottom + HORIZONTAL_SEPARATOR_MARGIN;
    if (playToneCheckbox) {
      playToneCheckbox.top = graphCheckbox.bottom + CHECKBOX_SPACING;
    }
    if (soundViewTypeRadioButtonGroup) {
      soundViewTypeRadioButtonGroup.top = (playToneCheckbox ? playToneCheckbox.bottom : graphCheckbox.bottom) + CHECKBOX_SPACING + 2;
    }
    screenCheckbox.top = graphCheckbox.bottom + CHECKBOX_SPACING;
    intensityCheckbox.top = screenCheckbox.bottom + CHECKBOX_SPACING;
    const container = new Node();
    const createLightSonificationCheckbox = () => {
      const lastCheckbox = options.showIntensityCheckbox ? intensityCheckbox : screenCheckbox;
      const soundEffectCheckbox = new WaveInterferenceCheckbox(model.lightScene.soundEffectEnabledProperty, new WaveInterferenceText(soundEffectString, WaveInterferenceConstants.CONTROL_PANEL_TEXT_MAX_WIDTH_OPTIONS), {
        audioEnabled: options.audioEnabled,
        top: lastCheckbox.bottom + CHECKBOX_SPACING,
        left: screenCheckbox.left
      });

      // In terms of PhET-iO, there could be a situation where a client wants to control the enabledProperty of the
      // sound-related checkboxes, and toggling the mute button in the navbar will override their customization. There
      // is precedent for handling this sort of situation in other sims, such as the neutralIndicatorNode in ph-scale
      // (phetsims/ph-scale#102) and the phaseDiagramContainer in states-of-matter (phetsims/states-of-matter#332).
      soundManager.enabledProperty.link(enabled => {
        soundEffectCheckbox.enabled = enabled;
      });
      updatePointerAreas(soundEffectCheckbox);
      return soundEffectCheckbox;
    };

    // Update when the scene changes.  Add and remove children so that the panel changes size (has resize:true)
    model.sceneProperty.link(scene => {
      // z-ordering
      container.children = [frequencyControl, amplitudeControl, ...(options.additionalControl ? [options.additionalControl] : []), ...(sceneRadioButtonGroup ? [sceneRadioButtonGroup] : []), separator, graphCheckbox, ...(scene === model.soundScene && playToneCheckbox ? [playToneCheckbox] : []),
      // Wave/Particle selection only for Sound scene
      ...(scene === model.soundScene && model.soundScene.showSoundParticles ? [soundViewTypeRadioButtonGroup] : []),
      // Screen & Intensity graph should only be available for light scenes. Remove it from water and sound.
      ...(scene === model.lightScene ? [screenCheckbox] : []), ...(scene === model.lightScene && options.showIntensityCheckbox ? [intensityCheckbox] : []), ...(scene === model.lightScene ? [createLightSonificationCheckbox()] : [])];
    });
    const content = alignGroup.createBox(container);
    super(content, options);
  }
}
waveInterference.register('WaveInterferenceControlPanel', WaveInterferenceControlPanel);
export default WaveInterferenceControlPanel;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtZXJnZSIsIk5vZGUiLCJMaW5lIiwic291bmRNYW5hZ2VyIiwid2F2ZUludGVyZmVyZW5jZSIsIldhdmVJbnRlcmZlcmVuY2VTdHJpbmdzIiwiV2F2ZUludGVyZmVyZW5jZUNvbnN0YW50cyIsIkFtcGxpdHVkZUNvbnRyb2wiLCJGcmVxdWVuY3lDb250cm9sIiwiU2NlbmVSYWRpb0J1dHRvbkdyb3VwIiwiU291bmRWaWV3VHlwZVJhZGlvQnV0dG9uR3JvdXAiLCJXYXZlSW50ZXJmZXJlbmNlQ2hlY2tib3giLCJXYXZlSW50ZXJmZXJlbmNlUGFuZWwiLCJXYXZlSW50ZXJmZXJlbmNlVGV4dCIsImdyYXBoU3RyaW5nIiwiZ3JhcGgiLCJpbnRlbnNpdHlTdHJpbmciLCJpbnRlbnNpdHkiLCJwbGF5VG9uZVN0cmluZyIsInBsYXlUb25lIiwic2NyZWVuTGFiZWxTdHJpbmciLCJzY3JlZW5MYWJlbCIsInNvdW5kRWZmZWN0U3RyaW5nIiwic291bmRFZmZlY3QiLCJXYXZlSW50ZXJmZXJlbmNlQ29udHJvbFBhbmVsIiwiY29uc3RydWN0b3IiLCJtb2RlbCIsImFsaWduR3JvdXAiLCJvcHRpb25zIiwiYWRkaXRpb25hbENvbnRyb2wiLCJzaG93SW50ZW5zaXR5Q2hlY2tib3giLCJtYXhXaWR0aCIsIlBBTkVMX01BWF9XSURUSCIsInlNYXJnaW4iLCJzaG93U2NlbmVSYWRpb0J1dHRvbnMiLCJzaG93UGxheVNvdW5kQ29udHJvbCIsImF1ZGlvRW5hYmxlZCIsImZyZXF1ZW5jeUNvbnRyb2wiLCJhbXBsaXR1ZGVDb250cm9sIiwic291bmRWaWV3VHlwZVJhZGlvQnV0dG9uR3JvdXAiLCJzb3VuZFNjZW5lIiwic2hvd1NvdW5kUGFydGljbGVzIiwiZ3JhcGhDaGVja2JveCIsInNob3dHcmFwaFByb3BlcnR5IiwiQ09OVFJPTF9QQU5FTF9URVhUX01BWF9XSURUSF9PUFRJT05TIiwic2NyZWVuQ2hlY2tib3giLCJzaG93U2NyZWVuUHJvcGVydHkiLCJpbnRlbnNpdHlDaGVja2JveCIsInNob3dJbnRlbnNpdHlHcmFwaFByb3BlcnR5IiwibGluayIsInNob3dTY3JlZW4iLCJzZXRFbmFibGVkIiwibWF4Q29tcG9uZW50V2lkdGgiLCJfIiwibWF4Iiwid2lkdGgiLCJzZXBhcmF0b3IiLCJzdHJva2UiLCJ1cGRhdGVQb2ludGVyQXJlYXMiLCJjaGVja2JveCIsIm1vdXNlQXJlYSIsImxvY2FsQm91bmRzIiwiZGlsYXRlZCIsIndpdGhYIiwidG91Y2hBcmVhIiwic2NlbmVSYWRpb0J1dHRvbkdyb3VwIiwid2F0ZXJTY2VuZSIsImxpZ2h0U2NlbmUiLCJzY2VuZVByb3BlcnR5IiwicGxheVRvbmVDaGVja2JveCIsImlzVG9uZVBsYXlpbmdQcm9wZXJ0eSIsImVuYWJsZWRQcm9wZXJ0eSIsImVuYWJsZWQiLCJjZW50ZXJYIiwibWluWCIsIm1pbiIsImxlZnQiLCJ0b3AiLCJib3R0b20iLCJ5IiwiSE9SSVpPTlRBTF9TRVBBUkFUT1JfTUFSR0lOIiwiQ0hFQ0tCT1hfU1BBQ0lORyIsImNvbnRhaW5lciIsImNyZWF0ZUxpZ2h0U29uaWZpY2F0aW9uQ2hlY2tib3giLCJsYXN0Q2hlY2tib3giLCJzb3VuZEVmZmVjdENoZWNrYm94Iiwic291bmRFZmZlY3RFbmFibGVkUHJvcGVydHkiLCJzY2VuZSIsImNoaWxkcmVuIiwiY29udGVudCIsImNyZWF0ZUJveCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiV2F2ZUludGVyZmVyZW5jZUNvbnRyb2xQYW5lbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOC0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuLy8gQHRzLW5vY2hlY2tcclxuLyoqXHJcbiAqIFNob3dzIHRoZSBtYWluIGNvbnRyb2xzLCBpbmNsdWRpbmcgZnJlcXVlbmN5L3dhdmVsZW5ndGggYW5kIGFtcGxpdHVkZS5cclxuICpcclxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICovXHJcblxyXG5pbXBvcnQgbWVyZ2UgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL21lcmdlLmpzJztcclxuaW1wb3J0IHsgTm9kZSwgTGluZSB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBzb3VuZE1hbmFnZXIgZnJvbSAnLi4vLi4vLi4vLi4vdGFtYm8vanMvc291bmRNYW5hZ2VyLmpzJztcclxuaW1wb3J0IHdhdmVJbnRlcmZlcmVuY2UgZnJvbSAnLi4vLi4vd2F2ZUludGVyZmVyZW5jZS5qcyc7XHJcbmltcG9ydCBXYXZlSW50ZXJmZXJlbmNlU3RyaW5ncyBmcm9tICcuLi8uLi9XYXZlSW50ZXJmZXJlbmNlU3RyaW5ncy5qcyc7XHJcbmltcG9ydCBXYXZlSW50ZXJmZXJlbmNlQ29uc3RhbnRzIGZyb20gJy4uL1dhdmVJbnRlcmZlcmVuY2VDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgQW1wbGl0dWRlQ29udHJvbCBmcm9tICcuL0FtcGxpdHVkZUNvbnRyb2wuanMnO1xyXG5pbXBvcnQgRnJlcXVlbmN5Q29udHJvbCBmcm9tICcuL0ZyZXF1ZW5jeUNvbnRyb2wuanMnO1xyXG5pbXBvcnQgU2NlbmVSYWRpb0J1dHRvbkdyb3VwIGZyb20gJy4vU2NlbmVSYWRpb0J1dHRvbkdyb3VwLmpzJztcclxuaW1wb3J0IFNvdW5kVmlld1R5cGVSYWRpb0J1dHRvbkdyb3VwIGZyb20gJy4vU291bmRWaWV3VHlwZVJhZGlvQnV0dG9uR3JvdXAuanMnO1xyXG5pbXBvcnQgV2F2ZUludGVyZmVyZW5jZUNoZWNrYm94IGZyb20gJy4vV2F2ZUludGVyZmVyZW5jZUNoZWNrYm94LmpzJztcclxuaW1wb3J0IFdhdmVJbnRlcmZlcmVuY2VQYW5lbCBmcm9tICcuL1dhdmVJbnRlcmZlcmVuY2VQYW5lbC5qcyc7XHJcbmltcG9ydCBXYXZlSW50ZXJmZXJlbmNlVGV4dCBmcm9tICcuL1dhdmVJbnRlcmZlcmVuY2VUZXh0LmpzJztcclxuXHJcbmNvbnN0IGdyYXBoU3RyaW5nID0gV2F2ZUludGVyZmVyZW5jZVN0cmluZ3MuZ3JhcGg7XHJcbmNvbnN0IGludGVuc2l0eVN0cmluZyA9IFdhdmVJbnRlcmZlcmVuY2VTdHJpbmdzLmludGVuc2l0eTtcclxuY29uc3QgcGxheVRvbmVTdHJpbmcgPSBXYXZlSW50ZXJmZXJlbmNlU3RyaW5ncy5wbGF5VG9uZTtcclxuY29uc3Qgc2NyZWVuTGFiZWxTdHJpbmcgPSBXYXZlSW50ZXJmZXJlbmNlU3RyaW5ncy5zY3JlZW5MYWJlbDtcclxuY29uc3Qgc291bmRFZmZlY3RTdHJpbmcgPSBXYXZlSW50ZXJmZXJlbmNlU3RyaW5ncy5zb3VuZEVmZmVjdDtcclxuXHJcbmNsYXNzIFdhdmVJbnRlcmZlcmVuY2VDb250cm9sUGFuZWwgZXh0ZW5kcyBXYXZlSW50ZXJmZXJlbmNlUGFuZWwge1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIG1vZGVsLCBhbGlnbkdyb3VwLCBvcHRpb25zICkge1xyXG5cclxuICAgIG9wdGlvbnMgPSBtZXJnZSgge1xyXG5cclxuICAgICAgLy8ge05vZGV8bnVsbH0gVGhpcyBhZGRpdGlvbmFsIGNvbnRyb2wgKGlmIHByZXNlbnQpIHdpbGwgYmUgc2hvd24gYmVuZWF0aCB0aGUgQW1wbGl0dWRlIHNsaWRlciBpbiB0aGVcclxuICAgICAgLy8gV2F2ZUludGVyZmVyZW5jZUNvbnRyb2xQYW5lbFxyXG4gICAgICBhZGRpdGlvbmFsQ29udHJvbDogbnVsbCxcclxuXHJcbiAgICAgIHNob3dJbnRlbnNpdHlDaGVja2JveDogdHJ1ZSxcclxuICAgICAgbWF4V2lkdGg6IFdhdmVJbnRlcmZlcmVuY2VDb25zdGFudHMuUEFORUxfTUFYX1dJRFRILFxyXG4gICAgICB5TWFyZ2luOiA0LFxyXG4gICAgICBzaG93U2NlbmVSYWRpb0J1dHRvbnM6IHRydWUsXHJcbiAgICAgIHNob3dQbGF5U291bmRDb250cm9sOiBmYWxzZSxcclxuICAgICAgYXVkaW9FbmFibGVkOiB0cnVlXHJcbiAgICB9LCBvcHRpb25zICk7XHJcblxyXG4gICAgY29uc3QgZnJlcXVlbmN5Q29udHJvbCA9IG5ldyBGcmVxdWVuY3lDb250cm9sKCBtb2RlbCApO1xyXG4gICAgY29uc3QgYW1wbGl0dWRlQ29udHJvbCA9IG5ldyBBbXBsaXR1ZGVDb250cm9sKCBtb2RlbCApO1xyXG5cclxuICAgIGxldCBzb3VuZFZpZXdUeXBlUmFkaW9CdXR0b25Hcm91cCA9IG51bGw7XHJcbiAgICBpZiAoIG1vZGVsLnNvdW5kU2NlbmUgJiYgbW9kZWwuc291bmRTY2VuZS5zaG93U291bmRQYXJ0aWNsZXMgKSB7XHJcbiAgICAgIHNvdW5kVmlld1R5cGVSYWRpb0J1dHRvbkdyb3VwID0gbmV3IFNvdW5kVmlld1R5cGVSYWRpb0J1dHRvbkdyb3VwKCBtb2RlbCApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGdyYXBoQ2hlY2tib3ggPSBuZXcgV2F2ZUludGVyZmVyZW5jZUNoZWNrYm94KCBtb2RlbC5zaG93R3JhcGhQcm9wZXJ0eSwgbmV3IFdhdmVJbnRlcmZlcmVuY2VUZXh0KCBncmFwaFN0cmluZywgV2F2ZUludGVyZmVyZW5jZUNvbnN0YW50cy5DT05UUk9MX1BBTkVMX1RFWFRfTUFYX1dJRFRIX09QVElPTlMgKSApO1xyXG4gICAgY29uc3Qgc2NyZWVuQ2hlY2tib3ggPSBuZXcgV2F2ZUludGVyZmVyZW5jZUNoZWNrYm94KCBtb2RlbC5zaG93U2NyZWVuUHJvcGVydHksIG5ldyBXYXZlSW50ZXJmZXJlbmNlVGV4dCggc2NyZWVuTGFiZWxTdHJpbmcsIFdhdmVJbnRlcmZlcmVuY2VDb25zdGFudHMuQ09OVFJPTF9QQU5FTF9URVhUX01BWF9XSURUSF9PUFRJT05TICkgKTtcclxuICAgIGNvbnN0IGludGVuc2l0eUNoZWNrYm94ID0gbmV3IFdhdmVJbnRlcmZlcmVuY2VDaGVja2JveCggbW9kZWwuc2hvd0ludGVuc2l0eUdyYXBoUHJvcGVydHksIG5ldyBXYXZlSW50ZXJmZXJlbmNlVGV4dCggaW50ZW5zaXR5U3RyaW5nLCBXYXZlSW50ZXJmZXJlbmNlQ29uc3RhbnRzLkNPTlRST0xfUEFORUxfVEVYVF9NQVhfV0lEVEhfT1BUSU9OUyApICk7XHJcblxyXG4gICAgLy8gT25seSBlbmFibGUgdGhlIGludGVuc2l0eSBjaGVja2JveCB3aGVuIHRoZSBzY3JlZW4gaXMgc2VsZWN0ZWRcclxuICAgIG1vZGVsLnNob3dTY3JlZW5Qcm9wZXJ0eS5saW5rKCBzaG93U2NyZWVuID0+IGludGVuc2l0eUNoZWNrYm94LnNldEVuYWJsZWQoIHNob3dTY3JlZW4gKSApO1xyXG5cclxuICAgIGNvbnN0IG1heENvbXBvbmVudFdpZHRoID0gXy5tYXgoIFtcclxuICAgICAgLi4uKCBzb3VuZFZpZXdUeXBlUmFkaW9CdXR0b25Hcm91cCA/IFsgc291bmRWaWV3VHlwZVJhZGlvQnV0dG9uR3JvdXAud2lkdGggXSA6IFtdICksXHJcbiAgICAgIHNjcmVlbkNoZWNrYm94LndpZHRoLFxyXG4gICAgICBncmFwaENoZWNrYm94LndpZHRoLFxyXG4gICAgICBmcmVxdWVuY3lDb250cm9sLndpZHRoLFxyXG4gICAgICBhbXBsaXR1ZGVDb250cm9sLndpZHRoXHJcbiAgICBdICk7XHJcbiAgICBjb25zdCBzZXBhcmF0b3IgPSBuZXcgTGluZSggMCwgMCwgbWF4Q29tcG9uZW50V2lkdGgsIDAsIHtcclxuICAgICAgc3Ryb2tlOiAncmdiKCAxMDAsIDEwMCwgMTAwICknXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gU2V0IHBvaW50ZXIgYXJlYXMgZm9yIHRoZSBjaGVja2JveGVzLCBub3cgdGhhdCB3ZSBoYXZlIHRoZSBzZXBhcmF0b3IgZGltZW5zaW9ucy5cclxuICAgIGNvbnN0IHVwZGF0ZVBvaW50ZXJBcmVhcyA9IGNoZWNrYm94ID0+IHtcclxuICAgICAgY2hlY2tib3gubW91c2VBcmVhID0gY2hlY2tib3gubG9jYWxCb3VuZHMuZGlsYXRlZCggMiApLndpdGhYKCBtYXhDb21wb25lbnRXaWR0aCApO1xyXG4gICAgICBjaGVja2JveC50b3VjaEFyZWEgPSBjaGVja2JveC5tb3VzZUFyZWE7XHJcbiAgICB9O1xyXG5cclxuICAgIHVwZGF0ZVBvaW50ZXJBcmVhcyggZ3JhcGhDaGVja2JveCApO1xyXG4gICAgdXBkYXRlUG9pbnRlckFyZWFzKCBzY3JlZW5DaGVja2JveCApO1xyXG4gICAgdXBkYXRlUG9pbnRlckFyZWFzKCBpbnRlbnNpdHlDaGVja2JveCApO1xyXG5cclxuICAgIC8vIFNlZSBhbHNvIHBsYXlUb25lQ2hlY2tib3ggbW91c2VBcmVhL3RvdWNoQXJlYSBzZXQgYmVsb3dcclxuXHJcbiAgICBjb25zdCBzY2VuZVJhZGlvQnV0dG9uR3JvdXAgPSBvcHRpb25zLnNob3dTY2VuZVJhZGlvQnV0dG9ucyA/IG5ldyBTY2VuZVJhZGlvQnV0dG9uR3JvdXAoXHJcbiAgICAgIG1vZGVsLndhdGVyU2NlbmUsXHJcbiAgICAgIG1vZGVsLnNvdW5kU2NlbmUsXHJcbiAgICAgIG1vZGVsLmxpZ2h0U2NlbmUsXHJcbiAgICAgIG1vZGVsLnNjZW5lUHJvcGVydHlcclxuICAgICkgOiBudWxsO1xyXG5cclxuICAgIGxldCBwbGF5VG9uZUNoZWNrYm94ID0gbnVsbDtcclxuXHJcbiAgICAvLyBPbmx5IHNob3cgdGhlIFBsYXkgVG9uZSBjaGVja2JveCBmb3IgdGhlIFNvdW5kIFNjZW5lLCBpZiBzcGVjaWZpZWQuXHJcbiAgICBpZiAoIG1vZGVsLnNvdW5kU2NlbmUgJiYgb3B0aW9ucy5zaG93UGxheVNvdW5kQ29udHJvbCApIHtcclxuICAgICAgcGxheVRvbmVDaGVja2JveCA9IG5ldyBXYXZlSW50ZXJmZXJlbmNlQ2hlY2tib3goIG1vZGVsLnNvdW5kU2NlbmUuaXNUb25lUGxheWluZ1Byb3BlcnR5LCBuZXcgV2F2ZUludGVyZmVyZW5jZVRleHQoIHBsYXlUb25lU3RyaW5nLCBXYXZlSW50ZXJmZXJlbmNlQ29uc3RhbnRzLkNPTlRST0xfUEFORUxfVEVYVF9NQVhfV0lEVEhfT1BUSU9OUyApLCB7XHJcbiAgICAgICAgYXVkaW9FbmFibGVkOiBvcHRpb25zLmF1ZGlvRW5hYmxlZFxyXG4gICAgICB9ICk7XHJcblxyXG4gICAgICAvLyBJbiB0ZXJtcyBvZiBQaEVULWlPLCB0aGVyZSBjb3VsZCBiZSBhIHNpdHVhdGlvbiB3aGVyZSBhIGNsaWVudCB3YW50cyB0byBjb250cm9sIHRoZSBlbmFibGVkUHJvcGVydHkgb2YgdGhlXHJcbiAgICAgIC8vIHNvdW5kLXJlbGF0ZWQgY2hlY2tib3hlcywgYW5kIHRvZ2dsaW5nIHRoZSBtdXRlIGJ1dHRvbiBpbiB0aGUgbmF2YmFyIHdpbGwgb3ZlcnJpZGUgdGhlaXIgY3VzdG9taXphdGlvbi4gVGhlcmVcclxuICAgICAgLy8gaXMgcHJlY2VkZW50IGZvciBoYW5kbGluZyB0aGlzIHNvcnQgb2Ygc2l0dWF0aW9uIGluIG90aGVyIHNpbXMsIHN1Y2ggYXMgdGhlIG5ldXRyYWxJbmRpY2F0b3JOb2RlIGluIHBoLXNjYWxlXHJcbiAgICAgIC8vIChwaGV0c2ltcy9waC1zY2FsZSMxMDIpIGFuZCB0aGUgcGhhc2VEaWFncmFtQ29udGFpbmVyIGluIHN0YXRlcy1vZi1tYXR0ZXIgKHBoZXRzaW1zL3N0YXRlcy1vZi1tYXR0ZXIjMzMyKS5cclxuICAgICAgc291bmRNYW5hZ2VyLmVuYWJsZWRQcm9wZXJ0eS5saW5rKCBlbmFibGVkID0+IHtcclxuICAgICAgICBwbGF5VG9uZUNoZWNrYm94LmVuYWJsZWQgPSBlbmFibGVkO1xyXG4gICAgICB9ICk7XHJcblxyXG4gICAgICB1cGRhdGVQb2ludGVyQXJlYXMoIHBsYXlUb25lQ2hlY2tib3ggKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBIb3Jpem9udGFsIGxheW91dFxyXG4gICAgY29uc3QgY2VudGVyWCA9IGZyZXF1ZW5jeUNvbnRyb2wuY2VudGVyWDtcclxuICAgIGZyZXF1ZW5jeUNvbnRyb2wuY2VudGVyWCA9IGNlbnRlclg7XHJcbiAgICBhbXBsaXR1ZGVDb250cm9sLmNlbnRlclggPSBjZW50ZXJYO1xyXG4gICAgaWYgKCBvcHRpb25zLmFkZGl0aW9uYWxDb250cm9sICkge29wdGlvbnMuYWRkaXRpb25hbENvbnRyb2wuY2VudGVyWCA9IGNlbnRlclg7fVxyXG4gICAgaWYgKCBzY2VuZVJhZGlvQnV0dG9uR3JvdXAgKSB7IHNjZW5lUmFkaW9CdXR0b25Hcm91cC5jZW50ZXJYID0gY2VudGVyWDsgfVxyXG4gICAgc2VwYXJhdG9yLmNlbnRlclggPSBjZW50ZXJYO1xyXG4gICAgY29uc3QgbWluWCA9IF8ubWluKCBbXHJcbiAgICAgIGZyZXF1ZW5jeUNvbnRyb2wubGVmdCxcclxuICAgICAgYW1wbGl0dWRlQ29udHJvbC5sZWZ0LFxyXG4gICAgICAuLi4oIHNjZW5lUmFkaW9CdXR0b25Hcm91cCA/IFsgc2NlbmVSYWRpb0J1dHRvbkdyb3VwLmxlZnQgXSA6IFtdIClcclxuICAgIF0gKTtcclxuXHJcbiAgICAvLyBBbGlnbiBjb250cm9scyB0byB0aGUgbGVmdFxyXG4gICAgaWYgKCBzb3VuZFZpZXdUeXBlUmFkaW9CdXR0b25Hcm91cCApIHtcclxuICAgICAgc291bmRWaWV3VHlwZVJhZGlvQnV0dG9uR3JvdXAubGVmdCA9IG1pblg7XHJcbiAgICB9XHJcbiAgICBncmFwaENoZWNrYm94LmxlZnQgPSBtaW5YO1xyXG4gICAgc2NyZWVuQ2hlY2tib3gubGVmdCA9IG1pblg7XHJcbiAgICBpZiAoIHBsYXlUb25lQ2hlY2tib3ggKSB7XHJcbiAgICAgIHBsYXlUb25lQ2hlY2tib3gubGVmdCA9IG1pblg7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSW5kZW50IHRoZSBpbnRlbnNpdHkgY2hlY2tib3hcclxuICAgIGludGVuc2l0eUNoZWNrYm94LmxlZnQgPSBtaW5YICsgMjA7XHJcblxyXG4gICAgLy8gVmVydGljYWwgbGF5b3V0XHJcbiAgICBhbXBsaXR1ZGVDb250cm9sLnRvcCA9IGZyZXF1ZW5jeUNvbnRyb2wuYm90dG9tICsgNztcclxuICAgIGNvbnN0IHkgPSBhbXBsaXR1ZGVDb250cm9sLmJvdHRvbSArIDU7XHJcblxyXG4gICAgLy8gVGhlIFNlcGFyYXRpb24gTnVtYmVyQ29udHJvbCBpcyBhbiBhZGRpdGlvbmFsQ29udHJvbFxyXG4gICAgaWYgKCBvcHRpb25zLmFkZGl0aW9uYWxDb250cm9sICkge1xyXG4gICAgICBvcHRpb25zLmFkZGl0aW9uYWxDb250cm9sLnRvcCA9IHkgKyA4O1xyXG4gICAgICBpZiAoIHNjZW5lUmFkaW9CdXR0b25Hcm91cCApIHtcclxuICAgICAgICBzY2VuZVJhZGlvQnV0dG9uR3JvdXAudG9wID0gb3B0aW9ucy5hZGRpdGlvbmFsQ29udHJvbC5ib3R0b20gKyA4ICsgODtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGlmICggc2NlbmVSYWRpb0J1dHRvbkdyb3VwICkge1xyXG4gICAgICAgIHNjZW5lUmFkaW9CdXR0b25Hcm91cC50b3AgPSB5ICsgODtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgSE9SSVpPTlRBTF9TRVBBUkFUT1JfTUFSR0lOID0gNztcclxuICAgIGNvbnN0IENIRUNLQk9YX1NQQUNJTkcgPSA2O1xyXG4gICAgc2VwYXJhdG9yLnRvcCA9IHNjZW5lUmFkaW9CdXR0b25Hcm91cCA/ICggc2NlbmVSYWRpb0J1dHRvbkdyb3VwLmJvdHRvbSArIDggKSA6IHk7XHJcbiAgICBncmFwaENoZWNrYm94LnRvcCA9IHNlcGFyYXRvci5ib3R0b20gKyBIT1JJWk9OVEFMX1NFUEFSQVRPUl9NQVJHSU47XHJcbiAgICBpZiAoIHBsYXlUb25lQ2hlY2tib3ggKSB7XHJcbiAgICAgIHBsYXlUb25lQ2hlY2tib3gudG9wID0gZ3JhcGhDaGVja2JveC5ib3R0b20gKyBDSEVDS0JPWF9TUEFDSU5HO1xyXG4gICAgfVxyXG4gICAgaWYgKCBzb3VuZFZpZXdUeXBlUmFkaW9CdXR0b25Hcm91cCApIHtcclxuICAgICAgc291bmRWaWV3VHlwZVJhZGlvQnV0dG9uR3JvdXAudG9wID0gKCBwbGF5VG9uZUNoZWNrYm94ID8gcGxheVRvbmVDaGVja2JveC5ib3R0b20gOiBncmFwaENoZWNrYm94LmJvdHRvbSApICsgQ0hFQ0tCT1hfU1BBQ0lORyArIDI7XHJcbiAgICB9XHJcbiAgICBzY3JlZW5DaGVja2JveC50b3AgPSBncmFwaENoZWNrYm94LmJvdHRvbSArIENIRUNLQk9YX1NQQUNJTkc7XHJcbiAgICBpbnRlbnNpdHlDaGVja2JveC50b3AgPSBzY3JlZW5DaGVja2JveC5ib3R0b20gKyBDSEVDS0JPWF9TUEFDSU5HO1xyXG5cclxuICAgIGNvbnN0IGNvbnRhaW5lciA9IG5ldyBOb2RlKCk7XHJcblxyXG4gICAgY29uc3QgY3JlYXRlTGlnaHRTb25pZmljYXRpb25DaGVja2JveCA9ICgpID0+IHtcclxuXHJcbiAgICAgIGNvbnN0IGxhc3RDaGVja2JveCA9IG9wdGlvbnMuc2hvd0ludGVuc2l0eUNoZWNrYm94ID8gaW50ZW5zaXR5Q2hlY2tib3ggOiBzY3JlZW5DaGVja2JveDtcclxuICAgICAgY29uc3Qgc291bmRFZmZlY3RDaGVja2JveCA9IG5ldyBXYXZlSW50ZXJmZXJlbmNlQ2hlY2tib3goIG1vZGVsLmxpZ2h0U2NlbmUuc291bmRFZmZlY3RFbmFibGVkUHJvcGVydHksIG5ldyBXYXZlSW50ZXJmZXJlbmNlVGV4dCggc291bmRFZmZlY3RTdHJpbmcsIFdhdmVJbnRlcmZlcmVuY2VDb25zdGFudHMuQ09OVFJPTF9QQU5FTF9URVhUX01BWF9XSURUSF9PUFRJT05TICksIHtcclxuICAgICAgICBhdWRpb0VuYWJsZWQ6IG9wdGlvbnMuYXVkaW9FbmFibGVkLFxyXG4gICAgICAgIHRvcDogbGFzdENoZWNrYm94LmJvdHRvbSArIENIRUNLQk9YX1NQQUNJTkcsXHJcbiAgICAgICAgbGVmdDogc2NyZWVuQ2hlY2tib3gubGVmdFxyXG4gICAgICB9ICk7XHJcblxyXG4gICAgICAvLyBJbiB0ZXJtcyBvZiBQaEVULWlPLCB0aGVyZSBjb3VsZCBiZSBhIHNpdHVhdGlvbiB3aGVyZSBhIGNsaWVudCB3YW50cyB0byBjb250cm9sIHRoZSBlbmFibGVkUHJvcGVydHkgb2YgdGhlXHJcbiAgICAgIC8vIHNvdW5kLXJlbGF0ZWQgY2hlY2tib3hlcywgYW5kIHRvZ2dsaW5nIHRoZSBtdXRlIGJ1dHRvbiBpbiB0aGUgbmF2YmFyIHdpbGwgb3ZlcnJpZGUgdGhlaXIgY3VzdG9taXphdGlvbi4gVGhlcmVcclxuICAgICAgLy8gaXMgcHJlY2VkZW50IGZvciBoYW5kbGluZyB0aGlzIHNvcnQgb2Ygc2l0dWF0aW9uIGluIG90aGVyIHNpbXMsIHN1Y2ggYXMgdGhlIG5ldXRyYWxJbmRpY2F0b3JOb2RlIGluIHBoLXNjYWxlXHJcbiAgICAgIC8vIChwaGV0c2ltcy9waC1zY2FsZSMxMDIpIGFuZCB0aGUgcGhhc2VEaWFncmFtQ29udGFpbmVyIGluIHN0YXRlcy1vZi1tYXR0ZXIgKHBoZXRzaW1zL3N0YXRlcy1vZi1tYXR0ZXIjMzMyKS5cclxuICAgICAgc291bmRNYW5hZ2VyLmVuYWJsZWRQcm9wZXJ0eS5saW5rKCBlbmFibGVkID0+IHtcclxuICAgICAgICBzb3VuZEVmZmVjdENoZWNrYm94LmVuYWJsZWQgPSBlbmFibGVkO1xyXG4gICAgICB9ICk7XHJcbiAgICAgIHVwZGF0ZVBvaW50ZXJBcmVhcyggc291bmRFZmZlY3RDaGVja2JveCApO1xyXG5cclxuICAgICAgcmV0dXJuIHNvdW5kRWZmZWN0Q2hlY2tib3g7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFVwZGF0ZSB3aGVuIHRoZSBzY2VuZSBjaGFuZ2VzLiAgQWRkIGFuZCByZW1vdmUgY2hpbGRyZW4gc28gdGhhdCB0aGUgcGFuZWwgY2hhbmdlcyBzaXplIChoYXMgcmVzaXplOnRydWUpXHJcbiAgICBtb2RlbC5zY2VuZVByb3BlcnR5LmxpbmsoIHNjZW5lID0+IHtcclxuXHJcbiAgICAgIC8vIHotb3JkZXJpbmdcclxuICAgICAgY29udGFpbmVyLmNoaWxkcmVuID0gW1xyXG5cclxuICAgICAgICBmcmVxdWVuY3lDb250cm9sLFxyXG4gICAgICAgIGFtcGxpdHVkZUNvbnRyb2wsXHJcblxyXG4gICAgICAgIC4uLiggb3B0aW9ucy5hZGRpdGlvbmFsQ29udHJvbCA/IFsgb3B0aW9ucy5hZGRpdGlvbmFsQ29udHJvbCBdIDogW10gKSxcclxuICAgICAgICAuLi4oIHNjZW5lUmFkaW9CdXR0b25Hcm91cCA/IFsgc2NlbmVSYWRpb0J1dHRvbkdyb3VwIF0gOiBbXSApLFxyXG4gICAgICAgIHNlcGFyYXRvcixcclxuICAgICAgICBncmFwaENoZWNrYm94LFxyXG5cclxuICAgICAgICAuLi4oIHNjZW5lID09PSBtb2RlbC5zb3VuZFNjZW5lICYmIHBsYXlUb25lQ2hlY2tib3ggPyBbIHBsYXlUb25lQ2hlY2tib3ggXSA6IFtdICksXHJcblxyXG4gICAgICAgIC8vIFdhdmUvUGFydGljbGUgc2VsZWN0aW9uIG9ubHkgZm9yIFNvdW5kIHNjZW5lXHJcbiAgICAgICAgLi4uKCBzY2VuZSA9PT0gbW9kZWwuc291bmRTY2VuZSAmJiBtb2RlbC5zb3VuZFNjZW5lLnNob3dTb3VuZFBhcnRpY2xlcyA/IFsgc291bmRWaWV3VHlwZVJhZGlvQnV0dG9uR3JvdXAgXSA6IFtdICksXHJcblxyXG4gICAgICAgIC8vIFNjcmVlbiAmIEludGVuc2l0eSBncmFwaCBzaG91bGQgb25seSBiZSBhdmFpbGFibGUgZm9yIGxpZ2h0IHNjZW5lcy4gUmVtb3ZlIGl0IGZyb20gd2F0ZXIgYW5kIHNvdW5kLlxyXG4gICAgICAgIC4uLiggc2NlbmUgPT09IG1vZGVsLmxpZ2h0U2NlbmUgPyBbIHNjcmVlbkNoZWNrYm94IF0gOiBbXSApLFxyXG4gICAgICAgIC4uLiggc2NlbmUgPT09IG1vZGVsLmxpZ2h0U2NlbmUgJiYgb3B0aW9ucy5zaG93SW50ZW5zaXR5Q2hlY2tib3ggPyBbIGludGVuc2l0eUNoZWNrYm94IF0gOiBbXSApLFxyXG4gICAgICAgIC4uLiggc2NlbmUgPT09IG1vZGVsLmxpZ2h0U2NlbmUgPyBbIGNyZWF0ZUxpZ2h0U29uaWZpY2F0aW9uQ2hlY2tib3goKSBdIDogW10gKVxyXG4gICAgICBdO1xyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IGNvbnRlbnQgPSBhbGlnbkdyb3VwLmNyZWF0ZUJveCggY29udGFpbmVyICk7XHJcblxyXG4gICAgc3VwZXIoIGNvbnRlbnQsIG9wdGlvbnMgKTtcclxuICB9XHJcbn1cclxuXHJcbndhdmVJbnRlcmZlcmVuY2UucmVnaXN0ZXIoICdXYXZlSW50ZXJmZXJlbmNlQ29udHJvbFBhbmVsJywgV2F2ZUludGVyZmVyZW5jZUNvbnRyb2xQYW5lbCApO1xyXG5leHBvcnQgZGVmYXVsdCBXYXZlSW50ZXJmZXJlbmNlQ29udHJvbFBhbmVsOyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsS0FBSyxNQUFNLG1DQUFtQztBQUNyRCxTQUFTQyxJQUFJLEVBQUVDLElBQUksUUFBUSxtQ0FBbUM7QUFDOUQsT0FBT0MsWUFBWSxNQUFNLHNDQUFzQztBQUMvRCxPQUFPQyxnQkFBZ0IsTUFBTSwyQkFBMkI7QUFDeEQsT0FBT0MsdUJBQXVCLE1BQU0sa0NBQWtDO0FBQ3RFLE9BQU9DLHlCQUF5QixNQUFNLGlDQUFpQztBQUN2RSxPQUFPQyxnQkFBZ0IsTUFBTSx1QkFBdUI7QUFDcEQsT0FBT0MsZ0JBQWdCLE1BQU0sdUJBQXVCO0FBQ3BELE9BQU9DLHFCQUFxQixNQUFNLDRCQUE0QjtBQUM5RCxPQUFPQyw2QkFBNkIsTUFBTSxvQ0FBb0M7QUFDOUUsT0FBT0Msd0JBQXdCLE1BQU0sK0JBQStCO0FBQ3BFLE9BQU9DLHFCQUFxQixNQUFNLDRCQUE0QjtBQUM5RCxPQUFPQyxvQkFBb0IsTUFBTSwyQkFBMkI7QUFFNUQsTUFBTUMsV0FBVyxHQUFHVCx1QkFBdUIsQ0FBQ1UsS0FBSztBQUNqRCxNQUFNQyxlQUFlLEdBQUdYLHVCQUF1QixDQUFDWSxTQUFTO0FBQ3pELE1BQU1DLGNBQWMsR0FBR2IsdUJBQXVCLENBQUNjLFFBQVE7QUFDdkQsTUFBTUMsaUJBQWlCLEdBQUdmLHVCQUF1QixDQUFDZ0IsV0FBVztBQUM3RCxNQUFNQyxpQkFBaUIsR0FBR2pCLHVCQUF1QixDQUFDa0IsV0FBVztBQUU3RCxNQUFNQyw0QkFBNEIsU0FBU1oscUJBQXFCLENB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