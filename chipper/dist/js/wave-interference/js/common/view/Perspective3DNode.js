// Copyright 2018-2022, University of Colorado Boulder
// @ts-nocheck
/**
 * Shows the partially rotated wave view in a pseudo-3D view.  Ported from RotationGlyph.java
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */

import Matrix3 from '../../../../dot/js/Matrix3.js';
import Utils from '../../../../dot/js/Utils.js';
import { Shape } from '../../../../kite/js/imports.js';
import ArrowNode from '../../../../scenery-phet/js/ArrowNode.js';
import { HBox, Node, Path } from '../../../../scenery/js/imports.js';
import Easing from '../../../../twixt/js/Easing.js';
import waveInterference from '../../waveInterference.js';
import WaveInterferenceStrings from '../../WaveInterferenceStrings.js';
import WaveInterferenceText from './WaveInterferenceText.js';
const topString = WaveInterferenceStrings.top;
class Perspective3DNode extends Node {
  constructor(waveAreaBounds, rotationAmountProperty, isRotatingProperty) {
    // depicts the top face
    const topFacePath = new Path(null, {
      stroke: 'black',
      lineWidth: 4,
      lineJoin: 'round'
    });

    // depicts the side face (when the user selects "side view")
    const sideFacePath = new Path(null, {
      stroke: 'black',
      lineWidth: 4,
      lineJoin: 'round'
    });

    // shows the up arrow
    const upNode = new HBox({
      children: [new WaveInterferenceText(topString, {
        fontSize: 32
      }), new ArrowNode(0, 0, 0, -110, {
        stroke: 'black',
        fill: 'yellow',
        lineWidth: 2,
        headHeight: 30,
        headWidth: 35,
        tailWidth: 20
      })]
    });
    super({
      children: [topFacePath, sideFacePath, upNode]
    });

    // @private
    this.waveAreaBounds = waveAreaBounds;
    this.rotationAmountProperty = rotationAmountProperty;
    this.isRotatingProperty = isRotatingProperty;
    this.topFacePath = topFacePath;
    this.sideFacePath = sideFacePath;
    this.upNode = upNode;

    // Update the shapes and text when the rotationAmount has changed
    rotationAmountProperty.link(this.update.bind(this));
  }

  /**
   * Sets the top face color, when the scene changes.
   * @param color - the top face color
   */
  setTopFaceColor(color) {
    this.topFacePath.fill = color;
  }

  /**
   * Sets the side face color, when the scene changes.
   * @param color - the side face color
   */
  setSideFaceColor(color) {
    this.sideFacePath.fill = color;
  }

  /**
   * Creates a shape for the top or side Face, at the correct perspective angle.
   * @param reduction - amount to reduce the width at the furthest point from the center
   * @param y - vertical coordinate of the Face
   */
  createFaceShape(reduction, y) {
    return new Shape().moveTo(this.waveAreaBounds.left, this.waveAreaBounds.centerY).lineTo(this.waveAreaBounds.left + reduction, y).lineTo(this.waveAreaBounds.right - reduction, y).lineTo(this.waveAreaBounds.right, this.waveAreaBounds.centerY).close();
  }

  /**
   * Update the shapes and text when the rotationAmount has changed
   */
  update() {
    // Apply easing to make the transition look visually nicer
    const rotationAmount = Easing.CUBIC_IN_OUT.value(this.rotationAmountProperty.get());
    const bounds = this.waveAreaBounds;
    const perspectiveWidth = bounds.width * 0.2;
    const topFaceTopY = Utils.linear(0, 1, bounds.top, bounds.centerY, rotationAmount);
    const topReduction = Utils.linear(0, 1, 0, perspectiveWidth, rotationAmount);
    const sideFaceBottomY = Utils.linear(0, 1, bounds.centerY, bounds.bottom, rotationAmount);
    const bottomReduction = Utils.linear(0, 1, perspectiveWidth, 0, rotationAmount);
    this.topFacePath.shape = this.createFaceShape(topReduction, topFaceTopY);
    this.sideFacePath.shape = this.createFaceShape(bottomReduction, sideFaceBottomY);

    // Only show the 3d perspective view while rotating
    this.topFacePath.visible = this.isRotatingProperty.get();
    this.sideFacePath.visible = this.isRotatingProperty.get();

    // Only show the "top" indicator while rotating, but not while it is exactly at 0 degrees
    this.upNode.visible = this.isRotatingProperty.get() && rotationAmount !== 0;

    // Position the arrow and text
    if (this.upNode.visible) {
      this.upNode.setMatrix(Matrix3.scaling(1, rotationAmount));
      this.upNode.centerY = this.sideFacePath.shape.bounds.centerY;
      this.upNode.right = this.sideFacePath.shape.bounds.right - 80;
    }
  }
}
waveInterference.register('Perspective3DNode', Perspective3DNode);
export default Perspective3DNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNYXRyaXgzIiwiVXRpbHMiLCJTaGFwZSIsIkFycm93Tm9kZSIsIkhCb3giLCJOb2RlIiwiUGF0aCIsIkVhc2luZyIsIndhdmVJbnRlcmZlcmVuY2UiLCJXYXZlSW50ZXJmZXJlbmNlU3RyaW5ncyIsIldhdmVJbnRlcmZlcmVuY2VUZXh0IiwidG9wU3RyaW5nIiwidG9wIiwiUGVyc3BlY3RpdmUzRE5vZGUiLCJjb25zdHJ1Y3RvciIsIndhdmVBcmVhQm91bmRzIiwicm90YXRpb25BbW91bnRQcm9wZXJ0eSIsImlzUm90YXRpbmdQcm9wZXJ0eSIsInRvcEZhY2VQYXRoIiwic3Ryb2tlIiwibGluZVdpZHRoIiwibGluZUpvaW4iLCJzaWRlRmFjZVBhdGgiLCJ1cE5vZGUiLCJjaGlsZHJlbiIsImZvbnRTaXplIiwiZmlsbCIsImhlYWRIZWlnaHQiLCJoZWFkV2lkdGgiLCJ0YWlsV2lkdGgiLCJsaW5rIiwidXBkYXRlIiwiYmluZCIsInNldFRvcEZhY2VDb2xvciIsImNvbG9yIiwic2V0U2lkZUZhY2VDb2xvciIsImNyZWF0ZUZhY2VTaGFwZSIsInJlZHVjdGlvbiIsInkiLCJtb3ZlVG8iLCJsZWZ0IiwiY2VudGVyWSIsImxpbmVUbyIsInJpZ2h0IiwiY2xvc2UiLCJyb3RhdGlvbkFtb3VudCIsIkNVQklDX0lOX09VVCIsInZhbHVlIiwiZ2V0IiwiYm91bmRzIiwicGVyc3BlY3RpdmVXaWR0aCIsIndpZHRoIiwidG9wRmFjZVRvcFkiLCJsaW5lYXIiLCJ0b3BSZWR1Y3Rpb24iLCJzaWRlRmFjZUJvdHRvbVkiLCJib3R0b20iLCJib3R0b21SZWR1Y3Rpb24iLCJzaGFwZSIsInZpc2libGUiLCJzZXRNYXRyaXgiLCJzY2FsaW5nIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJQZXJzcGVjdGl2ZTNETm9kZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOC0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuLy8gQHRzLW5vY2hlY2tcclxuLyoqXHJcbiAqIFNob3dzIHRoZSBwYXJ0aWFsbHkgcm90YXRlZCB3YXZlIHZpZXcgaW4gYSBwc2V1ZG8tM0Qgdmlldy4gIFBvcnRlZCBmcm9tIFJvdGF0aW9uR2x5cGguamF2YVxyXG4gKlxyXG4gKiBAYXV0aG9yIFNhbSBSZWlkIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxyXG4gKi9cclxuXHJcbmltcG9ydCBNYXRyaXgzIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9NYXRyaXgzLmpzJztcclxuaW1wb3J0IEJvdW5kczIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL0JvdW5kczIuanMnO1xyXG5pbXBvcnQgVFJlYWRPbmx5UHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9UUmVhZE9ubHlQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBVdGlscyBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVXRpbHMuanMnO1xyXG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gJy4uLy4uLy4uLy4uL2tpdGUvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCB7IENvbG9yIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IEFycm93Tm9kZSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvQXJyb3dOb2RlLmpzJztcclxuaW1wb3J0IHsgSEJveCwgTm9kZSwgUGF0aCB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBFYXNpbmcgZnJvbSAnLi4vLi4vLi4vLi4vdHdpeHQvanMvRWFzaW5nLmpzJztcclxuaW1wb3J0IHdhdmVJbnRlcmZlcmVuY2UgZnJvbSAnLi4vLi4vd2F2ZUludGVyZmVyZW5jZS5qcyc7XHJcbmltcG9ydCBXYXZlSW50ZXJmZXJlbmNlU3RyaW5ncyBmcm9tICcuLi8uLi9XYXZlSW50ZXJmZXJlbmNlU3RyaW5ncy5qcyc7XHJcbmltcG9ydCBXYXZlSW50ZXJmZXJlbmNlVGV4dCBmcm9tICcuL1dhdmVJbnRlcmZlcmVuY2VUZXh0LmpzJztcclxuXHJcbmNvbnN0IHRvcFN0cmluZyA9IFdhdmVJbnRlcmZlcmVuY2VTdHJpbmdzLnRvcDtcclxuXHJcbmNsYXNzIFBlcnNwZWN0aXZlM0ROb2RlIGV4dGVuZHMgTm9kZSB7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3Rvciggd2F2ZUFyZWFCb3VuZHM6IEJvdW5kczIsIHJvdGF0aW9uQW1vdW50UHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PG51bWJlcj4sIGlzUm90YXRpbmdQcm9wZXJ0eTogVFJlYWRPbmx5UHJvcGVydHk8Ym9vbGVhbj4gKSB7XHJcblxyXG4gICAgLy8gZGVwaWN0cyB0aGUgdG9wIGZhY2VcclxuICAgIGNvbnN0IHRvcEZhY2VQYXRoID0gbmV3IFBhdGgoIG51bGwsIHtcclxuICAgICAgc3Ryb2tlOiAnYmxhY2snLFxyXG4gICAgICBsaW5lV2lkdGg6IDQsXHJcbiAgICAgIGxpbmVKb2luOiAncm91bmQnXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gZGVwaWN0cyB0aGUgc2lkZSBmYWNlICh3aGVuIHRoZSB1c2VyIHNlbGVjdHMgXCJzaWRlIHZpZXdcIilcclxuICAgIGNvbnN0IHNpZGVGYWNlUGF0aCA9IG5ldyBQYXRoKCBudWxsLCB7XHJcbiAgICAgIHN0cm9rZTogJ2JsYWNrJyxcclxuICAgICAgbGluZVdpZHRoOiA0LFxyXG4gICAgICBsaW5lSm9pbjogJ3JvdW5kJ1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIHNob3dzIHRoZSB1cCBhcnJvd1xyXG4gICAgY29uc3QgdXBOb2RlID0gbmV3IEhCb3goIHtcclxuICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICBuZXcgV2F2ZUludGVyZmVyZW5jZVRleHQoIHRvcFN0cmluZywgeyBmb250U2l6ZTogMzIgfSApLFxyXG4gICAgICAgIG5ldyBBcnJvd05vZGUoIDAsIDAsIDAsIC0xMTAsIHtcclxuICAgICAgICAgIHN0cm9rZTogJ2JsYWNrJyxcclxuICAgICAgICAgIGZpbGw6ICd5ZWxsb3cnLFxyXG4gICAgICAgICAgbGluZVdpZHRoOiAyLFxyXG4gICAgICAgICAgaGVhZEhlaWdodDogMzAsXHJcbiAgICAgICAgICBoZWFkV2lkdGg6IDM1LFxyXG4gICAgICAgICAgdGFpbFdpZHRoOiAyMFxyXG4gICAgICAgIH0gKVxyXG4gICAgICBdXHJcbiAgICB9ICk7XHJcbiAgICBzdXBlciggeyBjaGlsZHJlbjogWyB0b3BGYWNlUGF0aCwgc2lkZUZhY2VQYXRoLCB1cE5vZGUgXSB9ICk7XHJcblxyXG4gICAgLy8gQHByaXZhdGVcclxuICAgIHRoaXMud2F2ZUFyZWFCb3VuZHMgPSB3YXZlQXJlYUJvdW5kcztcclxuICAgIHRoaXMucm90YXRpb25BbW91bnRQcm9wZXJ0eSA9IHJvdGF0aW9uQW1vdW50UHJvcGVydHk7XHJcbiAgICB0aGlzLmlzUm90YXRpbmdQcm9wZXJ0eSA9IGlzUm90YXRpbmdQcm9wZXJ0eTtcclxuICAgIHRoaXMudG9wRmFjZVBhdGggPSB0b3BGYWNlUGF0aDtcclxuICAgIHRoaXMuc2lkZUZhY2VQYXRoID0gc2lkZUZhY2VQYXRoO1xyXG4gICAgdGhpcy51cE5vZGUgPSB1cE5vZGU7XHJcblxyXG4gICAgLy8gVXBkYXRlIHRoZSBzaGFwZXMgYW5kIHRleHQgd2hlbiB0aGUgcm90YXRpb25BbW91bnQgaGFzIGNoYW5nZWRcclxuICAgIHJvdGF0aW9uQW1vdW50UHJvcGVydHkubGluayggdGhpcy51cGRhdGUuYmluZCggdGhpcyApICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXRzIHRoZSB0b3AgZmFjZSBjb2xvciwgd2hlbiB0aGUgc2NlbmUgY2hhbmdlcy5cclxuICAgKiBAcGFyYW0gY29sb3IgLSB0aGUgdG9wIGZhY2UgY29sb3JcclxuICAgKi9cclxuICBwdWJsaWMgc2V0VG9wRmFjZUNvbG9yKCBjb2xvcjogQ29sb3IgKTogdm9pZCB7XHJcbiAgICB0aGlzLnRvcEZhY2VQYXRoLmZpbGwgPSBjb2xvcjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIHNpZGUgZmFjZSBjb2xvciwgd2hlbiB0aGUgc2NlbmUgY2hhbmdlcy5cclxuICAgKiBAcGFyYW0gY29sb3IgLSB0aGUgc2lkZSBmYWNlIGNvbG9yXHJcbiAgICovXHJcbiAgcHVibGljIHNldFNpZGVGYWNlQ29sb3IoIGNvbG9yOiBDb2xvciApOiB2b2lkIHtcclxuICAgIHRoaXMuc2lkZUZhY2VQYXRoLmZpbGwgPSBjb2xvcjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgYSBzaGFwZSBmb3IgdGhlIHRvcCBvciBzaWRlIEZhY2UsIGF0IHRoZSBjb3JyZWN0IHBlcnNwZWN0aXZlIGFuZ2xlLlxyXG4gICAqIEBwYXJhbSByZWR1Y3Rpb24gLSBhbW91bnQgdG8gcmVkdWNlIHRoZSB3aWR0aCBhdCB0aGUgZnVydGhlc3QgcG9pbnQgZnJvbSB0aGUgY2VudGVyXHJcbiAgICogQHBhcmFtIHkgLSB2ZXJ0aWNhbCBjb29yZGluYXRlIG9mIHRoZSBGYWNlXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBjcmVhdGVGYWNlU2hhcGUoIHJlZHVjdGlvbjogbnVtYmVyLCB5OiBudW1iZXIgKTogU2hhcGUge1xyXG4gICAgcmV0dXJuIG5ldyBTaGFwZSgpXHJcbiAgICAgIC5tb3ZlVG8oIHRoaXMud2F2ZUFyZWFCb3VuZHMubGVmdCwgdGhpcy53YXZlQXJlYUJvdW5kcy5jZW50ZXJZIClcclxuICAgICAgLmxpbmVUbyggdGhpcy53YXZlQXJlYUJvdW5kcy5sZWZ0ICsgcmVkdWN0aW9uLCB5IClcclxuICAgICAgLmxpbmVUbyggdGhpcy53YXZlQXJlYUJvdW5kcy5yaWdodCAtIHJlZHVjdGlvbiwgeSApXHJcbiAgICAgIC5saW5lVG8oIHRoaXMud2F2ZUFyZWFCb3VuZHMucmlnaHQsIHRoaXMud2F2ZUFyZWFCb3VuZHMuY2VudGVyWSApLmNsb3NlKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBVcGRhdGUgdGhlIHNoYXBlcyBhbmQgdGV4dCB3aGVuIHRoZSByb3RhdGlvbkFtb3VudCBoYXMgY2hhbmdlZFxyXG4gICAqL1xyXG4gIHByaXZhdGUgdXBkYXRlKCk6IHZvaWQge1xyXG5cclxuICAgIC8vIEFwcGx5IGVhc2luZyB0byBtYWtlIHRoZSB0cmFuc2l0aW9uIGxvb2sgdmlzdWFsbHkgbmljZXJcclxuICAgIGNvbnN0IHJvdGF0aW9uQW1vdW50ID0gRWFzaW5nLkNVQklDX0lOX09VVC52YWx1ZSggdGhpcy5yb3RhdGlvbkFtb3VudFByb3BlcnR5LmdldCgpICk7XHJcbiAgICBjb25zdCBib3VuZHMgPSB0aGlzLndhdmVBcmVhQm91bmRzO1xyXG4gICAgY29uc3QgcGVyc3BlY3RpdmVXaWR0aCA9IGJvdW5kcy53aWR0aCAqIDAuMjtcclxuXHJcbiAgICBjb25zdCB0b3BGYWNlVG9wWSA9IFV0aWxzLmxpbmVhciggMCwgMSwgYm91bmRzLnRvcCwgYm91bmRzLmNlbnRlclksIHJvdGF0aW9uQW1vdW50ICk7XHJcbiAgICBjb25zdCB0b3BSZWR1Y3Rpb24gPSBVdGlscy5saW5lYXIoIDAsIDEsIDAsIHBlcnNwZWN0aXZlV2lkdGgsIHJvdGF0aW9uQW1vdW50ICk7XHJcbiAgICBjb25zdCBzaWRlRmFjZUJvdHRvbVkgPSBVdGlscy5saW5lYXIoIDAsIDEsIGJvdW5kcy5jZW50ZXJZLCBib3VuZHMuYm90dG9tLCByb3RhdGlvbkFtb3VudCApO1xyXG4gICAgY29uc3QgYm90dG9tUmVkdWN0aW9uID0gVXRpbHMubGluZWFyKCAwLCAxLCBwZXJzcGVjdGl2ZVdpZHRoLCAwLCByb3RhdGlvbkFtb3VudCApO1xyXG5cclxuICAgIHRoaXMudG9wRmFjZVBhdGguc2hhcGUgPSB0aGlzLmNyZWF0ZUZhY2VTaGFwZSggdG9wUmVkdWN0aW9uLCB0b3BGYWNlVG9wWSApO1xyXG4gICAgdGhpcy5zaWRlRmFjZVBhdGguc2hhcGUgPSB0aGlzLmNyZWF0ZUZhY2VTaGFwZSggYm90dG9tUmVkdWN0aW9uLCBzaWRlRmFjZUJvdHRvbVkgKTtcclxuXHJcbiAgICAvLyBPbmx5IHNob3cgdGhlIDNkIHBlcnNwZWN0aXZlIHZpZXcgd2hpbGUgcm90YXRpbmdcclxuICAgIHRoaXMudG9wRmFjZVBhdGgudmlzaWJsZSA9IHRoaXMuaXNSb3RhdGluZ1Byb3BlcnR5LmdldCgpO1xyXG4gICAgdGhpcy5zaWRlRmFjZVBhdGgudmlzaWJsZSA9IHRoaXMuaXNSb3RhdGluZ1Byb3BlcnR5LmdldCgpO1xyXG5cclxuICAgIC8vIE9ubHkgc2hvdyB0aGUgXCJ0b3BcIiBpbmRpY2F0b3Igd2hpbGUgcm90YXRpbmcsIGJ1dCBub3Qgd2hpbGUgaXQgaXMgZXhhY3RseSBhdCAwIGRlZ3JlZXNcclxuICAgIHRoaXMudXBOb2RlLnZpc2libGUgPSB0aGlzLmlzUm90YXRpbmdQcm9wZXJ0eS5nZXQoKSAmJiByb3RhdGlvbkFtb3VudCAhPT0gMDtcclxuXHJcbiAgICAvLyBQb3NpdGlvbiB0aGUgYXJyb3cgYW5kIHRleHRcclxuICAgIGlmICggdGhpcy51cE5vZGUudmlzaWJsZSApIHtcclxuICAgICAgdGhpcy51cE5vZGUuc2V0TWF0cml4KCBNYXRyaXgzLnNjYWxpbmcoIDEsIHJvdGF0aW9uQW1vdW50ICkgKTtcclxuICAgICAgdGhpcy51cE5vZGUuY2VudGVyWSA9IHRoaXMuc2lkZUZhY2VQYXRoLnNoYXBlLmJvdW5kcy5jZW50ZXJZO1xyXG4gICAgICB0aGlzLnVwTm9kZS5yaWdodCA9IHRoaXMuc2lkZUZhY2VQYXRoLnNoYXBlLmJvdW5kcy5yaWdodCAtIDgwO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxud2F2ZUludGVyZmVyZW5jZS5yZWdpc3RlciggJ1BlcnNwZWN0aXZlM0ROb2RlJywgUGVyc3BlY3RpdmUzRE5vZGUgKTtcclxuZXhwb3J0IGRlZmF1bHQgUGVyc3BlY3RpdmUzRE5vZGU7Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxPQUFPLE1BQU0sK0JBQStCO0FBR25ELE9BQU9DLEtBQUssTUFB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