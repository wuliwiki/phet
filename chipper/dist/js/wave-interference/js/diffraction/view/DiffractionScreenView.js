// Copyright 2017-2023, University of Colorado Boulder
// @ts-nocheck
/**
 * Shows the Diffraction Screen
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */

import Dimension2 from '../../../../dot/js/Dimension2.js';
import Matrix3 from '../../../../dot/js/Matrix3.js';
import ScreenView from '../../../../joist/js/ScreenView.js';
import { Shape } from '../../../../kite/js/imports.js';
import merge from '../../../../phet-core/js/merge.js';
import StringUtils from '../../../../phetcommon/js/util/StringUtils.js';
import ResetAllButton from '../../../../scenery-phet/js/buttons/ResetAllButton.js';
import LaserPointerNode from '../../../../scenery-phet/js/LaserPointerNode.js';
import VisibleColor from '../../../../scenery-phet/js/VisibleColor.js';
import WavelengthNumberControl from '../../../../scenery-phet/js/WavelengthNumberControl.js';
import { Circle, HBox, Image, LinearGradient, Node, Path, Rectangle, VBox } from '../../../../scenery/js/imports.js';
import RectangularRadioButtonGroup from '../../../../sun/js/buttons/RectangularRadioButtonGroup.js';
import ToggleNode from '../../../../sun/js/ToggleNode.js';
import waving_girl_icon_png from '../../../images/waving_girl_icon_png.js';
import LengthScaleIndicatorNode from '../../common/view/LengthScaleIndicatorNode.js';
import WaveInterferencePanel from '../../common/view/WaveInterferencePanel.js';
import WaveInterferenceConstants from '../../common/WaveInterferenceConstants.js';
import waveInterference from '../../waveInterference.js';
import WaveInterferenceStrings from '../../WaveInterferenceStrings.js';
import CircleSquareSceneControlPanel from './CircleSquareSceneControlPanel.js';
import DisorderSceneControlPanel from './DisorderSceneControlPanel.js';
import EllipseSceneControlPanel from './EllipseSceneControlPanel.js';
import MatrixCanvasNode from './MatrixCanvasNode.js';
import RectangleSceneControlPanel from './RectangleSceneControlPanel.js';
import SceneCanvasNode from './SceneCanvasNode.js';
import WavingGirlSceneControlPanel from './WavingGirlSceneControlPanel.js';
const mmValueString = WaveInterferenceStrings.mmValue;

// constants
const MATRIX_CANVAS_NODE_SCALE = 1.43; // scale factor for showing the large aperture and diffraction patterns
const MINI_DIFFRACTION_SCALE = 0.2; // scale factor for showing the mini diffraction pattern at the top of the screen
const MATRIX_DIMENSION = WaveInterferenceConstants.DIFFRACTION_MATRIX_DIMENSION;
const MARGIN = WaveInterferenceConstants.MARGIN;
const DISORDER_SCENE_ICON_DOTS_SPACING = 2.4;

// Options for the control panels
const PANEL_OPTIONS = {
  yMargin: 14
};
class DiffractionScreenView extends ScreenView {
  constructor(model) {
    super();

    // @private
    this.model = model;
    const laserPointerNode = new LaserPointerNode(model.onProperty, {
      left: MARGIN,
      centerY: 50,
      bodySize: new Dimension2(88, 50),
      nozzleSize: new Dimension2(16, 38),
      buttonRadius: 17.6
    });

    // Reset All button
    const resetAllButton = new ResetAllButton({
      listener: () => model.reset(),
      right: this.layoutBounds.maxX - MARGIN,
      bottom: this.layoutBounds.maxY - MARGIN
    });
    this.addChild(resetAllButton);

    // Disorder scene icon
    const createCircle = () => new Circle(1.65, {
      fill: 'black'
    });
    const createRow = () => new HBox({
      spacing: DISORDER_SCENE_ICON_DOTS_SPACING,
      children: _.times(4, createCircle)
    });
    const disorderSceneIcon = new VBox({
      spacing: DISORDER_SCENE_ICON_DOTS_SPACING,
      children: _.times(4, createRow)
    });

    // Scene radio buttons
    const sceneRadioButtonContent = [{
      value: model.ellipseScene,
      createNode: () => new Circle(10, {
        fill: 'black'
      })
    }, {
      value: model.rectangleScene,
      createNode: () => new Rectangle(0, 0, 20, 20, {
        fill: 'black'
      })
    }, {
      value: model.circleSquareScene,
      createNode: () => new Node({
        children: [new Circle(5, {
          fill: 'black'
        }), new Rectangle(0, 0, 10, 10, {
          fill: 'black',
          x: 10,
          y: 8
        })]
      })
    }, {
      value: model.disorderScene,
      createNode: () => disorderSceneIcon
    }, {
      value: model.wavingGirlScene,
      createNode: () => new Image(waving_girl_icon_png, {
        maxHeight: 25
      })
    }];

    // @private - Main (large) aperture node
    this.apertureNode = new SceneCanvasNode(model.sceneProperty, {
      scale: MATRIX_CANVAS_NODE_SCALE,
      top: 120
    });
    this.addChild(this.apertureNode);

    // @private - Main (large) diffraction node
    this.diffractionNode = new MatrixCanvasNode(model.diffractionMatrix, {
      scale: MATRIX_CANVAS_NODE_SCALE,
      right: this.layoutBounds.right - 20,
      top: this.apertureNode.top
    });
    model.wavelengthProperty.link(wavelength => this.diffractionNode.setBaseColor(VisibleColor.wavelengthToColor(wavelength, {
      reduceIntensityAtExtrema: false
    })));
    this.addChild(this.diffractionNode);
    this.apertureNode.right = this.diffractionNode.left - 50;

    // Length scale indicator on the aperture
    const apertureScaleIndicatorNode = new LengthScaleIndicatorNode(this.apertureNode.width * 0.075, StringUtils.fillIn(mmValueString, {
      value: 0.1
    }), {
      leftBottom: this.apertureNode.leftTop.plusXY(0, -5)
    });
    this.addChild(apertureScaleIndicatorNode);

    // Length scale indicator on the diffraction pattern
    const diffractionScaleIndicatorNode = new LengthScaleIndicatorNode(this.diffractionNode.width * 0.1, StringUtils.fillIn(mmValueString, {
      value: 10
    }), {
      leftBottom: this.diffractionNode.leftTop.plusXY(0, -5)
    });
    this.addChild(diffractionScaleIndicatorNode);
    const sceneRadioButtonGroup = new RectangularRadioButtonGroup(model.sceneProperty, sceneRadioButtonContent, {
      radioButtonOptions: {
        baseColor: 'white',
        buttonAppearanceStrategyOptions: {
          selectedStroke: '#419ac9',
          selectedLineWidth: 2
        }
      },
      right: this.apertureNode.left - 20,
      bottom: this.apertureNode.bottom
    });

    // The mini aperture node has a small background
    const miniApertureNodeBackground = new Rectangle(0, 0, MATRIX_DIMENSION, MATRIX_DIMENSION, {
      fill: 'black',
      scale: MINI_DIFFRACTION_SCALE / 2,
      centerY: laserPointerNode.centerY,
      centerX: this.apertureNode.centerX,
      matrix: Matrix3.affine(1, 0, 0, 0.25, 1, 0)
    });

    // @private - The mini aperture node has an even smaller pattern rendering
    this.miniApertureNode = new SceneCanvasNode(model.sceneProperty, {
      scale: MINI_DIFFRACTION_SCALE / 4,
      centerY: laserPointerNode.centerY,
      centerX: this.apertureNode.centerX,
      matrix: Matrix3.affine(1, 0, 0, 0.25, 1, 0)
    });

    // @private - The mini diffraction pattern at the top of the screen
    this.miniDiffractionNode = new MatrixCanvasNode(model.diffractionMatrix, {
      scale: MINI_DIFFRACTION_SCALE,
      centerY: laserPointerNode.centerY,
      centerX: this.diffractionNode.centerX,
      matrix: Matrix3.affine(1, 0, 0, 0.25, 1, 0)
    });
    model.wavelengthProperty.link(wavelength => this.miniDiffractionNode.setBaseColor(VisibleColor.wavelengthToColor(wavelength, {
      reduceIntensityAtExtrema: false
    })));
    const updateCanvases = this.updateCanvases.bind(this);
    model.sceneProperty.lazyLink(updateCanvases);
    this.addChild(sceneRadioButtonGroup);
    model.scenes.forEach(scene => scene.linkToAllProperties(updateCanvases));
    model.onProperty.lazyLink(updateCanvases);

    // Nickname so everything fits on one line.
    const OPTS = PANEL_OPTIONS;
    const controlPanelToggleNode = new ToggleNode(model.sceneProperty, [{
      value: model.ellipseScene,
      createNode: () => new EllipseSceneControlPanel(model.ellipseScene, OPTS)
    }, {
      value: model.rectangleScene,
      createNode: () => new RectangleSceneControlPanel(model.rectangleScene, OPTS)
    }, {
      value: model.circleSquareScene,
      createNode: () => new CircleSquareSceneControlPanel(model.circleSquareScene, OPTS)
    }, {
      value: model.disorderScene,
      createNode: () => new DisorderSceneControlPanel(model.disorderScene, OPTS)
    }, {
      value: model.wavingGirlScene,
      createNode: () => new WavingGirlSceneControlPanel(model.wavingGirlScene, OPTS)
    }], {
      alignChildren: ToggleNode.CENTER_BOTTOM,
      centerX: this.apertureNode.centerX,
      bottom: this.layoutBounds.bottom - MARGIN
    });
    this.addChild(controlPanelToggleNode);
    const BEAM_WIDTH = 22;
    const incidentBeam = new Rectangle(laserPointerNode.right, laserPointerNode.centerY - BEAM_WIDTH / 2, this.miniApertureNode.centerX - laserPointerNode.right, BEAM_WIDTH, {
      opacity: 0.7
    });
    model.wavelengthProperty.link(wavelength => incidentBeam.setFill(VisibleColor.wavelengthToColor(wavelength)));

    // The diffracted beam makes a cone shape emanating from the aperture.
    const coneSize = 8;
    const transmittedBeam = new Path(new Shape().moveTo(this.miniApertureNode.centerX, this.miniApertureNode.centerY - coneSize / 2).lineToPoint(this.miniDiffractionNode.leftTop).lineTo(this.miniDiffractionNode.right, this.miniDiffractionNode.top + this.miniDiffractionNode.height * 0.2).lineToPoint(this.miniDiffractionNode.rightBottom).lineTo(this.miniApertureNode.centerX, this.miniApertureNode.centerY + coneSize / 2).close(), {
      opacity: 0.7
    });

    // There is a symmetrical gradient which is strong in the center and fades out toward the top and bottom
    model.wavelengthProperty.link(wavelength => {
      const color = VisibleColor.wavelengthToColor(wavelength);
      const a = 0.3;
      const b = 0.45;
      const bOpacity = 0.8;
      const aOpacity = 0.4;
      const gradient = new LinearGradient(0, this.miniDiffractionNode.top, 0, this.miniDiffractionNode.bottom).addColorStop(0, color.withAlpha(0)).addColorStop(a, color.withAlpha(aOpacity)).addColorStop(b, color.withAlpha(bOpacity)).addColorStop(0.5, color).addColorStop(1 - b, color.withAlpha(bOpacity)).addColorStop(1 - a, color.withAlpha(aOpacity)).addColorStop(1, color.withAlpha(0));
      transmittedBeam.setFill(gradient);
    });
    model.onProperty.linkAttribute(incidentBeam, 'visible');
    model.onProperty.linkAttribute(transmittedBeam, 'visible');
    const wavelengthPanel = new WaveInterferencePanel(new WavelengthNumberControl(model.wavelengthProperty, {
      arrowButtonOptions: {
        touchAreaXDilation: WaveInterferenceConstants.NUMBER_CONTROL_HORIZONTAL_TOUCH_AREA_DILATION,
        touchAreaYDilation: 7
      }
    }), merge({}, PANEL_OPTIONS, {
      left: laserPointerNode.left,
      top: apertureScaleIndicatorNode.top,
      xMargin: 6
    }));
    this.addChild(incidentBeam);
    this.addChild(transmittedBeam);
    this.addChild(miniApertureNodeBackground);
    this.addChild(this.miniApertureNode);
    this.addChild(this.miniDiffractionNode);
    this.addChild(laserPointerNode);
    this.addChild(wavelengthPanel);
    updateCanvases();
  }

  /**
   * update the main/mini aperture/diffraction patterns.
   */
  updateCanvases() {
    this.apertureNode.invalidatePaint();
    this.miniApertureNode.invalidatePaint();
    this.diffractionNode.invalidatePaint();
    this.miniDiffractionNode.invalidatePaint();
  }
}
waveInterference.register('DiffractionScreenView', DiffractionScreenView);
export default DiffractionScreenView;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEaW1lbnNpb24yIiwiTWF0cml4MyIsIlNjcmVlblZpZXciLCJTaGFwZSIsIm1lcmdlIiwiU3RyaW5nVXRpbHMiLCJSZXNldEFsbEJ1dHRvbiIsIkxhc2VyUG9pbnRlck5vZGUiLCJWaXNpYmxlQ29sb3IiLCJXYXZlbGVuZ3RoTnVtYmVyQ29udHJvbCIsIkNpcmNsZSIsIkhCb3giLCJJbWFnZSIsIkxpbmVhckdyYWRpZW50IiwiTm9kZSIsIlBhdGgiLCJSZWN0YW5nbGUiLCJWQm94IiwiUmVjdGFuZ3VsYXJSYWRpb0J1dHRvbkdyb3VwIiwiVG9nZ2xlTm9kZSIsIndhdmluZ19naXJsX2ljb25fcG5nIiwiTGVuZ3RoU2NhbGVJbmRpY2F0b3JOb2RlIiwiV2F2ZUludGVyZmVyZW5jZVBhbmVsIiwiV2F2ZUludGVyZmVyZW5jZUNvbnN0YW50cyIsIndhdmVJbnRlcmZlcmVuY2UiLCJXYXZlSW50ZXJmZXJlbmNlU3RyaW5ncyIsIkNpcmNsZVNxdWFyZVNjZW5lQ29udHJvbFBhbmVsIiwiRGlzb3JkZXJTY2VuZUNvbnRyb2xQYW5lbCIsIkVsbGlwc2VTY2VuZUNvbnRyb2xQYW5lbCIsIk1hdHJpeENhbnZhc05vZGUiLCJSZWN0YW5nbGVTY2VuZUNvbnRyb2xQYW5lbCIsIlNjZW5lQ2FudmFzTm9kZSIsIldhdmluZ0dpcmxTY2VuZUNvbnRyb2xQYW5lbCIsIm1tVmFsdWVTdHJpbmciLCJtbVZhbHVlIiwiTUFUUklYX0NBTlZBU19OT0RFX1NDQUxFIiwiTUlOSV9ESUZGUkFDVElPTl9TQ0FMRSIsIk1BVFJJWF9ESU1FTlNJT04iLCJESUZGUkFDVElPTl9NQVRSSVhfRElNRU5TSU9OIiwiTUFSR0lOIiwiRElTT1JERVJfU0NFTkVfSUNPTl9ET1RTX1NQQUNJTkciLCJQQU5FTF9PUFRJT05TIiwieU1hcmdpbiIsIkRpZmZyYWN0aW9uU2NyZWVuVmlldyIsImNvbnN0cnVjdG9yIiwibW9kZWwiLCJsYXNlclBvaW50ZXJOb2RlIiwib25Qcm9wZXJ0eSIsImxlZnQiLCJjZW50ZXJZIiwiYm9keVNpemUiLCJub3p6bGVTaXplIiwiYnV0dG9uUmFkaXVzIiwicmVzZXRBbGxCdXR0b24iLCJsaXN0ZW5lciIsInJlc2V0IiwicmlnaHQiLCJsYXlvdXRCb3VuZHMiLCJtYXhYIiwiYm90dG9tIiwibWF4WSIsImFkZENoaWxkIiwiY3JlYXRlQ2lyY2xlIiwiZmlsbCIsImNyZWF0ZVJvdyIsInNwYWNpbmciLCJjaGlsZHJlbiIsIl8iLCJ0aW1lcyIsImRpc29yZGVyU2NlbmVJY29uIiwic2NlbmVSYWRpb0J1dHRvbkNvbnRlbnQiLCJ2YWx1ZSIsImVsbGlwc2VTY2VuZSIsImNyZWF0ZU5vZGUiLCJyZWN0YW5nbGVTY2VuZSIsImNpcmNsZVNxdWFyZVNjZW5lIiwieCIsInkiLCJkaXNvcmRlclNjZW5lIiwid2F2aW5nR2lybFNjZW5lIiwibWF4SGVpZ2h0IiwiYXBlcnR1cmVOb2RlIiwic2NlbmVQcm9wZXJ0eSIsInNjYWxlIiwidG9wIiwiZGlmZnJhY3Rpb25Ob2RlIiwiZGlmZnJhY3Rpb25NYXRyaXgiLCJ3YXZlbGVuZ3RoUHJvcGVydHkiLCJsaW5rIiwid2F2ZWxlbmd0aCIsInNldEJhc2VDb2xvciIsIndhdmVsZW5ndGhUb0NvbG9yIiwicmVkdWNlSW50ZW5zaXR5QXRFeHRyZW1hIiwiYXBlcnR1cmVTY2FsZUluZGljYXRvck5vZGUiLCJ3aWR0aCIsImZpbGxJbiIsImxlZnRCb3R0b20iLCJsZWZ0VG9wIiwicGx1c1hZIiwiZGlmZnJhY3Rpb25TY2FsZUluZGljYXRvck5vZGUiLCJzY2VuZVJhZGlvQnV0dG9uR3JvdXAiLCJyYWRpb0J1dHRvbk9wdGlvbnMiLCJiYXNlQ29sb3IiLCJidXR0b25BcHBlYXJhbmNlU3RyYXRlZ3lPcHRpb25zIiwic2VsZWN0ZWRTdHJva2UiLCJzZWxlY3RlZExpbmVXaWR0aCIsIm1pbmlBcGVydHVyZU5vZGVCYWNrZ3JvdW5kIiwiY2VudGVyWCIsIm1hdHJpeCIsImFmZmluZSIsIm1pbmlBcGVydHVyZU5vZGUiLCJtaW5pRGlmZnJhY3Rpb25Ob2RlIiwidXBkYXRlQ2FudmFzZXMiLCJiaW5kIiwibGF6eUxpbmsiLCJzY2VuZXMiLCJmb3JFYWNoIiwic2NlbmUiLCJsaW5rVG9BbGxQcm9wZXJ0aWVzIiwiT1BUUyIsImNvbnRyb2xQYW5lbFRvZ2dsZU5vZGUiLCJhbGlnbkNoaWxkcmVuIiwiQ0VOVEVSX0JPVFRPTSIsIkJFQU1fV0lEVEgiLCJpbmNpZGVudEJlYW0iLCJvcGFjaXR5Iiwic2V0RmlsbCIsImNvbmVTaXplIiwidHJhbnNtaXR0ZWRCZWFtIiwibW92ZVRvIiwibGluZVRvUG9pbnQiLCJsaW5lVG8iLCJoZWlnaHQiLCJyaWdodEJvdHRvbSIsImNsb3NlIiwiY29sb3IiLCJhIiwiYiIsImJPcGFjaXR5IiwiYU9wYWNpdHkiLCJncmFkaWVudCIsImFkZENvbG9yU3RvcCIsIndpdGhBbHBoYSIsImxpbmtBdHRyaWJ1dGUiLCJ3YXZlbGVuZ3RoUGFuZWwiLCJhcnJvd0J1dHRvbk9wdGlvbnMiLCJ0b3VjaEFyZWFYRGlsYXRpb24iLCJOVU1CRVJfQ09OVFJPTF9IT1JJWk9OVEFMX1RPVUNIX0FSRUFfRElMQVRJT04iLCJ0b3VjaEFyZWFZRGlsYXRpb24iLCJ4TWFyZ2luIiwiaW52YWxpZGF0ZVBhaW50IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJEaWZmcmFjdGlvblNjcmVlblZpZXcudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTctMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcbi8vIEB0cy1ub2NoZWNrXHJcbi8qKlxyXG4gKiBTaG93cyB0aGUgRGlmZnJhY3Rpb24gU2NyZWVuXHJcbiAqXHJcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IERpbWVuc2lvbjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL0RpbWVuc2lvbjIuanMnO1xyXG5pbXBvcnQgTWF0cml4MyBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvTWF0cml4My5qcyc7XHJcbmltcG9ydCBTY3JlZW5WaWV3IGZyb20gJy4uLy4uLy4uLy4uL2pvaXN0L2pzL1NjcmVlblZpZXcuanMnO1xyXG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gJy4uLy4uLy4uLy4uL2tpdGUvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBtZXJnZSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvbWVyZ2UuanMnO1xyXG5pbXBvcnQgU3RyaW5nVXRpbHMgZnJvbSAnLi4vLi4vLi4vLi4vcGhldGNvbW1vbi9qcy91dGlsL1N0cmluZ1V0aWxzLmpzJztcclxuaW1wb3J0IFJlc2V0QWxsQnV0dG9uIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9idXR0b25zL1Jlc2V0QWxsQnV0dG9uLmpzJztcclxuaW1wb3J0IExhc2VyUG9pbnRlck5vZGUgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL0xhc2VyUG9pbnRlck5vZGUuanMnO1xyXG5pbXBvcnQgVmlzaWJsZUNvbG9yIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9WaXNpYmxlQ29sb3IuanMnO1xyXG5pbXBvcnQgV2F2ZWxlbmd0aE51bWJlckNvbnRyb2wgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1dhdmVsZW5ndGhOdW1iZXJDb250cm9sLmpzJztcclxuaW1wb3J0IHsgQ2lyY2xlLCBIQm94LCBJbWFnZSwgTGluZWFyR3JhZGllbnQsIE5vZGUsIFBhdGgsIFJlY3RhbmdsZSwgVkJveCB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBSZWN0YW5ndWxhclJhZGlvQnV0dG9uR3JvdXAgZnJvbSAnLi4vLi4vLi4vLi4vc3VuL2pzL2J1dHRvbnMvUmVjdGFuZ3VsYXJSYWRpb0J1dHRvbkdyb3VwLmpzJztcclxuaW1wb3J0IFRvZ2dsZU5vZGUgZnJvbSAnLi4vLi4vLi4vLi4vc3VuL2pzL1RvZ2dsZU5vZGUuanMnO1xyXG5pbXBvcnQgd2F2aW5nX2dpcmxfaWNvbl9wbmcgZnJvbSAnLi4vLi4vLi4vaW1hZ2VzL3dhdmluZ19naXJsX2ljb25fcG5nLmpzJztcclxuaW1wb3J0IExlbmd0aFNjYWxlSW5kaWNhdG9yTm9kZSBmcm9tICcuLi8uLi9jb21tb24vdmlldy9MZW5ndGhTY2FsZUluZGljYXRvck5vZGUuanMnO1xyXG5pbXBvcnQgV2F2ZUludGVyZmVyZW5jZVBhbmVsIGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L1dhdmVJbnRlcmZlcmVuY2VQYW5lbC5qcyc7XHJcbmltcG9ydCBXYXZlSW50ZXJmZXJlbmNlQ29uc3RhbnRzIGZyb20gJy4uLy4uL2NvbW1vbi9XYXZlSW50ZXJmZXJlbmNlQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IHdhdmVJbnRlcmZlcmVuY2UgZnJvbSAnLi4vLi4vd2F2ZUludGVyZmVyZW5jZS5qcyc7XHJcbmltcG9ydCBXYXZlSW50ZXJmZXJlbmNlU3RyaW5ncyBmcm9tICcuLi8uLi9XYXZlSW50ZXJmZXJlbmNlU3RyaW5ncy5qcyc7XHJcbmltcG9ydCBDaXJjbGVTcXVhcmVTY2VuZUNvbnRyb2xQYW5lbCBmcm9tICcuL0NpcmNsZVNxdWFyZVNjZW5lQ29udHJvbFBhbmVsLmpzJztcclxuaW1wb3J0IERpc29yZGVyU2NlbmVDb250cm9sUGFuZWwgZnJvbSAnLi9EaXNvcmRlclNjZW5lQ29udHJvbFBhbmVsLmpzJztcclxuaW1wb3J0IEVsbGlwc2VTY2VuZUNvbnRyb2xQYW5lbCBmcm9tICcuL0VsbGlwc2VTY2VuZUNvbnRyb2xQYW5lbC5qcyc7XHJcbmltcG9ydCBNYXRyaXhDYW52YXNOb2RlIGZyb20gJy4vTWF0cml4Q2FudmFzTm9kZS5qcyc7XHJcbmltcG9ydCBSZWN0YW5nbGVTY2VuZUNvbnRyb2xQYW5lbCBmcm9tICcuL1JlY3RhbmdsZVNjZW5lQ29udHJvbFBhbmVsLmpzJztcclxuaW1wb3J0IFNjZW5lQ2FudmFzTm9kZSBmcm9tICcuL1NjZW5lQ2FudmFzTm9kZS5qcyc7XHJcbmltcG9ydCBXYXZpbmdHaXJsU2NlbmVDb250cm9sUGFuZWwgZnJvbSAnLi9XYXZpbmdHaXJsU2NlbmVDb250cm9sUGFuZWwuanMnO1xyXG5cclxuY29uc3QgbW1WYWx1ZVN0cmluZyA9IFdhdmVJbnRlcmZlcmVuY2VTdHJpbmdzLm1tVmFsdWU7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgTUFUUklYX0NBTlZBU19OT0RFX1NDQUxFID0gMS40MzsgLy8gc2NhbGUgZmFjdG9yIGZvciBzaG93aW5nIHRoZSBsYXJnZSBhcGVydHVyZSBhbmQgZGlmZnJhY3Rpb24gcGF0dGVybnNcclxuY29uc3QgTUlOSV9ESUZGUkFDVElPTl9TQ0FMRSA9IDAuMjsgLy8gc2NhbGUgZmFjdG9yIGZvciBzaG93aW5nIHRoZSBtaW5pIGRpZmZyYWN0aW9uIHBhdHRlcm4gYXQgdGhlIHRvcCBvZiB0aGUgc2NyZWVuXHJcbmNvbnN0IE1BVFJJWF9ESU1FTlNJT04gPSBXYXZlSW50ZXJmZXJlbmNlQ29uc3RhbnRzLkRJRkZSQUNUSU9OX01BVFJJWF9ESU1FTlNJT047XHJcbmNvbnN0IE1BUkdJTiA9IFdhdmVJbnRlcmZlcmVuY2VDb25zdGFudHMuTUFSR0lOO1xyXG5jb25zdCBESVNPUkRFUl9TQ0VORV9JQ09OX0RPVFNfU1BBQ0lORyA9IDIuNDtcclxuXHJcbi8vIE9wdGlvbnMgZm9yIHRoZSBjb250cm9sIHBhbmVsc1xyXG5jb25zdCBQQU5FTF9PUFRJT05TID0ge1xyXG4gIHlNYXJnaW46IDE0XHJcbn07XHJcblxyXG5jbGFzcyBEaWZmcmFjdGlvblNjcmVlblZpZXcgZXh0ZW5kcyBTY3JlZW5WaWV3IHtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBtb2RlbCApIHtcclxuICAgIHN1cGVyKCk7XHJcblxyXG4gICAgLy8gQHByaXZhdGVcclxuICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcclxuXHJcbiAgICBjb25zdCBsYXNlclBvaW50ZXJOb2RlID0gbmV3IExhc2VyUG9pbnRlck5vZGUoIG1vZGVsLm9uUHJvcGVydHksIHtcclxuICAgICAgbGVmdDogTUFSR0lOLFxyXG4gICAgICBjZW50ZXJZOiA1MCxcclxuICAgICAgYm9keVNpemU6IG5ldyBEaW1lbnNpb24yKCA4OCwgNTAgKSxcclxuICAgICAgbm96emxlU2l6ZTogbmV3IERpbWVuc2lvbjIoIDE2LCAzOCApLFxyXG4gICAgICBidXR0b25SYWRpdXM6IDE3LjZcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBSZXNldCBBbGwgYnV0dG9uXHJcbiAgICBjb25zdCByZXNldEFsbEJ1dHRvbiA9IG5ldyBSZXNldEFsbEJ1dHRvbigge1xyXG4gICAgICBsaXN0ZW5lcjogKCkgPT4gbW9kZWwucmVzZXQoKSxcclxuICAgICAgcmlnaHQ6IHRoaXMubGF5b3V0Qm91bmRzLm1heFggLSBNQVJHSU4sXHJcbiAgICAgIGJvdHRvbTogdGhpcy5sYXlvdXRCb3VuZHMubWF4WSAtIE1BUkdJTlxyXG4gICAgfSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggcmVzZXRBbGxCdXR0b24gKTtcclxuXHJcbiAgICAvLyBEaXNvcmRlciBzY2VuZSBpY29uXHJcbiAgICBjb25zdCBjcmVhdGVDaXJjbGUgPSAoKSA9PiBuZXcgQ2lyY2xlKCAxLjY1LCB7IGZpbGw6ICdibGFjaycgfSApO1xyXG4gICAgY29uc3QgY3JlYXRlUm93ID0gKCkgPT4gbmV3IEhCb3goIHtcclxuICAgICAgc3BhY2luZzogRElTT1JERVJfU0NFTkVfSUNPTl9ET1RTX1NQQUNJTkcsXHJcbiAgICAgIGNoaWxkcmVuOiBfLnRpbWVzKCA0LCBjcmVhdGVDaXJjbGUgKVxyXG4gICAgfSApO1xyXG4gICAgY29uc3QgZGlzb3JkZXJTY2VuZUljb24gPSBuZXcgVkJveCgge1xyXG4gICAgICBzcGFjaW5nOiBESVNPUkRFUl9TQ0VORV9JQ09OX0RPVFNfU1BBQ0lORyxcclxuICAgICAgY2hpbGRyZW46IF8udGltZXMoIDQsIGNyZWF0ZVJvdyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gU2NlbmUgcmFkaW8gYnV0dG9uc1xyXG4gICAgY29uc3Qgc2NlbmVSYWRpb0J1dHRvbkNvbnRlbnQgPSBbIHtcclxuICAgICAgdmFsdWU6IG1vZGVsLmVsbGlwc2VTY2VuZSxcclxuICAgICAgY3JlYXRlTm9kZTogKCkgPT4gbmV3IENpcmNsZSggMTAsIHsgZmlsbDogJ2JsYWNrJyB9IClcclxuICAgIH0sIHtcclxuICAgICAgdmFsdWU6IG1vZGVsLnJlY3RhbmdsZVNjZW5lLFxyXG4gICAgICBjcmVhdGVOb2RlOiAoKSA9PiBuZXcgUmVjdGFuZ2xlKCAwLCAwLCAyMCwgMjAsIHsgZmlsbDogJ2JsYWNrJyB9IClcclxuICAgIH0sIHtcclxuICAgICAgdmFsdWU6IG1vZGVsLmNpcmNsZVNxdWFyZVNjZW5lLFxyXG4gICAgICBjcmVhdGVOb2RlOiAoKSA9PiBuZXcgTm9kZSgge1xyXG4gICAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgICBuZXcgQ2lyY2xlKCA1LCB7IGZpbGw6ICdibGFjaycgfSApLFxyXG4gICAgICAgICAgbmV3IFJlY3RhbmdsZSggMCwgMCwgMTAsIDEwLCB7IGZpbGw6ICdibGFjaycsIHg6IDEwLCB5OiA4IH0gKVxyXG4gICAgICAgIF1cclxuICAgICAgfSApXHJcbiAgICB9LCB7XHJcbiAgICAgIHZhbHVlOiBtb2RlbC5kaXNvcmRlclNjZW5lLFxyXG4gICAgICBjcmVhdGVOb2RlOiAoKSA9PiBkaXNvcmRlclNjZW5lSWNvblxyXG4gICAgfSwge1xyXG4gICAgICB2YWx1ZTogbW9kZWwud2F2aW5nR2lybFNjZW5lLFxyXG4gICAgICBjcmVhdGVOb2RlOiAoKSA9PiBuZXcgSW1hZ2UoIHdhdmluZ19naXJsX2ljb25fcG5nLCB7IG1heEhlaWdodDogMjUgfSApXHJcbiAgICB9IF07XHJcblxyXG4gICAgLy8gQHByaXZhdGUgLSBNYWluIChsYXJnZSkgYXBlcnR1cmUgbm9kZVxyXG4gICAgdGhpcy5hcGVydHVyZU5vZGUgPSBuZXcgU2NlbmVDYW52YXNOb2RlKCBtb2RlbC5zY2VuZVByb3BlcnR5LCB7XHJcbiAgICAgIHNjYWxlOiBNQVRSSVhfQ0FOVkFTX05PREVfU0NBTEUsXHJcbiAgICAgIHRvcDogMTIwXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCB0aGlzLmFwZXJ0dXJlTm9kZSApO1xyXG5cclxuICAgIC8vIEBwcml2YXRlIC0gTWFpbiAobGFyZ2UpIGRpZmZyYWN0aW9uIG5vZGVcclxuICAgIHRoaXMuZGlmZnJhY3Rpb25Ob2RlID0gbmV3IE1hdHJpeENhbnZhc05vZGUoIG1vZGVsLmRpZmZyYWN0aW9uTWF0cml4LCB7XHJcbiAgICAgIHNjYWxlOiBNQVRSSVhfQ0FOVkFTX05PREVfU0NBTEUsXHJcbiAgICAgIHJpZ2h0OiB0aGlzLmxheW91dEJvdW5kcy5yaWdodCAtIDIwLFxyXG4gICAgICB0b3A6IHRoaXMuYXBlcnR1cmVOb2RlLnRvcFxyXG4gICAgfSApO1xyXG4gICAgbW9kZWwud2F2ZWxlbmd0aFByb3BlcnR5LmxpbmsoIHdhdmVsZW5ndGggPT4gdGhpcy5kaWZmcmFjdGlvbk5vZGUuc2V0QmFzZUNvbG9yKCBWaXNpYmxlQ29sb3Iud2F2ZWxlbmd0aFRvQ29sb3IoIHdhdmVsZW5ndGgsIHtcclxuICAgICAgcmVkdWNlSW50ZW5zaXR5QXRFeHRyZW1hOiBmYWxzZVxyXG4gICAgfSApICkgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMuZGlmZnJhY3Rpb25Ob2RlICk7XHJcblxyXG4gICAgdGhpcy5hcGVydHVyZU5vZGUucmlnaHQgPSB0aGlzLmRpZmZyYWN0aW9uTm9kZS5sZWZ0IC0gNTA7XHJcblxyXG4gICAgLy8gTGVuZ3RoIHNjYWxlIGluZGljYXRvciBvbiB0aGUgYXBlcnR1cmVcclxuICAgIGNvbnN0IGFwZXJ0dXJlU2NhbGVJbmRpY2F0b3JOb2RlID0gbmV3IExlbmd0aFNjYWxlSW5kaWNhdG9yTm9kZSggdGhpcy5hcGVydHVyZU5vZGUud2lkdGggKiAwLjA3NSwgU3RyaW5nVXRpbHMuZmlsbEluKCBtbVZhbHVlU3RyaW5nLCB7IHZhbHVlOiAwLjEgfSApLCB7XHJcbiAgICAgIGxlZnRCb3R0b206IHRoaXMuYXBlcnR1cmVOb2RlLmxlZnRUb3AucGx1c1hZKCAwLCAtNSApXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBhcGVydHVyZVNjYWxlSW5kaWNhdG9yTm9kZSApO1xyXG5cclxuICAgIC8vIExlbmd0aCBzY2FsZSBpbmRpY2F0b3Igb24gdGhlIGRpZmZyYWN0aW9uIHBhdHRlcm5cclxuICAgIGNvbnN0IGRpZmZyYWN0aW9uU2NhbGVJbmRpY2F0b3JOb2RlID0gbmV3IExlbmd0aFNjYWxlSW5kaWNhdG9yTm9kZSggdGhpcy5kaWZmcmFjdGlvbk5vZGUud2lkdGggKiAwLjEsIFN0cmluZ1V0aWxzLmZpbGxJbiggbW1WYWx1ZVN0cmluZywgeyB2YWx1ZTogMTAgfSApLCB7XHJcbiAgICAgIGxlZnRCb3R0b206IHRoaXMuZGlmZnJhY3Rpb25Ob2RlLmxlZnRUb3AucGx1c1hZKCAwLCAtNSApXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBkaWZmcmFjdGlvblNjYWxlSW5kaWNhdG9yTm9kZSApO1xyXG5cclxuICAgIGNvbnN0IHNjZW5lUmFkaW9CdXR0b25Hcm91cCA9IG5ldyBSZWN0YW5ndWxhclJhZGlvQnV0dG9uR3JvdXAoIG1vZGVsLnNjZW5lUHJvcGVydHksIHNjZW5lUmFkaW9CdXR0b25Db250ZW50LCB7XHJcbiAgICAgIHJhZGlvQnV0dG9uT3B0aW9uczoge1xyXG4gICAgICAgIGJhc2VDb2xvcjogJ3doaXRlJyxcclxuICAgICAgICBidXR0b25BcHBlYXJhbmNlU3RyYXRlZ3lPcHRpb25zOiB7XHJcbiAgICAgICAgICBzZWxlY3RlZFN0cm9rZTogJyM0MTlhYzknLFxyXG4gICAgICAgICAgc2VsZWN0ZWRMaW5lV2lkdGg6IDJcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHJpZ2h0OiB0aGlzLmFwZXJ0dXJlTm9kZS5sZWZ0IC0gMjAsXHJcbiAgICAgIGJvdHRvbTogdGhpcy5hcGVydHVyZU5vZGUuYm90dG9tXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gVGhlIG1pbmkgYXBlcnR1cmUgbm9kZSBoYXMgYSBzbWFsbCBiYWNrZ3JvdW5kXHJcbiAgICBjb25zdCBtaW5pQXBlcnR1cmVOb2RlQmFja2dyb3VuZCA9IG5ldyBSZWN0YW5nbGUoIDAsIDAsIE1BVFJJWF9ESU1FTlNJT04sIE1BVFJJWF9ESU1FTlNJT04sIHtcclxuICAgICAgZmlsbDogJ2JsYWNrJyxcclxuICAgICAgc2NhbGU6IE1JTklfRElGRlJBQ1RJT05fU0NBTEUgLyAyLFxyXG4gICAgICBjZW50ZXJZOiBsYXNlclBvaW50ZXJOb2RlLmNlbnRlclksXHJcbiAgICAgIGNlbnRlclg6IHRoaXMuYXBlcnR1cmVOb2RlLmNlbnRlclgsXHJcbiAgICAgIG1hdHJpeDogTWF0cml4My5hZmZpbmUoIDEsIDAsIDAsIDAuMjUsIDEsIDAgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIEBwcml2YXRlIC0gVGhlIG1pbmkgYXBlcnR1cmUgbm9kZSBoYXMgYW4gZXZlbiBzbWFsbGVyIHBhdHRlcm4gcmVuZGVyaW5nXHJcbiAgICB0aGlzLm1pbmlBcGVydHVyZU5vZGUgPSBuZXcgU2NlbmVDYW52YXNOb2RlKCBtb2RlbC5zY2VuZVByb3BlcnR5LCB7XHJcbiAgICAgIHNjYWxlOiBNSU5JX0RJRkZSQUNUSU9OX1NDQUxFIC8gNCxcclxuICAgICAgY2VudGVyWTogbGFzZXJQb2ludGVyTm9kZS5jZW50ZXJZLFxyXG4gICAgICBjZW50ZXJYOiB0aGlzLmFwZXJ0dXJlTm9kZS5jZW50ZXJYLFxyXG4gICAgICBtYXRyaXg6IE1hdHJpeDMuYWZmaW5lKCAxLCAwLCAwLCAwLjI1LCAxLCAwIClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZSAtIFRoZSBtaW5pIGRpZmZyYWN0aW9uIHBhdHRlcm4gYXQgdGhlIHRvcCBvZiB0aGUgc2NyZWVuXHJcbiAgICB0aGlzLm1pbmlEaWZmcmFjdGlvbk5vZGUgPSBuZXcgTWF0cml4Q2FudmFzTm9kZSggbW9kZWwuZGlmZnJhY3Rpb25NYXRyaXgsIHtcclxuICAgICAgc2NhbGU6IE1JTklfRElGRlJBQ1RJT05fU0NBTEUsXHJcbiAgICAgIGNlbnRlclk6IGxhc2VyUG9pbnRlck5vZGUuY2VudGVyWSxcclxuICAgICAgY2VudGVyWDogdGhpcy5kaWZmcmFjdGlvbk5vZGUuY2VudGVyWCxcclxuICAgICAgbWF0cml4OiBNYXRyaXgzLmFmZmluZSggMSwgMCwgMCwgMC4yNSwgMSwgMCApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgbW9kZWwud2F2ZWxlbmd0aFByb3BlcnR5LmxpbmsoIHdhdmVsZW5ndGggPT4gdGhpcy5taW5pRGlmZnJhY3Rpb25Ob2RlLnNldEJhc2VDb2xvciggVmlzaWJsZUNvbG9yLndhdmVsZW5ndGhUb0NvbG9yKCB3YXZlbGVuZ3RoLCB7XHJcbiAgICAgIHJlZHVjZUludGVuc2l0eUF0RXh0cmVtYTogZmFsc2VcclxuICAgIH0gKSApICk7XHJcblxyXG4gICAgY29uc3QgdXBkYXRlQ2FudmFzZXMgPSB0aGlzLnVwZGF0ZUNhbnZhc2VzLmJpbmQoIHRoaXMgKTtcclxuICAgIG1vZGVsLnNjZW5lUHJvcGVydHkubGF6eUxpbmsoIHVwZGF0ZUNhbnZhc2VzICk7XHJcblxyXG4gICAgdGhpcy5hZGRDaGlsZCggc2NlbmVSYWRpb0J1dHRvbkdyb3VwICk7XHJcbiAgICBtb2RlbC5zY2VuZXMuZm9yRWFjaCggc2NlbmUgPT4gc2NlbmUubGlua1RvQWxsUHJvcGVydGllcyggdXBkYXRlQ2FudmFzZXMgKSApO1xyXG4gICAgbW9kZWwub25Qcm9wZXJ0eS5sYXp5TGluayggdXBkYXRlQ2FudmFzZXMgKTtcclxuXHJcbiAgICAvLyBOaWNrbmFtZSBzbyBldmVyeXRoaW5nIGZpdHMgb24gb25lIGxpbmUuXHJcbiAgICBjb25zdCBPUFRTID0gUEFORUxfT1BUSU9OUztcclxuICAgIGNvbnN0IGNvbnRyb2xQYW5lbFRvZ2dsZU5vZGUgPSBuZXcgVG9nZ2xlTm9kZSggbW9kZWwuc2NlbmVQcm9wZXJ0eSwgW1xyXG4gICAgICB7IHZhbHVlOiBtb2RlbC5lbGxpcHNlU2NlbmUsIGNyZWF0ZU5vZGU6ICgpID0+IG5ldyBFbGxpcHNlU2NlbmVDb250cm9sUGFuZWwoIG1vZGVsLmVsbGlwc2VTY2VuZSwgT1BUUyApIH0sXHJcbiAgICAgIHsgdmFsdWU6IG1vZGVsLnJlY3RhbmdsZVNjZW5lLCBjcmVhdGVOb2RlOiAoKSA9PiBuZXcgUmVjdGFuZ2xlU2NlbmVDb250cm9sUGFuZWwoIG1vZGVsLnJlY3RhbmdsZVNjZW5lLCBPUFRTICkgfSxcclxuICAgICAgeyB2YWx1ZTogbW9kZWwuY2lyY2xlU3F1YXJlU2NlbmUsIGNyZWF0ZU5vZGU6ICgpID0+IG5ldyBDaXJjbGVTcXVhcmVTY2VuZUNvbnRyb2xQYW5lbCggbW9kZWwuY2lyY2xlU3F1YXJlU2NlbmUsIE9QVFMgKSB9LFxyXG4gICAgICB7IHZhbHVlOiBtb2RlbC5kaXNvcmRlclNjZW5lLCBjcmVhdGVOb2RlOiAoKSA9PiBuZXcgRGlzb3JkZXJTY2VuZUNvbnRyb2xQYW5lbCggbW9kZWwuZGlzb3JkZXJTY2VuZSwgT1BUUyApIH0sXHJcbiAgICAgIHsgdmFsdWU6IG1vZGVsLndhdmluZ0dpcmxTY2VuZSwgY3JlYXRlTm9kZTogKCkgPT4gbmV3IFdhdmluZ0dpcmxTY2VuZUNvbnRyb2xQYW5lbCggbW9kZWwud2F2aW5nR2lybFNjZW5lLCBPUFRTICkgfVxyXG4gICAgXSwge1xyXG4gICAgICBhbGlnbkNoaWxkcmVuOiBUb2dnbGVOb2RlLkNFTlRFUl9CT1RUT00sXHJcbiAgICAgIGNlbnRlclg6IHRoaXMuYXBlcnR1cmVOb2RlLmNlbnRlclgsXHJcbiAgICAgIGJvdHRvbTogdGhpcy5sYXlvdXRCb3VuZHMuYm90dG9tIC0gTUFSR0lOXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBjb250cm9sUGFuZWxUb2dnbGVOb2RlICk7XHJcblxyXG4gICAgY29uc3QgQkVBTV9XSURUSCA9IDIyO1xyXG4gICAgY29uc3QgaW5jaWRlbnRCZWFtID0gbmV3IFJlY3RhbmdsZShcclxuICAgICAgbGFzZXJQb2ludGVyTm9kZS5yaWdodCwgbGFzZXJQb2ludGVyTm9kZS5jZW50ZXJZIC0gQkVBTV9XSURUSCAvIDIsXHJcbiAgICAgIHRoaXMubWluaUFwZXJ0dXJlTm9kZS5jZW50ZXJYIC0gbGFzZXJQb2ludGVyTm9kZS5yaWdodCwgQkVBTV9XSURUSCwge1xyXG4gICAgICAgIG9wYWNpdHk6IDAuN1xyXG4gICAgICB9ICk7XHJcblxyXG4gICAgbW9kZWwud2F2ZWxlbmd0aFByb3BlcnR5LmxpbmsoIHdhdmVsZW5ndGggPT4gaW5jaWRlbnRCZWFtLnNldEZpbGwoIFZpc2libGVDb2xvci53YXZlbGVuZ3RoVG9Db2xvciggd2F2ZWxlbmd0aCApICkgKTtcclxuXHJcbiAgICAvLyBUaGUgZGlmZnJhY3RlZCBiZWFtIG1ha2VzIGEgY29uZSBzaGFwZSBlbWFuYXRpbmcgZnJvbSB0aGUgYXBlcnR1cmUuXHJcbiAgICBjb25zdCBjb25lU2l6ZSA9IDg7XHJcbiAgICBjb25zdCB0cmFuc21pdHRlZEJlYW0gPSBuZXcgUGF0aChcclxuICAgICAgbmV3IFNoYXBlKClcclxuICAgICAgICAubW92ZVRvKCB0aGlzLm1pbmlBcGVydHVyZU5vZGUuY2VudGVyWCwgdGhpcy5taW5pQXBlcnR1cmVOb2RlLmNlbnRlclkgLSBjb25lU2l6ZSAvIDIgKVxyXG4gICAgICAgIC5saW5lVG9Qb2ludCggdGhpcy5taW5pRGlmZnJhY3Rpb25Ob2RlLmxlZnRUb3AgKVxyXG4gICAgICAgIC5saW5lVG8oIHRoaXMubWluaURpZmZyYWN0aW9uTm9kZS5yaWdodCwgdGhpcy5taW5pRGlmZnJhY3Rpb25Ob2RlLnRvcCArIHRoaXMubWluaURpZmZyYWN0aW9uTm9kZS5oZWlnaHQgKiAwLjIgKVxyXG4gICAgICAgIC5saW5lVG9Qb2ludCggdGhpcy5taW5pRGlmZnJhY3Rpb25Ob2RlLnJpZ2h0Qm90dG9tIClcclxuICAgICAgICAubGluZVRvKCB0aGlzLm1pbmlBcGVydHVyZU5vZGUuY2VudGVyWCwgdGhpcy5taW5pQXBlcnR1cmVOb2RlLmNlbnRlclkgKyBjb25lU2l6ZSAvIDIgKVxyXG4gICAgICAgIC5jbG9zZSgpLCB7XHJcbiAgICAgICAgb3BhY2l0eTogMC43XHJcbiAgICAgIH0gKTtcclxuXHJcbiAgICAvLyBUaGVyZSBpcyBhIHN5bW1ldHJpY2FsIGdyYWRpZW50IHdoaWNoIGlzIHN0cm9uZyBpbiB0aGUgY2VudGVyIGFuZCBmYWRlcyBvdXQgdG93YXJkIHRoZSB0b3AgYW5kIGJvdHRvbVxyXG4gICAgbW9kZWwud2F2ZWxlbmd0aFByb3BlcnR5LmxpbmsoIHdhdmVsZW5ndGggPT4ge1xyXG5cclxuICAgICAgY29uc3QgY29sb3IgPSBWaXNpYmxlQ29sb3Iud2F2ZWxlbmd0aFRvQ29sb3IoIHdhdmVsZW5ndGggKTtcclxuXHJcbiAgICAgIGNvbnN0IGEgPSAwLjM7XHJcbiAgICAgIGNvbnN0IGIgPSAwLjQ1O1xyXG4gICAgICBjb25zdCBiT3BhY2l0eSA9IDAuODtcclxuICAgICAgY29uc3QgYU9wYWNpdHkgPSAwLjQ7XHJcbiAgICAgIGNvbnN0IGdyYWRpZW50ID0gbmV3IExpbmVhckdyYWRpZW50KFxyXG4gICAgICAgIDAsIHRoaXMubWluaURpZmZyYWN0aW9uTm9kZS50b3AsXHJcbiAgICAgICAgMCwgdGhpcy5taW5pRGlmZnJhY3Rpb25Ob2RlLmJvdHRvbSApXHJcbiAgICAgICAgLmFkZENvbG9yU3RvcCggMCwgY29sb3Iud2l0aEFscGhhKCAwICkgKVxyXG4gICAgICAgIC5hZGRDb2xvclN0b3AoIGEsIGNvbG9yLndpdGhBbHBoYSggYU9wYWNpdHkgKSApXHJcbiAgICAgICAgLmFkZENvbG9yU3RvcCggYiwgY29sb3Iud2l0aEFscGhhKCBiT3BhY2l0eSApIClcclxuICAgICAgICAuYWRkQ29sb3JTdG9wKCAwLjUsIGNvbG9yIClcclxuICAgICAgICAuYWRkQ29sb3JTdG9wKCAxIC0gYiwgY29sb3Iud2l0aEFscGhhKCBiT3BhY2l0eSApIClcclxuICAgICAgICAuYWRkQ29sb3JTdG9wKCAxIC0gYSwgY29sb3Iud2l0aEFscGhhKCBhT3BhY2l0eSApIClcclxuICAgICAgICAuYWRkQ29sb3JTdG9wKCAxLCBjb2xvci53aXRoQWxwaGEoIDAgKSApO1xyXG5cclxuICAgICAgdHJhbnNtaXR0ZWRCZWFtLnNldEZpbGwoIGdyYWRpZW50ICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgbW9kZWwub25Qcm9wZXJ0eS5saW5rQXR0cmlidXRlKCBpbmNpZGVudEJlYW0sICd2aXNpYmxlJyApO1xyXG4gICAgbW9kZWwub25Qcm9wZXJ0eS5saW5rQXR0cmlidXRlKCB0cmFuc21pdHRlZEJlYW0sICd2aXNpYmxlJyApO1xyXG5cclxuICAgIGNvbnN0IHdhdmVsZW5ndGhQYW5lbCA9IG5ldyBXYXZlSW50ZXJmZXJlbmNlUGFuZWwoXHJcbiAgICAgIG5ldyBXYXZlbGVuZ3RoTnVtYmVyQ29udHJvbCggbW9kZWwud2F2ZWxlbmd0aFByb3BlcnR5LCB7XHJcbiAgICAgICAgYXJyb3dCdXR0b25PcHRpb25zOiB7XHJcbiAgICAgICAgICB0b3VjaEFyZWFYRGlsYXRpb246IFdhdmVJbnRlcmZlcmVuY2VDb25zdGFudHMuTlVNQkVSX0NPTlRST0xfSE9SSVpPTlRBTF9UT1VDSF9BUkVBX0RJTEFUSU9OLFxyXG4gICAgICAgICAgdG91Y2hBcmVhWURpbGF0aW9uOiA3XHJcbiAgICAgICAgfVxyXG4gICAgICB9ICksIG1lcmdlKCB7fSwgUEFORUxfT1BUSU9OUywge1xyXG4gICAgICAgIGxlZnQ6IGxhc2VyUG9pbnRlck5vZGUubGVmdCxcclxuICAgICAgICB0b3A6IGFwZXJ0dXJlU2NhbGVJbmRpY2F0b3JOb2RlLnRvcCxcclxuICAgICAgICB4TWFyZ2luOiA2XHJcbiAgICAgIH0gKSApO1xyXG5cclxuICAgIHRoaXMuYWRkQ2hpbGQoIGluY2lkZW50QmVhbSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggdHJhbnNtaXR0ZWRCZWFtICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBtaW5pQXBlcnR1cmVOb2RlQmFja2dyb3VuZCApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggdGhpcy5taW5pQXBlcnR1cmVOb2RlICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCB0aGlzLm1pbmlEaWZmcmFjdGlvbk5vZGUgKTtcclxuXHJcbiAgICB0aGlzLmFkZENoaWxkKCBsYXNlclBvaW50ZXJOb2RlICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCB3YXZlbGVuZ3RoUGFuZWwgKTtcclxuXHJcbiAgICB1cGRhdGVDYW52YXNlcygpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogdXBkYXRlIHRoZSBtYWluL21pbmkgYXBlcnR1cmUvZGlmZnJhY3Rpb24gcGF0dGVybnMuXHJcbiAgICovXHJcbiAgcHJpdmF0ZSB1cGRhdGVDYW52YXNlcygpOiB2b2lkIHtcclxuICAgIHRoaXMuYXBlcnR1cmVOb2RlLmludmFsaWRhdGVQYWludCgpO1xyXG4gICAgdGhpcy5taW5pQXBlcnR1cmVOb2RlLmludmFsaWRhdGVQYWludCgpO1xyXG4gICAgdGhpcy5kaWZmcmFjdGlvbk5vZGUuaW52YWxpZGF0ZVBhaW50KCk7XHJcbiAgICB0aGlzLm1pbmlEaWZmcmFjdGlvbk5vZGUuaW52YWxpZGF0ZVBhaW50KCk7XHJcbiAgfVxyXG59XHJcblxyXG53YXZlSW50ZXJmZXJlbmNlLnJlZ2lzdGVyKCAnRGlmZnJhY3Rpb25TY3JlZW5WaWV3JywgRGlmZnJhY3Rpb25TY3JlZW5WaWV3ICk7XHJcbmV4cG9ydCBkZWZhdWx0IERpZmZyYWN0aW9uU2NyZWVuVmlldzsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFVBQVUsTUFBTSxrQ0FBa0M7QUFDekQsT0FBT0MsT0FBTyxNQUFNLCtCQUErQjtBQUNuRCxPQUFPQyxVQUFVLE1BQU0sb0NBQW9DO0FBQzNELFNBQVNDLEtBQUssUUFBUSxnQ0FBZ0M7QUFDdEQsT0FBT0MsS0FBSyxNQUFNLG1DQUFtQztBQUNyRCxPQUFPQyxXQUFXLE1BQU0sK0NBQStDO0FBQ3ZFLE9BQU9DLGNB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