// Copyright 2015-2023, University of Colorado Boulder

/**
 * Functions that create icons for this sim.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import ScreenIcon from '../../../../joist/js/ScreenIcon.js';
import merge from '../../../../phet-core/js/merge.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { HBox, Image, Node, Rectangle, Text } from '../../../../scenery/js/imports.js';
import butterflyBig_png from '../../../images/cards/butterflyBig_png.js';
import stickFigure_png from '../../../images/cards/stickFigure_png.js';
import functionBuilder from '../../functionBuilder.js';
import FunctionBuilderStrings from '../../FunctionBuilderStrings.js';
import FBCanvasUtils from '../../patterns/model/FBCanvasUtils.js';
import Warhol from '../../patterns/model/functions/Warhol.js';
import FBColors from '../FBColors.js';
import FBConstants from '../FBConstants.js';
import FBSymbols from '../FBSymbols.js';
import RationalNumber from '../model/RationalNumber.js';
import SlopeInterceptEquationNode from './equations/SlopeInterceptEquationNode.js';
import EyeCloseNode from './EyeCloseNode.js';
import FunctionBackgroundNode from './functions/FunctionBackgroundNode.js';

// constants
const RADIO_BUTTON_ICON_SCALE = 0.35;
const RADIO_BUTTON_ICON_LINE_WIDTH = 3;
const CHECKBOX_ICON_SCALE = 0.45;
const CHECKBOX_ICON_LINE_WIDTH = 3;
const FBIconFactory = {
  /**
   * Creates the icon for the 'Patterns' screen, the Warhol function applied to an image.
   * Be sure to use a higher resolution version of the image or it will look lousy at the
   * size of the home screen icon.
   *
   * @param {Object} [options]
   * @returns {Node}
   */
  createPatternsScreenIcon: function (options) {
    options = merge({
      fill: FBColors.PATTERNS_SCREEN_BACKGROUND
    }, options);

    // apply Warhol to the image
    const warhol = new Warhol();
    const inputCanvas = FBCanvasUtils.createCanvasWithImage(butterflyBig_png);
    const outputCanvas = warhol.applyFunction(inputCanvas);

    // create the icon
    const iconNode = new Image(outputCanvas.toDataURL(), {
      // Dimensions are unlikely to be available when loading an image via a URL, so set the initial dimensions
      // explicitly. See https://github.com/phetsims/function-builder/issues/68
      initialWidth: outputCanvas.width,
      initialHeight: outputCanvas.height
    });
    return new ScreenIcon(iconNode, options);
  },
  /**
   * Creates the icon for the 'Numbers' screen, a function piece with '+ 3' on it.
   *
   * @param {Object} [options]
   * @returns {Node}
   */
  createNumbersScreenIcon: function (options) {
    options = merge({
      fill: FBColors.NUMBERS_SCREEN_BACKGROUND
    }, options);
    const functionNode = new FunctionBackgroundNode({
      fill: 'rgb( 255, 120, 120 )'
    });

    // handle operator separately, so we can control spacing
    const operatorNode = new Text(FBSymbols.PLUS, {
      font: new PhetFont(80),
      maxWidth: 0.5 * functionNode.width,
      maxHeight: 0.95 * functionNode.height,
      center: functionNode.center
    });
    const operandNode = new Text('3', {
      font: new PhetFont(80),
      maxWidth: 0.5 * functionNode.width,
      maxHeight: 0.95 * functionNode.height,
      center: functionNode.center
    });

    // operator & operand
    const parentNode = new HBox({
      children: [operatorNode, operandNode],
      spacing: 6,
      maxWidth: 0.5 * functionNode.width,
      maxHeight: 0.95 * functionNode.height,
      center: functionNode.center
    });
    const iconNode = new Node({
      children: [functionNode, parentNode]
    });
    return new ScreenIcon(iconNode, options);
  },
  /**
   * Creates the icon for the 'Equations' screen, the equation y = 2x + 1
   *
   * @param {Object} [options]
   * @returns {Node}
   */
  createEquationsScreenIcon: function (options) {
    options = merge({
      fill: FBColors.EQUATIONS_SCREEN_BACKGROUND,
      maxIconWidthProportion: 0.75
    }, options);
    const iconNode = new SlopeInterceptEquationNode(new RationalNumber(2, 3), RationalNumber.withInteger(0));
    return new ScreenIcon(iconNode, options);
  },
  /**
   * Creates the icon for the 'Mystery' screen.
   *
   * @param {Object} [options]
   * @returns {ScreenIcon}
   */
  createMysteryScreenIcon: function (options) {
    options = merge({
      fill: FBColors.MYSTERY_SCREEN_BACKGROUND,
      functionFill: 'rgb( 147, 231, 128 )',
      questionMarkFill: 'black'
    }, options);
    const functionNode = new FunctionBackgroundNode({
      fill: options.functionFill
    });
    const textNode = new Text(FunctionBuilderStrings.mysteryCharacterStringProperty, {
      font: new PhetFont({
        size: 80,
        weight: 'bold'
      }),
      fill: options.questionMarkFill,
      maxWidth: 0.5 * functionNode.width,
      maxHeight: 0.95 * functionNode.height,
      center: functionNode.center
    });
    const iconNode = new Node({
      children: [functionNode, textNode]
    });
    return new ScreenIcon(iconNode, options);
  },
  /**
   * Creates the icon for a scene selection radio button.
   * It consists of N functions in series.
   *
   * @param {number} numberOfFunctions
   * @param {Object} [options]
   * @returns {Node}
   */
  createSceneIcon: function (numberOfFunctions, options) {
    options = merge({
      colors: ['rgb( 147, 231, 129 )', 'rgb( 205, 175, 230 )', 'rgb( 255, 120, 120 )'],
      scale: RADIO_BUTTON_ICON_SCALE,
      lineWidth: RADIO_BUTTON_ICON_LINE_WIDTH
    }, options);
    assert && assert(options.colors.length >= numberOfFunctions);
    assert && assert(!options.children);
    options.children = [];
    let previousFunctionNode = null;
    for (let i = 0; i < numberOfFunctions; i++) {
      const functionNode = new FunctionBackgroundNode({
        fill: options.colors[i],
        lineWidth: options.lineWidth
      });
      if (previousFunctionNode) {
        functionNode.left = previousFunctionNode.right - previousFunctionNode.xInset - 2 * RADIO_BUTTON_ICON_LINE_WIDTH;
      }
      options.children.push(functionNode);
      previousFunctionNode = functionNode;
    }
    return new Node(options);
  },
  /**
   * Creates the icon for the 'see inside' checkbox, which shows/hides windows in the builder.
   *
   * @param {Object} [options]
   * @returns {Node}
   */
  createSeeInsideIcon: function (options) {
    options = merge({
      iconType: 'number' // {string} whether to show a 'number' or 'image' on the card in the window
    }, options);
    assert && assert(options.iconType === 'number' || options.iconType === 'image');
    const functionNode = new FunctionBackgroundNode({
      fill: 'rgb( 147, 231, 129 )',
      lineWidth: CHECKBOX_ICON_LINE_WIDTH,
      scale: CHECKBOX_ICON_SCALE
    });
    const windowLength = 0.75 * functionNode.height;
    const windowNode = new Rectangle(0, 0, windowLength, windowLength, {
      cornerRadius: 3,
      fill: 'white',
      stroke: 'black',
      lineWidth: 1,
      centerX: functionNode.right - FBConstants.FUNCTION_X_INSET_FACTOR * functionNode.width,
      centerY: functionNode.centerY
    });
    let contentNode = null;
    if (options.iconType === 'number') {
      // number '2'
      contentNode = new Text('2', {
        font: new PhetFont(20),
        maxHeight: 0.85 * windowNode.height
      });
    } else {
      // image
      contentNode = new Image(stickFigure_png, {
        maxHeight: 0.75 * windowNode.height
      });
    }
    contentNode.center = windowNode.center;
    return new Node({
      children: [functionNode, windowNode, contentNode]
    });
  },
  /**
   * Creates the icon for the 'hide functions' checkbox, which hides the identity of functions in the builder.
   *
   * @returns {Node}
   */
  createHideFunctionsIcon: function () {
    const functionNode = new FunctionBackgroundNode({
      fill: FBColors.HIDDEN_FUNCTION,
      lineWidth: CHECKBOX_ICON_LINE_WIDTH,
      scale: CHECKBOX_ICON_SCALE
    });
    const eyeCloseNode = new EyeCloseNode({
      maxHeight: 0.65 * functionNode.height,
      center: functionNode.center
    });
    return new Node({
      children: [functionNode, eyeCloseNode]
    });
  }
};
functionBuilder.register('FBIconFactory', FBIconFactory);
export default FBIconFactory;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTY3JlZW5JY29uIiwibWVyZ2UiLCJQaGV0Rm9udCIsIkhCb3giLCJJbWFnZSIsIk5vZGUiLCJSZWN0YW5nbGUiLCJUZXh0IiwiYnV0dGVyZmx5QmlnX3BuZyIsInN0aWNrRmlndXJlX3BuZyIsImZ1bmN0aW9uQnVpbGRlciIsIkZ1bmN0aW9uQnVpbGRlclN0cmluZ3MiLCJGQkNhbnZhc1V0aWxzIiwiV2FyaG9sIiwiRkJDb2xvcnMiLCJGQkNvbnN0YW50cyIsIkZCU3ltYm9scyIsIlJhdGlvbmFsTnVtYmVyIiwiU2xvcGVJbnRlcmNlcHRFcXVhdGlvbk5vZGUiLCJFeWVDbG9zZU5vZGUiLCJGdW5jdGlvbkJhY2tncm91bmROb2RlIiwiUkFESU9fQlVUVE9OX0lDT05fU0NBTEUiLCJSQURJT19CVVRUT05fSUNPTl9MSU5FX1dJRFRIIiwiQ0hFQ0tCT1hfSUNPTl9TQ0FMRSIsIkNIRUNLQk9YX0lDT05fTElORV9XSURUSCIsIkZCSWNvbkZhY3RvcnkiLCJjcmVhdGVQYXR0ZXJuc1NjcmVlbkljb24iLCJvcHRpb25zIiwiZmlsbCIsIlBBVFRFUk5TX1NDUkVFTl9CQUNLR1JPVU5EIiwid2FyaG9sIiwiaW5wdXRDYW52YXMiLCJjcmVhdGVDYW52YXNXaXRoSW1hZ2UiLCJvdXRwdXRDYW52YXMiLCJhcHBseUZ1bmN0aW9uIiwiaWNvbk5vZGUiLCJ0b0RhdGFVUkwiLCJpbml0aWFsV2lkdGgiLCJ3aWR0aCIsImluaXRpYWxIZWlnaHQiLCJoZWlnaHQiLCJjcmVhdGVOdW1iZXJzU2NyZWVuSWNvbiIsIk5VTUJFUlNfU0NSRUVOX0JBQ0tHUk9VTkQiLCJmdW5jdGlvbk5vZGUiLCJvcGVyYXRvck5vZGUiLCJQTFVTIiwiZm9udCIsIm1heFdpZHRoIiwibWF4SGVpZ2h0IiwiY2VudGVyIiwib3BlcmFuZE5vZGUiLCJwYXJlbnROb2RlIiwiY2hpbGRyZW4iLCJzcGFjaW5nIiwiY3JlYXRlRXF1YXRpb25zU2NyZWVuSWNvbiIsIkVRVUFUSU9OU19TQ1JFRU5fQkFDS0dST1VORCIsIm1heEljb25XaWR0aFByb3BvcnRpb24iLCJ3aXRoSW50ZWdlciIsImNyZWF0ZU15c3RlcnlTY3JlZW5JY29uIiwiTVlTVEVSWV9TQ1JFRU5fQkFDS0dST1VORCIsImZ1bmN0aW9uRmlsbCIsInF1ZXN0aW9uTWFya0ZpbGwiLCJ0ZXh0Tm9kZSIsIm15c3RlcnlDaGFyYWN0ZXJTdHJpbmdQcm9wZXJ0eSIsInNpemUiLCJ3ZWlnaHQiLCJjcmVhdGVTY2VuZUljb24iLCJudW1iZXJPZkZ1bmN0aW9ucyIsImNvbG9ycyIsInNjYWxlIiwibGluZVdpZHRoIiwiYXNzZXJ0IiwibGVuZ3RoIiwicHJldmlvdXNGdW5jdGlvbk5vZGUiLCJpIiwibGVmdCIsInJpZ2h0IiwieEluc2V0IiwicHVzaCIsImNyZWF0ZVNlZUluc2lkZUljb24iLCJpY29uVHlwZSIsIndpbmRvd0xlbmd0aCIsIndpbmRvd05vZGUiLCJjb3JuZXJSYWRpdXMiLCJzdHJva2UiLCJjZW50ZXJYIiwiRlVOQ1RJT05fWF9JTlNFVF9GQUNUT1IiLCJjZW50ZXJZIiwiY29udGVudE5vZGUiLCJjcmVhdGVIaWRlRnVuY3Rpb25zSWNvbiIsIkhJRERFTl9GVU5DVElPTiIsImV5ZUNsb3NlTm9kZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiRkJJY29uRmFjdG9yeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNS0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBGdW5jdGlvbnMgdGhhdCBjcmVhdGUgaWNvbnMgZm9yIHRoaXMgc2ltLlxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCBTY3JlZW5JY29uIGZyb20gJy4uLy4uLy4uLy4uL2pvaXN0L2pzL1NjcmVlbkljb24uanMnO1xyXG5pbXBvcnQgbWVyZ2UgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL21lcmdlLmpzJztcclxuaW1wb3J0IFBoZXRGb250IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9QaGV0Rm9udC5qcyc7XHJcbmltcG9ydCB7IEhCb3gsIEltYWdlLCBOb2RlLCBSZWN0YW5nbGUsIFRleHQgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgYnV0dGVyZmx5QmlnX3BuZyBmcm9tICcuLi8uLi8uLi9pbWFnZXMvY2FyZHMvYnV0dGVyZmx5QmlnX3BuZy5qcyc7XHJcbmltcG9ydCBzdGlja0ZpZ3VyZV9wbmcgZnJvbSAnLi4vLi4vLi4vaW1hZ2VzL2NhcmRzL3N0aWNrRmlndXJlX3BuZy5qcyc7XHJcbmltcG9ydCBmdW5jdGlvbkJ1aWxkZXIgZnJvbSAnLi4vLi4vZnVuY3Rpb25CdWlsZGVyLmpzJztcclxuaW1wb3J0IEZ1bmN0aW9uQnVpbGRlclN0cmluZ3MgZnJvbSAnLi4vLi4vRnVuY3Rpb25CdWlsZGVyU3RyaW5ncy5qcyc7XHJcbmltcG9ydCBGQkNhbnZhc1V0aWxzIGZyb20gJy4uLy4uL3BhdHRlcm5zL21vZGVsL0ZCQ2FudmFzVXRpbHMuanMnO1xyXG5pbXBvcnQgV2FyaG9sIGZyb20gJy4uLy4uL3BhdHRlcm5zL21vZGVsL2Z1bmN0aW9ucy9XYXJob2wuanMnO1xyXG5pbXBvcnQgRkJDb2xvcnMgZnJvbSAnLi4vRkJDb2xvcnMuanMnO1xyXG5pbXBvcnQgRkJDb25zdGFudHMgZnJvbSAnLi4vRkJDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgRkJTeW1ib2xzIGZyb20gJy4uL0ZCU3ltYm9scy5qcyc7XHJcbmltcG9ydCBSYXRpb25hbE51bWJlciBmcm9tICcuLi9tb2RlbC9SYXRpb25hbE51bWJlci5qcyc7XHJcbmltcG9ydCBTbG9wZUludGVyY2VwdEVxdWF0aW9uTm9kZSBmcm9tICcuL2VxdWF0aW9ucy9TbG9wZUludGVyY2VwdEVxdWF0aW9uTm9kZS5qcyc7XHJcbmltcG9ydCBFeWVDbG9zZU5vZGUgZnJvbSAnLi9FeWVDbG9zZU5vZGUuanMnO1xyXG5pbXBvcnQgRnVuY3Rpb25CYWNrZ3JvdW5kTm9kZSBmcm9tICcuL2Z1bmN0aW9ucy9GdW5jdGlvbkJhY2tncm91bmROb2RlLmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBSQURJT19CVVRUT05fSUNPTl9TQ0FMRSA9IDAuMzU7XHJcbmNvbnN0IFJBRElPX0JVVFRPTl9JQ09OX0xJTkVfV0lEVEggPSAzO1xyXG5jb25zdCBDSEVDS0JPWF9JQ09OX1NDQUxFID0gMC40NTtcclxuY29uc3QgQ0hFQ0tCT1hfSUNPTl9MSU5FX1dJRFRIID0gMztcclxuXHJcbmNvbnN0IEZCSWNvbkZhY3RvcnkgPSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgdGhlIGljb24gZm9yIHRoZSAnUGF0dGVybnMnIHNjcmVlbiwgdGhlIFdhcmhvbCBmdW5jdGlvbiBhcHBsaWVkIHRvIGFuIGltYWdlLlxyXG4gICAqIEJlIHN1cmUgdG8gdXNlIGEgaGlnaGVyIHJlc29sdXRpb24gdmVyc2lvbiBvZiB0aGUgaW1hZ2Ugb3IgaXQgd2lsbCBsb29rIGxvdXN5IGF0IHRoZVxyXG4gICAqIHNpemUgb2YgdGhlIGhvbWUgc2NyZWVuIGljb24uXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXHJcbiAgICogQHJldHVybnMge05vZGV9XHJcbiAgICovXHJcbiAgY3JlYXRlUGF0dGVybnNTY3JlZW5JY29uOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHJcbiAgICBvcHRpb25zID0gbWVyZ2UoIHtcclxuICAgICAgZmlsbDogRkJDb2xvcnMuUEFUVEVSTlNfU0NSRUVOX0JBQ0tHUk9VTkRcclxuICAgIH0sIG9wdGlvbnMgKTtcclxuXHJcbiAgICAvLyBhcHBseSBXYXJob2wgdG8gdGhlIGltYWdlXHJcbiAgICBjb25zdCB3YXJob2wgPSBuZXcgV2FyaG9sKCk7XHJcbiAgICBjb25zdCBpbnB1dENhbnZhcyA9IEZCQ2FudmFzVXRpbHMuY3JlYXRlQ2FudmFzV2l0aEltYWdlKCBidXR0ZXJmbHlCaWdfcG5nICk7XHJcbiAgICBjb25zdCBvdXRwdXRDYW52YXMgPSB3YXJob2wuYXBwbHlGdW5jdGlvbiggaW5wdXRDYW52YXMgKTtcclxuXHJcbiAgICAvLyBjcmVhdGUgdGhlIGljb25cclxuICAgIGNvbnN0IGljb25Ob2RlID0gbmV3IEltYWdlKCBvdXRwdXRDYW52YXMudG9EYXRhVVJMKCksIHtcclxuXHJcbiAgICAgIC8vIERpbWVuc2lvbnMgYXJlIHVubGlrZWx5IHRvIGJlIGF2YWlsYWJsZSB3aGVuIGxvYWRpbmcgYW4gaW1hZ2UgdmlhIGEgVVJMLCBzbyBzZXQgdGhlIGluaXRpYWwgZGltZW5zaW9uc1xyXG4gICAgICAvLyBleHBsaWNpdGx5LiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL2Z1bmN0aW9uLWJ1aWxkZXIvaXNzdWVzLzY4XHJcbiAgICAgIGluaXRpYWxXaWR0aDogb3V0cHV0Q2FudmFzLndpZHRoLFxyXG4gICAgICBpbml0aWFsSGVpZ2h0OiBvdXRwdXRDYW52YXMuaGVpZ2h0XHJcbiAgICB9ICk7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBTY3JlZW5JY29uKCBpY29uTm9kZSwgb3B0aW9ucyApO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgdGhlIGljb24gZm9yIHRoZSAnTnVtYmVycycgc2NyZWVuLCBhIGZ1bmN0aW9uIHBpZWNlIHdpdGggJysgMycgb24gaXQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXHJcbiAgICogQHJldHVybnMge05vZGV9XHJcbiAgICovXHJcbiAgY3JlYXRlTnVtYmVyc1NjcmVlbkljb246IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cclxuICAgIG9wdGlvbnMgPSBtZXJnZSgge1xyXG4gICAgICBmaWxsOiBGQkNvbG9ycy5OVU1CRVJTX1NDUkVFTl9CQUNLR1JPVU5EXHJcbiAgICB9LCBvcHRpb25zICk7XHJcblxyXG4gICAgY29uc3QgZnVuY3Rpb25Ob2RlID0gbmV3IEZ1bmN0aW9uQmFja2dyb3VuZE5vZGUoIHtcclxuICAgICAgZmlsbDogJ3JnYiggMjU1LCAxMjAsIDEyMCApJ1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIGhhbmRsZSBvcGVyYXRvciBzZXBhcmF0ZWx5LCBzbyB3ZSBjYW4gY29udHJvbCBzcGFjaW5nXHJcbiAgICBjb25zdCBvcGVyYXRvck5vZGUgPSBuZXcgVGV4dCggRkJTeW1ib2xzLlBMVVMsIHtcclxuICAgICAgZm9udDogbmV3IFBoZXRGb250KCA4MCApLFxyXG4gICAgICBtYXhXaWR0aDogMC41ICogZnVuY3Rpb25Ob2RlLndpZHRoLFxyXG4gICAgICBtYXhIZWlnaHQ6IDAuOTUgKiBmdW5jdGlvbk5vZGUuaGVpZ2h0LFxyXG4gICAgICBjZW50ZXI6IGZ1bmN0aW9uTm9kZS5jZW50ZXJcclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCBvcGVyYW5kTm9kZSA9IG5ldyBUZXh0KCAnMycsIHtcclxuICAgICAgZm9udDogbmV3IFBoZXRGb250KCA4MCApLFxyXG4gICAgICBtYXhXaWR0aDogMC41ICogZnVuY3Rpb25Ob2RlLndpZHRoLFxyXG4gICAgICBtYXhIZWlnaHQ6IDAuOTUgKiBmdW5jdGlvbk5vZGUuaGVpZ2h0LFxyXG4gICAgICBjZW50ZXI6IGZ1bmN0aW9uTm9kZS5jZW50ZXJcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBvcGVyYXRvciAmIG9wZXJhbmRcclxuICAgIGNvbnN0IHBhcmVudE5vZGUgPSBuZXcgSEJveCgge1xyXG4gICAgICBjaGlsZHJlbjogWyBvcGVyYXRvck5vZGUsIG9wZXJhbmROb2RlIF0sXHJcbiAgICAgIHNwYWNpbmc6IDYsXHJcbiAgICAgIG1heFdpZHRoOiAwLjUgKiBmdW5jdGlvbk5vZGUud2lkdGgsXHJcbiAgICAgIG1heEhlaWdodDogMC45NSAqIGZ1bmN0aW9uTm9kZS5oZWlnaHQsXHJcbiAgICAgIGNlbnRlcjogZnVuY3Rpb25Ob2RlLmNlbnRlclxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IGljb25Ob2RlID0gbmV3IE5vZGUoIHsgY2hpbGRyZW46IFsgZnVuY3Rpb25Ob2RlLCBwYXJlbnROb2RlIF0gfSApO1xyXG5cclxuICAgIHJldHVybiBuZXcgU2NyZWVuSWNvbiggaWNvbk5vZGUsIG9wdGlvbnMgKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIHRoZSBpY29uIGZvciB0aGUgJ0VxdWF0aW9ucycgc2NyZWVuLCB0aGUgZXF1YXRpb24geSA9IDJ4ICsgMVxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxyXG4gICAqIEByZXR1cm5zIHtOb2RlfVxyXG4gICAqL1xyXG4gIGNyZWF0ZUVxdWF0aW9uc1NjcmVlbkljb246IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cclxuICAgIG9wdGlvbnMgPSBtZXJnZSgge1xyXG4gICAgICBmaWxsOiBGQkNvbG9ycy5FUVVBVElPTlNfU0NSRUVOX0JBQ0tHUk9VTkQsXHJcbiAgICAgIG1heEljb25XaWR0aFByb3BvcnRpb246IDAuNzVcclxuICAgIH0sIG9wdGlvbnMgKTtcclxuXHJcbiAgICBjb25zdCBpY29uTm9kZSA9IG5ldyBTbG9wZUludGVyY2VwdEVxdWF0aW9uTm9kZSggbmV3IFJhdGlvbmFsTnVtYmVyKCAyLCAzICksIFJhdGlvbmFsTnVtYmVyLndpdGhJbnRlZ2VyKCAwICkgKTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFNjcmVlbkljb24oIGljb25Ob2RlLCBvcHRpb25zICk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyB0aGUgaWNvbiBmb3IgdGhlICdNeXN0ZXJ5JyBzY3JlZW4uXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXHJcbiAgICogQHJldHVybnMge1NjcmVlbkljb259XHJcbiAgICovXHJcbiAgY3JlYXRlTXlzdGVyeVNjcmVlbkljb246IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cclxuICAgIG9wdGlvbnMgPSBtZXJnZSgge1xyXG4gICAgICBmaWxsOiBGQkNvbG9ycy5NWVNURVJZX1NDUkVFTl9CQUNLR1JPVU5ELFxyXG4gICAgICBmdW5jdGlvbkZpbGw6ICdyZ2IoIDE0NywgMjMxLCAxMjggKScsXHJcbiAgICAgIHF1ZXN0aW9uTWFya0ZpbGw6ICdibGFjaydcclxuICAgIH0sIG9wdGlvbnMgKTtcclxuXHJcbiAgICBjb25zdCBmdW5jdGlvbk5vZGUgPSBuZXcgRnVuY3Rpb25CYWNrZ3JvdW5kTm9kZSgge1xyXG4gICAgICBmaWxsOiBvcHRpb25zLmZ1bmN0aW9uRmlsbFxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IHRleHROb2RlID0gbmV3IFRleHQoIEZ1bmN0aW9uQnVpbGRlclN0cmluZ3MubXlzdGVyeUNoYXJhY3RlclN0cmluZ1Byb3BlcnR5LCB7XHJcbiAgICAgIGZvbnQ6IG5ldyBQaGV0Rm9udCggeyBzaXplOiA4MCwgd2VpZ2h0OiAnYm9sZCcgfSApLFxyXG4gICAgICBmaWxsOiBvcHRpb25zLnF1ZXN0aW9uTWFya0ZpbGwsXHJcbiAgICAgIG1heFdpZHRoOiAwLjUgKiBmdW5jdGlvbk5vZGUud2lkdGgsXHJcbiAgICAgIG1heEhlaWdodDogMC45NSAqIGZ1bmN0aW9uTm9kZS5oZWlnaHQsXHJcbiAgICAgIGNlbnRlcjogZnVuY3Rpb25Ob2RlLmNlbnRlclxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IGljb25Ob2RlID0gbmV3IE5vZGUoIHsgY2hpbGRyZW46IFsgZnVuY3Rpb25Ob2RlLCB0ZXh0Tm9kZSBdIH0gKTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFNjcmVlbkljb24oIGljb25Ob2RlLCBvcHRpb25zICk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyB0aGUgaWNvbiBmb3IgYSBzY2VuZSBzZWxlY3Rpb24gcmFkaW8gYnV0dG9uLlxyXG4gICAqIEl0IGNvbnNpc3RzIG9mIE4gZnVuY3Rpb25zIGluIHNlcmllcy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBudW1iZXJPZkZ1bmN0aW9uc1xyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cclxuICAgKiBAcmV0dXJucyB7Tm9kZX1cclxuICAgKi9cclxuICBjcmVhdGVTY2VuZUljb246IGZ1bmN0aW9uKCBudW1iZXJPZkZ1bmN0aW9ucywgb3B0aW9ucyApIHtcclxuXHJcbiAgICBvcHRpb25zID0gbWVyZ2UoIHtcclxuICAgICAgY29sb3JzOiBbICdyZ2IoIDE0NywgMjMxLCAxMjkgKScsICdyZ2IoIDIwNSwgMTc1LCAyMzAgKScsICdyZ2IoIDI1NSwgMTIwLCAxMjAgKScgXSxcclxuICAgICAgc2NhbGU6IFJBRElPX0JVVFRPTl9JQ09OX1NDQUxFLFxyXG4gICAgICBsaW5lV2lkdGg6IFJBRElPX0JVVFRPTl9JQ09OX0xJTkVfV0lEVEhcclxuICAgIH0sIG9wdGlvbnMgKTtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIG9wdGlvbnMuY29sb3JzLmxlbmd0aCA+PSBudW1iZXJPZkZ1bmN0aW9ucyApO1xyXG5cclxuICAgIGFzc2VydCAmJiBhc3NlcnQoICFvcHRpb25zLmNoaWxkcmVuICk7XHJcbiAgICBvcHRpb25zLmNoaWxkcmVuID0gW107XHJcbiAgICBsZXQgcHJldmlvdXNGdW5jdGlvbk5vZGUgPSBudWxsO1xyXG5cclxuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IG51bWJlck9mRnVuY3Rpb25zOyBpKysgKSB7XHJcbiAgICAgIGNvbnN0IGZ1bmN0aW9uTm9kZSA9IG5ldyBGdW5jdGlvbkJhY2tncm91bmROb2RlKCB7XHJcbiAgICAgICAgZmlsbDogb3B0aW9ucy5jb2xvcnNbIGkgXSxcclxuICAgICAgICBsaW5lV2lkdGg6IG9wdGlvbnMubGluZVdpZHRoXHJcbiAgICAgIH0gKTtcclxuICAgICAgaWYgKCBwcmV2aW91c0Z1bmN0aW9uTm9kZSApIHtcclxuICAgICAgICBmdW5jdGlvbk5vZGUubGVmdCA9IHByZXZpb3VzRnVuY3Rpb25Ob2RlLnJpZ2h0IC0gcHJldmlvdXNGdW5jdGlvbk5vZGUueEluc2V0IC0gKCAyICogUkFESU9fQlVUVE9OX0lDT05fTElORV9XSURUSCApO1xyXG4gICAgICB9XHJcbiAgICAgIG9wdGlvbnMuY2hpbGRyZW4ucHVzaCggZnVuY3Rpb25Ob2RlICk7XHJcbiAgICAgIHByZXZpb3VzRnVuY3Rpb25Ob2RlID0gZnVuY3Rpb25Ob2RlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBuZXcgTm9kZSggb3B0aW9ucyApO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgdGhlIGljb24gZm9yIHRoZSAnc2VlIGluc2lkZScgY2hlY2tib3gsIHdoaWNoIHNob3dzL2hpZGVzIHdpbmRvd3MgaW4gdGhlIGJ1aWxkZXIuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXHJcbiAgICogQHJldHVybnMge05vZGV9XHJcbiAgICovXHJcbiAgY3JlYXRlU2VlSW5zaWRlSWNvbjogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblxyXG4gICAgb3B0aW9ucyA9IG1lcmdlKCB7XHJcbiAgICAgIGljb25UeXBlOiAnbnVtYmVyJyAvLyB7c3RyaW5nfSB3aGV0aGVyIHRvIHNob3cgYSAnbnVtYmVyJyBvciAnaW1hZ2UnIG9uIHRoZSBjYXJkIGluIHRoZSB3aW5kb3dcclxuICAgIH0sIG9wdGlvbnMgKTtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIG9wdGlvbnMuaWNvblR5cGUgPT09ICdudW1iZXInIHx8IG9wdGlvbnMuaWNvblR5cGUgPT09ICdpbWFnZScgKTtcclxuXHJcbiAgICBjb25zdCBmdW5jdGlvbk5vZGUgPSBuZXcgRnVuY3Rpb25CYWNrZ3JvdW5kTm9kZSgge1xyXG4gICAgICBmaWxsOiAncmdiKCAxNDcsIDIzMSwgMTI5ICknLFxyXG4gICAgICBsaW5lV2lkdGg6IENIRUNLQk9YX0lDT05fTElORV9XSURUSCxcclxuICAgICAgc2NhbGU6IENIRUNLQk9YX0lDT05fU0NBTEVcclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCB3aW5kb3dMZW5ndGggPSAwLjc1ICogZnVuY3Rpb25Ob2RlLmhlaWdodDtcclxuICAgIGNvbnN0IHdpbmRvd05vZGUgPSBuZXcgUmVjdGFuZ2xlKCAwLCAwLCB3aW5kb3dMZW5ndGgsIHdpbmRvd0xlbmd0aCwge1xyXG4gICAgICBjb3JuZXJSYWRpdXM6IDMsXHJcbiAgICAgIGZpbGw6ICd3aGl0ZScsXHJcbiAgICAgIHN0cm9rZTogJ2JsYWNrJyxcclxuICAgICAgbGluZVdpZHRoOiAxLFxyXG4gICAgICBjZW50ZXJYOiBmdW5jdGlvbk5vZGUucmlnaHQgLSAoIEZCQ29uc3RhbnRzLkZVTkNUSU9OX1hfSU5TRVRfRkFDVE9SICogZnVuY3Rpb25Ob2RlLndpZHRoICksXHJcbiAgICAgIGNlbnRlclk6IGZ1bmN0aW9uTm9kZS5jZW50ZXJZXHJcbiAgICB9ICk7XHJcblxyXG4gICAgbGV0IGNvbnRlbnROb2RlID0gbnVsbDtcclxuICAgIGlmICggb3B0aW9ucy5pY29uVHlwZSA9PT0gJ251bWJlcicgKSB7XHJcblxyXG4gICAgICAvLyBudW1iZXIgJzInXHJcbiAgICAgIGNvbnRlbnROb2RlID0gbmV3IFRleHQoICcyJywge1xyXG4gICAgICAgIGZvbnQ6IG5ldyBQaGV0Rm9udCggMjAgKSxcclxuICAgICAgICBtYXhIZWlnaHQ6IDAuODUgKiB3aW5kb3dOb2RlLmhlaWdodFxyXG4gICAgICB9ICk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuXHJcbiAgICAgIC8vIGltYWdlXHJcbiAgICAgIGNvbnRlbnROb2RlID0gbmV3IEltYWdlKCBzdGlja0ZpZ3VyZV9wbmcsIHtcclxuICAgICAgICBtYXhIZWlnaHQ6IDAuNzUgKiB3aW5kb3dOb2RlLmhlaWdodFxyXG4gICAgICB9ICk7XHJcbiAgICB9XHJcbiAgICBjb250ZW50Tm9kZS5jZW50ZXIgPSB3aW5kb3dOb2RlLmNlbnRlcjtcclxuXHJcbiAgICByZXR1cm4gbmV3IE5vZGUoIHtcclxuICAgICAgY2hpbGRyZW46IFsgZnVuY3Rpb25Ob2RlLCB3aW5kb3dOb2RlLCBjb250ZW50Tm9kZSBdXHJcbiAgICB9ICk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyB0aGUgaWNvbiBmb3IgdGhlICdoaWRlIGZ1bmN0aW9ucycgY2hlY2tib3gsIHdoaWNoIGhpZGVzIHRoZSBpZGVudGl0eSBvZiBmdW5jdGlvbnMgaW4gdGhlIGJ1aWxkZXIuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7Tm9kZX1cclxuICAgKi9cclxuICBjcmVhdGVIaWRlRnVuY3Rpb25zSWNvbjogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgY29uc3QgZnVuY3Rpb25Ob2RlID0gbmV3IEZ1bmN0aW9uQmFja2dyb3VuZE5vZGUoIHtcclxuICAgICAgZmlsbDogRkJDb2xvcnMuSElEREVOX0ZVTkNUSU9OLFxyXG4gICAgICBsaW5lV2lkdGg6IENIRUNLQk9YX0lDT05fTElORV9XSURUSCxcclxuICAgICAgc2NhbGU6IENIRUNLQk9YX0lDT05fU0NBTEVcclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCBleWVDbG9zZU5vZGUgPSBuZXcgRXllQ2xvc2VOb2RlKCB7XHJcbiAgICAgIG1heEhlaWdodDogMC42NSAqIGZ1bmN0aW9uTm9kZS5oZWlnaHQsXHJcbiAgICAgIGNlbnRlcjogZnVuY3Rpb25Ob2RlLmNlbnRlclxyXG4gICAgfSApO1xyXG5cclxuICAgIHJldHVybiBuZXcgTm9kZSgge1xyXG4gICAgICBjaGlsZHJlbjogWyBmdW5jdGlvbk5vZGUsIGV5ZUNsb3NlTm9kZSBdXHJcbiAgICB9ICk7XHJcbiAgfVxyXG59O1xyXG5cclxuZnVuY3Rpb25CdWlsZGVyLnJlZ2lzdGVyKCAnRkJJY29uRmFjdG9yeScsIEZCSWNvbkZhY3RvcnkgKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZCSWNvbkZhY3Rvcnk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFVBQVUsTUFBTSxvQ0FBb0M7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