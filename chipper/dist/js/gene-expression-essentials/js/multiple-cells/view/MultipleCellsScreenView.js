// Copyright 2015-2022, University of Colorado Boulder

/**
 * Screen view for the Multiple Cells screen.
 *
 * @author John Blanco
 * @author Aadish Gupta
 */

import Vector2 from '../../../../dot/js/Vector2.js';
import ScreenView from '../../../../joist/js/ScreenView.js';
import ModelViewTransform2 from '../../../../phetcommon/js/view/ModelViewTransform2.js';
import ResetAllButton from '../../../../scenery-phet/js/buttons/ResetAllButton.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import TimeControlNode from '../../../../scenery-phet/js/TimeControlNode.js';
import { Color, Node, Text } from '../../../../scenery/js/imports.js';
import RectangularPushButton from '../../../../sun/js/buttons/RectangularPushButton.js';
import Panel from '../../../../sun/js/Panel.js';
import GEEConstants from '../../common/GEEConstants.js';
import ControllerNode from '../../common/view/ControllerNode.js';
import geneExpressionEssentials from '../../geneExpressionEssentials.js';
import GeneExpressionEssentialsStrings from '../../GeneExpressionEssentialsStrings.js';
import CellProteinSynthesisSimulator from '../model/CellProteinSynthesisSimulator.js';
import MultipleCellsModel from '../model/MultipleCellsModel.js';
import ColorChangingCellNode from './ColorChangingCellNode.js';
import FluorescentCellsPictureDialog from './FluorescentCellsPictureDialog.js';
import ParameterControlAccordionBox from './ParameterControlAccordionBox.js';
import ProteinLevelChartNode from './ProteinLevelChartNode.js';
const affinitiesString = GeneExpressionEssentialsStrings.affinities;
const cellsString = GeneExpressionEssentialsStrings.cells;
const concentrationString = GeneExpressionEssentialsStrings.concentration;
const degradationString = GeneExpressionEssentialsStrings.degradation;
const fastString = GeneExpressionEssentialsStrings.fast;
const highString = GeneExpressionEssentialsStrings.high;
const lowString = GeneExpressionEssentialsStrings.low;
const manyString = GeneExpressionEssentialsStrings.many;
const mRnaDestroyerString = GeneExpressionEssentialsStrings.mRnaDestroyer;
const oneString = GeneExpressionEssentialsStrings.one;
const polymeraseString = GeneExpressionEssentialsStrings.polymerase;
const positiveTranscriptionFactorString = GeneExpressionEssentialsStrings.positiveTranscriptionFactor;
const proteinString = GeneExpressionEssentialsStrings.protein;
const showRealCellsString = GeneExpressionEssentialsStrings.showRealCells;
const slowString = GeneExpressionEssentialsStrings.slow;
class MultipleCellsScreenView extends ScreenView {
  /**
   * @param {MultipleCellsModel} model
   */
  constructor(model) {
    super();
    const self = this;
    this.model = model;

    // Set up the model-view transform. The multiplier factors for the 2nd point can be adjusted to shift the center
    // right or left, and the scale factor can be adjusted to zoom in or out (smaller numbers zoom out, larger ones zoom
    // in).
    this.modelViewTransform = ModelViewTransform2.createSinglePointScaleInvertedYMapping(Vector2.ZERO, new Vector2(this.layoutBounds.width * 0.455, this.layoutBounds.height * 0.56), 1E8 // "zoom factor" - smaller zooms out, larger zooms in
    );

    // dialog constructed lazily because Dialog requires Sim bounds during construction
    let dialog = null;
    const buttonContent = new Text(showRealCellsString, {
      font: new PhetFont(18),
      maxWidth: 140
    });
    const showRealCellsButton = new RectangularPushButton({
      content: buttonContent,
      touchAreaXDilation: 7,
      touchAreaYDilation: 7,
      baseColor: 'yellow',
      cornerRadius: GEEConstants.CORNER_RADIUS,
      listener: () => {
        if (!dialog) {
          dialog = new FluorescentCellsPictureDialog();
        }
        dialog.show();
      }
    });
    showRealCellsButton.left = this.layoutBounds.minX + 10;
    showRealCellsButton.top = this.layoutBounds.minY + 10;
    this.addChild(showRealCellsButton);
    this.proteinLevelChartNode = new ProteinLevelChartNode(model.averageProteinLevelProperty);
    this.addChild(this.proteinLevelChartNode);
    this.proteinLevelChartNode.top = showRealCellsButton.top;
    this.proteinLevelChartNode.left = showRealCellsButton.right + 10;

    // Add the Reset All button.
    const resetAllButton = new ResetAllButton({
      listener: () => {
        this.interruptSubtreeInput(); // cancel user interactions
        model.reset();
        concentrationControlPanel.expandedProperty.reset();
        affinityControlPanel.expandedProperty.reset();
        degradationControlPanel.expandedProperty.reset();
        this.proteinLevelChartNode.reset();
      },
      right: this.layoutBounds.maxX - 10,
      bottom: this.layoutBounds.maxY - 10
    });
    this.addChild(resetAllButton);

    // Add a time control node
    const timeControlNode = new TimeControlNode(model.clockRunningProperty, {
      playPauseStepButtonOptions: {
        playPauseButtonOptions: {
          radius: 23,
          touchAreaDilation: 5
        },
        stepForwardButtonOptions: {
          listener: () => {
            model.stepInTime(0.016);
            this.proteinLevelChartNode.addDataPoint(0.016);
          },
          radius: 15,
          touchAreaDilation: 5
        }
      }
    });
    this.addChild(timeControlNode);
    const cellLayer = new Node();
    const invisibleCellLayer = new Node(); // for performance improvement load all cells at start of the sim
    this.addChild(cellLayer);
    const cellNumberController = new ControllerNode(model.numberOfVisibleCellsProperty, 1, MultipleCellsModel.MaxCells, oneString, manyString);
    const cellNumberControllerNode = new Node();
    cellNumberControllerNode.addChild(cellNumberController);
    const cellNumberLabel = new Text(cellsString, {
      font: new PhetFont({
        size: 15,
        weight: 'bold'
      }),
      maxWidth: 100
    });
    cellNumberControllerNode.addChild(cellNumberLabel);
    cellNumberLabel.centerX = cellNumberController.centerX;
    cellNumberLabel.bottom = cellNumberController.top - 5;
    const cellNumberControllerPanel = new Panel(cellNumberControllerNode, {
      cornerRadius: GEEConstants.CORNER_RADIUS,
      xMargin: 10,
      yMargin: 10,
      fill: new Color(220, 236, 255)
    });
    this.addChild(cellNumberControllerPanel);
    cellNumberControllerPanel.bottom = resetAllButton.bottom;
    cellNumberControllerPanel.centerX = this.proteinLevelChartNode.centerX;
    const cellNodes = [];
    for (let i = 0; i < model.cellList.length; i++) {
      const cellNode = new ColorChangingCellNode(model.cellList[i], this.modelViewTransform);
      cellNodes.push(cellNode);
      invisibleCellLayer.addChild(cellNode);
    }
    function addCellView(addedCellIndex) {
      cellLayer.addChild(cellNodes[addedCellIndex]);
      model.visibleCellList.addItemRemovedListener(function removalListener(removedCell) {
        const removedCellIndex = model.cellList.indexOf(removedCell);
        if (removedCellIndex === addedCellIndex) {
          cellLayer.removeChild(cellNodes[addedCellIndex]);
          model.visibleCellList.removeItemRemovedListener(removalListener);
          cellLayer.setScaleMagnitude(1);
          const scaleFactor = Math.min((cellNumberControllerPanel.top - self.proteinLevelChartNode.bottom) / cellLayer.height, 1);
          cellLayer.setScaleMagnitude(scaleFactor * 0.9);
          cellLayer.centerX = self.proteinLevelChartNode.centerX;
          cellLayer.centerY = self.proteinLevelChartNode.bottom + (cellNumberControllerPanel.top - self.proteinLevelChartNode.bottom) / 2;
        }
      });
      cellLayer.setScaleMagnitude(1);
      const scaleFactor = Math.min((cellNumberControllerPanel.top - self.proteinLevelChartNode.bottom) / cellLayer.height, 1);
      cellLayer.setScaleMagnitude(scaleFactor * 0.9);
      cellLayer.centerX = self.proteinLevelChartNode.centerX;
      cellLayer.centerY = self.proteinLevelChartNode.bottom + (cellNumberControllerPanel.top - self.proteinLevelChartNode.bottom) / 2;
    }

    // Set up an observer of the list of cells in the model so that the view representations can come and go as needed.
    model.visibleCellList.addItemAddedListener(addedCell => {
      addCellView(model.cellList.indexOf(addedCell));
    });
    model.visibleCellList.forEach(cell => {
      addCellView(model.cellList.indexOf(cell));
    });
    const concentrationControllers = [{
      label: positiveTranscriptionFactorString,
      controlProperty: model.transcriptionFactorLevelProperty,
      minValue: CellProteinSynthesisSimulator.TranscriptionFactorCountRange.min,
      maxValue: CellProteinSynthesisSimulator.TranscriptionFactorCountRange.max,
      minLabel: lowString,
      maxLabel: highString,
      logScale: true
    }, {
      label: mRnaDestroyerString,
      controlProperty: model.mRnaDegradationRateProperty,
      minValue: CellProteinSynthesisSimulator.MRNADegradationRateRange.min,
      maxValue: CellProteinSynthesisSimulator.MRNADegradationRateRange.max,
      minLabel: lowString,
      maxLabel: highString,
      logScale: true
    }];
    const concentrationControlPanel = new ParameterControlAccordionBox(concentrationString, concentrationControllers);
    const affinityControllers = [{
      label: positiveTranscriptionFactorString,
      controlProperty: model.transcriptionFactorAssociationProbabilityProperty,
      minValue: CellProteinSynthesisSimulator.TFAssociationProbabilityRange.min,
      maxValue: CellProteinSynthesisSimulator.TFAssociationProbabilityRange.max,
      minLabel: lowString,
      maxLabel: highString,
      logScale: true
    }, {
      label: polymeraseString,
      controlProperty: model.polymeraseAssociationProbabilityProperty,
      minValue: CellProteinSynthesisSimulator.PolymeraseAssociationProbabilityRange.min,
      maxValue: CellProteinSynthesisSimulator.PolymeraseAssociationProbabilityRange.max,
      minLabel: lowString,
      maxLabel: highString,
      logScale: false
    }];
    const affinityControlPanel = new ParameterControlAccordionBox(affinitiesString, affinityControllers);
    const degradationControllers = [{
      label: proteinString,
      controlProperty: model.proteinDegradationRateProperty,
      minValue: CellProteinSynthesisSimulator.ProteinDegradationRange.min,
      maxValue: CellProteinSynthesisSimulator.ProteinDegradationRange.max,
      minLabel: slowString,
      maxLabel: fastString,
      logScale: false
    }];
    const degradationControlPanel = new ParameterControlAccordionBox(degradationString, degradationControllers);
    this.addChild(concentrationControlPanel);
    this.addChild(affinityControlPanel);
    this.addChild(degradationControlPanel);
    concentrationControlPanel.right = this.layoutBounds.maxX - 10;
    concentrationControlPanel.top = this.layoutBounds.minY + 10;
    affinityControlPanel.right = concentrationControlPanel.right;
    affinityControlPanel.top = concentrationControlPanel.bottom + 10;
    degradationControlPanel.right = affinityControlPanel.right;
    degradationControlPanel.top = affinityControlPanel.bottom + 10;
    timeControlNode.bottom = resetAllButton.bottom;
    timeControlNode.right = degradationControlPanel.left - 20;
  }

  /**
   * Step function for the view
   * @param  {number} dt
   * @public
   */
  step(dt) {
    if (this.model.clockRunningProperty.get()) {
      this.proteinLevelChartNode.addDataPoint(dt);
    }
  }
}
geneExpressionEssentials.register('MultipleCellsScreenView', MultipleCellsScreenView);
export default MultipleCellsScreenView;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWZWN0b3IyIiwiU2NyZWVuVmlldyIsIk1vZGVsVmlld1RyYW5zZm9ybTIiLCJSZXNldEFsbEJ1dHRvbiIsIlBoZXRGb250IiwiVGltZUNvbnRyb2xOb2RlIiwiQ29sb3IiLCJOb2RlIiwiVGV4dCIsIlJlY3Rhbmd1bGFyUHVzaEJ1dHRvbiIsIlBhbmVsIiwiR0VFQ29uc3RhbnRzIiwiQ29udHJvbGxlck5vZGUiLCJnZW5lRXhwcmVzc2lvbkVzc2VudGlhbHMiLCJHZW5lRXhwcmVzc2lvbkVzc2VudGlhbHNTdHJpbmdzIiwiQ2VsbFByb3RlaW5TeW50aGVzaXNTaW11bGF0b3IiLCJNdWx0aXBsZUNlbGxzTW9kZWwiLCJDb2xvckNoYW5naW5nQ2VsbE5vZGUiLCJGbHVvcmVzY2VudENlbGxzUGljdHVyZURpYWxvZyIsIlBhcmFtZXRlckNvbnRyb2xBY2NvcmRpb25Cb3giLCJQcm90ZWluTGV2ZWxDaGFydE5vZGUiLCJhZmZpbml0aWVzU3RyaW5nIiwiYWZmaW5pdGllcyIsImNlbGxzU3RyaW5nIiwiY2VsbHMiLCJjb25jZW50cmF0aW9uU3RyaW5nIiwiY29uY2VudHJhdGlvbiIsImRlZ3JhZGF0aW9uU3RyaW5nIiwiZGVncmFkYXRpb24iLCJmYXN0U3RyaW5nIiwiZmFzdCIsImhpZ2hTdHJpbmciLCJoaWdoIiwibG93U3RyaW5nIiwibG93IiwibWFueVN0cmluZyIsIm1hbnkiLCJtUm5hRGVzdHJveWVyU3RyaW5nIiwibVJuYURlc3Ryb3llciIsIm9uZVN0cmluZyIsIm9uZSIsInBvbHltZXJhc2VTdHJpbmciLCJwb2x5bWVyYXNlIiwicG9zaXRpdmVUcmFuc2NyaXB0aW9uRmFjdG9yU3RyaW5nIiwicG9zaXRpdmVUcmFuc2NyaXB0aW9uRmFjdG9yIiwicHJvdGVpblN0cmluZyIsInByb3RlaW4iLCJzaG93UmVhbENlbGxzU3RyaW5nIiwic2hvd1JlYWxDZWxscyIsInNsb3dTdHJpbmciLCJzbG93IiwiTXVsdGlwbGVDZWxsc1NjcmVlblZpZXciLCJjb25zdHJ1Y3RvciIsIm1vZGVsIiwic2VsZiIsIm1vZGVsVmlld1RyYW5zZm9ybSIsImNyZWF0ZVNpbmdsZVBvaW50U2NhbGVJbnZlcnRlZFlNYXBwaW5nIiwiWkVSTyIsImxheW91dEJvdW5kcyIsIndpZHRoIiwiaGVpZ2h0IiwiZGlhbG9nIiwiYnV0dG9uQ29udGVudCIsImZvbnQiLCJtYXhXaWR0aCIsInNob3dSZWFsQ2VsbHNCdXR0b24iLCJjb250ZW50IiwidG91Y2hBcmVhWERpbGF0aW9uIiwidG91Y2hBcmVhWURpbGF0aW9uIiwiYmFzZUNvbG9yIiwiY29ybmVyUmFkaXVzIiwiQ09STkVSX1JBRElVUyIsImxpc3RlbmVyIiwic2hvdyIsImxlZnQiLCJtaW5YIiwidG9wIiwibWluWSIsImFkZENoaWxkIiwicHJvdGVpbkxldmVsQ2hhcnROb2RlIiwiYXZlcmFnZVByb3RlaW5MZXZlbFByb3BlcnR5IiwicmlnaHQiLCJyZXNldEFsbEJ1dHRvbiIsImludGVycnVwdFN1YnRyZWVJbnB1dCIsInJlc2V0IiwiY29uY2VudHJhdGlvbkNvbnRyb2xQYW5lbCIsImV4cGFuZGVkUHJvcGVydHkiLCJhZmZpbml0eUNvbnRyb2xQYW5lbCIsImRlZ3JhZGF0aW9uQ29udHJvbFBhbmVsIiwibWF4WCIsImJvdHRvbSIsIm1heFkiLCJ0aW1lQ29udHJvbE5vZGUiLCJjbG9ja1J1bm5pbmdQcm9wZXJ0eSIsInBsYXlQYXVzZVN0ZXBCdXR0b25PcHRpb25zIiwicGxheVBhdXNlQnV0dG9uT3B0aW9ucyIsInJhZGl1cyIsInRvdWNoQXJlYURpbGF0aW9uIiwic3RlcEZvcndhcmRCdXR0b25PcHRpb25zIiwic3RlcEluVGltZSIsImFkZERhdGFQb2ludCIsImNlbGxMYXllciIsImludmlzaWJsZUNlbGxMYXllciIsImNlbGxOdW1iZXJDb250cm9sbGVyIiwibnVtYmVyT2ZWaXNpYmxlQ2VsbHNQcm9wZXJ0eSIsIk1heENlbGxzIiwiY2VsbE51bWJlckNvbnRyb2xsZXJOb2RlIiwiY2VsbE51bWJlckxhYmVsIiwic2l6ZSIsIndlaWdodCIsImNlbnRlclgiLCJjZWxsTnVtYmVyQ29udHJvbGxlclBhbmVsIiwieE1hcmdpbiIsInlNYXJnaW4iLCJmaWxsIiwiY2VsbE5vZGVzIiwiaSIsImNlbGxMaXN0IiwibGVuZ3RoIiwiY2VsbE5vZGUiLCJwdXNoIiwiYWRkQ2VsbFZpZXciLCJhZGRlZENlbGxJbmRleCIsInZpc2libGVDZWxsTGlzdCIsImFkZEl0ZW1SZW1vdmVkTGlzdGVuZXIiLCJyZW1vdmFsTGlzdGVuZXIiLCJyZW1vdmVkQ2VsbCIsInJlbW92ZWRDZWxsSW5kZXgiLCJpbmRleE9mIiwicmVtb3ZlQ2hpbGQiLCJyZW1vdmVJdGVtUmVtb3ZlZExpc3RlbmVyIiwic2V0U2NhbGVNYWduaXR1ZGUiLCJzY2FsZUZhY3RvciIsIk1hdGgiLCJtaW4iLCJjZW50ZXJZIiwiYWRkSXRlbUFkZGVkTGlzdGVuZXIiLCJhZGRlZENlbGwiLCJmb3JFYWNoIiwiY2VsbCIsImNvbmNlbnRyYXRpb25Db250cm9sbGVycyIsImxhYmVsIiwiY29udHJvbFByb3BlcnR5IiwidHJhbnNjcmlwdGlvbkZhY3RvckxldmVsUHJvcGVydHkiLCJtaW5WYWx1ZSIsIlRyYW5zY3JpcHRpb25GYWN0b3JDb3VudFJhbmdlIiwibWF4VmFsdWUiLCJtYXgiLCJtaW5MYWJlbCIsIm1heExhYmVsIiwibG9nU2NhbGUiLCJtUm5hRGVncmFkYXRpb25SYXRlUHJvcGVydHkiLCJNUk5BRGVncmFkYXRpb25SYXRlUmFuZ2UiLCJhZmZpbml0eUNvbnRyb2xsZXJzIiwidHJhbnNjcmlwdGlvbkZhY3RvckFzc29jaWF0aW9uUHJvYmFiaWxpdHlQcm9wZXJ0eSIsIlRGQXNzb2NpYXRpb25Qcm9iYWJpbGl0eVJhbmdlIiwicG9seW1lcmFzZUFzc29jaWF0aW9uUHJvYmFiaWxpdHlQcm9wZXJ0eSIsIlBvbHltZXJhc2VBc3NvY2lhdGlvblByb2JhYmlsaXR5UmFuZ2UiLCJkZWdyYWRhdGlvbkNvbnRyb2xsZXJzIiwicHJvdGVpbkRlZ3JhZGF0aW9uUmF0ZVByb3BlcnR5IiwiUHJvdGVpbkRlZ3JhZGF0aW9uUmFuZ2UiLCJzdGVwIiwiZHQiLCJnZXQiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIk11bHRpcGxlQ2VsbHNTY3JlZW5WaWV3LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE1LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFNjcmVlbiB2aWV3IGZvciB0aGUgTXVsdGlwbGUgQ2VsbHMgc2NyZWVuLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvaG4gQmxhbmNvXHJcbiAqIEBhdXRob3IgQWFkaXNoIEd1cHRhXHJcbiAqL1xyXG5cclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgU2NyZWVuVmlldyBmcm9tICcuLi8uLi8uLi8uLi9qb2lzdC9qcy9TY3JlZW5WaWV3LmpzJztcclxuaW1wb3J0IE1vZGVsVmlld1RyYW5zZm9ybTIgZnJvbSAnLi4vLi4vLi4vLi4vcGhldGNvbW1vbi9qcy92aWV3L01vZGVsVmlld1RyYW5zZm9ybTIuanMnO1xyXG5pbXBvcnQgUmVzZXRBbGxCdXR0b24gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL2J1dHRvbnMvUmVzZXRBbGxCdXR0b24uanMnO1xyXG5pbXBvcnQgUGhldEZvbnQgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1BoZXRGb250LmpzJztcclxuaW1wb3J0IFRpbWVDb250cm9sTm9kZSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvVGltZUNvbnRyb2xOb2RlLmpzJztcclxuaW1wb3J0IHsgQ29sb3IsIE5vZGUsIFRleHQgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgUmVjdGFuZ3VsYXJQdXNoQnV0dG9uIGZyb20gJy4uLy4uLy4uLy4uL3N1bi9qcy9idXR0b25zL1JlY3Rhbmd1bGFyUHVzaEJ1dHRvbi5qcyc7XHJcbmltcG9ydCBQYW5lbCBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvUGFuZWwuanMnO1xyXG5pbXBvcnQgR0VFQ29uc3RhbnRzIGZyb20gJy4uLy4uL2NvbW1vbi9HRUVDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgQ29udHJvbGxlck5vZGUgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvQ29udHJvbGxlck5vZGUuanMnO1xyXG5pbXBvcnQgZ2VuZUV4cHJlc3Npb25Fc3NlbnRpYWxzIGZyb20gJy4uLy4uL2dlbmVFeHByZXNzaW9uRXNzZW50aWFscy5qcyc7XHJcbmltcG9ydCBHZW5lRXhwcmVzc2lvbkVzc2VudGlhbHNTdHJpbmdzIGZyb20gJy4uLy4uL0dlbmVFeHByZXNzaW9uRXNzZW50aWFsc1N0cmluZ3MuanMnO1xyXG5pbXBvcnQgQ2VsbFByb3RlaW5TeW50aGVzaXNTaW11bGF0b3IgZnJvbSAnLi4vbW9kZWwvQ2VsbFByb3RlaW5TeW50aGVzaXNTaW11bGF0b3IuanMnO1xyXG5pbXBvcnQgTXVsdGlwbGVDZWxsc01vZGVsIGZyb20gJy4uL21vZGVsL011bHRpcGxlQ2VsbHNNb2RlbC5qcyc7XHJcbmltcG9ydCBDb2xvckNoYW5naW5nQ2VsbE5vZGUgZnJvbSAnLi9Db2xvckNoYW5naW5nQ2VsbE5vZGUuanMnO1xyXG5pbXBvcnQgRmx1b3Jlc2NlbnRDZWxsc1BpY3R1cmVEaWFsb2cgZnJvbSAnLi9GbHVvcmVzY2VudENlbGxzUGljdHVyZURpYWxvZy5qcyc7XHJcbmltcG9ydCBQYXJhbWV0ZXJDb250cm9sQWNjb3JkaW9uQm94IGZyb20gJy4vUGFyYW1ldGVyQ29udHJvbEFjY29yZGlvbkJveC5qcyc7XHJcbmltcG9ydCBQcm90ZWluTGV2ZWxDaGFydE5vZGUgZnJvbSAnLi9Qcm90ZWluTGV2ZWxDaGFydE5vZGUuanMnO1xyXG5cclxuY29uc3QgYWZmaW5pdGllc1N0cmluZyA9IEdlbmVFeHByZXNzaW9uRXNzZW50aWFsc1N0cmluZ3MuYWZmaW5pdGllcztcclxuY29uc3QgY2VsbHNTdHJpbmcgPSBHZW5lRXhwcmVzc2lvbkVzc2VudGlhbHNTdHJpbmdzLmNlbGxzO1xyXG5jb25zdCBjb25jZW50cmF0aW9uU3RyaW5nID0gR2VuZUV4cHJlc3Npb25Fc3NlbnRpYWxzU3RyaW5ncy5jb25jZW50cmF0aW9uO1xyXG5jb25zdCBkZWdyYWRhdGlvblN0cmluZyA9IEdlbmVFeHByZXNzaW9uRXNzZW50aWFsc1N0cmluZ3MuZGVncmFkYXRpb247XHJcbmNvbnN0IGZhc3RTdHJpbmcgPSBHZW5lRXhwcmVzc2lvbkVzc2VudGlhbHNTdHJpbmdzLmZhc3Q7XHJcbmNvbnN0IGhpZ2hTdHJpbmcgPSBHZW5lRXhwcmVzc2lvbkVzc2VudGlhbHNTdHJpbmdzLmhpZ2g7XHJcbmNvbnN0IGxvd1N0cmluZyA9IEdlbmVFeHByZXNzaW9uRXNzZW50aWFsc1N0cmluZ3MubG93O1xyXG5jb25zdCBtYW55U3RyaW5nID0gR2VuZUV4cHJlc3Npb25Fc3NlbnRpYWxzU3RyaW5ncy5tYW55O1xyXG5jb25zdCBtUm5hRGVzdHJveWVyU3RyaW5nID0gR2VuZUV4cHJlc3Npb25Fc3NlbnRpYWxzU3RyaW5ncy5tUm5hRGVzdHJveWVyO1xyXG5jb25zdCBvbmVTdHJpbmcgPSBHZW5lRXhwcmVzc2lvbkVzc2VudGlhbHNTdHJpbmdzLm9uZTtcclxuY29uc3QgcG9seW1lcmFzZVN0cmluZyA9IEdlbmVFeHByZXNzaW9uRXNzZW50aWFsc1N0cmluZ3MucG9seW1lcmFzZTtcclxuY29uc3QgcG9zaXRpdmVUcmFuc2NyaXB0aW9uRmFjdG9yU3RyaW5nID0gR2VuZUV4cHJlc3Npb25Fc3NlbnRpYWxzU3RyaW5ncy5wb3NpdGl2ZVRyYW5zY3JpcHRpb25GYWN0b3I7XHJcbmNvbnN0IHByb3RlaW5TdHJpbmcgPSBHZW5lRXhwcmVzc2lvbkVzc2VudGlhbHNTdHJpbmdzLnByb3RlaW47XHJcbmNvbnN0IHNob3dSZWFsQ2VsbHNTdHJpbmcgPSBHZW5lRXhwcmVzc2lvbkVzc2VudGlhbHNTdHJpbmdzLnNob3dSZWFsQ2VsbHM7XHJcbmNvbnN0IHNsb3dTdHJpbmcgPSBHZW5lRXhwcmVzc2lvbkVzc2VudGlhbHNTdHJpbmdzLnNsb3c7XHJcblxyXG5jbGFzcyBNdWx0aXBsZUNlbGxzU2NyZWVuVmlldyBleHRlbmRzIFNjcmVlblZpZXcge1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge011bHRpcGxlQ2VsbHNNb2RlbH0gbW9kZWxcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvciggbW9kZWwgKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICB0aGlzLm1vZGVsID0gbW9kZWw7XHJcblxyXG4gICAgLy8gU2V0IHVwIHRoZSBtb2RlbC12aWV3IHRyYW5zZm9ybS4gVGhlIG11bHRpcGxpZXIgZmFjdG9ycyBmb3IgdGhlIDJuZCBwb2ludCBjYW4gYmUgYWRqdXN0ZWQgdG8gc2hpZnQgdGhlIGNlbnRlclxyXG4gICAgLy8gcmlnaHQgb3IgbGVmdCwgYW5kIHRoZSBzY2FsZSBmYWN0b3IgY2FuIGJlIGFkanVzdGVkIHRvIHpvb20gaW4gb3Igb3V0IChzbWFsbGVyIG51bWJlcnMgem9vbSBvdXQsIGxhcmdlciBvbmVzIHpvb21cclxuICAgIC8vIGluKS5cclxuICAgIHRoaXMubW9kZWxWaWV3VHJhbnNmb3JtID0gTW9kZWxWaWV3VHJhbnNmb3JtMi5jcmVhdGVTaW5nbGVQb2ludFNjYWxlSW52ZXJ0ZWRZTWFwcGluZyhcclxuICAgICAgVmVjdG9yMi5aRVJPLFxyXG4gICAgICBuZXcgVmVjdG9yMiggdGhpcy5sYXlvdXRCb3VuZHMud2lkdGggKiAwLjQ1NSwgdGhpcy5sYXlvdXRCb3VuZHMuaGVpZ2h0ICogMC41NiApLFxyXG4gICAgICAxRTggLy8gXCJ6b29tIGZhY3RvclwiIC0gc21hbGxlciB6b29tcyBvdXQsIGxhcmdlciB6b29tcyBpblxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBkaWFsb2cgY29uc3RydWN0ZWQgbGF6aWx5IGJlY2F1c2UgRGlhbG9nIHJlcXVpcmVzIFNpbSBib3VuZHMgZHVyaW5nIGNvbnN0cnVjdGlvblxyXG4gICAgbGV0IGRpYWxvZyA9IG51bGw7XHJcblxyXG4gICAgY29uc3QgYnV0dG9uQ29udGVudCA9IG5ldyBUZXh0KCBzaG93UmVhbENlbGxzU3RyaW5nLCB7XHJcbiAgICAgIGZvbnQ6IG5ldyBQaGV0Rm9udCggMTggKSxcclxuICAgICAgbWF4V2lkdGg6IDE0MFxyXG4gICAgfSApO1xyXG4gICAgY29uc3Qgc2hvd1JlYWxDZWxsc0J1dHRvbiA9IG5ldyBSZWN0YW5ndWxhclB1c2hCdXR0b24oIHtcclxuICAgICAgY29udGVudDogYnV0dG9uQ29udGVudCxcclxuICAgICAgdG91Y2hBcmVhWERpbGF0aW9uOiA3LFxyXG4gICAgICB0b3VjaEFyZWFZRGlsYXRpb246IDcsXHJcbiAgICAgIGJhc2VDb2xvcjogJ3llbGxvdycsXHJcbiAgICAgIGNvcm5lclJhZGl1czogR0VFQ29uc3RhbnRzLkNPUk5FUl9SQURJVVMsXHJcbiAgICAgIGxpc3RlbmVyOiAoKSA9PiB7XHJcbiAgICAgICAgaWYgKCAhZGlhbG9nICkge1xyXG4gICAgICAgICAgZGlhbG9nID0gbmV3IEZsdW9yZXNjZW50Q2VsbHNQaWN0dXJlRGlhbG9nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRpYWxvZy5zaG93KCk7XHJcbiAgICAgIH1cclxuICAgIH0gKTtcclxuXHJcbiAgICBzaG93UmVhbENlbGxzQnV0dG9uLmxlZnQgPSB0aGlzLmxheW91dEJvdW5kcy5taW5YICsgMTA7XHJcbiAgICBzaG93UmVhbENlbGxzQnV0dG9uLnRvcCA9IHRoaXMubGF5b3V0Qm91bmRzLm1pblkgKyAxMDtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHNob3dSZWFsQ2VsbHNCdXR0b24gKTtcclxuXHJcbiAgICB0aGlzLnByb3RlaW5MZXZlbENoYXJ0Tm9kZSA9IG5ldyBQcm90ZWluTGV2ZWxDaGFydE5vZGUoIG1vZGVsLmF2ZXJhZ2VQcm90ZWluTGV2ZWxQcm9wZXJ0eSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggdGhpcy5wcm90ZWluTGV2ZWxDaGFydE5vZGUgKTtcclxuICAgIHRoaXMucHJvdGVpbkxldmVsQ2hhcnROb2RlLnRvcCA9IHNob3dSZWFsQ2VsbHNCdXR0b24udG9wO1xyXG4gICAgdGhpcy5wcm90ZWluTGV2ZWxDaGFydE5vZGUubGVmdCA9IHNob3dSZWFsQ2VsbHNCdXR0b24ucmlnaHQgKyAxMDtcclxuXHJcbiAgICAvLyBBZGQgdGhlIFJlc2V0IEFsbCBidXR0b24uXHJcbiAgICBjb25zdCByZXNldEFsbEJ1dHRvbiA9IG5ldyBSZXNldEFsbEJ1dHRvbigge1xyXG4gICAgICBsaXN0ZW5lcjogKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaW50ZXJydXB0U3VidHJlZUlucHV0KCk7IC8vIGNhbmNlbCB1c2VyIGludGVyYWN0aW9uc1xyXG4gICAgICAgIG1vZGVsLnJlc2V0KCk7XHJcbiAgICAgICAgY29uY2VudHJhdGlvbkNvbnRyb2xQYW5lbC5leHBhbmRlZFByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICAgICAgYWZmaW5pdHlDb250cm9sUGFuZWwuZXhwYW5kZWRQcm9wZXJ0eS5yZXNldCgpO1xyXG4gICAgICAgIGRlZ3JhZGF0aW9uQ29udHJvbFBhbmVsLmV4cGFuZGVkUHJvcGVydHkucmVzZXQoKTtcclxuICAgICAgICB0aGlzLnByb3RlaW5MZXZlbENoYXJ0Tm9kZS5yZXNldCgpO1xyXG4gICAgICB9LFxyXG4gICAgICByaWdodDogdGhpcy5sYXlvdXRCb3VuZHMubWF4WCAtIDEwLFxyXG4gICAgICBib3R0b206IHRoaXMubGF5b3V0Qm91bmRzLm1heFkgLSAxMFxyXG4gICAgfSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggcmVzZXRBbGxCdXR0b24gKTtcclxuXHJcbiAgICAvLyBBZGQgYSB0aW1lIGNvbnRyb2wgbm9kZVxyXG4gICAgY29uc3QgdGltZUNvbnRyb2xOb2RlID0gbmV3IFRpbWVDb250cm9sTm9kZSggbW9kZWwuY2xvY2tSdW5uaW5nUHJvcGVydHksIHtcclxuICAgICAgcGxheVBhdXNlU3RlcEJ1dHRvbk9wdGlvbnM6IHtcclxuICAgICAgICBwbGF5UGF1c2VCdXR0b25PcHRpb25zOiB7XHJcbiAgICAgICAgICByYWRpdXM6IDIzLFxyXG4gICAgICAgICAgdG91Y2hBcmVhRGlsYXRpb246IDVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN0ZXBGb3J3YXJkQnV0dG9uT3B0aW9uczoge1xyXG4gICAgICAgICAgbGlzdGVuZXI6ICgpID0+IHtcclxuICAgICAgICAgICAgbW9kZWwuc3RlcEluVGltZSggMC4wMTYgKTtcclxuICAgICAgICAgICAgdGhpcy5wcm90ZWluTGV2ZWxDaGFydE5vZGUuYWRkRGF0YVBvaW50KCAwLjAxNiApO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHJhZGl1czogMTUsXHJcbiAgICAgICAgICB0b3VjaEFyZWFEaWxhdGlvbjogNVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggdGltZUNvbnRyb2xOb2RlICk7XHJcblxyXG4gICAgY29uc3QgY2VsbExheWVyID0gbmV3IE5vZGUoKTtcclxuICAgIGNvbnN0IGludmlzaWJsZUNlbGxMYXllciA9IG5ldyBOb2RlKCk7IC8vIGZvciBwZXJmb3JtYW5jZSBpbXByb3ZlbWVudCBsb2FkIGFsbCBjZWxscyBhdCBzdGFydCBvZiB0aGUgc2ltXHJcbiAgICB0aGlzLmFkZENoaWxkKCBjZWxsTGF5ZXIgKTtcclxuXHJcbiAgICBjb25zdCBjZWxsTnVtYmVyQ29udHJvbGxlciA9IG5ldyBDb250cm9sbGVyTm9kZShcclxuICAgICAgbW9kZWwubnVtYmVyT2ZWaXNpYmxlQ2VsbHNQcm9wZXJ0eSxcclxuICAgICAgMSxcclxuICAgICAgTXVsdGlwbGVDZWxsc01vZGVsLk1heENlbGxzLFxyXG4gICAgICBvbmVTdHJpbmcsXHJcbiAgICAgIG1hbnlTdHJpbmdcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgY2VsbE51bWJlckNvbnRyb2xsZXJOb2RlID0gbmV3IE5vZGUoKTtcclxuICAgIGNlbGxOdW1iZXJDb250cm9sbGVyTm9kZS5hZGRDaGlsZCggY2VsbE51bWJlckNvbnRyb2xsZXIgKTtcclxuXHJcbiAgICBjb25zdCBjZWxsTnVtYmVyTGFiZWwgPSBuZXcgVGV4dCggY2VsbHNTdHJpbmcsIHtcclxuICAgICAgZm9udDogbmV3IFBoZXRGb250KCB7IHNpemU6IDE1LCB3ZWlnaHQ6ICdib2xkJyB9ICksXHJcbiAgICAgIG1heFdpZHRoOiAxMDBcclxuICAgIH0gKTtcclxuXHJcbiAgICBjZWxsTnVtYmVyQ29udHJvbGxlck5vZGUuYWRkQ2hpbGQoIGNlbGxOdW1iZXJMYWJlbCApO1xyXG4gICAgY2VsbE51bWJlckxhYmVsLmNlbnRlclggPSBjZWxsTnVtYmVyQ29udHJvbGxlci5jZW50ZXJYO1xyXG4gICAgY2VsbE51bWJlckxhYmVsLmJvdHRvbSA9IGNlbGxOdW1iZXJDb250cm9sbGVyLnRvcCAtIDU7XHJcblxyXG4gICAgY29uc3QgY2VsbE51bWJlckNvbnRyb2xsZXJQYW5lbCA9IG5ldyBQYW5lbCggY2VsbE51bWJlckNvbnRyb2xsZXJOb2RlLCB7XHJcbiAgICAgIGNvcm5lclJhZGl1czogR0VFQ29uc3RhbnRzLkNPUk5FUl9SQURJVVMsXHJcbiAgICAgIHhNYXJnaW46IDEwLFxyXG4gICAgICB5TWFyZ2luOiAxMCxcclxuICAgICAgZmlsbDogbmV3IENvbG9yKCAyMjAsIDIzNiwgMjU1IClcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLmFkZENoaWxkKCBjZWxsTnVtYmVyQ29udHJvbGxlclBhbmVsICk7XHJcbiAgICBjZWxsTnVtYmVyQ29udHJvbGxlclBhbmVsLmJvdHRvbSA9IHJlc2V0QWxsQnV0dG9uLmJvdHRvbTtcclxuICAgIGNlbGxOdW1iZXJDb250cm9sbGVyUGFuZWwuY2VudGVyWCA9IHRoaXMucHJvdGVpbkxldmVsQ2hhcnROb2RlLmNlbnRlclg7XHJcblxyXG4gICAgY29uc3QgY2VsbE5vZGVzID0gW107XHJcblxyXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgbW9kZWwuY2VsbExpc3QubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgIGNvbnN0IGNlbGxOb2RlID0gbmV3IENvbG9yQ2hhbmdpbmdDZWxsTm9kZSggbW9kZWwuY2VsbExpc3RbIGkgXSwgdGhpcy5tb2RlbFZpZXdUcmFuc2Zvcm0gKTtcclxuICAgICAgY2VsbE5vZGVzLnB1c2goIGNlbGxOb2RlICk7XHJcbiAgICAgIGludmlzaWJsZUNlbGxMYXllci5hZGRDaGlsZCggY2VsbE5vZGUgKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhZGRDZWxsVmlldyggYWRkZWRDZWxsSW5kZXggKSB7XHJcbiAgICAgIGNlbGxMYXllci5hZGRDaGlsZCggY2VsbE5vZGVzWyBhZGRlZENlbGxJbmRleCBdICk7XHJcblxyXG4gICAgICBtb2RlbC52aXNpYmxlQ2VsbExpc3QuYWRkSXRlbVJlbW92ZWRMaXN0ZW5lciggZnVuY3Rpb24gcmVtb3ZhbExpc3RlbmVyKCByZW1vdmVkQ2VsbCApIHtcclxuICAgICAgICBjb25zdCByZW1vdmVkQ2VsbEluZGV4ID0gbW9kZWwuY2VsbExpc3QuaW5kZXhPZiggcmVtb3ZlZENlbGwgKTtcclxuICAgICAgICBpZiAoIHJlbW92ZWRDZWxsSW5kZXggPT09IGFkZGVkQ2VsbEluZGV4ICkge1xyXG4gICAgICAgICAgY2VsbExheWVyLnJlbW92ZUNoaWxkKCBjZWxsTm9kZXNbIGFkZGVkQ2VsbEluZGV4IF0gKTtcclxuICAgICAgICAgIG1vZGVsLnZpc2libGVDZWxsTGlzdC5yZW1vdmVJdGVtUmVtb3ZlZExpc3RlbmVyKCByZW1vdmFsTGlzdGVuZXIgKTtcclxuICAgICAgICAgIGNlbGxMYXllci5zZXRTY2FsZU1hZ25pdHVkZSggMSApO1xyXG4gICAgICAgICAgY29uc3Qgc2NhbGVGYWN0b3IgPSBNYXRoLm1pbiggKCBjZWxsTnVtYmVyQ29udHJvbGxlclBhbmVsLnRvcCAtIHNlbGYucHJvdGVpbkxldmVsQ2hhcnROb2RlLmJvdHRvbSApIC8gY2VsbExheWVyLmhlaWdodCwgMSApO1xyXG4gICAgICAgICAgY2VsbExheWVyLnNldFNjYWxlTWFnbml0dWRlKCBzY2FsZUZhY3RvciAqIDAuOSApO1xyXG4gICAgICAgICAgY2VsbExheWVyLmNlbnRlclggPSBzZWxmLnByb3RlaW5MZXZlbENoYXJ0Tm9kZS5jZW50ZXJYO1xyXG4gICAgICAgICAgY2VsbExheWVyLmNlbnRlclkgPSBzZWxmLnByb3RlaW5MZXZlbENoYXJ0Tm9kZS5ib3R0b20gK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIGNlbGxOdW1iZXJDb250cm9sbGVyUGFuZWwudG9wIC0gc2VsZi5wcm90ZWluTGV2ZWxDaGFydE5vZGUuYm90dG9tICkgLyAyO1xyXG4gICAgICAgIH1cclxuICAgICAgfSApO1xyXG4gICAgICBjZWxsTGF5ZXIuc2V0U2NhbGVNYWduaXR1ZGUoIDEgKTtcclxuICAgICAgY29uc3Qgc2NhbGVGYWN0b3IgPSBNYXRoLm1pbiggKCBjZWxsTnVtYmVyQ29udHJvbGxlclBhbmVsLnRvcCAtIHNlbGYucHJvdGVpbkxldmVsQ2hhcnROb2RlLmJvdHRvbSApIC8gY2VsbExheWVyLmhlaWdodCwgMSApO1xyXG4gICAgICBjZWxsTGF5ZXIuc2V0U2NhbGVNYWduaXR1ZGUoIHNjYWxlRmFjdG9yICogMC45ICk7XHJcbiAgICAgIGNlbGxMYXllci5jZW50ZXJYID0gc2VsZi5wcm90ZWluTGV2ZWxDaGFydE5vZGUuY2VudGVyWDtcclxuICAgICAgY2VsbExheWVyLmNlbnRlclkgPSBzZWxmLnByb3RlaW5MZXZlbENoYXJ0Tm9kZS5ib3R0b20gK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICggY2VsbE51bWJlckNvbnRyb2xsZXJQYW5lbC50b3AgLSBzZWxmLnByb3RlaW5MZXZlbENoYXJ0Tm9kZS5ib3R0b20gKSAvIDI7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8vIFNldCB1cCBhbiBvYnNlcnZlciBvZiB0aGUgbGlzdCBvZiBjZWxscyBpbiB0aGUgbW9kZWwgc28gdGhhdCB0aGUgdmlldyByZXByZXNlbnRhdGlvbnMgY2FuIGNvbWUgYW5kIGdvIGFzIG5lZWRlZC5cclxuICAgIG1vZGVsLnZpc2libGVDZWxsTGlzdC5hZGRJdGVtQWRkZWRMaXN0ZW5lciggYWRkZWRDZWxsID0+IHtcclxuICAgICAgYWRkQ2VsbFZpZXcoIG1vZGVsLmNlbGxMaXN0LmluZGV4T2YoIGFkZGVkQ2VsbCApICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgbW9kZWwudmlzaWJsZUNlbGxMaXN0LmZvckVhY2goIGNlbGwgPT4ge1xyXG4gICAgICBhZGRDZWxsVmlldyggbW9kZWwuY2VsbExpc3QuaW5kZXhPZiggY2VsbCApICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgY29uY2VudHJhdGlvbkNvbnRyb2xsZXJzID0gW1xyXG4gICAgICB7XHJcbiAgICAgICAgbGFiZWw6IHBvc2l0aXZlVHJhbnNjcmlwdGlvbkZhY3RvclN0cmluZyxcclxuICAgICAgICBjb250cm9sUHJvcGVydHk6IG1vZGVsLnRyYW5zY3JpcHRpb25GYWN0b3JMZXZlbFByb3BlcnR5LFxyXG4gICAgICAgIG1pblZhbHVlOiBDZWxsUHJvdGVpblN5bnRoZXNpc1NpbXVsYXRvci5UcmFuc2NyaXB0aW9uRmFjdG9yQ291bnRSYW5nZS5taW4sXHJcbiAgICAgICAgbWF4VmFsdWU6IENlbGxQcm90ZWluU3ludGhlc2lzU2ltdWxhdG9yLlRyYW5zY3JpcHRpb25GYWN0b3JDb3VudFJhbmdlLm1heCxcclxuICAgICAgICBtaW5MYWJlbDogbG93U3RyaW5nLFxyXG4gICAgICAgIG1heExhYmVsOiBoaWdoU3RyaW5nLFxyXG4gICAgICAgIGxvZ1NjYWxlOiB0cnVlXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBsYWJlbDogbVJuYURlc3Ryb3llclN0cmluZyxcclxuICAgICAgICBjb250cm9sUHJvcGVydHk6IG1vZGVsLm1SbmFEZWdyYWRhdGlvblJhdGVQcm9wZXJ0eSxcclxuICAgICAgICBtaW5WYWx1ZTogQ2VsbFByb3RlaW5TeW50aGVzaXNTaW11bGF0b3IuTVJOQURlZ3JhZGF0aW9uUmF0ZVJhbmdlLm1pbixcclxuICAgICAgICBtYXhWYWx1ZTogQ2VsbFByb3RlaW5TeW50aGVzaXNTaW11bGF0b3IuTVJOQURlZ3JhZGF0aW9uUmF0ZVJhbmdlLm1heCxcclxuICAgICAgICBtaW5MYWJlbDogbG93U3RyaW5nLFxyXG4gICAgICAgIG1heExhYmVsOiBoaWdoU3RyaW5nLFxyXG4gICAgICAgIGxvZ1NjYWxlOiB0cnVlXHJcbiAgICAgIH1cclxuICAgIF07XHJcblxyXG4gICAgY29uc3QgY29uY2VudHJhdGlvbkNvbnRyb2xQYW5lbCA9IG5ldyBQYXJhbWV0ZXJDb250cm9sQWNjb3JkaW9uQm94KFxyXG4gICAgICBjb25jZW50cmF0aW9uU3RyaW5nLFxyXG4gICAgICBjb25jZW50cmF0aW9uQ29udHJvbGxlcnNcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgYWZmaW5pdHlDb250cm9sbGVycyA9IFtcclxuICAgICAge1xyXG4gICAgICAgIGxhYmVsOiBwb3NpdGl2ZVRyYW5zY3JpcHRpb25GYWN0b3JTdHJpbmcsXHJcbiAgICAgICAgY29udHJvbFByb3BlcnR5OiBtb2RlbC50cmFuc2NyaXB0aW9uRmFjdG9yQXNzb2NpYXRpb25Qcm9iYWJpbGl0eVByb3BlcnR5LFxyXG4gICAgICAgIG1pblZhbHVlOiBDZWxsUHJvdGVpblN5bnRoZXNpc1NpbXVsYXRvci5URkFzc29jaWF0aW9uUHJvYmFiaWxpdHlSYW5nZS5taW4sXHJcbiAgICAgICAgbWF4VmFsdWU6IENlbGxQcm90ZWluU3ludGhlc2lzU2ltdWxhdG9yLlRGQXNzb2NpYXRpb25Qcm9iYWJpbGl0eVJhbmdlLm1heCxcclxuICAgICAgICBtaW5MYWJlbDogbG93U3RyaW5nLFxyXG4gICAgICAgIG1heExhYmVsOiBoaWdoU3RyaW5nLFxyXG4gICAgICAgIGxvZ1NjYWxlOiB0cnVlXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBsYWJlbDogcG9seW1lcmFzZVN0cmluZyxcclxuICAgICAgICBjb250cm9sUHJvcGVydHk6IG1vZGVsLnBvbHltZXJhc2VBc3NvY2lhdGlvblByb2JhYmlsaXR5UHJvcGVydHksXHJcbiAgICAgICAgbWluVmFsdWU6IENlbGxQcm90ZWluU3ludGhlc2lzU2ltdWxhdG9yLlBvbHltZXJhc2VBc3NvY2lhdGlvblByb2JhYmlsaXR5UmFuZ2UubWluLFxyXG4gICAgICAgIG1heFZhbHVlOiBDZWxsUHJvdGVpblN5bnRoZXNpc1NpbXVsYXRvci5Qb2x5bWVyYXNlQXNzb2NpYXRpb25Qcm9iYWJpbGl0eVJhbmdlLm1heCxcclxuICAgICAgICBtaW5MYWJlbDogbG93U3RyaW5nLFxyXG4gICAgICAgIG1heExhYmVsOiBoaWdoU3RyaW5nLFxyXG4gICAgICAgIGxvZ1NjYWxlOiBmYWxzZVxyXG4gICAgICB9XHJcbiAgICBdO1xyXG5cclxuICAgIGNvbnN0IGFmZmluaXR5Q29udHJvbFBhbmVsID0gbmV3IFBhcmFtZXRlckNvbnRyb2xBY2NvcmRpb25Cb3goXHJcbiAgICAgIGFmZmluaXRpZXNTdHJpbmcsXHJcbiAgICAgIGFmZmluaXR5Q29udHJvbGxlcnNcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgZGVncmFkYXRpb25Db250cm9sbGVycyA9IFtcclxuICAgICAge1xyXG4gICAgICAgIGxhYmVsOiBwcm90ZWluU3RyaW5nLFxyXG4gICAgICAgIGNvbnRyb2xQcm9wZXJ0eTogbW9kZWwucHJvdGVpbkRlZ3JhZGF0aW9uUmF0ZVByb3BlcnR5LFxyXG4gICAgICAgIG1pblZhbHVlOiBDZWxsUHJvdGVpblN5bnRoZXNpc1NpbXVsYXRvci5Qcm90ZWluRGVncmFkYXRpb25SYW5nZS5taW4sXHJcbiAgICAgICAgbWF4VmFsdWU6IENlbGxQcm90ZWluU3ludGhlc2lzU2ltdWxhdG9yLlByb3RlaW5EZWdyYWRhdGlvblJhbmdlLm1heCxcclxuICAgICAgICBtaW5MYWJlbDogc2xvd1N0cmluZyxcclxuICAgICAgICBtYXhMYWJlbDogZmFzdFN0cmluZyxcclxuICAgICAgICBsb2dTY2FsZTogZmFsc2VcclxuICAgICAgfVxyXG4gICAgXTtcclxuXHJcbiAgICBjb25zdCBkZWdyYWRhdGlvbkNvbnRyb2xQYW5lbCA9IG5ldyBQYXJhbWV0ZXJDb250cm9sQWNjb3JkaW9uQm94KFxyXG4gICAgICBkZWdyYWRhdGlvblN0cmluZyxcclxuICAgICAgZGVncmFkYXRpb25Db250cm9sbGVyc1xyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLmFkZENoaWxkKCBjb25jZW50cmF0aW9uQ29udHJvbFBhbmVsICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBhZmZpbml0eUNvbnRyb2xQYW5lbCApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggZGVncmFkYXRpb25Db250cm9sUGFuZWwgKTtcclxuXHJcbiAgICBjb25jZW50cmF0aW9uQ29udHJvbFBhbmVsLnJpZ2h0ID0gdGhpcy5sYXlvdXRCb3VuZHMubWF4WCAtIDEwO1xyXG4gICAgY29uY2VudHJhdGlvbkNvbnRyb2xQYW5lbC50b3AgPSB0aGlzLmxheW91dEJvdW5kcy5taW5ZICsgMTA7XHJcblxyXG4gICAgYWZmaW5pdHlDb250cm9sUGFuZWwucmlnaHQgPSBjb25jZW50cmF0aW9uQ29udHJvbFBhbmVsLnJpZ2h0O1xyXG4gICAgYWZmaW5pdHlDb250cm9sUGFuZWwudG9wID0gY29uY2VudHJhdGlvbkNvbnRyb2xQYW5lbC5ib3R0b20gKyAxMDtcclxuXHJcbiAgICBkZWdyYWRhdGlvbkNvbnRyb2xQYW5lbC5yaWdodCA9IGFmZmluaXR5Q29udHJvbFBhbmVsLnJpZ2h0O1xyXG4gICAgZGVncmFkYXRpb25Db250cm9sUGFuZWwudG9wID0gYWZmaW5pdHlDb250cm9sUGFuZWwuYm90dG9tICsgMTA7XHJcblxyXG4gICAgdGltZUNvbnRyb2xOb2RlLmJvdHRvbSA9IHJlc2V0QWxsQnV0dG9uLmJvdHRvbTtcclxuICAgIHRpbWVDb250cm9sTm9kZS5yaWdodCA9IGRlZ3JhZGF0aW9uQ29udHJvbFBhbmVsLmxlZnQgLSAyMDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFN0ZXAgZnVuY3Rpb24gZm9yIHRoZSB2aWV3XHJcbiAgICogQHBhcmFtICB7bnVtYmVyfSBkdFxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBzdGVwKCBkdCApIHtcclxuICAgIGlmICggdGhpcy5tb2RlbC5jbG9ja1J1bm5pbmdQcm9wZXJ0eS5nZXQoKSApIHtcclxuICAgICAgdGhpcy5wcm90ZWluTGV2ZWxDaGFydE5vZGUuYWRkRGF0YVBvaW50KCBkdCApO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZ2VuZUV4cHJlc3Npb25Fc3NlbnRpYWxzLnJlZ2lzdGVyKCAnTXVsdGlwbGVDZWxsc1NjcmVlblZpZXcnLCBNdWx0aXBsZUNlbGxzU2NyZWVuVmlldyApO1xyXG5leHBvcnQgZGVmYXVsdCBNdWx0aXBsZUNlbGxzU2NyZWVuVmlldzsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxPQUFPLE1BQU0sK0JBQStCO0FBQ25ELE9BQU9DLFVBQVUsTUFBTSxvQ0FBb0M7QUFDM0QsT0FBT0MsbUJBQW1CLE1BQU0sdURBQXVEO0FBQ3ZGLE9BQU9DLGNBQWMsTUFBTSx1REFBdUQ7QUFDbEYsT0FBT0MsUUFBUSxNQUFNLHlDQUF5QztBQUM5RCxPQUFPQyxlQUFlLE1BQU0sZ0RBQWdEO0FBQzVFLFNBQVNDLEtBQUssRUFBRUMsSUFBSSxFQUFFQyxJQUFJLFFBQVEsbUNBQW1DO0FBQ3JFLE9BQU9DLHFCQUFxQixNQUFNLHFEQUFxRDtBQUN2RixPQUFPQyxLQUFLLE1BQU0sNkJBQTZCO0FBQy9DLE9BQU9DLFlBQVksTUFBTSw4QkFBOEI7QUFDdkQsT0FBT0MsY0FBYyxNQUFNLHFDQUFxQztBQUNoRSxPQUFPQyx3QkFBd0IsTUFBTSxtQ0FBbUM7QUFDeEUsT0FBT0MsK0JBQStCLE1BQU0sMENBQTBDO0FBQ3RGLE9BQU9D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