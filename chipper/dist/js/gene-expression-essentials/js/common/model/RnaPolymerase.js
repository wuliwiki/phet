// Copyright 2015-2021, University of Colorado Boulder

/**
 * Class that represents RNA polymerase in the model.
 *
 * @author John Blanco
 * @author Mohamed Safi
 * @author Aadish Gupta
 */

import dotRandom from '../../../../dot/js/dotRandom.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import { Color } from '../../../../scenery/js/imports.js';
import geneExpressionEssentials from '../../geneExpressionEssentials.js';
import RnaPolymeraseAttachmentStateMachine from './attachment-state-machines/RnaPolymeraseAttachmentStateMachine.js';
import BioShapeUtils from './BioShapeUtils.js';
import MobileBiomolecule from './MobileBiomolecule.js';
import ShapeUtils from './ShapeUtils.js';
import StubGeneExpressionModel from './StubGeneExpressionModel.js';

// Overall size of the polymerase molecule.
const WIDTH = 340; // picometers
const HEIGHT = 480; // picometers

// Offset from the center of the molecule to the position where mRNA should emerge when transcription is occurring.
// This is determined empirically, and may need to change if the shape is changed.
const MESSENGER_RNA_GENERATION_OFFSET = new Vector2(-WIDTH * 0.4, HEIGHT * 0.4);

// Set of points that outline the basic, non-distorted shape of this molecule. The shape is meant to look like
// illustrations in "The Machinery of Life" by David Goodsell.
const SHAPE_POINTS = [new Vector2(0, HEIGHT / 2),
// Middle top.
new Vector2(WIDTH / 2, HEIGHT * 0.25), new Vector2(WIDTH * 0.35, -HEIGHT * 0.25), new Vector2(0, -HEIGHT / 2),
// Middle bottom.
new Vector2(-WIDTH * 0.35, -HEIGHT * 0.25), new Vector2(-WIDTH / 2, HEIGHT * 0.25)];

// Colors used by this molecule.
const NOMINAL_COLOR = new Color(0, 153, 210);
const CONFORMED_COLOR = Color.CYAN;

// Direction vectors when polymerase detaches from DNA
const UP_VECTOR = new Vector2(0, 1);
const DOWN_VECTOR = new Vector2(0, -1);
class RnaPolymerase extends MobileBiomolecule {
  /**
   * @param {GeneExpressionModel} model
   * @param {Vector2} position
   */
  constructor(model, position) {
    model = model || new StubGeneExpressionModel();
    super(model, RnaPolymerase.createShape(), NOMINAL_COLOR);
    position = position || new Vector2(0, 0);
    this.messengerRnaGenerationOffset = MESSENGER_RNA_GENERATION_OFFSET; // @public

    // Copy of the attachment state machine reference from base class, but with the more specific type.
    this.rnaPolymeraseAttachmentStateMachine = this.attachmentStateMachine; // @public
    this.setPosition(position);
  }

  /**
   * @override
   * Overridden to provide attachment behavior that is unique to polymerase.
   * @returns {RnaPolymeraseAttachmentStateMachine}
   * @public
   */
  createAttachmentStateMachine() {
    return new RnaPolymeraseAttachmentStateMachine(this);
  }

  /**
   * @override
   * @param {number} changeFactor
   * @public
   */
  changeConformation(changeFactor) {
    // seed value chosen empirically through trial and error
    const newUntranslatedShape = BioShapeUtils.createdDistortedRoundedShapeFromPoints(SHAPE_POINTS, changeFactor, 45);
    this.shapeProperty.set(newUntranslatedShape);
    this.colorProperty.set(Color.interpolateRGBA(NOMINAL_COLOR, CONFORMED_COLOR, changeFactor));
  }

  /**
   * @override
   * @returns {AttachmentSite}
   * @public
   */
  proposeAttachments() {
    // propose attachments to the DNA strand
    return this.model.getDnaMolecule().considerProposalFromRnaPolymerase(this);
  }

  /**
   * @override
   * @returns {Vector2}
   * @public
   */
  getDetachDirection() {
    // Randomly either up or down when detaching from DNA.
    return dotRandom.nextBoolean() ? UP_VECTOR : DOWN_VECTOR;
  }

  /**
   * @param {boolean} recycleMode
   * @public
   */
  setRecycleMode(recycleMode) {
    this.rnaPolymeraseAttachmentStateMachine.setRecycleMode(recycleMode);
  }

  /**
   * @param {Bounds2} recycleReturnZone
   * @public
   */
  addRecycleReturnZone(recycleReturnZone) {
    this.rnaPolymeraseAttachmentStateMachine.addRecycleReturnZone(recycleReturnZone);
  }

  /**
   * @returns {Shape}
   * @public
   */
  static createShape() {
    // Shape is meant to look like illustrations in "The Machinery of Life" by David Goodsell.
    return ShapeUtils.createRoundedShapeFromPoints(SHAPE_POINTS);
  }
}
geneExpressionEssentials.register('RnaPolymerase', RnaPolymerase);
export default RnaPolymerase;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3RSYW5kb20iLCJWZWN0b3IyIiwiQ29sb3IiLCJnZW5lRXhwcmVzc2lvbkVzc2VudGlhbHMiLCJSbmFQb2x5bWVyYXNlQXR0YWNobWVudFN0YXRlTWFjaGluZSIsIkJpb1NoYXBlVXRpbHMiLCJNb2JpbGVCaW9tb2xlY3VsZSIsIlNoYXBlVXRpbHMiLCJTdHViR2VuZUV4cHJlc3Npb25Nb2RlbCIsIldJRFRIIiwiSEVJR0hUIiwiTUVTU0VOR0VSX1JOQV9HRU5FUkFUSU9OX09GRlNFVCIsIlNIQVBFX1BPSU5UUyIsIk5PTUlOQUxfQ09MT1IiLCJDT05GT1JNRURfQ09MT1IiLCJDWUFOIiwiVVBfVkVDVE9SIiwiRE9XTl9WRUNUT1IiLCJSbmFQb2x5bWVyYXNlIiwiY29uc3RydWN0b3IiLCJtb2RlbCIsInBvc2l0aW9uIiwiY3JlYXRlU2hhcGUiLCJtZXNzZW5nZXJSbmFHZW5lcmF0aW9uT2Zmc2V0Iiwicm5hUG9seW1lcmFzZUF0dGFjaG1lbnRTdGF0ZU1hY2hpbmUiLCJhdHRhY2htZW50U3RhdGVNYWNoaW5lIiwic2V0UG9zaXRpb24iLCJjcmVhdGVBdHRhY2htZW50U3RhdGVNYWNoaW5lIiwiY2hhbmdlQ29uZm9ybWF0aW9uIiwiY2hhbmdlRmFjdG9yIiwibmV3VW50cmFuc2xhdGVkU2hhcGUiLCJjcmVhdGVkRGlzdG9ydGVkUm91bmRlZFNoYXBlRnJvbVBvaW50cyIsInNoYXBlUHJvcGVydHkiLCJzZXQiLCJjb2xvclByb3BlcnR5IiwiaW50ZXJwb2xhdGVSR0JBIiwicHJvcG9zZUF0dGFjaG1lbnRzIiwiZ2V0RG5hTW9sZWN1bGUiLCJjb25zaWRlclByb3Bvc2FsRnJvbVJuYVBvbHltZXJhc2UiLCJnZXREZXRhY2hEaXJlY3Rpb24iLCJuZXh0Qm9vbGVhbiIsInNldFJlY3ljbGVNb2RlIiwicmVjeWNsZU1vZGUiLCJhZGRSZWN5Y2xlUmV0dXJuWm9uZSIsInJlY3ljbGVSZXR1cm5ab25lIiwiY3JlYXRlUm91bmRlZFNoYXBlRnJvbVBvaW50cyIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiUm5hUG9seW1lcmFzZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNS0yMDIxLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBDbGFzcyB0aGF0IHJlcHJlc2VudHMgUk5BIHBvbHltZXJhc2UgaW4gdGhlIG1vZGVsLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvaG4gQmxhbmNvXHJcbiAqIEBhdXRob3IgTW9oYW1lZCBTYWZpXHJcbiAqIEBhdXRob3IgQWFkaXNoIEd1cHRhXHJcbiAqL1xyXG5cclxuaW1wb3J0IGRvdFJhbmRvbSBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvZG90UmFuZG9tLmpzJztcclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgeyBDb2xvciB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBnZW5lRXhwcmVzc2lvbkVzc2VudGlhbHMgZnJvbSAnLi4vLi4vZ2VuZUV4cHJlc3Npb25Fc3NlbnRpYWxzLmpzJztcclxuaW1wb3J0IFJuYVBvbHltZXJhc2VBdHRhY2htZW50U3RhdGVNYWNoaW5lIGZyb20gJy4vYXR0YWNobWVudC1zdGF0ZS1tYWNoaW5lcy9SbmFQb2x5bWVyYXNlQXR0YWNobWVudFN0YXRlTWFjaGluZS5qcyc7XHJcbmltcG9ydCBCaW9TaGFwZVV0aWxzIGZyb20gJy4vQmlvU2hhcGVVdGlscy5qcyc7XHJcbmltcG9ydCBNb2JpbGVCaW9tb2xlY3VsZSBmcm9tICcuL01vYmlsZUJpb21vbGVjdWxlLmpzJztcclxuaW1wb3J0IFNoYXBlVXRpbHMgZnJvbSAnLi9TaGFwZVV0aWxzLmpzJztcclxuaW1wb3J0IFN0dWJHZW5lRXhwcmVzc2lvbk1vZGVsIGZyb20gJy4vU3R1YkdlbmVFeHByZXNzaW9uTW9kZWwuanMnO1xyXG5cclxuLy8gT3ZlcmFsbCBzaXplIG9mIHRoZSBwb2x5bWVyYXNlIG1vbGVjdWxlLlxyXG5jb25zdCBXSURUSCA9IDM0MDsgICAvLyBwaWNvbWV0ZXJzXHJcbmNvbnN0IEhFSUdIVCA9IDQ4MDsgIC8vIHBpY29tZXRlcnNcclxuXHJcbi8vIE9mZnNldCBmcm9tIHRoZSBjZW50ZXIgb2YgdGhlIG1vbGVjdWxlIHRvIHRoZSBwb3NpdGlvbiB3aGVyZSBtUk5BIHNob3VsZCBlbWVyZ2Ugd2hlbiB0cmFuc2NyaXB0aW9uIGlzIG9jY3VycmluZy5cclxuLy8gVGhpcyBpcyBkZXRlcm1pbmVkIGVtcGlyaWNhbGx5LCBhbmQgbWF5IG5lZWQgdG8gY2hhbmdlIGlmIHRoZSBzaGFwZSBpcyBjaGFuZ2VkLlxyXG5jb25zdCBNRVNTRU5HRVJfUk5BX0dFTkVSQVRJT05fT0ZGU0VUID0gbmV3IFZlY3RvcjIoIC1XSURUSCAqIDAuNCwgSEVJR0hUICogMC40ICk7XHJcblxyXG4vLyBTZXQgb2YgcG9pbnRzIHRoYXQgb3V0bGluZSB0aGUgYmFzaWMsIG5vbi1kaXN0b3J0ZWQgc2hhcGUgb2YgdGhpcyBtb2xlY3VsZS4gVGhlIHNoYXBlIGlzIG1lYW50IHRvIGxvb2sgbGlrZVxyXG4vLyBpbGx1c3RyYXRpb25zIGluIFwiVGhlIE1hY2hpbmVyeSBvZiBMaWZlXCIgYnkgRGF2aWQgR29vZHNlbGwuXHJcbmNvbnN0IFNIQVBFX1BPSU5UUyA9IFsgbmV3IFZlY3RvcjIoIDAsIEhFSUdIVCAvIDIgKSwgLy8gTWlkZGxlIHRvcC5cclxuICBuZXcgVmVjdG9yMiggV0lEVEggLyAyLCBIRUlHSFQgKiAwLjI1ICksXHJcbiAgbmV3IFZlY3RvcjIoIFdJRFRIICogMC4zNSwgLUhFSUdIVCAqIDAuMjUgKSxcclxuICBuZXcgVmVjdG9yMiggMCwgLUhFSUdIVCAvIDIgKSwgLy8gTWlkZGxlIGJvdHRvbS5cclxuICBuZXcgVmVjdG9yMiggLVdJRFRIICogMC4zNSwgLUhFSUdIVCAqIDAuMjUgKSxcclxuICBuZXcgVmVjdG9yMiggLVdJRFRIIC8gMiwgSEVJR0hUICogMC4yNSApXHJcbl07XHJcblxyXG4vLyBDb2xvcnMgdXNlZCBieSB0aGlzIG1vbGVjdWxlLlxyXG5jb25zdCBOT01JTkFMX0NPTE9SID0gbmV3IENvbG9yKCAwLCAxNTMsIDIxMCApO1xyXG5jb25zdCBDT05GT1JNRURfQ09MT1IgPSBDb2xvci5DWUFOO1xyXG5cclxuLy8gRGlyZWN0aW9uIHZlY3RvcnMgd2hlbiBwb2x5bWVyYXNlIGRldGFjaGVzIGZyb20gRE5BXHJcbmNvbnN0IFVQX1ZFQ1RPUiA9IG5ldyBWZWN0b3IyKCAwLCAxICk7XHJcbmNvbnN0IERPV05fVkVDVE9SID0gbmV3IFZlY3RvcjIoIDAsIC0xICk7XHJcblxyXG5jbGFzcyBSbmFQb2x5bWVyYXNlIGV4dGVuZHMgTW9iaWxlQmlvbW9sZWN1bGUge1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge0dlbmVFeHByZXNzaW9uTW9kZWx9IG1vZGVsXHJcbiAgICogQHBhcmFtIHtWZWN0b3IyfSBwb3NpdGlvblxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBtb2RlbCwgcG9zaXRpb24gKSB7XHJcbiAgICBtb2RlbCA9IG1vZGVsIHx8IG5ldyBTdHViR2VuZUV4cHJlc3Npb25Nb2RlbCgpO1xyXG4gICAgc3VwZXIoIG1vZGVsLCBSbmFQb2x5bWVyYXNlLmNyZWF0ZVNoYXBlKCksIE5PTUlOQUxfQ09MT1IgKTtcclxuICAgIHBvc2l0aW9uID0gcG9zaXRpb24gfHwgbmV3IFZlY3RvcjIoIDAsIDAgKTtcclxuICAgIHRoaXMubWVzc2VuZ2VyUm5hR2VuZXJhdGlvbk9mZnNldCA9IE1FU1NFTkdFUl9STkFfR0VORVJBVElPTl9PRkZTRVQ7IC8vIEBwdWJsaWNcclxuXHJcbiAgICAvLyBDb3B5IG9mIHRoZSBhdHRhY2htZW50IHN0YXRlIG1hY2hpbmUgcmVmZXJlbmNlIGZyb20gYmFzZSBjbGFzcywgYnV0IHdpdGggdGhlIG1vcmUgc3BlY2lmaWMgdHlwZS5cclxuICAgIHRoaXMucm5hUG9seW1lcmFzZUF0dGFjaG1lbnRTdGF0ZU1hY2hpbmUgPSB0aGlzLmF0dGFjaG1lbnRTdGF0ZU1hY2hpbmU7IC8vIEBwdWJsaWNcclxuICAgIHRoaXMuc2V0UG9zaXRpb24oIHBvc2l0aW9uICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAb3ZlcnJpZGVcclxuICAgKiBPdmVycmlkZGVuIHRvIHByb3ZpZGUgYXR0YWNobWVudCBiZWhhdmlvciB0aGF0IGlzIHVuaXF1ZSB0byBwb2x5bWVyYXNlLlxyXG4gICAqIEByZXR1cm5zIHtSbmFQb2x5bWVyYXNlQXR0YWNobWVudFN0YXRlTWFjaGluZX1cclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgY3JlYXRlQXR0YWNobWVudFN0YXRlTWFjaGluZSgpIHtcclxuICAgIHJldHVybiBuZXcgUm5hUG9seW1lcmFzZUF0dGFjaG1lbnRTdGF0ZU1hY2hpbmUoIHRoaXMgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjaGFuZ2VGYWN0b3JcclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgY2hhbmdlQ29uZm9ybWF0aW9uKCBjaGFuZ2VGYWN0b3IgKSB7XHJcblxyXG4gICAgLy8gc2VlZCB2YWx1ZSBjaG9zZW4gZW1waXJpY2FsbHkgdGhyb3VnaCB0cmlhbCBhbmQgZXJyb3JcclxuICAgIGNvbnN0IG5ld1VudHJhbnNsYXRlZFNoYXBlID0gQmlvU2hhcGVVdGlscy5jcmVhdGVkRGlzdG9ydGVkUm91bmRlZFNoYXBlRnJvbVBvaW50cyggU0hBUEVfUE9JTlRTLCBjaGFuZ2VGYWN0b3IsIDQ1ICk7XHJcbiAgICB0aGlzLnNoYXBlUHJvcGVydHkuc2V0KCBuZXdVbnRyYW5zbGF0ZWRTaGFwZSApO1xyXG4gICAgdGhpcy5jb2xvclByb3BlcnR5LnNldCggQ29sb3IuaW50ZXJwb2xhdGVSR0JBKCBOT01JTkFMX0NPTE9SLCBDT05GT1JNRURfQ09MT1IsIGNoYW5nZUZhY3RvciApICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAb3ZlcnJpZGVcclxuICAgKiBAcmV0dXJucyB7QXR0YWNobWVudFNpdGV9XHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG4gIHByb3Bvc2VBdHRhY2htZW50cygpIHtcclxuXHJcbiAgICAvLyBwcm9wb3NlIGF0dGFjaG1lbnRzIHRvIHRoZSBETkEgc3RyYW5kXHJcbiAgICByZXR1cm4gdGhpcy5tb2RlbC5nZXREbmFNb2xlY3VsZSgpLmNvbnNpZGVyUHJvcG9zYWxGcm9tUm5hUG9seW1lcmFzZSggdGhpcyApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQG92ZXJyaWRlXHJcbiAgICogQHJldHVybnMge1ZlY3RvcjJ9XHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG4gIGdldERldGFjaERpcmVjdGlvbigpIHtcclxuXHJcbiAgICAvLyBSYW5kb21seSBlaXRoZXIgdXAgb3IgZG93biB3aGVuIGRldGFjaGluZyBmcm9tIEROQS5cclxuICAgIHJldHVybiBkb3RSYW5kb20ubmV4dEJvb2xlYW4oKSA/IFVQX1ZFQ1RPUiA6IERPV05fVkVDVE9SO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSByZWN5Y2xlTW9kZVxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBzZXRSZWN5Y2xlTW9kZSggcmVjeWNsZU1vZGUgKSB7XHJcbiAgICB0aGlzLnJuYVBvbHltZXJhc2VBdHRhY2htZW50U3RhdGVNYWNoaW5lLnNldFJlY3ljbGVNb2RlKCByZWN5Y2xlTW9kZSApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtCb3VuZHMyfSByZWN5Y2xlUmV0dXJuWm9uZVxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBhZGRSZWN5Y2xlUmV0dXJuWm9uZSggcmVjeWNsZVJldHVyblpvbmUgKSB7XHJcbiAgICB0aGlzLnJuYVBvbHltZXJhc2VBdHRhY2htZW50U3RhdGVNYWNoaW5lLmFkZFJlY3ljbGVSZXR1cm5ab25lKCByZWN5Y2xlUmV0dXJuWm9uZSApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHJldHVybnMge1NoYXBlfVxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBzdGF0aWMgY3JlYXRlU2hhcGUoKSB7XHJcblxyXG4gICAgLy8gU2hhcGUgaXMgbWVhbnQgdG8gbG9vayBsaWtlIGlsbHVzdHJhdGlvbnMgaW4gXCJUaGUgTWFjaGluZXJ5IG9mIExpZmVcIiBieSBEYXZpZCBHb29kc2VsbC5cclxuICAgIHJldHVybiBTaGFwZVV0aWxzLmNyZWF0ZVJvdW5kZWRTaGFwZUZyb21Qb2ludHMoIFNIQVBFX1BPSU5UUyApO1xyXG4gIH1cclxufVxyXG5cclxuZ2VuZUV4cHJlc3Npb25Fc3NlbnRpYWxzLnJlZ2lzdGVyKCAnUm5hUG9seW1lcmFzZScsIFJuYVBvbHltZXJhc2UgKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFJuYVBvbHltZXJhc2U7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsU0FBUyxNQUFNLGlDQUFpQztBQUN2RCxPQUFPQyxPQUFPLE1BQU0sK0JBQStCO0FBQ25ELFNBQVNDLEtBQUssUUFBUSxtQ0FBbUM7QUFDekQsT0FBT0Msd0JBQXdCLE1BQU0sbUNBQW1DO0FBQ3hFLE9BQU9DLG1DQUFtQyxNQUFNLG9FQUFvRTtBQUNwSCxPQUFPQyxhQUFhLE1BQU0sb0JBQW9CO0FBQzlDLE9BQU9DLGlCQUFpQixNQUFNLHdCQUF3QjtBQUN0RCxPQUFPQyxVQUFVLE1BQU0saUJBQWlCO0FBQ3hDLE9BQU9DLHVCQUF1QixNQUFNLDhCQUE4Qjs7QUFFbEU7QUFDQSxNQUFNQyxLQUFLLEdBQUcsR0FBRyxDQUFDLENBQUc7QUFDckIsTUFBTUMsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFFOztBQUVyQjtBQUNBO0FBQ0EsTUFBTUMsK0JBQStCLEdBQUcsSUFBSVYsT0FBTyxDQUFFLENBQUNRLEtBQUssR0FBRyxHQUFHLEVBQUVDLE1BQU0s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