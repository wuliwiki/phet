// Copyright 2015-2021, University of Colorado Boulder

/**
 * One of the states for MRnaDestroyerAttachmentStateMachine. Destroyer enters this state when it attached to mRNA
 *
 * @author John Blanco
 * @author Mohamed Safi
 * @author Aadish Gupta
 */

import dotRandom from '../../../../../dot/js/dotRandom.js';
import Range from '../../../../../dot/js/Range.js';
import geneExpressionEssentials from '../../../geneExpressionEssentials.js';
import MessengerRnaFragment from '../MessengerRnaFragment.js';
import DestroyerTrackingRnaMotionStrategy from '../motion-strategies/DestroyerTrackingRnaMotionStrategy.js';
import AttachmentState from './AttachmentState.js';

// constants

// Scalar velocity for transcription.
const RNA_DESTRUCTION_RATE = 750; // Picometers per second.

// Range of lengths for mRNA fragments.
const MRNA_FRAGMENT_LENGTH_RANGE = new Range(100, 400); // In picometers.

class MRnaDestroyerAttachedState extends AttachmentState {
  /**
   * @param {MRnaDestroyerAttachmentStateMachine} MRnaDestroyerAttachmentStateMachine
   */
  constructor(MRnaDestroyerAttachmentStateMachine) {
    super();

    // @public (read-ony) {MRnaDestroyerAttachmentStateMachine}
    this.MRnaDestroyerAttachmentStateMachine = MRnaDestroyerAttachmentStateMachine;
    this.messengerRnaFragment = null; //@private
    this.targetFragmentLength = 0; //@private
  }

  /**
   * @override
   * @param {AttachmentStateMachine} asm
   * @param {number} dt
   * @public
   */
  step(asm, dt) {
    const biomolecule = this.MRnaDestroyerAttachmentStateMachine.biomolecule;

    // Verify that state is consistent.
    assert && assert(asm.attachmentSite !== null);
    assert && assert(asm.attachmentSite.attachedOrAttachingMoleculeProperty.get() === biomolecule);

    // Grow the mRNA fragment, release it if it is time to do so.
    if (this.messengerRnaFragment === null) {
      this.messengerRnaFragment = new MessengerRnaFragment(biomolecule.getModel(), biomolecule.getPosition());
      this.messengerRnaFragment.movableByUserProperty.set(false);
      biomolecule.getModel().addMobileBiomolecule(this.messengerRnaFragment);
      this.targetFragmentLength = MRNA_FRAGMENT_LENGTH_RANGE.min + dotRandom.nextDouble() * MRNA_FRAGMENT_LENGTH_RANGE.getLength();
    }
    this.messengerRnaFragment.addLength(RNA_DESTRUCTION_RATE * dt);
    if (this.messengerRnaFragment.getLength() >= this.targetFragmentLength) {
      // Time to release this fragment.
      this.messengerRnaFragment.releaseFromDestroyer();
      this.messengerRnaFragment = null;
    }

    // Advance the destruction of the mRNA.  Destruction must proceed more slowly when the mRNA is being synthesized
    // to avoid a situation where it gets destroyed more rapidly than it is created.
    const destructionRate = biomolecule.getMessengerRnaBeingDestroyed().beingSynthesizedProperty.get() ? RNA_DESTRUCTION_RATE / 2 : RNA_DESTRUCTION_RATE;
    const destructionComplete = this.MRnaDestroyerAttachmentStateMachine.mRnaDestroyer.advanceMessengerRnaDestruction(destructionRate * dt);
    if (destructionComplete) {
      // Detach the current mRNA fragment.
      if (this.messengerRnaFragment !== null) {
        this.messengerRnaFragment.releaseFromDestroyer();
        this.messengerRnaFragment = null;
      }

      // Remove the messenger RNA that is now destroyed from the model. There should be no visual representation left
      // to it at this point.
      biomolecule.getModel().removeMessengerRna(this.MRnaDestroyerAttachmentStateMachine.mRnaDestroyer.getMessengerRnaBeingDestroyed());
      this.MRnaDestroyerAttachmentStateMachine.mRnaDestroyer.clearMessengerRnaBeingDestroyed();

      // Release this destroyer to wander in the cytoplasm.
      asm.detach();
    }
  }

  /**
   * @override
   * @param {AttachmentStateMachine} asm
   * @public
   */
  entered(asm) {
    const mRnaDestroyer = this.MRnaDestroyerAttachmentStateMachine.mRnaDestroyer;
    mRnaDestroyer.initiateMessengerRnaDestruction();
    mRnaDestroyer.setMotionStrategy(new DestroyerTrackingRnaMotionStrategy(mRnaDestroyer));

    // Turn off user interaction while mRNA is being destroyed.
    asm.biomolecule.movableByUserProperty.set(false);
  }
}
geneExpressionEssentials.register('MRnaDestroyerAttachedState', MRnaDestroyerAttachedState);
export default MRnaDestroyerAttachedState;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3RSYW5kb20iLCJSYW5nZSIsImdlbmVFeHByZXNzaW9uRXNzZW50aWFscyIsIk1lc3NlbmdlclJuYUZyYWdtZW50IiwiRGVzdHJveWVyVHJhY2tpbmdSbmFNb3Rpb25TdHJhdGVneSIsIkF0dGFjaG1lbnRTdGF0ZSIsIlJOQV9ERVNUUlVDVElPTl9SQVRFIiwiTVJOQV9GUkFHTUVOVF9MRU5HVEhfUkFOR0UiLCJNUm5hRGVzdHJveWVyQXR0YWNoZWRTdGF0ZSIsImNvbnN0cnVjdG9yIiwiTVJuYURlc3Ryb3llckF0dGFjaG1lbnRTdGF0ZU1hY2hpbmUiLCJtZXNzZW5nZXJSbmFGcmFnbWVudCIsInRhcmdldEZyYWdtZW50TGVuZ3RoIiwic3RlcCIsImFzbSIsImR0IiwiYmlvbW9sZWN1bGUiLCJhc3NlcnQiLCJhdHRhY2htZW50U2l0ZSIsImF0dGFjaGVkT3JBdHRhY2hpbmdNb2xlY3VsZVByb3BlcnR5IiwiZ2V0IiwiZ2V0TW9kZWwiLCJnZXRQb3NpdGlvbiIsIm1vdmFibGVCeVVzZXJQcm9wZXJ0eSIsInNldCIsImFkZE1vYmlsZUJpb21vbGVjdWxlIiwibWluIiwibmV4dERvdWJsZSIsImdldExlbmd0aCIsImFkZExlbmd0aCIsInJlbGVhc2VGcm9tRGVzdHJveWVyIiwiZGVzdHJ1Y3Rpb25SYXRlIiwiZ2V0TWVzc2VuZ2VyUm5hQmVpbmdEZXN0cm95ZWQiLCJiZWluZ1N5bnRoZXNpemVkUHJvcGVydHkiLCJkZXN0cnVjdGlvbkNvbXBsZXRlIiwibVJuYURlc3Ryb3llciIsImFkdmFuY2VNZXNzZW5nZXJSbmFEZXN0cnVjdGlvbiIsInJlbW92ZU1lc3NlbmdlclJuYSIsImNsZWFyTWVzc2VuZ2VyUm5hQmVpbmdEZXN0cm95ZWQiLCJkZXRhY2giLCJlbnRlcmVkIiwiaW5pdGlhdGVNZXNzZW5nZXJSbmFEZXN0cnVjdGlvbiIsInNldE1vdGlvblN0cmF0ZWd5IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJNUm5hRGVzdHJveWVyQXR0YWNoZWRTdGF0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNS0yMDIxLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBPbmUgb2YgdGhlIHN0YXRlcyBmb3IgTVJuYURlc3Ryb3llckF0dGFjaG1lbnRTdGF0ZU1hY2hpbmUuIERlc3Ryb3llciBlbnRlcnMgdGhpcyBzdGF0ZSB3aGVuIGl0IGF0dGFjaGVkIHRvIG1STkFcclxuICpcclxuICogQGF1dGhvciBKb2huIEJsYW5jb1xyXG4gKiBAYXV0aG9yIE1vaGFtZWQgU2FmaVxyXG4gKiBAYXV0aG9yIEFhZGlzaCBHdXB0YVxyXG4gKi9cclxuXHJcbmltcG9ydCBkb3RSYW5kb20gZnJvbSAnLi4vLi4vLi4vLi4vLi4vZG90L2pzL2RvdFJhbmRvbS5qcyc7XHJcbmltcG9ydCBSYW5nZSBmcm9tICcuLi8uLi8uLi8uLi8uLi9kb3QvanMvUmFuZ2UuanMnO1xyXG5pbXBvcnQgZ2VuZUV4cHJlc3Npb25Fc3NlbnRpYWxzIGZyb20gJy4uLy4uLy4uL2dlbmVFeHByZXNzaW9uRXNzZW50aWFscy5qcyc7XHJcbmltcG9ydCBNZXNzZW5nZXJSbmFGcmFnbWVudCBmcm9tICcuLi9NZXNzZW5nZXJSbmFGcmFnbWVudC5qcyc7XHJcbmltcG9ydCBEZXN0cm95ZXJUcmFja2luZ1JuYU1vdGlvblN0cmF0ZWd5IGZyb20gJy4uL21vdGlvbi1zdHJhdGVnaWVzL0Rlc3Ryb3llclRyYWNraW5nUm5hTW90aW9uU3RyYXRlZ3kuanMnO1xyXG5pbXBvcnQgQXR0YWNobWVudFN0YXRlIGZyb20gJy4vQXR0YWNobWVudFN0YXRlLmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5cclxuLy8gU2NhbGFyIHZlbG9jaXR5IGZvciB0cmFuc2NyaXB0aW9uLlxyXG5jb25zdCBSTkFfREVTVFJVQ1RJT05fUkFURSA9IDc1MDsgLy8gUGljb21ldGVycyBwZXIgc2Vjb25kLlxyXG5cclxuLy8gUmFuZ2Ugb2YgbGVuZ3RocyBmb3IgbVJOQSBmcmFnbWVudHMuXHJcbmNvbnN0IE1STkFfRlJBR01FTlRfTEVOR1RIX1JBTkdFID0gbmV3IFJhbmdlKCAxMDAsIDQwMCApOyAvLyBJbiBwaWNvbWV0ZXJzLlxyXG5cclxuY2xhc3MgTVJuYURlc3Ryb3llckF0dGFjaGVkU3RhdGUgZXh0ZW5kcyBBdHRhY2htZW50U3RhdGUge1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge01SbmFEZXN0cm95ZXJBdHRhY2htZW50U3RhdGVNYWNoaW5lfSBNUm5hRGVzdHJveWVyQXR0YWNobWVudFN0YXRlTWFjaGluZVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBNUm5hRGVzdHJveWVyQXR0YWNobWVudFN0YXRlTWFjaGluZSApIHtcclxuICAgIHN1cGVyKCk7XHJcblxyXG4gICAgLy8gQHB1YmxpYyAocmVhZC1vbnkpIHtNUm5hRGVzdHJveWVyQXR0YWNobWVudFN0YXRlTWFjaGluZX1cclxuICAgIHRoaXMuTVJuYURlc3Ryb3llckF0dGFjaG1lbnRTdGF0ZU1hY2hpbmUgPSBNUm5hRGVzdHJveWVyQXR0YWNobWVudFN0YXRlTWFjaGluZTtcclxuXHJcbiAgICB0aGlzLm1lc3NlbmdlclJuYUZyYWdtZW50ID0gbnVsbDsgLy9AcHJpdmF0ZVxyXG4gICAgdGhpcy50YXJnZXRGcmFnbWVudExlbmd0aCA9IDA7IC8vQHByaXZhdGVcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqIEBwYXJhbSB7QXR0YWNobWVudFN0YXRlTWFjaGluZX0gYXNtXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGR0XHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG4gIHN0ZXAoIGFzbSwgZHQgKSB7XHJcbiAgICBjb25zdCBiaW9tb2xlY3VsZSA9IHRoaXMuTVJuYURlc3Ryb3llckF0dGFjaG1lbnRTdGF0ZU1hY2hpbmUuYmlvbW9sZWN1bGU7XHJcblxyXG4gICAgLy8gVmVyaWZ5IHRoYXQgc3RhdGUgaXMgY29uc2lzdGVudC5cclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIGFzbS5hdHRhY2htZW50U2l0ZSAhPT0gbnVsbCApO1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggYXNtLmF0dGFjaG1lbnRTaXRlLmF0dGFjaGVkT3JBdHRhY2hpbmdNb2xlY3VsZVByb3BlcnR5LmdldCgpID09PSBiaW9tb2xlY3VsZSApO1xyXG5cclxuICAgIC8vIEdyb3cgdGhlIG1STkEgZnJhZ21lbnQsIHJlbGVhc2UgaXQgaWYgaXQgaXMgdGltZSB0byBkbyBzby5cclxuICAgIGlmICggdGhpcy5tZXNzZW5nZXJSbmFGcmFnbWVudCA9PT0gbnVsbCApIHtcclxuICAgICAgdGhpcy5tZXNzZW5nZXJSbmFGcmFnbWVudCA9IG5ldyBNZXNzZW5nZXJSbmFGcmFnbWVudCggYmlvbW9sZWN1bGUuZ2V0TW9kZWwoKSwgYmlvbW9sZWN1bGUuZ2V0UG9zaXRpb24oKSApO1xyXG4gICAgICB0aGlzLm1lc3NlbmdlclJuYUZyYWdtZW50Lm1vdmFibGVCeVVzZXJQcm9wZXJ0eS5zZXQoIGZhbHNlICk7XHJcbiAgICAgIGJpb21vbGVjdWxlLmdldE1vZGVsKCkuYWRkTW9iaWxlQmlvbW9sZWN1bGUoIHRoaXMubWVzc2VuZ2VyUm5hRnJhZ21lbnQgKTtcclxuICAgICAgdGhpcy50YXJnZXRGcmFnbWVudExlbmd0aCA9IE1STkFfRlJBR01FTlRfTEVOR1RIX1JBTkdFLm1pbiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3RSYW5kb20ubmV4dERvdWJsZSgpICogTVJOQV9GUkFHTUVOVF9MRU5HVEhfUkFOR0UuZ2V0TGVuZ3RoKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLm1lc3NlbmdlclJuYUZyYWdtZW50LmFkZExlbmd0aCggUk5BX0RFU1RSVUNUSU9OX1JBVEUgKiBkdCApO1xyXG4gICAgaWYgKCB0aGlzLm1lc3NlbmdlclJuYUZyYWdtZW50LmdldExlbmd0aCgpID49IHRoaXMudGFyZ2V0RnJhZ21lbnRMZW5ndGggKSB7XHJcblxyXG4gICAgICAvLyBUaW1lIHRvIHJlbGVhc2UgdGhpcyBmcmFnbWVudC5cclxuICAgICAgdGhpcy5tZXNzZW5nZXJSbmFGcmFnbWVudC5yZWxlYXNlRnJvbURlc3Ryb3llcigpO1xyXG4gICAgICB0aGlzLm1lc3NlbmdlclJuYUZyYWdtZW50ID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBZHZhbmNlIHRoZSBkZXN0cnVjdGlvbiBvZiB0aGUgbVJOQS4gIERlc3RydWN0aW9uIG11c3QgcHJvY2VlZCBtb3JlIHNsb3dseSB3aGVuIHRoZSBtUk5BIGlzIGJlaW5nIHN5bnRoZXNpemVkXHJcbiAgICAvLyB0byBhdm9pZCBhIHNpdHVhdGlvbiB3aGVyZSBpdCBnZXRzIGRlc3Ryb3llZCBtb3JlIHJhcGlkbHkgdGhhbiBpdCBpcyBjcmVhdGVkLlxyXG4gICAgY29uc3QgZGVzdHJ1Y3Rpb25SYXRlID0gYmlvbW9sZWN1bGUuZ2V0TWVzc2VuZ2VyUm5hQmVpbmdEZXN0cm95ZWQoKS5iZWluZ1N5bnRoZXNpemVkUHJvcGVydHkuZ2V0KCkgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUk5BX0RFU1RSVUNUSU9OX1JBVEUgLyAyIDogUk5BX0RFU1RSVUNUSU9OX1JBVEU7XHJcbiAgICBjb25zdCBkZXN0cnVjdGlvbkNvbXBsZXRlID0gdGhpcy5NUm5hRGVzdHJveWVyQXR0YWNobWVudFN0YXRlTWFjaGluZS5tUm5hRGVzdHJveWVyLmFkdmFuY2VNZXNzZW5nZXJSbmFEZXN0cnVjdGlvbihcclxuICAgICAgZGVzdHJ1Y3Rpb25SYXRlICogZHRcclxuICAgICk7XHJcbiAgICBpZiAoIGRlc3RydWN0aW9uQ29tcGxldGUgKSB7XHJcblxyXG4gICAgICAvLyBEZXRhY2ggdGhlIGN1cnJlbnQgbVJOQSBmcmFnbWVudC5cclxuICAgICAgaWYgKCB0aGlzLm1lc3NlbmdlclJuYUZyYWdtZW50ICE9PSBudWxsICkge1xyXG4gICAgICAgIHRoaXMubWVzc2VuZ2VyUm5hRnJhZ21lbnQucmVsZWFzZUZyb21EZXN0cm95ZXIoKTtcclxuICAgICAgICB0aGlzLm1lc3NlbmdlclJuYUZyYWdtZW50ID0gbnVsbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gUmVtb3ZlIHRoZSBtZXNzZW5nZXIgUk5BIHRoYXQgaXMgbm93IGRlc3Ryb3llZCBmcm9tIHRoZSBtb2RlbC4gVGhlcmUgc2hvdWxkIGJlIG5vIHZpc3VhbCByZXByZXNlbnRhdGlvbiBsZWZ0XHJcbiAgICAgIC8vIHRvIGl0IGF0IHRoaXMgcG9pbnQuXHJcbiAgICAgIGJpb21vbGVjdWxlLmdldE1vZGVsKCkucmVtb3ZlTWVzc2VuZ2VyUm5hKFxyXG4gICAgICAgIHRoaXMuTVJuYURlc3Ryb3llckF0dGFjaG1lbnRTdGF0ZU1hY2hpbmUubVJuYURlc3Ryb3llci5nZXRNZXNzZW5nZXJSbmFCZWluZ0Rlc3Ryb3llZCgpXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMuTVJuYURlc3Ryb3llckF0dGFjaG1lbnRTdGF0ZU1hY2hpbmUubVJuYURlc3Ryb3llci5jbGVhck1lc3NlbmdlclJuYUJlaW5nRGVzdHJveWVkKCk7XHJcblxyXG4gICAgICAvLyBSZWxlYXNlIHRoaXMgZGVzdHJveWVyIHRvIHdhbmRlciBpbiB0aGUgY3l0b3BsYXNtLlxyXG4gICAgICBhc20uZGV0YWNoKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAb3ZlcnJpZGVcclxuICAgKiBAcGFyYW0ge0F0dGFjaG1lbnRTdGF0ZU1hY2hpbmV9IGFzbVxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBlbnRlcmVkKCBhc20gKSB7XHJcbiAgICBjb25zdCBtUm5hRGVzdHJveWVyID0gdGhpcy5NUm5hRGVzdHJveWVyQXR0YWNobWVudFN0YXRlTWFjaGluZS5tUm5hRGVzdHJveWVyO1xyXG4gICAgbVJuYURlc3Ryb3llci5pbml0aWF0ZU1lc3NlbmdlclJuYURlc3RydWN0aW9uKCk7XHJcbiAgICBtUm5hRGVzdHJveWVyLnNldE1vdGlvblN0cmF0ZWd5KCBuZXcgRGVzdHJveWVyVHJhY2tpbmdSbmFNb3Rpb25TdHJhdGVneSggbVJuYURlc3Ryb3llciApICk7XHJcblxyXG4gICAgLy8gVHVybiBvZmYgdXNlciBpbnRlcmFjdGlvbiB3aGlsZSBtUk5BIGlzIGJlaW5nIGRlc3Ryb3llZC5cclxuICAgIGFzbS5iaW9tb2xlY3VsZS5tb3ZhYmxlQnlVc2VyUHJvcGVydHkuc2V0KCBmYWxzZSApO1xyXG4gIH1cclxufVxyXG5cclxuZ2VuZUV4cHJlc3Npb25Fc3NlbnRpYWxzLnJlZ2lzdGVyKCAnTVJuYURlc3Ryb3llckF0dGFjaGVkU3RhdGUnLCBNUm5hRGVzdHJveWVyQXR0YWNoZWRTdGF0ZSApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgTVJuYURlc3Ryb3llckF0dGFjaGVkU3RhdGU7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxTQUFTLE1BQU0sb0NBQW9DO0FBQzFELE9BQU9DLEtBQUssTUFBTSxnQ0FBZ0M7QUFDbEQsT0FBT0Msd0JBQXdCLE1BQU0sc0NBQXNDO0FBQzNFLE9BQU9DLG9CQUFvQixNQUFNLDRCQUE0QjtBQUM3RCxPQUFPQyxrQ0FBa0MsTUFBTSw0REFBNEQ7QUFDM0csT0FBT0MsZUFBZSxNQUFNLHNCQUFzQjs7QUFFbEQ7O0FBRUE7QUFDQSxNQUFNQyxvQkFBb0IsR0FBRyxHQUFHLENBQUMsQ0FBQzs7QUFFbEM7QUFDQSxNQUFNQywwQkFBMEIsR0FBRyxJQUFJTixLQUFLLENBQUUsR0FBRyxFQUFFLEdBQUksQ0FBQyxDQUFDLENBQUM7O0FBRTFELE1BQU1PLDBCQUEwQixTQUFTSCxlQUFlLENBQUM7RUFFdkQ7QUFDRjtBQUNBO0VBQ0VJLFdBQVdBLENBQUVDLG1DQUFtQyxFQUFHO0lBQ2pELEtBQUssQ0FBQyxDQUFDOztJQUVQO0lBQ0EsSUFBSSxDQUFDQSxtQ0FBbUMsR0FBR0EsbUNBQW1DO0lBRTlFLElBQUksQ0FBQ0Msb0JBQW9CLEdBQUcsSUFBSSxDQUFDLENBQUM7SUFDbEMsSUFBSSxD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