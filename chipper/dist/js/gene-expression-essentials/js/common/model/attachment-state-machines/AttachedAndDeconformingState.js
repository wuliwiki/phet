// Copyright 2015-2020, University of Colorado Boulder

/**
 * One of the states for RnaPolymeraseAttachmentStateMachine. RnaPolymerase enters this state when transcription of mRna
 * is complete
 *
 * @author Sharfudeen Ashraf
 * @author John Blanco
 * @author Aadish Gupta
 */

import geneExpressionEssentials from '../../../geneExpressionEssentials.js';
import GEEConstants from '../../GEEConstants.js';
import AttachmentState from './AttachmentState.js';
import BeingRecycledState from './BeingRecycledState.js';

// constants

// the deconformation rate needs to be a little faster than the conformational change rate so that the polymerase is
// less likely to collide at the end of the gene, see https://github.com/phetsims/gene-expression-essentials/issues/102.
const DECONFORMATION_RATE = GEEConstants.CONFORMATIONAL_CHANGE_RATE * 1.25;
class AttachedAndDeconformingState extends AttachmentState {
  /**
   * @param {RnaPolymeraseAttachmentStateMachine} rnaPolymeraseAttachmentStateMachine
   */
  constructor(rnaPolymeraseAttachmentStateMachine) {
    super();

    // @public (read-ony) {RnaPolymeraseAttachmentStateMachine}
    this.rnaPolymeraseAttachmentStateMachine = rnaPolymeraseAttachmentStateMachine;

    // @private
    this.conformationalChangeAmount = 0;
  }

  /**
   * @override
   * @param {AttachmentStateMachine} asm
   * @param {number} dt
   * @public
   */
  step(asm, dt) {
    const biomolecule = this.rnaPolymeraseAttachmentStateMachine.biomolecule;

    // Verify that state is consistent.
    assert && assert(asm.attachmentSite !== null);
    assert && assert(asm.attachmentSite.attachedOrAttachingMoleculeProperty.get() === biomolecule);
    const dnaStrandSeparation = this.rnaPolymeraseAttachmentStateMachine.dnaStrandSeparation;
    this.conformationalChangeAmount = Math.max(this.conformationalChangeAmount - DECONFORMATION_RATE * dt, 0);
    biomolecule.changeConformation(this.conformationalChangeAmount);
    dnaStrandSeparation.setProportionOfTargetAmount(this.conformationalChangeAmount);
    if (this.conformationalChangeAmount === 0) {
      this.detachFromDna(asm);
    }
  }

  /**
   * take the steps necessary to detach from the DNA strand
   * @public
   */
  detachFromDna() {
    const asm = this.rnaPolymeraseAttachmentStateMachine;
    const dnaStrandSeparation = asm.dnaStrandSeparation;
    const rnaPolymerase = asm.rnaPolymerase;
    let attachmentSite = asm.attachmentSite;
    const recycleMode = asm.recycleMode;
    const recycleReturnZones = asm.recycleReturnZones;
    const attachedAndWanderingState = asm.attachedAndWanderingState;

    // Remove the DNA separator, which makes the DNA close back up.
    rnaPolymerase.getModel().getDnaMolecule().removeSeparation(dnaStrandSeparation);

    // Update externally visible state indication.
    asm.biomolecule.attachedToDnaProperty.set(false);

    // Make sure that we enter the correct initial state upon the next attachment.
    this.rnaPolymeraseAttachmentStateMachine.attachedState = attachedAndWanderingState;

    // Make sure the shape is back to normal (might not be is this was knocked off the strand by another polymerase).
    if (this.conformationalChangeAmount > 0) {
      this.conformationalChangeAmount = 0;
      asm.biomolecule.changeConformation(this.conformationalChangeAmount);
    }

    // Detach from the DNA.
    attachmentSite.attachedOrAttachingMoleculeProperty.set(null);
    attachmentSite = null;
    this.rnaPolymeraseAttachmentStateMachine.attachmentSite = attachmentSite;
    if (recycleMode) {
      this.rnaPolymeraseAttachmentStateMachine.setState(new BeingRecycledState(this.rnaPolymeraseAttachmentStateMachine, recycleReturnZones));
    } else {
      this.rnaPolymeraseAttachmentStateMachine.forceImmediateUnattachedButUnavailable();
    }
  }

  /**
   * @override
   * @param {AttachmentStateMachine} asm
   * @public
   */
  entered(asm) {
    // Prevent user interaction.
    asm.biomolecule.movableByUserProperty.set(false);
    this.conformationalChangeAmount = 1;
  }
}
geneExpressionEssentials.register('AttachedAndDeconformingState', AttachedAndDeconformingState);
export default AttachedAndDeconformingState;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZW5lRXhwcmVzc2lvbkVzc2VudGlhbHMiLCJHRUVDb25zdGFudHMiLCJBdHRhY2htZW50U3RhdGUiLCJCZWluZ1JlY3ljbGVkU3RhdGUiLCJERUNPTkZPUk1BVElPTl9SQVRFIiwiQ09ORk9STUFUSU9OQUxfQ0hBTkdFX1JBVEUiLCJBdHRhY2hlZEFuZERlY29uZm9ybWluZ1N0YXRlIiwiY29uc3RydWN0b3IiLCJybmFQb2x5bWVyYXNlQXR0YWNobWVudFN0YXRlTWFjaGluZSIsImNvbmZvcm1hdGlvbmFsQ2hhbmdlQW1vdW50Iiwic3RlcCIsImFzbSIsImR0IiwiYmlvbW9sZWN1bGUiLCJhc3NlcnQiLCJhdHRhY2htZW50U2l0ZSIsImF0dGFjaGVkT3JBdHRhY2hpbmdNb2xlY3VsZVByb3BlcnR5IiwiZ2V0IiwiZG5hU3RyYW5kU2VwYXJhdGlvbiIsIk1hdGgiLCJtYXgiLCJjaGFuZ2VDb25mb3JtYXRpb24iLCJzZXRQcm9wb3J0aW9uT2ZUYXJnZXRBbW91bnQiLCJkZXRhY2hGcm9tRG5hIiwicm5hUG9seW1lcmFzZSIsInJlY3ljbGVNb2RlIiwicmVjeWNsZVJldHVyblpvbmVzIiwiYXR0YWNoZWRBbmRXYW5kZXJpbmdTdGF0ZSIsImdldE1vZGVsIiwiZ2V0RG5hTW9sZWN1bGUiLCJyZW1vdmVTZXBhcmF0aW9uIiwiYXR0YWNoZWRUb0RuYVByb3BlcnR5Iiwic2V0IiwiYXR0YWNoZWRTdGF0ZSIsInNldFN0YXRlIiwiZm9yY2VJbW1lZGlhdGVVbmF0dGFjaGVkQnV0VW5hdmFpbGFibGUiLCJlbnRlcmVkIiwibW92YWJsZUJ5VXNlclByb3BlcnR5IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJBdHRhY2hlZEFuZERlY29uZm9ybWluZ1N0YXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE1LTIwMjAsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIE9uZSBvZiB0aGUgc3RhdGVzIGZvciBSbmFQb2x5bWVyYXNlQXR0YWNobWVudFN0YXRlTWFjaGluZS4gUm5hUG9seW1lcmFzZSBlbnRlcnMgdGhpcyBzdGF0ZSB3aGVuIHRyYW5zY3JpcHRpb24gb2YgbVJuYVxyXG4gKiBpcyBjb21wbGV0ZVxyXG4gKlxyXG4gKiBAYXV0aG9yIFNoYXJmdWRlZW4gQXNocmFmXHJcbiAqIEBhdXRob3IgSm9obiBCbGFuY29cclxuICogQGF1dGhvciBBYWRpc2ggR3VwdGFcclxuICovXHJcblxyXG5pbXBvcnQgZ2VuZUV4cHJlc3Npb25Fc3NlbnRpYWxzIGZyb20gJy4uLy4uLy4uL2dlbmVFeHByZXNzaW9uRXNzZW50aWFscy5qcyc7XHJcbmltcG9ydCBHRUVDb25zdGFudHMgZnJvbSAnLi4vLi4vR0VFQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IEF0dGFjaG1lbnRTdGF0ZSBmcm9tICcuL0F0dGFjaG1lbnRTdGF0ZS5qcyc7XHJcbmltcG9ydCBCZWluZ1JlY3ljbGVkU3RhdGUgZnJvbSAnLi9CZWluZ1JlY3ljbGVkU3RhdGUuanMnO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcblxyXG4vLyB0aGUgZGVjb25mb3JtYXRpb24gcmF0ZSBuZWVkcyB0byBiZSBhIGxpdHRsZSBmYXN0ZXIgdGhhbiB0aGUgY29uZm9ybWF0aW9uYWwgY2hhbmdlIHJhdGUgc28gdGhhdCB0aGUgcG9seW1lcmFzZSBpc1xyXG4vLyBsZXNzIGxpa2VseSB0byBjb2xsaWRlIGF0IHRoZSBlbmQgb2YgdGhlIGdlbmUsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvZ2VuZS1leHByZXNzaW9uLWVzc2VudGlhbHMvaXNzdWVzLzEwMi5cclxuY29uc3QgREVDT05GT1JNQVRJT05fUkFURSA9IEdFRUNvbnN0YW50cy5DT05GT1JNQVRJT05BTF9DSEFOR0VfUkFURSAqIDEuMjU7XHJcblxyXG5jbGFzcyBBdHRhY2hlZEFuZERlY29uZm9ybWluZ1N0YXRlIGV4dGVuZHMgQXR0YWNobWVudFN0YXRlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtSbmFQb2x5bWVyYXNlQXR0YWNobWVudFN0YXRlTWFjaGluZX0gcm5hUG9seW1lcmFzZUF0dGFjaG1lbnRTdGF0ZU1hY2hpbmVcclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvciggcm5hUG9seW1lcmFzZUF0dGFjaG1lbnRTdGF0ZU1hY2hpbmUgKSB7XHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIC8vIEBwdWJsaWMgKHJlYWQtb255KSB7Um5hUG9seW1lcmFzZUF0dGFjaG1lbnRTdGF0ZU1hY2hpbmV9XHJcbiAgICB0aGlzLnJuYVBvbHltZXJhc2VBdHRhY2htZW50U3RhdGVNYWNoaW5lID0gcm5hUG9seW1lcmFzZUF0dGFjaG1lbnRTdGF0ZU1hY2hpbmU7XHJcblxyXG4gICAgLy8gQHByaXZhdGVcclxuICAgIHRoaXMuY29uZm9ybWF0aW9uYWxDaGFuZ2VBbW91bnQgPSAwO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQG92ZXJyaWRlXHJcbiAgICogQHBhcmFtIHtBdHRhY2htZW50U3RhdGVNYWNoaW5lfSBhc21cclxuICAgKiBAcGFyYW0ge251bWJlcn0gZHRcclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgc3RlcCggYXNtLCBkdCApIHtcclxuICAgIGNvbnN0IGJpb21vbGVjdWxlID0gdGhpcy5ybmFQb2x5bWVyYXNlQXR0YWNobWVudFN0YXRlTWFjaGluZS5iaW9tb2xlY3VsZTtcclxuXHJcbiAgICAvLyBWZXJpZnkgdGhhdCBzdGF0ZSBpcyBjb25zaXN0ZW50LlxyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggYXNtLmF0dGFjaG1lbnRTaXRlICE9PSBudWxsICk7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBhc20uYXR0YWNobWVudFNpdGUuYXR0YWNoZWRPckF0dGFjaGluZ01vbGVjdWxlUHJvcGVydHkuZ2V0KCkgPT09IGJpb21vbGVjdWxlICk7XHJcblxyXG4gICAgY29uc3QgZG5hU3RyYW5kU2VwYXJhdGlvbiA9IHRoaXMucm5hUG9seW1lcmFzZUF0dGFjaG1lbnRTdGF0ZU1hY2hpbmUuZG5hU3RyYW5kU2VwYXJhdGlvbjtcclxuXHJcbiAgICB0aGlzLmNvbmZvcm1hdGlvbmFsQ2hhbmdlQW1vdW50ID0gTWF0aC5tYXgoXHJcbiAgICAgIHRoaXMuY29uZm9ybWF0aW9uYWxDaGFuZ2VBbW91bnQgLSBERUNPTkZPUk1BVElPTl9SQVRFICogZHQsXHJcbiAgICAgIDBcclxuICAgICk7XHJcbiAgICBiaW9tb2xlY3VsZS5jaGFuZ2VDb25mb3JtYXRpb24oIHRoaXMuY29uZm9ybWF0aW9uYWxDaGFuZ2VBbW91bnQgKTtcclxuICAgIGRuYVN0cmFuZFNlcGFyYXRpb24uc2V0UHJvcG9ydGlvbk9mVGFyZ2V0QW1vdW50KCB0aGlzLmNvbmZvcm1hdGlvbmFsQ2hhbmdlQW1vdW50ICk7XHJcbiAgICBpZiAoIHRoaXMuY29uZm9ybWF0aW9uYWxDaGFuZ2VBbW91bnQgPT09IDAgKSB7XHJcbiAgICAgIHRoaXMuZGV0YWNoRnJvbURuYSggYXNtICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiB0YWtlIHRoZSBzdGVwcyBuZWNlc3NhcnkgdG8gZGV0YWNoIGZyb20gdGhlIEROQSBzdHJhbmRcclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgZGV0YWNoRnJvbURuYSgpIHtcclxuXHJcbiAgICBjb25zdCBhc20gPSB0aGlzLnJuYVBvbHltZXJhc2VBdHRhY2htZW50U3RhdGVNYWNoaW5lO1xyXG4gICAgY29uc3QgZG5hU3RyYW5kU2VwYXJhdGlvbiA9IGFzbS5kbmFTdHJhbmRTZXBhcmF0aW9uO1xyXG4gICAgY29uc3Qgcm5hUG9seW1lcmFzZSA9IGFzbS5ybmFQb2x5bWVyYXNlO1xyXG4gICAgbGV0IGF0dGFjaG1lbnRTaXRlID0gYXNtLmF0dGFjaG1lbnRTaXRlO1xyXG4gICAgY29uc3QgcmVjeWNsZU1vZGUgPSBhc20ucmVjeWNsZU1vZGU7XHJcbiAgICBjb25zdCByZWN5Y2xlUmV0dXJuWm9uZXMgPSBhc20ucmVjeWNsZVJldHVyblpvbmVzO1xyXG4gICAgY29uc3QgYXR0YWNoZWRBbmRXYW5kZXJpbmdTdGF0ZSA9IGFzbS5hdHRhY2hlZEFuZFdhbmRlcmluZ1N0YXRlO1xyXG5cclxuICAgIC8vIFJlbW92ZSB0aGUgRE5BIHNlcGFyYXRvciwgd2hpY2ggbWFrZXMgdGhlIEROQSBjbG9zZSBiYWNrIHVwLlxyXG4gICAgcm5hUG9seW1lcmFzZS5nZXRNb2RlbCgpLmdldERuYU1vbGVjdWxlKCkucmVtb3ZlU2VwYXJhdGlvbiggZG5hU3RyYW5kU2VwYXJhdGlvbiApO1xyXG5cclxuICAgIC8vIFVwZGF0ZSBleHRlcm5hbGx5IHZpc2libGUgc3RhdGUgaW5kaWNhdGlvbi5cclxuICAgIGFzbS5iaW9tb2xlY3VsZS5hdHRhY2hlZFRvRG5hUHJvcGVydHkuc2V0KCBmYWxzZSApO1xyXG5cclxuICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHdlIGVudGVyIHRoZSBjb3JyZWN0IGluaXRpYWwgc3RhdGUgdXBvbiB0aGUgbmV4dCBhdHRhY2htZW50LlxyXG4gICAgdGhpcy5ybmFQb2x5bWVyYXNlQXR0YWNobWVudFN0YXRlTWFjaGluZS5hdHRhY2hlZFN0YXRlID0gYXR0YWNoZWRBbmRXYW5kZXJpbmdTdGF0ZTtcclxuXHJcbiAgICAvLyBNYWtlIHN1cmUgdGhlIHNoYXBlIGlzIGJhY2sgdG8gbm9ybWFsIChtaWdodCBub3QgYmUgaXMgdGhpcyB3YXMga25vY2tlZCBvZmYgdGhlIHN0cmFuZCBieSBhbm90aGVyIHBvbHltZXJhc2UpLlxyXG4gICAgaWYgKCB0aGlzLmNvbmZvcm1hdGlvbmFsQ2hhbmdlQW1vdW50ID4gMCApIHtcclxuICAgICAgdGhpcy5jb25mb3JtYXRpb25hbENoYW5nZUFtb3VudCA9IDA7XHJcbiAgICAgIGFzbS5iaW9tb2xlY3VsZS5jaGFuZ2VDb25mb3JtYXRpb24oIHRoaXMuY29uZm9ybWF0aW9uYWxDaGFuZ2VBbW91bnQgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBEZXRhY2ggZnJvbSB0aGUgRE5BLlxyXG4gICAgYXR0YWNobWVudFNpdGUuYXR0YWNoZWRPckF0dGFjaGluZ01vbGVjdWxlUHJvcGVydHkuc2V0KCBudWxsICk7XHJcbiAgICBhdHRhY2htZW50U2l0ZSA9IG51bGw7XHJcbiAgICB0aGlzLnJuYVBvbHltZXJhc2VBdHRhY2htZW50U3RhdGVNYWNoaW5lLmF0dGFjaG1lbnRTaXRlID0gYXR0YWNobWVudFNpdGU7XHJcbiAgICBpZiAoIHJlY3ljbGVNb2RlICkge1xyXG4gICAgICB0aGlzLnJuYVBvbHltZXJhc2VBdHRhY2htZW50U3RhdGVNYWNoaW5lLnNldFN0YXRlKFxyXG4gICAgICAgIG5ldyBCZWluZ1JlY3ljbGVkU3RhdGUoIHRoaXMucm5hUG9seW1lcmFzZUF0dGFjaG1lbnRTdGF0ZU1hY2hpbmUsIHJlY3ljbGVSZXR1cm5ab25lcyApXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5ybmFQb2x5bWVyYXNlQXR0YWNobWVudFN0YXRlTWFjaGluZS5mb3JjZUltbWVkaWF0ZVVuYXR0YWNoZWRCdXRVbmF2YWlsYWJsZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQG92ZXJyaWRlXHJcbiAgICogQHBhcmFtIHtBdHRhY2htZW50U3RhdGVNYWNoaW5lfSBhc21cclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgZW50ZXJlZCggYXNtICkge1xyXG4gICAgLy8gUHJldmVudCB1c2VyIGludGVyYWN0aW9uLlxyXG4gICAgYXNtLmJpb21vbGVjdWxlLm1vdmFibGVCeVVzZXJQcm9wZXJ0eS5zZXQoIGZhbHNlICk7XHJcbiAgICB0aGlzLmNvbmZvcm1hdGlvbmFsQ2hhbmdlQW1vdW50ID0gMTtcclxuICB9XHJcbn1cclxuXHJcbmdlbmVFeHByZXNzaW9uRXNzZW50aWFscy5yZWdpc3RlciggJ0F0dGFjaGVkQW5kRGVjb25mb3JtaW5nU3RhdGUnLCBBdHRhY2hlZEFuZERlY29uZm9ybWluZ1N0YXRlICk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBdHRhY2hl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