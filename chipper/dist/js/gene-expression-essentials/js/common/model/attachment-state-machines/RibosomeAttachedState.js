// Copyright 2015-2020, University of Colorado Boulder

/**
 * One of the states of the RibosomeAttachmentStateMachine. It defines what the ribosome does when attached to mRNA,
 * which is essentially to translate it.
 *
 * @author John Blanco
 * @author Mohamed Safi
 * @author Aadish Gupta
 */

import Vector2 from '../../../../../dot/js/Vector2.js';
import geneExpressionEssentials from '../../../geneExpressionEssentials.js';
import RibosomeTranslatingRnaMotionStrategy from '../motion-strategies/RibosomeTranslatingRnaMotionStrategy.js';
import AttachmentState from './AttachmentState.js';

// constants
const RNA_TRANSLATION_RATE = 750; // picometers per second
const CLEAR_RNA_ATTACHMENT_LENGTH = 700; // length which, once translated, a new biomolecule can attach to mRNA

class RibosomeAttachedState extends AttachmentState {
  /**
   * @param {RibosomeAttachmentStateMachine} ribosomeAttachmentStateMachine
   */
  constructor(ribosomeAttachmentStateMachine) {
    super();
    this.ribosomeAttachmentStateMachine = ribosomeAttachmentStateMachine; //@public
    this.proteinAttachmentPointScratchVector = new Vector2(0, 0);
  }

  /**
   * @override
   * @param {AttachmentStateMachine} asm
   * @param {number} dt
   * @public
   */
  step(asm, dt) {
    let proteinBeingSynthesized = this.ribosomeAttachmentStateMachine.proteinBeingSynthesized;
    const ribosome = this.ribosomeAttachmentStateMachine.ribosome;
    const mRna = ribosome.getMessengerRnaBeingTranslated();

    // grow the protein
    proteinBeingSynthesized.setFullSizeProportion(mRna.getProportionOfRnaTranslated(ribosome));
    this.proteinAttachmentPointScratchVector = ribosome.getProteinAttachmentPoint(this.proteinAttachmentPointScratchVector);
    proteinBeingSynthesized.setAttachmentPointPositionXY(this.proteinAttachmentPointScratchVector.x, this.proteinAttachmentPointScratchVector.y);

    // if enough translation of the mRNA has occurred, free up the attachment site on the mRNA so that other
    // biomolecules, such as another ribosome or and mRNA destroyer, can attach
    if (asm.attachmentSite && asm.attachmentSite.attachedOrAttachingMoleculeProperty.get() === ribosome && mRna.getLengthOfRnaTranslated(ribosome) > CLEAR_RNA_ATTACHMENT_LENGTH) {
      asm.attachmentSite.attachedOrAttachingMoleculeProperty.set(null);
      asm.attachmentSite = null;
    }

    // Advance the translation of the mRNA.  This must proceed more slowly if the mRNA is in the process of being
    // synthesized, otherwise the ribosome with run out of mRNA to work with.  The amount of reduction was chosen to
    // look good and to cause minimal "jumpiness" when translation and trnascription occur simultaneously.
    const translationRate = mRna.beingSynthesizedProperty.get() ? RNA_TRANSLATION_RATE * 0.4 : RNA_TRANSLATION_RATE;
    const translationComplete = ribosome.advanceMessengerRnaTranslation(translationRate * dt);
    if (translationComplete) {
      // release the mRNA
      ribosome.releaseMessengerRna();

      // release the protein
      proteinBeingSynthesized.release();
      proteinBeingSynthesized = null;

      // release this ribosome to wander in the cytoplasm
      asm.detach();
    }
  }

  /**
   * @override
   * @param {AttachmentStateMachine} asm
   * @public
   */
  entered(asm) {
    const ribosome = this.ribosomeAttachmentStateMachine.ribosome;
    ribosome.initiateTranslation();
    ribosome.setMotionStrategy(new RibosomeTranslatingRnaMotionStrategy(ribosome));
    const proteinBeingSynthesized = ribosome.getMessengerRnaBeingTranslated().getProteinPrototype().createInstance();
    this.ribosomeAttachmentStateMachine.proteinBeingSynthesized = proteinBeingSynthesized;
    proteinBeingSynthesized.setAttachmentPointPosition(ribosome.getProteinAttachmentPoint());
    ribosome.getModel().addMobileBiomolecule(proteinBeingSynthesized);

    // Prevent user interaction while translating.
    asm.biomolecule.movableByUserProperty.set(false);
  }
}
geneExpressionEssentials.register('RibosomeAttachedState', RibosomeAttachedState);
export default RibosomeAttachedState;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWZWN0b3IyIiwiZ2VuZUV4cHJlc3Npb25Fc3NlbnRpYWxzIiwiUmlib3NvbWVUcmFuc2xhdGluZ1JuYU1vdGlvblN0cmF0ZWd5IiwiQXR0YWNobWVudFN0YXRlIiwiUk5BX1RSQU5TTEFUSU9OX1JBVEUiLCJDTEVBUl9STkFfQVRUQUNITUVOVF9MRU5HVEgiLCJSaWJvc29tZUF0dGFjaGVkU3RhdGUiLCJjb25zdHJ1Y3RvciIsInJpYm9zb21lQXR0YWNobWVudFN0YXRlTWFjaGluZSIsInByb3RlaW5BdHRhY2htZW50UG9pbnRTY3JhdGNoVmVjdG9yIiwic3RlcCIsImFzbSIsImR0IiwicHJvdGVpbkJlaW5nU3ludGhlc2l6ZWQiLCJyaWJvc29tZSIsIm1SbmEiLCJnZXRNZXNzZW5nZXJSbmFCZWluZ1RyYW5zbGF0ZWQiLCJzZXRGdWxsU2l6ZVByb3BvcnRpb24iLCJnZXRQcm9wb3J0aW9uT2ZSbmFUcmFuc2xhdGVkIiwiZ2V0UHJvdGVpbkF0dGFjaG1lbnRQb2ludCIsInNldEF0dGFjaG1lbnRQb2ludFBvc2l0aW9uWFkiLCJ4IiwieSIsImF0dGFjaG1lbnRTaXRlIiwiYXR0YWNoZWRPckF0dGFjaGluZ01vbGVjdWxlUHJvcGVydHkiLCJnZXQiLCJnZXRMZW5ndGhPZlJuYVRyYW5zbGF0ZWQiLCJzZXQiLCJ0cmFuc2xhdGlvblJhdGUiLCJiZWluZ1N5bnRoZXNpemVkUHJvcGVydHkiLCJ0cmFuc2xhdGlvbkNvbXBsZXRlIiwiYWR2YW5jZU1lc3NlbmdlclJuYVRyYW5zbGF0aW9uIiwicmVsZWFzZU1lc3NlbmdlclJuYSIsInJlbGVhc2UiLCJkZXRhY2giLCJlbnRlcmVkIiwiaW5pdGlhdGVUcmFuc2xhdGlvbiIsInNldE1vdGlvblN0cmF0ZWd5IiwiZ2V0UHJvdGVpblByb3RvdHlwZSIsImNyZWF0ZUluc3RhbmNlIiwic2V0QXR0YWNobWVudFBvaW50UG9zaXRpb24iLCJnZXRNb2RlbCIsImFkZE1vYmlsZUJpb21vbGVjdWxlIiwiYmlvbW9sZWN1bGUiLCJtb3ZhYmxlQnlVc2VyUHJvcGVydHkiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlJpYm9zb21lQXR0YWNoZWRTdGF0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNS0yMDIwLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBPbmUgb2YgdGhlIHN0YXRlcyBvZiB0aGUgUmlib3NvbWVBdHRhY2htZW50U3RhdGVNYWNoaW5lLiBJdCBkZWZpbmVzIHdoYXQgdGhlIHJpYm9zb21lIGRvZXMgd2hlbiBhdHRhY2hlZCB0byBtUk5BLFxyXG4gKiB3aGljaCBpcyBlc3NlbnRpYWxseSB0byB0cmFuc2xhdGUgaXQuXHJcbiAqXHJcbiAqIEBhdXRob3IgSm9obiBCbGFuY29cclxuICogQGF1dGhvciBNb2hhbWVkIFNhZmlcclxuICogQGF1dGhvciBBYWRpc2ggR3VwdGFcclxuICovXHJcblxyXG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuLi8uLi8uLi8uLi8uLi9kb3QvanMvVmVjdG9yMi5qcyc7XHJcbmltcG9ydCBnZW5lRXhwcmVzc2lvbkVzc2VudGlhbHMgZnJvbSAnLi4vLi4vLi4vZ2VuZUV4cHJlc3Npb25Fc3NlbnRpYWxzLmpzJztcclxuaW1wb3J0IFJpYm9zb21lVHJhbnNsYXRpbmdSbmFNb3Rpb25TdHJhdGVneSBmcm9tICcuLi9tb3Rpb24tc3RyYXRlZ2llcy9SaWJvc29tZVRyYW5zbGF0aW5nUm5hTW90aW9uU3RyYXRlZ3kuanMnO1xyXG5pbXBvcnQgQXR0YWNobWVudFN0YXRlIGZyb20gJy4vQXR0YWNobWVudFN0YXRlLmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBSTkFfVFJBTlNMQVRJT05fUkFURSA9IDc1MDsgLy8gcGljb21ldGVycyBwZXIgc2Vjb25kXHJcbmNvbnN0IENMRUFSX1JOQV9BVFRBQ0hNRU5UX0xFTkdUSCA9IDcwMDsgLy8gbGVuZ3RoIHdoaWNoLCBvbmNlIHRyYW5zbGF0ZWQsIGEgbmV3IGJpb21vbGVjdWxlIGNhbiBhdHRhY2ggdG8gbVJOQVxyXG5cclxuY2xhc3MgUmlib3NvbWVBdHRhY2hlZFN0YXRlIGV4dGVuZHMgQXR0YWNobWVudFN0YXRlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtSaWJvc29tZUF0dGFjaG1lbnRTdGF0ZU1hY2hpbmV9IHJpYm9zb21lQXR0YWNobWVudFN0YXRlTWFjaGluZVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCByaWJvc29tZUF0dGFjaG1lbnRTdGF0ZU1hY2hpbmUgKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgdGhpcy5yaWJvc29tZUF0dGFjaG1lbnRTdGF0ZU1hY2hpbmUgPSByaWJvc29tZUF0dGFjaG1lbnRTdGF0ZU1hY2hpbmU7IC8vQHB1YmxpY1xyXG4gICAgdGhpcy5wcm90ZWluQXR0YWNobWVudFBvaW50U2NyYXRjaFZlY3RvciA9IG5ldyBWZWN0b3IyKCAwLCAwICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAb3ZlcnJpZGVcclxuICAgKiBAcGFyYW0ge0F0dGFjaG1lbnRTdGF0ZU1hY2hpbmV9IGFzbVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkdFxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBzdGVwKCBhc20sIGR0ICkge1xyXG5cclxuICAgIGxldCBwcm90ZWluQmVpbmdTeW50aGVzaXplZCA9IHRoaXMucmlib3NvbWVBdHRhY2htZW50U3RhdGVNYWNoaW5lLnByb3RlaW5CZWluZ1N5bnRoZXNpemVkO1xyXG4gICAgY29uc3Qgcmlib3NvbWUgPSB0aGlzLnJpYm9zb21lQXR0YWNobWVudFN0YXRlTWFjaGluZS5yaWJvc29tZTtcclxuICAgIGNvbnN0IG1SbmEgPSByaWJvc29tZS5nZXRNZXNzZW5nZXJSbmFCZWluZ1RyYW5zbGF0ZWQoKTtcclxuXHJcbiAgICAvLyBncm93IHRoZSBwcm90ZWluXHJcbiAgICBwcm90ZWluQmVpbmdTeW50aGVzaXplZC5zZXRGdWxsU2l6ZVByb3BvcnRpb24oXHJcbiAgICAgIG1SbmEuZ2V0UHJvcG9ydGlvbk9mUm5hVHJhbnNsYXRlZCggcmlib3NvbWUgKVxyXG4gICAgKTtcclxuICAgIHRoaXMucHJvdGVpbkF0dGFjaG1lbnRQb2ludFNjcmF0Y2hWZWN0b3IgPSByaWJvc29tZS5nZXRQcm90ZWluQXR0YWNobWVudFBvaW50KFxyXG4gICAgICB0aGlzLnByb3RlaW5BdHRhY2htZW50UG9pbnRTY3JhdGNoVmVjdG9yXHJcbiAgICApO1xyXG4gICAgcHJvdGVpbkJlaW5nU3ludGhlc2l6ZWQuc2V0QXR0YWNobWVudFBvaW50UG9zaXRpb25YWShcclxuICAgICAgdGhpcy5wcm90ZWluQXR0YWNobWVudFBvaW50U2NyYXRjaFZlY3Rvci54LFxyXG4gICAgICB0aGlzLnByb3RlaW5BdHRhY2htZW50UG9pbnRTY3JhdGNoVmVjdG9yLnlcclxuICAgICk7XHJcblxyXG4gICAgLy8gaWYgZW5vdWdoIHRyYW5zbGF0aW9uIG9mIHRoZSBtUk5BIGhhcyBvY2N1cnJlZCwgZnJlZSB1cCB0aGUgYXR0YWNobWVudCBzaXRlIG9uIHRoZSBtUk5BIHNvIHRoYXQgb3RoZXJcclxuICAgIC8vIGJpb21vbGVjdWxlcywgc3VjaCBhcyBhbm90aGVyIHJpYm9zb21lIG9yIGFuZCBtUk5BIGRlc3Ryb3llciwgY2FuIGF0dGFjaFxyXG4gICAgaWYgKCBhc20uYXR0YWNobWVudFNpdGUgJiZcclxuICAgICAgICAgYXNtLmF0dGFjaG1lbnRTaXRlLmF0dGFjaGVkT3JBdHRhY2hpbmdNb2xlY3VsZVByb3BlcnR5LmdldCgpID09PSByaWJvc29tZSAmJlxyXG4gICAgICAgICBtUm5hLmdldExlbmd0aE9mUm5hVHJhbnNsYXRlZCggcmlib3NvbWUgKSA+IENMRUFSX1JOQV9BVFRBQ0hNRU5UX0xFTkdUSCApIHtcclxuICAgICAgYXNtLmF0dGFjaG1lbnRTaXRlLmF0dGFjaGVkT3JBdHRhY2hpbmdNb2xlY3VsZVByb3BlcnR5LnNldCggbnVsbCApO1xyXG4gICAgICBhc20uYXR0YWNobWVudFNpdGUgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFkdmFuY2UgdGhlIHRyYW5zbGF0aW9uIG9mIHRoZSBtUk5BLiAgVGhpcyBtdXN0IHByb2NlZWQgbW9yZSBzbG93bHkgaWYgdGhlIG1STkEgaXMgaW4gdGhlIHByb2Nlc3Mgb2YgYmVpbmdcclxuICAgIC8vIHN5bnRoZXNpemVkLCBvdGhlcndpc2UgdGhlIHJpYm9zb21lIHdpdGggcnVuIG91dCBvZiBtUk5BIHRvIHdvcmsgd2l0aC4gIFRoZSBhbW91bnQgb2YgcmVkdWN0aW9uIHdhcyBjaG9zZW4gdG9cclxuICAgIC8vIGxvb2sgZ29vZCBhbmQgdG8gY2F1c2UgbWluaW1hbCBcImp1bXBpbmVzc1wiIHdoZW4gdHJhbnNsYXRpb24gYW5kIHRybmFzY3JpcHRpb24gb2NjdXIgc2ltdWx0YW5lb3VzbHkuXHJcbiAgICBjb25zdCB0cmFuc2xhdGlvblJhdGUgPSBtUm5hLmJlaW5nU3ludGhlc2l6ZWRQcm9wZXJ0eS5nZXQoKSA/IFJOQV9UUkFOU0xBVElPTl9SQVRFICogMC40IDogUk5BX1RSQU5TTEFUSU9OX1JBVEU7XHJcbiAgICBjb25zdCB0cmFuc2xhdGlvbkNvbXBsZXRlID0gcmlib3NvbWUuYWR2YW5jZU1lc3NlbmdlclJuYVRyYW5zbGF0aW9uKCB0cmFuc2xhdGlvblJhdGUgKiBkdCApO1xyXG4gICAgaWYgKCB0cmFuc2xhdGlvbkNvbXBsZXRlICkge1xyXG5cclxuICAgICAgLy8gcmVsZWFzZSB0aGUgbVJOQVxyXG4gICAgICByaWJvc29tZS5yZWxlYXNlTWVzc2VuZ2VyUm5hKCk7XHJcblxyXG4gICAgICAvLyByZWxlYXNlIHRoZSBwcm90ZWluXHJcbiAgICAgIHByb3RlaW5CZWluZ1N5bnRoZXNpemVkLnJlbGVhc2UoKTtcclxuICAgICAgcHJvdGVpbkJlaW5nU3ludGhlc2l6ZWQgPSBudWxsO1xyXG5cclxuICAgICAgLy8gcmVsZWFzZSB0aGlzIHJpYm9zb21lIHRvIHdhbmRlciBpbiB0aGUgY3l0b3BsYXNtXHJcbiAgICAgIGFzbS5kZXRhY2goKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqIEBwYXJhbSB7QXR0YWNobWVudFN0YXRlTWFjaGluZX0gYXNtXHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG4gIGVudGVyZWQoIGFzbSApIHtcclxuICAgIGNvbnN0IHJpYm9zb21lID0gdGhpcy5yaWJvc29tZUF0dGFjaG1lbnRTdGF0ZU1hY2hpbmUucmlib3NvbWU7XHJcbiAgICByaWJvc29tZS5pbml0aWF0ZVRyYW5zbGF0aW9uKCk7XHJcbiAgICByaWJvc29tZS5zZXRNb3Rpb25TdHJhdGVneSggbmV3IFJpYm9zb21lVHJhbnNsYXRpbmdSbmFNb3Rpb25TdHJhdGVneSggcmlib3NvbWUgKSApO1xyXG4gICAgY29uc3QgcHJvdGVpbkJlaW5nU3ludGhlc2l6ZWQgPSByaWJvc29tZS5nZXRNZXNzZW5nZXJSbmFCZWluZ1RyYW5zbGF0ZWQoKS5nZXRQcm90ZWluUHJvdG90eXBlKCkuY3JlYXRlSW5zdGFuY2UoKTtcclxuICAgIHRoaXMucmlib3NvbWVBdHRhY2htZW50U3RhdGVNYWNoaW5lLnByb3RlaW5CZWluZ1N5bnRoZXNpemVkID0gcHJvdGVpbkJlaW5nU3ludGhlc2l6ZWQ7XHJcbiAgICBwcm90ZWluQmVpbmdTeW50aGVzaXplZC5zZXRBdHRhY2htZW50UG9pbnRQb3NpdGlvbiggcmlib3NvbWUuZ2V0UHJvdGVpbkF0dGFjaG1lbnRQb2ludCgpICk7XHJcbiAgICByaWJvc29tZS5nZXRNb2RlbCgpLmFkZE1vYmlsZUJpb21vbGVjdWxlKCBwcm90ZWluQmVpbmdTeW50aGVzaXplZCApO1xyXG5cclxuICAgIC8vIFByZXZlbnQgdXNlciBpbnRlcmFjdGlvbiB3aGlsZSB0cmFuc2xhdGluZy5cclxuICAgIGFzbS5iaW9tb2xlY3VsZS5tb3ZhYmxlQnlVc2VyUHJvcGVydHkuc2V0KCBmYWxzZSApO1xyXG4gIH1cclxufVxyXG5cclxuZ2VuZUV4cHJlc3Npb25Fc3NlbnRpYWxzLnJlZ2lzdGVyKCAnUmlib3NvbWVBdHRhY2hlZFN0YXRlJywgUmlib3NvbWVBdHRhY2hlZFN0YXRlICk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBSaWJvc29tZUF0dGFjaGVkU3RhdGU7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLE9BQU8sTUFBTSxrQ0FBa0M7QUFDdEQsT0FBT0Msd0JBQXdCLE1BQU0sc0NBQXNDO0FBQzNFLE9BQU9DLG9DQUFvQyxNQUFNLDhEQUE4RDtBQUMvRyxPQUFPQyxlQUFlLE1BQU0sc0JBQXNCOztBQUVsRDtBQUNBLE1BQU1DLG9CQUFvQixHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQ2xDLE1BQU1DLDJCQUEyQixHQUFHLEdBQUcsQ0FBQyxDQUFDOztBQUV6QyxNQUFNQyxxQkFBcUIsU0FBU0gsZUFBZSxDQUFDO0VBRWxEO0FBQ0Y7QUFDQTtFQUNFSSxXQUFXQSxDQUFFQyw4QkFBOEIsRUFBRztJQUM1QyxLQUFLLENBQUMsQ0FBQztJQUNQLElBQUksQ0FBQ0EsOEJBQThCLEdBQUdBLDhCQUE4QixDQUFDLENBQUM7SUFDdEUsSUFBSSxDQUFDQyxtQ0FBbUMsR0FBRyxJQUFJVCxPQUFPLENBQUUsQ0FBQyxFQUFFLENBQUUsQ0FBQztFQUNoRTs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRVUsSUFBSUEsQ0FBRUMsR0FBRyxFQUFFQyxFQUFFLEVBQUc7SUFFZCxJQUFJQyx1QkFBdUIsR0FBRyxJQUFJLENBQUNMLDhCQUE4QixDQUFDSyx1QkFBdUI7SUFDekYsTUFBTUMsUUFBUSxHQUFHLElBQUksQ0FBQ04sOEJBQThCLENBQUNNLFFBQVE7SUFDN0QsTUFBTUMsSUFBSSxHQUFHRCxRQUFRLENBQUNFLDhCQUE4QixDQUFDLENBQUM7O0lBRXREO0lBQ0FILHVCQUF1QixDQUFDSSxxQkFBcUIsQ0FDM0NGLElBQUksQ0FBQ0csNEJBQTRCLENBQUVKLFFBQVMsQ0FDOUMsQ0FBQztJQUNELElBQUksQ0FBQ0wsbUNBQW1DLEdBQUdLLFFBQVEsQ0FBQ0sseUJBQXlCLENBQzNFLElBQUksQ0FBQ1YsbUNBQ1AsQ0FBQztJQUNESSx1QkFBdUIsQ0FBQ08sNEJBQTRCLENBQ2xELElBQUksQ0FBQ1gsbUNBQW1DLENBQUNZLENBQUMsRUFDMUMsSUFBSSxDQUFDWixtQ0FBbUMsQ0FBQ2EsQ0FDM0MsQ0FBQzs7SUFFRDtJQUNBO0lBQ0EsSUFBS1gsR0FBRyxDQUFDWSxjQUFjLElBQ2xCWixHQUFHLENBQUNZLGNBQWMsQ0FBQ0MsbUNBQW1DLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEtBQUtYLFFBQVEsSUFDekVDLElBQUksQ0FBQ1csd0JBQXdCLENBQUVaLFFBQVMsQ0FBQyxHQUFHVCwyQkFBMkIsRUFBRztNQUM3RU0sR0FBRyxDQUFDWSxjQUFjLENBQUNDLG1DQUFtQyxDQUFDRyxHQUFHLENBQUUsSUFBSyxDQUFDO01BQ2xFaEIsR0FBRyxDQUFDWSxjQUFjLEdBQUcsSUFBSTtJQUMzQjs7SUFFQTtJQUNBO0lBQ0E7SUFDQSxNQUFNSyxlQUFlLEdBQUdiLElBQUksQ0FBQ2Msd0JBQXdCLENBQUNKLEdBQUcsQ0FBQyxDQUFDLEdBQUdyQixvQkFBb0IsR0FBRyxHQUFHLEdBQUdBLG9CQUFvQjtJQUMvRyxNQUFNMEIsbUJBQW1CLEdBQUdoQixRQUFRLENBQUNpQiw4QkFBOEIsQ0FBRUgsZUFBZSxHQUFHaEIsRUFBRyxDQUFDO0lBQzNGLElBQUtrQixtQkFBbUIsRUFBRztNQUV6QjtNQUNBaEIsUUFBUSxDQUFDa0IsbUJBQW1CLENBQUMsQ0FBQzs7TUFFOUI7TUFDQW5CLHVCQUF1QixDQUFDb0IsT0FBTyxDQUFDLENBQUM7TUFDakNwQix1QkFBdUIsR0FBRyxJQUFJOztNQUU5QjtNQUNBRixHQUFHLENBQUN1QixNQUFNLENBQUMsQ0FBQztJQUNkO0VBQ0Y7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtFQUNFQyxPQUFPQSxDQUFFeEIsR0FBRyxFQUFHO0lBQ2IsTUFBTUcsUUFBUSxHQUFHLElBQUksQ0FBQ04sOEJBQThCLENBQUNNLFFBQVE7SUFDN0RBLFFBQVEsQ0FBQ3NCLG1CQUFtQixDQUFDLENBQUM7SUFDOUJ0QixRQUFRLENBQUN1QixpQkFBaUIsQ0FBRSxJQUFJbkMsb0NBQW9DLENBQUVZLFFBQVMsQ0FBRSxDQUFDO0lBQ2xGLE1BQU1ELHVCQUF1QixHQUFHQyxRQUFRLENBQUNFLDhCQUE4QixDQUFDLENBQUMsQ0FBQ3NCLG1CQUFtQixDQUFDLENBQUMsQ0FBQ0MsY0FBYyxDQUFDLENBQUM7SUFDaEgsSUFBSSxDQUFDL0IsOEJBQThCLENBQUNLLHVCQUF1QixHQUFHQSx1QkFBdUI7SUFDckZBLHVCQUF1QixDQUFDMkIsMEJBQTBCLENBQUUxQixRQUFRLENBQUNLLHlCQUF5QixDQUFDLENBQUUsQ0FBQztJQUMxRkwsUUFBUSxDQUFDMkIsUUFBUSxDQUFDLENBQUMsQ0FBQ0Msb0JBQW9CLENBQUU3Qix1QkFBd0IsQ0FBQzs7SUFFbkU7SUFDQUYsR0FBRyxDQUFDZ0MsV0FBVyxDQUFDQyxxQkFBcUIsQ0FBQ2pCLEdBQUcsQ0FBRSxLQUFNLENBQUM7RUFDcEQ7QUFDRjtBQUVBMUIsd0JBQXdCLENBQUM0QyxRQUFRLENBQUUsdUJBQXVCLEVBQUV2QyxxQkFBc0IsQ0FBQztBQUVuRixlQUFlQSxxQkFBcUIifQ==