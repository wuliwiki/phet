// Copyright 2015-2022, University of Colorado Boulder

/**
 * View representation for messenger RNA. This is done differently from most if not all of the other mobile biomolecules
 * because it is represented as an unclosed shape.
 *
 * @author Sharfudeen Ashraf
 * @author John Blanco
 * @author Aadish Gupta
 */

import Bounds2 from '../../../../dot/js/Bounds2.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import ModelViewTransform2 from '../../../../phetcommon/js/view/ModelViewTransform2.js';
import { Rectangle } from '../../../../scenery/js/imports.js';
import geneExpressionEssentials from '../../geneExpressionEssentials.js';
import GeneExpressionEssentialsStrings from '../../GeneExpressionEssentialsStrings.js';
import GEEQueryParameters from '../GEEQueryParameters.js';
import FadeLabel from './FadeLabel.js';
import MobileBiomoleculeNode from './MobileBiomoleculeNode.js';
import PlacementHintNode from './PlacementHintNode.js';
const quotedMRnaString = GeneExpressionEssentialsStrings.quotedMRna;
class MessengerRnaNode extends MobileBiomoleculeNode {
  /**
   * @param {ModelViewTransform2} modelViewTransform
   * @param {MessengerRna} messengerRna
   */
  constructor(modelViewTransform, messengerRna) {
    super(modelViewTransform, messengerRna, {
      lineWidth: 2
    });

    // Add placement hints that show where ribosomes and mRNA destroyers can be attached.  Placement hint node, like
    // other mobile biomolecule nodes, are designed to position themselves, but we don't want that to happen here since
    // they are child nodes, so a compensated model-view transform is needed.
    const scaleOnlyTransform = ModelViewTransform2.createSinglePointScaleInvertedYMapping(Vector2.ZERO, Vector2.ZERO, modelViewTransform.getMatrix().getScaleVector().x);
    const ribosomePlacementHintNode = new PlacementHintNode(scaleOnlyTransform, messengerRna.ribosomePlacementHint);
    const mRnaDestroyerPlacementHintNode = new PlacementHintNode(scaleOnlyTransform, messengerRna.mRnaDestroyerPlacementHint);
    this.addChild(ribosomePlacementHintNode);
    this.addChild(mRnaDestroyerPlacementHintNode);

    // Add the label. This fades in during synthesis, then fades out.
    const label = new FadeLabel(quotedMRnaString, false, messengerRna.existenceStrengthProperty);
    this.addChild(label);

    // handler function for changes to the "being synthesized" state
    function handleBeingSynthesizedChanged(beingSynthesized) {
      if (beingSynthesized) {
        label.startFadeIn(3000); // Fade time chosen empirically.
      } else {
        label.startFadeOut(1000); // Fade time chosen empirically.
      }
    }

    messengerRna.beingSynthesizedProperty.link(handleBeingSynthesizedChanged);

    // To improve performance, the bounds method for the main path is set to 'none' here so that the bounds aren't
    // computed on changes, and the local bounds are explicitly set below when the model shape changes.
    this.shapeNode.boundsMethod = 'none';
    this.shapeNode.localBounds = new Bounds2(0, 0, 0.1, 0.1); // add some initial arbitrary bounds to avoid positioning issues
    let boundsRectangle; // bounds rectangle, only used if enabled via query parameter
    if (GEEQueryParameters.showMRnaBoundingRect) {
      boundsRectangle = new Rectangle(0, 0, 0.1, 0.1, {
        fill: 'rgba( 256, 256, 0, 0.5 )'
      });
      this.addChild(boundsRectangle);
    }

    // handler for shape changes
    const handleShapeChanged = shape => {
      const shapeBounds = shape.bounds;
      if (shapeBounds.isFinite()) {
        const scaledShapeBounds = this.scaleOnlyModelViewTransform.modelToViewShape(shapeBounds);
        boundsRectangle && boundsRectangle.setRectBounds(scaledShapeBounds);

        // position the label
        label.left = scaledShapeBounds.maxX;
        label.y = scaledShapeBounds.minY;

        // set the mouse and touch areas to the overall bounds to make this easier for the user to move around
        this.mouseArea = scaledShapeBounds;
        this.touchArea = scaledShapeBounds;

        // explicitly set the local bounds of the main shape path - improves performance
        this.shapeNode.localBounds = scaledShapeBounds;
      }
    };

    // Update the label position as the shape changes.
    messengerRna.shapeProperty.lazyLink(handleShapeChanged);
    this.disposeMessengerRnaNode = () => {
      messengerRna.beingSynthesizedProperty.unlink(handleBeingSynthesizedChanged);
      messengerRna.shapeProperty.unlink(handleShapeChanged);
      ribosomePlacementHintNode.dispose();
      mRnaDestroyerPlacementHintNode.dispose();
    };
  }

  /**
   * @public
   */
  dispose() {
    this.disposeMessengerRnaNode();
    super.dispose();
  }
}
geneExpressionEssentials.register('MessengerRnaNode', MessengerRnaNode);
export default MessengerRnaNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb3VuZHMyIiwiVmVjdG9yMiIsIk1vZGVsVmlld1RyYW5zZm9ybTIiLCJSZWN0YW5nbGUiLCJnZW5lRXhwcmVzc2lvbkVzc2VudGlhbHMiLCJHZW5lRXhwcmVzc2lvbkVzc2VudGlhbHNTdHJpbmdzIiwiR0VFUXVlcnlQYXJhbWV0ZXJzIiwiRmFkZUxhYmVsIiwiTW9iaWxlQmlvbW9sZWN1bGVOb2RlIiwiUGxhY2VtZW50SGludE5vZGUiLCJxdW90ZWRNUm5hU3RyaW5nIiwicXVvdGVkTVJuYSIsIk1lc3NlbmdlclJuYU5vZGUiLCJjb25zdHJ1Y3RvciIsIm1vZGVsVmlld1RyYW5zZm9ybSIsIm1lc3NlbmdlclJuYSIsImxpbmVXaWR0aCIsInNjYWxlT25seVRyYW5zZm9ybSIsImNyZWF0ZVNpbmdsZVBvaW50U2NhbGVJbnZlcnRlZFlNYXBwaW5nIiwiWkVSTyIsImdldE1hdHJpeCIsImdldFNjYWxlVmVjdG9yIiwieCIsInJpYm9zb21lUGxhY2VtZW50SGludE5vZGUiLCJyaWJvc29tZVBsYWNlbWVudEhpbnQiLCJtUm5hRGVzdHJveWVyUGxhY2VtZW50SGludE5vZGUiLCJtUm5hRGVzdHJveWVyUGxhY2VtZW50SGludCIsImFkZENoaWxkIiwibGFiZWwiLCJleGlzdGVuY2VTdHJlbmd0aFByb3BlcnR5IiwiaGFuZGxlQmVpbmdTeW50aGVzaXplZENoYW5nZWQiLCJiZWluZ1N5bnRoZXNpemVkIiwic3RhcnRGYWRlSW4iLCJzdGFydEZhZGVPdXQiLCJiZWluZ1N5bnRoZXNpemVkUHJvcGVydHkiLCJsaW5rIiwic2hhcGVOb2RlIiwiYm91bmRzTWV0aG9kIiwibG9jYWxCb3VuZHMiLCJib3VuZHNSZWN0YW5nbGUiLCJzaG93TVJuYUJvdW5kaW5nUmVjdCIsImZpbGwiLCJoYW5kbGVTaGFwZUNoYW5nZWQiLCJzaGFwZSIsInNoYXBlQm91bmRzIiwiYm91bmRzIiwiaXNGaW5pdGUiLCJzY2FsZWRTaGFwZUJvdW5kcyIsInNjYWxlT25seU1vZGVsVmlld1RyYW5zZm9ybSIsIm1vZGVsVG9WaWV3U2hhcGUiLCJzZXRSZWN0Qm91bmRzIiwibGVmdCIsIm1heFgiLCJ5IiwibWluWSIsIm1vdXNlQXJlYSIsInRvdWNoQXJlYSIsInNoYXBlUHJvcGVydHkiLCJsYXp5TGluayIsImRpc3Bvc2VNZXNzZW5nZXJSbmFOb2RlIiwidW5saW5rIiwiZGlzcG9zZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiTWVzc2VuZ2VyUm5hTm9kZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNS0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBWaWV3IHJlcHJlc2VudGF0aW9uIGZvciBtZXNzZW5nZXIgUk5BLiBUaGlzIGlzIGRvbmUgZGlmZmVyZW50bHkgZnJvbSBtb3N0IGlmIG5vdCBhbGwgb2YgdGhlIG90aGVyIG1vYmlsZSBiaW9tb2xlY3VsZXNcclxuICogYmVjYXVzZSBpdCBpcyByZXByZXNlbnRlZCBhcyBhbiB1bmNsb3NlZCBzaGFwZS5cclxuICpcclxuICogQGF1dGhvciBTaGFyZnVkZWVuIEFzaHJhZlxyXG4gKiBAYXV0aG9yIEpvaG4gQmxhbmNvXHJcbiAqIEBhdXRob3IgQWFkaXNoIEd1cHRhXHJcbiAqL1xyXG5cclxuaW1wb3J0IEJvdW5kczIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL0JvdW5kczIuanMnO1xyXG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVmVjdG9yMi5qcyc7XHJcbmltcG9ydCBNb2RlbFZpZXdUcmFuc2Zvcm0yIGZyb20gJy4uLy4uLy4uLy4uL3BoZXRjb21tb24vanMvdmlldy9Nb2RlbFZpZXdUcmFuc2Zvcm0yLmpzJztcclxuaW1wb3J0IHsgUmVjdGFuZ2xlIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IGdlbmVFeHByZXNzaW9uRXNzZW50aWFscyBmcm9tICcuLi8uLi9nZW5lRXhwcmVzc2lvbkVzc2VudGlhbHMuanMnO1xyXG5pbXBvcnQgR2VuZUV4cHJlc3Npb25Fc3NlbnRpYWxzU3RyaW5ncyBmcm9tICcuLi8uLi9HZW5lRXhwcmVzc2lvbkVzc2VudGlhbHNTdHJpbmdzLmpzJztcclxuaW1wb3J0IEdFRVF1ZXJ5UGFyYW1ldGVycyBmcm9tICcuLi9HRUVRdWVyeVBhcmFtZXRlcnMuanMnO1xyXG5pbXBvcnQgRmFkZUxhYmVsIGZyb20gJy4vRmFkZUxhYmVsLmpzJztcclxuaW1wb3J0IE1vYmlsZUJpb21vbGVjdWxlTm9kZSBmcm9tICcuL01vYmlsZUJpb21vbGVjdWxlTm9kZS5qcyc7XHJcbmltcG9ydCBQbGFjZW1lbnRIaW50Tm9kZSBmcm9tICcuL1BsYWNlbWVudEhpbnROb2RlLmpzJztcclxuXHJcbmNvbnN0IHF1b3RlZE1SbmFTdHJpbmcgPSBHZW5lRXhwcmVzc2lvbkVzc2VudGlhbHNTdHJpbmdzLnF1b3RlZE1SbmE7XHJcblxyXG5jbGFzcyBNZXNzZW5nZXJSbmFOb2RlIGV4dGVuZHMgTW9iaWxlQmlvbW9sZWN1bGVOb2RlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtNb2RlbFZpZXdUcmFuc2Zvcm0yfSBtb2RlbFZpZXdUcmFuc2Zvcm1cclxuICAgKiBAcGFyYW0ge01lc3NlbmdlclJuYX0gbWVzc2VuZ2VyUm5hXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIG1vZGVsVmlld1RyYW5zZm9ybSwgbWVzc2VuZ2VyUm5hICkge1xyXG5cclxuICAgIHN1cGVyKCBtb2RlbFZpZXdUcmFuc2Zvcm0sIG1lc3NlbmdlclJuYSwgeyBsaW5lV2lkdGg6IDIgfSApO1xyXG5cclxuICAgIC8vIEFkZCBwbGFjZW1lbnQgaGludHMgdGhhdCBzaG93IHdoZXJlIHJpYm9zb21lcyBhbmQgbVJOQSBkZXN0cm95ZXJzIGNhbiBiZSBhdHRhY2hlZC4gIFBsYWNlbWVudCBoaW50IG5vZGUsIGxpa2VcclxuICAgIC8vIG90aGVyIG1vYmlsZSBiaW9tb2xlY3VsZSBub2RlcywgYXJlIGRlc2lnbmVkIHRvIHBvc2l0aW9uIHRoZW1zZWx2ZXMsIGJ1dCB3ZSBkb24ndCB3YW50IHRoYXQgdG8gaGFwcGVuIGhlcmUgc2luY2VcclxuICAgIC8vIHRoZXkgYXJlIGNoaWxkIG5vZGVzLCBzbyBhIGNvbXBlbnNhdGVkIG1vZGVsLXZpZXcgdHJhbnNmb3JtIGlzIG5lZWRlZC5cclxuICAgIGNvbnN0IHNjYWxlT25seVRyYW5zZm9ybSA9IE1vZGVsVmlld1RyYW5zZm9ybTIuY3JlYXRlU2luZ2xlUG9pbnRTY2FsZUludmVydGVkWU1hcHBpbmcoXHJcbiAgICAgIFZlY3RvcjIuWkVSTyxcclxuICAgICAgVmVjdG9yMi5aRVJPLFxyXG4gICAgICBtb2RlbFZpZXdUcmFuc2Zvcm0uZ2V0TWF0cml4KCkuZ2V0U2NhbGVWZWN0b3IoKS54XHJcbiAgICApO1xyXG4gICAgY29uc3Qgcmlib3NvbWVQbGFjZW1lbnRIaW50Tm9kZSA9IG5ldyBQbGFjZW1lbnRIaW50Tm9kZSggc2NhbGVPbmx5VHJhbnNmb3JtLCBtZXNzZW5nZXJSbmEucmlib3NvbWVQbGFjZW1lbnRIaW50ICk7XHJcbiAgICBjb25zdCBtUm5hRGVzdHJveWVyUGxhY2VtZW50SGludE5vZGUgPSBuZXcgUGxhY2VtZW50SGludE5vZGUoXHJcbiAgICAgIHNjYWxlT25seVRyYW5zZm9ybSxcclxuICAgICAgbWVzc2VuZ2VyUm5hLm1SbmFEZXN0cm95ZXJQbGFjZW1lbnRIaW50XHJcbiAgICApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggcmlib3NvbWVQbGFjZW1lbnRIaW50Tm9kZSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggbVJuYURlc3Ryb3llclBsYWNlbWVudEhpbnROb2RlICk7XHJcblxyXG4gICAgLy8gQWRkIHRoZSBsYWJlbC4gVGhpcyBmYWRlcyBpbiBkdXJpbmcgc3ludGhlc2lzLCB0aGVuIGZhZGVzIG91dC5cclxuICAgIGNvbnN0IGxhYmVsID0gbmV3IEZhZGVMYWJlbCggcXVvdGVkTVJuYVN0cmluZywgZmFsc2UsIG1lc3NlbmdlclJuYS5leGlzdGVuY2VTdHJlbmd0aFByb3BlcnR5ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBsYWJlbCApO1xyXG5cclxuICAgIC8vIGhhbmRsZXIgZnVuY3Rpb24gZm9yIGNoYW5nZXMgdG8gdGhlIFwiYmVpbmcgc3ludGhlc2l6ZWRcIiBzdGF0ZVxyXG4gICAgZnVuY3Rpb24gaGFuZGxlQmVpbmdTeW50aGVzaXplZENoYW5nZWQoIGJlaW5nU3ludGhlc2l6ZWQgKSB7XHJcbiAgICAgIGlmICggYmVpbmdTeW50aGVzaXplZCApIHtcclxuICAgICAgICBsYWJlbC5zdGFydEZhZGVJbiggMzAwMCApOyAvLyBGYWRlIHRpbWUgY2hvc2VuIGVtcGlyaWNhbGx5LlxyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIGxhYmVsLnN0YXJ0RmFkZU91dCggMTAwMCApOyAvLyBGYWRlIHRpbWUgY2hvc2VuIGVtcGlyaWNhbGx5LlxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbWVzc2VuZ2VyUm5hLmJlaW5nU3ludGhlc2l6ZWRQcm9wZXJ0eS5saW5rKCBoYW5kbGVCZWluZ1N5bnRoZXNpemVkQ2hhbmdlZCApO1xyXG5cclxuICAgIC8vIFRvIGltcHJvdmUgcGVyZm9ybWFuY2UsIHRoZSBib3VuZHMgbWV0aG9kIGZvciB0aGUgbWFpbiBwYXRoIGlzIHNldCB0byAnbm9uZScgaGVyZSBzbyB0aGF0IHRoZSBib3VuZHMgYXJlbid0XHJcbiAgICAvLyBjb21wdXRlZCBvbiBjaGFuZ2VzLCBhbmQgdGhlIGxvY2FsIGJvdW5kcyBhcmUgZXhwbGljaXRseSBzZXQgYmVsb3cgd2hlbiB0aGUgbW9kZWwgc2hhcGUgY2hhbmdlcy5cclxuICAgIHRoaXMuc2hhcGVOb2RlLmJvdW5kc01ldGhvZCA9ICdub25lJztcclxuICAgIHRoaXMuc2hhcGVOb2RlLmxvY2FsQm91bmRzID0gbmV3IEJvdW5kczIoIDAsIDAsIDAuMSwgMC4xICk7IC8vIGFkZCBzb21lIGluaXRpYWwgYXJiaXRyYXJ5IGJvdW5kcyB0byBhdm9pZCBwb3NpdGlvbmluZyBpc3N1ZXNcclxuICAgIGxldCBib3VuZHNSZWN0YW5nbGU7IC8vIGJvdW5kcyByZWN0YW5nbGUsIG9ubHkgdXNlZCBpZiBlbmFibGVkIHZpYSBxdWVyeSBwYXJhbWV0ZXJcclxuICAgIGlmICggR0VFUXVlcnlQYXJhbWV0ZXJzLnNob3dNUm5hQm91bmRpbmdSZWN0ICkge1xyXG4gICAgICBib3VuZHNSZWN0YW5nbGUgPSBuZXcgUmVjdGFuZ2xlKCAwLCAwLCAwLjEsIDAuMSwgeyBmaWxsOiAncmdiYSggMjU2LCAyNTYsIDAsIDAuNSApJyB9ICk7XHJcbiAgICAgIHRoaXMuYWRkQ2hpbGQoIGJvdW5kc1JlY3RhbmdsZSApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGhhbmRsZXIgZm9yIHNoYXBlIGNoYW5nZXNcclxuICAgIGNvbnN0IGhhbmRsZVNoYXBlQ2hhbmdlZCA9IHNoYXBlID0+IHtcclxuICAgICAgY29uc3Qgc2hhcGVCb3VuZHMgPSBzaGFwZS5ib3VuZHM7XHJcbiAgICAgIGlmICggc2hhcGVCb3VuZHMuaXNGaW5pdGUoKSApIHtcclxuICAgICAgICBjb25zdCBzY2FsZWRTaGFwZUJvdW5kcyA9IHRoaXMuc2NhbGVPbmx5TW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3U2hhcGUoIHNoYXBlQm91bmRzICk7XHJcbiAgICAgICAgYm91bmRzUmVjdGFuZ2xlICYmIGJvdW5kc1JlY3RhbmdsZS5zZXRSZWN0Qm91bmRzKCBzY2FsZWRTaGFwZUJvdW5kcyApO1xyXG5cclxuICAgICAgICAvLyBwb3NpdGlvbiB0aGUgbGFiZWxcclxuICAgICAgICBsYWJlbC5sZWZ0ID0gc2NhbGVkU2hhcGVCb3VuZHMubWF4WDtcclxuICAgICAgICBsYWJlbC55ID0gc2NhbGVkU2hhcGVCb3VuZHMubWluWTtcclxuXHJcbiAgICAgICAgLy8gc2V0IHRoZSBtb3VzZSBhbmQgdG91Y2ggYXJlYXMgdG8gdGhlIG92ZXJhbGwgYm91bmRzIHRvIG1ha2UgdGhpcyBlYXNpZXIgZm9yIHRoZSB1c2VyIHRvIG1vdmUgYXJvdW5kXHJcbiAgICAgICAgdGhpcy5tb3VzZUFyZWEgPSBzY2FsZWRTaGFwZUJvdW5kcztcclxuICAgICAgICB0aGlzLnRvdWNoQXJlYSA9IHNjYWxlZFNoYXBlQm91bmRzO1xyXG5cclxuICAgICAgICAvLyBleHBsaWNpdGx5IHNldCB0aGUgbG9jYWwgYm91bmRzIG9mIHRoZSBtYWluIHNoYXBlIHBhdGggLSBpbXByb3ZlcyBwZXJmb3JtYW5jZVxyXG4gICAgICAgIHRoaXMuc2hhcGVOb2RlLmxvY2FsQm91bmRzID0gc2NhbGVkU2hhcGVCb3VuZHM7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gVXBkYXRlIHRoZSBsYWJlbCBwb3NpdGlvbiBhcyB0aGUgc2hhcGUgY2hhbmdlcy5cclxuICAgIG1lc3NlbmdlclJuYS5zaGFwZVByb3BlcnR5LmxhenlMaW5rKCBoYW5kbGVTaGFwZUNoYW5nZWQgKTtcclxuXHJcbiAgICB0aGlzLmRpc3Bvc2VNZXNzZW5nZXJSbmFOb2RlID0gKCkgPT4ge1xyXG4gICAgICBtZXNzZW5nZXJSbmEuYmVpbmdTeW50aGVzaXplZFByb3BlcnR5LnVubGluayggaGFuZGxlQmVpbmdTeW50aGVzaXplZENoYW5nZWQgKTtcclxuICAgICAgbWVzc2VuZ2VyUm5hLnNoYXBlUHJvcGVydHkudW5saW5rKCBoYW5kbGVTaGFwZUNoYW5nZWQgKTtcclxuICAgICAgcmlib3NvbWVQbGFjZW1lbnRIaW50Tm9kZS5kaXNwb3NlKCk7XHJcbiAgICAgIG1SbmFEZXN0cm95ZXJQbGFjZW1lbnRIaW50Tm9kZS5kaXNwb3NlKCk7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICB0aGlzLmRpc3Bvc2VNZXNzZW5nZXJSbmFOb2RlKCk7XHJcbiAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgfVxyXG59XHJcblxyXG5nZW5lRXhwcmVzc2lvbkVzc2VudGlhbHMucmVnaXN0ZXIoICdNZXNzZW5nZXJSbmFOb2RlJywgTWVzc2VuZ2VyUm5hTm9kZSApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgTWVzc2VuZ2VyUm5hTm9kZTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsT0FBTyxNQUFNLCtCQUErQjtBQUNuRCxPQUFPQyxPQUFPLE1BQU0sK0JBQStCO0FBQ25ELE9BQU9DLG1CQUFtQixNQUFNLHVEQUF1RDtBQUN2RixTQUFTQyxTQUFTLFFBQVEsbUNBQW1DO0FBQzdELE9BQU9DLHdCQUF3QixNQUFNLG1DQUFtQztBQUN4RSxPQUFPQywrQkFBK0IsTUFBTSwwQ0FBMEM7QUFDdEYsT0FBT0Msa0JBQWtCLE1BQU0sMEJBQTBCO0FBQ3pELE9BQU9DLFNBQVMsTUFBTSxnQkFBZ0I7QUFDdEMsT0FBT0MscUJBQXFCLE1BQU0sNEJBQTRCO0FBQzlELE9BQU9DLGlCQUFpQixNQUFNLHdCQUF3QjtBQUV0RCxNQUFNQyxnQkFBZ0IsR0FBR0wsK0JBQStCLENBQUNNLFVBQVU7QUFFbkUsTUFBTUMsZ0JBQWdCLFNBQVNKLHFCQUFxQixDQUFDO0VBRW5EO0FBQ0Y7QUFDQTtBQUNBO0VBQ0VLLFdBQVdBLENBQUVDLGtCQUFrQixFQUFFQyxZQUFZLEVBQUc7SUFFOUMsS0FBSyxDQUFFRCxrQkFBa0IsRUFBRUMsWUFBWSxFQUFFO01BQUVDLFNBQVMsRUFBRTtJQUFFLENBQUUsQ0FBQzs7SUFFM0Q7SUFDQTtJQUNBO0lBQ0EsTUFBTUMsa0JBQWtCLEdBQUdmLG1CQUFtQixDQUFDZ0Isc0NBQXNDLENBQ25GakIsT0FBTyxDQUFDa0IsSUFBSSxFQUNabEIsT0FBTyxDQUFDa0IsSUFBSSxFQUNaTCxrQkFBa0IsQ0FBQ00sU0FBUyxDQUFDLENBQUMsQ0FBQ0MsY0FBYyxDQUFDLENBQUMsQ0FBQ0MsQ0FDbEQsQ0FBQztJQUNELE1BQU1DLHlCQUF5QixHQUFHLElBQUlkLGlCQUFpQixDQUFFUSxrQkFBa0Is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