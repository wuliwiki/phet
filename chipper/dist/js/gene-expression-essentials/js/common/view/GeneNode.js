// Copyright 2015-2022, University of Colorado Boulder

/**
 * Type that represents a gene in the view. Since a gene is basically a sequential collection of base pairs, this node
 * is basically something that highlights and labels the appropriate areas on the DNA strand.
 *
 * @author Sharfudeen Ashraf
 * @author John Blanco
 * @author Aadish Gupta
 */

import { Shape } from '../../../../kite/js/imports.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { Color, Node, Path, RichText, Text } from '../../../../scenery/js/imports.js';
import geneExpressionEssentials from '../../geneExpressionEssentials.js';
import GeneExpressionEssentialsStrings from '../../GeneExpressionEssentialsStrings.js';
import GEEConstants from '../GEEConstants.js';
const regulatoryRegionString = GeneExpressionEssentialsStrings.regulatoryRegion;
const transcribedRegionString = GeneExpressionEssentialsStrings.transcribedRegion;

// constants
const REGION_LABEL_FONT = new PhetFont({
  size: 12,
  weight: 'bold'
});
const GENE_LABEL_FONT = new PhetFont({
  size: 18,
  weight: 'bold'
});
const BRACKET_DEPTH = 30;
const RECT_ROUNDING = 15;
class GeneNode extends Node {
  /**
   * @param {ModelViewTransform2} modelViewTransform
   * @param {Gene} gene
   * @param {DnaMolecule} dnaMolecule
   * @param {string} label
   * @param {boolean} showBracketLabel
   */
  constructor(modelViewTransform, gene, dnaMolecule, label, showBracketLabel) {
    super();
    const highlightHeight = -modelViewTransform.modelToViewDeltaY(GEEConstants.DNA_MOLECULE_DIAMETER * 1.5);
    const highlightStartY = modelViewTransform.modelToViewY(dnaMolecule.getLeftEdgePosition().y) - highlightHeight / 2;

    // Add the highlight for the regulatory region.
    const regRegionHighlightStartX = modelViewTransform.modelToViewX(dnaMolecule.getBasePairXOffsetByIndex(gene.getRegulatoryRegion().min));
    const regRegionWidth = modelViewTransform.modelToViewX(dnaMolecule.getBasePairXOffsetByIndex(gene.getRegulatoryRegion().max)) - regRegionHighlightStartX;
    const regRegionShape = Shape.roundRect(regRegionHighlightStartX, highlightStartY, regRegionWidth, highlightHeight, RECT_ROUNDING, RECT_ROUNDING);
    const regulatoryRegionNode = new Path(regRegionShape, {
      fill: gene.getRegulatoryRegionColor()
    });
    this.addChild(regulatoryRegionNode);
    const regulatoryRegionCaption = new RichText(regulatoryRegionString, {
      font: REGION_LABEL_FONT,
      maxWidth: 100,
      align: 'center',
      centerX: regulatoryRegionNode.bounds.getCenterX(),
      top: regulatoryRegionNode.bounds.getMaxY()
    });
    this.addChild(regulatoryRegionCaption);

    // Add the highlight for the transcribed region.
    const transcribedRegionHighlightStartX = modelViewTransform.modelToViewX(dnaMolecule.getBasePairXOffsetByIndex(gene.getTranscribedRegion().min));
    const transcribedRegionWidth = modelViewTransform.modelToViewX(dnaMolecule.getBasePairXOffsetByIndex(gene.getTranscribedRegion().max)) - transcribedRegionHighlightStartX;
    const transcribedRegionShape = Shape.roundRect(transcribedRegionHighlightStartX, highlightStartY, transcribedRegionWidth, highlightHeight, RECT_ROUNDING, RECT_ROUNDING);
    const transcribedRegionNode = new Path(transcribedRegionShape, {
      fill: gene.getTranscribedRegionColor()
    });
    this.addChild(transcribedRegionNode);
    const transcribedRegionCaption = new RichText(transcribedRegionString, {
      font: REGION_LABEL_FONT,
      maxWidth: 100,
      align: 'center',
      centerX: transcribedRegionNode.bounds.getCenterX(),
      top: transcribedRegionNode.bounds.getMaxY()
    });
    this.addChild(transcribedRegionCaption);

    // Add the bracket.  This is a portion (the non-textual part) of the  label for the gene.
    if (showBracketLabel) {
      const bracketPath = new Shape();
      bracketPath.moveTo(regulatoryRegionNode.bounds.getMinX(), regulatoryRegionCaption.bounds.getMaxY());
      bracketPath.lineToRelative(BRACKET_DEPTH, BRACKET_DEPTH);
      bracketPath.lineTo(transcribedRegionNode.bounds.getMaxX() - BRACKET_DEPTH, transcribedRegionCaption.bounds.getMaxY() + BRACKET_DEPTH);
      bracketPath.lineToRelative(BRACKET_DEPTH, -BRACKET_DEPTH);
      this.addChild(new Path(bracketPath, {
        lineWidth: 2,
        stroke: Color.BLACK
      }));

      // And the textual label for the gene.
      const labelText = new Text(label, {
        font: GENE_LABEL_FONT,
        maxWidth: 150
      });
      this.addChild(labelText);
      const bracketBounds = bracketPath.bounds;
      labelText.x = bracketBounds.getCenterX() - labelText.bounds.width / 2;
      labelText.y = bracketBounds.getMaxY() + 20;
    }
  }
}
geneExpressionEssentials.register('GeneNode', GeneNode);
export default GeneNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTaGFwZSIsIlBoZXRGb250IiwiQ29sb3IiLCJOb2RlIiwiUGF0aCIsIlJpY2hUZXh0IiwiVGV4dCIsImdlbmVFeHByZXNzaW9uRXNzZW50aWFscyIsIkdlbmVFeHByZXNzaW9uRXNzZW50aWFsc1N0cmluZ3MiLCJHRUVDb25zdGFudHMiLCJyZWd1bGF0b3J5UmVnaW9uU3RyaW5nIiwicmVndWxhdG9yeVJlZ2lvbiIsInRyYW5zY3JpYmVkUmVnaW9uU3RyaW5nIiwidHJhbnNjcmliZWRSZWdpb24iLCJSRUdJT05fTEFCRUxfRk9OVCIsInNpemUiLCJ3ZWlnaHQiLCJHRU5FX0xBQkVMX0ZPTlQiLCJCUkFDS0VUX0RFUFRIIiwiUkVDVF9ST1VORElORyIsIkdlbmVOb2RlIiwiY29uc3RydWN0b3IiLCJtb2RlbFZpZXdUcmFuc2Zvcm0iLCJnZW5lIiwiZG5hTW9sZWN1bGUiLCJsYWJlbCIsInNob3dCcmFja2V0TGFiZWwiLCJoaWdobGlnaHRIZWlnaHQiLCJtb2RlbFRvVmlld0RlbHRhWSIsIkROQV9NT0xFQ1VMRV9ESUFNRVRFUiIsImhpZ2hsaWdodFN0YXJ0WSIsIm1vZGVsVG9WaWV3WSIsImdldExlZnRFZGdlUG9zaXRpb24iLCJ5IiwicmVnUmVnaW9uSGlnaGxpZ2h0U3RhcnRYIiwibW9kZWxUb1ZpZXdYIiwiZ2V0QmFzZVBhaXJYT2Zmc2V0QnlJbmRleCIsImdldFJlZ3VsYXRvcnlSZWdpb24iLCJtaW4iLCJyZWdSZWdpb25XaWR0aCIsIm1heCIsInJlZ1JlZ2lvblNoYXBlIiwicm91bmRSZWN0IiwicmVndWxhdG9yeVJlZ2lvbk5vZGUiLCJmaWxsIiwiZ2V0UmVndWxhdG9yeVJlZ2lvbkNvbG9yIiwiYWRkQ2hpbGQiLCJyZWd1bGF0b3J5UmVnaW9uQ2FwdGlvbiIsImZvbnQiLCJtYXhXaWR0aCIsImFsaWduIiwiY2VudGVyWCIsImJvdW5kcyIsImdldENlbnRlclgiLCJ0b3AiLCJnZXRNYXhZIiwidHJhbnNjcmliZWRSZWdpb25IaWdobGlnaHRTdGFydFgiLCJnZXRUcmFuc2NyaWJlZFJlZ2lvbiIsInRyYW5zY3JpYmVkUmVnaW9uV2lkdGgiLCJ0cmFuc2NyaWJlZFJlZ2lvblNoYXBlIiwidHJhbnNjcmliZWRSZWdpb25Ob2RlIiwiZ2V0VHJhbnNjcmliZWRSZWdpb25Db2xvciIsInRyYW5zY3JpYmVkUmVnaW9uQ2FwdGlvbiIsImJyYWNrZXRQYXRoIiwibW92ZVRvIiwiZ2V0TWluWCIsImxpbmVUb1JlbGF0aXZlIiwibGluZVRvIiwiZ2V0TWF4WCIsImxpbmVXaWR0aCIsInN0cm9rZSIsIkJMQUNLIiwibGFiZWxUZXh0IiwiYnJhY2tldEJvdW5kcyIsIngiLCJ3aWR0aCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiR2VuZU5vZGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTUtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogVHlwZSB0aGF0IHJlcHJlc2VudHMgYSBnZW5lIGluIHRoZSB2aWV3LiBTaW5jZSBhIGdlbmUgaXMgYmFzaWNhbGx5IGEgc2VxdWVudGlhbCBjb2xsZWN0aW9uIG9mIGJhc2UgcGFpcnMsIHRoaXMgbm9kZVxyXG4gKiBpcyBiYXNpY2FsbHkgc29tZXRoaW5nIHRoYXQgaGlnaGxpZ2h0cyBhbmQgbGFiZWxzIHRoZSBhcHByb3ByaWF0ZSBhcmVhcyBvbiB0aGUgRE5BIHN0cmFuZC5cclxuICpcclxuICogQGF1dGhvciBTaGFyZnVkZWVuIEFzaHJhZlxyXG4gKiBAYXV0aG9yIEpvaG4gQmxhbmNvXHJcbiAqIEBhdXRob3IgQWFkaXNoIEd1cHRhXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgU2hhcGUgfSBmcm9tICcuLi8uLi8uLi8uLi9raXRlL2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgUGhldEZvbnQgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1BoZXRGb250LmpzJztcclxuaW1wb3J0IHsgQ29sb3IsIE5vZGUsIFBhdGgsIFJpY2hUZXh0LCBUZXh0IH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IGdlbmVFeHByZXNzaW9uRXNzZW50aWFscyBmcm9tICcuLi8uLi9nZW5lRXhwcmVzc2lvbkVzc2VudGlhbHMuanMnO1xyXG5pbXBvcnQgR2VuZUV4cHJlc3Npb25Fc3NlbnRpYWxzU3RyaW5ncyBmcm9tICcuLi8uLi9HZW5lRXhwcmVzc2lvbkVzc2VudGlhbHNTdHJpbmdzLmpzJztcclxuaW1wb3J0IEdFRUNvbnN0YW50cyBmcm9tICcuLi9HRUVDb25zdGFudHMuanMnO1xyXG5cclxuY29uc3QgcmVndWxhdG9yeVJlZ2lvblN0cmluZyA9IEdlbmVFeHByZXNzaW9uRXNzZW50aWFsc1N0cmluZ3MucmVndWxhdG9yeVJlZ2lvbjtcclxuY29uc3QgdHJhbnNjcmliZWRSZWdpb25TdHJpbmcgPSBHZW5lRXhwcmVzc2lvbkVzc2VudGlhbHNTdHJpbmdzLnRyYW5zY3JpYmVkUmVnaW9uO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IFJFR0lPTl9MQUJFTF9GT05UID0gbmV3IFBoZXRGb250KCB7IHNpemU6IDEyLCB3ZWlnaHQ6ICdib2xkJyB9ICk7XHJcbmNvbnN0IEdFTkVfTEFCRUxfRk9OVCA9IG5ldyBQaGV0Rm9udCggeyBzaXplOiAxOCwgd2VpZ2h0OiAnYm9sZCcgfSApO1xyXG5jb25zdCBCUkFDS0VUX0RFUFRIID0gMzA7XHJcbmNvbnN0IFJFQ1RfUk9VTkRJTkcgPSAxNTtcclxuXHJcbmNsYXNzIEdlbmVOb2RlIGV4dGVuZHMgTm9kZSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7TW9kZWxWaWV3VHJhbnNmb3JtMn0gbW9kZWxWaWV3VHJhbnNmb3JtXHJcbiAgICogQHBhcmFtIHtHZW5lfSBnZW5lXHJcbiAgICogQHBhcmFtIHtEbmFNb2xlY3VsZX0gZG5hTW9sZWN1bGVcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbGFiZWxcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNob3dCcmFja2V0TGFiZWxcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvciggbW9kZWxWaWV3VHJhbnNmb3JtLCBnZW5lLCBkbmFNb2xlY3VsZSwgbGFiZWwsIHNob3dCcmFja2V0TGFiZWwgKSB7XHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIGNvbnN0IGhpZ2hsaWdodEhlaWdodCA9IC1tb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdEZWx0YVkoIEdFRUNvbnN0YW50cy5ETkFfTU9MRUNVTEVfRElBTUVURVIgKiAxLjUgKTtcclxuICAgIGNvbnN0IGhpZ2hsaWdodFN0YXJ0WSA9IG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1koIGRuYU1vbGVjdWxlLmdldExlZnRFZGdlUG9zaXRpb24oKS55ICkgLSBoaWdobGlnaHRIZWlnaHQgLyAyO1xyXG5cclxuICAgIC8vIEFkZCB0aGUgaGlnaGxpZ2h0IGZvciB0aGUgcmVndWxhdG9yeSByZWdpb24uXHJcbiAgICBjb25zdCByZWdSZWdpb25IaWdobGlnaHRTdGFydFggPSBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdYKFxyXG4gICAgICBkbmFNb2xlY3VsZS5nZXRCYXNlUGFpclhPZmZzZXRCeUluZGV4KCBnZW5lLmdldFJlZ3VsYXRvcnlSZWdpb24oKS5taW4gKVxyXG4gICAgKTtcclxuICAgIGNvbnN0IHJlZ1JlZ2lvbldpZHRoID0gbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WChcclxuICAgICAgZG5hTW9sZWN1bGUuZ2V0QmFzZVBhaXJYT2Zmc2V0QnlJbmRleCggZ2VuZS5nZXRSZWd1bGF0b3J5UmVnaW9uKCkubWF4IClcclxuICAgICkgLSByZWdSZWdpb25IaWdobGlnaHRTdGFydFg7XHJcbiAgICBjb25zdCByZWdSZWdpb25TaGFwZSA9IFNoYXBlLnJvdW5kUmVjdCggcmVnUmVnaW9uSGlnaGxpZ2h0U3RhcnRYLCBoaWdobGlnaHRTdGFydFksIHJlZ1JlZ2lvbldpZHRoLCBoaWdobGlnaHRIZWlnaHQsXHJcbiAgICAgIFJFQ1RfUk9VTkRJTkcsIFJFQ1RfUk9VTkRJTkcgKTtcclxuICAgIGNvbnN0IHJlZ3VsYXRvcnlSZWdpb25Ob2RlID0gbmV3IFBhdGgoIHJlZ1JlZ2lvblNoYXBlLCB7IGZpbGw6IGdlbmUuZ2V0UmVndWxhdG9yeVJlZ2lvbkNvbG9yKCkgfSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggcmVndWxhdG9yeVJlZ2lvbk5vZGUgKTtcclxuXHJcbiAgICBjb25zdCByZWd1bGF0b3J5UmVnaW9uQ2FwdGlvbiA9IG5ldyBSaWNoVGV4dCggcmVndWxhdG9yeVJlZ2lvblN0cmluZywge1xyXG4gICAgICBmb250OiBSRUdJT05fTEFCRUxfRk9OVCxcclxuICAgICAgbWF4V2lkdGg6IDEwMCxcclxuICAgICAgYWxpZ246ICdjZW50ZXInLFxyXG4gICAgICBjZW50ZXJYOiByZWd1bGF0b3J5UmVnaW9uTm9kZS5ib3VuZHMuZ2V0Q2VudGVyWCgpLFxyXG4gICAgICB0b3A6IHJlZ3VsYXRvcnlSZWdpb25Ob2RlLmJvdW5kcy5nZXRNYXhZKClcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHJlZ3VsYXRvcnlSZWdpb25DYXB0aW9uICk7XHJcblxyXG4gICAgLy8gQWRkIHRoZSBoaWdobGlnaHQgZm9yIHRoZSB0cmFuc2NyaWJlZCByZWdpb24uXHJcbiAgICBjb25zdCB0cmFuc2NyaWJlZFJlZ2lvbkhpZ2hsaWdodFN0YXJ0WCA9IG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1goXHJcbiAgICAgIGRuYU1vbGVjdWxlLmdldEJhc2VQYWlyWE9mZnNldEJ5SW5kZXgoIGdlbmUuZ2V0VHJhbnNjcmliZWRSZWdpb24oKS5taW4gKVxyXG4gICAgKTtcclxuICAgIGNvbnN0IHRyYW5zY3JpYmVkUmVnaW9uV2lkdGggPSBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdYKFxyXG4gICAgICBkbmFNb2xlY3VsZS5nZXRCYXNlUGFpclhPZmZzZXRCeUluZGV4KCBnZW5lLmdldFRyYW5zY3JpYmVkUmVnaW9uKCkubWF4IClcclxuICAgICkgLSB0cmFuc2NyaWJlZFJlZ2lvbkhpZ2hsaWdodFN0YXJ0WDtcclxuICAgIGNvbnN0IHRyYW5zY3JpYmVkUmVnaW9uU2hhcGUgPSBTaGFwZS5yb3VuZFJlY3QoIHRyYW5zY3JpYmVkUmVnaW9uSGlnaGxpZ2h0U3RhcnRYLCBoaWdobGlnaHRTdGFydFksXHJcbiAgICAgIHRyYW5zY3JpYmVkUmVnaW9uV2lkdGgsIGhpZ2hsaWdodEhlaWdodCwgUkVDVF9ST1VORElORywgUkVDVF9ST1VORElORyApO1xyXG5cclxuICAgIGNvbnN0IHRyYW5zY3JpYmVkUmVnaW9uTm9kZSA9IG5ldyBQYXRoKCB0cmFuc2NyaWJlZFJlZ2lvblNoYXBlLCB7IGZpbGw6IGdlbmUuZ2V0VHJhbnNjcmliZWRSZWdpb25Db2xvcigpIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRyYW5zY3JpYmVkUmVnaW9uTm9kZSApO1xyXG5cclxuICAgIGNvbnN0IHRyYW5zY3JpYmVkUmVnaW9uQ2FwdGlvbiA9IG5ldyBSaWNoVGV4dCggdHJhbnNjcmliZWRSZWdpb25TdHJpbmcsIHtcclxuICAgICAgZm9udDogUkVHSU9OX0xBQkVMX0ZPTlQsXHJcbiAgICAgIG1heFdpZHRoOiAxMDAsXHJcbiAgICAgIGFsaWduOiAnY2VudGVyJyxcclxuICAgICAgY2VudGVyWDogdHJhbnNjcmliZWRSZWdpb25Ob2RlLmJvdW5kcy5nZXRDZW50ZXJYKCksXHJcbiAgICAgIHRvcDogdHJhbnNjcmliZWRSZWdpb25Ob2RlLmJvdW5kcy5nZXRNYXhZKClcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRyYW5zY3JpYmVkUmVnaW9uQ2FwdGlvbiApO1xyXG5cclxuICAgIC8vIEFkZCB0aGUgYnJhY2tldC4gIFRoaXMgaXMgYSBwb3J0aW9uICh0aGUgbm9uLXRleHR1YWwgcGFydCkgb2YgdGhlICBsYWJlbCBmb3IgdGhlIGdlbmUuXHJcbiAgICBpZiAoIHNob3dCcmFja2V0TGFiZWwgKSB7XHJcbiAgICAgIGNvbnN0IGJyYWNrZXRQYXRoID0gbmV3IFNoYXBlKCk7XHJcbiAgICAgIGJyYWNrZXRQYXRoLm1vdmVUbyggcmVndWxhdG9yeVJlZ2lvbk5vZGUuYm91bmRzLmdldE1pblgoKSwgcmVndWxhdG9yeVJlZ2lvbkNhcHRpb24uYm91bmRzLmdldE1heFkoKSApO1xyXG4gICAgICBicmFja2V0UGF0aC5saW5lVG9SZWxhdGl2ZSggQlJBQ0tFVF9ERVBUSCwgQlJBQ0tFVF9ERVBUSCApO1xyXG4gICAgICBicmFja2V0UGF0aC5saW5lVG8oXHJcbiAgICAgICAgdHJhbnNjcmliZWRSZWdpb25Ob2RlLmJvdW5kcy5nZXRNYXhYKCkgLSBCUkFDS0VUX0RFUFRILFxyXG4gICAgICAgIHRyYW5zY3JpYmVkUmVnaW9uQ2FwdGlvbi5ib3VuZHMuZ2V0TWF4WSgpICsgQlJBQ0tFVF9ERVBUSFxyXG4gICAgICApO1xyXG4gICAgICBicmFja2V0UGF0aC5saW5lVG9SZWxhdGl2ZSggQlJBQ0tFVF9ERVBUSCwgLUJSQUNLRVRfREVQVEggKTtcclxuICAgICAgdGhpcy5hZGRDaGlsZCggbmV3IFBhdGgoIGJyYWNrZXRQYXRoLCB7IGxpbmVXaWR0aDogMiwgc3Ryb2tlOiBDb2xvci5CTEFDSyB9ICkgKTtcclxuXHJcbiAgICAgIC8vIEFuZCB0aGUgdGV4dHVhbCBsYWJlbCBmb3IgdGhlIGdlbmUuXHJcbiAgICAgIGNvbnN0IGxhYmVsVGV4dCA9IG5ldyBUZXh0KCBsYWJlbCwge1xyXG4gICAgICAgIGZvbnQ6IEdFTkVfTEFCRUxfRk9OVCxcclxuICAgICAgICBtYXhXaWR0aDogMTUwXHJcbiAgICAgIH0gKTtcclxuICAgICAgdGhpcy5hZGRDaGlsZCggbGFiZWxUZXh0ICk7XHJcbiAgICAgIGNvbnN0IGJyYWNrZXRCb3VuZHMgPSBicmFja2V0UGF0aC5ib3VuZHM7XHJcbiAgICAgIGxhYmVsVGV4dC54ID0gYnJhY2tldEJvdW5kcy5nZXRDZW50ZXJYKCkgLSBsYWJlbFRleHQuYm91bmRzLndpZHRoIC8gMjtcclxuICAgICAgbGFiZWxUZXh0LnkgPSBicmFja2V0Qm91bmRzLmdldE1heFkoKSArIDIwO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZ2VuZUV4cHJlc3Npb25Fc3NlbnRpYWxzLnJlZ2lzdGVyKCAnR2VuZU5vZGUnLCBHZW5lTm9kZSApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgR2VuZU5vZGU7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFNBQVNBLEtBQUssUUFBUSxnQ0FBZ0M7QUFDdEQsT0FBT0MsUUFBUSxNQUFNLHlDQUF5QztBQUM5RCxTQUFTQyxLQUFLLEVBQUVDLElBQUksRUFBRUMsSUFBSSxFQUFFQyxRQUFRLEVBQUVDLElBQUksUUFBUSxtQ0FBbUM7QUFDckYsT0FBT0Msd0JBQXdCLE1BQU0sbUNBQW1DO0FBQ3hFLE9BQU9DLCtCQUErQixNQUFNLDBDQUEwQztBQUN0RixPQUFPQyxZQUFZLE1BQU0sb0JBQW9CO0FBRTdDLE1BQU1DLHNCQUFzQixHQUFHRiwrQkFBK0IsQ0FBQ0csZ0JBQWdCO0FBQy9FLE1BQU1DLHVCQUF1QixHQUFHSiwrQkFBK0IsQ0FBQ0ssaUJBQWlCOztBQUVqRjtBQUNBLE1BQU1DLGlCQUFpQixHQUFHLElBQUliLFFBQVEsQ0FBRTtFQUFFYyxJQUFJLEVBQUUsRUFBRTtFQUFFQyxNQUFNLEVBQUU7QUFBTyxDQUFFLENBQUM7QUFDdEUsTUFBTUMsZUFBZSxHQUFHLElBQUloQixRQUFRLENBQUU7RUFBRWMsSUFBSSxFQUFFLEVBQUU7RUFBRUMsTUFBTSxFQUFFO0FBQU8sQ0FBRSxDQUFDO0FBQ3BFLE1BQU1FLGFBQWEsR0FBRyxFQUFFO0FBQ3hCLE1BQU1DLGFBQWEsR0FBRyxFQUFFO0FBRXhCLE1BQU1DLFFBQVEsU0FBU2pCLElBQUksQ0FBQztFQUUxQjtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFa0IsV0FBV0EsQ0FBRUMsa0JBQWtCLEVBQUVDLElBQUksRUFBRUMsV0FBVyxF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