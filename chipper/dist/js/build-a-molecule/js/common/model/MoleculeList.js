// Copyright 2020-2022, University of Colorado Boulder

/**
 * Has functions relating to lists of molecules (e.g. is a molecule or submolecule allowed?) Uses static initialization to load in a small fraction
 * of molecules from collection-molecules.txt, and then in a separate thread loads the rest of the molecules + the allowed structures. The 1st
 * call that requires the full molecule list or allowed structures will block until it is all read in or computed
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 * @author Denzell Barnett (PhET Interactive Simulations)
 */

import buildAMolecule from '../../buildAMolecule.js';
import CompleteMolecule from './CompleteMolecule.js';
import collectionMoleculesData from './data/collectionMoleculesData.js';
import otherMoleculesData from './data/otherMoleculesData.js';
import structuresData from './data/structuresData.js';
import MoleculeStructure from './MoleculeStructure.js';
import StrippedMolecule from './StrippedMolecule.js';
class MoleculeList {
  constructor() {
    // @public {Array.<CompleteMolecule>}
    this.completeMolecules = [];

    // @private {Object.<name:string, CompleteMolecule>} Unique name => complete molecule
    this.moleculeNameMap = {};

    // @private {Object.<spot:string, Array.<StrippedMolecule>} Formula => allowed stripped molecules (array)
    this.allowedStructureFormulaMap = {};
  }

  /**
   * Load in the initial list of complete molecules for the collection boxes (collectionMoleculesData)
   * @private
   */
  loadInitialData() {
    const startTime = Date.now();
    const mainMolecules = MoleculeList.readCompleteMoleculesFromData(collectionMoleculesData);
    mainMolecules.forEach(this.addCompleteMolecule.bind(this));
    console.log(`loaded initial data in ${Date.now() - startTime}ms`);
  }

  /**
   * Load a list of all the remaining complete molecules (otherMoleculesData)
   * @private
   */
  loadMasterData() {
    const startTime = Date.now();
    // load in our collection molecules first
    MoleculeList.initialList.getAllCompleteMolecules().forEach(this.addCompleteMolecule.bind(this));

    // then load other molecules
    const mainMolecules = MoleculeList.readCompleteMoleculesFromData(otherMoleculesData);
    mainMolecules.forEach(molecule => {
      // if our molecule was included in the initial lookup, use that initial version instead so we can have instance equality preserved
      const initialListLookup = MoleculeList.initialList.moleculeNameMap[molecule.filterCommonName(molecule.commonName)];
      if (initialListLookup && molecule.isEquivalent(initialListLookup)) {
        molecule = initialListLookup;
      }
      this.addCompleteMolecule(molecule);
    });

    // then load structures
    const mainStructures = MoleculeList.readMoleculeStructuresFromData(structuresData);
    mainStructures.forEach(this.addAllowedStructure.bind(this));
    console.log(`loaded master data in ${Date.now() - startTime}ms`);
  }

  /**
   * Check whether this structure is allowed. Currently this means it is a "sub-molecule" of one of our complete
   * molecules
   * @param {MoleculeStructure} moleculeStructure
   *
   * @public
   * @returns {boolean} True if it is allowed
   */
  isAllowedStructure(moleculeStructure) {
    const strippedMolecule = new StrippedMolecule(moleculeStructure);
    const hashString = strippedMolecule.stripped.getHistogram().getHashString();

    // if the molecule contained only 1 or 2 hydrogen, it is ok
    if (strippedMolecule.stripped.atoms.length === 0 && moleculeStructure.atoms.length <= 2) {
      return true;
    }

    // don't allow invalid forms!
    if (!moleculeStructure.isValid()) {
      return false;
    }

    // use the allowed structure map as an acceleration feature
    // Note: (performance) only do the lookup once
    if (this.allowedStructureFormulaMap[hashString]) {
      const moleculeStructures = this.allowedStructureFormulaMap[hashString];
      if (moleculeStructures) {
        const length = moleculeStructures.length;
        for (let i = 0; i < length; i++) {
          const structure = moleculeStructures[i];
          if (structure.isHydrogenSubmolecule(strippedMolecule)) {
            return true;
          }
        }
      }
    }
    return false;
  }

  /**
   * Find a complete molecule with an equivalent structure to the passed in molecule
   * @param {MoleculeStructure} moleculeStructure
   *
   * @public
   * @returns {CompleteMolecule|null} Either a matching CompleteMolecule, or null if none is found
   */
  findMatchingCompleteMolecule(moleculeStructure) {
    return _.find(this.completeMolecules, completeMolecule => {
      return moleculeStructure.isEquivalent(completeMolecule) ? completeMolecule : null;
    });
  }

  /**
   * Return all the complected molecules
   * @private
   *
   * @returns {Array.<Molecule>}
   */
  getAllCompleteMolecules() {
    // Note: (performance) do we need a full copy here?
    return this.completeMolecules.slice();
  }

  /*---------------------------------------------------------------------------*
   * computation of allowed molecule structures
   *----------------------------------------------------------------------------*/

  /**
   * Add a complete molecule and map its common name
   * @param {CompleteMolecule} completeMolecule
   *
   * @private
   */
  addCompleteMolecule(completeMolecule) {
    this.completeMolecules.push(completeMolecule);
    this.moleculeNameMap[completeMolecule.filterCommonName(completeMolecule.commonName)] = completeMolecule;
  }

  /**
   * Add the structure to the allowed structure map
   * @param {MoleculeStructure} structure
   *
   * @private
   */
  addAllowedStructure(structure) {
    const strippedMolecule = new StrippedMolecule(structure);
    const hashString = strippedMolecule.stripped.getHistogram().getHashString();
    const spot = this.allowedStructureFormulaMap[hashString];
    if (spot) {
      spot.push(strippedMolecule);
    } else {
      this.allowedStructureFormulaMap[hashString] = [strippedMolecule];
    }
  }

  /**
   * Load master data
   *
   * @private
   */
  static startInitialization() {
    // Note: (performance) use web worker or chop it up into bits of work
    MoleculeList.masterInstance = new MoleculeList();
    MoleculeList.masterInstance.loadMasterData();
    MoleculeList.initialized = true;
    console.log('Master list loaded.');
  }

  /**
   * Return master data
   *
   * @public
   * @returns {*}
   */
  static getMasterInstance() {
    if (!MoleculeList.initialized) {
      // Note: (performance) threading-like replacement goes here
      MoleculeList.startInitialization();
    }
    return MoleculeList.masterInstance;
  }

  /**
   * Return molecule name from master data
   * @param {string} name
   *
   * @private
   * @returns {string}
   */
  static getMoleculeByName(name) {
    let result = MoleculeList.initialList.moleculeNameMap[name];
    if (!result) {
      console.log('Searching', name, 'in master instance.');
      result = MoleculeList.getMasterInstance().moleculeNameMap[name];
    }
    return result;
  }

  /**
   * Returns a list of complete molecules
   * @param {string} strings - File name relative to the sim's data directory
   *
   * @private
   * @returns
   */
  static readCompleteMoleculesFromData(strings) {
    return _.map(strings, string => {
      const molecule = CompleteMolecule.fromSerial2(string);

      // sanity checks
      assert && assert(!molecule.hasLoopsOrIsDisconnected(), `has loops or is disconnected: ${molecule.filterCommonName(molecule.commonName)}`);
      assert && assert(!molecule.hasWeirdHydrogenProperties(), `has weird hydrogen pattern in: ${molecule.filterCommonName(molecule.commonName)}`);
      return molecule;
    });
  }

  /**
   * Returns a list of molecule structures
   * @param {string} strings - File name relative to the sim's data directory
   *
   * @private
   * @returns
   */
  static readMoleculeStructuresFromData(strings) {
    const len = strings.length;
    const arr = new Array(len);
    for (let i = 0; i < len; i++) {
      const string = strings[i];
      const structure = MoleculeStructure.fromSerial2Basic(string);

      // sanity checks
      assert && assert(!structure.hasWeirdHydrogenProperties(), `Weird hydrogen pattern in structure: ${string}`);
      arr[i] = structure;
    }
    return arr;
  }
}

// statics
// @private {MoleculeList|null}
MoleculeList.masterInstance = null;

// @private {boolean}
MoleculeList.initialized = false;

// @private {MoleculeList}
MoleculeList.initialList = new MoleculeList();
MoleculeList.initialList.loadInitialData();

/*---------------------------------------------------------------------------*
 * molecule references and customized names
 *----------------------------------------------------------------------------*/

// @public {string}
MoleculeList.CO2 = MoleculeList.getMoleculeByName('Carbon Dioxide');
MoleculeList.H2O = MoleculeList.getMoleculeByName('Water');
MoleculeList.N2 = MoleculeList.getMoleculeByName('Nitrogen');
MoleculeList.CO = MoleculeList.getMoleculeByName('Carbon Monoxide');
MoleculeList.NO = MoleculeList.getMoleculeByName('Nitric Oxide');
MoleculeList.O2 = MoleculeList.getMoleculeByName('Oxygen');
MoleculeList.H2 = MoleculeList.getMoleculeByName('Hydrogen');
MoleculeList.Cl2 = MoleculeList.getMoleculeByName('Chlorine');
MoleculeList.NH3 = MoleculeList.getMoleculeByName('Ammonia');
MoleculeList.C2H4O2 = MoleculeList.getMoleculeByName('Acetic Acid');

// @public {Array.<String>} Molecules that can be used for collection boxes
MoleculeList.collectionBoxMolecules = [MoleculeList.CO2, MoleculeList.H2O, MoleculeList.N2, MoleculeList.CO, MoleculeList.O2, MoleculeList.H2, MoleculeList.NH3, MoleculeList.Cl2, MoleculeList.NO, MoleculeList.getMoleculeByName('Acetylene'), MoleculeList.getMoleculeByName('Borane'), MoleculeList.getMoleculeByName('Trifluoroborane'), MoleculeList.getMoleculeByName('Chloromethane'), MoleculeList.getMoleculeByName('Ethylene'), MoleculeList.getMoleculeByName('Fluorine'), MoleculeList.getMoleculeByName('Fluoromethane'), MoleculeList.getMoleculeByName('Formaldehyde'), MoleculeList.getMoleculeByName('Hydrogen Cyanide'), MoleculeList.getMoleculeByName('Hydrogen Peroxide'), MoleculeList.getMoleculeByName('Hydrogen Sulfide'), MoleculeList.getMoleculeByName('Methane'), MoleculeList.getMoleculeByName('Nitrous Oxide'), MoleculeList.getMoleculeByName('Ozone'), MoleculeList.getMoleculeByName('Phosphine'), MoleculeList.getMoleculeByName('Silane'), MoleculeList.getMoleculeByName('Sulfur Dioxide')];
MoleculeList.collectionBoxMolecules.forEach(molecule => {
  assert && assert(!!molecule);
});

// Note: (performance) postpone all of the loading?
MoleculeList.getMasterInstance();
buildAMolecule.register('MoleculeList', MoleculeList);
export default MoleculeList;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJidWlsZEFNb2xlY3VsZSIsIkNvbXBsZXRlTW9sZWN1bGUiLCJjb2xsZWN0aW9uTW9sZWN1bGVzRGF0YSIsIm90aGVyTW9sZWN1bGVzRGF0YSIsInN0cnVjdHVyZXNEYXRhIiwiTW9sZWN1bGVTdHJ1Y3R1cmUiLCJTdHJpcHBlZE1vbGVjdWxlIiwiTW9sZWN1bGVMaXN0IiwiY29uc3RydWN0b3IiLCJjb21wbGV0ZU1vbGVjdWxlcyIsIm1vbGVjdWxlTmFtZU1hcCIsImFsbG93ZWRTdHJ1Y3R1cmVGb3JtdWxhTWFwIiwibG9hZEluaXRpYWxEYXRhIiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsIm1haW5Nb2xlY3VsZXMiLCJyZWFkQ29tcGxldGVNb2xlY3VsZXNGcm9tRGF0YSIsImZvckVhY2giLCJhZGRDb21wbGV0ZU1vbGVjdWxlIiwiYmluZCIsImNvbnNvbGUiLCJsb2ciLCJsb2FkTWFzdGVyRGF0YSIsImluaXRpYWxMaXN0IiwiZ2V0QWxsQ29tcGxldGVNb2xlY3VsZXMiLCJtb2xlY3VsZSIsImluaXRpYWxMaXN0TG9va3VwIiwiZmlsdGVyQ29tbW9uTmFtZSIsImNvbW1vbk5hbWUiLCJpc0VxdWl2YWxlbnQiLCJtYWluU3RydWN0dXJlcyIsInJlYWRNb2xlY3VsZVN0cnVjdHVyZXNGcm9tRGF0YSIsImFkZEFsbG93ZWRTdHJ1Y3R1cmUiLCJpc0FsbG93ZWRTdHJ1Y3R1cmUiLCJtb2xlY3VsZVN0cnVjdHVyZSIsInN0cmlwcGVkTW9sZWN1bGUiLCJoYXNoU3RyaW5nIiwic3RyaXBwZWQiLCJnZXRIaXN0b2dyYW0iLCJnZXRIYXNoU3RyaW5nIiwiYXRvbXMiLCJsZW5ndGgiLCJpc1ZhbGlkIiwibW9sZWN1bGVTdHJ1Y3R1cmVzIiwiaSIsInN0cnVjdHVyZSIsImlzSHlkcm9nZW5TdWJtb2xlY3VsZSIsImZpbmRNYXRjaGluZ0NvbXBsZXRlTW9sZWN1bGUiLCJfIiwiZmluZCIsImNvbXBsZXRlTW9sZWN1bGUiLCJzbGljZSIsInB1c2giLCJzcG90Iiwic3RhcnRJbml0aWFsaXphdGlvbiIsIm1hc3Rlckluc3RhbmNlIiwiaW5pdGlhbGl6ZWQiLCJnZXRNYXN0ZXJJbnN0YW5jZSIsImdldE1vbGVjdWxlQnlOYW1lIiwibmFtZSIsInJlc3VsdCIsInN0cmluZ3MiLCJtYXAiLCJzdHJpbmciLCJmcm9tU2VyaWFsMiIsImFzc2VydCIsImhhc0xvb3BzT3JJc0Rpc2Nvbm5lY3RlZCIsImhhc1dlaXJkSHlkcm9nZW5Qcm9wZXJ0aWVzIiwibGVuIiwiYXJyIiwiQXJyYXkiLCJmcm9tU2VyaWFsMkJhc2ljIiwiQ08yIiwiSDJPIiwiTjIiLCJDTyIsIk5PIiwiTzIiLCJIMiIsIkNsMiIsIk5IMyIsIkMySDRPMiIsImNvbGxlY3Rpb25Cb3hNb2xlY3VsZXMiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIk1vbGVjdWxlTGlzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMC0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBIYXMgZnVuY3Rpb25zIHJlbGF0aW5nIHRvIGxpc3RzIG9mIG1vbGVjdWxlcyAoZS5nLiBpcyBhIG1vbGVjdWxlIG9yIHN1Ym1vbGVjdWxlIGFsbG93ZWQ/KSBVc2VzIHN0YXRpYyBpbml0aWFsaXphdGlvbiB0byBsb2FkIGluIGEgc21hbGwgZnJhY3Rpb25cclxuICogb2YgbW9sZWN1bGVzIGZyb20gY29sbGVjdGlvbi1tb2xlY3VsZXMudHh0LCBhbmQgdGhlbiBpbiBhIHNlcGFyYXRlIHRocmVhZCBsb2FkcyB0aGUgcmVzdCBvZiB0aGUgbW9sZWN1bGVzICsgdGhlIGFsbG93ZWQgc3RydWN0dXJlcy4gVGhlIDFzdFxyXG4gKiBjYWxsIHRoYXQgcmVxdWlyZXMgdGhlIGZ1bGwgbW9sZWN1bGUgbGlzdCBvciBhbGxvd2VkIHN0cnVjdHVyZXMgd2lsbCBibG9jayB1bnRpbCBpdCBpcyBhbGwgcmVhZCBpbiBvciBjb21wdXRlZFxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XHJcbiAqIEBhdXRob3IgRGVuemVsbCBCYXJuZXR0IChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxyXG4gKi9cclxuXHJcbmltcG9ydCBidWlsZEFNb2xlY3VsZSBmcm9tICcuLi8uLi9idWlsZEFNb2xlY3VsZS5qcyc7XHJcbmltcG9ydCBDb21wbGV0ZU1vbGVjdWxlIGZyb20gJy4vQ29tcGxldGVNb2xlY3VsZS5qcyc7XHJcbmltcG9ydCBjb2xsZWN0aW9uTW9sZWN1bGVzRGF0YSBmcm9tICcuL2RhdGEvY29sbGVjdGlvbk1vbGVjdWxlc0RhdGEuanMnO1xyXG5pbXBvcnQgb3RoZXJNb2xlY3VsZXNEYXRhIGZyb20gJy4vZGF0YS9vdGhlck1vbGVjdWxlc0RhdGEuanMnO1xyXG5pbXBvcnQgc3RydWN0dXJlc0RhdGEgZnJvbSAnLi9kYXRhL3N0cnVjdHVyZXNEYXRhLmpzJztcclxuaW1wb3J0IE1vbGVjdWxlU3RydWN0dXJlIGZyb20gJy4vTW9sZWN1bGVTdHJ1Y3R1cmUuanMnO1xyXG5pbXBvcnQgU3RyaXBwZWRNb2xlY3VsZSBmcm9tICcuL1N0cmlwcGVkTW9sZWN1bGUuanMnO1xyXG5cclxuY2xhc3MgTW9sZWN1bGVMaXN0IHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuXHJcbiAgICAvLyBAcHVibGljIHtBcnJheS48Q29tcGxldGVNb2xlY3VsZT59XHJcbiAgICB0aGlzLmNvbXBsZXRlTW9sZWN1bGVzID0gW107XHJcblxyXG4gICAgLy8gQHByaXZhdGUge09iamVjdC48bmFtZTpzdHJpbmcsIENvbXBsZXRlTW9sZWN1bGU+fSBVbmlxdWUgbmFtZSA9PiBjb21wbGV0ZSBtb2xlY3VsZVxyXG4gICAgdGhpcy5tb2xlY3VsZU5hbWVNYXAgPSB7fTtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZSB7T2JqZWN0LjxzcG90OnN0cmluZywgQXJyYXkuPFN0cmlwcGVkTW9sZWN1bGU+fSBGb3JtdWxhID0+IGFsbG93ZWQgc3RyaXBwZWQgbW9sZWN1bGVzIChhcnJheSlcclxuICAgIHRoaXMuYWxsb3dlZFN0cnVjdHVyZUZvcm11bGFNYXAgPSB7fTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBMb2FkIGluIHRoZSBpbml0aWFsIGxpc3Qgb2YgY29tcGxldGUgbW9sZWN1bGVzIGZvciB0aGUgY29sbGVjdGlvbiBib3hlcyAoY29sbGVjdGlvbk1vbGVjdWxlc0RhdGEpXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBsb2FkSW5pdGlhbERhdGEoKSB7XHJcbiAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgY29uc3QgbWFpbk1vbGVjdWxlcyA9IE1vbGVjdWxlTGlzdC5yZWFkQ29tcGxldGVNb2xlY3VsZXNGcm9tRGF0YSggY29sbGVjdGlvbk1vbGVjdWxlc0RhdGEgKTtcclxuICAgIG1haW5Nb2xlY3VsZXMuZm9yRWFjaCggdGhpcy5hZGRDb21wbGV0ZU1vbGVjdWxlLmJpbmQoIHRoaXMgKSApO1xyXG4gICAgY29uc29sZS5sb2coIGBsb2FkZWQgaW5pdGlhbCBkYXRhIGluICR7RGF0ZS5ub3coKSAtIHN0YXJ0VGltZX1tc2AgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIExvYWQgYSBsaXN0IG9mIGFsbCB0aGUgcmVtYWluaW5nIGNvbXBsZXRlIG1vbGVjdWxlcyAob3RoZXJNb2xlY3VsZXNEYXRhKVxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgbG9hZE1hc3RlckRhdGEoKSB7XHJcbiAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgLy8gbG9hZCBpbiBvdXIgY29sbGVjdGlvbiBtb2xlY3VsZXMgZmlyc3RcclxuICAgIE1vbGVjdWxlTGlzdC5pbml0aWFsTGlzdC5nZXRBbGxDb21wbGV0ZU1vbGVjdWxlcygpLmZvckVhY2goIHRoaXMuYWRkQ29tcGxldGVNb2xlY3VsZS5iaW5kKCB0aGlzICkgKTtcclxuXHJcbiAgICAvLyB0aGVuIGxvYWQgb3RoZXIgbW9sZWN1bGVzXHJcbiAgICBjb25zdCBtYWluTW9sZWN1bGVzID0gTW9sZWN1bGVMaXN0LnJlYWRDb21wbGV0ZU1vbGVjdWxlc0Zyb21EYXRhKCBvdGhlck1vbGVjdWxlc0RhdGEgKTtcclxuICAgIG1haW5Nb2xlY3VsZXMuZm9yRWFjaCggbW9sZWN1bGUgPT4ge1xyXG4gICAgICAvLyBpZiBvdXIgbW9sZWN1bGUgd2FzIGluY2x1ZGVkIGluIHRoZSBpbml0aWFsIGxvb2t1cCwgdXNlIHRoYXQgaW5pdGlhbCB2ZXJzaW9uIGluc3RlYWQgc28gd2UgY2FuIGhhdmUgaW5zdGFuY2UgZXF1YWxpdHkgcHJlc2VydmVkXHJcbiAgICAgIGNvbnN0IGluaXRpYWxMaXN0TG9va3VwID0gTW9sZWN1bGVMaXN0LmluaXRpYWxMaXN0Lm1vbGVjdWxlTmFtZU1hcFsgbW9sZWN1bGUuZmlsdGVyQ29tbW9uTmFtZSggbW9sZWN1bGUuY29tbW9uTmFtZSApIF07XHJcbiAgICAgIGlmICggaW5pdGlhbExpc3RMb29rdXAgJiYgbW9sZWN1bGUuaXNFcXVpdmFsZW50KCBpbml0aWFsTGlzdExvb2t1cCApICkge1xyXG4gICAgICAgIG1vbGVjdWxlID0gaW5pdGlhbExpc3RMb29rdXA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuYWRkQ29tcGxldGVNb2xlY3VsZSggbW9sZWN1bGUgKTtcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyB0aGVuIGxvYWQgc3RydWN0dXJlc1xyXG4gICAgY29uc3QgbWFpblN0cnVjdHVyZXMgPSBNb2xlY3VsZUxpc3QucmVhZE1vbGVjdWxlU3RydWN0dXJlc0Zyb21EYXRhKCBzdHJ1Y3R1cmVzRGF0YSApO1xyXG4gICAgbWFpblN0cnVjdHVyZXMuZm9yRWFjaCggdGhpcy5hZGRBbGxvd2VkU3RydWN0dXJlLmJpbmQoIHRoaXMgKSApO1xyXG4gICAgY29uc29sZS5sb2coIGBsb2FkZWQgbWFzdGVyIGRhdGEgaW4gJHtEYXRlLm5vdygpIC0gc3RhcnRUaW1lfW1zYCApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2sgd2hldGhlciB0aGlzIHN0cnVjdHVyZSBpcyBhbGxvd2VkLiBDdXJyZW50bHkgdGhpcyBtZWFucyBpdCBpcyBhIFwic3ViLW1vbGVjdWxlXCIgb2Ygb25lIG9mIG91ciBjb21wbGV0ZVxyXG4gICAqIG1vbGVjdWxlc1xyXG4gICAqIEBwYXJhbSB7TW9sZWN1bGVTdHJ1Y3R1cmV9IG1vbGVjdWxlU3RydWN0dXJlXHJcbiAgICpcclxuICAgKiBAcHVibGljXHJcbiAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgaXQgaXMgYWxsb3dlZFxyXG4gICAqL1xyXG4gIGlzQWxsb3dlZFN0cnVjdHVyZSggbW9sZWN1bGVTdHJ1Y3R1cmUgKSB7XHJcbiAgICBjb25zdCBzdHJpcHBlZE1vbGVjdWxlID0gbmV3IFN0cmlwcGVkTW9sZWN1bGUoIG1vbGVjdWxlU3RydWN0dXJlICk7XHJcbiAgICBjb25zdCBoYXNoU3RyaW5nID0gc3RyaXBwZWRNb2xlY3VsZS5zdHJpcHBlZC5nZXRIaXN0b2dyYW0oKS5nZXRIYXNoU3RyaW5nKCk7XHJcblxyXG4gICAgLy8gaWYgdGhlIG1vbGVjdWxlIGNvbnRhaW5lZCBvbmx5IDEgb3IgMiBoeWRyb2dlbiwgaXQgaXMgb2tcclxuICAgIGlmICggc3RyaXBwZWRNb2xlY3VsZS5zdHJpcHBlZC5hdG9tcy5sZW5ndGggPT09IDAgJiYgbW9sZWN1bGVTdHJ1Y3R1cmUuYXRvbXMubGVuZ3RoIDw9IDIgKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGRvbid0IGFsbG93IGludmFsaWQgZm9ybXMhXHJcbiAgICBpZiAoICFtb2xlY3VsZVN0cnVjdHVyZS5pc1ZhbGlkKCkgKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyB1c2UgdGhlIGFsbG93ZWQgc3RydWN0dXJlIG1hcCBhcyBhbiBhY2NlbGVyYXRpb24gZmVhdHVyZVxyXG4gICAgLy8gTm90ZTogKHBlcmZvcm1hbmNlKSBvbmx5IGRvIHRoZSBsb29rdXAgb25jZVxyXG4gICAgaWYgKCB0aGlzLmFsbG93ZWRTdHJ1Y3R1cmVGb3JtdWxhTWFwWyBoYXNoU3RyaW5nIF0gKSB7XHJcbiAgICAgIGNvbnN0IG1vbGVjdWxlU3RydWN0dXJlcyA9IHRoaXMuYWxsb3dlZFN0cnVjdHVyZUZvcm11bGFNYXBbIGhhc2hTdHJpbmcgXTtcclxuICAgICAgaWYgKCBtb2xlY3VsZVN0cnVjdHVyZXMgKSB7XHJcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gbW9sZWN1bGVTdHJ1Y3R1cmVzLmxlbmd0aDtcclxuICAgICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKyApIHtcclxuICAgICAgICAgIGNvbnN0IHN0cnVjdHVyZSA9IG1vbGVjdWxlU3RydWN0dXJlc1sgaSBdO1xyXG4gICAgICAgICAgaWYgKCBzdHJ1Y3R1cmUuaXNIeWRyb2dlblN1Ym1vbGVjdWxlKCBzdHJpcHBlZE1vbGVjdWxlICkgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmluZCBhIGNvbXBsZXRlIG1vbGVjdWxlIHdpdGggYW4gZXF1aXZhbGVudCBzdHJ1Y3R1cmUgdG8gdGhlIHBhc3NlZCBpbiBtb2xlY3VsZVxyXG4gICAqIEBwYXJhbSB7TW9sZWN1bGVTdHJ1Y3R1cmV9IG1vbGVjdWxlU3RydWN0dXJlXHJcbiAgICpcclxuICAgKiBAcHVibGljXHJcbiAgICogQHJldHVybnMge0NvbXBsZXRlTW9sZWN1bGV8bnVsbH0gRWl0aGVyIGEgbWF0Y2hpbmcgQ29tcGxldGVNb2xlY3VsZSwgb3IgbnVsbCBpZiBub25lIGlzIGZvdW5kXHJcbiAgICovXHJcbiAgZmluZE1hdGNoaW5nQ29tcGxldGVNb2xlY3VsZSggbW9sZWN1bGVTdHJ1Y3R1cmUgKSB7XHJcbiAgICByZXR1cm4gXy5maW5kKCB0aGlzLmNvbXBsZXRlTW9sZWN1bGVzLCBjb21wbGV0ZU1vbGVjdWxlID0+IHtcclxuICAgICAgcmV0dXJuIG1vbGVjdWxlU3RydWN0dXJlLmlzRXF1aXZhbGVudCggY29tcGxldGVNb2xlY3VsZSApID8gY29tcGxldGVNb2xlY3VsZSA6IG51bGw7XHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm4gYWxsIHRoZSBjb21wbGVjdGVkIG1vbGVjdWxlc1xyXG4gICAqIEBwcml2YXRlXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7QXJyYXkuPE1vbGVjdWxlPn1cclxuICAgKi9cclxuICBnZXRBbGxDb21wbGV0ZU1vbGVjdWxlcygpIHtcclxuICAgIC8vIE5vdGU6IChwZXJmb3JtYW5jZSkgZG8gd2UgbmVlZCBhIGZ1bGwgY29weSBoZXJlP1xyXG4gICAgcmV0dXJuIHRoaXMuY29tcGxldGVNb2xlY3VsZXMuc2xpY2UoKTtcclxuICB9XHJcblxyXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKlxyXG4gICAqIGNvbXB1dGF0aW9uIG9mIGFsbG93ZWQgbW9sZWN1bGUgc3RydWN0dXJlc1xyXG4gICAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZCBhIGNvbXBsZXRlIG1vbGVjdWxlIGFuZCBtYXAgaXRzIGNvbW1vbiBuYW1lXHJcbiAgICogQHBhcmFtIHtDb21wbGV0ZU1vbGVjdWxlfSBjb21wbGV0ZU1vbGVjdWxlXHJcbiAgICpcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIGFkZENvbXBsZXRlTW9sZWN1bGUoIGNvbXBsZXRlTW9sZWN1bGUgKSB7XHJcbiAgICB0aGlzLmNvbXBsZXRlTW9sZWN1bGVzLnB1c2goIGNvbXBsZXRlTW9sZWN1bGUgKTtcclxuICAgIHRoaXMubW9sZWN1bGVOYW1lTWFwWyBjb21wbGV0ZU1vbGVjdWxlLmZpbHRlckNvbW1vbk5hbWUoIGNvbXBsZXRlTW9sZWN1bGUuY29tbW9uTmFtZSApIF0gPSBjb21wbGV0ZU1vbGVjdWxlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIHRoZSBzdHJ1Y3R1cmUgdG8gdGhlIGFsbG93ZWQgc3RydWN0dXJlIG1hcFxyXG4gICAqIEBwYXJhbSB7TW9sZWN1bGVTdHJ1Y3R1cmV9IHN0cnVjdHVyZVxyXG4gICAqXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBhZGRBbGxvd2VkU3RydWN0dXJlKCBzdHJ1Y3R1cmUgKSB7XHJcbiAgICBjb25zdCBzdHJpcHBlZE1vbGVjdWxlID0gbmV3IFN0cmlwcGVkTW9sZWN1bGUoIHN0cnVjdHVyZSApO1xyXG4gICAgY29uc3QgaGFzaFN0cmluZyA9IHN0cmlwcGVkTW9sZWN1bGUuc3RyaXBwZWQuZ2V0SGlzdG9ncmFtKCkuZ2V0SGFzaFN0cmluZygpO1xyXG5cclxuICAgIGNvbnN0IHNwb3QgPSB0aGlzLmFsbG93ZWRTdHJ1Y3R1cmVGb3JtdWxhTWFwWyBoYXNoU3RyaW5nIF07XHJcbiAgICBpZiAoIHNwb3QgKSB7XHJcbiAgICAgIHNwb3QucHVzaCggc3RyaXBwZWRNb2xlY3VsZSApO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMuYWxsb3dlZFN0cnVjdHVyZUZvcm11bGFNYXBbIGhhc2hTdHJpbmcgXSA9IFsgc3RyaXBwZWRNb2xlY3VsZSBdO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTG9hZCBtYXN0ZXIgZGF0YVxyXG4gICAqXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBzdGF0aWMgc3RhcnRJbml0aWFsaXphdGlvbigpIHtcclxuICAgIC8vIE5vdGU6IChwZXJmb3JtYW5jZSkgdXNlIHdlYiB3b3JrZXIgb3IgY2hvcCBpdCB1cCBpbnRvIGJpdHMgb2Ygd29ya1xyXG4gICAgTW9sZWN1bGVMaXN0Lm1hc3Rlckluc3RhbmNlID0gbmV3IE1vbGVjdWxlTGlzdCgpO1xyXG4gICAgTW9sZWN1bGVMaXN0Lm1hc3Rlckluc3RhbmNlLmxvYWRNYXN0ZXJEYXRhKCk7XHJcbiAgICBNb2xlY3VsZUxpc3QuaW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgY29uc29sZS5sb2coICdNYXN0ZXIgbGlzdCBsb2FkZWQuJyApO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybiBtYXN0ZXIgZGF0YVxyXG4gICAqXHJcbiAgICogQHB1YmxpY1xyXG4gICAqIEByZXR1cm5zIHsqfVxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRNYXN0ZXJJbnN0YW5jZSgpIHtcclxuICAgIGlmICggIU1vbGVjdWxlTGlzdC5pbml0aWFsaXplZCApIHtcclxuICAgICAgLy8gTm90ZTogKHBlcmZvcm1hbmNlKSB0aHJlYWRpbmctbGlrZSByZXBsYWNlbWVudCBnb2VzIGhlcmVcclxuICAgICAgTW9sZWN1bGVMaXN0LnN0YXJ0SW5pdGlhbGl6YXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gTW9sZWN1bGVMaXN0Lm1hc3Rlckluc3RhbmNlO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybiBtb2xlY3VsZSBuYW1lIGZyb20gbWFzdGVyIGRhdGFcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxyXG4gICAqXHJcbiAgICogQHByaXZhdGVcclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRNb2xlY3VsZUJ5TmFtZSggbmFtZSApIHtcclxuICAgIGxldCByZXN1bHQgPSBNb2xlY3VsZUxpc3QuaW5pdGlhbExpc3QubW9sZWN1bGVOYW1lTWFwWyBuYW1lIF07XHJcblxyXG4gICAgaWYgKCAhcmVzdWx0ICkge1xyXG4gICAgICBjb25zb2xlLmxvZyggJ1NlYXJjaGluZycsIG5hbWUsICdpbiBtYXN0ZXIgaW5zdGFuY2UuJyApO1xyXG4gICAgICByZXN1bHQgPSBNb2xlY3VsZUxpc3QuZ2V0TWFzdGVySW5zdGFuY2UoKS5tb2xlY3VsZU5hbWVNYXBbIG5hbWUgXTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyBhIGxpc3Qgb2YgY29tcGxldGUgbW9sZWN1bGVzXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZ3MgLSBGaWxlIG5hbWUgcmVsYXRpdmUgdG8gdGhlIHNpbSdzIGRhdGEgZGlyZWN0b3J5XHJcbiAgICpcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqIEByZXR1cm5zXHJcbiAgICovXHJcbiAgc3RhdGljIHJlYWRDb21wbGV0ZU1vbGVjdWxlc0Zyb21EYXRhKCBzdHJpbmdzICkge1xyXG4gICAgcmV0dXJuIF8ubWFwKCBzdHJpbmdzLCBzdHJpbmcgPT4ge1xyXG4gICAgICBjb25zdCBtb2xlY3VsZSA9IENvbXBsZXRlTW9sZWN1bGUuZnJvbVNlcmlhbDIoIHN0cmluZyApO1xyXG5cclxuICAgICAgLy8gc2FuaXR5IGNoZWNrc1xyXG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhbW9sZWN1bGUuaGFzTG9vcHNPcklzRGlzY29ubmVjdGVkKCksXHJcbiAgICAgICAgYGhhcyBsb29wcyBvciBpcyBkaXNjb25uZWN0ZWQ6ICR7bW9sZWN1bGUuZmlsdGVyQ29tbW9uTmFtZSggbW9sZWN1bGUuY29tbW9uTmFtZSApfWAgKTtcclxuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggIW1vbGVjdWxlLmhhc1dlaXJkSHlkcm9nZW5Qcm9wZXJ0aWVzKCksXHJcbiAgICAgICAgYGhhcyB3ZWlyZCBoeWRyb2dlbiBwYXR0ZXJuIGluOiAke21vbGVjdWxlLmZpbHRlckNvbW1vbk5hbWUoIG1vbGVjdWxlLmNvbW1vbk5hbWUgKX1gICk7XHJcbiAgICAgIHJldHVybiBtb2xlY3VsZTtcclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgYSBsaXN0IG9mIG1vbGVjdWxlIHN0cnVjdHVyZXNcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5ncyAtIEZpbGUgbmFtZSByZWxhdGl2ZSB0byB0aGUgc2ltJ3MgZGF0YSBkaXJlY3RvcnlcclxuICAgKlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICogQHJldHVybnNcclxuICAgKi9cclxuICBzdGF0aWMgcmVhZE1vbGVjdWxlU3RydWN0dXJlc0Zyb21EYXRhKCBzdHJpbmdzICkge1xyXG4gICAgY29uc3QgbGVuID0gc3RyaW5ncy5sZW5ndGg7XHJcbiAgICBjb25zdCBhcnIgPSBuZXcgQXJyYXkoIGxlbiApO1xyXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgbGVuOyBpKysgKSB7XHJcbiAgICAgIGNvbnN0IHN0cmluZyA9IHN0cmluZ3NbIGkgXTtcclxuICAgICAgY29uc3Qgc3RydWN0dXJlID0gTW9sZWN1bGVTdHJ1Y3R1cmUuZnJvbVNlcmlhbDJCYXNpYyggc3RyaW5nICk7XHJcblxyXG4gICAgICAvLyBzYW5pdHkgY2hlY2tzXHJcbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoICFzdHJ1Y3R1cmUuaGFzV2VpcmRIeWRyb2dlblByb3BlcnRpZXMoKSwgYFdlaXJkIGh5ZHJvZ2VuIHBhdHRlcm4gaW4gc3RydWN0dXJlOiAke3N0cmluZ31gICk7XHJcbiAgICAgIGFyclsgaSBdID0gc3RydWN0dXJlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFycjtcclxuICB9XHJcbn1cclxuXHJcbi8vIHN0YXRpY3NcclxuLy8gQHByaXZhdGUge01vbGVjdWxlTGlzdHxudWxsfVxyXG5Nb2xlY3VsZUxpc3QubWFzdGVySW5zdGFuY2UgPSBudWxsO1xyXG5cclxuLy8gQHByaXZhdGUge2Jvb2xlYW59XHJcbk1vbGVjdWxlTGlzdC5pbml0aWFsaXplZCA9IGZhbHNlO1xyXG5cclxuLy8gQHByaXZhdGUge01vbGVjdWxlTGlzdH1cclxuTW9sZWN1bGVMaXN0LmluaXRpYWxMaXN0ID0gbmV3IE1vbGVjdWxlTGlzdCgpO1xyXG5Nb2xlY3VsZUxpc3QuaW5pdGlhbExpc3QubG9hZEluaXRpYWxEYXRhKCk7XHJcblxyXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSpcclxuICogbW9sZWN1bGUgcmVmZXJlbmNlcyBhbmQgY3VzdG9taXplZCBuYW1lc1xyXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuLy8gQHB1YmxpYyB7c3RyaW5nfVxyXG5Nb2xlY3VsZUxpc3QuQ08yID0gTW9sZWN1bGVMaXN0LmdldE1vbGVjdWxlQnlOYW1lKCAnQ2FyYm9uIERpb3hpZGUnICk7XHJcbk1vbGVjdWxlTGlzdC5IMk8gPSBNb2xlY3VsZUxpc3QuZ2V0TW9sZWN1bGVCeU5hbWUoICdXYXRlcicgKTtcclxuTW9sZWN1bGVMaXN0Lk4yID0gTW9sZWN1bGVMaXN0LmdldE1vbGVjdWxlQnlOYW1lKCAnTml0cm9nZW4nICk7XHJcbk1vbGVjdWxlTGlzdC5DTyA9IE1vbGVjdWxlTGlzdC5nZXRNb2xlY3VsZUJ5TmFtZSggJ0NhcmJvbiBNb25veGlkZScgKTtcclxuTW9sZWN1bGVMaXN0Lk5PID0gTW9sZWN1bGVMaXN0LmdldE1vbGVjdWxlQnlOYW1lKCAnTml0cmljIE94aWRlJyApO1xyXG5Nb2xlY3VsZUxpc3QuTzIgPSBNb2xlY3VsZUxpc3QuZ2V0TW9sZWN1bGVCeU5hbWUoICdPeHlnZW4nICk7XHJcbk1vbGVjdWxlTGlzdC5IMiA9IE1vbGVjdWxlTGlzdC5nZXRNb2xlY3VsZUJ5TmFtZSggJ0h5ZHJvZ2VuJyApO1xyXG5Nb2xlY3VsZUxpc3QuQ2wyID0gTW9sZWN1bGVMaXN0LmdldE1vbGVjdWxlQnlOYW1lKCAnQ2hsb3JpbmUnICk7XHJcbk1vbGVjdWxlTGlzdC5OSDMgPSBNb2xlY3VsZUxpc3QuZ2V0TW9sZWN1bGVCeU5hbWUoICdBbW1vbmlhJyApO1xyXG5Nb2xlY3VsZUxpc3QuQzJINE8yID0gTW9sZWN1bGVMaXN0LmdldE1vbGVjdWxlQnlOYW1lKCAnQWNldGljIEFjaWQnICk7XHJcblxyXG4vLyBAcHVibGljIHtBcnJheS48U3RyaW5nPn0gTW9sZWN1bGVzIHRoYXQgY2FuIGJlIHVzZWQgZm9yIGNvbGxlY3Rpb24gYm94ZXNcclxuTW9sZWN1bGVMaXN0LmNvbGxlY3Rpb25Cb3hNb2xlY3VsZXMgPSBbXHJcbiAgTW9sZWN1bGVMaXN0LkNPMixcclxuICBNb2xlY3VsZUxpc3QuSDJPLFxyXG4gIE1vbGVjdWxlTGlzdC5OMixcclxuICBNb2xlY3VsZUxpc3QuQ08sXHJcbiAgTW9sZWN1bGVMaXN0Lk8yLFxyXG4gIE1vbGVjdWxlTGlzdC5IMixcclxuICBNb2xlY3VsZUxpc3QuTkgzLFxyXG4gIE1vbGVjdWxlTGlzdC5DbDIsXHJcbiAgTW9sZWN1bGVMaXN0Lk5PLFxyXG4gIE1vbGVjdWxlTGlzdC5nZXRNb2xlY3VsZUJ5TmFtZSggJ0FjZXR5bGVuZScgKSxcclxuICBNb2xlY3VsZUxpc3QuZ2V0TW9sZWN1bGVCeU5hbWUoICdCb3JhbmUnICksXHJcbiAgTW9sZWN1bGVMaXN0LmdldE1vbGVjdWxlQnlOYW1lKCAnVHJpZmx1b3JvYm9yYW5lJyApLFxyXG4gIE1vbGVjdWxlTGlzdC5nZXRNb2xlY3VsZUJ5TmFtZSggJ0NobG9yb21ldGhhbmUnICksXHJcbiAgTW9sZWN1bGVMaXN0LmdldE1vbGVjdWxlQnlOYW1lKCAnRXRoeWxlbmUnICksXHJcbiAgTW9sZWN1bGVMaXN0LmdldE1vbGVjdWxlQnlOYW1lKCAnRmx1b3JpbmUnICksXHJcbiAgTW9sZWN1bGVMaXN0LmdldE1vbGVjdWxlQnlOYW1lKCAnRmx1b3JvbWV0aGFuZScgKSxcclxuICBNb2xlY3VsZUxpc3QuZ2V0TW9sZWN1bGVCeU5hbWUoICdGb3JtYWxkZWh5ZGUnICksXHJcbiAgTW9sZWN1bGVMaXN0LmdldE1vbGVjdWxlQnlOYW1lKCAnSHlkcm9nZW4gQ3lhbmlkZScgKSxcclxuICBNb2xlY3VsZUxpc3QuZ2V0TW9sZWN1bGVCeU5hbWUoICdIeWRyb2dlbiBQZXJveGlkZScgKSxcclxuICBNb2xlY3VsZUxpc3QuZ2V0TW9sZWN1bGVCeU5hbWUoICdIeWRyb2dlbiBTdWxmaWRlJyApLFxyXG4gIE1vbGVjdWxlTGlzdC5nZXRNb2xlY3VsZUJ5TmFtZSggJ01ldGhhbmUnICksXHJcbiAgTW9sZWN1bGVMaXN0LmdldE1vbGVjdWxlQnlOYW1lKCAnTml0cm91cyBPeGlkZScgKSxcclxuICBNb2xlY3VsZUxpc3QuZ2V0TW9sZWN1bGVCeU5hbWUoICdPem9uZScgKSxcclxuICBNb2xlY3VsZUxpc3QuZ2V0TW9sZWN1bGVCeU5hbWUoICdQaG9zcGhpbmUnICksXHJcbiAgTW9sZWN1bGVMaXN0LmdldE1vbGVjdWxlQnlOYW1lKCAnU2lsYW5lJyApLFxyXG4gIE1vbGVjdWxlTGlzdC5nZXRNb2xlY3VsZUJ5TmFtZSggJ1N1bGZ1ciBEaW94aWRlJyApXHJcbl07XHJcblxyXG5Nb2xlY3VsZUxpc3QuY29sbGVjdGlvbkJveE1vbGVjdWxlcy5mb3JFYWNoKCBtb2xlY3VsZSA9PiB7XHJcbiAgYXNzZXJ0ICYmIGFzc2VydCggISFtb2xlY3VsZSApO1xyXG59ICk7XHJcblxyXG4vLyBOb3RlOiAocGVyZm9ybWFuY2UpIHBvc3Rwb25lIGFsbCBvZiB0aGUgbG9hZGluZz9cclxuTW9sZWN1bGVMaXN0LmdldE1hc3Rlckluc3RhbmNlKCk7XHJcblxyXG5idWlsZEFNb2xlY3VsZS5yZWdpc3RlciggJ01vbGVjdWxlTGlzdCcsIE1vbGVjdWxlTGlzdCApO1xyXG5leHBvcnQgZGVmYXVsdCBNb2xlY3VsZUxpc3Q7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGNBQWMsTUFBTSx5QkFBeUI7QUFDcEQsT0FBT0MsZ0JBQWdCLE1BQU0s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