// Copyright 2020-2022, University of Colorado Boulder

/**
 * Displays the molecule name, 3D button, and 'X' button to break apart the molecule
 *
 * @author Denzell Barnett (PhET Interactive Simulations)
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import { Shape } from '../../../../kite/js/imports.js';
import StringUtils from '../../../../phetcommon/js/util/StringUtils.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { ButtonListener, HBox, Image, Text } from '../../../../scenery/js/imports.js';
import RectangularPushButton from '../../../../sun/js/buttons/RectangularPushButton.js';
import nullSoundPlayer from '../../../../tambo/js/shared-sound-players/nullSoundPlayer.js';
import splitBlue_png from '../../../images/splitBlue_png.js';
import buildAMolecule from '../../buildAMolecule.js';
import BuildAMoleculeStrings from '../../BuildAMoleculeStrings.js';
import BAMConstants from '../BAMConstants.js';
import MoleculeList from '../model/MoleculeList.js';
import ShowMolecule3DButtonNode from './view3d/ShowMolecule3DButtonNode.js';

// constants
const DILATION_FACTOR = 4 / 1.2;
const SCALE = 1.2;
class MoleculeControlsHBox extends HBox {
  /**
   * @param {Kit} kit
   * @param {Molecule} molecule
   * @param {function} showDialogCallback
   */
  constructor(kit, molecule, showDialogCallback) {
    super({
      spacing: 9
    });

    // @public {Molecule}
    this.molecule = molecule;

    // @private {function}
    this.updatePositionListener = this.updatePosition.bind(this);

    // Check if molecule data exists
    const completeMolecule = MoleculeList.getMasterInstance().findMatchingCompleteMolecule(molecule);
    if (completeMolecule) {
      // Label with chemical formula and common name
      const label = new Text(StringUtils.fillIn(BuildAMoleculeStrings.moleculeNamePattern, {
        display: completeMolecule.getDisplayName()
      }), {
        font: new PhetFont({
          size: 17,
          weight: 'bold'
        }),
        maxWidth: BAMConstants.TEXT_MAX_WIDTH
      });
      this.addChild(label);

      // @private Button that shows 3d representation of molecule
      const button3d = new ShowMolecule3DButtonNode(completeMolecule, showDialogCallback, {
        scale: SCALE
      });
      //RREVIEW: touchArea accepts {Bounds2}, no need for Shape.bounds wrapping
      button3d.touchArea = Shape.bounds(button3d.childBounds.dilated(DILATION_FACTOR));
      this.addChild(button3d);
    }

    // Break-up button 'X'
    const buttonBreak = new RectangularPushButton({
      content: new Image(splitBlue_png),
      scale: SCALE,
      cursor: 'pointer',
      xMargin: 0,
      // Setting margins to zero so the 'X' image takes up the whole button view
      yMargin: 0,
      soundPlayer: nullSoundPlayer
    });
    buttonBreak.touchArea = buttonBreak.childBounds.dilated(DILATION_FACTOR);
    buttonBreak.addInputListener(new ButtonListener({
      fire: () => {
        kit.breakMolecule(molecule);
      }
    }));
    this.addChild(buttonBreak);
    molecule.atoms.forEach(atom => {
      atom.positionProperty.link(this.updatePositionListener);
    });

    // sanity check. should update (unfortunately) a number of times above
    this.updatePosition();
  }

  /**
   * @override
   * @public
   */
  dispose() {
    const listener = this.updatePositionListener;
    if (listener) {
      this.molecule.atoms.forEach(atom => {
        atom.positionProperty.unlink(listener);
      });
    }
    super.dispose();
  }

  /**
   * Update the position of the controls.
   *
   * @private
   */
  updatePosition() {
    const modelPositionBounds = this.molecule.positionBounds;
    const moleculeViewBounds = BAMConstants.MODEL_VIEW_TRANSFORM.modelToViewBounds(modelPositionBounds);
    this.setTranslation(moleculeViewBounds.centerX - this.width / 2,
    // horizontally center
    moleculeViewBounds.minY - this.height - 5); // offset from top of molecule
  }
}

buildAMolecule.register('MoleculeControlsHBox', MoleculeControlsHBox);
export default MoleculeControlsHBox;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTaGFwZSIsIlN0cmluZ1V0aWxzIiwiUGhldEZvbnQiLCJCdXR0b25MaXN0ZW5lciIsIkhCb3giLCJJbWFnZSIsIlRleHQiLCJSZWN0YW5ndWxhclB1c2hCdXR0b24iLCJudWxsU291bmRQbGF5ZXIiLCJzcGxpdEJsdWVfcG5nIiwiYnVpbGRBTW9sZWN1bGUiLCJCdWlsZEFNb2xlY3VsZVN0cmluZ3MiLCJCQU1Db25zdGFudHMiLCJNb2xlY3VsZUxpc3QiLCJTaG93TW9sZWN1bGUzREJ1dHRvbk5vZGUiLCJESUxBVElPTl9GQUNUT1IiLCJTQ0FMRSIsIk1vbGVjdWxlQ29udHJvbHNIQm94IiwiY29uc3RydWN0b3IiLCJraXQiLCJtb2xlY3VsZSIsInNob3dEaWFsb2dDYWxsYmFjayIsInNwYWNpbmciLCJ1cGRhdGVQb3NpdGlvbkxpc3RlbmVyIiwidXBkYXRlUG9zaXRpb24iLCJiaW5kIiwiY29tcGxldGVNb2xlY3VsZSIsImdldE1hc3Rlckluc3RhbmNlIiwiZmluZE1hdGNoaW5nQ29tcGxldGVNb2xlY3VsZSIsImxhYmVsIiwiZmlsbEluIiwibW9sZWN1bGVOYW1lUGF0dGVybiIsImRpc3BsYXkiLCJnZXREaXNwbGF5TmFtZSIsImZvbnQiLCJzaXplIiwid2VpZ2h0IiwibWF4V2lkdGgiLCJURVhUX01BWF9XSURUSCIsImFkZENoaWxkIiwiYnV0dG9uM2QiLCJzY2FsZSIsInRvdWNoQXJlYSIsImJvdW5kcyIsImNoaWxkQm91bmRzIiwiZGlsYXRlZCIsImJ1dHRvbkJyZWFrIiwiY29udGVudCIsImN1cnNvciIsInhNYXJnaW4iLCJ5TWFyZ2luIiwic291bmRQbGF5ZXIiLCJhZGRJbnB1dExpc3RlbmVyIiwiZmlyZSIsImJyZWFrTW9sZWN1bGUiLCJhdG9tcyIsImZvckVhY2giLCJhdG9tIiwicG9zaXRpb25Qcm9wZXJ0eSIsImxpbmsiLCJkaXNwb3NlIiwibGlzdGVuZXIiLCJ1bmxpbmsiLCJtb2RlbFBvc2l0aW9uQm91bmRzIiwicG9zaXRpb25Cb3VuZHMiLCJtb2xlY3VsZVZpZXdCb3VuZHMiLCJNT0RFTF9WSUVXX1RSQU5TRk9STSIsIm1vZGVsVG9WaWV3Qm91bmRzIiwic2V0VHJhbnNsYXRpb24iLCJjZW50ZXJYIiwid2lkdGgiLCJtaW5ZIiwiaGVpZ2h0IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJNb2xlY3VsZUNvbnRyb2xzSEJveC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMC0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBEaXNwbGF5cyB0aGUgbW9sZWN1bGUgbmFtZSwgM0QgYnV0dG9uLCBhbmQgJ1gnIGJ1dHRvbiB0byBicmVhayBhcGFydCB0aGUgbW9sZWN1bGVcclxuICpcclxuICogQGF1dGhvciBEZW56ZWxsIEJhcm5ldHQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cclxuICovXHJcblxyXG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gJy4uLy4uLy4uLy4uL2tpdGUvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBTdHJpbmdVdGlscyBmcm9tICcuLi8uLi8uLi8uLi9waGV0Y29tbW9uL2pzL3V0aWwvU3RyaW5nVXRpbHMuanMnO1xyXG5pbXBvcnQgUGhldEZvbnQgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1BoZXRGb250LmpzJztcclxuaW1wb3J0IHsgQnV0dG9uTGlzdGVuZXIsIEhCb3gsIEltYWdlLCBUZXh0IH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IFJlY3Rhbmd1bGFyUHVzaEJ1dHRvbiBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvYnV0dG9ucy9SZWN0YW5ndWxhclB1c2hCdXR0b24uanMnO1xyXG5pbXBvcnQgbnVsbFNvdW5kUGxheWVyIGZyb20gJy4uLy4uLy4uLy4uL3RhbWJvL2pzL3NoYXJlZC1zb3VuZC1wbGF5ZXJzL251bGxTb3VuZFBsYXllci5qcyc7XHJcbmltcG9ydCBzcGxpdEJsdWVfcG5nIGZyb20gJy4uLy4uLy4uL2ltYWdlcy9zcGxpdEJsdWVfcG5nLmpzJztcclxuaW1wb3J0IGJ1aWxkQU1vbGVjdWxlIGZyb20gJy4uLy4uL2J1aWxkQU1vbGVjdWxlLmpzJztcclxuaW1wb3J0IEJ1aWxkQU1vbGVjdWxlU3RyaW5ncyBmcm9tICcuLi8uLi9CdWlsZEFNb2xlY3VsZVN0cmluZ3MuanMnO1xyXG5pbXBvcnQgQkFNQ29uc3RhbnRzIGZyb20gJy4uL0JBTUNvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBNb2xlY3VsZUxpc3QgZnJvbSAnLi4vbW9kZWwvTW9sZWN1bGVMaXN0LmpzJztcclxuaW1wb3J0IFNob3dNb2xlY3VsZTNEQnV0dG9uTm9kZSBmcm9tICcuL3ZpZXczZC9TaG93TW9sZWN1bGUzREJ1dHRvbk5vZGUuanMnO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IERJTEFUSU9OX0ZBQ1RPUiA9IDQgLyAxLjI7XHJcbmNvbnN0IFNDQUxFID0gMS4yO1xyXG5cclxuY2xhc3MgTW9sZWN1bGVDb250cm9sc0hCb3ggZXh0ZW5kcyBIQm94IHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtLaXR9IGtpdFxyXG4gICAqIEBwYXJhbSB7TW9sZWN1bGV9IG1vbGVjdWxlXHJcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gc2hvd0RpYWxvZ0NhbGxiYWNrXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIGtpdCwgbW9sZWN1bGUsIHNob3dEaWFsb2dDYWxsYmFjayApIHtcclxuICAgIHN1cGVyKCB7IHNwYWNpbmc6IDkgfSApO1xyXG5cclxuICAgIC8vIEBwdWJsaWMge01vbGVjdWxlfVxyXG4gICAgdGhpcy5tb2xlY3VsZSA9IG1vbGVjdWxlO1xyXG5cclxuICAgIC8vIEBwcml2YXRlIHtmdW5jdGlvbn1cclxuICAgIHRoaXMudXBkYXRlUG9zaXRpb25MaXN0ZW5lciA9IHRoaXMudXBkYXRlUG9zaXRpb24uYmluZCggdGhpcyApO1xyXG5cclxuICAgIC8vIENoZWNrIGlmIG1vbGVjdWxlIGRhdGEgZXhpc3RzXHJcbiAgICBjb25zdCBjb21wbGV0ZU1vbGVjdWxlID0gTW9sZWN1bGVMaXN0LmdldE1hc3Rlckluc3RhbmNlKCkuZmluZE1hdGNoaW5nQ29tcGxldGVNb2xlY3VsZSggbW9sZWN1bGUgKTtcclxuICAgIGlmICggY29tcGxldGVNb2xlY3VsZSApIHtcclxuXHJcbiAgICAgIC8vIExhYmVsIHdpdGggY2hlbWljYWwgZm9ybXVsYSBhbmQgY29tbW9uIG5hbWVcclxuICAgICAgY29uc3QgbGFiZWwgPSBuZXcgVGV4dCggU3RyaW5nVXRpbHMuZmlsbEluKCBCdWlsZEFNb2xlY3VsZVN0cmluZ3MubW9sZWN1bGVOYW1lUGF0dGVybiwge1xyXG4gICAgICAgIGRpc3BsYXk6IGNvbXBsZXRlTW9sZWN1bGUuZ2V0RGlzcGxheU5hbWUoKVxyXG4gICAgICB9ICksIHtcclxuICAgICAgICBmb250OiBuZXcgUGhldEZvbnQoIHsgc2l6ZTogMTcsIHdlaWdodDogJ2JvbGQnIH0gKSxcclxuICAgICAgICBtYXhXaWR0aDogQkFNQ29uc3RhbnRzLlRFWFRfTUFYX1dJRFRIXHJcbiAgICAgIH0gKTtcclxuICAgICAgdGhpcy5hZGRDaGlsZCggbGFiZWwgKTtcclxuXHJcbiAgICAgIC8vIEBwcml2YXRlIEJ1dHRvbiB0aGF0IHNob3dzIDNkIHJlcHJlc2VudGF0aW9uIG9mIG1vbGVjdWxlXHJcbiAgICAgIGNvbnN0IGJ1dHRvbjNkID0gbmV3IFNob3dNb2xlY3VsZTNEQnV0dG9uTm9kZSggY29tcGxldGVNb2xlY3VsZSwgc2hvd0RpYWxvZ0NhbGxiYWNrLCB7XHJcbiAgICAgICAgc2NhbGU6IFNDQUxFXHJcbiAgICAgIH0gKTtcclxuICAgICAgLy9SUkVWSUVXOiB0b3VjaEFyZWEgYWNjZXB0cyB7Qm91bmRzMn0sIG5vIG5lZWQgZm9yIFNoYXBlLmJvdW5kcyB3cmFwcGluZ1xyXG4gICAgICBidXR0b24zZC50b3VjaEFyZWEgPSBTaGFwZS5ib3VuZHMoIGJ1dHRvbjNkLmNoaWxkQm91bmRzLmRpbGF0ZWQoIERJTEFUSU9OX0ZBQ1RPUiApICk7XHJcbiAgICAgIHRoaXMuYWRkQ2hpbGQoIGJ1dHRvbjNkICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQnJlYWstdXAgYnV0dG9uICdYJ1xyXG4gICAgY29uc3QgYnV0dG9uQnJlYWsgPSBuZXcgUmVjdGFuZ3VsYXJQdXNoQnV0dG9uKCB7XHJcbiAgICAgIGNvbnRlbnQ6IG5ldyBJbWFnZSggc3BsaXRCbHVlX3BuZyApLFxyXG4gICAgICBzY2FsZTogU0NBTEUsXHJcbiAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxyXG4gICAgICB4TWFyZ2luOiAwLCAvLyBTZXR0aW5nIG1hcmdpbnMgdG8gemVybyBzbyB0aGUgJ1gnIGltYWdlIHRha2VzIHVwIHRoZSB3aG9sZSBidXR0b24gdmlld1xyXG4gICAgICB5TWFyZ2luOiAwLFxyXG4gICAgICBzb3VuZFBsYXllcjogbnVsbFNvdW5kUGxheWVyXHJcbiAgICB9ICk7XHJcbiAgICBidXR0b25CcmVhay50b3VjaEFyZWEgPSBidXR0b25CcmVhay5jaGlsZEJvdW5kcy5kaWxhdGVkKCBESUxBVElPTl9GQUNUT1IgKTtcclxuICAgIGJ1dHRvbkJyZWFrLmFkZElucHV0TGlzdGVuZXIoIG5ldyBCdXR0b25MaXN0ZW5lcigge1xyXG4gICAgICBmaXJlOiAoKSA9PiB7XHJcbiAgICAgICAga2l0LmJyZWFrTW9sZWN1bGUoIG1vbGVjdWxlICk7XHJcbiAgICAgIH1cclxuICAgIH0gKSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggYnV0dG9uQnJlYWsgKTtcclxuXHJcbiAgICBtb2xlY3VsZS5hdG9tcy5mb3JFYWNoKCBhdG9tID0+IHtcclxuICAgICAgYXRvbS5wb3NpdGlvblByb3BlcnR5LmxpbmsoIHRoaXMudXBkYXRlUG9zaXRpb25MaXN0ZW5lciApO1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIHNhbml0eSBjaGVjay4gc2hvdWxkIHVwZGF0ZSAodW5mb3J0dW5hdGVseSkgYSBudW1iZXIgb2YgdGltZXMgYWJvdmVcclxuICAgIHRoaXMudXBkYXRlUG9zaXRpb24oKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBkaXNwb3NlKCkge1xyXG4gICAgY29uc3QgbGlzdGVuZXIgPSB0aGlzLnVwZGF0ZVBvc2l0aW9uTGlzdGVuZXI7XHJcbiAgICBpZiAoIGxpc3RlbmVyICkge1xyXG4gICAgICB0aGlzLm1vbGVjdWxlLmF0b21zLmZvckVhY2goIGF0b20gPT4ge1xyXG4gICAgICAgIGF0b20ucG9zaXRpb25Qcm9wZXJ0eS51bmxpbmsoIGxpc3RlbmVyICk7XHJcbiAgICAgIH0gKTtcclxuICAgIH1cclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZSB0aGUgcG9zaXRpb24gb2YgdGhlIGNvbnRyb2xzLlxyXG4gICAqXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICB1cGRhdGVQb3NpdGlvbigpIHtcclxuICAgIGNvbnN0IG1vZGVsUG9zaXRpb25Cb3VuZHMgPSB0aGlzLm1vbGVjdWxlLnBvc2l0aW9uQm91bmRzO1xyXG4gICAgY29uc3QgbW9sZWN1bGVWaWV3Qm91bmRzID0gQkFNQ29uc3RhbnRzLk1PREVMX1ZJRVdfVFJBTlNGT1JNLm1vZGVsVG9WaWV3Qm91bmRzKCBtb2RlbFBvc2l0aW9uQm91bmRzICk7XHJcblxyXG4gICAgdGhpcy5zZXRUcmFuc2xhdGlvbiggbW9sZWN1bGVWaWV3Qm91bmRzLmNlbnRlclggLSB0aGlzLndpZHRoIC8gMiwgLy8gaG9yaXpvbnRhbGx5IGNlbnRlclxyXG4gICAgICBtb2xlY3VsZVZpZXdCb3VuZHMubWluWSAtIHRoaXMuaGVpZ2h0IC0gNSApOyAvLyBvZmZzZXQgZnJvbSB0b3Agb2YgbW9sZWN1bGVcclxuICB9XHJcbn1cclxuXHJcbmJ1aWxkQU1vbGVjdWxlLnJlZ2lzdGVyKCAnTW9sZWN1bGVDb250cm9sc0hCb3gnLCBNb2xlY3VsZUNvbnRyb2xzSEJveCApO1xyXG5leHBvcnQgZGVmYXVsdCBNb2xlY3VsZUNvbnRyb2xzSEJveDsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxTQUFTQSxLQUFLLFFBQVEsZ0NBQWdDO0FBQ3RELE9BQU9DLFdBQVcsTUFBTSwrQ0FBK0M7QUFDdkUsT0FBT0MsUUFBUSxNQUFNLHlDQUF5QztBQUM5RCxTQUFTQyxjQUFjLEVBQUVDLElBQUksRUFBRUMsS0FBSyxFQUFFQyxJQUFJLFFBQVEsbUNBQW1DO0FBQ3JGLE9BQU9DLHFCQUFxQixNQUFNLHFEQUFxRDtBQUN2RixPQUFPQyxlQUFlLE1BQU0sOERBQThEO0FBQzFGLE9BQU9DLGFBQWEsTUFBTSxrQ0FBa0M7QUFDNUQsT0FBT0MsY0FBYyxNQUFNLHlCQUF5QjtBQUNwRCxPQUFPQyxxQkFBcUIsTUFBTSxnQ0FBZ0M7QUFDbEUsT0FBT0MsWUFBWSxNQUFNLG9CQUFvQjtBQUM3QyxPQUFPQyxZQUFZLE1BQU0sMEJBQTBCO0FBQ25ELE9BQU9DLHdCQUF3QixNQUFNLHNDQUFzQzs7QUFFM0U7QUFDQSxNQUFNQyxlQUFlLEdBQUcsQ0FBQyxHQUFHLEdBQUc7QUFDL0IsTUFBTUMsS0FBSyxHQUFHLEdBQUc7QUFFakIsTUFBTUMsb0JBQW9CLFNBQVNiLElBQUksQ0FBQztFQUV0QztBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBQ0VjLFdBQVdBLENBQUVDLEdBQUcsRUFBRUMsUUFBUSxFQUFFQyxrQkFBa0IsRUFBRztJQUMvQyxLQUFLLENBQUU7TUFBRUMsT0FBTyxFQUFFO0lBQUUsQ0FBRSxDQUFDOztJQUV2QjtJQUNBLElBQUksQ0FBQ0YsUUFBUSxHQUFHQSxRQUFROztJQUV4QjtJQUNBLElBQUksQ0FBQ0csc0JBQXNCLEdBQUcsSUFBSSxDQUFDQyxjQUFjLENBQUNDLElBQUksQ0FB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