// Copyright 2020-2022, University of Colorado Boulder

/**
 * Displays an atom and labels it with the chemical symbol
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 * @author Denzell Barnett (PhET Interactive Simulations)
 * @author Chris Klusendorf (PhET Interactive Simulations)
 */

import Vector2 from '../../../../dot/js/Vector2.js';
import { Shape } from '../../../../kite/js/imports.js';
import merge from '../../../../phet-core/js/merge.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import ShadedSphereNode from '../../../../scenery-phet/js/ShadedSphereNode.js';
import { Color, Node, Text } from '../../../../scenery/js/imports.js';
import buildAMolecule from '../../buildAMolecule.js';
import BAMConstants from '../BAMConstants.js';

// constants
// {Object.<symbol:string,Node> element symbol => graphical node for the atom, so that we can use the DAG to save
// overhead and costs
const ELEMENT_MAP = {};
const GRABBABLE_OFFSET = 35;
class AtomNode extends Node {
  /**
   * @param {Atom2} atom
   * @param {Object} [options]
   */
  constructor(atom, options) {
    const grabbableArea = Shape.circle(0, 0, atom.covalentRadius * 0.65 > GRABBABLE_OFFSET ? GRABBABLE_OFFSET : atom.covalentRadius * 0.65);
    super(merge({
      cursor: 'pointer',
      touchArea: grabbableArea
    }, options));

    // @public {Atom2}
    this.atom = atom;

    // @public {DragListener|null}
    this.dragListener = null;

    // Add an atom icon
    this.addChild(AtomNode.createIcon(atom.element));

    // @private {function}
    this.translationListener = modelPosition => {
      this.setTranslation(BAMConstants.MODEL_VIEW_TRANSFORM.modelToViewPosition(modelPosition));
    };

    // @private {function}
    this.updateVisibilityListener = visible => {
      this.visible = visible;
    };
    this.atom.positionProperty.link(this.translationListener);
    this.atom.visibleProperty.link(this.updateVisibilityListener);
  }

  /**
   * @override
   * @public
   */
  dispose() {
    this.atom.positionProperty.unlink(this.translationListener);
    this.atom.visibleProperty.unlink(this.updateVisibilityListener);
    super.dispose();
  }

  /**
   * Iconize the atom from a specific element
   *
   * @param {Element} element
   * @returns {Node}
   * @private
   */
  static createIcon(element) {
    let node = ELEMENT_MAP[element.symbol];
    if (!node) {
      const color = new Color(element.color);
      const radius = BAMConstants.MODEL_VIEW_TRANSFORM.modelToViewDeltaX(element.covalentRadius);
      const diameter = radius * 2;

      // The body of the node
      node = new ShadedSphereNode(diameter, {
        mainColor: color,
        highlightColor: color.brighterColor(0.5)
      });

      // The label for the node
      const text = new Text(element.symbol, {
        font: new PhetFont({
          size: 50,
          weight: 'bold'
        }),
        fill: AtomNode.getTextColor(color)
      });
      text.scale(Math.min(0.75 * diameter / text.getBounds().width, 0.75 * diameter / text.getBounds().height));
      text.center = Vector2.ZERO;
      node.addChild(text);
      ELEMENT_MAP[element.symbol] = node;
    }
    return node;
  }

  /**
   * Decides whether the atom node needs white text or black text.
   * @param {Color} color
   *
   * @public
   * @returns {Color}
   */
  static getTextColor(color) {
    return 0.30 * color.r + 0.59 * color.g + 0.11 * color.b < 125 ? new Color(225, 225, 255) : new Color(0, 0, 0);
  }
}
buildAMolecule.register('AtomNode', AtomNode);
export default AtomNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWZWN0b3IyIiwiU2hhcGUiLCJtZXJnZSIsIlBoZXRGb250IiwiU2hhZGVkU3BoZXJlTm9kZSIsIkNvbG9yIiwiTm9kZSIsIlRleHQiLCJidWlsZEFNb2xlY3VsZSIsIkJBTUNvbnN0YW50cyIsIkVMRU1FTlRfTUFQIiwiR1JBQkJBQkxFX09GRlNFVCIsIkF0b21Ob2RlIiwiY29uc3RydWN0b3IiLCJhdG9tIiwib3B0aW9ucyIsImdyYWJiYWJsZUFyZWEiLCJjaXJjbGUiLCJjb3ZhbGVudFJhZGl1cyIsImN1cnNvciIsInRvdWNoQXJlYSIsImRyYWdMaXN0ZW5lciIsImFkZENoaWxkIiwiY3JlYXRlSWNvbiIsImVsZW1lbnQiLCJ0cmFuc2xhdGlvbkxpc3RlbmVyIiwibW9kZWxQb3NpdGlvbiIsInNldFRyYW5zbGF0aW9uIiwiTU9ERUxfVklFV19UUkFOU0ZPUk0iLCJtb2RlbFRvVmlld1Bvc2l0aW9uIiwidXBkYXRlVmlzaWJpbGl0eUxpc3RlbmVyIiwidmlzaWJsZSIsInBvc2l0aW9uUHJvcGVydHkiLCJsaW5rIiwidmlzaWJsZVByb3BlcnR5IiwiZGlzcG9zZSIsInVubGluayIsIm5vZGUiLCJzeW1ib2wiLCJjb2xvciIsInJhZGl1cyIsIm1vZGVsVG9WaWV3RGVsdGFYIiwiZGlhbWV0ZXIiLCJtYWluQ29sb3IiLCJoaWdobGlnaHRDb2xvciIsImJyaWdodGVyQ29sb3IiLCJ0ZXh0IiwiZm9udCIsInNpemUiLCJ3ZWlnaHQiLCJmaWxsIiwiZ2V0VGV4dENvbG9yIiwic2NhbGUiLCJNYXRoIiwibWluIiwiZ2V0Qm91bmRzIiwid2lkdGgiLCJoZWlnaHQiLCJjZW50ZXIiLCJaRVJPIiwiciIsImciLCJiIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJBdG9tTm9kZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMC0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBEaXNwbGF5cyBhbiBhdG9tIGFuZCBsYWJlbHMgaXQgd2l0aCB0aGUgY2hlbWljYWwgc3ltYm9sXHJcbiAqXHJcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cclxuICogQGF1dGhvciBEZW56ZWxsIEJhcm5ldHQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqIEBhdXRob3IgQ2hyaXMgS2x1c2VuZG9yZiAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICovXHJcblxyXG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVmVjdG9yMi5qcyc7XHJcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSAnLi4vLi4vLi4vLi4va2l0ZS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IG1lcmdlIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9tZXJnZS5qcyc7XHJcbmltcG9ydCBQaGV0Rm9udCBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvUGhldEZvbnQuanMnO1xyXG5pbXBvcnQgU2hhZGVkU3BoZXJlTm9kZSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvU2hhZGVkU3BoZXJlTm9kZS5qcyc7XHJcbmltcG9ydCB7IENvbG9yLCBOb2RlLCBUZXh0IH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IGJ1aWxkQU1vbGVjdWxlIGZyb20gJy4uLy4uL2J1aWxkQU1vbGVjdWxlLmpzJztcclxuaW1wb3J0IEJBTUNvbnN0YW50cyBmcm9tICcuLi9CQU1Db25zdGFudHMuanMnO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbi8vIHtPYmplY3QuPHN5bWJvbDpzdHJpbmcsTm9kZT4gZWxlbWVudCBzeW1ib2wgPT4gZ3JhcGhpY2FsIG5vZGUgZm9yIHRoZSBhdG9tLCBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlIERBRyB0byBzYXZlXHJcbi8vIG92ZXJoZWFkIGFuZCBjb3N0c1xyXG5jb25zdCBFTEVNRU5UX01BUCA9IHt9O1xyXG5jb25zdCBHUkFCQkFCTEVfT0ZGU0VUID0gMzU7XHJcblxyXG5jbGFzcyBBdG9tTm9kZSBleHRlbmRzIE5vZGUge1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge0F0b20yfSBhdG9tXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBhdG9tLCBvcHRpb25zICkge1xyXG4gICAgY29uc3QgZ3JhYmJhYmxlQXJlYSA9IFNoYXBlLmNpcmNsZSggMCwgMCxcclxuICAgICAgYXRvbS5jb3ZhbGVudFJhZGl1cyAqIDAuNjUgPiBHUkFCQkFCTEVfT0ZGU0VUID8gR1JBQkJBQkxFX09GRlNFVCA6IGF0b20uY292YWxlbnRSYWRpdXMgKiAwLjY1XHJcbiAgICApO1xyXG4gICAgc3VwZXIoIG1lcmdlKCB7XHJcbiAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxyXG4gICAgICB0b3VjaEFyZWE6IGdyYWJiYWJsZUFyZWFcclxuICAgIH0sIG9wdGlvbnMgKSApO1xyXG5cclxuICAgIC8vIEBwdWJsaWMge0F0b20yfVxyXG4gICAgdGhpcy5hdG9tID0gYXRvbTtcclxuXHJcbiAgICAvLyBAcHVibGljIHtEcmFnTGlzdGVuZXJ8bnVsbH1cclxuICAgIHRoaXMuZHJhZ0xpc3RlbmVyID0gbnVsbDtcclxuXHJcbiAgICAvLyBBZGQgYW4gYXRvbSBpY29uXHJcbiAgICB0aGlzLmFkZENoaWxkKCBBdG9tTm9kZS5jcmVhdGVJY29uKCBhdG9tLmVsZW1lbnQgKSApO1xyXG5cclxuICAgIC8vIEBwcml2YXRlIHtmdW5jdGlvbn1cclxuICAgIHRoaXMudHJhbnNsYXRpb25MaXN0ZW5lciA9IG1vZGVsUG9zaXRpb24gPT4ge1xyXG4gICAgICB0aGlzLnNldFRyYW5zbGF0aW9uKCBCQU1Db25zdGFudHMuTU9ERUxfVklFV19UUkFOU0ZPUk0ubW9kZWxUb1ZpZXdQb3NpdGlvbiggbW9kZWxQb3NpdGlvbiApICk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIEBwcml2YXRlIHtmdW5jdGlvbn1cclxuICAgIHRoaXMudXBkYXRlVmlzaWJpbGl0eUxpc3RlbmVyID0gdmlzaWJsZSA9PiB7XHJcbiAgICAgIHRoaXMudmlzaWJsZSA9IHZpc2libGU7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5hdG9tLnBvc2l0aW9uUHJvcGVydHkubGluayggdGhpcy50cmFuc2xhdGlvbkxpc3RlbmVyICk7XHJcbiAgICB0aGlzLmF0b20udmlzaWJsZVByb3BlcnR5LmxpbmsoIHRoaXMudXBkYXRlVmlzaWJpbGl0eUxpc3RlbmVyICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAb3ZlcnJpZGVcclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgZGlzcG9zZSgpIHtcclxuICAgIHRoaXMuYXRvbS5wb3NpdGlvblByb3BlcnR5LnVubGluayggdGhpcy50cmFuc2xhdGlvbkxpc3RlbmVyICk7XHJcbiAgICB0aGlzLmF0b20udmlzaWJsZVByb3BlcnR5LnVubGluayggdGhpcy51cGRhdGVWaXNpYmlsaXR5TGlzdGVuZXIgKTtcclxuXHJcbiAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJY29uaXplIHRoZSBhdG9tIGZyb20gYSBzcGVjaWZpYyBlbGVtZW50XHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcclxuICAgKiBAcmV0dXJucyB7Tm9kZX1cclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIHN0YXRpYyBjcmVhdGVJY29uKCBlbGVtZW50ICkge1xyXG4gICAgbGV0IG5vZGUgPSBFTEVNRU5UX01BUFsgZWxlbWVudC5zeW1ib2wgXTtcclxuXHJcbiAgICBpZiAoICFub2RlICkge1xyXG4gICAgICBjb25zdCBjb2xvciA9IG5ldyBDb2xvciggZWxlbWVudC5jb2xvciApO1xyXG4gICAgICBjb25zdCByYWRpdXMgPSBCQU1Db25zdGFudHMuTU9ERUxfVklFV19UUkFOU0ZPUk0ubW9kZWxUb1ZpZXdEZWx0YVgoIGVsZW1lbnQuY292YWxlbnRSYWRpdXMgKTtcclxuICAgICAgY29uc3QgZGlhbWV0ZXIgPSByYWRpdXMgKiAyO1xyXG5cclxuICAgICAgLy8gVGhlIGJvZHkgb2YgdGhlIG5vZGVcclxuICAgICAgbm9kZSA9IG5ldyBTaGFkZWRTcGhlcmVOb2RlKCBkaWFtZXRlciwge1xyXG4gICAgICAgIG1haW5Db2xvcjogY29sb3IsXHJcbiAgICAgICAgaGlnaGxpZ2h0Q29sb3I6IGNvbG9yLmJyaWdodGVyQ29sb3IoIDAuNSApXHJcbiAgICAgIH0gKTtcclxuXHJcbiAgICAgIC8vIFRoZSBsYWJlbCBmb3IgdGhlIG5vZGVcclxuICAgICAgY29uc3QgdGV4dCA9IG5ldyBUZXh0KCBlbGVtZW50LnN5bWJvbCwge1xyXG4gICAgICAgIGZvbnQ6IG5ldyBQaGV0Rm9udCggeyBzaXplOiA1MCwgd2VpZ2h0OiAnYm9sZCcgfSApLFxyXG4gICAgICAgIGZpbGw6IEF0b21Ob2RlLmdldFRleHRDb2xvciggY29sb3IgKVxyXG4gICAgICB9ICk7XHJcbiAgICAgIHRleHQuc2NhbGUoIE1hdGgubWluKCAwLjc1ICogZGlhbWV0ZXIgLyB0ZXh0LmdldEJvdW5kcygpLndpZHRoLCAwLjc1ICogZGlhbWV0ZXIgLyB0ZXh0LmdldEJvdW5kcygpLmhlaWdodCApICk7XHJcbiAgICAgIHRleHQuY2VudGVyID0gVmVjdG9yMi5aRVJPO1xyXG4gICAgICBub2RlLmFkZENoaWxkKCB0ZXh0ICk7XHJcblxyXG4gICAgICBFTEVNRU5UX01BUFsgZWxlbWVudC5zeW1ib2wgXSA9IG5vZGU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbm9kZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERlY2lkZXMgd2hldGhlciB0aGUgYXRvbSBub2RlIG5lZWRzIHdoaXRlIHRleHQgb3IgYmxhY2sgdGV4dC5cclxuICAgKiBAcGFyYW0ge0NvbG9yfSBjb2xvclxyXG4gICAqXHJcbiAgICogQHB1YmxpY1xyXG4gICAqIEByZXR1cm5zIHtDb2xvcn1cclxuICAgKi9cclxuICBzdGF0aWMgZ2V0VGV4dENvbG9yKCBjb2xvciApIHtcclxuICAgIHJldHVybiAwLjMwICogY29sb3IuciArIDAuNTkgKiBjb2xvci5nICsgMC4xMSAqIGNvbG9yLmIgPCAxMjUgPyBuZXcgQ29sb3IoIDIyNSwgMjI1LCAyNTUgKSA6IG5ldyBDb2xvciggMCwgMCwgMCApO1xyXG4gIH1cclxufVxyXG5cclxuYnVpbGRBTW9sZWN1bGUucmVnaXN0ZXIoICdBdG9tTm9kZScsIEF0b21Ob2RlICk7XHJcbmV4cG9ydCBkZWZhdWx0IEF0b21Ob2RlOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsT0FBTyxNQUFNLCtCQUErQjtBQUNuRCxTQUFTQyxLQUFLLFFBQVEsZ0NBQWdDO0FBQ3RELE9BQU9DLEtBQUssTUFBTSxtQ0FBbUM7QUFDckQsT0FBT0MsUUFBUSxNQUFNLHlDQUF5QztBQUM5RCxPQUFPQyxnQkFBZ0IsTUFBTSxpREFBaUQ7QUFDOUUsU0FBU0MsS0FBSyxFQUFFQyxJQUFJLEVBQUVDLElBQUksUUFBUSxtQ0FBbUM7QUFDckUsT0FBT0MsY0FBYyxNQUFNLHlCQUF5QjtBQUNwRCxPQUFPQyxZQUFZLE1BQU0sb0JBQW9COztBQUU3QztBQUNBO0FBQ0E7QUFDQSxNQUFNQyxXQUFXLEdBQUcsQ0FBQyxDQUFDO0FBQ3RCLE1BQU1DLGdCQUFnQixHQUFHLEVBQUU7QUFFM0IsTUFBTUMsUUFBUSxTQUFTTixJQUFJLENBQUM7RUFFMUI7QUFDRjtBQUNBO0FBQ0E7RUFDRU8sV0FBV0EsQ0FBRUMsSUFBSSxFQUFFQyxPQUFPLEVBQUc7SUFDM0IsTUFBTUMsYUFBYSxHQUFHZixLQUFLLENBQUNnQixNQUFNLENBQUUsQ0FBQyxFQUFFLENBQUMsRUFDdENILElBQUksQ0FBQ0ksY0FBYyxHQUFHLElBQUksR0FBR1AsZ0JBQWdCLEdBQUdBLGdCQUFnQixH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