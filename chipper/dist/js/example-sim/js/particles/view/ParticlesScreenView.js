// Copyright 2021, University of Colorado Boulder

/**
 * ParticlesScreenView is the top-level view component for the 'Magnets' screen. All of the components that make up
 * the screen's view are added here.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import Vector2 from '../../../../dot/js/Vector2.js';
import ScreenView from '../../../../joist/js/ScreenView.js';
import ModelViewTransform2 from '../../../../phetcommon/js/view/ModelViewTransform2.js';
import ResetAllButton from '../../../../scenery-phet/js/buttons/ResetAllButton.js';
import TimeControlNode from '../../../../scenery-phet/js/TimeControlNode.js';
import { Node } from '../../../../scenery/js/imports.js';
import ExampleSimConstants from '../../common/ExampleSimConstants.js';
import exampleSim from '../../exampleSim.js';
import ParticleNode from './ParticleNode.js';

// The model is in nanometers, and this is the number of nanometers per 1 unit in the view.
const NANOMETERS_PER_PIXEL = 100;
class ParticlesScreenView extends ScreenView {
  /**
   * @param {ParticlesModel} model - the top-level model for this screen
   */
  constructor(model) {
    super();

    // Transform from model coordinates to view coordinates. The model's origin is at the position where the
    // particles originate. Move that position to the top center of the screen.  Since the model is in nm,
    // scale up from model to view. And since +y is up in the model, the y scale is negative because +y is
    // down in the view (scenery).
    const viewOffset = new Vector2(this.layoutBounds.centerX, 20);
    const modelViewTransform = ModelViewTransform2.createOffsetXYScaleMapping(viewOffset, 1 / NANOMETERS_PER_PIXEL, -1 / NANOMETERS_PER_PIXEL);

    // Add the 'Reset All' button. This resets the simulation to its initial state. By PhET convention, this
    // button is positioned at the lower-right of the screen.
    const resetAllButton = new ResetAllButton({
      listener: () => {
        // Interrupt any other user interactions that may be in progress, needed for multi-touch.
        this.interruptSubtreeInput();

        // This is an example of using phet.log. Adding the 'log' query parameter to your URL will enabled phet.log
        // output to the console. In this example, we will print the size of the model and view arrays before and
        // after resetting, to confirm that we're not leaking memory.
        phet.log && phet.log('Before reset:');
        phet.log && phet.log(`# Particles=${this.model.particles.length}`);
        phet.log && phet.log(`# ParticlesNodes=${this.particlesNode.children.length}`);

        // Reset the model
        model.reset();
        phet.log && phet.log('After reset:');
        phet.log && phet.log(`# Particles=${this.model.particles.length}`);
        phet.log && phet.log(`# ParticlesNodes=${this.particlesNode.children.length}`);
      },
      right: this.layoutBounds.right - ExampleSimConstants.SCREEN_VIEW_X_MARGIN,
      bottom: this.layoutBounds.bottom - ExampleSimConstants.SCREEN_VIEW_Y_MARGIN
    });
    this.addChild(resetAllButton);

    // Time controls, used to play/pause the animation
    const timeControlNode = new TimeControlNode(model.isPlayingProperty, {
      playPauseStepButtonOptions: {
        stepForwardButtonOptions: {
          listener: () => model.stepOnce()
        }
      },
      right: resetAllButton.left - 40,
      bottom: this.layoutBounds.bottom - ExampleSimConstants.SCREEN_VIEW_Y_MARGIN
    });
    this.addChild(timeControlNode);

    // The parent for all ParticleNode instances. Grouping them here ensures that we're only looking at
    // ParticleNode instances when trying to identify which ParticleNode corresponds to a specific Particle.
    const particlesNode = new Node();
    this.addChild(particlesNode);

    // When a Particle is added to the model, add a corresponding ParticleNode to the view.
    // removeListener is not needed, because model exists for the lifetime of the sim.
    model.particleAddedEmitter.addListener(particle => {
      particlesNode.addChild(new ParticleNode(particle, modelViewTransform));
    });

    // When a Particle is removed from the model, remove its corresponding ParticleNode from the view.
    // removeListener is not needed, because model exists for the lifetime of the sim.
    model.particleRemovedEmitter.addListener(particle => {
      particlesNode.children.forEach(particleNode => {
        if (particleNode.particle === particle) {
          particleNode.dispose(); // this also removes particleNode from particlesNode
        }
      });
    });

    // @private
    this.model = model;
    this.particlesNode = particlesNode;
  }
}
exampleSim.register('ParticlesScreenView', ParticlesScreenView);
export default ParticlesScreenView;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWZWN0b3IyIiwiU2NyZWVuVmlldyIsIk1vZGVsVmlld1RyYW5zZm9ybTIiLCJSZXNldEFsbEJ1dHRvbiIsIlRpbWVDb250cm9sTm9kZSIsIk5vZGUiLCJFeGFtcGxlU2ltQ29uc3RhbnRzIiwiZXhhbXBsZVNpbSIsIlBhcnRpY2xlTm9kZSIsIk5BTk9NRVRFUlNfUEVSX1BJWEVMIiwiUGFydGljbGVzU2NyZWVuVmlldyIsImNvbnN0cnVjdG9yIiwibW9kZWwiLCJ2aWV3T2Zmc2V0IiwibGF5b3V0Qm91bmRzIiwiY2VudGVyWCIsIm1vZGVsVmlld1RyYW5zZm9ybSIsImNyZWF0ZU9mZnNldFhZU2NhbGVNYXBwaW5nIiwicmVzZXRBbGxCdXR0b24iLCJsaXN0ZW5lciIsImludGVycnVwdFN1YnRyZWVJbnB1dCIsInBoZXQiLCJsb2ciLCJwYXJ0aWNsZXMiLCJsZW5ndGgiLCJwYXJ0aWNsZXNOb2RlIiwiY2hpbGRyZW4iLCJyZXNldCIsInJpZ2h0IiwiU0NSRUVOX1ZJRVdfWF9NQVJHSU4iLCJib3R0b20iLCJTQ1JFRU5fVklFV19ZX01BUkdJTiIsImFkZENoaWxkIiwidGltZUNvbnRyb2xOb2RlIiwiaXNQbGF5aW5nUHJvcGVydHkiLCJwbGF5UGF1c2VTdGVwQnV0dG9uT3B0aW9ucyIsInN0ZXBGb3J3YXJkQnV0dG9uT3B0aW9ucyIsInN0ZXBPbmNlIiwibGVmdCIsInBhcnRpY2xlQWRkZWRFbWl0dGVyIiwiYWRkTGlzdGVuZXIiLCJwYXJ0aWNsZSIsInBhcnRpY2xlUmVtb3ZlZEVtaXR0ZXIiLCJmb3JFYWNoIiwicGFydGljbGVOb2RlIiwiZGlzcG9zZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiUGFydGljbGVzU2NyZWVuVmlldy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMSwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogUGFydGljbGVzU2NyZWVuVmlldyBpcyB0aGUgdG9wLWxldmVsIHZpZXcgY29tcG9uZW50IGZvciB0aGUgJ01hZ25ldHMnIHNjcmVlbi4gQWxsIG9mIHRoZSBjb21wb25lbnRzIHRoYXQgbWFrZSB1cFxyXG4gKiB0aGUgc2NyZWVuJ3MgdmlldyBhcmUgYWRkZWQgaGVyZS5cclxuICpcclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICovXHJcblxyXG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVmVjdG9yMi5qcyc7XHJcbmltcG9ydCBTY3JlZW5WaWV3IGZyb20gJy4uLy4uLy4uLy4uL2pvaXN0L2pzL1NjcmVlblZpZXcuanMnO1xyXG5pbXBvcnQgTW9kZWxWaWV3VHJhbnNmb3JtMiBmcm9tICcuLi8uLi8uLi8uLi9waGV0Y29tbW9uL2pzL3ZpZXcvTW9kZWxWaWV3VHJhbnNmb3JtMi5qcyc7XHJcbmltcG9ydCBSZXNldEFsbEJ1dHRvbiBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvYnV0dG9ucy9SZXNldEFsbEJ1dHRvbi5qcyc7XHJcbmltcG9ydCBUaW1lQ29udHJvbE5vZGUgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1RpbWVDb250cm9sTm9kZS5qcyc7XHJcbmltcG9ydCB7IE5vZGUgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgRXhhbXBsZVNpbUNvbnN0YW50cyBmcm9tICcuLi8uLi9jb21tb24vRXhhbXBsZVNpbUNvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBleGFtcGxlU2ltIGZyb20gJy4uLy4uL2V4YW1wbGVTaW0uanMnO1xyXG5pbXBvcnQgUGFydGljbGVOb2RlIGZyb20gJy4vUGFydGljbGVOb2RlLmpzJztcclxuXHJcbi8vIFRoZSBtb2RlbCBpcyBpbiBuYW5vbWV0ZXJzLCBhbmQgdGhpcyBpcyB0aGUgbnVtYmVyIG9mIG5hbm9tZXRlcnMgcGVyIDEgdW5pdCBpbiB0aGUgdmlldy5cclxuY29uc3QgTkFOT01FVEVSU19QRVJfUElYRUwgPSAxMDA7XHJcblxyXG5jbGFzcyBQYXJ0aWNsZXNTY3JlZW5WaWV3IGV4dGVuZHMgU2NyZWVuVmlldyB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7UGFydGljbGVzTW9kZWx9IG1vZGVsIC0gdGhlIHRvcC1sZXZlbCBtb2RlbCBmb3IgdGhpcyBzY3JlZW5cclxuICAgKi9cclxuICBjb25zdHJ1Y3RvciggbW9kZWwgKSB7XHJcblxyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICAvLyBUcmFuc2Zvcm0gZnJvbSBtb2RlbCBjb29yZGluYXRlcyB0byB2aWV3IGNvb3JkaW5hdGVzLiBUaGUgbW9kZWwncyBvcmlnaW4gaXMgYXQgdGhlIHBvc2l0aW9uIHdoZXJlIHRoZVxyXG4gICAgLy8gcGFydGljbGVzIG9yaWdpbmF0ZS4gTW92ZSB0aGF0IHBvc2l0aW9uIHRvIHRoZSB0b3AgY2VudGVyIG9mIHRoZSBzY3JlZW4uICBTaW5jZSB0aGUgbW9kZWwgaXMgaW4gbm0sXHJcbiAgICAvLyBzY2FsZSB1cCBmcm9tIG1vZGVsIHRvIHZpZXcuIEFuZCBzaW5jZSAreSBpcyB1cCBpbiB0aGUgbW9kZWwsIHRoZSB5IHNjYWxlIGlzIG5lZ2F0aXZlIGJlY2F1c2UgK3kgaXNcclxuICAgIC8vIGRvd24gaW4gdGhlIHZpZXcgKHNjZW5lcnkpLlxyXG4gICAgY29uc3Qgdmlld09mZnNldCA9IG5ldyBWZWN0b3IyKCB0aGlzLmxheW91dEJvdW5kcy5jZW50ZXJYLCAyMCApO1xyXG4gICAgY29uc3QgbW9kZWxWaWV3VHJhbnNmb3JtID0gTW9kZWxWaWV3VHJhbnNmb3JtMi5jcmVhdGVPZmZzZXRYWVNjYWxlTWFwcGluZyggdmlld09mZnNldCxcclxuICAgICAgMSAvIE5BTk9NRVRFUlNfUEVSX1BJWEVMLCAtMSAvIE5BTk9NRVRFUlNfUEVSX1BJWEVMICk7XHJcblxyXG4gICAgLy8gQWRkIHRoZSAnUmVzZXQgQWxsJyBidXR0b24uIFRoaXMgcmVzZXRzIHRoZSBzaW11bGF0aW9uIHRvIGl0cyBpbml0aWFsIHN0YXRlLiBCeSBQaEVUIGNvbnZlbnRpb24sIHRoaXNcclxuICAgIC8vIGJ1dHRvbiBpcyBwb3NpdGlvbmVkIGF0IHRoZSBsb3dlci1yaWdodCBvZiB0aGUgc2NyZWVuLlxyXG4gICAgY29uc3QgcmVzZXRBbGxCdXR0b24gPSBuZXcgUmVzZXRBbGxCdXR0b24oIHtcclxuICAgICAgbGlzdGVuZXI6ICgpID0+IHtcclxuXHJcbiAgICAgICAgLy8gSW50ZXJydXB0IGFueSBvdGhlciB1c2VyIGludGVyYWN0aW9ucyB0aGF0IG1heSBiZSBpbiBwcm9ncmVzcywgbmVlZGVkIGZvciBtdWx0aS10b3VjaC5cclxuICAgICAgICB0aGlzLmludGVycnVwdFN1YnRyZWVJbnB1dCgpO1xyXG5cclxuICAgICAgICAvLyBUaGlzIGlzIGFuIGV4YW1wbGUgb2YgdXNpbmcgcGhldC5sb2cuIEFkZGluZyB0aGUgJ2xvZycgcXVlcnkgcGFyYW1ldGVyIHRvIHlvdXIgVVJMIHdpbGwgZW5hYmxlZCBwaGV0LmxvZ1xyXG4gICAgICAgIC8vIG91dHB1dCB0byB0aGUgY29uc29sZS4gSW4gdGhpcyBleGFtcGxlLCB3ZSB3aWxsIHByaW50IHRoZSBzaXplIG9mIHRoZSBtb2RlbCBhbmQgdmlldyBhcnJheXMgYmVmb3JlIGFuZFxyXG4gICAgICAgIC8vIGFmdGVyIHJlc2V0dGluZywgdG8gY29uZmlybSB0aGF0IHdlJ3JlIG5vdCBsZWFraW5nIG1lbW9yeS5cclxuICAgICAgICBwaGV0LmxvZyAmJiBwaGV0LmxvZyggJ0JlZm9yZSByZXNldDonICk7XHJcbiAgICAgICAgcGhldC5sb2cgJiYgcGhldC5sb2coIGAjIFBhcnRpY2xlcz0ke3RoaXMubW9kZWwucGFydGljbGVzLmxlbmd0aH1gICk7XHJcbiAgICAgICAgcGhldC5sb2cgJiYgcGhldC5sb2coIGAjIFBhcnRpY2xlc05vZGVzPSR7dGhpcy5wYXJ0aWNsZXNOb2RlLmNoaWxkcmVuLmxlbmd0aH1gICk7XHJcblxyXG4gICAgICAgIC8vIFJlc2V0IHRoZSBtb2RlbFxyXG4gICAgICAgIG1vZGVsLnJlc2V0KCk7XHJcblxyXG4gICAgICAgIHBoZXQubG9nICYmIHBoZXQubG9nKCAnQWZ0ZXIgcmVzZXQ6JyApO1xyXG4gICAgICAgIHBoZXQubG9nICYmIHBoZXQubG9nKCBgIyBQYXJ0aWNsZXM9JHt0aGlzLm1vZGVsLnBhcnRpY2xlcy5sZW5ndGh9YCApO1xyXG4gICAgICAgIHBoZXQubG9nICYmIHBoZXQubG9nKCBgIyBQYXJ0aWNsZXNOb2Rlcz0ke3RoaXMucGFydGljbGVzTm9kZS5jaGlsZHJlbi5sZW5ndGh9YCApO1xyXG4gICAgICB9LFxyXG4gICAgICByaWdodDogdGhpcy5sYXlvdXRCb3VuZHMucmlnaHQgLSBFeGFtcGxlU2ltQ29uc3RhbnRzLlNDUkVFTl9WSUVXX1hfTUFSR0lOLFxyXG4gICAgICBib3R0b206IHRoaXMubGF5b3V0Qm91bmRzLmJvdHRvbSAtIEV4YW1wbGVTaW1Db25zdGFudHMuU0NSRUVOX1ZJRVdfWV9NQVJHSU5cclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHJlc2V0QWxsQnV0dG9uICk7XHJcblxyXG4gICAgLy8gVGltZSBjb250cm9scywgdXNlZCB0byBwbGF5L3BhdXNlIHRoZSBhbmltYXRpb25cclxuICAgIGNvbnN0IHRpbWVDb250cm9sTm9kZSA9IG5ldyBUaW1lQ29udHJvbE5vZGUoIG1vZGVsLmlzUGxheWluZ1Byb3BlcnR5LCB7XHJcbiAgICAgIHBsYXlQYXVzZVN0ZXBCdXR0b25PcHRpb25zOiB7XHJcbiAgICAgICAgc3RlcEZvcndhcmRCdXR0b25PcHRpb25zOiB7XHJcbiAgICAgICAgICBsaXN0ZW5lcjogKCkgPT4gbW9kZWwuc3RlcE9uY2UoKVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgcmlnaHQ6IHJlc2V0QWxsQnV0dG9uLmxlZnQgLSA0MCxcclxuICAgICAgYm90dG9tOiB0aGlzLmxheW91dEJvdW5kcy5ib3R0b20gLSBFeGFtcGxlU2ltQ29uc3RhbnRzLlNDUkVFTl9WSUVXX1lfTUFSR0lOXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCB0aW1lQ29udHJvbE5vZGUgKTtcclxuXHJcbiAgICAvLyBUaGUgcGFyZW50IGZvciBhbGwgUGFydGljbGVOb2RlIGluc3RhbmNlcy4gR3JvdXBpbmcgdGhlbSBoZXJlIGVuc3VyZXMgdGhhdCB3ZSdyZSBvbmx5IGxvb2tpbmcgYXRcclxuICAgIC8vIFBhcnRpY2xlTm9kZSBpbnN0YW5jZXMgd2hlbiB0cnlpbmcgdG8gaWRlbnRpZnkgd2hpY2ggUGFydGljbGVOb2RlIGNvcnJlc3BvbmRzIHRvIGEgc3BlY2lmaWMgUGFydGljbGUuXHJcbiAgICBjb25zdCBwYXJ0aWNsZXNOb2RlID0gbmV3IE5vZGUoKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHBhcnRpY2xlc05vZGUgKTtcclxuXHJcbiAgICAvLyBXaGVuIGEgUGFydGljbGUgaXMgYWRkZWQgdG8gdGhlIG1vZGVsLCBhZGQgYSBjb3JyZXNwb25kaW5nIFBhcnRpY2xlTm9kZSB0byB0aGUgdmlldy5cclxuICAgIC8vIHJlbW92ZUxpc3RlbmVyIGlzIG5vdCBuZWVkZWQsIGJlY2F1c2UgbW9kZWwgZXhpc3RzIGZvciB0aGUgbGlmZXRpbWUgb2YgdGhlIHNpbS5cclxuICAgIG1vZGVsLnBhcnRpY2xlQWRkZWRFbWl0dGVyLmFkZExpc3RlbmVyKCBwYXJ0aWNsZSA9PiB7XHJcbiAgICAgIHBhcnRpY2xlc05vZGUuYWRkQ2hpbGQoIG5ldyBQYXJ0aWNsZU5vZGUoIHBhcnRpY2xlLCBtb2RlbFZpZXdUcmFuc2Zvcm0gKSApO1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIFdoZW4gYSBQYXJ0aWNsZSBpcyByZW1vdmVkIGZyb20gdGhlIG1vZGVsLCByZW1vdmUgaXRzIGNvcnJlc3BvbmRpbmcgUGFydGljbGVOb2RlIGZyb20gdGhlIHZpZXcuXHJcbiAgICAvLyByZW1vdmVMaXN0ZW5lciBpcyBub3QgbmVlZGVkLCBiZWNhdXNlIG1vZGVsIGV4aXN0cyBmb3IgdGhlIGxpZmV0aW1lIG9mIHRoZSBzaW0uXHJcbiAgICBtb2RlbC5wYXJ0aWNsZVJlbW92ZWRFbWl0dGVyLmFkZExpc3RlbmVyKCBwYXJ0aWNsZSA9PiB7XHJcbiAgICAgIHBhcnRpY2xlc05vZGUuY2hpbGRyZW4uZm9yRWFjaCggcGFydGljbGVOb2RlID0+IHtcclxuICAgICAgICBpZiAoIHBhcnRpY2xlTm9kZS5wYXJ0aWNsZSA9PT0gcGFydGljbGUgKSB7XHJcbiAgICAgICAgICBwYXJ0aWNsZU5vZGUuZGlzcG9zZSgpOyAvLyB0aGlzIGFsc28gcmVtb3ZlcyBwYXJ0aWNsZU5vZGUgZnJvbSBwYXJ0aWNsZXNOb2RlXHJcbiAgICAgICAgfVxyXG4gICAgICB9ICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gQHByaXZhdGVcclxuICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcclxuICAgIHRoaXMucGFydGljbGVzTm9kZSA9IHBhcnRpY2xlc05vZGU7XHJcbiAgfVxyXG59XHJcblxyXG5leGFtcGxlU2ltLnJlZ2lzdGVyKCAnUGFydGljbGVzU2NyZWVuVmlldycsIFBhcnRpY2xlc1NjcmVlblZpZXcgKTtcclxuZXhwb3J0IGRlZmF1bHQgUGFydGljbGVzU2NyZWVuVmlldzsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxPQUFPLE1BQU0sK0JBQStCO0FBQ25ELE9BQU9DLFVBQVUsTUFBTSxvQ0FBb0M7QUFDM0QsT0FBT0MsbUJBQW1CLE1BQU0sdURBQXVEO0FBQ3ZGLE9BQU9DLGNBQWMsTUFBTSx1REFBdUQ7QUFDbEYsT0FBT0MsZUFBZSxNQUFNLGdEQUFnRDtBQUM1RSxTQUFTQyxJQUFJLFFBQVEsbUNBQW1DO0FBQ3hELE9BQU9DLG1CQUFtQixNQUFNLHFDQUFxQztBQUNyRSxPQUFPQyxVQUFVLE1BQU0scUJBQXFCO0FBQzVDLE9BQU9DLFlBQVksTUFBTSxtQkFBbUI7O0FBRTVDO0FBQ0EsTUFBTUMsb0JBQW9CLEdBQUcsR0FBRztBQUVoQyxN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