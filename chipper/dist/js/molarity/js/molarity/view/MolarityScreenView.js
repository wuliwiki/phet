// Copyright 2013-2023, University of Colorado Boulder

/**
 * View for the 'Molarity' screen.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import BooleanProperty from '../../../../axon/js/BooleanProperty.js';
import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import Bounds2 from '../../../../dot/js/Bounds2.js';
import Dimension2 from '../../../../dot/js/Dimension2.js';
import ScreenView from '../../../../joist/js/ScreenView.js';
import { Shape } from '../../../../kite/js/imports.js';
import StringUtils from '../../../../phetcommon/js/util/StringUtils.js';
import ResetAllButton from '../../../../scenery-phet/js/buttons/ResetAllButton.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { Node, Text } from '../../../../scenery/js/imports.js';
import Checkbox from '../../../../sun/js/Checkbox.js';
import soundManager from '../../../../tambo/js/soundManager.js';
import molarity from '../../molarity.js';
import MolarityStrings from '../../MolarityStrings.js';
import MolarityConstants from '../MolarityConstants.js';
import BeakerNode from './BeakerNode.js';
import ConcentrationDisplay from './ConcentrationDisplay.js';
import ConcentrationSoundGenerator from './ConcentrationSoundGenerator.js';
import ConcentrationDescriber from './describers/ConcentrationDescriber.js';
import PrecipitateAmountDescriber from './describers/PrecipitateAmountDescriber.js';
import SoluteAmountDescriber from './describers/SoluteAmountDescriber.js';
import SoluteDescriber from './describers/SoluteDescriber.js';
import VolumeDescriber from './describers/VolumeDescriber.js';
import MolarityAlertManager from './MolarityAlertManager.js';
import MolarityScreenSummaryNode from './MolarityScreenSummaryNode.js';
import PrecipitateNode from './PrecipitateNode.js';
import PrecipitateSoundGenerator from './PrecipitateSoundGenerator.js';
import SaturatedIndicator from './SaturatedIndicator.js';
import SoluteControl from './SoluteControl.js';
import SoluteSelectionSoundGenerator from './SoluteSelectionSoundGenerator.js';
import SolutionNode from './SolutionNode.js';
import VerticalSlider from './VerticalSlider.js';
const fullString = MolarityStrings.full;
const litersString = MolarityStrings.liters;
const lotsString = MolarityStrings.lots;
const lowString = MolarityStrings.low;
const molesString = MolarityStrings.moles;
const noneString = MolarityStrings.none;
const patternParentheses0TextString = MolarityStrings.pattern.parentheses['0text'];
const showValuesString = MolarityStrings.showValues;
const soluteAmountString = MolarityStrings.soluteAmount;
const solutionVolumeString = MolarityStrings.solutionVolume;
const unitsLitersString = MolarityStrings.units.liters;
const unitsMolesString = MolarityStrings.units.moles;

// strings
const beakerSolutionControlsString = MolarityStrings.a11y.beakerSolutionControls;
const solutionValuesHelpTextString = MolarityStrings.a11y.solutionValuesHelpText;
const soluteAmountNoNewlineString = MolarityStrings.a11y.soluteAmountNoNewline;
const sliderHelpTextString = MolarityStrings.a11y.sliderHelpText;

// constants
const SLIDER_TRACK_WIDTH = 12;
class MolarityScreenView extends ScreenView {
  /**
   * @param {MolarityModel} model
   * @param {Tandem} tandem
   */
  constructor(model, tandem) {
    // Whether or the not model values are displayed in the visual view
    const valuesVisibleProperty = new BooleanProperty(false, {
      tandem: tandem.createTandem('valuesVisibleProperty')
    });

    // Determines whether qualitative or quantitative interactive description is used. Even though it is the same as the
    // valuesVisibleProperty currently, this improves maintainability by not overloading valuesVisibleProperty with
    // description-specific use-case (a totally different view). For example, we could decide to display quantitative
    // descriptions when not showing values, but the state of solution is "x," with no refactoring.
    const useQuantitativeDescriptionsProperty = new DerivedProperty([valuesVisibleProperty], currentValuesVisible => currentValuesVisible);

    // pdom - initializes describers and alert manager to generate and update all PDOM and alert content.
    const concentrationDescriber = new ConcentrationDescriber(model.solution, useQuantitativeDescriptionsProperty);
    const precipitateAmountDescriber = new PrecipitateAmountDescriber(model.solution, concentrationDescriber, useQuantitativeDescriptionsProperty);
    const soluteDescriber = new SoluteDescriber(model.solution, concentrationDescriber, precipitateAmountDescriber);
    const volumeDescriber = new VolumeDescriber(model.solution.volumeProperty, useQuantitativeDescriptionsProperty);
    const soluteAmountDescriber = new SoluteAmountDescriber(model.solution.soluteAmountProperty, soluteDescriber, useQuantitativeDescriptionsProperty);
    super({
      layoutBounds: new Bounds2(0, 0, 1100, 700),
      tandem: tandem,
      screenSummaryContent: new MolarityScreenSummaryNode(model, useQuantitativeDescriptionsProperty, concentrationDescriber, soluteAmountDescriber, soluteDescriber, volumeDescriber)
    });
    const molarityAlertManager = new MolarityAlertManager(this, model.solution, useQuantitativeDescriptionsProperty, concentrationDescriber, precipitateAmountDescriber, soluteAmountDescriber, volumeDescriber, soluteDescriber, valuesVisibleProperty);

    // beaker, with solution and precipitate inside of it
    const beakerNode = new BeakerNode(model.solution, MolarityConstants.SOLUTION_VOLUME_RANGE.max, valuesVisibleProperty, tandem.createTandem('beakerNode'), soluteDescriber, soluteAmountDescriber, volumeDescriber, concentrationDescriber, precipitateAmountDescriber, useQuantitativeDescriptionsProperty);
    const cylinderSize = beakerNode.getCylinderSize();
    const solutionNode = new SolutionNode(cylinderSize, beakerNode.getCylinderEndHeight(), model.solution, MolarityConstants.SOLUTION_VOLUME_RANGE.max, tandem.createTandem('solutionNode'));
    const precipitateNode = new PrecipitateNode(model.solution, cylinderSize, beakerNode.getCylinderEndHeight(), model.maxPrecipitateAmount, tandem.createTandem('precipitateNode'));
    const saturatedIndicator = new SaturatedIndicator(model.solution, tandem.createTandem('saturatedIndicator'));

    // solute control
    const soluteComboBoxListParent = new Node();
    const soluteComboBox = new SoluteControl(model.solution.soluteProperty, model.solutes, soluteComboBoxListParent, tandem.createTandem('soluteComboBox'), {
      maxWidth: 500,
      // ComboBox voicing
      comboBoxVoicingContextResponse: () => soluteDescriber.getSoluteChangedAlertString(useQuantitativeDescriptionsProperty)
    });

    // slider for controlling amount of solute
    const soluteAmountSlider = new VerticalSlider(soluteAmountString, StringUtils.format(patternParentheses0TextString, molesString), noneString, lotsString, model.solution.soluteAmountProperty, MolarityConstants.SOLUTE_AMOUNT_RANGE, MolarityConstants.SOLUTE_AMOUNT_DECIMAL_PLACES, unitsMolesString, valuesVisibleProperty, useQuantitativeDescriptionsProperty, molarityAlertManager, soluteAmountDescriber, {
      tandem: tandem.createTandem('soluteAmountSlider'),
      sliderOptions: {
        trackSize: new Dimension2(SLIDER_TRACK_WIDTH, cylinderSize.height),
        // pdom
        accessibleName: soluteAmountNoNewlineString,
        a11yCreateAriaValueText: () => soluteAmountDescriber.getSoluteAmountValueText(),
        a11yDependencies: [model.solution.soluteProperty]
      }
    });

    // slider for controlling volume of solution, sized to match tick marks on the beaker
    const volumeSliderHeight = MolarityConstants.SOLUTION_VOLUME_RANGE.getLength() / MolarityConstants.SOLUTION_VOLUME_RANGE.max * cylinderSize.height;
    const solutionVolumeSlider = new VerticalSlider(solutionVolumeString, StringUtils.format(patternParentheses0TextString, litersString), lowString, fullString, model.solution.volumeProperty, MolarityConstants.SOLUTION_VOLUME_RANGE, MolarityConstants.SOLUTION_VOLUME_DECIMAL_PLACES, unitsLitersString, valuesVisibleProperty, useQuantitativeDescriptionsProperty, molarityAlertManager, volumeDescriber, {
      tandem: tandem.createTandem('solutionVolumeSlider'),
      sliderOptions: {
        trackSize: new Dimension2(SLIDER_TRACK_WIDTH, volumeSliderHeight),
        // pdom
        accessibleName: solutionVolumeString,
        a11yCreateAriaValueText: () => volumeDescriber.getVolumeAriaValueText()
      }
    });

    // concentration display
    const concentrationBarSize = new Dimension2(40, cylinderSize.height + 50);
    const concentrationDisplay = new ConcentrationDisplay(model.solution, MolarityConstants.CONCENTRATION_RANGE, valuesVisibleProperty, concentrationBarSize, tandem.createTandem('concentrationDisplay'));

    // sound generator for concentration
    soundManager.addSoundGenerator(new ConcentrationSoundGenerator(model.solution, soluteAmountSlider, solutionVolumeSlider, model.resetInProgressProperty, {
      initialOutputLevel: 0.15
    }));

    // sound generator for precipitate amount
    soundManager.addSoundGenerator(new PrecipitateSoundGenerator(model.solution.precipitateAmountProperty, soluteAmountSlider, solutionVolumeSlider, {
      initialOutputLevel: 0.1
    }));

    // sound generator for solute selection
    soundManager.addSoundGenerator(new SoluteSelectionSoundGenerator(model.solution.soluteProperty, model.solutes, model.resetInProgressProperty, {
      initialOutputLevel: 0.4
    }));

    // Solution Values checkbox
    const solutionValuesLabel = new Text(showValuesString, {
      font: new PhetFont(22),
      tandem: tandem.createTandem('solutionValuesText')
    });
    const solutionValuesCheckbox = new Checkbox(valuesVisibleProperty, solutionValuesLabel, {
      maxWidth: 175,
      tandem: tandem.createTandem('solutionValuesCheckbox'),
      // pdom
      accessibleName: showValuesString,
      helpText: solutionValuesHelpTextString
    });
    solutionValuesCheckbox.touchArea = Shape.rectangle(solutionValuesCheckbox.left, solutionValuesCheckbox.top - 15, solutionValuesCheckbox.width + 5, solutionValuesCheckbox.height + 30);

    // Reset All button
    const resetAllButton = new ResetAllButton({
      listener: () => {
        valuesVisibleProperty.reset();
        model.reset();
      },
      scale: 1.32,
      tandem: tandem.createTandem('resetAllButton')
    });

    // pdom - heading and accessible order for slider controls section of PDOM
    const solutionControlsNode = new Node({
      tagName: 'div',
      labelTagName: 'h3',
      labelContent: beakerSolutionControlsString,
      descriptionContent: sliderHelpTextString
    });
    solutionControlsNode.pdomOrder = [soluteAmountSlider, solutionVolumeSlider];

    // pdom - heading and accessible order for play area section of PDOM
    this.pdomPlayAreaNode.pdomOrder = [beakerNode, solutionControlsNode, soluteComboBox, soluteComboBoxListParent];

    // pdom - contains PDOM heading for Control Area, and orders the PDOM for included elements
    this.pdomControlAreaNode.pdomOrder = [solutionValuesCheckbox, resetAllButton];

    // layout for things that don't have a position in the model
    {
      soluteAmountSlider.left = 0;
      soluteAmountSlider.top = 0;
      // to the right of the Solute Amount slider
      solutionVolumeSlider.left = soluteAmountSlider.right + 5;
      solutionVolumeSlider.top = soluteAmountSlider.top;
      // to the right of the Solution Volume slider
      beakerNode.left = solutionVolumeSlider.right - 15;
      beakerNode.top = soluteAmountSlider.top - 11;
      // same coordinate frame as beaker
      solutionNode.x = beakerNode.x;
      solutionNode.y = beakerNode.y;
      // same coordinate frame as beaker
      precipitateNode.x = beakerNode.x;
      precipitateNode.y = beakerNode.y;
      // centered below beaker
      soluteComboBox.centerX = beakerNode.centerX;
      soluteComboBox.top = beakerNode.bottom + 50;
      // toward bottom of the beaker
      const saturatedIndicatorVisible = saturatedIndicator.visible; // so we can layout an invisible node
      saturatedIndicator.visible = true;
      saturatedIndicator.centerX = beakerNode.x + cylinderSize.width / 2;
      saturatedIndicator.bottom = beakerNode.bottom - 0.2 * cylinderSize.height;
      saturatedIndicator.visible = saturatedIndicatorVisible;
      // right of beaker
      concentrationDisplay.left = beakerNode.right + 40;
      concentrationDisplay.bottom = beakerNode.bottom;
      // left of combo box
      solutionValuesCheckbox.right = soluteComboBox.left - 50;
      solutionValuesCheckbox.centerY = soluteComboBox.centerY;
      // right of combo box
      resetAllButton.left = Math.max(soluteComboBox.right + 10, concentrationDisplay.centerX - resetAllButton.width / 2);
      resetAllButton.centerY = soluteComboBox.centerY;
    }

    // center everything on the screen
    this.addChild(new Node({
      children: [solutionNode, beakerNode, precipitateNode, saturatedIndicator, soluteAmountSlider, solutionVolumeSlider, concentrationDisplay, solutionValuesCheckbox, resetAllButton, soluteComboBox, soluteComboBoxListParent, solutionControlsNode],
      center: this.layoutBounds.center
    }));
  }
}
molarity.register('MolarityScreenView', MolarityScreenView);
export default MolarityScreenView;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb29sZWFuUHJvcGVydHkiLCJEZXJpdmVkUHJvcGVydHkiLCJCb3VuZHMyIiwiRGltZW5zaW9uMiIsIlNjcmVlblZpZXciLCJTaGFwZSIsIlN0cmluZ1V0aWxzIiwiUmVzZXRBbGxCdXR0b24iLCJQaGV0Rm9udCIsIk5vZGUiLCJUZXh0IiwiQ2hlY2tib3giLCJzb3VuZE1hbmFnZXIiLCJtb2xhcml0eSIsIk1vbGFyaXR5U3RyaW5ncyIsIk1vbGFyaXR5Q29uc3RhbnRzIiwiQmVha2VyTm9kZSIsIkNvbmNlbnRyYXRpb25EaXNwbGF5IiwiQ29uY2VudHJhdGlvblNvdW5kR2VuZXJhdG9yIiwiQ29uY2VudHJhdGlvbkRlc2NyaWJlciIsIlByZWNpcGl0YXRlQW1vdW50RGVzY3JpYmVyIiwiU29sdXRlQW1vdW50RGVzY3JpYmVyIiwiU29sdXRlRGVzY3JpYmVyIiwiVm9sdW1lRGVzY3JpYmVyIiwiTW9sYXJpdHlBbGVydE1hbmFnZXIiLCJNb2xhcml0eVNjcmVlblN1bW1hcnlOb2RlIiwiUHJlY2lwaXRhdGVOb2RlIiwiUHJlY2lwaXRhdGVTb3VuZEdlbmVyYXRvciIsIlNhdHVyYXRlZEluZGljYXRvciIsIlNvbHV0ZUNvbnRyb2wiLCJTb2x1dGVTZWxlY3Rpb25Tb3VuZEdlbmVyYXRvciIsIlNvbHV0aW9uTm9kZSIsIlZlcnRpY2FsU2xpZGVyIiwiZnVsbFN0cmluZyIsImZ1bGwiLCJsaXRlcnNTdHJpbmciLCJsaXRlcnMiLCJsb3RzU3RyaW5nIiwibG90cyIsImxvd1N0cmluZyIsImxvdyIsIm1vbGVzU3RyaW5nIiwibW9sZXMiLCJub25lU3RyaW5nIiwibm9uZSIsInBhdHRlcm5QYXJlbnRoZXNlczBUZXh0U3RyaW5nIiwicGF0dGVybiIsInBhcmVudGhlc2VzIiwic2hvd1ZhbHVlc1N0cmluZyIsInNob3dWYWx1ZXMiLCJzb2x1dGVBbW91bnRTdHJpbmciLCJzb2x1dGVBbW91bnQiLCJzb2x1dGlvblZvbHVtZVN0cmluZyIsInNvbHV0aW9uVm9sdW1lIiwidW5pdHNMaXRlcnNTdHJpbmciLCJ1bml0cyIsInVuaXRzTW9sZXNTdHJpbmciLCJiZWFrZXJTb2x1dGlvbkNvbnRyb2xzU3RyaW5nIiwiYTExeSIsImJlYWtlclNvbHV0aW9uQ29udHJvbHMiLCJzb2x1dGlvblZhbHVlc0hlbHBUZXh0U3RyaW5nIiwic29sdXRpb25WYWx1ZXNIZWxwVGV4dCIsInNvbHV0ZUFtb3VudE5vTmV3bGluZVN0cmluZyIsInNvbHV0ZUFtb3VudE5vTmV3bGluZSIsInNsaWRlckhlbHBUZXh0U3RyaW5nIiwic2xpZGVySGVscFRleHQiLCJTTElERVJfVFJBQ0tfV0lEVEgiLCJNb2xhcml0eVNjcmVlblZpZXciLCJjb25zdHJ1Y3RvciIsIm1vZGVsIiwidGFuZGVtIiwidmFsdWVzVmlzaWJsZVByb3BlcnR5IiwiY3JlYXRlVGFuZGVtIiwidXNlUXVhbnRpdGF0aXZlRGVzY3JpcHRpb25zUHJvcGVydHkiLCJjdXJyZW50VmFsdWVzVmlzaWJsZSIsImNvbmNlbnRyYXRpb25EZXNjcmliZXIiLCJzb2x1dGlvbiIsInByZWNpcGl0YXRlQW1vdW50RGVzY3JpYmVyIiwic29sdXRlRGVzY3JpYmVyIiwidm9sdW1lRGVzY3JpYmVyIiwidm9sdW1lUHJvcGVydHkiLCJzb2x1dGVBbW91bnREZXNjcmliZXIiLCJzb2x1dGVBbW91bnRQcm9wZXJ0eSIsImxheW91dEJvdW5kcyIsInNjcmVlblN1bW1hcnlDb250ZW50IiwibW9sYXJpdHlBbGVydE1hbmFnZXIiLCJiZWFrZXJOb2RlIiwiU09MVVRJT05fVk9MVU1FX1JBTkdFIiwibWF4IiwiY3lsaW5kZXJTaXplIiwiZ2V0Q3lsaW5kZXJTaXplIiwic29sdXRpb25Ob2RlIiwiZ2V0Q3lsaW5kZXJFbmRIZWlnaHQiLCJwcmVjaXBpdGF0ZU5vZGUiLCJtYXhQcmVjaXBpdGF0ZUFtb3VudCIsInNhdHVyYXRlZEluZGljYXRvciIsInNvbHV0ZUNvbWJvQm94TGlzdFBhcmVudCIsInNvbHV0ZUNvbWJvQm94Iiwic29sdXRlUHJvcGVydHkiLCJzb2x1dGVzIiwibWF4V2lkdGgiLCJjb21ib0JveFZvaWNpbmdDb250ZXh0UmVzcG9uc2UiLCJnZXRTb2x1dGVDaGFuZ2VkQWxlcnRTdHJpbmciLCJzb2x1dGVBbW91bnRTbGlkZXIiLCJmb3JtYXQiLCJTT0xVVEVfQU1PVU5UX1JBTkdFIiwiU09MVVRFX0FNT1VOVF9ERUNJTUFMX1BMQUNFUyIsInNsaWRlck9wdGlvbnMiLCJ0cmFja1NpemUiLCJoZWlnaHQiLCJhY2Nlc3NpYmxlTmFtZSIsImExMXlDcmVhdGVBcmlhVmFsdWVUZXh0IiwiZ2V0U29sdXRlQW1vdW50VmFsdWVUZXh0IiwiYTExeURlcGVuZGVuY2llcyIsInZvbHVtZVNsaWRlckhlaWdodCIsImdldExlbmd0aCIsInNvbHV0aW9uVm9sdW1lU2xpZGVyIiwiU09MVVRJT05fVk9MVU1FX0RFQ0lNQUxfUExBQ0VTIiwiZ2V0Vm9sdW1lQXJpYVZhbHVlVGV4dCIsImNvbmNlbnRyYXRpb25CYXJTaXplIiwiY29uY2VudHJhdGlvbkRpc3BsYXkiLCJDT05DRU5UUkFUSU9OX1JBTkdFIiwiYWRkU291bmRHZW5lcmF0b3IiLCJyZXNldEluUHJvZ3Jlc3NQcm9wZXJ0eSIsImluaXRpYWxPdXRwdXRMZXZlbCIsInByZWNpcGl0YXRlQW1vdW50UHJvcGVydHkiLCJzb2x1dGlvblZhbHVlc0xhYmVsIiwiZm9udCIsInNvbHV0aW9uVmFsdWVzQ2hlY2tib3giLCJoZWxwVGV4dCIsInRvdWNoQXJlYSIsInJlY3RhbmdsZSIsImxlZnQiLCJ0b3AiLCJ3aWR0aCIsInJlc2V0QWxsQnV0dG9uIiwibGlzdGVuZXIiLCJyZXNldCIsInNjYWxlIiwic29sdXRpb25Db250cm9sc05vZGUiLCJ0YWdOYW1lIiwibGFiZWxUYWdOYW1lIiwibGFiZWxDb250ZW50IiwiZGVzY3JpcHRpb25Db250ZW50IiwicGRvbU9yZGVyIiwicGRvbVBsYXlBcmVhTm9kZSIsInBkb21Db250cm9sQXJlYU5vZGUiLCJyaWdodCIsIngiLCJ5IiwiY2VudGVyWCIsImJvdHRvbSIsInNhdHVyYXRlZEluZGljYXRvclZpc2libGUiLCJ2aXNpYmxlIiwiY2VudGVyWSIsIk1hdGgiLCJhZGRDaGlsZCIsImNoaWxkcmVuIiwiY2VudGVyIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJNb2xhcml0eVNjcmVlblZpZXcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTMtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogVmlldyBmb3IgdGhlICdNb2xhcml0eScgc2NyZWVuLlxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCBCb29sZWFuUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9Cb29sZWFuUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgRGVyaXZlZFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvRGVyaXZlZFByb3BlcnR5LmpzJztcclxuaW1wb3J0IEJvdW5kczIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL0JvdW5kczIuanMnO1xyXG5pbXBvcnQgRGltZW5zaW9uMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvRGltZW5zaW9uMi5qcyc7XHJcbmltcG9ydCBTY3JlZW5WaWV3IGZyb20gJy4uLy4uLy4uLy4uL2pvaXN0L2pzL1NjcmVlblZpZXcuanMnO1xyXG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gJy4uLy4uLy4uLy4uL2tpdGUvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBTdHJpbmdVdGlscyBmcm9tICcuLi8uLi8uLi8uLi9waGV0Y29tbW9uL2pzL3V0aWwvU3RyaW5nVXRpbHMuanMnO1xyXG5pbXBvcnQgUmVzZXRBbGxCdXR0b24gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL2J1dHRvbnMvUmVzZXRBbGxCdXR0b24uanMnO1xyXG5pbXBvcnQgUGhldEZvbnQgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1BoZXRGb250LmpzJztcclxuaW1wb3J0IHsgTm9kZSwgVGV4dCB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBDaGVja2JveCBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvQ2hlY2tib3guanMnO1xyXG5pbXBvcnQgc291bmRNYW5hZ2VyIGZyb20gJy4uLy4uLy4uLy4uL3RhbWJvL2pzL3NvdW5kTWFuYWdlci5qcyc7XHJcbmltcG9ydCBtb2xhcml0eSBmcm9tICcuLi8uLi9tb2xhcml0eS5qcyc7XHJcbmltcG9ydCBNb2xhcml0eVN0cmluZ3MgZnJvbSAnLi4vLi4vTW9sYXJpdHlTdHJpbmdzLmpzJztcclxuaW1wb3J0IE1vbGFyaXR5Q29uc3RhbnRzIGZyb20gJy4uL01vbGFyaXR5Q29uc3RhbnRzLmpzJztcclxuaW1wb3J0IEJlYWtlck5vZGUgZnJvbSAnLi9CZWFrZXJOb2RlLmpzJztcclxuaW1wb3J0IENvbmNlbnRyYXRpb25EaXNwbGF5IGZyb20gJy4vQ29uY2VudHJhdGlvbkRpc3BsYXkuanMnO1xyXG5pbXBvcnQgQ29uY2VudHJhdGlvblNvdW5kR2VuZXJhdG9yIGZyb20gJy4vQ29uY2VudHJhdGlvblNvdW5kR2VuZXJhdG9yLmpzJztcclxuaW1wb3J0IENvbmNlbnRyYXRpb25EZXNjcmliZXIgZnJvbSAnLi9kZXNjcmliZXJzL0NvbmNlbnRyYXRpb25EZXNjcmliZXIuanMnO1xyXG5pbXBvcnQgUHJlY2lwaXRhdGVBbW91bnREZXNjcmliZXIgZnJvbSAnLi9kZXNjcmliZXJzL1ByZWNpcGl0YXRlQW1vdW50RGVzY3JpYmVyLmpzJztcclxuaW1wb3J0IFNvbHV0ZUFtb3VudERlc2NyaWJlciBmcm9tICcuL2Rlc2NyaWJlcnMvU29sdXRlQW1vdW50RGVzY3JpYmVyLmpzJztcclxuaW1wb3J0IFNvbHV0ZURlc2NyaWJlciBmcm9tICcuL2Rlc2NyaWJlcnMvU29sdXRlRGVzY3JpYmVyLmpzJztcclxuaW1wb3J0IFZvbHVtZURlc2NyaWJlciBmcm9tICcuL2Rlc2NyaWJlcnMvVm9sdW1lRGVzY3JpYmVyLmpzJztcclxuaW1wb3J0IE1vbGFyaXR5QWxlcnRNYW5hZ2VyIGZyb20gJy4vTW9sYXJpdHlBbGVydE1hbmFnZXIuanMnO1xyXG5pbXBvcnQgTW9sYXJpdHlTY3JlZW5TdW1tYXJ5Tm9kZSBmcm9tICcuL01vbGFyaXR5U2NyZWVuU3VtbWFyeU5vZGUuanMnO1xyXG5pbXBvcnQgUHJlY2lwaXRhdGVOb2RlIGZyb20gJy4vUHJlY2lwaXRhdGVOb2RlLmpzJztcclxuaW1wb3J0IFByZWNpcGl0YXRlU291bmRHZW5lcmF0b3IgZnJvbSAnLi9QcmVjaXBpdGF0ZVNvdW5kR2VuZXJhdG9yLmpzJztcclxuaW1wb3J0IFNhdHVyYXRlZEluZGljYXRvciBmcm9tICcuL1NhdHVyYXRlZEluZGljYXRvci5qcyc7XHJcbmltcG9ydCBTb2x1dGVDb250cm9sIGZyb20gJy4vU29sdXRlQ29udHJvbC5qcyc7XHJcbmltcG9ydCBTb2x1dGVTZWxlY3Rpb25Tb3VuZEdlbmVyYXRvciBmcm9tICcuL1NvbHV0ZVNlbGVjdGlvblNvdW5kR2VuZXJhdG9yLmpzJztcclxuaW1wb3J0IFNvbHV0aW9uTm9kZSBmcm9tICcuL1NvbHV0aW9uTm9kZS5qcyc7XHJcbmltcG9ydCBWZXJ0aWNhbFNsaWRlciBmcm9tICcuL1ZlcnRpY2FsU2xpZGVyLmpzJztcclxuXHJcbmNvbnN0IGZ1bGxTdHJpbmcgPSBNb2xhcml0eVN0cmluZ3MuZnVsbDtcclxuY29uc3QgbGl0ZXJzU3RyaW5nID0gTW9sYXJpdHlTdHJpbmdzLmxpdGVycztcclxuY29uc3QgbG90c1N0cmluZyA9IE1vbGFyaXR5U3RyaW5ncy5sb3RzO1xyXG5jb25zdCBsb3dTdHJpbmcgPSBNb2xhcml0eVN0cmluZ3MubG93O1xyXG5jb25zdCBtb2xlc1N0cmluZyA9IE1vbGFyaXR5U3RyaW5ncy5tb2xlcztcclxuY29uc3Qgbm9uZVN0cmluZyA9IE1vbGFyaXR5U3RyaW5ncy5ub25lO1xyXG5jb25zdCBwYXR0ZXJuUGFyZW50aGVzZXMwVGV4dFN0cmluZyA9IE1vbGFyaXR5U3RyaW5ncy5wYXR0ZXJuLnBhcmVudGhlc2VzWyAnMHRleHQnIF07XHJcbmNvbnN0IHNob3dWYWx1ZXNTdHJpbmcgPSBNb2xhcml0eVN0cmluZ3Muc2hvd1ZhbHVlcztcclxuY29uc3Qgc29sdXRlQW1vdW50U3RyaW5nID0gTW9sYXJpdHlTdHJpbmdzLnNvbHV0ZUFtb3VudDtcclxuY29uc3Qgc29sdXRpb25Wb2x1bWVTdHJpbmcgPSBNb2xhcml0eVN0cmluZ3Muc29sdXRpb25Wb2x1bWU7XHJcbmNvbnN0IHVuaXRzTGl0ZXJzU3RyaW5nID0gTW9sYXJpdHlTdHJpbmdzLnVuaXRzLmxpdGVycztcclxuY29uc3QgdW5pdHNNb2xlc1N0cmluZyA9IE1vbGFyaXR5U3RyaW5ncy51bml0cy5tb2xlcztcclxuXHJcbi8vIHN0cmluZ3NcclxuY29uc3QgYmVha2VyU29sdXRpb25Db250cm9sc1N0cmluZyA9IE1vbGFyaXR5U3RyaW5ncy5hMTF5LmJlYWtlclNvbHV0aW9uQ29udHJvbHM7XHJcbmNvbnN0IHNvbHV0aW9uVmFsdWVzSGVscFRleHRTdHJpbmcgPSBNb2xhcml0eVN0cmluZ3MuYTExeS5zb2x1dGlvblZhbHVlc0hlbHBUZXh0O1xyXG5jb25zdCBzb2x1dGVBbW91bnROb05ld2xpbmVTdHJpbmcgPSBNb2xhcml0eVN0cmluZ3MuYTExeS5zb2x1dGVBbW91bnROb05ld2xpbmU7XHJcbmNvbnN0IHNsaWRlckhlbHBUZXh0U3RyaW5nID0gTW9sYXJpdHlTdHJpbmdzLmExMXkuc2xpZGVySGVscFRleHQ7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgU0xJREVSX1RSQUNLX1dJRFRIID0gMTI7XHJcblxyXG5jbGFzcyBNb2xhcml0eVNjcmVlblZpZXcgZXh0ZW5kcyBTY3JlZW5WaWV3IHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtNb2xhcml0eU1vZGVsfSBtb2RlbFxyXG4gICAqIEBwYXJhbSB7VGFuZGVtfSB0YW5kZW1cclxuICAgKi9cclxuICBjb25zdHJ1Y3RvciggbW9kZWwsIHRhbmRlbSApIHtcclxuXHJcbiAgICAvLyBXaGV0aGVyIG9yIHRoZSBub3QgbW9kZWwgdmFsdWVzIGFyZSBkaXNwbGF5ZWQgaW4gdGhlIHZpc3VhbCB2aWV3XHJcbiAgICBjb25zdCB2YWx1ZXNWaXNpYmxlUHJvcGVydHkgPSBuZXcgQm9vbGVhblByb3BlcnR5KCBmYWxzZSwge1xyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICd2YWx1ZXNWaXNpYmxlUHJvcGVydHknIClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBEZXRlcm1pbmVzIHdoZXRoZXIgcXVhbGl0YXRpdmUgb3IgcXVhbnRpdGF0aXZlIGludGVyYWN0aXZlIGRlc2NyaXB0aW9uIGlzIHVzZWQuIEV2ZW4gdGhvdWdoIGl0IGlzIHRoZSBzYW1lIGFzIHRoZVxyXG4gICAgLy8gdmFsdWVzVmlzaWJsZVByb3BlcnR5IGN1cnJlbnRseSwgdGhpcyBpbXByb3ZlcyBtYWludGFpbmFiaWxpdHkgYnkgbm90IG92ZXJsb2FkaW5nIHZhbHVlc1Zpc2libGVQcm9wZXJ0eSB3aXRoXHJcbiAgICAvLyBkZXNjcmlwdGlvbi1zcGVjaWZpYyB1c2UtY2FzZSAoYSB0b3RhbGx5IGRpZmZlcmVudCB2aWV3KS4gRm9yIGV4YW1wbGUsIHdlIGNvdWxkIGRlY2lkZSB0byBkaXNwbGF5IHF1YW50aXRhdGl2ZVxyXG4gICAgLy8gZGVzY3JpcHRpb25zIHdoZW4gbm90IHNob3dpbmcgdmFsdWVzLCBidXQgdGhlIHN0YXRlIG9mIHNvbHV0aW9uIGlzIFwieCxcIiB3aXRoIG5vIHJlZmFjdG9yaW5nLlxyXG4gICAgY29uc3QgdXNlUXVhbnRpdGF0aXZlRGVzY3JpcHRpb25zUHJvcGVydHkgPSBuZXcgRGVyaXZlZFByb3BlcnR5KCBbIHZhbHVlc1Zpc2libGVQcm9wZXJ0eSBdLFxyXG4gICAgICBjdXJyZW50VmFsdWVzVmlzaWJsZSA9PiBjdXJyZW50VmFsdWVzVmlzaWJsZSApO1xyXG5cclxuICAgIC8vIHBkb20gLSBpbml0aWFsaXplcyBkZXNjcmliZXJzIGFuZCBhbGVydCBtYW5hZ2VyIHRvIGdlbmVyYXRlIGFuZCB1cGRhdGUgYWxsIFBET00gYW5kIGFsZXJ0IGNvbnRlbnQuXHJcbiAgICBjb25zdCBjb25jZW50cmF0aW9uRGVzY3JpYmVyID0gbmV3IENvbmNlbnRyYXRpb25EZXNjcmliZXIoIG1vZGVsLnNvbHV0aW9uLCB1c2VRdWFudGl0YXRpdmVEZXNjcmlwdGlvbnNQcm9wZXJ0eSApO1xyXG4gICAgY29uc3QgcHJlY2lwaXRhdGVBbW91bnREZXNjcmliZXIgPSBuZXcgUHJlY2lwaXRhdGVBbW91bnREZXNjcmliZXIoIG1vZGVsLnNvbHV0aW9uLCBjb25jZW50cmF0aW9uRGVzY3JpYmVyLCB1c2VRdWFudGl0YXRpdmVEZXNjcmlwdGlvbnNQcm9wZXJ0eSApO1xyXG4gICAgY29uc3Qgc29sdXRlRGVzY3JpYmVyID0gbmV3IFNvbHV0ZURlc2NyaWJlciggbW9kZWwuc29sdXRpb24sIGNvbmNlbnRyYXRpb25EZXNjcmliZXIsIHByZWNpcGl0YXRlQW1vdW50RGVzY3JpYmVyICk7XHJcbiAgICBjb25zdCB2b2x1bWVEZXNjcmliZXIgPSBuZXcgVm9sdW1lRGVzY3JpYmVyKCBtb2RlbC5zb2x1dGlvbi52b2x1bWVQcm9wZXJ0eSwgdXNlUXVhbnRpdGF0aXZlRGVzY3JpcHRpb25zUHJvcGVydHkgKTtcclxuICAgIGNvbnN0IHNvbHV0ZUFtb3VudERlc2NyaWJlciA9IG5ldyBTb2x1dGVBbW91bnREZXNjcmliZXIoIG1vZGVsLnNvbHV0aW9uLnNvbHV0ZUFtb3VudFByb3BlcnR5LCBzb2x1dGVEZXNjcmliZXIsIHVzZVF1YW50aXRhdGl2ZURlc2NyaXB0aW9uc1Byb3BlcnR5ICk7XHJcblxyXG4gICAgc3VwZXIoIHtcclxuICAgICAgbGF5b3V0Qm91bmRzOiBuZXcgQm91bmRzMiggMCwgMCwgMTEwMCwgNzAwICksXHJcbiAgICAgIHRhbmRlbTogdGFuZGVtLFxyXG4gICAgICBzY3JlZW5TdW1tYXJ5Q29udGVudDogbmV3IE1vbGFyaXR5U2NyZWVuU3VtbWFyeU5vZGUoIG1vZGVsLCB1c2VRdWFudGl0YXRpdmVEZXNjcmlwdGlvbnNQcm9wZXJ0eSxcclxuICAgICAgICBjb25jZW50cmF0aW9uRGVzY3JpYmVyLCBzb2x1dGVBbW91bnREZXNjcmliZXIsIHNvbHV0ZURlc2NyaWJlciwgdm9sdW1lRGVzY3JpYmVyIClcclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCBtb2xhcml0eUFsZXJ0TWFuYWdlciA9IG5ldyBNb2xhcml0eUFsZXJ0TWFuYWdlciggdGhpcywgbW9kZWwuc29sdXRpb24sIHVzZVF1YW50aXRhdGl2ZURlc2NyaXB0aW9uc1Byb3BlcnR5LCBjb25jZW50cmF0aW9uRGVzY3JpYmVyLFxyXG4gICAgICBwcmVjaXBpdGF0ZUFtb3VudERlc2NyaWJlciwgc29sdXRlQW1vdW50RGVzY3JpYmVyLCB2b2x1bWVEZXNjcmliZXIsIHNvbHV0ZURlc2NyaWJlciwgdmFsdWVzVmlzaWJsZVByb3BlcnR5ICk7XHJcblxyXG4gICAgLy8gYmVha2VyLCB3aXRoIHNvbHV0aW9uIGFuZCBwcmVjaXBpdGF0ZSBpbnNpZGUgb2YgaXRcclxuICAgIGNvbnN0IGJlYWtlck5vZGUgPSBuZXcgQmVha2VyTm9kZSggbW9kZWwuc29sdXRpb24sIE1vbGFyaXR5Q29uc3RhbnRzLlNPTFVUSU9OX1ZPTFVNRV9SQU5HRS5tYXgsIHZhbHVlc1Zpc2libGVQcm9wZXJ0eSxcclxuICAgICAgdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2JlYWtlck5vZGUnICksIHNvbHV0ZURlc2NyaWJlciwgc29sdXRlQW1vdW50RGVzY3JpYmVyLCB2b2x1bWVEZXNjcmliZXIsXHJcbiAgICAgIGNvbmNlbnRyYXRpb25EZXNjcmliZXIsIHByZWNpcGl0YXRlQW1vdW50RGVzY3JpYmVyLCB1c2VRdWFudGl0YXRpdmVEZXNjcmlwdGlvbnNQcm9wZXJ0eSApO1xyXG5cclxuICAgIGNvbnN0IGN5bGluZGVyU2l6ZSA9IGJlYWtlck5vZGUuZ2V0Q3lsaW5kZXJTaXplKCk7XHJcbiAgICBjb25zdCBzb2x1dGlvbk5vZGUgPSBuZXcgU29sdXRpb25Ob2RlKCBjeWxpbmRlclNpemUsIGJlYWtlck5vZGUuZ2V0Q3lsaW5kZXJFbmRIZWlnaHQoKSwgbW9kZWwuc29sdXRpb24sXHJcbiAgICAgIE1vbGFyaXR5Q29uc3RhbnRzLlNPTFVUSU9OX1ZPTFVNRV9SQU5HRS5tYXgsIHRhbmRlbS5jcmVhdGVUYW5kZW0oICdzb2x1dGlvbk5vZGUnICkgKTtcclxuICAgIGNvbnN0IHByZWNpcGl0YXRlTm9kZSA9IG5ldyBQcmVjaXBpdGF0ZU5vZGUoIG1vZGVsLnNvbHV0aW9uLCBjeWxpbmRlclNpemUsIGJlYWtlck5vZGUuZ2V0Q3lsaW5kZXJFbmRIZWlnaHQoKSxcclxuICAgICAgbW9kZWwubWF4UHJlY2lwaXRhdGVBbW91bnQsIHRhbmRlbS5jcmVhdGVUYW5kZW0oICdwcmVjaXBpdGF0ZU5vZGUnICkgKTtcclxuICAgIGNvbnN0IHNhdHVyYXRlZEluZGljYXRvciA9IG5ldyBTYXR1cmF0ZWRJbmRpY2F0b3IoIG1vZGVsLnNvbHV0aW9uLCB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnc2F0dXJhdGVkSW5kaWNhdG9yJyApICk7XHJcblxyXG4gICAgLy8gc29sdXRlIGNvbnRyb2xcclxuICAgIGNvbnN0IHNvbHV0ZUNvbWJvQm94TGlzdFBhcmVudCA9IG5ldyBOb2RlKCk7XHJcbiAgICBjb25zdCBzb2x1dGVDb21ib0JveCA9IG5ldyBTb2x1dGVDb250cm9sKCBtb2RlbC5zb2x1dGlvbi5zb2x1dGVQcm9wZXJ0eSwgbW9kZWwuc29sdXRlcywgc29sdXRlQ29tYm9Cb3hMaXN0UGFyZW50LCB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnc29sdXRlQ29tYm9Cb3gnICksIHtcclxuICAgICAgbWF4V2lkdGg6IDUwMCxcclxuXHJcbiAgICAgIC8vIENvbWJvQm94IHZvaWNpbmdcclxuICAgICAgY29tYm9Cb3hWb2ljaW5nQ29udGV4dFJlc3BvbnNlOiAoKSA9PiBzb2x1dGVEZXNjcmliZXIuZ2V0U29sdXRlQ2hhbmdlZEFsZXJ0U3RyaW5nKCB1c2VRdWFudGl0YXRpdmVEZXNjcmlwdGlvbnNQcm9wZXJ0eSApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gc2xpZGVyIGZvciBjb250cm9sbGluZyBhbW91bnQgb2Ygc29sdXRlXHJcbiAgICBjb25zdCBzb2x1dGVBbW91bnRTbGlkZXIgPSBuZXcgVmVydGljYWxTbGlkZXIoIHNvbHV0ZUFtb3VudFN0cmluZyxcclxuICAgICAgU3RyaW5nVXRpbHMuZm9ybWF0KCBwYXR0ZXJuUGFyZW50aGVzZXMwVGV4dFN0cmluZywgbW9sZXNTdHJpbmcgKSxcclxuICAgICAgbm9uZVN0cmluZywgbG90c1N0cmluZyxcclxuICAgICAgbW9kZWwuc29sdXRpb24uc29sdXRlQW1vdW50UHJvcGVydHksXHJcbiAgICAgIE1vbGFyaXR5Q29uc3RhbnRzLlNPTFVURV9BTU9VTlRfUkFOR0UsXHJcbiAgICAgIE1vbGFyaXR5Q29uc3RhbnRzLlNPTFVURV9BTU9VTlRfREVDSU1BTF9QTEFDRVMsXHJcbiAgICAgIHVuaXRzTW9sZXNTdHJpbmcsXHJcbiAgICAgIHZhbHVlc1Zpc2libGVQcm9wZXJ0eSxcclxuICAgICAgdXNlUXVhbnRpdGF0aXZlRGVzY3JpcHRpb25zUHJvcGVydHksIG1vbGFyaXR5QWxlcnRNYW5hZ2VyLCBzb2x1dGVBbW91bnREZXNjcmliZXIsIHtcclxuICAgICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdzb2x1dGVBbW91bnRTbGlkZXInICksXHJcbiAgICAgICAgc2xpZGVyT3B0aW9uczoge1xyXG4gICAgICAgICAgdHJhY2tTaXplOiBuZXcgRGltZW5zaW9uMiggU0xJREVSX1RSQUNLX1dJRFRILCBjeWxpbmRlclNpemUuaGVpZ2h0ICksXHJcblxyXG4gICAgICAgICAgLy8gcGRvbVxyXG4gICAgICAgICAgYWNjZXNzaWJsZU5hbWU6IHNvbHV0ZUFtb3VudE5vTmV3bGluZVN0cmluZyxcclxuICAgICAgICAgIGExMXlDcmVhdGVBcmlhVmFsdWVUZXh0OiAoKSA9PiBzb2x1dGVBbW91bnREZXNjcmliZXIuZ2V0U29sdXRlQW1vdW50VmFsdWVUZXh0KCksXHJcbiAgICAgICAgICBhMTF5RGVwZW5kZW5jaWVzOiBbIG1vZGVsLnNvbHV0aW9uLnNvbHV0ZVByb3BlcnR5IF1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgLy8gc2xpZGVyIGZvciBjb250cm9sbGluZyB2b2x1bWUgb2Ygc29sdXRpb24sIHNpemVkIHRvIG1hdGNoIHRpY2sgbWFya3Mgb24gdGhlIGJlYWtlclxyXG4gICAgY29uc3Qgdm9sdW1lU2xpZGVySGVpZ2h0ID0gKCBNb2xhcml0eUNvbnN0YW50cy5TT0xVVElPTl9WT0xVTUVfUkFOR0UuZ2V0TGVuZ3RoKCkgL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb2xhcml0eUNvbnN0YW50cy5TT0xVVElPTl9WT0xVTUVfUkFOR0UubWF4ICkgKiBjeWxpbmRlclNpemUuaGVpZ2h0O1xyXG4gICAgY29uc3Qgc29sdXRpb25Wb2x1bWVTbGlkZXIgPSBuZXcgVmVydGljYWxTbGlkZXIoIHNvbHV0aW9uVm9sdW1lU3RyaW5nLFxyXG4gICAgICBTdHJpbmdVdGlscy5mb3JtYXQoIHBhdHRlcm5QYXJlbnRoZXNlczBUZXh0U3RyaW5nLCBsaXRlcnNTdHJpbmcgKSxcclxuICAgICAgbG93U3RyaW5nLCBmdWxsU3RyaW5nLFxyXG4gICAgICBtb2RlbC5zb2x1dGlvbi52b2x1bWVQcm9wZXJ0eSxcclxuICAgICAgTW9sYXJpdHlDb25zdGFudHMuU09MVVRJT05fVk9MVU1FX1JBTkdFLFxyXG4gICAgICBNb2xhcml0eUNvbnN0YW50cy5TT0xVVElPTl9WT0xVTUVfREVDSU1BTF9QTEFDRVMsXHJcbiAgICAgIHVuaXRzTGl0ZXJzU3RyaW5nLFxyXG4gICAgICB2YWx1ZXNWaXNpYmxlUHJvcGVydHksXHJcbiAgICAgIHVzZVF1YW50aXRhdGl2ZURlc2NyaXB0aW9uc1Byb3BlcnR5LCBtb2xhcml0eUFsZXJ0TWFuYWdlciwgdm9sdW1lRGVzY3JpYmVyLCB7XHJcbiAgICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnc29sdXRpb25Wb2x1bWVTbGlkZXInICksXHJcbiAgICAgICAgc2xpZGVyT3B0aW9uczoge1xyXG4gICAgICAgICAgdHJhY2tTaXplOiBuZXcgRGltZW5zaW9uMiggU0xJREVSX1RSQUNLX1dJRFRILCB2b2x1bWVTbGlkZXJIZWlnaHQgKSxcclxuXHJcbiAgICAgICAgICAvLyBwZG9tXHJcbiAgICAgICAgICBhY2Nlc3NpYmxlTmFtZTogc29sdXRpb25Wb2x1bWVTdHJpbmcsXHJcbiAgICAgICAgICBhMTF5Q3JlYXRlQXJpYVZhbHVlVGV4dDogKCkgPT4gdm9sdW1lRGVzY3JpYmVyLmdldFZvbHVtZUFyaWFWYWx1ZVRleHQoKVxyXG4gICAgICAgIH1cclxuICAgICAgfSApO1xyXG5cclxuICAgIC8vIGNvbmNlbnRyYXRpb24gZGlzcGxheVxyXG4gICAgY29uc3QgY29uY2VudHJhdGlvbkJhclNpemUgPSBuZXcgRGltZW5zaW9uMiggNDAsIGN5bGluZGVyU2l6ZS5oZWlnaHQgKyA1MCApO1xyXG4gICAgY29uc3QgY29uY2VudHJhdGlvbkRpc3BsYXkgPSBuZXcgQ29uY2VudHJhdGlvbkRpc3BsYXkoIG1vZGVsLnNvbHV0aW9uLCBNb2xhcml0eUNvbnN0YW50cy5DT05DRU5UUkFUSU9OX1JBTkdFLFxyXG4gICAgICB2YWx1ZXNWaXNpYmxlUHJvcGVydHksIGNvbmNlbnRyYXRpb25CYXJTaXplLCB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnY29uY2VudHJhdGlvbkRpc3BsYXknICkgKTtcclxuXHJcbiAgICAvLyBzb3VuZCBnZW5lcmF0b3IgZm9yIGNvbmNlbnRyYXRpb25cclxuICAgIHNvdW5kTWFuYWdlci5hZGRTb3VuZEdlbmVyYXRvciggbmV3IENvbmNlbnRyYXRpb25Tb3VuZEdlbmVyYXRvcihcclxuICAgICAgbW9kZWwuc29sdXRpb24sXHJcbiAgICAgIHNvbHV0ZUFtb3VudFNsaWRlcixcclxuICAgICAgc29sdXRpb25Wb2x1bWVTbGlkZXIsXHJcbiAgICAgIG1vZGVsLnJlc2V0SW5Qcm9ncmVzc1Byb3BlcnR5LFxyXG4gICAgICB7IGluaXRpYWxPdXRwdXRMZXZlbDogMC4xNSB9XHJcbiAgICApICk7XHJcblxyXG4gICAgLy8gc291bmQgZ2VuZXJhdG9yIGZvciBwcmVjaXBpdGF0ZSBhbW91bnRcclxuICAgIHNvdW5kTWFuYWdlci5hZGRTb3VuZEdlbmVyYXRvciggbmV3IFByZWNpcGl0YXRlU291bmRHZW5lcmF0b3IoXHJcbiAgICAgIG1vZGVsLnNvbHV0aW9uLnByZWNpcGl0YXRlQW1vdW50UHJvcGVydHksXHJcbiAgICAgIHNvbHV0ZUFtb3VudFNsaWRlcixcclxuICAgICAgc29sdXRpb25Wb2x1bWVTbGlkZXIsXHJcbiAgICAgIHsgaW5pdGlhbE91dHB1dExldmVsOiAwLjEgfVxyXG4gICAgKSApO1xyXG5cclxuICAgIC8vIHNvdW5kIGdlbmVyYXRvciBmb3Igc29sdXRlIHNlbGVjdGlvblxyXG4gICAgc291bmRNYW5hZ2VyLmFkZFNvdW5kR2VuZXJhdG9yKCBuZXcgU29sdXRlU2VsZWN0aW9uU291bmRHZW5lcmF0b3IoXHJcbiAgICAgIG1vZGVsLnNvbHV0aW9uLnNvbHV0ZVByb3BlcnR5LFxyXG4gICAgICBtb2RlbC5zb2x1dGVzLFxyXG4gICAgICBtb2RlbC5yZXNldEluUHJvZ3Jlc3NQcm9wZXJ0eSxcclxuICAgICAgeyBpbml0aWFsT3V0cHV0TGV2ZWw6IDAuNCB9XHJcbiAgICApICk7XHJcblxyXG4gICAgLy8gU29sdXRpb24gVmFsdWVzIGNoZWNrYm94XHJcbiAgICBjb25zdCBzb2x1dGlvblZhbHVlc0xhYmVsID0gbmV3IFRleHQoIHNob3dWYWx1ZXNTdHJpbmcsIHtcclxuICAgICAgZm9udDogbmV3IFBoZXRGb250KCAyMiApLFxyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdzb2x1dGlvblZhbHVlc1RleHQnIClcclxuICAgIH0gKTtcclxuICAgIGNvbnN0IHNvbHV0aW9uVmFsdWVzQ2hlY2tib3ggPSBuZXcgQ2hlY2tib3goIHZhbHVlc1Zpc2libGVQcm9wZXJ0eSwgc29sdXRpb25WYWx1ZXNMYWJlbCwge1xyXG4gICAgICBtYXhXaWR0aDogMTc1LFxyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdzb2x1dGlvblZhbHVlc0NoZWNrYm94JyApLFxyXG5cclxuICAgICAgLy8gcGRvbVxyXG4gICAgICBhY2Nlc3NpYmxlTmFtZTogc2hvd1ZhbHVlc1N0cmluZyxcclxuICAgICAgaGVscFRleHQ6IHNvbHV0aW9uVmFsdWVzSGVscFRleHRTdHJpbmdcclxuICAgIH0gKTtcclxuICAgIHNvbHV0aW9uVmFsdWVzQ2hlY2tib3gudG91Y2hBcmVhID0gU2hhcGUucmVjdGFuZ2xlKCBzb2x1dGlvblZhbHVlc0NoZWNrYm94LmxlZnQsIHNvbHV0aW9uVmFsdWVzQ2hlY2tib3gudG9wIC0gMTUsIHNvbHV0aW9uVmFsdWVzQ2hlY2tib3gud2lkdGggKyA1LCBzb2x1dGlvblZhbHVlc0NoZWNrYm94LmhlaWdodCArIDMwICk7XHJcblxyXG4gICAgLy8gUmVzZXQgQWxsIGJ1dHRvblxyXG4gICAgY29uc3QgcmVzZXRBbGxCdXR0b24gPSBuZXcgUmVzZXRBbGxCdXR0b24oIHtcclxuICAgICAgbGlzdGVuZXI6ICgpID0+IHtcclxuICAgICAgICB2YWx1ZXNWaXNpYmxlUHJvcGVydHkucmVzZXQoKTtcclxuICAgICAgICBtb2RlbC5yZXNldCgpO1xyXG4gICAgICB9LFxyXG4gICAgICBzY2FsZTogMS4zMixcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAncmVzZXRBbGxCdXR0b24nIClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBwZG9tIC0gaGVhZGluZyBhbmQgYWNjZXNzaWJsZSBvcmRlciBmb3Igc2xpZGVyIGNvbnRyb2xzIHNlY3Rpb24gb2YgUERPTVxyXG4gICAgY29uc3Qgc29sdXRpb25Db250cm9sc05vZGUgPSBuZXcgTm9kZSgge1xyXG4gICAgICB0YWdOYW1lOiAnZGl2JyxcclxuICAgICAgbGFiZWxUYWdOYW1lOiAnaDMnLFxyXG4gICAgICBsYWJlbENvbnRlbnQ6IGJlYWtlclNvbHV0aW9uQ29udHJvbHNTdHJpbmcsXHJcbiAgICAgIGRlc2NyaXB0aW9uQ29udGVudDogc2xpZGVySGVscFRleHRTdHJpbmdcclxuICAgIH0gKTtcclxuICAgIHNvbHV0aW9uQ29udHJvbHNOb2RlLnBkb21PcmRlciA9IFsgc29sdXRlQW1vdW50U2xpZGVyLCBzb2x1dGlvblZvbHVtZVNsaWRlciBdO1xyXG5cclxuICAgIC8vIHBkb20gLSBoZWFkaW5nIGFuZCBhY2Nlc3NpYmxlIG9yZGVyIGZvciBwbGF5IGFyZWEgc2VjdGlvbiBvZiBQRE9NXHJcbiAgICB0aGlzLnBkb21QbGF5QXJlYU5vZGUucGRvbU9yZGVyID0gW1xyXG4gICAgICBiZWFrZXJOb2RlLFxyXG4gICAgICBzb2x1dGlvbkNvbnRyb2xzTm9kZSxcclxuICAgICAgc29sdXRlQ29tYm9Cb3gsXHJcbiAgICAgIHNvbHV0ZUNvbWJvQm94TGlzdFBhcmVudFxyXG4gICAgXTtcclxuXHJcbiAgICAvLyBwZG9tIC0gY29udGFpbnMgUERPTSBoZWFkaW5nIGZvciBDb250cm9sIEFyZWEsIGFuZCBvcmRlcnMgdGhlIFBET00gZm9yIGluY2x1ZGVkIGVsZW1lbnRzXHJcbiAgICB0aGlzLnBkb21Db250cm9sQXJlYU5vZGUucGRvbU9yZGVyID0gW1xyXG4gICAgICBzb2x1dGlvblZhbHVlc0NoZWNrYm94LFxyXG4gICAgICByZXNldEFsbEJ1dHRvblxyXG4gICAgXTtcclxuXHJcbiAgICAvLyBsYXlvdXQgZm9yIHRoaW5ncyB0aGF0IGRvbid0IGhhdmUgYSBwb3NpdGlvbiBpbiB0aGUgbW9kZWxcclxuICAgIHtcclxuICAgICAgc29sdXRlQW1vdW50U2xpZGVyLmxlZnQgPSAwO1xyXG4gICAgICBzb2x1dGVBbW91bnRTbGlkZXIudG9wID0gMDtcclxuICAgICAgLy8gdG8gdGhlIHJpZ2h0IG9mIHRoZSBTb2x1dGUgQW1vdW50IHNsaWRlclxyXG4gICAgICBzb2x1dGlvblZvbHVtZVNsaWRlci5sZWZ0ID0gc29sdXRlQW1vdW50U2xpZGVyLnJpZ2h0ICsgNTtcclxuICAgICAgc29sdXRpb25Wb2x1bWVTbGlkZXIudG9wID0gc29sdXRlQW1vdW50U2xpZGVyLnRvcDtcclxuICAgICAgLy8gdG8gdGhlIHJpZ2h0IG9mIHRoZSBTb2x1dGlvbiBWb2x1bWUgc2xpZGVyXHJcbiAgICAgIGJlYWtlck5vZGUubGVmdCA9IHNvbHV0aW9uVm9sdW1lU2xpZGVyLnJpZ2h0IC0gMTU7XHJcbiAgICAgIGJlYWtlck5vZGUudG9wID0gc29sdXRlQW1vdW50U2xpZGVyLnRvcCAtIDExO1xyXG4gICAgICAvLyBzYW1lIGNvb3JkaW5hdGUgZnJhbWUgYXMgYmVha2VyXHJcbiAgICAgIHNvbHV0aW9uTm9kZS54ID0gYmVha2VyTm9kZS54O1xyXG4gICAgICBzb2x1dGlvbk5vZGUueSA9IGJlYWtlck5vZGUueTtcclxuICAgICAgLy8gc2FtZSBjb29yZGluYXRlIGZyYW1lIGFzIGJlYWtlclxyXG4gICAgICBwcmVjaXBpdGF0ZU5vZGUueCA9IGJlYWtlck5vZGUueDtcclxuICAgICAgcHJlY2lwaXRhdGVOb2RlLnkgPSBiZWFrZXJOb2RlLnk7XHJcbiAgICAgIC8vIGNlbnRlcmVkIGJlbG93IGJlYWtlclxyXG4gICAgICBzb2x1dGVDb21ib0JveC5jZW50ZXJYID0gYmVha2VyTm9kZS5jZW50ZXJYO1xyXG4gICAgICBzb2x1dGVDb21ib0JveC50b3AgPSBiZWFrZXJOb2RlLmJvdHRvbSArIDUwO1xyXG4gICAgICAvLyB0b3dhcmQgYm90dG9tIG9mIHRoZSBiZWFrZXJcclxuICAgICAgY29uc3Qgc2F0dXJhdGVkSW5kaWNhdG9yVmlzaWJsZSA9IHNhdHVyYXRlZEluZGljYXRvci52aXNpYmxlOyAvLyBzbyB3ZSBjYW4gbGF5b3V0IGFuIGludmlzaWJsZSBub2RlXHJcbiAgICAgIHNhdHVyYXRlZEluZGljYXRvci52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgc2F0dXJhdGVkSW5kaWNhdG9yLmNlbnRlclggPSBiZWFrZXJOb2RlLnggKyAoIGN5bGluZGVyU2l6ZS53aWR0aCAvIDIgKTtcclxuICAgICAgc2F0dXJhdGVkSW5kaWNhdG9yLmJvdHRvbSA9IGJlYWtlck5vZGUuYm90dG9tIC0gKCAwLjIgKiBjeWxpbmRlclNpemUuaGVpZ2h0ICk7XHJcbiAgICAgIHNhdHVyYXRlZEluZGljYXRvci52aXNpYmxlID0gc2F0dXJhdGVkSW5kaWNhdG9yVmlzaWJsZTtcclxuICAgICAgLy8gcmlnaHQgb2YgYmVha2VyXHJcbiAgICAgIGNvbmNlbnRyYXRpb25EaXNwbGF5LmxlZnQgPSBiZWFrZXJOb2RlLnJpZ2h0ICsgNDA7XHJcbiAgICAgIGNvbmNlbnRyYXRpb25EaXNwbGF5LmJvdHRvbSA9IGJlYWtlck5vZGUuYm90dG9tO1xyXG4gICAgICAvLyBsZWZ0IG9mIGNvbWJvIGJveFxyXG4gICAgICBzb2x1dGlvblZhbHVlc0NoZWNrYm94LnJpZ2h0ID0gc29sdXRlQ29tYm9Cb3gubGVmdCAtIDUwO1xyXG4gICAgICBzb2x1dGlvblZhbHVlc0NoZWNrYm94LmNlbnRlclkgPSBzb2x1dGVDb21ib0JveC5jZW50ZXJZO1xyXG4gICAgICAvLyByaWdodCBvZiBjb21ibyBib3hcclxuICAgICAgcmVzZXRBbGxCdXR0b24ubGVmdCA9IE1hdGgubWF4KCBzb2x1dGVDb21ib0JveC5yaWdodCArIDEwLCBjb25jZW50cmF0aW9uRGlzcGxheS5jZW50ZXJYIC0gKCByZXNldEFsbEJ1dHRvbi53aWR0aCAvIDIgKSApO1xyXG4gICAgICByZXNldEFsbEJ1dHRvbi5jZW50ZXJZID0gc29sdXRlQ29tYm9Cb3guY2VudGVyWTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjZW50ZXIgZXZlcnl0aGluZyBvbiB0aGUgc2NyZWVuXHJcbiAgICB0aGlzLmFkZENoaWxkKCBuZXcgTm9kZSgge1xyXG4gICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgIHNvbHV0aW9uTm9kZSxcclxuICAgICAgICBiZWFrZXJOb2RlLFxyXG4gICAgICAgIHByZWNpcGl0YXRlTm9kZSxcclxuICAgICAgICBzYXR1cmF0ZWRJbmRpY2F0b3IsXHJcbiAgICAgICAgc29sdXRlQW1vdW50U2xpZGVyLFxyXG4gICAgICAgIHNvbHV0aW9uVm9sdW1lU2xpZGVyLFxyXG4gICAgICAgIGNvbmNlbnRyYXRpb25EaXNwbGF5LFxyXG4gICAgICAgIHNvbHV0aW9uVmFsdWVzQ2hlY2tib3gsXHJcbiAgICAgICAgcmVzZXRBbGxCdXR0b24sXHJcbiAgICAgICAgc29sdXRlQ29tYm9Cb3gsXHJcbiAgICAgICAgc29sdXRlQ29tYm9Cb3hMaXN0UGFyZW50LFxyXG4gICAgICAgIHNvbHV0aW9uQ29udHJvbHNOb2RlXHJcbiAgICAgIF0sXHJcbiAgICAgIGNlbnRlcjogdGhpcy5sYXlvdXRCb3VuZHMuY2VudGVyXHJcbiAgICB9ICkgKTtcclxuICB9XHJcbn1cclxuXHJcbm1vbGFyaXR5LnJlZ2lzdGVyKCAnTW9sYXJpdHlTY3JlZW5WaWV3JywgTW9sYXJpdHlTY3JlZW5WaWV3ICk7XHJcbmV4cG9ydCBkZWZhdWx0IE1vbGFyaXR5U2NyZWVuVmlldzsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsZUFBZSxNQUFNLHdDQUF3QztBQUNwRSxPQUFPQyxlQUFlLE1BQU0sd0NBQXdDO0FBQ3BFLE9BQU9DLE9BQU8sTUFBTSwrQkFBK0I7QUFDbkQsT0FBT0MsVUFBVSxNQUFNLGtDQUFrQztBQUN6RCxPQUFPQyxVQUFVLE1BQU0sb0NBQW9DO0FBQzNELFNBQVNDLEtBQUssUUFBUSxnQ0FBZ0M7QUFDdEQsT0FBT0MsV0FBVyxNQUFNLCtDQUErQztBQUN2RSxPQUFPQyxjQUFjLE1BQU0sdURBQXVEO0FBQ2xGLE9BQU9DLFFBQVEsTUFBTSx5Q0FBeUM7QUFDOUQsU0FBU0MsSUFB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