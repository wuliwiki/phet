// Copyright 2013-2022, University of Colorado Boulder

/**
 * Visual representation of a beaker.
 * 3D perspective is provided by an image (see BeakerImageNode).
 * Other elements (ticks, label, ...) are added programmatically.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import Utils from '../../../../dot/js/Utils.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import { Shape } from '../../../../kite/js/imports.js';
import StringUtils from '../../../../phetcommon/js/util/StringUtils.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { Circle, Color, Node, Path, Rectangle, Text } from '../../../../scenery/js/imports.js';
import molarity from '../../molarity.js';
import MolarityStrings from '../../MolarityStrings.js';
import BeakerImageNode from './BeakerImageNode.js';
import BeakerLabelNode from './BeakerLabelNode.js';
import MolarityBeakerDescriptionNode from './MolarityBeakerDescriptionNode.js';
const pattern0Value1UnitsString = MolarityStrings.pattern['0value']['1units'];
const unitsLitersString = MolarityStrings.units.liters;
const beakerHeaderString = MolarityStrings.a11y.beaker.header;

// constants
const DEBUG_SHAPES = false;
const TICK_COLOR = Color.GRAY;
const MINOR_TICK_SPACING = 0.1; // L
const MINOR_TICKS_PER_MAJOR_TICK = 5;
const MAJOR_TICK_LABELS = ['\u00bd', '1']; // 1/2L, 1L
const TICK_LABEL_FONT = new PhetFont(20);
const TICK_LABEL_COLOR = Color.DARK_GRAY;
const TICK_LABEL_X_SPACING = 8;
class BeakerNode extends Node {
  /**
   * @param {MacroSolution} solution
   * @param {number} maxVolume
   * @param {Property.<boolean>} valuesVisibleProperty
   * @param {Tandem} tandem
   * @param {SoluteDescriber} soluteDescriber - for interactive description
   * @param {SoluteAmountDescriber} soluteAmountDescriber - for interactive description
   * @param {VolumeDescriber} volumeDescriber - for interactive description
   * @param {ConcentrationDescriber} concentrationDescriber - for interactive description
   * @param {PrecipitateAmountDescriber} precipitateAmountDescriber
   * @param {Property.<boolean>} useQuantitativeDescriptionsProperty - for interactive description
   */
  constructor(solution, maxVolume, valuesVisibleProperty, tandem, soluteDescriber, soluteAmountDescriber, volumeDescriber, concentrationDescriber, precipitateAmountDescriber, useQuantitativeDescriptionsProperty) {
    super({
      pickable: false,
      tandem: tandem,
      tagName: 'div',
      labelTagName: 'h3',
      labelContent: beakerHeaderString
    });

    // @private the glass beaker
    this.beakerImageNode = new BeakerImageNode(tandem.createTandem('beakerImageNode'), {
      scale: 0.75
    });
    const cylinderSize = this.beakerImageNode.getCylinderSize();
    const cylinderOffset = this.beakerImageNode.getCylinderOffset();
    const cylinderEndHeight = this.beakerImageNode.getCylinderEndHeight();
    this.beakerImageNode.translation = new Vector2(-cylinderOffset.x, -cylinderOffset.y);

    // inside bottom line
    const bottomShape = new Shape().ellipticalArc(cylinderSize.width / 2, cylinderSize.height, cylinderSize.width / 2, cylinderEndHeight / 2, 0, Utils.toRadians(0), Utils.toRadians(180), true);
    const bottomNode = new Path(bottomShape, {
      stroke: new Color(150, 150, 150, 100),
      lineWidth: 2,
      tandem: tandem.createTandem('bottomNode')
    });

    // label on the beaker
    const labelNode = new BeakerLabelNode(solution, tandem.createTandem('labelNode'));
    labelNode.x = cylinderSize.width / 2;
    labelNode.y = 0.15 * cylinderSize.height;

    // parents for tick marks and labels
    const tickMarksParent = new Node({
      tandem: tandem.createTandem('tickMarksParent')
    });
    const tickLabelsParent = new Node({
      tandem: tandem.createTandem('tickLabelsParent')
    });

    // rendering order
    this.addChild(bottomNode);
    this.addChild(this.beakerImageNode);
    this.addChild(tickMarksParent);
    this.addChild(tickLabelsParent);
    this.addChild(labelNode);

    // tick marks, arcs that wrap around the edge of the beaker's cylinder
    const numberOfTicks = Utils.roundSymmetric(maxVolume / MINOR_TICK_SPACING);
    const bottomY = cylinderSize.height; // don't use bounds or position will be off because of stroke width
    const deltaY = cylinderSize.height / numberOfTicks;

    // vars used inside the for-loop
    let y;
    let tickMarkShape;
    let tickMarkNode;
    let tickLabelIndex;
    let tickLabelString;
    let tickLabelText;
    const tickLabelNodeGroupTandem = tandem.createTandem('tickLabels');
    for (let i = 1; i <= numberOfTicks; i++) {
      y = bottomY - i * deltaY;
      if (i % MINOR_TICKS_PER_MAJOR_TICK === 0) {
        // major tick mark
        tickMarkShape = new Shape().ellipticalArc(cylinderSize.width / 2, y, cylinderSize.width / 2, cylinderEndHeight / 2, 0, Utils.toRadians(165), Utils.toRadians(135), true);
        tickMarkNode = new Path(tickMarkShape, {
          stroke: TICK_COLOR,
          lineWidth: 2
        });
        tickMarksParent.addChild(tickMarkNode);

        // major tick label
        tickLabelIndex = i / MINOR_TICKS_PER_MAJOR_TICK - 1;
        if (tickLabelIndex < MAJOR_TICK_LABELS.length) {
          tickLabelString = StringUtils.format(pattern0Value1UnitsString, MAJOR_TICK_LABELS[tickLabelIndex], unitsLitersString);
          tickLabelText = new Text(tickLabelString, {
            font: TICK_LABEL_FONT,
            stroke: TICK_LABEL_COLOR,
            maxWidth: 100,
            tandem: tickLabelNodeGroupTandem.createTandem(`${i}Text`)
          });
          tickLabelsParent.addChild(tickLabelText);
          tickLabelText.left = tickMarkNode.right + TICK_LABEL_X_SPACING;
          tickLabelText.centerY = tickMarkNode.bottom;
        }
      } else {
        // minor tick mark, no label
        tickMarkShape = new Shape().ellipticalArc(cylinderSize.width / 2, y, cylinderSize.width / 2, cylinderEndHeight / 2, 0, Utils.toRadians(165), Utils.toRadians(150), true);
        tickMarkNode = new Path(tickMarkShape, {
          stroke: TICK_COLOR,
          lineWidth: 2
        });
        tickMarksParent.addChild(tickMarkNode);
      }
    }
    if (DEBUG_SHAPES) {
      // draw the cylinder that represents the beaker's interior
      this.addChild(new Rectangle(0, 0, cylinderSize.width, cylinderSize.height, {
        stroke: 'red'
      }));
      // draw a circle at the origin
      this.addChild(new Circle({
        radius: 3,
        fill: 'red'
      }));
    }
    valuesVisibleProperty.link(visible => {
      tickLabelsParent.visible = visible;
    });

    // pdom - adds the description node that holds the PDOM summary of the beaker.
    this.addChild(new MolarityBeakerDescriptionNode(solution, useQuantitativeDescriptionsProperty, soluteDescriber, concentrationDescriber, precipitateAmountDescriber, soluteAmountDescriber, volumeDescriber));
  }

  // @public
  getCylinderSize() {
    return this.beakerImageNode.getCylinderSize();
  }

  // @public
  getCylinderEndHeight() {
    return this.beakerImageNode.getCylinderEndHeight();
  }
}
molarity.register('BeakerNode', BeakerNode);
export default BeakerNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVdGlscyIsIlZlY3RvcjIiLCJTaGFwZSIsIlN0cmluZ1V0aWxzIiwiUGhldEZvbnQiLCJDaXJjbGUiLCJDb2xvciIsIk5vZGUiLCJQYXRoIiwiUmVjdGFuZ2xlIiwiVGV4dCIsIm1vbGFyaXR5IiwiTW9sYXJpdHlTdHJpbmdzIiwiQmVha2VySW1hZ2VOb2RlIiwiQmVha2VyTGFiZWxOb2RlIiwiTW9sYXJpdHlCZWFrZXJEZXNjcmlwdGlvbk5vZGUiLCJwYXR0ZXJuMFZhbHVlMVVuaXRzU3RyaW5nIiwicGF0dGVybiIsInVuaXRzTGl0ZXJzU3RyaW5nIiwidW5pdHMiLCJsaXRlcnMiLCJiZWFrZXJIZWFkZXJTdHJpbmciLCJhMTF5IiwiYmVha2VyIiwiaGVhZGVyIiwiREVCVUdfU0hBUEVTIiwiVElDS19DT0xPUiIsIkdSQVkiLCJNSU5PUl9USUNLX1NQQUNJTkciLCJNSU5PUl9USUNLU19QRVJfTUFKT1JfVElDSyIsIk1BSk9SX1RJQ0tfTEFCRUxTIiwiVElDS19MQUJFTF9GT05UIiwiVElDS19MQUJFTF9DT0xPUiIsIkRBUktfR1JBWSIsIlRJQ0tfTEFCRUxfWF9TUEFDSU5HIiwiQmVha2VyTm9kZSIsImNvbnN0cnVjdG9yIiwic29sdXRpb24iLCJtYXhWb2x1bWUiLCJ2YWx1ZXNWaXNpYmxlUHJvcGVydHkiLCJ0YW5kZW0iLCJzb2x1dGVEZXNjcmliZXIiLCJzb2x1dGVBbW91bnREZXNjcmliZXIiLCJ2b2x1bWVEZXNjcmliZXIiLCJjb25jZW50cmF0aW9uRGVzY3JpYmVyIiwicHJlY2lwaXRhdGVBbW91bnREZXNjcmliZXIiLCJ1c2VRdWFudGl0YXRpdmVEZXNjcmlwdGlvbnNQcm9wZXJ0eSIsInBpY2thYmxlIiwidGFnTmFtZSIsImxhYmVsVGFnTmFtZSIsImxhYmVsQ29udGVudCIsImJlYWtlckltYWdlTm9kZSIsImNyZWF0ZVRhbmRlbSIsInNjYWxlIiwiY3lsaW5kZXJTaXplIiwiZ2V0Q3lsaW5kZXJTaXplIiwiY3lsaW5kZXJPZmZzZXQiLCJnZXRDeWxpbmRlck9mZnNldCIsImN5bGluZGVyRW5kSGVpZ2h0IiwiZ2V0Q3lsaW5kZXJFbmRIZWlnaHQiLCJ0cmFuc2xhdGlvbiIsIngiLCJ5IiwiYm90dG9tU2hhcGUiLCJlbGxpcHRpY2FsQXJjIiwid2lkdGgiLCJoZWlnaHQiLCJ0b1JhZGlhbnMiLCJib3R0b21Ob2RlIiwic3Ryb2tlIiwibGluZVdpZHRoIiwibGFiZWxOb2RlIiwidGlja01hcmtzUGFyZW50IiwidGlja0xhYmVsc1BhcmVudCIsImFkZENoaWxkIiwibnVtYmVyT2ZUaWNrcyIsInJvdW5kU3ltbWV0cmljIiwiYm90dG9tWSIsImRlbHRhWSIsInRpY2tNYXJrU2hhcGUiLCJ0aWNrTWFya05vZGUiLCJ0aWNrTGFiZWxJbmRleCIsInRpY2tMYWJlbFN0cmluZyIsInRpY2tMYWJlbFRleHQiLCJ0aWNrTGFiZWxOb2RlR3JvdXBUYW5kZW0iLCJpIiwibGVuZ3RoIiwiZm9ybWF0IiwiZm9udCIsIm1heFdpZHRoIiwibGVmdCIsInJpZ2h0IiwiY2VudGVyWSIsImJvdHRvbSIsInJhZGl1cyIsImZpbGwiLCJsaW5rIiwidmlzaWJsZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiQmVha2VyTm9kZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxMy0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBWaXN1YWwgcmVwcmVzZW50YXRpb24gb2YgYSBiZWFrZXIuXHJcbiAqIDNEIHBlcnNwZWN0aXZlIGlzIHByb3ZpZGVkIGJ5IGFuIGltYWdlIChzZWUgQmVha2VySW1hZ2VOb2RlKS5cclxuICogT3RoZXIgZWxlbWVudHMgKHRpY2tzLCBsYWJlbCwgLi4uKSBhcmUgYWRkZWQgcHJvZ3JhbW1hdGljYWxseS5cclxuICpcclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICovXHJcblxyXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1V0aWxzLmpzJztcclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gJy4uLy4uLy4uLy4uL2tpdGUvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBTdHJpbmdVdGlscyBmcm9tICcuLi8uLi8uLi8uLi9waGV0Y29tbW9uL2pzL3V0aWwvU3RyaW5nVXRpbHMuanMnO1xyXG5pbXBvcnQgUGhldEZvbnQgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1BoZXRGb250LmpzJztcclxuaW1wb3J0IHsgQ2lyY2xlLCBDb2xvciwgTm9kZSwgUGF0aCwgUmVjdGFuZ2xlLCBUZXh0IH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IG1vbGFyaXR5IGZyb20gJy4uLy4uL21vbGFyaXR5LmpzJztcclxuaW1wb3J0IE1vbGFyaXR5U3RyaW5ncyBmcm9tICcuLi8uLi9Nb2xhcml0eVN0cmluZ3MuanMnO1xyXG5pbXBvcnQgQmVha2VySW1hZ2VOb2RlIGZyb20gJy4vQmVha2VySW1hZ2VOb2RlLmpzJztcclxuaW1wb3J0IEJlYWtlckxhYmVsTm9kZSBmcm9tICcuL0JlYWtlckxhYmVsTm9kZS5qcyc7XHJcbmltcG9ydCBNb2xhcml0eUJlYWtlckRlc2NyaXB0aW9uTm9kZSBmcm9tICcuL01vbGFyaXR5QmVha2VyRGVzY3JpcHRpb25Ob2RlLmpzJztcclxuXHJcbmNvbnN0IHBhdHRlcm4wVmFsdWUxVW5pdHNTdHJpbmcgPSBNb2xhcml0eVN0cmluZ3MucGF0dGVyblsgJzB2YWx1ZScgXVsgJzF1bml0cycgXTtcclxuY29uc3QgdW5pdHNMaXRlcnNTdHJpbmcgPSBNb2xhcml0eVN0cmluZ3MudW5pdHMubGl0ZXJzO1xyXG5cclxuY29uc3QgYmVha2VySGVhZGVyU3RyaW5nID0gTW9sYXJpdHlTdHJpbmdzLmExMXkuYmVha2VyLmhlYWRlcjtcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBERUJVR19TSEFQRVMgPSBmYWxzZTtcclxuY29uc3QgVElDS19DT0xPUiA9IENvbG9yLkdSQVk7XHJcbmNvbnN0IE1JTk9SX1RJQ0tfU1BBQ0lORyA9IDAuMTsgLy8gTFxyXG5jb25zdCBNSU5PUl9USUNLU19QRVJfTUFKT1JfVElDSyA9IDU7XHJcbmNvbnN0IE1BSk9SX1RJQ0tfTEFCRUxTID0gWyAnXFx1MDBiZCcsICcxJyBdOyAvLyAxLzJMLCAxTFxyXG5jb25zdCBUSUNLX0xBQkVMX0ZPTlQgPSBuZXcgUGhldEZvbnQoIDIwICk7XHJcbmNvbnN0IFRJQ0tfTEFCRUxfQ09MT1IgPSBDb2xvci5EQVJLX0dSQVk7XHJcbmNvbnN0IFRJQ0tfTEFCRUxfWF9TUEFDSU5HID0gODtcclxuXHJcbmNsYXNzIEJlYWtlck5vZGUgZXh0ZW5kcyBOb2RlIHtcclxuICAvKipcclxuICAgKiBAcGFyYW0ge01hY3JvU29sdXRpb259IHNvbHV0aW9uXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IG1heFZvbHVtZVxyXG4gICAqIEBwYXJhbSB7UHJvcGVydHkuPGJvb2xlYW4+fSB2YWx1ZXNWaXNpYmxlUHJvcGVydHlcclxuICAgKiBAcGFyYW0ge1RhbmRlbX0gdGFuZGVtXHJcbiAgICogQHBhcmFtIHtTb2x1dGVEZXNjcmliZXJ9IHNvbHV0ZURlc2NyaWJlciAtIGZvciBpbnRlcmFjdGl2ZSBkZXNjcmlwdGlvblxyXG4gICAqIEBwYXJhbSB7U29sdXRlQW1vdW50RGVzY3JpYmVyfSBzb2x1dGVBbW91bnREZXNjcmliZXIgLSBmb3IgaW50ZXJhY3RpdmUgZGVzY3JpcHRpb25cclxuICAgKiBAcGFyYW0ge1ZvbHVtZURlc2NyaWJlcn0gdm9sdW1lRGVzY3JpYmVyIC0gZm9yIGludGVyYWN0aXZlIGRlc2NyaXB0aW9uXHJcbiAgICogQHBhcmFtIHtDb25jZW50cmF0aW9uRGVzY3JpYmVyfSBjb25jZW50cmF0aW9uRGVzY3JpYmVyIC0gZm9yIGludGVyYWN0aXZlIGRlc2NyaXB0aW9uXHJcbiAgICogQHBhcmFtIHtQcmVjaXBpdGF0ZUFtb3VudERlc2NyaWJlcn0gcHJlY2lwaXRhdGVBbW91bnREZXNjcmliZXJcclxuICAgKiBAcGFyYW0ge1Byb3BlcnR5Ljxib29sZWFuPn0gdXNlUXVhbnRpdGF0aXZlRGVzY3JpcHRpb25zUHJvcGVydHkgLSBmb3IgaW50ZXJhY3RpdmUgZGVzY3JpcHRpb25cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvciggc29sdXRpb24sIG1heFZvbHVtZSwgdmFsdWVzVmlzaWJsZVByb3BlcnR5LCB0YW5kZW0sIHNvbHV0ZURlc2NyaWJlciwgc29sdXRlQW1vdW50RGVzY3JpYmVyLCB2b2x1bWVEZXNjcmliZXIsIGNvbmNlbnRyYXRpb25EZXNjcmliZXIsIHByZWNpcGl0YXRlQW1vdW50RGVzY3JpYmVyLCB1c2VRdWFudGl0YXRpdmVEZXNjcmlwdGlvbnNQcm9wZXJ0eSApIHtcclxuXHJcbiAgICBzdXBlcigge1xyXG4gICAgICBwaWNrYWJsZTogZmFsc2UsXHJcbiAgICAgIHRhbmRlbTogdGFuZGVtLFxyXG4gICAgICB0YWdOYW1lOiAnZGl2JyxcclxuICAgICAgbGFiZWxUYWdOYW1lOiAnaDMnLFxyXG4gICAgICBsYWJlbENvbnRlbnQ6IGJlYWtlckhlYWRlclN0cmluZ1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIEBwcml2YXRlIHRoZSBnbGFzcyBiZWFrZXJcclxuICAgIHRoaXMuYmVha2VySW1hZ2VOb2RlID0gbmV3IEJlYWtlckltYWdlTm9kZSggdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2JlYWtlckltYWdlTm9kZScgKSwgeyBzY2FsZTogMC43NSB9ICk7XHJcbiAgICBjb25zdCBjeWxpbmRlclNpemUgPSB0aGlzLmJlYWtlckltYWdlTm9kZS5nZXRDeWxpbmRlclNpemUoKTtcclxuICAgIGNvbnN0IGN5bGluZGVyT2Zmc2V0ID0gdGhpcy5iZWFrZXJJbWFnZU5vZGUuZ2V0Q3lsaW5kZXJPZmZzZXQoKTtcclxuICAgIGNvbnN0IGN5bGluZGVyRW5kSGVpZ2h0ID0gdGhpcy5iZWFrZXJJbWFnZU5vZGUuZ2V0Q3lsaW5kZXJFbmRIZWlnaHQoKTtcclxuICAgIHRoaXMuYmVha2VySW1hZ2VOb2RlLnRyYW5zbGF0aW9uID0gbmV3IFZlY3RvcjIoIC1jeWxpbmRlck9mZnNldC54LCAtY3lsaW5kZXJPZmZzZXQueSApO1xyXG5cclxuICAgIC8vIGluc2lkZSBib3R0b20gbGluZVxyXG4gICAgY29uc3QgYm90dG9tU2hhcGUgPSBuZXcgU2hhcGUoKS5lbGxpcHRpY2FsQXJjKCBjeWxpbmRlclNpemUud2lkdGggLyAyLCBjeWxpbmRlclNpemUuaGVpZ2h0LFxyXG4gICAgICBjeWxpbmRlclNpemUud2lkdGggLyAyLCBjeWxpbmRlckVuZEhlaWdodCAvIDIsXHJcbiAgICAgIDAsIFV0aWxzLnRvUmFkaWFucyggMCApLCBVdGlscy50b1JhZGlhbnMoIDE4MCApLCB0cnVlICk7XHJcbiAgICBjb25zdCBib3R0b21Ob2RlID0gbmV3IFBhdGgoIGJvdHRvbVNoYXBlLCB7XHJcbiAgICAgIHN0cm9rZTogbmV3IENvbG9yKCAxNTAsIDE1MCwgMTUwLCAxMDAgKSxcclxuICAgICAgbGluZVdpZHRoOiAyLFxyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdib3R0b21Ob2RlJyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gbGFiZWwgb24gdGhlIGJlYWtlclxyXG4gICAgY29uc3QgbGFiZWxOb2RlID0gbmV3IEJlYWtlckxhYmVsTm9kZSggc29sdXRpb24sIHRhbmRlbS5jcmVhdGVUYW5kZW0oICdsYWJlbE5vZGUnICkgKTtcclxuICAgIGxhYmVsTm9kZS54ID0gY3lsaW5kZXJTaXplLndpZHRoIC8gMjtcclxuICAgIGxhYmVsTm9kZS55ID0gMC4xNSAqIGN5bGluZGVyU2l6ZS5oZWlnaHQ7XHJcblxyXG4gICAgLy8gcGFyZW50cyBmb3IgdGljayBtYXJrcyBhbmQgbGFiZWxzXHJcbiAgICBjb25zdCB0aWNrTWFya3NQYXJlbnQgPSBuZXcgTm9kZSggeyB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICd0aWNrTWFya3NQYXJlbnQnICkgfSApO1xyXG4gICAgY29uc3QgdGlja0xhYmVsc1BhcmVudCA9IG5ldyBOb2RlKCB7IHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3RpY2tMYWJlbHNQYXJlbnQnICkgfSApO1xyXG5cclxuICAgIC8vIHJlbmRlcmluZyBvcmRlclxyXG4gICAgdGhpcy5hZGRDaGlsZCggYm90dG9tTm9kZSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggdGhpcy5iZWFrZXJJbWFnZU5vZGUgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRpY2tNYXJrc1BhcmVudCApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggdGlja0xhYmVsc1BhcmVudCApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggbGFiZWxOb2RlICk7XHJcblxyXG4gICAgLy8gdGljayBtYXJrcywgYXJjcyB0aGF0IHdyYXAgYXJvdW5kIHRoZSBlZGdlIG9mIHRoZSBiZWFrZXIncyBjeWxpbmRlclxyXG4gICAgY29uc3QgbnVtYmVyT2ZUaWNrcyA9IFV0aWxzLnJvdW5kU3ltbWV0cmljKCBtYXhWb2x1bWUgLyBNSU5PUl9USUNLX1NQQUNJTkcgKTtcclxuICAgIGNvbnN0IGJvdHRvbVkgPSBjeWxpbmRlclNpemUuaGVpZ2h0OyAvLyBkb24ndCB1c2UgYm91bmRzIG9yIHBvc2l0aW9uIHdpbGwgYmUgb2ZmIGJlY2F1c2Ugb2Ygc3Ryb2tlIHdpZHRoXHJcbiAgICBjb25zdCBkZWx0YVkgPSBjeWxpbmRlclNpemUuaGVpZ2h0IC8gbnVtYmVyT2ZUaWNrcztcclxuXHJcbiAgICAvLyB2YXJzIHVzZWQgaW5zaWRlIHRoZSBmb3ItbG9vcFxyXG4gICAgbGV0IHk7XHJcbiAgICBsZXQgdGlja01hcmtTaGFwZTtcclxuICAgIGxldCB0aWNrTWFya05vZGU7XHJcbiAgICBsZXQgdGlja0xhYmVsSW5kZXg7XHJcbiAgICBsZXQgdGlja0xhYmVsU3RyaW5nO1xyXG4gICAgbGV0IHRpY2tMYWJlbFRleHQ7XHJcblxyXG4gICAgY29uc3QgdGlja0xhYmVsTm9kZUdyb3VwVGFuZGVtID0gdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3RpY2tMYWJlbHMnICk7XHJcblxyXG4gICAgZm9yICggbGV0IGkgPSAxOyBpIDw9IG51bWJlck9mVGlja3M7IGkrKyApIHtcclxuICAgICAgeSA9IGJvdHRvbVkgLSAoIGkgKiBkZWx0YVkgKTtcclxuICAgICAgaWYgKCBpICUgTUlOT1JfVElDS1NfUEVSX01BSk9SX1RJQ0sgPT09IDAgKSB7XHJcblxyXG4gICAgICAgIC8vIG1ham9yIHRpY2sgbWFya1xyXG4gICAgICAgIHRpY2tNYXJrU2hhcGUgPSBuZXcgU2hhcGUoKS5lbGxpcHRpY2FsQXJjKCBjeWxpbmRlclNpemUud2lkdGggLyAyLCB5LCBjeWxpbmRlclNpemUud2lkdGggLyAyLCBjeWxpbmRlckVuZEhlaWdodCAvIDIsIDAsIFV0aWxzLnRvUmFkaWFucyggMTY1ICksIFV0aWxzLnRvUmFkaWFucyggMTM1ICksIHRydWUgKTtcclxuICAgICAgICB0aWNrTWFya05vZGUgPSBuZXcgUGF0aCggdGlja01hcmtTaGFwZSwge1xyXG4gICAgICAgICAgc3Ryb2tlOiBUSUNLX0NPTE9SLFxyXG4gICAgICAgICAgbGluZVdpZHRoOiAyXHJcbiAgICAgICAgfSApO1xyXG4gICAgICAgIHRpY2tNYXJrc1BhcmVudC5hZGRDaGlsZCggdGlja01hcmtOb2RlICk7XHJcblxyXG4gICAgICAgIC8vIG1ham9yIHRpY2sgbGFiZWxcclxuICAgICAgICB0aWNrTGFiZWxJbmRleCA9ICggaSAvIE1JTk9SX1RJQ0tTX1BFUl9NQUpPUl9USUNLICkgLSAxO1xyXG4gICAgICAgIGlmICggdGlja0xhYmVsSW5kZXggPCBNQUpPUl9USUNLX0xBQkVMUy5sZW5ndGggKSB7XHJcbiAgICAgICAgICB0aWNrTGFiZWxTdHJpbmcgPSBTdHJpbmdVdGlscy5mb3JtYXQoIHBhdHRlcm4wVmFsdWUxVW5pdHNTdHJpbmcsIE1BSk9SX1RJQ0tfTEFCRUxTWyB0aWNrTGFiZWxJbmRleCBdLCB1bml0c0xpdGVyc1N0cmluZyApO1xyXG4gICAgICAgICAgdGlja0xhYmVsVGV4dCA9IG5ldyBUZXh0KCB0aWNrTGFiZWxTdHJpbmcsIHtcclxuICAgICAgICAgICAgZm9udDogVElDS19MQUJFTF9GT05ULFxyXG4gICAgICAgICAgICBzdHJva2U6IFRJQ0tfTEFCRUxfQ09MT1IsXHJcbiAgICAgICAgICAgIG1heFdpZHRoOiAxMDAsXHJcbiAgICAgICAgICAgIHRhbmRlbTogdGlja0xhYmVsTm9kZUdyb3VwVGFuZGVtLmNyZWF0ZVRhbmRlbSggYCR7aX1UZXh0YCApXHJcbiAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICB0aWNrTGFiZWxzUGFyZW50LmFkZENoaWxkKCB0aWNrTGFiZWxUZXh0ICk7XHJcbiAgICAgICAgICB0aWNrTGFiZWxUZXh0LmxlZnQgPSB0aWNrTWFya05vZGUucmlnaHQgKyBUSUNLX0xBQkVMX1hfU1BBQ0lORztcclxuICAgICAgICAgIHRpY2tMYWJlbFRleHQuY2VudGVyWSA9IHRpY2tNYXJrTm9kZS5ib3R0b207XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG5cclxuICAgICAgICAvLyBtaW5vciB0aWNrIG1hcmssIG5vIGxhYmVsXHJcbiAgICAgICAgdGlja01hcmtTaGFwZSA9IG5ldyBTaGFwZSgpLmVsbGlwdGljYWxBcmMoIGN5bGluZGVyU2l6ZS53aWR0aCAvIDIsIHksIGN5bGluZGVyU2l6ZS53aWR0aCAvIDIsIGN5bGluZGVyRW5kSGVpZ2h0IC8gMiwgMCwgVXRpbHMudG9SYWRpYW5zKCAxNjUgKSwgVXRpbHMudG9SYWRpYW5zKCAxNTAgKSwgdHJ1ZSApO1xyXG4gICAgICAgIHRpY2tNYXJrTm9kZSA9IG5ldyBQYXRoKCB0aWNrTWFya1NoYXBlLCB7XHJcbiAgICAgICAgICBzdHJva2U6IFRJQ0tfQ09MT1IsXHJcbiAgICAgICAgICBsaW5lV2lkdGg6IDJcclxuICAgICAgICB9ICk7XHJcbiAgICAgICAgdGlja01hcmtzUGFyZW50LmFkZENoaWxkKCB0aWNrTWFya05vZGUgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICggREVCVUdfU0hBUEVTICkge1xyXG4gICAgICAvLyBkcmF3IHRoZSBjeWxpbmRlciB0aGF0IHJlcHJlc2VudHMgdGhlIGJlYWtlcidzIGludGVyaW9yXHJcbiAgICAgIHRoaXMuYWRkQ2hpbGQoIG5ldyBSZWN0YW5nbGUoIDAsIDAsIGN5bGluZGVyU2l6ZS53aWR0aCwgY3lsaW5kZXJTaXplLmhlaWdodCwgeyBzdHJva2U6ICdyZWQnIH0gKSApO1xyXG4gICAgICAvLyBkcmF3IGEgY2lyY2xlIGF0IHRoZSBvcmlnaW5cclxuICAgICAgdGhpcy5hZGRDaGlsZCggbmV3IENpcmNsZSggeyByYWRpdXM6IDMsIGZpbGw6ICdyZWQnIH0gKSApO1xyXG4gICAgfVxyXG5cclxuICAgIHZhbHVlc1Zpc2libGVQcm9wZXJ0eS5saW5rKCB2aXNpYmxlID0+IHtcclxuICAgICAgdGlja0xhYmVsc1BhcmVudC52aXNpYmxlID0gdmlzaWJsZTtcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBwZG9tIC0gYWRkcyB0aGUgZGVzY3JpcHRpb24gbm9kZSB0aGF0IGhvbGRzIHRoZSBQRE9NIHN1bW1hcnkgb2YgdGhlIGJlYWtlci5cclxuICAgIHRoaXMuYWRkQ2hpbGQoIG5ldyBNb2xhcml0eUJlYWtlckRlc2NyaXB0aW9uTm9kZSggc29sdXRpb24sIHVzZVF1YW50aXRhdGl2ZURlc2NyaXB0aW9uc1Byb3BlcnR5LCBzb2x1dGVEZXNjcmliZXIsXHJcbiAgICAgIGNvbmNlbnRyYXRpb25EZXNjcmliZXIsIHByZWNpcGl0YXRlQW1vdW50RGVzY3JpYmVyLCBzb2x1dGVBbW91bnREZXNjcmliZXIsIHZvbHVtZURlc2NyaWJlciApICk7XHJcblxyXG4gIH1cclxuXHJcbiAgLy8gQHB1YmxpY1xyXG4gIGdldEN5bGluZGVyU2l6ZSgpIHtcclxuICAgIHJldHVybiB0aGlzLmJlYWtlckltYWdlTm9kZS5nZXRDeWxpbmRlclNpemUoKTtcclxuICB9XHJcblxyXG4gIC8vIEBwdWJsaWNcclxuICBnZXRDeWxpbmRlckVuZEhlaWdodCgpIHtcclxuICAgIHJldHVybiB0aGlzLmJlYWtlckltYWdlTm9kZS5nZXRDeWxpbmRlckVuZEhlaWdodCgpO1xyXG4gIH1cclxufVxyXG5cclxubW9sYXJpdHkucmVnaXN0ZXIoICdCZWFrZXJOb2RlJywgQmVha2VyTm9kZSApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgQmVha2VyTm9kZTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLEtBQUssTUFBTSw2QkFBNkI7QUFDL0MsT0FBT0MsT0FBTyxNQUFNLCtCQUErQjtBQUNuRCxTQUFTQyxLQUFLLFFBQVEsZ0NBQWdDO0FBQ3RELE9BQU9DLFdBQVcsTUFBTSwrQ0FBK0M7QUFDdkUsT0FBT0MsUUFBUSxNQUFNLHlDQUF5QztBQUM5RCxTQUFTQyxNQUFNLEVBQUVDLEtBQUssRUFBRUMsSUFBSSxFQUFFQyxJQUFJLEVBQUVDLFNBQVMsRUFBRUMsSUFBSSxRQUFRLG1DQUFtQztBQUM5RixPQUFPQyxRQUFRLE1BQU0sbUJBQW1CO0FBQ3hDLE9BQU9DLGVBQWUsTUFBTSwwQkFBMEI7QUFDdEQsT0FBT0MsZUFBZSxNQUFNLHNCQUFzQjtBQUNsRCxPQUFPQyxlQUFlLE1BQU0sc0JBQXNCO0FBQ2xELE9BQU9DLDZCQUE2QixNQUFNLG9DQUFvQztBQUU5RSxNQUFNQyx5QkFBeUIsR0FBR0osZUFBZSxDQUFDSyxPQUFPLENBQUUsUUFBUSxDQUFFLENBQUUsUUFBUSxDQUFFO0FBQ2pGLE1BQU1DLGlCQUFpQixHQUFHTixlQUFlLENBQUNPLEtBQUssQ0FBQ0MsTUFBTTtBQUV0RCxNQUFNQyxrQkFBa0IsR0FBR1QsZUFBZSxDQUFDVSxJQUFJLENBQUNDLE1BQU0sQ0FBQ0MsTUFBTTs7QUFFN0Q7QUFDQSxNQUFNQyxZQUFZLEdBQUcsS0FBSztBQUMxQixNQUFNQyxVQUFVLEdBQUdwQixLQUFLLENBQUNxQixJQUFJO0FBQzdCLE1BQU1DLGtCQUFrQixHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQ2hDLE1BQU1DLDBCQUEwQixHQUFHLENBQUM7QUFDcEMsTUFBTUMsaUJBQWlCLEdBQUcsQ0FBRSxRQUFRLEVBQUUsR0FBRyxDQUFFLENBQUMsQ0FBQztBQUM3QyxNQUFNQyxlQUFlLEdBQUcsSUFBSTNCLFFBQVEsQ0FBRSxFQUFHLENBQUM7QUFDMUMsTUFBTTRCLGdCQUFnQixHQUFHMUIsS0FBSyxDQUFDMkIsU0FBUztBQUN4QyxNQUFNQyxvQkFBb0IsR0FBRyxDQUFDO0FBRTlCLE1BQU1DLFVBQVUsU0FBUzVCLElBQUksQ0FBQztFQUM1QjtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRTZCLFdBQVdBLENBQUVDLFFBQVEsRUFBRUMsU0FBUyxFQUFFQyxxQkFBcUIsRUFBRUMsTUFBTSxFQUFFQyxlQUFlLEVBQUVDLHFCQUFxQixFQUFFQyxlQUFlLEVBQUVDLHNCQUFzQixFQUFFQywwQkFBMEIsRUFBRUMsbUNBQW1DLEVBQUc7SUFFbE4sS0FBSyxDQUFFO01BQ0xDLFFBQVEsRUFBRSxLQUFLO01BQ2ZQLE1BQU0sRUFBRUEsTUFBTTtNQUNkUSxPQUFPLEVBQUUsS0FBSztNQUNkQyxZQUFZLEVBQUUsSUFBSTtNQUNsQkMsWUFBWSxFQUFFN0I7SUFDaEIsQ0FBRSxDQUFDOztJQUVIO0lBQ0EsSUFBSSxDQUFDOEIsZUFBZSxHQUFHLElBQUl0QyxlQUFlLENBQUUyQixNQUFNLENBQUNZLFlBQVksQ0FBRSxpQkFBa0IsQ0FBQyxFQUFFO01BQUVDLEtBQUssRUFBRTtJQUFLLENBQUUsQ0FBQztJQUN2RyxNQUFNQyxZQUFZLEdBQUcsSUFBSSxDQUFDSCxlQUFlLENBQUNJLGVBQWUsQ0FBQyxDQUFDO0lBQzNELE1BQU1DLGNBQWMsR0FBRyxJQUFJLENBQUNMLGVBQWUsQ0FBQ00saUJBQWlCLENBQUMsQ0FBQztJQUMvRCxNQUFNQyxpQkFBaUIsR0FBRyxJQUFJLENBQUNQLGVBQWUsQ0FBQ1Esb0JBQW9CLENBQUMsQ0FBQztJQUNyRSxJQUFJLENBQUNSLGVBQWUsQ0FBQ1MsV0FBVyxHQUFHLElBQUkzRCxPQUFPLENBQUUsQ0FBQ3VELGNBQWMsQ0FBQ0ssQ0FBQyxFQUFFLENBQUNMLGNBQWMsQ0FBQ00sQ0FBRSxDQUFDOztJQUV0RjtJQUNBLE1BQU1DLFdBQVcsR0FBRyxJQUFJN0QsS0FBSyxDQUFDLENBQUMsQ0FBQzhELGFBQWEsQ0FBRVYsWUFBWSxDQUFDVyxLQUFLLEdBQUcsQ0FBQyxFQUFFWCxZQUFZLENBQUNZLE1BQU0sRUFDeEZaLFlBQVksQ0FBQ1csS0FBSyxHQUFHLENBQUMsRUFBRVAsaUJBQWlCLEdBQUcsQ0FBQyxFQUM3QyxDQUFDLEVBQUUxRCxLQUFLLENBQUNtRSxTQUFTLENBQUUsQ0FBRSxDQUFDLEVBQUVuRSxLQUFLLENBQUNtRSxTQUFTLENBQUUsR0FBSSxDQUFDLEVBQUUsSUFBSyxDQUFDO0lBQ3pELE1BQU1DLFVBQVUsR0FBRyxJQUFJNUQsSUFBSSxDQUFFdUQsV0FBVyxFQUFFO01BQ3hDTSxNQUFNLEVBQUUsSUFBSS9ELEtBQUssQ0FBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFJLENBQUM7TUFDdkNnRSxTQUFTLEVBQUUsQ0FBQztNQUNaOUIsTUFBTSxFQUFFQSxNQUFNLENBQUNZLFlBQVksQ0FBRSxZQUFhO0lBQzVDLENBQUUsQ0FBQzs7SUFFSDtJQUNBLE1BQU1tQixTQUFTLEdBQUcsSUFBSXpELGVBQWUsQ0FBRXVCLFFBQVEsRUFBRUcsTUFBTSxDQUFDWSxZQUFZLENBQUUsV0FBWSxDQUFFLENBQUM7SUFDckZtQixTQUFTLENBQUNWLENBQUMsR0FBR1AsWUFBWSxDQUFDVyxLQUFLLEdBQUcsQ0FBQztJQUNwQ00sU0FBUyxDQUFDVCxDQUFDLEdBQUcsSUFBSSxHQUFHUixZQUFZLENBQUNZLE1BQU07O0lBRXhDO0lBQ0EsTUFBTU0sZUFBZSxHQUFHLElBQUlqRSxJQUFJLENBQUU7TUFBRWlDLE1BQU0sRUFBRUEsTUFBTSxDQUFDWSxZQUFZLENBQUUsaUJBQWtCO0lBQUUsQ0FBRSxDQUFDO0lBQ3hGLE1BQU1xQixnQkFBZ0IsR0FBRyxJQUFJbEUsSUFBSSxDQUFFO01BQUVpQyxNQUFNLEVBQUVBLE1BQU0sQ0FBQ1ksWUFBWSxDQUFFLGtCQUFtQjtJQUFFLENBQUUsQ0FBQzs7SUFFMUY7SUFDQSxJQUFJLENBQUNzQixRQUFRLENBQUVOLFVBQVcsQ0FBQztJQUMzQixJQUFJLENBQUNNLFFBQVEsQ0FBRSxJQUFJLENBQUN2QixlQUFnQixDQUFDO0lBQ3JDLElBQUksQ0FBQ3VCLFFBQVEsQ0FBRUYsZUFBZ0IsQ0FBQztJQUNoQyxJQUFJLENBQUNFLFFBQVEsQ0FBRUQsZ0JBQWlCLENBQUM7SUFDakMsSUFBSSxDQUFDQyxRQUFRLENBQUVILFNBQVUsQ0FBQzs7SUFFMUI7SUFDQSxNQUFNSSxhQUFhLEdBQUczRSxLQUFLLENBQUM0RSxjQUFjLENBQUV0QyxTQUFTLEdBQUdWLGtCQUFtQixDQUFDO0lBQzVFLE1BQU1pRCxPQUFPLEdBQUd2QixZQUFZLENBQUNZLE1BQU0sQ0FBQyxDQUFDO0lBQ3JDLE1BQU1ZLE1BQU0sR0FBR3hCLFlBQVksQ0FBQ1ksTUFBTSxHQUFHUyxhQUFhOztJQUVsRDtJQUNBLElBQUliLENBQUM7SUFDTCxJQUFJaUIsYUFBYTtJQUNqQixJQUFJQyxZQUFZO0lBQ2hCLElBQUlDLGNBQWM7SUFDbEIsSUFBSUMsZUFBZTtJQUNuQixJQUFJQyxhQUFhO0lBRWpCLE1BQU1DLHdCQUF3QixHQUFHNUMsTUFBTSxDQUFDWSxZQUFZLENBQUUsWUFBYSxDQUFDO0lBRXBFLEtBQU0sSUFBSWlDLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsSUFBSVYsYUFBYSxFQUFFVSxDQUFDLEVBQUUsRUFBRztNQUN6Q3ZCLENBQUMsR0FBR2UsT0FBTyxHQUFLUSxDQUFDLEdBQUdQLE1BQVE7TUFDNUIsSUFBS08sQ0FBQyxHQUFHeEQsMEJBQTBCLEtBQUssQ0FBQyxFQUFHO1FBRTFDO1FBQ0FrRCxhQUFhLEdBQUcsSUFBSTdFLEtBQUssQ0FBQyxDQUFDLENBQUM4RCxhQUFhLENBQUVWLFlBQVksQ0FBQ1csS0FBSyxHQUFHLENBQUMsRUFBRUgsQ0FBQyxFQUFFUixZQUFZLENBQUNXLEtBQUssR0FBRyxDQUFDLEVBQUVQLGlCQUFpQixHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUxRCxLQUFLLENBQUNtRSxTQUFTLENBQUUsR0FBSSxDQUFDLEVBQUVuRSxLQUFLLENBQUNtRSxTQUFTLENBQUUsR0FBSSxDQUFDLEVBQUUsSUFBSyxDQUFDO1FBQzlLYSxZQUFZLEdBQUcsSUFBSXhFLElBQUksQ0FBRXVFLGFBQWEsRUFBRTtVQUN0Q1YsTUFBTSxFQUFFM0MsVUFBVTtVQUNsQjRDLFNBQVMsRUFBRTtRQUNiLENBQUUsQ0FBQztRQUNIRSxlQUFlLENBQUNFLFFBQVEsQ0FBRU0sWUFBYSxDQUFDOztRQUV4QztRQUNBQyxjQUFjLEdBQUtJLENBQUMsR0FBR3hELDBCQUEwQixHQUFLLENBQUM7UUFDdkQsSUFBS29ELGNBQWMsR0FBR25ELGlCQUFpQixDQUFDd0QsTUFBTSxFQUFHO1VBQy9DSixlQUFlLEdBQUcvRSxXQUFXLENBQUNvRixNQUFNLENBQUV2RSx5QkFBeUIsRUFBRWMsaUJBQWlCLENBQUVtRCxjQUFjLENBQUUsRUFBRS9ELGlCQUFrQixDQUFDO1VBQ3pIaUUsYUFBYSxHQUFHLElBQUl6RSxJQUFJLENBQUV3RSxlQUFlLEVBQUU7WUFDekNNLElBQUksRUFBRXpELGVBQWU7WUFDckJzQyxNQUFNLEVBQUVyQyxnQkFBZ0I7WUFDeEJ5RCxRQUFRLEVBQUUsR0FBRztZQUNiakQsTUFBTSxFQUFFNEMsd0JBQXdCLENBQUNoQyxZQUFZLENBQUcsR0FBRWlDLENBQUUsTUFBTTtVQUM1RCxDQUFFLENBQUM7VUFDSFosZ0JBQWdCLENBQUNDLFFBQVEsQ0FBRVMsYUFBYyxDQUFDO1VBQzFDQSxhQUFhLENBQUNPLElBQUksR0FBR1YsWUFBWSxDQUFDVyxLQUFLLEdBQUd6RCxvQkFBb0I7VUFDOURpRCxhQUFhLENBQUNTLE9BQU8sR0FBR1osWUFBWSxDQUFDYSxNQUFNO1FBQzdDO01BQ0YsQ0FBQyxNQUNJO1FBRUg7UUFDQWQsYUFBYSxHQUFHLElBQUk3RSxLQUFLLENBQUMsQ0FBQyxDQUFDOEQsYUFBYSxDQUFFVixZQUFZLENBQUNXLEtBQUssR0FBRyxDQUFDLEVBQUVILENBQUMsRUFBRVIsWUFBWSxDQUFDVyxLQUFLLEdBQUcsQ0FBQyxFQUFFUCxpQkFBaUIsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFMUQsS0FBSyxDQUFDbUUsU0FBUyxDQUFFLEdBQUksQ0FBQyxFQUFFbkUsS0FBSyxDQUFDbUUsU0FBUyxDQUFFLEdBQUksQ0FBQyxFQUFFLElBQUssQ0FBQztRQUM5S2EsWUFBWSxHQUFHLElBQUl4RSxJQUFJLENBQUV1RSxhQUFhLEVBQUU7VUFDdENWLE1BQU0sRUFBRTNDLFVBQVU7VUFDbEI0QyxTQUFTLEVBQUU7UUFDYixDQUFFLENBQUM7UUFDSEUsZUFBZSxDQUFDRSxRQUFRLENBQUVNLFlBQWEsQ0FBQztNQUMxQztJQUNGO0lBRUEsSUFBS3ZELFlBQVksRUFBRztNQUNsQjtNQUNBLElBQUksQ0FBQ2lELFFBQVEsQ0FBRSxJQUFJakUsU0FBUyxDQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU2QyxZQUFZLENBQUNXLEtBQUssRUFBRVgsWUFBWSxDQUFDWSxNQUFNLEVBQUU7UUFBRUcsTUFBTSxFQUFFO01BQU0sQ0FBRSxDQUFFLENBQUM7TUFDbEc7TUFDQSxJQUFJLENBQUNLLFFBQVEsQ0FBRSxJQUFJckUsTUFBTSxDQUFFO1FBQUV5RixNQUFNLEVBQUUsQ0FBQztRQUFFQyxJQUFJLEVBQUU7TUFBTSxDQUFFLENBQUUsQ0FBQztJQUMzRDtJQUVBeEQscUJBQXFCLENBQUN5RCxJQUFJLENBQUVDLE9BQU8sSUFBSTtNQUNyQ3hCLGdCQUFnQixDQUFDd0IsT0FBTyxHQUFHQSxPQUFPO0lBQ3BDLENBQUUsQ0FBQzs7SUFFSDtJQUNBLElBQUksQ0FBQ3ZCLFFBQVEsQ0FBRSxJQUFJM0QsNkJBQTZCLENBQUVzQixRQUFRLEVBQUVTLG1DQUFtQyxFQUFFTCxlQUFlLEVBQzlHRyxzQkFBc0IsRUFBRUMsMEJBQTBCLEVBQUVILHFCQUFxQixFQUFFQyxlQUFnQixDQUFFLENBQUM7RUFFbEc7O0VBRUE7RUFDQVksZUFBZUEsQ0FBQSxFQUFHO0lBQ2hCLE9BQU8sSUFBSSxDQUFDSixlQUFlLENBQUNJLGVBQWUsQ0FBQyxDQUFDO0VBQy9DOztFQUVBO0VBQ0FJLG9CQUFvQkEsQ0FBQSxFQUFHO0lBQ3JCLE9BQU8sSUFBSSxDQUFDUixlQUFlLENBQUNRLG9CQUFvQixDQUFDLENBQUM7RUFDcEQ7QUFDRjtBQUVBaEQsUUFBUSxDQUFDdUYsUUFBUSxDQUFFLFlBQVksRUFBRS9ELFVBQVcsQ0FBQztBQUU3QyxlQUFlQSxVQUFVIn0=