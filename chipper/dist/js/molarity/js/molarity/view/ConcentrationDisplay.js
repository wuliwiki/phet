// Copyright 2013-2023, University of Colorado Boulder

/**
 * Vertical bar that displays the concentration of a solution.
 * The display can be switched between quantitative and qualitative.
 * The bar is colored using a gradient that corresponds to the solute's color.
 * A pointer to the right of the bar indicates the concentration on the scale.
 * The pointer is color corresponds to its position on the bar.
 * Origin is at the upper-left corner of the bar.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import Utils from '../../../../dot/js/Utils.js';
import { Shape } from '../../../../kite/js/imports.js';
import StringUtils from '../../../../phetcommon/js/util/StringUtils.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { Color, LinearGradient, Node, Path, Rectangle, RichText, Text } from '../../../../scenery/js/imports.js';
import molarity from '../../molarity.js';
import MolarityStrings from '../../MolarityStrings.js';
import MolarityConstants from '../MolarityConstants.js';
import DualLabelNode from './DualLabelNode.js';
const highString = MolarityStrings.high;
const molarityLabelString = MolarityStrings.molarity.label;
const pattern0Value1UnitsString = MolarityStrings.pattern['0value']['1units'];
const patternParentheses0TextString = MolarityStrings.pattern.parentheses['0text'];
const solutionConcentrationString = MolarityStrings.solutionConcentration;
const unitsMolarityString = MolarityStrings.units.molarity;
const zeroString = MolarityStrings.zero;

// constants
const TITLE_FONT = new PhetFont({
  size: 24,
  weight: 'bold'
});
const SUBTITLE_FONT = new PhetFont(22);
const RANGE_FONT = new PhetFont(20);
const VALUE_FONT = new PhetFont(20);
const ARROW_LENGTH = 55;
const ARROW_HEAD_HEIGHT = 0.6 * ARROW_LENGTH;
const ARROW_HEAD_WIDTH = 0.7 * ARROW_LENGTH;
const ARROW_TAIL_WIDTH = 0.4 * ARROW_LENGTH;
class ConcentrationDisplay extends Node {
  /**
   * @param {MacroSolution} solution
   * @param {Range} concentrationRange
   * @param {Property.<boolean>} valuesVisibleProperty
   * @param {Dimension2} barSize
   * @param {Tandem} tandem
   */
  constructor(solution, concentrationRange, valuesVisibleProperty, barSize, tandem) {
    super({
      pickable: false,
      tandem: tandem
    });

    // nodes
    const maxTextWidth = 175; // constrain width for i18n, determined empirically

    const titleText = new RichText(solutionConcentrationString, {
      replaceNewlines: true,
      align: 'center',
      font: TITLE_FONT,
      maxWidth: maxTextWidth,
      tandem: tandem.createTandem('titleText')
    });
    const subtitleText = new Text(StringUtils.format(patternParentheses0TextString, molarityLabelString), {
      font: SUBTITLE_FONT,
      maxWidth: maxTextWidth,
      tandem: tandem.createTandem('subtitleText')
    });
    const maxNode = new DualLabelNode(Utils.toFixed(concentrationRange.max, MolarityConstants.RANGE_DECIMAL_PLACES), highString, valuesVisibleProperty, RANGE_FONT, tandem.createTandem('maxNode'), {
      maxWidth: maxTextWidth
    });
    const minNode = new DualLabelNode(Utils.toFixed(concentrationRange.min, concentrationRange.min === 0 ? 0 : MolarityConstants.RANGE_DECIMAL_PLACES), zeroString, valuesVisibleProperty, RANGE_FONT, tandem.createTandem('minNode'), {
      maxWidth: maxTextWidth
    });
    const barNode = new Rectangle(0, 0, barSize.width, barSize.height, {
      stroke: 'black',
      tandem: tandem.createTandem('barNode')
    });
    const saturatedBarNode = new Rectangle(0, 0, barSize.width, barSize.height, {
      stroke: 'black',
      fill: Color.LIGHT_GRAY,
      tandem: tandem.createTandem('saturatedBarNode')
    });
    const pointerNode = new PointerNode(solution, concentrationRange, barSize, valuesVisibleProperty, tandem.createTandem('pointerNode'));

    // rendering order
    this.addChild(titleText);
    this.addChild(subtitleText);
    this.addChild(maxNode);
    this.addChild(minNode);
    this.addChild(barNode);
    this.addChild(saturatedBarNode);
    this.addChild(pointerNode);

    // layout
    barNode.x = 0;
    barNode.y = 0;
    saturatedBarNode.x = barNode.x;
    saturatedBarNode.y = barNode.y;
    maxNode.centerX = barNode.centerX;
    maxNode.bottom = barNode.top - 5;
    minNode.centerX = barNode.centerX;
    minNode.top = barNode.bottom + 5;
    subtitleText.centerX = barNode.centerX;
    subtitleText.bottom = maxNode.top - 8;
    titleText.centerX = barNode.centerX;
    titleText.bottom = subtitleText.top - 5;

    // when the solute changes...
    solution.soluteProperty.link(solute => {
      // Color the bar using a gradient that corresponds to the solute's color range.
      const concentrationScale = Math.min(1, solute.saturatedConcentration / concentrationRange.max);
      const y = barSize.height - barSize.height * concentrationScale;
      if (y < 0) {
        console.log(`solute.saturatedConcentration=${solute.saturatedConcentration} concentrationRange.max=${concentrationRange.max}`);
      }
      barNode.fill = new LinearGradient(0, y, 0, barSize.height).addColorStop(0, solute.maxColor).addColorStop(1, solute.minColor);

      // Cover the saturated portion of the range with a gray rectangle.
      saturatedBarNode.visible = solute.saturatedConcentration < concentrationRange.max;
      saturatedBarNode.setRect(0, 0, barSize.width, y);
    });
  }
}
molarity.register('ConcentrationDisplay', ConcentrationDisplay);
class PointerNode extends Node {
  /**
   * @param {MacroSolution} solution
   * @param {Range} concentrationRange
   * @param {Dimension2} barSize
   * @param {Property.<boolean>} valuesVisibleProperty
   * @param {Tandem} tandem
   */
  constructor(solution, concentrationRange, barSize, valuesVisibleProperty, tandem) {
    super({
      tandem: tandem
    });
    const valueText = new Text('?', {
      font: VALUE_FONT,
      maxWidth: 75,
      tandem: tandem.createTandem('valueText')
    });
    const x = barSize.width;
    const y = 0;
    const arrowShape = new Shape().moveTo(x, y).lineTo(x + ARROW_HEAD_HEIGHT, y - ARROW_HEAD_WIDTH / 2).lineTo(x + ARROW_HEAD_HEIGHT, y - ARROW_TAIL_WIDTH / 2).lineTo(x + ARROW_LENGTH, y - ARROW_TAIL_WIDTH / 2).lineTo(x + ARROW_LENGTH, y + ARROW_TAIL_WIDTH / 2).lineTo(x + ARROW_HEAD_HEIGHT, y + ARROW_TAIL_WIDTH / 2).lineTo(x + ARROW_HEAD_HEIGHT, y + ARROW_HEAD_WIDTH / 2).close();

    // @private
    this.arrowNode = new Path(arrowShape, {
      stroke: 'black',
      tandem: tandem.createTandem('arrowNode')
    });

    // rendering order
    this.addChild(valueText);
    this.addChild(this.arrowNode);

    // show/hide value
    valuesVisibleProperty.link(visible => {
      valueText.setVisible(visible);
    });

    // when the concentration or solute changes...
    const update = concentration => {
      // update the arrow
      this.arrowNode.y = barSize.height - Utils.linear(concentrationRange.min, concentrationRange.max, 0, barSize.height, concentration);
      this.arrowNode.fill = solution.getColor();

      // update the value
      valueText.string = StringUtils.format(pattern0Value1UnitsString, Utils.toFixed(concentration, MolarityConstants.CONCENTRATION_DECIMAL_PLACES), unitsMolarityString);
      valueText.left = this.arrowNode.right + 5;
      valueText.centerY = this.arrowNode.centerY;
    };
    solution.concentrationProperty.link(concentration => {
      update(concentration);
    });
    solution.soluteProperty.link(() => {
      update(solution.concentrationProperty.value);
    });
  }
}
export default ConcentrationDisplay;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVdGlscyIsIlNoYXBlIiwiU3RyaW5nVXRpbHMiLCJQaGV0Rm9udCIsIkNvbG9yIiwiTGluZWFyR3JhZGllbnQiLCJOb2RlIiwiUGF0aCIsIlJlY3RhbmdsZSIsIlJpY2hUZXh0IiwiVGV4dCIsIm1vbGFyaXR5IiwiTW9sYXJpdHlTdHJpbmdzIiwiTW9sYXJpdHlDb25zdGFudHMiLCJEdWFsTGFiZWxOb2RlIiwiaGlnaFN0cmluZyIsImhpZ2giLCJtb2xhcml0eUxhYmVsU3RyaW5nIiwibGFiZWwiLCJwYXR0ZXJuMFZhbHVlMVVuaXRzU3RyaW5nIiwicGF0dGVybiIsInBhdHRlcm5QYXJlbnRoZXNlczBUZXh0U3RyaW5nIiwicGFyZW50aGVzZXMiLCJzb2x1dGlvbkNvbmNlbnRyYXRpb25TdHJpbmciLCJzb2x1dGlvbkNvbmNlbnRyYXRpb24iLCJ1bml0c01vbGFyaXR5U3RyaW5nIiwidW5pdHMiLCJ6ZXJvU3RyaW5nIiwiemVybyIsIlRJVExFX0ZPTlQiLCJzaXplIiwid2VpZ2h0IiwiU1VCVElUTEVfRk9OVCIsIlJBTkdFX0ZPTlQiLCJWQUxVRV9GT05UIiwiQVJST1dfTEVOR1RIIiwiQVJST1dfSEVBRF9IRUlHSFQiLCJBUlJPV19IRUFEX1dJRFRIIiwiQVJST1dfVEFJTF9XSURUSCIsIkNvbmNlbnRyYXRpb25EaXNwbGF5IiwiY29uc3RydWN0b3IiLCJzb2x1dGlvbiIsImNvbmNlbnRyYXRpb25SYW5nZSIsInZhbHVlc1Zpc2libGVQcm9wZXJ0eSIsImJhclNpemUiLCJ0YW5kZW0iLCJwaWNrYWJsZSIsIm1heFRleHRXaWR0aCIsInRpdGxlVGV4dCIsInJlcGxhY2VOZXdsaW5lcyIsImFsaWduIiwiZm9udCIsIm1heFdpZHRoIiwiY3JlYXRlVGFuZGVtIiwic3VidGl0bGVUZXh0IiwiZm9ybWF0IiwibWF4Tm9kZSIsInRvRml4ZWQiLCJtYXgiLCJSQU5HRV9ERUNJTUFMX1BMQUNFUyIsIm1pbk5vZGUiLCJtaW4iLCJiYXJOb2RlIiwid2lkdGgiLCJoZWlnaHQiLCJzdHJva2UiLCJzYXR1cmF0ZWRCYXJOb2RlIiwiZmlsbCIsIkxJR0hUX0dSQVkiLCJwb2ludGVyTm9kZSIsIlBvaW50ZXJOb2RlIiwiYWRkQ2hpbGQiLCJ4IiwieSIsImNlbnRlclgiLCJib3R0b20iLCJ0b3AiLCJzb2x1dGVQcm9wZXJ0eSIsImxpbmsiLCJzb2x1dGUiLCJjb25jZW50cmF0aW9uU2NhbGUiLCJNYXRoIiwic2F0dXJhdGVkQ29uY2VudHJhdGlvbiIsImNvbnNvbGUiLCJsb2ciLCJhZGRDb2xvclN0b3AiLCJtYXhDb2xvciIsIm1pbkNvbG9yIiwidmlzaWJsZSIsInNldFJlY3QiLCJyZWdpc3RlciIsInZhbHVlVGV4dCIsImFycm93U2hhcGUiLCJtb3ZlVG8iLCJsaW5lVG8iLCJjbG9zZSIsImFycm93Tm9kZSIsInNldFZpc2libGUiLCJ1cGRhdGUiLCJjb25jZW50cmF0aW9uIiwibGluZWFyIiwiZ2V0Q29sb3IiLCJzdHJpbmciLCJDT05DRU5UUkFUSU9OX0RFQ0lNQUxfUExBQ0VTIiwibGVmdCIsInJpZ2h0IiwiY2VudGVyWSIsImNvbmNlbnRyYXRpb25Qcm9wZXJ0eSIsInZhbHVlIl0sInNvdXJjZXMiOlsiQ29uY2VudHJhdGlvbkRpc3BsYXkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTMtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogVmVydGljYWwgYmFyIHRoYXQgZGlzcGxheXMgdGhlIGNvbmNlbnRyYXRpb24gb2YgYSBzb2x1dGlvbi5cclxuICogVGhlIGRpc3BsYXkgY2FuIGJlIHN3aXRjaGVkIGJldHdlZW4gcXVhbnRpdGF0aXZlIGFuZCBxdWFsaXRhdGl2ZS5cclxuICogVGhlIGJhciBpcyBjb2xvcmVkIHVzaW5nIGEgZ3JhZGllbnQgdGhhdCBjb3JyZXNwb25kcyB0byB0aGUgc29sdXRlJ3MgY29sb3IuXHJcbiAqIEEgcG9pbnRlciB0byB0aGUgcmlnaHQgb2YgdGhlIGJhciBpbmRpY2F0ZXMgdGhlIGNvbmNlbnRyYXRpb24gb24gdGhlIHNjYWxlLlxyXG4gKiBUaGUgcG9pbnRlciBpcyBjb2xvciBjb3JyZXNwb25kcyB0byBpdHMgcG9zaXRpb24gb24gdGhlIGJhci5cclxuICogT3JpZ2luIGlzIGF0IHRoZSB1cHBlci1sZWZ0IGNvcm5lciBvZiB0aGUgYmFyLlxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCBVdGlscyBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVXRpbHMuanMnO1xyXG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gJy4uLy4uLy4uLy4uL2tpdGUvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBTdHJpbmdVdGlscyBmcm9tICcuLi8uLi8uLi8uLi9waGV0Y29tbW9uL2pzL3V0aWwvU3RyaW5nVXRpbHMuanMnO1xyXG5pbXBvcnQgUGhldEZvbnQgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1BoZXRGb250LmpzJztcclxuaW1wb3J0IHsgQ29sb3IsIExpbmVhckdyYWRpZW50LCBOb2RlLCBQYXRoLCBSZWN0YW5nbGUsIFJpY2hUZXh0LCBUZXh0IH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IG1vbGFyaXR5IGZyb20gJy4uLy4uL21vbGFyaXR5LmpzJztcclxuaW1wb3J0IE1vbGFyaXR5U3RyaW5ncyBmcm9tICcuLi8uLi9Nb2xhcml0eVN0cmluZ3MuanMnO1xyXG5pbXBvcnQgTW9sYXJpdHlDb25zdGFudHMgZnJvbSAnLi4vTW9sYXJpdHlDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgRHVhbExhYmVsTm9kZSBmcm9tICcuL0R1YWxMYWJlbE5vZGUuanMnO1xyXG5cclxuY29uc3QgaGlnaFN0cmluZyA9IE1vbGFyaXR5U3RyaW5ncy5oaWdoO1xyXG5jb25zdCBtb2xhcml0eUxhYmVsU3RyaW5nID0gTW9sYXJpdHlTdHJpbmdzLm1vbGFyaXR5LmxhYmVsO1xyXG5jb25zdCBwYXR0ZXJuMFZhbHVlMVVuaXRzU3RyaW5nID0gTW9sYXJpdHlTdHJpbmdzLnBhdHRlcm5bICcwdmFsdWUnIF1bICcxdW5pdHMnIF07XHJcbmNvbnN0IHBhdHRlcm5QYXJlbnRoZXNlczBUZXh0U3RyaW5nID0gTW9sYXJpdHlTdHJpbmdzLnBhdHRlcm4ucGFyZW50aGVzZXNbICcwdGV4dCcgXTtcclxuY29uc3Qgc29sdXRpb25Db25jZW50cmF0aW9uU3RyaW5nID0gTW9sYXJpdHlTdHJpbmdzLnNvbHV0aW9uQ29uY2VudHJhdGlvbjtcclxuY29uc3QgdW5pdHNNb2xhcml0eVN0cmluZyA9IE1vbGFyaXR5U3RyaW5ncy51bml0cy5tb2xhcml0eTtcclxuY29uc3QgemVyb1N0cmluZyA9IE1vbGFyaXR5U3RyaW5ncy56ZXJvO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IFRJVExFX0ZPTlQgPSBuZXcgUGhldEZvbnQoIHsgc2l6ZTogMjQsIHdlaWdodDogJ2JvbGQnIH0gKTtcclxuY29uc3QgU1VCVElUTEVfRk9OVCA9IG5ldyBQaGV0Rm9udCggMjIgKTtcclxuY29uc3QgUkFOR0VfRk9OVCA9IG5ldyBQaGV0Rm9udCggMjAgKTtcclxuY29uc3QgVkFMVUVfRk9OVCA9IG5ldyBQaGV0Rm9udCggMjAgKTtcclxuY29uc3QgQVJST1dfTEVOR1RIID0gNTU7XHJcbmNvbnN0IEFSUk9XX0hFQURfSEVJR0hUID0gMC42ICogQVJST1dfTEVOR1RIO1xyXG5jb25zdCBBUlJPV19IRUFEX1dJRFRIID0gMC43ICogQVJST1dfTEVOR1RIO1xyXG5jb25zdCBBUlJPV19UQUlMX1dJRFRIID0gMC40ICogQVJST1dfTEVOR1RIO1xyXG5cclxuY2xhc3MgQ29uY2VudHJhdGlvbkRpc3BsYXkgZXh0ZW5kcyBOb2RlIHtcclxuICAvKipcclxuICAgKiBAcGFyYW0ge01hY3JvU29sdXRpb259IHNvbHV0aW9uXHJcbiAgICogQHBhcmFtIHtSYW5nZX0gY29uY2VudHJhdGlvblJhbmdlXHJcbiAgICogQHBhcmFtIHtQcm9wZXJ0eS48Ym9vbGVhbj59IHZhbHVlc1Zpc2libGVQcm9wZXJ0eVxyXG4gICAqIEBwYXJhbSB7RGltZW5zaW9uMn0gYmFyU2l6ZVxyXG4gICAqIEBwYXJhbSB7VGFuZGVtfSB0YW5kZW1cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvciggc29sdXRpb24sIGNvbmNlbnRyYXRpb25SYW5nZSwgdmFsdWVzVmlzaWJsZVByb3BlcnR5LCBiYXJTaXplLCB0YW5kZW0gKSB7XHJcblxyXG4gICAgc3VwZXIoIHtcclxuICAgICAgcGlja2FibGU6IGZhbHNlLFxyXG4gICAgICB0YW5kZW06IHRhbmRlbVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIG5vZGVzXHJcbiAgICBjb25zdCBtYXhUZXh0V2lkdGggPSAxNzU7IC8vIGNvbnN0cmFpbiB3aWR0aCBmb3IgaTE4biwgZGV0ZXJtaW5lZCBlbXBpcmljYWxseVxyXG5cclxuICAgIGNvbnN0IHRpdGxlVGV4dCA9IG5ldyBSaWNoVGV4dCggc29sdXRpb25Db25jZW50cmF0aW9uU3RyaW5nLCB7XHJcbiAgICAgIHJlcGxhY2VOZXdsaW5lczogdHJ1ZSxcclxuICAgICAgYWxpZ246ICdjZW50ZXInLFxyXG4gICAgICBmb250OiBUSVRMRV9GT05ULFxyXG4gICAgICBtYXhXaWR0aDogbWF4VGV4dFdpZHRoLFxyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICd0aXRsZVRleHQnIClcclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCBzdWJ0aXRsZVRleHQgPSBuZXcgVGV4dCggU3RyaW5nVXRpbHMuZm9ybWF0KCBwYXR0ZXJuUGFyZW50aGVzZXMwVGV4dFN0cmluZywgbW9sYXJpdHlMYWJlbFN0cmluZyApLCB7XHJcbiAgICAgIGZvbnQ6IFNVQlRJVExFX0ZPTlQsXHJcbiAgICAgIG1heFdpZHRoOiBtYXhUZXh0V2lkdGgsXHJcbiAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3N1YnRpdGxlVGV4dCcgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IG1heE5vZGUgPSBuZXcgRHVhbExhYmVsTm9kZSggVXRpbHMudG9GaXhlZCggY29uY2VudHJhdGlvblJhbmdlLm1heCwgTW9sYXJpdHlDb25zdGFudHMuUkFOR0VfREVDSU1BTF9QTEFDRVMgKSxcclxuICAgICAgaGlnaFN0cmluZywgdmFsdWVzVmlzaWJsZVByb3BlcnR5LCBSQU5HRV9GT05ULCB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnbWF4Tm9kZScgKSxcclxuICAgICAgeyBtYXhXaWR0aDogbWF4VGV4dFdpZHRoIH0gKTtcclxuXHJcbiAgICBjb25zdCBtaW5Ob2RlID0gbmV3IER1YWxMYWJlbE5vZGUoIFV0aWxzLnRvRml4ZWQoIGNvbmNlbnRyYXRpb25SYW5nZS5taW4sXHJcbiAgICAgIGNvbmNlbnRyYXRpb25SYW5nZS5taW4gPT09IDAgPyAwIDogTW9sYXJpdHlDb25zdGFudHMuUkFOR0VfREVDSU1BTF9QTEFDRVMgKSwgemVyb1N0cmluZyxcclxuICAgICAgdmFsdWVzVmlzaWJsZVByb3BlcnR5LCBSQU5HRV9GT05ULCB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnbWluTm9kZScgKSxcclxuICAgICAgeyBtYXhXaWR0aDogbWF4VGV4dFdpZHRoIH0gKTtcclxuXHJcbiAgICBjb25zdCBiYXJOb2RlID0gbmV3IFJlY3RhbmdsZSggMCwgMCwgYmFyU2l6ZS53aWR0aCwgYmFyU2l6ZS5oZWlnaHQsIHtcclxuICAgICAgc3Ryb2tlOiAnYmxhY2snLFxyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdiYXJOb2RlJyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3Qgc2F0dXJhdGVkQmFyTm9kZSA9IG5ldyBSZWN0YW5nbGUoIDAsIDAsIGJhclNpemUud2lkdGgsIGJhclNpemUuaGVpZ2h0LCB7XHJcbiAgICAgIHN0cm9rZTogJ2JsYWNrJyxcclxuICAgICAgZmlsbDogQ29sb3IuTElHSFRfR1JBWSxcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnc2F0dXJhdGVkQmFyTm9kZScgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IHBvaW50ZXJOb2RlID0gbmV3IFBvaW50ZXJOb2RlKCBzb2x1dGlvbiwgY29uY2VudHJhdGlvblJhbmdlLCBiYXJTaXplLCB2YWx1ZXNWaXNpYmxlUHJvcGVydHksXHJcbiAgICAgIHRhbmRlbS5jcmVhdGVUYW5kZW0oICdwb2ludGVyTm9kZScgKSApO1xyXG5cclxuICAgIC8vIHJlbmRlcmluZyBvcmRlclxyXG4gICAgdGhpcy5hZGRDaGlsZCggdGl0bGVUZXh0ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBzdWJ0aXRsZVRleHQgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIG1heE5vZGUgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIG1pbk5vZGUgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIGJhck5vZGUgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHNhdHVyYXRlZEJhck5vZGUgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHBvaW50ZXJOb2RlICk7XHJcblxyXG4gICAgLy8gbGF5b3V0XHJcbiAgICBiYXJOb2RlLnggPSAwO1xyXG4gICAgYmFyTm9kZS55ID0gMDtcclxuICAgIHNhdHVyYXRlZEJhck5vZGUueCA9IGJhck5vZGUueDtcclxuICAgIHNhdHVyYXRlZEJhck5vZGUueSA9IGJhck5vZGUueTtcclxuICAgIG1heE5vZGUuY2VudGVyWCA9IGJhck5vZGUuY2VudGVyWDtcclxuICAgIG1heE5vZGUuYm90dG9tID0gYmFyTm9kZS50b3AgLSA1O1xyXG4gICAgbWluTm9kZS5jZW50ZXJYID0gYmFyTm9kZS5jZW50ZXJYO1xyXG4gICAgbWluTm9kZS50b3AgPSBiYXJOb2RlLmJvdHRvbSArIDU7XHJcbiAgICBzdWJ0aXRsZVRleHQuY2VudGVyWCA9IGJhck5vZGUuY2VudGVyWDtcclxuICAgIHN1YnRpdGxlVGV4dC5ib3R0b20gPSBtYXhOb2RlLnRvcCAtIDg7XHJcbiAgICB0aXRsZVRleHQuY2VudGVyWCA9IGJhck5vZGUuY2VudGVyWDtcclxuICAgIHRpdGxlVGV4dC5ib3R0b20gPSBzdWJ0aXRsZVRleHQudG9wIC0gNTtcclxuXHJcbiAgICAvLyB3aGVuIHRoZSBzb2x1dGUgY2hhbmdlcy4uLlxyXG4gICAgc29sdXRpb24uc29sdXRlUHJvcGVydHkubGluayggc29sdXRlID0+IHtcclxuXHJcbiAgICAgIC8vIENvbG9yIHRoZSBiYXIgdXNpbmcgYSBncmFkaWVudCB0aGF0IGNvcnJlc3BvbmRzIHRvIHRoZSBzb2x1dGUncyBjb2xvciByYW5nZS5cclxuICAgICAgY29uc3QgY29uY2VudHJhdGlvblNjYWxlID0gTWF0aC5taW4oIDEsIHNvbHV0ZS5zYXR1cmF0ZWRDb25jZW50cmF0aW9uIC8gY29uY2VudHJhdGlvblJhbmdlLm1heCApO1xyXG4gICAgICBjb25zdCB5ID0gYmFyU2l6ZS5oZWlnaHQgLSAoIGJhclNpemUuaGVpZ2h0ICogY29uY2VudHJhdGlvblNjYWxlICk7XHJcbiAgICAgIGlmICggeSA8IDAgKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coIGBzb2x1dGUuc2F0dXJhdGVkQ29uY2VudHJhdGlvbj0ke3NvbHV0ZS5zYXR1cmF0ZWRDb25jZW50cmF0aW9ufSBjb25jZW50cmF0aW9uUmFuZ2UubWF4PSR7Y29uY2VudHJhdGlvblJhbmdlLm1heH1gICk7XHJcbiAgICAgIH1cclxuICAgICAgYmFyTm9kZS5maWxsID0gbmV3IExpbmVhckdyYWRpZW50KCAwLCB5LCAwLCBiYXJTaXplLmhlaWdodCApXHJcbiAgICAgICAgLmFkZENvbG9yU3RvcCggMCwgc29sdXRlLm1heENvbG9yIClcclxuICAgICAgICAuYWRkQ29sb3JTdG9wKCAxLCBzb2x1dGUubWluQ29sb3IgKTtcclxuXHJcbiAgICAgIC8vIENvdmVyIHRoZSBzYXR1cmF0ZWQgcG9ydGlvbiBvZiB0aGUgcmFuZ2Ugd2l0aCBhIGdyYXkgcmVjdGFuZ2xlLlxyXG4gICAgICBzYXR1cmF0ZWRCYXJOb2RlLnZpc2libGUgPSAoIHNvbHV0ZS5zYXR1cmF0ZWRDb25jZW50cmF0aW9uIDwgY29uY2VudHJhdGlvblJhbmdlLm1heCApO1xyXG4gICAgICBzYXR1cmF0ZWRCYXJOb2RlLnNldFJlY3QoIDAsIDAsIGJhclNpemUud2lkdGgsIHkgKTtcclxuICAgIH0gKTtcclxuICB9XHJcbn1cclxuXHJcbm1vbGFyaXR5LnJlZ2lzdGVyKCAnQ29uY2VudHJhdGlvbkRpc3BsYXknLCBDb25jZW50cmF0aW9uRGlzcGxheSApO1xyXG5cclxuY2xhc3MgUG9pbnRlck5vZGUgZXh0ZW5kcyBOb2RlIHtcclxuICAvKipcclxuICAgKiBAcGFyYW0ge01hY3JvU29sdXRpb259IHNvbHV0aW9uXHJcbiAgICogQHBhcmFtIHtSYW5nZX0gY29uY2VudHJhdGlvblJhbmdlXHJcbiAgICogQHBhcmFtIHtEaW1lbnNpb24yfSBiYXJTaXplXHJcbiAgICogQHBhcmFtIHtQcm9wZXJ0eS48Ym9vbGVhbj59IHZhbHVlc1Zpc2libGVQcm9wZXJ0eVxyXG4gICAqIEBwYXJhbSB7VGFuZGVtfSB0YW5kZW1cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvciggc29sdXRpb24sIGNvbmNlbnRyYXRpb25SYW5nZSwgYmFyU2l6ZSwgdmFsdWVzVmlzaWJsZVByb3BlcnR5LCB0YW5kZW0gKSB7XHJcblxyXG4gICAgc3VwZXIoIHsgdGFuZGVtOiB0YW5kZW0gfSApO1xyXG5cclxuICAgIGNvbnN0IHZhbHVlVGV4dCA9IG5ldyBUZXh0KCAnPycsIHtcclxuICAgICAgZm9udDogVkFMVUVfRk9OVCxcclxuICAgICAgbWF4V2lkdGg6IDc1LFxyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICd2YWx1ZVRleHQnIClcclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCB4ID0gYmFyU2l6ZS53aWR0aDtcclxuICAgIGNvbnN0IHkgPSAwO1xyXG4gICAgY29uc3QgYXJyb3dTaGFwZSA9IG5ldyBTaGFwZSgpXHJcbiAgICAgIC5tb3ZlVG8oIHgsIHkgKVxyXG4gICAgICAubGluZVRvKCB4ICsgQVJST1dfSEVBRF9IRUlHSFQsIHkgLSAoIEFSUk9XX0hFQURfV0lEVEggLyAyICkgKVxyXG4gICAgICAubGluZVRvKCB4ICsgQVJST1dfSEVBRF9IRUlHSFQsIHkgLSAoIEFSUk9XX1RBSUxfV0lEVEggLyAyICkgKVxyXG4gICAgICAubGluZVRvKCB4ICsgQVJST1dfTEVOR1RILCB5IC0gKCBBUlJPV19UQUlMX1dJRFRIIC8gMiApIClcclxuICAgICAgLmxpbmVUbyggeCArIEFSUk9XX0xFTkdUSCwgeSArICggQVJST1dfVEFJTF9XSURUSCAvIDIgKSApXHJcbiAgICAgIC5saW5lVG8oIHggKyBBUlJPV19IRUFEX0hFSUdIVCwgeSArICggQVJST1dfVEFJTF9XSURUSCAvIDIgKSApXHJcbiAgICAgIC5saW5lVG8oIHggKyBBUlJPV19IRUFEX0hFSUdIVCwgeSArICggQVJST1dfSEVBRF9XSURUSCAvIDIgKSApXHJcbiAgICAgIC5jbG9zZSgpO1xyXG5cclxuICAgIC8vIEBwcml2YXRlXHJcbiAgICB0aGlzLmFycm93Tm9kZSA9IG5ldyBQYXRoKCBhcnJvd1NoYXBlLCB7XHJcbiAgICAgIHN0cm9rZTogJ2JsYWNrJyxcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnYXJyb3dOb2RlJyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gcmVuZGVyaW5nIG9yZGVyXHJcbiAgICB0aGlzLmFkZENoaWxkKCB2YWx1ZVRleHQgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMuYXJyb3dOb2RlICk7XHJcblxyXG4gICAgLy8gc2hvdy9oaWRlIHZhbHVlXHJcbiAgICB2YWx1ZXNWaXNpYmxlUHJvcGVydHkubGluayggdmlzaWJsZSA9PiB7XHJcbiAgICAgIHZhbHVlVGV4dC5zZXRWaXNpYmxlKCB2aXNpYmxlICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gd2hlbiB0aGUgY29uY2VudHJhdGlvbiBvciBzb2x1dGUgY2hhbmdlcy4uLlxyXG4gICAgY29uc3QgdXBkYXRlID0gY29uY2VudHJhdGlvbiA9PiB7XHJcblxyXG4gICAgICAvLyB1cGRhdGUgdGhlIGFycm93XHJcbiAgICAgIHRoaXMuYXJyb3dOb2RlLnkgPSBiYXJTaXplLmhlaWdodCAtIFV0aWxzLmxpbmVhciggY29uY2VudHJhdGlvblJhbmdlLm1pbiwgY29uY2VudHJhdGlvblJhbmdlLm1heCwgMCwgYmFyU2l6ZS5oZWlnaHQsIGNvbmNlbnRyYXRpb24gKTtcclxuICAgICAgdGhpcy5hcnJvd05vZGUuZmlsbCA9IHNvbHV0aW9uLmdldENvbG9yKCk7XHJcblxyXG4gICAgICAvLyB1cGRhdGUgdGhlIHZhbHVlXHJcbiAgICAgIHZhbHVlVGV4dC5zdHJpbmcgPSBTdHJpbmdVdGlscy5mb3JtYXQoIHBhdHRlcm4wVmFsdWUxVW5pdHNTdHJpbmcsIFV0aWxzLnRvRml4ZWQoIGNvbmNlbnRyYXRpb24sIE1vbGFyaXR5Q29uc3RhbnRzLkNPTkNFTlRSQVRJT05fREVDSU1BTF9QTEFDRVMgKSwgdW5pdHNNb2xhcml0eVN0cmluZyApO1xyXG4gICAgICB2YWx1ZVRleHQubGVmdCA9IHRoaXMuYXJyb3dOb2RlLnJpZ2h0ICsgNTtcclxuICAgICAgdmFsdWVUZXh0LmNlbnRlclkgPSB0aGlzLmFycm93Tm9kZS5jZW50ZXJZO1xyXG4gICAgfTtcclxuICAgIHNvbHV0aW9uLmNvbmNlbnRyYXRpb25Qcm9wZXJ0eS5saW5rKCBjb25jZW50cmF0aW9uID0+IHtcclxuICAgICAgdXBkYXRlKCBjb25jZW50cmF0aW9uICk7XHJcbiAgICB9ICk7XHJcbiAgICBzb2x1dGlvbi5zb2x1dGVQcm9wZXJ0eS5saW5rKCAoKSA9PiB7XHJcbiAgICAgIHVwZGF0ZSggc29sdXRpb24uY29uY2VudHJhdGlvblByb3BlcnR5LnZhbHVlICk7XHJcbiAgICB9ICk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDb25jZW50cmF0aW9uRGlzcGxheTsiXSwibWFwcGlu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