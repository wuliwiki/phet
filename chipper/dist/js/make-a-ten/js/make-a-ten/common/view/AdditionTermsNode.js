// Copyright 2015-2023, University of Colorado Boulder

/**
 * Displays a partial addition formula (or fragments), like "7 + 2 =", where parts can be filled in, and layout
 * automatically adjusts.
 *
 * @author Sharfudeen Ashraf
 */

import Multilink from '../../../../../axon/js/Multilink.js';
import MathSymbols from '../../../../../scenery-phet/js/MathSymbols.js';
import PhetFont from '../../../../../scenery-phet/js/PhetFont.js';
import { HBox, Node, Rectangle, Text } from '../../../../../scenery/js/imports.js';
import makeATen from '../../../makeATen.js';
import ActiveTerm from '../../adding/model/ActiveTerm.js';
import MakeATenConstants from '../MakeATenConstants.js';

// constants
const EQUATION_FONT = new PhetFont({
  size: 45,
  weight: 'bold'
});
const STROKE_COLOR = '#000';
const LAYOUT_MULTIPLIER = 1 / 8; // Fraction offset of the text from the background's border

class AdditionTermsNode extends Node {
  /**
   * @param {AdditionTerms} additionTerms - Our model, contains information about the left/right and active terms
   * @param {boolean} highlightBorders - Whether there should be highlighted borders around the active term.
   */
  constructor(additionTerms, highlightBorders) {
    super();
    const backgroundOptions = {
      stroke: STROKE_COLOR,
      lineDash: [5, 5],
      lineWidth: 2,
      visible: highlightBorders
    };
    const leftNumberDisplayBackground = new Rectangle(0, 0, 100, 78, 10, 10, backgroundOptions);
    const rightNumberDisplayBackground = new Rectangle(0, 0, 100, 78, 10, 10, backgroundOptions);
    const plusText = new Text(MathSymbols.PLUS, {
      font: EQUATION_FONT,
      fill: MakeATenConstants.EQUATION_FILL
    });
    const equalsSignText = new Text(MathSymbols.EQUAL_TO, {
      font: EQUATION_FONT,
      fill: MakeATenConstants.EQUATION_FILL
    });
    const numberDisplayBox = new HBox({
      children: [leftNumberDisplayBackground, plusText, rightNumberDisplayBackground],
      spacing: 5,
      resize: false // since we toggle the stroke
    });

    const leftTermText = new Text('', {
      font: EQUATION_FONT,
      fill: MakeATenConstants.EQUATION_FILL
    });
    const rightTermText = new Text('', {
      font: EQUATION_FONT,
      fill: MakeATenConstants.EQUATION_FILL
    });
    this.addChild(numberDisplayBox);
    this.addChild(leftTermText);
    this.addChild(rightTermText);
    this.addChild(equalsSignText);
    function layout() {
      if (!rightTermText.bounds.isEmpty()) {
        equalsSignText.left = rightTermText.right + 20;
      }
      if (!leftTermText.bounds.isEmpty()) {
        leftTermText.right = leftNumberDisplayBackground.right - leftNumberDisplayBackground.width * LAYOUT_MULTIPLIER;
      }
    }
    additionTerms.leftTermProperty.link(term => {
      leftTermText.string = term ? term : '';
      layout();
    });
    additionTerms.rightTermProperty.link(term => {
      rightTermText.string = term ? term : '';
      layout();
    });

    // Add highlights if applicable
    if (highlightBorders) {
      Multilink.multilink([additionTerms.leftTermProperty, additionTerms.activeTermProperty], (leftTerm, activeTerm) => {
        leftNumberDisplayBackground.stroke = leftTerm === 0 || activeTerm === ActiveTerm.LEFT ? STROKE_COLOR : null;
        leftNumberDisplayBackground.fill = activeTerm === ActiveTerm.LEFT ? 'white' : null;
      });
      Multilink.multilink([additionTerms.rightTermProperty, additionTerms.activeTermProperty], (rightTerm, activeTerm) => {
        rightNumberDisplayBackground.stroke = rightTerm === 0 || activeTerm === ActiveTerm.RIGHT ? STROKE_COLOR : null;
        rightNumberDisplayBackground.fill = activeTerm === ActiveTerm.RIGHT ? 'white' : null;
      });
      Multilink.multilink([additionTerms.leftTermProperty, additionTerms.rightTermProperty, additionTerms.activeTermProperty], () => {
        equalsSignText.visible = additionTerms.hasBothTerms();
      });
    }

    // Center everything vertically
    const centerY = numberDisplayBox.centerY;
    leftTermText.centerY = centerY;
    rightTermText.centerY = centerY;
    equalsSignText.centerY = centerY;

    // Unchanging layout position of the right text node
    rightTermText.left = rightNumberDisplayBackground.left + rightNumberDisplayBackground.width * LAYOUT_MULTIPLIER;

    // @public
    this.getLeftAlignment = () => leftTermText.right;
    this.getRightAlignment = () => rightTermText.left;
  }
}
makeATen.register('AdditionTermsNode', AdditionTermsNode);
export default AdditionTermsNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNdWx0aWxpbmsiLCJNYXRoU3ltYm9scyIsIlBoZXRGb250IiwiSEJveCIsIk5vZGUiLCJSZWN0YW5nbGUiLCJUZXh0IiwibWFrZUFUZW4iLCJBY3RpdmVUZXJtIiwiTWFrZUFUZW5Db25zdGFudHMiLCJFUVVBVElPTl9GT05UIiwic2l6ZSIsIndlaWdodCIsIlNUUk9LRV9DT0xPUiIsIkxBWU9VVF9NVUxUSVBMSUVSIiwiQWRkaXRpb25UZXJtc05vZGUiLCJjb25zdHJ1Y3RvciIsImFkZGl0aW9uVGVybXMiLCJoaWdobGlnaHRCb3JkZXJzIiwiYmFja2dyb3VuZE9wdGlvbnMiLCJzdHJva2UiLCJsaW5lRGFzaCIsImxpbmVXaWR0aCIsInZpc2libGUiLCJsZWZ0TnVtYmVyRGlzcGxheUJhY2tncm91bmQiLCJyaWdodE51bWJlckRpc3BsYXlCYWNrZ3JvdW5kIiwicGx1c1RleHQiLCJQTFVTIiwiZm9udCIsImZpbGwiLCJFUVVBVElPTl9GSUxMIiwiZXF1YWxzU2lnblRleHQiLCJFUVVBTF9UTyIsIm51bWJlckRpc3BsYXlCb3giLCJjaGlsZHJlbiIsInNwYWNpbmciLCJyZXNpemUiLCJsZWZ0VGVybVRleHQiLCJyaWdodFRlcm1UZXh0IiwiYWRkQ2hpbGQiLCJsYXlvdXQiLCJib3VuZHMiLCJpc0VtcHR5IiwibGVmdCIsInJpZ2h0Iiwid2lkdGgiLCJsZWZ0VGVybVByb3BlcnR5IiwibGluayIsInRlcm0iLCJzdHJpbmciLCJyaWdodFRlcm1Qcm9wZXJ0eSIsIm11bHRpbGluayIsImFjdGl2ZVRlcm1Qcm9wZXJ0eSIsImxlZnRUZXJtIiwiYWN0aXZlVGVybSIsIkxFRlQiLCJyaWdodFRlcm0iLCJSSUdIVCIsImhhc0JvdGhUZXJtcyIsImNlbnRlclkiLCJnZXRMZWZ0QWxpZ25tZW50IiwiZ2V0UmlnaHRBbGlnbm1lbnQiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkFkZGl0aW9uVGVybXNOb2RlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE1LTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIERpc3BsYXlzIGEgcGFydGlhbCBhZGRpdGlvbiBmb3JtdWxhIChvciBmcmFnbWVudHMpLCBsaWtlIFwiNyArIDIgPVwiLCB3aGVyZSBwYXJ0cyBjYW4gYmUgZmlsbGVkIGluLCBhbmQgbGF5b3V0XHJcbiAqIGF1dG9tYXRpY2FsbHkgYWRqdXN0cy5cclxuICpcclxuICogQGF1dGhvciBTaGFyZnVkZWVuIEFzaHJhZlxyXG4gKi9cclxuXHJcbmltcG9ydCBNdWx0aWxpbmsgZnJvbSAnLi4vLi4vLi4vLi4vLi4vYXhvbi9qcy9NdWx0aWxpbmsuanMnO1xyXG5pbXBvcnQgTWF0aFN5bWJvbHMgZnJvbSAnLi4vLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL01hdGhTeW1ib2xzLmpzJztcclxuaW1wb3J0IFBoZXRGb250IGZyb20gJy4uLy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9QaGV0Rm9udC5qcyc7XHJcbmltcG9ydCB7IEhCb3gsIE5vZGUsIFJlY3RhbmdsZSwgVGV4dCB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBtYWtlQVRlbiBmcm9tICcuLi8uLi8uLi9tYWtlQVRlbi5qcyc7XHJcbmltcG9ydCBBY3RpdmVUZXJtIGZyb20gJy4uLy4uL2FkZGluZy9tb2RlbC9BY3RpdmVUZXJtLmpzJztcclxuaW1wb3J0IE1ha2VBVGVuQ29uc3RhbnRzIGZyb20gJy4uL01ha2VBVGVuQ29uc3RhbnRzLmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBFUVVBVElPTl9GT05UID0gbmV3IFBoZXRGb250KCB7IHNpemU6IDQ1LCB3ZWlnaHQ6ICdib2xkJyB9ICk7XHJcbmNvbnN0IFNUUk9LRV9DT0xPUiA9ICcjMDAwJztcclxuY29uc3QgTEFZT1VUX01VTFRJUExJRVIgPSAxIC8gODsgLy8gRnJhY3Rpb24gb2Zmc2V0IG9mIHRoZSB0ZXh0IGZyb20gdGhlIGJhY2tncm91bmQncyBib3JkZXJcclxuXHJcbmNsYXNzIEFkZGl0aW9uVGVybXNOb2RlIGV4dGVuZHMgTm9kZSB7XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtBZGRpdGlvblRlcm1zfSBhZGRpdGlvblRlcm1zIC0gT3VyIG1vZGVsLCBjb250YWlucyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgbGVmdC9yaWdodCBhbmQgYWN0aXZlIHRlcm1zXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBoaWdobGlnaHRCb3JkZXJzIC0gV2hldGhlciB0aGVyZSBzaG91bGQgYmUgaGlnaGxpZ2h0ZWQgYm9yZGVycyBhcm91bmQgdGhlIGFjdGl2ZSB0ZXJtLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBhZGRpdGlvblRlcm1zLCBoaWdobGlnaHRCb3JkZXJzICkge1xyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICBjb25zdCBiYWNrZ3JvdW5kT3B0aW9ucyA9IHtcclxuICAgICAgc3Ryb2tlOiBTVFJPS0VfQ09MT1IsXHJcbiAgICAgIGxpbmVEYXNoOiBbIDUsIDUgXSxcclxuICAgICAgbGluZVdpZHRoOiAyLFxyXG4gICAgICB2aXNpYmxlOiBoaWdobGlnaHRCb3JkZXJzXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGxlZnROdW1iZXJEaXNwbGF5QmFja2dyb3VuZCA9IG5ldyBSZWN0YW5nbGUoIDAsIDAsIDEwMCwgNzgsIDEwLCAxMCwgYmFja2dyb3VuZE9wdGlvbnMgKTtcclxuICAgIGNvbnN0IHJpZ2h0TnVtYmVyRGlzcGxheUJhY2tncm91bmQgPSBuZXcgUmVjdGFuZ2xlKCAwLCAwLCAxMDAsIDc4LCAxMCwgMTAsIGJhY2tncm91bmRPcHRpb25zICk7XHJcblxyXG4gICAgY29uc3QgcGx1c1RleHQgPSBuZXcgVGV4dCggTWF0aFN5bWJvbHMuUExVUywgeyBmb250OiBFUVVBVElPTl9GT05ULCBmaWxsOiBNYWtlQVRlbkNvbnN0YW50cy5FUVVBVElPTl9GSUxMIH0gKTtcclxuICAgIGNvbnN0IGVxdWFsc1NpZ25UZXh0ID0gbmV3IFRleHQoIE1hdGhTeW1ib2xzLkVRVUFMX1RPLCB7XHJcbiAgICAgIGZvbnQ6IEVRVUFUSU9OX0ZPTlQsXHJcbiAgICAgIGZpbGw6IE1ha2VBVGVuQ29uc3RhbnRzLkVRVUFUSU9OX0ZJTExcclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCBudW1iZXJEaXNwbGF5Qm94ID0gbmV3IEhCb3goIHtcclxuICAgICAgY2hpbGRyZW46IFsgbGVmdE51bWJlckRpc3BsYXlCYWNrZ3JvdW5kLCBwbHVzVGV4dCwgcmlnaHROdW1iZXJEaXNwbGF5QmFja2dyb3VuZCBdLFxyXG4gICAgICBzcGFjaW5nOiA1LFxyXG4gICAgICByZXNpemU6IGZhbHNlIC8vIHNpbmNlIHdlIHRvZ2dsZSB0aGUgc3Ryb2tlXHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgbGVmdFRlcm1UZXh0ID0gbmV3IFRleHQoICcnLCB7IGZvbnQ6IEVRVUFUSU9OX0ZPTlQsIGZpbGw6IE1ha2VBVGVuQ29uc3RhbnRzLkVRVUFUSU9OX0ZJTEwgfSApO1xyXG4gICAgY29uc3QgcmlnaHRUZXJtVGV4dCA9IG5ldyBUZXh0KCAnJywgeyBmb250OiBFUVVBVElPTl9GT05ULCBmaWxsOiBNYWtlQVRlbkNvbnN0YW50cy5FUVVBVElPTl9GSUxMIH0gKTtcclxuXHJcbiAgICB0aGlzLmFkZENoaWxkKCBudW1iZXJEaXNwbGF5Qm94ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBsZWZ0VGVybVRleHQgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHJpZ2h0VGVybVRleHQgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIGVxdWFsc1NpZ25UZXh0ICk7XHJcblxyXG4gICAgZnVuY3Rpb24gbGF5b3V0KCkge1xyXG4gICAgICBpZiAoICFyaWdodFRlcm1UZXh0LmJvdW5kcy5pc0VtcHR5KCkgKSB7XHJcbiAgICAgICAgZXF1YWxzU2lnblRleHQubGVmdCA9IHJpZ2h0VGVybVRleHQucmlnaHQgKyAyMDtcclxuICAgICAgfVxyXG4gICAgICBpZiAoICFsZWZ0VGVybVRleHQuYm91bmRzLmlzRW1wdHkoKSApIHtcclxuICAgICAgICBsZWZ0VGVybVRleHQucmlnaHQgPSBsZWZ0TnVtYmVyRGlzcGxheUJhY2tncm91bmQucmlnaHQgLSBsZWZ0TnVtYmVyRGlzcGxheUJhY2tncm91bmQud2lkdGggKiBMQVlPVVRfTVVMVElQTElFUjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFkZGl0aW9uVGVybXMubGVmdFRlcm1Qcm9wZXJ0eS5saW5rKCB0ZXJtID0+IHtcclxuICAgICAgbGVmdFRlcm1UZXh0LnN0cmluZyA9IHRlcm0gPyB0ZXJtIDogJyc7XHJcbiAgICAgIGxheW91dCgpO1xyXG4gICAgfSApO1xyXG5cclxuICAgIGFkZGl0aW9uVGVybXMucmlnaHRUZXJtUHJvcGVydHkubGluayggdGVybSA9PiB7XHJcbiAgICAgIHJpZ2h0VGVybVRleHQuc3RyaW5nID0gdGVybSA/IHRlcm0gOiAnJztcclxuICAgICAgbGF5b3V0KCk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gQWRkIGhpZ2hsaWdodHMgaWYgYXBwbGljYWJsZVxyXG4gICAgaWYgKCBoaWdobGlnaHRCb3JkZXJzICkge1xyXG4gICAgICBNdWx0aWxpbmsubXVsdGlsaW5rKCBbIGFkZGl0aW9uVGVybXMubGVmdFRlcm1Qcm9wZXJ0eSwgYWRkaXRpb25UZXJtcy5hY3RpdmVUZXJtUHJvcGVydHkgXSwgKCBsZWZ0VGVybSwgYWN0aXZlVGVybSApID0+IHtcclxuICAgICAgICBsZWZ0TnVtYmVyRGlzcGxheUJhY2tncm91bmQuc3Ryb2tlID0gKCBsZWZ0VGVybSA9PT0gMCB8fCBhY3RpdmVUZXJtID09PSBBY3RpdmVUZXJtLkxFRlQgKSA/IFNUUk9LRV9DT0xPUiA6IG51bGw7XHJcbiAgICAgICAgbGVmdE51bWJlckRpc3BsYXlCYWNrZ3JvdW5kLmZpbGwgPSBhY3RpdmVUZXJtID09PSBBY3RpdmVUZXJtLkxFRlQgPyAnd2hpdGUnIDogbnVsbDtcclxuICAgICAgfSApO1xyXG4gICAgICBNdWx0aWxpbmsubXVsdGlsaW5rKCBbIGFkZGl0aW9uVGVybXMucmlnaHRUZXJtUHJvcGVydHksIGFkZGl0aW9uVGVybXMuYWN0aXZlVGVybVByb3BlcnR5IF0sICggcmlnaHRUZXJtLCBhY3RpdmVUZXJtICkgPT4ge1xyXG4gICAgICAgIHJpZ2h0TnVtYmVyRGlzcGxheUJhY2tncm91bmQuc3Ryb2tlID0gKCByaWdodFRlcm0gPT09IDAgfHwgYWN0aXZlVGVybSA9PT0gQWN0aXZlVGVybS5SSUdIVCApID8gU1RST0tFX0NPTE9SIDogbnVsbDtcclxuICAgICAgICByaWdodE51bWJlckRpc3BsYXlCYWNrZ3JvdW5kLmZpbGwgPSBhY3RpdmVUZXJtID09PSBBY3RpdmVUZXJtLlJJR0hUID8gJ3doaXRlJyA6IG51bGw7XHJcbiAgICAgIH0gKTtcclxuXHJcbiAgICAgIE11bHRpbGluay5tdWx0aWxpbmsoIFsgYWRkaXRpb25UZXJtcy5sZWZ0VGVybVByb3BlcnR5LCBhZGRpdGlvblRlcm1zLnJpZ2h0VGVybVByb3BlcnR5LCBhZGRpdGlvblRlcm1zLmFjdGl2ZVRlcm1Qcm9wZXJ0eSBdLCAoKSA9PiB7XHJcbiAgICAgICAgZXF1YWxzU2lnblRleHQudmlzaWJsZSA9IGFkZGl0aW9uVGVybXMuaGFzQm90aFRlcm1zKCk7XHJcbiAgICAgIH0gKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDZW50ZXIgZXZlcnl0aGluZyB2ZXJ0aWNhbGx5XHJcbiAgICBjb25zdCBjZW50ZXJZID0gbnVtYmVyRGlzcGxheUJveC5jZW50ZXJZO1xyXG4gICAgbGVmdFRlcm1UZXh0LmNlbnRlclkgPSBjZW50ZXJZO1xyXG4gICAgcmlnaHRUZXJtVGV4dC5jZW50ZXJZID0gY2VudGVyWTtcclxuICAgIGVxdWFsc1NpZ25UZXh0LmNlbnRlclkgPSBjZW50ZXJZO1xyXG5cclxuICAgIC8vIFVuY2hhbmdpbmcgbGF5b3V0IHBvc2l0aW9uIG9mIHRoZSByaWdodCB0ZXh0IG5vZGVcclxuICAgIHJpZ2h0VGVybVRleHQubGVmdCA9IHJpZ2h0TnVtYmVyRGlzcGxheUJhY2tncm91bmQubGVmdCArIHJpZ2h0TnVtYmVyRGlzcGxheUJhY2tncm91bmQud2lkdGggKiBMQVlPVVRfTVVMVElQTElFUjtcclxuXHJcbiAgICAvLyBAcHVibGljXHJcbiAgICB0aGlzLmdldExlZnRBbGlnbm1lbnQgPSAoKSA9PiBsZWZ0VGVybVRleHQucmlnaHQ7XHJcbiAgICB0aGlzLmdldFJpZ2h0QWxpZ25tZW50ID0gKCkgPT4gcmlnaHRUZXJtVGV4dC5sZWZ0O1xyXG4gIH1cclxufVxyXG5cclxubWFrZUFUZW4ucmVnaXN0ZXIoICdBZGRpdGlvblRlcm1zTm9kZScsIEFkZGl0aW9uVGVybXNOb2RlICk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBZGRpdGlvblRlcm1zTm9kZTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxTQUFTLE1BQU0scUNBQXFDO0FBQzNELE9BQU9DLFdBQVcsTUFBTSwrQ0FBK0M7QUFDdkUsT0FBT0MsUUFBUSxNQUFNLDRDQUE0QztBQUNqRSxTQUFTQyxJQUFJLEVBQUVDLElBQUksRUFBRUMsU0FBUyxFQUFFQyxJQUFJLFFBQVEsc0NBQXNDO0FBQ2xGLE9BQU9DLFFBQVEsTUFBTSxzQkFBc0I7QUFDM0MsT0FBT0MsVUFBVSxNQUFNLGtDQUFrQztBQUN6RCxPQUFPQyxpQkFBaUIsTUFBTSx5QkFBeUI7O0FBRXZEO0FBQ0EsTUFBTUMsYUFBYSxHQUFHLElBQUlSLFFBQVEsQ0FBRTtFQUFFUyxJQUFJLEVBQUUsRUFBRTtFQUFFQyxNQUFNLEVBQUU7QUFBTyxDQUFFLENBQUM7QUFDbEUsTUFBTUMsWUFBWSxHQUFHLE1BQU07QUFDM0IsTUFBTUMsaUJBQWlCLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDOztBQUVqQyxNQUFNQyxpQkFBaUIsU0FBU1gsSUFBSSxDQUFDO0VBQ25DO0FBQ0Y7QUFDQTtBQUNBO0VBQ0VZ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