// Copyright 2014-2022, University of Colorado Boulder

/**
 * This control allows the user to view and change the mass of certain Body instances, which also changes the radius.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Aaron Davis (PhET Interactive Simulations)
 */

import Dimension2 from '../../../../dot/js/Dimension2.js';
import Range from '../../../../dot/js/Range.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { Text } from '../../../../scenery/js/imports.js';
import HSlider from '../../../../sun/js/HSlider.js';
import gravityAndOrbits from '../../gravityAndOrbits.js';
import GravityAndOrbitsColors from '../GravityAndOrbitsColors.js';
// constants
const SNAP_TOLERANCE = 0.03;
const THUMB_SIZE = new Dimension2(14, 24);
const NUM_TICKS = 4;
const WIDTH = 180;
const SPACING = (WIDTH - NUM_TICKS) / (NUM_TICKS - 1);
class MassSlider extends HSlider {
  constructor(body, min, max, defaultLabelValue, valueLabel, tandem) {
    super(body.massProperty, new Range(min, max), {
      trackSize: new Dimension2(WIDTH, 1),
      thumbSize: THUMB_SIZE,
      thumbTouchAreaXDilation: THUMB_SIZE.width,
      thumbTouchAreaYDilation: THUMB_SIZE.height,
      trackStroke: GravityAndOrbitsColors.foregroundProperty,
      // ticks
      tickLabelSpacing: 3,
      majorTickLength: 13,
      majorTickStroke: GravityAndOrbitsColors.foregroundProperty,
      // custom thumb
      thumbFill: '#98BECF',
      thumbFillHighlighted: '#B3D3E2',
      // snap to default value if close
      constrainValue: mass => Math.abs(mass - defaultLabelValue) / defaultLabelValue < SNAP_TOLERANCE ? defaultLabelValue : mass,
      tandem: tandem
    });

    // add ticks and labels
    const defaultLabel = new Text(valueLabel, {
      top: 10,
      centerX: SPACING,
      font: new PhetFont(13),
      fill: GravityAndOrbitsColors.foregroundProperty,
      maxWidth: 80
    });

    // create a label for the default value
    // @param - string for the label text
    const createNumberLabel = value => new Text(value, {
      font: new PhetFont(13),
      fill: GravityAndOrbitsColors.foregroundProperty,
      maxWidth: 110
    });
    const labels = [createNumberLabel('0.5'), defaultLabel, createNumberLabel('1.5'), createNumberLabel('2.0')];
    for (let i = 0; i < labels.length; i++) {
      const tickValue = (i + 1) / labels.length * max;
      this.addMajorTick(tickValue, labels[i]);
    }

    // setting the diameter property took place in Body.setMass() in the Java version, but doesn't work here since
    // the mass itself is set by the slider in this case.
    // derived from: density = mass/volume, and volume = 4/3 pi r r r
    const massListener = mass => {
      const radius = Math.pow(3 * mass / 4 / Math.PI / body.density, 1 / 3);
      body.diameterProperty.set(2 * radius);
    };
    body.massProperty.link(massListener);
  }
}
gravityAndOrbits.register('MassSlider', MassSlider);
export default MassSlider;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEaW1lbnNpb24yIiwiUmFuZ2UiLCJQaGV0Rm9udCIsIlRleHQiLCJIU2xpZGVyIiwiZ3Jhdml0eUFuZE9yYml0cyIsIkdyYXZpdHlBbmRPcmJpdHNDb2xvcnMiLCJTTkFQX1RPTEVSQU5DRSIsIlRIVU1CX1NJWkUiLCJOVU1fVElDS1MiLCJXSURUSCIsIlNQQUNJTkciLCJNYXNzU2xpZGVyIiwiY29uc3RydWN0b3IiLCJib2R5IiwibWluIiwibWF4IiwiZGVmYXVsdExhYmVsVmFsdWUiLCJ2YWx1ZUxhYmVsIiwidGFuZGVtIiwibWFzc1Byb3BlcnR5IiwidHJhY2tTaXplIiwidGh1bWJTaXplIiwidGh1bWJUb3VjaEFyZWFYRGlsYXRpb24iLCJ3aWR0aCIsInRodW1iVG91Y2hBcmVhWURpbGF0aW9uIiwiaGVpZ2h0IiwidHJhY2tTdHJva2UiLCJmb3JlZ3JvdW5kUHJvcGVydHkiLCJ0aWNrTGFiZWxTcGFjaW5nIiwibWFqb3JUaWNrTGVuZ3RoIiwibWFqb3JUaWNrU3Ryb2tlIiwidGh1bWJGaWxsIiwidGh1bWJGaWxsSGlnaGxpZ2h0ZWQiLCJjb25zdHJhaW5WYWx1ZSIsIm1hc3MiLCJNYXRoIiwiYWJzIiwiZGVmYXVsdExhYmVsIiwidG9wIiwiY2VudGVyWCIsImZvbnQiLCJmaWxsIiwibWF4V2lkdGgiLCJjcmVhdGVOdW1iZXJMYWJlbCIsInZhbHVlIiwibGFiZWxzIiwiaSIsImxlbmd0aCIsInRpY2tWYWx1ZSIsImFkZE1ham9yVGljayIsIm1hc3NMaXN0ZW5lciIsInJhZGl1cyIsInBvdyIsIlBJIiwiZGVuc2l0eSIsImRpYW1ldGVyUHJvcGVydHkiLCJzZXQiLCJsaW5rIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJNYXNzU2xpZGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE0LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFRoaXMgY29udHJvbCBhbGxvd3MgdGhlIHVzZXIgdG8gdmlldyBhbmQgY2hhbmdlIHRoZSBtYXNzIG9mIGNlcnRhaW4gQm9keSBpbnN0YW5jZXMsIHdoaWNoIGFsc28gY2hhbmdlcyB0aGUgcmFkaXVzLlxyXG4gKlxyXG4gKiBAYXV0aG9yIFNhbSBSZWlkIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxyXG4gKiBAYXV0aG9yIEFhcm9uIERhdmlzIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxyXG4gKi9cclxuXHJcbmltcG9ydCBUUmVhZE9ubHlQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1RSZWFkT25seVByb3BlcnR5LmpzJztcclxuaW1wb3J0IERpbWVuc2lvbjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL0RpbWVuc2lvbjIuanMnO1xyXG5pbXBvcnQgUmFuZ2UgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1JhbmdlLmpzJztcclxuaW1wb3J0IFBoZXRGb250IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9QaGV0Rm9udC5qcyc7XHJcbmltcG9ydCB7IFRleHQgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgSFNsaWRlciBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvSFNsaWRlci5qcyc7XHJcbmltcG9ydCBUYW5kZW0gZnJvbSAnLi4vLi4vLi4vLi4vdGFuZGVtL2pzL1RhbmRlbS5qcyc7XHJcbmltcG9ydCBncmF2aXR5QW5kT3JiaXRzIGZyb20gJy4uLy4uL2dyYXZpdHlBbmRPcmJpdHMuanMnO1xyXG5pbXBvcnQgR3Jhdml0eUFuZE9yYml0c0NvbG9ycyBmcm9tICcuLi9HcmF2aXR5QW5kT3JiaXRzQ29sb3JzLmpzJztcclxuaW1wb3J0IEJvZHkgZnJvbSAnLi4vbW9kZWwvQm9keS5qcyc7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgU05BUF9UT0xFUkFOQ0UgPSAwLjAzO1xyXG5jb25zdCBUSFVNQl9TSVpFID0gbmV3IERpbWVuc2lvbjIoIDE0LCAyNCApO1xyXG5jb25zdCBOVU1fVElDS1MgPSA0O1xyXG5jb25zdCBXSURUSCA9IDE4MDtcclxuY29uc3QgU1BBQ0lORyA9ICggV0lEVEggLSBOVU1fVElDS1MgKSAvICggTlVNX1RJQ0tTIC0gMSApO1xyXG5cclxuY2xhc3MgTWFzc1NsaWRlciBleHRlbmRzIEhTbGlkZXIge1xyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggYm9keTogQm9keSwgbWluOiBudW1iZXIsIG1heDogbnVtYmVyLCBkZWZhdWx0TGFiZWxWYWx1ZTogbnVtYmVyLCB2YWx1ZUxhYmVsOiBUUmVhZE9ubHlQcm9wZXJ0eTxzdHJpbmc+LCB0YW5kZW06IFRhbmRlbSApIHtcclxuXHJcbiAgICBzdXBlciggYm9keS5tYXNzUHJvcGVydHksIG5ldyBSYW5nZSggbWluLCBtYXggKSwge1xyXG4gICAgICB0cmFja1NpemU6IG5ldyBEaW1lbnNpb24yKCBXSURUSCwgMSApLFxyXG4gICAgICB0aHVtYlNpemU6IFRIVU1CX1NJWkUsXHJcbiAgICAgIHRodW1iVG91Y2hBcmVhWERpbGF0aW9uOiBUSFVNQl9TSVpFLndpZHRoLFxyXG4gICAgICB0aHVtYlRvdWNoQXJlYVlEaWxhdGlvbjogVEhVTUJfU0laRS5oZWlnaHQsXHJcbiAgICAgIHRyYWNrU3Ryb2tlOiBHcmF2aXR5QW5kT3JiaXRzQ29sb3JzLmZvcmVncm91bmRQcm9wZXJ0eSxcclxuXHJcbiAgICAgIC8vIHRpY2tzXHJcbiAgICAgIHRpY2tMYWJlbFNwYWNpbmc6IDMsXHJcbiAgICAgIG1ham9yVGlja0xlbmd0aDogMTMsXHJcbiAgICAgIG1ham9yVGlja1N0cm9rZTogR3Jhdml0eUFuZE9yYml0c0NvbG9ycy5mb3JlZ3JvdW5kUHJvcGVydHksXHJcblxyXG4gICAgICAvLyBjdXN0b20gdGh1bWJcclxuICAgICAgdGh1bWJGaWxsOiAnIzk4QkVDRicsXHJcbiAgICAgIHRodW1iRmlsbEhpZ2hsaWdodGVkOiAnI0IzRDNFMicsXHJcblxyXG4gICAgICAvLyBzbmFwIHRvIGRlZmF1bHQgdmFsdWUgaWYgY2xvc2VcclxuICAgICAgY29uc3RyYWluVmFsdWU6ICggbWFzczogbnVtYmVyICkgPT4gTWF0aC5hYnMoIG1hc3MgLSBkZWZhdWx0TGFiZWxWYWx1ZSApIC8gZGVmYXVsdExhYmVsVmFsdWUgPCBTTkFQX1RPTEVSQU5DRSA/IGRlZmF1bHRMYWJlbFZhbHVlIDogbWFzcyxcclxuICAgICAgdGFuZGVtOiB0YW5kZW1cclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBhZGQgdGlja3MgYW5kIGxhYmVsc1xyXG4gICAgY29uc3QgZGVmYXVsdExhYmVsID0gbmV3IFRleHQoIHZhbHVlTGFiZWwsIHtcclxuICAgICAgdG9wOiAxMCxcclxuICAgICAgY2VudGVyWDogU1BBQ0lORyxcclxuICAgICAgZm9udDogbmV3IFBoZXRGb250KCAxMyApLFxyXG4gICAgICBmaWxsOiBHcmF2aXR5QW5kT3JiaXRzQ29sb3JzLmZvcmVncm91bmRQcm9wZXJ0eSxcclxuICAgICAgbWF4V2lkdGg6IDgwXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gY3JlYXRlIGEgbGFiZWwgZm9yIHRoZSBkZWZhdWx0IHZhbHVlXHJcbiAgICAvLyBAcGFyYW0gLSBzdHJpbmcgZm9yIHRoZSBsYWJlbCB0ZXh0XHJcbiAgICBjb25zdCBjcmVhdGVOdW1iZXJMYWJlbCA9ICggdmFsdWU6IHN0cmluZyApID0+IG5ldyBUZXh0KCB2YWx1ZSwge1xyXG4gICAgICBmb250OiBuZXcgUGhldEZvbnQoIDEzICksXHJcbiAgICAgIGZpbGw6IEdyYXZpdHlBbmRPcmJpdHNDb2xvcnMuZm9yZWdyb3VuZFByb3BlcnR5LFxyXG4gICAgICBtYXhXaWR0aDogMTEwXHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgbGFiZWxzID0gWyBjcmVhdGVOdW1iZXJMYWJlbCggJzAuNScgKSwgZGVmYXVsdExhYmVsLCBjcmVhdGVOdW1iZXJMYWJlbCggJzEuNScgKSwgY3JlYXRlTnVtYmVyTGFiZWwoICcyLjAnICkgXTtcclxuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IGxhYmVscy5sZW5ndGg7IGkrKyApIHtcclxuICAgICAgY29uc3QgdGlja1ZhbHVlID0gKCBpICsgMSApIC8gbGFiZWxzLmxlbmd0aCAqIG1heDtcclxuICAgICAgdGhpcy5hZGRNYWpvclRpY2soIHRpY2tWYWx1ZSwgbGFiZWxzWyBpIF0gKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBzZXR0aW5nIHRoZSBkaWFtZXRlciBwcm9wZXJ0eSB0b29rIHBsYWNlIGluIEJvZHkuc2V0TWFzcygpIGluIHRoZSBKYXZhIHZlcnNpb24sIGJ1dCBkb2Vzbid0IHdvcmsgaGVyZSBzaW5jZVxyXG4gICAgLy8gdGhlIG1hc3MgaXRzZWxmIGlzIHNldCBieSB0aGUgc2xpZGVyIGluIHRoaXMgY2FzZS5cclxuICAgIC8vIGRlcml2ZWQgZnJvbTogZGVuc2l0eSA9IG1hc3Mvdm9sdW1lLCBhbmQgdm9sdW1lID0gNC8zIHBpIHIgciByXHJcbiAgICBjb25zdCBtYXNzTGlzdGVuZXIgPSAoIG1hc3M6IG51bWJlciApID0+IHtcclxuICAgICAgY29uc3QgcmFkaXVzID0gTWF0aC5wb3coIDMgKiBtYXNzIC8gNCAvIE1hdGguUEkgLyBib2R5LmRlbnNpdHksIDEgLyAzICk7XHJcbiAgICAgIGJvZHkuZGlhbWV0ZXJQcm9wZXJ0eS5zZXQoIDIgKiByYWRpdXMgKTtcclxuICAgIH07XHJcbiAgICBib2R5Lm1hc3NQcm9wZXJ0eS5saW5rKCBtYXNzTGlzdGVuZXIgKTtcclxuICB9XHJcbn1cclxuXHJcbmdyYXZpdHlBbmRPcmJpdHMucmVnaXN0ZXIoICdNYXNzU2xpZGVyJywgTWFzc1NsaWRlciApO1xyXG5leHBvcnQgZGVmYXVsdCBNYXNzU2xpZGVyOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBLE9BQU9BLFVBQVUsTUFBTSxrQ0FBa0M7QUFDekQsT0FBT0MsS0FBSyxNQUFNLDZCQUE2QjtBQUMvQyxPQUFPQyxRQUFRLE1BQU0s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