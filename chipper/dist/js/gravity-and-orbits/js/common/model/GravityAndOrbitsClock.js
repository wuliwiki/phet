// Copyright 2014-2022, University of Colorado Boulder

/**
 * The clock for this simulation.
 * The simulation time change (dt) on each clock tick is constant,
 * regardless of when (in wall time) the ticks actually happen. This class works together with RewindableProperty,
 * which has to know whether the simulation is stepping to know whether to store a "save point" which can be restored.
 *
 * @author Aaron Davis (PhET Interactive Simulations)
 */

import BooleanProperty from '../../../../axon/js/BooleanProperty.js';
import EventTimer from '../../../../phet-core/js/EventTimer.js';
import gravityAndOrbits from '../../gravityAndOrbits.js';
import RewindableProperty from './RewindableProperty.js';
import NumberIO from '../../../../tandem/js/types/NumberIO.js';
// constants
// frames per second, was 25 in the Java version but changed to 60 for consistency and smoothness
const CLOCK_FRAME_RATE = 60;

// was 1 in the Java version, but changed to account for modification of CLOCK_FRAME_RATE
const DAYS_PER_TICK = 1 / (60 / 25);
const SECONDS_PER_DAY = 86400;
const DEFAULT_DT = DAYS_PER_TICK * SECONDS_PER_DAY;
class GravityAndOrbitsClock {
  /**
   * @param changeRewindValueProperty
   * @param baseDTValue (multiplied by scale to obtain true dt)
   * @param steppingProperty
   * @param timeSpeedProperty
   * @param sceneTandem
   * @param tandem
   */
  constructor(changeRewindValueProperty, baseDTValue, steppingProperty, timeSpeedProperty, sceneTandem, tandem) {
    // (read-only)
    this.baseDTValue = baseDTValue;
    this.isRunningProperty = new BooleanProperty(false, {
      tandem: tandem.createTandem('isRunningProperty'),
      phetioDocumentation: `This value is true when '${sceneTandem.phetioID}' is the selected scene and the play/pause button is in play mode. (It remains true even if the user switches screens. Use in combination with '${phet.joist.sim.selectedScreenProperty.tandem.phetioID}'.)`,
      phetioReadOnly: true
    });
    this.timeProperty = new RewindableProperty(changeRewindValueProperty, 0, {
      tandem: tandem.createTandem('timeProperty'),
      phetioHighFrequency: true,
      units: 's',
      phetioReadOnly: true,
      phetioValueType: NumberIO
    });
    this.dt = baseDTValue;
    this.steppingProperty = steppingProperty;
    this.timeSpeedProperty = timeSpeedProperty;

    // Fraction between old state=0 and new state=1
    this.interpolationRatio = 1;
    this.eventTimer = null;
  }

  /**
   * Step the clock while paused, ignoring the current play speed and stepping by 1 / CLOCK_FRAME_RATE.
   */
  stepClockWhilePaused() {
    // See RewindableProperty which has to know whether the clock is running, paused, stepping, rewinding for
    // application specific logic
    this.steppingProperty.set(true);

    // Uses 1x dt for replicable trajectories, see https://github.com/phetsims/gravity-and-orbits/issues/253
    this.step(1 / CLOCK_FRAME_RATE);
    this.steppingProperty.set(false);
  }

  /**
   * Set whether or not the model should be running.
   *
   * @param  {boolean} running
   */
  setRunning(running) {
    this.isRunningProperty.set(running);
  }

  /**
   * Set the clock time.
   *
   * @param  {number} time description
   */
  setSimulationTime(time) {
    this.timeProperty.set(time);
  }
  getSimulationTime() {
    return this.timeProperty.get();
  }
  resetSimulationTime() {
    this.timeProperty.reset();
  }

  /**
   * Add an event callback to the event timer, called every time the animation frame changes.
   *
   * @param  {function} stepFunction
   */
  addEventTimer(stepFunction) {
    assert && assert(!this.eventTimer, 'there can be only one event timer');
    this.eventTimer = new EventTimer(new EventTimer.ConstantEventModel(CLOCK_FRAME_RATE), stepFunction);
  }

  /**
   * Step the simulation by dt
   *
   * @param  {number} dt
   */
  step(dt) {
    if (this.eventTimer) {
      this.eventTimer.step(dt);
      this.interpolationRatio = this.eventTimer.getRatio();
    }
  }

  // statics
  static SECONDS_PER_DAY = SECONDS_PER_DAY;
  static DEFAULT_DT = DEFAULT_DT;
}
gravityAndOrbits.register('GravityAndOrbitsClock', GravityAndOrbitsClock);
export default GravityAndOrbitsClock;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb29sZWFuUHJvcGVydHkiLCJFdmVudFRpbWVyIiwiZ3Jhdml0eUFuZE9yYml0cyIsIlJld2luZGFibGVQcm9wZXJ0eSIsIk51bWJlcklPIiwiQ0xPQ0tfRlJBTUVfUkFURSIsIkRBWVNfUEVSX1RJQ0siLCJTRUNPTkRTX1BFUl9EQVkiLCJERUZBVUxUX0RUIiwiR3Jhdml0eUFuZE9yYml0c0Nsb2NrIiwiY29uc3RydWN0b3IiLCJjaGFuZ2VSZXdpbmRWYWx1ZVByb3BlcnR5IiwiYmFzZURUVmFsdWUiLCJzdGVwcGluZ1Byb3BlcnR5IiwidGltZVNwZWVkUHJvcGVydHkiLCJzY2VuZVRhbmRlbSIsInRhbmRlbSIsImlzUnVubmluZ1Byb3BlcnR5IiwiY3JlYXRlVGFuZGVtIiwicGhldGlvRG9jdW1lbnRhdGlvbiIsInBoZXRpb0lEIiwicGhldCIsImpvaXN0Iiwic2ltIiwic2VsZWN0ZWRTY3JlZW5Qcm9wZXJ0eSIsInBoZXRpb1JlYWRPbmx5IiwidGltZVByb3BlcnR5IiwicGhldGlvSGlnaEZyZXF1ZW5jeSIsInVuaXRzIiwicGhldGlvVmFsdWVUeXBlIiwiZHQiLCJpbnRlcnBvbGF0aW9uUmF0aW8iLCJldmVudFRpbWVyIiwic3RlcENsb2NrV2hpbGVQYXVzZWQiLCJzZXQiLCJzdGVwIiwic2V0UnVubmluZyIsInJ1bm5pbmciLCJzZXRTaW11bGF0aW9uVGltZSIsInRpbWUiLCJnZXRTaW11bGF0aW9uVGltZSIsImdldCIsInJlc2V0U2ltdWxhdGlvblRpbWUiLCJyZXNldCIsImFkZEV2ZW50VGltZXIiLCJzdGVwRnVuY3Rpb24iLCJhc3NlcnQiLCJDb25zdGFudEV2ZW50TW9kZWwiLCJnZXRSYXRpbyIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiR3Jhdml0eUFuZE9yYml0c0Nsb2NrLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE0LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFRoZSBjbG9jayBmb3IgdGhpcyBzaW11bGF0aW9uLlxyXG4gKiBUaGUgc2ltdWxhdGlvbiB0aW1lIGNoYW5nZSAoZHQpIG9uIGVhY2ggY2xvY2sgdGljayBpcyBjb25zdGFudCxcclxuICogcmVnYXJkbGVzcyBvZiB3aGVuIChpbiB3YWxsIHRpbWUpIHRoZSB0aWNrcyBhY3R1YWxseSBoYXBwZW4uIFRoaXMgY2xhc3Mgd29ya3MgdG9nZXRoZXIgd2l0aCBSZXdpbmRhYmxlUHJvcGVydHksXHJcbiAqIHdoaWNoIGhhcyB0byBrbm93IHdoZXRoZXIgdGhlIHNpbXVsYXRpb24gaXMgc3RlcHBpbmcgdG8ga25vdyB3aGV0aGVyIHRvIHN0b3JlIGEgXCJzYXZlIHBvaW50XCIgd2hpY2ggY2FuIGJlIHJlc3RvcmVkLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEFhcm9uIERhdmlzIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxyXG4gKi9cclxuXHJcbmltcG9ydCBCb29sZWFuUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9Cb29sZWFuUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgRXZlbnRUaW1lciBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvRXZlbnRUaW1lci5qcyc7XHJcbmltcG9ydCBncmF2aXR5QW5kT3JiaXRzIGZyb20gJy4uLy4uL2dyYXZpdHlBbmRPcmJpdHMuanMnO1xyXG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uLy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xyXG5pbXBvcnQgVGltZVNwZWVkIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9UaW1lU3BlZWQuanMnO1xyXG5pbXBvcnQgRW51bWVyYXRpb25Qcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL0VudW1lcmF0aW9uUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgUmV3aW5kYWJsZVByb3BlcnR5IGZyb20gJy4vUmV3aW5kYWJsZVByb3BlcnR5LmpzJztcclxuaW1wb3J0IE51bWJlcklPIGZyb20gJy4uLy4uLy4uLy4uL3RhbmRlbS9qcy90eXBlcy9OdW1iZXJJTy5qcyc7XHJcbmltcG9ydCBUUmVhZE9ubHlQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1RSZWFkT25seVByb3BlcnR5LmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG4vLyBmcmFtZXMgcGVyIHNlY29uZCwgd2FzIDI1IGluIHRoZSBKYXZhIHZlcnNpb24gYnV0IGNoYW5nZWQgdG8gNjAgZm9yIGNvbnNpc3RlbmN5IGFuZCBzbW9vdGhuZXNzXHJcbmNvbnN0IENMT0NLX0ZSQU1FX1JBVEUgPSA2MDtcclxuXHJcbi8vIHdhcyAxIGluIHRoZSBKYXZhIHZlcnNpb24sIGJ1dCBjaGFuZ2VkIHRvIGFjY291bnQgZm9yIG1vZGlmaWNhdGlvbiBvZiBDTE9DS19GUkFNRV9SQVRFXHJcbmNvbnN0IERBWVNfUEVSX1RJQ0sgPSAxIC8gKCA2MCAvIDI1ICk7XHJcbmNvbnN0IFNFQ09ORFNfUEVSX0RBWSA9IDg2NDAwO1xyXG5jb25zdCBERUZBVUxUX0RUID0gREFZU19QRVJfVElDSyAqIFNFQ09ORFNfUEVSX0RBWTtcclxuXHJcbmNsYXNzIEdyYXZpdHlBbmRPcmJpdHNDbG9jayB7XHJcbiAgcHVibGljIHJlYWRvbmx5IGJhc2VEVFZhbHVlOiBudW1iZXI7XHJcbiAgcHVibGljIHJlYWRvbmx5IHRpbWVTcGVlZFByb3BlcnR5OiBFbnVtZXJhdGlvblByb3BlcnR5PFRpbWVTcGVlZD47XHJcbiAgcHVibGljIHJlYWRvbmx5IHRpbWVQcm9wZXJ0eTogUmV3aW5kYWJsZVByb3BlcnR5PG51bWJlcj47XHJcblxyXG4gIHByaXZhdGUgcmVhZG9ubHkgaXNSdW5uaW5nUHJvcGVydHk6IEJvb2xlYW5Qcm9wZXJ0eTtcclxuICBwcml2YXRlIHJlYWRvbmx5IGR0OiBudW1iZXI7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBzdGVwcGluZ1Byb3BlcnR5OiBCb29sZWFuUHJvcGVydHk7XHJcbiAgcHJpdmF0ZSBpbnRlcnBvbGF0aW9uUmF0aW86IG51bWJlcjtcclxuICBwcml2YXRlIGV2ZW50VGltZXI6IEV2ZW50VGltZXIgfCBudWxsO1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0gY2hhbmdlUmV3aW5kVmFsdWVQcm9wZXJ0eVxyXG4gICAqIEBwYXJhbSBiYXNlRFRWYWx1ZSAobXVsdGlwbGllZCBieSBzY2FsZSB0byBvYnRhaW4gdHJ1ZSBkdClcclxuICAgKiBAcGFyYW0gc3RlcHBpbmdQcm9wZXJ0eVxyXG4gICAqIEBwYXJhbSB0aW1lU3BlZWRQcm9wZXJ0eVxyXG4gICAqIEBwYXJhbSBzY2VuZVRhbmRlbVxyXG4gICAqIEBwYXJhbSB0YW5kZW1cclxuICAgKi9cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIGNoYW5nZVJld2luZFZhbHVlUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PGJvb2xlYW4+LCBiYXNlRFRWYWx1ZTogbnVtYmVyLCBzdGVwcGluZ1Byb3BlcnR5OiBCb29sZWFuUHJvcGVydHksIHRpbWVTcGVlZFByb3BlcnR5OiBFbnVtZXJhdGlvblByb3BlcnR5PFRpbWVTcGVlZD4sXHJcbiAgICAgICAgICAgICAgICAgICAgICBzY2VuZVRhbmRlbTogVGFuZGVtLCB0YW5kZW06IFRhbmRlbSApIHtcclxuXHJcbiAgICAvLyAocmVhZC1vbmx5KVxyXG4gICAgdGhpcy5iYXNlRFRWYWx1ZSA9IGJhc2VEVFZhbHVlO1xyXG5cclxuICAgIHRoaXMuaXNSdW5uaW5nUHJvcGVydHkgPSBuZXcgQm9vbGVhblByb3BlcnR5KCBmYWxzZSwge1xyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdpc1J1bm5pbmdQcm9wZXJ0eScgKSxcclxuICAgICAgcGhldGlvRG9jdW1lbnRhdGlvbjogYFRoaXMgdmFsdWUgaXMgdHJ1ZSB3aGVuICcke3NjZW5lVGFuZGVtLnBoZXRpb0lEfScgaXMgdGhlIHNlbGVjdGVkIHNjZW5lIGFuZCB0aGUgcGxheS9wYXVzZSBidXR0b24gaXMgaW4gcGxheSBtb2RlLiAoSXQgcmVtYWlucyB0cnVlIGV2ZW4gaWYgdGhlIHVzZXIgc3dpdGNoZXMgc2NyZWVucy4gVXNlIGluIGNvbWJpbmF0aW9uIHdpdGggJyR7cGhldC5qb2lzdC5zaW0uc2VsZWN0ZWRTY3JlZW5Qcm9wZXJ0eS50YW5kZW0ucGhldGlvSUR9Jy4pYCxcclxuICAgICAgcGhldGlvUmVhZE9ubHk6IHRydWVcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLnRpbWVQcm9wZXJ0eSA9IG5ldyBSZXdpbmRhYmxlUHJvcGVydHk8bnVtYmVyPiggY2hhbmdlUmV3aW5kVmFsdWVQcm9wZXJ0eSwgMCwge1xyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICd0aW1lUHJvcGVydHknICksXHJcbiAgICAgIHBoZXRpb0hpZ2hGcmVxdWVuY3k6IHRydWUsXHJcbiAgICAgIHVuaXRzOiAncycsXHJcbiAgICAgIHBoZXRpb1JlYWRPbmx5OiB0cnVlLFxyXG4gICAgICBwaGV0aW9WYWx1ZVR5cGU6IE51bWJlcklPXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmR0ID0gYmFzZURUVmFsdWU7XHJcbiAgICB0aGlzLnN0ZXBwaW5nUHJvcGVydHkgPSBzdGVwcGluZ1Byb3BlcnR5O1xyXG5cclxuICAgIHRoaXMudGltZVNwZWVkUHJvcGVydHkgPSB0aW1lU3BlZWRQcm9wZXJ0eTtcclxuXHJcbiAgICAvLyBGcmFjdGlvbiBiZXR3ZWVuIG9sZCBzdGF0ZT0wIGFuZCBuZXcgc3RhdGU9MVxyXG4gICAgdGhpcy5pbnRlcnBvbGF0aW9uUmF0aW8gPSAxO1xyXG5cclxuICAgIHRoaXMuZXZlbnRUaW1lciA9IG51bGw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTdGVwIHRoZSBjbG9jayB3aGlsZSBwYXVzZWQsIGlnbm9yaW5nIHRoZSBjdXJyZW50IHBsYXkgc3BlZWQgYW5kIHN0ZXBwaW5nIGJ5IDEgLyBDTE9DS19GUkFNRV9SQVRFLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGVwQ2xvY2tXaGlsZVBhdXNlZCgpOiB2b2lkIHtcclxuXHJcbiAgICAvLyBTZWUgUmV3aW5kYWJsZVByb3BlcnR5IHdoaWNoIGhhcyB0byBrbm93IHdoZXRoZXIgdGhlIGNsb2NrIGlzIHJ1bm5pbmcsIHBhdXNlZCwgc3RlcHBpbmcsIHJld2luZGluZyBmb3JcclxuICAgIC8vIGFwcGxpY2F0aW9uIHNwZWNpZmljIGxvZ2ljXHJcbiAgICB0aGlzLnN0ZXBwaW5nUHJvcGVydHkuc2V0KCB0cnVlICk7XHJcblxyXG4gICAgLy8gVXNlcyAxeCBkdCBmb3IgcmVwbGljYWJsZSB0cmFqZWN0b3JpZXMsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvZ3Jhdml0eS1hbmQtb3JiaXRzL2lzc3Vlcy8yNTNcclxuICAgIHRoaXMuc3RlcCggMSAvIENMT0NLX0ZSQU1FX1JBVEUgKTtcclxuICAgIHRoaXMuc3RlcHBpbmdQcm9wZXJ0eS5zZXQoIGZhbHNlICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXQgd2hldGhlciBvciBub3QgdGhlIG1vZGVsIHNob3VsZCBiZSBydW5uaW5nLlxyXG4gICAqXHJcbiAgICogQHBhcmFtICB7Ym9vbGVhbn0gcnVubmluZ1xyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXRSdW5uaW5nKCBydW5uaW5nOiBib29sZWFuICk6IHZvaWQge1xyXG4gICAgdGhpcy5pc1J1bm5pbmdQcm9wZXJ0eS5zZXQoIHJ1bm5pbmcgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldCB0aGUgY2xvY2sgdGltZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSAge251bWJlcn0gdGltZSBkZXNjcmlwdGlvblxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXRTaW11bGF0aW9uVGltZSggdGltZTogbnVtYmVyICk6IHZvaWQge1xyXG4gICAgdGhpcy50aW1lUHJvcGVydHkuc2V0KCB0aW1lICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0U2ltdWxhdGlvblRpbWUoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLnRpbWVQcm9wZXJ0eS5nZXQoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyByZXNldFNpbXVsYXRpb25UaW1lKCk6IHZvaWQge1xyXG4gICAgdGhpcy50aW1lUHJvcGVydHkucmVzZXQoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZCBhbiBldmVudCBjYWxsYmFjayB0byB0aGUgZXZlbnQgdGltZXIsIGNhbGxlZCBldmVyeSB0aW1lIHRoZSBhbmltYXRpb24gZnJhbWUgY2hhbmdlcy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSAge2Z1bmN0aW9ufSBzdGVwRnVuY3Rpb25cclxuICAgKi9cclxuICBwdWJsaWMgYWRkRXZlbnRUaW1lciggc3RlcEZ1bmN0aW9uOiAoIGR0OiBudW1iZXIgKSA9PiB2b2lkICk6IHZvaWQge1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggIXRoaXMuZXZlbnRUaW1lciwgJ3RoZXJlIGNhbiBiZSBvbmx5IG9uZSBldmVudCB0aW1lcicgKTtcclxuICAgIHRoaXMuZXZlbnRUaW1lciA9IG5ldyBFdmVudFRpbWVyKCBuZXcgRXZlbnRUaW1lci5Db25zdGFudEV2ZW50TW9kZWwoIENMT0NLX0ZSQU1FX1JBVEUgKSwgc3RlcEZ1bmN0aW9uICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTdGVwIHRoZSBzaW11bGF0aW9uIGJ5IGR0XHJcbiAgICpcclxuICAgKiBAcGFyYW0gIHtudW1iZXJ9IGR0XHJcbiAgICovXHJcbiAgcHVibGljIHN0ZXAoIGR0OiBudW1iZXIgKTogdm9pZCB7XHJcbiAgICBpZiAoIHRoaXMuZXZlbnRUaW1lciApIHtcclxuICAgICAgdGhpcy5ldmVudFRpbWVyLnN0ZXAoIGR0ICk7XHJcbiAgICAgIHRoaXMuaW50ZXJwb2xhdGlvblJhdGlvID0gdGhpcy5ldmVudFRpbWVyLmdldFJhdGlvKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBzdGF0aWNzXHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBTRUNPTkRTX1BFUl9EQVkgPSBTRUNPTkRTX1BFUl9EQVk7XHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBERUZBVUxUX0RUID0gREVGQVVMVF9EVDtcclxufVxyXG5cclxuZ3Jhdml0eUFuZE9yYml0cy5yZWdpc3RlciggJ0dyYXZpdHlBbmRPcmJpdHNDbG9jaycsIEdyYXZpdHlBbmRPcmJpdHNDbG9jayApO1xyXG5leHBvcnQgZGVmYXVsdCBHcmF2aXR5QW5kT3JiaXRzQ2xvY2s7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGVBQWUsTUFBTSx3Q0FBd0M7QUFDcEUsT0FBT0MsVUFBVSxNQUFNLHdDQUF3QztBQUMvRCxPQUFPQyxnQkFBZ0IsTUFBTSwyQkFBMkI7QUFJeEQsT0FBT0Msa0JBQWtCLE1BQU0seUJBQXlCO0FBQ3hELE9BQU9DLFFBQVEsTUFBTSx5Q0FBeUM7QUFHOUQ7QUFDQTtBQUNBLE1BQU1DLGdCQUFnQixHQUFHLEVBQUU7O0FBRTNCO0FBQ0EsTUFBTUMsYUFBYSxHQUFHLENBQUMsSUFBSyxFQUFFLEdBQUcsRUFBRSxDQUFFO0FBQ3JDLE1BQU1DLGVBQWUsR0FBRyxLQUFLO0FBQzdCLE1BQU1DLFVBQVUsR0FBR0YsYUFBYSxHQUFHQyxlQUFlO0FBRWxELE1BQU1FLHFCQUFxQixDQUFDO0VBVzFCO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDU0MsV0FBV0EsQ0FBRUMseUJBQXFELEVBQUVDLFdBQW1CLEVBQUVDLGdCQUFpQyxFQUFFQyxpQkFBaUQsRUFDaEtDLFdBQW1CLEVBQUVDLE1BQWMsRUFBRztJQUV4RDtJQUNBLElBQUksQ0FBQ0osV0FBVyxHQUFHQSxXQUFXO0lBRTlCLElBQUksQ0FBQ0ssaUJBQWlCLEdBQUcsSUFBSWpCLGVBQWUsQ0FBRSxLQUFLLEVBQUU7TUFDbkRnQixNQUFNLEVBQUVBLE1BQU0sQ0FBQ0UsWUFBWSxDQUFFLG1CQUFvQixDQUFDO01BQ2xEQyxtQkFBbUIsRUFBRyw0QkFBMkJKLFdBQVcsQ0FBQ0ssUUFBUyxtSkFBa0pDLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxHQUFHLENBQUNDLHNCQUFzQixDQUFDUixNQUFNLENBQUNJLFFBQVMsS0FBSTtNQUNsUkssY0FBYyxFQUFFO0lBQ2xCLENBQUUsQ0FBQztJQUVILElBQUksQ0FBQ0MsWUFBWSxHQUFHLElBQUl2QixrQkFBa0IsQ0FBVVEseUJBQXlCLEVBQUUsQ0FBQyxFQUFFO01BQ2hGSyxNQUFNLEVBQUVBLE1BQU0sQ0FBQ0UsWUFBWSxDQUFFLGNBQWUsQ0FBQztNQUM3Q1MsbUJBQW1CLEVBQUUsSUFBSTtNQUN6QkMsS0FBSyxFQUFFLEdBQUc7TUFDVkgsY0FBYyxFQUFFLElBQUk7TUFDcEJJLGVBQWUsRUFBRXpCO0lBQ25CLENBQUUsQ0FBQztJQUNILElBQUksQ0FBQzBCLEVBQUUsR0FBR2xCLFdBQVc7SUFDckIsSUFBSSxDQUFDQyxnQkFBZ0IsR0FBR0EsZ0JBQWdCO0lBRXhDLElBQUksQ0FBQ0MsaUJBQWlCLEdBQUdBLGlCQUFpQjs7SUFFMUM7SUFDQSxJQUFJLENBQUNpQixrQkFBa0IsR0FBRyxDQUFDO0lBRTNCLElBQUksQ0FBQ0MsVUFBVSxHQUFHLElBQUk7RUFDeEI7O0VBRUE7QUFDRjtBQUNBO0VBQ1NDLG9CQUFvQkEsQ0FBQSxFQUFTO0lBRWxDO0lBQ0E7SUFDQSxJQUFJLENBQUNwQixnQkFBZ0IsQ0FBQ3FCLEdBQUcsQ0FBRSxJQUFLLENBQUM7O0lBRWpDO0lBQ0EsSUFBSSxDQUFDQyxJQUFJLENBQUUsQ0FBQyxHQUFHOUIsZ0JBQWlCLENBQUM7SUFDakMsSUFBSSxDQUFDUSxnQkFBZ0IsQ0FBQ3FCLEdBQUcsQ0FBRSxLQUFNLENBQUM7RUFDcEM7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtFQUNTRSxVQUFVQSxDQUFFQyxPQUFnQixFQUFTO0lBQzFDLElBQUksQ0FBQ3BCLGlCQUFpQixDQUFDaUIsR0FBRyxDQUFFRyxPQUFRLENBQUM7RUFDdkM7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtFQUNTQyxpQkFBaUJBLENBQUVDLElBQVksRUFBUztJQUM3QyxJQUFJLENBQUNiLFlBQVksQ0FBQ1EsR0FBRyxDQUFFSyxJQUFLLENBQUM7RUFDL0I7RUFFT0MsaUJBQWlCQSxDQUFBLEVBQVc7SUFDakMsT0FBTyxJQUFJLENBQUNkLFlBQVksQ0FBQ2UsR0FBRyxDQUFDLENBQUM7RUFDaEM7RUFFT0MsbUJBQW1CQSxDQUFBLEVBQVM7SUFDakMsSUFBSSxDQUFDaEIsWUFBWSxDQUFDaUIsS0FBSyxDQUFDLENBQUM7RUFDM0I7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtFQUNTQyxhQUFhQSxDQUFFQyxZQUFvQyxFQUFTO0lBQ2pFQyxNQUFNLElBQUlBLE1BQU0sQ0FBRSxDQUFDLElBQUksQ0FBQ2QsVUFBVSxFQUFFLG1DQUFvQyxDQUFDO0lBQ3pFLElBQUksQ0FBQ0EsVUFBVSxHQUFHLElBQUkvQixVQUFVLENBQUUsSUFBSUEsVUFBVSxDQUFDOEMsa0JBQWtCLENBQUUxQyxnQkFBaUIsQ0FBQyxFQUFFd0MsWUFBYSxDQUFDO0VBQ3pHOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDU1YsSUFBSUEsQ0FBRUwsRUFBVSxFQUFTO0lBQzlCLElBQUssSUFBSSxDQUFDRSxVQUFVLEVBQUc7TUFDckIsSUFBSSxDQUFDQSxVQUFVLENBQUNHLElBQUksQ0FBRUwsRUFBRyxDQUFDO01BQzFCLElBQUksQ0FBQ0Msa0JBQWtCLEdBQUcsSUFBSSxDQUFDQyxVQUFVLENBQUNnQixRQUFRLENBQUMsQ0FBQztJQUN0RDtFQUNGOztFQUVBO0VBQ0EsT0FBdUJ6QyxlQUFlLEdBQUdBLGVBQWU7RUFDeEQsT0FBdUJDLFVBQVUsR0FBR0EsVUFBVTtBQUNoRDtBQUVBTixnQkFBZ0IsQ0FBQytDLFFBQVEsQ0FBRSx1QkFBdUIsRUFBRXhDLHFCQUFzQixDQUFDO0FBQzNFLGVBQWVBLHFCQUFxQiJ9