// Copyright 2019-2023, University of Colorado Boulder

/**
 * ScreenView for the 'Lab' screen.
 *
 * @author Chris Klusendorf (PhET Interactive Simulations)
 */

import Animation from '../../../../twixt/js/Animation.js';
import EnumerationProperty from '../../../../axon/js/EnumerationProperty.js';
import ScreenView from '../../../../joist/js/ScreenView.js';
import ResetAllButton from '../../../../scenery-phet/js/buttons/ResetAllButton.js';
import { ManualConstraint, Node, Rectangle } from '../../../../scenery/js/imports.js';
import NumberSuiteCommonConstants from '../../common/NumberSuiteCommonConstants.js';
import CountingAreaNode from '../../common/view/CountingAreaNode.js';
import numberSuiteCommon from '../../numberSuiteCommon.js';
import DraggableTenFrameNode from './DraggableTenFrameNode.js';
import NumberCardCreatorCarousel from './NumberCardCreatorCarousel.js';
import CountingObjectType from '../../../../counting-common/js/common/model/CountingObjectType.js';
import SymbolCardCreatorPanel from './SymbolCardCreatorPanel.js';
import TenFrameCreatorPanel from './TenFrameCreatorPanel.js';
import Easing from '../../../../twixt/js/Easing.js';
import CountingCommonConstants from '../../../../counting-common/js/common/CountingCommonConstants.js';
import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import Bounds2 from '../../../../dot/js/Bounds2.js';
import Property from '../../../../axon/js/Property.js';
import Multilink from '../../../../axon/js/Multilink.js';
const TEN_FRAME_CREATOR_PANEL_LEFT = 143;
const CREATOR_NODE_SPACING = 18;
class LabScreenView extends ScreenView {
  // node for all pieces to share

  // return zone where any pieces from the bottom row will return to their home if they intersect when dropped

  constructor(model, symbolTypes, preferences, tandem) {
    super({
      tandem: tandem
    });
    this.model = model;
    this.pieceLayer = new Node();
    const backgroundDragTargetNode = new Rectangle(this.layoutBounds); // see CountingAreaNode for doc

    this.numberCardCreatorCarousel = new NumberCardCreatorCarousel(this);
    this.numberCardCreatorCarousel.centerX = this.layoutBounds.centerX;
    this.addChild(this.numberCardCreatorCarousel);

    // create the symbolCardCreatorPanel, position later after we create the boundsProperty
    this.symbolCardCreatorPanel = new SymbolCardCreatorPanel(model, this, symbolTypes);
    this.tenFrameCreatorPanel = new TenFrameCreatorPanel(model, this);
    this.tenFrameCreatorPanel.left = TEN_FRAME_CREATOR_PANEL_LEFT;
    this.addChild(this.tenFrameCreatorPanel);
    this.numberCardBoundsProperty = new DerivedProperty([this.visibleBoundsProperty], visibleBounds => {
      return visibleBounds.withMaxY(visibleBounds.maxY - NumberSuiteCommonConstants.SCREEN_VIEW_PADDING_Y - this.tenFrameCreatorPanel.height).withMaxX(visibleBounds.maxX - this.symbolCardCreatorPanel.width - CountingCommonConstants.COUNTING_AREA_MARGIN);
    });
    this.symbolCardBoundsProperty = new DerivedProperty([this.visibleBoundsProperty], visibleBounds => {
      return visibleBounds.withMinY(visibleBounds.minY + NumberSuiteCommonConstants.SCREEN_VIEW_PADDING_Y + this.numberCardCreatorCarousel.height).withMaxY(visibleBounds.maxY - CountingCommonConstants.COUNTING_AREA_MARGIN - this.tenFrameCreatorPanel.height);
    });
    this.objectCountingAreaBoundsProperty = new DerivedProperty([this.visibleBoundsProperty], visibleBounds => {
      return visibleBounds.withMinY(visibleBounds.minY + NumberSuiteCommonConstants.SCREEN_VIEW_PADDING_Y + this.numberCardCreatorCarousel.height).withMaxX(visibleBounds.maxX - this.symbolCardCreatorPanel.width - CountingCommonConstants.COUNTING_AREA_MARGIN);
    });
    this.bottomReturnZoneProperty = new Property(new Bounds2(0, 0, 0, 0));
    const countingAreaNodeOptions = {
      countingObjectCreatorPanelOptions: {
        arrowButtonsVisible: false,
        // see https://github.com/phetsims/number-suite-common/issues/11
        xMargin: 20 // increase a bit because we're not showing arrow buttons
      },

      countingObjectLayerNode: this.pieceLayer,
      backgroundDragTargetNode: backgroundDragTargetNode,
      returnZoneProperty: this.bottomReturnZoneProperty
    };

    // create and add the left ObjectsCountingAreaNode
    this.dogCountingAreaNode = new CountingAreaNode(model.dogCountingArea, new EnumerationProperty(CountingObjectType.DOG), this.objectCountingAreaBoundsProperty, countingAreaNodeOptions);
    this.addChild(this.dogCountingAreaNode);

    // create and add the right ObjectsCountingAreaNode
    this.appleCountingAreaNode = new CountingAreaNode(model.appleCountingArea, new EnumerationProperty(CountingObjectType.APPLE), this.objectCountingAreaBoundsProperty, countingAreaNodeOptions);
    this.addChild(this.appleCountingAreaNode);

    // create and add the right ObjectsCountingAreaNode
    this.butterflyCountingAreaNode = new CountingAreaNode(model.butterflyCountingArea, new EnumerationProperty(CountingObjectType.BUTTERFLY), this.objectCountingAreaBoundsProperty, countingAreaNodeOptions);
    this.addChild(this.butterflyCountingAreaNode);

    // create and add the right ObjectsCountingAreaNode
    this.ballCountingAreaNode = new CountingAreaNode(model.ballCountingArea, new EnumerationProperty(CountingObjectType.BALL), this.objectCountingAreaBoundsProperty, countingAreaNodeOptions);
    this.addChild(this.ballCountingAreaNode);

    // create and add the CountingAreaNode
    this.onesCountingAreaNode = new CountingAreaNode(model.onesCountingArea, new EnumerationProperty(CountingObjectType.PAPER_NUMBER), this.objectCountingAreaBoundsProperty, countingAreaNodeOptions);
    this.addChild(this.onesCountingAreaNode);
    const hideOnesCountingAreaNodeAdjustment = this.onesCountingAreaNode.countingObjectCreatorPanel.width / 2;
    preferences.showLabOnesProperty.link(showLabOnes => {
      if (showLabOnes) {
        this.tenFrameCreatorPanel.left = TEN_FRAME_CREATOR_PANEL_LEFT;
      } else {
        this.model.onesCountingArea.reset();
        this.tenFrameCreatorPanel.left = TEN_FRAME_CREATOR_PANEL_LEFT + hideOnesCountingAreaNodeAdjustment;
      }
      this.onesCountingAreaNode.visible = showLabOnes;
    });

    // Note that all CountingAreaNode instances are assumed to be positioned at (0,0) and therefore are in
    // the same coordinate frame as this ScreenView. Here we reach inside those CountingAreaNode instances
    // and position their CountingObjectCreatorPanels. This made it impossible to change the layout so that
    // all counting objects are in a single panel, so we bailed on https://github.com/phetsims/number-suite-common/issues/11.
    ManualConstraint.create(this, [this.tenFrameCreatorPanel, this.dogCountingAreaNode.countingObjectCreatorPanel, this.appleCountingAreaNode.countingObjectCreatorPanel, this.butterflyCountingAreaNode.countingObjectCreatorPanel, this.ballCountingAreaNode.countingObjectCreatorPanel, this.onesCountingAreaNode.countingObjectCreatorPanel], (tenFrameCreatorNodeProxy, dogCreatorNodeProxy, appleCreatorNodeProxy, butterflyCreatorNodeProxy, ballsCreatorNodeProxy, onesCreatorNodeProxy) => {
      dogCreatorNodeProxy.left = tenFrameCreatorNodeProxy.right + CREATOR_NODE_SPACING;
      appleCreatorNodeProxy.left = dogCreatorNodeProxy.right + CREATOR_NODE_SPACING;
      butterflyCreatorNodeProxy.left = appleCreatorNodeProxy.right + CREATOR_NODE_SPACING;
      ballsCreatorNodeProxy.left = butterflyCreatorNodeProxy.right + CREATOR_NODE_SPACING;
      onesCreatorNodeProxy.left = ballsCreatorNodeProxy.right + CREATOR_NODE_SPACING;
    });
    this.countingObjectTypeToCountingAreaNode = new Map();
    this.countingObjectTypeToCountingAreaNode.set(CountingObjectType.DOG, this.dogCountingAreaNode);
    this.countingObjectTypeToCountingAreaNode.set(CountingObjectType.APPLE, this.appleCountingAreaNode);
    this.countingObjectTypeToCountingAreaNode.set(CountingObjectType.BUTTERFLY, this.butterflyCountingAreaNode);
    this.countingObjectTypeToCountingAreaNode.set(CountingObjectType.BALL, this.ballCountingAreaNode);
    this.countingObjectTypeToCountingAreaNode.set(CountingObjectType.PAPER_NUMBER, this.onesCountingAreaNode);
    this.countingAreaNodes = [this.dogCountingAreaNode, this.appleCountingAreaNode, this.butterflyCountingAreaNode, this.ballCountingAreaNode, this.onesCountingAreaNode];

    // position and add the symbolCardCreatorPanel later, so we have access to its bounds Property
    this.symbolCardCreatorPanel.centerY = this.symbolCardBoundsProperty.value.centerY;
    this.addChild(this.symbolCardCreatorPanel);
    this.tenFrameNodes = [];
    model.tenFrames.addItemAddedListener(this.addTenFrameNode.bind(this));

    // add the piece layer
    this.addChild(this.pieceLayer);
    phet.joist.display.addInputListener({
      down: event => {
        const screen = phet.joist.sim.selectedScreenProperty.value;
        if (screen && screen.view === this) {
          let tenFrameNodeFound = false;
          event.trail.nodes.forEach(node => {
            if (node instanceof DraggableTenFrameNode) {
              tenFrameNodeFound = true;
            }
          });
          if (!tenFrameNodeFound) {
            model.selectedTenFrameProperty.value = null;
          }
        }
      }
    });

    // create and add the ResetAllButton
    const resetAllButton = new ResetAllButton({
      listener: () => {
        this.interruptSubtreeInput(); // cancel interactions that may be in progress
        model.reset();
        this.numberCardCreatorCarousel.reset();
        this.symbolCardCreatorPanel.reset();
      },
      right: this.layoutBounds.maxX - NumberSuiteCommonConstants.SCREEN_VIEW_PADDING_X,
      tandem: tandem.createTandem('resetAllButton')
    });
    this.addChild(resetAllButton);

    // Update the position of panels when the visible bounds change so everything floats to an edge of the window.
    Multilink.multilink([this.visibleBoundsProperty, preferences.showLabOnesProperty], (visibleBounds, showLabOnes) => {
      this.numberCardCreatorCarousel.top = visibleBounds.top + NumberSuiteCommonConstants.SCREEN_VIEW_PADDING_Y;
      this.symbolCardCreatorPanel.right = visibleBounds.right - CountingCommonConstants.COUNTING_AREA_MARGIN;
      resetAllButton.right = visibleBounds.right - CountingCommonConstants.COUNTING_AREA_MARGIN;
      const bottomY = visibleBounds.bottom - CountingCommonConstants.COUNTING_AREA_MARGIN;
      this.tenFrameCreatorPanel.bottom = bottomY;
      resetAllButton.bottom = bottomY;
      const returnZoneRightBoundary = showLabOnes ? this.onesCountingAreaNode.right : this.ballCountingAreaNode.right;
      this.bottomReturnZoneProperty.value = new Bounds2(this.tenFrameCreatorPanel.left, this.tenFrameCreatorPanel.top, returnZoneRightBoundary, bottomY);
    });

    // Constrain the position of the numberCards when the bounds change.
    this.numberCardBoundsProperty.link(numberCardBounds => {
      this.numberCardCreatorCarousel.getAllNumberCardNodes().forEach(numberCardNode => {
        numberCardNode.setConstrainedDestination(numberCardBounds, numberCardNode.positionProperty.value);
      });
    });

    // Constrain the position of the symbolCards when the bounds change.
    this.symbolCardBoundsProperty.link(symbolCardBounds => {
      this.symbolCardCreatorPanel.getAllSymbolNodes().forEach(symbolCardNode => {
        symbolCardNode.setConstrainedDestination(symbolCardBounds, symbolCardNode.positionProperty.value);
      });
    });
  }

  /**
   * Returns the counting object type of the CountingObjectNode for the given CountingObject
   */
  getCountingObjectType(countingObject) {
    let countingObjectType = CountingObjectType.DOG;
    let countingObjectTypeFound = false;
    for (let i = 0; i < this.countingAreaNodes.length; i++) {
      const countingAreaNode = this.countingAreaNodes[i];
      if (countingAreaNode.countingArea.countingObjects.includes(countingObject)) {
        const countingObjectNode = countingAreaNode.getCountingObjectNode(countingObject);
        countingObjectType = countingObjectNode.countingObjectTypeProperty.value;
        countingObjectTypeFound = true;
        break;
      }
    }
    assert && assert(countingObjectTypeFound, 'countingObjectType not found!');
    return countingObjectType;
  }

  /**
   * Called when a new Ten Frame is added to the model.
   */
  addTenFrameNode(tenFrame) {
    // Called when DraggableTenFrameNode drag cycle ends.
    const dropListener = tenFrameNode => {
      // If a drag was interrupted by pressing the Reset All button (multitouch), then tenFrameNode will already
      // have been disposed, and this can be short-circuited. See https://github.com/phetsims/number-play/issues/195
      if (!tenFrameNode.isDisposed && tenFrameNode.bounds.intersectsBounds(this.bottomReturnZoneProperty.value)) {
        tenFrameNode.inputEnabled = false;
        tenFrame.countingObjects.clear();

        // calculate icon's origin
        const trail = this.getUniqueLeafTrailTo(this.tenFrameCreatorPanel.iconNode).slice(1);
        const globalOrigin = trail.localToGlobalPoint(this.tenFrameCreatorPanel.iconNode.localBounds.leftTop);
        const distance = tenFrame.positionProperty.value.distance(globalOrigin);
        const duration = CountingCommonConstants.ANIMATION_TIME_RANGE.constrainValue(distance / CountingCommonConstants.ANIMATION_SPEED);
        const removeAnimation = new Animation({
          duration: duration,
          targets: [{
            property: tenFrame.positionProperty,
            easing: Easing.CUBIC_IN_OUT,
            to: globalOrigin
          }, {
            property: tenFrame.scaleProperty,
            easing: Easing.CUBIC_IN_OUT,
            to: TenFrameCreatorPanel.ICON_SCALE
          }]
        });
        removeAnimation.finishEmitter.addListener(() => {
          this.model.tenFrames.includes(tenFrame) && this.model.tenFrames.remove(tenFrame);
        });
        removeAnimation.start();
      }
    };
    const tenFrameNode = new DraggableTenFrameNode(tenFrame, this.model.selectedTenFrameProperty, this.objectCountingAreaBoundsProperty, {
      dropListener: dropListener,
      removeCountingObjectListener: countingObject => {
        const countingAreaNode = this.getCorrespondingCountingAreaNode(countingObject);
        countingAreaNode.countingArea.sendCountingObjectToCreatorNode(countingObject);
      },
      getCountingObjectNode: countingObject => {
        const countingAreaNode = this.getCorrespondingCountingAreaNode(countingObject);
        return countingAreaNode.getCountingObjectNode(countingObject);
      }
    });
    this.tenFrameNodes.push(tenFrameNode);
    this.pieceLayer.addChild(tenFrameNode);
    tenFrame.disposeEmitter.addListener(() => {
      this.removeTenFrameNode(tenFrame);
    });
  }

  /**
   * Called when a TenFrame is removed from the model.
   */
  removeTenFrameNode(tenFrame) {
    const tenFrameNode = this.getTenFrameNode(tenFrame);
    _.pull(this.tenFrameNodes, tenFrameNode);
    this.pieceLayer.removeChild(tenFrameNode);
    tenFrameNode.dispose();
  }

  /**
   * Returns the corresponding DraggableTenFrameNode for a given TenFrame.
   */
  getTenFrameNode(tenFrame) {
    const tenFrameNode = _.find(this.tenFrameNodes, tenFrameNode => tenFrameNode.tenFrame === tenFrame);
    assert && assert(tenFrameNode, 'matching tenFrameNode not found!');
    return tenFrameNode;
  }

  /**
   * Each type of counting object has its own countingArea, so when working with a counting object, we need to look up
   * its corresponding countingArea in order to do an operation on it (like sending the counting object back to its origin).
   */
  getCorrespondingCountingAreaNode(countingObject) {
    const countingObjectType = this.getCountingObjectType(countingObject);
    const countingAreaNode = this.countingObjectTypeToCountingAreaNode.get(countingObjectType);
    assert && assert(countingAreaNode, 'countingAreaNode not found for counting object type: ' + countingObjectType.name);
    return countingAreaNode;
  }
}
numberSuiteCommon.register('LabScreenView', LabScreenView);
export default LabScreenView;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBbmltYXRpb24iLCJFbnVtZXJhdGlvblByb3BlcnR5IiwiU2NyZWVuVmlldyIsIlJlc2V0QWxsQnV0dG9uIiwiTWFudWFsQ29uc3RyYWludCIsIk5vZGUiLCJSZWN0YW5nbGUiLCJOdW1iZXJTdWl0ZUNvbW1vbkNvbnN0YW50cyIsIkNvdW50aW5nQXJlYU5vZGUiLCJudW1iZXJTdWl0ZUNvbW1vbiIsIkRyYWdnYWJsZVRlbkZyYW1lTm9kZSIsIk51bWJlckNhcmRDcmVhdG9yQ2Fyb3VzZWwiLCJDb3VudGluZ09iamVjdFR5cGUiLCJTeW1ib2xDYXJkQ3JlYXRvclBhbmVsIiwiVGVuRnJhbWVDcmVhdG9yUGFuZWwiLCJFYXNpbmciLCJDb3VudGluZ0NvbW1vbkNvbnN0YW50cyIsIkRlcml2ZWRQcm9wZXJ0eSIsIkJvdW5kczIiLCJQcm9wZXJ0eSIsIk11bHRpbGluayIsIlRFTl9GUkFNRV9DUkVBVE9SX1BBTkVMX0xFRlQiLCJDUkVBVE9SX05PREVfU1BBQ0lORyIsIkxhYlNjcmVlblZpZXciLCJjb25zdHJ1Y3RvciIsIm1vZGVsIiwic3ltYm9sVHlwZXMiLCJwcmVmZXJlbmNlcyIsInRhbmRlbSIsInBpZWNlTGF5ZXIiLCJiYWNrZ3JvdW5kRHJhZ1RhcmdldE5vZGUiLCJsYXlvdXRCb3VuZHMiLCJudW1iZXJDYXJkQ3JlYXRvckNhcm91c2VsIiwiY2VudGVyWCIsImFkZENoaWxkIiwic3ltYm9sQ2FyZENyZWF0b3JQYW5lbCIsInRlbkZyYW1lQ3JlYXRvclBhbmVsIiwibGVmdCIsIm51bWJlckNhcmRCb3VuZHNQcm9wZXJ0eSIsInZpc2libGVCb3VuZHNQcm9wZXJ0eSIsInZpc2libGVCb3VuZHMiLCJ3aXRoTWF4WSIsIm1heFkiLCJTQ1JFRU5fVklFV19QQURESU5HX1kiLCJoZWlnaHQiLCJ3aXRoTWF4WCIsIm1heFgiLCJ3aWR0aCIsIkNPVU5USU5HX0FSRUFfTUFSR0lOIiwic3ltYm9sQ2FyZEJvdW5kc1Byb3BlcnR5Iiwid2l0aE1pblkiLCJtaW5ZIiwib2JqZWN0Q291bnRpbmdBcmVhQm91bmRzUHJvcGVydHkiLCJib3R0b21SZXR1cm5ab25lUHJvcGVydHkiLCJjb3VudGluZ0FyZWFOb2RlT3B0aW9ucyIsImNvdW50aW5nT2JqZWN0Q3JlYXRvclBhbmVsT3B0aW9ucyIsImFycm93QnV0dG9uc1Zpc2libGUiLCJ4TWFyZ2luIiwiY291bnRpbmdPYmplY3RMYXllck5vZGUiLCJyZXR1cm5ab25lUHJvcGVydHkiLCJkb2dDb3VudGluZ0FyZWFOb2RlIiwiZG9nQ291bnRpbmdBcmVhIiwiRE9HIiwiYXBwbGVDb3VudGluZ0FyZWFOb2RlIiwiYXBwbGVDb3VudGluZ0FyZWEiLCJBUFBMRSIsImJ1dHRlcmZseUNvdW50aW5nQXJlYU5vZGUiLCJidXR0ZXJmbHlDb3VudGluZ0FyZWEiLCJCVVRURVJGTFkiLCJiYWxsQ291bnRpbmdBcmVhTm9kZSIsImJhbGxDb3VudGluZ0FyZWEiLCJCQUxMIiwib25lc0NvdW50aW5nQXJlYU5vZGUiLCJvbmVzQ291bnRpbmdBcmVhIiwiUEFQRVJfTlVNQkVSIiwiaGlkZU9uZXNDb3VudGluZ0FyZWFOb2RlQWRqdXN0bWVudCIsImNvdW50aW5nT2JqZWN0Q3JlYXRvclBhbmVsIiwic2hvd0xhYk9uZXNQcm9wZXJ0eSIsImxpbmsiLCJzaG93TGFiT25lcyIsInJlc2V0IiwidmlzaWJsZSIsImNyZWF0ZSIsInRlbkZyYW1lQ3JlYXRvck5vZGVQcm94eSIsImRvZ0NyZWF0b3JOb2RlUHJveHkiLCJhcHBsZUNyZWF0b3JOb2RlUHJveHkiLCJidXR0ZXJmbHlDcmVhdG9yTm9kZVByb3h5IiwiYmFsbHNDcmVhdG9yTm9kZVByb3h5Iiwib25lc0NyZWF0b3JOb2RlUHJveHkiLCJyaWdodCIsImNvdW50aW5nT2JqZWN0VHlwZVRvQ291bnRpbmdBcmVhTm9kZSIsIk1hcCIsInNldCIsImNvdW50aW5nQXJlYU5vZGVzIiwiY2VudGVyWSIsInZhbHVlIiwidGVuRnJhbWVOb2RlcyIsInRlbkZyYW1lcyIsImFkZEl0ZW1BZGRlZExpc3RlbmVyIiwiYWRkVGVuRnJhbWVOb2RlIiwiYmluZCIsInBoZXQiLCJqb2lzdCIsImRpc3BsYXkiLCJhZGRJbnB1dExpc3RlbmVyIiwiZG93biIsImV2ZW50Iiwic2NyZWVuIiwic2ltIiwic2VsZWN0ZWRTY3JlZW5Qcm9wZXJ0eSIsInZpZXciLCJ0ZW5GcmFtZU5vZGVGb3VuZCIsInRyYWlsIiwibm9kZXMiLCJmb3JFYWNoIiwibm9kZSIsInNlbGVjdGVkVGVuRnJhbWVQcm9wZXJ0eSIsInJlc2V0QWxsQnV0dG9uIiwibGlzdGVuZXIiLCJpbnRlcnJ1cHRTdWJ0cmVlSW5wdXQiLCJTQ1JFRU5fVklFV19QQURESU5HX1giLCJjcmVhdGVUYW5kZW0iLCJtdWx0aWxpbmsiLCJ0b3AiLCJib3R0b21ZIiwiYm90dG9tIiwicmV0dXJuWm9uZVJpZ2h0Qm91bmRhcnkiLCJudW1iZXJDYXJkQm91bmRzIiwiZ2V0QWxsTnVtYmVyQ2FyZE5vZGVzIiwibnVtYmVyQ2FyZE5vZGUiLCJzZXRDb25zdHJhaW5lZERlc3RpbmF0aW9uIiwicG9zaXRpb25Qcm9wZXJ0eSIsInN5bWJvbENhcmRCb3VuZHMiLCJnZXRBbGxTeW1ib2xOb2RlcyIsInN5bWJvbENhcmROb2RlIiwiZ2V0Q291bnRpbmdPYmplY3RUeXBlIiwiY291bnRpbmdPYmplY3QiLCJjb3VudGluZ09iamVjdFR5cGUiLCJjb3VudGluZ09iamVjdFR5cGVGb3VuZCIsImkiLCJsZW5ndGgiLCJjb3VudGluZ0FyZWFOb2RlIiwiY291bnRpbmdBcmVhIiwiY291bnRpbmdPYmplY3RzIiwiaW5jbHVkZXMiLCJjb3VudGluZ09iamVjdE5vZGUiLCJnZXRDb3VudGluZ09iamVjdE5vZGUiLCJjb3VudGluZ09iamVjdFR5cGVQcm9wZXJ0eSIsImFzc2VydCIsInRlbkZyYW1lIiwiZHJvcExpc3RlbmVyIiwidGVuRnJhbWVOb2RlIiwiaXNEaXNwb3NlZCIsImJvdW5kcyIsImludGVyc2VjdHNCb3VuZHMiLCJpbnB1dEVuYWJsZWQiLCJjbGVhciIsImdldFVuaXF1ZUxlYWZUcmFpbFRvIiwiaWNvbk5vZGUiLCJzbGljZSIsImdsb2JhbE9yaWdpbiIsImxvY2FsVG9HbG9iYWxQb2ludCIsImxvY2FsQm91bmRzIiwibGVmdFRvcCIsImRpc3RhbmNlIiwiZHVyYXRpb24iLCJBTklNQVRJT05fVElNRV9SQU5HRSIsImNvbnN0cmFpblZhbHVlIiwiQU5JTUFUSU9OX1NQRUVEIiwicmVtb3ZlQW5pbWF0aW9uIiwidGFyZ2V0cyIsInByb3BlcnR5IiwiZWFzaW5nIiwiQ1VCSUNfSU5fT1VUIiwidG8iLCJzY2FsZVByb3BlcnR5IiwiSUNPTl9TQ0FMRSIsImZpbmlzaEVtaXR0ZXIiLCJhZGRMaXN0ZW5lciIsInJlbW92ZSIsInN0YXJ0IiwicmVtb3ZlQ291bnRpbmdPYmplY3RMaXN0ZW5lciIsImdldENvcnJlc3BvbmRpbmdDb3VudGluZ0FyZWFOb2RlIiwic2VuZENvdW50aW5nT2JqZWN0VG9DcmVhdG9yTm9kZSIsInB1c2giLCJkaXNwb3NlRW1pdHRlciIsInJlbW92ZVRlbkZyYW1lTm9kZSIsImdldFRlbkZyYW1lTm9kZSIsIl8iLCJwdWxsIiwicmVtb3ZlQ2hpbGQiLCJkaXNwb3NlIiwiZmluZCIsImdldCIsIm5hbWUiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkxhYlNjcmVlblZpZXcudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTktMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogU2NyZWVuVmlldyBmb3IgdGhlICdMYWInIHNjcmVlbi5cclxuICpcclxuICogQGF1dGhvciBDaHJpcyBLbHVzZW5kb3JmIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxyXG4gKi9cclxuXHJcbmltcG9ydCBBbmltYXRpb24gZnJvbSAnLi4vLi4vLi4vLi4vdHdpeHQvanMvQW5pbWF0aW9uLmpzJztcclxuaW1wb3J0IEVudW1lcmF0aW9uUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9FbnVtZXJhdGlvblByb3BlcnR5LmpzJztcclxuaW1wb3J0IFNjcmVlblZpZXcgZnJvbSAnLi4vLi4vLi4vLi4vam9pc3QvanMvU2NyZWVuVmlldy5qcyc7XHJcbmltcG9ydCBSZXNldEFsbEJ1dHRvbiBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvYnV0dG9ucy9SZXNldEFsbEJ1dHRvbi5qcyc7XHJcbmltcG9ydCB7IE1hbnVhbENvbnN0cmFpbnQsIE5vZGUsIFByZXNzTGlzdGVuZXJFdmVudCwgUmVjdGFuZ2xlIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IE51bWJlclN1aXRlQ29tbW9uQ29uc3RhbnRzIGZyb20gJy4uLy4uL2NvbW1vbi9OdW1iZXJTdWl0ZUNvbW1vbkNvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBDb3VudGluZ0FyZWFOb2RlIGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L0NvdW50aW5nQXJlYU5vZGUuanMnO1xyXG5pbXBvcnQgbnVtYmVyU3VpdGVDb21tb24gZnJvbSAnLi4vLi4vbnVtYmVyU3VpdGVDb21tb24uanMnO1xyXG5pbXBvcnQgVGVuRnJhbWUgZnJvbSAnLi4vbW9kZWwvVGVuRnJhbWUuanMnO1xyXG5pbXBvcnQgRHJhZ2dhYmxlVGVuRnJhbWVOb2RlIGZyb20gJy4vRHJhZ2dhYmxlVGVuRnJhbWVOb2RlLmpzJztcclxuaW1wb3J0IE51bWJlckNhcmRDcmVhdG9yQ2Fyb3VzZWwgZnJvbSAnLi9OdW1iZXJDYXJkQ3JlYXRvckNhcm91c2VsLmpzJztcclxuaW1wb3J0IExhYk1vZGVsIGZyb20gJy4uL21vZGVsL0xhYk1vZGVsLmpzJztcclxuaW1wb3J0IFRhbmRlbSBmcm9tICcuLi8uLi8uLi8uLi90YW5kZW0vanMvVGFuZGVtLmpzJztcclxuaW1wb3J0IENvdW50aW5nT2JqZWN0VHlwZSBmcm9tICcuLi8uLi8uLi8uLi9jb3VudGluZy1jb21tb24vanMvY29tbW9uL21vZGVsL0NvdW50aW5nT2JqZWN0VHlwZS5qcyc7XHJcbmltcG9ydCBTeW1ib2xDYXJkQ3JlYXRvclBhbmVsIGZyb20gJy4vU3ltYm9sQ2FyZENyZWF0b3JQYW5lbC5qcyc7XHJcbmltcG9ydCBUZW5GcmFtZUNyZWF0b3JQYW5lbCBmcm9tICcuL1RlbkZyYW1lQ3JlYXRvclBhbmVsLmpzJztcclxuaW1wb3J0IEVhc2luZyBmcm9tICcuLi8uLi8uLi8uLi90d2l4dC9qcy9FYXNpbmcuanMnO1xyXG5pbXBvcnQgQ291bnRpbmdPYmplY3QgZnJvbSAnLi4vLi4vLi4vLi4vY291bnRpbmctY29tbW9uL2pzL2NvbW1vbi9tb2RlbC9Db3VudGluZ09iamVjdC5qcyc7XHJcbmltcG9ydCBDb3VudGluZ0NvbW1vbkNvbnN0YW50cyBmcm9tICcuLi8uLi8uLi8uLi9jb3VudGluZy1jb21tb24vanMvY29tbW9uL0NvdW50aW5nQ29tbW9uQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IERlcml2ZWRQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL0Rlcml2ZWRQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBCb3VuZHMyIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9Cb3VuZHMyLmpzJztcclxuaW1wb3J0IFRSZWFkT25seVByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvVFJlYWRPbmx5UHJvcGVydHkuanMnO1xyXG5pbXBvcnQgUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBUUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9UUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgdHlwZSBTeW1ib2xUeXBlIGZyb20gJy4vU3ltYm9sVHlwZS5qcyc7XHJcbmltcG9ydCBNdWx0aWxpbmsgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9NdWx0aWxpbmsuanMnO1xyXG5pbXBvcnQgTnVtYmVyU3VpdGVDb21tb25QcmVmZXJlbmNlcyBmcm9tICcuLi8uLi9jb21tb24vbW9kZWwvTnVtYmVyU3VpdGVDb21tb25QcmVmZXJlbmNlcy5qcyc7XHJcblxyXG5jb25zdCBURU5fRlJBTUVfQ1JFQVRPUl9QQU5FTF9MRUZUID0gMTQzO1xyXG5jb25zdCBDUkVBVE9SX05PREVfU1BBQ0lORyA9IDE4O1xyXG5cclxuY2xhc3MgTGFiU2NyZWVuVmlldzxUIGV4dGVuZHMgTnVtYmVyU3VpdGVDb21tb25QcmVmZXJlbmNlcz4gZXh0ZW5kcyBTY3JlZW5WaWV3IHtcclxuICBwcml2YXRlIHJlYWRvbmx5IG1vZGVsOiBMYWJNb2RlbDtcclxuXHJcbiAgLy8gbm9kZSBmb3IgYWxsIHBpZWNlcyB0byBzaGFyZVxyXG4gIHB1YmxpYyByZWFkb25seSBwaWVjZUxheWVyOiBOb2RlO1xyXG4gIHB1YmxpYyByZWFkb25seSBudW1iZXJDYXJkQ3JlYXRvckNhcm91c2VsOiBOdW1iZXJDYXJkQ3JlYXRvckNhcm91c2VsO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgdGVuRnJhbWVOb2RlczogRHJhZ2dhYmxlVGVuRnJhbWVOb2RlW107XHJcbiAgcHVibGljIHJlYWRvbmx5IHN5bWJvbENhcmRDcmVhdG9yUGFuZWw6IFN5bWJvbENhcmRDcmVhdG9yUGFuZWw7XHJcbiAgcHJpdmF0ZSByZWFkb25seSB0ZW5GcmFtZUNyZWF0b3JQYW5lbDogVGVuRnJhbWVDcmVhdG9yUGFuZWw7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBvbmVzQ291bnRpbmdBcmVhTm9kZTogQ291bnRpbmdBcmVhTm9kZTtcclxuICBwcml2YXRlIHJlYWRvbmx5IGRvZ0NvdW50aW5nQXJlYU5vZGU6IENvdW50aW5nQXJlYU5vZGU7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBhcHBsZUNvdW50aW5nQXJlYU5vZGU6IENvdW50aW5nQXJlYU5vZGU7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBidXR0ZXJmbHlDb3VudGluZ0FyZWFOb2RlOiBDb3VudGluZ0FyZWFOb2RlO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgYmFsbENvdW50aW5nQXJlYU5vZGU6IENvdW50aW5nQXJlYU5vZGU7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBjb3VudGluZ09iamVjdFR5cGVUb0NvdW50aW5nQXJlYU5vZGU6IE1hcDxDb3VudGluZ09iamVjdFR5cGUsIENvdW50aW5nQXJlYU5vZGU+O1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgY291bnRpbmdBcmVhTm9kZXM6IENvdW50aW5nQXJlYU5vZGVbXTtcclxuICBwdWJsaWMgcmVhZG9ubHkgb2JqZWN0Q291bnRpbmdBcmVhQm91bmRzUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PEJvdW5kczI+O1xyXG4gIHB1YmxpYyByZWFkb25seSBudW1iZXJDYXJkQm91bmRzUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PEJvdW5kczI+O1xyXG4gIHB1YmxpYyByZWFkb25seSBzeW1ib2xDYXJkQm91bmRzUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PEJvdW5kczI+O1xyXG5cclxuICAvLyByZXR1cm4gem9uZSB3aGVyZSBhbnkgcGllY2VzIGZyb20gdGhlIGJvdHRvbSByb3cgd2lsbCByZXR1cm4gdG8gdGhlaXIgaG9tZSBpZiB0aGV5IGludGVyc2VjdCB3aGVuIGRyb3BwZWRcclxuICBwdWJsaWMgcmVhZG9ubHkgYm90dG9tUmV0dXJuWm9uZVByb3BlcnR5OiBUUHJvcGVydHk8Qm91bmRzMj47XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggbW9kZWw6IExhYk1vZGVsLCBzeW1ib2xUeXBlczogU3ltYm9sVHlwZVtdLCBwcmVmZXJlbmNlczogVCwgdGFuZGVtOiBUYW5kZW0gKSB7XHJcblxyXG4gICAgc3VwZXIoIHtcclxuICAgICAgdGFuZGVtOiB0YW5kZW1cclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLm1vZGVsID0gbW9kZWw7XHJcbiAgICB0aGlzLnBpZWNlTGF5ZXIgPSBuZXcgTm9kZSgpO1xyXG4gICAgY29uc3QgYmFja2dyb3VuZERyYWdUYXJnZXROb2RlID0gbmV3IFJlY3RhbmdsZSggdGhpcy5sYXlvdXRCb3VuZHMgKTsgLy8gc2VlIENvdW50aW5nQXJlYU5vZGUgZm9yIGRvY1xyXG5cclxuICAgIHRoaXMubnVtYmVyQ2FyZENyZWF0b3JDYXJvdXNlbCA9IG5ldyBOdW1iZXJDYXJkQ3JlYXRvckNhcm91c2VsKCB0aGlzICk7XHJcbiAgICB0aGlzLm51bWJlckNhcmRDcmVhdG9yQ2Fyb3VzZWwuY2VudGVyWCA9IHRoaXMubGF5b3V0Qm91bmRzLmNlbnRlclg7XHJcbiAgICB0aGlzLmFkZENoaWxkKCB0aGlzLm51bWJlckNhcmRDcmVhdG9yQ2Fyb3VzZWwgKTtcclxuXHJcbiAgICAvLyBjcmVhdGUgdGhlIHN5bWJvbENhcmRDcmVhdG9yUGFuZWwsIHBvc2l0aW9uIGxhdGVyIGFmdGVyIHdlIGNyZWF0ZSB0aGUgYm91bmRzUHJvcGVydHlcclxuICAgIHRoaXMuc3ltYm9sQ2FyZENyZWF0b3JQYW5lbCA9IG5ldyBTeW1ib2xDYXJkQ3JlYXRvclBhbmVsKCBtb2RlbCwgdGhpcywgc3ltYm9sVHlwZXMgKTtcclxuXHJcbiAgICB0aGlzLnRlbkZyYW1lQ3JlYXRvclBhbmVsID0gbmV3IFRlbkZyYW1lQ3JlYXRvclBhbmVsKCBtb2RlbCwgdGhpcyApO1xyXG4gICAgdGhpcy50ZW5GcmFtZUNyZWF0b3JQYW5lbC5sZWZ0ID0gVEVOX0ZSQU1FX0NSRUFUT1JfUEFORUxfTEVGVDtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMudGVuRnJhbWVDcmVhdG9yUGFuZWwgKTtcclxuXHJcbiAgICB0aGlzLm51bWJlckNhcmRCb3VuZHNQcm9wZXJ0eSA9IG5ldyBEZXJpdmVkUHJvcGVydHkoIFsgdGhpcy52aXNpYmxlQm91bmRzUHJvcGVydHkgXSwgdmlzaWJsZUJvdW5kcyA9PiB7XHJcbiAgICAgIHJldHVybiB2aXNpYmxlQm91bmRzLndpdGhNYXhZKCB2aXNpYmxlQm91bmRzLm1heFkgLSBOdW1iZXJTdWl0ZUNvbW1vbkNvbnN0YW50cy5TQ1JFRU5fVklFV19QQURESU5HX1kgLVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW5GcmFtZUNyZWF0b3JQYW5lbC5oZWlnaHQgKVxyXG4gICAgICAgIC53aXRoTWF4WCggdmlzaWJsZUJvdW5kcy5tYXhYIC0gdGhpcy5zeW1ib2xDYXJkQ3JlYXRvclBhbmVsLndpZHRoIC0gQ291bnRpbmdDb21tb25Db25zdGFudHMuQ09VTlRJTkdfQVJFQV9NQVJHSU4gKTtcclxuICAgIH0gKTtcclxuICAgIHRoaXMuc3ltYm9sQ2FyZEJvdW5kc1Byb3BlcnR5ID0gbmV3IERlcml2ZWRQcm9wZXJ0eSggWyB0aGlzLnZpc2libGVCb3VuZHNQcm9wZXJ0eSBdLCB2aXNpYmxlQm91bmRzID0+IHtcclxuICAgICAgcmV0dXJuIHZpc2libGVCb3VuZHMud2l0aE1pblkoIHZpc2libGVCb3VuZHMubWluWSArIE51bWJlclN1aXRlQ29tbW9uQ29uc3RhbnRzLlNDUkVFTl9WSUVXX1BBRERJTkdfWSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm51bWJlckNhcmRDcmVhdG9yQ2Fyb3VzZWwuaGVpZ2h0ICkud2l0aE1heFkoXHJcbiAgICAgICAgdmlzaWJsZUJvdW5kcy5tYXhZIC0gQ291bnRpbmdDb21tb25Db25zdGFudHMuQ09VTlRJTkdfQVJFQV9NQVJHSU4gLSB0aGlzLnRlbkZyYW1lQ3JlYXRvclBhbmVsLmhlaWdodCApO1xyXG4gICAgfSApO1xyXG4gICAgdGhpcy5vYmplY3RDb3VudGluZ0FyZWFCb3VuZHNQcm9wZXJ0eSA9IG5ldyBEZXJpdmVkUHJvcGVydHkoIFsgdGhpcy52aXNpYmxlQm91bmRzUHJvcGVydHkgXSwgdmlzaWJsZUJvdW5kcyA9PiB7XHJcbiAgICAgIHJldHVybiB2aXNpYmxlQm91bmRzLndpdGhNaW5ZKCB2aXNpYmxlQm91bmRzLm1pblkgKyBOdW1iZXJTdWl0ZUNvbW1vbkNvbnN0YW50cy5TQ1JFRU5fVklFV19QQURESU5HX1kgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5udW1iZXJDYXJkQ3JlYXRvckNhcm91c2VsLmhlaWdodCApXHJcbiAgICAgICAgLndpdGhNYXhYKCB2aXNpYmxlQm91bmRzLm1heFggLSB0aGlzLnN5bWJvbENhcmRDcmVhdG9yUGFuZWwud2lkdGggLSBDb3VudGluZ0NvbW1vbkNvbnN0YW50cy5DT1VOVElOR19BUkVBX01BUkdJTiApO1xyXG4gICAgfSApO1xyXG5cclxuICAgIHRoaXMuYm90dG9tUmV0dXJuWm9uZVByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCBuZXcgQm91bmRzMiggMCwgMCwgMCwgMCApICk7XHJcblxyXG4gICAgY29uc3QgY291bnRpbmdBcmVhTm9kZU9wdGlvbnMgPSB7XHJcbiAgICAgIGNvdW50aW5nT2JqZWN0Q3JlYXRvclBhbmVsT3B0aW9uczoge1xyXG4gICAgICAgIGFycm93QnV0dG9uc1Zpc2libGU6IGZhbHNlLCAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL251bWJlci1zdWl0ZS1jb21tb24vaXNzdWVzLzExXHJcbiAgICAgICAgeE1hcmdpbjogMjAgLy8gaW5jcmVhc2UgYSBiaXQgYmVjYXVzZSB3ZSdyZSBub3Qgc2hvd2luZyBhcnJvdyBidXR0b25zXHJcbiAgICAgIH0sXHJcbiAgICAgIGNvdW50aW5nT2JqZWN0TGF5ZXJOb2RlOiB0aGlzLnBpZWNlTGF5ZXIsXHJcbiAgICAgIGJhY2tncm91bmREcmFnVGFyZ2V0Tm9kZTogYmFja2dyb3VuZERyYWdUYXJnZXROb2RlLFxyXG4gICAgICByZXR1cm5ab25lUHJvcGVydHk6IHRoaXMuYm90dG9tUmV0dXJuWm9uZVByb3BlcnR5XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGNyZWF0ZSBhbmQgYWRkIHRoZSBsZWZ0IE9iamVjdHNDb3VudGluZ0FyZWFOb2RlXHJcbiAgICB0aGlzLmRvZ0NvdW50aW5nQXJlYU5vZGUgPSBuZXcgQ291bnRpbmdBcmVhTm9kZShcclxuICAgICAgbW9kZWwuZG9nQ291bnRpbmdBcmVhLFxyXG4gICAgICBuZXcgRW51bWVyYXRpb25Qcm9wZXJ0eSggQ291bnRpbmdPYmplY3RUeXBlLkRPRyApLFxyXG4gICAgICB0aGlzLm9iamVjdENvdW50aW5nQXJlYUJvdW5kc1Byb3BlcnR5LFxyXG4gICAgICBjb3VudGluZ0FyZWFOb2RlT3B0aW9uc1xyXG4gICAgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMuZG9nQ291bnRpbmdBcmVhTm9kZSApO1xyXG5cclxuICAgIC8vIGNyZWF0ZSBhbmQgYWRkIHRoZSByaWdodCBPYmplY3RzQ291bnRpbmdBcmVhTm9kZVxyXG4gICAgdGhpcy5hcHBsZUNvdW50aW5nQXJlYU5vZGUgPSBuZXcgQ291bnRpbmdBcmVhTm9kZShcclxuICAgICAgbW9kZWwuYXBwbGVDb3VudGluZ0FyZWEsXHJcbiAgICAgIG5ldyBFbnVtZXJhdGlvblByb3BlcnR5KCBDb3VudGluZ09iamVjdFR5cGUuQVBQTEUgKSxcclxuICAgICAgdGhpcy5vYmplY3RDb3VudGluZ0FyZWFCb3VuZHNQcm9wZXJ0eSxcclxuICAgICAgY291bnRpbmdBcmVhTm9kZU9wdGlvbnNcclxuICAgICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCB0aGlzLmFwcGxlQ291bnRpbmdBcmVhTm9kZSApO1xyXG5cclxuICAgIC8vIGNyZWF0ZSBhbmQgYWRkIHRoZSByaWdodCBPYmplY3RzQ291bnRpbmdBcmVhTm9kZVxyXG4gICAgdGhpcy5idXR0ZXJmbHlDb3VudGluZ0FyZWFOb2RlID0gbmV3IENvdW50aW5nQXJlYU5vZGUoXHJcbiAgICAgIG1vZGVsLmJ1dHRlcmZseUNvdW50aW5nQXJlYSxcclxuICAgICAgbmV3IEVudW1lcmF0aW9uUHJvcGVydHkoIENvdW50aW5nT2JqZWN0VHlwZS5CVVRURVJGTFkgKSxcclxuICAgICAgdGhpcy5vYmplY3RDb3VudGluZ0FyZWFCb3VuZHNQcm9wZXJ0eSxcclxuICAgICAgY291bnRpbmdBcmVhTm9kZU9wdGlvbnNcclxuICAgICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCB0aGlzLmJ1dHRlcmZseUNvdW50aW5nQXJlYU5vZGUgKTtcclxuXHJcbiAgICAvLyBjcmVhdGUgYW5kIGFkZCB0aGUgcmlnaHQgT2JqZWN0c0NvdW50aW5nQXJlYU5vZGVcclxuICAgIHRoaXMuYmFsbENvdW50aW5nQXJlYU5vZGUgPSBuZXcgQ291bnRpbmdBcmVhTm9kZShcclxuICAgICAgbW9kZWwuYmFsbENvdW50aW5nQXJlYSxcclxuICAgICAgbmV3IEVudW1lcmF0aW9uUHJvcGVydHkoIENvdW50aW5nT2JqZWN0VHlwZS5CQUxMICksXHJcbiAgICAgIHRoaXMub2JqZWN0Q291bnRpbmdBcmVhQm91bmRzUHJvcGVydHksXHJcbiAgICAgIGNvdW50aW5nQXJlYU5vZGVPcHRpb25zXHJcbiAgICApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggdGhpcy5iYWxsQ291bnRpbmdBcmVhTm9kZSApO1xyXG5cclxuICAgIC8vIGNyZWF0ZSBhbmQgYWRkIHRoZSBDb3VudGluZ0FyZWFOb2RlXHJcbiAgICB0aGlzLm9uZXNDb3VudGluZ0FyZWFOb2RlID0gbmV3IENvdW50aW5nQXJlYU5vZGUoXHJcbiAgICAgIG1vZGVsLm9uZXNDb3VudGluZ0FyZWEsXHJcbiAgICAgIG5ldyBFbnVtZXJhdGlvblByb3BlcnR5KCBDb3VudGluZ09iamVjdFR5cGUuUEFQRVJfTlVNQkVSICksXHJcbiAgICAgIHRoaXMub2JqZWN0Q291bnRpbmdBcmVhQm91bmRzUHJvcGVydHksXHJcbiAgICAgIGNvdW50aW5nQXJlYU5vZGVPcHRpb25zXHJcbiAgICApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggdGhpcy5vbmVzQ291bnRpbmdBcmVhTm9kZSApO1xyXG5cclxuICAgIGNvbnN0IGhpZGVPbmVzQ291bnRpbmdBcmVhTm9kZUFkanVzdG1lbnQgPSB0aGlzLm9uZXNDb3VudGluZ0FyZWFOb2RlLmNvdW50aW5nT2JqZWN0Q3JlYXRvclBhbmVsLndpZHRoIC8gMjtcclxuXHJcbiAgICBwcmVmZXJlbmNlcy5zaG93TGFiT25lc1Byb3BlcnR5LmxpbmsoIHNob3dMYWJPbmVzID0+IHtcclxuICAgICAgaWYgKCBzaG93TGFiT25lcyApIHtcclxuICAgICAgICB0aGlzLnRlbkZyYW1lQ3JlYXRvclBhbmVsLmxlZnQgPSBURU5fRlJBTUVfQ1JFQVRPUl9QQU5FTF9MRUZUO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHRoaXMubW9kZWwub25lc0NvdW50aW5nQXJlYS5yZXNldCgpO1xyXG4gICAgICAgIHRoaXMudGVuRnJhbWVDcmVhdG9yUGFuZWwubGVmdCA9IFRFTl9GUkFNRV9DUkVBVE9SX1BBTkVMX0xFRlQgKyBoaWRlT25lc0NvdW50aW5nQXJlYU5vZGVBZGp1c3RtZW50O1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMub25lc0NvdW50aW5nQXJlYU5vZGUudmlzaWJsZSA9IHNob3dMYWJPbmVzO1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIE5vdGUgdGhhdCBhbGwgQ291bnRpbmdBcmVhTm9kZSBpbnN0YW5jZXMgYXJlIGFzc3VtZWQgdG8gYmUgcG9zaXRpb25lZCBhdCAoMCwwKSBhbmQgdGhlcmVmb3JlIGFyZSBpblxyXG4gICAgLy8gdGhlIHNhbWUgY29vcmRpbmF0ZSBmcmFtZSBhcyB0aGlzIFNjcmVlblZpZXcuIEhlcmUgd2UgcmVhY2ggaW5zaWRlIHRob3NlIENvdW50aW5nQXJlYU5vZGUgaW5zdGFuY2VzXHJcbiAgICAvLyBhbmQgcG9zaXRpb24gdGhlaXIgQ291bnRpbmdPYmplY3RDcmVhdG9yUGFuZWxzLiBUaGlzIG1hZGUgaXQgaW1wb3NzaWJsZSB0byBjaGFuZ2UgdGhlIGxheW91dCBzbyB0aGF0XHJcbiAgICAvLyBhbGwgY291bnRpbmcgb2JqZWN0cyBhcmUgaW4gYSBzaW5nbGUgcGFuZWwsIHNvIHdlIGJhaWxlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvbnVtYmVyLXN1aXRlLWNvbW1vbi9pc3N1ZXMvMTEuXHJcbiAgICBNYW51YWxDb25zdHJhaW50LmNyZWF0ZSggdGhpcywgWyB0aGlzLnRlbkZyYW1lQ3JlYXRvclBhbmVsLCB0aGlzLmRvZ0NvdW50aW5nQXJlYU5vZGUuY291bnRpbmdPYmplY3RDcmVhdG9yUGFuZWwsXHJcbiAgICAgICAgdGhpcy5hcHBsZUNvdW50aW5nQXJlYU5vZGUuY291bnRpbmdPYmplY3RDcmVhdG9yUGFuZWwsIHRoaXMuYnV0dGVyZmx5Q291bnRpbmdBcmVhTm9kZS5jb3VudGluZ09iamVjdENyZWF0b3JQYW5lbCxcclxuICAgICAgICB0aGlzLmJhbGxDb3VudGluZ0FyZWFOb2RlLmNvdW50aW5nT2JqZWN0Q3JlYXRvclBhbmVsLCB0aGlzLm9uZXNDb3VudGluZ0FyZWFOb2RlLmNvdW50aW5nT2JqZWN0Q3JlYXRvclBhbmVsIF0sXHJcbiAgICAgICggdGVuRnJhbWVDcmVhdG9yTm9kZVByb3h5LCBkb2dDcmVhdG9yTm9kZVByb3h5LCBhcHBsZUNyZWF0b3JOb2RlUHJveHksIGJ1dHRlcmZseUNyZWF0b3JOb2RlUHJveHksXHJcbiAgICAgICAgYmFsbHNDcmVhdG9yTm9kZVByb3h5LCBvbmVzQ3JlYXRvck5vZGVQcm94eSApID0+IHtcclxuICAgICAgICBkb2dDcmVhdG9yTm9kZVByb3h5LmxlZnQgPSB0ZW5GcmFtZUNyZWF0b3JOb2RlUHJveHkucmlnaHQgKyBDUkVBVE9SX05PREVfU1BBQ0lORztcclxuICAgICAgICBhcHBsZUNyZWF0b3JOb2RlUHJveHkubGVmdCA9IGRvZ0NyZWF0b3JOb2RlUHJveHkucmlnaHQgKyBDUkVBVE9SX05PREVfU1BBQ0lORztcclxuICAgICAgICBidXR0ZXJmbHlDcmVhdG9yTm9kZVByb3h5LmxlZnQgPSBhcHBsZUNyZWF0b3JOb2RlUHJveHkucmlnaHQgKyBDUkVBVE9SX05PREVfU1BBQ0lORztcclxuICAgICAgICBiYWxsc0NyZWF0b3JOb2RlUHJveHkubGVmdCA9IGJ1dHRlcmZseUNyZWF0b3JOb2RlUHJveHkucmlnaHQgKyBDUkVBVE9SX05PREVfU1BBQ0lORztcclxuICAgICAgICBvbmVzQ3JlYXRvck5vZGVQcm94eS5sZWZ0ID0gYmFsbHNDcmVhdG9yTm9kZVByb3h5LnJpZ2h0ICsgQ1JFQVRPUl9OT0RFX1NQQUNJTkc7XHJcbiAgICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLmNvdW50aW5nT2JqZWN0VHlwZVRvQ291bnRpbmdBcmVhTm9kZSA9IG5ldyBNYXAoKTtcclxuICAgIHRoaXMuY291bnRpbmdPYmplY3RUeXBlVG9Db3VudGluZ0FyZWFOb2RlLnNldCggQ291bnRpbmdPYmplY3RUeXBlLkRPRywgdGhpcy5kb2dDb3VudGluZ0FyZWFOb2RlICk7XHJcbiAgICB0aGlzLmNvdW50aW5nT2JqZWN0VHlwZVRvQ291bnRpbmdBcmVhTm9kZS5zZXQoIENvdW50aW5nT2JqZWN0VHlwZS5BUFBMRSwgdGhpcy5hcHBsZUNvdW50aW5nQXJlYU5vZGUgKTtcclxuICAgIHRoaXMuY291bnRpbmdPYmplY3RUeXBlVG9Db3VudGluZ0FyZWFOb2RlLnNldCggQ291bnRpbmdPYmplY3RUeXBlLkJVVFRFUkZMWSwgdGhpcy5idXR0ZXJmbHlDb3VudGluZ0FyZWFOb2RlICk7XHJcbiAgICB0aGlzLmNvdW50aW5nT2JqZWN0VHlwZVRvQ291bnRpbmdBcmVhTm9kZS5zZXQoIENvdW50aW5nT2JqZWN0VHlwZS5CQUxMLCB0aGlzLmJhbGxDb3VudGluZ0FyZWFOb2RlICk7XHJcbiAgICB0aGlzLmNvdW50aW5nT2JqZWN0VHlwZVRvQ291bnRpbmdBcmVhTm9kZS5zZXQoIENvdW50aW5nT2JqZWN0VHlwZS5QQVBFUl9OVU1CRVIsIHRoaXMub25lc0NvdW50aW5nQXJlYU5vZGUgKTtcclxuXHJcbiAgICB0aGlzLmNvdW50aW5nQXJlYU5vZGVzID0gW1xyXG4gICAgICB0aGlzLmRvZ0NvdW50aW5nQXJlYU5vZGUsXHJcbiAgICAgIHRoaXMuYXBwbGVDb3VudGluZ0FyZWFOb2RlLFxyXG4gICAgICB0aGlzLmJ1dHRlcmZseUNvdW50aW5nQXJlYU5vZGUsXHJcbiAgICAgIHRoaXMuYmFsbENvdW50aW5nQXJlYU5vZGUsXHJcbiAgICAgIHRoaXMub25lc0NvdW50aW5nQXJlYU5vZGVcclxuICAgIF07XHJcblxyXG4gICAgLy8gcG9zaXRpb24gYW5kIGFkZCB0aGUgc3ltYm9sQ2FyZENyZWF0b3JQYW5lbCBsYXRlciwgc28gd2UgaGF2ZSBhY2Nlc3MgdG8gaXRzIGJvdW5kcyBQcm9wZXJ0eVxyXG4gICAgdGhpcy5zeW1ib2xDYXJkQ3JlYXRvclBhbmVsLmNlbnRlclkgPSB0aGlzLnN5bWJvbENhcmRCb3VuZHNQcm9wZXJ0eS52YWx1ZS5jZW50ZXJZO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggdGhpcy5zeW1ib2xDYXJkQ3JlYXRvclBhbmVsICk7XHJcblxyXG4gICAgdGhpcy50ZW5GcmFtZU5vZGVzID0gW107XHJcblxyXG4gICAgbW9kZWwudGVuRnJhbWVzLmFkZEl0ZW1BZGRlZExpc3RlbmVyKCB0aGlzLmFkZFRlbkZyYW1lTm9kZS5iaW5kKCB0aGlzICkgKTtcclxuXHJcbiAgICAvLyBhZGQgdGhlIHBpZWNlIGxheWVyXHJcbiAgICB0aGlzLmFkZENoaWxkKCB0aGlzLnBpZWNlTGF5ZXIgKTtcclxuXHJcbiAgICBwaGV0LmpvaXN0LmRpc3BsYXkuYWRkSW5wdXRMaXN0ZW5lcigge1xyXG4gICAgICBkb3duOiAoIGV2ZW50OiBQcmVzc0xpc3RlbmVyRXZlbnQgKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgc2NyZWVuID0gcGhldC5qb2lzdC5zaW0uc2VsZWN0ZWRTY3JlZW5Qcm9wZXJ0eS52YWx1ZTtcclxuICAgICAgICBpZiAoIHNjcmVlbiAmJiBzY3JlZW4udmlldyA9PT0gdGhpcyApIHtcclxuXHJcbiAgICAgICAgICBsZXQgdGVuRnJhbWVOb2RlRm91bmQgPSBmYWxzZTtcclxuICAgICAgICAgIGV2ZW50LnRyYWlsLm5vZGVzLmZvckVhY2goIG5vZGUgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIG5vZGUgaW5zdGFuY2VvZiBEcmFnZ2FibGVUZW5GcmFtZU5vZGUgKSB7XHJcbiAgICAgICAgICAgICAgdGVuRnJhbWVOb2RlRm91bmQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgaWYgKCAhdGVuRnJhbWVOb2RlRm91bmQgKSB7XHJcbiAgICAgICAgICAgIG1vZGVsLnNlbGVjdGVkVGVuRnJhbWVQcm9wZXJ0eS52YWx1ZSA9IG51bGw7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gY3JlYXRlIGFuZCBhZGQgdGhlIFJlc2V0QWxsQnV0dG9uXHJcbiAgICBjb25zdCByZXNldEFsbEJ1dHRvbiA9IG5ldyBSZXNldEFsbEJ1dHRvbigge1xyXG4gICAgICBsaXN0ZW5lcjogKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaW50ZXJydXB0U3VidHJlZUlucHV0KCk7IC8vIGNhbmNlbCBpbnRlcmFjdGlvbnMgdGhhdCBtYXkgYmUgaW4gcHJvZ3Jlc3NcclxuICAgICAgICBtb2RlbC5yZXNldCgpO1xyXG4gICAgICAgIHRoaXMubnVtYmVyQ2FyZENyZWF0b3JDYXJvdXNlbC5yZXNldCgpO1xyXG4gICAgICAgIHRoaXMuc3ltYm9sQ2FyZENyZWF0b3JQYW5lbC5yZXNldCgpO1xyXG4gICAgICB9LFxyXG4gICAgICByaWdodDogdGhpcy5sYXlvdXRCb3VuZHMubWF4WCAtIE51bWJlclN1aXRlQ29tbW9uQ29uc3RhbnRzLlNDUkVFTl9WSUVXX1BBRERJTkdfWCxcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAncmVzZXRBbGxCdXR0b24nIClcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHJlc2V0QWxsQnV0dG9uICk7XHJcblxyXG4gICAgLy8gVXBkYXRlIHRoZSBwb3NpdGlvbiBvZiBwYW5lbHMgd2hlbiB0aGUgdmlzaWJsZSBib3VuZHMgY2hhbmdlIHNvIGV2ZXJ5dGhpbmcgZmxvYXRzIHRvIGFuIGVkZ2Ugb2YgdGhlIHdpbmRvdy5cclxuICAgIE11bHRpbGluay5tdWx0aWxpbmsoIFsgdGhpcy52aXNpYmxlQm91bmRzUHJvcGVydHksIHByZWZlcmVuY2VzLnNob3dMYWJPbmVzUHJvcGVydHkgXSxcclxuICAgICAgKCB2aXNpYmxlQm91bmRzLCBzaG93TGFiT25lcyApID0+IHtcclxuICAgICAgICB0aGlzLm51bWJlckNhcmRDcmVhdG9yQ2Fyb3VzZWwudG9wID0gdmlzaWJsZUJvdW5kcy50b3AgKyBOdW1iZXJTdWl0ZUNvbW1vbkNvbnN0YW50cy5TQ1JFRU5fVklFV19QQURESU5HX1k7XHJcblxyXG4gICAgICAgIHRoaXMuc3ltYm9sQ2FyZENyZWF0b3JQYW5lbC5yaWdodCA9IHZpc2libGVCb3VuZHMucmlnaHQgLSBDb3VudGluZ0NvbW1vbkNvbnN0YW50cy5DT1VOVElOR19BUkVBX01BUkdJTjtcclxuICAgICAgICByZXNldEFsbEJ1dHRvbi5yaWdodCA9IHZpc2libGVCb3VuZHMucmlnaHQgLSBDb3VudGluZ0NvbW1vbkNvbnN0YW50cy5DT1VOVElOR19BUkVBX01BUkdJTjtcclxuICAgICAgICBjb25zdCBib3R0b21ZID0gdmlzaWJsZUJvdW5kcy5ib3R0b20gLSBDb3VudGluZ0NvbW1vbkNvbnN0YW50cy5DT1VOVElOR19BUkVBX01BUkdJTjtcclxuICAgICAgICB0aGlzLnRlbkZyYW1lQ3JlYXRvclBhbmVsLmJvdHRvbSA9IGJvdHRvbVk7XHJcbiAgICAgICAgcmVzZXRBbGxCdXR0b24uYm90dG9tID0gYm90dG9tWTtcclxuXHJcbiAgICAgICAgY29uc3QgcmV0dXJuWm9uZVJpZ2h0Qm91bmRhcnkgPSBzaG93TGFiT25lcyA/IHRoaXMub25lc0NvdW50aW5nQXJlYU5vZGUucmlnaHQgOiB0aGlzLmJhbGxDb3VudGluZ0FyZWFOb2RlLnJpZ2h0O1xyXG5cclxuICAgICAgICB0aGlzLmJvdHRvbVJldHVyblpvbmVQcm9wZXJ0eS52YWx1ZSA9IG5ldyBCb3VuZHMyKCB0aGlzLnRlbkZyYW1lQ3JlYXRvclBhbmVsLmxlZnQsIHRoaXMudGVuRnJhbWVDcmVhdG9yUGFuZWwudG9wLFxyXG4gICAgICAgICAgcmV0dXJuWm9uZVJpZ2h0Qm91bmRhcnksIGJvdHRvbVkgKTtcclxuICAgICAgfSApO1xyXG5cclxuICAgIC8vIENvbnN0cmFpbiB0aGUgcG9zaXRpb24gb2YgdGhlIG51bWJlckNhcmRzIHdoZW4gdGhlIGJvdW5kcyBjaGFuZ2UuXHJcbiAgICB0aGlzLm51bWJlckNhcmRCb3VuZHNQcm9wZXJ0eS5saW5rKCBudW1iZXJDYXJkQm91bmRzID0+IHtcclxuICAgICAgdGhpcy5udW1iZXJDYXJkQ3JlYXRvckNhcm91c2VsLmdldEFsbE51bWJlckNhcmROb2RlcygpLmZvckVhY2goIG51bWJlckNhcmROb2RlID0+IHtcclxuICAgICAgICBudW1iZXJDYXJkTm9kZS5zZXRDb25zdHJhaW5lZERlc3RpbmF0aW9uKCBudW1iZXJDYXJkQm91bmRzLCBudW1iZXJDYXJkTm9kZS5wb3NpdGlvblByb3BlcnR5LnZhbHVlICk7XHJcbiAgICAgIH0gKTtcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBDb25zdHJhaW4gdGhlIHBvc2l0aW9uIG9mIHRoZSBzeW1ib2xDYXJkcyB3aGVuIHRoZSBib3VuZHMgY2hhbmdlLlxyXG4gICAgdGhpcy5zeW1ib2xDYXJkQm91bmRzUHJvcGVydHkubGluayggc3ltYm9sQ2FyZEJvdW5kcyA9PiB7XHJcbiAgICAgIHRoaXMuc3ltYm9sQ2FyZENyZWF0b3JQYW5lbC5nZXRBbGxTeW1ib2xOb2RlcygpLmZvckVhY2goIHN5bWJvbENhcmROb2RlID0+IHtcclxuICAgICAgICBzeW1ib2xDYXJkTm9kZS5zZXRDb25zdHJhaW5lZERlc3RpbmF0aW9uKCBzeW1ib2xDYXJkQm91bmRzLCBzeW1ib2xDYXJkTm9kZS5wb3NpdGlvblByb3BlcnR5LnZhbHVlICk7XHJcbiAgICAgIH0gKTtcclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgdGhlIGNvdW50aW5nIG9iamVjdCB0eXBlIG9mIHRoZSBDb3VudGluZ09iamVjdE5vZGUgZm9yIHRoZSBnaXZlbiBDb3VudGluZ09iamVjdFxyXG4gICAqL1xyXG4gIHByaXZhdGUgZ2V0Q291bnRpbmdPYmplY3RUeXBlKCBjb3VudGluZ09iamVjdDogQ291bnRpbmdPYmplY3QgKTogQ291bnRpbmdPYmplY3RUeXBlIHtcclxuICAgIGxldCBjb3VudGluZ09iamVjdFR5cGUgPSBDb3VudGluZ09iamVjdFR5cGUuRE9HO1xyXG4gICAgbGV0IGNvdW50aW5nT2JqZWN0VHlwZUZvdW5kID0gZmFsc2U7XHJcblxyXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgdGhpcy5jb3VudGluZ0FyZWFOb2Rlcy5sZW5ndGg7IGkrKyApIHtcclxuICAgICAgY29uc3QgY291bnRpbmdBcmVhTm9kZSA9IHRoaXMuY291bnRpbmdBcmVhTm9kZXNbIGkgXTtcclxuXHJcbiAgICAgIGlmICggY291bnRpbmdBcmVhTm9kZS5jb3VudGluZ0FyZWEuY291bnRpbmdPYmplY3RzLmluY2x1ZGVzKCBjb3VudGluZ09iamVjdCApICkge1xyXG4gICAgICAgIGNvbnN0IGNvdW50aW5nT2JqZWN0Tm9kZSA9IGNvdW50aW5nQXJlYU5vZGUuZ2V0Q291bnRpbmdPYmplY3ROb2RlKCBjb3VudGluZ09iamVjdCApO1xyXG4gICAgICAgIGNvdW50aW5nT2JqZWN0VHlwZSA9IGNvdW50aW5nT2JqZWN0Tm9kZS5jb3VudGluZ09iamVjdFR5cGVQcm9wZXJ0eS52YWx1ZTtcclxuICAgICAgICBjb3VudGluZ09iamVjdFR5cGVGb3VuZCA9IHRydWU7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBjb3VudGluZ09iamVjdFR5cGVGb3VuZCwgJ2NvdW50aW5nT2JqZWN0VHlwZSBub3QgZm91bmQhJyApO1xyXG4gICAgcmV0dXJuIGNvdW50aW5nT2JqZWN0VHlwZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENhbGxlZCB3aGVuIGEgbmV3IFRlbiBGcmFtZSBpcyBhZGRlZCB0byB0aGUgbW9kZWwuXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhZGRUZW5GcmFtZU5vZGUoIHRlbkZyYW1lOiBUZW5GcmFtZSApOiB2b2lkIHtcclxuXHJcbiAgICAvLyBDYWxsZWQgd2hlbiBEcmFnZ2FibGVUZW5GcmFtZU5vZGUgZHJhZyBjeWNsZSBlbmRzLlxyXG4gICAgY29uc3QgZHJvcExpc3RlbmVyID0gKCB0ZW5GcmFtZU5vZGU6IERyYWdnYWJsZVRlbkZyYW1lTm9kZSApID0+IHtcclxuXHJcbiAgICAgIC8vIElmIGEgZHJhZyB3YXMgaW50ZXJydXB0ZWQgYnkgcHJlc3NpbmcgdGhlIFJlc2V0IEFsbCBidXR0b24gKG11bHRpdG91Y2gpLCB0aGVuIHRlbkZyYW1lTm9kZSB3aWxsIGFscmVhZHlcclxuICAgICAgLy8gaGF2ZSBiZWVuIGRpc3Bvc2VkLCBhbmQgdGhpcyBjYW4gYmUgc2hvcnQtY2lyY3VpdGVkLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL251bWJlci1wbGF5L2lzc3Vlcy8xOTVcclxuICAgICAgaWYgKCAhdGVuRnJhbWVOb2RlLmlzRGlzcG9zZWQgJiYgdGVuRnJhbWVOb2RlLmJvdW5kcy5pbnRlcnNlY3RzQm91bmRzKCB0aGlzLmJvdHRvbVJldHVyblpvbmVQcm9wZXJ0eS52YWx1ZSApICkge1xyXG4gICAgICAgIHRlbkZyYW1lTm9kZS5pbnB1dEVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICB0ZW5GcmFtZS5jb3VudGluZ09iamVjdHMuY2xlYXIoKTtcclxuXHJcbiAgICAgICAgLy8gY2FsY3VsYXRlIGljb24ncyBvcmlnaW5cclxuICAgICAgICBjb25zdCB0cmFpbCA9IHRoaXMuZ2V0VW5pcXVlTGVhZlRyYWlsVG8oIHRoaXMudGVuRnJhbWVDcmVhdG9yUGFuZWwuaWNvbk5vZGUgKS5zbGljZSggMSApO1xyXG4gICAgICAgIGNvbnN0IGdsb2JhbE9yaWdpbiA9IHRyYWlsLmxvY2FsVG9HbG9iYWxQb2ludCggdGhpcy50ZW5GcmFtZUNyZWF0b3JQYW5lbC5pY29uTm9kZS5sb2NhbEJvdW5kcy5sZWZ0VG9wICk7XHJcblxyXG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0gdGVuRnJhbWUucG9zaXRpb25Qcm9wZXJ0eS52YWx1ZS5kaXN0YW5jZSggZ2xvYmFsT3JpZ2luICk7XHJcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPVxyXG4gICAgICAgICAgQ291bnRpbmdDb21tb25Db25zdGFudHMuQU5JTUFUSU9OX1RJTUVfUkFOR0UuY29uc3RyYWluVmFsdWUoIGRpc3RhbmNlIC8gQ291bnRpbmdDb21tb25Db25zdGFudHMuQU5JTUFUSU9OX1NQRUVEICk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlbW92ZUFuaW1hdGlvbiA9IG5ldyBBbmltYXRpb24oIHtcclxuICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcclxuICAgICAgICAgIHRhcmdldHM6IFsge1xyXG4gICAgICAgICAgICBwcm9wZXJ0eTogdGVuRnJhbWUucG9zaXRpb25Qcm9wZXJ0eSxcclxuICAgICAgICAgICAgZWFzaW5nOiBFYXNpbmcuQ1VCSUNfSU5fT1VULFxyXG4gICAgICAgICAgICB0bzogZ2xvYmFsT3JpZ2luXHJcbiAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgIHByb3BlcnR5OiB0ZW5GcmFtZS5zY2FsZVByb3BlcnR5LFxyXG4gICAgICAgICAgICBlYXNpbmc6IEVhc2luZy5DVUJJQ19JTl9PVVQsXHJcbiAgICAgICAgICAgIHRvOiBUZW5GcmFtZUNyZWF0b3JQYW5lbC5JQ09OX1NDQUxFXHJcbiAgICAgICAgICB9IF1cclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgIHJlbW92ZUFuaW1hdGlvbi5maW5pc2hFbWl0dGVyLmFkZExpc3RlbmVyKCAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLm1vZGVsLnRlbkZyYW1lcy5pbmNsdWRlcyggdGVuRnJhbWUgKSAmJiB0aGlzLm1vZGVsLnRlbkZyYW1lcy5yZW1vdmUoIHRlbkZyYW1lICk7XHJcbiAgICAgICAgfSApO1xyXG4gICAgICAgIHJlbW92ZUFuaW1hdGlvbi5zdGFydCgpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHRlbkZyYW1lTm9kZSA9IG5ldyBEcmFnZ2FibGVUZW5GcmFtZU5vZGUoIHRlbkZyYW1lLCB0aGlzLm1vZGVsLnNlbGVjdGVkVGVuRnJhbWVQcm9wZXJ0eSxcclxuICAgICAgdGhpcy5vYmplY3RDb3VudGluZ0FyZWFCb3VuZHNQcm9wZXJ0eSwge1xyXG4gICAgICAgIGRyb3BMaXN0ZW5lcjogZHJvcExpc3RlbmVyLFxyXG4gICAgICAgIHJlbW92ZUNvdW50aW5nT2JqZWN0TGlzdGVuZXI6IGNvdW50aW5nT2JqZWN0ID0+IHtcclxuICAgICAgICAgIGNvbnN0IGNvdW50aW5nQXJlYU5vZGUgPSB0aGlzLmdldENvcnJlc3BvbmRpbmdDb3VudGluZ0FyZWFOb2RlKCBjb3VudGluZ09iamVjdCApO1xyXG4gICAgICAgICAgY291bnRpbmdBcmVhTm9kZS5jb3VudGluZ0FyZWEuc2VuZENvdW50aW5nT2JqZWN0VG9DcmVhdG9yTm9kZSggY291bnRpbmdPYmplY3QgKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldENvdW50aW5nT2JqZWN0Tm9kZTogY291bnRpbmdPYmplY3QgPT4ge1xyXG4gICAgICAgICAgY29uc3QgY291bnRpbmdBcmVhTm9kZSA9IHRoaXMuZ2V0Q29ycmVzcG9uZGluZ0NvdW50aW5nQXJlYU5vZGUoIGNvdW50aW5nT2JqZWN0ICk7XHJcbiAgICAgICAgICByZXR1cm4gY291bnRpbmdBcmVhTm9kZS5nZXRDb3VudGluZ09iamVjdE5vZGUoIGNvdW50aW5nT2JqZWN0ICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9ICk7XHJcblxyXG4gICAgdGhpcy50ZW5GcmFtZU5vZGVzLnB1c2goIHRlbkZyYW1lTm9kZSApO1xyXG4gICAgdGhpcy5waWVjZUxheWVyLmFkZENoaWxkKCB0ZW5GcmFtZU5vZGUgKTtcclxuXHJcbiAgICB0ZW5GcmFtZS5kaXNwb3NlRW1pdHRlci5hZGRMaXN0ZW5lciggKCkgPT4ge1xyXG4gICAgICB0aGlzLnJlbW92ZVRlbkZyYW1lTm9kZSggdGVuRnJhbWUgKTtcclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENhbGxlZCB3aGVuIGEgVGVuRnJhbWUgaXMgcmVtb3ZlZCBmcm9tIHRoZSBtb2RlbC5cclxuICAgKi9cclxuICBwcml2YXRlIHJlbW92ZVRlbkZyYW1lTm9kZSggdGVuRnJhbWU6IFRlbkZyYW1lICk6IHZvaWQge1xyXG4gICAgY29uc3QgdGVuRnJhbWVOb2RlID0gdGhpcy5nZXRUZW5GcmFtZU5vZGUoIHRlbkZyYW1lICk7XHJcblxyXG4gICAgXy5wdWxsKCB0aGlzLnRlbkZyYW1lTm9kZXMsIHRlbkZyYW1lTm9kZSApO1xyXG4gICAgdGhpcy5waWVjZUxheWVyLnJlbW92ZUNoaWxkKCB0ZW5GcmFtZU5vZGUgKTtcclxuICAgIHRlbkZyYW1lTm9kZS5kaXNwb3NlKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nIERyYWdnYWJsZVRlbkZyYW1lTm9kZSBmb3IgYSBnaXZlbiBUZW5GcmFtZS5cclxuICAgKi9cclxuICBwdWJsaWMgZ2V0VGVuRnJhbWVOb2RlKCB0ZW5GcmFtZTogVGVuRnJhbWUgKTogRHJhZ2dhYmxlVGVuRnJhbWVOb2RlIHtcclxuICAgIGNvbnN0IHRlbkZyYW1lTm9kZSA9IF8uZmluZCggdGhpcy50ZW5GcmFtZU5vZGVzLCB0ZW5GcmFtZU5vZGUgPT4gdGVuRnJhbWVOb2RlLnRlbkZyYW1lID09PSB0ZW5GcmFtZSApO1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdGVuRnJhbWVOb2RlLCAnbWF0Y2hpbmcgdGVuRnJhbWVOb2RlIG5vdCBmb3VuZCEnICk7XHJcbiAgICByZXR1cm4gdGVuRnJhbWVOb2RlITtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEVhY2ggdHlwZSBvZiBjb3VudGluZyBvYmplY3QgaGFzIGl0cyBvd24gY291bnRpbmdBcmVhLCBzbyB3aGVuIHdvcmtpbmcgd2l0aCBhIGNvdW50aW5nIG9iamVjdCwgd2UgbmVlZCB0byBsb29rIHVwXHJcbiAgICogaXRzIGNvcnJlc3BvbmRpbmcgY291bnRpbmdBcmVhIGluIG9yZGVyIHRvIGRvIGFuIG9wZXJhdGlvbiBvbiBpdCAobGlrZSBzZW5kaW5nIHRoZSBjb3VudGluZyBvYmplY3QgYmFjayB0byBpdHMgb3JpZ2luKS5cclxuICAgKi9cclxuICBwcml2YXRlIGdldENvcnJlc3BvbmRpbmdDb3VudGluZ0FyZWFOb2RlKCBjb3VudGluZ09iamVjdDogQ291bnRpbmdPYmplY3QgKTogQ291bnRpbmdBcmVhTm9kZSB7XHJcbiAgICBjb25zdCBjb3VudGluZ09iamVjdFR5cGUgPSB0aGlzLmdldENvdW50aW5nT2JqZWN0VHlwZSggY291bnRpbmdPYmplY3QgKTtcclxuICAgIGNvbnN0IGNvdW50aW5nQXJlYU5vZGUgPSB0aGlzLmNvdW50aW5nT2JqZWN0VHlwZVRvQ291bnRpbmdBcmVhTm9kZS5nZXQoIGNvdW50aW5nT2JqZWN0VHlwZSApO1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggY291bnRpbmdBcmVhTm9kZSwgJ2NvdW50aW5nQXJlYU5vZGUgbm90IGZvdW5kIGZvciBjb3VudGluZyBvYmplY3QgdHlwZTogJyArIGNvdW50aW5nT2JqZWN0VHlwZS5uYW1lICk7XHJcbiAgICByZXR1cm4gY291bnRpbmdBcmVhTm9kZSE7XHJcbiAgfVxyXG59XHJcblxyXG5udW1iZXJTdWl0ZUNvbW1vbi5yZWdpc3RlciggJ0xhYlNjcmVlblZpZXcnLCBMYWJTY3JlZW5WaWV3ICk7XHJcbmV4cG9ydCBkZWZhdWx0IExhYlNjcmVlblZpZXc7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxTQUFTLE1BQU0sbUNBQW1DO0FBQ3pELE9BQU9DLG1CQUFtQixNQUFNLDRDQUE0QztBQUM1RSxPQUFPQyxVQUFVLE1BQU0sb0NBQW9DO0FBQzNELE9BQU9DLGNBQWMsTUFBTSx1REFB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