// Copyright 2022-2023, University of Colorado Boulder

/**
 * The top carousel with number pieces for the Lab screen.
 *
 * @author Chris Klusendorf (PhET Interactive Simulations)
 */

import { Node } from '../../../../scenery/js/imports.js';
import Carousel from '../../../../sun/js/Carousel.js';
import numberSuiteCommon from '../../numberSuiteCommon.js';
import NumberProperty from '../../../../axon/js/NumberProperty.js';
import CardCreatorNode from './CardCreatorNode.js';
import NumberCardNode from './NumberCardNode.js';
// constants
const MAX_NUMBER_PIECE_COUNT = 20;
class NumberCardCreatorCarousel extends Carousel {
  // removes and disposes all types of symbol nodes

  constructor(screenView) {
    // create a map from SymbolType to countProperty
    const numberToCountPropertyMap = new Map();
    const numberCardCreatorNodes = [];

    // Number stacks
    _.range(1, 21).forEach(number => {
      // make a creator node for each number
      const numberCardCreatorNode = new CardCreatorNode(screenView, numberToCountPropertyMap, {
        number: number
      });
      numberCardCreatorNodes.push(numberCardCreatorNode);
      const numberProperty = new NumberProperty(0);
      numberToCountPropertyMap.set(number, numberProperty);
      numberProperty.link(count => {
        numberCardCreatorNode.visible = count < MAX_NUMBER_PIECE_COUNT;
      });
    });
    super(numberCardCreatorNodes.map(numberCardCreatorNode => {
      return {
        createNode: tandem => new Node().addChild(numberCardCreatorNode),
        alignBoxOptions: {
          xAlign: 'left'
        }
      };
    }), {
      itemsPerPage: 10,
      margin: 10,
      spacing: 10,
      animationOptions: {
        duration: 0.4
      }
    });
    this.screenView = screenView;
    this.numberToCountPropertyMap = numberToCountPropertyMap;
    this.clearNumberCardsNodes = () => {
      const allNumberCardNodes = this.getAllNumberCardNodes();
      allNumberCardNodes.forEach(numberCardNode => {
        screenView.pieceLayer.removeChild(numberCardNode);
        numberCardNode.dispose();
      });
    };
  }
  reset() {
    super.reset();
    this.clearNumberCardsNodes();
    this.numberToCountPropertyMap.forEach(countProperty => {
      countProperty.reset();
    });
  }
  getAllNumberCardNodes() {
    const allNumberCardNodes = _.filter(this.screenView.pieceLayer.children, child => child instanceof NumberCardNode);
    return allNumberCardNodes;
  }
}
numberSuiteCommon.register('NumberCardCreatorCarousel', NumberCardCreatorCarousel);
export default NumberCardCreatorCarousel;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJOb2RlIiwiQ2Fyb3VzZWwiLCJudW1iZXJTdWl0ZUNvbW1vbiIsIk51bWJlclByb3BlcnR5IiwiQ2FyZENyZWF0b3JOb2RlIiwiTnVtYmVyQ2FyZE5vZGUiLCJNQVhfTlVNQkVSX1BJRUNFX0NPVU5UIiwiTnVtYmVyQ2FyZENyZWF0b3JDYXJvdXNlbCIsImNvbnN0cnVjdG9yIiwic2NyZWVuVmlldyIsIm51bWJlclRvQ291bnRQcm9wZXJ0eU1hcCIsIk1hcCIsIm51bWJlckNhcmRDcmVhdG9yTm9kZXMiLCJfIiwicmFuZ2UiLCJmb3JFYWNoIiwibnVtYmVyIiwibnVtYmVyQ2FyZENyZWF0b3JOb2RlIiwicHVzaCIsIm51bWJlclByb3BlcnR5Iiwic2V0IiwibGluayIsImNvdW50IiwidmlzaWJsZSIsIm1hcCIsImNyZWF0ZU5vZGUiLCJ0YW5kZW0iLCJhZGRDaGlsZCIsImFsaWduQm94T3B0aW9ucyIsInhBbGlnbiIsIml0ZW1zUGVyUGFnZSIsIm1hcmdpbiIsInNwYWNpbmciLCJhbmltYXRpb25PcHRpb25zIiwiZHVyYXRpb24iLCJjbGVhck51bWJlckNhcmRzTm9kZXMiLCJhbGxOdW1iZXJDYXJkTm9kZXMiLCJnZXRBbGxOdW1iZXJDYXJkTm9kZXMiLCJudW1iZXJDYXJkTm9kZSIsInBpZWNlTGF5ZXIiLCJyZW1vdmVDaGlsZCIsImRpc3Bvc2UiLCJyZXNldCIsImNvdW50UHJvcGVydHkiLCJmaWx0ZXIiLCJjaGlsZHJlbiIsImNoaWxkIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJOdW1iZXJDYXJkQ3JlYXRvckNhcm91c2VsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIyLTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFRoZSB0b3AgY2Fyb3VzZWwgd2l0aCBudW1iZXIgcGllY2VzIGZvciB0aGUgTGFiIHNjcmVlbi5cclxuICpcclxuICogQGF1dGhvciBDaHJpcyBLbHVzZW5kb3JmIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IE5vZGUgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgQ2Fyb3VzZWwgZnJvbSAnLi4vLi4vLi4vLi4vc3VuL2pzL0Nhcm91c2VsLmpzJztcclxuaW1wb3J0IG51bWJlclN1aXRlQ29tbW9uIGZyb20gJy4uLy4uL251bWJlclN1aXRlQ29tbW9uLmpzJztcclxuaW1wb3J0IExhYlNjcmVlblZpZXcgZnJvbSAnLi9MYWJTY3JlZW5WaWV3LmpzJztcclxuaW1wb3J0IE51bWJlclByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvTnVtYmVyUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgQ2FyZENyZWF0b3JOb2RlIGZyb20gJy4vQ2FyZENyZWF0b3JOb2RlLmpzJztcclxuaW1wb3J0IE51bWJlckNhcmROb2RlIGZyb20gJy4vTnVtYmVyQ2FyZE5vZGUuanMnO1xyXG5pbXBvcnQgUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBOdW1iZXJTdWl0ZUNvbW1vblByZWZlcmVuY2VzIGZyb20gJy4uLy4uL2NvbW1vbi9tb2RlbC9OdW1iZXJTdWl0ZUNvbW1vblByZWZlcmVuY2VzLmpzJztcclxuaW1wb3J0IFRhbmRlbSBmcm9tICcuLi8uLi8uLi8uLi90YW5kZW0vanMvVGFuZGVtLmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBNQVhfTlVNQkVSX1BJRUNFX0NPVU5UID0gMjA7XHJcblxyXG5jbGFzcyBOdW1iZXJDYXJkQ3JlYXRvckNhcm91c2VsIGV4dGVuZHMgQ2Fyb3VzZWwge1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgc2NyZWVuVmlldzogTGFiU2NyZWVuVmlldzxOdW1iZXJTdWl0ZUNvbW1vblByZWZlcmVuY2VzPjtcclxuXHJcbiAgLy8gcmVtb3ZlcyBhbmQgZGlzcG9zZXMgYWxsIHR5cGVzIG9mIHN5bWJvbCBub2Rlc1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgY2xlYXJOdW1iZXJDYXJkc05vZGVzOiAoKSA9PiB2b2lkO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgbnVtYmVyVG9Db3VudFByb3BlcnR5TWFwOiBNYXA8bnVtYmVyLCBQcm9wZXJ0eTxudW1iZXI+PjtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBzY3JlZW5WaWV3OiBMYWJTY3JlZW5WaWV3PE51bWJlclN1aXRlQ29tbW9uUHJlZmVyZW5jZXM+ICkge1xyXG5cclxuICAgIC8vIGNyZWF0ZSBhIG1hcCBmcm9tIFN5bWJvbFR5cGUgdG8gY291bnRQcm9wZXJ0eVxyXG4gICAgY29uc3QgbnVtYmVyVG9Db3VudFByb3BlcnR5TWFwID0gbmV3IE1hcDxudW1iZXIsIFByb3BlcnR5PG51bWJlcj4+KCk7XHJcblxyXG4gICAgY29uc3QgbnVtYmVyQ2FyZENyZWF0b3JOb2RlczogTm9kZVtdID0gW107XHJcblxyXG4gICAgLy8gTnVtYmVyIHN0YWNrc1xyXG4gICAgXy5yYW5nZSggMSwgMjEgKS5mb3JFYWNoKCBudW1iZXIgPT4ge1xyXG5cclxuICAgICAgLy8gbWFrZSBhIGNyZWF0b3Igbm9kZSBmb3IgZWFjaCBudW1iZXJcclxuICAgICAgY29uc3QgbnVtYmVyQ2FyZENyZWF0b3JOb2RlID0gbmV3IENhcmRDcmVhdG9yTm9kZSggc2NyZWVuVmlldywgbnVtYmVyVG9Db3VudFByb3BlcnR5TWFwLCB7XHJcbiAgICAgICAgbnVtYmVyOiBudW1iZXJcclxuICAgICAgfSApO1xyXG4gICAgICBudW1iZXJDYXJkQ3JlYXRvck5vZGVzLnB1c2goIG51bWJlckNhcmRDcmVhdG9yTm9kZSApO1xyXG5cclxuICAgICAgY29uc3QgbnVtYmVyUHJvcGVydHkgPSBuZXcgTnVtYmVyUHJvcGVydHkoIDAgKTtcclxuICAgICAgbnVtYmVyVG9Db3VudFByb3BlcnR5TWFwLnNldCggbnVtYmVyLCBudW1iZXJQcm9wZXJ0eSApO1xyXG5cclxuICAgICAgbnVtYmVyUHJvcGVydHkubGluayggY291bnQgPT4geyBudW1iZXJDYXJkQ3JlYXRvck5vZGUudmlzaWJsZSA9IGNvdW50IDwgTUFYX05VTUJFUl9QSUVDRV9DT1VOVDsgfSApO1xyXG4gICAgfSApO1xyXG5cclxuICAgIHN1cGVyKCBudW1iZXJDYXJkQ3JlYXRvck5vZGVzLm1hcCggbnVtYmVyQ2FyZENyZWF0b3JOb2RlID0+IHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBjcmVhdGVOb2RlOiAoIHRhbmRlbTogVGFuZGVtICkgPT4gbmV3IE5vZGUoKS5hZGRDaGlsZCggbnVtYmVyQ2FyZENyZWF0b3JOb2RlICksXHJcbiAgICAgICAgYWxpZ25Cb3hPcHRpb25zOiB7XHJcbiAgICAgICAgICB4QWxpZ246ICdsZWZ0J1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH0gKSwge1xyXG4gICAgICBpdGVtc1BlclBhZ2U6IDEwLFxyXG4gICAgICBtYXJnaW46IDEwLFxyXG4gICAgICBzcGFjaW5nOiAxMCxcclxuICAgICAgYW5pbWF0aW9uT3B0aW9uczoge1xyXG4gICAgICAgIGR1cmF0aW9uOiAwLjRcclxuICAgICAgfVxyXG4gICAgfSApO1xyXG5cclxuICAgIHRoaXMuc2NyZWVuVmlldyA9IHNjcmVlblZpZXc7XHJcbiAgICB0aGlzLm51bWJlclRvQ291bnRQcm9wZXJ0eU1hcCA9IG51bWJlclRvQ291bnRQcm9wZXJ0eU1hcDtcclxuXHJcbiAgICB0aGlzLmNsZWFyTnVtYmVyQ2FyZHNOb2RlcyA9ICgpID0+IHtcclxuICAgICAgY29uc3QgYWxsTnVtYmVyQ2FyZE5vZGVzID0gdGhpcy5nZXRBbGxOdW1iZXJDYXJkTm9kZXMoKTtcclxuICAgICAgYWxsTnVtYmVyQ2FyZE5vZGVzLmZvckVhY2goIG51bWJlckNhcmROb2RlID0+IHtcclxuICAgICAgICBzY3JlZW5WaWV3LnBpZWNlTGF5ZXIucmVtb3ZlQ2hpbGQoIG51bWJlckNhcmROb2RlICk7XHJcbiAgICAgICAgbnVtYmVyQ2FyZE5vZGUuZGlzcG9zZSgpO1xyXG4gICAgICB9ICk7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlc2V0KCk6IHZvaWQge1xyXG4gICAgc3VwZXIucmVzZXQoKTtcclxuICAgIHRoaXMuY2xlYXJOdW1iZXJDYXJkc05vZGVzKCk7XHJcbiAgICB0aGlzLm51bWJlclRvQ291bnRQcm9wZXJ0eU1hcC5mb3JFYWNoKCBjb3VudFByb3BlcnR5ID0+IHtcclxuICAgICAgY291bnRQcm9wZXJ0eS5yZXNldCgpO1xyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldEFsbE51bWJlckNhcmROb2RlcygpOiBOdW1iZXJDYXJkTm9kZVtdIHtcclxuICAgIGNvbnN0IGFsbE51bWJlckNhcmROb2RlcyA9IF8uZmlsdGVyKCB0aGlzLnNjcmVlblZpZXcucGllY2VMYXllci5jaGlsZHJlbixcclxuICAgICAgY2hpbGQgPT4gY2hpbGQgaW5zdGFuY2VvZiBOdW1iZXJDYXJkTm9kZSApIGFzIE51bWJlckNhcmROb2RlW107XHJcbiAgICByZXR1cm4gYWxsTnVtYmVyQ2FyZE5vZGVzO1xyXG4gIH1cclxufVxyXG5cclxubnVtYmVyU3VpdGVDb21tb24ucmVnaXN0ZXIoICdOdW1iZXJDYXJkQ3JlYXRvckNhcm91c2VsJywgTnVtYmVyQ2FyZENyZWF0b3JDYXJvdXNlbCApO1xyXG5leHBvcnQgZGVmYXVsdCBOdW1iZXJDYXJkQ3JlYXRvckNhcm91c2VsO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBU0EsSUFBSSxRQUFRLG1DQUFtQztBQUN4RCxPQUFPQyxRQUFRLE1BQU0sZ0NBQWdDO0FBQ3JELE9BQU9DLGlCQUFpQixNQUFNLDRCQUE0QjtBQUUxRCxPQUFPQyxjQUFjLE1BQU0sdUNBQXVDO0FBQ2xFLE9BQU9DLGVBQWUsTUFBTSxzQkFBc0I7QUFDbEQsT0FBT0MsY0FBYyxNQUFNLHFCQUFxQjtBQUto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