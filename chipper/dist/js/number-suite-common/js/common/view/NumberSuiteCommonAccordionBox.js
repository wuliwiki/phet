// Copyright 2022-2023, University of Colorado Boulder

/**
 * Base class for all accordion boxes in Number Suite sims.
 *
 * @author Chris Klusendorf (PhET Interactive Simulations)
 */

import Bounds2 from '../../../../dot/js/Bounds2.js';
import { Rectangle, Text } from '../../../../scenery/js/imports.js';
import AccordionBox from '../../../../sun/js/AccordionBox.js';
import numberSuiteCommon from '../../numberSuiteCommon.js';
import NumberSuiteCommonConstants from '../NumberSuiteCommonConstants.js';
import optionize, { combineOptions } from '../../../../phet-core/js/optionize.js';
import Property from '../../../../axon/js/Property.js';
// constants
const PADDING = 10;
const EXPAND_COLLAPSE_BUTTON_SIZE = 20;
class NumberSuiteCommonAccordionBox extends AccordionBox {
  // expose contentNode so subclasses can add their content to it

  // expose the full bounds of the visible area inside the accordion box (updated in the link below)

  constructor(contentWidth, contentHeightProperty, providedOptions) {
    const titleText = new Text(providedOptions.titleStringProperty, combineOptions({
      font: NumberSuiteCommonConstants.ACCORDION_BOX_TITLE_FONT
    }, providedOptions.titleTextOptions));
    const options = optionize()({
      titleNode: titleText,
      titleAlignX: 'left',
      titleXSpacing: 8,
      showTitleWhenExpanded: false,
      cornerRadius: 6,
      titleYMargin: PADDING,
      buttonXMargin: PADDING,
      buttonYMargin: PADDING,
      contentXMargin: PADDING,
      contentYMargin: 0,
      contentXSpacing: 0,
      contentAlign: 'left',
      expandCollapseButtonOptions: {
        sideLength: EXPAND_COLLAPSE_BUTTON_SIZE
      }
    }, providedOptions);
    const contentNode = new Rectangle({
      rectWidth: contentWidth - EXPAND_COLLAPSE_BUTTON_SIZE - PADDING * 2,
      rectHeight: contentHeightProperty.value
    });
    super(contentNode, options);
    this.contentNode = contentNode;
    this.contentBoundsProperty = new Property(Bounds2.NOTHING);

    // update the accordion box content bounds when the height changes
    contentHeightProperty.link(height => {
      const innerContentBounds = new Bounds2(contentNode.left, contentNode.top, contentNode.right, height);

      // override the local bounds so they don't change
      contentNode.localBounds = innerContentBounds;

      // set the full bounds of the visible area inside the accordion box
      this.contentBoundsProperty.value = innerContentBounds.withOffsets(PADDING + EXPAND_COLLAPSE_BUTTON_SIZE, 0, PADDING, 0);
      assert && assert(this.contentBoundsProperty.value.width === contentWidth, 'available content bounds width should match provided contentWidth');
      assert && assert(this.contentBoundsProperty.value.height === height, 'available content bounds height should match provided height');
    });
  }
}
numberSuiteCommon.register('NumberSuiteCommonAccordionBox', NumberSuiteCommonAccordionBox);
export default NumberSuiteCommonAccordionBox;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb3VuZHMyIiwiUmVjdGFuZ2xlIiwiVGV4dCIsIkFjY29yZGlvbkJveCIsIm51bWJlclN1aXRlQ29tbW9uIiwiTnVtYmVyU3VpdGVDb21tb25Db25zdGFudHMiLCJvcHRpb25pemUiLCJjb21iaW5lT3B0aW9ucyIsIlByb3BlcnR5IiwiUEFERElORyIsIkVYUEFORF9DT0xMQVBTRV9CVVRUT05fU0laRSIsIk51bWJlclN1aXRlQ29tbW9uQWNjb3JkaW9uQm94IiwiY29uc3RydWN0b3IiLCJjb250ZW50V2lkdGgiLCJjb250ZW50SGVpZ2h0UHJvcGVydHkiLCJwcm92aWRlZE9wdGlvbnMiLCJ0aXRsZVRleHQiLCJ0aXRsZVN0cmluZ1Byb3BlcnR5IiwiZm9udCIsIkFDQ09SRElPTl9CT1hfVElUTEVfRk9OVCIsInRpdGxlVGV4dE9wdGlvbnMiLCJvcHRpb25zIiwidGl0bGVOb2RlIiwidGl0bGVBbGlnblgiLCJ0aXRsZVhTcGFjaW5nIiwic2hvd1RpdGxlV2hlbkV4cGFuZGVkIiwiY29ybmVyUmFkaXVzIiwidGl0bGVZTWFyZ2luIiwiYnV0dG9uWE1hcmdpbiIsImJ1dHRvbllNYXJnaW4iLCJjb250ZW50WE1hcmdpbiIsImNvbnRlbnRZTWFyZ2luIiwiY29udGVudFhTcGFjaW5nIiwiY29udGVudEFsaWduIiwiZXhwYW5kQ29sbGFwc2VCdXR0b25PcHRpb25zIiwic2lkZUxlbmd0aCIsImNvbnRlbnROb2RlIiwicmVjdFdpZHRoIiwicmVjdEhlaWdodCIsInZhbHVlIiwiY29udGVudEJvdW5kc1Byb3BlcnR5IiwiTk9USElORyIsImxpbmsiLCJoZWlnaHQiLCJpbm5lckNvbnRlbnRCb3VuZHMiLCJsZWZ0IiwidG9wIiwicmlnaHQiLCJsb2NhbEJvdW5kcyIsIndpdGhPZmZzZXRzIiwiYXNzZXJ0Iiwid2lkdGgiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIk51bWJlclN1aXRlQ29tbW9uQWNjb3JkaW9uQm94LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIyLTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIEJhc2UgY2xhc3MgZm9yIGFsbCBhY2NvcmRpb24gYm94ZXMgaW4gTnVtYmVyIFN1aXRlIHNpbXMuXHJcbiAqXHJcbiAqIEBhdXRob3IgQ2hyaXMgS2x1c2VuZG9yZiAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICovXHJcblxyXG5pbXBvcnQgQm91bmRzMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvQm91bmRzMi5qcyc7XHJcbmltcG9ydCB7IFJlY3RhbmdsZSwgVGV4dCwgVGV4dE9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgQWNjb3JkaW9uQm94LCB7IEFjY29yZGlvbkJveE9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvQWNjb3JkaW9uQm94LmpzJztcclxuaW1wb3J0IG51bWJlclN1aXRlQ29tbW9uIGZyb20gJy4uLy4uL251bWJlclN1aXRlQ29tbW9uLmpzJztcclxuaW1wb3J0IE51bWJlclN1aXRlQ29tbW9uQ29uc3RhbnRzIGZyb20gJy4uL051bWJlclN1aXRlQ29tbW9uQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IG9wdGlvbml6ZSwgeyBjb21iaW5lT3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgVFJlYWRPbmx5UHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9UUmVhZE9ubHlQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBUUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9UUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBTdHJpY3RPbWl0IGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9TdHJpY3RPbWl0LmpzJztcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSB7XHJcbiAgdGl0bGVTdHJpbmdQcm9wZXJ0eTogVFJlYWRPbmx5UHJvcGVydHk8c3RyaW5nPjtcclxuICB0aXRsZVRleHRPcHRpb25zPzogU3RyaWN0T21pdDxUZXh0T3B0aW9ucywgJ3RhbmRlbSc+O1xyXG59O1xyXG5leHBvcnQgdHlwZSBOdW1iZXJTdWl0ZUNvbW1vbkFjY29yZGlvbkJveE9wdGlvbnMgPSBTZWxmT3B0aW9ucyAmIFN0cmljdE9taXQ8QWNjb3JkaW9uQm94T3B0aW9ucywgJ3RpdGxlTm9kZSc+O1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IFBBRERJTkcgPSAxMDtcclxuY29uc3QgRVhQQU5EX0NPTExBUFNFX0JVVFRPTl9TSVpFID0gMjA7XHJcblxyXG5jbGFzcyBOdW1iZXJTdWl0ZUNvbW1vbkFjY29yZGlvbkJveCBleHRlbmRzIEFjY29yZGlvbkJveCB7XHJcblxyXG4gIC8vIGV4cG9zZSBjb250ZW50Tm9kZSBzbyBzdWJjbGFzc2VzIGNhbiBhZGQgdGhlaXIgY29udGVudCB0byBpdFxyXG4gIHByb3RlY3RlZCByZWFkb25seSBjb250ZW50Tm9kZTogUmVjdGFuZ2xlO1xyXG5cclxuICAvLyBleHBvc2UgdGhlIGZ1bGwgYm91bmRzIG9mIHRoZSB2aXNpYmxlIGFyZWEgaW5zaWRlIHRoZSBhY2NvcmRpb24gYm94ICh1cGRhdGVkIGluIHRoZSBsaW5rIGJlbG93KVxyXG4gIHByb3RlY3RlZCByZWFkb25seSBjb250ZW50Qm91bmRzUHJvcGVydHk6IFRQcm9wZXJ0eTxCb3VuZHMyPjtcclxuXHJcbiAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKCBjb250ZW50V2lkdGg6IG51bWJlciwgY29udGVudEhlaWdodFByb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxudW1iZXI+LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZWRPcHRpb25zOiBOdW1iZXJTdWl0ZUNvbW1vbkFjY29yZGlvbkJveE9wdGlvbnMgKSB7XHJcblxyXG4gICAgY29uc3QgdGl0bGVUZXh0ID0gbmV3IFRleHQoIHByb3ZpZGVkT3B0aW9ucy50aXRsZVN0cmluZ1Byb3BlcnR5LCBjb21iaW5lT3B0aW9uczxUZXh0T3B0aW9ucz4oIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9udDogTnVtYmVyU3VpdGVDb21tb25Db25zdGFudHMuQUNDT1JESU9OX0JPWF9USVRMRV9GT05UXHJcbiAgICAgICAgICAgICAgICAgICAgICB9LCBwcm92aWRlZE9wdGlvbnMudGl0bGVUZXh0T3B0aW9ucyApICk7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxOdW1iZXJTdWl0ZUNvbW1vbkFjY29yZGlvbkJveE9wdGlvbnMsIFN0cmljdE9taXQ8U2VsZk9wdGlvbnMsICd0aXRsZVRleHRPcHRpb25zJz4sIEFjY29yZGlvbkJveE9wdGlvbnM+KCkoIHtcclxuICAgICAgdGl0bGVOb2RlOiB0aXRsZVRleHQsXHJcbiAgICAgIHRpdGxlQWxpZ25YOiAnbGVmdCcsXHJcbiAgICAgIHRpdGxlWFNwYWNpbmc6IDgsXHJcbiAgICAgIHNob3dUaXRsZVdoZW5FeHBhbmRlZDogZmFsc2UsXHJcbiAgICAgIGNvcm5lclJhZGl1czogNixcclxuICAgICAgdGl0bGVZTWFyZ2luOiBQQURESU5HLFxyXG4gICAgICBidXR0b25YTWFyZ2luOiBQQURESU5HLFxyXG4gICAgICBidXR0b25ZTWFyZ2luOiBQQURESU5HLFxyXG4gICAgICBjb250ZW50WE1hcmdpbjogUEFERElORyxcclxuICAgICAgY29udGVudFlNYXJnaW46IDAsXHJcbiAgICAgIGNvbnRlbnRYU3BhY2luZzogMCxcclxuICAgICAgY29udGVudEFsaWduOiAnbGVmdCcsXHJcbiAgICAgIGV4cGFuZENvbGxhcHNlQnV0dG9uT3B0aW9uczoge1xyXG4gICAgICAgIHNpZGVMZW5ndGg6IEVYUEFORF9DT0xMQVBTRV9CVVRUT05fU0laRVxyXG4gICAgICB9XHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICBjb25zdCBjb250ZW50Tm9kZSA9IG5ldyBSZWN0YW5nbGUoIHtcclxuICAgICAgcmVjdFdpZHRoOiBjb250ZW50V2lkdGggLSBFWFBBTkRfQ09MTEFQU0VfQlVUVE9OX1NJWkUgLSAoIFBBRERJTkcgKiAyICksXHJcbiAgICAgIHJlY3RIZWlnaHQ6IGNvbnRlbnRIZWlnaHRQcm9wZXJ0eS52YWx1ZVxyXG4gICAgfSApO1xyXG5cclxuICAgIHN1cGVyKCBjb250ZW50Tm9kZSwgb3B0aW9ucyApO1xyXG5cclxuICAgIHRoaXMuY29udGVudE5vZGUgPSBjb250ZW50Tm9kZTtcclxuXHJcbiAgICB0aGlzLmNvbnRlbnRCb3VuZHNQcm9wZXJ0eSA9IG5ldyBQcm9wZXJ0eSggQm91bmRzMi5OT1RISU5HICk7XHJcblxyXG4gICAgLy8gdXBkYXRlIHRoZSBhY2NvcmRpb24gYm94IGNvbnRlbnQgYm91bmRzIHdoZW4gdGhlIGhlaWdodCBjaGFuZ2VzXHJcbiAgICBjb250ZW50SGVpZ2h0UHJvcGVydHkubGluayggaGVpZ2h0ID0+IHtcclxuICAgICAgY29uc3QgaW5uZXJDb250ZW50Qm91bmRzID0gbmV3IEJvdW5kczIoIGNvbnRlbnROb2RlLmxlZnQsIGNvbnRlbnROb2RlLnRvcCwgY29udGVudE5vZGUucmlnaHQsIGhlaWdodCApO1xyXG5cclxuICAgICAgLy8gb3ZlcnJpZGUgdGhlIGxvY2FsIGJvdW5kcyBzbyB0aGV5IGRvbid0IGNoYW5nZVxyXG4gICAgICBjb250ZW50Tm9kZS5sb2NhbEJvdW5kcyA9IGlubmVyQ29udGVudEJvdW5kcztcclxuXHJcbiAgICAgIC8vIHNldCB0aGUgZnVsbCBib3VuZHMgb2YgdGhlIHZpc2libGUgYXJlYSBpbnNpZGUgdGhlIGFjY29yZGlvbiBib3hcclxuICAgICAgdGhpcy5jb250ZW50Qm91bmRzUHJvcGVydHkudmFsdWUgPSBpbm5lckNvbnRlbnRCb3VuZHMud2l0aE9mZnNldHMoIFBBRERJTkcgKyBFWFBBTkRfQ09MTEFQU0VfQlVUVE9OX1NJWkUsIDAsIFBBRERJTkcsIDAgKTtcclxuXHJcbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHRoaXMuY29udGVudEJvdW5kc1Byb3BlcnR5LnZhbHVlLndpZHRoID09PSBjb250ZW50V2lkdGgsXHJcbiAgICAgICAgJ2F2YWlsYWJsZSBjb250ZW50IGJvdW5kcyB3aWR0aCBzaG91bGQgbWF0Y2ggcHJvdmlkZWQgY29udGVudFdpZHRoJyApO1xyXG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0aGlzLmNvbnRlbnRCb3VuZHNQcm9wZXJ0eS52YWx1ZS5oZWlnaHQgPT09IGhlaWdodCxcclxuICAgICAgICAnYXZhaWxhYmxlIGNvbnRlbnQgYm91bmRzIGhlaWdodCBzaG91bGQgbWF0Y2ggcHJvdmlkZWQgaGVpZ2h0JyApO1xyXG4gICAgfSApO1xyXG4gIH1cclxufVxyXG5cclxubnVtYmVyU3VpdGVDb21tb24ucmVnaXN0ZXIoICdOdW1iZXJTdWl0ZUNvbW1vbkFjY29yZGlvbkJveCcsIE51bWJlclN1aXRlQ29tbW9uQWNjb3JkaW9uQm94ICk7XHJcbmV4cG9ydCBkZWZhdWx0IE51bWJlclN1aXRlQ29tbW9uQWNjb3JkaW9uQm94OyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxPQUFPLE1BQU0sK0JBQStCO0FBQ25ELFNBQVNDLFNBQVMsRUFBRUMsSUFBSSxRQUFxQixtQ0FBbUM7QUFDaEYsT0FBT0MsWUFBWSxNQUErQixvQ0FBb0M7QUFDdEYsT0FBT0MsaUJBQWlCLE1BQU0sNEJBQTRCO0FBQzFELE9BQU9DLDBCQUEwQixNQUFNLGtDQUFrQztBQUN6RSxPQUFPQyxTQUFTLElBQUlDLGNBQWMsUUFBUSx1Q0FBdUM7QUFHakYsT0FBT0MsUUFBUSxNQUFNLGlDQUFpQztBQVN0RDtBQUNBLE1BQU1DLE9BQU8sR0FBRyxFQUFFO0FBQ2xCLE1BQU1DLDJCQUEyQixHQUFHLEVBQUU7QUFFdEMs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