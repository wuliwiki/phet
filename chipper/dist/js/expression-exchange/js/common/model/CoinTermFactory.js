// Copyright 2016-2022, University of Colorado Boulder

/**
 * factory class for generating coin term instances
 *
 * Coin terms have a fairly complex constructor, and this type makes it easier to create them.  This factory must be
 * constructed with all of the properties and other values used by coin terms.
 *
 * @author John Blanco
 */

import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import Property from '../../../../axon/js/Property.js';
import expressionExchange from '../../expressionExchange.js';
import CoinTermTypeID from '../enum/CoinTermTypeID.js';
import CoinTerm from './CoinTerm.js';

// constants
const CONSTANT_ONE_VALUE_PROPERTY = new Property(1);
const CONSTANT_ONE_TEXT_VALUE_PROPERTY = new Property('1');
class CoinTermFactory {
  /**
   * @param {number} xValueProperty
   * @param {number} yValueProperty
   * @param {number} zValueProperty
   */
  constructor(xValueProperty, yValueProperty, zValueProperty) {
    // @private - values of the variables
    this.xValueProperty = xValueProperty;
    this.yValueProperty = yValueProperty;
    this.zValueProperty = zValueProperty;

    // @private {Property.<string>} - string representations of the variables
    this.xValueStringProperty = new DerivedProperty([xValueProperty], value => `(${value.toString()})`);
    this.yValueStringProperty = new DerivedProperty([yValueProperty], value => `(${value.toString()})`);
    this.zValueStringProperty = new DerivedProperty([zValueProperty], value => `(${value.toString()})`);

    // @private, value property for x times y
    this.xTimesYValueProperty = new DerivedProperty([this.xValueProperty, this.yValueProperty], (xValue, yValue) => xValue * yValue);

    // @private, the string depicted for x times y when 'variable values' is enabled
    this.xTimesYValueStringProperty = new DerivedProperty([this.xValueProperty, this.yValueProperty], (xValue, yValue) => `(${xValue.toString()})(${yValue.toString()})`);

    // @private, value property for x squared
    this.xSquaredValueProperty = new DerivedProperty([this.xValueProperty], xValue => xValue * xValue);

    // @private, the string depicted for x squared when 'variable values' is enabled
    this.xSquaredValueStringProperty = new DerivedProperty([this.xValueProperty], xValue => `(${xValue.toString()})<sup>2</sup>`);

    // @private, value property for y squared
    this.ySquaredValueProperty = new DerivedProperty([this.yValueProperty], yValue => yValue * yValue);

    // @private, the string depicted for y squared when 'variable values' is enabled
    this.ySquaredValueStringProperty = new DerivedProperty([this.yValueProperty], yValue => `(${yValue.toString()})<sup>2</sup>`);

    // @private, value property for x squared times y squared
    this.xSquaredTimesYSquaredValueProperty = new DerivedProperty([this.xValueProperty, this.yValueProperty], (xValue, yValue) => xValue * xValue * yValue * yValue);

    // @private, the string depicted for y squared when 'variable values' is enabled
    this.xSquaredTimesYSquaredValueStringProperty = new DerivedProperty([this.xValueProperty, this.yValueProperty], (xValue, yValue) => `(${xValue.toString()})<sup>2</sup>(${yValue.toString()})<sup>2</sup>`);
  }

  /**
   * create a coin term of the specified type
   * @param {CoinTermTypeID} typeID
   * @param {Object} [options] - see CoinTerm constructor
   * @returns {CoinTerm}
   * @public
   */
  createCoinTerm(typeID, options) {
    let valueProperty;
    let coinRadius;
    let termText;
    let termValueStringProperty;

    // set up the various values and properties based on the specified type ID
    switch (typeID) {
      case CoinTermTypeID.X:
        valueProperty = this.xValueProperty;
        coinRadius = 22;
        termText = 'x';
        termValueStringProperty = this.xValueStringProperty;
        break;
      case CoinTermTypeID.Y:
        valueProperty = this.yValueProperty;
        coinRadius = 22;
        termText = 'y';
        termValueStringProperty = this.yValueStringProperty;
        break;
      case CoinTermTypeID.Z:
        valueProperty = this.zValueProperty;
        coinRadius = 25;
        termText = 'z';
        termValueStringProperty = this.zValueStringProperty;
        break;
      case CoinTermTypeID.X_TIMES_Y:
        valueProperty = this.xTimesYValueProperty;
        coinRadius = 25;
        termText = 'xy';
        termValueStringProperty = this.xTimesYValueStringProperty;
        break;
      case CoinTermTypeID.X_SQUARED:
        valueProperty = this.xSquaredValueProperty;
        coinRadius = 27;
        termText = 'x<sup>2</sup>';
        termValueStringProperty = this.xSquaredValueStringProperty;
        break;
      case CoinTermTypeID.Y_SQUARED:
        valueProperty = this.ySquaredValueProperty;
        coinRadius = 27;
        termText = 'y<sup>2</sup>';
        termValueStringProperty = this.ySquaredValueStringProperty;
        break;
      case CoinTermTypeID.X_SQUARED_TIMES_Y_SQUARED:
        valueProperty = this.xSquaredTimesYSquaredValueProperty;
        coinRadius = 28;
        termText = 'x<sup>2</sup>y<sup>2</sup>';
        termValueStringProperty = this.xSquaredTimesYSquaredValueStringProperty;
        break;
      case CoinTermTypeID.CONSTANT:
        valueProperty = CONSTANT_ONE_VALUE_PROPERTY;
        coinRadius = 20; // fairly arbitrary, since this should never end up being depicted as a coin
        termText = '1';
        termValueStringProperty = CONSTANT_ONE_TEXT_VALUE_PROPERTY;
        break;
      default:
        assert && assert(false, `Unrecognized type ID for coin term, = ${typeID}`);
    }
    return new CoinTerm(valueProperty, coinRadius, termText, termValueStringProperty, typeID, options);
  }
}
expressionExchange.register('CoinTermFactory', CoinTermFactory);
export default CoinTermFactory;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJQcm9wZXJ0eSIsImV4cHJlc3Npb25FeGNoYW5nZSIsIkNvaW5UZXJtVHlwZUlEIiwiQ29pblRlcm0iLCJDT05TVEFOVF9PTkVfVkFMVUVfUFJPUEVSVFkiLCJDT05TVEFOVF9PTkVfVEVYVF9WQUxVRV9QUk9QRVJUWSIsIkNvaW5UZXJtRmFjdG9yeSIsImNvbnN0cnVjdG9yIiwieFZhbHVlUHJvcGVydHkiLCJ5VmFsdWVQcm9wZXJ0eSIsInpWYWx1ZVByb3BlcnR5IiwieFZhbHVlU3RyaW5nUHJvcGVydHkiLCJ2YWx1ZSIsInRvU3RyaW5nIiwieVZhbHVlU3RyaW5nUHJvcGVydHkiLCJ6VmFsdWVTdHJpbmdQcm9wZXJ0eSIsInhUaW1lc1lWYWx1ZVByb3BlcnR5IiwieFZhbHVlIiwieVZhbHVlIiwieFRpbWVzWVZhbHVlU3RyaW5nUHJvcGVydHkiLCJ4U3F1YXJlZFZhbHVlUHJvcGVydHkiLCJ4U3F1YXJlZFZhbHVlU3RyaW5nUHJvcGVydHkiLCJ5U3F1YXJlZFZhbHVlUHJvcGVydHkiLCJ5U3F1YXJlZFZhbHVlU3RyaW5nUHJvcGVydHkiLCJ4U3F1YXJlZFRpbWVzWVNxdWFyZWRWYWx1ZVByb3BlcnR5IiwieFNxdWFyZWRUaW1lc1lTcXVhcmVkVmFsdWVTdHJpbmdQcm9wZXJ0eSIsImNyZWF0ZUNvaW5UZXJtIiwidHlwZUlEIiwib3B0aW9ucyIsInZhbHVlUHJvcGVydHkiLCJjb2luUmFkaXVzIiwidGVybVRleHQiLCJ0ZXJtVmFsdWVTdHJpbmdQcm9wZXJ0eSIsIlgiLCJZIiwiWiIsIlhfVElNRVNfWSIsIlhfU1FVQVJFRCIsIllfU1FVQVJFRCIsIlhfU1FVQVJFRF9USU1FU19ZX1NRVUFSRUQiLCJDT05TVEFOVCIsImFzc2VydCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiQ29pblRlcm1GYWN0b3J5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE2LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIGZhY3RvcnkgY2xhc3MgZm9yIGdlbmVyYXRpbmcgY29pbiB0ZXJtIGluc3RhbmNlc1xyXG4gKlxyXG4gKiBDb2luIHRlcm1zIGhhdmUgYSBmYWlybHkgY29tcGxleCBjb25zdHJ1Y3RvciwgYW5kIHRoaXMgdHlwZSBtYWtlcyBpdCBlYXNpZXIgdG8gY3JlYXRlIHRoZW0uICBUaGlzIGZhY3RvcnkgbXVzdCBiZVxyXG4gKiBjb25zdHJ1Y3RlZCB3aXRoIGFsbCBvZiB0aGUgcHJvcGVydGllcyBhbmQgb3RoZXIgdmFsdWVzIHVzZWQgYnkgY29pbiB0ZXJtcy5cclxuICpcclxuICogQGF1dGhvciBKb2huIEJsYW5jb1xyXG4gKi9cclxuXHJcbmltcG9ydCBEZXJpdmVkUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9EZXJpdmVkUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBleHByZXNzaW9uRXhjaGFuZ2UgZnJvbSAnLi4vLi4vZXhwcmVzc2lvbkV4Y2hhbmdlLmpzJztcclxuaW1wb3J0IENvaW5UZXJtVHlwZUlEIGZyb20gJy4uL2VudW0vQ29pblRlcm1UeXBlSUQuanMnO1xyXG5pbXBvcnQgQ29pblRlcm0gZnJvbSAnLi9Db2luVGVybS5qcyc7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgQ09OU1RBTlRfT05FX1ZBTFVFX1BST1BFUlRZID0gbmV3IFByb3BlcnR5KCAxICk7XHJcbmNvbnN0IENPTlNUQU5UX09ORV9URVhUX1ZBTFVFX1BST1BFUlRZID0gbmV3IFByb3BlcnR5KCAnMScgKTtcclxuXHJcbmNsYXNzIENvaW5UZXJtRmFjdG9yeSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4VmFsdWVQcm9wZXJ0eVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5VmFsdWVQcm9wZXJ0eVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6VmFsdWVQcm9wZXJ0eVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCB4VmFsdWVQcm9wZXJ0eSwgeVZhbHVlUHJvcGVydHksIHpWYWx1ZVByb3BlcnR5ICkge1xyXG5cclxuICAgIC8vIEBwcml2YXRlIC0gdmFsdWVzIG9mIHRoZSB2YXJpYWJsZXNcclxuICAgIHRoaXMueFZhbHVlUHJvcGVydHkgPSB4VmFsdWVQcm9wZXJ0eTtcclxuICAgIHRoaXMueVZhbHVlUHJvcGVydHkgPSB5VmFsdWVQcm9wZXJ0eTtcclxuICAgIHRoaXMuelZhbHVlUHJvcGVydHkgPSB6VmFsdWVQcm9wZXJ0eTtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZSB7UHJvcGVydHkuPHN0cmluZz59IC0gc3RyaW5nIHJlcHJlc2VudGF0aW9ucyBvZiB0aGUgdmFyaWFibGVzXHJcbiAgICB0aGlzLnhWYWx1ZVN0cmluZ1Byb3BlcnR5ID0gbmV3IERlcml2ZWRQcm9wZXJ0eSggWyB4VmFsdWVQcm9wZXJ0eSBdLCB2YWx1ZSA9PiBgKCR7dmFsdWUudG9TdHJpbmcoKX0pYCApO1xyXG4gICAgdGhpcy55VmFsdWVTdHJpbmdQcm9wZXJ0eSA9IG5ldyBEZXJpdmVkUHJvcGVydHkoIFsgeVZhbHVlUHJvcGVydHkgXSwgdmFsdWUgPT4gYCgke3ZhbHVlLnRvU3RyaW5nKCl9KWAgKTtcclxuICAgIHRoaXMuelZhbHVlU3RyaW5nUHJvcGVydHkgPSBuZXcgRGVyaXZlZFByb3BlcnR5KCBbIHpWYWx1ZVByb3BlcnR5IF0sIHZhbHVlID0+IGAoJHt2YWx1ZS50b1N0cmluZygpfSlgICk7XHJcblxyXG4gICAgLy8gQHByaXZhdGUsIHZhbHVlIHByb3BlcnR5IGZvciB4IHRpbWVzIHlcclxuICAgIHRoaXMueFRpbWVzWVZhbHVlUHJvcGVydHkgPSBuZXcgRGVyaXZlZFByb3BlcnR5KFxyXG4gICAgICBbIHRoaXMueFZhbHVlUHJvcGVydHksIHRoaXMueVZhbHVlUHJvcGVydHkgXSxcclxuICAgICAgKCB4VmFsdWUsIHlWYWx1ZSApID0+IHhWYWx1ZSAqIHlWYWx1ZVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZSwgdGhlIHN0cmluZyBkZXBpY3RlZCBmb3IgeCB0aW1lcyB5IHdoZW4gJ3ZhcmlhYmxlIHZhbHVlcycgaXMgZW5hYmxlZFxyXG4gICAgdGhpcy54VGltZXNZVmFsdWVTdHJpbmdQcm9wZXJ0eSA9IG5ldyBEZXJpdmVkUHJvcGVydHkoXHJcbiAgICAgIFsgdGhpcy54VmFsdWVQcm9wZXJ0eSwgdGhpcy55VmFsdWVQcm9wZXJ0eSBdLFxyXG4gICAgICAoIHhWYWx1ZSwgeVZhbHVlICkgPT4gYCgke3hWYWx1ZS50b1N0cmluZygpfSkoJHt5VmFsdWUudG9TdHJpbmcoKX0pYFxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZSwgdmFsdWUgcHJvcGVydHkgZm9yIHggc3F1YXJlZFxyXG4gICAgdGhpcy54U3F1YXJlZFZhbHVlUHJvcGVydHkgPSBuZXcgRGVyaXZlZFByb3BlcnR5KFxyXG4gICAgICBbIHRoaXMueFZhbHVlUHJvcGVydHkgXSxcclxuICAgICAgeFZhbHVlID0+IHhWYWx1ZSAqIHhWYWx1ZVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZSwgdGhlIHN0cmluZyBkZXBpY3RlZCBmb3IgeCBzcXVhcmVkIHdoZW4gJ3ZhcmlhYmxlIHZhbHVlcycgaXMgZW5hYmxlZFxyXG4gICAgdGhpcy54U3F1YXJlZFZhbHVlU3RyaW5nUHJvcGVydHkgPSBuZXcgRGVyaXZlZFByb3BlcnR5KFxyXG4gICAgICBbIHRoaXMueFZhbHVlUHJvcGVydHkgXSxcclxuICAgICAgeFZhbHVlID0+IGAoJHt4VmFsdWUudG9TdHJpbmcoKX0pPHN1cD4yPC9zdXA+YFxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZSwgdmFsdWUgcHJvcGVydHkgZm9yIHkgc3F1YXJlZFxyXG4gICAgdGhpcy55U3F1YXJlZFZhbHVlUHJvcGVydHkgPSBuZXcgRGVyaXZlZFByb3BlcnR5KFxyXG4gICAgICBbIHRoaXMueVZhbHVlUHJvcGVydHkgXSxcclxuICAgICAgeVZhbHVlID0+IHlWYWx1ZSAqIHlWYWx1ZVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZSwgdGhlIHN0cmluZyBkZXBpY3RlZCBmb3IgeSBzcXVhcmVkIHdoZW4gJ3ZhcmlhYmxlIHZhbHVlcycgaXMgZW5hYmxlZFxyXG4gICAgdGhpcy55U3F1YXJlZFZhbHVlU3RyaW5nUHJvcGVydHkgPSBuZXcgRGVyaXZlZFByb3BlcnR5KFxyXG4gICAgICBbIHRoaXMueVZhbHVlUHJvcGVydHkgXSxcclxuICAgICAgeVZhbHVlID0+IGAoJHt5VmFsdWUudG9TdHJpbmcoKX0pPHN1cD4yPC9zdXA+YFxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZSwgdmFsdWUgcHJvcGVydHkgZm9yIHggc3F1YXJlZCB0aW1lcyB5IHNxdWFyZWRcclxuICAgIHRoaXMueFNxdWFyZWRUaW1lc1lTcXVhcmVkVmFsdWVQcm9wZXJ0eSA9IG5ldyBEZXJpdmVkUHJvcGVydHkoXHJcbiAgICAgIFsgdGhpcy54VmFsdWVQcm9wZXJ0eSwgdGhpcy55VmFsdWVQcm9wZXJ0eSBdLFxyXG4gICAgICAoIHhWYWx1ZSwgeVZhbHVlICkgPT4geFZhbHVlICogeFZhbHVlICogeVZhbHVlICogeVZhbHVlXHJcbiAgICApO1xyXG5cclxuICAgIC8vIEBwcml2YXRlLCB0aGUgc3RyaW5nIGRlcGljdGVkIGZvciB5IHNxdWFyZWQgd2hlbiAndmFyaWFibGUgdmFsdWVzJyBpcyBlbmFibGVkXHJcbiAgICB0aGlzLnhTcXVhcmVkVGltZXNZU3F1YXJlZFZhbHVlU3RyaW5nUHJvcGVydHkgPSBuZXcgRGVyaXZlZFByb3BlcnR5KFxyXG4gICAgICBbIHRoaXMueFZhbHVlUHJvcGVydHksIHRoaXMueVZhbHVlUHJvcGVydHkgXSxcclxuICAgICAgKCB4VmFsdWUsIHlWYWx1ZSApID0+IGAoJHt4VmFsdWUudG9TdHJpbmcoKX0pPHN1cD4yPC9zdXA+KCR7eVZhbHVlLnRvU3RyaW5nKCl9KTxzdXA+Mjwvc3VwPmBcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBjcmVhdGUgYSBjb2luIHRlcm0gb2YgdGhlIHNwZWNpZmllZCB0eXBlXHJcbiAgICogQHBhcmFtIHtDb2luVGVybVR5cGVJRH0gdHlwZUlEXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIHNlZSBDb2luVGVybSBjb25zdHJ1Y3RvclxyXG4gICAqIEByZXR1cm5zIHtDb2luVGVybX1cclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgY3JlYXRlQ29pblRlcm0oIHR5cGVJRCwgb3B0aW9ucyApIHtcclxuXHJcbiAgICBsZXQgdmFsdWVQcm9wZXJ0eTtcclxuICAgIGxldCBjb2luUmFkaXVzO1xyXG4gICAgbGV0IHRlcm1UZXh0O1xyXG4gICAgbGV0IHRlcm1WYWx1ZVN0cmluZ1Byb3BlcnR5O1xyXG5cclxuICAgIC8vIHNldCB1cCB0aGUgdmFyaW91cyB2YWx1ZXMgYW5kIHByb3BlcnRpZXMgYmFzZWQgb24gdGhlIHNwZWNpZmllZCB0eXBlIElEXHJcbiAgICBzd2l0Y2goIHR5cGVJRCApIHtcclxuXHJcbiAgICAgIGNhc2UgQ29pblRlcm1UeXBlSUQuWDpcclxuICAgICAgICB2YWx1ZVByb3BlcnR5ID0gdGhpcy54VmFsdWVQcm9wZXJ0eTtcclxuICAgICAgICBjb2luUmFkaXVzID0gMjI7XHJcbiAgICAgICAgdGVybVRleHQgPSAneCc7XHJcbiAgICAgICAgdGVybVZhbHVlU3RyaW5nUHJvcGVydHkgPSB0aGlzLnhWYWx1ZVN0cmluZ1Byb3BlcnR5O1xyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgY2FzZSBDb2luVGVybVR5cGVJRC5ZOlxyXG4gICAgICAgIHZhbHVlUHJvcGVydHkgPSB0aGlzLnlWYWx1ZVByb3BlcnR5O1xyXG4gICAgICAgIGNvaW5SYWRpdXMgPSAyMjtcclxuICAgICAgICB0ZXJtVGV4dCA9ICd5JztcclxuICAgICAgICB0ZXJtVmFsdWVTdHJpbmdQcm9wZXJ0eSA9IHRoaXMueVZhbHVlU3RyaW5nUHJvcGVydHk7XHJcbiAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICBjYXNlIENvaW5UZXJtVHlwZUlELlo6XHJcbiAgICAgICAgdmFsdWVQcm9wZXJ0eSA9IHRoaXMuelZhbHVlUHJvcGVydHk7XHJcbiAgICAgICAgY29pblJhZGl1cyA9IDI1O1xyXG4gICAgICAgIHRlcm1UZXh0ID0gJ3onO1xyXG4gICAgICAgIHRlcm1WYWx1ZVN0cmluZ1Byb3BlcnR5ID0gdGhpcy56VmFsdWVTdHJpbmdQcm9wZXJ0eTtcclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIGNhc2UgQ29pblRlcm1UeXBlSUQuWF9USU1FU19ZOlxyXG4gICAgICAgIHZhbHVlUHJvcGVydHkgPSB0aGlzLnhUaW1lc1lWYWx1ZVByb3BlcnR5O1xyXG4gICAgICAgIGNvaW5SYWRpdXMgPSAyNTtcclxuICAgICAgICB0ZXJtVGV4dCA9ICd4eSc7XHJcbiAgICAgICAgdGVybVZhbHVlU3RyaW5nUHJvcGVydHkgPSB0aGlzLnhUaW1lc1lWYWx1ZVN0cmluZ1Byb3BlcnR5O1xyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgY2FzZSBDb2luVGVybVR5cGVJRC5YX1NRVUFSRUQ6XHJcbiAgICAgICAgdmFsdWVQcm9wZXJ0eSA9IHRoaXMueFNxdWFyZWRWYWx1ZVByb3BlcnR5O1xyXG4gICAgICAgIGNvaW5SYWRpdXMgPSAyNztcclxuICAgICAgICB0ZXJtVGV4dCA9ICd4PHN1cD4yPC9zdXA+JztcclxuICAgICAgICB0ZXJtVmFsdWVTdHJpbmdQcm9wZXJ0eSA9IHRoaXMueFNxdWFyZWRWYWx1ZVN0cmluZ1Byb3BlcnR5O1xyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgY2FzZSBDb2luVGVybVR5cGVJRC5ZX1NRVUFSRUQ6XHJcbiAgICAgICAgdmFsdWVQcm9wZXJ0eSA9IHRoaXMueVNxdWFyZWRWYWx1ZVByb3BlcnR5O1xyXG4gICAgICAgIGNvaW5SYWRpdXMgPSAyNztcclxuICAgICAgICB0ZXJtVGV4dCA9ICd5PHN1cD4yPC9zdXA+JztcclxuICAgICAgICB0ZXJtVmFsdWVTdHJpbmdQcm9wZXJ0eSA9IHRoaXMueVNxdWFyZWRWYWx1ZVN0cmluZ1Byb3BlcnR5O1xyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgY2FzZSBDb2luVGVybVR5cGVJRC5YX1NRVUFSRURfVElNRVNfWV9TUVVBUkVEOlxyXG4gICAgICAgIHZhbHVlUHJvcGVydHkgPSB0aGlzLnhTcXVhcmVkVGltZXNZU3F1YXJlZFZhbHVlUHJvcGVydHk7XHJcbiAgICAgICAgY29pblJhZGl1cyA9IDI4O1xyXG4gICAgICAgIHRlcm1UZXh0ID0gJ3g8c3VwPjI8L3N1cD55PHN1cD4yPC9zdXA+JztcclxuICAgICAgICB0ZXJtVmFsdWVTdHJpbmdQcm9wZXJ0eSA9IHRoaXMueFNxdWFyZWRUaW1lc1lTcXVhcmVkVmFsdWVTdHJpbmdQcm9wZXJ0eTtcclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIGNhc2UgQ29pblRlcm1UeXBlSUQuQ09OU1RBTlQ6XHJcbiAgICAgICAgdmFsdWVQcm9wZXJ0eSA9IENPTlNUQU5UX09ORV9WQUxVRV9QUk9QRVJUWTtcclxuICAgICAgICBjb2luUmFkaXVzID0gMjA7IC8vIGZhaXJseSBhcmJpdHJhcnksIHNpbmNlIHRoaXMgc2hvdWxkIG5ldmVyIGVuZCB1cCBiZWluZyBkZXBpY3RlZCBhcyBhIGNvaW5cclxuICAgICAgICB0ZXJtVGV4dCA9ICcxJztcclxuICAgICAgICB0ZXJtVmFsdWVTdHJpbmdQcm9wZXJ0eSA9IENPTlNUQU5UX09ORV9URVhUX1ZBTFVFX1BST1BFUlRZO1xyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBmYWxzZSwgYFVucmVjb2duaXplZCB0eXBlIElEIGZvciBjb2luIHRlcm0sID0gJHt0eXBlSUR9YCApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBuZXcgQ29pblRlcm0oXHJcbiAgICAgIHZhbHVlUHJvcGVydHksXHJcbiAgICAgIGNvaW5SYWRpdXMsXHJcbiAgICAgIHRlcm1UZXh0LFxyXG4gICAgICB0ZXJtVmFsdWVTdHJpbmdQcm9wZXJ0eSxcclxuICAgICAgdHlwZUlELFxyXG4gICAgICBvcHRpb25zXHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuZXhwcmVzc2lvbkV4Y2hhbmdlLnJlZ2lzdGVyKCAnQ29pblRlcm1GYWN0b3J5JywgQ29pblRlcm1GYWN0b3J5ICk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDb2luVGVybUZhY3Rvcnk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGVBQWUsTUFBTSx3Q0FBd0M7QUFDcEUsT0FBT0MsUUFBUSxNQUFNLGlDQUFpQztBQUN0RCxPQUFPQyxrQkFBa0IsTUFBTSw2QkFBNkI7QUFDNUQsT0FBT0MsY0FBYyxNQUFNLDJCQUEyQjtBQUN0RCxPQUFPQyxRQUFRLE1BQU0sZUFBZTs7QUFFcEM7QUFDQSxNQUFNQywyQkFBMkIsR0FBRyxJQUFJSixRQUFRLENBQUUsQ0FBRSxDQUFDO0FBQ3JELE1BQU1LLGdDQUFnQyxHQUFHLElBQUlMLFFBQVEsQ0FBRSxHQUFJLENBQUM7QUFFNUQsTUFBTU0sZUFBZSxDQUFDO0VBRXBCO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDRUMsV0FBV0EsQ0FBRUMsY0FBYyxFQUFFQyxjQUFjLEVBQUVDLGNBQWMsRUFBRztJQUU1RDtJQUNBLElBQUksQ0FBQ0YsY0FBYyxHQUFHQSxjQUFjO0lBQ3BDLElBQUksQ0FBQ0MsY0FBYyxHQUFHQSxjQUFjO0lBQ3BDLElBQUksQ0FBQ0MsY0FBYyxHQUFHQSxjQUFjOztJQUVwQztJQUNBLElBQUksQ0FBQ0Msb0JBQW9CLEdBQUcsSUFBSVosZUFBZSxDQUFFLENBQUVTLGNBQWMsQ0FBRSxFQUFFSSxLQUFLLElBQUssSUFBR0EsS0FBSyxDQUFDQyxRQUFRLENBQUMsQ0FBRSxH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