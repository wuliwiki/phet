// Copyright 2015-2020, University of Colorado Boulder

/**
 * main model type for the game
 *
 * @author John Blanco
 */

import Property from '../../../../axon/js/Property.js';
import EEQueryParameters from '../../common/EEQueryParameters.js';
import AllowedRepresentations from '../../common/enum/AllowedRepresentations.js';
import expressionExchange from '../../expressionExchange.js';
import EEChallengeDescriptors from './EEChallengeDescriptors.js';
import EEGameLevel from './EEGameLevel.js';

// constants
const NUMBER_OF_LEVELS = EEQueryParameters.minimalGameLevels ? 2 : 8;
const CHALLENGES_PER_LEVEL = 3;
const POINTS_PER_CHALLENGE = 1;
const MAX_SCORE_PER_LEVEL = CHALLENGES_PER_LEVEL * POINTS_PER_CHALLENGE;
class EEGameModel {
  /**
   */
  constructor() {
    //------------------------------------------------------------------------
    // properties
    //------------------------------------------------------------------------

    // @public {Property.<boolean>}
    this.timerEnabledProperty = new Property(true);

    // @public (read-only) {Property.<GameLevel>} - currently selected level, null indicates no level selected, which
    // means that the level selection screen should appear to the user
    this.currentLevelProperty = new Property(null);

    // @public (read-only) {Property.<boolean>} - transitions to true when all game levels have been completed
    this.allLevelsCompletedProperty = new Property(false);

    //------------------------------------------------------------------------
    // other initialization
    //------------------------------------------------------------------------

    // shuffle the challenge descriptors before creating the levels
    EEChallengeDescriptors.shuffleChallenges();

    // @public (read-only) {Array.<EEGameLevel>} - models for each of the game levels
    this.gameLevels = [];
    _.times(NUMBER_OF_LEVELS, level => {
      const gameLevel = new EEGameLevel(level, level < 3 ? AllowedRepresentations.COINS_ONLY : AllowedRepresentations.VARIABLES_ONLY);
      this.gameLevels.push(gameLevel);
      gameLevel.completedSinceLastClearProperty.link(() => {
        this.allLevelsCompletedProperty.set(this.getAllLevelsCompleted());
      });
    });
  }

  /**
   * step the model
   * @param {number} dt - delta time
   * @public
   */
  step(dt) {
    // step the currently active level model (if there is one)
    this.currentLevelProperty.get() && this.currentLevelProperty.get().step(dt);
  }

  /**
   * set the game level using a number (0-based)
   * @param {number} levelNumber
   * @public
   */
  selectLevel(levelNumber) {
    this.currentLevelProperty.set(this.gameLevels[levelNumber]);
  }

  /**
   * move to the next level
   * @public
   */
  nextLevel() {
    this.currentLevelProperty.set(this.gameLevels[(this.currentLevelProperty.get().levelNumber + 1) % NUMBER_OF_LEVELS]);
  }

  // @public
  returnToLevelSelection() {
    this.currentLevelProperty.reset();
  }

  // @public
  getAllLevelsCompleted() {
    return _.every(this.gameLevels, gameLevelModel => gameLevelModel.completedSinceLastClearProperty.get());
  }

  // @public
  clearAllLevelsCompleted() {
    this.gameLevels.forEach(gameLevelModel => {
      gameLevelModel.completedSinceLastClearProperty.set(false);
    });
  }

  /**
   * @public
   */
  reset() {
    // re-shuffle the challenges
    EEChallengeDescriptors.shuffleChallenges();

    // reset local properties
    this.currentLevelProperty.reset();
    this.timerEnabledProperty.reset();

    // reset each of the levels
    this.gameLevels.forEach(levelModel => {
      levelModel.reset();
    });
  }
}

// statics
EEGameModel.CHALLENGES_PER_LEVEL = CHALLENGES_PER_LEVEL;
EEGameModel.MAX_SCORE_PER_LEVEL = MAX_SCORE_PER_LEVEL;
EEGameModel.NUMBER_OF_LEVELS = NUMBER_OF_LEVELS;
EEGameModel.POINTS_PER_CHALLENGE = POINTS_PER_CHALLENGE;
expressionExchange.register('EEGameModel', EEGameModel);
export default EEGameModel;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQcm9wZXJ0eSIsIkVFUXVlcnlQYXJhbWV0ZXJzIiwiQWxsb3dlZFJlcHJlc2VudGF0aW9ucyIsImV4cHJlc3Npb25FeGNoYW5nZSIsIkVFQ2hhbGxlbmdlRGVzY3JpcHRvcnMiLCJFRUdhbWVMZXZlbCIsIk5VTUJFUl9PRl9MRVZFTFMiLCJtaW5pbWFsR2FtZUxldmVscyIsIkNIQUxMRU5HRVNfUEVSX0xFVkVMIiwiUE9JTlRTX1BFUl9DSEFMTEVOR0UiLCJNQVhfU0NPUkVfUEVSX0xFVkVMIiwiRUVHYW1lTW9kZWwiLCJjb25zdHJ1Y3RvciIsInRpbWVyRW5hYmxlZFByb3BlcnR5IiwiY3VycmVudExldmVsUHJvcGVydHkiLCJhbGxMZXZlbHNDb21wbGV0ZWRQcm9wZXJ0eSIsInNodWZmbGVDaGFsbGVuZ2VzIiwiZ2FtZUxldmVscyIsIl8iLCJ0aW1lcyIsImxldmVsIiwiZ2FtZUxldmVsIiwiQ09JTlNfT05MWSIsIlZBUklBQkxFU19PTkxZIiwicHVzaCIsImNvbXBsZXRlZFNpbmNlTGFzdENsZWFyUHJvcGVydHkiLCJsaW5rIiwic2V0IiwiZ2V0QWxsTGV2ZWxzQ29tcGxldGVkIiwic3RlcCIsImR0IiwiZ2V0Iiwic2VsZWN0TGV2ZWwiLCJsZXZlbE51bWJlciIsIm5leHRMZXZlbCIsInJldHVyblRvTGV2ZWxTZWxlY3Rpb24iLCJyZXNldCIsImV2ZXJ5IiwiZ2FtZUxldmVsTW9kZWwiLCJjbGVhckFsbExldmVsc0NvbXBsZXRlZCIsImZvckVhY2giLCJsZXZlbE1vZGVsIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJFRUdhbWVNb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNS0yMDIwLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBtYWluIG1vZGVsIHR5cGUgZm9yIHRoZSBnYW1lXHJcbiAqXHJcbiAqIEBhdXRob3IgSm9obiBCbGFuY29cclxuICovXHJcblxyXG5pbXBvcnQgUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBFRVF1ZXJ5UGFyYW1ldGVycyBmcm9tICcuLi8uLi9jb21tb24vRUVRdWVyeVBhcmFtZXRlcnMuanMnO1xyXG5pbXBvcnQgQWxsb3dlZFJlcHJlc2VudGF0aW9ucyBmcm9tICcuLi8uLi9jb21tb24vZW51bS9BbGxvd2VkUmVwcmVzZW50YXRpb25zLmpzJztcclxuaW1wb3J0IGV4cHJlc3Npb25FeGNoYW5nZSBmcm9tICcuLi8uLi9leHByZXNzaW9uRXhjaGFuZ2UuanMnO1xyXG5pbXBvcnQgRUVDaGFsbGVuZ2VEZXNjcmlwdG9ycyBmcm9tICcuL0VFQ2hhbGxlbmdlRGVzY3JpcHRvcnMuanMnO1xyXG5pbXBvcnQgRUVHYW1lTGV2ZWwgZnJvbSAnLi9FRUdhbWVMZXZlbC5qcyc7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgTlVNQkVSX09GX0xFVkVMUyA9IEVFUXVlcnlQYXJhbWV0ZXJzLm1pbmltYWxHYW1lTGV2ZWxzID8gMiA6IDg7XHJcbmNvbnN0IENIQUxMRU5HRVNfUEVSX0xFVkVMID0gMztcclxuY29uc3QgUE9JTlRTX1BFUl9DSEFMTEVOR0UgPSAxO1xyXG5jb25zdCBNQVhfU0NPUkVfUEVSX0xFVkVMID0gQ0hBTExFTkdFU19QRVJfTEVWRUwgKiBQT0lOVFNfUEVSX0NIQUxMRU5HRTtcclxuXHJcbmNsYXNzIEVFR2FtZU1vZGVsIHtcclxuXHJcbiAgLyoqXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIHByb3BlcnRpZXNcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gQHB1YmxpYyB7UHJvcGVydHkuPGJvb2xlYW4+fVxyXG4gICAgdGhpcy50aW1lckVuYWJsZWRQcm9wZXJ0eSA9IG5ldyBQcm9wZXJ0eSggdHJ1ZSApO1xyXG5cclxuICAgIC8vIEBwdWJsaWMgKHJlYWQtb25seSkge1Byb3BlcnR5LjxHYW1lTGV2ZWw+fSAtIGN1cnJlbnRseSBzZWxlY3RlZCBsZXZlbCwgbnVsbCBpbmRpY2F0ZXMgbm8gbGV2ZWwgc2VsZWN0ZWQsIHdoaWNoXHJcbiAgICAvLyBtZWFucyB0aGF0IHRoZSBsZXZlbCBzZWxlY3Rpb24gc2NyZWVuIHNob3VsZCBhcHBlYXIgdG8gdGhlIHVzZXJcclxuICAgIHRoaXMuY3VycmVudExldmVsUHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIG51bGwgKTtcclxuXHJcbiAgICAvLyBAcHVibGljIChyZWFkLW9ubHkpIHtQcm9wZXJ0eS48Ym9vbGVhbj59IC0gdHJhbnNpdGlvbnMgdG8gdHJ1ZSB3aGVuIGFsbCBnYW1lIGxldmVscyBoYXZlIGJlZW4gY29tcGxldGVkXHJcbiAgICB0aGlzLmFsbExldmVsc0NvbXBsZXRlZFByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCBmYWxzZSApO1xyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyBvdGhlciBpbml0aWFsaXphdGlvblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBzaHVmZmxlIHRoZSBjaGFsbGVuZ2UgZGVzY3JpcHRvcnMgYmVmb3JlIGNyZWF0aW5nIHRoZSBsZXZlbHNcclxuICAgIEVFQ2hhbGxlbmdlRGVzY3JpcHRvcnMuc2h1ZmZsZUNoYWxsZW5nZXMoKTtcclxuXHJcbiAgICAvLyBAcHVibGljIChyZWFkLW9ubHkpIHtBcnJheS48RUVHYW1lTGV2ZWw+fSAtIG1vZGVscyBmb3IgZWFjaCBvZiB0aGUgZ2FtZSBsZXZlbHNcclxuICAgIHRoaXMuZ2FtZUxldmVscyA9IFtdO1xyXG4gICAgXy50aW1lcyggTlVNQkVSX09GX0xFVkVMUywgbGV2ZWwgPT4ge1xyXG4gICAgICBjb25zdCBnYW1lTGV2ZWwgPSBuZXcgRUVHYW1lTGV2ZWwoXHJcbiAgICAgICAgbGV2ZWwsXHJcbiAgICAgICAgbGV2ZWwgPCAzID8gQWxsb3dlZFJlcHJlc2VudGF0aW9ucy5DT0lOU19PTkxZIDogQWxsb3dlZFJlcHJlc2VudGF0aW9ucy5WQVJJQUJMRVNfT05MWVxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLmdhbWVMZXZlbHMucHVzaCggZ2FtZUxldmVsICk7XHJcbiAgICAgIGdhbWVMZXZlbC5jb21wbGV0ZWRTaW5jZUxhc3RDbGVhclByb3BlcnR5LmxpbmsoICgpID0+IHtcclxuICAgICAgICB0aGlzLmFsbExldmVsc0NvbXBsZXRlZFByb3BlcnR5LnNldCggdGhpcy5nZXRBbGxMZXZlbHNDb21wbGV0ZWQoKSApO1xyXG4gICAgICB9ICk7XHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBzdGVwIHRoZSBtb2RlbFxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkdCAtIGRlbHRhIHRpbWVcclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgc3RlcCggZHQgKSB7XHJcblxyXG4gICAgLy8gc3RlcCB0aGUgY3VycmVudGx5IGFjdGl2ZSBsZXZlbCBtb2RlbCAoaWYgdGhlcmUgaXMgb25lKVxyXG4gICAgdGhpcy5jdXJyZW50TGV2ZWxQcm9wZXJ0eS5nZXQoKSAmJiB0aGlzLmN1cnJlbnRMZXZlbFByb3BlcnR5LmdldCgpLnN0ZXAoIGR0ICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBzZXQgdGhlIGdhbWUgbGV2ZWwgdXNpbmcgYSBudW1iZXIgKDAtYmFzZWQpXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGxldmVsTnVtYmVyXHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG4gIHNlbGVjdExldmVsKCBsZXZlbE51bWJlciApIHtcclxuICAgIHRoaXMuY3VycmVudExldmVsUHJvcGVydHkuc2V0KCB0aGlzLmdhbWVMZXZlbHNbIGxldmVsTnVtYmVyIF0gKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIG1vdmUgdG8gdGhlIG5leHQgbGV2ZWxcclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgbmV4dExldmVsKCkge1xyXG4gICAgdGhpcy5jdXJyZW50TGV2ZWxQcm9wZXJ0eS5zZXQoXHJcbiAgICAgIHRoaXMuZ2FtZUxldmVsc1sgKCB0aGlzLmN1cnJlbnRMZXZlbFByb3BlcnR5LmdldCgpLmxldmVsTnVtYmVyICsgMSApICUgTlVNQkVSX09GX0xFVkVMUyBdXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8gQHB1YmxpY1xyXG4gIHJldHVyblRvTGV2ZWxTZWxlY3Rpb24oKSB7XHJcbiAgICB0aGlzLmN1cnJlbnRMZXZlbFByb3BlcnR5LnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICAvLyBAcHVibGljXHJcbiAgZ2V0QWxsTGV2ZWxzQ29tcGxldGVkKCkge1xyXG4gICAgcmV0dXJuIF8uZXZlcnkoIHRoaXMuZ2FtZUxldmVscywgZ2FtZUxldmVsTW9kZWwgPT4gZ2FtZUxldmVsTW9kZWwuY29tcGxldGVkU2luY2VMYXN0Q2xlYXJQcm9wZXJ0eS5nZXQoKSApO1xyXG4gIH1cclxuXHJcbiAgLy8gQHB1YmxpY1xyXG4gIGNsZWFyQWxsTGV2ZWxzQ29tcGxldGVkKCkge1xyXG4gICAgdGhpcy5nYW1lTGV2ZWxzLmZvckVhY2goIGdhbWVMZXZlbE1vZGVsID0+IHtcclxuICAgICAgZ2FtZUxldmVsTW9kZWwuY29tcGxldGVkU2luY2VMYXN0Q2xlYXJQcm9wZXJ0eS5zZXQoIGZhbHNlICk7XHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgcmVzZXQoKSB7XHJcblxyXG4gICAgLy8gcmUtc2h1ZmZsZSB0aGUgY2hhbGxlbmdlc1xyXG4gICAgRUVDaGFsbGVuZ2VEZXNjcmlwdG9ycy5zaHVmZmxlQ2hhbGxlbmdlcygpO1xyXG5cclxuICAgIC8vIHJlc2V0IGxvY2FsIHByb3BlcnRpZXNcclxuICAgIHRoaXMuY3VycmVudExldmVsUHJvcGVydHkucmVzZXQoKTtcclxuICAgIHRoaXMudGltZXJFbmFibGVkUHJvcGVydHkucmVzZXQoKTtcclxuXHJcbiAgICAvLyByZXNldCBlYWNoIG9mIHRoZSBsZXZlbHNcclxuICAgIHRoaXMuZ2FtZUxldmVscy5mb3JFYWNoKCBsZXZlbE1vZGVsID0+IHtcclxuICAgICAgbGV2ZWxNb2RlbC5yZXNldCgpO1xyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcbn1cclxuXHJcbi8vIHN0YXRpY3NcclxuRUVHYW1lTW9kZWwuQ0hBTExFTkdFU19QRVJfTEVWRUwgPSBDSEFMTEVOR0VTX1BFUl9MRVZFTDtcclxuRUVHYW1lTW9kZWwuTUFYX1NDT1JFX1BFUl9MRVZFTCA9IE1BWF9TQ09SRV9QRVJfTEVWRUw7XHJcbkVFR2FtZU1vZGVsLk5VTUJFUl9PRl9MRVZFTFMgPSBOVU1CRVJfT0ZfTEVWRUxTO1xyXG5FRUdhbWVNb2RlbC5QT0lOVFNfUEVSX0NIQUxMRU5HRSA9IFBPSU5UU19QRVJfQ0hBTExFTkdFO1xyXG5cclxuZXhwcmVzc2lvbkV4Y2hhbmdlLnJlZ2lzdGVyKCAnRUVHYW1lTW9kZWwnLCBFRUdhbWVNb2RlbCApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgRUVHYW1lTW9kZWw7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFFBQVEsTUFBTSxpQ0FBaUM7QUFDdEQsT0FBT0MsaUJBQWlCLE1BQU0sbUNBQW1DO0FBQ2pFLE9BQU9DLHNCQUFzQixNQUFNLDZDQUE2QztBQUNoRixPQUFPQyxrQkFBa0IsTUFBTSw2QkFBNkI7QUFDNUQsT0FBT0Msc0JBQXNCLE1BQU0sNkJBQTZCO0FBQ2hFLE9B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