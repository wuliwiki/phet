// Copyright 2013-2023, University of Colorado Boulder

/**
 * This phet.scenery.Node shows the interactive water bucket.  The user can drag it from the toolbox to the play area, and the water sloshes based on the acceleration.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */

import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import Utils from '../../../../dot/js/Utils.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import { Shape } from '../../../../kite/js/imports.js';
import { Path } from '../../../../scenery/js/imports.js';
import forcesAndMotionBasics from '../../forcesAndMotionBasics.js';
import ItemNode from './ItemNode.js';

// constants
const linear = Utils.linear;
class WaterBucketNode extends ItemNode {
  /**
   * WaterBucketNode constructor
   *
   * @param {MotionModel} model the model for the entire 'motion', 'friction' or 'acceleration' screen
   * @param {MotionScreenView} motionView the view for the entire 'motion', 'friction' or 'acceleration' screen
   * @param {Item} item the model for the item itself
   * @param {Image} image image to be shown when in the toolbox or being dragged
   * @param {Image} imageSitting image to be shown if it is a sitting person
   * @param {Image} imageHolding image to be shown if it is a sitting person holding their arms in the air
   * @param {Property} showMassesProperty boolean property of whether the masses should be shown
   * @param {Rectangle} toolboxNode parent toolbox for the WaterBucketNode
   * @param {Tandem} tandem
   */
  constructor(model, motionView, item, image, imageSitting, imageHolding, showMassesProperty, toolboxNode, tandem) {
    super(model, motionView, item, image, imageSitting, imageHolding, showMassesProperty, toolboxNode, tandem);
    this.item = item;
    const waterPathNode = new Path(Shape.lineSegment(new Vector2(0, 0), new Vector2(0, 18)), {
      stroke: 'black',
      fill: 'rgb(9, 125, 159)',
      lineWidth: 1,
      tandem: tandem.createTandem('waterPathNode')
    });
    this.addChild(waterPathNode);
    waterPathNode.moveToBack();

    //Keep track of the history to show a momentum-based "sloshing" effect
    const history = [];

    //Metrics based on original image size of 98 pixels wide.
    const padX = 4.5;
    const padY = 9;
    const s = image.width / 98.0;
    const leftLineX = x => linear(0, 1, (1 + padX) * s, (10 + padX) * s, x);
    const leftLineY = x => linear(0, 1, (9 - padY) * s, (102 - padY) * s, x);
    const rightLineX = x => linear(1, 0, (87 - padX) * s, (96 - padX) * s, x);
    const rightLineY = x => linear(1, 0, (102 - padY) * s, (9 - padY) * s, x);
    const min = 0.5; //Water level when acceleration = 0

    //When the model steps in time, update the water shape
    //The delta value is the critical value in determining the water shape.
    //Compute it separately as a guard against reshaping the water bucket node when the shape hasn't really changed
    const deltaProperty = new DerivedProperty([model.timeProperty, item.draggingProperty], (time, dragging) => {
      // if the bucket is being dragged, we want delta to be zero, regardless of
      // whether or not the sim is running
      if (dragging) {
        return 0;
      }
      const acceleration = model.accelerationProperty.get();
      history.push(acceleration);
      while (history.length > 7) {
        history.shift(); //remove front item
      }

      let sum = 0;
      for (let i = 0; i < history.length; i++) {
        sum += history[i];
      }
      const composite = sum / history.length;
      return model.isInStack(item) ? -composite / 50 : 0;
    });

    //When the shape has really changed, update the water node
    deltaProperty.link(delta => {
      const path = new Shape();
      path.moveTo(leftLineX(min + delta), leftLineY(min + delta));
      path.lineTo(leftLineX(1), leftLineY(1));
      path.lineTo(rightLineX(1), rightLineY(1));
      path.lineTo(rightLineX(min - delta), rightLineY(min - delta));
      path.close();
      waterPathNode.shape = path;
    });
  }
}
forcesAndMotionBasics.register('WaterBucketNode', WaterBucketNode);
export default WaterBucketNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJVdGlscyIsIlZlY3RvcjIiLCJTaGFwZSIsIlBhdGgiLCJmb3JjZXNBbmRNb3Rpb25CYXNpY3MiLCJJdGVtTm9kZSIsImxpbmVhciIsIldhdGVyQnVja2V0Tm9kZSIsImNvbnN0cnVjdG9yIiwibW9kZWwiLCJtb3Rpb25WaWV3IiwiaXRlbSIsImltYWdlIiwiaW1hZ2VTaXR0aW5nIiwiaW1hZ2VIb2xkaW5nIiwic2hvd01hc3Nlc1Byb3BlcnR5IiwidG9vbGJveE5vZGUiLCJ0YW5kZW0iLCJ3YXRlclBhdGhOb2RlIiwibGluZVNlZ21lbnQiLCJzdHJva2UiLCJmaWxsIiwibGluZVdpZHRoIiwiY3JlYXRlVGFuZGVtIiwiYWRkQ2hpbGQiLCJtb3ZlVG9CYWNrIiwiaGlzdG9yeSIsInBhZFgiLCJwYWRZIiwicyIsIndpZHRoIiwibGVmdExpbmVYIiwieCIsImxlZnRMaW5lWSIsInJpZ2h0TGluZVgiLCJyaWdodExpbmVZIiwibWluIiwiZGVsdGFQcm9wZXJ0eSIsInRpbWVQcm9wZXJ0eSIsImRyYWdnaW5nUHJvcGVydHkiLCJ0aW1lIiwiZHJhZ2dpbmciLCJhY2NlbGVyYXRpb24iLCJhY2NlbGVyYXRpb25Qcm9wZXJ0eSIsImdldCIsInB1c2giLCJsZW5ndGgiLCJzaGlmdCIsInN1bSIsImkiLCJjb21wb3NpdGUiLCJpc0luU3RhY2siLCJsaW5rIiwiZGVsdGEiLCJwYXRoIiwibW92ZVRvIiwibGluZVRvIiwiY2xvc2UiLCJzaGFwZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiV2F0ZXJCdWNrZXROb2RlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFRoaXMgcGhldC5zY2VuZXJ5Lk5vZGUgc2hvd3MgdGhlIGludGVyYWN0aXZlIHdhdGVyIGJ1Y2tldC4gIFRoZSB1c2VyIGNhbiBkcmFnIGl0IGZyb20gdGhlIHRvb2xib3ggdG8gdGhlIHBsYXkgYXJlYSwgYW5kIHRoZSB3YXRlciBzbG9zaGVzIGJhc2VkIG9uIHRoZSBhY2NlbGVyYXRpb24uXHJcbiAqXHJcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IERlcml2ZWRQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL0Rlcml2ZWRQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBVdGlscyBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVXRpbHMuanMnO1xyXG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVmVjdG9yMi5qcyc7XHJcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSAnLi4vLi4vLi4vLi4va2l0ZS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IHsgUGF0aCB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBmb3JjZXNBbmRNb3Rpb25CYXNpY3MgZnJvbSAnLi4vLi4vZm9yY2VzQW5kTW90aW9uQmFzaWNzLmpzJztcclxuaW1wb3J0IEl0ZW1Ob2RlIGZyb20gJy4vSXRlbU5vZGUuanMnO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IGxpbmVhciA9IFV0aWxzLmxpbmVhcjtcclxuXHJcbmNsYXNzIFdhdGVyQnVja2V0Tm9kZSBleHRlbmRzIEl0ZW1Ob2RlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogV2F0ZXJCdWNrZXROb2RlIGNvbnN0cnVjdG9yXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge01vdGlvbk1vZGVsfSBtb2RlbCB0aGUgbW9kZWwgZm9yIHRoZSBlbnRpcmUgJ21vdGlvbicsICdmcmljdGlvbicgb3IgJ2FjY2VsZXJhdGlvbicgc2NyZWVuXHJcbiAgICogQHBhcmFtIHtNb3Rpb25TY3JlZW5WaWV3fSBtb3Rpb25WaWV3IHRoZSB2aWV3IGZvciB0aGUgZW50aXJlICdtb3Rpb24nLCAnZnJpY3Rpb24nIG9yICdhY2NlbGVyYXRpb24nIHNjcmVlblxyXG4gICAqIEBwYXJhbSB7SXRlbX0gaXRlbSB0aGUgbW9kZWwgZm9yIHRoZSBpdGVtIGl0c2VsZlxyXG4gICAqIEBwYXJhbSB7SW1hZ2V9IGltYWdlIGltYWdlIHRvIGJlIHNob3duIHdoZW4gaW4gdGhlIHRvb2xib3ggb3IgYmVpbmcgZHJhZ2dlZFxyXG4gICAqIEBwYXJhbSB7SW1hZ2V9IGltYWdlU2l0dGluZyBpbWFnZSB0byBiZSBzaG93biBpZiBpdCBpcyBhIHNpdHRpbmcgcGVyc29uXHJcbiAgICogQHBhcmFtIHtJbWFnZX0gaW1hZ2VIb2xkaW5nIGltYWdlIHRvIGJlIHNob3duIGlmIGl0IGlzIGEgc2l0dGluZyBwZXJzb24gaG9sZGluZyB0aGVpciBhcm1zIGluIHRoZSBhaXJcclxuICAgKiBAcGFyYW0ge1Byb3BlcnR5fSBzaG93TWFzc2VzUHJvcGVydHkgYm9vbGVhbiBwcm9wZXJ0eSBvZiB3aGV0aGVyIHRoZSBtYXNzZXMgc2hvdWxkIGJlIHNob3duXHJcbiAgICogQHBhcmFtIHtSZWN0YW5nbGV9IHRvb2xib3hOb2RlIHBhcmVudCB0b29sYm94IGZvciB0aGUgV2F0ZXJCdWNrZXROb2RlXHJcbiAgICogQHBhcmFtIHtUYW5kZW19IHRhbmRlbVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBtb2RlbCwgbW90aW9uVmlldywgaXRlbSwgaW1hZ2UsIGltYWdlU2l0dGluZywgaW1hZ2VIb2xkaW5nLCBzaG93TWFzc2VzUHJvcGVydHksIHRvb2xib3hOb2RlLCB0YW5kZW0gKSB7XHJcbiAgICBzdXBlciggbW9kZWwsIG1vdGlvblZpZXcsIGl0ZW0sIGltYWdlLCBpbWFnZVNpdHRpbmcsIGltYWdlSG9sZGluZywgc2hvd01hc3Nlc1Byb3BlcnR5LCB0b29sYm94Tm9kZSwgdGFuZGVtICk7XHJcbiAgICB0aGlzLml0ZW0gPSBpdGVtO1xyXG4gICAgY29uc3Qgd2F0ZXJQYXRoTm9kZSA9IG5ldyBQYXRoKCBTaGFwZS5saW5lU2VnbWVudCggbmV3IFZlY3RvcjIoIDAsIDAgKSwgbmV3IFZlY3RvcjIoIDAsIDE4ICkgKSwge1xyXG4gICAgICBzdHJva2U6ICdibGFjaycsXHJcbiAgICAgIGZpbGw6ICdyZ2IoOSwgMTI1LCAxNTkpJyxcclxuICAgICAgbGluZVdpZHRoOiAxLFxyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICd3YXRlclBhdGhOb2RlJyApXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCB3YXRlclBhdGhOb2RlICk7XHJcbiAgICB3YXRlclBhdGhOb2RlLm1vdmVUb0JhY2soKTtcclxuXHJcbiAgICAvL0tlZXAgdHJhY2sgb2YgdGhlIGhpc3RvcnkgdG8gc2hvdyBhIG1vbWVudHVtLWJhc2VkIFwic2xvc2hpbmdcIiBlZmZlY3RcclxuICAgIGNvbnN0IGhpc3RvcnkgPSBbXTtcclxuXHJcbiAgICAvL01ldHJpY3MgYmFzZWQgb24gb3JpZ2luYWwgaW1hZ2Ugc2l6ZSBvZiA5OCBwaXhlbHMgd2lkZS5cclxuICAgIGNvbnN0IHBhZFggPSA0LjU7XHJcbiAgICBjb25zdCBwYWRZID0gOTtcclxuICAgIGNvbnN0IHMgPSBpbWFnZS53aWR0aCAvIDk4LjA7XHJcblxyXG4gICAgY29uc3QgbGVmdExpbmVYID0geCA9PiBsaW5lYXIoIDAsIDEsICggMSArIHBhZFggKSAqIHMsICggMTAgKyBwYWRYICkgKiBzLCB4ICk7XHJcbiAgICBjb25zdCBsZWZ0TGluZVkgPSB4ID0+IGxpbmVhciggMCwgMSwgKCA5IC0gcGFkWSApICogcywgKCAxMDIgLSBwYWRZICkgKiBzLCB4ICk7XHJcblxyXG4gICAgY29uc3QgcmlnaHRMaW5lWCA9IHggPT4gbGluZWFyKCAxLCAwLCAoIDg3IC0gcGFkWCApICogcywgKCA5NiAtIHBhZFggKSAqIHMsIHggKTtcclxuICAgIGNvbnN0IHJpZ2h0TGluZVkgPSB4ID0+IGxpbmVhciggMSwgMCwgKCAxMDIgLSBwYWRZICkgKiBzLCAoIDkgLSBwYWRZICkgKiBzLCB4ICk7XHJcblxyXG4gICAgY29uc3QgbWluID0gMC41OyAvL1dhdGVyIGxldmVsIHdoZW4gYWNjZWxlcmF0aW9uID0gMFxyXG5cclxuICAgIC8vV2hlbiB0aGUgbW9kZWwgc3RlcHMgaW4gdGltZSwgdXBkYXRlIHRoZSB3YXRlciBzaGFwZVxyXG4gICAgLy9UaGUgZGVsdGEgdmFsdWUgaXMgdGhlIGNyaXRpY2FsIHZhbHVlIGluIGRldGVybWluaW5nIHRoZSB3YXRlciBzaGFwZS5cclxuICAgIC8vQ29tcHV0ZSBpdCBzZXBhcmF0ZWx5IGFzIGEgZ3VhcmQgYWdhaW5zdCByZXNoYXBpbmcgdGhlIHdhdGVyIGJ1Y2tldCBub2RlIHdoZW4gdGhlIHNoYXBlIGhhc24ndCByZWFsbHkgY2hhbmdlZFxyXG4gICAgY29uc3QgZGVsdGFQcm9wZXJ0eSA9IG5ldyBEZXJpdmVkUHJvcGVydHkoIFsgbW9kZWwudGltZVByb3BlcnR5LCBpdGVtLmRyYWdnaW5nUHJvcGVydHkgXSwgKCB0aW1lLCBkcmFnZ2luZyApID0+IHtcclxuXHJcbiAgICAgIC8vIGlmIHRoZSBidWNrZXQgaXMgYmVpbmcgZHJhZ2dlZCwgd2Ugd2FudCBkZWx0YSB0byBiZSB6ZXJvLCByZWdhcmRsZXNzIG9mXHJcbiAgICAgIC8vIHdoZXRoZXIgb3Igbm90IHRoZSBzaW0gaXMgcnVubmluZ1xyXG4gICAgICBpZiAoIGRyYWdnaW5nICkge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBhY2NlbGVyYXRpb24gPSBtb2RlbC5hY2NlbGVyYXRpb25Qcm9wZXJ0eS5nZXQoKTtcclxuICAgICAgaGlzdG9yeS5wdXNoKCBhY2NlbGVyYXRpb24gKTtcclxuICAgICAgd2hpbGUgKCBoaXN0b3J5Lmxlbmd0aCA+IDcgKSB7XHJcbiAgICAgICAgaGlzdG9yeS5zaGlmdCgpOy8vcmVtb3ZlIGZyb250IGl0ZW1cclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IHN1bSA9IDA7XHJcbiAgICAgIGZvciAoIGxldCBpID0gMDsgaSA8IGhpc3RvcnkubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgICAgc3VtICs9IGhpc3RvcnlbIGkgXTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBjb21wb3NpdGUgPSBzdW0gLyBoaXN0b3J5Lmxlbmd0aDtcclxuXHJcbiAgICAgIHJldHVybiBtb2RlbC5pc0luU3RhY2soIGl0ZW0gKSA/IC1jb21wb3NpdGUgLyA1MCA6IDA7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy9XaGVuIHRoZSBzaGFwZSBoYXMgcmVhbGx5IGNoYW5nZWQsIHVwZGF0ZSB0aGUgd2F0ZXIgbm9kZVxyXG4gICAgZGVsdGFQcm9wZXJ0eS5saW5rKCBkZWx0YSA9PiB7XHJcblxyXG4gICAgICBjb25zdCBwYXRoID0gbmV3IFNoYXBlKCk7XHJcbiAgICAgIHBhdGgubW92ZVRvKCBsZWZ0TGluZVgoIG1pbiArIGRlbHRhICksIGxlZnRMaW5lWSggbWluICsgZGVsdGEgKSApO1xyXG4gICAgICBwYXRoLmxpbmVUbyggbGVmdExpbmVYKCAxICksIGxlZnRMaW5lWSggMSApICk7XHJcbiAgICAgIHBhdGgubGluZVRvKCByaWdodExpbmVYKCAxICksIHJpZ2h0TGluZVkoIDEgKSApO1xyXG4gICAgICBwYXRoLmxpbmVUbyggcmlnaHRMaW5lWCggbWluIC0gZGVsdGEgKSwgcmlnaHRMaW5lWSggbWluIC0gZGVsdGEgKSApO1xyXG4gICAgICBwYXRoLmNsb3NlKCk7XHJcblxyXG4gICAgICB3YXRlclBhdGhOb2RlLnNoYXBlID0gcGF0aDtcclxuICAgIH0gKTtcclxuICB9XHJcbn1cclxuXHJcbmZvcmNlc0FuZE1vdGlvbkJhc2ljcy5yZWdpc3RlciggJ1dhdGVyQnVja2V0Tm9kZScsIFdhdGVyQnVja2V0Tm9kZSApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgV2F0ZXJCdWNrZXROb2RlOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxlQUFlLE1BQU0sd0NBQXdDO0FB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