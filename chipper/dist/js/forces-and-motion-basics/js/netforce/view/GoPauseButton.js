// Copyright 2013-2022, University of Colorado Boulder

/**
 * A big round Go/Pause button that appears when the user has attached any nonzero number of pullers to the rope
 * which can be used to start/pause the animation.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */

import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import Emitter from '../../../../axon/js/Emitter.js';
import Multilink from '../../../../axon/js/Multilink.js';
import merge from '../../../../phet-core/js/merge.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { Rectangle, Text } from '../../../../scenery/js/imports.js';
import BooleanToggleNode from '../../../../sun/js/BooleanToggleNode.js';
import RoundPushButton from '../../../../sun/js/buttons/RoundPushButton.js';
import NumberIO from '../../../../tandem/js/types/NumberIO.js';
import StringIO from '../../../../tandem/js/types/StringIO.js';
import forcesAndMotionBasics from '../../forcesAndMotionBasics.js';
import ForcesAndMotionBasicsStrings from '../../ForcesAndMotionBasicsStrings.js';
const goString = ForcesAndMotionBasicsStrings.go;
const pauseString = ForcesAndMotionBasicsStrings.pause;

//Given nodes that have possibly different sizes, wrap the specified node in a parent empty Rectangle node so the bounds will match up
//If the node is already the largest, don't wrap it.
//Centers all the nodes in the parent wrappers
//TODO: Would be good to factor this out or provide better library support
/**
 * Given nodes that have possibly different sizes, wrap the specified node in a parent empty Rectangle node so the
 * bounds will match up.  If the node is already the largest, don't wrap it.
 * Centers all the nodes in the parent wrappers.
 * @param  {Node} node
 * @param  {number} padX
 * @param  {number} padY
 * @param  {Array.<Node>} nodes
 * @returns {Rectangle}
 */
const wrap = (node, padX, padY, nodes) => {
  let maxWidth = -1;
  let maxHeight = -1;
  nodes.forEach(n => {
    if (n.width > maxWidth) {
      maxWidth = n.width;
    }
    if (n.height > maxHeight) {
      maxHeight = n.height;
    }
  });
  maxWidth += padX;
  maxHeight += padY;
  node.centerX = maxWidth / 2;
  node.centerY = maxHeight / 2;
  return new Rectangle(0, 0, maxWidth, maxHeight, {
    children: [node]
  });
};
class GoPauseButton extends BooleanToggleNode {
  /**
   * Create a GoPauseButton that appears below the candy cart when a puller has been attached to the rope.
   *
   * @param {NetForceModel} model the NetForceModel
   * @param {number} layoutWidth the layout width for centering the button
   * @param {Tandem} tandem
   * @param {Object} [options]
   */
  constructor(model, layoutWidth, tandem, options) {
    options = merge({
      top: 400
    }, options);
    const padX = 15;
    const padY = 10;
    const goText = new Text(goString, {
      font: new PhetFont(42),
      tandem: tandem.createTandem('goText')
    });
    const pauseText = new Text(pauseString, {
      font: new PhetFont(30),
      tandem: tandem.createTandem('pauseText')
    });

    // boolean function to determine if the go button should be enabled based on model state.
    const isGoButtonEnabled = () => model.stateProperty.get() !== 'completed' && (model.numberPullersAttachedProperty.get() > 0 || model.runningProperty.get());

    // When the go button is pressed, indicate which pullers are on which knots and what the net force is.
    const goButtonPressedEmitter = new Emitter({
      tandem: tandem.createTandem('goButtonPressedEmitter'),
      parameters: [{
        name: 'netForce',
        phetioType: NumberIO
      }, {
        name: 'knotJSON',
        phetioType: StringIO
      }]
    });
    const goListener = () => {
      goButtonPressedEmitter.emit(model.netForceProperty.get(), JSON.stringify(model.getKnotDescription()));
      model.runningProperty.set(true);
    };
    const goButton = new RoundPushButton({
      content: wrap(goText, padX, padY, [goText, pauseText]),
      baseColor: '#94b830',
      listener: goListener,
      tandem: tandem.createTandem('goButton')
    }); //green

    const pauseListener = () => {
      model.runningProperty.set(false);
    };
    const pauseButton = new RoundPushButton({
      content: wrap(pauseText, padX, padY, [goText, pauseText]),
      baseColor: '#df1a22',
      listener: pauseListener,
      tandem: tandem.createTandem('pauseButton')
    }); //red

    const showGoButtonProperty = new DerivedProperty([model.runningProperty], running => !running);
    super(showGoButtonProperty, goButton, pauseButton, options);

    //Show the go/pause button if any pullers are attached or if the cart got started moving, and if it hasn't already finished a match, see #61
    Multilink.multilink([model.runningProperty, model.stateProperty, model.numberPullersAttachedProperty], () => {
      const enabled = isGoButtonEnabled();
      goButton.enabled = enabled;
      pauseButton.enabled = enabled;
    });
    this.centerX = layoutWidth / 2;
  }
}
forcesAndMotionBasics.register('GoPauseButton', GoPauseButton);
export default GoPauseButton;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJFbWl0dGVyIiwiTXVsdGlsaW5rIiwibWVyZ2UiLCJQaGV0Rm9udCIsIlJlY3RhbmdsZSIsIlRleHQiLCJCb29sZWFuVG9nZ2xlTm9kZSIsIlJvdW5kUHVzaEJ1dHRvbiIsIk51bWJlcklPIiwiU3RyaW5nSU8iLCJmb3JjZXNBbmRNb3Rpb25CYXNpY3MiLCJGb3JjZXNBbmRNb3Rpb25CYXNpY3NTdHJpbmdzIiwiZ29TdHJpbmciLCJnbyIsInBhdXNlU3RyaW5nIiwicGF1c2UiLCJ3cmFwIiwibm9kZSIsInBhZFgiLCJwYWRZIiwibm9kZXMiLCJtYXhXaWR0aCIsIm1heEhlaWdodCIsImZvckVhY2giLCJuIiwid2lkdGgiLCJoZWlnaHQiLCJjZW50ZXJYIiwiY2VudGVyWSIsImNoaWxkcmVuIiwiR29QYXVzZUJ1dHRvbiIsImNvbnN0cnVjdG9yIiwibW9kZWwiLCJsYXlvdXRXaWR0aCIsInRhbmRlbSIsIm9wdGlvbnMiLCJ0b3AiLCJnb1RleHQiLCJmb250IiwiY3JlYXRlVGFuZGVtIiwicGF1c2VUZXh0IiwiaXNHb0J1dHRvbkVuYWJsZWQiLCJzdGF0ZVByb3BlcnR5IiwiZ2V0IiwibnVtYmVyUHVsbGVyc0F0dGFjaGVkUHJvcGVydHkiLCJydW5uaW5nUHJvcGVydHkiLCJnb0J1dHRvblByZXNzZWRFbWl0dGVyIiwicGFyYW1ldGVycyIsIm5hbWUiLCJwaGV0aW9UeXBlIiwiZ29MaXN0ZW5lciIsImVtaXQiLCJuZXRGb3JjZVByb3BlcnR5IiwiSlNPTiIsInN0cmluZ2lmeSIsImdldEtub3REZXNjcmlwdGlvbiIsInNldCIsImdvQnV0dG9uIiwiY29udGVudCIsImJhc2VDb2xvciIsImxpc3RlbmVyIiwicGF1c2VMaXN0ZW5lciIsInBhdXNlQnV0dG9uIiwic2hvd0dvQnV0dG9uUHJvcGVydHkiLCJydW5uaW5nIiwibXVsdGlsaW5rIiwiZW5hYmxlZCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiR29QYXVzZUJ1dHRvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxMy0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBBIGJpZyByb3VuZCBHby9QYXVzZSBidXR0b24gdGhhdCBhcHBlYXJzIHdoZW4gdGhlIHVzZXIgaGFzIGF0dGFjaGVkIGFueSBub256ZXJvIG51bWJlciBvZiBwdWxsZXJzIHRvIHRoZSByb3BlXHJcbiAqIHdoaWNoIGNhbiBiZSB1c2VkIHRvIHN0YXJ0L3BhdXNlIHRoZSBhbmltYXRpb24uXHJcbiAqXHJcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IERlcml2ZWRQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL0Rlcml2ZWRQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBFbWl0dGVyIGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvRW1pdHRlci5qcyc7XHJcbmltcG9ydCBNdWx0aWxpbmsgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9NdWx0aWxpbmsuanMnO1xyXG5pbXBvcnQgbWVyZ2UgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL21lcmdlLmpzJztcclxuaW1wb3J0IFBoZXRGb250IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9QaGV0Rm9udC5qcyc7XHJcbmltcG9ydCB7IFJlY3RhbmdsZSwgVGV4dCB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBCb29sZWFuVG9nZ2xlTm9kZSBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvQm9vbGVhblRvZ2dsZU5vZGUuanMnO1xyXG5pbXBvcnQgUm91bmRQdXNoQnV0dG9uIGZyb20gJy4uLy4uLy4uLy4uL3N1bi9qcy9idXR0b25zL1JvdW5kUHVzaEJ1dHRvbi5qcyc7XHJcbmltcG9ydCBOdW1iZXJJTyBmcm9tICcuLi8uLi8uLi8uLi90YW5kZW0vanMvdHlwZXMvTnVtYmVySU8uanMnO1xyXG5pbXBvcnQgU3RyaW5nSU8gZnJvbSAnLi4vLi4vLi4vLi4vdGFuZGVtL2pzL3R5cGVzL1N0cmluZ0lPLmpzJztcclxuaW1wb3J0IGZvcmNlc0FuZE1vdGlvbkJhc2ljcyBmcm9tICcuLi8uLi9mb3JjZXNBbmRNb3Rpb25CYXNpY3MuanMnO1xyXG5pbXBvcnQgRm9yY2VzQW5kTW90aW9uQmFzaWNzU3RyaW5ncyBmcm9tICcuLi8uLi9Gb3JjZXNBbmRNb3Rpb25CYXNpY3NTdHJpbmdzLmpzJztcclxuXHJcbmNvbnN0IGdvU3RyaW5nID0gRm9yY2VzQW5kTW90aW9uQmFzaWNzU3RyaW5ncy5nbztcclxuY29uc3QgcGF1c2VTdHJpbmcgPSBGb3JjZXNBbmRNb3Rpb25CYXNpY3NTdHJpbmdzLnBhdXNlO1xyXG5cclxuLy9HaXZlbiBub2RlcyB0aGF0IGhhdmUgcG9zc2libHkgZGlmZmVyZW50IHNpemVzLCB3cmFwIHRoZSBzcGVjaWZpZWQgbm9kZSBpbiBhIHBhcmVudCBlbXB0eSBSZWN0YW5nbGUgbm9kZSBzbyB0aGUgYm91bmRzIHdpbGwgbWF0Y2ggdXBcclxuLy9JZiB0aGUgbm9kZSBpcyBhbHJlYWR5IHRoZSBsYXJnZXN0LCBkb24ndCB3cmFwIGl0LlxyXG4vL0NlbnRlcnMgYWxsIHRoZSBub2RlcyBpbiB0aGUgcGFyZW50IHdyYXBwZXJzXHJcbi8vVE9ETzogV291bGQgYmUgZ29vZCB0byBmYWN0b3IgdGhpcyBvdXQgb3IgcHJvdmlkZSBiZXR0ZXIgbGlicmFyeSBzdXBwb3J0XHJcbi8qKlxyXG4gKiBHaXZlbiBub2RlcyB0aGF0IGhhdmUgcG9zc2libHkgZGlmZmVyZW50IHNpemVzLCB3cmFwIHRoZSBzcGVjaWZpZWQgbm9kZSBpbiBhIHBhcmVudCBlbXB0eSBSZWN0YW5nbGUgbm9kZSBzbyB0aGVcclxuICogYm91bmRzIHdpbGwgbWF0Y2ggdXAuICBJZiB0aGUgbm9kZSBpcyBhbHJlYWR5IHRoZSBsYXJnZXN0LCBkb24ndCB3cmFwIGl0LlxyXG4gKiBDZW50ZXJzIGFsbCB0aGUgbm9kZXMgaW4gdGhlIHBhcmVudCB3cmFwcGVycy5cclxuICogQHBhcmFtICB7Tm9kZX0gbm9kZVxyXG4gKiBAcGFyYW0gIHtudW1iZXJ9IHBhZFhcclxuICogQHBhcmFtICB7bnVtYmVyfSBwYWRZXHJcbiAqIEBwYXJhbSAge0FycmF5LjxOb2RlPn0gbm9kZXNcclxuICogQHJldHVybnMge1JlY3RhbmdsZX1cclxuICovXHJcbmNvbnN0IHdyYXAgPSAoIG5vZGUsIHBhZFgsIHBhZFksIG5vZGVzICkgPT4ge1xyXG4gIGxldCBtYXhXaWR0aCA9IC0xO1xyXG4gIGxldCBtYXhIZWlnaHQgPSAtMTtcclxuICBub2Rlcy5mb3JFYWNoKCBuID0+IHtcclxuICAgIGlmICggbi53aWR0aCA+IG1heFdpZHRoICkge1xyXG4gICAgICBtYXhXaWR0aCA9IG4ud2lkdGg7XHJcbiAgICB9XHJcbiAgICBpZiAoIG4uaGVpZ2h0ID4gbWF4SGVpZ2h0ICkge1xyXG4gICAgICBtYXhIZWlnaHQgPSBuLmhlaWdodDtcclxuICAgIH1cclxuICB9ICk7XHJcbiAgbWF4V2lkdGggKz0gcGFkWDtcclxuICBtYXhIZWlnaHQgKz0gcGFkWTtcclxuICBub2RlLmNlbnRlclggPSBtYXhXaWR0aCAvIDI7XHJcbiAgbm9kZS5jZW50ZXJZID0gbWF4SGVpZ2h0IC8gMjtcclxuICByZXR1cm4gbmV3IFJlY3RhbmdsZSggMCwgMCwgbWF4V2lkdGgsIG1heEhlaWdodCwgeyBjaGlsZHJlbjogWyBub2RlIF0gfSApO1xyXG59O1xyXG5cclxuY2xhc3MgR29QYXVzZUJ1dHRvbiBleHRlbmRzIEJvb2xlYW5Ub2dnbGVOb2RlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIGEgR29QYXVzZUJ1dHRvbiB0aGF0IGFwcGVhcnMgYmVsb3cgdGhlIGNhbmR5IGNhcnQgd2hlbiBhIHB1bGxlciBoYXMgYmVlbiBhdHRhY2hlZCB0byB0aGUgcm9wZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7TmV0Rm9yY2VNb2RlbH0gbW9kZWwgdGhlIE5ldEZvcmNlTW9kZWxcclxuICAgKiBAcGFyYW0ge251bWJlcn0gbGF5b3V0V2lkdGggdGhlIGxheW91dCB3aWR0aCBmb3IgY2VudGVyaW5nIHRoZSBidXR0b25cclxuICAgKiBAcGFyYW0ge1RhbmRlbX0gdGFuZGVtXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBtb2RlbCwgbGF5b3V0V2lkdGgsIHRhbmRlbSwgb3B0aW9ucyApIHtcclxuXHJcbiAgICBvcHRpb25zID0gbWVyZ2UoIHtcclxuICAgICAgdG9wOiA0MDBcclxuICAgIH0sIG9wdGlvbnMgKTtcclxuICAgIGNvbnN0IHBhZFggPSAxNTtcclxuICAgIGNvbnN0IHBhZFkgPSAxMDtcclxuICAgIGNvbnN0IGdvVGV4dCA9IG5ldyBUZXh0KCBnb1N0cmluZywge1xyXG4gICAgICBmb250OiBuZXcgUGhldEZvbnQoIDQyICksXHJcbiAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2dvVGV4dCcgKVxyXG4gICAgfSApO1xyXG4gICAgY29uc3QgcGF1c2VUZXh0ID0gbmV3IFRleHQoIHBhdXNlU3RyaW5nLCB7XHJcbiAgICAgIGZvbnQ6IG5ldyBQaGV0Rm9udCggMzAgKSxcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAncGF1c2VUZXh0JyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gYm9vbGVhbiBmdW5jdGlvbiB0byBkZXRlcm1pbmUgaWYgdGhlIGdvIGJ1dHRvbiBzaG91bGQgYmUgZW5hYmxlZCBiYXNlZCBvbiBtb2RlbCBzdGF0ZS5cclxuICAgIGNvbnN0IGlzR29CdXR0b25FbmFibGVkID0gKCkgPT4gbW9kZWwuc3RhdGVQcm9wZXJ0eS5nZXQoKSAhPT0gJ2NvbXBsZXRlZCcgJiYgKCBtb2RlbC5udW1iZXJQdWxsZXJzQXR0YWNoZWRQcm9wZXJ0eS5nZXQoKSA+IDAgfHwgbW9kZWwucnVubmluZ1Byb3BlcnR5LmdldCgpICk7XHJcblxyXG4gICAgLy8gV2hlbiB0aGUgZ28gYnV0dG9uIGlzIHByZXNzZWQsIGluZGljYXRlIHdoaWNoIHB1bGxlcnMgYXJlIG9uIHdoaWNoIGtub3RzIGFuZCB3aGF0IHRoZSBuZXQgZm9yY2UgaXMuXHJcbiAgICBjb25zdCBnb0J1dHRvblByZXNzZWRFbWl0dGVyID0gbmV3IEVtaXR0ZXIoIHtcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnZ29CdXR0b25QcmVzc2VkRW1pdHRlcicgKSxcclxuICAgICAgcGFyYW1ldGVyczogW1xyXG4gICAgICAgIHsgbmFtZTogJ25ldEZvcmNlJywgcGhldGlvVHlwZTogTnVtYmVySU8gfSxcclxuICAgICAgICB7IG5hbWU6ICdrbm90SlNPTicsIHBoZXRpb1R5cGU6IFN0cmluZ0lPIH1cclxuICAgICAgXVxyXG4gICAgfSApO1xyXG4gICAgY29uc3QgZ29MaXN0ZW5lciA9ICgpID0+IHtcclxuICAgICAgZ29CdXR0b25QcmVzc2VkRW1pdHRlci5lbWl0KCBtb2RlbC5uZXRGb3JjZVByb3BlcnR5LmdldCgpLCBKU09OLnN0cmluZ2lmeSggbW9kZWwuZ2V0S25vdERlc2NyaXB0aW9uKCkgKSApO1xyXG4gICAgICBtb2RlbC5ydW5uaW5nUHJvcGVydHkuc2V0KCB0cnVlICk7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgZ29CdXR0b24gPSBuZXcgUm91bmRQdXNoQnV0dG9uKCB7XHJcbiAgICAgIGNvbnRlbnQ6IHdyYXAoIGdvVGV4dCwgcGFkWCwgcGFkWSwgWyBnb1RleHQsIHBhdXNlVGV4dCBdICksXHJcbiAgICAgIGJhc2VDb2xvcjogJyM5NGI4MzAnLFxyXG4gICAgICBsaXN0ZW5lcjogZ29MaXN0ZW5lcixcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnZ29CdXR0b24nIClcclxuICAgIH0gKTsvL2dyZWVuXHJcblxyXG4gICAgY29uc3QgcGF1c2VMaXN0ZW5lciA9ICgpID0+IHtcclxuICAgICAgbW9kZWwucnVubmluZ1Byb3BlcnR5LnNldCggZmFsc2UgKTtcclxuICAgIH07XHJcbiAgICBjb25zdCBwYXVzZUJ1dHRvbiA9IG5ldyBSb3VuZFB1c2hCdXR0b24oIHtcclxuICAgICAgY29udGVudDogd3JhcCggcGF1c2VUZXh0LCBwYWRYLCBwYWRZLCBbIGdvVGV4dCwgcGF1c2VUZXh0IF0gKSxcclxuICAgICAgYmFzZUNvbG9yOiAnI2RmMWEyMicsXHJcbiAgICAgIGxpc3RlbmVyOiBwYXVzZUxpc3RlbmVyLFxyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdwYXVzZUJ1dHRvbicgKVxyXG4gICAgfSApOy8vcmVkXHJcblxyXG4gICAgY29uc3Qgc2hvd0dvQnV0dG9uUHJvcGVydHkgPSBuZXcgRGVyaXZlZFByb3BlcnR5KCBbIG1vZGVsLnJ1bm5pbmdQcm9wZXJ0eSBdLCBydW5uaW5nID0+ICFydW5uaW5nICk7XHJcblxyXG4gICAgc3VwZXIoIHNob3dHb0J1dHRvblByb3BlcnR5LCBnb0J1dHRvbiwgcGF1c2VCdXR0b24sIG9wdGlvbnMgKTtcclxuXHJcbiAgICAvL1Nob3cgdGhlIGdvL3BhdXNlIGJ1dHRvbiBpZiBhbnkgcHVsbGVycyBhcmUgYXR0YWNoZWQgb3IgaWYgdGhlIGNhcnQgZ290IHN0YXJ0ZWQgbW92aW5nLCBhbmQgaWYgaXQgaGFzbid0IGFscmVhZHkgZmluaXNoZWQgYSBtYXRjaCwgc2VlICM2MVxyXG4gICAgTXVsdGlsaW5rLm11bHRpbGluayggWyBtb2RlbC5ydW5uaW5nUHJvcGVydHksIG1vZGVsLnN0YXRlUHJvcGVydHksIG1vZGVsLm51bWJlclB1bGxlcnNBdHRhY2hlZFByb3BlcnR5IF0sICgpID0+IHtcclxuICAgICAgY29uc3QgZW5hYmxlZCA9IGlzR29CdXR0b25FbmFibGVkKCk7XHJcbiAgICAgIGdvQnV0dG9uLmVuYWJsZWQgPSBlbmFibGVkO1xyXG4gICAgICBwYXVzZUJ1dHRvbi5lbmFibGVkID0gZW5hYmxlZDtcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLmNlbnRlclggPSBsYXlvdXRXaWR0aCAvIDI7XHJcbiAgfVxyXG59XHJcblxyXG5mb3JjZXNBbmRNb3Rpb25CYXNpY3MucmVnaXN0ZXIoICdHb1BhdXNlQnV0dG9uJywgR29QYXVzZUJ1dHRvbiApO1xyXG5leHBvcnQgZGVmYXVsdCBHb1BhdXNlQnV0dG9uOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGVBQWUsTUFBTSx3Q0FBd0M7QUFDcEUsT0FBT0MsT0FBTyxNQUFNLGdDQUFnQztBQUNwRCxPQUFPQyxTQUFTLE1BQU0sa0NBQWtDO0FBQ3hELE9BQU9DLEtBQUssTUFBTSxtQ0FBbUM7QUFDckQsT0FBT0MsUUFBUSxNQUFNLHlDQUF5QztBQUM5RCxTQUFTQyxTQUFTLEVBQUVDLElBQUksUUFBUSxtQ0FBbUM7QUFDbkUsT0FBT0MsaUJBQWlCLE1BQU0seUNBQXlDO0FBQ3ZFLE9BQU9DLGVBQWUsTUFBTSwrQ0FBK0M7QUFDM0UsT0FBT0MsUUFBUSxNQUFNLHlDQUF5QztBQUM5RCxPQUFPQyxRQUFRLE1BQU0seUNBQXlDO0FBQzlELE9BQU9DLHFCQUFxQixNQUFNLGdDQUFnQztBQUNsRSxPQUFPQyw0QkFBNEIsTUFBTSx1Q0FBdUM7QUFFaEYsTUFBTUMsUUFBUSxHQUFHRCw0QkFBNEIsQ0FBQ0UsRUFBRTtBQUNoRCxNQUFNQyxXQUFXLEdBQUdILDRCQUE0QixDQUFDSSxLQUFLOztBQUV0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUMsSUFBSSxHQUFHQSxDQUFFQyxJQUFJLEVBQUVDLElBQUksRUFBRUMsSUFBSSxFQUFFQyxLQUFLLEtBQU07RUFDMUMsSUFBSUMsUUFBUSxHQUFHLENBQUMsQ0FBQztFQUNqQixJQUFJQyxTQUFTLEdBQUcsQ0FBQyxDQUFDO0VBQ2xCRixLQUFLLENBQUNHLE9BQU8sQ0FB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