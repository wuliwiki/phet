// Copyright 2013-2023, University of Colorado Boulder

/**
 * FiniteStatusBar is the status bar for games that have a finite number of challenges per level.
 * This was adapted from and replaces ScoreboardBar. See https://github.com/phetsims/vegas/issues/66.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import DerivedProperty from '../../axon/js/DerivedProperty.js';
import Multilink from '../../axon/js/Multilink.js';
import optionize, { combineOptions } from '../../phet-core/js/optionize.js';
import StringUtils from '../../phetcommon/js/util/StringUtils.js';
import PhetColorScheme from '../../scenery-phet/js/PhetColorScheme.js';
import StatusBar from '../../scenery-phet/js/StatusBar.js';
import { HBox, Rectangle, Text } from '../../scenery/js/imports.js';
import TextPushButton from '../../sun/js/buttons/TextPushButton.js';
import Tandem from '../../tandem/js/Tandem.js';
import ElapsedTimeNode from './ElapsedTimeNode.js';
import ScoreDisplayLabeledNumber from './ScoreDisplayLabeledNumber.js';
import vegas from './vegas.js';
import VegasStrings from './VegasStrings.js';
export default class FiniteStatusBar extends StatusBar {
  /**
   * @param layoutBounds - layoutBounds of the ScreenView
   * @param visibleBoundsProperty - visible bounds of the ScreenView
   * @param scoreProperty
   * @param providedOptions
   */
  constructor(layoutBounds, visibleBoundsProperty, scoreProperty, providedOptions) {
    const options = optionize()({
      // SelfOptions
      challengeIndexProperty: null,
      numberOfChallengesProperty: null,
      levelProperty: null,
      elapsedTimeProperty: null,
      timerEnabledProperty: null,
      levelVisible: true,
      challengeNumberVisible: true,
      font: StatusBar.DEFAULT_FONT,
      textFill: StatusBar.DEFAULT_TEXT_FILL,
      createScoreDisplay: scoreProperty => new ScoreDisplayLabeledNumber(scoreProperty, {
        font: providedOptions && providedOptions.font ? providedOptions.font : StatusBar.DEFAULT_FONT,
        textFill: providedOptions && providedOptions.textFill ? providedOptions.textFill : StatusBar.DEFAULT_TEXT_FILL
      }),
      startOverButtonText: VegasStrings.startOverStringProperty,
      clockIconRadius: 15,
      xSpacing: 50,
      xMargin: 20,
      yMargin: 10,
      barFill: null,
      barStroke: null,
      // StatusBarOptions
      tandem: Tandem.OPTIONAL
    }, providedOptions);

    // nested options for 'Start Over' button
    options.startOverButtonOptions = combineOptions({
      font: options.font,
      textFill: options.textFill,
      baseColor: PhetColorScheme.BUTTON_YELLOW,
      xMargin: 10,
      yMargin: 8,
      listener: _.noop,
      tandem: options.tandem.createTandem('startOverButton'),
      maxWidth: 0.2 * (layoutBounds.width - 2 * options.xMargin) // use 20% of available width
    }, options.startOverButtonOptions);
    assert && assert(options.challengeIndexProperty && options.numberOfChallengesProperty || !options.challengeIndexProperty && !options.numberOfChallengesProperty, 'challengeIndexProperty and numberOfChallengesProperty are both or neither');

    // nested options for 'Level N' text
    options.levelTextOptions = combineOptions({
      fill: options.textFill,
      font: options.font
    }, options.levelTextOptions);

    // nested options for 'Challenge N of M' text
    options.challengeTextOptions = combineOptions({
      fill: options.textFill,
      font: options.font
    }, options.challengeTextOptions);

    // the rectangular bar, size will be set by visibleBoundsListener
    const barNode = new Rectangle({
      fill: options.barFill,
      stroke: options.barStroke
    });

    // Nodes on the left end of the bar
    const leftChildren = [];

    // Level N
    let levelText;
    if (options.levelProperty && options.levelVisible) {
      const levelStringProperty = new DerivedProperty([VegasStrings.label.levelStringProperty, options.levelProperty], (pattern, level) => StringUtils.format(pattern, level));
      levelText = new Text(levelStringProperty, combineOptions({
        tandem: options.tandem.createTandem('levelText')
      }, options.levelTextOptions));
      leftChildren.push(levelText);
    }

    // Challenge N of M
    let challengeNumberText;
    if (options.challengeIndexProperty && options.numberOfChallengesProperty) {
      const challengeNumberStringProperty = new DerivedProperty([VegasStrings.pattern['0challenge']['1maxStringProperty'], options.challengeIndexProperty, options.numberOfChallengesProperty], (pattern, challengeIndex, numberOfChallenges) => StringUtils.format(pattern, challengeIndex + 1, numberOfChallenges));
      challengeNumberText = new Text(challengeNumberStringProperty, combineOptions({
        tandem: options.tandem.createTandem('challengeNumberText')
      }, options.challengeTextOptions));
      leftChildren.push(challengeNumberText);
    }

    // Score
    const scoreDisplay = options.createScoreDisplay(scoreProperty);
    leftChildren.push(scoreDisplay);

    // Timer (optional)
    let elapsedTimeNode;
    if (options.elapsedTimeProperty && options.timerEnabledProperty) {
      elapsedTimeNode = new ElapsedTimeNode(options.elapsedTimeProperty, {
        visibleProperty: options.timerEnabledProperty,
        clockIconRadius: options.clockIconRadius,
        font: options.font,
        textFill: options.textFill
      });
      leftChildren.push(elapsedTimeNode);
    }

    // Start Over button
    const startOverButton = new TextPushButton(options.startOverButtonText, options.startOverButtonOptions);

    // Nodes on the left end of the bar
    const leftNodes = new HBox({
      // Because elapsedTimeNode needs to be considered regardless of whether it's visible,
      // see https://github.com/phetsims/vegas/issues/80
      excludeInvisibleChildrenFromBounds: false,
      spacing: options.xSpacing,
      children: leftChildren,
      maxWidth: layoutBounds.width - 2 * options.xMargin - startOverButton.width - options.xSpacing
    });
    options.children = [barNode, leftNodes, startOverButton];
    options.barHeight = Math.max(leftNodes.height, scoreDisplay.height) + 2 * options.yMargin;
    super(layoutBounds, visibleBoundsProperty, options);

    // Dynamically position components on the bar.
    Multilink.multilink([this.positioningBoundsProperty, leftNodes.boundsProperty, startOverButton.boundsProperty], (positioningBounds, leftNodeBounds, startOverButtonBounds) => {
      leftNodes.left = positioningBounds.left;
      leftNodes.centerY = positioningBounds.centerY;
      startOverButton.right = positioningBounds.right;
      startOverButton.centerY = positioningBounds.centerY;
    });
    this.disposeFiniteStatusBar = () => {
      levelText.dispose();
      challengeNumberText.dispose();
      scoreDisplay.dispose();
      elapsedTimeNode && elapsedTimeNode.dispose();
      startOverButton.dispose();
      elapsedTimeNode && elapsedTimeNode.dispose();
    };
  }
  dispose() {
    this.disposeFiniteStatusBar();
    super.dispose();
  }
}
vegas.register('FiniteStatusBar', FiniteStatusBar);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJNdWx0aWxpbmsiLCJvcHRpb25pemUiLCJjb21iaW5lT3B0aW9ucyIsIlN0cmluZ1V0aWxzIiwiUGhldENvbG9yU2NoZW1lIiwiU3RhdHVzQmFyIiwiSEJveCIsIlJlY3RhbmdsZSIsIlRleHQiLCJUZXh0UHVzaEJ1dHRvbiIsIlRhbmRlbSIsIkVsYXBzZWRUaW1lTm9kZSIsIlNjb3JlRGlzcGxheUxhYmVsZWROdW1iZXIiLCJ2ZWdhcyIsIlZlZ2FzU3RyaW5ncyIsIkZpbml0ZVN0YXR1c0JhciIsImNvbnN0cnVjdG9yIiwibGF5b3V0Qm91bmRzIiwidmlzaWJsZUJvdW5kc1Byb3BlcnR5Iiwic2NvcmVQcm9wZXJ0eSIsInByb3ZpZGVkT3B0aW9ucyIsIm9wdGlvbnMiLCJjaGFsbGVuZ2VJbmRleFByb3BlcnR5IiwibnVtYmVyT2ZDaGFsbGVuZ2VzUHJvcGVydHkiLCJsZXZlbFByb3BlcnR5IiwiZWxhcHNlZFRpbWVQcm9wZXJ0eSIsInRpbWVyRW5hYmxlZFByb3BlcnR5IiwibGV2ZWxWaXNpYmxlIiwiY2hhbGxlbmdlTnVtYmVyVmlzaWJsZSIsImZvbnQiLCJERUZBVUxUX0ZPTlQiLCJ0ZXh0RmlsbCIsIkRFRkFVTFRfVEVYVF9GSUxMIiwiY3JlYXRlU2NvcmVEaXNwbGF5Iiwic3RhcnRPdmVyQnV0dG9uVGV4dCIsInN0YXJ0T3ZlclN0cmluZ1Byb3BlcnR5IiwiY2xvY2tJY29uUmFkaXVzIiwieFNwYWNpbmciLCJ4TWFyZ2luIiwieU1hcmdpbiIsImJhckZpbGwiLCJiYXJTdHJva2UiLCJ0YW5kZW0iLCJPUFRJT05BTCIsInN0YXJ0T3ZlckJ1dHRvbk9wdGlvbnMiLCJiYXNlQ29sb3IiLCJCVVRUT05fWUVMTE9XIiwibGlzdGVuZXIiLCJfIiwibm9vcCIsImNyZWF0ZVRhbmRlbSIsIm1heFdpZHRoIiwid2lkdGgiLCJhc3NlcnQiLCJsZXZlbFRleHRPcHRpb25zIiwiZmlsbCIsImNoYWxsZW5nZVRleHRPcHRpb25zIiwiYmFyTm9kZSIsInN0cm9rZSIsImxlZnRDaGlsZHJlbiIsImxldmVsVGV4dCIsImxldmVsU3RyaW5nUHJvcGVydHkiLCJsYWJlbCIsInBhdHRlcm4iLCJsZXZlbCIsImZvcm1hdCIsInB1c2giLCJjaGFsbGVuZ2VOdW1iZXJUZXh0IiwiY2hhbGxlbmdlTnVtYmVyU3RyaW5nUHJvcGVydHkiLCJjaGFsbGVuZ2VJbmRleCIsIm51bWJlck9mQ2hhbGxlbmdlcyIsInNjb3JlRGlzcGxheSIsImVsYXBzZWRUaW1lTm9kZSIsInZpc2libGVQcm9wZXJ0eSIsInN0YXJ0T3ZlckJ1dHRvbiIsImxlZnROb2RlcyIsImV4Y2x1ZGVJbnZpc2libGVDaGlsZHJlbkZyb21Cb3VuZHMiLCJzcGFjaW5nIiwiY2hpbGRyZW4iLCJiYXJIZWlnaHQiLCJNYXRoIiwibWF4IiwiaGVpZ2h0IiwibXVsdGlsaW5rIiwicG9zaXRpb25pbmdCb3VuZHNQcm9wZXJ0eSIsImJvdW5kc1Byb3BlcnR5IiwicG9zaXRpb25pbmdCb3VuZHMiLCJsZWZ0Tm9kZUJvdW5kcyIsInN0YXJ0T3ZlckJ1dHRvbkJvdW5kcyIsImxlZnQiLCJjZW50ZXJZIiwicmlnaHQiLCJkaXNwb3NlRmluaXRlU3RhdHVzQmFyIiwiZGlzcG9zZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiRmluaXRlU3RhdHVzQmFyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIEZpbml0ZVN0YXR1c0JhciBpcyB0aGUgc3RhdHVzIGJhciBmb3IgZ2FtZXMgdGhhdCBoYXZlIGEgZmluaXRlIG51bWJlciBvZiBjaGFsbGVuZ2VzIHBlciBsZXZlbC5cclxuICogVGhpcyB3YXMgYWRhcHRlZCBmcm9tIGFuZCByZXBsYWNlcyBTY29yZWJvYXJkQmFyLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3ZlZ2FzL2lzc3Vlcy82Ni5cclxuICpcclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICovXHJcblxyXG5pbXBvcnQgRGVyaXZlZFByb3BlcnR5IGZyb20gJy4uLy4uL2F4b24vanMvRGVyaXZlZFByb3BlcnR5LmpzJztcclxuaW1wb3J0IE11bHRpbGluayBmcm9tICcuLi8uLi9heG9uL2pzL011bHRpbGluay5qcyc7XHJcbmltcG9ydCBUUHJvcGVydHkgZnJvbSAnLi4vLi4vYXhvbi9qcy9UUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgVFJlYWRPbmx5UHJvcGVydHkgZnJvbSAnLi4vLi4vYXhvbi9qcy9UUmVhZE9ubHlQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBCb3VuZHMyIGZyb20gJy4uLy4uL2RvdC9qcy9Cb3VuZHMyLmpzJztcclxuaW1wb3J0IG9wdGlvbml6ZSwgeyBjb21iaW5lT3B0aW9ucyB9IGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgU3RyaWN0T21pdCBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvU3RyaWN0T21pdC5qcyc7XHJcbmltcG9ydCBTdHJpbmdVdGlscyBmcm9tICcuLi8uLi9waGV0Y29tbW9uL2pzL3V0aWwvU3RyaW5nVXRpbHMuanMnO1xyXG5pbXBvcnQgUGhldENvbG9yU2NoZW1lIGZyb20gJy4uLy4uL3NjZW5lcnktcGhldC9qcy9QaGV0Q29sb3JTY2hlbWUuanMnO1xyXG5pbXBvcnQgU3RhdHVzQmFyLCB7IFN0YXR1c0Jhck9wdGlvbnMgfSBmcm9tICcuLi8uLi9zY2VuZXJ5LXBoZXQvanMvU3RhdHVzQmFyLmpzJztcclxuaW1wb3J0IHsgRm9udCwgSEJveCwgTm9kZSwgUmVjdGFuZ2xlLCBUQ29sb3IsIFRleHQsIFRleHRPcHRpb25zIH0gZnJvbSAnLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IFRleHRQdXNoQnV0dG9uLCB7IFRleHRQdXNoQnV0dG9uT3B0aW9ucyB9IGZyb20gJy4uLy4uL3N1bi9qcy9idXR0b25zL1RleHRQdXNoQnV0dG9uLmpzJztcclxuaW1wb3J0IFRhbmRlbSBmcm9tICcuLi8uLi90YW5kZW0vanMvVGFuZGVtLmpzJztcclxuaW1wb3J0IEVsYXBzZWRUaW1lTm9kZSBmcm9tICcuL0VsYXBzZWRUaW1lTm9kZS5qcyc7XHJcbmltcG9ydCBTY29yZURpc3BsYXlMYWJlbGVkTnVtYmVyIGZyb20gJy4vU2NvcmVEaXNwbGF5TGFiZWxlZE51bWJlci5qcyc7XHJcbmltcG9ydCB2ZWdhcyBmcm9tICcuL3ZlZ2FzLmpzJztcclxuaW1wb3J0IFZlZ2FzU3RyaW5ncyBmcm9tICcuL1ZlZ2FzU3RyaW5ncy5qcyc7XHJcblxyXG50eXBlIFNlbGZPcHRpb25zID0ge1xyXG5cclxuICAvLyBvcHRpb25hbCBQcm9wZXJ0aWVzXHJcbiAgY2hhbGxlbmdlSW5kZXhQcm9wZXJ0eT86IFRSZWFkT25seVByb3BlcnR5PG51bWJlcj4gfCBudWxsO1xyXG4gIG51bWJlck9mQ2hhbGxlbmdlc1Byb3BlcnR5PzogVFJlYWRPbmx5UHJvcGVydHk8bnVtYmVyPiB8IG51bGw7XHJcbiAgbGV2ZWxQcm9wZXJ0eT86IFRSZWFkT25seVByb3BlcnR5PG51bWJlcj4gfCBudWxsO1xyXG4gIGVsYXBzZWRUaW1lUHJvcGVydHk/OiBUUmVhZE9ubHlQcm9wZXJ0eTxudW1iZXI+IHwgbnVsbDtcclxuICB0aW1lckVuYWJsZWRQcm9wZXJ0eT86IFRSZWFkT25seVByb3BlcnR5PGJvb2xlYW4+IHwgbnVsbDtcclxuXHJcbiAgLy8gdGhpbmdzIHRoYXQgY2FuIGJlIGhpZGRlblxyXG4gIGxldmVsVmlzaWJsZT86IGJvb2xlYW47XHJcbiAgY2hhbGxlbmdlTnVtYmVyVmlzaWJsZT86IGJvb2xlYW47XHJcblxyXG4gIC8vIGFsbCB0ZXh0XHJcbiAgZm9udD86IEZvbnQ7XHJcbiAgdGV4dEZpbGw/OiBUQ29sb3I7XHJcblxyXG4gIC8vIHNjb3JlIGRpc3BsYXlcclxuICBjcmVhdGVTY29yZURpc3BsYXk/OiAoIHNjb3JlUHJvcGVydHk6IFRQcm9wZXJ0eTxudW1iZXI+ICkgPT4gTm9kZTtcclxuXHJcbiAgLy8gbmVzdGVkIG9wdGlvbnMgZm9yICdTdGFydCBPdmVyJyBidXR0b24sIGZpbGxlZCBpbiBiZWxvd1xyXG4gIHN0YXJ0T3ZlckJ1dHRvbk9wdGlvbnM/OiBUZXh0UHVzaEJ1dHRvbk9wdGlvbnM7XHJcbiAgc3RhcnRPdmVyQnV0dG9uVGV4dD86IHN0cmluZyB8IFRSZWFkT25seVByb3BlcnR5PHN0cmluZz47XHJcblxyXG4gIC8vIG9wdGlvbnMgZm9yIHRoZSB0aW1lciBub2RlXHJcbiAgY2xvY2tJY29uUmFkaXVzPzogbnVtYmVyO1xyXG5cclxuICAvLyBzcGFjaW5nIGFuZCBtYXJnaW4gZm9yIHRoaW5ncyBpbiB0aGUgYmFyXHJcbiAgeFNwYWNpbmc/OiBudW1iZXI7XHJcbiAgeE1hcmdpbj86IG51bWJlcjtcclxuICB5TWFyZ2luPzogbnVtYmVyO1xyXG5cclxuICBsZXZlbFRleHRPcHRpb25zPzogVGV4dE9wdGlvbnM7IC8vIHBhc3NlZCB0byB0aGUgXCJMZXZlbCBOXCIgdGV4dFxyXG4gIGNoYWxsZW5nZVRleHRPcHRpb25zPzogVGV4dE9wdGlvbnM7IC8vIHBhc3NlZCB0byB0aGUgXCJDaGFsbGVuZ2UgTiBvZiBNXCIgdGV4dFxyXG5cclxuICBiYXJGaWxsPzogVENvbG9yO1xyXG4gIGJhclN0cm9rZT86IFRDb2xvcjtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIEZpbml0ZVN0YXR1c0Jhck9wdGlvbnMgPSBTZWxmT3B0aW9ucyAmIFN0cmljdE9taXQ8U3RhdHVzQmFyT3B0aW9ucywgJ2NoaWxkcmVuJyB8ICdiYXJIZWlnaHQnPjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZpbml0ZVN0YXR1c0JhciBleHRlbmRzIFN0YXR1c0JhciB7XHJcblxyXG4gIHByaXZhdGUgcmVhZG9ubHkgZGlzcG9zZUZpbml0ZVN0YXR1c0JhcjogKCkgPT4gdm9pZDtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIGxheW91dEJvdW5kcyAtIGxheW91dEJvdW5kcyBvZiB0aGUgU2NyZWVuVmlld1xyXG4gICAqIEBwYXJhbSB2aXNpYmxlQm91bmRzUHJvcGVydHkgLSB2aXNpYmxlIGJvdW5kcyBvZiB0aGUgU2NyZWVuVmlld1xyXG4gICAqIEBwYXJhbSBzY29yZVByb3BlcnR5XHJcbiAgICogQHBhcmFtIHByb3ZpZGVkT3B0aW9uc1xyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggbGF5b3V0Qm91bmRzOiBCb3VuZHMyLCB2aXNpYmxlQm91bmRzUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PEJvdW5kczI+LCBzY29yZVByb3BlcnR5OiBUUHJvcGVydHk8bnVtYmVyPixcclxuICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVkT3B0aW9ucz86IEZpbml0ZVN0YXR1c0Jhck9wdGlvbnMgKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxGaW5pdGVTdGF0dXNCYXJPcHRpb25zLFxyXG4gICAgICBTdHJpY3RPbWl0PFNlbGZPcHRpb25zLCAnc3RhcnRPdmVyQnV0dG9uT3B0aW9ucycgfCAnbGV2ZWxUZXh0T3B0aW9ucycgfCAnY2hhbGxlbmdlVGV4dE9wdGlvbnMnPixcclxuICAgICAgU3RhdHVzQmFyT3B0aW9ucz4oKSgge1xyXG5cclxuICAgICAgLy8gU2VsZk9wdGlvbnNcclxuICAgICAgY2hhbGxlbmdlSW5kZXhQcm9wZXJ0eTogbnVsbCxcclxuICAgICAgbnVtYmVyT2ZDaGFsbGVuZ2VzUHJvcGVydHk6IG51bGwsXHJcbiAgICAgIGxldmVsUHJvcGVydHk6IG51bGwsXHJcbiAgICAgIGVsYXBzZWRUaW1lUHJvcGVydHk6IG51bGwsXHJcbiAgICAgIHRpbWVyRW5hYmxlZFByb3BlcnR5OiBudWxsLFxyXG4gICAgICBsZXZlbFZpc2libGU6IHRydWUsXHJcbiAgICAgIGNoYWxsZW5nZU51bWJlclZpc2libGU6IHRydWUsXHJcbiAgICAgIGZvbnQ6IFN0YXR1c0Jhci5ERUZBVUxUX0ZPTlQsXHJcbiAgICAgIHRleHRGaWxsOiBTdGF0dXNCYXIuREVGQVVMVF9URVhUX0ZJTEwsXHJcbiAgICAgIGNyZWF0ZVNjb3JlRGlzcGxheTogc2NvcmVQcm9wZXJ0eSA9PiBuZXcgU2NvcmVEaXNwbGF5TGFiZWxlZE51bWJlciggc2NvcmVQcm9wZXJ0eSwge1xyXG4gICAgICAgIGZvbnQ6IHByb3ZpZGVkT3B0aW9ucyAmJiBwcm92aWRlZE9wdGlvbnMuZm9udCA/IHByb3ZpZGVkT3B0aW9ucy5mb250IDogU3RhdHVzQmFyLkRFRkFVTFRfRk9OVCxcclxuICAgICAgICB0ZXh0RmlsbDogcHJvdmlkZWRPcHRpb25zICYmIHByb3ZpZGVkT3B0aW9ucy50ZXh0RmlsbCA/IHByb3ZpZGVkT3B0aW9ucy50ZXh0RmlsbCA6IFN0YXR1c0Jhci5ERUZBVUxUX1RFWFRfRklMTFxyXG4gICAgICB9ICksXHJcbiAgICAgIHN0YXJ0T3ZlckJ1dHRvblRleHQ6IFZlZ2FzU3RyaW5ncy5zdGFydE92ZXJTdHJpbmdQcm9wZXJ0eSxcclxuICAgICAgY2xvY2tJY29uUmFkaXVzOiAxNSxcclxuICAgICAgeFNwYWNpbmc6IDUwLFxyXG4gICAgICB4TWFyZ2luOiAyMCxcclxuICAgICAgeU1hcmdpbjogMTAsXHJcbiAgICAgIGJhckZpbGw6IG51bGwsXHJcbiAgICAgIGJhclN0cm9rZTogbnVsbCxcclxuXHJcbiAgICAgIC8vIFN0YXR1c0Jhck9wdGlvbnNcclxuICAgICAgdGFuZGVtOiBUYW5kZW0uT1BUSU9OQUxcclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIC8vIG5lc3RlZCBvcHRpb25zIGZvciAnU3RhcnQgT3ZlcicgYnV0dG9uXHJcbiAgICBvcHRpb25zLnN0YXJ0T3ZlckJ1dHRvbk9wdGlvbnMgPSBjb21iaW5lT3B0aW9uczxUZXh0UHVzaEJ1dHRvbk9wdGlvbnM+KCB7XHJcbiAgICAgIGZvbnQ6IG9wdGlvbnMuZm9udCxcclxuICAgICAgdGV4dEZpbGw6IG9wdGlvbnMudGV4dEZpbGwsXHJcbiAgICAgIGJhc2VDb2xvcjogUGhldENvbG9yU2NoZW1lLkJVVFRPTl9ZRUxMT1csXHJcbiAgICAgIHhNYXJnaW46IDEwLFxyXG4gICAgICB5TWFyZ2luOiA4LFxyXG4gICAgICBsaXN0ZW5lcjogXy5ub29wLFxyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3N0YXJ0T3ZlckJ1dHRvbicgKSxcclxuICAgICAgbWF4V2lkdGg6IDAuMiAqICggbGF5b3V0Qm91bmRzLndpZHRoIC0gKCAyICogb3B0aW9ucy54TWFyZ2luICkgKSAvLyB1c2UgMjAlIG9mIGF2YWlsYWJsZSB3aWR0aFxyXG4gICAgfSwgb3B0aW9ucy5zdGFydE92ZXJCdXR0b25PcHRpb25zICk7XHJcblxyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggKCBvcHRpb25zLmNoYWxsZW5nZUluZGV4UHJvcGVydHkgJiYgb3B0aW9ucy5udW1iZXJPZkNoYWxsZW5nZXNQcm9wZXJ0eSApIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAoICFvcHRpb25zLmNoYWxsZW5nZUluZGV4UHJvcGVydHkgJiYgIW9wdGlvbnMubnVtYmVyT2ZDaGFsbGVuZ2VzUHJvcGVydHkgKSxcclxuICAgICAgJ2NoYWxsZW5nZUluZGV4UHJvcGVydHkgYW5kIG51bWJlck9mQ2hhbGxlbmdlc1Byb3BlcnR5IGFyZSBib3RoIG9yIG5laXRoZXInICk7XHJcblxyXG4gICAgLy8gbmVzdGVkIG9wdGlvbnMgZm9yICdMZXZlbCBOJyB0ZXh0XHJcbiAgICBvcHRpb25zLmxldmVsVGV4dE9wdGlvbnMgPSBjb21iaW5lT3B0aW9uczxUZXh0T3B0aW9ucz4oIHtcclxuICAgICAgZmlsbDogb3B0aW9ucy50ZXh0RmlsbCxcclxuICAgICAgZm9udDogb3B0aW9ucy5mb250XHJcbiAgICB9LCBvcHRpb25zLmxldmVsVGV4dE9wdGlvbnMgKTtcclxuXHJcbiAgICAvLyBuZXN0ZWQgb3B0aW9ucyBmb3IgJ0NoYWxsZW5nZSBOIG9mIE0nIHRleHRcclxuICAgIG9wdGlvbnMuY2hhbGxlbmdlVGV4dE9wdGlvbnMgPSBjb21iaW5lT3B0aW9uczxUZXh0T3B0aW9ucz4oIHtcclxuICAgICAgZmlsbDogb3B0aW9ucy50ZXh0RmlsbCxcclxuICAgICAgZm9udDogb3B0aW9ucy5mb250XHJcbiAgICB9LCBvcHRpb25zLmNoYWxsZW5nZVRleHRPcHRpb25zICk7XHJcblxyXG4gICAgLy8gdGhlIHJlY3Rhbmd1bGFyIGJhciwgc2l6ZSB3aWxsIGJlIHNldCBieSB2aXNpYmxlQm91bmRzTGlzdGVuZXJcclxuICAgIGNvbnN0IGJhck5vZGUgPSBuZXcgUmVjdGFuZ2xlKCB7XHJcbiAgICAgIGZpbGw6IG9wdGlvbnMuYmFyRmlsbCxcclxuICAgICAgc3Ryb2tlOiBvcHRpb25zLmJhclN0cm9rZVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIE5vZGVzIG9uIHRoZSBsZWZ0IGVuZCBvZiB0aGUgYmFyXHJcbiAgICBjb25zdCBsZWZ0Q2hpbGRyZW4gPSBbXTtcclxuXHJcbiAgICAvLyBMZXZlbCBOXHJcbiAgICBsZXQgbGV2ZWxUZXh0OiBOb2RlO1xyXG4gICAgaWYgKCBvcHRpb25zLmxldmVsUHJvcGVydHkgJiYgb3B0aW9ucy5sZXZlbFZpc2libGUgKSB7XHJcblxyXG4gICAgICBjb25zdCBsZXZlbFN0cmluZ1Byb3BlcnR5ID0gbmV3IERlcml2ZWRQcm9wZXJ0eShcclxuICAgICAgICBbIFZlZ2FzU3RyaW5ncy5sYWJlbC5sZXZlbFN0cmluZ1Byb3BlcnR5LCBvcHRpb25zLmxldmVsUHJvcGVydHkgXSxcclxuICAgICAgICAoIHBhdHRlcm46IHN0cmluZywgbGV2ZWw6IG51bWJlciApID0+IFN0cmluZ1V0aWxzLmZvcm1hdCggcGF0dGVybiwgbGV2ZWwgKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgbGV2ZWxUZXh0ID0gbmV3IFRleHQoIGxldmVsU3RyaW5nUHJvcGVydHksIGNvbWJpbmVPcHRpb25zPFRleHRPcHRpb25zPigge1xyXG4gICAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnbGV2ZWxUZXh0JyApXHJcbiAgICAgIH0sIG9wdGlvbnMubGV2ZWxUZXh0T3B0aW9ucyApICk7XHJcbiAgICAgIGxlZnRDaGlsZHJlbi5wdXNoKCBsZXZlbFRleHQgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGFsbGVuZ2UgTiBvZiBNXHJcbiAgICBsZXQgY2hhbGxlbmdlTnVtYmVyVGV4dDogTm9kZTtcclxuICAgIGlmICggb3B0aW9ucy5jaGFsbGVuZ2VJbmRleFByb3BlcnR5ICYmIG9wdGlvbnMubnVtYmVyT2ZDaGFsbGVuZ2VzUHJvcGVydHkgKSB7XHJcblxyXG4gICAgICBjb25zdCBjaGFsbGVuZ2VOdW1iZXJTdHJpbmdQcm9wZXJ0eSA9IG5ldyBEZXJpdmVkUHJvcGVydHkoXHJcbiAgICAgICAgWyBWZWdhc1N0cmluZ3MucGF0dGVyblsgJzBjaGFsbGVuZ2UnIF1bICcxbWF4U3RyaW5nUHJvcGVydHknIF0sIG9wdGlvbnMuY2hhbGxlbmdlSW5kZXhQcm9wZXJ0eSwgb3B0aW9ucy5udW1iZXJPZkNoYWxsZW5nZXNQcm9wZXJ0eSBdLFxyXG4gICAgICAgICggcGF0dGVybjogc3RyaW5nLCBjaGFsbGVuZ2VJbmRleDogbnVtYmVyLCBudW1iZXJPZkNoYWxsZW5nZXM6IG51bWJlciApID0+XHJcbiAgICAgICAgICBTdHJpbmdVdGlscy5mb3JtYXQoIHBhdHRlcm4sIGNoYWxsZW5nZUluZGV4ICsgMSwgbnVtYmVyT2ZDaGFsbGVuZ2VzIClcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGNoYWxsZW5nZU51bWJlclRleHQgPSBuZXcgVGV4dCggY2hhbGxlbmdlTnVtYmVyU3RyaW5nUHJvcGVydHksIGNvbWJpbmVPcHRpb25zPFRleHRPcHRpb25zPigge1xyXG4gICAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnY2hhbGxlbmdlTnVtYmVyVGV4dCcgKVxyXG4gICAgICB9LCBvcHRpb25zLmNoYWxsZW5nZVRleHRPcHRpb25zICkgKTtcclxuICAgICAgbGVmdENoaWxkcmVuLnB1c2goIGNoYWxsZW5nZU51bWJlclRleHQgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTY29yZVxyXG4gICAgY29uc3Qgc2NvcmVEaXNwbGF5ID0gb3B0aW9ucy5jcmVhdGVTY29yZURpc3BsYXkoIHNjb3JlUHJvcGVydHkgKTtcclxuICAgIGxlZnRDaGlsZHJlbi5wdXNoKCBzY29yZURpc3BsYXkgKTtcclxuXHJcbiAgICAvLyBUaW1lciAob3B0aW9uYWwpXHJcbiAgICBsZXQgZWxhcHNlZFRpbWVOb2RlOiBOb2RlO1xyXG4gICAgaWYgKCBvcHRpb25zLmVsYXBzZWRUaW1lUHJvcGVydHkgJiYgb3B0aW9ucy50aW1lckVuYWJsZWRQcm9wZXJ0eSApIHtcclxuICAgICAgZWxhcHNlZFRpbWVOb2RlID0gbmV3IEVsYXBzZWRUaW1lTm9kZSggb3B0aW9ucy5lbGFwc2VkVGltZVByb3BlcnR5LCB7XHJcbiAgICAgICAgdmlzaWJsZVByb3BlcnR5OiBvcHRpb25zLnRpbWVyRW5hYmxlZFByb3BlcnR5LFxyXG4gICAgICAgIGNsb2NrSWNvblJhZGl1czogb3B0aW9ucy5jbG9ja0ljb25SYWRpdXMsXHJcbiAgICAgICAgZm9udDogb3B0aW9ucy5mb250LFxyXG4gICAgICAgIHRleHRGaWxsOiBvcHRpb25zLnRleHRGaWxsXHJcbiAgICAgIH0gKTtcclxuICAgICAgbGVmdENoaWxkcmVuLnB1c2goIGVsYXBzZWRUaW1lTm9kZSApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFN0YXJ0IE92ZXIgYnV0dG9uXHJcbiAgICBjb25zdCBzdGFydE92ZXJCdXR0b24gPSBuZXcgVGV4dFB1c2hCdXR0b24oIG9wdGlvbnMuc3RhcnRPdmVyQnV0dG9uVGV4dCwgb3B0aW9ucy5zdGFydE92ZXJCdXR0b25PcHRpb25zICk7XHJcblxyXG4gICAgLy8gTm9kZXMgb24gdGhlIGxlZnQgZW5kIG9mIHRoZSBiYXJcclxuICAgIGNvbnN0IGxlZnROb2RlcyA9IG5ldyBIQm94KCB7XHJcblxyXG4gICAgICAvLyBCZWNhdXNlIGVsYXBzZWRUaW1lTm9kZSBuZWVkcyB0byBiZSBjb25zaWRlcmVkIHJlZ2FyZGxlc3Mgb2Ygd2hldGhlciBpdCdzIHZpc2libGUsXHJcbiAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvdmVnYXMvaXNzdWVzLzgwXHJcbiAgICAgIGV4Y2x1ZGVJbnZpc2libGVDaGlsZHJlbkZyb21Cb3VuZHM6IGZhbHNlLFxyXG4gICAgICBzcGFjaW5nOiBvcHRpb25zLnhTcGFjaW5nLFxyXG4gICAgICBjaGlsZHJlbjogbGVmdENoaWxkcmVuLFxyXG4gICAgICBtYXhXaWR0aDogKCBsYXlvdXRCb3VuZHMud2lkdGggLSAoIDIgKiBvcHRpb25zLnhNYXJnaW4gKSAtIHN0YXJ0T3ZlckJ1dHRvbi53aWR0aCAtIG9wdGlvbnMueFNwYWNpbmcgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIG9wdGlvbnMuY2hpbGRyZW4gPSBbIGJhck5vZGUsIGxlZnROb2Rlcywgc3RhcnRPdmVyQnV0dG9uIF07XHJcblxyXG4gICAgb3B0aW9ucy5iYXJIZWlnaHQgPSBNYXRoLm1heCggbGVmdE5vZGVzLmhlaWdodCwgc2NvcmVEaXNwbGF5LmhlaWdodCApICsgKCAyICogb3B0aW9ucy55TWFyZ2luICk7XHJcblxyXG4gICAgc3VwZXIoIGxheW91dEJvdW5kcywgdmlzaWJsZUJvdW5kc1Byb3BlcnR5LCBvcHRpb25zICk7XHJcblxyXG4gICAgLy8gRHluYW1pY2FsbHkgcG9zaXRpb24gY29tcG9uZW50cyBvbiB0aGUgYmFyLlxyXG4gICAgTXVsdGlsaW5rLm11bHRpbGluayggWyB0aGlzLnBvc2l0aW9uaW5nQm91bmRzUHJvcGVydHksIGxlZnROb2Rlcy5ib3VuZHNQcm9wZXJ0eSwgc3RhcnRPdmVyQnV0dG9uLmJvdW5kc1Byb3BlcnR5IF0sXHJcbiAgICAgICggcG9zaXRpb25pbmdCb3VuZHM6IEJvdW5kczIsIGxlZnROb2RlQm91bmRzOiBCb3VuZHMyLCBzdGFydE92ZXJCdXR0b25Cb3VuZHM6IEJvdW5kczIgKSA9PiB7XHJcbiAgICAgICAgbGVmdE5vZGVzLmxlZnQgPSBwb3NpdGlvbmluZ0JvdW5kcy5sZWZ0O1xyXG4gICAgICAgIGxlZnROb2Rlcy5jZW50ZXJZID0gcG9zaXRpb25pbmdCb3VuZHMuY2VudGVyWTtcclxuICAgICAgICBzdGFydE92ZXJCdXR0b24ucmlnaHQgPSBwb3NpdGlvbmluZ0JvdW5kcy5yaWdodDtcclxuICAgICAgICBzdGFydE92ZXJCdXR0b24uY2VudGVyWSA9IHBvc2l0aW9uaW5nQm91bmRzLmNlbnRlclk7XHJcbiAgICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLmRpc3Bvc2VGaW5pdGVTdGF0dXNCYXIgPSAoKSA9PiB7XHJcbiAgICAgIGxldmVsVGV4dC5kaXNwb3NlKCk7XHJcbiAgICAgIGNoYWxsZW5nZU51bWJlclRleHQuZGlzcG9zZSgpO1xyXG4gICAgICBzY29yZURpc3BsYXkuZGlzcG9zZSgpO1xyXG4gICAgICBlbGFwc2VkVGltZU5vZGUgJiYgZWxhcHNlZFRpbWVOb2RlLmRpc3Bvc2UoKTtcclxuICAgICAgc3RhcnRPdmVyQnV0dG9uLmRpc3Bvc2UoKTtcclxuICAgICAgZWxhcHNlZFRpbWVOb2RlICYmIGVsYXBzZWRUaW1lTm9kZS5kaXNwb3NlKCk7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG92ZXJyaWRlIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICB0aGlzLmRpc3Bvc2VGaW5pdGVTdGF0dXNCYXIoKTtcclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcbn1cclxuXHJcbnZlZ2FzLnJlZ2lzdGVyKCAnRmluaXRlU3RhdHVzQmFyJywgRmluaXRlU3RhdHVzQmFyICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsZUFBZSxNQUFNLGtDQUFrQztBQUM5RCxPQUFPQyxTQUFTLE1BQU0sNEJBQTRCO0FBSWxELE9BQU9DLFNBQVMs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