// Copyright 2018-2023, University of Colorado Boulder

/**
 * ScreenView for all intro-based screens that use sets of containers.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import Vector2 from '../../../../dot/js/Vector2.js';
import ScreenView from '../../../../joist/js/ScreenView.js';
import merge from '../../../../phet-core/js/merge.js';
import ResetAllButton from '../../../../scenery-phet/js/buttons/ResetAllButton.js';
import { AlignBox, AlignGroup, Node } from '../../../../scenery/js/imports.js';
import Panel from '../../../../sun/js/Panel.js';
import FractionsCommonConstants from '../../common/FractionsCommonConstants.js';
import FractionsCommonColors from '../../common/view/FractionsCommonColors.js';
import fractionsCommon from '../../fractionsCommon.js';
import IntroRepresentation from '../model/IntroRepresentation.js';
import AdjustableFractionNode from './AdjustableFractionNode.js';
import BeakerSceneNode from './beaker/BeakerSceneNode.js';
import CakeSceneNode from './cake/CakeSceneNode.js';
import CircularSceneNode from './circular/CircularSceneNode.js';
import IntroRadioButtonGroup from './IntroRadioButtonGroup.js';
import NumberLineSceneNode from './numberline/NumberLineSceneNode.js';
import RectangularSceneNode from './rectangular/RectangularSceneNode.js';
import RectangularOrientation from './RectangularOrientation.js';

// constants
const MARGIN = FractionsCommonConstants.PANEL_MARGIN;
class ContainerSetScreenView extends ScreenView {
  /**
   * @param {ContainerSetModel} model
   */
  constructor(model, options) {
    super({
      preventFit: true
    });
    options = merge({
      // {boolean} - Passed to AdjustableFractionNode
      spinnersOnRight: true
    }, options);

    // @protected {ContainerSetModel}
    this.model = model;

    // @protected {AlignGroup}
    this.topAlignGroup = new AlignGroup({
      matchHorizontal: false
    });
    const representationRadioButtonGroup = new IntroRadioButtonGroup(model.representationProperty, [{
      value: IntroRepresentation.CIRCLE,
      createNode: () => CircularSceneNode.getIcon()
    }, {
      value: IntroRepresentation.HORIZONTAL_BAR,
      createNode: () => RectangularSceneNode.getIcon(RectangularOrientation.HORIZONTAL)
    }, {
      value: IntroRepresentation.VERTICAL_BAR,
      createNode: () => RectangularSceneNode.getIcon(RectangularOrientation.VERTICAL)
    }, {
      value: IntroRepresentation.BEAKER,
      createNode: () => BeakerSceneNode.getIcon()
    }, {
      value: IntroRepresentation.CAKE,
      createNode: () => CakeSceneNode.getIcon()
    }, {
      value: IntroRepresentation.NUMBER_LINE,
      createNode: () => NumberLineSceneNode.getIcon()
    }].filter(item => _.includes(model.representations, item.value)));

    // @protected {Node}
    this.representationPanel = new Panel(new AlignBox(representationRadioButtonGroup, {
      group: this.topAlignGroup
    }), {
      fill: FractionsCommonColors.introPanelBackgroundProperty,
      xMargin: FractionsCommonConstants.PANEL_MARGIN,
      yMargin: FractionsCommonConstants.PANEL_MARGIN
    });

    // @protected {Node}
    this.bucketContainer = new Node();
    this.viewContainer = new Node();

    // @private {Node|null} the visual representation of the container set
    this.currentView = null;

    // Returns the current bucket position
    const getBucketPosition = () => {
      assert && assert(this.currentView.bucketNode);
      return this.currentView.bucketNode.getUniqueTrail().getMatrixTo(this.currentView.getUniqueTrail()).timesVector2(Vector2.ZERO);
    };

    // present for the lifetime of the simulation
    model.representationProperty.link(representation => {
      phet.joist.display._input.interruptPointers();

      // Finish all animations
      model.completeAllPieces();
      if (this.currentView) {
        this.currentView.interruptSubtreeInput();
        this.viewContainer.interruptSubtreeInput();
        this.viewContainer.removeAllChildren();
        this.bucketContainer.interruptSubtreeInput();
        this.bucketContainer.removeAllChildren();
        this.currentView.dispose();
      }
      this.currentView = null;
      switch (representation) {
        case IntroRepresentation.CIRCLE:
          this.currentView = new CircularSceneNode(model, {
            getBucketPosition: getBucketPosition
          });
          break;
        case IntroRepresentation.VERTICAL_BAR:
          this.currentView = new RectangularSceneNode(model, {
            getBucketPosition: getBucketPosition,
            rectangularOrientation: RectangularOrientation.VERTICAL
          });
          break;
        case IntroRepresentation.HORIZONTAL_BAR:
          this.currentView = new RectangularSceneNode(model, {
            getBucketPosition: getBucketPosition,
            rectangularOrientation: RectangularOrientation.HORIZONTAL
          });
          break;
        case IntroRepresentation.BEAKER:
          this.currentView = new BeakerSceneNode(model, {
            getBucketPosition: getBucketPosition
          });
          break;
        case IntroRepresentation.CAKE:
          this.currentView = new CakeSceneNode(model, {
            getBucketPosition: getBucketPosition
          });
          break;
        case IntroRepresentation.NUMBER_LINE:
          this.currentView = new NumberLineSceneNode(model);
          break;
        default:
        // Don't have a current view. May happen on startup
      }

      if (this.currentView) {
        // add the chosen visual representation to the scene graph
        this.viewContainer.addChild(this.currentView);
        if (this.currentView.pieceLayer) {
          this.viewContainer.addChild(this.currentView.pieceLayer);
        }
        if (this.currentView.bucketNode) {
          this.bucketContainer.addChild(this.currentView.bucketNode);
        }
      }
    });

    // @protected {Node}
    this.adjustableFractionNode = new AdjustableFractionNode(model.numeratorProperty, model.denominatorProperty, model.containerCountProperty, {
      spinnersOnRight: options.spinnersOnRight
    });

    // @protected {Node}
    this.resetAllButton = new ResetAllButton({
      listener: () => {
        this.interruptSubtreeInput();
        model.reset();
      },
      right: this.layoutBounds.right - MARGIN,
      bottom: this.layoutBounds.bottom - MARGIN
    });
    this.children = [this.representationPanel, this.adjustableFractionNode, this.resetAllButton, this.bucketContainer, this.viewContainer];
  }

  /**
   * Sets up the initial layout of the screen view. Should be done once all initialization is complete.
   * @protected
   */
  initializeLayout() {}

  /**
   * Steps forward in time.
   *
   * @param {number} dt - time step
   * @public
   */
  step(dt) {
    this.currentView.step(dt);
  }
}
fractionsCommon.register('ContainerSetScreenView', ContainerSetScreenView);
export default ContainerSetScreenView;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWZWN0b3IyIiwiU2NyZWVuVmlldyIsIm1lcmdlIiwiUmVzZXRBbGxCdXR0b24iLCJBbGlnbkJveCIsIkFsaWduR3JvdXAiLCJOb2RlIiwiUGFuZWwiLCJGcmFjdGlvbnNDb21tb25Db25zdGFudHMiLCJGcmFjdGlvbnNDb21tb25Db2xvcnMiLCJmcmFjdGlvbnNDb21tb24iLCJJbnRyb1JlcHJlc2VudGF0aW9uIiwiQWRqdXN0YWJsZUZyYWN0aW9uTm9kZSIsIkJlYWtlclNjZW5lTm9kZSIsIkNha2VTY2VuZU5vZGUiLCJDaXJjdWxhclNjZW5lTm9kZSIsIkludHJvUmFkaW9CdXR0b25Hcm91cCIsIk51bWJlckxpbmVTY2VuZU5vZGUiLCJSZWN0YW5ndWxhclNjZW5lTm9kZSIsIlJlY3Rhbmd1bGFyT3JpZW50YXRpb24iLCJNQVJHSU4iLCJQQU5FTF9NQVJHSU4iLCJDb250YWluZXJTZXRTY3JlZW5WaWV3IiwiY29uc3RydWN0b3IiLCJtb2RlbCIsIm9wdGlvbnMiLCJwcmV2ZW50Rml0Iiwic3Bpbm5lcnNPblJpZ2h0IiwidG9wQWxpZ25Hcm91cCIsIm1hdGNoSG9yaXpvbnRhbCIsInJlcHJlc2VudGF0aW9uUmFkaW9CdXR0b25Hcm91cCIsInJlcHJlc2VudGF0aW9uUHJvcGVydHkiLCJ2YWx1ZSIsIkNJUkNMRSIsImNyZWF0ZU5vZGUiLCJnZXRJY29uIiwiSE9SSVpPTlRBTF9CQVIiLCJIT1JJWk9OVEFMIiwiVkVSVElDQUxfQkFSIiwiVkVSVElDQUwiLCJCRUFLRVIiLCJDQUtFIiwiTlVNQkVSX0xJTkUiLCJmaWx0ZXIiLCJpdGVtIiwiXyIsImluY2x1ZGVzIiwicmVwcmVzZW50YXRpb25zIiwicmVwcmVzZW50YXRpb25QYW5lbCIsImdyb3VwIiwiZmlsbCIsImludHJvUGFuZWxCYWNrZ3JvdW5kUHJvcGVydHkiLCJ4TWFyZ2luIiwieU1hcmdpbiIsImJ1Y2tldENvbnRhaW5lciIsInZpZXdDb250YWluZXIiLCJjdXJyZW50VmlldyIsImdldEJ1Y2tldFBvc2l0aW9uIiwiYXNzZXJ0IiwiYnVja2V0Tm9kZSIsImdldFVuaXF1ZVRyYWlsIiwiZ2V0TWF0cml4VG8iLCJ0aW1lc1ZlY3RvcjIiLCJaRVJPIiwibGluayIsInJlcHJlc2VudGF0aW9uIiwicGhldCIsImpvaXN0IiwiZGlzcGxheSIsIl9pbnB1dCIsImludGVycnVwdFBvaW50ZXJzIiwiY29tcGxldGVBbGxQaWVjZXMiLCJpbnRlcnJ1cHRTdWJ0cmVlSW5wdXQiLCJyZW1vdmVBbGxDaGlsZHJlbiIsImRpc3Bvc2UiLCJyZWN0YW5ndWxhck9yaWVudGF0aW9uIiwiYWRkQ2hpbGQiLCJwaWVjZUxheWVyIiwiYWRqdXN0YWJsZUZyYWN0aW9uTm9kZSIsIm51bWVyYXRvclByb3BlcnR5IiwiZGVub21pbmF0b3JQcm9wZXJ0eSIsImNvbnRhaW5lckNvdW50UHJvcGVydHkiLCJyZXNldEFsbEJ1dHRvbiIsImxpc3RlbmVyIiwicmVzZXQiLCJyaWdodCIsImxheW91dEJvdW5kcyIsImJvdHRvbSIsImNoaWxkcmVuIiwiaW5pdGlhbGl6ZUxheW91dCIsInN0ZXAiLCJkdCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiQ29udGFpbmVyU2V0U2NyZWVuVmlldy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOC0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBTY3JlZW5WaWV3IGZvciBhbGwgaW50cm8tYmFzZWQgc2NyZWVucyB0aGF0IHVzZSBzZXRzIG9mIGNvbnRhaW5lcnMuXHJcbiAqXHJcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cclxuICovXHJcblxyXG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVmVjdG9yMi5qcyc7XHJcbmltcG9ydCBTY3JlZW5WaWV3IGZyb20gJy4uLy4uLy4uLy4uL2pvaXN0L2pzL1NjcmVlblZpZXcuanMnO1xyXG5pbXBvcnQgbWVyZ2UgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL21lcmdlLmpzJztcclxuaW1wb3J0IFJlc2V0QWxsQnV0dG9uIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9idXR0b25zL1Jlc2V0QWxsQnV0dG9uLmpzJztcclxuaW1wb3J0IHsgQWxpZ25Cb3gsIEFsaWduR3JvdXAsIE5vZGUgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgUGFuZWwgZnJvbSAnLi4vLi4vLi4vLi4vc3VuL2pzL1BhbmVsLmpzJztcclxuaW1wb3J0IEZyYWN0aW9uc0NvbW1vbkNvbnN0YW50cyBmcm9tICcuLi8uLi9jb21tb24vRnJhY3Rpb25zQ29tbW9uQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IEZyYWN0aW9uc0NvbW1vbkNvbG9ycyBmcm9tICcuLi8uLi9jb21tb24vdmlldy9GcmFjdGlvbnNDb21tb25Db2xvcnMuanMnO1xyXG5pbXBvcnQgZnJhY3Rpb25zQ29tbW9uIGZyb20gJy4uLy4uL2ZyYWN0aW9uc0NvbW1vbi5qcyc7XHJcbmltcG9ydCBJbnRyb1JlcHJlc2VudGF0aW9uIGZyb20gJy4uL21vZGVsL0ludHJvUmVwcmVzZW50YXRpb24uanMnO1xyXG5pbXBvcnQgQWRqdXN0YWJsZUZyYWN0aW9uTm9kZSBmcm9tICcuL0FkanVzdGFibGVGcmFjdGlvbk5vZGUuanMnO1xyXG5pbXBvcnQgQmVha2VyU2NlbmVOb2RlIGZyb20gJy4vYmVha2VyL0JlYWtlclNjZW5lTm9kZS5qcyc7XHJcbmltcG9ydCBDYWtlU2NlbmVOb2RlIGZyb20gJy4vY2FrZS9DYWtlU2NlbmVOb2RlLmpzJztcclxuaW1wb3J0IENpcmN1bGFyU2NlbmVOb2RlIGZyb20gJy4vY2lyY3VsYXIvQ2lyY3VsYXJTY2VuZU5vZGUuanMnO1xyXG5pbXBvcnQgSW50cm9SYWRpb0J1dHRvbkdyb3VwIGZyb20gJy4vSW50cm9SYWRpb0J1dHRvbkdyb3VwLmpzJztcclxuaW1wb3J0IE51bWJlckxpbmVTY2VuZU5vZGUgZnJvbSAnLi9udW1iZXJsaW5lL051bWJlckxpbmVTY2VuZU5vZGUuanMnO1xyXG5pbXBvcnQgUmVjdGFuZ3VsYXJTY2VuZU5vZGUgZnJvbSAnLi9yZWN0YW5ndWxhci9SZWN0YW5ndWxhclNjZW5lTm9kZS5qcyc7XHJcbmltcG9ydCBSZWN0YW5ndWxhck9yaWVudGF0aW9uIGZyb20gJy4vUmVjdGFuZ3VsYXJPcmllbnRhdGlvbi5qcyc7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgTUFSR0lOID0gRnJhY3Rpb25zQ29tbW9uQ29uc3RhbnRzLlBBTkVMX01BUkdJTjtcclxuXHJcbmNsYXNzIENvbnRhaW5lclNldFNjcmVlblZpZXcgZXh0ZW5kcyBTY3JlZW5WaWV3IHtcclxuICAvKipcclxuICAgKiBAcGFyYW0ge0NvbnRhaW5lclNldE1vZGVsfSBtb2RlbFxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBtb2RlbCwgb3B0aW9ucyApIHtcclxuICAgIHN1cGVyKCB7XHJcbiAgICAgIHByZXZlbnRGaXQ6IHRydWVcclxuICAgIH0gKTtcclxuXHJcbiAgICBvcHRpb25zID0gbWVyZ2UoIHtcclxuICAgICAgLy8ge2Jvb2xlYW59IC0gUGFzc2VkIHRvIEFkanVzdGFibGVGcmFjdGlvbk5vZGVcclxuICAgICAgc3Bpbm5lcnNPblJpZ2h0OiB0cnVlXHJcbiAgICB9LCBvcHRpb25zICk7XHJcblxyXG4gICAgLy8gQHByb3RlY3RlZCB7Q29udGFpbmVyU2V0TW9kZWx9XHJcbiAgICB0aGlzLm1vZGVsID0gbW9kZWw7XHJcblxyXG4gICAgLy8gQHByb3RlY3RlZCB7QWxpZ25Hcm91cH1cclxuICAgIHRoaXMudG9wQWxpZ25Hcm91cCA9IG5ldyBBbGlnbkdyb3VwKCB7IG1hdGNoSG9yaXpvbnRhbDogZmFsc2UgfSApO1xyXG5cclxuICAgIGNvbnN0IHJlcHJlc2VudGF0aW9uUmFkaW9CdXR0b25Hcm91cCA9IG5ldyBJbnRyb1JhZGlvQnV0dG9uR3JvdXAoIG1vZGVsLnJlcHJlc2VudGF0aW9uUHJvcGVydHksIFtcclxuICAgICAge1xyXG4gICAgICAgIHZhbHVlOiBJbnRyb1JlcHJlc2VudGF0aW9uLkNJUkNMRSxcclxuICAgICAgICBjcmVhdGVOb2RlOiAoKSA9PiBDaXJjdWxhclNjZW5lTm9kZS5nZXRJY29uKClcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIHZhbHVlOiBJbnRyb1JlcHJlc2VudGF0aW9uLkhPUklaT05UQUxfQkFSLFxyXG4gICAgICAgIGNyZWF0ZU5vZGU6ICgpID0+IFJlY3Rhbmd1bGFyU2NlbmVOb2RlLmdldEljb24oIFJlY3Rhbmd1bGFyT3JpZW50YXRpb24uSE9SSVpPTlRBTCApXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZTogSW50cm9SZXByZXNlbnRhdGlvbi5WRVJUSUNBTF9CQVIsXHJcbiAgICAgICAgY3JlYXRlTm9kZTogKCkgPT4gUmVjdGFuZ3VsYXJTY2VuZU5vZGUuZ2V0SWNvbiggUmVjdGFuZ3VsYXJPcmllbnRhdGlvbi5WRVJUSUNBTCApXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZTogSW50cm9SZXByZXNlbnRhdGlvbi5CRUFLRVIsXHJcbiAgICAgICAgY3JlYXRlTm9kZTogKCkgPT4gQmVha2VyU2NlbmVOb2RlLmdldEljb24oKVxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWU6IEludHJvUmVwcmVzZW50YXRpb24uQ0FLRSxcclxuICAgICAgICBjcmVhdGVOb2RlOiAoKSA9PiBDYWtlU2NlbmVOb2RlLmdldEljb24oKVxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWU6IEludHJvUmVwcmVzZW50YXRpb24uTlVNQkVSX0xJTkUsXHJcbiAgICAgICAgY3JlYXRlTm9kZTogKCkgPT4gTnVtYmVyTGluZVNjZW5lTm9kZS5nZXRJY29uKClcclxuICAgICAgfVxyXG4gICAgXS5maWx0ZXIoIGl0ZW0gPT4gXy5pbmNsdWRlcyggbW9kZWwucmVwcmVzZW50YXRpb25zLCBpdGVtLnZhbHVlICkgKSApO1xyXG5cclxuICAgIC8vIEBwcm90ZWN0ZWQge05vZGV9XHJcbiAgICB0aGlzLnJlcHJlc2VudGF0aW9uUGFuZWwgPSBuZXcgUGFuZWwoIG5ldyBBbGlnbkJveCggcmVwcmVzZW50YXRpb25SYWRpb0J1dHRvbkdyb3VwLCB7XHJcbiAgICAgIGdyb3VwOiB0aGlzLnRvcEFsaWduR3JvdXBcclxuICAgIH0gKSwge1xyXG4gICAgICBmaWxsOiBGcmFjdGlvbnNDb21tb25Db2xvcnMuaW50cm9QYW5lbEJhY2tncm91bmRQcm9wZXJ0eSxcclxuICAgICAgeE1hcmdpbjogRnJhY3Rpb25zQ29tbW9uQ29uc3RhbnRzLlBBTkVMX01BUkdJTixcclxuICAgICAgeU1hcmdpbjogRnJhY3Rpb25zQ29tbW9uQ29uc3RhbnRzLlBBTkVMX01BUkdJTlxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIEBwcm90ZWN0ZWQge05vZGV9XHJcbiAgICB0aGlzLmJ1Y2tldENvbnRhaW5lciA9IG5ldyBOb2RlKCk7XHJcbiAgICB0aGlzLnZpZXdDb250YWluZXIgPSBuZXcgTm9kZSgpO1xyXG5cclxuICAgIC8vIEBwcml2YXRlIHtOb2RlfG51bGx9IHRoZSB2aXN1YWwgcmVwcmVzZW50YXRpb24gb2YgdGhlIGNvbnRhaW5lciBzZXRcclxuICAgIHRoaXMuY3VycmVudFZpZXcgPSBudWxsO1xyXG5cclxuICAgIC8vIFJldHVybnMgdGhlIGN1cnJlbnQgYnVja2V0IHBvc2l0aW9uXHJcbiAgICBjb25zdCBnZXRCdWNrZXRQb3NpdGlvbiA9ICgpID0+IHtcclxuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5jdXJyZW50Vmlldy5idWNrZXROb2RlICk7XHJcbiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRWaWV3LmJ1Y2tldE5vZGUuZ2V0VW5pcXVlVHJhaWwoKS5nZXRNYXRyaXhUbyggdGhpcy5jdXJyZW50Vmlldy5nZXRVbmlxdWVUcmFpbCgpICkudGltZXNWZWN0b3IyKCBWZWN0b3IyLlpFUk8gKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gcHJlc2VudCBmb3IgdGhlIGxpZmV0aW1lIG9mIHRoZSBzaW11bGF0aW9uXHJcbiAgICBtb2RlbC5yZXByZXNlbnRhdGlvblByb3BlcnR5LmxpbmsoIHJlcHJlc2VudGF0aW9uID0+IHtcclxuICAgICAgcGhldC5qb2lzdC5kaXNwbGF5Ll9pbnB1dC5pbnRlcnJ1cHRQb2ludGVycygpO1xyXG5cclxuICAgICAgLy8gRmluaXNoIGFsbCBhbmltYXRpb25zXHJcbiAgICAgIG1vZGVsLmNvbXBsZXRlQWxsUGllY2VzKCk7XHJcblxyXG5cclxuICAgICAgaWYgKCB0aGlzLmN1cnJlbnRWaWV3ICkge1xyXG4gICAgICAgIHRoaXMuY3VycmVudFZpZXcuaW50ZXJydXB0U3VidHJlZUlucHV0KCk7XHJcblxyXG4gICAgICAgIHRoaXMudmlld0NvbnRhaW5lci5pbnRlcnJ1cHRTdWJ0cmVlSW5wdXQoKTtcclxuICAgICAgICB0aGlzLnZpZXdDb250YWluZXIucmVtb3ZlQWxsQ2hpbGRyZW4oKTtcclxuXHJcbiAgICAgICAgdGhpcy5idWNrZXRDb250YWluZXIuaW50ZXJydXB0U3VidHJlZUlucHV0KCk7XHJcbiAgICAgICAgdGhpcy5idWNrZXRDb250YWluZXIucmVtb3ZlQWxsQ2hpbGRyZW4oKTtcclxuXHJcbiAgICAgICAgdGhpcy5jdXJyZW50Vmlldy5kaXNwb3NlKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuY3VycmVudFZpZXcgPSBudWxsO1xyXG5cclxuICAgICAgc3dpdGNoKCByZXByZXNlbnRhdGlvbiApIHtcclxuICAgICAgICBjYXNlIEludHJvUmVwcmVzZW50YXRpb24uQ0lSQ0xFOlxyXG4gICAgICAgICAgdGhpcy5jdXJyZW50VmlldyA9IG5ldyBDaXJjdWxhclNjZW5lTm9kZSggbW9kZWwsIHtcclxuICAgICAgICAgICAgZ2V0QnVja2V0UG9zaXRpb246IGdldEJ1Y2tldFBvc2l0aW9uXHJcbiAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEludHJvUmVwcmVzZW50YXRpb24uVkVSVElDQUxfQkFSOlxyXG4gICAgICAgICAgdGhpcy5jdXJyZW50VmlldyA9IG5ldyBSZWN0YW5ndWxhclNjZW5lTm9kZSggbW9kZWwsIHtcclxuICAgICAgICAgICAgZ2V0QnVja2V0UG9zaXRpb246IGdldEJ1Y2tldFBvc2l0aW9uLFxyXG4gICAgICAgICAgICByZWN0YW5ndWxhck9yaWVudGF0aW9uOiBSZWN0YW5ndWxhck9yaWVudGF0aW9uLlZFUlRJQ0FMXHJcbiAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEludHJvUmVwcmVzZW50YXRpb24uSE9SSVpPTlRBTF9CQVI6XHJcbiAgICAgICAgICB0aGlzLmN1cnJlbnRWaWV3ID0gbmV3IFJlY3Rhbmd1bGFyU2NlbmVOb2RlKCBtb2RlbCwge1xyXG4gICAgICAgICAgICBnZXRCdWNrZXRQb3NpdGlvbjogZ2V0QnVja2V0UG9zaXRpb24sXHJcbiAgICAgICAgICAgIHJlY3Rhbmd1bGFyT3JpZW50YXRpb246IFJlY3Rhbmd1bGFyT3JpZW50YXRpb24uSE9SSVpPTlRBTFxyXG4gICAgICAgICAgfSApO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBJbnRyb1JlcHJlc2VudGF0aW9uLkJFQUtFUjpcclxuICAgICAgICAgIHRoaXMuY3VycmVudFZpZXcgPSBuZXcgQmVha2VyU2NlbmVOb2RlKCBtb2RlbCwge1xyXG4gICAgICAgICAgICBnZXRCdWNrZXRQb3NpdGlvbjogZ2V0QnVja2V0UG9zaXRpb25cclxuICAgICAgICAgIH0gKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgSW50cm9SZXByZXNlbnRhdGlvbi5DQUtFOlxyXG4gICAgICAgICAgdGhpcy5jdXJyZW50VmlldyA9IG5ldyBDYWtlU2NlbmVOb2RlKCBtb2RlbCwge1xyXG4gICAgICAgICAgICBnZXRCdWNrZXRQb3NpdGlvbjogZ2V0QnVja2V0UG9zaXRpb25cclxuICAgICAgICAgIH0gKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgSW50cm9SZXByZXNlbnRhdGlvbi5OVU1CRVJfTElORTpcclxuICAgICAgICAgIHRoaXMuY3VycmVudFZpZXcgPSBuZXcgTnVtYmVyTGluZVNjZW5lTm9kZSggbW9kZWwgKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgLy8gRG9uJ3QgaGF2ZSBhIGN1cnJlbnQgdmlldy4gTWF5IGhhcHBlbiBvbiBzdGFydHVwXHJcbiAgICAgIH1cclxuICAgICAgaWYgKCB0aGlzLmN1cnJlbnRWaWV3ICkge1xyXG4gICAgICAgIC8vIGFkZCB0aGUgY2hvc2VuIHZpc3VhbCByZXByZXNlbnRhdGlvbiB0byB0aGUgc2NlbmUgZ3JhcGhcclxuICAgICAgICB0aGlzLnZpZXdDb250YWluZXIuYWRkQ2hpbGQoIHRoaXMuY3VycmVudFZpZXcgKTtcclxuICAgICAgICBpZiAoIHRoaXMuY3VycmVudFZpZXcucGllY2VMYXllciApIHtcclxuICAgICAgICAgIHRoaXMudmlld0NvbnRhaW5lci5hZGRDaGlsZCggdGhpcy5jdXJyZW50Vmlldy5waWVjZUxheWVyICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggdGhpcy5jdXJyZW50Vmlldy5idWNrZXROb2RlICkge1xyXG4gICAgICAgICAgdGhpcy5idWNrZXRDb250YWluZXIuYWRkQ2hpbGQoIHRoaXMuY3VycmVudFZpZXcuYnVja2V0Tm9kZSApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIEBwcm90ZWN0ZWQge05vZGV9XHJcbiAgICB0aGlzLmFkanVzdGFibGVGcmFjdGlvbk5vZGUgPSBuZXcgQWRqdXN0YWJsZUZyYWN0aW9uTm9kZSggbW9kZWwubnVtZXJhdG9yUHJvcGVydHksIG1vZGVsLmRlbm9taW5hdG9yUHJvcGVydHksIG1vZGVsLmNvbnRhaW5lckNvdW50UHJvcGVydHksIHtcclxuICAgICAgc3Bpbm5lcnNPblJpZ2h0OiBvcHRpb25zLnNwaW5uZXJzT25SaWdodFxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIEBwcm90ZWN0ZWQge05vZGV9XHJcbiAgICB0aGlzLnJlc2V0QWxsQnV0dG9uID0gbmV3IFJlc2V0QWxsQnV0dG9uKCB7XHJcbiAgICAgIGxpc3RlbmVyOiAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5pbnRlcnJ1cHRTdWJ0cmVlSW5wdXQoKTtcclxuICAgICAgICBtb2RlbC5yZXNldCgpO1xyXG4gICAgICB9LFxyXG4gICAgICByaWdodDogdGhpcy5sYXlvdXRCb3VuZHMucmlnaHQgLSBNQVJHSU4sXHJcbiAgICAgIGJvdHRvbTogdGhpcy5sYXlvdXRCb3VuZHMuYm90dG9tIC0gTUFSR0lOXHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5jaGlsZHJlbiA9IFtcclxuICAgICAgdGhpcy5yZXByZXNlbnRhdGlvblBhbmVsLFxyXG4gICAgICB0aGlzLmFkanVzdGFibGVGcmFjdGlvbk5vZGUsXHJcbiAgICAgIHRoaXMucmVzZXRBbGxCdXR0b24sXHJcbiAgICAgIHRoaXMuYnVja2V0Q29udGFpbmVyLFxyXG4gICAgICB0aGlzLnZpZXdDb250YWluZXJcclxuICAgIF07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXRzIHVwIHRoZSBpbml0aWFsIGxheW91dCBvZiB0aGUgc2NyZWVuIHZpZXcuIFNob3VsZCBiZSBkb25lIG9uY2UgYWxsIGluaXRpYWxpemF0aW9uIGlzIGNvbXBsZXRlLlxyXG4gICAqIEBwcm90ZWN0ZWRcclxuICAgKi9cclxuICBpbml0aWFsaXplTGF5b3V0KCkge1xyXG5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFN0ZXBzIGZvcndhcmQgaW4gdGltZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkdCAtIHRpbWUgc3RlcFxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBzdGVwKCBkdCApIHtcclxuICAgIHRoaXMuY3VycmVudFZpZXcuc3RlcCggZHQgKTtcclxuICB9XHJcbn1cclxuXHJcbmZyYWN0aW9uc0NvbW1vbi5yZWdpc3RlciggJ0NvbnRhaW5lclNldFNjcmVlblZpZXcnLCBDb250YWluZXJTZXRTY3JlZW5WaWV3ICk7XHJcbmV4cG9ydCBkZWZhdWx0IENvbnRhaW5lclNldFNjcmVlblZpZXc7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxPQUFPLE1BQU0sK0JBQStCO0FBQ25ELE9BQU9DLFVBQVUsTUFBTSxvQ0FBb0M7QUFDM0QsT0FBT0MsS0FBSyxNQUFNLG1DQUFtQztBQUNyRCxPQUFPQyxjQUFjLE1BQU0sdURBQXVEO0FBQ2xGLFNBQVNDLFFBQVEsRUFBRUMsVUFBVSxFQUFFQyxJQUFJLFFBQVEsbUNBQW1DO0FBQzlFLE9BQU9DLEtBQUssTUFBTSw2QkFBNkI7QUFDL0MsT0FBT0Msd0JBQXdCLE1BQU0sMENBQTBDO0FBQy9FLE9BQU9DLHFCQUFxQixNQUFNLDRDQUE0QztBQUM5RSxPQUFPQyxlQUFlLE1BQU0sMEJBQTBCO0FBQ3RELE9BQU9DLG1CQUFtQixNQUFNLGlDQUFpQztBQUNqRSxPQUFPQyxzQkFBc0IsTUFBTSw2QkFBNkI7QUFDaEUsT0FBT0MsZUFBZSxNQUFNLDZCQUE2QjtBQUN6RCxPQUFPQyxhQUFhLE1BQU0seUJBQXlCO0FBQ25ELE9BQU9DLGlCQUFpQixNQUFNLGlDQUFpQztBQUMvRCxPQUFPQyxxQkFBcUIsTUFBTSw0QkFBNEI7QUFDOUQsT0FBT0MsbUJBQW1CLE1BQU0scUNBQXFDO0FBQ3JFLE9BQU9DLG9CQUFvQixNQUFNLHVDQUF1QztBQUN4RSxPQUFPQyxzQkFBc0IsTUFBTSw2QkFBNkI7O0FBRWhFO0FBQ0EsTUFBTUMsTUFBTSxHQUFHWix3QkFBd0IsQ0FBQ2EsWUFBWTtBQUVwRCxNQUFNQyxzQkFBc0Is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