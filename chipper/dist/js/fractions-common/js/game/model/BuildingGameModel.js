// Copyright 2018-2021, University of Colorado Boulder

/**
 * Model for game screens where the objective is to build specific fractions.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import BooleanProperty from '../../../../axon/js/BooleanProperty.js';
import DynamicProperty from '../../../../axon/js/DynamicProperty.js';
import Emitter from '../../../../axon/js/Emitter.js';
import Property from '../../../../axon/js/Property.js';
import EnumerationMap from '../../../../phet-core/js/EnumerationMap.js';
import BuildingType from '../../building/model/BuildingType.js';
import FractionsCommonConstants from '../../common/FractionsCommonConstants.js';
import FractionsCommonColors from '../../common/view/FractionsCommonColors.js';
import fractionsCommon from '../../fractionsCommon.js';
import FractionChallenge from './FractionChallenge.js';
import FractionLevel from './FractionLevel.js';
class BuildingGameModel {
  /**
   * @param {boolean} hasMixedNumbers - Whether this is the equivalent of the "Build a Fraction" or "Mixed Numbers" game
   */
  constructor(hasMixedNumbers) {
    // @public {boolean}
    this.hasMixedNumbers = hasMixedNumbers;

    // We wrap the main challenge generation so we can get pseudo-random (but evenly distributed) pie/bar for levels
    // 1-4.
    FractionChallenge.beginFullGeneration();

    // @public {Array.<FractionLevel>}
    this.shapeLevels = BuildingGameModel.getShapeLevels(hasMixedNumbers);

    // @public {Array.<FractionLevel>}
    this.numberLevels = BuildingGameModel.getNumberLevels(hasMixedNumbers);
    FractionChallenge.endFullGeneration();
    assert && assert(this.shapeLevels.length === FractionsCommonConstants.NUM_LEVELS);
    assert && assert(this.numberLevels.length === FractionsCommonConstants.NUM_LEVELS);

    // @public {Property.<FractionLevel|null>}
    this.levelProperty = new Property(null);

    // @public {Property.<FractionChallenge|null>}
    this.challengeProperty = new DynamicProperty(this.levelProperty, {
      derive: 'challengeProperty'
    });

    // @public {EnumerationMap.<BuildingType,Array.<FractionLevel>}
    this.levelMap = new EnumerationMap(BuildingType, type => {
      return type === BuildingType.SHAPE ? this.shapeLevels : this.numberLevels;
    });

    // @public {EnumerationMap.<BuildingType,Property.<boolean>}
    this.levelCommpletePropertyMap = new EnumerationMap(BuildingType, type => {
      // We'll control this from below.
      return new BooleanProperty(false);
    });

    // @public {Emitter} - Triggers when all 10 levels are completed
    this.allLevelsCompleteEmitter = new Emitter();

    // @public {Emitter} - Triggers when a level is completed, but it doesn't complete all 10 levels
    this.singleLevelCompleteEmitter = new Emitter();

    // @public {Emitter} - Triggers when a group is collected (but not when the level is completed)
    this.collectedGroupEmitter = new Emitter();

    // @public {Emitter} - Triggers when a user tries to drag a group over a target that doesn't match.
    this.incorrectAttemptEmitter = new Emitter();

    // Fire the level complete emitters when needed
    BuildingType.VALUES.forEach(buildingType => {
      const levels = this.levelMap.get(buildingType);
      const countMissing = () => _.sum(levels.map(level => level.numTargets - level.scoreProperty.value > 0 ? 1 : 0));
      let lastCountMissing = countMissing();
      levels.forEach(level => {
        level.scoreProperty.lazyLink((newScore, oldScore) => {
          const numMissing = countMissing();
          const isComplete = numMissing === 0;
          this.levelCommpletePropertyMap.get(buildingType).value = isComplete;
          if (isComplete) {
            this.allLevelsCompleteEmitter.emit();
          } else if (numMissing < lastCountMissing) {
            this.singleLevelCompleteEmitter.emit();
          } else if (newScore > oldScore) {
            this.collectedGroupEmitter.emit();
          }
          lastCountMissing = numMissing;
        });
      });
    });
  }

  /**
   * Steps the model forward in time.
   * @public
   *
   * @param {number} dt
   */
  step(dt) {
    this.challengeProperty.value && this.challengeProperty.value.step(dt);
  }

  /**
   * Moves to the next level (if possible)
   * @public
   */
  nextLevel() {
    [this.shapeLevels, this.numberLevels].forEach(levels => {
      const currentIndex = levels.indexOf(this.levelProperty.value);
      if (currentIndex >= 0) {
        // Wrap levels around if necessary
        this.levelProperty.value = levels[(currentIndex + 1) % levels.length];
      }
    });
  }

  /**
   * Resets the model.
   * @public
   */
  reset() {
    this.levelProperty.reset();
    FractionChallenge.beginFullGeneration();
    this.shapeLevels.forEach(level => level.reset());
    this.numberLevels.forEach(level => level.reset());
    FractionChallenge.endFullGeneration();
  }

  /**
   * Generates a list of all shape levels.
   * @public
   *
   * @param {boolean} hasMixedNumbers
   * @returns {Array.<FractionLevel>}
   */
  static getShapeLevels(hasMixedNumbers) {
    return hasMixedNumbers ? [
    // "Mixed Numbers" Shapes level 1
    new FractionLevel(1, 3, BuildingType.SHAPE, FractionsCommonColors.level1Property, FractionLevel.level1ShapesMixed),
    // "Mixed Numbers" Shapes level 2
    new FractionLevel(2, 3, BuildingType.SHAPE, FractionsCommonColors.level2Property, FractionLevel.level2ShapesMixed),
    // "Mixed Numbers" Shapes level 3
    new FractionLevel(3, 3, BuildingType.SHAPE, FractionsCommonColors.level3Property, FractionLevel.level3ShapesMixed),
    // "Mixed Numbers" Shapes level 4
    new FractionLevel(4, 3, BuildingType.SHAPE, FractionsCommonColors.level4Property, FractionLevel.level4ShapesMixed),
    // "Mixed Numbers" Shapes level 5
    new FractionLevel(5, 3, BuildingType.SHAPE, FractionsCommonColors.level5Property, FractionLevel.level5ShapesMixed),
    // "Mixed Numbers" Shapes level 6
    new FractionLevel(6, 4, BuildingType.SHAPE, FractionsCommonColors.level6Property, FractionLevel.level6ShapesMixed),
    // "Mixed Numbers" Shapes level 7
    new FractionLevel(7, 4, BuildingType.SHAPE, FractionsCommonColors.level7Property, FractionLevel.level7ShapesMixed),
    // "Mixed Numbers" Shapes level 8
    new FractionLevel(8, 4, BuildingType.SHAPE, FractionsCommonColors.level8Property, FractionLevel.level8ShapesMixed),
    // "Mixed Numbers" Shapes level 9
    new FractionLevel(9, 4, BuildingType.SHAPE, FractionsCommonColors.level9Property, FractionLevel.level9ShapesMixed),
    // "Mixed Numbers" Shapes level 10
    new FractionLevel(10, 4, BuildingType.SHAPE, FractionsCommonColors.level10Property, FractionLevel.level10ShapesMixed)] : [
    // "Build a Fraction" Shapes level 1
    new FractionLevel(1, 3, BuildingType.SHAPE, FractionsCommonColors.level1Property, FractionLevel.level1Shapes),
    // "Build a Fraction" Shapes level 2
    new FractionLevel(2, 3, BuildingType.SHAPE, FractionsCommonColors.level2Property, FractionLevel.level2Shapes),
    // "Build a Fraction" Shapes level 3
    new FractionLevel(3, 3, BuildingType.SHAPE, FractionsCommonColors.level3Property, FractionLevel.level3Shapes),
    // "Build a Fraction" Shapes level 4
    new FractionLevel(4, 3, BuildingType.SHAPE, FractionsCommonColors.level4Property, FractionLevel.level4Shapes),
    // "Build a Fraction" Shapes level 5
    new FractionLevel(5, 3, BuildingType.SHAPE, FractionsCommonColors.level5Property, FractionLevel.level5Shapes),
    // "Build a Fraction" Shapes level 6
    new FractionLevel(6, 4, BuildingType.SHAPE, FractionsCommonColors.level6Property, FractionLevel.level6Shapes),
    // "Build a Fraction" Shapes level 7
    new FractionLevel(7, 4, BuildingType.SHAPE, FractionsCommonColors.level7Property, FractionLevel.level7Shapes),
    // "Build a Fraction" Shapes level 8
    new FractionLevel(8, 4, BuildingType.SHAPE, FractionsCommonColors.level8Property, FractionLevel.level8Shapes),
    // "Build a Fraction" Shapes level 9
    new FractionLevel(9, 4, BuildingType.SHAPE, FractionsCommonColors.level9Property, FractionLevel.level9Shapes),
    // "Build a Fraction" Shapes level 10
    new FractionLevel(10, 4, BuildingType.SHAPE, FractionsCommonColors.level10Property, FractionLevel.level10Shapes)];
  }

  /**
   * Generates a list of all number levels.
   * @public
   *
   * @param {boolean} hasMixedNumbers
   * @returns {Array.<FractionLevel>}
   */
  static getNumberLevels(hasMixedNumbers) {
    return hasMixedNumbers ? [
    // "Mixed Numbers" Numbers level 1
    new FractionLevel(1, 3, BuildingType.NUMBER, FractionsCommonColors.level1Property, FractionLevel.level1NumbersMixed),
    // "Mixed Numbers" Numbers level 2
    new FractionLevel(2, 3, BuildingType.NUMBER, FractionsCommonColors.level2Property, FractionLevel.level2NumbersMixed),
    // "Mixed Numbers" Numbers level 3
    new FractionLevel(3, 3, BuildingType.NUMBER, FractionsCommonColors.level3Property, FractionLevel.level3NumbersMixed),
    // "Mixed Numbers" Numbers level 4
    new FractionLevel(4, 3, BuildingType.NUMBER, FractionsCommonColors.level4Property, FractionLevel.level4NumbersMixed),
    // "Mixed Numbers" Numbers level 5
    new FractionLevel(5, 3, BuildingType.NUMBER, FractionsCommonColors.level5Property, FractionLevel.level5NumbersMixed),
    // "Mixed Numbers" Numbers level 6
    new FractionLevel(6, 4, BuildingType.NUMBER, FractionsCommonColors.level6Property, FractionLevel.level6NumbersMixed),
    // "Mixed Numbers" Numbers level 7
    new FractionLevel(7, 4, BuildingType.NUMBER, FractionsCommonColors.level7Property, FractionLevel.level7NumbersMixed),
    // "Mixed Numbers" Numbers level 8
    new FractionLevel(8, 4, BuildingType.NUMBER, FractionsCommonColors.level8Property, FractionLevel.level8NumbersMixed),
    // "Mixed Numbers" Numbers level 9
    new FractionLevel(9, 4, BuildingType.NUMBER, FractionsCommonColors.level9Property, FractionLevel.level9NumbersMixed),
    // "Mixed Numbers" Numbers level 10
    new FractionLevel(10, 4, BuildingType.NUMBER, FractionsCommonColors.level10Property, FractionLevel.level10NumbersMixed)] : [
    // "Build a Fraction" Numbers level 1
    new FractionLevel(1, 3, BuildingType.NUMBER, FractionsCommonColors.level1Property, FractionLevel.level1Numbers),
    // "Build a Fraction" Numbers level 2
    new FractionLevel(2, 3, BuildingType.NUMBER, FractionsCommonColors.level2Property, FractionLevel.level2Numbers),
    // "Build a Fraction" Numbers level 3
    new FractionLevel(3, 3, BuildingType.NUMBER, FractionsCommonColors.level3Property, FractionLevel.level3Numbers),
    // "Build a Fraction" Numbers level 4
    new FractionLevel(4, 3, BuildingType.NUMBER, FractionsCommonColors.level4Property, FractionLevel.level4Numbers),
    // "Build a Fraction" Numbers level 5
    new FractionLevel(5, 3, BuildingType.NUMBER, FractionsCommonColors.level5Property, FractionLevel.level5Numbers),
    // "Build a Fraction" Numbers level 6
    new FractionLevel(6, 4, BuildingType.NUMBER, FractionsCommonColors.level6Property, FractionLevel.level6Numbers),
    // "Build a Fraction" Numbers level 7
    new FractionLevel(7, 4, BuildingType.NUMBER, FractionsCommonColors.level7Property, FractionLevel.level7Numbers),
    // "Build a Fraction" Numbers level 8
    new FractionLevel(8, 4, BuildingType.NUMBER, FractionsCommonColors.level8Property, FractionLevel.level8Numbers),
    // "Build a Fraction" Numbers level 9
    new FractionLevel(9, 4, BuildingType.NUMBER, FractionsCommonColors.level9Property, FractionLevel.level9Numbers),
    // "Build a Fraction" Numbers level 10
    new FractionLevel(10, 4, BuildingType.NUMBER, FractionsCommonColors.level10Property, FractionLevel.level10Numbers)];
  }
}
fractionsCommon.register('BuildingGameModel', BuildingGameModel);
export default BuildingGameModel;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb29sZWFuUHJvcGVydHkiLCJEeW5hbWljUHJvcGVydHkiLCJFbWl0dGVyIiwiUHJvcGVydHkiLCJFbnVtZXJhdGlvbk1hcCIsIkJ1aWxkaW5nVHlwZSIsIkZyYWN0aW9uc0NvbW1vbkNvbnN0YW50cyIsIkZyYWN0aW9uc0NvbW1vbkNvbG9ycyIsImZyYWN0aW9uc0NvbW1vbiIsIkZyYWN0aW9uQ2hhbGxlbmdlIiwiRnJhY3Rpb25MZXZlbCIsIkJ1aWxkaW5nR2FtZU1vZGVsIiwiY29uc3RydWN0b3IiLCJoYXNNaXhlZE51bWJlcnMiLCJiZWdpbkZ1bGxHZW5lcmF0aW9uIiwic2hhcGVMZXZlbHMiLCJnZXRTaGFwZUxldmVscyIsIm51bWJlckxldmVscyIsImdldE51bWJlckxldmVscyIsImVuZEZ1bGxHZW5lcmF0aW9uIiwiYXNzZXJ0IiwibGVuZ3RoIiwiTlVNX0xFVkVMUyIsImxldmVsUHJvcGVydHkiLCJjaGFsbGVuZ2VQcm9wZXJ0eSIsImRlcml2ZSIsImxldmVsTWFwIiwidHlwZSIsIlNIQVBFIiwibGV2ZWxDb21tcGxldGVQcm9wZXJ0eU1hcCIsImFsbExldmVsc0NvbXBsZXRlRW1pdHRlciIsInNpbmdsZUxldmVsQ29tcGxldGVFbWl0dGVyIiwiY29sbGVjdGVkR3JvdXBFbWl0dGVyIiwiaW5jb3JyZWN0QXR0ZW1wdEVtaXR0ZXIiLCJWQUxVRVMiLCJmb3JFYWNoIiwiYnVpbGRpbmdUeXBlIiwibGV2ZWxzIiwiZ2V0IiwiY291bnRNaXNzaW5nIiwiXyIsInN1bSIsIm1hcCIsImxldmVsIiwibnVtVGFyZ2V0cyIsInNjb3JlUHJvcGVydHkiLCJ2YWx1ZSIsImxhc3RDb3VudE1pc3NpbmciLCJsYXp5TGluayIsIm5ld1Njb3JlIiwib2xkU2NvcmUiLCJudW1NaXNzaW5nIiwiaXNDb21wbGV0ZSIsImVtaXQiLCJzdGVwIiwiZHQiLCJuZXh0TGV2ZWwiLCJjdXJyZW50SW5kZXgiLCJpbmRleE9mIiwicmVzZXQiLCJsZXZlbDFQcm9wZXJ0eSIsImxldmVsMVNoYXBlc01peGVkIiwibGV2ZWwyUHJvcGVydHkiLCJsZXZlbDJTaGFwZXNNaXhlZCIsImxldmVsM1Byb3BlcnR5IiwibGV2ZWwzU2hhcGVzTWl4ZWQiLCJsZXZlbDRQcm9wZXJ0eSIsImxldmVsNFNoYXBlc01peGVkIiwibGV2ZWw1UHJvcGVydHkiLCJsZXZlbDVTaGFwZXNNaXhlZCIsImxldmVsNlByb3BlcnR5IiwibGV2ZWw2U2hhcGVzTWl4ZWQiLCJsZXZlbDdQcm9wZXJ0eSIsImxldmVsN1NoYXBlc01peGVkIiwibGV2ZWw4UHJvcGVydHkiLCJsZXZlbDhTaGFwZXNNaXhlZCIsImxldmVsOVByb3BlcnR5IiwibGV2ZWw5U2hhcGVzTWl4ZWQiLCJsZXZlbDEwUHJvcGVydHkiLCJsZXZlbDEwU2hhcGVzTWl4ZWQiLCJsZXZlbDFTaGFwZXMiLCJsZXZlbDJTaGFwZXMiLCJsZXZlbDNTaGFwZXMiLCJsZXZlbDRTaGFwZXMiLCJsZXZlbDVTaGFwZXMiLCJsZXZlbDZTaGFwZXMiLCJsZXZlbDdTaGFwZXMiLCJsZXZlbDhTaGFwZXMiLCJsZXZlbDlTaGFwZXMiLCJsZXZlbDEwU2hhcGVzIiwiTlVNQkVSIiwibGV2ZWwxTnVtYmVyc01peGVkIiwibGV2ZWwyTnVtYmVyc01peGVkIiwibGV2ZWwzTnVtYmVyc01peGVkIiwibGV2ZWw0TnVtYmVyc01peGVkIiwibGV2ZWw1TnVtYmVyc01peGVkIiwibGV2ZWw2TnVtYmVyc01peGVkIiwibGV2ZWw3TnVtYmVyc01peGVkIiwibGV2ZWw4TnVtYmVyc01peGVkIiwibGV2ZWw5TnVtYmVyc01peGVkIiwibGV2ZWwxME51bWJlcnNNaXhlZCIsImxldmVsMU51bWJlcnMiLCJsZXZlbDJOdW1iZXJzIiwibGV2ZWwzTnVtYmVycyIsImxldmVsNE51bWJlcnMiLCJsZXZlbDVOdW1iZXJzIiwibGV2ZWw2TnVtYmVycyIsImxldmVsN051bWJlcnMiLCJsZXZlbDhOdW1iZXJzIiwibGV2ZWw5TnVtYmVycyIsImxldmVsMTBOdW1iZXJzIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJCdWlsZGluZ0dhbWVNb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOC0yMDIxLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBNb2RlbCBmb3IgZ2FtZSBzY3JlZW5zIHdoZXJlIHRoZSBvYmplY3RpdmUgaXMgdG8gYnVpbGQgc3BlY2lmaWMgZnJhY3Rpb25zLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XHJcbiAqL1xyXG5cclxuaW1wb3J0IEJvb2xlYW5Qcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL0Jvb2xlYW5Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBEeW5hbWljUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9EeW5hbWljUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgRW1pdHRlciBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL0VtaXR0ZXIuanMnO1xyXG5pbXBvcnQgUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBFbnVtZXJhdGlvbk1hcCBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvRW51bWVyYXRpb25NYXAuanMnO1xyXG5pbXBvcnQgQnVpbGRpbmdUeXBlIGZyb20gJy4uLy4uL2J1aWxkaW5nL21vZGVsL0J1aWxkaW5nVHlwZS5qcyc7XHJcbmltcG9ydCBGcmFjdGlvbnNDb21tb25Db25zdGFudHMgZnJvbSAnLi4vLi4vY29tbW9uL0ZyYWN0aW9uc0NvbW1vbkNvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBGcmFjdGlvbnNDb21tb25Db2xvcnMgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvRnJhY3Rpb25zQ29tbW9uQ29sb3JzLmpzJztcclxuaW1wb3J0IGZyYWN0aW9uc0NvbW1vbiBmcm9tICcuLi8uLi9mcmFjdGlvbnNDb21tb24uanMnO1xyXG5pbXBvcnQgRnJhY3Rpb25DaGFsbGVuZ2UgZnJvbSAnLi9GcmFjdGlvbkNoYWxsZW5nZS5qcyc7XHJcbmltcG9ydCBGcmFjdGlvbkxldmVsIGZyb20gJy4vRnJhY3Rpb25MZXZlbC5qcyc7XHJcblxyXG5jbGFzcyBCdWlsZGluZ0dhbWVNb2RlbCB7XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBoYXNNaXhlZE51bWJlcnMgLSBXaGV0aGVyIHRoaXMgaXMgdGhlIGVxdWl2YWxlbnQgb2YgdGhlIFwiQnVpbGQgYSBGcmFjdGlvblwiIG9yIFwiTWl4ZWQgTnVtYmVyc1wiIGdhbWVcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvciggaGFzTWl4ZWROdW1iZXJzICkge1xyXG5cclxuICAgIC8vIEBwdWJsaWMge2Jvb2xlYW59XHJcbiAgICB0aGlzLmhhc01peGVkTnVtYmVycyA9IGhhc01peGVkTnVtYmVycztcclxuXHJcbiAgICAvLyBXZSB3cmFwIHRoZSBtYWluIGNoYWxsZW5nZSBnZW5lcmF0aW9uIHNvIHdlIGNhbiBnZXQgcHNldWRvLXJhbmRvbSAoYnV0IGV2ZW5seSBkaXN0cmlidXRlZCkgcGllL2JhciBmb3IgbGV2ZWxzXHJcbiAgICAvLyAxLTQuXHJcbiAgICBGcmFjdGlvbkNoYWxsZW5nZS5iZWdpbkZ1bGxHZW5lcmF0aW9uKCk7XHJcblxyXG4gICAgLy8gQHB1YmxpYyB7QXJyYXkuPEZyYWN0aW9uTGV2ZWw+fVxyXG4gICAgdGhpcy5zaGFwZUxldmVscyA9IEJ1aWxkaW5nR2FtZU1vZGVsLmdldFNoYXBlTGV2ZWxzKCBoYXNNaXhlZE51bWJlcnMgKTtcclxuXHJcbiAgICAvLyBAcHVibGljIHtBcnJheS48RnJhY3Rpb25MZXZlbD59XHJcbiAgICB0aGlzLm51bWJlckxldmVscyA9IEJ1aWxkaW5nR2FtZU1vZGVsLmdldE51bWJlckxldmVscyggaGFzTWl4ZWROdW1iZXJzICk7XHJcblxyXG4gICAgRnJhY3Rpb25DaGFsbGVuZ2UuZW5kRnVsbEdlbmVyYXRpb24oKTtcclxuXHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0aGlzLnNoYXBlTGV2ZWxzLmxlbmd0aCA9PT0gRnJhY3Rpb25zQ29tbW9uQ29uc3RhbnRzLk5VTV9MRVZFTFMgKTtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIHRoaXMubnVtYmVyTGV2ZWxzLmxlbmd0aCA9PT0gRnJhY3Rpb25zQ29tbW9uQ29uc3RhbnRzLk5VTV9MRVZFTFMgKTtcclxuXHJcbiAgICAvLyBAcHVibGljIHtQcm9wZXJ0eS48RnJhY3Rpb25MZXZlbHxudWxsPn1cclxuICAgIHRoaXMubGV2ZWxQcm9wZXJ0eSA9IG5ldyBQcm9wZXJ0eSggbnVsbCApO1xyXG5cclxuICAgIC8vIEBwdWJsaWMge1Byb3BlcnR5LjxGcmFjdGlvbkNoYWxsZW5nZXxudWxsPn1cclxuICAgIHRoaXMuY2hhbGxlbmdlUHJvcGVydHkgPSBuZXcgRHluYW1pY1Byb3BlcnR5KCB0aGlzLmxldmVsUHJvcGVydHksIHtcclxuICAgICAgZGVyaXZlOiAnY2hhbGxlbmdlUHJvcGVydHknXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gQHB1YmxpYyB7RW51bWVyYXRpb25NYXAuPEJ1aWxkaW5nVHlwZSxBcnJheS48RnJhY3Rpb25MZXZlbD59XHJcbiAgICB0aGlzLmxldmVsTWFwID0gbmV3IEVudW1lcmF0aW9uTWFwKCBCdWlsZGluZ1R5cGUsIHR5cGUgPT4ge1xyXG4gICAgICByZXR1cm4gdHlwZSA9PT0gQnVpbGRpbmdUeXBlLlNIQVBFID8gdGhpcy5zaGFwZUxldmVscyA6IHRoaXMubnVtYmVyTGV2ZWxzO1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIEBwdWJsaWMge0VudW1lcmF0aW9uTWFwLjxCdWlsZGluZ1R5cGUsUHJvcGVydHkuPGJvb2xlYW4+fVxyXG4gICAgdGhpcy5sZXZlbENvbW1wbGV0ZVByb3BlcnR5TWFwID0gbmV3IEVudW1lcmF0aW9uTWFwKCBCdWlsZGluZ1R5cGUsIHR5cGUgPT4ge1xyXG4gICAgICAvLyBXZSdsbCBjb250cm9sIHRoaXMgZnJvbSBiZWxvdy5cclxuICAgICAgcmV0dXJuIG5ldyBCb29sZWFuUHJvcGVydHkoIGZhbHNlICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gQHB1YmxpYyB7RW1pdHRlcn0gLSBUcmlnZ2VycyB3aGVuIGFsbCAxMCBsZXZlbHMgYXJlIGNvbXBsZXRlZFxyXG4gICAgdGhpcy5hbGxMZXZlbHNDb21wbGV0ZUVtaXR0ZXIgPSBuZXcgRW1pdHRlcigpO1xyXG5cclxuICAgIC8vIEBwdWJsaWMge0VtaXR0ZXJ9IC0gVHJpZ2dlcnMgd2hlbiBhIGxldmVsIGlzIGNvbXBsZXRlZCwgYnV0IGl0IGRvZXNuJ3QgY29tcGxldGUgYWxsIDEwIGxldmVsc1xyXG4gICAgdGhpcy5zaW5nbGVMZXZlbENvbXBsZXRlRW1pdHRlciA9IG5ldyBFbWl0dGVyKCk7XHJcblxyXG4gICAgLy8gQHB1YmxpYyB7RW1pdHRlcn0gLSBUcmlnZ2VycyB3aGVuIGEgZ3JvdXAgaXMgY29sbGVjdGVkIChidXQgbm90IHdoZW4gdGhlIGxldmVsIGlzIGNvbXBsZXRlZClcclxuICAgIHRoaXMuY29sbGVjdGVkR3JvdXBFbWl0dGVyID0gbmV3IEVtaXR0ZXIoKTtcclxuXHJcbiAgICAvLyBAcHVibGljIHtFbWl0dGVyfSAtIFRyaWdnZXJzIHdoZW4gYSB1c2VyIHRyaWVzIHRvIGRyYWcgYSBncm91cCBvdmVyIGEgdGFyZ2V0IHRoYXQgZG9lc24ndCBtYXRjaC5cclxuICAgIHRoaXMuaW5jb3JyZWN0QXR0ZW1wdEVtaXR0ZXIgPSBuZXcgRW1pdHRlcigpO1xyXG5cclxuICAgIC8vIEZpcmUgdGhlIGxldmVsIGNvbXBsZXRlIGVtaXR0ZXJzIHdoZW4gbmVlZGVkXHJcbiAgICBCdWlsZGluZ1R5cGUuVkFMVUVTLmZvckVhY2goIGJ1aWxkaW5nVHlwZSA9PiB7XHJcbiAgICAgIGNvbnN0IGxldmVscyA9IHRoaXMubGV2ZWxNYXAuZ2V0KCBidWlsZGluZ1R5cGUgKTtcclxuICAgICAgY29uc3QgY291bnRNaXNzaW5nID0gKCkgPT4gXy5zdW0oIGxldmVscy5tYXAoIGxldmVsID0+IGxldmVsLm51bVRhcmdldHMgLSBsZXZlbC5zY29yZVByb3BlcnR5LnZhbHVlID4gMCA/IDEgOiAwICkgKTtcclxuICAgICAgbGV0IGxhc3RDb3VudE1pc3NpbmcgPSBjb3VudE1pc3NpbmcoKTtcclxuICAgICAgbGV2ZWxzLmZvckVhY2goIGxldmVsID0+IHtcclxuICAgICAgICBsZXZlbC5zY29yZVByb3BlcnR5LmxhenlMaW5rKCAoIG5ld1Njb3JlLCBvbGRTY29yZSApID0+IHtcclxuICAgICAgICAgIGNvbnN0IG51bU1pc3NpbmcgPSBjb3VudE1pc3NpbmcoKTtcclxuICAgICAgICAgIGNvbnN0IGlzQ29tcGxldGUgPSBudW1NaXNzaW5nID09PSAwO1xyXG5cclxuICAgICAgICAgIHRoaXMubGV2ZWxDb21tcGxldGVQcm9wZXJ0eU1hcC5nZXQoIGJ1aWxkaW5nVHlwZSApLnZhbHVlID0gaXNDb21wbGV0ZTtcclxuXHJcbiAgICAgICAgICBpZiAoIGlzQ29tcGxldGUgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWxsTGV2ZWxzQ29tcGxldGVFbWl0dGVyLmVtaXQoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2UgaWYgKCBudW1NaXNzaW5nIDwgbGFzdENvdW50TWlzc2luZyApIHtcclxuICAgICAgICAgICAgdGhpcy5zaW5nbGVMZXZlbENvbXBsZXRlRW1pdHRlci5lbWl0KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIGlmICggbmV3U2NvcmUgPiBvbGRTY29yZSApIHtcclxuICAgICAgICAgICAgdGhpcy5jb2xsZWN0ZWRHcm91cEVtaXR0ZXIuZW1pdCgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgbGFzdENvdW50TWlzc2luZyA9IG51bU1pc3Npbmc7XHJcbiAgICAgICAgfSApO1xyXG4gICAgICB9ICk7XHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTdGVwcyB0aGUgbW9kZWwgZm9yd2FyZCBpbiB0aW1lLlxyXG4gICAqIEBwdWJsaWNcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkdFxyXG4gICAqL1xyXG4gIHN0ZXAoIGR0ICkge1xyXG4gICAgdGhpcy5jaGFsbGVuZ2VQcm9wZXJ0eS52YWx1ZSAmJiB0aGlzLmNoYWxsZW5nZVByb3BlcnR5LnZhbHVlLnN0ZXAoIGR0ICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBNb3ZlcyB0byB0aGUgbmV4dCBsZXZlbCAoaWYgcG9zc2libGUpXHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG4gIG5leHRMZXZlbCgpIHtcclxuICAgIFsgdGhpcy5zaGFwZUxldmVscywgdGhpcy5udW1iZXJMZXZlbHMgXS5mb3JFYWNoKCBsZXZlbHMgPT4ge1xyXG4gICAgICBjb25zdCBjdXJyZW50SW5kZXggPSBsZXZlbHMuaW5kZXhPZiggdGhpcy5sZXZlbFByb3BlcnR5LnZhbHVlICk7XHJcblxyXG4gICAgICBpZiAoIGN1cnJlbnRJbmRleCA+PSAwICkge1xyXG4gICAgICAgIC8vIFdyYXAgbGV2ZWxzIGFyb3VuZCBpZiBuZWNlc3NhcnlcclxuICAgICAgICB0aGlzLmxldmVsUHJvcGVydHkudmFsdWUgPSBsZXZlbHNbICggY3VycmVudEluZGV4ICsgMSApICUgbGV2ZWxzLmxlbmd0aCBdO1xyXG4gICAgICB9XHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXNldHMgdGhlIG1vZGVsLlxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICByZXNldCgpIHtcclxuICAgIHRoaXMubGV2ZWxQcm9wZXJ0eS5yZXNldCgpO1xyXG5cclxuICAgIEZyYWN0aW9uQ2hhbGxlbmdlLmJlZ2luRnVsbEdlbmVyYXRpb24oKTtcclxuXHJcbiAgICB0aGlzLnNoYXBlTGV2ZWxzLmZvckVhY2goIGxldmVsID0+IGxldmVsLnJlc2V0KCkgKTtcclxuICAgIHRoaXMubnVtYmVyTGV2ZWxzLmZvckVhY2goIGxldmVsID0+IGxldmVsLnJlc2V0KCkgKTtcclxuXHJcbiAgICBGcmFjdGlvbkNoYWxsZW5nZS5lbmRGdWxsR2VuZXJhdGlvbigpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2VuZXJhdGVzIGEgbGlzdCBvZiBhbGwgc2hhcGUgbGV2ZWxzLlxyXG4gICAqIEBwdWJsaWNcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaGFzTWl4ZWROdW1iZXJzXHJcbiAgICogQHJldHVybnMge0FycmF5LjxGcmFjdGlvbkxldmVsPn1cclxuICAgKi9cclxuICBzdGF0aWMgZ2V0U2hhcGVMZXZlbHMoIGhhc01peGVkTnVtYmVycyApIHtcclxuICAgIHJldHVybiBoYXNNaXhlZE51bWJlcnMgPyBbXHJcbiAgICAgIC8vIFwiTWl4ZWQgTnVtYmVyc1wiIFNoYXBlcyBsZXZlbCAxXHJcbiAgICAgIG5ldyBGcmFjdGlvbkxldmVsKCAxLCAzLCBCdWlsZGluZ1R5cGUuU0hBUEUsIEZyYWN0aW9uc0NvbW1vbkNvbG9ycy5sZXZlbDFQcm9wZXJ0eSwgRnJhY3Rpb25MZXZlbC5sZXZlbDFTaGFwZXNNaXhlZCApLFxyXG4gICAgICAvLyBcIk1peGVkIE51bWJlcnNcIiBTaGFwZXMgbGV2ZWwgMlxyXG4gICAgICBuZXcgRnJhY3Rpb25MZXZlbCggMiwgMywgQnVpbGRpbmdUeXBlLlNIQVBFLCBGcmFjdGlvbnNDb21tb25Db2xvcnMubGV2ZWwyUHJvcGVydHksIEZyYWN0aW9uTGV2ZWwubGV2ZWwyU2hhcGVzTWl4ZWQgKSxcclxuICAgICAgLy8gXCJNaXhlZCBOdW1iZXJzXCIgU2hhcGVzIGxldmVsIDNcclxuICAgICAgbmV3IEZyYWN0aW9uTGV2ZWwoIDMsIDMsIEJ1aWxkaW5nVHlwZS5TSEFQRSwgRnJhY3Rpb25zQ29tbW9uQ29sb3JzLmxldmVsM1Byb3BlcnR5LCBGcmFjdGlvbkxldmVsLmxldmVsM1NoYXBlc01peGVkICksXHJcbiAgICAgIC8vIFwiTWl4ZWQgTnVtYmVyc1wiIFNoYXBlcyBsZXZlbCA0XHJcbiAgICAgIG5ldyBGcmFjdGlvbkxldmVsKCA0LCAzLCBCdWlsZGluZ1R5cGUuU0hBUEUsIEZyYWN0aW9uc0NvbW1vbkNvbG9ycy5sZXZlbDRQcm9wZXJ0eSwgRnJhY3Rpb25MZXZlbC5sZXZlbDRTaGFwZXNNaXhlZCApLFxyXG4gICAgICAvLyBcIk1peGVkIE51bWJlcnNcIiBTaGFwZXMgbGV2ZWwgNVxyXG4gICAgICBuZXcgRnJhY3Rpb25MZXZlbCggNSwgMywgQnVpbGRpbmdUeXBlLlNIQVBFLCBGcmFjdGlvbnNDb21tb25Db2xvcnMubGV2ZWw1UHJvcGVydHksIEZyYWN0aW9uTGV2ZWwubGV2ZWw1U2hhcGVzTWl4ZWQgKSxcclxuICAgICAgLy8gXCJNaXhlZCBOdW1iZXJzXCIgU2hhcGVzIGxldmVsIDZcclxuICAgICAgbmV3IEZyYWN0aW9uTGV2ZWwoIDYsIDQsIEJ1aWxkaW5nVHlwZS5TSEFQRSwgRnJhY3Rpb25zQ29tbW9uQ29sb3JzLmxldmVsNlByb3BlcnR5LCBGcmFjdGlvbkxldmVsLmxldmVsNlNoYXBlc01peGVkICksXHJcbiAgICAgIC8vIFwiTWl4ZWQgTnVtYmVyc1wiIFNoYXBlcyBsZXZlbCA3XHJcbiAgICAgIG5ldyBGcmFjdGlvbkxldmVsKCA3LCA0LCBCdWlsZGluZ1R5cGUuU0hBUEUsIEZyYWN0aW9uc0NvbW1vbkNvbG9ycy5sZXZlbDdQcm9wZXJ0eSwgRnJhY3Rpb25MZXZlbC5sZXZlbDdTaGFwZXNNaXhlZCApLFxyXG4gICAgICAvLyBcIk1peGVkIE51bWJlcnNcIiBTaGFwZXMgbGV2ZWwgOFxyXG4gICAgICBuZXcgRnJhY3Rpb25MZXZlbCggOCwgNCwgQnVpbGRpbmdUeXBlLlNIQVBFLCBGcmFjdGlvbnNDb21tb25Db2xvcnMubGV2ZWw4UHJvcGVydHksIEZyYWN0aW9uTGV2ZWwubGV2ZWw4U2hhcGVzTWl4ZWQgKSxcclxuICAgICAgLy8gXCJNaXhlZCBOdW1iZXJzXCIgU2hhcGVzIGxldmVsIDlcclxuICAgICAgbmV3IEZyYWN0aW9uTGV2ZWwoIDksIDQsIEJ1aWxkaW5nVHlwZS5TSEFQRSwgRnJhY3Rpb25zQ29tbW9uQ29sb3JzLmxldmVsOVByb3BlcnR5LCBGcmFjdGlvbkxldmVsLmxldmVsOVNoYXBlc01peGVkICksXHJcbiAgICAgIC8vIFwiTWl4ZWQgTnVtYmVyc1wiIFNoYXBlcyBsZXZlbCAxMFxyXG4gICAgICBuZXcgRnJhY3Rpb25MZXZlbCggMTAsIDQsIEJ1aWxkaW5nVHlwZS5TSEFQRSwgRnJhY3Rpb25zQ29tbW9uQ29sb3JzLmxldmVsMTBQcm9wZXJ0eSwgRnJhY3Rpb25MZXZlbC5sZXZlbDEwU2hhcGVzTWl4ZWQgKVxyXG4gICAgXSA6IFtcclxuICAgICAgLy8gXCJCdWlsZCBhIEZyYWN0aW9uXCIgU2hhcGVzIGxldmVsIDFcclxuICAgICAgbmV3IEZyYWN0aW9uTGV2ZWwoIDEsIDMsIEJ1aWxkaW5nVHlwZS5TSEFQRSwgRnJhY3Rpb25zQ29tbW9uQ29sb3JzLmxldmVsMVByb3BlcnR5LCBGcmFjdGlvbkxldmVsLmxldmVsMVNoYXBlcyApLFxyXG4gICAgICAvLyBcIkJ1aWxkIGEgRnJhY3Rpb25cIiBTaGFwZXMgbGV2ZWwgMlxyXG4gICAgICBuZXcgRnJhY3Rpb25MZXZlbCggMiwgMywgQnVpbGRpbmdUeXBlLlNIQVBFLCBGcmFjdGlvbnNDb21tb25Db2xvcnMubGV2ZWwyUHJvcGVydHksIEZyYWN0aW9uTGV2ZWwubGV2ZWwyU2hhcGVzICksXHJcbiAgICAgIC8vIFwiQnVpbGQgYSBGcmFjdGlvblwiIFNoYXBlcyBsZXZlbCAzXHJcbiAgICAgIG5ldyBGcmFjdGlvbkxldmVsKCAzLCAzLCBCdWlsZGluZ1R5cGUuU0hBUEUsIEZyYWN0aW9uc0NvbW1vbkNvbG9ycy5sZXZlbDNQcm9wZXJ0eSwgRnJhY3Rpb25MZXZlbC5sZXZlbDNTaGFwZXMgKSxcclxuICAgICAgLy8gXCJCdWlsZCBhIEZyYWN0aW9uXCIgU2hhcGVzIGxldmVsIDRcclxuICAgICAgbmV3IEZyYWN0aW9uTGV2ZWwoIDQsIDMsIEJ1aWxkaW5nVHlwZS5TSEFQRSwgRnJhY3Rpb25zQ29tbW9uQ29sb3JzLmxldmVsNFByb3BlcnR5LCBGcmFjdGlvbkxldmVsLmxldmVsNFNoYXBlcyApLFxyXG4gICAgICAvLyBcIkJ1aWxkIGEgRnJhY3Rpb25cIiBTaGFwZXMgbGV2ZWwgNVxyXG4gICAgICBuZXcgRnJhY3Rpb25MZXZlbCggNSwgMywgQnVpbGRpbmdUeXBlLlNIQVBFLCBGcmFjdGlvbnNDb21tb25Db2xvcnMubGV2ZWw1UHJvcGVydHksIEZyYWN0aW9uTGV2ZWwubGV2ZWw1U2hhcGVzICksXHJcbiAgICAgIC8vIFwiQnVpbGQgYSBGcmFjdGlvblwiIFNoYXBlcyBsZXZlbCA2XHJcbiAgICAgIG5ldyBGcmFjdGlvbkxldmVsKCA2LCA0LCBCdWlsZGluZ1R5cGUuU0hBUEUsIEZyYWN0aW9uc0NvbW1vbkNvbG9ycy5sZXZlbDZQcm9wZXJ0eSwgRnJhY3Rpb25MZXZlbC5sZXZlbDZTaGFwZXMgKSxcclxuICAgICAgLy8gXCJCdWlsZCBhIEZyYWN0aW9uXCIgU2hhcGVzIGxldmVsIDdcclxuICAgICAgbmV3IEZyYWN0aW9uTGV2ZWwoIDcsIDQsIEJ1aWxkaW5nVHlwZS5TSEFQRSwgRnJhY3Rpb25zQ29tbW9uQ29sb3JzLmxldmVsN1Byb3BlcnR5LCBGcmFjdGlvbkxldmVsLmxldmVsN1NoYXBlcyApLFxyXG4gICAgICAvLyBcIkJ1aWxkIGEgRnJhY3Rpb25cIiBTaGFwZXMgbGV2ZWwgOFxyXG4gICAgICBuZXcgRnJhY3Rpb25MZXZlbCggOCwgNCwgQnVpbGRpbmdUeXBlLlNIQVBFLCBGcmFjdGlvbnNDb21tb25Db2xvcnMubGV2ZWw4UHJvcGVydHksIEZyYWN0aW9uTGV2ZWwubGV2ZWw4U2hhcGVzICksXHJcbiAgICAgIC8vIFwiQnVpbGQgYSBGcmFjdGlvblwiIFNoYXBlcyBsZXZlbCA5XHJcbiAgICAgIG5ldyBGcmFjdGlvbkxldmVsKCA5LCA0LCBCdWlsZGluZ1R5cGUuU0hBUEUsIEZyYWN0aW9uc0NvbW1vbkNvbG9ycy5sZXZlbDlQcm9wZXJ0eSwgRnJhY3Rpb25MZXZlbC5sZXZlbDlTaGFwZXMgKSxcclxuICAgICAgLy8gXCJCdWlsZCBhIEZyYWN0aW9uXCIgU2hhcGVzIGxldmVsIDEwXHJcbiAgICAgIG5ldyBGcmFjdGlvbkxldmVsKCAxMCwgNCwgQnVpbGRpbmdUeXBlLlNIQVBFLCBGcmFjdGlvbnNDb21tb25Db2xvcnMubGV2ZWwxMFByb3BlcnR5LCBGcmFjdGlvbkxldmVsLmxldmVsMTBTaGFwZXMgKVxyXG4gICAgXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdlbmVyYXRlcyBhIGxpc3Qgb2YgYWxsIG51bWJlciBsZXZlbHMuXHJcbiAgICogQHB1YmxpY1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBoYXNNaXhlZE51bWJlcnNcclxuICAgKiBAcmV0dXJucyB7QXJyYXkuPEZyYWN0aW9uTGV2ZWw+fVxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXROdW1iZXJMZXZlbHMoIGhhc01peGVkTnVtYmVycyApIHtcclxuICAgIHJldHVybiBoYXNNaXhlZE51bWJlcnMgPyBbXHJcbiAgICAgIC8vIFwiTWl4ZWQgTnVtYmVyc1wiIE51bWJlcnMgbGV2ZWwgMVxyXG4gICAgICBuZXcgRnJhY3Rpb25MZXZlbCggMSwgMywgQnVpbGRpbmdUeXBlLk5VTUJFUiwgRnJhY3Rpb25zQ29tbW9uQ29sb3JzLmxldmVsMVByb3BlcnR5LCBGcmFjdGlvbkxldmVsLmxldmVsMU51bWJlcnNNaXhlZCApLFxyXG4gICAgICAvLyBcIk1peGVkIE51bWJlcnNcIiBOdW1iZXJzIGxldmVsIDJcclxuICAgICAgbmV3IEZyYWN0aW9uTGV2ZWwoIDIsIDMsIEJ1aWxkaW5nVHlwZS5OVU1CRVIsIEZyYWN0aW9uc0NvbW1vbkNvbG9ycy5sZXZlbDJQcm9wZXJ0eSwgRnJhY3Rpb25MZXZlbC5sZXZlbDJOdW1iZXJzTWl4ZWQgKSxcclxuICAgICAgLy8gXCJNaXhlZCBOdW1iZXJzXCIgTnVtYmVycyBsZXZlbCAzXHJcbiAgICAgIG5ldyBGcmFjdGlvbkxldmVsKCAzLCAzLCBCdWlsZGluZ1R5cGUuTlVNQkVSLCBGcmFjdGlvbnNDb21tb25Db2xvcnMubGV2ZWwzUHJvcGVydHksIEZyYWN0aW9uTGV2ZWwubGV2ZWwzTnVtYmVyc01peGVkICksXHJcbiAgICAgIC8vIFwiTWl4ZWQgTnVtYmVyc1wiIE51bWJlcnMgbGV2ZWwgNFxyXG4gICAgICBuZXcgRnJhY3Rpb25MZXZlbCggNCwgMywgQnVpbGRpbmdUeXBlLk5VTUJFUiwgRnJhY3Rpb25zQ29tbW9uQ29sb3JzLmxldmVsNFByb3BlcnR5LCBGcmFjdGlvbkxldmVsLmxldmVsNE51bWJlcnNNaXhlZCApLFxyXG4gICAgICAvLyBcIk1peGVkIE51bWJlcnNcIiBOdW1iZXJzIGxldmVsIDVcclxuICAgICAgbmV3IEZyYWN0aW9uTGV2ZWwoIDUsIDMsIEJ1aWxkaW5nVHlwZS5OVU1CRVIsIEZyYWN0aW9uc0NvbW1vbkNvbG9ycy5sZXZlbDVQcm9wZXJ0eSwgRnJhY3Rpb25MZXZlbC5sZXZlbDVOdW1iZXJzTWl4ZWQgKSxcclxuICAgICAgLy8gXCJNaXhlZCBOdW1iZXJzXCIgTnVtYmVycyBsZXZlbCA2XHJcbiAgICAgIG5ldyBGcmFjdGlvbkxldmVsKCA2LCA0LCBCdWlsZGluZ1R5cGUuTlVNQkVSLCBGcmFjdGlvbnNDb21tb25Db2xvcnMubGV2ZWw2UHJvcGVydHksIEZyYWN0aW9uTGV2ZWwubGV2ZWw2TnVtYmVyc01peGVkICksXHJcbiAgICAgIC8vIFwiTWl4ZWQgTnVtYmVyc1wiIE51bWJlcnMgbGV2ZWwgN1xyXG4gICAgICBuZXcgRnJhY3Rpb25MZXZlbCggNywgNCwgQnVpbGRpbmdUeXBlLk5VTUJFUiwgRnJhY3Rpb25zQ29tbW9uQ29sb3JzLmxldmVsN1Byb3BlcnR5LCBGcmFjdGlvbkxldmVsLmxldmVsN051bWJlcnNNaXhlZCApLFxyXG4gICAgICAvLyBcIk1peGVkIE51bWJlcnNcIiBOdW1iZXJzIGxldmVsIDhcclxuICAgICAgbmV3IEZyYWN0aW9uTGV2ZWwoIDgsIDQsIEJ1aWxkaW5nVHlwZS5OVU1CRVIsIEZyYWN0aW9uc0NvbW1vbkNvbG9ycy5sZXZlbDhQcm9wZXJ0eSwgRnJhY3Rpb25MZXZlbC5sZXZlbDhOdW1iZXJzTWl4ZWQgKSxcclxuICAgICAgLy8gXCJNaXhlZCBOdW1iZXJzXCIgTnVtYmVycyBsZXZlbCA5XHJcbiAgICAgIG5ldyBGcmFjdGlvbkxldmVsKCA5LCA0LCBCdWlsZGluZ1R5cGUuTlVNQkVSLCBGcmFjdGlvbnNDb21tb25Db2xvcnMubGV2ZWw5UHJvcGVydHksIEZyYWN0aW9uTGV2ZWwubGV2ZWw5TnVtYmVyc01peGVkICksXHJcbiAgICAgIC8vIFwiTWl4ZWQgTnVtYmVyc1wiIE51bWJlcnMgbGV2ZWwgMTBcclxuICAgICAgbmV3IEZyYWN0aW9uTGV2ZWwoIDEwLCA0LCBCdWlsZGluZ1R5cGUuTlVNQkVSLCBGcmFjdGlvbnNDb21tb25Db2xvcnMubGV2ZWwxMFByb3BlcnR5LCBGcmFjdGlvbkxldmVsLmxldmVsMTBOdW1iZXJzTWl4ZWQgKVxyXG4gICAgXSA6IFtcclxuICAgICAgLy8gXCJCdWlsZCBhIEZyYWN0aW9uXCIgTnVtYmVycyBsZXZlbCAxXHJcbiAgICAgIG5ldyBGcmFjdGlvbkxldmVsKCAxLCAzLCBCdWlsZGluZ1R5cGUuTlVNQkVSLCBGcmFjdGlvbnNDb21tb25Db2xvcnMubGV2ZWwxUHJvcGVydHksIEZyYWN0aW9uTGV2ZWwubGV2ZWwxTnVtYmVycyApLFxyXG4gICAgICAvLyBcIkJ1aWxkIGEgRnJhY3Rpb25cIiBOdW1iZXJzIGxldmVsIDJcclxuICAgICAgbmV3IEZyYWN0aW9uTGV2ZWwoIDIsIDMsIEJ1aWxkaW5nVHlwZS5OVU1CRVIsIEZyYWN0aW9uc0NvbW1vbkNvbG9ycy5sZXZlbDJQcm9wZXJ0eSwgRnJhY3Rpb25MZXZlbC5sZXZlbDJOdW1iZXJzICksXHJcbiAgICAgIC8vIFwiQnVpbGQgYSBGcmFjdGlvblwiIE51bWJlcnMgbGV2ZWwgM1xyXG4gICAgICBuZXcgRnJhY3Rpb25MZXZlbCggMywgMywgQnVpbGRpbmdUeXBlLk5VTUJFUiwgRnJhY3Rpb25zQ29tbW9uQ29sb3JzLmxldmVsM1Byb3BlcnR5LCBGcmFjdGlvbkxldmVsLmxldmVsM051bWJlcnMgKSxcclxuICAgICAgLy8gXCJCdWlsZCBhIEZyYWN0aW9uXCIgTnVtYmVycyBsZXZlbCA0XHJcbiAgICAgIG5ldyBGcmFjdGlvbkxldmVsKCA0LCAzLCBCdWlsZGluZ1R5cGUuTlVNQkVSLCBGcmFjdGlvbnNDb21tb25Db2xvcnMubGV2ZWw0UHJvcGVydHksIEZyYWN0aW9uTGV2ZWwubGV2ZWw0TnVtYmVycyApLFxyXG4gICAgICAvLyBcIkJ1aWxkIGEgRnJhY3Rpb25cIiBOdW1iZXJzIGxldmVsIDVcclxuICAgICAgbmV3IEZyYWN0aW9uTGV2ZWwoIDUsIDMsIEJ1aWxkaW5nVHlwZS5OVU1CRVIsIEZyYWN0aW9uc0NvbW1vbkNvbG9ycy5sZXZlbDVQcm9wZXJ0eSwgRnJhY3Rpb25MZXZlbC5sZXZlbDVOdW1iZXJzICksXHJcbiAgICAgIC8vIFwiQnVpbGQgYSBGcmFjdGlvblwiIE51bWJlcnMgbGV2ZWwgNlxyXG4gICAgICBuZXcgRnJhY3Rpb25MZXZlbCggNiwgNCwgQnVpbGRpbmdUeXBlLk5VTUJFUiwgRnJhY3Rpb25zQ29tbW9uQ29sb3JzLmxldmVsNlByb3BlcnR5LCBGcmFjdGlvbkxldmVsLmxldmVsNk51bWJlcnMgKSxcclxuICAgICAgLy8gXCJCdWlsZCBhIEZyYWN0aW9uXCIgTnVtYmVycyBsZXZlbCA3XHJcbiAgICAgIG5ldyBGcmFjdGlvbkxldmVsKCA3LCA0LCBCdWlsZGluZ1R5cGUuTlVNQkVSLCBGcmFjdGlvbnNDb21tb25Db2xvcnMubGV2ZWw3UHJvcGVydHksIEZyYWN0aW9uTGV2ZWwubGV2ZWw3TnVtYmVycyApLFxyXG4gICAgICAvLyBcIkJ1aWxkIGEgRnJhY3Rpb25cIiBOdW1iZXJzIGxldmVsIDhcclxuICAgICAgbmV3IEZyYWN0aW9uTGV2ZWwoIDgsIDQsIEJ1aWxkaW5nVHlwZS5OVU1CRVIsIEZyYWN0aW9uc0NvbW1vbkNvbG9ycy5sZXZlbDhQcm9wZXJ0eSwgRnJhY3Rpb25MZXZlbC5sZXZlbDhOdW1iZXJzICksXHJcbiAgICAgIC8vIFwiQnVpbGQgYSBGcmFjdGlvblwiIE51bWJlcnMgbGV2ZWwgOVxyXG4gICAgICBuZXcgRnJhY3Rpb25MZXZlbCggOSwgNCwgQnVpbGRpbmdUeXBlLk5VTUJFUiwgRnJhY3Rpb25zQ29tbW9uQ29sb3JzLmxldmVsOVByb3BlcnR5LCBGcmFjdGlvbkxldmVsLmxldmVsOU51bWJlcnMgKSxcclxuICAgICAgLy8gXCJCdWlsZCBhIEZyYWN0aW9uXCIgTnVtYmVycyBsZXZlbCAxMFxyXG4gICAgICBuZXcgRnJhY3Rpb25MZXZlbCggMTAsIDQsIEJ1aWxkaW5nVHlwZS5OVU1CRVIsIEZyYWN0aW9uc0NvbW1vbkNvbG9ycy5sZXZlbDEwUHJvcGVydHksIEZyYWN0aW9uTGV2ZWwubGV2ZWwxME51bWJlcnMgKVxyXG4gICAgXTtcclxuICB9XHJcbn1cclxuXHJcbmZyYWN0aW9uc0NvbW1vbi5yZWdpc3RlciggJ0J1aWxkaW5nR2FtZU1vZGVsJywgQnVpbGRpbmdHYW1lTW9kZWwgKTtcclxuZXhwb3J0IGRlZmF1bHQgQnVpbGRpbmdHYW1lTW9kZWw7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGVBQWUsTUFBTSx3Q0FBd0M7QUFDcEUsT0FBT0MsZUFBZSxNQUFNLHdDQUF3QztBQUNwRSxPQUFPQyxPQUFPLE1BQU0sZ0NBQWdDO0FBQ3BELE9BQU9DLFFBQVEsTUFBTSxpQ0FBaUM7QUFDdEQsT0FBT0MsY0FBYyxNQUFNLDRDQUE0QztBQUN2RSxPQUFPQyxZQUFZLE1BQU0sc0NBQXNDO0FBQy9ELE9BQU9DLHdCQUF3QixNQUFNLDBDQUEwQztBQUMvRSxPQUFPQyxxQkFBcUIsTUFBTSw0Q0FBNEM7QUFDOUUsT0FBT0MsZUFBZSxNQUFNLDBCQUEwQjtBQUN0RCxPQUFPQyxpQkFBaUIsTUFBTSx3QkFBd0I7QUFDdEQsT0FBT0MsYUFBYSxNQUFNLG9CQUFvQjtBQUU5QyxNQUFNQyxpQkFBaUIsQ0FBQztFQUN0QjtBQUNGO0FBQ0E7RUFDRUMsV0FBV0EsQ0FBRUMs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