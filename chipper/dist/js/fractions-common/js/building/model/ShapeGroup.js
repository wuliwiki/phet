// Copyright 2018-2022, University of Colorado Boulder

/**
 * Represents a (growing/shrinking) set of ShapeContainers, so that it can hold arbitrary mixed fraction
 * representations. Each container can hold shape pieces, and can add up to at most 1.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import createObservableArray from '../../../../axon/js/createObservableArray.js';
import NumberProperty from '../../../../axon/js/NumberProperty.js';
import Range from '../../../../dot/js/Range.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import merge from '../../../../phet-core/js/merge.js';
import Fraction from '../../../../phetcommon/js/model/Fraction.js';
import FractionsCommonConstants from '../../common/FractionsCommonConstants.js';
import fractionsCommon from '../../fractionsCommon.js';
import BuildingRepresentation from './BuildingRepresentation.js';
import BuildingType from './BuildingType.js';
import Group from './Group.js';
import ShapeContainer from './ShapeContainer.js';
class ShapeGroup extends Group {
  /**
   * @param {BuildingRepresentation} representation
   * @param {Object} [options}]
   */
  constructor(representation, options) {
    options = merge({
      returnPieceListener: null,
      // {number} - The maximum number of containers. Should be at least 1
      maxContainers: FractionsCommonConstants.MAX_SHAPE_CONTAINERS
    }, options);
    super(BuildingType.SHAPE);
    assert && assert(_.includes(BuildingRepresentation.VALUES, representation));
    assert && assert(typeof options.maxContainers === 'number' && options.maxContainers >= 1);

    // @public {BuildingRepresentation}
    this.representation = representation;

    // @public {number}
    this.maxContainers = options.maxContainers;

    // @private {function}
    this.returnPieceListener = options.returnPieceListener;

    // @public {ObservableArrayDef.<ShapeContainer>} - Should generally only be popped/pushed
    this.shapeContainers = createObservableArray();

    // @public {Property.<number>}
    this.partitionDenominatorProperty = new NumberProperty(1, {
      range: new Range(1, 8),
      numberType: 'Integer'
    });
    this.shapeContainers.addItemAddedListener(() => this.changedEmitter.emit());
    this.shapeContainers.addItemRemovedListener(() => this.changedEmitter.emit());

    // Always want at least one container
    this.increaseContainerCount();
  }

  /**
   * The current "amount" of the entire group
   * @public
   * @override
   *
   * @returns {Fraction}
   */
  get totalFraction() {
    return this.shapeContainers.reduce((fraction, shapeContainer) => fraction.plus(shapeContainer.totalFractionProperty.value), new Fraction(0, 1));
  }

  /**
   * The center positions of every "container" in the group.
   * @public
   * @override
   *
   * @returns {Array.<Vector2>}
   */
  get centerPoints() {
    return this.shapeContainers.map(shapeContainer => this.positionProperty.value.plus(shapeContainer.offset));
  }

  /**
   * Clears some associated temporary properties (that isn't a full reset), particularly before it is pulled from a
   * stack.
   * @public
   * @override
   */
  clear() {
    this.partitionDenominatorProperty.reset();
    super.clear();
  }

  /**
   * Whether this group contains any pieces.
   * @public
   * @override
   *
   * @returns {boolean}
   */
  hasAnyPieces() {
    for (let i = 0; i < this.shapeContainers.length; i++) {
      if (this.shapeContainers.get(i).shapePieces.length) {
        return true;
      }
    }
    return false;
  }

  /**
   * Adds a container.
   * @public
   */
  increaseContainerCount() {
    const offset = new Vector2(this.shapeContainers.length * (FractionsCommonConstants.SHAPE_SIZE + FractionsCommonConstants.SHAPE_CONTAINER_PADDING), 0);
    this.shapeContainers.push(new ShapeContainer(this, this.partitionDenominatorProperty, this.representation, this.changedEmitter, offset));
  }

  /**
   * Removes the most-recently-added container
   * @public
   */
  decreaseContainerCount() {
    while (this.shapeContainers.length && this.shapeContainers.get(this.shapeContainers.length - 1).shapePieces.length) {
      this.returnPieceListener();
    }
    this.shapeContainers.pop();
  }
}
fractionsCommon.register('ShapeGroup', ShapeGroup);
export default ShapeGroup;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjcmVhdGVPYnNlcnZhYmxlQXJyYXkiLCJOdW1iZXJQcm9wZXJ0eSIsIlJhbmdlIiwiVmVjdG9yMiIsIm1lcmdlIiwiRnJhY3Rpb24iLCJGcmFjdGlvbnNDb21tb25Db25zdGFudHMiLCJmcmFjdGlvbnNDb21tb24iLCJCdWlsZGluZ1JlcHJlc2VudGF0aW9uIiwiQnVpbGRpbmdUeXBlIiwiR3JvdXAiLCJTaGFwZUNvbnRhaW5lciIsIlNoYXBlR3JvdXAiLCJjb25zdHJ1Y3RvciIsInJlcHJlc2VudGF0aW9uIiwib3B0aW9ucyIsInJldHVyblBpZWNlTGlzdGVuZXIiLCJtYXhDb250YWluZXJzIiwiTUFYX1NIQVBFX0NPTlRBSU5FUlMiLCJTSEFQRSIsImFzc2VydCIsIl8iLCJpbmNsdWRlcyIsIlZBTFVFUyIsInNoYXBlQ29udGFpbmVycyIsInBhcnRpdGlvbkRlbm9taW5hdG9yUHJvcGVydHkiLCJyYW5nZSIsIm51bWJlclR5cGUiLCJhZGRJdGVtQWRkZWRMaXN0ZW5lciIsImNoYW5nZWRFbWl0dGVyIiwiZW1pdCIsImFkZEl0ZW1SZW1vdmVkTGlzdGVuZXIiLCJpbmNyZWFzZUNvbnRhaW5lckNvdW50IiwidG90YWxGcmFjdGlvbiIsInJlZHVjZSIsImZyYWN0aW9uIiwic2hhcGVDb250YWluZXIiLCJwbHVzIiwidG90YWxGcmFjdGlvblByb3BlcnR5IiwidmFsdWUiLCJjZW50ZXJQb2ludHMiLCJtYXAiLCJwb3NpdGlvblByb3BlcnR5Iiwib2Zmc2V0IiwiY2xlYXIiLCJyZXNldCIsImhhc0FueVBpZWNlcyIsImkiLCJsZW5ndGgiLCJnZXQiLCJzaGFwZVBpZWNlcyIsIlNIQVBFX1NJWkUiLCJTSEFQRV9DT05UQUlORVJfUEFERElORyIsInB1c2giLCJkZWNyZWFzZUNvbnRhaW5lckNvdW50IiwicG9wIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJTaGFwZUdyb3VwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE4LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYSAoZ3Jvd2luZy9zaHJpbmtpbmcpIHNldCBvZiBTaGFwZUNvbnRhaW5lcnMsIHNvIHRoYXQgaXQgY2FuIGhvbGQgYXJiaXRyYXJ5IG1peGVkIGZyYWN0aW9uXHJcbiAqIHJlcHJlc2VudGF0aW9ucy4gRWFjaCBjb250YWluZXIgY2FuIGhvbGQgc2hhcGUgcGllY2VzLCBhbmQgY2FuIGFkZCB1cCB0byBhdCBtb3N0IDEuXHJcbiAqXHJcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cclxuICovXHJcblxyXG5pbXBvcnQgY3JlYXRlT2JzZXJ2YWJsZUFycmF5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvY3JlYXRlT2JzZXJ2YWJsZUFycmF5LmpzJztcclxuaW1wb3J0IE51bWJlclByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvTnVtYmVyUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgUmFuZ2UgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1JhbmdlLmpzJztcclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgbWVyZ2UgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL21lcmdlLmpzJztcclxuaW1wb3J0IEZyYWN0aW9uIGZyb20gJy4uLy4uLy4uLy4uL3BoZXRjb21tb24vanMvbW9kZWwvRnJhY3Rpb24uanMnO1xyXG5pbXBvcnQgRnJhY3Rpb25zQ29tbW9uQ29uc3RhbnRzIGZyb20gJy4uLy4uL2NvbW1vbi9GcmFjdGlvbnNDb21tb25Db25zdGFudHMuanMnO1xyXG5pbXBvcnQgZnJhY3Rpb25zQ29tbW9uIGZyb20gJy4uLy4uL2ZyYWN0aW9uc0NvbW1vbi5qcyc7XHJcbmltcG9ydCBCdWlsZGluZ1JlcHJlc2VudGF0aW9uIGZyb20gJy4vQnVpbGRpbmdSZXByZXNlbnRhdGlvbi5qcyc7XHJcbmltcG9ydCBCdWlsZGluZ1R5cGUgZnJvbSAnLi9CdWlsZGluZ1R5cGUuanMnO1xyXG5pbXBvcnQgR3JvdXAgZnJvbSAnLi9Hcm91cC5qcyc7XHJcbmltcG9ydCBTaGFwZUNvbnRhaW5lciBmcm9tICcuL1NoYXBlQ29udGFpbmVyLmpzJztcclxuXHJcbmNsYXNzIFNoYXBlR3JvdXAgZXh0ZW5kcyBHcm91cCB7XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtCdWlsZGluZ1JlcHJlc2VudGF0aW9ufSByZXByZXNlbnRhdGlvblxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc31dXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIHJlcHJlc2VudGF0aW9uLCBvcHRpb25zICkge1xyXG4gICAgb3B0aW9ucyA9IG1lcmdlKCB7XHJcbiAgICAgIHJldHVyblBpZWNlTGlzdGVuZXI6IG51bGwsXHJcblxyXG4gICAgICAvLyB7bnVtYmVyfSAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBjb250YWluZXJzLiBTaG91bGQgYmUgYXQgbGVhc3QgMVxyXG4gICAgICBtYXhDb250YWluZXJzOiBGcmFjdGlvbnNDb21tb25Db25zdGFudHMuTUFYX1NIQVBFX0NPTlRBSU5FUlNcclxuICAgIH0sIG9wdGlvbnMgKTtcclxuXHJcbiAgICBzdXBlciggQnVpbGRpbmdUeXBlLlNIQVBFICk7XHJcblxyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggXy5pbmNsdWRlcyggQnVpbGRpbmdSZXByZXNlbnRhdGlvbi5WQUxVRVMsIHJlcHJlc2VudGF0aW9uICkgKTtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIHR5cGVvZiBvcHRpb25zLm1heENvbnRhaW5lcnMgPT09ICdudW1iZXInICYmIG9wdGlvbnMubWF4Q29udGFpbmVycyA+PSAxICk7XHJcblxyXG4gICAgLy8gQHB1YmxpYyB7QnVpbGRpbmdSZXByZXNlbnRhdGlvbn1cclxuICAgIHRoaXMucmVwcmVzZW50YXRpb24gPSByZXByZXNlbnRhdGlvbjtcclxuXHJcbiAgICAvLyBAcHVibGljIHtudW1iZXJ9XHJcbiAgICB0aGlzLm1heENvbnRhaW5lcnMgPSBvcHRpb25zLm1heENvbnRhaW5lcnM7XHJcblxyXG4gICAgLy8gQHByaXZhdGUge2Z1bmN0aW9ufVxyXG4gICAgdGhpcy5yZXR1cm5QaWVjZUxpc3RlbmVyID0gb3B0aW9ucy5yZXR1cm5QaWVjZUxpc3RlbmVyO1xyXG5cclxuICAgIC8vIEBwdWJsaWMge09ic2VydmFibGVBcnJheURlZi48U2hhcGVDb250YWluZXI+fSAtIFNob3VsZCBnZW5lcmFsbHkgb25seSBiZSBwb3BwZWQvcHVzaGVkXHJcbiAgICB0aGlzLnNoYXBlQ29udGFpbmVycyA9IGNyZWF0ZU9ic2VydmFibGVBcnJheSgpO1xyXG5cclxuICAgIC8vIEBwdWJsaWMge1Byb3BlcnR5LjxudW1iZXI+fVxyXG4gICAgdGhpcy5wYXJ0aXRpb25EZW5vbWluYXRvclByb3BlcnR5ID0gbmV3IE51bWJlclByb3BlcnR5KCAxLCB7XHJcbiAgICAgIHJhbmdlOiBuZXcgUmFuZ2UoIDEsIDggKSxcclxuICAgICAgbnVtYmVyVHlwZTogJ0ludGVnZXInXHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5zaGFwZUNvbnRhaW5lcnMuYWRkSXRlbUFkZGVkTGlzdGVuZXIoICgpID0+IHRoaXMuY2hhbmdlZEVtaXR0ZXIuZW1pdCgpICk7XHJcbiAgICB0aGlzLnNoYXBlQ29udGFpbmVycy5hZGRJdGVtUmVtb3ZlZExpc3RlbmVyKCAoKSA9PiB0aGlzLmNoYW5nZWRFbWl0dGVyLmVtaXQoKSApO1xyXG5cclxuICAgIC8vIEFsd2F5cyB3YW50IGF0IGxlYXN0IG9uZSBjb250YWluZXJcclxuICAgIHRoaXMuaW5jcmVhc2VDb250YWluZXJDb3VudCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGN1cnJlbnQgXCJhbW91bnRcIiBvZiB0aGUgZW50aXJlIGdyb3VwXHJcbiAgICogQHB1YmxpY1xyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqXHJcbiAgICogQHJldHVybnMge0ZyYWN0aW9ufVxyXG4gICAqL1xyXG4gIGdldCB0b3RhbEZyYWN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuc2hhcGVDb250YWluZXJzLnJlZHVjZSggKCBmcmFjdGlvbiwgc2hhcGVDb250YWluZXIgKSA9PiBmcmFjdGlvbi5wbHVzKCBzaGFwZUNvbnRhaW5lci50b3RhbEZyYWN0aW9uUHJvcGVydHkudmFsdWUgKSwgbmV3IEZyYWN0aW9uKCAwLCAxICkgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBjZW50ZXIgcG9zaXRpb25zIG9mIGV2ZXJ5IFwiY29udGFpbmVyXCIgaW4gdGhlIGdyb3VwLlxyXG4gICAqIEBwdWJsaWNcclxuICAgKiBAb3ZlcnJpZGVcclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHtBcnJheS48VmVjdG9yMj59XHJcbiAgICovXHJcbiAgZ2V0IGNlbnRlclBvaW50cygpIHtcclxuICAgIHJldHVybiB0aGlzLnNoYXBlQ29udGFpbmVycy5tYXAoIHNoYXBlQ29udGFpbmVyID0+IHRoaXMucG9zaXRpb25Qcm9wZXJ0eS52YWx1ZS5wbHVzKCBzaGFwZUNvbnRhaW5lci5vZmZzZXQgKSApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2xlYXJzIHNvbWUgYXNzb2NpYXRlZCB0ZW1wb3JhcnkgcHJvcGVydGllcyAodGhhdCBpc24ndCBhIGZ1bGwgcmVzZXQpLCBwYXJ0aWN1bGFybHkgYmVmb3JlIGl0IGlzIHB1bGxlZCBmcm9tIGFcclxuICAgKiBzdGFjay5cclxuICAgKiBAcHVibGljXHJcbiAgICogQG92ZXJyaWRlXHJcbiAgICovXHJcbiAgY2xlYXIoKSB7XHJcbiAgICB0aGlzLnBhcnRpdGlvbkRlbm9taW5hdG9yUHJvcGVydHkucmVzZXQoKTtcclxuXHJcbiAgICBzdXBlci5jbGVhcigpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogV2hldGhlciB0aGlzIGdyb3VwIGNvbnRhaW5zIGFueSBwaWVjZXMuXHJcbiAgICogQHB1YmxpY1xyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqXHJcbiAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICovXHJcbiAgaGFzQW55UGllY2VzKCkge1xyXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgdGhpcy5zaGFwZUNvbnRhaW5lcnMubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgIGlmICggdGhpcy5zaGFwZUNvbnRhaW5lcnMuZ2V0KCBpICkuc2hhcGVQaWVjZXMubGVuZ3RoICkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGRzIGEgY29udGFpbmVyLlxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBpbmNyZWFzZUNvbnRhaW5lckNvdW50KCkge1xyXG4gICAgY29uc3Qgb2Zmc2V0ID0gbmV3IFZlY3RvcjIoIHRoaXMuc2hhcGVDb250YWluZXJzLmxlbmd0aCAqICggRnJhY3Rpb25zQ29tbW9uQ29uc3RhbnRzLlNIQVBFX1NJWkUgKyBGcmFjdGlvbnNDb21tb25Db25zdGFudHMuU0hBUEVfQ09OVEFJTkVSX1BBRERJTkcgKSwgMCApO1xyXG4gICAgdGhpcy5zaGFwZUNvbnRhaW5lcnMucHVzaCggbmV3IFNoYXBlQ29udGFpbmVyKCB0aGlzLCB0aGlzLnBhcnRpdGlvbkRlbm9taW5hdG9yUHJvcGVydHksIHRoaXMucmVwcmVzZW50YXRpb24sIHRoaXMuY2hhbmdlZEVtaXR0ZXIsIG9mZnNldCApICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIHRoZSBtb3N0LXJlY2VudGx5LWFkZGVkIGNvbnRhaW5lclxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBkZWNyZWFzZUNvbnRhaW5lckNvdW50KCkge1xyXG4gICAgd2hpbGUgKCB0aGlzLnNoYXBlQ29udGFpbmVycy5sZW5ndGggJiYgdGhpcy5zaGFwZUNvbnRhaW5lcnMuZ2V0KCB0aGlzLnNoYXBlQ29udGFpbmVycy5sZW5ndGggLSAxICkuc2hhcGVQaWVjZXMubGVuZ3RoICkge1xyXG4gICAgICB0aGlzLnJldHVyblBpZWNlTGlzdGVuZXIoKTtcclxuICAgIH1cclxuICAgIHRoaXMuc2hhcGVDb250YWluZXJzLnBvcCgpO1xyXG4gIH1cclxufVxyXG5cclxuZnJhY3Rpb25zQ29tbW9uLnJlZ2lzdGVyKCAnU2hhcGVHcm91cCcsIFNoYXBlR3JvdXAgKTtcclxuZXhwb3J0IGRlZmF1bHQgU2hhcGVHcm91cDtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EscUJBQXFCLE1BQU0sOENBQThDO0FBQ2hGLE9BQU9DLGNBQWMsTUFBTSx1Q0FBdUM7QUFDbEUsT0FBT0MsS0FBSyxNQUFNLDZCQUE2QjtBQUMvQyxPQUFPQyxPQUFPLE1BQU0sK0JBQStCO0FBQ25ELE9BQU9DLEtBQUssTUFBTSxtQ0FBbUM7QUFDckQsT0FBT0MsUUFBUSxNQUFNLDZDQUE2QztBQUNsRSxPQUFPQyx3QkFBd0IsTUFBTSwwQ0FBMEM7QUFDL0UsT0FBT0MsZUFBZSxNQUFNLDBCQUEwQjtBQUN0RCxPQUFPQyxzQkFBc0IsTUFBTSw2QkFBNkI7QUFDaEUsT0FBT0MsWUFBWSxNQUFNLG1CQUFtQjtBQUM1QyxPQUFPQyxLQUFLLE1BQU0sWUFBWTtBQUM5QixPQUFPQyxjQUFjLE1BQU0scUJBQXFCO0FBRWhELE1BQU1DLFVBQVUsU0FBU0YsS0FBSyxDQUFDO0VBQzdCO0FBQ0Y7QUFDQTtBQUNBO0VBQ0VHLFdBQVdBLENBQUVDLGNBQWMsRUFBRUMsT0FBTyxFQUFHO0lBQ3JDQSxPQUFPLEdBQUdYLEtBQUssQ0FBRTtNQUNmWSxtQkFBbUIsRUFBRSxJQUFJO01BRXpCO01BQ0FDLGFBQWEsRUFBRVgsd0JBQXdCLENBQUNZO0lBQzFDLENBQUMsRUFBRUgsT0FBUSxDQUFDO0lBRVosS0FBSyxDQUFFTixZQUFZLENBQUNVLEtB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