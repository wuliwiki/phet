// Copyright 2014-2021, University of Colorado Boulder

/**
 * A motion strategy that has a particle wander around for a while and then fade out of existence.
 *
 * @author John Blanco
 * @author Sharfudeen Ashraf (for Ghent University)
 */

import dotRandom from '../../../../dot/js/dotRandom.js';
import neuron from '../../neuron.js';
import NeuronConstants from '../common/NeuronConstants.js';
import MotionStrategy from './MotionStrategy.js';
import TimedFadeAwayStrategy from './TimedFadeAwayStrategy.js';

// constants
const CLOCK_TICKS_BEFORE_POSITION_UPDATE = 5;
const CLOCK_TICKS_BEFORE_VELOCITY_UPDATE = CLOCK_TICKS_BEFORE_POSITION_UPDATE * 20;
const POSITION_UPDATE_PERIOD = NeuronConstants.DEFAULT_ACTION_POTENTIAL_CLOCK_DT * CLOCK_TICKS_BEFORE_POSITION_UPDATE;
const VELOCITY_UPDATE_PERIOD = NeuronConstants.DEFAULT_ACTION_POTENTIAL_CLOCK_DT * CLOCK_TICKS_BEFORE_VELOCITY_UPDATE;
const MIN_VELOCITY = 1000; // In nanometers per second of sim time.
const MAX_VELOCITY = 5000; // In nanometers per second of sim time.

const RAND = {
  nextInt: bounds => Math.floor(dotRandom.nextDouble() * bounds)
};
class WanderAwayThenFadeMotionStrategy extends MotionStrategy {
  /**
   * @param {Vector2} awayPoint - Point that should be moved away from.
   * @param {number} currentPositionX - Starting x position
   * @param {number} currentPositionY - Starting y position
   * @param {number} preFadeTime     - Time before fade out starts, in sim time
   * @param {number} fadeOutDuration - Time of fade out
   */
  constructor(awayPoint, currentPositionX, currentPositionY, preFadeTime, fadeOutDuration) {
    super();
    this.awayPoint = awayPoint;
    this.preFadeCountdownTimer = preFadeTime;
    this.fadeOutDuration = fadeOutDuration;

    // Set up random offsets so that all the particles using this motion strategy don't all get updated at the same time.
    this.motionUpdateCountdownTimer = RAND.nextInt(CLOCK_TICKS_BEFORE_POSITION_UPDATE) * NeuronConstants.DEFAULT_ACTION_POTENTIAL_CLOCK_DT;
    this.velocityUpdateCountdownTimer = RAND.nextInt(CLOCK_TICKS_BEFORE_VELOCITY_UPDATE) * NeuronConstants.DEFAULT_ACTION_POTENTIAL_CLOCK_DT;
    this.velocityX = 0;
    this.velocityY = 0;

    // Set an initial velocity and direction.
    this.updateVelocity(currentPositionX, currentPositionY);
  }

  // @public, @override
  move(movableModelElement, fadableModelElement, dt) {
    this.motionUpdateCountdownTimer -= dt;
    if (this.motionUpdateCountdownTimer <= 0) {
      // Time to update the motion.
      movableModelElement.setPosition(movableModelElement.getPositionX() + this.velocityX * POSITION_UPDATE_PERIOD, movableModelElement.getPositionY() + this.velocityY * POSITION_UPDATE_PERIOD);
      this.motionUpdateCountdownTimer = POSITION_UPDATE_PERIOD;
    }
    this.velocityUpdateCountdownTimer -= dt;
    if (this.velocityUpdateCountdownTimer <= 0) {
      // Time to update the velocity.
      this.updateVelocity(movableModelElement.getPositionX(), movableModelElement.getPositionY());
      this.velocityUpdateCountdownTimer = VELOCITY_UPDATE_PERIOD;
    }
    if (this.preFadeCountdownTimer >= 0) {
      this.preFadeCountdownTimer -= dt;
      if (this.preFadeCountdownTimer <= 0) {
        // Time to start the fade out.
        fadableModelElement.setFadeStrategy(new TimedFadeAwayStrategy(this.fadeOutDuration));
      }
    }
  }

  // @private
  updateVelocity(currentPositionX, currentPositionY) {
    // Create a velocity vector that causes this to move away from the "away point".
    const awayAngle = Math.atan2(currentPositionY - this.awayPoint.y, currentPositionX - this.awayPoint.x) + (dotRandom.nextDouble() - 0.5) * Math.PI;
    const newScalerVelocity = MIN_VELOCITY + dotRandom.nextDouble() * (MAX_VELOCITY - MIN_VELOCITY);
    this.velocityX = newScalerVelocity * Math.cos(awayAngle);
    this.velocityY = newScalerVelocity * Math.sin(awayAngle);
  }
}
neuron.register('WanderAwayThenFadeMotionStrategy', WanderAwayThenFadeMotionStrategy);
export default WanderAwayThenFadeMotionStrategy;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3RSYW5kb20iLCJuZXVyb24iLCJOZXVyb25Db25zdGFudHMiLCJNb3Rpb25TdHJhdGVneSIsIlRpbWVkRmFkZUF3YXlTdHJhdGVneSIsIkNMT0NLX1RJQ0tTX0JFRk9SRV9QT1NJVElPTl9VUERBVEUiLCJDTE9DS19USUNLU19CRUZPUkVfVkVMT0NJVFlfVVBEQVRFIiwiUE9TSVRJT05fVVBEQVRFX1BFUklPRCIsIkRFRkFVTFRfQUNUSU9OX1BPVEVOVElBTF9DTE9DS19EVCIsIlZFTE9DSVRZX1VQREFURV9QRVJJT0QiLCJNSU5fVkVMT0NJVFkiLCJNQVhfVkVMT0NJVFkiLCJSQU5EIiwibmV4dEludCIsImJvdW5kcyIsIk1hdGgiLCJmbG9vciIsIm5leHREb3VibGUiLCJXYW5kZXJBd2F5VGhlbkZhZGVNb3Rpb25TdHJhdGVneSIsImNvbnN0cnVjdG9yIiwiYXdheVBvaW50IiwiY3VycmVudFBvc2l0aW9uWCIsImN1cnJlbnRQb3NpdGlvblkiLCJwcmVGYWRlVGltZSIsImZhZGVPdXREdXJhdGlvbiIsInByZUZhZGVDb3VudGRvd25UaW1lciIsIm1vdGlvblVwZGF0ZUNvdW50ZG93blRpbWVyIiwidmVsb2NpdHlVcGRhdGVDb3VudGRvd25UaW1lciIsInZlbG9jaXR5WCIsInZlbG9jaXR5WSIsInVwZGF0ZVZlbG9jaXR5IiwibW92ZSIsIm1vdmFibGVNb2RlbEVsZW1lbnQiLCJmYWRhYmxlTW9kZWxFbGVtZW50IiwiZHQiLCJzZXRQb3NpdGlvbiIsImdldFBvc2l0aW9uWCIsImdldFBvc2l0aW9uWSIsInNldEZhZGVTdHJhdGVneSIsImF3YXlBbmdsZSIsImF0YW4yIiwieSIsIngiLCJQSSIsIm5ld1NjYWxlclZlbG9jaXR5IiwiY29zIiwic2luIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJXYW5kZXJBd2F5VGhlbkZhZGVNb3Rpb25TdHJhdGVneS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNC0yMDIxLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBBIG1vdGlvbiBzdHJhdGVneSB0aGF0IGhhcyBhIHBhcnRpY2xlIHdhbmRlciBhcm91bmQgZm9yIGEgd2hpbGUgYW5kIHRoZW4gZmFkZSBvdXQgb2YgZXhpc3RlbmNlLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvaG4gQmxhbmNvXHJcbiAqIEBhdXRob3IgU2hhcmZ1ZGVlbiBBc2hyYWYgKGZvciBHaGVudCBVbml2ZXJzaXR5KVxyXG4gKi9cclxuXHJcbmltcG9ydCBkb3RSYW5kb20gZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL2RvdFJhbmRvbS5qcyc7XHJcbmltcG9ydCBuZXVyb24gZnJvbSAnLi4vLi4vbmV1cm9uLmpzJztcclxuaW1wb3J0IE5ldXJvbkNvbnN0YW50cyBmcm9tICcuLi9jb21tb24vTmV1cm9uQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IE1vdGlvblN0cmF0ZWd5IGZyb20gJy4vTW90aW9uU3RyYXRlZ3kuanMnO1xyXG5pbXBvcnQgVGltZWRGYWRlQXdheVN0cmF0ZWd5IGZyb20gJy4vVGltZWRGYWRlQXdheVN0cmF0ZWd5LmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBDTE9DS19USUNLU19CRUZPUkVfUE9TSVRJT05fVVBEQVRFID0gNTtcclxuY29uc3QgQ0xPQ0tfVElDS1NfQkVGT1JFX1ZFTE9DSVRZX1VQREFURSA9IENMT0NLX1RJQ0tTX0JFRk9SRV9QT1NJVElPTl9VUERBVEUgKiAyMDtcclxuY29uc3QgUE9TSVRJT05fVVBEQVRFX1BFUklPRCA9IE5ldXJvbkNvbnN0YW50cy5ERUZBVUxUX0FDVElPTl9QT1RFTlRJQUxfQ0xPQ0tfRFQgKiBDTE9DS19USUNLU19CRUZPUkVfUE9TSVRJT05fVVBEQVRFO1xyXG5jb25zdCBWRUxPQ0lUWV9VUERBVEVfUEVSSU9EID0gTmV1cm9uQ29uc3RhbnRzLkRFRkFVTFRfQUNUSU9OX1BPVEVOVElBTF9DTE9DS19EVCAqIENMT0NLX1RJQ0tTX0JFRk9SRV9WRUxPQ0lUWV9VUERBVEU7XHJcbmNvbnN0IE1JTl9WRUxPQ0lUWSA9IDEwMDA7ICAvLyBJbiBuYW5vbWV0ZXJzIHBlciBzZWNvbmQgb2Ygc2ltIHRpbWUuXHJcbmNvbnN0IE1BWF9WRUxPQ0lUWSA9IDUwMDA7IC8vIEluIG5hbm9tZXRlcnMgcGVyIHNlY29uZCBvZiBzaW0gdGltZS5cclxuXHJcbmNvbnN0IFJBTkQgPSB7XHJcbiAgbmV4dEludDogYm91bmRzID0+IE1hdGguZmxvb3IoIGRvdFJhbmRvbS5uZXh0RG91YmxlKCkgKiBib3VuZHMgKVxyXG59O1xyXG5cclxuY2xhc3MgV2FuZGVyQXdheVRoZW5GYWRlTW90aW9uU3RyYXRlZ3kgZXh0ZW5kcyBNb3Rpb25TdHJhdGVneSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7VmVjdG9yMn0gYXdheVBvaW50IC0gUG9pbnQgdGhhdCBzaG91bGQgYmUgbW92ZWQgYXdheSBmcm9tLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjdXJyZW50UG9zaXRpb25YIC0gU3RhcnRpbmcgeCBwb3NpdGlvblxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjdXJyZW50UG9zaXRpb25ZIC0gU3RhcnRpbmcgeSBwb3NpdGlvblxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwcmVGYWRlVGltZSAgICAgLSBUaW1lIGJlZm9yZSBmYWRlIG91dCBzdGFydHMsIGluIHNpbSB0aW1lXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGZhZGVPdXREdXJhdGlvbiAtIFRpbWUgb2YgZmFkZSBvdXRcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvciggYXdheVBvaW50LCBjdXJyZW50UG9zaXRpb25YLCBjdXJyZW50UG9zaXRpb25ZLCBwcmVGYWRlVGltZSwgZmFkZU91dER1cmF0aW9uICkge1xyXG5cclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLmF3YXlQb2ludCA9IGF3YXlQb2ludDtcclxuICAgIHRoaXMucHJlRmFkZUNvdW50ZG93blRpbWVyID0gcHJlRmFkZVRpbWU7XHJcbiAgICB0aGlzLmZhZGVPdXREdXJhdGlvbiA9IGZhZGVPdXREdXJhdGlvbjtcclxuXHJcbiAgICAvLyBTZXQgdXAgcmFuZG9tIG9mZnNldHMgc28gdGhhdCBhbGwgdGhlIHBhcnRpY2xlcyB1c2luZyB0aGlzIG1vdGlvbiBzdHJhdGVneSBkb24ndCBhbGwgZ2V0IHVwZGF0ZWQgYXQgdGhlIHNhbWUgdGltZS5cclxuICAgIHRoaXMubW90aW9uVXBkYXRlQ291bnRkb3duVGltZXIgPSBSQU5ELm5leHRJbnQoIENMT0NLX1RJQ0tTX0JFRk9SRV9QT1NJVElPTl9VUERBVEUgKSAqIE5ldXJvbkNvbnN0YW50cy5ERUZBVUxUX0FDVElPTl9QT1RFTlRJQUxfQ0xPQ0tfRFQ7XHJcbiAgICB0aGlzLnZlbG9jaXR5VXBkYXRlQ291bnRkb3duVGltZXIgPSBSQU5ELm5leHRJbnQoIENMT0NLX1RJQ0tTX0JFRk9SRV9WRUxPQ0lUWV9VUERBVEUgKSAqIE5ldXJvbkNvbnN0YW50cy5ERUZBVUxUX0FDVElPTl9QT1RFTlRJQUxfQ0xPQ0tfRFQ7XHJcblxyXG4gICAgdGhpcy52ZWxvY2l0eVggPSAwO1xyXG4gICAgdGhpcy52ZWxvY2l0eVkgPSAwO1xyXG5cclxuICAgIC8vIFNldCBhbiBpbml0aWFsIHZlbG9jaXR5IGFuZCBkaXJlY3Rpb24uXHJcbiAgICB0aGlzLnVwZGF0ZVZlbG9jaXR5KCBjdXJyZW50UG9zaXRpb25YLCBjdXJyZW50UG9zaXRpb25ZICk7XHJcbiAgfVxyXG5cclxuICAvLyBAcHVibGljLCBAb3ZlcnJpZGVcclxuICBtb3ZlKCBtb3ZhYmxlTW9kZWxFbGVtZW50LCBmYWRhYmxlTW9kZWxFbGVtZW50LCBkdCApIHtcclxuXHJcbiAgICB0aGlzLm1vdGlvblVwZGF0ZUNvdW50ZG93blRpbWVyIC09IGR0O1xyXG4gICAgaWYgKCB0aGlzLm1vdGlvblVwZGF0ZUNvdW50ZG93blRpbWVyIDw9IDAgKSB7XHJcbiAgICAgIC8vIFRpbWUgdG8gdXBkYXRlIHRoZSBtb3Rpb24uXHJcbiAgICAgIG1vdmFibGVNb2RlbEVsZW1lbnQuc2V0UG9zaXRpb24oXHJcbiAgICAgICAgbW92YWJsZU1vZGVsRWxlbWVudC5nZXRQb3NpdGlvblgoKSArIHRoaXMudmVsb2NpdHlYICogUE9TSVRJT05fVVBEQVRFX1BFUklPRCxcclxuICAgICAgICBtb3ZhYmxlTW9kZWxFbGVtZW50LmdldFBvc2l0aW9uWSgpICsgdGhpcy52ZWxvY2l0eVkgKiBQT1NJVElPTl9VUERBVEVfUEVSSU9EICk7XHJcblxyXG4gICAgICB0aGlzLm1vdGlvblVwZGF0ZUNvdW50ZG93blRpbWVyID0gUE9TSVRJT05fVVBEQVRFX1BFUklPRDtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnZlbG9jaXR5VXBkYXRlQ291bnRkb3duVGltZXIgLT0gZHQ7XHJcbiAgICBpZiAoIHRoaXMudmVsb2NpdHlVcGRhdGVDb3VudGRvd25UaW1lciA8PSAwICkge1xyXG4gICAgICAvLyBUaW1lIHRvIHVwZGF0ZSB0aGUgdmVsb2NpdHkuXHJcbiAgICAgIHRoaXMudXBkYXRlVmVsb2NpdHkoIG1vdmFibGVNb2RlbEVsZW1lbnQuZ2V0UG9zaXRpb25YKCksIG1vdmFibGVNb2RlbEVsZW1lbnQuZ2V0UG9zaXRpb25ZKCkgKTtcclxuICAgICAgdGhpcy52ZWxvY2l0eVVwZGF0ZUNvdW50ZG93blRpbWVyID0gVkVMT0NJVFlfVVBEQVRFX1BFUklPRDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIHRoaXMucHJlRmFkZUNvdW50ZG93blRpbWVyID49IDAgKSB7XHJcbiAgICAgIHRoaXMucHJlRmFkZUNvdW50ZG93blRpbWVyIC09IGR0O1xyXG4gICAgICBpZiAoIHRoaXMucHJlRmFkZUNvdW50ZG93blRpbWVyIDw9IDAgKSB7XHJcbiAgICAgICAgLy8gVGltZSB0byBzdGFydCB0aGUgZmFkZSBvdXQuXHJcbiAgICAgICAgZmFkYWJsZU1vZGVsRWxlbWVudC5zZXRGYWRlU3RyYXRlZ3koIG5ldyBUaW1lZEZhZGVBd2F5U3RyYXRlZ3koIHRoaXMuZmFkZU91dER1cmF0aW9uICkgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gQHByaXZhdGVcclxuICB1cGRhdGVWZWxvY2l0eSggY3VycmVudFBvc2l0aW9uWCwgY3VycmVudFBvc2l0aW9uWSApIHtcclxuICAgIC8vIENyZWF0ZSBhIHZlbG9jaXR5IHZlY3RvciB0aGF0IGNhdXNlcyB0aGlzIHRvIG1vdmUgYXdheSBmcm9tIHRoZSBcImF3YXkgcG9pbnRcIi5cclxuICAgIGNvbnN0IGF3YXlBbmdsZSA9IE1hdGguYXRhbjIoIGN1cnJlbnRQb3NpdGlvblkgLSB0aGlzLmF3YXlQb2ludC55LFxyXG4gICAgICBjdXJyZW50UG9zaXRpb25YIC0gdGhpcy5hd2F5UG9pbnQueCApICsgKCBkb3RSYW5kb20ubmV4dERvdWJsZSgpIC0gMC41ICkgKiBNYXRoLlBJO1xyXG4gICAgY29uc3QgbmV3U2NhbGVyVmVsb2NpdHkgPSBNSU5fVkVMT0NJVFkgKyBkb3RSYW5kb20ubmV4dERvdWJsZSgpICogKCBNQVhfVkVMT0NJVFkgLSBNSU5fVkVMT0NJVFkgKTtcclxuICAgIHRoaXMudmVsb2NpdHlYID0gbmV3U2NhbGVyVmVsb2NpdHkgKiBNYXRoLmNvcyggYXdheUFuZ2xlICk7XHJcbiAgICB0aGlzLnZlbG9jaXR5WSA9IG5ld1NjYWxlclZlbG9jaXR5ICogTWF0aC5zaW4oIGF3YXlBbmdsZSApO1xyXG4gIH1cclxufVxyXG5cclxubmV1cm9uLnJlZ2lzdGVyKCAnV2FuZGVyQXdheVRoZW5GYWRlTW90aW9uU3RyYXRlZ3knLCBXYW5kZXJBd2F5VGhlbkZhZGVNb3Rpb25TdHJhdGVneSApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgV2FuZGVyQXdheVRoZW5GYWRlTW90aW9uU3RyYXRlZ3k7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFNBQVMsTUFBTSxpQ0FBaUM7QUFDdkQsT0FBT0MsTUFBTSxNQUFNLGlCQUFpQjtBQUNwQyxPQUFPQyxlQUFlLE1B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