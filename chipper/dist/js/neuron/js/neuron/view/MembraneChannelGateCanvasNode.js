// Copyright 2014-2023, University of Colorado Boulder
/**
 * The dynamic parts of the Membrane Channels, namely the gate, channel expansion, and string, are rendered directly on
 * a single canvas for optimal performance.
 *
 * @author John Blanco
 * @author Sharfudeen Ashraf (for Ghent University)
 */

import Dimension2 from '../../../../dot/js/Dimension2.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import { LineStyles, Shape } from '../../../../kite/js/imports.js';
import { CanvasNode, Color } from '../../../../scenery/js/imports.js';
import neuron from '../../neuron.js';
import NeuronConstants from '../common/NeuronConstants.js';
import MembraneChannelTypes from '../model/MembraneChannelTypes.js';

// utility function for drawing the shape that depicts the edge or side of a membrane channel
function drawEdge(context, transformedEdgeNodeSize) {
  // Instead of passing the transformedEdgeNodeSize, the updateEdgeShape function updates the transformedEdgeNodeSize
  const width = transformedEdgeNodeSize.width;
  const height = transformedEdgeNodeSize.height;
  context.beginPath();
  context.moveTo(-width / 2, height / 4);
  context.bezierCurveTo(-width / 2, height / 2, width / 2, height / 2, width / 2, height / 4);
  context.lineTo(width / 2, -height / 4);
  context.bezierCurveTo(width / 2, -height / 2, -width / 2, -height / 2, -width / 2, -height / 4);
  context.closePath();
  context.stroke();
  context.fill();
}

// utility function that draws the edges of the channel
function updateEdgeShapes(context, thisNode, transformedChannelPosition, transformedChannelSize, edgeNodeBounds, transformedEdgeNodeSize, membraneChannelModel) {
  // create the edge representations
  let edgeNodeWidth = (membraneChannelModel.overallSize.width - membraneChannelModel.channelSize.width) / 2;
  const edgeNodeHeight = membraneChannelModel.overallSize.height;
  edgeNodeWidth = edgeNodeWidth - 0.2; // adjustment for Canvas pixel width

  // update the same local transformedEdgeNodeSize instead of creating a new Dimension2 object
  transformedEdgeNodeSize.width = Math.abs(thisNode.mvt.modelToViewDeltaX(edgeNodeWidth));
  transformedEdgeNodeSize.height = Math.abs(thisNode.mvt.modelToViewDeltaY(edgeNodeHeight));
  const rotation = -membraneChannelModel.rotationalAngle + Math.PI / 2;
  context.fillStyle = thisNode.edgeFillColors[membraneChannelModel.getChannelType()];
  context.strokeStyle = thisNode.edgeStrokeColors[membraneChannelModel.getChannelType()];
  context.lineWidth = 0.9;

  // left edge
  context.save();
  context.translate(transformedChannelPosition.x, transformedChannelPosition.y);
  context.rotate(rotation);
  context.translate(-transformedChannelSize.width / 2 - edgeNodeBounds.width / 2, 0);

  // left edge
  drawEdge(context, transformedEdgeNodeSize);
  context.restore();

  // right edge
  context.save();
  context.translate(transformedChannelPosition.x, transformedChannelPosition.y);
  context.rotate(rotation);
  context.translate(transformedChannelSize.width / 2 + edgeNodeBounds.width / 2, 0);
  drawEdge(context, transformedEdgeNodeSize);
  context.restore();
}
class MembraneChannelGateCanvasNode extends CanvasNode {
  /**
   * @param {NeuronModel} neuronModel
   * @param {ModelViewTransform2} modelViewTransform
   * @param {Bounds2} bounds
   */
  constructor(neuronModel, modelViewTransform, bounds) {
    super({
      pickable: false,
      canvasBounds: bounds
    });
    this.neuronModel = neuronModel;
    this.membraneChannels = neuronModel.membraneChannels;
    this.mvt = modelViewTransform;
    neuronModel.channelRepresentationChanged.addListener(() => {
      this.invalidatePaint();
    });
    const computeEdgeBounds = membraneChannelModel => {
      const edgeNodeWidth = (membraneChannelModel.overallSize.width - membraneChannelModel.channelSize.width) / 2;
      const edgeNodeHeight = membraneChannelModel.overallSize.height;
      const transformedEdgeNodeSize = new Dimension2(Math.abs(this.mvt.modelToViewDeltaX(edgeNodeWidth)), Math.abs(this.mvt.modelToViewDeltaY(edgeNodeHeight)));
      const width = transformedEdgeNodeSize.width;
      const height = transformedEdgeNodeSize.height;
      const edgeShape = new Shape();
      edgeShape.moveTo(-width / 2, height / 4);
      edgeShape.cubicCurveTo(-width / 2, height / 2, width / 2, height / 2, width / 2, height / 4);
      edgeShape.lineTo(width / 2, -height / 4);
      edgeShape.cubicCurveTo(width / 2, -height / 2, -width / 2, -height / 2, -width / 2, -height / 4);
      edgeShape.close();
      return edgeShape.getStrokedBounds(new LineStyles({
        lineWidth: 0.4
      }));
    };
    this.edgeNodeBounds = computeEdgeBounds(this.membraneChannels.get(0));

    // The profiler found too many color instance being created during rendering, so cache them here.
    this.channelColors = {};
    this.channelColors[MembraneChannelTypes.SODIUM_GATED_CHANNEL] = NeuronConstants.SODIUM_COLOR.colorUtilsDarker(0.2).getCanvasStyle();
    this.channelColors[MembraneChannelTypes.SODIUM_LEAKAGE_CHANNEL] = Color.interpolateRGBA(NeuronConstants.SODIUM_COLOR, Color.YELLOW, 0.5).colorUtilsDarker(0.15).getCanvasStyle();
    this.channelColors[MembraneChannelTypes.POTASSIUM_GATED_CHANNEL] = NeuronConstants.POTASSIUM_COLOR.colorUtilsDarker(0.2).getCanvasStyle();
    this.channelColors[MembraneChannelTypes.POTASSIUM_LEAKAGE_CHANNEL] = Color.interpolateRGBA(NeuronConstants.POTASSIUM_COLOR, new Color(0, 200, 255), 0.6).colorUtilsDarker(0.2).getCanvasStyle();
    this.edgeFillColors = {};
    this.edgeFillColors[MembraneChannelTypes.SODIUM_GATED_CHANNEL] = NeuronConstants.SODIUM_COLOR.getCanvasStyle();
    this.edgeFillColors[MembraneChannelTypes.SODIUM_LEAKAGE_CHANNEL] = Color.interpolateRGBA(NeuronConstants.SODIUM_COLOR, Color.YELLOW, 0.5).getCanvasStyle();
    this.edgeFillColors[MembraneChannelTypes.POTASSIUM_GATED_CHANNEL] = NeuronConstants.POTASSIUM_COLOR.getCanvasStyle();
    this.edgeFillColors[MembraneChannelTypes.POTASSIUM_LEAKAGE_CHANNEL] = Color.interpolateRGBA(NeuronConstants.POTASSIUM_COLOR, new Color(0, 200, 255), 0.6).getCanvasStyle();
    this.edgeStrokeColors = {};
    this.edgeStrokeColors[MembraneChannelTypes.SODIUM_GATED_CHANNEL] = NeuronConstants.SODIUM_COLOR.colorUtilsDarker(0.3).getCanvasStyle();
    this.edgeStrokeColors[MembraneChannelTypes.SODIUM_LEAKAGE_CHANNEL] = Color.interpolateRGBA(NeuronConstants.SODIUM_COLOR, Color.YELLOW, 0.5).colorUtilsDarker(0.3).getCanvasStyle();
    this.edgeStrokeColors[MembraneChannelTypes.POTASSIUM_GATED_CHANNEL] = NeuronConstants.POTASSIUM_COLOR.colorUtilsDarker(0.3).getCanvasStyle();
    this.edgeStrokeColors[MembraneChannelTypes.POTASSIUM_LEAKAGE_CHANNEL] = Color.interpolateRGBA(NeuronConstants.POTASSIUM_COLOR, new Color(0, 200, 255), 0.6).colorUtilsDarker(0.3).getCanvasStyle();
    this.edgeGateBallColors = {};
    this.edgeGateBallColors[MembraneChannelTypes.SODIUM_GATED_CHANNEL] = NeuronConstants.SODIUM_COLOR.colorUtilsDarker(0.3).getCanvasStyle();
    this.edgeGateStringColor = Color.BLACK.getCanvasStyle();

    // each iteration during channel rendering updates the same local variable in order to avoid new vector creation
    this.transformedChannelPosition = new Vector2(0, 0);
    this.viewTransformationMatrix = this.mvt.getMatrix();

    // avoid creation of new vector instances, update x, y positions and use it during rendering
    this.channelEdgeConnectionPoint = new Vector2(0, 0);
    this.channelCenterBottomPoint = new Vector2(0, 0);
    this.ballPosition = new Vector2(0, 0);
    this.ballConnectionPoint = new Vector2(0, 0);

    // the code is refactored to use minimum instances of Vector2 and Dimensions2
    this.channelSize = new Dimension2();
    this.transformedChannelSize = new Dimension2();
    this.transformedOverallSize = new Dimension2();
    this.transformedEdgeNodeSize = new Dimension2();
    this.invalidatePaint();
  }

  /**
   * Paint the canvas with all of the membrane channels
   * @param {CanvasRenderingContext2D} context
   * @override
   * @protected
   */
  paintCanvas(context) {
    const edgeNodeBounds = this.edgeNodeBounds;

    // Use the same object reference.  These are intermediary objects and don't hold any state, and are used only for
    // rendering.
    const transformedChannelPosition = this.transformedChannelPosition;
    const viewTransformationMatrix = this.viewTransformationMatrix;
    const channelEdgeConnectionPoint = this.channelEdgeConnectionPoint;
    const channelCenterBottomPoint = this.channelCenterBottomPoint;
    const ballPosition = this.ballPosition;
    const ballConnectionPoint = this.ballConnectionPoint;

    // this code is refactored to use minimum instances of Vector2 and Dimensions2
    const channelSize = this.channelSize;
    const transformedChannelSize = this.transformedChannelSize;
    const transformedOverallSize = this.transformedOverallSize;
    const transformedEdgeNodeSize = this.transformedEdgeNodeSize;
    this.membraneChannels.forEach(membraneChannelModel => {
      // avoid creating new vectors and use the multiplyVector2 since it doesn't create new vectors
      transformedChannelPosition.x = membraneChannelModel.getCenterPosition().x;
      transformedChannelPosition.y = membraneChannelModel.getCenterPosition().y;
      viewTransformationMatrix.multiplyVector2(transformedChannelPosition);
      const rotation = -membraneChannelModel.rotationalAngle + Math.PI / 2;

      // Set the channel width as a function of the openness of the membrane channel.
      channelSize.width = membraneChannelModel.getChannelSize().width * membraneChannelModel.getOpenness();
      channelSize.height = membraneChannelModel.getChannelSize().height;
      transformedChannelSize.width = Math.abs(this.mvt.modelToViewDeltaX(channelSize.width));
      transformedChannelSize.height = Math.abs(this.mvt.modelToViewDeltaY(channelSize.height));

      // Make the node a bit bigger than the channel so that the edges can be placed over it with no gaps.
      const oversizeFactor = 1.18;
      const width = transformedChannelSize.width * oversizeFactor;
      const height = transformedChannelSize.height * oversizeFactor;
      const edgeWidth = edgeNodeBounds.width; // Assume both edges are the same size.
      context.save();
      context.translate(transformedChannelPosition.x, transformedChannelPosition.y);
      context.rotate(rotation);
      context.translate(-(width + edgeWidth) / 2, -height / 2);
      context.fillStyle = this.channelColors[membraneChannelModel.getChannelType()];
      context.beginPath();
      context.moveTo(0, 0);
      context.quadraticCurveTo((width + edgeWidth) / 2, height / 8, width + edgeWidth, 0);
      context.lineTo(width + edgeWidth, height);
      context.quadraticCurveTo((width + edgeWidth) / 2, height * 7 / 8, 0, height);
      context.closePath();
      context.fill();
      context.restore();

      // If this membrane channel has an inactivation gate, update it.
      if (membraneChannelModel.getHasInactivationGate()) {
        transformedOverallSize.width = this.mvt.modelToViewDeltaX(membraneChannelModel.getOverallSize().width);
        transformedOverallSize.height = this.mvt.modelToViewDeltaY(membraneChannelModel.getOverallSize().height);

        // Position the ball portion of the inactivation gate.
        // position it on the left edge, the channel's width expands based on openness (so does the position of edge)
        channelEdgeConnectionPoint.x = edgeNodeBounds.centerX - transformedChannelSize.width / 2 - edgeNodeBounds.width / 2;
        channelEdgeConnectionPoint.y = edgeNodeBounds.getMaxY();
        channelCenterBottomPoint.x = 0;
        channelCenterBottomPoint.y = transformedChannelSize.height / 2;
        const angle = -Math.PI / 2 * (1 - membraneChannelModel.getInactivationAmount());
        const radius = (1 - membraneChannelModel.getInactivationAmount()) * transformedOverallSize.width / 2 + membraneChannelModel.getInactivationAmount() * channelEdgeConnectionPoint.distance(channelCenterBottomPoint);
        ballPosition.x = channelEdgeConnectionPoint.x + Math.cos(angle) * radius;
        ballPosition.y = channelEdgeConnectionPoint.y - Math.sin(angle) * radius;
        const ballDiameter = this.mvt.modelToViewDeltaX(membraneChannelModel.getChannelSize().width);

        // Redraw the "string" (actually a strand of protein in real life) that connects the ball to the gate.
        ballConnectionPoint.x = ballPosition.x;
        ballConnectionPoint.y = ballPosition.y;
        const connectorLength = channelCenterBottomPoint.distance(ballConnectionPoint);
        context.save();
        context.translate(transformedChannelPosition.x, transformedChannelPosition.y);
        context.rotate(rotation);
        context.lineWidth = 1.1;
        context.strokeStyle = this.edgeGateStringColor;
        context.beginPath();
        context.moveTo(channelEdgeConnectionPoint.x, channelEdgeConnectionPoint.y);
        context.bezierCurveTo(channelEdgeConnectionPoint.x + connectorLength * 0.25, channelEdgeConnectionPoint.y + connectorLength * 0.5, ballConnectionPoint.x - connectorLength * 0.75, ballConnectionPoint.y - connectorLength * 0.5, ballConnectionPoint.x, ballConnectionPoint.y);
        context.stroke();
        context.beginPath();
        context.fillStyle = this.edgeGateBallColors[membraneChannelModel.getChannelType()];
        context.arc(ballConnectionPoint.x, ballConnectionPoint.y, ballDiameter / 2, 0, 2 * Math.PI, false);
        context.closePath();
        context.fill();
        context.restore();
      }

      // for better layering draw edges after ball and string
      updateEdgeShapes(context, this, transformedChannelPosition, transformedChannelSize, edgeNodeBounds, transformedEdgeNodeSize, membraneChannelModel);
    });
  }
}
neuron.register('MembraneChannelGateCanvasNode', MembraneChannelGateCanvasNode);
export default MembraneChannelGateCanvasNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEaW1lbnNpb24yIiwiVmVjdG9yMiIsIkxpbmVTdHlsZXMiLCJTaGFwZSIsIkNhbnZhc05vZGUiLCJDb2xvciIsIm5ldXJvbiIsIk5ldXJvbkNvbnN0YW50cyIsIk1lbWJyYW5lQ2hhbm5lbFR5cGVzIiwiZHJhd0VkZ2UiLCJjb250ZXh0IiwidHJhbnNmb3JtZWRFZGdlTm9kZVNpemUiLCJ3aWR0aCIsImhlaWdodCIsImJlZ2luUGF0aCIsIm1vdmVUbyIsImJlemllckN1cnZlVG8iLCJsaW5lVG8iLCJjbG9zZVBhdGgiLCJzdHJva2UiLCJmaWxsIiwidXBkYXRlRWRnZVNoYXBlcyIsInRoaXNOb2RlIiwidHJhbnNmb3JtZWRDaGFubmVsUG9zaXRpb24iLCJ0cmFuc2Zvcm1lZENoYW5uZWxTaXplIiwiZWRnZU5vZGVCb3VuZHMiLCJtZW1icmFuZUNoYW5uZWxNb2RlbCIsImVkZ2VOb2RlV2lkdGgiLCJvdmVyYWxsU2l6ZSIsImNoYW5uZWxTaXplIiwiZWRnZU5vZGVIZWlnaHQiLCJNYXRoIiwiYWJzIiwibXZ0IiwibW9kZWxUb1ZpZXdEZWx0YVgiLCJtb2RlbFRvVmlld0RlbHRhWSIsInJvdGF0aW9uIiwicm90YXRpb25hbEFuZ2xlIiwiUEkiLCJmaWxsU3R5bGUiLCJlZGdlRmlsbENvbG9ycyIsImdldENoYW5uZWxUeXBlIiwic3Ryb2tlU3R5bGUiLCJlZGdlU3Ryb2tlQ29sb3JzIiwibGluZVdpZHRoIiwic2F2ZSIsInRyYW5zbGF0ZSIsIngiLCJ5Iiwicm90YXRlIiwicmVzdG9yZSIsIk1lbWJyYW5lQ2hhbm5lbEdhdGVDYW52YXNOb2RlIiwiY29uc3RydWN0b3IiLCJuZXVyb25Nb2RlbCIsIm1vZGVsVmlld1RyYW5zZm9ybSIsImJvdW5kcyIsInBpY2thYmxlIiwiY2FudmFzQm91bmRzIiwibWVtYnJhbmVDaGFubmVscyIsImNoYW5uZWxSZXByZXNlbnRhdGlvbkNoYW5nZWQiLCJhZGRMaXN0ZW5lciIsImludmFsaWRhdGVQYWludCIsImNvbXB1dGVFZGdlQm91bmRzIiwiZWRnZVNoYXBlIiwiY3ViaWNDdXJ2ZVRvIiwiY2xvc2UiLCJnZXRTdHJva2VkQm91bmRzIiwiZ2V0IiwiY2hhbm5lbENvbG9ycyIsIlNPRElVTV9HQVRFRF9DSEFOTkVMIiwiU09ESVVNX0NPTE9SIiwiY29sb3JVdGlsc0RhcmtlciIsImdldENhbnZhc1N0eWxlIiwiU09ESVVNX0xFQUtBR0VfQ0hBTk5FTCIsImludGVycG9sYXRlUkdCQSIsIllFTExPVyIsIlBPVEFTU0lVTV9HQVRFRF9DSEFOTkVMIiwiUE9UQVNTSVVNX0NPTE9SIiwiUE9UQVNTSVVNX0xFQUtBR0VfQ0hBTk5FTCIsImVkZ2VHYXRlQmFsbENvbG9ycyIsImVkZ2VHYXRlU3RyaW5nQ29sb3IiLCJCTEFDSyIsInZpZXdUcmFuc2Zvcm1hdGlvbk1hdHJpeCIsImdldE1hdHJpeCIsImNoYW5uZWxFZGdlQ29ubmVjdGlvblBvaW50IiwiY2hhbm5lbENlbnRlckJvdHRvbVBvaW50IiwiYmFsbFBvc2l0aW9uIiwiYmFsbENvbm5lY3Rpb25Qb2ludCIsInRyYW5zZm9ybWVkT3ZlcmFsbFNpemUiLCJwYWludENhbnZhcyIsImZvckVhY2giLCJnZXRDZW50ZXJQb3NpdGlvbiIsIm11bHRpcGx5VmVjdG9yMiIsImdldENoYW5uZWxTaXplIiwiZ2V0T3Blbm5lc3MiLCJvdmVyc2l6ZUZhY3RvciIsImVkZ2VXaWR0aCIsInF1YWRyYXRpY0N1cnZlVG8iLCJnZXRIYXNJbmFjdGl2YXRpb25HYXRlIiwiZ2V0T3ZlcmFsbFNpemUiLCJjZW50ZXJYIiwiZ2V0TWF4WSIsImFuZ2xlIiwiZ2V0SW5hY3RpdmF0aW9uQW1vdW50IiwicmFkaXVzIiwiZGlzdGFuY2UiLCJjb3MiLCJzaW4iLCJiYWxsRGlhbWV0ZXIiLCJjb25uZWN0b3JMZW5ndGgiLCJhcmMiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIk1lbWJyYW5lQ2hhbm5lbEdhdGVDYW52YXNOb2RlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE0LTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG4vKipcclxuICogVGhlIGR5bmFtaWMgcGFydHMgb2YgdGhlIE1lbWJyYW5lIENoYW5uZWxzLCBuYW1lbHkgdGhlIGdhdGUsIGNoYW5uZWwgZXhwYW5zaW9uLCBhbmQgc3RyaW5nLCBhcmUgcmVuZGVyZWQgZGlyZWN0bHkgb25cclxuICogYSBzaW5nbGUgY2FudmFzIGZvciBvcHRpbWFsIHBlcmZvcm1hbmNlLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvaG4gQmxhbmNvXHJcbiAqIEBhdXRob3IgU2hhcmZ1ZGVlbiBBc2hyYWYgKGZvciBHaGVudCBVbml2ZXJzaXR5KVxyXG4gKi9cclxuXHJcbmltcG9ydCBEaW1lbnNpb24yIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9EaW1lbnNpb24yLmpzJztcclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgeyBMaW5lU3R5bGVzLCBTaGFwZSB9IGZyb20gJy4uLy4uLy4uLy4uL2tpdGUvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCB7IENhbnZhc05vZGUsIENvbG9yIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IG5ldXJvbiBmcm9tICcuLi8uLi9uZXVyb24uanMnO1xyXG5pbXBvcnQgTmV1cm9uQ29uc3RhbnRzIGZyb20gJy4uL2NvbW1vbi9OZXVyb25Db25zdGFudHMuanMnO1xyXG5pbXBvcnQgTWVtYnJhbmVDaGFubmVsVHlwZXMgZnJvbSAnLi4vbW9kZWwvTWVtYnJhbmVDaGFubmVsVHlwZXMuanMnO1xyXG5cclxuLy8gdXRpbGl0eSBmdW5jdGlvbiBmb3IgZHJhd2luZyB0aGUgc2hhcGUgdGhhdCBkZXBpY3RzIHRoZSBlZGdlIG9yIHNpZGUgb2YgYSBtZW1icmFuZSBjaGFubmVsXHJcbmZ1bmN0aW9uIGRyYXdFZGdlKCBjb250ZXh0LCB0cmFuc2Zvcm1lZEVkZ2VOb2RlU2l6ZSApIHtcclxuXHJcbiAgLy8gSW5zdGVhZCBvZiBwYXNzaW5nIHRoZSB0cmFuc2Zvcm1lZEVkZ2VOb2RlU2l6ZSwgdGhlIHVwZGF0ZUVkZ2VTaGFwZSBmdW5jdGlvbiB1cGRhdGVzIHRoZSB0cmFuc2Zvcm1lZEVkZ2VOb2RlU2l6ZVxyXG4gIGNvbnN0IHdpZHRoID0gdHJhbnNmb3JtZWRFZGdlTm9kZVNpemUud2lkdGg7XHJcbiAgY29uc3QgaGVpZ2h0ID0gdHJhbnNmb3JtZWRFZGdlTm9kZVNpemUuaGVpZ2h0O1xyXG5cclxuICBjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gIGNvbnRleHQubW92ZVRvKCAtd2lkdGggLyAyLCBoZWlnaHQgLyA0ICk7XHJcbiAgY29udGV4dC5iZXppZXJDdXJ2ZVRvKCAtd2lkdGggLyAyLCBoZWlnaHQgLyAyLCB3aWR0aCAvIDIsIGhlaWdodCAvIDIsIHdpZHRoIC8gMiwgaGVpZ2h0IC8gNCApO1xyXG4gIGNvbnRleHQubGluZVRvKCB3aWR0aCAvIDIsIC1oZWlnaHQgLyA0ICk7XHJcbiAgY29udGV4dC5iZXppZXJDdXJ2ZVRvKCB3aWR0aCAvIDIsIC1oZWlnaHQgLyAyLCAtd2lkdGggLyAyLCAtaGVpZ2h0IC8gMiwgLXdpZHRoIC8gMiwgLWhlaWdodCAvIDQgKTtcclxuICBjb250ZXh0LmNsb3NlUGF0aCgpO1xyXG4gIGNvbnRleHQuc3Ryb2tlKCk7XHJcbiAgY29udGV4dC5maWxsKCk7XHJcbn1cclxuXHJcbi8vIHV0aWxpdHkgZnVuY3Rpb24gdGhhdCBkcmF3cyB0aGUgZWRnZXMgb2YgdGhlIGNoYW5uZWxcclxuZnVuY3Rpb24gdXBkYXRlRWRnZVNoYXBlcyggY29udGV4dCwgdGhpc05vZGUsIHRyYW5zZm9ybWVkQ2hhbm5lbFBvc2l0aW9uLCB0cmFuc2Zvcm1lZENoYW5uZWxTaXplLCBlZGdlTm9kZUJvdW5kcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtZWRFZGdlTm9kZVNpemUsIG1lbWJyYW5lQ2hhbm5lbE1vZGVsICkge1xyXG5cclxuICAvLyBjcmVhdGUgdGhlIGVkZ2UgcmVwcmVzZW50YXRpb25zXHJcbiAgbGV0IGVkZ2VOb2RlV2lkdGggPSAoIG1lbWJyYW5lQ2hhbm5lbE1vZGVsLm92ZXJhbGxTaXplLndpZHRoIC0gbWVtYnJhbmVDaGFubmVsTW9kZWwuY2hhbm5lbFNpemUud2lkdGggKSAvIDI7XHJcbiAgY29uc3QgZWRnZU5vZGVIZWlnaHQgPSBtZW1icmFuZUNoYW5uZWxNb2RlbC5vdmVyYWxsU2l6ZS5oZWlnaHQ7XHJcblxyXG4gIGVkZ2VOb2RlV2lkdGggPSBlZGdlTm9kZVdpZHRoIC0gMC4yOyAvLyBhZGp1c3RtZW50IGZvciBDYW52YXMgcGl4ZWwgd2lkdGhcclxuXHJcbiAgLy8gdXBkYXRlIHRoZSBzYW1lIGxvY2FsIHRyYW5zZm9ybWVkRWRnZU5vZGVTaXplIGluc3RlYWQgb2YgY3JlYXRpbmcgYSBuZXcgRGltZW5zaW9uMiBvYmplY3RcclxuICB0cmFuc2Zvcm1lZEVkZ2VOb2RlU2l6ZS53aWR0aCA9IE1hdGguYWJzKCB0aGlzTm9kZS5tdnQubW9kZWxUb1ZpZXdEZWx0YVgoIGVkZ2VOb2RlV2lkdGggKSApO1xyXG4gIHRyYW5zZm9ybWVkRWRnZU5vZGVTaXplLmhlaWdodCA9IE1hdGguYWJzKCB0aGlzTm9kZS5tdnQubW9kZWxUb1ZpZXdEZWx0YVkoIGVkZ2VOb2RlSGVpZ2h0ICkgKTtcclxuXHJcbiAgY29uc3Qgcm90YXRpb24gPSAtbWVtYnJhbmVDaGFubmVsTW9kZWwucm90YXRpb25hbEFuZ2xlICsgTWF0aC5QSSAvIDI7XHJcbiAgY29udGV4dC5maWxsU3R5bGUgPSB0aGlzTm9kZS5lZGdlRmlsbENvbG9yc1sgbWVtYnJhbmVDaGFubmVsTW9kZWwuZ2V0Q2hhbm5lbFR5cGUoKSBdO1xyXG4gIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSB0aGlzTm9kZS5lZGdlU3Ryb2tlQ29sb3JzWyBtZW1icmFuZUNoYW5uZWxNb2RlbC5nZXRDaGFubmVsVHlwZSgpIF07XHJcbiAgY29udGV4dC5saW5lV2lkdGggPSAwLjk7XHJcblxyXG4gIC8vIGxlZnQgZWRnZVxyXG4gIGNvbnRleHQuc2F2ZSgpO1xyXG4gIGNvbnRleHQudHJhbnNsYXRlKCB0cmFuc2Zvcm1lZENoYW5uZWxQb3NpdGlvbi54LCB0cmFuc2Zvcm1lZENoYW5uZWxQb3NpdGlvbi55ICk7XHJcbiAgY29udGV4dC5yb3RhdGUoIHJvdGF0aW9uICk7XHJcbiAgY29udGV4dC50cmFuc2xhdGUoIC10cmFuc2Zvcm1lZENoYW5uZWxTaXplLndpZHRoIC8gMiAtIGVkZ2VOb2RlQm91bmRzLndpZHRoIC8gMiwgMCApO1xyXG5cclxuICAvLyBsZWZ0IGVkZ2VcclxuICBkcmF3RWRnZSggY29udGV4dCwgdHJhbnNmb3JtZWRFZGdlTm9kZVNpemUgKTtcclxuICBjb250ZXh0LnJlc3RvcmUoKTtcclxuXHJcbiAgLy8gcmlnaHQgZWRnZVxyXG4gIGNvbnRleHQuc2F2ZSgpO1xyXG4gIGNvbnRleHQudHJhbnNsYXRlKCB0cmFuc2Zvcm1lZENoYW5uZWxQb3NpdGlvbi54LCB0cmFuc2Zvcm1lZENoYW5uZWxQb3NpdGlvbi55ICk7XHJcbiAgY29udGV4dC5yb3RhdGUoIHJvdGF0aW9uICk7XHJcbiAgY29udGV4dC50cmFuc2xhdGUoIHRyYW5zZm9ybWVkQ2hhbm5lbFNpemUud2lkdGggLyAyICsgZWRnZU5vZGVCb3VuZHMud2lkdGggLyAyLCAwICk7XHJcbiAgZHJhd0VkZ2UoIGNvbnRleHQsIHRyYW5zZm9ybWVkRWRnZU5vZGVTaXplICk7XHJcbiAgY29udGV4dC5yZXN0b3JlKCk7XHJcbn1cclxuXHJcbmNsYXNzIE1lbWJyYW5lQ2hhbm5lbEdhdGVDYW52YXNOb2RlIGV4dGVuZHMgQ2FudmFzTm9kZSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7TmV1cm9uTW9kZWx9IG5ldXJvbk1vZGVsXHJcbiAgICogQHBhcmFtIHtNb2RlbFZpZXdUcmFuc2Zvcm0yfSBtb2RlbFZpZXdUcmFuc2Zvcm1cclxuICAgKiBAcGFyYW0ge0JvdW5kczJ9IGJvdW5kc1xyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBuZXVyb25Nb2RlbCwgbW9kZWxWaWV3VHJhbnNmb3JtLCBib3VuZHMgKSB7XHJcbiAgICBzdXBlcigge1xyXG4gICAgICBwaWNrYWJsZTogZmFsc2UsXHJcbiAgICAgIGNhbnZhc0JvdW5kczogYm91bmRzXHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5uZXVyb25Nb2RlbCA9IG5ldXJvbk1vZGVsO1xyXG4gICAgdGhpcy5tZW1icmFuZUNoYW5uZWxzID0gbmV1cm9uTW9kZWwubWVtYnJhbmVDaGFubmVscztcclxuICAgIHRoaXMubXZ0ID0gbW9kZWxWaWV3VHJhbnNmb3JtO1xyXG5cclxuICAgIG5ldXJvbk1vZGVsLmNoYW5uZWxSZXByZXNlbnRhdGlvbkNoYW5nZWQuYWRkTGlzdGVuZXIoICgpID0+IHtcclxuICAgICAgdGhpcy5pbnZhbGlkYXRlUGFpbnQoKTtcclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCBjb21wdXRlRWRnZUJvdW5kcyA9IG1lbWJyYW5lQ2hhbm5lbE1vZGVsID0+IHtcclxuICAgICAgY29uc3QgZWRnZU5vZGVXaWR0aCA9ICggbWVtYnJhbmVDaGFubmVsTW9kZWwub3ZlcmFsbFNpemUud2lkdGggLSBtZW1icmFuZUNoYW5uZWxNb2RlbC5jaGFubmVsU2l6ZS53aWR0aCApIC8gMjtcclxuICAgICAgY29uc3QgZWRnZU5vZGVIZWlnaHQgPSBtZW1icmFuZUNoYW5uZWxNb2RlbC5vdmVyYWxsU2l6ZS5oZWlnaHQ7XHJcbiAgICAgIGNvbnN0IHRyYW5zZm9ybWVkRWRnZU5vZGVTaXplID0gbmV3IERpbWVuc2lvbjIoIE1hdGguYWJzKCB0aGlzLm12dC5tb2RlbFRvVmlld0RlbHRhWCggZWRnZU5vZGVXaWR0aCApICksXHJcbiAgICAgICAgTWF0aC5hYnMoIHRoaXMubXZ0Lm1vZGVsVG9WaWV3RGVsdGFZKCBlZGdlTm9kZUhlaWdodCApICkgKTtcclxuXHJcbiAgICAgIGNvbnN0IHdpZHRoID0gdHJhbnNmb3JtZWRFZGdlTm9kZVNpemUud2lkdGg7XHJcbiAgICAgIGNvbnN0IGhlaWdodCA9IHRyYW5zZm9ybWVkRWRnZU5vZGVTaXplLmhlaWdodDtcclxuICAgICAgY29uc3QgZWRnZVNoYXBlID0gbmV3IFNoYXBlKCk7XHJcbiAgICAgIGVkZ2VTaGFwZS5tb3ZlVG8oIC13aWR0aCAvIDIsIGhlaWdodCAvIDQgKTtcclxuICAgICAgZWRnZVNoYXBlLmN1YmljQ3VydmVUbyggLXdpZHRoIC8gMiwgaGVpZ2h0IC8gMiwgd2lkdGggLyAyLCBoZWlnaHQgLyAyLCB3aWR0aCAvIDIsIGhlaWdodCAvIDQgKTtcclxuICAgICAgZWRnZVNoYXBlLmxpbmVUbyggd2lkdGggLyAyLCAtaGVpZ2h0IC8gNCApO1xyXG4gICAgICBlZGdlU2hhcGUuY3ViaWNDdXJ2ZVRvKCB3aWR0aCAvIDIsIC1oZWlnaHQgLyAyLCAtd2lkdGggLyAyLCAtaGVpZ2h0IC8gMiwgLXdpZHRoIC8gMiwgLWhlaWdodCAvIDQgKTtcclxuICAgICAgZWRnZVNoYXBlLmNsb3NlKCk7XHJcblxyXG4gICAgICByZXR1cm4gZWRnZVNoYXBlLmdldFN0cm9rZWRCb3VuZHMoIG5ldyBMaW5lU3R5bGVzKCB7IGxpbmVXaWR0aDogMC40IH0gKSApO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmVkZ2VOb2RlQm91bmRzID0gY29tcHV0ZUVkZ2VCb3VuZHMoIHRoaXMubWVtYnJhbmVDaGFubmVscy5nZXQoIDAgKSApO1xyXG5cclxuICAgIC8vIFRoZSBwcm9maWxlciBmb3VuZCB0b28gbWFueSBjb2xvciBpbnN0YW5jZSBiZWluZyBjcmVhdGVkIGR1cmluZyByZW5kZXJpbmcsIHNvIGNhY2hlIHRoZW0gaGVyZS5cclxuICAgIHRoaXMuY2hhbm5lbENvbG9ycyA9IHt9O1xyXG4gICAgdGhpcy5jaGFubmVsQ29sb3JzWyBNZW1icmFuZUNoYW5uZWxUeXBlcy5TT0RJVU1fR0FURURfQ0hBTk5FTCBdID0gTmV1cm9uQ29uc3RhbnRzLlNPRElVTV9DT0xPUi5jb2xvclV0aWxzRGFya2VyKCAwLjIgKS5nZXRDYW52YXNTdHlsZSgpO1xyXG4gICAgdGhpcy5jaGFubmVsQ29sb3JzWyBNZW1icmFuZUNoYW5uZWxUeXBlcy5TT0RJVU1fTEVBS0FHRV9DSEFOTkVMIF0gPSBDb2xvci5pbnRlcnBvbGF0ZVJHQkEoIE5ldXJvbkNvbnN0YW50cy5TT0RJVU1fQ09MT1IsIENvbG9yLllFTExPVywgMC41ICkuY29sb3JVdGlsc0RhcmtlciggMC4xNSApLmdldENhbnZhc1N0eWxlKCk7XHJcbiAgICB0aGlzLmNoYW5uZWxDb2xvcnNbIE1lbWJyYW5lQ2hhbm5lbFR5cGVzLlBPVEFTU0lVTV9HQVRFRF9DSEFOTkVMIF0gPSBOZXVyb25Db25zdGFudHMuUE9UQVNTSVVNX0NPTE9SLmNvbG9yVXRpbHNEYXJrZXIoIDAuMiApLmdldENhbnZhc1N0eWxlKCk7XHJcbiAgICB0aGlzLmNoYW5uZWxDb2xvcnNbIE1lbWJyYW5lQ2hhbm5lbFR5cGVzLlBPVEFTU0lVTV9MRUFLQUdFX0NIQU5ORUwgXSA9IENvbG9yLmludGVycG9sYXRlUkdCQSggTmV1cm9uQ29uc3RhbnRzLlBPVEFTU0lVTV9DT0xPUiwgbmV3IENvbG9yKCAwLCAyMDAsIDI1NSApLCAwLjYgKS5jb2xvclV0aWxzRGFya2VyKCAwLjIgKS5nZXRDYW52YXNTdHlsZSgpO1xyXG5cclxuICAgIHRoaXMuZWRnZUZpbGxDb2xvcnMgPSB7fTtcclxuICAgIHRoaXMuZWRnZUZpbGxDb2xvcnNbIE1lbWJyYW5lQ2hhbm5lbFR5cGVzLlNPRElVTV9HQVRFRF9DSEFOTkVMIF0gPSBOZXVyb25Db25zdGFudHMuU09ESVVNX0NPTE9SLmdldENhbnZhc1N0eWxlKCk7XHJcbiAgICB0aGlzLmVkZ2VGaWxsQ29sb3JzWyBNZW1icmFuZUNoYW5uZWxUeXBlcy5TT0RJVU1fTEVBS0FHRV9DSEFOTkVMIF0gPSBDb2xvci5pbnRlcnBvbGF0ZVJHQkEoIE5ldXJvbkNvbnN0YW50cy5TT0RJVU1fQ09MT1IsIENvbG9yLllFTExPVywgMC41ICkuZ2V0Q2FudmFzU3R5bGUoKTtcclxuICAgIHRoaXMuZWRnZUZpbGxDb2xvcnNbIE1lbWJyYW5lQ2hhbm5lbFR5cGVzLlBPVEFTU0lVTV9HQVRFRF9DSEFOTkVMIF0gPSBOZXVyb25Db25zdGFudHMuUE9UQVNTSVVNX0NPTE9SLmdldENhbnZhc1N0eWxlKCk7XHJcbiAgICB0aGlzLmVkZ2VGaWxsQ29sb3JzWyBNZW1icmFuZUNoYW5uZWxUeXBlcy5QT1RBU1NJVU1fTEVBS0FHRV9DSEFOTkVMIF0gPSBDb2xvci5pbnRlcnBvbGF0ZVJHQkEoIE5ldXJvbkNvbnN0YW50cy5QT1RBU1NJVU1fQ09MT1IsIG5ldyBDb2xvciggMCwgMjAwLCAyNTUgKSwgMC42ICkuZ2V0Q2FudmFzU3R5bGUoKTtcclxuXHJcbiAgICB0aGlzLmVkZ2VTdHJva2VDb2xvcnMgPSB7fTtcclxuICAgIHRoaXMuZWRnZVN0cm9rZUNvbG9yc1sgTWVtYnJhbmVDaGFubmVsVHlwZXMuU09ESVVNX0dBVEVEX0NIQU5ORUwgXSA9IE5ldXJvbkNvbnN0YW50cy5TT0RJVU1fQ09MT1IuY29sb3JVdGlsc0RhcmtlciggMC4zICkuZ2V0Q2FudmFzU3R5bGUoKTtcclxuICAgIHRoaXMuZWRnZVN0cm9rZUNvbG9yc1sgTWVtYnJhbmVDaGFubmVsVHlwZXMuU09ESVVNX0xFQUtBR0VfQ0hBTk5FTCBdID0gQ29sb3IuaW50ZXJwb2xhdGVSR0JBKCBOZXVyb25Db25zdGFudHMuU09ESVVNX0NPTE9SLCBDb2xvci5ZRUxMT1csIDAuNSApLmNvbG9yVXRpbHNEYXJrZXIoIDAuMyApLmdldENhbnZhc1N0eWxlKCk7XHJcbiAgICB0aGlzLmVkZ2VTdHJva2VDb2xvcnNbIE1lbWJyYW5lQ2hhbm5lbFR5cGVzLlBPVEFTU0lVTV9HQVRFRF9DSEFOTkVMIF0gPSBOZXVyb25Db25zdGFudHMuUE9UQVNTSVVNX0NPTE9SLmNvbG9yVXRpbHNEYXJrZXIoIDAuMyApLmdldENhbnZhc1N0eWxlKCk7XHJcbiAgICB0aGlzLmVkZ2VTdHJva2VDb2xvcnNbIE1lbWJyYW5lQ2hhbm5lbFR5cGVzLlBPVEFTU0lVTV9MRUFLQUdFX0NIQU5ORUwgXSA9IENvbG9yLmludGVycG9sYXRlUkdCQSggTmV1cm9uQ29uc3RhbnRzLlBPVEFTU0lVTV9DT0xPUiwgbmV3IENvbG9yKCAwLCAyMDAsIDI1NSApLCAwLjYgKS5jb2xvclV0aWxzRGFya2VyKCAwLjMgKS5nZXRDYW52YXNTdHlsZSgpO1xyXG5cclxuICAgIHRoaXMuZWRnZUdhdGVCYWxsQ29sb3JzID0ge307XHJcbiAgICB0aGlzLmVkZ2VHYXRlQmFsbENvbG9yc1sgTWVtYnJhbmVDaGFubmVsVHlwZXMuU09ESVVNX0dBVEVEX0NIQU5ORUwgXSA9IE5ldXJvbkNvbnN0YW50cy5TT0RJVU1fQ09MT1IuY29sb3JVdGlsc0RhcmtlciggMC4zICkuZ2V0Q2FudmFzU3R5bGUoKTtcclxuICAgIHRoaXMuZWRnZUdhdGVTdHJpbmdDb2xvciA9IENvbG9yLkJMQUNLLmdldENhbnZhc1N0eWxlKCk7XHJcblxyXG4gICAgLy8gZWFjaCBpdGVyYXRpb24gZHVyaW5nIGNoYW5uZWwgcmVuZGVyaW5nIHVwZGF0ZXMgdGhlIHNhbWUgbG9jYWwgdmFyaWFibGUgaW4gb3JkZXIgdG8gYXZvaWQgbmV3IHZlY3RvciBjcmVhdGlvblxyXG4gICAgdGhpcy50cmFuc2Zvcm1lZENoYW5uZWxQb3NpdGlvbiA9IG5ldyBWZWN0b3IyKCAwLCAwICk7XHJcbiAgICB0aGlzLnZpZXdUcmFuc2Zvcm1hdGlvbk1hdHJpeCA9IHRoaXMubXZ0LmdldE1hdHJpeCgpO1xyXG5cclxuICAgIC8vIGF2b2lkIGNyZWF0aW9uIG9mIG5ldyB2ZWN0b3IgaW5zdGFuY2VzLCB1cGRhdGUgeCwgeSBwb3NpdGlvbnMgYW5kIHVzZSBpdCBkdXJpbmcgcmVuZGVyaW5nXHJcbiAgICB0aGlzLmNoYW5uZWxFZGdlQ29ubmVjdGlvblBvaW50ID0gbmV3IFZlY3RvcjIoIDAsIDAgKTtcclxuICAgIHRoaXMuY2hhbm5lbENlbnRlckJvdHRvbVBvaW50ID0gbmV3IFZlY3RvcjIoIDAsIDAgKTtcclxuICAgIHRoaXMuYmFsbFBvc2l0aW9uID0gbmV3IFZlY3RvcjIoIDAsIDAgKTtcclxuICAgIHRoaXMuYmFsbENvbm5lY3Rpb25Qb2ludCA9IG5ldyBWZWN0b3IyKCAwLCAwICk7XHJcblxyXG4gICAgLy8gdGhlIGNvZGUgaXMgcmVmYWN0b3JlZCB0byB1c2UgbWluaW11bSBpbnN0YW5jZXMgb2YgVmVjdG9yMiBhbmQgRGltZW5zaW9uczJcclxuICAgIHRoaXMuY2hhbm5lbFNpemUgPSBuZXcgRGltZW5zaW9uMigpO1xyXG4gICAgdGhpcy50cmFuc2Zvcm1lZENoYW5uZWxTaXplID0gbmV3IERpbWVuc2lvbjIoKTtcclxuICAgIHRoaXMudHJhbnNmb3JtZWRPdmVyYWxsU2l6ZSA9IG5ldyBEaW1lbnNpb24yKCk7XHJcbiAgICB0aGlzLnRyYW5zZm9ybWVkRWRnZU5vZGVTaXplID0gbmV3IERpbWVuc2lvbjIoKTtcclxuXHJcbiAgICB0aGlzLmludmFsaWRhdGVQYWludCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUGFpbnQgdGhlIGNhbnZhcyB3aXRoIGFsbCBvZiB0aGUgbWVtYnJhbmUgY2hhbm5lbHNcclxuICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dFxyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqIEBwcm90ZWN0ZWRcclxuICAgKi9cclxuICBwYWludENhbnZhcyggY29udGV4dCApIHtcclxuICAgIGNvbnN0IGVkZ2VOb2RlQm91bmRzID0gdGhpcy5lZGdlTm9kZUJvdW5kcztcclxuXHJcbiAgICAvLyBVc2UgdGhlIHNhbWUgb2JqZWN0IHJlZmVyZW5jZS4gIFRoZXNlIGFyZSBpbnRlcm1lZGlhcnkgb2JqZWN0cyBhbmQgZG9uJ3QgaG9sZCBhbnkgc3RhdGUsIGFuZCBhcmUgdXNlZCBvbmx5IGZvclxyXG4gICAgLy8gcmVuZGVyaW5nLlxyXG4gICAgY29uc3QgdHJhbnNmb3JtZWRDaGFubmVsUG9zaXRpb24gPSB0aGlzLnRyYW5zZm9ybWVkQ2hhbm5lbFBvc2l0aW9uO1xyXG4gICAgY29uc3Qgdmlld1RyYW5zZm9ybWF0aW9uTWF0cml4ID0gdGhpcy52aWV3VHJhbnNmb3JtYXRpb25NYXRyaXg7XHJcblxyXG4gICAgY29uc3QgY2hhbm5lbEVkZ2VDb25uZWN0aW9uUG9pbnQgPSB0aGlzLmNoYW5uZWxFZGdlQ29ubmVjdGlvblBvaW50O1xyXG4gICAgY29uc3QgY2hhbm5lbENlbnRlckJvdHRvbVBvaW50ID0gdGhpcy5jaGFubmVsQ2VudGVyQm90dG9tUG9pbnQ7XHJcbiAgICBjb25zdCBiYWxsUG9zaXRpb24gPSB0aGlzLmJhbGxQb3NpdGlvbjtcclxuICAgIGNvbnN0IGJhbGxDb25uZWN0aW9uUG9pbnQgPSB0aGlzLmJhbGxDb25uZWN0aW9uUG9pbnQ7XHJcblxyXG4gICAgLy8gdGhpcyBjb2RlIGlzIHJlZmFjdG9yZWQgdG8gdXNlIG1pbmltdW0gaW5zdGFuY2VzIG9mIFZlY3RvcjIgYW5kIERpbWVuc2lvbnMyXHJcbiAgICBjb25zdCBjaGFubmVsU2l6ZSA9IHRoaXMuY2hhbm5lbFNpemU7XHJcbiAgICBjb25zdCB0cmFuc2Zvcm1lZENoYW5uZWxTaXplID0gdGhpcy50cmFuc2Zvcm1lZENoYW5uZWxTaXplO1xyXG4gICAgY29uc3QgdHJhbnNmb3JtZWRPdmVyYWxsU2l6ZSA9IHRoaXMudHJhbnNmb3JtZWRPdmVyYWxsU2l6ZTtcclxuICAgIGNvbnN0IHRyYW5zZm9ybWVkRWRnZU5vZGVTaXplID0gdGhpcy50cmFuc2Zvcm1lZEVkZ2VOb2RlU2l6ZTtcclxuXHJcbiAgICB0aGlzLm1lbWJyYW5lQ2hhbm5lbHMuZm9yRWFjaCggbWVtYnJhbmVDaGFubmVsTW9kZWwgPT4ge1xyXG5cclxuICAgICAgLy8gYXZvaWQgY3JlYXRpbmcgbmV3IHZlY3RvcnMgYW5kIHVzZSB0aGUgbXVsdGlwbHlWZWN0b3IyIHNpbmNlIGl0IGRvZXNuJ3QgY3JlYXRlIG5ldyB2ZWN0b3JzXHJcbiAgICAgIHRyYW5zZm9ybWVkQ2hhbm5lbFBvc2l0aW9uLnggPSBtZW1icmFuZUNoYW5uZWxNb2RlbC5nZXRDZW50ZXJQb3NpdGlvbigpLng7XHJcbiAgICAgIHRyYW5zZm9ybWVkQ2hhbm5lbFBvc2l0aW9uLnkgPSBtZW1icmFuZUNoYW5uZWxNb2RlbC5nZXRDZW50ZXJQb3NpdGlvbigpLnk7XHJcbiAgICAgIHZpZXdUcmFuc2Zvcm1hdGlvbk1hdHJpeC5tdWx0aXBseVZlY3RvcjIoIHRyYW5zZm9ybWVkQ2hhbm5lbFBvc2l0aW9uICk7XHJcblxyXG4gICAgICBjb25zdCByb3RhdGlvbiA9IC1tZW1icmFuZUNoYW5uZWxNb2RlbC5yb3RhdGlvbmFsQW5nbGUgKyBNYXRoLlBJIC8gMjtcclxuXHJcbiAgICAgIC8vIFNldCB0aGUgY2hhbm5lbCB3aWR0aCBhcyBhIGZ1bmN0aW9uIG9mIHRoZSBvcGVubmVzcyBvZiB0aGUgbWVtYnJhbmUgY2hhbm5lbC5cclxuICAgICAgY2hhbm5lbFNpemUud2lkdGggPSBtZW1icmFuZUNoYW5uZWxNb2RlbC5nZXRDaGFubmVsU2l6ZSgpLndpZHRoICogbWVtYnJhbmVDaGFubmVsTW9kZWwuZ2V0T3Blbm5lc3MoKTtcclxuICAgICAgY2hhbm5lbFNpemUuaGVpZ2h0ID0gbWVtYnJhbmVDaGFubmVsTW9kZWwuZ2V0Q2hhbm5lbFNpemUoKS5oZWlnaHQ7XHJcblxyXG5cclxuICAgICAgdHJhbnNmb3JtZWRDaGFubmVsU2l6ZS53aWR0aCA9IE1hdGguYWJzKCB0aGlzLm12dC5tb2RlbFRvVmlld0RlbHRhWCggY2hhbm5lbFNpemUud2lkdGggKSApO1xyXG4gICAgICB0cmFuc2Zvcm1lZENoYW5uZWxTaXplLmhlaWdodCA9IE1hdGguYWJzKCB0aGlzLm12dC5tb2RlbFRvVmlld0RlbHRhWSggY2hhbm5lbFNpemUuaGVpZ2h0ICkgKTtcclxuXHJcbiAgICAgIC8vIE1ha2UgdGhlIG5vZGUgYSBiaXQgYmlnZ2VyIHRoYW4gdGhlIGNoYW5uZWwgc28gdGhhdCB0aGUgZWRnZXMgY2FuIGJlIHBsYWNlZCBvdmVyIGl0IHdpdGggbm8gZ2Fwcy5cclxuICAgICAgY29uc3Qgb3ZlcnNpemVGYWN0b3IgPSAxLjE4O1xyXG4gICAgICBjb25zdCB3aWR0aCA9IHRyYW5zZm9ybWVkQ2hhbm5lbFNpemUud2lkdGggKiBvdmVyc2l6ZUZhY3RvcjtcclxuICAgICAgY29uc3QgaGVpZ2h0ID0gdHJhbnNmb3JtZWRDaGFubmVsU2l6ZS5oZWlnaHQgKiBvdmVyc2l6ZUZhY3RvcjtcclxuICAgICAgY29uc3QgZWRnZVdpZHRoID0gZWRnZU5vZGVCb3VuZHMud2lkdGg7IC8vIEFzc3VtZSBib3RoIGVkZ2VzIGFyZSB0aGUgc2FtZSBzaXplLlxyXG4gICAgICBjb250ZXh0LnNhdmUoKTtcclxuICAgICAgY29udGV4dC50cmFuc2xhdGUoIHRyYW5zZm9ybWVkQ2hhbm5lbFBvc2l0aW9uLngsIHRyYW5zZm9ybWVkQ2hhbm5lbFBvc2l0aW9uLnkgKTtcclxuICAgICAgY29udGV4dC5yb3RhdGUoIHJvdGF0aW9uICk7XHJcbiAgICAgIGNvbnRleHQudHJhbnNsYXRlKCAtKCB3aWR0aCArIGVkZ2VXaWR0aCApIC8gMiwgLWhlaWdodCAvIDIgKTtcclxuICAgICAgY29udGV4dC5maWxsU3R5bGUgPSB0aGlzLmNoYW5uZWxDb2xvcnNbIG1lbWJyYW5lQ2hhbm5lbE1vZGVsLmdldENoYW5uZWxUeXBlKCkgXTtcclxuICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgY29udGV4dC5tb3ZlVG8oIDAsIDAgKTtcclxuICAgICAgY29udGV4dC5xdWFkcmF0aWNDdXJ2ZVRvKCAoIHdpZHRoICsgZWRnZVdpZHRoICkgLyAyLCBoZWlnaHQgLyA4LCB3aWR0aCArIGVkZ2VXaWR0aCwgMCApO1xyXG4gICAgICBjb250ZXh0LmxpbmVUbyggd2lkdGggKyBlZGdlV2lkdGgsIGhlaWdodCApO1xyXG4gICAgICBjb250ZXh0LnF1YWRyYXRpY0N1cnZlVG8oICggd2lkdGggKyBlZGdlV2lkdGggKSAvIDIsIGhlaWdodCAqIDcgLyA4LCAwLCBoZWlnaHQgKTtcclxuICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcclxuICAgICAgY29udGV4dC5maWxsKCk7XHJcbiAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xyXG5cclxuICAgICAgLy8gSWYgdGhpcyBtZW1icmFuZSBjaGFubmVsIGhhcyBhbiBpbmFjdGl2YXRpb24gZ2F0ZSwgdXBkYXRlIGl0LlxyXG4gICAgICBpZiAoIG1lbWJyYW5lQ2hhbm5lbE1vZGVsLmdldEhhc0luYWN0aXZhdGlvbkdhdGUoKSApIHtcclxuXHJcbiAgICAgICAgdHJhbnNmb3JtZWRPdmVyYWxsU2l6ZS53aWR0aCA9IHRoaXMubXZ0Lm1vZGVsVG9WaWV3RGVsdGFYKCBtZW1icmFuZUNoYW5uZWxNb2RlbC5nZXRPdmVyYWxsU2l6ZSgpLndpZHRoICk7XHJcbiAgICAgICAgdHJhbnNmb3JtZWRPdmVyYWxsU2l6ZS5oZWlnaHQgPSB0aGlzLm12dC5tb2RlbFRvVmlld0RlbHRhWSggbWVtYnJhbmVDaGFubmVsTW9kZWwuZ2V0T3ZlcmFsbFNpemUoKS5oZWlnaHQgKTtcclxuXHJcbiAgICAgICAgLy8gUG9zaXRpb24gdGhlIGJhbGwgcG9ydGlvbiBvZiB0aGUgaW5hY3RpdmF0aW9uIGdhdGUuXHJcbiAgICAgICAgLy8gcG9zaXRpb24gaXQgb24gdGhlIGxlZnQgZWRnZSwgdGhlIGNoYW5uZWwncyB3aWR0aCBleHBhbmRzIGJhc2VkIG9uIG9wZW5uZXNzIChzbyBkb2VzIHRoZSBwb3NpdGlvbiBvZiBlZGdlKVxyXG4gICAgICAgIGNoYW5uZWxFZGdlQ29ubmVjdGlvblBvaW50LnggPSBlZGdlTm9kZUJvdW5kcy5jZW50ZXJYIC0gdHJhbnNmb3JtZWRDaGFubmVsU2l6ZS53aWR0aCAvIDIgLSBlZGdlTm9kZUJvdW5kcy53aWR0aCAvIDI7XHJcbiAgICAgICAgY2hhbm5lbEVkZ2VDb25uZWN0aW9uUG9pbnQueSA9IGVkZ2VOb2RlQm91bmRzLmdldE1heFkoKTtcclxuICAgICAgICBjaGFubmVsQ2VudGVyQm90dG9tUG9pbnQueCA9IDA7XHJcbiAgICAgICAgY2hhbm5lbENlbnRlckJvdHRvbVBvaW50LnkgPSB0cmFuc2Zvcm1lZENoYW5uZWxTaXplLmhlaWdodCAvIDI7XHJcbiAgICAgICAgY29uc3QgYW5nbGUgPSAtTWF0aC5QSSAvIDIgKiAoIDEgLSBtZW1icmFuZUNoYW5uZWxNb2RlbC5nZXRJbmFjdGl2YXRpb25BbW91bnQoKSApO1xyXG4gICAgICAgIGNvbnN0IHJhZGl1cyA9ICggMSAtIG1lbWJyYW5lQ2hhbm5lbE1vZGVsLmdldEluYWN0aXZhdGlvbkFtb3VudCgpICkgKiB0cmFuc2Zvcm1lZE92ZXJhbGxTaXplLndpZHRoIC8gMiArIG1lbWJyYW5lQ2hhbm5lbE1vZGVsLmdldEluYWN0aXZhdGlvbkFtb3VudCgpICogY2hhbm5lbEVkZ2VDb25uZWN0aW9uUG9pbnQuZGlzdGFuY2UoIGNoYW5uZWxDZW50ZXJCb3R0b21Qb2ludCApO1xyXG5cclxuICAgICAgICBiYWxsUG9zaXRpb24ueCA9IGNoYW5uZWxFZGdlQ29ubmVjdGlvblBvaW50LnggKyBNYXRoLmNvcyggYW5nbGUgKSAqIHJhZGl1cztcclxuICAgICAgICBiYWxsUG9zaXRpb24ueSA9IGNoYW5uZWxFZGdlQ29ubmVjdGlvblBvaW50LnkgLSBNYXRoLnNpbiggYW5nbGUgKSAqIHJhZGl1cztcclxuXHJcbiAgICAgICAgY29uc3QgYmFsbERpYW1ldGVyID0gdGhpcy5tdnQubW9kZWxUb1ZpZXdEZWx0YVgoIG1lbWJyYW5lQ2hhbm5lbE1vZGVsLmdldENoYW5uZWxTaXplKCkud2lkdGggKTtcclxuXHJcbiAgICAgICAgLy8gUmVkcmF3IHRoZSBcInN0cmluZ1wiIChhY3R1YWxseSBhIHN0cmFuZCBvZiBwcm90ZWluIGluIHJlYWwgbGlmZSkgdGhhdCBjb25uZWN0cyB0aGUgYmFsbCB0byB0aGUgZ2F0ZS5cclxuICAgICAgICBiYWxsQ29ubmVjdGlvblBvaW50LnggPSBiYWxsUG9zaXRpb24ueDtcclxuICAgICAgICBiYWxsQ29ubmVjdGlvblBvaW50LnkgPSBiYWxsUG9zaXRpb24ueTtcclxuICAgICAgICBjb25zdCBjb25uZWN0b3JMZW5ndGggPSBjaGFubmVsQ2VudGVyQm90dG9tUG9pbnQuZGlzdGFuY2UoIGJhbGxDb25uZWN0aW9uUG9pbnQgKTtcclxuICAgICAgICBjb250ZXh0LnNhdmUoKTtcclxuICAgICAgICBjb250ZXh0LnRyYW5zbGF0ZSggdHJhbnNmb3JtZWRDaGFubmVsUG9zaXRpb24ueCwgdHJhbnNmb3JtZWRDaGFubmVsUG9zaXRpb24ueSApO1xyXG4gICAgICAgIGNvbnRleHQucm90YXRlKCByb3RhdGlvbiApO1xyXG4gICAgICAgIGNvbnRleHQubGluZVdpZHRoID0gMS4xO1xyXG4gICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSB0aGlzLmVkZ2VHYXRlU3RyaW5nQ29sb3I7XHJcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjb250ZXh0Lm1vdmVUbyggY2hhbm5lbEVkZ2VDb25uZWN0aW9uUG9pbnQueCwgY2hhbm5lbEVkZ2VDb25uZWN0aW9uUG9pbnQueSApO1xyXG4gICAgICAgIGNvbnRleHQuYmV6aWVyQ3VydmVUbyggY2hhbm5lbEVkZ2VDb25uZWN0aW9uUG9pbnQueCArIGNvbm5lY3Rvckxlbmd0aCAqIDAuMjUsXHJcbiAgICAgICAgICBjaGFubmVsRWRnZUNvbm5lY3Rpb25Qb2ludC55ICsgY29ubmVjdG9yTGVuZ3RoICogMC41LCBiYWxsQ29ubmVjdGlvblBvaW50LnggLSBjb25uZWN0b3JMZW5ndGggKiAwLjc1LFxyXG4gICAgICAgICAgYmFsbENvbm5lY3Rpb25Qb2ludC55IC0gY29ubmVjdG9yTGVuZ3RoICogMC41LCBiYWxsQ29ubmVjdGlvblBvaW50LngsIGJhbGxDb25uZWN0aW9uUG9pbnQueSApO1xyXG4gICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XHJcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IHRoaXMuZWRnZUdhdGVCYWxsQ29sb3JzWyBtZW1icmFuZUNoYW5uZWxNb2RlbC5nZXRDaGFubmVsVHlwZSgpIF07XHJcbiAgICAgICAgY29udGV4dC5hcmMoIGJhbGxDb25uZWN0aW9uUG9pbnQueCwgYmFsbENvbm5lY3Rpb25Qb2ludC55LCBiYWxsRGlhbWV0ZXIgLyAyLCAwLCAyICogTWF0aC5QSSwgZmFsc2UgKTtcclxuICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbCgpO1xyXG4gICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBmb3IgYmV0dGVyIGxheWVyaW5nIGRyYXcgZWRnZXMgYWZ0ZXIgYmFsbCBhbmQgc3RyaW5nXHJcbiAgICAgIHVwZGF0ZUVkZ2VTaGFwZXMoIGNvbnRleHQsIHRoaXMsIHRyYW5zZm9ybWVkQ2hhbm5lbFBvc2l0aW9uLCB0cmFuc2Zvcm1lZENoYW5uZWxTaXplLCBlZGdlTm9kZUJvdW5kcyxcclxuICAgICAgICB0cmFuc2Zvcm1lZEVkZ2VOb2RlU2l6ZSwgbWVtYnJhbmVDaGFubmVsTW9kZWwgKTtcclxuICAgIH0gKTtcclxuICB9XHJcbn1cclxuXHJcbm5ldXJvbi5yZWdpc3RlciggJ01lbWJyYW5lQ2hhbm5lbEdhdGVDYW52YXNOb2RlJywgTWVtYnJhbmVDaGFubmVsR2F0ZUNhbnZhc05vZGUgKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IE1lbWJyYW5lQ2hhbm5lbEdhdGVDYW52YXNOb2RlO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsVUFBVSxNQUFNLGtDQUFrQztBQUN6RCxPQUFPQyxPQUFPLE1BQU0sK0JBQStCO0FBQ25ELFNBQVNDLFVBQVUsRUFBRUMsS0FBSyxRQUFRLGdDQUFnQztBQUNsRSxTQUFTQyxVQUFVLEVBQUVDLEtBQUssUUFBUSxtQ0FBbUM7QUFDckUsT0FBT0MsTUFBTSxNQUFNLGlCQUFpQjtBQUNwQyxPQUFPQyxlQUFlLE1BQU0sOEJBQThCO0FBQzFELE9BQU9DLG9CQUFvQixNQUFNLGtDQUFrQzs7QUFF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