// Copyright 2014-2022, University of Colorado Boulder

/**
 * Scenery Node that displays a thermometer with labels attached to the left hand side of the thermometer
 *
 * @author Martin Veillette (Berea College)
 * @author Arnab Purkayastha
 */

import Dimension2 from '../../../../dot/js/Dimension2.js';
import Utils from '../../../../dot/js/Utils.js';
import { Shape } from '../../../../kite/js/imports.js';
import merge from '../../../../phet-core/js/merge.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import ThermometerNode from '../../../../scenery-phet/js/ThermometerNode.js';
import { DragListener, Node, Path, Text } from '../../../../scenery/js/imports.js';
import Tandem from '../../../../tandem/js/Tandem.js';
import BlackbodyConstants from '../../BlackbodyConstants.js';
import blackbodySpectrum from '../../blackbodySpectrum.js';
import BlackbodySpectrumStrings from '../../BlackbodySpectrumStrings.js';
import BlackbodyColors from './BlackbodyColors.js';
import TriangleSliderThumb from './TriangleSliderThumb.js';

// string
const earthString = BlackbodySpectrumStrings.earth;
const lightBulbString = BlackbodySpectrumStrings.lightBulb;
const siriusAString = BlackbodySpectrumStrings.siriusA;
const sunString = BlackbodySpectrumStrings.sun;

// constants
const TICK_MARKS = [{
  text: siriusAString,
  temperature: BlackbodyConstants.siriusATemperature
}, {
  text: sunString,
  temperature: BlackbodyConstants.sunTemperature
}, {
  text: lightBulbString,
  temperature: BlackbodyConstants.lightBulbTemperature
}, {
  text: earthString,
  temperature: BlackbodyConstants.earthTemperature
}];
class BlackbodySpectrumThermometer extends ThermometerNode {
  /**
   * Constructs a thermometer for the sim given the Property for the temperature to track
   * @param {Property.<number>} temperatureProperty
   * @param {Object} [options]
   */
  constructor(temperatureProperty, options) {
    options = merge({
      minTemperature: BlackbodyConstants.minTemperature,
      maxTemperature: BlackbodyConstants.maxTemperature,
      bulbDiameter: 35,
      tubeWidth: 20,
      tubeHeight: 400,
      majorTickLength: 10,
      minorTickLength: 5,
      glassThickness: 5,
      lineWidth: 3,
      outlineStroke: BlackbodyColors.thermometerTubeStrokeProperty,
      tickSpacingTemperature: 500,
      tickLabelFont: new PhetFont({
        size: 18
      }),
      tickLabelColor: BlackbodyColors.thermometerTubeStrokeProperty,
      tickLabelWidth: 100,
      snapInterval: 50,
      zeroLevel: 'bulbTop',
      thumbSize: 25,
      tandem: Tandem.REQUIRED
    }, options);
    super(temperatureProperty, options.minTemperature, options.maxTemperature, options);

    // labeled tick marks
    const tickContainer = new Node({
      children: _.range(0, TICK_MARKS.length).map(i => this.createLabeledTick(i, options)),
      tandem: options.tandem.createTandem('labelsNode')
    });
    const thumbDimension = new Dimension2(options.thumbSize, options.thumbSize);

    // @private thumb node thermometer's slider
    this.triangleNode = new TriangleSliderThumb({
      size: thumbDimension,
      tandem: options.tandem.createTandem('slider')
    });
    this.triangleNode.touchArea = this.triangleNode.localBounds.dilatedXY(10, 10);
    let clickYOffset;
    this.triangleNode.addInputListener(new DragListener({
      start: event => {
        clickYOffset = this.triangleNode.globalToParentPoint(event.pointer.point).y - this.triangleNode.y;
      },
      drag: event => {
        const y = this.triangleNode.globalToParentPoint(event.pointer.point).y - clickYOffset;

        // Clamp to make sure temperature Property is within graph bounds
        temperatureProperty.value = Utils.clamp(Utils.roundToInterval(this.yPosToTemperature(-y), options.snapInterval), options.minTemperature, options.maxTemperature);
        this.updateThumb(temperatureProperty, options);
      },
      allowTouchSnag: true,
      tandem: options.tandem.createTandem('dragListener')
    }));
    this.triangleNode.rotation = -Math.PI / 2;
    this.triangleNode.left = options.tubeWidth / 2;
    this.triangleNode.centerY = -this.temperatureToYPos(TICK_MARKS[1].temperature);
    this.addChild(tickContainer);
    this.addChild(this.triangleNode);

    // @private position of the center of the thermometer (not the whole node) relative to the right of the node
    this._thermometerCenterXFromRight = -this.triangleNode.width - options.tubeWidth / 2;
  }

  /**
   * Reset Properties associated with this Node
   * @public
   */
  reset() {
    this.triangleNode.centerY = -this.temperatureToYPos(TICK_MARKS[1].temperature);
    this.triangleNode.reset();
  }

  /**
   * Creates a labeled tick mark.
   * @param {number} tickMarkIndex
   * @param {Object} [options] - options that were provided to BlackbodySpectrumThermometer constructor
   * @returns {Node}
   * @private
   */
  createLabeledTick(tickMarkIndex, options) {
    const text = TICK_MARKS[tickMarkIndex].text;
    const temperature = TICK_MARKS[tickMarkIndex].temperature;
    const objectHeight = -this.temperatureToYPos(temperature);
    const tickMarkLength = options.tubeWidth * 0.5;
    const shape = new Shape();
    shape.moveTo(options.tubeWidth / 2, objectHeight).horizontalLineToRelative(tickMarkLength);
    const tickNode = new Path(shape, {
      stroke: options.outlineStroke,
      lineWidth: options.lineWidth
    });
    const textNode = new Text(text, {
      font: options.tickLabelFont,
      fill: options.tickLabelColor,
      maxWidth: options.tickLabelWidth
    });
    const parentNode = new Node({
      children: [tickNode, textNode]
    });
    tickNode.right = -0.5 * options.tubeWidth;
    tickNode.centerY = objectHeight;
    textNode.centerY = objectHeight;
    textNode.right = tickNode.left - 10;
    return parentNode;
  }

  /**
   * Updates the position of the thumb
   * @param {Property.<number>} [temperatureProperty]
   * @param {Object} [options]
   * @public
   */
  updateThumb(temperatureProperty, options) {
    assert && assert(temperatureProperty.value >= options.minTemperature && temperatureProperty.value <= options.maxTemperature, 'temperature has exceeded thermometer bounds');
    this.triangleNode.left = options.tubeWidth / 2;
    this.triangleNode.centerY = -this.temperatureToYPos(temperatureProperty.value);
  }

  /**
   * Get horizontal position of thermometer center relative to centerX of the node
   * @returns {number}
   * @public
   */
  get thermometerCenterXFromRight() {
    return this._thermometerCenterXFromRight;
  }
}
blackbodySpectrum.register('BlackbodySpectrumThermometer', BlackbodySpectrumThermometer);
export default BlackbodySpectrumThermometer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEaW1lbnNpb24yIiwiVXRpbHMiLCJTaGFwZSIsIm1lcmdlIiwiUGhldEZvbnQiLCJUaGVybW9tZXRlck5vZGUiLCJEcmFnTGlzdGVuZXIiLCJOb2RlIiwiUGF0aCIsIlRleHQiLCJUYW5kZW0iLCJCbGFja2JvZHlDb25zdGFudHMiLCJibGFja2JvZHlTcGVjdHJ1bSIsIkJsYWNrYm9keVNwZWN0cnVtU3RyaW5ncyIsIkJsYWNrYm9keUNvbG9ycyIsIlRyaWFuZ2xlU2xpZGVyVGh1bWIiLCJlYXJ0aFN0cmluZyIsImVhcnRoIiwibGlnaHRCdWxiU3RyaW5nIiwibGlnaHRCdWxiIiwic2lyaXVzQVN0cmluZyIsInNpcml1c0EiLCJzdW5TdHJpbmciLCJzdW4iLCJUSUNLX01BUktTIiwidGV4dCIsInRlbXBlcmF0dXJlIiwic2lyaXVzQVRlbXBlcmF0dXJlIiwic3VuVGVtcGVyYXR1cmUiLCJsaWdodEJ1bGJUZW1wZXJhdHVyZSIsImVhcnRoVGVtcGVyYXR1cmUiLCJCbGFja2JvZHlTcGVjdHJ1bVRoZXJtb21ldGVyIiwiY29uc3RydWN0b3IiLCJ0ZW1wZXJhdHVyZVByb3BlcnR5Iiwib3B0aW9ucyIsIm1pblRlbXBlcmF0dXJlIiwibWF4VGVtcGVyYXR1cmUiLCJidWxiRGlhbWV0ZXIiLCJ0dWJlV2lkdGgiLCJ0dWJlSGVpZ2h0IiwibWFqb3JUaWNrTGVuZ3RoIiwibWlub3JUaWNrTGVuZ3RoIiwiZ2xhc3NUaGlja25lc3MiLCJsaW5lV2lkdGgiLCJvdXRsaW5lU3Ryb2tlIiwidGhlcm1vbWV0ZXJUdWJlU3Ryb2tlUHJvcGVydHkiLCJ0aWNrU3BhY2luZ1RlbXBlcmF0dXJlIiwidGlja0xhYmVsRm9udCIsInNpemUiLCJ0aWNrTGFiZWxDb2xvciIsInRpY2tMYWJlbFdpZHRoIiwic25hcEludGVydmFsIiwiemVyb0xldmVsIiwidGh1bWJTaXplIiwidGFuZGVtIiwiUkVRVUlSRUQiLCJ0aWNrQ29udGFpbmVyIiwiY2hpbGRyZW4iLCJfIiwicmFuZ2UiLCJsZW5ndGgiLCJtYXAiLCJpIiwiY3JlYXRlTGFiZWxlZFRpY2siLCJjcmVhdGVUYW5kZW0iLCJ0aHVtYkRpbWVuc2lvbiIsInRyaWFuZ2xlTm9kZSIsInRvdWNoQXJlYSIsImxvY2FsQm91bmRzIiwiZGlsYXRlZFhZIiwiY2xpY2tZT2Zmc2V0IiwiYWRkSW5wdXRMaXN0ZW5lciIsInN0YXJ0IiwiZXZlbnQiLCJnbG9iYWxUb1BhcmVudFBvaW50IiwicG9pbnRlciIsInBvaW50IiwieSIsImRyYWciLCJ2YWx1ZSIsImNsYW1wIiwicm91bmRUb0ludGVydmFsIiwieVBvc1RvVGVtcGVyYXR1cmUiLCJ1cGRhdGVUaHVtYiIsImFsbG93VG91Y2hTbmFnIiwicm90YXRpb24iLCJNYXRoIiwiUEkiLCJsZWZ0IiwiY2VudGVyWSIsInRlbXBlcmF0dXJlVG9ZUG9zIiwiYWRkQ2hpbGQiLCJfdGhlcm1vbWV0ZXJDZW50ZXJYRnJvbVJpZ2h0Iiwid2lkdGgiLCJyZXNldCIsInRpY2tNYXJrSW5kZXgiLCJvYmplY3RIZWlnaHQiLCJ0aWNrTWFya0xlbmd0aCIsInNoYXBlIiwibW92ZVRvIiwiaG9yaXpvbnRhbExpbmVUb1JlbGF0aXZlIiwidGlja05vZGUiLCJzdHJva2UiLCJ0ZXh0Tm9kZSIsImZvbnQiLCJmaWxsIiwibWF4V2lkdGgiLCJwYXJlbnROb2RlIiwicmlnaHQiLCJhc3NlcnQiLCJ0aGVybW9tZXRlckNlbnRlclhGcm9tUmlnaHQiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkJsYWNrYm9keVNwZWN0cnVtVGhlcm1vbWV0ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTQtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogU2NlbmVyeSBOb2RlIHRoYXQgZGlzcGxheXMgYSB0aGVybW9tZXRlciB3aXRoIGxhYmVscyBhdHRhY2hlZCB0byB0aGUgbGVmdCBoYW5kIHNpZGUgb2YgdGhlIHRoZXJtb21ldGVyXHJcbiAqXHJcbiAqIEBhdXRob3IgTWFydGluIFZlaWxsZXR0ZSAoQmVyZWEgQ29sbGVnZSlcclxuICogQGF1dGhvciBBcm5hYiBQdXJrYXlhc3RoYVxyXG4gKi9cclxuXHJcbmltcG9ydCBEaW1lbnNpb24yIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9EaW1lbnNpb24yLmpzJztcclxuaW1wb3J0IFV0aWxzIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9VdGlscy5qcyc7XHJcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSAnLi4vLi4vLi4vLi4va2l0ZS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IG1lcmdlIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9tZXJnZS5qcyc7XHJcbmltcG9ydCBQaGV0Rm9udCBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvUGhldEZvbnQuanMnO1xyXG5pbXBvcnQgVGhlcm1vbWV0ZXJOb2RlIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9UaGVybW9tZXRlck5vZGUuanMnO1xyXG5pbXBvcnQgeyBEcmFnTGlzdGVuZXIsIE5vZGUsIFBhdGgsIFRleHQgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uLy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xyXG5pbXBvcnQgQmxhY2tib2R5Q29uc3RhbnRzIGZyb20gJy4uLy4uL0JsYWNrYm9keUNvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBibGFja2JvZHlTcGVjdHJ1bSBmcm9tICcuLi8uLi9ibGFja2JvZHlTcGVjdHJ1bS5qcyc7XHJcbmltcG9ydCBCbGFja2JvZHlTcGVjdHJ1bVN0cmluZ3MgZnJvbSAnLi4vLi4vQmxhY2tib2R5U3BlY3RydW1TdHJpbmdzLmpzJztcclxuaW1wb3J0IEJsYWNrYm9keUNvbG9ycyBmcm9tICcuL0JsYWNrYm9keUNvbG9ycy5qcyc7XHJcbmltcG9ydCBUcmlhbmdsZVNsaWRlclRodW1iIGZyb20gJy4vVHJpYW5nbGVTbGlkZXJUaHVtYi5qcyc7XHJcblxyXG4vLyBzdHJpbmdcclxuY29uc3QgZWFydGhTdHJpbmcgPSBCbGFja2JvZHlTcGVjdHJ1bVN0cmluZ3MuZWFydGg7XHJcbmNvbnN0IGxpZ2h0QnVsYlN0cmluZyA9IEJsYWNrYm9keVNwZWN0cnVtU3RyaW5ncy5saWdodEJ1bGI7XHJcbmNvbnN0IHNpcml1c0FTdHJpbmcgPSBCbGFja2JvZHlTcGVjdHJ1bVN0cmluZ3Muc2lyaXVzQTtcclxuY29uc3Qgc3VuU3RyaW5nID0gQmxhY2tib2R5U3BlY3RydW1TdHJpbmdzLnN1bjtcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBUSUNLX01BUktTID0gW1xyXG4gIHsgdGV4dDogc2lyaXVzQVN0cmluZywgdGVtcGVyYXR1cmU6IEJsYWNrYm9keUNvbnN0YW50cy5zaXJpdXNBVGVtcGVyYXR1cmUgfSxcclxuICB7IHRleHQ6IHN1blN0cmluZywgdGVtcGVyYXR1cmU6IEJsYWNrYm9keUNvbnN0YW50cy5zdW5UZW1wZXJhdHVyZSB9LFxyXG4gIHsgdGV4dDogbGlnaHRCdWxiU3RyaW5nLCB0ZW1wZXJhdHVyZTogQmxhY2tib2R5Q29uc3RhbnRzLmxpZ2h0QnVsYlRlbXBlcmF0dXJlIH0sXHJcbiAgeyB0ZXh0OiBlYXJ0aFN0cmluZywgdGVtcGVyYXR1cmU6IEJsYWNrYm9keUNvbnN0YW50cy5lYXJ0aFRlbXBlcmF0dXJlIH1cclxuXTtcclxuXHJcbmNsYXNzIEJsYWNrYm9keVNwZWN0cnVtVGhlcm1vbWV0ZXIgZXh0ZW5kcyBUaGVybW9tZXRlck5vZGUge1xyXG5cclxuICAvKipcclxuICAgKiBDb25zdHJ1Y3RzIGEgdGhlcm1vbWV0ZXIgZm9yIHRoZSBzaW0gZ2l2ZW4gdGhlIFByb3BlcnR5IGZvciB0aGUgdGVtcGVyYXR1cmUgdG8gdHJhY2tcclxuICAgKiBAcGFyYW0ge1Byb3BlcnR5LjxudW1iZXI+fSB0ZW1wZXJhdHVyZVByb3BlcnR5XHJcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCB0ZW1wZXJhdHVyZVByb3BlcnR5LCBvcHRpb25zICkge1xyXG5cclxuICAgIG9wdGlvbnMgPSBtZXJnZSgge1xyXG4gICAgICBtaW5UZW1wZXJhdHVyZTogQmxhY2tib2R5Q29uc3RhbnRzLm1pblRlbXBlcmF0dXJlLFxyXG4gICAgICBtYXhUZW1wZXJhdHVyZTogQmxhY2tib2R5Q29uc3RhbnRzLm1heFRlbXBlcmF0dXJlLFxyXG4gICAgICBidWxiRGlhbWV0ZXI6IDM1LFxyXG4gICAgICB0dWJlV2lkdGg6IDIwLFxyXG4gICAgICB0dWJlSGVpZ2h0OiA0MDAsXHJcbiAgICAgIG1ham9yVGlja0xlbmd0aDogMTAsXHJcbiAgICAgIG1pbm9yVGlja0xlbmd0aDogNSxcclxuICAgICAgZ2xhc3NUaGlja25lc3M6IDUsXHJcbiAgICAgIGxpbmVXaWR0aDogMyxcclxuICAgICAgb3V0bGluZVN0cm9rZTogQmxhY2tib2R5Q29sb3JzLnRoZXJtb21ldGVyVHViZVN0cm9rZVByb3BlcnR5LFxyXG4gICAgICB0aWNrU3BhY2luZ1RlbXBlcmF0dXJlOiA1MDAsXHJcbiAgICAgIHRpY2tMYWJlbEZvbnQ6IG5ldyBQaGV0Rm9udCggeyBzaXplOiAxOCB9ICksXHJcbiAgICAgIHRpY2tMYWJlbENvbG9yOiBCbGFja2JvZHlDb2xvcnMudGhlcm1vbWV0ZXJUdWJlU3Ryb2tlUHJvcGVydHksXHJcbiAgICAgIHRpY2tMYWJlbFdpZHRoOiAxMDAsXHJcbiAgICAgIHNuYXBJbnRlcnZhbDogNTAsXHJcbiAgICAgIHplcm9MZXZlbDogJ2J1bGJUb3AnLFxyXG4gICAgICB0aHVtYlNpemU6IDI1LFxyXG5cclxuICAgICAgdGFuZGVtOiBUYW5kZW0uUkVRVUlSRURcclxuICAgIH0sIG9wdGlvbnMgKTtcclxuXHJcbiAgICBzdXBlciggdGVtcGVyYXR1cmVQcm9wZXJ0eSwgb3B0aW9ucy5taW5UZW1wZXJhdHVyZSwgb3B0aW9ucy5tYXhUZW1wZXJhdHVyZSwgb3B0aW9ucyApO1xyXG5cclxuICAgIC8vIGxhYmVsZWQgdGljayBtYXJrc1xyXG4gICAgY29uc3QgdGlja0NvbnRhaW5lciA9IG5ldyBOb2RlKCB7XHJcbiAgICAgIGNoaWxkcmVuOiBfLnJhbmdlKCAwLCBUSUNLX01BUktTLmxlbmd0aCApLm1hcCggaSA9PiB0aGlzLmNyZWF0ZUxhYmVsZWRUaWNrKCBpLCBvcHRpb25zICkgKSxcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdsYWJlbHNOb2RlJyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgdGh1bWJEaW1lbnNpb24gPSBuZXcgRGltZW5zaW9uMiggb3B0aW9ucy50aHVtYlNpemUsIG9wdGlvbnMudGh1bWJTaXplICk7XHJcblxyXG4gICAgLy8gQHByaXZhdGUgdGh1bWIgbm9kZSB0aGVybW9tZXRlcidzIHNsaWRlclxyXG4gICAgdGhpcy50cmlhbmdsZU5vZGUgPSBuZXcgVHJpYW5nbGVTbGlkZXJUaHVtYigge1xyXG4gICAgICBzaXplOiB0aHVtYkRpbWVuc2lvbixcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdzbGlkZXInIClcclxuICAgIH0gKTtcclxuICAgIHRoaXMudHJpYW5nbGVOb2RlLnRvdWNoQXJlYSA9IHRoaXMudHJpYW5nbGVOb2RlLmxvY2FsQm91bmRzLmRpbGF0ZWRYWSggMTAsIDEwICk7XHJcblxyXG4gICAgbGV0IGNsaWNrWU9mZnNldDtcclxuICAgIHRoaXMudHJpYW5nbGVOb2RlLmFkZElucHV0TGlzdGVuZXIoIG5ldyBEcmFnTGlzdGVuZXIoIHtcclxuICAgICAgc3RhcnQ6IGV2ZW50ID0+IHtcclxuICAgICAgICBjbGlja1lPZmZzZXQgPSB0aGlzLnRyaWFuZ2xlTm9kZS5nbG9iYWxUb1BhcmVudFBvaW50KCBldmVudC5wb2ludGVyLnBvaW50ICkueSAtIHRoaXMudHJpYW5nbGVOb2RlLnk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGRyYWc6IGV2ZW50ID0+IHtcclxuICAgICAgICBjb25zdCB5ID0gdGhpcy50cmlhbmdsZU5vZGUuZ2xvYmFsVG9QYXJlbnRQb2ludCggZXZlbnQucG9pbnRlci5wb2ludCApLnkgLSBjbGlja1lPZmZzZXQ7XHJcblxyXG4gICAgICAgIC8vIENsYW1wIHRvIG1ha2Ugc3VyZSB0ZW1wZXJhdHVyZSBQcm9wZXJ0eSBpcyB3aXRoaW4gZ3JhcGggYm91bmRzXHJcbiAgICAgICAgdGVtcGVyYXR1cmVQcm9wZXJ0eS52YWx1ZSA9IFV0aWxzLmNsYW1wKFxyXG4gICAgICAgICAgVXRpbHMucm91bmRUb0ludGVydmFsKCB0aGlzLnlQb3NUb1RlbXBlcmF0dXJlKCAteSApLCBvcHRpb25zLnNuYXBJbnRlcnZhbCApLFxyXG4gICAgICAgICAgb3B0aW9ucy5taW5UZW1wZXJhdHVyZSxcclxuICAgICAgICAgIG9wdGlvbnMubWF4VGVtcGVyYXR1cmVcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMudXBkYXRlVGh1bWIoIHRlbXBlcmF0dXJlUHJvcGVydHksIG9wdGlvbnMgKTtcclxuICAgICAgfSxcclxuICAgICAgYWxsb3dUb3VjaFNuYWc6IHRydWUsXHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnZHJhZ0xpc3RlbmVyJyApXHJcbiAgICB9ICkgKTtcclxuXHJcbiAgICB0aGlzLnRyaWFuZ2xlTm9kZS5yb3RhdGlvbiA9IC1NYXRoLlBJIC8gMjtcclxuICAgIHRoaXMudHJpYW5nbGVOb2RlLmxlZnQgPSBvcHRpb25zLnR1YmVXaWR0aCAvIDI7XHJcbiAgICB0aGlzLnRyaWFuZ2xlTm9kZS5jZW50ZXJZID0gLXRoaXMudGVtcGVyYXR1cmVUb1lQb3MoIFRJQ0tfTUFSS1NbIDEgXS50ZW1wZXJhdHVyZSApO1xyXG5cclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRpY2tDb250YWluZXIgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMudHJpYW5nbGVOb2RlICk7XHJcblxyXG4gICAgLy8gQHByaXZhdGUgcG9zaXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGUgdGhlcm1vbWV0ZXIgKG5vdCB0aGUgd2hvbGUgbm9kZSkgcmVsYXRpdmUgdG8gdGhlIHJpZ2h0IG9mIHRoZSBub2RlXHJcbiAgICB0aGlzLl90aGVybW9tZXRlckNlbnRlclhGcm9tUmlnaHQgPSAtdGhpcy50cmlhbmdsZU5vZGUud2lkdGggLSBvcHRpb25zLnR1YmVXaWR0aCAvIDI7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXNldCBQcm9wZXJ0aWVzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIE5vZGVcclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgcmVzZXQoKSB7XHJcbiAgICB0aGlzLnRyaWFuZ2xlTm9kZS5jZW50ZXJZID0gLXRoaXMudGVtcGVyYXR1cmVUb1lQb3MoIFRJQ0tfTUFSS1NbIDEgXS50ZW1wZXJhdHVyZSApO1xyXG4gICAgdGhpcy50cmlhbmdsZU5vZGUucmVzZXQoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgYSBsYWJlbGVkIHRpY2sgbWFyay5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gdGlja01hcmtJbmRleFxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBvcHRpb25zIHRoYXQgd2VyZSBwcm92aWRlZCB0byBCbGFja2JvZHlTcGVjdHJ1bVRoZXJtb21ldGVyIGNvbnN0cnVjdG9yXHJcbiAgICogQHJldHVybnMge05vZGV9XHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBjcmVhdGVMYWJlbGVkVGljayggdGlja01hcmtJbmRleCwgb3B0aW9ucyApIHtcclxuICAgIGNvbnN0IHRleHQgPSBUSUNLX01BUktTWyB0aWNrTWFya0luZGV4IF0udGV4dDtcclxuICAgIGNvbnN0IHRlbXBlcmF0dXJlID0gVElDS19NQVJLU1sgdGlja01hcmtJbmRleCBdLnRlbXBlcmF0dXJlO1xyXG5cclxuICAgIGNvbnN0IG9iamVjdEhlaWdodCA9IC10aGlzLnRlbXBlcmF0dXJlVG9ZUG9zKCB0ZW1wZXJhdHVyZSApO1xyXG4gICAgY29uc3QgdGlja01hcmtMZW5ndGggPSBvcHRpb25zLnR1YmVXaWR0aCAqIDAuNTtcclxuXHJcbiAgICBjb25zdCBzaGFwZSA9IG5ldyBTaGFwZSgpO1xyXG4gICAgc2hhcGUubW92ZVRvKCBvcHRpb25zLnR1YmVXaWR0aCAvIDIsIG9iamVjdEhlaWdodCApLmhvcml6b250YWxMaW5lVG9SZWxhdGl2ZSggdGlja01hcmtMZW5ndGggKTtcclxuXHJcbiAgICBjb25zdCB0aWNrTm9kZSA9IG5ldyBQYXRoKCBzaGFwZSwgeyBzdHJva2U6IG9wdGlvbnMub3V0bGluZVN0cm9rZSwgbGluZVdpZHRoOiBvcHRpb25zLmxpbmVXaWR0aCB9ICk7XHJcbiAgICBjb25zdCB0ZXh0Tm9kZSA9IG5ldyBUZXh0KCB0ZXh0LCB7XHJcbiAgICAgIGZvbnQ6IG9wdGlvbnMudGlja0xhYmVsRm9udCxcclxuICAgICAgZmlsbDogb3B0aW9ucy50aWNrTGFiZWxDb2xvcixcclxuICAgICAgbWF4V2lkdGg6IG9wdGlvbnMudGlja0xhYmVsV2lkdGhcclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCBwYXJlbnROb2RlID0gbmV3IE5vZGUoIHtcclxuICAgICAgY2hpbGRyZW46IFsgdGlja05vZGUsIHRleHROb2RlIF1cclxuICAgIH0gKTtcclxuXHJcbiAgICB0aWNrTm9kZS5yaWdodCA9IC0wLjUgKiBvcHRpb25zLnR1YmVXaWR0aDtcclxuICAgIHRpY2tOb2RlLmNlbnRlclkgPSBvYmplY3RIZWlnaHQ7XHJcbiAgICB0ZXh0Tm9kZS5jZW50ZXJZID0gb2JqZWN0SGVpZ2h0O1xyXG4gICAgdGV4dE5vZGUucmlnaHQgPSB0aWNrTm9kZS5sZWZ0IC0gMTA7XHJcblxyXG4gICAgcmV0dXJuIHBhcmVudE5vZGU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBVcGRhdGVzIHRoZSBwb3NpdGlvbiBvZiB0aGUgdGh1bWJcclxuICAgKiBAcGFyYW0ge1Byb3BlcnR5LjxudW1iZXI+fSBbdGVtcGVyYXR1cmVQcm9wZXJ0eV1cclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG4gIHVwZGF0ZVRodW1iKCB0ZW1wZXJhdHVyZVByb3BlcnR5LCBvcHRpb25zICkge1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdGVtcGVyYXR1cmVQcm9wZXJ0eS52YWx1ZSA+PSBvcHRpb25zLm1pblRlbXBlcmF0dXJlICYmXHJcbiAgICB0ZW1wZXJhdHVyZVByb3BlcnR5LnZhbHVlIDw9IG9wdGlvbnMubWF4VGVtcGVyYXR1cmUsXHJcbiAgICAgICd0ZW1wZXJhdHVyZSBoYXMgZXhjZWVkZWQgdGhlcm1vbWV0ZXIgYm91bmRzJyApO1xyXG4gICAgdGhpcy50cmlhbmdsZU5vZGUubGVmdCA9IG9wdGlvbnMudHViZVdpZHRoIC8gMjtcclxuICAgIHRoaXMudHJpYW5nbGVOb2RlLmNlbnRlclkgPSAtdGhpcy50ZW1wZXJhdHVyZVRvWVBvcyggdGVtcGVyYXR1cmVQcm9wZXJ0eS52YWx1ZSApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGhvcml6b250YWwgcG9zaXRpb24gb2YgdGhlcm1vbWV0ZXIgY2VudGVyIHJlbGF0aXZlIHRvIGNlbnRlclggb2YgdGhlIG5vZGVcclxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBnZXQgdGhlcm1vbWV0ZXJDZW50ZXJYRnJvbVJpZ2h0KCkgeyByZXR1cm4gdGhpcy5fdGhlcm1vbWV0ZXJDZW50ZXJYRnJvbVJpZ2h0OyB9XHJcbn1cclxuXHJcbmJsYWNrYm9keVNwZWN0cnVtLnJlZ2lzdGVyKCAnQmxhY2tib2R5U3BlY3RydW1UaGVybW9tZXRlcicsIEJsYWNrYm9keVNwZWN0cnVtVGhlcm1vbWV0ZXIgKTtcclxuZXhwb3J0IGRlZmF1bHQgQmxhY2tib2R5U3BlY3RydW1UaGVybW9tZXRlcjtcclxuIl0sIm1hcHBpbmdzIjoiQUFB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