// Copyright 2018-2022, University of Colorado Boulder

/**
 * Control panel with Checkboxes that control the graphical properties of the simulation
 *
 * @author Arnab Purkayastha
 * @author Saurabh Totey
 */

import merge from '../../../../phet-core/js/merge.js';
import StringUtils from '../../../../phetcommon/js/util/StringUtils.js';
import EraserButton from '../../../../scenery-phet/js/buttons/EraserButton.js';
import PhetColorScheme from '../../../../scenery-phet/js/PhetColorScheme.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import ScientificNotationNode from '../../../../scenery-phet/js/ScientificNotationNode.js';
import { HBox, HSeparator, Node, Path, Rectangle, RichText, Text, VBox } from '../../../../scenery/js/imports.js';
import cameraSolidShape from '../../../../sherpa/js/fontawesome-5/cameraSolidShape.js';
import RectangularPushButton from '../../../../sun/js/buttons/RectangularPushButton.js';
import Checkbox from '../../../../sun/js/Checkbox.js';
import Panel from '../../../../sun/js/Panel.js';
import Tandem from '../../../../tandem/js/Tandem.js';
import blackbodySpectrum from '../../blackbodySpectrum.js';
import BlackbodySpectrumStrings from '../../BlackbodySpectrumStrings.js';
import BlackbodyColors from './BlackbodyColors.js';
const graphValuesString = BlackbodySpectrumStrings.graphValues;
const intensityString = BlackbodySpectrumStrings.intensity;
const intensityUnitsLabelString = BlackbodySpectrumStrings.intensityUnitsLabel;
const labelsString = BlackbodySpectrumStrings.labels;

// constants
const DISPLAY_FONT = new PhetFont(18);
const CHECKBOX_TEXT_FILL = BlackbodyColors.panelTextProperty;
const CHECKBOX_TEXT_WIDTH = 110;
const CONTROL_PANEL_FILL = 'rgba( 0, 0, 0, 0 )';
const CHECKBOX_COLOR = BlackbodyColors.panelStrokeProperty;
const CHECKBOX_TOUCH_DILATION = 6;
const BUTTON_ICON_WIDTH = 50;
const BUTTON_TOUCH_DILATION = 6;
const CHECKBOX_DEFAULT_WIDTH = 140;
const INTENSITY_TEXT_OPTIONS = {
  font: new PhetFont(18),
  fill: 'white'
};
const INTENSITY_TEXT_BOX_STROKE = 'red';
const INTENSITY_TEXT_BOX_FILL = 'gray';
const INTENSITY_TEXT_BOX_PADDING = 5;
const SEPARATOR_COLOR = 'rgb( 212, 212, 212 )';
class BlackbodySpectrumControlPanel extends Panel {
  /**
   * @param {BlackbodySpectrumModel} model
   * @param {Object} [options]
   */
  constructor(model, options) {
    options = merge({
      xMargin: 10,
      yMargin: 15,
      lineWidth: 1,
      fill: CONTROL_PANEL_FILL,
      resize: true,
      stroke: BlackbodyColors.panelStrokeProperty,
      maxWidth: CHECKBOX_DEFAULT_WIDTH,
      // phet-io
      tandem: Tandem.REQUIRED
    }, options);

    // create the text nodes
    const checkboxTextOptions = {
      font: DISPLAY_FONT,
      fill: CHECKBOX_TEXT_FILL,
      maxWidth: CHECKBOX_TEXT_WIDTH
    };
    const valuesCheckboxText = new Text(graphValuesString, checkboxTextOptions);
    const intensityCheckboxText = new Text(intensityString, checkboxTextOptions);
    const labelsCheckboxText = new Text(labelsString, checkboxTextOptions);

    // Save button
    const saveButton = new RectangularPushButton({
      content: new Path(cameraSolidShape, {
        maxWidth: BUTTON_ICON_WIDTH,
        fill: 'black'
      }),
      maxWidth: BUTTON_ICON_WIDTH,
      baseColor: PhetColorScheme.BUTTON_YELLOW,
      touchAreaXDilation: BUTTON_TOUCH_DILATION,
      touchAreaYDilation: BUTTON_TOUCH_DILATION,
      listener: () => {
        model.saveMainBody();
      },
      tandem: options.tandem.createTandem('saveButton')
    });

    // Erase button
    const eraseButton = new EraserButton({
      iconWidth: BUTTON_ICON_WIDTH,
      maxWidth: BUTTON_ICON_WIDTH,
      touchAreaXDilation: BUTTON_TOUCH_DILATION,
      touchAreaYDilation: BUTTON_TOUCH_DILATION,
      listener: () => {
        model.clearSavedGraphs();
      },
      tandem: options.tandem.createTandem('eraseButton')
    });

    // Makes the eraseButton enabled when there is a saved graph to clear, and disabled when there is no graph to clear.
    // This assumes that there cannot be a savedBodyTwo without a savedBodyOne.
    model.savedBodyOne.temperatureProperty.link(temperature => {
      eraseButton.enabled = temperature !== null;
    });

    // checkboxes
    const checkboxOptions = {
      checkboxColorBackground: CONTROL_PANEL_FILL,
      checkboxColor: CHECKBOX_COLOR
    };
    const valuesCheckbox = new Checkbox(model.graphValuesVisibleProperty, valuesCheckboxText, _.assign(checkboxOptions, {
      tandem: options.tandem.createTandem('graphValuesCheckbox')
    }));
    const intensityCheckbox = new Checkbox(model.intensityVisibleProperty, intensityCheckboxText, _.assign(checkboxOptions, {
      tandem: options.tandem.createTandem('intensityCheckbox')
    }));
    const labelsCheckbox = new Checkbox(model.labelsVisibleProperty, labelsCheckboxText, _.assign(checkboxOptions, {
      tandem: options.tandem.createTandem('labelsCheckbox')
    }));
    valuesCheckbox.touchArea = valuesCheckbox.localBounds.dilated(CHECKBOX_TOUCH_DILATION);
    intensityCheckbox.touchArea = intensityCheckbox.localBounds.dilated(CHECKBOX_TOUCH_DILATION);
    labelsCheckbox.touchArea = labelsCheckbox.localBounds.dilated(CHECKBOX_TOUCH_DILATION);
    const intensityText = new RichText('?', INTENSITY_TEXT_OPTIONS);
    const intensityTextBox = new Rectangle(0, 0, intensityText.width + INTENSITY_TEXT_BOX_PADDING, intensityText.height + INTENSITY_TEXT_BOX_PADDING, 0, 0, {
      children: [intensityText],
      stroke: INTENSITY_TEXT_BOX_STROKE,
      fill: INTENSITY_TEXT_BOX_FILL
    });

    // Links the intensity text to update whenever the model's temperature changes
    model.mainBody.temperatureProperty.link(() => {
      // Gets the model intensity and formats it to a nice scientific notation string to put as the intensityText
      const notationObject = ScientificNotationNode.toScientificNotation(model.mainBody.totalIntensity, {
        mantissaDecimalPlaces: 2
      });
      let formattedString = notationObject.mantissa;
      if (notationObject.exponent !== '0') {
        formattedString += ` \u00D7 10<sup>${notationObject.exponent}</sup>`;
      }
      intensityText.string = StringUtils.fillIn(intensityUnitsLabelString, {
        intensity: formattedString
      });

      // Updates positions and sizes
      const textWidth = CHECKBOX_DEFAULT_WIDTH > intensityText.width + 20 ? CHECKBOX_DEFAULT_WIDTH : intensityText.width + 20;
      intensityTextBox.setRect(0, 0, textWidth, intensityText.height + 10, 0, 0);
      intensityText.center = intensityTextBox.center;
    });
    const spacing = 15;
    const buttons = new HBox({
      children: [new Node({
        children: [saveButton]
      }), new Node({
        children: [eraseButton]
      })],
      spacing: spacing
    });
    const checkboxes = new VBox({
      children: [valuesCheckbox, labelsCheckbox, intensityCheckbox],
      align: 'left',
      spacing: spacing
    });

    // Create panel to allow left alignment on checkboxes while keeping center alignment for buttons
    const checkboxPanel = new Panel(checkboxes, {
      fill: BlackbodyColors.backgroundProperty,
      stroke: BlackbodyColors.backgroundProperty,
      minWidth: CHECKBOX_DEFAULT_WIDTH
    });
    const intensityDisplay = new Node({
      visibleProperty: model.intensityVisibleProperty,
      children: [intensityTextBox],
      maxWidth: CHECKBOX_DEFAULT_WIDTH
    });
    intensityText.center = intensityTextBox.center;
    const content = new VBox({
      children: [checkboxPanel, intensityDisplay, new HSeparator({
        stroke: SEPARATOR_COLOR
      }), buttons],
      align: 'center',
      spacing: spacing,
      resize: true
    });
    super(content, options);
  }
}
blackbodySpectrum.register('BlackbodySpectrumControlPanel', BlackbodySpectrumControlPanel);
export default BlackbodySpectrumControlPanel;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtZXJnZSIsIlN0cmluZ1V0aWxzIiwiRXJhc2VyQnV0dG9uIiwiUGhldENvbG9yU2NoZW1lIiwiUGhldEZvbnQiLCJTY2llbnRpZmljTm90YXRpb25Ob2RlIiwiSEJveCIsIkhTZXBhcmF0b3IiLCJOb2RlIiwiUGF0aCIsIlJlY3RhbmdsZSIsIlJpY2hUZXh0IiwiVGV4dCIsIlZCb3giLCJjYW1lcmFTb2xpZFNoYXBlIiwiUmVjdGFuZ3VsYXJQdXNoQnV0dG9uIiwiQ2hlY2tib3giLCJQYW5lbCIsIlRhbmRlbSIsImJsYWNrYm9keVNwZWN0cnVtIiwiQmxhY2tib2R5U3BlY3RydW1TdHJpbmdzIiwiQmxhY2tib2R5Q29sb3JzIiwiZ3JhcGhWYWx1ZXNTdHJpbmciLCJncmFwaFZhbHVlcyIsImludGVuc2l0eVN0cmluZyIsImludGVuc2l0eSIsImludGVuc2l0eVVuaXRzTGFiZWxTdHJpbmciLCJpbnRlbnNpdHlVbml0c0xhYmVsIiwibGFiZWxzU3RyaW5nIiwibGFiZWxzIiwiRElTUExBWV9GT05UIiwiQ0hFQ0tCT1hfVEVYVF9GSUxMIiwicGFuZWxUZXh0UHJvcGVydHkiLCJDSEVDS0JPWF9URVhUX1dJRFRIIiwiQ09OVFJPTF9QQU5FTF9GSUxMIiwiQ0hFQ0tCT1hfQ09MT1IiLCJwYW5lbFN0cm9rZVByb3BlcnR5IiwiQ0hFQ0tCT1hfVE9VQ0hfRElMQVRJT04iLCJCVVRUT05fSUNPTl9XSURUSCIsIkJVVFRPTl9UT1VDSF9ESUxBVElPTiIsIkNIRUNLQk9YX0RFRkFVTFRfV0lEVEgiLCJJTlRFTlNJVFlfVEVYVF9PUFRJT05TIiwiZm9udCIsImZpbGwiLCJJTlRFTlNJVFlfVEVYVF9CT1hfU1RST0tFIiwiSU5URU5TSVRZX1RFWFRfQk9YX0ZJTEwiLCJJTlRFTlNJVFlfVEVYVF9CT1hfUEFERElORyIsIlNFUEFSQVRPUl9DT0xPUiIsIkJsYWNrYm9keVNwZWN0cnVtQ29udHJvbFBhbmVsIiwiY29uc3RydWN0b3IiLCJtb2RlbCIsIm9wdGlvbnMiLCJ4TWFyZ2luIiwieU1hcmdpbiIsImxpbmVXaWR0aCIsInJlc2l6ZSIsInN0cm9rZSIsIm1heFdpZHRoIiwidGFuZGVtIiwiUkVRVUlSRUQiLCJjaGVja2JveFRleHRPcHRpb25zIiwidmFsdWVzQ2hlY2tib3hUZXh0IiwiaW50ZW5zaXR5Q2hlY2tib3hUZXh0IiwibGFiZWxzQ2hlY2tib3hUZXh0Iiwic2F2ZUJ1dHRvbiIsImNvbnRlbnQiLCJiYXNlQ29sb3IiLCJCVVRUT05fWUVMTE9XIiwidG91Y2hBcmVhWERpbGF0aW9uIiwidG91Y2hBcmVhWURpbGF0aW9uIiwibGlzdGVuZXIiLCJzYXZlTWFpbkJvZHkiLCJjcmVhdGVUYW5kZW0iLCJlcmFzZUJ1dHRvbiIsImljb25XaWR0aCIsImNsZWFyU2F2ZWRHcmFwaHMiLCJzYXZlZEJvZHlPbmUiLCJ0ZW1wZXJhdHVyZVByb3BlcnR5IiwibGluayIsInRlbXBlcmF0dXJlIiwiZW5hYmxlZCIsImNoZWNrYm94T3B0aW9ucyIsImNoZWNrYm94Q29sb3JCYWNrZ3JvdW5kIiwiY2hlY2tib3hDb2xvciIsInZhbHVlc0NoZWNrYm94IiwiZ3JhcGhWYWx1ZXNWaXNpYmxlUHJvcGVydHkiLCJfIiwiYXNzaWduIiwiaW50ZW5zaXR5Q2hlY2tib3giLCJpbnRlbnNpdHlWaXNpYmxlUHJvcGVydHkiLCJsYWJlbHNDaGVja2JveCIsImxhYmVsc1Zpc2libGVQcm9wZXJ0eSIsInRvdWNoQXJlYSIsImxvY2FsQm91bmRzIiwiZGlsYXRlZCIsImludGVuc2l0eVRleHQiLCJpbnRlbnNpdHlUZXh0Qm94Iiwid2lkdGgiLCJoZWlnaHQiLCJjaGlsZHJlbiIsIm1haW5Cb2R5Iiwibm90YXRpb25PYmplY3QiLCJ0b1NjaWVudGlmaWNOb3RhdGlvbiIsInRvdGFsSW50ZW5zaXR5IiwibWFudGlzc2FEZWNpbWFsUGxhY2VzIiwiZm9ybWF0dGVkU3RyaW5nIiwibWFudGlzc2EiLCJleHBvbmVudCIsInN0cmluZyIsImZpbGxJbiIsInRleHRXaWR0aCIsInNldFJlY3QiLCJjZW50ZXIiLCJzcGFjaW5nIiwiYnV0dG9ucyIsImNoZWNrYm94ZXMiLCJhbGlnbiIsImNoZWNrYm94UGFuZWwiLCJiYWNrZ3JvdW5kUHJvcGVydHkiLCJtaW5XaWR0aCIsImludGVuc2l0eURpc3BsYXkiLCJ2aXNpYmxlUHJvcGVydHkiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkJsYWNrYm9keVNwZWN0cnVtQ29udHJvbFBhbmVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE4LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIENvbnRyb2wgcGFuZWwgd2l0aCBDaGVja2JveGVzIHRoYXQgY29udHJvbCB0aGUgZ3JhcGhpY2FsIHByb3BlcnRpZXMgb2YgdGhlIHNpbXVsYXRpb25cclxuICpcclxuICogQGF1dGhvciBBcm5hYiBQdXJrYXlhc3RoYVxyXG4gKiBAYXV0aG9yIFNhdXJhYmggVG90ZXlcclxuICovXHJcblxyXG5pbXBvcnQgbWVyZ2UgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL21lcmdlLmpzJztcclxuaW1wb3J0IFN0cmluZ1V0aWxzIGZyb20gJy4uLy4uLy4uLy4uL3BoZXRjb21tb24vanMvdXRpbC9TdHJpbmdVdGlscy5qcyc7XHJcbmltcG9ydCBFcmFzZXJCdXR0b24gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL2J1dHRvbnMvRXJhc2VyQnV0dG9uLmpzJztcclxuaW1wb3J0IFBoZXRDb2xvclNjaGVtZSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvUGhldENvbG9yU2NoZW1lLmpzJztcclxuaW1wb3J0IFBoZXRGb250IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9QaGV0Rm9udC5qcyc7XHJcbmltcG9ydCBTY2llbnRpZmljTm90YXRpb25Ob2RlIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9TY2llbnRpZmljTm90YXRpb25Ob2RlLmpzJztcclxuaW1wb3J0IHsgSEJveCwgSFNlcGFyYXRvciwgTm9kZSwgUGF0aCwgUmVjdGFuZ2xlLCBSaWNoVGV4dCwgVGV4dCwgVkJveCB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBjYW1lcmFTb2xpZFNoYXBlIGZyb20gJy4uLy4uLy4uLy4uL3NoZXJwYS9qcy9mb250YXdlc29tZS01L2NhbWVyYVNvbGlkU2hhcGUuanMnO1xyXG5pbXBvcnQgUmVjdGFuZ3VsYXJQdXNoQnV0dG9uIGZyb20gJy4uLy4uLy4uLy4uL3N1bi9qcy9idXR0b25zL1JlY3Rhbmd1bGFyUHVzaEJ1dHRvbi5qcyc7XHJcbmltcG9ydCBDaGVja2JveCBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvQ2hlY2tib3guanMnO1xyXG5pbXBvcnQgUGFuZWwgZnJvbSAnLi4vLi4vLi4vLi4vc3VuL2pzL1BhbmVsLmpzJztcclxuaW1wb3J0IFRhbmRlbSBmcm9tICcuLi8uLi8uLi8uLi90YW5kZW0vanMvVGFuZGVtLmpzJztcclxuaW1wb3J0IGJsYWNrYm9keVNwZWN0cnVtIGZyb20gJy4uLy4uL2JsYWNrYm9keVNwZWN0cnVtLmpzJztcclxuaW1wb3J0IEJsYWNrYm9keVNwZWN0cnVtU3RyaW5ncyBmcm9tICcuLi8uLi9CbGFja2JvZHlTcGVjdHJ1bVN0cmluZ3MuanMnO1xyXG5pbXBvcnQgQmxhY2tib2R5Q29sb3JzIGZyb20gJy4vQmxhY2tib2R5Q29sb3JzLmpzJztcclxuXHJcbmNvbnN0IGdyYXBoVmFsdWVzU3RyaW5nID0gQmxhY2tib2R5U3BlY3RydW1TdHJpbmdzLmdyYXBoVmFsdWVzO1xyXG5jb25zdCBpbnRlbnNpdHlTdHJpbmcgPSBCbGFja2JvZHlTcGVjdHJ1bVN0cmluZ3MuaW50ZW5zaXR5O1xyXG5jb25zdCBpbnRlbnNpdHlVbml0c0xhYmVsU3RyaW5nID0gQmxhY2tib2R5U3BlY3RydW1TdHJpbmdzLmludGVuc2l0eVVuaXRzTGFiZWw7XHJcbmNvbnN0IGxhYmVsc1N0cmluZyA9IEJsYWNrYm9keVNwZWN0cnVtU3RyaW5ncy5sYWJlbHM7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgRElTUExBWV9GT05UID0gbmV3IFBoZXRGb250KCAxOCApO1xyXG5jb25zdCBDSEVDS0JPWF9URVhUX0ZJTEwgPSBCbGFja2JvZHlDb2xvcnMucGFuZWxUZXh0UHJvcGVydHk7XHJcbmNvbnN0IENIRUNLQk9YX1RFWFRfV0lEVEggPSAxMTA7XHJcbmNvbnN0IENPTlRST0xfUEFORUxfRklMTCA9ICdyZ2JhKCAwLCAwLCAwLCAwICknO1xyXG5jb25zdCBDSEVDS0JPWF9DT0xPUiA9IEJsYWNrYm9keUNvbG9ycy5wYW5lbFN0cm9rZVByb3BlcnR5O1xyXG5jb25zdCBDSEVDS0JPWF9UT1VDSF9ESUxBVElPTiA9IDY7XHJcbmNvbnN0IEJVVFRPTl9JQ09OX1dJRFRIID0gNTA7XHJcbmNvbnN0IEJVVFRPTl9UT1VDSF9ESUxBVElPTiA9IDY7XHJcbmNvbnN0IENIRUNLQk9YX0RFRkFVTFRfV0lEVEggPSAxNDA7XHJcbmNvbnN0IElOVEVOU0lUWV9URVhUX09QVElPTlMgPSB7XHJcbiAgZm9udDogbmV3IFBoZXRGb250KCAxOCApLFxyXG4gIGZpbGw6ICd3aGl0ZSdcclxufTtcclxuY29uc3QgSU5URU5TSVRZX1RFWFRfQk9YX1NUUk9LRSA9ICdyZWQnO1xyXG5jb25zdCBJTlRFTlNJVFlfVEVYVF9CT1hfRklMTCA9ICdncmF5JztcclxuY29uc3QgSU5URU5TSVRZX1RFWFRfQk9YX1BBRERJTkcgPSA1O1xyXG5jb25zdCBTRVBBUkFUT1JfQ09MT1IgPSAncmdiKCAyMTIsIDIxMiwgMjEyICknO1xyXG5cclxuY2xhc3MgQmxhY2tib2R5U3BlY3RydW1Db250cm9sUGFuZWwgZXh0ZW5kcyBQYW5lbCB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7QmxhY2tib2R5U3BlY3RydW1Nb2RlbH0gbW9kZWxcclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIG1vZGVsLCBvcHRpb25zICkge1xyXG5cclxuICAgIG9wdGlvbnMgPSBtZXJnZSgge1xyXG4gICAgICB4TWFyZ2luOiAxMCxcclxuICAgICAgeU1hcmdpbjogMTUsXHJcbiAgICAgIGxpbmVXaWR0aDogMSxcclxuICAgICAgZmlsbDogQ09OVFJPTF9QQU5FTF9GSUxMLFxyXG4gICAgICByZXNpemU6IHRydWUsXHJcbiAgICAgIHN0cm9rZTogQmxhY2tib2R5Q29sb3JzLnBhbmVsU3Ryb2tlUHJvcGVydHksXHJcbiAgICAgIG1heFdpZHRoOiBDSEVDS0JPWF9ERUZBVUxUX1dJRFRILFxyXG5cclxuICAgICAgLy8gcGhldC1pb1xyXG4gICAgICB0YW5kZW06IFRhbmRlbS5SRVFVSVJFRFxyXG4gICAgfSwgb3B0aW9ucyApO1xyXG5cclxuICAgIC8vIGNyZWF0ZSB0aGUgdGV4dCBub2Rlc1xyXG4gICAgY29uc3QgY2hlY2tib3hUZXh0T3B0aW9ucyA9IHsgZm9udDogRElTUExBWV9GT05ULCBmaWxsOiBDSEVDS0JPWF9URVhUX0ZJTEwsIG1heFdpZHRoOiBDSEVDS0JPWF9URVhUX1dJRFRIIH07XHJcbiAgICBjb25zdCB2YWx1ZXNDaGVja2JveFRleHQgPSBuZXcgVGV4dCggZ3JhcGhWYWx1ZXNTdHJpbmcsIGNoZWNrYm94VGV4dE9wdGlvbnMgKTtcclxuICAgIGNvbnN0IGludGVuc2l0eUNoZWNrYm94VGV4dCA9IG5ldyBUZXh0KCBpbnRlbnNpdHlTdHJpbmcsIGNoZWNrYm94VGV4dE9wdGlvbnMgKTtcclxuICAgIGNvbnN0IGxhYmVsc0NoZWNrYm94VGV4dCA9IG5ldyBUZXh0KCBsYWJlbHNTdHJpbmcsIGNoZWNrYm94VGV4dE9wdGlvbnMgKTtcclxuXHJcbiAgICAvLyBTYXZlIGJ1dHRvblxyXG4gICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IG5ldyBSZWN0YW5ndWxhclB1c2hCdXR0b24oIHtcclxuICAgICAgY29udGVudDogbmV3IFBhdGgoIGNhbWVyYVNvbGlkU2hhcGUsIHsgbWF4V2lkdGg6IEJVVFRPTl9JQ09OX1dJRFRILCBmaWxsOiAnYmxhY2snIH0gKSxcclxuICAgICAgbWF4V2lkdGg6IEJVVFRPTl9JQ09OX1dJRFRILFxyXG4gICAgICBiYXNlQ29sb3I6IFBoZXRDb2xvclNjaGVtZS5CVVRUT05fWUVMTE9XLFxyXG4gICAgICB0b3VjaEFyZWFYRGlsYXRpb246IEJVVFRPTl9UT1VDSF9ESUxBVElPTixcclxuICAgICAgdG91Y2hBcmVhWURpbGF0aW9uOiBCVVRUT05fVE9VQ0hfRElMQVRJT04sXHJcbiAgICAgIGxpc3RlbmVyOiAoKSA9PiB7XHJcbiAgICAgICAgbW9kZWwuc2F2ZU1haW5Cb2R5KCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnc2F2ZUJ1dHRvbicgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIEVyYXNlIGJ1dHRvblxyXG4gICAgY29uc3QgZXJhc2VCdXR0b24gPSBuZXcgRXJhc2VyQnV0dG9uKCB7XHJcbiAgICAgIGljb25XaWR0aDogQlVUVE9OX0lDT05fV0lEVEgsXHJcbiAgICAgIG1heFdpZHRoOiBCVVRUT05fSUNPTl9XSURUSCxcclxuICAgICAgdG91Y2hBcmVhWERpbGF0aW9uOiBCVVRUT05fVE9VQ0hfRElMQVRJT04sXHJcbiAgICAgIHRvdWNoQXJlYVlEaWxhdGlvbjogQlVUVE9OX1RPVUNIX0RJTEFUSU9OLFxyXG4gICAgICBsaXN0ZW5lcjogKCkgPT4ge1xyXG4gICAgICAgIG1vZGVsLmNsZWFyU2F2ZWRHcmFwaHMoKTtcclxuICAgICAgfSxcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdlcmFzZUJ1dHRvbicgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIE1ha2VzIHRoZSBlcmFzZUJ1dHRvbiBlbmFibGVkIHdoZW4gdGhlcmUgaXMgYSBzYXZlZCBncmFwaCB0byBjbGVhciwgYW5kIGRpc2FibGVkIHdoZW4gdGhlcmUgaXMgbm8gZ3JhcGggdG8gY2xlYXIuXHJcbiAgICAvLyBUaGlzIGFzc3VtZXMgdGhhdCB0aGVyZSBjYW5ub3QgYmUgYSBzYXZlZEJvZHlUd28gd2l0aG91dCBhIHNhdmVkQm9keU9uZS5cclxuICAgIG1vZGVsLnNhdmVkQm9keU9uZS50ZW1wZXJhdHVyZVByb3BlcnR5LmxpbmsoIHRlbXBlcmF0dXJlID0+IHtcclxuICAgICAgZXJhc2VCdXR0b24uZW5hYmxlZCA9IHRlbXBlcmF0dXJlICE9PSBudWxsO1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIGNoZWNrYm94ZXNcclxuICAgIGNvbnN0IGNoZWNrYm94T3B0aW9ucyA9IHtcclxuICAgICAgY2hlY2tib3hDb2xvckJhY2tncm91bmQ6IENPTlRST0xfUEFORUxfRklMTCxcclxuICAgICAgY2hlY2tib3hDb2xvcjogQ0hFQ0tCT1hfQ09MT1JcclxuICAgIH07XHJcbiAgICBjb25zdCB2YWx1ZXNDaGVja2JveCA9IG5ldyBDaGVja2JveCggbW9kZWwuZ3JhcGhWYWx1ZXNWaXNpYmxlUHJvcGVydHksIHZhbHVlc0NoZWNrYm94VGV4dCwgXy5hc3NpZ24oIGNoZWNrYm94T3B0aW9ucywgeyB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2dyYXBoVmFsdWVzQ2hlY2tib3gnICkgfSApICk7XHJcbiAgICBjb25zdCBpbnRlbnNpdHlDaGVja2JveCA9IG5ldyBDaGVja2JveCggbW9kZWwuaW50ZW5zaXR5VmlzaWJsZVByb3BlcnR5LCBpbnRlbnNpdHlDaGVja2JveFRleHQsIF8uYXNzaWduKCBjaGVja2JveE9wdGlvbnMsIHsgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdpbnRlbnNpdHlDaGVja2JveCcgKSB9ICkgKTtcclxuICAgIGNvbnN0IGxhYmVsc0NoZWNrYm94ID0gbmV3IENoZWNrYm94KCBtb2RlbC5sYWJlbHNWaXNpYmxlUHJvcGVydHksIGxhYmVsc0NoZWNrYm94VGV4dCwgXy5hc3NpZ24oIGNoZWNrYm94T3B0aW9ucywgeyB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2xhYmVsc0NoZWNrYm94JyApIH0gKSApO1xyXG5cclxuICAgIHZhbHVlc0NoZWNrYm94LnRvdWNoQXJlYSA9IHZhbHVlc0NoZWNrYm94LmxvY2FsQm91bmRzLmRpbGF0ZWQoIENIRUNLQk9YX1RPVUNIX0RJTEFUSU9OICk7XHJcbiAgICBpbnRlbnNpdHlDaGVja2JveC50b3VjaEFyZWEgPSBpbnRlbnNpdHlDaGVja2JveC5sb2NhbEJvdW5kcy5kaWxhdGVkKCBDSEVDS0JPWF9UT1VDSF9ESUxBVElPTiApO1xyXG4gICAgbGFiZWxzQ2hlY2tib3gudG91Y2hBcmVhID0gbGFiZWxzQ2hlY2tib3gubG9jYWxCb3VuZHMuZGlsYXRlZCggQ0hFQ0tCT1hfVE9VQ0hfRElMQVRJT04gKTtcclxuXHJcbiAgICBjb25zdCBpbnRlbnNpdHlUZXh0ID0gbmV3IFJpY2hUZXh0KCAnPycsIElOVEVOU0lUWV9URVhUX09QVElPTlMgKTtcclxuICAgIGNvbnN0IGludGVuc2l0eVRleHRCb3ggPSBuZXcgUmVjdGFuZ2xlKFxyXG4gICAgICAwLCAwLFxyXG4gICAgICBpbnRlbnNpdHlUZXh0LndpZHRoICsgSU5URU5TSVRZX1RFWFRfQk9YX1BBRERJTkcsXHJcbiAgICAgIGludGVuc2l0eVRleHQuaGVpZ2h0ICsgSU5URU5TSVRZX1RFWFRfQk9YX1BBRERJTkcsXHJcbiAgICAgIDAsIDAsXHJcbiAgICAgIHtcclxuICAgICAgICBjaGlsZHJlbjogWyBpbnRlbnNpdHlUZXh0IF0sXHJcbiAgICAgICAgc3Ryb2tlOiBJTlRFTlNJVFlfVEVYVF9CT1hfU1RST0tFLFxyXG4gICAgICAgIGZpbGw6IElOVEVOU0lUWV9URVhUX0JPWF9GSUxMXHJcbiAgICAgIH0gKTtcclxuXHJcbiAgICAvLyBMaW5rcyB0aGUgaW50ZW5zaXR5IHRleHQgdG8gdXBkYXRlIHdoZW5ldmVyIHRoZSBtb2RlbCdzIHRlbXBlcmF0dXJlIGNoYW5nZXNcclxuICAgIG1vZGVsLm1haW5Cb2R5LnRlbXBlcmF0dXJlUHJvcGVydHkubGluayggKCkgPT4ge1xyXG5cclxuICAgICAgLy8gR2V0cyB0aGUgbW9kZWwgaW50ZW5zaXR5IGFuZCBmb3JtYXRzIGl0IHRvIGEgbmljZSBzY2llbnRpZmljIG5vdGF0aW9uIHN0cmluZyB0byBwdXQgYXMgdGhlIGludGVuc2l0eVRleHRcclxuICAgICAgY29uc3Qgbm90YXRpb25PYmplY3QgPSBTY2llbnRpZmljTm90YXRpb25Ob2RlLnRvU2NpZW50aWZpY05vdGF0aW9uKCBtb2RlbC5tYWluQm9keS50b3RhbEludGVuc2l0eSwge1xyXG4gICAgICAgIG1hbnRpc3NhRGVjaW1hbFBsYWNlczogMlxyXG4gICAgICB9ICk7XHJcbiAgICAgIGxldCBmb3JtYXR0ZWRTdHJpbmcgPSBub3RhdGlvbk9iamVjdC5tYW50aXNzYTtcclxuICAgICAgaWYgKCBub3RhdGlvbk9iamVjdC5leHBvbmVudCAhPT0gJzAnICkge1xyXG4gICAgICAgIGZvcm1hdHRlZFN0cmluZyArPSBgIFxcdTAwRDcgMTA8c3VwPiR7bm90YXRpb25PYmplY3QuZXhwb25lbnR9PC9zdXA+YDtcclxuICAgICAgfVxyXG4gICAgICBpbnRlbnNpdHlUZXh0LnN0cmluZyA9IFN0cmluZ1V0aWxzLmZpbGxJbiggaW50ZW5zaXR5VW5pdHNMYWJlbFN0cmluZywgeyBpbnRlbnNpdHk6IGZvcm1hdHRlZFN0cmluZyB9ICk7XHJcblxyXG4gICAgICAvLyBVcGRhdGVzIHBvc2l0aW9ucyBhbmQgc2l6ZXNcclxuICAgICAgY29uc3QgdGV4dFdpZHRoID0gQ0hFQ0tCT1hfREVGQVVMVF9XSURUSCA+IGludGVuc2l0eVRleHQud2lkdGggKyAyMCA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENIRUNLQk9YX0RFRkFVTFRfV0lEVEggOiBpbnRlbnNpdHlUZXh0LndpZHRoICsgMjA7XHJcbiAgICAgIGludGVuc2l0eVRleHRCb3guc2V0UmVjdCggMCwgMCwgdGV4dFdpZHRoLCBpbnRlbnNpdHlUZXh0LmhlaWdodCArIDEwLCAwLCAwICk7XHJcbiAgICAgIGludGVuc2l0eVRleHQuY2VudGVyID0gaW50ZW5zaXR5VGV4dEJveC5jZW50ZXI7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3Qgc3BhY2luZyA9IDE1O1xyXG4gICAgY29uc3QgYnV0dG9ucyA9IG5ldyBIQm94KCB7XHJcbiAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgbmV3IE5vZGUoIHsgY2hpbGRyZW46IFsgc2F2ZUJ1dHRvbiBdIH0gKSxcclxuICAgICAgICBuZXcgTm9kZSggeyBjaGlsZHJlbjogWyBlcmFzZUJ1dHRvbiBdIH0gKVxyXG4gICAgICBdLFxyXG4gICAgICBzcGFjaW5nOiBzcGFjaW5nXHJcbiAgICB9ICk7XHJcbiAgICBjb25zdCBjaGVja2JveGVzID0gbmV3IFZCb3goIHtcclxuICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICB2YWx1ZXNDaGVja2JveCxcclxuICAgICAgICBsYWJlbHNDaGVja2JveCxcclxuICAgICAgICBpbnRlbnNpdHlDaGVja2JveFxyXG4gICAgICBdLFxyXG4gICAgICBhbGlnbjogJ2xlZnQnLFxyXG4gICAgICBzcGFjaW5nOiBzcGFjaW5nXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIHBhbmVsIHRvIGFsbG93IGxlZnQgYWxpZ25tZW50IG9uIGNoZWNrYm94ZXMgd2hpbGUga2VlcGluZyBjZW50ZXIgYWxpZ25tZW50IGZvciBidXR0b25zXHJcbiAgICBjb25zdCBjaGVja2JveFBhbmVsID0gbmV3IFBhbmVsKCBjaGVja2JveGVzLCB7XHJcbiAgICAgIGZpbGw6IEJsYWNrYm9keUNvbG9ycy5iYWNrZ3JvdW5kUHJvcGVydHksXHJcbiAgICAgIHN0cm9rZTogQmxhY2tib2R5Q29sb3JzLmJhY2tncm91bmRQcm9wZXJ0eSxcclxuICAgICAgbWluV2lkdGg6IENIRUNLQk9YX0RFRkFVTFRfV0lEVEhcclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCBpbnRlbnNpdHlEaXNwbGF5ID0gbmV3IE5vZGUoIHtcclxuICAgICAgdmlzaWJsZVByb3BlcnR5OiBtb2RlbC5pbnRlbnNpdHlWaXNpYmxlUHJvcGVydHksXHJcbiAgICAgIGNoaWxkcmVuOiBbIGludGVuc2l0eVRleHRCb3ggXSxcclxuICAgICAgbWF4V2lkdGg6IENIRUNLQk9YX0RFRkFVTFRfV0lEVEhcclxuICAgIH0gKTtcclxuICAgIGludGVuc2l0eVRleHQuY2VudGVyID0gaW50ZW5zaXR5VGV4dEJveC5jZW50ZXI7XHJcblxyXG4gICAgY29uc3QgY29udGVudCA9IG5ldyBWQm94KCB7XHJcbiAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgY2hlY2tib3hQYW5lbCxcclxuICAgICAgICBpbnRlbnNpdHlEaXNwbGF5LFxyXG4gICAgICAgIG5ldyBIU2VwYXJhdG9yKCB7IHN0cm9rZTogU0VQQVJBVE9SX0NPTE9SIH0gKSxcclxuICAgICAgICBidXR0b25zXHJcbiAgICAgIF0sXHJcbiAgICAgIGFsaWduOiAnY2VudGVyJyxcclxuICAgICAgc3BhY2luZzogc3BhY2luZyxcclxuICAgICAgcmVzaXplOiB0cnVlXHJcbiAgICB9ICk7XHJcblxyXG4gICAgc3VwZXIoIGNvbnRlbnQsIG9wdGlvbnMgKTtcclxuICB9XHJcbn1cclxuXHJcbmJsYWNrYm9keVNwZWN0cnVtLnJlZ2lzdGVyKCAnQmxhY2tib2R5U3BlY3RydW1Db250cm9sUGFuZWwnLCBCbGFja2JvZHlTcGVjdHJ1bUNvbnRyb2xQYW5lbCApO1xyXG5leHBvcnQgZGVmYXVsdCBCbGFja2JvZHlTcGVjdHJ1bUNvbnRyb2xQYW5lbDsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxLQUFLLE1BQU0sbUNBQW1DO0FBQ3JELE9BQU9DLFdBQVcsTUFBTSwrQ0FBK0M7QUFDdkUsT0FBT0MsWUFBWSxNQUFNLHFEQUFxRDtBQUM5RSxPQUFPQyxlQUFlLE1BQU0sZ0RBQWdEO0FBQzVFLE9BQU9DLFFBQVEs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