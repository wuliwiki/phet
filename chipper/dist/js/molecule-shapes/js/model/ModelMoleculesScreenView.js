// Copyright 2014-2023, University of Colorado Boulder

/**
 * View for the 'Model' screen.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import Vector3 from '../../../dot/js/Vector3.js';
import PhetFont from '../../../scenery-phet/js/PhetFont.js';
import { AlignBox, VBox } from '../../../scenery/js/imports.js';
import TextPushButton from '../../../sun/js/buttons/TextPushButton.js';
import Tandem from '../../../tandem/js/Tandem.js';
import PairGroup from '../common/model/PairGroup.js';
import MoleculeView from '../common/view/3d/MoleculeView.js';
import MoleculeShapesColors from '../common/view/MoleculeShapesColors.js';
import MoleculeShapesPanel from '../common/view/MoleculeShapesPanel.js';
import MoleculeShapesScreenView from '../common/view/MoleculeShapesScreenView.js';
import OptionsNode from '../common/view/OptionsNode.js';
import moleculeShapes from '../moleculeShapes.js';
import MoleculeShapesStrings from '../MoleculeShapesStrings.js';
import BondGroupNode from './BondGroupNode.js';
class ModelMoleculesScreenView extends MoleculeShapesScreenView {
  /**
   * Constructor for the ModelMoleculesScreenView
   * @param {ModelMoleculesModel} model the model for the entire screen
   * @param {Tandem} tandem
   */
  constructor(model, tandem) {
    super(model, tandem);

    // @private {MoleculeShapesModel}
    this.model = model;

    // @public {MoleculeView}
    this.moleculeView = new MoleculeView(model, this, model.moleculeProperty.value, tandem.createTandem('moleculeView'));
    this.addMoleculeView(this.moleculeView);
    const addPairCallback = this.addPairGroup.bind(this);
    const removePairCallback = this.removePairGroup.bind(this);
    const optionsPanelTandem = tandem.createTandem('optionsPanel');
    const bondingPanelTandem = tandem.createTandem('bondingPanel');
    const lonePairPanelTandem = model.isBasicsVersion ? Tandem.OPT_OUT : tandem.createTandem('lonePairPanel');
    const optionsNode = new OptionsNode(model, optionsPanelTandem.createTandem('optionsCheckboxGroup'));
    const bondingNode = new VBox({
      children: [new BondGroupNode(model, 1, addPairCallback, removePairCallback, bondingPanelTandem.createTandem('singleBondNode'), {}), new BondGroupNode(model, 2, addPairCallback, removePairCallback, bondingPanelTandem.createTandem('doubleBondNode'), {}), new BondGroupNode(model, 3, addPairCallback, removePairCallback, bondingPanelTandem.createTandem('tripleBondNode'), {})],
      spacing: 10,
      align: 'center'
    });
    const lonePairNode = new BondGroupNode(model, 0, addPairCallback, removePairCallback, lonePairPanelTandem.createTandem('lonePairNode'), {});
    const removeAllButton = new TextPushButton(MoleculeShapesStrings.control.removeAllStringProperty, {
      baseColor: MoleculeShapesColors.removeButtonBackgroundProperty,
      font: new PhetFont(16),
      textFill: MoleculeShapesColors.removeButtonTextProperty.value,
      maxTextWidth: 260,
      textNodeOptions: {
        tandem: Tandem.OPT_OUT
      },
      layoutOptions: {
        topMargin: 5,
        align: 'center',
        stretch: false
      },
      touchAreaXDilation: 30,
      touchAreaYDilation: 10,
      listener: () => {
        model.moleculeProperty.value.removeAllGroups();
      },
      tandem: tandem.createTandem('removeAllButton'),
      enabledPropertyOptions: {
        phetioReadOnly: true
      }
    });
    function updateButtonEnabled() {
      removeAllButton.enabled = model.moleculeProperty.value.radialGroups.length > 0;
    }
    model.moleculeProperty.link((newMolecule, oldMolecule) => {
      if (oldMolecule) {
        oldMolecule.bondChangedEmitter.removeListener(updateButtonEnabled);
      }
      if (newMolecule) {
        newMolecule.bondChangedEmitter.addListener(updateButtonEnabled);
      }
      updateButtonEnabled();
    });
    const rightBox = new VBox({
      spacing: 15,
      stretch: true,
      children: [new MoleculeShapesPanel(MoleculeShapesStrings.control.bondingStringProperty, bondingNode, bondingPanelTandem, {
        tandem: bondingPanelTandem,
        align: 'center'
      }), ...(!model.isBasicsVersion ? [new MoleculeShapesPanel(MoleculeShapesStrings.control.lonePairStringProperty, lonePairNode, lonePairPanelTandem, {
        tandem: lonePairPanelTandem,
        align: 'center'
      })] : []), removeAllButton, new MoleculeShapesPanel(MoleculeShapesStrings.control.optionsStringProperty, optionsNode, optionsPanelTandem, {
        layoutOptions: {
          topMargin: 10
        },
        tandem: optionsPanelTandem
      })]
    });
    this.addChild(new AlignBox(rightBox, {
      alignBounds: this.layoutBounds,
      xAlign: 'right',
      yAlign: 'top',
      margin: 10
    }));

    // rebuild our view when we switch molecules
    model.moleculeProperty.lazyLink((newMolecule, oldMolecule) => {
      // tear down the old view
      this.removeMoleculeView(this.moleculeView);
      this.moleculeView.dispose();

      // create the new view
      this.moleculeView = new MoleculeView(model, this, newMolecule, tandem.createTandem('moleculeView'));
      this.addMoleculeView(this.moleculeView);
    });
  }

  /**
   * Adds a PairGroup to the model from the Bonding panel position.
   * @public
   *
   * @param {number} bondOrder - The order of the bond (0 through 3)
   * @param {Bounds2} globalBounds - The bounds of the clicked-on overlay for the pair group (e.g. the lone pair in
   *                                 the "Lone Pair" panel), so we can place the inital model position of the pair
   *                                 group near the click position (it will animate from that position).
   */
  addPairGroup(bondOrder, globalBounds) {
    const screenPoint = globalBounds.leftCenter;
    const threePoint = this.getPlanarMoleculePosition(screenPoint);

    // when adding a pair group in the control panel, it looks better when starting further away
    const extraFactor = 1.2;
    const pair = new PairGroup(new Vector3(0, 0, 0).set(threePoint).multiplyScalar(extraFactor), bondOrder === 0);
    this.model.moleculeProperty.value.addGroupAndBond(pair, this.model.moleculeProperty.value.centralAtom, bondOrder, bondOrder === 0 ? PairGroup.LONE_PAIR_DISTANCE : PairGroup.BONDED_PAIR_DISTANCE);
  }

  /**
   * Removes a PairGroup from the model.
   * @public
   * @param {number} bondOrder
   */
  removePairGroup(bondOrder) {
    const molecule = this.model.moleculeProperty.value;
    const bonds = molecule.getBondsAround(molecule.centralAtom);
    for (let i = bonds.length - 1; i >= 0; i--) {
      if (bonds[i].order === bondOrder) {
        const atom = bonds[i].getOtherAtom(molecule.centralAtom);
        molecule.removeGroup(atom);
        break;
      }
    }
  }
}
moleculeShapes.register('ModelMoleculesScreenView', ModelMoleculesScreenView);
export default ModelMoleculesScreenView;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWZWN0b3IzIiwiUGhldEZvbnQiLCJBbGlnbkJveCIsIlZCb3giLCJUZXh0UHVzaEJ1dHRvbiIsIlRhbmRlbSIsIlBhaXJHcm91cCIsIk1vbGVjdWxlVmlldyIsIk1vbGVjdWxlU2hhcGVzQ29sb3JzIiwiTW9sZWN1bGVTaGFwZXNQYW5lbCIsIk1vbGVjdWxlU2hhcGVzU2NyZWVuVmlldyIsIk9wdGlvbnNOb2RlIiwibW9sZWN1bGVTaGFwZXMiLCJNb2xlY3VsZVNoYXBlc1N0cmluZ3MiLCJCb25kR3JvdXBOb2RlIiwiTW9kZWxNb2xlY3VsZXNTY3JlZW5WaWV3IiwiY29uc3RydWN0b3IiLCJtb2RlbCIsInRhbmRlbSIsIm1vbGVjdWxlVmlldyIsIm1vbGVjdWxlUHJvcGVydHkiLCJ2YWx1ZSIsImNyZWF0ZVRhbmRlbSIsImFkZE1vbGVjdWxlVmlldyIsImFkZFBhaXJDYWxsYmFjayIsImFkZFBhaXJHcm91cCIsImJpbmQiLCJyZW1vdmVQYWlyQ2FsbGJhY2siLCJyZW1vdmVQYWlyR3JvdXAiLCJvcHRpb25zUGFuZWxUYW5kZW0iLCJib25kaW5nUGFuZWxUYW5kZW0iLCJsb25lUGFpclBhbmVsVGFuZGVtIiwiaXNCYXNpY3NWZXJzaW9uIiwiT1BUX09VVCIsIm9wdGlvbnNOb2RlIiwiYm9uZGluZ05vZGUiLCJjaGlsZHJlbiIsInNwYWNpbmciLCJhbGlnbiIsImxvbmVQYWlyTm9kZSIsInJlbW92ZUFsbEJ1dHRvbiIsImNvbnRyb2wiLCJyZW1vdmVBbGxTdHJpbmdQcm9wZXJ0eSIsImJhc2VDb2xvciIsInJlbW92ZUJ1dHRvbkJhY2tncm91bmRQcm9wZXJ0eSIsImZvbnQiLCJ0ZXh0RmlsbCIsInJlbW92ZUJ1dHRvblRleHRQcm9wZXJ0eSIsIm1heFRleHRXaWR0aCIsInRleHROb2RlT3B0aW9ucyIsImxheW91dE9wdGlvbnMiLCJ0b3BNYXJnaW4iLCJzdHJldGNoIiwidG91Y2hBcmVhWERpbGF0aW9uIiwidG91Y2hBcmVhWURpbGF0aW9uIiwibGlzdGVuZXIiLCJyZW1vdmVBbGxHcm91cHMiLCJlbmFibGVkUHJvcGVydHlPcHRpb25zIiwicGhldGlvUmVhZE9ubHkiLCJ1cGRhdGVCdXR0b25FbmFibGVkIiwiZW5hYmxlZCIsInJhZGlhbEdyb3VwcyIsImxlbmd0aCIsImxpbmsiLCJuZXdNb2xlY3VsZSIsIm9sZE1vbGVjdWxlIiwiYm9uZENoYW5nZWRFbWl0dGVyIiwicmVtb3ZlTGlzdGVuZXIiLCJhZGRMaXN0ZW5lciIsInJpZ2h0Qm94IiwiYm9uZGluZ1N0cmluZ1Byb3BlcnR5IiwibG9uZVBhaXJTdHJpbmdQcm9wZXJ0eSIsIm9wdGlvbnNTdHJpbmdQcm9wZXJ0eSIsImFkZENoaWxkIiwiYWxpZ25Cb3VuZHMiLCJsYXlvdXRCb3VuZHMiLCJ4QWxpZ24iLCJ5QWxpZ24iLCJtYXJnaW4iLCJsYXp5TGluayIsInJlbW92ZU1vbGVjdWxlVmlldyIsImRpc3Bvc2UiLCJib25kT3JkZXIiLCJnbG9iYWxCb3VuZHMiLCJzY3JlZW5Qb2ludCIsImxlZnRDZW50ZXIiLCJ0aHJlZVBvaW50IiwiZ2V0UGxhbmFyTW9sZWN1bGVQb3NpdGlvbiIsImV4dHJhRmFjdG9yIiwicGFpciIsInNldCIsIm11bHRpcGx5U2NhbGFyIiwiYWRkR3JvdXBBbmRCb25kIiwiY2VudHJhbEF0b20iLCJMT05FX1BBSVJfRElTVEFOQ0UiLCJCT05ERURfUEFJUl9ESVNUQU5DRSIsIm1vbGVjdWxlIiwiYm9uZHMiLCJnZXRCb25kc0Fyb3VuZCIsImkiLCJvcmRlciIsImF0b20iLCJnZXRPdGhlckF0b20iLCJyZW1vdmVHcm91cCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiTW9kZWxNb2xlY3VsZXNTY3JlZW5WaWV3LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE0LTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFZpZXcgZm9yIHRoZSAnTW9kZWwnIHNjcmVlbi5cclxuICpcclxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxyXG4gKi9cclxuXHJcbmltcG9ydCBWZWN0b3IzIGZyb20gJy4uLy4uLy4uL2RvdC9qcy9WZWN0b3IzLmpzJztcclxuaW1wb3J0IFBoZXRGb250IGZyb20gJy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9QaGV0Rm9udC5qcyc7XHJcbmltcG9ydCB7IEFsaWduQm94LCBWQm94IH0gZnJvbSAnLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IFRleHRQdXNoQnV0dG9uIGZyb20gJy4uLy4uLy4uL3N1bi9qcy9idXR0b25zL1RleHRQdXNoQnV0dG9uLmpzJztcclxuaW1wb3J0IFRhbmRlbSBmcm9tICcuLi8uLi8uLi90YW5kZW0vanMvVGFuZGVtLmpzJztcclxuaW1wb3J0IFBhaXJHcm91cCBmcm9tICcuLi9jb21tb24vbW9kZWwvUGFpckdyb3VwLmpzJztcclxuaW1wb3J0IE1vbGVjdWxlVmlldyBmcm9tICcuLi9jb21tb24vdmlldy8zZC9Nb2xlY3VsZVZpZXcuanMnO1xyXG5pbXBvcnQgTW9sZWN1bGVTaGFwZXNDb2xvcnMgZnJvbSAnLi4vY29tbW9uL3ZpZXcvTW9sZWN1bGVTaGFwZXNDb2xvcnMuanMnO1xyXG5pbXBvcnQgTW9sZWN1bGVTaGFwZXNQYW5lbCBmcm9tICcuLi9jb21tb24vdmlldy9Nb2xlY3VsZVNoYXBlc1BhbmVsLmpzJztcclxuaW1wb3J0IE1vbGVjdWxlU2hhcGVzU2NyZWVuVmlldyBmcm9tICcuLi9jb21tb24vdmlldy9Nb2xlY3VsZVNoYXBlc1NjcmVlblZpZXcuanMnO1xyXG5pbXBvcnQgT3B0aW9uc05vZGUgZnJvbSAnLi4vY29tbW9uL3ZpZXcvT3B0aW9uc05vZGUuanMnO1xyXG5pbXBvcnQgbW9sZWN1bGVTaGFwZXMgZnJvbSAnLi4vbW9sZWN1bGVTaGFwZXMuanMnO1xyXG5pbXBvcnQgTW9sZWN1bGVTaGFwZXNTdHJpbmdzIGZyb20gJy4uL01vbGVjdWxlU2hhcGVzU3RyaW5ncy5qcyc7XHJcbmltcG9ydCBCb25kR3JvdXBOb2RlIGZyb20gJy4vQm9uZEdyb3VwTm9kZS5qcyc7XHJcblxyXG5jbGFzcyBNb2RlbE1vbGVjdWxlc1NjcmVlblZpZXcgZXh0ZW5kcyBNb2xlY3VsZVNoYXBlc1NjcmVlblZpZXcge1xyXG5cclxuICAvKipcclxuICAgKiBDb25zdHJ1Y3RvciBmb3IgdGhlIE1vZGVsTW9sZWN1bGVzU2NyZWVuVmlld1xyXG4gICAqIEBwYXJhbSB7TW9kZWxNb2xlY3VsZXNNb2RlbH0gbW9kZWwgdGhlIG1vZGVsIGZvciB0aGUgZW50aXJlIHNjcmVlblxyXG4gICAqIEBwYXJhbSB7VGFuZGVtfSB0YW5kZW1cclxuICAgKi9cclxuICBjb25zdHJ1Y3RvciggbW9kZWwsIHRhbmRlbSApIHtcclxuICAgIHN1cGVyKCBtb2RlbCwgdGFuZGVtICk7XHJcblxyXG4gICAgLy8gQHByaXZhdGUge01vbGVjdWxlU2hhcGVzTW9kZWx9XHJcbiAgICB0aGlzLm1vZGVsID0gbW9kZWw7XHJcblxyXG4gICAgLy8gQHB1YmxpYyB7TW9sZWN1bGVWaWV3fVxyXG4gICAgdGhpcy5tb2xlY3VsZVZpZXcgPSBuZXcgTW9sZWN1bGVWaWV3KCBtb2RlbCwgdGhpcywgbW9kZWwubW9sZWN1bGVQcm9wZXJ0eS52YWx1ZSwgdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ21vbGVjdWxlVmlldycgKSApO1xyXG4gICAgdGhpcy5hZGRNb2xlY3VsZVZpZXcoIHRoaXMubW9sZWN1bGVWaWV3ICk7XHJcblxyXG4gICAgY29uc3QgYWRkUGFpckNhbGxiYWNrID0gdGhpcy5hZGRQYWlyR3JvdXAuYmluZCggdGhpcyApO1xyXG4gICAgY29uc3QgcmVtb3ZlUGFpckNhbGxiYWNrID0gdGhpcy5yZW1vdmVQYWlyR3JvdXAuYmluZCggdGhpcyApO1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnNQYW5lbFRhbmRlbSA9IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdvcHRpb25zUGFuZWwnICk7XHJcbiAgICBjb25zdCBib25kaW5nUGFuZWxUYW5kZW0gPSB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnYm9uZGluZ1BhbmVsJyApO1xyXG4gICAgY29uc3QgbG9uZVBhaXJQYW5lbFRhbmRlbSA9IG1vZGVsLmlzQmFzaWNzVmVyc2lvbiA/IFRhbmRlbS5PUFRfT1VUIDogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2xvbmVQYWlyUGFuZWwnICk7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9uc05vZGUgPSBuZXcgT3B0aW9uc05vZGUoIG1vZGVsLCBvcHRpb25zUGFuZWxUYW5kZW0uY3JlYXRlVGFuZGVtKCAnb3B0aW9uc0NoZWNrYm94R3JvdXAnICkgKTtcclxuICAgIGNvbnN0IGJvbmRpbmdOb2RlID0gbmV3IFZCb3goIHtcclxuICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICBuZXcgQm9uZEdyb3VwTm9kZSggbW9kZWwsIDEsIGFkZFBhaXJDYWxsYmFjaywgcmVtb3ZlUGFpckNhbGxiYWNrLCBib25kaW5nUGFuZWxUYW5kZW0uY3JlYXRlVGFuZGVtKCAnc2luZ2xlQm9uZE5vZGUnICksIHt9ICksXHJcbiAgICAgICAgbmV3IEJvbmRHcm91cE5vZGUoIG1vZGVsLCAyLCBhZGRQYWlyQ2FsbGJhY2ssIHJlbW92ZVBhaXJDYWxsYmFjaywgYm9uZGluZ1BhbmVsVGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2RvdWJsZUJvbmROb2RlJyApLCB7fSApLFxyXG4gICAgICAgIG5ldyBCb25kR3JvdXBOb2RlKCBtb2RlbCwgMywgYWRkUGFpckNhbGxiYWNrLCByZW1vdmVQYWlyQ2FsbGJhY2ssIGJvbmRpbmdQYW5lbFRhbmRlbS5jcmVhdGVUYW5kZW0oICd0cmlwbGVCb25kTm9kZScgKSwge30gKVxyXG4gICAgICBdLFxyXG4gICAgICBzcGFjaW5nOiAxMCxcclxuICAgICAgYWxpZ246ICdjZW50ZXInXHJcbiAgICB9ICk7XHJcbiAgICBjb25zdCBsb25lUGFpck5vZGUgPSBuZXcgQm9uZEdyb3VwTm9kZSggbW9kZWwsIDAsIGFkZFBhaXJDYWxsYmFjaywgcmVtb3ZlUGFpckNhbGxiYWNrLCBsb25lUGFpclBhbmVsVGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2xvbmVQYWlyTm9kZScgKSwge30gKTtcclxuICAgIGNvbnN0IHJlbW92ZUFsbEJ1dHRvbiA9IG5ldyBUZXh0UHVzaEJ1dHRvbiggTW9sZWN1bGVTaGFwZXNTdHJpbmdzLmNvbnRyb2wucmVtb3ZlQWxsU3RyaW5nUHJvcGVydHksIHtcclxuICAgICAgYmFzZUNvbG9yOiBNb2xlY3VsZVNoYXBlc0NvbG9ycy5yZW1vdmVCdXR0b25CYWNrZ3JvdW5kUHJvcGVydHksXHJcbiAgICAgIGZvbnQ6IG5ldyBQaGV0Rm9udCggMTYgKSxcclxuICAgICAgdGV4dEZpbGw6IE1vbGVjdWxlU2hhcGVzQ29sb3JzLnJlbW92ZUJ1dHRvblRleHRQcm9wZXJ0eS52YWx1ZSxcclxuICAgICAgbWF4VGV4dFdpZHRoOiAyNjAsXHJcbiAgICAgIHRleHROb2RlT3B0aW9uczoge1xyXG4gICAgICAgIHRhbmRlbTogVGFuZGVtLk9QVF9PVVRcclxuICAgICAgfSxcclxuICAgICAgbGF5b3V0T3B0aW9uczogeyB0b3BNYXJnaW46IDUsIGFsaWduOiAnY2VudGVyJywgc3RyZXRjaDogZmFsc2UgfSxcclxuICAgICAgdG91Y2hBcmVhWERpbGF0aW9uOiAzMCxcclxuICAgICAgdG91Y2hBcmVhWURpbGF0aW9uOiAxMCxcclxuICAgICAgbGlzdGVuZXI6ICgpID0+IHtcclxuICAgICAgICBtb2RlbC5tb2xlY3VsZVByb3BlcnR5LnZhbHVlLnJlbW92ZUFsbEdyb3VwcygpO1xyXG4gICAgICB9LFxyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdyZW1vdmVBbGxCdXR0b24nICksXHJcbiAgICAgIGVuYWJsZWRQcm9wZXJ0eU9wdGlvbnM6IHtcclxuICAgICAgICBwaGV0aW9SZWFkT25seTogdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9ICk7XHJcblxyXG4gICAgZnVuY3Rpb24gdXBkYXRlQnV0dG9uRW5hYmxlZCgpIHtcclxuICAgICAgcmVtb3ZlQWxsQnV0dG9uLmVuYWJsZWQgPSBtb2RlbC5tb2xlY3VsZVByb3BlcnR5LnZhbHVlLnJhZGlhbEdyb3Vwcy5sZW5ndGggPiAwO1xyXG4gICAgfVxyXG5cclxuICAgIG1vZGVsLm1vbGVjdWxlUHJvcGVydHkubGluayggKCBuZXdNb2xlY3VsZSwgb2xkTW9sZWN1bGUgKSA9PiB7XHJcbiAgICAgIGlmICggb2xkTW9sZWN1bGUgKSB7XHJcbiAgICAgICAgb2xkTW9sZWN1bGUuYm9uZENoYW5nZWRFbWl0dGVyLnJlbW92ZUxpc3RlbmVyKCB1cGRhdGVCdXR0b25FbmFibGVkICk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCBuZXdNb2xlY3VsZSApIHtcclxuICAgICAgICBuZXdNb2xlY3VsZS5ib25kQ2hhbmdlZEVtaXR0ZXIuYWRkTGlzdGVuZXIoIHVwZGF0ZUJ1dHRvbkVuYWJsZWQgKTtcclxuICAgICAgfVxyXG4gICAgICB1cGRhdGVCdXR0b25FbmFibGVkKCk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgcmlnaHRCb3ggPSBuZXcgVkJveCgge1xyXG4gICAgICBzcGFjaW5nOiAxNSxcclxuICAgICAgc3RyZXRjaDogdHJ1ZSxcclxuICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICBuZXcgTW9sZWN1bGVTaGFwZXNQYW5lbCggTW9sZWN1bGVTaGFwZXNTdHJpbmdzLmNvbnRyb2wuYm9uZGluZ1N0cmluZ1Byb3BlcnR5LCBib25kaW5nTm9kZSwgYm9uZGluZ1BhbmVsVGFuZGVtLCB7XHJcbiAgICAgICAgICB0YW5kZW06IGJvbmRpbmdQYW5lbFRhbmRlbSxcclxuICAgICAgICAgIGFsaWduOiAnY2VudGVyJ1xyXG4gICAgICAgIH0gKSxcclxuICAgICAgICAuLi4oICFtb2RlbC5pc0Jhc2ljc1ZlcnNpb24gPyBbIG5ldyBNb2xlY3VsZVNoYXBlc1BhbmVsKCBNb2xlY3VsZVNoYXBlc1N0cmluZ3MuY29udHJvbC5sb25lUGFpclN0cmluZ1Byb3BlcnR5LCBsb25lUGFpck5vZGUsIGxvbmVQYWlyUGFuZWxUYW5kZW0sIHtcclxuICAgICAgICAgIHRhbmRlbTogbG9uZVBhaXJQYW5lbFRhbmRlbSxcclxuICAgICAgICAgIGFsaWduOiAnY2VudGVyJ1xyXG4gICAgICAgIH0gKSBdIDogW10gKSxcclxuICAgICAgICByZW1vdmVBbGxCdXR0b24sXHJcbiAgICAgICAgbmV3IE1vbGVjdWxlU2hhcGVzUGFuZWwoIE1vbGVjdWxlU2hhcGVzU3RyaW5ncy5jb250cm9sLm9wdGlvbnNTdHJpbmdQcm9wZXJ0eSwgb3B0aW9uc05vZGUsIG9wdGlvbnNQYW5lbFRhbmRlbSwge1xyXG4gICAgICAgICAgbGF5b3V0T3B0aW9uczogeyB0b3BNYXJnaW46IDEwIH0sXHJcbiAgICAgICAgICB0YW5kZW06IG9wdGlvbnNQYW5lbFRhbmRlbVxyXG4gICAgICAgIH0gKVxyXG4gICAgICBdXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBuZXcgQWxpZ25Cb3goIHJpZ2h0Qm94LCB7XHJcbiAgICAgIGFsaWduQm91bmRzOiB0aGlzLmxheW91dEJvdW5kcyxcclxuICAgICAgeEFsaWduOiAncmlnaHQnLFxyXG4gICAgICB5QWxpZ246ICd0b3AnLFxyXG4gICAgICBtYXJnaW46IDEwXHJcbiAgICB9ICkgKTtcclxuXHJcbiAgICAvLyByZWJ1aWxkIG91ciB2aWV3IHdoZW4gd2Ugc3dpdGNoIG1vbGVjdWxlc1xyXG4gICAgbW9kZWwubW9sZWN1bGVQcm9wZXJ0eS5sYXp5TGluayggKCBuZXdNb2xlY3VsZSwgb2xkTW9sZWN1bGUgKSA9PiB7XHJcbiAgICAgIC8vIHRlYXIgZG93biB0aGUgb2xkIHZpZXdcclxuICAgICAgdGhpcy5yZW1vdmVNb2xlY3VsZVZpZXcoIHRoaXMubW9sZWN1bGVWaWV3ICk7XHJcbiAgICAgIHRoaXMubW9sZWN1bGVWaWV3LmRpc3Bvc2UoKTtcclxuXHJcbiAgICAgIC8vIGNyZWF0ZSB0aGUgbmV3IHZpZXdcclxuICAgICAgdGhpcy5tb2xlY3VsZVZpZXcgPSBuZXcgTW9sZWN1bGVWaWV3KCBtb2RlbCwgdGhpcywgbmV3TW9sZWN1bGUsIHRhbmRlbS5jcmVhdGVUYW5kZW0oICdtb2xlY3VsZVZpZXcnICkgKTtcclxuICAgICAgdGhpcy5hZGRNb2xlY3VsZVZpZXcoIHRoaXMubW9sZWN1bGVWaWV3ICk7XHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGRzIGEgUGFpckdyb3VwIHRvIHRoZSBtb2RlbCBmcm9tIHRoZSBCb25kaW5nIHBhbmVsIHBvc2l0aW9uLlxyXG4gICAqIEBwdWJsaWNcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBib25kT3JkZXIgLSBUaGUgb3JkZXIgb2YgdGhlIGJvbmQgKDAgdGhyb3VnaCAzKVxyXG4gICAqIEBwYXJhbSB7Qm91bmRzMn0gZ2xvYmFsQm91bmRzIC0gVGhlIGJvdW5kcyBvZiB0aGUgY2xpY2tlZC1vbiBvdmVybGF5IGZvciB0aGUgcGFpciBncm91cCAoZS5nLiB0aGUgbG9uZSBwYWlyIGluXHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgXCJMb25lIFBhaXJcIiBwYW5lbCksIHNvIHdlIGNhbiBwbGFjZSB0aGUgaW5pdGFsIG1vZGVsIHBvc2l0aW9uIG9mIHRoZSBwYWlyXHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cCBuZWFyIHRoZSBjbGljayBwb3NpdGlvbiAoaXQgd2lsbCBhbmltYXRlIGZyb20gdGhhdCBwb3NpdGlvbikuXHJcbiAgICovXHJcbiAgYWRkUGFpckdyb3VwKCBib25kT3JkZXIsIGdsb2JhbEJvdW5kcyApIHtcclxuICAgIGNvbnN0IHNjcmVlblBvaW50ID0gZ2xvYmFsQm91bmRzLmxlZnRDZW50ZXI7XHJcbiAgICBjb25zdCB0aHJlZVBvaW50ID0gdGhpcy5nZXRQbGFuYXJNb2xlY3VsZVBvc2l0aW9uKCBzY3JlZW5Qb2ludCApO1xyXG5cclxuICAgIC8vIHdoZW4gYWRkaW5nIGEgcGFpciBncm91cCBpbiB0aGUgY29udHJvbCBwYW5lbCwgaXQgbG9va3MgYmV0dGVyIHdoZW4gc3RhcnRpbmcgZnVydGhlciBhd2F5XHJcbiAgICBjb25zdCBleHRyYUZhY3RvciA9IDEuMjtcclxuXHJcbiAgICBjb25zdCBwYWlyID0gbmV3IFBhaXJHcm91cCggbmV3IFZlY3RvcjMoIDAsIDAsIDAgKS5zZXQoIHRocmVlUG9pbnQgKS5tdWx0aXBseVNjYWxhciggZXh0cmFGYWN0b3IgKSwgYm9uZE9yZGVyID09PSAwICk7XHJcbiAgICB0aGlzLm1vZGVsLm1vbGVjdWxlUHJvcGVydHkudmFsdWUuYWRkR3JvdXBBbmRCb25kKCBwYWlyLCB0aGlzLm1vZGVsLm1vbGVjdWxlUHJvcGVydHkudmFsdWUuY2VudHJhbEF0b20sIGJvbmRPcmRlciwgKCBib25kT3JkZXIgPT09IDAgPyBQYWlyR3JvdXAuTE9ORV9QQUlSX0RJU1RBTkNFIDogUGFpckdyb3VwLkJPTkRFRF9QQUlSX0RJU1RBTkNFICkgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZXMgYSBQYWlyR3JvdXAgZnJvbSB0aGUgbW9kZWwuXHJcbiAgICogQHB1YmxpY1xyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBib25kT3JkZXJcclxuICAgKi9cclxuICByZW1vdmVQYWlyR3JvdXAoIGJvbmRPcmRlciApIHtcclxuICAgIGNvbnN0IG1vbGVjdWxlID0gdGhpcy5tb2RlbC5tb2xlY3VsZVByb3BlcnR5LnZhbHVlO1xyXG5cclxuICAgIGNvbnN0IGJvbmRzID0gbW9sZWN1bGUuZ2V0Qm9uZHNBcm91bmQoIG1vbGVjdWxlLmNlbnRyYWxBdG9tICk7XHJcblxyXG4gICAgZm9yICggbGV0IGkgPSBib25kcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSApIHtcclxuICAgICAgaWYgKCBib25kc1sgaSBdLm9yZGVyID09PSBib25kT3JkZXIgKSB7XHJcbiAgICAgICAgY29uc3QgYXRvbSA9IGJvbmRzWyBpIF0uZ2V0T3RoZXJBdG9tKCBtb2xlY3VsZS5jZW50cmFsQXRvbSApO1xyXG5cclxuICAgICAgICBtb2xlY3VsZS5yZW1vdmVHcm91cCggYXRvbSApO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5tb2xlY3VsZVNoYXBlcy5yZWdpc3RlciggJ01vZGVsTW9sZWN1bGVzU2NyZWVuVmlldycsIE1vZGVsTW9sZWN1bGVzU2NyZWVuVmlldyApO1xyXG5leHBvcnQgZGVmYXVsdCBNb2RlbE1vbGVjdWxlc1NjcmVlblZpZXc7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxPQUFPLE1BQU0sNEJBQTRCO0FBQ2hELE9BQU9DLFFBQVEsTUFBTSxzQ0FBc0M7QUFDM0QsU0FBU0MsUUFBUSxFQUFFQyxJQUFJLFFBQVEsZ0NBQWdDO0FBQy9ELE9BQU9DLGNBQWMsTUFBTSwyQ0FBMkM7QUFDdEUsT0FBT0MsTUFBTSxNQUFNLDhCQUE4QjtBQUNqRCxPQUFPQyxTQUFTLE1BQU0sOEJBQThCO0FBQ3BELE9BQU9DLFlBQVksTUFBTSxtQ0FBbUM7QUFDNUQsT0FBT0Msb0JBQW9CLE1BQU0sd0NBQXdDO0FBQ3pFLE9BQU9DLG1CQUFtQixNQUFNLHVDQUF1QztBQUN2RSxPQUFPQyx3QkFBd0IsTUFBTSw0Q0FBNEM7QUFDakYsT0FBT0MsV0FBVyxNQUFNLCtCQUErQjtBQUN2RCxPQUFPQyxjQUFjLE1BQU0sc0JBQXNCO0FBQ2pELE9BQU9DLHFCQUFxQixNQUFNLDZCQUE2QjtBQUMvRCxPQUFPQyxhQUFhLE1BQU0sb0JBQW9CO0FBRTlDLE1BQU1DLHdCQUF3QixTQUFTTCx3QkFBd0IsQ0FBQztFQUU5RDtBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBQ0VNLFdBQVdBLENBQUVDLEtBQUssRUFBRUMsTUFBTSxFQUFHO0lBQzNCLEtBQUssQ0FBRUQsS0FBSyxFQUFFQyxNQUFPLENBQUM7O0lBRXRCO0lBQ0EsSUFBSSxDQUFDRCxLQUFLLEdBQUdBLEtBQUs7O0lBRWxCO0lBQ0Es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