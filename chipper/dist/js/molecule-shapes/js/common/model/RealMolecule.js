// Copyright 2013-2022, University of Colorado Boulder

/**
 * Represents a physically malleable version of a real molecule, with lone pairs if necessary.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import Vector3 from '../../../../dot/js/Vector3.js';
import moleculeShapes from '../../moleculeShapes.js';
import LocalShape from './LocalShape.js';
import Molecule from './Molecule.js';
import PairGroup from './PairGroup.js';
import VSEPRConfiguration from './VSEPRConfiguration.js';
class RealMolecule extends Molecule {
  /*
   * @param {RealMoleculeShape} realMoleculeShape
   */
  constructor(realMoleculeShape) {
    let i;
    let group;
    super(true);
    this.realMoleculeShape = realMoleculeShape; // @public {RealMoleculeShape} - Our ideal shape
    this.localShapeMap = {}; // @private {number} - Maps atom IDs => {LocalShape}

    this.lastPermutations = [];
    const numLonePairs = realMoleculeShape.centralAtom.lonePairCount;
    const numBonds = realMoleculeShape.bonds.length;
    const idealCentralOrientations = [];
    const radialGroups = [];
    this.addCentralAtom(new PairGroup(new Vector3(0, 0, 0), false, {
      element: realMoleculeShape.centralAtom.element
    }));

    // add in bonds
    const bonds = realMoleculeShape.bonds;
    for (i = 0; i < bonds.length; i++) {
      const bond = bonds[i];
      const atom = bond.getOtherAtom(realMoleculeShape.centralAtom);
      idealCentralOrientations.push(atom.orientation);
      const bondLength = atom.position.magnitude;
      const atomPosition = atom.orientation.times(bondLength);
      group = new PairGroup(atomPosition, false, {
        element: atom.element
      });
      radialGroups.push(group);

      // add the atom itself
      this.addGroupAndBond(group, this.centralAtom, bond.order, bondLength);

      // add the lone pairs onto the atom
      this.addTerminalLonePairs(group, atom.lonePairCount);
    }

    // all of the ideal vectors (including for lone pairs)
    const vseprConfiguration = VSEPRConfiguration.getConfiguration(numBonds, numLonePairs);
    const idealModelVectors = vseprConfiguration.allOrientations;
    const mapping = vseprConfiguration.getIdealBondRotationToPositions(this.radialAtoms);

    // add in lone pairs in their correct "initial" positions
    for (i = 0; i < numLonePairs; i++) {
      const orientation = mapping.rotateVector(idealModelVectors[i]);
      idealCentralOrientations.push(orientation);
      group = new PairGroup(orientation.times(PairGroup.LONE_PAIR_DISTANCE), true);
      this.addGroupAndBond(group, this.centralAtom, 0, PairGroup.LONE_PAIR_DISTANCE);
      radialGroups.push(group);
    }
    this.localShapeMap[this.centralAtom.id] = new LocalShape(LocalShape.realPermutations(radialGroups), this.centralAtom, radialGroups, idealCentralOrientations);

    // basically only use VSEPR model for the attraction on non-central atoms
    const radialAtoms = this.radialAtoms;
    for (i = 0; i < radialAtoms.length; i++) {
      this.localShapeMap[radialAtoms[i].id] = this.getLocalVSEPRShape(radialAtoms[i]);
    }
  }

  /**
   * Step function for the molecule.
   * @override
   * @public
   *
   * @param {number} dt - Amount of time elapsed
   */
  update(dt) {
    super.update(dt);

    // angle-based repulsion
    const numAtoms = this.atoms.length;
    for (let i = 0; i < numAtoms; i++) {
      const atom = this.atoms[i];
      if (this.getNeighborCount(atom) > 1) {
        const localShape = this.getLocalShape(atom);
        const permutation = localShape.applyAngleAttractionRepulsion(dt, this.lastPermutations[i] || undefined).permutation;
        this.lastPermutations[i] = permutation;
      }
    }
  }

  /**
   * Looks up a LocalShape for a particular atom.
   * @public
   *
   * @param {PairGroup} atom
   * @returns {LocalShape}
   */
  getLocalShape(atom) {
    return this.localShapeMap[atom.id];
  }

  /**
   * @public
   * @override - We don't want to specify this for real molecules.
   * @returns {undefined}
   */
  getMaximumBondLength() {
    return undefined;
  }
}
moleculeShapes.register('RealMolecule', RealMolecule);
export default RealMolecule;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWZWN0b3IzIiwibW9sZWN1bGVTaGFwZXMiLCJMb2NhbFNoYXBlIiwiTW9sZWN1bGUiLCJQYWlyR3JvdXAiLCJWU0VQUkNvbmZpZ3VyYXRpb24iLCJSZWFsTW9sZWN1bGUiLCJjb25zdHJ1Y3RvciIsInJlYWxNb2xlY3VsZVNoYXBlIiwiaSIsImdyb3VwIiwibG9jYWxTaGFwZU1hcCIsImxhc3RQZXJtdXRhdGlvbnMiLCJudW1Mb25lUGFpcnMiLCJjZW50cmFsQXRvbSIsImxvbmVQYWlyQ291bnQiLCJudW1Cb25kcyIsImJvbmRzIiwibGVuZ3RoIiwiaWRlYWxDZW50cmFsT3JpZW50YXRpb25zIiwicmFkaWFsR3JvdXBzIiwiYWRkQ2VudHJhbEF0b20iLCJlbGVtZW50IiwiYm9uZCIsImF0b20iLCJnZXRPdGhlckF0b20iLCJwdXNoIiwib3JpZW50YXRpb24iLCJib25kTGVuZ3RoIiwicG9zaXRpb24iLCJtYWduaXR1ZGUiLCJhdG9tUG9zaXRpb24iLCJ0aW1lcyIsImFkZEdyb3VwQW5kQm9uZCIsIm9yZGVyIiwiYWRkVGVybWluYWxMb25lUGFpcnMiLCJ2c2VwckNvbmZpZ3VyYXRpb24iLCJnZXRDb25maWd1cmF0aW9uIiwiaWRlYWxNb2RlbFZlY3RvcnMiLCJhbGxPcmllbnRhdGlvbnMiLCJtYXBwaW5nIiwiZ2V0SWRlYWxCb25kUm90YXRpb25Ub1Bvc2l0aW9ucyIsInJhZGlhbEF0b21zIiwicm90YXRlVmVjdG9yIiwiTE9ORV9QQUlSX0RJU1RBTkNFIiwiaWQiLCJyZWFsUGVybXV0YXRpb25zIiwiZ2V0TG9jYWxWU0VQUlNoYXBlIiwidXBkYXRlIiwiZHQiLCJudW1BdG9tcyIsImF0b21zIiwiZ2V0TmVpZ2hib3JDb3VudCIsImxvY2FsU2hhcGUiLCJnZXRMb2NhbFNoYXBlIiwicGVybXV0YXRpb24iLCJhcHBseUFuZ2xlQXR0cmFjdGlvblJlcHVsc2lvbiIsInVuZGVmaW5lZCIsImdldE1heGltdW1Cb25kTGVuZ3RoIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJSZWFsTW9sZWN1bGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTMtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogUmVwcmVzZW50cyBhIHBoeXNpY2FsbHkgbWFsbGVhYmxlIHZlcnNpb24gb2YgYSByZWFsIG1vbGVjdWxlLCB3aXRoIGxvbmUgcGFpcnMgaWYgbmVjZXNzYXJ5LlxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XHJcbiAqL1xyXG5cclxuaW1wb3J0IFZlY3RvcjMgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjMuanMnO1xyXG5pbXBvcnQgbW9sZWN1bGVTaGFwZXMgZnJvbSAnLi4vLi4vbW9sZWN1bGVTaGFwZXMuanMnO1xyXG5pbXBvcnQgTG9jYWxTaGFwZSBmcm9tICcuL0xvY2FsU2hhcGUuanMnO1xyXG5pbXBvcnQgTW9sZWN1bGUgZnJvbSAnLi9Nb2xlY3VsZS5qcyc7XHJcbmltcG9ydCBQYWlyR3JvdXAgZnJvbSAnLi9QYWlyR3JvdXAuanMnO1xyXG5pbXBvcnQgVlNFUFJDb25maWd1cmF0aW9uIGZyb20gJy4vVlNFUFJDb25maWd1cmF0aW9uLmpzJztcclxuXHJcbmNsYXNzIFJlYWxNb2xlY3VsZSBleHRlbmRzIE1vbGVjdWxlIHtcclxuICAvKlxyXG4gICAqIEBwYXJhbSB7UmVhbE1vbGVjdWxlU2hhcGV9IHJlYWxNb2xlY3VsZVNoYXBlXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIHJlYWxNb2xlY3VsZVNoYXBlICkge1xyXG4gICAgbGV0IGk7XHJcbiAgICBsZXQgZ3JvdXA7XHJcblxyXG4gICAgc3VwZXIoIHRydWUgKTtcclxuXHJcbiAgICB0aGlzLnJlYWxNb2xlY3VsZVNoYXBlID0gcmVhbE1vbGVjdWxlU2hhcGU7IC8vIEBwdWJsaWMge1JlYWxNb2xlY3VsZVNoYXBlfSAtIE91ciBpZGVhbCBzaGFwZVxyXG4gICAgdGhpcy5sb2NhbFNoYXBlTWFwID0ge307IC8vIEBwcml2YXRlIHtudW1iZXJ9IC0gTWFwcyBhdG9tIElEcyA9PiB7TG9jYWxTaGFwZX1cclxuXHJcbiAgICB0aGlzLmxhc3RQZXJtdXRhdGlvbnMgPSBbXTtcclxuXHJcbiAgICBjb25zdCBudW1Mb25lUGFpcnMgPSByZWFsTW9sZWN1bGVTaGFwZS5jZW50cmFsQXRvbS5sb25lUGFpckNvdW50O1xyXG4gICAgY29uc3QgbnVtQm9uZHMgPSByZWFsTW9sZWN1bGVTaGFwZS5ib25kcy5sZW5ndGg7XHJcblxyXG4gICAgY29uc3QgaWRlYWxDZW50cmFsT3JpZW50YXRpb25zID0gW107XHJcbiAgICBjb25zdCByYWRpYWxHcm91cHMgPSBbXTtcclxuXHJcbiAgICB0aGlzLmFkZENlbnRyYWxBdG9tKCBuZXcgUGFpckdyb3VwKCBuZXcgVmVjdG9yMyggMCwgMCwgMCApLCBmYWxzZSwge1xyXG4gICAgICBlbGVtZW50OiByZWFsTW9sZWN1bGVTaGFwZS5jZW50cmFsQXRvbS5lbGVtZW50XHJcbiAgICB9ICkgKTtcclxuXHJcbiAgICAvLyBhZGQgaW4gYm9uZHNcclxuICAgIGNvbnN0IGJvbmRzID0gcmVhbE1vbGVjdWxlU2hhcGUuYm9uZHM7XHJcbiAgICBmb3IgKCBpID0gMDsgaSA8IGJvbmRzLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICBjb25zdCBib25kID0gYm9uZHNbIGkgXTtcclxuICAgICAgY29uc3QgYXRvbSA9IGJvbmQuZ2V0T3RoZXJBdG9tKCByZWFsTW9sZWN1bGVTaGFwZS5jZW50cmFsQXRvbSApO1xyXG4gICAgICBpZGVhbENlbnRyYWxPcmllbnRhdGlvbnMucHVzaCggYXRvbS5vcmllbnRhdGlvbiApO1xyXG4gICAgICBjb25zdCBib25kTGVuZ3RoID0gYXRvbS5wb3NpdGlvbi5tYWduaXR1ZGU7XHJcblxyXG4gICAgICBjb25zdCBhdG9tUG9zaXRpb24gPSBhdG9tLm9yaWVudGF0aW9uLnRpbWVzKCBib25kTGVuZ3RoICk7XHJcbiAgICAgIGdyb3VwID0gbmV3IFBhaXJHcm91cCggYXRvbVBvc2l0aW9uLCBmYWxzZSwge1xyXG4gICAgICAgIGVsZW1lbnQ6IGF0b20uZWxlbWVudFxyXG4gICAgICB9ICk7XHJcbiAgICAgIHJhZGlhbEdyb3Vwcy5wdXNoKCBncm91cCApO1xyXG5cclxuICAgICAgLy8gYWRkIHRoZSBhdG9tIGl0c2VsZlxyXG4gICAgICB0aGlzLmFkZEdyb3VwQW5kQm9uZCggZ3JvdXAsIHRoaXMuY2VudHJhbEF0b20sIGJvbmQub3JkZXIsIGJvbmRMZW5ndGggKTtcclxuXHJcbiAgICAgIC8vIGFkZCB0aGUgbG9uZSBwYWlycyBvbnRvIHRoZSBhdG9tXHJcbiAgICAgIHRoaXMuYWRkVGVybWluYWxMb25lUGFpcnMoIGdyb3VwLCBhdG9tLmxvbmVQYWlyQ291bnQgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBhbGwgb2YgdGhlIGlkZWFsIHZlY3RvcnMgKGluY2x1ZGluZyBmb3IgbG9uZSBwYWlycylcclxuICAgIGNvbnN0IHZzZXByQ29uZmlndXJhdGlvbiA9IFZTRVBSQ29uZmlndXJhdGlvbi5nZXRDb25maWd1cmF0aW9uKCBudW1Cb25kcywgbnVtTG9uZVBhaXJzICk7XHJcbiAgICBjb25zdCBpZGVhbE1vZGVsVmVjdG9ycyA9IHZzZXByQ29uZmlndXJhdGlvbi5hbGxPcmllbnRhdGlvbnM7XHJcblxyXG4gICAgY29uc3QgbWFwcGluZyA9IHZzZXByQ29uZmlndXJhdGlvbi5nZXRJZGVhbEJvbmRSb3RhdGlvblRvUG9zaXRpb25zKCB0aGlzLnJhZGlhbEF0b21zICk7XHJcblxyXG4gICAgLy8gYWRkIGluIGxvbmUgcGFpcnMgaW4gdGhlaXIgY29ycmVjdCBcImluaXRpYWxcIiBwb3NpdGlvbnNcclxuICAgIGZvciAoIGkgPSAwOyBpIDwgbnVtTG9uZVBhaXJzOyBpKysgKSB7XHJcbiAgICAgIGNvbnN0IG9yaWVudGF0aW9uID0gbWFwcGluZy5yb3RhdGVWZWN0b3IoIGlkZWFsTW9kZWxWZWN0b3JzWyBpIF0gKTtcclxuICAgICAgaWRlYWxDZW50cmFsT3JpZW50YXRpb25zLnB1c2goIG9yaWVudGF0aW9uICk7XHJcbiAgICAgIGdyb3VwID0gbmV3IFBhaXJHcm91cCggb3JpZW50YXRpb24udGltZXMoIFBhaXJHcm91cC5MT05FX1BBSVJfRElTVEFOQ0UgKSwgdHJ1ZSApO1xyXG4gICAgICB0aGlzLmFkZEdyb3VwQW5kQm9uZCggZ3JvdXAsIHRoaXMuY2VudHJhbEF0b20sIDAsIFBhaXJHcm91cC5MT05FX1BBSVJfRElTVEFOQ0UgKTtcclxuICAgICAgcmFkaWFsR3JvdXBzLnB1c2goIGdyb3VwICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5sb2NhbFNoYXBlTWFwWyB0aGlzLmNlbnRyYWxBdG9tLmlkIF0gPSBuZXcgTG9jYWxTaGFwZSggTG9jYWxTaGFwZS5yZWFsUGVybXV0YXRpb25zKCByYWRpYWxHcm91cHMgKSwgdGhpcy5jZW50cmFsQXRvbSwgcmFkaWFsR3JvdXBzLCBpZGVhbENlbnRyYWxPcmllbnRhdGlvbnMgKTtcclxuXHJcbiAgICAvLyBiYXNpY2FsbHkgb25seSB1c2UgVlNFUFIgbW9kZWwgZm9yIHRoZSBhdHRyYWN0aW9uIG9uIG5vbi1jZW50cmFsIGF0b21zXHJcbiAgICBjb25zdCByYWRpYWxBdG9tcyA9IHRoaXMucmFkaWFsQXRvbXM7XHJcbiAgICBmb3IgKCBpID0gMDsgaSA8IHJhZGlhbEF0b21zLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICB0aGlzLmxvY2FsU2hhcGVNYXBbIHJhZGlhbEF0b21zWyBpIF0uaWQgXSA9IHRoaXMuZ2V0TG9jYWxWU0VQUlNoYXBlKCByYWRpYWxBdG9tc1sgaSBdICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTdGVwIGZ1bmN0aW9uIGZvciB0aGUgbW9sZWN1bGUuXHJcbiAgICogQG92ZXJyaWRlXHJcbiAgICogQHB1YmxpY1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGR0IC0gQW1vdW50IG9mIHRpbWUgZWxhcHNlZFxyXG4gICAqL1xyXG4gIHVwZGF0ZSggZHQgKSB7XHJcbiAgICBzdXBlci51cGRhdGUoIGR0ICk7XHJcblxyXG4gICAgLy8gYW5nbGUtYmFzZWQgcmVwdWxzaW9uXHJcbiAgICBjb25zdCBudW1BdG9tcyA9IHRoaXMuYXRvbXMubGVuZ3RoO1xyXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgbnVtQXRvbXM7IGkrKyApIHtcclxuICAgICAgY29uc3QgYXRvbSA9IHRoaXMuYXRvbXNbIGkgXTtcclxuICAgICAgaWYgKCB0aGlzLmdldE5laWdoYm9yQ291bnQoIGF0b20gKSA+IDEgKSB7XHJcbiAgICAgICAgY29uc3QgbG9jYWxTaGFwZSA9IHRoaXMuZ2V0TG9jYWxTaGFwZSggYXRvbSApO1xyXG5cclxuICAgICAgICBjb25zdCBwZXJtdXRhdGlvbiA9IGxvY2FsU2hhcGUuYXBwbHlBbmdsZUF0dHJhY3Rpb25SZXB1bHNpb24oIGR0LCB0aGlzLmxhc3RQZXJtdXRhdGlvbnNbIGkgXSB8fCB1bmRlZmluZWQgKS5wZXJtdXRhdGlvbjtcclxuICAgICAgICB0aGlzLmxhc3RQZXJtdXRhdGlvbnNbIGkgXSA9IHBlcm11dGF0aW9uO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBMb29rcyB1cCBhIExvY2FsU2hhcGUgZm9yIGEgcGFydGljdWxhciBhdG9tLlxyXG4gICAqIEBwdWJsaWNcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7UGFpckdyb3VwfSBhdG9tXHJcbiAgICogQHJldHVybnMge0xvY2FsU2hhcGV9XHJcbiAgICovXHJcbiAgZ2V0TG9jYWxTaGFwZSggYXRvbSApIHtcclxuICAgIHJldHVybiB0aGlzLmxvY2FsU2hhcGVNYXBbIGF0b20uaWQgXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwdWJsaWNcclxuICAgKiBAb3ZlcnJpZGUgLSBXZSBkb24ndCB3YW50IHRvIHNwZWNpZnkgdGhpcyBmb3IgcmVhbCBtb2xlY3VsZXMuXHJcbiAgICogQHJldHVybnMge3VuZGVmaW5lZH1cclxuICAgKi9cclxuICBnZXRNYXhpbXVtQm9uZExlbmd0aCgpIHtcclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgfVxyXG59XHJcblxyXG5tb2xlY3VsZVNoYXBlcy5yZWdpc3RlciggJ1JlYWxNb2xlY3VsZScsIFJlYWxNb2xlY3VsZSApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgUmVhbE1vbGVjdWxlO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsT0FBTyxNQUFNLCtCQUErQjtBQUNuRCxPQUFPQyxjQUFjLE1BQU0seUJBQXlCO0FBQ3BELE9BQU9DLFVBQVUsTUFBTSxpQkFBaUI7QUFDeEMsT0FBT0MsUUFBUSxNQUFNLGVBQWU7QUFDcEMsT0FBT0MsU0FBUyxNQUFNLGdCQUFnQjtBQUN0QyxPQUFPQyxrQkFBa0IsTUFBTSx5QkFBeUI7QUFFeEQsTUFBTUMsWUFBWSxTQUFTSCxRQUFRLENBQUM7RUFDbEM7QUFDRjtBQUNBO0VBQ0VJLFdBQVdBLENBQUVDLGlCQUFpQixFQUFHO0lBQy9CLElBQUlDLENBQUM7SUFDTCxJQUFJQyxLQUFLO0lBRVQsS0FBSyxDQUFFLElBQUssQ0FBQztJQUViLElBQUksQ0FBQ0YsaUJBQWlCLEdBQUdBLGlCQUFpQixDQUFDLENBQUM7SUFDNUMsSUFBSSxDQUFDRyxhQUFhLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7SUFFekIsSUFBSSxDQUFDQyxnQkFBZ0IsR0FBRyxFQUFFO0lBRTFCLE1BQU1DLFlBQVksR0FBR0wsaUJBQWlCLENBQUNNLFdBQVcsQ0FBQ0MsYUFBYTtJQUNoRSxNQUFNQyxRQUFRLEdBQUdSLGlCQUFpQixDQUFDUyxLQUFLLENBQUNDLE1BQU07SUFFL0MsTUFBTUMsd0JBQXdCLEdBQUcsRUFBRTtJQUNuQyxNQUFNQyxZQUFZLEdBQUcsRUFBRTtJQUV2QixJQUFJLENBQUNDLGNBQWMsQ0FBRSxJQUFJakIsU0FBUyxDQUFFLElBQUlKLE9B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