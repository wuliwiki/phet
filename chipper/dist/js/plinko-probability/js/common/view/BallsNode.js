// Copyright 2002-2021, University of Colorado Boulder

/**
 * Canvas Node that renders all the scenery balls
 *
 * @author Martin Veillette (Berea College)
 */

import merge from '../../../../phet-core/js/merge.js';
import required from '../../../../phet-core/js/required.js';
import { CanvasNode } from '../../../../scenery/js/imports.js';
import plinkoProbability from '../../plinkoProbability.js';
import BallPhase from '../model/BallPhase.js';
import GaltonBoard from '../model/GaltonBoard.js';
import PlinkoProbabilityConstants from '../PlinkoProbabilityConstants.js';
import BallNode from './BallNode.js';
class BallsNode extends CanvasNode {
  /**
   * @param {Ball[]} balls - an array of model Ball
   * @param {Property.<number>} numberOfRowsProperty - number of rows
   * @param {Property.<string>} histogramModeProperty - see PlinkoProbabilityCommonView
   * @param {ModelViewTransform2} modelViewTransform - model to view transform
   * @param {Object} config - must contain a canvasBounds attribute of type Bounds2
   */
  constructor(balls, numberOfRowsProperty, histogramModeProperty, modelViewTransform, config) {
    config = merge({
      // {Bounds2}
      canvasBounds: required(config.canvasBounds)
    }, config);
    super(config);

    // @private
    this.balls = balls;
    this.numberOfRowsProperty = numberOfRowsProperty;
    this.histogramModeProperty = histogramModeProperty;
    this.modelViewTransform = modelViewTransform;

    // set the default ball radius using the largest possible radius, that is the minimum number of rows.
    const defaultBallRadius = modelViewTransform.modelToViewDeltaX(GaltonBoard.getPegSpacing(PlinkoProbabilityConstants.ROWS_RANGE.min) * PlinkoProbabilityConstants.BALL_SIZE_FRACTION);

    // Renders the ball to a canvas, used for rendering all balls.
    const ballNode = new BallNode(defaultBallRadius);
    ballNode.toCanvas((canvas, x, y, width, height) => {
      this.ballCanvas = canvas; // @private
      this.invalidatePaint(); // calls paintCanvas
    });

    // calls paintCanvas
    this.invalidatePaint();
  }

  /**
   * @param {CanvasRenderingContext2D} context
   * @override
   * @private
   */
  paintCanvas(context) {
    // image is created asynchronously by toImage, so it may not be available yet
    if (!this.ballCanvas) {
      return;
    }

    // Adjust size of the balls based on the number of rows in the Galton board.
    // scale ball radius to be inversely proportional to (number of bins )

    let scaleFactor = (PlinkoProbabilityConstants.ROWS_RANGE.min + 1) / (this.numberOfRowsProperty.get() + 1);
    let verticalOffset = 0;
    const stopScalingRowNumber = 3;
    // when the number of rows is less than 3, scaling up the ball radius
    // differently
    if (this.numberOfRowsProperty.get() <= stopScalingRowNumber) {
      // some ad hoc fudge factor to suppress even more the size of the
      // ball when the number of rows is low
      // (3/4 when row =1, 4/5 when row =2 and 5/6 when row =3)
      const fudgeFactor = (this.numberOfRowsProperty.get() - 1 + 3) / (this.numberOfRowsProperty.get() - 1 + 4);
      scaleFactor = scaleFactor * fudgeFactor;

      // offset vertically the ball trajectory down such that they still give
      // the impression to hit the pegs
      verticalOffset = (1 - fudgeFactor) * this.ballCanvas.height / 2;
    }
    this.balls.forEach(ball => {
      // don't draw balls in bins (cylinders) when the bins aren't visible
      if (this.histogramModeProperty.get() === 'cylinder' || ball.phase !== BallPhase.COLLECTED) {
        const ballViewPositionX = this.modelViewTransform.modelToViewX(ball.position.x);
        const ballViewPositionY = this.modelViewTransform.modelToViewY(ball.position.y);
        context.drawImage(this.ballCanvas, ballViewPositionX - this.ballCanvas.width * scaleFactor / 2, ballViewPositionY - this.ballCanvas.height * scaleFactor / 2 + verticalOffset, this.ballCanvas.width * scaleFactor, this.ballCanvas.height * scaleFactor);
      }
    });
  }
}
plinkoProbability.register('BallsNode', BallsNode);
export default BallsNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtZXJnZSIsInJlcXVpcmVkIiwiQ2FudmFzTm9kZSIsInBsaW5rb1Byb2JhYmlsaXR5IiwiQmFsbFBoYXNlIiwiR2FsdG9uQm9hcmQiLCJQbGlua29Qcm9iYWJpbGl0eUNvbnN0YW50cyIsIkJhbGxOb2RlIiwiQmFsbHNOb2RlIiwiY29uc3RydWN0b3IiLCJiYWxscyIsIm51bWJlck9mUm93c1Byb3BlcnR5IiwiaGlzdG9ncmFtTW9kZVByb3BlcnR5IiwibW9kZWxWaWV3VHJhbnNmb3JtIiwiY29uZmlnIiwiY2FudmFzQm91bmRzIiwiZGVmYXVsdEJhbGxSYWRpdXMiLCJtb2RlbFRvVmlld0RlbHRhWCIsImdldFBlZ1NwYWNpbmciLCJST1dTX1JBTkdFIiwibWluIiwiQkFMTF9TSVpFX0ZSQUNUSU9OIiwiYmFsbE5vZGUiLCJ0b0NhbnZhcyIsImNhbnZhcyIsIngiLCJ5Iiwid2lkdGgiLCJoZWlnaHQiLCJiYWxsQ2FudmFzIiwiaW52YWxpZGF0ZVBhaW50IiwicGFpbnRDYW52YXMiLCJjb250ZXh0Iiwic2NhbGVGYWN0b3IiLCJnZXQiLCJ2ZXJ0aWNhbE9mZnNldCIsInN0b3BTY2FsaW5nUm93TnVtYmVyIiwiZnVkZ2VGYWN0b3IiLCJmb3JFYWNoIiwiYmFsbCIsInBoYXNlIiwiQ09MTEVDVEVEIiwiYmFsbFZpZXdQb3NpdGlvblgiLCJtb2RlbFRvVmlld1giLCJwb3NpdGlvbiIsImJhbGxWaWV3UG9zaXRpb25ZIiwibW9kZWxUb1ZpZXdZIiwiZHJhd0ltYWdlIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJCYWxsc05vZGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMDItMjAyMSwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogQ2FudmFzIE5vZGUgdGhhdCByZW5kZXJzIGFsbCB0aGUgc2NlbmVyeSBiYWxsc1xyXG4gKlxyXG4gKiBAYXV0aG9yIE1hcnRpbiBWZWlsbGV0dGUgKEJlcmVhIENvbGxlZ2UpXHJcbiAqL1xyXG5cclxuaW1wb3J0IG1lcmdlIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9tZXJnZS5qcyc7XHJcbmltcG9ydCByZXF1aXJlZCBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvcmVxdWlyZWQuanMnO1xyXG5pbXBvcnQgeyBDYW52YXNOb2RlIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IHBsaW5rb1Byb2JhYmlsaXR5IGZyb20gJy4uLy4uL3BsaW5rb1Byb2JhYmlsaXR5LmpzJztcclxuaW1wb3J0IEJhbGxQaGFzZSBmcm9tICcuLi9tb2RlbC9CYWxsUGhhc2UuanMnO1xyXG5pbXBvcnQgR2FsdG9uQm9hcmQgZnJvbSAnLi4vbW9kZWwvR2FsdG9uQm9hcmQuanMnO1xyXG5pbXBvcnQgUGxpbmtvUHJvYmFiaWxpdHlDb25zdGFudHMgZnJvbSAnLi4vUGxpbmtvUHJvYmFiaWxpdHlDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgQmFsbE5vZGUgZnJvbSAnLi9CYWxsTm9kZS5qcyc7XHJcblxyXG5jbGFzcyBCYWxsc05vZGUgZXh0ZW5kcyBDYW52YXNOb2RlIHtcclxuICAvKipcclxuICAgKiBAcGFyYW0ge0JhbGxbXX0gYmFsbHMgLSBhbiBhcnJheSBvZiBtb2RlbCBCYWxsXHJcbiAgICogQHBhcmFtIHtQcm9wZXJ0eS48bnVtYmVyPn0gbnVtYmVyT2ZSb3dzUHJvcGVydHkgLSBudW1iZXIgb2Ygcm93c1xyXG4gICAqIEBwYXJhbSB7UHJvcGVydHkuPHN0cmluZz59IGhpc3RvZ3JhbU1vZGVQcm9wZXJ0eSAtIHNlZSBQbGlua29Qcm9iYWJpbGl0eUNvbW1vblZpZXdcclxuICAgKiBAcGFyYW0ge01vZGVsVmlld1RyYW5zZm9ybTJ9IG1vZGVsVmlld1RyYW5zZm9ybSAtIG1vZGVsIHRvIHZpZXcgdHJhbnNmb3JtXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyAtIG11c3QgY29udGFpbiBhIGNhbnZhc0JvdW5kcyBhdHRyaWJ1dGUgb2YgdHlwZSBCb3VuZHMyXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIGJhbGxzLCBudW1iZXJPZlJvd3NQcm9wZXJ0eSwgaGlzdG9ncmFtTW9kZVByb3BlcnR5LCBtb2RlbFZpZXdUcmFuc2Zvcm0sIGNvbmZpZyApIHtcclxuICAgIGNvbmZpZyA9IG1lcmdlKCB7XHJcblxyXG4gICAgICAvLyB7Qm91bmRzMn1cclxuICAgICAgY2FudmFzQm91bmRzOiByZXF1aXJlZCggY29uZmlnLmNhbnZhc0JvdW5kcyApXHJcbiAgICB9LCBjb25maWcgKTtcclxuXHJcbiAgICBzdXBlciggY29uZmlnICk7XHJcblxyXG5cclxuICAgIC8vIEBwcml2YXRlXHJcbiAgICB0aGlzLmJhbGxzID0gYmFsbHM7XHJcbiAgICB0aGlzLm51bWJlck9mUm93c1Byb3BlcnR5ID0gbnVtYmVyT2ZSb3dzUHJvcGVydHk7XHJcbiAgICB0aGlzLmhpc3RvZ3JhbU1vZGVQcm9wZXJ0eSA9IGhpc3RvZ3JhbU1vZGVQcm9wZXJ0eTtcclxuICAgIHRoaXMubW9kZWxWaWV3VHJhbnNmb3JtID0gbW9kZWxWaWV3VHJhbnNmb3JtO1xyXG5cclxuICAgIC8vIHNldCB0aGUgZGVmYXVsdCBiYWxsIHJhZGl1cyB1c2luZyB0aGUgbGFyZ2VzdCBwb3NzaWJsZSByYWRpdXMsIHRoYXQgaXMgdGhlIG1pbmltdW0gbnVtYmVyIG9mIHJvd3MuXHJcbiAgICBjb25zdCBkZWZhdWx0QmFsbFJhZGl1cyA9IG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld0RlbHRhWChcclxuICAgICAgR2FsdG9uQm9hcmQuZ2V0UGVnU3BhY2luZyggUGxpbmtvUHJvYmFiaWxpdHlDb25zdGFudHMuUk9XU19SQU5HRS5taW4gKSAqIFBsaW5rb1Byb2JhYmlsaXR5Q29uc3RhbnRzLkJBTExfU0laRV9GUkFDVElPTiApO1xyXG5cclxuICAgIC8vIFJlbmRlcnMgdGhlIGJhbGwgdG8gYSBjYW52YXMsIHVzZWQgZm9yIHJlbmRlcmluZyBhbGwgYmFsbHMuXHJcbiAgICBjb25zdCBiYWxsTm9kZSA9IG5ldyBCYWxsTm9kZSggZGVmYXVsdEJhbGxSYWRpdXMgKTtcclxuICAgIGJhbGxOb2RlLnRvQ2FudmFzKCAoIGNhbnZhcywgeCwgeSwgd2lkdGgsIGhlaWdodCApID0+IHtcclxuICAgICAgdGhpcy5iYWxsQ2FudmFzID0gY2FudmFzOyAvLyBAcHJpdmF0ZVxyXG4gICAgICB0aGlzLmludmFsaWRhdGVQYWludCgpOyAvLyBjYWxscyBwYWludENhbnZhc1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIGNhbGxzIHBhaW50Q2FudmFzXHJcbiAgICB0aGlzLmludmFsaWRhdGVQYWludCgpO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0XHJcbiAgICogQG92ZXJyaWRlXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBwYWludENhbnZhcyggY29udGV4dCApIHtcclxuXHJcbiAgICAvLyBpbWFnZSBpcyBjcmVhdGVkIGFzeW5jaHJvbm91c2x5IGJ5IHRvSW1hZ2UsIHNvIGl0IG1heSBub3QgYmUgYXZhaWxhYmxlIHlldFxyXG4gICAgaWYgKCAhdGhpcy5iYWxsQ2FudmFzICkgeyByZXR1cm47IH1cclxuXHJcbiAgICAvLyBBZGp1c3Qgc2l6ZSBvZiB0aGUgYmFsbHMgYmFzZWQgb24gdGhlIG51bWJlciBvZiByb3dzIGluIHRoZSBHYWx0b24gYm9hcmQuXHJcbiAgICAvLyBzY2FsZSBiYWxsIHJhZGl1cyB0byBiZSBpbnZlcnNlbHkgcHJvcG9ydGlvbmFsIHRvIChudW1iZXIgb2YgYmlucyApXHJcblxyXG4gICAgbGV0IHNjYWxlRmFjdG9yID0gKCBQbGlua29Qcm9iYWJpbGl0eUNvbnN0YW50cy5ST1dTX1JBTkdFLm1pbiArIDEgKSAvICggdGhpcy5udW1iZXJPZlJvd3NQcm9wZXJ0eS5nZXQoKSArIDEgKTtcclxuXHJcbiAgICBsZXQgdmVydGljYWxPZmZzZXQgPSAwO1xyXG4gICAgY29uc3Qgc3RvcFNjYWxpbmdSb3dOdW1iZXIgPSAzO1xyXG4gICAgLy8gd2hlbiB0aGUgbnVtYmVyIG9mIHJvd3MgaXMgbGVzcyB0aGFuIDMsIHNjYWxpbmcgdXAgdGhlIGJhbGwgcmFkaXVzXHJcbiAgICAvLyBkaWZmZXJlbnRseVxyXG4gICAgaWYgKCB0aGlzLm51bWJlck9mUm93c1Byb3BlcnR5LmdldCgpIDw9IHN0b3BTY2FsaW5nUm93TnVtYmVyICkge1xyXG5cclxuICAgICAgLy8gc29tZSBhZCBob2MgZnVkZ2UgZmFjdG9yIHRvIHN1cHByZXNzIGV2ZW4gbW9yZSB0aGUgc2l6ZSBvZiB0aGVcclxuICAgICAgLy8gYmFsbCB3aGVuIHRoZSBudW1iZXIgb2Ygcm93cyBpcyBsb3dcclxuICAgICAgLy8gKDMvNCB3aGVuIHJvdyA9MSwgNC81IHdoZW4gcm93ID0yIGFuZCA1LzYgd2hlbiByb3cgPTMpXHJcbiAgICAgIGNvbnN0IGZ1ZGdlRmFjdG9yID0gKCAoIHRoaXMubnVtYmVyT2ZSb3dzUHJvcGVydHkuZ2V0KCkgLSAxICkgKyAzICkgL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICggKCB0aGlzLm51bWJlck9mUm93c1Byb3BlcnR5LmdldCgpIC0gMSApICsgNCApO1xyXG4gICAgICBzY2FsZUZhY3RvciA9IHNjYWxlRmFjdG9yICogZnVkZ2VGYWN0b3I7XHJcblxyXG4gICAgICAvLyBvZmZzZXQgdmVydGljYWxseSB0aGUgYmFsbCB0cmFqZWN0b3J5IGRvd24gc3VjaCB0aGF0IHRoZXkgc3RpbGwgZ2l2ZVxyXG4gICAgICAvLyB0aGUgaW1wcmVzc2lvbiB0byBoaXQgdGhlIHBlZ3NcclxuICAgICAgdmVydGljYWxPZmZzZXQgPSAoIDEgLSBmdWRnZUZhY3RvciApICogdGhpcy5iYWxsQ2FudmFzLmhlaWdodCAvIDI7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5iYWxscy5mb3JFYWNoKCBiYWxsID0+IHtcclxuXHJcbiAgICAgIC8vIGRvbid0IGRyYXcgYmFsbHMgaW4gYmlucyAoY3lsaW5kZXJzKSB3aGVuIHRoZSBiaW5zIGFyZW4ndCB2aXNpYmxlXHJcbiAgICAgIGlmICggdGhpcy5oaXN0b2dyYW1Nb2RlUHJvcGVydHkuZ2V0KCkgPT09ICdjeWxpbmRlcicgfHwgYmFsbC5waGFzZSAhPT0gQmFsbFBoYXNlLkNPTExFQ1RFRCApIHtcclxuXHJcbiAgICAgICAgY29uc3QgYmFsbFZpZXdQb3NpdGlvblggPSB0aGlzLm1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1goIGJhbGwucG9zaXRpb24ueCApO1xyXG4gICAgICAgIGNvbnN0IGJhbGxWaWV3UG9zaXRpb25ZID0gdGhpcy5tb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdZKCBiYWxsLnBvc2l0aW9uLnkgKTtcclxuXHJcbiAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UoIHRoaXMuYmFsbENhbnZhcyxcclxuICAgICAgICAgIGJhbGxWaWV3UG9zaXRpb25YIC0gdGhpcy5iYWxsQ2FudmFzLndpZHRoICogc2NhbGVGYWN0b3IgLyAyLFxyXG4gICAgICAgICAgYmFsbFZpZXdQb3NpdGlvblkgLSB0aGlzLmJhbGxDYW52YXMuaGVpZ2h0ICogc2NhbGVGYWN0b3IgLyAyICsgdmVydGljYWxPZmZzZXQsXHJcbiAgICAgICAgICB0aGlzLmJhbGxDYW52YXMud2lkdGggKiBzY2FsZUZhY3RvcixcclxuICAgICAgICAgIHRoaXMuYmFsbENhbnZhcy5oZWlnaHQgKiBzY2FsZUZhY3RvciApO1xyXG4gICAgICB9XHJcbiAgICB9ICk7XHJcbiAgfVxyXG59XHJcblxyXG5wbGlua29Qcm9iYWJpbGl0eS5yZWdpc3RlciggJ0JhbGxzTm9kZScsIEJhbGxzTm9kZSApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgQmFsbHNOb2RlOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxLQUFLLE1BQU0sbUNBQW1DO0FBQ3JELE9BQU9DLFFBQVEsTUFBTSxz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