// Copyright 2017, University of Colorado Boulder

const constants = require('./constants');
const sendEmail = require('./sendEmail');
const winston = require('winston');
const axios = require('axios');

/**
 * Notify the website that a new sim or translation has been deployed. This will cause the project to
 * synchronize and the new translation will appear on the website.
 * @param {Object} [options]
 *  @property {string} simName
 *  @property {string} email
 *  @property {string} brand
 *  @property {string} locales
 *  @property {number} translatorId
 *  @property {Object} [phetioOptions]
 *    @property {SimVersion} version
 *    @property {string} branch
 *    @property {string} suffix
 *    @property {boolean} ignoreForAutomatedMaintenanceReleases
 */
module.exports = async function notifyServer(options) {
  if (options.brand === constants.PHET_BRAND) {
    const project = `html/${options.simName}`;
    let url = `${constants.BUILD_SERVER_CONFIG.productionServerURL}/services/synchronize-project?projectName=${project}`;
    if (options.locales && options.locales !== '*' && options.locales !== 'en' && options.locales.indexOf(',') < 0) {
      url += `&locale=${options.locales}`;
      if (options.translatorId) {
        url += `&translatorId=${options.translatorId}`;
      }
    }
    let response;
    try {
      response = await axios({
        url: url,
        auth: {
          username: 'token',
          password: constants.BUILD_SERVER_CONFIG.serverToken
        }
      });
    } catch (e) {
      throw new Error(e);
    }
    let errorMessage;
    if (response.status >= 200 && response.status <= 299) {
      const data = response.data;
      if (!data.success) {
        errorMessage = `request to synchronize project ${project} on ${constants.BUILD_SERVER_CONFIG.productionServerURL} failed with message: ${data.error}`;
        winston.log('error', errorMessage);
        sendEmail('SYNCHRONIZE FAILED', errorMessage, options.email);
      } else {
        winston.log('info', `request to synchronize project ${project} on ${constants.BUILD_SERVER_CONFIG.productionServerURL} succeeded`);
      }
    } else {
      errorMessage = 'request to synchronize project errored or returned a non 2XX status code';
      winston.log('error', errorMessage);
      sendEmail('SYNCHRONIZE FAILED', errorMessage, options.email);
    }
  } else if (options.brand === constants.PHET_IO_BRAND) {
    const url = `${constants.BUILD_SERVER_CONFIG.productionServerURL}/services/metadata/phetio` + `?name=${options.simName}&versionMajor=${options.phetioOptions.version.major}&versionMinor=${options.phetioOptions.version.minor}&versionMaintenance=${options.phetioOptions.version.maintenance}&versionSuffix=${options.phetioOptions.suffix}&branch=${options.phetioOptions.branch}&active=${!options.phetioOptions.ignoreForAutomatedMaintenanceReleases}`;
    let response;
    try {
      response = await axios({
        url: url,
        method: 'POST',
        auth: {
          username: 'token',
          password: constants.BUILD_SERVER_CONFIG.serverToken
        }
      });
    } catch (e) {
      throw new Error(e);
    }
    let errorMessage;
    if (response.status < 200 || response.status > 299) {
      try {
        errorMessage = response.data.error;
      } catch (e) {
        errorMessage = 'request to upsert phetio deployment failed';
      }
      winston.log('error', errorMessage);
      sendEmail('PHET_IO DEPLOYMENT UPSERT FAILED', errorMessage, options.email);
      throw new Error('PHET_IO DEPLOYMENT UPSERT FAILED');
    } else {
      const data = response.data;
      if (!data.success) {
        try {
          errorMessage = data.error;
        } catch (e) {
          errorMessage = 'request to upsert phetio deployment failed';
        }
        winston.log('error', errorMessage);
        sendEmail('SYNCHRONIZE FAILED', errorMessage, options.email);
        throw new Error('PHET_IO DEPLOYMENT UPSERT FAILED');
      } else {
        winston.log('info', `request to upsert phetio deployment for ${options.simName} on ${constants.BUILD_SERVER_CONFIG.productionServerURL} succeeded`);
      }
    }
  } else {
    throw new Error('Called notifyServer for unsupported brand');
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25zdGFudHMiLCJyZXF1aXJlIiwic2VuZEVtYWlsIiwid2luc3RvbiIsImF4aW9zIiwibW9kdWxlIiwiZXhwb3J0cyIsIm5vdGlmeVNlcnZlciIsIm9wdGlvbnMiLCJicmFuZCIsIlBIRVRfQlJBTkQiLCJwcm9qZWN0Iiwic2ltTmFtZSIsInVybCIsIkJVSUxEX1NFUlZFUl9DT05GSUciLCJwcm9kdWN0aW9uU2VydmVyVVJMIiwibG9jYWxlcyIsImluZGV4T2YiLCJ0cmFuc2xhdG9ySWQiLCJyZXNwb25zZSIsImF1dGgiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwic2VydmVyVG9rZW4iLCJlIiwiRXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJzdGF0dXMiLCJkYXRhIiwic3VjY2VzcyIsImVycm9yIiwibG9nIiwiZW1haWwiLCJQSEVUX0lPX0JSQU5EIiwicGhldGlvT3B0aW9ucyIsInZlcnNpb24iLCJtYWpvciIsIm1pbm9yIiwibWFpbnRlbmFuY2UiLCJzdWZmaXgiLCJicmFuY2giLCJpZ25vcmVGb3JBdXRvbWF0ZWRNYWludGVuYW5jZVJlbGVhc2VzIiwibWV0aG9kIl0sInNvdXJjZXMiOlsibm90aWZ5U2VydmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE3LCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcblxyXG5jb25zdCBjb25zdGFudHMgPSByZXF1aXJlKCAnLi9jb25zdGFudHMnICk7XHJcbmNvbnN0IHNlbmRFbWFpbCA9IHJlcXVpcmUoICcuL3NlbmRFbWFpbCcgKTtcclxuY29uc3Qgd2luc3RvbiA9IHJlcXVpcmUoICd3aW5zdG9uJyApO1xyXG5jb25zdCBheGlvcyA9IHJlcXVpcmUoICdheGlvcycgKTtcclxuXHJcbi8qKlxyXG4gKiBOb3RpZnkgdGhlIHdlYnNpdGUgdGhhdCBhIG5ldyBzaW0gb3IgdHJhbnNsYXRpb24gaGFzIGJlZW4gZGVwbG95ZWQuIFRoaXMgd2lsbCBjYXVzZSB0aGUgcHJvamVjdCB0b1xyXG4gKiBzeW5jaHJvbml6ZSBhbmQgdGhlIG5ldyB0cmFuc2xhdGlvbiB3aWxsIGFwcGVhciBvbiB0aGUgd2Vic2l0ZS5cclxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxyXG4gKiAgQHByb3BlcnR5IHtzdHJpbmd9IHNpbU5hbWVcclxuICogIEBwcm9wZXJ0eSB7c3RyaW5nfSBlbWFpbFxyXG4gKiAgQHByb3BlcnR5IHtzdHJpbmd9IGJyYW5kXHJcbiAqICBAcHJvcGVydHkge3N0cmluZ30gbG9jYWxlc1xyXG4gKiAgQHByb3BlcnR5IHtudW1iZXJ9IHRyYW5zbGF0b3JJZFxyXG4gKiAgQHByb3BlcnR5IHtPYmplY3R9IFtwaGV0aW9PcHRpb25zXVxyXG4gKiAgICBAcHJvcGVydHkge1NpbVZlcnNpb259IHZlcnNpb25cclxuICogICAgQHByb3BlcnR5IHtzdHJpbmd9IGJyYW5jaFxyXG4gKiAgICBAcHJvcGVydHkge3N0cmluZ30gc3VmZml4XHJcbiAqICAgIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gaWdub3JlRm9yQXV0b21hdGVkTWFpbnRlbmFuY2VSZWxlYXNlc1xyXG4gKi9cclxubW9kdWxlLmV4cG9ydHMgPSBhc3luYyBmdW5jdGlvbiBub3RpZnlTZXJ2ZXIoIG9wdGlvbnMgKSB7XHJcbiAgaWYgKCBvcHRpb25zLmJyYW5kID09PSBjb25zdGFudHMuUEhFVF9CUkFORCApIHtcclxuICAgIGNvbnN0IHByb2plY3QgPSBgaHRtbC8ke29wdGlvbnMuc2ltTmFtZX1gO1xyXG4gICAgbGV0IHVybCA9IGAke2NvbnN0YW50cy5CVUlMRF9TRVJWRVJfQ09ORklHLnByb2R1Y3Rpb25TZXJ2ZXJVUkx9L3NlcnZpY2VzL3N5bmNocm9uaXplLXByb2plY3Q/cHJvamVjdE5hbWU9JHtwcm9qZWN0fWA7XHJcbiAgICBpZiAoIG9wdGlvbnMubG9jYWxlcyAmJiBvcHRpb25zLmxvY2FsZXMgIT09ICcqJyAmJiBvcHRpb25zLmxvY2FsZXMgIT09ICdlbicgJiYgb3B0aW9ucy5sb2NhbGVzLmluZGV4T2YoICcsJyApIDwgMCApIHtcclxuICAgICAgdXJsICs9IGAmbG9jYWxlPSR7b3B0aW9ucy5sb2NhbGVzfWA7XHJcbiAgICAgIGlmICggb3B0aW9ucy50cmFuc2xhdG9ySWQgKSB7XHJcbiAgICAgICAgdXJsICs9IGAmdHJhbnNsYXRvcklkPSR7b3B0aW9ucy50cmFuc2xhdG9ySWR9YDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBsZXQgcmVzcG9uc2U7XHJcbiAgICB0cnkge1xyXG4gICAgICByZXNwb25zZSA9IGF3YWl0IGF4aW9zKCB7XHJcbiAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgYXV0aDoge1xyXG4gICAgICAgICAgdXNlcm5hbWU6ICd0b2tlbicsXHJcbiAgICAgICAgICBwYXNzd29yZDogY29uc3RhbnRzLkJVSUxEX1NFUlZFUl9DT05GSUcuc2VydmVyVG9rZW5cclxuICAgICAgICB9XHJcbiAgICAgIH0gKTtcclxuICAgIH1cclxuICAgIGNhdGNoKCBlICkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoIGUgKTtcclxuICAgIH1cclxuICAgIGxldCBlcnJvck1lc3NhZ2U7XHJcblxyXG4gICAgaWYgKCByZXNwb25zZS5zdGF0dXMgPj0gMjAwICYmIHJlc3BvbnNlLnN0YXR1cyA8PSAyOTkgKSB7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5kYXRhO1xyXG5cclxuICAgICAgaWYgKCAhZGF0YS5zdWNjZXNzICkge1xyXG4gICAgICAgIGVycm9yTWVzc2FnZSA9IGByZXF1ZXN0IHRvIHN5bmNocm9uaXplIHByb2plY3QgJHtwcm9qZWN0fSBvbiAke2NvbnN0YW50cy5CVUlMRF9TRVJWRVJfQ09ORklHLnByb2R1Y3Rpb25TZXJ2ZXJVUkx9IGZhaWxlZCB3aXRoIG1lc3NhZ2U6ICR7ZGF0YS5lcnJvcn1gO1xyXG4gICAgICAgIHdpbnN0b24ubG9nKCAnZXJyb3InLCBlcnJvck1lc3NhZ2UgKTtcclxuICAgICAgICBzZW5kRW1haWwoICdTWU5DSFJPTklaRSBGQUlMRUQnLCBlcnJvck1lc3NhZ2UsIG9wdGlvbnMuZW1haWwgKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICB3aW5zdG9uLmxvZyggJ2luZm8nLCBgcmVxdWVzdCB0byBzeW5jaHJvbml6ZSBwcm9qZWN0ICR7cHJvamVjdH0gb24gJHtjb25zdGFudHMuQlVJTERfU0VSVkVSX0NPTkZJRy5wcm9kdWN0aW9uU2VydmVyVVJMfSBzdWNjZWVkZWRgICk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBlcnJvck1lc3NhZ2UgPSAncmVxdWVzdCB0byBzeW5jaHJvbml6ZSBwcm9qZWN0IGVycm9yZWQgb3IgcmV0dXJuZWQgYSBub24gMlhYIHN0YXR1cyBjb2RlJztcclxuICAgICAgd2luc3Rvbi5sb2coICdlcnJvcicsIGVycm9yTWVzc2FnZSApO1xyXG4gICAgICBzZW5kRW1haWwoICdTWU5DSFJPTklaRSBGQUlMRUQnLCBlcnJvck1lc3NhZ2UsIG9wdGlvbnMuZW1haWwgKTtcclxuICAgIH1cclxuICB9XHJcbiAgZWxzZSBpZiAoIG9wdGlvbnMuYnJhbmQgPT09IGNvbnN0YW50cy5QSEVUX0lPX0JSQU5EICkge1xyXG4gICAgY29uc3QgdXJsID0gYCR7Y29uc3RhbnRzLkJVSUxEX1NFUlZFUl9DT05GSUcucHJvZHVjdGlvblNlcnZlclVSTH0vc2VydmljZXMvbWV0YWRhdGEvcGhldGlvYCArXHJcbiAgICAgICAgICAgICAgICBgP25hbWU9JHtvcHRpb25zLnNpbU5hbWVcclxuICAgICAgICAgICAgICAgIH0mdmVyc2lvbk1ham9yPSR7b3B0aW9ucy5waGV0aW9PcHRpb25zLnZlcnNpb24ubWFqb3JcclxuICAgICAgICAgICAgICAgIH0mdmVyc2lvbk1pbm9yPSR7b3B0aW9ucy5waGV0aW9PcHRpb25zLnZlcnNpb24ubWlub3JcclxuICAgICAgICAgICAgICAgIH0mdmVyc2lvbk1haW50ZW5hbmNlPSR7b3B0aW9ucy5waGV0aW9PcHRpb25zLnZlcnNpb24ubWFpbnRlbmFuY2VcclxuICAgICAgICAgICAgICAgIH0mdmVyc2lvblN1ZmZpeD0ke29wdGlvbnMucGhldGlvT3B0aW9ucy5zdWZmaXhcclxuICAgICAgICAgICAgICAgIH0mYnJhbmNoPSR7b3B0aW9ucy5waGV0aW9PcHRpb25zLmJyYW5jaFxyXG4gICAgICAgICAgICAgICAgfSZhY3RpdmU9JHshb3B0aW9ucy5waGV0aW9PcHRpb25zLmlnbm9yZUZvckF1dG9tYXRlZE1haW50ZW5hbmNlUmVsZWFzZXN9YDtcclxuICAgIGxldCByZXNwb25zZTtcclxuICAgIHRyeSB7XHJcbiAgICAgIHJlc3BvbnNlID0gYXdhaXQgYXhpb3MoIHtcclxuICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBhdXRoOiB7XHJcbiAgICAgICAgICB1c2VybmFtZTogJ3Rva2VuJyxcclxuICAgICAgICAgIHBhc3N3b3JkOiBjb25zdGFudHMuQlVJTERfU0VSVkVSX0NPTkZJRy5zZXJ2ZXJUb2tlblxyXG4gICAgICAgIH1cclxuICAgICAgfSApO1xyXG4gICAgfVxyXG4gICAgY2F0Y2goIGUgKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvciggZSApO1xyXG4gICAgfVxyXG4gICAgbGV0IGVycm9yTWVzc2FnZTtcclxuXHJcbiAgICBpZiAoIHJlc3BvbnNlLnN0YXR1cyA8IDIwMCB8fCByZXNwb25zZS5zdGF0dXMgPiAyOTkgKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gcmVzcG9uc2UuZGF0YS5lcnJvcjtcclxuICAgICAgfVxyXG4gICAgICBjYXRjaCggZSApIHtcclxuICAgICAgICBlcnJvck1lc3NhZ2UgPSAncmVxdWVzdCB0byB1cHNlcnQgcGhldGlvIGRlcGxveW1lbnQgZmFpbGVkJztcclxuICAgICAgfVxyXG4gICAgICB3aW5zdG9uLmxvZyggJ2Vycm9yJywgZXJyb3JNZXNzYWdlICk7XHJcbiAgICAgIHNlbmRFbWFpbCggJ1BIRVRfSU8gREVQTE9ZTUVOVCBVUFNFUlQgRkFJTEVEJywgZXJyb3JNZXNzYWdlLCBvcHRpb25zLmVtYWlsICk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvciggJ1BIRVRfSU8gREVQTE9ZTUVOVCBVUFNFUlQgRkFJTEVEJyApO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5kYXRhO1xyXG5cclxuICAgICAgaWYgKCAhZGF0YS5zdWNjZXNzICkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBkYXRhLmVycm9yO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCggZSApIHtcclxuICAgICAgICAgIGVycm9yTWVzc2FnZSA9ICdyZXF1ZXN0IHRvIHVwc2VydCBwaGV0aW8gZGVwbG95bWVudCBmYWlsZWQnO1xyXG4gICAgICAgIH1cclxuICAgICAgICB3aW5zdG9uLmxvZyggJ2Vycm9yJywgZXJyb3JNZXNzYWdlICk7XHJcbiAgICAgICAgc2VuZEVtYWlsKCAnU1lOQ0hST05JWkUgRkFJTEVEJywgZXJyb3JNZXNzYWdlLCBvcHRpb25zLmVtYWlsICk7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCAnUEhFVF9JTyBERVBMT1lNRU5UIFVQU0VSVCBGQUlMRUQnICk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgd2luc3Rvbi5sb2coICdpbmZvJywgYHJlcXVlc3QgdG8gdXBzZXJ0IHBoZXRpbyBkZXBsb3ltZW50IGZvciAke29wdGlvbnMuc2ltTmFtZX0gb24gJHtjb25zdGFudHMuQlVJTERfU0VSVkVSX0NPTkZJRy5wcm9kdWN0aW9uU2VydmVyVVJMfSBzdWNjZWVkZWRgICk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgfVxyXG4gIGVsc2Uge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCAnQ2FsbGVkIG5vdGlmeVNlcnZlciBmb3IgdW5zdXBwb3J0ZWQgYnJhbmQnICk7XHJcbiAgfVxyXG59OyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBR0EsTUFBTUEsU0FBUyxHQUFHQyxPQUFPLENBQUUsYUFBYyxDQUFDO0FBQzFDLE1BQU1DLFNBQVMsR0FBR0QsT0FBTyxDQUFFLGFBQWMsQ0FBQztBQUMxQyxNQUFNRSxPQUFPLEdBQUdGLE9BQU8sQ0FBRSxTQUFVLENBQUM7QUFDcEMsTUFBTUcsS0FBSyxHQUFHSCxPQUFPLENBQUUsT0FBUSxDQUFDOztBQUVoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQUksTUFBTSxDQUFDQyxPQUFPLEdBQUcsZUFBZUMsWUFBWUEsQ0FBRUMsT0FBTyxFQUFHO0VBQ3RELElBQUtBLE9BQU8sQ0FBQ0MsS0FBSyxLQUFLVCxTQUFTLENBQUNVLFVBQVUsRUFBRztJQUM1QyxNQUFNQyxPQUFPLEdBQUksUUFBT0gsT0FBTyxDQUFDSSxPQUFRLEVBQUM7SUFDekMsSUFBSUMsR0FBRyxHQUFJLEdBQUViLFNBQVMsQ0FBQ2MsbUJBQW1CLENBQUNDLG1CQUFvQiw2Q0FBNENKLE9BQVEsRUFBQztJQUNwSCxJQUFLSCxPQUFPLENBQUNRLE9BQU8sSUFBSVIsT0FBTyxDQUFDUSxPQUFPLEtBQUssR0FBRyxJQUFJUixPQUFPLENBQUNRLE9BQU8sS0FBSyxJQUFJLElBQUlSLE9BQU8sQ0FBQ1EsT0FBTyxDQUFDQyxPQUFPLENBQUUsR0FBSSxDQUFDLEdBQUcsQ0FBQyxFQUFHO01BQ2xISixHQUFHLElBQUssV0FBVUwsT0FBTyxDQUFDUSxPQUFRLEVBQUM7TUFDbkMsSUFBS1IsT0FBTyxDQUFDVSxZQUFZLEVBQUc7UUFDMUJMLEdBQUcsSUFBSyxpQkFBZ0JMLE9BQU8sQ0FBQ1UsWUFBYSxFQUFDO01BQ2hEO0lBQ0Y7SUFHQSxJQUFJQyxRQUFRO0lBQ1osSUFBSTtNQUNGQSxRQUFRLEdBQUcsTUFBTWYsS0FBSyxDQUFFO1FBQ3RCUyxHQUFHLEVBQUVBLEdBQUc7UUFDUk8sSUFBSSxFQUFFO1VBQ0pDLFFBQVEsRUFBRSxPQUFPO1VBQ2pCQyxRQUFRLEVBQUV0QixTQUFTLENBQUNjLG1CQUFtQixDQUFDUztRQUMxQztNQUNGLENBQUUsQ0FBQztJQUNMLENBQUMsQ0FDRCxPQUFPQyxDQUFDLEVBQUc7TUFDVCxNQUFNLElBQUlDLEtBQUssQ0FBRUQsQ0FBRSxDQUFDO0lBQ3RCO0lBQ0EsSUFBSUUsWUFBWTtJQUVoQixJQUFLUCxRQUFRLENBQUNRLE1BQU0sSUFBSSxHQUFHLElBQUlSLFFBQVEsQ0FBQ1EsTUFBTSxJQUFJLEdBQUcsRUFBRztNQUN0RCxNQUFNQyxJQUFJLEdBQUdULFFBQVEsQ0FBQ1MsSUFBSTtNQUUxQixJQUFLLENBQUNBLElBQUksQ0FBQ0MsT0FBTyxFQUFHO1FBQ25CSCxZQUFZLEdBQUksa0NBQWlDZixPQUFRLE9BQU1YLFNBQVMsQ0FBQ2MsbUJBQW1CLENBQUNDLG1CQUFvQix5QkFBd0JhLElBQUksQ0FBQ0UsS0FBTSxFQUFDO1FBQ3JKM0IsT0FBTyxDQUFDNEIsR0FBRyxDQUFFLE9BQU8sRUFBRUwsWUFBYSxDQUFDO1FBQ3BDeEIsU0FBUyxDQUFFLG9CQUFvQixFQUFFd0IsWUFBWSxFQUFFbEIsT0FBTyxDQUFDd0IsS0FBTSxDQUFDO01BQ2hFLENBQUMsTUFDSTtRQUNIN0IsT0FBTyxDQUFDNEIsR0FBRyxDQUFFLE1BQU0sRUFBRyxrQ0FBaUNwQixPQUFRLE9BQU1YLFNBQVMsQ0FBQ2MsbUJBQW1CLENBQUNDLG1CQUFvQixZQUFZLENBQUM7TUFDdEk7SUFDRixDQUFDLE1BQ0k7TUFDSFcsWUFBWSxHQUFHLDBFQUEwRTtNQUN6RnZCLE9BQU8sQ0FBQzRCLEdBQUcsQ0FBRSxPQUFPLEVBQUVMLFlBQWEsQ0FBQztNQUNwQ3hCLFNBQVMsQ0FBRSxvQkFBb0IsRUFBRXdCLFlBQVksRUFBRWxCLE9BQU8sQ0FBQ3dCLEtBQU0sQ0FBQztJQUNoRTtFQUNGLENBQUMsTUFDSSxJQUFLeEIsT0FBTyxDQUFDQyxLQUFLLEtBQUtULFNBQVMsQ0FBQ2lDLGFBQWEsRUFBRztJQUNwRCxNQUFNcEIsR0FBRyxHQUFJLEdBQUViLFNBQVMsQ0FBQ2MsbUJBQW1CLENBQUNDLG1CQUFvQiwyQkFBMEIsR0FDOUUsU0FBUVAsT0FBTyxDQUFDSSxPQUNoQixpQkFBZ0JKLE9BQU8sQ0FBQzBCLGFBQWEsQ0FBQ0MsT0FBTyxDQUFDQyxLQUM5QyxpQkFBZ0I1QixPQUFPLENBQUMwQixhQUFhLENBQUNDLE9BQU8sQ0FBQ0UsS0FDOUMsdUJBQXNCN0IsT0FBTyxDQUFDMEIsYUFBYSxDQUFDQyxPQUFPLENBQUNHLFdBQ3BELGtCQUFpQjlCLE9BQU8sQ0FBQzBCLGFBQWEsQ0FBQ0ssTUFDdkMsV0FBVS9CLE9BQU8sQ0FBQzBCLGFBQWEsQ0FBQ00sTUFDaEMsV0FBVSxDQUFDaEMsT0FBTyxDQUFDMEIsYUFBYSxDQUFDTyxxQ0FBc0MsRUFBQztJQUNyRixJQUFJdEIsUUFBUTtJQUNaLElBQUk7TUFDRkEsUUFBUSxHQUFHLE1BQU1mLEtBQUssQ0FBRTtRQUN0QlMsR0FBRyxFQUFFQSxHQUFHO1FBQ1I2QixNQUFNLEVBQUUsTUFBTTtRQUNkdEIsSUFBSSxFQUFFO1VBQ0pDLFFBQVEsRUFBRSxPQUFPO1VBQ2pCQyxRQUFRLEVBQUV0QixTQUFTLENBQUNjLG1CQUFtQixDQUFDUztRQUMxQztNQUNGLENBQUUsQ0FBQztJQUNMLENBQUMsQ0FDRCxPQUFPQyxDQUFDLEVBQUc7TUFDVCxNQUFNLElBQUlDLEtBQUssQ0FBRUQsQ0FBRSxDQUFDO0lBQ3RCO0lBQ0EsSUFBSUUsWUFBWTtJQUVoQixJQUFLUCxRQUFRLENBQUNRLE1BQU0sR0FBRyxHQUFHLElBQUlSLFFBQVEsQ0FBQ1EsTUFBTSxHQUFHLEdBQUcsRUFBRztNQUNwRCxJQUFJO1FBQ0ZELFlBQVksR0FBR1AsUUFBUSxDQUFDUyxJQUFJLENBQUNFLEtBQUs7TUFDcEMsQ0FBQyxDQUNELE9BQU9OLENBQUMsRUFBRztRQUNURSxZQUFZLEdBQUcsNENBQTRDO01BQzdEO01BQ0F2QixPQUFPLENBQUM0QixHQUFHLENBQUUsT0FBTyxFQUFFTCxZQUFhLENBQUM7TUFDcEN4QixTQUFTLENBQUUsa0NBQWtDLEVBQUV3QixZQUFZLEVBQUVsQixPQUFPLENBQUN3QixLQUFNLENBQUM7TUFDNUUsTUFBTSxJQUFJUCxLQUFLLENBQUUsa0NBQW1DLENBQUM7SUFDdkQsQ0FBQyxNQUNJO01BQ0gsTUFBTUcsSUFBSSxHQUFHVCxRQUFRLENBQUNTLElBQUk7TUFFMUIsSUFBSyxDQUFDQSxJQUFJLENBQUNDLE9BQU8sRUFBRztRQUNuQixJQUFJO1VBQ0ZILFlBQVksR0FBR0UsSUFBSSxDQUFDRSxLQUFLO1FBQzNCLENBQUMsQ0FDRCxPQUFPTixDQUFDLEVBQUc7VUFDVEUsWUFBWSxHQUFHLDRDQUE0QztRQUM3RDtRQUNBdkIsT0FBTyxDQUFDNEIsR0FBRyxDQUFFLE9BQU8sRUFBRUwsWUFBYSxDQUFDO1FBQ3BDeEIsU0FBUyxDQUFFLG9CQUFvQixFQUFFd0IsWUFBWSxFQUFFbEIsT0FBTyxDQUFDd0IsS0FBTSxDQUFDO1FBQzlELE1BQU0sSUFBSVAsS0FBSyxDQUFFLGtDQUFtQyxDQUFDO01BQ3ZELENBQUMsTUFDSTtRQUNIdEIsT0FBTyxDQUFDNEIsR0FBRyxDQUFFLE1BQU0sRUFBRywyQ0FBMEN2QixPQUFPLENBQUNJLE9BQVEsT0FBTVosU0FBUyxDQUFDYyxtQkFBbUIsQ0FBQ0MsbUJBQW9CLFlBQVksQ0FBQztNQUN2SjtJQUNGO0VBRUYsQ0FBQyxNQUNJO0lBQ0gsTUFBTSxJQUFJVSxLQUFLLENBQUUsMkNBQTRDLENBQUM7RUFDaEU7QUFDRixDQUFDIn0=