// Copyright 2020, University of Colorado Boulder

const execute = require('../common/execute');
const gitCheckout = require('../common/gitCheckout');
const gitPull = require('../common/gitPull');
const constants = require('./constants');
const child_process = require('child_process');
const fs = require('fs');
const axios = require('axios');
const assert = require('assert');
const chipperDir = '../chipper';
const perennialAliasDir = '../perennial-alias';
const processSim = async (simulation, brands, version) => {
  const repoDir = `../${simulation}`;

  // Get master
  console.log('running `git checkout master && git pull`');
  child_process.execSync('git checkout master && git pull', {
    cwd: repoDir
  });
  console.log('finished running `git checkout master && git pull`');
  let brandsArray;
  let brandsString;
  if (brands) {
    if (brands.split) {
      brandsArray = brands.split(',');
      brandsString = brands;
    } else {
      brandsArray = brands;
      brandsString = brands.join(',');
    }
  } else {
    brandsString = 'phet';
    brandsArray = [brandsString];
  }

  // Build screenshots
  await execute('grunt', [`--brands=${brandsString}`, `--repo=${simulation}`, 'build-images'], chipperDir);

  // Copy into the document root
  for (const brand of brandsArray) {
    if (brand !== 'phet') {
      console.log(`Skipping images for unsupported brand: ${brand}`);
    } else {
      const sourceDir = `${repoDir}/build/${brand}/`;
      const targetDir = `${constants.HTML_SIMS_DIRECTORY}${simulation}/${version}/`;
      const files = fs.readdirSync(sourceDir);
      for (const file of files) {
        if (file.endsWith('png')) {
          console.log(`copying file ${file}`);
          await execute('cp', [`${sourceDir}${file}`, `${targetDir}${file}`], '.');
        }
      }
      console.log(`Done copying files for ${simulation}`);
    }
  }
};
/**
 * This task deploys all image assets from the master branch to the latest version of all published sims.
 *
 * @param options
 */
const deployImages = async options => {
  console.log(`deploying images with branch ${options.branch}, brands ${options.brands}`);
  if (options.branch) {
    assert(options.branch === 'master', 'deployImages should be run on master branch');
    await gitCheckout('chipper', options.branch);
    await gitPull('chipper');
    await execute('npm', ['prune'], chipperDir);
    await execute('npm', ['update'], chipperDir);
    await gitCheckout('perennial-alias', options.branch);
    await gitPull('perennial-alias');
    await execute('npm', ['prune'], perennialAliasDir);
    await execute('npm', ['update'], perennialAliasDir);
  }
  if (options.simulation && options.version) {
    await processSim(options.simulation, options.brands, options.version);
  } else {
    // Get all published sims
    let response;
    try {
      response = await axios('https://phet.colorado.edu/services/metadata/1.2/simulations?format=json&summary&locale=en&type=html');
    } catch (e) {
      throw new Error(e);
    }
    if (response.status < 200 || response.status > 299) {
      throw new Error(`Bad Status while fetching metadata: ${response.status}`);
    } else {
      let projects;
      try {
        projects = response.data.projects;
      } catch (e) {
        throw new Error(e);
      }

      // Use for index loop to allow async/await
      for (const project of projects) {
        for (const simulation of project.simulations) {
          await processSim(simulation.name, options.brands, project.version.string);
        }
      }
    }
  }
};
module.exports = deployImages;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleGVjdXRlIiwicmVxdWlyZSIsImdpdENoZWNrb3V0IiwiZ2l0UHVsbCIsImNvbnN0YW50cyIsImNoaWxkX3Byb2Nlc3MiLCJmcyIsImF4aW9zIiwiYXNzZXJ0IiwiY2hpcHBlckRpciIsInBlcmVubmlhbEFsaWFzRGlyIiwicHJvY2Vzc1NpbSIsInNpbXVsYXRpb24iLCJicmFuZHMiLCJ2ZXJzaW9uIiwicmVwb0RpciIsImNvbnNvbGUiLCJsb2ciLCJleGVjU3luYyIsImN3ZCIsImJyYW5kc0FycmF5IiwiYnJhbmRzU3RyaW5nIiwic3BsaXQiLCJqb2luIiwiYnJhbmQiLCJzb3VyY2VEaXIiLCJ0YXJnZXREaXIiLCJIVE1MX1NJTVNfRElSRUNUT1JZIiwiZmlsZXMiLCJyZWFkZGlyU3luYyIsImZpbGUiLCJlbmRzV2l0aCIsImRlcGxveUltYWdlcyIsIm9wdGlvbnMiLCJicmFuY2giLCJyZXNwb25zZSIsImUiLCJFcnJvciIsInN0YXR1cyIsInByb2plY3RzIiwiZGF0YSIsInByb2plY3QiLCJzaW11bGF0aW9ucyIsIm5hbWUiLCJzdHJpbmciLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiZGVwbG95SW1hZ2VzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIwLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbmNvbnN0IGV4ZWN1dGUgPSByZXF1aXJlKCAnLi4vY29tbW9uL2V4ZWN1dGUnICk7XHJcbmNvbnN0IGdpdENoZWNrb3V0ID0gcmVxdWlyZSggJy4uL2NvbW1vbi9naXRDaGVja291dCcgKTtcclxuY29uc3QgZ2l0UHVsbCA9IHJlcXVpcmUoICcuLi9jb21tb24vZ2l0UHVsbCcgKTtcclxuY29uc3QgY29uc3RhbnRzID0gcmVxdWlyZSggJy4vY29uc3RhbnRzJyApO1xyXG5jb25zdCBjaGlsZF9wcm9jZXNzID0gcmVxdWlyZSggJ2NoaWxkX3Byb2Nlc3MnICk7XHJcbmNvbnN0IGZzID0gcmVxdWlyZSggJ2ZzJyApO1xyXG5jb25zdCBheGlvcyA9IHJlcXVpcmUoICdheGlvcycgKTtcclxuY29uc3QgYXNzZXJ0ID0gcmVxdWlyZSggJ2Fzc2VydCcgKTtcclxuXHJcbmNvbnN0IGNoaXBwZXJEaXIgPSAnLi4vY2hpcHBlcic7XHJcbmNvbnN0IHBlcmVubmlhbEFsaWFzRGlyID0gJy4uL3BlcmVubmlhbC1hbGlhcyc7XHJcblxyXG5jb25zdCBwcm9jZXNzU2ltID0gYXN5bmMgKCBzaW11bGF0aW9uLCBicmFuZHMsIHZlcnNpb24gKSA9PiB7XHJcblxyXG4gIGNvbnN0IHJlcG9EaXIgPSBgLi4vJHtzaW11bGF0aW9ufWA7XHJcblxyXG4gIC8vIEdldCBtYXN0ZXJcclxuICBjb25zb2xlLmxvZyggJ3J1bm5pbmcgYGdpdCBjaGVja291dCBtYXN0ZXIgJiYgZ2l0IHB1bGxgJyApO1xyXG4gIGNoaWxkX3Byb2Nlc3MuZXhlY1N5bmMoICdnaXQgY2hlY2tvdXQgbWFzdGVyICYmIGdpdCBwdWxsJywgeyBjd2Q6IHJlcG9EaXIgfSApO1xyXG4gIGNvbnNvbGUubG9nKCAnZmluaXNoZWQgcnVubmluZyBgZ2l0IGNoZWNrb3V0IG1hc3RlciAmJiBnaXQgcHVsbGAnICk7XHJcblxyXG4gIGxldCBicmFuZHNBcnJheTtcclxuICBsZXQgYnJhbmRzU3RyaW5nO1xyXG4gIGlmICggYnJhbmRzICkge1xyXG4gICAgaWYgKCBicmFuZHMuc3BsaXQgKSB7XHJcbiAgICAgIGJyYW5kc0FycmF5ID0gYnJhbmRzLnNwbGl0KCAnLCcgKTtcclxuICAgICAgYnJhbmRzU3RyaW5nID0gYnJhbmRzO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGJyYW5kc0FycmF5ID0gYnJhbmRzO1xyXG4gICAgICBicmFuZHNTdHJpbmcgPSBicmFuZHMuam9pbiggJywnICk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGVsc2Uge1xyXG4gICAgYnJhbmRzU3RyaW5nID0gJ3BoZXQnO1xyXG4gICAgYnJhbmRzQXJyYXkgPSBbIGJyYW5kc1N0cmluZyBdO1xyXG4gIH1cclxuXHJcbiAgLy8gQnVpbGQgc2NyZWVuc2hvdHNcclxuICBhd2FpdCBleGVjdXRlKCAnZ3J1bnQnLCBbIGAtLWJyYW5kcz0ke2JyYW5kc1N0cmluZ31gLCBgLS1yZXBvPSR7c2ltdWxhdGlvbn1gLCAnYnVpbGQtaW1hZ2VzJyBdLCBjaGlwcGVyRGlyICk7XHJcblxyXG4gIC8vIENvcHkgaW50byB0aGUgZG9jdW1lbnQgcm9vdFxyXG4gIGZvciAoIGNvbnN0IGJyYW5kIG9mIGJyYW5kc0FycmF5ICkge1xyXG4gICAgaWYgKCBicmFuZCAhPT0gJ3BoZXQnICkge1xyXG4gICAgICBjb25zb2xlLmxvZyggYFNraXBwaW5nIGltYWdlcyBmb3IgdW5zdXBwb3J0ZWQgYnJhbmQ6ICR7YnJhbmR9YCApO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGNvbnN0IHNvdXJjZURpciA9IGAke3JlcG9EaXJ9L2J1aWxkLyR7YnJhbmR9L2A7XHJcbiAgICAgIGNvbnN0IHRhcmdldERpciA9IGAke2NvbnN0YW50cy5IVE1MX1NJTVNfRElSRUNUT1JZfSR7c2ltdWxhdGlvbn0vJHt2ZXJzaW9ufS9gO1xyXG4gICAgICBjb25zdCBmaWxlcyA9IGZzLnJlYWRkaXJTeW5jKCBzb3VyY2VEaXIgKTtcclxuICAgICAgZm9yICggY29uc3QgZmlsZSBvZiBmaWxlcyApIHtcclxuICAgICAgICBpZiAoIGZpbGUuZW5kc1dpdGgoICdwbmcnICkgKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyggYGNvcHlpbmcgZmlsZSAke2ZpbGV9YCApO1xyXG4gICAgICAgICAgYXdhaXQgZXhlY3V0ZSggJ2NwJywgWyBgJHtzb3VyY2VEaXJ9JHtmaWxlfWAsIGAke3RhcmdldERpcn0ke2ZpbGV9YCBdLCAnLicgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKCBgRG9uZSBjb3B5aW5nIGZpbGVzIGZvciAke3NpbXVsYXRpb259YCApO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuLyoqXHJcbiAqIFRoaXMgdGFzayBkZXBsb3lzIGFsbCBpbWFnZSBhc3NldHMgZnJvbSB0aGUgbWFzdGVyIGJyYW5jaCB0byB0aGUgbGF0ZXN0IHZlcnNpb24gb2YgYWxsIHB1Ymxpc2hlZCBzaW1zLlxyXG4gKlxyXG4gKiBAcGFyYW0gb3B0aW9uc1xyXG4gKi9cclxuY29uc3QgZGVwbG95SW1hZ2VzID0gYXN5bmMgb3B0aW9ucyA9PiB7XHJcbiAgY29uc29sZS5sb2coIGBkZXBsb3lpbmcgaW1hZ2VzIHdpdGggYnJhbmNoICR7b3B0aW9ucy5icmFuY2h9LCBicmFuZHMgJHtvcHRpb25zLmJyYW5kc31gICk7XHJcbiAgaWYgKCBvcHRpb25zLmJyYW5jaCApIHtcclxuICAgIGFzc2VydCggb3B0aW9ucy5icmFuY2ggPT09ICdtYXN0ZXInLCAnZGVwbG95SW1hZ2VzIHNob3VsZCBiZSBydW4gb24gbWFzdGVyIGJyYW5jaCcgKTtcclxuICAgIGF3YWl0IGdpdENoZWNrb3V0KCAnY2hpcHBlcicsIG9wdGlvbnMuYnJhbmNoICk7XHJcbiAgICBhd2FpdCBnaXRQdWxsKCAnY2hpcHBlcicgKTtcclxuICAgIGF3YWl0IGV4ZWN1dGUoICducG0nLCBbICdwcnVuZScgXSwgY2hpcHBlckRpciApO1xyXG4gICAgYXdhaXQgZXhlY3V0ZSggJ25wbScsIFsgJ3VwZGF0ZScgXSwgY2hpcHBlckRpciApO1xyXG5cclxuICAgIGF3YWl0IGdpdENoZWNrb3V0KCAncGVyZW5uaWFsLWFsaWFzJywgb3B0aW9ucy5icmFuY2ggKTtcclxuICAgIGF3YWl0IGdpdFB1bGwoICdwZXJlbm5pYWwtYWxpYXMnICk7XHJcbiAgICBhd2FpdCBleGVjdXRlKCAnbnBtJywgWyAncHJ1bmUnIF0sIHBlcmVubmlhbEFsaWFzRGlyICk7XHJcbiAgICBhd2FpdCBleGVjdXRlKCAnbnBtJywgWyAndXBkYXRlJyBdLCBwZXJlbm5pYWxBbGlhc0RpciApO1xyXG4gIH1cclxuXHJcbiAgaWYgKCBvcHRpb25zLnNpbXVsYXRpb24gJiYgb3B0aW9ucy52ZXJzaW9uICkge1xyXG4gICAgYXdhaXQgcHJvY2Vzc1NpbSggb3B0aW9ucy5zaW11bGF0aW9uLCBvcHRpb25zLmJyYW5kcywgb3B0aW9ucy52ZXJzaW9uICk7XHJcbiAgfVxyXG4gIGVsc2Uge1xyXG5cclxuICAgIC8vIEdldCBhbGwgcHVibGlzaGVkIHNpbXNcclxuICAgIGxldCByZXNwb25zZTtcclxuICAgIHRyeSB7XHJcbiAgICAgIHJlc3BvbnNlID0gYXdhaXQgYXhpb3MoICdodHRwczovL3BoZXQuY29sb3JhZG8uZWR1L3NlcnZpY2VzL21ldGFkYXRhLzEuMi9zaW11bGF0aW9ucz9mb3JtYXQ9anNvbiZzdW1tYXJ5JmxvY2FsZT1lbiZ0eXBlPWh0bWwnICk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCggZSApIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCBlICk7XHJcbiAgICB9XHJcbiAgICBpZiAoIHJlc3BvbnNlLnN0YXR1cyA8IDIwMCB8fCByZXNwb25zZS5zdGF0dXMgPiAyOTkgKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvciggYEJhZCBTdGF0dXMgd2hpbGUgZmV0Y2hpbmcgbWV0YWRhdGE6ICR7cmVzcG9uc2Uuc3RhdHVzfWAgKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBsZXQgcHJvamVjdHM7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgcHJvamVjdHMgPSByZXNwb25zZS5kYXRhLnByb2plY3RzO1xyXG4gICAgICB9XHJcbiAgICAgIGNhdGNoKCBlICkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvciggZSApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBVc2UgZm9yIGluZGV4IGxvb3AgdG8gYWxsb3cgYXN5bmMvYXdhaXRcclxuICAgICAgZm9yICggY29uc3QgcHJvamVjdCBvZiBwcm9qZWN0cyApIHtcclxuICAgICAgICBmb3IgKCBjb25zdCBzaW11bGF0aW9uIG9mIHByb2plY3Quc2ltdWxhdGlvbnMgKSB7XHJcbiAgICAgICAgICBhd2FpdCBwcm9jZXNzU2ltKCBzaW11bGF0aW9uLm5hbWUsIG9wdGlvbnMuYnJhbmRzLCBwcm9qZWN0LnZlcnNpb24uc3RyaW5nICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBkZXBsb3lJbWFnZXM7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUUsbUJBQW9CLENBQUM7QUFDOUMsTUFBTUMsV0FBVyxHQUFHRCxPQUFPLENBQUUsdUJBQXdCLENBQUM7QUFDdEQsTUFBTUUsT0FBTyxHQUFHRixPQUFPLENBQUUsbUJBQW9CLENBQUM7QUFDOUMsTUFBTUcsU0FBUyxHQUFHSCxPQUFPLENBQUUsYUFBYyxDQUFDO0FBQzFDLE1BQU1JLGFBQWEsR0FBR0osT0FBTyxDQUFFLGVBQWdCLENBQUM7QUFDaEQsTUFBTUssRUFBRSxHQUFHTCxPQUFPLENBQUUsSUFBSyxDQUFDO0FBQzFCLE1BQU1NLEtBQUssR0FBR04sT0FBTyxDQUFFLE9BQVEsQ0FBQztBQUNoQyxNQUFNTyxNQUFNLEdBQUdQLE9BQU8sQ0FBRSxRQUFTLENBQUM7QUFFbEMsTUFBTVEsVUFBVSxHQUFHLFlBQVk7QUFDL0IsTUFBTUMsaUJBQWlCLEdBQUcsb0JBQW9CO0FBRTlDLE1BQU1DLFVBQVUsR0FBRyxNQUFBQSxDQUFRQyxVQUFVLEVBQUVDLE1BQU0sRUFBRUMsT0FBTyxLQUFNO0VBRTFELE1BQU1DLE9BQU8sR0FBSSxNQUFLSCxVQUFXLEVBQUM7O0VBRWxDO0VBQ0FJLE9BQU8sQ0FBQ0MsR0FBRyxDQUFFLDJDQUE0QyxDQUFDO0VBQzFEWixhQUFhLENBQUNhLFFBQVEsQ0FBRSxpQ0FBaUMsRUFBRTtJQUFFQyxHQUFHLEVBQUVKO0VBQVEsQ0FBRSxDQUFDO0VBQzdFQyxPQUFPLENBQUNDLEdBQUcsQ0FBRSxvREFBcUQsQ0FBQztFQUVuRSxJQUFJRyxXQUFXO0VBQ2YsSUFBSUMsWUFBWTtFQUNoQixJQUFLUixNQUFNLEVBQUc7SUFDWixJQUFLQSxNQUFNLENBQUNTLEtBQUssRUFBRztNQUNsQkYsV0FBVyxHQUFHUCxNQUFNLENBQUNTLEtBQUssQ0FBRSxHQUFJLENBQUM7TUFDakNELFlBQVksR0FBR1IsTUFBTTtJQUN2QixDQUFDLE1BQ0k7TUFDSE8sV0FBVyxHQUFHUCxNQUFNO01BQ3BCUSxZQUFZLEdBQUdSLE1BQU0sQ0FBQ1UsSUFBSSxDQUFFLEdBQUksQ0FBQztJQUNuQztFQUNGLENBQUMsTUFDSTtJQUNIRixZQUFZLEdBQUcsTUFBTTtJQUNyQkQsV0FBVyxHQUFHLENBQUVDLFlBQVksQ0FBRTtFQUNoQzs7RUFFQTtFQUNBLE1BQU1yQixPQUFPLENBQUUsT0FBTyxFQUFFLENBQUcsWUFBV3FCLFlBQWEsRUFBQyxFQUFHLFVBQVNULFVBQVcsRUFBQyxFQUFFLGNBQWMsQ0FBRSxFQUFFSCxVQUFXLENBQUM7O0VBRTVHO0VBQ0EsS0FBTSxNQUFNZSxLQUFLLElBQUlKLFdBQVcsRUFBRztJQUNqQyxJQUFLSSxLQUFLLEtBQUssTUFBTSxFQUFHO01BQ3RCUixPQUFPLENBQUNDLEdBQUcsQ0FBRywwQ0FBeUNPLEtBQU0sRUFBRSxDQUFDO0lBQ2xFLENBQUMsTUFDSTtNQUNILE1BQU1DLFNBQVMsR0FBSSxHQUFFVixPQUFRLFVBQVNTLEtBQU0sR0FBRTtNQUM5QyxNQUFNRSxTQUFTLEdBQUksR0FBRXRCLFNBQVMsQ0FBQ3VCLG1CQUFvQixHQUFFZixVQUFXLElBQUdFLE9BQVEsR0FBRTtNQUM3RSxNQUFNYyxLQUFLLEdBQUd0QixFQUFFLENBQUN1QixXQUFXLENBQUVKLFNBQVUsQ0FBQztNQUN6QyxLQUFNLE1BQU1LLElBQUksSUFBSUYsS0FBSyxFQUFHO1FBQzFCLElBQUtFLElBQUksQ0FBQ0MsUUFBUSxDQUFFLEtBQU0sQ0FBQyxFQUFHO1VBQzVCZixPQUFPLENBQUNDLEdBQUcsQ0FBRyxnQkFBZWEsSUFBSyxFQUFFLENBQUM7VUFDckMsTUFBTTlCLE9BQU8sQ0FBRSxJQUFJLEVBQUUsQ0FBRyxHQUFFeUIsU0FBVSxHQUFFSyxJQUFLLEVBQUMsRUFBRyxHQUFFSixTQUFVLEdBQUVJLElBQUssRUFBQyxDQUFFLEVBQUUsR0FBSSxDQUFDO1FBQzlFO01BQ0Y7TUFFQWQsT0FBTyxDQUFDQyxHQUFHLENBQUcsMEJBQXlCTCxVQUFXLEVBQUUsQ0FBQztJQUN2RDtFQUNGO0FBQ0YsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNb0IsWUFBWSxHQUFHLE1BQU1DLE9BQU8sSUFBSTtFQUNwQ2pCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFHLGdDQUErQmdCLE9BQU8sQ0FBQ0MsTUFBTyxZQUFXRCxPQUFPLENBQUNwQixNQUFPLEVBQUUsQ0FBQztFQUN6RixJQUFLb0IsT0FBTyxDQUFDQyxNQUFNLEVBQUc7SUFDcEIxQixNQUFNLENBQUV5QixPQUFPLENBQUNDLE1BQU0sS0FBSyxRQUFRLEVBQUUsNkNBQThDLENBQUM7SUFDcEYsTUFBTWhDLFdBQVcsQ0FBRSxTQUFTLEVBQUUrQixPQUFPLENBQUNDLE1BQU8sQ0FBQztJQUM5QyxNQUFNL0IsT0FBTyxDQUFFLFNBQVUsQ0FBQztJQUMxQixNQUFNSCxPQUFPLENBQUUsS0FBSyxFQUFFLENBQUUsT0FBTyxDQUFFLEVBQUVTLFVBQVcsQ0FBQztJQUMvQyxNQUFNVCxPQUFPLENBQUUsS0FBSyxFQUFFLENBQUUsUUFBUSxDQUFFLEVBQUVTLFVBQVcsQ0FBQztJQUVoRCxNQUFNUCxXQUFXLENBQUUsaUJBQWlCLEVBQUUrQixPQUFPLENBQUNDLE1BQU8sQ0FBQztJQUN0RCxNQUFNL0IsT0FBTyxDQUFFLGlCQUFrQixDQUFDO0lBQ2xDLE1BQU1ILE9BQU8sQ0FBRSxLQUFLLEVBQUUsQ0FBRSxPQUFPLENBQUUsRUFBRVUsaUJBQWtCLENBQUM7SUFDdEQsTUFBTVYsT0FBTyxDQUFFLEtBQUssRUFBRSxDQUFFLFFBQVEsQ0FBRSxFQUFFVSxpQkFBa0IsQ0FBQztFQUN6RDtFQUVBLElBQUt1QixPQUFPLENBQUNyQixVQUFVLElBQUlxQixPQUFPLENBQUNuQixPQUFPLEVBQUc7SUFDM0MsTUFBTUgsVUFBVSxDQUFFc0IsT0FBTyxDQUFDckIsVUFBVSxFQUFFcUIsT0FBTyxDQUFDcEIsTUFBTSxFQUFFb0IsT0FBTyxDQUFDbkIsT0FBUSxDQUFDO0VBQ3pFLENBQUMsTUFDSTtJQUVIO0lBQ0EsSUFBSXFCLFFBQVE7SUFDWixJQUFJO01BQ0ZBLFFBQVEsR0FBRyxNQUFNNUIsS0FBSyxDQUFFLHFHQUFzRyxDQUFDO0lBQ2pJLENBQUMsQ0FDRCxPQUFPNkIsQ0FBQyxFQUFHO01BQ1QsTUFBTSxJQUFJQyxLQUFLLENBQUVELENBQUUsQ0FBQztJQUN0QjtJQUNBLElBQUtELFFBQVEsQ0FBQ0csTUFBTSxHQUFHLEdBQUcsSUFBSUgsUUFBUSxDQUFDRyxNQUFNLEdBQUcsR0FBRyxFQUFHO01BQ3BELE1BQU0sSUFBSUQsS0FBSyxDQUFHLHVDQUFzQ0YsUUFBUSxDQUFDRyxNQUFPLEVBQUUsQ0FBQztJQUM3RSxDQUFDLE1BQ0k7TUFDSCxJQUFJQyxRQUFRO01BQ1osSUFBSTtRQUNGQSxRQUFRLEdBQUdKLFFBQVEsQ0FBQ0ssSUFBSSxDQUFDRCxRQUFRO01BQ25DLENBQUMsQ0FDRCxPQUFPSCxDQUFDLEVBQUc7UUFDVCxNQUFNLElBQUlDLEtBQUssQ0FBRUQsQ0FBRSxDQUFDO01BQ3RCOztNQUVBO01BQ0EsS0FBTSxNQUFNSyxPQUFPLElBQUlGLFFBQVEsRUFBRztRQUNoQyxLQUFNLE1BQU0zQixVQUFVLElBQUk2QixPQUFPLENBQUNDLFdBQVcsRUFBRztVQUM5QyxNQUFNL0IsVUFBVSxDQUFFQyxVQUFVLENBQUMrQixJQUFJLEVBQUVWLE9BQU8sQ0FBQ3BCLE1BQU0sRUFBRTRCLE9BQU8sQ0FBQzNCLE9BQU8sQ0FBQzhCLE1BQU8sQ0FBQztRQUM3RTtNQUNGO0lBQ0Y7RUFDRjtBQUNGLENBQUM7QUFFREMsTUFBTSxDQUFDQyxPQUFPLEdBQUdkLFlBQVkifQ==