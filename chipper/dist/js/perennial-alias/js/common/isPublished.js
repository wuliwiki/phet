// Copyright 2022, University of Colorado Boulder

/**
 * Returns whether a repo is published (not a prototype)
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

const gitCheckout = require('./gitCheckout');
const fs = require('fs');

/**
 * Returns whether a repo is published (not a prototype)
 * @public
 *
 * NOTE: Needs to be on master branch
 *
 * @param {string} repo
 *
 * @returns {Promise<boolean>}
 */
module.exports = async function (repo) {
  await gitCheckout(repo, 'master');
  const packageObject = JSON.parse(fs.readFileSync(`../${repo}/package.json`, 'utf8'));
  return !!packageObject?.phet?.published;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnaXRDaGVja291dCIsInJlcXVpcmUiLCJmcyIsIm1vZHVsZSIsImV4cG9ydHMiLCJyZXBvIiwicGFja2FnZU9iamVjdCIsIkpTT04iLCJwYXJzZSIsInJlYWRGaWxlU3luYyIsInBoZXQiLCJwdWJsaXNoZWQiXSwic291cmNlcyI6WyJpc1B1Ymxpc2hlZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogUmV0dXJucyB3aGV0aGVyIGEgcmVwbyBpcyBwdWJsaXNoZWQgKG5vdCBhIHByb3RvdHlwZSlcclxuICpcclxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxyXG4gKi9cclxuXHJcbmNvbnN0IGdpdENoZWNrb3V0ID0gcmVxdWlyZSggJy4vZ2l0Q2hlY2tvdXQnICk7XHJcbmNvbnN0IGZzID0gcmVxdWlyZSggJ2ZzJyApO1xyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgd2hldGhlciBhIHJlcG8gaXMgcHVibGlzaGVkIChub3QgYSBwcm90b3R5cGUpXHJcbiAqIEBwdWJsaWNcclxuICpcclxuICogTk9URTogTmVlZHMgdG8gYmUgb24gbWFzdGVyIGJyYW5jaFxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVwb1xyXG4gKlxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn1cclxuICovXHJcbm1vZHVsZS5leHBvcnRzID0gYXN5bmMgZnVuY3Rpb24oIHJlcG8gKSB7XHJcbiAgYXdhaXQgZ2l0Q2hlY2tvdXQoIHJlcG8sICdtYXN0ZXInICk7XHJcbiAgY29uc3QgcGFja2FnZU9iamVjdCA9IEpTT04ucGFyc2UoIGZzLnJlYWRGaWxlU3luYyggYC4uLyR7cmVwb30vcGFja2FnZS5qc29uYCwgJ3V0ZjgnICkgKTtcclxuXHJcbiAgcmV0dXJuICEhcGFja2FnZU9iamVjdD8ucGhldD8ucHVibGlzaGVkO1xyXG59O1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTUEsV0FBVyxHQUFHQyxPQUFPLENBQUUsZUFBZ0IsQ0FBQztBQUM5QyxNQUFNQyxFQUFFLEdBQUdELE9BQU8sQ0FBRSxJQUFLLENBQUM7O0FBRTFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0FFLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLGdCQUFnQkMsSUFBSSxFQUFHO0VBQ3RDLE1BQU1MLFdBQVcsQ0FBRUssSUFBSSxFQUFFLFFBQVMsQ0FBQztFQUNuQyxNQUFNQyxhQUFhLEdBQUdDLElBQUksQ0FBQ0MsS0FBSyxDQUFFTixFQUFFLENBQUNPLFlBQVksQ0FBRyxNQUFLSixJQUFLLGVBQWMsRUFBRSxNQUFPLENBQUUsQ0FBQztFQUV4RixPQUFPLENBQUMsQ0FBQ0MsYUFBYSxFQUFFSSxJQUFJLEVBQUVDLFNBQVM7QUFDekMsQ0FBQyJ9