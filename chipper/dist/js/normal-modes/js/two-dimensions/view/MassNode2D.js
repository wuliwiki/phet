// Copyright 2020-2022, University of Colorado Boulder

/**
 * Subclass of MassNode. It adds its drag listener and a circle. It also rotates the arrows created in MassNode.
 *
 * @author Thiago de MendonÃ§a Mildemberger (UTFPR)
 * @author Franco Barpp Gomes (UTFPR)
 */

import Property from '../../../../axon/js/Property.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import merge from '../../../../phet-core/js/merge.js';
import { Circle, DragListener } from '../../../../scenery/js/imports.js';
import NormalModesColors from '../../common/NormalModesColors.js';
import MassNode from '../../common/view/MassNode.js';
import normalModes from '../../normalModes.js';
class MassNode2D extends MassNode {
  /**
   * @param {Mass} mass
   * @param {ModelViewTransform2} modelViewTransform
   * @param {TwoDimensionsModel} model
   * @param {Bounds2} dragBounds
   * @param {Tandem} tandem
   */
  constructor(mass, modelViewTransform, model, dragBounds, tandem) {
    super(mass, modelViewTransform, tandem);
    const circle = new Circle(merge({
      radius: this.size / 2,
      boundsMethod: 'unstroked',
      lineWidth: 4
    }, NormalModesColors.MASS_COLORS));
    this.addChild(circle);
    const rotationPoint = new Vector2(0, 0);
    for (const arrow in this.arrows) {
      this.arrows[arrow].rotateAround(rotationPoint, Math.PI / 4);
    }
    const startCallback = (event, listener) => {
      model.draggingMassIndexesProperty.set(model.getMassIndexes(mass));
    };
    const dragCallback = (event, listener) => {
      model.arrowsVisibleProperty.set(false);
      mass.displacementProperty.set(listener.modelPoint.minus(mass.equilibriumPositionProperty.get()));
    };
    const endCallback = (event, listener) => {
      !dragListener.interrupted && model.draggingMassIndexesProperty.set(null);
      model.computeModeAmplitudesAndPhases();
    };
    const overUpCallback = isOver => {
      this.arrows.top.visible = isOver;
      this.arrows.bottom.visible = isOver;
      this.arrows.left.visible = isOver;
      this.arrows.right.visible = isOver;
    };
    const dragListener = new DragListener({
      applyOffset: true,
      start: startCallback,
      drag: dragCallback,
      end: endCallback,
      transform: modelViewTransform,
      dragBoundsProperty: new Property(dragBounds)
    });
    this.addInputListener(dragListener);
    const callback = overUpCallback.bind(this);
    // unlink is unnecessary, the MassNode2D and the dependency exists for the lifetime of the sim
    model.arrowsVisibleProperty.link(arrowsVisible => {
      if (arrowsVisible) {
        // unlink is needed when the arrows become invisible
        dragListener.isOverProperty.link(callback);
      } else {
        this.arrows.top.visible = false;
        this.arrows.bottom.visible = false;
        this.arrows.left.visible = false;
        this.arrows.right.visible = false;
        if (dragListener.isOverProperty.hasListener(callback)) {
          dragListener.isOverProperty.unlink(callback);
        }
      }
    });

    //TODO https://github.com/phetsims/normal-modes/issues/78, workaround for lack of multitouch support
    // If the mass associated with this Node is not the one being dragged, then cancel any drag related
    // to this Node that may be in progress.
    model.draggingMassIndexesProperty.link(draggingMassIndexes => {
      if (draggingMassIndexes) {
        const massIndexes = model.getMassIndexes(mass); // {i:number, j:number}
        if (!(draggingMassIndexes.i === massIndexes.i && draggingMassIndexes.j === massIndexes.j)) {
          this.interruptSubtreeInput();
        }
      }
    });
  }
}
normalModes.register('MassNode2D', MassNode2D);
export default MassNode2D;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQcm9wZXJ0eSIsIlZlY3RvcjIiLCJtZXJnZSIsIkNpcmNsZSIsIkRyYWdMaXN0ZW5lciIsIk5vcm1hbE1vZGVzQ29sb3JzIiwiTWFzc05vZGUiLCJub3JtYWxNb2RlcyIsIk1hc3NOb2RlMkQiLCJjb25zdHJ1Y3RvciIsIm1hc3MiLCJtb2RlbFZpZXdUcmFuc2Zvcm0iLCJtb2RlbCIsImRyYWdCb3VuZHMiLCJ0YW5kZW0iLCJjaXJjbGUiLCJyYWRpdXMiLCJzaXplIiwiYm91bmRzTWV0aG9kIiwibGluZVdpZHRoIiwiTUFTU19DT0xPUlMiLCJhZGRDaGlsZCIsInJvdGF0aW9uUG9pbnQiLCJhcnJvdyIsImFycm93cyIsInJvdGF0ZUFyb3VuZCIsIk1hdGgiLCJQSSIsInN0YXJ0Q2FsbGJhY2siLCJldmVudCIsImxpc3RlbmVyIiwiZHJhZ2dpbmdNYXNzSW5kZXhlc1Byb3BlcnR5Iiwic2V0IiwiZ2V0TWFzc0luZGV4ZXMiLCJkcmFnQ2FsbGJhY2siLCJhcnJvd3NWaXNpYmxlUHJvcGVydHkiLCJkaXNwbGFjZW1lbnRQcm9wZXJ0eSIsIm1vZGVsUG9pbnQiLCJtaW51cyIsImVxdWlsaWJyaXVtUG9zaXRpb25Qcm9wZXJ0eSIsImdldCIsImVuZENhbGxiYWNrIiwiZHJhZ0xpc3RlbmVyIiwiaW50ZXJydXB0ZWQiLCJjb21wdXRlTW9kZUFtcGxpdHVkZXNBbmRQaGFzZXMiLCJvdmVyVXBDYWxsYmFjayIsImlzT3ZlciIsInRvcCIsInZpc2libGUiLCJib3R0b20iLCJsZWZ0IiwicmlnaHQiLCJhcHBseU9mZnNldCIsInN0YXJ0IiwiZHJhZyIsImVuZCIsInRyYW5zZm9ybSIsImRyYWdCb3VuZHNQcm9wZXJ0eSIsImFkZElucHV0TGlzdGVuZXIiLCJjYWxsYmFjayIsImJpbmQiLCJsaW5rIiwiYXJyb3dzVmlzaWJsZSIsImlzT3ZlclByb3BlcnR5IiwiaGFzTGlzdGVuZXIiLCJ1bmxpbmsiLCJkcmFnZ2luZ01hc3NJbmRleGVzIiwibWFzc0luZGV4ZXMiLCJpIiwiaiIsImludGVycnVwdFN1YnRyZWVJbnB1dCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiTWFzc05vZGUyRC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMC0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBTdWJjbGFzcyBvZiBNYXNzTm9kZS4gSXQgYWRkcyBpdHMgZHJhZyBsaXN0ZW5lciBhbmQgYSBjaXJjbGUuIEl0IGFsc28gcm90YXRlcyB0aGUgYXJyb3dzIGNyZWF0ZWQgaW4gTWFzc05vZGUuXHJcbiAqXHJcbiAqIEBhdXRob3IgVGhpYWdvIGRlIE1lbmRvbsOnYSBNaWxkZW1iZXJnZXIgKFVURlBSKVxyXG4gKiBAYXV0aG9yIEZyYW5jbyBCYXJwcCBHb21lcyAoVVRGUFIpXHJcbiAqL1xyXG5cclxuaW1wb3J0IFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVmVjdG9yMi5qcyc7XHJcbmltcG9ydCBtZXJnZSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvbWVyZ2UuanMnO1xyXG5pbXBvcnQgeyBDaXJjbGUsIERyYWdMaXN0ZW5lciB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBOb3JtYWxNb2Rlc0NvbG9ycyBmcm9tICcuLi8uLi9jb21tb24vTm9ybWFsTW9kZXNDb2xvcnMuanMnO1xyXG5pbXBvcnQgTWFzc05vZGUgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvTWFzc05vZGUuanMnO1xyXG5pbXBvcnQgbm9ybWFsTW9kZXMgZnJvbSAnLi4vLi4vbm9ybWFsTW9kZXMuanMnO1xyXG5cclxuY2xhc3MgTWFzc05vZGUyRCBleHRlbmRzIE1hc3NOb2RlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtNYXNzfSBtYXNzXHJcbiAgICogQHBhcmFtIHtNb2RlbFZpZXdUcmFuc2Zvcm0yfSBtb2RlbFZpZXdUcmFuc2Zvcm1cclxuICAgKiBAcGFyYW0ge1R3b0RpbWVuc2lvbnNNb2RlbH0gbW9kZWxcclxuICAgKiBAcGFyYW0ge0JvdW5kczJ9IGRyYWdCb3VuZHNcclxuICAgKiBAcGFyYW0ge1RhbmRlbX0gdGFuZGVtXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIG1hc3MsIG1vZGVsVmlld1RyYW5zZm9ybSwgbW9kZWwsIGRyYWdCb3VuZHMsIHRhbmRlbSApIHtcclxuXHJcbiAgICBzdXBlciggbWFzcywgbW9kZWxWaWV3VHJhbnNmb3JtLCB0YW5kZW0gKTtcclxuXHJcbiAgICBjb25zdCBjaXJjbGUgPSBuZXcgQ2lyY2xlKCBtZXJnZSgge1xyXG4gICAgICByYWRpdXM6IHRoaXMuc2l6ZSAvIDIsXHJcbiAgICAgIGJvdW5kc01ldGhvZDogJ3Vuc3Ryb2tlZCcsXHJcbiAgICAgIGxpbmVXaWR0aDogNFxyXG4gICAgfSwgTm9ybWFsTW9kZXNDb2xvcnMuTUFTU19DT0xPUlMgKSApO1xyXG5cclxuICAgIHRoaXMuYWRkQ2hpbGQoIGNpcmNsZSApO1xyXG5cclxuICAgIGNvbnN0IHJvdGF0aW9uUG9pbnQgPSBuZXcgVmVjdG9yMiggMCwgMCApO1xyXG4gICAgZm9yICggY29uc3QgYXJyb3cgaW4gdGhpcy5hcnJvd3MgKSB7XHJcbiAgICAgIHRoaXMuYXJyb3dzWyBhcnJvdyBdLnJvdGF0ZUFyb3VuZCggcm90YXRpb25Qb2ludCwgTWF0aC5QSSAvIDQgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzdGFydENhbGxiYWNrID0gKCBldmVudCwgbGlzdGVuZXIgKSA9PiB7XHJcbiAgICAgIG1vZGVsLmRyYWdnaW5nTWFzc0luZGV4ZXNQcm9wZXJ0eS5zZXQoIG1vZGVsLmdldE1hc3NJbmRleGVzKCBtYXNzICkgKTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgZHJhZ0NhbGxiYWNrID0gKCBldmVudCwgbGlzdGVuZXIgKSA9PiB7XHJcbiAgICAgIG1vZGVsLmFycm93c1Zpc2libGVQcm9wZXJ0eS5zZXQoIGZhbHNlICk7XHJcbiAgICAgIG1hc3MuZGlzcGxhY2VtZW50UHJvcGVydHkuc2V0KCBsaXN0ZW5lci5tb2RlbFBvaW50Lm1pbnVzKCBtYXNzLmVxdWlsaWJyaXVtUG9zaXRpb25Qcm9wZXJ0eS5nZXQoKSApICk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGVuZENhbGxiYWNrID0gKCBldmVudCwgbGlzdGVuZXIgKSA9PiB7XHJcbiAgICAgICFkcmFnTGlzdGVuZXIuaW50ZXJydXB0ZWQgJiYgbW9kZWwuZHJhZ2dpbmdNYXNzSW5kZXhlc1Byb3BlcnR5LnNldCggbnVsbCApO1xyXG4gICAgICBtb2RlbC5jb21wdXRlTW9kZUFtcGxpdHVkZXNBbmRQaGFzZXMoKTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3Qgb3ZlclVwQ2FsbGJhY2sgPSBpc092ZXIgPT4ge1xyXG4gICAgICB0aGlzLmFycm93cy50b3AudmlzaWJsZSA9IGlzT3ZlcjtcclxuICAgICAgdGhpcy5hcnJvd3MuYm90dG9tLnZpc2libGUgPSBpc092ZXI7XHJcbiAgICAgIHRoaXMuYXJyb3dzLmxlZnQudmlzaWJsZSA9IGlzT3ZlcjtcclxuICAgICAgdGhpcy5hcnJvd3MucmlnaHQudmlzaWJsZSA9IGlzT3ZlcjtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgZHJhZ0xpc3RlbmVyID0gbmV3IERyYWdMaXN0ZW5lcigge1xyXG4gICAgICBhcHBseU9mZnNldDogdHJ1ZSxcclxuICAgICAgc3RhcnQ6IHN0YXJ0Q2FsbGJhY2ssXHJcbiAgICAgIGRyYWc6IGRyYWdDYWxsYmFjayxcclxuICAgICAgZW5kOiBlbmRDYWxsYmFjayxcclxuICAgICAgdHJhbnNmb3JtOiBtb2RlbFZpZXdUcmFuc2Zvcm0sXHJcbiAgICAgIGRyYWdCb3VuZHNQcm9wZXJ0eTogbmV3IFByb3BlcnR5KCBkcmFnQm91bmRzIClcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkSW5wdXRMaXN0ZW5lciggZHJhZ0xpc3RlbmVyICk7XHJcblxyXG4gICAgY29uc3QgY2FsbGJhY2sgPSBvdmVyVXBDYWxsYmFjay5iaW5kKCB0aGlzICk7XHJcbiAgICAvLyB1bmxpbmsgaXMgdW5uZWNlc3NhcnksIHRoZSBNYXNzTm9kZTJEIGFuZCB0aGUgZGVwZW5kZW5jeSBleGlzdHMgZm9yIHRoZSBsaWZldGltZSBvZiB0aGUgc2ltXHJcbiAgICBtb2RlbC5hcnJvd3NWaXNpYmxlUHJvcGVydHkubGluayggYXJyb3dzVmlzaWJsZSA9PiB7XHJcbiAgICAgIGlmICggYXJyb3dzVmlzaWJsZSApIHtcclxuICAgICAgICAvLyB1bmxpbmsgaXMgbmVlZGVkIHdoZW4gdGhlIGFycm93cyBiZWNvbWUgaW52aXNpYmxlXHJcbiAgICAgICAgZHJhZ0xpc3RlbmVyLmlzT3ZlclByb3BlcnR5LmxpbmsoIGNhbGxiYWNrICk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy5hcnJvd3MudG9wLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmFycm93cy5ib3R0b20udmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuYXJyb3dzLmxlZnQudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuYXJyb3dzLnJpZ2h0LnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICBpZiAoIGRyYWdMaXN0ZW5lci5pc092ZXJQcm9wZXJ0eS5oYXNMaXN0ZW5lciggY2FsbGJhY2sgKSApIHtcclxuICAgICAgICAgIGRyYWdMaXN0ZW5lci5pc092ZXJQcm9wZXJ0eS51bmxpbmsoIGNhbGxiYWNrICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy9UT0RPIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9ub3JtYWwtbW9kZXMvaXNzdWVzLzc4LCB3b3JrYXJvdW5kIGZvciBsYWNrIG9mIG11bHRpdG91Y2ggc3VwcG9ydFxyXG4gICAgLy8gSWYgdGhlIG1hc3MgYXNzb2NpYXRlZCB3aXRoIHRoaXMgTm9kZSBpcyBub3QgdGhlIG9uZSBiZWluZyBkcmFnZ2VkLCB0aGVuIGNhbmNlbCBhbnkgZHJhZyByZWxhdGVkXHJcbiAgICAvLyB0byB0aGlzIE5vZGUgdGhhdCBtYXkgYmUgaW4gcHJvZ3Jlc3MuXHJcbiAgICBtb2RlbC5kcmFnZ2luZ01hc3NJbmRleGVzUHJvcGVydHkubGluayggZHJhZ2dpbmdNYXNzSW5kZXhlcyA9PiB7XHJcbiAgICAgIGlmICggZHJhZ2dpbmdNYXNzSW5kZXhlcyApIHtcclxuICAgICAgICBjb25zdCBtYXNzSW5kZXhlcyA9IG1vZGVsLmdldE1hc3NJbmRleGVzKCBtYXNzICk7IC8vIHtpOm51bWJlciwgajpudW1iZXJ9XHJcbiAgICAgICAgaWYgKCAhKCBkcmFnZ2luZ01hc3NJbmRleGVzLmkgPT09IG1hc3NJbmRleGVzLmkgJiYgZHJhZ2dpbmdNYXNzSW5kZXhlcy5qID09PSBtYXNzSW5kZXhlcy5qICkgKSB7XHJcbiAgICAgICAgICB0aGlzLmludGVycnVwdFN1YnRyZWVJbnB1dCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSApO1xyXG4gIH1cclxufVxyXG5cclxubm9ybWFsTW9kZXMucmVnaXN0ZXIoICdNYXNzTm9kZTJEJywgTWFzc05vZGUyRCApO1xyXG5leHBvcnQgZGVmYXVsdCBNYXNzTm9kZTJEOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFFBQVEsTUFBTSxpQ0FBaUM7QUFDdEQsT0FBT0MsT0FBTyxNQUFNLCtCQUErQjtBQUNuRCxPQUFPQyxLQUFLLE1BQU0sbUNBQW1DO0FBQ3JELFNBQVNDLE1BQU0sRUFBRUMsWUFBWSxRQUFRLG1DQUFtQztBQUN4RSxPQUFPQyxpQkFBaUIsTUFBTSxtQ0FBbUM7QUFDakUsT0FBT0MsUUFBUSxNQUFNLCtCQUErQjtBQUNwRCxPQUFPQyxXQUFXLE1BQU0sc0JBQXNCO0FBRTlDLE1BQU1DLFVBQVUsU0FBU0YsUUFBUSxDQUFDO0VBRWhDO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VHLFdBQVdBLENBQUVDLElBQUksRUFBRUMsa0JBQWtCLEVBQUVDLEtBQUssRUFBRUMsVUFBVSxFQUFFQyxNQUFNLEVBQUc7SUFFakUsS0FBSyxDQUFFSixJQUFJLEVBQUVDLGtCQUFrQixFQUFFRyxNQUFPLENBQUM7SUFFekMsTUFBTUMsTUFBTSxHQUFHLElBQUlaLE1BQU0sQ0FBRUQsS0FBSyxDQUFFO01BQ2hDYyxNQUFNLEVBQUUsSUFBSSxDQUFDQyxJQUFJLEdBQUcsQ0FBQztNQUNyQkMsWUFBWSxFQUFFLFdBQVc7TUFDekJDLFNBQVMsRUFBRTtJQUNiLENBQUMsRUFBRWQsaUJBQWlCLENBQUNlLFdBQVksQ0FBRSxDQUFDO0lBRXBDLElBQUksQ0FBQ0MsUUFBUSxDQUFFTixNQUFPLENBQUM7SUFFdkIsTUFBTU8sYUFBYSxHQUFHLElBQUlyQixPQUFPLENBQUUsQ0FBQyxFQUFFLENBQUUsQ0FBQztJQUN6QyxLQUFNLE1BQU1zQixLQUFLLElBQUksSUFBSSxDQUFDQyxNQUFNLEVBQUc7TUFDakMsSUFBSSxDQUFDQSxNQUFNLENBQUVELEtBQUssQ0FBRSxDQUFDRSxZQUFZLENBQUVILGFBQWEsRUFBRUksSUFBSSxDQUFDQyxFQUFFLEdBQUcsQ0FBRSxDQUFDO0lBQ2pFO0lBRUEsTUFBTUMsYUFBYSxHQUFHQSxDQUFFQyxLQUFLLEVBQUVDLFFBQVEsS0FBTTtNQUMzQ2xCLEtBQUssQ0FBQ21CLDJCQUEyQixDQUFDQyxHQUFHLENBQUVwQixLQUFLLENBQUNxQixjQUFjLENBQUV2QixJQUFLLENBQUUsQ0FBQztJQUN2RSxDQUFDO0lBRUQsTUFBTXdCLFlBQVksR0FBR0EsQ0FBRUwsS0FBSyxFQUFFQyxRQUFRLEtBQU07TUFDMUNsQixLQUFLLENBQUN1QixxQkFBcUIsQ0FBQ0gsR0FBRyxDQUFFLEtBQU0sQ0FBQztNQUN4Q3RCLElBQUksQ0FBQzBCLG9CQUFvQixDQUFDSixHQUFHLENBQUVGLFFBQVEsQ0FBQ08sVUFBVSxDQUFDQyxLQUFLLENBQUU1QixJQUFJLENBQUM2QiwyQkFBMkIsQ0FBQ0MsR0FBRyxDQUFDLENBQUUsQ0FBRSxDQUFDO0lBQ3RHLENBQUM7SUFFRCxNQUFNQyxXQUFXLEdBQUdBLENBQUVaLEtBQUssRUFBRUMsUUFBUSxLQUFNO01BQ3pDLENBQUNZLFlBQVksQ0FBQ0MsV0FBVyxJQUFJL0IsS0FBSyxDQUFDbUIsMkJBQTJCLENBQUNDLEdBQUcsQ0FBRSxJQUFLLENBQUM7TUFDMUVwQixLQUFLLENBQUNnQyw4QkFBOEIsQ0FBQyxDQUFDO0lBQ3hDLENBQUM7SUFFRCxNQUFNQyxjQUFjLEdBQUdDLE1BQU0sSUFBSTtNQUMvQixJQUFJLENBQUN0QixNQUFNLENBQUN1QixHQUFHLENBQUNDLE9BQU8sR0FBR0YsTUFBTTtNQUNoQyxJQUFJLENBQUN0QixNQUFNLENBQUN5QixNQUFNLENBQUNELE9BQU8sR0FBR0YsTUFBTTtNQUNuQyxJQUFJLENBQUN0QixNQUFNLENBQUMwQixJQUFJLENBQUNGLE9BQU8sR0FBR0YsTUFBTTtNQUNqQyxJQUFJLENBQUN0QixNQUFNLENBQUMyQixLQUFLLENBQUNILE9BQU8sR0FBR0YsTUFBTTtJQUNwQyxDQUFDO0lBRUQsTUFBTUosWUFBWSxHQUFHLElBQUl0QyxZQUFZLENBQUU7TUFDckNnRCxXQUFXLEVBQUUsSUFBSTtNQUNqQkMsS0FBSyxFQUFFekIsYUFBYTtNQUNwQjBCLElBQUksRUFBRXBCLFlBQVk7TUFDbEJxQixHQUFHLEVBQUVkLFdBQVc7TUFDaEJlLFNBQVMsRUFBRTdDLGtCQUFrQjtNQUM3QjhDLGtCQUFrQixFQUFFLElBQUl6RCxRQUFRLENBQUVhLFVBQVc7SUFDL0MsQ0FBRSxDQUFDO0lBQ0gsSUFBSSxDQUFDNkMsZ0JBQWdCLENBQUVoQixZQUFhLENBQUM7SUFFckMsTUFBTWlCLFFBQVEsR0FBR2QsY0FBYyxDQUFDZSxJQUFJLENBQUUsSUFBSyxDQUFDO0lBQzVDO0lBQ0FoRCxLQUFLLENBQUN1QixxQkFBcUIsQ0FBQzBCLElBQUksQ0FBRUMsYUFBYSxJQUFJO01BQ2pELElBQUtBLGFBQWEsRUFBRztRQUNuQjtRQUNBcEIsWUFBWSxDQUFDcUIsY0FBYyxDQUFDRixJQUFJLENBQUVGLFFBQVMsQ0FBQztNQUM5QyxDQUFDLE1BQ0k7UUFDSCxJQUFJLENBQUNuQyxNQUFNLENBQUN1QixHQUFHLENBQUNDLE9BQU8sR0FBRyxLQUFLO1FBQy9CLElBQUksQ0FBQ3hCLE1BQU0sQ0FBQ3lCLE1BQU0sQ0FBQ0QsT0FBTyxHQUFHLEtBQUs7UUFDbEMsSUFBSSxDQUFDeEIsTUFBTSxDQUFDMEIsSUFBSSxDQUFDRixPQUFPLEdBQUcsS0FBSztRQUNoQyxJQUFJLENBQUN4QixNQUFNLENBQUMyQixLQUFLLENBQUNILE9BQU8sR0FBRyxLQUFLO1FBQ2pDLElBQUtOLFlBQVksQ0FBQ3FCLGNBQWMsQ0FBQ0MsV0FBVyxDQUFFTCxRQUFTLENBQUMsRUFBRztVQUN6RGpCLFlBQVksQ0FBQ3FCLGNBQWMsQ0FBQ0UsTUFBTSxDQUFFTixRQUFTLENBQUM7UUFDaEQ7TUFDRjtJQUNGLENBQUUsQ0FBQzs7SUFFSDtJQUNBO0lBQ0E7SUFDQS9DLEtBQUssQ0FBQ21CLDJCQUEyQixDQUFDOEIsSUFBSSxDQUFFSyxtQkFBbUIsSUFBSTtNQUM3RCxJQUFLQSxtQkFBbUIsRUFBRztRQUN6QixNQUFNQyxXQUFXLEdBQUd2RCxLQUFLLENBQUNxQixjQUFjLENBQUV2QixJQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ2xELElBQUssRUFBR3dELG1CQUFtQixDQUFDRSxDQUFDLEtBQUtELFdBQVcsQ0FBQ0MsQ0FBQyxJQUFJRixtQkFBbUIsQ0FBQ0csQ0FBQyxLQUFLRixXQUFXLENBQUNFLENBQUMsQ0FBRSxFQUFHO1VBQzdGLElBQUksQ0FBQ0MscUJBQXFCLENBQUMsQ0FBQztRQUM5QjtNQUNGO0lBQ0YsQ0FBRSxDQUFDO0VBQ0w7QUFDRjtBQUVBL0QsV0FBVyxDQUFDZ0UsUUFBUSxDQUFFLFlBQVksRUFBRS9ELFVBQVcsQ0FBQztBQUNoRCxlQUFlQSxVQUFVIn0=