// Copyright 2020-2021, University of Colorado Boulder

/**
 * This node draws a normal mode graph. It is based on States of Matter's InteractionPotentialCanvasNode.
 *
 * @author Franco Barpp Gomes (UTFPR)
 */

import Dimension2 from '../../../../dot/js/Dimension2.js';
import merge from '../../../../phet-core/js/merge.js';
import { CanvasNode } from '../../../../scenery/js/imports.js';
import NormalModesColors from '../../common/NormalModesColors.js';
import NormalModesConstants from '../../common/NormalModesConstants.js';
import normalModes from '../../normalModes.js';
class ModeGraphCanvasNode extends CanvasNode {
  /**
   * @param {OneDimensionModel} model
   * @param {number} normalNodeNumber - index of the corresponding normal mode, starting from 0
   * @param {Object} [options]
   */
  constructor(model, normalNodeNumber, options) {
    options = merge({
      graphSize: new Dimension2(133, 11),
      wallHeight: 8,
      curveResolution: 50
    }, NormalModesColors.MODE_GRAPH_COLORS, options);
    options.canvasBounds = options.graphSize.toBounds();
    super(options);

    // @private {number} - 0 to 9, determines the normal mode represented
    this.normalModeNumber = normalNodeNumber;

    // @private {Dimension2}
    this.graphSize = options.graphSize;

    // @private {Object} - start point of the graph
    this.graphStart = {
      x: 0,
      y: this.graphSize.height / 2
    };

    // @private {number} - height of left and right graph walls
    this.wallHeight = options.wallHeight;

    // @private {number} - how many points the curve has
    this.curveResolution = options.curveResolution;

    // @private {number} - x distance between consecutive graph points
    this.xStep = this.graphSize.width / this.curveResolution;

    // @private {Array.<number>}
    this.curveYPositions = new Array(this.curveResolution);

    // @private {String} - curve stroke canvas color
    this.strokeColor = options.strokeColor;

    // @private {String} - left and right wall stroke canvas color
    this.wallColor = options.wallColor;

    // @private {OneDimensionModel}
    this.model = model;
  }

  /**
   * Paints the normal mode graph.
   * @param {CanvasRenderingContext2D} context
   * @public
   */
  paintCanvas(context) {
    // draw left wall
    context.beginPath();
    context.lineWidth = 2;
    context.strokeStyle = this.wallColor;
    context.moveTo(this.graphStart.x, this.graphStart.y + this.wallHeight / 2);
    context.lineTo(this.graphStart.x, this.graphStart.y - this.wallHeight / 2);
    context.stroke();

    // plot
    context.beginPath();
    context.lineWidth = 2;
    context.strokeStyle = this.strokeColor;
    context.moveTo(this.graphStart.x, this.graphStart.y);
    for (let i = 1; i < this.curveYPositions.length; i++) {
      context.lineTo(this.graphStart.x + i * this.xStep, this.curveYPositions[i] + this.graphStart.y);
    }
    context.lineTo(this.graphStart.x + this.graphSize.width, this.graphStart.y);
    context.stroke();

    // draw right wall
    context.beginPath();
    context.lineWidth = 2;
    context.strokeStyle = this.wallColor;
    context.moveTo(this.graphStart.x + this.graphSize.width, this.graphStart.y + this.wallHeight / 2);
    context.lineTo(this.graphStart.x + this.graphSize.width, this.graphStart.y - this.wallHeight / 2);
    context.stroke();
  }

  /**
   * Updates the curve.
   * @public
   */
  update() {
    const n = this.normalModeNumber;
    const amplitude = this.model.modeAmplitudeProperties[n].get();
    const phase = this.model.modePhaseProperties[n].get();
    const frequency = this.model.modeFrequencyProperties[n].get();
    const time = this.model.timeProperty.get();

    // put a negative sign in front of it because of y coordinate stuff
    const heightFactor = -(2 * this.graphSize.height / 3);

    // this result is the same for all curve positions, so it's more efficient to only run it once
    const cos = Math.cos(frequency * time - phase);
    for (let i = 0; i < this.curveYPositions.length; i++) {
      const x = i / this.curveResolution;
      const sin = Math.sin(x * (n + 1) * Math.PI);
      this.curveYPositions[i] = heightFactor * (amplitude * sin * cos) / NormalModesConstants.MAX_AMPLITUDE;
    }

    // indicate that this should be repainted during the next paint cycle
    this.invalidatePaint();
  }
}
normalModes.register('ModeGraphCanvasNode', ModeGraphCanvasNode);
export default ModeGraphCanvasNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEaW1lbnNpb24yIiwibWVyZ2UiLCJDYW52YXNOb2RlIiwiTm9ybWFsTW9kZXNDb2xvcnMiLCJOb3JtYWxNb2Rlc0NvbnN0YW50cyIsIm5vcm1hbE1vZGVzIiwiTW9kZUdyYXBoQ2FudmFzTm9kZSIsImNvbnN0cnVjdG9yIiwibW9kZWwiLCJub3JtYWxOb2RlTnVtYmVyIiwib3B0aW9ucyIsImdyYXBoU2l6ZSIsIndhbGxIZWlnaHQiLCJjdXJ2ZVJlc29sdXRpb24iLCJNT0RFX0dSQVBIX0NPTE9SUyIsImNhbnZhc0JvdW5kcyIsInRvQm91bmRzIiwibm9ybWFsTW9kZU51bWJlciIsImdyYXBoU3RhcnQiLCJ4IiwieSIsImhlaWdodCIsInhTdGVwIiwid2lkdGgiLCJjdXJ2ZVlQb3NpdGlvbnMiLCJBcnJheSIsInN0cm9rZUNvbG9yIiwid2FsbENvbG9yIiwicGFpbnRDYW52YXMiLCJjb250ZXh0IiwiYmVnaW5QYXRoIiwibGluZVdpZHRoIiwic3Ryb2tlU3R5bGUiLCJtb3ZlVG8iLCJsaW5lVG8iLCJzdHJva2UiLCJpIiwibGVuZ3RoIiwidXBkYXRlIiwibiIsImFtcGxpdHVkZSIsIm1vZGVBbXBsaXR1ZGVQcm9wZXJ0aWVzIiwiZ2V0IiwicGhhc2UiLCJtb2RlUGhhc2VQcm9wZXJ0aWVzIiwiZnJlcXVlbmN5IiwibW9kZUZyZXF1ZW5jeVByb3BlcnRpZXMiLCJ0aW1lIiwidGltZVByb3BlcnR5IiwiaGVpZ2h0RmFjdG9yIiwiY29zIiwiTWF0aCIsInNpbiIsIlBJIiwiTUFYX0FNUExJVFVERSIsImludmFsaWRhdGVQYWludCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiTW9kZUdyYXBoQ2FudmFzTm9kZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMC0yMDIxLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBUaGlzIG5vZGUgZHJhd3MgYSBub3JtYWwgbW9kZSBncmFwaC4gSXQgaXMgYmFzZWQgb24gU3RhdGVzIG9mIE1hdHRlcidzIEludGVyYWN0aW9uUG90ZW50aWFsQ2FudmFzTm9kZS5cclxuICpcclxuICogQGF1dGhvciBGcmFuY28gQmFycHAgR29tZXMgKFVURlBSKVxyXG4gKi9cclxuXHJcbmltcG9ydCBEaW1lbnNpb24yIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9EaW1lbnNpb24yLmpzJztcclxuaW1wb3J0IG1lcmdlIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9tZXJnZS5qcyc7XHJcbmltcG9ydCB7IENhbnZhc05vZGUgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgTm9ybWFsTW9kZXNDb2xvcnMgZnJvbSAnLi4vLi4vY29tbW9uL05vcm1hbE1vZGVzQ29sb3JzLmpzJztcclxuaW1wb3J0IE5vcm1hbE1vZGVzQ29uc3RhbnRzIGZyb20gJy4uLy4uL2NvbW1vbi9Ob3JtYWxNb2Rlc0NvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBub3JtYWxNb2RlcyBmcm9tICcuLi8uLi9ub3JtYWxNb2Rlcy5qcyc7XHJcblxyXG5jbGFzcyBNb2RlR3JhcGhDYW52YXNOb2RlIGV4dGVuZHMgQ2FudmFzTm9kZSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7T25lRGltZW5zaW9uTW9kZWx9IG1vZGVsXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IG5vcm1hbE5vZGVOdW1iZXIgLSBpbmRleCBvZiB0aGUgY29ycmVzcG9uZGluZyBub3JtYWwgbW9kZSwgc3RhcnRpbmcgZnJvbSAwXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBtb2RlbCwgbm9ybWFsTm9kZU51bWJlciwgb3B0aW9ucyApIHtcclxuXHJcbiAgICBvcHRpb25zID0gbWVyZ2UoIHtcclxuICAgICAgZ3JhcGhTaXplOiBuZXcgRGltZW5zaW9uMiggMTMzLCAxMSApLFxyXG4gICAgICB3YWxsSGVpZ2h0OiA4LFxyXG4gICAgICBjdXJ2ZVJlc29sdXRpb246IDUwXHJcbiAgICB9LCBOb3JtYWxNb2Rlc0NvbG9ycy5NT0RFX0dSQVBIX0NPTE9SUywgb3B0aW9ucyApO1xyXG5cclxuICAgIG9wdGlvbnMuY2FudmFzQm91bmRzID0gb3B0aW9ucy5ncmFwaFNpemUudG9Cb3VuZHMoKTtcclxuICAgIHN1cGVyKCBvcHRpb25zICk7XHJcblxyXG4gICAgLy8gQHByaXZhdGUge251bWJlcn0gLSAwIHRvIDksIGRldGVybWluZXMgdGhlIG5vcm1hbCBtb2RlIHJlcHJlc2VudGVkXHJcbiAgICB0aGlzLm5vcm1hbE1vZGVOdW1iZXIgPSBub3JtYWxOb2RlTnVtYmVyO1xyXG5cclxuICAgIC8vIEBwcml2YXRlIHtEaW1lbnNpb24yfVxyXG4gICAgdGhpcy5ncmFwaFNpemUgPSBvcHRpb25zLmdyYXBoU2l6ZTtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZSB7T2JqZWN0fSAtIHN0YXJ0IHBvaW50IG9mIHRoZSBncmFwaFxyXG4gICAgdGhpcy5ncmFwaFN0YXJ0ID0geyB4OiAwLCB5OiB0aGlzLmdyYXBoU2l6ZS5oZWlnaHQgLyAyIH07XHJcblxyXG4gICAgLy8gQHByaXZhdGUge251bWJlcn0gLSBoZWlnaHQgb2YgbGVmdCBhbmQgcmlnaHQgZ3JhcGggd2FsbHNcclxuICAgIHRoaXMud2FsbEhlaWdodCA9IG9wdGlvbnMud2FsbEhlaWdodDtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZSB7bnVtYmVyfSAtIGhvdyBtYW55IHBvaW50cyB0aGUgY3VydmUgaGFzXHJcbiAgICB0aGlzLmN1cnZlUmVzb2x1dGlvbiA9IG9wdGlvbnMuY3VydmVSZXNvbHV0aW9uO1xyXG5cclxuICAgIC8vIEBwcml2YXRlIHtudW1iZXJ9IC0geCBkaXN0YW5jZSBiZXR3ZWVuIGNvbnNlY3V0aXZlIGdyYXBoIHBvaW50c1xyXG4gICAgdGhpcy54U3RlcCA9IHRoaXMuZ3JhcGhTaXplLndpZHRoIC8gdGhpcy5jdXJ2ZVJlc29sdXRpb247XHJcblxyXG4gICAgLy8gQHByaXZhdGUge0FycmF5LjxudW1iZXI+fVxyXG4gICAgdGhpcy5jdXJ2ZVlQb3NpdGlvbnMgPSBuZXcgQXJyYXkoIHRoaXMuY3VydmVSZXNvbHV0aW9uICk7XHJcblxyXG4gICAgLy8gQHByaXZhdGUge1N0cmluZ30gLSBjdXJ2ZSBzdHJva2UgY2FudmFzIGNvbG9yXHJcbiAgICB0aGlzLnN0cm9rZUNvbG9yID0gb3B0aW9ucy5zdHJva2VDb2xvcjtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZSB7U3RyaW5nfSAtIGxlZnQgYW5kIHJpZ2h0IHdhbGwgc3Ryb2tlIGNhbnZhcyBjb2xvclxyXG4gICAgdGhpcy53YWxsQ29sb3IgPSBvcHRpb25zLndhbGxDb2xvcjtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZSB7T25lRGltZW5zaW9uTW9kZWx9XHJcbiAgICB0aGlzLm1vZGVsID0gbW9kZWw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBQYWludHMgdGhlIG5vcm1hbCBtb2RlIGdyYXBoLlxyXG4gICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0XHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG4gIHBhaW50Q2FudmFzKCBjb250ZXh0ICkge1xyXG4gICAgLy8gZHJhdyBsZWZ0IHdhbGxcclxuICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICBjb250ZXh0LmxpbmVXaWR0aCA9IDI7XHJcbiAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gdGhpcy53YWxsQ29sb3I7XHJcbiAgICBjb250ZXh0Lm1vdmVUbyggdGhpcy5ncmFwaFN0YXJ0LngsIHRoaXMuZ3JhcGhTdGFydC55ICsgdGhpcy53YWxsSGVpZ2h0IC8gMiApO1xyXG4gICAgY29udGV4dC5saW5lVG8oIHRoaXMuZ3JhcGhTdGFydC54LCB0aGlzLmdyYXBoU3RhcnQueSAtIHRoaXMud2FsbEhlaWdodCAvIDIgKTtcclxuICAgIGNvbnRleHQuc3Ryb2tlKCk7XHJcblxyXG4gICAgLy8gcGxvdFxyXG4gICAgY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgIGNvbnRleHQubGluZVdpZHRoID0gMjtcclxuICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSB0aGlzLnN0cm9rZUNvbG9yO1xyXG4gICAgY29udGV4dC5tb3ZlVG8oIHRoaXMuZ3JhcGhTdGFydC54LCB0aGlzLmdyYXBoU3RhcnQueSApO1xyXG4gICAgZm9yICggbGV0IGkgPSAxOyBpIDwgdGhpcy5jdXJ2ZVlQb3NpdGlvbnMubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgIGNvbnRleHQubGluZVRvKCB0aGlzLmdyYXBoU3RhcnQueCArIGkgKiB0aGlzLnhTdGVwLCB0aGlzLmN1cnZlWVBvc2l0aW9uc1sgaSBdICsgdGhpcy5ncmFwaFN0YXJ0LnkgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb250ZXh0LmxpbmVUbyggdGhpcy5ncmFwaFN0YXJ0LnggKyB0aGlzLmdyYXBoU2l6ZS53aWR0aCwgdGhpcy5ncmFwaFN0YXJ0LnkgKTtcclxuICAgIGNvbnRleHQuc3Ryb2tlKCk7XHJcblxyXG4gICAgLy8gZHJhdyByaWdodCB3YWxsXHJcbiAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgY29udGV4dC5saW5lV2lkdGggPSAyO1xyXG4gICAgY29udGV4dC5zdHJva2VTdHlsZSA9IHRoaXMud2FsbENvbG9yO1xyXG4gICAgY29udGV4dC5tb3ZlVG8oIHRoaXMuZ3JhcGhTdGFydC54ICsgdGhpcy5ncmFwaFNpemUud2lkdGgsIHRoaXMuZ3JhcGhTdGFydC55ICsgdGhpcy53YWxsSGVpZ2h0IC8gMiApO1xyXG4gICAgY29udGV4dC5saW5lVG8oIHRoaXMuZ3JhcGhTdGFydC54ICsgdGhpcy5ncmFwaFNpemUud2lkdGgsIHRoaXMuZ3JhcGhTdGFydC55IC0gdGhpcy53YWxsSGVpZ2h0IC8gMiApO1xyXG4gICAgY29udGV4dC5zdHJva2UoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZXMgdGhlIGN1cnZlLlxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICB1cGRhdGUoKSB7XHJcblxyXG4gICAgY29uc3QgbiA9IHRoaXMubm9ybWFsTW9kZU51bWJlcjtcclxuICAgIGNvbnN0IGFtcGxpdHVkZSA9IHRoaXMubW9kZWwubW9kZUFtcGxpdHVkZVByb3BlcnRpZXNbIG4gXS5nZXQoKTtcclxuICAgIGNvbnN0IHBoYXNlID0gdGhpcy5tb2RlbC5tb2RlUGhhc2VQcm9wZXJ0aWVzWyBuIF0uZ2V0KCk7XHJcbiAgICBjb25zdCBmcmVxdWVuY3kgPSB0aGlzLm1vZGVsLm1vZGVGcmVxdWVuY3lQcm9wZXJ0aWVzWyBuIF0uZ2V0KCk7XHJcbiAgICBjb25zdCB0aW1lID0gdGhpcy5tb2RlbC50aW1lUHJvcGVydHkuZ2V0KCk7XHJcblxyXG4gICAgLy8gcHV0IGEgbmVnYXRpdmUgc2lnbiBpbiBmcm9udCBvZiBpdCBiZWNhdXNlIG9mIHkgY29vcmRpbmF0ZSBzdHVmZlxyXG4gICAgY29uc3QgaGVpZ2h0RmFjdG9yID0gLSggMiAqIHRoaXMuZ3JhcGhTaXplLmhlaWdodCAvIDMgKTtcclxuXHJcbiAgICAvLyB0aGlzIHJlc3VsdCBpcyB0aGUgc2FtZSBmb3IgYWxsIGN1cnZlIHBvc2l0aW9ucywgc28gaXQncyBtb3JlIGVmZmljaWVudCB0byBvbmx5IHJ1biBpdCBvbmNlXHJcbiAgICBjb25zdCBjb3MgPSBNYXRoLmNvcyggZnJlcXVlbmN5ICogdGltZSAtIHBoYXNlICk7XHJcblxyXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgdGhpcy5jdXJ2ZVlQb3NpdGlvbnMubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgIGNvbnN0IHggPSBpIC8gdGhpcy5jdXJ2ZVJlc29sdXRpb247XHJcblxyXG4gICAgICBjb25zdCBzaW4gPSBNYXRoLnNpbiggeCAqICggbiArIDEgKSAqIE1hdGguUEkgKTtcclxuICAgICAgdGhpcy5jdXJ2ZVlQb3NpdGlvbnNbIGkgXSA9IGhlaWdodEZhY3RvciAqICggYW1wbGl0dWRlICogc2luICogY29zICkgLyBOb3JtYWxNb2Rlc0NvbnN0YW50cy5NQVhfQU1QTElUVURFO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGluZGljYXRlIHRoYXQgdGhpcyBzaG91bGQgYmUgcmVwYWludGVkIGR1cmluZyB0aGUgbmV4dCBwYWludCBjeWNsZVxyXG4gICAgdGhpcy5pbnZhbGlkYXRlUGFpbnQoKTtcclxuICB9XHJcbn1cclxuXHJcbm5vcm1hbE1vZGVzLnJlZ2lzdGVyKCAnTW9kZUdyYXBoQ2FudmFzTm9kZScsIE1vZGVHcmFwaENhbnZhc05vZGUgKTtcclxuZXhwb3J0IGRlZmF1bHQgTW9kZUdyYXBoQ2FudmFzTm9kZTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsVUFBVSxNQUFNLGtDQUFrQztBQUN6RCxPQUFPQyxLQUFLLE1BQU0sbUNBQW1DO0FBQ3JELFNBQVNDLFVBQVUsUUFBUSxtQ0FBbUM7QUFDOUQsT0FBT0MsaUJBQWlCLE1BQU0sbUNBQW1DO0FBQ2pFLE9BQU9DLG9CQUFvQixNQUFNLHNDQUFzQztBQUN2RSxPQUFPQyxXQUFXLE1BQU0sc0JBQXNCO0FBRTlDLE1BQU1DLG1CQUFtQixTQUFTSixVQUFVLENBQUM7RUFFM0M7QUFDRjtBQUNBO0FBQ0E7QUFDQTtFQUNFSyxXQUFXQSxDQUFFQyxLQUFLLEVBQUVDLGdCQUFnQixFQUFFQyxPQUFPLEVBQUc7SUFFOUNBLE9BQU8sR0FBR1QsS0FBSyxDQUFFO01BQ2ZVLFNBQVMsRUFBRSxJQUFJWCxVQUFVLENBQUUsR0FBRyxFQUFFLEVBQUcsQ0FBQztNQUNwQ1ksVUFBVSxFQUFFLENBQUM7TUFDYkMsZUFBZSxFQUFFO0lBQ25CLENBQUMsRUFBRVYsaUJBQWlCLENBQUNXLGlCQUFpQixFQUFFSixPQUFRLENBQUM7SUFFakRBLE9BQU8sQ0FBQ0ssWUFBWSxHQUFHTCxPQUFPLENBQUNDLFNBQVMsQ0FBQ0ssUUFBUSxDQUFDLENBQUM7SUFDbkQsS0FBSyxDQUFFTixPQUFRLENBQUM7O0lBRWhCO0lBQ0EsSUFBSSxDQUFDTyxnQkFBZ0IsR0FBR1IsZ0JBQWdCOztJQUV4QztJQUNBLElBQUksQ0FBQ0UsU0FBUyxHQUFHRCxPQUFPLENBQUNDLFNBQVM7O0lBRWxDO0lBQ0EsSUFBSSxDQUFDTyxVQUFVLEdBQUc7TUFBRUMsQ0FBQyxFQUFFLENBQUM7TUFBRUMsQ0FBQyxFQUFFLElBQUksQ0FBQ1QsU0FBUyxDQUFDVSxNQUFNLEdBQUc7SUFBRSxDQUFDOztJQUV4RDtJQUNBLElBQUksQ0FBQ1QsVUFBVSxHQUFHRixPQUFPLENBQUNFLFVBQVU7O0lBRXBDO0lBQ0EsSUFBSSxDQUFDQyxlQUFlLEdBQUdILE9BQU8sQ0FBQ0csZUFBZTs7SUFFOUM7SUFDQSxJQUFJLENBQUNTLEtBQUssR0FBRyxJQUFJLENBQUNYLFNBQVMsQ0FBQ1ksS0FBSyxHQUFHLElBQUksQ0FBQ1YsZUFBZTs7SUFFeEQ7SUFDQSxJQUFJLENBQUNXLGVBQWUsR0FBRyxJQUFJQyxLQUFLLENBQUUsSUFBSSxDQUFDWixlQUFnQixDQUFDOztJQUV4RDtJQUNBLElBQUksQ0FBQ2EsV0FBVyxHQUFHaEIsT0FBTyxDQUFDZ0IsV0FBVzs7SUFFdEM7SUFDQSxJQUFJLENBQUNDLFNBQVMsR0FBR2pCLE9BQU8sQ0FBQ2lCLFNBQVM7O0lBRWxDO0lBQ0EsSUFBSSxDQUFDbkIsS0FBSyxHQUFHQSxLQUFLO0VBQ3BCOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDRW9CLFdBQVdBLENBQUVDLE9BQU8sRUFBRztJQUNyQjtJQUNBQSxPQUFPLENBQUNDLFNBQVMsQ0FBQyxDQUFDO0lBQ25CRCxPQUFPLENBQUNFLFNBQVMsR0FBRyxDQUFDO0lBQ3JCRixPQUFPLENBQUNHLFdBQVcsR0FBRyxJQUFJLENBQUNMLFNBQVM7SUFDcENFLE9BQU8sQ0FBQ0ksTUFBTSxDQUFFLElBQUksQ0FBQ2YsVUFBVSxDQUFDQyxDQUFDLEVBQUUsSUFBSSxDQUFDRCxVQUFVLENBQUNFLENBQUMsR0FBRyxJQUFJLENBQUNSLFVBQVUsR0FBRyxDQUFFLENBQUM7SUFDNUVpQixPQUFPLENBQUNLLE1BQU0sQ0FBRSxJQUFJLENBQUNoQixVQUFVLENBQUNDLENBQUMsRUFBRSxJQUFJLENBQUNELFVBQVUsQ0FBQ0UsQ0FBQyxHQUFHLElBQUksQ0FBQ1IsVUFBVSxHQUFHLENBQUUsQ0FBQztJQUM1RWlCLE9BQU8sQ0FBQ00sTUFBTSxDQUFDLENBQUM7O0lBRWhCO0lBQ0FOLE9BQU8sQ0FBQ0MsU0FBUyxDQUFDLENBQUM7SUFDbkJELE9BQU8sQ0FBQ0UsU0FBUyxHQUFHLENBQUM7SUFDckJGLE9BQU8sQ0FBQ0csV0FBVyxHQUFHLElBQUksQ0FBQ04sV0FBVztJQUN0Q0csT0FBTyxDQUFDSSxNQUFNLENBQUUsSUFBSSxDQUFDZixVQUFVLENBQUNDLENBQUMsRUFBRSxJQUFJLENBQUNELFVBQVUsQ0FBQ0UsQ0FBRSxDQUFDO0lBQ3RELEtBQU0sSUFBSWdCLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRyxJQUFJLENBQUNaLGVBQWUsQ0FBQ2EsTUFBTSxFQUFFRCxDQUFDLEVBQUUsRUFBRztNQUN0RFAsT0FBTyxDQUFDSyxNQUFNLENBQUUsSUFBSSxDQUFDaEIsVUFBVSxDQUFDQyxDQUFDLEdBQUdpQixDQUFDLEdBQUcsSUFBSSxDQUFDZCxLQUFLLEVBQUUsSUFBSSxDQUFDRSxlQUFlLENBQUVZLENBQUMsQ0FBRSxHQUFHLElBQUksQ0FBQ2xCLFVBQVUsQ0FBQ0UsQ0FBRSxDQUFDO0lBQ3JHO0lBRUFTLE9BQU8sQ0FBQ0ssTUFBTSxDQUFFLElBQUksQ0FBQ2hCLFVBQVUsQ0FBQ0MsQ0FBQyxHQUFHLElBQUksQ0FBQ1IsU0FBUyxDQUFDWSxLQUFLLEVBQUUsSUFBSSxDQUFDTCxVQUFVLENBQUNFLENBQUUsQ0FBQztJQUM3RVMsT0FBTyxDQUFDTSxNQUFNLENBQUMsQ0FBQzs7SUFFaEI7SUFDQU4sT0FBTyxDQUFDQyxTQUFTLENBQUMsQ0FBQztJQUNuQkQsT0FBTyxDQUFDRSxTQUFTLEdBQUcsQ0FBQztJQUNyQkYsT0FBTyxDQUFDRyxXQUFXLEdBQUcsSUFBSSxDQUFDTCxTQUFTO0lBQ3BDRSxPQUFPLENBQUNJLE1BQU0sQ0FBRSxJQUFJLENBQUNmLFVBQVUsQ0FBQ0MsQ0FBQyxHQUFHLElBQUksQ0FBQ1IsU0FBUyxDQUFDWSxLQUFLLEVBQUUsSUFBSSxDQUFDTCxVQUFVLENBQUNFLENBQUMsR0FBRyxJQUFJLENBQUNSLFVBQVUsR0FBRyxDQUFFLENBQUM7SUFDbkdpQixPQUFPLENBQUNLLE1BQU0sQ0FBRSxJQUFJLENBQUNoQixVQUFVLENBQUNDLENBQUMsR0FBRyxJQUFJLENBQUNSLFNBQVMsQ0FBQ1ksS0FBSyxFQUFFLElBQUksQ0FBQ0wsVUFBVSxDQUFDRSxDQUFDLEdBQUcsSUFBSSxDQUFDUixVQUFVLEdBQUcsQ0FBRSxDQUFDO0lBQ25HaUIsT0FBTyxDQUFDTSxNQUFNLENBQUMsQ0FBQztFQUNsQjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtFQUNFRyxNQUFNQSxDQUFBLEVBQUc7SUFFUCxNQUFNQyxDQUFDLEdBQUcsSUFBSSxDQUFDdEIsZ0JBQWdCO0lBQy9CLE1BQU11QixTQUFTLEdBQUcsSUFBSSxDQUFDaEMsS0FBSyxDQUFDaUMsdUJBQXVCLENBQUVGLENBQUMsQ0FBRSxDQUFDRyxHQUFHLENBQUMsQ0FBQztJQUMvRCxNQUFNQyxLQUFLLEdBQUcsSUFBSSxDQUFDbkMsS0FBSyxDQUFDb0MsbUJBQW1CLENBQUVMLENBQUMsQ0FBRSxDQUFDRyxHQUFHLENBQUMsQ0FBQztJQUN2RCxNQUFNRyxTQUFTLEdBQUcsSUFBSSxDQUFDckMsS0FBSyxDQUFDc0MsdUJBQXVCLENBQUVQLENBQUMsQ0FBRSxDQUFDRyxHQUFHLENBQUMsQ0FBQztJQUMvRCxNQUFNSyxJQUFJLEdBQUcsSUFBSSxDQUFDdkMsS0FBSyxDQUFDd0MsWUFBWSxDQUFDTixHQUFHLENBQUMsQ0FBQzs7SUFFMUM7SUFDQSxNQUFNTyxZQUFZLEdBQUcsRUFBRyxDQUFDLEdBQUcsSUFBSSxDQUFDdEMsU0FBUyxDQUFDVSxNQUFNLEdBQUcsQ0FBQyxDQUFFOztJQUV2RDtJQUNBLE1BQU02QixHQUFHLEdBQUdDLElBQUksQ0FBQ0QsR0FBRyxDQUFFTCxTQUFTLEdBQUdFLElBQUksR0FBR0osS0FBTSxDQUFDO0lBRWhELEtBQU0sSUFBSVAsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLElBQUksQ0FBQ1osZUFBZSxDQUFDYSxNQUFNLEVBQUVELENBQUMsRUFBRSxFQUFHO01BQ3RELE1BQU1qQixDQUFDLEdBQUdpQixDQUFDLEdBQUcsSUFBSSxDQUFDdkIsZUFBZTtNQUVsQyxNQUFNdUMsR0FBRyxHQUFHRCxJQUFJLENBQUNDLEdBQUcsQ0FBRWpDLENBQUMsSUFBS29CLENBQUMsR0FBRyxDQUFDLENBQUUsR0FBR1ksSUFBSSxDQUFDRSxFQUFHLENBQUM7TUFDL0MsSUFBSSxDQUFDN0IsZUFBZSxDQUFFWSxDQUFDLENBQUUsR0FBR2EsWUFBWSxJQUFLVCxTQUFTLEdBQUdZLEdBQUcsR0FBR0YsR0FBRyxDQUFFLEdBQUc5QyxvQkFBb0IsQ0FBQ2tELGFBQWE7SUFDM0c7O0lBRUE7SUFDQSxJQUFJLENBQUNDLGVBQWUsQ0FBQyxDQUFDO0VBQ3hCO0FBQ0Y7QUFFQWxELFdBQVcsQ0FBQ21ELFFBQVEsQ0FBRSxxQkFBcUIsRUFBRWxELG1CQUFvQixDQUFDO0FBQ2xFLGVBQWVBLG1CQUFtQiJ9