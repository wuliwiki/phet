// Copyright 2020-2022, University of Colorado Boulder

/**
 * View of the 'Generic' screen for the Number Line Distance simulation
 *
 * @author Saurabh Totey
 */

import ScreenView from '../../../../joist/js/ScreenView.js';
import NumberLineOrientationSelector from '../../../../number-line-common/js/common/view/NumberLineOrientationSelector.js';
import NumberLineRangeSelector from '../../../../number-line-common/js/common/view/NumberLineRangeSelector.js';
import PointControllerNode from '../../../../number-line-common/js/common/view/PointControllerNode.js';
import PointsOffScaleCondition from '../../../../number-line-common/js/common/view/PointsOffScaleCondition.js';
import Orientation from '../../../../phet-core/js/Orientation.js';
import ResetAllButton from '../../../../scenery-phet/js/buttons/ResetAllButton.js';
import MathSymbolFont from '../../../../scenery-phet/js/MathSymbolFont.js';
import { Circle, Node } from '../../../../scenery/js/imports.js';
import NLDConstants from '../../common/NLDConstants.js';
import DistanceShadedNumberLineNode from '../../common/view/DistanceShadedNumberLineNode.js';
import NLDBaseView from '../../common/view/NLDBaseView.js';
import numberLineDistance from '../../numberLineDistance.js';
import NumberLineDistanceStrings from '../../NumberLineDistanceStrings.js';
const genericAbsoluteDistanceTemplateString = NumberLineDistanceStrings.genericAbsoluteDistanceTemplate;
const genericDirectedPositiveDistanceTemplateString = NumberLineDistanceStrings.genericDirectedPositiveDistanceTemplate;
const genericDirectedNegativeDistanceTemplateString = NumberLineDistanceStrings.genericDirectedNegativeDistanceTemplate;
const unitString = NumberLineDistanceStrings.unit;
const unitsString = NumberLineDistanceStrings.units;
const CIRCLE_REPRESENTATION_RADIUS = 6;
class NLDGenericScreenView extends ScreenView {
  /**
   * @param {NLDGenericModel} model
   * @param {Tandem} tandem
   */
  constructor(model, tandem) {
    super({
      tandem: tandem
    });

    // the point controllers are represented as circles on the bottom left corner of the screen
    const firstControllerRepresentation = new Circle(CIRCLE_REPRESENTATION_RADIUS, {
      fill: 'magenta'
    });
    const secondControllerRepresentation = new Circle(CIRCLE_REPRESENTATION_RADIUS, {
      fill: 'blue'
    });
    const baseView = new NLDBaseView(model, firstControllerRepresentation, secondControllerRepresentation, {
      distanceDescriptionStrings: {
        absoluteDistanceDescriptionTemplate: genericAbsoluteDistanceTemplateString,
        directedPositiveDistanceDescriptionTemplate: genericDirectedPositiveDistanceTemplateString,
        directedNegativeDistanceDescriptionTemplate: genericDirectedNegativeDistanceTemplateString,
        singularUnits: unitString,
        pluralUnits: unitsString,
        getPrimaryPointControllerLabel: (_, orientation) => MathSymbolFont.getRichTextMarkup(orientation === Orientation.HORIZONTAL ? NLDConstants.X_1_STRING : NLDConstants.Y_1_STRING),
        getSecondaryPointControllerLabel: (_, orientation) => MathSymbolFont.getRichTextMarkup(orientation === Orientation.HORIZONTAL ? NLDConstants.X_2_STRING : NLDConstants.Y_2_STRING)
      },
      distanceStatementNodeOptions: {
        controlsValues: true
      }
    });
    this.addChild(baseView);

    // reset all button
    const resetAllButton = new ResetAllButton({
      listener: () => {
        this.interruptSubtreeInput(); // cancel interactions that may be in progress
        model.reset();
        baseView.accordionBoxOpenedProperty.reset();
      },
      right: this.layoutBounds.maxX - NLDConstants.SCREEN_VIEW_X_MARGIN,
      bottom: this.layoutBounds.maxY - NLDConstants.SCREEN_VIEW_Y_MARGIN,
      tandem: tandem.createTandem('resetAllButton')
    });
    this.addChild(resetAllButton);

    // adds orientation selectors for the number line
    const orientationSelector = new NumberLineOrientationSelector(model.numberLine.orientationProperty, {
      bottom: NLDConstants.NLD_LAYOUT_BOUNDS.maxY - 50,
      right: resetAllButton.left - 50,
      touchAreaXDilation: 5,
      touchAreaYDilation: 5
    });
    this.addChild(orientationSelector);

    // adds range selectors for the number line
    this.addChild(new NumberLineRangeSelector(model.numberLine.displayedRangeProperty, NLDConstants.GENERIC_NUMBER_LINE_RANGES, this, {
      bottom: orientationSelector.top - 15,
      left: orientationSelector.left
    }));

    // point controllers
    const pointControllerNodeLayer = new Node({
      children: model.pointControllers.map(pointController => new PointControllerNode(pointController))
    });
    this.addChild(pointControllerNodeLayer);

    // number line
    const numberLineNode = new DistanceShadedNumberLineNode(model, {
      pointsOffScaleCondition: PointsOffScaleCondition.SOME,
      pointNameLabelOffsetFromHorizontalNumberLine: 65,
      pointNameLabelOffsetFromVerticalNumberLine: 70
    });
    this.addChild(numberLineNode);
  }
}
numberLineDistance.register('NLDGenericScreenView', NLDGenericScreenView);
export default NLDGenericScreenView;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTY3JlZW5WaWV3IiwiTnVtYmVyTGluZU9yaWVudGF0aW9uU2VsZWN0b3IiLCJOdW1iZXJMaW5lUmFuZ2VTZWxlY3RvciIsIlBvaW50Q29udHJvbGxlck5vZGUiLCJQb2ludHNPZmZTY2FsZUNvbmRpdGlvbiIsIk9yaWVudGF0aW9uIiwiUmVzZXRBbGxCdXR0b24iLCJNYXRoU3ltYm9sRm9udCIsIkNpcmNsZSIsIk5vZGUiLCJOTERDb25zdGFudHMiLCJEaXN0YW5jZVNoYWRlZE51bWJlckxpbmVOb2RlIiwiTkxEQmFzZVZpZXciLCJudW1iZXJMaW5lRGlzdGFuY2UiLCJOdW1iZXJMaW5lRGlzdGFuY2VTdHJpbmdzIiwiZ2VuZXJpY0Fic29sdXRlRGlzdGFuY2VUZW1wbGF0ZVN0cmluZyIsImdlbmVyaWNBYnNvbHV0ZURpc3RhbmNlVGVtcGxhdGUiLCJnZW5lcmljRGlyZWN0ZWRQb3NpdGl2ZURpc3RhbmNlVGVtcGxhdGVTdHJpbmciLCJnZW5lcmljRGlyZWN0ZWRQb3NpdGl2ZURpc3RhbmNlVGVtcGxhdGUiLCJnZW5lcmljRGlyZWN0ZWROZWdhdGl2ZURpc3RhbmNlVGVtcGxhdGVTdHJpbmciLCJnZW5lcmljRGlyZWN0ZWROZWdhdGl2ZURpc3RhbmNlVGVtcGxhdGUiLCJ1bml0U3RyaW5nIiwidW5pdCIsInVuaXRzU3RyaW5nIiwidW5pdHMiLCJDSVJDTEVfUkVQUkVTRU5UQVRJT05fUkFESVVTIiwiTkxER2VuZXJpY1NjcmVlblZpZXciLCJjb25zdHJ1Y3RvciIsIm1vZGVsIiwidGFuZGVtIiwiZmlyc3RDb250cm9sbGVyUmVwcmVzZW50YXRpb24iLCJmaWxsIiwic2Vjb25kQ29udHJvbGxlclJlcHJlc2VudGF0aW9uIiwiYmFzZVZpZXciLCJkaXN0YW5jZURlc2NyaXB0aW9uU3RyaW5ncyIsImFic29sdXRlRGlzdGFuY2VEZXNjcmlwdGlvblRlbXBsYXRlIiwiZGlyZWN0ZWRQb3NpdGl2ZURpc3RhbmNlRGVzY3JpcHRpb25UZW1wbGF0ZSIsImRpcmVjdGVkTmVnYXRpdmVEaXN0YW5jZURlc2NyaXB0aW9uVGVtcGxhdGUiLCJzaW5ndWxhclVuaXRzIiwicGx1cmFsVW5pdHMiLCJnZXRQcmltYXJ5UG9pbnRDb250cm9sbGVyTGFiZWwiLCJfIiwib3JpZW50YXRpb24iLCJnZXRSaWNoVGV4dE1hcmt1cCIsIkhPUklaT05UQUwiLCJYXzFfU1RSSU5HIiwiWV8xX1NUUklORyIsImdldFNlY29uZGFyeVBvaW50Q29udHJvbGxlckxhYmVsIiwiWF8yX1NUUklORyIsIllfMl9TVFJJTkciLCJkaXN0YW5jZVN0YXRlbWVudE5vZGVPcHRpb25zIiwiY29udHJvbHNWYWx1ZXMiLCJhZGRDaGlsZCIsInJlc2V0QWxsQnV0dG9uIiwibGlzdGVuZXIiLCJpbnRlcnJ1cHRTdWJ0cmVlSW5wdXQiLCJyZXNldCIsImFjY29yZGlvbkJveE9wZW5lZFByb3BlcnR5IiwicmlnaHQiLCJsYXlvdXRCb3VuZHMiLCJtYXhYIiwiU0NSRUVOX1ZJRVdfWF9NQVJHSU4iLCJib3R0b20iLCJtYXhZIiwiU0NSRUVOX1ZJRVdfWV9NQVJHSU4iLCJjcmVhdGVUYW5kZW0iLCJvcmllbnRhdGlvblNlbGVjdG9yIiwibnVtYmVyTGluZSIsIm9yaWVudGF0aW9uUHJvcGVydHkiLCJOTERfTEFZT1VUX0JPVU5EUyIsImxlZnQiLCJ0b3VjaEFyZWFYRGlsYXRpb24iLCJ0b3VjaEFyZWFZRGlsYXRpb24iLCJkaXNwbGF5ZWRSYW5nZVByb3BlcnR5IiwiR0VORVJJQ19OVU1CRVJfTElORV9SQU5HRVMiLCJ0b3AiLCJwb2ludENvbnRyb2xsZXJOb2RlTGF5ZXIiLCJjaGlsZHJlbiIsInBvaW50Q29udHJvbGxlcnMiLCJtYXAiLCJwb2ludENvbnRyb2xsZXIiLCJudW1iZXJMaW5lTm9kZSIsInBvaW50c09mZlNjYWxlQ29uZGl0aW9uIiwiU09NRSIsInBvaW50TmFtZUxhYmVsT2Zmc2V0RnJvbUhvcml6b250YWxOdW1iZXJMaW5lIiwicG9pbnROYW1lTGFiZWxPZmZzZXRGcm9tVmVydGljYWxOdW1iZXJMaW5lIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJOTERHZW5lcmljU2NyZWVuVmlldy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMC0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBWaWV3IG9mIHRoZSAnR2VuZXJpYycgc2NyZWVuIGZvciB0aGUgTnVtYmVyIExpbmUgRGlzdGFuY2Ugc2ltdWxhdGlvblxyXG4gKlxyXG4gKiBAYXV0aG9yIFNhdXJhYmggVG90ZXlcclxuICovXHJcblxyXG5pbXBvcnQgU2NyZWVuVmlldyBmcm9tICcuLi8uLi8uLi8uLi9qb2lzdC9qcy9TY3JlZW5WaWV3LmpzJztcclxuaW1wb3J0IE51bWJlckxpbmVPcmllbnRhdGlvblNlbGVjdG9yIGZyb20gJy4uLy4uLy4uLy4uL251bWJlci1saW5lLWNvbW1vbi9qcy9jb21tb24vdmlldy9OdW1iZXJMaW5lT3JpZW50YXRpb25TZWxlY3Rvci5qcyc7XHJcbmltcG9ydCBOdW1iZXJMaW5lUmFuZ2VTZWxlY3RvciBmcm9tICcuLi8uLi8uLi8uLi9udW1iZXItbGluZS1jb21tb24vanMvY29tbW9uL3ZpZXcvTnVtYmVyTGluZVJhbmdlU2VsZWN0b3IuanMnO1xyXG5pbXBvcnQgUG9pbnRDb250cm9sbGVyTm9kZSBmcm9tICcuLi8uLi8uLi8uLi9udW1iZXItbGluZS1jb21tb24vanMvY29tbW9uL3ZpZXcvUG9pbnRDb250cm9sbGVyTm9kZS5qcyc7XHJcbmltcG9ydCBQb2ludHNPZmZTY2FsZUNvbmRpdGlvbiBmcm9tICcuLi8uLi8uLi8uLi9udW1iZXItbGluZS1jb21tb24vanMvY29tbW9uL3ZpZXcvUG9pbnRzT2ZmU2NhbGVDb25kaXRpb24uanMnO1xyXG5pbXBvcnQgT3JpZW50YXRpb24gZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL09yaWVudGF0aW9uLmpzJztcclxuaW1wb3J0IFJlc2V0QWxsQnV0dG9uIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9idXR0b25zL1Jlc2V0QWxsQnV0dG9uLmpzJztcclxuaW1wb3J0IE1hdGhTeW1ib2xGb250IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9NYXRoU3ltYm9sRm9udC5qcyc7XHJcbmltcG9ydCB7IENpcmNsZSwgTm9kZSB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBOTERDb25zdGFudHMgZnJvbSAnLi4vLi4vY29tbW9uL05MRENvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBEaXN0YW5jZVNoYWRlZE51bWJlckxpbmVOb2RlIGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L0Rpc3RhbmNlU2hhZGVkTnVtYmVyTGluZU5vZGUuanMnO1xyXG5pbXBvcnQgTkxEQmFzZVZpZXcgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvTkxEQmFzZVZpZXcuanMnO1xyXG5pbXBvcnQgbnVtYmVyTGluZURpc3RhbmNlIGZyb20gJy4uLy4uL251bWJlckxpbmVEaXN0YW5jZS5qcyc7XHJcbmltcG9ydCBOdW1iZXJMaW5lRGlzdGFuY2VTdHJpbmdzIGZyb20gJy4uLy4uL051bWJlckxpbmVEaXN0YW5jZVN0cmluZ3MuanMnO1xyXG5cclxuY29uc3QgZ2VuZXJpY0Fic29sdXRlRGlzdGFuY2VUZW1wbGF0ZVN0cmluZyA9IE51bWJlckxpbmVEaXN0YW5jZVN0cmluZ3MuZ2VuZXJpY0Fic29sdXRlRGlzdGFuY2VUZW1wbGF0ZTtcclxuY29uc3QgZ2VuZXJpY0RpcmVjdGVkUG9zaXRpdmVEaXN0YW5jZVRlbXBsYXRlU3RyaW5nID0gTnVtYmVyTGluZURpc3RhbmNlU3RyaW5ncy5nZW5lcmljRGlyZWN0ZWRQb3NpdGl2ZURpc3RhbmNlVGVtcGxhdGU7XHJcbmNvbnN0IGdlbmVyaWNEaXJlY3RlZE5lZ2F0aXZlRGlzdGFuY2VUZW1wbGF0ZVN0cmluZyA9IE51bWJlckxpbmVEaXN0YW5jZVN0cmluZ3MuZ2VuZXJpY0RpcmVjdGVkTmVnYXRpdmVEaXN0YW5jZVRlbXBsYXRlO1xyXG5jb25zdCB1bml0U3RyaW5nID0gTnVtYmVyTGluZURpc3RhbmNlU3RyaW5ncy51bml0O1xyXG5jb25zdCB1bml0c1N0cmluZyA9IE51bWJlckxpbmVEaXN0YW5jZVN0cmluZ3MudW5pdHM7XHJcblxyXG5jb25zdCBDSVJDTEVfUkVQUkVTRU5UQVRJT05fUkFESVVTID0gNjtcclxuXHJcbmNsYXNzIE5MREdlbmVyaWNTY3JlZW5WaWV3IGV4dGVuZHMgU2NyZWVuVmlldyB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7TkxER2VuZXJpY01vZGVsfSBtb2RlbFxyXG4gICAqIEBwYXJhbSB7VGFuZGVtfSB0YW5kZW1cclxuICAgKi9cclxuICBjb25zdHJ1Y3RvciggbW9kZWwsIHRhbmRlbSApIHtcclxuICAgIHN1cGVyKCB7XHJcbiAgICAgIHRhbmRlbTogdGFuZGVtXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gdGhlIHBvaW50IGNvbnRyb2xsZXJzIGFyZSByZXByZXNlbnRlZCBhcyBjaXJjbGVzIG9uIHRoZSBib3R0b20gbGVmdCBjb3JuZXIgb2YgdGhlIHNjcmVlblxyXG4gICAgY29uc3QgZmlyc3RDb250cm9sbGVyUmVwcmVzZW50YXRpb24gPSBuZXcgQ2lyY2xlKCBDSVJDTEVfUkVQUkVTRU5UQVRJT05fUkFESVVTLCB7IGZpbGw6ICdtYWdlbnRhJyB9ICk7XHJcbiAgICBjb25zdCBzZWNvbmRDb250cm9sbGVyUmVwcmVzZW50YXRpb24gPSBuZXcgQ2lyY2xlKCBDSVJDTEVfUkVQUkVTRU5UQVRJT05fUkFESVVTLCB7IGZpbGw6ICdibHVlJyB9ICk7XHJcblxyXG4gICAgY29uc3QgYmFzZVZpZXcgPSBuZXcgTkxEQmFzZVZpZXcoXHJcbiAgICAgIG1vZGVsLFxyXG4gICAgICBmaXJzdENvbnRyb2xsZXJSZXByZXNlbnRhdGlvbixcclxuICAgICAgc2Vjb25kQ29udHJvbGxlclJlcHJlc2VudGF0aW9uLFxyXG4gICAgICB7XHJcbiAgICAgICAgZGlzdGFuY2VEZXNjcmlwdGlvblN0cmluZ3M6IHtcclxuICAgICAgICAgIGFic29sdXRlRGlzdGFuY2VEZXNjcmlwdGlvblRlbXBsYXRlOiBnZW5lcmljQWJzb2x1dGVEaXN0YW5jZVRlbXBsYXRlU3RyaW5nLFxyXG4gICAgICAgICAgZGlyZWN0ZWRQb3NpdGl2ZURpc3RhbmNlRGVzY3JpcHRpb25UZW1wbGF0ZTogZ2VuZXJpY0RpcmVjdGVkUG9zaXRpdmVEaXN0YW5jZVRlbXBsYXRlU3RyaW5nLFxyXG4gICAgICAgICAgZGlyZWN0ZWROZWdhdGl2ZURpc3RhbmNlRGVzY3JpcHRpb25UZW1wbGF0ZTogZ2VuZXJpY0RpcmVjdGVkTmVnYXRpdmVEaXN0YW5jZVRlbXBsYXRlU3RyaW5nLFxyXG4gICAgICAgICAgc2luZ3VsYXJVbml0czogdW5pdFN0cmluZyxcclxuICAgICAgICAgIHBsdXJhbFVuaXRzOiB1bml0c1N0cmluZyxcclxuICAgICAgICAgIGdldFByaW1hcnlQb2ludENvbnRyb2xsZXJMYWJlbDogKCBfLCBvcmllbnRhdGlvbiApID0+IE1hdGhTeW1ib2xGb250LmdldFJpY2hUZXh0TWFya3VwKFxyXG4gICAgICAgICAgICAoIG9yaWVudGF0aW9uID09PSBPcmllbnRhdGlvbi5IT1JJWk9OVEFMICkgPyBOTERDb25zdGFudHMuWF8xX1NUUklORyA6IE5MRENvbnN0YW50cy5ZXzFfU1RSSU5HXHJcbiAgICAgICAgICApLFxyXG4gICAgICAgICAgZ2V0U2Vjb25kYXJ5UG9pbnRDb250cm9sbGVyTGFiZWw6ICggXywgb3JpZW50YXRpb24gKSA9PiBNYXRoU3ltYm9sRm9udC5nZXRSaWNoVGV4dE1hcmt1cChcclxuICAgICAgICAgICAgKCBvcmllbnRhdGlvbiA9PT0gT3JpZW50YXRpb24uSE9SSVpPTlRBTCApID8gTkxEQ29uc3RhbnRzLlhfMl9TVFJJTkcgOiBOTERDb25zdGFudHMuWV8yX1NUUklOR1xyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGlzdGFuY2VTdGF0ZW1lbnROb2RlT3B0aW9uczogeyBjb250cm9sc1ZhbHVlczogdHJ1ZSB9XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBiYXNlVmlldyApO1xyXG5cclxuICAgIC8vIHJlc2V0IGFsbCBidXR0b25cclxuICAgIGNvbnN0IHJlc2V0QWxsQnV0dG9uID0gbmV3IFJlc2V0QWxsQnV0dG9uKCB7XHJcbiAgICAgIGxpc3RlbmVyOiAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5pbnRlcnJ1cHRTdWJ0cmVlSW5wdXQoKTsgLy8gY2FuY2VsIGludGVyYWN0aW9ucyB0aGF0IG1heSBiZSBpbiBwcm9ncmVzc1xyXG4gICAgICAgIG1vZGVsLnJlc2V0KCk7XHJcbiAgICAgICAgYmFzZVZpZXcuYWNjb3JkaW9uQm94T3BlbmVkUHJvcGVydHkucmVzZXQoKTtcclxuICAgICAgfSxcclxuICAgICAgcmlnaHQ6IHRoaXMubGF5b3V0Qm91bmRzLm1heFggLSBOTERDb25zdGFudHMuU0NSRUVOX1ZJRVdfWF9NQVJHSU4sXHJcbiAgICAgIGJvdHRvbTogdGhpcy5sYXlvdXRCb3VuZHMubWF4WSAtIE5MRENvbnN0YW50cy5TQ1JFRU5fVklFV19ZX01BUkdJTixcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAncmVzZXRBbGxCdXR0b24nIClcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHJlc2V0QWxsQnV0dG9uICk7XHJcblxyXG4gICAgLy8gYWRkcyBvcmllbnRhdGlvbiBzZWxlY3RvcnMgZm9yIHRoZSBudW1iZXIgbGluZVxyXG4gICAgY29uc3Qgb3JpZW50YXRpb25TZWxlY3RvciA9IG5ldyBOdW1iZXJMaW5lT3JpZW50YXRpb25TZWxlY3RvciggbW9kZWwubnVtYmVyTGluZS5vcmllbnRhdGlvblByb3BlcnR5LCB7XHJcbiAgICAgIGJvdHRvbTogTkxEQ29uc3RhbnRzLk5MRF9MQVlPVVRfQk9VTkRTLm1heFkgLSA1MCxcclxuICAgICAgcmlnaHQ6IHJlc2V0QWxsQnV0dG9uLmxlZnQgLSA1MCxcclxuICAgICAgdG91Y2hBcmVhWERpbGF0aW9uOiA1LFxyXG4gICAgICB0b3VjaEFyZWFZRGlsYXRpb246IDVcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIG9yaWVudGF0aW9uU2VsZWN0b3IgKTtcclxuXHJcbiAgICAvLyBhZGRzIHJhbmdlIHNlbGVjdG9ycyBmb3IgdGhlIG51bWJlciBsaW5lXHJcbiAgICB0aGlzLmFkZENoaWxkKCBuZXcgTnVtYmVyTGluZVJhbmdlU2VsZWN0b3IoXHJcbiAgICAgIG1vZGVsLm51bWJlckxpbmUuZGlzcGxheWVkUmFuZ2VQcm9wZXJ0eSxcclxuICAgICAgTkxEQ29uc3RhbnRzLkdFTkVSSUNfTlVNQkVSX0xJTkVfUkFOR0VTLFxyXG4gICAgICB0aGlzLFxyXG4gICAgICB7XHJcbiAgICAgICAgYm90dG9tOiBvcmllbnRhdGlvblNlbGVjdG9yLnRvcCAtIDE1LFxyXG4gICAgICAgIGxlZnQ6IG9yaWVudGF0aW9uU2VsZWN0b3IubGVmdFxyXG4gICAgICB9XHJcbiAgICApICk7XHJcblxyXG4gICAgLy8gcG9pbnQgY29udHJvbGxlcnNcclxuICAgIGNvbnN0IHBvaW50Q29udHJvbGxlck5vZGVMYXllciA9IG5ldyBOb2RlKCB7XHJcbiAgICAgIGNoaWxkcmVuOiBtb2RlbC5wb2ludENvbnRyb2xsZXJzLm1hcCggcG9pbnRDb250cm9sbGVyID0+IG5ldyBQb2ludENvbnRyb2xsZXJOb2RlKCBwb2ludENvbnRyb2xsZXIgKSApXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBwb2ludENvbnRyb2xsZXJOb2RlTGF5ZXIgKTtcclxuXHJcbiAgICAvLyBudW1iZXIgbGluZVxyXG4gICAgY29uc3QgbnVtYmVyTGluZU5vZGUgPSBuZXcgRGlzdGFuY2VTaGFkZWROdW1iZXJMaW5lTm9kZShcclxuICAgICAgbW9kZWwsXHJcbiAgICAgIHtcclxuICAgICAgICBwb2ludHNPZmZTY2FsZUNvbmRpdGlvbjogUG9pbnRzT2ZmU2NhbGVDb25kaXRpb24uU09NRSxcclxuICAgICAgICBwb2ludE5hbWVMYWJlbE9mZnNldEZyb21Ib3Jpem9udGFsTnVtYmVyTGluZTogNjUsXHJcbiAgICAgICAgcG9pbnROYW1lTGFiZWxPZmZzZXRGcm9tVmVydGljYWxOdW1iZXJMaW5lOiA3MFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggbnVtYmVyTGluZU5vZGUgKTtcclxuICB9XHJcblxyXG59XHJcblxyXG5udW1iZXJMaW5lRGlzdGFuY2UucmVnaXN0ZXIoICdOTERHZW5lcmljU2NyZWVuVmlldycsIE5MREdlbmVyaWNTY3JlZW5WaWV3ICk7XHJcbmV4cG9ydCBkZWZhdWx0IE5MREdlbmVyaWNTY3JlZW5WaWV3O1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsVUFBVSxNQUFNLG9DQUFvQztBQUMzRCxPQUFPQyw2QkFBNkIsTUFBTSxnRkFBZ0Y7QUFDMUgsT0FBT0MsdUJBQXVCLE1BQU0sMEVBQTBFO0FBQzlHLE9BQU9DLG1CQUFtQixNQUFNLHNFQUFzRTtBQUN0RyxPQUFPQyx1QkFBdUIsTUFBTSwwRUFBMEU7QUFDOUcsT0FBT0MsV0FBVyxNQUFNLHlDQUF5QztBQUNqRSxPQUFPQyxjQUFjLE1BQU0sdURBQXVEO0FBQ2xGLE9BQU9DLGNBQWMsTUFBTSwrQ0FBK0M7QUFDMUUsU0FBU0MsTUFBTSxFQUFFQyxJQUFJLFFBQVEsbUNBQW1DO0FBQ2hFLE9BQU9DLFlBQVksTUFBTSw4QkFBOEI7QUFDdkQsT0FBT0MsNEJBQTRCLE1BQU0sbURBQW1EO0FBQzVGLE9BQU9DLFdBQVcsTUFBTSxrQ0FBa0M7QUFDMUQsT0FBT0Msa0JBQWtCLE1BQU0sNkJBQTZCO0FBQzVELE9BQU9DLHlCQUF5QixNQUFNLG9DQUFvQztBQUUxRSxNQUFNQyxxQ0FBcUMsR0FBR0QseUJBQXlCLENBQUNFLCtCQUErQjtBQUN2RyxNQUFNQyw2Q0FBNkMsR0FBR0gseUJBQXlCLENB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