// Copyright 2018-2021, University of Colorado Boulder

/**
 * sound generator used for indicating the position of the arm in the John Travoltage sim, may be generalized at some
 * future for other purposes
 *
 * @author John Blanco
 */

import dotRandom from '../../../../dot/js/dotRandom.js';
import SoundClip from '../../../../tambo/js/sound-generators/SoundClip.js';
import SoundGenerator from '../../../../tambo/js/sound-generators/SoundGenerator.js';
import armPosition001_mp3 from '../../../sounds/armPosition001_mp3.js';
import armPosition002_mp3 from '../../../sounds/armPosition002_mp3.js';
import armPosition003_mp3 from '../../../sounds/armPosition003_mp3.js';
import armPosition004_mp3 from '../../../sounds/armPosition004_mp3.js';
import armPosition005_mp3 from '../../../sounds/armPosition005_mp3.js';
import armPosition006_mp3 from '../../../sounds/armPosition006_mp3.js';
import johnTravoltage from '../../johnTravoltage.js';

// constants
const NUM_SOUND_POSITIONS = 32;
const MAX_SOUNDS_PER_ITERATION = 3; // empirically determined
const ANGLE_OF_HIGHEST_PITCH = 0.45; // this is when the finger is closest to the door knob

class ArmPositionSoundGenerator extends SoundGenerator {
  /**
   * @constructor
   * {Property.<number>} armAngleProperty - angle, in radians, of the arm position
   * {Object} [options]
   */
  constructor(armAngleProperty, options) {
    super(options);
    const ratchetSounds = [new SoundClip(armPosition001_mp3), new SoundClip(armPosition002_mp3), new SoundClip(armPosition003_mp3), new SoundClip(armPosition004_mp3), new SoundClip(armPosition005_mp3), new SoundClip(armPosition006_mp3)];

    // define a helper function to play a random ratchet sound
    let previousRatchetSoundIndex = -1;
    const playRandomRatchetSound = playbackRate => {
      let ratchetSoundIndex;
      do {
        ratchetSoundIndex = Math.floor(dotRandom.nextDouble() * ratchetSounds.length);
      } while (ratchetSoundIndex === previousRatchetSoundIndex);
      ratchetSounds[ratchetSoundIndex].setPlaybackRate(playbackRate, 1E-30);
      ratchetSounds[ratchetSoundIndex].play();
      previousRatchetSoundIndex = ratchetSoundIndex;
    };

    // connect up the sound generators
    ratchetSounds.forEach(ratchetSound => {
      ratchetSound.connect(this.soundSourceDestination);
    });

    // create the array containing the 'sound points', which are the arm position where a sound sample is played
    const soundPositions = [];
    _.times(NUM_SOUND_POSITIONS, index => {
      soundPositions.push(-Math.PI + index / NUM_SOUND_POSITIONS * Math.PI * 2);
    });
    const binSize = 2 * Math.PI / NUM_SOUND_POSITIONS;

    // monitor the arm property, adjusting and playing sounds as appropriate
    let previousAngle = null;
    armAngleProperty.lazyLink(angle => {
      let numClickSoundsToPlay = 0;

      // determine if the new angle crossed over one or more 'sound points' since the last angle
      if (this.fullyEnabledProperty.value && previousAngle !== null) {
        numClickSoundsToPlay = Math.abs(Math.floor(previousAngle / binSize) - Math.floor(angle / binSize));
        // TODO: This is a temporary workaround for an issue where the angle seems to switch from + to - at an odd place
        if (numClickSoundsToPlay > NUM_SOUND_POSITIONS / 2) {
          numClickSoundsToPlay = 0;
        }
      }

      // play the sounds that indicate the motion, but limit it in the case of really large changes
      let angularDistanceFromKnob = Math.abs(ANGLE_OF_HIGHEST_PITCH - angle);
      if (angularDistanceFromKnob > Math.PI) {
        angularDistanceFromKnob = Math.PI - angularDistanceFromKnob % Math.PI;
      }
      const playbackRate = 0.75 + 0.75 * (1 - angularDistanceFromKnob / Math.PI);
      _.times(Math.min(numClickSoundsToPlay, MAX_SOUNDS_PER_ITERATION), () => {
        playRandomRatchetSound(playbackRate);
      });

      // save the angle for the next time through
      previousAngle = angle;
    });
  }
}
johnTravoltage.register('ArmPositionSoundGenerator', ArmPositionSoundGenerator);
export default ArmPositionSoundGenerator;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3RSYW5kb20iLCJTb3VuZENsaXAiLCJTb3VuZEdlbmVyYXRvciIsImFybVBvc2l0aW9uMDAxX21wMyIsImFybVBvc2l0aW9uMDAyX21wMyIsImFybVBvc2l0aW9uMDAzX21wMyIsImFybVBvc2l0aW9uMDA0X21wMyIsImFybVBvc2l0aW9uMDA1X21wMyIsImFybVBvc2l0aW9uMDA2X21wMyIsImpvaG5UcmF2b2x0YWdlIiwiTlVNX1NPVU5EX1BPU0lUSU9OUyIsIk1BWF9TT1VORFNfUEVSX0lURVJBVElPTiIsIkFOR0xFX09GX0hJR0hFU1RfUElUQ0giLCJBcm1Qb3NpdGlvblNvdW5kR2VuZXJhdG9yIiwiY29uc3RydWN0b3IiLCJhcm1BbmdsZVByb3BlcnR5Iiwib3B0aW9ucyIsInJhdGNoZXRTb3VuZHMiLCJwcmV2aW91c1JhdGNoZXRTb3VuZEluZGV4IiwicGxheVJhbmRvbVJhdGNoZXRTb3VuZCIsInBsYXliYWNrUmF0ZSIsInJhdGNoZXRTb3VuZEluZGV4IiwiTWF0aCIsImZsb29yIiwibmV4dERvdWJsZSIsImxlbmd0aCIsInNldFBsYXliYWNrUmF0ZSIsInBsYXkiLCJmb3JFYWNoIiwicmF0Y2hldFNvdW5kIiwiY29ubmVjdCIsInNvdW5kU291cmNlRGVzdGluYXRpb24iLCJzb3VuZFBvc2l0aW9ucyIsIl8iLCJ0aW1lcyIsImluZGV4IiwicHVzaCIsIlBJIiwiYmluU2l6ZSIsInByZXZpb3VzQW5nbGUiLCJsYXp5TGluayIsImFuZ2xlIiwibnVtQ2xpY2tTb3VuZHNUb1BsYXkiLCJmdWxseUVuYWJsZWRQcm9wZXJ0eSIsInZhbHVlIiwiYWJzIiwiYW5ndWxhckRpc3RhbmNlRnJvbUtub2IiLCJtaW4iLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkFybVBvc2l0aW9uU291bmRHZW5lcmF0b3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTgtMjAyMSwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogc291bmQgZ2VuZXJhdG9yIHVzZWQgZm9yIGluZGljYXRpbmcgdGhlIHBvc2l0aW9uIG9mIHRoZSBhcm0gaW4gdGhlIEpvaG4gVHJhdm9sdGFnZSBzaW0sIG1heSBiZSBnZW5lcmFsaXplZCBhdCBzb21lXHJcbiAqIGZ1dHVyZSBmb3Igb3RoZXIgcHVycG9zZXNcclxuICpcclxuICogQGF1dGhvciBKb2huIEJsYW5jb1xyXG4gKi9cclxuXHJcbmltcG9ydCBkb3RSYW5kb20gZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL2RvdFJhbmRvbS5qcyc7XHJcbmltcG9ydCBTb3VuZENsaXAgZnJvbSAnLi4vLi4vLi4vLi4vdGFtYm8vanMvc291bmQtZ2VuZXJhdG9ycy9Tb3VuZENsaXAuanMnO1xyXG5pbXBvcnQgU291bmRHZW5lcmF0b3IgZnJvbSAnLi4vLi4vLi4vLi4vdGFtYm8vanMvc291bmQtZ2VuZXJhdG9ycy9Tb3VuZEdlbmVyYXRvci5qcyc7XHJcbmltcG9ydCBhcm1Qb3NpdGlvbjAwMV9tcDMgZnJvbSAnLi4vLi4vLi4vc291bmRzL2FybVBvc2l0aW9uMDAxX21wMy5qcyc7XHJcbmltcG9ydCBhcm1Qb3NpdGlvbjAwMl9tcDMgZnJvbSAnLi4vLi4vLi4vc291bmRzL2FybVBvc2l0aW9uMDAyX21wMy5qcyc7XHJcbmltcG9ydCBhcm1Qb3NpdGlvbjAwM19tcDMgZnJvbSAnLi4vLi4vLi4vc291bmRzL2FybVBvc2l0aW9uMDAzX21wMy5qcyc7XHJcbmltcG9ydCBhcm1Qb3NpdGlvbjAwNF9tcDMgZnJvbSAnLi4vLi4vLi4vc291bmRzL2FybVBvc2l0aW9uMDA0X21wMy5qcyc7XHJcbmltcG9ydCBhcm1Qb3NpdGlvbjAwNV9tcDMgZnJvbSAnLi4vLi4vLi4vc291bmRzL2FybVBvc2l0aW9uMDA1X21wMy5qcyc7XHJcbmltcG9ydCBhcm1Qb3NpdGlvbjAwNl9tcDMgZnJvbSAnLi4vLi4vLi4vc291bmRzL2FybVBvc2l0aW9uMDA2X21wMy5qcyc7XHJcbmltcG9ydCBqb2huVHJhdm9sdGFnZSBmcm9tICcuLi8uLi9qb2huVHJhdm9sdGFnZS5qcyc7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgTlVNX1NPVU5EX1BPU0lUSU9OUyA9IDMyO1xyXG5jb25zdCBNQVhfU09VTkRTX1BFUl9JVEVSQVRJT04gPSAzOyAvLyBlbXBpcmljYWxseSBkZXRlcm1pbmVkXHJcbmNvbnN0IEFOR0xFX09GX0hJR0hFU1RfUElUQ0ggPSAwLjQ1OyAvLyB0aGlzIGlzIHdoZW4gdGhlIGZpbmdlciBpcyBjbG9zZXN0IHRvIHRoZSBkb29yIGtub2JcclxuXHJcbmNsYXNzIEFybVBvc2l0aW9uU291bmRHZW5lcmF0b3IgZXh0ZW5kcyBTb3VuZEdlbmVyYXRvciB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBjb25zdHJ1Y3RvclxyXG4gICAqIHtQcm9wZXJ0eS48bnVtYmVyPn0gYXJtQW5nbGVQcm9wZXJ0eSAtIGFuZ2xlLCBpbiByYWRpYW5zLCBvZiB0aGUgYXJtIHBvc2l0aW9uXHJcbiAgICoge09iamVjdH0gW29wdGlvbnNdXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIGFybUFuZ2xlUHJvcGVydHksIG9wdGlvbnMgKSB7XHJcblxyXG4gICAgc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcbiAgICBjb25zdCByYXRjaGV0U291bmRzID0gW1xyXG4gICAgICBuZXcgU291bmRDbGlwKCBhcm1Qb3NpdGlvbjAwMV9tcDMgKSxcclxuICAgICAgbmV3IFNvdW5kQ2xpcCggYXJtUG9zaXRpb24wMDJfbXAzICksXHJcbiAgICAgIG5ldyBTb3VuZENsaXAoIGFybVBvc2l0aW9uMDAzX21wMyApLFxyXG4gICAgICBuZXcgU291bmRDbGlwKCBhcm1Qb3NpdGlvbjAwNF9tcDMgKSxcclxuICAgICAgbmV3IFNvdW5kQ2xpcCggYXJtUG9zaXRpb24wMDVfbXAzICksXHJcbiAgICAgIG5ldyBTb3VuZENsaXAoIGFybVBvc2l0aW9uMDA2X21wMyApXHJcbiAgICBdO1xyXG5cclxuICAgIC8vIGRlZmluZSBhIGhlbHBlciBmdW5jdGlvbiB0byBwbGF5IGEgcmFuZG9tIHJhdGNoZXQgc291bmRcclxuICAgIGxldCBwcmV2aW91c1JhdGNoZXRTb3VuZEluZGV4ID0gLTE7XHJcblxyXG4gICAgY29uc3QgcGxheVJhbmRvbVJhdGNoZXRTb3VuZCA9IHBsYXliYWNrUmF0ZSA9PiB7XHJcbiAgICAgIGxldCByYXRjaGV0U291bmRJbmRleDtcclxuICAgICAgZG8ge1xyXG4gICAgICAgIHJhdGNoZXRTb3VuZEluZGV4ID0gTWF0aC5mbG9vciggZG90UmFuZG9tLm5leHREb3VibGUoKSAqIHJhdGNoZXRTb3VuZHMubGVuZ3RoICk7XHJcbiAgICAgIH0gd2hpbGUgKCByYXRjaGV0U291bmRJbmRleCA9PT0gcHJldmlvdXNSYXRjaGV0U291bmRJbmRleCApO1xyXG4gICAgICByYXRjaGV0U291bmRzWyByYXRjaGV0U291bmRJbmRleCBdLnNldFBsYXliYWNrUmF0ZSggcGxheWJhY2tSYXRlLCAxRS0zMCApO1xyXG4gICAgICByYXRjaGV0U291bmRzWyByYXRjaGV0U291bmRJbmRleCBdLnBsYXkoKTtcclxuICAgICAgcHJldmlvdXNSYXRjaGV0U291bmRJbmRleCA9IHJhdGNoZXRTb3VuZEluZGV4O1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBjb25uZWN0IHVwIHRoZSBzb3VuZCBnZW5lcmF0b3JzXHJcbiAgICByYXRjaGV0U291bmRzLmZvckVhY2goIHJhdGNoZXRTb3VuZCA9PiB7IHJhdGNoZXRTb3VuZC5jb25uZWN0KCB0aGlzLnNvdW5kU291cmNlRGVzdGluYXRpb24gKTsgfSApO1xyXG5cclxuICAgIC8vIGNyZWF0ZSB0aGUgYXJyYXkgY29udGFpbmluZyB0aGUgJ3NvdW5kIHBvaW50cycsIHdoaWNoIGFyZSB0aGUgYXJtIHBvc2l0aW9uIHdoZXJlIGEgc291bmQgc2FtcGxlIGlzIHBsYXllZFxyXG4gICAgY29uc3Qgc291bmRQb3NpdGlvbnMgPSBbXTtcclxuICAgIF8udGltZXMoIE5VTV9TT1VORF9QT1NJVElPTlMsIGluZGV4ID0+IHtcclxuICAgICAgc291bmRQb3NpdGlvbnMucHVzaCggLU1hdGguUEkgKyBpbmRleCAvIE5VTV9TT1VORF9QT1NJVElPTlMgKiBNYXRoLlBJICogMiApO1xyXG4gICAgfSApO1xyXG4gICAgY29uc3QgYmluU2l6ZSA9IDIgKiBNYXRoLlBJIC8gTlVNX1NPVU5EX1BPU0lUSU9OUztcclxuXHJcbiAgICAvLyBtb25pdG9yIHRoZSBhcm0gcHJvcGVydHksIGFkanVzdGluZyBhbmQgcGxheWluZyBzb3VuZHMgYXMgYXBwcm9wcmlhdGVcclxuICAgIGxldCBwcmV2aW91c0FuZ2xlID0gbnVsbDtcclxuICAgIGFybUFuZ2xlUHJvcGVydHkubGF6eUxpbmsoIGFuZ2xlID0+IHtcclxuXHJcbiAgICAgIGxldCBudW1DbGlja1NvdW5kc1RvUGxheSA9IDA7XHJcblxyXG4gICAgICAvLyBkZXRlcm1pbmUgaWYgdGhlIG5ldyBhbmdsZSBjcm9zc2VkIG92ZXIgb25lIG9yIG1vcmUgJ3NvdW5kIHBvaW50cycgc2luY2UgdGhlIGxhc3QgYW5nbGVcclxuICAgICAgaWYgKCB0aGlzLmZ1bGx5RW5hYmxlZFByb3BlcnR5LnZhbHVlICYmIHByZXZpb3VzQW5nbGUgIT09IG51bGwgKSB7XHJcbiAgICAgICAgbnVtQ2xpY2tTb3VuZHNUb1BsYXkgPSBNYXRoLmFicyggTWF0aC5mbG9vciggcHJldmlvdXNBbmdsZSAvIGJpblNpemUgKSAtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5mbG9vciggYW5nbGUgLyBiaW5TaXplICkgKTtcclxuICAgICAgICAvLyBUT0RPOiBUaGlzIGlzIGEgdGVtcG9yYXJ5IHdvcmthcm91bmQgZm9yIGFuIGlzc3VlIHdoZXJlIHRoZSBhbmdsZSBzZWVtcyB0byBzd2l0Y2ggZnJvbSArIHRvIC0gYXQgYW4gb2RkIHBsYWNlXHJcbiAgICAgICAgaWYgKCBudW1DbGlja1NvdW5kc1RvUGxheSA+IE5VTV9TT1VORF9QT1NJVElPTlMgLyAyICkge1xyXG4gICAgICAgICAgbnVtQ2xpY2tTb3VuZHNUb1BsYXkgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gcGxheSB0aGUgc291bmRzIHRoYXQgaW5kaWNhdGUgdGhlIG1vdGlvbiwgYnV0IGxpbWl0IGl0IGluIHRoZSBjYXNlIG9mIHJlYWxseSBsYXJnZSBjaGFuZ2VzXHJcbiAgICAgIGxldCBhbmd1bGFyRGlzdGFuY2VGcm9tS25vYiA9IE1hdGguYWJzKCBBTkdMRV9PRl9ISUdIRVNUX1BJVENIIC0gYW5nbGUgKTtcclxuICAgICAgaWYgKCBhbmd1bGFyRGlzdGFuY2VGcm9tS25vYiA+IE1hdGguUEkgKSB7XHJcbiAgICAgICAgYW5ndWxhckRpc3RhbmNlRnJvbUtub2IgPSBNYXRoLlBJIC0gYW5ndWxhckRpc3RhbmNlRnJvbUtub2IgJSBNYXRoLlBJO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHBsYXliYWNrUmF0ZSA9IDAuNzUgKyAwLjc1ICogKCAxIC0gYW5ndWxhckRpc3RhbmNlRnJvbUtub2IgLyBNYXRoLlBJICk7XHJcbiAgICAgIF8udGltZXMoIE1hdGgubWluKCBudW1DbGlja1NvdW5kc1RvUGxheSwgTUFYX1NPVU5EU19QRVJfSVRFUkFUSU9OICksICgpID0+IHtcclxuICAgICAgICBwbGF5UmFuZG9tUmF0Y2hldFNvdW5kKCBwbGF5YmFja1JhdGUgKTtcclxuICAgICAgfSApO1xyXG5cclxuICAgICAgLy8gc2F2ZSB0aGUgYW5nbGUgZm9yIHRoZSBuZXh0IHRpbWUgdGhyb3VnaFxyXG4gICAgICBwcmV2aW91c0FuZ2xlID0gYW5nbGU7XHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxufVxyXG5cclxuam9oblRyYXZvbHRhZ2UucmVnaXN0ZXIoICdBcm1Qb3NpdGlvblNvdW5kR2VuZXJhdG9yJywgQXJtUG9zaXRpb25Tb3VuZEdlbmVyYXRvciApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgQXJtUG9zaXRpb25Tb3VuZEdlbmVyYXRvcjsiXSwibWFwcGluZ3Mi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