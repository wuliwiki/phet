// Copyright 2022, University of Colorado Boulder
/**
 * Representation for the Intro Screen, displaying 2D/3D water cups, pipes, and various interactive options.
 *
 * @author Marla Schulz (PhET Interactive Simulations)
 * @author Sam Reid (PhET Interactive Simulations)
 */

import MeanShareAndBalanceScreenView from '../../common/view/MeanShareAndBalanceScreenView.js';
import { AlignBox, Node } from '../../../../scenery/js/imports.js';
import Property from '../../../../axon/js/Property.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import ModelViewTransform2 from '../../../../phetcommon/js/view/ModelViewTransform2.js';
import MeanShareAndBalanceStrings from '../../MeanShareAndBalanceStrings.js';
import WaterCup2DNode from './WaterCup2DNode.js';
import meanShareAndBalance from '../../meanShareAndBalance.js';
import PredictMeanSlider from './PredictMeanSlider.js';
import PipeNode from './PipeNode.js';
import WaterCup3DNode from './WaterCup3DNode.js';
import MeanShareAndBalanceConstants from '../../common/MeanShareAndBalanceConstants.js';
import MeanShareAndBalanceColors from '../../common/MeanShareAndBalanceColors.js';
import IntroControlPanel from './IntroControlPanel.js';
import TableNode from '../../common/view/TableNode.js';
import Bounds2 from '../../../../dot/js/Bounds2.js';
import { Shape } from '../../../../kite/js/imports.js';
import NoteBookPaperNode from '../../common/view/NoteBookPaperNode.js';
export default class IntroScreenView extends MeanShareAndBalanceScreenView {
  constructor(model, providedOptions) {
    const options = providedOptions;
    const modelViewTransform2DCups = ModelViewTransform2.createSinglePointScaleInvertedYMapping(new Vector2(0, 0), new Vector2(0, MeanShareAndBalanceConstants.CUPS_2D_CENTER_Y), MeanShareAndBalanceConstants.CUP_HEIGHT);
    const modelViewTransform3DCups = ModelViewTransform2.createSinglePointScaleInvertedYMapping(new Vector2(0, 0), new Vector2(0, MeanShareAndBalanceConstants.CUPS_3D_CENTER_Y), MeanShareAndBalanceConstants.CUP_HEIGHT);

    //Predict Mean Line that acts as a slider for alternative input.
    const predictMeanSlider = new PredictMeanSlider(model.meanPredictionProperty, model.dragRange, model.numberOfCupsProperty, () => model.getActive2DCups(), modelViewTransform2DCups, {
      visibleProperty: model.predictMeanVisibleProperty,
      valueProperty: model.meanPredictionProperty,
      // Constant range
      enabledRangeProperty: new Property(model.dragRange),
      // phet-io
      tandem: options.tandem.createTandem('predictMeanSlider'),
      phetioDocumentation: 'Line user can drag to predict water level mean.'
    });
    const waterCups2DParentTandem = options.tandem.createTandem('waterCups2D');
    const waterCups3DParentTandem = options.tandem.createTandem('waterCups3D');
    const pipesParentTandem = options.tandem.createTandem('pipes');
    // Add all cup nodes to the view
    const waterCup2DNodes = [];
    model.waterCup2DArray.forEach((cupModel, index) => {
      const cupNode = new WaterCup2DNode(cupModel, model.waterCup3DArray[index], modelViewTransform2DCups, model.meanProperty, model.tickMarksVisibleProperty, model.meanVisibleProperty, model.cupLevelVisibleProperty, {
        tandem: waterCups2DParentTandem.createTandem(`waterCup2DNode${cupModel.linePlacement + 1}`)
      });
      waterCup2DNodes.push(cupNode);
    });
    const waterCup3DNodes = [];
    model.waterCup3DArray.forEach(cupModel => {
      const cupNode = new WaterCup3DNode(model.tickMarksVisibleProperty, model, cupModel, modelViewTransform3DCups, {
        tandem: waterCups3DParentTandem.createTandem(`waterCup3DNode${cupModel.linePlacement + 1}`)
      });
      waterCup3DNodes.push(cupNode);
    });

    // Add all pipe nodes to the view
    const pipeNodes = [];
    model.pipeArray.forEach(pipeModel => {
      const index = model.pipeArray.indexOf(pipeModel);
      const pipeNode = new PipeNode(pipeModel, model.arePipesOpenProperty, modelViewTransform2DCups, {
        tandem: pipesParentTandem.createTandem(`pipeNode${index + 1}`),
        focusable: index === 0
      });
      pipeNodes.push(pipeNode);
    });

    // This also includes the pipes that connect the 2D cups as well as the draggable water level triangle
    const waterCupLayerNode = new Node({
      excludeInvisibleChildrenFromBounds: true,
      children: [...waterCup2DNodes, ...waterCup3DNodes, ...pipeNodes]
    });
    const notebookPaper = new NoteBookPaperNode();
    const tableNode = new TableNode({
      centerX: waterCupLayerNode.centerX
    });

    // Instantiate Parent
    super(model, MeanShareAndBalanceStrings.introQuestionStringProperty, MeanShareAndBalanceColors.introQuestionBarColorProperty, options);

    // Controls on Right side of screen
    const controlPanel = new IntroControlPanel(model.tickMarksVisibleProperty, model.meanVisibleProperty, model.predictMeanVisibleProperty, model.cupLevelVisibleProperty, model.numberOfCupsProperty, model.arePipesOpenProperty, {
      minContentWidth: MeanShareAndBalanceConstants.MAX_CONTROLS_TEXT_WIDTH + 25,
      spacing: 20,
      tandem: options.tandem.createTandem('controlPanel')
    });
    const playAreaBounds = new Bounds2(this.layoutBounds.minX, this.layoutBounds.minY + this.questionBar.height, this.layoutBounds.maxX, this.layoutBounds.maxY);
    const controlsAlignBox = new AlignBox(controlPanel, {
      alignBounds: playAreaBounds,
      xAlign: 'right',
      yAlign: 'top',
      rightMargin: MeanShareAndBalanceConstants.CONTROLS_HORIZONTAL_MARGIN,
      topMargin: MeanShareAndBalanceConstants.CONTROLS_VERTICAL_MARGIN
    });
    this.addChild(controlsAlignBox);

    // Center waterCups as they are activated and de-activated
    const checkboxGroupWidthOffset = (MeanShareAndBalanceConstants.MAX_CONTROLS_TEXT_WIDTH + MeanShareAndBalanceConstants.CONTROLS_HORIZONTAL_MARGIN) / 2;
    const cupsAreaCenterX = this.layoutBounds.centerX - checkboxGroupWidthOffset;
    const centerWaterCupLayerNode = () => {
      waterCupLayerNode.centerX = cupsAreaCenterX;
      predictMeanSlider.x = waterCupLayerNode.x - 12.5;
      tableNode.centerX = waterCupLayerNode.centerX - 10;
      notebookPaper.centerX = waterCupLayerNode.centerX - 10;
      tableNode.y = waterCupLayerNode.bottom - 30;

      // Create a focus highlight that surrounds all the valves. Only the first valve is in the traversal
      // order and they all do the same thing so this highlight indicates that there will only be one stop in the
      // traversal order.
      const pipeBoundsShapes = pipeNodes.filter(pipe => pipe.visibleProperty.value).map(pipe => Shape.bounds(pipe.globalBounds));
      const transformedPipeShapeBounds = Shape.union(pipeBoundsShapes).transformed(pipeNodes[0].getGlobalToLocalMatrix());

      // Focus highlight is set on the valveNode because it is what receives focus (not the PipeNode).
      pipeNodes[0].focusHighlight = transformedPipeShapeBounds;
    };
    model.numberOfCupsProperty.link(() => {
      centerWaterCupLayerNode();
      waterCupLayerNode.interruptSubtreeInput();
    });
    this.screenViewRootNode.addChild(notebookPaper);
    this.screenViewRootNode.addChild(tableNode);
    this.screenViewRootNode.addChild(waterCupLayerNode);
    this.screenViewRootNode.addChild(predictMeanSlider);
    this.screenViewRootNode.pdomOrder = [...waterCup3DNodes, pipeNodes[0], predictMeanSlider, controlPanel, this.resetAllButton];
  }
  reset() {
    super.reset();
  }
}
meanShareAndBalance.register('IntroScreenView', IntroScreenView);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNZWFuU2hhcmVBbmRCYWxhbmNlU2NyZWVuVmlldyIsIkFsaWduQm94IiwiTm9kZSIsIlByb3BlcnR5IiwiVmVjdG9yMiIsIk1vZGVsVmlld1RyYW5zZm9ybTIiLCJNZWFuU2hhcmVBbmRCYWxhbmNlU3RyaW5ncyIsIldhdGVyQ3VwMkROb2RlIiwibWVhblNoYXJlQW5kQmFsYW5jZSIsIlByZWRpY3RNZWFuU2xpZGVyIiwiUGlwZU5vZGUiLCJXYXRlckN1cDNETm9kZSIsIk1lYW5TaGFyZUFuZEJhbGFuY2VDb25zdGFudHMiLCJNZWFuU2hhcmVBbmRCYWxhbmNlQ29sb3JzIiwiSW50cm9Db250cm9sUGFuZWwiLCJUYWJsZU5vZGUiLCJCb3VuZHMyIiwiU2hhcGUiLCJOb3RlQm9va1BhcGVyTm9kZSIsIkludHJvU2NyZWVuVmlldyIsImNvbnN0cnVjdG9yIiwibW9kZWwiLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwibW9kZWxWaWV3VHJhbnNmb3JtMkRDdXBzIiwiY3JlYXRlU2luZ2xlUG9pbnRTY2FsZUludmVydGVkWU1hcHBpbmciLCJDVVBTXzJEX0NFTlRFUl9ZIiwiQ1VQX0hFSUdIVCIsIm1vZGVsVmlld1RyYW5zZm9ybTNEQ3VwcyIsIkNVUFNfM0RfQ0VOVEVSX1kiLCJwcmVkaWN0TWVhblNsaWRlciIsIm1lYW5QcmVkaWN0aW9uUHJvcGVydHkiLCJkcmFnUmFuZ2UiLCJudW1iZXJPZkN1cHNQcm9wZXJ0eSIsImdldEFjdGl2ZTJEQ3VwcyIsInZpc2libGVQcm9wZXJ0eSIsInByZWRpY3RNZWFuVmlzaWJsZVByb3BlcnR5IiwidmFsdWVQcm9wZXJ0eSIsImVuYWJsZWRSYW5nZVByb3BlcnR5IiwidGFuZGVtIiwiY3JlYXRlVGFuZGVtIiwicGhldGlvRG9jdW1lbnRhdGlvbiIsIndhdGVyQ3VwczJEUGFyZW50VGFuZGVtIiwid2F0ZXJDdXBzM0RQYXJlbnRUYW5kZW0iLCJwaXBlc1BhcmVudFRhbmRlbSIsIndhdGVyQ3VwMkROb2RlcyIsIndhdGVyQ3VwMkRBcnJheSIsImZvckVhY2giLCJjdXBNb2RlbCIsImluZGV4IiwiY3VwTm9kZSIsIndhdGVyQ3VwM0RBcnJheSIsIm1lYW5Qcm9wZXJ0eSIsInRpY2tNYXJrc1Zpc2libGVQcm9wZXJ0eSIsIm1lYW5WaXNpYmxlUHJvcGVydHkiLCJjdXBMZXZlbFZpc2libGVQcm9wZXJ0eSIsImxpbmVQbGFjZW1lbnQiLCJwdXNoIiwid2F0ZXJDdXAzRE5vZGVzIiwicGlwZU5vZGVzIiwicGlwZUFycmF5IiwicGlwZU1vZGVsIiwiaW5kZXhPZiIsInBpcGVOb2RlIiwiYXJlUGlwZXNPcGVuUHJvcGVydHkiLCJmb2N1c2FibGUiLCJ3YXRlckN1cExheWVyTm9kZSIsImV4Y2x1ZGVJbnZpc2libGVDaGlsZHJlbkZyb21Cb3VuZHMiLCJjaGlsZHJlbiIsIm5vdGVib29rUGFwZXIiLCJ0YWJsZU5vZGUiLCJjZW50ZXJYIiwiaW50cm9RdWVzdGlvblN0cmluZ1Byb3BlcnR5IiwiaW50cm9RdWVzdGlvbkJhckNvbG9yUHJvcGVydHkiLCJjb250cm9sUGFuZWwiLCJtaW5Db250ZW50V2lkdGgiLCJNQVhfQ09OVFJPTFNfVEVYVF9XSURUSCIsInNwYWNpbmciLCJwbGF5QXJlYUJvdW5kcyIsImxheW91dEJvdW5kcyIsIm1pblgiLCJtaW5ZIiwicXVlc3Rpb25CYXIiLCJoZWlnaHQiLCJtYXhYIiwibWF4WSIsImNvbnRyb2xzQWxpZ25Cb3giLCJhbGlnbkJvdW5kcyIsInhBbGlnbiIsInlBbGlnbiIsInJpZ2h0TWFyZ2luIiwiQ09OVFJPTFNfSE9SSVpPTlRBTF9NQVJHSU4iLCJ0b3BNYXJnaW4iLCJDT05UUk9MU19WRVJUSUNBTF9NQVJHSU4iLCJhZGRDaGlsZCIsImNoZWNrYm94R3JvdXBXaWR0aE9mZnNldCIsImN1cHNBcmVhQ2VudGVyWCIsImNlbnRlcldhdGVyQ3VwTGF5ZXJOb2RlIiwieCIsInkiLCJib3R0b20iLCJwaXBlQm91bmRzU2hhcGVzIiwiZmlsdGVyIiwicGlwZSIsInZhbHVlIiwibWFwIiwiYm91bmRzIiwiZ2xvYmFsQm91bmRzIiwidHJhbnNmb3JtZWRQaXBlU2hhcGVCb3VuZHMiLCJ1bmlvbiIsInRyYW5zZm9ybWVkIiwiZ2V0R2xvYmFsVG9Mb2NhbE1hdHJpeCIsImZvY3VzSGlnaGxpZ2h0IiwibGluayIsImludGVycnVwdFN1YnRyZWVJbnB1dCIsInNjcmVlblZpZXdSb290Tm9kZSIsInBkb21PcmRlciIsInJlc2V0QWxsQnV0dG9uIiwicmVzZXQiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkludHJvU2NyZWVuVmlldy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRhdGlvbiBmb3IgdGhlIEludHJvIFNjcmVlbiwgZGlzcGxheWluZyAyRC8zRCB3YXRlciBjdXBzLCBwaXBlcywgYW5kIHZhcmlvdXMgaW50ZXJhY3RpdmUgb3B0aW9ucy5cclxuICpcclxuICogQGF1dGhvciBNYXJsYSBTY2h1bHogKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IE1lYW5TaGFyZUFuZEJhbGFuY2VTY3JlZW5WaWV3LCB7IE1lYW5TaGFyZUFuZEJhbGFuY2VTY3JlZW5WaWV3T3B0aW9ucyB9IGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L01lYW5TaGFyZUFuZEJhbGFuY2VTY3JlZW5WaWV3LmpzJztcclxuaW1wb3J0IHsgQWxpZ25Cb3gsIE5vZGUgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgSW50cm9Nb2RlbCBmcm9tICcuLi9tb2RlbC9JbnRyb01vZGVsLmpzJztcclxuaW1wb3J0IFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVmVjdG9yMi5qcyc7XHJcbmltcG9ydCBNb2RlbFZpZXdUcmFuc2Zvcm0yIGZyb20gJy4uLy4uLy4uLy4uL3BoZXRjb21tb24vanMvdmlldy9Nb2RlbFZpZXdUcmFuc2Zvcm0yLmpzJztcclxuaW1wb3J0IE1lYW5TaGFyZUFuZEJhbGFuY2VTdHJpbmdzIGZyb20gJy4uLy4uL01lYW5TaGFyZUFuZEJhbGFuY2VTdHJpbmdzLmpzJztcclxuaW1wb3J0IFdhdGVyQ3VwMkROb2RlIGZyb20gJy4vV2F0ZXJDdXAyRE5vZGUuanMnO1xyXG5pbXBvcnQgbWVhblNoYXJlQW5kQmFsYW5jZSBmcm9tICcuLi8uLi9tZWFuU2hhcmVBbmRCYWxhbmNlLmpzJztcclxuaW1wb3J0IFByZWRpY3RNZWFuU2xpZGVyIGZyb20gJy4vUHJlZGljdE1lYW5TbGlkZXIuanMnO1xyXG5pbXBvcnQgUGlwZU5vZGUgZnJvbSAnLi9QaXBlTm9kZS5qcyc7XHJcbmltcG9ydCBXYXRlckN1cDNETm9kZSBmcm9tICcuL1dhdGVyQ3VwM0ROb2RlLmpzJztcclxuaW1wb3J0IE1lYW5TaGFyZUFuZEJhbGFuY2VDb25zdGFudHMgZnJvbSAnLi4vLi4vY29tbW9uL01lYW5TaGFyZUFuZEJhbGFuY2VDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgTWVhblNoYXJlQW5kQmFsYW5jZUNvbG9ycyBmcm9tICcuLi8uLi9jb21tb24vTWVhblNoYXJlQW5kQmFsYW5jZUNvbG9ycy5qcyc7XHJcbmltcG9ydCBJbnRyb0NvbnRyb2xQYW5lbCBmcm9tICcuL0ludHJvQ29udHJvbFBhbmVsLmpzJztcclxuaW1wb3J0IFRhYmxlTm9kZSBmcm9tICcuLi8uLi9jb21tb24vdmlldy9UYWJsZU5vZGUuanMnO1xyXG5pbXBvcnQgeyBTY3JlZW5WaWV3T3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL2pvaXN0L2pzL1NjcmVlblZpZXcuanMnO1xyXG5pbXBvcnQgQm91bmRzMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvQm91bmRzMi5qcyc7XHJcbmltcG9ydCBTdHJpY3RPbWl0IGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9TdHJpY3RPbWl0LmpzJztcclxuaW1wb3J0IFBpY2tSZXF1aXJlZCBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvUGlja1JlcXVpcmVkLmpzJztcclxuaW1wb3J0IHsgU2hhcGUgfSBmcm9tICcuLi8uLi8uLi8uLi9raXRlL2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgTm90ZUJvb2tQYXBlck5vZGUgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvTm90ZUJvb2tQYXBlck5vZGUuanMnO1xyXG5cclxuXHJcbnR5cGUgTGV2ZWxpbmdPdXRTY3JlZW5WaWV3T3B0aW9ucyA9IFBpY2tSZXF1aXJlZDxNZWFuU2hhcmVBbmRCYWxhbmNlU2NyZWVuVmlld09wdGlvbnMsICd0YW5kZW0nPiAmIFN0cmljdE9taXQ8U2NyZWVuVmlld09wdGlvbnMsICdjaGlsZHJlbic+O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW50cm9TY3JlZW5WaWV3IGV4dGVuZHMgTWVhblNoYXJlQW5kQmFsYW5jZVNjcmVlblZpZXcge1xyXG5cclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBtb2RlbDogSW50cm9Nb2RlbCwgcHJvdmlkZWRPcHRpb25zOiBMZXZlbGluZ091dFNjcmVlblZpZXdPcHRpb25zICkge1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnMgPSBwcm92aWRlZE9wdGlvbnM7XHJcblxyXG5cclxuICAgIGNvbnN0IG1vZGVsVmlld1RyYW5zZm9ybTJEQ3VwcyA9IE1vZGVsVmlld1RyYW5zZm9ybTIuY3JlYXRlU2luZ2xlUG9pbnRTY2FsZUludmVydGVkWU1hcHBpbmcoIG5ldyBWZWN0b3IyKCAwLCAwICksIG5ldyBWZWN0b3IyKCAwLCBNZWFuU2hhcmVBbmRCYWxhbmNlQ29uc3RhbnRzLkNVUFNfMkRfQ0VOVEVSX1kgKSwgTWVhblNoYXJlQW5kQmFsYW5jZUNvbnN0YW50cy5DVVBfSEVJR0hUICk7XHJcbiAgICBjb25zdCBtb2RlbFZpZXdUcmFuc2Zvcm0zREN1cHMgPSBNb2RlbFZpZXdUcmFuc2Zvcm0yLmNyZWF0ZVNpbmdsZVBvaW50U2NhbGVJbnZlcnRlZFlNYXBwaW5nKCBuZXcgVmVjdG9yMiggMCwgMCApLCBuZXcgVmVjdG9yMiggMCwgTWVhblNoYXJlQW5kQmFsYW5jZUNvbnN0YW50cy5DVVBTXzNEX0NFTlRFUl9ZICksIE1lYW5TaGFyZUFuZEJhbGFuY2VDb25zdGFudHMuQ1VQX0hFSUdIVCApO1xyXG5cclxuICAgIC8vUHJlZGljdCBNZWFuIExpbmUgdGhhdCBhY3RzIGFzIGEgc2xpZGVyIGZvciBhbHRlcm5hdGl2ZSBpbnB1dC5cclxuICAgIGNvbnN0IHByZWRpY3RNZWFuU2xpZGVyID0gbmV3IFByZWRpY3RNZWFuU2xpZGVyKFxyXG4gICAgICBtb2RlbC5tZWFuUHJlZGljdGlvblByb3BlcnR5LCBtb2RlbC5kcmFnUmFuZ2UsXHJcbiAgICAgIG1vZGVsLm51bWJlck9mQ3Vwc1Byb3BlcnR5LCAoKSA9PiBtb2RlbC5nZXRBY3RpdmUyREN1cHMoKSxcclxuICAgICAgbW9kZWxWaWV3VHJhbnNmb3JtMkRDdXBzLCB7XHJcbiAgICAgICAgdmlzaWJsZVByb3BlcnR5OiBtb2RlbC5wcmVkaWN0TWVhblZpc2libGVQcm9wZXJ0eSxcclxuICAgICAgICB2YWx1ZVByb3BlcnR5OiBtb2RlbC5tZWFuUHJlZGljdGlvblByb3BlcnR5LFxyXG5cclxuICAgICAgICAvLyBDb25zdGFudCByYW5nZVxyXG4gICAgICAgIGVuYWJsZWRSYW5nZVByb3BlcnR5OiBuZXcgUHJvcGVydHkoIG1vZGVsLmRyYWdSYW5nZSApLFxyXG5cclxuICAgICAgICAvLyBwaGV0LWlvXHJcbiAgICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdwcmVkaWN0TWVhblNsaWRlcicgKSxcclxuICAgICAgICBwaGV0aW9Eb2N1bWVudGF0aW9uOiAnTGluZSB1c2VyIGNhbiBkcmFnIHRvIHByZWRpY3Qgd2F0ZXIgbGV2ZWwgbWVhbi4nXHJcbiAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgY29uc3Qgd2F0ZXJDdXBzMkRQYXJlbnRUYW5kZW0gPSBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICd3YXRlckN1cHMyRCcgKTtcclxuICAgIGNvbnN0IHdhdGVyQ3VwczNEUGFyZW50VGFuZGVtID0gb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnd2F0ZXJDdXBzM0QnICk7XHJcbiAgICBjb25zdCBwaXBlc1BhcmVudFRhbmRlbSA9IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3BpcGVzJyApO1xyXG4gICAgLy8gQWRkIGFsbCBjdXAgbm9kZXMgdG8gdGhlIHZpZXdcclxuICAgIGNvbnN0IHdhdGVyQ3VwMkROb2RlczogQXJyYXk8V2F0ZXJDdXAyRE5vZGU+ID0gW107XHJcbiAgICBtb2RlbC53YXRlckN1cDJEQXJyYXkuZm9yRWFjaCggKCBjdXBNb2RlbCwgaW5kZXggKSA9PiB7XHJcbiAgICAgIGNvbnN0IGN1cE5vZGUgPSBuZXcgV2F0ZXJDdXAyRE5vZGUoIGN1cE1vZGVsLCBtb2RlbC53YXRlckN1cDNEQXJyYXlbIGluZGV4IF0sIG1vZGVsVmlld1RyYW5zZm9ybTJEQ3VwcywgbW9kZWwubWVhblByb3BlcnR5LCBtb2RlbC50aWNrTWFya3NWaXNpYmxlUHJvcGVydHksXHJcbiAgICAgICAgbW9kZWwubWVhblZpc2libGVQcm9wZXJ0eSwgbW9kZWwuY3VwTGV2ZWxWaXNpYmxlUHJvcGVydHksIHsgdGFuZGVtOiB3YXRlckN1cHMyRFBhcmVudFRhbmRlbS5jcmVhdGVUYW5kZW0oIGB3YXRlckN1cDJETm9kZSR7Y3VwTW9kZWwubGluZVBsYWNlbWVudCArIDF9YCApIH0gKTtcclxuICAgICAgd2F0ZXJDdXAyRE5vZGVzLnB1c2goIGN1cE5vZGUgKTtcclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCB3YXRlckN1cDNETm9kZXM6IEFycmF5PFdhdGVyQ3VwM0ROb2RlPiA9IFtdO1xyXG4gICAgbW9kZWwud2F0ZXJDdXAzREFycmF5LmZvckVhY2goIGN1cE1vZGVsID0+IHtcclxuICAgICAgY29uc3QgY3VwTm9kZSA9IG5ldyBXYXRlckN1cDNETm9kZSggbW9kZWwudGlja01hcmtzVmlzaWJsZVByb3BlcnR5LCBtb2RlbCwgY3VwTW9kZWwsIG1vZGVsVmlld1RyYW5zZm9ybTNEQ3Vwcywge1xyXG4gICAgICAgIHRhbmRlbTogd2F0ZXJDdXBzM0RQYXJlbnRUYW5kZW0uY3JlYXRlVGFuZGVtKCBgd2F0ZXJDdXAzRE5vZGUke2N1cE1vZGVsLmxpbmVQbGFjZW1lbnQgKyAxfWAgKVxyXG4gICAgICB9ICk7XHJcbiAgICAgIHdhdGVyQ3VwM0ROb2Rlcy5wdXNoKCBjdXBOb2RlICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gQWRkIGFsbCBwaXBlIG5vZGVzIHRvIHRoZSB2aWV3XHJcbiAgICBjb25zdCBwaXBlTm9kZXM6IEFycmF5PFBpcGVOb2RlPiA9IFtdO1xyXG4gICAgbW9kZWwucGlwZUFycmF5LmZvckVhY2goIHBpcGVNb2RlbCA9PiB7XHJcbiAgICAgIGNvbnN0IGluZGV4ID0gbW9kZWwucGlwZUFycmF5LmluZGV4T2YoIHBpcGVNb2RlbCApO1xyXG4gICAgICBjb25zdCBwaXBlTm9kZSA9IG5ldyBQaXBlTm9kZSggcGlwZU1vZGVsLCBtb2RlbC5hcmVQaXBlc09wZW5Qcm9wZXJ0eSwgbW9kZWxWaWV3VHJhbnNmb3JtMkRDdXBzLFxyXG4gICAgICAgIHsgdGFuZGVtOiBwaXBlc1BhcmVudFRhbmRlbS5jcmVhdGVUYW5kZW0oIGBwaXBlTm9kZSR7aW5kZXggKyAxfWAgKSwgZm9jdXNhYmxlOiBpbmRleCA9PT0gMCB9ICk7XHJcblxyXG4gICAgICBwaXBlTm9kZXMucHVzaCggcGlwZU5vZGUgKTtcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBUaGlzIGFsc28gaW5jbHVkZXMgdGhlIHBpcGVzIHRoYXQgY29ubmVjdCB0aGUgMkQgY3VwcyBhcyB3ZWxsIGFzIHRoZSBkcmFnZ2FibGUgd2F0ZXIgbGV2ZWwgdHJpYW5nbGVcclxuICAgIGNvbnN0IHdhdGVyQ3VwTGF5ZXJOb2RlID0gbmV3IE5vZGUoIHtcclxuICAgICAgZXhjbHVkZUludmlzaWJsZUNoaWxkcmVuRnJvbUJvdW5kczogdHJ1ZSxcclxuICAgICAgY2hpbGRyZW46IFsgLi4ud2F0ZXJDdXAyRE5vZGVzLCAuLi53YXRlckN1cDNETm9kZXMsIC4uLnBpcGVOb2RlcyBdXHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3Qgbm90ZWJvb2tQYXBlciA9IG5ldyBOb3RlQm9va1BhcGVyTm9kZSgpO1xyXG5cclxuICAgIGNvbnN0IHRhYmxlTm9kZSA9IG5ldyBUYWJsZU5vZGUoIHsgY2VudGVyWDogd2F0ZXJDdXBMYXllck5vZGUuY2VudGVyWCB9ICk7XHJcblxyXG4gICAgLy8gSW5zdGFudGlhdGUgUGFyZW50XHJcbiAgICBzdXBlciggbW9kZWwsIE1lYW5TaGFyZUFuZEJhbGFuY2VTdHJpbmdzLmludHJvUXVlc3Rpb25TdHJpbmdQcm9wZXJ0eSwgTWVhblNoYXJlQW5kQmFsYW5jZUNvbG9ycy5pbnRyb1F1ZXN0aW9uQmFyQ29sb3JQcm9wZXJ0eSwgb3B0aW9ucyApO1xyXG5cclxuICAgIC8vIENvbnRyb2xzIG9uIFJpZ2h0IHNpZGUgb2Ygc2NyZWVuXHJcbiAgICBjb25zdCBjb250cm9sUGFuZWwgPSBuZXcgSW50cm9Db250cm9sUGFuZWwoIG1vZGVsLnRpY2tNYXJrc1Zpc2libGVQcm9wZXJ0eSwgbW9kZWwubWVhblZpc2libGVQcm9wZXJ0eSwgbW9kZWwucHJlZGljdE1lYW5WaXNpYmxlUHJvcGVydHksXHJcbiAgICAgIG1vZGVsLmN1cExldmVsVmlzaWJsZVByb3BlcnR5LCBtb2RlbC5udW1iZXJPZkN1cHNQcm9wZXJ0eSwgbW9kZWwuYXJlUGlwZXNPcGVuUHJvcGVydHksXHJcbiAgICAgIHsgbWluQ29udGVudFdpZHRoOiBNZWFuU2hhcmVBbmRCYWxhbmNlQ29uc3RhbnRzLk1BWF9DT05UUk9MU19URVhUX1dJRFRIICsgMjUsIHNwYWNpbmc6IDIwLCB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2NvbnRyb2xQYW5lbCcgKSB9ICk7XHJcblxyXG5cclxuICAgIGNvbnN0IHBsYXlBcmVhQm91bmRzID0gbmV3IEJvdW5kczIoIHRoaXMubGF5b3V0Qm91bmRzLm1pblgsIHRoaXMubGF5b3V0Qm91bmRzLm1pblkgKyB0aGlzLnF1ZXN0aW9uQmFyLmhlaWdodCxcclxuICAgICAgdGhpcy5sYXlvdXRCb3VuZHMubWF4WCwgdGhpcy5sYXlvdXRCb3VuZHMubWF4WSApO1xyXG5cclxuICAgIGNvbnN0IGNvbnRyb2xzQWxpZ25Cb3ggPSBuZXcgQWxpZ25Cb3goIGNvbnRyb2xQYW5lbCwge1xyXG4gICAgICBhbGlnbkJvdW5kczogcGxheUFyZWFCb3VuZHMsXHJcbiAgICAgIHhBbGlnbjogJ3JpZ2h0JyxcclxuICAgICAgeUFsaWduOiAndG9wJyxcclxuICAgICAgcmlnaHRNYXJnaW46IE1lYW5TaGFyZUFuZEJhbGFuY2VDb25zdGFudHMuQ09OVFJPTFNfSE9SSVpPTlRBTF9NQVJHSU4sXHJcbiAgICAgIHRvcE1hcmdpbjogTWVhblNoYXJlQW5kQmFsYW5jZUNvbnN0YW50cy5DT05UUk9MU19WRVJUSUNBTF9NQVJHSU5cclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLmFkZENoaWxkKCBjb250cm9sc0FsaWduQm94ICk7XHJcblxyXG4gICAgLy8gQ2VudGVyIHdhdGVyQ3VwcyBhcyB0aGV5IGFyZSBhY3RpdmF0ZWQgYW5kIGRlLWFjdGl2YXRlZFxyXG4gICAgY29uc3QgY2hlY2tib3hHcm91cFdpZHRoT2Zmc2V0ID0gKCBNZWFuU2hhcmVBbmRCYWxhbmNlQ29uc3RhbnRzLk1BWF9DT05UUk9MU19URVhUX1dJRFRIICsgTWVhblNoYXJlQW5kQmFsYW5jZUNvbnN0YW50cy5DT05UUk9MU19IT1JJWk9OVEFMX01BUkdJTiApIC8gMjtcclxuICAgIGNvbnN0IGN1cHNBcmVhQ2VudGVyWCA9IHRoaXMubGF5b3V0Qm91bmRzLmNlbnRlclggLSBjaGVja2JveEdyb3VwV2lkdGhPZmZzZXQ7XHJcblxyXG4gICAgY29uc3QgY2VudGVyV2F0ZXJDdXBMYXllck5vZGUgPSAoKSA9PiB7XHJcbiAgICAgIHdhdGVyQ3VwTGF5ZXJOb2RlLmNlbnRlclggPSBjdXBzQXJlYUNlbnRlclg7XHJcbiAgICAgIHByZWRpY3RNZWFuU2xpZGVyLnggPSB3YXRlckN1cExheWVyTm9kZS54IC0gMTIuNTtcclxuICAgICAgdGFibGVOb2RlLmNlbnRlclggPSB3YXRlckN1cExheWVyTm9kZS5jZW50ZXJYIC0gMTA7XHJcbiAgICAgIG5vdGVib29rUGFwZXIuY2VudGVyWCA9IHdhdGVyQ3VwTGF5ZXJOb2RlLmNlbnRlclggLSAxMDtcclxuICAgICAgdGFibGVOb2RlLnkgPSB3YXRlckN1cExheWVyTm9kZS5ib3R0b20gLSAzMDtcclxuXHJcbiAgICAgIC8vIENyZWF0ZSBhIGZvY3VzIGhpZ2hsaWdodCB0aGF0IHN1cnJvdW5kcyBhbGwgdGhlIHZhbHZlcy4gT25seSB0aGUgZmlyc3QgdmFsdmUgaXMgaW4gdGhlIHRyYXZlcnNhbFxyXG4gICAgICAvLyBvcmRlciBhbmQgdGhleSBhbGwgZG8gdGhlIHNhbWUgdGhpbmcgc28gdGhpcyBoaWdobGlnaHQgaW5kaWNhdGVzIHRoYXQgdGhlcmUgd2lsbCBvbmx5IGJlIG9uZSBzdG9wIGluIHRoZVxyXG4gICAgICAvLyB0cmF2ZXJzYWwgb3JkZXIuXHJcbiAgICAgIGNvbnN0IHBpcGVCb3VuZHNTaGFwZXMgPSBwaXBlTm9kZXMuZmlsdGVyKCBwaXBlID0+IHBpcGUudmlzaWJsZVByb3BlcnR5LnZhbHVlICkubWFwKCBwaXBlID0+IFNoYXBlLmJvdW5kcyggcGlwZS5nbG9iYWxCb3VuZHMgKSApO1xyXG4gICAgICBjb25zdCB0cmFuc2Zvcm1lZFBpcGVTaGFwZUJvdW5kcyA9IFNoYXBlLnVuaW9uKCBwaXBlQm91bmRzU2hhcGVzICkudHJhbnNmb3JtZWQoIHBpcGVOb2Rlc1sgMCBdLmdldEdsb2JhbFRvTG9jYWxNYXRyaXgoKSApO1xyXG5cclxuICAgICAgLy8gRm9jdXMgaGlnaGxpZ2h0IGlzIHNldCBvbiB0aGUgdmFsdmVOb2RlIGJlY2F1c2UgaXQgaXMgd2hhdCByZWNlaXZlcyBmb2N1cyAobm90IHRoZSBQaXBlTm9kZSkuXHJcbiAgICAgIHBpcGVOb2Rlc1sgMCBdLmZvY3VzSGlnaGxpZ2h0ID0gdHJhbnNmb3JtZWRQaXBlU2hhcGVCb3VuZHM7XHJcbiAgICB9O1xyXG5cclxuICAgIG1vZGVsLm51bWJlck9mQ3Vwc1Byb3BlcnR5LmxpbmsoICgpID0+IHtcclxuICAgICAgY2VudGVyV2F0ZXJDdXBMYXllck5vZGUoKTtcclxuICAgICAgd2F0ZXJDdXBMYXllck5vZGUuaW50ZXJydXB0U3VidHJlZUlucHV0KCk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5zY3JlZW5WaWV3Um9vdE5vZGUuYWRkQ2hpbGQoIG5vdGVib29rUGFwZXIgKTtcclxuICAgIHRoaXMuc2NyZWVuVmlld1Jvb3ROb2RlLmFkZENoaWxkKCB0YWJsZU5vZGUgKTtcclxuICAgIHRoaXMuc2NyZWVuVmlld1Jvb3ROb2RlLmFkZENoaWxkKCB3YXRlckN1cExheWVyTm9kZSApO1xyXG4gICAgdGhpcy5zY3JlZW5WaWV3Um9vdE5vZGUuYWRkQ2hpbGQoIHByZWRpY3RNZWFuU2xpZGVyICk7XHJcblxyXG4gICAgdGhpcy5zY3JlZW5WaWV3Um9vdE5vZGUucGRvbU9yZGVyID0gWyAuLi53YXRlckN1cDNETm9kZXMsIHBpcGVOb2Rlc1sgMCBdLCBwcmVkaWN0TWVhblNsaWRlciwgY29udHJvbFBhbmVsLCB0aGlzLnJlc2V0QWxsQnV0dG9uIF07XHJcbiAgfVxyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNldCgpOiB2b2lkIHtcclxuICAgIHN1cGVyLnJlc2V0KCk7XHJcbiAgfVxyXG59XHJcblxyXG5tZWFuU2hhcmVBbmRCYWxhbmNlLnJlZ2lzdGVyKCAnSW50cm9TY3JlZW5WaWV3JywgSW50cm9TY3JlZW5W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