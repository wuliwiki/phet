// Copyright 2022-2023, University of Colorado Boulder

/**
 * Class for 2D & 3D water cup models.
 * A water cup holds a certain level of water that can be manipulated by the user.
 * A cup is empty when waterLevelProperty.value = 0, and full when waterLevelProperty.value = 1
 * Water level is controlled in the 3D view representation through a vertical slider.
 *
 * @author Marla Schulz (PhET Interactive Simulations)
 * @author Sam Reid (PhET Interactive Simulations)
 */

import NumberProperty from '../../../../axon/js/NumberProperty.js';
import MeanShareAndBalanceConstants from '../../common/MeanShareAndBalanceConstants.js';
import Range from '../../../../dot/js/Range.js';
import optionize, { combineOptions } from '../../../../phet-core/js/optionize.js';
import Property from '../../../../axon/js/Property.js';
import BooleanProperty from '../../../../axon/js/BooleanProperty.js';
import meanShareAndBalance from '../../meanShareAndBalance.js';
export default class WaterCup {
  // Whether the cup is enabled in view and data calculations

  // The x and y positions for the cup in the view.

  // The amount of water contained in the cup. 0 is empty, and 1 is full.

  // This determines the allowed drag range in the slider control

  constructor(tandem, providedOptions) {
    const options = optionize()({
      waterHeightRange: new Range(MeanShareAndBalanceConstants.WATER_LEVEL_RANGE_MIN, MeanShareAndBalanceConstants.WATER_LEVEL_RANGE_MAX),
      waterLevel: MeanShareAndBalanceConstants.WATER_LEVEL_DEFAULT
    }, providedOptions);
    this.isActiveProperty = new BooleanProperty(options.isActive, {
      // phet-io
      tandem: tandem.createTandem('isActiveProperty'),
      phetioReadOnly: true
    });
    this.position = options.position;
    this.linePlacement = options.linePlacement;

    // When a 3D cup's slider is changed enabledRangeProperty is updated accordingly.
    this.enabledRangeProperty = new Property(new Range(MeanShareAndBalanceConstants.WATER_LEVEL_RANGE_MIN, MeanShareAndBalanceConstants.WATER_LEVEL_RANGE_MAX), {
      valueComparisonStrategy: 'equalsFunction'
    });
    this.waterLevelProperty = new NumberProperty(options.waterLevel, combineOptions({
      range: new Range(MeanShareAndBalanceConstants.WATER_LEVEL_RANGE_MIN, MeanShareAndBalanceConstants.WATER_LEVEL_RANGE_MAX),
      // phet-io
      tandem: tandem.createTandem('waterLevelProperty')
    }, options.waterLevelPropertyOptions));
    this.isActiveProperty.lazyLink(isActive => this.partialReset());
  }

  // these properties are the only ones that should be reset when a cup is no longer active
  partialReset() {
    this.enabledRangeProperty.reset();
    this.waterLevelProperty.reset();
  }
  reset() {
    this.partialReset();
    this.isActiveProperty.reset();
  }
}
meanShareAndBalance.register('WaterCup', WaterCup);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJOdW1iZXJQcm9wZXJ0eSIsIk1lYW5TaGFyZUFuZEJhbGFuY2VDb25zdGFudHMiLCJSYW5nZSIsIm9wdGlvbml6ZSIsImNvbWJpbmVPcHRpb25zIiwiUHJvcGVydHkiLCJCb29sZWFuUHJvcGVydHkiLCJtZWFuU2hhcmVBbmRCYWxhbmNlIiwiV2F0ZXJDdXAiLCJjb25zdHJ1Y3RvciIsInRhbmRlbSIsInByb3ZpZGVkT3B0aW9ucyIsIm9wdGlvbnMiLCJ3YXRlckhlaWdodFJhbmdlIiwiV0FURVJfTEVWRUxfUkFOR0VfTUlOIiwiV0FURVJfTEVWRUxfUkFOR0VfTUFYIiwid2F0ZXJMZXZlbCIsIldBVEVSX0xFVkVMX0RFRkFVTFQiLCJpc0FjdGl2ZVByb3BlcnR5IiwiaXNBY3RpdmUiLCJjcmVhdGVUYW5kZW0iLCJwaGV0aW9SZWFkT25seSIsInBvc2l0aW9uIiwibGluZVBsYWNlbWVudCIsImVuYWJsZWRSYW5nZVByb3BlcnR5IiwidmFsdWVDb21wYXJpc29uU3RyYXRlZ3kiLCJ3YXRlckxldmVsUHJvcGVydHkiLCJyYW5nZSIsIndhdGVyTGV2ZWxQcm9wZXJ0eU9wdGlvbnMiLCJsYXp5TGluayIsInBhcnRpYWxSZXNldCIsInJlc2V0IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJXYXRlckN1cC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMi0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBDbGFzcyBmb3IgMkQgJiAzRCB3YXRlciBjdXAgbW9kZWxzLlxyXG4gKiBBIHdhdGVyIGN1cCBob2xkcyBhIGNlcnRhaW4gbGV2ZWwgb2Ygd2F0ZXIgdGhhdCBjYW4gYmUgbWFuaXB1bGF0ZWQgYnkgdGhlIHVzZXIuXHJcbiAqIEEgY3VwIGlzIGVtcHR5IHdoZW4gd2F0ZXJMZXZlbFByb3BlcnR5LnZhbHVlID0gMCwgYW5kIGZ1bGwgd2hlbiB3YXRlckxldmVsUHJvcGVydHkudmFsdWUgPSAxXHJcbiAqIFdhdGVyIGxldmVsIGlzIGNvbnRyb2xsZWQgaW4gdGhlIDNEIHZpZXcgcmVwcmVzZW50YXRpb24gdGhyb3VnaCBhIHZlcnRpY2FsIHNsaWRlci5cclxuICpcclxuICogQGF1dGhvciBNYXJsYSBTY2h1bHogKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IE51bWJlclByb3BlcnR5LCB7IE51bWJlclByb3BlcnR5T3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvTnVtYmVyUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgU3RyaWN0T21pdCBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvU3RyaWN0T21pdC5qcyc7XHJcbmltcG9ydCB7IFBoZXRpb09iamVjdE9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi90YW5kZW0vanMvUGhldGlvT2JqZWN0LmpzJztcclxuaW1wb3J0IE1lYW5TaGFyZUFuZEJhbGFuY2VDb25zdGFudHMgZnJvbSAnLi4vLi4vY29tbW9uL01lYW5TaGFyZUFuZEJhbGFuY2VDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgUmFuZ2UgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1JhbmdlLmpzJztcclxuaW1wb3J0IG9wdGlvbml6ZSwgeyBjb21iaW5lT3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgUGlja09wdGlvbmFsIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9QaWNrT3B0aW9uYWwuanMnO1xyXG5pbXBvcnQgUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBCb29sZWFuUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9Cb29sZWFuUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgbWVhblNoYXJlQW5kQmFsYW5jZSBmcm9tICcuLi8uLi9tZWFuU2hhcmVBbmRCYWxhbmNlLmpzJztcclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uLy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IHtcclxuICBwb3NpdGlvbjogVmVjdG9yMjsgLy8gdGhlIGN1cHMgeCAmIHkgcG9zaXRpb24gaW4gdGhlIHZpZXdcclxuICBpc0FjdGl2ZTogYm9vbGVhbjtcclxuICB3YXRlckhlaWdodFJhbmdlPzogUmFuZ2U7XHJcbiAgd2F0ZXJMZXZlbD86IG51bWJlcjtcclxuICB3YXRlckxldmVsUHJvcGVydHlPcHRpb25zPzogUGlja09wdGlvbmFsPE51bWJlclByb3BlcnR5T3B0aW9ucywgJ3BoZXRpb1JlYWRPbmx5Jz47XHJcbiAgbGluZVBsYWNlbWVudDogbnVtYmVyO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgV2F0ZXJDdXBNb2RlbE9wdGlvbnMgPSBTZWxmT3B0aW9ucztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdhdGVyQ3VwIHtcclxuXHJcbiAgLy8gV2hldGhlciB0aGUgY3VwIGlzIGVuYWJsZWQgaW4gdmlldyBhbmQgZGF0YSBjYWxjdWxhdGlvbnNcclxuICBwdWJsaWMgcmVhZG9ubHkgaXNBY3RpdmVQcm9wZXJ0eTogUHJvcGVydHk8Ym9vbGVhbj47XHJcblxyXG4gIC8vIFRoZSB4IGFuZCB5IHBvc2l0aW9ucyBmb3IgdGhlIGN1cCBpbiB0aGUgdmlldy5cclxuICBwdWJsaWMgcmVhZG9ubHkgcG9zaXRpb246IFZlY3RvcjI7XHJcblxyXG4gIC8vIFRoZSBhbW91bnQgb2Ygd2F0ZXIgY29udGFpbmVkIGluIHRoZSBjdXAuIDAgaXMgZW1wdHksIGFuZCAxIGlzIGZ1bGwuXHJcbiAgcHVibGljIHJlYWRvbmx5IHdhdGVyTGV2ZWxQcm9wZXJ0eTogTnVtYmVyUHJvcGVydHk7XHJcblxyXG4gIC8vIFRoaXMgZGV0ZXJtaW5lcyB0aGUgYWxsb3dlZCBkcmFnIHJhbmdlIGluIHRoZSBzbGlkZXIgY29udHJvbFxyXG4gIHB1YmxpYyByZWFkb25seSBlbmFibGVkUmFuZ2VQcm9wZXJ0eTogUHJvcGVydHk8UmFuZ2U+O1xyXG5cclxuICBwdWJsaWMgcmVhZG9ubHkgbGluZVBsYWNlbWVudDogbnVtYmVyO1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIHRhbmRlbTogVGFuZGVtLCBwcm92aWRlZE9wdGlvbnM6IFdhdGVyQ3VwTW9kZWxPcHRpb25zICkge1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8V2F0ZXJDdXBNb2RlbE9wdGlvbnMsIFN0cmljdE9taXQ8U2VsZk9wdGlvbnMsICd3YXRlckxldmVsUHJvcGVydHlPcHRpb25zJz4sIFBoZXRpb09iamVjdE9wdGlvbnM+KCkoIHtcclxuICAgICAgd2F0ZXJIZWlnaHRSYW5nZTogbmV3IFJhbmdlKCBNZWFuU2hhcmVBbmRCYWxhbmNlQ29uc3RhbnRzLldBVEVSX0xFVkVMX1JBTkdFX01JTiwgTWVhblNoYXJlQW5kQmFsYW5jZUNvbnN0YW50cy5XQVRFUl9MRVZFTF9SQU5HRV9NQVggKSxcclxuICAgICAgd2F0ZXJMZXZlbDogTWVhblNoYXJlQW5kQmFsYW5jZUNvbnN0YW50cy5XQVRFUl9MRVZFTF9ERUZBVUxUXHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICB0aGlzLmlzQWN0aXZlUHJvcGVydHkgPSBuZXcgQm9vbGVhblByb3BlcnR5KCBvcHRpb25zLmlzQWN0aXZlLCB7XHJcbiAgICAgIC8vIHBoZXQtaW9cclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnaXNBY3RpdmVQcm9wZXJ0eScgKSxcclxuICAgICAgcGhldGlvUmVhZE9ubHk6IHRydWVcclxuICAgIH0gKTtcclxuICAgIHRoaXMucG9zaXRpb24gPSBvcHRpb25zLnBvc2l0aW9uO1xyXG4gICAgdGhpcy5saW5lUGxhY2VtZW50ID0gb3B0aW9ucy5saW5lUGxhY2VtZW50O1xyXG5cclxuICAgIC8vIFdoZW4gYSAzRCBjdXAncyBzbGlkZXIgaXMgY2hhbmdlZCBlbmFibGVkUmFuZ2VQcm9wZXJ0eSBpcyB1cGRhdGVkIGFjY29yZGluZ2x5LlxyXG4gICAgdGhpcy5lbmFibGVkUmFuZ2VQcm9wZXJ0eSA9IG5ldyBQcm9wZXJ0eTxSYW5nZT4oIG5ldyBSYW5nZSggTWVhblNoYXJlQW5kQmFsYW5jZUNvbnN0YW50cy5XQVRFUl9MRVZFTF9SQU5HRV9NSU4sIE1lYW5TaGFyZUFuZEJhbGFuY2VDb25zdGFudHMuV0FURVJfTEVWRUxfUkFOR0VfTUFYICksIHtcclxuICAgICAgdmFsdWVDb21wYXJpc29uU3RyYXRlZ3k6ICdlcXVhbHNGdW5jdGlvbidcclxuICAgIH0gKTtcclxuICAgIHRoaXMud2F0ZXJMZXZlbFByb3BlcnR5ID0gbmV3IE51bWJlclByb3BlcnR5KCBvcHRpb25zLndhdGVyTGV2ZWwsIGNvbWJpbmVPcHRpb25zPE51bWJlclByb3BlcnR5T3B0aW9ucz4oIHtcclxuICAgICAgcmFuZ2U6IG5ldyBSYW5nZSggTWVhblNoYXJlQW5kQmFsYW5jZUNvbnN0YW50cy5XQVRFUl9MRVZFTF9SQU5HRV9NSU4sIE1lYW5TaGFyZUFuZEJhbGFuY2VDb25zdGFudHMuV0FURVJfTEVWRUxfUkFOR0VfTUFYICksXHJcblxyXG4gICAgICAvLyBwaGV0LWlvXHJcbiAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3dhdGVyTGV2ZWxQcm9wZXJ0eScgKVxyXG4gICAgfSwgb3B0aW9ucy53YXRlckxldmVsUHJvcGVydHlPcHRpb25zICkgKTtcclxuXHJcbiAgICB0aGlzLmlzQWN0aXZlUHJvcGVydHkubGF6eUxpbmsoIGlzQWN0aXZlID0+IHRoaXMucGFydGlhbFJlc2V0KCkgKTtcclxuICB9XHJcblxyXG4gIC8vIHRoZXNlIHByb3BlcnRpZXMgYXJlIHRoZSBvbmx5IG9uZXMgdGhhdCBzaG91bGQgYmUgcmVzZXQgd2hlbiBhIGN1cCBpcyBubyBsb25nZXIgYWN0aXZlXHJcbiAgcHJpdmF0ZSBwYXJ0aWFsUmVzZXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLmVuYWJsZWRSYW5nZVByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICB0aGlzLndhdGVyTGV2ZWxQcm9wZXJ0eS5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5wYXJ0aWFsUmVzZXQoKTtcclxuICAgIHRoaXMuaXNBY3RpdmVQcm9wZXJ0eS5yZXNldCgpO1xyXG4gIH1cclxufVxyXG5cclxubWVhblNoYXJlQW5kQmFsYW5jZS5yZWdpc3RlciggJ1dhdGVyQ3VwJywgV2F0ZXJDdXAgKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxjQUFjLE1BQWlDLHVDQUF1QztBQUc3RixPQUFPQyw0QkFBNEIsTUFBTSw4Q0FBOEM7QUFDdkYsT0FBT0MsS0FBSyxNQUFNLDZCQUE2QjtBQUMvQyxPQUFPQyxTQUFTLElBQUlDLGNBQWMsUUFBUSx1Q0FBdUM7QUFFakYsT0FBT0MsUUFBUSxNQUFNLGlDQUFpQztBQUN0RCxPQUFPQyxlQUFlLE1BQU0sd0NBQXdDO0FBQ3BFLE9BQU9DLG1CQUFtQixNQUFNLDhCQUE4QjtBQWU5RCxlQUFlLE1BQU1DLFFBQVEsQ0FBQztFQUU1Qjs7RUFHQTs7RUFHQTs7RUFHQTs7RUFLT0MsV0FBV0EsQ0FBRUMsTUFBYyxFQUFFQyxlQUFxQyxFQUFHO0lBRTFFLE1BQU1DLE9BQU8sR0FBR1QsU0FBUyxDQUFrRyxDQUFDLENBQUU7TUFDNUhVLGdCQUFnQixFQUFFLElBQUlYLEtBQUssQ0FBRUQsNEJBQTRCLENBQUNhLHFCQUFxQixFQUFFYiw0QkFBNEIsQ0FBQ2MscUJBQXNCLENBQUM7TUFDcklDLFVBQVUsRUFBRWYsNEJBQTRCLENBQUNnQjtJQUMzQyxDQUFDLEVBQUVOLGVBQWdCLENBQUM7SUFFcEIsSUFBSSxDQUFDTyxnQkFBZ0IsR0FBRyxJQUFJWixlQUFlLENBQUVNLE9BQU8sQ0FBQ08sUUFBUSxFQUFFO01BQzdEO01BQ0FULE1BQU0sRUFBRUEsTUFBTSxDQUFDVSxZQUFZLENBQUUsa0JBQW1CLENBQUM7TUFDakRDLGNBQWMsRUFBRTtJQUNsQixDQUFFLENBQUM7SUFDSCxJQUFJLENBQUNDLFFBQVEsR0FBR1YsT0FBTyxDQUFDVSxRQUFRO0lBQ2hDLElBQUksQ0FBQ0MsYUFBYSxHQUFHWCxPQUFPLENBQUNXLGFBQWE7O0lBRTFDO0lBQ0EsSUFBSSxDQUFDQyxvQkFBb0IsR0FBRyxJQUFJbkIsUUFBUSxDQUFTLElBQUlILEtBQUssQ0FBRUQsNEJBQTRCLENBQUNhLHFCQUFxQixFQUFFYiw0QkFBNEIsQ0FBQ2MscUJBQXNCLENBQUMsRUFBRTtNQUNwS1UsdUJBQXVCLEVBQUU7SUFDM0IsQ0FBRSxDQUFDO0lBQ0gsSUFBSSxDQUFDQyxrQkFBa0IsR0FBRyxJQUFJMUIsY0FBYyxDQUFFWSxPQUFPLENBQUNJLFVBQVUsRUFBRVosY0FBYyxDQUF5QjtNQUN2R3VCLEtBQUssRUFBRSxJQUFJekIsS0FBSyxDQUFFRCw0QkFBNEIsQ0FBQ2EscUJBQXFCLEVBQUViLDRCQUE0QixDQUFDYyxxQkFBc0IsQ0FBQztNQUUxSDtNQUNBTCxNQUFNLEVBQUVBLE1BQU0sQ0FBQ1UsWUFBWSxDQUFFLG9CQUFxQjtJQUNwRCxDQUFDLEVBQUVSLE9BQU8sQ0FBQ2dCLHlCQUEwQixDQUFFLENBQUM7SUFFeEMsSUFBSSxDQUFDVixnQkFBZ0IsQ0FBQ1csUUFBUSxDQUFFVixRQUFRLElBQUksSUFBSSxDQUFDVyxZQUFZLENBQUMsQ0FBRSxDQUFDO0VBQ25FOztFQUVBO0VBQ1FBLFlBQVlBLENBQUEsRUFBUztJQUMzQixJQUFJLENBQUNOLG9CQUFvQixDQUFDTyxLQUFLLENBQUMsQ0FBQztJQUNqQyxJQUFJLENBQUNMLGtCQUFrQixDQUFDSyxLQUFLLENBQUMsQ0FBQztFQUNqQztFQUVPQSxLQUFLQSxDQUFBLEVBQVM7SUFDbkIsSUFBSSxDQUFDRCxZQUFZLENBQUMsQ0FBQztJQUNuQixJQUFJLENBQUNaLGdCQUFnQixDQUFDYSxLQUFLLENBQUMsQ0FBQztFQUMvQjtBQUNGO0FBRUF4QixtQkFBbUIsQ0FBQ3lCLFFBQVEsQ0FBRSxVQUFVLEVBQUV4QixRQUFTLENBQUMifQ==