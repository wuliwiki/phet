// Copyright 2022, University of Colorado Boulder

/**
 * FocalLengthControl is the control for changing the optic's focal length. It actually changes the focal-length
 * magnitude, and indicates the sign by an annotation in the control's label, e.g. 'Focal Length (-)'.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import NumberControl from '../../../../scenery-phet/js/NumberControl.js';
import geometricOptics from '../../geometricOptics.js';
import GeometricOpticsStrings from '../../GeometricOpticsStrings.js';
import GOConstants from '../GOConstants.js';
import Utils from '../../../../dot/js/Utils.js';
import { optionize4 } from '../../../../phet-core/js/optionize.js';
import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import StringIO from '../../../../tandem/js/types/StringIO.js';
export default class FocalLengthControl extends NumberControl {
  /**
   * @param focalLengthMagnitudeProperty - unsigned
   * @param focalLengthProperty - signed
   * @param providedOptions
   */
  constructor(focalLengthMagnitudeProperty, focalLengthProperty, providedOptions) {
    const range = focalLengthMagnitudeProperty.range;
    const titleStringProperty = new DerivedProperty([focalLengthProperty, GeometricOpticsStrings.focalLengthPositiveStringProperty, GeometricOpticsStrings.focalLengthNegativeStringProperty], (focalLength, focalLengthPositiveString, focalLengthNegativeString) => focalLength >= 0 ? focalLengthPositiveString : focalLengthNegativeString, {
      tandem: providedOptions.tandem.createTandem('titleStringProperty'),
      phetioValueType: StringIO
    });
    const options = optionize4()({}, GOConstants.NUMBER_CONTROL_OPTIONS, {
      // NumberControlOptions
      delta: GOConstants.FOCAL_LENGTH_SPINNER_STEP,
      numberDisplayOptions: {
        decimalPlaces: GOConstants.FOCAL_LENGTH_DECIMAL_PLACES,
        valuePattern: GeometricOpticsStrings.valueCentimetersPatternStringProperty
      },
      sliderOptions: {
        constrainValue: value => Utils.roundToInterval(value, GOConstants.FOCAL_LENGTH_SLIDER_STEP),
        keyboardStep: GOConstants.FOCAL_LENGTH_KEYBOARD_STEP,
        // used by all alternative-input devices
        shiftKeyboardStep: GOConstants.FOCAL_LENGTH_SHIFT_KEYBOARD_STEP,
        // finer grain, used by keyboard only
        pageKeyboardStep: GOConstants.FOCAL_LENGTH_PAGE_KEYBOARD_STEP
      }
    }, providedOptions);
    super(titleStringProperty, focalLengthMagnitudeProperty, range, options);
    this.addLinkedElement(focalLengthMagnitudeProperty, {
      tandem: options.tandem.createTandem(focalLengthMagnitudeProperty.tandem.name)
    });
  }
  dispose() {
    assert && assert(false, 'dispose is not supported, exists for the lifetime of the sim');
    super.dispose();
  }
}
geometricOptics.register('FocalLengthControl', FocalLengthControl);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJOdW1iZXJDb250cm9sIiwiZ2VvbWV0cmljT3B0aWNzIiwiR2VvbWV0cmljT3B0aWNzU3RyaW5ncyIsIkdPQ29uc3RhbnRzIiwiVXRpbHMiLCJvcHRpb25pemU0IiwiRGVyaXZlZFByb3BlcnR5IiwiU3RyaW5nSU8iLCJGb2NhbExlbmd0aENvbnRyb2wiLCJjb25zdHJ1Y3RvciIsImZvY2FsTGVuZ3RoTWFnbml0dWRlUHJvcGVydHkiLCJmb2NhbExlbmd0aFByb3BlcnR5IiwicHJvdmlkZWRPcHRpb25zIiwicmFuZ2UiLCJ0aXRsZVN0cmluZ1Byb3BlcnR5IiwiZm9jYWxMZW5ndGhQb3NpdGl2ZVN0cmluZ1Byb3BlcnR5IiwiZm9jYWxMZW5ndGhOZWdhdGl2ZVN0cmluZ1Byb3BlcnR5IiwiZm9jYWxMZW5ndGgiLCJmb2NhbExlbmd0aFBvc2l0aXZlU3RyaW5nIiwiZm9jYWxMZW5ndGhOZWdhdGl2ZVN0cmluZyIsInRhbmRlbSIsImNyZWF0ZVRhbmRlbSIsInBoZXRpb1ZhbHVlVHlwZSIsIm9wdGlvbnMiLCJOVU1CRVJfQ09OVFJPTF9PUFRJT05TIiwiZGVsdGEiLCJGT0NBTF9MRU5HVEhfU1BJTk5FUl9TVEVQIiwibnVtYmVyRGlzcGxheU9wdGlvbnMiLCJkZWNpbWFsUGxhY2VzIiwiRk9DQUxfTEVOR1RIX0RFQ0lNQUxfUExBQ0VTIiwidmFsdWVQYXR0ZXJuIiwidmFsdWVDZW50aW1ldGVyc1BhdHRlcm5TdHJpbmdQcm9wZXJ0eSIsInNsaWRlck9wdGlvbnMiLCJjb25zdHJhaW5WYWx1ZSIsInZhbHVlIiwicm91bmRUb0ludGVydmFsIiwiRk9DQUxfTEVOR1RIX1NMSURFUl9TVEVQIiwia2V5Ym9hcmRTdGVwIiwiRk9DQUxfTEVOR1RIX0tFWUJPQVJEX1NURVAiLCJzaGlmdEtleWJvYXJkU3RlcCIsIkZPQ0FMX0xFTkdUSF9TSElGVF9LRVlCT0FSRF9TVEVQIiwicGFnZUtleWJvYXJkU3RlcCIsIkZPQ0FMX0xFTkdUSF9QQUdFX0tFWUJPQVJEX1NURVAiLCJhZGRMaW5rZWRFbGVtZW50IiwibmFtZSIsImRpc3Bvc2UiLCJhc3NlcnQiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkZvY2FsTGVuZ3RoQ29udHJvbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogRm9jYWxMZW5ndGhDb250cm9sIGlzIHRoZSBjb250cm9sIGZvciBjaGFuZ2luZyB0aGUgb3B0aWMncyBmb2NhbCBsZW5ndGguIEl0IGFjdHVhbGx5IGNoYW5nZXMgdGhlIGZvY2FsLWxlbmd0aFxyXG4gKiBtYWduaXR1ZGUsIGFuZCBpbmRpY2F0ZXMgdGhlIHNpZ24gYnkgYW4gYW5ub3RhdGlvbiBpbiB0aGUgY29udHJvbCdzIGxhYmVsLCBlLmcuICdGb2NhbCBMZW5ndGggKC0pJy5cclxuICpcclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICovXHJcblxyXG5pbXBvcnQgTnVtYmVyQ29udHJvbCwgeyBOdW1iZXJDb250cm9sT3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9OdW1iZXJDb250cm9sLmpzJztcclxuaW1wb3J0IGdlb21ldHJpY09wdGljcyBmcm9tICcuLi8uLi9nZW9tZXRyaWNPcHRpY3MuanMnO1xyXG5pbXBvcnQgR2VvbWV0cmljT3B0aWNzU3RyaW5ncyBmcm9tICcuLi8uLi9HZW9tZXRyaWNPcHRpY3NTdHJpbmdzLmpzJztcclxuaW1wb3J0IEdPQ29uc3RhbnRzIGZyb20gJy4uL0dPQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IFV0aWxzIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9VdGlscy5qcyc7XHJcbmltcG9ydCBOdW1iZXJQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL051bWJlclByb3BlcnR5LmpzJztcclxuaW1wb3J0IFRSZWFkT25seVByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvVFJlYWRPbmx5UHJvcGVydHkuanMnO1xyXG5pbXBvcnQgUGlja1JlcXVpcmVkIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9QaWNrUmVxdWlyZWQuanMnO1xyXG5pbXBvcnQgeyBFbXB0eVNlbGZPcHRpb25zLCBvcHRpb25pemU0IH0gZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCBEZXJpdmVkUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9EZXJpdmVkUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgU3RyaW5nSU8gZnJvbSAnLi4vLi4vLi4vLi4vdGFuZGVtL2pzL3R5cGVzL1N0cmluZ0lPLmpzJztcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSBFbXB0eVNlbGZPcHRpb25zO1xyXG5cclxudHlwZSBGb2NhbExlbmd0aENvbnRyb2xPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBQaWNrUmVxdWlyZWQ8TnVtYmVyQ29udHJvbE9wdGlvbnMsICd0YW5kZW0nPjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvY2FsTGVuZ3RoQ29udHJvbCBleHRlbmRzIE51bWJlckNvbnRyb2wge1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0gZm9jYWxMZW5ndGhNYWduaXR1ZGVQcm9wZXJ0eSAtIHVuc2lnbmVkXHJcbiAgICogQHBhcmFtIGZvY2FsTGVuZ3RoUHJvcGVydHkgLSBzaWduZWRcclxuICAgKiBAcGFyYW0gcHJvdmlkZWRPcHRpb25zXHJcbiAgICovXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBmb2NhbExlbmd0aE1hZ25pdHVkZVByb3BlcnR5OiBOdW1iZXJQcm9wZXJ0eSxcclxuICAgICAgICAgICAgICAgICAgICAgIGZvY2FsTGVuZ3RoUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PG51bWJlcj4sXHJcbiAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlZE9wdGlvbnM6IEZvY2FsTGVuZ3RoQ29udHJvbE9wdGlvbnMgKSB7XHJcblxyXG4gICAgY29uc3QgcmFuZ2UgPSBmb2NhbExlbmd0aE1hZ25pdHVkZVByb3BlcnR5LnJhbmdlO1xyXG5cclxuICAgIGNvbnN0IHRpdGxlU3RyaW5nUHJvcGVydHkgPSBuZXcgRGVyaXZlZFByb3BlcnR5KCBbXHJcbiAgICAgIGZvY2FsTGVuZ3RoUHJvcGVydHksXHJcbiAgICAgIEdlb21ldHJpY09wdGljc1N0cmluZ3MuZm9jYWxMZW5ndGhQb3NpdGl2ZVN0cmluZ1Byb3BlcnR5LFxyXG4gICAgICBHZW9tZXRyaWNPcHRpY3NTdHJpbmdzLmZvY2FsTGVuZ3RoTmVnYXRpdmVTdHJpbmdQcm9wZXJ0eVxyXG4gICAgXSwgKCBmb2NhbExlbmd0aDogbnVtYmVyLCBmb2NhbExlbmd0aFBvc2l0aXZlU3RyaW5nOiBzdHJpbmcsIGZvY2FsTGVuZ3RoTmVnYXRpdmVTdHJpbmc6IHN0cmluZyApID0+XHJcbiAgICAgICggZm9jYWxMZW5ndGggPj0gMCApID8gZm9jYWxMZW5ndGhQb3NpdGl2ZVN0cmluZyA6IGZvY2FsTGVuZ3RoTmVnYXRpdmVTdHJpbmcsIHtcclxuICAgICAgdGFuZGVtOiBwcm92aWRlZE9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3RpdGxlU3RyaW5nUHJvcGVydHknICksXHJcbiAgICAgIHBoZXRpb1ZhbHVlVHlwZTogU3RyaW5nSU9cclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplNDxGb2NhbExlbmd0aENvbnRyb2xPcHRpb25zLCBTZWxmT3B0aW9ucywgTnVtYmVyQ29udHJvbE9wdGlvbnM+KCkoXHJcbiAgICAgIHt9LCBHT0NvbnN0YW50cy5OVU1CRVJfQ09OVFJPTF9PUFRJT05TLCB7XHJcblxyXG4gICAgICAgIC8vIE51bWJlckNvbnRyb2xPcHRpb25zXHJcbiAgICAgICAgZGVsdGE6IEdPQ29uc3RhbnRzLkZPQ0FMX0xFTkdUSF9TUElOTkVSX1NURVAsXHJcbiAgICAgICAgbnVtYmVyRGlzcGxheU9wdGlvbnM6IHtcclxuICAgICAgICAgIGRlY2ltYWxQbGFjZXM6IEdPQ29uc3RhbnRzLkZPQ0FMX0xFTkdUSF9ERUNJTUFMX1BMQUNFUyxcclxuICAgICAgICAgIHZhbHVlUGF0dGVybjogR2VvbWV0cmljT3B0aWNzU3RyaW5ncy52YWx1ZUNlbnRpbWV0ZXJzUGF0dGVyblN0cmluZ1Byb3BlcnR5XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzbGlkZXJPcHRpb25zOiB7XHJcbiAgICAgICAgICBjb25zdHJhaW5WYWx1ZTogKCB2YWx1ZTogbnVtYmVyICkgPT4gVXRpbHMucm91bmRUb0ludGVydmFsKCB2YWx1ZSwgR09Db25zdGFudHMuRk9DQUxfTEVOR1RIX1NMSURFUl9TVEVQICksXHJcbiAgICAgICAgICBrZXlib2FyZFN0ZXA6IEdPQ29uc3RhbnRzLkZPQ0FMX0xFTkdUSF9LRVlCT0FSRF9TVEVQLCAvLyB1c2VkIGJ5IGFsbCBhbHRlcm5hdGl2ZS1pbnB1dCBkZXZpY2VzXHJcbiAgICAgICAgICBzaGlmdEtleWJvYXJkU3RlcDogR09Db25zdGFudHMuRk9DQUxfTEVOR1RIX1NISUZUX0tFWUJPQVJEX1NURVAsIC8vIGZpbmVyIGdyYWluLCB1c2VkIGJ5IGtleWJvYXJkIG9ubHlcclxuICAgICAgICAgIHBhZ2VLZXlib2FyZFN0ZXA6IEdPQ29uc3RhbnRzLkZPQ0FMX0xFTkdUSF9QQUdFX0tFWUJPQVJEX1NURVBcclxuICAgICAgICB9XHJcbiAgICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIHN1cGVyKCB0aXRsZVN0cmluZ1Byb3BlcnR5LCBmb2NhbExlbmd0aE1hZ25pdHVkZVByb3BlcnR5LCByYW5nZSwgb3B0aW9ucyApO1xyXG5cclxuICAgIHRoaXMuYWRkTGlua2VkRWxlbWVudCggZm9jYWxMZW5ndGhNYWduaXR1ZGVQcm9wZXJ0eSwge1xyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggZm9jYWxMZW5ndGhNYWduaXR1ZGVQcm9wZXJ0eS50YW5kZW0ubmFtZSApXHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb3ZlcnJpZGUgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIGZhbHNlLCAnZGlzcG9zZSBpcyBub3Qgc3VwcG9ydGVkLCBleGlzdHMgZm9yIHRoZSBsaWZldGltZSBvZiB0aGUgc2ltJyApO1xyXG4gICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gIH1cclxufVxyXG5cclxuZ2VvbWV0cmljT3B0aWNzLnJlZ2lzdGVyKCAnRm9jYWxMZW5ndGhDb250cm9sJywgRm9jYWxMZW5ndGhDb250cm9sICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsYUFBYSxNQUFnQyw4Q0FBOEM7QUFDbEcsT0FBT0MsZUFBZSxNQUFNLDBCQUEwQjtBQUN0RCxPQUFPQyxzQkFBc0IsTUFBTSxpQ0FBaUM7QUFDcEUsT0FBT0MsV0FBVyxNQUFNLG1CQUFtQjtBQUMzQyxPQUFPQyxLQUFLLE1BQU0sNkJBQTZCO0FBSS9DLFNBQTJCQyxVQUFVLFFBQVEsdUNBQXVDO0FBQ3BGLE9BQU9DLGVBQWUsTUFBTSx3Q0FBd0M7QUFDcEUsT0FBT0MsUUFBUSxNQUFNLHlDQUF5QztBQU05RCxlQUFlLE1BQU1DLGtCQUFrQixTQUFTUixhQUFhLENBQUM7RUFFNUQ7QUFDRjtBQUNBO0FBQ0E7QUFDQTtFQUNTUyxXQUFXQSxDQUFFQyw0QkFBNEMsRUFDNUNDLG1CQUE4QyxFQUM5Q0MsZUFBMEMsRUFBRztJQUUvRCxNQUFNQyxLQUFLLEdBQUdILDRCQUE0QixDQUFDRyxLQUFLO0lBRWhELE1BQU1DLG1CQUFtQixHQUFHLElBQUlSLGVBQWUsQ0FBRSxDQUMvQ0ssbUJBQW1CLEVBQ25CVCxzQkFBc0IsQ0FBQ2EsaUNBQWlDLEVBQ3hEYixzQkFBc0IsQ0FBQ2MsaUNBQWlDLENBQ3pELEVBQUUsQ0FBRUMsV0FBbUIsRUFBRUMseUJBQWlDLEVBQUVDLHlCQUFpQyxLQUMxRkYsV0FBVyxJQUFJLENBQUMsR0FBS0MseUJBQXlCLEdBQUdDLHlCQUF5QixFQUFFO01BQzlFQyxNQUFNLEVBQUVSLGVBQWUsQ0FBQ1EsTUFBTSxDQUFDQyxZQUFZLENBQUUscUJBQXNCLENBQUM7TUFDcEVDLGVBQWUsRUFBRWY7SUFDbkIsQ0FBRSxDQUFDO0lBRUgsTUFBTWdCLE9BQU8sR0FBR2xCLFVBQVUsQ0FBK0QsQ0FBQyxDQUN4RixDQUFDLENBQUMsRUFBRUYsV0FBVyxDQUFDcUIsc0JBQXNCLEVBQUU7TUFFdEM7TUFDQUMsS0FBSyxFQUFFdEIsV0FBVyxDQUFDdUIseUJBQXlCO01BQzVDQyxvQkFBb0IsRUFBRTtRQUNwQkMsYUFBYSxFQUFFekIsV0FBVyxDQUFDMEIsMkJBQTJCO1FBQ3REQyxZQUFZLEVBQUU1QixzQkFBc0IsQ0FBQzZCO01BQ3ZDLENBQUM7TUFDREMsYUFBYSxFQUFFO1FBQ2JDLGNBQWMsRUFBSUMsS0FBYSxJQUFNOUIsS0FBSyxDQUFDK0IsZUFBZSxDQUFFRCxLQUFLLEVBQUUvQixXQUFXLENBQUNpQyx3QkFBeUIsQ0FBQztRQUN6R0MsWUFBWSxFQUFFbEMsV0FBVyxDQUFDbUMsMEJBQTBCO1FBQUU7UUFDdERDLGlCQUFpQixFQUFFcEMsV0FBVyxDQUFDcUMsZ0NBQWdDO1FBQUU7UUFDakVDLGdCQUFnQixFQUFFdEMsV0FBVyxDQUFDdUM7TUFDaEM7SUFDRixDQUFDLEVBQUU5QixlQUFnQixDQUFDO0lBRXRCLEtBQUssQ0FBRUUsbUJBQW1CLEVBQUVKLDRCQUE0QixFQUFFRyxLQUFLLEVBQUVVLE9BQVEsQ0FBQztJQUUxRSxJQUFJLENBQUNvQixnQkFBZ0IsQ0FBRWpDLDRCQUE0QixFQUFFO01BQ25EVSxNQUFNLEVBQUVHLE9BQU8sQ0FBQ0gsTUFBTSxDQUFDQyxZQUFZLENBQUVYLDRCQUE0QixDQUFDVSxNQUFNLENBQUN3QixJQUFLO0lBQ2hGLENBQUUsQ0FBQztFQUNMO0VBRWdCQyxPQUFPQSxDQUFBLEVBQVM7SUFDOUJDLE1BQU0sSUFBSUEsTUFBTSxDQUFFLEtBQUssRUFBRSw4REFBK0QsQ0FBQztJQUN6RixLQUFLLENBQUNELE9BQU8sQ0FBQyxDQUFDO0VBQ2pCO0FBQ0Y7QUFFQTVDLGVBQWUsQ0FBQzhDLFFBQVEsQ0FBRSxvQkFBb0IsRUFBRXZDLGtCQUFtQixDQUFDIn0=