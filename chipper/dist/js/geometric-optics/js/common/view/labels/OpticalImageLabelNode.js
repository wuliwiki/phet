// Copyright 2022, University of Colorado Boulder

/**
 * OpticalImageLabelNode is the base class of labeling optical images, and distinguishes between real and virtual.
 * It can label them as simply 'Real Image', or it can number them like 'Real Image 1'.
 * Numbering is dynamic to support PhET-iO.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */
import LabelNode from './LabelNode.js';
import GeometricOpticsStrings from '../../../GeometricOpticsStrings.js';
import geometricOptics from '../../../geometricOptics.js';
import StringUtils from '../../../../../phetcommon/js/util/StringUtils.js';
import BooleanProperty from '../../../../../axon/js/BooleanProperty.js';
import optionize from '../../../../../phet-core/js/optionize.js';
import StringIO from '../../../../../tandem/js/types/StringIO.js';
import DerivedProperty from '../../../../../axon/js/DerivedProperty.js';
export default class OpticalImageLabelNode extends LabelNode {
  /**
   * @param opticalImage - the optical image to label
   * @param labelPositionProperty - the position of the label
   * @param zoomTransformProperty - model-view transform that the user controls by zooming in/out
   * @param providedOptions
   */
  constructor(opticalImage, labelPositionProperty, zoomTransformProperty, providedOptions) {
    const options = optionize()({
      isNumberedProperty: new BooleanProperty(true)
    }, providedOptions);
    const labelStringProperty = new DerivedProperty([opticalImage.opticalImageTypeProperty, options.isNumberedProperty, GeometricOpticsStrings.label.realImageStringProperty, GeometricOpticsStrings.label.realImageNStringProperty, GeometricOpticsStrings.label.virtualImageStringProperty, GeometricOpticsStrings.label.virtualImageNStringProperty], (opticalImageType, isNumbered, realImageString, realImageNString, virtualImageString, virtualImageNString) => {
      let text;
      if (isNumbered) {
        // Switch between 'Real Image N' and 'Virtual Image N'
        const stringPattern = opticalImageType === 'real' ? realImageNString : virtualImageNString;
        text = StringUtils.fillIn(stringPattern, {
          imageNumber: opticalImage.opticalObject.opticalObjectNumber
        });
      } else {
        // Switch between 'Real Image' and 'Virtual Image'
        text = opticalImageType === 'real' ? realImageString : virtualImageString;
      }
      return text;
    }, {
      tandem: options.tandem.createTandem('labelStringProperty'),
      phetioValueType: StringIO
    });
    super(labelStringProperty, labelPositionProperty, zoomTransformProperty, options);
  }
}
geometricOptics.register('OpticalImageLabelNode', OpticalImageLabelNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJMYWJlbE5vZGUiLCJHZW9tZXRyaWNPcHRpY3NTdHJpbmdzIiwiZ2VvbWV0cmljT3B0aWNzIiwiU3RyaW5nVXRpbHMiLCJCb29sZWFuUHJvcGVydHkiLCJvcHRpb25pemUiLCJTdHJpbmdJTyIsIkRlcml2ZWRQcm9wZXJ0eSIsIk9wdGljYWxJbWFnZUxhYmVsTm9kZSIsImNvbnN0cnVjdG9yIiwib3B0aWNhbEltYWdlIiwibGFiZWxQb3NpdGlvblByb3BlcnR5Iiwiem9vbVRyYW5zZm9ybVByb3BlcnR5IiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsImlzTnVtYmVyZWRQcm9wZXJ0eSIsImxhYmVsU3RyaW5nUHJvcGVydHkiLCJvcHRpY2FsSW1hZ2VUeXBlUHJvcGVydHkiLCJsYWJlbCIsInJlYWxJbWFnZVN0cmluZ1Byb3BlcnR5IiwicmVhbEltYWdlTlN0cmluZ1Byb3BlcnR5IiwidmlydHVhbEltYWdlU3RyaW5nUHJvcGVydHkiLCJ2aXJ0dWFsSW1hZ2VOU3RyaW5nUHJvcGVydHkiLCJvcHRpY2FsSW1hZ2VUeXBlIiwiaXNOdW1iZXJlZCIsInJlYWxJbWFnZVN0cmluZyIsInJlYWxJbWFnZU5TdHJpbmciLCJ2aXJ0dWFsSW1hZ2VTdHJpbmciLCJ2aXJ0dWFsSW1hZ2VOU3RyaW5nIiwidGV4dCIsInN0cmluZ1BhdHRlcm4iLCJmaWxsSW4iLCJpbWFnZU51bWJlciIsIm9wdGljYWxPYmplY3QiLCJvcHRpY2FsT2JqZWN0TnVtYmVyIiwidGFuZGVtIiwiY3JlYXRlVGFuZGVtIiwicGhldGlvVmFsdWVUeXBlIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJPcHRpY2FsSW1hZ2VMYWJlbE5vZGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIE9wdGljYWxJbWFnZUxhYmVsTm9kZSBpcyB0aGUgYmFzZSBjbGFzcyBvZiBsYWJlbGluZyBvcHRpY2FsIGltYWdlcywgYW5kIGRpc3Rpbmd1aXNoZXMgYmV0d2VlbiByZWFsIGFuZCB2aXJ0dWFsLlxyXG4gKiBJdCBjYW4gbGFiZWwgdGhlbSBhcyBzaW1wbHkgJ1JlYWwgSW1hZ2UnLCBvciBpdCBjYW4gbnVtYmVyIHRoZW0gbGlrZSAnUmVhbCBJbWFnZSAxJy5cclxuICogTnVtYmVyaW5nIGlzIGR5bmFtaWMgdG8gc3VwcG9ydCBQaEVULWlPLlxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuaW1wb3J0IExhYmVsTm9kZSwgeyBMYWJlbE5vZGVPcHRpb25zIH0gZnJvbSAnLi9MYWJlbE5vZGUuanMnO1xyXG5pbXBvcnQgR2VvbWV0cmljT3B0aWNzU3RyaW5ncyBmcm9tICcuLi8uLi8uLi9HZW9tZXRyaWNPcHRpY3NTdHJpbmdzLmpzJztcclxuaW1wb3J0IGdlb21ldHJpY09wdGljcyBmcm9tICcuLi8uLi8uLi9nZW9tZXRyaWNPcHRpY3MuanMnO1xyXG5pbXBvcnQgU3RyaW5nVXRpbHMgZnJvbSAnLi4vLi4vLi4vLi4vLi4vcGhldGNvbW1vbi9qcy91dGlsL1N0cmluZ1V0aWxzLmpzJztcclxuaW1wb3J0IEJvb2xlYW5Qcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi8uLi9heG9uL2pzL0Jvb2xlYW5Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBvcHRpb25pemUgZnJvbSAnLi4vLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCBUUmVhZE9ubHlQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi8uLi9heG9uL2pzL1RSZWFkT25seVByb3BlcnR5LmpzJztcclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgTW9kZWxWaWV3VHJhbnNmb3JtMiBmcm9tICcuLi8uLi8uLi8uLi8uLi9waGV0Y29tbW9uL2pzL3ZpZXcvTW9kZWxWaWV3VHJhbnNmb3JtMi5qcyc7XHJcbmltcG9ydCBPcHRpY2FsSW1hZ2UgZnJvbSAnLi4vLi4vbW9kZWwvT3B0aWNhbEltYWdlLmpzJztcclxuaW1wb3J0IFN0cmluZ0lPIGZyb20gJy4uLy4uLy4uLy4uLy4uL3RhbmRlbS9qcy90eXBlcy9TdHJpbmdJTy5qcyc7XHJcbmltcG9ydCBEZXJpdmVkUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vLi4vYXhvbi9qcy9EZXJpdmVkUHJvcGVydHkuanMnO1xyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IHtcclxuXHJcbiAgLy8gV2hldGhlciB0aGUgb2JqZWN0IHNob3VsZCBiZSBudW1iZXJlZCwgbGlrZSAnT2JqZWN0IDEnXHJcbiAgaXNOdW1iZXJlZFByb3BlcnR5PzogVFJlYWRPbmx5UHJvcGVydHk8Ym9vbGVhbj47XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBPcHRpY2FsSW1hZ2VMYWJlbE5vZGVPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBMYWJlbE5vZGVPcHRpb25zO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgT3B0aWNhbEltYWdlTGFiZWxOb2RlIGV4dGVuZHMgTGFiZWxOb2RlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIG9wdGljYWxJbWFnZSAtIHRoZSBvcHRpY2FsIGltYWdlIHRvIGxhYmVsXHJcbiAgICogQHBhcmFtIGxhYmVsUG9zaXRpb25Qcm9wZXJ0eSAtIHRoZSBwb3NpdGlvbiBvZiB0aGUgbGFiZWxcclxuICAgKiBAcGFyYW0gem9vbVRyYW5zZm9ybVByb3BlcnR5IC0gbW9kZWwtdmlldyB0cmFuc2Zvcm0gdGhhdCB0aGUgdXNlciBjb250cm9scyBieSB6b29taW5nIGluL291dFxyXG4gICAqIEBwYXJhbSBwcm92aWRlZE9wdGlvbnNcclxuICAgKi9cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIG9wdGljYWxJbWFnZTogT3B0aWNhbEltYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgbGFiZWxQb3NpdGlvblByb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxWZWN0b3IyPixcclxuICAgICAgICAgICAgICAgICAgICAgIHpvb21UcmFuc2Zvcm1Qcm9wZXJ0eTogVFJlYWRPbmx5UHJvcGVydHk8TW9kZWxWaWV3VHJhbnNmb3JtMj4sXHJcbiAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlZE9wdGlvbnM6IE9wdGljYWxJbWFnZUxhYmVsTm9kZU9wdGlvbnMgKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxPcHRpY2FsSW1hZ2VMYWJlbE5vZGVPcHRpb25zLCBTZWxmT3B0aW9ucywgTGFiZWxOb2RlT3B0aW9ucz4oKSgge1xyXG4gICAgICBpc051bWJlcmVkUHJvcGVydHk6IG5ldyBCb29sZWFuUHJvcGVydHkoIHRydWUgKVxyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgY29uc3QgbGFiZWxTdHJpbmdQcm9wZXJ0eSA9IG5ldyBEZXJpdmVkUHJvcGVydHkoIFtcclxuICAgICAgb3B0aWNhbEltYWdlLm9wdGljYWxJbWFnZVR5cGVQcm9wZXJ0eSxcclxuICAgICAgb3B0aW9ucy5pc051bWJlcmVkUHJvcGVydHksXHJcbiAgICAgIEdlb21ldHJpY09wdGljc1N0cmluZ3MubGFiZWwucmVhbEltYWdlU3RyaW5nUHJvcGVydHksXHJcbiAgICAgIEdlb21ldHJpY09wdGljc1N0cmluZ3MubGFiZWwucmVhbEltYWdlTlN0cmluZ1Byb3BlcnR5LFxyXG4gICAgICBHZW9tZXRyaWNPcHRpY3NTdHJpbmdzLmxhYmVsLnZpcnR1YWxJbWFnZVN0cmluZ1Byb3BlcnR5LFxyXG4gICAgICBHZW9tZXRyaWNPcHRpY3NTdHJpbmdzLmxhYmVsLnZpcnR1YWxJbWFnZU5TdHJpbmdQcm9wZXJ0eVxyXG4gICAgXSwgKFxyXG4gICAgICBvcHRpY2FsSW1hZ2VUeXBlLFxyXG4gICAgICBpc051bWJlcmVkLFxyXG4gICAgICByZWFsSW1hZ2VTdHJpbmcsXHJcbiAgICAgIHJlYWxJbWFnZU5TdHJpbmcsXHJcbiAgICAgIHZpcnR1YWxJbWFnZVN0cmluZyxcclxuICAgICAgdmlydHVhbEltYWdlTlN0cmluZ1xyXG4gICAgKSA9PiB7XHJcbiAgICAgIGxldCB0ZXh0OiBzdHJpbmc7XHJcbiAgICAgIGlmICggaXNOdW1iZXJlZCApIHtcclxuXHJcbiAgICAgICAgLy8gU3dpdGNoIGJldHdlZW4gJ1JlYWwgSW1hZ2UgTicgYW5kICdWaXJ0dWFsIEltYWdlIE4nXHJcbiAgICAgICAgY29uc3Qgc3RyaW5nUGF0dGVybiA9ICggb3B0aWNhbEltYWdlVHlwZSA9PT0gJ3JlYWwnICkgPyByZWFsSW1hZ2VOU3RyaW5nIDogdmlydHVhbEltYWdlTlN0cmluZztcclxuICAgICAgICB0ZXh0ID0gU3RyaW5nVXRpbHMuZmlsbEluKCBzdHJpbmdQYXR0ZXJuLCB7XHJcbiAgICAgICAgICBpbWFnZU51bWJlcjogb3B0aWNhbEltYWdlLm9wdGljYWxPYmplY3Qub3B0aWNhbE9iamVjdE51bWJlclxyXG4gICAgICAgIH0gKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuXHJcbiAgICAgICAgLy8gU3dpdGNoIGJldHdlZW4gJ1JlYWwgSW1hZ2UnIGFuZCAnVmlydHVhbCBJbWFnZSdcclxuICAgICAgICB0ZXh0ID0gKCBvcHRpY2FsSW1hZ2VUeXBlID09PSAncmVhbCcgKSA/IHJlYWxJbWFnZVN0cmluZyA6IHZpcnR1YWxJbWFnZVN0cmluZztcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGV4dDtcclxuICAgIH0sIHtcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdsYWJlbFN0cmluZ1Byb3BlcnR5JyApLFxyXG4gICAgICBwaGV0aW9WYWx1ZVR5cGU6IFN0cmluZ0lPXHJcbiAgICB9ICk7XHJcblxyXG4gICAgc3VwZXIoIGxhYmVsU3RyaW5nUHJvcGVydHksIGxhYmVsUG9zaXRpb25Qcm9wZXJ0eSwgem9vbVRyYW5zZm9ybVByb3BlcnR5LCBvcHRpb25zICk7XHJcbiAgfVxyXG59XHJcblxyXG5nZW9tZXRyaWNPcHRpY3MucmVnaXN0ZXIoICdPcHRpY2FsSW1hZ2VMYWJlbE5vZGUnLCBPcHRpY2FsSW1hZ2VMYWJlbE5vZGUgKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBT0EsU0FBUyxNQUE0QixnQkFBZ0I7QUFDNUQsT0FBT0Msc0JBQXNCLE1BQU0sb0NBQW9DO0FBQ3ZFLE9BQU9DLGVBQWUsTUFBTSw2QkFBNkI7QUFDekQsT0FBT0MsV0FBVyxNQUFNLGtEQUFrRDtBQUMxRSxPQUFPQyxlQUFlLE1BQU0sMkNBQTJDO0FBQ3ZFLE9BQU9DLFNBQVMsTUFBTSwwQ0FBMEM7QUFLaEUsT0FBT0MsUUFBUSxNQUFNLDRDQUE0QztBQUNqRSxPQUFPQyxlQUFlLE1BQU0sMkNBQTJDO0FBVXZFLGVBQWUsTUFBTUMscUJBQXFCLFNBQVNSLFNBQVMsQ0FBQztFQUUzRDtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDU1MsV0FBV0EsQ0FBRUMsWUFBMEIsRUFDMUJDLHFCQUFpRCxFQUNqREMscUJBQTZELEVBQzdEQyxlQUE2QyxFQUFHO0lBRWxFLE1BQU1DLE9BQU8sR0FBR1QsU0FBUyxDQUE4RCxDQUFDLENBQUU7TUFDeEZVLGtCQUFrQixFQUFFLElBQUlYLGVBQWUsQ0FBRSxJQUFLO0lBQ2hELENBQUMsRUFBRVMsZUFBZ0IsQ0FBQztJQUVwQixNQUFNRyxtQkFBbUIsR0FBRyxJQUFJVCxlQUFlLENBQUUsQ0FDL0NHLFlBQVksQ0FBQ08sd0JBQXdCLEVBQ3JDSCxPQUFPLENBQUNDLGtCQUFrQixFQUMxQmQsc0JBQXNCLENBQUNpQixLQUFLLENBQUNDLHVCQUF1QixFQUNwRGxCLHNCQUFzQixDQUFDaUIsS0FBSyxDQUFDRSx3QkFBd0IsRUFDckRuQixzQkFBc0IsQ0FBQ2lCLEtBQUssQ0FBQ0csMEJBQTBCLEVBQ3ZEcEIsc0JBQXNCLENBQUNpQixLQUFLLENBQUNJLDJCQUEyQixDQUN6RCxFQUFFLENBQ0RDLGdCQUFnQixFQUNoQkMsVUFBVSxFQUNWQyxlQUFlLEVBQ2ZDLGdCQUFnQixFQUNoQkMsa0JBQWtCLEVBQ2xCQyxtQkFBbUIsS0FDaEI7TUFDSCxJQUFJQyxJQUFZO01BQ2hCLElBQUtMLFVBQVUsRUFBRztRQUVoQjtRQUNBLE1BQU1NLGFBQWEsR0FBS1AsZ0JBQWdCLEtBQUssTUFBTSxHQUFLRyxnQkFBZ0IsR0FBR0UsbUJBQW1CO1FBQzlGQyxJQUFJLEdBQUcxQixXQUFXLENBQUM0QixNQUFNLENBQUVELGFBQWEsRUFBRTtVQUN4Q0UsV0FBVyxFQUFFdEIsWUFBWSxDQUFDdUIsYUFBYSxDQUFDQztRQUMxQyxDQUFFLENBQUM7TUFDTCxDQUFDLE1BQ0k7UUFFSDtRQUNBTCxJQUFJLEdBQUtOLGdCQUFnQixLQUFLLE1BQU0sR0FBS0UsZUFBZSxHQUFHRSxrQkFBa0I7TUFDL0U7TUFDQSxPQUFPRSxJQUFJO0lBQ2IsQ0FBQyxFQUFFO01BQ0RNLE1BQU0sRUFBRXJCLE9BQU8sQ0FBQ3FCLE1BQU0sQ0FBQ0MsWUFBWSxDQUFFLHFCQUFzQixDQUFDO01BQzVEQyxlQUFlLEVBQUUvQjtJQUNuQixDQUFFLENBQUM7SUFFSCxLQUFLLENBQUVVLG1CQUFtQixFQUFFTCxxQkFBcUIsRUFBRUMscUJBQXFCLEVBQUVFLE9BQVEsQ0FBQztFQUNyRjtBQUNGO0FBRUFaLGVBQWUsQ0FBQ29DLFFBQVEsQ0FBRSx1QkFBdUIsRUFBRTlCLHFCQUFzQixDQUFDIn0=