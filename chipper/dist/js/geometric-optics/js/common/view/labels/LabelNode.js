// Copyright 2021-2022, University of Colorado Boulder

/**
 * LabelNode renders a label below something of interest in the user interface. It is responsible for adjusting its
 * position when that something's position changes.
 *
 * @author Sarah Chang (Swarthmore College)
 * @author Chris Malley (PixelZoom, Inc.)
 */

import BackgroundNode from '../../../../../scenery-phet/js/BackgroundNode.js';
import { RichText } from '../../../../../scenery/js/imports.js';
import geometricOptics from '../../../geometricOptics.js';
import GOColors from '../../GOColors.js';
import GOConstants from '../../GOConstants.js';
import optionize from '../../../../../phet-core/js/optionize.js';
import Multilink from '../../../../../axon/js/Multilink.js';
export default class LabelNode extends BackgroundNode {
  /**
   * @param labelStringProperty - the label's string
   * @param positionProperty - position of the thing that we're labeling, in model coordinates
   * @param zoomTransformProperty - model-view transform that the user controls by zooming in/out
   * @param providedOptions
   */
  constructor(labelStringProperty, positionProperty, zoomTransformProperty, providedOptions) {
    const options = optionize()({
      // SelfOptions
      xAlign: 'center',
      yAlign: 'top',
      xOffset: 0,
      yOffset: 2,
      // BackgroundNodeOptions
      xMargin: 5,
      yMargin: 5,
      rectangleOptions: {
        fill: GOColors.screenBackgroundColorProperty,
        cornerRadius: 4,
        opacity: 0.5
      },
      phetioVisiblePropertyInstrumented: false
    }, providedOptions);
    const labelText = new RichText(labelStringProperty, {
      align: 'center',
      fill: GOColors.labelFillProperty,
      font: GOConstants.LABEL_FONT,
      maxWidth: 85,
      tandem: providedOptions.tandem.createTandem('labelText')
    });
    super(labelText, options);

    // Keep the label properly aligned with the thing it's labeling.
    Multilink.multilink([zoomTransformProperty, positionProperty, labelText.boundsProperty], (zoomTransform, position, textBounds) => {
      const viewPosition = zoomTransform.modelToViewPosition(position).plusXY(options.xOffset, options.yOffset);

      // x
      if (options.xAlign === 'center') {
        this.centerX = viewPosition.x;
      } else if (options.xAlign === 'left') {
        this.left = viewPosition.x;
      } else {
        this.right = viewPosition.x;
      }

      // y
      if (options.yAlign === 'center') {
        this.centerY = viewPosition.y;
      } else if (options.yAlign === 'top') {
        this.top = viewPosition.y;
      } else {
        this.bottom = viewPosition.y;
      }
    });
  }
  dispose() {
    assert && assert(false, 'dispose is not supported, exists for the lifetime of the sim');
    super.dispose();
  }
}
geometricOptics.register('LabelNode', LabelNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCYWNrZ3JvdW5kTm9kZSIsIlJpY2hUZXh0IiwiZ2VvbWV0cmljT3B0aWNzIiwiR09Db2xvcnMiLCJHT0NvbnN0YW50cyIsIm9wdGlvbml6ZSIsIk11bHRpbGluayIsIkxhYmVsTm9kZSIsImNvbnN0cnVjdG9yIiwibGFiZWxTdHJpbmdQcm9wZXJ0eSIsInBvc2l0aW9uUHJvcGVydHkiLCJ6b29tVHJhbnNmb3JtUHJvcGVydHkiLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwieEFsaWduIiwieUFsaWduIiwieE9mZnNldCIsInlPZmZzZXQiLCJ4TWFyZ2luIiwieU1hcmdpbiIsInJlY3RhbmdsZU9wdGlvbnMiLCJmaWxsIiwic2NyZWVuQmFja2dyb3VuZENvbG9yUHJvcGVydHkiLCJjb3JuZXJSYWRpdXMiLCJvcGFjaXR5IiwicGhldGlvVmlzaWJsZVByb3BlcnR5SW5zdHJ1bWVudGVkIiwibGFiZWxUZXh0IiwiYWxpZ24iLCJsYWJlbEZpbGxQcm9wZXJ0eSIsImZvbnQiLCJMQUJFTF9GT05UIiwibWF4V2lkdGgiLCJ0YW5kZW0iLCJjcmVhdGVUYW5kZW0iLCJtdWx0aWxpbmsiLCJib3VuZHNQcm9wZXJ0eSIsInpvb21UcmFuc2Zvcm0iLCJwb3NpdGlvbiIsInRleHRCb3VuZHMiLCJ2aWV3UG9zaXRpb24iLCJtb2RlbFRvVmlld1Bvc2l0aW9uIiwicGx1c1hZIiwiY2VudGVyWCIsIngiLCJsZWZ0IiwicmlnaHQiLCJjZW50ZXJZIiwieSIsInRvcCIsImJvdHRvbSIsImRpc3Bvc2UiLCJhc3NlcnQiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkxhYmVsTm9kZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMS0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBMYWJlbE5vZGUgcmVuZGVycyBhIGxhYmVsIGJlbG93IHNvbWV0aGluZyBvZiBpbnRlcmVzdCBpbiB0aGUgdXNlciBpbnRlcmZhY2UuIEl0IGlzIHJlc3BvbnNpYmxlIGZvciBhZGp1c3RpbmcgaXRzXHJcbiAqIHBvc2l0aW9uIHdoZW4gdGhhdCBzb21ldGhpbmcncyBwb3NpdGlvbiBjaGFuZ2VzLlxyXG4gKlxyXG4gKiBAYXV0aG9yIFNhcmFoIENoYW5nIChTd2FydGhtb3JlIENvbGxlZ2UpXHJcbiAqIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXHJcbiAqL1xyXG5cclxuaW1wb3J0IFRSZWFkT25seVByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uLy4uL2F4b24vanMvVFJlYWRPbmx5UHJvcGVydHkuanMnO1xyXG5pbXBvcnQgQmFja2dyb3VuZE5vZGUsIHsgQmFja2dyb3VuZE5vZGVPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL0JhY2tncm91bmROb2RlLmpzJztcclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgTW9kZWxWaWV3VHJhbnNmb3JtMiBmcm9tICcuLi8uLi8uLi8uLi8uLi9waGV0Y29tbW9uL2pzL3ZpZXcvTW9kZWxWaWV3VHJhbnNmb3JtMi5qcyc7XHJcbmltcG9ydCB7IFJpY2hUZXh0IH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IGdlb21ldHJpY09wdGljcyBmcm9tICcuLi8uLi8uLi9nZW9tZXRyaWNPcHRpY3MuanMnO1xyXG5pbXBvcnQgR09Db2xvcnMgZnJvbSAnLi4vLi4vR09Db2xvcnMuanMnO1xyXG5pbXBvcnQgR09Db25zdGFudHMgZnJvbSAnLi4vLi4vR09Db25zdGFudHMuanMnO1xyXG5pbXBvcnQgb3B0aW9uaXplIGZyb20gJy4uLy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgUGlja1JlcXVpcmVkIGZyb20gJy4uLy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9QaWNrUmVxdWlyZWQuanMnO1xyXG5pbXBvcnQgTXVsdGlsaW5rIGZyb20gJy4uLy4uLy4uLy4uLy4uL2F4b24vanMvTXVsdGlsaW5rLmpzJztcclxuXHJcbnR5cGUgWEFsaWduID0gJ2xlZnQnIHwgJ2NlbnRlcicgfCAncmlnaHQnO1xyXG50eXBlIFlBbGlnbiA9ICd0b3AnIHwgJ2NlbnRlcicgfCAnYm90dG9tJztcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSB7XHJcbiAgeEFsaWduPzogWEFsaWduO1xyXG4gIHlBbGlnbj86IFlBbGlnbjtcclxuICB4T2Zmc2V0PzogbnVtYmVyOyAvLyBmcm9tIGNlbnRlciwgaW4gdmlldyBjb29yZGluYXRlc1xyXG4gIHlPZmZzZXQ/OiBudW1iZXI7IC8vIGluIHZpZXcgY29vcmRpbmF0ZXNcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIExhYmVsTm9kZU9wdGlvbnMgPSBTZWxmT3B0aW9ucyAmIFBpY2tSZXF1aXJlZDxCYWNrZ3JvdW5kTm9kZU9wdGlvbnMsICd2aXNpYmxlUHJvcGVydHknIHwgJ3RhbmRlbSc+O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGFiZWxOb2RlIGV4dGVuZHMgQmFja2dyb3VuZE5vZGUge1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0gbGFiZWxTdHJpbmdQcm9wZXJ0eSAtIHRoZSBsYWJlbCdzIHN0cmluZ1xyXG4gICAqIEBwYXJhbSBwb3NpdGlvblByb3BlcnR5IC0gcG9zaXRpb24gb2YgdGhlIHRoaW5nIHRoYXQgd2UncmUgbGFiZWxpbmcsIGluIG1vZGVsIGNvb3JkaW5hdGVzXHJcbiAgICogQHBhcmFtIHpvb21UcmFuc2Zvcm1Qcm9wZXJ0eSAtIG1vZGVsLXZpZXcgdHJhbnNmb3JtIHRoYXQgdGhlIHVzZXIgY29udHJvbHMgYnkgem9vbWluZyBpbi9vdXRcclxuICAgKiBAcGFyYW0gcHJvdmlkZWRPcHRpb25zXHJcbiAgICovXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBsYWJlbFN0cmluZ1Byb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxzdHJpbmc+LFxyXG4gICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25Qcm9wZXJ0eTogVFJlYWRPbmx5UHJvcGVydHk8VmVjdG9yMj4sXHJcbiAgICAgICAgICAgICAgICAgICAgICB6b29tVHJhbnNmb3JtUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PE1vZGVsVmlld1RyYW5zZm9ybTI+LFxyXG4gICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZWRPcHRpb25zOiBMYWJlbE5vZGVPcHRpb25zICkge1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8TGFiZWxOb2RlT3B0aW9ucywgU2VsZk9wdGlvbnMsIEJhY2tncm91bmROb2RlT3B0aW9ucz4oKSgge1xyXG5cclxuICAgICAgLy8gU2VsZk9wdGlvbnNcclxuICAgICAgeEFsaWduOiAnY2VudGVyJyxcclxuICAgICAgeUFsaWduOiAndG9wJyxcclxuICAgICAgeE9mZnNldDogMCxcclxuICAgICAgeU9mZnNldDogMixcclxuXHJcbiAgICAgIC8vIEJhY2tncm91bmROb2RlT3B0aW9uc1xyXG4gICAgICB4TWFyZ2luOiA1LFxyXG4gICAgICB5TWFyZ2luOiA1LFxyXG4gICAgICByZWN0YW5nbGVPcHRpb25zOiB7XHJcbiAgICAgICAgZmlsbDogR09Db2xvcnMuc2NyZWVuQmFja2dyb3VuZENvbG9yUHJvcGVydHksXHJcbiAgICAgICAgY29ybmVyUmFkaXVzOiA0LFxyXG4gICAgICAgIG9wYWNpdHk6IDAuNVxyXG4gICAgICB9LFxyXG4gICAgICBwaGV0aW9WaXNpYmxlUHJvcGVydHlJbnN0cnVtZW50ZWQ6IGZhbHNlXHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICBjb25zdCBsYWJlbFRleHQgPSBuZXcgUmljaFRleHQoIGxhYmVsU3RyaW5nUHJvcGVydHksIHtcclxuICAgICAgYWxpZ246ICdjZW50ZXInLFxyXG4gICAgICBmaWxsOiBHT0NvbG9ycy5sYWJlbEZpbGxQcm9wZXJ0eSxcclxuICAgICAgZm9udDogR09Db25zdGFudHMuTEFCRUxfRk9OVCxcclxuICAgICAgbWF4V2lkdGg6IDg1LFxyXG4gICAgICB0YW5kZW06IHByb3ZpZGVkT3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnbGFiZWxUZXh0JyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgc3VwZXIoIGxhYmVsVGV4dCwgb3B0aW9ucyApO1xyXG5cclxuICAgIC8vIEtlZXAgdGhlIGxhYmVsIHByb3Blcmx5IGFsaWduZWQgd2l0aCB0aGUgdGhpbmcgaXQncyBsYWJlbGluZy5cclxuICAgIE11bHRpbGluay5tdWx0aWxpbmsoXHJcbiAgICAgIFsgem9vbVRyYW5zZm9ybVByb3BlcnR5LCBwb3NpdGlvblByb3BlcnR5LCBsYWJlbFRleHQuYm91bmRzUHJvcGVydHkgXSxcclxuICAgICAgKCB6b29tVHJhbnNmb3JtLCBwb3NpdGlvbiwgdGV4dEJvdW5kcyApID0+IHtcclxuICAgICAgICBjb25zdCB2aWV3UG9zaXRpb24gPSB6b29tVHJhbnNmb3JtLm1vZGVsVG9WaWV3UG9zaXRpb24oIHBvc2l0aW9uICkucGx1c1hZKCBvcHRpb25zLnhPZmZzZXQsIG9wdGlvbnMueU9mZnNldCApO1xyXG5cclxuICAgICAgICAvLyB4XHJcbiAgICAgICAgaWYgKCBvcHRpb25zLnhBbGlnbiA9PT0gJ2NlbnRlcicgKSB7XHJcbiAgICAgICAgICB0aGlzLmNlbnRlclggPSB2aWV3UG9zaXRpb24ueDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoIG9wdGlvbnMueEFsaWduID09PSAnbGVmdCcgKSB7XHJcbiAgICAgICAgICB0aGlzLmxlZnQgPSB2aWV3UG9zaXRpb24ueDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLnJpZ2h0ID0gdmlld1Bvc2l0aW9uLng7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB5XHJcbiAgICAgICAgaWYgKCBvcHRpb25zLnlBbGlnbiA9PT0gJ2NlbnRlcicgKSB7XHJcbiAgICAgICAgICB0aGlzLmNlbnRlclkgPSB2aWV3UG9zaXRpb24ueTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoIG9wdGlvbnMueUFsaWduID09PSAndG9wJyApIHtcclxuICAgICAgICAgIHRoaXMudG9wID0gdmlld1Bvc2l0aW9uLnk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5ib3R0b20gPSB2aWV3UG9zaXRpb24ueTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvdmVycmlkZSBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggZmFsc2UsICdkaXNwb3NlIGlzIG5vdCBzdXBwb3J0ZWQsIGV4aXN0cyBmb3IgdGhlIGxpZmV0aW1lIG9mIHRoZSBzaW0nICk7XHJcbiAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgfVxyXG59XHJcblxyXG5nZW9tZXRyaWNPcHRpY3MucmVnaXN0ZXIoICdMYWJlbE5vZGUnLCBMYWJlbE5vZGUgKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBLE9BQU9BLGNBQWMsTUFBaUMsa0RBQWtEO0FBR3hHLFNBQVNDLFFBQVEsUUFBUSxzQ0FBc0M7QUFDL0QsT0FBT0MsZUFBZSxNQUFNLDZCQUE2QjtBQUN6RCxPQUFPQyxRQUFRLE1BQU0sbUJBQW1CO0FBQ3hDLE9BQU9DLFdBQVcsTUFBTSxzQkFBc0I7QUFDOUMsT0FBT0MsU0FBUyxNQUFNLDBDQUEwQztBQUVoRSxPQUFPQyxTQUFTLE1BQU0scUNBQXFDO0FBYzNELGVBQWUsTUFBTUMsU0FBUyxTQUFTUCxjQUFjLENBQUM7RUFFcEQ7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ1NRLFdBQVdBLENBQUVDLG1CQUE4QyxFQUM5Q0MsZ0JBQTRDLEVBQzVDQyxxQkFBNkQs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