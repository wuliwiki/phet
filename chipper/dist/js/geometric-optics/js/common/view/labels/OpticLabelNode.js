// Copyright 2022, University of Colorado Boulder

/**
 * OpticLabelNode is the label on the optic.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import DerivedProperty from '../../../../../axon/js/DerivedProperty.js';
import geometricOptics from '../../../geometricOptics.js';
import GeometricOpticsStrings from '../../../GeometricOpticsStrings.js';
import Lens from '../../../lens/model/Lens.js';
import Mirror from '../../../mirror/model/Mirror.js';
import LabelNode from './LabelNode.js';
import StringIO from '../../../../../tandem/js/types/StringIO.js';
export default class OpticLabelNode extends LabelNode {
  /**
   * @param optic - the optic to label
   * @param zoomTransformProperty - model-view transform that the user controls by zooming in/out
   * @param providedOptions
   */
  constructor(optic, zoomTransformProperty, providedOptions) {
    const opticLabelPositionProperty = new DerivedProperty([optic.positionProperty, optic.diameterProperty], (position, diameter) => position.minusXY(0, diameter / 2));
    const labelStringProperty = new DerivedProperty([optic.opticSurfaceTypeProperty, GeometricOpticsStrings.label.convexLensStringProperty, GeometricOpticsStrings.label.concaveLensStringProperty, GeometricOpticsStrings.label.convexMirrorStringProperty, GeometricOpticsStrings.label.concaveMirrorStringProperty, GeometricOpticsStrings.label.flatMirrorStringProperty], (opticSurfaceType, convexLensString, concaveLensString, convexMirrorString, concaveMirrorString, flatMirrorString) => {
      let text;
      if (optic instanceof Lens) {
        if (opticSurfaceType === 'convex') {
          text = convexLensString;
        } else if (opticSurfaceType === 'concave') {
          text = concaveLensString;
        } else {
          throw Error(`unsupported opticSurfaceType for lens: ${opticSurfaceType}`);
        }
      } else {
        // mirror
        assert && assert(optic instanceof Mirror); // eslint-disable-line no-simple-type-checking-assertions
        if (opticSurfaceType === 'convex') {
          text = convexMirrorString;
        } else if (opticSurfaceType === 'concave') {
          text = concaveMirrorString;
        } else if (opticSurfaceType === 'flat') {
          text = flatMirrorString;
        } else {
          throw Error(`unsupported opticSurfaceType for mirror: ${opticSurfaceType}`);
        }
      }
      return text;
    }, {
      tandem: providedOptions.tandem.createTandem('labelStringProperty'),
      phetioValueType: StringIO
    });
    super(labelStringProperty, opticLabelPositionProperty, zoomTransformProperty, providedOptions);
  }
}
geometricOptics.register('OpticLabelNode', OpticLabelNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJnZW9tZXRyaWNPcHRpY3MiLCJHZW9tZXRyaWNPcHRpY3NTdHJpbmdzIiwiTGVucyIsIk1pcnJvciIsIkxhYmVsTm9kZSIsIlN0cmluZ0lPIiwiT3B0aWNMYWJlbE5vZGUiLCJjb25zdHJ1Y3RvciIsIm9wdGljIiwiem9vbVRyYW5zZm9ybVByb3BlcnR5IiwicHJvdmlkZWRPcHRpb25zIiwib3B0aWNMYWJlbFBvc2l0aW9uUHJvcGVydHkiLCJwb3NpdGlvblByb3BlcnR5IiwiZGlhbWV0ZXJQcm9wZXJ0eSIsInBvc2l0aW9uIiwiZGlhbWV0ZXIiLCJtaW51c1hZIiwibGFiZWxTdHJpbmdQcm9wZXJ0eSIsIm9wdGljU3VyZmFjZVR5cGVQcm9wZXJ0eSIsImxhYmVsIiwiY29udmV4TGVuc1N0cmluZ1Byb3BlcnR5IiwiY29uY2F2ZUxlbnNTdHJpbmdQcm9wZXJ0eSIsImNvbnZleE1pcnJvclN0cmluZ1Byb3BlcnR5IiwiY29uY2F2ZU1pcnJvclN0cmluZ1Byb3BlcnR5IiwiZmxhdE1pcnJvclN0cmluZ1Byb3BlcnR5Iiwib3B0aWNTdXJmYWNlVHlwZSIsImNvbnZleExlbnNTdHJpbmciLCJjb25jYXZlTGVuc1N0cmluZyIsImNvbnZleE1pcnJvclN0cmluZyIsImNvbmNhdmVNaXJyb3JTdHJpbmciLCJmbGF0TWlycm9yU3RyaW5nIiwidGV4dCIsIkVycm9yIiwiYXNzZXJ0IiwidGFuZGVtIiwiY3JlYXRlVGFuZGVtIiwicGhldGlvVmFsdWVUeXBlIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJPcHRpY0xhYmVsTm9kZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogT3B0aWNMYWJlbE5vZGUgaXMgdGhlIGxhYmVsIG9uIHRoZSBvcHRpYy5cclxuICpcclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICovXHJcblxyXG5pbXBvcnQgRGVyaXZlZFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uLy4uL2F4b24vanMvRGVyaXZlZFByb3BlcnR5LmpzJztcclxuaW1wb3J0IFRSZWFkT25seVByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uLy4uL2F4b24vanMvVFJlYWRPbmx5UHJvcGVydHkuanMnO1xyXG5pbXBvcnQgeyBFbXB0eVNlbGZPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCBNb2RlbFZpZXdUcmFuc2Zvcm0yIGZyb20gJy4uLy4uLy4uLy4uLy4uL3BoZXRjb21tb24vanMvdmlldy9Nb2RlbFZpZXdUcmFuc2Zvcm0yLmpzJztcclxuaW1wb3J0IGdlb21ldHJpY09wdGljcyBmcm9tICcuLi8uLi8uLi9nZW9tZXRyaWNPcHRpY3MuanMnO1xyXG5pbXBvcnQgR2VvbWV0cmljT3B0aWNzU3RyaW5ncyBmcm9tICcuLi8uLi8uLi9HZW9tZXRyaWNPcHRpY3NTdHJpbmdzLmpzJztcclxuaW1wb3J0IExlbnMgZnJvbSAnLi4vLi4vLi4vbGVucy9tb2RlbC9MZW5zLmpzJztcclxuaW1wb3J0IE1pcnJvciBmcm9tICcuLi8uLi8uLi9taXJyb3IvbW9kZWwvTWlycm9yLmpzJztcclxuaW1wb3J0IE9wdGljIGZyb20gJy4uLy4uL21vZGVsL09wdGljLmpzJztcclxuaW1wb3J0IExhYmVsTm9kZSwgeyBMYWJlbE5vZGVPcHRpb25zIH0gZnJvbSAnLi9MYWJlbE5vZGUuanMnO1xyXG5pbXBvcnQgeyBPcHRpY1N1cmZhY2VUeXBlIH0gZnJvbSAnLi4vLi4vbW9kZWwvT3B0aWNTdXJmYWNlVHlwZS5qcyc7XHJcbmltcG9ydCBTdHJpbmdJTyBmcm9tICcuLi8uLi8uLi8uLi8uLi90YW5kZW0vanMvdHlwZXMvU3RyaW5nSU8uanMnO1xyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IEVtcHR5U2VsZk9wdGlvbnM7XHJcblxyXG5leHBvcnQgdHlwZSBPcHRpY0xhYmVsTm9kZU9wdGlvbnMgPSBTZWxmT3B0aW9ucyAmIExhYmVsTm9kZU9wdGlvbnM7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBPcHRpY0xhYmVsTm9kZSBleHRlbmRzIExhYmVsTm9kZSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSBvcHRpYyAtIHRoZSBvcHRpYyB0byBsYWJlbFxyXG4gICAqIEBwYXJhbSB6b29tVHJhbnNmb3JtUHJvcGVydHkgLSBtb2RlbC12aWV3IHRyYW5zZm9ybSB0aGF0IHRoZSB1c2VyIGNvbnRyb2xzIGJ5IHpvb21pbmcgaW4vb3V0XHJcbiAgICogQHBhcmFtIHByb3ZpZGVkT3B0aW9uc1xyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25zdHJ1Y3Rvciggb3B0aWM6IE9wdGljLFxyXG4gICAgICAgICAgICAgICAgICAgICAgem9vbVRyYW5zZm9ybVByb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxNb2RlbFZpZXdUcmFuc2Zvcm0yPixcclxuICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVkT3B0aW9uczogT3B0aWNMYWJlbE5vZGVPcHRpb25zICkge1xyXG5cclxuICAgIGNvbnN0IG9wdGljTGFiZWxQb3NpdGlvblByb3BlcnR5ID0gbmV3IERlcml2ZWRQcm9wZXJ0eShcclxuICAgICAgWyBvcHRpYy5wb3NpdGlvblByb3BlcnR5LCBvcHRpYy5kaWFtZXRlclByb3BlcnR5IF0sXHJcbiAgICAgICggcG9zaXRpb24sIGRpYW1ldGVyICkgPT4gcG9zaXRpb24ubWludXNYWSggMCwgZGlhbWV0ZXIgLyAyIClcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgbGFiZWxTdHJpbmdQcm9wZXJ0eSA9IG5ldyBEZXJpdmVkUHJvcGVydHkoIFtcclxuICAgICAgb3B0aWMub3B0aWNTdXJmYWNlVHlwZVByb3BlcnR5LFxyXG4gICAgICBHZW9tZXRyaWNPcHRpY3NTdHJpbmdzLmxhYmVsLmNvbnZleExlbnNTdHJpbmdQcm9wZXJ0eSxcclxuICAgICAgR2VvbWV0cmljT3B0aWNzU3RyaW5ncy5sYWJlbC5jb25jYXZlTGVuc1N0cmluZ1Byb3BlcnR5LFxyXG4gICAgICBHZW9tZXRyaWNPcHRpY3NTdHJpbmdzLmxhYmVsLmNvbnZleE1pcnJvclN0cmluZ1Byb3BlcnR5LFxyXG4gICAgICBHZW9tZXRyaWNPcHRpY3NTdHJpbmdzLmxhYmVsLmNvbmNhdmVNaXJyb3JTdHJpbmdQcm9wZXJ0eSxcclxuICAgICAgR2VvbWV0cmljT3B0aWNzU3RyaW5ncy5sYWJlbC5mbGF0TWlycm9yU3RyaW5nUHJvcGVydHlcclxuICAgIF0sIChcclxuICAgICAgb3B0aWNTdXJmYWNlVHlwZTogT3B0aWNTdXJmYWNlVHlwZSxcclxuICAgICAgY29udmV4TGVuc1N0cmluZzogc3RyaW5nLFxyXG4gICAgICBjb25jYXZlTGVuc1N0cmluZzogc3RyaW5nLFxyXG4gICAgICBjb252ZXhNaXJyb3JTdHJpbmc6IHN0cmluZyxcclxuICAgICAgY29uY2F2ZU1pcnJvclN0cmluZzogc3RyaW5nLFxyXG4gICAgICBmbGF0TWlycm9yU3RyaW5nOiBzdHJpbmdcclxuICAgICkgPT4ge1xyXG4gICAgICBsZXQgdGV4dDogc3RyaW5nO1xyXG4gICAgICBpZiAoIG9wdGljIGluc3RhbmNlb2YgTGVucyApIHtcclxuICAgICAgICBpZiAoIG9wdGljU3VyZmFjZVR5cGUgPT09ICdjb252ZXgnICkge1xyXG4gICAgICAgICAgdGV4dCA9IGNvbnZleExlbnNTdHJpbmc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCBvcHRpY1N1cmZhY2VUeXBlID09PSAnY29uY2F2ZScgKSB7XHJcbiAgICAgICAgICB0ZXh0ID0gY29uY2F2ZUxlbnNTdHJpbmc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgdGhyb3cgRXJyb3IoIGB1bnN1cHBvcnRlZCBvcHRpY1N1cmZhY2VUeXBlIGZvciBsZW5zOiAke29wdGljU3VyZmFjZVR5cGV9YCApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAvLyBtaXJyb3JcclxuICAgICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBvcHRpYyBpbnN0YW5jZW9mIE1pcnJvciApOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNpbXBsZS10eXBlLWNoZWNraW5nLWFzc2VydGlvbnNcclxuICAgICAgICBpZiAoIG9wdGljU3VyZmFjZVR5cGUgPT09ICdjb252ZXgnICkge1xyXG4gICAgICAgICAgdGV4dCA9IGNvbnZleE1pcnJvclN0cmluZztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoIG9wdGljU3VyZmFjZVR5cGUgPT09ICdjb25jYXZlJyApIHtcclxuICAgICAgICAgIHRleHQgPSBjb25jYXZlTWlycm9yU3RyaW5nO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICggb3B0aWNTdXJmYWNlVHlwZSA9PT0gJ2ZsYXQnICkge1xyXG4gICAgICAgICAgdGV4dCA9IGZsYXRNaXJyb3JTdHJpbmc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgdGhyb3cgRXJyb3IoIGB1bnN1cHBvcnRlZCBvcHRpY1N1cmZhY2VUeXBlIGZvciBtaXJyb3I6ICR7b3B0aWNTdXJmYWNlVHlwZX1gICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0ZXh0O1xyXG4gICAgfSwge1xyXG4gICAgICB0YW5kZW06IHByb3ZpZGVkT3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnbGFiZWxTdHJpbmdQcm9wZXJ0eScgKSxcclxuICAgICAgcGhldGlvVmFsdWVUeXBlOiBTdHJpbmdJT1xyXG4gICAgfSApO1xyXG5cclxuICAgIHN1cGVyKCBsYWJlbFN0cmluZ1Byb3BlcnR5LCBvcHRpY0xhYmVsUG9zaXRpb25Qcm9wZXJ0eSwgem9vbVRyYW5zZm9ybVByb3BlcnR5LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuICB9XHJcbn1cclxuXHJcbmdlb21ldHJpY09wdGljcy5yZWdpc3RlciggJ09wdGljTGFiZWxOb2RlJywgT3B0aWNMYWJlbE5vZGUgKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsZUFBZSxNQUFNLDJDQUEyQztBQUl2RSxPQUFPQyxlQUFlLE1BQU0sNkJBQTZCO0FBQ3pELE9BQU9DLHNCQUFzQixNQUFNLG9DQUFvQztBQUN2RSxPQUFPQyxJQUFJLE1BQU0sNkJBQTZCO0FBQzlDLE9BQU9DLE1BQU0sTUFBTSxpQ0FBaUM7QUFFcEQsT0FBT0MsU0FBUyxNQUE0QixnQkFBZ0I7QUFFNUQsT0FBT0MsUUFBUSxNQUFNLDRDQUE0QztBQU1qRSxlQUFlLE1BQU1DLGNBQWMsU0FBU0YsU0FBUyxDQUFDO0VBRXBEO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDU0csV0FBV0EsQ0FBRUMsS0FBWSxFQUNaQyxxQkFBNkQsRUFDN0RDLGVBQXNDLEVBQUc7SUFFM0QsTUFBTUMsMEJBQTBCLEdBQUcsSUFBSVosZUFBZSxDQUNwRCxDQUFFUyxLQUFLLENBQUNJLGdCQUFnQixFQUFFSixLQUFLLENBQUNLLGdCQUFnQixDQUFFLEVBQ2xELENBQUVDLFFBQVEsRUFBRUMsUUFBUSxLQUFNRCxRQUFRLENBQUNFLE9BQU8sQ0FBRSxDQUFDLEVBQUVELFFBQVEsR0FBRyxDQUFFLENBQzlELENBQUM7SUFFRCxNQUFNRSxtQkFBbUIsR0FBRyxJQUFJbEIsZUFBZSxDQUFFLENBQy9DUyxLQUFLLENBQUNVLHdCQUF3QixFQUM5QmpCLHNCQUFzQixDQUFDa0IsS0FBSyxDQUFDQyx3QkFBd0IsRUFDckRuQixzQkFBc0IsQ0FBQ2tCLEtBQUssQ0FBQ0UseUJBQXlCLEVBQ3REcEIsc0JBQXNCLENBQUNrQixLQUFLLENBQUNHLDBCQUEwQixFQUN2RHJCLHNCQUFzQixDQUFDa0IsS0FBSyxDQUFDSSwyQkFBMkIsRUFDeER0QixzQkFBc0IsQ0FBQ2tCLEtBQUssQ0FBQ0ssd0JBQXdCLENBQ3RELEVBQUUsQ0FDREMsZ0JBQWtDLEVBQ2xDQyxnQkFBd0IsRUFDeEJDLGlCQUF5QixFQUN6QkMsa0JBQTBCLEVBQzFCQyxtQkFBMkIsRUFDM0JDLGdCQUF3QixLQUNyQjtNQUNILElBQUlDLElBQVk7TUFDaEIsSUFBS3ZCLEtBQUssWUFBWU4sSUFBSSxFQUFHO1FBQzNCLElBQUt1QixnQkFBZ0IsS0FBSyxRQUFRLEVBQUc7VUFDbkNNLElBQUksR0FBR0wsZ0JBQWdCO1FBQ3pCLENBQUMsTUFDSSxJQUFLRCxnQkFBZ0IsS0FBSyxTQUFTLEVBQUc7VUFDekNNLElBQUksR0FBR0osaUJBQWlCO1FBQzFCLENBQUMsTUFDSTtVQUNILE1BQU1LLEtBQUssQ0FBRywwQ0FBeUNQLGdCQUFpQixFQUFFLENBQUM7UUFDN0U7TUFDRixDQUFDLE1BQ0k7UUFDSDtRQUNBUSxNQUFNLElBQUlBLE1BQU0sQ0FBRXpCLEtBQUssWUFBWUwsTUFBTyxDQUFDLENBQUMsQ0FBQztRQUM3QyxJQUFLc0IsZ0JBQWdCLEtBQUssUUFBUSxFQUFHO1VBQ25DTSxJQUFJLEdBQUdILGtCQUFrQjtRQUMzQixDQUFDLE1BQ0ksSUFBS0gsZ0JBQWdCLEtBQUssU0FBUyxFQUFHO1VBQ3pDTSxJQUFJLEdBQUdGLG1CQUFtQjtRQUM1QixDQUFDLE1BQ0ksSUFBS0osZ0JBQWdCLEtBQUssTUFBTSxFQUFHO1VBQ3RDTSxJQUFJLEdBQUdELGdCQUFnQjtRQUN6QixDQUFDLE1BQ0k7VUFDSCxNQUFNRSxLQUFLLENBQUcsNENBQTJDUCxnQkFBaUIsRUFBRSxDQUFDO1FBQy9FO01BQ0Y7TUFDQSxPQUFPTSxJQUFJO0lBQ2IsQ0FBQyxFQUFFO01BQ0RHLE1BQU0sRUFBRXhCLGVBQWUsQ0FBQ3dCLE1BQU0sQ0FBQ0MsWUFBWSxDQUFFLHFCQUFzQixDQUFDO01BQ3BFQyxlQUFlLEVBQUUvQjtJQUNuQixDQUFFLENBQUM7SUFFSCxLQUFLLENBQUVZLG1CQUFtQixFQUFFTiwwQkFBMEIsRUFBRUYscUJBQXFCLEVBQUVDLGVBQWdCLENBQUM7RUFDbEc7QUFDRjtBQUVBVixlQUFlLENBQUNxQyxRQUFRLENBQUUsZ0JBQWdCLEVBQUUvQixjQUFlLENBQUMifQ==