// Copyright 2021-2022, University of Colorado Boulder

/**
 * ProjectionScreenNode is the view of the projection screen.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 * @author Martin Veillette
 */

import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import Bounds2 from '../../../../dot/js/Bounds2.js';
import { Circle, Color, DragListener, FocusHighlightFromNode, Image, InteractiveHighlighting, KeyboardDragListener, Line, Node, Path } from '../../../../scenery/js/imports.js';
import projectionScreenBottom_png from '../../../images/projectionScreenBottom_png.js';
import projectionScreenTop_png from '../../../images/projectionScreenTop_png.js';
import GOColors from '../../common/GOColors.js';
import geometricOptics from '../../geometricOptics.js';
import CueingArrowsNode from './CueingArrowsNode.js';
import GOQueryParameters from '../../common/GOQueryParameters.js';
import OriginNode from './OriginNode.js';
import GOConstants from '../../common/GOConstants.js';
import BooleanProperty from '../../../../axon/js/BooleanProperty.js';
import optionize, { combineOptions } from '../../../../phet-core/js/optionize.js';
export default class ProjectionScreenNode extends InteractiveHighlighting(Node) {
  // Resets things that are specific to this class.

  /**
   * @param projectionScreen
   * @param opticPositionProperty
   * @param sceneBoundsProperty - bounds for the scene, in model coordinates
   * @param modelViewTransform
   * @param providedOptions
   */
  constructor(projectionScreen, opticPositionProperty, sceneBoundsProperty, modelViewTransform, providedOptions) {
    const options = optionize()({
      // NodeOptions
      tagName: 'div',
      focusable: true,
      phetioInputEnabledPropertyInstrumented: true
    }, providedOptions);
    super(options);

    // The screen part of the projection screen, drawn in perspective.
    const screenNode = new Path(modelViewTransform.modelToViewShape(projectionScreen.screenShape), {
      fill: GOColors.projectionScreenFillProperty,
      stroke: phet.chipper.queryParameters.dev ? 'red' : GOColors.projectionScreenStrokeProperty,
      lineWidth: 2,
      // projectionScreen.positionProperty is at the center of screenNode
      centerX: 0,
      centerY: 0
    });

    // Bar across the top edge of the screen. Aka the 'screen case', because the screen retracts into this part.
    const topBarNode = new Image(projectionScreenTop_png, {
      scale: 0.5,
      // offsets were adjusted empirically to align Image with screenNode
      left: screenNode.left - 14,
      bottom: screenNode.top + 25
    });

    // Bar across the bottom edge of the screen
    const bottomBarNode = new Image(projectionScreenBottom_png, {
      scale: 0.5,
      // offsets were adjusted empirically to align Image with screenNode
      right: screenNode.right + 9,
      bottom: screenNode.bottom + 18
    });

    // The pull string, attached to the bottom bar
    const pullStringNode = new Line(0, 0, 0, 50, {
      stroke: GOColors.projectionScreenStrokeProperty,
      lineWidth: 3,
      centerX: screenNode.centerX,
      top: bottomBarNode.top
    });

    // The knob attached to the pull string
    const knobNode = new Circle(5, {
      stroke: GOColors.projectionScreenStrokeProperty,
      fill: Color.grayColor(180),
      center: pullStringNode.centerBottom
    });
    const parentNode = new Node({
      children: [pullStringNode, knobNode, topBarNode, bottomBarNode, screenNode]
    });
    this.addChild(parentNode);
    this.setFocusHighlight(new FocusHighlightFromNode(parentNode));
    const wasDraggedProperty = new BooleanProperty(false, {
      tandem: options.tandem.createTandem('wasDraggedProperty'),
      phetioReadOnly: true
    });
    const cueingArrowsNode = new CueingArrowsNode({
      left: parentNode.right,
      centerY: parentNode.centerY,
      visibleProperty: CueingArrowsNode.createVisibleProperty(this.inputEnabledProperty, wasDraggedProperty)
    });
    this.addChild(cueingArrowsNode);

    // Red dot at the origin
    if (GOQueryParameters.debugOrigins) {
      this.addChild(new OriginNode());
    }
    projectionScreen.positionProperty.link(position => {
      this.translation = modelViewTransform.modelToViewPosition(position);
    });
    const modelScreenWidth = modelViewTransform.viewToModelDeltaX(screenNode.width);
    const modelScreenHeight = Math.abs(modelViewTransform.viewToModelDeltaY(screenNode.height));

    // Drag bounds, in model coordinates - within model bounds, and right of the optic.
    const dragBoundsProperty = new DerivedProperty([sceneBoundsProperty, opticPositionProperty], (sceneBounds, opticPosition) => new Bounds2(opticPosition.x + GOConstants.MIN_DISTANCE_FROM_OPTIC_TO_PROJECTION_SCREEN, sceneBounds.minY + modelScreenHeight / 2, sceneBounds.maxX - modelScreenWidth / 2, sceneBounds.maxY - modelScreenHeight / 2));

    // Keep the projection screen within drag bounds.
    dragBoundsProperty.link(dragBounds => {
      projectionScreen.positionProperty.value = dragBounds.closestPointTo(projectionScreen.positionProperty.value);
    });

    // Drag action that is common to DragListener and KeyboardDragListener
    const drag = () => {
      wasDraggedProperty.value = true;
    };
    this.addInputListener(new DragListener({
      pressCursor: 'pointer',
      useInputListenerCursor: true,
      positionProperty: projectionScreen.positionProperty,
      dragBoundsProperty: dragBoundsProperty,
      transform: modelViewTransform,
      drag: drag,
      tandem: options.tandem.createTandem('dragListener')
    }));
    const keyboardDragListener = new KeyboardDragListener(combineOptions({}, GOConstants.KEYBOARD_DRAG_LISTENER_OPTIONS, {
      positionProperty: projectionScreen.positionProperty,
      dragBoundsProperty: dragBoundsProperty,
      drag: drag,
      transform: modelViewTransform,
      tandem: options.tandem.createTandem('keyboardDragListener')
    }));
    this.addInputListener(keyboardDragListener);
    this.addLinkedElement(projectionScreen, {
      tandem: options.tandem.createTandem(projectionScreen.tandem.name)
    });
    this.resetProjectionScreenNode = () => {
      wasDraggedProperty.reset();
    };
  }
  dispose() {
    assert && assert(false, 'dispose is not supported, exists for the lifetime of the sim');
    super.dispose();
  }
  reset() {
    this.resetProjectionScreenNode();
  }
}
geometricOptics.register('ProjectionScreenNode', ProjectionScreenNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJCb3VuZHMyIiwiQ2lyY2xlIiwiQ29sb3IiLCJEcmFnTGlzdGVuZXIiLCJGb2N1c0hpZ2hsaWdodEZyb21Ob2RlIiwiSW1hZ2UiLCJJbnRlcmFjdGl2ZUhpZ2hsaWdodGluZyIsIktleWJvYXJkRHJhZ0xpc3RlbmVyIiwiTGluZSIsIk5vZGUiLCJQYXRoIiwicHJvamVjdGlvblNjcmVlbkJvdHRvbV9wbmciLCJwcm9qZWN0aW9uU2NyZWVuVG9wX3BuZyIsIkdPQ29sb3JzIiwiZ2VvbWV0cmljT3B0aWNzIiwiQ3VlaW5nQXJyb3dzTm9kZSIsIkdPUXVlcnlQYXJhbWV0ZXJzIiwiT3JpZ2luTm9kZSIsIkdPQ29uc3RhbnRzIiwiQm9vbGVhblByb3BlcnR5Iiwib3B0aW9uaXplIiwiY29tYmluZU9wdGlvbnMiLCJQcm9qZWN0aW9uU2NyZWVuTm9kZSIsImNvbnN0cnVjdG9yIiwicHJvamVjdGlvblNjcmVlbiIsIm9wdGljUG9zaXRpb25Qcm9wZXJ0eSIsInNjZW5lQm91bmRzUHJvcGVydHkiLCJtb2RlbFZpZXdUcmFuc2Zvcm0iLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwidGFnTmFtZSIsImZvY3VzYWJsZSIsInBoZXRpb0lucHV0RW5hYmxlZFByb3BlcnR5SW5zdHJ1bWVudGVkIiwic2NyZWVuTm9kZSIsIm1vZGVsVG9WaWV3U2hhcGUiLCJzY3JlZW5TaGFwZSIsImZpbGwiLCJwcm9qZWN0aW9uU2NyZWVuRmlsbFByb3BlcnR5Iiwic3Ryb2tlIiwicGhldCIsImNoaXBwZXIiLCJxdWVyeVBhcmFtZXRlcnMiLCJkZXYiLCJwcm9qZWN0aW9uU2NyZWVuU3Ryb2tlUHJvcGVydHkiLCJsaW5lV2lkdGgiLCJjZW50ZXJYIiwiY2VudGVyWSIsInRvcEJhck5vZGUiLCJzY2FsZSIsImxlZnQiLCJib3R0b20iLCJ0b3AiLCJib3R0b21CYXJOb2RlIiwicmlnaHQiLCJwdWxsU3RyaW5nTm9kZSIsImtub2JOb2RlIiwiZ3JheUNvbG9yIiwiY2VudGVyIiwiY2VudGVyQm90dG9tIiwicGFyZW50Tm9kZSIsImNoaWxkcmVuIiwiYWRkQ2hpbGQiLCJzZXRGb2N1c0hpZ2hsaWdodCIsIndhc0RyYWdnZWRQcm9wZXJ0eSIsInRhbmRlbSIsImNyZWF0ZVRhbmRlbSIsInBoZXRpb1JlYWRPbmx5IiwiY3VlaW5nQXJyb3dzTm9kZSIsInZpc2libGVQcm9wZXJ0eSIsImNyZWF0ZVZpc2libGVQcm9wZXJ0eSIsImlucHV0RW5hYmxlZFByb3BlcnR5IiwiZGVidWdPcmlnaW5zIiwicG9zaXRpb25Qcm9wZXJ0eSIsImxpbmsiLCJwb3NpdGlvbiIsInRyYW5zbGF0aW9uIiwibW9kZWxUb1ZpZXdQb3NpdGlvbiIsIm1vZGVsU2NyZWVuV2lkdGgiLCJ2aWV3VG9Nb2RlbERlbHRhWCIsIndpZHRoIiwibW9kZWxTY3JlZW5IZWlnaHQiLCJNYXRoIiwiYWJzIiwidmlld1RvTW9kZWxEZWx0YVkiLCJoZWlnaHQiLCJkcmFnQm91bmRzUHJvcGVydHkiLCJzY2VuZUJvdW5kcyIsIm9wdGljUG9zaXRpb24iLCJ4IiwiTUlOX0RJU1RBTkNFX0ZST01fT1BUSUNfVE9fUFJPSkVDVElPTl9TQ1JFRU4iLCJtaW5ZIiwibWF4WCIsIm1heFkiLCJkcmFnQm91bmRzIiwidmFsdWUiLCJjbG9zZXN0UG9pbnRUbyIsImRyYWciLCJhZGRJbnB1dExpc3RlbmVyIiwicHJlc3NDdXJzb3IiLCJ1c2VJbnB1dExpc3RlbmVyQ3Vyc29yIiwidHJhbnNmb3JtIiwia2V5Ym9hcmREcmFnTGlzdGVuZXIiLCJLRVlCT0FSRF9EUkFHX0xJU1RFTkVSX09QVElPTlMiLCJhZGRMaW5rZWRFbGVtZW50IiwibmFtZSIsInJlc2V0UHJvamVjdGlvblNjcmVlbk5vZGUiLCJyZXNldCIsImRpc3Bvc2UiLCJhc3NlcnQiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlByb2plY3Rpb25TY3JlZW5Ob2RlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIxLTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFByb2plY3Rpb25TY3JlZW5Ob2RlIGlzIHRoZSB2aWV3IG9mIHRoZSBwcm9qZWN0aW9uIHNjcmVlbi5cclxuICpcclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICogQGF1dGhvciBNYXJ0aW4gVmVpbGxldHRlXHJcbiAqL1xyXG5cclxuaW1wb3J0IERlcml2ZWRQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL0Rlcml2ZWRQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBCb3VuZHMyIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9Cb3VuZHMyLmpzJztcclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgTW9kZWxWaWV3VHJhbnNmb3JtMiBmcm9tICcuLi8uLi8uLi8uLi9waGV0Y29tbW9uL2pzL3ZpZXcvTW9kZWxWaWV3VHJhbnNmb3JtMi5qcyc7XHJcbmltcG9ydCB7IENpcmNsZSwgQ29sb3IsIERyYWdMaXN0ZW5lciwgRm9jdXNIaWdobGlnaHRGcm9tTm9kZSwgSW1hZ2UsIEludGVyYWN0aXZlSGlnaGxpZ2h0aW5nLCBLZXlib2FyZERyYWdMaXN0ZW5lciwgS2V5Ym9hcmREcmFnTGlzdGVuZXJPcHRpb25zLCBMaW5lLCBOb2RlLCBOb2RlT3B0aW9ucywgUGF0aCB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBwcm9qZWN0aW9uU2NyZWVuQm90dG9tX3BuZyBmcm9tICcuLi8uLi8uLi9pbWFnZXMvcHJvamVjdGlvblNjcmVlbkJvdHRvbV9wbmcuanMnO1xyXG5pbXBvcnQgcHJvamVjdGlvblNjcmVlblRvcF9wbmcgZnJvbSAnLi4vLi4vLi4vaW1hZ2VzL3Byb2plY3Rpb25TY3JlZW5Ub3BfcG5nLmpzJztcclxuaW1wb3J0IEdPQ29sb3JzIGZyb20gJy4uLy4uL2NvbW1vbi9HT0NvbG9ycy5qcyc7XHJcbmltcG9ydCBnZW9tZXRyaWNPcHRpY3MgZnJvbSAnLi4vLi4vZ2VvbWV0cmljT3B0aWNzLmpzJztcclxuaW1wb3J0IFByb2plY3Rpb25TY3JlZW4gZnJvbSAnLi4vbW9kZWwvUHJvamVjdGlvblNjcmVlbi5qcyc7XHJcbmltcG9ydCBDdWVpbmdBcnJvd3NOb2RlIGZyb20gJy4vQ3VlaW5nQXJyb3dzTm9kZS5qcyc7XHJcbmltcG9ydCBHT1F1ZXJ5UGFyYW1ldGVycyBmcm9tICcuLi8uLi9jb21tb24vR09RdWVyeVBhcmFtZXRlcnMuanMnO1xyXG5pbXBvcnQgVFJlYWRPbmx5UHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9UUmVhZE9ubHlQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBPcmlnaW5Ob2RlIGZyb20gJy4vT3JpZ2luTm9kZS5qcyc7XHJcbmltcG9ydCBHT0NvbnN0YW50cyBmcm9tICcuLi8uLi9jb21tb24vR09Db25zdGFudHMuanMnO1xyXG5pbXBvcnQgQm9vbGVhblByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvQm9vbGVhblByb3BlcnR5LmpzJztcclxuaW1wb3J0IG9wdGlvbml6ZSwgeyBjb21iaW5lT3B0aW9ucywgRW1wdHlTZWxmT3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgUGlja1JlcXVpcmVkIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9QaWNrUmVxdWlyZWQuanMnO1xyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IEVtcHR5U2VsZk9wdGlvbnM7XHJcblxyXG50eXBlIFByb2plY3Rpb25TY3JlZW5Ob2RlT3B0aW9ucyA9IFNlbGZPcHRpb25zICYgUGlja1JlcXVpcmVkPE5vZGVPcHRpb25zLCAndGFuZGVtJz47XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9qZWN0aW9uU2NyZWVuTm9kZSBleHRlbmRzIEludGVyYWN0aXZlSGlnaGxpZ2h0aW5nKCBOb2RlICkge1xyXG5cclxuICAvLyBSZXNldHMgdGhpbmdzIHRoYXQgYXJlIHNwZWNpZmljIHRvIHRoaXMgY2xhc3MuXHJcbiAgcHJpdmF0ZSByZWFkb25seSByZXNldFByb2plY3Rpb25TY3JlZW5Ob2RlOiAoKSA9PiB2b2lkO1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0gcHJvamVjdGlvblNjcmVlblxyXG4gICAqIEBwYXJhbSBvcHRpY1Bvc2l0aW9uUHJvcGVydHlcclxuICAgKiBAcGFyYW0gc2NlbmVCb3VuZHNQcm9wZXJ0eSAtIGJvdW5kcyBmb3IgdGhlIHNjZW5lLCBpbiBtb2RlbCBjb29yZGluYXRlc1xyXG4gICAqIEBwYXJhbSBtb2RlbFZpZXdUcmFuc2Zvcm1cclxuICAgKiBAcGFyYW0gcHJvdmlkZWRPcHRpb25zXHJcbiAgICovXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBwcm9qZWN0aW9uU2NyZWVuOiBQcm9qZWN0aW9uU2NyZWVuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgb3B0aWNQb3NpdGlvblByb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxWZWN0b3IyPixcclxuICAgICAgICAgICAgICAgICAgICAgIHNjZW5lQm91bmRzUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PEJvdW5kczI+LFxyXG4gICAgICAgICAgICAgICAgICAgICAgbW9kZWxWaWV3VHJhbnNmb3JtOiBNb2RlbFZpZXdUcmFuc2Zvcm0yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZWRPcHRpb25zOiBQcm9qZWN0aW9uU2NyZWVuTm9kZU9wdGlvbnMgKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxQcm9qZWN0aW9uU2NyZWVuTm9kZU9wdGlvbnMsIFNlbGZPcHRpb25zLCBOb2RlT3B0aW9ucz4oKSgge1xyXG5cclxuICAgICAgLy8gTm9kZU9wdGlvbnNcclxuICAgICAgdGFnTmFtZTogJ2RpdicsXHJcbiAgICAgIGZvY3VzYWJsZTogdHJ1ZSxcclxuICAgICAgcGhldGlvSW5wdXRFbmFibGVkUHJvcGVydHlJbnN0cnVtZW50ZWQ6IHRydWVcclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIHN1cGVyKCBvcHRpb25zICk7XHJcblxyXG4gICAgLy8gVGhlIHNjcmVlbiBwYXJ0IG9mIHRoZSBwcm9qZWN0aW9uIHNjcmVlbiwgZHJhd24gaW4gcGVyc3BlY3RpdmUuXHJcbiAgICBjb25zdCBzY3JlZW5Ob2RlID0gbmV3IFBhdGgoIG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1NoYXBlKCBwcm9qZWN0aW9uU2NyZWVuLnNjcmVlblNoYXBlICksIHtcclxuICAgICAgZmlsbDogR09Db2xvcnMucHJvamVjdGlvblNjcmVlbkZpbGxQcm9wZXJ0eSxcclxuICAgICAgc3Ryb2tlOiBwaGV0LmNoaXBwZXIucXVlcnlQYXJhbWV0ZXJzLmRldiA/ICdyZWQnIDogR09Db2xvcnMucHJvamVjdGlvblNjcmVlblN0cm9rZVByb3BlcnR5LFxyXG4gICAgICBsaW5lV2lkdGg6IDIsXHJcblxyXG4gICAgICAvLyBwcm9qZWN0aW9uU2NyZWVuLnBvc2l0aW9uUHJvcGVydHkgaXMgYXQgdGhlIGNlbnRlciBvZiBzY3JlZW5Ob2RlXHJcbiAgICAgIGNlbnRlclg6IDAsXHJcbiAgICAgIGNlbnRlclk6IDBcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBCYXIgYWNyb3NzIHRoZSB0b3AgZWRnZSBvZiB0aGUgc2NyZWVuLiBBa2EgdGhlICdzY3JlZW4gY2FzZScsIGJlY2F1c2UgdGhlIHNjcmVlbiByZXRyYWN0cyBpbnRvIHRoaXMgcGFydC5cclxuICAgIGNvbnN0IHRvcEJhck5vZGUgPSBuZXcgSW1hZ2UoIHByb2plY3Rpb25TY3JlZW5Ub3BfcG5nLCB7XHJcbiAgICAgIHNjYWxlOiAwLjUsXHJcbiAgICAgIC8vIG9mZnNldHMgd2VyZSBhZGp1c3RlZCBlbXBpcmljYWxseSB0byBhbGlnbiBJbWFnZSB3aXRoIHNjcmVlbk5vZGVcclxuICAgICAgbGVmdDogc2NyZWVuTm9kZS5sZWZ0IC0gMTQsXHJcbiAgICAgIGJvdHRvbTogc2NyZWVuTm9kZS50b3AgKyAyNVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIEJhciBhY3Jvc3MgdGhlIGJvdHRvbSBlZGdlIG9mIHRoZSBzY3JlZW5cclxuICAgIGNvbnN0IGJvdHRvbUJhck5vZGUgPSBuZXcgSW1hZ2UoIHByb2plY3Rpb25TY3JlZW5Cb3R0b21fcG5nLCB7XHJcbiAgICAgIHNjYWxlOiAwLjUsXHJcbiAgICAgIC8vIG9mZnNldHMgd2VyZSBhZGp1c3RlZCBlbXBpcmljYWxseSB0byBhbGlnbiBJbWFnZSB3aXRoIHNjcmVlbk5vZGVcclxuICAgICAgcmlnaHQ6IHNjcmVlbk5vZGUucmlnaHQgKyA5LFxyXG4gICAgICBib3R0b206IHNjcmVlbk5vZGUuYm90dG9tICsgMThcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBUaGUgcHVsbCBzdHJpbmcsIGF0dGFjaGVkIHRvIHRoZSBib3R0b20gYmFyXHJcbiAgICBjb25zdCBwdWxsU3RyaW5nTm9kZSA9IG5ldyBMaW5lKCAwLCAwLCAwLCA1MCwge1xyXG4gICAgICBzdHJva2U6IEdPQ29sb3JzLnByb2plY3Rpb25TY3JlZW5TdHJva2VQcm9wZXJ0eSxcclxuICAgICAgbGluZVdpZHRoOiAzLFxyXG4gICAgICBjZW50ZXJYOiBzY3JlZW5Ob2RlLmNlbnRlclgsXHJcbiAgICAgIHRvcDogYm90dG9tQmFyTm9kZS50b3BcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBUaGUga25vYiBhdHRhY2hlZCB0byB0aGUgcHVsbCBzdHJpbmdcclxuICAgIGNvbnN0IGtub2JOb2RlID0gbmV3IENpcmNsZSggNSwge1xyXG4gICAgICBzdHJva2U6IEdPQ29sb3JzLnByb2plY3Rpb25TY3JlZW5TdHJva2VQcm9wZXJ0eSxcclxuICAgICAgZmlsbDogQ29sb3IuZ3JheUNvbG9yKCAxODAgKSxcclxuICAgICAgY2VudGVyOiBwdWxsU3RyaW5nTm9kZS5jZW50ZXJCb3R0b21cclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCBwYXJlbnROb2RlID0gbmV3IE5vZGUoIHtcclxuICAgICAgY2hpbGRyZW46IFsgcHVsbFN0cmluZ05vZGUsIGtub2JOb2RlLCB0b3BCYXJOb2RlLCBib3R0b21CYXJOb2RlLCBzY3JlZW5Ob2RlIF1cclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHBhcmVudE5vZGUgKTtcclxuICAgIHRoaXMuc2V0Rm9jdXNIaWdobGlnaHQoIG5ldyBGb2N1c0hpZ2hsaWdodEZyb21Ob2RlKCBwYXJlbnROb2RlICkgKTtcclxuXHJcbiAgICBjb25zdCB3YXNEcmFnZ2VkUHJvcGVydHkgPSBuZXcgQm9vbGVhblByb3BlcnR5KCBmYWxzZSwge1xyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3dhc0RyYWdnZWRQcm9wZXJ0eScgKSxcclxuICAgICAgcGhldGlvUmVhZE9ubHk6IHRydWVcclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCBjdWVpbmdBcnJvd3NOb2RlID0gbmV3IEN1ZWluZ0Fycm93c05vZGUoIHtcclxuICAgICAgbGVmdDogcGFyZW50Tm9kZS5yaWdodCxcclxuICAgICAgY2VudGVyWTogcGFyZW50Tm9kZS5jZW50ZXJZLFxyXG4gICAgICB2aXNpYmxlUHJvcGVydHk6IEN1ZWluZ0Fycm93c05vZGUuY3JlYXRlVmlzaWJsZVByb3BlcnR5KCB0aGlzLmlucHV0RW5hYmxlZFByb3BlcnR5LCB3YXNEcmFnZ2VkUHJvcGVydHkgKVxyXG4gICAgfSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggY3VlaW5nQXJyb3dzTm9kZSApO1xyXG5cclxuICAgIC8vIFJlZCBkb3QgYXQgdGhlIG9yaWdpblxyXG4gICAgaWYgKCBHT1F1ZXJ5UGFyYW1ldGVycy5kZWJ1Z09yaWdpbnMgKSB7XHJcbiAgICAgIHRoaXMuYWRkQ2hpbGQoIG5ldyBPcmlnaW5Ob2RlKCkgKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm9qZWN0aW9uU2NyZWVuLnBvc2l0aW9uUHJvcGVydHkubGluayggcG9zaXRpb24gPT4ge1xyXG4gICAgICB0aGlzLnRyYW5zbGF0aW9uID0gbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3UG9zaXRpb24oIHBvc2l0aW9uICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgbW9kZWxTY3JlZW5XaWR0aCA9IG1vZGVsVmlld1RyYW5zZm9ybS52aWV3VG9Nb2RlbERlbHRhWCggc2NyZWVuTm9kZS53aWR0aCApO1xyXG4gICAgY29uc3QgbW9kZWxTY3JlZW5IZWlnaHQgPSBNYXRoLmFicyggbW9kZWxWaWV3VHJhbnNmb3JtLnZpZXdUb01vZGVsRGVsdGFZKCBzY3JlZW5Ob2RlLmhlaWdodCApICk7XHJcblxyXG4gICAgLy8gRHJhZyBib3VuZHMsIGluIG1vZGVsIGNvb3JkaW5hdGVzIC0gd2l0aGluIG1vZGVsIGJvdW5kcywgYW5kIHJpZ2h0IG9mIHRoZSBvcHRpYy5cclxuICAgIGNvbnN0IGRyYWdCb3VuZHNQcm9wZXJ0eSA9IG5ldyBEZXJpdmVkUHJvcGVydHkoXHJcbiAgICAgIFsgc2NlbmVCb3VuZHNQcm9wZXJ0eSwgb3B0aWNQb3NpdGlvblByb3BlcnR5IF0sXHJcbiAgICAgICggc2NlbmVCb3VuZHMsIG9wdGljUG9zaXRpb24gKSA9PlxyXG4gICAgICAgIG5ldyBCb3VuZHMyKFxyXG4gICAgICAgICAgb3B0aWNQb3NpdGlvbi54ICsgR09Db25zdGFudHMuTUlOX0RJU1RBTkNFX0ZST01fT1BUSUNfVE9fUFJPSkVDVElPTl9TQ1JFRU4sXHJcbiAgICAgICAgICBzY2VuZUJvdW5kcy5taW5ZICsgbW9kZWxTY3JlZW5IZWlnaHQgLyAyLFxyXG4gICAgICAgICAgc2NlbmVCb3VuZHMubWF4WCAtIG1vZGVsU2NyZWVuV2lkdGggLyAyLFxyXG4gICAgICAgICAgc2NlbmVCb3VuZHMubWF4WSAtIG1vZGVsU2NyZWVuSGVpZ2h0IC8gMlxyXG4gICAgICAgIClcclxuICAgICk7XHJcblxyXG4gICAgLy8gS2VlcCB0aGUgcHJvamVjdGlvbiBzY3JlZW4gd2l0aGluIGRyYWcgYm91bmRzLlxyXG4gICAgZHJhZ0JvdW5kc1Byb3BlcnR5LmxpbmsoIGRyYWdCb3VuZHMgPT4ge1xyXG4gICAgICBwcm9qZWN0aW9uU2NyZWVuLnBvc2l0aW9uUHJvcGVydHkudmFsdWUgPSBkcmFnQm91bmRzLmNsb3Nlc3RQb2ludFRvKCBwcm9qZWN0aW9uU2NyZWVuLnBvc2l0aW9uUHJvcGVydHkudmFsdWUgKTtcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBEcmFnIGFjdGlvbiB0aGF0IGlzIGNvbW1vbiB0byBEcmFnTGlzdGVuZXIgYW5kIEtleWJvYXJkRHJhZ0xpc3RlbmVyXHJcbiAgICBjb25zdCBkcmFnID0gKCkgPT4ge1xyXG4gICAgICB3YXNEcmFnZ2VkUHJvcGVydHkudmFsdWUgPSB0cnVlO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmFkZElucHV0TGlzdGVuZXIoIG5ldyBEcmFnTGlzdGVuZXIoIHtcclxuICAgICAgcHJlc3NDdXJzb3I6ICdwb2ludGVyJyxcclxuICAgICAgdXNlSW5wdXRMaXN0ZW5lckN1cnNvcjogdHJ1ZSxcclxuICAgICAgcG9zaXRpb25Qcm9wZXJ0eTogcHJvamVjdGlvblNjcmVlbi5wb3NpdGlvblByb3BlcnR5LFxyXG4gICAgICBkcmFnQm91bmRzUHJvcGVydHk6IGRyYWdCb3VuZHNQcm9wZXJ0eSxcclxuICAgICAgdHJhbnNmb3JtOiBtb2RlbFZpZXdUcmFuc2Zvcm0sXHJcbiAgICAgIGRyYWc6IGRyYWcsXHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnZHJhZ0xpc3RlbmVyJyApXHJcbiAgICB9ICkgKTtcclxuXHJcbiAgICBjb25zdCBrZXlib2FyZERyYWdMaXN0ZW5lciA9IG5ldyBLZXlib2FyZERyYWdMaXN0ZW5lcihcclxuICAgICAgY29tYmluZU9wdGlvbnM8S2V5Ym9hcmREcmFnTGlzdGVuZXJPcHRpb25zPigge30sIEdPQ29uc3RhbnRzLktFWUJPQVJEX0RSQUdfTElTVEVORVJfT1BUSU9OUywge1xyXG4gICAgICAgIHBvc2l0aW9uUHJvcGVydHk6IHByb2plY3Rpb25TY3JlZW4ucG9zaXRpb25Qcm9wZXJ0eSxcclxuICAgICAgICBkcmFnQm91bmRzUHJvcGVydHk6IGRyYWdCb3VuZHNQcm9wZXJ0eSxcclxuICAgICAgICBkcmFnOiBkcmFnLFxyXG4gICAgICAgIHRyYW5zZm9ybTogbW9kZWxWaWV3VHJhbnNmb3JtLFxyXG4gICAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAna2V5Ym9hcmREcmFnTGlzdGVuZXInIClcclxuICAgICAgfSApICk7XHJcbiAgICB0aGlzLmFkZElucHV0TGlzdGVuZXIoIGtleWJvYXJkRHJhZ0xpc3RlbmVyICk7XHJcblxyXG4gICAgdGhpcy5hZGRMaW5rZWRFbGVtZW50KCBwcm9qZWN0aW9uU2NyZWVuLCB7XHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCBwcm9qZWN0aW9uU2NyZWVuLnRhbmRlbS5uYW1lIClcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLnJlc2V0UHJvamVjdGlvblNjcmVlbk5vZGUgPSAoKSA9PiB7XHJcbiAgICAgIHdhc0RyYWdnZWRQcm9wZXJ0eS5yZXNldCgpO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvdmVycmlkZSBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggZmFsc2UsICdkaXNwb3NlIGlzIG5vdCBzdXBwb3J0ZWQsIGV4aXN0cyBmb3IgdGhlIGxpZmV0aW1lIG9mIHRoZSBzaW0nICk7XHJcbiAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLnJlc2V0UHJvamVjdGlvblNjcmVlbk5vZGUoKTtcclxuICB9XHJcbn1cclxuXHJcbmdlb21ldHJpY09wdGljcy5y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