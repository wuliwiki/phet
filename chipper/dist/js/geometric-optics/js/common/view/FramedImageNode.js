// Copyright 2021-2022, University of Colorado Boulder

/**
 * FramedImageNode renders the optical image (real or virtual) associated with a framed object.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 * @author Martin Veillette
 */

import Vector2 from '../../../../dot/js/Vector2.js';
import { Image, Node } from '../../../../scenery/js/imports.js';
import geometricOptics from '../../geometricOptics.js';
import GOConstants from '../GOConstants.js';
import OpticalImageNode from './OpticalImageNode.js';
import FramedImageMaskNode from './FramedImageMaskNode.js';
export default class FramedImageNode extends OpticalImageNode {
  /**
   * @param framedImage - model element
   * @param optic - associated optic
   * @param virtualImageVisibleProperty - should a virtual image be visible?
   * @param lightPropagationEnabledProperty - is light propagation enabled?
   * @param objectVisibleProperty - is the optical object visible?
   * @param modelViewTransform
   * @param providedOptions
   */
  constructor(framedImage, optic, virtualImageVisibleProperty, lightPropagationEnabledProperty, objectVisibleProperty, modelViewTransform, providedOptions) {
    super(framedImage, virtualImageVisibleProperty, lightPropagationEnabledProperty, objectVisibleProperty, providedOptions);
    const imageNode = new Image(framedImage.htmlImageElementProperty.value);

    // A mask is used to reduce the opacity of the optical image where it occludes the optical axis and rays.
    // See https://github.com/phetsims/geometric-optics/issues/283.
    const maskNode = new FramedImageMaskNode(imageNode.width, imageNode.height);
    const parentNode = new Node({
      children: [maskNode, imageNode]
    });
    this.addChild(parentNode);
    const updateScaleAndPosition = () => {
      const viewBounds = modelViewTransform.modelToViewBounds(framedImage.boundsProperty.value);
      const initialWidth = parentNode.width;
      const initialHeight = parentNode.height;
      const scaleX = viewBounds.width / initialWidth || GOConstants.MIN_SCALE; // prevent zero scale
      const scaleY = viewBounds.height / initialHeight || GOConstants.MIN_SCALE; // prevent zero scale

      //TODO https://github.com/phetsims/geometric-optics/issues/321 Assertion failed: scales should be finite
      assert && assert(isFinite(scaleX) && isFinite(scaleY), 'scale should be finite: ' + `scaleX=${scaleX}, initialWidth=${initialWidth} viewBounds.width=${viewBounds.width}` + `scaleY=${scaleY}, initialHeight=${initialWidth} viewBounds.height=${viewBounds.width}`);
      parentNode.scale(scaleX, scaleY);
      parentNode.translation = new Vector2(viewBounds.minX, viewBounds.minY);
    };
    framedImage.boundsProperty.link(() => updateScaleAndPosition());

    // Update the opacity of the image, but not the mask.
    framedImage.opacityProperty.link(opacity => {
      imageNode.opacity = opacity;
    });

    // Update the image and mask.
    framedImage.htmlImageElementProperty.link(htmlImageElement => {
      // Update the HTMLImageElement (PNG file).
      imageNode.image = htmlImageElement;

      // Update the mask to face towards the optic.
      maskNode.setIsRightFacing(framedImage.positionProperty.value.x < optic.positionProperty.value.x);
      updateScaleAndPosition();
    });
  }
}
geometricOptics.register('FramedImageNode', FramedImageNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWZWN0b3IyIiwiSW1hZ2UiLCJOb2RlIiwiZ2VvbWV0cmljT3B0aWNzIiwiR09Db25zdGFudHMiLCJPcHRpY2FsSW1hZ2VOb2RlIiwiRnJhbWVkSW1hZ2VNYXNrTm9kZSIsIkZyYW1lZEltYWdlTm9kZSIsImNvbnN0cnVjdG9yIiwiZnJhbWVkSW1hZ2UiLCJvcHRpYyIsInZpcnR1YWxJbWFnZVZpc2libGVQcm9wZXJ0eSIsImxpZ2h0UHJvcGFnYXRpb25FbmFibGVkUHJvcGVydHkiLCJvYmplY3RWaXNpYmxlUHJvcGVydHkiLCJtb2RlbFZpZXdUcmFuc2Zvcm0iLCJwcm92aWRlZE9wdGlvbnMiLCJpbWFnZU5vZGUiLCJodG1sSW1hZ2VFbGVtZW50UHJvcGVydHkiLCJ2YWx1ZSIsIm1hc2tOb2RlIiwid2lkdGgiLCJoZWlnaHQiLCJwYXJlbnROb2RlIiwiY2hpbGRyZW4iLCJhZGRDaGlsZCIsInVwZGF0ZVNjYWxlQW5kUG9zaXRpb24iLCJ2aWV3Qm91bmRzIiwibW9kZWxUb1ZpZXdCb3VuZHMiLCJib3VuZHNQcm9wZXJ0eSIsImluaXRpYWxXaWR0aCIsImluaXRpYWxIZWlnaHQiLCJzY2FsZVgiLCJNSU5fU0NBTEUiLCJzY2FsZVkiLCJhc3NlcnQiLCJpc0Zpbml0ZSIsInNjYWxlIiwidHJhbnNsYXRpb24iLCJtaW5YIiwibWluWSIsImxpbmsiLCJvcGFjaXR5UHJvcGVydHkiLCJvcGFjaXR5IiwiaHRtbEltYWdlRWxlbWVudCIsImltYWdlIiwic2V0SXNSaWdodEZhY2luZyIsInBvc2l0aW9uUHJvcGVydHkiLCJ4IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJGcmFtZWRJbWFnZU5vZGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjEtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogRnJhbWVkSW1hZ2VOb2RlIHJlbmRlcnMgdGhlIG9wdGljYWwgaW1hZ2UgKHJlYWwgb3IgdmlydHVhbCkgYXNzb2NpYXRlZCB3aXRoIGEgZnJhbWVkIG9iamVjdC5cclxuICpcclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICogQGF1dGhvciBNYXJ0aW4gVmVpbGxldHRlXHJcbiAqL1xyXG5cclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgTW9kZWxWaWV3VHJhbnNmb3JtMiBmcm9tICcuLi8uLi8uLi8uLi9waGV0Y29tbW9uL2pzL3ZpZXcvTW9kZWxWaWV3VHJhbnNmb3JtMi5qcyc7XHJcbmltcG9ydCB7IEltYWdlLCBOb2RlIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IGdlb21ldHJpY09wdGljcyBmcm9tICcuLi8uLi9nZW9tZXRyaWNPcHRpY3MuanMnO1xyXG5pbXBvcnQgT3B0aWMgZnJvbSAnLi4vbW9kZWwvT3B0aWMuanMnO1xyXG5pbXBvcnQgRnJhbWVkSW1hZ2UgZnJvbSAnLi4vbW9kZWwvRnJhbWVkSW1hZ2UuanMnO1xyXG5pbXBvcnQgVFJlYWRPbmx5UHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9UUmVhZE9ubHlQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBHT0NvbnN0YW50cyBmcm9tICcuLi9HT0NvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBPcHRpY2FsSW1hZ2VOb2RlLCB7IE9wdGljYWxJbWFnZU5vZGVPcHRpb25zIH0gZnJvbSAnLi9PcHRpY2FsSW1hZ2VOb2RlLmpzJztcclxuaW1wb3J0IFBpY2tSZXF1aXJlZCBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvUGlja1JlcXVpcmVkLmpzJztcclxuaW1wb3J0IEZyYW1lZEltYWdlTWFza05vZGUgZnJvbSAnLi9GcmFtZWRJbWFnZU1hc2tOb2RlLmpzJztcclxuXHJcbnR5cGUgRnJhbWVkSW1hZ2VOb2RlT3B0aW9ucyA9IFBpY2tSZXF1aXJlZDxPcHRpY2FsSW1hZ2VOb2RlT3B0aW9ucywgJ3RhbmRlbSc+O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRnJhbWVkSW1hZ2VOb2RlIGV4dGVuZHMgT3B0aWNhbEltYWdlTm9kZSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSBmcmFtZWRJbWFnZSAtIG1vZGVsIGVsZW1lbnRcclxuICAgKiBAcGFyYW0gb3B0aWMgLSBhc3NvY2lhdGVkIG9wdGljXHJcbiAgICogQHBhcmFtIHZpcnR1YWxJbWFnZVZpc2libGVQcm9wZXJ0eSAtIHNob3VsZCBhIHZpcnR1YWwgaW1hZ2UgYmUgdmlzaWJsZT9cclxuICAgKiBAcGFyYW0gbGlnaHRQcm9wYWdhdGlvbkVuYWJsZWRQcm9wZXJ0eSAtIGlzIGxpZ2h0IHByb3BhZ2F0aW9uIGVuYWJsZWQ/XHJcbiAgICogQHBhcmFtIG9iamVjdFZpc2libGVQcm9wZXJ0eSAtIGlzIHRoZSBvcHRpY2FsIG9iamVjdCB2aXNpYmxlP1xyXG4gICAqIEBwYXJhbSBtb2RlbFZpZXdUcmFuc2Zvcm1cclxuICAgKiBAcGFyYW0gcHJvdmlkZWRPcHRpb25zXHJcbiAgICovXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBmcmFtZWRJbWFnZTogRnJhbWVkSW1hZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICBvcHRpYzogT3B0aWMsXHJcbiAgICAgICAgICAgICAgICAgICAgICB2aXJ0dWFsSW1hZ2VWaXNpYmxlUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PGJvb2xlYW4+LFxyXG4gICAgICAgICAgICAgICAgICAgICAgbGlnaHRQcm9wYWdhdGlvbkVuYWJsZWRQcm9wZXJ0eTogVFJlYWRPbmx5UHJvcGVydHk8Ym9vbGVhbj4sXHJcbiAgICAgICAgICAgICAgICAgICAgICBvYmplY3RWaXNpYmxlUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PGJvb2xlYW4+LFxyXG4gICAgICAgICAgICAgICAgICAgICAgbW9kZWxWaWV3VHJhbnNmb3JtOiBNb2RlbFZpZXdUcmFuc2Zvcm0yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZWRPcHRpb25zOiBGcmFtZWRJbWFnZU5vZGVPcHRpb25zICkge1xyXG5cclxuICAgIHN1cGVyKCBmcmFtZWRJbWFnZSwgdmlydHVhbEltYWdlVmlzaWJsZVByb3BlcnR5LCBsaWdodFByb3BhZ2F0aW9uRW5hYmxlZFByb3BlcnR5LCBvYmplY3RWaXNpYmxlUHJvcGVydHksIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIGNvbnN0IGltYWdlTm9kZSA9IG5ldyBJbWFnZSggZnJhbWVkSW1hZ2UuaHRtbEltYWdlRWxlbWVudFByb3BlcnR5LnZhbHVlICk7XHJcblxyXG4gICAgLy8gQSBtYXNrIGlzIHVzZWQgdG8gcmVkdWNlIHRoZSBvcGFjaXR5IG9mIHRoZSBvcHRpY2FsIGltYWdlIHdoZXJlIGl0IG9jY2x1ZGVzIHRoZSBvcHRpY2FsIGF4aXMgYW5kIHJheXMuXHJcbiAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL2dlb21ldHJpYy1vcHRpY3MvaXNzdWVzLzI4My5cclxuICAgIGNvbnN0IG1hc2tOb2RlID0gbmV3IEZyYW1lZEltYWdlTWFza05vZGUoIGltYWdlTm9kZS53aWR0aCwgaW1hZ2VOb2RlLmhlaWdodCApO1xyXG5cclxuICAgIGNvbnN0IHBhcmVudE5vZGUgPSBuZXcgTm9kZSgge1xyXG4gICAgICBjaGlsZHJlbjogWyBtYXNrTm9kZSwgaW1hZ2VOb2RlIF1cclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHBhcmVudE5vZGUgKTtcclxuXHJcbiAgICBjb25zdCB1cGRhdGVTY2FsZUFuZFBvc2l0aW9uID0gKCk6IHZvaWQgPT4ge1xyXG5cclxuICAgICAgY29uc3Qgdmlld0JvdW5kcyA9IG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld0JvdW5kcyggZnJhbWVkSW1hZ2UuYm91bmRzUHJvcGVydHkudmFsdWUgKTtcclxuXHJcbiAgICAgIGNvbnN0IGluaXRpYWxXaWR0aCA9IHBhcmVudE5vZGUud2lkdGg7XHJcbiAgICAgIGNvbnN0IGluaXRpYWxIZWlnaHQgPSBwYXJlbnROb2RlLmhlaWdodDtcclxuICAgICAgY29uc3Qgc2NhbGVYID0gKCB2aWV3Qm91bmRzLndpZHRoIC8gaW5pdGlhbFdpZHRoICkgfHwgR09Db25zdGFudHMuTUlOX1NDQUxFOyAvLyBwcmV2ZW50IHplcm8gc2NhbGVcclxuICAgICAgY29uc3Qgc2NhbGVZID0gKCB2aWV3Qm91bmRzLmhlaWdodCAvIGluaXRpYWxIZWlnaHQgKSB8fCBHT0NvbnN0YW50cy5NSU5fU0NBTEU7IC8vIHByZXZlbnQgemVybyBzY2FsZVxyXG5cclxuICAgICAgLy9UT0RPIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9nZW9tZXRyaWMtb3B0aWNzL2lzc3Vlcy8zMjEgQXNzZXJ0aW9uIGZhaWxlZDogc2NhbGVzIHNob3VsZCBiZSBmaW5pdGVcclxuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggaXNGaW5pdGUoIHNjYWxlWCApICYmIGlzRmluaXRlKCBzY2FsZVkgKSxcclxuICAgICAgICAnc2NhbGUgc2hvdWxkIGJlIGZpbml0ZTogJyArXHJcbiAgICAgICAgYHNjYWxlWD0ke3NjYWxlWH0sIGluaXRpYWxXaWR0aD0ke2luaXRpYWxXaWR0aH0gdmlld0JvdW5kcy53aWR0aD0ke3ZpZXdCb3VuZHMud2lkdGh9YCArXHJcbiAgICAgICAgYHNjYWxlWT0ke3NjYWxlWX0sIGluaXRpYWxIZWlnaHQ9JHtpbml0aWFsV2lkdGh9IHZpZXdCb3VuZHMuaGVpZ2h0PSR7dmlld0JvdW5kcy53aWR0aH1gICk7XHJcblxyXG4gICAgICBwYXJlbnROb2RlLnNjYWxlKCBzY2FsZVgsIHNjYWxlWSApO1xyXG4gICAgICBwYXJlbnROb2RlLnRyYW5zbGF0aW9uID0gbmV3IFZlY3RvcjIoIHZpZXdCb3VuZHMubWluWCwgdmlld0JvdW5kcy5taW5ZICk7XHJcbiAgICB9O1xyXG5cclxuICAgIGZyYW1lZEltYWdlLmJvdW5kc1Byb3BlcnR5LmxpbmsoICgpID0+IHVwZGF0ZVNjYWxlQW5kUG9zaXRpb24oKSApO1xyXG5cclxuICAgIC8vIFVwZGF0ZSB0aGUgb3BhY2l0eSBvZiB0aGUgaW1hZ2UsIGJ1dCBub3QgdGhlIG1hc2suXHJcbiAgICBmcmFtZWRJbWFnZS5vcGFjaXR5UHJvcGVydHkubGluayggb3BhY2l0eSA9PiB7XHJcbiAgICAgIGltYWdlTm9kZS5vcGFjaXR5ID0gb3BhY2l0eTtcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBVcGRhdGUgdGhlIGltYWdlIGFuZCBtYXNrLlxyXG4gICAgZnJhbWVkSW1hZ2UuaHRtbEltYWdlRWxlbWVudFByb3BlcnR5LmxpbmsoIGh0bWxJbWFnZUVsZW1lbnQgPT4ge1xyXG5cclxuICAgICAgLy8gVXBkYXRlIHRoZSBIVE1MSW1hZ2VFbGVtZW50IChQTkcgZmlsZSkuXHJcbiAgICAgIGltYWdlTm9kZS5pbWFnZSA9IGh0bWxJbWFnZUVsZW1lbnQ7XHJcblxyXG4gICAgICAvLyBVcGRhdGUgdGhlIG1hc2sgdG8gZmFjZSB0b3dhcmRzIHRoZSBvcHRpYy5cclxuICAgICAgbWFza05vZGUuc2V0SXNSaWdodEZhY2luZyggZnJhbWVkSW1hZ2UucG9zaXRpb25Qcm9wZXJ0eS52YWx1ZS54IDwgb3B0aWMucG9zaXRpb25Qcm9wZXJ0eS52YWx1ZS54ICk7XHJcblxyXG4gICAgICB1cGRhdGVTY2FsZUFuZFBvc2l0aW9uKCk7XHJcbiAgICB9ICk7XHJcbiAgfVxyXG59XHJcblxyXG5nZW9tZXRyaWNPcHRpY3MucmVnaXN0ZXIoICdGcmFtZWRJbWFnZU5vZGUnLCBGcmFtZWRJbWFnZU5vZGUgKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxPQUFPLE1BQU0sK0JBQStCO0FBRW5ELFNBQVNDLEtBQUssRUFBRUMsSUFBSSxRQUFRLG1DQUFtQztBQUMvRCxPQUFPQyxlQUFlLE1BQU0sMEJBQTBCO0FBSXRELE9BQU9DLFdBQVcsTUFBTSxtQkFBbUI7QUFD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