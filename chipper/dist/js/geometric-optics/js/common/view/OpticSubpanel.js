// Copyright 2022-2023, University of Colorado Boulder

/**
 * OpticSubpanel is a subpanel of the main control panel.
 * It has controls for optic parameters (ROC, IOR, focal length, diameter).
 *
 * @author Chris Malley (PixelZoom, Inc.)
 * @author Martin Veillette
 */

import { HBox, Node } from '../../../../scenery/js/imports.js';
import geometricOptics from '../../geometricOptics.js';
import FocalLengthControl from './FocalLengthControl.js';
import GOPreferences from '../model/GOPreferences.js';
import RadiusOfCurvatureControl from './RadiusOfCurvatureControl.js';
import Lens from '../../lens/model/Lens.js';
import IndexOfRefractionControl from './IndexOfRefractionControl.js';
import DiameterControl from './DiameterControl.js';
import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
const X_SPACING = 15; // horizontal space between control
const ALIGN = 'bottom'; // align bottoms of all NumberControls

export default class OpticSubpanel extends HBox {
  constructor(optic, tandem) {
    const children = [];

    // An exclusively-flat mirror (as in the Basics version) has no controls for focal length.
    if (!optic.isExclusivelyFlatMirror()) {
      // Controls for 'direct' focal-length model
      children.push(new DirectFocalLengthControls(optic, tandem));

      // Controls for 'indirect' focal-length model
      children.push(new IndirectFocalLengthControls(optic, tandem));
    }

    // Diameter control, relevant for all optics
    const diameterControl = new DiameterControl(optic.diameterProperty, {
      tandem: tandem.createTandem('diameterControl')
    });
    children.push(diameterControl);
    super({
      children: children,
      spacing: X_SPACING,
      align: ALIGN,
      visiblePropertyOptions: {
        phetioFeatured: true
      },
      tandem: tandem
    });
  }
}

/**
 * Wrapper for controls related to the 'direct' focal-length model. This allows the sim to handle which controls
 * are visible for 'direct', while allowing the PhET-iO client to control focalLengthControl.visibleProperty.
 * See https://github.com/phetsims/geometric-optics/issues/347
 */
class DirectFocalLengthControls extends Node {
  constructor(optic, tandem) {
    // Focal Length
    const focalLengthControl = new FocalLengthControl(optic.directFocalLengthModel.focalLengthMagnitudeProperty, optic.focalLengthProperty, {
      tandem: tandem.createTandem('focalLengthControl')
    });
    super({
      children: [focalLengthControl],
      visibleProperty: new DerivedProperty([GOPreferences.focalLengthModelTypeProperty, optic.opticSurfaceTypeProperty], (focalLengthModelType, opticSurfaceType) => focalLengthModelType === 'direct' && opticSurfaceType !== 'flat')
      // no tandem, do not instrument!
    });
  }
}

/**
 * Wrapper for controls related to the 'indirect' focal-length model. This allows the sim to handle which controls
 * are visible for 'indirect', while allowing the PhET-iO client to control radiusOfCurvatureControl.visibleProperty
 * and indexOfRefractionControl.visibleProperty. See https://github.com/phetsims/geometric-optics/issues/347
 */
class IndirectFocalLengthControls extends HBox {
  constructor(optic, tandem) {
    const children = [];

    // Radius of Curvature
    const radiusOfCurvatureControl = new RadiusOfCurvatureControl(optic.indirectFocalLengthModel.radiusOfCurvatureMagnitudeProperty, optic.radiusOfCurvatureProperty, {
      tandem: tandem.createTandem('radiusOfCurvatureControl')
    });
    children.push(radiusOfCurvatureControl);

    // Index of Refraction (for lens only)
    if (optic instanceof Lens) {
      const indexOfRefractionControl = new IndexOfRefractionControl(optic.indirectFocalLengthModel.indexOfRefractionProperty, {
        tandem: tandem.createTandem('indexOfRefractionControl')
      });
      children.push(indexOfRefractionControl);
    }
    super({
      children: children,
      spacing: X_SPACING,
      align: ALIGN,
      visibleProperty: new DerivedProperty([GOPreferences.focalLengthModelTypeProperty, optic.opticSurfaceTypeProperty], (focalLengthModelType, opticSurfaceType) => focalLengthModelType === 'indirect' && opticSurfaceType !== 'flat')
      // no tandem, do not instrument!
    });
  }
}

geometricOptics.register('OpticSubpanel', OpticSubpanel);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJIQm94IiwiTm9kZSIsImdlb21ldHJpY09wdGljcyIsIkZvY2FsTGVuZ3RoQ29udHJvbCIsIkdPUHJlZmVyZW5jZXMiLCJSYWRpdXNPZkN1cnZhdHVyZUNvbnRyb2wiLCJMZW5zIiwiSW5kZXhPZlJlZnJhY3Rpb25Db250cm9sIiwiRGlhbWV0ZXJDb250cm9sIiwiRGVyaXZlZFByb3BlcnR5IiwiWF9TUEFDSU5HIiwiQUxJR04iLCJPcHRpY1N1YnBhbmVsIiwiY29uc3RydWN0b3IiLCJvcHRpYyIsInRhbmRlbSIsImNoaWxkcmVuIiwiaXNFeGNsdXNpdmVseUZsYXRNaXJyb3IiLCJwdXNoIiwiRGlyZWN0Rm9jYWxMZW5ndGhDb250cm9scyIsIkluZGlyZWN0Rm9jYWxMZW5ndGhDb250cm9scyIsImRpYW1ldGVyQ29udHJvbCIsImRpYW1ldGVyUHJvcGVydHkiLCJjcmVhdGVUYW5kZW0iLCJzcGFjaW5nIiwiYWxpZ24iLCJ2aXNpYmxlUHJvcGVydHlPcHRpb25zIiwicGhldGlvRmVhdHVyZWQiLCJmb2NhbExlbmd0aENvbnRyb2wiLCJkaXJlY3RGb2NhbExlbmd0aE1vZGVsIiwiZm9jYWxMZW5ndGhNYWduaXR1ZGVQcm9wZXJ0eSIsImZvY2FsTGVuZ3RoUHJvcGVydHkiLCJ2aXNpYmxlUHJvcGVydHkiLCJmb2NhbExlbmd0aE1vZGVsVHlwZVByb3BlcnR5Iiwib3B0aWNTdXJmYWNlVHlwZVByb3BlcnR5IiwiZm9jYWxMZW5ndGhNb2RlbFR5cGUiLCJvcHRpY1N1cmZhY2VUeXBlIiwicmFkaXVzT2ZDdXJ2YXR1cmVDb250cm9sIiwiaW5kaXJlY3RGb2NhbExlbmd0aE1vZGVsIiwicmFkaXVzT2ZDdXJ2YXR1cmVNYWduaXR1ZGVQcm9wZXJ0eSIsInJhZGl1c09mQ3VydmF0dXJlUHJvcGVydHkiLCJpbmRleE9mUmVmcmFjdGlvbkNvbnRyb2wiLCJpbmRleE9mUmVmcmFjdGlvblByb3BlcnR5IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJPcHRpY1N1YnBhbmVsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIyLTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIE9wdGljU3VicGFuZWwgaXMgYSBzdWJwYW5lbCBvZiB0aGUgbWFpbiBjb250cm9sIHBhbmVsLlxyXG4gKiBJdCBoYXMgY29udHJvbHMgZm9yIG9wdGljIHBhcmFtZXRlcnMgKFJPQywgSU9SLCBmb2NhbCBsZW5ndGgsIGRpYW1ldGVyKS5cclxuICpcclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICogQGF1dGhvciBNYXJ0aW4gVmVpbGxldHRlXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgSEJveCwgTm9kZSB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBnZW9tZXRyaWNPcHRpY3MgZnJvbSAnLi4vLi4vZ2VvbWV0cmljT3B0aWNzLmpzJztcclxuaW1wb3J0IEZvY2FsTGVuZ3RoQ29udHJvbCBmcm9tICcuL0ZvY2FsTGVuZ3RoQ29udHJvbC5qcyc7XHJcbmltcG9ydCBHT1ByZWZlcmVuY2VzIGZyb20gJy4uL21vZGVsL0dPUHJlZmVyZW5jZXMuanMnO1xyXG5pbXBvcnQgUmFkaXVzT2ZDdXJ2YXR1cmVDb250cm9sIGZyb20gJy4vUmFkaXVzT2ZDdXJ2YXR1cmVDb250cm9sLmpzJztcclxuaW1wb3J0IExlbnMgZnJvbSAnLi4vLi4vbGVucy9tb2RlbC9MZW5zLmpzJztcclxuaW1wb3J0IEluZGV4T2ZSZWZyYWN0aW9uQ29udHJvbCBmcm9tICcuL0luZGV4T2ZSZWZyYWN0aW9uQ29udHJvbC5qcyc7XHJcbmltcG9ydCBEaWFtZXRlckNvbnRyb2wgZnJvbSAnLi9EaWFtZXRlckNvbnRyb2wuanMnO1xyXG5pbXBvcnQgT3B0aWMgZnJvbSAnLi4vbW9kZWwvT3B0aWMuanMnO1xyXG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uLy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xyXG5pbXBvcnQgRGVyaXZlZFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvRGVyaXZlZFByb3BlcnR5LmpzJztcclxuXHJcbmNvbnN0IFhfU1BBQ0lORyA9IDE1OyAvLyBob3Jpem9udGFsIHNwYWNlIGJldHdlZW4gY29udHJvbFxyXG5jb25zdCBBTElHTiA9ICdib3R0b20nOyAvLyBhbGlnbiBib3R0b21zIG9mIGFsbCBOdW1iZXJDb250cm9sc1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgT3B0aWNTdWJwYW5lbCBleHRlbmRzIEhCb3gge1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIG9wdGljOiBPcHRpYywgdGFuZGVtOiBUYW5kZW0gKSB7XHJcblxyXG4gICAgY29uc3QgY2hpbGRyZW4gPSBbXTtcclxuXHJcbiAgICAvLyBBbiBleGNsdXNpdmVseS1mbGF0IG1pcnJvciAoYXMgaW4gdGhlIEJhc2ljcyB2ZXJzaW9uKSBoYXMgbm8gY29udHJvbHMgZm9yIGZvY2FsIGxlbmd0aC5cclxuICAgIGlmICggIW9wdGljLmlzRXhjbHVzaXZlbHlGbGF0TWlycm9yKCkgKSB7XHJcblxyXG4gICAgICAvLyBDb250cm9scyBmb3IgJ2RpcmVjdCcgZm9jYWwtbGVuZ3RoIG1vZGVsXHJcbiAgICAgIGNoaWxkcmVuLnB1c2goIG5ldyBEaXJlY3RGb2NhbExlbmd0aENvbnRyb2xzKCBvcHRpYywgdGFuZGVtICkgKTtcclxuXHJcbiAgICAgIC8vIENvbnRyb2xzIGZvciAnaW5kaXJlY3QnIGZvY2FsLWxlbmd0aCBtb2RlbFxyXG4gICAgICBjaGlsZHJlbi5wdXNoKCBuZXcgSW5kaXJlY3RGb2NhbExlbmd0aENvbnRyb2xzKCBvcHRpYywgdGFuZGVtICkgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBEaWFtZXRlciBjb250cm9sLCByZWxldmFudCBmb3IgYWxsIG9wdGljc1xyXG4gICAgY29uc3QgZGlhbWV0ZXJDb250cm9sID0gbmV3IERpYW1ldGVyQ29udHJvbCggb3B0aWMuZGlhbWV0ZXJQcm9wZXJ0eSwge1xyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdkaWFtZXRlckNvbnRyb2wnIClcclxuICAgIH0gKTtcclxuICAgIGNoaWxkcmVuLnB1c2goIGRpYW1ldGVyQ29udHJvbCApO1xyXG5cclxuICAgIHN1cGVyKCB7XHJcbiAgICAgIGNoaWxkcmVuOiBjaGlsZHJlbixcclxuICAgICAgc3BhY2luZzogWF9TUEFDSU5HLFxyXG4gICAgICBhbGlnbjogQUxJR04sXHJcbiAgICAgIHZpc2libGVQcm9wZXJ0eU9wdGlvbnM6IHtcclxuICAgICAgICBwaGV0aW9GZWF0dXJlZDogdHJ1ZVxyXG4gICAgICB9LFxyXG4gICAgICB0YW5kZW06IHRhbmRlbVxyXG4gICAgfSApO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFdyYXBwZXIgZm9yIGNvbnRyb2xzIHJlbGF0ZWQgdG8gdGhlICdkaXJlY3QnIGZvY2FsLWxlbmd0aCBtb2RlbC4gVGhpcyBhbGxvd3MgdGhlIHNpbSB0byBoYW5kbGUgd2hpY2ggY29udHJvbHNcclxuICogYXJlIHZpc2libGUgZm9yICdkaXJlY3QnLCB3aGlsZSBhbGxvd2luZyB0aGUgUGhFVC1pTyBjbGllbnQgdG8gY29udHJvbCBmb2NhbExlbmd0aENvbnRyb2wudmlzaWJsZVByb3BlcnR5LlxyXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL2dlb21ldHJpYy1vcHRpY3MvaXNzdWVzLzM0N1xyXG4gKi9cclxuY2xhc3MgRGlyZWN0Rm9jYWxMZW5ndGhDb250cm9scyBleHRlbmRzIE5vZGUge1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIG9wdGljOiBPcHRpYywgdGFuZGVtOiBUYW5kZW0gKSB7XHJcblxyXG4gICAgLy8gRm9jYWwgTGVuZ3RoXHJcbiAgICBjb25zdCBmb2NhbExlbmd0aENvbnRyb2wgPSBuZXcgRm9jYWxMZW5ndGhDb250cm9sKCBvcHRpYy5kaXJlY3RGb2NhbExlbmd0aE1vZGVsLmZvY2FsTGVuZ3RoTWFnbml0dWRlUHJvcGVydHksXHJcbiAgICAgIG9wdGljLmZvY2FsTGVuZ3RoUHJvcGVydHksIHtcclxuICAgICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdmb2NhbExlbmd0aENvbnRyb2wnIClcclxuICAgICAgfSApO1xyXG5cclxuICAgIHN1cGVyKCB7XHJcbiAgICAgIGNoaWxkcmVuOiBbIGZvY2FsTGVuZ3RoQ29udHJvbCBdLFxyXG4gICAgICB2aXNpYmxlUHJvcGVydHk6IG5ldyBEZXJpdmVkUHJvcGVydHkoIFsgR09QcmVmZXJlbmNlcy5mb2NhbExlbmd0aE1vZGVsVHlwZVByb3BlcnR5LCBvcHRpYy5vcHRpY1N1cmZhY2VUeXBlUHJvcGVydHkgXSxcclxuICAgICAgICAoIGZvY2FsTGVuZ3RoTW9kZWxUeXBlLCBvcHRpY1N1cmZhY2VUeXBlICkgPT5cclxuICAgICAgICAgICggZm9jYWxMZW5ndGhNb2RlbFR5cGUgPT09ICdkaXJlY3QnICkgJiYgKCBvcHRpY1N1cmZhY2VUeXBlICE9PSAnZmxhdCcgKSApXHJcbiAgICAgIC8vIG5vIHRhbmRlbSwgZG8gbm90IGluc3RydW1lbnQhXHJcbiAgICB9ICk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogV3JhcHBlciBmb3IgY29udHJvbHMgcmVsYXRlZCB0byB0aGUgJ2luZGlyZWN0JyBmb2NhbC1sZW5ndGggbW9kZWwuIFRoaXMgYWxsb3dzIHRoZSBzaW0gdG8gaGFuZGxlIHdoaWNoIGNvbnRyb2xzXHJcbiAqIGFyZSB2aXNpYmxlIGZvciAnaW5kaXJlY3QnLCB3aGlsZSBhbGxvd2luZyB0aGUgUGhFVC1pTyBjbGllbnQgdG8gY29udHJvbCByYWRpdXNPZkN1cnZhdHVyZUNvbnRyb2wudmlzaWJsZVByb3BlcnR5XHJcbiAqIGFuZCBpbmRleE9mUmVmcmFjdGlvbkNvbnRyb2wudmlzaWJsZVByb3BlcnR5LiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL2dlb21ldHJpYy1vcHRpY3MvaXNzdWVzLzM0N1xyXG4gKi9cclxuY2xhc3MgSW5kaXJlY3RGb2NhbExlbmd0aENvbnRyb2xzIGV4dGVuZHMgSEJveCB7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3Rvciggb3B0aWM6IE9wdGljLCB0YW5kZW06IFRhbmRlbSApIHtcclxuXHJcbiAgICBjb25zdCBjaGlsZHJlbiA9IFtdO1xyXG5cclxuICAgIC8vIFJhZGl1cyBvZiBDdXJ2YXR1cmVcclxuICAgIGNvbnN0IHJhZGl1c09mQ3VydmF0dXJlQ29udHJvbCA9IG5ldyBSYWRpdXNPZkN1cnZhdHVyZUNvbnRyb2woXHJcbiAgICAgIG9wdGljLmluZGlyZWN0Rm9jYWxMZW5ndGhNb2RlbC5yYWRpdXNPZkN1cnZhdHVyZU1hZ25pdHVkZVByb3BlcnR5LFxyXG4gICAgICBvcHRpYy5yYWRpdXNPZkN1cnZhdHVyZVByb3BlcnR5LCB7XHJcbiAgICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAncmFkaXVzT2ZDdXJ2YXR1cmVDb250cm9sJyApXHJcbiAgICAgIH0gKTtcclxuICAgIGNoaWxkcmVuLnB1c2goIHJhZGl1c09mQ3VydmF0dXJlQ29udHJvbCApO1xyXG5cclxuICAgIC8vIEluZGV4IG9mIFJlZnJhY3Rpb24gKGZvciBsZW5zIG9ubHkpXHJcbiAgICBpZiAoIG9wdGljIGluc3RhbmNlb2YgTGVucyApIHtcclxuICAgICAgY29uc3QgaW5kZXhPZlJlZnJhY3Rpb25Db250cm9sID0gbmV3IEluZGV4T2ZSZWZyYWN0aW9uQ29udHJvbCggb3B0aWMuaW5kaXJlY3RGb2NhbExlbmd0aE1vZGVsLmluZGV4T2ZSZWZyYWN0aW9uUHJvcGVydHksIHtcclxuICAgICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdpbmRleE9mUmVmcmFjdGlvbkNvbnRyb2wnIClcclxuICAgICAgfSApO1xyXG4gICAgICBjaGlsZHJlbi5wdXNoKCBpbmRleE9mUmVmcmFjdGlvbkNvbnRyb2wgKTtcclxuICAgIH1cclxuXHJcbiAgICBzdXBlcigge1xyXG4gICAgICBjaGlsZHJlbjogY2hpbGRyZW4sXHJcbiAgICAgIHNwYWNpbmc6IFhfU1BBQ0lORyxcclxuICAgICAgYWxpZ246IEFMSUdOLFxyXG4gICAgICB2aXNpYmxlUHJvcGVydHk6IG5ldyBEZXJpdmVkUHJvcGVydHkoIFsgR09QcmVmZXJlbmNlcy5mb2NhbExlbmd0aE1vZGVsVHlwZVByb3BlcnR5LCBvcHRpYy5vcHRpY1N1cmZhY2VUeXBlUHJvcGVydHkgXSxcclxuICAgICAgICAoIGZvY2FsTGVuZ3RoTW9kZWxUeXBlLCBvcHRpY1N1cmZhY2VUeXBlICkgPT5cclxuICAgICAgICAgICggZm9jYWxMZW5ndGhNb2RlbFR5cGUgPT09ICdpbmRpcmVjdCcgKSAmJiAoIG9wdGljU3VyZmFjZVR5cGUgIT09ICdmbGF0JyApXHJcbiAgICAgIClcclxuICAgICAgLy8gbm8gdGFuZGVtLCBkbyBub3QgaW5zdHJ1bWVudCFcclxuICAgIH0gKTtcclxuICB9XHJcbn1cclxuXHJcbmdlb21ldHJpY09wdGljcy5yZWdpc3RlciggJ09wdGljU3VicGFuZWwnLCBPcHRpY1N1YnBhbmVsICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxTQUFTQSxJQUFJLEVBQUVDLElBQUksUUFBUSxtQ0FBbUM7QUFDOUQsT0FBT0MsZUFBZSxNQUFNLDBCQUEwQjtBQUN0RCxPQUFPQyxrQkFBa0IsTUFBTSx5QkFBeUI7QUFDeEQsT0FBT0MsYUFBYSxNQUFNLDJCQUEyQjtBQUNyRCxPQUFPQyx3QkFBd0IsTUFBTSwrQkFBK0I7QUFDcEUsT0FBT0MsSUFBSSxNQUFNLDBCQUEwQjtBQUMzQyxPQUFPQyx3QkFBd0IsTUFBTSwrQkFBK0I7QUFDcEUsT0FBT0MsZUFBZSxNQUFNLHNCQUFzQjtBQUdsRCxPQUFPQyxlQUFlLE1BQU0sd0NBQXdDO0FBRXBFLE1BQU1DLFNBQVMsR0FBRyxFQUFFLENBQUMsQ0FBQztBQUN0QixNQUFNQyxLQUFLLEdBQUcsUUFB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