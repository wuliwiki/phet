// Copyright 2021-2023, University of Colorado Boulder

/**
 * VisibilityCheckboxGroup is a group of checkboxes for controlling visibility of things in the user interface.
 *
 * @author Martin Veillette
 * @author Chris Malley (PixelZoom, Inc.)
 */

import { HBox, Text } from '../../../../scenery/js/imports.js';
import VerticalCheckboxGroup from '../../../../sun/js/VerticalCheckboxGroup.js';
import geometricOptics from '../../geometricOptics.js';
import GeometricOpticsStrings from '../../GeometricOpticsStrings.js';
import GuideNode from './GuideNode.js';
import GOConstants from '../GOConstants.js';
import optionize from '../../../../phet-core/js/optionize.js';
import SecondPointNode from './SecondPointNode.js';
import FocalPointNode from './FocalPointNode.js';
import TwoFPointNode from './TwoFPointNode.js';
import GOPreferences from '../model/GOPreferences.js';
import GOQueryParameters from '../GOQueryParameters.js';
import Lens from '../../lens/model/Lens.js';
export default class VisibilityCheckboxGroup extends VerticalCheckboxGroup {
  /**
   * @param visibleProperties - Properties controlled by these check boxes
   * @param optic
   * @param virtualImageCheckboxEnabledProperty - is the 'Virtual Image' check box enabled?
   * @param providedOptions
   */
  constructor(visibleProperties, optic, virtualImageCheckboxEnabledProperty, providedOptions) {
    const options = optionize()({
      // VerticalCheckboxGroupOptions
      spacing: 4,
      checkboxOptions: {
        boxWidth: GOConstants.CHECKBOX_BOX_WIDTH
      },
      visiblePropertyOptions: {
        phetioFeatured: true
      }
    }, providedOptions);

    // These checkboxes are not present in Geometric Optics: Basics, because it only has a flat mirror, with infinite
    // focal length. See https://github.com/phetsims/geometric-optics-basics/issues/2#issuecomment-998203690
    const focalPointItems = optic.isExclusivelyFlatMirror() ? [] : [
    // Focal Points (F)
    createItem(GeometricOpticsStrings.checkbox.focalPointsStringProperty, visibleProperties.focalPointsVisibleProperty, {
      iconNode: FocalPointNode.createIcon(),
      tandemName: 'focalPointsCheckbox'
    }),
    // 2F Points
    createItem(GeometricOpticsStrings.checkbox.twoFPointsStringProperty, visibleProperties.twoFPointsVisibleProperty, {
      iconNode: TwoFPointNode.createIcon(),
      options: {
        visibleProperty: GOPreferences.add2FPointsCheckboxProperty
      },
      tandemName: 'twoFPointsCheckbox'
    })];
    const items = [...focalPointItems,
    // Virtual Image
    createItem(GeometricOpticsStrings.checkbox.virtualImageStringProperty, visibleProperties.virtualImageVisibleProperty, {
      options: {
        enabledProperty: virtualImageCheckboxEnabledProperty
      },
      tandemName: 'virtualImageCheckbox'
    }),
    // Labels
    createItem(GeometricOpticsStrings.checkbox.labelsStringProperty, visibleProperties.labelsVisibleProperty, {
      tandemName: 'labelsCheckbox'
    }),
    // Second Point
    createItem(GeometricOpticsStrings.checkbox.secondPointStringProperty, visibleProperties.secondPointVisibleProperty, {
      iconNode: SecondPointNode.createIcon(),
      options: {
        visible: !options.isBasicsVersion // 'Second Point' checkbox is hidden in the Basics version
      },

      tandemName: 'secondPointCheckbox'
    })];

    // Guides
    if (optic instanceof Lens) {
      items.push(createItem(GeometricOpticsStrings.checkbox.guidesStringProperty, visibleProperties.guidesVisibleProperty, {
        iconNode: GuideNode.createIcon(),
        options: {
          visible: GOQueryParameters.addGuidesCheckbox,
          visiblePropertyOptions: {
            phetioFeatured: false
          },
          enabledPropertyOptions: {
            phetioFeatured: false
          }
        },
        tandemName: 'guidesCheckbox'
      }));
    }
    super(items, options);
  }
}
function createItem(labelStringProperty, property, providedOptions) {
  return {
    createNode: tandem => {
      const labelText = new Text(labelStringProperty, {
        font: GOConstants.CONTROL_FONT,
        maxWidth: 90,
        tandem: tandem.createTandem('labelText')
      });

      // Create HBox if icon is present, otherwise the label is just text.
      return providedOptions.iconNode ? new HBox({
        children: [labelText, providedOptions.iconNode],
        spacing: 8
      }) : labelText;
    },
    property: property,
    options: providedOptions.options,
    tandemName: providedOptions.tandemName
  };
}
geometricOptics.register('VisibilityCheckboxGroup', VisibilityCheckboxGroup);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJIQm94IiwiVGV4dCIsIlZlcnRpY2FsQ2hlY2tib3hHcm91cCIsImdlb21ldHJpY09wdGljcyIsIkdlb21ldHJpY09wdGljc1N0cmluZ3MiLCJHdWlkZU5vZGUiLCJHT0NvbnN0YW50cyIsIm9wdGlvbml6ZSIsIlNlY29uZFBvaW50Tm9kZSIsIkZvY2FsUG9pbnROb2RlIiwiVHdvRlBvaW50Tm9kZSIsIkdPUHJlZmVyZW5jZXMiLCJHT1F1ZXJ5UGFyYW1ldGVycyIsIkxlbnMiLCJWaXNpYmlsaXR5Q2hlY2tib3hHcm91cCIsImNvbnN0cnVjdG9yIiwidmlzaWJsZVByb3BlcnRpZXMiLCJvcHRpYyIsInZpcnR1YWxJbWFnZUNoZWNrYm94RW5hYmxlZFByb3BlcnR5IiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsInNwYWNpbmciLCJjaGVja2JveE9wdGlvbnMiLCJib3hXaWR0aCIsIkNIRUNLQk9YX0JPWF9XSURUSCIsInZpc2libGVQcm9wZXJ0eU9wdGlvbnMiLCJwaGV0aW9GZWF0dXJlZCIsImZvY2FsUG9pbnRJdGVtcyIsImlzRXhjbHVzaXZlbHlGbGF0TWlycm9yIiwiY3JlYXRlSXRlbSIsImNoZWNrYm94IiwiZm9jYWxQb2ludHNTdHJpbmdQcm9wZXJ0eSIsImZvY2FsUG9pbnRzVmlzaWJsZVByb3BlcnR5IiwiaWNvbk5vZGUiLCJjcmVhdGVJY29uIiwidGFuZGVtTmFtZSIsInR3b0ZQb2ludHNTdHJpbmdQcm9wZXJ0eSIsInR3b0ZQb2ludHNWaXNpYmxlUHJvcGVydHkiLCJ2aXNpYmxlUHJvcGVydHkiLCJhZGQyRlBvaW50c0NoZWNrYm94UHJvcGVydHkiLCJpdGVtcyIsInZpcnR1YWxJbWFnZVN0cmluZ1Byb3BlcnR5IiwidmlydHVhbEltYWdlVmlzaWJsZVByb3BlcnR5IiwiZW5hYmxlZFByb3BlcnR5IiwibGFiZWxzU3RyaW5nUHJvcGVydHkiLCJsYWJlbHNWaXNpYmxlUHJvcGVydHkiLCJzZWNvbmRQb2ludFN0cmluZ1Byb3BlcnR5Iiwic2Vjb25kUG9pbnRWaXNpYmxlUHJvcGVydHkiLCJ2aXNpYmxlIiwiaXNCYXNpY3NWZXJzaW9uIiwicHVzaCIsImd1aWRlc1N0cmluZ1Byb3BlcnR5IiwiZ3VpZGVzVmlzaWJsZVByb3BlcnR5IiwiYWRkR3VpZGVzQ2hlY2tib3giLCJlbmFibGVkUHJvcGVydHlPcHRpb25zIiwibGFiZWxTdHJpbmdQcm9wZXJ0eSIsInByb3BlcnR5IiwiY3JlYXRlTm9kZSIsInRhbmRlbSIsImxhYmVsVGV4dCIsImZvbnQiLCJDT05UUk9MX0ZPTlQiLCJtYXhXaWR0aCIsImNyZWF0ZVRhbmRlbSIsImNoaWxkcmVuIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJWaXNpYmlsaXR5Q2hlY2tib3hHcm91cC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMS0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBWaXNpYmlsaXR5Q2hlY2tib3hHcm91cCBpcyBhIGdyb3VwIG9mIGNoZWNrYm94ZXMgZm9yIGNvbnRyb2xsaW5nIHZpc2liaWxpdHkgb2YgdGhpbmdzIGluIHRoZSB1c2VyIGludGVyZmFjZS5cclxuICpcclxuICogQGF1dGhvciBNYXJ0aW4gVmVpbGxldHRlXHJcbiAqIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgSEJveCwgTm9kZSwgVGV4dCB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBWZXJ0aWNhbENoZWNrYm94R3JvdXAsIHsgVmVydGljYWxDaGVja2JveEdyb3VwSXRlbSwgVmVydGljYWxDaGVja2JveEdyb3VwT3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL3N1bi9qcy9WZXJ0aWNhbENoZWNrYm94R3JvdXAuanMnO1xyXG5pbXBvcnQgZ2VvbWV0cmljT3B0aWNzIGZyb20gJy4uLy4uL2dlb21ldHJpY09wdGljcy5qcyc7XHJcbmltcG9ydCBHZW9tZXRyaWNPcHRpY3NTdHJpbmdzIGZyb20gJy4uLy4uL0dlb21ldHJpY09wdGljc1N0cmluZ3MuanMnO1xyXG5pbXBvcnQgR3VpZGVOb2RlIGZyb20gJy4vR3VpZGVOb2RlLmpzJztcclxuaW1wb3J0IEdPQ29uc3RhbnRzIGZyb20gJy4uL0dPQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IFZpc2libGVQcm9wZXJ0aWVzIGZyb20gJy4vVmlzaWJsZVByb3BlcnRpZXMuanMnO1xyXG5pbXBvcnQgVFJlYWRPbmx5UHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9UUmVhZE9ubHlQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBvcHRpb25pemUgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCBQaWNrUmVxdWlyZWQgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL1BpY2tSZXF1aXJlZC5qcyc7XHJcbmltcG9ydCBQaWNrT3B0aW9uYWwgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL1BpY2tPcHRpb25hbC5qcyc7XHJcbmltcG9ydCBTZWNvbmRQb2ludE5vZGUgZnJvbSAnLi9TZWNvbmRQb2ludE5vZGUuanMnO1xyXG5pbXBvcnQgRm9jYWxQb2ludE5vZGUgZnJvbSAnLi9Gb2NhbFBvaW50Tm9kZS5qcyc7XHJcbmltcG9ydCBUd29GUG9pbnROb2RlIGZyb20gJy4vVHdvRlBvaW50Tm9kZS5qcyc7XHJcbmltcG9ydCBHT1ByZWZlcmVuY2VzIGZyb20gJy4uL21vZGVsL0dPUHJlZmVyZW5jZXMuanMnO1xyXG5pbXBvcnQgR09RdWVyeVBhcmFtZXRlcnMgZnJvbSAnLi4vR09RdWVyeVBhcmFtZXRlcnMuanMnO1xyXG5pbXBvcnQgeyBHT1NpbU9wdGlvbnMgfSBmcm9tICcuLi8uLi9HT1NpbS5qcyc7XHJcbmltcG9ydCBPcHRpYyBmcm9tICcuLi9tb2RlbC9PcHRpYy5qcyc7XHJcbmltcG9ydCBMZW5zIGZyb20gJy4uLy4uL2xlbnMvbW9kZWwvTGVucy5qcyc7XHJcbmltcG9ydCBQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1Byb3BlcnR5LmpzJztcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSBQaWNrUmVxdWlyZWQ8R09TaW1PcHRpb25zLCAnaXNCYXNpY3NWZXJzaW9uJz47XHJcblxyXG5leHBvcnQgdHlwZSBWaXNpYmlsaXR5Q2hlY2tib3hHcm91cE9wdGlvbnMgPSBTZWxmT3B0aW9ucyAmIFBpY2tSZXF1aXJlZDxWZXJ0aWNhbENoZWNrYm94R3JvdXBPcHRpb25zLCAndGFuZGVtJz47XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaXNpYmlsaXR5Q2hlY2tib3hHcm91cCBleHRlbmRzIFZlcnRpY2FsQ2hlY2tib3hHcm91cCB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB2aXNpYmxlUHJvcGVydGllcyAtIFByb3BlcnRpZXMgY29udHJvbGxlZCBieSB0aGVzZSBjaGVjayBib3hlc1xyXG4gICAqIEBwYXJhbSBvcHRpY1xyXG4gICAqIEBwYXJhbSB2aXJ0dWFsSW1hZ2VDaGVja2JveEVuYWJsZWRQcm9wZXJ0eSAtIGlzIHRoZSAnVmlydHVhbCBJbWFnZScgY2hlY2sgYm94IGVuYWJsZWQ/XHJcbiAgICogQHBhcmFtIHByb3ZpZGVkT3B0aW9uc1xyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggdmlzaWJsZVByb3BlcnRpZXM6IFZpc2libGVQcm9wZXJ0aWVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgb3B0aWM6IE9wdGljLFxyXG4gICAgICAgICAgICAgICAgICAgICAgdmlydHVhbEltYWdlQ2hlY2tib3hFbmFibGVkUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PGJvb2xlYW4+LFxyXG4gICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZWRPcHRpb25zOiBWaXNpYmlsaXR5Q2hlY2tib3hHcm91cE9wdGlvbnMgKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxWaXNpYmlsaXR5Q2hlY2tib3hHcm91cE9wdGlvbnMsIFNlbGZPcHRpb25zLCBWZXJ0aWNhbENoZWNrYm94R3JvdXBPcHRpb25zPigpKCB7XHJcblxyXG4gICAgICAvLyBWZXJ0aWNhbENoZWNrYm94R3JvdXBPcHRpb25zXHJcbiAgICAgIHNwYWNpbmc6IDQsXHJcbiAgICAgIGNoZWNrYm94T3B0aW9uczoge1xyXG4gICAgICAgIGJveFdpZHRoOiBHT0NvbnN0YW50cy5DSEVDS0JPWF9CT1hfV0lEVEhcclxuICAgICAgfSxcclxuICAgICAgdmlzaWJsZVByb3BlcnR5T3B0aW9uczoge1xyXG4gICAgICAgIHBoZXRpb0ZlYXR1cmVkOiB0cnVlXHJcbiAgICAgIH1cclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIC8vIFRoZXNlIGNoZWNrYm94ZXMgYXJlIG5vdCBwcmVzZW50IGluIEdlb21ldHJpYyBPcHRpY3M6IEJhc2ljcywgYmVjYXVzZSBpdCBvbmx5IGhhcyBhIGZsYXQgbWlycm9yLCB3aXRoIGluZmluaXRlXHJcbiAgICAvLyBmb2NhbCBsZW5ndGguIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvZ2VvbWV0cmljLW9wdGljcy1iYXNpY3MvaXNzdWVzLzIjaXNzdWVjb21tZW50LTk5ODIwMzY5MFxyXG4gICAgY29uc3QgZm9jYWxQb2ludEl0ZW1zID0gb3B0aWMuaXNFeGNsdXNpdmVseUZsYXRNaXJyb3IoKSA/IFtdIDogW1xyXG5cclxuICAgICAgLy8gRm9jYWwgUG9pbnRzIChGKVxyXG4gICAgICBjcmVhdGVJdGVtKCBHZW9tZXRyaWNPcHRpY3NTdHJpbmdzLmNoZWNrYm94LmZvY2FsUG9pbnRzU3RyaW5nUHJvcGVydHksIHZpc2libGVQcm9wZXJ0aWVzLmZvY2FsUG9pbnRzVmlzaWJsZVByb3BlcnR5LCB7XHJcbiAgICAgICAgaWNvbk5vZGU6IEZvY2FsUG9pbnROb2RlLmNyZWF0ZUljb24oKSxcclxuICAgICAgICB0YW5kZW1OYW1lOiAnZm9jYWxQb2ludHNDaGVja2JveCdcclxuICAgICAgfSApLFxyXG5cclxuICAgICAgLy8gMkYgUG9pbnRzXHJcbiAgICAgIGNyZWF0ZUl0ZW0oIEdlb21ldHJpY09wdGljc1N0cmluZ3MuY2hlY2tib3gudHdvRlBvaW50c1N0cmluZ1Byb3BlcnR5LCB2aXNpYmxlUHJvcGVydGllcy50d29GUG9pbnRzVmlzaWJsZVByb3BlcnR5LCB7XHJcbiAgICAgICAgaWNvbk5vZGU6IFR3b0ZQb2ludE5vZGUuY3JlYXRlSWNvbigpLFxyXG4gICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgIHZpc2libGVQcm9wZXJ0eTogR09QcmVmZXJlbmNlcy5hZGQyRlBvaW50c0NoZWNrYm94UHJvcGVydHlcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRhbmRlbU5hbWU6ICd0d29GUG9pbnRzQ2hlY2tib3gnXHJcbiAgICAgIH0gKVxyXG4gICAgXTtcclxuXHJcbiAgICBjb25zdCBpdGVtcyA9IFtcclxuICAgICAgLi4uZm9jYWxQb2ludEl0ZW1zLFxyXG5cclxuICAgICAgLy8gVmlydHVhbCBJbWFnZVxyXG4gICAgICBjcmVhdGVJdGVtKCBHZW9tZXRyaWNPcHRpY3NTdHJpbmdzLmNoZWNrYm94LnZpcnR1YWxJbWFnZVN0cmluZ1Byb3BlcnR5LCB2aXNpYmxlUHJvcGVydGllcy52aXJ0dWFsSW1hZ2VWaXNpYmxlUHJvcGVydHksIHtcclxuICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICBlbmFibGVkUHJvcGVydHk6IHZpcnR1YWxJbWFnZUNoZWNrYm94RW5hYmxlZFByb3BlcnR5XHJcbiAgICAgICAgfSxcclxuICAgICAgICB0YW5kZW1OYW1lOiAndmlydHVhbEltYWdlQ2hlY2tib3gnXHJcbiAgICAgIH0gKSxcclxuXHJcbiAgICAgIC8vIExhYmVsc1xyXG4gICAgICBjcmVhdGVJdGVtKCBHZW9tZXRyaWNPcHRpY3NTdHJpbmdzLmNoZWNrYm94LmxhYmVsc1N0cmluZ1Byb3BlcnR5LCB2aXNpYmxlUHJvcGVydGllcy5sYWJlbHNWaXNpYmxlUHJvcGVydHksIHtcclxuICAgICAgICB0YW5kZW1OYW1lOiAnbGFiZWxzQ2hlY2tib3gnXHJcbiAgICAgIH0gKSxcclxuXHJcbiAgICAgIC8vIFNlY29uZCBQb2ludFxyXG4gICAgICBjcmVhdGVJdGVtKCBHZW9tZXRyaWNPcHRpY3NTdHJpbmdzLmNoZWNrYm94LnNlY29uZFBvaW50U3RyaW5nUHJvcGVydHksIHZpc2libGVQcm9wZXJ0aWVzLnNlY29uZFBvaW50VmlzaWJsZVByb3BlcnR5LCB7XHJcbiAgICAgICAgaWNvbk5vZGU6IFNlY29uZFBvaW50Tm9kZS5jcmVhdGVJY29uKCksXHJcbiAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgdmlzaWJsZTogIW9wdGlvbnMuaXNCYXNpY3NWZXJzaW9uIC8vICdTZWNvbmQgUG9pbnQnIGNoZWNrYm94IGlzIGhpZGRlbiBpbiB0aGUgQmFzaWNzIHZlcnNpb25cclxuICAgICAgICB9LFxyXG4gICAgICAgIHRhbmRlbU5hbWU6ICdzZWNvbmRQb2ludENoZWNrYm94J1xyXG4gICAgICB9IClcclxuICAgIF07XHJcblxyXG4gICAgLy8gR3VpZGVzXHJcbiAgICBpZiAoIG9wdGljIGluc3RhbmNlb2YgTGVucyApIHtcclxuICAgICAgaXRlbXMucHVzaCggY3JlYXRlSXRlbSggR2VvbWV0cmljT3B0aWNzU3RyaW5ncy5jaGVja2JveC5ndWlkZXNTdHJpbmdQcm9wZXJ0eSwgdmlzaWJsZVByb3BlcnRpZXMuZ3VpZGVzVmlzaWJsZVByb3BlcnR5LCB7XHJcbiAgICAgICAgaWNvbk5vZGU6IEd1aWRlTm9kZS5jcmVhdGVJY29uKCksXHJcbiAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgdmlzaWJsZTogR09RdWVyeVBhcmFtZXRlcnMuYWRkR3VpZGVzQ2hlY2tib3gsXHJcbiAgICAgICAgICB2aXNpYmxlUHJvcGVydHlPcHRpb25zOiB7XHJcbiAgICAgICAgICAgIHBoZXRpb0ZlYXR1cmVkOiBmYWxzZVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGVuYWJsZWRQcm9wZXJ0eU9wdGlvbnM6IHtcclxuICAgICAgICAgICAgcGhldGlvRmVhdHVyZWQ6IGZhbHNlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB0YW5kZW1OYW1lOiAnZ3VpZGVzQ2hlY2tib3gnXHJcbiAgICAgIH0gKSApO1xyXG4gICAgfVxyXG5cclxuICAgIHN1cGVyKCBpdGVtcywgb3B0aW9ucyApO1xyXG4gIH1cclxufVxyXG5cclxudHlwZSBJdGVtT3B0aW9ucyA9IHtcclxuICBpY29uTm9kZT86IE5vZGU7XHJcbn0gJiBQaWNrUmVxdWlyZWQ8VmVydGljYWxDaGVja2JveEdyb3VwSXRlbSwgJ3RhbmRlbU5hbWUnPiAmIFBpY2tPcHRpb25hbDxWZXJ0aWNhbENoZWNrYm94R3JvdXBJdGVtLCAnb3B0aW9ucyc+O1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlSXRlbSggbGFiZWxTdHJpbmdQcm9wZXJ0eTogVFJlYWRPbmx5UHJvcGVydHk8c3RyaW5nPixcclxuICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHk6IFByb3BlcnR5PGJvb2xlYW4+LCBwcm92aWRlZE9wdGlvbnM6IEl0ZW1PcHRpb25zICk6IFZlcnRpY2FsQ2hlY2tib3hHcm91cEl0ZW0ge1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgY3JlYXRlTm9kZTogdGFuZGVtID0+IHtcclxuICAgICAgY29uc3QgbGFiZWxUZXh0ID0gbmV3IFRleHQoIGxhYmVsU3RyaW5nUHJvcGVydHksIHtcclxuICAgICAgICBmb250OiBHT0NvbnN0YW50cy5DT05UUk9MX0ZPTlQsXHJcbiAgICAgICAgbWF4V2lkdGg6IDkwLFxyXG4gICAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2xhYmVsVGV4dCcgKVxyXG4gICAgICB9ICk7XHJcblxyXG4gICAgICAvLyBDcmVhdGUgSEJveCBpZiBpY29uIGlzIHByZXNlbnQsIG90aGVyd2lzZSB0aGUgbGFiZWwgaXMganVzdCB0ZXh0LlxyXG4gICAgICByZXR1cm4gcHJvdmlkZWRPcHRpb25zLmljb25Ob2RlID9cclxuICAgICAgICAgICAgIG5ldyBIQm94KCB7IGNoaWxkcmVuOiBbIGxhYmVsVGV4dCwgcHJvdmlkZWRPcHRpb25zLmljb25Ob2RlIF0sIHNwYWNpbmc6IDggfSApIDpcclxuICAgICAgICAgICAgIGxhYmVsVGV4dDtcclxuICAgIH0sXHJcbiAgICBwcm9wZXJ0eTogcHJvcGVydHksXHJcbiAgICBvcHRpb25zOiBwcm92aWRlZE9wdGlvbnMub3B0aW9ucyxcclxuICAgIHRhbmRlbU5hbWU6IHByb3ZpZGVkT3B0aW9ucy50YW5kZW1OYW1lXHJcbiAgfTtcclxufVxyXG5cclxuZ2VvbWV0cmljT3B0aWNzLnJlZ2lzdGVyKCAnVmlzaWJpbGl0eUNoZWNrYm94R3JvdXAnLCBWaXNpYmlsaXR5Q2hlY2tib3hHcm91cCApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFNBQVNBLElBQUksRUFBUUMsSUFBSSxRQUFRLG1DQUFtQztBQUNwRSxPQUFPQyxxQkFBcUIsTUFBbUUsNkNBQTZDO0FBQzVJLE9BQU9DLGVBQWUsTUFBTSwwQkFBMEI7QUFDdEQsT0FBT0Msc0JBQXNCLE1BQU0saUNBQWlDO0FBQ3BFLE9BQU9DLFNBQVMsTUFBTSxnQkFBZ0I7QUFDdEMsT0FBT0MsV0FBVyxNQUFNLG1CQUFtQjtBQUczQyxPQUFPQyxTQUFTLE1BQU0sdUNBQXVDO0FBRzdELE9BQU9DLGVBQWUsTUFBTSxzQkFBc0I7QUFDbEQsT0FBT0MsY0FBYyxNQUFNLHFCQUFxQjtBQUNoRCxPQUFPQyxhQUFhLE1BQU0sb0JBQW9CO0FBQzlDLE9BQU9DLGFBQWEsTUFBTSwyQkFBMkI7QUFDckQsT0FBT0MsaUJBQWlCLE1BQU0seUJBQXlCO0FBR3ZELE9BQU9DLElBQUksTUFBTSwwQkFBMEI7QUFPM0MsZUFBZSxNQUFNQyx1QkFBdUIsU0FBU1oscUJBQXFCLENBQUM7RUFFekU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ1NhLFdBQVdBLENBQUVDLGlCQUFvQyxFQUNwQ0MsS0FBWSxFQUNaQyxtQ0FBK0QsRUFDL0RDLGVBQStDLEVBQUc7SUFFcEUsTUFBTUMsT0FBTyxHQUFHYixTQUFTLENBQTRFLENBQUMsQ0FBRTtNQUV0RztNQUNBYyxPQUFPLEVBQUUsQ0FBQztNQUNWQyxlQUFlLEVBQUU7UUFDZkMsUUFBUSxFQUFFakIsV0FBVyxDQUFDa0I7TUFDeEIsQ0FBQztNQUNEQyxzQkFBc0IsRUFBRTtRQUN0QkMsY0FBYyxFQUFFO01BQ2xCO0lBQ0YsQ0FBQyxFQUFFUCxlQUFnQixDQUFDOztJQUVwQjtJQUNBO0lBQ0EsTUFBTVEsZUFBZSxHQUFHVixLQUFLLENBQUNXLHVCQUF1QixDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUc7SUFFN0Q7SUFDQUMsVUFBVSxDQUFFekIsc0JBQXNCLENBQUMwQixRQUFRLENBQUNDLHlCQUF5QixFQUFFZixpQkFBaUIsQ0FBQ2dCLDBCQUEwQixFQUFFO01BQ25IQyxRQUFRLEVBQUV4QixjQUFjLENBQUN5QixVQUFVLENBQUMsQ0FBQztNQUNyQ0MsVUFBVSxFQUFFO0lBQ2QsQ0FBRSxDQUFDO0lBRUg7SUFDQU4sVUFBVSxDQUFFekIsc0JBQXNCLENBQUMwQixRQUFRLENBQUNNLHdCQUF3QixFQUFFcEIsaUJBQWlCLENBQUNxQix5QkFBeUIsRUFBRTtNQUNqSEosUUFBUSxFQUFFdkIsYUFBYSxDQUFDd0IsVUFBVSxDQUFDLENBQUM7TUFDcENkLE9BQU8sRUFBRTtRQUNQa0IsZUFBZSxFQUFFM0IsYUFBYSxDQUFDNEI7TUFDakMsQ0FBQztNQUNESixVQUFVLEVBQUU7SUFDZCxDQUFFLENBQUMsQ0FDSjtJQUVELE1BQU1LLEtBQUssR0FBRyxDQUNaLEdBQUdiLGVBQWU7SUFFbEI7SUFDQUUsVUFBVSxDQUFFekIsc0JBQXNCLENBQUMwQixRQUFRLENBQUNXLDBCQUEwQixFQUFFekIsaUJBQWlCLENBQUMwQiwyQkFBMkIsRUFBRTtNQUNySHRCLE9BQU8sRUFBRTtRQUNQdUIsZUFBZSxFQUFFekI7TUFDbkIsQ0FBQztNQUNEaUIsVUFBVSxFQUFFO0lBQ2QsQ0FBRSxDQUFDO0lBRUg7SUFDQU4sVUFBVSxDQUFFekIsc0JBQXNCLENBQUMwQixRQUFRLENBQUNjLG9CQUFvQixFQUFFNUIsaUJBQWlCLENBQUM2QixxQkFBcUIsRUFBRTtNQUN6R1YsVUFBVSxFQUFFO0lBQ2QsQ0FBRSxDQUFDO0lBRUg7SUFDQU4sVUFBVSxDQUFFekIsc0JBQXNCLENBQUMwQixRQUFRLENBQUNnQix5QkFBeUIsRUFBRTlCLGlCQUFpQixDQUFDK0IsMEJBQTBCLEVBQUU7TUFDbkhkLFFBQVEsRUFBRXpCLGVBQWUsQ0FBQzBCLFVBQVUsQ0FBQyxDQUFDO01BQ3RDZCxPQUFPLEVBQUU7UUFDUDRCLE9BQU8sRUFBRSxDQUFDNUIsT0FBTyxDQUFDNkIsZUFBZSxDQUFDO01BQ3BDLENBQUM7O01BQ0RkLFVBQVUsRUFBRTtJQUNkLENBQUUsQ0FBQyxDQUNKOztJQUVEO0lBQ0EsSUFBS2xCLEtBQUssWUFBWUosSUFBSSxFQUFHO01BQzNCMkIsS0FBSyxDQUFDVSxJQUFJLENBQUVyQixVQUFVLENBQUV6QixzQkFBc0IsQ0FBQzBCLFFBQVEsQ0FBQ3FCLG9CQUFvQixFQUFFbkMsaUJBQWlCLENBQUNvQyxxQkFBcUIsRUFBRTtRQUNySG5CLFFBQVEsRUFBRTVCLFNBQVMsQ0FBQzZCLFVBQVUsQ0FBQyxDQUFDO1FBQ2hDZCxPQUFPLEVBQUU7VUFDUDRCLE9BQU8sRUFBRXBDLGlCQUFpQixDQUFDeUMsaUJBQWlCO1VBQzVDNUIsc0JBQXNCLEVBQUU7WUFDdEJDLGNBQWMsRUFBRTtVQUNsQixDQUFDO1VBQ0Q0QixzQkFBc0IsRUFBRTtZQUN0QjVCLGNBQWMsRUFBRTtVQUNsQjtRQUNGLENBQUM7UUFDRFMsVUFBVSxFQUFFO01BQ2QsQ0FBRSxDQUFFLENBQUM7SUFDUDtJQUVBLEtBQUssQ0FBRUssS0FBSyxFQUFFcEIsT0FBUSxDQUFDO0VBQ3pCO0FBQ0Y7QUFNQSxTQUFTUyxVQUFVQSxDQUFFMEIsbUJBQThDLEVBQzlDQyxRQUEyQixFQUFFckMsZUFBNEIsRUFBOEI7RUFFMUcsT0FBTztJQUNMc0MsVUFBVSxFQUFFQyxNQUFNLElBQUk7TUFDcEIsTUFBTUMsU0FBUyxHQUFHLElBQUkxRCxJQUFJLENBQUVzRCxtQkFBbUIsRUFBRTtRQUMvQ0ssSUFBSSxFQUFFdEQsV0FBVyxDQUFDdUQsWUFBWTtRQUM5QkMsUUFBUSxFQUFFLEVBQUU7UUFDWkosTUFBTSxFQUFFQSxNQUFNLENBQUNLLFlBQVksQ0FBRSxXQUFZO01BQzNDLENBQUUsQ0FBQzs7TUFFSDtNQUNBLE9BQU81QyxlQUFlLENBQUNjLFFBQVEsR0FDeEIsSUFBSWpDLElBQUksQ0FBRTtRQUFFZ0UsUUFBUSxFQUFFLENBQUVMLFNBQVMsRUFBRXhDLGVBQWUsQ0FBQ2MsUUFBUSxDQUFFO1FBQUVaLE9BQU8sRUFBRTtNQUFFLENBQUUsQ0FBQyxHQUM3RXNDLFNBQVM7SUFDbEIsQ0FBQztJQUNESCxRQUFRLEVBQUVBLFFBQVE7SUFDbEJwQyxPQUFPLEVBQUVELGVBQWUsQ0FBQ0MsT0FBTztJQUNoQ2UsVUFBVSxFQUFFaEIsZUFBZSxDQUFDZ0I7RUFDOUIsQ0FBQztBQUNIO0FBRUFoQyxlQUFlLENBQUM4RCxRQUFRLENBQUUseUJBQXlCLEVBQUVuRCx1QkFBd0IsQ0FBQyJ9