// Copyright 2021-2023, University of Colorado Boulder

/**
 * SecondPoint is the model of the second point on a framed object.
 *
 * @author Martin Veillette
 * @author Chris Malley (PixelZoom, Inc.)
 */

import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import NumberProperty from '../../../../axon/js/NumberProperty.js';
import Range from '../../../../dot/js/Range.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import optionize from '../../../../phet-core/js/optionize.js';
import PhetioObject from '../../../../tandem/js/PhetioObject.js';
import geometricOptics from '../../geometricOptics.js';
// range of the vertical offset for the second point, relative to frame object's position, in cm
// See https://github.com/phetsims/geometric-optics/issues/401
const VERTICAL_OFFSET_RANGE = new Range(-56.5, 0);
export default class SecondPoint extends PhetioObject {
  // position of the second point

  // vertical offset of second point with respect to the first point on the framed object position, in cm

  // position of the framed object that second point is associated with

  // Resets things that are specific to this class.

  constructor(framedObjectPositionProperty, providedOptions) {
    const options = optionize()({
      // PhetioObjectOptions
      phetioState: false
    }, providedOptions);
    super(options);
    this.verticalOffsetProperty = new NumberProperty(VERTICAL_OFFSET_RANGE.min, {
      range: VERTICAL_OFFSET_RANGE,
      tandem: options.tandem.createTandem('verticalOffsetProperty'),
      phetioFeatured: true,
      phetioDocumentation: 'offset relative to framed object position'
    });
    this.positionProperty = new DerivedProperty([framedObjectPositionProperty, this.verticalOffsetProperty], (framedObjectPosition, verticalOffset) => framedObjectPosition.plusXY(0, verticalOffset), {
      tandem: options.tandem.createTandem('positionProperty'),
      phetioFeatured: true,
      phetioValueType: Vector2.Vector2IO
    });
    this.framedObjectPositionProperty = framedObjectPositionProperty;
    this.resetSecondPoint = () => {
      this.verticalOffsetProperty.reset();
    };
  }
  dispose() {
    assert && assert(false, 'dispose is not supported, exists for the lifetime of the sim');
    super.dispose();
  }
  reset() {
    this.resetSecondPoint();
  }

  /**
   * Sets the second point-of-interest on the framed object.
   * @param position - relative to the framed object's position
   */
  setSecondPoint(position) {
    this.verticalOffsetProperty.value = VERTICAL_OFFSET_RANGE.constrainValue(position.y - this.framedObjectPositionProperty.value.y);
  }
}
geometricOptics.register('SecondPoint', SecondPoint);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJOdW1iZXJQcm9wZXJ0eSIsIlJhbmdlIiwiVmVjdG9yMiIsIm9wdGlvbml6ZSIsIlBoZXRpb09iamVjdCIsImdlb21ldHJpY09wdGljcyIsIlZFUlRJQ0FMX09GRlNFVF9SQU5HRSIsIlNlY29uZFBvaW50IiwiY29uc3RydWN0b3IiLCJmcmFtZWRPYmplY3RQb3NpdGlvblByb3BlcnR5IiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsInBoZXRpb1N0YXRlIiwidmVydGljYWxPZmZzZXRQcm9wZXJ0eSIsIm1pbiIsInJhbmdlIiwidGFuZGVtIiwiY3JlYXRlVGFuZGVtIiwicGhldGlvRmVhdHVyZWQiLCJwaGV0aW9Eb2N1bWVudGF0aW9uIiwicG9zaXRpb25Qcm9wZXJ0eSIsImZyYW1lZE9iamVjdFBvc2l0aW9uIiwidmVydGljYWxPZmZzZXQiLCJwbHVzWFkiLCJwaGV0aW9WYWx1ZVR5cGUiLCJWZWN0b3IySU8iLCJyZXNldFNlY29uZFBvaW50IiwicmVzZXQiLCJkaXNwb3NlIiwiYXNzZXJ0Iiwic2V0U2Vjb25kUG9pbnQiLCJwb3NpdGlvbiIsInZhbHVlIiwiY29uc3RyYWluVmFsdWUiLCJ5IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJTZWNvbmRQb2ludC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMS0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBTZWNvbmRQb2ludCBpcyB0aGUgbW9kZWwgb2YgdGhlIHNlY29uZCBwb2ludCBvbiBhIGZyYW1lZCBvYmplY3QuXHJcbiAqXHJcbiAqIEBhdXRob3IgTWFydGluIFZlaWxsZXR0ZVxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCBEZXJpdmVkUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9EZXJpdmVkUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgVFJlYWRPbmx5UHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9UUmVhZE9ubHlQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBOdW1iZXJQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL051bWJlclByb3BlcnR5LmpzJztcclxuaW1wb3J0IFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgUmFuZ2UgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1JhbmdlLmpzJztcclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgb3B0aW9uaXplLCB7IEVtcHR5U2VsZk9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuaW1wb3J0IFBoZXRpb09iamVjdCwgeyBQaGV0aW9PYmplY3RPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vLi4vdGFuZGVtL2pzL1BoZXRpb09iamVjdC5qcyc7XHJcbmltcG9ydCBnZW9tZXRyaWNPcHRpY3MgZnJvbSAnLi4vLi4vZ2VvbWV0cmljT3B0aWNzLmpzJztcclxuaW1wb3J0IFBpY2tSZXF1aXJlZCBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvUGlja1JlcXVpcmVkLmpzJztcclxuXHJcbi8vIHJhbmdlIG9mIHRoZSB2ZXJ0aWNhbCBvZmZzZXQgZm9yIHRoZSBzZWNvbmQgcG9pbnQsIHJlbGF0aXZlIHRvIGZyYW1lIG9iamVjdCdzIHBvc2l0aW9uLCBpbiBjbVxyXG4vLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL2dlb21ldHJpYy1vcHRpY3MvaXNzdWVzLzQwMVxyXG5jb25zdCBWRVJUSUNBTF9PRkZTRVRfUkFOR0UgPSBuZXcgUmFuZ2UoIC01Ni41LCAwICk7XHJcblxyXG50eXBlIFNlbGZPcHRpb25zID0gRW1wdHlTZWxmT3B0aW9ucztcclxuXHJcbnR5cGUgU2Vjb25kUG9pbnRPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBQaWNrUmVxdWlyZWQ8UGhldGlvT2JqZWN0T3B0aW9ucywgJ3RhbmRlbScgfCAncGhldGlvRG9jdW1lbnRhdGlvbic+O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2Vjb25kUG9pbnQgZXh0ZW5kcyBQaGV0aW9PYmplY3Qge1xyXG5cclxuICAvLyBwb3NpdGlvbiBvZiB0aGUgc2Vjb25kIHBvaW50XHJcbiAgcHVibGljIHJlYWRvbmx5IHBvc2l0aW9uUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PFZlY3RvcjI+O1xyXG5cclxuICAvLyB2ZXJ0aWNhbCBvZmZzZXQgb2Ygc2Vjb25kIHBvaW50IHdpdGggcmVzcGVjdCB0byB0aGUgZmlyc3QgcG9pbnQgb24gdGhlIGZyYW1lZCBvYmplY3QgcG9zaXRpb24sIGluIGNtXHJcbiAgcHJpdmF0ZSByZWFkb25seSB2ZXJ0aWNhbE9mZnNldFByb3BlcnR5OiBQcm9wZXJ0eTxudW1iZXI+O1xyXG5cclxuICAvLyBwb3NpdGlvbiBvZiB0aGUgZnJhbWVkIG9iamVjdCB0aGF0IHNlY29uZCBwb2ludCBpcyBhc3NvY2lhdGVkIHdpdGhcclxuICBwcml2YXRlIHJlYWRvbmx5IGZyYW1lZE9iamVjdFBvc2l0aW9uUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PFZlY3RvcjI+O1xyXG5cclxuICAvLyBSZXNldHMgdGhpbmdzIHRoYXQgYXJlIHNwZWNpZmljIHRvIHRoaXMgY2xhc3MuXHJcbiAgcHJpdmF0ZSByZWFkb25seSByZXNldFNlY29uZFBvaW50OiAoKSA9PiB2b2lkO1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIGZyYW1lZE9iamVjdFBvc2l0aW9uUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PFZlY3RvcjI+LCBwcm92aWRlZE9wdGlvbnM6IFNlY29uZFBvaW50T3B0aW9ucyApIHtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPFNlY29uZFBvaW50T3B0aW9ucywgU2VsZk9wdGlvbnMsIFBoZXRpb09iamVjdE9wdGlvbnM+KCkoIHtcclxuXHJcbiAgICAgIC8vIFBoZXRpb09iamVjdE9wdGlvbnNcclxuICAgICAgcGhldGlvU3RhdGU6IGZhbHNlXHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICBzdXBlciggb3B0aW9ucyApO1xyXG5cclxuICAgIHRoaXMudmVydGljYWxPZmZzZXRQcm9wZXJ0eSA9IG5ldyBOdW1iZXJQcm9wZXJ0eSggVkVSVElDQUxfT0ZGU0VUX1JBTkdFLm1pbiwge1xyXG4gICAgICByYW5nZTogVkVSVElDQUxfT0ZGU0VUX1JBTkdFLFxyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3ZlcnRpY2FsT2Zmc2V0UHJvcGVydHknICksXHJcbiAgICAgIHBoZXRpb0ZlYXR1cmVkOiB0cnVlLFxyXG4gICAgICBwaGV0aW9Eb2N1bWVudGF0aW9uOiAnb2Zmc2V0IHJlbGF0aXZlIHRvIGZyYW1lZCBvYmplY3QgcG9zaXRpb24nXHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5wb3NpdGlvblByb3BlcnR5ID0gbmV3IERlcml2ZWRQcm9wZXJ0eShcclxuICAgICAgWyBmcmFtZWRPYmplY3RQb3NpdGlvblByb3BlcnR5LCB0aGlzLnZlcnRpY2FsT2Zmc2V0UHJvcGVydHkgXSxcclxuICAgICAgKCBmcmFtZWRPYmplY3RQb3NpdGlvbiwgdmVydGljYWxPZmZzZXQgKSA9PlxyXG4gICAgICAgIGZyYW1lZE9iamVjdFBvc2l0aW9uLnBsdXNYWSggMCwgdmVydGljYWxPZmZzZXQgKSwge1xyXG4gICAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAncG9zaXRpb25Qcm9wZXJ0eScgKSxcclxuICAgICAgICBwaGV0aW9GZWF0dXJlZDogdHJ1ZSxcclxuICAgICAgICBwaGV0aW9WYWx1ZVR5cGU6IFZlY3RvcjIuVmVjdG9yMklPXHJcbiAgICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLmZyYW1lZE9iamVjdFBvc2l0aW9uUHJvcGVydHkgPSBmcmFtZWRPYmplY3RQb3NpdGlvblByb3BlcnR5O1xyXG5cclxuICAgIHRoaXMucmVzZXRTZWNvbmRQb2ludCA9ICgpID0+IHtcclxuICAgICAgdGhpcy52ZXJ0aWNhbE9mZnNldFByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG92ZXJyaWRlIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBmYWxzZSwgJ2Rpc3Bvc2UgaXMgbm90IHN1cHBvcnRlZCwgZXhpc3RzIGZvciB0aGUgbGlmZXRpbWUgb2YgdGhlIHNpbScgKTtcclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcclxuICAgIHRoaXMucmVzZXRTZWNvbmRQb2ludCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0cyB0aGUgc2Vjb25kIHBvaW50LW9mLWludGVyZXN0IG9uIHRoZSBmcmFtZWQgb2JqZWN0LlxyXG4gICAqIEBwYXJhbSBwb3NpdGlvbiAtIHJlbGF0aXZlIHRvIHRoZSBmcmFtZWQgb2JqZWN0J3MgcG9zaXRpb25cclxuICAgKi9cclxuICBwdWJsaWMgc2V0U2Vjb25kUG9pbnQoIHBvc2l0aW9uOiBWZWN0b3IyICk6IHZvaWQge1xyXG4gICAgdGhpcy52ZXJ0aWNhbE9mZnNldFByb3BlcnR5LnZhbHVlID1cclxuICAgICAgVkVSVElDQUxfT0ZGU0VUX1JBTkdFLmNvbnN0cmFpblZhbHVlKCBwb3NpdGlvbi55IC0gdGhpcy5mcmFtZWRPYmplY3RQb3NpdGlvblByb3BlcnR5LnZhbHVlLnkgKTtcclxuICB9XHJcbn1cclxuXHJcbmdlb21ldHJpY09wdGljcy5yZWdpc3RlciggJ1NlY29uZFBvaW50JywgU2Vjb25kUG9pbnQgKTsiXSwibWFwcGluZ3MiOiJBQUFBOztB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