// Copyright 2021-2022, University of Colorado Boulder

/**
 * MirrorNode displays the mirror.
 *
 * @author Martin Veillette
 * @author Chris Malley (PixelZoom, Inc.)
 */

import { Node, Path } from '../../../../scenery/js/imports.js';
import geometricOptics from '../../geometricOptics.js';
import GOColors from '../../common/GOColors.js';
import MirrorShapes from '../model/MirrorShapes.js';
import Matrix3 from '../../../../dot/js/Matrix3.js';
import GOQueryParameters from '../../common/GOQueryParameters.js';
import OriginNode from '../../common/view/OriginNode.js';
import optionize from '../../../../phet-core/js/optionize.js';
// constants
const FILL_PROPERTY = GOColors.mirrorBackingColorProperty;
const STROKE_PROPERTY = GOColors.mirrorReflectiveCoatingColorProperty;
const LINE_WIDTH = 2;
const ICON_FLAT_RADIUS_OF_CURVATURE_MAGNITUDE = 200000;
const ICON_CONVEX_RADIUS_OF_CURVATURE_MAGNITUDE = 20;
const ICON_CONCAVE_RADIUS_OF_CURVATURE_MAGNITUDE = -ICON_CONVEX_RADIUS_OF_CURVATURE_MAGNITUDE;
const ICON_DIAMETER = 30;
export default class MirrorNode extends Node {
  constructor(mirror, modelViewTransform, providedOptions) {
    const options = optionize()({
      // NodeOptions
      phetioVisiblePropertyInstrumented: false
    }, providedOptions);
    super(options);

    // the mirror's backing
    const backingNode = new Path(null, {
      fill: FILL_PROPERTY
    });

    // the mirror's reflective coating
    const reflectiveCoatingNode = new Path(null, {
      stroke: STROKE_PROPERTY,
      lineWidth: LINE_WIDTH
    });
    const children = [backingNode, reflectiveCoatingNode];

    // Red dot at the origin
    if (GOQueryParameters.debugOrigins) {
      children.push(new OriginNode());
    }
    this.children = children;

    // Shapes are described in model coordinates. Scale them to view coordinates.
    // Translation is handled by mirror.positionProperty listener.
    const scaleVector = modelViewTransform.getMatrix().getScaleVector();
    const scalingMatrix = Matrix3.scaling(scaleVector.x, scaleVector.y);
    mirror.shapesProperty.link(shapes => {
      backingNode.shape = shapes.backingShape.transformed(scalingMatrix);
      reflectiveCoatingNode.shape = shapes.reflectiveCoatingShape.transformed(scalingMatrix);
    });
    mirror.positionProperty.link(position => {
      this.translation = modelViewTransform.modelToViewPosition(position);
    });
    this.addLinkedElement(mirror, {
      tandem: options.tandem.createTandem(mirror.tandem.name)
    });
  }
  dispose() {
    assert && assert(false, 'dispose is not supported, exists for the lifetime of the sim');
    super.dispose();
  }

  /**
   * Creates an icon for a mirror.
   */
  static createIconNode(opticSurfaceType) {
    const radiusOfCurvature = opticSurfaceType === 'flat' ? ICON_FLAT_RADIUS_OF_CURVATURE_MAGNITUDE : opticSurfaceType === 'convex' ? ICON_CONVEX_RADIUS_OF_CURVATURE_MAGNITUDE : ICON_CONCAVE_RADIUS_OF_CURVATURE_MAGNITUDE;
    const mirrorShapes = new MirrorShapes(radiusOfCurvature, ICON_DIAMETER, {
      backingThickness: 4 // cm
    });

    const backingNode = new Path(mirrorShapes.backingShape, {
      fill: GOColors.mirrorBackingColorProperty
    });
    const reflectiveCoatingNode = new Path(mirrorShapes.reflectiveCoatingShape, {
      stroke: GOColors.mirrorReflectiveCoatingColorProperty
    });
    return new Node({
      children: [backingNode, reflectiveCoatingNode]
    });
  }
}
geometricOptics.register('MirrorNode', MirrorNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJOb2RlIiwiUGF0aCIsImdlb21ldHJpY09wdGljcyIsIkdPQ29sb3JzIiwiTWlycm9yU2hhcGVzIiwiTWF0cml4MyIsIkdPUXVlcnlQYXJhbWV0ZXJzIiwiT3JpZ2luTm9kZSIsIm9wdGlvbml6ZSIsIkZJTExfUFJPUEVSVFkiLCJtaXJyb3JCYWNraW5nQ29sb3JQcm9wZXJ0eSIsIlNUUk9LRV9QUk9QRVJUWSIsIm1pcnJvclJlZmxlY3RpdmVDb2F0aW5nQ29sb3JQcm9wZXJ0eSIsIkxJTkVfV0lEVEgiLCJJQ09OX0ZMQVRfUkFESVVTX09GX0NVUlZBVFVSRV9NQUdOSVRVREUiLCJJQ09OX0NPTlZFWF9SQURJVVNfT0ZfQ1VSVkFUVVJFX01BR05JVFVERSIsIklDT05fQ09OQ0FWRV9SQURJVVNfT0ZfQ1VSVkFUVVJFX01BR05JVFVERSIsIklDT05fRElBTUVURVIiLCJNaXJyb3JOb2RlIiwiY29uc3RydWN0b3IiLCJtaXJyb3IiLCJtb2RlbFZpZXdUcmFuc2Zvcm0iLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwicGhldGlvVmlzaWJsZVByb3BlcnR5SW5zdHJ1bWVudGVkIiwiYmFja2luZ05vZGUiLCJmaWxsIiwicmVmbGVjdGl2ZUNvYXRpbmdOb2RlIiwic3Ryb2tlIiwibGluZVdpZHRoIiwiY2hpbGRyZW4iLCJkZWJ1Z09yaWdpbnMiLCJwdXNoIiwic2NhbGVWZWN0b3IiLCJnZXRNYXRyaXgiLCJnZXRTY2FsZVZlY3RvciIsInNjYWxpbmdNYXRyaXgiLCJzY2FsaW5nIiwieCIsInkiLCJzaGFwZXNQcm9wZXJ0eSIsImxpbmsiLCJzaGFwZXMiLCJzaGFwZSIsImJhY2tpbmdTaGFwZSIsInRyYW5zZm9ybWVkIiwicmVmbGVjdGl2ZUNvYXRpbmdTaGFwZSIsInBvc2l0aW9uUHJvcGVydHkiLCJwb3NpdGlvbiIsInRyYW5zbGF0aW9uIiwibW9kZWxUb1ZpZXdQb3NpdGlvbiIsImFkZExpbmtlZEVsZW1lbnQiLCJ0YW5kZW0iLCJjcmVhdGVUYW5kZW0iLCJuYW1lIiwiZGlzcG9zZSIsImFzc2VydCIsImNyZWF0ZUljb25Ob2RlIiwib3B0aWNTdXJmYWNlVHlwZSIsInJhZGl1c09mQ3VydmF0dXJlIiwibWlycm9yU2hhcGVzIiwiYmFja2luZ1RoaWNrbmVzcyIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiTWlycm9yTm9kZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMS0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBNaXJyb3JOb2RlIGRpc3BsYXlzIHRoZSBtaXJyb3IuXHJcbiAqXHJcbiAqIEBhdXRob3IgTWFydGluIFZlaWxsZXR0ZVxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCBNb2RlbFZpZXdUcmFuc2Zvcm0yIGZyb20gJy4uLy4uLy4uLy4uL3BoZXRjb21tb24vanMvdmlldy9Nb2RlbFZpZXdUcmFuc2Zvcm0yLmpzJztcclxuaW1wb3J0IHsgTm9kZSwgTm9kZU9wdGlvbnMsIFBhdGggfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgZ2VvbWV0cmljT3B0aWNzIGZyb20gJy4uLy4uL2dlb21ldHJpY09wdGljcy5qcyc7XHJcbmltcG9ydCBHT0NvbG9ycyBmcm9tICcuLi8uLi9jb21tb24vR09Db2xvcnMuanMnO1xyXG5pbXBvcnQgTWlycm9yIGZyb20gJy4uL21vZGVsL01pcnJvci5qcyc7XHJcbmltcG9ydCBNaXJyb3JTaGFwZXMgZnJvbSAnLi4vbW9kZWwvTWlycm9yU2hhcGVzLmpzJztcclxuaW1wb3J0IHsgT3B0aWNTdXJmYWNlVHlwZSB9IGZyb20gJy4uLy4uL2NvbW1vbi9tb2RlbC9PcHRpY1N1cmZhY2VUeXBlLmpzJztcclxuaW1wb3J0IE1hdHJpeDMgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL01hdHJpeDMuanMnO1xyXG5pbXBvcnQgR09RdWVyeVBhcmFtZXRlcnMgZnJvbSAnLi4vLi4vY29tbW9uL0dPUXVlcnlQYXJhbWV0ZXJzLmpzJztcclxuaW1wb3J0IE9yaWdpbk5vZGUgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvT3JpZ2luTm9kZS5qcyc7XHJcbmltcG9ydCBvcHRpb25pemUsIHsgRW1wdHlTZWxmT3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgUGlja1JlcXVpcmVkIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9QaWNrUmVxdWlyZWQuanMnO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IEZJTExfUFJPUEVSVFkgPSBHT0NvbG9ycy5taXJyb3JCYWNraW5nQ29sb3JQcm9wZXJ0eTtcclxuY29uc3QgU1RST0tFX1BST1BFUlRZID0gR09Db2xvcnMubWlycm9yUmVmbGVjdGl2ZUNvYXRpbmdDb2xvclByb3BlcnR5O1xyXG5jb25zdCBMSU5FX1dJRFRIID0gMjtcclxuY29uc3QgSUNPTl9GTEFUX1JBRElVU19PRl9DVVJWQVRVUkVfTUFHTklUVURFID0gMjAwMDAwO1xyXG5jb25zdCBJQ09OX0NPTlZFWF9SQURJVVNfT0ZfQ1VSVkFUVVJFX01BR05JVFVERSA9IDIwO1xyXG5jb25zdCBJQ09OX0NPTkNBVkVfUkFESVVTX09GX0NVUlZBVFVSRV9NQUdOSVRVREUgPSAtSUNPTl9DT05WRVhfUkFESVVTX09GX0NVUlZBVFVSRV9NQUdOSVRVREU7XHJcbmNvbnN0IElDT05fRElBTUVURVIgPSAzMDtcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSBFbXB0eVNlbGZPcHRpb25zO1xyXG5cclxudHlwZSBNaXJyb3JOb2RlT3B0aW9ucyA9IFNlbGZPcHRpb25zICYgUGlja1JlcXVpcmVkPE5vZGVPcHRpb25zLCAndGFuZGVtJz47XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaXJyb3JOb2RlIGV4dGVuZHMgTm9kZSB7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggbWlycm9yOiBNaXJyb3IsIG1vZGVsVmlld1RyYW5zZm9ybTogTW9kZWxWaWV3VHJhbnNmb3JtMiwgcHJvdmlkZWRPcHRpb25zOiBNaXJyb3JOb2RlT3B0aW9ucyApIHtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPE1pcnJvck5vZGVPcHRpb25zLCBTZWxmT3B0aW9ucywgTm9kZU9wdGlvbnM+KCkoIHtcclxuXHJcbiAgICAgIC8vIE5vZGVPcHRpb25zXHJcbiAgICAgIHBoZXRpb1Zpc2libGVQcm9wZXJ0eUluc3RydW1lbnRlZDogZmFsc2VcclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIHN1cGVyKCBvcHRpb25zICk7XHJcblxyXG4gICAgLy8gdGhlIG1pcnJvcidzIGJhY2tpbmdcclxuICAgIGNvbnN0IGJhY2tpbmdOb2RlID0gbmV3IFBhdGgoIG51bGwsIHtcclxuICAgICAgZmlsbDogRklMTF9QUk9QRVJUWVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIHRoZSBtaXJyb3IncyByZWZsZWN0aXZlIGNvYXRpbmdcclxuICAgIGNvbnN0IHJlZmxlY3RpdmVDb2F0aW5nTm9kZSA9IG5ldyBQYXRoKCBudWxsLCB7XHJcbiAgICAgIHN0cm9rZTogU1RST0tFX1BST1BFUlRZLFxyXG4gICAgICBsaW5lV2lkdGg6IExJTkVfV0lEVEhcclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCBjaGlsZHJlbjogTm9kZVtdID0gWyBiYWNraW5nTm9kZSwgcmVmbGVjdGl2ZUNvYXRpbmdOb2RlIF07XHJcblxyXG4gICAgLy8gUmVkIGRvdCBhdCB0aGUgb3JpZ2luXHJcbiAgICBpZiAoIEdPUXVlcnlQYXJhbWV0ZXJzLmRlYnVnT3JpZ2lucyApIHtcclxuICAgICAgY2hpbGRyZW4ucHVzaCggbmV3IE9yaWdpbk5vZGUoKSApO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjtcclxuXHJcbiAgICAvLyBTaGFwZXMgYXJlIGRlc2NyaWJlZCBpbiBtb2RlbCBjb29yZGluYXRlcy4gU2NhbGUgdGhlbSB0byB2aWV3IGNvb3JkaW5hdGVzLlxyXG4gICAgLy8gVHJhbnNsYXRpb24gaXMgaGFuZGxlZCBieSBtaXJyb3IucG9zaXRpb25Qcm9wZXJ0eSBsaXN0ZW5lci5cclxuICAgIGNvbnN0IHNjYWxlVmVjdG9yID0gbW9kZWxWaWV3VHJhbnNmb3JtLmdldE1hdHJpeCgpLmdldFNjYWxlVmVjdG9yKCk7XHJcbiAgICBjb25zdCBzY2FsaW5nTWF0cml4ID0gTWF0cml4My5zY2FsaW5nKCBzY2FsZVZlY3Rvci54LCBzY2FsZVZlY3Rvci55ICk7XHJcbiAgICBtaXJyb3Iuc2hhcGVzUHJvcGVydHkubGluayggc2hhcGVzID0+IHtcclxuICAgICAgYmFja2luZ05vZGUuc2hhcGUgPSBzaGFwZXMuYmFja2luZ1NoYXBlLnRyYW5zZm9ybWVkKCBzY2FsaW5nTWF0cml4ICk7XHJcbiAgICAgIHJlZmxlY3RpdmVDb2F0aW5nTm9kZS5zaGFwZSA9IHNoYXBlcy5yZWZsZWN0aXZlQ29hdGluZ1NoYXBlLnRyYW5zZm9ybWVkKCBzY2FsaW5nTWF0cml4ICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgbWlycm9yLnBvc2l0aW9uUHJvcGVydHkubGluayggcG9zaXRpb24gPT4ge1xyXG4gICAgICB0aGlzLnRyYW5zbGF0aW9uID0gbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3UG9zaXRpb24oIHBvc2l0aW9uICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5hZGRMaW5rZWRFbGVtZW50KCBtaXJyb3IsIHtcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oIG1pcnJvci50YW5kZW0ubmFtZSApXHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb3ZlcnJpZGUgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIGZhbHNlLCAnZGlzcG9zZSBpcyBub3Qgc3VwcG9ydGVkLCBleGlzdHMgZm9yIHRoZSBsaWZldGltZSBvZiB0aGUgc2ltJyApO1xyXG4gICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyBhbiBpY29uIGZvciBhIG1pcnJvci5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGNyZWF0ZUljb25Ob2RlKCBvcHRpY1N1cmZhY2VUeXBlOiBPcHRpY1N1cmZhY2VUeXBlICk6IE5vZGUge1xyXG5cclxuICAgIGNvbnN0IHJhZGl1c09mQ3VydmF0dXJlID0gKCBvcHRpY1N1cmZhY2VUeXBlID09PSAnZmxhdCcgKSA/IElDT05fRkxBVF9SQURJVVNfT0ZfQ1VSVkFUVVJFX01BR05JVFVERSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICggb3B0aWNTdXJmYWNlVHlwZSA9PT0gJ2NvbnZleCcgKSA/IElDT05fQ09OVkVYX1JBRElVU19PRl9DVVJWQVRVUkVfTUFHTklUVURFIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSUNPTl9DT05DQVZFX1JBRElVU19PRl9DVVJWQVRVUkVfTUFHTklUVURFO1xyXG5cclxuICAgIGNvbnN0IG1pcnJvclNoYXBlcyA9IG5ldyBNaXJyb3JTaGFwZXMoIHJhZGl1c09mQ3VydmF0dXJlLCBJQ09OX0RJQU1FVEVSLCB7XHJcbiAgICAgIGJhY2tpbmdUaGlja25lc3M6IDQgLy8gY21cclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCBiYWNraW5nTm9kZSA9IG5ldyBQYXRoKCBtaXJyb3JTaGFwZXMuYmFja2luZ1NoYXBlLCB7XHJcbiAgICAgIGZpbGw6IEdPQ29sb3JzLm1pcnJvckJhY2tpbmdDb2xvclByb3BlcnR5XHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgcmVmbGVjdGl2ZUNvYXRpbmdOb2RlID0gbmV3IFBhdGgoIG1pcnJvclNoYXBlcy5yZWZsZWN0aXZlQ29hdGluZ1NoYXBlLCB7XHJcbiAgICAgIHN0cm9rZTogR09Db2xvcnMubWlycm9yUmVmbGVjdGl2ZUNvYXRpbmdDb2xvclByb3BlcnR5XHJcbiAgICB9ICk7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBOb2RlKCB7XHJcbiAgICAgIGNoaWxkcmVuOiBbIGJhY2tpbmdOb2RlLCByZWZsZWN0aXZlQ29hdGluZ05vZGUgXVxyXG4gICAgfSApO1xyXG4gIH1cclxufVxyXG5cclxuZ2VvbWV0cmljT3B0aWNzLnJlZ2lzdGVyKCAnTWlycm9yTm9kZScsIE1pcnJvck5vZGUgKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQSxTQUFTQSxJQUFJLEVBQWVDLElBQUksUUFBUSxtQ0FBbUM7QUFDM0UsT0FBT0MsZUFBZSxNQUFNLDBCQUEwQjtBQUN0RCxPQUFPQyxRQUFRLE1BQU0sMEJBQTBCO0FBRS9DLE9BQU9DLFlBQVksTUFBTSwwQkFBMEI7QUFFbkQsT0FBT0MsT0FBTyxNQUFNLCtCQUErQjtBQUNuRCxPQUFPQyxpQkFBaUIsTUFBTSxtQ0FBbUM7QUFDakUsT0FBT0MsVUFBVSxNQUFNLGlDQUFpQztBQUN4RCxPQUFPQyxTQUFTLE1BQTRCLHVDQUF1QztBQUduRjtBQUNBLE1BQU1DLGFBQWEsR0FBR04sUUFBUSxDQUFDTywwQkFBMEI7QUFDekQsTUFBTUMsZUFBZSxHQUFHUixRQUFRLENBQUNTLG9DQUFvQztBQUNyRSxNQUFNQyxVQUFVLEdBQUcsQ0FBQztBQUNwQixNQUFNQyx1Q0FBdUMsR0FBRyxNQUFNO0FBQ3RELE1BQU1DLHlDQUF5QyxHQUFHLEVBQUU7QUFDcEQsTUFBTUMsMENBQTBDLEdBQUcsQ0FBQ0QseUNBQXlDO0FBQzdGLE1BQU1FLGFBQWEsR0FBRyxFQUFFO0FBTXhCLGVBQWUsTUFBTUMsVUFBVSxTQUFTbEIsSUFBSSxDQUFDO0VBRXBDbUIsV0FBV0EsQ0FBRUMsTUFBYyxFQUFFQyxrQkFBdUMsRUFBRUMsZUFBa0MsRUFBRztJQUVoSCxNQUFNQyxPQUFPLEdBQUdmLFNBQVMsQ0FBOEMsQ0FBQyxDQUFF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