// Copyright 2015-2022, University of Colorado Boulder

/**
 * Control panel for a particular source (fan or beam) or a particular component (lens, mirror, or mask)
 * contains sliders to set height or spread of source or diameter, focal length (if lens or mirror)
 * and index  of refraction (if lens)
 * Piece:  Controls
 * fan_source: nbr of rays / spread in degrees / color of rays
 * beam_source: nbr of rays / width in cm / color of rays
 * converging_lens: diameter in cm /radius of curvature in cm/ index of refraction (no units)/ focal points checkbox/ focal length readout
 * diverging_lens: diameter/radius/index/focal points checkbox/focal length readout
 * converging_mirror: diameter/radius/focal points checkbox/focal length readout
 * diverging_mirror: diameter/radius/focal points checkbox/focal length readout
 * plane_mirror: diameter
 * simple_mask: diameter
 * slit_mask: diameter/ slit width
 *
 * @author Michael Dubson (PhET Interactive Simulations)
 */

import Property from '../../../../axon/js/Property.js';
import Dimension2 from '../../../../dot/js/Dimension2.js';
import Range from '../../../../dot/js/Range.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { HBox, Node, Text, VBox } from '../../../../scenery/js/imports.js';
import AquaRadioButton from '../../../../sun/js/AquaRadioButton.js';
import Checkbox from '../../../../sun/js/Checkbox.js';
import ExpandCollapseButton from '../../../../sun/js/ExpandCollapseButton.js';
import HSlider from '../../../../sun/js/HSlider.js';
import Panel from '../../../../sun/js/Panel.js';
import opticsLab from '../../opticsLab.js';
import Type from '../model/Type.js';
import OpticsLabConstants from '../OpticsLabConstants.js';

// constants
const DISPLAY_FONT = new PhetFont(12);
const TEXT_COLOR = OpticsLabConstants.TEXT_COLOR;
class ControlPanel extends Node {
  /**
   * @param {OpticsLabScreenView} mainView
   * @param {Type} type
   */
  constructor(mainView, type) {
    super();
    this.type = type;
    let fontInfo = {
      font: DISPLAY_FONT
    };
    const whiteText = new Text('white', fontInfo);
    const greenText = new Text('green', fontInfo);
    const redText = new Text('red', fontInfo);
    const yellowText = new Text('yellow', fontInfo);
    fontInfo = {
      font: DISPLAY_FONT,
      fill: TEXT_COLOR
    };
    const nbrOfRaysText = new Text('number of rays', fontInfo);
    const focalPointsText = new Text('focal points', fontInfo);
    const widthText = new Text('width', fontInfo);
    const spreadText = new Text('spread', fontInfo);
    const diameterText = new Text('diameter', fontInfo);
    const radiusText = new Text('radius of curvature', fontInfo);
    const focalLengthText = new Text('f : ', fontInfo);
    this.focalLengthReadoutText = new Text('filler', fontInfo);
    const indexText = new Text('refractive index', fontInfo);

    // All controls are placed on display node, with visibility set by expand/collapse button
    const panelOptions = {
      fill: 'white',
      stroke: 'black',
      lineWidth: 1,
      // width of the background border
      xMargin: 15,
      yMargin: 5,
      cornerRadius: 5,
      // radius of the rounded corners on the background
      resize: false,
      // dynamically resize when content bounds change
      backgroundPickable: false,
      align: 'left',
      // {string} horizontal of content in the pane, left|center|right
      minWidth: 0 // minimum width of the panel
    };

    const sliderOptions = {
      trackSize: new Dimension2(120, 5),
      thumbSize: new Dimension2(12, 25),
      thumbTouchAreaXDilation: 6,
      thumbTouchAreaYDilation: 6
    };
    const vBoxMaker = childrenArray => {
      return new VBox({
        children: childrenArray,
        align: 'center',
        resize: false
      });
    };
    const vBoxMaker2 = childrenArray => {
      return new VBox({
        children: childrenArray,
        align: 'left',
        resize: false
      });
    };
    const spacing = 20;
    const hBoxMaker = childrenArray => {
      return new HBox({
        children: childrenArray,
        spacing: spacing,
        resize: false
      });
    };

    //Properties for Sliders, Checkboxes, and Radio Buttons
    this.expandedProperty = new Property(true);
    this.nbrOfRaysProperty = new Property(10);
    this.spreadProperty = new Property(20);
    this.widthProperty = new Property(50);
    this.colorProperty = new Property('white');
    this.diameterProperty = new Property(50);
    this.radiusOfCurvatureProperty = new Property(150);
    this.indexOfRefractionProperty = new Property(2);
    this.showFocalPointsProperty = new Property(false);
    const fillerBox = new Text(' ', {
      font: DISPLAY_FONT
    });

    //Create Sliders with Text labels
    const nbrOfRaysSlider = new HSlider(this.nbrOfRaysProperty, new Range(1, OpticsLabConstants.MAXIMUM_LIGHT_RAYS), sliderOptions);
    const nbrOfRaysVBox = vBoxMaker([nbrOfRaysSlider, nbrOfRaysText]);
    const spreadSlider = new HSlider(this.spreadProperty, new Range(2, 180), sliderOptions);
    const spreadVBox = vBoxMaker([spreadSlider, spreadText]);
    const widthSlider = new HSlider(this.widthProperty, new Range(50, 250), sliderOptions);
    const widthVBox = vBoxMaker([widthSlider, widthText]);
    const radioButtonOptions = {
      radius: 8,
      fontSize: 12,
      deselectedColor: 'white'
    };
    const whiteColorRadioButton = new AquaRadioButton(this.colorProperty, 'white', whiteText, radioButtonOptions);
    const greenColorRadioButton = new AquaRadioButton(this.colorProperty, 'green', greenText, radioButtonOptions);
    const redColorRadioButton = new AquaRadioButton(this.colorProperty, 'red', redText, radioButtonOptions);
    const yellowColorRadioButton = new AquaRadioButton(this.colorProperty, 'yellow', yellowText, radioButtonOptions);
    const colorVBox1 = vBoxMaker2([whiteColorRadioButton, greenColorRadioButton]);
    const colorVBox2 = vBoxMaker2([redColorRadioButton, yellowColorRadioButton]);
    const diameterSlider = new HSlider(this.diameterProperty, new Range(50, 250), sliderOptions);
    const diameterVBox = vBoxMaker([diameterSlider, diameterText]);
    const radiusSlider = new HSlider(this.radiusOfCurvatureProperty, new Range(100, 800), sliderOptions);
    const radiusVBox = vBoxMaker([radiusSlider, new Node({
      children: [radiusText]
    })]);

    //TODO Range here may be incorrect, see https://github.com/phetsims/optics-lab/issues/22
    const radiusSlider2 = new HSlider(this.radiusOfCurvatureProperty, new Range(-800, -100), sliderOptions);
    const radiusVBox2 = vBoxMaker([radiusSlider2, new Node({
      children: [radiusText]
    })]);
    const indexSlider = new HSlider(this.indexOfRefractionProperty, new Range(1.4, 3), sliderOptions);
    const indexVBox = vBoxMaker([indexSlider, indexText]);
    const checkboxOptions = {
      checkboxColorBackground: 'white'
    };
    const focalPtCheckbox = new Checkbox(this.showFocalPointsProperty, focalPointsText, checkboxOptions);
    const focalLengthHBox = hBoxMaker([focalLengthText, this.focalLengthReadoutText]);
    let panelContent = new Node();
    switch (type) {
      case Type.FAN_SOURCE:
        panelContent = hBoxMaker([fillerBox, nbrOfRaysVBox, spreadVBox, colorVBox1, colorVBox2]);
        break;
      case Type.BEAM_SOURCE:
        panelContent = hBoxMaker([fillerBox, nbrOfRaysVBox, widthVBox, colorVBox1, colorVBox2]);
        break;
      case Type.CONVERGING_LENS:
        panelContent = hBoxMaker([fillerBox, diameterVBox, radiusVBox, indexVBox, focalPtCheckbox, focalLengthHBox]);
        break;
      case Type.DIVERGING_LENS:
        panelContent = hBoxMaker([fillerBox, diameterVBox, radiusVBox2, indexVBox, focalPtCheckbox, focalLengthHBox]);
        break;
      case Type.CONVERGING_MIRROR:
        panelContent = hBoxMaker([fillerBox, diameterVBox, radiusVBox, focalPtCheckbox, focalLengthHBox]);
        break;
      case Type.PLANE_MIRROR:
        panelContent = hBoxMaker([fillerBox, diameterVBox]);
        break;
      case Type.DIVERGING_MIRROR:
        panelContent = hBoxMaker([fillerBox, diameterVBox, radiusVBox2, focalPtCheckbox, focalLengthHBox]);
        break;
      case Type.SIMPLE_MASK:
        panelContent = hBoxMaker([fillerBox, diameterVBox]);
        break;
      case Type.SLIT_MASK:
        panelContent = hBoxMaker([fillerBox]);
        break;
      default:
        throw new Error(`invalid type: ${type}`);
    } //end switch()
    const expandCollapseButton = new ExpandCollapseButton(this.expandedProperty, {
      sideLength: 15,
      cursor: 'pointer'
    });
    const displayPanel = new Panel(panelContent, panelOptions);
    this.children = [displayPanel, expandCollapseButton];
    expandCollapseButton.left = 5;
    expandCollapseButton.top = 5;
    mainView.selectedPieceProperty.lazyLink(piece => {
      this.visible = piece.type === type;
      this.unlinkToOldPiece();
      if (this.visible) {
        this.linkToPiece(piece);
      }
    });
    this.expandedProperty.link(tOrF => {
      displayPanel.visible = tOrF;
    });
  } //end constructor

  /**
   *
   * @param {SourceNode|ComponentNode} piece
   * @private
   */
  linkToPiece(piece) {}

  /**
   * @private
   */
  unlinkToOldPiece() {}

  /**
   * @public
   */
  resetProperties() {
    this.expandedProperty.reset();
    this.nbrOfRaysProperty.reset();
    this.spreadProperty.reset();
    this.widthProperty.reset();
    this.colorProperty.reset();
    this.diameterProperty.reset();
    this.radiusOfCurvatureProperty.reset();
    this.indexOfRefractionProperty.reset();
    this.showFocalPointsProperty.reset();
  }
}
opticsLab.register('ControlPanel', ControlPanel);
export default ControlPanel;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQcm9wZXJ0eSIsIkRpbWVuc2lvbjIiLCJSYW5nZSIsIlBoZXRGb250IiwiSEJveCIsIk5vZGUiLCJUZXh0IiwiVkJveCIsIkFxdWFSYWRpb0J1dHRvbiIsIkNoZWNrYm94IiwiRXhwYW5kQ29sbGFwc2VCdXR0b24iLCJIU2xpZGVyIiwiUGFuZWwiLCJvcHRpY3NMYWIiLCJUeXBlIiwiT3B0aWNzTGFiQ29uc3RhbnRzIiwiRElTUExBWV9GT05UIiwiVEVYVF9DT0xPUiIsIkNvbnRyb2xQYW5lbCIsImNvbnN0cnVjdG9yIiwibWFpblZpZXciLCJ0eXBlIiwiZm9udEluZm8iLCJmb250Iiwid2hpdGVUZXh0IiwiZ3JlZW5UZXh0IiwicmVkVGV4dCIsInllbGxvd1RleHQiLCJmaWxsIiwibmJyT2ZSYXlzVGV4dCIsImZvY2FsUG9pbnRzVGV4dCIsIndpZHRoVGV4dCIsInNwcmVhZFRleHQiLCJkaWFtZXRlclRleHQiLCJyYWRpdXNUZXh0IiwiZm9jYWxMZW5ndGhUZXh0IiwiZm9jYWxMZW5ndGhSZWFkb3V0VGV4dCIsImluZGV4VGV4dCIsInBhbmVsT3B0aW9ucyIsInN0cm9rZSIsImxpbmVXaWR0aCIsInhNYXJnaW4iLCJ5TWFyZ2luIiwiY29ybmVyUmFkaXVzIiwicmVzaXplIiwiYmFja2dyb3VuZFBpY2thYmxlIiwiYWxpZ24iLCJtaW5XaWR0aCIsInNsaWRlck9wdGlvbnMiLCJ0cmFja1NpemUiLCJ0aHVtYlNpemUiLCJ0aHVtYlRvdWNoQXJlYVhEaWxhdGlvbiIsInRodW1iVG91Y2hBcmVhWURpbGF0aW9uIiwidkJveE1ha2VyIiwiY2hpbGRyZW5BcnJheSIsImNoaWxkcmVuIiwidkJveE1ha2VyMiIsInNwYWNpbmciLCJoQm94TWFrZXIiLCJleHBhbmRlZFByb3BlcnR5IiwibmJyT2ZSYXlzUHJvcGVydHkiLCJzcHJlYWRQcm9wZXJ0eSIsIndpZHRoUHJvcGVydHkiLCJjb2xvclByb3BlcnR5IiwiZGlhbWV0ZXJQcm9wZXJ0eSIsInJhZGl1c09mQ3VydmF0dXJlUHJvcGVydHkiLCJpbmRleE9mUmVmcmFjdGlvblByb3BlcnR5Iiwic2hvd0ZvY2FsUG9pbnRzUHJvcGVydHkiLCJmaWxsZXJCb3giLCJuYnJPZlJheXNTbGlkZXIiLCJNQVhJTVVNX0xJR0hUX1JBWVMiLCJuYnJPZlJheXNWQm94Iiwic3ByZWFkU2xpZGVyIiwic3ByZWFkVkJveCIsIndpZHRoU2xpZGVyIiwid2lkdGhWQm94IiwicmFkaW9CdXR0b25PcHRpb25zIiwicmFkaXVzIiwiZm9udFNpemUiLCJkZXNlbGVjdGVkQ29sb3IiLCJ3aGl0ZUNvbG9yUmFkaW9CdXR0b24iLCJncmVlbkNvbG9yUmFkaW9CdXR0b24iLCJyZWRDb2xvclJhZGlvQnV0dG9uIiwieWVsbG93Q29sb3JSYWRpb0J1dHRvbiIsImNvbG9yVkJveDEiLCJjb2xvclZCb3gyIiwiZGlhbWV0ZXJTbGlkZXIiLCJkaWFtZXRlclZCb3giLCJyYWRpdXNTbGlkZXIiLCJyYWRpdXNWQm94IiwicmFkaXVzU2xpZGVyMiIsInJhZGl1c1ZCb3gyIiwiaW5kZXhTbGlkZXIiLCJpbmRleFZCb3giLCJjaGVja2JveE9wdGlvbnMiLCJjaGVja2JveENvbG9yQmFja2dyb3VuZCIsImZvY2FsUHRDaGVja2JveCIsImZvY2FsTGVuZ3RoSEJveCIsInBhbmVsQ29udGVudCIsIkZBTl9TT1VSQ0UiLCJCRUFNX1NPVVJDRSIsIkNPTlZFUkdJTkdfTEVOUyIsIkRJVkVSR0lOR19MRU5TIiwiQ09OVkVSR0lOR19NSVJST1IiLCJQTEFORV9NSVJST1IiLCJESVZFUkdJTkdfTUlSUk9SIiwiU0lNUExFX01BU0siLCJTTElUX01BU0siLCJFcnJvciIsImV4cGFuZENvbGxhcHNlQnV0dG9uIiwic2lkZUxlbmd0aCIsImN1cnNvciIsImRpc3BsYXlQYW5lbCIsImxlZnQiLCJ0b3AiLCJzZWxlY3RlZFBpZWNlUHJvcGVydHkiLCJsYXp5TGluayIsInBpZWNlIiwidmlzaWJsZSIsInVubGlua1RvT2xkUGllY2UiLCJsaW5rVG9QaWVjZSIsImxpbmsiLCJ0T3JGIiwicmVzZXRQcm9wZXJ0aWVzIiwicmVzZXQiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkNvbnRyb2xQYW5lbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNS0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBDb250cm9sIHBhbmVsIGZvciBhIHBhcnRpY3VsYXIgc291cmNlIChmYW4gb3IgYmVhbSkgb3IgYSBwYXJ0aWN1bGFyIGNvbXBvbmVudCAobGVucywgbWlycm9yLCBvciBtYXNrKVxyXG4gKiBjb250YWlucyBzbGlkZXJzIHRvIHNldCBoZWlnaHQgb3Igc3ByZWFkIG9mIHNvdXJjZSBvciBkaWFtZXRlciwgZm9jYWwgbGVuZ3RoIChpZiBsZW5zIG9yIG1pcnJvcilcclxuICogYW5kIGluZGV4ICBvZiByZWZyYWN0aW9uIChpZiBsZW5zKVxyXG4gKiBQaWVjZTogIENvbnRyb2xzXHJcbiAqIGZhbl9zb3VyY2U6IG5iciBvZiByYXlzIC8gc3ByZWFkIGluIGRlZ3JlZXMgLyBjb2xvciBvZiByYXlzXHJcbiAqIGJlYW1fc291cmNlOiBuYnIgb2YgcmF5cyAvIHdpZHRoIGluIGNtIC8gY29sb3Igb2YgcmF5c1xyXG4gKiBjb252ZXJnaW5nX2xlbnM6IGRpYW1ldGVyIGluIGNtIC9yYWRpdXMgb2YgY3VydmF0dXJlIGluIGNtLyBpbmRleCBvZiByZWZyYWN0aW9uIChubyB1bml0cykvIGZvY2FsIHBvaW50cyBjaGVja2JveC8gZm9jYWwgbGVuZ3RoIHJlYWRvdXRcclxuICogZGl2ZXJnaW5nX2xlbnM6IGRpYW1ldGVyL3JhZGl1cy9pbmRleC9mb2NhbCBwb2ludHMgY2hlY2tib3gvZm9jYWwgbGVuZ3RoIHJlYWRvdXRcclxuICogY29udmVyZ2luZ19taXJyb3I6IGRpYW1ldGVyL3JhZGl1cy9mb2NhbCBwb2ludHMgY2hlY2tib3gvZm9jYWwgbGVuZ3RoIHJlYWRvdXRcclxuICogZGl2ZXJnaW5nX21pcnJvcjogZGlhbWV0ZXIvcmFkaXVzL2ZvY2FsIHBvaW50cyBjaGVja2JveC9mb2NhbCBsZW5ndGggcmVhZG91dFxyXG4gKiBwbGFuZV9taXJyb3I6IGRpYW1ldGVyXHJcbiAqIHNpbXBsZV9tYXNrOiBkaWFtZXRlclxyXG4gKiBzbGl0X21hc2s6IGRpYW1ldGVyLyBzbGl0IHdpZHRoXHJcbiAqXHJcbiAqIEBhdXRob3IgTWljaGFlbCBEdWJzb24gKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgRGltZW5zaW9uMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvRGltZW5zaW9uMi5qcyc7XHJcbmltcG9ydCBSYW5nZSBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvUmFuZ2UuanMnO1xyXG5pbXBvcnQgUGhldEZvbnQgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1BoZXRGb250LmpzJztcclxuaW1wb3J0IHsgSEJveCwgTm9kZSwgVGV4dCwgVkJveCB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBBcXVhUmFkaW9CdXR0b24gZnJvbSAnLi4vLi4vLi4vLi4vc3VuL2pzL0FxdWFSYWRpb0J1dHRvbi5qcyc7XHJcbmltcG9ydCBDaGVja2JveCBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvQ2hlY2tib3guanMnO1xyXG5pbXBvcnQgRXhwYW5kQ29sbGFwc2VCdXR0b24gZnJvbSAnLi4vLi4vLi4vLi4vc3VuL2pzL0V4cGFuZENvbGxhcHNlQnV0dG9uLmpzJztcclxuaW1wb3J0IEhTbGlkZXIgZnJvbSAnLi4vLi4vLi4vLi4vc3VuL2pzL0hTbGlkZXIuanMnO1xyXG5pbXBvcnQgUGFuZWwgZnJvbSAnLi4vLi4vLi4vLi4vc3VuL2pzL1BhbmVsLmpzJztcclxuaW1wb3J0IG9wdGljc0xhYiBmcm9tICcuLi8uLi9vcHRpY3NMYWIuanMnO1xyXG5pbXBvcnQgVHlwZSBmcm9tICcuLi9tb2RlbC9UeXBlLmpzJztcclxuaW1wb3J0IE9wdGljc0xhYkNvbnN0YW50cyBmcm9tICcuLi9PcHRpY3NMYWJDb25zdGFudHMuanMnO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IERJU1BMQVlfRk9OVCA9IG5ldyBQaGV0Rm9udCggMTIgKTtcclxuY29uc3QgVEVYVF9DT0xPUiA9IE9wdGljc0xhYkNvbnN0YW50cy5URVhUX0NPTE9SO1xyXG5cclxuY2xhc3MgQ29udHJvbFBhbmVsIGV4dGVuZHMgTm9kZSB7XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtPcHRpY3NMYWJTY3JlZW5WaWV3fSBtYWluVmlld1xyXG4gICAqIEBwYXJhbSB7VHlwZX0gdHlwZVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBtYWluVmlldywgdHlwZSApIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG5cclxuICAgIGxldCBmb250SW5mbyA9IHsgZm9udDogRElTUExBWV9GT05UIH07XHJcbiAgICBjb25zdCB3aGl0ZVRleHQgPSBuZXcgVGV4dCggJ3doaXRlJywgZm9udEluZm8gKTtcclxuICAgIGNvbnN0IGdyZWVuVGV4dCA9IG5ldyBUZXh0KCAnZ3JlZW4nLCBmb250SW5mbyApO1xyXG4gICAgY29uc3QgcmVkVGV4dCA9IG5ldyBUZXh0KCAncmVkJywgZm9udEluZm8gKTtcclxuICAgIGNvbnN0IHllbGxvd1RleHQgPSBuZXcgVGV4dCggJ3llbGxvdycsIGZvbnRJbmZvICk7XHJcblxyXG4gICAgZm9udEluZm8gPSB7IGZvbnQ6IERJU1BMQVlfRk9OVCwgZmlsbDogVEVYVF9DT0xPUiB9O1xyXG4gICAgY29uc3QgbmJyT2ZSYXlzVGV4dCA9IG5ldyBUZXh0KCAnbnVtYmVyIG9mIHJheXMnLCBmb250SW5mbyApO1xyXG4gICAgY29uc3QgZm9jYWxQb2ludHNUZXh0ID0gbmV3IFRleHQoICdmb2NhbCBwb2ludHMnLCBmb250SW5mbyApO1xyXG4gICAgY29uc3Qgd2lkdGhUZXh0ID0gbmV3IFRleHQoICd3aWR0aCcsIGZvbnRJbmZvICk7XHJcbiAgICBjb25zdCBzcHJlYWRUZXh0ID0gbmV3IFRleHQoICdzcHJlYWQnLCBmb250SW5mbyApO1xyXG4gICAgY29uc3QgZGlhbWV0ZXJUZXh0ID0gbmV3IFRleHQoICdkaWFtZXRlcicsIGZvbnRJbmZvICk7XHJcbiAgICBjb25zdCByYWRpdXNUZXh0ID0gbmV3IFRleHQoICdyYWRpdXMgb2YgY3VydmF0dXJlJywgZm9udEluZm8gKTtcclxuICAgIGNvbnN0IGZvY2FsTGVuZ3RoVGV4dCA9IG5ldyBUZXh0KCAnZiA6ICcsIGZvbnRJbmZvICk7XHJcbiAgICB0aGlzLmZvY2FsTGVuZ3RoUmVhZG91dFRleHQgPSBuZXcgVGV4dCggJ2ZpbGxlcicsIGZvbnRJbmZvICk7XHJcbiAgICBjb25zdCBpbmRleFRleHQgPSBuZXcgVGV4dCggJ3JlZnJhY3RpdmUgaW5kZXgnLCBmb250SW5mbyApO1xyXG5cclxuXHJcbiAgICAvLyBBbGwgY29udHJvbHMgYXJlIHBsYWNlZCBvbiBkaXNwbGF5IG5vZGUsIHdpdGggdmlzaWJpbGl0eSBzZXQgYnkgZXhwYW5kL2NvbGxhcHNlIGJ1dHRvblxyXG4gICAgY29uc3QgcGFuZWxPcHRpb25zID0ge1xyXG4gICAgICBmaWxsOiAnd2hpdGUnLFxyXG4gICAgICBzdHJva2U6ICdibGFjaycsXHJcbiAgICAgIGxpbmVXaWR0aDogMSwgLy8gd2lkdGggb2YgdGhlIGJhY2tncm91bmQgYm9yZGVyXHJcbiAgICAgIHhNYXJnaW46IDE1LFxyXG4gICAgICB5TWFyZ2luOiA1LFxyXG4gICAgICBjb3JuZXJSYWRpdXM6IDUsIC8vIHJhZGl1cyBvZiB0aGUgcm91bmRlZCBjb3JuZXJzIG9uIHRoZSBiYWNrZ3JvdW5kXHJcbiAgICAgIHJlc2l6ZTogZmFsc2UsIC8vIGR5bmFtaWNhbGx5IHJlc2l6ZSB3aGVuIGNvbnRlbnQgYm91bmRzIGNoYW5nZVxyXG4gICAgICBiYWNrZ3JvdW5kUGlja2FibGU6IGZhbHNlLFxyXG4gICAgICBhbGlnbjogJ2xlZnQnLCAvLyB7c3RyaW5nfSBob3Jpem9udGFsIG9mIGNvbnRlbnQgaW4gdGhlIHBhbmUsIGxlZnR8Y2VudGVyfHJpZ2h0XHJcbiAgICAgIG1pbldpZHRoOiAwIC8vIG1pbmltdW0gd2lkdGggb2YgdGhlIHBhbmVsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHNsaWRlck9wdGlvbnMgPSB7XHJcbiAgICAgIHRyYWNrU2l6ZTogbmV3IERpbWVuc2lvbjIoIDEyMCwgNSApLFxyXG4gICAgICB0aHVtYlNpemU6IG5ldyBEaW1lbnNpb24yKCAxMiwgMjUgKSxcclxuICAgICAgdGh1bWJUb3VjaEFyZWFYRGlsYXRpb246IDYsXHJcbiAgICAgIHRodW1iVG91Y2hBcmVhWURpbGF0aW9uOiA2XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHZCb3hNYWtlciA9IGNoaWxkcmVuQXJyYXkgPT4ge1xyXG4gICAgICByZXR1cm4gbmV3IFZCb3goIHtcclxuICAgICAgICBjaGlsZHJlbjogY2hpbGRyZW5BcnJheSxcclxuICAgICAgICBhbGlnbjogJ2NlbnRlcicsXHJcbiAgICAgICAgcmVzaXplOiBmYWxzZVxyXG4gICAgICB9ICk7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgdkJveE1ha2VyMiA9IGNoaWxkcmVuQXJyYXkgPT4ge1xyXG4gICAgICByZXR1cm4gbmV3IFZCb3goIHtcclxuICAgICAgICBjaGlsZHJlbjogY2hpbGRyZW5BcnJheSxcclxuICAgICAgICBhbGlnbjogJ2xlZnQnLFxyXG4gICAgICAgIHJlc2l6ZTogZmFsc2VcclxuICAgICAgfSApO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHNwYWNpbmcgPSAyMDtcclxuICAgIGNvbnN0IGhCb3hNYWtlciA9IGNoaWxkcmVuQXJyYXkgPT4ge1xyXG4gICAgICByZXR1cm4gbmV3IEhCb3goIHtcclxuICAgICAgICBjaGlsZHJlbjogY2hpbGRyZW5BcnJheSxcclxuICAgICAgICBzcGFjaW5nOiBzcGFjaW5nLFxyXG4gICAgICAgIHJlc2l6ZTogZmFsc2VcclxuICAgICAgfSApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvL1Byb3BlcnRpZXMgZm9yIFNsaWRlcnMsIENoZWNrYm94ZXMsIGFuZCBSYWRpbyBCdXR0b25zXHJcbiAgICB0aGlzLmV4cGFuZGVkUHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIHRydWUgKTtcclxuICAgIHRoaXMubmJyT2ZSYXlzUHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIDEwICk7XHJcbiAgICB0aGlzLnNwcmVhZFByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCAyMCApO1xyXG4gICAgdGhpcy53aWR0aFByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCA1MCApO1xyXG4gICAgdGhpcy5jb2xvclByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCAnd2hpdGUnICk7XHJcbiAgICB0aGlzLmRpYW1ldGVyUHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIDUwICk7XHJcbiAgICB0aGlzLnJhZGl1c09mQ3VydmF0dXJlUHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIDE1MCApO1xyXG4gICAgdGhpcy5pbmRleE9mUmVmcmFjdGlvblByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCAyICk7XHJcbiAgICB0aGlzLnNob3dGb2NhbFBvaW50c1Byb3BlcnR5ID0gbmV3IFByb3BlcnR5KCBmYWxzZSApO1xyXG5cclxuICAgIGNvbnN0IGZpbGxlckJveCA9IG5ldyBUZXh0KCAnICcsIHsgZm9udDogRElTUExBWV9GT05UIH0gKTtcclxuXHJcbiAgICAvL0NyZWF0ZSBTbGlkZXJzIHdpdGggVGV4dCBsYWJlbHNcclxuICAgIGNvbnN0IG5ick9mUmF5c1NsaWRlciA9IG5ldyBIU2xpZGVyKCB0aGlzLm5ick9mUmF5c1Byb3BlcnR5LCBuZXcgUmFuZ2UoIDEsIE9wdGljc0xhYkNvbnN0YW50cy5NQVhJTVVNX0xJR0hUX1JBWVMgKSwgc2xpZGVyT3B0aW9ucyApO1xyXG4gICAgY29uc3QgbmJyT2ZSYXlzVkJveCA9IHZCb3hNYWtlciggWyBuYnJPZlJheXNTbGlkZXIsIG5ick9mUmF5c1RleHQgXSApO1xyXG5cclxuICAgIGNvbnN0IHNwcmVhZFNsaWRlciA9IG5ldyBIU2xpZGVyKCB0aGlzLnNwcmVhZFByb3BlcnR5LCBuZXcgUmFuZ2UoIDIsIDE4MCApLCBzbGlkZXJPcHRpb25zICk7XHJcbiAgICBjb25zdCBzcHJlYWRWQm94ID0gdkJveE1ha2VyKCBbIHNwcmVhZFNsaWRlciwgc3ByZWFkVGV4dCBdICk7XHJcblxyXG4gICAgY29uc3Qgd2lkdGhTbGlkZXIgPSBuZXcgSFNsaWRlciggdGhpcy53aWR0aFByb3BlcnR5LCBuZXcgUmFuZ2UoIDUwLCAyNTAgKSwgc2xpZGVyT3B0aW9ucyApO1xyXG4gICAgY29uc3Qgd2lkdGhWQm94ID0gdkJveE1ha2VyKCBbIHdpZHRoU2xpZGVyLCB3aWR0aFRleHQgXSApO1xyXG5cclxuICAgIGNvbnN0IHJhZGlvQnV0dG9uT3B0aW9ucyA9IHsgcmFkaXVzOiA4LCBmb250U2l6ZTogMTIsIGRlc2VsZWN0ZWRDb2xvcjogJ3doaXRlJyB9O1xyXG4gICAgY29uc3Qgd2hpdGVDb2xvclJhZGlvQnV0dG9uID0gbmV3IEFxdWFSYWRpb0J1dHRvbiggdGhpcy5jb2xvclByb3BlcnR5LCAnd2hpdGUnLCB3aGl0ZVRleHQsIHJhZGlvQnV0dG9uT3B0aW9ucyApO1xyXG4gICAgY29uc3QgZ3JlZW5Db2xvclJhZGlvQnV0dG9uID0gbmV3IEFxdWFSYWRpb0J1dHRvbiggdGhpcy5jb2xvclByb3BlcnR5LCAnZ3JlZW4nLCBncmVlblRleHQsIHJhZGlvQnV0dG9uT3B0aW9ucyApO1xyXG4gICAgY29uc3QgcmVkQ29sb3JSYWRpb0J1dHRvbiA9IG5ldyBBcXVhUmFkaW9CdXR0b24oIHRoaXMuY29sb3JQcm9wZXJ0eSwgJ3JlZCcsIHJlZFRleHQsIHJhZGlvQnV0dG9uT3B0aW9ucyApO1xyXG4gICAgY29uc3QgeWVsbG93Q29sb3JSYWRpb0J1dHRvbiA9IG5ldyBBcXVhUmFkaW9CdXR0b24oIHRoaXMuY29sb3JQcm9wZXJ0eSwgJ3llbGxvdycsIHllbGxvd1RleHQsIHJhZGlvQnV0dG9uT3B0aW9ucyApO1xyXG5cclxuICAgIGNvbnN0IGNvbG9yVkJveDEgPSB2Qm94TWFrZXIyKCBbIHdoaXRlQ29sb3JSYWRpb0J1dHRvbiwgZ3JlZW5Db2xvclJhZGlvQnV0dG9uIF0gKTtcclxuICAgIGNvbnN0IGNvbG9yVkJveDIgPSB2Qm94TWFrZXIyKCBbIHJlZENvbG9yUmFkaW9CdXR0b24sIHllbGxvd0NvbG9yUmFkaW9CdXR0b24gXSApO1xyXG5cclxuICAgIGNvbnN0IGRpYW1ldGVyU2xpZGVyID0gbmV3IEhTbGlkZXIoIHRoaXMuZGlhbWV0ZXJQcm9wZXJ0eSwgbmV3IFJhbmdlKCA1MCwgMjUwICksIHNsaWRlck9wdGlvbnMgKTtcclxuICAgIGNvbnN0IGRpYW1ldGVyVkJveCA9IHZCb3hNYWtlciggWyBkaWFtZXRlclNsaWRlciwgZGlhbWV0ZXJUZXh0IF0gKTtcclxuXHJcbiAgICBjb25zdCByYWRpdXNTbGlkZXIgPSBuZXcgSFNsaWRlciggdGhpcy5yYWRpdXNPZkN1cnZhdHVyZVByb3BlcnR5LCBuZXcgUmFuZ2UoIDEwMCwgODAwICksIHNsaWRlck9wdGlvbnMgKTtcclxuICAgIGNvbnN0IHJhZGl1c1ZCb3ggPSB2Qm94TWFrZXIoIFsgcmFkaXVzU2xpZGVyLCBuZXcgTm9kZSggeyBjaGlsZHJlbjogWyByYWRpdXNUZXh0IF0gfSApIF0gKTtcclxuXHJcbiAgICAvL1RPRE8gUmFuZ2UgaGVyZSBtYXkgYmUgaW5jb3JyZWN0LCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL29wdGljcy1sYWIvaXNzdWVzLzIyXHJcbiAgICBjb25zdCByYWRpdXNTbGlkZXIyID0gbmV3IEhTbGlkZXIoIHRoaXMucmFkaXVzT2ZDdXJ2YXR1cmVQcm9wZXJ0eSwgbmV3IFJhbmdlKCAtODAwLCAtMTAwICksIHNsaWRlck9wdGlvbnMgKTtcclxuICAgIGNvbnN0IHJhZGl1c1ZCb3gyID0gdkJveE1ha2VyKCBbIHJhZGl1c1NsaWRlcjIsIG5ldyBOb2RlKCB7IGNoaWxkcmVuOiBbIHJhZGl1c1RleHQgXSB9ICkgXSApO1xyXG5cclxuICAgIGNvbnN0IGluZGV4U2xpZGVyID0gbmV3IEhTbGlkZXIoIHRoaXMuaW5kZXhPZlJlZnJhY3Rpb25Qcm9wZXJ0eSwgbmV3IFJhbmdlKCAxLjQsIDMgKSwgc2xpZGVyT3B0aW9ucyApO1xyXG4gICAgY29uc3QgaW5kZXhWQm94ID0gdkJveE1ha2VyKCBbIGluZGV4U2xpZGVyLCBpbmRleFRleHQgXSApO1xyXG5cclxuICAgIGNvbnN0IGNoZWNrYm94T3B0aW9ucyA9IHsgY2hlY2tib3hDb2xvckJhY2tncm91bmQ6ICd3aGl0ZScgfTtcclxuXHJcbiAgICBjb25zdCBmb2NhbFB0Q2hlY2tib3ggPSBuZXcgQ2hlY2tib3goIHRoaXMuc2hvd0ZvY2FsUG9pbnRzUHJvcGVydHksIGZvY2FsUG9pbnRzVGV4dCwgY2hlY2tib3hPcHRpb25zICk7XHJcblxyXG4gICAgY29uc3QgZm9jYWxMZW5ndGhIQm94ID0gaEJveE1ha2VyKCBbIGZvY2FsTGVuZ3RoVGV4dCwgdGhpcy5mb2NhbExlbmd0aFJlYWRvdXRUZXh0IF0gKTtcclxuICAgIGxldCBwYW5lbENvbnRlbnQgPSBuZXcgTm9kZSgpO1xyXG5cclxuICAgIHN3aXRjaCggdHlwZSApIHtcclxuICAgICAgY2FzZSBUeXBlLkZBTl9TT1VSQ0U6XHJcbiAgICAgICAgcGFuZWxDb250ZW50ID0gaEJveE1ha2VyKCBbIGZpbGxlckJveCwgbmJyT2ZSYXlzVkJveCwgc3ByZWFkVkJveCwgY29sb3JWQm94MSwgY29sb3JWQm94MiBdICk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgVHlwZS5CRUFNX1NPVVJDRTpcclxuICAgICAgICBwYW5lbENvbnRlbnQgPSBoQm94TWFrZXIoIFsgZmlsbGVyQm94LCBuYnJPZlJheXNWQm94LCB3aWR0aFZCb3gsIGNvbG9yVkJveDEsIGNvbG9yVkJveDIgXSApO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFR5cGUuQ09OVkVSR0lOR19MRU5TOlxyXG4gICAgICAgIHBhbmVsQ29udGVudCA9IGhCb3hNYWtlciggWyBmaWxsZXJCb3gsIGRpYW1ldGVyVkJveCwgcmFkaXVzVkJveCwgaW5kZXhWQm94LCBmb2NhbFB0Q2hlY2tib3gsIGZvY2FsTGVuZ3RoSEJveCBdICk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgVHlwZS5ESVZFUkdJTkdfTEVOUzpcclxuICAgICAgICBwYW5lbENvbnRlbnQgPSBoQm94TWFrZXIoIFsgZmlsbGVyQm94LCBkaWFtZXRlclZCb3gsIHJhZGl1c1ZCb3gyLCBpbmRleFZCb3gsIGZvY2FsUHRDaGVja2JveCwgZm9jYWxMZW5ndGhIQm94IF0gKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBUeXBlLkNPTlZFUkdJTkdfTUlSUk9SOlxyXG4gICAgICAgIHBhbmVsQ29udGVudCA9IGhCb3hNYWtlciggWyBmaWxsZXJCb3gsIGRpYW1ldGVyVkJveCwgcmFkaXVzVkJveCwgZm9jYWxQdENoZWNrYm94LCBmb2NhbExlbmd0aEhCb3ggXSApO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFR5cGUuUExBTkVfTUlSUk9SOlxyXG4gICAgICAgIHBhbmVsQ29udGVudCA9IGhCb3hNYWtlciggWyBmaWxsZXJCb3gsIGRpYW1ldGVyVkJveCBdICk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgVHlwZS5ESVZFUkdJTkdfTUlSUk9SOlxyXG4gICAgICAgIHBhbmVsQ29udGVudCA9IGhCb3hNYWtlciggWyBmaWxsZXJCb3gsIGRpYW1ldGVyVkJveCwgcmFkaXVzVkJveDIsIGZvY2FsUHRDaGVja2JveCwgZm9jYWxMZW5ndGhIQm94IF0gKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBUeXBlLlNJTVBMRV9NQVNLOlxyXG4gICAgICAgIHBhbmVsQ29udGVudCA9IGhCb3hNYWtlciggWyBmaWxsZXJCb3gsIGRpYW1ldGVyVkJveCBdICk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgVHlwZS5TTElUX01BU0s6XHJcbiAgICAgICAgcGFuZWxDb250ZW50ID0gaEJveE1ha2VyKCBbIGZpbGxlckJveCBdICk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCBgaW52YWxpZCB0eXBlOiAke3R5cGV9YCApO1xyXG5cclxuICAgIH0vL2VuZCBzd2l0Y2goKVxyXG4gICAgY29uc3QgZXhwYW5kQ29sbGFwc2VCdXR0b24gPSBuZXcgRXhwYW5kQ29sbGFwc2VCdXR0b24oIHRoaXMuZXhwYW5kZWRQcm9wZXJ0eSwge1xyXG4gICAgICBzaWRlTGVuZ3RoOiAxNSxcclxuICAgICAgY3Vyc29yOiAncG9pbnRlcidcclxuICAgIH0gKTtcclxuICAgIGNvbnN0IGRpc3BsYXlQYW5lbCA9IG5ldyBQYW5lbCggcGFuZWxDb250ZW50LCBwYW5lbE9wdGlvbnMgKTtcclxuICAgIHRoaXMuY2hpbGRyZW4gPSBbIGRpc3BsYXlQYW5lbCwgZXhwYW5kQ29sbGFwc2VCdXR0b24gXTtcclxuICAgIGV4cGFuZENvbGxhcHNlQnV0dG9uLmxlZnQgPSA1O1xyXG4gICAgZXhwYW5kQ29sbGFwc2VCdXR0b24udG9wID0gNTtcclxuXHJcbiAgICBtYWluVmlldy5zZWxlY3RlZFBpZWNlUHJvcGVydHkubGF6eUxpbmsoIHBpZWNlID0+IHtcclxuICAgICAgdGhpcy52aXNpYmxlID0gKCBwaWVjZS50eXBlID09PSB0eXBlICk7XHJcbiAgICAgIHRoaXMudW5saW5rVG9PbGRQaWVjZSgpO1xyXG5cclxuICAgICAgaWYgKCB0aGlzLnZpc2libGUgKSB7XHJcbiAgICAgICAgdGhpcy5saW5rVG9QaWVjZSggcGllY2UgKTtcclxuICAgICAgfVxyXG4gICAgfSApO1xyXG4gICAgdGhpcy5leHBhbmRlZFByb3BlcnR5LmxpbmsoIHRPckYgPT4ge1xyXG4gICAgICBkaXNwbGF5UGFuZWwudmlzaWJsZSA9IHRPckY7XHJcbiAgICB9ICk7XHJcblxyXG4gIH0vL2VuZCBjb25zdHJ1Y3RvclxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge1NvdXJjZU5vZGV8Q29tcG9uZW50Tm9kZX0gcGllY2VcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIGxpbmtUb1BpZWNlKCBwaWVjZSApIHtcclxuXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIHVubGlua1RvT2xkUGllY2UoKSB7XHJcblxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG4gIHJlc2V0UHJvcGVydGllcygpIHtcclxuICAgIHRoaXMuZXhwYW5kZWRQcm9wZXJ0eS5yZXNldCgpO1xyXG4gICAgdGhpcy5uYnJPZlJheXNQcm9wZXJ0eS5yZXNldCgpO1xyXG4gICAgdGhpcy5zcHJlYWRQcm9wZXJ0eS5yZXNldCgpO1xyXG4gICAgdGhpcy53aWR0aFByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICB0aGlzLmNvbG9yUHJvcGVydHkucmVzZXQoKTtcclxuICAgIHRoaXMuZGlhbWV0ZXJQcm9wZXJ0eS5yZXNldCgpO1xyXG4gICAgdGhpcy5yYWRpdXNPZkN1cnZhdHVyZVByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICB0aGlzLmluZGV4T2ZSZWZyYWN0aW9uUHJvcGVydHkucmVzZXQoKTtcclxuICAgIHRoaXMuc2hvd0ZvY2FsUG9pbnRzUHJvcGVydHkucmVzZXQoKTtcclxuICB9XHJcbn1cclxuXHJcbm9wdGljc0xhYi5yZWdpc3RlciggJ0NvbnRyb2xQYW5lbCcsIENvbnRyb2xQYW5lbCApO1xyXG5leHBvcnQgZGVmYXVsdCBDb250cm9sUGFuZWw7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFFBQVEsTUFBTSxpQ0FBaUM7QUFDdEQsT0FBT0MsVUFBVSxNQUFNLGtDQUFrQztBQUN6RCxPQUFPQyxLQUFLLE1BQU0sNkJBQTZCO0FBQy9DLE9BQU9DLFFBQVEsTUFBTSx5Q0FBeUM7QUFDOUQsU0FBU0MsSUFBSSxFQUFFQyxJQUFJLEVBQUVDLElBQUksRUFBRUMsSUFBSSxRQUFRLG1DQUFtQztBQUMxRSxPQUFPQyxlQUFlLE1BQU0sdUNBQXVDO0FBQ25FLE9BQU9DLFFBQVEsTUFBTSxnQ0FBZ0M7QUFDckQsT0FBT0Msb0JBQW9CLE1BQU0sNENBQTRDO0FBQzdFLE9BQU9DLE9BQU8sTUFBTSwrQkFBK0I7QUFDbkQsT0FBT0MsS0FBSyxNQUFNLDZCQUE2QjtBQUMvQyxPQUFPQyxTQUFTLE1BQU0sb0JBQW9CO0FBQzFDLE9BQU9DLElBQUksTUFBTSxrQkFBa0I7QUFDbkMsT0FBT0Msa0JBQWtCLE1BQU0sMEJBQTBCOztBQUV6RDtBQUNBLE1BQU1DLFlBQVksR0FBRyxJQUFJYixRQUFRLENBQUUsRUFBRyxDQUFDO0FBQ3ZDLE1BQU1jLFVBQVUsR0FBR0Ysa0JBQWtCLENBQUNFLFVBQVU7QUFFaEQsTUFBTUMsWUFBWSxTQUFTYixJQUFJLENBQUM7RUFDOUI7QUFDRjtBQUNBO0FBQ0E7RUFDRWMsV0FBV0EsQ0FBRUMsUUFBUSxFQUFFQyxJQUFJLEVBQUc7SUFDNUIsS0FBSyxDQUFDLENBQUM7SUFDUCxJQUFJLENBQUNBLElBQUksR0FBR0EsSUFBSTtJQUVoQixJQUFJQyxRQUFRLEdBQUc7TUFBRUMsSUFBSSxFQUFFUDtJQUFhLENBQUM7SUFDckMsTUFBTVEsU0FBUyxHQUFHLElBQUlsQixJQUFJLENBQUUsT0FBTyxFQUFFZ0IsUUFBUyxDQUFDO0lBQy9DLE1BQU1HLFNBQVMsR0FBRyxJQUFJbkIsSUFBSSxDQUFFLE9BQU8sRUFBRWdCLFFBQVMsQ0FBQztJQUMvQyxNQUFNSSxPQUFPLEdBQUcsSUFBSXBCLElBQUksQ0FBRSxLQUFLLEVBQUVnQixRQUFTLENBQUM7SUFDM0MsTUFBTUssVUFBVSxHQUFHLElBQUlyQixJQUFJLENBQUUsUUFBUSxFQUFFZ0IsUUFBUyxDQUFDO0lBRWpEQSxRQUFRLEdBQUc7TUFBRUMsSUFBSSxFQUFFUCxZQUFZO01BQUVZLElBQUksRUFBRVg7SUFBVyxDQUFDO0lBQ25ELE1BQU1ZLGFBQWEsR0FBRyxJQUFJdkIsSUFBSSxDQUFFLGdCQUFnQixFQUFFZ0IsUUFBUyxDQUFDO0lBQzVELE1BQU1RLGVBQWUsR0FBRyxJQUFJeEIsSUFBSSxDQUFFLGNBQWMsRUFBRWdCLFFBQVMsQ0FBQztJQUM1RCxNQUFNUyxTQUFTLEdBQUcsSUFBSXpCLElBQUksQ0FBRSxPQUFPLEVBQUVnQixRQUFTLENBQUM7SUFDL0MsTUFBTVUsVUFBVSxHQUFHLElBQUkxQixJQUFJLENBQUUsUUFBUSxFQUFFZ0IsUUFBUyxDQUFDO0lBQ2pELE1BQU1XLFlBQVksR0FBRyxJQUFJM0IsSUFBSSxDQUFFLFVBQVUsRUFBRWdCLFFBQVMsQ0FBQztJQUNyRCxNQUFNWSxVQUFVLEdBQUcsSUFBSTVCLElBQUksQ0FBRSxxQkFBcUIsRUFBRWdCLFFBQVMsQ0FBQztJQUM5RCxNQUFNYSxlQUFlLEdBQUcsSUFBSTdCLElBQUksQ0FBRSxNQUFNLEVBQUVnQixRQUFTLENBQUM7SUFDcEQsSUFBSSxDQUFDYyxzQkFBc0IsR0FBRyxJQUFJOUIsSUFBSSxDQUFFLFFBQVEsRUFBRWdCLFFBQVMsQ0FBQztJQUM1RCxNQUFNZSxTQUFTLEdBQUcsSUFBSS9CLElBQUksQ0FBRSxrQkFBa0IsRUFBRWdCLFFBQVMsQ0FBQzs7SUFHMUQ7SUFDQSxNQUFNZ0IsWUFBWSxHQUFHO01BQ25CVixJQUFJLEVBQUUsT0FBTztNQUNiVyxNQUFNLEVBQUUsT0FBTztNQUNmQyxTQUFTLEVBQUUsQ0FBQztNQUFFO01BQ2RDLE9BQU8sRUFBRSxFQUFFO01BQ1hDLE9BQU8sRUFBRSxDQUFDO01BQ1ZDLFlBQVksRUFBRSxDQUFDO01BQUU7TUFDakJDLE1BQU0sRUFBRSxLQUFLO01BQUU7TUFDZkMsa0JBQWtCLEVBQUUsS0FBSztNQUN6QkMsS0FBSyxFQUFFLE1BQU07TUFBRTtNQUNmQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO0lBQ2QsQ0FBQzs7SUFFRCxNQUFNQyxhQUFhLEdBQUc7TUFDcEJDLFNBQVMsRUFBRSxJQUFJaEQsVUFBVSxDQUFFLEdBQUcsRUFBRSxDQUFFLENBQUM7TUFDbkNpRCxTQUFTLEVBQUUsSUFBSWpELFVBQVUsQ0FBRSxFQUFFLEVBQUUsRUFBRyxDQUFDO01BQ25Da0QsdUJBQXVCLEVBQUUsQ0FBQztNQUMxQkMsdUJBQXVCLEVBQUU7SUFDM0IsQ0FBQztJQUVELE1BQU1DLFNBQVMsR0FBR0MsYUFBYSxJQUFJO01BQ2pDLE9BQU8sSUFBSS9DLElBQUksQ0FBRTtRQUNmZ0QsUUFBUSxFQUFFRCxhQUFhO1FBQ3ZCUixLQUFLLEVBQUUsUUFBUTtRQUNmRixNQUFNLEVBQUU7TUFDVixDQUFFLENBQUM7SUFDTCxDQUFDO0lBQ0QsTUFBTVksVUFBVSxHQUFHRixhQUFhLElBQUk7TUFDbEMsT0FBTyxJQUFJL0MsSUFBSSxDQUFFO1FBQ2ZnRCxRQUFRLEVBQUVELGFBQWE7UUFDdkJSLEtBQUssRUFBRSxNQUFNO1FBQ2JGLE1BQU0sRUFBRTtNQUNWLENBQUUsQ0FBQztJQUNMLENBQUM7SUFDRCxNQUFNYSxPQUFPLEdBQUcsRUFBRTtJQUNsQixNQUFNQyxTQUFTLEdBQUdKLGFBQWEsSUFBSTtNQUNqQyxPQUFPLElBQUlsRCxJQUFJLENBQUU7UUFDZm1ELFFBQVEsRUFBRUQsYUFBYTtRQUN2QkcsT0FBTyxFQUFFQSxPQUFPO1FBQ2hCYixNQUFNLEVBQUU7TUFDVixDQUFFLENBQUM7SUFDTCxDQUFDOztJQUVEO0lBQ0EsSUFBSSxDQUFDZSxnQkFBZ0IsR0FBRyxJQUFJM0QsUUFBUSxDQUFFLElBQUssQ0FBQztJQUM1QyxJQUFJLENBQUM0RCxpQkFBaUIsR0FBRyxJQUFJNUQsUUFBUSxDQUFFLEVBQUcsQ0FBQztJQUMzQyxJQUFJLENBQUM2RCxjQUFjLEdBQUcsSUFBSTdELFFBQVEsQ0FBRSxFQUFHLENBQUM7SUFDeEMsSUFBSSxDQUFDOEQsYUFBYSxHQUFHLElBQUk5RCxRQUFRLENBQUUsRUFBRyxDQUFDO0lBQ3ZDLElBQUksQ0FBQytELGFBQWEsR0FBRyxJQUFJL0QsUUFBUSxDQUFFLE9BQVEsQ0FBQztJQUM1QyxJQUFJLENBQUNnRSxnQkFBZ0IsR0FBRyxJQUFJaEUsUUFBUSxDQUFFLEVBQUcsQ0FBQztJQUMxQyxJQUFJLENBQUNpRSx5QkFBeUIsR0FBRyxJQUFJakUsUUFBUSxDQUFFLEdBQUksQ0FBQztJQUNwRCxJQUFJLENBQUNrRSx5QkFBeUIsR0FBRyxJQUFJbEUsUUFBUSxDQUFFLENBQUUsQ0FBQztJQUNsRCxJQUFJLENBQUNtRSx1QkFBdUIsR0FBRyxJQUFJbkUsUUFBUSxDQUFFLEtBQU0sQ0FBQztJQUVwRCxNQUFNb0UsU0FBUyxHQUFHLElBQUk5RCxJQUFJLENBQUUsR0FBRyxFQUFFO01BQUVpQixJQUFJLEVBQUVQO0lBQWEsQ0FBRSxDQUFDOztJQUV6RDtJQUNBLE1BQU1xRCxlQUFlLEdBQUcsSUFBSTFELE9BQU8sQ0FBRSxJQUFJLENBQUNpRCxpQkFBaUIsRUFBRSxJQUFJMUQsS0FBSyxDQUFFLENBQUMsRUFBRWEsa0JBQWtCLENBQUN1RCxrQkFBbUIsQ0FBQyxFQUFFdEIsYUFBYyxDQUFDO0lBQ25JLE1BQU11QixhQUFhLEdBQUdsQixTQUFTLENBQUUsQ0FBRWdCLGVBQWUsRUFBRXhDLGFBQWEsQ0FBRyxDQUFDO0lBRXJFLE1BQU0yQyxZQUFZLEdBQUcsSUFBSTdELE9BQU8sQ0FBRSxJQUFJLENBQUNrRCxjQUFjLEVBQUUsSUFBSTNELEtBQUssQ0FBRSxDQUFDLEVBQUUsR0FBSSxDQUFDLEVBQUU4QyxhQUFjLENBQUM7SUFDM0YsTUFBTXlCLFVBQVUsR0FBR3BCLFNBQVMsQ0FBRSxDQUFFbUIsWUFBWSxFQUFFeEMsVUFBVSxDQUFHLENBQUM7SUFFNUQsTUFBTTBDLFdBQVcsR0FBRyxJQUFJL0QsT0FBTyxDQUFFLElBQUksQ0FBQ21ELGFBQWEsRUFBRSxJQUFJNUQsS0FBSyxDQUFFLEVBQUUsRUFBRSxHQUFJLENBQUMsRUFBRThDLGFBQWMsQ0FBQztJQUMxRixNQUFNMkIsU0FBUyxHQUFHdEIsU0FBUyxDQUFFLENBQUVxQixXQUFXLEVBQUUzQyxTQUFTLENBQUcsQ0FBQztJQUV6RCxNQUFNNkMsa0JBQWtCLEdBQUc7TUFBRUMsTUFBTSxFQUFFLENBQUM7TUFBRUMsUUFBUSxFQUFFLEVBQUU7TUFBRUMsZUFBZSxFQUFFO0lBQVEsQ0FBQztJQUNoRixNQUFNQyxxQkFBcUIsR0FBRyxJQUFJeEUsZUFBZSxDQUFFLElBQUksQ0FBQ3VELGFBQWEsRUFBRSxPQUFPLEVBQUV2QyxTQUFTLEVBQUVvRCxrQkFBbUIsQ0FBQztJQUMvRyxNQUFNSyxxQkFBcUIsR0FBRyxJQUFJekUsZUFBZSxDQUFFLElBQUksQ0FBQ3VELGFBQWEsRUFBRSxPQUFPLEVBQUV0QyxTQUFTLEVBQUVtRCxrQkFBbUIsQ0FBQztJQUMvRyxNQUFNTSxtQkFBbUIsR0FBRyxJQUFJMUUsZUFBZSxDQUFFLElBQUksQ0FBQ3VELGFBQWEsRUFBRSxLQUFLLEVBQUVyQyxPQUFPLEVBQUVrRCxrQkFBbUIsQ0FBQztJQUN6RyxNQUFNTyxzQkFBc0IsR0FBRyxJQUFJM0UsZUFBZSxDQUFFLElBQUksQ0FBQ3VELGFBQWEsRUFBRSxRQUFRLEVBQUVwQyxVQUFVLEVBQUVpRCxrQkFBbUIsQ0FBQztJQUVsSCxNQUFNUSxVQUFVLEdBQUc1QixVQUFVLENBQUUsQ0FBRXdCLHFCQUFxQixFQUFFQyxxQkFBcUIsQ0FBRyxDQUFDO0lBQ2pGLE1BQU1JLFVBQVUsR0FBRzdCLFVBQVUsQ0FBRSxDQUFFMEIsbUJBQW1CLEVBQUVDLHNCQUFzQixDQUFHLENBQUM7SUFFaEYsTUFBTUcsY0FBYyxHQUFHLElBQUkzRSxPQUFPLENBQUUsSUFBSSxDQUFDcUQsZ0JBQWdCLEVBQUUsSUFBSTlELEtBQUssQ0FBRSxFQUFFLEVBQUUsR0FBSSxDQUFDLEVBQUU4QyxhQUFjLENBQUM7SUFDaEcsTUFBTXVDLFlBQVksR0FBR2xDLFNBQVMsQ0FBRSxDQUFFaUMsY0FBYyxFQUFFckQsWUFBWSxDQUFHLENBQUM7SUFFbEUsTUFBTXVELFlBQVksR0FBRyxJQUFJN0UsT0FBTyxDQUFFLElBQUksQ0FBQ3NELHlCQUF5QixFQUFFLElBQUkvRCxLQUFLLENBQUUsR0FBRyxFQUFFLEdBQUksQ0FBQyxFQUFFOEMsYUFBYyxDQUFDO0lBQ3hHLE1BQU15QyxVQUFVLEdBQUdwQyxTQUFTLENBQUUsQ0FBRW1DLFlBQVksRUFBRSxJQUFJbkYsSUFBSSxDQUFFO01BQUVrRCxRQUFRLEVBQUUsQ0FBRXJCLFVBQVU7SUFBRyxDQUFFLENBQUMsQ0FBRyxDQUFDOztJQUUxRjtJQUNBLE1BQU13RCxhQUFhLEdBQUcsSUFBSS9FLE9BQU8sQ0FBRSxJQUFJLENBQUNzRCx5QkFBeUIsRUFBRSxJQUFJL0QsS0FBSyxDQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBSSxDQUFDLEVBQUU4QyxhQUFjLENBQUM7SUFDM0csTUFBTTJDLFdBQVcsR0FBR3RDLFNBQVMsQ0FBRSxDQUFFcUMsYUFBYSxFQUFFLElBQUlyRixJQUFJLENBQUU7TUFBRWtELFFBQVEsRUFBRSxDQUFFckIsVUFBVTtJQUFHLENBQUUsQ0FBQyxDQUFHLENBQUM7SUFFNUYsTUFBTTBELFdBQVcsR0FBRyxJQUFJakYsT0FBTyxDQUFFLElBQUksQ0FBQ3VELHlCQUF5QixFQUFFLElBQUloRSxLQUFLLENBQUUsR0FBRyxFQUFFLENBQUUsQ0FBQyxFQUFFOEMsYUFBYyxDQUFDO0lBQ3JHLE1BQU02QyxTQUFTLEdBQUd4QyxTQUFTLENBQUUsQ0FBRXVDLFdBQVcsRUFBRXZELFNBQVMsQ0FBRyxDQUFDO0lBRXpELE1BQU15RCxlQUFlLEdBQUc7TUFBRUMsdUJBQXVCLEVBQUU7SUFBUSxDQUFDO0lBRTVELE1BQU1DLGVBQWUsR0FBRyxJQUFJdkYsUUFBUSxDQUFFLElBQUksQ0FBQzBELHVCQUF1QixFQUFFckMsZUFBZSxFQUFFZ0UsZUFBZ0IsQ0FBQztJQUV0RyxNQUFNRyxlQUFlLEdBQUd2QyxTQUFTLENBQUUsQ0FBRXZCLGVBQWUsRUFBRSxJQUFJLENBQUNDLHNCQUFzQixDQUFHLENBQUM7SUFDckYsSUFBSThELFlBQVksR0FBRyxJQUFJN0YsSUFBSSxDQUFDLENBQUM7SUFFN0IsUUFBUWdCLElBQUk7TUFDVixLQUFLUCxJQUFJLENBQUNxRixVQUFVO1FBQ2xCRCxZQUFZLEdBQUd4QyxTQUFTLENBQUUsQ0FBRVUsU0FBUyxFQUFFRyxhQUFhLEVBQUVFLFVBQVUsRUFBRVcsVUFBVSxFQUFFQyxVQUFVLENBQUcsQ0FBQztRQUM1RjtNQUNGLEtBQUt2RSxJQUFJLENBQUNzRixXQUFXO1FBQ25CRixZQUFZLEdBQUd4QyxTQUFTLENBQUUsQ0FBRVUsU0FBUyxFQUFFRyxhQUFhLEVBQUVJLFNBQVMsRUFBRVMsVUFBVSxFQUFFQyxVQUFVLENBQUcsQ0FBQztRQUMzRjtNQUNGLEtBQUt2RSxJQUFJLENBQUN1RixlQUFlO1FBQ3ZCSCxZQUFZLEdBQUd4QyxTQUFTLENBQUUsQ0FBRVUsU0FBUyxFQUFFbUIsWUFBWSxFQUFFRSxVQUFVLEVBQUVJLFNBQVMsRUFBRUcsZUFBZSxFQUFFQyxlQUFlLENBQUcsQ0FBQztRQUNoSDtNQUNGLEtBQUtuRixJQUFJLENBQUN3RixjQUFjO1FBQ3RCSixZQUFZLEdBQUd4QyxTQUFTLENBQUUsQ0FBRVUsU0FBUyxFQUFFbUIsWUFBWSxFQUFFSSxXQUFXLEVBQUVFLFNBQVMsRUFBRUcsZUFBZSxFQUFFQyxlQUFlLENBQUcsQ0FBQztRQUNqSDtNQUNGLEtBQUtuRixJQUFJLENBQUN5RixpQkFBaUI7UUFDekJMLFlBQVksR0FBR3hDLFNBQVMsQ0FBRSxDQUFFVSxTQUFTLEVBQUVtQixZQUFZLEVBQUVFLFVBQVUsRUFBRU8sZUFBZSxFQUFFQyxlQUFlLENBQUcsQ0FBQztRQUNyRztNQUNGLEtBQUtuRixJQUFJLENBQUMwRixZQUFZO1FBQ3BCTixZQUFZLEdBQUd4QyxTQUFTLENBQUUsQ0FBRVUsU0FBUyxFQUFFbUIsWUFBWSxDQUFHLENBQUM7UUFDdkQ7TUFDRixLQUFLekUsSUFBSSxDQUFDMkYsZ0JBQWdCO1FBQ3hCUCxZQUFZLEdBQUd4QyxTQUFTLENBQUUsQ0FBRVUsU0FBUyxFQUFFbUIsWUFBWSxFQUFFSSxXQUFXLEVBQUVLLGVBQWUsRUFBRUMsZUFBZSxDQUFHLENBQUM7UUFDdEc7TUFDRixLQUFLbkYsSUFBSSxDQUFDNEYsV0FBVztRQUNuQlIsWUFBWSxHQUFHeEMsU0FBUyxDQUFFLENBQUVVLFNBQVMsRUFBRW1CLFlBQVksQ0FBRyxDQUFDO1FBQ3ZEO01BQ0YsS0FBS3pFLElBQUksQ0FBQzZGLFNBQVM7UUFDakJULFlBQVksR0FBR3hDLFNBQVMsQ0FBRSxDQUFFVSxTQUFTLENBQUcsQ0FBQztRQUN6QztNQUNGO1FBQ0UsTUFBTSxJQUFJd0MsS0FBSyxDQUFHLGlCQUFnQnZGLElBQUssRUFBRSxDQUFDO0lBRTlDLENBQUM7SUFDRCxNQUFNd0Ysb0JBQW9CLEdBQUcsSUFBSW5HLG9CQUFvQixDQUFFLElBQUksQ0FBQ2lELGdCQUFnQixFQUFFO01BQzVFbUQsVUFBVSxFQUFFLEVBQUU7TUFDZEMsTUFBTSxFQUFFO0lBQ1YsQ0FBRSxDQUFDO0lBQ0gsTUFBTUMsWUFBWSxHQUFHLElBQUlwRyxLQUFLLENBQUVzRixZQUFZLEVBQUU1RCxZQUFhLENBQUM7SUFDNUQsSUFBSSxDQUFDaUIsUUFBUSxHQUFHLENBQUV5RCxZQUFZLEVBQUVILG9CQUFvQixDQUFFO0lBQ3REQSxvQkFBb0IsQ0FBQ0ksSUFBSSxHQUFHLENBQUM7SUFDN0JKLG9CQUFvQixDQUFDSyxHQUFHLEdBQUcsQ0FBQztJQUU1QjlGLFFBQVEsQ0FBQytGLHFCQUFxQixDQUFDQyxRQUFRLENBQUVDLEtBQUssSUFBSTtNQUNoRCxJQUFJLENBQUNDLE9BQU8sR0FBS0QsS0FBSyxDQUFDaEcsSUFBSSxLQUFLQSxJQUFNO01BQ3RDLElBQUksQ0FBQ2tHLGdCQUFnQixDQUFDLENBQUM7TUFFdkIsSUFBSyxJQUFJLENBQUNELE9BQU8sRUFBRztRQUNsQixJQUFJLENBQUNFLFdBQVcsQ0FBRUgsS0FBTSxDQUFDO01BQzNCO0lBQ0YsQ0FBRSxDQUFDO0lBQ0gsSUFBSSxDQUFDMUQsZ0JBQWdCLENBQUM4RCxJQUFJLENBQUVDLElBQUksSUFBSTtNQUNsQ1YsWUFBWSxDQUFDTSxPQUFPLEdBQUdJLElBQUk7SUFDN0IsQ0FBRSxDQUFDO0VBRUwsQ0FBQzs7RUFHRDtBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBQ0VGLFdBQVdBLENBQUVILEtBQUssRUFBRyxDQUVyQjs7RUFFQTtBQUNGO0FBQ0E7RUFDRUUsZ0JBQWdCQSxDQUFBLEVBQUcsQ0FFbkI7O0VBRUE7QUFDRjtBQUNBO0VBQ0VJLGVBQWVBLENBQUEsRUFBRztJQUNoQixJQUFJLENBQUNoRSxnQkFBZ0IsQ0FBQ2lFLEtBQUssQ0FBQyxDQUFDO0lBQzdCLElBQUksQ0FBQ2hFLGlCQUFpQixDQUFDZ0UsS0FBSyxDQUFDLENBQUM7SUFDOUIsSUFBSSxDQUFDL0QsY0FBYyxDQUFDK0QsS0FBSyxDQUFDLENBQUM7SUFDM0IsSUFBSSxDQUFDOUQsYUFBYSxDQUFDOEQsS0FBSyxDQUFDLENBQUM7SUFDMUIsSUFBSSxDQUFDN0QsYUFBYSxDQUFDNkQsS0FBSyxDQUFDLENBQUM7SUFDMUIsSUFBSSxDQUFDNUQsZ0JBQWdCLENBQUM0RCxLQUFLLENBQUMsQ0FBQztJQUM3QixJQUFJLENBQUMzRCx5QkFBeUIsQ0FBQzJELEtBQUssQ0FBQyxDQUFDO0lBQ3RDLElBQUksQ0FBQzFELHlCQUF5QixDQUFDMEQsS0FBSyxDQUFDLENBQUM7SUFDdEMsSUFBSSxDQUFDekQsdUJBQXVCLENBQUN5RCxLQUFLLENBQUMsQ0FBQztFQUN0QztBQUNGO0FBRUEvRyxTQUFTLENBQUNnSCxRQUFRLENBQUUsY0FBYyxFQUFFM0csWUFBYSxDQUFDO0FBQ2xELGVBQWVBLFlBQVkifQ==