// Copyright 2015-2022, University of Colorado Boulder

/**
 * Draws graphic for lens, mirror, mask or other component
 * with adjustable focal length, diameter, etc.
 *
 * @author Michael Dubson (PhET Interactive Simulations)
 */

import Utils from '../../../../dot/js/Utils.js';
import { Shape } from '../../../../kite/js/imports.js';
import { Line, Node, Path, Rectangle } from '../../../../scenery/js/imports.js';
import opticsLab from '../../opticsLab.js';
import Type from '../model/Type.js';
import FocalPointGraphic from './FocalPointGraphic.js';
class ComponentGraphic extends Node {
  /**
   * @param {Type} type
   * @param {number} diameter
   * @param {number} radius
   * @param {number} index
   */
  constructor(type, diameter, radius, index) {
    super();
    this.type = type;

    // @private {number}
    this.diameter = diameter; //starting direction of the first segment, the one thing that never changes

    // @private {number}
    this.radius = radius; // radius of curvature of each surface of lens

    //@private
    this.index = index; // index of refraction

    // @private
    this.f = this.radius / (2 * (this.index - 1));

    // @private
    this.mirrorBackGraphic = new Rectangle(0, -0.5, 20, 1, {
      fill: 'red'
    });

    // @private
    this.path = new Path(new Shape());

    // @private
    this.focalPtRight = new FocalPointGraphic(15);

    //@private
    this.focalPtLeft = new FocalPointGraphic(15);

    //@private
    this.children = [this.mirrorBackGraphic, this.path, this.focalPtLeft, this.focalPtRight];
  }

  /**
   * Draws the component
   * @private
   */
  makeDrawing() {
    switch (this.type) {
      case Type.CONVERGING_LENS:
        this.drawLens();
        break;
      case Type.DIVERGING_LENS:
        this.drawLens();
        break;
      case Type.CONVERGING_MIRROR:
        this.drawCurvedMirror();
        break;
      case Type.PLANE_MIRROR:
        this.drawPlaneMirror();
        break;
      case Type.DIVERGING_MIRROR:
        this.drawCurvedMirror();
        break;
      case Type.SIMPLE_MASK:
        this.drawMask();
        break;
      case Type.SLIT_MASK:
        this.drawMask();
        break;
      default:
        throw new Error(`invalid type: ${this.type}`);
    } //end switch
  }

  //end makeDrawing()
  /**
   * @private
   */
  clearDrawing() {}

  /**
   * Draws a lens (convergent and divergent)
   * @private
   */
  drawLens() {
    const shape = new Shape();
    let R; //same as this.radius = radius of curvature of lens, not to be confused with half-diameter of lens
    const fudge1 = 1; //fudge factor to make lens radius big enough to be apparent to eye
    const fudge2 = 2; //fudge factor to make adjust range of index of refraction
    //fudge * 2 * Math.abs( this.f ) * ( this.n - 1 );  //radius of curvature of lens surface
    const n = fudge2 * this.index;
    if (this.type === Type.CONVERGING_LENS) {
      R = fudge1 * this.radius;
    } else {
      R = -fudge1 * this.radius; //radius has sign, R is positive
    }

    this.f = this.radius / 2 * (1 / (n - 1)); //f takes sign of R
    const h = this.diameter / 2; //h = height = radius of lens
    //  temporary fixed for theta, see #12   set the maximum ratio to be one
    const theta = Math.asin(Utils.clamp(h / R, -1, 1)); //magnitude of startAngle and endAngle
    const C = R * Math.cos(theta); //distance from center of lens to center of curvature of lens surface
    if (this.f > 0) {
      shape.arc(-C, 0, R, theta, -theta, true) //arc( -diameter, 0,)
      .arc(C, 0, R, -Math.PI + theta, -Math.PI - theta, true);
    } else if (this.f < 0) {
      const w = 5;
      shape.arc(-w - R, 0, R, theta, -theta, true).lineToRelative(2 * (w + (R - C)), 0).arc(w + R, 0, R, -Math.PI + theta, -Math.PI - theta, true).close();
    }
    this.path.stroke = 'yellow';
    this.path.fill = 'white';
    this.path.lineWidth = 2;
    this.path.opacity = 0.85;
    this.path.setShape(shape);
    this.mirrorBackGraphic.visible = false;
  } //end drawLens()

  /**
   * Draws a curve mirror (convergent and divergent)
   * @private
   */
  drawCurvedMirror() {
    const fudge = 1;
    const R = fudge * this.radius;
    const h = this.diameter / 2; //h = height = radius of lens
    //  temporary fixed for theta, see #12   set the maximum ratio to be one
    const theta = Math.asin(Utils.clamp(h / R, -1, 1)); //magnitude of startAngle and endAngle
    const C = R * Math.cos(theta); //distance from center of lens to center of curvature of lens surface
    const shape = new Shape();
    if (this.type === Type.DIVERGING_MIRROR) {
      shape.arc(C, 0, R, -Math.PI + theta, -Math.PI - theta, false);
    } else {
      shape.arc(-C, 0, R, theta, -theta, true);
    }
    this.path.stroke = 'white';
    this.path.lineWidth = 8;
    //this.path.opacity = 0.95;
    this.path.setShape(shape);
    //var w = 20;
    //this.mirrorBackGraphic = new Rectangle( 0, -h, w, 2*h, {fill:'red'} );
    this.mirrorBackGraphic.setScaleMagnitude(1, 2 * h);
    this.mirrorBackGraphic.visible = true;
  }

  /**
   * Draws a plane mirror
   * @private
   */
  drawPlaneMirror() {
    this.removeAllChildren();
    const w = 20;
    const height = this.diameter;
    //Rectangle( x, y, width, height, arcWidth, arcHeight, options )
    const maskGraphic = new Rectangle(0, -height / 2, w, height, {
      fill: 'red'
    });
    //Line( x1, y1, x2, y2, options )
    const lineGraphic = new Line(0, -height / 2, 0, height / 2, {
      stroke: '#FFF',
      lineWidth: 4
    });
    this.addChild(maskGraphic);
    this.addChild(lineGraphic);
  }

  /**
   * draw a background mask
   * @private
   */
  drawMask() {
    this.removeAllChildren();
    const w = 20;
    const height = this.diameter;
    const maskGraphic = new Rectangle(0, -height / 2, w, height, {
      fill: 'green'
    });
    const lineGraphic = new Line(0, -height / 2, 0, height / 2, {
      stroke: 'black',
      lineWidth: 4
    });
    this.addChild(maskGraphic);
    this.addChild(lineGraphic);
  }

  /**
   * Sets the diameter of the component
   * @param {number} diameter
   * @public
   */
  setDiameter(diameter) {
    this.diameter = diameter;
    this.makeDrawing();
  }

  /**
   * Sets the radius of curvature of component
   * @param {number} R
   * @public
   */
  setRadius(R) {
    this.radius = R;
    this.makeDrawing();
  }

  /**
   * Sets the index of refraction of the component
   * @param {number} index
   * @public
   */
  setIndex(index) {
    this.index = index;
    this.makeDrawing();
  }

  /**
   *
   * @param {number} distance
   * @public
   */
  setFocalPointPositions(distance) {
    this.focalPtLeft.x = -distance;
    this.focalPtRight.x = distance;
  }

  /**
   *
   * @param {boolean} isVisible
   * @public
   */
  setFocalPointsVisibility(isVisible) {
    this.focalPtLeft.visible = isVisible;
    this.focalPtRight.visible = isVisible;
  }
}
opticsLab.register('ComponentGraphic', ComponentGraphic);
export default ComponentGraphic;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVdGlscyIsIlNoYXBlIiwiTGluZSIsIk5vZGUiLCJQYXRoIiwiUmVjdGFuZ2xlIiwib3B0aWNzTGFiIiwiVHlwZSIsIkZvY2FsUG9pbnRHcmFwaGljIiwiQ29tcG9uZW50R3JhcGhpYyIsImNvbnN0cnVjdG9yIiwidHlwZSIsImRpYW1ldGVyIiwicmFkaXVzIiwiaW5kZXgiLCJmIiwibWlycm9yQmFja0dyYXBoaWMiLCJmaWxsIiwicGF0aCIsImZvY2FsUHRSaWdodCIsImZvY2FsUHRMZWZ0IiwiY2hpbGRyZW4iLCJtYWtlRHJhd2luZyIsIkNPTlZFUkdJTkdfTEVOUyIsImRyYXdMZW5zIiwiRElWRVJHSU5HX0xFTlMiLCJDT05WRVJHSU5HX01JUlJPUiIsImRyYXdDdXJ2ZWRNaXJyb3IiLCJQTEFORV9NSVJST1IiLCJkcmF3UGxhbmVNaXJyb3IiLCJESVZFUkdJTkdfTUlSUk9SIiwiU0lNUExFX01BU0siLCJkcmF3TWFzayIsIlNMSVRfTUFTSyIsIkVycm9yIiwiY2xlYXJEcmF3aW5nIiwic2hhcGUiLCJSIiwiZnVkZ2UxIiwiZnVkZ2UyIiwibiIsImgiLCJ0aGV0YSIsIk1hdGgiLCJhc2luIiwiY2xhbXAiLCJDIiwiY29zIiwiYXJjIiwiUEkiLCJ3IiwibGluZVRvUmVsYXRpdmUiLCJjbG9zZSIsInN0cm9rZSIsImxpbmVXaWR0aCIsIm9wYWNpdHkiLCJzZXRTaGFwZSIsInZpc2libGUiLCJmdWRnZSIsInNldFNjYWxlTWFnbml0dWRlIiwicmVtb3ZlQWxsQ2hpbGRyZW4iLCJoZWlnaHQiLCJtYXNrR3JhcGhpYyIsImxpbmVHcmFwaGljIiwiYWRkQ2hpbGQiLCJzZXREaWFtZXRlciIsInNldFJhZGl1cyIsInNldEluZGV4Iiwic2V0Rm9jYWxQb2ludFBvc2l0aW9ucyIsImRpc3RhbmNlIiwieCIsInNldEZvY2FsUG9pbnRzVmlzaWJpbGl0eSIsImlzVmlzaWJsZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiQ29tcG9uZW50R3JhcGhpYy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNS0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBEcmF3cyBncmFwaGljIGZvciBsZW5zLCBtaXJyb3IsIG1hc2sgb3Igb3RoZXIgY29tcG9uZW50XHJcbiAqIHdpdGggYWRqdXN0YWJsZSBmb2NhbCBsZW5ndGgsIGRpYW1ldGVyLCBldGMuXHJcbiAqXHJcbiAqIEBhdXRob3IgTWljaGFlbCBEdWJzb24gKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IFV0aWxzIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9VdGlscy5qcyc7XHJcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSAnLi4vLi4vLi4vLi4va2l0ZS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IHsgTGluZSwgTm9kZSwgUGF0aCwgUmVjdGFuZ2xlIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IG9wdGljc0xhYiBmcm9tICcuLi8uLi9vcHRpY3NMYWIuanMnO1xyXG5pbXBvcnQgVHlwZSBmcm9tICcuLi9tb2RlbC9UeXBlLmpzJztcclxuaW1wb3J0IEZvY2FsUG9pbnRHcmFwaGljIGZyb20gJy4vRm9jYWxQb2ludEdyYXBoaWMuanMnO1xyXG5cclxuY2xhc3MgQ29tcG9uZW50R3JhcGhpYyBleHRlbmRzIE5vZGUge1xyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7VHlwZX0gdHlwZVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkaWFtZXRlclxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXNcclxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvciggdHlwZSwgZGlhbWV0ZXIsIHJhZGl1cywgaW5kZXggKSB7XHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcblxyXG4gICAgLy8gQHByaXZhdGUge251bWJlcn1cclxuICAgIHRoaXMuZGlhbWV0ZXIgPSBkaWFtZXRlcjsgICAgLy9zdGFydGluZyBkaXJlY3Rpb24gb2YgdGhlIGZpcnN0IHNlZ21lbnQsIHRoZSBvbmUgdGhpbmcgdGhhdCBuZXZlciBjaGFuZ2VzXHJcblxyXG4gICAgLy8gQHByaXZhdGUge251bWJlcn1cclxuICAgIHRoaXMucmFkaXVzID0gcmFkaXVzOyAgIC8vIHJhZGl1cyBvZiBjdXJ2YXR1cmUgb2YgZWFjaCBzdXJmYWNlIG9mIGxlbnNcclxuXHJcbiAgICAvL0Bwcml2YXRlXHJcbiAgICB0aGlzLmluZGV4ID0gaW5kZXg7ICAgICAvLyBpbmRleCBvZiByZWZyYWN0aW9uXHJcblxyXG4gICAgLy8gQHByaXZhdGVcclxuICAgIHRoaXMuZiA9IHRoaXMucmFkaXVzIC8gKCAyICogKCB0aGlzLmluZGV4IC0gMSApICk7XHJcblxyXG4gICAgLy8gQHByaXZhdGVcclxuICAgIHRoaXMubWlycm9yQmFja0dyYXBoaWMgPSBuZXcgUmVjdGFuZ2xlKCAwLCAtMC41LCAyMCwgMSwgeyBmaWxsOiAncmVkJyB9ICk7XHJcblxyXG4gICAgLy8gQHByaXZhdGVcclxuICAgIHRoaXMucGF0aCA9IG5ldyBQYXRoKCBuZXcgU2hhcGUoKSApO1xyXG5cclxuICAgIC8vIEBwcml2YXRlXHJcbiAgICB0aGlzLmZvY2FsUHRSaWdodCA9IG5ldyBGb2NhbFBvaW50R3JhcGhpYyggMTUgKTtcclxuXHJcbiAgICAvL0Bwcml2YXRlXHJcbiAgICB0aGlzLmZvY2FsUHRMZWZ0ID0gbmV3IEZvY2FsUG9pbnRHcmFwaGljKCAxNSApO1xyXG5cclxuICAgIC8vQHByaXZhdGVcclxuICAgIHRoaXMuY2hpbGRyZW4gPSBbIHRoaXMubWlycm9yQmFja0dyYXBoaWMsIHRoaXMucGF0aCwgdGhpcy5mb2NhbFB0TGVmdCwgdGhpcy5mb2NhbFB0UmlnaHQgXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERyYXdzIHRoZSBjb21wb25lbnRcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIG1ha2VEcmF3aW5nKCkge1xyXG4gICAgc3dpdGNoKCB0aGlzLnR5cGUgKSB7XHJcbiAgICAgIGNhc2UgVHlwZS5DT05WRVJHSU5HX0xFTlM6XHJcbiAgICAgICAgdGhpcy5kcmF3TGVucygpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFR5cGUuRElWRVJHSU5HX0xFTlM6XHJcbiAgICAgICAgdGhpcy5kcmF3TGVucygpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFR5cGUuQ09OVkVSR0lOR19NSVJST1I6XHJcbiAgICAgICAgdGhpcy5kcmF3Q3VydmVkTWlycm9yKCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgVHlwZS5QTEFORV9NSVJST1I6XHJcbiAgICAgICAgdGhpcy5kcmF3UGxhbmVNaXJyb3IoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBUeXBlLkRJVkVSR0lOR19NSVJST1I6XHJcbiAgICAgICAgdGhpcy5kcmF3Q3VydmVkTWlycm9yKCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgVHlwZS5TSU1QTEVfTUFTSzpcclxuICAgICAgICB0aGlzLmRyYXdNYXNrKCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgVHlwZS5TTElUX01BU0s6XHJcbiAgICAgICAgdGhpcy5kcmF3TWFzaygpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvciggYGludmFsaWQgdHlwZTogJHt0aGlzLnR5cGV9YCApO1xyXG4gICAgfS8vZW5kIHN3aXRjaFxyXG4gIH1cclxuXHJcbiAgLy9lbmQgbWFrZURyYXdpbmcoKVxyXG4gIC8qKlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgY2xlYXJEcmF3aW5nKCkge1xyXG5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERyYXdzIGEgbGVucyAoY29udmVyZ2VudCBhbmQgZGl2ZXJnZW50KVxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgZHJhd0xlbnMoKSB7XHJcbiAgICBjb25zdCBzaGFwZSA9IG5ldyBTaGFwZSgpO1xyXG4gICAgbGV0IFI7ICAvL3NhbWUgYXMgdGhpcy5yYWRpdXMgPSByYWRpdXMgb2YgY3VydmF0dXJlIG9mIGxlbnMsIG5vdCB0byBiZSBjb25mdXNlZCB3aXRoIGhhbGYtZGlhbWV0ZXIgb2YgbGVuc1xyXG4gICAgY29uc3QgZnVkZ2UxID0gMTsgICAvL2Z1ZGdlIGZhY3RvciB0byBtYWtlIGxlbnMgcmFkaXVzIGJpZyBlbm91Z2ggdG8gYmUgYXBwYXJlbnQgdG8gZXllXHJcbiAgICBjb25zdCBmdWRnZTIgPSAyOyAgIC8vZnVkZ2UgZmFjdG9yIHRvIG1ha2UgYWRqdXN0IHJhbmdlIG9mIGluZGV4IG9mIHJlZnJhY3Rpb25cclxuICAgIC8vZnVkZ2UgKiAyICogTWF0aC5hYnMoIHRoaXMuZiApICogKCB0aGlzLm4gLSAxICk7ICAvL3JhZGl1cyBvZiBjdXJ2YXR1cmUgb2YgbGVucyBzdXJmYWNlXHJcbiAgICBjb25zdCBuID0gZnVkZ2UyICogdGhpcy5pbmRleDtcclxuICAgIGlmICggdGhpcy50eXBlID09PSBUeXBlLkNPTlZFUkdJTkdfTEVOUyApIHtcclxuICAgICAgUiA9IGZ1ZGdlMSAqIHRoaXMucmFkaXVzO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIFIgPSAtZnVkZ2UxICogdGhpcy5yYWRpdXM7ICAgLy9yYWRpdXMgaGFzIHNpZ24sIFIgaXMgcG9zaXRpdmVcclxuICAgIH1cclxuICAgIHRoaXMuZiA9ICggdGhpcy5yYWRpdXMgLyAyICkgKiAoIDEgLyAoIG4gLSAxICkgKTsgIC8vZiB0YWtlcyBzaWduIG9mIFJcclxuICAgIGNvbnN0IGggPSB0aGlzLmRpYW1ldGVyIC8gMjsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaCA9IGhlaWdodCA9IHJhZGl1cyBvZiBsZW5zXHJcbiAgICAvLyAgdGVtcG9yYXJ5IGZpeGVkIGZvciB0aGV0YSwgc2VlICMxMiAgIHNldCB0aGUgbWF4aW11bSByYXRpbyB0byBiZSBvbmVcclxuICAgIGNvbnN0IHRoZXRhID0gTWF0aC5hc2luKCBVdGlscy5jbGFtcCggaCAvIFIsIC0xLCAxICkgKTsgICAgICAgICAgICAgICAgICAgICAvL21hZ25pdHVkZSBvZiBzdGFydEFuZ2xlIGFuZCBlbmRBbmdsZVxyXG4gICAgY29uc3QgQyA9IFIgKiBNYXRoLmNvcyggdGhldGEgKTsgICAgICAgICAgICAgICAgICAgICAgLy9kaXN0YW5jZSBmcm9tIGNlbnRlciBvZiBsZW5zIHRvIGNlbnRlciBvZiBjdXJ2YXR1cmUgb2YgbGVucyBzdXJmYWNlXHJcbiAgICBpZiAoIHRoaXMuZiA+IDAgKSB7XHJcbiAgICAgIHNoYXBlXHJcbiAgICAgICAgLmFyYyggLUMsIDAsIFIsIHRoZXRhLCAtdGhldGEsIHRydWUgKS8vYXJjKCAtZGlhbWV0ZXIsIDAsKVxyXG4gICAgICAgIC5hcmMoIEMsIDAsIFIsIC1NYXRoLlBJICsgdGhldGEsIC1NYXRoLlBJIC0gdGhldGEsIHRydWUgKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKCB0aGlzLmYgPCAwICkge1xyXG4gICAgICBjb25zdCB3ID0gNTtcclxuICAgICAgc2hhcGVcclxuICAgICAgICAuYXJjKCAtdyAtIFIsIDAsIFIsIHRoZXRhLCAtdGhldGEsIHRydWUgKVxyXG4gICAgICAgIC5saW5lVG9SZWxhdGl2ZSggMiAqICggdyArICggUiAtIEMgKSApLCAwIClcclxuICAgICAgICAuYXJjKCB3ICsgUiwgMCwgUiwgLU1hdGguUEkgKyB0aGV0YSwgLU1hdGguUEkgLSB0aGV0YSwgdHJ1ZSApXHJcbiAgICAgICAgLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnBhdGguc3Ryb2tlID0gJ3llbGxvdyc7XHJcbiAgICB0aGlzLnBhdGguZmlsbCA9ICd3aGl0ZSc7XHJcbiAgICB0aGlzLnBhdGgubGluZVdpZHRoID0gMjtcclxuXHJcbiAgICB0aGlzLnBhdGgub3BhY2l0eSA9IDAuODU7XHJcbiAgICB0aGlzLnBhdGguc2V0U2hhcGUoIHNoYXBlICk7XHJcbiAgICB0aGlzLm1pcnJvckJhY2tHcmFwaGljLnZpc2libGUgPSBmYWxzZTtcclxuICB9Ly9lbmQgZHJhd0xlbnMoKVxyXG5cclxuICAvKipcclxuICAgKiBEcmF3cyBhIGN1cnZlIG1pcnJvciAoY29udmVyZ2VudCBhbmQgZGl2ZXJnZW50KVxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgZHJhd0N1cnZlZE1pcnJvcigpIHtcclxuICAgIGNvbnN0IGZ1ZGdlID0gMTtcclxuICAgIGNvbnN0IFIgPSBmdWRnZSAqIHRoaXMucmFkaXVzO1xyXG4gICAgY29uc3QgaCA9IHRoaXMuZGlhbWV0ZXIgLyAyOyAgICAgICAgICAvL2ggPSBoZWlnaHQgPSByYWRpdXMgb2YgbGVuc1xyXG4gICAgLy8gIHRlbXBvcmFyeSBmaXhlZCBmb3IgdGhldGEsIHNlZSAjMTIgICBzZXQgdGhlIG1heGltdW0gcmF0aW8gdG8gYmUgb25lXHJcbiAgICBjb25zdCB0aGV0YSA9IE1hdGguYXNpbiggVXRpbHMuY2xhbXAoIGggLyBSLCAtMSwgMSApICk7IC8vbWFnbml0dWRlIG9mIHN0YXJ0QW5nbGUgYW5kIGVuZEFuZ2xlXHJcbiAgICBjb25zdCBDID0gUiAqIE1hdGguY29zKCB0aGV0YSApOyAgICAgICAgICAgICAgICAgICAgICAvL2Rpc3RhbmNlIGZyb20gY2VudGVyIG9mIGxlbnMgdG8gY2VudGVyIG9mIGN1cnZhdHVyZSBvZiBsZW5zIHN1cmZhY2VcclxuICAgIGNvbnN0IHNoYXBlID0gbmV3IFNoYXBlKCk7XHJcbiAgICBpZiAoIHRoaXMudHlwZSA9PT0gVHlwZS5ESVZFUkdJTkdfTUlSUk9SICkge1xyXG4gICAgICBzaGFwZS5hcmMoIEMsIDAsIFIsIC1NYXRoLlBJICsgdGhldGEsIC1NYXRoLlBJIC0gdGhldGEsIGZhbHNlICk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgc2hhcGUuYXJjKCAtQywgMCwgUiwgdGhldGEsIC10aGV0YSwgdHJ1ZSApO1xyXG4gICAgfVxyXG4gICAgdGhpcy5wYXRoLnN0cm9rZSA9ICd3aGl0ZSc7XHJcbiAgICB0aGlzLnBhdGgubGluZVdpZHRoID0gODtcclxuICAgIC8vdGhpcy5wYXRoLm9wYWNpdHkgPSAwLjk1O1xyXG4gICAgdGhpcy5wYXRoLnNldFNoYXBlKCBzaGFwZSApO1xyXG4gICAgLy92YXIgdyA9IDIwO1xyXG4gICAgLy90aGlzLm1pcnJvckJhY2tHcmFwaGljID0gbmV3IFJlY3RhbmdsZSggMCwgLWgsIHcsIDIqaCwge2ZpbGw6J3JlZCd9ICk7XHJcbiAgICB0aGlzLm1pcnJvckJhY2tHcmFwaGljLnNldFNjYWxlTWFnbml0dWRlKCAxLCAyICogaCApO1xyXG4gICAgdGhpcy5taXJyb3JCYWNrR3JhcGhpYy52aXNpYmxlID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERyYXdzIGEgcGxhbmUgbWlycm9yXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBkcmF3UGxhbmVNaXJyb3IoKSB7XHJcbiAgICB0aGlzLnJlbW92ZUFsbENoaWxkcmVuKCk7XHJcbiAgICBjb25zdCB3ID0gMjA7XHJcbiAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmRpYW1ldGVyO1xyXG4gICAgLy9SZWN0YW5nbGUoIHgsIHksIHdpZHRoLCBoZWlnaHQsIGFyY1dpZHRoLCBhcmNIZWlnaHQsIG9wdGlvbnMgKVxyXG4gICAgY29uc3QgbWFza0dyYXBoaWMgPSBuZXcgUmVjdGFuZ2xlKCAwLCAtaGVpZ2h0IC8gMiwgdywgaGVpZ2h0LCB7IGZpbGw6ICdyZWQnIH0gKTtcclxuICAgIC8vTGluZSggeDEsIHkxLCB4MiwgeTIsIG9wdGlvbnMgKVxyXG4gICAgY29uc3QgbGluZUdyYXBoaWMgPSBuZXcgTGluZSggMCwgLWhlaWdodCAvIDIsIDAsIGhlaWdodCAvIDIsIHsgc3Ryb2tlOiAnI0ZGRicsIGxpbmVXaWR0aDogNCB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBtYXNrR3JhcGhpYyApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggbGluZUdyYXBoaWMgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGRyYXcgYSBiYWNrZ3JvdW5kIG1hc2tcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIGRyYXdNYXNrKCkge1xyXG4gICAgdGhpcy5yZW1vdmVBbGxDaGlsZHJlbigpO1xyXG4gICAgY29uc3QgdyA9IDIwO1xyXG4gICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5kaWFtZXRlcjtcclxuICAgIGNvbnN0IG1hc2tHcmFwaGljID0gbmV3IFJlY3RhbmdsZSggMCwgLWhlaWdodCAvIDIsIHcsIGhlaWdodCwgeyBmaWxsOiAnZ3JlZW4nIH0gKTtcclxuICAgIGNvbnN0IGxpbmVHcmFwaGljID0gbmV3IExpbmUoIDAsIC1oZWlnaHQgLyAyLCAwLCBoZWlnaHQgLyAyLCB7IHN0cm9rZTogJ2JsYWNrJywgbGluZVdpZHRoOiA0IH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIG1hc2tHcmFwaGljICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBsaW5lR3JhcGhpYyApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0cyB0aGUgZGlhbWV0ZXIgb2YgdGhlIGNvbXBvbmVudFxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkaWFtZXRlclxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBzZXREaWFtZXRlciggZGlhbWV0ZXIgKSB7XHJcbiAgICB0aGlzLmRpYW1ldGVyID0gZGlhbWV0ZXI7XHJcbiAgICB0aGlzLm1ha2VEcmF3aW5nKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXRzIHRoZSByYWRpdXMgb2YgY3VydmF0dXJlIG9mIGNvbXBvbmVudFxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBSXHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG4gIHNldFJhZGl1cyggUiApIHtcclxuICAgIHRoaXMucmFkaXVzID0gUjtcclxuICAgIHRoaXMubWFrZURyYXdpbmcoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIGluZGV4IG9mIHJlZnJhY3Rpb24gb2YgdGhlIGNvbXBvbmVudFxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleFxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBzZXRJbmRleCggaW5kZXggKSB7XHJcbiAgICB0aGlzLmluZGV4ID0gaW5kZXg7XHJcbiAgICB0aGlzLm1ha2VEcmF3aW5nKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkaXN0YW5jZVxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBzZXRGb2NhbFBvaW50UG9zaXRpb25zKCBkaXN0YW5jZSApIHtcclxuICAgIHRoaXMuZm9jYWxQdExlZnQueCA9IC1kaXN0YW5jZTtcclxuICAgIHRoaXMuZm9jYWxQdFJpZ2h0LnggPSBkaXN0YW5jZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBpc1Zpc2libGVcclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgc2V0Rm9jYWxQb2ludHNWaXNpYmlsaXR5KCBpc1Zpc2libGUgKSB7XHJcbiAgICB0aGlzLmZvY2FsUHRMZWZ0LnZpc2libGUgPSBpc1Zpc2libGU7XHJcbiAgICB0aGlzLmZvY2FsUHRSaWdodC52aXNpYmxlID0gaXNWaXNpYmxlO1xyXG4gIH1cclxufVxyXG5cclxub3B0aWNzTGFiLnJlZ2lzdGVyKCAnQ29tcG9uZW50R3JhcGhpYycsIENvbXBvbmVudEdyYXBoaWMgKTtcclxuZXhwb3J0IGRlZmF1bHQgQ29tcG9uZW50R3JhcGhpYzsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxLQUFLLE1BQU0sNkJBQTZCO0FBQy9DLFNBQVNDLEtBQUssUUFBUSxnQ0FBZ0M7QUFDdEQs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