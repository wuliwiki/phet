// Copyright 2014-2022, University of Colorado Boulder

/**
 * Magnet field lines for 'Faradays Law' simulation.
 *
 * @author Vasily Shakhov (MLearner)
 * @author Sam Reid (PhET Interactive Simulations)
 */

import { Shape } from '../../../../kite/js/imports.js';
import merge from '../../../../phet-core/js/merge.js';
import { Node, Path } from '../../../../scenery/js/imports.js';
import faradaysLaw from '../../faradaysLaw.js';

// constants
const ARROW_WIDTH = 16;
const ARROW_HEIGHT = 18;

// describes ellipse lines properties (sizes + arrows)
const LINE_DESCRIPTION = [{
  a: 600,
  b: 300,
  arrowPositions: [Math.PI / 3.5, Math.PI - Math.PI / 3.5]
}, {
  a: 350,
  b: 125,
  arrowPositions: [Math.PI / 7, Math.PI - Math.PI / 7]
}, {
  a: 180,
  b: 50,
  arrowPositions: [-Math.PI / 2]
}, {
  a: 90,
  b: 25,
  arrowPositions: [-Math.PI / 2]
}];
class MagnetFieldLines extends Node {
  /**
   * @param {Magnet} magnet - magnet model
   * @param {Tandem} tandem
   */
  constructor(magnet, tandem) {
    super({
      tandem: tandem,
      children: [createSideFieldLines(magnet.orientationProperty, +1),
      // top
      createSideFieldLines(magnet.orientationProperty, -1) // bottom
      ]
    });

    magnet.fieldLinesVisibleProperty.linkAttribute(this, 'visible');
  }
}

/**
 * Creates a single arrow
 * @param {Object} [options]
 * @returns {Path}
 */
const createArrow = options => new Path(new Shape().moveTo(-ARROW_WIDTH, -ARROW_HEIGHT / 2).lineTo(0, 0).lineTo(-ARROW_WIDTH, ARROW_HEIGHT / 2), {
  stroke: options.stroke,
  lineWidth: options.lineWidth
});

/**
 * Create ellipse with arrows on it.
 * @param {number} radiusX - major axis of ellipse
 * @param {number} radiusY - minor axis of ellipse
 * @param {number[]} arrowPositions - array of angle positions of arrows on ellipse
 * @param {Property.<OrientationEnum>} orientationProperty - is magnet flipped
 * @param {Object} [options]
 * @returns {Node}
 */
const createArcWithArrow = (radiusX, radiusY, arrowPositions, orientationProperty, options) => {
  const arcWithArrow = new Node();
  options = merge({
    stroke: '#ffffff',
    lineWidth: 3
  }, options);

  // arc
  const ellipticalShape = new Shape().ellipticalArc(0, 0, radiusX, radiusY, 0, 0, 2 * Math.PI);
  arcWithArrow.addChild(new Path(ellipticalShape, {
    stroke: options.stroke,
    lineWidth: options.lineWidth
  }));

  // arrows on arc
  arrowPositions.forEach(angle => {
    const arrow = createArrow({
      stroke: options.stroke,
      lineWidth: options.lineWidth
    });
    const arrowPosition = ellipticalShape.getLastSegment().positionAtAngle(angle);
    arrow.right = arrowPosition.x;
    arrow.centerY = arrowPosition.y;
    const arrowTangent = ellipticalShape.getLastSegment().tangentAtAngle(angle);
    let rotationAngle = Math.atan(arrowTangent.y / arrowTangent.x); // angle of tangent to an ellipse

    if (arrowPosition.y > 0) {
      rotationAngle += Math.PI;
    }
    arrow.rotateAround(arrowPosition, rotationAngle);
    orientationProperty.lazyLink(() => {
      arrow.rotateAround(arrowPosition, Math.PI);
    });
    arcWithArrow.addChild(arrow);
  });
  return arcWithArrow;
};

/**
 * Create half of all magnet field lines
 * @param {Property.<OrientationEnum>} orientationProperty - is magnet flipped
 * @param {number} scaleY - +1/-1 bottom node is vertically flipped
 * @returns {Node}
 */
const createSideFieldLines = (orientationProperty, scaleY) => {
  const sideFieldLinesContainer = new Node();
  const dy = 3;

  // each ellipse change a bit position to show a near constant field
  LINE_DESCRIPTION.forEach((line, index) => {
    const arc = createArcWithArrow(line.a, line.b, line.arrowPositions, orientationProperty);
    arc.bottom = 2 - index * dy;
    arc.centerX = 0;
    sideFieldLinesContainer.addChild(arc);
  });
  sideFieldLinesContainer.scale(1, scaleY);
  return sideFieldLinesContainer;
};
faradaysLaw.register('MagnetFieldLines', MagnetFieldLines);
export default MagnetFieldLines;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTaGFwZSIsIm1lcmdlIiwiTm9kZSIsIlBhdGgiLCJmYXJhZGF5c0xhdyIsIkFSUk9XX1dJRFRIIiwiQVJST1dfSEVJR0hUIiwiTElORV9ERVNDUklQVElPTiIsImEiLCJiIiwiYXJyb3dQb3NpdGlvbnMiLCJNYXRoIiwiUEkiLCJNYWduZXRGaWVsZExpbmVzIiwiY29uc3RydWN0b3IiLCJtYWduZXQiLCJ0YW5kZW0iLCJjaGlsZHJlbiIsImNyZWF0ZVNpZGVGaWVsZExpbmVzIiwib3JpZW50YXRpb25Qcm9wZXJ0eSIsImZpZWxkTGluZXNWaXNpYmxlUHJvcGVydHkiLCJsaW5rQXR0cmlidXRlIiwiY3JlYXRlQXJyb3ciLCJvcHRpb25zIiwibW92ZVRvIiwibGluZVRvIiwic3Ryb2tlIiwibGluZVdpZHRoIiwiY3JlYXRlQXJjV2l0aEFycm93IiwicmFkaXVzWCIsInJhZGl1c1kiLCJhcmNXaXRoQXJyb3ciLCJlbGxpcHRpY2FsU2hhcGUiLCJlbGxpcHRpY2FsQXJjIiwiYWRkQ2hpbGQiLCJmb3JFYWNoIiwiYW5nbGUiLCJhcnJvdyIsImFycm93UG9zaXRpb24iLCJnZXRMYXN0U2VnbWVudCIsInBvc2l0aW9uQXRBbmdsZSIsInJpZ2h0IiwieCIsImNlbnRlclkiLCJ5IiwiYXJyb3dUYW5nZW50IiwidGFuZ2VudEF0QW5nbGUiLCJyb3RhdGlvbkFuZ2xlIiwiYXRhbiIsInJvdGF0ZUFyb3VuZCIsImxhenlMaW5rIiwic2NhbGVZIiwic2lkZUZpZWxkTGluZXNDb250YWluZXIiLCJkeSIsImxpbmUiLCJpbmRleCIsImFyYyIsImJvdHRvbSIsImNlbnRlclgiLCJzY2FsZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiTWFnbmV0RmllbGRMaW5lcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNC0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBNYWduZXQgZmllbGQgbGluZXMgZm9yICdGYXJhZGF5cyBMYXcnIHNpbXVsYXRpb24uXHJcbiAqXHJcbiAqIEBhdXRob3IgVmFzaWx5IFNoYWtob3YgKE1MZWFybmVyKVxyXG4gKiBAYXV0aG9yIFNhbSBSZWlkIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSAnLi4vLi4vLi4vLi4va2l0ZS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IG1lcmdlIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9tZXJnZS5qcyc7XHJcbmltcG9ydCB7IE5vZGUsIFBhdGggfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgZmFyYWRheXNMYXcgZnJvbSAnLi4vLi4vZmFyYWRheXNMYXcuanMnO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IEFSUk9XX1dJRFRIID0gMTY7XHJcbmNvbnN0IEFSUk9XX0hFSUdIVCA9IDE4O1xyXG5cclxuLy8gZGVzY3JpYmVzIGVsbGlwc2UgbGluZXMgcHJvcGVydGllcyAoc2l6ZXMgKyBhcnJvd3MpXHJcbmNvbnN0IExJTkVfREVTQ1JJUFRJT04gPSBbXHJcbiAgeyBhOiA2MDAsIGI6IDMwMCwgYXJyb3dQb3NpdGlvbnM6IFsgTWF0aC5QSSAvIDMuNSwgTWF0aC5QSSAtIE1hdGguUEkgLyAzLjUgXSB9LFxyXG4gIHsgYTogMzUwLCBiOiAxMjUsIGFycm93UG9zaXRpb25zOiBbIE1hdGguUEkgLyA3LCBNYXRoLlBJIC0gTWF0aC5QSSAvIDcgXSB9LFxyXG4gIHsgYTogMTgwLCBiOiA1MCwgYXJyb3dQb3NpdGlvbnM6IFsgLU1hdGguUEkgLyAyIF0gfSxcclxuICB7IGE6IDkwLCBiOiAyNSwgYXJyb3dQb3NpdGlvbnM6IFsgLU1hdGguUEkgLyAyIF0gfVxyXG5dO1xyXG5cclxuY2xhc3MgTWFnbmV0RmllbGRMaW5lcyBleHRlbmRzIE5vZGUge1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge01hZ25ldH0gbWFnbmV0IC0gbWFnbmV0IG1vZGVsXHJcbiAgICogQHBhcmFtIHtUYW5kZW19IHRhbmRlbVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBtYWduZXQsIHRhbmRlbSApIHtcclxuICAgIHN1cGVyKCB7XHJcbiAgICAgIHRhbmRlbTogdGFuZGVtLFxyXG4gICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgIGNyZWF0ZVNpZGVGaWVsZExpbmVzKCBtYWduZXQub3JpZW50YXRpb25Qcm9wZXJ0eSwgKzEgKSwgLy8gdG9wXHJcbiAgICAgICAgY3JlYXRlU2lkZUZpZWxkTGluZXMoIG1hZ25ldC5vcmllbnRhdGlvblByb3BlcnR5LCAtMSApIC8vIGJvdHRvbVxyXG4gICAgICBdXHJcbiAgICB9ICk7XHJcbiAgICBtYWduZXQuZmllbGRMaW5lc1Zpc2libGVQcm9wZXJ0eS5saW5rQXR0cmlidXRlKCB0aGlzLCAndmlzaWJsZScgKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgc2luZ2xlIGFycm93XHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cclxuICogQHJldHVybnMge1BhdGh9XHJcbiAqL1xyXG5jb25zdCBjcmVhdGVBcnJvdyA9IG9wdGlvbnMgPT4gbmV3IFBhdGgoXHJcbiAgbmV3IFNoYXBlKClcclxuICAgIC5tb3ZlVG8oIC1BUlJPV19XSURUSCwgLUFSUk9XX0hFSUdIVCAvIDIgKVxyXG4gICAgLmxpbmVUbyggMCwgMCApXHJcbiAgICAubGluZVRvKCAtQVJST1dfV0lEVEgsIEFSUk9XX0hFSUdIVCAvIDIgKSxcclxuICB7XHJcbiAgICBzdHJva2U6IG9wdGlvbnMuc3Ryb2tlLFxyXG4gICAgbGluZVdpZHRoOiBvcHRpb25zLmxpbmVXaWR0aFxyXG4gIH1cclxuKTtcclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgZWxsaXBzZSB3aXRoIGFycm93cyBvbiBpdC5cclxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1c1ggLSBtYWpvciBheGlzIG9mIGVsbGlwc2VcclxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1c1kgLSBtaW5vciBheGlzIG9mIGVsbGlwc2VcclxuICogQHBhcmFtIHtudW1iZXJbXX0gYXJyb3dQb3NpdGlvbnMgLSBhcnJheSBvZiBhbmdsZSBwb3NpdGlvbnMgb2YgYXJyb3dzIG9uIGVsbGlwc2VcclxuICogQHBhcmFtIHtQcm9wZXJ0eS48T3JpZW50YXRpb25FbnVtPn0gb3JpZW50YXRpb25Qcm9wZXJ0eSAtIGlzIG1hZ25ldCBmbGlwcGVkXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cclxuICogQHJldHVybnMge05vZGV9XHJcbiAqL1xyXG5jb25zdCBjcmVhdGVBcmNXaXRoQXJyb3cgPSAoIHJhZGl1c1gsIHJhZGl1c1ksIGFycm93UG9zaXRpb25zLCBvcmllbnRhdGlvblByb3BlcnR5LCBvcHRpb25zICkgPT4ge1xyXG4gIGNvbnN0IGFyY1dpdGhBcnJvdyA9IG5ldyBOb2RlKCk7XHJcbiAgb3B0aW9ucyA9IG1lcmdlKCB7XHJcbiAgICBzdHJva2U6ICcjZmZmZmZmJyxcclxuICAgIGxpbmVXaWR0aDogM1xyXG4gIH0sIG9wdGlvbnMgKTtcclxuXHJcbiAgLy8gYXJjXHJcbiAgY29uc3QgZWxsaXB0aWNhbFNoYXBlID0gbmV3IFNoYXBlKCkuZWxsaXB0aWNhbEFyYyggMCwgMCwgcmFkaXVzWCwgcmFkaXVzWSwgMCwgMCwgMiAqIE1hdGguUEkgKTtcclxuICBhcmNXaXRoQXJyb3cuYWRkQ2hpbGQoIG5ldyBQYXRoKCBlbGxpcHRpY2FsU2hhcGUsIHtcclxuICAgIHN0cm9rZTogb3B0aW9ucy5zdHJva2UsXHJcbiAgICBsaW5lV2lkdGg6IG9wdGlvbnMubGluZVdpZHRoXHJcbiAgfSApICk7XHJcblxyXG4gIC8vIGFycm93cyBvbiBhcmNcclxuICBhcnJvd1Bvc2l0aW9ucy5mb3JFYWNoKCBhbmdsZSA9PiB7XHJcbiAgICBjb25zdCBhcnJvdyA9IGNyZWF0ZUFycm93KCB7XHJcbiAgICAgIHN0cm9rZTogb3B0aW9ucy5zdHJva2UsXHJcbiAgICAgIGxpbmVXaWR0aDogb3B0aW9ucy5saW5lV2lkdGhcclxuICAgIH0gKTtcclxuICAgIGNvbnN0IGFycm93UG9zaXRpb24gPSBlbGxpcHRpY2FsU2hhcGUuZ2V0TGFzdFNlZ21lbnQoKS5wb3NpdGlvbkF0QW5nbGUoIGFuZ2xlICk7XHJcbiAgICBhcnJvdy5yaWdodCA9IGFycm93UG9zaXRpb24ueDtcclxuICAgIGFycm93LmNlbnRlclkgPSBhcnJvd1Bvc2l0aW9uLnk7XHJcblxyXG4gICAgY29uc3QgYXJyb3dUYW5nZW50ID0gZWxsaXB0aWNhbFNoYXBlLmdldExhc3RTZWdtZW50KCkudGFuZ2VudEF0QW5nbGUoIGFuZ2xlICk7XHJcbiAgICBsZXQgcm90YXRpb25BbmdsZSA9IE1hdGguYXRhbiggYXJyb3dUYW5nZW50LnkgLyBhcnJvd1RhbmdlbnQueCApOyAvLyBhbmdsZSBvZiB0YW5nZW50IHRvIGFuIGVsbGlwc2VcclxuXHJcbiAgICBpZiAoIGFycm93UG9zaXRpb24ueSA+IDAgKSB7XHJcbiAgICAgIHJvdGF0aW9uQW5nbGUgKz0gTWF0aC5QSTtcclxuICAgIH1cclxuXHJcbiAgICBhcnJvdy5yb3RhdGVBcm91bmQoIGFycm93UG9zaXRpb24sIHJvdGF0aW9uQW5nbGUgKTtcclxuXHJcbiAgICBvcmllbnRhdGlvblByb3BlcnR5LmxhenlMaW5rKCAoKSA9PiB7XHJcbiAgICAgIGFycm93LnJvdGF0ZUFyb3VuZCggYXJyb3dQb3NpdGlvbiwgTWF0aC5QSSApO1xyXG4gICAgfSApO1xyXG4gICAgYXJjV2l0aEFycm93LmFkZENoaWxkKCBhcnJvdyApO1xyXG4gIH0gKTtcclxuXHJcbiAgcmV0dXJuIGFyY1dpdGhBcnJvdztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgaGFsZiBvZiBhbGwgbWFnbmV0IGZpZWxkIGxpbmVzXHJcbiAqIEBwYXJhbSB7UHJvcGVydHkuPE9yaWVudGF0aW9uRW51bT59IG9yaWVudGF0aW9uUHJvcGVydHkgLSBpcyBtYWduZXQgZmxpcHBlZFxyXG4gKiBAcGFyYW0ge251bWJlcn0gc2NhbGVZIC0gKzEvLTEgYm90dG9tIG5vZGUgaXMgdmVydGljYWxseSBmbGlwcGVkXHJcbiAqIEByZXR1cm5zIHtOb2RlfVxyXG4gKi9cclxuY29uc3QgY3JlYXRlU2lkZUZpZWxkTGluZXMgPSAoIG9yaWVudGF0aW9uUHJvcGVydHksIHNjYWxlWSApID0+IHtcclxuICBjb25zdCBzaWRlRmllbGRMaW5lc0NvbnRhaW5lciA9IG5ldyBOb2RlKCk7XHJcblxyXG4gIGNvbnN0IGR5ID0gMztcclxuXHJcbiAgLy8gZWFjaCBlbGxpcHNlIGNoYW5nZSBhIGJpdCBwb3NpdGlvbiB0byBzaG93IGEgbmVhciBjb25zdGFudCBmaWVsZFxyXG4gIExJTkVfREVTQ1JJUFRJT04uZm9yRWFjaCggKCBsaW5lLCBpbmRleCApID0+IHtcclxuICAgIGNvbnN0IGFyYyA9IGNyZWF0ZUFyY1dpdGhBcnJvdyggbGluZS5hLCBsaW5lLmIsIGxpbmUuYXJyb3dQb3NpdGlvbnMsIG9yaWVudGF0aW9uUHJvcGVydHkgKTtcclxuICAgIGFyYy5ib3R0b20gPSAyIC0gaW5kZXggKiBkeTtcclxuICAgIGFyYy5jZW50ZXJYID0gMDtcclxuICAgIHNpZGVGaWVsZExpbmVzQ29udGFpbmVyLmFkZENoaWxkKCBhcmMgKTtcclxuICB9ICk7XHJcbiAgc2lkZUZpZWxkTGluZXNDb250YWluZXIuc2NhbGUoIDEsIHNjYWxlWSApO1xyXG4gIHJldHVybiBzaWRlRmllbGRMaW5lc0NvbnRhaW5lcjtcclxufTtcclxuXHJcbmZhcmFkYXlzTGF3LnJlZ2lzdGVyKCAnTWFnbmV0RmllbGRMaW5lcycsIE1hZ25ldEZpZWxkTGluZXMgKTtcclxuZXhwb3J0IGRlZmF1bHQgTWFnbmV0RmllbGRMaW5lczsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxTQUFTQSxLQUFLLFFBQVEsZ0NBQWdDO0FBQ3RELE9BQU9DLEtBQUssTUFBTSxtQ0FBbUM7QUFDckQsU0FBU0MsSUFBSSxFQUFFQyxJQUFJLFFBQVEsbUNBQW1DO0FBQzlELE9BQU9DLFdBQVcsTUFBTSxzQkFBc0I7O0FBRTlDO0FBQ0EsTUFBTUMsV0FBVyxHQUFHLEVBQUU7QUFDdEIsTUFBTUMsWUFBWSxHQUFHLEVBQUU7O0FBRXZCO0FBQ0EsTUFBTUMsZ0JBQWdCLEdBQUcsQ0FDdkI7RUFBRUMsQ0FBQyxFQUFFLEdBQUc7RUFBRUMsQ0FBQyxFQUFFLEdBQUc7RUFBRUMsY0FBYyxFQUFFLENBQUVDLElBQUksQ0FBQ0MsRUFBRSxHQUFHLEdBQUcsRUFBRUQsSUFBSSxDQUFDQyxFQUFFLEdBQUdELElBQUksQ0FBQ0MsRUFBRSxHQUFHLEdBQUc7QUFBRyxDQUFDLEVBQzlFO0VBQUVKLENBQUMsRUFBRSxHQUFHO0VBQUVDLENBQUMsRUFBRSxHQUFHO0VBQUVDLGNBQWMsRUFBRSxDQUFFQyxJQUFJLENBQUNDLEVBQUUsR0FBRyxDQUFDLEVBQUVELElBQUksQ0FBQ0MsRUFBRSxHQUFHRCxJQUFJLENBQUNDLEVBQUUsR0FBRyxDQUFDO0FBQUcsQ0FBQyxFQUMxRTtFQUFFSixDQUFDLEVBQUUsR0FBRztFQUFFQyxDQUFDLEVBQUUsRUFBRTtFQUFFQyxjQUFjLEVBQUUsQ0FBRSxDQUFDQyxJQUFJLENBQUNDLEVBQUUsR0FBRyxDQUFDO0FBQUcsQ0FBQyxFQUNuRDtFQUFFSixDQUFDLEVBQUUsRUFBRTtFQUFFQyxDQUFDLEVBQUUsRUFBRTtFQUFFQyxjQUFjLEVBQUUsQ0FBRSxDQUFDQyxJQUFJLENBQUNDLEVBQUUsR0FBRyxDQUFDO0FBQUcsQ0FBQyxDQUNuRDtBQUVELE1BQU1DLGdCQUFnQixTQUFTWCxJQUFJLENBQUM7RUFFbEM7QUFDRjtBQUNBO0FBQ0E7RUFDRVksV0FBV0EsQ0FBRUMsTUFBTSxFQUFFQyxNQUFNLEVBQUc7SUFDNUIsS0FBSyxDQUFFO01BQ0xBLE1BQU0sRUFBRUEsTUFBTTtNQUNkQyxRQUFRLEVBQUUsQ0FDUkMsb0JBQW9CLENBQUVILE1BQU0sQ0FBQ0ksbUJBQW1CLEVBQUUsQ0FBQyxDQUFFLENBQUM7TUFBRTtNQUN4REQsb0JBQW9CLENBQUVILE1BQU0sQ0FBQ0ksbUJBQW1CLEVBQUUsQ0FBQyxDQUFFLENBQUMsQ0FBQztNQUFBO0lBRTNELENBQUUsQ0FBQzs7SUFDSEosTUFBTSxDQUFDSyx5QkFBeUIsQ0FBQ0MsYUFBYSxDQUFFLElBQUksRUFBRSxTQUFVLENBQUM7RUFDbkU7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUMsV0FBVyxHQUFHQyxPQUFPLElBQUksSUFBSXBCLElBQUksQ0FDckMsSUFBSUgsS0FBSyxDQUFDLENBQUMsQ0FDUndCLE1BQU0sQ0FBRSxDQUFDbkIsV0FBVyxFQUFFLENBQUNDLFlBQVksR0FBRyxDQUFFLENBQUMsQ0FDekNtQixNQUFNLENBQUUsQ0FBQyxFQUFFLENBQUUsQ0FBQyxDQUNkQSxNQUFNLENBQUUsQ0FBQ3BCLFdBQVcsRUFBRUMsWUFBWSxHQUFHLENBQUUsQ0FBQyxFQUMzQztFQUNFb0IsTUFBTSxFQUFFSCxPQUFPLENBQUNHLE1BQU07RUFDdEJDLFNBQVMsRUFBRUosT0FBTyxDQUFDSTtBQUNyQixDQUNGLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUMsa0JBQWtCLEdBQUdBLENBQUVDLE9BQU8sRUFBRUMsT0FBTyxFQUFFcEIsY0FBYyxFQUFFUyxtQkFBbUIsRUFBRUksT0FBTyxLQUFNO0VBQy9GLE1BQU1RLFlBQVksR0FBRyxJQUFJN0IsSUFBSSxDQUFDLENBQUM7RUFDL0JxQixPQUFPLEdBQUd0QixLQUFLLENBQUU7SUFDZnlCLE1BQU0sRUFBRSxTQUFTO0lBQ2pCQyxTQUFTLEVBQUU7RUFDYixDQUFDLEVBQUVKLE9BQVEsQ0FBQzs7RUFFWjtFQUNBLE1BQU1TLGVBQWUsR0FBRyxJQUFJaEMsS0FBSyxDQUFDLENBQUMsQ0FBQ2lDLGFBQWEsQ0FBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFSixPQUFPLEVBQUVDLE9BQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBR25CLElBQUksQ0FBQ0MsRUFBRyxDQUFDO0VBQzlGbUIsWUFBWSxDQUFDRyxRQUFRLENBQUUsSUFBSS9CLElBQUksQ0FBRTZCLGVBQWUsRUFBRTtJQUNoRE4sTUFBTSxFQUFFSCxPQUFPLENBQUNHLE1BQU07SUFDdEJDLFNBQVMsRUFBRUosT0FBTyxDQUFDSTtFQUNyQixDQUFFLENBQUUsQ0FBQzs7RUFFTDtFQUNBakIsY0FBYyxDQUFDeUIsT0FBTyxDQUFFQyxLQUFLLElBQUk7SUFDL0IsTUFBTUMsS0FBSyxHQUFHZixXQUFXLENBQUU7TUFDekJJLE1BQU0sRUFBRUgsT0FBTyxDQUFDRyxNQUFNO01BQ3RCQyxTQUFTLEVBQUVKLE9BQU8sQ0FBQ0k7SUFDckIsQ0FBRSxDQUFDO0lBQ0gsTUFBTVcsYUFBYSxHQUFHTixlQUFlLENBQUNPLGNBQWMsQ0FBQyxDQUFDLENBQUNDLGVBQWUsQ0FBRUosS0FBTSxDQUFDO0lBQy9FQyxLQUFLLENBQUNJLEtBQUssR0FBR0gsYUFBYSxDQUFDSSxDQUFDO0lBQzdCTCxLQUFLLENBQUNNLE9BQU8sR0FBR0wsYUFBYSxDQUFDTSxDQUFDO0lBRS9CLE1BQU1DLFlBQVksR0FBR2IsZUFBZSxDQUFDTyxjQUFjLENBQUMsQ0FBQyxDQUFDTyxjQUFjLENBQUVWLEtBQU0sQ0FBQztJQUM3RSxJQUFJVyxhQUFhLEdBQUdwQyxJQUFJLENBQUNxQyxJQUFJLENBQUVILFlBQVksQ0FBQ0QsQ0FBQyxHQUFHQyxZQUFZLENBQUNILENBQUUsQ0FBQyxDQUFDLENBQUM7O0lBRWxFLElBQUtKLGFBQWEsQ0FBQ00sQ0FBQyxHQUFHLENBQUMsRUFBRztNQUN6QkcsYUFBYSxJQUFJcEMsSUFBSSxDQUFDQyxFQUFFO0lBQzFCO0lBRUF5QixLQUFLLENBQUNZLFlBQVksQ0FBRVgsYUFBYSxFQUFFUyxhQUFjLENBQUM7SUFFbEQ1QixtQkFBbUIsQ0FBQytCLFFBQVEsQ0FBRSxNQUFNO01BQ2xDYixLQUFLLENBQUNZLFlBQVksQ0FBRVgsYUFBYSxFQUFFM0IsSUFBSSxDQUFDQyxFQUFHLENBQUM7SUFDOUMsQ0FBRSxDQUFDO0lBQ0htQixZQUFZLENBQUNHLFFBQVEsQ0FBRUcsS0FBTSxDQUFDO0VBQ2hDLENBQUUsQ0FBQztFQUVILE9BQU9OLFlBQVk7QUFDckIsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNYixvQkFBb0IsR0FBR0EsQ0FBRUMsbUJBQW1CLEVBQUVnQyxNQUFNLEtBQU07RUFDOUQsTUFBTUMsdUJBQXVCLEdBQUcsSUFBSWxELElBQUksQ0FBQyxDQUFDO0VBRTFDLE1BQU1tRCxFQUFFLEdBQUcsQ0FBQzs7RUFFWjtFQUNBOUMsZ0JBQWdCLENBQUM0QixPQUFPLENBQUUsQ0FBRW1CLElBQUksRUFBRUMsS0FBSyxLQUFNO0lBQzNDLE1BQU1DLEdBQUcsR0FBRzVCLGtCQUFrQixDQUFFMEIsSUFBSSxDQUFDOUMsQ0FBQyxFQUFFOEMsSUFBSSxDQUFDN0MsQ0FBQyxFQUFFNkMsSUFBSSxDQUFDNUMsY0FBYyxFQUFFUyxtQkFBb0IsQ0FBQztJQUMxRnFDLEdBQUcsQ0FBQ0MsTUFBTSxHQUFHLENBQUMsR0FBR0YsS0FBSyxHQUFHRixFQUFFO0lBQzNCRyxHQUFHLENBQUNFLE9BQU8sR0FBRyxDQUFDO0lBQ2ZOLHVCQUF1QixDQUFDbEIsUUFBUSxDQUFFc0IsR0FBSSxDQUFDO0VBQ3pDLENBQUUsQ0FBQztFQUNISix1QkFBdUIsQ0FBQ08sS0FBSyxDQUFFLENBQUMsRUFBRVIsTUFBTyxDQUFDO0VBQzFDLE9BQU9DLHVCQUF1QjtBQUNoQyxDQUFDO0FBRURoRCxXQUFXLENBQUN3RCxRQUFRLENBQUUsa0JBQWtCLEVBQUUvQyxnQkFBaUIsQ0FBQztBQUM1RCxlQUFlQSxnQkFBZ0IifQ==