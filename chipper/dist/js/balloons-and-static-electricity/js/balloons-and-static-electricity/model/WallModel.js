// Copyright 2013-2021, University of Colorado Boulder

/**
 * Model of a wall. Wall have electrons which can change position under force from balloons.
 *
 * @author Vasily Shakhov (Mlearner)
 */

import BooleanProperty from '../../../../axon/js/BooleanProperty.js';
import Bounds2 from '../../../../dot/js/Bounds2.js';
import Utils from '../../../../dot/js/Utils.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import Tandem from '../../../../tandem/js/Tandem.js';
import balloonsAndStaticElectricity from '../../balloonsAndStaticElectricity.js';
import BalloonModel from './BalloonModel.js';
import MovablePointChargeModel from './MovablePointChargeModel.js';
import PointChargeModel from './PointChargeModel.js';

// constants
// when charge displacement is larger than this, there is an appreciable induced charge
const FORCE_MAGNITUDE_THRESHOLD = 2;
class WallModel {
  /**
   * @param {number} x
   * @param {number} width
   * @param {number} height
   * @param {Balloon} yellowBalloon
   * @param {Balloon} greenBalloon
   * @param {Tandem} tandem
   */
  constructor(x, width, height, yellowBalloon, greenBalloon, tandem) {
    //------------------------------------------------
    // Properties of the model.  All user settings belong in the model, whether or not they are part of the physical model
    this.isVisibleProperty = new BooleanProperty(true, {
      tandem: tandem.createTandem('isVisibleProperty')
    });

    // @public (read-only)
    this.y = 0; // the top position of the wall
    this.x = x; // the left position of the wall
    this.numX = 3; // number of columns with charges
    this.numY = 18; // number of rows with charges
    this.width = width;
    this.height = height;

    // @public {Bounds2} bounds containing the wall
    this.bounds = new Bounds2(this.x, this.y, this.x + width, this.y + height);

    // @private {number} - scaling factors for calculating positions for induced charge
    this.dx = Utils.roundSymmetric(width / this.numX + 2);
    this.dy = height / this.numY;

    // @private {array.<PointChargeModel>}
    this.plusCharges = [];

    // @private {array.<MovablePointChargeModel>}
    this.minusCharges = [];
    const minusCharges = tandem.createTandem('minusCharges');
    let index = 0;
    for (let i = 0; i < this.numX; i++) {
      for (let k = 0; k < this.numY; k++) {
        // plus
        const position = this.calculatePosition(i, k);
        const plusCharge = new PointChargeModel(x + position[0], position[1], Tandem.OPT_OUT, false);
        this.plusCharges.push(plusCharge);

        // minus
        const minusCharge = new MovablePointChargeModel(x + position[0] - PointChargeModel.RADIUS, position[1] - PointChargeModel.RADIUS, minusCharges.createTandem(`minusCharge${index}`), false);
        this.minusCharges.push(minusCharge);
        index++;
      }
    }
    const updateChargePositions = () => {
      // value for k for calculating forces, chosen so that motion of the balloon looks like Java version
      const k = 10000;

      // calculate force from Balloon to each charge in the wall, we subtract by the PointChargeModel radius
      // to make the force look correct because each charge is minus charge is shifted down by that much initially
      this.minusCharges.forEach(entry => {
        const ch = entry;
        let dv1 = new Vector2(0, 0);
        let dv2 = new Vector2(0, 0);
        const defaultPosition = ch.positionProperty.initialValue;
        if (yellowBalloon.isVisibleProperty.get()) {
          dv1 = BalloonModel.getForce(defaultPosition, yellowBalloon.getChargeCenter().minusXY(0, 2 * PointChargeModel.RADIUS), k * PointChargeModel.CHARGE * yellowBalloon.chargeProperty.get(), 2.35);
        }
        if (greenBalloon.isVisibleProperty.get()) {
          dv2 = BalloonModel.getForce(defaultPosition, greenBalloon.getChargeCenter().minusXY(0, 2 * PointChargeModel.RADIUS), k * PointChargeModel.CHARGE * greenBalloon.chargeProperty.get(), 2.35);
        }
        entry.positionProperty.set(new Vector2(defaultPosition.x + dv1.x + dv2.x, defaultPosition.y + dv1.y + dv2.y));
      });
    };
    yellowBalloon.positionProperty.link(updateChargePositions);
    greenBalloon.positionProperty.link(updateChargePositions);
    yellowBalloon.isVisibleProperty.link(updateChargePositions);
    greenBalloon.isVisibleProperty.link(updateChargePositions);
    yellowBalloon.chargeProperty.link(updateChargePositions);
    greenBalloon.chargeProperty.link(updateChargePositions);

    // if a balloon was stuck to the wall and visible when the wall becomes invisible, we need to
    // notify that the balloon was released by reseting the timer
    const balloons = [yellowBalloon, greenBalloon];
    this.isVisibleProperty.link(isVisible => {
      if (!isVisible) {
        for (let i = 0; i < balloons.length; i++) {
          const balloon = balloons[i];
          if (balloon.isVisibleProperty.get() && balloon.rightAtWallPosition() && balloon.isCharged()) {
            balloon.timeSinceRelease = 0;
          }
        }
      }
    });
  }

  // Reset the entire model
  // @public
  reset() {
    //Reset the properties in this model
    this.isVisibleProperty.reset();
    this.minusCharges.forEach(entry => {
      entry.reset();
    });
  }

  /**
   * Function that will place charges on wall's grid.
   * @private
   *
   * @param {number} i - column number
   * @param {number} k - row number
   *
   * @returns {Array.<number>} - an array containing the x and y values for the charge
   */
  calculatePosition(i, k) {
    const y0 = i % 2 === 0 ? this.dy / 2 : 1;
    return [i * this.dx + PointChargeModel.RADIUS + 1, k * this.dy + y0];
  }

  /**
   * Get the minus charge that is the closest in the wall to the balloon, relative to the charge's initial
   * position.
   * @public
   *
   * @returns {MovablePointChargeModel}
   */
  getClosestChargeToBalloon(balloon) {
    const minusCharges = this.minusCharges;

    // get the minus charge that is closest to the balloon
    let closestCharge = null;
    let chargeDistance = Number.POSITIVE_INFINITY;
    const balloonChargeCenter = balloon.getChargeCenter();
    for (let i = 0; i < minusCharges.length; i++) {
      const charge = minusCharges[i];
      const newChargeDistance = charge.positionProperty.initialValue.distance(balloonChargeCenter);
      if (newChargeDistance < chargeDistance) {
        chargeDistance = newChargeDistance;
        closestCharge = charge;
      }
    }
    assert && assert(closestCharge, 'Unable to find charge closest to balloon');
    return closestCharge;
  }

  /**
   * Return whether or not the force applied to this charge indicates that charge is being induced. Determined by
   * inspection.
   * @public
   *
   * @param {Vector2} force - force applied on this charge
   * @returns {boolean}
   */
  forceIndicatesInducedCharge(force) {
    return force.magnitude > FORCE_MAGNITUDE_THRESHOLD;
  }
}
balloonsAndStaticElectricity.register('WallModel', WallModel);
export default WallModel;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb29sZWFuUHJvcGVydHkiLCJCb3VuZHMyIiwiVXRpbHMiLCJWZWN0b3IyIiwiVGFuZGVtIiwiYmFsbG9vbnNBbmRTdGF0aWNFbGVjdHJpY2l0eSIsIkJhbGxvb25Nb2RlbCIsIk1vdmFibGVQb2ludENoYXJnZU1vZGVsIiwiUG9pbnRDaGFyZ2VNb2RlbCIsIkZPUkNFX01BR05JVFVERV9USFJFU0hPTEQiLCJXYWxsTW9kZWwiLCJjb25zdHJ1Y3RvciIsIngiLCJ3aWR0aCIsImhlaWdodCIsInllbGxvd0JhbGxvb24iLCJncmVlbkJhbGxvb24iLCJ0YW5kZW0iLCJpc1Zpc2libGVQcm9wZXJ0eSIsImNyZWF0ZVRhbmRlbSIsInkiLCJudW1YIiwibnVtWSIsImJvdW5kcyIsImR4Iiwicm91bmRTeW1tZXRyaWMiLCJkeSIsInBsdXNDaGFyZ2VzIiwibWludXNDaGFyZ2VzIiwiaW5kZXgiLCJpIiwiayIsInBvc2l0aW9uIiwiY2FsY3VsYXRlUG9zaXRpb24iLCJwbHVzQ2hhcmdlIiwiT1BUX09VVCIsInB1c2giLCJtaW51c0NoYXJnZSIsIlJBRElVUyIsInVwZGF0ZUNoYXJnZVBvc2l0aW9ucyIsImZvckVhY2giLCJlbnRyeSIsImNoIiwiZHYxIiwiZHYyIiwiZGVmYXVsdFBvc2l0aW9uIiwicG9zaXRpb25Qcm9wZXJ0eSIsImluaXRpYWxWYWx1ZSIsImdldCIsImdldEZvcmNlIiwiZ2V0Q2hhcmdlQ2VudGVyIiwibWludXNYWSIsIkNIQVJHRSIsImNoYXJnZVByb3BlcnR5Iiwic2V0IiwibGluayIsImJhbGxvb25zIiwiaXNWaXNpYmxlIiwibGVuZ3RoIiwiYmFsbG9vbiIsInJpZ2h0QXRXYWxsUG9zaXRpb24iLCJpc0NoYXJnZWQiLCJ0aW1lU2luY2VSZWxlYXNlIiwicmVzZXQiLCJ5MCIsImdldENsb3Nlc3RDaGFyZ2VUb0JhbGxvb24iLCJjbG9zZXN0Q2hhcmdlIiwiY2hhcmdlRGlzdGFuY2UiLCJOdW1iZXIiLCJQT1NJVElWRV9JTkZJTklUWSIsImJhbGxvb25DaGFyZ2VDZW50ZXIiLCJjaGFyZ2UiLCJuZXdDaGFyZ2VEaXN0YW5jZSIsImRpc3RhbmNlIiwiYXNzZXJ0IiwiZm9yY2VJbmRpY2F0ZXNJbmR1Y2VkQ2hhcmdlIiwiZm9yY2UiLCJtYWduaXR1ZGUiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIldhbGxNb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxMy0yMDIxLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBNb2RlbCBvZiBhIHdhbGwuIFdhbGwgaGF2ZSBlbGVjdHJvbnMgd2hpY2ggY2FuIGNoYW5nZSBwb3NpdGlvbiB1bmRlciBmb3JjZSBmcm9tIGJhbGxvb25zLlxyXG4gKlxyXG4gKiBAYXV0aG9yIFZhc2lseSBTaGFraG92IChNbGVhcm5lcilcclxuICovXHJcblxyXG5pbXBvcnQgQm9vbGVhblByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvQm9vbGVhblByb3BlcnR5LmpzJztcclxuaW1wb3J0IEJvdW5kczIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL0JvdW5kczIuanMnO1xyXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1V0aWxzLmpzJztcclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uLy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xyXG5pbXBvcnQgYmFsbG9vbnNBbmRTdGF0aWNFbGVjdHJpY2l0eSBmcm9tICcuLi8uLi9iYWxsb29uc0FuZFN0YXRpY0VsZWN0cmljaXR5LmpzJztcclxuaW1wb3J0IEJhbGxvb25Nb2RlbCBmcm9tICcuL0JhbGxvb25Nb2RlbC5qcyc7XHJcbmltcG9ydCBNb3ZhYmxlUG9pbnRDaGFyZ2VNb2RlbCBmcm9tICcuL01vdmFibGVQb2ludENoYXJnZU1vZGVsLmpzJztcclxuaW1wb3J0IFBvaW50Q2hhcmdlTW9kZWwgZnJvbSAnLi9Qb2ludENoYXJnZU1vZGVsLmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG4vLyB3aGVuIGNoYXJnZSBkaXNwbGFjZW1lbnQgaXMgbGFyZ2VyIHRoYW4gdGhpcywgdGhlcmUgaXMgYW4gYXBwcmVjaWFibGUgaW5kdWNlZCBjaGFyZ2VcclxuY29uc3QgRk9SQ0VfTUFHTklUVURFX1RIUkVTSE9MRCA9IDI7XHJcblxyXG5jbGFzcyBXYWxsTW9kZWwge1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge251bWJlcn0geFxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aFxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHRcclxuICAgKiBAcGFyYW0ge0JhbGxvb259IHllbGxvd0JhbGxvb25cclxuICAgKiBAcGFyYW0ge0JhbGxvb259IGdyZWVuQmFsbG9vblxyXG4gICAqIEBwYXJhbSB7VGFuZGVtfSB0YW5kZW1cclxuICAgKi9cclxuICBjb25zdHJ1Y3RvciggeCwgd2lkdGgsIGhlaWdodCwgeWVsbG93QmFsbG9vbiwgZ3JlZW5CYWxsb29uLCB0YW5kZW0gKSB7XHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIFByb3BlcnRpZXMgb2YgdGhlIG1vZGVsLiAgQWxsIHVzZXIgc2V0dGluZ3MgYmVsb25nIGluIHRoZSBtb2RlbCwgd2hldGhlciBvciBub3QgdGhleSBhcmUgcGFydCBvZiB0aGUgcGh5c2ljYWwgbW9kZWxcclxuICAgIHRoaXMuaXNWaXNpYmxlUHJvcGVydHkgPSBuZXcgQm9vbGVhblByb3BlcnR5KCB0cnVlLCB7XHJcbiAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2lzVmlzaWJsZVByb3BlcnR5JyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gQHB1YmxpYyAocmVhZC1vbmx5KVxyXG4gICAgdGhpcy55ID0gMDsgLy8gdGhlIHRvcCBwb3NpdGlvbiBvZiB0aGUgd2FsbFxyXG4gICAgdGhpcy54ID0geDsgLy8gdGhlIGxlZnQgcG9zaXRpb24gb2YgdGhlIHdhbGxcclxuICAgIHRoaXMubnVtWCA9IDM7IC8vIG51bWJlciBvZiBjb2x1bW5zIHdpdGggY2hhcmdlc1xyXG4gICAgdGhpcy5udW1ZID0gMTg7IC8vIG51bWJlciBvZiByb3dzIHdpdGggY2hhcmdlc1xyXG4gICAgdGhpcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XHJcblxyXG4gICAgLy8gQHB1YmxpYyB7Qm91bmRzMn0gYm91bmRzIGNvbnRhaW5pbmcgdGhlIHdhbGxcclxuICAgIHRoaXMuYm91bmRzID0gbmV3IEJvdW5kczIoIHRoaXMueCwgdGhpcy55LCB0aGlzLnggKyB3aWR0aCwgdGhpcy55ICsgaGVpZ2h0ICk7XHJcblxyXG4gICAgLy8gQHByaXZhdGUge251bWJlcn0gLSBzY2FsaW5nIGZhY3RvcnMgZm9yIGNhbGN1bGF0aW5nIHBvc2l0aW9ucyBmb3IgaW5kdWNlZCBjaGFyZ2VcclxuICAgIHRoaXMuZHggPSBVdGlscy5yb3VuZFN5bW1ldHJpYyggd2lkdGggLyB0aGlzLm51bVggKyAyICk7XHJcbiAgICB0aGlzLmR5ID0gaGVpZ2h0IC8gdGhpcy5udW1ZO1xyXG5cclxuICAgIC8vIEBwcml2YXRlIHthcnJheS48UG9pbnRDaGFyZ2VNb2RlbD59XHJcbiAgICB0aGlzLnBsdXNDaGFyZ2VzID0gW107XHJcblxyXG4gICAgLy8gQHByaXZhdGUge2FycmF5LjxNb3ZhYmxlUG9pbnRDaGFyZ2VNb2RlbD59XHJcbiAgICB0aGlzLm1pbnVzQ2hhcmdlcyA9IFtdO1xyXG5cclxuICAgIGNvbnN0IG1pbnVzQ2hhcmdlcyA9IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdtaW51c0NoYXJnZXMnICk7XHJcblxyXG4gICAgbGV0IGluZGV4ID0gMDtcclxuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IHRoaXMubnVtWDsgaSsrICkge1xyXG4gICAgICBmb3IgKCBsZXQgayA9IDA7IGsgPCB0aGlzLm51bVk7IGsrKyApIHtcclxuXHJcbiAgICAgICAgLy8gcGx1c1xyXG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy5jYWxjdWxhdGVQb3NpdGlvbiggaSwgayApO1xyXG4gICAgICAgIGNvbnN0IHBsdXNDaGFyZ2UgPSBuZXcgUG9pbnRDaGFyZ2VNb2RlbCggeCArIHBvc2l0aW9uWyAwIF0sIHBvc2l0aW9uWyAxIF0sIFRhbmRlbS5PUFRfT1VULCBmYWxzZSApO1xyXG4gICAgICAgIHRoaXMucGx1c0NoYXJnZXMucHVzaCggcGx1c0NoYXJnZSApO1xyXG5cclxuICAgICAgICAvLyBtaW51c1xyXG4gICAgICAgIGNvbnN0IG1pbnVzQ2hhcmdlID0gbmV3IE1vdmFibGVQb2ludENoYXJnZU1vZGVsKFxyXG4gICAgICAgICAgeCArIHBvc2l0aW9uWyAwIF0gLSBQb2ludENoYXJnZU1vZGVsLlJBRElVUyxcclxuICAgICAgICAgIHBvc2l0aW9uWyAxIF0gLSBQb2ludENoYXJnZU1vZGVsLlJBRElVUyxcclxuICAgICAgICAgIG1pbnVzQ2hhcmdlcy5jcmVhdGVUYW5kZW0oIGBtaW51c0NoYXJnZSR7aW5kZXh9YCApLFxyXG4gICAgICAgICAgZmFsc2VcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMubWludXNDaGFyZ2VzLnB1c2goIG1pbnVzQ2hhcmdlICk7XHJcbiAgICAgICAgaW5kZXgrKztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVwZGF0ZUNoYXJnZVBvc2l0aW9ucyA9ICgpID0+IHtcclxuXHJcbiAgICAgIC8vIHZhbHVlIGZvciBrIGZvciBjYWxjdWxhdGluZyBmb3JjZXMsIGNob3NlbiBzbyB0aGF0IG1vdGlvbiBvZiB0aGUgYmFsbG9vbiBsb29rcyBsaWtlIEphdmEgdmVyc2lvblxyXG4gICAgICBjb25zdCBrID0gMTAwMDA7XHJcblxyXG4gICAgICAvLyBjYWxjdWxhdGUgZm9yY2UgZnJvbSBCYWxsb29uIHRvIGVhY2ggY2hhcmdlIGluIHRoZSB3YWxsLCB3ZSBzdWJ0cmFjdCBieSB0aGUgUG9pbnRDaGFyZ2VNb2RlbCByYWRpdXNcclxuICAgICAgLy8gdG8gbWFrZSB0aGUgZm9yY2UgbG9vayBjb3JyZWN0IGJlY2F1c2UgZWFjaCBjaGFyZ2UgaXMgbWludXMgY2hhcmdlIGlzIHNoaWZ0ZWQgZG93biBieSB0aGF0IG11Y2ggaW5pdGlhbGx5XHJcbiAgICAgIHRoaXMubWludXNDaGFyZ2VzLmZvckVhY2goIGVudHJ5ID0+IHtcclxuICAgICAgICBjb25zdCBjaCA9IGVudHJ5O1xyXG4gICAgICAgIGxldCBkdjEgPSBuZXcgVmVjdG9yMiggMCwgMCApO1xyXG4gICAgICAgIGxldCBkdjIgPSBuZXcgVmVjdG9yMiggMCwgMCApO1xyXG5cclxuICAgICAgICBjb25zdCBkZWZhdWx0UG9zaXRpb24gPSBjaC5wb3NpdGlvblByb3BlcnR5LmluaXRpYWxWYWx1ZTtcclxuICAgICAgICBpZiAoIHllbGxvd0JhbGxvb24uaXNWaXNpYmxlUHJvcGVydHkuZ2V0KCkgKSB7XHJcbiAgICAgICAgICBkdjEgPSBCYWxsb29uTW9kZWwuZ2V0Rm9yY2UoXHJcbiAgICAgICAgICAgIGRlZmF1bHRQb3NpdGlvbixcclxuICAgICAgICAgICAgeWVsbG93QmFsbG9vbi5nZXRDaGFyZ2VDZW50ZXIoKS5taW51c1hZKCAwLCAyICogUG9pbnRDaGFyZ2VNb2RlbC5SQURJVVMgKSxcclxuICAgICAgICAgICAgayAqIFBvaW50Q2hhcmdlTW9kZWwuQ0hBUkdFICogeWVsbG93QmFsbG9vbi5jaGFyZ2VQcm9wZXJ0eS5nZXQoKSxcclxuICAgICAgICAgICAgMi4zNVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCBncmVlbkJhbGxvb24uaXNWaXNpYmxlUHJvcGVydHkuZ2V0KCkgKSB7XHJcbiAgICAgICAgICBkdjIgPSBCYWxsb29uTW9kZWwuZ2V0Rm9yY2UoXHJcbiAgICAgICAgICAgIGRlZmF1bHRQb3NpdGlvbixcclxuICAgICAgICAgICAgZ3JlZW5CYWxsb29uLmdldENoYXJnZUNlbnRlcigpLm1pbnVzWFkoIDAsIDIgKiBQb2ludENoYXJnZU1vZGVsLlJBRElVUyApLFxyXG4gICAgICAgICAgICBrICogUG9pbnRDaGFyZ2VNb2RlbC5DSEFSR0UgKiBncmVlbkJhbGxvb24uY2hhcmdlUHJvcGVydHkuZ2V0KCksXHJcbiAgICAgICAgICAgIDIuMzVcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVudHJ5LnBvc2l0aW9uUHJvcGVydHkuc2V0KFxyXG4gICAgICAgICAgbmV3IFZlY3RvcjIoIGRlZmF1bHRQb3NpdGlvbi54ICsgZHYxLnggKyBkdjIueCwgZGVmYXVsdFBvc2l0aW9uLnkgKyBkdjEueSArIGR2Mi55IClcclxuICAgICAgICApO1xyXG4gICAgICB9ICk7XHJcbiAgICB9O1xyXG4gICAgeWVsbG93QmFsbG9vbi5wb3NpdGlvblByb3BlcnR5LmxpbmsoIHVwZGF0ZUNoYXJnZVBvc2l0aW9ucyApO1xyXG4gICAgZ3JlZW5CYWxsb29uLnBvc2l0aW9uUHJvcGVydHkubGluayggdXBkYXRlQ2hhcmdlUG9zaXRpb25zICk7XHJcbiAgICB5ZWxsb3dCYWxsb29uLmlzVmlzaWJsZVByb3BlcnR5LmxpbmsoIHVwZGF0ZUNoYXJnZVBvc2l0aW9ucyApO1xyXG4gICAgZ3JlZW5CYWxsb29uLmlzVmlzaWJsZVByb3BlcnR5LmxpbmsoIHVwZGF0ZUNoYXJnZVBvc2l0aW9ucyApO1xyXG4gICAgeWVsbG93QmFsbG9vbi5jaGFyZ2VQcm9wZXJ0eS5saW5rKCB1cGRhdGVDaGFyZ2VQb3NpdGlvbnMgKTtcclxuICAgIGdyZWVuQmFsbG9vbi5jaGFyZ2VQcm9wZXJ0eS5saW5rKCB1cGRhdGVDaGFyZ2VQb3NpdGlvbnMgKTtcclxuXHJcbiAgICAvLyBpZiBhIGJhbGxvb24gd2FzIHN0dWNrIHRvIHRoZSB3YWxsIGFuZCB2aXNpYmxlIHdoZW4gdGhlIHdhbGwgYmVjb21lcyBpbnZpc2libGUsIHdlIG5lZWQgdG9cclxuICAgIC8vIG5vdGlmeSB0aGF0IHRoZSBiYWxsb29uIHdhcyByZWxlYXNlZCBieSByZXNldGluZyB0aGUgdGltZXJcclxuICAgIGNvbnN0IGJhbGxvb25zID0gWyB5ZWxsb3dCYWxsb29uLCBncmVlbkJhbGxvb24gXTtcclxuICAgIHRoaXMuaXNWaXNpYmxlUHJvcGVydHkubGluayggaXNWaXNpYmxlID0+IHtcclxuICAgICAgaWYgKCAhaXNWaXNpYmxlICkge1xyXG4gICAgICAgIGZvciAoIGxldCBpID0gMDsgaSA8IGJhbGxvb25zLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICAgICAgY29uc3QgYmFsbG9vbiA9IGJhbGxvb25zWyBpIF07XHJcbiAgICAgICAgICBpZiAoIGJhbGxvb24uaXNWaXNpYmxlUHJvcGVydHkuZ2V0KCkgJiYgYmFsbG9vbi5yaWdodEF0V2FsbFBvc2l0aW9uKCkgJiYgYmFsbG9vbi5pc0NoYXJnZWQoKSApIHtcclxuICAgICAgICAgICAgYmFsbG9vbi50aW1lU2luY2VSZWxlYXNlID0gMDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gKTtcclxuICB9XHJcblxyXG5cclxuICAvLyBSZXNldCB0aGUgZW50aXJlIG1vZGVsXHJcbiAgLy8gQHB1YmxpY1xyXG4gIHJlc2V0KCkge1xyXG5cclxuICAgIC8vUmVzZXQgdGhlIHByb3BlcnRpZXMgaW4gdGhpcyBtb2RlbFxyXG4gICAgdGhpcy5pc1Zpc2libGVQcm9wZXJ0eS5yZXNldCgpO1xyXG4gICAgdGhpcy5taW51c0NoYXJnZXMuZm9yRWFjaCggZW50cnkgPT4ge1xyXG4gICAgICBlbnRyeS5yZXNldCgpO1xyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdGhhdCB3aWxsIHBsYWNlIGNoYXJnZXMgb24gd2FsbCdzIGdyaWQuXHJcbiAgICogQHByaXZhdGVcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpIC0gY29sdW1uIG51bWJlclxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBrIC0gcm93IG51bWJlclxyXG4gICAqXHJcbiAgICogQHJldHVybnMge0FycmF5LjxudW1iZXI+fSAtIGFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIHggYW5kIHkgdmFsdWVzIGZvciB0aGUgY2hhcmdlXHJcbiAgICovXHJcbiAgY2FsY3VsYXRlUG9zaXRpb24oIGksIGsgKSB7XHJcbiAgICBjb25zdCB5MCA9IGkgJSAyID09PSAwID8gdGhpcy5keSAvIDIgOiAxO1xyXG4gICAgcmV0dXJuIFsgaSAqIHRoaXMuZHggKyBQb2ludENoYXJnZU1vZGVsLlJBRElVUyArIDEsIGsgKiB0aGlzLmR5ICsgeTAgXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCB0aGUgbWludXMgY2hhcmdlIHRoYXQgaXMgdGhlIGNsb3Nlc3QgaW4gdGhlIHdhbGwgdG8gdGhlIGJhbGxvb24sIHJlbGF0aXZlIHRvIHRoZSBjaGFyZ2UncyBpbml0aWFsXHJcbiAgICogcG9zaXRpb24uXHJcbiAgICogQHB1YmxpY1xyXG4gICAqXHJcbiAgICogQHJldHVybnMge01vdmFibGVQb2ludENoYXJnZU1vZGVsfVxyXG4gICAqL1xyXG4gIGdldENsb3Nlc3RDaGFyZ2VUb0JhbGxvb24oIGJhbGxvb24gKSB7XHJcbiAgICBjb25zdCBtaW51c0NoYXJnZXMgPSB0aGlzLm1pbnVzQ2hhcmdlcztcclxuXHJcbiAgICAvLyBnZXQgdGhlIG1pbnVzIGNoYXJnZSB0aGF0IGlzIGNsb3Nlc3QgdG8gdGhlIGJhbGxvb25cclxuICAgIGxldCBjbG9zZXN0Q2hhcmdlID0gbnVsbDtcclxuICAgIGxldCBjaGFyZ2VEaXN0YW5jZSA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcclxuICAgIGNvbnN0IGJhbGxvb25DaGFyZ2VDZW50ZXIgPSBiYWxsb29uLmdldENoYXJnZUNlbnRlcigpO1xyXG5cclxuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IG1pbnVzQ2hhcmdlcy5sZW5ndGg7IGkrKyApIHtcclxuICAgICAgY29uc3QgY2hhcmdlID0gbWludXNDaGFyZ2VzWyBpIF07XHJcbiAgICAgIGNvbnN0IG5ld0NoYXJnZURpc3RhbmNlID0gY2hhcmdlLnBvc2l0aW9uUHJvcGVydHkuaW5pdGlhbFZhbHVlLmRpc3RhbmNlKCBiYWxsb29uQ2hhcmdlQ2VudGVyICk7XHJcblxyXG4gICAgICBpZiAoIG5ld0NoYXJnZURpc3RhbmNlIDwgY2hhcmdlRGlzdGFuY2UgKSB7XHJcbiAgICAgICAgY2hhcmdlRGlzdGFuY2UgPSBuZXdDaGFyZ2VEaXN0YW5jZTtcclxuICAgICAgICBjbG9zZXN0Q2hhcmdlID0gY2hhcmdlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBjbG9zZXN0Q2hhcmdlLCAnVW5hYmxlIHRvIGZpbmQgY2hhcmdlIGNsb3Nlc3QgdG8gYmFsbG9vbicgKTtcclxuXHJcbiAgICByZXR1cm4gY2xvc2VzdENoYXJnZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybiB3aGV0aGVyIG9yIG5vdCB0aGUgZm9yY2UgYXBwbGllZCB0byB0aGlzIGNoYXJnZSBpbmRpY2F0ZXMgdGhhdCBjaGFyZ2UgaXMgYmVpbmcgaW5kdWNlZC4gRGV0ZXJtaW5lZCBieVxyXG4gICAqIGluc3BlY3Rpb24uXHJcbiAgICogQHB1YmxpY1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHtWZWN0b3IyfSBmb3JjZSAtIGZvcmNlIGFwcGxpZWQgb24gdGhpcyBjaGFyZ2VcclxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgKi9cclxuICBmb3JjZUluZGljYXRlc0luZHVjZWRDaGFyZ2UoIGZvcmNlICkge1xyXG4gICAgcmV0dXJuIGZvcmNlLm1hZ25pdHVkZSA+IEZPUkNFX01BR05JVFVERV9USFJFU0hPTEQ7XHJcbiAgfVxyXG59XHJcblxyXG5iYWxsb29uc0FuZFN0YXRpY0VsZWN0cmljaXR5LnJlZ2lzdGVyKCAnV2FsbE1vZGVsJywgV2FsbE1vZGVs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