// Copyright 2016-2023, University of Colorado Boulder

/**
 * a Scenery Node that allows the user to select the various elements contained within a carousel by presenting a set of
 * radio-style push buttons, each with an icon image of the selection that it represents
 *
 * @author John Blanco
 * @author Andrew Adare
 * @author Jesse Greenberg
 * @author Chris Klusendorf (PhET Interactive Simulations)
 */

import merge from '../../../../phet-core/js/merge.js';
import { Color } from '../../../../scenery/js/imports.js';
import RectangularRadioButtonGroup from '../../../../sun/js/buttons/RectangularRadioButtonGroup.js';
import Panel from '../../../../sun/js/Panel.js';
import Tandem from '../../../../tandem/js/Tandem.js';
import EFACConstants from '../../common/EFACConstants.js';
import energyFormsAndChanges from '../../energyFormsAndChanges.js';

// constants
const BUTTON_IMAGE_HEIGHT_AND_WIDTH = 44; // In screen coordinates, which is close to pixels.

class EnergySystemElementSelector extends Panel {
  /**
   * @param {EnergySystemElementCarousel} carousel
   * @param {Object} [options]
   */
  constructor(carousel, options) {
    options = merge({
      fill: EFACConstants.CONTROL_PANEL_BACKGROUND_COLOR,
      stroke: EFACConstants.CONTROL_PANEL_OUTLINE_STROKE,
      lineWidth: EFACConstants.CONTROL_PANEL_OUTLINE_LINE_WIDTH,
      cornerRadius: EFACConstants.CONTROL_PANEL_CORNER_RADIUS,
      xMargin: 10,
      yMargin: 10,
      // phet-io
      tandem: Tandem.REQUIRED
    }, options);
    const buttonElementList = [];
    for (let i = 0; i < carousel.managedElements.length; i++) {
      const element = carousel.managedElements[i];
      const elementName = carousel.elementNames.VALUES[i];
      const iconImage = element.iconImage;
      const width = iconImage.getBounds().getWidth();
      const height = iconImage.getBounds().getHeight();
      const denominator = width > height ? width : height;
      assert && assert(denominator > 0, 'Largest image dimension = 0 --> division by 0');
      iconImage.setScaleMagnitude(BUTTON_IMAGE_HEIGHT_AND_WIDTH / denominator);
      buttonElementList.push({
        value: elementName,
        createNode: () => iconImage,
        tandemName: _.camelCase(`${elementName.name}RadioButton`)
      });
    }
    const buttonGroup = new RectangularRadioButtonGroup(carousel.targetElementNameProperty, buttonElementList, {
      orientation: 'horizontal',
      spacing: 15,
      radioButtonOptions: {
        baseColor: Color.WHITE
      },
      tandem: options.tandem.createTandem('radioButtonGroup')
    });

    // link the visibility of the buttons to their corresponding system elements, see https://github.com/phetsims/energy-forms-and-changes/issues/305
    buttonGroup.children.forEach((button, index) => {
      button.visibleProperty.lazyLink(() => {
        carousel.managedElements[index].visibleProperty.value = button.visible;
      });
    });
    super(buttonGroup, options);
  }
}
energyFormsAndChanges.register('EnergySystemElementSelector', EnergySystemElementSelector);
export default EnergySystemElementSelector;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtZXJnZSIsIkNvbG9yIiwiUmVjdGFuZ3VsYXJSYWRpb0J1dHRvbkdyb3VwIiwiUGFuZWwiLCJUYW5kZW0iLCJFRkFDQ29uc3RhbnRzIiwiZW5lcmd5Rm9ybXNBbmRDaGFuZ2VzIiwiQlVUVE9OX0lNQUdFX0hFSUdIVF9BTkRfV0lEVEgiLCJFbmVyZ3lTeXN0ZW1FbGVtZW50U2VsZWN0b3IiLCJjb25zdHJ1Y3RvciIsImNhcm91c2VsIiwib3B0aW9ucyIsImZpbGwiLCJDT05UUk9MX1BBTkVMX0JBQ0tHUk9VTkRfQ09MT1IiLCJzdHJva2UiLCJDT05UUk9MX1BBTkVMX09VVExJTkVfU1RST0tFIiwibGluZVdpZHRoIiwiQ09OVFJPTF9QQU5FTF9PVVRMSU5FX0xJTkVfV0lEVEgiLCJjb3JuZXJSYWRpdXMiLCJDT05UUk9MX1BBTkVMX0NPUk5FUl9SQURJVVMiLCJ4TWFyZ2luIiwieU1hcmdpbiIsInRhbmRlbSIsIlJFUVVJUkVEIiwiYnV0dG9uRWxlbWVudExpc3QiLCJpIiwibWFuYWdlZEVsZW1lbnRzIiwibGVuZ3RoIiwiZWxlbWVudCIsImVsZW1lbnROYW1lIiwiZWxlbWVudE5hbWVzIiwiVkFMVUVTIiwiaWNvbkltYWdlIiwid2lkdGgiLCJnZXRCb3VuZHMiLCJnZXRXaWR0aCIsImhlaWdodCIsImdldEhlaWdodCIsImRlbm9taW5hdG9yIiwiYXNzZXJ0Iiwic2V0U2NhbGVNYWduaXR1ZGUiLCJwdXNoIiwidmFsdWUiLCJjcmVhdGVOb2RlIiwidGFuZGVtTmFtZSIsIl8iLCJjYW1lbENhc2UiLCJuYW1lIiwiYnV0dG9uR3JvdXAiLCJ0YXJnZXRFbGVtZW50TmFtZVByb3BlcnR5Iiwib3JpZW50YXRpb24iLCJzcGFjaW5nIiwicmFkaW9CdXR0b25PcHRpb25zIiwiYmFzZUNvbG9yIiwiV0hJVEUiLCJjcmVhdGVUYW5kZW0iLCJjaGlsZHJlbiIsImZvckVhY2giLCJidXR0b24iLCJpbmRleCIsInZpc2libGVQcm9wZXJ0eSIsImxhenlMaW5rIiwidmlzaWJsZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiRW5lcmd5U3lzdGVtRWxlbWVudFNlbGVjdG9yLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE2LTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIGEgU2NlbmVyeSBOb2RlIHRoYXQgYWxsb3dzIHRoZSB1c2VyIHRvIHNlbGVjdCB0aGUgdmFyaW91cyBlbGVtZW50cyBjb250YWluZWQgd2l0aGluIGEgY2Fyb3VzZWwgYnkgcHJlc2VudGluZyBhIHNldCBvZlxyXG4gKiByYWRpby1zdHlsZSBwdXNoIGJ1dHRvbnMsIGVhY2ggd2l0aCBhbiBpY29uIGltYWdlIG9mIHRoZSBzZWxlY3Rpb24gdGhhdCBpdCByZXByZXNlbnRzXHJcbiAqXHJcbiAqIEBhdXRob3IgSm9obiBCbGFuY29cclxuICogQGF1dGhvciBBbmRyZXcgQWRhcmVcclxuICogQGF1dGhvciBKZXNzZSBHcmVlbmJlcmdcclxuICogQGF1dGhvciBDaHJpcyBLbHVzZW5kb3JmIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxyXG4gKi9cclxuXHJcbmltcG9ydCBtZXJnZSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvbWVyZ2UuanMnO1xyXG5pbXBvcnQgeyBDb2xvciB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBSZWN0YW5ndWxhclJhZGlvQnV0dG9uR3JvdXAgZnJvbSAnLi4vLi4vLi4vLi4vc3VuL2pzL2J1dHRvbnMvUmVjdGFuZ3VsYXJSYWRpb0J1dHRvbkdyb3VwLmpzJztcclxuaW1wb3J0IFBhbmVsIGZyb20gJy4uLy4uLy4uLy4uL3N1bi9qcy9QYW5lbC5qcyc7XHJcbmltcG9ydCBUYW5kZW0gZnJvbSAnLi4vLi4vLi4vLi4vdGFuZGVtL2pzL1RhbmRlbS5qcyc7XHJcbmltcG9ydCBFRkFDQ29uc3RhbnRzIGZyb20gJy4uLy4uL2NvbW1vbi9FRkFDQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IGVuZXJneUZvcm1zQW5kQ2hhbmdlcyBmcm9tICcuLi8uLi9lbmVyZ3lGb3Jtc0FuZENoYW5nZXMuanMnO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IEJVVFRPTl9JTUFHRV9IRUlHSFRfQU5EX1dJRFRIID0gNDQ7IC8vIEluIHNjcmVlbiBjb29yZGluYXRlcywgd2hpY2ggaXMgY2xvc2UgdG8gcGl4ZWxzLlxyXG5cclxuY2xhc3MgRW5lcmd5U3lzdGVtRWxlbWVudFNlbGVjdG9yIGV4dGVuZHMgUGFuZWwge1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge0VuZXJneVN5c3RlbUVsZW1lbnRDYXJvdXNlbH0gY2Fyb3VzZWxcclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIGNhcm91c2VsLCBvcHRpb25zICkge1xyXG5cclxuICAgIG9wdGlvbnMgPSBtZXJnZSgge1xyXG4gICAgICBmaWxsOiBFRkFDQ29uc3RhbnRzLkNPTlRST0xfUEFORUxfQkFDS0dST1VORF9DT0xPUixcclxuICAgICAgc3Ryb2tlOiBFRkFDQ29uc3RhbnRzLkNPTlRST0xfUEFORUxfT1VUTElORV9TVFJPS0UsXHJcbiAgICAgIGxpbmVXaWR0aDogRUZBQ0NvbnN0YW50cy5DT05UUk9MX1BBTkVMX09VVExJTkVfTElORV9XSURUSCxcclxuICAgICAgY29ybmVyUmFkaXVzOiBFRkFDQ29uc3RhbnRzLkNPTlRST0xfUEFORUxfQ09STkVSX1JBRElVUyxcclxuICAgICAgeE1hcmdpbjogMTAsXHJcbiAgICAgIHlNYXJnaW46IDEwLFxyXG5cclxuICAgICAgLy8gcGhldC1pb1xyXG4gICAgICB0YW5kZW06IFRhbmRlbS5SRVFVSVJFRFxyXG4gICAgfSwgb3B0aW9ucyApO1xyXG5cclxuICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnRMaXN0ID0gW107XHJcblxyXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgY2Fyb3VzZWwubWFuYWdlZEVsZW1lbnRzLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICBjb25zdCBlbGVtZW50ID0gY2Fyb3VzZWwubWFuYWdlZEVsZW1lbnRzWyBpIF07XHJcbiAgICAgIGNvbnN0IGVsZW1lbnROYW1lID0gY2Fyb3VzZWwuZWxlbWVudE5hbWVzLlZBTFVFU1sgaSBdO1xyXG4gICAgICBjb25zdCBpY29uSW1hZ2UgPSBlbGVtZW50Lmljb25JbWFnZTtcclxuICAgICAgY29uc3Qgd2lkdGggPSBpY29uSW1hZ2UuZ2V0Qm91bmRzKCkuZ2V0V2lkdGgoKTtcclxuICAgICAgY29uc3QgaGVpZ2h0ID0gaWNvbkltYWdlLmdldEJvdW5kcygpLmdldEhlaWdodCgpO1xyXG4gICAgICBjb25zdCBkZW5vbWluYXRvciA9ICggd2lkdGggPiBoZWlnaHQgKSA/IHdpZHRoIDogaGVpZ2h0O1xyXG5cclxuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggZGVub21pbmF0b3IgPiAwLCAnTGFyZ2VzdCBpbWFnZSBkaW1lbnNpb24gPSAwIC0tPiBkaXZpc2lvbiBieSAwJyApO1xyXG5cclxuICAgICAgaWNvbkltYWdlLnNldFNjYWxlTWFnbml0dWRlKCBCVVRUT05fSU1BR0VfSEVJR0hUX0FORF9XSURUSCAvIGRlbm9taW5hdG9yICk7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnRMaXN0LnB1c2goIHtcclxuICAgICAgICB2YWx1ZTogZWxlbWVudE5hbWUsXHJcbiAgICAgICAgY3JlYXRlTm9kZTogKCkgPT4gaWNvbkltYWdlLFxyXG4gICAgICAgIHRhbmRlbU5hbWU6IF8uY2FtZWxDYXNlKCBgJHtlbGVtZW50TmFtZS5uYW1lfVJhZGlvQnV0dG9uYCApXHJcbiAgICAgIH0gKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBidXR0b25Hcm91cCA9IG5ldyBSZWN0YW5ndWxhclJhZGlvQnV0dG9uR3JvdXAoIGNhcm91c2VsLnRhcmdldEVsZW1lbnROYW1lUHJvcGVydHksIGJ1dHRvbkVsZW1lbnRMaXN0LCB7XHJcbiAgICAgIG9yaWVudGF0aW9uOiAnaG9yaXpvbnRhbCcsXHJcbiAgICAgIHNwYWNpbmc6IDE1LFxyXG4gICAgICByYWRpb0J1dHRvbk9wdGlvbnM6IHtcclxuICAgICAgICBiYXNlQ29sb3I6IENvbG9yLldISVRFXHJcbiAgICAgIH0sXHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAncmFkaW9CdXR0b25Hcm91cCcgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIGxpbmsgdGhlIHZpc2liaWxpdHkgb2YgdGhlIGJ1dHRvbnMgdG8gdGhlaXIgY29ycmVzcG9uZGluZyBzeXN0ZW0gZWxlbWVudHMsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvZW5lcmd5LWZvcm1zLWFuZC1jaGFuZ2VzL2lzc3Vlcy8zMDVcclxuICAgIGJ1dHRvbkdyb3VwLmNoaWxkcmVuLmZvckVhY2goICggYnV0dG9uLCBpbmRleCApID0+IHtcclxuICAgICAgYnV0dG9uLnZpc2libGVQcm9wZXJ0eS5sYXp5TGluayggKCkgPT4ge1xyXG4gICAgICAgIGNhcm91c2VsLm1hbmFnZWRFbGVtZW50c1sgaW5kZXggXS52aXNpYmxlUHJvcGVydHkudmFsdWUgPSBidXR0b24udmlzaWJsZTtcclxuICAgICAgfSApO1xyXG4gICAgfSApO1xyXG5cclxuICAgIHN1cGVyKCBidXR0b25Hcm91cCwgb3B0aW9ucyApO1xyXG4gIH1cclxufVxyXG5cclxuZW5lcmd5Rm9ybXNBbmRDaGFuZ2VzLnJlZ2lzdGVyKCAnRW5lcmd5U3lzdGVtRWxlbWVudFNlbGVjdG9yJywgRW5lcmd5U3lzdGVtRWxlbWVudFNlbGVjdG9yICk7XHJcbmV4cG9ydCBkZWZhdWx0IEVuZXJneVN5c3RlbUVsZW1lbnRTZWxlY3RvcjsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxLQUFLLE1BQU0sbUNBQW1DO0FBQ3JELFNBQVNDLEtBQUssUUFB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