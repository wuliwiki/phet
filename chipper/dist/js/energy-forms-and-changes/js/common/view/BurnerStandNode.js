// Copyright 2014-2022, University of Colorado Boulder

/**
 * Scenery node that represents a burner stand in the view.  A burner stand is a faux-3D representation of an object
 * upon which other objects may be placed in order to be heated or cooled.  The burner is not included.
 *
 * @author John Blanco
 */

import Vector2 from '../../../../dot/js/Vector2.js';
import { LineStyles, Shape } from '../../../../kite/js/imports.js';
import { Node, Path } from '../../../../scenery/js/imports.js';
import energyFormsAndChanges from '../../energyFormsAndChanges.js';

// constants
const BURNER_STAND_STROKE_LINE_WIDTH = 2;
const BURNER_STAND_STROKE_COLOR = 'black';
const PERSPECTIVE_ANGLE = Math.PI / 4; // positive is counterclockwise, a value of 0 produces a non-skewed rectangle

class BurnerStandNode extends Node {
  /**
   * @param {Rectangle} rect
   * @param {number} projectedEdgeLength
   */
  constructor(rect, projectedEdgeLength) {
    super();

    // add the left and right sides of the stand
    this.addChild(this.createBurnerStandSide(new Vector2(rect.x, rect.y), rect.height, projectedEdgeLength));
    this.addChild(this.createBurnerStandSide(new Vector2(rect.maxX, rect.y), rect.height, projectedEdgeLength));

    // add the top of the burner stand
    this.addChild(this.createBurnerStandTop(new Vector2(rect.x, rect.y), rect.width, projectedEdgeLength));
  }

  /**
   * factory function for creating the sides of the stand
   * @param {number} topCenter
   * @param {number} height
   * @param {number} edgeLength
   * @returns {Path}
   * @private
   */
  createBurnerStandSide(topCenter, height, edgeLength) {
    // draw the side as a parallelogram
    const upperLeftCorner = topCenter.plus(new Vector2(-edgeLength / 2, 0).rotate(-PERSPECTIVE_ANGLE));
    const lowerLeftCorner = upperLeftCorner.plus(new Vector2(0, height));
    const lowerRightCorner = lowerLeftCorner.plus(new Vector2(edgeLength, 0).rotate(-PERSPECTIVE_ANGLE));
    const upperRightCorner = lowerRightCorner.plus(new Vector2(0, -height));
    let shape = new Shape();
    shape.moveToPoint(topCenter).lineToPoint(upperLeftCorner).lineToPoint(lowerLeftCorner).lineToPoint(lowerRightCorner).lineToPoint(upperRightCorner).close();
    const strokeStyles = new LineStyles({
      lineWidth: BURNER_STAND_STROKE_LINE_WIDTH,
      lineCap: 'butt',
      lineJoin: 'round'
    });
    shape = shape.getStrokedShape(strokeStyles);
    return new Path(shape, {
      stroke: BURNER_STAND_STROKE_COLOR,
      lineWidth: BURNER_STAND_STROKE_LINE_WIDTH
    });
  }

  /**
   * factory function for creating the top of the stand
   * @param {number} leftCenter
   * @param {number} width
   * @param {number} edgeLength
   * @returns {Path}
   * @private
   */
  createBurnerStandTop(leftCenter, width, edgeLength) {
    // create the points for the outline of the perspective rectangle
    const upperLeftCorner = leftCenter.plus(new Vector2(edgeLength / 2, 0).rotated(-PERSPECTIVE_ANGLE));
    const upperRightCorner = upperLeftCorner.plus(new Vector2(width, 0));
    const lowerRightCorner = upperRightCorner.plus(new Vector2(-edgeLength, 0).rotate(-PERSPECTIVE_ANGLE));
    const lowerLeftCorner = lowerRightCorner.plus(new Vector2(-width, 0));

    // create the points for the circular opening in the top
    const upperLeftCircularOpeningCorner = upperLeftCorner.plus(new Vector2(width * 0.25, 0));
    const upperRightCircularOpeningCorner = upperLeftCorner.plus(new Vector2(width * 0.75, 0));
    const lowerLeftCircularOpeningCorner = lowerLeftCorner.plus(new Vector2(width * 0.25, 0));
    const lowerRightCircularOpeningCorner = lowerLeftCorner.plus(new Vector2(width * 0.75, 0));

    // create the control points for the circular opening in the top
    const circularOpeningPerspectiveVector = new Vector2(edgeLength * 0.5, 0).rotate(-PERSPECTIVE_ANGLE);
    let shape = new Shape();
    shape.moveToPoint(upperLeftCorner).lineToPoint(upperLeftCircularOpeningCorner).cubicCurveToPoint(upperLeftCircularOpeningCorner.plus(circularOpeningPerspectiveVector), upperRightCircularOpeningCorner.plus(circularOpeningPerspectiveVector), upperRightCircularOpeningCorner).lineToPoint(upperRightCorner).lineToPoint(lowerRightCorner).lineToPoint(lowerRightCircularOpeningCorner).cubicCurveToPoint(lowerRightCircularOpeningCorner.minus(circularOpeningPerspectiveVector), lowerLeftCircularOpeningCorner.minus(circularOpeningPerspectiveVector), lowerLeftCircularOpeningCorner).lineToPoint(lowerLeftCorner).close();
    const strokeStyles = new LineStyles({
      lineWidth: BURNER_STAND_STROKE_LINE_WIDTH,
      lineCap: 'butt',
      lineJoin: 'bevel'
    });
    shape = shape.getStrokedShape(strokeStyles);
    return new Path(shape, {
      stroke: BURNER_STAND_STROKE_COLOR,
      lineWidth: BURNER_STAND_STROKE_LINE_WIDTH
    });
  }
}
energyFormsAndChanges.register('BurnerStandNode', BurnerStandNode);
export default BurnerStandNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWZWN0b3IyIiwiTGluZVN0eWxlcyIsIlNoYXBlIiwiTm9kZSIsIlBhdGgiLCJlbmVyZ3lGb3Jtc0FuZENoYW5nZXMiLCJCVVJORVJfU1RBTkRfU1RST0tFX0xJTkVfV0lEVEgiLCJCVVJORVJfU1RBTkRfU1RST0tFX0NPTE9SIiwiUEVSU1BFQ1RJVkVfQU5HTEUiLCJNYXRoIiwiUEkiLCJCdXJuZXJTdGFuZE5vZGUiLCJjb25zdHJ1Y3RvciIsInJlY3QiLCJwcm9qZWN0ZWRFZGdlTGVuZ3RoIiwiYWRkQ2hpbGQiLCJjcmVhdGVCdXJuZXJTdGFuZFNpZGUiLCJ4IiwieSIsImhlaWdodCIsIm1heFgiLCJjcmVhdGVCdXJuZXJTdGFuZFRvcCIsIndpZHRoIiwidG9wQ2VudGVyIiwiZWRnZUxlbmd0aCIsInVwcGVyTGVmdENvcm5lciIsInBsdXMiLCJyb3RhdGUiLCJsb3dlckxlZnRDb3JuZXIiLCJsb3dlclJpZ2h0Q29ybmVyIiwidXBwZXJSaWdodENvcm5lciIsInNoYXBlIiwibW92ZVRvUG9pbnQiLCJsaW5lVG9Qb2ludCIsImNsb3NlIiwic3Ryb2tlU3R5bGVzIiwibGluZVdpZHRoIiwibGluZUNhcCIsImxpbmVKb2luIiwiZ2V0U3Ryb2tlZFNoYXBlIiwic3Ryb2tlIiwibGVmdENlbnRlciIsInJvdGF0ZWQiLCJ1cHBlckxlZnRDaXJjdWxhck9wZW5pbmdDb3JuZXIiLCJ1cHBlclJpZ2h0Q2lyY3VsYXJPcGVuaW5nQ29ybmVyIiwibG93ZXJMZWZ0Q2lyY3VsYXJPcGVuaW5nQ29ybmVyIiwibG93ZXJSaWdodENpcmN1bGFyT3BlbmluZ0Nvcm5lciIsImNpcmN1bGFyT3BlbmluZ1BlcnNwZWN0aXZlVmVjdG9yIiwiY3ViaWNDdXJ2ZVRvUG9pbnQiLCJtaW51cyIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiQnVybmVyU3RhbmROb2RlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE0LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFNjZW5lcnkgbm9kZSB0aGF0IHJlcHJlc2VudHMgYSBidXJuZXIgc3RhbmQgaW4gdGhlIHZpZXcuICBBIGJ1cm5lciBzdGFuZCBpcyBhIGZhdXgtM0QgcmVwcmVzZW50YXRpb24gb2YgYW4gb2JqZWN0XHJcbiAqIHVwb24gd2hpY2ggb3RoZXIgb2JqZWN0cyBtYXkgYmUgcGxhY2VkIGluIG9yZGVyIHRvIGJlIGhlYXRlZCBvciBjb29sZWQuICBUaGUgYnVybmVyIGlzIG5vdCBpbmNsdWRlZC5cclxuICpcclxuICogQGF1dGhvciBKb2huIEJsYW5jb1xyXG4gKi9cclxuXHJcbmltcG9ydCBWZWN0b3IyIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9WZWN0b3IyLmpzJztcclxuaW1wb3J0IHsgTGluZVN0eWxlcywgU2hhcGUgfSBmcm9tICcuLi8uLi8uLi8uLi9raXRlL2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgeyBOb2RlLCBQYXRoIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IGVuZXJneUZvcm1zQW5kQ2hhbmdlcyBmcm9tICcuLi8uLi9lbmVyZ3lGb3Jtc0FuZENoYW5nZXMuanMnO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IEJVUk5FUl9TVEFORF9TVFJPS0VfTElORV9XSURUSCA9IDI7XHJcbmNvbnN0IEJVUk5FUl9TVEFORF9TVFJPS0VfQ09MT1IgPSAnYmxhY2snO1xyXG5jb25zdCBQRVJTUEVDVElWRV9BTkdMRSA9IE1hdGguUEkgLyA0OyAvLyBwb3NpdGl2ZSBpcyBjb3VudGVyY2xvY2t3aXNlLCBhIHZhbHVlIG9mIDAgcHJvZHVjZXMgYSBub24tc2tld2VkIHJlY3RhbmdsZVxyXG5cclxuY2xhc3MgQnVybmVyU3RhbmROb2RlIGV4dGVuZHMgTm9kZSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7UmVjdGFuZ2xlfSByZWN0XHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHByb2plY3RlZEVkZ2VMZW5ndGhcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvciggcmVjdCwgcHJvamVjdGVkRWRnZUxlbmd0aCApIHtcclxuICAgIHN1cGVyKCk7XHJcblxyXG4gICAgLy8gYWRkIHRoZSBsZWZ0IGFuZCByaWdodCBzaWRlcyBvZiB0aGUgc3RhbmRcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMuY3JlYXRlQnVybmVyU3RhbmRTaWRlKCBuZXcgVmVjdG9yMiggcmVjdC54LCByZWN0LnkgKSwgcmVjdC5oZWlnaHQsIHByb2plY3RlZEVkZ2VMZW5ndGggKSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggdGhpcy5jcmVhdGVCdXJuZXJTdGFuZFNpZGUoIG5ldyBWZWN0b3IyKCByZWN0Lm1heFgsIHJlY3QueSApLCByZWN0LmhlaWdodCwgcHJvamVjdGVkRWRnZUxlbmd0aCApICk7XHJcblxyXG4gICAgLy8gYWRkIHRoZSB0b3Agb2YgdGhlIGJ1cm5lciBzdGFuZFxyXG4gICAgdGhpcy5hZGRDaGlsZCggdGhpcy5jcmVhdGVCdXJuZXJTdGFuZFRvcCggbmV3IFZlY3RvcjIoIHJlY3QueCwgcmVjdC55ICksIHJlY3Qud2lkdGgsIHByb2plY3RlZEVkZ2VMZW5ndGggKSApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogZmFjdG9yeSBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgdGhlIHNpZGVzIG9mIHRoZSBzdGFuZFxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0b3BDZW50ZXJcclxuICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0XHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGVkZ2VMZW5ndGhcclxuICAgKiBAcmV0dXJucyB7UGF0aH1cclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIGNyZWF0ZUJ1cm5lclN0YW5kU2lkZSggdG9wQ2VudGVyLCBoZWlnaHQsIGVkZ2VMZW5ndGggKSB7XHJcblxyXG4gICAgLy8gZHJhdyB0aGUgc2lkZSBhcyBhIHBhcmFsbGVsb2dyYW1cclxuICAgIGNvbnN0IHVwcGVyTGVmdENvcm5lciA9IHRvcENlbnRlci5wbHVzKCBuZXcgVmVjdG9yMiggLWVkZ2VMZW5ndGggLyAyLCAwICkucm90YXRlKCAtUEVSU1BFQ1RJVkVfQU5HTEUgKSApO1xyXG4gICAgY29uc3QgbG93ZXJMZWZ0Q29ybmVyID0gdXBwZXJMZWZ0Q29ybmVyLnBsdXMoIG5ldyBWZWN0b3IyKCAwLCBoZWlnaHQgKSApO1xyXG4gICAgY29uc3QgbG93ZXJSaWdodENvcm5lciA9IGxvd2VyTGVmdENvcm5lci5wbHVzKCBuZXcgVmVjdG9yMiggZWRnZUxlbmd0aCwgMCApLnJvdGF0ZSggLVBFUlNQRUNUSVZFX0FOR0xFICkgKTtcclxuICAgIGNvbnN0IHVwcGVyUmlnaHRDb3JuZXIgPSBsb3dlclJpZ2h0Q29ybmVyLnBsdXMoIG5ldyBWZWN0b3IyKCAwLCAtaGVpZ2h0ICkgKTtcclxuXHJcbiAgICBsZXQgc2hhcGUgPSBuZXcgU2hhcGUoKTtcclxuICAgIHNoYXBlLm1vdmVUb1BvaW50KCB0b3BDZW50ZXIgKVxyXG4gICAgICAubGluZVRvUG9pbnQoIHVwcGVyTGVmdENvcm5lciApXHJcbiAgICAgIC5saW5lVG9Qb2ludCggbG93ZXJMZWZ0Q29ybmVyIClcclxuICAgICAgLmxpbmVUb1BvaW50KCBsb3dlclJpZ2h0Q29ybmVyIClcclxuICAgICAgLmxpbmVUb1BvaW50KCB1cHBlclJpZ2h0Q29ybmVyIClcclxuICAgICAgLmNsb3NlKCk7XHJcblxyXG4gICAgY29uc3Qgc3Ryb2tlU3R5bGVzID0gbmV3IExpbmVTdHlsZXMoIHtcclxuICAgICAgbGluZVdpZHRoOiBCVVJORVJfU1RBTkRfU1RST0tFX0xJTkVfV0lEVEgsXHJcbiAgICAgIGxpbmVDYXA6ICdidXR0JyxcclxuICAgICAgbGluZUpvaW46ICdyb3VuZCdcclxuICAgIH0gKTtcclxuICAgIHNoYXBlID0gc2hhcGUuZ2V0U3Ryb2tlZFNoYXBlKCBzdHJva2VTdHlsZXMgKTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFBhdGgoIHNoYXBlLCB7XHJcbiAgICAgIHN0cm9rZTogQlVSTkVSX1NUQU5EX1NUUk9LRV9DT0xPUixcclxuICAgICAgbGluZVdpZHRoOiBCVVJORVJfU1RBTkRfU1RST0tFX0xJTkVfV0lEVEhcclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGZhY3RvcnkgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIHRoZSB0b3Agb2YgdGhlIHN0YW5kXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGxlZnRDZW50ZXJcclxuICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGhcclxuICAgKiBAcGFyYW0ge251bWJlcn0gZWRnZUxlbmd0aFxyXG4gICAqIEByZXR1cm5zIHtQYXRofVxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgY3JlYXRlQnVybmVyU3RhbmRUb3AoIGxlZnRDZW50ZXIsIHdpZHRoLCBlZGdlTGVuZ3RoICkge1xyXG5cclxuICAgIC8vIGNyZWF0ZSB0aGUgcG9pbnRzIGZvciB0aGUgb3V0bGluZSBvZiB0aGUgcGVyc3BlY3RpdmUgcmVjdGFuZ2xlXHJcbiAgICBjb25zdCB1cHBlckxlZnRDb3JuZXIgPSBsZWZ0Q2VudGVyLnBsdXMoIG5ldyBWZWN0b3IyKCBlZGdlTGVuZ3RoIC8gMiwgMCApLnJvdGF0ZWQoIC1QRVJTUEVDVElWRV9BTkdMRSApICk7XHJcbiAgICBjb25zdCB1cHBlclJpZ2h0Q29ybmVyID0gdXBwZXJMZWZ0Q29ybmVyLnBsdXMoIG5ldyBWZWN0b3IyKCB3aWR0aCwgMCApICk7XHJcbiAgICBjb25zdCBsb3dlclJpZ2h0Q29ybmVyID0gdXBwZXJSaWdodENvcm5lci5wbHVzKCBuZXcgVmVjdG9yMiggLWVkZ2VMZW5ndGgsIDAgKS5yb3RhdGUoIC1QRVJTUEVDVElWRV9BTkdMRSApICk7XHJcbiAgICBjb25zdCBsb3dlckxlZnRDb3JuZXIgPSBsb3dlclJpZ2h0Q29ybmVyLnBsdXMoIG5ldyBWZWN0b3IyKCAtd2lkdGgsIDAgKSApO1xyXG5cclxuICAgIC8vIGNyZWF0ZSB0aGUgcG9pbnRzIGZvciB0aGUgY2lyY3VsYXIgb3BlbmluZyBpbiB0aGUgdG9wXHJcbiAgICBjb25zdCB1cHBlckxlZnRDaXJjdWxhck9wZW5pbmdDb3JuZXIgPSB1cHBlckxlZnRDb3JuZXIucGx1cyggbmV3IFZlY3RvcjIoIHdpZHRoICogMC4yNSwgMCApICk7XHJcbiAgICBjb25zdCB1cHBlclJpZ2h0Q2lyY3VsYXJPcGVuaW5nQ29ybmVyID0gdXBwZXJMZWZ0Q29ybmVyLnBsdXMoIG5ldyBWZWN0b3IyKCB3aWR0aCAqIDAuNzUsIDAgKSApO1xyXG4gICAgY29uc3QgbG93ZXJMZWZ0Q2lyY3VsYXJPcGVuaW5nQ29ybmVyID0gbG93ZXJMZWZ0Q29ybmVyLnBsdXMoIG5ldyBWZWN0b3IyKCB3aWR0aCAqIDAuMjUsIDAgKSApO1xyXG4gICAgY29uc3QgbG93ZXJSaWdodENpcmN1bGFyT3BlbmluZ0Nvcm5lciA9IGxvd2VyTGVmdENvcm5lci5wbHVzKCBuZXcgVmVjdG9yMiggd2lkdGggKiAwLjc1LCAwICkgKTtcclxuXHJcbiAgICAvLyBjcmVhdGUgdGhlIGNvbnRyb2wgcG9pbnRzIGZvciB0aGUgY2lyY3VsYXIgb3BlbmluZyBpbiB0aGUgdG9wXHJcbiAgICBjb25zdCBjaXJjdWxhck9wZW5pbmdQZXJzcGVjdGl2ZVZlY3RvciA9IG5ldyBWZWN0b3IyKCBlZGdlTGVuZ3RoICogMC41LCAwICkucm90YXRlKCAtUEVSU1BFQ1RJVkVfQU5HTEUgKTtcclxuICAgIGxldCBzaGFwZSA9IG5ldyBTaGFwZSgpO1xyXG4gICAgc2hhcGUubW92ZVRvUG9pbnQoIHVwcGVyTGVmdENvcm5lciApXHJcbiAgICAgIC5saW5lVG9Qb2ludCggdXBwZXJMZWZ0Q2lyY3VsYXJPcGVuaW5nQ29ybmVyIClcclxuICAgICAgLmN1YmljQ3VydmVUb1BvaW50KCB1cHBlckxlZnRDaXJjdWxhck9wZW5pbmdDb3JuZXIucGx1cyggY2lyY3VsYXJPcGVuaW5nUGVyc3BlY3RpdmVWZWN0b3IgKSwgdXBwZXJSaWdodENpcmN1bGFyT3BlbmluZ0Nvcm5lci5wbHVzKCBjaXJjdWxhck9wZW5pbmdQZXJzcGVjdGl2ZVZlY3RvciApLCB1cHBlclJpZ2h0Q2lyY3VsYXJPcGVuaW5nQ29ybmVyIClcclxuICAgICAgLmxpbmVUb1BvaW50KCB1cHBlclJpZ2h0Q29ybmVyIClcclxuICAgICAgLmxpbmVUb1BvaW50KCBsb3dlclJpZ2h0Q29ybmVyIClcclxuICAgICAgLmxpbmVUb1BvaW50KCBsb3dlclJpZ2h0Q2lyY3VsYXJPcGVuaW5nQ29ybmVyIClcclxuICAgICAgLmN1YmljQ3VydmVUb1BvaW50KCBsb3dlclJpZ2h0Q2lyY3VsYXJPcGVuaW5nQ29ybmVyLm1pbnVzKCBjaXJjdWxhck9wZW5pbmdQZXJzcGVjdGl2ZVZlY3RvciApLCBsb3dlckxlZnRDaXJjdWxhck9wZW5pbmdDb3JuZXIubWludXMoIGNpcmN1bGFyT3BlbmluZ1BlcnNwZWN0aXZlVmVjdG9yICksIGxvd2VyTGVmdENpcmN1bGFyT3BlbmluZ0Nvcm5lciApXHJcbiAgICAgIC5saW5lVG9Qb2ludCggbG93ZXJMZWZ0Q29ybmVyIClcclxuICAgICAgLmNsb3NlKCk7XHJcblxyXG4gICAgY29uc3Qgc3Ryb2tlU3R5bGVzID0gbmV3IExpbmVTdHlsZXMoIHtcclxuICAgICAgbGluZVdpZHRoOiBCVVJORVJfU1RBTkRfU1RST0tFX0xJTkVfV0lEVEgsXHJcbiAgICAgIGxpbmVDYXA6ICdidXR0JyxcclxuICAgICAgbGluZUpvaW46ICdiZXZlbCdcclxuICAgIH0gKTtcclxuICAgIHNoYXBlID0gc2hhcGUuZ2V0U3Ryb2tlZFNoYXBlKCBzdHJva2VTdHlsZXMgKTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFBhdGgoIHNoYXBlLCB7XHJcbiAgICAgIHN0cm9rZTogQlVSTkVSX1NUQU5EX1NUUk9LRV9DT0xPUixcclxuICAgICAgbGluZVdpZHRoOiBCVVJORVJfU1RBTkRfU1RST0tFX0xJTkVfV0lEVEhcclxuICAgIH0gKTtcclxuICB9XHJcbn1cclxuXHJcbmVuZXJneUZvcm1zQW5kQ2hhbmdlcy5yZWdpc3RlciggJ0J1cm5lclN0YW5kTm9kZScsIEJ1cm5lclN0YW5kTm9kZSApO1xyXG5leHBvcnQgZGVmYXVsdCBCdXJuZXJTdGFuZE5vZGU7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsT0FBTyxNQUFNLCtCQUErQjtBQUNuRCxTQUFTQyxVQUFVLEVBQUVDLEtBQUssUUFBUSxnQ0FBZ0M7QUFDbEUsU0FBU0MsSUFBSSxFQUFFQyxJQUFJLFFBQVEsbUNBQW1DO0FBQzlELE9BQU9DLHFCQUFxQixNQUFNLGdDQUFnQzs7QUFFbEU7QUFDQSxNQUFNQyw4QkFBOEIsR0FBRyxDQUFDO0FBQ3hDLE1BQU1DLHlCQUF5QixHQUFHLE9BQU87QUFDekMsTUFBTUMsaUJBQWlCLEdBQUdDLElBQUksQ0FBQ0MsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDOztBQUV2QyxNQUFNQyxlQUFlLFNBQVNSLElBQUksQ0FBQztFQUVqQztBQUNGO0FBQ0E7QUFDQTtFQUNFUyxXQUFXQSxDQUFFQyxJQUFJLEVBQUVDLG1CQUFtQixFQUFHO0lBQ3ZDLEtBQUssQ0FBQyxDQUFDOztJQUVQO0lBQ0EsSUFBSSxDQUFDQyxRQUFRLENBQUUsSUFBSSxDQUFDQyxxQkFBcUIsQ0FBRSxJQUFJaEIsT0FBTyxDQUFFYSxJQUFJLENBQUNJLENBQUMsRUFBRUosSUFBSSxDQUFDSyxDQUFFLENBQUMsRUFBRUwsSUFBSSxDQUFDTSxNQUFNLEVBQUVMLG1CQUFvQixDQUFFLENBQUM7SUFDOUcsSUFBSSxDQUFDQyxRQUFRLENBQUUsSUFBSSxDQUFDQyxxQkFBcUIsQ0FBRSxJQUFJaEIsT0FBTyxDQUFFYSxJQUFJLENBQUNPLElBQUksRUFBRVAsSUFBSSxDQUFDSyxDQUFFLENBQUMsRUFBRUwsSUFBSSxDQUFDTSxNQUFNLEVBQUVMLG1CQUFvQixDQUFFLENBQUM7O0lBRWpIO0lBQ0EsSUFBSSxDQUFDQyxRQUFRLENBQUUsSUFBSSxDQUFDTSxvQkFBb0IsQ0FBRSxJQUFJckIsT0FBTyxDQUFF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