// Copyright 2019-2022, University of Colorado Boulder

/**
 * QUnit tests for Utterance and UtteranceQueue that use AriaLiveAnnouncer as the Announcer.
 *
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */

import stepTimer from '../../axon/js/stepTimer.js';
import AriaLiveAnnouncer from './AriaLiveAnnouncer.js';
import responseCollector from './responseCollector.js';
import ResponsePacket from './ResponsePacket.js';
import Utterance from './Utterance.js';
import UtteranceQueue from './UtteranceQueue.js';
let sleepTiming = 0;
const ariaLiveAnnouncer = new AriaLiveAnnouncer({
  respectResponseCollectorProperties: true
});
const utteranceQueue = new UtteranceQueue(ariaLiveAnnouncer);

// helper es6 functions from  https://stackoverflow.com/questions/33289726/combination-of-async-function-await-settimeout/33292942
function timeout(ms) {
  return new Promise(resolve => setTimeout(resolve, ms)); // eslint-disable-line bad-sim-text
}

let alerts = [];
let intervalID;
QUnit.module('Utterance', {
  before() {
    // timer step in seconds, stepped 60 times per second
    const timerInterval = 1 / 60;

    // step the timer, because utteranceQueue runs on timer
    let previousTime = Date.now(); // in ms

    intervalID = window.setInterval(() => {
      // eslint-disable-line bad-sim-text

      // in ms
      const currentTime = Date.now();
      const elapsedTime = currentTime - previousTime;
      stepTimer.emit(elapsedTime / 1000); // step timer in seconds

      previousTime = currentTime;
    }, timerInterval * 1000);

    // whenever announcing, get a callback and populate the alerts array
    ariaLiveAnnouncer.announcementCompleteEmitter.addListener(utterance => {
      alerts.unshift(utterance['previousAlertText'] + '');
    });

    // slightly slower than the interval that the utteranceQueue will wait so we don't have a race condition
    sleepTiming = AriaLiveAnnouncer.ARIA_LIVE_DELAY * 1.5;
  },
  async beforeEach() {
    // clear the alerts before each new test
    alerts = [];
    utteranceQueue.clear();
    responseCollector.reset();

    // wait for the Announcer to be ready to speak again
    await timeout(sleepTiming);
  },
  after() {
    clearInterval(intervalID);
  }
});
QUnit.test('Basic Utterance testing', async assert => {
  // for this test, we just want to verify that the alert makes it through to ariaLiveAnnouncer
  const alertContent = 'hi';
  const utterance = new Utterance({
    alert: alertContent,
    alertStableDelay: 0 // alert as fast as possible
  });

  utteranceQueue.addToBack(utterance);
  await timeout(sleepTiming);
  assert.ok(alerts[0] === alertContent, 'first alert made it to ariaLiveAnnouncer');
  const otherAlert = 'alert';
  utterance.alert = otherAlert;
  utteranceQueue.addToBack(utterance);
  await timeout(sleepTiming);
  assert.ok(alerts[0] === otherAlert, 'second alert made it to ariaLiveAnnouncer');
  utterance.reset();
  assert.ok(utterance['previousAlertText'] === null, 'previousAlertText reset');
});
QUnit.test('alertStable and alertStableDelay tests', async assert => {
  const highFrequencyUtterance = new Utterance({
    alert: 'Rapidly Changing',
    alertStableDelay: 0 // we want to hear the utterance every time it is added to the queue
  });

  const numAlerts = 4;

  // add the utterance to the back many times, by default they should collapse
  for (let i = 0; i < numAlerts; i++) {
    utteranceQueue.addToBack(highFrequencyUtterance);
  }
  assert.ok(utteranceQueue['queue'].length === 1, 'utterances should collapse by default after addToBack');
  await timeout(sleepTiming);

  // cleanup step
  assert.ok(utteranceQueue['queue'].length === 0, 'cleared queue');

  /////////////////////////////////////////

  alerts = [];
  const stableDelay = sleepTiming * 3.1; // slightly longer than 3x
  const myUtterance = new Utterance({
    alert: 'hi',
    alertStableDelay: stableDelay
  });
  for (let i = 0; i < 100; i++) {
    utteranceQueue.addToBack(myUtterance);
  }
  assert.ok(utteranceQueue['queue'].length === 1, 'same Utterance should override in queue');
  await timeout(sleepTiming);

  // The wrapper has the timing variables
  const utteranceWrapper = utteranceQueue['queue'][0];

  // It is a bit dependent on the system running as to if this sleep time will be too long to flush this one too.
  if (utteranceWrapper) {
    assert.ok(utteranceWrapper.stableTime >= utteranceWrapper.timeInQueue, 'utterance should be in queue for at least stableDelay');
    assert.ok(utteranceQueue['queue'].length === 1, 'Alert still in queue after waiting less than alertStableDelay but more than stepInterval.');
  }
  await timeout(stableDelay);
  assert.ok(utteranceQueue['queue'].length === 0, 'Utterance alerted after alertStableDelay time passed');
  assert.ok(alerts.length === 1, 'utterance ended up in alerts list');
  assert.ok(alerts[0] === myUtterance.alert, 'utterance text matches that which is expected');
});
QUnit.test('alertMaximumDelay tests', async assert => {
  const rapidlyChanging = 'Rapidly Changing';
  const highFrequencyUtterance = new Utterance({
    alert: rapidlyChanging,
    alertStableDelay: 200,
    alertMaximumDelay: 300
  });
  utteranceQueue.addToBack(highFrequencyUtterance);
  assert.ok(utteranceQueue['queue'].length === 1, 'sanity 1');
  await timeout(100);
  assert.ok(utteranceQueue['queue'].length === 1, 'still has it, not stable, not max');
  utteranceQueue.addToBack(highFrequencyUtterance);
  assert.ok(utteranceQueue['queue'].length === 1, 'sanity 2');
  await timeout(100);
  assert.ok(utteranceQueue['queue'].length === 1, 'still has it, not stable, not max, 2');
  utteranceQueue.addToBack(highFrequencyUtterance);
  assert.ok(utteranceQueue['queue'].length === 1, 'sanity 2');
  await timeout(150);
  assert.ok(utteranceQueue['queue'].length === 0, 'not stable, but past max');
  assert.ok(alerts[0] === rapidlyChanging, 'it was announced');
});
QUnit.test('announceImmediately', async assert => {
  const myUtteranceText = 'This is my utterance text';
  const myUtterance = new Utterance({
    alert: myUtteranceText
  });
  utteranceQueue.announceImmediately(myUtterance);
  assert.ok(utteranceQueue['queue'].length === 0, 'should not be added to the queue');
  assert.ok(alerts[0] === myUtteranceText, 'should be immediately alerted');
  utteranceQueue.addToBack(myUtterance);
  assert.ok(utteranceQueue['queue'].length === 1, 'one added to the queue');
  assert.ok(alerts.length === 1, 'still just one alert occurred');
  utteranceQueue.announceImmediately(myUtterance);
  assert.ok(utteranceQueue['queue'].length === 1, 'announceImmediately removed duplicates, but myUtterance still in queue');
  await timeout(sleepTiming);
  assert.ok(alerts.length === 2, 'myUtterance announced immediately when Announcer was ready');
  assert.ok(alerts[0] === myUtteranceText, 'announceImmediately Utterance was last alert');
});
QUnit.test('ResponsePacket tests', async assert => {
  responseCollector.nameResponsesEnabledProperty.value = true;
  responseCollector.objectResponsesEnabledProperty.value = true;
  responseCollector.contextResponsesEnabledProperty.value = true;
  responseCollector.hintResponsesEnabledProperty.value = true;
  const NAME = 'name';
  const OBJECT = 'object';
  const CONTEXT = 'context';
  const HINT = 'hint';
  const utterance = new Utterance({
    alertStableDelay: 0,
    alert: new ResponsePacket({
      nameResponse: NAME,
      objectResponse: OBJECT,
      contextResponse: CONTEXT,
      hintResponse: HINT
    })
  });
  utteranceQueue.addToBack(utterance);
  await timeout(sleepTiming);
  assert.ok(alerts[0].includes(NAME), 'name expected');
  assert.ok(alerts[0].includes(OBJECT), 'object expected');
  assert.ok(alerts[0].includes(CONTEXT), 'context expected');
  assert.ok(alerts[0].includes(HINT), 'hint expected');
  responseCollector.nameResponsesEnabledProperty.value = false;
  utteranceQueue.addToBack(utterance);
  await timeout(sleepTiming);
  assert.ok(!alerts[0].includes(NAME), 'name expected');
  assert.ok(alerts[0].includes(OBJECT), 'object expected');
  assert.ok(alerts[0].includes(CONTEXT), 'context expected');
  assert.ok(alerts[0].includes(HINT), 'hint expected');
  responseCollector.nameResponsesEnabledProperty.value = false;
  responseCollector.objectResponsesEnabledProperty.value = false;
  responseCollector.contextResponsesEnabledProperty.value = false;
  responseCollector.hintResponsesEnabledProperty.value = true; // need something in order to alert

  utteranceQueue.addToBack(utterance);
  await timeout(sleepTiming);
  assert.ok(!alerts[0].includes(NAME), 'name not expected');
  assert.ok(!alerts[0].includes(OBJECT), 'object not expected');
  assert.ok(!alerts[0].includes(CONTEXT), 'context not expected');
  assert.ok(alerts[0] === HINT, 'hint expected');
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzdGVwVGltZXIiLCJBcmlhTGl2ZUFubm91bmNlciIsInJlc3BvbnNlQ29sbGVjdG9yIiwiUmVzcG9uc2VQYWNrZXQiLCJVdHRlcmFuY2UiLCJVdHRlcmFuY2VRdWV1ZSIsInNsZWVwVGltaW5nIiwiYXJpYUxpdmVBbm5vdW5jZXIiLCJyZXNwZWN0UmVzcG9uc2VDb2xsZWN0b3JQcm9wZXJ0aWVzIiwidXR0ZXJhbmNlUXVldWUiLCJ0aW1lb3V0IiwibXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJhbGVydHMiLCJpbnRlcnZhbElEIiwiUVVuaXQiLCJtb2R1bGUiLCJiZWZvcmUiLCJ0aW1lckludGVydmFsIiwicHJldmlvdXNUaW1lIiwiRGF0ZSIsIm5vdyIsIndpbmRvdyIsInNldEludGVydmFsIiwiY3VycmVudFRpbWUiLCJlbGFwc2VkVGltZSIsImVtaXQiLCJhbm5vdW5jZW1lbnRDb21wbGV0ZUVtaXR0ZXIiLCJhZGRMaXN0ZW5lciIsInV0dGVyYW5jZSIsInVuc2hpZnQiLCJBUklBX0xJVkVfREVMQVkiLCJiZWZvcmVFYWNoIiwiY2xlYXIiLCJyZXNldCIsImFmdGVyIiwiY2xlYXJJbnRlcnZhbCIsInRlc3QiLCJhc3NlcnQiLCJhbGVydENvbnRlbnQiLCJhbGVydCIsImFsZXJ0U3RhYmxlRGVsYXkiLCJhZGRUb0JhY2siLCJvayIsIm90aGVyQWxlcnQiLCJoaWdoRnJlcXVlbmN5VXR0ZXJhbmNlIiwibnVtQWxlcnRzIiwiaSIsImxlbmd0aCIsInN0YWJsZURlbGF5IiwibXlVdHRlcmFuY2UiLCJ1dHRlcmFuY2VXcmFwcGVyIiwic3RhYmxlVGltZSIsInRpbWVJblF1ZXVlIiwicmFwaWRseUNoYW5naW5nIiwiYWxlcnRNYXhpbXVtRGVsYXkiLCJteVV0dGVyYW5jZVRleHQiLCJhbm5vdW5jZUltbWVkaWF0ZWx5IiwibmFtZVJlc3BvbnNlc0VuYWJsZWRQcm9wZXJ0eSIsInZhbHVlIiwib2JqZWN0UmVzcG9uc2VzRW5hYmxlZFByb3BlcnR5IiwiY29udGV4dFJlc3BvbnNlc0VuYWJsZWRQcm9wZXJ0eSIsImhpbnRSZXNwb25zZXNFbmFibGVkUHJvcGVydHkiLCJOQU1FIiwiT0JKRUNUIiwiQ09OVEVYVCIsIkhJTlQiLCJuYW1lUmVzcG9uc2UiLCJvYmplY3RSZXNwb25zZSIsImNvbnRleHRSZXNwb25zZSIsImhpbnRSZXNwb25zZSIsImluY2x1ZGVzIl0sInNvdXJjZXMiOlsiVXR0ZXJhbmNlVGVzdHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogUVVuaXQgdGVzdHMgZm9yIFV0dGVyYW5jZSBhbmQgVXR0ZXJhbmNlUXVldWUgdGhhdCB1c2UgQXJpYUxpdmVBbm5vdW5jZXIgYXMgdGhlIEFubm91bmNlci5cclxuICpcclxuICogQGF1dGhvciBNaWNoYWVsIEthdXptYW5uIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxyXG4gKi9cclxuXHJcbmltcG9ydCBzdGVwVGltZXIgZnJvbSAnLi4vLi4vYXhvbi9qcy9zdGVwVGltZXIuanMnO1xyXG5pbXBvcnQgQXJpYUxpdmVBbm5vdW5jZXIgZnJvbSAnLi9BcmlhTGl2ZUFubm91bmNlci5qcyc7XHJcbmltcG9ydCByZXNwb25zZUNvbGxlY3RvciBmcm9tICcuL3Jlc3BvbnNlQ29sbGVjdG9yLmpzJztcclxuaW1wb3J0IFJlc3BvbnNlUGFja2V0IGZyb20gJy4vUmVzcG9uc2VQYWNrZXQuanMnO1xyXG5pbXBvcnQgVXR0ZXJhbmNlIGZyb20gJy4vVXR0ZXJhbmNlLmpzJztcclxuaW1wb3J0IFV0dGVyYW5jZVF1ZXVlIGZyb20gJy4vVXR0ZXJhbmNlUXVldWUuanMnO1xyXG5cclxubGV0IHNsZWVwVGltaW5nID0gMDtcclxuXHJcbmNvbnN0IGFyaWFMaXZlQW5ub3VuY2VyID0gbmV3IEFyaWFMaXZlQW5ub3VuY2VyKCB7IHJlc3BlY3RSZXNwb25zZUNvbGxlY3RvclByb3BlcnRpZXM6IHRydWUgfSApO1xyXG5jb25zdCB1dHRlcmFuY2VRdWV1ZSA9IG5ldyBVdHRlcmFuY2VRdWV1ZSggYXJpYUxpdmVBbm5vdW5jZXIgKTtcclxuXHJcbi8vIGhlbHBlciBlczYgZnVuY3Rpb25zIGZyb20gIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzMzMjg5NzI2L2NvbWJpbmF0aW9uLW9mLWFzeW5jLWZ1bmN0aW9uLWF3YWl0LXNldHRpbWVvdXQvMzMyOTI5NDJcclxuZnVuY3Rpb24gdGltZW91dCggbXM6IG51bWJlciApOiBQcm9taXNlPHVua25vd24+IHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoIHJlc29sdmUgPT4gc2V0VGltZW91dCggcmVzb2x2ZSwgbXMgKSApOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhZC1zaW0tdGV4dFxyXG59XHJcblxyXG5sZXQgYWxlcnRzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxubGV0IGludGVydmFsSUQ6IG51bWJlcjtcclxuUVVuaXQubW9kdWxlKCAnVXR0ZXJhbmNlJywge1xyXG4gIGJlZm9yZSgpIHtcclxuXHJcbiAgICAvLyB0aW1lciBzdGVwIGluIHNlY29uZHMsIHN0ZXBwZWQgNjAgdGltZXMgcGVyIHNlY29uZFxyXG4gICAgY29uc3QgdGltZXJJbnRlcnZhbCA9IDEgLyA2MDtcclxuXHJcbiAgICAvLyBzdGVwIHRoZSB0aW1lciwgYmVjYXVzZSB1dHRlcmFuY2VRdWV1ZSBydW5zIG9uIHRpbWVyXHJcbiAgICBsZXQgcHJldmlvdXNUaW1lID0gRGF0ZS5ub3coKTsgLy8gaW4gbXNcclxuXHJcbiAgICBpbnRlcnZhbElEID0gd2luZG93LnNldEludGVydmFsKCAoKSA9PiB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFkLXNpbS10ZXh0XHJcblxyXG4gICAgICAvLyBpbiBtc1xyXG4gICAgICBjb25zdCBjdXJyZW50VGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgIGNvbnN0IGVsYXBzZWRUaW1lID0gY3VycmVudFRpbWUgLSBwcmV2aW91c1RpbWU7XHJcblxyXG4gICAgICBzdGVwVGltZXIuZW1pdCggZWxhcHNlZFRpbWUgLyAxMDAwICk7IC8vIHN0ZXAgdGltZXIgaW4gc2Vjb25kc1xyXG5cclxuICAgICAgcHJldmlvdXNUaW1lID0gY3VycmVudFRpbWU7XHJcbiAgICB9LCB0aW1lckludGVydmFsICogMTAwMCApO1xyXG5cclxuICAgIC8vIHdoZW5ldmVyIGFubm91bmNpbmcsIGdldCBhIGNhbGxiYWNrIGFuZCBwb3B1bGF0ZSB0aGUgYWxlcnRzIGFycmF5XHJcbiAgICBhcmlhTGl2ZUFubm91bmNlci5hbm5vdW5jZW1lbnRDb21wbGV0ZUVtaXR0ZXIuYWRkTGlzdGVuZXIoIHV0dGVyYW5jZSA9PiB7XHJcbiAgICAgIGFsZXJ0cy51bnNoaWZ0KCB1dHRlcmFuY2VbICdwcmV2aW91c0FsZXJ0VGV4dCcgXSArICcnICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gc2xpZ2h0bHkgc2xvd2VyIHRoYW4gdGhlIGludGVydmFsIHRoYXQgdGhlIHV0dGVyYW5jZVF1ZXVlIHdpbGwgd2FpdCBzbyB3ZSBkb24ndCBoYXZlIGEgcmFjZSBjb25kaXRpb25cclxuICAgIHNsZWVwVGltaW5nID0gQXJpYUxpdmVBbm5vdW5jZXIuQVJJQV9MSVZFX0RFTEFZICogMS41O1xyXG4gIH0sXHJcbiAgYXN5bmMgYmVmb3JlRWFjaCgpIHtcclxuXHJcbiAgICAvLyBjbGVhciB0aGUgYWxlcnRzIGJlZm9yZSBlYWNoIG5ldyB0ZXN0XHJcbiAgICBhbGVydHMgPSBbXTtcclxuICAgIHV0dGVyYW5jZVF1ZXVlLmNsZWFyKCk7XHJcbiAgICByZXNwb25zZUNvbGxlY3Rvci5yZXNldCgpO1xyXG5cclxuICAgIC8vIHdhaXQgZm9yIHRoZSBBbm5vdW5jZXIgdG8gYmUgcmVhZHkgdG8gc3BlYWsgYWdhaW5cclxuICAgIGF3YWl0IHRpbWVvdXQoIHNsZWVwVGltaW5nICk7XHJcbiAgfSxcclxuICBhZnRlcigpIHtcclxuICAgIGNsZWFySW50ZXJ2YWwoIGludGVydmFsSUQhICk7XHJcbiAgfVxyXG59ICk7XHJcblxyXG5RVW5pdC50ZXN0KCAnQmFzaWMgVXR0ZXJhbmNlIHRlc3RpbmcnLCBhc3luYyBhc3NlcnQgPT4ge1xyXG5cclxuICAvLyBmb3IgdGhpcyB0ZXN0LCB3ZSBqdXN0IHdhbnQgdG8gdmVyaWZ5IHRoYXQgdGhlIGFsZXJ0IG1ha2VzIGl0IHRocm91Z2ggdG8gYXJpYUxpdmVBbm5vdW5jZXJcclxuICBjb25zdCBhbGVydENvbnRlbnQgPSAnaGknO1xyXG4gIGNvbnN0IHV0dGVyYW5jZSA9IG5ldyBVdHRlcmFuY2UoIHtcclxuICAgIGFsZXJ0OiBhbGVydENvbnRlbnQsXHJcbiAgICBhbGVydFN0YWJsZURlbGF5OiAwIC8vIGFsZXJ0IGFzIGZhc3QgYXMgcG9zc2libGVcclxuICB9ICk7XHJcbiAgdXR0ZXJhbmNlUXVldWUuYWRkVG9CYWNrKCB1dHRlcmFuY2UgKTtcclxuXHJcbiAgYXdhaXQgdGltZW91dCggc2xlZXBUaW1pbmcgKTtcclxuICBhc3NlcnQub2soIGFsZXJ0c1sgMCBdID09PSBhbGVydENvbnRlbnQsICdmaXJzdCBhbGVydCBtYWRlIGl0IHRvIGFyaWFMaXZlQW5ub3VuY2VyJyApO1xyXG5cclxuICBjb25zdCBvdGhlckFsZXJ0ID0gJ2FsZXJ0JztcclxuICB1dHRlcmFuY2UuYWxlcnQgPSBvdGhlckFsZXJ0O1xyXG4gIHV0dGVyYW5jZVF1ZXVlLmFkZFRvQmFjayggdXR0ZXJhbmNlICk7XHJcbiAgYXdhaXQgdGltZW91dCggc2xlZXBUaW1pbmcgKTtcclxuICBhc3NlcnQub2soIGFsZXJ0c1sgMCBdID09PSBvdGhlckFsZXJ0LCAnc2Vjb25kIGFsZXJ0IG1hZGUgaXQgdG8gYXJpYUxpdmVBbm5vdW5jZXInICk7XHJcblxyXG4gIHV0dGVyYW5jZS5yZXNldCgpO1xyXG4gIGFzc2VydC5vayggdXR0ZXJhbmNlWyAncHJldmlvdXNBbGVydFRleHQnIF0gPT09IG51bGwsICdwcmV2aW91c0FsZXJ0VGV4dCByZXNldCcgKTtcclxufSApO1xyXG5cclxuUVVuaXQudGVzdCggJ2FsZXJ0U3RhYmxlIGFuZCBhbGVydFN0YWJsZURlbGF5IHRlc3RzJywgYXN5bmMgYXNzZXJ0ID0+IHtcclxuICBjb25zdCBoaWdoRnJlcXVlbmN5VXR0ZXJhbmNlID0gbmV3IFV0dGVyYW5jZSgge1xyXG4gICAgYWxlcnQ6ICdSYXBpZGx5IENoYW5naW5nJyxcclxuICAgIGFsZXJ0U3RhYmxlRGVsYXk6IDAgLy8gd2Ugd2FudCB0byBoZWFyIHRoZSB1dHRlcmFuY2UgZXZlcnkgdGltZSBpdCBpcyBhZGRlZCB0byB0aGUgcXVldWVcclxuICB9ICk7XHJcblxyXG4gIGNvbnN0IG51bUFsZXJ0cyA9IDQ7XHJcblxyXG4gIC8vIGFkZCB0aGUgdXR0ZXJhbmNlIHRvIHRoZSBiYWNrIG1hbnkgdGltZXMsIGJ5IGRlZmF1bHQgdGhleSBzaG91bGQgY29sbGFwc2VcclxuICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBudW1BbGVydHM7IGkrKyApIHtcclxuICAgIHV0dGVyYW5jZVF1ZXVlLmFkZFRvQmFjayggaGlnaEZyZXF1ZW5jeVV0dGVyYW5jZSApO1xyXG4gIH1cclxuICBhc3NlcnQub2soIHV0dGVyYW5jZVF1ZXVlWyAncXVldWUnIF0ubGVuZ3RoID09PSAxLCAndXR0ZXJhbmNlcyBzaG91bGQgY29sbGFwc2UgYnkgZGVmYXVsdCBhZnRlciBhZGRUb0JhY2snICk7XHJcblxyXG4gIGF3YWl0IHRpbWVvdXQoIHNsZWVwVGltaW5nICk7XHJcblxyXG4gIC8vIGNsZWFudXAgc3RlcFxyXG4gIGFzc2VydC5vayggdXR0ZXJhbmNlUXVldWVbICdxdWV1ZScgXS5sZW5ndGggPT09IDAsICdjbGVhcmVkIHF1ZXVlJyApO1xyXG5cclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuICBhbGVydHMgPSBbXTtcclxuICBjb25zdCBzdGFibGVEZWxheSA9IHNsZWVwVGltaW5nICogMy4xOyAvLyBzbGlnaHRseSBsb25nZXIgdGhhbiAzeFxyXG4gIGNvbnN0IG15VXR0ZXJhbmNlID0gbmV3IFV0dGVyYW5jZSgge1xyXG4gICAgYWxlcnQ6ICdoaScsXHJcbiAgICBhbGVydFN0YWJsZURlbGF5OiBzdGFibGVEZWxheVxyXG4gIH0gKTtcclxuXHJcbiAgZm9yICggbGV0IGkgPSAwOyBpIDwgMTAwOyBpKysgKSB7XHJcbiAgICB1dHRlcmFuY2VRdWV1ZS5hZGRUb0JhY2soIG15VXR0ZXJhbmNlICk7XHJcbiAgfVxyXG5cclxuICBhc3NlcnQub2soIHV0dGVyYW5jZVF1ZXVlWyAncXVldWUnIF0ubGVuZ3RoID09PSAxLCAnc2FtZSBVdHRlcmFuY2Ugc2hvdWxkIG92ZXJyaWRlIGluIHF1ZXVlJyApO1xyXG4gIGF3YWl0IHRpbWVvdXQoIHNsZWVwVGltaW5nICk7XHJcblxyXG4gIC8vIFRoZSB3cmFwcGVyIGhhcyB0aGUgdGltaW5nIHZhcmlhYmxlc1xyXG4gIGNvbnN0IHV0dGVyYW5jZVdyYXBwZXIgPSB1dHRlcmFuY2VRdWV1ZVsgJ3F1ZXVlJyBdWyAwIF07XHJcblxyXG4gIC8vIEl0IGlzIGEgYml0IGRlcGVuZGVudCBvbiB0aGUgc3lzdGVtIHJ1bm5pbmcgYXMgdG8gaWYgdGhpcyBzbGVlcCB0aW1lIHdpbGwgYmUgdG9vIGxvbmcgdG8gZmx1c2ggdGhpcyBvbmUgdG9vLlxyXG4gIGlmICggdXR0ZXJhbmNlV3JhcHBlciApIHtcclxuICAgIGFzc2VydC5vayggdXR0ZXJhbmNlV3JhcHBlci5zdGFibGVUaW1lID49IHV0dGVyYW5jZVdyYXBwZXIudGltZUluUXVldWUsICd1dHRlcmFuY2Ugc2hvdWxkIGJlIGluIHF1ZXVlIGZvciBhdCBsZWFzdCBzdGFibGVEZWxheScgKTtcclxuXHJcbiAgICBhc3NlcnQub2soIHV0dGVyYW5jZVF1ZXVlWyAncXVldWUnIF0ubGVuZ3RoID09PSAxLCAnQWxlcnQgc3RpbGwgaW4gcXVldWUgYWZ0ZXIgd2FpdGluZyBsZXNzIHRoYW4gYWxlcnRTdGFibGVEZWxheSBidXQgbW9yZSB0aGFuIHN0ZXBJbnRlcnZhbC4nICk7XHJcbiAgfVxyXG4gIGF3YWl0IHRpbWVvdXQoIHN0YWJsZURlbGF5ICk7XHJcblxyXG4gIGFzc2VydC5vayggdXR0ZXJhbmNlUXVldWVbICdxdWV1ZScgXS5sZW5ndGggPT09IDAsICdVdHRlcmFuY2UgYWxlcnRlZCBhZnRlciBhbGVydFN0YWJsZURlbGF5IHRpbWUgcGFzc2VkJyApO1xyXG4gIGFzc2VydC5vayggYWxlcnRzLmxlbmd0aCA9PT0gMSwgJ3V0dGVyYW5jZSBlbmRlZCB1cCBpbiBhbGVydHMgbGlzdCcgKTtcclxuICBhc3NlcnQub2soIGFsZXJ0c1sgMCBdID09PSBteVV0dGVyYW5jZS5hbGVydCwgJ3V0dGVyYW5jZSB0ZXh0IG1hdGNoZXMgdGhhdCB3aGljaCBpcyBleHBlY3RlZCcgKTtcclxufSApO1xyXG5cclxuUVVuaXQudGVzdCggJ2FsZXJ0TWF4aW11bURlbGF5IHRlc3RzJywgYXN5bmMgYXNzZXJ0ID0+IHtcclxuICBjb25zdCByYXBpZGx5Q2hhbmdpbmcgPSAnUmFwaWRseSBDaGFuZ2luZyc7XHJcbiAgY29uc3QgaGlnaEZyZXF1ZW5jeVV0dGVyYW5jZSA9IG5ldyBVdHRlcmFuY2UoIHtcclxuICAgIGFsZXJ0OiByYXBpZGx5Q2hhbmdpbmcsXHJcbiAgICBhbGVydFN0YWJsZURlbGF5OiAyMDAsXHJcbiAgICBhbGVydE1heGltdW1EZWxheTogMzAwXHJcbiAgfSApO1xyXG5cclxuICB1dHRlcmFuY2VRdWV1ZS5hZGRUb0JhY2soIGhpZ2hGcmVxdWVuY3lVdHRlcmFuY2UgKTtcclxuICBhc3NlcnQub2soIHV0dGVyYW5jZVF1ZXVlWyAncXVldWUnIF0ubGVuZ3RoID09PSAxLCAnc2FuaXR5IDEnICk7XHJcbiAgYXdhaXQgdGltZW91dCggMTAwICk7XHJcbiAgYXNzZXJ0Lm9rKCB1dHRlcmFuY2VRdWV1ZVsgJ3F1ZXVlJyBdLmxlbmd0aCA9PT0gMSwgJ3N0aWxsIGhhcyBpdCwgbm90IHN0YWJsZSwgbm90IG1heCcgKTtcclxuICB1dHRlcmFuY2VRdWV1ZS5hZGRUb0JhY2soIGhpZ2hGcmVxdWVuY3lVdHRlcmFuY2UgKTtcclxuICBhc3NlcnQub2soIHV0dGVyYW5jZVF1ZXVlWyAncXVldWUnIF0ubGVuZ3RoID09PSAxLCAnc2FuaXR5IDInICk7XHJcbiAgYXdhaXQgdGltZW91dCggMTAwICk7XHJcbiAgYXNzZXJ0Lm9rKCB1dHRlcmFuY2VRdWV1ZVsgJ3F1ZXVlJyBdLmxlbmd0aCA9PT0gMSwgJ3N0aWxsIGhhcyBpdCwgbm90IHN0YWJsZSwgbm90IG1heCwgMicgKTtcclxuICB1dHRlcmFuY2VRdWV1ZS5hZGRUb0JhY2soIGhpZ2hGcmVxdWVuY3lVdHRlcmFuY2UgKTtcclxuICBhc3NlcnQub2soIHV0dGVyYW5jZVF1ZXVlWyAncXVldWUnIF0ubGVuZ3RoID09PSAxLCAnc2FuaXR5IDInICk7XHJcbiAgYXdhaXQgdGltZW91dCggMTUwICk7XHJcbiAgYXNzZXJ0Lm9rKCB1dHRlcmFuY2VRdWV1ZVsgJ3F1ZXVlJyBdLmxlbmd0aCA9PT0gMCwgJ25vdCBzdGFibGUsIGJ1dCBwYXN0IG1heCcgKTtcclxuICBhc3NlcnQub2soIGFsZXJ0c1sgMCBdID09PSByYXBpZGx5Q2hhbmdpbmcsICdpdCB3YXMgYW5ub3VuY2VkJyApO1xyXG59ICk7XHJcblxyXG5RVW5pdC50ZXN0KCAnYW5ub3VuY2VJbW1lZGlhdGVseScsIGFzeW5jIGFzc2VydCA9PiB7XHJcbiAgY29uc3QgbXlVdHRlcmFuY2VUZXh0ID0gJ1RoaXMgaXMgbXkgdXR0ZXJhbmNlIHRleHQnO1xyXG4gIGNvbnN0IG15VXR0ZXJhbmNlID0gbmV3IFV0dGVyYW5jZSggeyBhbGVydDogbXlVdHRlcmFuY2VUZXh0IH0gKTtcclxuXHJcbiAgdXR0ZXJhbmNlUXVldWUuYW5ub3VuY2VJbW1lZGlhdGVseSggbXlVdHRlcmFuY2UgKTtcclxuICBhc3NlcnQub2soIHV0dGVyYW5jZVF1ZXVlWyAncXVldWUnIF0ubGVuZ3RoID09PSAwLCAnc2hvdWxkIG5vdCBiZSBhZGRlZCB0byB0aGUgcXVldWUnICk7XHJcbiAgYXNzZXJ0Lm9rKCBhbGVydHNbIDAgXSA9PT0gbXlVdHRlcmFuY2VUZXh0LCAnc2hvdWxkIGJlIGltbWVkaWF0ZWx5IGFsZXJ0ZWQnICk7XHJcblxyXG4gIHV0dGVyYW5jZVF1ZXVlLmFkZFRvQmFjayggbXlVdHRlcmFuY2UgKTtcclxuICBhc3NlcnQub2soIHV0dGVyYW5jZVF1ZXVlWyAncXVldWUnIF0ubGVuZ3RoID09PSAxLCAnb25lIGFkZGVkIHRvIHRoZSBxdWV1ZScgKTtcclxuICBhc3NlcnQub2soIGFsZXJ0cy5sZW5ndGggPT09IDEsICdzdGlsbCBqdXN0IG9uZSBhbGVydCBvY2N1cnJlZCcgKTtcclxuICB1dHRlcmFuY2VRdWV1ZS5hbm5vdW5jZUltbWVkaWF0ZWx5KCBteVV0dGVyYW5jZSApO1xyXG4gIGFzc2VydC5vayggdXR0ZXJhbmNlUXVldWVbICdxdWV1ZScgXS5sZW5ndGggPT09IDEsICdhbm5vdW5jZUltbWVkaWF0ZWx5IHJlbW92ZWQgZHVwbGljYXRlcywgYnV0IG15VXR0ZXJhbmNlIHN0aWxsIGluIHF1ZXVlJyApO1xyXG4gIGF3YWl0IHRpbWVvdXQoIHNsZWVwVGltaW5nICk7XHJcbiAgYXNzZXJ0Lm9rKCBhbGVydHMubGVuZ3RoID09PSAyLCAnbXlVdHRlcmFuY2UgYW5ub3VuY2VkIGltbWVkaWF0ZWx5IHdoZW4gQW5ub3VuY2VyIHdhcyByZWFkeScgKTtcclxuICBhc3NlcnQub2soIGFsZXJ0c1sgMCBdID09PSBteVV0dGVyYW5jZVRleHQsICdhbm5vdW5jZUltbWVkaWF0ZWx5IFV0dGVyYW5jZSB3YXMgbGFzdCBhbGVydCcgKTtcclxufSApO1xyXG5cclxuXHJcblFVbml0LnRlc3QoICdSZXNwb25zZVBhY2tldCB0ZXN0cycsIGFzeW5jIGFzc2VydCA9PiB7XHJcbiAgcmVzcG9uc2VDb2xsZWN0b3IubmFtZVJlc3BvbnNlc0VuYWJsZWRQcm9wZXJ0eS52YWx1ZSA9IHRydWU7XHJcbiAgcmVzcG9uc2VDb2xsZWN0b3Iub2JqZWN0UmVzcG9uc2VzRW5hYmxlZFByb3BlcnR5LnZhbHVlID0gdHJ1ZTtcclxuICByZXNwb25zZUNvbGxlY3Rvci5jb250ZXh0UmVzcG9uc2VzRW5hYmxlZFByb3BlcnR5LnZhbHVlID0gdHJ1ZTtcclxuICByZXNwb25zZUNvbGxlY3Rvci5oaW50UmVzcG9uc2VzRW5hYmxlZFByb3BlcnR5LnZhbHVlID0gdHJ1ZTtcclxuXHJcbiAgY29uc3QgTkFNRSA9ICduYW1lJztcclxuICBjb25zdCBPQkpFQ1QgPSAnb2JqZWN0JztcclxuICBjb25zdCBDT05URVhUID0gJ2NvbnRleHQnO1xyXG4gIGNvbnN0IEhJTlQgPSAnaGludCc7XHJcbiAgY29uc3QgdXR0ZXJhbmNlID0gbmV3IFV0dGVyYW5jZSgge1xyXG4gICAgYWxlcnRTdGFibGVEZWxheTogMCxcclxuICAgIGFsZXJ0OiBuZXcgUmVzcG9uc2VQYWNrZXQoIHtcclxuICAgICAgbmFtZVJlc3BvbnNlOiBOQU1FLFxyXG4gICAgICBvYmplY3RSZXNwb25zZTogT0JKRUNULFxyXG4gICAgICBjb250ZXh0UmVzcG9uc2U6IENPTlRFWFQsXHJcbiAgICAgIGhpbnRSZXNwb25zZTogSElOVFxyXG4gICAgfSApXHJcbiAgfSApO1xyXG5cclxuICB1dHRlcmFuY2VRdWV1ZS5hZGRUb0JhY2soIHV0dGVyYW5jZSApO1xyXG4gIGF3YWl0IHRpbWVvdXQoIHNsZWVwVGltaW5nICk7XHJcblxyXG4gIGFzc2VydC5vayggYWxlcnRzWyAwIF0uaW5jbHVkZXMoIE5BTUUgKSwgJ25hbWUgZXhwZWN0ZWQnICk7XHJcbiAgYXNzZXJ0Lm9rKCBhbGVydHNbIDAgXS5pbmNsdWRlcyggT0JKRUNUICksICdvYmplY3QgZXhwZWN0ZWQnICk7XHJcbiAgYXNzZXJ0Lm9rKCBhbGVydHNbIDAgXS5pbmNsdWRlcyggQ09OVEVYVCApLCAnY29udGV4dCBleHBlY3RlZCcgKTtcclxuICBhc3NlcnQub2soIGFsZXJ0c1sgMCBdLmluY2x1ZGVzKCBISU5UICksICdoaW50IGV4cGVjdGVkJyApO1xyXG5cclxuICByZXNwb25zZUNvbGxlY3Rvci5uYW1lUmVzcG9uc2VzRW5hYmxlZFByb3BlcnR5LnZhbHVlID0gZmFsc2U7XHJcblxyXG4gIHV0dGVyYW5jZVF1ZXVlLmFkZFRvQmFjayggdXR0ZXJhbmNlICk7XHJcbiAgYXdhaXQgdGltZW91dCggc2xlZXBUaW1pbmcgKTtcclxuXHJcbiAgYXNzZXJ0Lm9rKCAhYWxlcnRzWyAwIF0uaW5jbHVkZXMoIE5BTUUgKSwgJ25hbWUgZXhwZWN0ZWQnICk7XHJcbiAgYXNzZXJ0Lm9rKCBhbGVydHNbIDAgXS5pbmNsdWRlcyggT0JKRUNUICksICdvYmplY3QgZXhwZWN0ZWQnICk7XHJcbiAgYXNzZXJ0Lm9rKCBhbGVydHNbIDAgXS5pbmNsdWRlcyggQ09OVEVYVCApLCAnY29udGV4dCBleHBlY3RlZCcgKTtcclxuICBhc3NlcnQub2soIGFsZXJ0c1sgMCBdLmluY2x1ZGVzKCBISU5UICksICdoaW50IGV4cGVjdGVkJyApO1xyXG5cclxuICByZXNwb25zZUNvbGxlY3Rvci5uYW1lUmVzcG9uc2VzRW5hYmxlZFByb3BlcnR5LnZhbHVlID0gZmFsc2U7XHJcbiAgcmVzcG9uc2VDb2xsZWN0b3Iub2JqZWN0UmVzcG9uc2VzRW5hYmxlZFByb3BlcnR5LnZhbHVlID0gZmFsc2U7XHJcbiAgcmVzcG9uc2VDb2xsZWN0b3IuY29udGV4dFJlc3BvbnNlc0VuYWJsZWRQcm9wZXJ0eS52YWx1ZSA9IGZhbHNlO1xyXG4gIHJlc3BvbnNlQ29sbGVjdG9yLmhpbnRSZXNwb25zZXNFbmFibGVkUHJvcGVydHkudmFsdWUgPSB0cnVlOyAvLyBuZWVkIHNvbWV0aGluZyBpbiBvcmRlciB0byBhbGVydFxyXG5cclxuICB1dHRlcmFuY2VRdWV1ZS5hZGRUb0JhY2soIHV0dGVyYW5jZSApO1xyXG4gIGF3YWl0IHRpbWVvdXQoIHNsZWVwVGltaW5nICk7XHJcblxyXG4gIGFzc2VydC5vayggIWFsZXJ0c1sgMCBdLmluY2x1ZGVzKCBOQU1FICksICduYW1lIG5vdCBleHBlY3RlZCcgKTtcclxuICBhc3NlcnQub2soICFhbGVydHNbIDAgXS5pbmNsdWRlcyggT0JKRUNUICksICdvYmplY3Qgbm90IGV4cGVjdGVkJyApO1xyXG4gIGFzc2VydC5vayggIWFsZXJ0c1sgMCBdLmluY2x1ZGVzKCBDT05URVhUICksICdjb250ZXh0IG5vdCBleHBlY3RlZCcgKTtcclxuICBhc3NlcnQub2soIGFsZXJ0c1sgMCBdID09PSBISU5ULCAnaGludCBleHBlY3RlZCcgKTtcclxufSApO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsU0FBUyxNQUFNLDRCQUE0QjtBQUNsRCxPQUFPQyxpQkFBaUIsTUFBTSx3QkFBd0I7QUFDdEQsT0FBT0MsaUJBQWlCLE1BQU0sd0JBQXdCO0FBQ3RELE9BQU9DLGNBQWMsTUFBTSxxQkFBcUI7QUFDaEQsT0FBT0MsU0FBUyxNQUFNLGdCQUFnQjtBQUN0QyxPQUFPQyxjQUFjLE1BQU0scUJBQXFCO0FBRWhELElBQUlDLFdBQVcsR0FBRyxDQUFDO0FBRW5CLE1BQU1DLGlCQUFpQixHQUFHLElBQUlOLGlCQUFpQixDQUFFO0VBQUVPLGtDQUFrQyxFQUFFO0FBQUssQ0FBRSxDQUFDO0FBQy9GLE1BQU1DLGNBQWMsR0FBRyxJQUFJSixjQUFjLENBQUVFLGlCQUFrQixDQUFDOztBQUU5RDtBQUNBLFNBQVNHLE9BQU9BLENBQUVDLEVBQVUsRUFBcUI7RUFDL0MsT0FBTyxJQUFJQyxPQUFPLENBQUVDLE9BQU8sSUFBSUMsVUFBVSxDQUFFRCxPQUFPLEVBQUVGLEVBQUcsQ0FBRSxDQUFDLENBQUMsQ0FBQztBQUM5RDs7QUFFQSxJQUFJSSxNQUFnQixHQUFHLEVBQUU7QUFFekIsSUFBSUMsVUFBa0I7QUFDdEJDLEtBQUssQ0FBQ0MsTUFBTSxDQUFFLFdBQVcsRUFBRTtFQUN6QkMsTUFBTUEsQ0FBQSxFQUFHO0lBRVA7SUFDQSxNQUFNQyxhQUFhLEdBQUcsQ0FBQyxHQUFHLEVBQUU7O0lBRTVCO0lBQ0EsSUFBSUMsWUFBWSxHQUFHQyxJQUFJLENBQUNDLEdBQUcsQ0FB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