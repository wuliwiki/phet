// Copyright 2014-2023, University of Colorado Boulder

//TODO rename to CorrelationCoefficientAccordionBox
/**
 * A Scenery node that shows the Pearson correlation coefficient in an equation form
 *
 * @author Martin Veillette (Berea College)
 */

import Utils from '../../../../dot/js/Utils.js';
import merge from '../../../../phet-core/js/merge.js';
import StringUtils from '../../../../phetcommon/js/util/StringUtils.js';
import MathSymbols from '../../../../scenery-phet/js/MathSymbols.js';
import { HStrut, Node, RichText, Text, VBox } from '../../../../scenery/js/imports.js';
import AccordionBox from '../../../../sun/js/AccordionBox.js';
import Panel from '../../../../sun/js/Panel.js';
import leastSquaresRegression from '../../leastSquaresRegression.js';
import LeastSquaresRegressionStrings from '../../LeastSquaresRegressionStrings.js';
import LeastSquaresRegressionConstants from '../LeastSquaresRegressionConstants.js';

// string
const pattern_0r_1value = '{0} {1}';

// constants
const R_EQUALS = StringUtils.format('{0} =', LeastSquaresRegressionStrings.symbol.r);
const MAX_LABEL_WIDTH = 120; // restrict width of labels for i18n

class PearsonCorrelationCoefficientNode extends AccordionBox {
  /**
   * @param {Graph} graph
   * @param {Object} [options]
   */
  constructor(graph, options) {
    // Options for the Accordion Box
    options = merge({
      cornerRadius: 3,
      buttonXMargin: 10,
      buttonYMargin: 10,
      expandCollapseButtonOptions: {
        touchAreaXDilation: 16,
        touchAreaYDilation: 16
      },
      titleYMargin: 10,
      titleNode: new RichText(LeastSquaresRegressionStrings.correlationCoefficient, {
        replaceNewlines: true,
        align: 'center',
        font: LeastSquaresRegressionConstants.TEXT_BOLD_FONT,
        maxWidth: MAX_LABEL_WIDTH
      }),
      titleAlignY: 'top',
      contentXMargin: 10,
      contentYMargin: 10
    }, options);
    const textOptions = {
      font: LeastSquaresRegressionConstants.PEARSON_COEFFICIENT_TEXT_FONT
    };

    // Create the left hand side of the equation (includes the equal sign)
    const leftHandSideText = new Text(R_EQUALS, textOptions);

    // Create the right hand side of the equation
    const rightHandSideText = new Text('', textOptions);

    // calculate the maximum width of the right hand side of the equation
    const rightHandSideMaxWidth = new Text(`${MathSymbols.PLUS} 0.00`, textOptions).width;
    const hStrut = new HStrut(rightHandSideMaxWidth);
    hStrut.left = leftHandSideText.right + 5;
    rightHandSideText.left = leftHandSideText.right + 5;

    // Create the equation
    const equation = new Node({
      children: [leftHandSideText, hStrut, rightHandSideText],
      maxWidth: MAX_LABEL_WIDTH
    });

    // Create the panel that holds the equation
    const mutableEquationPanel = new Panel(equation, {
      fill: LeastSquaresRegressionConstants.GRAPH_BACKGROUND_COLOR,
      cornerRadius: LeastSquaresRegressionConstants.SMALL_PANEL_CORNER_RADIUS,
      stroke: LeastSquaresRegressionConstants.SMALL_PANEL_STROKE,
      resize: false,
      xMargin: 10
    });
    const content = new VBox({
      children: [new HStrut(180), mutableEquationPanel]
    });
    super(content, options);

    // @private
    this.graph = graph;
    this.rightHandSideText = rightHandSideText;
  }

  /**
   * @public
   * @override
   */
  reset() {
    this.update();
    super.reset();
  }

  /**
   * Updates the value of the right hand side of the equation.
   * @public
   */
  update() {
    let rValueString;

    // Check for the existence of the rValue
    if (this.graph.isLinearFitDefined()) {
      const rValue = this.graph.getPearsonCoefficientCorrelation();

      // if the rValue is zero and there are only two points on the graph, return null.  This is to avoid
      // a precision error for when the points are aligned horizontally and the denominator is non-zero
      if (rValue === 0) {
        if (this.graph.dataPointsOnGraph.length === 2) {
          rValueString = '';
        }
      }

      // getPearsonCoefficientCorrelation() will return null if NaN
      if (rValue === null) {
        rValueString = '';
      } else {
        const isNegative = rValue < 0;
        const signString = isNegative ? MathSymbols.MINUS : MathSymbols.PLUS;
        rValueString = StringUtils.format(pattern_0r_1value, signString, Utils.toFixed(Math.abs(rValue), 2));
      }
    } else {
      // Set to null if the Pearson Coefficient does not exist
      rValueString = '';
    }

    // Update the text on the right Hand side of the equation
    this.rightHandSideText.string = rValueString;
  }
}
leastSquaresRegression.register('PearsonCorrelationCoefficientNode', PearsonCorrelationCoefficientNode);
export default PearsonCorrelationCoefficientNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVdGlscyIsIm1lcmdlIiwiU3RyaW5nVXRpbHMiLCJNYXRoU3ltYm9scyIsIkhTdHJ1dCIsIk5vZGUiLCJSaWNoVGV4dCIsIlRleHQiLCJWQm94IiwiQWNjb3JkaW9uQm94IiwiUGFuZWwiLCJsZWFzdFNxdWFyZXNSZWdyZXNzaW9uIiwiTGVhc3RTcXVhcmVzUmVncmVzc2lvblN0cmluZ3MiLCJMZWFzdFNxdWFyZXNSZWdyZXNzaW9uQ29uc3RhbnRzIiwicGF0dGVybl8wcl8xdmFsdWUiLCJSX0VRVUFMUyIsImZvcm1hdCIsInN5bWJvbCIsInIiLCJNQVhfTEFCRUxfV0lEVEgiLCJQZWFyc29uQ29ycmVsYXRpb25Db2VmZmljaWVudE5vZGUiLCJjb25zdHJ1Y3RvciIsImdyYXBoIiwib3B0aW9ucyIsImNvcm5lclJhZGl1cyIsImJ1dHRvblhNYXJnaW4iLCJidXR0b25ZTWFyZ2luIiwiZXhwYW5kQ29sbGFwc2VCdXR0b25PcHRpb25zIiwidG91Y2hBcmVhWERpbGF0aW9uIiwidG91Y2hBcmVhWURpbGF0aW9uIiwidGl0bGVZTWFyZ2luIiwidGl0bGVOb2RlIiwiY29ycmVsYXRpb25Db2VmZmljaWVudCIsInJlcGxhY2VOZXdsaW5lcyIsImFsaWduIiwiZm9udCIsIlRFWFRfQk9MRF9GT05UIiwibWF4V2lkdGgiLCJ0aXRsZUFsaWduWSIsImNvbnRlbnRYTWFyZ2luIiwiY29udGVudFlNYXJnaW4iLCJ0ZXh0T3B0aW9ucyIsIlBFQVJTT05fQ09FRkZJQ0lFTlRfVEVYVF9GT05UIiwibGVmdEhhbmRTaWRlVGV4dCIsInJpZ2h0SGFuZFNpZGVUZXh0IiwicmlnaHRIYW5kU2lkZU1heFdpZHRoIiwiUExVUyIsIndpZHRoIiwiaFN0cnV0IiwibGVmdCIsInJpZ2h0IiwiZXF1YXRpb24iLCJjaGlsZHJlbiIsIm11dGFibGVFcXVhdGlvblBhbmVsIiwiZmlsbCIsIkdSQVBIX0JBQ0tHUk9VTkRfQ09MT1IiLCJTTUFMTF9QQU5FTF9DT1JORVJfUkFESVVTIiwic3Ryb2tlIiwiU01BTExfUEFORUxfU1RST0tFIiwicmVzaXplIiwieE1hcmdpbiIsImNvbnRlbnQiLCJyZXNldCIsInVwZGF0ZSIsInJWYWx1ZVN0cmluZyIsImlzTGluZWFyRml0RGVmaW5lZCIsInJWYWx1ZSIsImdldFBlYXJzb25Db2VmZmljaWVudENvcnJlbGF0aW9uIiwiZGF0YVBvaW50c09uR3JhcGgiLCJsZW5ndGgiLCJpc05lZ2F0aXZlIiwic2lnblN0cmluZyIsIk1JTlVTIiwidG9GaXhlZCIsIk1hdGgiLCJhYnMiLCJzdHJpbmciLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlBlYXJzb25Db3JyZWxhdGlvbkNvZWZmaWNpZW50Tm9kZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNC0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8vVE9ETyByZW5hbWUgdG8gQ29ycmVsYXRpb25Db2VmZmljaWVudEFjY29yZGlvbkJveFxyXG4vKipcclxuICogQSBTY2VuZXJ5IG5vZGUgdGhhdCBzaG93cyB0aGUgUGVhcnNvbiBjb3JyZWxhdGlvbiBjb2VmZmljaWVudCBpbiBhbiBlcXVhdGlvbiBmb3JtXHJcbiAqXHJcbiAqIEBhdXRob3IgTWFydGluIFZlaWxsZXR0ZSAoQmVyZWEgQ29sbGVnZSlcclxuICovXHJcblxyXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1V0aWxzLmpzJztcclxuaW1wb3J0IG1lcmdlIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9tZXJnZS5qcyc7XHJcbmltcG9ydCBTdHJpbmdVdGlscyBmcm9tICcuLi8uLi8uLi8uLi9waGV0Y29tbW9uL2pzL3V0aWwvU3RyaW5nVXRpbHMuanMnO1xyXG5pbXBvcnQgTWF0aFN5bWJvbHMgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL01hdGhTeW1ib2xzLmpzJztcclxuaW1wb3J0IHsgSFN0cnV0LCBOb2RlLCBSaWNoVGV4dCwgVGV4dCwgVkJveCB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBBY2NvcmRpb25Cb3ggZnJvbSAnLi4vLi4vLi4vLi4vc3VuL2pzL0FjY29yZGlvbkJveC5qcyc7XHJcbmltcG9ydCBQYW5lbCBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvUGFuZWwuanMnO1xyXG5pbXBvcnQgbGVhc3RTcXVhcmVzUmVncmVzc2lvbiBmcm9tICcuLi8uLi9sZWFzdFNxdWFyZXNSZWdyZXNzaW9uLmpzJztcclxuaW1wb3J0IExlYXN0U3F1YXJlc1JlZ3Jlc3Npb25TdHJpbmdzIGZyb20gJy4uLy4uL0xlYXN0U3F1YXJlc1JlZ3Jlc3Npb25TdHJpbmdzLmpzJztcclxuaW1wb3J0IExlYXN0U3F1YXJlc1JlZ3Jlc3Npb25Db25zdGFudHMgZnJvbSAnLi4vTGVhc3RTcXVhcmVzUmVncmVzc2lvbkNvbnN0YW50cy5qcyc7XHJcblxyXG4vLyBzdHJpbmdcclxuY29uc3QgcGF0dGVybl8wcl8xdmFsdWUgPSAnezB9IHsxfSc7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgUl9FUVVBTFMgPSBTdHJpbmdVdGlscy5mb3JtYXQoICd7MH0gPScsIExlYXN0U3F1YXJlc1JlZ3Jlc3Npb25TdHJpbmdzLnN5bWJvbC5yICk7XHJcbmNvbnN0IE1BWF9MQUJFTF9XSURUSCA9IDEyMDsgLy8gcmVzdHJpY3Qgd2lkdGggb2YgbGFiZWxzIGZvciBpMThuXHJcblxyXG5jbGFzcyBQZWFyc29uQ29ycmVsYXRpb25Db2VmZmljaWVudE5vZGUgZXh0ZW5kcyBBY2NvcmRpb25Cb3gge1xyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7R3JhcGh9IGdyYXBoXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBncmFwaCwgb3B0aW9ucyApIHtcclxuXHJcbiAgICAvLyBPcHRpb25zIGZvciB0aGUgQWNjb3JkaW9uIEJveFxyXG4gICAgb3B0aW9ucyA9IG1lcmdlKCB7XHJcbiAgICAgIGNvcm5lclJhZGl1czogMyxcclxuICAgICAgYnV0dG9uWE1hcmdpbjogMTAsXHJcbiAgICAgIGJ1dHRvbllNYXJnaW46IDEwLFxyXG4gICAgICBleHBhbmRDb2xsYXBzZUJ1dHRvbk9wdGlvbnM6IHtcclxuICAgICAgICB0b3VjaEFyZWFYRGlsYXRpb246IDE2LFxyXG4gICAgICAgIHRvdWNoQXJlYVlEaWxhdGlvbjogMTZcclxuICAgICAgfSxcclxuICAgICAgdGl0bGVZTWFyZ2luOiAxMCxcclxuICAgICAgdGl0bGVOb2RlOiBuZXcgUmljaFRleHQoIExlYXN0U3F1YXJlc1JlZ3Jlc3Npb25TdHJpbmdzLmNvcnJlbGF0aW9uQ29lZmZpY2llbnQsIHtcclxuICAgICAgICByZXBsYWNlTmV3bGluZXM6IHRydWUsXHJcbiAgICAgICAgYWxpZ246ICdjZW50ZXInLFxyXG4gICAgICAgIGZvbnQ6IExlYXN0U3F1YXJlc1JlZ3Jlc3Npb25Db25zdGFudHMuVEVYVF9CT0xEX0ZPTlQsXHJcbiAgICAgICAgbWF4V2lkdGg6IE1BWF9MQUJFTF9XSURUSFxyXG4gICAgICB9ICksXHJcbiAgICAgIHRpdGxlQWxpZ25ZOiAndG9wJyxcclxuICAgICAgY29udGVudFhNYXJnaW46IDEwLFxyXG4gICAgICBjb250ZW50WU1hcmdpbjogMTBcclxuICAgIH0sIG9wdGlvbnMgKTtcclxuXHJcbiAgICBjb25zdCB0ZXh0T3B0aW9ucyA9IHsgZm9udDogTGVhc3RTcXVhcmVzUmVncmVzc2lvbkNvbnN0YW50cy5QRUFSU09OX0NPRUZGSUNJRU5UX1RFWFRfRk9OVCB9O1xyXG5cclxuICAgIC8vIENyZWF0ZSB0aGUgbGVmdCBoYW5kIHNpZGUgb2YgdGhlIGVxdWF0aW9uIChpbmNsdWRlcyB0aGUgZXF1YWwgc2lnbilcclxuICAgIGNvbnN0IGxlZnRIYW5kU2lkZVRleHQgPSBuZXcgVGV4dCggUl9FUVVBTFMsIHRleHRPcHRpb25zICk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIHRoZSByaWdodCBoYW5kIHNpZGUgb2YgdGhlIGVxdWF0aW9uXHJcbiAgICBjb25zdCByaWdodEhhbmRTaWRlVGV4dCA9IG5ldyBUZXh0KCAnJywgdGV4dE9wdGlvbnMgKTtcclxuXHJcbiAgICAvLyBjYWxjdWxhdGUgdGhlIG1heGltdW0gd2lkdGggb2YgdGhlIHJpZ2h0IGhhbmQgc2lkZSBvZiB0aGUgZXF1YXRpb25cclxuICAgIGNvbnN0IHJpZ2h0SGFuZFNpZGVNYXhXaWR0aCA9IG5ldyBUZXh0KCBgJHtNYXRoU3ltYm9scy5QTFVTfSAwLjAwYCwgdGV4dE9wdGlvbnMgKS53aWR0aDtcclxuICAgIGNvbnN0IGhTdHJ1dCA9IG5ldyBIU3RydXQoIHJpZ2h0SGFuZFNpZGVNYXhXaWR0aCApO1xyXG5cclxuICAgIGhTdHJ1dC5sZWZ0ID0gbGVmdEhhbmRTaWRlVGV4dC5yaWdodCArIDU7XHJcbiAgICByaWdodEhhbmRTaWRlVGV4dC5sZWZ0ID0gbGVmdEhhbmRTaWRlVGV4dC5yaWdodCArIDU7XHJcblxyXG4gICAgLy8gQ3JlYXRlIHRoZSBlcXVhdGlvblxyXG4gICAgY29uc3QgZXF1YXRpb24gPSBuZXcgTm9kZSgge1xyXG4gICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgIGxlZnRIYW5kU2lkZVRleHQsXHJcbiAgICAgICAgaFN0cnV0LFxyXG4gICAgICAgIHJpZ2h0SGFuZFNpZGVUZXh0XHJcbiAgICAgIF0sXHJcbiAgICAgIG1heFdpZHRoOiBNQVhfTEFCRUxfV0lEVEhcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgdGhlIHBhbmVsIHRoYXQgaG9sZHMgdGhlIGVxdWF0aW9uXHJcbiAgICBjb25zdCBtdXRhYmxlRXF1YXRpb25QYW5lbCA9IG5ldyBQYW5lbCggZXF1YXRpb24sIHtcclxuICAgICAgZmlsbDogTGVhc3RTcXVhcmVzUmVncmVzc2lvbkNvbnN0YW50cy5HUkFQSF9CQUNLR1JPVU5EX0NPTE9SLFxyXG4gICAgICBjb3JuZXJSYWRpdXM6IExlYXN0U3F1YXJlc1JlZ3Jlc3Npb25Db25zdGFudHMuU01BTExfUEFORUxfQ09STkVSX1JBRElVUyxcclxuICAgICAgc3Ryb2tlOiBMZWFzdFNxdWFyZXNSZWdyZXNzaW9uQ29uc3RhbnRzLlNNQUxMX1BBTkVMX1NUUk9LRSxcclxuICAgICAgcmVzaXplOiBmYWxzZSxcclxuICAgICAgeE1hcmdpbjogMTBcclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCBjb250ZW50ID0gbmV3IFZCb3goIHtcclxuICAgICAgY2hpbGRyZW46IFsgbmV3IEhTdHJ1dCggMTgwICksIG11dGFibGVFcXVhdGlvblBhbmVsIF1cclxuICAgIH0gKTtcclxuXHJcbiAgICBzdXBlciggY29udGVudCwgb3B0aW9ucyApO1xyXG5cclxuICAgIC8vIEBwcml2YXRlXHJcbiAgICB0aGlzLmdyYXBoID0gZ3JhcGg7XHJcbiAgICB0aGlzLnJpZ2h0SGFuZFNpZGVUZXh0ID0gcmlnaHRIYW5kU2lkZVRleHQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcHVibGljXHJcbiAgICogQG92ZXJyaWRlXHJcbiAgICovXHJcbiAgcmVzZXQoKSB7XHJcbiAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgc3VwZXIucmVzZXQoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZXMgdGhlIHZhbHVlIG9mIHRoZSByaWdodCBoYW5kIHNpZGUgb2YgdGhlIGVxdWF0aW9uLlxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICB1cGRhdGUoKSB7XHJcbiAgICBsZXQgclZhbHVlU3RyaW5nO1xyXG5cclxuICAgIC8vIENoZWNrIGZvciB0aGUgZXhpc3RlbmNlIG9mIHRoZSByVmFsdWVcclxuICAgIGlmICggdGhpcy5ncmFwaC5pc0xpbmVhckZpdERlZmluZWQoKSApIHtcclxuICAgICAgY29uc3QgclZhbHVlID0gdGhpcy5ncmFwaC5nZXRQZWFyc29uQ29lZmZpY2llbnRDb3JyZWxhdGlvbigpO1xyXG5cclxuICAgICAgLy8gaWYgdGhlIHJWYWx1ZSBpcyB6ZXJvIGFuZCB0aGVyZSBhcmUgb25seSB0d28gcG9pbnRzIG9uIHRoZSBncmFwaCwgcmV0dXJuIG51bGwuICBUaGlzIGlzIHRvIGF2b2lkXHJcbiAgICAgIC8vIGEgcHJlY2lzaW9uIGVycm9yIGZvciB3aGVuIHRoZSBwb2ludHMgYXJlIGFsaWduZWQgaG9yaXpvbnRhbGx5IGFuZCB0aGUgZGVub21pbmF0b3IgaXMgbm9uLXplcm9cclxuICAgICAgaWYgKCByVmFsdWUgPT09IDAgKSB7XHJcbiAgICAgICAgaWYgKCB0aGlzLmdyYXBoLmRhdGFQb2ludHNPbkdyYXBoLmxlbmd0aCA9PT0gMiApIHtcclxuICAgICAgICAgIHJWYWx1ZVN0cmluZyA9ICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gZ2V0UGVhcnNvbkNvZWZmaWNpZW50Q29ycmVsYXRpb24oKSB3aWxsIHJldHVybiBudWxsIGlmIE5hTlxyXG4gICAgICBpZiAoIHJWYWx1ZSA9PT0gbnVsbCApIHtcclxuICAgICAgICByVmFsdWVTdHJpbmcgPSAnJztcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCBpc05lZ2F0aXZlID0gKCByVmFsdWUgPCAwICk7XHJcbiAgICAgICAgY29uc3Qgc2lnblN0cmluZyA9IGlzTmVnYXRpdmUgPyBNYXRoU3ltYm9scy5NSU5VUyA6IE1hdGhTeW1ib2xzLlBMVVM7XHJcbiAgICAgICAgclZhbHVlU3RyaW5nID0gU3RyaW5nVXRpbHMuZm9ybWF0KCBwYXR0ZXJuXzByXzF2YWx1ZSwgc2lnblN0cmluZywgVXRpbHMudG9GaXhlZCggTWF0aC5hYnMoIHJWYWx1ZSApLCAyICkgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcblxyXG4gICAgICAvLyBTZXQgdG8gbnVsbCBpZiB0aGUgUGVhcnNvbiBDb2VmZmljaWVudCBkb2VzIG5vdCBleGlzdFxyXG4gICAgICByVmFsdWVTdHJpbmcgPSAnJztcclxuICAgIH1cclxuXHJcbiAgICAvLyBVcGRhdGUgdGhlIHRleHQgb24gdGhlIHJpZ2h0IEhhbmQgc2lkZSBvZiB0aGUgZXF1YXRpb25cclxuICAgIHRoaXMucmlnaHRIYW5kU2lkZVRleHQuc3RyaW5nID0gclZhbHVlU3RyaW5nO1xyXG4gIH1cclxufVxyXG5cclxubGVhc3RTcXVhcmVzUmVncmVzc2lvbi5yZWdpc3RlciggJ1BlYXJzb25Db3JyZWxhdGlvbkNvZWZmaWNpZW50Tm9kZScsIFBlYXJzb25Db3JyZWxhdGlvbkNvZWZmaWNpZW50Tm9kZSApO1xyXG5leHBvcnQgZGVmYXVsdCBQZWFyc29uQ29ycmVsYXRpb25Db2VmZmljaWVudE5vZGU7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsS0FBSyxNQUFNLDZCQUE2QjtBQUMvQyxPQUFPQyxLQUFLLE1BQU0sbUNBQW1DO0FBQ3JELE9BQU9DLFdBQVcsTUFBTSwrQ0FBK0M7QUFDdkUsT0FBT0MsV0FBVyxNQUFNLDRDQUE0QztBQUNwRSxTQUFTQyxNQUFNLEVBQUVDLElBQUksRUFBRUMsUUFBUSxFQUFFQyxJQUFJLEVBQUVDLElBQUksUUFBUSxtQ0FBbUM7QUFDdEYsT0FBT0MsWUFBWSxNQUFNLG9DQUFvQztBQUM3RCxPQUFPQyxLQUFLLE1BQU0sNkJBQTZCO0FBQy9DLE9BQU9DLHNCQUFzQixNQUFNLGlDQUFpQztBQUNwRSxPQUFPQyw2QkFBNkIsTUFBTSx3Q0FBd0M7QUFDbEYsT0FBT0MsK0JBQStCLE1BQU0sdUNBQXVDOztBQUVuRjtBQUNBLE1BQU1DLGlCQUFpQixHQUFHLFNBQVM7O0FBRW5DO0FBQ0EsTUFBTUMsUUFBUSxHQUFHYixXQUFXLENBQUNjLE1BQU0sQ0FBRSxPQUFPLEVBQUVKLDZCQUE2QixDQUFDSyxNQUFNLENBQUNDLENBQUUsQ0FBQztBQUN0RixNQUFNQyxlQUFlLEdBQUcsR0FBRyxDQUFDLENBQUM7O0FBRTdCLE1BQU1DLGlDQUFpQyxTQUFTWCxZQUFZLENBQUM7RUFDM0Q7QUFDRjtBQUNBO0FBQ0E7RUFDRVksV0FB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