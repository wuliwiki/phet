// Copyright 2017-2023, University of Colorado Boulder

/**
 * A region of two segments that intersects (contains static functions for segment intersection).
 *
 * BoundsIntersection.intersect( a, b ) should be used for most general intersection routines as a fallback.
 * Other segment-specific routines may be much faster.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import Pool from '../../../phet-core/js/Pool.js';
import { kite, SegmentIntersection } from '../imports.js';
export default class BoundsIntersection {
  // Null if cleaned of references

  // Null if cleaned of references

  /**
   * @param a
   * @param b
   * @param atMin - Lower t value for the region of the 'a' segment
   * @param atMax - Higher t value for the region of the 'a' segment
   * @param btMin - Lower t value for the region of the 'b' segment
   * @param btMax - Higher t value for the region of the 'b' segment
   * @param aMin - Location of the lower t value for the 'a' segment's region
   * @param aMax - Location of the higher t value for the 'a' segment's region
   * @param bMin - Location of the lower t value for the 'b' segment's region
   * @param bMax - Location of the higher t value for the 'b' segment's region
   */
  constructor(a, b, atMin, atMax, btMin, btMax, aMin, aMax, bMin, bMax) {
    this.initialize(a, b, atMin, atMax, btMin, btMax, aMin, aMax, bMin, bMax);
  }

  /**
   * @param a
   * @param b
   * @param atMin - Lower t value for the region of the 'a' segment
   * @param atMax - Higher t value for the region of the 'a' segment
   * @param btMin - Lower t value for the region of the 'b' segment
   * @param btMax - Higher t value for the region of the 'b' segment
   * @param aMin - Location of the lower t value for the 'a' segment's region
   * @param aMax - Location of the higher t value for the 'a' segment's region
   * @param bMin - Location of the lower t value for the 'b' segment's region
   * @param bMax - Location of the higher t value for the 'b' segment's region
   * @returns -  This reference for chaining
   */
  initialize(a, b, atMin, atMax, btMin, btMax, aMin, aMax, bMin, bMax) {
    this.a = a;
    this.b = b;
    this.atMin = atMin;
    this.atMax = atMax;
    this.btMin = btMin;
    this.btMax = btMax;
    this.aMin = aMin;
    this.aMax = aMax;
    this.bMin = bMin;
    this.bMax = bMax;
    return this;
  }

  /**
   * Handles subdivision of the regions into 2 for the 'a' segment and 2 for the 'b' segment, then pushes any
   * intersecting bounding box regions (between 'a' and 'b') to the array.
   */
  pushSubdivisions(intersections) {
    // We are not in the pool, so our things aren't null
    const thisActive = this;
    const atMid = (thisActive.atMax + thisActive.atMin) / 2;
    const btMid = (thisActive.btMax + thisActive.btMin) / 2;

    // If we reached the point where no higher precision can be obtained, return the given intersection
    if (atMid === this.atMin || atMid === this.atMax || btMid === this.btMin || btMid === this.btMax) {
      intersections.push(this);
      return;
    }
    const aMid = thisActive.a.positionAt(atMid);
    const bMid = thisActive.b.positionAt(btMid);
    if (BoundsIntersection.boxIntersects(thisActive.aMin, aMid, thisActive.bMin, bMid)) {
      intersections.push(BoundsIntersection.pool.create(thisActive.a, thisActive.b, thisActive.atMin, atMid, thisActive.btMin, btMid, thisActive.aMin, aMid, thisActive.bMin, bMid));
    }
    if (BoundsIntersection.boxIntersects(aMid, thisActive.aMax, thisActive.bMin, bMid)) {
      intersections.push(BoundsIntersection.pool.create(thisActive.a, thisActive.b, atMid, thisActive.atMax, thisActive.btMin, btMid, aMid, thisActive.aMax, thisActive.bMin, bMid));
    }
    if (BoundsIntersection.boxIntersects(thisActive.aMin, aMid, bMid, thisActive.bMax)) {
      intersections.push(BoundsIntersection.pool.create(thisActive.a, thisActive.b, thisActive.atMin, atMid, btMid, thisActive.btMax, thisActive.aMin, aMid, bMid, thisActive.bMax));
    }
    if (BoundsIntersection.boxIntersects(aMid, thisActive.aMax, bMid, thisActive.bMax)) {
      intersections.push(BoundsIntersection.pool.create(thisActive.a, thisActive.b, atMid, thisActive.atMax, btMid, thisActive.btMax, aMid, thisActive.aMax, bMid, thisActive.bMax));
    }
    this.freeToPool();
  }

  /**
   * A measure of distance between this and another intersection.
   */
  distance(otherIntersection) {
    const daMin = this.atMin - otherIntersection.atMin;
    const daMax = this.atMax - otherIntersection.atMax;
    const dbMin = this.btMin - otherIntersection.btMin;
    const dbMax = this.btMax - otherIntersection.btMax;
    return daMin * daMin + daMax * daMax + dbMin * dbMin + dbMax * dbMax;
  }

  /**
   * Removes references (so it can allow other objects to be GC'ed or pooled)
   */
  clean() {
    this.a = null;
    this.b = null;
    this.aMin = null;
    this.aMax = null;
    this.bMin = null;
    this.bMax = null;
  }

  /**
   * Determine (finite) points of intersection between two arbitrary segments.
   *
   * Does repeated subdivision and excludes a-b region pairs that don't intersect. Doing this repeatedly narrows down
   * intersections, to the point that they can be combined for a fairly accurate answer.
   */
  static intersect(a, b) {
    if (!a.bounds.intersectsBounds(b.bounds)) {
      return [];
    }
    const intersections = BoundsIntersection.getIntersectionRanges(a, b);

    // Group together intersections that are very close (in parametric value space) so we can only return
    // one intersection (averaged value) for them.
    const groups = [];

    // NOTE: Doesn't have to be the fastest, won't be a crazy huge amount of these unless something went
    //       seriously wrong (degenerate case?)
    for (let i = 0; i < intersections.length; i++) {
      const intersection = intersections[i];
      let wasAdded = false;
      nextComparison:
      // eslint-disable-line no-labels
      for (let j = 0; j < groups.length; j++) {
        const group = groups[j];
        for (let k = 0; k < group.length; k++) {
          const otherIntersection = group[k];
          if (intersection.distance(otherIntersection) < 1e-13) {
            group.push(intersection);
            wasAdded = true;
            break nextComparison; // eslint-disable-line no-labels
          }
        }
      }

      if (!wasAdded) {
        groups.push([intersection]);
      }
    }
    const results = [];

    // For each group, average its parametric values, and create a "result intersection" from it.
    for (let i = 0; i < groups.length; i++) {
      const group = groups[i];
      let aT = 0;
      let bT = 0;
      for (let j = 0; j < group.length; j++) {
        aT += group[j].atMin + group[j].atMax;
        bT += group[j].btMin + group[j].btMax;
      }
      aT /= 2 * group.length;
      bT /= 2 * group.length;
      const positionA = a.positionAt(aT);
      const positionB = b.positionAt(bT);
      assert && assert(positionA.distance(positionB) < 1e-10);
      results.push(new SegmentIntersection(positionA.average(positionB), aT, bT));
    }

    // Clean up
    for (let i = 0; i < intersections.length; i++) {
      intersections[i].freeToPool();
    }
    BoundsIntersection.cleanPool();
    return results;
  }

  /**
   * Given two segments, returns an array of candidate intersection ranges.
   */
  static getIntersectionRanges(a, b) {
    // Internal t-values that have a local min/max in at least one coordinate. We'll split based on these, so we only
    // check intersections between monotone segments (won't have to check self-intersection).
    const aExtrema = a.getInteriorExtremaTs();
    const bExtrema = b.getInteriorExtremaTs();

    // T-value pairs
    const aInternals = _.zip([0].concat(aExtrema), aExtrema.concat([1]));
    const bInternals = _.zip([0].concat(bExtrema), bExtrema.concat([1]));

    // Set up initial candidate intersection ranges
    let intersections = [];
    for (let i = 0; i < aInternals.length; i++) {
      for (let j = 0; j < bInternals.length; j++) {
        const atMin = aInternals[i][0];
        const atMax = aInternals[i][1];
        const btMin = bInternals[j][0];
        const btMax = bInternals[j][1];
        const aMin = a.positionAt(atMin);
        const aMax = a.positionAt(atMax);
        const bMin = b.positionAt(btMin);
        const bMax = b.positionAt(btMax);
        if (BoundsIntersection.boxIntersects(aMin, aMax, bMin, bMax)) {
          intersections.push(BoundsIntersection.pool.create(a, b, atMin, atMax, btMin, btMax, aMin, aMax, bMin, bMax));
        }
      }
    }

    // Subdivide continuously
    // TODO: is 50 the proper number of iterations?
    for (let i = 0; i < 50; i++) {
      const newIntersections = [];
      for (let j = intersections.length - 1; j >= 0; j--) {
        intersections[j].pushSubdivisions(newIntersections);
      }
      intersections = newIntersections;
    }
    return intersections;
  }

  /**
   * Given the endpoints of two monotone segment regions, returns whether their bounding boxes intersect.
   */
  static boxIntersects(aMin, aMax, bMin, bMax) {
    // e.g. Bounds2.includeBounds
    const minX = Math.max(Math.min(aMin.x, aMax.x), Math.min(bMin.x, bMax.x));
    const minY = Math.max(Math.min(aMin.y, aMax.y), Math.min(bMin.y, bMax.y));
    const maxX = Math.min(Math.max(aMin.x, aMax.x), Math.max(bMin.x, bMax.x));
    const maxY = Math.min(Math.max(aMin.y, aMax.y), Math.max(bMin.y, bMax.y));
    return maxX - minX >= 0 && maxY - minY >= 0;
  }

  /**
   * Since we'll burn through a lot of pooled instances, we only remove external references fully once the full
   * process is done.
   */
  static cleanPool() {
    BoundsIntersection.pool.forEach(intersection => intersection.clean());
  }
  freeToPool() {
    BoundsIntersection.pool.freeToPool(this);
  }
  static pool = new Pool(BoundsIntersection);
}
kite.register('BoundsIntersection', BoundsIntersection);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQb29sIiwia2l0ZSIsIlNlZ21lbnRJbnRlcnNlY3Rpb24iLCJCb3VuZHNJbnRlcnNlY3Rpb24iLCJjb25zdHJ1Y3RvciIsImEiLCJiIiwiYXRNaW4iLCJhdE1heCIsImJ0TWluIiwiYnRNYXgiLCJhTWluIiwiYU1heCIsImJNaW4iLCJiTWF4IiwiaW5pdGlhbGl6ZSIsInB1c2hTdWJkaXZpc2lvbnMiLCJpbnRlcnNlY3Rpb25zIiwidGhpc0FjdGl2ZSIsImF0TWlkIiwiYnRNaWQiLCJwdXNoIiwiYU1pZCIsInBvc2l0aW9uQXQiLCJiTWlkIiwiYm94SW50ZXJzZWN0cyIsInBvb2wiLCJjcmVhdGUiLCJmcmVlVG9Qb29sIiwiZGlzdGFuY2UiLCJvdGhlckludGVyc2VjdGlvbiIsImRhTWluIiwiZGFNYXgiLCJkYk1pbiIsImRiTWF4IiwiY2xlYW4iLCJpbnRlcnNlY3QiLCJib3VuZHMiLCJpbnRlcnNlY3RzQm91bmRzIiwiZ2V0SW50ZXJzZWN0aW9uUmFuZ2VzIiwiZ3JvdXBzIiwiaSIsImxlbmd0aCIsImludGVyc2VjdGlvbiIsIndhc0FkZGVkIiwibmV4dENvbXBhcmlzb24iLCJqIiwiZ3JvdXAiLCJrIiwicmVzdWx0cyIsImFUIiwiYlQiLCJwb3NpdGlvbkEiLCJwb3NpdGlvbkIiLCJhc3NlcnQiLCJhdmVyYWdlIiwiY2xlYW5Qb29sIiwiYUV4dHJlbWEiLCJnZXRJbnRlcmlvckV4dHJlbWFUcyIsImJFeHRyZW1hIiwiYUludGVybmFscyIsIl8iLCJ6aXAiLCJjb25jYXQiLCJiSW50ZXJuYWxzIiwibmV3SW50ZXJzZWN0aW9ucyIsIm1pblgiLCJNYXRoIiwibWF4IiwibWluIiwieCIsIm1pblkiLCJ5IiwibWF4WCIsIm1heFkiLCJmb3JFYWNoIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJCb3VuZHNJbnRlcnNlY3Rpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTctMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogQSByZWdpb24gb2YgdHdvIHNlZ21lbnRzIHRoYXQgaW50ZXJzZWN0cyAoY29udGFpbnMgc3RhdGljIGZ1bmN0aW9ucyBmb3Igc2VnbWVudCBpbnRlcnNlY3Rpb24pLlxyXG4gKlxyXG4gKiBCb3VuZHNJbnRlcnNlY3Rpb24uaW50ZXJzZWN0KCBhLCBiICkgc2hvdWxkIGJlIHVzZWQgZm9yIG1vc3QgZ2VuZXJhbCBpbnRlcnNlY3Rpb24gcm91dGluZXMgYXMgYSBmYWxsYmFjay5cclxuICogT3RoZXIgc2VnbWVudC1zcGVjaWZpYyByb3V0aW5lcyBtYXkgYmUgbXVjaCBmYXN0ZXIuXHJcbiAqXHJcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cclxuICovXHJcblxyXG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuLi8uLi8uLi9kb3QvanMvVmVjdG9yMi5qcyc7XHJcbmltcG9ydCBQb29sIGZyb20gJy4uLy4uLy4uL3BoZXQtY29yZS9qcy9Qb29sLmpzJztcclxuaW1wb3J0IHsga2l0ZSwgU2VnbWVudCwgU2VnbWVudEludGVyc2VjdGlvbiB9IGZyb20gJy4uL2ltcG9ydHMuanMnO1xyXG5cclxudHlwZSBBY3RpdmVCb3VuZHNJbnRlcnNlY3Rpb24gPSB7XHJcbiAgWyBQcm9wZXJ0eU5hbWUgaW4ga2V5b2YgQm91bmRzSW50ZXJzZWN0aW9uIF06IEJvdW5kc0ludGVyc2VjdGlvbltQcm9wZXJ0eU5hbWVdIGV4dGVuZHMgKCBpbmZlciBUIHwgbnVsbCApID8gVCA6IEJvdW5kc0ludGVyc2VjdGlvbltQcm9wZXJ0eU5hbWVdO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQm91bmRzSW50ZXJzZWN0aW9uIHtcclxuXHJcbiAgLy8gTnVsbCBpZiBjbGVhbmVkIG9mIHJlZmVyZW5jZXNcclxuICBwdWJsaWMgYSE6IFNlZ21lbnQgfCBudWxsO1xyXG4gIHB1YmxpYyBiITogU2VnbWVudCB8IG51bGw7XHJcblxyXG4gIHB1YmxpYyBhdE1pbiE6IG51bWJlcjtcclxuICBwdWJsaWMgYXRNYXghOiBudW1iZXI7XHJcbiAgcHVibGljIGJ0TWluITogbnVtYmVyO1xyXG4gIHB1YmxpYyBidE1heCE6IG51bWJlcjtcclxuXHJcbiAgLy8gTnVsbCBpZiBjbGVhbmVkIG9mIHJlZmVyZW5jZXNcclxuICBwdWJsaWMgYU1pbiE6IFZlY3RvcjIgfCBudWxsO1xyXG4gIHB1YmxpYyBhTWF4ITogVmVjdG9yMiB8IG51bGw7XHJcbiAgcHVibGljIGJNaW4hOiBWZWN0b3IyIHwgbnVsbDtcclxuICBwdWJsaWMgYk1heCE6IFZlY3RvcjIgfCBudWxsO1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0gYVxyXG4gICAqIEBwYXJhbSBiXHJcbiAgICogQHBhcmFtIGF0TWluIC0gTG93ZXIgdCB2YWx1ZSBmb3IgdGhlIHJlZ2lvbiBvZiB0aGUgJ2EnIHNlZ21lbnRcclxuICAgKiBAcGFyYW0gYXRNYXggLSBIaWdoZXIgdCB2YWx1ZSBmb3IgdGhlIHJlZ2lvbiBvZiB0aGUgJ2EnIHNlZ21lbnRcclxuICAgKiBAcGFyYW0gYnRNaW4gLSBMb3dlciB0IHZhbHVlIGZvciB0aGUgcmVnaW9uIG9mIHRoZSAnYicgc2VnbWVudFxyXG4gICAqIEBwYXJhbSBidE1heCAtIEhpZ2hlciB0IHZhbHVlIGZvciB0aGUgcmVnaW9uIG9mIHRoZSAnYicgc2VnbWVudFxyXG4gICAqIEBwYXJhbSBhTWluIC0gTG9jYXRpb24gb2YgdGhlIGxvd2VyIHQgdmFsdWUgZm9yIHRoZSAnYScgc2VnbWVudCdzIHJlZ2lvblxyXG4gICAqIEBwYXJhbSBhTWF4IC0gTG9jYXRpb24gb2YgdGhlIGhpZ2hlciB0IHZhbHVlIGZvciB0aGUgJ2EnIHNlZ21lbnQncyByZWdpb25cclxuICAgKiBAcGFyYW0gYk1pbiAtIExvY2F0aW9uIG9mIHRoZSBsb3dlciB0IHZhbHVlIGZvciB0aGUgJ2InIHNlZ21lbnQncyByZWdpb25cclxuICAgKiBAcGFyYW0gYk1heCAtIExvY2F0aW9uIG9mIHRoZSBoaWdoZXIgdCB2YWx1ZSBmb3IgdGhlICdiJyBzZWdtZW50J3MgcmVnaW9uXHJcbiAgICovXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBhOiBTZWdtZW50LCBiOiBTZWdtZW50LCBhdE1pbjogbnVtYmVyLCBhdE1heDogbnVtYmVyLCBidE1pbjogbnVtYmVyLCBidE1heDogbnVtYmVyLCBhTWluOiBWZWN0b3IyLCBhTWF4OiBWZWN0b3IyLCBiTWluOiBWZWN0b3IyLCBiTWF4OiBWZWN0b3IyICkge1xyXG4gICAgdGhpcy5pbml0aWFsaXplKCBhLCBiLCBhdE1pbiwgYXRNYXgsIGJ0TWluLCBidE1heCwgYU1pbiwgYU1heCwgYk1pbiwgYk1heCApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIGFcclxuICAgKiBAcGFyYW0gYlxyXG4gICAqIEBwYXJhbSBhdE1pbiAtIExvd2VyIHQgdmFsdWUgZm9yIHRoZSByZWdpb24gb2YgdGhlICdhJyBzZWdtZW50XHJcbiAgICogQHBhcmFtIGF0TWF4IC0gSGlnaGVyIHQgdmFsdWUgZm9yIHRoZSByZWdpb24gb2YgdGhlICdhJyBzZWdtZW50XHJcbiAgICogQHBhcmFtIGJ0TWluIC0gTG93ZXIgdCB2YWx1ZSBmb3IgdGhlIHJlZ2lvbiBvZiB0aGUgJ2InIHNlZ21lbnRcclxuICAgKiBAcGFyYW0gYnRNYXggLSBIaWdoZXIgdCB2YWx1ZSBmb3IgdGhlIHJlZ2lvbiBvZiB0aGUgJ2InIHNlZ21lbnRcclxuICAgKiBAcGFyYW0gYU1pbiAtIExvY2F0aW9uIG9mIHRoZSBsb3dlciB0IHZhbHVlIGZvciB0aGUgJ2EnIHNlZ21lbnQncyByZWdpb25cclxuICAgKiBAcGFyYW0gYU1heCAtIExvY2F0aW9uIG9mIHRoZSBoaWdoZXIgdCB2YWx1ZSBmb3IgdGhlICdhJyBzZWdtZW50J3MgcmVnaW9uXHJcbiAgICogQHBhcmFtIGJNaW4gLSBMb2NhdGlvbiBvZiB0aGUgbG93ZXIgdCB2YWx1ZSBmb3IgdGhlICdiJyBzZWdtZW50J3MgcmVnaW9uXHJcbiAgICogQHBhcmFtIGJNYXggLSBMb2NhdGlvbiBvZiB0aGUgaGlnaGVyIHQgdmFsdWUgZm9yIHRoZSAnYicgc2VnbWVudCdzIHJlZ2lvblxyXG4gICAqIEByZXR1cm5zIC0gIFRoaXMgcmVmZXJlbmNlIGZvciBjaGFpbmluZ1xyXG4gICAqL1xyXG4gIHB1YmxpYyBpbml0aWFsaXplKCBhOiBTZWdtZW50LCBiOiBTZWdtZW50LCBhdE1pbjogbnVtYmVyLCBhdE1heDogbnVtYmVyLCBidE1pbjogbnVtYmVyLCBidE1heDogbnVtYmVyLCBhTWluOiBWZWN0b3IyLCBhTWF4OiBWZWN0b3IyLCBiTWluOiBWZWN0b3IyLCBiTWF4OiBWZWN0b3IyICk6IEJvdW5kc0ludGVyc2VjdGlvbiB7XHJcblxyXG4gICAgdGhpcy5hID0gYTtcclxuICAgIHRoaXMuYiA9IGI7XHJcbiAgICB0aGlzLmF0TWluID0gYXRNaW47XHJcbiAgICB0aGlzLmF0TWF4ID0gYXRNYXg7XHJcbiAgICB0aGlzLmJ0TWluID0gYnRNaW47XHJcbiAgICB0aGlzLmJ0TWF4ID0gYnRNYXg7XHJcbiAgICB0aGlzLmFNaW4gPSBhTWluO1xyXG4gICAgdGhpcy5hTWF4ID0gYU1heDtcclxuICAgIHRoaXMuYk1pbiA9IGJNaW47XHJcbiAgICB0aGlzLmJNYXggPSBiTWF4O1xyXG5cclxuICAgIHJldHVybiB0aGlzIGFzIHVua25vd24gYXMgQm91bmRzSW50ZXJzZWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSGFuZGxlcyBzdWJkaXZpc2lvbiBvZiB0aGUgcmVnaW9ucyBpbnRvIDIgZm9yIHRoZSAnYScgc2VnbWVudCBhbmQgMiBmb3IgdGhlICdiJyBzZWdtZW50LCB0aGVuIHB1c2hlcyBhbnlcclxuICAgKiBpbnRlcnNlY3RpbmcgYm91bmRpbmcgYm94IHJlZ2lvbnMgKGJldHdlZW4gJ2EnIGFuZCAnYicpIHRvIHRoZSBhcnJheS5cclxuICAgKi9cclxuICBwcml2YXRlIHB1c2hTdWJkaXZpc2lvbnMoIGludGVyc2VjdGlvbnM6IEJvdW5kc0ludGVyc2VjdGlvbltdICk6IHZvaWQge1xyXG5cclxuICAgIC8vIFdlIGFyZSBub3QgaW4gdGhlIHBvb2wsIHNvIG91ciB0aGluZ3MgYXJlbid0IG51bGxcclxuICAgIGNvbnN0IHRoaXNBY3RpdmUgPSB0aGlzIGFzIHVua25vd24gYXMgQWN0aXZlQm91bmRzSW50ZXJzZWN0aW9uO1xyXG5cclxuICAgIGNvbnN0IGF0TWlkID0gKCB0aGlzQWN0aXZlLmF0TWF4ICsgdGhpc0FjdGl2ZS5hdE1pbiApIC8gMjtcclxuICAgIGNvbnN0IGJ0TWlkID0gKCB0aGlzQWN0aXZlLmJ0TWF4ICsgdGhpc0FjdGl2ZS5idE1pbiApIC8gMjtcclxuXHJcbiAgICAvLyBJZiB3ZSByZWFjaGVkIHRoZSBwb2ludCB3aGVyZSBubyBoaWdoZXIgcHJlY2lzaW9uIGNhbiBiZSBvYnRhaW5lZCwgcmV0dXJuIHRoZSBnaXZlbiBpbnRlcnNlY3Rpb25cclxuICAgIGlmICggYXRNaWQgPT09IHRoaXMuYXRNaW4gfHwgYXRNaWQgPT09IHRoaXMuYXRNYXggfHwgYnRNaWQgPT09IHRoaXMuYnRNaW4gfHwgYnRNaWQgPT09IHRoaXMuYnRNYXggKSB7XHJcbiAgICAgIGludGVyc2VjdGlvbnMucHVzaCggdGhpcyBhcyB1bmtub3duIGFzIEJvdW5kc0ludGVyc2VjdGlvbiApO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBhTWlkID0gdGhpc0FjdGl2ZS5hLnBvc2l0aW9uQXQoIGF0TWlkICk7XHJcbiAgICBjb25zdCBiTWlkID0gdGhpc0FjdGl2ZS5iLnBvc2l0aW9uQXQoIGJ0TWlkICk7XHJcblxyXG4gICAgaWYgKCBCb3VuZHNJbnRlcnNlY3Rpb24uYm94SW50ZXJzZWN0cyggdGhpc0FjdGl2ZS5hTWluLCBhTWlkLCB0aGlzQWN0aXZlLmJNaW4sIGJNaWQgKSApIHtcclxuICAgICAgaW50ZXJzZWN0aW9ucy5wdXNoKCBCb3VuZHNJbnRlcnNlY3Rpb24ucG9vbC5jcmVhdGUoXHJcbiAgICAgICAgdGhpc0FjdGl2ZS5hLCB0aGlzQWN0aXZlLmIsIHRoaXNBY3RpdmUuYXRNaW4sIGF0TWlkLCB0aGlzQWN0aXZlLmJ0TWluLCBidE1pZCwgdGhpc0FjdGl2ZS5hTWluLCBhTWlkLCB0aGlzQWN0aXZlLmJNaW4sIGJNaWRcclxuICAgICAgKSApO1xyXG4gICAgfVxyXG4gICAgaWYgKCBCb3VuZHNJbnRlcnNlY3Rpb24uYm94SW50ZXJzZWN0cyggYU1pZCwgdGhpc0FjdGl2ZS5hTWF4LCB0aGlzQWN0aXZlLmJNaW4sIGJNaWQgKSApIHtcclxuICAgICAgaW50ZXJzZWN0aW9ucy5wdXNoKCBCb3VuZHNJbnRlcnNlY3Rpb24ucG9vbC5jcmVhdGUoXHJcbiAgICAgICAgdGhpc0FjdGl2ZS5hLCB0aGlzQWN0aXZlLmIsIGF0TWlkLCB0aGlzQWN0aXZlLmF0TWF4LCB0aGlzQWN0aXZlLmJ0TWluLCBidE1pZCwgYU1pZCwgdGhpc0FjdGl2ZS5hTWF4LCB0aGlzQWN0aXZlLmJNaW4sIGJNaWRcclxuICAgICAgKSApO1xyXG4gICAgfVxyXG4gICAgaWYgKCBCb3VuZHNJbnRlcnNlY3Rpb24uYm94SW50ZXJzZWN0cyggdGhpc0FjdGl2ZS5hTWluLCBhTWlkLCBiTWlkLCB0aGlzQWN0aXZlLmJNYXggKSApIHtcclxuICAgICAgaW50ZXJzZWN0aW9ucy5wdXNoKCBCb3VuZHNJbnRlcnNlY3Rpb24ucG9vbC5jcmVhdGUoXHJcbiAgICAgICAgdGhpc0FjdGl2ZS5hLCB0aGlzQWN0aXZlLmIsIHRoaXNBY3RpdmUuYXRNaW4sIGF0TWlkLCBidE1pZCwgdGhpc0FjdGl2ZS5idE1heCwgdGhpc0FjdGl2ZS5hTWluLCBhTWlkLCBiTWlkLCB0aGlzQWN0aXZlLmJNYXhcclxuICAgICAgKSApO1xyXG4gICAgfVxyXG4gICAgaWYgKCBCb3VuZHNJbnRlcnNlY3Rpb24uYm94SW50ZXJzZWN0cyggYU1pZCwgdGhpc0FjdGl2ZS5hTWF4LCBiTWlkLCB0aGlzQWN0aXZlLmJNYXggKSApIHtcclxuICAgICAgaW50ZXJzZWN0aW9ucy5wdXNoKCBCb3VuZHNJbnRlcnNlY3Rpb24ucG9vbC5jcmVhdGUoXHJcbiAgICAgICAgdGhpc0FjdGl2ZS5hLCB0aGlzQWN0aXZlLmIsIGF0TWlkLCB0aGlzQWN0aXZlLmF0TWF4LCBidE1pZCwgdGhpc0FjdGl2ZS5idE1heCwgYU1pZCwgdGhpc0FjdGl2ZS5hTWF4LCBiTWlkLCB0aGlzQWN0aXZlLmJNYXhcclxuICAgICAgKSApO1xyXG4gICAgfVxyXG5cclxuICAgICggdGhpcyBhcyB1bmtub3duIGFzIEJvdW5kc0ludGVyc2VjdGlvbiApLmZyZWVUb1Bvb2woKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEEgbWVhc3VyZSBvZiBkaXN0YW5jZSBiZXR3ZWVuIHRoaXMgYW5kIGFub3RoZXIgaW50ZXJzZWN0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkaXN0YW5jZSggb3RoZXJJbnRlcnNlY3Rpb246IEJvdW5kc0ludGVyc2VjdGlvbiApOiBudW1iZXIge1xyXG4gICAgY29uc3QgZGFNaW4gPSB0aGlzLmF0TWluIC0gb3RoZXJJbnRlcnNlY3Rpb24uYXRNaW47XHJcbiAgICBjb25zdCBkYU1heCA9IHRoaXMuYXRNYXggLSBvdGhlckludGVyc2VjdGlvbi5hdE1heDtcclxuICAgIGNvbnN0IGRiTWluID0gdGhpcy5idE1pbiAtIG90aGVySW50ZXJzZWN0aW9uLmJ0TWluO1xyXG4gICAgY29uc3QgZGJNYXggPSB0aGlzLmJ0TWF4IC0gb3RoZXJJbnRlcnNlY3Rpb24uYnRNYXg7XHJcbiAgICByZXR1cm4gZGFNaW4gKiBkYU1pbiArIGRhTWF4ICogZGFNYXggKyBkYk1pbiAqIGRiTWluICsgZGJNYXggKiBkYk1heDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZXMgcmVmZXJlbmNlcyAoc28gaXQgY2FuIGFsbG93IG90aGVyIG9iamVjdHMgdG8gYmUgR0MnZWQgb3IgcG9vbGVkKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBjbGVhbigpOiB2b2lkIHtcclxuICAgIHRoaXMuYSA9IG51bGw7XHJcbiAgICB0aGlzLmIgPSBudWxsO1xyXG4gICAgdGhpcy5hTWluID0gbnVsbDtcclxuICAgIHRoaXMuYU1heCA9IG51bGw7XHJcbiAgICB0aGlzLmJNaW4gPSBudWxsO1xyXG4gICAgdGhpcy5iTWF4ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERldGVybWluZSAoZmluaXRlKSBwb2ludHMgb2YgaW50ZXJzZWN0aW9uIGJldHdlZW4gdHdvIGFyYml0cmFyeSBzZWdtZW50cy5cclxuICAgKlxyXG4gICAqIERvZXMgcmVwZWF0ZWQgc3ViZGl2aXNpb24gYW5kIGV4Y2x1ZGVzIGEtYiByZWdpb24gcGFpcnMgdGhhdCBkb24ndCBpbnRlcnNlY3QuIERvaW5nIHRoaXMgcmVwZWF0ZWRseSBuYXJyb3dzIGRvd25cclxuICAgKiBpbnRlcnNlY3Rpb25zLCB0byB0aGUgcG9pbnQgdGhhdCB0aGV5IGNhbiBiZSBjb21iaW5lZCBmb3IgYSBmYWlybHkgYWNjdXJhdGUgYW5zd2VyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgaW50ZXJzZWN0KCBhOiBTZWdtZW50LCBiOiBTZWdtZW50ICk6IFNlZ21lbnRJbnRlcnNlY3Rpb25bXSB7XHJcbiAgICBpZiAoICFhLmJvdW5kcy5pbnRlcnNlY3RzQm91bmRzKCBiLmJvdW5kcyApICkge1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaW50ZXJzZWN0aW9ucyA9IEJvdW5kc0ludGVyc2VjdGlvbi5nZXRJbnRlcnNlY3Rpb25SYW5nZXMoIGEsIGIgKTtcclxuXHJcbiAgICAvLyBHcm91cCB0b2dldGhlciBpbnRlcnNlY3Rpb25zIHRoYXQgYXJlIHZlcnkgY2xvc2UgKGluIHBhcmFtZXRyaWMgdmFsdWUgc3BhY2UpIHNvIHdlIGNhbiBvbmx5IHJldHVyblxyXG4gICAgLy8gb25lIGludGVyc2VjdGlvbiAoYXZlcmFnZWQgdmFsdWUpIGZvciB0aGVtLlxyXG4gICAgY29uc3QgZ3JvdXBzID0gW107XHJcblxyXG4gICAgLy8gTk9URTogRG9lc24ndCBoYXZlIHRvIGJlIHRoZSBmYXN0ZXN0LCB3b24ndCBiZSBhIGNyYXp5IGh1Z2UgYW1vdW50IG9mIHRoZXNlIHVubGVzcyBzb21ldGhpbmcgd2VudFxyXG4gICAgLy8gICAgICAgc2VyaW91c2x5IHdyb25nIChkZWdlbmVyYXRlIGNhc2U/KVxyXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgaW50ZXJzZWN0aW9ucy5sZW5ndGg7IGkrKyApIHtcclxuICAgICAgY29uc3QgaW50ZXJzZWN0aW9uID0gaW50ZXJzZWN0aW9uc1sgaSBdO1xyXG4gICAgICBsZXQgd2FzQWRkZWQgPSBmYWxzZTtcclxuICAgICAgbmV4dENvbXBhcmlzb246IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbGFiZWxzXHJcbiAgICAgICAgZm9yICggbGV0IGogPSAwOyBqIDwgZ3JvdXBzLmxlbmd0aDsgaisrICkge1xyXG4gICAgICAgICAgY29uc3QgZ3JvdXAgPSBncm91cHNbIGogXTtcclxuICAgICAgICAgIGZvciAoIGxldCBrID0gMDsgayA8IGdyb3VwLmxlbmd0aDsgaysrICkge1xyXG4gICAgICAgICAgICBjb25zdCBvdGhlckludGVyc2VjdGlvbiA9IGdyb3VwWyBrIF07XHJcbiAgICAgICAgICAgIGlmICggaW50ZXJzZWN0aW9uLmRpc3RhbmNlKCBvdGhlckludGVyc2VjdGlvbiApIDwgMWUtMTMgKSB7XHJcbiAgICAgICAgICAgICAgZ3JvdXAucHVzaCggaW50ZXJzZWN0aW9uICk7XHJcbiAgICAgICAgICAgICAgd2FzQWRkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIGJyZWFrIG5leHRDb21wYXJpc29uOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWxhYmVsc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICBpZiAoICF3YXNBZGRlZCApIHtcclxuICAgICAgICBncm91cHMucHVzaCggWyBpbnRlcnNlY3Rpb24gXSApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzdWx0czogU2VnbWVudEludGVyc2VjdGlvbltdID0gW107XHJcblxyXG4gICAgLy8gRm9yIGVhY2ggZ3JvdXAsIGF2ZXJhZ2UgaXRzIHBhcmFtZXRyaWMgdmFsdWVzLCBhbmQgY3JlYXRlIGEgXCJyZXN1bHQgaW50ZXJzZWN0aW9uXCIgZnJvbSBpdC5cclxuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IGdyb3Vwcy5sZW5ndGg7IGkrKyApIHtcclxuICAgICAgY29uc3QgZ3JvdXAgPSBncm91cHNbIGkgXTtcclxuXHJcbiAgICAgIGxldCBhVCA9IDA7XHJcbiAgICAgIGxldCBiVCA9IDA7XHJcbiAgICAgIGZvciAoIGxldCBqID0gMDsgaiA8IGdyb3VwLmxlbmd0aDsgaisrICkge1xyXG4gICAgICAgIGFUICs9IGdyb3VwWyBqIF0uYXRNaW4gKyBncm91cFsgaiBdLmF0TWF4O1xyXG4gICAgICAgIGJUICs9IGdyb3VwWyBqIF0uYnRNaW4gKyBncm91cFsgaiBdLmJ0TWF4O1xyXG4gICAgICB9XHJcbiAgICAgIGFUIC89IDIgKiBncm91cC5sZW5ndGg7XHJcbiAgICAgIGJUIC89IDIgKiBncm91cC5sZW5ndGg7XHJcblxyXG4gICAgICBjb25zdCBwb3NpdGlvbkEgPSBhLnBvc2l0aW9uQXQoIGFUICk7XHJcbiAgICAgIGNvbnN0IHBvc2l0aW9uQiA9IGIucG9zaXRpb25BdCggYlQgKTtcclxuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggcG9zaXRpb25BLmRpc3RhbmNlKCBwb3NpdGlvbkIgKSA8IDFlLTEwICk7XHJcblxyXG4gICAgICByZXN1bHRzLnB1c2goIG5ldyBTZWdtZW50SW50ZXJzZWN0aW9uKCBwb3NpdGlvbkEuYXZlcmFnZSggcG9zaXRpb25CICksIGFULCBiVCApICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2xlYW4gdXBcclxuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IGludGVyc2VjdGlvbnMubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgIGludGVyc2VjdGlvbnNbIGkgXS5mcmVlVG9Qb29sKCk7XHJcbiAgICB9XHJcbiAgICBCb3VuZHNJbnRlcnNlY3Rpb24uY2xlYW5Qb29sKCk7XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHaXZlbiB0d28gc2VnbWVudHMsIHJldHVybnMgYW4gYXJyYXkgb2YgY2FuZGlkYXRlIGludGVyc2VjdGlvbiByYW5nZXMuXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0SW50ZXJzZWN0aW9uUmFuZ2VzKCBhOiBTZWdtZW50LCBiOiBTZWdtZW50ICk6IEJvdW5kc0ludGVyc2VjdGlvbltdIHtcclxuICAgIC8vIEludGVybmFsIHQtdmFsdWVzIHRoYXQgaGF2ZSBhIGxvY2FsIG1pbi9tYXggaW4gYXQgbGVhc3Qgb25lIGNvb3JkaW5hdGUuIFdlJ2xsIHNwbGl0IGJhc2VkIG9uIHRoZXNlLCBzbyB3ZSBvbmx5XHJcbiAgICAvLyBjaGVjayBpbnRlcnNlY3Rpb25zIGJldHdlZW4gbW9ub3RvbmUgc2VnbWVudHMgKHdvbid0IGhhdmUgdG8gY2hlY2sgc2VsZi1pbnRlcnNlY3Rpb24pLlxyXG4gICAgY29uc3QgYUV4dHJlbWEgPSBhLmdldEludGVyaW9yRXh0cmVtYVRzKCk7XHJcbiAgICBjb25zdCBiRXh0cmVtYSA9IGIuZ2V0SW50ZXJpb3JFeHRyZW1hVHMoKTtcclxuXHJcbiAgICAvLyBULXZhbHVlIHBhaXJzXHJcbiAgICBjb25zdCBhSW50ZXJuYWxzID0gXy56aXAoIFsgMCBdLmNvbmNhdCggYUV4dHJlbWEgKSwgYUV4dHJlbWEuY29uY2F0KCBbIDEgXSApICk7XHJcbiAgICBjb25zdCBiSW50ZXJuYWxzID0gXy56aXAoIFsgMCBdLmNvbmNhdCggYkV4dHJlbWEgKSwgYkV4dHJlbWEuY29uY2F0KCBbIDEgXSApICk7XHJcblxyXG4gICAgLy8gU2V0IHVwIGluaXRpYWwgY2FuZGlkYXRlIGludGVyc2VjdGlvbiByYW5nZXNcclxuICAgIGxldCBpbnRlcnNlY3Rpb25zID0gW107XHJcbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBhSW50ZXJuYWxzLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICBmb3IgKCBsZXQgaiA9IDA7IGogPCBiSW50ZXJuYWxzLmxlbmd0aDsgaisrICkge1xyXG4gICAgICAgIGNvbnN0IGF0TWluID0gYUludGVybmFsc1sgaSBdWyAwIF0hO1xyXG4gICAgICAgIGNvbnN0IGF0TWF4ID0gYUludGVybmFsc1sgaSBdWyAxIF0hO1xyXG4gICAgICAgIGNvbnN0IGJ0TWluID0gYkludGVybmFsc1sgaiBdWyAwIF0hO1xyXG4gICAgICAgIGNvbnN0IGJ0TWF4ID0gYkludGVybmFsc1sgaiBdWyAxIF0hO1xyXG4gICAgICAgIGNvbnN0IGFNaW4gPSBhLnBvc2l0aW9uQXQoIGF0TWluICk7XHJcbiAgICAgICAgY29uc3QgYU1heCA9IGEucG9zaXRpb25BdCggYXRNYXggKTtcclxuICAgICAgICBjb25zdCBiTWluID0gYi5wb3NpdGlvbkF0KCBidE1pbiApO1xyXG4gICAgICAgIGNvbnN0IGJNYXggPSBiLnBvc2l0aW9uQXQoIGJ0TWF4ICk7XHJcbiAgICAgICAgaWYgKCBCb3VuZHNJbnRlcnNlY3Rpb24uYm94SW50ZXJzZWN0cyggYU1pbiwgYU1heCwgYk1pbiwgYk1heCApICkge1xyXG4gICAgICAgICAgaW50ZXJzZWN0aW9ucy5wdXNoKCBCb3VuZHNJbnRlcnNlY3Rpb24ucG9vbC5jcmVhdGUoXHJcbiAgICAgICAgICAgIGEsIGIsIGF0TWluLCBhdE1heCwgYnRNaW4sIGJ0TWF4LCBhTWluLCBhTWF4LCBiTWluLCBiTWF4XHJcbiAgICAgICAgICApICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU3ViZGl2aWRlIGNvbnRpbnVvdXNseVxyXG4gICAgLy8gVE9ETzogaXMgNTAgdGhlIHByb3BlciBudW1iZXIgb2YgaXRlcmF0aW9ucz9cclxuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IDUwOyBpKysgKSB7XHJcbiAgICAgIGNvbnN0IG5ld0ludGVyc2VjdGlvbnM6IEJvdW5kc0ludGVyc2VjdGlvbltdID0gW107XHJcbiAgICAgIGZvciAoIGxldCBqID0gaW50ZXJzZWN0aW9ucy5sZW5ndGggLSAxOyBqID49IDA7IGotLSApIHtcclxuICAgICAgICBpbnRlcnNlY3Rpb25zWyBqIF0ucHVzaFN1YmRpdmlzaW9ucyggbmV3SW50ZXJzZWN0aW9ucyApO1xyXG4gICAgICB9XHJcbiAgICAgIGludGVyc2VjdGlvbnMgPSBuZXdJbnRlcnNlY3Rpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBpbnRlcnNlY3Rpb25zO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2l2ZW4gdGhlIGVuZHBvaW50cyBvZiB0d28gbW9ub3RvbmUgc2VnbWVudCByZWdpb25zLCByZXR1cm5zIHdoZXRoZXIgdGhlaXIgYm91bmRpbmcgYm94ZXMgaW50ZXJzZWN0LlxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGJveEludGVyc2VjdHMoIGFNaW46IFZlY3RvcjIsIGFNYXg6IFZlY3RvcjIsIGJNaW46IFZlY3RvcjIsIGJNYXg6IFZlY3RvcjIgKTogYm9vbGVhbiB7XHJcblxyXG4gICAgLy8gZS5nLiBCb3VuZHMyLmluY2x1ZGVCb3VuZHNcclxuICAgIGNvbnN0IG1pblggPSBNYXRoLm1heCggTWF0aC5taW4oIGFNaW4ueCwgYU1heC54ICksIE1hdGgubWluKCBiTWluLngsIGJNYXgueCApICk7XHJcbiAgICBjb25zdCBtaW5ZID0gTWF0aC5tYXgoIE1hdGgubWluKCBhTWluLnksIGFNYXgueSApLCBNYXRoLm1pbiggYk1pbi55LCBiTWF4LnkgKSApO1xyXG4gICAgY29uc3QgbWF4WCA9IE1hdGgubWluKCBNYXRoLm1heCggYU1pbi54LCBhTWF4LnggKSwgTWF0aC5tYXgoIGJNaW4ueCwgYk1heC54ICkgKTtcclxuICAgIGNvbnN0IG1heFkgPSBNYXRoLm1pbiggTWF0aC5tYXgoIGFNaW4ueSwgYU1heC55ICksIE1hdGgubWF4KCBiTWluLnksIGJNYXgueSApICk7XHJcbiAgICByZXR1cm4gKCBtYXhYIC0gbWluWCApID49IDAgJiYgKCBtYXhZIC0gbWluWSA+PSAwICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTaW5jZSB3ZSdsbCBidXJuIHRocm91Z2ggYSBsb3Qgb2YgcG9vbGVkIGluc3RhbmNlcywgd2Ugb25seSByZW1vdmUgZXh0ZXJuYWwgcmVmZXJlbmNlcyBmdWxseSBvbmNlIHRoZSBmdWxsXHJcbiAgICogcHJvY2VzcyBpcyBkb25lLlxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGNsZWFuUG9vbCgpOiB2b2lkIHtcclxuICAgIEJvdW5kc0ludGVyc2VjdGlvbi5wb29sLmZvckVhY2goIGludGVyc2VjdGlvbiA9PiBpbnRlcnNlY3Rpb24uY2xlYW4oKSApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGZyZWVUb1Bvb2woKTogdm9pZCB7XHJcbiAgICBCb3VuZHNJbnRlcnNlY3Rpb24ucG9vbC5mcmVlVG9Qb29sKCB0aGlzICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IHBvb2wgPSBuZXcgUG9vbCggQm91bmRzSW50ZXJzZWN0aW9uICk7XHJcbn1cclxuXHJcbmtpdGUucmVnaXN0ZXIoICdCb3VuZHNJbnRlcnNlY3Rpb24nLCBCb3VuZHNJbnRlcnNlY3Rpb24gKTtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBLE9BQU9BLElBQUksTUFBTSwrQkFBK0I7QUFDaEQsU0FBU0MsSUFBSSxFQUFXQyxtQkFBbUIsUUFBUSxlQUFlO0FBTWxFLGVBQWUsTUFBTUMsa0JBQWtCLENBQUM7RUFFdEM7O0VBU0E7O0VBTUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ1NDLFdBQVdBLENB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