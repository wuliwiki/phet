// Copyright 2022-2023, University of Colorado Boulder

/**
 * Model class for the 'Decay' screen.
 *
 * @author Luisa Vargas
 */

import buildANucleus from '../../buildANucleus.js';
import BANModel from '../../common/model/BANModel.js';
import AtomIdentifier from '../../../../shred/js/AtomIdentifier.js';
import BANConstants from '../../common/BANConstants.js';
import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import DecayType from '../../common/view/DecayType.js';
import ParticleAtom from '../../../../shred/js/model/ParticleAtom.js';
class DecayModel extends BANModel {
  // the half-life number

  // the decay enabled properties for all five decays

  constructor() {
    const particleAtom = new ParticleAtom();

    // empirically determined, the last nuclide the Decay screen goes up to is Uranium-238 (92 protons and 146 neutrons)
    super(BANConstants.DECAY_MAX_NUMBER_OF_PROTONS, BANConstants.DECAY_MAX_NUMBER_OF_NEUTRONS, particleAtom);
    this.halfLifeNumberProperty = new DerivedProperty([this.particleAtom.protonCountProperty, this.particleAtom.neutronCountProperty, this.doesNuclideExistBooleanProperty, this.isStableBooleanProperty], (protonCount, neutronCount, doesNuclideExist, isStable) => {
      let halfLife;

      // a nuclide of 0 protons and 0 neutrons does not exist
      if (doesNuclideExist && !(protonCount === 0 && neutronCount === 0)) {
        // the nuclide is stable, set the indicator to the maximum half-life number on the half-life number line
        if (isStable) {
          halfLife = Math.pow(10, BANConstants.HALF_LIFE_NUMBER_LINE_END_EXPONENT);
        }

        // the nuclide is unstable and its half-life data is missing, set -1 as the half-life as a placeholder
        else if (AtomIdentifier.getNuclideHalfLife(protonCount, neutronCount) === null) {
          halfLife = -1;
        }

        // the nuclide is unstable and its half-life data is not missing, update its half-life
        else {
          halfLife = AtomIdentifier.getNuclideHalfLife(protonCount, neutronCount);
        }
      }

      // the nuclide does not exist
      else {
        halfLife = 0;
      }

      // TODO: is this alright that the halfLife is not correct yet?
      // one of the boolean properties (doesNuclideExist or isStable) is not updated yet but it will be updated soon
      if (halfLife === undefined) {
        return 0;
      } else {
        return halfLife;
      }
    });

    // function which would return whether a given nuclide (defined by the number of protons and neutrons) has a certain
    // available decay type
    const createDecayEnabledListener = (protonCount, neutronCount, decayType) => {
      const decays = AtomIdentifier.getAvailableDecays(protonCount, neutronCount);

      // temporarily disable the beta minus decay for U-237 since that freezes the sim. See https://github.com/phetsims/build-a-nucleus/issues/42.
      if (protonCount === 92 && neutronCount === 145 && decayType === DecayType.BETA_MINUS_DECAY) {
        return false;
      }
      return decays.includes(decayType.name);
    };

    // create the decay enabled properties
    this.protonEmissionEnabledProperty = new DerivedProperty([this.particleAtom.protonCountProperty, this.particleAtom.neutronCountProperty], (protonCount, neutronCount) => createDecayEnabledListener(protonCount, neutronCount, DecayType.PROTON_EMISSION));
    this.neutronEmissionEnabledProperty = new DerivedProperty([this.particleAtom.protonCountProperty, this.particleAtom.neutronCountProperty], (protonCount, neutronCount) => createDecayEnabledListener(protonCount, neutronCount, DecayType.NEUTRON_EMISSION));
    this.betaMinusDecayEnabledProperty = new DerivedProperty([this.particleAtom.protonCountProperty, this.particleAtom.neutronCountProperty], (protonCount, neutronCount) => createDecayEnabledListener(protonCount, neutronCount, DecayType.BETA_MINUS_DECAY));
    this.betaPlusDecayEnabledProperty = new DerivedProperty([this.particleAtom.protonCountProperty, this.particleAtom.neutronCountProperty], (protonCount, neutronCount) => createDecayEnabledListener(protonCount, neutronCount, DecayType.BETA_PLUS_DECAY));
    this.alphaDecayEnabledProperty = new DerivedProperty([this.particleAtom.protonCountProperty, this.particleAtom.neutronCountProperty], (protonCount, neutronCount) => createDecayEnabledListener(protonCount, neutronCount, DecayType.ALPHA_DECAY));
  }
  reset() {
    super.reset();
  }

  /**
   * @param dt - time step, in seconds
   */
  step(dt) {
    super.step(dt);
  }
}
buildANucleus.register('DecayModel', DecayModel);
export default DecayModel;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJidWlsZEFOdWNsZXVzIiwiQkFOTW9kZWwiLCJBdG9tSWRlbnRpZmllciIsIkJBTkNvbnN0YW50cyIsIkRlcml2ZWRQcm9wZXJ0eSIsIkRlY2F5VHlwZSIsIlBhcnRpY2xlQXRvbSIsIkRlY2F5TW9kZWwiLCJjb25zdHJ1Y3RvciIsInBhcnRpY2xlQXRvbSIsIkRFQ0FZX01BWF9OVU1CRVJfT0ZfUFJPVE9OUyIsIkRFQ0FZX01BWF9OVU1CRVJfT0ZfTkVVVFJPTlMiLCJoYWxmTGlmZU51bWJlclByb3BlcnR5IiwicHJvdG9uQ291bnRQcm9wZXJ0eSIsIm5ldXRyb25Db3VudFByb3BlcnR5IiwiZG9lc051Y2xpZGVFeGlzdEJvb2xlYW5Qcm9wZXJ0eSIsImlzU3RhYmxlQm9vbGVhblByb3BlcnR5IiwicHJvdG9uQ291bnQiLCJuZXV0cm9uQ291bnQiLCJkb2VzTnVjbGlkZUV4aXN0IiwiaXNTdGFibGUiLCJoYWxmTGlmZSIsIk1hdGgiLCJwb3ciLCJIQUxGX0xJRkVfTlVNQkVSX0xJTkVfRU5EX0VYUE9ORU5UIiwiZ2V0TnVjbGlkZUhhbGZMaWZlIiwidW5kZWZpbmVkIiwiY3JlYXRlRGVjYXlFbmFibGVkTGlzdGVuZXIiLCJkZWNheVR5cGUiLCJkZWNheXMiLCJnZXRBdmFpbGFibGVEZWNheXMiLCJCRVRBX01JTlVTX0RFQ0FZIiwiaW5jbHVkZXMiLCJuYW1lIiwicHJvdG9uRW1pc3Npb25FbmFibGVkUHJvcGVydHkiLCJQUk9UT05fRU1JU1NJT04iLCJuZXV0cm9uRW1pc3Npb25FbmFibGVkUHJvcGVydHkiLCJORVVUUk9OX0VNSVNTSU9OIiwiYmV0YU1pbnVzRGVjYXlFbmFibGVkUHJvcGVydHkiLCJiZXRhUGx1c0RlY2F5RW5hYmxlZFByb3BlcnR5IiwiQkVUQV9QTFVTX0RFQ0FZIiwiYWxwaGFEZWNheUVuYWJsZWRQcm9wZXJ0eSIsIkFMUEhBX0RFQ0FZIiwicmVzZXQiLCJzdGVwIiwiZHQiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkRlY2F5TW9kZWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjItMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogTW9kZWwgY2xhc3MgZm9yIHRoZSAnRGVjYXknIHNjcmVlbi5cclxuICpcclxuICogQGF1dGhvciBMdWlzYSBWYXJnYXNcclxuICovXHJcblxyXG5pbXBvcnQgYnVpbGRBTnVjbGV1cyBmcm9tICcuLi8uLi9idWlsZEFOdWNsZXVzLmpzJztcclxuaW1wb3J0IEJBTk1vZGVsIGZyb20gJy4uLy4uL2NvbW1vbi9tb2RlbC9CQU5Nb2RlbC5qcyc7XHJcbmltcG9ydCBBdG9tSWRlbnRpZmllciBmcm9tICcuLi8uLi8uLi8uLi9zaHJlZC9qcy9BdG9tSWRlbnRpZmllci5qcyc7XHJcbmltcG9ydCBCQU5Db25zdGFudHMgZnJvbSAnLi4vLi4vY29tbW9uL0JBTkNvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBEZXJpdmVkUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9EZXJpdmVkUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgRGVjYXlUeXBlIGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L0RlY2F5VHlwZS5qcyc7XHJcbmltcG9ydCBUUmVhZE9ubHlQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1RSZWFkT25seVByb3BlcnR5LmpzJztcclxuaW1wb3J0IFBhcnRpY2xlQXRvbSBmcm9tICcuLi8uLi8uLi8uLi9zaHJlZC9qcy9tb2RlbC9QYXJ0aWNsZUF0b20uanMnO1xyXG5cclxuY2xhc3MgRGVjYXlNb2RlbCBleHRlbmRzIEJBTk1vZGVsPFBhcnRpY2xlQXRvbT4ge1xyXG5cclxuICAvLyB0aGUgaGFsZi1saWZlIG51bWJlclxyXG4gIHB1YmxpYyBoYWxmTGlmZU51bWJlclByb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxudW1iZXI+O1xyXG5cclxuICAvLyB0aGUgZGVjYXkgZW5hYmxlZCBwcm9wZXJ0aWVzIGZvciBhbGwgZml2ZSBkZWNheXNcclxuICBwdWJsaWMgcHJvdG9uRW1pc3Npb25FbmFibGVkUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PGJvb2xlYW4+O1xyXG4gIHB1YmxpYyBuZXV0cm9uRW1pc3Npb25FbmFibGVkUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PGJvb2xlYW4+O1xyXG4gIHB1YmxpYyBiZXRhTWludXNEZWNheUVuYWJsZWRQcm9wZXJ0eTogVFJlYWRPbmx5UHJvcGVydHk8Ym9vbGVhbj47XHJcbiAgcHVibGljIGJldGFQbHVzRGVjYXlFbmFibGVkUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PGJvb2xlYW4+O1xyXG4gIHB1YmxpYyBhbHBoYURlY2F5RW5hYmxlZFByb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxib29sZWFuPjtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xyXG5cclxuICAgIGNvbnN0IHBhcnRpY2xlQXRvbSA9IG5ldyBQYXJ0aWNsZUF0b20oKTtcclxuXHJcbiAgICAvLyBlbXBpcmljYWxseSBkZXRlcm1pbmVkLCB0aGUgbGFzdCBudWNsaWRlIHRoZSBEZWNheSBzY3JlZW4gZ29lcyB1cCB0byBpcyBVcmFuaXVtLTIzOCAoOTIgcHJvdG9ucyBhbmQgMTQ2IG5ldXRyb25zKVxyXG4gICAgc3VwZXIoIEJBTkNvbnN0YW50cy5ERUNBWV9NQVhfTlVNQkVSX09GX1BST1RPTlMsIEJBTkNvbnN0YW50cy5ERUNBWV9NQVhfTlVNQkVSX09GX05FVVRST05TLCBwYXJ0aWNsZUF0b20gKTtcclxuXHJcbiAgICB0aGlzLmhhbGZMaWZlTnVtYmVyUHJvcGVydHkgPSBuZXcgRGVyaXZlZFByb3BlcnR5KFxyXG4gICAgICBbIHRoaXMucGFydGljbGVBdG9tLnByb3RvbkNvdW50UHJvcGVydHksIHRoaXMucGFydGljbGVBdG9tLm5ldXRyb25Db3VudFByb3BlcnR5LCB0aGlzLmRvZXNOdWNsaWRlRXhpc3RCb29sZWFuUHJvcGVydHksIHRoaXMuaXNTdGFibGVCb29sZWFuUHJvcGVydHkgXSxcclxuICAgICAgKCBwcm90b25Db3VudDogbnVtYmVyLCBuZXV0cm9uQ291bnQ6IG51bWJlciwgZG9lc051Y2xpZGVFeGlzdDogYm9vbGVhbiwgaXNTdGFibGU6IGJvb2xlYW4gKSA9PiB7XHJcblxyXG4gICAgICAgIGxldCBoYWxmTGlmZTtcclxuXHJcbiAgICAgICAgLy8gYSBudWNsaWRlIG9mIDAgcHJvdG9ucyBhbmQgMCBuZXV0cm9ucyBkb2VzIG5vdCBleGlzdFxyXG4gICAgICAgIGlmICggZG9lc051Y2xpZGVFeGlzdCAmJiAhKCBwcm90b25Db3VudCA9PT0gMCAmJiBuZXV0cm9uQ291bnQgPT09IDAgKSApIHtcclxuXHJcbiAgICAgICAgICAvLyB0aGUgbnVjbGlkZSBpcyBzdGFibGUsIHNldCB0aGUgaW5kaWNhdG9yIHRvIHRoZSBtYXhpbXVtIGhhbGYtbGlmZSBudW1iZXIgb24gdGhlIGhhbGYtbGlmZSBudW1iZXIgbGluZVxyXG4gICAgICAgICAgaWYgKCBpc1N0YWJsZSApIHtcclxuICAgICAgICAgICAgaGFsZkxpZmUgPSBNYXRoLnBvdyggMTAsIEJBTkNvbnN0YW50cy5IQUxGX0xJRkVfTlVNQkVSX0xJTkVfRU5EX0VYUE9ORU5UICk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gdGhlIG51Y2xpZGUgaXMgdW5zdGFibGUgYW5kIGl0cyBoYWxmLWxpZmUgZGF0YSBpcyBtaXNzaW5nLCBzZXQgLTEgYXMgdGhlIGhhbGYtbGlmZSBhcyBhIHBsYWNlaG9sZGVyXHJcbiAgICAgICAgICBlbHNlIGlmICggQXRvbUlkZW50aWZpZXIuZ2V0TnVjbGlkZUhhbGZMaWZlKCBwcm90b25Db3VudCwgbmV1dHJvbkNvdW50ICkgPT09IG51bGwgKSB7XHJcbiAgICAgICAgICAgIGhhbGZMaWZlID0gLTE7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gdGhlIG51Y2xpZGUgaXMgdW5zdGFibGUgYW5kIGl0cyBoYWxmLWxpZmUgZGF0YSBpcyBub3QgbWlzc2luZywgdXBkYXRlIGl0cyBoYWxmLWxpZmVcclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBoYWxmTGlmZSA9IEF0b21JZGVudGlmaWVyLmdldE51Y2xpZGVIYWxmTGlmZSggcHJvdG9uQ291bnQsIG5ldXRyb25Db3VudCApITtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHRoZSBudWNsaWRlIGRvZXMgbm90IGV4aXN0XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICBoYWxmTGlmZSA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBUT0RPOiBpcyB0aGlzIGFscmlnaHQgdGhhdCB0aGUgaGFsZkxpZmUgaXMgbm90IGNvcnJlY3QgeWV0P1xyXG4gICAgICAgIC8vIG9uZSBvZiB0aGUgYm9vbGVhbiBwcm9wZXJ0aWVzIChkb2VzTnVjbGlkZUV4aXN0IG9yIGlzU3RhYmxlKSBpcyBub3QgdXBkYXRlZCB5ZXQgYnV0IGl0IHdpbGwgYmUgdXBkYXRlZCBzb29uXHJcbiAgICAgICAgaWYgKCBoYWxmTGlmZSA9PT0gdW5kZWZpbmVkICkge1xyXG4gICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIGhhbGZMaWZlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBmdW5jdGlvbiB3aGljaCB3b3VsZCByZXR1cm4gd2hldGhlciBhIGdpdmVuIG51Y2xpZGUgKGRlZmluZWQgYnkgdGhlIG51bWJlciBvZiBwcm90b25zIGFuZCBuZXV0cm9ucykgaGFzIGEgY2VydGFpblxyXG4gICAgLy8gYXZhaWxhYmxlIGRlY2F5IHR5cGVcclxuICAgIGNvbnN0IGNyZWF0ZURlY2F5RW5hYmxlZExpc3RlbmVyID0gKCBwcm90b25Db3VudDogbnVtYmVyLCBuZXV0cm9uQ291bnQ6IG51bWJlciwgZGVjYXlUeXBlOiBEZWNheVR5cGUgKTogYm9vbGVhbiA9PiB7XHJcbiAgICAgIGNvbnN0IGRlY2F5cyA9IEF0b21JZGVudGlmaWVyLmdldEF2YWlsYWJsZURlY2F5cyggcHJvdG9uQ291bnQsIG5ldXRyb25Db3VudCApO1xyXG5cclxuICAgICAgLy8gdGVtcG9yYXJpbHkgZGlzYWJsZSB0aGUgYmV0YSBtaW51cyBkZWNheSBmb3IgVS0yMzcgc2luY2UgdGhhdCBmcmVlemVzIHRoZSBzaW0uIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvYnVpbGQtYS1udWNsZXVzL2lzc3Vlcy80Mi5cclxuICAgICAgaWYgKCBwcm90b25Db3VudCA9PT0gOTIgJiYgbmV1dHJvbkNvdW50ID09PSAxNDUgJiYgZGVjYXlUeXBlID09PSBEZWNheVR5cGUuQkVUQV9NSU5VU19ERUNBWSApIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBkZWNheXMuaW5jbHVkZXMoIGRlY2F5VHlwZS5uYW1lICk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGNyZWF0ZSB0aGUgZGVjYXkgZW5hYmxlZCBwcm9wZXJ0aWVzXHJcbiAgICB0aGlzLnByb3RvbkVtaXNzaW9uRW5hYmxlZFByb3BlcnR5ID0gbmV3IERlcml2ZWRQcm9wZXJ0eSggWyB0aGlzLnBhcnRpY2xlQXRvbS5wcm90b25Db3VudFByb3BlcnR5LCB0aGlzLnBhcnRpY2xlQXRvbS5uZXV0cm9uQ291bnRQcm9wZXJ0eSBdLFxyXG4gICAgICAoIHByb3RvbkNvdW50OiBudW1iZXIsIG5ldXRyb25Db3VudDogbnVtYmVyICkgPT5cclxuICAgICAgICBjcmVhdGVEZWNheUVuYWJsZWRMaXN0ZW5lciggcHJvdG9uQ291bnQsIG5ldXRyb25Db3VudCwgRGVjYXlUeXBlLlBST1RPTl9FTUlTU0lPTiApXHJcbiAgICApO1xyXG4gICAgdGhpcy5uZXV0cm9uRW1pc3Npb25FbmFibGVkUHJvcGVydHkgPSBuZXcgRGVyaXZlZFByb3BlcnR5KCBbIHRoaXMucGFydGljbGVBdG9tLnByb3RvbkNvdW50UHJvcGVydHksIHRoaXMucGFydGljbGVBdG9tLm5ldXRyb25Db3VudFByb3BlcnR5IF0sXHJcbiAgICAgICggcHJvdG9uQ291bnQ6IG51bWJlciwgbmV1dHJvbkNvdW50OiBudW1iZXIgKSA9PlxyXG4gICAgICAgIGNyZWF0ZURlY2F5RW5hYmxlZExpc3RlbmVyKCBwcm90b25Db3VudCwgbmV1dHJvbkNvdW50LCBEZWNheVR5cGUuTkVVVFJPTl9FTUlTU0lPTiApXHJcbiAgICApO1xyXG4gICAgdGhpcy5iZXRhTWludXNEZWNheUVuYWJsZWRQcm9wZXJ0eSA9IG5ldyBEZXJpdmVkUHJvcGVydHkoIFsgdGhpcy5wYXJ0aWNsZUF0b20ucHJvdG9uQ291bnRQcm9wZXJ0eSwgdGhpcy5wYXJ0aWNsZUF0b20ubmV1dHJvbkNvdW50UHJvcGVydHkgXSxcclxuICAgICAgKCBwcm90b25Db3VudDogbnVtYmVyLCBuZXV0cm9uQ291bnQ6IG51bWJlciApID0+XHJcbiAgICAgICAgY3JlYXRlRGVjYXlFbmFibGVkTGlzdGVuZXIoIHByb3RvbkNvdW50LCBuZXV0cm9uQ291bnQsIERlY2F5VHlwZS5CRVRBX01JTlVTX0RFQ0FZIClcclxuICAgICk7XHJcbiAgICB0aGlzLmJldGFQbHVzRGVjYXlFbmFibGVkUHJvcGVydHkgPSBuZXcgRGVyaXZlZFByb3BlcnR5KCBbIHRoaXMucGFydGljbGVBdG9tLnByb3RvbkNvdW50UHJvcGVydHksIHRoaXMucGFydGljbGVBdG9tLm5ldXRyb25Db3VudFByb3BlcnR5IF0sXHJcbiAgICAgICggcHJvdG9uQ291bnQ6IG51bWJlciwgbmV1dHJvbkNvdW50OiBudW1iZXIgKSA9PlxyXG4gICAgICAgIGNyZWF0ZURlY2F5RW5hYmxlZExpc3RlbmVyKCBwcm90b25Db3VudCwgbmV1dHJvbkNvdW50LCBEZWNheVR5cGUuQkVUQV9QTFVTX0RFQ0FZIClcclxuICAgICk7XHJcbiAgICB0aGlzLmFscGhhRGVjYXlFbmFibGVkUHJvcGVydHkgPSBuZXcgRGVyaXZlZFByb3BlcnR5KCBbIHRoaXMucGFydGljbGVBdG9tLnByb3RvbkNvdW50UHJvcGVydHksIHRoaXMucGFydGljbGVBdG9tLm5ldXRyb25Db3VudFByb3BlcnR5IF0sXHJcbiAgICAgICggcHJvdG9uQ291bnQ6IG51bWJlciwgbmV1dHJvbkNvdW50OiBudW1iZXIgKSA9PlxyXG4gICAgICAgIGNyZWF0ZURlY2F5RW5hYmxlZExpc3RlbmVyKCBwcm90b25Db3VudCwgbmV1dHJvbkNvdW50LCBEZWNheVR5cGUuQUxQSEFfREVDQVkgKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNldCgpOiB2b2lkIHtcclxuICAgIHN1cGVyLnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0gZHQgLSB0aW1lIHN0ZXAsIGluIHNlY29uZHNcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgc3RlcCggZHQ6IG51bWJlciApOiB2b2lkIHtcclxuICAgIHN1cGVyLnN0ZXAoIGR0ICk7XHJcbiAgfVxyXG59XHJcblxyXG5idWlsZEFOdWNsZXVzLnJlZ2lzdGVyKCAnRGVjYXlNb2RlbCcsIERlY2F5TW9kZWwgKTtcclxuZXhwb3J0IGRlZmF1bHQgRGVjYXlNb2RlbDsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsYUFBYSxNQUFNLHdCQUF3QjtBQUNsRCxPQUFPQyxRQUFRLE1BQU0sZ0NBQWdDO0FBQ3JELE9BQU9DLGNBQWMsTUFBTSx3Q0FBd0M7QUFDbkUsT0FBT0MsWUFBWSxNQUFNLDhCQUE4QjtBQUN2RCxPQUFPQyxlQUFlLE1BQU0sd0NBQXdDO0FBQ3BFLE9BQU9DLFNBQVMsTUFBTSxnQ0FBZ0M7QUFFdEQsT0FBT0MsWUFBWSxNQUFNLDRDQUE0QztBQUVyRSxNQUFNQyxVQUFVLFNBQVNOLFFBQVEsQ0FBZTtFQUU5Qzs7RUFHQTs7RUFPT08sV0FBV0EsQ0FBQSxFQUFHO0lBRW5CLE1BQU1DLFlBQVksR0FBRyxJQUFJSCxZQUFZLENBQUMsQ0FBQzs7SUFFdkM7SUFDQSxLQUFLLENBQUVILFlBQVksQ0FBQ08sMkJBQTJCLEVBQUVQLFlBQVksQ0FBQ1EsNEJBQTRCLEVBQUVGLFlBQWEsQ0FBQztJQUUxRyxJQUFJLENBQUNHLHNCQUFzQixHQUFHLElBQUlSLGVBQWUsQ0FDL0MsQ0FBRSxJQUFJLENBQUNLLFlBQVksQ0FBQ0ksbUJBQW1CLEVBQUUsSUFBSSxDQUFDSixZQUFZLENBQUNLLG9CQUFvQixFQUFFLElBQUksQ0FBQ0MsK0JBQStCLEVBQUUsSUFBSSxDQUFDQyx1QkFBdUIsQ0FBRSxFQUNySixDQUFFQyxXQUFtQixFQUFFQyxZQUFvQixFQUFFQyxnQkFBeUIsRUFBRUMsUUFBaUIsS0FBTTtNQUU3RixJQUFJQyxRQUFROztNQUVaO01BQ0EsSUFBS0YsZ0JBQWdCLElBQUksRUFBR0YsV0FBVyxLQUFLLENBQUMsSUFBSUMsWUFBWSxLQUFLLENBQUMsQ0FBRSxFQUFHO1FBRXRFO1FBQ0EsSUFBS0UsUUFBUSxFQUFHO1VBQ2RDLFFBQVEsR0FBR0MsSUFBSSxDQUFDQyxHQUFHLENBQUUsRUFBRSxFQUFFcEIsWUFBWSxDQUFDcUIsa0NBQW1DLENBQUM7UUFDNUU7O1FBRUE7UUFBQSxLQUNLLElBQUt0QixjQUFjLENBQUN1QixrQkFBa0IsQ0FBRVIsV0FBVyxFQUFFQyxZQUFhLENBQUMsS0FBSyxJQUFJLEVBQUc7VUFDbEZHLFFBQVEsR0FBRyxDQUFDLENBQUM7UUFDZjs7UUFFQTtRQUFBLEtBQ0s7VUFDSEEsUUFBUSxHQUFHbkIsY0FBYyxDQUFDdUIsa0JBQWtCLENBQUVSLFdBQVcsRUFBRUMsWUFBYSxDQUFFO1FBQzVFO01BQ0Y7O01BRUE7TUFBQSxLQUNLO1FBQ0hHLFFBQVEsR0FBRyxDQUFDO01BQ2Q7O01BRUE7TUFDQTtNQUNBLElBQUtBLFFBQVEsS0FBS0ssU0FBUyxFQUFHO1FBQzVCLE9BQU8sQ0FBQztNQUNWLENBQUMsTUFDSTtRQUNILE9BQU9MLFFBQVE7TUFDakI7SUFDRixDQUNGLENBQUM7O0lBRUQ7SUFDQTtJQUNBLE1BQU1NLDBCQUEwQixHQUFHQSxDQUFFVixXQUFtQixFQUFFQyxZQUFvQixFQUFFVSxTQUFvQixLQUFlO01BQ2pILE1BQU1DLE1BQU0sR0FBRzNCLGNBQWMsQ0FBQzRCLGtCQUFrQixDQUFFYixXQUFXLEVBQUVDLFlBQWEsQ0FBQzs7TUFFN0U7TUFDQSxJQUFLRCxXQUFXLEtBQUssRUFBRSxJQUFJQyxZQUFZLEtBQUssR0FBRyxJQUFJVSxTQUFTLEtBQUt2QixTQUFTLENBQUMwQixnQkFBZ0IsRUFBRztRQUM1RixPQUFPLEtBQUs7TUFDZDtNQUVBLE9BQU9GLE1BQU0sQ0FBQ0csUUFBUSxDQUFFSixTQUFTLENBQUNLLElBQUssQ0FBQztJQUMxQyxDQUFDOztJQUVEO0lBQ0EsSUFBSSxDQUFDQyw2QkFBNkIsR0FBRyxJQUFJOUIsZUFBZSxDQUFFLENBQUUsSUFBSSxDQUFDSyxZQUFZLENBQUNJLG1CQUFtQixFQUFFLElBQUksQ0FBQ0osWUFBWSxDQUFDSyxvQkFBb0IsQ0FBRSxFQUN6SSxDQUFFRyxXQUFtQixFQUFFQyxZQUFvQixLQUN6Q1MsMEJBQTBCLENBQUVWLFdBQVcsRUFBRUMsWUFBWSxFQUFFYixTQUFTLENBQUM4QixlQUFnQixDQUNyRixDQUFDO0lBQ0QsSUFBSSxDQUFDQyw4QkFBOEIsR0FBRyxJQUFJaEMsZUFBZSxDQUFFLENBQUUsSUFBSSxDQUFDSyxZQUFZLENBQUNJLG1CQUFtQixFQUFFLElBQUksQ0FBQ0osWUFBWSxDQUFDSyxvQkFBb0IsQ0FBRSxFQUMxSSxDQUFFRyxXQUFtQixFQUFFQyxZQUFvQixLQUN6Q1MsMEJBQTBCLENBQUVWLFdBQVcsRUFBRUMsWUFBWSxFQUFFYixTQUFTLENBQUNnQyxnQkFBaUIsQ0FDdEYsQ0FBQztJQUNELElBQUksQ0FBQ0MsNkJBQTZCLEdBQUcsSUFBSWxDLGVBQWUsQ0FBRSxDQUFFLElBQUksQ0FBQ0ssWUFBWSxDQUFDSSxtQkFBbUIsRUFBRSxJQUFJLENBQUNKLFlBQVksQ0FBQ0ssb0JBQW9CLENBQUUsRUFDekksQ0FBRUcsV0FBbUIsRUFBRUMsWUFBb0IsS0FDekNTLDBCQUEwQixDQUFFVixXQUFXLEVBQUVDLFlBQVksRUFBRWIsU0FBUyxDQUFDMEIsZ0JBQWlCLENBQ3RGLENBQUM7SUFDRCxJQUFJLENBQUNRLDRCQUE0QixHQUFHLElBQUluQyxlQUFlLENBQUUsQ0FBRSxJQUFJLENBQUNLLFlBQVksQ0FBQ0ksbUJBQW1CLEVBQUUsSUFBSSxDQUFDSixZQUFZLENBQUNLLG9CQUFvQixDQUFFLEVBQ3hJLENBQUVHLFdBQW1CLEVBQUVDLFlBQW9CLEtBQ3pDUywwQkFBMEIsQ0FBRVYsV0FBVyxFQUFFQyxZQUFZLEVBQUViLFNBQVMsQ0FBQ21DLGVBQWdCLENBQ3JGLENBQUM7SUFDRCxJQUFJLENBQUNDLHlCQUF5QixHQUFHLElBQUlyQyxlQUFlLENBQUUsQ0FBRSxJQUFJLENBQUNLLFlBQVksQ0FBQ0ksbUJBQW1CLEVBQUUsSUFBSSxDQUFDSixZQUFZLENBQUNLLG9CQUFvQixDQUFFLEVBQ3JJLENBQUVHLFdBQW1CLEVBQUVDLFlBQW9CLEtBQ3pDUywwQkFBMEIsQ0FBRVYsV0FBVyxFQUFFQyxZQUFZLEVBQUViLFNBQVMsQ0FBQ3FDLFdBQVksQ0FDakYsQ0FBQztFQUNIO0VBRWdCQyxLQUFLQSxDQUFBLEVBQVM7SUFDNUIsS0FBSyxDQUFDQSxLQUFLLENBQUMsQ0FBQztFQUNmOztFQUVBO0FBQ0Y7QUFDQTtFQUNrQkMsSUFBSUEsQ0FBRUMsRUFBVSxFQUFTO0lBQ3ZDLEtBQUssQ0FBQ0QsSUFBSSxDQUFFQyxFQUFHLENBQUM7RUFDbEI7QUFDRjtBQUVBN0MsYUFBYSxDQUFDOEMsUUFBUSxDQUFFLFlBQVksRUFBRXZDLFVBQVcsQ0FBQztBQUNsRCxlQUFlQSxVQUFVIn0=