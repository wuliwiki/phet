// Copyright 2023, University of Colorado Boulder
/**
 * PeriodTimer for the Kepler's Third Law screen.
 *
 * @author AgustÃ­n Vallejo
 */

import keplersLaws from '../../keplersLaws.js';
import { AlignBox, DragListener, Image, KeyboardDragListener, Node, Path, Rectangle, Text, VBox } from '../../../../scenery/js/imports.js';
import { Shape } from '../../../../kite/js/imports.js';
import UTurnArrowShape from '../../../../scenery-phet/js/UTurnArrowShape.js';
import BooleanRectangularToggleButton from '../../../../sun/js/buttons/BooleanRectangularToggleButton.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import SolarSystemCommonConstants from '../../../../solar-system-common/js/SolarSystemCommonConstants.js';
import StringUtils from '../../../../phetcommon/js/util/StringUtils.js';
import Utils from '../../../../dot/js/Utils.js';
import KeplersLawsStrings from '../../KeplersLawsStrings.js';
import Property from '../../../../axon/js/Property.js';
import periodTimerBackground_png from '../../../images/periodTimerBackground_png.js';
import optionize from '../../../../phet-core/js/optionize.js';
import SolarSystemCommonStrings from '../../../../solar-system-common/js/SolarSystemCommonStrings.js';
import KeplersLawsConstants from '../../KeplersLawsConstants.js';
import Multilink from '../../../../axon/js/Multilink.js';
import soundManager from '../../../../tambo/js/soundManager.js';
import SoundClip from '../../../../tambo/js/sound-generators/SoundClip.js';
import Grab_Sound_mp3 from '../../../../solar-system-common/sounds/Grab_Sound_mp3.js';
import Release_Sound_mp3 from '../../../../solar-system-common/sounds/Release_Sound_mp3.js';
const secondsPatternString = SolarSystemCommonStrings.pattern.labelUnits;
export default class PeriodTimerNode extends Node {
  constructor(periodTimer, modelViewTransformProperty, layoutBounds, providedOptions) {
    const options = optionize()({
      iconColor: '#333',
      buttonBaseColor: '#DFE0E1',
      cursor: 'pointer',
      dragBoundsProperty: new Property(layoutBounds),
      numberDisplayOptions: {
        useRichText: true,
        textOptions: {
          font: SolarSystemCommonConstants.TITLE_FONT
        },
        align: 'right',
        cornerRadius: 4,
        xMargin: 4,
        yMargin: 2,
        pickable: false // allow dragging by the number display
      },

      soundViewNode: null
    }, providedOptions);
    super(options);

    // creates Uturn arrow on the period timer tool
    const uArrowShape = new UTurnArrowShape(10);

    // creates triangle shape on play button by creating three lines at x,y coordinates.
    const playPauseSize = uArrowShape.bounds.height;
    const halfPlayStroke = 0.05 * playPauseSize;
    const playOffset = 0.15 * playPauseSize;
    const playShape = new Shape().moveTo(playPauseSize - halfPlayStroke * 0.5 - playOffset, 0).lineTo(halfPlayStroke * 1.5 + playOffset, playPauseSize / 2 - halfPlayStroke - playOffset).lineTo(halfPlayStroke * 1.5 + playOffset, -playPauseSize / 2 + halfPlayStroke + playOffset).close().getOffsetShape(-playOffset);

    // creates playPauseButton
    const playPauseButton = new BooleanRectangularToggleButton(periodTimer.isRunningProperty, new Path(uArrowShape, {
      fill: options.iconColor,
      center: Vector2.ZERO,
      pickable: false
    }), new Path(playShape, {
      pickable: false,
      stroke: options.iconColor,
      fill: '#eef',
      lineWidth: halfPlayStroke * 2,
      center: Vector2.ZERO
    }), {
      baseColor: options.buttonBaseColor,
      minWidth: 40
    });
    playPauseButton.touchArea = playPauseButton.localBounds.dilated(5);

    // Creates time text inside period timer tool.
    const readoutText = new Text('', KeplersLawsConstants.TIMER_READOUT_OPTIONS);
    // present for the lifetime of the sim
    periodTimer.timeProperty.link(value => {
      readoutText.string = StringUtils.fillIn(secondsPatternString, {
        value: Utils.toFixed(value, 2),
        units: SolarSystemCommonStrings.units.yearsStringProperty
      });
    });

    // Creates white background behind the time readout text in period timer tool.
    const textBackground = Rectangle.roundedBounds(readoutText.bounds.dilatedXY(20, 2), 5, 5, {
      fill: '#fff',
      stroke: 'rgba(0,0,0,0.5)'
    });

    // Creates the title, time readout, and period timer pendulum selector as one box in period timer tool.
    const vBox = new VBox({
      spacing: 5,
      align: 'center',
      children: [new Text(KeplersLawsStrings.periodStringProperty, {
        font: SolarSystemCommonConstants.TITLE_FONT,
        pickable: false,
        maxWidth: playPauseButton.width
      }), new Node({
        children: [textBackground, readoutText],
        pickable: false,
        maxWidth: playPauseButton.width * 2.5
      }), playPauseButton]
    });

    // background image
    const background = new Image(periodTimerBackground_png, {
      scale: 0.6,
      center: vBox.center
    });
    this.addChild(background);

    // adds period timer contents on top of yellow background.
    this.addChild(new AlignBox(vBox, {
      alignBounds: background.bounds
    }));
    this.grabClip = new SoundClip(Grab_Sound_mp3);
    this.releaseClip = new SoundClip(Release_Sound_mp3);
    if (options.soundViewNode) {
      soundManager.addSoundGenerator(this.grabClip, {
        associatedViewNode: options.soundViewNode
      });
      soundManager.addSoundGenerator(this.releaseClip, {
        associatedViewNode: options.soundViewNode
      });
    }
    const positionMultilink = Multilink.multilink([periodTimer.positionProperty, modelViewTransformProperty], (position, modelViewTransform) => {
      this.translation = modelViewTransform.modelToViewPosition(position);
    });
    const start = () => {
      this.grabClip.play();
    };
    const end = () => {
      this.releaseClip.play();
    };
    const bodyDragListener = new DragListener({
      positionProperty: periodTimer.positionProperty,
      transform: modelViewTransformProperty,
      start: start,
      end: end
    });
    this.addInputListener(bodyDragListener);
    const keyboardDragListener = new KeyboardDragListener({
      positionProperty: periodTimer.positionProperty,
      transform: modelViewTransformProperty,
      dragVelocity: 450,
      shiftDragVelocity: 100,
      start: start,
      end: end
    });
    this.addInputListener(keyboardDragListener);
    this.disposeEmitter.addListener(() => {
      bodyDragListener.dispose();
      keyboardDragListener.dispose();
    });
    this.disposeThis = () => {
      positionMultilink.dispose();
    };
  }
  dispose() {
    this.disposeThis();
    super.dispose();
  }
}
keplersLaws.register('PeriodTimerNode', PeriodTimerNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJrZXBsZXJzTGF3cyIsIkFsaWduQm94IiwiRHJhZ0xpc3RlbmVyIiwiSW1hZ2UiLCJLZXlib2FyZERyYWdMaXN0ZW5lciIsIk5vZGUiLCJQYXRoIiwiUmVjdGFuZ2xlIiwiVGV4dCIsIlZCb3giLCJTaGFwZSIsIlVUdXJuQXJyb3dTaGFwZSIsIkJvb2xlYW5SZWN0YW5ndWxhclRvZ2dsZUJ1dHRvbiIsIlZlY3RvcjIiLCJTb2xhclN5c3RlbUNvbW1vbkNvbnN0YW50cyIsIlN0cmluZ1V0aWxzIiwiVXRpbHMiLCJLZXBsZXJzTGF3c1N0cmluZ3MiLCJQcm9wZXJ0eSIsInBlcmlvZFRpbWVyQmFja2dyb3VuZF9wbmciLCJvcHRpb25pemUiLCJTb2xhclN5c3RlbUNvbW1vblN0cmluZ3MiLCJLZXBsZXJzTGF3c0NvbnN0YW50cyIsIk11bHRpbGluayIsInNvdW5kTWFuYWdlciIsIlNvdW5kQ2xpcCIsIkdyYWJfU291bmRfbXAzIiwiUmVsZWFzZV9Tb3VuZF9tcDMiLCJzZWNvbmRzUGF0dGVyblN0cmluZyIsInBhdHRlcm4iLCJsYWJlbFVuaXRzIiwiUGVyaW9kVGltZXJOb2RlIiwiY29uc3RydWN0b3IiLCJwZXJpb2RUaW1lciIsIm1vZGVsVmlld1RyYW5zZm9ybVByb3BlcnR5IiwibGF5b3V0Qm91bmRzIiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsImljb25Db2xvciIsImJ1dHRvbkJhc2VDb2xvciIsImN1cnNvciIsImRyYWdCb3VuZHNQcm9wZXJ0eSIsIm51bWJlckRpc3BsYXlPcHRpb25zIiwidXNlUmljaFRleHQiLCJ0ZXh0T3B0aW9ucyIsImZvbnQiLCJUSVRMRV9GT05UIiwiYWxpZ24iLCJjb3JuZXJSYWRpdXMiLCJ4TWFyZ2luIiwieU1hcmdpbiIsInBpY2thYmxlIiwic291bmRWaWV3Tm9kZSIsInVBcnJvd1NoYXBlIiwicGxheVBhdXNlU2l6ZSIsImJvdW5kcyIsImhlaWdodCIsImhhbGZQbGF5U3Ryb2tlIiwicGxheU9mZnNldCIsInBsYXlTaGFwZSIsIm1vdmVUbyIsImxpbmVUbyIsImNsb3NlIiwiZ2V0T2Zmc2V0U2hhcGUiLCJwbGF5UGF1c2VCdXR0b24iLCJpc1J1bm5pbmdQcm9wZXJ0eSIsImZpbGwiLCJjZW50ZXIiLCJaRVJPIiwic3Ryb2tlIiwibGluZVdpZHRoIiwiYmFzZUNvbG9yIiwibWluV2lkdGgiLCJ0b3VjaEFyZWEiLCJsb2NhbEJvdW5kcyIsImRpbGF0ZWQiLCJyZWFkb3V0VGV4dCIsIlRJTUVSX1JFQURPVVRfT1BUSU9OUyIsInRpbWVQcm9wZXJ0eSIsImxpbmsiLCJ2YWx1ZSIsInN0cmluZyIsImZpbGxJbiIsInRvRml4ZWQiLCJ1bml0cyIsInllYXJzU3RyaW5nUHJvcGVydHkiLCJ0ZXh0QmFja2dyb3VuZCIsInJvdW5kZWRCb3VuZHMiLCJkaWxhdGVkWFkiLCJ2Qm94Iiwic3BhY2luZyIsImNoaWxkcmVuIiwicGVyaW9kU3RyaW5nUHJvcGVydHkiLCJtYXhXaWR0aCIsIndpZHRoIiwiYmFja2dyb3VuZCIsInNjYWxlIiwiYWRkQ2hpbGQiLCJhbGlnbkJvdW5kcyIsImdyYWJDbGlwIiwicmVsZWFzZUNsaXAiLCJhZGRTb3VuZEdlbmVyYXRvciIsImFzc29jaWF0ZWRWaWV3Tm9kZSIsInBvc2l0aW9uTXVsdGlsaW5rIiwibXVsdGlsaW5rIiwicG9zaXRpb25Qcm9wZXJ0eSIsInBvc2l0aW9uIiwibW9kZWxWaWV3VHJhbnNmb3JtIiwidHJhbnNsYXRpb24iLCJtb2RlbFRvVmlld1Bvc2l0aW9uIiwic3RhcnQiLCJwbGF5IiwiZW5kIiwiYm9keURyYWdMaXN0ZW5lciIsInRyYW5zZm9ybSIsImFkZElucHV0TGlzdGVuZXIiLCJrZXlib2FyZERyYWdMaXN0ZW5lciIsImRyYWdWZWxvY2l0eSIsInNoaWZ0RHJhZ1ZlbG9jaXR5IiwiZGlzcG9zZUVtaXR0ZXIiLCJhZGRMaXN0ZW5lciIsImRpc3Bvc2UiLCJkaXNwb3NlVGhpcyIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiUGVyaW9kVGltZXJOb2RlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuLyoqXHJcbiAqIFBlcmlvZFRpbWVyIGZvciB0aGUgS2VwbGVyJ3MgVGhpcmQgTGF3IHNjcmVlbi5cclxuICpcclxuICogQGF1dGhvciBBZ3VzdMOtbiBWYWxsZWpvXHJcbiAqL1xyXG5cclxuaW1wb3J0IGtlcGxlcnNMYXdzIGZyb20gJy4uLy4uL2tlcGxlcnNMYXdzLmpzJztcclxuaW1wb3J0IHsgQWxpZ25Cb3gsIERyYWdMaXN0ZW5lciwgSW1hZ2UsIEtleWJvYXJkRHJhZ0xpc3RlbmVyLCBOb2RlLCBOb2RlT3B0aW9ucywgUGF0aCwgUmVjdGFuZ2xlLCBUZXh0LCBWQm94IH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IHsgU2hhcGUgfSBmcm9tICcuLi8uLi8uLi8uLi9raXRlL2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgVVR1cm5BcnJvd1NoYXBlIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9VVHVybkFycm93U2hhcGUuanMnO1xyXG5pbXBvcnQgQm9vbGVhblJlY3Rhbmd1bGFyVG9nZ2xlQnV0dG9uIGZyb20gJy4uLy4uLy4uLy4uL3N1bi9qcy9idXR0b25zL0Jvb2xlYW5SZWN0YW5ndWxhclRvZ2dsZUJ1dHRvbi5qcyc7XHJcbmltcG9ydCBWZWN0b3IyIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9WZWN0b3IyLmpzJztcclxuaW1wb3J0IFNvbGFyU3lzdGVtQ29tbW9uQ29uc3RhbnRzIGZyb20gJy4uLy4uLy4uLy4uL3NvbGFyLXN5c3RlbS1jb21tb24vanMvU29sYXJTeXN0ZW1Db21tb25Db25zdGFudHMuanMnO1xyXG5pbXBvcnQgU3RyaW5nVXRpbHMgZnJvbSAnLi4vLi4vLi4vLi4vcGhldGNvbW1vbi9qcy91dGlsL1N0cmluZ1V0aWxzLmpzJztcclxuaW1wb3J0IFV0aWxzIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9VdGlscy5qcyc7XHJcbmltcG9ydCBLZXBsZXJzTGF3c1N0cmluZ3MgZnJvbSAnLi4vLi4vS2VwbGVyc0xhd3NTdHJpbmdzLmpzJztcclxuaW1wb3J0IFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgcGVyaW9kVGltZXJCYWNrZ3JvdW5kX3BuZyBmcm9tICcuLi8uLi8uLi9pbWFnZXMvcGVyaW9kVGltZXJCYWNrZ3JvdW5kX3BuZy5qcyc7XHJcbmltcG9ydCBTdG9wd2F0Y2ggZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1N0b3B3YXRjaC5qcyc7XHJcbmltcG9ydCBCb3VuZHMyIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9Cb3VuZHMyLmpzJztcclxuaW1wb3J0IG9wdGlvbml6ZSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuaW1wb3J0IHsgTnVtYmVyRGlzcGxheU9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvTnVtYmVyRGlzcGxheS5qcyc7XHJcbmltcG9ydCBTb2xhclN5c3RlbUNvbW1vblN0cmluZ3MgZnJvbSAnLi4vLi4vLi4vLi4vc29sYXItc3lzdGVtLWNvbW1vbi9qcy9Tb2xhclN5c3RlbUNvbW1vblN0cmluZ3MuanMnO1xyXG5pbXBvcnQgS2VwbGVyc0xhd3NDb25zdGFudHMgZnJvbSAnLi4vLi4vS2VwbGVyc0xhd3NDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgTW9kZWxWaWV3VHJhbnNmb3JtMiBmcm9tICcuLi8uLi8uLi8uLi9waGV0Y29tbW9uL2pzL3ZpZXcvTW9kZWxWaWV3VHJhbnNmb3JtMi5qcyc7XHJcbmltcG9ydCBUUmVhZE9ubHlQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1RSZWFkT25seVByb3BlcnR5LmpzJztcclxuaW1wb3J0IE11bHRpbGluayBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL011bHRpbGluay5qcyc7XHJcbmltcG9ydCBzb3VuZE1hbmFnZXIgZnJvbSAnLi4vLi4vLi4vLi4vdGFtYm8vanMvc291bmRNYW5hZ2VyLmpzJztcclxuaW1wb3J0IFNvdW5kQ2xpcCBmcm9tICcuLi8uLi8uLi8uLi90YW1iby9qcy9zb3VuZC1nZW5lcmF0b3JzL1NvdW5kQ2xpcC5qcyc7XHJcbmltcG9ydCBHcmFiX1NvdW5kX21wMyBmcm9tICcuLi8uLi8uLi8uLi9zb2xhci1zeXN0ZW0tY29tbW9uL3NvdW5kcy9HcmFiX1NvdW5kX21wMy5qcyc7XHJcbmltcG9ydCBSZWxlYXNlX1NvdW5kX21wMyBmcm9tICcuLi8uLi8uLi8uLi9zb2xhci1zeXN0ZW0tY29tbW9uL3NvdW5kcy9SZWxlYXNlX1NvdW5kX21wMy5qcyc7XHJcblxyXG5jb25zdCBzZWNvbmRzUGF0dGVyblN0cmluZyA9IFNvbGFyU3lzdGVtQ29tbW9uU3RyaW5ncy5wYXR0ZXJuLmxhYmVsVW5pdHM7XHJcblxyXG50eXBlIFNlbGZPcHRpb25zID0ge1xyXG4gIGljb25Db2xvcj86IHN0cmluZztcclxuICBidXR0b25CYXNlQ29sb3I/OiBzdHJpbmc7XHJcbiAgZHJhZ0JvdW5kc1Byb3BlcnR5PzogUHJvcGVydHk8Qm91bmRzMj47XHJcblxyXG4gIG51bWJlckRpc3BsYXlPcHRpb25zPzogTnVtYmVyRGlzcGxheU9wdGlvbnM7XHJcblxyXG4gIC8vIElmIGEgc291bmRWaWV3Tm9kZSBpcyBwcm92aWRlZCwgd2UnbGwgaG9vayB1cCBhIHNvdW5kQ2xpcCB0byBpdCBhbmQgcGxheSBzb3VuZHMgd2hlbiBpdCBpcyB2aXNpYmxlXHJcbiAgc291bmRWaWV3Tm9kZT86IE5vZGUgfCBudWxsO1xyXG59O1xyXG5cclxudHlwZSBQZXJpb2RUaW1lck5vZGVPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBOb2RlT3B0aW9ucztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBlcmlvZFRpbWVyTm9kZSBleHRlbmRzIE5vZGUge1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgZGlzcG9zZVRoaXM6ICgpID0+IHZvaWQ7XHJcbiAgcHVibGljIHJlYWRvbmx5IGdyYWJDbGlwOiBTb3VuZENsaXA7XHJcbiAgcHVibGljIHJlYWRvbmx5IHJlbGVhc2VDbGlwOiBTb3VuZENsaXA7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihcclxuICAgIHBlcmlvZFRpbWVyOiBTdG9wd2F0Y2gsXHJcbiAgICBtb2RlbFZpZXdUcmFuc2Zvcm1Qcm9wZXJ0eTogVFJlYWRPbmx5UHJvcGVydHk8TW9kZWxWaWV3VHJhbnNmb3JtMj4sXHJcbiAgICBsYXlvdXRCb3VuZHM6IEJvdW5kczIsXHJcbiAgICBwcm92aWRlZE9wdGlvbnM6IFBlcmlvZFRpbWVyTm9kZU9wdGlvbnNcclxuICApIHtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPFBlcmlvZFRpbWVyTm9kZU9wdGlvbnMsIFNlbGZPcHRpb25zLCBOb2RlT3B0aW9ucz4oKSgge1xyXG4gICAgICBpY29uQ29sb3I6ICcjMzMzJyxcclxuICAgICAgYnV0dG9uQmFzZUNvbG9yOiAnI0RGRTBFMScsXHJcbiAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxyXG5cclxuICAgICAgZHJhZ0JvdW5kc1Byb3BlcnR5OiBuZXcgUHJvcGVydHkoIGxheW91dEJvdW5kcyApLFxyXG5cclxuICAgICAgbnVtYmVyRGlzcGxheU9wdGlvbnM6IHtcclxuICAgICAgICB1c2VSaWNoVGV4dDogdHJ1ZSxcclxuICAgICAgICB0ZXh0T3B0aW9uczoge1xyXG4gICAgICAgICAgZm9udDogU29sYXJTeXN0ZW1Db21tb25Db25zdGFudHMuVElUTEVfRk9OVFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWxpZ246ICdyaWdodCcsXHJcbiAgICAgICAgY29ybmVyUmFkaXVzOiA0LFxyXG4gICAgICAgIHhNYXJnaW46IDQsXHJcbiAgICAgICAgeU1hcmdpbjogMixcclxuICAgICAgICBwaWNrYWJsZTogZmFsc2UgLy8gYWxsb3cgZHJhZ2dpbmcgYnkgdGhlIG51bWJlciBkaXNwbGF5XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBzb3VuZFZpZXdOb2RlOiBudWxsXHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICBzdXBlciggb3B0aW9ucyApO1xyXG5cclxuICAgIC8vIGNyZWF0ZXMgVXR1cm4gYXJyb3cgb24gdGhlIHBlcmlvZCB0aW1lciB0b29sXHJcbiAgICBjb25zdCB1QXJyb3dTaGFwZSA9IG5ldyBVVHVybkFycm93U2hhcGUoIDEwICk7XHJcblxyXG4gICAgLy8gY3JlYXRlcyB0cmlhbmdsZSBzaGFwZSBvbiBwbGF5IGJ1dHRvbiBieSBjcmVhdGluZyB0aHJlZSBsaW5lcyBhdCB4LHkgY29vcmRpbmF0ZXMuXHJcbiAgICBjb25zdCBwbGF5UGF1c2VTaXplID0gdUFycm93U2hhcGUuYm91bmRzLmhlaWdodDtcclxuICAgIGNvbnN0IGhhbGZQbGF5U3Ryb2tlID0gMC4wNSAqIHBsYXlQYXVzZVNpemU7XHJcbiAgICBjb25zdCBwbGF5T2Zmc2V0ID0gMC4xNSAqIHBsYXlQYXVzZVNpemU7XHJcbiAgICBjb25zdCBwbGF5U2hhcGUgPSBuZXcgU2hhcGUoKS5tb3ZlVG8oIHBsYXlQYXVzZVNpemUgLSBoYWxmUGxheVN0cm9rZSAqIDAuNSAtIHBsYXlPZmZzZXQsIDAgKVxyXG4gICAgICAubGluZVRvKCBoYWxmUGxheVN0cm9rZSAqIDEuNSArIHBsYXlPZmZzZXQsIHBsYXlQYXVzZVNpemUgLyAyIC0gaGFsZlBsYXlTdHJva2UgLSBwbGF5T2Zmc2V0IClcclxuICAgICAgLmxpbmVUbyggaGFsZlBsYXlTdHJva2UgKiAxLjUgKyBwbGF5T2Zmc2V0LCAtcGxheVBhdXNlU2l6ZSAvIDIgKyBoYWxmUGxheVN0cm9rZSArIHBsYXlPZmZzZXQgKVxyXG4gICAgICAuY2xvc2UoKVxyXG4gICAgICAuZ2V0T2Zmc2V0U2hhcGUoIC1wbGF5T2Zmc2V0ICk7XHJcblxyXG4gICAgLy8gY3JlYXRlcyBwbGF5UGF1c2VCdXR0b25cclxuICAgIGNvbnN0IHBsYXlQYXVzZUJ1dHRvbiA9IG5ldyBCb29sZWFuUmVjdGFuZ3VsYXJUb2dnbGVCdXR0b24oIHBlcmlvZFRpbWVyLmlzUnVubmluZ1Byb3BlcnR5LCBuZXcgUGF0aCggdUFycm93U2hhcGUsIHtcclxuICAgICAgZmlsbDogb3B0aW9ucy5pY29uQ29sb3IsXHJcbiAgICAgIGNlbnRlcjogVmVjdG9yMi5aRVJPLFxyXG4gICAgICBwaWNrYWJsZTogZmFsc2VcclxuICAgIH0gKSwgbmV3IFBhdGgoIHBsYXlTaGFwZSwge1xyXG4gICAgICBwaWNrYWJsZTogZmFsc2UsXHJcbiAgICAgIHN0cm9rZTogb3B0aW9ucy5pY29uQ29sb3IsXHJcbiAgICAgIGZpbGw6ICcjZWVmJyxcclxuICAgICAgbGluZVdpZHRoOiBoYWxmUGxheVN0cm9rZSAqIDIsXHJcbiAgICAgIGNlbnRlcjogVmVjdG9yMi5aRVJPXHJcbiAgICB9ICksIHtcclxuICAgICAgYmFzZUNvbG9yOiBvcHRpb25zLmJ1dHRvbkJhc2VDb2xvcixcclxuICAgICAgbWluV2lkdGg6IDQwXHJcbiAgICB9ICk7XHJcbiAgICBwbGF5UGF1c2VCdXR0b24udG91Y2hBcmVhID0gcGxheVBhdXNlQnV0dG9uLmxvY2FsQm91bmRzLmRpbGF0ZWQoIDUgKTtcclxuXHJcblxyXG4gICAgLy8gQ3JlYXRlcyB0aW1lIHRleHQgaW5zaWRlIHBlcmlvZCB0aW1lciB0b29sLlxyXG4gICAgY29uc3QgcmVhZG91dFRleHQgPSBuZXcgVGV4dCggJycsIEtlcGxlcnNMYXdzQ29uc3RhbnRzLlRJTUVSX1JFQURPVVRfT1BUSU9OUyApO1xyXG4gICAgLy8gcHJlc2VudCBmb3IgdGhlIGxpZmV0aW1lIG9mIHRoZSBzaW1cclxuICAgIHBlcmlvZFRpbWVyLnRpbWVQcm9wZXJ0eS5saW5rKCB2YWx1ZSA9PiB7XHJcbiAgICAgIHJlYWRvdXRUZXh0LnN0cmluZyA9IFN0cmluZ1V0aWxzLmZpbGxJbiggc2Vjb25kc1BhdHRlcm5TdHJpbmcsIHtcclxuICAgICAgICB2YWx1ZTogVXRpbHMudG9GaXhlZCggdmFsdWUsIDIgKSxcclxuICAgICAgICB1bml0czogU29sYXJTeXN0ZW1Db21tb25TdHJpbmdzLnVuaXRzLnllYXJzU3RyaW5nUHJvcGVydHlcclxuICAgICAgfSApO1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIENyZWF0ZXMgd2hpdGUgYmFja2dyb3VuZCBiZWhpbmQgdGhlIHRpbWUgcmVhZG91dCB0ZXh0IGluIHBlcmlvZCB0aW1lciB0b29sLlxyXG4gICAgY29uc3QgdGV4dEJhY2tncm91bmQgPSBSZWN0YW5nbGUucm91bmRlZEJvdW5kcyggcmVhZG91dFRleHQuYm91bmRzLmRpbGF0ZWRYWSggMjAsIDIgKSwgNSwgNSwge1xyXG4gICAgICBmaWxsOiAnI2ZmZicsXHJcbiAgICAgIHN0cm9rZTogJ3JnYmEoMCwwLDAsMC41KSdcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBDcmVhdGVzIHRoZSB0aXRsZSwgdGltZSByZWFkb3V0LCBhbmQgcGVyaW9kIHRpbWVyIHBlbmR1bHVtIHNlbGVjdG9yIGFzIG9uZSBib3ggaW4gcGVyaW9kIHRpbWVyIHRvb2wuXHJcbiAgICBjb25zdCB2Qm94ID0gbmV3IFZCb3goIHtcclxuICAgICAgc3BhY2luZzogNSxcclxuICAgICAgYWxpZ246ICdjZW50ZXInLFxyXG4gICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgIG5ldyBUZXh0KCBLZXBsZXJzTGF3c1N0cmluZ3MucGVyaW9kU3RyaW5nUHJvcGVydHksIHtcclxuICAgICAgICAgIGZvbnQ6IFNvbGFyU3lzdGVtQ29tbW9uQ29uc3RhbnRzLlRJVExFX0ZPTlQsXHJcbiAgICAgICAgICBwaWNrYWJsZTogZmFsc2UsXHJcbiAgICAgICAgICBtYXhXaWR0aDogcGxheVBhdXNlQnV0dG9uLndpZHRoXHJcbiAgICAgICAgfSApLFxyXG4gICAgICAgIG5ldyBOb2RlKCB7XHJcbiAgICAgICAgICBjaGlsZHJlbjogWyB0ZXh0QmFja2dyb3VuZCwgcmVhZG91dFRleHQgXSxcclxuICAgICAgICAgIHBpY2thYmxlOiBmYWxzZSxcclxuICAgICAgICAgIG1heFdpZHRoOiBwbGF5UGF1c2VCdXR0b24ud2lkdGggKiAyLjVcclxuICAgICAgICB9ICksXHJcbiAgICAgICAgcGxheVBhdXNlQnV0dG9uXHJcbiAgICAgIF1cclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBiYWNrZ3JvdW5kIGltYWdlXHJcbiAgICBjb25zdCBiYWNrZ3JvdW5kID0gbmV3IEltYWdlKCBwZXJpb2RUaW1lckJhY2tncm91bmRfcG5nLCB7XHJcbiAgICAgIHNjYWxlOiAwLjYsXHJcbiAgICAgIGNlbnRlcjogdkJveC5jZW50ZXJcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIGJhY2tncm91bmQgKTtcclxuXHJcbiAgICAvLyBhZGRzIHBlcmlvZCB0aW1lciBjb250ZW50cyBvbiB0b3Agb2YgeWVsbG93IGJhY2tncm91bmQuXHJcbiAgICB0aGlzLmFkZENoaWxkKCBuZXcgQWxpZ25Cb3goIHZCb3gsIHtcclxuICAgICAgYWxpZ25Cb3VuZHM6IGJhY2tncm91bmQuYm91bmRzXHJcbiAgICB9ICkgKTtcclxuXHJcblxyXG4gICAgdGhpcy5ncmFiQ2xpcCA9IG5ldyBTb3VuZENsaXAoIEdyYWJfU291bmRfbXAzICk7XHJcbiAgICB0aGlzLnJlbGVhc2VDbGlwID0gbmV3IFNvdW5kQ2xpcCggUmVsZWFzZV9Tb3VuZF9tcDMgKTtcclxuXHJcbiAgICBpZiAoIG9wdGlvbnMuc291bmRWaWV3Tm9kZSApIHtcclxuICAgICAgc291bmRNYW5hZ2VyLmFkZFNvdW5kR2VuZXJhdG9yKCB0aGlzLmdyYWJDbGlwLCB7XHJcbiAgICAgICAgYXNzb2NpYXRlZFZpZXdOb2RlOiBvcHRpb25zLnNvdW5kVmlld05vZGVcclxuICAgICAgfSApO1xyXG4gICAgICBzb3VuZE1hbmFnZXIuYWRkU291bmRHZW5lcmF0b3IoIHRoaXMucmVsZWFzZUNsaXAsIHtcclxuICAgICAgICBhc3NvY2lhdGVkVmlld05vZGU6IG9wdGlvbnMuc291bmRWaWV3Tm9kZVxyXG4gICAgICB9ICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcG9zaXRpb25NdWx0aWxpbmsgPSBNdWx0aWxpbmsubXVsdGlsaW5rKFxyXG4gICAgICBbIHBlcmlvZFRpbWVyLnBvc2l0aW9uUHJvcGVydHksIG1vZGVsVmlld1RyYW5zZm9ybVByb3BlcnR5IF0sXHJcbiAgICAgICggcG9zaXRpb24sIG1vZGVsVmlld1RyYW5zZm9ybSApID0+IHtcclxuICAgICAgICB0aGlzLnRyYW5zbGF0aW9uID0gbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3UG9zaXRpb24oIHBvc2l0aW9uICk7XHJcbiAgICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCBzdGFydCA9ICgpID0+IHtcclxuICAgICAgdGhpcy5ncmFiQ2xpcC5wbGF5KCk7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgZW5kID0gKCkgPT4ge1xyXG4gICAgICB0aGlzLnJlbGVhc2VDbGlwLnBsYXkoKTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgYm9keURyYWdMaXN0ZW5lciA9IG5ldyBEcmFnTGlzdGVuZXIoIHtcclxuICAgICAgcG9zaXRpb25Qcm9wZXJ0eTogcGVyaW9kVGltZXIucG9zaXRpb25Qcm9wZXJ0eSxcclxuICAgICAgdHJhbnNmb3JtOiBtb2RlbFZpZXdUcmFuc2Zvcm1Qcm9wZXJ0eSxcclxuICAgICAgc3RhcnQ6IHN0YXJ0LFxyXG4gICAgICBlbmQ6IGVuZFxyXG4gICAgfSApO1xyXG4gICAgdGhpcy5hZGRJbnB1dExpc3RlbmVyKCBib2R5RHJhZ0xpc3RlbmVyICk7XHJcblxyXG4gICAgY29uc3Qga2V5Ym9hcmREcmFnTGlzdGVuZXIgPSBuZXcgS2V5Ym9hcmREcmFnTGlzdGVuZXIoXHJcbiAgICAgIHtcclxuICAgICAgICBwb3NpdGlvblByb3BlcnR5OiBwZXJpb2RUaW1lci5wb3NpdGlvblByb3BlcnR5LFxyXG4gICAgICAgIHRyYW5zZm9ybTogbW9kZWxWaWV3VHJhbnNmb3JtUHJvcGVydHksXHJcbiAgICAgICAgZHJhZ1ZlbG9jaXR5OiA0NTAsXHJcbiAgICAgICAgc2hpZnREcmFnVmVsb2NpdHk6IDEwMCxcclxuICAgICAgICBzdGFydDogc3RhcnQsXHJcbiAgICAgICAgZW5kOiBlbmRcclxuICAgICAgfSApO1xyXG4gICAgdGhpcy5hZGRJbnB1dExpc3RlbmVyKCBrZXlib2FyZERyYWdMaXN0ZW5lciApO1xyXG4gICAgdGhpcy5kaXNwb3NlRW1pdHRlci5hZGRMaXN0ZW5lciggKCkgPT4ge1xyXG4gICAgICBib2R5RHJhZ0xpc3RlbmVyLmRpc3Bvc2UoKTtcclxuICAgICAga2V5Ym9hcmREcmFnTGlzdGVuZXIuZGlzcG9zZSgpO1xyXG4gICAgfSApO1xyXG5cclxuICAgIHRoaXMuZGlzcG9zZVRoaXMgPSAoKSA9PiB7XHJcbiAgICAgIHBvc2l0aW9uTXVsdGlsaW5rLmRpc3Bvc2UoKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb3ZlcnJpZGUgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgIHRoaXMuZGlzcG9zZVRoaXMoKTtcclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcbn1cclxuXHJcbmtlcGxlcnNMYXdzLnJlZ2lzdGVyKCAnUGVyaW9kVGltZXJOb2RlJywgUGVyaW9kVGltZXJOb2RlICk7Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsV0FBVyxNQUFNLHNCQUFzQjtBQUM5QyxTQUFTQyxRQUFRLEVBQUVDLFlBQVksRUFBRUMsS0FBSyxFQUFFQyxvQkFBb0IsRUFBRUMsSUFBSSxFQUFlQyxJQUFJLEVBQUVDLFNBQVMsRUFBRUMsSUFBSSxFQUFFQyxJQUFJLFFBQVEsbUNBQW1DO0FBQ3ZKLFNBQVNDLEtBQUssUUFBUSxnQ0FBZ0M7QUFDdEQsT0FBT0MsZUFBZSxNQUFNLGdEQUFnRDtBQUM1RSxPQUFPQyw4QkFBOEIsTUFBTSw4REFBOEQ7QUFDekcsT0FBT0MsT0FBTyxNQUFNLCtCQUErQjtBQUNuRCxP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