// Copyright 2023, University of Colorado Boulder

/**
 * Screen view for Kepler's Laws screen
 *
 * @author AgustÃ­n Vallejo
 */

import { AlignBox, HBox, VBox } from '../../../../scenery/js/imports.js';
import KeplersLawsControls from './KeplersLawsControls.js';
import SecondLawPanels from './SecondLawPanels.js';
import BodyNode from '../../../../solar-system-common/js/view/BodyNode.js';
import EllipticalOrbitNode from './EllipticalOrbitNode.js';
import ThirdLawPanels from './ThirdLawPanels.js';
import optionize from '../../../../phet-core/js/optionize.js';
import SolarSystemCommonScreenView from '../../../../solar-system-common/js/view/SolarSystemCommonScreenView.js';
import LawsButtons from './LawsButtons.js';
import SolarSystemCommonConstants from '../../../../solar-system-common/js/SolarSystemCommonConstants.js';
import FirstLawPanels from './FirstLawPanels.js';
import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import VectorNode from '../../../../solar-system-common/js/view/VectorNode.js';
import PhetColorScheme from '../../../../scenery-phet/js/PhetColorScheme.js';
import OrbitalWarningMessage from './OrbitalWarningMessage.js';
import DistancesDisplayNode from './DistancesDisplayNode.js';
import keplersLaws from '../../keplersLaws.js';
import NumberProperty from '../../../../axon/js/NumberProperty.js';
import PeriodTimerNode from './PeriodTimerNode.js';

// constants
const MARGIN = 10;
class KeplersLawsScreenView extends SolarSystemCommonScreenView {
  constructor(model, providedOptions) {
    const options = optionize()({
      playingAllowedProperty: model.engine.allowedOrbitProperty,
      allowLawSelection: false
    }, providedOptions);
    super(model, options);
    model.engine.orbitalAreas.forEach((area, index) => {
      area.insideProperty.link(inside => {
        if (inside && model.isPlayingProperty.value && model.isSecondLawProperty.value) {
          const soundIndex = model.engine.retrograde ? model.periodDivisionProperty.value - index - 1 : index;
          this.bodySoundManager.playOrbitalMetronome(soundIndex, model.engine.a, model.periodDivisionProperty.value);
        }
      });
    });
    const modelDragBoundsProperty = new DerivedProperty([this.visibleBoundsProperty, this.modelViewTransformProperty], (visibleBounds, modelViewTransform) => {
      const viewBounds = modelViewTransform.viewToModelBounds(visibleBounds);
      return viewBounds;
    });
    const sun = model.bodies[0];
    const body = model.bodies[1];
    const sunNode = new BodyNode(model.bodies[0], this.modelViewTransformProperty, {
      draggable: false
    });
    const bodyNode = new BodyNode(body, this.modelViewTransformProperty, {
      useCueingArrows: true,
      showVelocityIndex: false,
      soundViewNode: this,
      valuesVisibleProperty: model.valuesVisibleProperty,
      mapPosition: (point, radius) => {
        point = modelDragBoundsProperty.value.eroded(radius).closestPointTo(point);
        const escapeRadius = model.engine.escapeRadiusProperty.value;
        if (point.magnitude > escapeRadius) {
          point = point.normalized().times(escapeRadius);
        }
        return point;
      }
    });
    this.bodiesLayer.addChild(sunNode);
    this.bodiesLayer.addChild(bodyNode);

    // Draggable velocity vector
    this.componentsLayer.addChild(this.createDraggableVectorNode(body, {
      minimumMagnitude: 30,
      snapToZero: false,
      maxMagnitudeProperty: model.engine.escapeSpeedProperty,
      enabledProperty: DerivedProperty.not(model.alwaysCircularProperty)
    }));

    // Gravity force vectors
    this.componentsLayer.addChild(new VectorNode(body, this.modelViewTransformProperty, model.gravityVisibleProperty, body.forceProperty, new NumberProperty(-0.5), {
      fill: PhetColorScheme.GRAVITATIONAL_FORCE
    }));
    this.componentsLayer.addChild(new VectorNode(sun, this.modelViewTransformProperty, model.gravityVisibleProperty, sun.forceProperty, new NumberProperty(-0.5), {
      fill: PhetColorScheme.GRAVITATIONAL_FORCE
    }));
    const ellipticalOrbitNode = new EllipticalOrbitNode(model, this.modelViewTransformProperty);
    this.bottomLayer.addChild(ellipticalOrbitNode);
    this.bodiesLayer.addChild(ellipticalOrbitNode.topLayer);

    // UI ----------------------------------------------------------------------------------
    // Second and Third Law Accordion Boxes and Zoom Buttons

    this.topLayer.addChild(new OrbitalWarningMessage(model, this.modelViewTransformProperty));
    const lawsAndZoomBoxes = new AlignBox(new HBox({
      children: [new FirstLawPanels(model), new SecondLawPanels(model), new ThirdLawPanels(model)],
      spacing: 10,
      align: 'top'
    }), {
      alignBoundsProperty: this.availableBoundsProperty,
      margin: MARGIN,
      xAlign: 'left',
      yAlign: 'top'
    });

    // Add the control panel on top of the canvases
    // Visibility checkboxes for sim elements
    const controlPanelAlignBox = new AlignBox(new VBox({
      spacing: 10,
      align: 'left',
      children: [this.timeBox, new KeplersLawsControls(model, options.tandem.createTandem('controlPanel'))]
    }), {
      alignBoundsProperty: this.availableBoundsProperty,
      margin: MARGIN,
      xAlign: 'right',
      yAlign: 'top'
    });
    this.periodTimerNode = new PeriodTimerNode(model.stopwatch, this.modelViewTransformProperty, this.layoutBounds, {
      dragBoundsProperty: this.visibleBoundsProperty,
      visibleProperty: model.periodVisibleProperty,
      soundViewNode: this
    });
    this.topLayer.addChild(this.periodTimerNode);
    const distancesDisplayBox = new AlignBox(new DistancesDisplayNode(model, this.modelViewTransformProperty), {
      alignBoundsProperty: this.availableBoundsProperty,
      margin: SolarSystemCommonConstants.MARGIN,
      xAlign: 'center',
      yAlign: 'top'
    });
    const resetBox = new AlignBox(this.resetAllButton, {
      alignBoundsProperty: this.availableBoundsProperty,
      margin: SolarSystemCommonConstants.MARGIN,
      xAlign: 'right',
      yAlign: 'bottom'
    });

    // Slider that controls the bodies mass
    this.interfaceLayer.addChild(lawsAndZoomBoxes);
    this.interfaceLayer.addChild(controlPanelAlignBox);
    if (options.allowLawSelection) {
      this.interfaceLayer.addChild(new AlignBox(new HBox({
        children: [new LawsButtons(model)],
        spacing: 20
      }), {
        alignBoundsProperty: this.availableBoundsProperty,
        margin: MARGIN,
        xAlign: 'left',
        yAlign: 'bottom'
      }));
    }
    this.interfaceLayer.addChild(resetBox);
    this.bottomLayer.addChild(distancesDisplayBox);
  }
}
keplersLaws.register('KeplersLawsScreenView', KeplersLawsScreenView);
export default KeplersLawsScreenView;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBbGlnbkJveCIsIkhCb3giLCJWQm94IiwiS2VwbGVyc0xhd3NDb250cm9scyIsIlNlY29uZExhd1BhbmVscyIsIkJvZHlOb2RlIiwiRWxsaXB0aWNhbE9yYml0Tm9kZSIsIlRoaXJkTGF3UGFuZWxzIiwib3B0aW9uaXplIiwiU29sYXJTeXN0ZW1Db21tb25TY3JlZW5WaWV3IiwiTGF3c0J1dHRvbnMiLCJTb2xhclN5c3RlbUNvbW1vbkNvbnN0YW50cyIsIkZpcnN0TGF3UGFuZWxzIiwiRGVyaXZlZFByb3BlcnR5IiwiVmVjdG9yTm9kZSIsIlBoZXRDb2xvclNjaGVtZSIsIk9yYml0YWxXYXJuaW5nTWVzc2FnZSIsIkRpc3RhbmNlc0Rpc3BsYXlOb2RlIiwia2VwbGVyc0xhd3MiLCJOdW1iZXJQcm9wZXJ0eSIsIlBlcmlvZFRpbWVyTm9kZSIsIk1BUkdJTiIsIktlcGxlcnNMYXdzU2NyZWVuVmlldyIsImNvbnN0cnVjdG9yIiwibW9kZWwiLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwicGxheWluZ0FsbG93ZWRQcm9wZXJ0eSIsImVuZ2luZSIsImFsbG93ZWRPcmJpdFByb3BlcnR5IiwiYWxsb3dMYXdTZWxlY3Rpb24iLCJvcmJpdGFsQXJlYXMiLCJmb3JFYWNoIiwiYXJlYSIsImluZGV4IiwiaW5zaWRlUHJvcGVydHkiLCJsaW5rIiwiaW5zaWRlIiwiaXNQbGF5aW5nUHJvcGVydHkiLCJ2YWx1ZSIsImlzU2Vjb25kTGF3UHJvcGVydHkiLCJzb3VuZEluZGV4IiwicmV0cm9ncmFkZSIsInBlcmlvZERpdmlzaW9uUHJvcGVydHkiLCJib2R5U291bmRNYW5hZ2VyIiwicGxheU9yYml0YWxNZXRyb25vbWUiLCJhIiwibW9kZWxEcmFnQm91bmRzUHJvcGVydHkiLCJ2aXNpYmxlQm91bmRzUHJvcGVydHkiLCJtb2RlbFZpZXdUcmFuc2Zvcm1Qcm9wZXJ0eSIsInZpc2libGVCb3VuZHMiLCJtb2RlbFZpZXdUcmFuc2Zvcm0iLCJ2aWV3Qm91bmRzIiwidmlld1RvTW9kZWxCb3VuZHMiLCJzdW4iLCJib2RpZXMiLCJib2R5Iiwic3VuTm9kZSIsImRyYWdnYWJsZSIsImJvZHlOb2RlIiwidXNlQ3VlaW5nQXJyb3dzIiwic2hvd1ZlbG9jaXR5SW5kZXgiLCJzb3VuZFZpZXdOb2RlIiwidmFsdWVzVmlzaWJsZVByb3BlcnR5IiwibWFwUG9zaXRpb24iLCJwb2ludCIsInJhZGl1cyIsImVyb2RlZCIsImNsb3Nlc3RQb2ludFRvIiwiZXNjYXBlUmFkaXVzIiwiZXNjYXBlUmFkaXVzUHJvcGVydHkiLCJtYWduaXR1ZGUiLCJub3JtYWxpemVkIiwidGltZXMiLCJib2RpZXNMYXllciIsImFkZENoaWxkIiwiY29tcG9uZW50c0xheWVyIiwiY3JlYXRlRHJhZ2dhYmxlVmVjdG9yTm9kZSIsIm1pbmltdW1NYWduaXR1ZGUiLCJzbmFwVG9aZXJvIiwibWF4TWFnbml0dWRlUHJvcGVydHkiLCJlc2NhcGVTcGVlZFByb3BlcnR5IiwiZW5hYmxlZFByb3BlcnR5Iiwibm90IiwiYWx3YXlzQ2lyY3VsYXJQcm9wZXJ0eSIsImdyYXZpdHlWaXNpYmxlUHJvcGVydHkiLCJmb3JjZVByb3BlcnR5IiwiZmlsbCIsIkdSQVZJVEFUSU9OQUxfRk9SQ0UiLCJlbGxpcHRpY2FsT3JiaXROb2RlIiwiYm90dG9tTGF5ZXIiLCJ0b3BMYXllciIsImxhd3NBbmRab29tQm94ZXMiLCJjaGlsZHJlbiIsInNwYWNpbmciLCJhbGlnbiIsImFsaWduQm91bmRzUHJvcGVydHkiLCJhdmFpbGFibGVCb3VuZHNQcm9wZXJ0eSIsIm1hcmdpbiIsInhBbGlnbiIsInlBbGlnbiIsImNvbnRyb2xQYW5lbEFsaWduQm94IiwidGltZUJveCIsInRhbmRlbSIsImNyZWF0ZVRhbmRlbSIsInBlcmlvZFRpbWVyTm9kZSIsInN0b3B3YXRjaCIsImxheW91dEJvdW5kcyIsImRyYWdCb3VuZHNQcm9wZXJ0eSIsInZpc2libGVQcm9wZXJ0eSIsInBlcmlvZFZpc2libGVQcm9wZXJ0eSIsImRpc3RhbmNlc0Rpc3BsYXlCb3giLCJyZXNldEJveCIsInJlc2V0QWxsQnV0dG9uIiwiaW50ZXJmYWNlTGF5ZXIiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIktlcGxlcnNMYXdzU2NyZWVuVmlldy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogU2NyZWVuIHZpZXcgZm9yIEtlcGxlcidzIExhd3Mgc2NyZWVuXHJcbiAqXHJcbiAqIEBhdXRob3IgQWd1c3TDrW4gVmFsbGVqb1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFsaWduQm94LCBIQm94LCBWQm94IH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IEtlcGxlcnNMYXdzTW9kZWwgZnJvbSAnLi4vbW9kZWwvS2VwbGVyc0xhd3NNb2RlbC5qcyc7XHJcbmltcG9ydCBLZXBsZXJzTGF3c0NvbnRyb2xzIGZyb20gJy4vS2VwbGVyc0xhd3NDb250cm9scy5qcyc7XHJcbmltcG9ydCBTZWNvbmRMYXdQYW5lbHMgZnJvbSAnLi9TZWNvbmRMYXdQYW5lbHMuanMnO1xyXG5pbXBvcnQgQm9keU5vZGUgZnJvbSAnLi4vLi4vLi4vLi4vc29sYXItc3lzdGVtLWNvbW1vbi9qcy92aWV3L0JvZHlOb2RlLmpzJztcclxuaW1wb3J0IEVsbGlwdGljYWxPcmJpdE5vZGUgZnJvbSAnLi9FbGxpcHRpY2FsT3JiaXROb2RlLmpzJztcclxuaW1wb3J0IFRoaXJkTGF3UGFuZWxzIGZyb20gJy4vVGhpcmRMYXdQYW5lbHMuanMnO1xyXG5pbXBvcnQgb3B0aW9uaXplIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgU29sYXJTeXN0ZW1Db21tb25TY3JlZW5WaWV3LCB7IFNvbGFyU3lzdGVtQ29tbW9uU2NyZWVuVmlld09wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9zb2xhci1zeXN0ZW0tY29tbW9uL2pzL3ZpZXcvU29sYXJTeXN0ZW1Db21tb25TY3JlZW5WaWV3LmpzJztcclxuaW1wb3J0IExhd3NCdXR0b25zIGZyb20gJy4vTGF3c0J1dHRvbnMuanMnO1xyXG5pbXBvcnQgU29sYXJTeXN0ZW1Db21tb25Db25zdGFudHMgZnJvbSAnLi4vLi4vLi4vLi4vc29sYXItc3lzdGVtLWNvbW1vbi9qcy9Tb2xhclN5c3RlbUNvbW1vbkNvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBGaXJzdExhd1BhbmVscyBmcm9tICcuL0ZpcnN0TGF3UGFuZWxzLmpzJztcclxuaW1wb3J0IERlcml2ZWRQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL0Rlcml2ZWRQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBWZWN0b3JOb2RlIGZyb20gJy4uLy4uLy4uLy4uL3NvbGFyLXN5c3RlbS1jb21tb24vanMvdmlldy9WZWN0b3JOb2RlLmpzJztcclxuaW1wb3J0IFBoZXRDb2xvclNjaGVtZSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvUGhldENvbG9yU2NoZW1lLmpzJztcclxuaW1wb3J0IE9yYml0YWxXYXJuaW5nTWVzc2FnZSBmcm9tICcuL09yYml0YWxXYXJuaW5nTWVzc2FnZS5qcyc7XHJcbmltcG9ydCBEaXN0YW5jZXNEaXNwbGF5Tm9kZSBmcm9tICcuL0Rpc3RhbmNlc0Rpc3BsYXlOb2RlLmpzJztcclxuaW1wb3J0IGtlcGxlcnNMYXdzIGZyb20gJy4uLy4uL2tlcGxlcnNMYXdzLmpzJztcclxuaW1wb3J0IE51bWJlclByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvTnVtYmVyUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgUGVyaW9kVGltZXJOb2RlIGZyb20gJy4vUGVyaW9kVGltZXJOb2RlLmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBNQVJHSU4gPSAxMDtcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSB7XHJcbiAgYWxsb3dMYXdTZWxlY3Rpb24/OiBib29sZWFuO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgS2VwbGVyc0xhd3NTY3JlZW5WaWV3T3B0aW9ucyA9IFNlbGZPcHRpb25zICYgU29sYXJTeXN0ZW1Db21tb25TY3JlZW5WaWV3T3B0aW9ucztcclxuXHJcbmNsYXNzIEtlcGxlcnNMYXdzU2NyZWVuVmlldyBleHRlbmRzIFNvbGFyU3lzdGVtQ29tbW9uU2NyZWVuVmlldyB7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBwZXJpb2RUaW1lck5vZGU6IFBlcmlvZFRpbWVyTm9kZTtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBtb2RlbDogS2VwbGVyc0xhd3NNb2RlbCwgcHJvdmlkZWRPcHRpb25zPzogS2VwbGVyc0xhd3NTY3JlZW5WaWV3T3B0aW9ucyApIHtcclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8S2VwbGVyc0xhd3NTY3JlZW5WaWV3T3B0aW9ucywgU2VsZk9wdGlvbnMsIFNvbGFyU3lzdGVtQ29tbW9uU2NyZWVuVmlld09wdGlvbnM+KCkoIHtcclxuICAgICAgcGxheWluZ0FsbG93ZWRQcm9wZXJ0eTogbW9kZWwuZW5naW5lLmFsbG93ZWRPcmJpdFByb3BlcnR5LFxyXG4gICAgICBhbGxvd0xhd1NlbGVjdGlvbjogZmFsc2VcclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIHN1cGVyKCBtb2RlbCwgb3B0aW9ucyApO1xyXG5cclxuICAgIG1vZGVsLmVuZ2luZS5vcmJpdGFsQXJlYXMuZm9yRWFjaCggKCBhcmVhLCBpbmRleCApID0+IHtcclxuICAgICAgYXJlYS5pbnNpZGVQcm9wZXJ0eS5saW5rKCBpbnNpZGUgPT4ge1xyXG4gICAgICAgIGlmICggaW5zaWRlICYmIG1vZGVsLmlzUGxheWluZ1Byb3BlcnR5LnZhbHVlICYmIG1vZGVsLmlzU2Vjb25kTGF3UHJvcGVydHkudmFsdWUgKSB7XHJcbiAgICAgICAgICBjb25zdCBzb3VuZEluZGV4ID0gbW9kZWwuZW5naW5lLnJldHJvZ3JhZGUgPyBtb2RlbC5wZXJpb2REaXZpc2lvblByb3BlcnR5LnZhbHVlIC0gaW5kZXggLSAxIDogaW5kZXg7XHJcbiAgICAgICAgICB0aGlzLmJvZHlTb3VuZE1hbmFnZXIucGxheU9yYml0YWxNZXRyb25vbWUoIHNvdW5kSW5kZXgsIG1vZGVsLmVuZ2luZS5hLCBtb2RlbC5wZXJpb2REaXZpc2lvblByb3BlcnR5LnZhbHVlICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9ICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgbW9kZWxEcmFnQm91bmRzUHJvcGVydHkgPSBuZXcgRGVyaXZlZFByb3BlcnR5KCBbXHJcbiAgICAgIHRoaXMudmlzaWJsZUJvdW5kc1Byb3BlcnR5LFxyXG4gICAgICB0aGlzLm1vZGVsVmlld1RyYW5zZm9ybVByb3BlcnR5XHJcbiAgICBdLCAoIHZpc2libGVCb3VuZHMsIG1vZGVsVmlld1RyYW5zZm9ybSApID0+IHtcclxuICAgICAgY29uc3Qgdmlld0JvdW5kcyA9IG1vZGVsVmlld1RyYW5zZm9ybS52aWV3VG9Nb2RlbEJvdW5kcyggdmlzaWJsZUJvdW5kcyApO1xyXG5cclxuICAgICAgcmV0dXJuIHZpZXdCb3VuZHM7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3Qgc3VuID0gbW9kZWwuYm9kaWVzWyAwIF07XHJcbiAgICBjb25zdCBib2R5ID0gbW9kZWwuYm9kaWVzWyAxIF07XHJcbiAgICBjb25zdCBzdW5Ob2RlID0gbmV3IEJvZHlOb2RlKCBtb2RlbC5ib2RpZXNbIDAgXSwgdGhpcy5tb2RlbFZpZXdUcmFuc2Zvcm1Qcm9wZXJ0eSwge1xyXG4gICAgICBkcmFnZ2FibGU6IGZhbHNlXHJcbiAgICB9ICk7XHJcbiAgICBjb25zdCBib2R5Tm9kZSA9IG5ldyBCb2R5Tm9kZSggYm9keSwgdGhpcy5tb2RlbFZpZXdUcmFuc2Zvcm1Qcm9wZXJ0eSwge1xyXG4gICAgICB1c2VDdWVpbmdBcnJvd3M6IHRydWUsXHJcbiAgICAgIHNob3dWZWxvY2l0eUluZGV4OiBmYWxzZSxcclxuICAgICAgc291bmRWaWV3Tm9kZTogdGhpcyxcclxuICAgICAgdmFsdWVzVmlzaWJsZVByb3BlcnR5OiBtb2RlbC52YWx1ZXNWaXNpYmxlUHJvcGVydHksXHJcbiAgICAgIG1hcFBvc2l0aW9uOiAoIHBvaW50LCByYWRpdXMgKSA9PiB7XHJcbiAgICAgICAgcG9pbnQgPSBtb2RlbERyYWdCb3VuZHNQcm9wZXJ0eS52YWx1ZS5lcm9kZWQoIHJhZGl1cyApLmNsb3Nlc3RQb2ludFRvKCBwb2ludCApO1xyXG5cclxuICAgICAgICBjb25zdCBlc2NhcGVSYWRpdXMgPSBtb2RlbC5lbmdpbmUuZXNjYXBlUmFkaXVzUHJvcGVydHkudmFsdWU7XHJcblxyXG4gICAgICAgIGlmICggcG9pbnQubWFnbml0dWRlID4gZXNjYXBlUmFkaXVzICkge1xyXG4gICAgICAgICAgcG9pbnQgPSBwb2ludC5ub3JtYWxpemVkKCkudGltZXMoIGVzY2FwZVJhZGl1cyApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHBvaW50O1xyXG4gICAgICB9XHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmJvZGllc0xheWVyLmFkZENoaWxkKCBzdW5Ob2RlICk7XHJcbiAgICB0aGlzLmJvZGllc0xheWVyLmFkZENoaWxkKCBib2R5Tm9kZSApO1xyXG5cclxuICAgIC8vIERyYWdnYWJsZSB2ZWxvY2l0eSB2ZWN0b3JcclxuICAgIHRoaXMuY29tcG9uZW50c0xheWVyLmFkZENoaWxkKCB0aGlzLmNyZWF0ZURyYWdnYWJsZVZlY3Rvck5vZGUoIGJvZHksIHtcclxuICAgICAgbWluaW11bU1hZ25pdHVkZTogMzAsXHJcbiAgICAgIHNuYXBUb1plcm86IGZhbHNlLFxyXG4gICAgICBtYXhNYWduaXR1ZGVQcm9wZXJ0eTogbW9kZWwuZW5naW5lLmVzY2FwZVNwZWVkUHJvcGVydHksXHJcbiAgICAgIGVuYWJsZWRQcm9wZXJ0eTogRGVyaXZlZFByb3BlcnR5Lm5vdCggbW9kZWwuYWx3YXlzQ2lyY3VsYXJQcm9wZXJ0eSApXHJcbiAgICB9ICkgKTtcclxuXHJcbiAgICAvLyBHcmF2aXR5IGZvcmNlIHZlY3RvcnNcclxuICAgIHRoaXMuY29tcG9uZW50c0xheWVyLmFkZENoaWxkKCBuZXcgVmVjdG9yTm9kZShcclxuICAgICAgYm9keSwgdGhpcy5tb2RlbFZpZXdUcmFuc2Zvcm1Qcm9wZXJ0eSwgbW9kZWwuZ3Jhdml0eVZpc2libGVQcm9wZXJ0eSwgYm9keS5mb3JjZVByb3BlcnR5LFxyXG4gICAgICBuZXcgTnVtYmVyUHJvcGVydHkoIC0wLjUgKSwgeyBmaWxsOiBQaGV0Q29sb3JTY2hlbWUuR1JBVklUQVRJT05BTF9GT1JDRSB9XHJcbiAgICApICk7XHJcblxyXG4gICAgdGhpcy5jb21wb25lbnRzTGF5ZXIuYWRkQ2hpbGQoIG5ldyBWZWN0b3JOb2RlKFxyXG4gICAgICBzdW4sIHRoaXMubW9kZWxWaWV3VHJhbnNmb3JtUHJvcGVydHksIG1vZGVsLmdyYXZpdHlWaXNpYmxlUHJvcGVydHksIHN1bi5mb3JjZVByb3BlcnR5LFxyXG4gICAgICBuZXcgTnVtYmVyUHJvcGVydHkoIC0wLjUgKSwgeyBmaWxsOiBQaGV0Q29sb3JTY2hlbWUuR1JBVklUQVRJT05BTF9GT1JDRSB9XHJcbiAgICApICk7XHJcblxyXG4gICAgY29uc3QgZWxsaXB0aWNhbE9yYml0Tm9kZSA9IG5ldyBFbGxpcHRpY2FsT3JiaXROb2RlKCBtb2RlbCwgdGhpcy5tb2RlbFZpZXdUcmFuc2Zvcm1Qcm9wZXJ0eSApO1xyXG4gICAgdGhpcy5ib3R0b21MYXllci5hZGRDaGlsZCggZWxsaXB0aWNhbE9yYml0Tm9kZSApO1xyXG4gICAgdGhpcy5ib2RpZXNMYXllci5hZGRDaGlsZCggZWxsaXB0aWNhbE9yYml0Tm9kZS50b3BMYXllciApO1xyXG5cclxuICAgIC8vIFVJIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIC8vIFNlY29uZCBhbmQgVGhpcmQgTGF3IEFjY29yZGlvbiBCb3hlcyBhbmQgWm9vbSBCdXR0b25zXHJcblxyXG4gICAgdGhpcy50b3BMYXllci5hZGRDaGlsZCggbmV3IE9yYml0YWxXYXJuaW5nTWVzc2FnZSggbW9kZWwsIHRoaXMubW9kZWxWaWV3VHJhbnNmb3JtUHJvcGVydHkgKSApO1xyXG5cclxuICAgIGNvbnN0IGxhd3NBbmRab29tQm94ZXMgPSBuZXcgQWxpZ25Cb3goIG5ldyBIQm94KCB7XHJcbiAgICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICAgIG5ldyBGaXJzdExhd1BhbmVscyggbW9kZWwgKSxcclxuICAgICAgICAgIG5ldyBTZWNvbmRMYXdQYW5lbHMoIG1vZGVsICksXHJcbiAgICAgICAgICBuZXcgVGhpcmRMYXdQYW5lbHMoIG1vZGVsIClcclxuICAgICAgICBdLFxyXG4gICAgICAgIHNwYWNpbmc6IDEwLFxyXG4gICAgICAgIGFsaWduOiAndG9wJ1xyXG4gICAgICB9ICksXHJcbiAgICAgIHtcclxuICAgICAgICBhbGlnbkJvdW5kc1Byb3BlcnR5OiB0aGlzLmF2YWlsYWJsZUJvdW5kc1Byb3BlcnR5LFxyXG4gICAgICAgIG1hcmdpbjogTUFSR0lOLFxyXG4gICAgICAgIHhBbGlnbjogJ2xlZnQnLFxyXG4gICAgICAgIHlBbGlnbjogJ3RvcCdcclxuICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIGNvbnRyb2wgcGFuZWwgb24gdG9wIG9mIHRoZSBjYW52YXNlc1xyXG4gICAgLy8gVmlzaWJpbGl0eSBjaGVja2JveGVzIGZvciBzaW0gZWxlbWVudHNcclxuICAgIGNvbnN0IGNvbnRyb2xQYW5lbEFsaWduQm94ID0gbmV3IEFsaWduQm94KFxyXG4gICAgICBuZXcgVkJveCgge1xyXG4gICAgICAgIHNwYWNpbmc6IDEwLFxyXG4gICAgICAgIGFsaWduOiAnbGVmdCcsXHJcbiAgICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICAgIHRoaXMudGltZUJveCxcclxuICAgICAgICAgIG5ldyBLZXBsZXJzTGF3c0NvbnRyb2xzKCBtb2RlbCwgb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnY29udHJvbFBhbmVsJyApIClcclxuICAgICAgICBdXHJcbiAgICAgIH0gKSxcclxuICAgICAge1xyXG4gICAgICAgIGFsaWduQm91bmRzUHJvcGVydHk6IHRoaXMuYXZhaWxhYmxlQm91bmRzUHJvcGVydHksXHJcbiAgICAgICAgbWFyZ2luOiBNQVJHSU4sXHJcbiAgICAgICAgeEFsaWduOiAncmlnaHQnLFxyXG4gICAgICAgIHlBbGlnbjogJ3RvcCdcclxuICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLnBlcmlvZFRpbWVyTm9kZSA9IG5ldyBQZXJpb2RUaW1lck5vZGUoIG1vZGVsLnN0b3B3YXRjaCwgdGhpcy5tb2RlbFZpZXdUcmFuc2Zvcm1Qcm9wZXJ0eSwgdGhpcy5sYXlvdXRCb3VuZHMsIHtcclxuICAgICAgZHJhZ0JvdW5kc1Byb3BlcnR5OiB0aGlzLnZpc2libGVCb3VuZHNQcm9wZXJ0eSxcclxuICAgICAgdmlzaWJsZVByb3BlcnR5OiBtb2RlbC5wZXJpb2RWaXNpYmxlUHJvcGVydHksXHJcbiAgICAgIHNvdW5kVmlld05vZGU6IHRoaXNcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLnRvcExheWVyLmFkZENoaWxkKCB0aGlzLnBlcmlvZFRpbWVyTm9kZSApO1xyXG5cclxuICAgIGNvbnN0IGRpc3RhbmNlc0Rpc3BsYXlCb3ggPSBuZXcgQWxpZ25Cb3goIG5ldyBEaXN0YW5jZXNEaXNwbGF5Tm9kZSggbW9kZWwsIHRoaXMubW9kZWxWaWV3VHJhbnNmb3JtUHJvcGVydHkgKSwge1xyXG4gICAgICBhbGlnbkJvdW5kc1Byb3BlcnR5OiB0aGlzLmF2YWlsYWJsZUJvdW5kc1Byb3BlcnR5LFxyXG4gICAgICBtYXJnaW46IFNvbGFyU3lzdGVtQ29tbW9uQ29uc3RhbnRzLk1BUkdJTixcclxuICAgICAgeEFsaWduOiAnY2VudGVyJyxcclxuICAgICAgeUFsaWduOiAndG9wJ1xyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IHJlc2V0Qm94ID0gbmV3IEFsaWduQm94KCB0aGlzLnJlc2V0QWxsQnV0dG9uLFxyXG4gICAgICB7XHJcbiAgICAgICAgYWxpZ25Cb3VuZHNQcm9wZXJ0eTogdGhpcy5hdmFpbGFibGVCb3VuZHNQcm9wZXJ0eSxcclxuICAgICAgICBtYXJnaW46IFNvbGFyU3lzdGVtQ29tbW9uQ29uc3RhbnRzLk1BUkdJTixcclxuICAgICAgICB4QWxpZ246ICdyaWdodCcsXHJcbiAgICAgICAgeUFsaWduOiAnYm90dG9tJ1xyXG4gICAgICB9ICk7XHJcblxyXG4gICAgLy8gU2xpZGVyIHRoYXQgY29udHJvbHMgdGhlIGJvZGllcyBtYXNzXHJcbiAgICB0aGlzLmludGVyZmFjZUxheWVyLmFkZENoaWxkKCBsYXdzQW5kWm9vbUJveGVzICk7XHJcbiAgICB0aGlzLmludGVyZmFjZUxheWVyLmFkZENoaWxkKCBjb250cm9sUGFuZWxBbGlnbkJveCApO1xyXG4gICAgaWYgKCBvcHRpb25zLmFsbG93TGF3U2VsZWN0aW9uICkge1xyXG4gICAgICB0aGlzLmludGVyZmFjZUxheWVyLmFkZENoaWxkKCBuZXcgQWxpZ25Cb3goIG5ldyBIQm94KCB7XHJcbiAgICAgICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgICAgICBuZXcgTGF3c0J1dHRvbnMoIG1vZGVsIClcclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgICBzcGFjaW5nOiAyMFxyXG4gICAgICAgIH0gKSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBhbGlnbkJvdW5kc1Byb3BlcnR5OiB0aGlzLmF2YWlsYWJsZUJvdW5kc1Byb3BlcnR5LFxyXG4gICAgICAgICAgbWFyZ2luOiBNQVJHSU4sXHJcbiAgICAgICAgICB4QWxpZ246ICdsZWZ0JyxcclxuICAgICAgICAgIHlBbGlnbjogJ2JvdHRvbSdcclxuICAgICAgICB9XHJcbiAgICAgICkgKTtcclxuICAgIH1cclxuICAgIHRoaXMuaW50ZXJmYWNlTGF5ZXIuYWRkQ2hpbGQoIHJlc2V0Qm94ICk7XHJcbiAgICB0aGlzLmJvdHRvbUxheWVyLmFkZENoaWxkKCBkaXN0YW5jZXNEaXNwbGF5Qm94ICk7XHJcbiAgfVxyXG59XHJcblxyXG5rZXBsZXJzTGF3cy5yZWdpc3RlciggJ0tlcGxlcnNMYXdzU2NyZWVuVmlldycsIEtlcGxlcnNMYXdzU2NyZWVuVmlldyApO1xyXG5leHBvcnQgZGVmYXVsdCBLZXBsZXJzTGF3c1NjcmVlblZpZXc7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFNBQVNBLFFBQVEsRUFBRUMsSUFBSSxFQUFFQyxJQUFJLFFBQVEsbUNBQW1DO0FBRXhFLE9BQU9DLG1CQUFtQixNQUFNLDBCQUEwQjtBQUMxRCxPQUFPQyxlQUFlLE1BQU0sc0JBQXNCO0FBQ2xELE9BQU9DLFFBQVEsTUFBTSxxREFBcUQ7QUFDMUUsT0FBT0MsbUJBQW1CLE1BQU0sMEJBQTBCO0FBQzFELE9BQU9DLGNBQWMsTUFBTSxxQkFBcUI7QUFDaEQsT0FBT0MsU0FBUyxNQUFNLHVDQUF1QztBQUM3RCxPQUFPQywyQkFBMkIsTUFBOEMsd0VBQXdFO0FBQ3hKLE9BQU9DLFdBQVcsTUFBTSxrQkFBa0I7QUFDMUMsT0FBT0MsMEJBQTBCLE1BQU0sa0VBQWtFO0FBQ3pHLE9BQU9DLGNBQWMsTUFBTSxxQkFBcUI7QUFDaEQsT0FBT0MsZUFBZSxNQUFNLHdDQUF3QztBQUNwRSxPQUFPQyxVQUFVLE1BQU0sdURBQXVEO0FBQzlFLE9BQU9DLGVBQWUsTUFBTSxnREFBZ0Q7QUFDNUUsT0FBT0MscUJBQXFCLE1BQU0sNEJBQTRCO0FBQzlELE9BQU9DLG9CQUFvQixNQUFNLDJCQUEyQjtBQUM1RCxPQUFPQyxXQUFXLE1BQU0sc0JBQXNCO0FBQzlDLE9BQU9DLGNBQWMsTUFBTSx1Q0FBdUM7QUFDbEUsT0FBT0MsZUFBZSxNQUFNLHNCQUFzQjs7QUFFbEQ7QUFDQSxNQUFNQyxNQUFNLEdBQUcsRUFBRTtBQVFqQixNQUFNQyxxQkFBcUIsU0FBU2IsMkJBQTJCLENBQUM7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