// Copyright 2023, University of Colorado Boulder

/**
 * Visual representation of space object's property checkbox.
 *
 * @author AgustÃ­n Vallejo
 */

import { AlignBox, HBox, Image, Node, Path, Text, VBox } from '../../../../scenery/js/imports.js';
import Checkbox from '../../../../sun/js/Checkbox.js';
import KeplersLawsStrings from '../../../../keplers-laws/js/KeplersLawsStrings.js';
import optionize, { combineOptions } from '../../../../phet-core/js/optionize.js';
import XNode from '../../../../scenery-phet/js/XNode.js';
import SolarSystemCommonColors from '../../../../solar-system-common/js/SolarSystemCommonColors.js';
import SolarSystemCommonConstants from '../../../../solar-system-common/js/SolarSystemCommonConstants.js';
import { Shape } from '../../../../kite/js/imports.js';
import semiaxisIcon_png from '../../../images/semiaxisIcon_png.js';
import eccentricityIcon_png from '../../../images/eccentricityIcon_png.js';
import fociIcon_png from '../../../images/fociIcon_png.js';
import stringsIcon_png from '../../../images/stringsIcon_png.js';
import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import keplersLaws from '../../keplersLaws.js';

// Const
const ICON_OPTIONS = {
  scale: 0.38
};
class KeplersLawsOrbitalInformationBox extends VBox {
  constructor(model, providedOptions) {
    // Draw an Ellipse with minor and major axis
    const axisShape = new Shape().moveTo(0, 0).ellipse(0, 0, 10, 5, 0);
    axisShape.moveTo(-10, 0).lineTo(10, 0);
    axisShape.moveTo(0, -5).lineTo(0, 5);
    const axisIconImageNode = new Path(axisShape, {
      stroke: SolarSystemCommonColors.foregroundProperty,
      lineWidth: 1
    });
    const getCheckboxOptions = (name, options = {}) => {
      return combineOptions(options, SolarSystemCommonConstants.CHECKBOX_OPTIONS, {
        tandem: providedOptions.tandem.createTandem(name)
      });
    };
    const createCheckbox = (property, text, tandemName, icon = new Node(), options) => {
      return new Checkbox(property, new HBox({
        children: [new Text(text, SolarSystemCommonConstants.TEXT_OPTIONS), icon],
        spacing: 10
      }), getCheckboxOptions(tandemName, options));
    };
    const firstLawChildren = [createCheckbox(model.fociVisibleProperty, KeplersLawsStrings.fociStringProperty, 'fociVisibleCheckbox', new Image(fociIcon_png, ICON_OPTIONS)), new AlignBox(createCheckbox(model.stringsVisibleProperty, KeplersLawsStrings.stringsStringProperty, 'stringsVisibleCheckbox', new Image(stringsIcon_png, ICON_OPTIONS), {
      enabledProperty: model.fociVisibleProperty
    }), {
      leftMargin: 20,
      layoutOptions: {
        stretch: true
      }
    }), createCheckbox(model.axisVisibleProperty, KeplersLawsStrings.axisStringProperty, 'axisVisibleCheckbox', axisIconImageNode), new AlignBox(createCheckbox(model.semiaxisVisibleProperty, KeplersLawsStrings.semiaxisStringProperty, 'semiAxisVisibleCheckbox', new Image(semiaxisIcon_png, ICON_OPTIONS), {
      enabledProperty: model.axisVisibleProperty
    }), {
      leftMargin: 20,
      layoutOptions: {
        stretch: true
      }
    }), createCheckbox(model.eccentricityVisibleProperty, KeplersLawsStrings.eccentricityStringProperty, 'eccentricityVisibleCheckbox', new Image(eccentricityIcon_png, ICON_OPTIONS))];
    const secondLawChildren = [createCheckbox(model.apoapsisVisibleProperty, KeplersLawsStrings.apoapsisStringProperty, 'apoapsisVisibleCheckbox', new XNode({
      fill: SolarSystemCommonColors.thirdBodyColorProperty,
      stroke: SolarSystemCommonColors.foregroundProperty,
      scale: 0.5
    }), {
      enabledProperty: new DerivedProperty([model.engine.eccentricityProperty], e => e > 0)
    }), createCheckbox(model.periapsisVisibleProperty, KeplersLawsStrings.periapsisStringProperty,
    //REVIEW: visibFle looks like a typo introduced in https://github.com/phetsims/my-solar-system/commit/8ed18445210b1f2fbfdc88759cdb0894b8a3004a
    //REVIEW: it should be fixed
    'periapsisVisibFleCheckbox', new XNode({
      fill: 'gold',
      stroke: SolarSystemCommonColors.foregroundProperty,
      scale: 0.5
    }), {
      enabledProperty: new DerivedProperty([model.engine.eccentricityProperty], e => e > 0)
    })];
    const thirdLawChildren = [createCheckbox(model.semiMajorAxisVisibleProperty, KeplersLawsStrings.graph.aStringProperty, 'semiMajorAxisVisibleCheckbox'
    // axisIconImageNode TODO
    ), createCheckbox(model.periodVisibleProperty, KeplersLawsStrings.graph.tStringProperty, 'periodVisibleCheckbox'
    // periodIconImageNode TODO
    )];

    super(optionize()({
      spacing: 5,
      align: 'left',
      stretch: true
    }, providedOptions));
    model.lawUpdatedEmitter.addListener(() => {
      this.children = [...(model.isFirstLawProperty.value ? firstLawChildren : model.isSecondLawProperty.value ? secondLawChildren : model.isThirdLawProperty.value ? thirdLawChildren : [])];
    });
    model.lawUpdatedEmitter.emit();
  }
}
keplersLaws.register('KeplersLawsOrbitalInformationBox', KeplersLawsOrbitalInformationBox);
export default KeplersLawsOrbitalInformationBox;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBbGlnbkJveCIsIkhCb3giLCJJbWFnZSIsIk5vZGUiLCJQYXRoIiwiVGV4dCIsIlZCb3giLCJDaGVja2JveCIsIktlcGxlcnNMYXdzU3RyaW5ncyIsIm9wdGlvbml6ZSIsImNvbWJpbmVPcHRpb25zIiwiWE5vZGUiLCJTb2xhclN5c3RlbUNvbW1vbkNvbG9ycyIsIlNvbGFyU3lzdGVtQ29tbW9uQ29uc3RhbnRzIiwiU2hhcGUiLCJzZW1pYXhpc0ljb25fcG5nIiwiZWNjZW50cmljaXR5SWNvbl9wbmciLCJmb2NpSWNvbl9wbmciLCJzdHJpbmdzSWNvbl9wbmciLCJEZXJpdmVkUHJvcGVydHkiLCJrZXBsZXJzTGF3cyIsIklDT05fT1BUSU9OUyIsInNjYWxlIiwiS2VwbGVyc0xhd3NPcmJpdGFsSW5mb3JtYXRpb25Cb3giLCJjb25zdHJ1Y3RvciIsIm1vZGVsIiwicHJvdmlkZWRPcHRpb25zIiwiYXhpc1NoYXBlIiwibW92ZVRvIiwiZWxsaXBzZSIsImxpbmVUbyIsImF4aXNJY29uSW1hZ2VOb2RlIiwic3Ryb2tlIiwiZm9yZWdyb3VuZFByb3BlcnR5IiwibGluZVdpZHRoIiwiZ2V0Q2hlY2tib3hPcHRpb25zIiwibmFtZSIsIm9wdGlvbnMiLCJDSEVDS0JPWF9PUFRJT05TIiwidGFuZGVtIiwiY3JlYXRlVGFuZGVtIiwiY3JlYXRlQ2hlY2tib3giLCJwcm9wZXJ0eSIsInRleHQiLCJ0YW5kZW1OYW1lIiwiaWNvbiIsImNoaWxkcmVuIiwiVEVYVF9PUFRJT05TIiwic3BhY2luZyIsImZpcnN0TGF3Q2hpbGRyZW4iLCJmb2NpVmlzaWJsZVByb3BlcnR5IiwiZm9jaVN0cmluZ1Byb3BlcnR5Iiwic3RyaW5nc1Zpc2libGVQcm9wZXJ0eSIsInN0cmluZ3NTdHJpbmdQcm9wZXJ0eSIsImVuYWJsZWRQcm9wZXJ0eSIsImxlZnRNYXJnaW4iLCJsYXlvdXRPcHRpb25zIiwic3RyZXRjaCIsImF4aXNWaXNpYmxlUHJvcGVydHkiLCJheGlzU3RyaW5nUHJvcGVydHkiLCJzZW1pYXhpc1Zpc2libGVQcm9wZXJ0eSIsInNlbWlheGlzU3RyaW5nUHJvcGVydHkiLCJlY2NlbnRyaWNpdHlWaXNpYmxlUHJvcGVydHkiLCJlY2NlbnRyaWNpdHlTdHJpbmdQcm9wZXJ0eSIsInNlY29uZExhd0NoaWxkcmVuIiwiYXBvYXBzaXNWaXNpYmxlUHJvcGVydHkiLCJhcG9hcHNpc1N0cmluZ1Byb3BlcnR5IiwiZmlsbCIsInRoaXJkQm9keUNvbG9yUHJvcGVydHkiLCJlbmdpbmUiLCJlY2NlbnRyaWNpdHlQcm9wZXJ0eSIsImUiLCJwZXJpYXBzaXNWaXNpYmxlUHJvcGVydHkiLCJwZXJpYXBzaXNTdHJpbmdQcm9wZXJ0eSIsInRoaXJkTGF3Q2hpbGRyZW4iLCJzZW1pTWFqb3JBeGlzVmlzaWJsZVByb3BlcnR5IiwiZ3JhcGgiLCJhU3RyaW5nUHJvcGVydHkiLCJwZXJpb2RWaXNpYmxlUHJvcGVydHkiLCJ0U3RyaW5nUHJvcGVydHkiLCJhbGlnbiIsImxhd1VwZGF0ZWRFbWl0dGVyIiwiYWRkTGlzdGVuZXIiLCJpc0ZpcnN0TGF3UHJvcGVydHkiLCJ2YWx1ZSIsImlzU2Vjb25kTGF3UHJvcGVydHkiLCJpc1RoaXJkTGF3UHJvcGVydHkiLCJlbWl0IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJLZXBsZXJzTGF3c09yYml0YWxJbmZvcm1hdGlvbkJveC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogVmlzdWFsIHJlcHJlc2VudGF0aW9uIG9mIHNwYWNlIG9iamVjdCdzIHByb3BlcnR5IGNoZWNrYm94LlxyXG4gKlxyXG4gKiBAYXV0aG9yIEFndXN0w61uIFZhbGxlam9cclxuICovXHJcblxyXG5pbXBvcnQgeyBBbGlnbkJveCwgSEJveCwgSEJveE9wdGlvbnMsIEltYWdlLCBOb2RlLCBQYXRoLCBUZXh0LCBWQm94LCBWQm94T3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBDaGVja2JveCwgeyBDaGVja2JveE9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvQ2hlY2tib3guanMnO1xyXG5pbXBvcnQgS2VwbGVyc0xhd3NTdHJpbmdzIGZyb20gJy4uLy4uLy4uLy4uL2tlcGxlcnMtbGF3cy9qcy9LZXBsZXJzTGF3c1N0cmluZ3MuanMnO1xyXG5pbXBvcnQgb3B0aW9uaXplLCB7IGNvbWJpbmVPcHRpb25zLCBFbXB0eVNlbGZPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCBXaXRoUmVxdWlyZWQgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL1dpdGhSZXF1aXJlZC5qcyc7XHJcbmltcG9ydCBYTm9kZSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvWE5vZGUuanMnO1xyXG5pbXBvcnQgU29sYXJTeXN0ZW1Db21tb25Db2xvcnMgZnJvbSAnLi4vLi4vLi4vLi4vc29sYXItc3lzdGVtLWNvbW1vbi9qcy9Tb2xhclN5c3RlbUNvbW1vbkNvbG9ycy5qcyc7XHJcbmltcG9ydCBTb2xhclN5c3RlbUNvbW1vbkNvbnN0YW50cyBmcm9tICcuLi8uLi8uLi8uLi9zb2xhci1zeXN0ZW0tY29tbW9uL2pzL1NvbGFyU3lzdGVtQ29tbW9uQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IEtlcGxlcnNMYXdzTW9kZWwgZnJvbSAnLi4vbW9kZWwvS2VwbGVyc0xhd3NNb2RlbC5qcyc7XHJcbmltcG9ydCBMaW5rYWJsZVByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvTGlua2FibGVQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBUUmVhZE9ubHlQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1RSZWFkT25seVByb3BlcnR5LmpzJztcclxuaW1wb3J0IHsgU2hhcGUgfSBmcm9tICcuLi8uLi8uLi8uLi9raXRlL2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgc2VtaWF4aXNJY29uX3BuZyBmcm9tICcuLi8uLi8uLi9pbWFnZXMvc2VtaWF4aXNJY29uX3BuZy5qcyc7XHJcbmltcG9ydCBlY2NlbnRyaWNpdHlJY29uX3BuZyBmcm9tICcuLi8uLi8uLi9pbWFnZXMvZWNjZW50cmljaXR5SWNvbl9wbmcuanMnO1xyXG5pbXBvcnQgZm9jaUljb25fcG5nIGZyb20gJy4uLy4uLy4uL2ltYWdlcy9mb2NpSWNvbl9wbmcuanMnO1xyXG5pbXBvcnQgc3RyaW5nc0ljb25fcG5nIGZyb20gJy4uLy4uLy4uL2ltYWdlcy9zdHJpbmdzSWNvbl9wbmcuanMnO1xyXG5pbXBvcnQgRGVyaXZlZFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvRGVyaXZlZFByb3BlcnR5LmpzJztcclxuaW1wb3J0IGtlcGxlcnNMYXdzIGZyb20gJy4uLy4uL2tlcGxlcnNMYXdzLmpzJztcclxuXHJcbi8vIENvbnN0XHJcbmNvbnN0IElDT05fT1BUSU9OUyA9IHtcclxuICBzY2FsZTogMC4zOFxyXG59O1xyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IEVtcHR5U2VsZk9wdGlvbnM7XHJcblxyXG5leHBvcnQgdHlwZSBLZXBsZXJzTGF3c09yYml0YWxJbmZvcm1hdGlvbk9wdGlvbnMgPSBTZWxmT3B0aW9ucyAmIFdpdGhSZXF1aXJlZDxWQm94T3B0aW9ucywgJ3RhbmRlbSc+O1xyXG5cclxuY2xhc3MgS2VwbGVyc0xhd3NPcmJpdGFsSW5mb3JtYXRpb25Cb3ggZXh0ZW5kcyBWQm94IHtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBtb2RlbDogS2VwbGVyc0xhd3NNb2RlbCwgcHJvdmlkZWRPcHRpb25zOiBLZXBsZXJzTGF3c09yYml0YWxJbmZvcm1hdGlvbk9wdGlvbnMgKSB7XHJcblxyXG4gICAgLy8gRHJhdyBhbiBFbGxpcHNlIHdpdGggbWlub3IgYW5kIG1ham9yIGF4aXNcclxuICAgIGNvbnN0IGF4aXNTaGFwZSA9IG5ldyBTaGFwZSgpLm1vdmVUbyggMCwgMCApLmVsbGlwc2UoIDAsIDAsIDEwLCA1LCAwICk7XHJcbiAgICBheGlzU2hhcGUubW92ZVRvKCAtMTAsIDAgKS5saW5lVG8oIDEwLCAwICk7XHJcbiAgICBheGlzU2hhcGUubW92ZVRvKCAwLCAtNSApLmxpbmVUbyggMCwgNSApO1xyXG5cclxuICAgIGNvbnN0IGF4aXNJY29uSW1hZ2VOb2RlID0gbmV3IFBhdGgoXHJcbiAgICAgIGF4aXNTaGFwZSwge1xyXG4gICAgICAgIHN0cm9rZTogU29sYXJTeXN0ZW1Db21tb25Db2xvcnMuZm9yZWdyb3VuZFByb3BlcnR5LFxyXG4gICAgICAgIGxpbmVXaWR0aDogMVxyXG4gICAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgZ2V0Q2hlY2tib3hPcHRpb25zID0gKCBuYW1lOiBzdHJpbmcsIG9wdGlvbnM6IENoZWNrYm94T3B0aW9ucyA9IHt9ICkgPT4ge1xyXG4gICAgICByZXR1cm4gY29tYmluZU9wdGlvbnM8Q2hlY2tib3hPcHRpb25zPiggb3B0aW9ucywgU29sYXJTeXN0ZW1Db21tb25Db25zdGFudHMuQ0hFQ0tCT1hfT1BUSU9OUywge1xyXG4gICAgICAgIHRhbmRlbTogcHJvdmlkZWRPcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oIG5hbWUgKVxyXG4gICAgICB9ICk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGNyZWF0ZUNoZWNrYm94ID0gKFxyXG4gICAgICBwcm9wZXJ0eTogTGlua2FibGVQcm9wZXJ0eTxib29sZWFuPixcclxuICAgICAgdGV4dDogVFJlYWRPbmx5UHJvcGVydHk8c3RyaW5nPixcclxuICAgICAgdGFuZGVtTmFtZTogc3RyaW5nLFxyXG4gICAgICBpY29uOiBOb2RlID0gbmV3IE5vZGUoKSxcclxuICAgICAgb3B0aW9ucz86IENoZWNrYm94T3B0aW9uc1xyXG4gICAgKSA9PiB7XHJcbiAgICAgIHJldHVybiBuZXcgQ2hlY2tib3goIHByb3BlcnR5LCBuZXcgSEJveCgge1xyXG4gICAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgICBuZXcgVGV4dCggdGV4dCwgU29sYXJTeXN0ZW1Db21tb25Db25zdGFudHMuVEVYVF9PUFRJT05TICksXHJcbiAgICAgICAgICBpY29uXHJcbiAgICAgICAgXSxcclxuICAgICAgICBzcGFjaW5nOiAxMFxyXG4gICAgICB9ICksIGdldENoZWNrYm94T3B0aW9ucyggdGFuZGVtTmFtZSwgb3B0aW9ucyApICk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGZpcnN0TGF3Q2hpbGRyZW4gPSBbXHJcbiAgICAgIGNyZWF0ZUNoZWNrYm94KFxyXG4gICAgICAgIG1vZGVsLmZvY2lWaXNpYmxlUHJvcGVydHksXHJcbiAgICAgICAgS2VwbGVyc0xhd3NTdHJpbmdzLmZvY2lTdHJpbmdQcm9wZXJ0eSxcclxuICAgICAgICAnZm9jaVZpc2libGVDaGVja2JveCcsXHJcbiAgICAgICAgbmV3IEltYWdlKCBmb2NpSWNvbl9wbmcsIElDT05fT1BUSU9OUyApXHJcbiAgICAgICksXHJcbiAgICAgIG5ldyBBbGlnbkJveChcclxuICAgICAgICBjcmVhdGVDaGVja2JveChcclxuICAgICAgICAgIG1vZGVsLnN0cmluZ3NWaXNpYmxlUHJvcGVydHksXHJcbiAgICAgICAgICBLZXBsZXJzTGF3c1N0cmluZ3Muc3RyaW5nc1N0cmluZ1Byb3BlcnR5LFxyXG4gICAgICAgICAgJ3N0cmluZ3NWaXNpYmxlQ2hlY2tib3gnLFxyXG4gICAgICAgICAgbmV3IEltYWdlKCBzdHJpbmdzSWNvbl9wbmcsIElDT05fT1BUSU9OUyApLFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBlbmFibGVkUHJvcGVydHk6IG1vZGVsLmZvY2lWaXNpYmxlUHJvcGVydHlcclxuICAgICAgICAgIH1cclxuICAgICAgICApLCB7XHJcbiAgICAgICAgICBsZWZ0TWFyZ2luOiAyMCxcclxuICAgICAgICAgIGxheW91dE9wdGlvbnM6IHsgc3RyZXRjaDogdHJ1ZSB9XHJcbiAgICAgICAgfSApLFxyXG4gICAgICBjcmVhdGVDaGVja2JveChcclxuICAgICAgICBtb2RlbC5heGlzVmlzaWJsZVByb3BlcnR5LFxyXG4gICAgICAgIEtlcGxlcnNMYXdzU3RyaW5ncy5heGlzU3RyaW5nUHJvcGVydHksXHJcbiAgICAgICAgJ2F4aXNWaXNpYmxlQ2hlY2tib3gnLFxyXG4gICAgICAgIGF4aXNJY29uSW1hZ2VOb2RlXHJcbiAgICAgICksXHJcbiAgICAgIG5ldyBBbGlnbkJveChcclxuICAgICAgICBjcmVhdGVDaGVja2JveChcclxuICAgICAgICAgIG1vZGVsLnNlbWlheGlzVmlzaWJsZVByb3BlcnR5LFxyXG4gICAgICAgICAgS2VwbGVyc0xhd3NTdHJpbmdzLnNlbWlheGlzU3RyaW5nUHJvcGVydHksXHJcbiAgICAgICAgICAnc2VtaUF4aXNWaXNpYmxlQ2hlY2tib3gnLFxyXG4gICAgICAgICAgbmV3IEltYWdlKCBzZW1pYXhpc0ljb25fcG5nLCBJQ09OX09QVElPTlMgKSxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgZW5hYmxlZFByb3BlcnR5OiBtb2RlbC5heGlzVmlzaWJsZVByb3BlcnR5XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKSwge1xyXG4gICAgICAgICAgbGVmdE1hcmdpbjogMjAsXHJcbiAgICAgICAgICBsYXlvdXRPcHRpb25zOiB7IHN0cmV0Y2g6IHRydWUgfVxyXG4gICAgICAgIH0gKSxcclxuICAgICAgY3JlYXRlQ2hlY2tib3goXHJcbiAgICAgICAgbW9kZWwuZWNjZW50cmljaXR5VmlzaWJsZVByb3BlcnR5LFxyXG4gICAgICAgIEtlcGxlcnNMYXdzU3RyaW5ncy5lY2NlbnRyaWNpdHlTdHJpbmdQcm9wZXJ0eSxcclxuICAgICAgICAnZWNjZW50cmljaXR5VmlzaWJsZUNoZWNrYm94JyxcclxuICAgICAgICBuZXcgSW1hZ2UoIGVjY2VudHJpY2l0eUljb25fcG5nLCBJQ09OX09QVElPTlMgKVxyXG4gICAgICApXHJcbiAgICBdO1xyXG5cclxuICAgIGNvbnN0IHNlY29uZExhd0NoaWxkcmVuID0gW1xyXG4gICAgICBjcmVhdGVDaGVja2JveChcclxuICAgICAgICBtb2RlbC5hcG9hcHNpc1Zpc2libGVQcm9wZXJ0eSxcclxuICAgICAgICBLZXBsZXJzTGF3c1N0cmluZ3MuYXBvYXBzaXNTdHJpbmdQcm9wZXJ0eSxcclxuICAgICAgICAnYXBvYXBzaXNWaXNpYmxlQ2hlY2tib3gnLFxyXG4gICAgICAgIG5ldyBYTm9kZSgge1xyXG4gICAgICAgICAgZmlsbDogU29sYXJTeXN0ZW1Db21tb25Db2xvcnMudGhpcmRCb2R5Q29sb3JQcm9wZXJ0eSxcclxuICAgICAgICAgIHN0cm9rZTogU29sYXJTeXN0ZW1Db21tb25Db2xvcnMuZm9yZWdyb3VuZFByb3BlcnR5LFxyXG4gICAgICAgICAgc2NhbGU6IDAuNVxyXG4gICAgICAgIH0gKSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBlbmFibGVkUHJvcGVydHk6IG5ldyBEZXJpdmVkUHJvcGVydHkoIFsgbW9kZWwuZW5naW5lLmVjY2VudHJpY2l0eVByb3BlcnR5IF0sXHJcbiAgICAgICAgICAgIGUgPT4gZSA+IDAgKVxyXG4gICAgICAgIH1cclxuICAgICAgKSxcclxuICAgICAgY3JlYXRlQ2hlY2tib3goXHJcbiAgICAgICAgbW9kZWwucGVyaWFwc2lzVmlzaWJsZVByb3BlcnR5LFxyXG4gICAgICAgIEtlcGxlcnNMYXdzU3RyaW5ncy5wZXJpYXBzaXNTdHJpbmdQcm9wZXJ0eSxcclxuICAgICAgICAvL1JFVklFVzogdmlzaWJGbGUgbG9va3MgbGlrZSBhIHR5cG8gaW50cm9kdWNlZCBpbiBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvbXktc29sYXItc3lzdGVtL2NvbW1pdC84ZWQxODQ0NTIxMGIxZjJmYmZkYzg4NzU5Y2RiMDg5NGI4YTMwMDRhXHJcbiAgICAgICAgLy9SRVZJRVc6IGl0IHNob3VsZCBiZSBmaXhlZFxyXG4gICAgICAgICdwZXJpYXBzaXNWaXNpYkZsZUNoZWNrYm94JyxcclxuICAgICAgICBuZXcgWE5vZGUoIHtcclxuICAgICAgICAgIGZpbGw6ICdnb2xkJyxcclxuICAgICAgICAgIHN0cm9rZTogU29sYXJTeXN0ZW1Db21tb25Db2xvcnMuZm9yZWdyb3VuZFByb3BlcnR5LFxyXG4gICAgICAgICAgc2NhbGU6IDAuNVxyXG4gICAgICAgIH0gKSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBlbmFibGVkUHJvcGVydHk6IG5ldyBEZXJpdmVkUHJvcGVydHkoIFsgbW9kZWwuZW5naW5lLmVjY2VudHJpY2l0eVByb3BlcnR5IF0sXHJcbiAgICAgICAgICAgIGUgPT4gZSA+IDAgKVxyXG4gICAgICAgIH1cclxuICAgICAgKVxyXG4gICAgXTtcclxuXHJcbiAgICBjb25zdCB0aGlyZExhd0NoaWxkcmVuID0gW1xyXG4gICAgICBjcmVhdGVDaGVja2JveChcclxuICAgICAgICBtb2RlbC5zZW1pTWFqb3JBeGlzVmlzaWJsZVByb3BlcnR5LFxyXG4gICAgICAgIEtlcGxlcnNMYXdzU3RyaW5ncy5ncmFwaC5hU3RyaW5nUHJvcGVydHksXHJcbiAgICAgICAgJ3NlbWlNYWpvckF4aXNWaXNpYmxlQ2hlY2tib3gnXHJcbiAgICAgICAgLy8gYXhpc0ljb25JbWFnZU5vZGUgVE9ET1xyXG4gICAgICApLFxyXG4gICAgICBjcmVhdGVDaGVja2JveChcclxuICAgICAgICBtb2RlbC5wZXJpb2RWaXNpYmxlUHJvcGVydHksXHJcbiAgICAgICAgS2VwbGVyc0xhd3NTdHJpbmdzLmdyYXBoLnRTdHJpbmdQcm9wZXJ0eSxcclxuICAgICAgICAncGVyaW9kVmlzaWJsZUNoZWNrYm94J1xyXG4gICAgICAgIC8vIHBlcmlvZEljb25JbWFnZU5vZGUgVE9ET1xyXG4gICAgICApXHJcbiAgICBdO1xyXG5cclxuICAgIHN1cGVyKCBvcHRpb25pemU8S2VwbGVyc0xhd3NPcmJpdGFsSW5mb3JtYXRpb25PcHRpb25zLCBTZWxmT3B0aW9ucywgSEJveE9wdGlvbnM+KCkoIHtcclxuICAgICAgc3BhY2luZzogNSxcclxuICAgICAgYWxpZ246ICdsZWZ0JyxcclxuICAgICAgc3RyZXRjaDogdHJ1ZVxyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICkgKTtcclxuXHJcbiAgICBtb2RlbC5sYXdVcGRhdGVkRW1pdHRlci5hZGRMaXN0ZW5lciggKCkgPT4ge1xyXG4gICAgICB0aGlzLmNoaWxkcmVuID0gW1xyXG4gICAgICAgIC4uLiggbW9kZWwuaXNGaXJzdExhd1Byb3BlcnR5LnZhbHVlID8gZmlyc3RMYXdDaGlsZHJlbiA6XHJcbiAgICAgICAgICAgICBtb2RlbC5pc1NlY29uZExhd1Byb3BlcnR5LnZhbHVlID8gc2Vjb25kTGF3Q2hpbGRyZW4gOlxyXG4gICAgICAgICAgICAgbW9kZWwuaXNUaGlyZExhd1Byb3BlcnR5LnZhbHVlID8gdGhpcmRMYXdDaGlsZHJlbiA6IFtdIClcclxuICAgICAgXTtcclxuICAgIH0gKTtcclxuXHJcbiAgICBtb2RlbC5sYXdVcGRhdGVkRW1pdHRlci5lbWl0KCk7XHJcbiAgfVxyXG59XHJcblxyXG5rZXBsZXJzTGF3cy5yZWdpc3RlciggJ0tlcGxlcnNMYXdzT3JiaXRhbEluZm9ybWF0aW9uQm94JywgS2VwbGVyc0xhd3NPcmJpdGFsSW5mb3JtYXRpb25Cb3ggKTtcclxuZXhwb3J0IGRlZmF1bHQgS2VwbGVyc0xhd3NPcmJpdGFsSW5mb3JtYXRpb25Cb3g7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFNBQVNBLFFBQVEsRUFBRUMsSUFBSSxFQUFlQyxLQUFLLEVBQUVDLElBQUksRUFBRUMsSUFBSSxFQUFFQyxJQUFJLEVBQUVDLElBQUksUUFBcUIsbUNBQW1DO0FBQzNILE9BQU9DLFFBQVEsTUFBMkIsZ0NBQWdDO0FBQzFFLE9BQU9DLGtCQUFrQixNQUFNLG1EQUFtRDtBQUNsRixPQUFPQyxTQUFTLElBQUlDLGNBQWMsUUFBMEIsdUNBQXVDO0FBRW5HLE9BQU9DLEtBQUssTUFBTSxzQ0FBc0M7QUFDeEQsT0FBT0MsdUJBQXVCLE1BQU0sK0RBQStEO0FBQ25HLE9BQU9DLDBCQUEwQixNQUFNLGtFQUFrRTtBQUl6RyxTQUFTQyxLQUFLLFFBQVEsZ0NBQWdDO0FBQ3RELE9BQU9DLGdCQUFnQixNQUFNLHFDQUFxQztBQUNsRSxPQUFPQyxvQkFBb0IsTUFBTSx5Q0FBeUM7QUFDMUUsT0FBT0MsWUFBWSxNQUFNLGlDQUFpQztBQUMxRCxPQUFPQyxlQUFlLE1BQU0sb0NBQW9DO0FBQ2hFLE9BQU9DLGVBQWUsTUFBTSx3Q0FBd0M7QUFDcEUsT0FBT0MsV0FBVyxNQUFNLHNCQUFzQjs7QUFFOUM7QUFDQSxNQUFNQyxZQUFZLEdBQUc7RUFDbkJDLEtBQUssRUFBRTtBQUNULENBQUM7QUFNRCxNQUFNQyxnQ0FBZ0MsU0FBU2pCLElBQUksQ0FBQztFQUUzQ2tCLFdBQVdBLENBQUVDLEtBQXVCLEVBQUVDLGVBQXFELEVBQUc7SUFFbkc7SUFDQSxNQUFNQyxTQUFTLEdBQUcsSUFBSWIsS0FBSyxDQUFDLENBQUMsQ0FBQ2MsTUFBTSxDQUFFLENBQUMsRUFBRSxDQUFFLENBQUMsQ0FBQ0MsT0FBTyxDQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFFLENBQUM7SUFDdEVGLFNBQVMsQ0FBQ0MsTUFBTSxDQUFFLENBQUMsRUFBRSxFQUFFLENBQUUsQ0FBQyxDQUFDRSxNQUFNLENBQUUsRUFBRSxFQUFFLENBQUUsQ0FBQztJQUMxQ0gsU0FBUyxDQUFDQyxNQUFNLENBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBRSxDQUFDLENBQUNFLE1BQU0sQ0FBRSxDQUFDLEVBQUUsQ0FBRSxDQUFDO0lBRXhDLE1BQU1DLGlCQUFpQixHQUFHLElBQUkzQixJQUFJLENBQ2hDdUIsU0FBUyxFQUFFO01BQ1RLLE1BQU0sRUFBRXBCLHVCQUF1QixDQUFDcUIsa0JBQWtCO01BQ2xEQyxTQUFTLEVBQUU7SUFDYixDQUFFLENBQUM7SUFFTCxNQUFNQyxrQkFBa0IsR0FBR0EsQ0FBRUMsSUFBWSxFQUFFQyxPQUF3QixHQUFHLENBQUMsQ0FBQyxLQUFNO01BQzVFLE9BQU8zQixjQUFjLENBQW1CMkIsT0FBTyxFQUFFeEIsMEJBQTBCLENBQUN5QixnQkFBZ0IsRUFBRTtRQUM1RkMsTUFBTSxFQUFFYixlQUFlLENBQUNhLE1BQU0sQ0FBQ0MsWUFBWSxDQUFFSixJQUFLO01BQ3BELENBQUUsQ0FBQztJQUNMLENBQUM7SUFFRCxNQUFNSyxjQUFjLEdBQUdBLENBQ3JCQyxRQUFtQyxFQUNuQ0MsSUFBK0IsRUFDL0JDLFVBQWtCLEVBQ2xCQyxJQUFVLEdBQUcsSUFBSTFDLElBQUksQ0FBQyxDQUFDLEVBQ3ZCa0MsT0FBeUIsS0FDdEI7TUFDSCxPQUFPLElBQUk5QixRQUFRLENBQUVtQyxRQUFRLEVBQUUsSUFBSXpDLElBQUksQ0FBRTtRQUN2QzZDLFFBQVEsRUFBRSxDQUNSLElBQUl6QyxJQUFJLENBQUVzQyxJQUFJLEVBQUU5QiwwQkFBMEIsQ0FBQ2tDLFlBQWEsQ0FBQyxFQUN6REYsSUFBSSxDQUNMO1FBQ0RHLE9BQU8sRUFBRTtNQUNYLENBQUUsQ0FBQyxFQUFFYixrQkFBa0IsQ0FBRVMsVUFBVSxFQUFFUCxPQUFRLENBQUUsQ0FBQztJQUNsRCxDQUFDO0lBRUQsTUFBTVksZ0JBQWdCLEdBQUcsQ0FDdkJSLGNBQWMsQ0FDWmhCLEtBQUssQ0FBQ3lCLG1CQUFtQixFQUN6QjFDLGtCQUFrQixDQUFDMkMsa0JBQWtCLEVBQ3JDLHFCQUFxQixFQUNyQixJQUFJakQsS0FBSyxDQUFFZSxZQUFZLEVBQUVJLFlBQWEsQ0FDeEMsQ0FBQyxFQUNELElBQUlyQixRQUFRLENBQ1Z5QyxjQUFjLENBQ1poQixLQUFLLENBQUMyQixzQkFBc0IsRUFDNUI1QyxrQkFBa0IsQ0FBQzZDLHFCQUFxQixFQUN4Qyx3QkFBd0IsRUFDeEIsSUFBSW5ELEtBQUssQ0FBRWdCLGVBQWUsRUFBRUcsWUFBYSxDQUFDLEVBQzFDO01BQ0VpQyxlQUFlLEVBQUU3QixLQUFLLENBQUN5QjtJQUN6QixDQUNGLENBQUMsRUFBRTtNQUNESyxVQUFVLEVBQUUsRUFBRTtNQUNkQyxhQUFhLEVBQUU7UUFBRUMsT0FBTyxFQUFFO01BQUs7SUFDakMsQ0FBRSxDQUFDLEVBQ0xoQixjQUFjLENBQ1poQixLQUFLLENBQUNpQyxtQkFBbUIsRUFDekJsRCxrQkFBa0IsQ0FBQ21ELGtCQUFrQixFQUNyQyxxQkFBcUIsRUFDckI1QixpQkFDRixDQUFDLEVBQ0QsSUFBSS9CLFFBQVEsQ0FDVnlDLGNBQWMsQ0FDWmhCLEtBQUssQ0FBQ21DLHVCQUF1QixFQUM3QnBELGtCQUFrQixDQUFDcUQsc0JBQXNCLEVBQ3pDLHlCQUF5QixFQUN6QixJQUFJM0QsS0FBSyxDQUFFYSxnQkFBZ0IsRUFBRU0sWUFBYSxDQUFDLEVBQzNDO01BQ0VpQyxlQUFlLEVBQUU3QixLQUFLLENBQUNpQztJQUN6QixDQUNGLENBQUMsRUFBRTtNQUNESCxVQUFVLEVBQUUsRUFBRTtNQUNkQyxhQUFhLEVBQUU7UUFBRUMsT0FBTyxFQUFFO01BQUs7SUFDakMsQ0FBRSxDQUFDLEVBQ0xoQixjQUFjLENBQ1poQixLQUFLLENBQUNxQywyQkFBMkIsRUFDakN0RCxrQkFBa0IsQ0FBQ3VELDBCQUEwQixFQUM3Qyw2QkFBNkIsRUFDN0IsSUFBSTdELEtBQUssQ0FBRWMsb0JBQW9CLEVBQUVLLFlBQWEsQ0FDaEQsQ0FBQyxDQUNGO0lBRUQsTUFBTTJDLGlCQUFpQixHQUFHLENBQ3hCdkIsY0FBYyxDQUNaaEIsS0FBSyxDQUFDd0MsdUJBQXVCLEVBQzdCekQsa0JBQWtCLENBQUMwRCxzQkFBc0IsRUFDekMseUJBQXlCLEVBQ3pCLElBQUl2RCxLQUFLLENBQUU7TUFDVHdELElBQUksRUFBRXZELHVCQUF1QixDQUFDd0Qsc0JBQXNCO01BQ3BEcEMsTUFBTSxFQUFFcEIsdUJBQXVCLENBQUNxQixrQkFBa0I7TUFDbERYLEtBQUssRUFBRTtJQUNULENBQUUsQ0FBQyxFQUNIO01BQ0VnQyxlQUFlLEVBQUUsSUFBSW5DLGVBQWUsQ0FBRSxDQUFFTSxLQUFLLENBQUM0QyxNQUFNLENBQUNDLG9CQUFvQixDQUFFLEVBQ3pFQyxDQUFDLElBQUlBLENBQUMsR0FBRyxDQUFFO0lBQ2YsQ0FDRixDQUFDLEVBQ0Q5QixjQUFjLENBQ1poQixLQUFLLENBQUMrQyx3QkFBd0IsRUFDOUJoRSxrQkFBa0IsQ0FBQ2lFLHVCQUF1QjtJQUMxQztJQUNBO0lBQ0EsMkJBQTJCLEVBQzNCLElBQUk5RCxLQUFLLENBQUU7TUFDVHdELElBQUksRUFBRSxNQUFNO01BQ1puQyxNQUFNLEVBQUVwQix1QkFBdUIsQ0FBQ3FCLGtCQUFrQjtNQUNsRFgsS0FBSyxFQUFFO0lBQ1QsQ0FBRSxDQUFDLEVBQ0g7TUFDRWdDLGVBQWUsRUFBRSxJQUFJbkMsZUFBZSxDQUFFLENBQUVNLEtBQUssQ0FBQzRDLE1BQU0sQ0FBQ0Msb0JBQW9CLENBQUUsRUFDekVDLENBQUMsSUFBSUEsQ0FBQyxHQUFHLENBQUU7SUFDZixDQUNGLENBQUMsQ0FDRjtJQUVELE1BQU1HLGdCQUFnQixHQUFHLENBQ3ZCakMsY0FBYyxDQUNaaEIsS0FBSyxDQUFDa0QsNEJBQTRCLEVBQ2xDbkUsa0JBQWtCLENBQUNvRSxLQUFLLENBQUNDLGVBQWUsRUFDeEM7SUFDQTtJQUNGLENBQUMsRUFDRHBDLGNBQWMsQ0FDWmhCLEtBQUssQ0FBQ3FELHFCQUFxQixFQUMzQnRFLGtCQUFrQixDQUFDb0UsS0FBSyxDQUFDRyxlQUFlLEVBQ3hDO0lBQ0E7SUFDRixDQUFDLENBQ0Y7O0lBRUQsS0FBSyxDQUFFdEUsU0FBUyxDQUFpRSxDQUFDLENBQUU7TUFDbEZ1QyxPQUFPLEVBQUUsQ0FBQztNQUNWZ0MsS0FBSyxFQUFFLE1BQU07TUFDYnZCLE9BQU8sRUFBRTtJQUNYLENBQUMsRUFBRS9CLGVBQWdCLENBQUUsQ0FBQztJQUV0QkQsS0FBSyxDQUFDd0QsaUJBQWlCLENBQUNDLFdBQVcsQ0FBRSxNQUFNO01BQ3pDLElBQUksQ0FBQ3BDLFFBQVEsR0FBRyxDQUNkLElBQUtyQixLQUFLLENBQUMwRCxrQkFBa0IsQ0FBQ0MsS0FBSyxHQUFHbkMsZ0JBQWdCLEdBQ2pEeEIsS0FBSyxDQUFDNEQsbUJBQW1CLENBQUNELEtBQUssR0FBR3BCLGlCQUFpQixHQUNuRHZDLEtBQUssQ0FBQzZELGtCQUFrQixDQUFDRixLQUFLLEdBQUdWLGdCQUFnQixHQUFHLEVBQUUsQ0FBRSxDQUM5RDtJQUNILENBQUUsQ0FBQztJQUVIakQsS0FBSyxDQUFDd0QsaUJBQWlCLENBQUNNLElBQUksQ0FBQyxDQUFDO0VBQ2hDO0FBQ0Y7QUFFQW5FLFdBQVcsQ0FBQ29FLFFBQVEsQ0FBRSxrQ0FBa0MsRUFBRWpFLGdDQUFpQyxDQUFDO0FBQzVGLGVBQWVBLGdDQUFnQyJ9