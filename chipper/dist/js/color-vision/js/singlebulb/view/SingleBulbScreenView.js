// Copyright 2014-2023, University of Colorado Boulder

/**
 * View for the 'Single Bulb' screen.
 *
 * @author Aaron Davis (PhET Interactive Simulations)
 * @author Sam Reid (PhET Interactive Simulations)
 */

import Bounds2 from '../../../../dot/js/Bounds2.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import merge from '../../../../phet-core/js/merge.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import WavelengthSlider from '../../../../scenery-phet/js/WavelengthSlider.js';
import { Image, Text } from '../../../../scenery/js/imports.js';
import RectangularRadioButtonGroup from '../../../../sun/js/buttons/RectangularRadioButtonGroup.js';
import beamViewIcon_png from '../../../images/beamViewIcon_png.js';
import filterLeft_png from '../../../images/filterLeft_png.js';
import filterRight_png from '../../../images/filterRight_png.js';
import photonViewIcon_png from '../../../images/photonViewIcon_png.js';
import singleColorLightIcon_png from '../../../images/singleColorLightIcon_png.js';
import whiteLightIcon_png from '../../../images/whiteLightIcon_png.js';
import colorVision from '../../colorVision.js';
import ColorVisionStrings from '../../ColorVisionStrings.js';
import ColorVisionConstants from '../../common/ColorVisionConstants.js';
import ColorVisionScreenView from '../../common/view/ColorVisionScreenView.js';
import HeadNode from '../../common/view/HeadNode.js';
import SingleBulbConstants from '../SingleBulbConstants.js';
import FilterHalfEllipse from './FilterHalfEllipse.js';
import FilterWireNode from './FilterWireNode.js';
import FlashlightWireNode from './FlashlightWireNode.js';
import FlashlightWithButtonNode from './FlashlightWithButtonNode.js';
import GaussianWavelengthSlider from './GaussianWavelengthSlider.js';
import SingleBulbPhotonBeamNode from './SingleBulbPhotonBeamNode.js';
import SolidBeamNode from './SolidBeamNode.js';
const bulbSliderLabelString = ColorVisionStrings.bulbSlider.label;
const filterSliderLabelString = ColorVisionStrings.filterSlider.label;

// constants
const DISTANCE_FROM_FLASHLIGHT = 20;
const SLIDER_Y_OFFSET = 21;
const SLIDER_TRACK_WIDTH = 200;
const SLIDER_TRACK_HEIGHT = 30;
const PHOTON_BEAM_START = 320;
const ICON_OPTIONS = {
  scale: 0.74
}; // options common to all icon images

class SingleBulbScreenView extends ColorVisionScreenView {
  /**
   * @param {SingleBulbModel} model
   * @param {Tandem} tandem
   */
  constructor(model, tandem) {
    super(model, tandem);

    // constant for determining the distance of the wavelengthSlider from the right side of the screen
    const wavelengthSliderDistance = this.layoutBounds.maxX - 70;

    // Create flashlight node
    const flashlightNode = new FlashlightWithButtonNode(model.flashlightOnProperty, tandem.createTandem('flashlightNode'), {
      centerY: this.layoutBounds.centerY + ColorVisionConstants.CENTER_Y_OFFSET + 3,
      right: this.layoutBounds.maxX - 40
    });

    // Create upper WavelengthSlider node
    const bulbColorSlider = new WavelengthSlider(model.flashlightWavelengthProperty, {
      top: this.layoutBounds.top + 40,
      right: wavelengthSliderDistance,
      tweakersVisible: false,
      valueVisible: false,
      trackWidth: SLIDER_TRACK_WIDTH,
      trackHeight: SLIDER_TRACK_HEIGHT,
      cursorStroke: 'white',
      thumbWidth: 30,
      thumbHeight: 40,
      thumbTouchAreaYDilation: 10,
      trackBorderStroke: ColorVisionConstants.SLIDER_BORDER_STROKE,
      tandem: tandem.createTandem('bulbColorSlider')
    });

    // add text above the upper slider
    const bulbColorTextNode = new Text(bulbSliderLabelString, {
      fill: 'white',
      font: new PhetFont(20),
      bottom: bulbColorSlider.top - 3,
      right: bulbColorSlider.right - 18,
      maxWidth: 0.85 * bulbColorSlider.width,
      tandem: tandem.createTandem('bulbColorText')
    });
    this.pdomControlAreaNode.addChild(bulbColorTextNode);

    // Add wire from flashlight to WavelengthSlider
    const flashlightWire = new FlashlightWireNode(new Vector2(flashlightNode.right - 15, flashlightNode.centerY + 2), new Vector2(bulbColorSlider.right - 25, bulbColorSlider.centerY - SLIDER_Y_OFFSET), 25);

    // make bulb color slider invisible when on white light mode
    model.lightTypeProperty.link(lightType => {
      const coloredLight = lightType !== 'white';
      bulbColorSlider.visible = coloredLight;
      bulbColorTextNode.visible = coloredLight;
      flashlightWire.visible = coloredLight;
    });
    this.pdomControlAreaNode.addChild(flashlightWire);
    this.pdomControlAreaNode.addChild(bulbColorSlider);

    // options common to all RectangularRadioButtonGroups
    const radioButtonGroupOptions = merge({
      left: flashlightNode.left,
      radioButtonOptions: {
        xMargin: 2,
        yMargin: 2
      }
    }, ColorVisionConstants.RADIO_BUTTON_GROUP_OPTIONS);
    const whiteColoredButtonsContent = [{
      value: 'white',
      createNode: () => new Image(whiteLightIcon_png, ICON_OPTIONS),
      tandemName: 'whiteLightRadioButton'
    }, {
      value: 'colored',
      createNode: () => new Image(singleColorLightIcon_png, ICON_OPTIONS),
      tandemName: 'coloredLightRadioButton'
    }];
    const whiteColoredRadioButtonGroup = new RectangularRadioButtonGroup(model.lightTypeProperty, whiteColoredButtonsContent, merge({
      bottom: flashlightNode.top - DISTANCE_FROM_FLASHLIGHT,
      tandem: tandem.createTandem('whiteColoredRadioButtonGroup')
    }, radioButtonGroupOptions));
    const beamPhotonButtonsContent = [{
      value: 'beam',
      createNode: () => new Image(beamViewIcon_png, ICON_OPTIONS),
      tandemName: 'beamRadioButton'
    }, {
      value: 'photon',
      createNode: () => new Image(photonViewIcon_png, ICON_OPTIONS),
      tandemName: 'photonRadioButton'
    }];
    const beamPhotonRadioButtonGroup = new RectangularRadioButtonGroup(model.beamTypeProperty, beamPhotonButtonsContent, merge({
      top: flashlightNode.bottom + DISTANCE_FROM_FLASHLIGHT,
      tandem: tandem.createTandem('beamPhotonRadioButtonGroup')
    }, radioButtonGroupOptions));
    this.pdomControlAreaNode.addChild(whiteColoredRadioButtonGroup);
    this.pdomControlAreaNode.addChild(beamPhotonRadioButtonGroup);

    // right and left filters have the same image dimensions (while only taking up half of the image each),
    // so both can use the same option parameters and can be positioned the same and will match up perfectly
    const filterOptions = {
      centerY: this.layoutBounds.centerY + ColorVisionConstants.CENTER_Y_OFFSET,
      scale: 0.7,
      right: flashlightNode.left - 100
    };

    // Add the circular filter images into the scene
    // Note: In Chrome, there is a 1px wide white line that can been seen separating the two image halves,
    // seen in both Windows and OSX. So far, it has seemed minor enough to ignore.
    const filterLeftNode = new Image(filterLeft_png, filterOptions);
    const filterRightNode = new Image(filterRight_png, filterOptions);
    model.filterVisibleProperty.linkAttribute(filterLeftNode, 'visible');
    model.filterVisibleProperty.linkAttribute(filterRightNode, 'visible');

    // tell the photon beam model where the filter position is
    model.photonBeam.filterOffset = filterLeftNode.centerX - PHOTON_BEAM_START;

    // Create photonBeam node
    // @private
    this.photonBeamNode = new SingleBulbPhotonBeamNode(model, tandem.createTandem('photonBeamNode'), {
      canvasBounds: new Bounds2(0, 0, SingleBulbConstants.SINGLE_BEAM_LENGTH, ColorVisionConstants.BEAM_HEIGHT),
      x: PHOTON_BEAM_START
    });
    this.photonBeamNode.centerY = this.layoutBounds.centerY + ColorVisionConstants.CENTER_Y_OFFSET;

    // Create gaussian wavelength slider for controlling the filter color
    const gaussianSlider = new GaussianWavelengthSlider(model.filterWavelengthProperty, SLIDER_TRACK_WIDTH, SLIDER_TRACK_HEIGHT, tandem.createTandem('gaussianSlider'), {
      bottom: this.layoutBounds.bottom - 20,
      right: wavelengthSliderDistance
    });

    // Add the text above the gaussian wavelength slider
    const filterColorText = new Text(filterSliderLabelString, {
      fill: 'white',
      font: new PhetFont(20),
      bottom: gaussianSlider.top - 3,
      right: gaussianSlider.right - 18,
      maxWidth: 0.85 * gaussianSlider.width,
      tandem: tandem.createTandem('filterColorText')
    });
    this.pdomControlAreaNode.addChild(filterColorText);

    // Add the wire from the slider to the filter
    const filterWireNode = new FilterWireNode(model.filterVisibleProperty, new Vector2(filterLeftNode.centerX, filterLeftNode.bottom), new Vector2(gaussianSlider.left + 16, gaussianSlider.centerY - SLIDER_Y_OFFSET), tandem.createTandem('filterWireNode'));
    this.pdomControlAreaNode.addChild(filterWireNode);
    this.pdomControlAreaNode.addChild(gaussianSlider);

    // Left half of the filter
    const filterLeft = new FilterHalfEllipse(model.filterWavelengthProperty, model.filterVisibleProperty, filterLeftNode.centerX + 1, filterLeftNode.centerY, filterLeftNode.width / 2 - 13, filterLeftNode.height / 2 - 12, true);

    // Right half of the filter
    const filterRight = new FilterHalfEllipse(model.filterWavelengthProperty, model.filterVisibleProperty, filterLeftNode.centerX - 1, filterLeftNode.centerY, filterLeftNode.width / 2 - 13, filterLeftNode.height / 2 - 12, false);

    // bounds for the solid beam view
    const beamBounds = new Bounds2(filterLeft.left - 130, this.layoutBounds.centerY + ColorVisionConstants.CENTER_Y_OFFSET + 54, flashlightNode.left + 15, this.layoutBounds.centerY + ColorVisionConstants.CENTER_Y_OFFSET - 48);
    const solidBeam = new SolidBeamNode(model, beamBounds, filterLeftNode.centerX);

    // Add right side of filter before the solid beam and the left side
    this.pdomControlAreaNode.addChild(filterRightNode);
    this.pdomControlAreaNode.addChild(filterRight);

    // Add the head node and solid and photon beams above the right side of the filter so they show up on top
    const headNode = new HeadNode(model.headModeProperty, this.layoutBounds.bottom, [solidBeam, this.photonBeamNode], tandem.createTandem('headNode'));
    this.pdomControlAreaNode.addChild(headNode);

    // Add the left side of the filter above the beams so it appears to pass behind
    this.pdomControlAreaNode.addChild(filterLeftNode);
    this.pdomControlAreaNode.addChild(filterLeft);

    // flashlight is added after the beams so it covers up the beginning of the beam
    this.pdomControlAreaNode.addChild(flashlightNode);

    // set the tab navigation order
    this.pdomControlAreaNode.pdomOrder = [flashlightNode, bulbColorSlider, whiteColoredRadioButtonGroup, beamPhotonRadioButtonGroup, filterWireNode, gaussianSlider, headNode, this.timeControlNode, this.resetAllButton];
  }

  // @public
  step(dt) {
    // Cap dt, see https://github.com/phetsims/color-vision/issues/115 and https://github.com/phetsims/joist/issues/130
    dt = Math.min(dt, 0.5);
    this.photonBeamNode.step(dt);
  }
}
colorVision.register('SingleBulbScreenView', SingleBulbScreenView);
export default SingleBulbScreenView;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb3VuZHMyIiwiVmVjdG9yMiIsIm1lcmdlIiwiUGhldEZvbnQiLCJXYXZlbGVuZ3RoU2xpZGVyIiwiSW1hZ2UiLCJUZXh0IiwiUmVjdGFuZ3VsYXJSYWRpb0J1dHRvbkdyb3VwIiwiYmVhbVZpZXdJY29uX3BuZyIsImZpbHRlckxlZnRfcG5nIiwiZmlsdGVyUmlnaHRfcG5nIiwicGhvdG9uVmlld0ljb25fcG5nIiwic2luZ2xlQ29sb3JMaWdodEljb25fcG5nIiwid2hpdGVMaWdodEljb25fcG5nIiwiY29sb3JWaXNpb24iLCJDb2xvclZpc2lvblN0cmluZ3MiLCJDb2xvclZpc2lvbkNvbnN0YW50cyIsIkNvbG9yVmlzaW9uU2NyZWVuVmlldyIsIkhlYWROb2RlIiwiU2luZ2xlQnVsYkNvbnN0YW50cyIsIkZpbHRlckhhbGZFbGxpcHNlIiwiRmlsdGVyV2lyZU5vZGUiLCJGbGFzaGxpZ2h0V2lyZU5vZGUiLCJGbGFzaGxpZ2h0V2l0aEJ1dHRvbk5vZGUiLCJHYXVzc2lhbldhdmVsZW5ndGhTbGlkZXIiLCJTaW5nbGVCdWxiUGhvdG9uQmVhbU5vZGUiLCJTb2xpZEJlYW1Ob2RlIiwiYnVsYlNsaWRlckxhYmVsU3RyaW5nIiwiYnVsYlNsaWRlciIsImxhYmVsIiwiZmlsdGVyU2xpZGVyTGFiZWxTdHJpbmciLCJmaWx0ZXJTbGlkZXIiLCJESVNUQU5DRV9GUk9NX0ZMQVNITElHSFQiLCJTTElERVJfWV9PRkZTRVQiLCJTTElERVJfVFJBQ0tfV0lEVEgiLCJTTElERVJfVFJBQ0tfSEVJR0hUIiwiUEhPVE9OX0JFQU1fU1RBUlQiLCJJQ09OX09QVElPTlMiLCJzY2FsZSIsIlNpbmdsZUJ1bGJTY3JlZW5WaWV3IiwiY29uc3RydWN0b3IiLCJtb2RlbCIsInRhbmRlbSIsIndhdmVsZW5ndGhTbGlkZXJEaXN0YW5jZSIsImxheW91dEJvdW5kcyIsIm1heFgiLCJmbGFzaGxpZ2h0Tm9kZSIsImZsYXNobGlnaHRPblByb3BlcnR5IiwiY3JlYXRlVGFuZGVtIiwiY2VudGVyWSIsIkNFTlRFUl9ZX09GRlNFVCIsInJpZ2h0IiwiYnVsYkNvbG9yU2xpZGVyIiwiZmxhc2hsaWdodFdhdmVsZW5ndGhQcm9wZXJ0eSIsInRvcCIsInR3ZWFrZXJzVmlzaWJsZSIsInZhbHVlVmlzaWJsZSIsInRyYWNrV2lkdGgiLCJ0cmFja0hlaWdodCIsImN1cnNvclN0cm9rZSIsInRodW1iV2lkdGgiLCJ0aHVtYkhlaWdodCIsInRodW1iVG91Y2hBcmVhWURpbGF0aW9uIiwidHJhY2tCb3JkZXJTdHJva2UiLCJTTElERVJfQk9SREVSX1NUUk9LRSIsImJ1bGJDb2xvclRleHROb2RlIiwiZmlsbCIsImZvbnQiLCJib3R0b20iLCJtYXhXaWR0aCIsIndpZHRoIiwicGRvbUNvbnRyb2xBcmVhTm9kZSIsImFkZENoaWxkIiwiZmxhc2hsaWdodFdpcmUiLCJsaWdodFR5cGVQcm9wZXJ0eSIsImxpbmsiLCJsaWdodFR5cGUiLCJjb2xvcmVkTGlnaHQiLCJ2aXNpYmxlIiwicmFkaW9CdXR0b25Hcm91cE9wdGlvbnMiLCJsZWZ0IiwicmFkaW9CdXR0b25PcHRpb25zIiwieE1hcmdpbiIsInlNYXJnaW4iLCJSQURJT19CVVRUT05fR1JPVVBfT1BUSU9OUyIsIndoaXRlQ29sb3JlZEJ1dHRvbnNDb250ZW50IiwidmFsdWUiLCJjcmVhdGVOb2RlIiwidGFuZGVtTmFtZSIsIndoaXRlQ29sb3JlZFJhZGlvQnV0dG9uR3JvdXAiLCJiZWFtUGhvdG9uQnV0dG9uc0NvbnRlbnQiLCJiZWFtUGhvdG9uUmFkaW9CdXR0b25Hcm91cCIsImJlYW1UeXBlUHJvcGVydHkiLCJmaWx0ZXJPcHRpb25zIiwiZmlsdGVyTGVmdE5vZGUiLCJmaWx0ZXJSaWdodE5vZGUiLCJmaWx0ZXJWaXNpYmxlUHJvcGVydHkiLCJsaW5rQXR0cmlidXRlIiwicGhvdG9uQmVhbSIsImZpbHRlck9mZnNldCIsImNlbnRlclgiLCJwaG90b25CZWFtTm9kZSIsImNhbnZhc0JvdW5kcyIsIlNJTkdMRV9CRUFNX0xFTkdUSCIsIkJFQU1fSEVJR0hUIiwieCIsImdhdXNzaWFuU2xpZGVyIiwiZmlsdGVyV2F2ZWxlbmd0aFByb3BlcnR5IiwiZmlsdGVyQ29sb3JUZXh0IiwiZmlsdGVyV2lyZU5vZGUiLCJmaWx0ZXJMZWZ0IiwiaGVpZ2h0IiwiZmlsdGVyUmlnaHQiLCJiZWFtQm91bmRzIiwic29saWRCZWFtIiwiaGVhZE5vZGUiLCJoZWFkTW9kZVByb3BlcnR5IiwicGRvbU9yZGVyIiwidGltZUNvbnRyb2xOb2RlIiwicmVzZXRBbGxCdXR0b24iLCJzdGVwIiwiZHQiLCJNYXRoIiwibWluIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJTaW5nbGVCdWxiU2NyZWVuVmlldy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNC0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBWaWV3IGZvciB0aGUgJ1NpbmdsZSBCdWxiJyBzY3JlZW4uXHJcbiAqXHJcbiAqIEBhdXRob3IgQWFyb24gRGF2aXMgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IEJvdW5kczIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL0JvdW5kczIuanMnO1xyXG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVmVjdG9yMi5qcyc7XHJcbmltcG9ydCBtZXJnZSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvbWVyZ2UuanMnO1xyXG5pbXBvcnQgUGhldEZvbnQgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1BoZXRGb250LmpzJztcclxuaW1wb3J0IFdhdmVsZW5ndGhTbGlkZXIgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1dhdmVsZW5ndGhTbGlkZXIuanMnO1xyXG5pbXBvcnQgeyBJbWFnZSwgVGV4dCB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBSZWN0YW5ndWxhclJhZGlvQnV0dG9uR3JvdXAgZnJvbSAnLi4vLi4vLi4vLi4vc3VuL2pzL2J1dHRvbnMvUmVjdGFuZ3VsYXJSYWRpb0J1dHRvbkdyb3VwLmpzJztcclxuaW1wb3J0IGJlYW1WaWV3SWNvbl9wbmcgZnJvbSAnLi4vLi4vLi4vaW1hZ2VzL2JlYW1WaWV3SWNvbl9wbmcuanMnO1xyXG5pbXBvcnQgZmlsdGVyTGVmdF9wbmcgZnJvbSAnLi4vLi4vLi4vaW1hZ2VzL2ZpbHRlckxlZnRfcG5nLmpzJztcclxuaW1wb3J0IGZpbHRlclJpZ2h0X3BuZyBmcm9tICcuLi8uLi8uLi9pbWFnZXMvZmlsdGVyUmlnaHRfcG5nLmpzJztcclxuaW1wb3J0IHBob3RvblZpZXdJY29uX3BuZyBmcm9tICcuLi8uLi8uLi9pbWFnZXMvcGhvdG9uVmlld0ljb25fcG5nLmpzJztcclxuaW1wb3J0IHNpbmdsZUNvbG9yTGlnaHRJY29uX3BuZyBmcm9tICcuLi8uLi8uLi9pbWFnZXMvc2luZ2xlQ29sb3JMaWdodEljb25fcG5nLmpzJztcclxuaW1wb3J0IHdoaXRlTGlnaHRJY29uX3BuZyBmcm9tICcuLi8uLi8uLi9pbWFnZXMvd2hpdGVMaWdodEljb25fcG5nLmpzJztcclxuaW1wb3J0IGNvbG9yVmlzaW9uIGZyb20gJy4uLy4uL2NvbG9yVmlzaW9uLmpzJztcclxuaW1wb3J0IENvbG9yVmlzaW9uU3RyaW5ncyBmcm9tICcuLi8uLi9Db2xvclZpc2lvblN0cmluZ3MuanMnO1xyXG5pbXBvcnQgQ29sb3JWaXNpb25Db25zdGFudHMgZnJvbSAnLi4vLi4vY29tbW9uL0NvbG9yVmlzaW9uQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IENvbG9yVmlzaW9uU2NyZWVuVmlldyBmcm9tICcuLi8uLi9jb21tb24vdmlldy9Db2xvclZpc2lvblNjcmVlblZpZXcuanMnO1xyXG5pbXBvcnQgSGVhZE5vZGUgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvSGVhZE5vZGUuanMnO1xyXG5pbXBvcnQgU2luZ2xlQnVsYkNvbnN0YW50cyBmcm9tICcuLi9TaW5nbGVCdWxiQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IEZpbHRlckhhbGZFbGxpcHNlIGZyb20gJy4vRmlsdGVySGFsZkVsbGlwc2UuanMnO1xyXG5pbXBvcnQgRmlsdGVyV2lyZU5vZGUgZnJvbSAnLi9GaWx0ZXJXaXJlTm9kZS5qcyc7XHJcbmltcG9ydCBGbGFzaGxpZ2h0V2lyZU5vZGUgZnJvbSAnLi9GbGFzaGxpZ2h0V2lyZU5vZGUuanMnO1xyXG5pbXBvcnQgRmxhc2hsaWdodFdpdGhCdXR0b25Ob2RlIGZyb20gJy4vRmxhc2hsaWdodFdpdGhCdXR0b25Ob2RlLmpzJztcclxuaW1wb3J0IEdhdXNzaWFuV2F2ZWxlbmd0aFNsaWRlciBmcm9tICcuL0dhdXNzaWFuV2F2ZWxlbmd0aFNsaWRlci5qcyc7XHJcbmltcG9ydCBTaW5nbGVCdWxiUGhvdG9uQmVhbU5vZGUgZnJvbSAnLi9TaW5nbGVCdWxiUGhvdG9uQmVhbU5vZGUuanMnO1xyXG5pbXBvcnQgU29saWRCZWFtTm9kZSBmcm9tICcuL1NvbGlkQmVhbU5vZGUuanMnO1xyXG5cclxuY29uc3QgYnVsYlNsaWRlckxhYmVsU3RyaW5nID0gQ29sb3JWaXNpb25TdHJpbmdzLmJ1bGJTbGlkZXIubGFiZWw7XHJcbmNvbnN0IGZpbHRlclNsaWRlckxhYmVsU3RyaW5nID0gQ29sb3JWaXNpb25TdHJpbmdzLmZpbHRlclNsaWRlci5sYWJlbDtcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBESVNUQU5DRV9GUk9NX0ZMQVNITElHSFQgPSAyMDtcclxuY29uc3QgU0xJREVSX1lfT0ZGU0VUID0gMjE7XHJcbmNvbnN0IFNMSURFUl9UUkFDS19XSURUSCA9IDIwMDtcclxuY29uc3QgU0xJREVSX1RSQUNLX0hFSUdIVCA9IDMwO1xyXG5jb25zdCBQSE9UT05fQkVBTV9TVEFSVCA9IDMyMDtcclxuY29uc3QgSUNPTl9PUFRJT05TID0geyBzY2FsZTogMC43NCB9OyAvLyBvcHRpb25zIGNvbW1vbiB0byBhbGwgaWNvbiBpbWFnZXNcclxuXHJcbmNsYXNzIFNpbmdsZUJ1bGJTY3JlZW5WaWV3IGV4dGVuZHMgQ29sb3JWaXNpb25TY3JlZW5WaWV3IHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtTaW5nbGVCdWxiTW9kZWx9IG1vZGVsXHJcbiAgICogQHBhcmFtIHtUYW5kZW19IHRhbmRlbVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBtb2RlbCwgdGFuZGVtICkge1xyXG5cclxuICAgIHN1cGVyKCBtb2RlbCwgdGFuZGVtICk7XHJcblxyXG4gICAgLy8gY29uc3RhbnQgZm9yIGRldGVybWluaW5nIHRoZSBkaXN0YW5jZSBvZiB0aGUgd2F2ZWxlbmd0aFNsaWRlciBmcm9tIHRoZSByaWdodCBzaWRlIG9mIHRoZSBzY3JlZW5cclxuICAgIGNvbnN0IHdhdmVsZW5ndGhTbGlkZXJEaXN0YW5jZSA9IHRoaXMubGF5b3V0Qm91bmRzLm1heFggLSA3MDtcclxuXHJcbiAgICAvLyBDcmVhdGUgZmxhc2hsaWdodCBub2RlXHJcbiAgICBjb25zdCBmbGFzaGxpZ2h0Tm9kZSA9IG5ldyBGbGFzaGxpZ2h0V2l0aEJ1dHRvbk5vZGUoIG1vZGVsLmZsYXNobGlnaHRPblByb3BlcnR5LCB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnZmxhc2hsaWdodE5vZGUnICksIHtcclxuICAgICAgY2VudGVyWTogdGhpcy5sYXlvdXRCb3VuZHMuY2VudGVyWSArIENvbG9yVmlzaW9uQ29uc3RhbnRzLkNFTlRFUl9ZX09GRlNFVCArIDMsXHJcbiAgICAgIHJpZ2h0OiB0aGlzLmxheW91dEJvdW5kcy5tYXhYIC0gNDBcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgdXBwZXIgV2F2ZWxlbmd0aFNsaWRlciBub2RlXHJcbiAgICBjb25zdCBidWxiQ29sb3JTbGlkZXIgPSBuZXcgV2F2ZWxlbmd0aFNsaWRlciggbW9kZWwuZmxhc2hsaWdodFdhdmVsZW5ndGhQcm9wZXJ0eSwge1xyXG4gICAgICB0b3A6IHRoaXMubGF5b3V0Qm91bmRzLnRvcCArIDQwLFxyXG4gICAgICByaWdodDogd2F2ZWxlbmd0aFNsaWRlckRpc3RhbmNlLFxyXG4gICAgICB0d2Vha2Vyc1Zpc2libGU6IGZhbHNlLFxyXG4gICAgICB2YWx1ZVZpc2libGU6IGZhbHNlLFxyXG4gICAgICB0cmFja1dpZHRoOiBTTElERVJfVFJBQ0tfV0lEVEgsXHJcbiAgICAgIHRyYWNrSGVpZ2h0OiBTTElERVJfVFJBQ0tfSEVJR0hULFxyXG4gICAgICBjdXJzb3JTdHJva2U6ICd3aGl0ZScsXHJcbiAgICAgIHRodW1iV2lkdGg6IDMwLFxyXG4gICAgICB0aHVtYkhlaWdodDogNDAsXHJcbiAgICAgIHRodW1iVG91Y2hBcmVhWURpbGF0aW9uOiAxMCxcclxuICAgICAgdHJhY2tCb3JkZXJTdHJva2U6IENvbG9yVmlzaW9uQ29uc3RhbnRzLlNMSURFUl9CT1JERVJfU1RST0tFLFxyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdidWxiQ29sb3JTbGlkZXInIClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBhZGQgdGV4dCBhYm92ZSB0aGUgdXBwZXIgc2xpZGVyXHJcbiAgICBjb25zdCBidWxiQ29sb3JUZXh0Tm9kZSA9IG5ldyBUZXh0KCBidWxiU2xpZGVyTGFiZWxTdHJpbmcsIHtcclxuICAgICAgZmlsbDogJ3doaXRlJyxcclxuICAgICAgZm9udDogbmV3IFBoZXRGb250KCAyMCApLFxyXG4gICAgICBib3R0b206IGJ1bGJDb2xvclNsaWRlci50b3AgLSAzLFxyXG4gICAgICByaWdodDogYnVsYkNvbG9yU2xpZGVyLnJpZ2h0IC0gMTgsXHJcbiAgICAgIG1heFdpZHRoOiAwLjg1ICogYnVsYkNvbG9yU2xpZGVyLndpZHRoLFxyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdidWxiQ29sb3JUZXh0JyApXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLnBkb21Db250cm9sQXJlYU5vZGUuYWRkQ2hpbGQoIGJ1bGJDb2xvclRleHROb2RlICk7XHJcblxyXG4gICAgLy8gQWRkIHdpcmUgZnJvbSBmbGFzaGxpZ2h0IHRvIFdhdmVsZW5ndGhTbGlkZXJcclxuICAgIGNvbnN0IGZsYXNobGlnaHRXaXJlID0gbmV3IEZsYXNobGlnaHRXaXJlTm9kZShcclxuICAgICAgbmV3IFZlY3RvcjIoIGZsYXNobGlnaHROb2RlLnJpZ2h0IC0gMTUsIGZsYXNobGlnaHROb2RlLmNlbnRlclkgKyAyICksXHJcbiAgICAgIG5ldyBWZWN0b3IyKCBidWxiQ29sb3JTbGlkZXIucmlnaHQgLSAyNSwgYnVsYkNvbG9yU2xpZGVyLmNlbnRlclkgLSBTTElERVJfWV9PRkZTRVQgKSxcclxuICAgICAgMjUgKTtcclxuXHJcbiAgICAvLyBtYWtlIGJ1bGIgY29sb3Igc2xpZGVyIGludmlzaWJsZSB3aGVuIG9uIHdoaXRlIGxpZ2h0IG1vZGVcclxuICAgIG1vZGVsLmxpZ2h0VHlwZVByb3BlcnR5LmxpbmsoIGxpZ2h0VHlwZSA9PiB7XHJcbiAgICAgIGNvbnN0IGNvbG9yZWRMaWdodCA9IGxpZ2h0VHlwZSAhPT0gJ3doaXRlJztcclxuICAgICAgYnVsYkNvbG9yU2xpZGVyLnZpc2libGUgPSBjb2xvcmVkTGlnaHQ7XHJcbiAgICAgIGJ1bGJDb2xvclRleHROb2RlLnZpc2libGUgPSBjb2xvcmVkTGlnaHQ7XHJcbiAgICAgIGZsYXNobGlnaHRXaXJlLnZpc2libGUgPSBjb2xvcmVkTGlnaHQ7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5wZG9tQ29udHJvbEFyZWFOb2RlLmFkZENoaWxkKCBmbGFzaGxpZ2h0V2lyZSApO1xyXG4gICAgdGhpcy5wZG9tQ29udHJvbEFyZWFOb2RlLmFkZENoaWxkKCBidWxiQ29sb3JTbGlkZXIgKTtcclxuXHJcbiAgICAvLyBvcHRpb25zIGNvbW1vbiB0byBhbGwgUmVjdGFuZ3VsYXJSYWRpb0J1dHRvbkdyb3Vwc1xyXG4gICAgY29uc3QgcmFkaW9CdXR0b25Hcm91cE9wdGlvbnMgPSBtZXJnZSgge1xyXG4gICAgICBsZWZ0OiBmbGFzaGxpZ2h0Tm9kZS5sZWZ0LFxyXG4gICAgICByYWRpb0J1dHRvbk9wdGlvbnM6IHtcclxuICAgICAgICB4TWFyZ2luOiAyLFxyXG4gICAgICAgIHlNYXJnaW46IDJcclxuICAgICAgfVxyXG4gICAgfSwgQ29sb3JWaXNpb25Db25zdGFudHMuUkFESU9fQlVUVE9OX0dST1VQX09QVElPTlMgKTtcclxuXHJcbiAgICBjb25zdCB3aGl0ZUNvbG9yZWRCdXR0b25zQ29udGVudCA9IFsge1xyXG4gICAgICB2YWx1ZTogJ3doaXRlJyxcclxuICAgICAgY3JlYXRlTm9kZTogKCkgPT4gbmV3IEltYWdlKCB3aGl0ZUxpZ2h0SWNvbl9wbmcsIElDT05fT1BUSU9OUyApLFxyXG4gICAgICB0YW5kZW1OYW1lOiAnd2hpdGVMaWdodFJhZGlvQnV0dG9uJ1xyXG4gICAgfSwge1xyXG4gICAgICB2YWx1ZTogJ2NvbG9yZWQnLFxyXG4gICAgICBjcmVhdGVOb2RlOiAoKSA9PiBuZXcgSW1hZ2UoIHNpbmdsZUNvbG9yTGlnaHRJY29uX3BuZywgSUNPTl9PUFRJT05TICksXHJcbiAgICAgIHRhbmRlbU5hbWU6ICdjb2xvcmVkTGlnaHRSYWRpb0J1dHRvbidcclxuICAgIH0gXTtcclxuXHJcbiAgICBjb25zdCB3aGl0ZUNvbG9yZWRSYWRpb0J1dHRvbkdyb3VwID0gbmV3IFJlY3Rhbmd1bGFyUmFkaW9CdXR0b25Hcm91cCggbW9kZWwubGlnaHRUeXBlUHJvcGVydHksIHdoaXRlQ29sb3JlZEJ1dHRvbnNDb250ZW50LFxyXG4gICAgICBtZXJnZSgge1xyXG4gICAgICAgIGJvdHRvbTogZmxhc2hsaWdodE5vZGUudG9wIC0gRElTVEFOQ0VfRlJPTV9GTEFTSExJR0hULFxyXG4gICAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3doaXRlQ29sb3JlZFJhZGlvQnV0dG9uR3JvdXAnIClcclxuICAgICAgfSwgcmFkaW9CdXR0b25Hcm91cE9wdGlvbnMgKVxyXG4gICAgKTtcclxuXHJcbiAgICBjb25zdCBiZWFtUGhvdG9uQnV0dG9uc0NvbnRlbnQgPSBbIHtcclxuICAgICAgdmFsdWU6ICdiZWFtJyxcclxuICAgICAgY3JlYXRlTm9kZTogKCkgPT4gbmV3IEltYWdlKCBiZWFtVmlld0ljb25fcG5nLCBJQ09OX09QVElPTlMgKSxcclxuICAgICAgdGFuZGVtTmFtZTogJ2JlYW1SYWRpb0J1dHRvbidcclxuICAgIH0sIHtcclxuICAgICAgdmFsdWU6ICdwaG90b24nLFxyXG4gICAgICBjcmVhdGVOb2RlOiAoKSA9PiBuZXcgSW1hZ2UoIHBob3RvblZpZXdJY29uX3BuZywgSUNPTl9PUFRJT05TICksXHJcbiAgICAgIHRhbmRlbU5hbWU6ICdwaG90b25SYWRpb0J1dHRvbidcclxuICAgIH0gXTtcclxuXHJcbiAgICBjb25zdCBiZWFtUGhvdG9uUmFkaW9CdXR0b25Hcm91cCA9IG5ldyBSZWN0YW5ndWxhclJhZGlvQnV0dG9uR3JvdXAoIG1vZGVsLmJlYW1UeXBlUHJvcGVydHksIGJlYW1QaG90b25CdXR0b25zQ29udGVudCxcclxuICAgICAgbWVyZ2UoIHtcclxuICAgICAgICB0b3A6IGZsYXNobGlnaHROb2RlLmJvdHRvbSArIERJU1RBTkNFX0ZST01fRkxBU0hMSUdIVCxcclxuICAgICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdiZWFtUGhvdG9uUmFkaW9CdXR0b25Hcm91cCcgKVxyXG4gICAgICB9LCByYWRpb0J1dHRvbkdyb3VwT3B0aW9ucyApXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMucGRvbUNvbnRyb2xBcmVhTm9kZS5hZGRDaGlsZCggd2hpdGVDb2xvcmVkUmFkaW9CdXR0b25Hcm91cCApO1xyXG4gICAgdGhpcy5wZG9tQ29udHJvbEFyZWFOb2RlLmFkZENoaWxkKCBiZWFtUGhvdG9uUmFkaW9CdXR0b25Hcm91cCApO1xyXG5cclxuICAgIC8vIHJpZ2h0IGFuZCBsZWZ0IGZpbHRlcnMgaGF2ZSB0aGUgc2FtZSBpbWFnZSBkaW1lbnNpb25zICh3aGlsZSBvbmx5IHRha2luZyB1cCBoYWxmIG9mIHRoZSBpbWFnZSBlYWNoKSxcclxuICAgIC8vIHNvIGJvdGggY2FuIHVzZSB0aGUgc2FtZSBvcHRpb24gcGFyYW1ldGVycyBhbmQgY2FuIGJlIHBvc2l0aW9uZWQgdGhlIHNhbWUgYW5kIHdpbGwgbWF0Y2ggdXAgcGVyZmVjdGx5XHJcbiAgICBjb25zdCBmaWx0ZXJPcHRpb25zID0ge1xyXG4gICAgICBjZW50ZXJZOiB0aGlzLmxheW91dEJvdW5kcy5jZW50ZXJZICsgQ29sb3JWaXNpb25Db25zdGFudHMuQ0VOVEVSX1lfT0ZGU0VULFxyXG4gICAgICBzY2FsZTogMC43LFxyXG4gICAgICByaWdodDogZmxhc2hsaWdodE5vZGUubGVmdCAtIDEwMFxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIGNpcmN1bGFyIGZpbHRlciBpbWFnZXMgaW50byB0aGUgc2NlbmVcclxuICAgIC8vIE5vdGU6IEluIENocm9tZSwgdGhlcmUgaXMgYSAxcHggd2lkZSB3aGl0ZSBsaW5lIHRoYXQgY2FuIGJlZW4gc2VlbiBzZXBhcmF0aW5nIHRoZSB0d28gaW1hZ2UgaGFsdmVzLFxyXG4gICAgLy8gc2VlbiBpbiBib3RoIFdpbmRvd3MgYW5kIE9TWC4gU28gZmFyLCBpdCBoYXMgc2VlbWVkIG1pbm9yIGVub3VnaCB0byBpZ25vcmUuXHJcbiAgICBjb25zdCBmaWx0ZXJMZWZ0Tm9kZSA9IG5ldyBJbWFnZSggZmlsdGVyTGVmdF9wbmcsIGZpbHRlck9wdGlvbnMgKTtcclxuICAgIGNvbnN0IGZpbHRlclJpZ2h0Tm9kZSA9IG5ldyBJbWFnZSggZmlsdGVyUmlnaHRfcG5nLCBmaWx0ZXJPcHRpb25zICk7XHJcbiAgICBtb2RlbC5maWx0ZXJWaXNpYmxlUHJvcGVydHkubGlua0F0dHJpYnV0ZSggZmlsdGVyTGVmdE5vZGUsICd2aXNpYmxlJyApO1xyXG4gICAgbW9kZWwuZmlsdGVyVmlzaWJsZVByb3BlcnR5LmxpbmtBdHRyaWJ1dGUoIGZpbHRlclJpZ2h0Tm9kZSwgJ3Zpc2libGUnICk7XHJcblxyXG4gICAgLy8gdGVsbCB0aGUgcGhvdG9uIGJlYW0gbW9kZWwgd2hlcmUgdGhlIGZpbHRlciBwb3NpdGlvbiBpc1xyXG4gICAgbW9kZWwucGhvdG9uQmVhbS5maWx0ZXJPZmZzZXQgPSBmaWx0ZXJMZWZ0Tm9kZS5jZW50ZXJYIC0gUEhPVE9OX0JFQU1fU1RBUlQ7XHJcblxyXG4gICAgLy8gQ3JlYXRlIHBob3RvbkJlYW0gbm9kZVxyXG4gICAgLy8gQHByaXZhdGVcclxuICAgIHRoaXMucGhvdG9uQmVhbU5vZGUgPSBuZXcgU2luZ2xlQnVsYlBob3RvbkJlYW1Ob2RlKCBtb2RlbCwgdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3Bob3RvbkJlYW1Ob2RlJyApLCB7XHJcbiAgICAgIGNhbnZhc0JvdW5kczogbmV3IEJvdW5kczIoIDAsIDAsIFNpbmdsZUJ1bGJDb25zdGFudHMuU0lOR0xFX0JFQU1fTEVOR1RILCBDb2xvclZpc2lvbkNvbnN0YW50cy5CRUFNX0hFSUdIVCApLFxyXG4gICAgICB4OiBQSE9UT05fQkVBTV9TVEFSVFxyXG4gICAgfSApO1xyXG4gICAgdGhpcy5waG90b25CZWFtTm9kZS5jZW50ZXJZID0gdGhpcy5sYXlvdXRCb3VuZHMuY2VudGVyWSArIENvbG9yVmlzaW9uQ29uc3RhbnRzLkNFTlRFUl9ZX09GRlNFVDtcclxuXHJcbiAgICAvLyBDcmVhdGUgZ2F1c3NpYW4gd2F2ZWxlbmd0aCBzbGlkZXIgZm9yIGNvbnRyb2xsaW5nIHRoZSBmaWx0ZXIgY29sb3JcclxuICAgIGNvbnN0IGdhdXNzaWFuU2xpZGVyID0gbmV3IEdhdXNzaWFuV2F2ZWxlbmd0aFNsaWRlciggbW9kZWwuZmlsdGVyV2F2ZWxlbmd0aFByb3BlcnR5LCBTTElERVJfVFJBQ0tfV0lEVEgsIFNMSURFUl9UUkFDS19IRUlHSFQsXHJcbiAgICAgIHRhbmRlbS5jcmVhdGVUYW5kZW0oICdnYXVzc2lhblNsaWRlcicgKSwge1xyXG4gICAgICAgIGJvdHRvbTogdGhpcy5sYXlvdXRCb3VuZHMuYm90dG9tIC0gMjAsXHJcbiAgICAgICAgcmlnaHQ6IHdhdmVsZW5ndGhTbGlkZXJEaXN0YW5jZVxyXG4gICAgICB9ICk7XHJcblxyXG4gICAgLy8gQWRkIHRoZSB0ZXh0IGFib3ZlIHRoZSBnYXVzc2lhbiB3YXZlbGVuZ3RoIHNsaWRlclxyXG4gICAgY29uc3QgZmlsdGVyQ29sb3JUZXh0ID0gbmV3IFRleHQoIGZpbHRlclNsaWRlckxhYmVsU3RyaW5nLCB7XHJcbiAgICAgIGZpbGw6ICd3aGl0ZScsXHJcbiAgICAgIGZvbnQ6IG5ldyBQaGV0Rm9udCggMjAgKSxcclxuICAgICAgYm90dG9tOiBnYXVzc2lhblNsaWRlci50b3AgLSAzLFxyXG4gICAgICByaWdodDogZ2F1c3NpYW5TbGlkZXIucmlnaHQgLSAxOCxcclxuICAgICAgbWF4V2lkdGg6IDAuODUgKiBnYXVzc2lhblNsaWRlci53aWR0aCxcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnZmlsdGVyQ29sb3JUZXh0JyApXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLnBkb21Db250cm9sQXJlYU5vZGUuYWRkQ2hpbGQoIGZpbHRlckNvbG9yVGV4dCApO1xyXG5cclxuICAgIC8vIEFkZCB0aGUgd2lyZSBmcm9tIHRoZSBzbGlkZXIgdG8gdGhlIGZpbHRlclxyXG4gICAgY29uc3QgZmlsdGVyV2lyZU5vZGUgPSBuZXcgRmlsdGVyV2lyZU5vZGUoXHJcbiAgICAgIG1vZGVsLmZpbHRlclZpc2libGVQcm9wZXJ0eSxcclxuICAgICAgbmV3IFZlY3RvcjIoIGZpbHRlckxlZnROb2RlLmNlbnRlclgsIGZpbHRlckxlZnROb2RlLmJvdHRvbSApLFxyXG4gICAgICBuZXcgVmVjdG9yMiggZ2F1c3NpYW5TbGlkZXIubGVmdCArIDE2LCBnYXVzc2lhblNsaWRlci5jZW50ZXJZIC0gU0xJREVSX1lfT0ZGU0VUICksXHJcbiAgICAgIHRhbmRlbS5jcmVhdGVUYW5kZW0oICdmaWx0ZXJXaXJlTm9kZScgKVxyXG4gICAgKTtcclxuICAgIHRoaXMucGRvbUNvbnRyb2xBcmVhTm9kZS5hZGRDaGlsZCggZmlsdGVyV2lyZU5vZGUgKTtcclxuXHJcbiAgICB0aGlzLnBkb21Db250cm9sQXJlYU5vZGUuYWRkQ2hpbGQoIGdhdXNzaWFuU2xpZGVyICk7XHJcblxyXG4gICAgLy8gTGVmdCBoYWxmIG9mIHRoZSBmaWx0ZXJcclxuICAgIGNvbnN0IGZpbHRlckxlZnQgPSBuZXcgRmlsdGVySGFsZkVsbGlwc2UoXHJcbiAgICAgIG1vZGVsLmZpbHRlcldhdmVsZW5ndGhQcm9wZXJ0eSxcclxuICAgICAgbW9kZWwuZmlsdGVyVmlzaWJsZVByb3BlcnR5LFxyXG4gICAgICBmaWx0ZXJMZWZ0Tm9kZS5jZW50ZXJYICsgMSxcclxuICAgICAgZmlsdGVyTGVmdE5vZGUuY2VudGVyWSxcclxuICAgICAgZmlsdGVyTGVmdE5vZGUud2lkdGggLyAyIC0gMTMsXHJcbiAgICAgIGZpbHRlckxlZnROb2RlLmhlaWdodCAvIDIgLSAxMixcclxuICAgICAgdHJ1ZVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBSaWdodCBoYWxmIG9mIHRoZSBmaWx0ZXJcclxuICAgIGNvbnN0IGZpbHRlclJpZ2h0ID0gbmV3IEZpbHRlckhhbGZFbGxpcHNlKFxyXG4gICAgICBtb2RlbC5maWx0ZXJXYXZlbGVuZ3RoUHJvcGVydHksXHJcbiAgICAgIG1vZGVsLmZpbHRlclZpc2libGVQcm9wZXJ0eSxcclxuICAgICAgZmlsdGVyTGVmdE5vZGUuY2VudGVyWCAtIDEsXHJcbiAgICAgIGZpbHRlckxlZnROb2RlLmNlbnRlclksXHJcbiAgICAgIGZpbHRlckxlZnROb2RlLndpZHRoIC8gMiAtIDEzLFxyXG4gICAgICBmaWx0ZXJMZWZ0Tm9kZS5oZWlnaHQgLyAyIC0gMTIsXHJcbiAgICAgIGZhbHNlXHJcbiAgICApO1xyXG5cclxuICAgIC8vIGJvdW5kcyBmb3IgdGhlIHNvbGlkIGJlYW0gdmlld1xyXG4gICAgY29uc3QgYmVhbUJvdW5kcyA9IG5ldyBCb3VuZHMyKFxyXG4gICAgICBmaWx0ZXJMZWZ0LmxlZnQgLSAxMzAsXHJcbiAgICAgIHRoaXMubGF5b3V0Qm91bmRzLmNlbnRlclkgKyBDb2xvclZpc2lvbkNvbnN0YW50cy5DRU5URVJfWV9PRkZTRVQgKyA1NCxcclxuICAgICAgZmxhc2hsaWdodE5vZGUubGVmdCArIDE1LFxyXG4gICAgICB0aGlzLmxheW91dEJvdW5kcy5jZW50ZXJZICsgQ29sb3JWaXNpb25Db25zdGFudHMuQ0VOVEVSX1lfT0ZGU0VUIC0gNDhcclxuICAgICk7XHJcblxyXG4gICAgY29uc3Qgc29saWRCZWFtID0gbmV3IFNvbGlkQmVhbU5vZGUoIG1vZGVsLCBiZWFtQm91bmRzLCBmaWx0ZXJMZWZ0Tm9kZS5jZW50ZXJYICk7XHJcblxyXG4gICAgLy8gQWRkIHJpZ2h0IHNpZGUgb2YgZmlsdGVyIGJlZm9yZSB0aGUgc29saWQgYmVhbSBhbmQgdGhlIGxlZnQgc2lkZVxyXG4gICAgdGhpcy5wZG9tQ29udHJvbEFyZWFOb2RlLmFkZENoaWxkKCBmaWx0ZXJSaWdodE5vZGUgKTtcclxuICAgIHRoaXMucGRvbUNvbnRyb2xBcmVhTm9kZS5hZGRDaGlsZCggZmlsdGVyUmlnaHQgKTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIGhlYWQgbm9kZSBhbmQgc29saWQgYW5kIHBob3RvbiBiZWFtcyBhYm92ZSB0aGUgcmlnaHQgc2lkZSBvZiB0aGUgZmlsdGVyIHNvIHRoZXkgc2hvdyB1cCBvbiB0b3BcclxuICAgIGNvbnN0IGhlYWROb2RlID0gbmV3IEhlYWROb2RlKFxyXG4gICAgICBtb2RlbC5oZWFkTW9kZVByb3BlcnR5LFxyXG4gICAgICB0aGlzLmxheW91dEJvdW5kcy5ib3R0b20sXHJcbiAgICAgIFsgc29saWRCZWFtLCB0aGlzLnBob3RvbkJlYW1Ob2RlIF0sXHJcbiAgICAgIHRhbmRlbS5jcmVhdGVUYW5kZW0oICdoZWFkTm9kZScgKVxyXG4gICAgKTtcclxuICAgIHRoaXMucGRvbUNvbnRyb2xBcmVhTm9kZS5hZGRDaGlsZCggaGVhZE5vZGUgKTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIGxlZnQgc2lkZSBvZiB0aGUgZmlsdGVyIGFib3ZlIHRoZSBiZWFtcyBzbyBpdCBhcHBlYXJzIHRvIHBhc3MgYmVoaW5kXHJcbiAgICB0aGlzLnBkb21Db250cm9sQXJlYU5vZGUuYWRkQ2hpbGQoIGZpbHRlckxlZnROb2RlICk7XHJcbiAgICB0aGlzLnBkb21Db250cm9sQXJlYU5vZGUuYWRkQ2hpbGQoIGZpbHRlckxlZnQgKTtcclxuXHJcbiAgICAvLyBmbGFzaGxpZ2h0IGlzIGFkZGVkIGFmdGVyIHRoZSBiZWFtcyBzbyBpdCBjb3ZlcnMgdXAgdGhlIGJlZ2lubmluZyBvZiB0aGUgYmVhbVxyXG4gICAgdGhpcy5wZG9tQ29udHJvbEFyZWFOb2RlLmFkZENoaWxkKCBmbGFzaGxpZ2h0Tm9kZSApO1xyXG5cclxuICAgIC8vIHNldCB0aGUgdGFiIG5hdmlnYXRpb24gb3JkZXJcclxuICAgIHRoaXMucGRvbUNvbnRyb2xBcmVhTm9kZS5wZG9tT3JkZXIgPSBbXHJcbiAgICAgIGZsYXNobGlnaHROb2RlLFxyXG4gICAgICBidWxiQ29sb3JTbGlkZXIsXHJcbiAgICAgIHdoaXRlQ29sb3JlZFJhZGlvQnV0dG9uR3JvdXAsXHJcbiAgICAgIGJlYW1QaG90b25SYWRpb0J1dHRvbkdyb3VwLFxyXG4gICAgICBmaWx0ZXJXaXJlTm9kZSxcclxuICAgICAgZ2F1c3NpYW5TbGlkZXIsXHJcbiAgICAgIGhlYWROb2RlLFxyXG4gICAgICB0aGlzLnRpbWVDb250cm9sTm9kZSxcclxuICAgICAgdGhpcy5yZXNldEFsbEJ1dHRvblxyXG4gICAgXTtcclxuICB9XHJcblxyXG4gIC8vIEBwdWJsaWNcclxuICBzdGVwKCBkdCApIHtcclxuICAgIC8vIENhcCBkdCwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9jb2xvci12aXNpb24vaXNzdWVzLzExNSBhbmQgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL2pvaXN0L2lzc3Vlcy8xMzBcclxuICAgIGR0ID0gTWF0aC5taW4oIGR0LCAwLjUgKTtcclxuICAgIHRoaXMucGhvdG9uQmVhbU5vZGUuc3RlcCggZHQgKTtcclxuICB9XHJcbn1cclxuXHJcbmNvbG9yVmlzaW9uLnJlZ2lzdGVyKCAnU2luZ2xlQnVsYlNjcmVlblZpZXcnLCBTaW5nbGVCdWxiU2NyZWVuVmlldyApO1xyXG5leHBvcnQgZGVmYXVsdCBTaW5nbGVCdWxiU2NyZWVuVmlldztcclxuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsT0FBTyxNQUFNLCtCQUErQjtBQUNuRCxPQUFPQyxPQUFPLE1BQU0sK0JBQStCO0FBQ25ELE9BQU9DLEtBQUssTUFBTSxtQ0FBbUM7QUFDckQsT0FBT0MsUUFBUSxNQUFNLHlDQUF5QztBQUM5RCxPQUFPQyxnQkFBZ0IsTUFBTSxpREFBaUQ7QUFDOUUsU0FBU0MsS0FBSyxFQUFFQyxJQUFJLFFBQVEsbUNBQW1DO0FBQy9ELE9BQU9DLDJCQUEyQixNQUFNLDJEQUEyRDtBQUNuRyxPQUFPQyxnQkFBZ0IsTUFBTSxxQ0FBcUM7QUFDbEUsT0FBT0MsY0FBYyxNQUFNLG1DQUFtQztBQUM5RCxPQUFPQyxlQUFlLE1BQU0sb0NBQW9DO0FBQ2hFLE9BQU9DLGtCQUFrQixNQUFNLHVDQUF1QztBQUN0RSxPQUFPQyx3QkFBd0IsTUFBTSw2Q0FBNkM7QUFDbEYsT0FBT0Msa0JBQWtCLE1BQU0sdUNBQXVDO0FBQ3RFLE9BQU9DLFdBQVcsTUFBTSxzQkFBc0I7QUFDOUMsT0FBT0Msa0JBQWtCLE1BQU0sNkJBQTZCO0FBQzVELE9BQU9DLG9CQUFvQixNQUFNLHNDQUFzQztBQUN2RSxPQUFPQyxxQkFBcUIsTUFBTSw0Q0FBNEM7QUFDOUUsT0FBT0MsUUFBUSxNQUFNLCtCQUErQjtBQUNwRCxPQUFPQyxtQkFBbUIsTUFBTSwyQkFBMkI7QUFDM0QsT0FBT0MsaUJBQWlCLE1BQU0sd0JBQXdCO0FBQ3RELE9BQU9DLGNBQWMsTUFBTSxxQkFBcUI7QUFDaEQsT0FBT0Msa0JBQWtCLE1BQU0seUJBQXlCO0FB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