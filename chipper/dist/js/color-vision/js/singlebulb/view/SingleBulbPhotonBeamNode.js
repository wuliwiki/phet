// Copyright 2014-2021, University of Colorado Boulder

/**
 * Photon beam for single bulb view
 *
 * @author Aaron Davis (PhET Interactive Simulations)
 */

import { CanvasNode } from '../../../../scenery/js/imports.js';
import colorVision from '../../colorVision.js';
class SingleBulbPhotonBeamNode extends CanvasNode {
  /**
   * @param {SingleBulbModel} model
   * @param {Tandem} tandem
   * @param {Object} [options], must contain a canvasBounds attribute of type Bounds2
   */
  constructor(model, tandem, options) {
    options.tandem = tandem;
    super(options);
    this.photons = model.photonBeam.photons;
    model.beamTypeProperty.link(beamType => {
      this.visible = beamType === 'photon';
    });
    this.invalidatePaint();
    model.photonBeam.repaintEmitter.addListener(() => {
      this.invalidatePaint();
    });
  }

  /**
   * @param {CanvasRenderingContext2D} context
   * @private
   */
  paintCanvas(context) {
    for (let i = 0; i < this.photons.length; i++) {
      context.fillStyle = this.photons[i].color.toCSS();
      context.fillRect(this.photons[i].position.x, this.photons[i].position.y, 3, 2);
    }
  }

  // @public
  step(dt) {
    this.invalidatePaint();
  }
}
colorVision.register('SingleBulbPhotonBeamNode', SingleBulbPhotonBeamNode);
export default SingleBulbPhotonBeamNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDYW52YXNOb2RlIiwiY29sb3JWaXNpb24iLCJTaW5nbGVCdWxiUGhvdG9uQmVhbU5vZGUiLCJjb25zdHJ1Y3RvciIsIm1vZGVsIiwidGFuZGVtIiwib3B0aW9ucyIsInBob3RvbnMiLCJwaG90b25CZWFtIiwiYmVhbVR5cGVQcm9wZXJ0eSIsImxpbmsiLCJiZWFtVHlwZSIsInZpc2libGUiLCJpbnZhbGlkYXRlUGFpbnQiLCJyZXBhaW50RW1pdHRlciIsImFkZExpc3RlbmVyIiwicGFpbnRDYW52YXMiLCJjb250ZXh0IiwiaSIsImxlbmd0aCIsImZpbGxTdHlsZSIsImNvbG9yIiwidG9DU1MiLCJmaWxsUmVjdCIsInBvc2l0aW9uIiwieCIsInkiLCJzdGVwIiwiZHQiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlNpbmdsZUJ1bGJQaG90b25CZWFtTm9kZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNC0yMDIxLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBQaG90b24gYmVhbSBmb3Igc2luZ2xlIGJ1bGIgdmlld1xyXG4gKlxyXG4gKiBAYXV0aG9yIEFhcm9uIERhdmlzIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IENhbnZhc05vZGUgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgY29sb3JWaXNpb24gZnJvbSAnLi4vLi4vY29sb3JWaXNpb24uanMnO1xyXG5cclxuY2xhc3MgU2luZ2xlQnVsYlBob3RvbkJlYW1Ob2RlIGV4dGVuZHMgQ2FudmFzTm9kZSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7U2luZ2xlQnVsYk1vZGVsfSBtb2RlbFxyXG4gICAqIEBwYXJhbSB7VGFuZGVtfSB0YW5kZW1cclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdLCBtdXN0IGNvbnRhaW4gYSBjYW52YXNCb3VuZHMgYXR0cmlidXRlIG9mIHR5cGUgQm91bmRzMlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBtb2RlbCwgdGFuZGVtLCBvcHRpb25zICkge1xyXG4gICAgb3B0aW9ucy50YW5kZW0gPSB0YW5kZW07XHJcblxyXG4gICAgc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcbiAgICB0aGlzLnBob3RvbnMgPSBtb2RlbC5waG90b25CZWFtLnBob3RvbnM7XHJcblxyXG4gICAgbW9kZWwuYmVhbVR5cGVQcm9wZXJ0eS5saW5rKCBiZWFtVHlwZSA9PiB7XHJcbiAgICAgIHRoaXMudmlzaWJsZSA9ICggYmVhbVR5cGUgPT09ICdwaG90b24nICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5pbnZhbGlkYXRlUGFpbnQoKTtcclxuXHJcbiAgICBtb2RlbC5waG90b25CZWFtLnJlcGFpbnRFbWl0dGVyLmFkZExpc3RlbmVyKCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuaW52YWxpZGF0ZVBhaW50KCk7XHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHRcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIHBhaW50Q2FudmFzKCBjb250ZXh0ICkge1xyXG5cclxuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IHRoaXMucGhvdG9ucy5sZW5ndGg7IGkrKyApIHtcclxuICAgICAgY29udGV4dC5maWxsU3R5bGUgPSB0aGlzLnBob3RvbnNbIGkgXS5jb2xvci50b0NTUygpO1xyXG4gICAgICBjb250ZXh0LmZpbGxSZWN0KCB0aGlzLnBob3RvbnNbIGkgXS5wb3NpdGlvbi54LCB0aGlzLnBob3RvbnNbIGkgXS5wb3NpdGlvbi55LCAzLCAyICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBAcHVibGljXHJcbiAgc3RlcCggZHQgKSB7XHJcbiAgICB0aGlzLmludmFsaWRhdGVQYWludCgpO1xyXG4gIH1cclxufVxyXG5cclxuY29sb3JWaXNpb24ucmVnaXN0ZXIoICdTaW5nbGVCdWxiUGhvdG9uQmVhbU5vZGUnLCBTaW5nbGVCdWxiUGhvdG9uQmVhbU5vZGUgKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNpbmdsZUJ1bGJQaG90b25CZWFtTm9kZTtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFNBQVNBLFVBQVUsUUFBUSxtQ0FBbUM7QUFDOUQsT0FBT0MsV0FBVyxNQUFNLHNCQUFzQjtBQUU5QyxNQUFNQyx3QkFBd0IsU0FBU0YsVUFBVSxDQUFDO0VBRWhEO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDRUcsV0FBV0EsQ0FBRUMsS0FBSyxFQUFFQyxNQUFNLEVBQUVDLE9BQU8sRUFBRztJQUNwQ0EsT0FBTyxDQUFDRCxNQUFNLEdBQUdBLE1BQU07SUFFdkIsS0FBSyxDQUFFQyxPQUFRLENBQUM7SUFFaEIsSUFBSSxDQUFDQyxPQUFPLEdBQUdILEtBQUssQ0FBQ0ksVUFBVSxDQUFDRCxPQUFPO0lBRXZDSCxLQUFLLENBQUNLLGdCQUFnQixDQUFDQyxJQUFJLENBQUVDLFFBQVEsSUFBSTtNQUN2QyxJQUFJLENBQUNDLE9BQU8sR0FBS0QsUUFBUSxLQUFLLFFBQVU7SUFDMUMsQ0FBRSxDQUFDO0lBRUgsSUFBSSxDQUFDRSxlQUFlLENBQUMsQ0FBQztJQUV0QlQsS0FBSyxDQUFDSSxVQUFVLENBQUNNLGNBQWMsQ0FBQ0MsV0FBVyxDQUFFLE1BQU07TUFDakQsSUFBSSxDQUFDRixlQUFlLENBQUMsQ0FBQztJQUN4QixDQUFFLENBQUM7RUFDTDs7RUFHQTtBQUNGO0FBQ0E7QUFDQTtFQUNFRyxXQUFXQSxDQUFFQyxPQUFPLEVBQUc7SUFFckIsS0FBTSxJQUFJQyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcsSUFBSSxDQUFDWCxPQUFPLENBQUNZLE1BQU0sRUFBRUQsQ0FBQyxFQUFFLEVBQUc7TUFDOUNELE9BQU8sQ0FBQ0csU0FBUyxHQUFHLElBQUksQ0FBQ2IsT0FBTyxDQUFFVyxDQUFDLENBQUUsQ0FBQ0csS0FBSyxDQUFDQyxLQUFLLENBQUMsQ0FBQztNQUNuREwsT0FBTyxDQUFDTSxRQUFRLENBQUUsSUFBSSxDQUFDaEIsT0FBTyxDQUFFVyxDQUFDLENBQUUsQ0FBQ00sUUFBUSxDQUFDQyxDQUFDLEVBQUUsSUFBSSxDQUFDbEIsT0FBTyxDQUFFVyxDQUFDLENBQUUsQ0FBQ00sUUFBUSxDQUFDRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUUsQ0FBQztJQUN0RjtFQUNGOztFQUVBO0VBQ0FDLElBQUlBLENBQUVDLEVBQUUsRUFBRztJQUNULElBQUksQ0FBQ2YsZUFBZSxDQUFDLENBQUM7RUFDeEI7QUFDRjtBQUVBWixXQUFXLENBQUM0QixRQUFRLENBQUUsMEJBQTBCLEVBQUUzQix3QkFBeUIsQ0FBQztBQUU1RSxlQUFlQSx3QkFBd0IifQ==