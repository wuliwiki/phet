// Copyright 2014-2022, University of Colorado Boulder

/**
 * View representation of a cylinder used within the Estimation simulation.
 * The cylinder is defined by a position, size, and color.  Some of these
 * attributes may change.
 */

import { Shape } from '../../../../kite/js/imports.js';
import { Color, LinearGradient, Node, Path } from '../../../../scenery/js/imports.js';
import estimation from '../../estimation.js';
import CylinderModel from '../model/CylinderModel.js';
class CylinderView extends Node {
  /**
   * @param {CylinderModel} cylinderModel
   * @param {ModelViewTransform2} modelViewTransform
   */
  constructor(cylinderModel, modelViewTransform) {
    super();
    const side = new Path(null, {
      fill: cylinderModel.color,
      stroke: cylinderModel.showOutline ? 'white' : null
    });
    this.addChild(side);
    const top = new Path(null, {
      fill: cylinderModel.color,
      stroke: cylinderModel.showOutline ? 'white' : null
    });
    this.addChild(top);
    const updatePosition = () => {
      const transformedPosition = modelViewTransform.modelToViewPosition(cylinderModel.positionProperty.value);
      // Position is defined as the bottom left in this sim.
      this.left = transformedPosition.x;
      this.bottom = transformedPosition.y;
    };
    const baseColor = cylinderModel.color instanceof Color ? cylinderModel.color : new Color(cylinderModel.color);

    // Hook up the update functions
    cylinderModel.sizeProperty.link(() => {
      const ellipseWidth = modelViewTransform.modelToViewDeltaX(cylinderModel.sizeProperty.value.width);
      const ellipseHeight = -modelViewTransform.modelToViewDeltaY(cylinderModel.sizeProperty.value.width) * Math.sin(CylinderModel.PERSPECTIVE_TILT);
      const cylinderHeight = -modelViewTransform.modelToViewDeltaY(cylinderModel.sizeProperty.value.height);
      top.setShape(Shape.ellipse(0, 0, ellipseWidth / 2, ellipseHeight / 2));
      const shape = new Shape();
      shape.moveTo(-ellipseWidth / 2, 0).lineTo(-ellipseWidth / 2, cylinderHeight).ellipticalArc(0, 0, ellipseWidth / 2, ellipseHeight / 2, 0, Math.PI, 0, true).lineTo(ellipseWidth / 2, 0).ellipticalArc(0, cylinderHeight, ellipseWidth / 2, ellipseHeight / 2, 0, 0, Math.PI, false).close();
      side.setShape(shape);
      side.fill = new LinearGradient(-ellipseWidth / 2, 0, ellipseWidth / 2, 0).addColorStop(0, baseColor.colorUtilsDarker(0.5)).addColorStop(0.5, baseColor.colorUtilsBrighter(0.5)).addColorStop(1, baseColor.colorUtilsDarker(0.5));
      updatePosition();
    });
    cylinderModel.positionProperty.link(updatePosition);
    cylinderModel.visibleProperty.link(visible => {
      this.visible = visible;
    });
  }
}
estimation.register('CylinderView', CylinderView);
export default CylinderView;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTaGFwZSIsIkNvbG9yIiwiTGluZWFyR3JhZGllbnQiLCJOb2RlIiwiUGF0aCIsImVzdGltYXRpb24iLCJDeWxpbmRlck1vZGVsIiwiQ3lsaW5kZXJWaWV3IiwiY29uc3RydWN0b3IiLCJjeWxpbmRlck1vZGVsIiwibW9kZWxWaWV3VHJhbnNmb3JtIiwic2lkZSIsImZpbGwiLCJjb2xvciIsInN0cm9rZSIsInNob3dPdXRsaW5lIiwiYWRkQ2hpbGQiLCJ0b3AiLCJ1cGRhdGVQb3NpdGlvbiIsInRyYW5zZm9ybWVkUG9zaXRpb24iLCJtb2RlbFRvVmlld1Bvc2l0aW9uIiwicG9zaXRpb25Qcm9wZXJ0eSIsInZhbHVlIiwibGVmdCIsIngiLCJib3R0b20iLCJ5IiwiYmFzZUNvbG9yIiwic2l6ZVByb3BlcnR5IiwibGluayIsImVsbGlwc2VXaWR0aCIsIm1vZGVsVG9WaWV3RGVsdGFYIiwid2lkdGgiLCJlbGxpcHNlSGVpZ2h0IiwibW9kZWxUb1ZpZXdEZWx0YVkiLCJNYXRoIiwic2luIiwiUEVSU1BFQ1RJVkVfVElMVCIsImN5bGluZGVySGVpZ2h0IiwiaGVpZ2h0Iiwic2V0U2hhcGUiLCJlbGxpcHNlIiwic2hhcGUiLCJtb3ZlVG8iLCJsaW5lVG8iLCJlbGxpcHRpY2FsQXJjIiwiUEkiLCJjbG9zZSIsImFkZENvbG9yU3RvcCIsImNvbG9yVXRpbHNEYXJrZXIiLCJjb2xvclV0aWxzQnJpZ2h0ZXIiLCJ2aXNpYmxlUHJvcGVydHkiLCJ2aXNpYmxlIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJDeWxpbmRlclZpZXcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTQtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogVmlldyByZXByZXNlbnRhdGlvbiBvZiBhIGN5bGluZGVyIHVzZWQgd2l0aGluIHRoZSBFc3RpbWF0aW9uIHNpbXVsYXRpb24uXHJcbiAqIFRoZSBjeWxpbmRlciBpcyBkZWZpbmVkIGJ5IGEgcG9zaXRpb24sIHNpemUsIGFuZCBjb2xvci4gIFNvbWUgb2YgdGhlc2VcclxuICogYXR0cmlidXRlcyBtYXkgY2hhbmdlLlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSAnLi4vLi4vLi4vLi4va2l0ZS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IHsgQ29sb3IsIExpbmVhckdyYWRpZW50LCBOb2RlLCBQYXRoIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IGVzdGltYXRpb24gZnJvbSAnLi4vLi4vZXN0aW1hdGlvbi5qcyc7XHJcbmltcG9ydCBDeWxpbmRlck1vZGVsIGZyb20gJy4uL21vZGVsL0N5bGluZGVyTW9kZWwuanMnO1xyXG5cclxuY2xhc3MgQ3lsaW5kZXJWaWV3IGV4dGVuZHMgTm9kZSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7Q3lsaW5kZXJNb2RlbH0gY3lsaW5kZXJNb2RlbFxyXG4gICAqIEBwYXJhbSB7TW9kZWxWaWV3VHJhbnNmb3JtMn0gbW9kZWxWaWV3VHJhbnNmb3JtXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIGN5bGluZGVyTW9kZWwsIG1vZGVsVmlld1RyYW5zZm9ybSApIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICBjb25zdCBzaWRlID0gbmV3IFBhdGgoIG51bGwsIHsgZmlsbDogY3lsaW5kZXJNb2RlbC5jb2xvciwgc3Ryb2tlOiAoIGN5bGluZGVyTW9kZWwuc2hvd091dGxpbmUgPyAnd2hpdGUnIDogbnVsbCApIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHNpZGUgKTtcclxuICAgIGNvbnN0IHRvcCA9IG5ldyBQYXRoKCBudWxsLCB7IGZpbGw6IGN5bGluZGVyTW9kZWwuY29sb3IsIHN0cm9rZTogKCBjeWxpbmRlck1vZGVsLnNob3dPdXRsaW5lID8gJ3doaXRlJyA6IG51bGwgKSB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCB0b3AgKTtcclxuXHJcbiAgICBjb25zdCB1cGRhdGVQb3NpdGlvbiA9ICgpID0+IHtcclxuICAgICAgY29uc3QgdHJhbnNmb3JtZWRQb3NpdGlvbiA9IG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1Bvc2l0aW9uKCBjeWxpbmRlck1vZGVsLnBvc2l0aW9uUHJvcGVydHkudmFsdWUgKTtcclxuICAgICAgLy8gUG9zaXRpb24gaXMgZGVmaW5lZCBhcyB0aGUgYm90dG9tIGxlZnQgaW4gdGhpcyBzaW0uXHJcbiAgICAgIHRoaXMubGVmdCA9IHRyYW5zZm9ybWVkUG9zaXRpb24ueDtcclxuICAgICAgdGhpcy5ib3R0b20gPSB0cmFuc2Zvcm1lZFBvc2l0aW9uLnk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGJhc2VDb2xvciA9IGN5bGluZGVyTW9kZWwuY29sb3IgaW5zdGFuY2VvZiBDb2xvciA/IGN5bGluZGVyTW9kZWwuY29sb3IgOiBuZXcgQ29sb3IoIGN5bGluZGVyTW9kZWwuY29sb3IgKTtcclxuXHJcbiAgICAvLyBIb29rIHVwIHRoZSB1cGRhdGUgZnVuY3Rpb25zXHJcbiAgICBjeWxpbmRlck1vZGVsLnNpemVQcm9wZXJ0eS5saW5rKCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGVsbGlwc2VXaWR0aCA9IG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld0RlbHRhWCggY3lsaW5kZXJNb2RlbC5zaXplUHJvcGVydHkudmFsdWUud2lkdGggKTtcclxuICAgICAgY29uc3QgZWxsaXBzZUhlaWdodCA9IC1tb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdEZWx0YVkoIGN5bGluZGVyTW9kZWwuc2l6ZVByb3BlcnR5LnZhbHVlLndpZHRoICkgKiBNYXRoLnNpbiggQ3lsaW5kZXJNb2RlbC5QRVJTUEVDVElWRV9USUxUICk7XHJcbiAgICAgIGNvbnN0IGN5bGluZGVySGVpZ2h0ID0gLW1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld0RlbHRhWSggY3lsaW5kZXJNb2RlbC5zaXplUHJvcGVydHkudmFsdWUuaGVpZ2h0ICk7XHJcbiAgICAgIHRvcC5zZXRTaGFwZSggU2hhcGUuZWxsaXBzZSggMCwgMCwgZWxsaXBzZVdpZHRoIC8gMiwgZWxsaXBzZUhlaWdodCAvIDIgKSApO1xyXG4gICAgICBjb25zdCBzaGFwZSA9IG5ldyBTaGFwZSgpO1xyXG4gICAgICBzaGFwZS5tb3ZlVG8oIC1lbGxpcHNlV2lkdGggLyAyLCAwIClcclxuICAgICAgICAubGluZVRvKCAtZWxsaXBzZVdpZHRoIC8gMiwgY3lsaW5kZXJIZWlnaHQgKVxyXG4gICAgICAgIC5lbGxpcHRpY2FsQXJjKCAwLCAwLCBlbGxpcHNlV2lkdGggLyAyLCBlbGxpcHNlSGVpZ2h0IC8gMiwgMCwgTWF0aC5QSSwgMCwgdHJ1ZSApXHJcbiAgICAgICAgLmxpbmVUbyggZWxsaXBzZVdpZHRoIC8gMiwgMCApXHJcbiAgICAgICAgLmVsbGlwdGljYWxBcmMoIDAsIGN5bGluZGVySGVpZ2h0LCBlbGxpcHNlV2lkdGggLyAyLCBlbGxpcHNlSGVpZ2h0IC8gMiwgMCwgMCwgTWF0aC5QSSwgZmFsc2UgKVxyXG4gICAgICAgIC5jbG9zZSgpO1xyXG4gICAgICBzaWRlLnNldFNoYXBlKCBzaGFwZSApO1xyXG4gICAgICBzaWRlLmZpbGwgPSBuZXcgTGluZWFyR3JhZGllbnQoIC1lbGxpcHNlV2lkdGggLyAyLCAwLCBlbGxpcHNlV2lkdGggLyAyLCAwICkuYWRkQ29sb3JTdG9wKCAwLCBiYXNlQ29sb3IuY29sb3JVdGlsc0RhcmtlciggMC41ICkgKS5hZGRDb2xvclN0b3AoIDAuNSwgYmFzZUNvbG9yLmNvbG9yVXRpbHNCcmlnaHRlciggMC41ICkgKS5hZGRDb2xvclN0b3AoIDEsIGJhc2VDb2xvci5jb2xvclV0aWxzRGFya2VyKCAwLjUgKSApO1xyXG4gICAgICB1cGRhdGVQb3NpdGlvbigpO1xyXG4gICAgfSApO1xyXG4gICAgY3lsaW5kZXJNb2RlbC5wb3NpdGlvblByb3BlcnR5LmxpbmsoIHVwZGF0ZVBvc2l0aW9uICk7XHJcbiAgICBjeWxpbmRlck1vZGVsLnZpc2libGVQcm9wZXJ0eS5saW5rKCB2aXNpYmxlID0+IHtcclxuICAgICAgdGhpcy52aXNpYmxlID0gdmlzaWJsZTtcclxuICAgIH0gKTtcclxuICB9XHJcbn1cclxuXHJcbmVzdGltYXRpb24ucmVnaXN0ZXIoICdDeWxpbmRlclZpZXcnLCBDeWxpbmRlclZpZXcgKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEN5bGluZGVyVmlldzsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBU0EsS0FBSyxRQUFRLGdDQUFnQztBQUN0RCxTQUFTQyxLQUFLLEVBQUVDLGNBQWMsRUFBRUMsSUFBSSxFQUFFQyxJQUFJLFFBQVEsbUNBQW1DO0FBQ3JGLE9BQU9DLFVBQVUsTUFBTSxxQkFBcUI7QUFDNUMsT0FBT0MsYUFBYSxNQUFNLDJCQUEyQjtBQUVyRCxNQUFNQyxZQUFZLFNBQVNKLElBQUksQ0FBQztFQUU5QjtBQUNGO0FBQ0E7QUFDQTtFQUNFSyxXQUFXQSxDQUFFQyxhQUFhLEVBQUVDLGtCQUFrQixFQUFHO0lBQy9DLEtBQUssQ0FBQyxDQUFDO0lBQ1AsTUFBTUMsSUFBSSxHQUFHLElBQUlQLElBQUksQ0FBRSxJQUFJLEVBQUU7TUFBRVEsSUFBSSxFQUFFSCxhQUFhLENBQUNJLEtBQUs7TUFBRUMsTUFBTSxFQUFJTCxhQUFhLENBQUNNLFdBQVcsR0FBRyxPQUFPLEdBQUc7SUFBTyxDQUFFLENBQUM7SUFDcEgsSUFBSSxDQUFDQyxRQUFRLENBQUVMLElBQUssQ0FBQztJQUNyQixNQUFNTSxHQUFHLEdBQUcsSUFBSWIsSUFBSSxDQUFFLElBQUksRUFBRTtNQUFFUSxJQUFJLEVBQUVILGFBQWEsQ0FBQ0ksS0FBSztNQUFFQyxNQUFNLEVBQUlMLGFBQWEsQ0FBQ00sV0FBVyxHQUFHLE9BQU8sR0FBRztJQUFPLENBQUUsQ0FBQztJQUNuSCxJQUFJLENBQUNDLFFBQVEsQ0FBRUMsR0FBSSxDQUFDO0lBRXBCLE1BQU1DLGNBQWMsR0FBR0EsQ0FBQSxLQUFNO01BQzNCLE1B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