// Copyright 2020-2023, University of Colorado Boulder

/**
 * A single controllable half of the proportion. It contains a draggable hand that can change the value of this half (term)
 * of the ratio. This type can display tick marks that segment the movable space for the hand.
 *
 * A thick rectangle is placed on the top and bottom of this frame to cue the possible height that the pointer can be
 * dragged.
 *
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */

import BooleanProperty from '../../../../axon/js/BooleanProperty.js';
import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import Property from '../../../../axon/js/Property.js';
import Bounds2 from '../../../../dot/js/Bounds2.js';
import Range from '../../../../dot/js/Range.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import optionize from '../../../../phet-core/js/optionize.js';
import ModelViewTransform2 from '../../../../phetcommon/js/view/ModelViewTransform2.js';
import { DragListener, Rectangle } from '../../../../scenery/js/imports.js';
import ratioAndProportion from '../../ratioAndProportion.js';
import RatioTerm from '../model/RatioTerm.js';
import rapConstants from '../rapConstants.js';
import CueDisplay from './CueDisplay.js';
import RatioHalfTickMarksNode from './RatioHalfTickMarksNode.js';
import RatioHandNode from './RatioHandNode.js';
import ViewSounds from './sound/ViewSounds.js';
import TickMarkView from './TickMarkView.js';
import BothHandsDescriber from './describers/BothHandsDescriber.js';
import HandPositionsDescriber from './describers/HandPositionsDescriber.js';
import DistanceResponseType from './describers/DistanceResponseType.js';
import MappedProperty from '../../../../axon/js/MappedProperty.js';
import TickMarkDescriber from './describers/TickMarkDescriber.js';
import RatioAndProportionStrings from '../../RatioAndProportionStrings.js';
import PatternStringProperty from '../../../../axon/js/PatternStringProperty.js';
// constants
const MIN_FRAMING_RECTANGLE_HEIGHT = 32;
const MAX_FRAMING_RECTANGLE_HEIGHT = 64;

// Snap exclusive within this percentage of a tick mark. Thus actual snapping distance is based on the current tick
// mark range value.
const SNAP_TO_TICK_MARK_THRESHOLD = 0.1;

// total horizontal drag distance;
const X_MODEL_DRAG_DISTANCE = 1;
const INITIAL_X_VALUE = 0;
const getModelBoundsFromRange = range => new Bounds2(-X_MODEL_DRAG_DISTANCE / 2, range.min, X_MODEL_DRAG_DISTANCE / 2, range.max);
const MIN_HAND_SCALE = 1.2;
const MAX_HAND_SCALE = 2.5;
const TOTAL_RANGE = rapConstants.TOTAL_RATIO_TERM_VALUE_RANGE;
class RatioHalf extends Rectangle {
  // the height of the framing rectangles, updated in layout function

  // This behaves a bit differently depending on modality. For mouse/touch, any time you are
  // dragging this will be considered interaction, for keyboard, you must press a key before the interaction starts.
  // Note both members to keep a public readonly interface.
  // The draggable element inside the Node framed with thick rectangles on the top and bottom.
  // Access this to use view sounds related to this RatioHalf.
  constructor(providedOptions) {
    const options = optionize()({
      isRight: true,
      handColorProperty: new Property('black'),
      a11yDependencies: [],
      bothHandsCueDisplay: CueDisplay.UP_DOWN,
      // phet-io
      phetioInputEnabledPropertyInstrumented: true,
      // pdom
      tagName: 'div',
      accessibleNameBehavior: RatioHalf.RATIO_HALF_ACCESSIBLE_NAME_BEHAVIOR
    }, providedOptions);
    super(0, 0, options.bounds.width, options.bounds.height);
    this._framingRectangleHeight = MIN_FRAMING_RECTANGLE_HEIGHT;

    // Tandem is a different name to keep a `public readonly` interface without depending on getters and setters.
    this._isBeingInteractedWithProperty = new BooleanProperty(false, {
      tandem: options.tandem.createTandem('isBeingInteractedWithProperty')
    });
    this.isBeingInteractedWithProperty = this._isBeingInteractedWithProperty;
    this.ratio = options.ratio;
    const tickMarkDescriber = new TickMarkDescriber(options.tickMarkRangeProperty, options.tickMarkViewProperty);
    this.descriptionHandPositionsDescriber = new HandPositionsDescriber(this.ratio.tupleProperty, tickMarkDescriber, options.inProportionProperty, this.ratio.enabledRatioTermsRangeProperty, this.ratio.lockedProperty);
    this.voicingHandPositionsDescriber = new HandPositionsDescriber(this.ratio.tupleProperty, tickMarkDescriber, options.inProportionProperty, this.ratio.enabledRatioTermsRangeProperty, this.ratio.lockedProperty);
    this.tickMarkViewProperty = options.tickMarkViewProperty;
    this.ratioTerm = options.ratioTerm;

    // BothHandsDescriber keeps state that depends on how often you ask for content, so keep a different reference for
    // each communication modality.
    const descriptionBothHandsDescriber = new BothHandsDescriber(this.ratio.tupleProperty, this.ratio.enabledRatioTermsRangeProperty, this.ratio.lockedProperty, this.tickMarkViewProperty, options.inProportionProperty, options.ratioDescriber, new TickMarkDescriber(options.tickMarkRangeProperty, options.tickMarkViewProperty));
    const voicingBothHandsDescriber = new BothHandsDescriber(this.ratio.tupleProperty, this.ratio.enabledRatioTermsRangeProperty, this.ratio.lockedProperty, this.tickMarkViewProperty, options.inProportionProperty, options.ratioDescriber, new TickMarkDescriber(options.tickMarkRangeProperty, options.tickMarkViewProperty));
    this.viewSounds = new ViewSounds(options.tickMarkRangeProperty, options.tickMarkViewProperty, options.playTickMarkBumpSoundProperty);

    // This follows the spec outlined in https://github.com/phetsims/ratio-and-proportion/issues/81
    const cueDisplayStateProperty = new DerivedProperty([options.cueArrowsState.interactedWithKeyboardProperty, options.cueArrowsState.interactedWithMouseProperty, options.cueArrowsState.keyboardFocusedProperty, options.cueArrowsState.bothHands.interactedWithProperty, options.displayBothHandsCueProperty], (interactedWithKeyboard, interactedWithMouse, keyboardFocused, bothHandsInteractedWith, displayBothHands) => {
      return displayBothHands ? options.bothHandsCueDisplay : keyboardFocused && !interactedWithKeyboard ? CueDisplay.UP_DOWN : interactedWithKeyboard || interactedWithMouse || bothHandsInteractedWith ? CueDisplay.NONE : CueDisplay.ARROWS;
    });

    // Create a mapping directly to just this ratio term value. This is to support
    // AccessibleValueHandler, which powers the PDOM interaction off of {Property.<number>}.
    const ratioTermSpecificProperty = new MappedProperty(this.ratio.tupleProperty, {
      bidirectional: true,
      reentrant: true,
      valueType: 'number',
      map: ratioTuple => ratioTuple.getForTerm(this.ratioTerm),
      inverseMap: term => this.ratioTerm === RatioTerm.ANTECEDENT ? this.ratio.tupleProperty.value.withAntecedent(term) : this.ratioTerm === RatioTerm.CONSEQUENT ? this.ratio.tupleProperty.value.withConsequent(term) : assert && assert(false, `unexpected ratioTerm ${this.ratioTerm}`)
    });
    const createObjectResponse = () => options.ratioDescriber.getProximityToChallengeRatio();
    this.ratioHandNode = new RatioHandNode(options.tickMarkViewProperty, options.keyboardStep, options.handColorProperty, cueDisplayStateProperty, options.getIdealValue, options.inProportionProperty, {
      valueProperty: ratioTermSpecificProperty,
      enabledRangeProperty: this.ratio.enabledRatioTermsRangeProperty,
      startDrag: () => {
        options.cueArrowsState.interactedWithKeyboardProperty.value = true;
        this._isBeingInteractedWithProperty.value = true;
        this.viewSounds.boundarySoundClip.onStartInteraction();
      },
      drag: () => {
        this.viewSounds.boundarySoundClip.onInteract(this.ratio.tupleProperty.value.getForTerm(this.ratioTerm));
        this.viewSounds.tickMarkBumpSoundClip.onInteract(this.ratio.tupleProperty.value.getForTerm(this.ratioTerm));
      },
      endDrag: () => {
        this.viewSounds.boundarySoundClip.onEndInteraction(this.ratio.tupleProperty.value.getForTerm(this.ratioTerm));
      },
      isRight: options.isRight,
      a11yCreateAriaValueText: createObjectResponse,
      voicingObjectResponse: createObjectResponse,
      a11yCreateContextResponseAlert: () => this.getSingleHandContextResponse(this.descriptionHandPositionsDescriber, descriptionBothHandsDescriber),
      voicingContextResponse: () => this.getSingleHandContextResponse(this.voicingHandPositionsDescriber, voicingBothHandsDescriber),
      a11yDependencies: options.a11yDependencies.concat([this.ratio.lockedProperty])
    });
    const providedAccessibleName = options.accessibleName;
    const handLockedPatternStringProperty = new PatternStringProperty(RatioAndProportionStrings.a11y.handLockedPatternStringProperty, {
      hand: providedAccessibleName
    });
    const accessibleNameProperty = new DerivedProperty([this.ratio.lockedProperty, handLockedPatternStringProperty], locked => {
      return !locked ? providedAccessibleName : handLockedPatternStringProperty;
    });

    // accessible name is also the voicing name response, unless locked
    accessibleNameProperty.link(newAccessibleName => {
      this.accessibleName = newAccessibleName;
      this.ratioHandNode.voicingNameResponse = newAccessibleName;
    });

    // This can change anytime there is a layout update.
    let modelViewTransform = ModelViewTransform2.createRectangleInvertedYMapping(getModelBoundsFromRange(TOTAL_RANGE), options.bounds);

    // Snap mouse/touch input to the nearest tick mark if close enough. This helps with reproducible precision
    const getSnapToTickMarkValue = yValue => {
      if (TickMarkView.displayHorizontal(options.tickMarkViewProperty.value)) {
        const tickMarkStep = 1 / options.tickMarkRangeProperty.value;

        // iterate through model values of each tick mark
        for (let i = TOTAL_RANGE.min; i < TOTAL_RANGE.max; i += tickMarkStep) {
          if (Math.abs(yValue - i) < tickMarkStep * SNAP_TO_TICK_MARK_THRESHOLD) {
            // Bug occurs when dragging to the top with tick marks enabled, the value is 1, but snaps to .999999 unless rounded
            return rapConstants.toFixed(i); // eslint-disable-line bad-sim-text
          }
        }
      }

      // No snapping in this case, just return the provided value.
      return yValue;
    };
    const initialVector = new Vector2(INITIAL_X_VALUE, 0);
    let mappingInitialValue = true;

    // Only the RatioHalf DragListener allows for horizontal movement, so support that here. This adds the horizontal axis.
    // We expand on ratioTermSpecificProperty since we already have it, but we could also just use the ratio.tupleProperty.
    const positionProperty = new MappedProperty(ratioTermSpecificProperty, {
      reentrant: true,
      bidirectional: true,
      valueType: Vector2,
      inverseMap: vector2 => vector2.y,
      map: number => {
        // initial case
        if (mappingInitialValue) {
          mappingInitialValue = false;
          return initialVector.setY(number);
        } else {
          return positionProperty.value.copy().setY(number);
        }
      }
    });
    const dragBoundsProperty = new Property(new Bounds2(0, 0, 1, 1));

    // When set to a value, the horizontal position will not be changed throughout the whole drag. Set to null when not dragging.
    let startingX = null;
    let startingY = -1;
    let positionChanged = false;
    let previousYOnLastVoicing = -1;

    // transform and dragBounds set in layout code below
    const dragListener = new DragListener({
      positionProperty: positionProperty,
      mapPosition: vector2 => {
        // The transform can produce rounding errors, and we depend on boundary positions to be exactly at 0 and 1
        // (for comparison). This solves https://github.com/phetsims/ratio-and-proportion/issues/467 and https://github.com/phetsims/ratio-and-proportion/issues/457#issuecomment-1133125656
        vector2.x = rapConstants.toFixed(vector2.x); // eslint-disable-line bad-sim-text
        vector2.y = rapConstants.toFixed(vector2.y); // eslint-disable-line bad-sim-text
        return dragBoundsProperty.value.closestPointTo(vector2);
      },
      start: () => {
        if (options.horizontalMovementAllowedProperty.value) {
          startingX = positionProperty.value.x;
        }
        startingY = positionProperty.value.y;
        positionChanged = false;
        previousYOnLastVoicing = positionProperty.value.y;
        this.viewSounds.grabSoundClip.play();
        options.cueArrowsState.interactedWithMouseProperty.value = true;
        options.setJumpingOverProportionShouldTriggerSound(true);
        this.viewSounds.boundarySoundClip.onStartInteraction();
        const fullResponse = {
          contextResponse: null // If we ever have a context response, make sure we don't have go-beyond edge responses.
        };

        const edgeHint = this.voicingHandPositionsDescriber.getGoBeyondContextResponse(this.ratio.tupleProperty.value, this.ratioTerm);
        if (edgeHint) {
          fullResponse.hintResponse = edgeHint;
        }
        this.ratioHandNode.voicingSpeakFullResponse(fullResponse);
      },
      drag: () => {
        this._isBeingInteractedWithProperty.value = true;
        if (typeof startingX === 'number') {
          positionProperty.value.setX(startingX);
          positionProperty.notifyListenersStatic();
        }
        if (startingY !== positionProperty.value.y) {
          positionChanged = true;
        }
        this.viewSounds.boundarySoundClip.onInteract(positionProperty.value.y, positionProperty.value.x, new Range(dragBoundsProperty.value.left, dragBoundsProperty.value.right));
        this.viewSounds.tickMarkBumpSoundClip.onInteract(positionProperty.value.y);

        // Only new responses if the y position is different.
        if (positionProperty.value.y !== previousYOnLastVoicing) {
          this.ratioHandNode.voicingSpeakFullResponse({
            nameResponse: null,
            contextResponse: this.getSingleHandContextResponse(this.voicingHandPositionsDescriber, voicingBothHandsDescriber, {
              supportGoBeyondEdgeResponses: false,
              // no go-beyond-edge responses for mouse/touch
              distanceResponseType: DistanceResponseType.DISTANCE_PROGRESS
            }),
            hintResponse: null
          });
          previousYOnLastVoicing = positionProperty.value.y;
        }
      },
      end: () => {
        // reset logic in the hand that controls other input
        this.ratioHandNode.reset();

        // snap final value to tick mark, if applicable
        const newY = getSnapToTickMarkValue(positionProperty.value.y);
        if (positionProperty.value.y !== newY) {
          positionProperty.value.setY(newY);
          positionProperty.notifyListenersStatic();
        }
        startingX = null;
        this.viewSounds.releaseSoundClip.play();
        this._isBeingInteractedWithProperty.value = false;
        options.setJumpingOverProportionShouldTriggerSound(false);
        this.viewSounds.boundarySoundClip.onEndInteraction(positionProperty.value.y);

        // Support context response on interaction end from mouse/touch input.
        this.ratioHandNode.alertContextResponse();

        // Only voice a response if the value changed
        if (positionChanged) {
          this.ratioHandNode.voicingSpeakFullResponse({
            nameResponse: null,
            contextResponse: this.getSingleHandContextResponse(this.voicingHandPositionsDescriber, voicingBothHandsDescriber, {
              supportGoBeyondEdgeResponses: false,
              // no go-beyond-edge responses for mouse/touch
              distanceResponseType: DistanceResponseType.DISTANCE_REGION
            }),
            hintResponse: null
          });
        } else {
          // No voicing if there hasn't been any movement
        }

        // Fire this once here so that on drag, if at edge, it will act like a go-beyond response on the first attempt
        this.voicingHandPositionsDescriber.getGoBeyondContextResponse(this.ratio.tupleProperty.value, this.ratioTerm);
      },
      // phet-io
      tandem: options.tandem.createTandem('dragListener')
    });

    // When the range changes, update the dragBounds of the drag listener
    this.ratio.enabledRatioTermsRangeProperty.link(enabledRange => {
      const newBounds = getModelBoundsFromRange(enabledRange);

      // offset the bounds to account for the ratioHandNode's size, since the center of the ratioHandNode is controlled by the drag bounds.
      const modelHalfPointerPointer = modelViewTransform.viewToModelDeltaXY(this.ratioHandNode.width / 2, -this._framingRectangleHeight);

      // constrain x dimension inside the RatioHalf so that this.ratioHandNode doesn't go beyond the width. Height is constrained
      // via the modelViewTransform.
      dragBoundsProperty.value = newBounds.erodedX(modelHalfPointerPointer.x);
    });
    this.ratioHandNode.addInputListener(dragListener);
    this.ratioHandNode.addInputListener({
      focus: () => {
        options.cueArrowsState.keyboardFocusedProperty.value = true;
        this.viewSounds.grabSoundClip.play();
      },
      blur: () => {
        options.cueArrowsState.keyboardFocusedProperty.value = false;
        this.viewSounds.releaseSoundClip.play();
        this._isBeingInteractedWithProperty.value = false;
      },
      down: () => {
        // Support the case when you have the hand focused, and then you press the hand with a mouse
        options.cueArrowsState.keyboardFocusedProperty.value = false;
      }
    });

    // "Framing" rectangles on the top and bottom of the drag area of the ratio half
    const topRect = new Rectangle(0, 0, 10, this._framingRectangleHeight, {
      fill: options.colorProperty
    });
    const bottomRect = new Rectangle(0, 0, 10, this._framingRectangleHeight, {
      fill: options.colorProperty
    });
    const tickMarksNode = new RatioHalfTickMarksNode(options.tickMarkViewProperty, options.tickMarkRangeProperty, options.bounds.width, options.bounds.height - 2 * this._framingRectangleHeight, options.colorProperty);
    const updatePointer = position => {
      this.ratioHandNode.translation = modelViewTransform.modelToViewPosition(position);
    };
    positionProperty.link(updatePointer);
    this.mutate(options);
    assert && assert(!options.children, 'RatioHalf sets its own children.');
    this.children = [topRect, bottomRect, tickMarksNode, this.ratioHandNode];
    this.layoutRatioHalf = (newBounds, heightScalar) => {
      this.rectWidth = newBounds.width;
      this.rectHeight = newBounds.height;
      this._framingRectangleHeight = topRect.rectHeight = bottomRect.rectHeight = heightScalar * MIN_FRAMING_RECTANGLE_HEIGHT + (MAX_FRAMING_RECTANGLE_HEIGHT - MIN_FRAMING_RECTANGLE_HEIGHT);

      // Scale depending on how tall the ratio half is. This is to support narrow and tall layouts where the hand needs
      // to be scaled up more to support touch interaction, see https://github.com/phetsims/ratio-and-proportion/issues/217.
      const handScale = heightScalar * (MAX_HAND_SCALE - MIN_HAND_SCALE) + MIN_HAND_SCALE;
      this.ratioHandNode.setScaleMagnitude(handScale);
      const framingRectWidth = newBounds.width - newBounds.width * 0.1;
      topRect.rectWidth = framingRectWidth;
      topRect.centerX = bottomRect.centerX = newBounds.centerX;
      bottomRect.rectWidth = framingRectWidth;
      topRect.top = 0;
      bottomRect.bottom = newBounds.height;
      const boundsNoFramingRects = newBounds.erodedY(this._framingRectangleHeight);

      // Don't count the space the framing rectangles take up as part of the draggableArea.
      modelViewTransform = ModelViewTransform2.createRectangleInvertedYMapping(getModelBoundsFromRange(TOTAL_RANGE), boundsNoFramingRects);
      updatePointer(positionProperty.value);
      dragListener.transform = modelViewTransform;
      tickMarksNode.layout(boundsNoFramingRects.width, boundsNoFramingRects.height);
      tickMarksNode.bottom = bottomRect.top;
      tickMarksNode.left = 0;
    };
    this.resetRatioHalf = () => {
      this.descriptionHandPositionsDescriber.reset();
      this.voicingHandPositionsDescriber.reset();
      descriptionBothHandsDescriber.reset();
      voicingBothHandsDescriber.reset();
      this.ratioHandNode.reset();
      this.viewSounds.reset();
      positionProperty.value.setX(INITIAL_X_VALUE);
      positionProperty.notifyListenersStatic();
    };
  }

  // Provide a getter but not a setter to denote "public readonly"
  get framingRectangleHeight() {
    return this._framingRectangleHeight;
  }

  /**
   * Generate and send an alert to the UtteranceQueue that describes the movement of this object and the subsequent change
   * in ratio. This is the context response for the individual ratio half hand (slider) interaction. Returning
   * null means no alert will occur.
   */
  getSingleHandContextResponse(handPositionsDescriber, bothHandsDescriber, options) {
    // When locked, give a description of both-hands, instead of just a single one.
    if (this.ratio.lockedProperty.value) {
      return bothHandsDescriber.getBothHandsContextResponse(this.ratioTerm, options);
    }
    return handPositionsDescriber.getSingleHandContextResponse(this.ratioTerm, this.tickMarkViewProperty.value, options);
  }

  /**
   * The bottom of the Rectangle that contains the RatioHandNode is not the complete bounds of the Node. With that in
   * mind, offset the bottom by the height that extends beyond the Rectangle. For example, the cue arrows of the RatioHandNode can extend beyond the
   * "ratio half box" (the draggable area).
   */
  setBottomOfRatioHalf(desiredBottom) {
    // `selfBounds` is used for the position of the Rectangle, since RatioHalf extends Rectangle
    this.bottom = desiredBottom + (this.bounds.bottom - this.localToParentBounds(this.selfBounds).bottom);
  }

  /**
   * @param bounds - the bounds of this RatioHalf, effects dimensions, dragBounds, and width of guiding rectangles
   * @param heightScalar - normalized between 0 and 1. When 1, it the ratio half will be the tallest it gets, at 0, the shortest
   */
  layout(bounds, heightScalar) {
    assert && assert(heightScalar >= 0 && heightScalar <= 1, 'scalar should be between 0 and 1');
    this.layoutRatioHalf(bounds, heightScalar);
  }
  reset() {
    this.resetRatioHalf();
  }
  static RATIO_HALF_ACCESSIBLE_NAME_BEHAVIOR(node, options, accessibleName, callbacksForOtherNodes) {
    callbacksForOtherNodes.push(() => {
      node.ratioHandNode.accessibleName = accessibleName;
    });
    return options;
  }
}
ratioAndProportion.register('RatioHalf', RatioHalf);
export default RatioHalf;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb29sZWFuUHJvcGVydHkiLCJEZXJpdmVkUHJvcGVydHkiLCJQcm9wZXJ0eSIsIkJvdW5kczIiLCJSYW5nZSIsIlZlY3RvcjIiLCJvcHRpb25pemUiLCJNb2RlbFZpZXdUcmFuc2Zvcm0yIiwiRHJhZ0xpc3RlbmVyIiwiUmVjdGFuZ2xlIiwicmF0aW9BbmRQcm9wb3J0aW9uIiwiUmF0aW9UZXJtIiwicmFwQ29uc3RhbnRzIiwiQ3VlRGlzcGxheSIsIlJhdGlvSGFsZlRpY2tNYXJrc05vZGUiLCJSYXRpb0hhbmROb2RlIiwiVmlld1NvdW5kcyIsIlRpY2tNYXJrVmlldyIsIkJvdGhIYW5kc0Rlc2NyaWJlciIsIkhhbmRQb3NpdGlvbnNEZXNjcmliZXIiLCJEaXN0YW5jZVJlc3BvbnNlVHlwZSIsIk1hcHBlZFByb3BlcnR5IiwiVGlja01hcmtEZXNjcmliZXIiLCJSYXRpb0FuZFByb3BvcnRpb25TdHJpbmdzIiwiUGF0dGVyblN0cmluZ1Byb3BlcnR5IiwiTUlOX0ZSQU1JTkdfUkVDVEFOR0xFX0hFSUdIVCIsIk1BWF9GUkFNSU5HX1JFQ1RBTkdMRV9IRUlHSFQiLCJTTkFQX1RPX1RJQ0tfTUFSS19USFJFU0hPTEQiLCJYX01PREVMX0RSQUdfRElTVEFOQ0UiLCJJTklUSUFMX1hfVkFMVUUiLCJnZXRNb2RlbEJvdW5kc0Zyb21SYW5nZSIsInJhbmdlIiwibWluIiwibWF4IiwiTUlOX0hBTkRfU0NBTEUiLCJNQVhfSEFORF9TQ0FMRSIsIlRPVEFMX1JBTkdFIiwiVE9UQUxfUkFUSU9fVEVSTV9WQUxVRV9SQU5HRSIsIlJhdGlvSGFsZiIsImNvbnN0cnVjdG9yIiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsImlzUmlnaHQiLCJoYW5kQ29sb3JQcm9wZXJ0eSIsImExMXlEZXBlbmRlbmNpZXMiLCJib3RoSGFuZHNDdWVEaXNwbGF5IiwiVVBfRE9XTiIsInBoZXRpb0lucHV0RW5hYmxlZFByb3BlcnR5SW5zdHJ1bWVudGVkIiwidGFnTmFtZSIsImFjY2Vzc2libGVOYW1lQmVoYXZpb3IiLCJSQVRJT19IQUxGX0FDQ0VTU0lCTEVfTkFNRV9CRUhBVklPUiIsImJvdW5kcyIsIndpZHRoIiwiaGVpZ2h0IiwiX2ZyYW1pbmdSZWN0YW5nbGVIZWlnaHQiLCJfaXNCZWluZ0ludGVyYWN0ZWRXaXRoUHJvcGVydHkiLCJ0YW5kZW0iLCJjcmVhdGVUYW5kZW0iLCJpc0JlaW5nSW50ZXJhY3RlZFdpdGhQcm9wZXJ0eSIsInJhdGlvIiwidGlja01hcmtEZXNjcmliZXIiLCJ0aWNrTWFya1JhbmdlUHJvcGVydHkiLCJ0aWNrTWFya1ZpZXdQcm9wZXJ0eSIsImRlc2NyaXB0aW9uSGFuZFBvc2l0aW9uc0Rlc2NyaWJlciIsInR1cGxlUHJvcGVydHkiLCJpblByb3BvcnRpb25Qcm9wZXJ0eSIsImVuYWJsZWRSYXRpb1Rlcm1zUmFuZ2VQcm9wZXJ0eSIsImxvY2tlZFByb3BlcnR5Iiwidm9pY2luZ0hhbmRQb3NpdGlvbnNEZXNjcmliZXIiLCJyYXRpb1Rlcm0iLCJkZXNjcmlwdGlvbkJvdGhIYW5kc0Rlc2NyaWJlciIsInJhdGlvRGVzY3JpYmVyIiwidm9pY2luZ0JvdGhIYW5kc0Rlc2NyaWJlciIsInZpZXdTb3VuZHMiLCJwbGF5VGlja01hcmtCdW1wU291bmRQcm9wZXJ0eSIsImN1ZURpc3BsYXlTdGF0ZVByb3BlcnR5IiwiY3VlQXJyb3dzU3RhdGUiLCJpbnRlcmFjdGVkV2l0aEtleWJvYXJkUHJvcGVydHkiLCJpbnRlcmFjdGVkV2l0aE1vdXNlUHJvcGVydHkiLCJrZXlib2FyZEZvY3VzZWRQcm9wZXJ0eSIsImJvdGhIYW5kcyIsImludGVyYWN0ZWRXaXRoUHJvcGVydHkiLCJkaXNwbGF5Qm90aEhhbmRzQ3VlUHJvcGVydHkiLCJpbnRlcmFjdGVkV2l0aEtleWJvYXJkIiwiaW50ZXJhY3RlZFdpdGhNb3VzZSIsImtleWJvYXJkRm9jdXNlZCIsImJvdGhIYW5kc0ludGVyYWN0ZWRXaXRoIiwiZGlzcGxheUJvdGhIYW5kcyIsIk5PTkUiLCJBUlJPV1MiLCJyYXRpb1Rlcm1TcGVjaWZpY1Byb3BlcnR5IiwiYmlkaXJlY3Rpb25hbCIsInJlZW50cmFudCIsInZhbHVlVHlwZSIsIm1hcCIsInJhdGlvVHVwbGUiLCJnZXRGb3JUZXJtIiwiaW52ZXJzZU1hcCIsInRlcm0iLCJBTlRFQ0VERU5UIiwidmFsdWUiLCJ3aXRoQW50ZWNlZGVudCIsIkNPTlNFUVVFTlQiLCJ3aXRoQ29uc2VxdWVudCIsImFzc2VydCIsImNyZWF0ZU9iamVjdFJlc3BvbnNlIiwiZ2V0UHJveGltaXR5VG9DaGFsbGVuZ2VSYXRpbyIsInJhdGlvSGFuZE5vZGUiLCJrZXlib2FyZFN0ZXAiLCJnZXRJZGVhbFZhbHVlIiwidmFsdWVQcm9wZXJ0eSIsImVuYWJsZWRSYW5nZVByb3BlcnR5Iiwic3RhcnREcmFnIiwiYm91bmRhcnlTb3VuZENsaXAiLCJvblN0YXJ0SW50ZXJhY3Rpb24iLCJkcmFnIiwib25JbnRlcmFjdCIsInRpY2tNYXJrQnVtcFNvdW5kQ2xpcCIsImVuZERyYWciLCJvbkVuZEludGVyYWN0aW9uIiwiYTExeUNyZWF0ZUFyaWFWYWx1ZVRleHQiLCJ2b2ljaW5nT2JqZWN0UmVzcG9uc2UiLCJhMTF5Q3JlYXRlQ29udGV4dFJlc3BvbnNlQWxlcnQiLCJnZXRTaW5nbGVIYW5kQ29udGV4dFJlc3BvbnNlIiwidm9pY2luZ0NvbnRleHRSZXNwb25zZSIsImNvbmNhdCIsInByb3ZpZGVkQWNjZXNzaWJsZU5hbWUiLCJhY2Nlc3NpYmxlTmFtZSIsImhhbmRMb2NrZWRQYXR0ZXJuU3RyaW5nUHJvcGVydHkiLCJhMTF5IiwiaGFuZCIsImFjY2Vzc2libGVOYW1lUHJvcGVydHkiLCJsb2NrZWQiLCJsaW5rIiwibmV3QWNjZXNzaWJsZU5hbWUiLCJ2b2ljaW5nTmFtZVJlc3BvbnNlIiwibW9kZWxWaWV3VHJhbnNmb3JtIiwiY3JlYXRlUmVjdGFuZ2xlSW52ZXJ0ZWRZTWFwcGluZyIsImdldFNuYXBUb1RpY2tNYXJrVmFsdWUiLCJ5VmFsdWUiLCJkaXNwbGF5SG9yaXpvbnRhbCIsInRpY2tNYXJrU3RlcCIsImkiLCJNYXRoIiwiYWJzIiwidG9GaXhlZCIsImluaXRpYWxWZWN0b3IiLCJtYXBwaW5nSW5pdGlhbFZhbHVlIiwicG9zaXRpb25Qcm9wZXJ0eSIsInZlY3RvcjIiLCJ5IiwibnVtYmVyIiwic2V0WSIsImNvcHkiLCJkcmFnQm91bmRzUHJvcGVydHkiLCJzdGFydGluZ1giLCJzdGFydGluZ1kiLCJwb3NpdGlvbkNoYW5nZWQiLCJwcmV2aW91c1lPbkxhc3RWb2ljaW5nIiwiZHJhZ0xpc3RlbmVyIiwibWFwUG9zaXRpb24iLCJ4IiwiY2xvc2VzdFBvaW50VG8iLCJzdGFydCIsImhvcml6b250YWxNb3ZlbWVudEFsbG93ZWRQcm9wZXJ0eSIsImdyYWJTb3VuZENsaXAiLCJwbGF5Iiwic2V0SnVtcGluZ092ZXJQcm9wb3J0aW9uU2hvdWxkVHJpZ2dlclNvdW5kIiwiZnVsbFJlc3BvbnNlIiwiY29udGV4dFJlc3BvbnNlIiwiZWRnZUhpbnQiLCJnZXRHb0JleW9uZENvbnRleHRSZXNwb25zZSIsImhpbnRSZXNwb25zZSIsInZvaWNpbmdTcGVha0Z1bGxSZXNwb25zZSIsInNldFgiLCJub3RpZnlMaXN0ZW5lcnNTdGF0aWMiLCJsZWZ0IiwicmlnaHQiLCJuYW1lUmVzcG9uc2UiLCJzdXBwb3J0R29CZXlvbmRFZGdlUmVzcG9uc2VzIiwiZGlzdGFuY2VSZXNwb25zZVR5cGUiLCJESVNUQU5DRV9QUk9HUkVTUyIsImVuZCIsInJlc2V0IiwibmV3WSIsInJlbGVhc2VTb3VuZENsaXAiLCJhbGVydENvbnRleHRSZXNwb25zZSIsIkRJU1RBTkNFX1JFR0lPTiIsImVuYWJsZWRSYW5nZSIsIm5ld0JvdW5kcyIsIm1vZGVsSGFsZlBvaW50ZXJQb2ludGVyIiwidmlld1RvTW9kZWxEZWx0YVhZIiwiZXJvZGVkWCIsImFkZElucHV0TGlzdGVuZXIiLCJmb2N1cyIsImJsdXIiLCJkb3duIiwidG9wUmVjdCIsImZpbGwiLCJjb2xvclByb3BlcnR5IiwiYm90dG9tUmVjdCIsInRpY2tNYXJrc05vZGUiLCJ1cGRhdGVQb2ludGVyIiwicG9zaXRpb24iLCJ0cmFuc2xhdGlvbiIsIm1vZGVsVG9WaWV3UG9zaXRpb24iLCJtdXRhdGUiLCJjaGlsZHJlbiIsImxheW91dFJhdGlvSGFsZiIsImhlaWdodFNjYWxhciIsInJlY3RXaWR0aCIsInJlY3RIZWlnaHQiLCJoYW5kU2NhbGUiLCJzZXRTY2FsZU1hZ25pdHVkZSIsImZyYW1pbmdSZWN0V2lkdGgiLCJjZW50ZXJYIiwidG9wIiwiYm90dG9tIiwiYm91bmRzTm9GcmFtaW5nUmVjdHMiLCJlcm9kZWRZIiwidHJhbnNmb3JtIiwibGF5b3V0IiwicmVzZXRSYXRpb0hhbGYiLCJmcmFtaW5nUmVjdGFuZ2xlSGVpZ2h0IiwiaGFuZFBvc2l0aW9uc0Rlc2NyaWJlciIsImJvdGhIYW5kc0Rlc2NyaWJlciIsImdldEJvdGhIYW5kc0NvbnRleHRSZXNwb25zZSIsInNldEJvdHRvbU9mUmF0aW9IYWxmIiwiZGVzaXJlZEJvdHRvbSIsImxvY2FsVG9QYXJlbnRCb3VuZHMiLCJzZWxmQm91bmRzIiwibm9kZSIsImNhbGxiYWNrc0Zvck90aGVyTm9kZXMiLCJwdXNoIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJSYXRpb0hhbGYudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjAtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogQSBzaW5nbGUgY29udHJvbGxhYmxlIGhhbGYgb2YgdGhlIHByb3BvcnRpb24uIEl0IGNvbnRhaW5zIGEgZHJhZ2dhYmxlIGhhbmQgdGhhdCBjYW4gY2hhbmdlIHRoZSB2YWx1ZSBvZiB0aGlzIGhhbGYgKHRlcm0pXHJcbiAqIG9mIHRoZSByYXRpby4gVGhpcyB0eXBlIGNhbiBkaXNwbGF5IHRpY2sgbWFya3MgdGhhdCBzZWdtZW50IHRoZSBtb3ZhYmxlIHNwYWNlIGZvciB0aGUgaGFuZC5cclxuICpcclxuICogQSB0aGljayByZWN0YW5nbGUgaXMgcGxhY2VkIG9uIHRoZSB0b3AgYW5kIGJvdHRvbSBvZiB0aGlzIGZyYW1lIHRvIGN1ZSB0aGUgcG9zc2libGUgaGVpZ2h0IHRoYXQgdGhlIHBvaW50ZXIgY2FuIGJlXHJcbiAqIGRyYWdnZWQuXHJcbiAqXHJcbiAqIEBhdXRob3IgTWljaGFlbCBLYXV6bWFubiAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICovXHJcblxyXG5pbXBvcnQgQm9vbGVhblByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvQm9vbGVhblByb3BlcnR5LmpzJztcclxuaW1wb3J0IERlcml2ZWRQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL0Rlcml2ZWRQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1Byb3BlcnR5LmpzJztcclxuaW1wb3J0IEJvdW5kczIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL0JvdW5kczIuanMnO1xyXG5pbXBvcnQgUmFuZ2UgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1JhbmdlLmpzJztcclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgb3B0aW9uaXplIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgTW9kZWxWaWV3VHJhbnNmb3JtMiBmcm9tICcuLi8uLi8uLi8uLi9waGV0Y29tbW9uL2pzL3ZpZXcvTW9kZWxWaWV3VHJhbnNmb3JtMi5qcyc7XHJcbmltcG9ydCB7IERyYWdMaXN0ZW5lciwgTm9kZSwgTm9kZU9wdGlvbnMsIFBET01WYWx1ZVR5cGUsIFJlY3RhbmdsZSwgUmVjdGFuZ2xlT3B0aW9ucywgU3BlYWtpbmdPcHRpb25zLCBUUGFpbnQgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgcmF0aW9BbmRQcm9wb3J0aW9uIGZyb20gJy4uLy4uL3JhdGlvQW5kUHJvcG9ydGlvbi5qcyc7XHJcbmltcG9ydCBSYXRpb1Rlcm0gZnJvbSAnLi4vbW9kZWwvUmF0aW9UZXJtLmpzJztcclxuaW1wb3J0IHJhcENvbnN0YW50cyBmcm9tICcuLi9yYXBDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgQ3VlRGlzcGxheSBmcm9tICcuL0N1ZURpc3BsYXkuanMnO1xyXG5pbXBvcnQgUmF0aW9IYWxmVGlja01hcmtzTm9kZSBmcm9tICcuL1JhdGlvSGFsZlRpY2tNYXJrc05vZGUuanMnO1xyXG5pbXBvcnQgUmF0aW9IYW5kTm9kZSBmcm9tICcuL1JhdGlvSGFuZE5vZGUuanMnO1xyXG5pbXBvcnQgVmlld1NvdW5kcyBmcm9tICcuL3NvdW5kL1ZpZXdTb3VuZHMuanMnO1xyXG5pbXBvcnQgVGlja01hcmtWaWV3IGZyb20gJy4vVGlja01hcmtWaWV3LmpzJztcclxuaW1wb3J0IEJvdGhIYW5kc0Rlc2NyaWJlciBmcm9tICcuL2Rlc2NyaWJlcnMvQm90aEhhbmRzRGVzY3JpYmVyLmpzJztcclxuaW1wb3J0IEhhbmRQb3NpdGlvbnNEZXNjcmliZXIsIHsgSGFuZENvbnRleHRSZXNwb25zZU9wdGlvbnMgfSBmcm9tICcuL2Rlc2NyaWJlcnMvSGFuZFBvc2l0aW9uc0Rlc2NyaWJlci5qcyc7XHJcbmltcG9ydCBSQVBSYXRpb1R1cGxlIGZyb20gJy4uL21vZGVsL1JBUFJhdGlvVHVwbGUuanMnO1xyXG5pbXBvcnQgQ3VlQXJyb3dzU3RhdGUgZnJvbSAnLi9DdWVBcnJvd3NTdGF0ZS5qcyc7XHJcbmltcG9ydCBSYXRpb0Rlc2NyaWJlciBmcm9tICcuL2Rlc2NyaWJlcnMvUmF0aW9EZXNjcmliZXIuanMnO1xyXG5pbXBvcnQgVFJlYWRPbmx5UHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9UUmVhZE9ubHlQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBFbnVtZXJhdGlvblByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvRW51bWVyYXRpb25Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBEaXN0YW5jZVJlc3BvbnNlVHlwZSBmcm9tICcuL2Rlc2NyaWJlcnMvRGlzdGFuY2VSZXNwb25zZVR5cGUuanMnO1xyXG5pbXBvcnQgSW50ZW50aW9uYWxBbnkgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL0ludGVudGlvbmFsQW55LmpzJztcclxuaW1wb3J0IE1hcHBlZFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvTWFwcGVkUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgUkFQUmF0aW8gZnJvbSAnLi4vbW9kZWwvUkFQUmF0aW8uanMnO1xyXG5pbXBvcnQgVGlja01hcmtEZXNjcmliZXIgZnJvbSAnLi9kZXNjcmliZXJzL1RpY2tNYXJrRGVzY3JpYmVyLmpzJztcclxuaW1wb3J0IFJhdGlvQW5kUHJvcG9ydGlvblN0cmluZ3MgZnJvbSAnLi4vLi4vUmF0aW9BbmRQcm9wb3J0aW9uU3RyaW5ncy5qcyc7XHJcbmltcG9ydCBQYXR0ZXJuU3RyaW5nUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9QYXR0ZXJuU3RyaW5nUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgUGlja1JlcXVpcmVkIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9QaWNrUmVxdWlyZWQuanMnO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IE1JTl9GUkFNSU5HX1JFQ1RBTkdMRV9IRUlHSFQgPSAzMjtcclxuY29uc3QgTUFYX0ZSQU1JTkdfUkVDVEFOR0xFX0hFSUdIVCA9IDY0O1xyXG5cclxuLy8gU25hcCBleGNsdXNpdmUgd2l0aGluIHRoaXMgcGVyY2VudGFnZSBvZiBhIHRpY2sgbWFyay4gVGh1cyBhY3R1YWwgc25hcHBpbmcgZGlzdGFuY2UgaXMgYmFzZWQgb24gdGhlIGN1cnJlbnQgdGlja1xyXG4vLyBtYXJrIHJhbmdlIHZhbHVlLlxyXG5jb25zdCBTTkFQX1RPX1RJQ0tfTUFSS19USFJFU0hPTEQgPSAwLjE7XHJcblxyXG4vLyB0b3RhbCBob3Jpem9udGFsIGRyYWcgZGlzdGFuY2U7XHJcbmNvbnN0IFhfTU9ERUxfRFJBR19ESVNUQU5DRSA9IDE7XHJcbmNvbnN0IElOSVRJQUxfWF9WQUxVRSA9IDA7XHJcbmNvbnN0IGdldE1vZGVsQm91bmRzRnJvbVJhbmdlID0gKCByYW5nZTogUmFuZ2UgKSA9PiBuZXcgQm91bmRzMiggLVhfTU9ERUxfRFJBR19ESVNUQU5DRSAvIDIsIHJhbmdlLm1pbiwgWF9NT0RFTF9EUkFHX0RJU1RBTkNFIC8gMiwgcmFuZ2UubWF4ICk7XHJcblxyXG5jb25zdCBNSU5fSEFORF9TQ0FMRSA9IDEuMjtcclxuY29uc3QgTUFYX0hBTkRfU0NBTEUgPSAyLjU7XHJcblxyXG5jb25zdCBUT1RBTF9SQU5HRSA9IHJhcENvbnN0YW50cy5UT1RBTF9SQVRJT19URVJNX1ZBTFVFX1JBTkdFO1xyXG5cclxudHlwZSBMYXlvdXRGdW5jdGlvbiA9ICggYm91bmRzOiBCb3VuZHMyLCBoZWlnaHRTY2FsYXI6IG51bWJlciApID0+IHZvaWQ7XHJcblxyXG50eXBlIFNlbGZPcHRpb25zID0ge1xyXG4gIHJhdGlvVGVybTogUmF0aW9UZXJtO1xyXG4gIHJhdGlvOiBSQVBSYXRpbztcclxuICBkaXNwbGF5Qm90aEhhbmRzQ3VlUHJvcGVydHk6IFByb3BlcnR5PGJvb2xlYW4+O1xyXG4gIGN1ZUFycm93c1N0YXRlOiBDdWVBcnJvd3NTdGF0ZTsgLy8gaW50ZXJhY3Rpb24gc3RhdGUgdG8gZGV0ZXJtaW5lIHRoZSBpbnRlcmFjdGlvbiBjdWUgdG8gZGlzcGxheVxyXG4gIGJvdW5kczogQm91bmRzMjsgLy8gdGhlIGluaXRpYWwgYm91bmRzIHRoYXQgdGhlIE5vZGUgdGFrZXMgdXBcclxuICB0aWNrTWFya1ZpZXdQcm9wZXJ0eTogRW51bWVyYXRpb25Qcm9wZXJ0eTxUaWNrTWFya1ZpZXc+O1xyXG4gIHRpY2tNYXJrUmFuZ2VQcm9wZXJ0eTogUHJvcGVydHk8bnVtYmVyPjtcclxuICByYXRpb0Rlc2NyaWJlcjogUmF0aW9EZXNjcmliZXI7XHJcbiAgY29sb3JQcm9wZXJ0eTogVFBhaW50O1xyXG4gIGtleWJvYXJkU3RlcDogbnVtYmVyO1xyXG4gIGhvcml6b250YWxNb3ZlbWVudEFsbG93ZWRQcm9wZXJ0eTogUHJvcGVydHk8Ym9vbGVhbj47XHJcbiAgcGxheVRpY2tNYXJrQnVtcFNvdW5kUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PGJvb2xlYW4+O1xyXG5cclxuICAvLyBzZWUgSW5Qcm9wb3J0aW9uU291bmRHZW5lcmF0b3Iuc2V0SnVtcGluZ092ZXJQcm9wb3J0aW9uU2hvdWxkVHJpZ2dlclNvdW5kKClcclxuICBzZXRKdW1waW5nT3ZlclByb3BvcnRpb25TaG91bGRUcmlnZ2VyU291bmQ6ICggc2hvdWxkVHJpZ2dlclNvdW5kOiBib29sZWFuICkgPT4gdm9pZDtcclxuXHJcbiAgLy8gYSBmdW5jdGlvbiB0aGF0IGdldHMgdGhlIHZhbHVlIG9mIHRoaXMgUmF0aW9IYWxmIHRlcm0gdGhhdCB3b3VsZCBhY2hpZXZlIHRoZSB0YXJnZXRSYXRpb1xyXG4gIGdldElkZWFsVmFsdWU6ICgpID0+IG51bWJlcjtcclxuXHJcbiAgLy8gaXMgdGhlIG1vZGVsIGluIHByb3BvcnRpb24gcmlnaHQgbm93XHJcbiAgaW5Qcm9wb3J0aW9uUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PGJvb2xlYW4+O1xyXG5cclxuICAvLyByaWdodCByYXRpbyBvciB0aGUgbGVmdCByYXRpb1xyXG4gIGlzUmlnaHQ/OiBib29sZWFuO1xyXG5cclxuICAvLyBjb250cm9sIHRoZSBjb2xvciBvZiB0aGUgaGFuZFxyXG4gIGhhbmRDb2xvclByb3BlcnR5PzogVFBhaW50O1xyXG5cclxuICAvLyBBY2Nlc3NpYmxlVmFsdWVIYW5kbGVyIHZpYSBSYXRpb0hhbmROb2RlXHJcbiAgYTExeURlcGVuZGVuY2llcz86IFRSZWFkT25seVByb3BlcnR5PEludGVudGlvbmFsQW55PltdO1xyXG4gIGJvdGhIYW5kc0N1ZURpc3BsYXk/OiBDdWVEaXNwbGF5O1xyXG4gIGFjY2Vzc2libGVOYW1lOiBUUmVhZE9ubHlQcm9wZXJ0eTxzdHJpbmc+OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHJlcXVpcmUtcHJvcGVydHktc3VmZml4XHJcbn07XHJcblxyXG50eXBlIFJhdGlvSGFsZk9wdGlvbnMgPSBTZWxmT3B0aW9ucyAmIFJlY3RhbmdsZU9wdGlvbnMgJiBQaWNrUmVxdWlyZWQ8UmVjdGFuZ2xlT3B0aW9ucywgJ3RhbmRlbSc+O1xyXG5cclxuY2xhc3MgUmF0aW9IYWxmIGV4dGVuZHMgUmVjdGFuZ2xlIHtcclxuXHJcbiAgLy8gdGhlIGhlaWdodCBvZiB0aGUgZnJhbWluZyByZWN0YW5nbGVzLCB1cGRhdGVkIGluIGxheW91dCBmdW5jdGlvblxyXG4gIHB1YmxpYyBfZnJhbWluZ1JlY3RhbmdsZUhlaWdodDogbnVtYmVyO1xyXG5cclxuICAvLyBUaGlzIGJlaGF2ZXMgYSBiaXQgZGlmZmVyZW50bHkgZGVwZW5kaW5nIG9uIG1vZGFsaXR5LiBGb3IgbW91c2UvdG91Y2gsIGFueSB0aW1lIHlvdSBhcmVcclxuICAvLyBkcmFnZ2luZyB0aGlzIHdpbGwgYmUgY29uc2lkZXJlZCBpbnRlcmFjdGlvbiwgZm9yIGtleWJvYXJkLCB5b3UgbXVzdCBwcmVzcyBhIGtleSBiZWZvcmUgdGhlIGludGVyYWN0aW9uIHN0YXJ0cy5cclxuICAvLyBOb3RlIGJvdGggbWVtYmVycyB0byBrZWVwIGEgcHVibGljIHJlYWRvbmx5IGludGVyZmFjZS5cclxuICBwdWJsaWMgcmVhZG9ubHkgaXNCZWluZ0ludGVyYWN0ZWRXaXRoUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PGJvb2xlYW4+O1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgX2lzQmVpbmdJbnRlcmFjdGVkV2l0aFByb3BlcnR5OiBCb29sZWFuUHJvcGVydHk7XHJcblxyXG4gIHByaXZhdGUgcmVhZG9ubHkgcmF0aW86IFJBUFJhdGlvO1xyXG4gIHByb3RlY3RlZCByZWFkb25seSBkZXNjcmlwdGlvbkhhbmRQb3NpdGlvbnNEZXNjcmliZXI6IEhhbmRQb3NpdGlvbnNEZXNjcmliZXI7XHJcbiAgcHJpdmF0ZSByZWFkb25seSB2b2ljaW5nSGFuZFBvc2l0aW9uc0Rlc2NyaWJlcjogSGFuZFBvc2l0aW9uc0Rlc2NyaWJlcjtcclxuICBwcml2YXRlIHJlYWRvbmx5IHRpY2tNYXJrVmlld1Byb3BlcnR5OiBFbnVtZXJhdGlvblByb3BlcnR5PFRpY2tNYXJrVmlldz47XHJcbiAgcHJpdmF0ZSByZWFkb25seSByYXRpb1Rlcm06IFJhdGlvVGVybTtcclxuXHJcbiAgLy8gVGhlIGRyYWdnYWJsZSBlbGVtZW50IGluc2lkZSB0aGUgTm9kZSBmcmFtZWQgd2l0aCB0aGljayByZWN0YW5nbGVzIG9uIHRoZSB0b3AgYW5kIGJvdHRvbS5cclxuICBwcml2YXRlIHJhdGlvSGFuZE5vZGU6IFJhdGlvSGFuZE5vZGU7XHJcbiAgcHJpdmF0ZSBsYXlvdXRSYXRpb0hhbGY6IExheW91dEZ1bmN0aW9uO1xyXG4gIHByaXZhdGUgcmVzZXRSYXRpb0hhbGY6ICgpID0+IHZvaWQ7XHJcblxyXG4gIC8vIEFjY2VzcyB0aGlzIHRvIHVzZSB2aWV3IHNvdW5kcyByZWxhdGVkIHRvIHRoaXMgUmF0aW9IYWxmLlxyXG4gIHB1YmxpYyB2aWV3U291bmRzOiBWaWV3U291bmRzO1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIHByb3ZpZGVkT3B0aW9uczogUmF0aW9IYWxmT3B0aW9ucyApIHtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPFJhdGlvSGFsZk9wdGlvbnMsIFNlbGZPcHRpb25zLCBSZWN0YW5nbGVPcHRpb25zPigpKCB7XHJcbiAgICAgIGlzUmlnaHQ6IHRydWUsXHJcbiAgICAgIGhhbmRDb2xvclByb3BlcnR5OiBuZXcgUHJvcGVydHkoICdibGFjaycgKSxcclxuICAgICAgYTExeURlcGVuZGVuY2llczogW10sXHJcbiAgICAgIGJvdGhIYW5kc0N1ZURpc3BsYXk6IEN1ZURpc3BsYXkuVVBfRE9XTixcclxuXHJcbiAgICAgIC8vIHBoZXQtaW9cclxuICAgICAgcGhldGlvSW5wdXRFbmFibGVkUHJvcGVydHlJbnN0cnVtZW50ZWQ6IHRydWUsXHJcblxyXG4gICAgICAvLyBwZG9tXHJcbiAgICAgIHRhZ05hbWU6ICdkaXYnLFxyXG4gICAgICBhY2Nlc3NpYmxlTmFtZUJlaGF2aW9yOiBSYXRpb0hhbGYuUkFUSU9fSEFMRl9BQ0NFU1NJQkxFX05BTUVfQkVIQVZJT1JcclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIHN1cGVyKCAwLCAwLCBvcHRpb25zLmJvdW5kcy53aWR0aCwgb3B0aW9ucy5ib3VuZHMuaGVpZ2h0ICk7XHJcblxyXG4gICAgdGhpcy5fZnJhbWluZ1JlY3RhbmdsZUhlaWdodCA9IE1JTl9GUkFNSU5HX1JFQ1RBTkdMRV9IRUlHSFQ7XHJcblxyXG4gICAgLy8gVGFuZGVtIGlzIGEgZGlmZmVyZW50IG5hbWUgdG8ga2VlcCBhIGBwdWJsaWMgcmVhZG9ubHlgIGludGVyZmFjZSB3aXRob3V0IGRlcGVuZGluZyBvbiBnZXR0ZXJzIGFuZCBzZXR0ZXJzLlxyXG4gICAgdGhpcy5faXNCZWluZ0ludGVyYWN0ZWRXaXRoUHJvcGVydHkgPSBuZXcgQm9vbGVhblByb3BlcnR5KCBmYWxzZSwge1xyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2lzQmVpbmdJbnRlcmFjdGVkV2l0aFByb3BlcnR5JyApXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmlzQmVpbmdJbnRlcmFjdGVkV2l0aFByb3BlcnR5ID0gdGhpcy5faXNCZWluZ0ludGVyYWN0ZWRXaXRoUHJvcGVydHk7XHJcblxyXG4gICAgdGhpcy5yYXRpbyA9IG9wdGlvbnMucmF0aW87XHJcblxyXG4gICAgY29uc3QgdGlja01hcmtEZXNjcmliZXIgPSBuZXcgVGlja01hcmtEZXNjcmliZXIoIG9wdGlvbnMudGlja01hcmtSYW5nZVByb3BlcnR5LCBvcHRpb25zLnRpY2tNYXJrVmlld1Byb3BlcnR5ICk7XHJcblxyXG4gICAgdGhpcy5kZXNjcmlwdGlvbkhhbmRQb3NpdGlvbnNEZXNjcmliZXIgPSBuZXcgSGFuZFBvc2l0aW9uc0Rlc2NyaWJlciggdGhpcy5yYXRpby50dXBsZVByb3BlcnR5LCB0aWNrTWFya0Rlc2NyaWJlcixcclxuICAgICAgb3B0aW9ucy5pblByb3BvcnRpb25Qcm9wZXJ0eSwgdGhpcy5yYXRpby5lbmFibGVkUmF0aW9UZXJtc1JhbmdlUHJvcGVydHksIHRoaXMucmF0aW8ubG9ja2VkUHJvcGVydHkgKTtcclxuXHJcbiAgICB0aGlzLnZvaWNpbmdIYW5kUG9zaXRpb25zRGVzY3JpYmVyID0gbmV3IEhhbmRQb3NpdGlvbnNEZXNjcmliZXIoIHRoaXMucmF0aW8udHVwbGVQcm9wZXJ0eSwgdGlja01hcmtEZXNjcmliZXIsXHJcbiAgICAgIG9wdGlvbnMuaW5Qcm9wb3J0aW9uUHJvcGVydHksIHRoaXMucmF0aW8uZW5hYmxlZFJhdGlvVGVybXNSYW5nZVByb3BlcnR5LCB0aGlzLnJhdGlvLmxvY2tlZFByb3BlcnR5ICk7XHJcblxyXG4gICAgdGhpcy50aWNrTWFya1ZpZXdQcm9wZXJ0eSA9IG9wdGlvbnMudGlja01hcmtWaWV3UHJvcGVydHk7XHJcbiAgICB0aGlzLnJhdGlvVGVybSA9IG9wdGlvbnMucmF0aW9UZXJtO1xyXG5cclxuICAgIC8vIEJvdGhIYW5kc0Rlc2NyaWJlciBrZWVwcyBzdGF0ZSB0aGF0IGRlcGVuZHMgb24gaG93IG9mdGVuIHlvdSBhc2sgZm9yIGNvbnRlbnQsIHNvIGtlZXAgYSBkaWZmZXJlbnQgcmVmZXJlbmNlIGZvclxyXG4gICAgLy8gZWFjaCBjb21tdW5pY2F0aW9uIG1vZGFsaXR5LlxyXG4gICAgY29uc3QgZGVzY3JpcHRpb25Cb3RoSGFuZHNEZXNjcmliZXIgPSBuZXcgQm90aEhhbmRzRGVzY3JpYmVyKFxyXG4gICAgICB0aGlzLnJhdGlvLnR1cGxlUHJvcGVydHksXHJcbiAgICAgIHRoaXMucmF0aW8uZW5hYmxlZFJhdGlvVGVybXNSYW5nZVByb3BlcnR5LFxyXG4gICAgICB0aGlzLnJhdGlvLmxvY2tlZFByb3BlcnR5LFxyXG4gICAgICB0aGlzLnRpY2tNYXJrVmlld1Byb3BlcnR5LFxyXG4gICAgICBvcHRpb25zLmluUHJvcG9ydGlvblByb3BlcnR5LFxyXG4gICAgICBvcHRpb25zLnJhdGlvRGVzY3JpYmVyLFxyXG4gICAgICBuZXcgVGlja01hcmtEZXNjcmliZXIoIG9wdGlvbnMudGlja01hcmtSYW5nZVByb3BlcnR5LCBvcHRpb25zLnRpY2tNYXJrVmlld1Byb3BlcnR5IClcclxuICAgICk7XHJcbiAgICBjb25zdCB2b2ljaW5nQm90aEhhbmRzRGVzY3JpYmVyID0gbmV3IEJvdGhIYW5kc0Rlc2NyaWJlcihcclxuICAgICAgdGhpcy5yYXRpby50dXBsZVByb3BlcnR5LFxyXG4gICAgICB0aGlzLnJhdGlvLmVuYWJsZWRSYXRpb1Rlcm1zUmFuZ2VQcm9wZXJ0eSxcclxuICAgICAgdGhpcy5yYXRpby5sb2NrZWRQcm9wZXJ0eSxcclxuICAgICAgdGhpcy50aWNrTWFya1ZpZXdQcm9wZXJ0eSxcclxuICAgICAgb3B0aW9ucy5pblByb3BvcnRpb25Qcm9wZXJ0eSxcclxuICAgICAgb3B0aW9ucy5yYXRpb0Rlc2NyaWJlcixcclxuICAgICAgbmV3IFRpY2tNYXJrRGVzY3JpYmVyKCBvcHRpb25zLnRpY2tNYXJrUmFuZ2VQcm9wZXJ0eSwgb3B0aW9ucy50aWNrTWFya1ZpZXdQcm9wZXJ0eSApXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMudmlld1NvdW5kcyA9IG5ldyBWaWV3U291bmRzKCBvcHRpb25zLnRpY2tNYXJrUmFuZ2VQcm9wZXJ0eSwgb3B0aW9ucy50aWNrTWFya1ZpZXdQcm9wZXJ0eSwgb3B0aW9ucy5wbGF5VGlja01hcmtCdW1wU291bmRQcm9wZXJ0eSApO1xyXG5cclxuICAgIC8vIFRoaXMgZm9sbG93cyB0aGUgc3BlYyBvdXRsaW5lZCBpbiBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvcmF0aW8tYW5kLXByb3BvcnRpb24vaXNzdWVzLzgxXHJcbiAgICBjb25zdCBjdWVEaXNwbGF5U3RhdGVQcm9wZXJ0eTogVFJlYWRPbmx5UHJvcGVydHk8Q3VlRGlzcGxheT4gPSBuZXcgRGVyaXZlZFByb3BlcnR5KCBbXHJcbiAgICAgICAgb3B0aW9ucy5jdWVBcnJvd3NTdGF0ZS5pbnRlcmFjdGVkV2l0aEtleWJvYXJkUHJvcGVydHksXHJcbiAgICAgICAgb3B0aW9ucy5jdWVBcnJvd3NTdGF0ZS5pbnRlcmFjdGVkV2l0aE1vdXNlUHJvcGVydHksXHJcbiAgICAgICAgb3B0aW9ucy5jdWVBcnJvd3NTdGF0ZS5rZXlib2FyZEZvY3VzZWRQcm9wZXJ0eSxcclxuICAgICAgICBvcHRpb25zLmN1ZUFycm93c1N0YXRlLmJvdGhIYW5kcy5pbnRlcmFjdGVkV2l0aFByb3BlcnR5LFxyXG4gICAgICAgIG9wdGlvbnMuZGlzcGxheUJvdGhIYW5kc0N1ZVByb3BlcnR5XHJcbiAgICAgIF0sXHJcbiAgICAgICggaW50ZXJhY3RlZFdpdGhLZXlib2FyZCxcclxuICAgICAgICBpbnRlcmFjdGVkV2l0aE1vdXNlLFxyXG4gICAgICAgIGtleWJvYXJkRm9jdXNlZCxcclxuICAgICAgICBib3RoSGFuZHNJbnRlcmFjdGVkV2l0aCxcclxuICAgICAgICBkaXNwbGF5Qm90aEhhbmRzICkgPT4ge1xyXG4gICAgICAgIHJldHVybiBkaXNwbGF5Qm90aEhhbmRzID8gb3B0aW9ucy5ib3RoSGFuZHNDdWVEaXNwbGF5IDpcclxuICAgICAgICAgICAgICAga2V5Ym9hcmRGb2N1c2VkICYmICFpbnRlcmFjdGVkV2l0aEtleWJvYXJkID8gQ3VlRGlzcGxheS5VUF9ET1dOIDpcclxuICAgICAgICAgICAgICAgKCBpbnRlcmFjdGVkV2l0aEtleWJvYXJkIHx8IGludGVyYWN0ZWRXaXRoTW91c2UgfHwgYm90aEhhbmRzSW50ZXJhY3RlZFdpdGggKSA/IEN1ZURpc3BsYXkuTk9ORSA6XHJcbiAgICAgICAgICAgICAgIEN1ZURpc3BsYXkuQVJST1dTO1xyXG4gICAgICB9ICk7XHJcblxyXG5cclxuICAgIC8vIENyZWF0ZSBhIG1hcHBpbmcgZGlyZWN0bHkgdG8ganVzdCB0aGlzIHJhdGlvIHRlcm0gdmFsdWUuIFRoaXMgaXMgdG8gc3VwcG9ydFxyXG4gICAgLy8gQWNjZXNzaWJsZVZhbHVlSGFuZGxlciwgd2hpY2ggcG93ZXJzIHRoZSBQRE9NIGludGVyYWN0aW9uIG9mZiBvZiB7UHJvcGVydHkuPG51bWJlcj59LlxyXG4gICAgY29uc3QgcmF0aW9UZXJtU3BlY2lmaWNQcm9wZXJ0eSA9IG5ldyBNYXBwZWRQcm9wZXJ0eSggdGhpcy5yYXRpby50dXBsZVByb3BlcnR5LCB7XHJcbiAgICAgIGJpZGlyZWN0aW9uYWw6IHRydWUsXHJcbiAgICAgIHJlZW50cmFudDogdHJ1ZSxcclxuICAgICAgdmFsdWVUeXBlOiAnbnVtYmVyJyxcclxuICAgICAgbWFwOiAoIHJhdGlvVHVwbGU6IFJBUFJhdGlvVHVwbGUgKSA9PiByYXRpb1R1cGxlLmdldEZvclRlcm0oIHRoaXMucmF0aW9UZXJtICksXHJcbiAgICAgIGludmVyc2VNYXA6ICggdGVybTogbnVtYmVyICkgPT4gdGhpcy5yYXRpb1Rlcm0gPT09IFJhdGlvVGVybS5BTlRFQ0VERU5UID8gdGhpcy5yYXRpby50dXBsZVByb3BlcnR5LnZhbHVlLndpdGhBbnRlY2VkZW50KCB0ZXJtICkgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmF0aW9UZXJtID09PSBSYXRpb1Rlcm0uQ09OU0VRVUVOVCA/IHRoaXMucmF0aW8udHVwbGVQcm9wZXJ0eS52YWx1ZS53aXRoQ29uc2VxdWVudCggdGVybSApIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIGFzc2VydCAmJiBhc3NlcnQoIGZhbHNlLCBgdW5leHBlY3RlZCByYXRpb1Rlcm0gJHt0aGlzLnJhdGlvVGVybX1gICkgKSBhcyB1bmtub3duIGFzIFJBUFJhdGlvVHVwbGVcclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCBjcmVhdGVPYmplY3RSZXNwb25zZSA9ICgpID0+IG9wdGlvbnMucmF0aW9EZXNjcmliZXIuZ2V0UHJveGltaXR5VG9DaGFsbGVuZ2VSYXRpbygpO1xyXG5cclxuICAgIHRoaXMucmF0aW9IYW5kTm9kZSA9IG5ldyBSYXRpb0hhbmROb2RlKFxyXG4gICAgICBvcHRpb25zLnRpY2tNYXJrVmlld1Byb3BlcnR5LFxyXG4gICAgICBvcHRpb25zLmtleWJvYXJkU3RlcCxcclxuICAgICAgb3B0aW9ucy5oYW5kQ29sb3JQcm9wZXJ0eSxcclxuICAgICAgY3VlRGlzcGxheVN0YXRlUHJvcGVydHksXHJcbiAgICAgIG9wdGlvbnMuZ2V0SWRlYWxWYWx1ZSxcclxuICAgICAgb3B0aW9ucy5pblByb3BvcnRpb25Qcm9wZXJ0eSwge1xyXG4gICAgICAgIHZhbHVlUHJvcGVydHk6IHJhdGlvVGVybVNwZWNpZmljUHJvcGVydHksXHJcbiAgICAgICAgZW5hYmxlZFJhbmdlUHJvcGVydHk6IHRoaXMucmF0aW8uZW5hYmxlZFJhdGlvVGVybXNSYW5nZVByb3BlcnR5LFxyXG4gICAgICAgIHN0YXJ0RHJhZzogKCkgPT4ge1xyXG4gICAgICAgICAgb3B0aW9ucy5jdWVBcnJvd3NTdGF0ZS5pbnRlcmFjdGVkV2l0aEtleWJvYXJkUHJvcGVydHkudmFsdWUgPSB0cnVlO1xyXG4gICAgICAgICAgdGhpcy5faXNCZWluZ0ludGVyYWN0ZWRXaXRoUHJvcGVydHkudmFsdWUgPSB0cnVlO1xyXG4gICAgICAgICAgdGhpcy52aWV3U291bmRzLmJvdW5kYXJ5U291bmRDbGlwLm9uU3RhcnRJbnRlcmFjdGlvbigpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZHJhZzogKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy52aWV3U291bmRzLmJvdW5kYXJ5U291bmRDbGlwLm9uSW50ZXJhY3QoIHRoaXMucmF0aW8udHVwbGVQcm9wZXJ0eS52YWx1ZS5nZXRGb3JUZXJtKCB0aGlzLnJhdGlvVGVybSApICk7XHJcbiAgICAgICAgICB0aGlzLnZpZXdTb3VuZHMudGlja01hcmtCdW1wU291bmRDbGlwLm9uSW50ZXJhY3QoIHRoaXMucmF0aW8udHVwbGVQcm9wZXJ0eS52YWx1ZS5nZXRGb3JUZXJtKCB0aGlzLnJhdGlvVGVybSApICk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbmREcmFnOiAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnZpZXdTb3VuZHMuYm91bmRhcnlTb3VuZENsaXAub25FbmRJbnRlcmFjdGlvbiggdGhpcy5yYXRpby50dXBsZVByb3BlcnR5LnZhbHVlLmdldEZvclRlcm0oIHRoaXMucmF0aW9UZXJtICkgKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGlzUmlnaHQ6IG9wdGlvbnMuaXNSaWdodCxcclxuXHJcbiAgICAgICAgYTExeUNyZWF0ZUFyaWFWYWx1ZVRleHQ6IGNyZWF0ZU9iamVjdFJlc3BvbnNlLFxyXG4gICAgICAgIHZvaWNpbmdPYmplY3RSZXNwb25zZTogY3JlYXRlT2JqZWN0UmVzcG9uc2UsXHJcblxyXG4gICAgICAgIGExMXlDcmVhdGVDb250ZXh0UmVzcG9uc2VBbGVydDogKCkgPT4gdGhpcy5nZXRTaW5nbGVIYW5kQ29udGV4dFJlc3BvbnNlKCB0aGlzLmRlc2NyaXB0aW9uSGFuZFBvc2l0aW9uc0Rlc2NyaWJlciwgZGVzY3JpcHRpb25Cb3RoSGFuZHNEZXNjcmliZXIgKSxcclxuICAgICAgICB2b2ljaW5nQ29udGV4dFJlc3BvbnNlOiAoKSA9PiB0aGlzLmdldFNpbmdsZUhhbmRDb250ZXh0UmVzcG9uc2UoIHRoaXMudm9pY2luZ0hhbmRQb3NpdGlvbnNEZXNjcmliZXIsIHZvaWNpbmdCb3RoSGFuZHNEZXNjcmliZXIgKSxcclxuICAgICAgICBhMTF5RGVwZW5kZW5jaWVzOiBvcHRpb25zLmExMXlEZXBlbmRlbmNpZXMuY29uY2F0KCBbIHRoaXMucmF0aW8ubG9ja2VkUHJvcGVydHkgXSApXHJcbiAgICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCBwcm92aWRlZEFjY2Vzc2libGVOYW1lID0gb3B0aW9ucy5hY2Nlc3NpYmxlTmFtZTtcclxuXHJcbiAgICBjb25zdCBoYW5kTG9ja2VkUGF0dGVyblN0cmluZ1Byb3BlcnR5ID0gbmV3IFBhdHRlcm5TdHJpbmdQcm9wZXJ0eSggUmF0aW9BbmRQcm9wb3J0aW9uU3RyaW5ncy5hMTF5LmhhbmRMb2NrZWRQYXR0ZXJuU3RyaW5nUHJvcGVydHksIHtcclxuICAgICAgaGFuZDogcHJvdmlkZWRBY2Nlc3NpYmxlTmFtZVxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IGFjY2Vzc2libGVOYW1lUHJvcGVydHkgPSBuZXcgRGVyaXZlZFByb3BlcnR5KCBbXHJcbiAgICAgIHRoaXMucmF0aW8ubG9ja2VkUHJvcGVydHksXHJcbiAgICAgIGhhbmRMb2NrZWRQYXR0ZXJuU3RyaW5nUHJvcGVydHlcclxuICAgIF0sIGxvY2tlZCA9PiB7XHJcbiAgICAgIHJldHVybiAhbG9ja2VkID8gcHJvdmlkZWRBY2Nlc3NpYmxlTmFtZSA6IGhhbmRMb2NrZWRQYXR0ZXJuU3RyaW5nUHJvcGVydHk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gYWNjZXNzaWJsZSBuYW1lIGlzIGFsc28gdGhlIHZvaWNpbmcgbmFtZSByZXNwb25zZSwgdW5sZXNzIGxvY2tlZFxyXG4gICAgYWNjZXNzaWJsZU5hbWVQcm9wZXJ0eS5saW5rKCBuZXdBY2Nlc3NpYmxlTmFtZSA9PiB7XHJcbiAgICAgIHRoaXMuYWNjZXNzaWJsZU5hbWUgPSBuZXdBY2Nlc3NpYmxlTmFtZTtcclxuICAgICAgdGhpcy5yYXRpb0hhbmROb2RlLnZvaWNpbmdOYW1lUmVzcG9uc2UgPSBuZXdBY2Nlc3NpYmxlTmFtZTtcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBUaGlzIGNhbiBjaGFuZ2UgYW55dGltZSB0aGVyZSBpcyBhIGxheW91dCB1cGRhdGUuXHJcbiAgICBsZXQgbW9kZWxWaWV3VHJhbnNmb3JtID0gTW9kZWxWaWV3VHJhbnNmb3JtMi5jcmVhdGVSZWN0YW5nbGVJbnZlcnRlZFlNYXBwaW5nKFxyXG4gICAgICBnZXRNb2RlbEJvdW5kc0Zyb21SYW5nZSggVE9UQUxfUkFOR0UgKSxcclxuICAgICAgb3B0aW9ucy5ib3VuZHMgKTtcclxuXHJcbiAgICAvLyBTbmFwIG1vdXNlL3RvdWNoIGlucHV0IHRvIHRoZSBuZWFyZXN0IHRpY2sgbWFyayBpZiBjbG9zZSBlbm91Z2guIFRoaXMgaGVscHMgd2l0aCByZXByb2R1Y2libGUgcHJlY2lzaW9uXHJcbiAgICBjb25zdCBnZXRTbmFwVG9UaWNrTWFya1ZhbHVlID0gKCB5VmFsdWU6IG51bWJlciApID0+IHtcclxuICAgICAgaWYgKCBUaWNrTWFya1ZpZXcuZGlzcGxheUhvcml6b250YWwoIG9wdGlvbnMudGlja01hcmtWaWV3UHJvcGVydHkudmFsdWUgKSApIHtcclxuICAgICAgICBjb25zdCB0aWNrTWFya1N0ZXAgPSAxIC8gb3B0aW9ucy50aWNrTWFya1JhbmdlUHJvcGVydHkudmFsdWU7XHJcblxyXG4gICAgICAgIC8vIGl0ZXJhdGUgdGhyb3VnaCBtb2RlbCB2YWx1ZXMgb2YgZWFjaCB0aWNrIG1hcmtcclxuICAgICAgICBmb3IgKCBsZXQgaSA9IFRPVEFMX1JBTkdFLm1pbjsgaSA8IFRPVEFMX1JBTkdFLm1heDsgaSArPSB0aWNrTWFya1N0ZXAgKSB7XHJcbiAgICAgICAgICBpZiAoIE1hdGguYWJzKCB5VmFsdWUgLSBpICkgPCB0aWNrTWFya1N0ZXAgKiBTTkFQX1RPX1RJQ0tfTUFSS19USFJFU0hPTEQgKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBCdWcgb2NjdXJzIHdoZW4gZHJhZ2dpbmcgdG8gdGhlIHRvcCB3aXRoIHRpY2sgbWFya3MgZW5hYmxlZCwgdGhlIHZhbHVlIGlzIDEsIGJ1dCBzbmFwcyB0byAuOTk5OTk5IHVubGVzcyByb3VuZGVkXHJcbiAgICAgICAgICAgIHJldHVybiByYXBDb25zdGFudHMudG9GaXhlZCggaSApOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhZC1zaW0tdGV4dFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gTm8gc25hcHBpbmcgaW4gdGhpcyBjYXNlLCBqdXN0IHJldHVybiB0aGUgcHJvdmlkZWQgdmFsdWUuXHJcbiAgICAgIHJldHVybiB5VmFsdWU7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGluaXRpYWxWZWN0b3IgPSBuZXcgVmVjdG9yMiggSU5JVElBTF9YX1ZBTFVFLCAwICk7XHJcbiAgICBsZXQgbWFwcGluZ0luaXRpYWxWYWx1ZSA9IHRydWU7XHJcblxyXG4gICAgLy8gT25seSB0aGUgUmF0aW9IYWxmIERyYWdMaXN0ZW5lciBhbGxvd3MgZm9yIGhvcml6b250YWwgbW92ZW1lbnQsIHNvIHN1cHBvcnQgdGhhdCBoZXJlLiBUaGlzIGFkZHMgdGhlIGhvcml6b250YWwgYXhpcy5cclxuICAgIC8vIFdlIGV4cGFuZCBvbiByYXRpb1Rlcm1TcGVjaWZpY1Byb3BlcnR5IHNpbmNlIHdlIGFscmVhZHkgaGF2ZSBpdCwgYnV0IHdlIGNvdWxkIGFsc28ganVzdCB1c2UgdGhlIHJhdGlvLnR1cGxlUHJvcGVydHkuXHJcbiAgICBjb25zdCBwb3NpdGlvblByb3BlcnR5OiBNYXBwZWRQcm9wZXJ0eTxWZWN0b3IyLCBudW1iZXI+ID0gbmV3IE1hcHBlZFByb3BlcnR5PFZlY3RvcjIsIG51bWJlcj4oIHJhdGlvVGVybVNwZWNpZmljUHJvcGVydHksIHtcclxuICAgICAgcmVlbnRyYW50OiB0cnVlLFxyXG4gICAgICBiaWRpcmVjdGlvbmFsOiB0cnVlLFxyXG4gICAgICB2YWx1ZVR5cGU6IFZlY3RvcjIsXHJcbiAgICAgIGludmVyc2VNYXA6ICggdmVjdG9yMjogVmVjdG9yMiApID0+IHZlY3RvcjIueSxcclxuICAgICAgbWFwOiAoIG51bWJlcjogbnVtYmVyICkgPT4ge1xyXG5cclxuICAgICAgICAvLyBpbml0aWFsIGNhc2VcclxuICAgICAgICBpZiAoIG1hcHBpbmdJbml0aWFsVmFsdWUgKSB7XHJcbiAgICAgICAgICBtYXBwaW5nSW5pdGlhbFZhbHVlID0gZmFsc2U7XHJcbiAgICAgICAgICByZXR1cm4gaW5pdGlhbFZlY3Rvci5zZXRZKCBudW1iZXIgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gcG9zaXRpb25Qcm9wZXJ0eS52YWx1ZS5jb3B5KCkuc2V0WSggbnVtYmVyICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgZHJhZ0JvdW5kc1Byb3BlcnR5ID0gbmV3IFByb3BlcnR5KCBuZXcgQm91bmRzMiggMCwgMCwgMSwgMSApICk7XHJcblxyXG4gICAgLy8gV2hlbiBzZXQgdG8gYSB2YWx1ZSwgdGhlIGhvcml6b250YWwgcG9zaXRpb24gd2lsbCBub3QgYmUgY2hhbmdlZCB0aHJvdWdob3V0IHRoZSB3aG9sZSBkcmFnLiBTZXQgdG8gbnVsbCB3aGVuIG5vdCBkcmFnZ2luZy5cclxuICAgIGxldCBzdGFydGluZ1g6IG51bGwgfCBudW1iZXIgPSBudWxsO1xyXG4gICAgbGV0IHN0YXJ0aW5nWSA9IC0xO1xyXG4gICAgbGV0IHBvc2l0aW9uQ2hhbmdlZCA9IGZhbHNlO1xyXG4gICAgbGV0IHByZXZpb3VzWU9uTGFzdFZvaWNpbmcgPSAtMTtcclxuXHJcbiAgICAvLyB0cmFuc2Zvcm0gYW5kIGRyYWdCb3VuZHMgc2V0IGluIGxheW91dCBjb2RlIGJlbG93XHJcbiAgICBjb25zdCBkcmFnTGlzdGVuZXIgPSBuZXcgRHJhZ0xpc3RlbmVyKCB7XHJcbiAgICAgIHBvc2l0aW9uUHJvcGVydHk6IHBvc2l0aW9uUHJvcGVydHksXHJcbiAgICAgIG1hcFBvc2l0aW9uOiB2ZWN0b3IyID0+IHtcclxuXHJcbiAgICAgICAgLy8gVGhlIHRyYW5zZm9ybSBjYW4gcHJvZHVjZSByb3VuZGluZyBlcnJvcnMsIGFuZCB3ZSBkZXBlbmQgb24gYm91bmRhcnkgcG9zaXRpb25zIHRvIGJlIGV4YWN0bHkgYXQgMCBhbmQgMVxyXG4gICAgICAgIC8vIChmb3IgY29tcGFyaXNvbikuIFRoaXMgc29sdmVzIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9yYXRpby1hbmQtcHJvcG9ydGlvbi9pc3N1ZXMvNDY3IGFuZCBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvcmF0aW8tYW5kLXByb3BvcnRpb24vaXNzdWVzLzQ1NyNpc3N1ZWNvbW1lbnQtMTEzMzEyNTY1NlxyXG4gICAgICAgIHZlY3RvcjIueCA9IHJhcENvbnN0YW50cy50b0ZpeGVkKCB2ZWN0b3IyLnggKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBiYWQtc2ltLXRleHRcclxuICAgICAgICB2ZWN0b3IyLnkgPSByYXBDb25zdGFudHMudG9GaXhlZCggdmVjdG9yMi55ICk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFkLXNpbS10ZXh0XHJcbiAgICAgICAgcmV0dXJuIGRyYWdCb3VuZHNQcm9wZXJ0eS52YWx1ZS5jbG9zZXN0UG9pbnRUbyggdmVjdG9yMiApO1xyXG4gICAgICB9LFxyXG4gICAgICBzdGFydDogKCkgPT4ge1xyXG4gICAgICAgIGlmICggb3B0aW9ucy5ob3Jpem9udGFsTW92ZW1lbnRBbGxvd2VkUHJvcGVydHkudmFsdWUgKSB7XHJcbiAgICAgICAgICBzdGFydGluZ1ggPSBwb3NpdGlvblByb3BlcnR5LnZhbHVlLng7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGFydGluZ1kgPSBwb3NpdGlvblByb3BlcnR5LnZhbHVlLnk7XHJcbiAgICAgICAgcG9zaXRpb25DaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgcHJldmlvdXNZT25MYXN0Vm9pY2luZyA9IHBvc2l0aW9uUHJvcGVydHkudmFsdWUueTtcclxuXHJcbiAgICAgICAgdGhpcy52aWV3U291bmRzLmdyYWJTb3VuZENsaXAucGxheSgpO1xyXG4gICAgICAgIG9wdGlvbnMuY3VlQXJyb3dzU3RhdGUuaW50ZXJhY3RlZFdpdGhNb3VzZVByb3BlcnR5LnZhbHVlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgb3B0aW9ucy5zZXRKdW1waW5nT3ZlclByb3BvcnRpb25TaG91bGRUcmlnZ2VyU291bmQoIHRydWUgKTtcclxuICAgICAgICB0aGlzLnZpZXdTb3VuZHMuYm91bmRhcnlTb3VuZENsaXAub25TdGFydEludGVyYWN0aW9uKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGZ1bGxSZXNwb25zZTogU3BlYWtpbmdPcHRpb25zID0ge1xyXG4gICAgICAgICAgY29udGV4dFJlc3BvbnNlOiBudWxsIC8vIElmIHdlIGV2ZXIgaGF2ZSBhIGNvbnRleHQgcmVzcG9uc2UsIG1ha2Ugc3VyZSB3ZSBkb24ndCBoYXZlIGdvLWJleW9uZCBlZGdlIHJlc3BvbnNlcy5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBlZGdlSGludCA9IHRoaXMudm9pY2luZ0hhbmRQb3NpdGlvbnNEZXNjcmliZXIuZ2V0R29CZXlvbmRDb250ZXh0UmVzcG9uc2UoIHRoaXMucmF0aW8udHVwbGVQcm9wZXJ0eS52YWx1ZSwgdGhpcy5yYXRpb1Rlcm0gKTtcclxuICAgICAgICBpZiAoIGVkZ2VIaW50ICkge1xyXG4gICAgICAgICAgZnVsbFJlc3BvbnNlLmhpbnRSZXNwb25zZSA9IGVkZ2VIaW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJhdGlvSGFuZE5vZGUudm9pY2luZ1NwZWFrRnVsbFJlc3BvbnNlKCBmdWxsUmVzcG9uc2UgKTtcclxuICAgICAgfSxcclxuICAgICAgZHJhZzogKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2lzQmVpbmdJbnRlcmFjdGVkV2l0aFByb3BlcnR5LnZhbHVlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgaWYgKCB0eXBlb2Ygc3RhcnRpbmdYID09PSAnbnVtYmVyJyApIHtcclxuICAgICAgICAgIHBvc2l0aW9uUHJvcGVydHkudmFsdWUuc2V0WCggc3RhcnRpbmdYICk7XHJcbiAgICAgICAgICBwb3NpdGlvblByb3BlcnR5Lm5vdGlmeUxpc3RlbmVyc1N0YXRpYygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIHN0YXJ0aW5nWSAhPT0gcG9zaXRpb25Qcm9wZXJ0eS52YWx1ZS55ICkge1xyXG4gICAgICAgICAgcG9zaXRpb25DaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudmlld1NvdW5kcy5ib3VuZGFyeVNvdW5kQ2xpcC5vbkludGVyYWN0KCBwb3NpdGlvblByb3BlcnR5LnZhbHVlLnksIHBvc2l0aW9uUHJvcGVydHkudmFsdWUueCxcclxuICAgICAgICAgIG5ldyBSYW5nZSggZHJhZ0JvdW5kc1Byb3BlcnR5LnZhbHVlLmxlZnQsIGRyYWdCb3VuZHNQcm9wZXJ0eS52YWx1ZS5yaWdodCApICk7XHJcbiAgICAgICAgdGhpcy52aWV3U291bmRzLnRpY2tNYXJrQnVtcFNvdW5kQ2xpcC5vbkludGVyYWN0KCBwb3NpdGlvblByb3BlcnR5LnZhbHVlLnkgKTtcclxuXHJcbiAgICAgICAgLy8gT25seSBuZXcgcmVzcG9uc2VzIGlmIHRoZSB5IHBvc2l0aW9uIGlzIGRpZmZlcmVudC5cclxuICAgICAgICBpZiAoIHBvc2l0aW9uUHJvcGVydHkudmFsdWUueSAhPT0gcHJldmlvdXNZT25MYXN0Vm9pY2luZyApIHtcclxuICAgICAgICAgIHRoaXMucmF0aW9IYW5kTm9kZS52b2ljaW5nU3BlYWtGdWxsUmVzcG9uc2UoIHtcclxuICAgICAgICAgICAgbmFtZVJlc3BvbnNlOiBudWxsLFxyXG4gICAgICAgICAgICBjb250ZXh0UmVzcG9uc2U6IHRoaXMuZ2V0U2luZ2xlSGFuZENvbnRleHRSZXNwb25zZSggdGhpcy52b2ljaW5nSGFuZFBvc2l0aW9uc0Rlc2NyaWJlciwgdm9pY2luZ0JvdGhIYW5kc0Rlc2NyaWJlciwge1xyXG4gICAgICAgICAgICAgIHN1cHBvcnRHb0JleW9uZEVkZ2VSZXNwb25zZXM6IGZhbHNlLCAvLyBubyBnby1iZXlvbmQtZWRnZSByZXNwb25zZXMgZm9yIG1vdXNlL3RvdWNoXHJcbiAgICAgICAgICAgICAgZGlzdGFuY2VSZXNwb25zZVR5cGU6IERpc3RhbmNlUmVzcG9uc2VUeXBlLkRJU1RBTkNFX1BST0dSRVNTXHJcbiAgICAgICAgICAgIH0gKSxcclxuICAgICAgICAgICAgaGludFJlc3BvbnNlOiBudWxsXHJcbiAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICBwcmV2aW91c1lPbkxhc3RWb2ljaW5nID0gcG9zaXRpb25Qcm9wZXJ0eS52YWx1ZS55O1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuXHJcbiAgICAgIGVuZDogKCkgPT4ge1xyXG5cclxuICAgICAgICAvLyByZXNldCBsb2dpYyBpbiB0aGUgaGFuZCB0aGF0IGNvbnRyb2xzIG90aGVyIGlucHV0XHJcbiAgICAgICAgdGhpcy5yYXRpb0hhbmROb2RlLnJlc2V0KCk7XHJcblxyXG4gICAgICAgIC8vIHNuYXAgZmluYWwgdmFsdWUgdG8gdGljayBtYXJrLCBpZiBhcHBsaWNhYmxlXHJcbiAgICAgICAgY29uc3QgbmV3WSA9IGdldFNuYXBUb1RpY2tNYXJrVmFsdWUoIHBvc2l0aW9uUHJvcGVydHkudmFsdWUueSApO1xyXG4gICAgICAgIGlmICggcG9zaXRpb25Qcm9wZXJ0eS52YWx1ZS55ICE9PSBuZXdZICkge1xyXG4gICAgICAgICAgcG9zaXRpb25Qcm9wZXJ0eS52YWx1ZS5zZXRZKCBuZXdZICk7XHJcbiAgICAgICAgICBwb3NpdGlvblByb3BlcnR5Lm5vdGlmeUxpc3RlbmVyc1N0YXRpYygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhcnRpbmdYID0gbnVsbDtcclxuICAgICAgICB0aGlzLnZpZXdTb3VuZHMucmVsZWFzZVNvdW5kQ2xpcC5wbGF5KCk7XHJcbiAgICAgICAgdGhpcy5faXNCZWluZ0ludGVyYWN0ZWRXaXRoUHJvcGVydHkudmFsdWUgPSBmYWxzZTtcclxuICAgICAgICBvcHRpb25zLnNldEp1bXBpbmdPdmVyUHJvcG9ydGlvblNob3VsZFRyaWdnZXJTb3VuZCggZmFsc2UgKTtcclxuICAgICAgICB0aGlzLnZpZXdTb3VuZHMuYm91bmRhcnlTb3VuZENsaXAub25FbmRJbnRlcmFjdGlvbiggcG9zaXRpb25Qcm9wZXJ0eS52YWx1ZS55ICk7XHJcblxyXG4gICAgICAgIC8vIFN1cHBvcnQgY29udGV4dCByZXNwb25zZSBvbiBpbnRlcmFjdGlvbiBlbmQgZnJvbSBtb3VzZS90b3VjaCBpbnB1dC5cclxuICAgICAgICB0aGlzLnJhdGlvSGFuZE5vZGUuYWxlcnRDb250ZXh0UmVzcG9uc2UoKTtcclxuXHJcbiAgICAgICAgLy8gT25seSB2b2ljZSBhIHJlc3BvbnNlIGlmIHRoZSB2YWx1ZSBjaGFuZ2VkXHJcbiAgICAgICAgaWYgKCBwb3NpdGlvbkNoYW5nZWQgKSB7XHJcblxyXG4gICAgICAgICAgdGhpcy5yYXRpb0hhbmROb2RlLnZvaWNpbmdTcGVha0Z1bGxSZXNwb25zZSgge1xyXG4gICAgICAgICAgICBuYW1lUmVzcG9uc2U6IG51bGwsXHJcbiAgICAgICAgICAgIGNvbnRleHRSZXNwb25zZTogdGhpcy5nZXRTaW5nbGVIYW5kQ29udGV4dFJlc3BvbnNlKCB0aGlzLnZvaWNpbmdIYW5kUG9zaXRpb25zRGVzY3JpYmVyLCB2b2ljaW5nQm90aEhhbmRzRGVzY3JpYmVyLCB7XHJcbiAgICAgICAgICAgICAgc3VwcG9ydEdvQmV5b25kRWRnZVJlc3BvbnNlczogZmFsc2UsIC8vIG5vIGdvLWJleW9uZC1lZGdlIHJlc3BvbnNlcyBmb3IgbW91c2UvdG91Y2hcclxuICAgICAgICAgICAgICBkaXN0YW5jZVJlc3BvbnNlVHlwZTogRGlzdGFuY2VSZXNwb25zZVR5cGUuRElTVEFOQ0VfUkVHSU9OXHJcbiAgICAgICAgICAgIH0gKSxcclxuICAgICAgICAgICAgaGludFJlc3BvbnNlOiBudWxsXHJcbiAgICAgICAgICB9ICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgLy8gTm8gdm9pY2luZyBpZiB0aGVyZSBoYXNuJ3QgYmVlbiBhbnkgbW92ZW1lbnRcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEZpcmUgdGhpcyBvbmNlIGhlcmUgc28gdGhhdCBvbiBkcmFnLCBpZiBhdCBlZGdlLCBpdCB3aWxsIGFjdCBsaWtlIGEgZ28tYmV5b25kIHJlc3BvbnNlIG9uIHRoZSBmaXJzdCBhdHRlbXB0XHJcbiAgICAgICAgdGhpcy52b2ljaW5nSGFuZFBvc2l0aW9uc0Rlc2NyaWJlci5nZXRHb0JleW9uZENvbnRleHRSZXNwb25zZSggdGhpcy5yYXRpby50dXBsZVByb3BlcnR5LnZhbHVlLCB0aGlzLnJhdGlvVGVybSApO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgLy8gcGhldC1pb1xyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2RyYWdMaXN0ZW5lcicgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIFdoZW4gdGhlIHJhbmdlIGNoYW5nZXMsIHVwZGF0ZSB0aGUgZHJhZ0JvdW5kcyBvZiB0aGUgZHJhZyBsaXN0ZW5lclxyXG4gICAgdGhpcy5yYXRpby5lbmFibGVkUmF0aW9UZXJtc1JhbmdlUHJvcGVydHkubGluayggKCBlbmFibGVkUmFuZ2U6IFJhbmdlICkgPT4ge1xyXG4gICAgICBjb25zdCBuZXdCb3VuZHMgPSBnZXRNb2RlbEJvdW5kc0Zyb21SYW5nZSggZW5hYmxlZFJhbmdlICk7XHJcblxyXG4gICAgICAvLyBvZmZzZXQgdGhlIGJvdW5kcyB0byBhY2NvdW50IGZvciB0aGUgcmF0aW9IYW5kTm9kZSdzIHNpemUsIHNpbmNlIHRoZSBjZW50ZXIgb2YgdGhlIHJhdGlvSGFuZE5vZGUgaXMgY29udHJvbGxlZCBieSB0aGUgZHJhZyBib3VuZHMuXHJcbiAgICAgIGNvbnN0IG1vZGVsSGFsZlBvaW50ZXJQb2ludGVyID0gbW9kZWxWaWV3VHJhbnNmb3JtLnZpZXdUb01vZGVsRGVsdGFYWSggdGhpcy5yYXRpb0hhbmROb2RlLndpZHRoIC8gMiwgLXRoaXMuX2ZyYW1pbmdSZWN0YW5nbGVIZWlnaHQgKTtcclxuXHJcbiAgICAgIC8vIGNvbnN0cmFpbiB4IGRpbWVuc2lvbiBpbnNpZGUgdGhlIFJhdGlvSGFsZiBzbyB0aGF0IHRoaXMucmF0aW9IYW5kTm9kZSBkb2Vzbid0IGdvIGJleW9uZCB0aGUgd2lkdGguIEhlaWdodCBpcyBjb25zdHJhaW5lZFxyXG4gICAgICAvLyB2aWEgdGhlIG1vZGVsVmlld1RyYW5zZm9ybS5cclxuICAgICAgZHJhZ0JvdW5kc1Byb3BlcnR5LnZhbHVlID0gbmV3Qm91bmRzLmVyb2RlZFgoIG1vZGVsSGFsZlBvaW50ZXJQb2ludGVyLnggKTtcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLnJhdGlvSGFuZE5vZGUuYWRkSW5wdXRMaXN0ZW5lciggZHJhZ0xpc3RlbmVyICk7XHJcbiAgICB0aGlzLnJhdGlvSGFuZE5vZGUuYWRkSW5wdXRMaXN0ZW5lcigge1xyXG4gICAgICBmb2N1czogKCkgPT4ge1xyXG4gICAgICAgIG9wdGlvbnMuY3VlQXJyb3dzU3RhdGUua2V5Ym9hcmRGb2N1c2VkUHJvcGVydHkudmFsdWUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMudmlld1NvdW5kcy5ncmFiU291bmRDbGlwLnBsYXkoKTtcclxuICAgICAgfSxcclxuICAgICAgYmx1cjogKCkgPT4ge1xyXG4gICAgICAgIG9wdGlvbnMuY3VlQXJyb3dzU3RhdGUua2V5Ym9hcmRGb2N1c2VkUHJvcGVydHkudmFsdWUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnZpZXdTb3VuZHMucmVsZWFzZVNvdW5kQ2xpcC5wbGF5KCk7XHJcbiAgICAgICAgdGhpcy5faXNCZWluZ0ludGVyYWN0ZWRXaXRoUHJvcGVydHkudmFsdWUgPSBmYWxzZTtcclxuICAgICAgfSxcclxuICAgICAgZG93bjogKCkgPT4ge1xyXG5cclxuICAgICAgICAvLyBTdXBwb3J0IHRoZSBjYXNlIHdoZW4geW91IGhhdmUgdGhlIGhhbmQgZm9jdXNlZCwgYW5kIHRoZW4geW91IHByZXNzIHRoZSBoYW5kIHdpdGggYSBtb3VzZVxyXG4gICAgICAgIG9wdGlvbnMuY3VlQXJyb3dzU3RhdGUua2V5Ym9hcmRGb2N1c2VkUHJvcGVydHkudmFsdWUgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIFwiRnJhbWluZ1wiIHJlY3RhbmdsZXMgb24gdGhlIHRvcCBhbmQgYm90dG9tIG9mIHRoZSBkcmFnIGFyZWEgb2YgdGhlIHJhdGlvIGhhbGZcclxuICAgIGNvbnN0IHRvcFJlY3QgPSBuZXcgUmVjdGFuZ2xlKCAwLCAwLCAxMCwgdGhpcy5fZnJhbWluZ1JlY3RhbmdsZUhlaWdodCwgeyBmaWxsOiBvcHRpb25zLmNvbG9yUHJvcGVydHkgfSApO1xyXG4gICAgY29uc3QgYm90dG9tUmVjdCA9IG5ldyBSZWN0YW5nbGUoIDAsIDAsIDEwLCB0aGlzLl9mcmFtaW5nUmVjdGFuZ2xlSGVpZ2h0LCB7IGZpbGw6IG9wdGlvbnMuY29sb3JQcm9wZXJ0eSB9ICk7XHJcblxyXG4gICAgY29uc3QgdGlja01hcmtzTm9kZSA9IG5ldyBSYXRpb0hhbGZUaWNrTWFya3NOb2RlKCBvcHRpb25zLnRpY2tNYXJrVmlld1Byb3BlcnR5LCBvcHRpb25zLnRpY2tNYXJrUmFuZ2VQcm9wZXJ0eSxcclxuICAgICAgb3B0aW9ucy5ib3VuZHMud2lkdGgsIG9wdGlvbnMuYm91bmRzLmhlaWdodCAtIDIgKiB0aGlzLl9mcmFtaW5nUmVjdGFuZ2xlSGVpZ2h0LFxyXG4gICAgICBvcHRpb25zLmNvbG9yUHJvcGVydHkgKTtcclxuXHJcbiAgICBjb25zdCB1cGRhdGVQb2ludGVyID0gKCBwb3NpdGlvbjogVmVjdG9yMiApID0+IHtcclxuICAgICAgdGhpcy5yYXRpb0hhbmROb2RlLnRyYW5zbGF0aW9uID0gbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3UG9zaXRpb24oIHBvc2l0aW9uICk7XHJcbiAgICB9O1xyXG4gICAgcG9zaXRpb25Qcm9wZXJ0eS5saW5rKCB1cGRhdGVQb2ludGVyICk7XHJcblxyXG4gICAgdGhpcy5tdXRhdGUoIG9wdGlvbnMgKTtcclxuXHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhb3B0aW9ucy5jaGlsZHJlbiwgJ1JhdGlvSGFsZiBzZXRzIGl0cyBvd24gY2hpbGRyZW4uJyApO1xyXG4gICAgdGhpcy5jaGlsZHJlbiA9IFtcclxuICAgICAgdG9wUmVjdCxcclxuICAgICAgYm90dG9tUmVjdCxcclxuICAgICAgdGlja01hcmtzTm9kZSxcclxuICAgICAgKCB0aGlzLnJhdGlvSGFuZE5vZGUgKVxyXG4gICAgXTtcclxuXHJcbiAgICB0aGlzLmxheW91dFJhdGlvSGFsZiA9ICggbmV3Qm91bmRzLCBoZWlnaHRTY2FsYXIgKSA9PiB7XHJcbiAgICAgIHRoaXMucmVjdFdpZHRoID0gbmV3Qm91bmRzLndpZHRoO1xyXG4gICAgICB0aGlzLnJlY3RIZWlnaHQgPSBuZXdCb3VuZHMuaGVpZ2h0O1xyXG5cclxuICAgICAgdGhpcy5fZnJhbWluZ1JlY3RhbmdsZUhlaWdodCA9IHRvcFJlY3QucmVjdEhlaWdodCA9IGJvdHRvbVJlY3QucmVjdEhlaWdodCA9IGhlaWdodFNjYWxhciAqIE1JTl9GUkFNSU5HX1JFQ1RBTkdMRV9IRUlHSFQgKyAoIE1BWF9GUkFNSU5HX1JFQ1RBTkdMRV9IRUlHSFQgLSBNSU5fRlJBTUlOR19SRUNUQU5HTEVfSEVJR0hUICk7XHJcblxyXG4gICAgICAvLyBTY2FsZSBkZXBlbmRpbmcgb24gaG93IHRhbGwgdGhlIHJhdGlvIGhhbGYgaXMuIFRoaXMgaXMgdG8gc3VwcG9ydCBuYXJyb3cgYW5kIHRhbGwgbGF5b3V0cyB3aGVyZSB0aGUgaGFuZCBuZWVkc1xyXG4gICAgICAvLyB0byBiZSBzY2FsZWQgdXAgbW9yZSB0byBzdXBwb3J0IHRvdWNoIGludGVyYWN0aW9uLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3JhdGlvLWFuZC1wcm9wb3J0aW9uL2lzc3Vlcy8yMTcuXHJcbiAgICAgIGNvbnN0IGhhbmRTY2FsZSA9IGhlaWdodFNjYWxhciAqICggTUFYX0hBTkRfU0NBTEUgLSBNSU5fSEFORF9TQ0FMRSApICsgTUlOX0hBTkRfU0NBTEU7XHJcbiAgICAgIHRoaXMucmF0aW9IYW5kTm9kZS5zZXRTY2FsZU1hZ25pdHVkZSggaGFuZFNjYWxlICk7XHJcblxyXG4gICAgICBjb25zdCBmcmFtaW5nUmVjdFdpZHRoID0gbmV3Qm91bmRzLndpZHRoIC0gbmV3Qm91bmRzLndpZHRoICogMC4xO1xyXG4gICAgICB0b3BSZWN0LnJlY3RXaWR0aCA9IGZyYW1pbmdSZWN0V2lkdGg7XHJcbiAgICAgIHRvcFJlY3QuY2VudGVyWCA9IGJvdHRvbVJlY3QuY2VudGVyWCA9IG5ld0JvdW5kcy5jZW50ZXJYO1xyXG4gICAgICBib3R0b21SZWN0LnJlY3RXaWR0aCA9IGZyYW1pbmdSZWN0V2lkdGg7XHJcbiAgICAgIHRvcFJlY3QudG9wID0gMDtcclxuICAgICAgYm90dG9tUmVjdC5ib3R0b20gPSBuZXdCb3VuZHMuaGVpZ2h0O1xyXG5cclxuICAgICAgY29uc3QgYm91bmRzTm9GcmFtaW5nUmVjdHMgPSBuZXdCb3VuZHMuZXJvZGVkWSggdGhpcy5fZnJhbWluZ1JlY3RhbmdsZUhlaWdodCApO1xyXG5cclxuICAgICAgLy8gRG9uJ3QgY291bnQgdGhlIHNwYWNlIHRoZSBmcmFtaW5nIHJlY3RhbmdsZXMgdGFrZSB1cCBhcyBwYXJ0IG9mIHRoZSBkcmFnZ2FibGVBcmVhLlxyXG4gICAgICBtb2RlbFZpZXdUcmFuc2Zvcm0gPSBNb2RlbFZpZXdUcmFuc2Zvcm0yLmNyZWF0ZVJlY3RhbmdsZUludmVydGVkWU1hcHBpbmcoXHJcbiAgICAgICAgZ2V0TW9kZWxCb3VuZHNGcm9tUmFuZ2UoIFRPVEFMX1JBTkdFICksXHJcbiAgICAgICAgYm91bmRzTm9GcmFtaW5nUmVjdHNcclxuICAgICAgKTtcclxuXHJcbiAgICAgIHVwZGF0ZVBvaW50ZXIoIHBvc2l0aW9uUHJvcGVydHkudmFsdWUgKTtcclxuXHJcbiAgICAgIGRyYWdMaXN0ZW5lci50cmFuc2Zvcm0gPSBtb2RlbFZpZXdUcmFuc2Zvcm07XHJcblxyXG4gICAgICB0aWNrTWFya3NOb2RlLmxheW91dCggYm91bmRzTm9GcmFtaW5nUmVjdHMud2lkdGgsIGJvdW5kc05vRnJhbWluZ1JlY3RzLmhlaWdodCApO1xyXG4gICAgICB0aWNrTWFya3NOb2RlLmJvdHRvbSA9IGJvdHRvbVJlY3QudG9wO1xyXG4gICAgICB0aWNrTWFya3NOb2RlLmxlZnQgPSAwO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnJlc2V0UmF0aW9IYWxmID0gKCkgPT4ge1xyXG4gICAgICB0aGlzLmRlc2NyaXB0aW9uSGFuZFBvc2l0aW9uc0Rlc2NyaWJlci5yZXNldCgpO1xyXG4gICAgICB0aGlzLnZvaWNpbmdIYW5kUG9zaXRpb25zRGVzY3JpYmVyLnJlc2V0KCk7XHJcbiAgICAgIGRlc2NyaXB0aW9uQm90aEhhbmRzRGVzY3JpYmVyLnJlc2V0KCk7XHJcbiAgICAgIHZvaWNpbmdCb3RoSGFuZHNEZXNjcmliZXIucmVzZXQoKTtcclxuICAgICAgdGhpcy5yYXRpb0hhbmROb2RlLnJlc2V0KCk7XHJcbiAgICAgIHRoaXMudmlld1NvdW5kcy5yZXNldCgpO1xyXG4gICAgICBwb3NpdGlvblByb3BlcnR5LnZhbHVlLnNldFgoIElOSVRJQUxfWF9WQUxVRSApO1xyXG4gICAgICBwb3NpdGlvblByb3BlcnR5Lm5vdGlmeUxpc3RlbmVyc1N0YXRpYygpO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8vIFByb3ZpZGUgYSBnZXR0ZXIgYnV0IG5vdCBhIHNldHRlciB0byBkZW5vdGUgXCJwdWJsaWMgcmVhZG9ubHlcIlxyXG4gIHB1YmxpYyBnZXQgZnJhbWluZ1JlY3RhbmdsZUhlaWdodCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuX2ZyYW1pbmdSZWN0YW5nbGVIZWlnaHQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZW5lcmF0ZSBhbmQgc2VuZCBhbiBhbGVydCB0byB0aGUgVXR0ZXJhbmNlUXVldWUgdGhhdCBkZXNjcmliZXMgdGhlIG1vdmVtZW50IG9mIHRoaXMgb2JqZWN0IGFuZCB0aGUgc3Vic2VxdWVudCBjaGFuZ2VcclxuICAgKiBpbiByYXRpby4gVGhpcyBpcyB0aGUgY29udGV4dCByZXNwb25zZSBmb3IgdGhlIGluZGl2aWR1YWwgcmF0aW8gaGFsZiBoYW5kIChzbGlkZXIpIGludGVyYWN0aW9uLiBSZXR1cm5pbmdcclxuICAgKiBudWxsIG1lYW5zIG5vIGFsZXJ0IHdpbGwgb2NjdXIuXHJcbiAgICovXHJcbiAgcHVibGljIGdldFNpbmdsZUhhbmRDb250ZXh0UmVzcG9uc2UoIGhhbmRQb3NpdGlvbnNEZXNjcmliZXI6IEhhbmRQb3NpdGlvbnNEZXNjcmliZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvdGhIYW5kc0Rlc2NyaWJlcjogQm90aEhhbmRzRGVzY3JpYmVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zPzogSGFuZENvbnRleHRSZXNwb25zZU9wdGlvbnMgKTogc3RyaW5nIHtcclxuXHJcbiAgICAvLyBXaGVuIGxvY2tlZCwgZ2l2ZSBhIGRlc2NyaXB0aW9uIG9mIGJvdGgtaGFuZHMsIGluc3RlYWQgb2YganVzdCBhIHNpbmdsZSBvbmUuXHJcbiAgICBpZiAoIHRoaXMucmF0aW8ubG9ja2VkUHJvcGVydHkudmFsdWUgKSB7XHJcbiAgICAgIHJldHVybiBib3RoSGFuZHNEZXNjcmliZXIuZ2V0Qm90aEhhbmRzQ29udGV4dFJlc3BvbnNlKCB0aGlzLnJhdGlvVGVybSwgb3B0aW9ucyApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBoYW5kUG9zaXRpb25zRGVzY3JpYmVyLmdldFNpbmdsZUhhbmRDb250ZXh0UmVzcG9uc2UoIHRoaXMucmF0aW9UZXJtLCB0aGlzLnRpY2tNYXJrVmlld1Byb3BlcnR5LnZhbHVlLCBvcHRpb25zICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYm90dG9tIG9mIHRoZSBSZWN0YW5nbGUgdGhhdCBjb250YWlucyB0aGUgUmF0aW9IYW5kTm9kZSBpcyBub3QgdGhlIGNvbXBsZXRlIGJvdW5kcyBvZiB0aGUgTm9kZS4gV2l0aCB0aGF0IGluXHJcbiAgICogbWluZCwgb2Zmc2V0IHRoZSBib3R0b20gYnkgdGhlIGhlaWdodCB0aGF0IGV4dGVuZHMgYmV5b25kIHRoZSBSZWN0YW5nbGUuIEZvciBleGFtcGxlLCB0aGUgY3VlIGFycm93cyBvZiB0aGUgUmF0aW9IYW5kTm9kZSBjYW4gZXh0ZW5kIGJleW9uZCB0aGVcclxuICAgKiBcInJhdGlvIGhhbGYgYm94XCIgKHRoZSBkcmFnZ2FibGUgYXJlYSkuXHJcbiAgICovXHJcbiAgcHVibGljIHNldEJvdHRvbU9mUmF0aW9IYWxmKCBkZXNpcmVkQm90dG9tOiBudW1iZXIgKTogdm9pZCB7XHJcblxyXG4gICAgLy8gYHNlbGZCb3VuZHNgIGlzIHVzZWQgZm9yIHRoZSBwb3NpdGlvbiBvZiB0aGUgUmVjdGFuZ2xlLCBzaW5jZSBSYXRpb0hhbGYgZXh0ZW5kcyBSZWN0YW5nbGVcclxuICAgIHRoaXMuYm90dG9tID0gZGVzaXJlZEJvdHRvbSArICggdGhpcy5ib3VuZHMuYm90dG9tIC0gdGhpcy5sb2NhbFRvUGFyZW50Qm91bmRzKCB0aGlzLnNlbGZCb3VuZHMgKS5ib3R0b20gKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSBib3VuZHMgLSB0aGUgYm91bmRzIG9mIHRoaXMgUmF0aW9IYWxmLCBlZmZlY3RzIGRpbWVuc2lvbnMsIGRyYWdCb3VuZHMsIGFuZCB3aWR0aCBvZiBndWlkaW5nIHJlY3RhbmdsZXNcclxuICAgKiBAcGFyYW0gaGVpZ2h0U2NhbGFyIC0gbm9ybWFsaXplZCBiZXR3ZWVuIDAgYW5kIDEuIFdoZW4gMSwgaXQgdGhlIHJhdGlvIGhhbGYgd2lsbCBiZSB0aGUgdGFsbGVzdCBpdCBnZXRzLCBhdCAwLCB0aGUgc2hvcnRlc3RcclxuICAgKi9cclxuICBwdWJsaWMgbGF5b3V0KCBib3VuZHM6IEJvdW5kczIsIGhlaWdodFNjYWxhcjogbnVtYmVyICk6IHZvaWQge1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggaGVpZ2h0U2NhbGFyID49IDAgJiYgaGVpZ2h0U2NhbGFyIDw9IDEsICdzY2FsYXIgc2hvdWxkIGJlIGJldHdlZW4gMCBhbmQgMScgKTtcclxuICAgIHRoaXMubGF5b3V0UmF0aW9IYWxmKCBib3VuZHMsIGhlaWdodFNjYWxhciApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5yZXNldFJhdGlvSGFsZigpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdGF0aWMgUkFUSU9fSEFMRl9BQ0NFU1NJQkxFX05BTUVfQkVIQVZJT1IoIG5vZGU6IE5vZGUsIG9wdGlvbnM6IE5vZGVPcHRpb25zLCBhY2Nlc3NpYmxlTmFtZTogUERPTVZhbHVlVHlwZSwgY2FsbGJhY2tzRm9yT3RoZXJOb2RlczogeyAoKTogdm9pZCB9W10gKTogTm9kZU9wdGlvbnMge1xyXG5cclxuICAgIGNhbGxiYWNrc0Zvck90aGVyTm9kZXMucHVzaCggKCkgPT4ge1xyXG4gICAgICAoIG5vZGUgYXMgUmF0aW9IYWxmICkucmF0aW9IYW5kTm9kZS5hY2Nlc3NpYmxlTmFtZSA9IGFjY2Vzc2libGVOYW1lO1xyXG4gICAgfSApO1xyXG4gICAgcmV0dXJuIG9wdGlvbnM7XHJcbiAgfVxyXG59XHJcblxyXG5yYXRpb0FuZFByb3BvcnRpb24ucmVnaXN0ZXIoICdSYXRpb0hhbGYnLCBSYXRpb0hhbGYgKTtcclxuZXhwb3J0IGRlZmF1bHQgUmF0aW9IYWxmOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGVBQWUsTUFBTSx3Q0FBd0M7QUFDcEUsT0FBT0MsZUFBZSxNQUFNLHdDQUF3QztBQUNwRSxPQUFPQyxRQUFRLE1BQU0saUNBQWlDO0FBQ3RELE9BQU9DLE9BQU8sTUFBTSwrQkFBK0I7QUFDbkQsT0FBT0MsS0FBSyxNQUFNLDZCQUE2QjtBQUMvQyxPQUFPQyxPQUFPLE1BQU0sK0JBQStCO0FBQ25ELE9BQU9DLFNBQVMsTUFBTSx1Q0FBdUM7QUFDN0QsT0FBT0MsbUJBQW1CLE1BQU0sdURBQXVEO0FB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