// Copyright 2022-2023, University of Colorado Boulder

/**
 * Node that represents an atomic symbol, meaning that it shows the symbol text, the proton count, and the
 * atomic number. It also optionally shows the charge.
 *
 * @author John Blanco
 * @author Luisa Vargas
 */

import shred from '../shred.js';
import { Node, Rectangle, Text } from '../../../scenery/js/imports.js';
import PhetFont from '../../../scenery-phet/js/PhetFont.js';
import Vector2 from '../../../dot/js/Vector2.js';
import AtomIdentifier from '../AtomIdentifier.js';
import PhetColorScheme from '../../../scenery-phet/js/PhetColorScheme.js';
import ShredConstants from '../ShredConstants.js';
import Tandem from '../../../tandem/js/Tandem.js';
import optionize from '../../../phet-core/js/optionize.js';

// types

// constants
const SYMBOL_BOX_WIDTH = 275; // In screen coords, which are roughly pixels.
const SYMBOL_BOX_HEIGHT = 325; // In screen coords, which are roughly pixels.
const NUMBER_FONT = new PhetFont(70);
const NUMBER_INSET = 20; // In screen coords, which are roughly pixels.

class SymbolNode extends Node {
  constructor(protonCountProperty, massNumberProperty, providedOptions) {
    const options = optionize()({
      chargeProperty: null,
      fill: 'white',
      symbolTextFill: 'black',
      protonCountDisplayFill: PhetColorScheme.RED_COLORBLIND,
      massNumberDisplayFill: 'black',
      tandem: Tandem.REQUIRED // TODO: How to support phet-brand and sub-instrumented components? This applies to all the commented out tandems
    }, providedOptions);
    super(options);

    // Add the bounding box, which is also the root node for everything else
    // that comprises this node.
    this.boundingBox = new Rectangle(0, 0, SYMBOL_BOX_WIDTH, SYMBOL_BOX_HEIGHT, 0, 0, {
      stroke: 'black',
      lineWidth: 2,
      fill: options.fill
      // tandem: options.tandem.createTandem( 'boundingBox' )
    });

    this.addChild(this.boundingBox);

    // Add the symbol text.
    this.symbolText = new Text('', {
      font: new PhetFont(150),
      fill: options.symbolTextFill,
      center: new Vector2(SYMBOL_BOX_WIDTH / 2, SYMBOL_BOX_HEIGHT / 2)
      // tandem: options.tandem.createTandem( 'symbolText' )
    });

    // Add the listener to update the symbol text.
    const textCenter = new Vector2(SYMBOL_BOX_WIDTH / 2, SYMBOL_BOX_HEIGHT / 2);
    protonCountProperty.link(protonCount => {
      const symbol = AtomIdentifier.getSymbol(protonCount);
      this.symbolText.string = protonCount > 0 ? symbol : '-';
      this.symbolText.center = textCenter;
    });
    this.boundingBox.addChild(this.symbolText);

    // Add the proton count display.
    const protonCountDisplay = new Text('0', {
      font: NUMBER_FONT,
      fill: options.protonCountDisplayFill
      // tandem: options.tandem.createTandem( 'atomicNumberDisplay' )
    });

    this.boundingBox.addChild(protonCountDisplay);

    // Add the listener to update the proton count.
    protonCountProperty.link(protonCount => {
      protonCountDisplay.string = protonCount;
      protonCountDisplay.left = NUMBER_INSET;
      protonCountDisplay.bottom = SYMBOL_BOX_HEIGHT - NUMBER_INSET;
    });

    // Add the mass number display.
    this.massNumberDisplay = new Text('0', {
      font: NUMBER_FONT,
      fill: options.massNumberDisplayFill
      // tandem: options.tandem.createTandem( 'massNumberDisplay' )
    });

    this.boundingBox.addChild(this.massNumberDisplay);

    // Add the listener to update the mass number.
    massNumberProperty.link(massNumber => {
      this.massNumberDisplay.string = massNumber;
      this.massNumberDisplay.left = NUMBER_INSET;
      this.massNumberDisplay.top = NUMBER_INSET;
    });
    if (options.chargeProperty) {
      // Add the charge display.
      this.chargeDisplay = new Text('0', {
        font: NUMBER_FONT,
        fill: 'black'
        // tandem: options.tandem.createTandem( 'chargeDisplay' )
      });

      this.boundingBox.addChild(this.chargeDisplay);

      // Add the listener to update the charge.
      options.chargeProperty.link(charge => {
        this.chargeDisplay.string = (charge > 0 ? '+' : '') + charge;
        this.chargeDisplay.fill = ShredConstants.CHARGE_TEXT_COLOR(charge);
        this.chargeDisplay.right = SYMBOL_BOX_WIDTH - NUMBER_INSET;
        this.chargeDisplay.top = NUMBER_INSET;
      });
    }
  }

  /**
   * Set the fill color of the bounding box of the symbol node.
   */
  setFillColor(fill) {
    this.boundingBox.fill = fill;
  }

  /**
   * Set the color of the symbol text.
   */
  setSymbolTextColor(fill) {
    this.symbolText.fill = fill;
  }
}
shred.register('SymbolNode', SymbolNode);
export default SymbolNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzaHJlZCIsIk5vZGUiLCJSZWN0YW5nbGUiLCJUZXh0IiwiUGhldEZvbnQiLCJWZWN0b3IyIiwiQXRvbUlkZW50aWZpZXIiLCJQaGV0Q29sb3JTY2hlbWUiLCJTaHJlZENvbnN0YW50cyIsIlRhbmRlbSIsIm9wdGlvbml6ZSIsIlNZTUJPTF9CT1hfV0lEVEgiLCJTWU1CT0xfQk9YX0hFSUdIVCIsIk5VTUJFUl9GT05UIiwiTlVNQkVSX0lOU0VUIiwiU3ltYm9sTm9kZSIsImNvbnN0cnVjdG9yIiwicHJvdG9uQ291bnRQcm9wZXJ0eSIsIm1hc3NOdW1iZXJQcm9wZXJ0eSIsInByb3ZpZGVkT3B0aW9ucyIsIm9wdGlvbnMiLCJjaGFyZ2VQcm9wZXJ0eSIsImZpbGwiLCJzeW1ib2xUZXh0RmlsbCIsInByb3RvbkNvdW50RGlzcGxheUZpbGwiLCJSRURfQ09MT1JCTElORCIsIm1hc3NOdW1iZXJEaXNwbGF5RmlsbCIsInRhbmRlbSIsIlJFUVVJUkVEIiwiYm91bmRpbmdCb3giLCJzdHJva2UiLCJsaW5lV2lkdGgiLCJhZGRDaGlsZCIsInN5bWJvbFRleHQiLCJmb250IiwiY2VudGVyIiwidGV4dENlbnRlciIsImxpbmsiLCJwcm90b25Db3VudCIsInN5bWJvbCIsImdldFN5bWJvbCIsInN0cmluZyIsInByb3RvbkNvdW50RGlzcGxheSIsImxlZnQiLCJib3R0b20iLCJtYXNzTnVtYmVyRGlzcGxheSIsIm1hc3NOdW1iZXIiLCJ0b3AiLCJjaGFyZ2VEaXNwbGF5IiwiY2hhcmdlIiwiQ0hBUkdFX1RFWFRfQ09MT1IiLCJyaWdodCIsInNldEZpbGxDb2xvciIsInNldFN5bWJvbFRleHRDb2xvciIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiU3ltYm9sTm9kZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMi0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBOb2RlIHRoYXQgcmVwcmVzZW50cyBhbiBhdG9taWMgc3ltYm9sLCBtZWFuaW5nIHRoYXQgaXQgc2hvd3MgdGhlIHN5bWJvbCB0ZXh0LCB0aGUgcHJvdG9uIGNvdW50LCBhbmQgdGhlXHJcbiAqIGF0b21pYyBudW1iZXIuIEl0IGFsc28gb3B0aW9uYWxseSBzaG93cyB0aGUgY2hhcmdlLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvaG4gQmxhbmNvXHJcbiAqIEBhdXRob3IgTHVpc2EgVmFyZ2FzXHJcbiAqL1xyXG5cclxuaW1wb3J0IHNocmVkIGZyb20gJy4uL3NocmVkLmpzJztcclxuaW1wb3J0IHsgTm9kZSwgTm9kZU9wdGlvbnMsIFJlY3RhbmdsZSwgVENvbG9yLCBUZXh0IH0gZnJvbSAnLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IFBoZXRGb250IGZyb20gJy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9QaGV0Rm9udC5qcyc7XHJcbmltcG9ydCBWZWN0b3IyIGZyb20gJy4uLy4uLy4uL2RvdC9qcy9WZWN0b3IyLmpzJztcclxuaW1wb3J0IE51bWJlclByb3BlcnR5IGZyb20gJy4uLy4uLy4uL2F4b24vanMvTnVtYmVyUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgQXRvbUlkZW50aWZpZXIgZnJvbSAnLi4vQXRvbUlkZW50aWZpZXIuanMnO1xyXG5pbXBvcnQgUGhldENvbG9yU2NoZW1lIGZyb20gJy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9QaGV0Q29sb3JTY2hlbWUuanMnO1xyXG5pbXBvcnQgU2hyZWRDb25zdGFudHMgZnJvbSAnLi4vU2hyZWRDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xyXG5pbXBvcnQgb3B0aW9uaXplIGZyb20gJy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgVFJlYWRPbmx5UHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vYXhvbi9qcy9UUmVhZE9ubHlQcm9wZXJ0eS5qcyc7XHJcblxyXG4vLyB0eXBlc1xyXG50eXBlIFNlbGZPcHRpb25zID0ge1xyXG4gIGNoYXJnZVByb3BlcnR5PzogTnVtYmVyUHJvcGVydHkgfCBudWxsO1xyXG4gIGZpbGw/OiBUQ29sb3I7XHJcbiAgc3ltYm9sVGV4dEZpbGw/OiBUQ29sb3I7XHJcbiAgcHJvdG9uQ291bnREaXNwbGF5RmlsbD86IFRDb2xvcjtcclxuICBtYXNzTnVtYmVyRGlzcGxheUZpbGw/OiBUQ29sb3I7XHJcbn07XHJcbnR5cGUgU3ltYm9sTm9kZU9wdGlvbnMgPSBTZWxmT3B0aW9ucyAmIE5vZGVPcHRpb25zO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IFNZTUJPTF9CT1hfV0lEVEggPSAyNzU7IC8vIEluIHNjcmVlbiBjb29yZHMsIHdoaWNoIGFyZSByb3VnaGx5IHBpeGVscy5cclxuY29uc3QgU1lNQk9MX0JPWF9IRUlHSFQgPSAzMjU7IC8vIEluIHNjcmVlbiBjb29yZHMsIHdoaWNoIGFyZSByb3VnaGx5IHBpeGVscy5cclxuY29uc3QgTlVNQkVSX0ZPTlQgPSBuZXcgUGhldEZvbnQoIDcwICk7XHJcbmNvbnN0IE5VTUJFUl9JTlNFVCA9IDIwOyAvLyBJbiBzY3JlZW4gY29vcmRzLCB3aGljaCBhcmUgcm91Z2hseSBwaXhlbHMuXHJcblxyXG5jbGFzcyBTeW1ib2xOb2RlIGV4dGVuZHMgTm9kZSB7XHJcbiAgcHJvdGVjdGVkIHJlYWRvbmx5IG1hc3NOdW1iZXJEaXNwbGF5OiBUZXh0O1xyXG4gIHByb3RlY3RlZCByZWFkb25seSBjaGFyZ2VEaXNwbGF5OiBUZXh0IHwgdW5kZWZpbmVkO1xyXG4gIHByb3RlY3RlZCByZWFkb25seSBib3VuZGluZ0JveDogUmVjdGFuZ2xlO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgc3ltYm9sVGV4dDogVGV4dDtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBwcm90b25Db3VudFByb3BlcnR5OiBOdW1iZXJQcm9wZXJ0eSB8IFRSZWFkT25seVByb3BlcnR5PG51bWJlcj4sXHJcbiAgICAgICAgICAgICAgIG1hc3NOdW1iZXJQcm9wZXJ0eTogVFJlYWRPbmx5UHJvcGVydHk8bnVtYmVyPixcclxuICAgICAgICAgICAgICAgcHJvdmlkZWRPcHRpb25zOiBTeW1ib2xOb2RlT3B0aW9uc1xyXG4gICkge1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8U3ltYm9sTm9kZU9wdGlvbnMsIFNlbGZPcHRpb25zLCBOb2RlT3B0aW9ucz4oKSgge1xyXG4gICAgICBjaGFyZ2VQcm9wZXJ0eTogbnVsbCxcclxuICAgICAgZmlsbDogJ3doaXRlJyxcclxuICAgICAgc3ltYm9sVGV4dEZpbGw6ICdibGFjaycsXHJcbiAgICAgIHByb3RvbkNvdW50RGlzcGxheUZpbGw6IFBoZXRDb2xvclNjaGVtZS5SRURfQ09MT1JCTElORCxcclxuICAgICAgbWFzc051bWJlckRpc3BsYXlGaWxsOiAnYmxhY2snLFxyXG4gICAgICB0YW5kZW06IFRhbmRlbS5SRVFVSVJFRCAvLyBUT0RPOiBIb3cgdG8gc3VwcG9ydCBwaGV0LWJyYW5kIGFuZCBzdWItaW5zdHJ1bWVudGVkIGNvbXBvbmVudHM/IFRoaXMgYXBwbGllcyB0byBhbGwgdGhlIGNvbW1lbnRlZCBvdXQgdGFuZGVtc1xyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIGJvdW5kaW5nIGJveCwgd2hpY2ggaXMgYWxzbyB0aGUgcm9vdCBub2RlIGZvciBldmVyeXRoaW5nIGVsc2VcclxuICAgIC8vIHRoYXQgY29tcHJpc2VzIHRoaXMgbm9kZS5cclxuICAgIHRoaXMuYm91bmRpbmdCb3ggPSBuZXcgUmVjdGFuZ2xlKCAwLCAwLCBTWU1CT0xfQk9YX1dJRFRILCBTWU1CT0xfQk9YX0hFSUdIVCwgMCwgMCwge1xyXG4gICAgICBzdHJva2U6ICdibGFjaycsXHJcbiAgICAgIGxpbmVXaWR0aDogMixcclxuICAgICAgZmlsbDogb3B0aW9ucy5maWxsXHJcbiAgICAgIC8vIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnYm91bmRpbmdCb3gnIClcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMuYm91bmRpbmdCb3ggKTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIHN5bWJvbCB0ZXh0LlxyXG4gICAgdGhpcy5zeW1ib2xUZXh0ID0gbmV3IFRleHQoICcnLCB7XHJcbiAgICAgIGZvbnQ6IG5ldyBQaGV0Rm9udCggMTUwICksXHJcbiAgICAgIGZpbGw6IG9wdGlvbnMuc3ltYm9sVGV4dEZpbGwsXHJcbiAgICAgIGNlbnRlcjogbmV3IFZlY3RvcjIoIFNZTUJPTF9CT1hfV0lEVEggLyAyLCBTWU1CT0xfQk9YX0hFSUdIVCAvIDIgKVxyXG4gICAgICAvLyB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3N5bWJvbFRleHQnIClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIGxpc3RlbmVyIHRvIHVwZGF0ZSB0aGUgc3ltYm9sIHRleHQuXHJcbiAgICBjb25zdCB0ZXh0Q2VudGVyID0gbmV3IFZlY3RvcjIoIFNZTUJPTF9CT1hfV0lEVEggLyAyLCBTWU1CT0xfQk9YX0hFSUdIVCAvIDIgKTtcclxuICAgIHByb3RvbkNvdW50UHJvcGVydHkubGluayggcHJvdG9uQ291bnQgPT4ge1xyXG4gICAgICBjb25zdCBzeW1ib2wgPSBBdG9tSWRlbnRpZmllci5nZXRTeW1ib2woIHByb3RvbkNvdW50ICk7XHJcbiAgICAgIHRoaXMuc3ltYm9sVGV4dC5zdHJpbmcgPSBwcm90b25Db3VudCA+IDAgPyBzeW1ib2wgOiAnLSc7XHJcbiAgICAgIHRoaXMuc3ltYm9sVGV4dC5jZW50ZXIgPSB0ZXh0Q2VudGVyO1xyXG4gICAgfSApO1xyXG4gICAgdGhpcy5ib3VuZGluZ0JveC5hZGRDaGlsZCggdGhpcy5zeW1ib2xUZXh0ICk7XHJcblxyXG4gICAgLy8gQWRkIHRoZSBwcm90b24gY291bnQgZGlzcGxheS5cclxuICAgIGNvbnN0IHByb3RvbkNvdW50RGlzcGxheSA9IG5ldyBUZXh0KCAnMCcsIHtcclxuICAgICAgZm9udDogTlVNQkVSX0ZPTlQsXHJcbiAgICAgIGZpbGw6IG9wdGlvbnMucHJvdG9uQ291bnREaXNwbGF5RmlsbFxyXG4gICAgICAvLyB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2F0b21pY051bWJlckRpc3BsYXknIClcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYm91bmRpbmdCb3guYWRkQ2hpbGQoIHByb3RvbkNvdW50RGlzcGxheSApO1xyXG5cclxuICAgIC8vIEFkZCB0aGUgbGlzdGVuZXIgdG8gdXBkYXRlIHRoZSBwcm90b24gY291bnQuXHJcbiAgICBwcm90b25Db3VudFByb3BlcnR5LmxpbmsoIHByb3RvbkNvdW50ID0+IHtcclxuICAgICAgcHJvdG9uQ291bnREaXNwbGF5LnN0cmluZyA9IHByb3RvbkNvdW50O1xyXG4gICAgICBwcm90b25Db3VudERpc3BsYXkubGVmdCA9IE5VTUJFUl9JTlNFVDtcclxuICAgICAgcHJvdG9uQ291bnREaXNwbGF5LmJvdHRvbSA9IFNZTUJPTF9CT1hfSEVJR0hUIC0gTlVNQkVSX0lOU0VUO1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIEFkZCB0aGUgbWFzcyBudW1iZXIgZGlzcGxheS5cclxuICAgIHRoaXMubWFzc051bWJlckRpc3BsYXkgPSBuZXcgVGV4dCggJzAnLCB7XHJcbiAgICAgIGZvbnQ6IE5VTUJFUl9GT05ULFxyXG4gICAgICBmaWxsOiBvcHRpb25zLm1hc3NOdW1iZXJEaXNwbGF5RmlsbFxyXG4gICAgICAvLyB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ21hc3NOdW1iZXJEaXNwbGF5JyApXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmJvdW5kaW5nQm94LmFkZENoaWxkKCB0aGlzLm1hc3NOdW1iZXJEaXNwbGF5ICk7XHJcblxyXG4gICAgLy8gQWRkIHRoZSBsaXN0ZW5lciB0byB1cGRhdGUgdGhlIG1hc3MgbnVtYmVyLlxyXG4gICAgbWFzc051bWJlclByb3BlcnR5LmxpbmsoIG1hc3NOdW1iZXIgPT4ge1xyXG4gICAgICB0aGlzLm1hc3NOdW1iZXJEaXNwbGF5LnN0cmluZyA9IG1hc3NOdW1iZXI7XHJcbiAgICAgIHRoaXMubWFzc051bWJlckRpc3BsYXkubGVmdCA9IE5VTUJFUl9JTlNFVDtcclxuICAgICAgdGhpcy5tYXNzTnVtYmVyRGlzcGxheS50b3AgPSBOVU1CRVJfSU5TRVQ7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgaWYgKCBvcHRpb25zLmNoYXJnZVByb3BlcnR5ICkge1xyXG5cclxuICAgICAgLy8gQWRkIHRoZSBjaGFyZ2UgZGlzcGxheS5cclxuICAgICAgdGhpcy5jaGFyZ2VEaXNwbGF5ID0gbmV3IFRleHQoICcwJywge1xyXG4gICAgICAgIGZvbnQ6IE5VTUJFUl9GT05ULFxyXG4gICAgICAgIGZpbGw6ICdibGFjaydcclxuICAgICAgICAvLyB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2NoYXJnZURpc3BsYXknIClcclxuICAgICAgfSApO1xyXG4gICAgICB0aGlzLmJvdW5kaW5nQm94LmFkZENoaWxkKCB0aGlzLmNoYXJnZURpc3BsYXkgKTtcclxuXHJcbiAgICAgIC8vIEFkZCB0aGUgbGlzdGVuZXIgdG8gdXBkYXRlIHRoZSBjaGFyZ2UuXHJcbiAgICAgIG9wdGlvbnMuY2hhcmdlUHJvcGVydHkubGluayggY2hhcmdlID0+IHtcclxuICAgICAgICB0aGlzLmNoYXJnZURpc3BsYXkhLnN0cmluZyA9ICggY2hhcmdlID4gMCA/ICcrJyA6ICcnICkgKyBjaGFyZ2U7XHJcbiAgICAgICAgdGhpcy5jaGFyZ2VEaXNwbGF5IS5maWxsID0gU2hyZWRDb25zdGFudHMuQ0hBUkdFX1RFWFRfQ09MT1IoIGNoYXJnZSApO1xyXG4gICAgICAgIHRoaXMuY2hhcmdlRGlzcGxheSEucmlnaHQgPSBTWU1CT0xfQk9YX1dJRFRIIC0gTlVNQkVSX0lOU0VUO1xyXG4gICAgICAgIHRoaXMuY2hhcmdlRGlzcGxheSEudG9wID0gTlVNQkVSX0lOU0VUO1xyXG4gICAgICB9ICk7XHJcblxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0IHRoZSBmaWxsIGNvbG9yIG9mIHRoZSBib3VuZGluZyBib3ggb2YgdGhlIHN5bWJvbCBub2RlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXRGaWxsQ29sb3IoIGZpbGw6IFRDb2xvciApOiB2b2lkIHtcclxuICAgIHRoaXMuYm91bmRpbmdCb3guZmlsbCA9IGZpbGw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXQgdGhlIGNvbG9yIG9mIHRoZSBzeW1ib2wgdGV4dC5cclxuICAgKi9cclxuICBwdWJsaWMgc2V0U3ltYm9sVGV4dENvbG9yKCBmaWxsOiBUQ29sb3IgKTogdm9pZCB7XHJcbiAgICB0aGlzLnN5bWJvbFRleHQuZmlsbCA9IGZpbGw7XHJcbiAgfVxyXG59XHJcblxyXG5zaHJlZC5yZWdpc3RlciggJ1N5bWJvbE5vZGUnLCBTeW1ib2xOb2RlICk7XHJcbmV4cG9ydCBkZWZhdWx0IFN5bWJvbE5vZGU7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxLQUFLLE1BQU0sYUFBYTtBQUMvQixTQUFTQyxJQUFJLEVBQWVDLFNBQVMsRUFBVUMsSUFBSSxRQUFRLGdDQUFnQztBQUMzRixPQUFPQyxRQUFRLE1BQU0sc0NBQXNDO0FBQzNELE9BQU9DLE9BQU8sTUFBTSw0QkFBNEI7QUFFaEQsT0FBT0MsY0FBYyxNQUFNLHNCQUFzQjtBQUNqRCxPQUFPQyxlQUFlLE1BQU0sNkNBQTZDO0FBQ3pFLE9BQU9DLGNBQWMsTUFBTSxzQkFBc0I7QUFDakQsT0FBT0MsTUFBTSxNQUFNLDhCQUE4QjtBQUNqRCxPQUFPQyxTQUFTLE1BQU0sb0NBQW9DOztBQUcxRDs7QUFVQTtBQUNBLE1BQU1DLGdCQUFnQixHQUFHLEdBQUcs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