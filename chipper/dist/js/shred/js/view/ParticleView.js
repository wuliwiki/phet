// Copyright 2014-2023, University of Colorado Boulder

/**
 * Type that represents a sub-atomic particle in the view.
 */

import Property from '../../../axon/js/Property.js';
import Bounds2 from '../../../dot/js/Bounds2.js';
import merge from '../../../phet-core/js/merge.js';
import { DragListener, Node } from '../../../scenery/js/imports.js';
import Tandem from '../../../tandem/js/Tandem.js';
import shred from '../shred.js';
import IsotopeNode from './IsotopeNode.js';
import ParticleNode from './ParticleNode.js';
class ParticleView extends Node {
  /**
   * @param {Particle} particle
   * @param {ModelViewTransform2} modelViewTransform
   * @param {Object} [options]
   */
  constructor(particle, modelViewTransform, options) {
    options = merge({
      dragBounds: Bounds2.EVERYTHING,
      tandem: Tandem.REQUIRED,
      // {BooleanProperty|null} - if provided, this is used to set the particle node into and out of high contrast mode
      highContrastProperty: null
    }, options);
    super();
    this.particle = particle; // @public

    // Add the particle representation.
    const particleNode = createParticleNode(particle, modelViewTransform, options.highContrastProperty, options.tandem.createTandem('particleNode'));
    this.addChild(particleNode);
    particle.inputEnabledProperty.link(inputEnabled => {
      this.inputEnabled = inputEnabled;
    });

    // Listen to the model position and update.
    const updateParticlePosition = position => {
      this.translation = modelViewTransform.modelToViewPosition(position);
    };
    particle.positionProperty.link(updateParticlePosition);

    // add a drag listener
    this.dragListener = new DragListener({
      positionProperty: particle.destinationProperty,
      transform: modelViewTransform,
      dragBoundsProperty: options.dragBounds ? new Property(options.dragBounds) : null,
      tandem: options.tandem.createTandem('dragListener'),
      start: () => {
        this.particle.userControlledProperty.set(true);

        // if there is an animation in progress, cancel it be setting the destination to the position
        if (!particle.positionProperty.get().equals(particle.destinationProperty.get())) {
          particle.destinationProperty.set(particle.positionProperty.get());
        }
      },
      drag: () => {
        // Because the destination property is what is being set by the drag listener, we need to tell the particle to
        // go immediately to its destination when a drag occurs.
        this.particle.moveImmediatelyToDestination();
      },
      end: () => {
        this.particle.userControlledProperty.set(false);
        if (!this.isDisposed) {
          particle.dragEndedEmitter.emit(particle);
        }
      }
    });
    this.addInputListener(this.dragListener);
    this.mutate(options);

    // @private called by dispose
    this.disposeParticleView = function () {
      particle.positionProperty.unlink(updateParticlePosition);
      particleNode.dispose();
      this.dragListener.dispose();
    };
  }

  /**
   * @public
   * @override
   */
  dispose() {
    this.disposeParticleView();
    super.dispose();
  }

  /**
   * @public
   * @param {PressListenerEvent} event
   */
  startSyntheticDrag(event) {
    this.dragListener.press(event);
  }
}

/**
 * Creates the proper view for a particle.
 * @param {Particle} particle
 * @param {ModelViewTransform2} modelViewTransform
 * @param {BooleanProperty|null} highContrastProperty
 * @param {Tandem} tandem
 * @returns {Node}
 */
function createParticleNode(particle, modelViewTransform, highContrastProperty, tandem) {
  let particleNode;
  if (particle.type === 'Isotope') {
    particleNode = new IsotopeNode(particle, modelViewTransform.modelToViewDeltaX(particle.radiusProperty.get()), {
      showLabel: particle.showLabel,
      tandem: tandem
    });
  } else {
    particleNode = new ParticleNode(particle.type, modelViewTransform.modelToViewDeltaX(particle.radiusProperty.get()), {
      highContrastProperty: highContrastProperty,
      typeProperty: particle.typeProperty,
      colorGradientIndexNumberProperty: particle.colorGradientIndexNumberProperty,
      tandem: tandem
    });
  }
  return particleNode;
}
shred.register('ParticleView', ParticleView);
export default ParticleView;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQcm9wZXJ0eSIsIkJvdW5kczIiLCJtZXJnZSIsIkRyYWdMaXN0ZW5lciIsIk5vZGUiLCJUYW5kZW0iLCJzaHJlZCIsIklzb3RvcGVOb2RlIiwiUGFydGljbGVOb2RlIiwiUGFydGljbGVWaWV3IiwiY29uc3RydWN0b3IiLCJwYXJ0aWNsZSIsIm1vZGVsVmlld1RyYW5zZm9ybSIsIm9wdGlvbnMiLCJkcmFnQm91bmRzIiwiRVZFUllUSElORyIsInRhbmRlbSIsIlJFUVVJUkVEIiwiaGlnaENvbnRyYXN0UHJvcGVydHkiLCJwYXJ0aWNsZU5vZGUiLCJjcmVhdGVQYXJ0aWNsZU5vZGUiLCJjcmVhdGVUYW5kZW0iLCJhZGRDaGlsZCIsImlucHV0RW5hYmxlZFByb3BlcnR5IiwibGluayIsImlucHV0RW5hYmxlZCIsInVwZGF0ZVBhcnRpY2xlUG9zaXRpb24iLCJwb3NpdGlvbiIsInRyYW5zbGF0aW9uIiwibW9kZWxUb1ZpZXdQb3NpdGlvbiIsInBvc2l0aW9uUHJvcGVydHkiLCJkcmFnTGlzdGVuZXIiLCJkZXN0aW5hdGlvblByb3BlcnR5IiwidHJhbnNmb3JtIiwiZHJhZ0JvdW5kc1Byb3BlcnR5Iiwic3RhcnQiLCJ1c2VyQ29udHJvbGxlZFByb3BlcnR5Iiwic2V0IiwiZ2V0IiwiZXF1YWxzIiwiZHJhZyIsIm1vdmVJbW1lZGlhdGVseVRvRGVzdGluYXRpb24iLCJlbmQiLCJpc0Rpc3Bvc2VkIiwiZHJhZ0VuZGVkRW1pdHRlciIsImVtaXQiLCJhZGRJbnB1dExpc3RlbmVyIiwibXV0YXRlIiwiZGlzcG9zZVBhcnRpY2xlVmlldyIsInVubGluayIsImRpc3Bvc2UiLCJzdGFydFN5bnRoZXRpY0RyYWciLCJldmVudCIsInByZXNzIiwidHlwZSIsIm1vZGVsVG9WaWV3RGVsdGFYIiwicmFkaXVzUHJvcGVydHkiLCJzaG93TGFiZWwiLCJ0eXBlUHJvcGVydHkiLCJjb2xvckdyYWRpZW50SW5kZXhOdW1iZXJQcm9wZXJ0eSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiUGFydGljbGVWaWV3LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE0LTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFR5cGUgdGhhdCByZXByZXNlbnRzIGEgc3ViLWF0b21pYyBwYXJ0aWNsZSBpbiB0aGUgdmlldy5cclxuICovXHJcblxyXG5pbXBvcnQgUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vYXhvbi9qcy9Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBCb3VuZHMyIGZyb20gJy4uLy4uLy4uL2RvdC9qcy9Cb3VuZHMyLmpzJztcclxuaW1wb3J0IG1lcmdlIGZyb20gJy4uLy4uLy4uL3BoZXQtY29yZS9qcy9tZXJnZS5qcyc7XHJcbmltcG9ydCB7IERyYWdMaXN0ZW5lciwgTm9kZSB9IGZyb20gJy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBUYW5kZW0gZnJvbSAnLi4vLi4vLi4vdGFuZGVtL2pzL1RhbmRlbS5qcyc7XHJcbmltcG9ydCBzaHJlZCBmcm9tICcuLi9zaHJlZC5qcyc7XHJcbmltcG9ydCBJc290b3BlTm9kZSBmcm9tICcuL0lzb3RvcGVOb2RlLmpzJztcclxuaW1wb3J0IFBhcnRpY2xlTm9kZSBmcm9tICcuL1BhcnRpY2xlTm9kZS5qcyc7XHJcblxyXG5jbGFzcyBQYXJ0aWNsZVZpZXcgZXh0ZW5kcyBOb2RlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtQYXJ0aWNsZX0gcGFydGljbGVcclxuICAgKiBAcGFyYW0ge01vZGVsVmlld1RyYW5zZm9ybTJ9IG1vZGVsVmlld1RyYW5zZm9ybVxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cclxuICAgKi9cclxuICBjb25zdHJ1Y3RvciggcGFydGljbGUsIG1vZGVsVmlld1RyYW5zZm9ybSwgb3B0aW9ucyApIHtcclxuXHJcbiAgICBvcHRpb25zID0gbWVyZ2UoIHtcclxuICAgICAgZHJhZ0JvdW5kczogQm91bmRzMi5FVkVSWVRISU5HLFxyXG4gICAgICB0YW5kZW06IFRhbmRlbS5SRVFVSVJFRCxcclxuXHJcbiAgICAgIC8vIHtCb29sZWFuUHJvcGVydHl8bnVsbH0gLSBpZiBwcm92aWRlZCwgdGhpcyBpcyB1c2VkIHRvIHNldCB0aGUgcGFydGljbGUgbm9kZSBpbnRvIGFuZCBvdXQgb2YgaGlnaCBjb250cmFzdCBtb2RlXHJcbiAgICAgIGhpZ2hDb250cmFzdFByb3BlcnR5OiBudWxsXHJcbiAgICB9LCBvcHRpb25zICk7XHJcblxyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICB0aGlzLnBhcnRpY2xlID0gcGFydGljbGU7IC8vIEBwdWJsaWNcclxuXHJcbiAgICAvLyBBZGQgdGhlIHBhcnRpY2xlIHJlcHJlc2VudGF0aW9uLlxyXG4gICAgY29uc3QgcGFydGljbGVOb2RlID0gY3JlYXRlUGFydGljbGVOb2RlKFxyXG4gICAgICBwYXJ0aWNsZSxcclxuICAgICAgbW9kZWxWaWV3VHJhbnNmb3JtLFxyXG4gICAgICBvcHRpb25zLmhpZ2hDb250cmFzdFByb3BlcnR5LFxyXG4gICAgICBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdwYXJ0aWNsZU5vZGUnIClcclxuICAgICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBwYXJ0aWNsZU5vZGUgKTtcclxuXHJcbiAgICBwYXJ0aWNsZS5pbnB1dEVuYWJsZWRQcm9wZXJ0eS5saW5rKCBpbnB1dEVuYWJsZWQgPT4ge1xyXG4gICAgICB0aGlzLmlucHV0RW5hYmxlZCA9IGlucHV0RW5hYmxlZDtcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBMaXN0ZW4gdG8gdGhlIG1vZGVsIHBvc2l0aW9uIGFuZCB1cGRhdGUuXHJcbiAgICBjb25zdCB1cGRhdGVQYXJ0aWNsZVBvc2l0aW9uID0gcG9zaXRpb24gPT4ge1xyXG4gICAgICB0aGlzLnRyYW5zbGF0aW9uID0gbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3UG9zaXRpb24oIHBvc2l0aW9uICk7XHJcbiAgICB9O1xyXG4gICAgcGFydGljbGUucG9zaXRpb25Qcm9wZXJ0eS5saW5rKCB1cGRhdGVQYXJ0aWNsZVBvc2l0aW9uICk7XHJcblxyXG4gICAgLy8gYWRkIGEgZHJhZyBsaXN0ZW5lclxyXG4gICAgdGhpcy5kcmFnTGlzdGVuZXIgPSBuZXcgRHJhZ0xpc3RlbmVyKCB7XHJcblxyXG4gICAgICBwb3NpdGlvblByb3BlcnR5OiBwYXJ0aWNsZS5kZXN0aW5hdGlvblByb3BlcnR5LFxyXG4gICAgICB0cmFuc2Zvcm06IG1vZGVsVmlld1RyYW5zZm9ybSxcclxuICAgICAgZHJhZ0JvdW5kc1Byb3BlcnR5OiBvcHRpb25zLmRyYWdCb3VuZHMgPyBuZXcgUHJvcGVydHkoIG9wdGlvbnMuZHJhZ0JvdW5kcyApIDogbnVsbCxcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdkcmFnTGlzdGVuZXInICksXHJcblxyXG4gICAgICBzdGFydDogKCkgPT4ge1xyXG4gICAgICAgIHRoaXMucGFydGljbGUudXNlckNvbnRyb2xsZWRQcm9wZXJ0eS5zZXQoIHRydWUgKTtcclxuXHJcbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgYW4gYW5pbWF0aW9uIGluIHByb2dyZXNzLCBjYW5jZWwgaXQgYmUgc2V0dGluZyB0aGUgZGVzdGluYXRpb24gdG8gdGhlIHBvc2l0aW9uXHJcbiAgICAgICAgaWYgKCAhcGFydGljbGUucG9zaXRpb25Qcm9wZXJ0eS5nZXQoKS5lcXVhbHMoIHBhcnRpY2xlLmRlc3RpbmF0aW9uUHJvcGVydHkuZ2V0KCkgKSApIHtcclxuICAgICAgICAgIHBhcnRpY2xlLmRlc3RpbmF0aW9uUHJvcGVydHkuc2V0KCBwYXJ0aWNsZS5wb3NpdGlvblByb3BlcnR5LmdldCgpICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgZHJhZzogKCkgPT4ge1xyXG5cclxuICAgICAgICAvLyBCZWNhdXNlIHRoZSBkZXN0aW5hdGlvbiBwcm9wZXJ0eSBpcyB3aGF0IGlzIGJlaW5nIHNldCBieSB0aGUgZHJhZyBsaXN0ZW5lciwgd2UgbmVlZCB0byB0ZWxsIHRoZSBwYXJ0aWNsZSB0b1xyXG4gICAgICAgIC8vIGdvIGltbWVkaWF0ZWx5IHRvIGl0cyBkZXN0aW5hdGlvbiB3aGVuIGEgZHJhZyBvY2N1cnMuXHJcbiAgICAgICAgdGhpcy5wYXJ0aWNsZS5tb3ZlSW1tZWRpYXRlbHlUb0Rlc3RpbmF0aW9uKCk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBlbmQ6ICgpID0+IHtcclxuICAgICAgICB0aGlzLnBhcnRpY2xlLnVzZXJDb250cm9sbGVkUHJvcGVydHkuc2V0KCBmYWxzZSApO1xyXG5cclxuICAgICAgICBpZiAoICF0aGlzLmlzRGlzcG9zZWQgKSB7XHJcbiAgICAgICAgICBwYXJ0aWNsZS5kcmFnRW5kZWRFbWl0dGVyLmVtaXQoIHBhcnRpY2xlICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmFkZElucHV0TGlzdGVuZXIoIHRoaXMuZHJhZ0xpc3RlbmVyICk7XHJcblxyXG4gICAgdGhpcy5tdXRhdGUoIG9wdGlvbnMgKTtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZSBjYWxsZWQgYnkgZGlzcG9zZVxyXG4gICAgdGhpcy5kaXNwb3NlUGFydGljbGVWaWV3ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHBhcnRpY2xlLnBvc2l0aW9uUHJvcGVydHkudW5saW5rKCB1cGRhdGVQYXJ0aWNsZVBvc2l0aW9uICk7XHJcbiAgICAgIHBhcnRpY2xlTm9kZS5kaXNwb3NlKCk7XHJcbiAgICAgIHRoaXMuZHJhZ0xpc3RlbmVyLmRpc3Bvc2UoKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcHVibGljXHJcbiAgICogQG92ZXJyaWRlXHJcbiAgICovXHJcbiAgZGlzcG9zZSgpIHtcclxuICAgIHRoaXMuZGlzcG9zZVBhcnRpY2xlVmlldygpO1xyXG4gICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHB1YmxpY1xyXG4gICAqIEBwYXJhbSB7UHJlc3NMaXN0ZW5lckV2ZW50fSBldmVudFxyXG4gICAqL1xyXG4gIHN0YXJ0U3ludGhldGljRHJhZyggZXZlbnQgKSB7XHJcbiAgICB0aGlzLmRyYWdMaXN0ZW5lci5wcmVzcyggZXZlbnQgKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIHRoZSBwcm9wZXIgdmlldyBmb3IgYSBwYXJ0aWNsZS5cclxuICogQHBhcmFtIHtQYXJ0aWNsZX0gcGFydGljbGVcclxuICogQHBhcmFtIHtNb2RlbFZpZXdUcmFuc2Zvcm0yfSBtb2RlbFZpZXdUcmFuc2Zvcm1cclxuICogQHBhcmFtIHtCb29sZWFuUHJvcGVydHl8bnVsbH0gaGlnaENvbnRyYXN0UHJvcGVydHlcclxuICogQHBhcmFtIHtUYW5kZW19IHRhbmRlbVxyXG4gKiBAcmV0dXJucyB7Tm9kZX1cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVBhcnRpY2xlTm9kZSggcGFydGljbGUsIG1vZGVsVmlld1RyYW5zZm9ybSwgaGlnaENvbnRyYXN0UHJvcGVydHksIHRhbmRlbSApIHtcclxuICBsZXQgcGFydGljbGVOb2RlO1xyXG4gIGlmICggcGFydGljbGUudHlwZSA9PT0gJ0lzb3RvcGUnICkge1xyXG4gICAgcGFydGljbGVOb2RlID0gbmV3IElzb3RvcGVOb2RlKFxyXG4gICAgICBwYXJ0aWNsZSxcclxuICAgICAgbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3RGVsdGFYKCBwYXJ0aWNsZS5yYWRpdXNQcm9wZXJ0eS5nZXQoKSApLFxyXG4gICAgICB7IHNob3dMYWJlbDogcGFydGljbGUuc2hvd0xhYmVsLCB0YW5kZW06IHRhbmRlbSB9XHJcbiAgICApO1xyXG4gIH1cclxuICBlbHNlIHtcclxuICAgIHBhcnRpY2xlTm9kZSA9IG5ldyBQYXJ0aWNsZU5vZGUoXHJcbiAgICAgIHBhcnRpY2xlLnR5cGUsXHJcbiAgICAgIG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld0RlbHRhWCggcGFydGljbGUucmFkaXVzUHJvcGVydHkuZ2V0KCkgKSxcclxuICAgICAge1xyXG4gICAgICAgIGhpZ2hDb250cmFzdFByb3BlcnR5OiBoaWdoQ29udHJhc3RQcm9wZXJ0eSxcclxuICAgICAgICB0eXBlUHJvcGVydHk6IHBhcnRpY2xlLnR5cGVQcm9wZXJ0eSxcclxuICAgICAgICBjb2xvckdyYWRpZW50SW5kZXhOdW1iZXJQcm9wZXJ0eTogcGFydGljbGUuY29sb3JHcmFkaWVudEluZGV4TnVtYmVyUHJvcGVydHksXHJcbiAgICAgICAgdGFuZGVtOiB0YW5kZW1cclxuICAgICAgfVxyXG4gICAgKTtcclxuICB9XHJcbiAgcmV0dXJuIHBhcnRpY2xlTm9kZTtcclxufVxyXG5cclxuc2hyZWQucmVnaXN0ZXIoICdQYXJ0aWNsZVZpZXcnLCBQYXJ0aWNsZVZpZXcgKTtcclxuZXhwb3J0IGRlZmF1bHQgUGFydGljbGVWaWV3OyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFFBQVEsTUFBTSw4QkFBOEI7QUFDbkQsT0FBT0MsT0FBTyxNQUFNLDRCQUE0QjtBQUNoRCxPQUFPQyxLQUFLLE1BQU0sZ0NBQWdDO0FBQ2xELFNBQVNDLFlBQVksRUFBRUMsSUFBSSxRQUFRLGdDQUFnQztBQUNuRSxPQUFPQyxNQUFNLE1BQU0sOEJBQThCO0FBQ2pELE9BQU9DLEtBQUssTUFBTSxhQUFhO0FBQy9CLE9BQU9DLFdBQVcsTUFBTSxrQkFBa0I7QUFDMUMsT0FBT0MsWUFBWSxNQUFNLG1CQUFtQjtBQUU1QyxNQUFNQyxZQUFZLFNBQVNMLElBQUksQ0FBQztFQUU5QjtBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBQ0VNLFdBQVdBLENBQUVDLFFBQVEsRUFBRUMsa0JBQWtCLEVBQUVDLE9BQU8sRUFBRztJQUVuREEsT0FBTyxHQUFHWCxLQUFLLENBQUU7TUFDZlksVUFBVSxFQUFFYixPQUFPLENBQUNjLFVBQVU7TUFDOUJDLE1BQU0sRUFBRVgsTUFBTSxDQUFD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