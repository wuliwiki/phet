// Copyright 2014-2023, University of Colorado Boulder

/**
 * Node that represents the electron shell in an atom as a "cloud" that grows and shrinks depending on the number of
 * electrons that it contains.  This has also been referred to as the "Schrodinger model" representation.
 *
 * @author John Blanco
 */

import merge from '../../../phet-core/js/merge.js';
import { Circle, DragListener, RadialGradient } from '../../../scenery/js/imports.js';
import Tandem from '../../../tandem/js/Tandem.js';
import shred from '../shred.js';
import ShredConstants from '../ShredConstants.js';

// constants
const DEFAULT_RADIUS = 50; // in pm, chosen as an arbitrary value that is close to the "real" values that are used

class ElectronCloudView extends Circle {
  /**
   * @param {ParticleAtom} atom
   * @param {ModelViewTransform2} modelViewTransform
   * @param {Object} [options]
   */
  constructor(atom, modelViewTransform, options) {
    options = merge({
      cursor: 'pointer',
      fill: 'pink',
      tandem: Tandem.REQUIRED
    }, options);
    assert && assert(options.translation === undefined, 'ElectronCloudView sets translation');
    options.translation = modelViewTransform.modelToViewPosition({
      x: 0,
      y: 0
    });
    super(DEFAULT_RADIUS, options);

    // Function that updates the size of the cloud based on the number of electrons.
    const update = numElectrons => {
      if (numElectrons === 0) {
        this.radius = 1E-5; // arbitrary non-zero value
        this.fill = 'transparent';
      } else {
        const minRadius = modelViewTransform.modelToViewDeltaX(atom.innerElectronShellRadius) * 0.5;
        const maxRadius = modelViewTransform.modelToViewDeltaX(atom.outerElectronShellRadius);
        const radius = minRadius + (maxRadius - minRadius) / ShredConstants.MAX_ELECTRONS * numElectrons;
        this.radius = radius;
        this.fill = new RadialGradient(0, 0, 0, 0, 0, radius).addColorStop(0, 'rgba( 0, 0, 255, 200 )').addColorStop(0.9, 'rgba( 0, 0, 255, 0 )');
      }
    };
    update(atom.electrons.length);

    // Update the cloud size as electrons come and go.
    atom.electrons.lengthProperty.link(update);

    // closure for converting a point in local coordinate frame to model coordinates
    const localViewToModel = point => {
      // Note: The following transform works, but it is a bit obscure, and relies on the topology of the scene graph.
      // JB, SR, and JO discussed potentially better ways to do it but didn't come up with anything at the time. If
      // this code is leveraged, this transform should be revisited for potential improvement.
      return modelViewTransform.viewToModelPosition(this.getParents()[0].globalToLocalPoint(point));
    };

    // If the user clicks on the cloud, extract an electron.
    this.extractedElectron = null; // @private
    const dragListener = new DragListener({
      start: event => {
        const positionInModelSpace = localViewToModel(event.pointer.point);
        const electron = atom.extractParticle('electron');
        if (electron !== null) {
          electron.userControlledProperty.set(true);
          electron.setPositionAndDestination(positionInModelSpace);
          this.extractedElectron = electron;
        }
      },
      drag: event => {
        if (this.extractedElectron !== null) {
          this.extractedElectron.setPositionAndDestination(localViewToModel(event.pointer.point));
        }
      },
      end: () => {
        if (this.extractedElectron !== null) {
          this.extractedElectron.userControlledProperty.set(false);
          this.extractedElectron = null;
        }
      },
      tandem: options.tandem.createTandem('dragListener')
    });
    this.addInputListener(dragListener);

    // @private called by dispose
    this.disposeElectronCloudView = () => {
      atom.electrons.lengthProperty.unlink(update);
      dragListener.dispose();
    };
  }

  /**
   * @public
   * @override
   */
  dispose() {
    this.disposeElectronCloudView();
    super.dispose();
  }
}
shred.register('ElectronCloudView', ElectronCloudView);
export default ElectronCloudView;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtZXJnZSIsIkNpcmNsZSIsIkRyYWdMaXN0ZW5lciIsIlJhZGlhbEdyYWRpZW50IiwiVGFuZGVtIiwic2hyZWQiLCJTaHJlZENvbnN0YW50cyIsIkRFRkFVTFRfUkFESVVTIiwiRWxlY3Ryb25DbG91ZFZpZXciLCJjb25zdHJ1Y3RvciIsImF0b20iLCJtb2RlbFZpZXdUcmFuc2Zvcm0iLCJvcHRpb25zIiwiY3Vyc29yIiwiZmlsbCIsInRhbmRlbSIsIlJFUVVJUkVEIiwiYXNzZXJ0IiwidHJhbnNsYXRpb24iLCJ1bmRlZmluZWQiLCJtb2RlbFRvVmlld1Bvc2l0aW9uIiwieCIsInkiLCJ1cGRhdGUiLCJudW1FbGVjdHJvbnMiLCJyYWRpdXMiLCJtaW5SYWRpdXMiLCJtb2RlbFRvVmlld0RlbHRhWCIsImlubmVyRWxlY3Ryb25TaGVsbFJhZGl1cyIsIm1heFJhZGl1cyIsIm91dGVyRWxlY3Ryb25TaGVsbFJhZGl1cyIsIk1BWF9FTEVDVFJPTlMiLCJhZGRDb2xvclN0b3AiLCJlbGVjdHJvbnMiLCJsZW5ndGgiLCJsZW5ndGhQcm9wZXJ0eSIsImxpbmsiLCJsb2NhbFZpZXdUb01vZGVsIiwicG9pbnQiLCJ2aWV3VG9Nb2RlbFBvc2l0aW9uIiwiZ2V0UGFyZW50cyIsImdsb2JhbFRvTG9jYWxQb2ludCIsImV4dHJhY3RlZEVsZWN0cm9uIiwiZHJhZ0xpc3RlbmVyIiwic3RhcnQiLCJldmVudCIsInBvc2l0aW9uSW5Nb2RlbFNwYWNlIiwicG9pbnRlciIsImVsZWN0cm9uIiwiZXh0cmFjdFBhcnRpY2xlIiwidXNlckNvbnRyb2xsZWRQcm9wZXJ0eSIsInNldCIsInNldFBvc2l0aW9uQW5kRGVzdGluYXRpb24iLCJkcmFnIiwiZW5kIiwiY3JlYXRlVGFuZGVtIiwiYWRkSW5wdXRMaXN0ZW5lciIsImRpc3Bvc2VFbGVjdHJvbkNsb3VkVmlldyIsInVubGluayIsImRpc3Bvc2UiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkVsZWN0cm9uQ2xvdWRWaWV3LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE0LTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIE5vZGUgdGhhdCByZXByZXNlbnRzIHRoZSBlbGVjdHJvbiBzaGVsbCBpbiBhbiBhdG9tIGFzIGEgXCJjbG91ZFwiIHRoYXQgZ3Jvd3MgYW5kIHNocmlua3MgZGVwZW5kaW5nIG9uIHRoZSBudW1iZXIgb2ZcclxuICogZWxlY3Ryb25zIHRoYXQgaXQgY29udGFpbnMuICBUaGlzIGhhcyBhbHNvIGJlZW4gcmVmZXJyZWQgdG8gYXMgdGhlIFwiU2Nocm9kaW5nZXIgbW9kZWxcIiByZXByZXNlbnRhdGlvbi5cclxuICpcclxuICogQGF1dGhvciBKb2huIEJsYW5jb1xyXG4gKi9cclxuXHJcbmltcG9ydCBtZXJnZSBmcm9tICcuLi8uLi8uLi9waGV0LWNvcmUvanMvbWVyZ2UuanMnO1xyXG5pbXBvcnQgeyBDaXJjbGUsIERyYWdMaXN0ZW5lciwgUmFkaWFsR3JhZGllbnQgfSBmcm9tICcuLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xyXG5pbXBvcnQgc2hyZWQgZnJvbSAnLi4vc2hyZWQuanMnO1xyXG5pbXBvcnQgU2hyZWRDb25zdGFudHMgZnJvbSAnLi4vU2hyZWRDb25zdGFudHMuanMnO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IERFRkFVTFRfUkFESVVTID0gNTA7IC8vIGluIHBtLCBjaG9zZW4gYXMgYW4gYXJiaXRyYXJ5IHZhbHVlIHRoYXQgaXMgY2xvc2UgdG8gdGhlIFwicmVhbFwiIHZhbHVlcyB0aGF0IGFyZSB1c2VkXHJcblxyXG5jbGFzcyBFbGVjdHJvbkNsb3VkVmlldyBleHRlbmRzIENpcmNsZSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7UGFydGljbGVBdG9tfSBhdG9tXHJcbiAgICogQHBhcmFtIHtNb2RlbFZpZXdUcmFuc2Zvcm0yfSBtb2RlbFZpZXdUcmFuc2Zvcm1cclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIGF0b20sIG1vZGVsVmlld1RyYW5zZm9ybSwgb3B0aW9ucyApIHtcclxuXHJcbiAgICBvcHRpb25zID0gbWVyZ2UoIHtcclxuICAgICAgY3Vyc29yOiAncG9pbnRlcicsXHJcbiAgICAgIGZpbGw6ICdwaW5rJyxcclxuICAgICAgdGFuZGVtOiBUYW5kZW0uUkVRVUlSRURcclxuICAgIH0sIG9wdGlvbnMgKTtcclxuXHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBvcHRpb25zLnRyYW5zbGF0aW9uID09PSB1bmRlZmluZWQsICdFbGVjdHJvbkNsb3VkVmlldyBzZXRzIHRyYW5zbGF0aW9uJyApO1xyXG4gICAgb3B0aW9ucy50cmFuc2xhdGlvbiA9IG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1Bvc2l0aW9uKCB7IHg6IDAsIHk6IDAgfSApO1xyXG5cclxuICAgIHN1cGVyKCBERUZBVUxUX1JBRElVUywgb3B0aW9ucyApO1xyXG5cclxuICAgIC8vIEZ1bmN0aW9uIHRoYXQgdXBkYXRlcyB0aGUgc2l6ZSBvZiB0aGUgY2xvdWQgYmFzZWQgb24gdGhlIG51bWJlciBvZiBlbGVjdHJvbnMuXHJcbiAgICBjb25zdCB1cGRhdGUgPSBudW1FbGVjdHJvbnMgPT4ge1xyXG4gICAgICBpZiAoIG51bUVsZWN0cm9ucyA9PT0gMCApIHtcclxuICAgICAgICB0aGlzLnJhZGl1cyA9IDFFLTU7IC8vIGFyYml0cmFyeSBub24temVybyB2YWx1ZVxyXG4gICAgICAgIHRoaXMuZmlsbCA9ICd0cmFuc3BhcmVudCc7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgbWluUmFkaXVzID0gbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3RGVsdGFYKCBhdG9tLmlubmVyRWxlY3Ryb25TaGVsbFJhZGl1cyApICogMC41O1xyXG4gICAgICAgIGNvbnN0IG1heFJhZGl1cyA9IG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld0RlbHRhWCggYXRvbS5vdXRlckVsZWN0cm9uU2hlbGxSYWRpdXMgKTtcclxuICAgICAgICBjb25zdCByYWRpdXMgPSBtaW5SYWRpdXMgKyAoICggbWF4UmFkaXVzIC0gbWluUmFkaXVzICkgLyBTaHJlZENvbnN0YW50cy5NQVhfRUxFQ1RST05TICkgKiBudW1FbGVjdHJvbnM7XHJcbiAgICAgICAgdGhpcy5yYWRpdXMgPSByYWRpdXM7XHJcbiAgICAgICAgdGhpcy5maWxsID0gbmV3IFJhZGlhbEdyYWRpZW50KCAwLCAwLCAwLCAwLCAwLCByYWRpdXMgKVxyXG4gICAgICAgICAgLmFkZENvbG9yU3RvcCggMCwgJ3JnYmEoIDAsIDAsIDI1NSwgMjAwICknIClcclxuICAgICAgICAgIC5hZGRDb2xvclN0b3AoIDAuOSwgJ3JnYmEoIDAsIDAsIDI1NSwgMCApJyApO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgdXBkYXRlKCBhdG9tLmVsZWN0cm9ucy5sZW5ndGggKTtcclxuXHJcbiAgICAvLyBVcGRhdGUgdGhlIGNsb3VkIHNpemUgYXMgZWxlY3Ryb25zIGNvbWUgYW5kIGdvLlxyXG4gICAgYXRvbS5lbGVjdHJvbnMubGVuZ3RoUHJvcGVydHkubGluayggdXBkYXRlICk7XHJcblxyXG4gICAgLy8gY2xvc3VyZSBmb3IgY29udmVydGluZyBhIHBvaW50IGluIGxvY2FsIGNvb3JkaW5hdGUgZnJhbWUgdG8gbW9kZWwgY29vcmRpbmF0ZXNcclxuICAgIGNvbnN0IGxvY2FsVmlld1RvTW9kZWwgPSBwb2ludCA9PiB7XHJcblxyXG4gICAgICAvLyBOb3RlOiBUaGUgZm9sbG93aW5nIHRyYW5zZm9ybSB3b3JrcywgYnV0IGl0IGlzIGEgYml0IG9ic2N1cmUsIGFuZCByZWxpZXMgb24gdGhlIHRvcG9sb2d5IG9mIHRoZSBzY2VuZSBncmFwaC5cclxuICAgICAgLy8gSkIsIFNSLCBhbmQgSk8gZGlzY3Vzc2VkIHBvdGVudGlhbGx5IGJldHRlciB3YXlzIHRvIGRvIGl0IGJ1dCBkaWRuJ3QgY29tZSB1cCB3aXRoIGFueXRoaW5nIGF0IHRoZSB0aW1lLiBJZlxyXG4gICAgICAvLyB0aGlzIGNvZGUgaXMgbGV2ZXJhZ2VkLCB0aGlzIHRyYW5zZm9ybSBzaG91bGQgYmUgcmV2aXNpdGVkIGZvciBwb3RlbnRpYWwgaW1wcm92ZW1lbnQuXHJcbiAgICAgIHJldHVybiBtb2RlbFZpZXdUcmFuc2Zvcm0udmlld1RvTW9kZWxQb3NpdGlvbihcclxuICAgICAgICB0aGlzLmdldFBhcmVudHMoKVsgMCBdLmdsb2JhbFRvTG9jYWxQb2ludCggcG9pbnQgKVxyXG4gICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBJZiB0aGUgdXNlciBjbGlja3Mgb24gdGhlIGNsb3VkLCBleHRyYWN0IGFuIGVsZWN0cm9uLlxyXG4gICAgdGhpcy5leHRyYWN0ZWRFbGVjdHJvbiA9IG51bGw7IC8vIEBwcml2YXRlXHJcbiAgICBjb25zdCBkcmFnTGlzdGVuZXIgPSBuZXcgRHJhZ0xpc3RlbmVyKCB7XHJcbiAgICAgIHN0YXJ0OiBldmVudCA9PiB7XHJcblxyXG4gICAgICAgIGNvbnN0IHBvc2l0aW9uSW5Nb2RlbFNwYWNlID0gbG9jYWxWaWV3VG9Nb2RlbCggZXZlbnQucG9pbnRlci5wb2ludCApO1xyXG5cclxuICAgICAgICBjb25zdCBlbGVjdHJvbiA9IGF0b20uZXh0cmFjdFBhcnRpY2xlKCAnZWxlY3Ryb24nICk7XHJcbiAgICAgICAgaWYgKCBlbGVjdHJvbiAhPT0gbnVsbCApIHtcclxuICAgICAgICAgIGVsZWN0cm9uLnVzZXJDb250cm9sbGVkUHJvcGVydHkuc2V0KCB0cnVlICk7XHJcbiAgICAgICAgICBlbGVjdHJvbi5zZXRQb3NpdGlvbkFuZERlc3RpbmF0aW9uKCBwb3NpdGlvbkluTW9kZWxTcGFjZSApO1xyXG4gICAgICAgICAgdGhpcy5leHRyYWN0ZWRFbGVjdHJvbiA9IGVsZWN0cm9uO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgZHJhZzogZXZlbnQgPT4ge1xyXG4gICAgICAgIGlmICggdGhpcy5leHRyYWN0ZWRFbGVjdHJvbiAhPT0gbnVsbCApIHtcclxuICAgICAgICAgIHRoaXMuZXh0cmFjdGVkRWxlY3Ryb24uc2V0UG9zaXRpb25BbmREZXN0aW5hdGlvbiggbG9jYWxWaWV3VG9Nb2RlbCggZXZlbnQucG9pbnRlci5wb2ludCApICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBlbmQ6ICgpID0+IHtcclxuICAgICAgICBpZiAoIHRoaXMuZXh0cmFjdGVkRWxlY3Ryb24gIT09IG51bGwgKSB7XHJcbiAgICAgICAgICB0aGlzLmV4dHJhY3RlZEVsZWN0cm9uLnVzZXJDb250cm9sbGVkUHJvcGVydHkuc2V0KCBmYWxzZSApO1xyXG4gICAgICAgICAgdGhpcy5leHRyYWN0ZWRFbGVjdHJvbiA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2RyYWdMaXN0ZW5lcicgKVxyXG4gICAgfSApO1xyXG4gICAgdGhpcy5hZGRJbnB1dExpc3RlbmVyKCBkcmFnTGlzdGVuZXIgKTtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZSBjYWxsZWQgYnkgZGlzcG9zZVxyXG4gICAgdGhpcy5kaXNwb3NlRWxlY3Ryb25DbG91ZFZpZXcgPSAoKSA9PiB7XHJcbiAgICAgIGF0b20uZWxlY3Ryb25zLmxlbmd0aFByb3BlcnR5LnVubGluayggdXBkYXRlICk7XHJcbiAgICAgIGRyYWdMaXN0ZW5lci5kaXNwb3NlKCk7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHB1YmxpY1xyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqL1xyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICB0aGlzLmRpc3Bvc2VFbGVjdHJvbkNsb3VkVmlldygpO1xyXG4gICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gIH1cclxufVxyXG5cclxuc2hyZWQucmVnaXN0ZXIoICdFbGVjdHJvbkNsb3VkVmlldycsIEVsZWN0cm9uQ2xvdWRWaWV3ICk7XHJcbmV4cG9ydCBkZWZhdWx0IEVsZWN0cm9uQ2xvdWRWaWV3OyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLEtBQUssTUFBTSxnQ0FBZ0M7QUFDbEQsU0FBU0MsTUFBTSxFQUFFQyxZQUFZLEVBQUVDLGNBQWMsUUFBUSxnQ0FBZ0M7QUFDckYsT0FBT0MsTUFBTSxNQUFNLDhCQUE4QjtBQUNqRCxPQUFPQyxLQUFLLE1BQU0sYUFBYTtBQUMvQixPQUFPQyxjQUFjLE1BQU0sc0JBQXNCOztBQUVqRDtBQUNBLE1BQU1DLGNBQWMsR0FBRyxFQUFFLENBQUMsQ0FBQzs7QUFFM0IsTUFBTUMsaUJBQWlCLFNBQVNQLE1BQU0sQ0FBQztFQUVyQztBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBQ0VRLFdBQVdBLENBQUVDLElBQUksRUFBRUMsa0JBQWtCLEVBQUVDLE9BQU8sRUFBRztJQUUvQ0EsT0FBTyxHQUFHWixLQUFLLENBQUU7TUFDZmEsTUFBTSxFQUFFLFNBQVM7TUFDakJDLElBQUksRUFBRSxNQUFNO01BQ1pDLE1BQU0sRUFBRVgsTUFBTSxDQUFDWTtJQUNqQixDQUFDLEVBQUVKLE9BQVEsQ0FBQztJQUVaSyxNQUFNLElBQUlBLE1BQU0sQ0FBRUwsT0FBTyxDQUFDTSxXQUFXLEtBQUtDLFNBQVMsRUFBRSxvQ0FBcUMsQ0FBQztJQUMzRlAsT0FBTyxDQUFDTSxXQUFXLEdBQUdQLGtCQUFrQixDQUFDUyxtQkFBbUIsQ0FBRTtNQUFFQyxDQUFDLEVBQUUsQ0FBQztNQUFFQyxDQUFDLEVBQUU7SUFBRSxDQUFFLENBQUM7SUFFOUUsS0FBSyxDQUFFZixjQUFjLEVBQUVLLE9BQVEsQ0FBQzs7SUFFaEM7SUFDQSxNQUFNVyxNQUFNLEdBQUdDLFlBQVksSUFBSTtNQUM3QixJQUFLQSxZQUFZLEtBQUssQ0FBQyxFQUFHO1FB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