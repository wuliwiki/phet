// Copyright 2014-2021, University of Colorado Boulder

/**
 * Node that depicts an interactive atom where the user can add subatomic particles from a set of buckets.
 */

import merge from '../../../phet-core/js/merge.js';
import BucketFront from '../../../scenery-phet/js/bucket/BucketFront.js';
import BucketHole from '../../../scenery-phet/js/bucket/BucketHole.js';
import { Node } from '../../../scenery/js/imports.js';
import Tandem from '../../../tandem/js/Tandem.js';
import shred from '../shred.js';
import AtomNode from './AtomNode.js';
import BucketDragListener from './BucketDragListener.js';
import ParticleView from './ParticleView.js';

// constants
const NUM_NUCLEON_LAYERS = 5; // This is based on max number of particles, may need adjustment if that changes.

class InteractiveSchematicAtom extends Node {
  /**
   * @param {BuildAnAtomModel} model
   * @param {ModelViewTransform2} modelViewTransform
   * @param {Object} [options]
   */
  constructor(model, modelViewTransform, options) {
    options = merge({
      // {Property.<boolean>|null} - property that can be used to turn on high-contrast particles
      highContrastProperty: null,
      tandem: Tandem.REQUIRED
    }, options);
    super();
    const particleViews = []; // remember all the particleViews when using in dispose

    // Add the node that depicts the textual labels, the electron shells, and the center X marker.
    const atomNode = new AtomNode(model.particleAtom, modelViewTransform, {
      showElementNameProperty: model.showElementNameProperty,
      showNeutralOrIonProperty: model.showNeutralOrIonProperty,
      showStableOrUnstableProperty: model.showStableOrUnstableProperty,
      electronShellDepictionProperty: model.electronShellDepictionProperty,
      tandem: options.tandem.createTandem('atomNode')
    });
    this.addChild(atomNode);

    // Add the bucket holes.  Done separately from the bucket front for layering.
    _.each(model.buckets, bucket => this.addChild(new BucketHole(bucket, modelViewTransform)));

    // Add the layers where the nucleons will be maintained.
    const nucleonLayers = [];
    _.times(NUM_NUCLEON_LAYERS, () => {
      const nucleonLayer = new Node();
      nucleonLayers.push(nucleonLayer);
      this.addChild(nucleonLayer);
    });
    nucleonLayers.reverse(); // Set up the nucleon layers so that layer 0 is in front.

    // Add the layer where the electrons will be maintained.
    const electronLayer = new Node({
      layerSplit: true
    });
    this.addChild(electronLayer);

    // Add the nucleon particle views.
    const nucleonGroupTandem = options.tandem && options.tandem.createTandem('nucleons').createGroupTandem('nucleon');
    const electronGroupTandem = options.tandem && options.tandem.createTandem('electrons').createGroupTandem('electron');
    model.nucleons.forEach(nucleon => {
      const particleView = new ParticleView(nucleon, modelViewTransform, {
        highContrastProperty: options.highContrastProperty,
        tandem: nucleonGroupTandem && nucleonGroupTandem.createNextTandem()
      });
      nucleonLayers[nucleon.zLayerProperty.get()].addChild(particleView);
      particleViews.push(particleView);

      // Add a listener that adjusts a nucleon's z-order layering.
      nucleon.zLayerProperty.link(zLayer => {
        assert && assert(nucleonLayers.length > zLayer, 'zLayer for nucleon exceeds number of layers, max number may need increasing.');

        // Determine whether nucleon view is on the correct layer.
        let onCorrectLayer = false;
        nucleonLayers[zLayer].children.forEach(particleView => {
          if (particleView.particle === nucleon) {
            onCorrectLayer = true;
          }
        });
        if (!onCorrectLayer) {
          // Remove particle view from its current layer.
          let particleView = null;
          for (let layerIndex = 0; layerIndex < nucleonLayers.length && particleView === null; layerIndex++) {
            for (let childIndex = 0; childIndex < nucleonLayers[layerIndex].children.length; childIndex++) {
              if (nucleonLayers[layerIndex].children[childIndex].particle === nucleon) {
                particleView = nucleonLayers[layerIndex].children[childIndex];
                nucleonLayers[layerIndex].removeChildAt(childIndex);
                break;
              }
            }
          }

          // Add the particle view to its new layer.
          assert && assert(particleView !== null, 'Particle view not found during relayering');
          nucleonLayers[zLayer].addChild(particleView);
        }
      });
    });

    // Add the electron particle views.
    model.electrons.forEach(electron => {
      const particleView = new ParticleView(electron, modelViewTransform, {
        highContrastProperty: options.highContrastProperty,
        tandem: electronGroupTandem.createNextTandem()
      });
      electronLayer.addChild(particleView);
      particleViews.push(particleView);
    });

    // When the electrons are represented as a cloud, the individual particles become invisible when added to the atom.
    const updateElectronVisibility = () => {
      electronLayer.getChildren().forEach(electronNode => {
        electronNode.visible = model.electronShellDepictionProperty.get() === 'orbits' || !model.particleAtom.electrons.includes(electronNode.particle);
      });
    };
    model.particleAtom.electrons.lengthProperty.link(updateElectronVisibility);
    model.electronShellDepictionProperty.link(updateElectronVisibility);

    // Add the front portion of the buckets. This is done separately from the bucket holes for layering purposes.
    const bucketGroupTandem = options.tandem.createTandem('bucketFronts').createGroupTandem('bucketFront');
    const bucketFrontsAndDragHandlers = []; // keep track for disposal
    _.each(model.buckets, bucket => {
      const bucketFront = new BucketFront(bucket, modelViewTransform, {
        tandem: bucketGroupTandem.createNextTandem()
      });
      this.addChild(bucketFront);
      const bucketDragListener = new BucketDragListener(bucket, bucketFront, modelViewTransform, {
        tandem: options.tandem && options.tandem.createTandem(`${bucket.sphereBucketTandem.name}DragListener`)
      });
      bucketFront.addInputListener(bucketDragListener);

      // add to separate list for later disposal
      bucketFrontsAndDragHandlers.push(bucketFront);
      bucketFrontsAndDragHandlers.push(bucketDragListener);
    });

    // @private
    this.disposeInteractiveSchematicAtom = () => {
      particleViews.forEach(particleView => particleView.dispose());
      bucketFrontsAndDragHandlers.forEach(bucketItem => bucketItem.dispose());
      atomNode.dispose();
      model.particleAtom.electrons.lengthProperty.unlink(updateElectronVisibility);
      model.electronShellDepictionProperty.unlink(updateElectronVisibility);
    };
    this.mutate(options);
  }

  /**
   * @public
   * @override
   */
  dispose() {
    this.disposeInteractiveSchematicAtom();
    super.dispose();
  }
}
shred.register('InteractiveSchematicAtom', InteractiveSchematicAtom);
export default InteractiveSchematicAtom;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtZXJnZSIsIkJ1Y2tldEZyb250IiwiQnVja2V0SG9sZSIsIk5vZGUiLCJUYW5kZW0iLCJzaHJlZCIsIkF0b21Ob2RlIiwiQnVja2V0RHJhZ0xpc3RlbmVyIiwiUGFydGljbGVWaWV3IiwiTlVNX05VQ0xFT05fTEFZRVJTIiwiSW50ZXJhY3RpdmVTY2hlbWF0aWNBdG9tIiwiY29uc3RydWN0b3IiLCJtb2RlbCIsIm1vZGVsVmlld1RyYW5zZm9ybSIsIm9wdGlvbnMiLCJoaWdoQ29udHJhc3RQcm9wZXJ0eSIsInRhbmRlbSIsIlJFUVVJUkVEIiwicGFydGljbGVWaWV3cyIsImF0b21Ob2RlIiwicGFydGljbGVBdG9tIiwic2hvd0VsZW1lbnROYW1lUHJvcGVydHkiLCJzaG93TmV1dHJhbE9ySW9uUHJvcGVydHkiLCJzaG93U3RhYmxlT3JVbnN0YWJsZVByb3BlcnR5IiwiZWxlY3Ryb25TaGVsbERlcGljdGlvblByb3BlcnR5IiwiY3JlYXRlVGFuZGVtIiwiYWRkQ2hpbGQiLCJfIiwiZWFjaCIsImJ1Y2tldHMiLCJidWNrZXQiLCJudWNsZW9uTGF5ZXJzIiwidGltZXMiLCJudWNsZW9uTGF5ZXIiLCJwdXNoIiwicmV2ZXJzZSIsImVsZWN0cm9uTGF5ZXIiLCJsYXllclNwbGl0IiwibnVjbGVvbkdyb3VwVGFuZGVtIiwiY3JlYXRlR3JvdXBUYW5kZW0iLCJlbGVjdHJvbkdyb3VwVGFuZGVtIiwibnVjbGVvbnMiLCJmb3JFYWNoIiwibnVjbGVvbiIsInBhcnRpY2xlVmlldyIsImNyZWF0ZU5leHRUYW5kZW0iLCJ6TGF5ZXJQcm9wZXJ0eSIsImdldCIsImxpbmsiLCJ6TGF5ZXIiLCJhc3NlcnQiLCJsZW5ndGgiLCJvbkNvcnJlY3RMYXllciIsImNoaWxkcmVuIiwicGFydGljbGUiLCJsYXllckluZGV4IiwiY2hpbGRJbmRleCIsInJlbW92ZUNoaWxkQXQiLCJlbGVjdHJvbnMiLCJlbGVjdHJvbiIsInVwZGF0ZUVsZWN0cm9uVmlzaWJpbGl0eSIsImdldENoaWxkcmVuIiwiZWxlY3Ryb25Ob2RlIiwidmlzaWJsZSIsImluY2x1ZGVzIiwibGVuZ3RoUHJvcGVydHkiLCJidWNrZXRHcm91cFRhbmRlbSIsImJ1Y2tldEZyb250c0FuZERyYWdIYW5kbGVycyIsImJ1Y2tldEZyb250IiwiYnVja2V0RHJhZ0xpc3RlbmVyIiwic3BoZXJlQnVja2V0VGFuZGVtIiwibmFtZSIsImFkZElucHV0TGlzdGVuZXIiLCJkaXNwb3NlSW50ZXJhY3RpdmVTY2hlbWF0aWNBdG9tIiwiZGlzcG9zZSIsImJ1Y2tldEl0ZW0iLCJ1bmxpbmsiLCJtdXRhdGUiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkludGVyYWN0aXZlU2NoZW1hdGljQXRvbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNC0yMDIxLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBOb2RlIHRoYXQgZGVwaWN0cyBhbiBpbnRlcmFjdGl2ZSBhdG9tIHdoZXJlIHRoZSB1c2VyIGNhbiBhZGQgc3ViYXRvbWljIHBhcnRpY2xlcyBmcm9tIGEgc2V0IG9mIGJ1Y2tldHMuXHJcbiAqL1xyXG5cclxuaW1wb3J0IG1lcmdlIGZyb20gJy4uLy4uLy4uL3BoZXQtY29yZS9qcy9tZXJnZS5qcyc7XHJcbmltcG9ydCBCdWNrZXRGcm9udCBmcm9tICcuLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvYnVja2V0L0J1Y2tldEZyb250LmpzJztcclxuaW1wb3J0IEJ1Y2tldEhvbGUgZnJvbSAnLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL2J1Y2tldC9CdWNrZXRIb2xlLmpzJztcclxuaW1wb3J0IHsgTm9kZSB9IGZyb20gJy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBUYW5kZW0gZnJvbSAnLi4vLi4vLi4vdGFuZGVtL2pzL1RhbmRlbS5qcyc7XHJcbmltcG9ydCBzaHJlZCBmcm9tICcuLi9zaHJlZC5qcyc7XHJcbmltcG9ydCBBdG9tTm9kZSBmcm9tICcuL0F0b21Ob2RlLmpzJztcclxuaW1wb3J0IEJ1Y2tldERyYWdMaXN0ZW5lciBmcm9tICcuL0J1Y2tldERyYWdMaXN0ZW5lci5qcyc7XHJcbmltcG9ydCBQYXJ0aWNsZVZpZXcgZnJvbSAnLi9QYXJ0aWNsZVZpZXcuanMnO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IE5VTV9OVUNMRU9OX0xBWUVSUyA9IDU7IC8vIFRoaXMgaXMgYmFzZWQgb24gbWF4IG51bWJlciBvZiBwYXJ0aWNsZXMsIG1heSBuZWVkIGFkanVzdG1lbnQgaWYgdGhhdCBjaGFuZ2VzLlxyXG5cclxuY2xhc3MgSW50ZXJhY3RpdmVTY2hlbWF0aWNBdG9tIGV4dGVuZHMgTm9kZSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7QnVpbGRBbkF0b21Nb2RlbH0gbW9kZWxcclxuICAgKiBAcGFyYW0ge01vZGVsVmlld1RyYW5zZm9ybTJ9IG1vZGVsVmlld1RyYW5zZm9ybVxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cclxuICAgKi9cclxuICBjb25zdHJ1Y3RvciggbW9kZWwsIG1vZGVsVmlld1RyYW5zZm9ybSwgb3B0aW9ucyApIHtcclxuICAgIG9wdGlvbnMgPSBtZXJnZSgge1xyXG5cclxuICAgICAgLy8ge1Byb3BlcnR5Ljxib29sZWFuPnxudWxsfSAtIHByb3BlcnR5IHRoYXQgY2FuIGJlIHVzZWQgdG8gdHVybiBvbiBoaWdoLWNvbnRyYXN0IHBhcnRpY2xlc1xyXG4gICAgICBoaWdoQ29udHJhc3RQcm9wZXJ0eTogbnVsbCxcclxuXHJcbiAgICAgIHRhbmRlbTogVGFuZGVtLlJFUVVJUkVEXHJcbiAgICB9LCBvcHRpb25zICk7XHJcblxyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICBjb25zdCBwYXJ0aWNsZVZpZXdzID0gW107IC8vIHJlbWVtYmVyIGFsbCB0aGUgcGFydGljbGVWaWV3cyB3aGVuIHVzaW5nIGluIGRpc3Bvc2VcclxuXHJcbiAgICAvLyBBZGQgdGhlIG5vZGUgdGhhdCBkZXBpY3RzIHRoZSB0ZXh0dWFsIGxhYmVscywgdGhlIGVsZWN0cm9uIHNoZWxscywgYW5kIHRoZSBjZW50ZXIgWCBtYXJrZXIuXHJcbiAgICBjb25zdCBhdG9tTm9kZSA9IG5ldyBBdG9tTm9kZSggbW9kZWwucGFydGljbGVBdG9tLCBtb2RlbFZpZXdUcmFuc2Zvcm0sIHtcclxuICAgICAgc2hvd0VsZW1lbnROYW1lUHJvcGVydHk6IG1vZGVsLnNob3dFbGVtZW50TmFtZVByb3BlcnR5LFxyXG4gICAgICBzaG93TmV1dHJhbE9ySW9uUHJvcGVydHk6IG1vZGVsLnNob3dOZXV0cmFsT3JJb25Qcm9wZXJ0eSxcclxuICAgICAgc2hvd1N0YWJsZU9yVW5zdGFibGVQcm9wZXJ0eTogbW9kZWwuc2hvd1N0YWJsZU9yVW5zdGFibGVQcm9wZXJ0eSxcclxuICAgICAgZWxlY3Ryb25TaGVsbERlcGljdGlvblByb3BlcnR5OiBtb2RlbC5lbGVjdHJvblNoZWxsRGVwaWN0aW9uUHJvcGVydHksXHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnYXRvbU5vZGUnIClcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIGF0b21Ob2RlICk7XHJcblxyXG4gICAgLy8gQWRkIHRoZSBidWNrZXQgaG9sZXMuICBEb25lIHNlcGFyYXRlbHkgZnJvbSB0aGUgYnVja2V0IGZyb250IGZvciBsYXllcmluZy5cclxuICAgIF8uZWFjaCggbW9kZWwuYnVja2V0cywgYnVja2V0ID0+IHRoaXMuYWRkQ2hpbGQoIG5ldyBCdWNrZXRIb2xlKCBidWNrZXQsIG1vZGVsVmlld1RyYW5zZm9ybSApICkgKTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIGxheWVycyB3aGVyZSB0aGUgbnVjbGVvbnMgd2lsbCBiZSBtYWludGFpbmVkLlxyXG4gICAgY29uc3QgbnVjbGVvbkxheWVycyA9IFtdO1xyXG4gICAgXy50aW1lcyggTlVNX05VQ0xFT05fTEFZRVJTLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG51Y2xlb25MYXllciA9IG5ldyBOb2RlKCk7XHJcbiAgICAgIG51Y2xlb25MYXllcnMucHVzaCggbnVjbGVvbkxheWVyICk7XHJcbiAgICAgIHRoaXMuYWRkQ2hpbGQoIG51Y2xlb25MYXllciApO1xyXG4gICAgfSApO1xyXG4gICAgbnVjbGVvbkxheWVycy5yZXZlcnNlKCk7IC8vIFNldCB1cCB0aGUgbnVjbGVvbiBsYXllcnMgc28gdGhhdCBsYXllciAwIGlzIGluIGZyb250LlxyXG5cclxuICAgIC8vIEFkZCB0aGUgbGF5ZXIgd2hlcmUgdGhlIGVsZWN0cm9ucyB3aWxsIGJlIG1haW50YWluZWQuXHJcbiAgICBjb25zdCBlbGVjdHJvbkxheWVyID0gbmV3IE5vZGUoIHsgbGF5ZXJTcGxpdDogdHJ1ZSB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBlbGVjdHJvbkxheWVyICk7XHJcblxyXG4gICAgLy8gQWRkIHRoZSBudWNsZW9uIHBhcnRpY2xlIHZpZXdzLlxyXG4gICAgY29uc3QgbnVjbGVvbkdyb3VwVGFuZGVtID0gb3B0aW9ucy50YW5kZW0gJiYgb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnbnVjbGVvbnMnICkuY3JlYXRlR3JvdXBUYW5kZW0oICdudWNsZW9uJyApO1xyXG4gICAgY29uc3QgZWxlY3Ryb25Hcm91cFRhbmRlbSA9IG9wdGlvbnMudGFuZGVtICYmIG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2VsZWN0cm9ucycgKS5jcmVhdGVHcm91cFRhbmRlbSggJ2VsZWN0cm9uJyApO1xyXG4gICAgbW9kZWwubnVjbGVvbnMuZm9yRWFjaCggbnVjbGVvbiA9PiB7XHJcbiAgICAgIGNvbnN0IHBhcnRpY2xlVmlldyA9IG5ldyBQYXJ0aWNsZVZpZXcoIG51Y2xlb24sIG1vZGVsVmlld1RyYW5zZm9ybSwge1xyXG4gICAgICAgIGhpZ2hDb250cmFzdFByb3BlcnR5OiBvcHRpb25zLmhpZ2hDb250cmFzdFByb3BlcnR5LFxyXG4gICAgICAgIHRhbmRlbTogbnVjbGVvbkdyb3VwVGFuZGVtICYmIG51Y2xlb25Hcm91cFRhbmRlbS5jcmVhdGVOZXh0VGFuZGVtKClcclxuICAgICAgfSApO1xyXG4gICAgICBudWNsZW9uTGF5ZXJzWyBudWNsZW9uLnpMYXllclByb3BlcnR5LmdldCgpIF0uYWRkQ2hpbGQoIHBhcnRpY2xlVmlldyApO1xyXG4gICAgICBwYXJ0aWNsZVZpZXdzLnB1c2goIHBhcnRpY2xlVmlldyApO1xyXG5cclxuICAgICAgLy8gQWRkIGEgbGlzdGVuZXIgdGhhdCBhZGp1c3RzIGEgbnVjbGVvbidzIHotb3JkZXIgbGF5ZXJpbmcuXHJcbiAgICAgIG51Y2xlb24uekxheWVyUHJvcGVydHkubGluayggekxheWVyID0+IHtcclxuICAgICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBudWNsZW9uTGF5ZXJzLmxlbmd0aCA+IHpMYXllcixcclxuICAgICAgICAgICd6TGF5ZXIgZm9yIG51Y2xlb24gZXhjZWVkcyBudW1iZXIgb2YgbGF5ZXJzLCBtYXggbnVtYmVyIG1heSBuZWVkIGluY3JlYXNpbmcuJyApO1xyXG5cclxuICAgICAgICAvLyBEZXRlcm1pbmUgd2hldGhlciBudWNsZW9uIHZpZXcgaXMgb24gdGhlIGNvcnJlY3QgbGF5ZXIuXHJcbiAgICAgICAgbGV0IG9uQ29ycmVjdExheWVyID0gZmFsc2U7XHJcbiAgICAgICAgbnVjbGVvbkxheWVyc1sgekxheWVyIF0uY2hpbGRyZW4uZm9yRWFjaCggcGFydGljbGVWaWV3ID0+IHtcclxuICAgICAgICAgIGlmICggcGFydGljbGVWaWV3LnBhcnRpY2xlID09PSBudWNsZW9uICkge1xyXG4gICAgICAgICAgICBvbkNvcnJlY3RMYXllciA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgICAgICBpZiAoICFvbkNvcnJlY3RMYXllciApIHtcclxuXHJcbiAgICAgICAgICAvLyBSZW1vdmUgcGFydGljbGUgdmlldyBmcm9tIGl0cyBjdXJyZW50IGxheWVyLlxyXG4gICAgICAgICAgbGV0IHBhcnRpY2xlVmlldyA9IG51bGw7XHJcbiAgICAgICAgICBmb3IgKCBsZXQgbGF5ZXJJbmRleCA9IDA7IGxheWVySW5kZXggPCBudWNsZW9uTGF5ZXJzLmxlbmd0aCAmJiBwYXJ0aWNsZVZpZXcgPT09IG51bGw7IGxheWVySW5kZXgrKyApIHtcclxuICAgICAgICAgICAgZm9yICggbGV0IGNoaWxkSW5kZXggPSAwOyBjaGlsZEluZGV4IDwgbnVjbGVvbkxheWVyc1sgbGF5ZXJJbmRleCBdLmNoaWxkcmVuLmxlbmd0aDsgY2hpbGRJbmRleCsrICkge1xyXG4gICAgICAgICAgICAgIGlmICggbnVjbGVvbkxheWVyc1sgbGF5ZXJJbmRleCBdLmNoaWxkcmVuWyBjaGlsZEluZGV4IF0ucGFydGljbGUgPT09IG51Y2xlb24gKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJ0aWNsZVZpZXcgPSBudWNsZW9uTGF5ZXJzWyBsYXllckluZGV4IF0uY2hpbGRyZW5bIGNoaWxkSW5kZXggXTtcclxuICAgICAgICAgICAgICAgIG51Y2xlb25MYXllcnNbIGxheWVySW5kZXggXS5yZW1vdmVDaGlsZEF0KCBjaGlsZEluZGV4ICk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBBZGQgdGhlIHBhcnRpY2xlIHZpZXcgdG8gaXRzIG5ldyBsYXllci5cclxuICAgICAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHBhcnRpY2xlVmlldyAhPT0gbnVsbCwgJ1BhcnRpY2xlIHZpZXcgbm90IGZvdW5kIGR1cmluZyByZWxheWVyaW5nJyApO1xyXG4gICAgICAgICAgbnVjbGVvbkxheWVyc1sgekxheWVyIF0uYWRkQ2hpbGQoIHBhcnRpY2xlVmlldyApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSApO1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIEFkZCB0aGUgZWxlY3Ryb24gcGFydGljbGUgdmlld3MuXHJcbiAgICBtb2RlbC5lbGVjdHJvbnMuZm9yRWFjaCggZWxlY3Ryb24gPT4ge1xyXG4gICAgICBjb25zdCBwYXJ0aWNsZVZpZXcgPSBuZXcgUGFydGljbGVWaWV3KCBlbGVjdHJvbiwgbW9kZWxWaWV3VHJhbnNmb3JtLCB7XHJcbiAgICAgICAgaGlnaENvbnRyYXN0UHJvcGVydHk6IG9wdGlvbnMuaGlnaENvbnRyYXN0UHJvcGVydHksXHJcbiAgICAgICAgdGFuZGVtOiBlbGVjdHJvbkdyb3VwVGFuZGVtLmNyZWF0ZU5leHRUYW5kZW0oKVxyXG4gICAgICB9ICk7XHJcbiAgICAgIGVsZWN0cm9uTGF5ZXIuYWRkQ2hpbGQoIHBhcnRpY2xlVmlldyApO1xyXG4gICAgICBwYXJ0aWNsZVZpZXdzLnB1c2goIHBhcnRpY2xlVmlldyApO1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIFdoZW4gdGhlIGVsZWN0cm9ucyBhcmUgcmVwcmVzZW50ZWQgYXMgYSBjbG91ZCwgdGhlIGluZGl2aWR1YWwgcGFydGljbGVzIGJlY29tZSBpbnZpc2libGUgd2hlbiBhZGRlZCB0byB0aGUgYXRvbS5cclxuICAgIGNvbnN0IHVwZGF0ZUVsZWN0cm9uVmlzaWJpbGl0eSA9ICgpID0+IHtcclxuICAgICAgZWxlY3Ryb25MYXllci5nZXRDaGlsZHJlbigpLmZvckVhY2goIGVsZWN0cm9uTm9kZSA9PiB7XHJcbiAgICAgICAgZWxlY3Ryb25Ob2RlLnZpc2libGUgPSBtb2RlbC5lbGVjdHJvblNoZWxsRGVwaWN0aW9uUHJvcGVydHkuZ2V0KCkgPT09ICdvcmJpdHMnIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhbW9kZWwucGFydGljbGVBdG9tLmVsZWN0cm9ucy5pbmNsdWRlcyggZWxlY3Ryb25Ob2RlLnBhcnRpY2xlICk7XHJcbiAgICAgIH0gKTtcclxuICAgIH07XHJcbiAgICBtb2RlbC5wYXJ0aWNsZUF0b20uZWxlY3Ryb25zLmxlbmd0aFByb3BlcnR5LmxpbmsoIHVwZGF0ZUVsZWN0cm9uVmlzaWJpbGl0eSApO1xyXG4gICAgbW9kZWwuZWxlY3Ryb25TaGVsbERlcGljdGlvblByb3BlcnR5LmxpbmsoIHVwZGF0ZUVsZWN0cm9uVmlzaWJpbGl0eSApO1xyXG5cclxuICAgIC8vIEFkZCB0aGUgZnJvbnQgcG9ydGlvbiBvZiB0aGUgYnVja2V0cy4gVGhpcyBpcyBkb25lIHNlcGFyYXRlbHkgZnJvbSB0aGUgYnVja2V0IGhvbGVzIGZvciBsYXllcmluZyBwdXJwb3Nlcy5cclxuICAgIGNvbnN0IGJ1Y2tldEdyb3VwVGFuZGVtID0gb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnYnVja2V0RnJvbnRzJyApLmNyZWF0ZUdyb3VwVGFuZGVtKCAnYnVja2V0RnJvbnQnICk7XHJcbiAgICBjb25zdCBidWNrZXRGcm9udHNBbmREcmFnSGFuZGxlcnMgPSBbXTsgLy8ga2VlcCB0cmFjayBmb3IgZGlzcG9zYWxcclxuICAgIF8uZWFjaCggbW9kZWwuYnVja2V0cywgYnVja2V0ID0+IHtcclxuICAgICAgY29uc3QgYnVja2V0RnJvbnQgPSBuZXcgQnVja2V0RnJvbnQoIGJ1Y2tldCwgbW9kZWxWaWV3VHJhbnNmb3JtLCB7IHRhbmRlbTogYnVja2V0R3JvdXBUYW5kZW0uY3JlYXRlTmV4dFRhbmRlbSgpIH0gKTtcclxuICAgICAgdGhpcy5hZGRDaGlsZCggYnVja2V0RnJvbnQgKTtcclxuICAgICAgY29uc3QgYnVja2V0RHJhZ0xpc3RlbmVyID0gbmV3IEJ1Y2tldERyYWdMaXN0ZW5lciggYnVja2V0LCBidWNrZXRGcm9udCwgbW9kZWxWaWV3VHJhbnNmb3JtLCB7XHJcbiAgICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbSAmJiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oIGAke2J1Y2tldC5zcGhlcmVCdWNrZXRUYW5kZW0ubmFtZX1EcmFnTGlzdGVuZXJgIClcclxuICAgICAgfSApO1xyXG4gICAgICBidWNrZXRGcm9udC5hZGRJbnB1dExpc3RlbmVyKCBidWNrZXREcmFnTGlzdGVuZXIgKTtcclxuXHJcbiAgICAgIC8vIGFkZCB0byBzZXBhcmF0ZSBsaXN0IGZvciBsYXRlciBkaXNwb3NhbFxyXG4gICAgICBidWNrZXRGcm9udHNBbmREcmFnSGFuZGxlcnMucHVzaCggYnVja2V0RnJvbnQgKTtcclxuICAgICAgYnVja2V0RnJvbnRzQW5kRHJhZ0hhbmRsZXJzLnB1c2goIGJ1Y2tldERyYWdMaXN0ZW5lciApO1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIEBwcml2YXRlXHJcbiAgICB0aGlzLmRpc3Bvc2VJbnRlcmFjdGl2ZVNjaGVtYXRpY0F0b20gPSAoKSA9PiB7XHJcbiAgICAgIHBhcnRpY2xlVmlld3MuZm9yRWFjaCggcGFydGljbGVWaWV3ID0+IHBhcnRpY2xlVmlldy5kaXNwb3NlKCkgKTtcclxuICAgICAgYnVja2V0RnJvbnRzQW5kRHJhZ0hhbmRsZXJzLmZvckVhY2goIGJ1Y2tldEl0ZW0gPT4gYnVja2V0SXRlbS5kaXNwb3NlKCkgKTtcclxuICAgICAgYXRvbU5vZGUuZGlzcG9zZSgpO1xyXG4gICAgICBtb2RlbC5wYXJ0aWNsZUF0b20uZWxlY3Ryb25zLmxlbmd0aFByb3BlcnR5LnVubGluayggdXBkYXRlRWxlY3Ryb25WaXNpYmlsaXR5ICk7XHJcbiAgICAgIG1vZGVsLmVsZWN0cm9uU2hlbGxEZXBpY3Rpb25Qcm9wZXJ0eS51bmxpbmsoIHVwZGF0ZUVsZWN0cm9uVmlzaWJpbGl0eSApO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLm11dGF0ZSggb3B0aW9ucyApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHB1YmxpY1xyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqL1xyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICB0aGlzLmRpc3Bvc2VJbnRlcmFjdGl2ZVNjaGVtYXRpY0F0b20oKTtcclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcbn1cclxuXHJcbnNocmVkLnJlZ2lzdGVyKCAnSW50ZXJhY3RpdmVTY2hlbWF0aWNBdG9tJywgSW50ZXJhY3RpdmVTY2hlbWF0aWNBdG9t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