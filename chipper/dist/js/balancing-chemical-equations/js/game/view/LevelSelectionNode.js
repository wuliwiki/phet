// Copyright 2014-2023, University of Colorado Boulder

/**
 * Controls for selecting a level and adjusting various game settings, such as whether the timer is enabled
 *
 * @author Vasily Shakhov (mlearner.com)
 */

import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import { combineOptions } from '../../../../phet-core/js/optionize.js';
import StringUtils from '../../../../phetcommon/js/util/StringUtils.js';
import ResetAllButton from '../../../../scenery-phet/js/buttons/ResetAllButton.js';
import TimerToggleButton from '../../../../scenery-phet/js/buttons/TimerToggleButton.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { AlignBox, AlignGroup, Node, Text, VBox } from '../../../../scenery/js/imports.js';
import LevelSelectionButtonGroup from '../../../../vegas/js/LevelSelectionButtonGroup.js';
import ScoreDisplayStars from '../../../../vegas/js/ScoreDisplayStars.js';
import balancingChemicalEquations from '../../balancingChemicalEquations.js';
import BalancingChemicalEquationsStrings from '../../BalancingChemicalEquationsStrings.js';
import BCEConstants from '../../common/BCEConstants.js';
import Molecule from '../../common/model/Molecule.js';
// Molecules that appear on level-selection buttons, ordered by level number
const levelMolecules = [Molecule.HCl, Molecule.H2O, Molecule.NH3];

// constants
const BUTTON_MARGIN = 20;
export default class LevelSelectionNode extends Node {
  constructor(model, viewProperties, layoutBounds, startGame, tandem) {
    // To give all molecules the same effective size
    const moleculeAlignGroup = new AlignGroup();
    const buttonItems = [];
    for (let level = model.levelsRange.min; level <= model.levelsRange.max; level++) {
      buttonItems.push({
        icon: createLevelSelectionButtonIcon(level, moleculeAlignGroup),
        scoreProperty: model.bestScoreProperties[level],
        options: {
          bestTimeProperty: model.bestTimeProperties[level],
          createScoreDisplay: scoreProperty => new ScoreDisplayStars(scoreProperty, {
            numberOfStars: model.getNumberOfEquations(level),
            perfectScore: model.getPerfectScore(level)
          }),
          listener: () => startGame(level),
          soundPlayerIndex: level
        }
      });
    }
    const buttonGroup = new LevelSelectionButtonGroup(buttonItems, {
      levelSelectionButtonOptions: {
        baseColor: '#d9ebff',
        buttonWidth: 155,
        buttonHeight: 155,
        bestTimeVisibleProperty: viewProperties.timerEnabledProperty
      },
      flowBoxOptions: {
        spacing: 50,
        center: layoutBounds.center
      },
      tandem: tandem.createTandem('buttonGroup')
    });

    // title
    const titleText = new Text(BalancingChemicalEquationsStrings.chooseYourLevelStringProperty, {
      font: new PhetFont(36),
      centerX: layoutBounds.centerX,
      centerY: buttonGroup.top / 2,
      maxWidth: 0.85 * layoutBounds.width // constrain width for i18n
    });

    // timer control, lower left
    const timerToggleButton = new TimerToggleButton(viewProperties.timerEnabledProperty, {
      stroke: 'black',
      cornerRadius: 10,
      x: BUTTON_MARGIN,
      bottom: layoutBounds.bottom - BUTTON_MARGIN
    });

    // Reset All button, lower right
    const resetButton = new ResetAllButton({
      listener: () => {
        model.reset();
        viewProperties.reset();
      },
      right: layoutBounds.right - BUTTON_MARGIN,
      bottom: layoutBounds.bottom - BUTTON_MARGIN
    });
    super({
      children: [buttonGroup, titleText, timerToggleButton, resetButton],
      tandem: tandem
    });
  }

  // No dispose needed, instances of this type persist for lifetime of the sim.
}

/**
 * Creates the icon for a level-selection button.
 * @param level
 * @param moleculeAlignGroup - to give all molecules the same effective size
 */
function createLevelSelectionButtonIcon(level, moleculeAlignGroup) {
  const labelStringProperty = new DerivedProperty([BalancingChemicalEquationsStrings.pattern_0levelStringProperty], pattern => StringUtils.format(pattern, level + 1));
  const labelText = new Text(labelStringProperty, {
    font: new PhetFont({
      size: 14,
      weight: 'bold'
    }),
    maxWidth: 100
  });
  const moleculeNode = levelMolecules[level].createNode(combineOptions({
    scale: 2
  }, BCEConstants.ATOM_NODE_OPTIONS));
  const alignBox = new AlignBox(moleculeNode, {
    group: moleculeAlignGroup
  });

  // 'Level N' centered above molecule
  return new VBox({
    spacing: 10,
    children: [labelText, alignBox]
  });
}
balancingChemicalEquations.register('LevelSelectionNode', LevelSelectionNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJjb21iaW5lT3B0aW9ucyIsIlN0cmluZ1V0aWxzIiwiUmVzZXRBbGxCdXR0b24iLCJUaW1lclRvZ2dsZUJ1dHRvbiIsIlBoZXRGb250IiwiQWxpZ25Cb3giLCJBbGlnbkdyb3VwIiwiTm9kZSIsIlRleHQiLCJWQm94IiwiTGV2ZWxTZWxlY3Rpb25CdXR0b25Hcm91cCIsIlNjb3JlRGlzcGxheVN0YXJzIiwiYmFsYW5jaW5nQ2hlbWljYWxFcXVhdGlvbnMiLCJCYWxhbmNpbmdDaGVtaWNhbEVxdWF0aW9uc1N0cmluZ3MiLCJCQ0VDb25zdGFudHMiLCJNb2xlY3VsZSIsImxldmVsTW9sZWN1bGVzIiwiSENsIiwiSDJPIiwiTkgzIiwiQlVUVE9OX01BUkdJTiIsIkxldmVsU2VsZWN0aW9uTm9kZSIsImNvbnN0cnVjdG9yIiwibW9kZWwiLCJ2aWV3UHJvcGVydGllcyIsImxheW91dEJvdW5kcyIsInN0YXJ0R2FtZSIsInRhbmRlbSIsIm1vbGVjdWxlQWxpZ25Hcm91cCIsImJ1dHRvbkl0ZW1zIiwibGV2ZWwiLCJsZXZlbHNSYW5nZSIsIm1pbiIsIm1heCIsInB1c2giLCJpY29uIiwiY3JlYXRlTGV2ZWxTZWxlY3Rpb25CdXR0b25JY29uIiwic2NvcmVQcm9wZXJ0eSIsImJlc3RTY29yZVByb3BlcnRpZXMiLCJvcHRpb25zIiwiYmVzdFRpbWVQcm9wZXJ0eSIsImJlc3RUaW1lUHJvcGVydGllcyIsImNyZWF0ZVNjb3JlRGlzcGxheSIsIm51bWJlck9mU3RhcnMiLCJnZXROdW1iZXJPZkVxdWF0aW9ucyIsInBlcmZlY3RTY29yZSIsImdldFBlcmZlY3RTY29yZSIsImxpc3RlbmVyIiwic291bmRQbGF5ZXJJbmRleCIsImJ1dHRvbkdyb3VwIiwibGV2ZWxTZWxlY3Rpb25CdXR0b25PcHRpb25zIiwiYmFzZUNvbG9yIiwiYnV0dG9uV2lkdGgiLCJidXR0b25IZWlnaHQiLCJiZXN0VGltZVZpc2libGVQcm9wZXJ0eSIsInRpbWVyRW5hYmxlZFByb3BlcnR5IiwiZmxvd0JveE9wdGlvbnMiLCJzcGFjaW5nIiwiY2VudGVyIiwiY3JlYXRlVGFuZGVtIiwidGl0bGVUZXh0IiwiY2hvb3NlWW91ckxldmVsU3RyaW5nUHJvcGVydHkiLCJmb250IiwiY2VudGVyWCIsImNlbnRlclkiLCJ0b3AiLCJtYXhXaWR0aCIsIndpZHRoIiwidGltZXJUb2dnbGVCdXR0b24iLCJzdHJva2UiLCJjb3JuZXJSYWRpdXMiLCJ4IiwiYm90dG9tIiwicmVzZXRCdXR0b24iLCJyZXNldCIsInJpZ2h0IiwiY2hpbGRyZW4iLCJsYWJlbFN0cmluZ1Byb3BlcnR5IiwicGF0dGVybl8wbGV2ZWxTdHJpbmdQcm9wZXJ0eSIsInBhdHRlcm4iLCJmb3JtYXQiLCJsYWJlbFRleHQiLCJzaXplIiwid2VpZ2h0IiwibW9sZWN1bGVOb2RlIiwiY3JlYXRlTm9kZSIsInNjYWxlIiwiQVRPTV9OT0RFX09QVElPTlMiLCJhbGlnbkJveCIsImdyb3VwIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJMZXZlbFNlbGVjdGlvbk5vZGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTQtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogQ29udHJvbHMgZm9yIHNlbGVjdGluZyBhIGxldmVsIGFuZCBhZGp1c3RpbmcgdmFyaW91cyBnYW1lIHNldHRpbmdzLCBzdWNoIGFzIHdoZXRoZXIgdGhlIHRpbWVyIGlzIGVuYWJsZWRcclxuICpcclxuICogQGF1dGhvciBWYXNpbHkgU2hha2hvdiAobWxlYXJuZXIuY29tKVxyXG4gKi9cclxuXHJcbmltcG9ydCBEZXJpdmVkUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9EZXJpdmVkUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgQm91bmRzMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvQm91bmRzMi5qcyc7XHJcbmltcG9ydCB7IEF0b21Ob2RlT3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL25pdHJvZ2x5Y2VyaW4vanMvbm9kZXMvQXRvbU5vZGUuanMnO1xyXG5pbXBvcnQgeyBjb21iaW5lT3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgU3RyaW5nVXRpbHMgZnJvbSAnLi4vLi4vLi4vLi4vcGhldGNvbW1vbi9qcy91dGlsL1N0cmluZ1V0aWxzLmpzJztcclxuaW1wb3J0IFJlc2V0QWxsQnV0dG9uIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9idXR0b25zL1Jlc2V0QWxsQnV0dG9uLmpzJztcclxuaW1wb3J0IFRpbWVyVG9nZ2xlQnV0dG9uIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9idXR0b25zL1RpbWVyVG9nZ2xlQnV0dG9uLmpzJztcclxuaW1wb3J0IFBoZXRGb250IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9QaGV0Rm9udC5qcyc7XHJcbmltcG9ydCB7IEFsaWduQm94LCBBbGlnbkdyb3VwLCBOb2RlLCBUZXh0LCBWQm94IH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IFRhbmRlbSBmcm9tICcuLi8uLi8uLi8uLi90YW5kZW0vanMvVGFuZGVtLmpzJztcclxuaW1wb3J0IExldmVsU2VsZWN0aW9uQnV0dG9uR3JvdXAsIHsgTGV2ZWxTZWxlY3Rpb25CdXR0b25Hcm91cEl0ZW0gfSBmcm9tICcuLi8uLi8uLi8uLi92ZWdhcy9qcy9MZXZlbFNlbGVjdGlvbkJ1dHRvbkdyb3VwLmpzJztcclxuaW1wb3J0IFNjb3JlRGlzcGxheVN0YXJzIGZyb20gJy4uLy4uLy4uLy4uL3ZlZ2FzL2pzL1Njb3JlRGlzcGxheVN0YXJzLmpzJztcclxuaW1wb3J0IGJhbGFuY2luZ0NoZW1pY2FsRXF1YXRpb25zIGZyb20gJy4uLy4uL2JhbGFuY2luZ0NoZW1pY2FsRXF1YXRpb25zLmpzJztcclxuaW1wb3J0IEJhbGFuY2luZ0NoZW1pY2FsRXF1YXRpb25zU3RyaW5ncyBmcm9tICcuLi8uLi9CYWxhbmNpbmdDaGVtaWNhbEVxdWF0aW9uc1N0cmluZ3MuanMnO1xyXG5pbXBvcnQgQkNFQ29uc3RhbnRzIGZyb20gJy4uLy4uL2NvbW1vbi9CQ0VDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgTW9sZWN1bGUgZnJvbSAnLi4vLi4vY29tbW9uL21vZGVsL01vbGVjdWxlLmpzJztcclxuaW1wb3J0IEdhbWVNb2RlbCBmcm9tICcuLi9tb2RlbC9HYW1lTW9kZWwuanMnO1xyXG5pbXBvcnQgR2FtZVZpZXdQcm9wZXJ0aWVzIGZyb20gJy4vR2FtZVZpZXdQcm9wZXJ0aWVzLmpzJztcclxuXHJcbi8vIE1vbGVjdWxlcyB0aGF0IGFwcGVhciBvbiBsZXZlbC1zZWxlY3Rpb24gYnV0dG9ucywgb3JkZXJlZCBieSBsZXZlbCBudW1iZXJcclxuY29uc3QgbGV2ZWxNb2xlY3VsZXMgPSBbIE1vbGVjdWxlLkhDbCwgTW9sZWN1bGUuSDJPLCBNb2xlY3VsZS5OSDMgXTtcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBCVVRUT05fTUFSR0lOID0gMjA7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMZXZlbFNlbGVjdGlvbk5vZGUgZXh0ZW5kcyBOb2RlIHtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBtb2RlbDogR2FtZU1vZGVsLCB2aWV3UHJvcGVydGllczogR2FtZVZpZXdQcm9wZXJ0aWVzLCBsYXlvdXRCb3VuZHM6IEJvdW5kczIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBzdGFydEdhbWU6ICggbGV2ZWw6IG51bWJlciApID0+IHZvaWQsIHRhbmRlbTogVGFuZGVtICkge1xyXG5cclxuICAgIC8vIFRvIGdpdmUgYWxsIG1vbGVjdWxlcyB0aGUgc2FtZSBlZmZlY3RpdmUgc2l6ZVxyXG4gICAgY29uc3QgbW9sZWN1bGVBbGlnbkdyb3VwID0gbmV3IEFsaWduR3JvdXAoKTtcclxuXHJcbiAgICBjb25zdCBidXR0b25JdGVtczogTGV2ZWxTZWxlY3Rpb25CdXR0b25Hcm91cEl0ZW1bXSA9IFtdO1xyXG4gICAgZm9yICggbGV0IGxldmVsID0gbW9kZWwubGV2ZWxzUmFuZ2UubWluOyBsZXZlbCA8PSBtb2RlbC5sZXZlbHNSYW5nZS5tYXg7IGxldmVsKysgKSB7XHJcbiAgICAgIGJ1dHRvbkl0ZW1zLnB1c2goIHtcclxuICAgICAgICBpY29uOiBjcmVhdGVMZXZlbFNlbGVjdGlvbkJ1dHRvbkljb24oIGxldmVsLCBtb2xlY3VsZUFsaWduR3JvdXAgKSxcclxuICAgICAgICBzY29yZVByb3BlcnR5OiBtb2RlbC5iZXN0U2NvcmVQcm9wZXJ0aWVzWyBsZXZlbCBdLFxyXG4gICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgIGJlc3RUaW1lUHJvcGVydHk6IG1vZGVsLmJlc3RUaW1lUHJvcGVydGllc1sgbGV2ZWwgXSxcclxuICAgICAgICAgIGNyZWF0ZVNjb3JlRGlzcGxheTogc2NvcmVQcm9wZXJ0eSA9PiBuZXcgU2NvcmVEaXNwbGF5U3RhcnMoIHNjb3JlUHJvcGVydHksIHtcclxuICAgICAgICAgICAgbnVtYmVyT2ZTdGFyczogbW9kZWwuZ2V0TnVtYmVyT2ZFcXVhdGlvbnMoIGxldmVsICksXHJcbiAgICAgICAgICAgIHBlcmZlY3RTY29yZTogbW9kZWwuZ2V0UGVyZmVjdFNjb3JlKCBsZXZlbCApXHJcbiAgICAgICAgICB9ICksXHJcbiAgICAgICAgICBsaXN0ZW5lcjogKCkgPT4gc3RhcnRHYW1lKCBsZXZlbCApLFxyXG4gICAgICAgICAgc291bmRQbGF5ZXJJbmRleDogbGV2ZWxcclxuICAgICAgICB9XHJcbiAgICAgIH0gKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBidXR0b25Hcm91cCA9IG5ldyBMZXZlbFNlbGVjdGlvbkJ1dHRvbkdyb3VwKCBidXR0b25JdGVtcywge1xyXG4gICAgICBsZXZlbFNlbGVjdGlvbkJ1dHRvbk9wdGlvbnM6IHtcclxuICAgICAgICBiYXNlQ29sb3I6ICcjZDllYmZmJyxcclxuICAgICAgICBidXR0b25XaWR0aDogMTU1LFxyXG4gICAgICAgIGJ1dHRvbkhlaWdodDogMTU1LFxyXG4gICAgICAgIGJlc3RUaW1lVmlzaWJsZVByb3BlcnR5OiB2aWV3UHJvcGVydGllcy50aW1lckVuYWJsZWRQcm9wZXJ0eVxyXG4gICAgICB9LFxyXG4gICAgICBmbG93Qm94T3B0aW9uczoge1xyXG4gICAgICAgIHNwYWNpbmc6IDUwLFxyXG4gICAgICAgIGNlbnRlcjogbGF5b3V0Qm91bmRzLmNlbnRlclxyXG4gICAgICB9LFxyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdidXR0b25Hcm91cCcgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIHRpdGxlXHJcbiAgICBjb25zdCB0aXRsZVRleHQgPSBuZXcgVGV4dCggQmFsYW5jaW5nQ2hlbWljYWxFcXVhdGlvbnNTdHJpbmdzLmNob29zZVlvdXJMZXZlbFN0cmluZ1Byb3BlcnR5LCB7XHJcbiAgICAgIGZvbnQ6IG5ldyBQaGV0Rm9udCggMzYgKSxcclxuICAgICAgY2VudGVyWDogbGF5b3V0Qm91bmRzLmNlbnRlclgsXHJcbiAgICAgIGNlbnRlclk6IGJ1dHRvbkdyb3VwLnRvcCAvIDIsXHJcbiAgICAgIG1heFdpZHRoOiAwLjg1ICogbGF5b3V0Qm91bmRzLndpZHRoIC8vIGNvbnN0cmFpbiB3aWR0aCBmb3IgaTE4blxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIHRpbWVyIGNvbnRyb2wsIGxvd2VyIGxlZnRcclxuICAgIGNvbnN0IHRpbWVyVG9nZ2xlQnV0dG9uID0gbmV3IFRpbWVyVG9nZ2xlQnV0dG9uKCB2aWV3UHJvcGVydGllcy50aW1lckVuYWJsZWRQcm9wZXJ0eSwge1xyXG4gICAgICBzdHJva2U6ICdibGFjaycsXHJcbiAgICAgIGNvcm5lclJhZGl1czogMTAsXHJcbiAgICAgIHg6IEJVVFRPTl9NQVJHSU4sXHJcbiAgICAgIGJvdHRvbTogbGF5b3V0Qm91bmRzLmJvdHRvbSAtIEJVVFRPTl9NQVJHSU5cclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBSZXNldCBBbGwgYnV0dG9uLCBsb3dlciByaWdodFxyXG4gICAgY29uc3QgcmVzZXRCdXR0b24gPSBuZXcgUmVzZXRBbGxCdXR0b24oIHtcclxuICAgICAgbGlzdGVuZXI6ICgpID0+IHtcclxuICAgICAgICBtb2RlbC5yZXNldCgpO1xyXG4gICAgICAgIHZpZXdQcm9wZXJ0aWVzLnJlc2V0KCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHJpZ2h0OiBsYXlvdXRCb3VuZHMucmlnaHQgLSBCVVRUT05fTUFSR0lOLFxyXG4gICAgICBib3R0b206IGxheW91dEJvdW5kcy5ib3R0b20gLSBCVVRUT05fTUFSR0lOXHJcbiAgICB9ICk7XHJcblxyXG4gICAgc3VwZXIoIHtcclxuICAgICAgY2hpbGRyZW46IFsgYnV0dG9uR3JvdXAsIHRpdGxlVGV4dCwgdGltZXJUb2dnbGVCdXR0b24sIHJlc2V0QnV0dG9uIF0sXHJcbiAgICAgIHRhbmRlbTogdGFuZGVtXHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICAvLyBObyBkaXNwb3NlIG5lZWRlZCwgaW5zdGFuY2VzIG9mIHRoaXMgdHlwZSBwZXJzaXN0IGZvciBsaWZldGltZSBvZiB0aGUgc2ltLlxyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyB0aGUgaWNvbiBmb3IgYSBsZXZlbC1zZWxlY3Rpb24gYnV0dG9uLlxyXG4gKiBAcGFyYW0gbGV2ZWxcclxuICogQHBhcmFtIG1vbGVjdWxlQWxpZ25Hcm91cCAtIHRvIGdpdmUgYWxsIG1vbGVjdWxlcyB0aGUgc2FtZSBlZmZlY3RpdmUgc2l6ZVxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlTGV2ZWxTZWxlY3Rpb25CdXR0b25JY29uKCBsZXZlbDogbnVtYmVyLCBtb2xlY3VsZUFsaWduR3JvdXA6IEFsaWduR3JvdXAgKTogTm9kZSB7XHJcblxyXG4gIGNvbnN0IGxhYmVsU3RyaW5nUHJvcGVydHkgPSBuZXcgRGVyaXZlZFByb3BlcnR5KFxyXG4gICAgWyBCYWxhbmNpbmdDaGVtaWNhbEVxdWF0aW9uc1N0cmluZ3MucGF0dGVybl8wbGV2ZWxTdHJpbmdQcm9wZXJ0eSBdLFxyXG4gICAgcGF0dGVybiA9PiBTdHJpbmdVdGlscy5mb3JtYXQoIHBhdHRlcm4sIGxldmVsICsgMSApXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgbGFiZWxUZXh0ID0gbmV3IFRleHQoIGxhYmVsU3RyaW5nUHJvcGVydHksIHtcclxuICAgIGZvbnQ6IG5ldyBQaGV0Rm9udCggeyBzaXplOiAxNCwgd2VpZ2h0OiAnYm9sZCcgfSApLFxyXG4gICAgbWF4V2lkdGg6IDEwMFxyXG4gIH0gKTtcclxuXHJcbiAgY29uc3QgbW9sZWN1bGVOb2RlID0gbGV2ZWxNb2xlY3VsZXNbIGxldmVsIF0uY3JlYXRlTm9kZSggY29tYmluZU9wdGlvbnM8QXRvbU5vZGVPcHRpb25zPigge1xyXG4gICAgc2NhbGU6IDJcclxuICB9LCBCQ0VDb25zdGFudHMuQVRPTV9OT0RFX09QVElPTlMgKSApO1xyXG4gIGNvbnN0IGFsaWduQm94ID0gbmV3IEFsaWduQm94KCBtb2xlY3VsZU5vZGUsIHtcclxuICAgIGdyb3VwOiBtb2xlY3VsZUFsaWduR3JvdXBcclxuICB9ICk7XHJcblxyXG4gIC8vICdMZXZlbCBOJyBjZW50ZXJlZCBhYm92ZSBtb2xlY3VsZVxyXG4gIHJldHVybiBuZXcgVkJveCgge1xyXG4gICAgc3BhY2luZzogMTAsXHJcbiAgICBjaGlsZHJlbjogWyBsYWJlbFRleHQsIGFsaWduQm94IF1cclxuICB9ICk7XHJcbn1cclxuXHJcbmJhbGFuY2luZ0NoZW1pY2FsRXF1YXRpb25zLnJlZ2lzdGVyKCAnTGV2ZWxTZWxlY3Rpb25Ob2RlJywgTGV2ZWxTZWxlY3Rpb25Ob2RlICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGVBQWUsTUFBTSx3Q0FBd0M7QUFHcEUsU0FBU0MsY0FBYyxRQUFRLHVDQUF1QztBQUN0RSxPQUFPQyxXQUFXLE1BQU0sK0NBQStD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