// Copyright 2013-2023, University of Colorado Boulder

/**
 * Scenery node that represents an atomic symbol, meaning that it shows the
 * symbol text, the proton count, atomic number, and charge.
 *
 * @author John Blanco
 */

import Vector2 from '../../../../dot/js/Vector2.js';
import MathSymbols from '../../../../scenery-phet/js/MathSymbols.js';
import PhetColorScheme from '../../../../scenery-phet/js/PhetColorScheme.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { Image, Node, Rectangle, Text } from '../../../../scenery/js/imports.js';
import AtomIdentifier from '../../../../shred/js/AtomIdentifier.js';
import ShredConstants from '../../../../shred/js/ShredConstants.js';
import scale_png from '../../../images/scale_png.js';
import buildAnAtom from '../../buildAnAtom.js';
import ChargeMeter from '../../common/view/ChargeMeter.js';

// constants
const SYMBOL_BOX_WIDTH = 275; // In screen coords, which are roughly pixels.
const SYMBOL_BOX_HEIGHT = 300; // In screen coords, which are roughly pixels.
const NUMBER_FONT = new PhetFont(56);
const NUMBER_INSET = 20; // In screen coords, which are roughly pixels.

class SymbolNode extends Node {
  /**
   * Constructor
   * @param {NumberAtom} numberAtom
   * @param {Tandem} tandem
   * @param {Object} [options]
   */
  constructor(numberAtom, tandem, options) {
    super({
      tandem: tandem,
      pickable: false
    });

    // Add the bounding box, which is also the root node for everything else
    // that comprises this node.
    const boundingBox = new Rectangle(0, 0, SYMBOL_BOX_WIDTH, SYMBOL_BOX_HEIGHT, 0, 0, {
      stroke: 'black',
      lineWidth: 2,
      fill: 'white',
      tandem: tandem.createTandem('boundingBox')
    });
    this.addChild(boundingBox);

    // Add the symbol text.
    const symbolText = new Text('', {
      font: new PhetFont(150),
      fill: 'black',
      center: new Vector2(SYMBOL_BOX_WIDTH / 2, SYMBOL_BOX_HEIGHT / 2),
      tandem: tandem.createTandem('symbolText')
    });

    // Add the listener to update the symbol text.
    const textCenter = new Vector2(SYMBOL_BOX_WIDTH / 2, SYMBOL_BOX_HEIGHT / 2);
    numberAtom.protonCountProperty.link(protonCount => {
      const symbol = AtomIdentifier.getSymbol(protonCount);
      symbolText.string = protonCount > 0 ? symbol : '';
      symbolText.center = textCenter;
    });
    boundingBox.addChild(symbolText);

    // Add the atomic number display.
    const atomicNumberDisplayText = new Text('0', {
      font: NUMBER_FONT,
      fill: PhetColorScheme.RED_COLORBLIND,
      tandem: tandem.createTandem('atomicNumberDisplayText')
    });

    // Add the listener to update the proton count.
    numberAtom.protonCountProperty.link(protonCount => {
      atomicNumberDisplayText.string = protonCount;
      atomicNumberDisplayText.left = NUMBER_INSET;
      atomicNumberDisplayText.bottom = SYMBOL_BOX_HEIGHT - NUMBER_INSET;
    });
    boundingBox.addChild(atomicNumberDisplayText);

    // Add the mass number display.
    const massNumberDisplayText = new Text('0', {
      font: NUMBER_FONT,
      fill: 'black',
      tandem: tandem.createTandem('massNumberDisplayText')
    });
    boundingBox.addChild(massNumberDisplayText);

    // Add the listener to update the mass number.
    numberAtom.massNumberProperty.link(massNumber => {
      massNumberDisplayText.string = massNumber.toString();
      massNumberDisplayText.left = NUMBER_INSET;
      massNumberDisplayText.top = NUMBER_INSET;
    });

    // Add the charge display.
    const chargeDisplayText = new Text('0', {
      font: NUMBER_FONT,
      fill: 'black',
      tandem: tandem.createTandem('chargeDisplayText')
    });
    boundingBox.addChild(chargeDisplayText);

    // Add the listener to update the charge.
    numberAtom.chargeProperty.link(charge => {
      const chargeChar = charge > 0 ? MathSymbols.PLUS : charge < 0 ? MathSymbols.MINUS : '';
      chargeDisplayText.string = `${Math.abs(charge).toString(10)}${chargeChar}`;
      chargeDisplayText.fill = ShredConstants.CHARGE_TEXT_COLOR(charge);
      chargeDisplayText.right = SYMBOL_BOX_WIDTH - NUMBER_INSET;
      chargeDisplayText.top = NUMBER_INSET;
    });

    // Add the scale image - just an image with no functionality.
    const scaleImage = new Image(scale_png, {
      tandem: tandem.createTandem('scaleImage')
    });
    scaleImage.scale(0.32); // Scale empirically determined to match design layout.
    this.addChild(scaleImage);

    // Add the charge meter.
    const chargeMeter = new ChargeMeter(numberAtom, tandem.createTandem('chargeMeter'), {
      showNumericalReadout: false
    });
    chargeMeter.scale(1.5);
    this.addChild(chargeMeter);

    // Do the layout.
    scaleImage.left = 0;
    scaleImage.centerY = massNumberDisplayText.centerY;
    boundingBox.top = 0;
    boundingBox.left = scaleImage.right + 10;
    chargeMeter.left = boundingBox.right + 10;
    chargeMeter.centerY = chargeDisplayText.centerY;
    this.mutate(options);
  }
}
buildAnAtom.register('SymbolNode', SymbolNode);
export default SymbolNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWZWN0b3IyIiwiTWF0aFN5bWJvbHMiLCJQaGV0Q29sb3JTY2hlbWUiLCJQaGV0Rm9udCIsIkltYWdlIiwiTm9kZSIsIlJlY3RhbmdsZSIsIlRleHQiLCJBdG9tSWRlbnRpZmllciIsIlNocmVkQ29uc3RhbnRzIiwic2NhbGVfcG5nIiwiYnVpbGRBbkF0b20iLCJDaGFyZ2VNZXRlciIsIlNZTUJPTF9CT1hfV0lEVEgiLCJTWU1CT0xfQk9YX0hFSUdIVCIsIk5VTUJFUl9GT05UIiwiTlVNQkVSX0lOU0VUIiwiU3ltYm9sTm9kZSIsImNvbnN0cnVjdG9yIiwibnVtYmVyQXRvbSIsInRhbmRlbSIsIm9wdGlvbnMiLCJwaWNrYWJsZSIsImJvdW5kaW5nQm94Iiwic3Ryb2tlIiwibGluZVdpZHRoIiwiZmlsbCIsImNyZWF0ZVRhbmRlbSIsImFkZENoaWxkIiwic3ltYm9sVGV4dCIsImZvbnQiLCJjZW50ZXIiLCJ0ZXh0Q2VudGVyIiwicHJvdG9uQ291bnRQcm9wZXJ0eSIsImxpbmsiLCJwcm90b25Db3VudCIsInN5bWJvbCIsImdldFN5bWJvbCIsInN0cmluZyIsImF0b21pY051bWJlckRpc3BsYXlUZXh0IiwiUkVEX0NPTE9SQkxJTkQiLCJsZWZ0IiwiYm90dG9tIiwibWFzc051bWJlckRpc3BsYXlUZXh0IiwibWFzc051bWJlclByb3BlcnR5IiwibWFzc051bWJlciIsInRvU3RyaW5nIiwidG9wIiwiY2hhcmdlRGlzcGxheVRleHQiLCJjaGFyZ2VQcm9wZXJ0eSIsImNoYXJnZSIsImNoYXJnZUNoYXIiLCJQTFVTIiwiTUlOVVMiLCJNYXRoIiwiYWJzIiwiQ0hBUkdFX1RFWFRfQ09MT1IiLCJyaWdodCIsInNjYWxlSW1hZ2UiLCJzY2FsZSIsImNoYXJnZU1ldGVyIiwic2hvd051bWVyaWNhbFJlYWRvdXQiLCJjZW50ZXJZIiwibXV0YXRlIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJTeW1ib2xOb2RlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFNjZW5lcnkgbm9kZSB0aGF0IHJlcHJlc2VudHMgYW4gYXRvbWljIHN5bWJvbCwgbWVhbmluZyB0aGF0IGl0IHNob3dzIHRoZVxyXG4gKiBzeW1ib2wgdGV4dCwgdGhlIHByb3RvbiBjb3VudCwgYXRvbWljIG51bWJlciwgYW5kIGNoYXJnZS5cclxuICpcclxuICogQGF1dGhvciBKb2huIEJsYW5jb1xyXG4gKi9cclxuXHJcbmltcG9ydCBWZWN0b3IyIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9WZWN0b3IyLmpzJztcclxuaW1wb3J0IE1hdGhTeW1ib2xzIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9NYXRoU3ltYm9scy5qcyc7XHJcbmltcG9ydCBQaGV0Q29sb3JTY2hlbWUgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1BoZXRDb2xvclNjaGVtZS5qcyc7XHJcbmltcG9ydCBQaGV0Rm9udCBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvUGhldEZvbnQuanMnO1xyXG5pbXBvcnQgeyBJbWFnZSwgTm9kZSwgUmVjdGFuZ2xlLCBUZXh0IH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IEF0b21JZGVudGlmaWVyIGZyb20gJy4uLy4uLy4uLy4uL3NocmVkL2pzL0F0b21JZGVudGlmaWVyLmpzJztcclxuaW1wb3J0IFNocmVkQ29uc3RhbnRzIGZyb20gJy4uLy4uLy4uLy4uL3NocmVkL2pzL1NocmVkQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IHNjYWxlX3BuZyBmcm9tICcuLi8uLi8uLi9pbWFnZXMvc2NhbGVfcG5nLmpzJztcclxuaW1wb3J0IGJ1aWxkQW5BdG9tIGZyb20gJy4uLy4uL2J1aWxkQW5BdG9tLmpzJztcclxuaW1wb3J0IENoYXJnZU1ldGVyIGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L0NoYXJnZU1ldGVyLmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBTWU1CT0xfQk9YX1dJRFRIID0gMjc1OyAvLyBJbiBzY3JlZW4gY29vcmRzLCB3aGljaCBhcmUgcm91Z2hseSBwaXhlbHMuXHJcbmNvbnN0IFNZTUJPTF9CT1hfSEVJR0hUID0gMzAwOyAvLyBJbiBzY3JlZW4gY29vcmRzLCB3aGljaCBhcmUgcm91Z2hseSBwaXhlbHMuXHJcbmNvbnN0IE5VTUJFUl9GT05UID0gbmV3IFBoZXRGb250KCA1NiApO1xyXG5jb25zdCBOVU1CRVJfSU5TRVQgPSAyMDsgLy8gSW4gc2NyZWVuIGNvb3Jkcywgd2hpY2ggYXJlIHJvdWdobHkgcGl4ZWxzLlxyXG5cclxuY2xhc3MgU3ltYm9sTm9kZSBleHRlbmRzIE5vZGUge1xyXG5cclxuICAvKipcclxuICAgKiBDb25zdHJ1Y3RvclxyXG4gICAqIEBwYXJhbSB7TnVtYmVyQXRvbX0gbnVtYmVyQXRvbVxyXG4gICAqIEBwYXJhbSB7VGFuZGVtfSB0YW5kZW1cclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIG51bWJlckF0b20sIHRhbmRlbSwgb3B0aW9ucyApIHtcclxuXHJcbiAgICBzdXBlciggeyB0YW5kZW06IHRhbmRlbSwgcGlja2FibGU6IGZhbHNlIH0gKTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIGJvdW5kaW5nIGJveCwgd2hpY2ggaXMgYWxzbyB0aGUgcm9vdCBub2RlIGZvciBldmVyeXRoaW5nIGVsc2VcclxuICAgIC8vIHRoYXQgY29tcHJpc2VzIHRoaXMgbm9kZS5cclxuICAgIGNvbnN0IGJvdW5kaW5nQm94ID0gbmV3IFJlY3RhbmdsZSggMCwgMCwgU1lNQk9MX0JPWF9XSURUSCwgU1lNQk9MX0JPWF9IRUlHSFQsIDAsIDAsIHtcclxuICAgICAgc3Ryb2tlOiAnYmxhY2snLFxyXG4gICAgICBsaW5lV2lkdGg6IDIsXHJcbiAgICAgIGZpbGw6ICd3aGl0ZScsXHJcbiAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2JvdW5kaW5nQm94JyApXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBib3VuZGluZ0JveCApO1xyXG5cclxuICAgIC8vIEFkZCB0aGUgc3ltYm9sIHRleHQuXHJcbiAgICBjb25zdCBzeW1ib2xUZXh0ID0gbmV3IFRleHQoICcnLCB7XHJcbiAgICAgIGZvbnQ6IG5ldyBQaGV0Rm9udCggMTUwICksXHJcbiAgICAgIGZpbGw6ICdibGFjaycsXHJcbiAgICAgIGNlbnRlcjogbmV3IFZlY3RvcjIoIFNZTUJPTF9CT1hfV0lEVEggLyAyLCBTWU1CT0xfQk9YX0hFSUdIVCAvIDIgKSxcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnc3ltYm9sVGV4dCcgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIEFkZCB0aGUgbGlzdGVuZXIgdG8gdXBkYXRlIHRoZSBzeW1ib2wgdGV4dC5cclxuICAgIGNvbnN0IHRleHRDZW50ZXIgPSBuZXcgVmVjdG9yMiggU1lNQk9MX0JPWF9XSURUSCAvIDIsIFNZTUJPTF9CT1hfSEVJR0hUIC8gMiApO1xyXG4gICAgbnVtYmVyQXRvbS5wcm90b25Db3VudFByb3BlcnR5LmxpbmsoIHByb3RvbkNvdW50ID0+IHtcclxuICAgICAgY29uc3Qgc3ltYm9sID0gQXRvbUlkZW50aWZpZXIuZ2V0U3ltYm9sKCBwcm90b25Db3VudCApO1xyXG4gICAgICBzeW1ib2xUZXh0LnN0cmluZyA9IHByb3RvbkNvdW50ID4gMCA/IHN5bWJvbCA6ICcnO1xyXG4gICAgICBzeW1ib2xUZXh0LmNlbnRlciA9IHRleHRDZW50ZXI7XHJcbiAgICB9ICk7XHJcbiAgICBib3VuZGluZ0JveC5hZGRDaGlsZCggc3ltYm9sVGV4dCApO1xyXG5cclxuICAgIC8vIEFkZCB0aGUgYXRvbWljIG51bWJlciBkaXNwbGF5LlxyXG4gICAgY29uc3QgYXRvbWljTnVtYmVyRGlzcGxheVRleHQgPSBuZXcgVGV4dCggJzAnLCB7XHJcbiAgICAgIGZvbnQ6IE5VTUJFUl9GT05ULFxyXG4gICAgICBmaWxsOiBQaGV0Q29sb3JTY2hlbWUuUkVEX0NPTE9SQkxJTkQsXHJcbiAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2F0b21pY051bWJlckRpc3BsYXlUZXh0JyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gQWRkIHRoZSBsaXN0ZW5lciB0byB1cGRhdGUgdGhlIHByb3RvbiBjb3VudC5cclxuICAgIG51bWJlckF0b20ucHJvdG9uQ291bnRQcm9wZXJ0eS5saW5rKCBwcm90b25Db3VudCA9PiB7XHJcbiAgICAgIGF0b21pY051bWJlckRpc3BsYXlUZXh0LnN0cmluZyA9IHByb3RvbkNvdW50O1xyXG4gICAgICBhdG9taWNOdW1iZXJEaXNwbGF5VGV4dC5sZWZ0ID0gTlVNQkVSX0lOU0VUO1xyXG4gICAgICBhdG9taWNOdW1iZXJEaXNwbGF5VGV4dC5ib3R0b20gPSBTWU1CT0xfQk9YX0hFSUdIVCAtIE5VTUJFUl9JTlNFVDtcclxuICAgIH0gKTtcclxuICAgIGJvdW5kaW5nQm94LmFkZENoaWxkKCBhdG9taWNOdW1iZXJEaXNwbGF5VGV4dCApO1xyXG5cclxuICAgIC8vIEFkZCB0aGUgbWFzcyBudW1iZXIgZGlzcGxheS5cclxuICAgIGNvbnN0IG1hc3NOdW1iZXJEaXNwbGF5VGV4dCA9IG5ldyBUZXh0KCAnMCcsIHtcclxuICAgICAgZm9udDogTlVNQkVSX0ZPTlQsXHJcbiAgICAgIGZpbGw6ICdibGFjaycsXHJcbiAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ21hc3NOdW1iZXJEaXNwbGF5VGV4dCcgKVxyXG4gICAgfSApO1xyXG4gICAgYm91bmRpbmdCb3guYWRkQ2hpbGQoIG1hc3NOdW1iZXJEaXNwbGF5VGV4dCApO1xyXG5cclxuICAgIC8vIEFkZCB0aGUgbGlzdGVuZXIgdG8gdXBkYXRlIHRoZSBtYXNzIG51bWJlci5cclxuICAgIG51bWJlckF0b20ubWFzc051bWJlclByb3BlcnR5LmxpbmsoIG1hc3NOdW1iZXIgPT4ge1xyXG4gICAgICBtYXNzTnVtYmVyRGlzcGxheVRleHQuc3RyaW5nID0gbWFzc051bWJlci50b1N0cmluZygpO1xyXG4gICAgICBtYXNzTnVtYmVyRGlzcGxheVRleHQubGVmdCA9IE5VTUJFUl9JTlNFVDtcclxuICAgICAgbWFzc051bWJlckRpc3BsYXlUZXh0LnRvcCA9IE5VTUJFUl9JTlNFVDtcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIGNoYXJnZSBkaXNwbGF5LlxyXG4gICAgY29uc3QgY2hhcmdlRGlzcGxheVRleHQgPSBuZXcgVGV4dCggJzAnLCB7XHJcbiAgICAgIGZvbnQ6IE5VTUJFUl9GT05ULFxyXG4gICAgICBmaWxsOiAnYmxhY2snLFxyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdjaGFyZ2VEaXNwbGF5VGV4dCcgKVxyXG4gICAgfSApO1xyXG4gICAgYm91bmRpbmdCb3guYWRkQ2hpbGQoIGNoYXJnZURpc3BsYXlUZXh0ICk7XHJcblxyXG4gICAgLy8gQWRkIHRoZSBsaXN0ZW5lciB0byB1cGRhdGUgdGhlIGNoYXJnZS5cclxuICAgIG51bWJlckF0b20uY2hhcmdlUHJvcGVydHkubGluayggY2hhcmdlID0+IHtcclxuICAgICAgY29uc3QgY2hhcmdlQ2hhciA9IGNoYXJnZSA+IDAgPyBNYXRoU3ltYm9scy5QTFVTIDogY2hhcmdlIDwgMCA/IE1hdGhTeW1ib2xzLk1JTlVTIDogJyc7XHJcbiAgICAgIGNoYXJnZURpc3BsYXlUZXh0LnN0cmluZyA9IGAke01hdGguYWJzKCBjaGFyZ2UgKS50b1N0cmluZyggMTAgKX0ke2NoYXJnZUNoYXJ9YDtcclxuICAgICAgY2hhcmdlRGlzcGxheVRleHQuZmlsbCA9IFNocmVkQ29uc3RhbnRzLkNIQVJHRV9URVhUX0NPTE9SKCBjaGFyZ2UgKTtcclxuICAgICAgY2hhcmdlRGlzcGxheVRleHQucmlnaHQgPSBTWU1CT0xfQk9YX1dJRFRIIC0gTlVNQkVSX0lOU0VUO1xyXG4gICAgICBjaGFyZ2VEaXNwbGF5VGV4dC50b3AgPSBOVU1CRVJfSU5TRVQ7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gQWRkIHRoZSBzY2FsZSBpbWFnZSAtIGp1c3QgYW4gaW1hZ2Ugd2l0aCBubyBmdW5jdGlvbmFsaXR5LlxyXG4gICAgY29uc3Qgc2NhbGVJbWFnZSA9IG5ldyBJbWFnZSggc2NhbGVfcG5nLCB7IHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3NjYWxlSW1hZ2UnICkgfSApO1xyXG4gICAgc2NhbGVJbWFnZS5zY2FsZSggMC4zMiApOyAvLyBTY2FsZSBlbXBpcmljYWxseSBkZXRlcm1pbmVkIHRvIG1hdGNoIGRlc2lnbiBsYXlvdXQuXHJcbiAgICB0aGlzLmFkZENoaWxkKCBzY2FsZUltYWdlICk7XHJcblxyXG4gICAgLy8gQWRkIHRoZSBjaGFyZ2UgbWV0ZXIuXHJcbiAgICBjb25zdCBjaGFyZ2VNZXRlciA9IG5ldyBDaGFyZ2VNZXRlciggbnVtYmVyQXRvbSwgdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2NoYXJnZU1ldGVyJyApLCB7XHJcbiAgICAgIHNob3dOdW1lcmljYWxSZWFkb3V0OiBmYWxzZVxyXG4gICAgfSApO1xyXG4gICAgY2hhcmdlTWV0ZXIuc2NhbGUoIDEuNSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggY2hhcmdlTWV0ZXIgKTtcclxuXHJcbiAgICAvLyBEbyB0aGUgbGF5b3V0LlxyXG4gICAgc2NhbGVJbWFnZS5sZWZ0ID0gMDtcclxuICAgIHNjYWxlSW1hZ2UuY2VudGVyWSA9IG1hc3NOdW1iZXJEaXNwbGF5VGV4dC5jZW50ZXJZO1xyXG4gICAgYm91bmRpbmdCb3gudG9wID0gMDtcclxuICAgIGJvdW5kaW5nQm94LmxlZnQgPSBzY2FsZUltYWdlLnJpZ2h0ICsgMTA7XHJcbiAgICBjaGFyZ2VNZXRlci5sZWZ0ID0gYm91bmRpbmdCb3gucmlnaHQgKyAxMDtcclxuICAgIGNoYXJnZU1ldGVyLmNlbnRlclkgPSBjaGFyZ2VEaXNwbGF5VGV4dC5jZW50ZXJZO1xyXG5cclxuICAgIHRoaXMubXV0YXRlKCBvcHRpb25zICk7XHJcbiAgfVxyXG59XHJcblxyXG5idWlsZEFuQXRvbS5yZWdpc3RlciggJ1N5bWJvbE5vZGUnLCBTeW1ib2xOb2RlICk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTeW1ib2xOb2RlOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLE9BQU8sTUFBTSwrQkFBK0I7QUFDbkQsT0FBT0MsV0FBVyxNQUFNLDRDQUE0QztBQUNwRSxPQUFPQyxlQUFlLE1BQU0sZ0RBQWdEO0FBQzVFLE9BQU9DLFFBQVEsTUFBTSx5Q0FBeUM7QUFDOUQsU0FBU0MsS0FBSyxFQUFFQyxJQUFJLEVBQUVDLFNBQVMsRUFBRUMsSUFBSSxRQUFRLG1DQUFtQztBQUNoRixPQUFPQyxjQUFjLE1BQU0sd0NBQXdDO0FBQ25FLE9BQU9DLGNBQWMsTUFBTSx3Q0FBd0M7QUFDbkUsT0FBT0MsU0FBUyxNQUFNLDhCQUE4QjtBQUNwRCxPQUFPQyxXQUFXLE1BQU0sc0JBQXNCO0FBQzlDLE9BQU9DLFdBQVcsTUFBTSxrQ0FBa0M7O0FBRTFEO0FBQ0EsTUFBTUMsZ0JBQWdCLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFDOUIsTUFBTUMsaUJBQWlCLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFDL0IsTUFBTUMsV0FBVyxHQUFHLElBQUlaLFFBQVEsQ0FBRSxFQUFHLENBQUM7QUFDdEMsTUFBTWEsWUFBWSxHQUFHLEVBQUUsQ0FBQyxDQUFDOztBQUV6QixNQUFNQyxVQUFVLFNBQVNaLElBQUksQ0FBQztFQUU1QjtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRWEsV0FBV0EsQ0FBRUMsVUFBVSxFQUFFQyxNQUFNLEVBQUVDLE9BQU8sRUFBRztJQUV6QyxLQUFLLENBQUU7TUFBRUQsTUFBTSxFQUFFQSxNQUFNO01BQUVFLFFBQVEsRUFBRTtJQUFNLENBQUUsQ0FBQzs7SUFFNUM7SUFDQTtJQUNBLE1BQU1DLFdBQVcs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