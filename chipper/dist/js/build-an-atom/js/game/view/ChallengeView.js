// Copyright 2013-2023, University of Colorado Boulder

/**
 * Base class for challenge views.  This type adds the titles, buttons, and such
 * and controls the visibility based on the state of the challenge.
 *
 * @author John Blanco
 */

import stepTimer from '../../../../axon/js/stepTimer.js';
import FaceNode from '../../../../scenery-phet/js/FaceNode.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { Color, Node, Text } from '../../../../scenery/js/imports.js';
import TextPushButton from '../../../../sun/js/buttons/TextPushButton.js';
import GameAudioPlayer from '../../../../vegas/js/GameAudioPlayer.js';
import VegasStrings from '../../../../vegas/js/VegasStrings.js';
import buildAnAtom from '../../buildAnAtom.js';
import BAAChallengeState from '../model/BAAChallengeState.js';
const checkString = VegasStrings.check;
const nextString = VegasStrings.next;
const showAnswerString = VegasStrings.showAnswer;
const tryAgainString = VegasStrings.tryAgain;

// constants
const BUTTON_FONT = new PhetFont(20);
const BUTTON_FILL = new Color(0, 255, 153);
const POINT_TEXT_OPTIONS = {
  font: new PhetFont({
    size: 20,
    weight: 'bold'
  })
};
const BUTTON_MAX_WIDTH = 350;
const BUTTON_TOUCH_AREA_DILATION = 8;
class ChallengeView extends Node {
  /**
   * @param {BAAGameChallenge} challenge
   * @param {Bounds2} layoutBounds
   * @param {Tandem} tandem
   */
  constructor(challenge, layoutBounds, tandem) {
    super();
    this.challenge = challenge;

    // Audio player used for audio feedback.
    this.gameAudioPlayer = new GameAudioPlayer();

    // Layout assumes that bounds start at (0,0), so verify that this is true.
    assert && assert(layoutBounds.minX === 0 && layoutBounds.minY === 0);

    // Add the parent nodes where subclasses will add the challenge presentation and the interactive controls.
    this.challengePresentationNode = new Node();
    this.addChild(this.challengePresentationNode);
    this.interactiveAnswerNode = new Node();
    this.addChild(this.interactiveAnswerNode);

    // face node, used to signal correct/incorrect answers
    const faceNode = new FaceNode(layoutBounds.width * 0.4, {
      visible: false,
      opacity: 0.75
    });
    const pointDisplay = new Text('+0', POINT_TEXT_OPTIONS);
    pointDisplay.centerX = 0;
    pointDisplay.top = faceNode.height / 2;
    faceNode.addChild(pointDisplay);
    this.addChild(faceNode);

    // buttons
    this.buttons = [];
    this.checkAnswerButton = new TextPushButton(checkString, {
      listener: () => {
        this.checkAnswer();
      },
      font: BUTTON_FONT,
      baseColor: BUTTON_FILL,
      maxWidth: BUTTON_MAX_WIDTH,
      touchAreaXDilation: BUTTON_TOUCH_AREA_DILATION,
      touchAreaYDilation: BUTTON_TOUCH_AREA_DILATION,
      tandem: tandem.createTandem('checkAnswerButton')
    });
    this.addChild(this.checkAnswerButton);
    this.buttons.push(this.checkAnswerButton);
    this.nextButton = new TextPushButton(nextString, {
      listener: () => {
        // Since the button disposes itself while triggering other events, we must run this in the next animation frame
        // to avoid mismatched PhET-iO message indices, see https://github.com/phetsims/build-an-atom/issues/181
        // N.B. That is to say, I don't really understand the problem nor why this solution works.
        stepTimer.setTimeout(() => {
          challenge.next();
        }, 0);
      },
      font: BUTTON_FONT,
      baseColor: BUTTON_FILL,
      maxWidth: BUTTON_MAX_WIDTH,
      touchAreaXDilation: BUTTON_TOUCH_AREA_DILATION,
      touchAreaYDilation: BUTTON_TOUCH_AREA_DILATION,
      tandem: tandem.createTandem('nextButton')
    });
    this.addChild(this.nextButton);
    this.buttons.push(this.nextButton);
    this.tryAgainButton = new TextPushButton(tryAgainString, {
      listener: () => {
        challenge.tryAgain();
      },
      font: BUTTON_FONT,
      baseColor: BUTTON_FILL,
      maxWidth: BUTTON_MAX_WIDTH,
      touchAreaXDilation: BUTTON_TOUCH_AREA_DILATION,
      touchAreaYDilation: BUTTON_TOUCH_AREA_DILATION,
      tandem: tandem.createTandem('tryAgainButton')
    });
    this.addChild(this.tryAgainButton);
    this.buttons.push(this.tryAgainButton);
    this.displayCorrectAnswerButton = new TextPushButton(showAnswerString, {
      listener: () => {
        challenge.displayCorrectAnswer();
      },
      font: BUTTON_FONT,
      baseColor: BUTTON_FILL,
      maxWidth: BUTTON_MAX_WIDTH,
      touchAreaXDilation: BUTTON_TOUCH_AREA_DILATION,
      touchAreaYDilation: BUTTON_TOUCH_AREA_DILATION,
      tandem: tandem.createTandem('displayCorrectAnswerButton')
    });
    this.addChild(this.displayCorrectAnswerButton);
    this.buttons.push(this.displayCorrectAnswerButton);

    // Utility function to hide all buttons and the feedback face.
    const hideButtonsAndFace = () => {
      this.buttons.forEach(button => {
        button.visible = false;
      });
      faceNode.visible = false;
    };
    hideButtonsAndFace();

    // Utility function to enable/disable interaction with answer portion of
    // the displayed challenge.
    const setAnswerNodeInteractive = interactive => {
      this.interactiveAnswerNode.pickable = interactive;
    };

    // Update the visibility of the various buttons and other nodes based on
    // the challenge state.
    // Set up the handlers that update the visibility of the various buttons and other nodes based on the challenge state.
    const stateChangeHandlers = {};
    stateChangeHandlers[BAAChallengeState.PRESENTING_CHALLENGE] = () => {
      this.clearAnswer();
      setAnswerNodeInteractive(true);
      this.checkAnswerButton.visible = true;
    };
    stateChangeHandlers[BAAChallengeState.CHALLENGE_SOLVED_CORRECTLY] = () => {
      setAnswerNodeInteractive(false);
      faceNode.smile();
      pointDisplay.string = `+${challenge.pointValue}`;
      faceNode.visible = true;
      this.nextButton.visible = true;
      this.gameAudioPlayer.correctAnswer();
    };
    stateChangeHandlers[BAAChallengeState.PRESENTING_TRY_AGAIN] = () => {
      setAnswerNodeInteractive(false);
      faceNode.frown();
      pointDisplay.string = '';
      faceNode.visible = true;
      this.tryAgainButton.visible = true;
      this.gameAudioPlayer.wrongAnswer();
    };
    stateChangeHandlers[BAAChallengeState.ATTEMPTS_EXHAUSTED] = () => {
      setAnswerNodeInteractive(false);
      this.displayCorrectAnswerButton.visible = true;
      faceNode.frown();
      pointDisplay.string = '';
      faceNode.visible = true;
      this.gameAudioPlayer.wrongAnswer();
    };
    stateChangeHandlers[BAAChallengeState.DISPLAYING_CORRECT_ANSWER] = () => {
      setAnswerNodeInteractive(false);
      this.nextButton.visible = true;
      this.displayCorrectAnswer();
    };

    // Update the appearance of the challenge as the state changes.
    const handleStateChange = challengeState => {
      hideButtonsAndFace();
      // TODO: Is the check for undefined really needed
      if (stateChangeHandlers[challengeState] !== undefined) {
        stateChangeHandlers[challengeState]();
      }
    };
    challenge.challengeStateProperty.link(handleStateChange);
    this.disposeListeners = () => {
      challenge.challengeStateProperty.unlink(handleStateChange);
    };

    // Do an initial layout, but the subclasses can and should move the
    // buttons as needed.
    this.setButtonCenter(layoutBounds.width * 0.75, layoutBounds.height * 0.92);
    faceNode.centerX = layoutBounds.width / 2;
    faceNode.centerY = layoutBounds.height / 2;
  }

  /**
   * @public
   */
  dispose() {
    this.disposeListeners();
    this.checkAnswerButton.dispose();
    this.nextButton.dispose();
    this.tryAgainButton.dispose();
    this.displayCorrectAnswerButton.dispose();
    super.dispose();
  }

  // Function to clear the user's answer, generally used when
  // giving the user another chance to answer.  Must be implemented
  // in subclasses if any action is desired.

  /**
   * Function to clear the user's answer, generally used when giving the user another chance to answer.  Must be
   * implemented in subclasses if any action is desired.
   * @public
   */
  clearAnswer() {}

  /**
   * Function to display the correct answer.  Must be implemented in subclasses.
   * @public
   */
  displayCorrectAnswer() {}

  /**
   * Function to check the user's submitted answer.  Must be implemented in subclasses.
   * @public
   */
  checkAnswer() {}

  /**
   * Function to set the positions of all buttons.
   * @param {number} x
   * @param {number} y
   * @public
   */
  setButtonCenter(x, y) {
    this.buttons.forEach(button => {
      button.centerX = x;
      button.centerY = y;
    });
  }
}
buildAnAtom.register('ChallengeView', ChallengeView);
export default ChallengeView;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzdGVwVGltZXIiLCJGYWNlTm9kZSIsIlBoZXRGb250IiwiQ29sb3IiLCJOb2RlIiwiVGV4dCIsIlRleHRQdXNoQnV0dG9uIiwiR2FtZUF1ZGlvUGxheWVyIiwiVmVnYXNTdHJpbmdzIiwiYnVpbGRBbkF0b20iLCJCQUFDaGFsbGVuZ2VTdGF0ZSIsImNoZWNrU3RyaW5nIiwiY2hlY2siLCJuZXh0U3RyaW5nIiwibmV4dCIsInNob3dBbnN3ZXJTdHJpbmciLCJzaG93QW5zd2VyIiwidHJ5QWdhaW5TdHJpbmciLCJ0cnlBZ2FpbiIsIkJVVFRPTl9GT05UIiwiQlVUVE9OX0ZJTEwiLCJQT0lOVF9URVhUX09QVElPTlMiLCJmb250Iiwic2l6ZSIsIndlaWdodCIsIkJVVFRPTl9NQVhfV0lEVEgiLCJCVVRUT05fVE9VQ0hfQVJFQV9ESUxBVElPTiIsIkNoYWxsZW5nZVZpZXciLCJjb25zdHJ1Y3RvciIsImNoYWxsZW5nZSIsImxheW91dEJvdW5kcyIsInRhbmRlbSIsImdhbWVBdWRpb1BsYXllciIsImFzc2VydCIsIm1pblgiLCJtaW5ZIiwiY2hhbGxlbmdlUHJlc2VudGF0aW9uTm9kZSIsImFkZENoaWxkIiwiaW50ZXJhY3RpdmVBbnN3ZXJOb2RlIiwiZmFjZU5vZGUiLCJ3aWR0aCIsInZpc2libGUiLCJvcGFjaXR5IiwicG9pbnREaXNwbGF5IiwiY2VudGVyWCIsInRvcCIsImhlaWdodCIsImJ1dHRvbnMiLCJjaGVja0Fuc3dlckJ1dHRvbiIsImxpc3RlbmVyIiwiY2hlY2tBbnN3ZXIiLCJiYXNlQ29sb3IiLCJtYXhXaWR0aCIsInRvdWNoQXJlYVhEaWxhdGlvbiIsInRvdWNoQXJlYVlEaWxhdGlvbiIsImNyZWF0ZVRhbmRlbSIsInB1c2giLCJuZXh0QnV0dG9uIiwic2V0VGltZW91dCIsInRyeUFnYWluQnV0dG9uIiwiZGlzcGxheUNvcnJlY3RBbnN3ZXJCdXR0b24iLCJkaXNwbGF5Q29ycmVjdEFuc3dlciIsImhpZGVCdXR0b25zQW5kRmFjZSIsImZvckVhY2giLCJidXR0b24iLCJzZXRBbnN3ZXJOb2RlSW50ZXJhY3RpdmUiLCJpbnRlcmFjdGl2ZSIsInBpY2thYmxlIiwic3RhdGVDaGFuZ2VIYW5kbGVycyIsIlBSRVNFTlRJTkdfQ0hBTExFTkdFIiwiY2xlYXJBbnN3ZXIiLCJDSEFMTEVOR0VfU09MVkVEX0NPUlJFQ1RMWSIsInNtaWxlIiwic3RyaW5nIiwicG9pbnRWYWx1ZSIsImNvcnJlY3RBbnN3ZXIiLCJQUkVTRU5USU5HX1RSWV9BR0FJTiIsImZyb3duIiwid3JvbmdBbnN3ZXIiLCJBVFRFTVBUU19FWEhBVVNURUQiLCJESVNQTEFZSU5HX0NPUlJFQ1RfQU5TV0VSIiwiaGFuZGxlU3RhdGVDaGFuZ2UiLCJjaGFsbGVuZ2VTdGF0ZSIsInVuZGVmaW5lZCIsImNoYWxsZW5nZVN0YXRlUHJvcGVydHkiLCJsaW5rIiwiZGlzcG9zZUxpc3RlbmVycyIsInVubGluayIsInNldEJ1dHRvbkNlbnRlciIsImNlbnRlclkiLCJkaXNwb3NlIiwieCIsInkiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkNoYWxsZW5nZVZpZXcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTMtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogQmFzZSBjbGFzcyBmb3IgY2hhbGxlbmdlIHZpZXdzLiAgVGhpcyB0eXBlIGFkZHMgdGhlIHRpdGxlcywgYnV0dG9ucywgYW5kIHN1Y2hcclxuICogYW5kIGNvbnRyb2xzIHRoZSB2aXNpYmlsaXR5IGJhc2VkIG9uIHRoZSBzdGF0ZSBvZiB0aGUgY2hhbGxlbmdlLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvaG4gQmxhbmNvXHJcbiAqL1xyXG5cclxuaW1wb3J0IHN0ZXBUaW1lciBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL3N0ZXBUaW1lci5qcyc7XHJcbmltcG9ydCBGYWNlTm9kZSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvRmFjZU5vZGUuanMnO1xyXG5pbXBvcnQgUGhldEZvbnQgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1BoZXRGb250LmpzJztcclxuaW1wb3J0IHsgQ29sb3IsIE5vZGUsIFRleHQgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgVGV4dFB1c2hCdXR0b24gZnJvbSAnLi4vLi4vLi4vLi4vc3VuL2pzL2J1dHRvbnMvVGV4dFB1c2hCdXR0b24uanMnO1xyXG5pbXBvcnQgR2FtZUF1ZGlvUGxheWVyIGZyb20gJy4uLy4uLy4uLy4uL3ZlZ2FzL2pzL0dhbWVBdWRpb1BsYXllci5qcyc7XHJcbmltcG9ydCBWZWdhc1N0cmluZ3MgZnJvbSAnLi4vLi4vLi4vLi4vdmVnYXMvanMvVmVnYXNTdHJpbmdzLmpzJztcclxuaW1wb3J0IGJ1aWxkQW5BdG9tIGZyb20gJy4uLy4uL2J1aWxkQW5BdG9tLmpzJztcclxuaW1wb3J0IEJBQUNoYWxsZW5nZVN0YXRlIGZyb20gJy4uL21vZGVsL0JBQUNoYWxsZW5nZVN0YXRlLmpzJztcclxuXHJcbmNvbnN0IGNoZWNrU3RyaW5nID0gVmVnYXNTdHJpbmdzLmNoZWNrO1xyXG5jb25zdCBuZXh0U3RyaW5nID0gVmVnYXNTdHJpbmdzLm5leHQ7XHJcbmNvbnN0IHNob3dBbnN3ZXJTdHJpbmcgPSBWZWdhc1N0cmluZ3Muc2hvd0Fuc3dlcjtcclxuY29uc3QgdHJ5QWdhaW5TdHJpbmcgPSBWZWdhc1N0cmluZ3MudHJ5QWdhaW47XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgQlVUVE9OX0ZPTlQgPSBuZXcgUGhldEZvbnQoIDIwICk7XHJcbmNvbnN0IEJVVFRPTl9GSUxMID0gbmV3IENvbG9yKCAwLCAyNTUsIDE1MyApO1xyXG5jb25zdCBQT0lOVF9URVhUX09QVElPTlMgPSB7IGZvbnQ6IG5ldyBQaGV0Rm9udCggeyBzaXplOiAyMCwgd2VpZ2h0OiAnYm9sZCcgfSApIH07XHJcbmNvbnN0IEJVVFRPTl9NQVhfV0lEVEggPSAzNTA7XHJcbmNvbnN0IEJVVFRPTl9UT1VDSF9BUkVBX0RJTEFUSU9OID0gODtcclxuXHJcbmNsYXNzIENoYWxsZW5nZVZpZXcgZXh0ZW5kcyBOb2RlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtCQUFHYW1lQ2hhbGxlbmdlfSBjaGFsbGVuZ2VcclxuICAgKiBAcGFyYW0ge0JvdW5kczJ9IGxheW91dEJvdW5kc1xyXG4gICAqIEBwYXJhbSB7VGFuZGVtfSB0YW5kZW1cclxuICAgKi9cclxuICBjb25zdHJ1Y3RvciggY2hhbGxlbmdlLCBsYXlvdXRCb3VuZHMsIHRhbmRlbSApIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLmNoYWxsZW5nZSA9IGNoYWxsZW5nZTtcclxuXHJcbiAgICAvLyBBdWRpbyBwbGF5ZXIgdXNlZCBmb3IgYXVkaW8gZmVlZGJhY2suXHJcbiAgICB0aGlzLmdhbWVBdWRpb1BsYXllciA9IG5ldyBHYW1lQXVkaW9QbGF5ZXIoKTtcclxuXHJcbiAgICAvLyBMYXlvdXQgYXNzdW1lcyB0aGF0IGJvdW5kcyBzdGFydCBhdCAoMCwwKSwgc28gdmVyaWZ5IHRoYXQgdGhpcyBpcyB0cnVlLlxyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggbGF5b3V0Qm91bmRzLm1pblggPT09IDAgJiYgbGF5b3V0Qm91bmRzLm1pblkgPT09IDAgKTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIHBhcmVudCBub2RlcyB3aGVyZSBzdWJjbGFzc2VzIHdpbGwgYWRkIHRoZSBjaGFsbGVuZ2UgcHJlc2VudGF0aW9uIGFuZCB0aGUgaW50ZXJhY3RpdmUgY29udHJvbHMuXHJcbiAgICB0aGlzLmNoYWxsZW5nZVByZXNlbnRhdGlvbk5vZGUgPSBuZXcgTm9kZSgpO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggdGhpcy5jaGFsbGVuZ2VQcmVzZW50YXRpb25Ob2RlICk7XHJcbiAgICB0aGlzLmludGVyYWN0aXZlQW5zd2VyTm9kZSA9IG5ldyBOb2RlKCk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCB0aGlzLmludGVyYWN0aXZlQW5zd2VyTm9kZSApO1xyXG5cclxuICAgIC8vIGZhY2Ugbm9kZSwgdXNlZCB0byBzaWduYWwgY29ycmVjdC9pbmNvcnJlY3QgYW5zd2Vyc1xyXG4gICAgY29uc3QgZmFjZU5vZGUgPSBuZXcgRmFjZU5vZGUoIGxheW91dEJvdW5kcy53aWR0aCAqIDAuNCwgeyB2aXNpYmxlOiBmYWxzZSwgb3BhY2l0eTogMC43NSB9ICk7XHJcbiAgICBjb25zdCBwb2ludERpc3BsYXkgPSBuZXcgVGV4dCggJyswJywgUE9JTlRfVEVYVF9PUFRJT05TICk7XHJcbiAgICBwb2ludERpc3BsYXkuY2VudGVyWCA9IDA7XHJcbiAgICBwb2ludERpc3BsYXkudG9wID0gZmFjZU5vZGUuaGVpZ2h0IC8gMjtcclxuICAgIGZhY2VOb2RlLmFkZENoaWxkKCBwb2ludERpc3BsYXkgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIGZhY2VOb2RlICk7XHJcblxyXG4gICAgLy8gYnV0dG9uc1xyXG4gICAgdGhpcy5idXR0b25zID0gW107XHJcbiAgICB0aGlzLmNoZWNrQW5zd2VyQnV0dG9uID0gbmV3IFRleHRQdXNoQnV0dG9uKCBjaGVja1N0cmluZywge1xyXG4gICAgICBsaXN0ZW5lcjogKCkgPT4geyB0aGlzLmNoZWNrQW5zd2VyKCk7IH0sXHJcbiAgICAgIGZvbnQ6IEJVVFRPTl9GT05ULFxyXG4gICAgICBiYXNlQ29sb3I6IEJVVFRPTl9GSUxMLFxyXG4gICAgICBtYXhXaWR0aDogQlVUVE9OX01BWF9XSURUSCxcclxuICAgICAgdG91Y2hBcmVhWERpbGF0aW9uOiBCVVRUT05fVE9VQ0hfQVJFQV9ESUxBVElPTixcclxuICAgICAgdG91Y2hBcmVhWURpbGF0aW9uOiBCVVRUT05fVE9VQ0hfQVJFQV9ESUxBVElPTixcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnY2hlY2tBbnN3ZXJCdXR0b24nIClcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMuY2hlY2tBbnN3ZXJCdXR0b24gKTtcclxuICAgIHRoaXMuYnV0dG9ucy5wdXNoKCB0aGlzLmNoZWNrQW5zd2VyQnV0dG9uICk7XHJcblxyXG4gICAgdGhpcy5uZXh0QnV0dG9uID0gbmV3IFRleHRQdXNoQnV0dG9uKCBuZXh0U3RyaW5nLCB7XHJcbiAgICAgIGxpc3RlbmVyOiAoKSA9PiB7XHJcblxyXG4gICAgICAgIC8vIFNpbmNlIHRoZSBidXR0b24gZGlzcG9zZXMgaXRzZWxmIHdoaWxlIHRyaWdnZXJpbmcgb3RoZXIgZXZlbnRzLCB3ZSBtdXN0IHJ1biB0aGlzIGluIHRoZSBuZXh0IGFuaW1hdGlvbiBmcmFtZVxyXG4gICAgICAgIC8vIHRvIGF2b2lkIG1pc21hdGNoZWQgUGhFVC1pTyBtZXNzYWdlIGluZGljZXMsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvYnVpbGQtYW4tYXRvbS9pc3N1ZXMvMTgxXHJcbiAgICAgICAgLy8gTi5CLiBUaGF0IGlzIHRvIHNheSwgSSBkb24ndCByZWFsbHkgdW5kZXJzdGFuZCB0aGUgcHJvYmxlbSBub3Igd2h5IHRoaXMgc29sdXRpb24gd29ya3MuXHJcbiAgICAgICAgc3RlcFRpbWVyLnNldFRpbWVvdXQoICgpID0+IHtcclxuICAgICAgICAgIGNoYWxsZW5nZS5uZXh0KCk7XHJcbiAgICAgICAgfSwgMCApO1xyXG4gICAgICB9LFxyXG4gICAgICBmb250OiBCVVRUT05fRk9OVCxcclxuICAgICAgYmFzZUNvbG9yOiBCVVRUT05fRklMTCxcclxuICAgICAgbWF4V2lkdGg6IEJVVFRPTl9NQVhfV0lEVEgsXHJcbiAgICAgIHRvdWNoQXJlYVhEaWxhdGlvbjogQlVUVE9OX1RPVUNIX0FSRUFfRElMQVRJT04sXHJcbiAgICAgIHRvdWNoQXJlYVlEaWxhdGlvbjogQlVUVE9OX1RPVUNIX0FSRUFfRElMQVRJT04sXHJcbiAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ25leHRCdXR0b24nIClcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMubmV4dEJ1dHRvbiApO1xyXG4gICAgdGhpcy5idXR0b25zLnB1c2goIHRoaXMubmV4dEJ1dHRvbiApO1xyXG5cclxuICAgIHRoaXMudHJ5QWdhaW5CdXR0b24gPSBuZXcgVGV4dFB1c2hCdXR0b24oIHRyeUFnYWluU3RyaW5nLCB7XHJcbiAgICAgIGxpc3RlbmVyOiAoKSA9PiB7IGNoYWxsZW5nZS50cnlBZ2FpbigpOyB9LFxyXG4gICAgICBmb250OiBCVVRUT05fRk9OVCxcclxuICAgICAgYmFzZUNvbG9yOiBCVVRUT05fRklMTCxcclxuICAgICAgbWF4V2lkdGg6IEJVVFRPTl9NQVhfV0lEVEgsXHJcbiAgICAgIHRvdWNoQXJlYVhEaWxhdGlvbjogQlVUVE9OX1RPVUNIX0FSRUFfRElMQVRJT04sXHJcbiAgICAgIHRvdWNoQXJlYVlEaWxhdGlvbjogQlVUVE9OX1RPVUNIX0FSRUFfRElMQVRJT04sXHJcbiAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3RyeUFnYWluQnV0dG9uJyApXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCB0aGlzLnRyeUFnYWluQnV0dG9uICk7XHJcbiAgICB0aGlzLmJ1dHRvbnMucHVzaCggdGhpcy50cnlBZ2FpbkJ1dHRvbiApO1xyXG5cclxuICAgIHRoaXMuZGlzcGxheUNvcnJlY3RBbnN3ZXJCdXR0b24gPSBuZXcgVGV4dFB1c2hCdXR0b24oIHNob3dBbnN3ZXJTdHJpbmcsIHtcclxuICAgICAgbGlzdGVuZXI6ICgpID0+IHsgY2hhbGxlbmdlLmRpc3BsYXlDb3JyZWN0QW5zd2VyKCk7IH0sXHJcbiAgICAgIGZvbnQ6IEJVVFRPTl9GT05ULFxyXG4gICAgICBiYXNlQ29sb3I6IEJVVFRPTl9GSUxMLFxyXG4gICAgICBtYXhXaWR0aDogQlVUVE9OX01BWF9XSURUSCxcclxuICAgICAgdG91Y2hBcmVhWERpbGF0aW9uOiBCVVRUT05fVE9VQ0hfQVJFQV9ESUxBVElPTixcclxuICAgICAgdG91Y2hBcmVhWURpbGF0aW9uOiBCVVRUT05fVE9VQ0hfQVJFQV9ESUxBVElPTixcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnZGlzcGxheUNvcnJlY3RBbnN3ZXJCdXR0b24nIClcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMuZGlzcGxheUNvcnJlY3RBbnN3ZXJCdXR0b24gKTtcclxuICAgIHRoaXMuYnV0dG9ucy5wdXNoKCB0aGlzLmRpc3BsYXlDb3JyZWN0QW5zd2VyQnV0dG9uICk7XHJcblxyXG4gICAgLy8gVXRpbGl0eSBmdW5jdGlvbiB0byBoaWRlIGFsbCBidXR0b25zIGFuZCB0aGUgZmVlZGJhY2sgZmFjZS5cclxuICAgIGNvbnN0IGhpZGVCdXR0b25zQW5kRmFjZSA9ICgpID0+IHtcclxuICAgICAgdGhpcy5idXR0b25zLmZvckVhY2goIGJ1dHRvbiA9PiB7XHJcbiAgICAgICAgYnV0dG9uLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgfSApO1xyXG4gICAgICBmYWNlTm9kZS52aXNpYmxlID0gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgaGlkZUJ1dHRvbnNBbmRGYWNlKCk7XHJcblxyXG4gICAgLy8gVXRpbGl0eSBmdW5jdGlvbiB0byBlbmFibGUvZGlzYWJsZSBpbnRlcmFjdGlvbiB3aXRoIGFuc3dlciBwb3J0aW9uIG9mXHJcbiAgICAvLyB0aGUgZGlzcGxheWVkIGNoYWxsZW5nZS5cclxuICAgIGNvbnN0IHNldEFuc3dlck5vZGVJbnRlcmFjdGl2ZSA9IGludGVyYWN0aXZlID0+IHtcclxuICAgICAgdGhpcy5pbnRlcmFjdGl2ZUFuc3dlck5vZGUucGlja2FibGUgPSBpbnRlcmFjdGl2ZTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gVXBkYXRlIHRoZSB2aXNpYmlsaXR5IG9mIHRoZSB2YXJpb3VzIGJ1dHRvbnMgYW5kIG90aGVyIG5vZGVzIGJhc2VkIG9uXHJcbiAgICAvLyB0aGUgY2hhbGxlbmdlIHN0YXRlLlxyXG4gICAgLy8gU2V0IHVwIHRoZSBoYW5kbGVycyB0aGF0IHVwZGF0ZSB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgdmFyaW91cyBidXR0b25zIGFuZCBvdGhlciBub2RlcyBiYXNlZCBvbiB0aGUgY2hhbGxlbmdlIHN0YXRlLlxyXG4gICAgY29uc3Qgc3RhdGVDaGFuZ2VIYW5kbGVycyA9IHt9O1xyXG4gICAgc3RhdGVDaGFuZ2VIYW5kbGVyc1sgQkFBQ2hhbGxlbmdlU3RhdGUuUFJFU0VOVElOR19DSEFMTEVOR0UgXSA9ICgpID0+IHtcclxuICAgICAgdGhpcy5jbGVhckFuc3dlcigpO1xyXG4gICAgICBzZXRBbnN3ZXJOb2RlSW50ZXJhY3RpdmUoIHRydWUgKTtcclxuICAgICAgdGhpcy5jaGVja0Fuc3dlckJ1dHRvbi52aXNpYmxlID0gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBzdGF0ZUNoYW5nZUhhbmRsZXJzWyBCQUFDaGFsbGVuZ2VTdGF0ZS5DSEFMTEVOR0VfU09MVkVEX0NPUlJFQ1RMWSBdID0gKCkgPT4ge1xyXG4gICAgICBzZXRBbnN3ZXJOb2RlSW50ZXJhY3RpdmUoIGZhbHNlICk7XHJcbiAgICAgIGZhY2VOb2RlLnNtaWxlKCk7XHJcbiAgICAgIHBvaW50RGlzcGxheS5zdHJpbmcgPSBgKyR7Y2hhbGxlbmdlLnBvaW50VmFsdWV9YDtcclxuICAgICAgZmFjZU5vZGUudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgIHRoaXMubmV4dEJ1dHRvbi52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgdGhpcy5nYW1lQXVkaW9QbGF5ZXIuY29ycmVjdEFuc3dlcigpO1xyXG4gICAgfTtcclxuICAgIHN0YXRlQ2hhbmdlSGFuZGxlcnNbIEJBQUNoYWxsZW5nZVN0YXRlLlBSRVNFTlRJTkdfVFJZX0FHQUlOIF0gPSAoKSA9PiB7XHJcbiAgICAgIHNldEFuc3dlck5vZGVJbnRlcmFjdGl2ZSggZmFsc2UgKTtcclxuICAgICAgZmFjZU5vZGUuZnJvd24oKTtcclxuICAgICAgcG9pbnREaXNwbGF5LnN0cmluZyA9ICcnO1xyXG4gICAgICBmYWNlTm9kZS52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgdGhpcy50cnlBZ2FpbkJ1dHRvbi52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgdGhpcy5nYW1lQXVkaW9QbGF5ZXIud3JvbmdBbnN3ZXIoKTtcclxuICAgIH07XHJcbiAgICBzdGF0ZUNoYW5nZUhhbmRsZXJzWyBCQUFDaGFsbGVuZ2VTdGF0ZS5BVFRFTVBUU19FWEhBVVNURUQgXSA9ICgpID0+IHtcclxuICAgICAgc2V0QW5zd2VyTm9kZUludGVyYWN0aXZlKCBmYWxzZSApO1xyXG4gICAgICB0aGlzLmRpc3BsYXlDb3JyZWN0QW5zd2VyQnV0dG9uLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICBmYWNlTm9kZS5mcm93bigpO1xyXG4gICAgICBwb2ludERpc3BsYXkuc3RyaW5nID0gJyc7XHJcbiAgICAgIGZhY2VOb2RlLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICB0aGlzLmdhbWVBdWRpb1BsYXllci53cm9uZ0Fuc3dlcigpO1xyXG4gICAgfTtcclxuICAgIHN0YXRlQ2hhbmdlSGFuZGxlcnNbIEJBQUNoYWxsZW5nZVN0YXRlLkRJU1BMQVlJTkdfQ09SUkVDVF9BTlNXRVIgXSA9ICgpID0+IHtcclxuICAgICAgc2V0QW5zd2VyTm9kZUludGVyYWN0aXZlKCBmYWxzZSApO1xyXG4gICAgICB0aGlzLm5leHRCdXR0b24udmlzaWJsZSA9IHRydWU7XHJcbiAgICAgIHRoaXMuZGlzcGxheUNvcnJlY3RBbnN3ZXIoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gVXBkYXRlIHRoZSBhcHBlYXJhbmNlIG9mIHRoZSBjaGFsbGVuZ2UgYXMgdGhlIHN0YXRlIGNoYW5nZXMuXHJcbiAgICBjb25zdCBoYW5kbGVTdGF0ZUNoYW5nZSA9IGNoYWxsZW5nZVN0YXRlID0+IHtcclxuICAgICAgaGlkZUJ1dHRvbnNBbmRGYWNlKCk7XHJcbiAgICAgIC8vIFRPRE86IElzIHRoZSBjaGVjayBmb3IgdW5kZWZpbmVkIHJlYWxseSBuZWVkZWRcclxuICAgICAgaWYgKCBzdGF0ZUNoYW5nZUhhbmRsZXJzWyBjaGFsbGVuZ2VTdGF0ZSBdICE9PSB1bmRlZmluZWQgKSB7XHJcbiAgICAgICAgc3RhdGVDaGFuZ2VIYW5kbGVyc1sgY2hhbGxlbmdlU3RhdGUgXSgpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgY2hhbGxlbmdlLmNoYWxsZW5nZVN0YXRlUHJvcGVydHkubGluayggaGFuZGxlU3RhdGVDaGFuZ2UgKTtcclxuXHJcbiAgICB0aGlzLmRpc3Bvc2VMaXN0ZW5lcnMgPSAoKSA9PiB7XHJcbiAgICAgIGNoYWxsZW5nZS5jaGFsbGVuZ2VTdGF0ZVByb3BlcnR5LnVubGluayggaGFuZGxlU3RhdGVDaGFuZ2UgKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gRG8gYW4gaW5pdGlhbCBsYXlvdXQsIGJ1dCB0aGUgc3ViY2xhc3NlcyBjYW4gYW5kIHNob3VsZCBtb3ZlIHRoZVxyXG4gICAgLy8gYnV0dG9ucyBhcyBuZWVkZWQuXHJcbiAgICB0aGlzLnNldEJ1dHRvbkNlbnRlciggbGF5b3V0Qm91bmRzLndpZHRoICogMC43NSwgbGF5b3V0Qm91bmRzLmhlaWdodCAqIDAuOTIgKTtcclxuICAgIGZhY2VOb2RlLmNlbnRlclggPSBsYXlvdXRCb3VuZHMud2lkdGggLyAyO1xyXG4gICAgZmFjZU5vZGUuY2VudGVyWSA9IGxheW91dEJvdW5kcy5oZWlnaHQgLyAyO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICB0aGlzLmRpc3Bvc2VMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuY2hlY2tBbnN3ZXJCdXR0b24uZGlzcG9zZSgpO1xyXG4gICAgdGhpcy5uZXh0QnV0dG9uLmRpc3Bvc2UoKTtcclxuICAgIHRoaXMudHJ5QWdhaW5CdXR0b24uZGlzcG9zZSgpO1xyXG4gICAgdGhpcy5kaXNwbGF5Q29ycmVjdEFuc3dlckJ1dHRvbi5kaXNwb3NlKCk7XHJcbiAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgfVxyXG5cclxuICAvLyBGdW5jdGlvbiB0byBjbGVhciB0aGUgdXNlcidzIGFuc3dlciwgZ2VuZXJhbGx5IHVzZWQgd2hlblxyXG4gIC8vIGdpdmluZyB0aGUgdXNlciBhbm90aGVyIGNoYW5jZSB0byBhbnN3ZXIuICBNdXN0IGJlIGltcGxlbWVudGVkXHJcbiAgLy8gaW4gc3ViY2xhc3NlcyBpZiBhbnkgYWN0aW9uIGlzIGRlc2lyZWQuXHJcblxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIGNsZWFyIHRoZSB1c2VyJ3MgYW5zd2VyLCBnZW5lcmFsbHkgdXNlZCB3aGVuIGdpdmluZyB0aGUgdXNlciBhbm90aGVyIGNoYW5jZSB0byBhbnN3ZXIuICBNdXN0IGJlXHJcbiAgICogaW1wbGVtZW50ZWQgaW4gc3ViY2xhc3NlcyBpZiBhbnkgYWN0aW9uIGlzIGRlc2lyZWQuXHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG4gIGNsZWFyQW5zd2VyKCkge31cclxuXHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gZGlzcGxheSB0aGUgY29ycmVjdCBhbnN3ZXIuICBNdXN0IGJlIGltcGxlbWVudGVkIGluIHN1YmNsYXNzZXMuXHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG4gIGRpc3BsYXlDb3JyZWN0QW5zd2VyKCkge31cclxuXHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gY2hlY2sgdGhlIHVzZXIncyBzdWJtaXR0ZWQgYW5zd2VyLiAgTXVzdCBiZSBpbXBsZW1lbnRlZCBpbiBzdWJjbGFzc2VzLlxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBjaGVja0Fuc3dlcigpIHt9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZ1bmN0aW9uIHRvIHNldCB0aGUgcG9zaXRpb25zIG9mIGFsbCBidXR0b25zLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4XHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHlcclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgc2V0QnV0dG9uQ2VudGVyKCB4LCB5ICkge1xyXG4gICAgdGhpcy5idXR0b25zLmZvckVhY2goIGJ1dHRvbiA9PiB7XHJcbiAgICAgIGJ1dHRvbi5jZW50ZXJYID0geDtcclxuICAgICAgYnV0dG9uLmNlbnRlclkgPSB5O1xyXG4gICAgfSApO1xyXG4gIH1cclxufVxyXG5cclxuYnVpbGRBbkF0b20ucmVnaXN0ZXIoICdDaGFsbGVuZ2VWaWV3JywgQ2hhbGxlbmdlVmlldyApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2hhbGxlbmdlVmlldzsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxTQUFTLE1BQU0sa0NBQWtDO0FBQ3hELE9BQU9DLFFBQVEsTUFBTSx5Q0FBeUM7QUFDOUQsT0FBT0MsUUFBUSxNQUFNLHlDQUF5QztBQUM5RCxTQUFTQyxLQUFLLEVBQUVDLElBQUksRUFBRUMsSUFBSSxRQUFRLG1DQUFtQztBQUNyRSxPQUFPQyxjQUFjLE1BQU0sOENBQThDO0FBQ3pFLE9BQU9DLGVBQWUsTUFBTSx5Q0FBeUM7QUFDckUsT0FBT0MsWUFBWSxNQUFNLHNDQUFzQztBQUMvRCxPQUFPQyxXQUFXLE1BQU0sc0JBQXNCO0FBQzlDLE9BQU9DLGlCQUFpQixNQUFNLCtCQUErQjtBQUU3RCxNQUFNQyxXQUFXLEdBQUdILFlBQVksQ0FBQ0ksS0FBSztBQUN0QyxNQUFNQyxVQUFVLEdBQUdMLFlBQVksQ0FBQ00sSUFBSTtBQUNwQyxNQUFNQyxnQkFBZ0IsR0FBR1AsWUFBWSxDQUFDUSxVQUFVO0FBQ2hELE1BQU1DLGNBQWMsR0FBR1QsWUFBWSxDQUFDVSxRQUFROztBQUU1QztBQUNBLE1BQU1DLFdBQVcsR0FBRyxJQUFJakIsUUFBUSxDQUFFLEVBQUcsQ0FBQztBQUN0QyxNQUFNa0IsV0FBVyxHQUFHLElBQUlqQixLQUFLLENBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFJLENBQUM7QUFDNUMsTUFBTWtCLGtCQUFrQixHQUFHO0VBQUVDLElBQUksRUFBRSxJQUFJcEIsUUFBUSxDQUFFO0lBQUVxQixJQUFJLEVBQUUsRUFB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