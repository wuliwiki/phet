// Copyright 2013-2022, University of Colorado Boulder

/**
 * Base type for views of challenges where the user is asked to identify the
 * element on the periodic table and then choose whether it is an ion or a
 * neutral atom.
 *
 * @author John Blanco
 */

import StringProperty from '../../../../axon/js/StringProperty.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { LinearGradient, Node, Text } from '../../../../scenery/js/imports.js';
import NumberAtom from '../../../../shred/js/model/NumberAtom.js';
import PeriodicTableNode from '../../../../shred/js/view/PeriodicTableNode.js';
import AquaRadioButton from '../../../../sun/js/AquaRadioButton.js';
import buildAnAtom from '../../buildAnAtom.js';
import BuildAnAtomStrings from '../../BuildAnAtomStrings.js';
import ChallengeView from './ChallengeView.js';
const findTheElementString = BuildAnAtomStrings.findTheElement;
const ionString = BuildAnAtomStrings.ion;
const isItString = BuildAnAtomStrings.isIt;
const neutralAtomString = BuildAnAtomStrings.neutralAtom;

// constants
const TITLE_FONT = new PhetFont(30);
const INSET = 10;
const CELL_DIMENSION = 25;
const MAX_WIDTH = 100; // empirically determined for long strings

class ToElementChallengeView extends ChallengeView {
  /**
   * @param {CountsToElementChallenge} countsToElementChallenge
   * @param {Bounds2} layoutBounds
   * @param {Tandem} tandem
   */
  constructor(countsToElementChallenge, layoutBounds, tandem) {
    super(countsToElementChallenge, layoutBounds, tandem);

    // @private
    this.periodicTableAtom = new NumberAtom({
      tandem: tandem.createTandem('periodicTableAtom')
    });

    // TODO: Why not an enum?
    this.neutralOrIonProperty = new StringProperty('noSelection', {
      tandem: tandem.createTandem('neutralOrIonProperty')
    });

    // Periodic table
    this.periodicTable = new PeriodicTableNode(this.periodicTableAtom, {
      tandem: tandem.createTandem('periodicTable'),
      interactiveMax: 118,
      cellDimension: CELL_DIMENSION,
      enabledCellColor: new LinearGradient(0, 0, 0, CELL_DIMENSION).addColorStop(0, 'white').addColorStop(1, 'rgb( 240, 240, 240 )'),
      selectedCellColor: 'yellow',
      scale: 1.02
    });
    this.interactiveAnswerNode.addChild(this.periodicTable);

    // Challenge title
    const challengeTitle = new Text(findTheElementString, {
      font: TITLE_FONT,
      maxWidth: this.periodicTable.width
    });
    this.challengePresentationNode.addChild(challengeTitle);

    // Neutral atom versus ion question.
    const neutralVersusIonPrompt = new Text(isItString, {
      font: new PhetFont(24),
      maxWidth: MAX_WIDTH
    });
    const neutralAtomRadioButton = new AquaRadioButton(this.neutralOrIonProperty, 'neutral', new Text(neutralAtomString, {
      font: new PhetFont(18),
      maxWidth: MAX_WIDTH
    }), {
      radius: 8,
      tandem: tandem.createTandem('neutralAtomRadioButton')
    });
    const ionRadioButton = new AquaRadioButton(this.neutralOrIonProperty, 'ion', new Text(ionString, {
      font: new PhetFont(18),
      maxWidth: MAX_WIDTH
    }), {
      radius: 8,
      tandem: tandem.createTandem('ionRadioButton')
    });
    const neutralAtomVersusIonQuestion = new Node();
    neutralAtomVersusIonQuestion.addChild(neutralVersusIonPrompt);
    neutralAtomRadioButton.left = neutralVersusIonPrompt.right + 10;
    neutralAtomRadioButton.centerY = neutralVersusIonPrompt.centerY;
    neutralAtomVersusIonQuestion.addChild(neutralAtomRadioButton);
    ionRadioButton.left = neutralAtomVersusIonQuestion.right + 10;
    ionRadioButton.centerY = neutralVersusIonPrompt.centerY;
    neutralAtomVersusIonQuestion.addChild(ionRadioButton);
    this.interactiveAnswerNode.addChild(neutralAtomVersusIonQuestion);
    const updateNeutralAtomVersusIonQuestionVisibility = protonCount => {
      // Once the user has selected an element, make the ion question visible.
      neutralAtomVersusIonQuestion.visible = protonCount > 0;
    };
    this.periodicTableAtom.protonCountProperty.link(updateNeutralAtomVersusIonQuestionVisibility);

    // Don't enable the "check answer" button until the user has answered the
    // "neutral vs. ion" question.

    const updateCheckAnswerButton = neutralOrIon => {
      this.checkAnswerButton.enabled = neutralOrIon !== 'noSelection';
      this.checkAnswerButton.pickable = neutralOrIon !== 'noSelection';
    };
    this.neutralOrIonProperty.link(updateCheckAnswerButton);

    // @private called by dispose
    this.disposeToElementChallengeView = function () {
      this.neutralOrIonProperty.unlink(updateCheckAnswerButton);
      this.periodicTableAtom.protonCountProperty.unlink(updateNeutralAtomVersusIonQuestionVisibility);
      this.periodicTableAtom.dispose();
      this.periodicTable.dispose();
      neutralAtomRadioButton.dispose();
      ionRadioButton.dispose();
      this.neutralOrIonProperty.dispose();
    };

    //--------------------------- Layout -------------------------------------

    this.periodicTable.right = layoutBounds.width - INSET;
    this.periodicTable.centerY = layoutBounds.height * 0.55;
    const maxTitleWidth = this.periodicTable.width * 0.9;
    if (challengeTitle.width > maxTitleWidth) {
      challengeTitle.scale(maxTitleWidth / challengeTitle.width);
    }
    challengeTitle.centerX = this.periodicTable.centerX;
    challengeTitle.bottom = this.periodicTable.top - 30; // Offset empirically determined.

    neutralAtomVersusIonQuestion.centerX = this.periodicTable.centerX;
    neutralAtomVersusIonQuestion.top = this.periodicTable.bottom + 20;
  }

  // @public
  checkAnswer() {
    const submittedAtom = new NumberAtom({
      protonCount: this.periodicTableAtom.protonCountProperty.get(),
      neutronCount: this.challenge.answerAtom.neutronCountProperty.get(),
      electronCount: this.challenge.answerAtom.electronCountProperty.get()
    });
    this.challenge.checkAnswer(submittedAtom, this.neutralOrIonProperty.value);
  }

  // @public
  clearAnswer() {
    // This method can be called before the superconstructor has completed, so the existence of the items being cleared
    // must be checked.
    if (this.periodicTableAtom) {
      this.periodicTableAtom.protonCountProperty.reset();
      this.periodicTableAtom.neutronCountProperty.reset();
      this.periodicTableAtom.electronCountProperty.reset();
    }
    this.neutralOrIonProperty && this.neutralOrIonProperty.reset();
  }

  // @public
  displayCorrectAnswer() {
    this.periodicTableAtom.protonCountProperty.set(this.challenge.answerAtom.protonCountProperty.get());
    this.periodicTableAtom.neutronCountProperty.set(this.challenge.answerAtom.neutronCountProperty.get());
    this.periodicTableAtom.electronCountProperty.set(this.challenge.answerAtom.electronCountProperty.get());
    this.neutralOrIonProperty.value = this.challenge.answerAtom.chargeProperty.get() === 0 ? 'neutral' : 'ion';
  }

  // @public
  dispose() {
    this.disposeToElementChallengeView();
    super.dispose();
  }
}
buildAnAtom.register('ToElementChallengeView', ToElementChallengeView);
export default ToElementChallengeView;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTdHJpbmdQcm9wZXJ0eSIsIlBoZXRGb250IiwiTGluZWFyR3JhZGllbnQiLCJOb2RlIiwiVGV4dCIsIk51bWJlckF0b20iLCJQZXJpb2RpY1RhYmxlTm9kZSIsIkFxdWFSYWRpb0J1dHRvbiIsImJ1aWxkQW5BdG9tIiwiQnVpbGRBbkF0b21TdHJpbmdzIiwiQ2hhbGxlbmdlVmlldyIsImZpbmRUaGVFbGVtZW50U3RyaW5nIiwiZmluZFRoZUVsZW1lbnQiLCJpb25TdHJpbmciLCJpb24iLCJpc0l0U3RyaW5nIiwiaXNJdCIsIm5ldXRyYWxBdG9tU3RyaW5nIiwibmV1dHJhbEF0b20iLCJUSVRMRV9GT05UIiwiSU5TRVQiLCJDRUxMX0RJTUVOU0lPTiIsIk1BWF9XSURUSCIsIlRvRWxlbWVudENoYWxsZW5nZVZpZXciLCJjb25zdHJ1Y3RvciIsImNvdW50c1RvRWxlbWVudENoYWxsZW5nZSIsImxheW91dEJvdW5kcyIsInRhbmRlbSIsInBlcmlvZGljVGFibGVBdG9tIiwiY3JlYXRlVGFuZGVtIiwibmV1dHJhbE9ySW9uUHJvcGVydHkiLCJwZXJpb2RpY1RhYmxlIiwiaW50ZXJhY3RpdmVNYXgiLCJjZWxsRGltZW5zaW9uIiwiZW5hYmxlZENlbGxDb2xvciIsImFkZENvbG9yU3RvcCIsInNlbGVjdGVkQ2VsbENvbG9yIiwic2NhbGUiLCJpbnRlcmFjdGl2ZUFuc3dlck5vZGUiLCJhZGRDaGlsZCIsImNoYWxsZW5nZVRpdGxlIiwiZm9udCIsIm1heFdpZHRoIiwid2lkdGgiLCJjaGFsbGVuZ2VQcmVzZW50YXRpb25Ob2RlIiwibmV1dHJhbFZlcnN1c0lvblByb21wdCIsIm5ldXRyYWxBdG9tUmFkaW9CdXR0b24iLCJyYWRpdXMiLCJpb25SYWRpb0J1dHRvbiIsIm5ldXRyYWxBdG9tVmVyc3VzSW9uUXVlc3Rpb24iLCJsZWZ0IiwicmlnaHQiLCJjZW50ZXJZIiwidXBkYXRlTmV1dHJhbEF0b21WZXJzdXNJb25RdWVzdGlvblZpc2liaWxpdHkiLCJwcm90b25Db3VudCIsInZpc2libGUiLCJwcm90b25Db3VudFByb3BlcnR5IiwibGluayIsInVwZGF0ZUNoZWNrQW5zd2VyQnV0dG9uIiwibmV1dHJhbE9ySW9uIiwiY2hlY2tBbnN3ZXJCdXR0b24iLCJlbmFibGVkIiwicGlja2FibGUiLCJkaXNwb3NlVG9FbGVtZW50Q2hhbGxlbmdlVmlldyIsInVubGluayIsImRpc3Bvc2UiLCJoZWlnaHQiLCJtYXhUaXRsZVdpZHRoIiwiY2VudGVyWCIsImJvdHRvbSIsInRvcCIsImNoZWNrQW5zd2VyIiwic3VibWl0dGVkQXRvbSIsImdldCIsIm5ldXRyb25Db3VudCIsImNoYWxsZW5nZSIsImFuc3dlckF0b20iLCJuZXV0cm9uQ291bnRQcm9wZXJ0eSIsImVsZWN0cm9uQ291bnQiLCJlbGVjdHJvbkNvdW50UHJvcGVydHkiLCJ2YWx1ZSIsImNsZWFyQW5zd2VyIiwicmVzZXQiLCJkaXNwbGF5Q29ycmVjdEFuc3dlciIsInNldCIsImNoYXJnZVByb3BlcnR5IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJUb0VsZW1lbnRDaGFsbGVuZ2VWaWV3LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIEJhc2UgdHlwZSBmb3Igdmlld3Mgb2YgY2hhbGxlbmdlcyB3aGVyZSB0aGUgdXNlciBpcyBhc2tlZCB0byBpZGVudGlmeSB0aGVcclxuICogZWxlbWVudCBvbiB0aGUgcGVyaW9kaWMgdGFibGUgYW5kIHRoZW4gY2hvb3NlIHdoZXRoZXIgaXQgaXMgYW4gaW9uIG9yIGFcclxuICogbmV1dHJhbCBhdG9tLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvaG4gQmxhbmNvXHJcbiAqL1xyXG5cclxuaW1wb3J0IFN0cmluZ1Byb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvU3RyaW5nUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgUGhldEZvbnQgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1BoZXRGb250LmpzJztcclxuaW1wb3J0IHsgTGluZWFyR3JhZGllbnQsIE5vZGUsIFRleHQgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgTnVtYmVyQXRvbSBmcm9tICcuLi8uLi8uLi8uLi9zaHJlZC9qcy9tb2RlbC9OdW1iZXJBdG9tLmpzJztcclxuaW1wb3J0IFBlcmlvZGljVGFibGVOb2RlIGZyb20gJy4uLy4uLy4uLy4uL3NocmVkL2pzL3ZpZXcvUGVyaW9kaWNUYWJsZU5vZGUuanMnO1xyXG5pbXBvcnQgQXF1YVJhZGlvQnV0dG9uIGZyb20gJy4uLy4uLy4uLy4uL3N1bi9qcy9BcXVhUmFkaW9CdXR0b24uanMnO1xyXG5pbXBvcnQgYnVpbGRBbkF0b20gZnJvbSAnLi4vLi4vYnVpbGRBbkF0b20uanMnO1xyXG5pbXBvcnQgQnVpbGRBbkF0b21TdHJpbmdzIGZyb20gJy4uLy4uL0J1aWxkQW5BdG9tU3RyaW5ncy5qcyc7XHJcbmltcG9ydCBDaGFsbGVuZ2VWaWV3IGZyb20gJy4vQ2hhbGxlbmdlVmlldy5qcyc7XHJcblxyXG5jb25zdCBmaW5kVGhlRWxlbWVudFN0cmluZyA9IEJ1aWxkQW5BdG9tU3RyaW5ncy5maW5kVGhlRWxlbWVudDtcclxuY29uc3QgaW9uU3RyaW5nID0gQnVpbGRBbkF0b21TdHJpbmdzLmlvbjtcclxuY29uc3QgaXNJdFN0cmluZyA9IEJ1aWxkQW5BdG9tU3RyaW5ncy5pc0l0O1xyXG5jb25zdCBuZXV0cmFsQXRvbVN0cmluZyA9IEJ1aWxkQW5BdG9tU3RyaW5ncy5uZXV0cmFsQXRvbTtcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBUSVRMRV9GT05UID0gbmV3IFBoZXRGb250KCAzMCApO1xyXG5jb25zdCBJTlNFVCA9IDEwO1xyXG5jb25zdCBDRUxMX0RJTUVOU0lPTiA9IDI1O1xyXG5jb25zdCBNQVhfV0lEVEggPSAxMDA7IC8vIGVtcGlyaWNhbGx5IGRldGVybWluZWQgZm9yIGxvbmcgc3RyaW5nc1xyXG5cclxuY2xhc3MgVG9FbGVtZW50Q2hhbGxlbmdlVmlldyBleHRlbmRzIENoYWxsZW5nZVZpZXcge1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge0NvdW50c1RvRWxlbWVudENoYWxsZW5nZX0gY291bnRzVG9FbGVtZW50Q2hhbGxlbmdlXHJcbiAgICogQHBhcmFtIHtCb3VuZHMyfSBsYXlvdXRCb3VuZHNcclxuICAgKiBAcGFyYW0ge1RhbmRlbX0gdGFuZGVtXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIGNvdW50c1RvRWxlbWVudENoYWxsZW5nZSwgbGF5b3V0Qm91bmRzLCB0YW5kZW0gKSB7XHJcblxyXG4gICAgc3VwZXIoIGNvdW50c1RvRWxlbWVudENoYWxsZW5nZSwgbGF5b3V0Qm91bmRzLCB0YW5kZW0gKTtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZVxyXG4gICAgdGhpcy5wZXJpb2RpY1RhYmxlQXRvbSA9IG5ldyBOdW1iZXJBdG9tKCB7IHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3BlcmlvZGljVGFibGVBdG9tJyApIH0gKTtcclxuXHJcbiAgICAvLyBUT0RPOiBXaHkgbm90IGFuIGVudW0/XHJcbiAgICB0aGlzLm5ldXRyYWxPcklvblByb3BlcnR5ID0gbmV3IFN0cmluZ1Byb3BlcnR5KCAnbm9TZWxlY3Rpb24nLCB7XHJcbiAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ25ldXRyYWxPcklvblByb3BlcnR5JyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gUGVyaW9kaWMgdGFibGVcclxuICAgIHRoaXMucGVyaW9kaWNUYWJsZSA9IG5ldyBQZXJpb2RpY1RhYmxlTm9kZSggdGhpcy5wZXJpb2RpY1RhYmxlQXRvbSwge1xyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdwZXJpb2RpY1RhYmxlJyApLFxyXG4gICAgICBpbnRlcmFjdGl2ZU1heDogMTE4LFxyXG4gICAgICBjZWxsRGltZW5zaW9uOiBDRUxMX0RJTUVOU0lPTixcclxuICAgICAgZW5hYmxlZENlbGxDb2xvcjogbmV3IExpbmVhckdyYWRpZW50KCAwLCAwLCAwLCBDRUxMX0RJTUVOU0lPTiApLmFkZENvbG9yU3RvcCggMCwgJ3doaXRlJyApLmFkZENvbG9yU3RvcCggMSwgJ3JnYiggMjQwLCAyNDAsIDI0MCApJyApLFxyXG4gICAgICBzZWxlY3RlZENlbGxDb2xvcjogJ3llbGxvdycsXHJcbiAgICAgIHNjYWxlOiAxLjAyXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmludGVyYWN0aXZlQW5zd2VyTm9kZS5hZGRDaGlsZCggdGhpcy5wZXJpb2RpY1RhYmxlICk7XHJcblxyXG4gICAgLy8gQ2hhbGxlbmdlIHRpdGxlXHJcbiAgICBjb25zdCBjaGFsbGVuZ2VUaXRsZSA9IG5ldyBUZXh0KCBmaW5kVGhlRWxlbWVudFN0cmluZywge1xyXG4gICAgICBmb250OiBUSVRMRV9GT05ULFxyXG4gICAgICBtYXhXaWR0aDogdGhpcy5wZXJpb2RpY1RhYmxlLndpZHRoXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmNoYWxsZW5nZVByZXNlbnRhdGlvbk5vZGUuYWRkQ2hpbGQoIGNoYWxsZW5nZVRpdGxlICk7XHJcblxyXG4gICAgLy8gTmV1dHJhbCBhdG9tIHZlcnN1cyBpb24gcXVlc3Rpb24uXHJcbiAgICBjb25zdCBuZXV0cmFsVmVyc3VzSW9uUHJvbXB0ID0gbmV3IFRleHQoIGlzSXRTdHJpbmcsIHtcclxuICAgICAgZm9udDogbmV3IFBoZXRGb250KCAyNCApLFxyXG4gICAgICBtYXhXaWR0aDogTUFYX1dJRFRIXHJcbiAgICB9ICk7XHJcbiAgICBjb25zdCBuZXV0cmFsQXRvbVJhZGlvQnV0dG9uID0gbmV3IEFxdWFSYWRpb0J1dHRvbiggdGhpcy5uZXV0cmFsT3JJb25Qcm9wZXJ0eSwgJ25ldXRyYWwnLCBuZXcgVGV4dCggbmV1dHJhbEF0b21TdHJpbmcsIHtcclxuICAgICAgZm9udDogbmV3IFBoZXRGb250KCAxOCApLFxyXG4gICAgICBtYXhXaWR0aDogTUFYX1dJRFRIXHJcbiAgICB9ICksIHtcclxuICAgICAgcmFkaXVzOiA4LFxyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICduZXV0cmFsQXRvbVJhZGlvQnV0dG9uJyApXHJcbiAgICB9ICk7XHJcbiAgICBjb25zdCBpb25SYWRpb0J1dHRvbiA9IG5ldyBBcXVhUmFkaW9CdXR0b24oIHRoaXMubmV1dHJhbE9ySW9uUHJvcGVydHksICdpb24nLCBuZXcgVGV4dCggaW9uU3RyaW5nLCB7XHJcbiAgICAgIGZvbnQ6IG5ldyBQaGV0Rm9udCggMTggKSxcclxuICAgICAgbWF4V2lkdGg6IE1BWF9XSURUSFxyXG4gICAgfSApLCB7XHJcbiAgICAgIHJhZGl1czogOCxcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnaW9uUmFkaW9CdXR0b24nIClcclxuICAgIH0gKTtcclxuICAgIGNvbnN0IG5ldXRyYWxBdG9tVmVyc3VzSW9uUXVlc3Rpb24gPSBuZXcgTm9kZSgpO1xyXG4gICAgbmV1dHJhbEF0b21WZXJzdXNJb25RdWVzdGlvbi5hZGRDaGlsZCggbmV1dHJhbFZlcnN1c0lvblByb21wdCApO1xyXG4gICAgbmV1dHJhbEF0b21SYWRpb0J1dHRvbi5sZWZ0ID0gbmV1dHJhbFZlcnN1c0lvblByb21wdC5yaWdodCArIDEwO1xyXG4gICAgbmV1dHJhbEF0b21SYWRpb0J1dHRvbi5jZW50ZXJZID0gbmV1dHJhbFZlcnN1c0lvblByb21wdC5jZW50ZXJZO1xyXG4gICAgbmV1dHJhbEF0b21WZXJzdXNJb25RdWVzdGlvbi5hZGRDaGlsZCggbmV1dHJhbEF0b21SYWRpb0J1dHRvbiApO1xyXG4gICAgaW9uUmFkaW9CdXR0b24ubGVmdCA9IG5ldXRyYWxBdG9tVmVyc3VzSW9uUXVlc3Rpb24ucmlnaHQgKyAxMDtcclxuICAgIGlvblJhZGlvQnV0dG9uLmNlbnRlclkgPSBuZXV0cmFsVmVyc3VzSW9uUHJvbXB0LmNlbnRlclk7XHJcbiAgICBuZXV0cmFsQXRvbVZlcnN1c0lvblF1ZXN0aW9uLmFkZENoaWxkKCBpb25SYWRpb0J1dHRvbiApO1xyXG4gICAgdGhpcy5pbnRlcmFjdGl2ZUFuc3dlck5vZGUuYWRkQ2hpbGQoIG5ldXRyYWxBdG9tVmVyc3VzSW9uUXVlc3Rpb24gKTtcclxuXHJcbiAgICBjb25zdCB1cGRhdGVOZXV0cmFsQXRvbVZlcnN1c0lvblF1ZXN0aW9uVmlzaWJpbGl0eSA9IHByb3RvbkNvdW50ID0+IHtcclxuICAgICAgLy8gT25jZSB0aGUgdXNlciBoYXMgc2VsZWN0ZWQgYW4gZWxlbWVudCwgbWFrZSB0aGUgaW9uIHF1ZXN0aW9uIHZpc2libGUuXHJcbiAgICAgIG5ldXRyYWxBdG9tVmVyc3VzSW9uUXVlc3Rpb24udmlzaWJsZSA9IHByb3RvbkNvdW50ID4gMDtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5wZXJpb2RpY1RhYmxlQXRvbS5wcm90b25Db3VudFByb3BlcnR5LmxpbmsoIHVwZGF0ZU5ldXRyYWxBdG9tVmVyc3VzSW9uUXVlc3Rpb25WaXNpYmlsaXR5ICk7XHJcblxyXG4gICAgLy8gRG9uJ3QgZW5hYmxlIHRoZSBcImNoZWNrIGFuc3dlclwiIGJ1dHRvbiB1bnRpbCB0aGUgdXNlciBoYXMgYW5zd2VyZWQgdGhlXHJcbiAgICAvLyBcIm5ldXRyYWwgdnMuIGlvblwiIHF1ZXN0aW9uLlxyXG5cclxuICAgIGNvbnN0IHVwZGF0ZUNoZWNrQW5zd2VyQnV0dG9uID0gbmV1dHJhbE9ySW9uID0+IHtcclxuICAgICAgdGhpcy5jaGVja0Fuc3dlckJ1dHRvbi5lbmFibGVkID0gbmV1dHJhbE9ySW9uICE9PSAnbm9TZWxlY3Rpb24nO1xyXG4gICAgICB0aGlzLmNoZWNrQW5zd2VyQnV0dG9uLnBpY2thYmxlID0gbmV1dHJhbE9ySW9uICE9PSAnbm9TZWxlY3Rpb24nO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLm5ldXRyYWxPcklvblByb3BlcnR5LmxpbmsoIHVwZGF0ZUNoZWNrQW5zd2VyQnV0dG9uICk7XHJcblxyXG4gICAgLy8gQHByaXZhdGUgY2FsbGVkIGJ5IGRpc3Bvc2VcclxuICAgIHRoaXMuZGlzcG9zZVRvRWxlbWVudENoYWxsZW5nZVZpZXcgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdGhpcy5uZXV0cmFsT3JJb25Qcm9wZXJ0eS51bmxpbmsoIHVwZGF0ZUNoZWNrQW5zd2VyQnV0dG9uICk7XHJcbiAgICAgIHRoaXMucGVyaW9kaWNUYWJsZUF0b20ucHJvdG9uQ291bnRQcm9wZXJ0eS51bmxpbmsoIHVwZGF0ZU5ldXRyYWxBdG9tVmVyc3VzSW9uUXVlc3Rpb25WaXNpYmlsaXR5ICk7XHJcbiAgICAgIHRoaXMucGVyaW9kaWNUYWJsZUF0b20uZGlzcG9zZSgpO1xyXG4gICAgICB0aGlzLnBlcmlvZGljVGFibGUuZGlzcG9zZSgpO1xyXG4gICAgICBuZXV0cmFsQXRvbVJhZGlvQnV0dG9uLmRpc3Bvc2UoKTtcclxuICAgICAgaW9uUmFkaW9CdXR0b24uZGlzcG9zZSgpO1xyXG4gICAgICB0aGlzLm5ldXRyYWxPcklvblByb3BlcnR5LmRpc3Bvc2UoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gTGF5b3V0IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICB0aGlzLnBlcmlvZGljVGFibGUucmlnaHQgPSBsYXlvdXRCb3VuZHMud2lkdGggLSBJTlNFVDtcclxuICAgIHRoaXMucGVyaW9kaWNUYWJsZS5jZW50ZXJZID0gbGF5b3V0Qm91bmRzLmhlaWdodCAqIDAuNTU7XHJcblxyXG4gICAgY29uc3QgbWF4VGl0bGVXaWR0aCA9IHRoaXMucGVyaW9kaWNUYWJsZS53aWR0aCAqIDAuOTtcclxuICAgIGlmICggY2hhbGxlbmdlVGl0bGUud2lkdGggPiBtYXhUaXRsZVdpZHRoICkge1xyXG4gICAgICBjaGFsbGVuZ2VUaXRsZS5zY2FsZSggbWF4VGl0bGVXaWR0aCAvIGNoYWxsZW5nZVRpdGxlLndpZHRoICk7XHJcbiAgICB9XHJcbiAgICBjaGFsbGVuZ2VUaXRsZS5jZW50ZXJYID0gdGhpcy5wZXJpb2RpY1RhYmxlLmNlbnRlclg7XHJcbiAgICBjaGFsbGVuZ2VUaXRsZS5ib3R0b20gPSB0aGlzLnBlcmlvZGljVGFibGUudG9wIC0gMzA7IC8vIE9mZnNldCBlbXBpcmljYWxseSBkZXRlcm1pbmVkLlxyXG5cclxuICAgIG5ldXRyYWxBdG9tVmVyc3VzSW9uUXVlc3Rpb24uY2VudGVyWCA9IHRoaXMucGVyaW9kaWNUYWJsZS5jZW50ZXJYO1xyXG4gICAgbmV1dHJhbEF0b21WZXJzdXNJb25RdWVzdGlvbi50b3AgPSB0aGlzLnBlcmlvZGljVGFibGUuYm90dG9tICsgMjA7XHJcbiAgfVxyXG5cclxuICAvLyBAcHVibGljXHJcbiAgY2hlY2tBbnN3ZXIoKSB7XHJcbiAgICBjb25zdCBzdWJtaXR0ZWRBdG9tID0gbmV3IE51bWJlckF0b20oIHtcclxuICAgICAgcHJvdG9uQ291bnQ6IHRoaXMucGVyaW9kaWNUYWJsZUF0b20ucHJvdG9uQ291bnRQcm9wZXJ0eS5nZXQoKSxcclxuICAgICAgbmV1dHJvbkNvdW50OiB0aGlzLmNoYWxsZW5nZS5hbnN3ZXJBdG9tLm5ldXRyb25Db3VudFByb3BlcnR5LmdldCgpLFxyXG4gICAgICBlbGVjdHJvbkNvdW50OiB0aGlzLmNoYWxsZW5nZS5hbnN3ZXJBdG9tLmVsZWN0cm9uQ291bnRQcm9wZXJ0eS5nZXQoKVxyXG4gICAgfSApO1xyXG4gICAgdGhpcy5jaGFsbGVuZ2UuY2hlY2tBbnN3ZXIoIHN1Ym1pdHRlZEF0b20sIHRoaXMubmV1dHJhbE9ySW9uUHJvcGVydHkudmFsdWUgKTtcclxuICB9XHJcblxyXG4gIC8vIEBwdWJsaWNcclxuICBjbGVhckFuc3dlcigpIHtcclxuXHJcbiAgICAvLyBUaGlzIG1ldGhvZCBjYW4gYmUgY2FsbGVkIGJlZm9yZSB0aGUgc3VwZXJjb25zdHJ1Y3RvciBoYXMgY29tcGxldGVkLCBzbyB0aGUgZXhpc3RlbmNlIG9mIHRoZSBpdGVtcyBiZWluZyBjbGVhcmVkXHJcbiAgICAvLyBtdXN0IGJlIGNoZWNrZWQuXHJcbiAgICBpZiAoIHRoaXMucGVyaW9kaWNUYWJsZUF0b20gKSB7XHJcbiAgICAgIHRoaXMucGVyaW9kaWNUYWJsZUF0b20ucHJvdG9uQ291bnRQcm9wZXJ0eS5yZXNldCgpO1xyXG4gICAgICB0aGlzLnBlcmlvZGljVGFibGVBdG9tLm5ldXRyb25Db3VudFByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICAgIHRoaXMucGVyaW9kaWNUYWJsZUF0b20uZWxlY3Ryb25Db3VudFByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLm5ldXRyYWxPcklvblByb3BlcnR5ICYmIHRoaXMubmV1dHJhbE9ySW9uUHJvcGVydHkucmVzZXQoKTtcclxuICB9XHJcblxyXG4gIC8vIEBwdWJsaWNcclxuICBkaXNwbGF5Q29ycmVjdEFuc3dlcigpIHtcclxuICAgIHRoaXMucGVyaW9kaWNUYWJsZUF0b20ucHJvdG9uQ291bnRQcm9wZXJ0eS5zZXQoIHRoaXMuY2hhbGxlbmdlLmFuc3dlckF0b20ucHJvdG9uQ291bnRQcm9wZXJ0eS5nZXQoKSApO1xyXG4gICAgdGhpcy5wZXJpb2RpY1RhYmxlQXRvbS5uZXV0cm9uQ291bnRQcm9wZXJ0eS5zZXQoIHRoaXMuY2hhbGxlbmdlLmFuc3dlckF0b20ubmV1dHJvbkNvdW50UHJvcGVydHkuZ2V0KCkgKTtcclxuICAgIHRoaXMucGVyaW9kaWNUYWJsZUF0b20uZWxlY3Ryb25Db3VudFByb3BlcnR5LnNldCggdGhpcy5jaGFsbGVuZ2UuYW5zd2VyQXRvbS5lbGVjdHJvbkNvdW50UHJvcGVydHkuZ2V0KCkgKTtcclxuICAgIHRoaXMubmV1dHJhbE9ySW9uUHJvcGVydHkudmFsdWUgPSB0aGlzLmNoYWxsZW5nZS5hbnN3ZXJBdG9tLmNoYXJnZVByb3BlcnR5LmdldCgpID09PSAwID8gJ25ldXRyYWwnIDogJ2lvbic7XHJcbiAgfVxyXG5cclxuICAvLyBAcHVibGljXHJcbiAgZGlzcG9zZSgpIHtcclxuICAgIHRoaXMuZGlzcG9zZVRvRWxlbWVudENoYWxsZW5nZVZpZXcoKTtcclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcbn1cclxuXHJcbmJ1aWxkQW5BdG9tLnJlZ2lzdGVyKCAnVG9FbGVtZW50Q2hhbGxlbmdlVmlldycsIFRvRWxlbWVudENoYWxsZW5nZVZpZXcgKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFRvRWxlbWVudENoYWxsZW5nZVZpZXc7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxjQUFjLE1BQU0sdUNBQXVDO0FBQ2xFLE9BQU9DLFFBQVEsTUFBTSx5Q0FBeUM7QUFDOUQsU0FBU0MsY0FBYyxFQUFFQyxJQUFJLEVBQUVDLElBQUksUUFBUSxtQ0FBbUM7QUFDOUUsT0FBT0MsVUFBVSxNQUFNLDBDQUEwQztBQUNqRSxPQUFPQyxpQkFBaUIsTUFBTSxnREFBZ0Q7QUFDOUUsT0FBT0MsZUFBZSxNQUFNLHVDQUF1QztBQUNuRSxPQUFPQyxXQUFXLE1BQU0sc0JBQXNCO0FBQzlDLE9BQU9DLGtCQUFrQixNQUFNLDZCQUE2QjtBQUM1RCxPQUFPQyxhQUFhLE1BQU0sb0JBQW9CO0FBRTlDLE1BQU1DLG9CQUFvQixHQUFHRixrQkFBa0IsQ0FBQ0csY0FBYztBQUM5RCxNQUFNQyxTQUFTLEdBQUdKLGtCQUFrQixDQUFDSyxHQUFHO0FBQ3hDLE1BQU1DLFVBQVUsR0FBR04sa0JBQWtCLENBQUNPLElBQUk7QUFDMUMsTUFBTUMsaUJBQWlCLEdBQUdSLGtCQUFrQixDQUFDUyxXQUFXOztBQUV4RDtBQUNBLE1BQU1DLFVBQVUsR0FBRyxJQUFJbEIsUUFBUSxDQUFFLEVBQUcsQ0FBQztBQUNyQyxNQUFNbUIsS0FBSyxHQUFHLEVBQUU7QUFDaEIsTUFBTUMsY0FBYyxHQUFHLEVBQUU7QUFDekIsTUFBTUMsU0FBUyxHQUFHLEdBQUcsQ0FBQyxDQUFDOztBQUV2QixNQUFNQyxzQkFBc0IsU0FBU2IsYUFBYSxDQUFDO0VBRWpEO0FBQ0Y7QUFDQTtBQUNBO0FB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