// Copyright 2017-2021, University of Colorado Boulder

/**
 * Type that generates a list of challenges for use in a sub-game.
 *
 * @author John Blanco
 * @author Sam Reid (PhET Interactive Simulations)
 */

import dotRandom from '../../../../dot/js/dotRandom.js';
import Tandem from '../../../../tandem/js/Tandem.js';
import buildAnAtom from '../../buildAnAtom.js';
import AtomValuePool from './AtomValuePool.js';
import CountsToChargeChallenge from './CountsToChargeChallenge.js';
import CountsToElementChallenge from './CountsToElementChallenge.js';
import CountsToMassNumberChallenge from './CountsToMassNumberChallenge.js';
import CountsToSymbolChallenge from './CountsToSymbolChallenge.js';
import SchematicToChargeChallenge from './SchematicToChargeChallenge.js';
import SchematicToElementChallenge from './SchematicToElementChallenge.js';
import SchematicToMassNumberChallenge from './SchematicToMassNumberChallenge.js';
import SchematicToSymbolChallenge from './SchematicToSymbolChallenge.js';
import SymbolToCountsChallenge from './SymbolToCountsChallenge.js';
import SymbolToSchematicChallenge from './SymbolToSchematicChallenge.js';

// constants
const MAX_PROTON_NUMBER_FOR_SCHEMATIC_PROBS = 3; // Disallow schematic (Bohr model) probs above this size.

// No constructor, not meant to be instantiated.
const ChallengeSetFactory = {};

/**
 * Generate a challenge set based on the specified criteria.
 *
 * @param {number} level
 * @param {number} numChallenges
 * @param {GameModel} model
 * @param {string[][]} allowedChallengeTypesByLevel
 * @param {Tandem} tandem
 */
ChallengeSetFactory.generate = function (level, numChallenges, model, allowedChallengeTypesByLevel, tandem) {
  this.challenges = [];
  this._previousChallengeType = null;
  this._availableChallengeTypes = [];

  // Create a pool of all atom values that can be used to create challenges
  // for the challenge set.
  const atomValueList = new AtomValuePool(level);

  // Now add challenges to the challenge set based on the atom values and the
  // challenge types associated with this level.
  for (let i = 0; i < numChallenges; i++) {
    const challenge = this._generateChallenge(level, atomValueList, model, allowedChallengeTypesByLevel, Tandem.OPT_OUT);
    if (challenge !== null) {
      this.challenges.push(challenge);
    }
  }
  return this.challenges;
};

/**
 * Generate a single challenge given the level and a pool of atom values that
 * can be used for the challenge.
 *
 * @param {number} level
 * @param {AtomValuePool} availableAtomValues
 * @param {GameModel} model
 * @param {String[][]} allowedChallengeTypesByLevel
 * @param {Tandem} tandem
 * @return
 */
ChallengeSetFactory._generateChallenge = function (level, availableAtomValues, model, allowedChallengeTypesByLevel, tandem) {
  if (this._availableChallengeTypes.length === 0) {
    // Reload the list of available challenges with all possible challenge
    // types for the current level.
    this._availableChallengeTypes = allowedChallengeTypesByLevel[level].slice();
  }

  // Randomly pick a challenge type, but make sure that it isn't the same
  // as the previous challenge type.
  let index = Math.floor(dotRandom.nextDouble() * this._availableChallengeTypes.length);
  if (this._previousChallengeType !== null && this._availableChallengeTypes.get(index) === this._previousChallengeType) {
    // This is the same as the previous prob type, so choose a different one.
    index = (index + 1) % this._availableChallengeTypes.length;
  }
  const challengeType = this._availableChallengeTypes[index];
  this.previousChallengeType = challengeType;

  // Remove the chosen type from the list.  By doing this, we present
  // the user with all different challenge types before starting again.
  this._availableChallengeTypes = _.without(this._availableChallengeTypes, challengeType);

  // Pick an atom value from the list of those remaining.  This is where
  // constraints between challenge types and atom values are handled.
  let minProtonCount = 0;
  let maxProtonCount = Number.POSITIVE_INFINITY;
  let requireCharged = false;
  if (this._isSchematicProbType(challengeType)) {
    maxProtonCount = MAX_PROTON_NUMBER_FOR_SCHEMATIC_PROBS;
  } else {
    minProtonCount = MAX_PROTON_NUMBER_FOR_SCHEMATIC_PROBS + 1;
  }
  if (this._isChargeProbType(challengeType)) {
    // If the challenge is asking about the charge, at least 50% of the
    // time we want a charged atom.
    requireCharged = dotRandom.nextBoolean();
  }
  const atomValue = availableAtomValues.getRandomAtomValue(minProtonCount, maxProtonCount, requireCharged);
  availableAtomValues.markAtomAsUsed(atomValue);
  return this.createChallenge(model, challengeType, atomValue, tandem);
};

/**
 * Create a single challenge given a challenge type (e.g. Schematic to Element) and an atom value that defines that
 * atom configuration.
 *
 * @param {GameModel} model
 * @param {string} challengeType // TODO: change to enum
 * @param {NumberAtom} atomValue
 * @param {Tandem} tandem
 * @returns {BAAGameChallenge}
 * @public
 */
ChallengeSetFactory.createChallenge = (model, challengeType, atomValue, tandem) => {
  let challenge = null;
  switch (challengeType) {
    case 'counts-to-element':
      challenge = new CountsToElementChallenge(model, atomValue, challengeType, tandem);
      break;
    case 'counts-to-charge':
      challenge = new CountsToChargeChallenge(model, atomValue, challengeType, tandem);
      break;
    case 'counts-to-mass':
      challenge = new CountsToMassNumberChallenge(model, atomValue, challengeType, tandem);
      break;
    case 'counts-to-symbol-all':
      challenge = new CountsToSymbolChallenge(model, atomValue, challengeType, tandem, true, true, true);
      break;
    case 'counts-to-symbol-charge':
      challenge = new CountsToSymbolChallenge(model, atomValue, challengeType, tandem, false, false, true);
      break;
    case 'counts-to-symbol-mass':
      challenge = new CountsToSymbolChallenge(model, atomValue, challengeType, tandem, false, true, false);
      break;
    case 'counts-to-symbol-proton-count':
      challenge = new CountsToSymbolChallenge(model, atomValue, challengeType, tandem, true, false, false);
      break;
    case 'schematic-to-element':
      challenge = new SchematicToElementChallenge(model, atomValue, challengeType, tandem);
      break;
    case 'schematic-to-charge':
      challenge = new SchematicToChargeChallenge(model, atomValue, challengeType, tandem);
      break;
    case 'schematic-to-mass':
      challenge = new SchematicToMassNumberChallenge(model, atomValue, challengeType, tandem);
      break;
    case 'schematic-to-symbol-all':
      challenge = new SchematicToSymbolChallenge(model, atomValue, challengeType, tandem, true, true, true);
      break;
    case 'schematic-to-symbol-charge':
      challenge = new SchematicToSymbolChallenge(model, atomValue, challengeType, tandem, false, false, true);
      break;
    case 'schematic-to-symbol-mass-number':
      challenge = new SchematicToSymbolChallenge(model, atomValue, challengeType, tandem, false, true, false);
      break;
    case 'schematic-to-symbol-proton-count':
      challenge = new SchematicToSymbolChallenge(model, atomValue, challengeType, tandem, true, false, false);
      break;
    case 'symbol-to-counts':
      challenge = new SymbolToCountsChallenge(model, atomValue, challengeType, tandem);
      break;
    case 'symbol-to-schematic':
      challenge = new SymbolToSchematicChallenge(model, atomValue, challengeType, tandem);
      break;
    default:
      throw new Error(`Error: Request to create unknown challenge type, type = ${challengeType}`);
  }
  return challenge;
};

/**
 * Helper function to determine whether a given challenge type has a
 * schematic atom representation on either either side of the challenge.
 *
 * @param challengeType
 * @return
 */
ChallengeSetFactory._isSchematicProbType = challengeType => challengeType === 'schematic-to-element' || challengeType === 'schematic-to-charge' || challengeType === 'schematic-to-mass' || challengeType === 'schematic-to-symbol-all' || challengeType === 'schematic-to-symbol-proton-count' || challengeType === 'schematic-to-symbol-charge' || challengeType === 'schematic-to-symbol-mass-number' || challengeType === 'symbol-to-schematic';

/**
 * Helper function to determine whether a given challenge is requesting an
 * answer about an atom's charge on the right side of the challenge.
 *
 * @param challengeType
 * @return
 */
ChallengeSetFactory._isChargeProbType = challengeType => challengeType === 'schematic-to-charge' || challengeType === 'counts-to-charge' || challengeType === 'counts-to-symbol-charge' || challengeType === 'schematic-to-symbol-charge';
buildAnAtom.register('ChallengeSetFactory', ChallengeSetFactory);
export default ChallengeSetFactory;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3RSYW5kb20iLCJUYW5kZW0iLCJidWlsZEFuQXRvbSIsIkF0b21WYWx1ZVBvb2wiLCJDb3VudHNUb0NoYXJnZUNoYWxsZW5nZSIsIkNvdW50c1RvRWxlbWVudENoYWxsZW5nZSIsIkNvdW50c1RvTWFzc051bWJlckNoYWxsZW5nZSIsIkNvdW50c1RvU3ltYm9sQ2hhbGxlbmdlIiwiU2NoZW1hdGljVG9DaGFyZ2VDaGFsbGVuZ2UiLCJTY2hlbWF0aWNUb0VsZW1lbnRDaGFsbGVuZ2UiLCJTY2hlbWF0aWNUb01hc3NOdW1iZXJDaGFsbGVuZ2UiLCJTY2hlbWF0aWNUb1N5bWJvbENoYWxsZW5nZSIsIlN5bWJvbFRvQ291bnRzQ2hhbGxlbmdlIiwiU3ltYm9sVG9TY2hlbWF0aWNDaGFsbGVuZ2UiLCJNQVhfUFJPVE9OX05VTUJFUl9GT1JfU0NIRU1BVElDX1BST0JTIiwiQ2hhbGxlbmdlU2V0RmFjdG9yeSIsImdlbmVyYXRlIiwibGV2ZWwiLCJudW1DaGFsbGVuZ2VzIiwibW9kZWwiLCJhbGxvd2VkQ2hhbGxlbmdlVHlwZXNCeUxldmVsIiwidGFuZGVtIiwiY2hhbGxlbmdlcyIsIl9wcmV2aW91c0NoYWxsZW5nZVR5cGUiLCJfYXZhaWxhYmxlQ2hhbGxlbmdlVHlwZXMiLCJhdG9tVmFsdWVMaXN0IiwiaSIsImNoYWxsZW5nZSIsIl9nZW5lcmF0ZUNoYWxsZW5nZSIsIk9QVF9PVVQiLCJwdXNoIiwiYXZhaWxhYmxlQXRvbVZhbHVlcyIsImxlbmd0aCIsInNsaWNlIiwiaW5kZXgiLCJNYXRoIiwiZmxvb3IiLCJuZXh0RG91YmxlIiwiZ2V0IiwiY2hhbGxlbmdlVHlwZSIsInByZXZpb3VzQ2hhbGxlbmdlVHlwZSIsIl8iLCJ3aXRob3V0IiwibWluUHJvdG9uQ291bnQiLCJtYXhQcm90b25Db3VudCIsIk51bWJlciIsIlBPU0lUSVZFX0lORklOSVRZIiwicmVxdWlyZUNoYXJnZWQiLCJfaXNTY2hlbWF0aWNQcm9iVHlwZSIsIl9pc0NoYXJnZVByb2JUeXBlIiwibmV4dEJvb2xlYW4iLCJhdG9tVmFsdWUiLCJnZXRSYW5kb21BdG9tVmFsdWUiLCJtYXJrQXRvbUFzVXNlZCIsImNyZWF0ZUNoYWxsZW5nZSIsIkVycm9yIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJDaGFsbGVuZ2VTZXRGYWN0b3J5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE3LTIwMjEsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFR5cGUgdGhhdCBnZW5lcmF0ZXMgYSBsaXN0IG9mIGNoYWxsZW5nZXMgZm9yIHVzZSBpbiBhIHN1Yi1nYW1lLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvaG4gQmxhbmNvXHJcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IGRvdFJhbmRvbSBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvZG90UmFuZG9tLmpzJztcclxuaW1wb3J0IFRhbmRlbSBmcm9tICcuLi8uLi8uLi8uLi90YW5kZW0vanMvVGFuZGVtLmpzJztcclxuaW1wb3J0IGJ1aWxkQW5BdG9tIGZyb20gJy4uLy4uL2J1aWxkQW5BdG9tLmpzJztcclxuaW1wb3J0IEF0b21WYWx1ZVBvb2wgZnJvbSAnLi9BdG9tVmFsdWVQb29sLmpzJztcclxuaW1wb3J0IENvdW50c1RvQ2hhcmdlQ2hhbGxlbmdlIGZyb20gJy4vQ291bnRzVG9DaGFyZ2VDaGFsbGVuZ2UuanMnO1xyXG5pbXBvcnQgQ291bnRzVG9FbGVtZW50Q2hhbGxlbmdlIGZyb20gJy4vQ291bnRzVG9FbGVtZW50Q2hhbGxlbmdlLmpzJztcclxuaW1wb3J0IENvdW50c1RvTWFzc051bWJlckNoYWxsZW5nZSBmcm9tICcuL0NvdW50c1RvTWFzc051bWJlckNoYWxsZW5nZS5qcyc7XHJcbmltcG9ydCBDb3VudHNUb1N5bWJvbENoYWxsZW5nZSBmcm9tICcuL0NvdW50c1RvU3ltYm9sQ2hhbGxlbmdlLmpzJztcclxuaW1wb3J0IFNjaGVtYXRpY1RvQ2hhcmdlQ2hhbGxlbmdlIGZyb20gJy4vU2NoZW1hdGljVG9DaGFyZ2VDaGFsbGVuZ2UuanMnO1xyXG5pbXBvcnQgU2NoZW1hdGljVG9FbGVtZW50Q2hhbGxlbmdlIGZyb20gJy4vU2NoZW1hdGljVG9FbGVtZW50Q2hhbGxlbmdlLmpzJztcclxuaW1wb3J0IFNjaGVtYXRpY1RvTWFzc051bWJlckNoYWxsZW5nZSBmcm9tICcuL1NjaGVtYXRpY1RvTWFzc051bWJlckNoYWxsZW5nZS5qcyc7XHJcbmltcG9ydCBTY2hlbWF0aWNUb1N5bWJvbENoYWxsZW5nZSBmcm9tICcuL1NjaGVtYXRpY1RvU3ltYm9sQ2hhbGxlbmdlLmpzJztcclxuaW1wb3J0IFN5bWJvbFRvQ291bnRzQ2hhbGxlbmdlIGZyb20gJy4vU3ltYm9sVG9Db3VudHNDaGFsbGVuZ2UuanMnO1xyXG5pbXBvcnQgU3ltYm9sVG9TY2hlbWF0aWNDaGFsbGVuZ2UgZnJvbSAnLi9TeW1ib2xUb1NjaGVtYXRpY0NoYWxsZW5nZS5qcyc7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgTUFYX1BST1RPTl9OVU1CRVJfRk9SX1NDSEVNQVRJQ19QUk9CUyA9IDM7IC8vIERpc2FsbG93IHNjaGVtYXRpYyAoQm9ociBtb2RlbCkgcHJvYnMgYWJvdmUgdGhpcyBzaXplLlxyXG5cclxuLy8gTm8gY29uc3RydWN0b3IsIG5vdCBtZWFudCB0byBiZSBpbnN0YW50aWF0ZWQuXHJcbmNvbnN0IENoYWxsZW5nZVNldEZhY3RvcnkgPSB7fTtcclxuXHJcbi8qKlxyXG4gKiBHZW5lcmF0ZSBhIGNoYWxsZW5nZSBzZXQgYmFzZWQgb24gdGhlIHNwZWNpZmllZCBjcml0ZXJpYS5cclxuICpcclxuICogQHBhcmFtIHtudW1iZXJ9IGxldmVsXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBudW1DaGFsbGVuZ2VzXHJcbiAqIEBwYXJhbSB7R2FtZU1vZGVsfSBtb2RlbFxyXG4gKiBAcGFyYW0ge3N0cmluZ1tdW119IGFsbG93ZWRDaGFsbGVuZ2VUeXBlc0J5TGV2ZWxcclxuICogQHBhcmFtIHtUYW5kZW19IHRhbmRlbVxyXG4gKi9cclxuQ2hhbGxlbmdlU2V0RmFjdG9yeS5nZW5lcmF0ZSA9IGZ1bmN0aW9uKCBsZXZlbCwgbnVtQ2hhbGxlbmdlcywgbW9kZWwsIGFsbG93ZWRDaGFsbGVuZ2VUeXBlc0J5TGV2ZWwsIHRhbmRlbSApIHtcclxuICB0aGlzLmNoYWxsZW5nZXMgPSBbXTtcclxuICB0aGlzLl9wcmV2aW91c0NoYWxsZW5nZVR5cGUgPSBudWxsO1xyXG4gIHRoaXMuX2F2YWlsYWJsZUNoYWxsZW5nZVR5cGVzID0gW107XHJcblxyXG4gIC8vIENyZWF0ZSBhIHBvb2wgb2YgYWxsIGF0b20gdmFsdWVzIHRoYXQgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIGNoYWxsZW5nZXNcclxuICAvLyBmb3IgdGhlIGNoYWxsZW5nZSBzZXQuXHJcbiAgY29uc3QgYXRvbVZhbHVlTGlzdCA9IG5ldyBBdG9tVmFsdWVQb29sKCBsZXZlbCApO1xyXG5cclxuICAvLyBOb3cgYWRkIGNoYWxsZW5nZXMgdG8gdGhlIGNoYWxsZW5nZSBzZXQgYmFzZWQgb24gdGhlIGF0b20gdmFsdWVzIGFuZCB0aGVcclxuICAvLyBjaGFsbGVuZ2UgdHlwZXMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgbGV2ZWwuXHJcbiAgZm9yICggbGV0IGkgPSAwOyBpIDwgbnVtQ2hhbGxlbmdlczsgaSsrICkge1xyXG4gICAgY29uc3QgY2hhbGxlbmdlID0gdGhpcy5fZ2VuZXJhdGVDaGFsbGVuZ2UoIGxldmVsLCBhdG9tVmFsdWVMaXN0LCBtb2RlbCwgYWxsb3dlZENoYWxsZW5nZVR5cGVzQnlMZXZlbCwgVGFuZGVtLk9QVF9PVVQgKTtcclxuICAgIGlmICggY2hhbGxlbmdlICE9PSBudWxsICkge1xyXG4gICAgICB0aGlzLmNoYWxsZW5nZXMucHVzaCggY2hhbGxlbmdlICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdGhpcy5jaGFsbGVuZ2VzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEdlbmVyYXRlIGEgc2luZ2xlIGNoYWxsZW5nZSBnaXZlbiB0aGUgbGV2ZWwgYW5kIGEgcG9vbCBvZiBhdG9tIHZhbHVlcyB0aGF0XHJcbiAqIGNhbiBiZSB1c2VkIGZvciB0aGUgY2hhbGxlbmdlLlxyXG4gKlxyXG4gKiBAcGFyYW0ge251bWJlcn0gbGV2ZWxcclxuICogQHBhcmFtIHtBdG9tVmFsdWVQb29sfSBhdmFpbGFibGVBdG9tVmFsdWVzXHJcbiAqIEBwYXJhbSB7R2FtZU1vZGVsfSBtb2RlbFxyXG4gKiBAcGFyYW0ge1N0cmluZ1tdW119IGFsbG93ZWRDaGFsbGVuZ2VUeXBlc0J5TGV2ZWxcclxuICogQHBhcmFtIHtUYW5kZW19IHRhbmRlbVxyXG4gKiBAcmV0dXJuXHJcbiAqL1xyXG5DaGFsbGVuZ2VTZXRGYWN0b3J5Ll9nZW5lcmF0ZUNoYWxsZW5nZSA9IGZ1bmN0aW9uKCBsZXZlbCwgYXZhaWxhYmxlQXRvbVZhbHVlcywgbW9kZWwsIGFsbG93ZWRDaGFsbGVuZ2VUeXBlc0J5TGV2ZWwsIHRhbmRlbSApIHtcclxuXHJcbiAgaWYgKCB0aGlzLl9hdmFpbGFibGVDaGFsbGVuZ2VUeXBlcy5sZW5ndGggPT09IDAgKSB7XHJcbiAgICAvLyBSZWxvYWQgdGhlIGxpc3Qgb2YgYXZhaWxhYmxlIGNoYWxsZW5nZXMgd2l0aCBhbGwgcG9zc2libGUgY2hhbGxlbmdlXHJcbiAgICAvLyB0eXBlcyBmb3IgdGhlIGN1cnJlbnQgbGV2ZWwuXHJcbiAgICB0aGlzLl9hdmFpbGFibGVDaGFsbGVuZ2VUeXBlcyA9IGFsbG93ZWRDaGFsbGVuZ2VUeXBlc0J5TGV2ZWxbIGxldmVsIF0uc2xpY2UoKTtcclxuICB9XHJcblxyXG4gIC8vIFJhbmRvbWx5IHBpY2sgYSBjaGFsbGVuZ2UgdHlwZSwgYnV0IG1ha2Ugc3VyZSB0aGF0IGl0IGlzbid0IHRoZSBzYW1lXHJcbiAgLy8gYXMgdGhlIHByZXZpb3VzIGNoYWxsZW5nZSB0eXBlLlxyXG4gIGxldCBpbmRleCA9IE1hdGguZmxvb3IoIGRvdFJhbmRvbS5uZXh0RG91YmxlKCkgKiAoIHRoaXMuX2F2YWlsYWJsZUNoYWxsZW5nZVR5cGVzLmxlbmd0aCApICk7XHJcbiAgaWYgKCB0aGlzLl9wcmV2aW91c0NoYWxsZW5nZVR5cGUgIT09IG51bGwgJiYgdGhpcy5fYXZhaWxhYmxlQ2hhbGxlbmdlVHlwZXMuZ2V0KCBpbmRleCApID09PSB0aGlzLl9wcmV2aW91c0NoYWxsZW5nZVR5cGUgKSB7XHJcbiAgICAvLyBUaGlzIGlzIHRoZSBzYW1lIGFzIHRoZSBwcmV2aW91cyBwcm9iIHR5cGUsIHNvIGNob29zZSBhIGRpZmZlcmVudCBvbmUuXHJcbiAgICBpbmRleCA9ICggaW5kZXggKyAxICkgJSB0aGlzLl9hdmFpbGFibGVDaGFsbGVuZ2VUeXBlcy5sZW5ndGg7XHJcbiAgfVxyXG4gIGNvbnN0IGNoYWxsZW5nZVR5cGUgPSB0aGlzLl9hdmFpbGFibGVDaGFsbGVuZ2VUeXBlc1sgaW5kZXggXTtcclxuICB0aGlzLnByZXZpb3VzQ2hhbGxlbmdlVHlwZSA9IGNoYWxsZW5nZVR5cGU7XHJcblxyXG4gIC8vIFJlbW92ZSB0aGUgY2hvc2VuIHR5cGUgZnJvbSB0aGUgbGlzdC4gIEJ5IGRvaW5nIHRoaXMsIHdlIHByZXNlbnRcclxuICAvLyB0aGUgdXNlciB3aXRoIGFsbCBkaWZmZXJlbnQgY2hhbGxlbmdlIHR5cGVzIGJlZm9yZSBzdGFydGluZyBhZ2Fpbi5cclxuICB0aGlzLl9hdmFpbGFibGVDaGFsbGVuZ2VUeXBlcyA9IF8ud2l0aG91dCggdGhpcy5fYXZhaWxhYmxlQ2hhbGxlbmdlVHlwZXMsIGNoYWxsZW5nZVR5cGUgKTtcclxuXHJcbiAgLy8gUGljayBhbiBhdG9tIHZhbHVlIGZyb20gdGhlIGxpc3Qgb2YgdGhvc2UgcmVtYWluaW5nLiAgVGhpcyBpcyB3aGVyZVxyXG4gIC8vIGNvbnN0cmFpbnRzIGJldHdlZW4gY2hhbGxlbmdlIHR5cGVzIGFuZCBhdG9tIHZhbHVlcyBhcmUgaGFuZGxlZC5cclxuICBsZXQgbWluUHJvdG9uQ291bnQgPSAwO1xyXG4gIGxldCBtYXhQcm90b25Db3VudCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcclxuICBsZXQgcmVxdWlyZUNoYXJnZWQgPSBmYWxzZTtcclxuICBpZiAoIHRoaXMuX2lzU2NoZW1hdGljUHJvYlR5cGUoIGNoYWxsZW5nZVR5cGUgKSApIHtcclxuICAgIG1heFByb3RvbkNvdW50ID0gTUFYX1BST1RPTl9OVU1CRVJfRk9SX1NDSEVNQVRJQ19QUk9CUztcclxuICB9XHJcbiAgZWxzZSB7XHJcbiAgICBtaW5Qcm90b25Db3VudCA9IE1BWF9QUk9UT05fTlVNQkVSX0ZPUl9TQ0hFTUFUSUNfUFJPQlMgKyAxO1xyXG4gIH1cclxuICBpZiAoIHRoaXMuX2lzQ2hhcmdlUHJvYlR5cGUoIGNoYWxsZW5nZVR5cGUgKSApIHtcclxuXHJcbiAgICAvLyBJZiB0aGUgY2hhbGxlbmdlIGlzIGFza2luZyBhYm91dCB0aGUgY2hhcmdlLCBhdCBsZWFzdCA1MCUgb2YgdGhlXHJcbiAgICAvLyB0aW1lIHdlIHdhbnQgYSBjaGFyZ2VkIGF0b20uXHJcbiAgICByZXF1aXJlQ2hhcmdlZCA9IGRvdFJhbmRvbS5uZXh0Qm9vbGVhbigpO1xyXG4gIH1cclxuICBjb25zdCBhdG9tVmFsdWUgPSBhdmFpbGFibGVBdG9tVmFsdWVzLmdldFJhbmRvbUF0b21WYWx1ZSggbWluUHJvdG9uQ291bnQsIG1heFByb3RvbkNvdW50LCByZXF1aXJlQ2hhcmdlZCApO1xyXG4gIGF2YWlsYWJsZUF0b21WYWx1ZXMubWFya0F0b21Bc1VzZWQoIGF0b21WYWx1ZSApO1xyXG4gIHJldHVybiB0aGlzLmNyZWF0ZUNoYWxsZW5nZSggbW9kZWwsIGNoYWxsZW5nZVR5cGUsIGF0b21WYWx1ZSwgdGFuZGVtICk7XHJcbn07XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGEgc2luZ2xlIGNoYWxsZW5nZSBnaXZlbiBhIGNoYWxsZW5nZSB0eXBlIChlLmcuIFNjaGVtYXRpYyB0byBFbGVtZW50KSBhbmQgYW4gYXRvbSB2YWx1ZSB0aGF0IGRlZmluZXMgdGhhdFxyXG4gKiBhdG9tIGNvbmZpZ3VyYXRpb24uXHJcbiAqXHJcbiAqIEBwYXJhbSB7R2FtZU1vZGVsfSBtb2RlbFxyXG4gKiBAcGFyYW0ge3N0cmluZ30gY2hhbGxlbmdlVHlwZSAvLyBUT0RPOiBjaGFuZ2UgdG8gZW51bVxyXG4gKiBAcGFyYW0ge051bWJlckF0b219IGF0b21WYWx1ZVxyXG4gKiBAcGFyYW0ge1RhbmRlbX0gdGFuZGVtXHJcbiAqIEByZXR1cm5zIHtCQUFHYW1lQ2hhbGxlbmdlfVxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5DaGFsbGVuZ2VTZXRGYWN0b3J5LmNyZWF0ZUNoYWxsZW5nZSA9ICggbW9kZWwsIGNoYWxsZW5nZVR5cGUsIGF0b21WYWx1ZSwgdGFuZGVtICkgPT4ge1xyXG4gIGxldCBjaGFsbGVuZ2UgPSBudWxsO1xyXG4gIHN3aXRjaCggY2hhbGxlbmdlVHlwZSApIHtcclxuICAgIGNhc2UgJ2NvdW50cy10by1lbGVtZW50JzpcclxuICAgICAgY2hhbGxlbmdlID0gbmV3IENvdW50c1RvRWxlbWVudENoYWxsZW5nZSggbW9kZWwsIGF0b21WYWx1ZSwgY2hhbGxlbmdlVHlwZSwgdGFuZGVtICk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAnY291bnRzLXRvLWNoYXJnZSc6XHJcbiAgICAgIGNoYWxsZW5nZSA9IG5ldyBDb3VudHNUb0NoYXJnZUNoYWxsZW5nZSggbW9kZWwsIGF0b21WYWx1ZSwgY2hhbGxlbmdlVHlwZSwgdGFuZGVtICk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAnY291bnRzLXRvLW1hc3MnOlxyXG4gICAgICBjaGFsbGVuZ2UgPSBuZXcgQ291bnRzVG9NYXNzTnVtYmVyQ2hhbGxlbmdlKCBtb2RlbCwgYXRvbVZhbHVlLCBjaGFsbGVuZ2VUeXBlLCB0YW5kZW0gKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICdjb3VudHMtdG8tc3ltYm9sLWFsbCc6XHJcbiAgICAgIGNoYWxsZW5nZSA9IG5ldyBDb3VudHNUb1N5bWJvbENoYWxsZW5nZSggbW9kZWwsIGF0b21WYWx1ZSwgY2hhbGxlbmdlVHlwZSwgdGFuZGVtLCB0cnVlLCB0cnVlLCB0cnVlICk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAnY291bnRzLXRvLXN5bWJvbC1jaGFyZ2UnOlxyXG4gICAgICBjaGFsbGVuZ2UgPSBuZXcgQ291bnRzVG9TeW1ib2xDaGFsbGVuZ2UoIG1vZGVsLCBhdG9tVmFsdWUsIGNoYWxsZW5nZVR5cGUsIHRhbmRlbSwgZmFsc2UsIGZhbHNlLCB0cnVlICk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAnY291bnRzLXRvLXN5bWJvbC1tYXNzJzpcclxuICAgICAgY2hhbGxlbmdlID0gbmV3IENvdW50c1RvU3ltYm9sQ2hhbGxlbmdlKCBtb2RlbCwgYXRvbVZhbHVlLCBjaGFsbGVuZ2VUeXBlLCB0YW5kZW0sIGZhbHNlLCB0cnVlLCBmYWxzZSApO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgJ2NvdW50cy10by1zeW1ib2wtcHJvdG9uLWNvdW50JzpcclxuICAgICAgY2hhbGxlbmdlID0gbmV3IENvdW50c1RvU3ltYm9sQ2hhbGxlbmdlKCBtb2RlbCwgYXRvbVZhbHVlLCBjaGFsbGVuZ2VUeXBlLCB0YW5kZW0sIHRydWUsIGZhbHNlLCBmYWxzZSApO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgJ3NjaGVtYXRpYy10by1lbGVtZW50JzpcclxuICAgICAgY2hhbGxlbmdlID0gbmV3IFNjaGVtYXRpY1RvRWxlbWVudENoYWxsZW5nZSggbW9kZWwsIGF0b21WYWx1ZSwgY2hhbGxlbmdlVHlwZSwgdGFuZGVtICk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAnc2NoZW1hdGljLXRvLWNoYXJnZSc6XHJcbiAgICAgIGNoYWxsZW5nZSA9IG5ldyBTY2hlbWF0aWNUb0NoYXJnZUNoYWxsZW5nZSggbW9kZWwsIGF0b21WYWx1ZSwgY2hhbGxlbmdlVHlwZSwgdGFuZGVtICk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAnc2NoZW1hdGljLXRvLW1hc3MnOlxyXG4gICAgICBjaGFsbGVuZ2UgPSBuZXcgU2NoZW1hdGljVG9NYXNzTnVtYmVyQ2hhbGxlbmdlKCBtb2RlbCwgYXRvbVZhbHVlLCBjaGFsbGVuZ2VUeXBlLCB0YW5kZW0gKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICdzY2hlbWF0aWMtdG8tc3ltYm9sLWFsbCc6XHJcbiAgICAgIGNoYWxsZW5nZSA9IG5ldyBTY2hlbWF0aWNUb1N5bWJvbENoYWxsZW5nZSggbW9kZWwsIGF0b21WYWx1ZSwgY2hhbGxlbmdlVHlwZSwgdGFuZGVtLCB0cnVlLCB0cnVlLCB0cnVlICk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAnc2NoZW1hdGljLXRvLXN5bWJvbC1jaGFyZ2UnOlxyXG4gICAgICBjaGFsbGVuZ2UgPSBuZXcgU2NoZW1hdGljVG9TeW1ib2xDaGFsbGVuZ2UoIG1vZGVsLCBhdG9tVmFsdWUsIGNoYWxsZW5nZVR5cGUsIHRhbmRlbSwgZmFsc2UsIGZhbHNlLCB0cnVlICk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAnc2NoZW1hdGljLXRvLXN5bWJvbC1tYXNzLW51bWJlcic6XHJcbiAgICAgIGNoYWxsZW5nZSA9IG5ldyBTY2hlbWF0aWNUb1N5bWJvbENoYWxsZW5nZSggbW9kZWwsIGF0b21WYWx1ZSwgY2hhbGxlbmdlVHlwZSwgdGFuZGVtLCBmYWxzZSwgdHJ1ZSwgZmFsc2UgKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICdzY2hlbWF0aWMtdG8tc3ltYm9sLXByb3Rvbi1jb3VudCc6XHJcbiAgICAgIGNoYWxsZW5nZSA9IG5ldyBTY2hlbWF0aWNUb1N5bWJvbENoYWxsZW5nZSggbW9kZWwsIGF0b21WYWx1ZSwgY2hhbGxlbmdlVHlwZSwgdGFuZGVtLCB0cnVlLCBmYWxzZSwgZmFsc2UgKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICdzeW1ib2wtdG8tY291bnRzJzpcclxuICAgICAgY2hhbGxlbmdlID0gbmV3IFN5bWJvbFRvQ291bnRzQ2hhbGxlbmdlKCBtb2RlbCwgYXRvbVZhbHVlLCBjaGFsbGVuZ2VUeXBlLCB0YW5kZW0gKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICdzeW1ib2wtdG8tc2NoZW1hdGljJzpcclxuICAgICAgY2hhbGxlbmdlID0gbmV3IFN5bWJvbFRvU2NoZW1hdGljQ2hhbGxlbmdlKCBtb2RlbCwgYXRvbVZhbHVlLCBjaGFsbGVuZ2VUeXBlLCB0YW5kZW0gKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoIGBFcnJvcjogUmVxdWVzdCB0byBjcmVhdGUgdW5rbm93biBjaGFsbGVuZ2UgdHlwZSwgdHlwZSA9ICR7Y2hhbGxlbmdlVHlwZX1gICk7XHJcbiAgfVxyXG4gIHJldHVybiBjaGFsbGVuZ2U7XHJcbn07XHJcblxyXG4vKipcclxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGRldGVybWluZSB3aGV0aGVyIGEgZ2l2ZW4gY2hhbGxlbmdlIHR5cGUgaGFzIGFcclxuICogc2NoZW1hdGljIGF0b20gcmVwcmVzZW50YXRpb24gb24gZWl0aGVyIGVpdGhlciBzaWRlIG9mIHRoZSBjaGFsbGVuZ2UuXHJcbiAqXHJcbiAqIEBwYXJhbSBjaGFsbGVuZ2VUeXBlXHJcbiAqIEByZXR1cm5cclxuICovXHJcbkNoYWxsZW5nZVNldEZhY3RvcnkuX2lzU2NoZW1hdGljUHJvYlR5cGUgPSBjaGFsbGVuZ2VUeXBlID0+IGNoYWxsZW5nZVR5cGUgPT09ICdzY2hlbWF0aWMtdG8tZWxlbWVudCcgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbGxlbmdlVHlwZSA9PT0gJ3NjaGVtYXRpYy10by1jaGFyZ2UnIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYWxsZW5nZVR5cGUgPT09ICdzY2hlbWF0aWMtdG8tbWFzcycgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbGxlbmdlVHlwZSA9PT0gJ3NjaGVtYXRpYy10by1zeW1ib2wtYWxsJyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFsbGVuZ2VUeXBlID09PSAnc2NoZW1hdGljLXRvLXN5bWJvbC1wcm90b24tY291bnQnIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYWxsZW5nZVR5cGUgPT09ICdzY2hlbWF0aWMtdG8tc3ltYm9sLWNoYXJnZScgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbGxlbmdlVHlwZSA9PT0gJ3NjaGVtYXRpYy10by1zeW1ib2wtbWFzcy1udW1iZXInIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYWxsZW5nZVR5cGUgPT09ICdzeW1ib2wtdG8tc2NoZW1hdGljJztcclxuXHJcbi8qKlxyXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYSBnaXZlbiBjaGFsbGVuZ2UgaXMgcmVxdWVzdGluZyBhblxyXG4gKiBhbnN3ZXIgYWJvdXQgYW4gYXRvbSdzIGNoYXJnZSBvbiB0aGUgcmlnaHQgc2lkZSBvZiB0aGUgY2hhbGxlbmdlLlxyXG4gKlxyXG4gKiBAcGFyYW0gY2hhbGxlbmdlVHlwZVxyXG4gKiBAcmV0dXJuXHJcbiAqL1xyXG5DaGFsbGVuZ2VTZXRGYWN0b3J5Ll9pc0NoYXJnZVByb2JUeXBlID0gY2hhbGxlbmdlVHlwZSA9PiBjaGFsbGVuZ2VUeXBlID09PSAnc2NoZW1hdGljLXRvLWNoYXJnZScgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbGxlbmdlVHlwZSA9PT0gJ2NvdW50cy10by1jaGFyZ2UnIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYWxsZW5nZVR5cGUgPT09ICdjb3VudHMtdG8tc3ltYm9sLWNoYXJnZScgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbGxlbmdlVHlwZSA9PT0gJ3NjaGVtYXRpYy10by1zeW1ib2wtY2hhcmdlJztcclxuXHJcbmJ1aWxkQW5BdG9tLnJlZ2lzdGVyKCAnQ2hhbGxlbmdlU2V0RmFjdG9yeScsIENoYWxsZW5nZVNldEZhY3RvcnkgKTtcclxuZXhwb3J0IGRlZmF1bHQgQ2hhbGxlbmdlU2V0RmFjdG9yeTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxTQUFTLE1BQU0saUNBQWlDO0FBQ3ZELE9BQU9DLE1BQU0sTUFBTSxpQ0FBaUM7QUFDcEQsT0FBT0MsV0FBVyxNQUFNLHNCQUFzQjtBQUM5QyxPQUFPQyxhQUFhLE1BQU0sb0JBQW9CO0FBQzlDLE9BQU9DLHVCQUF1QixNQUFNLDhCQUE4QjtBQUNsRSxPQUFPQyx3QkFBd0IsTUFBTSwrQkFBK0I7QUFDcEUsT0FBT0MsMkJBQTJCLE1BQU0sa0NBQWtDO0FBQzFFLE9BQU9DLHVCQUF1QixNQUFNLDhCQUE4QjtBQUNsRSxPQUFPQywwQkFBMEIsTUFBTSxpQ0FBaUM7QUFDeEUsT0FBT0MsMkJBQTJCLE1BQU0sa0NBQWtDO0FBQzFFLE9BQU9DLDhCQUE4QixNQUFNLHFDQUFxQztBQUNoRixPQUFPQywwQkFBMEIsTUFBTSxpQ0FBaUM7QUFDeEUsT0FBT0MsdUJBQXVCLE1BQU0sOEJBQThCO0FBQ2xFLE9BQU9DLDBCQUEwQixNQUFNLGlDQUFpQzs7QUFF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