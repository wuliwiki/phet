// Copyright 2021-2023, University of Colorado Boulder

/**
 * Return an object of data about the simulation and the browser
 * much of the code was largely copied and expanded on from SimTroubleshootPage.html in the website repo. Note that
 * key names in the info object are used by the PhET-iO API, do not change without great consideration.
 *
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */

import { Utils } from '../../scenery/js/imports.js';
import PhetioObject from '../../tandem/js/PhetioObject.js';
import Tandem from '../../tandem/js/Tandem.js';
import ArrayIO from '../../tandem/js/types/ArrayIO.js';
import BooleanIO from '../../tandem/js/types/BooleanIO.js';
import IOType from '../../tandem/js/types/IOType.js';
import NullableIO from '../../tandem/js/types/NullableIO.js';
import NumberIO from '../../tandem/js/types/NumberIO.js';
import ObjectLiteralIO from '../../tandem/js/types/ObjectLiteralIO.js';
import StringIO from '../../tandem/js/types/StringIO.js';
import joist from './joist.js';
import packageJSON from './packageJSON.js';
class SimInfo extends PhetioObject {
  info = {};
  constructor(sim) {
    super({
      tandem: Tandem.GENERAL_MODEL.createTandem('simInfo'),
      phetioType: SimInfo.SimInfoIO,
      phetioReadOnly: true,
      phetioDocumentation: 'A collection of data about the runtime and simulation. Available in the simStarted PhET-iO ' + 'data stream event, as well as on demand in the PhET-iO state.'
    });
    assert && assert(Array.isArray(sim.screens), 'screens should be set and an array');

    // globals
    this.putInfo('url', window.location.href);
    this.putInfo('randomSeed', window.phet.chipper.queryParameters.randomSeed);
    this.putInfo('userAgent', window.navigator.userAgent);
    this.putInfo('language', window.navigator.language);
    this.putInfo('window', `${window.innerWidth}x${window.innerHeight}`); // eslint-disable-line bad-sim-text
    this.putInfo('referrer', document.referrer);

    // from Scenery Utils
    this.putInfo('checkIE11StencilSupport', Utils.checkIE11StencilSupport());
    if (phet.chipper.queryParameters.webgl) {
      this.putInfo('isWebGLSupported', Utils.isWebGLSupported);
    }
    let canvas;
    let context;
    let backingStorePixelRatio;
    const flags = [];

    // @ts-expect-error - pointerEnabled isn't included in the Typescript definition of window.navigator
    if (window.navigator.pointerEnabled) {
      flags.push('pointerEnabled');
    }

    // @ts-expect-error - msPointerEnabled isn't included in the Typescript definition of window.navigator
    if (window.navigator.msPointerEnabled) {
      flags.push('msPointerEnabled');
    }
    if (!window.navigator.onLine) {
      flags.push('offline');
    }
    try {
      canvas = document.createElement('canvas');
      context = canvas.getContext('2d');
      backingStorePixelRatio = Utils.backingStorePixelRatio(context);
      this.putInfo('pixelRatio', `${window.devicePixelRatio || 1}/${backingStorePixelRatio}`);
      if ((window.devicePixelRatio || 1) / backingStorePixelRatio !== 1) {
        flags.push('pixelRatioScaling');
      }
    } catch (e) {} // eslint-disable-line no-empty

    this.putInfo('flags', flags.join(', '));
    canvas = null; // dispose only reference

    // from Sim.js
    this.putInfo('simName', sim.simNameProperty.value);
    this.putInfo('simVersion', sim.version);
    this.putInfo('repoName', packageJSON.name);
    this.putInfo('screens', sim.screens.map(screen => {
      const screenObject = {
        // likely null for single screen sims, so use the sim name as a default
        name: screen.nameProperty.value || sim.simNameProperty.value
      };
      if (Tandem.PHET_IO_ENABLED) {
        screenObject.phetioID = screen.tandem.phetioID;
      }
      return screenObject;
    }));

    // From PhET-iO code
    if (Tandem.PHET_IO_ENABLED) {
      this.putInfo('screenPropertyValue', sim.selectedScreenProperty.value.tandem.phetioID);
      this.putInfo('wrapperMetadata', phet.preloads.phetio.simStartedMetadata);
      this.putInfo('dataStreamVersion', phet.phetio.dataStream.VERSION);
      this.putInfo('phetioCommandProcessorProtocol', phet.phetio.phetioCommandProcessor.PHET_IO_PROTOCOL);
    }
  }
  putInfo(key, value) {
    if (value === undefined) {
      value = '{{undefined}}';
    }
    assert && assert(!this.info.hasOwnProperty(key), `key already defined: ${key}`);

    // @ts-expect-error I don't know how to ensure the correct value, just the key
    this.info[key] = value;
  }
  static SimInfoIO = new IOType('SimInfoIO', {
    valueType: SimInfo,
    toStateObject: simInfo => {
      return {
        simName: simInfo.info.simName,
        screens: simInfo.info.screens,
        repoName: simInfo.info.repoName,
        screenPropertyValue: simInfo.info.screenPropertyValue,
        dataStreamVersion: simInfo.info.dataStreamVersion,
        phetioCommandProcessorProtocol: simInfo.info.phetioCommandProcessorProtocol,
        simVersion: Tandem.API_GENERATION ? null : simInfo.info.simVersion,
        wrapperMetadata: Tandem.API_GENERATION ? null : simInfo.info.wrapperMetadata,
        randomSeed: Tandem.API_GENERATION ? null : simInfo.info.randomSeed,
        url: Tandem.API_GENERATION ? null : simInfo.info.url,
        userAgent: Tandem.API_GENERATION ? null : simInfo.info.userAgent,
        window: Tandem.API_GENERATION ? null : simInfo.info.window,
        referrer: Tandem.API_GENERATION ? null : simInfo.info.referrer,
        language: Tandem.API_GENERATION ? null : simInfo.info.language,
        pixelRatio: Tandem.API_GENERATION ? null : simInfo.info.pixelRatio,
        isWebGLSupported: Tandem.API_GENERATION ? null : simInfo.info.isWebGLSupported,
        checkIE11StencilSupport: Tandem.API_GENERATION ? null : simInfo.info.checkIE11StencilSupport,
        flags: Tandem.API_GENERATION ? null : simInfo.info.flags || null
      };
    },
    stateSchema: {
      simName: StringIO,
      screens: ArrayIO(ObjectLiteralIO),
      repoName: StringIO,
      screenPropertyValue: StringIO,
      wrapperMetadata: NullableIO(ObjectLiteralIO),
      dataStreamVersion: StringIO,
      phetioCommandProcessorProtocol: StringIO,
      // Parts that are omitted in API generation
      simVersion: NullableIO(StringIO),
      randomSeed: NullableIO(NumberIO),
      url: NullableIO(StringIO),
      userAgent: NullableIO(StringIO),
      window: NullableIO(StringIO),
      referrer: NullableIO(StringIO),
      language: NullableIO(StringIO),
      pixelRatio: NullableIO(StringIO),
      isWebGLSupported: NullableIO(BooleanIO),
      checkIE11StencilSupport: NullableIO(BooleanIO),
      flags: NullableIO(StringIO)
    }
  });
}
joist.register('SimInfo', SimInfo);
export default SimInfo;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVdGlscyIsIlBoZXRpb09iamVjdCIsIlRhbmRlbSIsIkFycmF5SU8iLCJCb29sZWFuSU8iLCJJT1R5cGUiLCJOdWxsYWJsZUlPIiwiTnVtYmVySU8iLCJPYmplY3RMaXRlcmFsSU8iLCJTdHJpbmdJTyIsImpvaXN0IiwicGFja2FnZUpTT04iLCJTaW1JbmZvIiwiaW5mbyIsImNvbnN0cnVjdG9yIiwic2ltIiwidGFuZGVtIiwiR0VORVJBTF9NT0RFTCIsImNyZWF0ZVRhbmRlbSIsInBoZXRpb1R5cGUiLCJTaW1JbmZvSU8iLCJwaGV0aW9SZWFkT25seSIsInBoZXRpb0RvY3VtZW50YXRpb24iLCJhc3NlcnQiLCJBcnJheSIsImlzQXJyYXkiLCJzY3JlZW5zIiwicHV0SW5mbyIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsInBoZXQiLCJjaGlwcGVyIiwicXVlcnlQYXJhbWV0ZXJzIiwicmFuZG9tU2VlZCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImxhbmd1YWdlIiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwiZG9jdW1lbnQiLCJyZWZlcnJlciIsImNoZWNrSUUxMVN0ZW5jaWxTdXBwb3J0Iiwid2ViZ2wiLCJpc1dlYkdMU3VwcG9ydGVkIiwiY2FudmFzIiwiY29udGV4dCIsImJhY2tpbmdTdG9yZVBpeGVsUmF0aW8iLCJmbGFncyIsInBvaW50ZXJFbmFibGVkIiwicHVzaCIsIm1zUG9pbnRlckVuYWJsZWQiLCJvbkxpbmUiLCJjcmVhdGVFbGVtZW50IiwiZ2V0Q29udGV4dCIsImRldmljZVBpeGVsUmF0aW8iLCJlIiwiam9pbiIsInNpbU5hbWVQcm9wZXJ0eSIsInZhbHVlIiwidmVyc2lvbiIsIm5hbWUiLCJtYXAiLCJzY3JlZW4iLCJzY3JlZW5PYmplY3QiLCJuYW1lUHJvcGVydHkiLCJQSEVUX0lPX0VOQUJMRUQiLCJwaGV0aW9JRCIsInNlbGVjdGVkU2NyZWVuUHJvcGVydHkiLCJwcmVsb2FkcyIsInBoZXRpbyIsInNpbVN0YXJ0ZWRNZXRhZGF0YSIsImRhdGFTdHJlYW0iLCJWRVJTSU9OIiwicGhldGlvQ29tbWFuZFByb2Nlc3NvciIsIlBIRVRfSU9fUFJPVE9DT0wiLCJrZXkiLCJ1bmRlZmluZWQiLCJoYXNPd25Qcm9wZXJ0eSIsInZhbHVlVHlwZSIsInRvU3RhdGVPYmplY3QiLCJzaW1JbmZvIiwic2ltTmFtZSIsInJlcG9OYW1lIiwic2NyZWVuUHJvcGVydHlWYWx1ZSIsImRhdGFTdHJlYW1WZXJzaW9uIiwicGhldGlvQ29tbWFuZFByb2Nlc3NvclByb3RvY29sIiwic2ltVmVyc2lvbiIsIkFQSV9HRU5FUkFUSU9OIiwid3JhcHBlck1ldGFkYXRhIiwidXJsIiwicGl4ZWxSYXRpbyIsInN0YXRlU2NoZW1hIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJTaW1JbmZvLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIxLTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFJldHVybiBhbiBvYmplY3Qgb2YgZGF0YSBhYm91dCB0aGUgc2ltdWxhdGlvbiBhbmQgdGhlIGJyb3dzZXJcclxuICogbXVjaCBvZiB0aGUgY29kZSB3YXMgbGFyZ2VseSBjb3BpZWQgYW5kIGV4cGFuZGVkIG9uIGZyb20gU2ltVHJvdWJsZXNob290UGFnZS5odG1sIGluIHRoZSB3ZWJzaXRlIHJlcG8uIE5vdGUgdGhhdFxyXG4gKiBrZXkgbmFtZXMgaW4gdGhlIGluZm8gb2JqZWN0IGFyZSB1c2VkIGJ5IHRoZSBQaEVULWlPIEFQSSwgZG8gbm90IGNoYW5nZSB3aXRob3V0IGdyZWF0IGNvbnNpZGVyYXRpb24uXHJcbiAqXHJcbiAqIEBhdXRob3IgTWljaGFlbCBLYXV6bWFubiAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICovXHJcblxyXG5pbXBvcnQgSW50ZW50aW9uYWxBbnkgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL0ludGVudGlvbmFsQW55LmpzJztcclxuaW1wb3J0IHsgVXRpbHMgfSBmcm9tICcuLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgUGhldGlvT2JqZWN0IGZyb20gJy4uLy4uL3RhbmRlbS9qcy9QaGV0aW9PYmplY3QuanMnO1xyXG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xyXG5pbXBvcnQgQXJyYXlJTyBmcm9tICcuLi8uLi90YW5kZW0vanMvdHlwZXMvQXJyYXlJTy5qcyc7XHJcbmltcG9ydCBCb29sZWFuSU8gZnJvbSAnLi4vLi4vdGFuZGVtL2pzL3R5cGVzL0Jvb2xlYW5JTy5qcyc7XHJcbmltcG9ydCBJT1R5cGUgZnJvbSAnLi4vLi4vdGFuZGVtL2pzL3R5cGVzL0lPVHlwZS5qcyc7XHJcbmltcG9ydCBOdWxsYWJsZUlPIGZyb20gJy4uLy4uL3RhbmRlbS9qcy90eXBlcy9OdWxsYWJsZUlPLmpzJztcclxuaW1wb3J0IE51bWJlcklPIGZyb20gJy4uLy4uL3RhbmRlbS9qcy90eXBlcy9OdW1iZXJJTy5qcyc7XHJcbmltcG9ydCBPYmplY3RMaXRlcmFsSU8gZnJvbSAnLi4vLi4vdGFuZGVtL2pzL3R5cGVzL09iamVjdExpdGVyYWxJTy5qcyc7XHJcbmltcG9ydCBTdHJpbmdJTyBmcm9tICcuLi8uLi90YW5kZW0vanMvdHlwZXMvU3RyaW5nSU8uanMnO1xyXG5pbXBvcnQgam9pc3QgZnJvbSAnLi9qb2lzdC5qcyc7XHJcbmltcG9ydCB7IEFueVNjcmVlbiB9IGZyb20gJy4vU2NyZWVuLmpzJztcclxuaW1wb3J0IHBhY2thZ2VKU09OIGZyb20gJy4vcGFja2FnZUpTT04uanMnO1xyXG5pbXBvcnQgU2ltIGZyb20gJy4vU2ltLmpzJztcclxuXHJcbmV4cG9ydCB0eXBlIFNjcmVlblN0YXRlID0ge1xyXG4gIG5hbWU6IHN0cmluZztcclxuICBwaGV0aW9JRD86IHN0cmluZztcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIFNpbUluZm9TdGF0ZSA9IHtcclxuICBzaW1OYW1lOiBzdHJpbmc7XHJcbiAgc2NyZWVuczogU2NyZWVuU3RhdGVbXTtcclxuICByZXBvTmFtZTogc3RyaW5nO1xyXG5cclxuICBzY3JlZW5Qcm9wZXJ0eVZhbHVlOiBzdHJpbmc7XHJcbiAgd3JhcHBlck1ldGFkYXRhOiBudWxsIHwgUmVjb3JkPHN0cmluZywgSW50ZW50aW9uYWxBbnk+O1xyXG4gIGRhdGFTdHJlYW1WZXJzaW9uOiBzdHJpbmc7XHJcbiAgcGhldGlvQ29tbWFuZFByb2Nlc3NvclByb3RvY29sOiBzdHJpbmc7XHJcbiAgc2ltVmVyc2lvbjogc3RyaW5nIHwgbnVsbDtcclxuICByYW5kb21TZWVkOiBudW1iZXIgfCBudWxsO1xyXG4gIHVybDogc3RyaW5nIHwgbnVsbDtcclxuICB1c2VyQWdlbnQ6IHN0cmluZyB8IG51bGw7XHJcbiAgd2luZG93OiBzdHJpbmcgfCBudWxsO1xyXG4gIHJlZmVycmVyOiBzdHJpbmcgfCBudWxsO1xyXG4gIGxhbmd1YWdlOiBzdHJpbmcgfCBudWxsO1xyXG4gIHBpeGVsUmF0aW86IHN0cmluZyB8IG51bGw7XHJcbiAgaXNXZWJHTFN1cHBvcnRlZDogYm9vbGVhbiB8IG51bGw7XHJcbiAgY2hlY2tJRTExU3RlbmNpbFN1cHBvcnQ6IGJvb2xlYW4gfCBudWxsO1xyXG4gIGZsYWdzOiBzdHJpbmcgfCBudWxsO1xyXG59O1xyXG5cclxuY2xhc3MgU2ltSW5mbyBleHRlbmRzIFBoZXRpb09iamVjdCB7XHJcbiAgcHVibGljIHJlYWRvbmx5IGluZm86IFNpbUluZm9TdGF0ZSA9IHt9IGFzIFNpbUluZm9TdGF0ZTtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBzaW06IFNpbSApIHtcclxuICAgIHN1cGVyKCB7XHJcbiAgICAgIHRhbmRlbTogVGFuZGVtLkdFTkVSQUxfTU9ERUwuY3JlYXRlVGFuZGVtKCAnc2ltSW5mbycgKSxcclxuICAgICAgcGhldGlvVHlwZTogU2ltSW5mby5TaW1JbmZvSU8sXHJcbiAgICAgIHBoZXRpb1JlYWRPbmx5OiB0cnVlLFxyXG4gICAgICBwaGV0aW9Eb2N1bWVudGF0aW9uOiAnQSBjb2xsZWN0aW9uIG9mIGRhdGEgYWJvdXQgdGhlIHJ1bnRpbWUgYW5kIHNpbXVsYXRpb24uIEF2YWlsYWJsZSBpbiB0aGUgc2ltU3RhcnRlZCBQaEVULWlPICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSBzdHJlYW0gZXZlbnQsIGFzIHdlbGwgYXMgb24gZGVtYW5kIGluIHRoZSBQaEVULWlPIHN0YXRlLidcclxuICAgIH0gKTtcclxuXHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBBcnJheS5pc0FycmF5KCBzaW0uc2NyZWVucyApLCAnc2NyZWVucyBzaG91bGQgYmUgc2V0IGFuZCBhbiBhcnJheScgKTtcclxuXHJcbiAgICAvLyBnbG9iYWxzXHJcbiAgICB0aGlzLnB1dEluZm8oICd1cmwnLCB3aW5kb3cubG9jYXRpb24uaHJlZiApO1xyXG4gICAgdGhpcy5wdXRJbmZvKCAncmFuZG9tU2VlZCcsIHdpbmRvdy5waGV0LmNoaXBwZXIucXVlcnlQYXJhbWV0ZXJzLnJhbmRvbVNlZWQgKTtcclxuICAgIHRoaXMucHV0SW5mbyggJ3VzZXJBZ2VudCcsIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50ICk7XHJcbiAgICB0aGlzLnB1dEluZm8oICdsYW5ndWFnZScsIHdpbmRvdy5uYXZpZ2F0b3IubGFuZ3VhZ2UgKTtcclxuICAgIHRoaXMucHV0SW5mbyggJ3dpbmRvdycsIGAke3dpbmRvdy5pbm5lcldpZHRofXgke3dpbmRvdy5pbm5lckhlaWdodH1gICk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFkLXNpbS10ZXh0XHJcbiAgICB0aGlzLnB1dEluZm8oICdyZWZlcnJlcicsIGRvY3VtZW50LnJlZmVycmVyICk7XHJcblxyXG4gICAgLy8gZnJvbSBTY2VuZXJ5IFV0aWxzXHJcbiAgICB0aGlzLnB1dEluZm8oICdjaGVja0lFMTFTdGVuY2lsU3VwcG9ydCcsIFV0aWxzLmNoZWNrSUUxMVN0ZW5jaWxTdXBwb3J0KCkgKTtcclxuICAgIGlmICggcGhldC5jaGlwcGVyLnF1ZXJ5UGFyYW1ldGVycy53ZWJnbCApIHtcclxuICAgICAgdGhpcy5wdXRJbmZvKCAnaXNXZWJHTFN1cHBvcnRlZCcsIFV0aWxzLmlzV2ViR0xTdXBwb3J0ZWQgKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCB8IG51bGw7XHJcbiAgICBsZXQgY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG4gICAgbGV0IGJhY2tpbmdTdG9yZVBpeGVsUmF0aW86IG51bWJlcjtcclxuXHJcbiAgICBjb25zdCBmbGFncyA9IFtdO1xyXG5cclxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLSBwb2ludGVyRW5hYmxlZCBpc24ndCBpbmNsdWRlZCBpbiB0aGUgVHlwZXNjcmlwdCBkZWZpbml0aW9uIG9mIHdpbmRvdy5uYXZpZ2F0b3JcclxuICAgIGlmICggd2luZG93Lm5hdmlnYXRvci5wb2ludGVyRW5hYmxlZCApIHsgZmxhZ3MucHVzaCggJ3BvaW50ZXJFbmFibGVkJyApOyB9XHJcblxyXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciAtIG1zUG9pbnRlckVuYWJsZWQgaXNuJ3QgaW5jbHVkZWQgaW4gdGhlIFR5cGVzY3JpcHQgZGVmaW5pdGlvbiBvZiB3aW5kb3cubmF2aWdhdG9yXHJcbiAgICBpZiAoIHdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCApIHsgZmxhZ3MucHVzaCggJ21zUG9pbnRlckVuYWJsZWQnICk7IH1cclxuICAgIGlmICggIXdpbmRvdy5uYXZpZ2F0b3Iub25MaW5lICkgeyBmbGFncy5wdXNoKCAnb2ZmbGluZScgKTsgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdjYW52YXMnICk7XHJcbiAgICAgIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCggJzJkJyApITtcclxuICAgICAgYmFja2luZ1N0b3JlUGl4ZWxSYXRpbyA9IFV0aWxzLmJhY2tpbmdTdG9yZVBpeGVsUmF0aW8oIGNvbnRleHQgKSE7XHJcbiAgICAgIHRoaXMucHV0SW5mbyggJ3BpeGVsUmF0aW8nLCBgJHt3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxfS8ke2JhY2tpbmdTdG9yZVBpeGVsUmF0aW99YCApO1xyXG5cclxuICAgICAgaWYgKCAoIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDEgKSAvIGJhY2tpbmdTdG9yZVBpeGVsUmF0aW8gIT09IDEgKSB7IGZsYWdzLnB1c2goICdwaXhlbFJhdGlvU2NhbGluZycgKTsgfVxyXG4gICAgfVxyXG4gICAgY2F0Y2goIGUgKSB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWVtcHR5XHJcblxyXG4gICAgdGhpcy5wdXRJbmZvKCAnZmxhZ3MnLCBmbGFncy5qb2luKCAnLCAnICkgKTtcclxuXHJcbiAgICBjYW52YXMgPSBudWxsOyAvLyBkaXNwb3NlIG9ubHkgcmVmZXJlbmNlXHJcblxyXG4gICAgLy8gZnJvbSBTaW0uanNcclxuICAgIHRoaXMucHV0SW5mbyggJ3NpbU5hbWUnLCBzaW0uc2ltTmFtZVByb3BlcnR5LnZhbHVlICk7XHJcbiAgICB0aGlzLnB1dEluZm8oICdzaW1WZXJzaW9uJywgc2ltLnZlcnNpb24gKTtcclxuICAgIHRoaXMucHV0SW5mbyggJ3JlcG9OYW1lJywgcGFja2FnZUpTT04ubmFtZSApO1xyXG4gICAgdGhpcy5wdXRJbmZvKCAnc2NyZWVucycsIHNpbS5zY3JlZW5zLm1hcCggKCBzY3JlZW46IEFueVNjcmVlbiApID0+IHtcclxuICAgICAgY29uc3Qgc2NyZWVuT2JqZWN0OiBTY3JlZW5TdGF0ZSA9IHtcclxuXHJcbiAgICAgICAgLy8gbGlrZWx5IG51bGwgZm9yIHNpbmdsZSBzY3JlZW4gc2ltcywgc28gdXNlIHRoZSBzaW0gbmFtZSBhcyBhIGRlZmF1bHRcclxuICAgICAgICBuYW1lOiBzY3JlZW4ubmFtZVByb3BlcnR5LnZhbHVlIHx8IHNpbS5zaW1OYW1lUHJvcGVydHkudmFsdWVcclxuICAgICAgfTtcclxuICAgICAgaWYgKCBUYW5kZW0uUEhFVF9JT19FTkFCTEVEICkge1xyXG4gICAgICAgIHNjcmVlbk9iamVjdC5waGV0aW9JRCA9IHNjcmVlbi50YW5kZW0ucGhldGlvSUQ7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHNjcmVlbk9iamVjdDtcclxuICAgIH0gKSApO1xyXG5cclxuICAgIC8vIEZyb20gUGhFVC1pTyBjb2RlXHJcbiAgICBpZiAoIFRhbmRlbS5QSEVUX0lPX0VOQUJMRUQgKSB7XHJcbiAgICAgIHRoaXMucHV0SW5mbyggJ3NjcmVlblByb3BlcnR5VmFsdWUnLCBzaW0uc2VsZWN0ZWRTY3JlZW5Qcm9wZXJ0eS52YWx1ZS50YW5kZW0ucGhldGlvSUQgKTtcclxuICAgICAgdGhpcy5wdXRJbmZvKCAnd3JhcHBlck1ldGFkYXRhJywgcGhldC5wcmVsb2Fkcy5waGV0aW8uc2ltU3RhcnRlZE1ldGFkYXRhICk7XHJcbiAgICAgIHRoaXMucHV0SW5mbyggJ2RhdGFTdHJlYW1WZXJzaW9uJywgcGhldC5waGV0aW8uZGF0YVN0cmVhbS5WRVJTSU9OICk7XHJcbiAgICAgIHRoaXMucHV0SW5mbyggJ3BoZXRpb0NvbW1hbmRQcm9jZXNzb3JQcm90b2NvbCcsIHBoZXQucGhldGlvLnBoZXRpb0NvbW1hbmRQcm9jZXNzb3IuUEhFVF9JT19QUk9UT0NPTCApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBwdXRJbmZvKCBrZXk6IGtleW9mIFNpbUluZm9TdGF0ZSwgdmFsdWU6IEludGVudGlvbmFsQW55ICk6IHZvaWQge1xyXG4gICAgaWYgKCB2YWx1ZSA9PT0gdW5kZWZpbmVkICkge1xyXG4gICAgICB2YWx1ZSA9ICd7e3VuZGVmaW5lZH19JztcclxuICAgIH1cclxuICAgIGFzc2VydCAmJiBhc3NlcnQoICF0aGlzLmluZm8uaGFzT3duUHJvcGVydHkoIGtleSApLCBga2V5IGFscmVhZHkgZGVmaW5lZDogJHtrZXl9YCApO1xyXG5cclxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgSSBkb24ndCBrbm93IGhvdyB0byBlbnN1cmUgdGhlIGNvcnJlY3QgdmFsdWUsIGp1c3QgdGhlIGtleVxyXG4gICAgdGhpcy5pbmZvWyBrZXkgXSA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBTaW1JbmZvSU8gPSBuZXcgSU9UeXBlPFNpbUluZm8sIFNpbUluZm9TdGF0ZT4oICdTaW1JbmZvSU8nLCB7XHJcbiAgICB2YWx1ZVR5cGU6IFNpbUluZm8sXHJcbiAgICB0b1N0YXRlT2JqZWN0OiBzaW1JbmZvID0+IHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzaW1OYW1lOiBzaW1JbmZvLmluZm8uc2ltTmFtZSxcclxuICAgICAgICBzY3JlZW5zOiBzaW1JbmZvLmluZm8uc2NyZWVucyxcclxuICAgICAgICByZXBvTmFtZTogc2ltSW5mby5pbmZvLnJlcG9OYW1lLFxyXG5cclxuICAgICAgICBzY3JlZW5Qcm9wZXJ0eVZhbHVlOiBzaW1JbmZvLmluZm8uc2NyZWVuUHJvcGVydHlWYWx1ZSxcclxuICAgICAgICBkYXRhU3RyZWFtVmVyc2lvbjogc2ltSW5mby5pbmZvLmRhdGFTdHJlYW1WZXJzaW9uLFxyXG4gICAgICAgIHBoZXRpb0NvbW1hbmRQcm9jZXNzb3JQcm90b2NvbDogc2ltSW5mby5pbmZvLnBoZXRpb0NvbW1hbmRQcm9jZXNzb3JQcm90b2NvbCxcclxuXHJcbiAgICAgICAgc2ltVmVyc2lvbjogVGFuZGVtLkFQSV9HRU5FUkFUSU9OID8gbnVsbCA6IHNpbUluZm8uaW5mby5zaW1WZXJzaW9uLFxyXG4gICAgICAgIHdyYXBwZXJNZXRhZGF0YTogVGFuZGVtLkFQSV9HRU5FUkFUSU9OID8gbnVsbCA6IHNpbUluZm8uaW5mby53cmFwcGVyTWV0YWRhdGEsXHJcbiAgICAgICAgcmFuZG9tU2VlZDogVGFuZGVtLkFQSV9HRU5FUkFUSU9OID8gbnVsbCA6IHNpbUluZm8uaW5mby5yYW5kb21TZWVkLFxyXG4gICAgICAgIHVybDogVGFuZGVtLkFQSV9HRU5FUkFUSU9OID8gbnVsbCA6IHNpbUluZm8uaW5mby51cmwsXHJcbiAgICAgICAgdXNlckFnZW50OiBUYW5kZW0uQVBJX0dFTkVSQVRJT04gPyBudWxsIDogc2ltSW5mby5pbmZvLnVzZXJBZ2VudCxcclxuICAgICAgICB3aW5kb3c6IFRhbmRlbS5BUElfR0VORVJBVElPTiA/IG51bGwgOiBzaW1JbmZvLmluZm8ud2luZG93LFxyXG4gICAgICAgIHJlZmVycmVyOiBUYW5kZW0uQVBJX0dFTkVSQVRJT04gPyBudWxsIDogc2ltSW5mby5pbmZvLnJlZmVycmVyLFxyXG4gICAgICAgIGxhbmd1YWdlOiBUYW5kZW0uQVBJX0dFTkVSQVRJT04gPyBudWxsIDogc2ltSW5mby5pbmZvLmxhbmd1YWdlLFxyXG4gICAgICAgIHBpeGVsUmF0aW86IFRhbmRlbS5BUElfR0VORVJBVElPTiA/IG51bGwgOiBzaW1JbmZvLmluZm8ucGl4ZWxSYXRpbyxcclxuICAgICAgICBpc1dlYkdMU3VwcG9ydGVkOiBUYW5kZW0uQVBJX0dFTkVSQVRJT04gPyBudWxsIDogc2ltSW5mby5pbmZvLmlzV2ViR0xTdXBwb3J0ZWQsXHJcbiAgICAgICAgY2hlY2tJRTExU3RlbmNpbFN1cHBvcnQ6IFRhbmRlbS5BUElfR0VORVJBVElPTiA/IG51bGwgOiBzaW1JbmZvLmluZm8uY2hlY2tJRTExU3RlbmNpbFN1cHBvcnQsXHJcbiAgICAgICAgZmxhZ3M6IFRhbmRlbS5BUElfR0VORVJBVElPTiA/IG51bGwgOiBzaW1JbmZvLmluZm8uZmxhZ3MgfHwgbnVsbFxyXG4gICAgICB9O1xyXG4gICAgfSxcclxuICAgIHN0YXRlU2NoZW1hOiB7XHJcbiAgICAgIHNpbU5hbWU6IFN0cmluZ0lPLFxyXG4gICAgICBzY3JlZW5zOiBBcnJheUlPKCBPYmplY3RMaXRlcmFsSU8gKSxcclxuICAgICAgcmVwb05hbWU6IFN0cmluZ0lPLFxyXG5cclxuICAgICAgc2NyZWVuUHJvcGVydHlWYWx1ZTogU3RyaW5nSU8sXHJcbiAgICAgIHdyYXBwZXJNZXRhZGF0YTogTnVsbGFibGVJTyggT2JqZWN0TGl0ZXJhbElPICksXHJcbiAgICAgIGRhdGFTdHJlYW1WZXJzaW9uOiBTdHJpbmdJTyxcclxuICAgICAgcGhldGlvQ29tbWFuZFByb2Nlc3NvclByb3RvY29sOiBTdHJpbmdJTyxcclxuXHJcbiAgICAgIC8vIFBhcnRzIHRoYXQgYXJlIG9taXR0ZWQgaW4gQVBJIGdlbmVyYXRpb25cclxuICAgICAgc2ltVmVyc2lvbjogTnVsbGFibGVJTyggU3RyaW5nSU8gKSxcclxuICAgICAgcmFuZG9tU2VlZDogTnVsbGFibGVJTyggTnVtYmVySU8gKSxcclxuICAgICAgdXJsOiBOdWxsYWJsZUlPKCBTdHJpbmdJTyApLFxyXG4gICAgICB1c2VyQWdlbnQ6IE51bGxhYmxlSU8oIFN0cmluZ0lPICksXHJcbiAgICAgIHdpbmRvdzogTnVsbGFibGVJTyggU3RyaW5nSU8gKSxcclxuICAgICAgcmVmZXJyZXI6IE51bGxhYmxlSU8oIFN0cmluZ0lPICksXHJcbiAgICAgIGxhbmd1YWdlOiBOdWxsYWJsZUlPKCBTdHJpbmdJTyApLFxyXG4gICAgICBwaXhlbFJhdGlvOiBOdWxsYWJsZUlPKCBTdHJpbmdJTyApLFxyXG4gICAgICBpc1dlYkdMU3VwcG9ydGVkOiBOdWxsYWJsZUlPKCBCb29sZWFuSU8gKSxcclxuICAgICAgY2hlY2tJRTExU3RlbmNpbFN1cHBvcnQ6IE51bGxhYmxlSU8oIEJvb2xlYW5JTyApLFxyXG4gICAgICBmbGFnczogTnVsbGFibGVJTyggU3RyaW5nSU8gKVxyXG4gICAgfVxyXG4gIH0gKTtcclxufVxyXG5cclxuam9pc3QucmVnaXN0ZXIoICdTaW1JbmZvJywgU2ltSW5mbyApO1xyXG5leHBvcnQgZGVmYXVsdCBTaW1JbmZvOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0EsU0FBU0EsS0FBSyxRQUFRLDZCQUE2QjtBQUNuRCxPQUFPQyxZQUFZLE1BQU0saUNBQWlDO0FBQzFELE9B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