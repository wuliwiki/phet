// Copyright 2015-2022, University of Colorado Boulder

/**
 * CreditsNode displays the credits section in the About dialog.
 * See documentation below for conventions related to each credits field.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Chris Malley (PixelZoom, Inc.)
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import DerivedProperty from '../../axon/js/DerivedProperty.js';
import optionize from '../../phet-core/js/optionize.js';
import StringUtils from '../../phetcommon/js/util/StringUtils.js';
import PhetFont from '../../scenery-phet/js/PhetFont.js';
import { VBox, VoicingRichText, VoicingText, VStrut } from '../../scenery/js/imports.js';
import joist from './joist.js';
import JoistStrings from './JoistStrings.js';
export default class CreditsNode extends VBox {
  constructor(credits, options) {
    options = optionize()({
      titleFont: new PhetFont({
        size: 18,
        weight: 'bold'
      }),
      textFont: new PhetFont(16),
      align: 'left',
      spacing: 1,
      maxWidth: 550
    }, options);
    const richTextOptions = {
      font: options.textFont,
      align: 'left',
      lineWrap: options.maxWidth,
      tagName: 'p'
    };
    const children = [];

    // Credits
    children.push(new VoicingText(JoistStrings.credits.titleStringProperty, {
      font: options.titleFont,
      // pdom
      tagName: 'h2'
    }));
    const formatStringProperty = (stringProperty, innerString) => {
      return new DerivedProperty([stringProperty], string => {
        return StringUtils.format(string, `\u202a${innerString}\u202c`);
      });
    };

    // Primary HTML5 designer first, followed by contributing designers (HTML5 and legacy) in alphabetical order.
    if (credits.leadDesign) {
      const designStringProperty = formatStringProperty(JoistStrings.credits.leadDesignStringProperty, credits.leadDesign);
      children.push(new VoicingRichText(designStringProperty, richTextOptions));
    }

    // Primary HTML5 developer first, followed by contributing developers (HTML5 and legacy) in alphabetical order.
    if (credits.softwareDevelopment) {
      const developmentStringProperty = formatStringProperty(JoistStrings.credits.softwareDevelopmentStringProperty, credits.softwareDevelopment);
      children.push(new VoicingRichText(developmentStringProperty, richTextOptions));
    }

    // In alphabetical order (includes HTML5 and legacy team members)
    if (credits.team) {
      const teamStringProperty = formatStringProperty(JoistStrings.credits.teamStringProperty, credits.team);
      children.push(new VoicingRichText(teamStringProperty, richTextOptions));
    }

    // In alphabetical order (this field is new for HTML5 sims)
    if (credits.contributors) {
      const contributorsStringProperty = formatStringProperty(JoistStrings.credits.contributorsStringProperty, credits.contributors);
      children.push(new VoicingRichText(contributorsStringProperty, richTextOptions));
    }

    // In alphabetical order (this field is new for HTML5 sims)
    if (credits.qualityAssurance) {
      const qualityAssuranceStringProperty = formatStringProperty(JoistStrings.credits.qualityAssuranceStringProperty, credits.qualityAssurance);
      children.push(new VoicingRichText(qualityAssuranceStringProperty, richTextOptions));
    }

    // In alphabetical order (this field is new for HTML5 sims)
    if (credits.graphicArts) {
      const graphicArtsStringProperty = formatStringProperty(JoistStrings.credits.graphicArtsStringProperty, credits.graphicArts);
      children.push(new VoicingRichText(graphicArtsStringProperty, richTextOptions));
    }

    // In alphabetical order (this field is new for HTML5 sims)
    if (credits.soundDesign) {
      const soundDesignStringProperty = formatStringProperty(JoistStrings.credits.soundDesignStringProperty, credits.soundDesign);
      children.push(new VoicingRichText(soundDesignStringProperty, richTextOptions));
    }

    // Thanks
    if (credits.thanks) {
      if (children.length > 0) {
        children.push(new VStrut(13));
      }
      children.push(new VoicingText(JoistStrings.credits.thanksStringProperty, {
        font: options.titleFont,
        tagName: 'h2'
      }));
      const thanksText = new VoicingRichText(credits.thanks, richTextOptions);
      thanksText.innerContent = credits.thanks;
      children.push(thanksText);
    }
    assert && assert(!options.children, 'CreditsNode sets children');
    options.children = children;
    super(options);
    this.disposeCreditsNode = () => {
      children.forEach(child => {
        child.dispose && child.dispose();
      });
    };
  }
  dispose() {
    this.disposeCreditsNode();
    super.dispose();
  }
}
joist.register('CreditsNode', CreditsNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJvcHRpb25pemUiLCJTdHJpbmdVdGlscyIsIlBoZXRGb250IiwiVkJveCIsIlZvaWNpbmdSaWNoVGV4dCIsIlZvaWNpbmdUZXh0IiwiVlN0cnV0Iiwiam9pc3QiLCJKb2lzdFN0cmluZ3MiLCJDcmVkaXRzTm9kZSIsImNvbnN0cnVjdG9yIiwiY3JlZGl0cyIsIm9wdGlvbnMiLCJ0aXRsZUZvbnQiLCJzaXplIiwid2VpZ2h0IiwidGV4dEZvbnQiLCJhbGlnbiIsInNwYWNpbmciLCJtYXhXaWR0aCIsInJpY2hUZXh0T3B0aW9ucyIsImZvbnQiLCJsaW5lV3JhcCIsInRhZ05hbWUiLCJjaGlsZHJlbiIsInB1c2giLCJ0aXRsZVN0cmluZ1Byb3BlcnR5IiwiZm9ybWF0U3RyaW5nUHJvcGVydHkiLCJzdHJpbmdQcm9wZXJ0eSIsImlubmVyU3RyaW5nIiwic3RyaW5nIiwiZm9ybWF0IiwibGVhZERlc2lnbiIsImRlc2lnblN0cmluZ1Byb3BlcnR5IiwibGVhZERlc2lnblN0cmluZ1Byb3BlcnR5Iiwic29mdHdhcmVEZXZlbG9wbWVudCIsImRldmVsb3BtZW50U3RyaW5nUHJvcGVydHkiLCJzb2Z0d2FyZURldmVsb3BtZW50U3RyaW5nUHJvcGVydHkiLCJ0ZWFtIiwidGVhbVN0cmluZ1Byb3BlcnR5IiwiY29udHJpYnV0b3JzIiwiY29udHJpYnV0b3JzU3RyaW5nUHJvcGVydHkiLCJxdWFsaXR5QXNzdXJhbmNlIiwicXVhbGl0eUFzc3VyYW5jZVN0cmluZ1Byb3BlcnR5IiwiZ3JhcGhpY0FydHMiLCJncmFwaGljQXJ0c1N0cmluZ1Byb3BlcnR5Iiwic291bmREZXNpZ24iLCJzb3VuZERlc2lnblN0cmluZ1Byb3BlcnR5IiwidGhhbmtzIiwibGVuZ3RoIiwidGhhbmtzU3RyaW5nUHJvcGVydHkiLCJ0aGFua3NUZXh0IiwiaW5uZXJDb250ZW50IiwiYXNzZXJ0IiwiZGlzcG9zZUNyZWRpdHNOb2RlIiwiZm9yRWFjaCIsImNoaWxkIiwiZGlzcG9zZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiQ3JlZGl0c05vZGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTUtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogQ3JlZGl0c05vZGUgZGlzcGxheXMgdGhlIGNyZWRpdHMgc2VjdGlvbiBpbiB0aGUgQWJvdXQgZGlhbG9nLlxyXG4gKiBTZWUgZG9jdW1lbnRhdGlvbiBiZWxvdyBmb3IgY29udmVudGlvbnMgcmVsYXRlZCB0byBlYWNoIGNyZWRpdHMgZmllbGQuXHJcbiAqXHJcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXHJcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cclxuICovXHJcblxyXG5pbXBvcnQgRGVyaXZlZFByb3BlcnR5IGZyb20gJy4uLy4uL2F4b24vanMvRGVyaXZlZFByb3BlcnR5LmpzJztcclxuaW1wb3J0IFRSZWFkT25seVByb3BlcnR5IGZyb20gJy4uLy4uL2F4b24vanMvVFJlYWRPbmx5UHJvcGVydHkuanMnO1xyXG5pbXBvcnQgb3B0aW9uaXplIGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgU3RyaW5nVXRpbHMgZnJvbSAnLi4vLi4vcGhldGNvbW1vbi9qcy91dGlsL1N0cmluZ1V0aWxzLmpzJztcclxuaW1wb3J0IFBoZXRGb250IGZyb20gJy4uLy4uL3NjZW5lcnktcGhldC9qcy9QaGV0Rm9udC5qcyc7XHJcbmltcG9ydCB7IE5vZGUsIFZCb3gsIFZCb3hPcHRpb25zLCBWb2ljaW5nUmljaFRleHQsIFZvaWNpbmdUZXh0LCBWU3RydXQgfSBmcm9tICcuLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgam9pc3QgZnJvbSAnLi9qb2lzdC5qcyc7XHJcbmltcG9ydCBKb2lzdFN0cmluZ3MgZnJvbSAnLi9Kb2lzdFN0cmluZ3MuanMnO1xyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IHtcclxuICB0aXRsZUZvbnQ/OiBQaGV0Rm9udDtcclxuICB0ZXh0Rm9udD86IFBoZXRGb250O1xyXG59O1xyXG50eXBlIENyZWRpdHNOb2RlT3B0aW9ucyA9IFNlbGZPcHRpb25zICYgVkJveE9wdGlvbnM7XHJcblxyXG5leHBvcnQgdHlwZSBDcmVkaXRzRGF0YSA9IHtcclxuICBsZWFkRGVzaWduPzogc3RyaW5nO1xyXG4gIHNvZnR3YXJlRGV2ZWxvcG1lbnQ/OiBzdHJpbmc7XHJcbiAgdGVhbT86IHN0cmluZztcclxuICBjb250cmlidXRvcnM/OiBzdHJpbmc7XHJcbiAgcXVhbGl0eUFzc3VyYW5jZT86IHN0cmluZztcclxuICBncmFwaGljQXJ0cz86IHN0cmluZztcclxuICBzb3VuZERlc2lnbj86IHN0cmluZztcclxuICB0aGFua3M/OiBzdHJpbmc7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDcmVkaXRzTm9kZSBleHRlbmRzIFZCb3gge1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgZGlzcG9zZUNyZWRpdHNOb2RlOiAoKSA9PiB2b2lkO1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIGNyZWRpdHM6IENyZWRpdHNEYXRhLCBvcHRpb25zOiBDcmVkaXRzTm9kZU9wdGlvbnMgKSB7XHJcblxyXG4gICAgb3B0aW9ucyA9IG9wdGlvbml6ZTxDcmVkaXRzTm9kZU9wdGlvbnMsIFNlbGZPcHRpb25zLCBWQm94T3B0aW9ucz4oKSgge1xyXG4gICAgICB0aXRsZUZvbnQ6IG5ldyBQaGV0Rm9udCggeyBzaXplOiAxOCwgd2VpZ2h0OiAnYm9sZCcgfSApLFxyXG4gICAgICB0ZXh0Rm9udDogbmV3IFBoZXRGb250KCAxNiApLFxyXG4gICAgICBhbGlnbjogJ2xlZnQnLFxyXG4gICAgICBzcGFjaW5nOiAxLFxyXG4gICAgICBtYXhXaWR0aDogNTUwXHJcbiAgICB9LCBvcHRpb25zICk7XHJcblxyXG4gICAgY29uc3QgcmljaFRleHRPcHRpb25zID0ge1xyXG4gICAgICBmb250OiBvcHRpb25zLnRleHRGb250LFxyXG4gICAgICBhbGlnbjogJ2xlZnQnIGFzIGNvbnN0LFxyXG4gICAgICBsaW5lV3JhcDogb3B0aW9ucy5tYXhXaWR0aCxcclxuICAgICAgdGFnTmFtZTogJ3AnXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGNoaWxkcmVuOiBOb2RlW10gPSBbXTtcclxuXHJcbiAgICAvLyBDcmVkaXRzXHJcbiAgICBjaGlsZHJlbi5wdXNoKCBuZXcgVm9pY2luZ1RleHQoIEpvaXN0U3RyaW5ncy5jcmVkaXRzLnRpdGxlU3RyaW5nUHJvcGVydHksIHtcclxuICAgICAgZm9udDogb3B0aW9ucy50aXRsZUZvbnQsXHJcblxyXG4gICAgICAvLyBwZG9tXHJcbiAgICAgIHRhZ05hbWU6ICdoMidcclxuICAgIH0gKSApO1xyXG5cclxuICAgIGNvbnN0IGZvcm1hdFN0cmluZ1Byb3BlcnR5ID0gKCBzdHJpbmdQcm9wZXJ0eTogVFJlYWRPbmx5UHJvcGVydHk8c3RyaW5nPiwgaW5uZXJTdHJpbmc6IHN0cmluZyApOiBUUmVhZE9ubHlQcm9wZXJ0eTxzdHJpbmc+ID0+IHtcclxuICAgICAgcmV0dXJuIG5ldyBEZXJpdmVkUHJvcGVydHkoIFsgc3RyaW5nUHJvcGVydHkgXSwgc3RyaW5nID0+IHtcclxuICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuZm9ybWF0KCBzdHJpbmcsIGBcXHUyMDJhJHtpbm5lclN0cmluZ31cXHUyMDJjYCApO1xyXG4gICAgICB9ICk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFByaW1hcnkgSFRNTDUgZGVzaWduZXIgZmlyc3QsIGZvbGxvd2VkIGJ5IGNvbnRyaWJ1dGluZyBkZXNpZ25lcnMgKEhUTUw1IGFuZCBsZWdhY3kpIGluIGFscGhhYmV0aWNhbCBvcmRlci5cclxuICAgIGlmICggY3JlZGl0cy5sZWFkRGVzaWduICkge1xyXG4gICAgICBjb25zdCBkZXNpZ25TdHJpbmdQcm9wZXJ0eSA9IGZvcm1hdFN0cmluZ1Byb3BlcnR5KCBKb2lzdFN0cmluZ3MuY3JlZGl0cy5sZWFkRGVzaWduU3RyaW5nUHJvcGVydHksIGNyZWRpdHMubGVhZERlc2lnbiApO1xyXG4gICAgICBjaGlsZHJlbi5wdXNoKCBuZXcgVm9pY2luZ1JpY2hUZXh0KCBkZXNpZ25TdHJpbmdQcm9wZXJ0eSwgcmljaFRleHRPcHRpb25zICkgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBQcmltYXJ5IEhUTUw1IGRldmVsb3BlciBmaXJzdCwgZm9sbG93ZWQgYnkgY29udHJpYnV0aW5nIGRldmVsb3BlcnMgKEhUTUw1IGFuZCBsZWdhY3kpIGluIGFscGhhYmV0aWNhbCBvcmRlci5cclxuICAgIGlmICggY3JlZGl0cy5zb2Z0d2FyZURldmVsb3BtZW50ICkge1xyXG4gICAgICBjb25zdCBkZXZlbG9wbWVudFN0cmluZ1Byb3BlcnR5ID0gZm9ybWF0U3RyaW5nUHJvcGVydHkoIEpvaXN0U3RyaW5ncy5jcmVkaXRzLnNvZnR3YXJlRGV2ZWxvcG1lbnRTdHJpbmdQcm9wZXJ0eSwgY3JlZGl0cy5zb2Z0d2FyZURldmVsb3BtZW50ICk7XHJcbiAgICAgIGNoaWxkcmVuLnB1c2goIG5ldyBWb2ljaW5nUmljaFRleHQoIGRldmVsb3BtZW50U3RyaW5nUHJvcGVydHksIHJpY2hUZXh0T3B0aW9ucyApICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSW4gYWxwaGFiZXRpY2FsIG9yZGVyIChpbmNsdWRlcyBIVE1MNSBhbmQgbGVnYWN5IHRlYW0gbWVtYmVycylcclxuICAgIGlmICggY3JlZGl0cy50ZWFtICkge1xyXG4gICAgICBjb25zdCB0ZWFtU3RyaW5nUHJvcGVydHkgPSBmb3JtYXRTdHJpbmdQcm9wZXJ0eSggSm9pc3RTdHJpbmdzLmNyZWRpdHMudGVhbVN0cmluZ1Byb3BlcnR5LCBjcmVkaXRzLnRlYW0gKTtcclxuICAgICAgY2hpbGRyZW4ucHVzaCggbmV3IFZvaWNpbmdSaWNoVGV4dCggdGVhbVN0cmluZ1Byb3BlcnR5LCByaWNoVGV4dE9wdGlvbnMgKSApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEluIGFscGhhYmV0aWNhbCBvcmRlciAodGhpcyBmaWVsZCBpcyBuZXcgZm9yIEhUTUw1IHNpbXMpXHJcbiAgICBpZiAoIGNyZWRpdHMuY29udHJpYnV0b3JzICkge1xyXG4gICAgICBjb25zdCBjb250cmlidXRvcnNTdHJpbmdQcm9wZXJ0eSA9IGZvcm1hdFN0cmluZ1Byb3BlcnR5KCBKb2lzdFN0cmluZ3MuY3JlZGl0cy5jb250cmlidXRvcnNTdHJpbmdQcm9wZXJ0eSwgY3JlZGl0cy5jb250cmlidXRvcnMgKTtcclxuICAgICAgY2hpbGRyZW4ucHVzaCggbmV3IFZvaWNpbmdSaWNoVGV4dCggY29udHJpYnV0b3JzU3RyaW5nUHJvcGVydHksIHJpY2hUZXh0T3B0aW9ucyApICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSW4gYWxwaGFiZXRpY2FsIG9yZGVyICh0aGlzIGZpZWxkIGlzIG5ldyBmb3IgSFRNTDUgc2ltcylcclxuICAgIGlmICggY3JlZGl0cy5xdWFsaXR5QXNzdXJhbmNlICkge1xyXG4gICAgICBjb25zdCBxdWFsaXR5QXNzdXJhbmNlU3RyaW5nUHJvcGVydHkgPSBmb3JtYXRTdHJpbmdQcm9wZXJ0eSggSm9pc3RTdHJpbmdzLmNyZWRpdHMucXVhbGl0eUFzc3VyYW5jZVN0cmluZ1Byb3BlcnR5LCBjcmVkaXRzLnF1YWxpdHlBc3N1cmFuY2UgKTtcclxuICAgICAgY2hpbGRyZW4ucHVzaCggbmV3IFZvaWNpbmdSaWNoVGV4dCggcXVhbGl0eUFzc3VyYW5jZVN0cmluZ1Byb3BlcnR5LCByaWNoVGV4dE9wdGlvbnMgKSApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEluIGFscGhhYmV0aWNhbCBvcmRlciAodGhpcyBmaWVsZCBpcyBuZXcgZm9yIEhUTUw1IHNpbXMpXHJcbiAgICBpZiAoIGNyZWRpdHMuZ3JhcGhpY0FydHMgKSB7XHJcbiAgICAgIGNvbnN0IGdyYXBoaWNBcnRzU3RyaW5nUHJvcGVydHkgPSBmb3JtYXRTdHJpbmdQcm9wZXJ0eSggSm9pc3RTdHJpbmdzLmNyZWRpdHMuZ3JhcGhpY0FydHNTdHJpbmdQcm9wZXJ0eSwgY3JlZGl0cy5ncmFwaGljQXJ0cyApO1xyXG4gICAgICBjaGlsZHJlbi5wdXNoKCBuZXcgVm9pY2luZ1JpY2hUZXh0KCBncmFwaGljQXJ0c1N0cmluZ1Byb3BlcnR5LCByaWNoVGV4dE9wdGlvbnMgKSApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEluIGFscGhhYmV0aWNhbCBvcmRlciAodGhpcyBmaWVsZCBpcyBuZXcgZm9yIEhUTUw1IHNpbXMpXHJcbiAgICBpZiAoIGNyZWRpdHMuc291bmREZXNpZ24gKSB7XHJcbiAgICAgIGNvbnN0IHNvdW5kRGVzaWduU3RyaW5nUHJvcGVydHkgPSBmb3JtYXRTdHJpbmdQcm9wZXJ0eSggSm9pc3RTdHJpbmdzLmNyZWRpdHMuc291bmREZXNpZ25TdHJpbmdQcm9wZXJ0eSwgY3JlZGl0cy5zb3VuZERlc2lnbiApO1xyXG4gICAgICBjaGlsZHJlbi5wdXNoKCBuZXcgVm9pY2luZ1JpY2hUZXh0KCBzb3VuZERlc2lnblN0cmluZ1Byb3BlcnR5LCByaWNoVGV4dE9wdGlvbnMgKSApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFRoYW5rc1xyXG4gICAgaWYgKCBjcmVkaXRzLnRoYW5rcyApIHtcclxuICAgICAgaWYgKCBjaGlsZHJlbi5sZW5ndGggPiAwICkgeyBjaGlsZHJlbi5wdXNoKCBuZXcgVlN0cnV0KCAxMyApICk7IH1cclxuICAgICAgY2hpbGRyZW4ucHVzaCggbmV3IFZvaWNpbmdUZXh0KCBKb2lzdFN0cmluZ3MuY3JlZGl0cy50aGFua3NTdHJpbmdQcm9wZXJ0eSwge1xyXG4gICAgICAgIGZvbnQ6IG9wdGlvbnMudGl0bGVGb250LFxyXG4gICAgICAgIHRhZ05hbWU6ICdoMidcclxuICAgICAgfSApICk7XHJcblxyXG4gICAgICBjb25zdCB0aGFua3NUZXh0ID0gbmV3IFZvaWNpbmdSaWNoVGV4dCggY3JlZGl0cy50aGFua3MsIHJpY2hUZXh0T3B0aW9ucyApO1xyXG4gICAgICB0aGFua3NUZXh0LmlubmVyQ29udGVudCA9IGNyZWRpdHMudGhhbmtzO1xyXG4gICAgICBjaGlsZHJlbi5wdXNoKCB0aGFua3NUZXh0ICk7XHJcbiAgICB9XHJcblxyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggIW9wdGlvbnMuY2hpbGRyZW4sICdDcmVkaXRzTm9kZSBzZXRzIGNoaWxkcmVuJyApO1xyXG4gICAgb3B0aW9ucy5jaGlsZHJlbiA9IGNoaWxkcmVuO1xyXG5cclxuICAgIHN1cGVyKCBvcHRpb25zICk7XHJcblxyXG4gICAgdGhpcy5kaXNwb3NlQ3JlZGl0c05vZGUgPSAoKSA9PiB7XHJcbiAgICAgIGNoaWxkcmVuLmZvckVhY2goIGNoaWxkID0+IHtcclxuICAgICAgICBjaGlsZC5kaXNwb3NlICYmIGNoaWxkLmRpc3Bvc2UoKTtcclxuICAgICAgfSApO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvdmVycmlkZSBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgdGhpcy5kaXNwb3NlQ3JlZGl0c05vZGUoKTtcclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcbn1cclxuXHJcbmpvaXN0LnJlZ2lzdGVyKCAnQ3JlZGl0c05vZGUnLCBDcmVkaXRzTm9kZSApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxlQUFlLE1BQU0sa0NBQWtDO0FBRTlELE9BQU9DLFNBQVMsTUFBTSxpQ0FBaUM7QUFDdkQsT0FBT0MsV0FBVyxNQUFNLHlDQUF5QztBQUNqRSxPQUFPQyxRQUFRLE1BQU0sbUNBQW1DO0FBQ3hELFNBQWVDLElBQUksRUFBZUMsZUFBZSxFQUFFQyxXQUFXLEVBQUVDLE1BQU0sUUFBUSw2QkFBNkI7QUFDM0csT0FBT0MsS0FBSyxNQUFN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