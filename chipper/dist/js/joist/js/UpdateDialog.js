// Copyright 2015-2022, University of Colorado Boulder

/**
 * UpdateDialog is a fixed-size dialog that displays the current update status.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import stepTimer from '../../axon/js/stepTimer.js';
import { Node } from '../../scenery/js/imports.js';
import Dialog from '../../sun/js/Dialog.js';
import joist from './joist.js';
import updateCheck from './updateCheck.js';
import UpdateNodes from './UpdateNodes.js';
import UpdateState from './UpdateState.js';
export default class UpdateDialog extends Dialog {
  // Listener that should be called every frame where we are shown, with {number} dt as a single parameter.

  // Listener that should be called whenever our update state changes (while we are displayed)

  constructor(providedOptions) {
    assert && assert(updateCheck.areUpdatesChecked, 'Updates need to be checked for UpdateDialog to be created');
    const positionOptions = {
      centerX: 0,
      centerY: 0,
      big: true
    };
    const checkingNode = UpdateNodes.createCheckingNode(positionOptions);
    const upToDateNode = UpdateNodes.createUpToDateNode(positionOptions);
    const outOfDateNode = new Node({
      // pdom - dialog content contained in parent div so ARIA roles can be applied to all children
      tagName: 'div'
    });
    const offlineNode = UpdateNodes.createOfflineNode(positionOptions);
    const content = new Node({
      children: [checkingNode, upToDateNode, outOfDateNode, offlineNode],
      // pdom
      tagName: 'div'
    });
    super(content, providedOptions);
    const updateOutOfDateNode = () => {
      // fallback size placeholder for version
      const latestVersionString = updateCheck.latestVersion ? updateCheck.latestVersion.toString() : 'x.x.xx';
      const ourVersionString = updateCheck.ourVersion.toString();
      outOfDateNode.children = [UpdateNodes.createOutOfDateDialogNode(this, ourVersionString, latestVersionString, positionOptions)];
    };
    updateOutOfDateNode();
    this.updateStepListener = checkingNode.stepListener;
    this.updateVisibilityListener = state => {
      if (state === UpdateState.OUT_OF_DATE) {
        updateOutOfDateNode();
      }
      checkingNode.visible = state === UpdateState.CHECKING;
      upToDateNode.visible = state === UpdateState.UP_TO_DATE;
      outOfDateNode.visible = state === UpdateState.OUT_OF_DATE;
      offlineNode.visible = state === UpdateState.OFFLINE;

      // pdom - update visibility of update nodes for screen readers by adding/removing content from the DOM,
      // necessary because screen readers will read hidden content in a Dialog
      checkingNode.pdomVisible = checkingNode.visible;
      upToDateNode.pdomVisible = upToDateNode.visible;
      outOfDateNode.pdomVisible = outOfDateNode.visible;
      offlineNode.pdomVisible = offlineNode.visible;
    };
  }

  /**
   * Shows the UpdateDialog, registering listeners that should only be called while the dialog is shown.
   * (joist-internal)
   */
  show() {
    if (updateCheck.areUpdatesChecked && !this.isShowingProperty.value) {
      updateCheck.resetTimeout();

      // Fire off a new update check if we were marked as offline or unchecked before, and we handle updates.
      if (updateCheck.stateProperty.value === UpdateState.OFFLINE || updateCheck.stateProperty.value === UpdateState.UNCHECKED) {
        updateCheck.check();
      }

      // Hook up our spinner listener when we're shown
      stepTimer.addListener(this.updateStepListener);

      // Hook up our visibility listener
      updateCheck.stateProperty.link(this.updateVisibilityListener);
    }
    super.show();
  }

  /**
   * Removes listeners that should only be called when the Dialog is shown.
   * (joist-internal)
   */
  hide() {
    if (this.isShowingProperty.value) {
      super.hide();
      if (updateCheck.areUpdatesChecked) {
        // Disconnect our visibility listener
        updateCheck.stateProperty.unlink(this.updateVisibilityListener);

        // Disconnect our spinner listener when we're hidden
        stepTimer.removeListener(this.updateStepListener);
      }
    }
  }
}
joist.register('UpdateDialog', UpdateDialog);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzdGVwVGltZXIiLCJOb2RlIiwiRGlhbG9nIiwiam9pc3QiLCJ1cGRhdGVDaGVjayIsIlVwZGF0ZU5vZGVzIiwiVXBkYXRlU3RhdGUiLCJVcGRhdGVEaWFsb2ciLCJjb25zdHJ1Y3RvciIsInByb3ZpZGVkT3B0aW9ucyIsImFzc2VydCIsImFyZVVwZGF0ZXNDaGVja2VkIiwicG9zaXRpb25PcHRpb25zIiwiY2VudGVyWCIsImNlbnRlclkiLCJiaWciLCJjaGVja2luZ05vZGUiLCJjcmVhdGVDaGVja2luZ05vZGUiLCJ1cFRvRGF0ZU5vZGUiLCJjcmVhdGVVcFRvRGF0ZU5vZGUiLCJvdXRPZkRhdGVOb2RlIiwidGFnTmFtZSIsIm9mZmxpbmVOb2RlIiwiY3JlYXRlT2ZmbGluZU5vZGUiLCJjb250ZW50IiwiY2hpbGRyZW4iLCJ1cGRhdGVPdXRPZkRhdGVOb2RlIiwibGF0ZXN0VmVyc2lvblN0cmluZyIsImxhdGVzdFZlcnNpb24iLCJ0b1N0cmluZyIsIm91clZlcnNpb25TdHJpbmciLCJvdXJWZXJzaW9uIiwiY3JlYXRlT3V0T2ZEYXRlRGlhbG9nTm9kZSIsInVwZGF0ZVN0ZXBMaXN0ZW5lciIsInN0ZXBMaXN0ZW5lciIsInVwZGF0ZVZpc2liaWxpdHlMaXN0ZW5lciIsInN0YXRlIiwiT1VUX09GX0RBVEUiLCJ2aXNpYmxlIiwiQ0hFQ0tJTkciLCJVUF9UT19EQVRFIiwiT0ZGTElORSIsInBkb21WaXNpYmxlIiwic2hvdyIsImlzU2hvd2luZ1Byb3BlcnR5IiwidmFsdWUiLCJyZXNldFRpbWVvdXQiLCJzdGF0ZVByb3BlcnR5IiwiVU5DSEVDS0VEIiwiY2hlY2siLCJhZGRMaXN0ZW5lciIsImxpbmsiLCJoaWRlIiwidW5saW5rIiwicmVtb3ZlTGlzdGVuZXIiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlVwZGF0ZURpYWxvZy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNS0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBVcGRhdGVEaWFsb2cgaXMgYSBmaXhlZC1zaXplIGRpYWxvZyB0aGF0IGRpc3BsYXlzIHRoZSBjdXJyZW50IHVwZGF0ZSBzdGF0dXMuXHJcbiAqXHJcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cclxuICovXHJcblxyXG5pbXBvcnQgc3RlcFRpbWVyIGZyb20gJy4uLy4uL2F4b24vanMvc3RlcFRpbWVyLmpzJztcclxuaW1wb3J0IHsgRW1wdHlTZWxmT3B0aW9ucyB9IGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IERpYWxvZywgeyBEaWFsb2dPcHRpb25zIH0gZnJvbSAnLi4vLi4vc3VuL2pzL0RpYWxvZy5qcyc7XHJcbmltcG9ydCBqb2lzdCBmcm9tICcuL2pvaXN0LmpzJztcclxuaW1wb3J0IHVwZGF0ZUNoZWNrIGZyb20gJy4vdXBkYXRlQ2hlY2suanMnO1xyXG5pbXBvcnQgVXBkYXRlTm9kZXMgZnJvbSAnLi9VcGRhdGVOb2Rlcy5qcyc7XHJcbmltcG9ydCBVcGRhdGVTdGF0ZSBmcm9tICcuL1VwZGF0ZVN0YXRlLmpzJztcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSBFbXB0eVNlbGZPcHRpb25zO1xyXG5cclxuZXhwb3J0IHR5cGUgVXBkYXRlRGlhbG9nT3B0aW9ucyA9IFNlbGZPcHRpb25zICYgRGlhbG9nT3B0aW9ucztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVwZGF0ZURpYWxvZyBleHRlbmRzIERpYWxvZyB7XHJcblxyXG4gIC8vIExpc3RlbmVyIHRoYXQgc2hvdWxkIGJlIGNhbGxlZCBldmVyeSBmcmFtZSB3aGVyZSB3ZSBhcmUgc2hvd24sIHdpdGgge251bWJlcn0gZHQgYXMgYSBzaW5nbGUgcGFyYW1ldGVyLlxyXG4gIHByaXZhdGUgcmVhZG9ubHkgdXBkYXRlU3RlcExpc3RlbmVyOiAoIGR0OiBudW1iZXIgKSA9PiB2b2lkO1xyXG5cclxuICAvLyBMaXN0ZW5lciB0aGF0IHNob3VsZCBiZSBjYWxsZWQgd2hlbmV2ZXIgb3VyIHVwZGF0ZSBzdGF0ZSBjaGFuZ2VzICh3aGlsZSB3ZSBhcmUgZGlzcGxheWVkKVxyXG4gIHByaXZhdGUgcmVhZG9ubHkgdXBkYXRlVmlzaWJpbGl0eUxpc3RlbmVyOiAoIHN0YXRlOiBVcGRhdGVTdGF0ZSApID0+IHZvaWQ7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggcHJvdmlkZWRPcHRpb25zPzogVXBkYXRlRGlhbG9nT3B0aW9ucyApIHtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIHVwZGF0ZUNoZWNrLmFyZVVwZGF0ZXNDaGVja2VkLFxyXG4gICAgICAnVXBkYXRlcyBuZWVkIHRvIGJlIGNoZWNrZWQgZm9yIFVwZGF0ZURpYWxvZyB0byBiZSBjcmVhdGVkJyApO1xyXG5cclxuICAgIGNvbnN0IHBvc2l0aW9uT3B0aW9ucyA9IHsgY2VudGVyWDogMCwgY2VudGVyWTogMCwgYmlnOiB0cnVlIH07XHJcbiAgICBjb25zdCBjaGVja2luZ05vZGUgPSBVcGRhdGVOb2Rlcy5jcmVhdGVDaGVja2luZ05vZGUoIHBvc2l0aW9uT3B0aW9ucyApO1xyXG4gICAgY29uc3QgdXBUb0RhdGVOb2RlID0gVXBkYXRlTm9kZXMuY3JlYXRlVXBUb0RhdGVOb2RlKCBwb3NpdGlvbk9wdGlvbnMgKTtcclxuXHJcbiAgICBjb25zdCBvdXRPZkRhdGVOb2RlID0gbmV3IE5vZGUoIHtcclxuXHJcbiAgICAgIC8vIHBkb20gLSBkaWFsb2cgY29udGVudCBjb250YWluZWQgaW4gcGFyZW50IGRpdiBzbyBBUklBIHJvbGVzIGNhbiBiZSBhcHBsaWVkIHRvIGFsbCBjaGlsZHJlblxyXG4gICAgICB0YWdOYW1lOiAnZGl2J1xyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IG9mZmxpbmVOb2RlID0gVXBkYXRlTm9kZXMuY3JlYXRlT2ZmbGluZU5vZGUoIHBvc2l0aW9uT3B0aW9ucyApO1xyXG5cclxuICAgIGNvbnN0IGNvbnRlbnQgPSBuZXcgTm9kZSgge1xyXG4gICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgIGNoZWNraW5nTm9kZSxcclxuICAgICAgICB1cFRvRGF0ZU5vZGUsXHJcbiAgICAgICAgb3V0T2ZEYXRlTm9kZSxcclxuICAgICAgICBvZmZsaW5lTm9kZVxyXG4gICAgICBdLFxyXG5cclxuICAgICAgLy8gcGRvbVxyXG4gICAgICB0YWdOYW1lOiAnZGl2J1xyXG4gICAgfSApO1xyXG5cclxuICAgIHN1cGVyKCBjb250ZW50LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICBjb25zdCB1cGRhdGVPdXRPZkRhdGVOb2RlID0gKCkgPT4ge1xyXG5cclxuICAgICAgLy8gZmFsbGJhY2sgc2l6ZSBwbGFjZWhvbGRlciBmb3IgdmVyc2lvblxyXG4gICAgICBjb25zdCBsYXRlc3RWZXJzaW9uU3RyaW5nID0gdXBkYXRlQ2hlY2subGF0ZXN0VmVyc2lvbiA/IHVwZGF0ZUNoZWNrLmxhdGVzdFZlcnNpb24udG9TdHJpbmcoKSA6ICd4LngueHgnO1xyXG4gICAgICBjb25zdCBvdXJWZXJzaW9uU3RyaW5nID0gdXBkYXRlQ2hlY2sub3VyVmVyc2lvbi50b1N0cmluZygpO1xyXG5cclxuICAgICAgb3V0T2ZEYXRlTm9kZS5jaGlsZHJlbiA9IFtcclxuICAgICAgICBVcGRhdGVOb2Rlcy5jcmVhdGVPdXRPZkRhdGVEaWFsb2dOb2RlKCB0aGlzLCBvdXJWZXJzaW9uU3RyaW5nLCBsYXRlc3RWZXJzaW9uU3RyaW5nLCBwb3NpdGlvbk9wdGlvbnMgKVxyXG4gICAgICBdO1xyXG4gICAgfTtcclxuXHJcbiAgICB1cGRhdGVPdXRPZkRhdGVOb2RlKCk7XHJcblxyXG4gICAgdGhpcy51cGRhdGVTdGVwTGlzdGVuZXIgPSBjaGVja2luZ05vZGUuc3RlcExpc3RlbmVyO1xyXG5cclxuICAgIHRoaXMudXBkYXRlVmlzaWJpbGl0eUxpc3RlbmVyID0gc3RhdGUgPT4ge1xyXG4gICAgICBpZiAoIHN0YXRlID09PSBVcGRhdGVTdGF0ZS5PVVRfT0ZfREFURSApIHtcclxuICAgICAgICB1cGRhdGVPdXRPZkRhdGVOb2RlKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNoZWNraW5nTm9kZS52aXNpYmxlID0gc3RhdGUgPT09IFVwZGF0ZVN0YXRlLkNIRUNLSU5HO1xyXG4gICAgICB1cFRvRGF0ZU5vZGUudmlzaWJsZSA9IHN0YXRlID09PSBVcGRhdGVTdGF0ZS5VUF9UT19EQVRFO1xyXG4gICAgICBvdXRPZkRhdGVOb2RlLnZpc2libGUgPSBzdGF0ZSA9PT0gVXBkYXRlU3RhdGUuT1VUX09GX0RBVEU7XHJcbiAgICAgIG9mZmxpbmVOb2RlLnZpc2libGUgPSBzdGF0ZSA9PT0gVXBkYXRlU3RhdGUuT0ZGTElORTtcclxuXHJcbiAgICAgIC8vIHBkb20gLSB1cGRhdGUgdmlzaWJpbGl0eSBvZiB1cGRhdGUgbm9kZXMgZm9yIHNjcmVlbiByZWFkZXJzIGJ5IGFkZGluZy9yZW1vdmluZyBjb250ZW50IGZyb20gdGhlIERPTSxcclxuICAgICAgLy8gbmVjZXNzYXJ5IGJlY2F1c2Ugc2NyZWVuIHJlYWRlcnMgd2lsbCByZWFkIGhpZGRlbiBjb250ZW50IGluIGEgRGlhbG9nXHJcbiAgICAgIGNoZWNraW5nTm9kZS5wZG9tVmlzaWJsZSA9IGNoZWNraW5nTm9kZS52aXNpYmxlO1xyXG4gICAgICB1cFRvRGF0ZU5vZGUucGRvbVZpc2libGUgPSB1cFRvRGF0ZU5vZGUudmlzaWJsZTtcclxuICAgICAgb3V0T2ZEYXRlTm9kZS5wZG9tVmlzaWJsZSA9IG91dE9mRGF0ZU5vZGUudmlzaWJsZTtcclxuICAgICAgb2ZmbGluZU5vZGUucGRvbVZpc2libGUgPSBvZmZsaW5lTm9kZS52aXNpYmxlO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNob3dzIHRoZSBVcGRhdGVEaWFsb2csIHJlZ2lzdGVyaW5nIGxpc3RlbmVycyB0aGF0IHNob3VsZCBvbmx5IGJlIGNhbGxlZCB3aGlsZSB0aGUgZGlhbG9nIGlzIHNob3duLlxyXG4gICAqIChqb2lzdC1pbnRlcm5hbClcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgc2hvdygpOiB2b2lkIHtcclxuICAgIGlmICggdXBkYXRlQ2hlY2suYXJlVXBkYXRlc0NoZWNrZWQgJiYgIXRoaXMuaXNTaG93aW5nUHJvcGVydHkudmFsdWUgKSB7XHJcbiAgICAgIHVwZGF0ZUNoZWNrLnJlc2V0VGltZW91dCgpO1xyXG5cclxuICAgICAgLy8gRmlyZSBvZmYgYSBuZXcgdXBkYXRlIGNoZWNrIGlmIHdlIHdlcmUgbWFya2VkIGFzIG9mZmxpbmUgb3IgdW5jaGVja2VkIGJlZm9yZSwgYW5kIHdlIGhhbmRsZSB1cGRhdGVzLlxyXG4gICAgICBpZiAoIHVwZGF0ZUNoZWNrLnN0YXRlUHJvcGVydHkudmFsdWUgPT09IFVwZGF0ZVN0YXRlLk9GRkxJTkUgfHwgdXBkYXRlQ2hlY2suc3RhdGVQcm9wZXJ0eS52YWx1ZSA9PT0gVXBkYXRlU3RhdGUuVU5DSEVDS0VEICkge1xyXG4gICAgICAgIHVwZGF0ZUNoZWNrLmNoZWNrKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEhvb2sgdXAgb3VyIHNwaW5uZXIgbGlzdGVuZXIgd2hlbiB3ZSdyZSBzaG93blxyXG4gICAgICBzdGVwVGltZXIuYWRkTGlzdGVuZXIoIHRoaXMudXBkYXRlU3RlcExpc3RlbmVyICk7XHJcblxyXG4gICAgICAvLyBIb29rIHVwIG91ciB2aXNpYmlsaXR5IGxpc3RlbmVyXHJcbiAgICAgIHVwZGF0ZUNoZWNrLnN0YXRlUHJvcGVydHkubGluayggdGhpcy51cGRhdGVWaXNpYmlsaXR5TGlzdGVuZXIgKTtcclxuICAgIH1cclxuXHJcbiAgICBzdXBlci5zaG93KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIGxpc3RlbmVycyB0aGF0IHNob3VsZCBvbmx5IGJlIGNhbGxlZCB3aGVuIHRoZSBEaWFsb2cgaXMgc2hvd24uXHJcbiAgICogKGpvaXN0LWludGVybmFsKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBoaWRlKCk6IHZvaWQge1xyXG4gICAgaWYgKCB0aGlzLmlzU2hvd2luZ1Byb3BlcnR5LnZhbHVlICkge1xyXG4gICAgICBzdXBlci5oaWRlKCk7XHJcblxyXG4gICAgICBpZiAoIHVwZGF0ZUNoZWNrLmFyZVVwZGF0ZXNDaGVja2VkICkge1xyXG5cclxuICAgICAgICAvLyBEaXNjb25uZWN0IG91ciB2aXNpYmlsaXR5IGxpc3RlbmVyXHJcbiAgICAgICAgdXBkYXRlQ2hlY2suc3RhdGVQcm9wZXJ0eS51bmxpbmsoIHRoaXMudXBkYXRlVmlzaWJpbGl0eUxpc3RlbmVyICk7XHJcblxyXG4gICAgICAgIC8vIERpc2Nvbm5lY3Qgb3VyIHNwaW5uZXIgbGlzdGVuZXIgd2hlbiB3ZSdyZSBoaWRkZW5cclxuICAgICAgICBzdGVwVGltZXIucmVtb3ZlTGlzdGVuZXIoIHRoaXMudXBkYXRlU3RlcExpc3RlbmVyICk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmpvaXN0LnJlZ2lzdGVyKCAnVXBkYXRlRGlhbG9nJywgVXBkYXRlRGlhbG9nICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFNBQVMsTUFBTSw0QkFBNEI7QUFFbEQsU0FBU0MsSUFBSSxRQUFRLDZCQUE2QjtBQUNsRCxPQUFPQyxNQUFNLE1BQXlCLHdCQUF3QjtBQUM5RCxPQUFPQyxLQUFLLE1BQU0sWUFBWTtBQUM5QixPQUFPQyxXQUFXLE1BQU0sa0JBQWtCO0FBQzFDLE9BQU9DLFdBQVcsTUFBTSxrQkFBa0I7QUFDMUMsT0FBT0MsV0FBVyxNQUFNLGtCQUFrQjtBQU0xQyxlQUFlLE1BQU1DLFlBQVksU0FBU0wsTUFBTSxDQUFDO0VBRS9DOztFQUdBOztFQUdPTSxXQUFXQSxDQUFFQyxlQUFxQyxFQUFHO0lBQzFEQyxNQUFNLElBQUlBLE1BQU0sQ0FBRU4s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