// Copyright 2018-2023, University of Colorado Boulder

/**
 * NavigationBarAudioToggleButton is a button for controlling whether audio is enabled or disabled that is designed to
 * work on the PhET navigation bar. Audio includes all auditory features in the sim, so when this is button is toggled
 * "off", the sim should be totally silent.
 *
 * If you're wondering why this is drawn in code rather than using a Font Awesome node, please see
 * https://github.com/phetsims/tambo/issues/19.
 *
 * @author John Blanco
 * @author Chris Klusendorf
 */

import Vector2 from '../../dot/js/Vector2.js';
import { Shape } from '../../kite/js/imports.js';
import optionize from '../../phet-core/js/optionize.js';
import { Color, Node, Path, Rectangle, voicingManager } from '../../scenery/js/imports.js';
import ToggleNode from '../../sun/js/ToggleNode.js';
import ActivationUtterance from '../../utterance-queue/js/ActivationUtterance.js';
import audioManager from './audioManager.js';
import joist from './joist.js';
import JoistButton from './JoistButton.js';
import JoistStrings from './JoistStrings.js';

// constants for node background
const NODE_HEIGHT = 22.0;
const NODE_WIDTH = NODE_HEIGHT * 1.13;

// constants for drawing speaker
const SPEAKER_HEIGHT = NODE_HEIGHT * 0.77;
const SPEAKER_WIDTH = SPEAKER_HEIGHT * 0.58;
const SPEAKER_BACK_WIDTH = SPEAKER_WIDTH * 0.46;
const SPEAKER_BACK_HEIGHT = SPEAKER_HEIGHT * 0.35;
const SPEAKER_BACK_Y_SPACE = (SPEAKER_HEIGHT - SPEAKER_BACK_HEIGHT) / 2.0; // space between top of speaker back and top of cone
const CORNER_RADIUS = 1.0;

// constant for drawing sound off X
const X_WIDTH = SPEAKER_HEIGHT * 0.52;

// constants for drawing sound on curves
const MAX_CURVE_RADIUS = SPEAKER_HEIGHT * 0.63;
const RADIUS_STEPPER = SPEAKER_HEIGHT * 0.23;
const MED_CURVE_RADIUS = MAX_CURVE_RADIUS - RADIUS_STEPPER;
const MIN_CURVE_RADIUS = MED_CURVE_RADIUS - RADIUS_STEPPER;
const CURVE_ANGLE = Math.PI / 2.7;
const NEG_CURVE_ANGLE = CURVE_ANGLE * -1.0;
class NavigationBarAudioToggleButton extends JoistButton {
  constructor(soundEnabledProperty, backgroundColorProperty, providedOptions) {
    const options = optionize()({
      // JoistButton options
      highlightExtensionWidth: 5 + 3.6,
      highlightExtensionHeight: 10,
      highlightCenterOffsetY: 0,
      // enabled:true by default, but disable if fuzzing when supporting voicing
      enabled: !(phet.chipper.isFuzzEnabled() && phet.chipper.queryParameters.supportsVoicing),
      visiblePropertyOptions: {
        phetioFeatured: true
      },
      // pdom
      innerContent: JoistStrings.a11y.soundToggle.labelStringProperty,
      // voicing
      voicingNameResponse: JoistStrings.a11y.soundToggle.labelStringProperty
    }, providedOptions);
    assert && assert(options.listener === undefined, 'NavigationBarAudioToggleButton sets listener');
    options.listener = () => soundEnabledProperty.set(!soundEnabledProperty.get());
    const soundOnNode = new Node();
    const soundOffNode = new Node();
    const backgroundNode = new Rectangle(0, 0, NODE_WIDTH, NODE_HEIGHT, {
      fill: 'transparent'
    });
    soundOnNode.addChild(backgroundNode);
    soundOffNode.addChild(backgroundNode);

    // create speaker for both sound on and sound off
    const speakerNode = new Path(new Shape().moveTo(SPEAKER_WIDTH, 0).lineTo(SPEAKER_BACK_WIDTH, SPEAKER_BACK_Y_SPACE).lineTo(CORNER_RADIUS, SPEAKER_BACK_Y_SPACE).arc(CORNER_RADIUS, SPEAKER_BACK_Y_SPACE + CORNER_RADIUS, CORNER_RADIUS, Math.PI * 1.5, Math.PI, true).lineToRelative(0, SPEAKER_BACK_HEIGHT - 2 * CORNER_RADIUS).arc(CORNER_RADIUS, SPEAKER_BACK_Y_SPACE + SPEAKER_BACK_HEIGHT - CORNER_RADIUS, CORNER_RADIUS, Math.PI, Math.PI * 0.5, true).lineToRelative(SPEAKER_BACK_WIDTH - CORNER_RADIUS, 0).lineTo(SPEAKER_WIDTH, SPEAKER_HEIGHT).lineTo(SPEAKER_WIDTH, 0).close(), {
      stroke: 'black',
      lineWidth: 1.5,
      lineJoin: 'round',
      centerY: soundOffNode.centerY,
      left: 0
    });
    soundOnNode.addChild(speakerNode);
    soundOffNode.addChild(speakerNode);

    // create X for sound off
    const soundOffX = new Path(new Shape().moveTo(0, 0).lineTo(X_WIDTH, X_WIDTH).moveTo(0, X_WIDTH).lineTo(X_WIDTH, 0), {
      stroke: 'black',
      lineWidth: 1.7,
      lineCap: 'round',
      right: soundOffNode.width,
      centerY: soundOffNode.centerY
    });
    soundOffNode.addChild(soundOffX);

    // create curved lines for sound on
    const soundOnCurves = new Path(new Shape().arc(0, 0, MAX_CURVE_RADIUS, CURVE_ANGLE, NEG_CURVE_ANGLE, true).moveToPoint(new Vector2(MED_CURVE_RADIUS, 0).rotated(CURVE_ANGLE)).arc(0, 0, MED_CURVE_RADIUS, CURVE_ANGLE, NEG_CURVE_ANGLE, true).moveToPoint(new Vector2(MIN_CURVE_RADIUS, 0).rotated(CURVE_ANGLE)).arc(0, 0, MIN_CURVE_RADIUS, CURVE_ANGLE, NEG_CURVE_ANGLE, true), {
      stroke: 'black',
      lineWidth: 1.7,
      lineCap: 'round',
      right: soundOnNode.width,
      centerY: soundOnNode.centerY
    });
    soundOnNode.addChild(soundOnCurves);

    // If "Audio" and at least one subcomponent of audio is enabled, show the "sound on" icon. Otherwise,
    // show the "sound off" icon because there will be no output, even if "Audio" is enabled.
    const toggleNode = new ToggleNode(audioManager.anyOutputEnabledProperty, [{
      value: true,
      createNode: () => soundOnNode
    }, {
      value: false,
      createNode: () => soundOffNode
    }], {
      maxHeight: NODE_HEIGHT * 0.85
    });
    super(toggleNode, backgroundColorProperty, options);

    // must be after the button is instrumented
    this.addLinkedElement(soundEnabledProperty, {
      tandem: options.tandem.createTandem('property')
    });

    // pdom attribute lets user know when the toggle is pressed, linked lazily so that an alert isn't triggered
    // on construction and must be unlinked in dispose
    const soundUtterance = new ActivationUtterance();
    const enabledListener = enabled => {
      if (options.supportsAudioPreferences) {
        this.setPDOMAttribute('aria-pressed', enabled);
        soundUtterance.alert = enabled ? JoistStrings.a11y.soundToggle.alert.simSoundOnStringProperty : JoistStrings.a11y.soundToggle.alert.simSoundOffStringProperty;
        this.alertDescriptionUtterance(soundUtterance);
        if (voicingManager.voicingFullyEnabledProperty.value) {
          voicingManager.speakIgnoringEnabled(soundUtterance);
        }
      }
    };
    soundEnabledProperty.lazyLink(enabledListener);
    this.setPDOMAttribute('aria-pressed', soundEnabledProperty.get());

    // If no subcomponents of the audioManager that are enabled disable this button
    // to make it clear that toggling the audioEnabledProperty will have no impact
    // on the output.
    audioManager.anySubcomponentEnabledProperty.link(enabled => {
      this.enabled = enabled;
    });

    // change the icon so that it is visible when the background changes from dark to light
    backgroundColorProperty.link(backgroundColor => {
      const baseColor = backgroundColor.equals(Color.BLACK) ? 'white' : 'black';
      speakerNode.stroke = baseColor;
      soundOffX.stroke = baseColor;
      soundOnCurves.stroke = baseColor;
    });
  }
}
joist.register('NavigationBarAudioToggleButton', NavigationBarAudioToggleButton);
export default NavigationBarAudioToggleButton;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWZWN0b3IyIiwiU2hhcGUiLCJvcHRpb25pemUiLCJDb2xvciIsIk5vZGUiLCJQYXRoIiwiUmVjdGFuZ2xlIiwidm9pY2luZ01hbmFnZXIiLCJUb2dnbGVOb2RlIiwiQWN0aXZhdGlvblV0dGVyYW5jZSIsImF1ZGlvTWFuYWdlciIsImpvaXN0IiwiSm9pc3RCdXR0b24iLCJKb2lzdFN0cmluZ3MiLCJOT0RFX0hFSUdIVCIsIk5PREVfV0lEVEgiLCJTUEVBS0VSX0hFSUdIVCIsIlNQRUFLRVJfV0lEVEgiLCJTUEVBS0VSX0JBQ0tfV0lEVEgiLCJTUEVBS0VSX0JBQ0tfSEVJR0hUIiwiU1BFQUtFUl9CQUNLX1lfU1BBQ0UiLCJDT1JORVJfUkFESVVTIiwiWF9XSURUSCIsIk1BWF9DVVJWRV9SQURJVVMiLCJSQURJVVNfU1RFUFBFUiIsIk1FRF9DVVJWRV9SQURJVVMiLCJNSU5fQ1VSVkVfUkFESVVTIiwiQ1VSVkVfQU5HTEUiLCJNYXRoIiwiUEkiLCJORUdfQ1VSVkVfQU5HTEUiLCJOYXZpZ2F0aW9uQmFyQXVkaW9Ub2dnbGVCdXR0b24iLCJjb25zdHJ1Y3RvciIsInNvdW5kRW5hYmxlZFByb3BlcnR5IiwiYmFja2dyb3VuZENvbG9yUHJvcGVydHkiLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwiaGlnaGxpZ2h0RXh0ZW5zaW9uV2lkdGgiLCJoaWdobGlnaHRFeHRlbnNpb25IZWlnaHQiLCJoaWdobGlnaHRDZW50ZXJPZmZzZXRZIiwiZW5hYmxlZCIsInBoZXQiLCJjaGlwcGVyIiwiaXNGdXp6RW5hYmxlZCIsInF1ZXJ5UGFyYW1ldGVycyIsInN1cHBvcnRzVm9pY2luZyIsInZpc2libGVQcm9wZXJ0eU9wdGlvbnMiLCJwaGV0aW9GZWF0dXJlZCIsImlubmVyQ29udGVudCIsImExMXkiLCJzb3VuZFRvZ2dsZSIsImxhYmVsU3RyaW5nUHJvcGVydHkiLCJ2b2ljaW5nTmFtZVJlc3BvbnNlIiwiYXNzZXJ0IiwibGlzdGVuZXIiLCJ1bmRlZmluZWQiLCJzZXQiLCJnZXQiLCJzb3VuZE9uTm9kZSIsInNvdW5kT2ZmTm9kZSIsImJhY2tncm91bmROb2RlIiwiZmlsbCIsImFkZENoaWxkIiwic3BlYWtlck5vZGUiLCJtb3ZlVG8iLCJsaW5lVG8iLCJhcmMiLCJsaW5lVG9SZWxhdGl2ZSIsImNsb3NlIiwic3Ryb2tlIiwibGluZVdpZHRoIiwibGluZUpvaW4iLCJjZW50ZXJZIiwibGVmdCIsInNvdW5kT2ZmWCIsImxpbmVDYXAiLCJyaWdodCIsIndpZHRoIiwic291bmRPbkN1cnZlcyIsIm1vdmVUb1BvaW50Iiwicm90YXRlZCIsInRvZ2dsZU5vZGUiLCJhbnlPdXRwdXRFbmFibGVkUHJvcGVydHkiLCJ2YWx1ZSIsImNyZWF0ZU5vZGUiLCJtYXhIZWlnaHQiLCJhZGRMaW5rZWRFbGVtZW50IiwidGFuZGVtIiwiY3JlYXRlVGFuZGVtIiwic291bmRVdHRlcmFuY2UiLCJlbmFibGVkTGlzdGVuZXIiLCJzdXBwb3J0c0F1ZGlvUHJlZmVyZW5jZXMiLCJzZXRQRE9NQXR0cmlidXRlIiwiYWxlcnQiLCJzaW1Tb3VuZE9uU3RyaW5nUHJvcGVydHkiLCJzaW1Tb3VuZE9mZlN0cmluZ1Byb3BlcnR5IiwiYWxlcnREZXNjcmlwdGlvblV0dGVyYW5jZSIsInZvaWNpbmdGdWxseUVuYWJsZWRQcm9wZXJ0eSIsInNwZWFrSWdub3JpbmdFbmFibGVkIiwibGF6eUxpbmsiLCJhbnlTdWJjb21wb25lbnRFbmFibGVkUHJvcGVydHkiLCJsaW5rIiwiYmFja2dyb3VuZENvbG9yIiwiYmFzZUNvbG9yIiwiZXF1YWxzIiwiQkxBQ0siLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIk5hdmlnYXRpb25CYXJBdWRpb1RvZ2dsZUJ1dHRvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOC0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBOYXZpZ2F0aW9uQmFyQXVkaW9Ub2dnbGVCdXR0b24gaXMgYSBidXR0b24gZm9yIGNvbnRyb2xsaW5nIHdoZXRoZXIgYXVkaW8gaXMgZW5hYmxlZCBvciBkaXNhYmxlZCB0aGF0IGlzIGRlc2lnbmVkIHRvXHJcbiAqIHdvcmsgb24gdGhlIFBoRVQgbmF2aWdhdGlvbiBiYXIuIEF1ZGlvIGluY2x1ZGVzIGFsbCBhdWRpdG9yeSBmZWF0dXJlcyBpbiB0aGUgc2ltLCBzbyB3aGVuIHRoaXMgaXMgYnV0dG9uIGlzIHRvZ2dsZWRcclxuICogXCJvZmZcIiwgdGhlIHNpbSBzaG91bGQgYmUgdG90YWxseSBzaWxlbnQuXHJcbiAqXHJcbiAqIElmIHlvdSdyZSB3b25kZXJpbmcgd2h5IHRoaXMgaXMgZHJhd24gaW4gY29kZSByYXRoZXIgdGhhbiB1c2luZyBhIEZvbnQgQXdlc29tZSBub2RlLCBwbGVhc2Ugc2VlXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy90YW1iby9pc3N1ZXMvMTkuXHJcbiAqXHJcbiAqIEBhdXRob3IgSm9obiBCbGFuY29cclxuICogQGF1dGhvciBDaHJpcyBLbHVzZW5kb3JmXHJcbiAqL1xyXG5cclxuaW1wb3J0IEJvb2xlYW5Qcm9wZXJ0eSBmcm9tICcuLi8uLi9heG9uL2pzL0Jvb2xlYW5Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBUUmVhZE9ubHlQcm9wZXJ0eSBmcm9tICcuLi8uLi9heG9uL2pzL1RSZWFkT25seVByb3BlcnR5LmpzJztcclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gJy4uLy4uL2tpdGUvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBvcHRpb25pemUgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCBQaWNrUmVxdWlyZWQgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL1BpY2tSZXF1aXJlZC5qcyc7XHJcbmltcG9ydCB7IENvbG9yLCBOb2RlLCBQYXRoLCBSZWN0YW5nbGUsIHZvaWNpbmdNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IFRvZ2dsZU5vZGUgZnJvbSAnLi4vLi4vc3VuL2pzL1RvZ2dsZU5vZGUuanMnO1xyXG5pbXBvcnQgQWN0aXZhdGlvblV0dGVyYW5jZSBmcm9tICcuLi8uLi91dHRlcmFuY2UtcXVldWUvanMvQWN0aXZhdGlvblV0dGVyYW5jZS5qcyc7XHJcbmltcG9ydCBhdWRpb01hbmFnZXIgZnJvbSAnLi9hdWRpb01hbmFnZXIuanMnO1xyXG5pbXBvcnQgam9pc3QgZnJvbSAnLi9qb2lzdC5qcyc7XHJcbmltcG9ydCBKb2lzdEJ1dHRvbiwgeyBKb2lzdEJ1dHRvbk9wdGlvbnMgfSBmcm9tICcuL0pvaXN0QnV0dG9uLmpzJztcclxuaW1wb3J0IEpvaXN0U3RyaW5ncyBmcm9tICcuL0pvaXN0U3RyaW5ncy5qcyc7XHJcblxyXG4vLyBjb25zdGFudHMgZm9yIG5vZGUgYmFja2dyb3VuZFxyXG5jb25zdCBOT0RFX0hFSUdIVCA9IDIyLjA7XHJcbmNvbnN0IE5PREVfV0lEVEggPSBOT0RFX0hFSUdIVCAqIDEuMTM7XHJcblxyXG4vLyBjb25zdGFudHMgZm9yIGRyYXdpbmcgc3BlYWtlclxyXG5jb25zdCBTUEVBS0VSX0hFSUdIVCA9IE5PREVfSEVJR0hUICogMC43NztcclxuY29uc3QgU1BFQUtFUl9XSURUSCA9IFNQRUFLRVJfSEVJR0hUICogMC41ODtcclxuY29uc3QgU1BFQUtFUl9CQUNLX1dJRFRIID0gU1BFQUtFUl9XSURUSCAqIDAuNDY7XHJcbmNvbnN0IFNQRUFLRVJfQkFDS19IRUlHSFQgPSBTUEVBS0VSX0hFSUdIVCAqIDAuMzU7XHJcbmNvbnN0IFNQRUFLRVJfQkFDS19ZX1NQQUNFID0gKCBTUEVBS0VSX0hFSUdIVCAtIFNQRUFLRVJfQkFDS19IRUlHSFQgKSAvIDIuMDsgLy8gc3BhY2UgYmV0d2VlbiB0b3Agb2Ygc3BlYWtlciBiYWNrIGFuZCB0b3Agb2YgY29uZVxyXG5jb25zdCBDT1JORVJfUkFESVVTID0gMS4wO1xyXG5cclxuLy8gY29uc3RhbnQgZm9yIGRyYXdpbmcgc291bmQgb2ZmIFhcclxuY29uc3QgWF9XSURUSCA9IFNQRUFLRVJfSEVJR0hUICogMC41MjtcclxuXHJcbi8vIGNvbnN0YW50cyBmb3IgZHJhd2luZyBzb3VuZCBvbiBjdXJ2ZXNcclxuY29uc3QgTUFYX0NVUlZFX1JBRElVUyA9IFNQRUFLRVJfSEVJR0hUICogMC42MztcclxuY29uc3QgUkFESVVTX1NURVBQRVIgPSBTUEVBS0VSX0hFSUdIVCAqIDAuMjM7XHJcbmNvbnN0IE1FRF9DVVJWRV9SQURJVVMgPSBNQVhfQ1VSVkVfUkFESVVTIC0gUkFESVVTX1NURVBQRVI7XHJcbmNvbnN0IE1JTl9DVVJWRV9SQURJVVMgPSBNRURfQ1VSVkVfUkFESVVTIC0gUkFESVVTX1NURVBQRVI7XHJcbmNvbnN0IENVUlZFX0FOR0xFID0gTWF0aC5QSSAvIDIuNztcclxuY29uc3QgTkVHX0NVUlZFX0FOR0xFID0gQ1VSVkVfQU5HTEUgKiAtMS4wO1xyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IHtcclxuXHJcbiAgLy8gVGhpcyBidXR0b24gaXMgYWx3YXlzIGNyZWF0ZWQgZm9yIGEgY29uc2lzdGVudCBQaEVULWlPIEFQSSwgYnV0IGhhcyBsaW1pdGVkIGZ1bmN0aW9uYWxpdHkgaWYgYXVkaW8gaXMgbm90IHN1cHBvcnRlZC5cclxuICBzdXBwb3J0c0F1ZGlvUHJlZmVyZW5jZXM6IGJvb2xlYW47XHJcbn07XHJcbnR5cGUgTmF2aWdhdGlvbkJhckF1ZGlvVG9nZ2xlQnV0dG9uT3B0aW9ucyA9IFNlbGZPcHRpb25zICYgUGlja1JlcXVpcmVkPEpvaXN0QnV0dG9uT3B0aW9ucywgJ3RhbmRlbSc+ICYgUGljazxKb2lzdEJ1dHRvbk9wdGlvbnMsICdwb2ludGVyQXJlYURpbGF0aW9uWCcgfCAncG9pbnRlckFyZWFEaWxhdGlvblknPjtcclxuXHJcbmNsYXNzIE5hdmlnYXRpb25CYXJBdWRpb1RvZ2dsZUJ1dHRvbiBleHRlbmRzIEpvaXN0QnV0dG9uIHtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBzb3VuZEVuYWJsZWRQcm9wZXJ0eTogQm9vbGVhblByb3BlcnR5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PENvbG9yPixcclxuICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVkT3B0aW9uczogTmF2aWdhdGlvbkJhckF1ZGlvVG9nZ2xlQnV0dG9uT3B0aW9ucyApIHtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPE5hdmlnYXRpb25CYXJBdWRpb1RvZ2dsZUJ1dHRvbk9wdGlvbnMsIFNlbGZPcHRpb25zLCBKb2lzdEJ1dHRvbk9wdGlvbnM+KCkoIHtcclxuXHJcbiAgICAgIC8vIEpvaXN0QnV0dG9uIG9wdGlvbnNcclxuICAgICAgaGlnaGxpZ2h0RXh0ZW5zaW9uV2lkdGg6IDUgKyAzLjYsXHJcbiAgICAgIGhpZ2hsaWdodEV4dGVuc2lvbkhlaWdodDogMTAsXHJcbiAgICAgIGhpZ2hsaWdodENlbnRlck9mZnNldFk6IDAsXHJcblxyXG4gICAgICAvLyBlbmFibGVkOnRydWUgYnkgZGVmYXVsdCwgYnV0IGRpc2FibGUgaWYgZnV6emluZyB3aGVuIHN1cHBvcnRpbmcgdm9pY2luZ1xyXG4gICAgICBlbmFibGVkOiAhKCBwaGV0LmNoaXBwZXIuaXNGdXp6RW5hYmxlZCgpICYmIHBoZXQuY2hpcHBlci5xdWVyeVBhcmFtZXRlcnMuc3VwcG9ydHNWb2ljaW5nICksXHJcblxyXG4gICAgICB2aXNpYmxlUHJvcGVydHlPcHRpb25zOiB7IHBoZXRpb0ZlYXR1cmVkOiB0cnVlIH0sXHJcblxyXG4gICAgICAvLyBwZG9tXHJcbiAgICAgIGlubmVyQ29udGVudDogSm9pc3RTdHJpbmdzLmExMXkuc291bmRUb2dnbGUubGFiZWxTdHJpbmdQcm9wZXJ0eSxcclxuXHJcbiAgICAgIC8vIHZvaWNpbmdcclxuICAgICAgdm9pY2luZ05hbWVSZXNwb25zZTogSm9pc3RTdHJpbmdzLmExMXkuc291bmRUb2dnbGUubGFiZWxTdHJpbmdQcm9wZXJ0eVxyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggb3B0aW9ucy5saXN0ZW5lciA9PT0gdW5kZWZpbmVkLCAnTmF2aWdhdGlvbkJhckF1ZGlvVG9nZ2xlQnV0dG9uIHNldHMgbGlzdGVuZXInICk7XHJcbiAgICBvcHRpb25zLmxpc3RlbmVyID0gKCkgPT4gc291bmRFbmFibGVkUHJvcGVydHkuc2V0KCAhc291bmRFbmFibGVkUHJvcGVydHkuZ2V0KCkgKTtcclxuXHJcbiAgICBjb25zdCBzb3VuZE9uTm9kZSA9IG5ldyBOb2RlKCk7XHJcbiAgICBjb25zdCBzb3VuZE9mZk5vZGUgPSBuZXcgTm9kZSgpO1xyXG4gICAgY29uc3QgYmFja2dyb3VuZE5vZGUgPSBuZXcgUmVjdGFuZ2xlKCAwLCAwLCBOT0RFX1dJRFRILCBOT0RFX0hFSUdIVCwgeyBmaWxsOiAndHJhbnNwYXJlbnQnIH0gKTtcclxuICAgIHNvdW5kT25Ob2RlLmFkZENoaWxkKCBiYWNrZ3JvdW5kTm9kZSApO1xyXG4gICAgc291bmRPZmZOb2RlLmFkZENoaWxkKCBiYWNrZ3JvdW5kTm9kZSApO1xyXG5cclxuICAgIC8vIGNyZWF0ZSBzcGVha2VyIGZvciBib3RoIHNvdW5kIG9uIGFuZCBzb3VuZCBvZmZcclxuICAgIGNvbnN0IHNwZWFrZXJOb2RlID0gbmV3IFBhdGgoXHJcbiAgICAgIG5ldyBTaGFwZSgpXHJcbiAgICAgICAgLm1vdmVUbyggU1BFQUtFUl9XSURUSCwgMCApXHJcbiAgICAgICAgLmxpbmVUbyggU1BFQUtFUl9CQUNLX1dJRFRILCBTUEVBS0VSX0JBQ0tfWV9TUEFDRSApXHJcbiAgICAgICAgLmxpbmVUbyggQ09STkVSX1JBRElVUywgU1BFQUtFUl9CQUNLX1lfU1BBQ0UgKVxyXG4gICAgICAgIC5hcmMoIENPUk5FUl9SQURJVVMsIFNQRUFLRVJfQkFDS19ZX1NQQUNFICsgQ09STkVSX1JBRElVUywgQ09STkVSX1JBRElVUywgTWF0aC5QSSAqIDEuNSwgTWF0aC5QSSwgdHJ1ZSApXHJcbiAgICAgICAgLmxpbmVUb1JlbGF0aXZlKCAwLCBTUEVBS0VSX0JBQ0tfSEVJR0hUIC0gKCAyICogQ09STkVSX1JBRElVUyApIClcclxuICAgICAgICAuYXJjKCBDT1JORVJfUkFESVVTLCBTUEVBS0VSX0JBQ0tfWV9TUEFDRSArIFNQRUFLRVJfQkFDS19IRUlHSFQgLSBDT1JORVJfUkFESVVTLCBDT1JORVJfUkFESVVTLCBNYXRoLlBJLCBNYXRoLlBJICogMC41LCB0cnVlIClcclxuICAgICAgICAubGluZVRvUmVsYXRpdmUoIFNQRUFLRVJfQkFDS19XSURUSCAtIENPUk5FUl9SQURJVVMsIDAgKVxyXG4gICAgICAgIC5saW5lVG8oIFNQRUFLRVJfV0lEVEgsIFNQRUFLRVJfSEVJR0hUIClcclxuICAgICAgICAubGluZVRvKCBTUEVBS0VSX1dJRFRILCAwIClcclxuICAgICAgICAuY2xvc2UoKSxcclxuICAgICAge1xyXG4gICAgICAgIHN0cm9rZTogJ2JsYWNrJyxcclxuICAgICAgICBsaW5lV2lkdGg6IDEuNSxcclxuICAgICAgICBsaW5lSm9pbjogJ3JvdW5kJyxcclxuICAgICAgICBjZW50ZXJZOiBzb3VuZE9mZk5vZGUuY2VudGVyWSxcclxuICAgICAgICBsZWZ0OiAwXHJcbiAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgc291bmRPbk5vZGUuYWRkQ2hpbGQoIHNwZWFrZXJOb2RlICk7XHJcbiAgICBzb3VuZE9mZk5vZGUuYWRkQ2hpbGQoIHNwZWFrZXJOb2RlICk7XHJcblxyXG4gICAgLy8gY3JlYXRlIFggZm9yIHNvdW5kIG9mZlxyXG4gICAgY29uc3Qgc291bmRPZmZYID0gbmV3IFBhdGgoXHJcbiAgICAgIG5ldyBTaGFwZSgpLm1vdmVUbyggMCwgMCApLmxpbmVUbyggWF9XSURUSCwgWF9XSURUSCApLm1vdmVUbyggMCwgWF9XSURUSCApXHJcbiAgICAgICAgLmxpbmVUbyggWF9XSURUSCwgMCApLFxyXG4gICAgICB7XHJcbiAgICAgICAgc3Ryb2tlOiAnYmxhY2snLFxyXG4gICAgICAgIGxpbmVXaWR0aDogMS43LFxyXG4gICAgICAgIGxpbmVDYXA6ICdyb3VuZCcsXHJcbiAgICAgICAgcmlnaHQ6IHNvdW5kT2ZmTm9kZS53aWR0aCxcclxuICAgICAgICBjZW50ZXJZOiBzb3VuZE9mZk5vZGUuY2VudGVyWVxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgc291bmRPZmZOb2RlLmFkZENoaWxkKCBzb3VuZE9mZlggKTtcclxuXHJcbiAgICAvLyBjcmVhdGUgY3VydmVkIGxpbmVzIGZvciBzb3VuZCBvblxyXG4gICAgY29uc3Qgc291bmRPbkN1cnZlcyA9IG5ldyBQYXRoKFxyXG4gICAgICBuZXcgU2hhcGUoKVxyXG4gICAgICAgIC5hcmMoIDAsIDAsIE1BWF9DVVJWRV9SQURJVVMsIENVUlZFX0FOR0xFLCBORUdfQ1VSVkVfQU5HTEUsIHRydWUgKVxyXG4gICAgICAgIC5tb3ZlVG9Qb2ludCggbmV3IFZlY3RvcjIoIE1FRF9DVVJWRV9SQURJVVMsIDAgKS5yb3RhdGVkKCBDVVJWRV9BTkdMRSApIClcclxuICAgICAgICAuYXJjKCAwLCAwLCBNRURfQ1VSVkVfUkFESVVTLCBDVVJWRV9BTkdMRSwgTkVHX0NVUlZFX0FOR0xFLCB0cnVlIClcclxuICAgICAgICAubW92ZVRvUG9pbnQoIG5ldyBWZWN0b3IyKCBNSU5fQ1VSVkVfUkFESVVTLCAwICkucm90YXRlZCggQ1VSVkVfQU5HTEUgKSApXHJcbiAgICAgICAgLmFyYyggMCwgMCwgTUlOX0NVUlZFX1JBRElVUywgQ1VSVkVfQU5HTEUsIE5FR19DVVJWRV9BTkdMRSwgdHJ1ZSApLFxyXG4gICAgICB7XHJcbiAgICAgICAgc3Ryb2tlOiAnYmxhY2snLFxyXG4gICAgICAgIGxpbmVXaWR0aDogMS43LFxyXG4gICAgICAgIGxpbmVDYXA6ICdyb3VuZCcsXHJcbiAgICAgICAgcmlnaHQ6IHNvdW5kT25Ob2RlLndpZHRoLFxyXG4gICAgICAgIGNlbnRlclk6IHNvdW5kT25Ob2RlLmNlbnRlcllcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIHNvdW5kT25Ob2RlLmFkZENoaWxkKCBzb3VuZE9uQ3VydmVzICk7XHJcblxyXG4gICAgLy8gSWYgXCJBdWRpb1wiIGFuZCBhdCBsZWFzdCBvbmUgc3ViY29tcG9uZW50IG9mIGF1ZGlvIGlzIGVuYWJsZWQsIHNob3cgdGhlIFwic291bmQgb25cIiBpY29uLiBPdGhlcndpc2UsXHJcbiAgICAvLyBzaG93IHRoZSBcInNvdW5kIG9mZlwiIGljb24gYmVjYXVzZSB0aGVyZSB3aWxsIGJlIG5vIG91dHB1dCwgZXZlbiBpZiBcIkF1ZGlvXCIgaXMgZW5hYmxlZC5cclxuICAgIGNvbnN0IHRvZ2dsZU5vZGUgPSBuZXcgVG9nZ2xlTm9kZSggYXVkaW9NYW5hZ2VyLmFueU91dHB1dEVuYWJsZWRQcm9wZXJ0eSxcclxuICAgICAgW1xyXG4gICAgICAgIHsgdmFsdWU6IHRydWUsIGNyZWF0ZU5vZGU6ICgpID0+IHNvdW5kT25Ob2RlIH0sXHJcbiAgICAgICAgeyB2YWx1ZTogZmFsc2UsIGNyZWF0ZU5vZGU6ICgpID0+IHNvdW5kT2ZmTm9kZSB9XHJcbiAgICAgIF0sXHJcbiAgICAgIHsgbWF4SGVpZ2h0OiBOT0RFX0hFSUdIVCAqIDAuODUgfVxyXG4gICAgKTtcclxuXHJcbiAgICBzdXBlciggdG9nZ2xlTm9kZSwgYmFja2dyb3VuZENvbG9yUHJvcGVydHksIG9wdGlvbnMgKTtcclxuXHJcbiAgICAvLyBtdXN0IGJlIGFmdGVyIHRoZSBidXR0b24gaXMgaW5zdHJ1bWVudGVkXHJcbiAgICB0aGlzLmFkZExpbmtlZEVsZW1lbnQoIHNvdW5kRW5hYmxlZFByb3BlcnR5LCB7XHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAncHJvcGVydHknIClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBwZG9tIGF0dHJpYnV0ZSBsZXRzIHVzZXIga25vdyB3aGVuIHRoZSB0b2dnbGUgaXMgcHJlc3NlZCwgbGlua2VkIGxhemlseSBzbyB0aGF0IGFuIGFsZXJ0IGlzbid0IHRyaWdnZXJlZFxyXG4gICAgLy8gb24gY29uc3RydWN0aW9uIGFuZCBtdXN0IGJlIHVubGlua2VkIGluIGRpc3Bvc2VcclxuICAgIGNvbnN0IHNvdW5kVXR0ZXJhbmNlID0gbmV3IEFjdGl2YXRpb25VdHRlcmFuY2UoKTtcclxuICAgIGNvbnN0IGVuYWJsZWRMaXN0ZW5lciA9ICggZW5hYmxlZDogYm9vbGVhbiApID0+IHtcclxuICAgICAgaWYgKCBvcHRpb25zLnN1cHBvcnRzQXVkaW9QcmVmZXJlbmNlcyApIHtcclxuICAgICAgICB0aGlzLnNldFBET01BdHRyaWJ1dGUoICdhcmlhLXByZXNzZWQnLCBlbmFibGVkICk7XHJcblxyXG4gICAgICAgIHNvdW5kVXR0ZXJhbmNlLmFsZXJ0ID0gZW5hYmxlZCA/IEpvaXN0U3RyaW5ncy5hMTF5LnNvdW5kVG9nZ2xlLmFsZXJ0LnNpbVNvdW5kT25TdHJpbmdQcm9wZXJ0eVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IEpvaXN0U3RyaW5ncy5hMTF5LnNvdW5kVG9nZ2xlLmFsZXJ0LnNpbVNvdW5kT2ZmU3RyaW5nUHJvcGVydHk7XHJcbiAgICAgICAgdGhpcy5hbGVydERlc2NyaXB0aW9uVXR0ZXJhbmNlKCBzb3VuZFV0dGVyYW5jZSApO1xyXG4gICAgICAgIGlmICggdm9pY2luZ01hbmFnZXIudm9pY2luZ0Z1bGx5RW5hYmxlZFByb3BlcnR5LnZhbHVlICkge1xyXG4gICAgICAgICAgdm9pY2luZ01hbmFnZXIuc3BlYWtJZ25vcmluZ0VuYWJsZWQoIHNvdW5kVXR0ZXJhbmNlICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgc291bmRFbmFibGVkUHJvcGVydHkubGF6eUxpbmsoIGVuYWJsZWRMaXN0ZW5lciApO1xyXG4gICAgdGhpcy5zZXRQRE9NQXR0cmlidXRlKCAnYXJpYS1wcmVzc2VkJywgc291bmRFbmFibGVkUHJvcGVydHkuZ2V0KCkgKTtcclxuXHJcbiAgICAvLyBJZiBubyBzdWJjb21wb25lbnRzIG9mIHRoZSBhdWRpb01hbmFnZXIgdGhhdCBhcmUgZW5hYmxlZCBkaXNhYmxlIHRoaXMgYnV0dG9uXHJcbiAgICAvLyB0byBtYWtlIGl0IGNsZWFyIHRoYXQgdG9nZ2xpbmcgdGhlIGF1ZGlvRW5hYmxlZFByb3BlcnR5IHdpbGwgaGF2ZSBubyBpbXBhY3RcclxuICAgIC8vIG9uIHRoZSBvdXRwdXQuXHJcbiAgICBhdWRpb01hbmFnZXIuYW55U3ViY29tcG9uZW50RW5hYmxlZFByb3BlcnR5LmxpbmsoIGVuYWJsZWQgPT4ge1xyXG4gICAgICB0aGlzLmVuYWJsZWQgPSBlbmFibGVkO1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIGNoYW5nZSB0aGUgaWNvbiBzbyB0aGF0IGl0IGlzIHZpc2libGUgd2hlbiB0aGUgYmFja2dyb3VuZCBjaGFuZ2VzIGZyb20gZGFyayB0byBsaWdodFxyXG4gICAgYmFja2dyb3VuZENvbG9yUHJvcGVydHkubGluayggYmFja2dyb3VuZENvbG9yID0+IHtcclxuICAgICAgY29uc3QgYmFzZUNvbG9yID0gYmFja2dyb3VuZENvbG9yLmVxdWFscyggQ29sb3IuQkxBQ0sgKSA/ICd3aGl0ZScgOiAnYmxhY2snO1xyXG4gICAgICBzcGVha2VyTm9kZS5zdHJva2UgPSBiYXNlQ29sb3I7XHJcbiAgICAgIHNvdW5kT2ZmWC5zdHJva2UgPSBiYXNlQ29sb3I7XHJcbiAgICAgIHNvdW5kT25DdXJ2ZXMuc3Ryb2tlID0gYmFzZUNvbG9yO1xyXG4gICAgfSApO1xyXG4gIH1cclxufVxyXG5cclxuam9pc3QucmVnaXN0ZXIoICdOYXZpZ2F0aW9uQmFyQXVkaW9Ub2dnbGVCdXR0b24nLCBOYXZpZ2F0aW9uQmFyQXVkaW9Ub2dnbGVCdXR0b24gKTtcclxuZXhwb3J0IGRlZmF1bHQgTmF2aWdhdGlvbkJhckF1ZGlvVG9nZ2xlQnV0dG9uOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FB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