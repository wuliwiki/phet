// Copyright 2016-2022, University of Colorado Boulder

/**
 * Shows the splash screen and loading progress bar.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */
(function () {
  // Overall scale factor for the image + progress bar, matched empirically to desired size
  const SCALE_FACTOR = 1.0 / 4.0 * 1.042;
  const XML_NAMESPACE = 'http://www.w3.org/2000/svg';
  const SPLASH_CONTAINER_ID = 'splash-container';
  const PROGRESS_BAR_Y = 25; // {string} Vertical offset of progress bar from splash logo
  const POSITION_Y = 0.435; // Center the content above the middle of the screen because it looks better that way.

  // Store the initial width and height to use for layout in case it changes, see
  // https://github.com/phetsims/joist/issues/407
  let splashImageWidth = 0;
  let splashImageHeight = 0;

  /**
   * Scale and position the given div, using the dimensions of the image for sizing.
   * @param {Element} div - the div to position
   * @param {HTMLImageElement} splashImg - the image to use for determining scale factor.  Not as exact as using the full
   *                                     - container div, but that dimension is not available on startup.
   */
  function positionDiv(div, splashImg) {
    if (splashImageWidth === 0 && splashImageHeight === 0) {
      splashImageWidth = splashImg.width;
      splashImageHeight = splashImg.height;
    }
    const currentWidth = splashImageWidth;
    const currentHeight = splashImageHeight;
    const availableHeight = window.innerHeight; // eslint-disable-line bad-sim-text
    const availableWidth = window.innerWidth; // eslint-disable-line bad-sim-text

    const scaleX = availableWidth / currentWidth;
    const scaleY = availableHeight / currentHeight;
    const scale = Math.min(scaleX, scaleY) * SCALE_FACTOR;

    // use Math.round because this is a preload
    const translationX = Math.round((availableWidth - currentWidth * scale) / 2); // eslint-disable-line bad-sim-text
    const translationY = Math.round((availableHeight - currentHeight * scale) * POSITION_Y); // eslint-disable-line bad-sim-text

    // Position the div using CSS
    const transformString = `translate(${translationX}px, ${translationY}px) scale3d(${scale}, ${scale}, 1)`;
    div.style['-webkit-transform'] = transformString;
    div.style['-ms-transform'] = transformString;
    div.style.transform = transformString;
  }

  // The main overlay for the whole screen, which will hide anything going on behind it.
  const splashBackgroundDiv = document.createElement('div');
  splashBackgroundDiv.style.position = 'fixed';
  splashBackgroundDiv.style.left = '0px';
  splashBackgroundDiv.style.top = '0px';
  splashBackgroundDiv.style.width = '100%';
  splashBackgroundDiv.style.height = '100%';
  splashBackgroundDiv.style.backgroundColor = 'black';
  splashBackgroundDiv.style.zIndex = 10000;
  splashBackgroundDiv.style['-webkit-transform-origin'] = '0 0';
  splashBackgroundDiv.style['-ms-transform-origin'] = '0 0';
  splashBackgroundDiv.style['transform-origin'] = '0 0';

  // Create the container div which will hold the splash image and progress bar
  const centerLogoAndProgressDiv = document.createElement('div');
  centerLogoAndProgressDiv.id = SPLASH_CONTAINER_ID;
  centerLogoAndProgressDiv.style.position = 'fixed';
  centerLogoAndProgressDiv.style.left = '0px';
  centerLogoAndProgressDiv.style.top = '0px';
  centerLogoAndProgressDiv.style['-webkit-transform-origin'] = '0 0';
  centerLogoAndProgressDiv.style['-ms-transform-origin'] = '0 0';
  centerLogoAndProgressDiv.style['transform-origin'] = '0 0';

  // Create the splash image, which is an SVG logo
  const splashImage = document.createElement('img');
  splashImage.style.display = 'block';

  // alt tag required for accessibility purposes, see https://github.com/phetsims/joist/issues/490
  splashImage.alt = '';

  // Closure which binds the values to positionDiv, which can be used as a listener reference.
  const adjustPosition = function () {
    positionDiv(centerLogoAndProgressDiv, splashImage);
  };

  // Wait until the image has loaded so that everything appears at once.
  // Without this, the loading bar appears long before the splash image
  splashImage.onload = function () {
    // Center before showing so it appears at the correct position.
    adjustPosition();
    window.addEventListener('resize', adjustPosition);
    window.addEventListener('load', adjustPosition);

    // Make sure the body did not already have such a div (if Chrome=>save as iOS Reading Mode saved a copy of the DOM).
    const previousSplashContainer = document.getElementById(SPLASH_CONTAINER_ID);
    previousSplashContainer && previousSplashContainer.parentNode.removeChild(previousSplashContainer);

    // After creating and positioning the div, add it to the body.  This could show in the wrong position if the image
    // dimensions are 0x0, see https://github.com/phetsims/joist/issues/408
    splashBackgroundDiv.appendChild(centerLogoAndProgressDiv);
    document.body.appendChild(splashBackgroundDiv);
  };

  // Create the progress bar
  const progressBarDiv = document.createElement('div');
  progressBarDiv.setAttribute('style', 'width:273px;height:10px');
  progressBarDiv.style.display = 'block';
  const svg = document.createElementNS(XML_NAMESPACE, 'svg');
  svg.style['margin-left'] = '-1px'; // compensates for the offset of x=1
  const progressBarBackground = document.createElementNS(XML_NAMESPACE, 'rect');
  progressBarBackground.setAttribute('id', 'progressBarBackground');
  progressBarBackground.setAttribute('x', '1'); // prevent clipping on the left side, see https://github.com/phetsims/joist/issues/400
  progressBarBackground.setAttribute('y', `${PROGRESS_BAR_Y}`);
  progressBarBackground.setAttribute('width', '273');
  progressBarBackground.setAttribute('height', '10');
  progressBarBackground.setAttribute('rx', '3');
  progressBarBackground.setAttribute('ry', '3');
  progressBarBackground.setAttribute('style', 'stroke: white;stroke-width:1');

  // The progress bar foreground begins with a width of 0 and grows to the right.  It is updated incrementally during
  // the startup sequence in Sim.js
  const progressBarForeground = document.createElementNS(XML_NAMESPACE, 'rect');
  progressBarForeground.setAttribute('id', 'progressBarForeground');
  progressBarForeground.setAttribute('x', '1'); // prevent clipping on the left side, see https://github.com/phetsims/joist/issues/400
  progressBarForeground.setAttribute('y', `${PROGRESS_BAR_Y}`);
  progressBarForeground.setAttribute('width', '0');
  progressBarForeground.setAttribute('height', '10');
  progressBarForeground.setAttribute('rx', '3');
  progressBarForeground.setAttribute('ry', '3');
  progressBarForeground.setAttribute('style', 'fill:#6acef5;');
  svg.appendChild(progressBarBackground);
  svg.appendChild(progressBarForeground);

  // fade/glow the background of the loading bar
  const phetSplashScreenAnimationInterval = setInterval(() => {
    // eslint-disable-line bad-sim-text

    // use browser toFixed because this is a preload
    progressBarBackground.style['stroke-width'] = (Math.sin(Date.now() / 1000 * 4) * 0.55 + 1).toFixed(2); // eslint-disable-line bad-sim-text
  }, 16);

  // After download is complete, stop the animation of the background
  window.phetSplashScreenDownloadComplete = function () {
    clearInterval(phetSplashScreenAnimationInterval);

    // Grow the progress bar foreground to the right based on the progress so far.
    progressBarBackground.style['stroke-width'] = 1;
  };

  // Add elements
  centerLogoAndProgressDiv.appendChild(splashImage);
  centerLogoAndProgressDiv.appendChild(svg);

  // Load the splash screen image
  if (window.PHET_SPLASH_DATA_URI) {
    // For builds, this is substituted in the sim.html template.
    splashImage.src = window.PHET_SPLASH_DATA_URI;
  } else {
    // Identify the brand (assume generated brand if not provided with query parameters)
    const brandMatch = location.search.match(/brand=([^&]+)/);
    const brand = brandMatch ? decodeURIComponent(brandMatch[1]) : 'adapted-from-phet';
    splashImage.src = `../brand/${brand}/images/splash.svg`;
  }

  // Do not allow zoom from input on the splash screen.
  const preventZoom = event => event.preventDefault();

  // List of events that may initiate native zoom. `wheel` and `touchstart` prevent all mouse touchscreen zooming.
  // `gesturestart` is non-standard and specific to Apple, but prevents trackpad zooming gestures. Keyboard events are
  // OK because they will trigger 'resize' events and the splash screen/sim will adjust.
  const zoomEvents = ['wheel', 'touchstart', 'gesturestart'];
  zoomEvents.forEach(zoomEvent => window.addEventListener(zoomEvent, preventZoom, {
    passive: false // non-passive to allow event.preventDefault()
  }));

  window.phetSplashScreen = {
    /**
     * Dispose the splash screen and all its associated listeners.  Can only be called once.
     */
    dispose: function () {
      // For built versions, clean up the memory that stored the splash image.
      if (window.PHET_SPLASH_DATA_URI) {
        delete window.PHET_SPLASH_DATA_URI;
      }
      window.removeEventListener('resize', adjustPosition);
      window.removeEventListener('load', adjustPosition);
      zoomEvents.forEach(zoomEvent => window.removeEventListener(zoomEvent, preventZoom));
      document.body.removeChild(splashBackgroundDiv);
      delete window.phetSplashScreen;
    }
  };
})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTQ0FMRV9GQUNUT1IiLCJYTUxfTkFNRVNQQUNFIiwiU1BMQVNIX0NPTlRBSU5FUl9JRCIsIlBST0dSRVNTX0JBUl9ZIiwiUE9TSVRJT05fWSIsInNwbGFzaEltYWdlV2lkdGgiLCJzcGxhc2hJbWFnZUhlaWdodCIsInBvc2l0aW9uRGl2IiwiZGl2Iiwic3BsYXNoSW1nIiwid2lkdGgiLCJoZWlnaHQiLCJjdXJyZW50V2lkdGgiLCJjdXJyZW50SGVpZ2h0IiwiYXZhaWxhYmxlSGVpZ2h0Iiwid2luZG93IiwiaW5uZXJIZWlnaHQiLCJhdmFpbGFibGVXaWR0aCIsImlubmVyV2lkdGgiLCJzY2FsZVgiLCJzY2FsZVkiLCJzY2FsZSIsIk1hdGgiLCJtaW4iLCJ0cmFuc2xhdGlvblgiLCJyb3VuZCIsInRyYW5zbGF0aW9uWSIsInRyYW5zZm9ybVN0cmluZyIsInN0eWxlIiwidHJhbnNmb3JtIiwic3BsYXNoQmFja2dyb3VuZERpdiIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInBvc2l0aW9uIiwibGVmdCIsInRvcCIsImJhY2tncm91bmRDb2xvciIsInpJbmRleCIsImNlbnRlckxvZ29BbmRQcm9ncmVzc0RpdiIsImlkIiwic3BsYXNoSW1hZ2UiLCJkaXNwbGF5IiwiYWx0IiwiYWRqdXN0UG9zaXRpb24iLCJvbmxvYWQiLCJhZGRFdmVudExpc3RlbmVyIiwicHJldmlvdXNTcGxhc2hDb250YWluZXIiLCJnZXRFbGVtZW50QnlJZCIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImFwcGVuZENoaWxkIiwiYm9keSIsInByb2dyZXNzQmFyRGl2Iiwic2V0QXR0cmlidXRlIiwic3ZnIiwiY3JlYXRlRWxlbWVudE5TIiwicHJvZ3Jlc3NCYXJCYWNrZ3JvdW5kIiwicHJvZ3Jlc3NCYXJGb3JlZ3JvdW5kIiwicGhldFNwbGFzaFNjcmVlbkFuaW1hdGlvbkludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJzaW4iLCJEYXRlIiwibm93IiwidG9GaXhlZCIsInBoZXRTcGxhc2hTY3JlZW5Eb3dubG9hZENvbXBsZXRlIiwiY2xlYXJJbnRlcnZhbCIsIlBIRVRfU1BMQVNIX0RBVEFfVVJJIiwic3JjIiwiYnJhbmRNYXRjaCIsImxvY2F0aW9uIiwic2VhcmNoIiwibWF0Y2giLCJicmFuZCIsImRlY29kZVVSSUNvbXBvbmVudCIsInByZXZlbnRab29tIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInpvb21FdmVudHMiLCJmb3JFYWNoIiwiem9vbUV2ZW50IiwicGFzc2l2ZSIsInBoZXRTcGxhc2hTY3JlZW4iLCJkaXNwb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciJdLCJzb3VyY2VzIjpbInNwbGFzaC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNi0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBTaG93cyB0aGUgc3BsYXNoIHNjcmVlbiBhbmQgbG9hZGluZyBwcm9ncmVzcyBiYXIuXHJcbiAqXHJcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG4oIGZ1bmN0aW9uKCkge1xyXG5cclxuXHJcbiAgLy8gT3ZlcmFsbCBzY2FsZSBmYWN0b3IgZm9yIHRoZSBpbWFnZSArIHByb2dyZXNzIGJhciwgbWF0Y2hlZCBlbXBpcmljYWxseSB0byBkZXNpcmVkIHNpemVcclxuICBjb25zdCBTQ0FMRV9GQUNUT1IgPSAxLjAgLyA0LjAgKiAxLjA0MjtcclxuICBjb25zdCBYTUxfTkFNRVNQQUNFID0gJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJztcclxuICBjb25zdCBTUExBU0hfQ09OVEFJTkVSX0lEID0gJ3NwbGFzaC1jb250YWluZXInO1xyXG4gIGNvbnN0IFBST0dSRVNTX0JBUl9ZID0gMjU7IC8vIHtzdHJpbmd9IFZlcnRpY2FsIG9mZnNldCBvZiBwcm9ncmVzcyBiYXIgZnJvbSBzcGxhc2ggbG9nb1xyXG4gIGNvbnN0IFBPU0lUSU9OX1kgPSAwLjQzNTsgLy8gQ2VudGVyIHRoZSBjb250ZW50IGFib3ZlIHRoZSBtaWRkbGUgb2YgdGhlIHNjcmVlbiBiZWNhdXNlIGl0IGxvb2tzIGJldHRlciB0aGF0IHdheS5cclxuXHJcbiAgLy8gU3RvcmUgdGhlIGluaXRpYWwgd2lkdGggYW5kIGhlaWdodCB0byB1c2UgZm9yIGxheW91dCBpbiBjYXNlIGl0IGNoYW5nZXMsIHNlZVxyXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9qb2lzdC9pc3N1ZXMvNDA3XHJcbiAgbGV0IHNwbGFzaEltYWdlV2lkdGggPSAwO1xyXG4gIGxldCBzcGxhc2hJbWFnZUhlaWdodCA9IDA7XHJcblxyXG4gIC8qKlxyXG4gICAqIFNjYWxlIGFuZCBwb3NpdGlvbiB0aGUgZ2l2ZW4gZGl2LCB1c2luZyB0aGUgZGltZW5zaW9ucyBvZiB0aGUgaW1hZ2UgZm9yIHNpemluZy5cclxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGRpdiAtIHRoZSBkaXYgdG8gcG9zaXRpb25cclxuICAgKiBAcGFyYW0ge0hUTUxJbWFnZUVsZW1lbnR9IHNwbGFzaEltZyAtIHRoZSBpbWFnZSB0byB1c2UgZm9yIGRldGVybWluaW5nIHNjYWxlIGZhY3Rvci4gIE5vdCBhcyBleGFjdCBhcyB1c2luZyB0aGUgZnVsbFxyXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0gY29udGFpbmVyIGRpdiwgYnV0IHRoYXQgZGltZW5zaW9uIGlzIG5vdCBhdmFpbGFibGUgb24gc3RhcnR1cC5cclxuICAgKi9cclxuICBmdW5jdGlvbiBwb3NpdGlvbkRpdiggZGl2LCBzcGxhc2hJbWcgKSB7XHJcbiAgICBpZiAoIHNwbGFzaEltYWdlV2lkdGggPT09IDAgJiYgc3BsYXNoSW1hZ2VIZWlnaHQgPT09IDAgKSB7XHJcbiAgICAgIHNwbGFzaEltYWdlV2lkdGggPSBzcGxhc2hJbWcud2lkdGg7XHJcbiAgICAgIHNwbGFzaEltYWdlSGVpZ2h0ID0gc3BsYXNoSW1nLmhlaWdodDtcclxuICAgIH1cclxuICAgIGNvbnN0IGN1cnJlbnRXaWR0aCA9IHNwbGFzaEltYWdlV2lkdGg7XHJcbiAgICBjb25zdCBjdXJyZW50SGVpZ2h0ID0gc3BsYXNoSW1hZ2VIZWlnaHQ7XHJcblxyXG4gICAgY29uc3QgYXZhaWxhYmxlSGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhZC1zaW0tdGV4dFxyXG4gICAgY29uc3QgYXZhaWxhYmxlV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBiYWQtc2ltLXRleHRcclxuXHJcbiAgICBjb25zdCBzY2FsZVggPSBhdmFpbGFibGVXaWR0aCAvIGN1cnJlbnRXaWR0aDtcclxuICAgIGNvbnN0IHNjYWxlWSA9IGF2YWlsYWJsZUhlaWdodCAvIGN1cnJlbnRIZWlnaHQ7XHJcblxyXG4gICAgY29uc3Qgc2NhbGUgPSBNYXRoLm1pbiggc2NhbGVYLCBzY2FsZVkgKSAqIFNDQUxFX0ZBQ1RPUjtcclxuXHJcbiAgICAvLyB1c2UgTWF0aC5yb3VuZCBiZWNhdXNlIHRoaXMgaXMgYSBwcmVsb2FkXHJcbiAgICBjb25zdCB0cmFuc2xhdGlvblggPSBNYXRoLnJvdW5kKCAoIGF2YWlsYWJsZVdpZHRoIC0gY3VycmVudFdpZHRoICogc2NhbGUgKSAvIDIgKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBiYWQtc2ltLXRleHRcclxuICAgIGNvbnN0IHRyYW5zbGF0aW9uWSA9IE1hdGgucm91bmQoICggYXZhaWxhYmxlSGVpZ2h0IC0gY3VycmVudEhlaWdodCAqIHNjYWxlICkgKiBQT1NJVElPTl9ZICk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFkLXNpbS10ZXh0XHJcblxyXG4gICAgLy8gUG9zaXRpb24gdGhlIGRpdiB1c2luZyBDU1NcclxuICAgIGNvbnN0IHRyYW5zZm9ybVN0cmluZyA9IGB0cmFuc2xhdGUoJHt0cmFuc2xhdGlvblh9cHgsICR7dHJhbnNsYXRpb25ZfXB4KSBzY2FsZTNkKCR7c2NhbGV9LCAke3NjYWxlfSwgMSlgO1xyXG4gICAgZGl2LnN0eWxlWyAnLXdlYmtpdC10cmFuc2Zvcm0nIF0gPSB0cmFuc2Zvcm1TdHJpbmc7XHJcbiAgICBkaXYuc3R5bGVbICctbXMtdHJhbnNmb3JtJyBdID0gdHJhbnNmb3JtU3RyaW5nO1xyXG4gICAgZGl2LnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVN0cmluZztcclxuICB9XHJcblxyXG4gIC8vIFRoZSBtYWluIG92ZXJsYXkgZm9yIHRoZSB3aG9sZSBzY3JlZW4sIHdoaWNoIHdpbGwgaGlkZSBhbnl0aGluZyBnb2luZyBvbiBiZWhpbmQgaXQuXHJcbiAgY29uc3Qgc3BsYXNoQmFja2dyb3VuZERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICk7XHJcbiAgc3BsYXNoQmFja2dyb3VuZERpdi5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XHJcbiAgc3BsYXNoQmFja2dyb3VuZERpdi5zdHlsZS5sZWZ0ID0gJzBweCc7XHJcbiAgc3BsYXNoQmFja2dyb3VuZERpdi5zdHlsZS50b3AgPSAnMHB4JztcclxuICBzcGxhc2hCYWNrZ3JvdW5kRGl2LnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG4gIHNwbGFzaEJhY2tncm91bmREaXYuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xyXG4gIHNwbGFzaEJhY2tncm91bmREaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2JsYWNrJztcclxuICBzcGxhc2hCYWNrZ3JvdW5kRGl2LnN0eWxlLnpJbmRleCA9IDEwMDAwO1xyXG4gIHNwbGFzaEJhY2tncm91bmREaXYuc3R5bGVbICctd2Via2l0LXRyYW5zZm9ybS1vcmlnaW4nIF0gPSAnMCAwJztcclxuICBzcGxhc2hCYWNrZ3JvdW5kRGl2LnN0eWxlWyAnLW1zLXRyYW5zZm9ybS1vcmlnaW4nIF0gPSAnMCAwJztcclxuICBzcGxhc2hCYWNrZ3JvdW5kRGl2LnN0eWxlWyAndHJhbnNmb3JtLW9yaWdpbicgXSA9ICcwIDAnO1xyXG5cclxuICAvLyBDcmVhdGUgdGhlIGNvbnRhaW5lciBkaXYgd2hpY2ggd2lsbCBob2xkIHRoZSBzcGxhc2ggaW1hZ2UgYW5kIHByb2dyZXNzIGJhclxyXG4gIGNvbnN0IGNlbnRlckxvZ29BbmRQcm9ncmVzc0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICk7XHJcbiAgY2VudGVyTG9nb0FuZFByb2dyZXNzRGl2LmlkID0gU1BMQVNIX0NPTlRBSU5FUl9JRDtcclxuICBjZW50ZXJMb2dvQW5kUHJvZ3Jlc3NEaXYuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xyXG4gIGNlbnRlckxvZ29BbmRQcm9ncmVzc0Rpdi5zdHlsZS5sZWZ0ID0gJzBweCc7XHJcbiAgY2VudGVyTG9nb0FuZFByb2dyZXNzRGl2LnN0eWxlLnRvcCA9ICcwcHgnO1xyXG4gIGNlbnRlckxvZ29BbmRQcm9ncmVzc0Rpdi5zdHlsZVsgJy13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbicgXSA9ICcwIDAnO1xyXG4gIGNlbnRlckxvZ29BbmRQcm9ncmVzc0Rpdi5zdHlsZVsgJy1tcy10cmFuc2Zvcm0tb3JpZ2luJyBdID0gJzAgMCc7XHJcbiAgY2VudGVyTG9nb0FuZFByb2dyZXNzRGl2LnN0eWxlWyAndHJhbnNmb3JtLW9yaWdpbicgXSA9ICcwIDAnO1xyXG5cclxuICAvLyBDcmVhdGUgdGhlIHNwbGFzaCBpbWFnZSwgd2hpY2ggaXMgYW4gU1ZHIGxvZ29cclxuICBjb25zdCBzcGxhc2hJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdpbWcnICk7XHJcbiAgc3BsYXNoSW1hZ2Uuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcblxyXG4gIC8vIGFsdCB0YWcgcmVxdWlyZWQgZm9yIGFjY2Vzc2liaWxpdHkgcHVycG9zZXMsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvam9pc3QvaXNzdWVzLzQ5MFxyXG4gIHNwbGFzaEltYWdlLmFsdCA9ICcnO1xyXG5cclxuICAvLyBDbG9zdXJlIHdoaWNoIGJpbmRzIHRoZSB2YWx1ZXMgdG8gcG9zaXRpb25EaXYsIHdoaWNoIGNhbiBiZSB1c2VkIGFzIGEgbGlzdGVuZXIgcmVmZXJlbmNlLlxyXG4gIGNvbnN0IGFkanVzdFBvc2l0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICBwb3NpdGlvbkRpdiggY2VudGVyTG9nb0FuZFByb2dyZXNzRGl2LCBzcGxhc2hJbWFnZSApO1xyXG4gIH07XHJcblxyXG4gIC8vIFdhaXQgdW50aWwgdGhlIGltYWdlIGhhcyBsb2FkZWQgc28gdGhhdCBldmVyeXRoaW5nIGFwcGVhcnMgYXQgb25jZS5cclxuICAvLyBXaXRob3V0IHRoaXMsIHRoZSBsb2FkaW5nIGJhciBhcHBlYXJzIGxvbmcgYmVmb3JlIHRoZSBzcGxhc2ggaW1hZ2VcclxuICBzcGxhc2hJbWFnZS5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAvLyBDZW50ZXIgYmVmb3JlIHNob3dpbmcgc28gaXQgYXBwZWFycyBhdCB0aGUgY29ycmVjdCBwb3NpdGlvbi5cclxuICAgIGFkanVzdFBvc2l0aW9uKCk7XHJcblxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdyZXNpemUnLCBhZGp1c3RQb3NpdGlvbiApO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdsb2FkJywgYWRqdXN0UG9zaXRpb24gKTtcclxuXHJcbiAgICAvLyBNYWtlIHN1cmUgdGhlIGJvZHkgZGlkIG5vdCBhbHJlYWR5IGhhdmUgc3VjaCBhIGRpdiAoaWYgQ2hyb21lPT5zYXZlIGFzIGlPUyBSZWFkaW5nIE1vZGUgc2F2ZWQgYSBjb3B5IG9mIHRoZSBET00pLlxyXG4gICAgY29uc3QgcHJldmlvdXNTcGxhc2hDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggU1BMQVNIX0NPTlRBSU5FUl9JRCApO1xyXG4gICAgcHJldmlvdXNTcGxhc2hDb250YWluZXIgJiYgcHJldmlvdXNTcGxhc2hDb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggcHJldmlvdXNTcGxhc2hDb250YWluZXIgKTtcclxuXHJcbiAgICAvLyBBZnRlciBjcmVhdGluZyBhbmQgcG9zaXRpb25pbmcgdGhlIGRpdiwgYWRkIGl0IHRvIHRoZSBib2R5LiAgVGhpcyBjb3VsZCBzaG93IGluIHRoZSB3cm9uZyBwb3NpdGlvbiBpZiB0aGUgaW1hZ2VcclxuICAgIC8vIGRpbWVuc2lvbnMgYXJlIDB4MCwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9qb2lzdC9pc3N1ZXMvNDA4XHJcbiAgICBzcGxhc2hCYWNrZ3JvdW5kRGl2LmFwcGVuZENoaWxkKCBjZW50ZXJMb2dvQW5kUHJvZ3Jlc3NEaXYgKTtcclxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoIHNwbGFzaEJhY2tncm91bmREaXYgKTtcclxuICB9O1xyXG5cclxuICAvLyBDcmVhdGUgdGhlIHByb2dyZXNzIGJhclxyXG4gIGNvbnN0IHByb2dyZXNzQmFyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicgKTtcclxuICBwcm9ncmVzc0JhckRpdi5zZXRBdHRyaWJ1dGUoICdzdHlsZScsICd3aWR0aDoyNzNweDtoZWlnaHQ6MTBweCcgKTtcclxuICBwcm9ncmVzc0JhckRpdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuXHJcbiAgY29uc3Qgc3ZnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCBYTUxfTkFNRVNQQUNFLCAnc3ZnJyApO1xyXG4gIHN2Zy5zdHlsZVsgJ21hcmdpbi1sZWZ0JyBdID0gJy0xcHgnOyAvLyBjb21wZW5zYXRlcyBmb3IgdGhlIG9mZnNldCBvZiB4PTFcclxuICBjb25zdCBwcm9ncmVzc0JhckJhY2tncm91bmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoIFhNTF9OQU1FU1BBQ0UsICdyZWN0JyApO1xyXG4gIHByb2dyZXNzQmFyQmFja2dyb3VuZC5zZXRBdHRyaWJ1dGUoICdpZCcsICdwcm9ncmVzc0JhckJhY2tncm91bmQnICk7XHJcbiAgcHJvZ3Jlc3NCYXJCYWNrZ3JvdW5kLnNldEF0dHJpYnV0ZSggJ3gnLCAnMScgKTsgLy8gcHJldmVudCBjbGlwcGluZyBvbiB0aGUgbGVmdCBzaWRlLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL2pvaXN0L2lzc3Vlcy80MDBcclxuICBwcm9ncmVzc0JhckJhY2tncm91bmQuc2V0QXR0cmlidXRlKCAneScsIGAke1BST0dSRVNTX0JBUl9ZfWAgKTtcclxuICBwcm9ncmVzc0JhckJhY2tncm91bmQuc2V0QXR0cmlidXRlKCAnd2lkdGgnLCAnMjczJyApO1xyXG4gIHByb2dyZXNzQmFyQmFja2dyb3VuZC5zZXRBdHRyaWJ1dGUoICdoZWlnaHQnLCAnMTAnICk7XHJcbiAgcHJvZ3Jlc3NCYXJCYWNrZ3JvdW5kLnNldEF0dHJpYnV0ZSggJ3J4JywgJzMnICk7XHJcbiAgcHJvZ3Jlc3NCYXJCYWNrZ3JvdW5kLnNldEF0dHJpYnV0ZSggJ3J5JywgJzMnICk7XHJcbiAgcHJvZ3Jlc3NCYXJCYWNrZ3JvdW5kLnNldEF0dHJpYnV0ZSggJ3N0eWxlJywgJ3N0cm9rZTogd2hpdGU7c3Ryb2tlLXdpZHRoOjEnICk7XHJcblxyXG4gIC8vIFRoZSBwcm9ncmVzcyBiYXIgZm9yZWdyb3VuZCBiZWdpbnMgd2l0aCBhIHdpZHRoIG9mIDAgYW5kIGdyb3dzIHRvIHRoZSByaWdodC4gIEl0IGlzIHVwZGF0ZWQgaW5jcmVtZW50YWxseSBkdXJpbmdcclxuICAvLyB0aGUgc3RhcnR1cCBzZXF1ZW5jZSBpbiBTaW0uanNcclxuICBjb25zdCBwcm9ncmVzc0JhckZvcmVncm91bmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoIFhNTF9OQU1FU1BBQ0UsICdyZWN0JyApO1xyXG4gIHByb2dyZXNzQmFyRm9yZWdyb3VuZC5zZXRBdHRyaWJ1dGUoICdpZCcsICdwcm9ncmVzc0JhckZvcmVncm91bmQnICk7XHJcbiAgcHJvZ3Jlc3NCYXJGb3JlZ3JvdW5kLnNldEF0dHJpYnV0ZSggJ3gnLCAnMScgKTsgLy8gcHJldmVudCBjbGlwcGluZyBvbiB0aGUgbGVmdCBzaWRlLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL2pvaXN0L2lzc3Vlcy80MDBcclxuICBwcm9ncmVzc0JhckZvcmVncm91bmQuc2V0QXR0cmlidXRlKCAneScsIGAke1BST0dSRVNTX0JBUl9ZfWAgKTtcclxuICBwcm9ncmVzc0JhckZvcmVncm91bmQuc2V0QXR0cmlidXRlKCAnd2lkdGgnLCAnMCcgKTtcclxuICBwcm9ncmVzc0JhckZvcmVncm91bmQuc2V0QXR0cmlidXRlKCAnaGVpZ2h0JywgJzEwJyApO1xyXG4gIHByb2dyZXNzQmFyRm9yZWdyb3VuZC5zZXRBdHRyaWJ1dGUoICdyeCcsICczJyApO1xyXG4gIHByb2dyZXNzQmFyRm9yZWdyb3VuZC5zZXRBdHRyaWJ1dGUoICdyeScsICczJyApO1xyXG4gIHByb2dyZXNzQmFyRm9yZWdyb3VuZC5zZXRBdHRyaWJ1dGUoICdzdHlsZScsICdmaWxsOiM2YWNlZjU7JyApO1xyXG5cclxuICBzdmcuYXBwZW5kQ2hpbGQoIHByb2dyZXNzQmFyQmFja2dyb3VuZCApO1xyXG4gIHN2Zy5hcHBlbmRDaGlsZCggcHJvZ3Jlc3NCYXJGb3JlZ3JvdW5kICk7XHJcblxyXG4gIC8vIGZhZGUvZ2xvdyB0aGUgYmFja2dyb3VuZCBvZiB0aGUgbG9hZGluZyBiYXJcclxuICBjb25zdCBwaGV0U3BsYXNoU2NyZWVuQW5pbWF0aW9uSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCggKCkgPT4geyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhZC1zaW0tdGV4dFxyXG5cclxuICAgIC8vIHVzZSBicm93c2VyIHRvRml4ZWQgYmVjYXVzZSB0aGlzIGlzIGEgcHJlbG9hZFxyXG4gICAgcHJvZ3Jlc3NCYXJCYWNrZ3JvdW5kLnN0eWxlWyAnc3Ryb2tlLXdpZHRoJyBdID0gKCBNYXRoLnNpbiggRGF0ZS5ub3coKSAvIDEwMDAgKiA0ICkgKiAwLjU1ICsgMSApLnRvRml4ZWQoIDIgKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBiYWQtc2ltLXRleHRcclxuICB9LCAxNiApO1xyXG5cclxuICAvLyBBZnRlciBkb3dubG9hZCBpcyBjb21wbGV0ZSwgc3RvcCB0aGUgYW5pbWF0aW9uIG9mIHRoZSBiYWNrZ3JvdW5kXHJcbiAgd2luZG93LnBoZXRTcGxhc2hTY3JlZW5Eb3dubG9hZENvbXBsZXRlID0gZnVuY3Rpb24oKSB7XHJcbiAgICBjbGVhckludGVydmFsKCBwaGV0U3BsYXNoU2NyZWVuQW5pbWF0aW9uSW50ZXJ2YWwgKTtcclxuXHJcbiAgICAvLyBHcm93IHRoZSBwcm9ncmVzcyBiYXIgZm9yZWdyb3VuZCB0byB0aGUgcmlnaHQgYmFzZWQgb24gdGhlIHByb2dyZXNzIHNvIGZhci5cclxuICAgIHByb2dyZXNzQmFyQmFja2dyb3VuZC5zdHlsZVsgJ3N0cm9rZS13aWR0aCcgXSA9IDE7XHJcbiAgfTtcclxuXHJcbiAgLy8gQWRkIGVsZW1lbnRzXHJcbiAgY2VudGVyTG9nb0FuZFByb2dyZXNzRGl2LmFwcGVuZENoaWxkKCBzcGxhc2hJbWFnZSApO1xyXG4gIGNlbnRlckxvZ29BbmRQcm9ncmVzc0Rpdi5hcHBlbmRDaGlsZCggc3ZnICk7XHJcblxyXG4gIC8vIExvYWQgdGhlIHNwbGFzaCBzY3JlZW4gaW1hZ2VcclxuICBpZiAoIHdpbmRvdy5QSEVUX1NQTEFTSF9EQVRBX1VSSSApIHtcclxuXHJcbiAgICAvLyBGb3IgYnVpbGRzLCB0aGlzIGlzIHN1YnN0aXR1dGVkIGluIHRoZSBzaW0uaHRtbCB0ZW1wbGF0ZS5cclxuICAgIHNwbGFzaEltYWdlLnNyYyA9IHdpbmRvdy5QSEVUX1NQTEFTSF9EQVRBX1VSSTtcclxuICB9XHJcbiAgZWxzZSB7XHJcblxyXG4gICAgLy8gSWRlbnRpZnkgdGhlIGJyYW5kIChhc3N1bWUgZ2VuZXJhdGVkIGJyYW5kIGlmIG5vdCBwcm92aWRlZCB3aXRoIHF1ZXJ5IHBhcmFtZXRlcnMpXHJcbiAgICBjb25zdCBicmFuZE1hdGNoID0gbG9jYXRpb24uc2VhcmNoLm1hdGNoKCAvYnJhbmQ9KFteJl0rKS8gKTtcclxuICAgIGNvbnN0IGJyYW5kID0gYnJhbmRNYXRjaCA/IGRlY29kZVVSSUNvbXBvbmVudCggYnJhbmRNYXRjaFsgMSBdICkgOiAnYWRhcHRlZC1mcm9tLXBoZXQnO1xyXG4gICAgc3BsYXNoSW1hZ2Uuc3JjID0gYC4uL2JyYW5kLyR7YnJhbmR9L2ltYWdlcy9zcGxhc2guc3ZnYDtcclxuICB9XHJcblxyXG4gIC8vIERvIG5vdCBhbGxvdyB6b29tIGZyb20gaW5wdXQgb24gdGhlIHNwbGFzaCBzY3JlZW4uXHJcbiAgY29uc3QgcHJldmVudFpvb20gPSBldmVudCA9PiBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAvLyBMaXN0IG9mIGV2ZW50cyB0aGF0IG1heSBpbml0aWF0ZSBuYXRpdmUgem9vbS4gYHdoZWVsYCBhbmQgYHRvdWNoc3RhcnRgIHByZXZlbnQgYWxsIG1vdXNlIHRvdWNoc2NyZWVuIHpvb21pbmcuXHJcbiAgLy8gYGdlc3R1cmVzdGFydGAgaXMgbm9uLXN0YW5kYXJkIGFuZCBzcGVjaWZpYyB0byBBcHBsZSwgYnV0IHByZXZlbnRzIHRyYWNrcGFkIHpvb21pbmcgZ2VzdHVyZXMuIEtleWJvYXJkIGV2ZW50cyBhcmVcclxuICAvLyBPSyBiZWNhdXNlIHRoZXkgd2lsbCB0cmlnZ2VyICdyZXNpemUnIGV2ZW50cyBhbmQgdGhlIHNwbGFzaCBzY3JlZW4vc2ltIHdpbGwgYWRqdXN0LlxyXG4gIGNvbnN0IHpvb21FdmVudHMgPSBbICd3aGVlbCcsICd0b3VjaHN0YXJ0JywgJ2dlc3R1cmVzdGFydCcgXTtcclxuICB6b29tRXZlbnRzLmZvckVhY2goIHpvb21FdmVudCA9PiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggem9vbUV2ZW50LCBwcmV2ZW50Wm9vbSwge1xyXG4gICAgcGFzc2l2ZTogZmFsc2UgLy8gbm9uLXBhc3NpdmUgdG8gYWxsb3cgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gIH0gKSApO1xyXG5cclxuICB3aW5kb3cucGhldFNwbGFzaFNjcmVlbiA9IHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIERpc3Bvc2UgdGhlIHNwbGFzaCBzY3JlZW4gYW5kIGFsbCBpdHMgYXNzb2NpYXRlZCBsaXN0ZW5lcnMuICBDYW4gb25seSBiZSBjYWxsZWQgb25jZS5cclxuICAgICAqL1xyXG4gICAgZGlzcG9zZTogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAvLyBGb3IgYnVpbHQgdmVyc2lvbnMsIGNsZWFuIHVwIHRoZSBtZW1vcnkgdGhhdCBzdG9yZWQgdGhlIHNwbGFzaCBpbWFnZS5cclxuICAgICAgaWYgKCB3aW5kb3cuUEhFVF9TUExBU0hfREFUQV9VUkkgKSB7XHJcbiAgICAgICAgZGVsZXRlIHdpbmRvdy5QSEVUX1NQTEFTSF9EQVRBX1VSSTtcclxuICAgICAgfVxyXG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ3Jlc2l6ZScsIGFkanVzdFBvc2l0aW9uICk7XHJcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCAnbG9hZCcsIGFkanVzdFBvc2l0aW9uICk7XHJcblxyXG4gICAgICB6b29tRXZlbnRzLmZvckVhY2goIHpvb21FdmVudCA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciggem9vbUV2ZW50LCBwcmV2ZW50Wm9vbSApICk7XHJcblxyXG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKCBzcGxhc2hCYWNrZ3JvdW5kRGl2ICk7XHJcbiAgICAgIGRlbGV0ZSB3aW5kb3cucGhldFNwbGFzaFNjcmVlbjtcclxuICAgIH1cclxuICB9O1xyXG59ICkoKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFFLFlBQVc7RUFHWDtFQUNBLE1BQU1BLFlBQVksR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEtBQUs7RUFDdEMsTUFBTUMsYUFBYSxHQUFHLDRCQUE0QjtFQUNsRCxNQUFNQyxtQkFBbUIsR0FBRyxrQkFBa0I7RUFDOUMsTUFBTUMsY0FBYyxHQUFHLEVBQUUsQ0FBQyxDQUFDO0VB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