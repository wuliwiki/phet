// Copyright 2013-2023, University of Colorado Boulder

/**
 * PHModel is the base-class model for the 'Macro' and 'Micro' screens.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import BooleanProperty from '../../../../axon/js/BooleanProperty.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import optionize from '../../../../phet-core/js/optionize.js';
import Beaker from './Beaker.js';
import Dropper from './Dropper.js';
import Faucet from './Faucet.js';
import Solute from './Solute.js';
import PHScaleConstants from '../PHScaleConstants.js';
import PHScaleQueryParameters from '../PHScaleQueryParameters.js';
import phScale from '../../phScale.js';
import Water from './Water.js';
import Utils from '../../../../dot/js/Utils.js';
// constants
const AVOGADROS_NUMBER = 6.023E23; // number of particles in one mole of solution

// null means 'no value', typically when we have no solution because the volume is zero.
// null means 'no value', typically when we have no solution because the volume is zero.
export default class PHModel {
  // solute choices, in order that they'll appear in the combo box
  // The order is alphabetical (English names), see https://github.com/phetsims/ph-scale/issues/101

  // the beaker, everything else is positioned relative to it

  // solution in the beaker

  // water faucet, at the beaker's top-right

  // drain faucet, at the beaker's bottom-left

  // whether the autofill feature is enabled, see https://github.com/phetsims/ph-scale/issues/104

  // how much (L) to autofill when the solute changes

  constructor(providedOptions) {
    const options = optionize()({
      // SelfOptions
      autofillVolume: 0.5
    }, providedOptions);
    this.solutes = [Solute.BATTERY_ACID, Solute.BLOOD, Solute.CHICKEN_SOUP, Solute.COFFEE, Solute.DRAIN_CLEANER, Solute.HAND_SOAP, Solute.MILK, Solute.ORANGE_JUICE, Solute.SODA, Solute.SPIT, Solute.VOMIT, Solute.WATER];
    this.beaker = new Beaker(PHScaleConstants.BEAKER_POSITION);
    const yDropper = this.beaker.position.y - this.beaker.size.height - 15;
    this.dropper = new Dropper(Solute.WATER, this.solutes, new Vector2(this.beaker.position.x - 50, yDropper), {
      tandem: options.tandem.createTandem('dropper')
    });
    this.solution = options.createSolution(this.dropper.soluteProperty, this.beaker.volume, options.tandem.createTandem('solution'));
    this.waterFaucet = new Faucet(new Vector2(this.beaker.right - 50, this.beaker.position.y - this.beaker.size.height - 45), this.beaker.right + 400, {
      enabled: this.solution.totalVolumeProperty.value < this.beaker.volume,
      tandem: options.tandem.createTandem('waterFaucet')
    });
    this.drainFaucet = new Faucet(new Vector2(this.beaker.left - 75, this.beaker.position.y + 43), this.beaker.left, {
      enabled: this.solution.totalVolumeProperty.value > 0,
      tandem: options.tandem.createTandem('drainFaucet')
    });
    this.autofillEnabledProperty = new BooleanProperty(PHScaleQueryParameters.autofill, {
      tandem: options.tandem.createTandem('autofillEnabledProperty'),
      phetioDocumentation: 'whether solute is automatically added to the beaker when the solute is changed'
    });
    this.autofillVolume = options.autofillVolume;
    this.isAutofillingProperty = new BooleanProperty(false, {
      tandem: options.tandem.createTandem('isAutofillingProperty'),
      phetioReadOnly: true,
      phetioDocumentation: 'whether the beaker is in the process of being automatically filled with solute'
    });

    // animate the dropper adding solute to the beaker
    this.dropper.soluteProperty.link(() => {
      // Do not autofill when state is being restored, see https://github.com/phetsims/ph-scale/issues/223.
      if (!phet.joist.sim.isSettingPhetioStateProperty.value) {
        // disable the faucets to cancel any multi-touch interaction that may be in progress, see issue #28
        this.waterFaucet.enabledProperty.value = false;
        this.drainFaucet.enabledProperty.value = false;

        // animate the dropper adding solute to the beaker
        this.startAutofill();
      }
    });

    // Enable faucets and dropper based on amount of solution in the beaker.
    this.solution.totalVolumeProperty.link(volume => {
      this.updateFaucetsAndDropper();
    });
  }
  reset() {
    this.dropper.reset();
    this.solution.reset();
    this.waterFaucet.reset();
    this.drainFaucet.reset();
    this.startAutofill();
  }

  /**
   * Enables faucets and dropper based on amount of solution in the beaker.
   */
  updateFaucetsAndDropper() {
    const volume = this.solution.totalVolumeProperty.value;
    this.waterFaucet.enabledProperty.value = volume < this.beaker.volume;
    this.drainFaucet.enabledProperty.value = volume > 0;
    this.dropper.enabledProperty.value = volume < this.beaker.volume;
  }

  /**
   * Moves time forward by the specified delta, in seconds.
   */
  step(dt) {
    if (this.isAutofillingProperty.value) {
      this.stepAutofill(dt);
    } else {
      this.solution.addSolute(this.dropper.flowRateProperty.value * dt);
      this.solution.addWater(this.waterFaucet.flowRateProperty.value * dt);
      this.solution.drainSolution(this.drainFaucet.flowRateProperty.value * dt);
    }
  }

  /**
   * Starts the autofill animation.
   */
  startAutofill() {
    if (this.autofillEnabledProperty.value && this.autofillVolume > 0) {
      this.isAutofillingProperty.value = true;
      this.dropper.isDispensingProperty.value = true;
      this.dropper.flowRateProperty.value = 0.75; // faster than standard flow rate
    } else {
      this.updateFaucetsAndDropper();
    }
  }

  /**
   * Advances the autofill animation by dt, in seconds.
   */
  stepAutofill(dt) {
    this.solution.addSolute(Math.min(this.dropper.flowRateProperty.value * dt, this.autofillVolume - this.solution.totalVolumeProperty.value));
    if (this.solution.totalVolumeProperty.value === this.autofillVolume) {
      this.stopAutofill();
    }
  }

  /**
   * Stops the autofill animation.
   */
  stopAutofill() {
    this.isAutofillingProperty.value = false;
    this.dropper.isDispensingProperty.value = false;
    this.updateFaucetsAndDropper();
  }

  /**
   * General algorithm for pH.
   * @param solutePH
   * @param soluteVolume liters
   * @param waterVolume liters
   * @returns pH, null if total volume is zero
   */
  static computePH(solutePH, soluteVolume, waterVolume) {
    let pH;
    const totalVolume = soluteVolume + waterVolume;
    if (totalVolume === 0) {
      pH = null;
    } else if (waterVolume === 0) {
      pH = solutePH; // to prevent floating-point error in log10 computations
    } else if (soluteVolume === 0) {
      pH = Water.pH; // to prevent floating-point error in log10 computations
    } else if (solutePH < 7) {
      pH = -Utils.log10((Math.pow(10, -solutePH) * soluteVolume + Math.pow(10, -Water.pH) * waterVolume) / totalVolume);
    } else {
      pH = 14 + Utils.log10((Math.pow(10, solutePH - 14) * soluteVolume + Math.pow(10, Water.pH - 14) * waterVolume) / totalVolume);
    }
    return pH;
  }

  /**
   * Compute pH from H3O+ concentration.
   * @param concentration
   * @returns pH, null if concentration is zero
   */
  static concentrationH3OToPH(concentration) {
    return concentration === null || concentration === 0 ? null : -Utils.log10(concentration);
  }

  /**
   * Compute pH from OH- concentration.
   * @param concentration
   * @returns pH, null if concentration is zero
   */
  static concentrationOHToPH(concentration) {
    const pH = PHModel.concentrationH3OToPH(concentration);
    return pH === null ? null : 14 - pH;
  }

  /**
   * Compute pH from moles of H3O+.
   * @param moles
   * @param volume volume of the solution in liters
   * @returns pH, null if moles or volume is zero
   */
  static molesH3OToPH(moles, volume) {
    return moles === 0 || volume === 0 ? null : PHModel.concentrationH3OToPH(moles / volume);
  }

  /**
   * Compute pH from moles of OH-.
   * @param moles
   * @param volume volume of the solution in liters
   * @returns pH, null if moles or volume is zero
   */
  static molesOHToPH(moles, volume) {
    return moles === 0 || volume === 0 ? null : PHModel.concentrationOHToPH(moles / volume);
  }

  /**
   * Computes concentration of H20 from volume.
   * @param volume
   * @returns concentration in moles/L, null if volume is 0
   */
  static volumeToConcentrationH20(volume) {
    return volume === 0 ? null : Water.concentration;
  }

  /**
   * Computes concentration of H3O+ from pH.
   *
   * @param pH null means 'no value'
   * @returns concentration in moles/L, null means no concentration
   */
  static pHToConcentrationH3O(pH) {
    return pH === null ? null : Math.pow(10, -pH);
  }

  /**
   * Computes concentration of OH- from pH.
   * @param pH null means 'no value'
   * @returns concentration in moles/L, null means no concentration
   */
  static pHToConcentrationOH(pH) {
    return pH === null ? null : PHModel.pHToConcentrationH3O(14 - pH);
  }

  /**
   * Computes the number of particles in solution.
   */
  static computeParticleCount(concentration, volume) {
    return concentration === null ? 0 : concentration * volume * AVOGADROS_NUMBER;
  }

  /**
   * Computes moles in solution.
   */
  static computeMoles(concentration, volume) {
    return concentration === null ? 0 : concentration * volume;
  }

  /**
   * True if the value displayed by the pH meter has precision that makes it equivalent to the pH of water.
   * Eg, the value displayed to the user is '7.00'.
   */
  static isEquivalentToWater(pH) {
    return pH !== null && Utils.toFixedNumber(pH, PHScaleConstants.PH_METER_DECIMAL_PLACES) === Water.pH;
  }
}
phScale.register('PHModel', PHModel);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb29sZWFuUHJvcGVydHkiLCJWZWN0b3IyIiwib3B0aW9uaXplIiwiQmVha2VyIiwiRHJvcHBlciIsIkZhdWNldCIsIlNvbHV0ZSIsIlBIU2NhbGVDb25zdGFudHMiLCJQSFNjYWxlUXVlcnlQYXJhbWV0ZXJzIiwicGhTY2FsZSIsIldhdGVyIiwiVXRpbHMiLCJBVk9HQURST1NfTlVNQkVSIiwiUEhNb2RlbCIsImNvbnN0cnVjdG9yIiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsImF1dG9maWxsVm9sdW1lIiwic29sdXRlcyIsIkJBVFRFUllfQUNJRCIsIkJMT09EIiwiQ0hJQ0tFTl9TT1VQIiwiQ09GRkVFIiwiRFJBSU5fQ0xFQU5FUiIsIkhBTkRfU09BUCIsIk1JTEsiLCJPUkFOR0VfSlVJQ0UiLCJTT0RBIiwiU1BJVCIsIlZPTUlUIiwiV0FURVIiLCJiZWFrZXIiLCJCRUFLRVJfUE9TSVRJT04iLCJ5RHJvcHBlciIsInBvc2l0aW9uIiwieSIsInNpemUiLCJoZWlnaHQiLCJkcm9wcGVyIiwieCIsInRhbmRlbSIsImNyZWF0ZVRhbmRlbSIsInNvbHV0aW9uIiwiY3JlYXRlU29sdXRpb24iLCJzb2x1dGVQcm9wZXJ0eSIsInZvbHVtZSIsIndhdGVyRmF1Y2V0IiwicmlnaHQiLCJlbmFibGVkIiwidG90YWxWb2x1bWVQcm9wZXJ0eSIsInZhbHVlIiwiZHJhaW5GYXVjZXQiLCJsZWZ0IiwiYXV0b2ZpbGxFbmFibGVkUHJvcGVydHkiLCJhdXRvZmlsbCIsInBoZXRpb0RvY3VtZW50YXRpb24iLCJpc0F1dG9maWxsaW5nUHJvcGVydHkiLCJwaGV0aW9SZWFkT25seSIsImxpbmsiLCJwaGV0Iiwiam9pc3QiLCJzaW0iLCJpc1NldHRpbmdQaGV0aW9TdGF0ZVByb3BlcnR5IiwiZW5hYmxlZFByb3BlcnR5Iiwic3RhcnRBdXRvZmlsbCIsInVwZGF0ZUZhdWNldHNBbmREcm9wcGVyIiwicmVzZXQiLCJzdGVwIiwiZHQiLCJzdGVwQXV0b2ZpbGwiLCJhZGRTb2x1dGUiLCJmbG93UmF0ZVByb3BlcnR5IiwiYWRkV2F0ZXIiLCJkcmFpblNvbHV0aW9uIiwiaXNEaXNwZW5zaW5nUHJvcGVydHkiLCJNYXRoIiwibWluIiwic3RvcEF1dG9maWxsIiwiY29tcHV0ZVBIIiwic29sdXRlUEgiLCJzb2x1dGVWb2x1bWUiLCJ3YXRlclZvbHVtZSIsInBIIiwidG90YWxWb2x1bWUiLCJsb2cxMCIsInBvdyIsImNvbmNlbnRyYXRpb25IM09Ub1BIIiwiY29uY2VudHJhdGlvbiIsImNvbmNlbnRyYXRpb25PSFRvUEgiLCJtb2xlc0gzT1RvUEgiLCJtb2xlcyIsIm1vbGVzT0hUb1BIIiwidm9sdW1lVG9Db25jZW50cmF0aW9uSDIwIiwicEhUb0NvbmNlbnRyYXRpb25IM08iLCJwSFRvQ29uY2VudHJhdGlvbk9IIiwiY29tcHV0ZVBhcnRpY2xlQ291bnQiLCJjb21wdXRlTW9sZXMiLCJpc0VxdWl2YWxlbnRUb1dhdGVyIiwidG9GaXhlZE51bWJlciIsIlBIX01FVEVSX0RFQ0lNQUxfUExBQ0VTIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJQSE1vZGVsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFBITW9kZWwgaXMgdGhlIGJhc2UtY2xhc3MgbW9kZWwgZm9yIHRoZSAnTWFjcm8nIGFuZCAnTWljcm8nIHNjcmVlbnMuXHJcbiAqXHJcbiAqIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXHJcbiAqL1xyXG5cclxuaW1wb3J0IEJvb2xlYW5Qcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL0Jvb2xlYW5Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1Byb3BlcnR5LmpzJztcclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgb3B0aW9uaXplIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgUGlja1JlcXVpcmVkIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9QaWNrUmVxdWlyZWQuanMnO1xyXG5pbXBvcnQgeyBQaGV0aW9PYmplY3RPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vLi4vdGFuZGVtL2pzL1BoZXRpb09iamVjdC5qcyc7XHJcbmltcG9ydCBUYW5kZW0gZnJvbSAnLi4vLi4vLi4vLi4vdGFuZGVtL2pzL1RhbmRlbS5qcyc7XHJcbmltcG9ydCBCZWFrZXIgZnJvbSAnLi9CZWFrZXIuanMnO1xyXG5pbXBvcnQgRHJvcHBlciBmcm9tICcuL0Ryb3BwZXIuanMnO1xyXG5pbXBvcnQgRmF1Y2V0IGZyb20gJy4vRmF1Y2V0LmpzJztcclxuaW1wb3J0IFNvbHV0ZSBmcm9tICcuL1NvbHV0ZS5qcyc7XHJcbmltcG9ydCBQSFNjYWxlQ29uc3RhbnRzIGZyb20gJy4uL1BIU2NhbGVDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgUEhTY2FsZVF1ZXJ5UGFyYW1ldGVycyBmcm9tICcuLi9QSFNjYWxlUXVlcnlQYXJhbWV0ZXJzLmpzJztcclxuaW1wb3J0IHBoU2NhbGUgZnJvbSAnLi4vLi4vcGhTY2FsZS5qcyc7XHJcbmltcG9ydCBTb2x1dGlvbiBmcm9tICcuL1NvbHV0aW9uLmpzJztcclxuaW1wb3J0IFdhdGVyIGZyb20gJy4vV2F0ZXIuanMnO1xyXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1V0aWxzLmpzJztcclxuaW1wb3J0IFRNb2RlbCBmcm9tICcuLi8uLi8uLi8uLi9qb2lzdC9qcy9UTW9kZWwuanMnO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IEFWT0dBRFJPU19OVU1CRVIgPSA2LjAyM0UyMzsgLy8gbnVtYmVyIG9mIHBhcnRpY2xlcyBpbiBvbmUgbW9sZSBvZiBzb2x1dGlvblxyXG5cclxuLy8gbnVsbCBtZWFucyAnbm8gdmFsdWUnLCB0eXBpY2FsbHkgd2hlbiB3ZSBoYXZlIG5vIHNvbHV0aW9uIGJlY2F1c2UgdGhlIHZvbHVtZSBpcyB6ZXJvLlxyXG5leHBvcnQgdHlwZSBQSFZhbHVlID0gbnVtYmVyIHwgbnVsbDtcclxuXHJcbi8vIG51bGwgbWVhbnMgJ25vIHZhbHVlJywgdHlwaWNhbGx5IHdoZW4gd2UgaGF2ZSBubyBzb2x1dGlvbiBiZWNhdXNlIHRoZSB2b2x1bWUgaXMgemVyby5cclxuZXhwb3J0IHR5cGUgQ29uY2VudHJhdGlvblZhbHVlID0gbnVtYmVyIHwgbnVsbDtcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnM8VCBleHRlbmRzIFNvbHV0aW9uPiA9IHtcclxuXHJcbiAgLy8gTCwgYXV0b21hdGljYWxseSBmaWxsIGJlYWtlciB3aXRoIHRoaXMgbXVjaCBzb2x1dGUgd2hlbiB0aGUgc29sdXRlIGNoYW5nZXNcclxuICBhdXRvZmlsbFZvbHVtZT86IG51bWJlcjtcclxuXHJcbiAgLy8gdXNlZCB0byBpbnN0YW50aWF0ZSB0aGUgc29sdXRpb25cclxuICBjcmVhdGVTb2x1dGlvbjogKCBzb2x1dGVQcm9wZXJ0eTogUHJvcGVydHk8U29sdXRlPiwgbWF4Vm9sdW1lOiBudW1iZXIsIHRhbmRlbTogVGFuZGVtICkgPT4gVDtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIFBITW9kZWxPcHRpb25zPFQgZXh0ZW5kcyBTb2x1dGlvbj4gPSBTZWxmT3B0aW9uczxUPiAmIFBpY2tSZXF1aXJlZDxQaGV0aW9PYmplY3RPcHRpb25zLCAndGFuZGVtJz47XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQSE1vZGVsPFQgZXh0ZW5kcyBTb2x1dGlvbj4gaW1wbGVtZW50cyBUTW9kZWwge1xyXG5cclxuICAvLyBzb2x1dGUgY2hvaWNlcywgaW4gb3JkZXIgdGhhdCB0aGV5J2xsIGFwcGVhciBpbiB0aGUgY29tYm8gYm94XHJcbiAgLy8gVGhlIG9yZGVyIGlzIGFscGhhYmV0aWNhbCAoRW5nbGlzaCBuYW1lcyksIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvcGgtc2NhbGUvaXNzdWVzLzEwMVxyXG4gIHB1YmxpYyByZWFkb25seSBzb2x1dGVzOiBTb2x1dGVbXTtcclxuXHJcbiAgLy8gdGhlIGJlYWtlciwgZXZlcnl0aGluZyBlbHNlIGlzIHBvc2l0aW9uZWQgcmVsYXRpdmUgdG8gaXRcclxuICBwdWJsaWMgcmVhZG9ubHkgYmVha2VyOiBCZWFrZXI7XHJcblxyXG4gIHB1YmxpYyByZWFkb25seSBkcm9wcGVyOiBEcm9wcGVyO1xyXG5cclxuICAvLyBzb2x1dGlvbiBpbiB0aGUgYmVha2VyXHJcbiAgcHVibGljIHJlYWRvbmx5IHNvbHV0aW9uOiBUO1xyXG5cclxuICAvLyB3YXRlciBmYXVjZXQsIGF0IHRoZSBiZWFrZXIncyB0b3AtcmlnaHRcclxuICBwdWJsaWMgcmVhZG9ubHkgd2F0ZXJGYXVjZXQ6IEZhdWNldDtcclxuXHJcbiAgLy8gZHJhaW4gZmF1Y2V0LCBhdCB0aGUgYmVha2VyJ3MgYm90dG9tLWxlZnRcclxuICBwdWJsaWMgcmVhZG9ubHkgZHJhaW5GYXVjZXQ6IEZhdWNldDtcclxuXHJcbiAgLy8gd2hldGhlciB0aGUgYXV0b2ZpbGwgZmVhdHVyZSBpcyBlbmFibGVkLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3BoLXNjYWxlL2lzc3Vlcy8xMDRcclxuICBwcml2YXRlIHJlYWRvbmx5IGF1dG9maWxsRW5hYmxlZFByb3BlcnR5OiBQcm9wZXJ0eTxib29sZWFuPjtcclxuXHJcbiAgLy8gaG93IG11Y2ggKEwpIHRvIGF1dG9maWxsIHdoZW4gdGhlIHNvbHV0ZSBjaGFuZ2VzXHJcbiAgcHJpdmF0ZSByZWFkb25seSBhdXRvZmlsbFZvbHVtZTogbnVtYmVyO1xyXG5cclxuICBwdWJsaWMgcmVhZG9ubHkgaXNBdXRvZmlsbGluZ1Byb3BlcnR5OiBQcm9wZXJ0eTxib29sZWFuPjtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBwcm92aWRlZE9wdGlvbnM6IFBITW9kZWxPcHRpb25zPFQ+ICkge1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8UEhNb2RlbE9wdGlvbnM8VD4sIFNlbGZPcHRpb25zPFQ+PigpKCB7XHJcblxyXG4gICAgICAvLyBTZWxmT3B0aW9uc1xyXG4gICAgICBhdXRvZmlsbFZvbHVtZTogMC41XHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICB0aGlzLnNvbHV0ZXMgPSBbXHJcbiAgICAgIFNvbHV0ZS5CQVRURVJZX0FDSUQsXHJcbiAgICAgIFNvbHV0ZS5CTE9PRCxcclxuICAgICAgU29sdXRlLkNISUNLRU5fU09VUCxcclxuICAgICAgU29sdXRlLkNPRkZFRSxcclxuICAgICAgU29sdXRlLkRSQUlOX0NMRUFORVIsXHJcbiAgICAgIFNvbHV0ZS5IQU5EX1NPQVAsXHJcbiAgICAgIFNvbHV0ZS5NSUxLLFxyXG4gICAgICBTb2x1dGUuT1JBTkdFX0pVSUNFLFxyXG4gICAgICBTb2x1dGUuU09EQSxcclxuICAgICAgU29sdXRlLlNQSVQsXHJcbiAgICAgIFNvbHV0ZS5WT01JVCxcclxuICAgICAgU29sdXRlLldBVEVSXHJcbiAgICBdO1xyXG5cclxuICAgIHRoaXMuYmVha2VyID0gbmV3IEJlYWtlciggUEhTY2FsZUNvbnN0YW50cy5CRUFLRVJfUE9TSVRJT04gKTtcclxuXHJcbiAgICBjb25zdCB5RHJvcHBlciA9IHRoaXMuYmVha2VyLnBvc2l0aW9uLnkgLSB0aGlzLmJlYWtlci5zaXplLmhlaWdodCAtIDE1O1xyXG4gICAgdGhpcy5kcm9wcGVyID0gbmV3IERyb3BwZXIoIFNvbHV0ZS5XQVRFUiwgdGhpcy5zb2x1dGVzLCBuZXcgVmVjdG9yMiggdGhpcy5iZWFrZXIucG9zaXRpb24ueCAtIDUwLCB5RHJvcHBlciApLCB7XHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnZHJvcHBlcicgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIHRoaXMuc29sdXRpb24gPSBvcHRpb25zLmNyZWF0ZVNvbHV0aW9uKCB0aGlzLmRyb3BwZXIuc29sdXRlUHJvcGVydHksIHRoaXMuYmVha2VyLnZvbHVtZSxcclxuICAgICAgb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnc29sdXRpb24nICkgKTtcclxuXHJcbiAgICB0aGlzLndhdGVyRmF1Y2V0ID0gbmV3IEZhdWNldChcclxuICAgICAgbmV3IFZlY3RvcjIoIHRoaXMuYmVha2VyLnJpZ2h0IC0gNTAsIHRoaXMuYmVha2VyLnBvc2l0aW9uLnkgLSB0aGlzLmJlYWtlci5zaXplLmhlaWdodCAtIDQ1ICksXHJcbiAgICAgIHRoaXMuYmVha2VyLnJpZ2h0ICsgNDAwLCB7XHJcbiAgICAgICAgZW5hYmxlZDogdGhpcy5zb2x1dGlvbi50b3RhbFZvbHVtZVByb3BlcnR5LnZhbHVlIDwgdGhpcy5iZWFrZXIudm9sdW1lLFxyXG4gICAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnd2F0ZXJGYXVjZXQnIClcclxuICAgICAgfSApO1xyXG5cclxuICAgIHRoaXMuZHJhaW5GYXVjZXQgPSBuZXcgRmF1Y2V0KFxyXG4gICAgICBuZXcgVmVjdG9yMiggdGhpcy5iZWFrZXIubGVmdCAtIDc1LCB0aGlzLmJlYWtlci5wb3NpdGlvbi55ICsgNDMgKSxcclxuICAgICAgdGhpcy5iZWFrZXIubGVmdCwge1xyXG4gICAgICAgIGVuYWJsZWQ6IHRoaXMuc29sdXRpb24udG90YWxWb2x1bWVQcm9wZXJ0eS52YWx1ZSA+IDAsXHJcbiAgICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdkcmFpbkZhdWNldCcgKVxyXG4gICAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5hdXRvZmlsbEVuYWJsZWRQcm9wZXJ0eSA9IG5ldyBCb29sZWFuUHJvcGVydHkoIFBIU2NhbGVRdWVyeVBhcmFtZXRlcnMuYXV0b2ZpbGwsIHtcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdhdXRvZmlsbEVuYWJsZWRQcm9wZXJ0eScgKSxcclxuICAgICAgcGhldGlvRG9jdW1lbnRhdGlvbjogJ3doZXRoZXIgc29sdXRlIGlzIGF1dG9tYXRpY2FsbHkgYWRkZWQgdG8gdGhlIGJlYWtlciB3aGVuIHRoZSBzb2x1dGUgaXMgY2hhbmdlZCdcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLmF1dG9maWxsVm9sdW1lID0gb3B0aW9ucy5hdXRvZmlsbFZvbHVtZTtcclxuXHJcbiAgICB0aGlzLmlzQXV0b2ZpbGxpbmdQcm9wZXJ0eSA9IG5ldyBCb29sZWFuUHJvcGVydHkoIGZhbHNlLCB7XHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnaXNBdXRvZmlsbGluZ1Byb3BlcnR5JyApLFxyXG4gICAgICBwaGV0aW9SZWFkT25seTogdHJ1ZSxcclxuICAgICAgcGhldGlvRG9jdW1lbnRhdGlvbjogJ3doZXRoZXIgdGhlIGJlYWtlciBpcyBpbiB0aGUgcHJvY2VzcyBvZiBiZWluZyBhdXRvbWF0aWNhbGx5IGZpbGxlZCB3aXRoIHNvbHV0ZSdcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBhbmltYXRlIHRoZSBkcm9wcGVyIGFkZGluZyBzb2x1dGUgdG8gdGhlIGJlYWtlclxyXG4gICAgdGhpcy5kcm9wcGVyLnNvbHV0ZVByb3BlcnR5LmxpbmsoICgpID0+IHtcclxuXHJcbiAgICAgIC8vIERvIG5vdCBhdXRvZmlsbCB3aGVuIHN0YXRlIGlzIGJlaW5nIHJlc3RvcmVkLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3BoLXNjYWxlL2lzc3Vlcy8yMjMuXHJcbiAgICAgIGlmICggIXBoZXQuam9pc3Quc2ltLmlzU2V0dGluZ1BoZXRpb1N0YXRlUHJvcGVydHkudmFsdWUgKSB7XHJcblxyXG4gICAgICAgIC8vIGRpc2FibGUgdGhlIGZhdWNldHMgdG8gY2FuY2VsIGFueSBtdWx0aS10b3VjaCBpbnRlcmFjdGlvbiB0aGF0IG1heSBiZSBpbiBwcm9ncmVzcywgc2VlIGlzc3VlICMyOFxyXG4gICAgICAgIHRoaXMud2F0ZXJGYXVjZXQuZW5hYmxlZFByb3BlcnR5LnZhbHVlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5kcmFpbkZhdWNldC5lbmFibGVkUHJvcGVydHkudmFsdWUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgLy8gYW5pbWF0ZSB0aGUgZHJvcHBlciBhZGRpbmcgc29sdXRlIHRvIHRoZSBiZWFrZXJcclxuICAgICAgICB0aGlzLnN0YXJ0QXV0b2ZpbGwoKTtcclxuICAgICAgfVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIEVuYWJsZSBmYXVjZXRzIGFuZCBkcm9wcGVyIGJhc2VkIG9uIGFtb3VudCBvZiBzb2x1dGlvbiBpbiB0aGUgYmVha2VyLlxyXG4gICAgdGhpcy5zb2x1dGlvbi50b3RhbFZvbHVtZVByb3BlcnR5LmxpbmsoIHZvbHVtZSA9PiB7XHJcbiAgICAgIHRoaXMudXBkYXRlRmF1Y2V0c0FuZERyb3BwZXIoKTtcclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcclxuICAgIHRoaXMuZHJvcHBlci5yZXNldCgpO1xyXG4gICAgdGhpcy5zb2x1dGlvbi5yZXNldCgpO1xyXG4gICAgdGhpcy53YXRlckZhdWNldC5yZXNldCgpO1xyXG4gICAgdGhpcy5kcmFpbkZhdWNldC5yZXNldCgpO1xyXG4gICAgdGhpcy5zdGFydEF1dG9maWxsKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBFbmFibGVzIGZhdWNldHMgYW5kIGRyb3BwZXIgYmFzZWQgb24gYW1vdW50IG9mIHNvbHV0aW9uIGluIHRoZSBiZWFrZXIuXHJcbiAgICovXHJcbiAgcHJpdmF0ZSB1cGRhdGVGYXVjZXRzQW5kRHJvcHBlcigpOiB2b2lkIHtcclxuICAgIGNvbnN0IHZvbHVtZSA9IHRoaXMuc29sdXRpb24udG90YWxWb2x1bWVQcm9wZXJ0eS52YWx1ZTtcclxuICAgIHRoaXMud2F0ZXJGYXVjZXQuZW5hYmxlZFByb3BlcnR5LnZhbHVlID0gKCB2b2x1bWUgPCB0aGlzLmJlYWtlci52b2x1bWUgKTtcclxuICAgIHRoaXMuZHJhaW5GYXVjZXQuZW5hYmxlZFByb3BlcnR5LnZhbHVlID0gKCB2b2x1bWUgPiAwICk7XHJcbiAgICB0aGlzLmRyb3BwZXIuZW5hYmxlZFByb3BlcnR5LnZhbHVlID0gKCB2b2x1bWUgPCB0aGlzLmJlYWtlci52b2x1bWUgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE1vdmVzIHRpbWUgZm9yd2FyZCBieSB0aGUgc3BlY2lmaWVkIGRlbHRhLCBpbiBzZWNvbmRzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGVwKCBkdDogbnVtYmVyICk6IHZvaWQge1xyXG4gICAgaWYgKCB0aGlzLmlzQXV0b2ZpbGxpbmdQcm9wZXJ0eS52YWx1ZSApIHtcclxuICAgICAgdGhpcy5zdGVwQXV0b2ZpbGwoIGR0ICk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5zb2x1dGlvbi5hZGRTb2x1dGUoIHRoaXMuZHJvcHBlci5mbG93UmF0ZVByb3BlcnR5LnZhbHVlICogZHQgKTtcclxuICAgICAgdGhpcy5zb2x1dGlvbi5hZGRXYXRlciggdGhpcy53YXRlckZhdWNldC5mbG93UmF0ZVByb3BlcnR5LnZhbHVlICogZHQgKTtcclxuICAgICAgdGhpcy5zb2x1dGlvbi5kcmFpblNvbHV0aW9uKCB0aGlzLmRyYWluRmF1Y2V0LmZsb3dSYXRlUHJvcGVydHkudmFsdWUgKiBkdCApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU3RhcnRzIHRoZSBhdXRvZmlsbCBhbmltYXRpb24uXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGFydEF1dG9maWxsKCk6IHZvaWQge1xyXG4gICAgaWYgKCB0aGlzLmF1dG9maWxsRW5hYmxlZFByb3BlcnR5LnZhbHVlICYmIHRoaXMuYXV0b2ZpbGxWb2x1bWUgPiAwICkge1xyXG4gICAgICB0aGlzLmlzQXV0b2ZpbGxpbmdQcm9wZXJ0eS52YWx1ZSA9IHRydWU7XHJcbiAgICAgIHRoaXMuZHJvcHBlci5pc0Rpc3BlbnNpbmdQcm9wZXJ0eS52YWx1ZSA9IHRydWU7XHJcbiAgICAgIHRoaXMuZHJvcHBlci5mbG93UmF0ZVByb3BlcnR5LnZhbHVlID0gMC43NTsgLy8gZmFzdGVyIHRoYW4gc3RhbmRhcmQgZmxvdyByYXRlXHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy51cGRhdGVGYXVjZXRzQW5kRHJvcHBlcigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWR2YW5jZXMgdGhlIGF1dG9maWxsIGFuaW1hdGlvbiBieSBkdCwgaW4gc2Vjb25kcy5cclxuICAgKi9cclxuICBwcml2YXRlIHN0ZXBBdXRvZmlsbCggZHQ6IG51bWJlciApOiB2b2lkIHtcclxuICAgIHRoaXMuc29sdXRpb24uYWRkU29sdXRlKCBNYXRoLm1pbiggdGhpcy5kcm9wcGVyLmZsb3dSYXRlUHJvcGVydHkudmFsdWUgKiBkdCxcclxuICAgICAgdGhpcy5hdXRvZmlsbFZvbHVtZSAtIHRoaXMuc29sdXRpb24udG90YWxWb2x1bWVQcm9wZXJ0eS52YWx1ZSApICk7XHJcbiAgICBpZiAoIHRoaXMuc29sdXRpb24udG90YWxWb2x1bWVQcm9wZXJ0eS52YWx1ZSA9PT0gdGhpcy5hdXRvZmlsbFZvbHVtZSApIHtcclxuICAgICAgdGhpcy5zdG9wQXV0b2ZpbGwoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFN0b3BzIHRoZSBhdXRvZmlsbCBhbmltYXRpb24uXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdG9wQXV0b2ZpbGwoKTogdm9pZCB7XHJcbiAgICB0aGlzLmlzQXV0b2ZpbGxpbmdQcm9wZXJ0eS52YWx1ZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5kcm9wcGVyLmlzRGlzcGVuc2luZ1Byb3BlcnR5LnZhbHVlID0gZmFsc2U7XHJcbiAgICB0aGlzLnVwZGF0ZUZhdWNldHNBbmREcm9wcGVyKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZW5lcmFsIGFsZ29yaXRobSBmb3IgcEguXHJcbiAgICogQHBhcmFtIHNvbHV0ZVBIXHJcbiAgICogQHBhcmFtIHNvbHV0ZVZvbHVtZSBsaXRlcnNcclxuICAgKiBAcGFyYW0gd2F0ZXJWb2x1bWUgbGl0ZXJzXHJcbiAgICogQHJldHVybnMgcEgsIG51bGwgaWYgdG90YWwgdm9sdW1lIGlzIHplcm9cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGNvbXB1dGVQSCggc29sdXRlUEg6IG51bWJlciwgc29sdXRlVm9sdW1lOiBudW1iZXIsIHdhdGVyVm9sdW1lOiBudW1iZXIgKTogUEhWYWx1ZSB7XHJcbiAgICBsZXQgcEg7XHJcbiAgICBjb25zdCB0b3RhbFZvbHVtZSA9IHNvbHV0ZVZvbHVtZSArIHdhdGVyVm9sdW1lO1xyXG4gICAgaWYgKCB0b3RhbFZvbHVtZSA9PT0gMCApIHtcclxuICAgICAgcEggPSBudWxsO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoIHdhdGVyVm9sdW1lID09PSAwICkge1xyXG4gICAgICBwSCA9IHNvbHV0ZVBIOyAvLyB0byBwcmV2ZW50IGZsb2F0aW5nLXBvaW50IGVycm9yIGluIGxvZzEwIGNvbXB1dGF0aW9uc1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoIHNvbHV0ZVZvbHVtZSA9PT0gMCApIHtcclxuICAgICAgcEggPSBXYXRlci5wSDsgLy8gdG8gcHJldmVudCBmbG9hdGluZy1wb2ludCBlcnJvciBpbiBsb2cxMCBjb21wdXRhdGlvbnNcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKCBzb2x1dGVQSCA8IDcgKSB7XHJcbiAgICAgIHBIID0gLVV0aWxzLmxvZzEwKCAoIE1hdGgucG93KCAxMCwgLXNvbHV0ZVBIICkgKiBzb2x1dGVWb2x1bWUgKyBNYXRoLnBvdyggMTAsIC1XYXRlci5wSCApICogd2F0ZXJWb2x1bWUgKSAvIHRvdGFsVm9sdW1lICk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgcEggPSAxNCArIFV0aWxzLmxvZzEwKCAoIE1hdGgucG93KCAxMCwgc29sdXRlUEggLSAxNCApICogc29sdXRlVm9sdW1lICsgTWF0aC5wb3coIDEwLCBXYXRlci5wSCAtIDE0ICkgKiB3YXRlclZvbHVtZSApIC8gdG90YWxWb2x1bWUgKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwSDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbXB1dGUgcEggZnJvbSBIM08rIGNvbmNlbnRyYXRpb24uXHJcbiAgICogQHBhcmFtIGNvbmNlbnRyYXRpb25cclxuICAgKiBAcmV0dXJucyBwSCwgbnVsbCBpZiBjb25jZW50cmF0aW9uIGlzIHplcm9cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGNvbmNlbnRyYXRpb25IM09Ub1BIKCBjb25jZW50cmF0aW9uOiBDb25jZW50cmF0aW9uVmFsdWUgKTogUEhWYWx1ZSB7XHJcbiAgICByZXR1cm4gKCBjb25jZW50cmF0aW9uID09PSBudWxsIHx8IGNvbmNlbnRyYXRpb24gPT09IDAgKSA/IG51bGwgOiAtVXRpbHMubG9nMTAoIGNvbmNlbnRyYXRpb24gKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbXB1dGUgcEggZnJvbSBPSC0gY29uY2VudHJhdGlvbi5cclxuICAgKiBAcGFyYW0gY29uY2VudHJhdGlvblxyXG4gICAqIEByZXR1cm5zIHBILCBudWxsIGlmIGNvbmNlbnRyYXRpb24gaXMgemVyb1xyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgY29uY2VudHJhdGlvbk9IVG9QSCggY29uY2VudHJhdGlvbjogQ29uY2VudHJhdGlvblZhbHVlICk6IFBIVmFsdWUge1xyXG4gICAgY29uc3QgcEggPSBQSE1vZGVsLmNvbmNlbnRyYXRpb25IM09Ub1BIKCBjb25jZW50cmF0aW9uICk7XHJcbiAgICByZXR1cm4gKCBwSCA9PT0gbnVsbCApID8gbnVsbCA6IDE0IC0gcEg7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDb21wdXRlIHBIIGZyb20gbW9sZXMgb2YgSDNPKy5cclxuICAgKiBAcGFyYW0gbW9sZXNcclxuICAgKiBAcGFyYW0gdm9sdW1lIHZvbHVtZSBvZiB0aGUgc29sdXRpb24gaW4gbGl0ZXJzXHJcbiAgICogQHJldHVybnMgcEgsIG51bGwgaWYgbW9sZXMgb3Igdm9sdW1lIGlzIHplcm9cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG1vbGVzSDNPVG9QSCggbW9sZXM6IG51bWJlciwgdm9sdW1lOiBudW1iZXIgKTogUEhWYWx1ZSB7XHJcbiAgICByZXR1cm4gKCBtb2xlcyA9PT0gMCB8fCB2b2x1bWUgPT09IDAgKSA/IG51bGwgOiBQSE1vZGVsLmNvbmNlbnRyYXRpb25IM09Ub1BIKCBtb2xlcyAvIHZvbHVtZSApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ29tcHV0ZSBwSCBmcm9tIG1vbGVzIG9mIE9ILS5cclxuICAgKiBAcGFyYW0gbW9sZXNcclxuICAgKiBAcGFyYW0gdm9sdW1lIHZvbHVtZSBvZiB0aGUgc29sdXRpb24gaW4gbGl0ZXJzXHJcbiAgICogQHJldHVybnMgcEgsIG51bGwgaWYgbW9sZXMgb3Igdm9sdW1lIGlzIHplcm9cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIG1vbGVzT0hUb1BIKCBtb2xlczogbnVtYmVyLCB2b2x1bWU6IG51bWJlciApOiBQSFZhbHVlIHtcclxuICAgIHJldHVybiAoIG1vbGVzID09PSAwIHx8IHZvbHVtZSA9PT0gMCApID8gbnVsbCA6IFBITW9kZWwuY29uY2VudHJhdGlvbk9IVG9QSCggbW9sZXMgLyB2b2x1bWUgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbXB1dGVzIGNvbmNlbnRyYXRpb24gb2YgSDIwIGZyb20gdm9sdW1lLlxyXG4gICAqIEBwYXJhbSB2b2x1bWVcclxuICAgKiBAcmV0dXJucyBjb25jZW50cmF0aW9uIGluIG1vbGVzL0wsIG51bGwgaWYgdm9sdW1lIGlzIDBcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIHZvbHVtZVRvQ29uY2VudHJhdGlvbkgyMCggdm9sdW1lOiBudW1iZXIgKTogUEhWYWx1ZSB7XHJcbiAgICByZXR1cm4gKCB2b2x1bWUgPT09IDAgKSA/IG51bGwgOiBXYXRlci5jb25jZW50cmF0aW9uO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ29tcHV0ZXMgY29uY2VudHJhdGlvbiBvZiBIM08rIGZyb20gcEguXHJcbiAgICpcclxuICAgKiBAcGFyYW0gcEggbnVsbCBtZWFucyAnbm8gdmFsdWUnXHJcbiAgICogQHJldHVybnMgY29uY2VudHJhdGlvbiBpbiBtb2xlcy9MLCBudWxsIG1lYW5zIG5vIGNvbmNlbnRyYXRpb25cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIHBIVG9Db25jZW50cmF0aW9uSDNPKCBwSDogUEhWYWx1ZSApOiBDb25jZW50cmF0aW9uVmFsdWUge1xyXG4gICAgcmV0dXJuICggcEggPT09IG51bGwgKSA/IG51bGwgOiBNYXRoLnBvdyggMTAsIC1wSCApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ29tcHV0ZXMgY29uY2VudHJhdGlvbiBvZiBPSC0gZnJvbSBwSC5cclxuICAgKiBAcGFyYW0gcEggbnVsbCBtZWFucyAnbm8gdmFsdWUnXHJcbiAgICogQHJldHVybnMgY29uY2VudHJhdGlvbiBpbiBtb2xlcy9MLCBudWxsIG1lYW5zIG5vIGNvbmNlbnRyYXRpb25cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIHBIVG9Db25jZW50cmF0aW9uT0goIHBIOiBQSFZhbHVlICk6IENvbmNlbnRyYXRpb25WYWx1ZSB7XHJcbiAgICByZXR1cm4gKCBwSCA9PT0gbnVsbCApID8gbnVsbCA6IFBITW9kZWwucEhUb0NvbmNlbnRyYXRpb25IM08oIDE0IC0gcEggKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbXB1dGVzIHRoZSBudW1iZXIgb2YgcGFydGljbGVzIGluIHNvbHV0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgY29tcHV0ZVBhcnRpY2xlQ291bnQoIGNvbmNlbnRyYXRpb246IENvbmNlbnRyYXRpb25WYWx1ZSwgdm9sdW1lOiBudW1iZXIgKTogbnVtYmVyIHtcclxuICAgIHJldHVybiAoIGNvbmNlbnRyYXRpb24gPT09IG51bGwgKSA/IDAgOiAoIGNvbmNlbnRyYXRpb24gKiB2b2x1bWUgKiBBVk9HQURST1NfTlVNQkVSICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDb21wdXRlcyBtb2xlcyBpbiBzb2x1dGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGNvbXB1dGVNb2xlcyggY29uY2VudHJhdGlvbjogQ29uY2VudHJhdGlvblZhbHVlLCB2b2x1bWU6IG51bWJlciApOiBudW1iZXIge1xyXG4gICAgcmV0dXJuICggY29uY2VudHJhdGlvbiA9PT0gbnVsbCApID8gMCA6ICggY29uY2VudHJhdGlvbiAqIHZvbHVtZSApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVHJ1ZSBpZiB0aGUgdmFsdWUgZGlzcGxheWVkIGJ5IHRoZSBwSCBtZXRlciBoYXMgcHJlY2lzaW9uIHRoYXQgbWFrZXMgaXQgZXF1aXZhbGVudCB0byB0aGUgcEggb2Ygd2F0ZXIuXHJcbiAgICogRWcsIHRoZSB2YWx1ZSBkaXNwbGF5ZWQgdG8gdGhlIHVzZXIgaXMgJzcuMDAnLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgaXNFcXVpdmFsZW50VG9XYXRlciggcEg6IFBIVmFsdWUgKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gKCBwSCAhPT0gbnVsbCApICYmXHJcbiAgICAgICAgICAgKCBVdGlscy50b0ZpeGVkTnVtYmVyKCBwSCwgUEhTY2FsZUNvbnN0YW50cy5QSF9NRVRFUl9ERUNJTUFMX1BMQUNFUyApID09PSBXYXRlci5wSCApO1xyXG4gIH1cclxufVxyXG5cclxucGhTY2FsZS5yZWdpc3RlciggJ1BITW9kZWwnLCBQSE1vZGVsICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9B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