// Copyright 2013-2022, University of Colorado Boulder

/**
 * ParticleCountsNode displays a count for each type of particle in the beaker.
 *
 * NOTE: Prior to 12/15/2022, this class was named MoleculeCountNode. We discovered that 'molecule' was incorrect
 * terminology here, because a molecule is neutral. While H2O is indeed a molecule, H3O+ and OH+ are charged
 * and should be referred to as ions. Since 'particles can be atoms, molecules or ions', we chose the term
 * 'particle' because we are displaying counts for both molecules and ions. This terminology change was made
 * throughout the sim where appropriate. More at https://github.com/phetsims/ph-scale/issues/258
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import Property from '../../../../axon/js/Property.js';
import optionize, { combineOptions } from '../../../../phet-core/js/optionize.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import ScientificNotationNode from '../../../../scenery-phet/js/ScientificNotationNode.js';
import { AlignBox, AlignGroup, HBox, Node, Rectangle } from '../../../../scenery/js/imports.js';
import phScale from '../../phScale.js';
import PHScaleColors from '../PHScaleColors.js';
import H2ONode from './particles/H2ONode.js';
import H3ONode from './particles/H3ONode.js';
import OHNode from './particles/OHNode.js';
export default class ParticleCountsNode extends Node {
  constructor(derivedProperties, providedOptions) {
    const options = optionize()({
      // NodeOptions
      phetioDocumentation: 'displays the number of particles (ions and molecules) in the solution'
    }, providedOptions);

    // margins and spacing
    const xMargin = 10;
    const yMargin = 5;
    const xSpacing = 10;
    const ySpacing = 6;

    // count values
    const notationOptions = {
      font: new PhetFont(22),
      fill: 'white',
      mantissaDecimalPlaces: 2
    };
    const countsAlignBoxOptions = {
      group: new AlignGroup(),
      xAlign: 'right',
      yAlign: 'center'
    };
    const countH3ONode = new AlignBox(new ScientificNotationNode(derivedProperties.particleCountH3OProperty, notationOptions), countsAlignBoxOptions);
    const countOHNode = new AlignBox(new ScientificNotationNode(derivedProperties.particleCountOHProperty, notationOptions), countsAlignBoxOptions);
    const countH2ONode = new AlignBox(new ScientificNotationNode(derivedProperties.particleCountH2OProperty, combineOptions({}, notationOptions, {
      exponent: 25
    })), countsAlignBoxOptions);

    // Add an invisible count to the group, so that we get the correct (maximum) width.
    const invisibleCountNode = new AlignBox(new ScientificNotationNode(new Property(1e16), notationOptions), countsAlignBoxOptions);
    invisibleCountNode.visible = false;

    // particle icons
    const iconsAlignBoxOptions = {
      group: new AlignGroup(),
      xAlign: 'center',
      yAlign: 'center'
    };
    const iconH3O = new AlignBox(new H3ONode(), iconsAlignBoxOptions);
    const iconOH = new AlignBox(new OHNode(), iconsAlignBoxOptions);
    const iconH2O = new AlignBox(new H2ONode(), iconsAlignBoxOptions);

    // HBoxes for layout
    const hboxH3O = new HBox({
      children: [countH3ONode, iconH3O],
      spacing: xSpacing
    });
    const hboxOH = new HBox({
      children: [countOHNode, iconOH],
      spacing: xSpacing
    });
    const hboxH2O = new HBox({
      children: [countH2ONode, iconH2O],
      spacing: xSpacing
    });

    // backgrounds
    const backgroundWidth = hboxH3O.width + 2 * xMargin;
    const backgroundHeight = hboxH3O.height + 2 * yMargin;
    const backgroundOptions = {
      cornerRadius: 5,
      backgroundStroke: 'rgb( 200, 200, 200 )'
    };
    const backgroundH3O = new Rectangle(0, 0, backgroundWidth, backgroundHeight, combineOptions({}, backgroundOptions, {
      fill: PHScaleColors.ACIDIC
    }));
    const backgroundOH = new Rectangle(0, 0, backgroundWidth, backgroundHeight, combineOptions({}, backgroundOptions, {
      fill: PHScaleColors.BASIC
    }));
    const backgroundH2O = new Rectangle(0, 0, backgroundWidth, backgroundHeight, combineOptions({}, backgroundOptions, {
      fill: PHScaleColors.H2O_BACKGROUND
    }));
    options.children = [backgroundH3O, hboxH3O, backgroundOH, hboxOH, backgroundH2O, hboxH2O];
    super(options);

    // layout...
    // backgrounds are vertically stacked
    backgroundOH.left = backgroundH3O.left;
    backgroundOH.top = backgroundH3O.bottom + ySpacing;
    backgroundH2O.left = backgroundOH.left;
    backgroundH2O.top = backgroundOH.bottom + ySpacing;
    // counts and icons are centered in backgrounds
    hboxH3O.center = backgroundH3O.center;
    hboxOH.center = backgroundOH.center;
    hboxH2O.center = backgroundH2O.center;

    // Links to the count Properties
    this.addLinkedElement(derivedProperties.particleCountH3OProperty, {
      tandem: options.tandem.createTandem('particleCountH3OProperty')
    });
    this.addLinkedElement(derivedProperties.particleCountOHProperty, {
      tandem: options.tandem.createTandem('particleCountOHProperty')
    });
    this.addLinkedElement(derivedProperties.particleCountH2OProperty, {
      tandem: options.tandem.createTandem('particleCountH2OProperty')
    });
  }
}
phScale.register('ParticleCountsNode', ParticleCountsNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQcm9wZXJ0eSIsIm9wdGlvbml6ZSIsImNvbWJpbmVPcHRpb25zIiwiUGhldEZvbnQiLCJTY2llbnRpZmljTm90YXRpb25Ob2RlIiwiQWxpZ25Cb3giLCJBbGlnbkdyb3VwIiwiSEJveCIsIk5vZGUiLCJSZWN0YW5nbGUiLCJwaFNjYWxlIiwiUEhTY2FsZUNvbG9ycyIsIkgyT05vZGUiLCJIM09Ob2RlIiwiT0hOb2RlIiwiUGFydGljbGVDb3VudHNOb2RlIiwiY29uc3RydWN0b3IiLCJkZXJpdmVkUHJvcGVydGllcyIsInByb3ZpZGVkT3B0aW9ucyIsIm9wdGlvbnMiLCJwaGV0aW9Eb2N1bWVudGF0aW9uIiwieE1hcmdpbiIsInlNYXJnaW4iLCJ4U3BhY2luZyIsInlTcGFjaW5nIiwibm90YXRpb25PcHRpb25zIiwiZm9udCIsImZpbGwiLCJtYW50aXNzYURlY2ltYWxQbGFjZXMiLCJjb3VudHNBbGlnbkJveE9wdGlvbnMiLCJncm91cCIsInhBbGlnbiIsInlBbGlnbiIsImNvdW50SDNPTm9kZSIsInBhcnRpY2xlQ291bnRIM09Qcm9wZXJ0eSIsImNvdW50T0hOb2RlIiwicGFydGljbGVDb3VudE9IUHJvcGVydHkiLCJjb3VudEgyT05vZGUiLCJwYXJ0aWNsZUNvdW50SDJPUHJvcGVydHkiLCJleHBvbmVudCIsImludmlzaWJsZUNvdW50Tm9kZSIsInZpc2libGUiLCJpY29uc0FsaWduQm94T3B0aW9ucyIsImljb25IM08iLCJpY29uT0giLCJpY29uSDJPIiwiaGJveEgzTyIsImNoaWxkcmVuIiwic3BhY2luZyIsImhib3hPSCIsImhib3hIMk8iLCJiYWNrZ3JvdW5kV2lkdGgiLCJ3aWR0aCIsImJhY2tncm91bmRIZWlnaHQiLCJoZWlnaHQiLCJiYWNrZ3JvdW5kT3B0aW9ucyIsImNvcm5lclJhZGl1cyIsImJhY2tncm91bmRTdHJva2UiLCJiYWNrZ3JvdW5kSDNPIiwiQUNJRElDIiwiYmFja2dyb3VuZE9IIiwiQkFTSUMiLCJiYWNrZ3JvdW5kSDJPIiwiSDJPX0JBQ0tHUk9VTkQiLCJsZWZ0IiwidG9wIiwiYm90dG9tIiwiY2VudGVyIiwiYWRkTGlua2VkRWxlbWVudCIsInRhbmRlbSIsImNyZWF0ZVRhbmRlbSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiUGFydGljbGVDb3VudHNOb2RlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFBhcnRpY2xlQ291bnRzTm9kZSBkaXNwbGF5cyBhIGNvdW50IGZvciBlYWNoIHR5cGUgb2YgcGFydGljbGUgaW4gdGhlIGJlYWtlci5cclxuICpcclxuICogTk9URTogUHJpb3IgdG8gMTIvMTUvMjAyMiwgdGhpcyBjbGFzcyB3YXMgbmFtZWQgTW9sZWN1bGVDb3VudE5vZGUuIFdlIGRpc2NvdmVyZWQgdGhhdCAnbW9sZWN1bGUnIHdhcyBpbmNvcnJlY3RcclxuICogdGVybWlub2xvZ3kgaGVyZSwgYmVjYXVzZSBhIG1vbGVjdWxlIGlzIG5ldXRyYWwuIFdoaWxlIEgyTyBpcyBpbmRlZWQgYSBtb2xlY3VsZSwgSDNPKyBhbmQgT0grIGFyZSBjaGFyZ2VkXHJcbiAqIGFuZCBzaG91bGQgYmUgcmVmZXJyZWQgdG8gYXMgaW9ucy4gU2luY2UgJ3BhcnRpY2xlcyBjYW4gYmUgYXRvbXMsIG1vbGVjdWxlcyBvciBpb25zJywgd2UgY2hvc2UgdGhlIHRlcm1cclxuICogJ3BhcnRpY2xlJyBiZWNhdXNlIHdlIGFyZSBkaXNwbGF5aW5nIGNvdW50cyBmb3IgYm90aCBtb2xlY3VsZXMgYW5kIGlvbnMuIFRoaXMgdGVybWlub2xvZ3kgY2hhbmdlIHdhcyBtYWRlXHJcbiAqIHRocm91Z2hvdXQgdGhlIHNpbSB3aGVyZSBhcHByb3ByaWF0ZS4gTW9yZSBhdCBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvcGgtc2NhbGUvaXNzdWVzLzI1OFxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCBQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1Byb3BlcnR5LmpzJztcclxuaW1wb3J0IG9wdGlvbml6ZSwgeyBjb21iaW5lT3B0aW9ucywgRW1wdHlTZWxmT3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgUGlja1JlcXVpcmVkIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9QaWNrUmVxdWlyZWQuanMnO1xyXG5pbXBvcnQgUGhldEZvbnQgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1BoZXRGb250LmpzJztcclxuaW1wb3J0IFNjaWVudGlmaWNOb3RhdGlvbk5vZGUsIHsgU2NpZW50aWZpY05vdGF0aW9uTm9kZU9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvU2NpZW50aWZpY05vdGF0aW9uTm9kZS5qcyc7XHJcbmltcG9ydCB7IEFsaWduQm94LCBBbGlnbkJveE9wdGlvbnMsIEFsaWduR3JvdXAsIEhCb3gsIE5vZGUsIE5vZGVPcHRpb25zLCBSZWN0YW5nbGUsIFJlY3RhbmdsZU9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgcGhTY2FsZSBmcm9tICcuLi8uLi9waFNjYWxlLmpzJztcclxuaW1wb3J0IFNvbHV0aW9uRGVyaXZlZFByb3BlcnRpZXMgZnJvbSAnLi4vbW9kZWwvU29sdXRpb25EZXJpdmVkUHJvcGVydGllcy5qcyc7XHJcbmltcG9ydCBQSFNjYWxlQ29sb3JzIGZyb20gJy4uL1BIU2NhbGVDb2xvcnMuanMnO1xyXG5pbXBvcnQgSDJPTm9kZSBmcm9tICcuL3BhcnRpY2xlcy9IMk9Ob2RlLmpzJztcclxuaW1wb3J0IEgzT05vZGUgZnJvbSAnLi9wYXJ0aWNsZXMvSDNPTm9kZS5qcyc7XHJcbmltcG9ydCBPSE5vZGUgZnJvbSAnLi9wYXJ0aWNsZXMvT0hOb2RlLmpzJztcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSBFbXB0eVNlbGZPcHRpb25zO1xyXG5cclxudHlwZSBQYXJ0aWNsZUNvdW50c05vZGVPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBQaWNrUmVxdWlyZWQ8Tm9kZU9wdGlvbnMsICd0YW5kZW0nIHwgJ3Zpc2libGVQcm9wZXJ0eSc+O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFydGljbGVDb3VudHNOb2RlIGV4dGVuZHMgTm9kZSB7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggZGVyaXZlZFByb3BlcnRpZXM6IFNvbHV0aW9uRGVyaXZlZFByb3BlcnRpZXMsIHByb3ZpZGVkT3B0aW9uczogUGFydGljbGVDb3VudHNOb2RlT3B0aW9ucyApIHtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPFBhcnRpY2xlQ291bnRzTm9kZU9wdGlvbnMsIFNlbGZPcHRpb25zLCBOb2RlT3B0aW9ucz4oKSgge1xyXG5cclxuICAgICAgLy8gTm9kZU9wdGlvbnNcclxuICAgICAgcGhldGlvRG9jdW1lbnRhdGlvbjogJ2Rpc3BsYXlzIHRoZSBudW1iZXIgb2YgcGFydGljbGVzIChpb25zIGFuZCBtb2xlY3VsZXMpIGluIHRoZSBzb2x1dGlvbidcclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIC8vIG1hcmdpbnMgYW5kIHNwYWNpbmdcclxuICAgIGNvbnN0IHhNYXJnaW4gPSAxMDtcclxuICAgIGNvbnN0IHlNYXJnaW4gPSA1O1xyXG4gICAgY29uc3QgeFNwYWNpbmcgPSAxMDtcclxuICAgIGNvbnN0IHlTcGFjaW5nID0gNjtcclxuXHJcbiAgICAvLyBjb3VudCB2YWx1ZXNcclxuICAgIGNvbnN0IG5vdGF0aW9uT3B0aW9uczogU2NpZW50aWZpY05vdGF0aW9uTm9kZU9wdGlvbnMgPSB7XHJcbiAgICAgIGZvbnQ6IG5ldyBQaGV0Rm9udCggMjIgKSxcclxuICAgICAgZmlsbDogJ3doaXRlJyxcclxuICAgICAgbWFudGlzc2FEZWNpbWFsUGxhY2VzOiAyXHJcbiAgICB9O1xyXG4gICAgY29uc3QgY291bnRzQWxpZ25Cb3hPcHRpb25zOiBBbGlnbkJveE9wdGlvbnMgPSB7XHJcbiAgICAgIGdyb3VwOiBuZXcgQWxpZ25Hcm91cCgpLFxyXG4gICAgICB4QWxpZ246ICdyaWdodCcsXHJcbiAgICAgIHlBbGlnbjogJ2NlbnRlcidcclxuICAgIH07XHJcbiAgICBjb25zdCBjb3VudEgzT05vZGUgPSBuZXcgQWxpZ25Cb3goIG5ldyBTY2llbnRpZmljTm90YXRpb25Ob2RlKCBkZXJpdmVkUHJvcGVydGllcy5wYXJ0aWNsZUNvdW50SDNPUHJvcGVydHksIG5vdGF0aW9uT3B0aW9ucyApLCBjb3VudHNBbGlnbkJveE9wdGlvbnMgKTtcclxuICAgIGNvbnN0IGNvdW50T0hOb2RlID0gbmV3IEFsaWduQm94KCBuZXcgU2NpZW50aWZpY05vdGF0aW9uTm9kZSggZGVyaXZlZFByb3BlcnRpZXMucGFydGljbGVDb3VudE9IUHJvcGVydHksIG5vdGF0aW9uT3B0aW9ucyApLCBjb3VudHNBbGlnbkJveE9wdGlvbnMgKTtcclxuICAgIGNvbnN0IGNvdW50SDJPTm9kZSA9IG5ldyBBbGlnbkJveCggbmV3IFNjaWVudGlmaWNOb3RhdGlvbk5vZGUoIGRlcml2ZWRQcm9wZXJ0aWVzLnBhcnRpY2xlQ291bnRIMk9Qcm9wZXJ0eSxcclxuICAgICAgY29tYmluZU9wdGlvbnM8U2NpZW50aWZpY05vdGF0aW9uTm9kZU9wdGlvbnM+KCB7fSwgbm90YXRpb25PcHRpb25zLCB7IGV4cG9uZW50OiAyNSB9ICkgKSwgY291bnRzQWxpZ25Cb3hPcHRpb25zICk7XHJcblxyXG4gICAgLy8gQWRkIGFuIGludmlzaWJsZSBjb3VudCB0byB0aGUgZ3JvdXAsIHNvIHRoYXQgd2UgZ2V0IHRoZSBjb3JyZWN0IChtYXhpbXVtKSB3aWR0aC5cclxuICAgIGNvbnN0IGludmlzaWJsZUNvdW50Tm9kZSA9IG5ldyBBbGlnbkJveCggbmV3IFNjaWVudGlmaWNOb3RhdGlvbk5vZGUoIG5ldyBQcm9wZXJ0eSggMWUxNiApLCBub3RhdGlvbk9wdGlvbnMgKSwgY291bnRzQWxpZ25Cb3hPcHRpb25zICk7XHJcbiAgICBpbnZpc2libGVDb3VudE5vZGUudmlzaWJsZSA9IGZhbHNlO1xyXG5cclxuICAgIC8vIHBhcnRpY2xlIGljb25zXHJcbiAgICBjb25zdCBpY29uc0FsaWduQm94T3B0aW9uczogQWxpZ25Cb3hPcHRpb25zID0ge1xyXG4gICAgICBncm91cDogbmV3IEFsaWduR3JvdXAoKSxcclxuICAgICAgeEFsaWduOiAnY2VudGVyJyxcclxuICAgICAgeUFsaWduOiAnY2VudGVyJ1xyXG4gICAgfTtcclxuICAgIGNvbnN0IGljb25IM08gPSBuZXcgQWxpZ25Cb3goIG5ldyBIM09Ob2RlKCksIGljb25zQWxpZ25Cb3hPcHRpb25zICk7XHJcbiAgICBjb25zdCBpY29uT0ggPSBuZXcgQWxpZ25Cb3goIG5ldyBPSE5vZGUoKSwgaWNvbnNBbGlnbkJveE9wdGlvbnMgKTtcclxuICAgIGNvbnN0IGljb25IMk8gPSBuZXcgQWxpZ25Cb3goIG5ldyBIMk9Ob2RlKCksIGljb25zQWxpZ25Cb3hPcHRpb25zICk7XHJcblxyXG4gICAgLy8gSEJveGVzIGZvciBsYXlvdXRcclxuICAgIGNvbnN0IGhib3hIM08gPSBuZXcgSEJveCgge1xyXG4gICAgICBjaGlsZHJlbjogWyBjb3VudEgzT05vZGUsIGljb25IM08gXSxcclxuICAgICAgc3BhY2luZzogeFNwYWNpbmdcclxuICAgIH0gKTtcclxuICAgIGNvbnN0IGhib3hPSCA9IG5ldyBIQm94KCB7XHJcbiAgICAgIGNoaWxkcmVuOiBbIGNvdW50T0hOb2RlLCBpY29uT0ggXSxcclxuICAgICAgc3BhY2luZzogeFNwYWNpbmdcclxuICAgIH0gKTtcclxuICAgIGNvbnN0IGhib3hIMk8gPSBuZXcgSEJveCgge1xyXG4gICAgICBjaGlsZHJlbjogWyBjb3VudEgyT05vZGUsIGljb25IMk8gXSxcclxuICAgICAgc3BhY2luZzogeFNwYWNpbmdcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBiYWNrZ3JvdW5kc1xyXG4gICAgY29uc3QgYmFja2dyb3VuZFdpZHRoID0gaGJveEgzTy53aWR0aCArICggMiAqIHhNYXJnaW4gKTtcclxuICAgIGNvbnN0IGJhY2tncm91bmRIZWlnaHQgPSBoYm94SDNPLmhlaWdodCArICggMiAqIHlNYXJnaW4gKTtcclxuICAgIGNvbnN0IGJhY2tncm91bmRPcHRpb25zID0ge1xyXG4gICAgICBjb3JuZXJSYWRpdXM6IDUsXHJcbiAgICAgIGJhY2tncm91bmRTdHJva2U6ICdyZ2IoIDIwMCwgMjAwLCAyMDAgKSdcclxuICAgIH07XHJcbiAgICBjb25zdCBiYWNrZ3JvdW5kSDNPID0gbmV3IFJlY3RhbmdsZSggMCwgMCwgYmFja2dyb3VuZFdpZHRoLCBiYWNrZ3JvdW5kSGVpZ2h0LCBjb21iaW5lT3B0aW9uczxSZWN0YW5nbGVPcHRpb25zPihcclxuICAgICAge30sIGJhY2tncm91bmRPcHRpb25zLCB7IGZpbGw6IFBIU2NhbGVDb2xvcnMuQUNJRElDIH0gKSApO1xyXG4gICAgY29uc3QgYmFja2dyb3VuZE9IID0gbmV3IFJlY3RhbmdsZSggMCwgMCwgYmFja2dyb3VuZFdpZHRoLCBiYWNrZ3JvdW5kSGVpZ2h0LCBjb21iaW5lT3B0aW9uczxSZWN0YW5nbGVPcHRpb25zPihcclxuICAgICAge30sIGJhY2tncm91bmRPcHRpb25zLCB7IGZpbGw6IFBIU2NhbGVDb2xvcnMuQkFTSUMgfSApICk7XHJcbiAgICBjb25zdCBiYWNrZ3JvdW5kSDJPID0gbmV3IFJlY3RhbmdsZSggMCwgMCwgYmFja2dyb3VuZFdpZHRoLCBiYWNrZ3JvdW5kSGVpZ2h0LCBjb21iaW5lT3B0aW9uczxSZWN0YW5nbGVPcHRpb25zPihcclxuICAgICAge30sIGJhY2tncm91bmRPcHRpb25zLCB7IGZpbGw6IFBIU2NhbGVDb2xvcnMuSDJPX0JBQ0tHUk9VTkQgfSApICk7XHJcblxyXG4gICAgb3B0aW9ucy5jaGlsZHJlbiA9IFtcclxuICAgICAgYmFja2dyb3VuZEgzTywgaGJveEgzTyxcclxuICAgICAgYmFja2dyb3VuZE9ILCBoYm94T0gsXHJcbiAgICAgIGJhY2tncm91bmRIMk8sIGhib3hIMk9cclxuICAgIF07XHJcbiAgICBzdXBlciggb3B0aW9ucyApO1xyXG5cclxuICAgIC8vIGxheW91dC4uLlxyXG4gICAgLy8gYmFja2dyb3VuZHMgYXJlIHZlcnRpY2FsbHkgc3RhY2tlZFxyXG4gICAgYmFja2dyb3VuZE9ILmxlZnQgPSBiYWNrZ3JvdW5kSDNPLmxlZnQ7XHJcbiAgICBiYWNrZ3JvdW5kT0gudG9wID0gYmFja2dyb3VuZEgzTy5ib3R0b20gKyB5U3BhY2luZztcclxuICAgIGJhY2tncm91bmRIMk8ubGVmdCA9IGJhY2tncm91bmRPSC5sZWZ0O1xyXG4gICAgYmFja2dyb3VuZEgyTy50b3AgPSBiYWNrZ3JvdW5kT0guYm90dG9tICsgeVNwYWNpbmc7XHJcbiAgICAvLyBjb3VudHMgYW5kIGljb25zIGFyZSBjZW50ZXJlZCBpbiBiYWNrZ3JvdW5kc1xyXG4gICAgaGJveEgzTy5jZW50ZXIgPSBiYWNrZ3JvdW5kSDNPLmNlbnRlcjtcclxuICAgIGhib3hPSC5jZW50ZXIgPSBiYWNrZ3JvdW5kT0guY2VudGVyO1xyXG4gICAgaGJveEgyTy5jZW50ZXIgPSBiYWNrZ3JvdW5kSDJPLmNlbnRlcjtcclxuXHJcbiAgICAvLyBMaW5rcyB0byB0aGUgY291bnQgUHJvcGVydGllc1xyXG4gICAgdGhpcy5hZGRMaW5rZWRFbGVtZW50KCBkZXJpdmVkUHJvcGVydGllcy5wYXJ0aWNsZUNvdW50SDNPUHJvcGVydHksIHtcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdwYXJ0aWNsZUNvdW50SDNPUHJvcGVydHknIClcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLmFkZExpbmtlZEVsZW1lbnQoIGRlcml2ZWRQcm9wZXJ0aWVzLnBhcnRpY2xlQ291bnRPSFByb3BlcnR5LCB7XHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAncGFydGljbGVDb3VudE9IUHJvcGVydHknIClcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLmFkZExpbmtlZEVsZW1lbnQoIGRlcml2ZWRQcm9wZXJ0aWVzLnBhcnRpY2xlQ291bnRIMk9Qcm9wZXJ0eSwge1xyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3BhcnRpY2xlQ291bnRIMk9Qcm9wZXJ0eScgKVxyXG4gICAgfSApO1xyXG4gIH1cclxufVxyXG5cclxucGhTY2FsZS5yZWdpc3RlciggJ1BhcnRpY2xlQ291bnRzTm9kZScsIFBhcnRpY2xlQ291bnRzTm9kZSApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxRQUFRLE1BQU0saUNBQWlDO0FBQ3RELE9BQU9DLFNBQVMsSUFBSUMsY0FBYyxRQUEwQix1Q0FBdUM7QUFFbkcsT0FBT0MsUUFBUSxNQUFNLHlDQUF5QztBQUM5RCxPQUFPQyxzQkFBc0IsTUFBeUMsdURBQXVEO0FBQzdILFNBQVNDLFFBQVEsRUFBbUJDLFVBQVUsRUFBRUMsSUFBSSxFQUFFQyxJQUFJLEVBQWVDLFNBQVMsUUFBMEIsbUNBQW1DO0FBQy9JLE9BQU9DLE9BQU8sTUFBTSxrQkFBa0I7QUFFdEMsT0FBT0MsYUFBYSxNQUFNLHFCQUFxQjtBQUMvQyxPQUFPQyxPQUFPLE1BQU0sd0JBQXdCO0FBQzVDLE9BQU9DLE9BQU8sTUFBTSx3QkFBd0I7QUFDNUMsT0FBT0MsTUFBTSxNQUFNLHVCQUF1QjtBQU0xQyxlQUFlLE1BQU1DLGtCQUFrQixTQUFTUCxJQUFJLENBQUM7RUFFNUNRLFdBQVdBLENBQUVDLGlCQUE0QyxFQUFFQyxlQUEwQyxFQUFHO0lBRTdHLE1BQU1DLE9BQU8sR0FBR2xCLFNBQVMsQ0FBc0QsQ0FBQyxDQUFFO01BRWhGO01B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