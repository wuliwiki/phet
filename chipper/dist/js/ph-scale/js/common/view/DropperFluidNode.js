// Copyright 2013-2023, University of Colorado Boulder

/**
 * Fluid (stock solution) coming out of the dropper.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import { Rectangle } from '../../../../scenery/js/imports.js';
import phScale from '../../phScale.js';
export default class DropperFluidNode extends Rectangle {
  constructor(dropper, beaker, tipWidth, modelViewTransform, providedOptions) {
    super(0, 0, 0, 0, providedOptions);
    const updateShapeAndPosition = () => {
      // shape
      if (dropper.flowRateProperty.value > 0) {
        this.setRect(-tipWidth / 2, 0, tipWidth, beaker.position.y - dropper.position.y);
      } else {
        this.setRect(0, 0, 0, 0);
      }

      // move this node to the dropper's position
      this.translation = modelViewTransform.modelToViewPosition(dropper.position);
    };
    dropper.flowRateProperty.link(updateShapeAndPosition);

    // set color to match solute
    dropper.soluteProperty.link(solute => {
      this.fill = solute.stockColor;
      this.stroke = solute.stockColor.darkerColor();
    });
  }
}
phScale.register('DropperFluidNode', DropperFluidNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWN0YW5nbGUiLCJwaFNjYWxlIiwiRHJvcHBlckZsdWlkTm9kZSIsImNvbnN0cnVjdG9yIiwiZHJvcHBlciIsImJlYWtlciIsInRpcFdpZHRoIiwibW9kZWxWaWV3VHJhbnNmb3JtIiwicHJvdmlkZWRPcHRpb25zIiwidXBkYXRlU2hhcGVBbmRQb3NpdGlvbiIsImZsb3dSYXRlUHJvcGVydHkiLCJ2YWx1ZSIsInNldFJlY3QiLCJwb3NpdGlvbiIsInkiLCJ0cmFuc2xhdGlvbiIsIm1vZGVsVG9WaWV3UG9zaXRpb24iLCJsaW5rIiwic29sdXRlUHJvcGVydHkiLCJzb2x1dGUiLCJmaWxsIiwic3RvY2tDb2xvciIsInN0cm9rZSIsImRhcmtlckNvbG9yIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJEcm9wcGVyRmx1aWROb2RlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIEZsdWlkIChzdG9jayBzb2x1dGlvbikgY29taW5nIG91dCBvZiB0aGUgZHJvcHBlci5cclxuICpcclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICovXHJcblxyXG5pbXBvcnQgeyBFbXB0eVNlbGZPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCBQaWNrUmVxdWlyZWQgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL1BpY2tSZXF1aXJlZC5qcyc7XHJcbmltcG9ydCBNb2RlbFZpZXdUcmFuc2Zvcm0yIGZyb20gJy4uLy4uLy4uLy4uL3BoZXRjb21tb24vanMvdmlldy9Nb2RlbFZpZXdUcmFuc2Zvcm0yLmpzJztcclxuaW1wb3J0IHsgUmVjdGFuZ2xlLCBSZWN0YW5nbGVPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IHBoU2NhbGUgZnJvbSAnLi4vLi4vcGhTY2FsZS5qcyc7XHJcbmltcG9ydCBCZWFrZXIgZnJvbSAnLi4vbW9kZWwvQmVha2VyLmpzJztcclxuaW1wb3J0IERyb3BwZXIgZnJvbSAnLi4vbW9kZWwvRHJvcHBlci5qcyc7XHJcblxyXG50eXBlIFNlbGZPcHRpb25zID0gRW1wdHlTZWxmT3B0aW9ucztcclxuXHJcbnR5cGUgRHJvcHBlckZsdWlkTm9kZU9wdGlvbnMgPSBTZWxmT3B0aW9ucyAmIFBpY2tSZXF1aXJlZDxSZWN0YW5nbGVPcHRpb25zLCAndmlzaWJsZVByb3BlcnR5Jz47XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEcm9wcGVyRmx1aWROb2RlIGV4dGVuZHMgUmVjdGFuZ2xlIHtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBkcm9wcGVyOiBEcm9wcGVyLCBiZWFrZXI6IEJlYWtlciwgdGlwV2lkdGg6IG51bWJlciwgbW9kZWxWaWV3VHJhbnNmb3JtOiBNb2RlbFZpZXdUcmFuc2Zvcm0yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZWRPcHRpb25zOiBEcm9wcGVyRmx1aWROb2RlT3B0aW9ucyApIHtcclxuXHJcbiAgICBzdXBlciggMCwgMCwgMCwgMCwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgY29uc3QgdXBkYXRlU2hhcGVBbmRQb3NpdGlvbiA9ICgpID0+IHtcclxuXHJcbiAgICAgIC8vIHNoYXBlXHJcbiAgICAgIGlmICggZHJvcHBlci5mbG93UmF0ZVByb3BlcnR5LnZhbHVlID4gMCApIHtcclxuICAgICAgICB0aGlzLnNldFJlY3QoIC10aXBXaWR0aCAvIDIsIDAsIHRpcFdpZHRoLCBiZWFrZXIucG9zaXRpb24ueSAtIGRyb3BwZXIucG9zaXRpb24ueSApO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHRoaXMuc2V0UmVjdCggMCwgMCwgMCwgMCApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBtb3ZlIHRoaXMgbm9kZSB0byB0aGUgZHJvcHBlcidzIHBvc2l0aW9uXHJcbiAgICAgIHRoaXMudHJhbnNsYXRpb24gPSBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdQb3NpdGlvbiggZHJvcHBlci5wb3NpdGlvbiApO1xyXG4gICAgfTtcclxuICAgIGRyb3BwZXIuZmxvd1JhdGVQcm9wZXJ0eS5saW5rKCB1cGRhdGVTaGFwZUFuZFBvc2l0aW9uICk7XHJcblxyXG4gICAgLy8gc2V0IGNvbG9yIHRvIG1hdGNoIHNvbHV0ZVxyXG4gICAgZHJvcHBlci5zb2x1dGVQcm9wZXJ0eS5saW5rKCBzb2x1dGUgPT4ge1xyXG4gICAgICB0aGlzLmZpbGwgPSBzb2x1dGUuc3RvY2tDb2xvcjtcclxuICAgICAgdGhpcy5zdHJva2UgPSBzb2x1dGUuc3RvY2tDb2xvci5kYXJrZXJDb2xvcigpO1xyXG4gICAgfSApO1xyXG4gIH1cclxufVxyXG5cclxucGhTY2FsZS5yZWdpc3RlciggJ0Ryb3BwZXJGbHVpZE5vZGUnLCBEcm9wcGVyRmx1aWROb2RlICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUtBLFNBQVNBLFNBQVMsUUFBMEIsbUNBQW1DO0FBQy9FLE9BQU9DLE9BQU8sTUFBTSxrQkFBa0I7QUFRdEMsZUFBZSxNQUFNQyxnQkFBZ0IsU0FBU0YsU0FBUyxDQUFDO0VBRS9DRyxXQUFXQSxDQUFFQyxPQUFnQixFQUFFQyxNQUFjLEVBQUVDLFFBQWdCLEVBQUVDLGtCQUF1QyxFQUMzRkMsZUFBd0MsRUFBRztJQUU3RCxLQUFLLENBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFQSxlQUFnQixDQUFDO0lBRXBDLE1BQU1DLHNCQUFzQixHQUFHQSxDQUFBLEtBQU07TUFFbkM7TUFDQSxJQUFLTCxPQUFPLENBQUNNLGdCQUFnQixDQUFDQyxLQUFLLEdBQUcsQ0FBQyxFQUFHO1FBQ3hDLElBQUksQ0FBQ0MsT0FBTyxDQUFFLENBQUNOLFFBQVEsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFQSxRQUFRLEVBQUVELE1BQU0sQ0FBQ1EsUUFBUSxDQUFDQyxDQUFDLEdBQUdWLE9BQU8sQ0FBQ1MsUUFBUSxDQUFDQyxDQUFFLENBQUM7TUFDcEYsQ0FBQyxNQUNJO1FBQ0gsSUFBSSxDQUFDRixPQUFPLENBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBRSxDQUFDO01BQzVCOztNQUVBO01BQ0EsSUFBSSxDQUFDRyxXQUFXLEdBQUdSLGtCQUFrQixDQUFDUyxtQkFBbUIsQ0FBRVosT0FBTyxDQUFDUyxRQUFTLENBQUM7SUFDL0UsQ0FBQztJQUNEVCxPQUFPLENBQUNNLGdCQUFnQixDQUFDTyxJQUFJLENBQUVSLHNCQUF1QixDQUFDOztJQUV2RDtJQUNBTCxPQUFPLENBQUNjLGNBQWMsQ0FBQ0QsSUFBSSxDQUFFRSxNQUFNLElBQUk7TUFDckMsSUFBSSxDQUFDQyxJQUFJLEdBQUdELE1BQU0sQ0FBQ0UsVUFBVTtNQUM3QixJQUFJLENBQUNDLE1BQU0sR0FBR0gsTUFBTSxDQUFDRSxVQUFVLENBQUNFLFdBQVcsQ0FBQyxDQUFDO0lBQy9DLENBQUUsQ0FBQztFQUNMO0FBQ0Y7QUFFQXRCLE9BQU8sQ0FBQ3VCLFFBQVEsQ0FBRSxrQkFBa0IsRUFBRXRCLGdCQUFpQixDQUFDIn0=