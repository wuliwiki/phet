// Copyright 2013-2023, University of Colorado Boulder

/**
 * View for the 'Macro' screen.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import Property from '../../../../axon/js/Property.js';
import ScreenView from '../../../../joist/js/ScreenView.js';
import { optionize3 } from '../../../../phet-core/js/optionize.js';
import ResetAllButton from '../../../../scenery-phet/js/buttons/ResetAllButton.js';
import EyeDropperNode from '../../../../scenery-phet/js/EyeDropperNode.js';
import { Node } from '../../../../scenery/js/imports.js';
import Water from '../../common/model/Water.js';
import PHScaleConstants from '../../common/PHScaleConstants.js';
import BeakerNode from '../../common/view/BeakerNode.js';
import DrainFaucetNode from '../../common/view/DrainFaucetNode.js';
import DropperFluidNode from '../../common/view/DropperFluidNode.js';
import FaucetFluidNode from '../../common/view/FaucetFluidNode.js';
import PHDropperNode from '../../common/view/PHDropperNode.js';
import SoluteComboBox from '../../common/view/SoluteComboBox.js';
import SolutionNode from '../../common/view/SolutionNode.js';
import VolumeIndicatorNode from '../../common/view/VolumeIndicatorNode.js';
import WaterFaucetNode from '../../common/view/WaterFaucetNode.js';
import phScale from '../../phScale.js';
import MacroPHMeterNode from './MacroPHMeterNode.js';
import NeutralIndicatorNode from './NeutralIndicatorNode.js';
export default class MacroScreenView extends ScreenView {
  constructor(model, modelViewTransform, providedOptions) {
    const options = optionize3()({}, PHScaleConstants.SCREEN_VIEW_OPTIONS, providedOptions);
    super(options);

    // beaker
    const beakerNode = new BeakerNode(model.beaker, modelViewTransform, {
      tandem: options.tandem.createTandem('beakerNode')
    });

    // solution in the beaker
    const solutionNode = new SolutionNode(model.solution.totalVolumeProperty, model.solution.colorProperty, model.beaker, modelViewTransform);

    // volume indicator on the right edge of beaker
    const volumeIndicatorNode = new VolumeIndicatorNode(model.solution.totalVolumeProperty, model.beaker, modelViewTransform, {
      tandem: options.tandem.createTandem('volumeIndicatorNode')
    });

    // Neutral indicator that appears in the bottom of the beaker.
    const neutralIndicatorNode = new NeutralIndicatorNode(model.solution.pHProperty, {
      tandem: options.tandem.createTandem('neutralIndicatorNode')
    });

    // dropper
    const DROPPER_SCALE = 0.85;
    const dropperNode = new PHDropperNode(model.dropper, modelViewTransform, {
      visibleProperty: model.dropper.visibleProperty,
      tandem: options.tandem.createTandem('dropperNode')
    });
    dropperNode.setScaleMagnitude(DROPPER_SCALE);
    const dropperFluidNode = new DropperFluidNode(model.dropper, model.beaker, DROPPER_SCALE * EyeDropperNode.TIP_WIDTH, modelViewTransform, {
      visibleProperty: model.dropper.visibleProperty
    });

    // faucets
    const waterFaucetNode = new WaterFaucetNode(model.waterFaucet, modelViewTransform, {
      tandem: options.tandem.createTandem('waterFaucetNode')
    });
    const drainFaucetNode = new DrainFaucetNode(model.drainFaucet, modelViewTransform, {
      tandem: options.tandem.createTandem('drainFaucetNode')
    });

    // fluids coming out of faucets
    const WATER_FLUID_HEIGHT = model.beaker.position.y - model.waterFaucet.position.y;
    const DRAIN_FLUID_HEIGHT = 1000; // tall enough that resizing the play area is unlikely to show bottom of fluid
    const waterFluidNode = new FaucetFluidNode(model.waterFaucet, new Property(Water.color), WATER_FLUID_HEIGHT, modelViewTransform);
    const drainFluidNode = new FaucetFluidNode(model.drainFaucet, model.solution.colorProperty, DRAIN_FLUID_HEIGHT, modelViewTransform);

    // Hide fluids when their faucets are hidden. See https://github.com/phetsims/ph-scale/issues/107
    waterFaucetNode.visibleProperty.lazyLink(() => {
      waterFluidNode.visible = waterFaucetNode.visible;
    });
    drainFaucetNode.visibleProperty.lazyLink(() => {
      drainFluidNode.visible = drainFaucetNode.visible;
    });

    // pH meter
    const pHMeterNode = new MacroPHMeterNode(model.pHMeter, model.solution, model.dropper, solutionNode, dropperFluidNode, waterFluidNode, drainFluidNode, modelViewTransform, {
      tandem: options.tandem.createTandem('pHMeterNode')
    });

    // solutes combo box
    const soluteListParent = new Node();
    const soluteComboBox = new SoluteComboBox(model.dropper.soluteProperty, soluteListParent, {
      maxWidth: 400,
      tandem: options.tandem.createTandem('soluteComboBox')
    });
    const resetAllButton = new ResetAllButton({
      scale: 1.32,
      listener: () => {
        this.interruptSubtreeInput();
        model.reset();
      },
      tandem: options.tandem.createTandem('resetAllButton')
    });

    // Parent for all nodes added to this screen
    const screenViewRootNode = new Node({
      children: [
      // nodes are rendered in this order
      waterFluidNode, waterFaucetNode, drainFluidNode, drainFaucetNode, dropperFluidNode, dropperNode, solutionNode, beakerNode, neutralIndicatorNode, volumeIndicatorNode, soluteComboBox, resetAllButton, pHMeterNode,
      // next to last so that probe doesn't get lost behind anything
      soluteListParent // last, so that combo box list is on top
      ]
    });

    this.addChild(screenViewRootNode);

    // Layout of nodes that don't have a position specified in the model
    soluteComboBox.left = modelViewTransform.modelToViewX(model.beaker.left) - 20; // anchor on left, so it grows to the right during i18n
    soluteComboBox.top = this.layoutBounds.top + 15;
    resetAllButton.right = this.layoutBounds.right - 40;
    resetAllButton.bottom = this.layoutBounds.bottom - 20;

    // Keep the neutral indicator centered in the bottom of the beaker.
    neutralIndicatorNode.boundsProperty.link(bounds => {
      neutralIndicatorNode.centerX = beakerNode.centerX;
      neutralIndicatorNode.bottom = beakerNode.bottom - 30;
    });
    model.isAutofillingProperty.link(() => dropperNode.interruptSubtreeInput());

    // keyboard traversal order, see https://github.com/phetsims/ph-scale/issues/249
    screenViewRootNode.pdomOrder = [pHMeterNode, soluteComboBox, dropperNode, waterFaucetNode, drainFaucetNode, resetAllButton];
  }
}
phScale.register('MacroScreenView', MacroScreenView);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQcm9wZXJ0eSIsIlNjcmVlblZpZXciLCJvcHRpb25pemUzIiwiUmVzZXRBbGxCdXR0b24iLCJFeWVEcm9wcGVyTm9kZSIsIk5vZGUiLCJXYXRlciIsIlBIU2NhbGVDb25zdGFudHMiLCJCZWFrZXJOb2RlIiwiRHJhaW5GYXVjZXROb2RlIiwiRHJvcHBlckZsdWlkTm9kZSIsIkZhdWNldEZsdWlkTm9kZSIsIlBIRHJvcHBlck5vZGUiLCJTb2x1dGVDb21ib0JveCIsIlNvbHV0aW9uTm9kZSIsIlZvbHVtZUluZGljYXRvck5vZGUiLCJXYXRlckZhdWNldE5vZGUiLCJwaFNjYWxlIiwiTWFjcm9QSE1ldGVyTm9kZSIsIk5ldXRyYWxJbmRpY2F0b3JOb2RlIiwiTWFjcm9TY3JlZW5WaWV3IiwiY29uc3RydWN0b3IiLCJtb2RlbCIsIm1vZGVsVmlld1RyYW5zZm9ybSIsInByb3ZpZGVkT3B0aW9ucyIsIm9wdGlvbnMiLCJTQ1JFRU5fVklFV19PUFRJT05TIiwiYmVha2VyTm9kZSIsImJlYWtlciIsInRhbmRlbSIsImNyZWF0ZVRhbmRlbSIsInNvbHV0aW9uTm9kZSIsInNvbHV0aW9uIiwidG90YWxWb2x1bWVQcm9wZXJ0eSIsImNvbG9yUHJvcGVydHkiLCJ2b2x1bWVJbmRpY2F0b3JOb2RlIiwibmV1dHJhbEluZGljYXRvck5vZGUiLCJwSFByb3BlcnR5IiwiRFJPUFBFUl9TQ0FMRSIsImRyb3BwZXJOb2RlIiwiZHJvcHBlciIsInZpc2libGVQcm9wZXJ0eSIsInNldFNjYWxlTWFnbml0dWRlIiwiZHJvcHBlckZsdWlkTm9kZSIsIlRJUF9XSURUSCIsIndhdGVyRmF1Y2V0Tm9kZSIsIndhdGVyRmF1Y2V0IiwiZHJhaW5GYXVjZXROb2RlIiwiZHJhaW5GYXVjZXQiLCJXQVRFUl9GTFVJRF9IRUlHSFQiLCJwb3NpdGlvbiIsInkiLCJEUkFJTl9GTFVJRF9IRUlHSFQiLCJ3YXRlckZsdWlkTm9kZSIsImNvbG9yIiwiZHJhaW5GbHVpZE5vZGUiLCJsYXp5TGluayIsInZpc2libGUiLCJwSE1ldGVyTm9kZSIsInBITWV0ZXIiLCJzb2x1dGVMaXN0UGFyZW50Iiwic29sdXRlQ29tYm9Cb3giLCJzb2x1dGVQcm9wZXJ0eSIsIm1heFdpZHRoIiwicmVzZXRBbGxCdXR0b24iLCJzY2FsZSIsImxpc3RlbmVyIiwiaW50ZXJydXB0U3VidHJlZUlucHV0IiwicmVzZXQiLCJzY3JlZW5WaWV3Um9vdE5vZGUiLCJjaGlsZHJlbiIsImFkZENoaWxkIiwibGVmdCIsIm1vZGVsVG9WaWV3WCIsInRvcCIsImxheW91dEJvdW5kcyIsInJpZ2h0IiwiYm90dG9tIiwiYm91bmRzUHJvcGVydHkiLCJsaW5rIiwiYm91bmRzIiwiY2VudGVyWCIsImlzQXV0b2ZpbGxpbmdQcm9wZXJ0eSIsInBkb21PcmRlciIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiTWFjcm9TY3JlZW5WaWV3LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFZpZXcgZm9yIHRoZSAnTWFjcm8nIHNjcmVlbi5cclxuICpcclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICovXHJcblxyXG5pbXBvcnQgUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCB7IFNjcmVlbk9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9qb2lzdC9qcy9TY3JlZW4uanMnO1xyXG5pbXBvcnQgU2NyZWVuVmlldyBmcm9tICcuLi8uLi8uLi8uLi9qb2lzdC9qcy9TY3JlZW5WaWV3LmpzJztcclxuaW1wb3J0IHsgRW1wdHlTZWxmT3B0aW9ucywgb3B0aW9uaXplMyB9IGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgU3RyaWN0T21pdCBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvU3RyaWN0T21pdC5qcyc7XHJcbmltcG9ydCBQaWNrUmVxdWlyZWQgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL1BpY2tSZXF1aXJlZC5qcyc7XHJcbmltcG9ydCBSZXNldEFsbEJ1dHRvbiBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvYnV0dG9ucy9SZXNldEFsbEJ1dHRvbi5qcyc7XHJcbmltcG9ydCBFeWVEcm9wcGVyTm9kZSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvRXllRHJvcHBlck5vZGUuanMnO1xyXG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IFdhdGVyIGZyb20gJy4uLy4uL2NvbW1vbi9tb2RlbC9XYXRlci5qcyc7XHJcbmltcG9ydCBQSFNjYWxlQ29uc3RhbnRzIGZyb20gJy4uLy4uL2NvbW1vbi9QSFNjYWxlQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IEJlYWtlck5vZGUgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvQmVha2VyTm9kZS5qcyc7XHJcbmltcG9ydCBEcmFpbkZhdWNldE5vZGUgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvRHJhaW5GYXVjZXROb2RlLmpzJztcclxuaW1wb3J0IERyb3BwZXJGbHVpZE5vZGUgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvRHJvcHBlckZsdWlkTm9kZS5qcyc7XHJcbmltcG9ydCBGYXVjZXRGbHVpZE5vZGUgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvRmF1Y2V0Rmx1aWROb2RlLmpzJztcclxuaW1wb3J0IFBIRHJvcHBlck5vZGUgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvUEhEcm9wcGVyTm9kZS5qcyc7XHJcbmltcG9ydCBTb2x1dGVDb21ib0JveCBmcm9tICcuLi8uLi9jb21tb24vdmlldy9Tb2x1dGVDb21ib0JveC5qcyc7XHJcbmltcG9ydCBTb2x1dGlvbk5vZGUgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvU29sdXRpb25Ob2RlLmpzJztcclxuaW1wb3J0IFZvbHVtZUluZGljYXRvck5vZGUgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvVm9sdW1lSW5kaWNhdG9yTm9kZS5qcyc7XHJcbmltcG9ydCBXYXRlckZhdWNldE5vZGUgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvV2F0ZXJGYXVjZXROb2RlLmpzJztcclxuaW1wb3J0IHBoU2NhbGUgZnJvbSAnLi4vLi4vcGhTY2FsZS5qcyc7XHJcbmltcG9ydCBNYWNyb1BITWV0ZXJOb2RlIGZyb20gJy4vTWFjcm9QSE1ldGVyTm9kZS5qcyc7XHJcbmltcG9ydCBOZXV0cmFsSW5kaWNhdG9yTm9kZSBmcm9tICcuL05ldXRyYWxJbmRpY2F0b3JOb2RlLmpzJztcclxuaW1wb3J0IE1vZGVsVmlld1RyYW5zZm9ybTIgZnJvbSAnLi4vLi4vLi4vLi4vcGhldGNvbW1vbi9qcy92aWV3L01vZGVsVmlld1RyYW5zZm9ybTIuanMnO1xyXG5pbXBvcnQgTWFjcm9Nb2RlbCBmcm9tICcuLi9tb2RlbC9NYWNyb01vZGVsLmpzJztcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSBFbXB0eVNlbGZPcHRpb25zO1xyXG5cclxudHlwZSBNYWNyb1NjcmVlblZpZXdPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBQaWNrUmVxdWlyZWQ8U2NyZWVuT3B0aW9ucywgJ3RhbmRlbSc+O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFjcm9TY3JlZW5WaWV3IGV4dGVuZHMgU2NyZWVuVmlldyB7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggbW9kZWw6IE1hY3JvTW9kZWwsIG1vZGVsVmlld1RyYW5zZm9ybTogTW9kZWxWaWV3VHJhbnNmb3JtMiwgcHJvdmlkZWRPcHRpb25zOiBNYWNyb1NjcmVlblZpZXdPcHRpb25zICkge1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemUzPE1hY3JvU2NyZWVuVmlld09wdGlvbnMsIFNlbGZPcHRpb25zLCBTdHJpY3RPbWl0PFNjcmVlbk9wdGlvbnMsICd0YW5kZW0nPj4oKSgge30sXHJcbiAgICAgIFBIU2NhbGVDb25zdGFudHMuU0NSRUVOX1ZJRVdfT1BUSU9OUywgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcbiAgICAvLyBiZWFrZXJcclxuICAgIGNvbnN0IGJlYWtlck5vZGUgPSBuZXcgQmVha2VyTm9kZSggbW9kZWwuYmVha2VyLCBtb2RlbFZpZXdUcmFuc2Zvcm0sIHtcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdiZWFrZXJOb2RlJyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gc29sdXRpb24gaW4gdGhlIGJlYWtlclxyXG4gICAgY29uc3Qgc29sdXRpb25Ob2RlID0gbmV3IFNvbHV0aW9uTm9kZSggbW9kZWwuc29sdXRpb24udG90YWxWb2x1bWVQcm9wZXJ0eSwgbW9kZWwuc29sdXRpb24uY29sb3JQcm9wZXJ0eSxcclxuICAgICAgbW9kZWwuYmVha2VyLCBtb2RlbFZpZXdUcmFuc2Zvcm0gKTtcclxuXHJcbiAgICAvLyB2b2x1bWUgaW5kaWNhdG9yIG9uIHRoZSByaWdodCBlZGdlIG9mIGJlYWtlclxyXG4gICAgY29uc3Qgdm9sdW1lSW5kaWNhdG9yTm9kZSA9IG5ldyBWb2x1bWVJbmRpY2F0b3JOb2RlKCBtb2RlbC5zb2x1dGlvbi50b3RhbFZvbHVtZVByb3BlcnR5LCBtb2RlbC5iZWFrZXIsIG1vZGVsVmlld1RyYW5zZm9ybSwge1xyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3ZvbHVtZUluZGljYXRvck5vZGUnIClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBOZXV0cmFsIGluZGljYXRvciB0aGF0IGFwcGVhcnMgaW4gdGhlIGJvdHRvbSBvZiB0aGUgYmVha2VyLlxyXG4gICAgY29uc3QgbmV1dHJhbEluZGljYXRvck5vZGUgPSBuZXcgTmV1dHJhbEluZGljYXRvck5vZGUoIG1vZGVsLnNvbHV0aW9uLnBIUHJvcGVydHksIHtcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICduZXV0cmFsSW5kaWNhdG9yTm9kZScgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIGRyb3BwZXJcclxuICAgIGNvbnN0IERST1BQRVJfU0NBTEUgPSAwLjg1O1xyXG4gICAgY29uc3QgZHJvcHBlck5vZGUgPSBuZXcgUEhEcm9wcGVyTm9kZSggbW9kZWwuZHJvcHBlciwgbW9kZWxWaWV3VHJhbnNmb3JtLCB7XHJcbiAgICAgIHZpc2libGVQcm9wZXJ0eTogbW9kZWwuZHJvcHBlci52aXNpYmxlUHJvcGVydHksXHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnZHJvcHBlck5vZGUnIClcclxuICAgIH0gKTtcclxuICAgIGRyb3BwZXJOb2RlLnNldFNjYWxlTWFnbml0dWRlKCBEUk9QUEVSX1NDQUxFICk7XHJcbiAgICBjb25zdCBkcm9wcGVyRmx1aWROb2RlID0gbmV3IERyb3BwZXJGbHVpZE5vZGUoIG1vZGVsLmRyb3BwZXIsIG1vZGVsLmJlYWtlciwgRFJPUFBFUl9TQ0FMRSAqIEV5ZURyb3BwZXJOb2RlLlRJUF9XSURUSCxcclxuICAgICAgbW9kZWxWaWV3VHJhbnNmb3JtLCB7XHJcbiAgICAgICAgdmlzaWJsZVByb3BlcnR5OiBtb2RlbC5kcm9wcGVyLnZpc2libGVQcm9wZXJ0eVxyXG4gICAgICB9ICk7XHJcblxyXG4gICAgLy8gZmF1Y2V0c1xyXG4gICAgY29uc3Qgd2F0ZXJGYXVjZXROb2RlID0gbmV3IFdhdGVyRmF1Y2V0Tm9kZSggbW9kZWwud2F0ZXJGYXVjZXQsIG1vZGVsVmlld1RyYW5zZm9ybSwge1xyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3dhdGVyRmF1Y2V0Tm9kZScgKVxyXG4gICAgfSApO1xyXG4gICAgY29uc3QgZHJhaW5GYXVjZXROb2RlID0gbmV3IERyYWluRmF1Y2V0Tm9kZSggbW9kZWwuZHJhaW5GYXVjZXQsIG1vZGVsVmlld1RyYW5zZm9ybSwge1xyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2RyYWluRmF1Y2V0Tm9kZScgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIGZsdWlkcyBjb21pbmcgb3V0IG9mIGZhdWNldHNcclxuICAgIGNvbnN0IFdBVEVSX0ZMVUlEX0hFSUdIVCA9IG1vZGVsLmJlYWtlci5wb3NpdGlvbi55IC0gbW9kZWwud2F0ZXJGYXVjZXQucG9zaXRpb24ueTtcclxuICAgIGNvbnN0IERSQUlOX0ZMVUlEX0hFSUdIVCA9IDEwMDA7IC8vIHRhbGwgZW5vdWdoIHRoYXQgcmVzaXppbmcgdGhlIHBsYXkgYXJlYSBpcyB1bmxpa2VseSB0byBzaG93IGJvdHRvbSBvZiBmbHVpZFxyXG4gICAgY29uc3Qgd2F0ZXJGbHVpZE5vZGUgPSBuZXcgRmF1Y2V0Rmx1aWROb2RlKCBtb2RlbC53YXRlckZhdWNldCwgbmV3IFByb3BlcnR5KCBXYXRlci5jb2xvciApLCBXQVRFUl9GTFVJRF9IRUlHSFQsIG1vZGVsVmlld1RyYW5zZm9ybSApO1xyXG4gICAgY29uc3QgZHJhaW5GbHVpZE5vZGUgPSBuZXcgRmF1Y2V0Rmx1aWROb2RlKCBtb2RlbC5kcmFpbkZhdWNldCwgbW9kZWwuc29sdXRpb24uY29sb3JQcm9wZXJ0eSwgRFJBSU5fRkxVSURfSEVJR0hULCBtb2RlbFZpZXdUcmFuc2Zvcm0gKTtcclxuXHJcbiAgICAvLyBIaWRlIGZsdWlkcyB3aGVuIHRoZWlyIGZhdWNldHMgYXJlIGhpZGRlbi4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9waC1zY2FsZS9pc3N1ZXMvMTA3XHJcbiAgICB3YXRlckZhdWNldE5vZGUudmlzaWJsZVByb3BlcnR5LmxhenlMaW5rKCAoKSA9PiB7XHJcbiAgICAgIHdhdGVyRmx1aWROb2RlLnZpc2libGUgPSB3YXRlckZhdWNldE5vZGUudmlzaWJsZTtcclxuICAgIH0gKTtcclxuICAgIGRyYWluRmF1Y2V0Tm9kZS52aXNpYmxlUHJvcGVydHkubGF6eUxpbmsoICgpID0+IHtcclxuICAgICAgZHJhaW5GbHVpZE5vZGUudmlzaWJsZSA9IGRyYWluRmF1Y2V0Tm9kZS52aXNpYmxlO1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIHBIIG1ldGVyXHJcbiAgICBjb25zdCBwSE1ldGVyTm9kZSA9IG5ldyBNYWNyb1BITWV0ZXJOb2RlKCBtb2RlbC5wSE1ldGVyLCBtb2RlbC5zb2x1dGlvbiwgbW9kZWwuZHJvcHBlcixcclxuICAgICAgc29sdXRpb25Ob2RlLCBkcm9wcGVyRmx1aWROb2RlLCB3YXRlckZsdWlkTm9kZSwgZHJhaW5GbHVpZE5vZGUsIG1vZGVsVmlld1RyYW5zZm9ybSwge1xyXG4gICAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAncEhNZXRlck5vZGUnIClcclxuICAgICAgfSApO1xyXG5cclxuICAgIC8vIHNvbHV0ZXMgY29tYm8gYm94XHJcbiAgICBjb25zdCBzb2x1dGVMaXN0UGFyZW50ID0gbmV3IE5vZGUoKTtcclxuICAgIGNvbnN0IHNvbHV0ZUNvbWJvQm94ID0gbmV3IFNvbHV0ZUNvbWJvQm94KCBtb2RlbC5kcm9wcGVyLnNvbHV0ZVByb3BlcnR5LCBzb2x1dGVMaXN0UGFyZW50LCB7XHJcbiAgICAgIG1heFdpZHRoOiA0MDAsXHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnc29sdXRlQ29tYm9Cb3gnIClcclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCByZXNldEFsbEJ1dHRvbiA9IG5ldyBSZXNldEFsbEJ1dHRvbigge1xyXG4gICAgICBzY2FsZTogMS4zMixcclxuICAgICAgbGlzdGVuZXI6ICgpID0+IHtcclxuICAgICAgICB0aGlzLmludGVycnVwdFN1YnRyZWVJbnB1dCgpO1xyXG4gICAgICAgIG1vZGVsLnJlc2V0KCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAncmVzZXRBbGxCdXR0b24nIClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBQYXJlbnQgZm9yIGFsbCBub2RlcyBhZGRlZCB0byB0aGlzIHNjcmVlblxyXG4gICAgY29uc3Qgc2NyZWVuVmlld1Jvb3ROb2RlID0gbmV3IE5vZGUoIHtcclxuICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICAvLyBub2RlcyBhcmUgcmVuZGVyZWQgaW4gdGhpcyBvcmRlclxyXG4gICAgICAgIHdhdGVyRmx1aWROb2RlLFxyXG4gICAgICAgIHdhdGVyRmF1Y2V0Tm9kZSxcclxuICAgICAgICBkcmFpbkZsdWlkTm9kZSxcclxuICAgICAgICBkcmFpbkZhdWNldE5vZGUsXHJcbiAgICAgICAgZHJvcHBlckZsdWlkTm9kZSxcclxuICAgICAgICBkcm9wcGVyTm9kZSxcclxuICAgICAgICBzb2x1dGlvbk5vZGUsXHJcbiAgICAgICAgYmVha2VyTm9kZSxcclxuICAgICAgICBuZXV0cmFsSW5kaWNhdG9yTm9kZSxcclxuICAgICAgICB2b2x1bWVJbmRpY2F0b3JOb2RlLFxyXG4gICAgICAgIHNvbHV0ZUNvbWJvQm94LFxyXG4gICAgICAgIHJlc2V0QWxsQnV0dG9uLFxyXG4gICAgICAgIHBITWV0ZXJOb2RlLCAvLyBuZXh0IHRvIGxhc3Qgc28gdGhhdCBwcm9iZSBkb2Vzbid0IGdldCBsb3N0IGJlaGluZCBhbnl0aGluZ1xyXG4gICAgICAgIHNvbHV0ZUxpc3RQYXJlbnQgLy8gbGFzdCwgc28gdGhhdCBjb21ibyBib3ggbGlzdCBpcyBvbiB0b3BcclxuICAgICAgXVxyXG4gICAgfSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggc2NyZWVuVmlld1Jvb3ROb2RlICk7XHJcblxyXG4gICAgLy8gTGF5b3V0IG9mIG5vZGVzIHRoYXQgZG9uJ3QgaGF2ZSBhIHBvc2l0aW9uIHNwZWNpZmllZCBpbiB0aGUgbW9kZWxcclxuICAgIHNvbHV0ZUNvbWJvQm94LmxlZnQgPSBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdYKCBtb2RlbC5iZWFrZXIubGVmdCApIC0gMjA7IC8vIGFuY2hvciBvbiBsZWZ0LCBzbyBpdCBncm93cyB0byB0aGUgcmlnaHQgZHVyaW5nIGkxOG5cclxuICAgIHNvbHV0ZUNvbWJvQm94LnRvcCA9IHRoaXMubGF5b3V0Qm91bmRzLnRvcCArIDE1O1xyXG4gICAgcmVzZXRBbGxCdXR0b24ucmlnaHQgPSB0aGlzLmxheW91dEJvdW5kcy5yaWdodCAtIDQwO1xyXG4gICAgcmVzZXRBbGxCdXR0b24uYm90dG9tID0gdGhpcy5sYXlvdXRCb3VuZHMuYm90dG9tIC0gMjA7XHJcblxyXG4gICAgLy8gS2VlcCB0aGUgbmV1dHJhbCBpbmRpY2F0b3IgY2VudGVyZWQgaW4gdGhlIGJvdHRvbSBvZiB0aGUgYmVha2VyLlxyXG4gICAgbmV1dHJhbEluZGljYXRvck5vZGUuYm91bmRzUHJvcGVydHkubGluayggYm91bmRzID0+IHtcclxuICAgICAgbmV1dHJhbEluZGljYXRvck5vZGUuY2VudGVyWCA9IGJlYWtlck5vZGUuY2VudGVyWDtcclxuICAgICAgbmV1dHJhbEluZGljYXRvck5vZGUuYm90dG9tID0gYmVha2VyTm9kZS5ib3R0b20gLSAzMDtcclxuICAgIH0gKTtcclxuXHJcbiAgICBtb2RlbC5pc0F1dG9maWxsaW5nUHJvcGVydHkubGluayggKCkgPT4gZHJvcHBlck5vZGUuaW50ZXJydXB0U3VidHJlZUlucHV0KCkgKTtcclxuXHJcbiAgICAvLyBrZXlib2FyZCB0cmF2ZXJzYWwgb3JkZXIsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvcGgtc2NhbGUvaXNzdWVzLzI0OVxyXG4gICAgc2NyZWVuVmlld1Jvb3ROb2RlLnBkb21PcmRlciA9IFtcclxuICAgICAgcEhNZXRlck5vZGUsXHJcbiAgICAgIHNvbHV0ZUNvbWJvQm94LFxyXG4gICAgICBkcm9wcGVyTm9kZSxcclxuICAgICAgd2F0ZXJGYXVjZXROb2RlLFxyXG4gICAgICBkcmFpbkZhdWNldE5vZGUsXHJcbiAgICAgIHJlc2V0QWxsQnV0dG9uXHJcbiAgICBdO1xyXG4gIH1cclxufVxyXG5cclxucGhTY2FsZS5yZWdpc3RlciggJ01hY3JvU2NyZWVuVmlldycsIE1hY3JvU2NyZWVuVmlldyApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxRQUFRLE1BQU0saUNBQWlDO0FBRXRELE9BQU9DLFVBQVUsTUFBTSxvQ0FBb0M7QUFDM0QsU0FBMkJDLFVBQVUsUUFBUSx1Q0FBdUM7QUFHcEYsT0FBT0MsY0FBYyxNQUFNLHVEQUF1RDtBQUNsRixPQUFPQyxjQUFjLE1BQU0sK0NBQStDO0FBQzFFLFNBQVNDLElBQUksUUFBUSxtQ0FBbUM7QUFDeEQsT0FBT0MsS0FBSyxNQUFNLDZCQUE2QjtBQUMvQyxPQUFPQyxnQkFBZ0IsTUFBTSxrQ0FBa0M7QUFDL0QsT0FBT0MsVUFBVSxNQUFNLGlDQUFpQztBQUN4RCxPQUFPQyxlQUFlLE1BQU0sc0NBQXNDO0FBQ2xFLE9BQU9DLGdCQUFnQixNQUFNLHVDQUF1QztBQUNwRSxPQUFPQyxlQUFlLE1BQU0sc0NBQXNDO0FBQ2xFLE9BQU9DLGFBQWEsTUFBTSxvQ0FBb0M7QUFDOUQsT0FBT0MsY0FBYyxNQUFNLHFDQUFxQztBQUNoRSxPQUFPQyxZQUFZLE1BQU0sbUNBQW1DO0FBQzVELE9BQU9DLG1CQUFtQixNQUFNLDBDQUEwQztBQUMxRSxPQUFPQyxlQUFlLE1BQU0sc0NBQXNDO0FBQ2xFLE9BQU9DLE9BQU8sTUFBTSxrQkFBa0I7QUFDdEMsT0FBT0MsZ0JBQWdCLE1BQU0sdUJBQXVCO0FBQ3BELE9BQU9DLG9CQUFvQixNQUFNLDJCQUEyQjtBQVE1RCxlQUFlLE1BQU1DLGVBQWUsU0FBU25CLFVBQVUsQ0FBQztFQUUvQ29CLFdBQVdBLENBQUVDLEtBQWlCLEVBQUVDLGtCQUF1QyxFQUFFQyxlQUF1QyxFQUFHO0lBRXhILE1BQU1DLE9BQU8sR0FBR3ZCLFVBQVUsQ0FBMkUsQ0FBQyxDQUFFLENBQUMs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