// Copyright 2014-2022, University of Colorado Boulder

/**
 * CurvedArrowShape draws a single- or double-headed curved arrow.
 * Arrow heads are not curved, their tips are perpendicular to the ends of the arrow tail.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import Vector2 from '../../dot/js/Vector2.js';
import { Shape } from '../../kite/js/imports.js';
import optionize from '../../phet-core/js/optionize.js';
import sceneryPhet from './sceneryPhet.js';
export default class CurvedArrowShape extends Shape {
  /**
   * @param radius - radius at the center of the arrow's tail
   * @param startAngle - starting angle, in radians (at tail, or optional 2nd head)
   * @param endAngle - end angle, in radians (at head of arrow)
   * @param providedOptions
   */
  constructor(radius, startAngle, endAngle, providedOptions) {
    const options = optionize()({
      // SelfOptions
      doubleHead: false,
      headWidth: 10,
      headHeight: 10,
      tailWidth: 5,
      anticlockwise: false
    }, providedOptions);
    super();

    // Points that define the base of an arrow head. 'inner' is closer to the center of the circle, 'outer' is farther away.
    let baseInnerX;
    let baseInnerY;
    let baseOuterX;
    let baseOuterY;

    // optional head at startAngle
    if (options.doubleHead) {
      // base of the arrow head at startAngle
      baseInnerX = Math.cos(startAngle) * (radius - options.headWidth / 2);
      baseInnerY = Math.sin(startAngle) * (radius - options.headWidth / 2);
      baseOuterX = Math.cos(startAngle) * (radius + options.headWidth / 2);
      baseOuterY = Math.sin(startAngle) * (radius + options.headWidth / 2);

      // tip of the arrow head at startAngle
      const startTip = computePerpendicularPoint(baseOuterX, baseOuterY, baseInnerX, baseInnerY, options.headHeight);

      // head at startAngle
      this.moveTo(baseInnerX, baseInnerY).lineTo(startTip.x, startTip.y).lineTo(baseOuterX, baseOuterY);
    }

    // outer arc from startAngle to endAngle
    this.arc(0, 0, radius + options.tailWidth / 2, startAngle, endAngle, options.anticlockwise);

    // base of the arrow head at endAngle
    baseInnerX = Math.cos(endAngle) * (radius - options.headWidth / 2);
    baseInnerY = Math.sin(endAngle) * (radius - options.headWidth / 2);
    baseOuterX = Math.cos(endAngle) * (radius + options.headWidth / 2);
    baseOuterY = Math.sin(endAngle) * (radius + options.headWidth / 2);

    // tip of the arrow head at endAngle
    const endTip = computePerpendicularPoint(baseInnerX, baseInnerY, baseOuterX, baseOuterY, options.headHeight);

    // arrow head at endAngle
    this.lineTo(baseOuterX, baseOuterY).lineTo(endTip.x, endTip.y).lineTo(baseInnerX, baseInnerY);

    // inner arc from endAngle to startAngle
    this.arc(0, 0, radius - options.tailWidth / 2, endAngle, startAngle, !options.anticlockwise);

    // Workaround for https://github.com/phetsims/scenery/issues/214 (Firefox-specific path rendering issue)
    this.lineTo(Math.cos(startAngle) * radius, Math.sin(startAngle) * radius + 0.00001);
    this.close();
  }
}

/**
 * This is a general algorithm, used herein to compute the point for an arrow's tip.
 * Given 2 points that define a line segment (the arrow's base), compute the point (the tip) that
 * is a specified distance away from a perpendicular line that runs through the center point
 * of the line segment.
 */
const computePerpendicularPoint = function (x1, y1, x2, y2, distance) {
  const dx = x1 - x2;
  const dy = y1 - y2;
  const r = Math.sqrt(dx * dx + dy * dy);

  // midpoint + distance * unitVector
  const x = (x1 + x2) / 2 + distance * dy / r;
  const y = (y1 + y2) / 2 - distance * dx / r;
  return new Vector2(x, y);
};
sceneryPhet.register('CurvedArrowShape', CurvedArrowShape);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWZWN0b3IyIiwiU2hhcGUiLCJvcHRpb25pemUiLCJzY2VuZXJ5UGhldCIsIkN1cnZlZEFycm93U2hhcGUiLCJjb25zdHJ1Y3RvciIsInJhZGl1cyIsInN0YXJ0QW5nbGUiLCJlbmRBbmdsZSIsInByb3ZpZGVkT3B0aW9ucyIsIm9wdGlvbnMiLCJkb3VibGVIZWFkIiwiaGVhZFdpZHRoIiwiaGVhZEhlaWdodCIsInRhaWxXaWR0aCIsImFudGljbG9ja3dpc2UiLCJiYXNlSW5uZXJYIiwiYmFzZUlubmVyWSIsImJhc2VPdXRlclgiLCJiYXNlT3V0ZXJZIiwiTWF0aCIsImNvcyIsInNpbiIsInN0YXJ0VGlwIiwiY29tcHV0ZVBlcnBlbmRpY3VsYXJQb2ludCIsIm1vdmVUbyIsImxpbmVUbyIsIngiLCJ5IiwiYXJjIiwiZW5kVGlwIiwiY2xvc2UiLCJ4MSIsInkxIiwieDIiLCJ5MiIsImRpc3RhbmNlIiwiZHgiLCJkeSIsInIiLCJzcXJ0IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJDdXJ2ZWRBcnJvd1NoYXBlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE0LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIEN1cnZlZEFycm93U2hhcGUgZHJhd3MgYSBzaW5nbGUtIG9yIGRvdWJsZS1oZWFkZWQgY3VydmVkIGFycm93LlxyXG4gKiBBcnJvdyBoZWFkcyBhcmUgbm90IGN1cnZlZCwgdGhlaXIgdGlwcyBhcmUgcGVycGVuZGljdWxhciB0byB0aGUgZW5kcyBvZiB0aGUgYXJyb3cgdGFpbC5cclxuICpcclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICovXHJcblxyXG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuLi8uLi9kb3QvanMvVmVjdG9yMi5qcyc7XHJcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSAnLi4vLi4va2l0ZS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IG9wdGlvbml6ZSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuaW1wb3J0IHNjZW5lcnlQaGV0IGZyb20gJy4vc2NlbmVyeVBoZXQuanMnO1xyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IHtcclxuICBkb3VibGVIZWFkPzogYm9vbGVhbjsgLy8gZmFsc2UgPSBzaW5nbGUgaGVhZCBhdCBlbmRBbmdsZSwgdHJ1ZSA9IGhlYWRzIGF0IHN0YXJ0QW5nbGUgYW5kIGVuZEFuZ2xlXHJcbiAgaGVhZFdpZHRoPzogbnVtYmVyO1xyXG4gIGhlYWRIZWlnaHQ/OiBudW1iZXI7XHJcbiAgdGFpbFdpZHRoPzogbnVtYmVyO1xyXG4gIGFudGljbG9ja3dpc2U/OiBib29sZWFuO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgQ3VydmVkQXJyb3dTaGFwZU9wdGlvbnMgPSBTZWxmT3B0aW9ucztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEN1cnZlZEFycm93U2hhcGUgZXh0ZW5kcyBTaGFwZSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSByYWRpdXMgLSByYWRpdXMgYXQgdGhlIGNlbnRlciBvZiB0aGUgYXJyb3cncyB0YWlsXHJcbiAgICogQHBhcmFtIHN0YXJ0QW5nbGUgLSBzdGFydGluZyBhbmdsZSwgaW4gcmFkaWFucyAoYXQgdGFpbCwgb3Igb3B0aW9uYWwgMm5kIGhlYWQpXHJcbiAgICogQHBhcmFtIGVuZEFuZ2xlIC0gZW5kIGFuZ2xlLCBpbiByYWRpYW5zIChhdCBoZWFkIG9mIGFycm93KVxyXG4gICAqIEBwYXJhbSBwcm92aWRlZE9wdGlvbnNcclxuICAgKi9cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIHJhZGl1czogbnVtYmVyLCBzdGFydEFuZ2xlOiBudW1iZXIsIGVuZEFuZ2xlOiBudW1iZXIsIHByb3ZpZGVkT3B0aW9ucz86IEN1cnZlZEFycm93U2hhcGVPcHRpb25zICkge1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8Q3VydmVkQXJyb3dTaGFwZU9wdGlvbnMsIFNlbGZPcHRpb25zPigpKCB7XHJcblxyXG4gICAgICAvLyBTZWxmT3B0aW9uc1xyXG4gICAgICBkb3VibGVIZWFkOiBmYWxzZSxcclxuICAgICAgaGVhZFdpZHRoOiAxMCxcclxuICAgICAgaGVhZEhlaWdodDogMTAsXHJcbiAgICAgIHRhaWxXaWR0aDogNSxcclxuICAgICAgYW50aWNsb2Nrd2lzZTogZmFsc2VcclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIHN1cGVyKCk7XHJcblxyXG4gICAgLy8gUG9pbnRzIHRoYXQgZGVmaW5lIHRoZSBiYXNlIG9mIGFuIGFycm93IGhlYWQuICdpbm5lcicgaXMgY2xvc2VyIHRvIHRoZSBjZW50ZXIgb2YgdGhlIGNpcmNsZSwgJ291dGVyJyBpcyBmYXJ0aGVyIGF3YXkuXHJcbiAgICBsZXQgYmFzZUlubmVyWDtcclxuICAgIGxldCBiYXNlSW5uZXJZO1xyXG4gICAgbGV0IGJhc2VPdXRlclg7XHJcbiAgICBsZXQgYmFzZU91dGVyWTtcclxuXHJcbiAgICAvLyBvcHRpb25hbCBoZWFkIGF0IHN0YXJ0QW5nbGVcclxuICAgIGlmICggb3B0aW9ucy5kb3VibGVIZWFkICkge1xyXG5cclxuICAgICAgLy8gYmFzZSBvZiB0aGUgYXJyb3cgaGVhZCBhdCBzdGFydEFuZ2xlXHJcbiAgICAgIGJhc2VJbm5lclggPSBNYXRoLmNvcyggc3RhcnRBbmdsZSApICogKCByYWRpdXMgLSBvcHRpb25zLmhlYWRXaWR0aCAvIDIgKTtcclxuICAgICAgYmFzZUlubmVyWSA9IE1hdGguc2luKCBzdGFydEFuZ2xlICkgKiAoIHJhZGl1cyAtIG9wdGlvbnMuaGVhZFdpZHRoIC8gMiApO1xyXG4gICAgICBiYXNlT3V0ZXJYID0gTWF0aC5jb3MoIHN0YXJ0QW5nbGUgKSAqICggcmFkaXVzICsgb3B0aW9ucy5oZWFkV2lkdGggLyAyICk7XHJcbiAgICAgIGJhc2VPdXRlclkgPSBNYXRoLnNpbiggc3RhcnRBbmdsZSApICogKCByYWRpdXMgKyBvcHRpb25zLmhlYWRXaWR0aCAvIDIgKTtcclxuXHJcbiAgICAgIC8vIHRpcCBvZiB0aGUgYXJyb3cgaGVhZCBhdCBzdGFydEFuZ2xlXHJcbiAgICAgIGNvbnN0IHN0YXJ0VGlwID0gY29tcHV0ZVBlcnBlbmRpY3VsYXJQb2ludCggYmFzZU91dGVyWCwgYmFzZU91dGVyWSwgYmFzZUlubmVyWCwgYmFzZUlubmVyWSwgb3B0aW9ucy5oZWFkSGVpZ2h0ICk7XHJcblxyXG4gICAgICAvLyBoZWFkIGF0IHN0YXJ0QW5nbGVcclxuICAgICAgdGhpcy5tb3ZlVG8oIGJhc2VJbm5lclgsIGJhc2VJbm5lclkgKVxyXG4gICAgICAgIC5saW5lVG8oIHN0YXJ0VGlwLngsIHN0YXJ0VGlwLnkgKVxyXG4gICAgICAgIC5saW5lVG8oIGJhc2VPdXRlclgsIGJhc2VPdXRlclkgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBvdXRlciBhcmMgZnJvbSBzdGFydEFuZ2xlIHRvIGVuZEFuZ2xlXHJcbiAgICB0aGlzLmFyYyggMCwgMCwgcmFkaXVzICsgb3B0aW9ucy50YWlsV2lkdGggLyAyLCBzdGFydEFuZ2xlLCBlbmRBbmdsZSwgb3B0aW9ucy5hbnRpY2xvY2t3aXNlICk7XHJcblxyXG4gICAgLy8gYmFzZSBvZiB0aGUgYXJyb3cgaGVhZCBhdCBlbmRBbmdsZVxyXG4gICAgYmFzZUlubmVyWCA9IE1hdGguY29zKCBlbmRBbmdsZSApICogKCByYWRpdXMgLSBvcHRpb25zLmhlYWRXaWR0aCAvIDIgKTtcclxuICAgIGJhc2VJbm5lclkgPSBNYXRoLnNpbiggZW5kQW5nbGUgKSAqICggcmFkaXVzIC0gb3B0aW9ucy5oZWFkV2lkdGggLyAyICk7XHJcbiAgICBiYXNlT3V0ZXJYID0gTWF0aC5jb3MoIGVuZEFuZ2xlICkgKiAoIHJhZGl1cyArIG9wdGlvbnMuaGVhZFdpZHRoIC8gMiApO1xyXG4gICAgYmFzZU91dGVyWSA9IE1hdGguc2luKCBlbmRBbmdsZSApICogKCByYWRpdXMgKyBvcHRpb25zLmhlYWRXaWR0aCAvIDIgKTtcclxuXHJcbiAgICAvLyB0aXAgb2YgdGhlIGFycm93IGhlYWQgYXQgZW5kQW5nbGVcclxuICAgIGNvbnN0IGVuZFRpcCA9IGNvbXB1dGVQZXJwZW5kaWN1bGFyUG9pbnQoIGJhc2VJbm5lclgsIGJhc2VJbm5lclksIGJhc2VPdXRlclgsIGJhc2VPdXRlclksIG9wdGlvbnMuaGVhZEhlaWdodCApO1xyXG5cclxuICAgIC8vIGFycm93IGhlYWQgYXQgZW5kQW5nbGVcclxuICAgIHRoaXMubGluZVRvKCBiYXNlT3V0ZXJYLCBiYXNlT3V0ZXJZIClcclxuICAgICAgLmxpbmVUbyggZW5kVGlwLngsIGVuZFRpcC55IClcclxuICAgICAgLmxpbmVUbyggYmFzZUlubmVyWCwgYmFzZUlubmVyWSApO1xyXG5cclxuICAgIC8vIGlubmVyIGFyYyBmcm9tIGVuZEFuZ2xlIHRvIHN0YXJ0QW5nbGVcclxuICAgIHRoaXMuYXJjKCAwLCAwLCByYWRpdXMgLSBvcHRpb25zLnRhaWxXaWR0aCAvIDIsIGVuZEFuZ2xlLCBzdGFydEFuZ2xlLCAhb3B0aW9ucy5hbnRpY2xvY2t3aXNlICk7XHJcblxyXG4gICAgLy8gV29ya2Fyb3VuZCBmb3IgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3NjZW5lcnkvaXNzdWVzLzIxNCAoRmlyZWZveC1zcGVjaWZpYyBwYXRoIHJlbmRlcmluZyBpc3N1ZSlcclxuICAgIHRoaXMubGluZVRvKCBNYXRoLmNvcyggc3RhcnRBbmdsZSApICogcmFkaXVzLCBNYXRoLnNpbiggc3RhcnRBbmdsZSApICogcmFkaXVzICsgMC4wMDAwMSApO1xyXG5cclxuICAgIHRoaXMuY2xvc2UoKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGlzIGlzIGEgZ2VuZXJhbCBhbGdvcml0aG0sIHVzZWQgaGVyZWluIHRvIGNvbXB1dGUgdGhlIHBvaW50IGZvciBhbiBhcnJvdydzIHRpcC5cclxuICogR2l2ZW4gMiBwb2ludHMgdGhhdCBkZWZpbmUgYSBsaW5lIHNlZ21lbnQgKHRoZSBhcnJvdydzIGJhc2UpLCBjb21wdXRlIHRoZSBwb2ludCAodGhlIHRpcCkgdGhhdFxyXG4gKiBpcyBhIHNwZWNpZmllZCBkaXN0YW5jZSBhd2F5IGZyb20gYSBwZXJwZW5kaWN1bGFyIGxpbmUgdGhhdCBydW5zIHRocm91Z2ggdGhlIGNlbnRlciBwb2ludFxyXG4gKiBvZiB0aGUgbGluZSBzZWdtZW50LlxyXG4gKi9cclxuY29uc3QgY29tcHV0ZVBlcnBlbmRpY3VsYXJQb2ludCA9IGZ1bmN0aW9uKCB4MTogbnVtYmVyLCB5MTogbnVtYmVyLCB4MjogbnVtYmVyLCB5MjogbnVtYmVyLCBkaXN0YW5jZTogbnVtYmVyICk6IFZlY3RvcjIge1xyXG4gIGNvbnN0IGR4ID0geDEgLSB4MjtcclxuICBjb25zdCBkeSA9IHkxIC0geTI7XHJcbiAgY29uc3QgciA9IE1hdGguc3FydCggZHggKiBkeCArIGR5ICogZHkgKTtcclxuXHJcbiAgLy8gbWlkcG9pbnQgKyBkaXN0YW5jZSAqIHVuaXRWZWN0b3JcclxuICBjb25zdCB4ID0gKCB4MSArIHgyICkgLyAyICsgKCBkaXN0YW5jZSAqIGR5IC8gciApO1xyXG4gIGNvbnN0IHkgPSAoIHkxICsgeTIgKSAvIDIgLSAoIGRpc3RhbmNlICogZHggLyByICk7XHJcbiAgcmV0dXJuIG5ldyBWZWN0b3IyKCB4LCB5ICk7XHJcbn07XHJcblxyXG5zY2VuZXJ5UGhldC5yZWdpc3RlciggJ0N1cnZlZEFycm93U2hhcGUnLCBDdXJ2ZWRBcnJvd1NoYXBlICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsT0FBTyxNQUFNLHlCQUF5QjtBQUM3QyxTQUFTQyxLQUFLLFFBQVEsMEJBQTBCO0FBQ2hELE9BQU9DLFNBQVMsTUFBTSxpQ0FBaUM7QUFDdkQsT0FBT0MsV0FBVyxNQUFNLGtCQUFrQjtBQVkxQyxlQUFlLE1BQU1DLGdCQUFnQixTQUFTSCxLQUFLLENBQUM7RUFFbEQ7QUFDRjtBQUNBO0FBQ0E7QUFDQTtB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