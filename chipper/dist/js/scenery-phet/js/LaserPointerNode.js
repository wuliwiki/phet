// Copyright 2015-2022, University of Colorado Boulder

/**
 * A laser pointer, with optional on/off button (toggle or momentary).
 * Default orientation is pointing to the right. Origin is at right center (the edge of the output nozzle).
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import Dimension2 from '../../dot/js/Dimension2.js';
import Utils from '../../dot/js/Utils.js';
import InstanceRegistry from '../../phet-core/js/documentation/InstanceRegistry.js';
import merge from '../../phet-core/js/merge.js';
import optionize, { optionize3 } from '../../phet-core/js/optionize.js';
import { LinearGradient, Node, Rectangle } from '../../scenery/js/imports.js';
import RoundMomentaryButton from '../../sun/js/buttons/RoundMomentaryButton.js';
import RoundStickyToggleButton from '../../sun/js/buttons/RoundStickyToggleButton.js';
import Tandem from '../../tandem/js/Tandem.js';
import sceneryPhet from './sceneryPhet.js';
import ShadedSphereNode from './ShadedSphereNode.js';
const DEFAULT_OPTIONS = optionize()({
  // nozzle and body options
  bodySize: new Dimension2(110, 78),
  nozzleSize: new Dimension2(20, 60),
  topColor: 'rgb( 170, 170, 170 )',
  bottomColor: 'rgb( 40, 40, 40 )',
  highlightColor: 'rgb( 245, 245, 245 )',
  highlightColorStop: 0.3,
  // {number} color stop for highlight, (0,1) exclusive range
  stroke: 'black',
  lineWidth: 1,
  cornerRadius: 5,
  // button options
  hasButton: true,
  // {boolean} other button options are ignore if this is false
  buttonType: 'toggle',
  // {string} 'toggle'|'momentary'
  buttonColor: 'red',
  buttonRadius: 22,
  buttonXMargin: 10,
  buttonYMargin: 10,
  buttonTouchAreaDilation: 15,
  buttonMouseAreaDilation: 0,
  buttonRotation: 0,
  // {number} use this to adjust lighting on the button
  buttonAccessibleName: '',
  buttonDescriptionContent: '',
  // where to position the button within the body
  getButtonLocation: bodyNode => bodyNode.center,
  hasGlass: false,
  // Glass options, nested as discussed in https://github.com/phetsims/tasks/issues/730
  glassOptions: {
    mainColor: 'rgb(188,225,238)',
    highlightColor: 'white',
    shadowColor: 'white',
    stroke: 'black',
    heightProportion: 0.7,
    proportionStickingOut: 0.5
  },
  tandem: Tandem.REQUIRED,
  tandemNameSuffix: ['LaserPointerNode', 'LightNode']
});
assert && Object.freeze(DEFAULT_OPTIONS);
export default class LaserPointerNode extends Node {
  static DEFAULT_LASER_NODE_OPTIONS = DEFAULT_OPTIONS;

  /**
   * @param onProperty - is the laser on?
   * @param providedOptions
   */
  constructor(onProperty, providedOptions) {
    const options = optionize3()({}, DEFAULT_OPTIONS, providedOptions);
    assert && assert(options.highlightColorStop > 0 && options.highlightColorStop < 1);
    assert && assert(options.glassOptions.heightProportion >= 0 && options.glassOptions.heightProportion <= 1);
    assert && assert(options.glassOptions.proportionStickingOut >= 0 && options.glassOptions.proportionStickingOut <= 1);
    const children = [];

    // the narrow part that the light will come out of
    const nozzleNode = new Rectangle(0, 0, options.nozzleSize.width + options.cornerRadius, options.nozzleSize.height, {
      cornerRadius: options.cornerRadius,
      fill: new LinearGradient(0, 0, 0, options.nozzleSize.height).addColorStop(0, options.topColor).addColorStop(options.highlightColorStop, options.highlightColor).addColorStop(1, options.bottomColor),
      stroke: options.stroke,
      lineWidth: options.lineWidth,
      right: 0,
      centerY: 0
    });
    children.push(nozzleNode);

    // the main body of the laser pointer
    const bodyNode = new Rectangle(0, 0, options.bodySize.width, options.bodySize.height, {
      cornerRadius: options.cornerRadius,
      fill: new LinearGradient(0, 0, 0, options.bodySize.height).addColorStop(0, options.topColor).addColorStop(options.highlightColorStop, options.highlightColor).addColorStop(1, options.bottomColor),
      stroke: options.stroke,
      lineWidth: options.lineWidth,
      right: nozzleNode.left + options.cornerRadius,
      // overlap to hide corner radius
      centerY: nozzleNode.centerY
    });
    children.push(bodyNode);

    // the optional button that controls whether the laser is on or off
    let onOffButton = null;
    if (options.hasButton) {
      const buttonOptions = {
        radius: options.buttonRadius,
        xMargin: options.buttonXMargin,
        yMargin: options.buttonYMargin,
        touchAreaDilation: options.buttonTouchAreaDilation,
        mouseAreaDilation: options.buttonMouseAreaDilation,
        baseColor: options.buttonColor,
        rotation: options.buttonRotation,
        center: options.getButtonLocation(bodyNode),
        tandem: options.tandem.createTandem('button'),
        // pdom
        labelContent: options.buttonAccessibleName,
        labelTagName: 'label',
        descriptionContent: options.buttonDescriptionContent
      };
      onOffButton = options.buttonType === 'toggle' ? new RoundStickyToggleButton(onProperty, false, true, buttonOptions) : new RoundMomentaryButton(onProperty, false, true, buttonOptions);
      children.push(onOffButton);
    }

    // optional glass (lens)
    if (options.hasGlass) {
      const glassDiameter = options.nozzleSize.height * options.glassOptions.heightProportion;
      const glassOptions = merge({}, options.glassOptions, {
        // The origin is at the output point of the nozzle, translate accordingly
        centerX: Utils.linear(0, 1, -glassDiameter / 2, 0, options.glassOptions.proportionStickingOut),
        // Center vertically
        centerY: 0
      });
      const glassNode = new ShadedSphereNode(glassDiameter, glassOptions);

      // Glass is behind everything else.
      children.unshift(glassNode);
    }

    // add any children specified by the client
    options.children = children.concat(options.children || []);
    super(options);
    this.disposeLaserPointerNode = () => {
      onOffButton && onOffButton.dispose();
    };

    // support for binder documentation, stripped out in builds and only runs when ?binder is specified
    assert && phet.chipper.queryParameters.binder && InstanceRegistry.registerDataURL('scenery-phet', 'LaserPointerNode', this);
  }
  get enabled() {
    return this.isEnabled();
  }
  set enabled(value) {
    this.setEnabled(value);
  }
  dispose() {
    this.disposeLaserPointerNode();
    super.dispose();
  }
}
sceneryPhet.register('LaserPointerNode', LaserPointerNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEaW1lbnNpb24yIiwiVXRpbHMiLCJJbnN0YW5jZVJlZ2lzdHJ5IiwibWVyZ2UiLCJvcHRpb25pemUiLCJvcHRpb25pemUzIiwiTGluZWFyR3JhZGllbnQiLCJOb2RlIiwiUmVjdGFuZ2xlIiwiUm91bmRNb21lbnRhcnlCdXR0b24iLCJSb3VuZFN0aWNreVRvZ2dsZUJ1dHRvbiIsIlRhbmRlbSIsInNjZW5lcnlQaGV0IiwiU2hhZGVkU3BoZXJlTm9kZSIsIkRFRkFVTFRfT1BUSU9OUyIsImJvZHlTaXplIiwibm96emxlU2l6ZSIsInRvcENvbG9yIiwiYm90dG9tQ29sb3IiLCJoaWdobGlnaHRDb2xvciIsImhpZ2hsaWdodENvbG9yU3RvcCIsInN0cm9rZSIsImxpbmVXaWR0aCIsImNvcm5lclJhZGl1cyIsImhhc0J1dHRvbiIsImJ1dHRvblR5cGUiLCJidXR0b25Db2xvciIsImJ1dHRvblJhZGl1cyIsImJ1dHRvblhNYXJnaW4iLCJidXR0b25ZTWFyZ2luIiwiYnV0dG9uVG91Y2hBcmVhRGlsYXRpb24iLCJidXR0b25Nb3VzZUFyZWFEaWxhdGlvbiIsImJ1dHRvblJvdGF0aW9uIiwiYnV0dG9uQWNjZXNzaWJsZU5hbWUiLCJidXR0b25EZXNjcmlwdGlvbkNvbnRlbnQiLCJnZXRCdXR0b25Mb2NhdGlvbiIsImJvZHlOb2RlIiwiY2VudGVyIiwiaGFzR2xhc3MiLCJnbGFzc09wdGlvbnMiLCJtYWluQ29sb3IiLCJzaGFkb3dDb2xvciIsImhlaWdodFByb3BvcnRpb24iLCJwcm9wb3J0aW9uU3RpY2tpbmdPdXQiLCJ0YW5kZW0iLCJSRVFVSVJFRCIsInRhbmRlbU5hbWVTdWZmaXgiLCJhc3NlcnQiLCJPYmplY3QiLCJmcmVlemUiLCJMYXNlclBvaW50ZXJOb2RlIiwiREVGQVVMVF9MQVNFUl9OT0RFX09QVElPTlMiLCJjb25zdHJ1Y3RvciIsIm9uUHJvcGVydHkiLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwiY2hpbGRyZW4iLCJub3p6bGVOb2RlIiwid2lkdGgiLCJoZWlnaHQiLCJmaWxsIiwiYWRkQ29sb3JTdG9wIiwicmlnaHQiLCJjZW50ZXJZIiwicHVzaCIsImxlZnQiLCJvbk9mZkJ1dHRvbiIsImJ1dHRvbk9wdGlvbnMiLCJyYWRpdXMiLCJ4TWFyZ2luIiwieU1hcmdpbiIsInRvdWNoQXJlYURpbGF0aW9uIiwibW91c2VBcmVhRGlsYXRpb24iLCJiYXNlQ29sb3IiLCJyb3RhdGlvbiIsImNyZWF0ZVRhbmRlbSIsImxhYmVsQ29udGVudCIsImxhYmVsVGFnTmFtZSIsImRlc2NyaXB0aW9uQ29udGVudCIsImdsYXNzRGlhbWV0ZXIiLCJjZW50ZXJYIiwibGluZWFyIiwiZ2xhc3NOb2RlIiwidW5zaGlmdCIsImNvbmNhdCIsImRpc3Bvc2VMYXNlclBvaW50ZXJOb2RlIiwiZGlzcG9zZSIsInBoZXQiLCJjaGlwcGVyIiwicXVlcnlQYXJhbWV0ZXJzIiwiYmluZGVyIiwicmVnaXN0ZXJEYXRhVVJMIiwiZW5hYmxlZCIsImlzRW5hYmxlZCIsInZhbHVlIiwic2V0RW5hYmxlZCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiTGFzZXJQb2ludGVyTm9kZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNS0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBBIGxhc2VyIHBvaW50ZXIsIHdpdGggb3B0aW9uYWwgb24vb2ZmIGJ1dHRvbiAodG9nZ2xlIG9yIG1vbWVudGFyeSkuXHJcbiAqIERlZmF1bHQgb3JpZW50YXRpb24gaXMgcG9pbnRpbmcgdG8gdGhlIHJpZ2h0LiBPcmlnaW4gaXMgYXQgcmlnaHQgY2VudGVyICh0aGUgZWRnZSBvZiB0aGUgb3V0cHV0IG5venpsZSkuXHJcbiAqXHJcbiAqIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXHJcbiAqL1xyXG5cclxuaW1wb3J0IFRQcm9wZXJ0eSBmcm9tICcuLi8uLi9heG9uL2pzL1RQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBEaW1lbnNpb24yIGZyb20gJy4uLy4uL2RvdC9qcy9EaW1lbnNpb24yLmpzJztcclxuaW1wb3J0IFV0aWxzIGZyb20gJy4uLy4uL2RvdC9qcy9VdGlscy5qcyc7XHJcbmltcG9ydCBWZWN0b3IyIGZyb20gJy4uLy4uL2RvdC9qcy9WZWN0b3IyLmpzJztcclxuaW1wb3J0IEluc3RhbmNlUmVnaXN0cnkgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL2RvY3VtZW50YXRpb24vSW5zdGFuY2VSZWdpc3RyeS5qcyc7XHJcbmltcG9ydCBtZXJnZSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvbWVyZ2UuanMnO1xyXG5pbXBvcnQgb3B0aW9uaXplLCB7IG9wdGlvbml6ZTMgfSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuaW1wb3J0IHsgVENvbG9yLCBMaW5lYXJHcmFkaWVudCwgTm9kZSwgTm9kZU9wdGlvbnMsIFJlY3RhbmdsZSB9IGZyb20gJy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBSb3VuZE1vbWVudGFyeUJ1dHRvbiBmcm9tICcuLi8uLi9zdW4vanMvYnV0dG9ucy9Sb3VuZE1vbWVudGFyeUJ1dHRvbi5qcyc7XHJcbmltcG9ydCBSb3VuZFN0aWNreVRvZ2dsZUJ1dHRvbiBmcm9tICcuLi8uLi9zdW4vanMvYnV0dG9ucy9Sb3VuZFN0aWNreVRvZ2dsZUJ1dHRvbi5qcyc7XHJcbmltcG9ydCBUYW5kZW0gZnJvbSAnLi4vLi4vdGFuZGVtL2pzL1RhbmRlbS5qcyc7XHJcbmltcG9ydCBzY2VuZXJ5UGhldCBmcm9tICcuL3NjZW5lcnlQaGV0LmpzJztcclxuaW1wb3J0IFNoYWRlZFNwaGVyZU5vZGUsIHsgU2hhZGVkU3BoZXJlTm9kZU9wdGlvbnMgfSBmcm9tICcuL1NoYWRlZFNwaGVyZU5vZGUuanMnO1xyXG5cclxudHlwZSBCdXR0b25UeXBlID0gJ3RvZ2dsZScgfCAnbW9tZW50YXJ5JztcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSB7XHJcblxyXG4gIC8vIG5venpsZSBhbmQgYm9keSBvcHRpb25zXHJcbiAgYm9keVNpemU/OiBEaW1lbnNpb24yO1xyXG4gIG5venpsZVNpemU/OiBEaW1lbnNpb24yO1xyXG4gIHRvcENvbG9yPzogVENvbG9yO1xyXG4gIGJvdHRvbUNvbG9yPzogVENvbG9yO1xyXG4gIGhpZ2hsaWdodENvbG9yPzogVENvbG9yO1xyXG4gIGhpZ2hsaWdodENvbG9yU3RvcD86IG51bWJlcjsgIC8vIGNvbG9yIHN0b3AgZm9yIGhpZ2hsaWdodCwgKDAsMSkgZXhjbHVzaXZlIHJhbmdlXHJcbiAgc3Ryb2tlPzogVENvbG9yO1xyXG4gIGxpbmVXaWR0aD86IG51bWJlcjtcclxuICBjb3JuZXJSYWRpdXM/OiBudW1iZXI7XHJcblxyXG4gIC8vIGJ1dHRvbiBvcHRpb25zXHJcbiAgaGFzQnV0dG9uPzogYm9vbGVhbjsgLy8gb3RoZXIgYnV0dG9uIG9wdGlvbnMgYXJlIGlnbm9yZWQgaWYgdGhpcyBpcyBmYWxzZVxyXG4gIGJ1dHRvblR5cGU/OiBCdXR0b25UeXBlO1xyXG4gIGJ1dHRvbkNvbG9yPzogVENvbG9yO1xyXG4gIGJ1dHRvblJhZGl1cz86IG51bWJlcjtcclxuICBidXR0b25YTWFyZ2luPzogbnVtYmVyO1xyXG4gIGJ1dHRvbllNYXJnaW4/OiBudW1iZXI7XHJcbiAgYnV0dG9uVG91Y2hBcmVhRGlsYXRpb24/OiBudW1iZXI7XHJcbiAgYnV0dG9uTW91c2VBcmVhRGlsYXRpb24/OiBudW1iZXI7XHJcbiAgYnV0dG9uUm90YXRpb24/OiBudW1iZXI7IC8vIHVzZSB0aGlzIHRvIGFkanVzdCBsaWdodGluZyBvbiB0aGUgYnV0dG9uXHJcbiAgYnV0dG9uQWNjZXNzaWJsZU5hbWU/OiBzdHJpbmc7XHJcbiAgYnV0dG9uRGVzY3JpcHRpb25Db250ZW50Pzogc3RyaW5nO1xyXG5cclxuICAvLyB3aGVyZSB0byBwb3NpdGlvbiB0aGUgYnV0dG9uIHdpdGhpbiB0aGUgYm9keVxyXG4gIGdldEJ1dHRvbkxvY2F0aW9uPzogKCBib2R5Tm9kZTogTm9kZSApID0+IFZlY3RvcjI7XHJcblxyXG4gIC8vIFdoZW4gZW5hYmxlZCwgdGhlIGdsYXNzIHNob3dzIGEgc2VtaS1jaXJjdWxhciBibHVlLWlzaCBsZW5zIG9uIHRoZSBvdXRwdXQgb2YgdGhlIGxhc2VyIHBvaW50ZXIgbm9kZS5cclxuICAvLyBJdCBkb2VzIG5vdCBjaGFuZ2UgdGhlIG9yaWdpbiBvZiB0aGUgbGFzZXIgcG9pbnRlciBub2RlLCB3aGljaCBpcyBhdCB0aGUgY2VudGVyIG9mIHRoZSBjYXNpbmcuICBUaGUgZ2xhc3MgaXNcclxuICAvLyBzb21ldGltZXMgdXNlZCB0byBoZWxwIGN1ZSB0aGUgdXNlciB0aGF0IGl0IGlzIGEgbm9uLWxhc2VyIGxpZ2h0IHNvdXJjZS5cclxuICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3NjZW5lcnktcGhldC9pc3N1ZXMvMzY2XHJcbiAgaGFzR2xhc3M/OiBib29sZWFuO1xyXG5cclxuICAvLyBwcm9wYWdhdGVkIHRvIFNoYWRlZFNwaGVyZU5vZGUsIHVzZWQgdG8gZHJhdyB0aGUgbGVucyBhdCB0aGUgb3V0cHV0IG9mIHRoZSBsYXNlciBwb2ludGVyXHJcbiAgZ2xhc3NPcHRpb25zPzoge1xyXG5cclxuICAgIC8vIFRoZSBmcmFjdGlvbiBvZiB0aGUgbm96emxlIGhlaWdodCwgYmV0d2VlbiAwIChubyBoZWlnaHQpIGFuZCAxICh0aGUgbm96emxlIGhlaWdodClcclxuICAgIGhlaWdodFByb3BvcnRpb24/OiBudW1iZXI7XHJcblxyXG4gICAgLy8gVGhlIGFtb3VudCB0aGUgZ2xhc3MgXCJzdGlja3Mgb3V0XCIgYmV0d2VlbiAwIChub3QgYXQgYWxsKSBhbmQgMSAoaGVtaXNwaGVyZSlcclxuICAgIHByb3BvcnRpb25TdGlja2luZ091dD86IG51bWJlcjtcclxuICB9ICYgU2hhZGVkU3BoZXJlTm9kZU9wdGlvbnM7XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBMYXNlclBvaW50ZXJOb2RlT3B0aW9ucyA9IFNlbGZPcHRpb25zICYgTm9kZU9wdGlvbnM7XHJcblxyXG5jb25zdCBERUZBVUxUX09QVElPTlMgPSBvcHRpb25pemU8TGFzZXJQb2ludGVyTm9kZU9wdGlvbnMsIFNlbGZPcHRpb25zLCBOb2RlT3B0aW9ucz4oKSgge1xyXG5cclxuICAvLyBub3p6bGUgYW5kIGJvZHkgb3B0aW9uc1xyXG4gIGJvZHlTaXplOiBuZXcgRGltZW5zaW9uMiggMTEwLCA3OCApLFxyXG4gIG5venpsZVNpemU6IG5ldyBEaW1lbnNpb24yKCAyMCwgNjAgKSxcclxuICB0b3BDb2xvcjogJ3JnYiggMTcwLCAxNzAsIDE3MCApJyxcclxuICBib3R0b21Db2xvcjogJ3JnYiggNDAsIDQwLCA0MCApJyxcclxuICBoaWdobGlnaHRDb2xvcjogJ3JnYiggMjQ1LCAyNDUsIDI0NSApJyxcclxuICBoaWdobGlnaHRDb2xvclN0b3A6IDAuMywgIC8vIHtudW1iZXJ9IGNvbG9yIHN0b3AgZm9yIGhpZ2hsaWdodCwgKDAsMSkgZXhjbHVzaXZlIHJhbmdlXHJcbiAgc3Ryb2tlOiAnYmxhY2snLFxyXG4gIGxpbmVXaWR0aDogMSxcclxuICBjb3JuZXJSYWRpdXM6IDUsXHJcblxyXG4gIC8vIGJ1dHRvbiBvcHRpb25zXHJcbiAgaGFzQnV0dG9uOiB0cnVlLCAvLyB7Ym9vbGVhbn0gb3RoZXIgYnV0dG9uIG9wdGlvbnMgYXJlIGlnbm9yZSBpZiB0aGlzIGlzIGZhbHNlXHJcbiAgYnV0dG9uVHlwZTogJ3RvZ2dsZScsIC8vIHtzdHJpbmd9ICd0b2dnbGUnfCdtb21lbnRhcnknXHJcbiAgYnV0dG9uQ29sb3I6ICdyZWQnLFxyXG4gIGJ1dHRvblJhZGl1czogMjIsXHJcbiAgYnV0dG9uWE1hcmdpbjogMTAsXHJcbiAgYnV0dG9uWU1hcmdpbjogMTAsXHJcbiAgYnV0dG9uVG91Y2hBcmVhRGlsYXRpb246IDE1LFxyXG4gIGJ1dHRvbk1vdXNlQXJlYURpbGF0aW9uOiAwLFxyXG4gIGJ1dHRvblJvdGF0aW9uOiAwLCAvLyB7bnVtYmVyfSB1c2UgdGhpcyB0byBhZGp1c3QgbGlnaHRpbmcgb24gdGhlIGJ1dHRvblxyXG4gIGJ1dHRvbkFjY2Vzc2libGVOYW1lOiAnJyxcclxuICBidXR0b25EZXNjcmlwdGlvbkNvbnRlbnQ6ICcnLFxyXG5cclxuICAvLyB3aGVyZSB0byBwb3NpdGlvbiB0aGUgYnV0dG9uIHdpdGhpbiB0aGUgYm9keVxyXG4gIGdldEJ1dHRvbkxvY2F0aW9uOiAoIGJvZHlOb2RlOiBOb2RlICkgPT4gYm9keU5vZGUuY2VudGVyLFxyXG5cclxuICBoYXNHbGFzczogZmFsc2UsXHJcblxyXG4gIC8vIEdsYXNzIG9wdGlvbnMsIG5lc3RlZCBhcyBkaXNjdXNzZWQgaW4gaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3Rhc2tzL2lzc3Vlcy83MzBcclxuICBnbGFzc09wdGlvbnM6IHtcclxuICAgIG1haW5Db2xvcjogJ3JnYigxODgsMjI1LDIzOCknLFxyXG4gICAgaGlnaGxpZ2h0Q29sb3I6ICd3aGl0ZScsXHJcbiAgICBzaGFkb3dDb2xvcjogJ3doaXRlJyxcclxuICAgIHN0cm9rZTogJ2JsYWNrJyxcclxuICAgIGhlaWdodFByb3BvcnRpb246IDAuNyxcclxuICAgIHByb3BvcnRpb25TdGlja2luZ091dDogMC41XHJcbiAgfSxcclxuXHJcbiAgdGFuZGVtOiBUYW5kZW0uUkVRVUlSRUQsXHJcbiAgdGFuZGVtTmFtZVN1ZmZpeDogWyAnTGFzZXJQb2ludGVyTm9kZScsICdMaWdodE5vZGUnIF1cclxufSApO1xyXG5hc3NlcnQgJiYgT2JqZWN0LmZyZWV6ZSggREVGQVVMVF9PUFRJT05TICk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMYXNlclBvaW50ZXJOb2RlIGV4dGVuZHMgTm9kZSB7XHJcblxyXG4gIHByaXZhdGUgcmVhZG9ubHkgZGlzcG9zZUxhc2VyUG9pbnRlck5vZGU6ICgpID0+IHZvaWQ7XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgREVGQVVMVF9MQVNFUl9OT0RFX09QVElPTlMgPSBERUZBVUxUX09QVElPTlM7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSBvblByb3BlcnR5IC0gaXMgdGhlIGxhc2VyIG9uP1xyXG4gICAqIEBwYXJhbSBwcm92aWRlZE9wdGlvbnNcclxuICAgKi9cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIG9uUHJvcGVydHk6IFRQcm9wZXJ0eTxib29sZWFuPiwgcHJvdmlkZWRPcHRpb25zPzogTGFzZXJQb2ludGVyTm9kZU9wdGlvbnMgKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTM8TGFzZXJQb2ludGVyTm9kZU9wdGlvbnMsIFNlbGZPcHRpb25zLCBOb2RlT3B0aW9ucz4oKShcclxuICAgICAge30sIERFRkFVTFRfT1BUSU9OUywgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggb3B0aW9ucy5oaWdobGlnaHRDb2xvclN0b3AgPiAwICYmIG9wdGlvbnMuaGlnaGxpZ2h0Q29sb3JTdG9wIDwgMSApO1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggb3B0aW9ucy5nbGFzc09wdGlvbnMuaGVpZ2h0UHJvcG9ydGlvbiEgPj0gMCAmJiBvcHRpb25zLmdsYXNzT3B0aW9ucy5oZWlnaHRQcm9wb3J0aW9uISA8PSAxICk7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBvcHRpb25zLmdsYXNzT3B0aW9ucy5wcm9wb3J0aW9uU3RpY2tpbmdPdXQhID49IDAgJiYgb3B0aW9ucy5nbGFzc09wdGlvbnMucHJvcG9ydGlvblN0aWNraW5nT3V0ISA8PSAxICk7XHJcblxyXG4gICAgY29uc3QgY2hpbGRyZW4gPSBbXTtcclxuXHJcbiAgICAvLyB0aGUgbmFycm93IHBhcnQgdGhhdCB0aGUgbGlnaHQgd2lsbCBjb21lIG91dCBvZlxyXG4gICAgY29uc3Qgbm96emxlTm9kZSA9IG5ldyBSZWN0YW5nbGUoIDAsIDAsIG9wdGlvbnMubm96emxlU2l6ZS53aWR0aCArIG9wdGlvbnMuY29ybmVyUmFkaXVzLCBvcHRpb25zLm5venpsZVNpemUuaGVpZ2h0LCB7XHJcbiAgICAgIGNvcm5lclJhZGl1czogb3B0aW9ucy5jb3JuZXJSYWRpdXMsXHJcbiAgICAgIGZpbGw6IG5ldyBMaW5lYXJHcmFkaWVudCggMCwgMCwgMCwgb3B0aW9ucy5ub3p6bGVTaXplLmhlaWdodCApXHJcbiAgICAgICAgLmFkZENvbG9yU3RvcCggMCwgb3B0aW9ucy50b3BDb2xvciApXHJcbiAgICAgICAgLmFkZENvbG9yU3RvcCggb3B0aW9ucy5oaWdobGlnaHRDb2xvclN0b3AsIG9wdGlvbnMuaGlnaGxpZ2h0Q29sb3IgKVxyXG4gICAgICAgIC5hZGRDb2xvclN0b3AoIDEsIG9wdGlvbnMuYm90dG9tQ29sb3IgKSxcclxuICAgICAgc3Ryb2tlOiBvcHRpb25zLnN0cm9rZSxcclxuICAgICAgbGluZVdpZHRoOiBvcHRpb25zLmxpbmVXaWR0aCxcclxuICAgICAgcmlnaHQ6IDAsXHJcbiAgICAgIGNlbnRlclk6IDBcclxuICAgIH0gKTtcclxuICAgIGNoaWxkcmVuLnB1c2goIG5venpsZU5vZGUgKTtcclxuXHJcbiAgICAvLyB0aGUgbWFpbiBib2R5IG9mIHRoZSBsYXNlciBwb2ludGVyXHJcbiAgICBjb25zdCBib2R5Tm9kZSA9IG5ldyBSZWN0YW5nbGUoIDAsIDAsIG9wdGlvbnMuYm9keVNpemUud2lkdGgsIG9wdGlvbnMuYm9keVNpemUuaGVpZ2h0LCB7XHJcbiAgICAgIGNvcm5lclJhZGl1czogb3B0aW9ucy5jb3JuZXJSYWRpdXMsXHJcbiAgICAgIGZpbGw6IG5ldyBMaW5lYXJHcmFkaWVudCggMCwgMCwgMCwgb3B0aW9ucy5ib2R5U2l6ZS5oZWlnaHQgKVxyXG4gICAgICAgIC5hZGRDb2xvclN0b3AoIDAsIG9wdGlvbnMudG9wQ29sb3IgKVxyXG4gICAgICAgIC5hZGRDb2xvclN0b3AoIG9wdGlvbnMuaGlnaGxpZ2h0Q29sb3JTdG9wLCBvcHRpb25zLmhpZ2hsaWdodENvbG9yIClcclxuICAgICAgICAuYWRkQ29sb3JTdG9wKCAxLCBvcHRpb25zLmJvdHRvbUNvbG9yICksXHJcbiAgICAgIHN0cm9rZTogb3B0aW9ucy5zdHJva2UsXHJcbiAgICAgIGxpbmVXaWR0aDogb3B0aW9ucy5saW5lV2lkdGgsXHJcbiAgICAgIHJpZ2h0OiBub3p6bGVOb2RlLmxlZnQgKyBvcHRpb25zLmNvcm5lclJhZGl1cywgLy8gb3ZlcmxhcCB0byBoaWRlIGNvcm5lciByYWRpdXNcclxuICAgICAgY2VudGVyWTogbm96emxlTm9kZS5jZW50ZXJZXHJcbiAgICB9ICk7XHJcbiAgICBjaGlsZHJlbi5wdXNoKCBib2R5Tm9kZSApO1xyXG5cclxuICAgIC8vIHRoZSBvcHRpb25hbCBidXR0b24gdGhhdCBjb250cm9scyB3aGV0aGVyIHRoZSBsYXNlciBpcyBvbiBvciBvZmZcclxuICAgIGxldCBvbk9mZkJ1dHRvbjogTm9kZSB8IG51bGwgPSBudWxsO1xyXG4gICAgaWYgKCBvcHRpb25zLmhhc0J1dHRvbiApIHtcclxuXHJcbiAgICAgIGNvbnN0IGJ1dHRvbk9wdGlvbnMgPSB7XHJcbiAgICAgICAgcmFkaXVzOiBvcHRpb25zLmJ1dHRvblJhZGl1cyxcclxuICAgICAgICB4TWFyZ2luOiBvcHRpb25zLmJ1dHRvblhNYXJnaW4sXHJcbiAgICAgICAgeU1hcmdpbjogb3B0aW9ucy5idXR0b25ZTWFyZ2luLFxyXG4gICAgICAgIHRvdWNoQXJlYURpbGF0aW9uOiBvcHRpb25zLmJ1dHRvblRvdWNoQXJlYURpbGF0aW9uLFxyXG4gICAgICAgIG1vdXNlQXJlYURpbGF0aW9uOiBvcHRpb25zLmJ1dHRvbk1vdXNlQXJlYURpbGF0aW9uLFxyXG4gICAgICAgIGJhc2VDb2xvcjogb3B0aW9ucy5idXR0b25Db2xvcixcclxuICAgICAgICByb3RhdGlvbjogb3B0aW9ucy5idXR0b25Sb3RhdGlvbixcclxuICAgICAgICBjZW50ZXI6IG9wdGlvbnMuZ2V0QnV0dG9uTG9jYXRpb24oIGJvZHlOb2RlICksXHJcbiAgICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdidXR0b24nICksXHJcblxyXG4gICAgICAgIC8vIHBkb21cclxuICAgICAgICBsYWJlbENvbnRlbnQ6IG9wdGlvbnMuYnV0dG9uQWNjZXNzaWJsZU5hbWUsXHJcbiAgICAgICAgbGFiZWxUYWdOYW1lOiAnbGFiZWwnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uQ29udGVudDogb3B0aW9ucy5idXR0b25EZXNjcmlwdGlvbkNvbnRlbnRcclxuICAgICAgfTtcclxuXHJcbiAgICAgIG9uT2ZmQnV0dG9uID0gKCBvcHRpb25zLmJ1dHRvblR5cGUgPT09ICd0b2dnbGUnICkgP1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBSb3VuZFN0aWNreVRvZ2dsZUJ1dHRvbiggb25Qcm9wZXJ0eSwgZmFsc2UsIHRydWUsIGJ1dHRvbk9wdGlvbnMgKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IFJvdW5kTW9tZW50YXJ5QnV0dG9uKCBvblByb3BlcnR5LCBmYWxzZSwgdHJ1ZSwgYnV0dG9uT3B0aW9ucyApO1xyXG5cclxuICAgICAgY2hpbGRyZW4ucHVzaCggb25PZmZCdXR0b24gKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBvcHRpb25hbCBnbGFzcyAobGVucylcclxuICAgIGlmICggb3B0aW9ucy5oYXNHbGFzcyApIHtcclxuICAgICAgY29uc3QgZ2xhc3NEaWFtZXRlciA9IG9wdGlvbnMubm96emxlU2l6ZS5oZWlnaHQgKiBvcHRpb25zLmdsYXNzT3B0aW9ucy5oZWlnaHRQcm9wb3J0aW9uITtcclxuICAgICAgY29uc3QgZ2xhc3NPcHRpb25zID0gbWVyZ2UoIHt9LCBvcHRpb25zLmdsYXNzT3B0aW9ucywge1xyXG5cclxuICAgICAgICAvLyBUaGUgb3JpZ2luIGlzIGF0IHRoZSBvdXRwdXQgcG9pbnQgb2YgdGhlIG5venpsZSwgdHJhbnNsYXRlIGFjY29yZGluZ2x5XHJcbiAgICAgICAgY2VudGVyWDogVXRpbHMubGluZWFyKCAwLCAxLCAtZ2xhc3NEaWFtZXRlciAvIDIsIDAsIG9wdGlvbnMuZ2xhc3NPcHRpb25zLnByb3BvcnRpb25TdGlja2luZ091dCEgKSxcclxuXHJcbiAgICAgICAgLy8gQ2VudGVyIHZlcnRpY2FsbHlcclxuICAgICAgICBjZW50ZXJZOiAwXHJcbiAgICAgIH0gKTtcclxuICAgICAgY29uc3QgZ2xhc3NOb2RlID0gbmV3IFNoYWRlZFNwaGVyZU5vZGUoIGdsYXNzRGlhbWV0ZXIsIGdsYXNzT3B0aW9ucyApO1xyXG5cclxuICAgICAgLy8gR2xhc3MgaXMgYmVoaW5kIGV2ZXJ5dGhpbmcgZWxzZS5cclxuICAgICAgY2hpbGRyZW4udW5zaGlmdCggZ2xhc3NOb2RlICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gYWRkIGFueSBjaGlsZHJlbiBzcGVjaWZpZWQgYnkgdGhlIGNsaWVudFxyXG4gICAgb3B0aW9ucy5jaGlsZHJlbiA9IGNoaWxkcmVuLmNvbmNhdCggb3B0aW9ucy5jaGlsZHJlbiB8fCBbXSApO1xyXG5cclxuICAgIHN1cGVyKCBvcHRpb25zICk7XHJcblxyXG4gICAgdGhpcy5kaXNwb3NlTGFzZXJQb2ludGVyTm9kZSA9ICgpID0+IHtcclxuICAgICAgb25PZmZCdXR0b24gJiYgb25PZmZCdXR0b24uZGlzcG9zZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBzdXBwb3J0IGZvciBiaW5kZXIgZG9jdW1lbnRhdGlvbiwgc3RyaXBwZWQgb3V0IGluIGJ1aWxkcyBhbmQgb25seSBydW5zIHdoZW4gP2JpbmRlciBpcyBzcGVjaWZpZWRcclxuICAgIGFzc2VydCAmJiBwaGV0LmNoaXBwZXIucXVlcnlQYXJhbWV0ZXJzLmJpbmRlciAmJiBJbnN0YW5jZVJlZ2lzdHJ5LnJlZ2lzdGVyRGF0YVVSTCggJ3NjZW5lcnktcGhldCcsICdMYXNlclBvaW50ZXJOb2RlJywgdGhpcyApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG92ZXJyaWRlIGdldCBlbmFibGVkKCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy5pc0VuYWJsZWQoKTsgfVxyXG5cclxuICBwdWJsaWMgb3ZlcnJpZGUgc2V0IGVuYWJsZWQoIHZhbHVlOiBib29sZWFuICkgeyB0aGlzLnNldEVuYWJsZWQoIHZhbHVlICk7IH1cclxuXHJcbiAgcHVibGljIG92ZXJyaWRlIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICB0aGlzLmRpc3Bvc2VMYXNlclBvaW50ZXJOb2RlKCk7XHJcbiAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgfVxyXG59XHJcblxyXG5zY2VuZXJ5UGhldC5yZWdpc3RlciggJ0xhc2VyUG9pbnRlck5vZGUnLCBMYXNlclBvaW50ZXJOb2RlICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0EsT0FBT0EsVUFBVSxNQUFNLDRCQUE0QjtBQUNuRCxPQUFPQyxLQUFLLE1BQU0sdUJBQXVCO0FBRXpDLE9BQU9DLGdCQUFnQixNQUFNLHNEQUFzRDtBQUNuRixPQUFPQyxLQUFLLE1BQU0sNkJBQTZCO0FBQy9DLE9BQU9DLFNBQVMsSUFBSUMsVUFBVSxRQUFRLGlDQUFpQztBQUN2RSxTQUFpQkMsY0FBYyxFQUFFQyxJQUFJLEVBQWVDLFNBQVMsUUFBUSw2QkFBNkI7QUFDbEcsT0FBT0Msb0JBQW9CLE1BQU0sOENBQThDO0FBQy9FLE9BQU9DLHVCQUF1QixNQUFNLGlEQUFpRDtBQUNyRixPQUFPQyxNQUFNLE1BQU0sMkJBQTJCO0FBQzlDLE9BQU9DLFdBQVcsTUFBTSxrQkFBa0I7QUFDMUMsT0FBT0MsZ0JBQWdCLE1BQW1DLHVCQUF1QjtBQW9EakYsTUFBTUMsZUFBZSxHQUFHVixTQUFTLENBQW9ELENBQUMsQ0FBRTtFQUV0RjtFQUNBVyxRQUFRLEVBQUUsSUFBSWYsVUFBVSxDQUFFLEdBQUcsRUFBRSxFQUFHLENBQUM7RUFDbkNnQixVQUFVLEVBQUUsSUFBSWhCLFVBQVUsQ0FBRSxFQUFFLEVBQUUsRUFBRyxDQUFDO0VBQ3BDaUIsUUFBUSxFQUFFLHNCQUFzQjtFQUNoQ0MsV0FBVyxFQUFFLG1CQUFtQjtFQUNoQ0MsY0FBYyxFQUFFLHNCQUFzQjtFQUN0Q0Msa0JBQWtCLEVBQUUsR0FBRztFQUFHO0VBQzFCQyxNQUFNLEVBQUUsT0FBTztFQUNmQyxTQUFTLEVBQUUsQ0FBQztFQUNaQyxZQUFZLEVBQUUsQ0FBQztFQUVmO0VBQ0FDLFNBQVMsRUFBRSxJQUFJO0VBQUU7RUFDakJDLFVBQVUsRUFBRSxRQUFRO0VBQUU7RUFDdEJDLFdBQVcsRUFBRSxLQUFLO0VBQ2xCQyxZQUFZLEVBQUUsRUFBRTtFQUNoQkMsYUFBYSxFQUFFLEVBQUU7RUFDakJDLGFBQWEsRUFBRSxFQUFFO0VBQ2pCQyx1QkFBdUIsRUFBRSxFQUFFO0VBQzNCQyx1QkFBdUIsRUFBRSxDQUFDO0VBQzFCQyxjQUFjLEVBQUUsQ0FBQztFQUFFO0VBQ25CQyxvQkFBb0IsRUFBRSxFQUFFO0VBQ3hCQyx3QkFBd0IsRUFBRSxFQUFFO0VBRTVCO0VBQ0FDLGlCQUFpQixFQUFJQyxRQUFjLElBQU1BLFFBQVEsQ0FBQ0MsTUFBTTtFQUV4REMsUUFBUSxFQUFFLEtBQUs7RUFFZjtFQUNBQyxZQUFZLEVBQUU7SUFDWkMsU0FBUyxFQUFFLGtCQUFrQjtJQUM3QnJCLGNBQWMsRUFBRSxPQUFPO0lBQ3ZCc0IsV0FBVyxFQUFFLE9BQU87SUFDcEJwQixNQUFNLEVBQUUsT0FBTztJQUNmcUIsZ0JBQWdCLEVBQUUsR0FBRztJQUNyQkMscUJBQXFCLEVBQUU7RUFDekIsQ0FBQztFQUVEQyxNQUFNLEVBQUVqQyxNQUFNLENBQUNrQyxRQUFRO0VBQ3ZCQyxnQkFBZ0IsRUFBRSxDQUFFLGtCQUFrQixFQUFFLFdBQVc7QUFDckQsQ0FBRSxDQUFDO0FBQ0hDLE1BQU0sSUFBSUMsTUFBTSxDQUFDQyxNQUFNLENBQUVuQyxlQUFnQixDQUFDO0FBRTFDLGVBQWUsTUFBTW9DLGdCQUFnQixTQUFTM0MsSUFBSSxDQUFDO0VBSWpELE9BQXVCNEMsMEJBQTBCLEdBQUdyQyxlQUFlOztFQUVuRTtBQUNGO0FBQ0E7QUFDQTtFQUNTc0MsV0FBV0EsQ0FBRUMsVUFBOEIsRUFBRUMsZUFBeUMsRUFBRztJQUU5RixNQUFNQyxPQUFPLEdBQUdsRCxVQUFVLENBQW9ELENBQUMsQ0FDN0UsQ0FBQyxDQUFDLEVBQUVTLGVBQWUsRUFBRXdDLGVBQWdCLENBQUM7SUFFeENQLE1BQU0sSUFBSUEsTUFBTSxDQUFFUSxPQUFPLENBQUNuQyxrQkFBa0IsR0FBRyxDQUFDLElBQUltQyxPQUFPLENBQUNuQyxrQkFBa0IsR0FBRyxDQUFFLENBQUM7SUFDcEYyQixNQUFNLElBQUlBLE1BQU0sQ0FBRVEsT0FBTyxDQUFDaEIsWUFBWSxDQUFDRyxnQkFBZ0IsSUFBSyxDQUFDLElBQUlhLE9BQU8sQ0FBQ2hCLFlBQVksQ0FBQ0csZ0JBQWdCLElBQUssQ0FBRSxDQUFDO0lBQzlHSyxNQUFNLElBQUlBLE1BQU0sQ0FBRVEsT0FBTyxDQUFDaEIsWUFBWSxDQUFDSSxxQkFBcUIsSUFBSyxDQUFDLElBQUlZLE9BQU8sQ0FBQ2hCLFlBQVksQ0FBQ0kscUJBQXFCLElBQUssQ0FBRSxDQUFDO0lBRXhILE1BQU1hLFFBQVEsR0FBRyxFQUFFOztJQUVuQjtJQUNBLE1BQU1DLFVBQVUsR0FBRyxJQUFJakQsU0FBUyxDQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUrQyxPQUFPLENBQUN2QyxVQUFVLENBQUMwQyxLQUFLLEdBQUdILE9BQU8sQ0FBQ2hDLFlBQVksRUFBRWdDLE9BQU8sQ0FBQ3ZDLFVBQVUsQ0FBQzJDLE1BQU0sRUFBRTtNQUNsSHBDLFlBQVksRUFBRWdDLE9BQU8sQ0FBQ2hDLFlBQVk7TUFDbENxQyxJQUFJLEVBQUUsSUFBSXRELGNBQWMsQ0FBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRWlELE9BQU8sQ0FBQ3ZDLFVBQVUsQ0FBQzJDLE1BQU8sQ0FBQyxDQUMzREUsWUFBWSxDQUFFLENBQUMsRUFBRU4sT0FBTyxDQUFDdEMsUUFBUyxDQUFDLENBQ25DNEMsWUFBWSxDQUFFTixPQUFPLENBQUNuQyxrQkFBa0IsRUFBRW1DLE9BQU8sQ0FBQ3BDLGNBQWUsQ0FBQyxDQUNsRTBDLFlBQVksQ0FBRSxDQUFDLEVBQUVOLE9BQU8sQ0FBQ3JDLFdBQVksQ0FBQztNQUN6Q0csTUFBTSxFQUFFa0MsT0FBTyxDQUFDbEMsTUFBTTtNQUN0QkMsU0FBUyxFQUFFaUMsT0FBTyxDQUFDakMsU0FBUztNQUM1QndDLEtBQUssRUFBRSxDQUFDO01BQ1JDLE9BQU8sRUFBRTtJQUNYLENBQUUsQ0FBQztJQUNIUCxRQUFRLENBQUNRLElBQUksQ0FBRVAsVUFBVyxDQUFDOztJQUUzQjtJQUNBLE1BQU1yQixRQUFRLEdBQUcsSUFBSTVCLFNBQVMsQ0FBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFK0MsT0FBTyxDQUFDeEMsUUFBUSxDQUFDMkMsS0FBSyxFQUFFSCxPQUFPLENBQUN4QyxRQUFRLENBQUM0QyxNQUFNLEVBQUU7TUFDckZwQyxZQUFZLEVBQUVnQyxPQUFPLENBQUNoQyxZQUFZO01BQ2xDcUMsSUFBSSxFQUFFLElBQUl0RCxjQUFjLENBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUVpRCxPQUFPLENBQUN4QyxRQUFRLENBQUM0QyxNQUFPLENBQUMsQ0FDekRFLFlBQVksQ0FBRSxDQUFDLEVBQUVOLE9BQU8sQ0FBQ3RDLFFBQVMsQ0FBQyxDQUNuQzRDLFlBQVksQ0FBRU4sT0FBTyxDQUFDbkMsa0JBQWtCLEVBQUVtQyxPQUFPLENBQUNwQyxjQUFlLENBQUMsQ0FDbEUwQyxZQUFZLENBQUUsQ0FBQyxFQUFFTixPQUFPLENBQUNyQyxXQUFZLENBQUM7TUFDekNHLE1BQU0sRUFBRWtDLE9BQU8sQ0FBQ2xDLE1BQU07TUFDdEJDLFNBQVMsRUFBRWlDLE9BQU8sQ0FBQ2pDLFNBQVM7TUFDNUJ3QyxLQUFLLEVBQUVMLFVBQVUsQ0FBQ1EsSUFBSSxHQUFHVixPQUFPLENBQUNoQyxZQUFZO01BQUU7TUFDL0N3QyxPQUFPLEVBQUVOLFVBQVUsQ0FBQ007SUFDdEIsQ0FBRSxDQUFDO0lBQ0hQLFFBQVEsQ0FBQ1EsSUFBSSxDQUFFNUIsUUFBUyxDQUFDOztJQUV6QjtJQUNBLElBQUk4QixXQUF3QixHQUFHLElBQUk7SUFDbkMsSUFBS1gsT0FBTyxDQUFDL0IsU0FBUyxFQUFHO01BRXZCLE1BQU0yQyxhQUFhLEdBQUc7UUFDcEJDLE1BQU0sRUFBRWIsT0FBTyxDQUFDNUIsWUFBWTtRQUM1QjBDLE9BQU8sRUFBRWQsT0FBTyxDQUFDM0IsYUFBYTtRQUM5QjBDLE9BQU8sRUFBRWYsT0FBTyxDQUFDMUIsYUFBYTtRQUM5QjBDLGlCQUFpQixFQUFFaEIsT0FBTyxDQUFDekIsdUJBQXVCO1FBQ2xEMEMsaUJBQWlCLEVBQUVqQixPQUFPLENBQUN4Qix1QkFBdUI7UUFDbEQwQyxTQUFTLEVBQUVsQixPQUFPLENBQUM3QixXQUFXO1FBQzlCZ0QsUUFBUSxFQUFFbkIsT0FBTyxDQUFDdkIsY0FBYztRQUNoQ0ssTUFBTSxFQUFFa0IsT0FBTyxDQUFDcEIsaUJBQWlCLENBQUVDLFFBQVMsQ0FBQztRQUM3Q1EsTUFBTSxFQUFFVyxPQUFPLENBQUNYLE1BQU0sQ0FBQytCLFlBQVksQ0FBRSxRQUFTLENBQUM7UUFFL0M7UUFDQUMsWUFBWSxFQUFFckIsT0FBTyxDQUFDdEIsb0JBQW9CO1FBQzFDNEMsWUFBWSxFQUFFLE9BQU87UUFDckJDLGtCQUFrQixFQUFFdkIsT0FBTyxDQUFDckI7TUFDOUIsQ0FBQztNQUVEZ0MsV0FBVyxHQUFLWCxPQUFPLENBQUM5QixVQUFVLEtBQUssUUFBUSxHQUNqQyxJQUFJZix1QkFBdUIsQ0FBRTJDLFVBQVUsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFYyxhQUFjLENBQUMsR0FDckUsSUFBSTFELG9CQUFvQixDQUFFNEMsVUFBVSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUVjLGFBQWMsQ0FBQztNQUVoRlgsUUFBUSxDQUFDUSxJQUFJLENBQUVFLFdBQVksQ0FBQztJQUM5Qjs7SUFFQTtJQUNBLElBQUtYLE9BQU8sQ0FBQ2pCLFFBQVEsRUFBRztNQUN0QixNQUFNeUMsYUFBYSxHQUFHeEIsT0FBTyxDQUFDdkMsVUFBVSxDQUFDMkMsTUFBTSxHQUFHSixPQUFPLENBQUNoQixZQUFZLENBQUNHLGdCQUFpQjtNQUN4RixNQUFNSCxZQUFZLEdBQUdwQyxLQUFLLENBQUUsQ0FBQyxDQUFDLEVBQUVvRCxPQUFPLENBQUNoQixZQUFZLEVBQUU7UUFFcEQ7UUFDQXlDLE9BQU8sRUFBRS9FLEtBQUssQ0FBQ2dGLE1BQU0sQ0FBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUNGLGFBQWEsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFeEIsT0FBTyxDQUFDaEIsWUFBWSxDQUFDSSxxQkFBdUIsQ0FBQztRQUVqRztRQUNBb0IsT0FBTyxFQUFFO01BQ1gsQ0FBRSxDQUFDO01BQ0gsTUFBTW1CLFNBQVMsR0FBRyxJQUFJckUsZ0JBQWdCLENBQUVrRSxhQUFhLEVBQUV4QyxZQUFhLENBQUM7O01BRXJFO01BQ0FpQixRQUFRLENBQUMyQixPQUFPLENBQUVELFNBQVUsQ0FBQztJQUMvQjs7SUFFQTtJQUNBM0IsT0FBTyxDQUFDQyxRQUFRLEdBQUdBLFFBQVEsQ0FBQzRCLE1BQU0sQ0FBRTdCLE9BQU8sQ0FBQ0MsUUFBUSxJQUFJLEVBQUcsQ0FBQztJQUU1RCxLQUFLLENBQUVELE9BQVEsQ0FBQztJQUVoQixJQUFJLENBQUM4Qix1QkFBdUIsR0FBRyxNQUFNO01BQ25DbkIsV0FBVyxJQUFJQSxXQUFXLENBQUNvQixPQUFPLENBQUMsQ0FBQztJQUN0QyxDQUFDOztJQUVEO0lBQ0F2QyxNQUFNLElBQUl3QyxJQUFJLENBQUNDLE9BQU8sQ0FBQ0MsZUFBZSxDQUFDQyxNQUFNLElBQUl4RixnQkFBZ0IsQ0FBQ3lGLGVBQWUsQ0FBRSxjQUFjLEVBQUUsa0JBQWtCLEVBQUUsSUFBSyxDQUFDO0VBQy9IO0VBRUEsSUFBb0JDLE9BQU9BLENBQUEsRUFBWTtJQUFFLE9BQU8sSUFBSSxDQUFDQyxTQUFTLENBQUMsQ0FBQztFQUFFO0VBRWxFLElBQW9CRCxPQUFPQSxDQUFFRSxLQUFjLEVBQUc7SUFBRSxJQUFJLENBQUNDLFVBQVUsQ0FBRUQsS0FBTSxDQUFDO0VBQUU7RUFFMURSLE9BQU9BLENBQUEsRUFBUztJQUM5QixJQUFJLENBQUNELHVCQUF1QixDQUFDLENBQUM7SUFDOUIsS0FBSyxDQUFDQyxPQUFPLENBQUMsQ0FBQztFQUNqQjtBQUNGO0FBRUExRSxXQUFXLENBQUNvRixRQUFRLENBQUUsa0JBQWtCLEVBQUU5QyxnQkFBaUIsQ0FBQyJ9