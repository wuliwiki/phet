// Copyright 2014-2022, University of Colorado Boulder

/**
 * A rectangle with pseudo-3D shading.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import DerivedProperty from '../../axon/js/DerivedProperty.js';
import { Shape } from '../../kite/js/imports.js';
import optionize from '../../phet-core/js/optionize.js';
import { Color, LinearGradient, Node, PaintColorProperty, Path, RadialGradient, Rectangle } from '../../scenery/js/imports.js';
import sceneryPhet from './sceneryPhet.js';
export default class ShadedRectangle extends Node {
  /**
   * @param rectBounds - takes up rectBounds in size
   * @param [providedOptions]
   */
  constructor(rectBounds, providedOptions) {
    super();
    const options = optionize()({
      baseColor: new Color(80, 130, 230),
      lightFactor: 0.5,
      lighterFactor: 0.1,
      darkFactor: 0.5,
      darkerFactor: 0.1,
      cornerRadius: 10,
      lightSource: 'leftTop',
      lightOffset: 0.525,
      darkOffset: 0.375
    }, providedOptions);
    assert && assert(options.lightOffset < 1, 'options.lightOffset needs to be less than 1');
    assert && assert(options.darkOffset < 1, 'options.darkOffset needs to be less than 1');
    const lightFromLeft = options.lightSource.includes('left');
    const lightFromTop = options.lightSource.includes('Top');
    const cornerRadius = options.cornerRadius;

    // compute our colors (properly handle color-Property cases for baseColor)
    this.lighterPaintProperty = new PaintColorProperty(options.baseColor, {
      luminanceFactor: options.lightFactor + options.lighterFactor
    });
    this.lightPaintProperty = new PaintColorProperty(options.baseColor, {
      luminanceFactor: options.lightFactor
    });
    this.darkPaintProperty = new PaintColorProperty(options.baseColor, {
      luminanceFactor: -options.darkFactor
    });
    this.darkerPaintProperty = new PaintColorProperty(options.baseColor, {
      luminanceFactor: -options.darkFactor - options.darkerFactor
    });

    // change colors based on orientation
    const topColorProperty = lightFromTop ? this.lighterPaintProperty : this.darkerPaintProperty;
    const leftColorProperty = lightFromLeft ? this.lightPaintProperty : this.darkPaintProperty;
    const rightColorProperty = lightFromLeft ? this.darkPaintProperty : this.lightPaintProperty;
    const bottomColorProperty = lightFromTop ? this.darkerPaintProperty : this.lighterPaintProperty;

    // how far our light and dark gradients will extend into the rectangle
    const lightOffset = options.lightOffset * cornerRadius;
    const darkOffset = options.darkOffset * cornerRadius;

    // change offsets based on orientation
    const topOffset = lightFromTop ? lightOffset : darkOffset;
    const leftOffset = lightFromLeft ? lightOffset : darkOffset;
    const rightOffset = lightFromLeft ? darkOffset : lightOffset;
    const bottomOffset = lightFromTop ? darkOffset : lightOffset;

    // we layer two gradients on top of each other as the base (using the same rounded rectangle shape)
    const horizontalNode = Rectangle.roundedBounds(rectBounds, cornerRadius, cornerRadius, {
      pickable: false
    });
    const verticalNode = Rectangle.roundedBounds(rectBounds, cornerRadius, cornerRadius, {
      pickable: false
    });
    horizontalNode.fill = new LinearGradient(horizontalNode.left, 0, horizontalNode.right, 0).addColorStop(0, leftColorProperty).addColorStop(leftOffset / verticalNode.width, options.baseColor).addColorStop(1 - rightOffset / verticalNode.width, options.baseColor).addColorStop(1, rightColorProperty);
    verticalNode.fill = new LinearGradient(0, verticalNode.top, 0, verticalNode.bottom).addColorStop(0, topColorProperty).addColorStop(topOffset / verticalNode.height, new DerivedProperty([topColorProperty], color => {
      return color.withAlpha(0);
    })).addColorStop(1 - bottomOffset / verticalNode.height, new DerivedProperty([bottomColorProperty], color => {
      return color.withAlpha(0);
    })).addColorStop(1, bottomColorProperty);

    // shape of our corner (in this case, top-right)
    const cornerShape = new Shape().moveTo(0, 0).arc(0, 0, cornerRadius, -Math.PI / 2, 0, false).close();
    // rotation needed to move the cornerShape into the proper orientation as the light corner (Math.PI more for dark corner)
    const lightCornerRotation = {
      leftTop: -Math.PI / 2,
      rightTop: 0,
      rightBottom: Math.PI / 2,
      leftBottom: Math.PI
    }[options.lightSource];
    const innerBounds = rectBounds.eroded(cornerRadius);

    // since both the top and left are "lighter", we have a rounded gradient along that corner
    const lightCorner = new Path(cornerShape, {
      x: lightFromLeft ? innerBounds.minX : innerBounds.maxX,
      y: lightFromTop ? innerBounds.minY : innerBounds.maxY,
      rotation: lightCornerRotation,
      fill: new RadialGradient(0, 0, 0, 0, 0, cornerRadius).addColorStop(0, options.baseColor).addColorStop(1 - lightOffset / cornerRadius, options.baseColor).addColorStop(1, this.lighterPaintProperty),
      pickable: false
    });

    // since both the bottom and right are "darker", we have a rounded gradient along that corner
    const darkCorner = new Path(cornerShape, {
      x: lightFromLeft ? innerBounds.maxX : innerBounds.minX,
      y: lightFromTop ? innerBounds.maxY : innerBounds.minY,
      rotation: lightCornerRotation + Math.PI,
      // opposite direction from our light corner
      fill: new RadialGradient(0, 0, 0, 0, 0, cornerRadius).addColorStop(0, options.baseColor).addColorStop(1 - darkOffset / cornerRadius, options.baseColor).addColorStop(1, this.darkerPaintProperty),
      pickable: false
    });

    // the stroke around the outside
    const panelStroke = Rectangle.roundedBounds(rectBounds, cornerRadius, cornerRadius, {
      stroke: new DerivedProperty([rightColorProperty], color => {
        return color.withAlpha(0.4);
      })
    });

    // layout
    this.addChild(horizontalNode);
    this.addChild(verticalNode);
    this.addChild(lightCorner);
    this.addChild(darkCorner);
    this.addChild(panelStroke); // NOTE: this is the pickable child used for hit testing. Ensure something is pickable.

    this.mutate(options);
  }
  dispose() {
    this.lighterPaintProperty.dispose();
    this.lightPaintProperty.dispose();
    this.darkPaintProperty.dispose();
    this.darkerPaintProperty.dispose();
    super.dispose();
  }
}
sceneryPhet.register('ShadedRectangle', ShadedRectangle);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJTaGFwZSIsIm9wdGlvbml6ZSIsIkNvbG9yIiwiTGluZWFyR3JhZGllbnQiLCJOb2RlIiwiUGFpbnRDb2xvclByb3BlcnR5IiwiUGF0aCIsIlJhZGlhbEdyYWRpZW50IiwiUmVjdGFuZ2xlIiwic2NlbmVyeVBoZXQiLCJTaGFkZWRSZWN0YW5nbGUiLCJjb25zdHJ1Y3RvciIsInJlY3RCb3VuZHMiLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwiYmFzZUNvbG9yIiwibGlnaHRGYWN0b3IiLCJsaWdodGVyRmFjdG9yIiwiZGFya0ZhY3RvciIsImRhcmtlckZhY3RvciIsImNvcm5lclJhZGl1cyIsImxpZ2h0U291cmNlIiwibGlnaHRPZmZzZXQiLCJkYXJrT2Zmc2V0IiwiYXNzZXJ0IiwibGlnaHRGcm9tTGVmdCIsImluY2x1ZGVzIiwibGlnaHRGcm9tVG9wIiwibGlnaHRlclBhaW50UHJvcGVydHkiLCJsdW1pbmFuY2VGYWN0b3IiLCJsaWdodFBhaW50UHJvcGVydHkiLCJkYXJrUGFpbnRQcm9wZXJ0eSIsImRhcmtlclBhaW50UHJvcGVydHkiLCJ0b3BDb2xvclByb3BlcnR5IiwibGVmdENvbG9yUHJvcGVydHkiLCJyaWdodENvbG9yUHJvcGVydHkiLCJib3R0b21Db2xvclByb3BlcnR5IiwidG9wT2Zmc2V0IiwibGVmdE9mZnNldCIsInJpZ2h0T2Zmc2V0IiwiYm90dG9tT2Zmc2V0IiwiaG9yaXpvbnRhbE5vZGUiLCJyb3VuZGVkQm91bmRzIiwicGlja2FibGUiLCJ2ZXJ0aWNhbE5vZGUiLCJmaWxsIiwibGVmdCIsInJpZ2h0IiwiYWRkQ29sb3JTdG9wIiwid2lkdGgiLCJ0b3AiLCJib3R0b20iLCJoZWlnaHQiLCJjb2xvciIsIndpdGhBbHBoYSIsImNvcm5lclNoYXBlIiwibW92ZVRvIiwiYXJjIiwiTWF0aCIsIlBJIiwiY2xvc2UiLCJsaWdodENvcm5lclJvdGF0aW9uIiwibGVmdFRvcCIsInJpZ2h0VG9wIiwicmlnaHRCb3R0b20iLCJsZWZ0Qm90dG9tIiwiaW5uZXJCb3VuZHMiLCJlcm9kZWQiLCJsaWdodENvcm5lciIsIngiLCJtaW5YIiwibWF4WCIsInkiLCJtaW5ZIiwibWF4WSIsInJvdGF0aW9uIiwiZGFya0Nvcm5lciIsInBhbmVsU3Ryb2tlIiwic3Ryb2tlIiwiYWRkQ2hpbGQiLCJtdXRhdGUiLCJkaXNwb3NlIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJTaGFkZWRSZWN0YW5nbGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTQtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogQSByZWN0YW5nbGUgd2l0aCBwc2V1ZG8tM0Qgc2hhZGluZy5cclxuICpcclxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxyXG4gKi9cclxuXHJcbmltcG9ydCBEZXJpdmVkUHJvcGVydHkgZnJvbSAnLi4vLi4vYXhvbi9qcy9EZXJpdmVkUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgQm91bmRzMiBmcm9tICcuLi8uLi9kb3QvanMvQm91bmRzMi5qcyc7XHJcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSAnLi4vLi4va2l0ZS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IG9wdGlvbml6ZSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuaW1wb3J0IHsgQ29sb3IsIFRDb2xvciwgTGluZWFyR3JhZGllbnQsIE5vZGUsIE5vZGVPcHRpb25zLCBQYWludENvbG9yUHJvcGVydHksIFBhdGgsIFJhZGlhbEdyYWRpZW50LCBSZWN0YW5nbGUgfSBmcm9tICcuLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgc2NlbmVyeVBoZXQgZnJvbSAnLi9zY2VuZXJ5UGhldC5qcyc7XHJcblxyXG50eXBlIExpZ2h0U291cmNlID0gJ2xlZnRUb3AnIHwgJ3JpZ2h0VG9wJyB8ICdsZWZ0Qm90dG9tJyB8ICdyaWdodEJvdHRvbSc7XHJcblxyXG50eXBlIFNlbGZPcHRpb25zID0ge1xyXG4gIGJhc2VDb2xvcj86IFRDb2xvcjtcclxuICBsaWdodEZhY3Rvcj86IG51bWJlcjsgLy8gaG93IG11Y2ggbGlnaHRlciB0aGUgXCJsaWdodFwiIHBhcnRzICh0b3AgYW5kIGxlZnQpIGFyZVxyXG4gIGxpZ2h0ZXJGYWN0b3I/OiBudW1iZXI7IC8vIGhvdyBtdWNoIGxpZ2h0ZXIgaXMgdGhlIHRvcCB0aGFuIHRoZSBsZWZ0XHJcbiAgZGFya0ZhY3Rvcj86IG51bWJlcjsgLy8gaG93IG11Y2ggZGFya2VyIHRoZSBcImRhcmtcIiBwYXJ0cyAoYm90dG9tIGFuZCByaWdodCkgYXJlXHJcbiAgZGFya2VyRmFjdG9yPzogbnVtYmVyOyAvLyBob3cgbXVjaCBkYXJrZXIgdGhlIGJvdHRvbSBpcyB0aGFuIHRoZSByaWdodFxyXG4gIGNvcm5lclJhZGl1cz86IG51bWJlcjsgLy8gdGhlIHJhZGl1cyBvZiBjdXJ2YXR1cmUgYXQgdGhlIGNvcm5lcnMgKGFsc28gZGV0ZXJtaW5lcyB0aGUgc2l6ZSBvZiB0aGUgZmF1eC0zRCBzaGFkaW5nKVxyXG4gIGxpZ2h0U291cmNlPzogTGlnaHRTb3VyY2U7IC8vIHJlbGF0aXZlIHBvc2l0aW9uIG9mIHRoZSBsaWdodCBzb3VyY2VcclxuXHJcbiAgLy8gV2hhdCBmcmFjdGlvbiBvZiB0aGUgY29ybmVyUmFkaXVzIHNob3VsZCB0aGUgbGlnaHQgYW5kIGRhcmsgZ3JhZGllbnRzIGV4dGVuZCBpbnRvIHRoZSByZWN0YW5nbGU/XHJcbiAgLy8gU2hvdWxkIGFsd2F5cyBiZSBsZXNzIHRoYW4gMS5cclxuICBsaWdodE9mZnNldD86IG51bWJlcjtcclxuICBkYXJrT2Zmc2V0PzogbnVtYmVyO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgU2hhZGVkUmVjdGFuZ2xlT3B0aW9ucyA9IFNlbGZPcHRpb25zICYgTm9kZU9wdGlvbnM7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTaGFkZWRSZWN0YW5nbGUgZXh0ZW5kcyBOb2RlIHtcclxuXHJcbiAgcHJpdmF0ZSByZWFkb25seSBsaWdodGVyUGFpbnRQcm9wZXJ0eTogUGFpbnRDb2xvclByb3BlcnR5O1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgbGlnaHRQYWludFByb3BlcnR5OiBQYWludENvbG9yUHJvcGVydHk7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBkYXJrUGFpbnRQcm9wZXJ0eTogUGFpbnRDb2xvclByb3BlcnR5O1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgZGFya2VyUGFpbnRQcm9wZXJ0eTogUGFpbnRDb2xvclByb3BlcnR5O1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0gcmVjdEJvdW5kcyAtIHRha2VzIHVwIHJlY3RCb3VuZHMgaW4gc2l6ZVxyXG4gICAqIEBwYXJhbSBbcHJvdmlkZWRPcHRpb25zXVxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggcmVjdEJvdW5kczogQm91bmRzMiwgcHJvdmlkZWRPcHRpb25zPzogU2hhZGVkUmVjdGFuZ2xlT3B0aW9ucyApIHtcclxuXHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8U2hhZGVkUmVjdGFuZ2xlT3B0aW9ucywgU2VsZk9wdGlvbnMsIE5vZGVPcHRpb25zPigpKCB7XHJcbiAgICAgIGJhc2VDb2xvcjogbmV3IENvbG9yKCA4MCwgMTMwLCAyMzAgKSxcclxuICAgICAgbGlnaHRGYWN0b3I6IDAuNSxcclxuICAgICAgbGlnaHRlckZhY3RvcjogMC4xLFxyXG4gICAgICBkYXJrRmFjdG9yOiAwLjUsXHJcbiAgICAgIGRhcmtlckZhY3RvcjogMC4xLFxyXG4gICAgICBjb3JuZXJSYWRpdXM6IDEwLFxyXG4gICAgICBsaWdodFNvdXJjZTogJ2xlZnRUb3AnLFxyXG4gICAgICBsaWdodE9mZnNldDogMC41MjUsXHJcbiAgICAgIGRhcmtPZmZzZXQ6IDAuMzc1XHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBvcHRpb25zLmxpZ2h0T2Zmc2V0IDwgMSwgJ29wdGlvbnMubGlnaHRPZmZzZXQgbmVlZHMgdG8gYmUgbGVzcyB0aGFuIDEnICk7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBvcHRpb25zLmRhcmtPZmZzZXQgPCAxLCAnb3B0aW9ucy5kYXJrT2Zmc2V0IG5lZWRzIHRvIGJlIGxlc3MgdGhhbiAxJyApO1xyXG5cclxuICAgIGNvbnN0IGxpZ2h0RnJvbUxlZnQgPSBvcHRpb25zLmxpZ2h0U291cmNlLmluY2x1ZGVzKCAnbGVmdCcgKTtcclxuICAgIGNvbnN0IGxpZ2h0RnJvbVRvcCA9IG9wdGlvbnMubGlnaHRTb3VyY2UuaW5jbHVkZXMoICdUb3AnICk7XHJcblxyXG4gICAgY29uc3QgY29ybmVyUmFkaXVzID0gb3B0aW9ucy5jb3JuZXJSYWRpdXM7XHJcblxyXG4gICAgLy8gY29tcHV0ZSBvdXIgY29sb3JzIChwcm9wZXJseSBoYW5kbGUgY29sb3ItUHJvcGVydHkgY2FzZXMgZm9yIGJhc2VDb2xvcilcclxuICAgIHRoaXMubGlnaHRlclBhaW50UHJvcGVydHkgPSBuZXcgUGFpbnRDb2xvclByb3BlcnR5KCBvcHRpb25zLmJhc2VDb2xvciwgeyBsdW1pbmFuY2VGYWN0b3I6IG9wdGlvbnMubGlnaHRGYWN0b3IgKyBvcHRpb25zLmxpZ2h0ZXJGYWN0b3IgfSApO1xyXG4gICAgdGhpcy5saWdodFBhaW50UHJvcGVydHkgPSBuZXcgUGFpbnRDb2xvclByb3BlcnR5KCBvcHRpb25zLmJhc2VDb2xvciwgeyBsdW1pbmFuY2VGYWN0b3I6IG9wdGlvbnMubGlnaHRGYWN0b3IgfSApO1xyXG4gICAgdGhpcy5kYXJrUGFpbnRQcm9wZXJ0eSA9IG5ldyBQYWludENvbG9yUHJvcGVydHkoIG9wdGlvbnMuYmFzZUNvbG9yLCB7IGx1bWluYW5jZUZhY3RvcjogLW9wdGlvbnMuZGFya0ZhY3RvciB9ICk7XHJcbiAgICB0aGlzLmRhcmtlclBhaW50UHJvcGVydHkgPSBuZXcgUGFpbnRDb2xvclByb3BlcnR5KCBvcHRpb25zLmJhc2VDb2xvciwgeyBsdW1pbmFuY2VGYWN0b3I6IC1vcHRpb25zLmRhcmtGYWN0b3IgLSBvcHRpb25zLmRhcmtlckZhY3RvciB9ICk7XHJcblxyXG4gICAgLy8gY2hhbmdlIGNvbG9ycyBiYXNlZCBvbiBvcmllbnRhdGlvblxyXG4gICAgY29uc3QgdG9wQ29sb3JQcm9wZXJ0eSA9IGxpZ2h0RnJvbVRvcCA/IHRoaXMubGlnaHRlclBhaW50UHJvcGVydHkgOiB0aGlzLmRhcmtlclBhaW50UHJvcGVydHk7XHJcbiAgICBjb25zdCBsZWZ0Q29sb3JQcm9wZXJ0eSA9IGxpZ2h0RnJvbUxlZnQgPyB0aGlzLmxpZ2h0UGFpbnRQcm9wZXJ0eSA6IHRoaXMuZGFya1BhaW50UHJvcGVydHk7XHJcbiAgICBjb25zdCByaWdodENvbG9yUHJvcGVydHkgPSBsaWdodEZyb21MZWZ0ID8gdGhpcy5kYXJrUGFpbnRQcm9wZXJ0eSA6IHRoaXMubGlnaHRQYWludFByb3BlcnR5O1xyXG4gICAgY29uc3QgYm90dG9tQ29sb3JQcm9wZXJ0eSA9IGxpZ2h0RnJvbVRvcCA/IHRoaXMuZGFya2VyUGFpbnRQcm9wZXJ0eSA6IHRoaXMubGlnaHRlclBhaW50UHJvcGVydHk7XHJcblxyXG4gICAgLy8gaG93IGZhciBvdXIgbGlnaHQgYW5kIGRhcmsgZ3JhZGllbnRzIHdpbGwgZXh0ZW5kIGludG8gdGhlIHJlY3RhbmdsZVxyXG4gICAgY29uc3QgbGlnaHRPZmZzZXQgPSBvcHRpb25zLmxpZ2h0T2Zmc2V0ICogY29ybmVyUmFkaXVzO1xyXG4gICAgY29uc3QgZGFya09mZnNldCA9IG9wdGlvbnMuZGFya09mZnNldCAqIGNvcm5lclJhZGl1cztcclxuXHJcbiAgICAvLyBjaGFuZ2Ugb2Zmc2V0cyBiYXNlZCBvbiBvcmllbnRhdGlvblxyXG4gICAgY29uc3QgdG9wT2Zmc2V0ID0gbGlnaHRGcm9tVG9wID8gbGlnaHRPZmZzZXQgOiBkYXJrT2Zmc2V0O1xyXG4gICAgY29uc3QgbGVmdE9mZnNldCA9IGxpZ2h0RnJvbUxlZnQgPyBsaWdodE9mZnNldCA6IGRhcmtPZmZzZXQ7XHJcbiAgICBjb25zdCByaWdodE9mZnNldCA9IGxpZ2h0RnJvbUxlZnQgPyBkYXJrT2Zmc2V0IDogbGlnaHRPZmZzZXQ7XHJcbiAgICBjb25zdCBib3R0b21PZmZzZXQgPSBsaWdodEZyb21Ub3AgPyBkYXJrT2Zmc2V0IDogbGlnaHRPZmZzZXQ7XHJcblxyXG4gICAgLy8gd2UgbGF5ZXIgdHdvIGdyYWRpZW50cyBvbiB0b3Agb2YgZWFjaCBvdGhlciBhcyB0aGUgYmFzZSAodXNpbmcgdGhlIHNhbWUgcm91bmRlZCByZWN0YW5nbGUgc2hhcGUpXHJcbiAgICBjb25zdCBob3Jpem9udGFsTm9kZSA9IFJlY3RhbmdsZS5yb3VuZGVkQm91bmRzKCByZWN0Qm91bmRzLCBjb3JuZXJSYWRpdXMsIGNvcm5lclJhZGl1cywgeyBwaWNrYWJsZTogZmFsc2UgfSApO1xyXG4gICAgY29uc3QgdmVydGljYWxOb2RlID0gUmVjdGFuZ2xlLnJvdW5kZWRCb3VuZHMoIHJlY3RCb3VuZHMsIGNvcm5lclJhZGl1cywgY29ybmVyUmFkaXVzLCB7IHBpY2thYmxlOiBmYWxzZSB9ICk7XHJcblxyXG4gICAgaG9yaXpvbnRhbE5vZGUuZmlsbCA9IG5ldyBMaW5lYXJHcmFkaWVudCggaG9yaXpvbnRhbE5vZGUubGVmdCwgMCwgaG9yaXpvbnRhbE5vZGUucmlnaHQsIDAgKVxyXG4gICAgICAuYWRkQ29sb3JTdG9wKCAwLCBsZWZ0Q29sb3JQcm9wZXJ0eSApXHJcbiAgICAgIC5hZGRDb2xvclN0b3AoIGxlZnRPZmZzZXQgLyB2ZXJ0aWNhbE5vZGUud2lkdGgsIG9wdGlvbnMuYmFzZUNvbG9yIClcclxuICAgICAgLmFkZENvbG9yU3RvcCggMSAtIHJpZ2h0T2Zmc2V0IC8gdmVydGljYWxOb2RlLndpZHRoLCBvcHRpb25zLmJhc2VDb2xvciApXHJcbiAgICAgIC5hZGRDb2xvclN0b3AoIDEsIHJpZ2h0Q29sb3JQcm9wZXJ0eSApO1xyXG5cclxuICAgIHZlcnRpY2FsTm9kZS5maWxsID0gbmV3IExpbmVhckdyYWRpZW50KCAwLCB2ZXJ0aWNhbE5vZGUudG9wLCAwLCB2ZXJ0aWNhbE5vZGUuYm90dG9tIClcclxuICAgICAgLmFkZENvbG9yU3RvcCggMCwgdG9wQ29sb3JQcm9wZXJ0eSApXHJcbiAgICAgIC5hZGRDb2xvclN0b3AoIHRvcE9mZnNldCAvIHZlcnRpY2FsTm9kZS5oZWlnaHQsIG5ldyBEZXJpdmVkUHJvcGVydHkoIFsgdG9wQ29sb3JQcm9wZXJ0eSBdLCAoIGNvbG9yID0+IHtcclxuICAgICAgICByZXR1cm4gY29sb3Iud2l0aEFscGhhKCAwICk7XHJcbiAgICAgIH0gKSApIClcclxuICAgICAgLmFkZENvbG9yU3RvcCggMSAtIGJvdHRvbU9mZnNldCAvIHZlcnRpY2FsTm9kZS5oZWlnaHQsIG5ldyBEZXJpdmVkUHJvcGVydHkoIFsgYm90dG9tQ29sb3JQcm9wZXJ0eSBdLCAoIGNvbG9yID0+IHtcclxuICAgICAgICByZXR1cm4gY29sb3Iud2l0aEFscGhhKCAwICk7XHJcbiAgICAgIH0gKSApIClcclxuICAgICAgLmFkZENvbG9yU3RvcCggMSwgYm90dG9tQ29sb3JQcm9wZXJ0eSApO1xyXG5cclxuICAgIC8vIHNoYXBlIG9mIG91ciBjb3JuZXIgKGluIHRoaXMgY2FzZSwgdG9wLXJpZ2h0KVxyXG4gICAgY29uc3QgY29ybmVyU2hhcGUgPSBuZXcgU2hhcGUoKS5tb3ZlVG8oIDAsIDAgKVxyXG4gICAgICAuYXJjKCAwLCAwLCBjb3JuZXJSYWRpdXMsIC1NYXRoLlBJIC8gMiwgMCwgZmFsc2UgKVxyXG4gICAgICAuY2xvc2UoKTtcclxuICAgIC8vIHJvdGF0aW9uIG5lZWRlZCB0byBtb3ZlIHRoZSBjb3JuZXJTaGFwZSBpbnRvIHRoZSBwcm9wZXIgb3JpZW50YXRpb24gYXMgdGhlIGxpZ2h0IGNvcm5lciAoTWF0aC5QSSBtb3JlIGZvciBkYXJrIGNvcm5lcilcclxuICAgIGNvbnN0IGxpZ2h0Q29ybmVyUm90YXRpb24gPSB7XHJcbiAgICAgIGxlZnRUb3A6IC1NYXRoLlBJIC8gMixcclxuICAgICAgcmlnaHRUb3A6IDAsXHJcbiAgICAgIHJpZ2h0Qm90dG9tOiBNYXRoLlBJIC8gMixcclxuICAgICAgbGVmdEJvdHRvbTogTWF0aC5QSVxyXG4gICAgfVsgb3B0aW9ucy5saWdodFNvdXJjZSBdO1xyXG5cclxuICAgIGNvbnN0IGlubmVyQm91bmRzID0gcmVjdEJvdW5kcy5lcm9kZWQoIGNvcm5lclJhZGl1cyApO1xyXG5cclxuICAgIC8vIHNpbmNlIGJvdGggdGhlIHRvcCBhbmQgbGVmdCBhcmUgXCJsaWdodGVyXCIsIHdlIGhhdmUgYSByb3VuZGVkIGdyYWRpZW50IGFsb25nIHRoYXQgY29ybmVyXHJcbiAgICBjb25zdCBsaWdodENvcm5lciA9IG5ldyBQYXRoKCBjb3JuZXJTaGFwZSwge1xyXG4gICAgICB4OiBsaWdodEZyb21MZWZ0ID8gaW5uZXJCb3VuZHMubWluWCA6IGlubmVyQm91bmRzLm1heFgsXHJcbiAgICAgIHk6IGxpZ2h0RnJvbVRvcCA/IGlubmVyQm91bmRzLm1pblkgOiBpbm5lckJvdW5kcy5tYXhZLFxyXG4gICAgICByb3RhdGlvbjogbGlnaHRDb3JuZXJSb3RhdGlvbixcclxuICAgICAgZmlsbDogbmV3IFJhZGlhbEdyYWRpZW50KCAwLCAwLCAwLCAwLCAwLCBjb3JuZXJSYWRpdXMgKVxyXG4gICAgICAgIC5hZGRDb2xvclN0b3AoIDAsIG9wdGlvbnMuYmFzZUNvbG9yIClcclxuICAgICAgICAuYWRkQ29sb3JTdG9wKCAxIC0gbGlnaHRPZmZzZXQgLyBjb3JuZXJSYWRpdXMsIG9wdGlvbnMuYmFzZUNvbG9yIClcclxuICAgICAgICAuYWRkQ29sb3JTdG9wKCAxLCB0aGlzLmxpZ2h0ZXJQYWludFByb3BlcnR5ICksXHJcbiAgICAgIHBpY2thYmxlOiBmYWxzZVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIHNpbmNlIGJvdGggdGhlIGJvdHRvbSBhbmQgcmlnaHQgYXJlIFwiZGFya2VyXCIsIHdlIGhhdmUgYSByb3VuZGVkIGdyYWRpZW50IGFsb25nIHRoYXQgY29ybmVyXHJcbiAgICBjb25zdCBkYXJrQ29ybmVyID0gbmV3IFBhdGgoIGNvcm5lclNoYXBlLCB7XHJcbiAgICAgIHg6IGxpZ2h0RnJvbUxlZnQgPyBpbm5lckJvdW5kcy5tYXhYIDogaW5uZXJCb3VuZHMubWluWCxcclxuICAgICAgeTogbGlnaHRGcm9tVG9wID8gaW5uZXJCb3VuZHMubWF4WSA6IGlubmVyQm91bmRzLm1pblksXHJcbiAgICAgIHJvdGF0aW9uOiBsaWdodENvcm5lclJvdGF0aW9uICsgTWF0aC5QSSwgLy8gb3Bwb3NpdGUgZGlyZWN0aW9uIGZyb20gb3VyIGxpZ2h0IGNvcm5lclxyXG4gICAgICBmaWxsOiBuZXcgUmFkaWFsR3JhZGllbnQoIDAsIDAsIDAsIDAsIDAsIGNvcm5lclJhZGl1cyApXHJcbiAgICAgICAgLmFkZENvbG9yU3RvcCggMCwgb3B0aW9ucy5iYXNlQ29sb3IgKVxyXG4gICAgICAgIC5hZGRDb2xvclN0b3AoIDEgLSBkYXJrT2Zmc2V0IC8gY29ybmVyUmFkaXVzLCBvcHRpb25zLmJhc2VDb2xvciApXHJcbiAgICAgICAgLmFkZENvbG9yU3RvcCggMSwgdGhpcy5kYXJrZXJQYWludFByb3BlcnR5ICksXHJcbiAgICAgIHBpY2thYmxlOiBmYWxzZVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIHRoZSBzdHJva2UgYXJvdW5kIHRoZSBvdXRzaWRlXHJcbiAgICBjb25zdCBwYW5lbFN0cm9rZSA9IFJlY3RhbmdsZS5yb3VuZGVkQm91bmRzKCByZWN0Qm91bmRzLCBjb3JuZXJSYWRpdXMsIGNvcm5lclJhZGl1cywge1xyXG4gICAgICBzdHJva2U6IG5ldyBEZXJpdmVkUHJvcGVydHkoIFsgcmlnaHRDb2xvclByb3BlcnR5IF0sICggY29sb3IgPT4ge1xyXG4gICAgICAgIHJldHVybiBjb2xvci53aXRoQWxwaGEoIDAuNCApO1xyXG4gICAgICB9ICkgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIGxheW91dFxyXG4gICAgdGhpcy5hZGRDaGlsZCggaG9yaXpvbnRhbE5vZGUgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHZlcnRpY2FsTm9kZSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggbGlnaHRDb3JuZXIgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIGRhcmtDb3JuZXIgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHBhbmVsU3Ryb2tlICk7IC8vIE5PVEU6IHRoaXMgaXMgdGhlIHBpY2thYmxlIGNoaWxkIHVzZWQgZm9yIGhpdCB0ZXN0aW5nLiBFbnN1cmUgc29tZXRoaW5nIGlzIHBpY2thYmxlLlxyXG5cclxuICAgIHRoaXMubXV0YXRlKCBvcHRpb25zICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb3ZlcnJpZGUgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgIHRoaXMubGlnaHRlclBhaW50UHJvcGVydHkuZGlzcG9zZSgpO1xyXG4gICAgdGhpcy5saWdodFBhaW50UHJvcGVydHkuZGlzcG9zZSgpO1xyXG4gICAgdGhpcy5kYXJrUGFpbnRQcm9wZXJ0eS5kaXNwb3NlKCk7XHJcbiAgICB0aGlzLmRhcmtlclBhaW50UHJvcGVydHkuZGlzcG9zZSgpO1xyXG5cclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcbn1cclxuXHJcbnNjZW5lcnlQaGV0LnJlZ2lzdGVyKCAnU2hhZGVkUmVjdGFuZ2xlJywgU2hhZGVkUmVjdGFuZ2xlICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGVBQWUsTUFBTSxrQ0FBa0M7QUFFOUQsU0FBU0MsS0FBSyxRQUFRLDBCQUEwQjtBQUNoRCxPQUFPQyxTQUFTLE1BQU0saUNBQWlDO0FBQ3ZELFNBQVNDLEtBQUssRUFBVUMsY0FBYyxFQUFFQyxJQUFJLEVBQWVDLGtCQUFrQixFQUFFQyxJQUFJLEVBQUVDLGNBQWMsRUFBRUMsU0FBUyxRQUFRLDZCQUE2QjtBQUNuSixPQUFPQyxXQUFXLE1BQU0sa0JBQWtCO0FBcUIxQyxl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