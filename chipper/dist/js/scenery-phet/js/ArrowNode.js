// Copyright 2013-2022, University of Colorado Boulder

/**
 * A single- or double-headed arrow. This is a convenience class, most of the work is done in ArrowShape.
 *
 * @author John Blanco
 * @author Chris Malley (PixelZoom, Inc.)
 * @author Aaron Davis
 * @author Sam Reid (PhET Interactive Simulations)
 */

import { Shape } from '../../kite/js/imports.js';
import InstanceRegistry from '../../phet-core/js/documentation/InstanceRegistry.js';
import optionize from '../../phet-core/js/optionize.js';
import { Path } from '../../scenery/js/imports.js';
import Tandem from '../../tandem/js/Tandem.js';
import ArrowShape from './ArrowShape.js';
import sceneryPhet from './sceneryPhet.js';
export default class ArrowNode extends Path {
  // Get these fields using ES5 getters.
  constructor(tailX, tailY, tipX, tipY, providedOptions) {
    // default options
    const options = optionize()({
      headHeight: 10,
      headWidth: 10,
      tailWidth: 5,
      isHeadDynamic: false,
      scaleTailToo: false,
      fractionalHeadHeight: 0.5,
      // head will be scaled when headHeight is greater than fractionalHeadHeight * arrow length
      doubleHead: false,
      // true puts heads on both ends of the arrow, false puts a head at the tip

      // Path options
      fill: 'black',
      stroke: 'black',
      lineWidth: 1,
      // phet-io
      tandem: Tandem.OPTIONAL
    }, providedOptions);

    // things you're likely to mess up, add more as needed
    assert && assert(options.headWidth > options.tailWidth);
    super(null);
    this.options = options;
    this.shapePoints = [];
    this._tailX = tailX;
    this._tailY = tailY;
    this._tipX = tipX;
    this._tipY = tipY;
    this.setTailAndTip(tailX, tailY, tipX, tipY);
    this.mutate(options);

    // support for binder documentation, stripped out in builds and only runs when ?binder is specified
    assert && phet.chipper.queryParameters.binder && InstanceRegistry.registerDataURL('scenery-phet', 'ArrowNode', this);
  }

  // Set these fields using setTail, setTip, setTailAndTip.

  get tailX() {
    return this._tailX;
  }
  get tailY() {
    return this._tailY;
  }
  get tipX() {
    return this._tipX;
  }
  get tipY() {
    return this._tipY;
  }

  /**
   * Sets the tail and tip positions to update the arrow shape.
   * If the tail and tip are at the same point, the arrow is not shown.
   */
  setTailAndTip(tailX, tailY, tipX, tipY) {
    this._tailX = tailX;
    this._tailY = tailY;
    this._tipX = tipX;
    this._tipY = tipY;
    const numberOfPointsChanged = this.updateShapePoints();

    // This bit of logic is to improve performance for the case where the Shape instance can be reused
    // (if the number of points in the array is the same).
    if (!this.shape || numberOfPointsChanged) {
      this.updateShape();
    } else {
      // This is the higher-performance case where the Shape instance can be reused
      this.shape.invalidatePoints();
    }
  }

  /**
   * Initialize or update the shape. Only called if the number of points in the shape changes.
   */
  updateShape() {
    const shape = new Shape();
    if (this.shapePoints.length > 1) {
      shape.moveToPoint(this.shapePoints[0]);
      for (let i = 1; i < this.shapePoints.length; i++) {
        shape.lineToPoint(this.shapePoints[i]);
      }
      shape.close();
    }
    this.shape = shape;
  }

  /**
   * Sets the tail position.
   */
  setTail(tailX, tailY) {
    this.setTailAndTip(tailX, tailY, this._tipX, this._tipY);
  }

  /**
   * Sets the tip position.
   */
  setTip(tipX, tipY) {
    this.setTailAndTip(this._tailX, this._tailY, tipX, tipY);
  }

  /**
   * Update the internal shapePoints array which is used to populate the points in the Shape instance.
   * Returns true if the number of points in the array has changed, which would require building a new shape instance.
   */
  updateShapePoints() {
    const numberOfPoints = this.shapePoints.length;
    this.shapePoints = ArrowShape.getArrowShapePoints(this._tailX, this._tailY, this._tipX, this._tipY, this.shapePoints, this.options);
    return this.shapePoints.length !== numberOfPoints;
  }

  /**
   * Sets the tail width.
   */
  setTailWidth(tailWidth) {
    this.options.tailWidth = tailWidth;
    this.updateShapePoints();
    this.updateShape();
  }

  /**
   * Sets whether the arrow has one or two heads.
   */
  setDoubleHead(doubleHead) {
    this.options.doubleHead = doubleHead;
    this.updateShapePoints();
    this.updateShape();
  }
}
sceneryPhet.register('ArrowNode', ArrowNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTaGFwZSIsIkluc3RhbmNlUmVnaXN0cnkiLCJvcHRpb25pemUiLCJQYXRoIiwiVGFuZGVtIiwiQXJyb3dTaGFwZSIsInNjZW5lcnlQaGV0IiwiQXJyb3dOb2RlIiwiY29uc3RydWN0b3IiLCJ0YWlsWCIsInRhaWxZIiwidGlwWCIsInRpcFkiLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwiaGVhZEhlaWdodCIsImhlYWRXaWR0aCIsInRhaWxXaWR0aCIsImlzSGVhZER5bmFtaWMiLCJzY2FsZVRhaWxUb28iLCJmcmFjdGlvbmFsSGVhZEhlaWdodCIsImRvdWJsZUhlYWQiLCJmaWxsIiwic3Ryb2tlIiwibGluZVdpZHRoIiwidGFuZGVtIiwiT1BUSU9OQUwiLCJhc3NlcnQiLCJzaGFwZVBvaW50cyIsIl90YWlsWCIsIl90YWlsWSIsIl90aXBYIiwiX3RpcFkiLCJzZXRUYWlsQW5kVGlwIiwibXV0YXRlIiwicGhldCIsImNoaXBwZXIiLCJxdWVyeVBhcmFtZXRlcnMiLCJiaW5kZXIiLCJyZWdpc3RlckRhdGFVUkwiLCJudW1iZXJPZlBvaW50c0NoYW5nZWQiLCJ1cGRhdGVTaGFwZVBvaW50cyIsInNoYXBlIiwidXBkYXRlU2hhcGUiLCJpbnZhbGlkYXRlUG9pbnRzIiwibGVuZ3RoIiwibW92ZVRvUG9pbnQiLCJpIiwibGluZVRvUG9pbnQiLCJjbG9zZSIsInNldFRhaWwiLCJzZXRUaXAiLCJudW1iZXJPZlBvaW50cyIsImdldEFycm93U2hhcGVQb2ludHMiLCJzZXRUYWlsV2lkdGgiLCJzZXREb3VibGVIZWFkIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJBcnJvd05vZGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTMtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogQSBzaW5nbGUtIG9yIGRvdWJsZS1oZWFkZWQgYXJyb3cuIFRoaXMgaXMgYSBjb252ZW5pZW5jZSBjbGFzcywgbW9zdCBvZiB0aGUgd29yayBpcyBkb25lIGluIEFycm93U2hhcGUuXHJcbiAqXHJcbiAqIEBhdXRob3IgSm9obiBCbGFuY29cclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICogQGF1dGhvciBBYXJvbiBEYXZpc1xyXG4gKiBAYXV0aG9yIFNhbSBSZWlkIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxyXG4gKi9cclxuXHJcbmltcG9ydCBWZWN0b3IyIGZyb20gJy4uLy4uL2RvdC9qcy9WZWN0b3IyLmpzJztcclxuaW1wb3J0IHsgU2hhcGUgfSBmcm9tICcuLi8uLi9raXRlL2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgSW5zdGFuY2VSZWdpc3RyeSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvZG9jdW1lbnRhdGlvbi9JbnN0YW5jZVJlZ2lzdHJ5LmpzJztcclxuaW1wb3J0IG9wdGlvbml6ZSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuaW1wb3J0IHsgUGF0aCwgUGF0aE9wdGlvbnMgfSBmcm9tICcuLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xyXG5pbXBvcnQgQXJyb3dTaGFwZSBmcm9tICcuL0Fycm93U2hhcGUuanMnO1xyXG5pbXBvcnQgc2NlbmVyeVBoZXQgZnJvbSAnLi9zY2VuZXJ5UGhldC5qcyc7XHJcblxyXG50eXBlIFNlbGZPcHRpb25zID0ge1xyXG4gIGhlYWRIZWlnaHQ/OiBudW1iZXI7XHJcbiAgaGVhZFdpZHRoPzogbnVtYmVyO1xyXG4gIHRhaWxXaWR0aD86IG51bWJlcjtcclxuICBpc0hlYWREeW5hbWljPzogYm9vbGVhbjtcclxuICBzY2FsZVRhaWxUb28/OiBib29sZWFuO1xyXG5cclxuICAvLyBoZWFkIHdpbGwgYmUgc2NhbGVkIHdoZW4gaGVhZEhlaWdodCBpcyBncmVhdGVyIHRoYW4gZnJhY3Rpb25hbEhlYWRIZWlnaHQgKiBhcnJvdyBsZW5ndGhcclxuICBmcmFjdGlvbmFsSGVhZEhlaWdodD86IG51bWJlcjtcclxuXHJcbiAgLy8gdHJ1ZSBwdXRzIGhlYWRzIG9uIGJvdGggZW5kcyBvZiB0aGUgYXJyb3csIGZhbHNlIHB1dHMgYSBoZWFkIGF0IHRoZSB0aXBcclxuICBkb3VibGVIZWFkPzogYm9vbGVhbjtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIEFycm93Tm9kZU9wdGlvbnMgPSBTZWxmT3B0aW9ucyAmIFBhdGhPcHRpb25zO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXJyb3dOb2RlIGV4dGVuZHMgUGF0aCB7XHJcblxyXG4gIC8vIEdldCB0aGVzZSBmaWVsZHMgdXNpbmcgRVM1IGdldHRlcnMuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCB0YWlsWDogbnVtYmVyLCB0YWlsWTogbnVtYmVyLCB0aXBYOiBudW1iZXIsIHRpcFk6IG51bWJlciwgcHJvdmlkZWRPcHRpb25zPzogQXJyb3dOb2RlT3B0aW9ucyApIHtcclxuXHJcbiAgICAvLyBkZWZhdWx0IG9wdGlvbnNcclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8QXJyb3dOb2RlT3B0aW9ucywgU2VsZk9wdGlvbnMsIFBhdGhPcHRpb25zPigpKCB7XHJcbiAgICAgIGhlYWRIZWlnaHQ6IDEwLFxyXG4gICAgICBoZWFkV2lkdGg6IDEwLFxyXG4gICAgICB0YWlsV2lkdGg6IDUsXHJcbiAgICAgIGlzSGVhZER5bmFtaWM6IGZhbHNlLFxyXG4gICAgICBzY2FsZVRhaWxUb286IGZhbHNlLFxyXG4gICAgICBmcmFjdGlvbmFsSGVhZEhlaWdodDogMC41LCAvLyBoZWFkIHdpbGwgYmUgc2NhbGVkIHdoZW4gaGVhZEhlaWdodCBpcyBncmVhdGVyIHRoYW4gZnJhY3Rpb25hbEhlYWRIZWlnaHQgKiBhcnJvdyBsZW5ndGhcclxuICAgICAgZG91YmxlSGVhZDogZmFsc2UsIC8vIHRydWUgcHV0cyBoZWFkcyBvbiBib3RoIGVuZHMgb2YgdGhlIGFycm93LCBmYWxzZSBwdXRzIGEgaGVhZCBhdCB0aGUgdGlwXHJcblxyXG4gICAgICAvLyBQYXRoIG9wdGlvbnNcclxuICAgICAgZmlsbDogJ2JsYWNrJyxcclxuICAgICAgc3Ryb2tlOiAnYmxhY2snLFxyXG4gICAgICBsaW5lV2lkdGg6IDEsXHJcblxyXG4gICAgICAvLyBwaGV0LWlvXHJcbiAgICAgIHRhbmRlbTogVGFuZGVtLk9QVElPTkFMXHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICAvLyB0aGluZ3MgeW91J3JlIGxpa2VseSB0byBtZXNzIHVwLCBhZGQgbW9yZSBhcyBuZWVkZWRcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIG9wdGlvbnMuaGVhZFdpZHRoID4gb3B0aW9ucy50YWlsV2lkdGggKTtcclxuXHJcbiAgICBzdXBlciggbnVsbCApO1xyXG5cclxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICB0aGlzLnNoYXBlUG9pbnRzID0gW107XHJcblxyXG4gICAgdGhpcy5fdGFpbFggPSB0YWlsWDtcclxuICAgIHRoaXMuX3RhaWxZID0gdGFpbFk7XHJcbiAgICB0aGlzLl90aXBYID0gdGlwWDtcclxuICAgIHRoaXMuX3RpcFkgPSB0aXBZO1xyXG5cclxuICAgIHRoaXMuc2V0VGFpbEFuZFRpcCggdGFpbFgsIHRhaWxZLCB0aXBYLCB0aXBZICk7XHJcblxyXG4gICAgdGhpcy5tdXRhdGUoIG9wdGlvbnMgKTtcclxuXHJcbiAgICAvLyBzdXBwb3J0IGZvciBiaW5kZXIgZG9jdW1lbnRhdGlvbiwgc3RyaXBwZWQgb3V0IGluIGJ1aWxkcyBhbmQgb25seSBydW5zIHdoZW4gP2JpbmRlciBpcyBzcGVjaWZpZWRcclxuICAgIGFzc2VydCAmJiBwaGV0LmNoaXBwZXIucXVlcnlQYXJhbWV0ZXJzLmJpbmRlciAmJiBJbnN0YW5jZVJlZ2lzdHJ5LnJlZ2lzdGVyRGF0YVVSTCggJ3NjZW5lcnktcGhldCcsICdBcnJvd05vZGUnLCB0aGlzICk7XHJcbiAgfVxyXG5cclxuICAvLyBTZXQgdGhlc2UgZmllbGRzIHVzaW5nIHNldFRhaWwsIHNldFRpcCwgc2V0VGFpbEFuZFRpcC5cclxuICBwcml2YXRlIF90YWlsWDogbnVtYmVyO1xyXG5cclxuICBwdWJsaWMgZ2V0IHRhaWxYKCk6IG51bWJlciB7IHJldHVybiB0aGlzLl90YWlsWDsgfVxyXG5cclxuICBwcml2YXRlIF90YWlsWTogbnVtYmVyO1xyXG5cclxuICBwcml2YXRlIHJlYWRvbmx5IG9wdGlvbnM6IFJlcXVpcmVkPFNlbGZPcHRpb25zPjtcclxuICBwcml2YXRlIHNoYXBlUG9pbnRzOiBWZWN0b3IyW107XHJcblxyXG4gIHB1YmxpYyBnZXQgdGFpbFkoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX3RhaWxZOyB9XHJcblxyXG4gIHByaXZhdGUgX3RpcFg6IG51bWJlcjtcclxuXHJcbiAgcHVibGljIGdldCB0aXBYKCk6IG51bWJlciB7IHJldHVybiB0aGlzLl90aXBYOyB9XHJcblxyXG4gIHByaXZhdGUgX3RpcFk6IG51bWJlcjtcclxuXHJcbiAgcHVibGljIGdldCB0aXBZKCk6IG51bWJlciB7IHJldHVybiB0aGlzLl90aXBZOyB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIHRhaWwgYW5kIHRpcCBwb3NpdGlvbnMgdG8gdXBkYXRlIHRoZSBhcnJvdyBzaGFwZS5cclxuICAgKiBJZiB0aGUgdGFpbCBhbmQgdGlwIGFyZSBhdCB0aGUgc2FtZSBwb2ludCwgdGhlIGFycm93IGlzIG5vdCBzaG93bi5cclxuICAgKi9cclxuICBwdWJsaWMgc2V0VGFpbEFuZFRpcCggdGFpbFg6IG51bWJlciwgdGFpbFk6IG51bWJlciwgdGlwWDogbnVtYmVyLCB0aXBZOiBudW1iZXIgKTogdm9pZCB7XHJcblxyXG4gICAgdGhpcy5fdGFpbFggPSB0YWlsWDtcclxuICAgIHRoaXMuX3RhaWxZID0gdGFpbFk7XHJcbiAgICB0aGlzLl90aXBYID0gdGlwWDtcclxuICAgIHRoaXMuX3RpcFkgPSB0aXBZO1xyXG5cclxuICAgIGNvbnN0IG51bWJlck9mUG9pbnRzQ2hhbmdlZCA9IHRoaXMudXBkYXRlU2hhcGVQb2ludHMoKTtcclxuXHJcbiAgICAvLyBUaGlzIGJpdCBvZiBsb2dpYyBpcyB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIGZvciB0aGUgY2FzZSB3aGVyZSB0aGUgU2hhcGUgaW5zdGFuY2UgY2FuIGJlIHJldXNlZFxyXG4gICAgLy8gKGlmIHRoZSBudW1iZXIgb2YgcG9pbnRzIGluIHRoZSBhcnJheSBpcyB0aGUgc2FtZSkuXHJcbiAgICBpZiAoICF0aGlzLnNoYXBlIHx8IG51bWJlck9mUG9pbnRzQ2hhbmdlZCApIHtcclxuICAgICAgdGhpcy51cGRhdGVTaGFwZSgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcblxyXG4gICAgICAvLyBUaGlzIGlzIHRoZSBoaWdoZXItcGVyZm9ybWFuY2UgY2FzZSB3aGVyZSB0aGUgU2hhcGUgaW5zdGFuY2UgY2FuIGJlIHJldXNlZFxyXG4gICAgICB0aGlzLnNoYXBlLmludmFsaWRhdGVQb2ludHMoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEluaXRpYWxpemUgb3IgdXBkYXRlIHRoZSBzaGFwZS4gT25seSBjYWxsZWQgaWYgdGhlIG51bWJlciBvZiBwb2ludHMgaW4gdGhlIHNoYXBlIGNoYW5nZXMuXHJcbiAgICovXHJcbiAgcHJpdmF0ZSB1cGRhdGVTaGFwZSgpOiB2b2lkIHtcclxuXHJcbiAgICBjb25zdCBzaGFwZSA9IG5ldyBTaGFwZSgpO1xyXG5cclxuICAgIGlmICggdGhpcy5zaGFwZVBvaW50cy5sZW5ndGggPiAxICkge1xyXG4gICAgICBzaGFwZS5tb3ZlVG9Qb2ludCggdGhpcy5zaGFwZVBvaW50c1sgMCBdICk7XHJcbiAgICAgIGZvciAoIGxldCBpID0gMTsgaSA8IHRoaXMuc2hhcGVQb2ludHMubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgICAgc2hhcGUubGluZVRvUG9pbnQoIHRoaXMuc2hhcGVQb2ludHNbIGkgXSApO1xyXG4gICAgICB9XHJcbiAgICAgIHNoYXBlLmNsb3NlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zaGFwZSA9IHNoYXBlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0cyB0aGUgdGFpbCBwb3NpdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgc2V0VGFpbCggdGFpbFg6IG51bWJlciwgdGFpbFk6IG51bWJlciApOiB2b2lkIHtcclxuICAgIHRoaXMuc2V0VGFpbEFuZFRpcCggdGFpbFgsIHRhaWxZLCB0aGlzLl90aXBYLCB0aGlzLl90aXBZICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXRzIHRoZSB0aXAgcG9zaXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHNldFRpcCggdGlwWDogbnVtYmVyLCB0aXBZOiBudW1iZXIgKTogdm9pZCB7XHJcbiAgICB0aGlzLnNldFRhaWxBbmRUaXAoIHRoaXMuX3RhaWxYLCB0aGlzLl90YWlsWSwgdGlwWCwgdGlwWSApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlIHRoZSBpbnRlcm5hbCBzaGFwZVBvaW50cyBhcnJheSB3aGljaCBpcyB1c2VkIHRvIHBvcHVsYXRlIHRoZSBwb2ludHMgaW4gdGhlIFNoYXBlIGluc3RhbmNlLlxyXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgbnVtYmVyIG9mIHBvaW50cyBpbiB0aGUgYXJyYXkgaGFzIGNoYW5nZWQsIHdoaWNoIHdvdWxkIHJlcXVpcmUgYnVpbGRpbmcgYSBuZXcgc2hhcGUgaW5zdGFuY2UuXHJcbiAgICovXHJcbiAgcHJpdmF0ZSB1cGRhdGVTaGFwZVBvaW50cygpOiBib29sZWFuIHtcclxuICAgIGNvbnN0IG51bWJlck9mUG9pbnRzID0gdGhpcy5zaGFwZVBvaW50cy5sZW5ndGg7XHJcbiAgICB0aGlzLnNoYXBlUG9pbnRzID0gQXJyb3dTaGFwZS5nZXRBcnJvd1NoYXBlUG9pbnRzKCB0aGlzLl90YWlsWCwgdGhpcy5fdGFpbFksIHRoaXMuX3RpcFgsIHRoaXMuX3RpcFksIHRoaXMuc2hhcGVQb2ludHMsIHRoaXMub3B0aW9ucyApO1xyXG4gICAgcmV0dXJuICggdGhpcy5zaGFwZVBvaW50cy5sZW5ndGggIT09IG51bWJlck9mUG9pbnRzICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXRzIHRoZSB0YWlsIHdpZHRoLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXRUYWlsV2lkdGgoIHRhaWxXaWR0aDogbnVtYmVyICk6IHZvaWQge1xyXG4gICAgdGhpcy5vcHRpb25zLnRhaWxXaWR0aCA9IHRhaWxXaWR0aDtcclxuICAgIHRoaXMudXBkYXRlU2hhcGVQb2ludHMoKTtcclxuICAgIHRoaXMudXBkYXRlU2hhcGUoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgd2hldGhlciB0aGUgYXJyb3cgaGFzIG9uZSBvciB0d28gaGVhZHMuXHJcbiAgICovXHJcbiAgcHVibGljIHNldERvdWJsZUhlYWQoIGRvdWJsZUhlYWQ6IGJvb2xlYW4gKTogdm9pZCB7XHJcbiAgICB0aGlzLm9wdGlvbnMuZG91YmxlSGVhZCA9IGRvdWJsZUhlYWQ7XHJcbiAgICB0aGlzLnVwZGF0ZVNoYXBlUG9pbnRzKCk7XHJcbiAgICB0aGlzLnVwZGF0ZVNoYXBlKCk7XHJcbiAgfVxyXG59XHJcblxyXG5zY2VuZXJ5UGhldC5yZWdpc3RlciggJ0Fycm93Tm9kZScsIEFycm93Tm9kZSApO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0EsU0FBU0EsS0FBSyxRQUFRLDBCQUEwQjtBQUNoRCxPQUFPQyxnQkFBZ0IsTUFBTSxzREFBc0Q7QUFDbkYsT0FBT0MsU0FBUyxNQUFNLGlDQUFpQztBQUN2RCxTQUFTQyxJQUFJLFFBQXFCLDZCQUE2QjtBQUMvRCxPQUFPQyxNQUFNLE1BQU0sMkJBQTJCO0FBQzlDLE9BQU9DLFVBQVUsTUFBTSxpQkFBaUI7QUFDeEMsT0FBT0MsV0FBVyxN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