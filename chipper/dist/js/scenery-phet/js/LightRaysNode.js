// Copyright 2015-2022, University of Colorado Boulder

/**
 * Light rays that indicate brightness of a light source such as a bulb.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import Utils from '../../dot/js/Utils.js';
import { Shape } from '../../kite/js/imports.js';
import optionize from '../../phet-core/js/optionize.js';
import { Path } from '../../scenery/js/imports.js';
import Tandem from '../../tandem/js/Tandem.js';
import sceneryPhet from './sceneryPhet.js';

// constants, these are specific to bulb images
const RAYS_START_ANGLE = 3 * Math.PI / 4;
const RAYS_ARC_ANGLE = 3 * Math.PI / 2;
export default class LightRaysNode extends Path {
  constructor(bulbRadius, provideOptions) {
    assert && assert(bulbRadius > 0);
    const options = optionize()({
      // LightRaysNodeOptions
      minRays: 8,
      maxRays: 60,
      minRayLength: 0,
      maxRayLength: 200,
      longRayLineWidth: 1.5,
      // for long rays
      mediumRayLineWidth: 1,
      // for medium-length rays
      shortRayLineWidth: 0.5,
      // for short rays

      // PathOptions
      stroke: 'yellow',
      tandem: Tandem.OPTIONAL
    }, provideOptions);
    super(null);
    this.bulbRadius = bulbRadius;
    this.minRays = options.minRays;
    this.maxRays = options.maxRays;
    this.minRayLength = options.minRayLength;
    this.maxRayLength = options.maxRayLength;
    this.mediumRayLineWidth = options.mediumRayLineWidth;
    this.longRayLineWidth = options.longRayLineWidth;
    this.shortRayLineWidth = options.shortRayLineWidth;

    // Ensures there are well-defined bounds at initialization
    this.setBrightness(0);
    this.mutate(options);
  }

  /**
   * Sets the brightness, which updates the number and length of light rays.
   * @param brightness -a value in the range [0,1]
   */
  setBrightness(brightness) {
    assert && assert(brightness >= 0 && brightness <= 1);

    // number of rays is a function of brightness
    const numberOfRays = brightness === 0 ? 0 : this.minRays + Utils.roundSymmetric(brightness * (this.maxRays - this.minRays));

    // ray length is a function of brightness
    const rayLength = this.minRayLength + brightness * (this.maxRayLength - this.minRayLength);
    let angle = RAYS_START_ANGLE;
    const deltaAngle = RAYS_ARC_ANGLE / (numberOfRays - 1);

    // The ray line width is a linear function within the allowed range
    const lineWidth = Utils.linear(0.3 * this.maxRayLength, 0.6 * this.maxRayLength, this.shortRayLineWidth, this.longRayLineWidth, rayLength);
    this.lineWidth = Utils.clamp(lineWidth, this.shortRayLineWidth, this.longRayLineWidth);
    const shape = new Shape();

    // rays fill part of a circle, incrementing clockwise
    for (let i = 0, x1, x2, y1, y2; i < this.maxRays; i++) {
      if (i < numberOfRays) {
        // determine the end points of the ray
        x1 = Math.cos(angle) * this.bulbRadius;
        y1 = Math.sin(angle) * this.bulbRadius;
        x2 = Math.cos(angle) * (this.bulbRadius + rayLength);
        y2 = Math.sin(angle) * (this.bulbRadius + rayLength);
        shape.moveTo(x1, y1).lineTo(x2, y2);

        // increment the angle
        angle += deltaAngle;
      }
    }

    // Set shape to an invisible circle to maintain local bounds if there aren't any rays.
    this.setVisible(numberOfRays > 0);
    if (numberOfRays === 0) {
      shape.circle(0, 0, this.bulbRadius);
    }

    // Set the shape of the path to the shape created above
    this.setShape(shape);
  }
}
sceneryPhet.register('LightRaysNode', LightRaysNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVdGlscyIsIlNoYXBlIiwib3B0aW9uaXplIiwiUGF0aCIsIlRhbmRlbSIsInNjZW5lcnlQaGV0IiwiUkFZU19TVEFSVF9BTkdMRSIsIk1hdGgiLCJQSSIsIlJBWVNfQVJDX0FOR0xFIiwiTGlnaHRSYXlzTm9kZSIsImNvbnN0cnVjdG9yIiwiYnVsYlJhZGl1cyIsInByb3ZpZGVPcHRpb25zIiwiYXNzZXJ0Iiwib3B0aW9ucyIsIm1pblJheXMiLCJtYXhSYXlzIiwibWluUmF5TGVuZ3RoIiwibWF4UmF5TGVuZ3RoIiwibG9uZ1JheUxpbmVXaWR0aCIsIm1lZGl1bVJheUxpbmVXaWR0aCIsInNob3J0UmF5TGluZVdpZHRoIiwic3Ryb2tlIiwidGFuZGVtIiwiT1BUSU9OQUwiLCJzZXRCcmlnaHRuZXNzIiwibXV0YXRlIiwiYnJpZ2h0bmVzcyIsIm51bWJlck9mUmF5cyIsInJvdW5kU3ltbWV0cmljIiwicmF5TGVuZ3RoIiwiYW5nbGUiLCJkZWx0YUFuZ2xlIiwibGluZVdpZHRoIiwibGluZWFyIiwiY2xhbXAiLCJzaGFwZSIsImkiLCJ4MSIsIngyIiwieTEiLCJ5MiIsImNvcyIsInNpbiIsIm1vdmVUbyIsImxpbmVUbyIsInNldFZpc2libGUiLCJjaXJjbGUiLCJzZXRTaGFwZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiTGlnaHRSYXlzTm9kZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNS0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBMaWdodCByYXlzIHRoYXQgaW5kaWNhdGUgYnJpZ2h0bmVzcyBvZiBhIGxpZ2h0IHNvdXJjZSBzdWNoIGFzIGEgYnVsYi5cclxuICpcclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICovXHJcblxyXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi4vLi4vZG90L2pzL1V0aWxzLmpzJztcclxuaW1wb3J0IHsgU2hhcGUgfSBmcm9tICcuLi8uLi9raXRlL2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgb3B0aW9uaXplIGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgeyBQYXRoLCBQYXRoT3B0aW9ucyB9IGZyb20gJy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBUYW5kZW0gZnJvbSAnLi4vLi4vdGFuZGVtL2pzL1RhbmRlbS5qcyc7XHJcbmltcG9ydCBzY2VuZXJ5UGhldCBmcm9tICcuL3NjZW5lcnlQaGV0LmpzJztcclxuXHJcbi8vIGNvbnN0YW50cywgdGhlc2UgYXJlIHNwZWNpZmljIHRvIGJ1bGIgaW1hZ2VzXHJcbmNvbnN0IFJBWVNfU1RBUlRfQU5HTEUgPSAzICogTWF0aC5QSSAvIDQ7XHJcbmNvbnN0IFJBWVNfQVJDX0FOR0xFID0gMyAqIE1hdGguUEkgLyAyO1xyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IHtcclxuICBtaW5SYXlzPzogbnVtYmVyO1xyXG4gIG1heFJheXM/OiBudW1iZXI7XHJcbiAgbWluUmF5TGVuZ3RoPzogbnVtYmVyO1xyXG4gIG1heFJheUxlbmd0aD86IG51bWJlcjtcclxuICBsb25nUmF5TGluZVdpZHRoPzogbnVtYmVyOyAvLyBmb3IgbG9uZyByYXlzXHJcbiAgbWVkaXVtUmF5TGluZVdpZHRoPzogbnVtYmVyOyAvLyBmb3IgbWVkaXVtLWxlbmd0aCByYXlzXHJcbiAgc2hvcnRSYXlMaW5lV2lkdGg/OiBudW1iZXI7IC8vIGZvciBzaG9ydCByYXlzXHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBMaWdodFJheXNOb2RlT3B0aW9ucyA9IFNlbGZPcHRpb25zICYgUGF0aE9wdGlvbnM7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaWdodFJheXNOb2RlIGV4dGVuZHMgUGF0aCB7XHJcblxyXG4gIHByaXZhdGUgcmVhZG9ubHkgYnVsYlJhZGl1czogbnVtYmVyO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgbWluUmF5czogbnVtYmVyO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgbWF4UmF5czogbnVtYmVyO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgbWluUmF5TGVuZ3RoOiBudW1iZXI7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBtYXhSYXlMZW5ndGg6IG51bWJlcjtcclxuICBwcml2YXRlIHJlYWRvbmx5IGxvbmdSYXlMaW5lV2lkdGg6IG51bWJlcjtcclxuICBwcml2YXRlIHJlYWRvbmx5IG1lZGl1bVJheUxpbmVXaWR0aDogbnVtYmVyO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgc2hvcnRSYXlMaW5lV2lkdGg6IG51bWJlcjtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBidWxiUmFkaXVzOiBudW1iZXIsIHByb3ZpZGVPcHRpb25zPzogTGlnaHRSYXlzTm9kZU9wdGlvbnMgKSB7XHJcblxyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggYnVsYlJhZGl1cyA+IDAgKTtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPExpZ2h0UmF5c05vZGVPcHRpb25zLCBTZWxmT3B0aW9ucywgUGF0aE9wdGlvbnM+KCkoIHtcclxuXHJcbiAgICAgIC8vIExpZ2h0UmF5c05vZGVPcHRpb25zXHJcbiAgICAgIG1pblJheXM6IDgsXHJcbiAgICAgIG1heFJheXM6IDYwLFxyXG4gICAgICBtaW5SYXlMZW5ndGg6IDAsXHJcbiAgICAgIG1heFJheUxlbmd0aDogMjAwLFxyXG4gICAgICBsb25nUmF5TGluZVdpZHRoOiAxLjUsIC8vIGZvciBsb25nIHJheXNcclxuICAgICAgbWVkaXVtUmF5TGluZVdpZHRoOiAxLCAvLyBmb3IgbWVkaXVtLWxlbmd0aCByYXlzXHJcbiAgICAgIHNob3J0UmF5TGluZVdpZHRoOiAwLjUsIC8vIGZvciBzaG9ydCByYXlzXHJcblxyXG4gICAgICAvLyBQYXRoT3B0aW9uc1xyXG4gICAgICBzdHJva2U6ICd5ZWxsb3cnLFxyXG4gICAgICB0YW5kZW06IFRhbmRlbS5PUFRJT05BTFxyXG4gICAgfSwgcHJvdmlkZU9wdGlvbnMgKTtcclxuXHJcbiAgICBzdXBlciggbnVsbCApO1xyXG5cclxuICAgIHRoaXMuYnVsYlJhZGl1cyA9IGJ1bGJSYWRpdXM7XHJcbiAgICB0aGlzLm1pblJheXMgPSBvcHRpb25zLm1pblJheXM7XHJcbiAgICB0aGlzLm1heFJheXMgPSBvcHRpb25zLm1heFJheXM7XHJcbiAgICB0aGlzLm1pblJheUxlbmd0aCA9IG9wdGlvbnMubWluUmF5TGVuZ3RoO1xyXG4gICAgdGhpcy5tYXhSYXlMZW5ndGggPSBvcHRpb25zLm1heFJheUxlbmd0aDtcclxuICAgIHRoaXMubWVkaXVtUmF5TGluZVdpZHRoID0gb3B0aW9ucy5tZWRpdW1SYXlMaW5lV2lkdGg7XHJcbiAgICB0aGlzLmxvbmdSYXlMaW5lV2lkdGggPSBvcHRpb25zLmxvbmdSYXlMaW5lV2lkdGg7XHJcbiAgICB0aGlzLnNob3J0UmF5TGluZVdpZHRoID0gb3B0aW9ucy5zaG9ydFJheUxpbmVXaWR0aDtcclxuXHJcbiAgICAvLyBFbnN1cmVzIHRoZXJlIGFyZSB3ZWxsLWRlZmluZWQgYm91bmRzIGF0IGluaXRpYWxpemF0aW9uXHJcbiAgICB0aGlzLnNldEJyaWdodG5lc3MoIDAgKTtcclxuXHJcbiAgICB0aGlzLm11dGF0ZSggb3B0aW9ucyApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0cyB0aGUgYnJpZ2h0bmVzcywgd2hpY2ggdXBkYXRlcyB0aGUgbnVtYmVyIGFuZCBsZW5ndGggb2YgbGlnaHQgcmF5cy5cclxuICAgKiBAcGFyYW0gYnJpZ2h0bmVzcyAtYSB2YWx1ZSBpbiB0aGUgcmFuZ2UgWzAsMV1cclxuICAgKi9cclxuICBwdWJsaWMgc2V0QnJpZ2h0bmVzcyggYnJpZ2h0bmVzczogbnVtYmVyICk6IHZvaWQge1xyXG5cclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIGJyaWdodG5lc3MgPj0gMCAmJiBicmlnaHRuZXNzIDw9IDEgKTtcclxuXHJcbiAgICAvLyBudW1iZXIgb2YgcmF5cyBpcyBhIGZ1bmN0aW9uIG9mIGJyaWdodG5lc3NcclxuICAgIGNvbnN0IG51bWJlck9mUmF5cyA9ICggYnJpZ2h0bmVzcyA9PT0gMCApID8gMCA6IHRoaXMubWluUmF5cyArIFV0aWxzLnJvdW5kU3ltbWV0cmljKCBicmlnaHRuZXNzICogKCB0aGlzLm1heFJheXMgLSB0aGlzLm1pblJheXMgKSApO1xyXG5cclxuICAgIC8vIHJheSBsZW5ndGggaXMgYSBmdW5jdGlvbiBvZiBicmlnaHRuZXNzXHJcbiAgICBjb25zdCByYXlMZW5ndGggPSB0aGlzLm1pblJheUxlbmd0aCArICggYnJpZ2h0bmVzcyAqICggdGhpcy5tYXhSYXlMZW5ndGggLSB0aGlzLm1pblJheUxlbmd0aCApICk7XHJcblxyXG4gICAgbGV0IGFuZ2xlID0gUkFZU19TVEFSVF9BTkdMRTtcclxuICAgIGNvbnN0IGRlbHRhQW5nbGUgPSBSQVlTX0FSQ19BTkdMRSAvICggbnVtYmVyT2ZSYXlzIC0gMSApO1xyXG5cclxuICAgIC8vIFRoZSByYXkgbGluZSB3aWR0aCBpcyBhIGxpbmVhciBmdW5jdGlvbiB3aXRoaW4gdGhlIGFsbG93ZWQgcmFuZ2VcclxuICAgIGNvbnN0IGxpbmVXaWR0aCA9IFV0aWxzLmxpbmVhcihcclxuICAgICAgMC4zICogdGhpcy5tYXhSYXlMZW5ndGgsXHJcbiAgICAgIDAuNiAqIHRoaXMubWF4UmF5TGVuZ3RoLFxyXG4gICAgICB0aGlzLnNob3J0UmF5TGluZVdpZHRoLFxyXG4gICAgICB0aGlzLmxvbmdSYXlMaW5lV2lkdGgsXHJcbiAgICAgIHJheUxlbmd0aFxyXG4gICAgKTtcclxuICAgIHRoaXMubGluZVdpZHRoID0gVXRpbHMuY2xhbXAoIGxpbmVXaWR0aCwgdGhpcy5zaG9ydFJheUxpbmVXaWR0aCwgdGhpcy5sb25nUmF5TGluZVdpZHRoICk7XHJcblxyXG4gICAgY29uc3Qgc2hhcGUgPSBuZXcgU2hhcGUoKTtcclxuXHJcbiAgICAvLyByYXlzIGZpbGwgcGFydCBvZiBhIGNpcmNsZSwgaW5jcmVtZW50aW5nIGNsb2Nrd2lzZVxyXG4gICAgZm9yICggbGV0IGkgPSAwLCB4MSwgeDIsIHkxLCB5MjsgaSA8IHRoaXMubWF4UmF5czsgaSsrICkge1xyXG4gICAgICBpZiAoIGkgPCBudW1iZXJPZlJheXMgKSB7XHJcblxyXG4gICAgICAgIC8vIGRldGVybWluZSB0aGUgZW5kIHBvaW50cyBvZiB0aGUgcmF5XHJcbiAgICAgICAgeDEgPSBNYXRoLmNvcyggYW5nbGUgKSAqIHRoaXMuYnVsYlJhZGl1cztcclxuICAgICAgICB5MSA9IE1hdGguc2luKCBhbmdsZSApICogdGhpcy5idWxiUmFkaXVzO1xyXG4gICAgICAgIHgyID0gTWF0aC5jb3MoIGFuZ2xlICkgKiAoIHRoaXMuYnVsYlJhZGl1cyArIHJheUxlbmd0aCApO1xyXG4gICAgICAgIHkyID0gTWF0aC5zaW4oIGFuZ2xlICkgKiAoIHRoaXMuYnVsYlJhZGl1cyArIHJheUxlbmd0aCApO1xyXG5cclxuICAgICAgICBzaGFwZS5tb3ZlVG8oIHgxLCB5MSApLmxpbmVUbyggeDIsIHkyICk7XHJcblxyXG4gICAgICAgIC8vIGluY3JlbWVudCB0aGUgYW5nbGVcclxuICAgICAgICBhbmdsZSArPSBkZWx0YUFuZ2xlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2V0IHNoYXBlIHRvIGFuIGludmlzaWJsZSBjaXJjbGUgdG8gbWFpbnRhaW4gbG9jYWwgYm91bmRzIGlmIHRoZXJlIGFyZW4ndCBhbnkgcmF5cy5cclxuICAgIHRoaXMuc2V0VmlzaWJsZSggbnVtYmVyT2ZSYXlzID4gMCApO1xyXG4gICAgaWYgKCBudW1iZXJPZlJheXMgPT09IDAgKSB7XHJcbiAgICAgIHNoYXBlLmNpcmNsZSggMCwgMCwgdGhpcy5idWxiUmFkaXVzICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2V0IHRoZSBzaGFwZSBvZiB0aGUgcGF0aCB0byB0aGUgc2hhcGUgY3JlYXRlZCBhYm92ZVxyXG4gICAgdGhpcy5zZXRTaGFwZSggc2hhcGUgKTtcclxuICB9XHJcbn1cclxuXHJcbnNjZW5lcnlQaGV0LnJlZ2lzdGVyKCAnTGlnaHRSYXlzTm9kZScsIExpZ2h0UmF5c05vZGUgKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsS0FBSyxNQUFNLHVCQUF1QjtBQUN6QyxTQUFTQyxLQUFLLFFBQVEsMEJBQTBCO0FBQ2hELE9BQU9DLFNBQVMsTUFBTSxpQ0FBaUM7QUFDdkQsU0FBU0MsSUFBSSxRQUFxQiw2QkFBNkI7QUFDL0QsT0FBT0MsTUFBTSxNQUFNLDJCQUEyQjtBQUM5QyxPQUFPQyxXQUFXLE1BQU0sa0JBQWtCOztBQUUxQztBQUNBLE1BQU1DLGdCQUFnQixHQUFHLENBQUMsR0FBR0MsSUFBSSxDQUFDQyxFQUFFLEdBQUcsQ0FBQztBQUN4QyxNQUFNQyxjQUFjLEdBQUcsQ0FBQyxHQUFHRixJQUFJLENBQUNDLEVBQUUsR0FBRyxDQUFDO0FBY3RDLGVBQWUsTUFBTUUsYUFBYSxTQUFTUCxJQUFJLENBQUM7RUFXdkNRLFdBQVdBLENBQUVDLFVBQWtCLEVBQUVDLGNBQXFDLEVBQUc7SUFFOUVDLE1BQU0sSUFBSUEsTUFBTSxDQUFFRixVQUFVLEdBQUcsQ0FBRSxDQUFDO0lBRWxDLE1BQU1HLE9BQU8sR0FBR2IsU0FBUyxDQUFpRCxDQUFDLENBQUU7TUFFM0U7TUFDQWMsT0FBTyxFQUFFLENBQUM7TUFDVkMsT0FBTyxFQUFFLEVBQUU7TUFDWEMsWUFBWSxFQUFFLENBQUM7TUFDZkMsWUFBWSxFQUFFLEdBQUc7TUFDakJDLGdCQUFnQixFQUFFLEdBQUc7TUFBRTtNQUN2QkMsa0JBQWtCLEVBQUUsQ0FBQztNQUFFO01BQ3ZCQyxpQkFBaUIsRUFBRSxHQUFHO01BQUU7O01BRXhCO01BQ0FDLE1BQU0sRUFBRSxRQUFRO01BQ2hCQyxNQUFNLEVBQUVwQixNQUFNLENBQUNxQjtJQUNqQixDQUFDLEVBQUVaLGNBQWUsQ0FBQztJQUVuQixLQUFLLENBQUUsSUFBSyxDQUFDO0lBRWIsSUFBSSxDQUFDRCxVQUFVLEdBQUdBLFVBQVU7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