// Copyright 2017-2023, University of Colorado Boulder

/**
 * Content for a KeyboardHelpDialog that describes how to use sliders.
 *
 * @author Jesse Greenberg
 */

import PatternStringProperty from '../../../../axon/js/PatternStringProperty.js';
import Enumeration from '../../../../phet-core/js/Enumeration.js';
import EnumerationValue from '../../../../phet-core/js/EnumerationValue.js';
import optionize from '../../../../phet-core/js/optionize.js';
import { HBox } from '../../../../scenery/js/imports.js';
import sceneryPhet from '../../sceneryPhet.js';
import SceneryPhetStrings from '../../SceneryPhetStrings.js';
import TextKeyNode from '../TextKeyNode.js';
import KeyboardHelpIconFactory from './KeyboardHelpIconFactory.js';
import KeyboardHelpSection from './KeyboardHelpSection.js';
import KeyboardHelpSectionRow from './KeyboardHelpSectionRow.js';

// Configurations of arrow keys that can be displayed for 'Move between items in a group'
class ArrowKeyIconDisplay extends EnumerationValue {
  static UP_DOWN = new ArrowKeyIconDisplay();
  static LEFT_RIGHT = new ArrowKeyIconDisplay();
  static BOTH = new ArrowKeyIconDisplay();
  static enumeration = new Enumeration(ArrowKeyIconDisplay);
}
export default class SliderControlsKeyboardHelpSection extends KeyboardHelpSection {
  static ArrowKeyIconDisplay = ArrowKeyIconDisplay;
  constructor(providedOptions) {
    const options = optionize()({
      arrowKeyIconDisplay: ArrowKeyIconDisplay.BOTH,
      headingStringProperty: SceneryPhetStrings.keyboardHelpDialog.sliderControlsStringProperty,
      verbStringProperty: SceneryPhetStrings.keyboardHelpDialog.adjustStringProperty,
      sliderStringProperty: SceneryPhetStrings.keyboardHelpDialog.sliderStringProperty,
      maximumStringProperty: SceneryPhetStrings.keyboardHelpDialog.maximumStringProperty,
      minimumStringProperty: SceneryPhetStrings.keyboardHelpDialog.minimumStringProperty
    }, providedOptions);
    const keyboardHelpDialogVerbSliderStringProperty = new PatternStringProperty(SceneryPhetStrings.keyboardHelpDialog.verbSliderPatternStringProperty, {
      verb: options.verbStringProperty,
      slider: options.sliderStringProperty
    });
    const keyboardHelpDialogVerbInSmallerStepsStringProperty = new PatternStringProperty(SceneryPhetStrings.keyboardHelpDialog.verbInSmallerStepsPatternStringProperty, {
      verb: options.verbStringProperty
    });
    const keyboardHelpDialogVerbInLargerStepsStringProperty = new PatternStringProperty(SceneryPhetStrings.keyboardHelpDialog.verbInLargerStepsPatternStringProperty, {
      verb: options.verbStringProperty
    });
    const keysStringProperty = options.arrowKeyIconDisplay === ArrowKeyIconDisplay.LEFT_RIGHT ? SceneryPhetStrings.a11y.keyboardHelpDialog.slider.leftRightArrowKeysStringProperty : options.arrowKeyIconDisplay === ArrowKeyIconDisplay.UP_DOWN ? SceneryPhetStrings.a11y.keyboardHelpDialog.slider.upDownArrowKeysStringProperty : options.arrowKeyIconDisplay === ArrowKeyIconDisplay.BOTH ? new PatternStringProperty(SceneryPhetStrings.a11y.keyboardHelpDialog.slider.orKeysPatternStringProperty, {
      leftRight: SceneryPhetStrings.a11y.keyboardHelpDialog.slider.leftRightArrowKeysStringProperty,
      upDown: SceneryPhetStrings.a11y.keyboardHelpDialog.slider.upDownArrowKeysStringProperty
    }) : null;
    assert && assert(keysStringProperty);
    const keyboardHelpDialogDefaultStepsStringProperty = new PatternStringProperty(SceneryPhetStrings.a11y.keyboardHelpDialog.slider.defaultStepsDescriptionPatternStringProperty, {
      verb: options.verbStringProperty,
      slider: options.sliderStringProperty,
      keys: keysStringProperty
    });
    const shiftKeysStringProperty = options.arrowKeyIconDisplay === ArrowKeyIconDisplay.LEFT_RIGHT ? SceneryPhetStrings.a11y.keyboardHelpDialog.slider.shiftLeftRightArrowKeysStringProperty : options.arrowKeyIconDisplay === ArrowKeyIconDisplay.UP_DOWN ? SceneryPhetStrings.a11y.keyboardHelpDialog.slider.shiftUpDownArrowKeysStringProperty : options.arrowKeyIconDisplay === ArrowKeyIconDisplay.BOTH ? new PatternStringProperty(SceneryPhetStrings.a11y.keyboardHelpDialog.slider.orKeysPatternStringProperty, {
      leftRight: SceneryPhetStrings.a11y.keyboardHelpDialog.slider.shiftLeftRightArrowKeysStringProperty,
      upDown: SceneryPhetStrings.a11y.keyboardHelpDialog.slider.shiftUpDownArrowKeysStringProperty
    }) : null;
    assert && assert(shiftKeysStringProperty);
    const keyboardHelpDialogSmallerStepsStringProperty = new PatternStringProperty(SceneryPhetStrings.a11y.keyboardHelpDialog.slider.smallerStepsDescriptionPatternStringProperty, {
      verb: options.verbStringProperty,
      keys: shiftKeysStringProperty
    });
    const keyboardHelpDialogLargerStepsStringProperty = new PatternStringProperty(SceneryPhetStrings.a11y.keyboardHelpDialog.slider.largerStepsDescriptionPatternStringProperty, {
      verb: options.verbStringProperty
    });
    const jumpToMinimumStringProperty = new PatternStringProperty(SceneryPhetStrings.keyboardHelpDialog.jumpToMinimumPatternStringProperty, {
      minimum: options.minimumStringProperty
    });
    const jumpToMaximumStringProperty = new PatternStringProperty(SceneryPhetStrings.keyboardHelpDialog.jumpToMaximumPatternStringProperty, {
      maximum: options.maximumStringProperty
    });
    const jumpToMinimumDescriptionStringProperty = new PatternStringProperty(SceneryPhetStrings.a11y.keyboardHelpDialog.slider.jumpToMinimumDescriptionPatternStringProperty, {
      minimum: options.minimumStringProperty
    });
    const jumpToMaximumDescriptionStringProperty = new PatternStringProperty(SceneryPhetStrings.a11y.keyboardHelpDialog.slider.jumpToMaximumDescriptionPatternStringProperty, {
      maximum: options.maximumStringProperty
    });

    // 'Move sliders' content

    const leftRightArrowKeysRowIcon = KeyboardHelpIconFactory.leftRightArrowKeysRowIcon();
    const shiftPlusLeftRightIcon = KeyboardHelpIconFactory.shiftPlusIcon(leftRightArrowKeysRowIcon);
    const upDownArrowKeysRowIcon = KeyboardHelpIconFactory.upDownArrowKeysRowIcon();
    const shiftPlusUpDownIcon = KeyboardHelpIconFactory.shiftPlusIcon(upDownArrowKeysRowIcon);
    const leftRightOrUpDownIcon = KeyboardHelpIconFactory.iconOrIcon(leftRightArrowKeysRowIcon, upDownArrowKeysRowIcon);
    let adjustSliderIcon = null;
    let adjustSliderSmallerStepsIcons = null;
    switch (options.arrowKeyIconDisplay) {
      case ArrowKeyIconDisplay.LEFT_RIGHT:
        adjustSliderIcon = leftRightArrowKeysRowIcon;
        adjustSliderSmallerStepsIcons = [shiftPlusLeftRightIcon];
        break;
      case ArrowKeyIconDisplay.UP_DOWN:
        adjustSliderIcon = upDownArrowKeysRowIcon;
        adjustSliderSmallerStepsIcons = [shiftPlusUpDownIcon];
        break;
      default:
        assert && assert(options.arrowKeyIconDisplay === ArrowKeyIconDisplay.BOTH, 'unsupported arrowKeyIconDisplay');
        adjustSliderIcon = leftRightOrUpDownIcon;
        adjustSliderSmallerStepsIcons = [shiftPlusLeftRightIcon, shiftPlusUpDownIcon];
    }
    const adjustSliderRow = KeyboardHelpSectionRow.labelWithIcon(keyboardHelpDialogVerbSliderStringProperty, adjustSliderIcon, {
      labelInnerContent: keyboardHelpDialogDefaultStepsStringProperty
    });
    const adjustSliderInSmallerStepsRow = KeyboardHelpSectionRow.labelWithIconList(keyboardHelpDialogVerbInSmallerStepsStringProperty, adjustSliderSmallerStepsIcons, {
      labelInnerContent: keyboardHelpDialogSmallerStepsStringProperty
    });

    // 'move in larger steps' content
    const pageUpKeyNode = TextKeyNode.pageUp();
    const pageDownKeyNode = TextKeyNode.pageDown();
    const pageUpPageDownIcon = new HBox({
      children: [pageUpKeyNode, pageDownKeyNode],
      spacing: KeyboardHelpIconFactory.DEFAULT_ICON_SPACING
    });
    const adjustInLargerStepsRow = KeyboardHelpSectionRow.labelWithIcon(keyboardHelpDialogVerbInLargerStepsStringProperty, pageUpPageDownIcon, {
      labelInnerContent: keyboardHelpDialogLargerStepsStringProperty
    });

    // 'move to minimum value' content
    const homeKeyNode = TextKeyNode.home();
    const jumpToMinimumRow = KeyboardHelpSectionRow.labelWithIcon(jumpToMinimumStringProperty, homeKeyNode, {
      labelInnerContent: jumpToMinimumDescriptionStringProperty
    });

    // 'move to maximum value' content
    const endKeyNode = TextKeyNode.end();
    const jumpToMaximumRow = KeyboardHelpSectionRow.labelWithIcon(jumpToMaximumStringProperty, endKeyNode, {
      labelInnerContent: jumpToMaximumDescriptionStringProperty
    });

    // assemble final content for KeyboardHelpSection
    const content = [adjustSliderRow, adjustSliderInSmallerStepsRow, adjustInLargerStepsRow, jumpToMinimumRow, jumpToMaximumRow];
    super(options.headingStringProperty, content, options);
    this.disposeSliderControlsKeyboardHelpSection = () => {
      content.forEach(row => row.dispose());
      keyboardHelpDialogVerbSliderStringProperty.dispose();
      keyboardHelpDialogVerbInSmallerStepsStringProperty.dispose();
      keyboardHelpDialogVerbInLargerStepsStringProperty.dispose();
      keyboardHelpDialogDefaultStepsStringProperty.dispose();
      keyboardHelpDialogSmallerStepsStringProperty.dispose();
      keyboardHelpDialogLargerStepsStringProperty.dispose();
      jumpToMinimumStringProperty.dispose();
      jumpToMaximumStringProperty.dispose();
      jumpToMinimumDescriptionStringProperty.dispose();
      jumpToMaximumDescriptionStringProperty.dispose();
      homeKeyNode.dispose();
      endKeyNode.dispose();
      pageUpKeyNode.dispose();
      pageDownKeyNode.dispose();
      leftRightArrowKeysRowIcon.dispose();
      shiftPlusLeftRightIcon.dispose();
      upDownArrowKeysRowIcon.dispose();
      shiftPlusUpDownIcon.dispose();
      leftRightOrUpDownIcon.dispose();
      [shiftKeysStringProperty, keysStringProperty].forEach(property => {
        // We only own these for disposal if a PatternStringProperty
        property instanceof PatternStringProperty && property.dispose();
      });
    };
  }
  dispose() {
    this.disposeSliderControlsKeyboardHelpSection();
    super.dispose();
  }
}
sceneryPhet.register('SliderControlsKeyboardHelpSection', SliderControlsKeyboardHelpSection);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQYXR0ZXJuU3RyaW5nUHJvcGVydHkiLCJFbnVtZXJhdGlvbiIsIkVudW1lcmF0aW9uVmFsdWUiLCJvcHRpb25pemUiLCJIQm94Iiwic2NlbmVyeVBoZXQiLCJTY2VuZXJ5UGhldFN0cmluZ3MiLCJUZXh0S2V5Tm9kZSIsIktleWJvYXJkSGVscEljb25GYWN0b3J5IiwiS2V5Ym9hcmRIZWxwU2VjdGlvbiIsIktleWJvYXJkSGVscFNlY3Rpb25Sb3ciLCJBcnJvd0tleUljb25EaXNwbGF5IiwiVVBfRE9XTiIsIkxFRlRfUklHSFQiLCJCT1RIIiwiZW51bWVyYXRpb24iLCJTbGlkZXJDb250cm9sc0tleWJvYXJkSGVscFNlY3Rpb24iLCJjb25zdHJ1Y3RvciIsInByb3ZpZGVkT3B0aW9ucyIsIm9wdGlvbnMiLCJhcnJvd0tleUljb25EaXNwbGF5IiwiaGVhZGluZ1N0cmluZ1Byb3BlcnR5Iiwia2V5Ym9hcmRIZWxwRGlhbG9nIiwic2xpZGVyQ29udHJvbHNTdHJpbmdQcm9wZXJ0eSIsInZlcmJTdHJpbmdQcm9wZXJ0eSIsImFkanVzdFN0cmluZ1Byb3BlcnR5Iiwic2xpZGVyU3RyaW5nUHJvcGVydHkiLCJtYXhpbXVtU3RyaW5nUHJvcGVydHkiLCJtaW5pbXVtU3RyaW5nUHJvcGVydHkiLCJrZXlib2FyZEhlbHBEaWFsb2dWZXJiU2xpZGVyU3RyaW5nUHJvcGVydHkiLCJ2ZXJiU2xpZGVyUGF0dGVyblN0cmluZ1Byb3BlcnR5IiwidmVyYiIsInNsaWRlciIsImtleWJvYXJkSGVscERpYWxvZ1ZlcmJJblNtYWxsZXJTdGVwc1N0cmluZ1Byb3BlcnR5IiwidmVyYkluU21hbGxlclN0ZXBzUGF0dGVyblN0cmluZ1Byb3BlcnR5Iiwia2V5Ym9hcmRIZWxwRGlhbG9nVmVyYkluTGFyZ2VyU3RlcHNTdHJpbmdQcm9wZXJ0eSIsInZlcmJJbkxhcmdlclN0ZXBzUGF0dGVyblN0cmluZ1Byb3BlcnR5Iiwia2V5c1N0cmluZ1Byb3BlcnR5IiwiYTExeSIsImxlZnRSaWdodEFycm93S2V5c1N0cmluZ1Byb3BlcnR5IiwidXBEb3duQXJyb3dLZXlzU3RyaW5nUHJvcGVydHkiLCJvcktleXNQYXR0ZXJuU3RyaW5nUHJvcGVydHkiLCJsZWZ0UmlnaHQiLCJ1cERvd24iLCJhc3NlcnQiLCJrZXlib2FyZEhlbHBEaWFsb2dEZWZhdWx0U3RlcHNTdHJpbmdQcm9wZXJ0eSIsImRlZmF1bHRTdGVwc0Rlc2NyaXB0aW9uUGF0dGVyblN0cmluZ1Byb3BlcnR5Iiwia2V5cyIsInNoaWZ0S2V5c1N0cmluZ1Byb3BlcnR5Iiwic2hpZnRMZWZ0UmlnaHRBcnJvd0tleXNTdHJpbmdQcm9wZXJ0eSIsInNoaWZ0VXBEb3duQXJyb3dLZXlzU3RyaW5nUHJvcGVydHkiLCJrZXlib2FyZEhlbHBEaWFsb2dTbWFsbGVyU3RlcHNTdHJpbmdQcm9wZXJ0eSIsInNtYWxsZXJTdGVwc0Rlc2NyaXB0aW9uUGF0dGVyblN0cmluZ1Byb3BlcnR5Iiwia2V5Ym9hcmRIZWxwRGlhbG9nTGFyZ2VyU3RlcHNTdHJpbmdQcm9wZXJ0eSIsImxhcmdlclN0ZXBzRGVzY3JpcHRpb25QYXR0ZXJuU3RyaW5nUHJvcGVydHkiLCJqdW1wVG9NaW5pbXVtU3RyaW5nUHJvcGVydHkiLCJqdW1wVG9NaW5pbXVtUGF0dGVyblN0cmluZ1Byb3BlcnR5IiwibWluaW11bSIsImp1bXBUb01heGltdW1TdHJpbmdQcm9wZXJ0eSIsImp1bXBUb01heGltdW1QYXR0ZXJuU3RyaW5nUHJvcGVydHkiLCJtYXhpbXVtIiwianVtcFRvTWluaW11bURlc2NyaXB0aW9uU3RyaW5nUHJvcGVydHkiLCJqdW1wVG9NaW5pbXVtRGVzY3JpcHRpb25QYXR0ZXJuU3RyaW5nUHJvcGVydHkiLCJqdW1wVG9NYXhpbXVtRGVzY3JpcHRpb25TdHJpbmdQcm9wZXJ0eSIsImp1bXBUb01heGltdW1EZXNjcmlwdGlvblBhdHRlcm5TdHJpbmdQcm9wZXJ0eSIsImxlZnRSaWdodEFycm93S2V5c1Jvd0ljb24iLCJzaGlmdFBsdXNMZWZ0UmlnaHRJY29uIiwic2hpZnRQbHVzSWNvbiIsInVwRG93bkFycm93S2V5c1Jvd0ljb24iLCJzaGlmdFBsdXNVcERvd25JY29uIiwibGVmdFJpZ2h0T3JVcERvd25JY29uIiwiaWNvbk9ySWNvbiIsImFkanVzdFNsaWRlckljb24iLCJhZGp1c3RTbGlkZXJTbWFsbGVyU3RlcHNJY29ucyIsImFkanVzdFNsaWRlclJvdyIsImxhYmVsV2l0aEljb24iLCJsYWJlbElubmVyQ29udGVudCIsImFkanVzdFNsaWRlckluU21hbGxlclN0ZXBzUm93IiwibGFiZWxXaXRoSWNvbkxpc3QiLCJwYWdlVXBLZXlOb2RlIiwicGFnZVVwIiwicGFnZURvd25LZXlOb2RlIiwicGFnZURvd24iLCJwYWdlVXBQYWdlRG93bkljb24iLCJjaGlsZHJlbiIsInNwYWNpbmciLCJERUZBVUxUX0lDT05fU1BBQ0lORyIsImFkanVzdEluTGFyZ2VyU3RlcHNSb3ciLCJob21lS2V5Tm9kZSIsImhvbWUiLCJqdW1wVG9NaW5pbXVtUm93IiwiZW5kS2V5Tm9kZSIsImVuZCIsImp1bXBUb01heGltdW1Sb3ciLCJjb250ZW50IiwiZGlzcG9zZVNsaWRlckNvbnRyb2xzS2V5Ym9hcmRIZWxwU2VjdGlvbiIsImZvckVhY2giLCJyb3ciLCJkaXNwb3NlIiwicHJvcGVydHkiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlNsaWRlckNvbnRyb2xzS2V5Ym9hcmRIZWxwU2VjdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNy0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBDb250ZW50IGZvciBhIEtleWJvYXJkSGVscERpYWxvZyB0aGF0IGRlc2NyaWJlcyBob3cgdG8gdXNlIHNsaWRlcnMuXHJcbiAqXHJcbiAqIEBhdXRob3IgSmVzc2UgR3JlZW5iZXJnXHJcbiAqL1xyXG5cclxuaW1wb3J0IFBhdHRlcm5TdHJpbmdQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1BhdHRlcm5TdHJpbmdQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBUUmVhZE9ubHlQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1RSZWFkT25seVByb3BlcnR5LmpzJztcclxuaW1wb3J0IEVudW1lcmF0aW9uIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9FbnVtZXJhdGlvbi5qcyc7XHJcbmltcG9ydCBFbnVtZXJhdGlvblZhbHVlIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9FbnVtZXJhdGlvblZhbHVlLmpzJztcclxuaW1wb3J0IG9wdGlvbml6ZSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuaW1wb3J0IHsgSEJveCB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBzY2VuZXJ5UGhldCBmcm9tICcuLi8uLi9zY2VuZXJ5UGhldC5qcyc7XHJcbmltcG9ydCBTY2VuZXJ5UGhldFN0cmluZ3MgZnJvbSAnLi4vLi4vU2NlbmVyeVBoZXRTdHJpbmdzLmpzJztcclxuaW1wb3J0IFRleHRLZXlOb2RlIGZyb20gJy4uL1RleHRLZXlOb2RlLmpzJztcclxuaW1wb3J0IEtleWJvYXJkSGVscEljb25GYWN0b3J5IGZyb20gJy4vS2V5Ym9hcmRIZWxwSWNvbkZhY3RvcnkuanMnO1xyXG5pbXBvcnQgS2V5Ym9hcmRIZWxwU2VjdGlvbiwgeyBLZXlib2FyZEhlbHBTZWN0aW9uT3B0aW9ucyB9IGZyb20gJy4vS2V5Ym9hcmRIZWxwU2VjdGlvbi5qcyc7XHJcbmltcG9ydCBLZXlib2FyZEhlbHBTZWN0aW9uUm93IGZyb20gJy4vS2V5Ym9hcmRIZWxwU2VjdGlvblJvdy5qcyc7XHJcblxyXG4vLyBDb25maWd1cmF0aW9ucyBvZiBhcnJvdyBrZXlzIHRoYXQgY2FuIGJlIGRpc3BsYXllZCBmb3IgJ01vdmUgYmV0d2VlbiBpdGVtcyBpbiBhIGdyb3VwJ1xyXG5jbGFzcyBBcnJvd0tleUljb25EaXNwbGF5IGV4dGVuZHMgRW51bWVyYXRpb25WYWx1ZSB7XHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBVUF9ET1dOID0gbmV3IEFycm93S2V5SWNvbkRpc3BsYXkoKTtcclxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IExFRlRfUklHSFQgPSBuZXcgQXJyb3dLZXlJY29uRGlzcGxheSgpO1xyXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgQk9USCA9IG5ldyBBcnJvd0tleUljb25EaXNwbGF5KCk7XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgZW51bWVyYXRpb24gPSBuZXcgRW51bWVyYXRpb24oIEFycm93S2V5SWNvbkRpc3BsYXkgKTtcclxufVxyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IHtcclxuXHJcbiAgLy8gV2hldGhlciB0byBzaG93IHVwL2Rvd24sIGxlZnQvcmlnaHQgb3IgYm90aCBzZXRzIG9mIGtleWJvYXJkIGhlbHAgaWNvbnMgdG8gY3VlIHRoZSBzbGlkZXIgaW50ZXJhY3Rpb24uXHJcbiAgYXJyb3dLZXlJY29uRGlzcGxheT86IEFycm93S2V5SWNvbkRpc3BsYXk7XHJcblxyXG4gIC8vIGhlYWRpbmcgc3RyaW5nIGZvciB0aGlzIGNvbnRlbnRcclxuICBoZWFkaW5nU3RyaW5nUHJvcGVydHk/OiBUUmVhZE9ubHlQcm9wZXJ0eTxzdHJpbmc+O1xyXG5cclxuICAvLyB2ZXJiIHVzZWQgdG8gZGVzY3JpYmUgdGhlIG1vdmVtZW50IG9mIHRoZSBzbGlkZXJcclxuICB2ZXJiU3RyaW5nUHJvcGVydHk/OiBUUmVhZE9ubHlQcm9wZXJ0eTxzdHJpbmc+O1xyXG5cclxuICAvLyBuYW1lIHRvIGNhbGwgdGhlIHNsaWRlciAobG93ZXJjYXNlKSwgZGVmYXVsdCB0byBcInNsaWRlclwiXHJcbiAgc2xpZGVyU3RyaW5nUHJvcGVydHk/OiBUUmVhZE9ubHlQcm9wZXJ0eTxzdHJpbmc+O1xyXG5cclxuICAvLyBTdHJpbmdzIGZvciBleHRyZW1pdGllcyB0byBzdXBwb3J0IHNob3J0Y3V0cyBsaWtlIFwianVtcCB0byBtYXhpbXVtXCIgKHJlbmFtaW5nIFwibWF4aW11bVwiIGlmIGRlc2lyZWQuXHJcbiAgbWF4aW11bVN0cmluZ1Byb3BlcnR5PzogVFJlYWRPbmx5UHJvcGVydHk8c3RyaW5nPjtcclxuICBtaW5pbXVtU3RyaW5nUHJvcGVydHk/OiBUUmVhZE9ubHlQcm9wZXJ0eTxzdHJpbmc+O1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgU2xpZGVyQ29udHJvbHNLZXlib2FyZEhlbHBTZWN0aW9uT3B0aW9ucyA9IFNlbGZPcHRpb25zICYgS2V5Ym9hcmRIZWxwU2VjdGlvbk9wdGlvbnM7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTbGlkZXJDb250cm9sc0tleWJvYXJkSGVscFNlY3Rpb24gZXh0ZW5kcyBLZXlib2FyZEhlbHBTZWN0aW9uIHtcclxuXHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBBcnJvd0tleUljb25EaXNwbGF5ID0gQXJyb3dLZXlJY29uRGlzcGxheTtcclxuICBwcml2YXRlIHJlYWRvbmx5IGRpc3Bvc2VTbGlkZXJDb250cm9sc0tleWJvYXJkSGVscFNlY3Rpb246ICgpID0+IHZvaWQ7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggcHJvdmlkZWRPcHRpb25zPzogU2xpZGVyQ29udHJvbHNLZXlib2FyZEhlbHBTZWN0aW9uT3B0aW9ucyApIHtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPFNsaWRlckNvbnRyb2xzS2V5Ym9hcmRIZWxwU2VjdGlvbk9wdGlvbnMsIFNlbGZPcHRpb25zLCBLZXlib2FyZEhlbHBTZWN0aW9uT3B0aW9ucz4oKSgge1xyXG4gICAgICBhcnJvd0tleUljb25EaXNwbGF5OiBBcnJvd0tleUljb25EaXNwbGF5LkJPVEgsXHJcbiAgICAgIGhlYWRpbmdTdHJpbmdQcm9wZXJ0eTogU2NlbmVyeVBoZXRTdHJpbmdzLmtleWJvYXJkSGVscERpYWxvZy5zbGlkZXJDb250cm9sc1N0cmluZ1Byb3BlcnR5LFxyXG5cclxuICAgICAgdmVyYlN0cmluZ1Byb3BlcnR5OiBTY2VuZXJ5UGhldFN0cmluZ3Mua2V5Ym9hcmRIZWxwRGlhbG9nLmFkanVzdFN0cmluZ1Byb3BlcnR5LFxyXG4gICAgICBzbGlkZXJTdHJpbmdQcm9wZXJ0eTogU2NlbmVyeVBoZXRTdHJpbmdzLmtleWJvYXJkSGVscERpYWxvZy5zbGlkZXJTdHJpbmdQcm9wZXJ0eSxcclxuICAgICAgbWF4aW11bVN0cmluZ1Byb3BlcnR5OiBTY2VuZXJ5UGhldFN0cmluZ3Mua2V5Ym9hcmRIZWxwRGlhbG9nLm1heGltdW1TdHJpbmdQcm9wZXJ0eSxcclxuICAgICAgbWluaW11bVN0cmluZ1Byb3BlcnR5OiBTY2VuZXJ5UGhldFN0cmluZ3Mua2V5Ym9hcmRIZWxwRGlhbG9nLm1pbmltdW1TdHJpbmdQcm9wZXJ0eVxyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgY29uc3Qga2V5Ym9hcmRIZWxwRGlhbG9nVmVyYlNsaWRlclN0cmluZ1Byb3BlcnR5ID0gbmV3IFBhdHRlcm5TdHJpbmdQcm9wZXJ0eSggU2NlbmVyeVBoZXRTdHJpbmdzLmtleWJvYXJkSGVscERpYWxvZy52ZXJiU2xpZGVyUGF0dGVyblN0cmluZ1Byb3BlcnR5LCB7XHJcbiAgICAgIHZlcmI6IG9wdGlvbnMudmVyYlN0cmluZ1Byb3BlcnR5LFxyXG4gICAgICBzbGlkZXI6IG9wdGlvbnMuc2xpZGVyU3RyaW5nUHJvcGVydHlcclxuICAgIH0gKTtcclxuICAgIGNvbnN0IGtleWJvYXJkSGVscERpYWxvZ1ZlcmJJblNtYWxsZXJTdGVwc1N0cmluZ1Byb3BlcnR5ID0gbmV3IFBhdHRlcm5TdHJpbmdQcm9wZXJ0eSggU2NlbmVyeVBoZXRTdHJpbmdzLmtleWJvYXJkSGVscERpYWxvZy52ZXJiSW5TbWFsbGVyU3RlcHNQYXR0ZXJuU3RyaW5nUHJvcGVydHksIHtcclxuICAgICAgdmVyYjogb3B0aW9ucy52ZXJiU3RyaW5nUHJvcGVydHlcclxuICAgIH0gKTtcclxuICAgIGNvbnN0IGtleWJvYXJkSGVscERpYWxvZ1ZlcmJJbkxhcmdlclN0ZXBzU3RyaW5nUHJvcGVydHkgPSBuZXcgUGF0dGVyblN0cmluZ1Byb3BlcnR5KCBTY2VuZXJ5UGhldFN0cmluZ3Mua2V5Ym9hcmRIZWxwRGlhbG9nLnZlcmJJbkxhcmdlclN0ZXBzUGF0dGVyblN0cmluZ1Byb3BlcnR5LCB7XHJcbiAgICAgIHZlcmI6IG9wdGlvbnMudmVyYlN0cmluZ1Byb3BlcnR5XHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3Qga2V5c1N0cmluZ1Byb3BlcnR5ID1cclxuICAgICAgKCBvcHRpb25zLmFycm93S2V5SWNvbkRpc3BsYXkgPT09IEFycm93S2V5SWNvbkRpc3BsYXkuTEVGVF9SSUdIVCApID8gU2NlbmVyeVBoZXRTdHJpbmdzLmExMXkua2V5Ym9hcmRIZWxwRGlhbG9nLnNsaWRlci5sZWZ0UmlnaHRBcnJvd0tleXNTdHJpbmdQcm9wZXJ0eSA6XHJcbiAgICAgICggb3B0aW9ucy5hcnJvd0tleUljb25EaXNwbGF5ID09PSBBcnJvd0tleUljb25EaXNwbGF5LlVQX0RPV04gKSA/IFNjZW5lcnlQaGV0U3RyaW5ncy5hMTF5LmtleWJvYXJkSGVscERpYWxvZy5zbGlkZXIudXBEb3duQXJyb3dLZXlzU3RyaW5nUHJvcGVydHkgOlxyXG4gICAgICAoIG9wdGlvbnMuYXJyb3dLZXlJY29uRGlzcGxheSA9PT0gQXJyb3dLZXlJY29uRGlzcGxheS5CT1RIICkgP1xyXG4gICAgICBuZXcgUGF0dGVyblN0cmluZ1Byb3BlcnR5KCBTY2VuZXJ5UGhldFN0cmluZ3MuYTExeS5rZXlib2FyZEhlbHBEaWFsb2cuc2xpZGVyLm9yS2V5c1BhdHRlcm5TdHJpbmdQcm9wZXJ0eSwge1xyXG4gICAgICAgIGxlZnRSaWdodDogU2NlbmVyeVBoZXRTdHJpbmdzLmExMXkua2V5Ym9hcmRIZWxwRGlhbG9nLnNsaWRlci5sZWZ0UmlnaHRBcnJvd0tleXNTdHJpbmdQcm9wZXJ0eSxcclxuICAgICAgICB1cERvd246IFNjZW5lcnlQaGV0U3RyaW5ncy5hMTF5LmtleWJvYXJkSGVscERpYWxvZy5zbGlkZXIudXBEb3duQXJyb3dLZXlzU3RyaW5nUHJvcGVydHlcclxuICAgICAgfSApIDogbnVsbDtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIGtleXNTdHJpbmdQcm9wZXJ0eSApO1xyXG4gICAgY29uc3Qga2V5Ym9hcmRIZWxwRGlhbG9nRGVmYXVsdFN0ZXBzU3RyaW5nUHJvcGVydHkgPSBuZXcgUGF0dGVyblN0cmluZ1Byb3BlcnR5KCBTY2VuZXJ5UGhldFN0cmluZ3MuYTExeS5rZXlib2FyZEhlbHBEaWFsb2cuc2xpZGVyLmRlZmF1bHRTdGVwc0Rlc2NyaXB0aW9uUGF0dGVyblN0cmluZ1Byb3BlcnR5LCB7XHJcbiAgICAgIHZlcmI6IG9wdGlvbnMudmVyYlN0cmluZ1Byb3BlcnR5LFxyXG4gICAgICBzbGlkZXI6IG9wdGlvbnMuc2xpZGVyU3RyaW5nUHJvcGVydHksXHJcbiAgICAgIGtleXM6IGtleXNTdHJpbmdQcm9wZXJ0eVxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IHNoaWZ0S2V5c1N0cmluZ1Byb3BlcnR5ID1cclxuICAgICAgKCBvcHRpb25zLmFycm93S2V5SWNvbkRpc3BsYXkgPT09IEFycm93S2V5SWNvbkRpc3BsYXkuTEVGVF9SSUdIVCApID8gU2NlbmVyeVBoZXRTdHJpbmdzLmExMXkua2V5Ym9hcmRIZWxwRGlhbG9nLnNsaWRlci5zaGlmdExlZnRSaWdodEFycm93S2V5c1N0cmluZ1Byb3BlcnR5IDpcclxuICAgICAgKCBvcHRpb25zLmFycm93S2V5SWNvbkRpc3BsYXkgPT09IEFycm93S2V5SWNvbkRpc3BsYXkuVVBfRE9XTiApID8gU2NlbmVyeVBoZXRTdHJpbmdzLmExMXkua2V5Ym9hcmRIZWxwRGlhbG9nLnNsaWRlci5zaGlmdFVwRG93bkFycm93S2V5c1N0cmluZ1Byb3BlcnR5IDpcclxuICAgICAgKCBvcHRpb25zLmFycm93S2V5SWNvbkRpc3BsYXkgPT09IEFycm93S2V5SWNvbkRpc3BsYXkuQk9USCApID8gbmV3IFBhdHRlcm5TdHJpbmdQcm9wZXJ0eSggU2NlbmVyeVBoZXRTdHJpbmdzLmExMXkua2V5Ym9hcmRIZWxwRGlhbG9nLnNsaWRlci5vcktleXNQYXR0ZXJuU3RyaW5nUHJvcGVydHksIHtcclxuICAgICAgICBsZWZ0UmlnaHQ6IFNjZW5lcnlQaGV0U3RyaW5ncy5hMTF5LmtleWJvYXJkSGVscERpYWxvZy5zbGlkZXIuc2hpZnRMZWZ0UmlnaHRBcnJvd0tleXNTdHJpbmdQcm9wZXJ0eSxcclxuICAgICAgICB1cERvd246IFNjZW5lcnlQaGV0U3RyaW5ncy5hMTF5LmtleWJvYXJkSGVscERpYWxvZy5zbGlkZXIuc2hpZnRVcERvd25BcnJvd0tleXNTdHJpbmdQcm9wZXJ0eVxyXG4gICAgICB9ICkgOiBudWxsO1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggc2hpZnRLZXlzU3RyaW5nUHJvcGVydHkgKTtcclxuICAgIGNvbnN0IGtleWJvYXJkSGVscERpYWxvZ1NtYWxsZXJTdGVwc1N0cmluZ1Byb3BlcnR5ID0gbmV3IFBhdHRlcm5TdHJpbmdQcm9wZXJ0eSggU2NlbmVyeVBoZXRTdHJpbmdzLmExMXkua2V5Ym9hcmRIZWxwRGlhbG9nLnNsaWRlci5zbWFsbGVyU3RlcHNEZXNjcmlwdGlvblBhdHRlcm5TdHJpbmdQcm9wZXJ0eSwge1xyXG4gICAgICB2ZXJiOiBvcHRpb25zLnZlcmJTdHJpbmdQcm9wZXJ0eSxcclxuICAgICAga2V5czogc2hpZnRLZXlzU3RyaW5nUHJvcGVydHlcclxuICAgIH0gKTtcclxuICAgIGNvbnN0IGtleWJvYXJkSGVscERpYWxvZ0xhcmdlclN0ZXBzU3RyaW5nUHJvcGVydHkgPSBuZXcgUGF0dGVyblN0cmluZ1Byb3BlcnR5KCBTY2VuZXJ5UGhldFN0cmluZ3MuYTExeS5rZXlib2FyZEhlbHBEaWFsb2cuc2xpZGVyLmxhcmdlclN0ZXBzRGVzY3JpcHRpb25QYXR0ZXJuU3RyaW5nUHJvcGVydHksIHtcclxuICAgICAgdmVyYjogb3B0aW9ucy52ZXJiU3RyaW5nUHJvcGVydHlcclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCBqdW1wVG9NaW5pbXVtU3RyaW5nUHJvcGVydHkgPSBuZXcgUGF0dGVyblN0cmluZ1Byb3BlcnR5KCBTY2VuZXJ5UGhldFN0cmluZ3Mua2V5Ym9hcmRIZWxwRGlhbG9nLmp1bXBUb01pbmltdW1QYXR0ZXJuU3RyaW5nUHJvcGVydHksIHtcclxuICAgICAgbWluaW11bTogb3B0aW9ucy5taW5pbXVtU3RyaW5nUHJvcGVydHlcclxuICAgIH0gKTtcclxuICAgIGNvbnN0IGp1bXBUb01heGltdW1TdHJpbmdQcm9wZXJ0eSA9IG5ldyBQYXR0ZXJuU3RyaW5nUHJvcGVydHkoIFNjZW5lcnlQaGV0U3RyaW5ncy5rZXlib2FyZEhlbHBEaWFsb2cuanVtcFRvTWF4aW11bVBhdHRlcm5TdHJpbmdQcm9wZXJ0eSwge1xyXG4gICAgICBtYXhpbXVtOiBvcHRpb25zLm1heGltdW1TdHJpbmdQcm9wZXJ0eVxyXG4gICAgfSApO1xyXG4gICAgY29uc3QganVtcFRvTWluaW11bURlc2NyaXB0aW9uU3RyaW5nUHJvcGVydHkgPSBuZXcgUGF0dGVyblN0cmluZ1Byb3BlcnR5KCBTY2VuZXJ5UGhldFN0cmluZ3MuYTExeS5rZXlib2FyZEhlbHBEaWFsb2cuc2xpZGVyLmp1bXBUb01pbmltdW1EZXNjcmlwdGlvblBhdHRlcm5TdHJpbmdQcm9wZXJ0eSwge1xyXG4gICAgICBtaW5pbXVtOiBvcHRpb25zLm1pbmltdW1TdHJpbmdQcm9wZXJ0eVxyXG4gICAgfSApO1xyXG4gICAgY29uc3QganVtcFRvTWF4aW11bURlc2NyaXB0aW9uU3RyaW5nUHJvcGVydHkgPSBuZXcgUGF0dGVyblN0cmluZ1Byb3BlcnR5KCBTY2VuZXJ5UGhldFN0cmluZ3MuYTExeS5rZXlib2FyZEhlbHBEaWFsb2cuc2xpZGVyLmp1bXBUb01heGltdW1EZXNjcmlwdGlvblBhdHRlcm5TdHJpbmdQcm9wZXJ0eSwge1xyXG4gICAgICBtYXhpbXVtOiBvcHRpb25zLm1heGltdW1TdHJpbmdQcm9wZXJ0eVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vICdNb3ZlIHNsaWRlcnMnIGNvbnRlbnRcclxuXHJcbiAgICBjb25zdCBsZWZ0UmlnaHRBcnJvd0tleXNSb3dJY29uID0gS2V5Ym9hcmRIZWxwSWNvbkZhY3RvcnkubGVmdFJpZ2h0QXJyb3dLZXlzUm93SWNvbigpO1xyXG4gICAgY29uc3Qgc2hpZnRQbHVzTGVmdFJpZ2h0SWNvbiA9IEtleWJvYXJkSGVscEljb25GYWN0b3J5LnNoaWZ0UGx1c0ljb24oIGxlZnRSaWdodEFycm93S2V5c1Jvd0ljb24gKTtcclxuICAgIGNvbnN0IHVwRG93bkFycm93S2V5c1Jvd0ljb24gPSBLZXlib2FyZEhlbHBJY29uRmFjdG9yeS51cERvd25BcnJvd0tleXNSb3dJY29uKCk7XHJcbiAgICBjb25zdCBzaGlmdFBsdXNVcERvd25JY29uID0gS2V5Ym9hcmRIZWxwSWNvbkZhY3Rvcnkuc2hpZnRQbHVzSWNvbiggdXBEb3duQXJyb3dLZXlzUm93SWNvbiApO1xyXG4gICAgY29uc3QgbGVmdFJpZ2h0T3JVcERvd25JY29uID0gS2V5Ym9hcmRIZWxwSWNvbkZhY3RvcnkuaWNvbk9ySWNvbiggbGVmdFJpZ2h0QXJyb3dLZXlzUm93SWNvbiwgdXBEb3duQXJyb3dLZXlzUm93SWNvbiApO1xyXG5cclxuICAgIGxldCBhZGp1c3RTbGlkZXJJY29uID0gbnVsbDtcclxuICAgIGxldCBhZGp1c3RTbGlkZXJTbWFsbGVyU3RlcHNJY29ucyA9IG51bGw7XHJcblxyXG4gICAgc3dpdGNoKCBvcHRpb25zLmFycm93S2V5SWNvbkRpc3BsYXkgKSB7XHJcbiAgICAgIGNhc2UgQXJyb3dLZXlJY29uRGlzcGxheS5MRUZUX1JJR0hUOlxyXG4gICAgICAgIGFkanVzdFNsaWRlckljb24gPSBsZWZ0UmlnaHRBcnJvd0tleXNSb3dJY29uO1xyXG4gICAgICAgIGFkanVzdFNsaWRlclNtYWxsZXJTdGVwc0ljb25zID0gWyBzaGlmdFBsdXNMZWZ0UmlnaHRJY29uIF07XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgQXJyb3dLZXlJY29uRGlzcGxheS5VUF9ET1dOOlxyXG4gICAgICAgIGFkanVzdFNsaWRlckljb24gPSB1cERvd25BcnJvd0tleXNSb3dJY29uO1xyXG4gICAgICAgIGFkanVzdFNsaWRlclNtYWxsZXJTdGVwc0ljb25zID0gWyBzaGlmdFBsdXNVcERvd25JY29uIF07XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgYXNzZXJ0ICYmIGFzc2VydCggb3B0aW9ucy5hcnJvd0tleUljb25EaXNwbGF5ID09PSBBcnJvd0tleUljb25EaXNwbGF5LkJPVEgsICd1bnN1cHBvcnRlZCBhcnJvd0tleUljb25EaXNwbGF5JyApO1xyXG4gICAgICAgIGFkanVzdFNsaWRlckljb24gPSBsZWZ0UmlnaHRPclVwRG93bkljb247XHJcbiAgICAgICAgYWRqdXN0U2xpZGVyU21hbGxlclN0ZXBzSWNvbnMgPSBbIHNoaWZ0UGx1c0xlZnRSaWdodEljb24sIHNoaWZ0UGx1c1VwRG93bkljb24gXTtcclxuICAgIH1cclxuICAgIGNvbnN0IGFkanVzdFNsaWRlclJvdyA9IEtleWJvYXJkSGVscFNlY3Rpb25Sb3cubGFiZWxXaXRoSWNvbigga2V5Ym9hcmRIZWxwRGlhbG9nVmVyYlNsaWRlclN0cmluZ1Byb3BlcnR5LCBhZGp1c3RTbGlkZXJJY29uLCB7XHJcbiAgICAgIGxhYmVsSW5uZXJDb250ZW50OiBrZXlib2FyZEhlbHBEaWFsb2dEZWZhdWx0U3RlcHNTdHJpbmdQcm9wZXJ0eVxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IGFkanVzdFNsaWRlckluU21hbGxlclN0ZXBzUm93ID0gS2V5Ym9hcmRIZWxwU2VjdGlvblJvdy5sYWJlbFdpdGhJY29uTGlzdCgga2V5Ym9hcmRIZWxwRGlhbG9nVmVyYkluU21hbGxlclN0ZXBzU3RyaW5nUHJvcGVydHksXHJcbiAgICAgIGFkanVzdFNsaWRlclNtYWxsZXJTdGVwc0ljb25zLCB7XHJcbiAgICAgICAgbGFiZWxJbm5lckNvbnRlbnQ6IGtleWJvYXJkSGVscERpYWxvZ1NtYWxsZXJTdGVwc1N0cmluZ1Byb3BlcnR5XHJcbiAgICAgIH0gKTtcclxuXHJcbiAgICAvLyAnbW92ZSBpbiBsYXJnZXIgc3RlcHMnIGNvbnRlbnRcclxuICAgIGNvbnN0IHBhZ2VVcEtleU5vZGUgPSBUZXh0S2V5Tm9kZS5wYWdlVXAoKTtcclxuICAgIGNvbnN0IHBhZ2VEb3duS2V5Tm9kZSA9IFRleHRLZXlOb2RlLnBhZ2VEb3duKCk7XHJcbiAgICBjb25zdCBwYWdlVXBQYWdlRG93bkljb24gPSBuZXcgSEJveCgge1xyXG4gICAgICBjaGlsZHJlbjogWyBwYWdlVXBLZXlOb2RlLCBwYWdlRG93bktleU5vZGUgXSxcclxuICAgICAgc3BhY2luZzogS2V5Ym9hcmRIZWxwSWNvbkZhY3RvcnkuREVGQVVMVF9JQ09OX1NQQUNJTkdcclxuICAgIH0gKTtcclxuICAgIGNvbnN0IGFkanVzdEluTGFyZ2VyU3RlcHNSb3cgPSBLZXlib2FyZEhlbHBTZWN0aW9uUm93LmxhYmVsV2l0aEljb24oIGtleWJvYXJkSGVscERpYWxvZ1ZlcmJJbkxhcmdlclN0ZXBzU3RyaW5nUHJvcGVydHksIHBhZ2VVcFBhZ2VEb3duSWNvbiwge1xyXG4gICAgICBsYWJlbElubmVyQ29udGVudDoga2V5Ym9hcmRIZWxwRGlhbG9nTGFyZ2VyU3RlcHNTdHJpbmdQcm9wZXJ0eVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vICdtb3ZlIHRvIG1pbmltdW0gdmFsdWUnIGNvbnRlbnRcclxuICAgIGNvbnN0IGhvbWVLZXlOb2RlID0gVGV4dEtleU5vZGUuaG9tZSgpO1xyXG4gICAgY29uc3QganVtcFRvTWluaW11bVJvdyA9IEtleWJvYXJkSGVscFNlY3Rpb25Sb3cubGFiZWxXaXRoSWNvbigganVtcFRvTWluaW11bVN0cmluZ1Byb3BlcnR5LCBob21lS2V5Tm9kZSwge1xyXG4gICAgICBsYWJlbElubmVyQ29udGVudDoganVtcFRvTWluaW11bURlc2NyaXB0aW9uU3RyaW5nUHJvcGVydHlcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyAnbW92ZSB0byBtYXhpbXVtIHZhbHVlJyBjb250ZW50XHJcbiAgICBjb25zdCBlbmRLZXlOb2RlID0gVGV4dEtleU5vZGUuZW5kKCk7XHJcbiAgICBjb25zdCBqdW1wVG9NYXhpbXVtUm93ID0gS2V5Ym9hcmRIZWxwU2VjdGlvblJvdy5sYWJlbFdpdGhJY29uKCBqdW1wVG9NYXhpbXVtU3RyaW5nUHJvcGVydHksIGVuZEtleU5vZGUsIHtcclxuICAgICAgbGFiZWxJbm5lckNvbnRlbnQ6IGp1bXBUb01heGltdW1EZXNjcmlwdGlvblN0cmluZ1Byb3BlcnR5XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gYXNzZW1ibGUgZmluYWwgY29udGVudCBmb3IgS2V5Ym9hcmRIZWxwU2VjdGlvblxyXG4gICAgY29uc3QgY29udGVudCA9IFsgYWRqdXN0U2xpZGVyUm93LCBhZGp1c3RTbGlkZXJJblNtYWxsZXJTdGVwc1JvdywgYWRqdXN0SW5MYXJnZXJTdGVwc1JvdywganVtcFRvTWluaW11bVJvdywganVtcFRvTWF4aW11bVJvdyBdO1xyXG5cclxuICAgIHN1cGVyKCBvcHRpb25zLmhlYWRpbmdTdHJpbmdQcm9wZXJ0eSwgY29udGVudCwgb3B0aW9ucyApO1xyXG5cclxuICAgIHRoaXMuZGlzcG9zZVNsaWRlckNvbnRyb2xzS2V5Ym9hcmRIZWxwU2VjdGlvbiA9ICgpID0+IHtcclxuICAgICAgY29udGVudC5mb3JFYWNoKCByb3cgPT4gcm93LmRpc3Bvc2UoKSApO1xyXG4gICAgICBrZXlib2FyZEhlbHBEaWFsb2dWZXJiU2xpZGVyU3RyaW5nUHJvcGVydHkuZGlzcG9zZSgpO1xyXG4gICAgICBrZXlib2FyZEhlbHBEaWFsb2dWZXJiSW5TbWFsbGVyU3RlcHNTdHJpbmdQcm9wZXJ0eS5kaXNwb3NlKCk7XHJcbiAgICAgIGtleWJvYXJkSGVscERpYWxvZ1ZlcmJJbkxhcmdlclN0ZXBzU3RyaW5nUHJvcGVydHkuZGlzcG9zZSgpO1xyXG4gICAgICBrZXlib2FyZEhlbHBEaWFsb2dEZWZhdWx0U3RlcHNTdHJpbmdQcm9wZXJ0eS5kaXNwb3NlKCk7XHJcbiAgICAgIGtleWJvYXJkSGVscERpYWxvZ1NtYWxsZXJTdGVwc1N0cmluZ1Byb3BlcnR5LmRpc3Bvc2UoKTtcclxuICAgICAga2V5Ym9hcmRIZWxwRGlhbG9nTGFyZ2VyU3RlcHNTdHJpbmdQcm9wZXJ0eS5kaXNwb3NlKCk7XHJcbiAgICAgIGp1bXBUb01pbmltdW1TdHJpbmdQcm9wZXJ0eS5kaXNwb3NlKCk7XHJcbiAgICAgIGp1bXBUb01heGltdW1TdHJpbmdQcm9wZXJ0eS5kaXNwb3NlKCk7XHJcbiAgICAgIGp1bXBUb01pbmltdW1EZXNjcmlwdGlvblN0cmluZ1Byb3BlcnR5LmRpc3Bvc2UoKTtcclxuICAgICAganVtcFRvTWF4aW11bURlc2NyaXB0aW9uU3RyaW5nUHJvcGVydHkuZGlzcG9zZSgpO1xyXG4gICAgICBob21lS2V5Tm9kZS5kaXNwb3NlKCk7XHJcbiAgICAgIGVuZEtleU5vZGUuZGlzcG9zZSgpO1xyXG4gICAgICBwYWdlVXBLZXlOb2RlLmRpc3Bvc2UoKTtcclxuICAgICAgcGFnZURvd25LZXlOb2RlLmRpc3Bvc2UoKTtcclxuICAgICAgbGVmdFJpZ2h0QXJyb3dLZXlzUm93SWNvbi5kaXNwb3NlKCk7XHJcbiAgICAgIHNoaWZ0UGx1c0xlZnRSaWdodEljb24uZGlzcG9zZSgpO1xyXG4gICAgICB1cERvd25BcnJvd0tleXNSb3dJY29uLmRpc3Bvc2UoKTtcclxuICAgICAgc2hpZnRQbHVzVXBEb3duSWNvbi5kaXNwb3NlKCk7XHJcbiAgICAgIGxlZnRSaWdodE9yVXBEb3duSWNvbi5kaXNwb3NlKCk7XHJcblxyXG4gICAgICBbIHNoaWZ0S2V5c1N0cmluZ1Byb3BlcnR5LCBrZXlzU3RyaW5nUHJvcGVydHkgXS5mb3JFYWNoKCBwcm9wZXJ0eSA9PiB7XHJcblxyXG4gICAgICAgIC8vIFdlIG9ubHkgb3duIHRoZXNlIGZvciBkaXNwb3NhbCBpZiBhIFBhdHRlcm5TdHJpbmdQcm9wZXJ0eVxyXG4gICAgICAgIHByb3BlcnR5IGluc3RhbmNlb2YgUGF0dGVyblN0cmluZ1Byb3BlcnR5ICYmIHByb3BlcnR5LmRpc3Bvc2UoKTtcclxuICAgICAgfSApO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvdmVycmlkZSBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgdGhpcy5kaXNwb3NlU2xpZGVyQ29udHJvbHNLZXlib2FyZEhlbHBTZWN0aW9uKCk7XHJcbiAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgfVxyXG59XHJcblxyXG5zY2VuZXJ5UGhldC5yZWdpc3RlciggJ1NsaWRlckNvbnRyb2xzS2V5Ym9hcmRIZWxwU2VjdGlvbicsIFNsaWRlckNvbnRyb2xzS2V5Ym9hcmRIZWxwU2VjdGlvbiApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxxQkFBcUIsTUFBTSw4Q0FBOEM7QUFFaEYsT0FBT0MsV0FBVyxNQUFNLHlDQUF5QztBQUNqRSxPQUFPQyxnQkFBZ0IsTUFBTSw4Q0FBOEM7QUFDM0UsT0FBT0MsU0FBUyxNQUFNLHVDQUF1QztBQUM3RCxTQUFTQyxJQUFJLFFBQVEsbUNBQW1DO0FBQ3hELE9BQU9DLFdBQVcsTUFBTSxzQkFBc0I7QUFDOUMsT0FBT0Msa0JBQWtCLE1BQU0sNkJBQTZCO0FBQzVELE9BQU9DLFdBQVcsTUFBTSxtQkFBbUI7QUFDM0MsT0FBT0MsdUJBQXVCLE1BQU0sOEJBQThCO0FBQ2xFLE9BQU9DLG1CQUFtQixNQUFzQywwQkFBMEI7QUFDMUYsT0FBT0Msc0JBQXNCLE1BQU0sNkJBQTZCOztBQUVoRTtBQUNBLE1BQU1DLG1CQUFtQixTQUFTVCxnQkFBZ0IsQ0FBQztFQUNqRCxPQUF1QlUsT0FBTyxHQUFHLElBQUlELG1CQUFtQixDQUFDLENBQUM7RUFDMUQsT0FBdUJFLFVBQVUsR0FBRyxJQUFJRixtQkFBbUIsQ0FBQyxDQUFDO0VBQzdELE9BQXVCRyxJQUFJLEdBQUcsSUFBSUgsbUJBQW1CLENBQUMsQ0FBQztFQUV2RCxPQUF1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