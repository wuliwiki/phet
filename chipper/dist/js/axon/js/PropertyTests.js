// Copyright 2017-2022, University of Colorado Boulder

/**
 * QUnit tests for Property
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */

import Tandem from '../../tandem/js/Tandem.js';
import NumberIO from '../../tandem/js/types/NumberIO.js';
import Multilink from './Multilink.js';
import NumberProperty from './NumberProperty.js';
import Property from './Property.js';
import propertyStateHandlerSingleton from './propertyStateHandlerSingleton.js';
import PropertyStatePhase from './PropertyStatePhase.js';
QUnit.module('Property');
QUnit.test('Test unlink', assert => {
  const property = new Property(1);
  const startingPListenerCount = property['getListenerCount']();
  const a = function (a) {
    _.noop;
  };
  const b = function (b) {
    _.noop;
  };
  const c = function (c) {
    _.noop;
  };
  property.link(a);
  property.link(b);
  property.link(c);
  assert.equal(property['getListenerCount'](), 3 + startingPListenerCount, 'should have 3 observers now');
  property.unlink(b);
  assert.ok(property.hasListener(a), 'should have removed b');
  assert.ok(property.hasListener(c), 'should have removed b');
  assert.equal(property['getListenerCount'](), 2 + startingPListenerCount, 'should have removed an item');
});
QUnit.test('Test Multilink.multilink', assert => {
  const aProperty = new Property(1);
  const bProperty = new Property(2);
  let callbacks = 0;
  Multilink.multilink([aProperty, bProperty], (a, b) => {
    callbacks++;
    assert.equal(a, 1, 'first value should pass through');
    assert.equal(b, 2, 'second value should pass through');
  });
  assert.equal(callbacks, 1, 'should have called back to a multilink');
});
QUnit.test('Test Multilink.lazyMultilink', assert => {
  const aProperty = new Property(1);
  const bProperty = new Property(2);
  let callbacks = 0;
  Multilink.lazyMultilink([aProperty, bProperty], (a, b) => {
    callbacks++;
    assert.equal(a, 1);
    assert.equal(b, 2);
  });
  assert.equal(callbacks, 0, 'should not call back to a lazy multilink');
});
QUnit.test('Test defer', assert => {
  const property = new Property(0);
  let callbacks = 0;
  property.lazyLink((newValue, oldValue) => {
    callbacks++;
    assert.equal(newValue, 2, 'newValue should be the final value after the transaction');
    assert.equal(oldValue, 0, 'oldValue should be the original value before the transaction');
  });
  property.setDeferred(true);
  property.value = 1;
  property.value = 2;
  assert.equal(property.value, 0, 'should have original value');
  const update = property.setDeferred(false);
  assert.equal(callbacks, 0, 'should not call back while deferred');
  assert.equal(property.value, 2, 'should have new value');

  // @ts-expect-error .setDeferred(false) will always return () => void
  update();
  assert.equal(callbacks, 1, 'should have been called back after update');
  assert.equal(property.value, 2, 'should take final value');
});
QUnit.test('Property ID checks', assert => {
  assert.ok(new Property(1)['id'] !== new Property(1)['id'], 'Properties should have unique IDs'); // eslint-disable-line no-self-compare
});

QUnit.test('Property link parameters', assert => {
  const property = new Property(1);
  const calls = [];
  property.link((newValue, oldValue, property) => {
    calls.push({
      newValue: newValue,
      oldValue: oldValue,
      property: property
    });
  });
  property.value = 2;
  assert.ok(calls.length === 2);
  assert.ok(calls[0].newValue === 1);
  assert.ok(calls[0].oldValue === null);
  assert.ok(calls[0].property === property);
  assert.ok(calls[1].newValue === 2);
  assert.ok(calls[1].oldValue === 1);
  assert.ok(calls[1].property === property);
});

/**
 * Make sure linking attributes and unlinking attributes works on Property
 */
QUnit.test('Property.linkAttribute', assert => {
  const property = new Property(7);
  const state = {
    age: 99
  };
  const listener = age => {
    state.age = age;
  };
  property.link(listener);
  assert.equal(state.age, 7, 'link should synchronize values');
  property.value = 8;
  assert.equal(state.age, 8, 'link should update values');
  property.unlink(listener);
  property.value = 9;
  assert.equal(state.age, 8, 'state should not have changed after unlink');
});
QUnit.test('Property value validation', assert => {
  // Type that is specific to valueType tests
  class TestType {
    constructor() {
      _.noop();
    }
  }
  let property = null;
  let options = {};

  // valueType is a primitive type (typeof validation)
  options = {
    valueType: 'string'
  };
  window.assert && assert.throws(() => {
    new Property(0, {
      valueType: 'foo'
    }); // eslint-disable-line no-new
  }, 'options.valueType is invalid, expected a primitive data type');
  window.assert && assert.throws(() => {
    new Property(0, options); // eslint-disable-line no-new
  }, 'invalid initial value with options.valueType typeof validation');
  property = new Property('horizontal', options);
  property.set('vertical');
  window.assert && assert.throws(() => {
    property.set(0);
  }, 'invalid set value with options.valueType typeof validation');

  // valueType is a constructor (instanceof validation)
  options = {
    valueType: TestType
  };
  window.assert && assert.throws(() => {
    new Property(0, options); // eslint-disable-line no-new
  }, 'invalid initial value for options.valueType instanceof validation');
  property = new Property(new TestType(), options);
  property.set(new TestType());
  window.assert && assert.throws(() => {
    property.set(0);
  }, 'invalid set value with options.valueType instanceof validation');

  // validValues
  options = {
    validValues: [1, 2, 3]
  };
  window.assert && assert.throws(() => {
    // @ts-expect-error INTENTIONAL value is invalid for testing
    new Property(0, {
      validValues: 0
    }); // eslint-disable-line no-new
  }, 'options.validValues is invalid');
  window.assert && assert.throws(() => {
    new Property(0, options); // eslint-disable-line no-new
  }, 'invalid initial value with options.validValues');
  property = new Property(1, options);
  property.set(3);
  window.assert && assert.throws(() => {
    property.set(4);
  }, 'invalid set value with options.validValues');

  // isValidValues
  options = {
    isValidValue: function (value) {
      return value > 0 && value < 4;
    }
  };
  window.assert && assert.throws(() => {
    // @ts-expect-error INTENTIONAL value is invalid for testing
    new Property(0, {
      isValidValue: 0
    }); // eslint-disable-line no-new
  }, 'options.isValidValue is invalid');
  window.assert && assert.throws(() => {
    new Property(0, options); // eslint-disable-line no-new
  }, 'invalid initial value with options.isValidValue');
  property = new Property(1, options);
  property.set(3);
  window.assert && assert.throws(() => {
    property.set(4);
  }, 'invalid set value with options.isValidValue');

  // Compatible combinations of validation options, possibly redundant (not exhaustive)
  options = {
    valueType: 'string',
    validValues: ['bob', 'joe', 'sam'],
    isValidValue: function (value) {
      return value.length === 3;
    }
  };
  property = new Property('bob', options);
  window.assert && assert.throws(() => {
    property.set(0);
  }, 'invalid set value with compatible combination of validation options');
  window.assert && assert.throws(() => {
    property.set('ted');
  }, 'invalid set value with compatible combination of validation options');

  // Incompatible combinations of validation options (not exhaustive)
  // These tests will always fail on initialization, since the validation criteria are contradictory.
  options = {
    valueType: 'number',
    validValues: ['bob', 'joe', 'sam'],
    isValidValue: function (value) {
      return value.length === 4;
    }
  };
  window.assert && assert.throws(() => {
    property = new Property(0, options);
  }, 'invalid initial value with incompatible combination of validation options');
  window.assert && assert.throws(() => {
    property = new Property('bob', options);
  }, 'invalid initial value with incompatible combination of validation options');
  window.assert && assert.throws(() => {
    property = new Property('fred', options);
  }, 'invalid initial value with incompatible combination of validation options');
  assert.ok(true, 'so we have at least 1 test in this set');
});

// Tests that can only run in phet-io mode
if (Tandem.PHET_IO_ENABLED) {
  QUnit.test('Test PropertyIO toStateObject/fromStateObject', assert => {
    const done = assert.async();
    const tandem = Tandem.ROOT_TEST.createTandem('testTandemProperty');
    const phetioType = NumberProperty.NumberPropertyIO;
    const propertyValue = 123;
    const validValues = [0, 1, 2, 3, propertyValue];

    // @ts-expect-error redefining function for testing
    tandem.addPhetioObject = function (instance, options) {
      // PhET-iO operates under the assumption that nothing will access a PhetioObject until the next animation frame
      // when the object is fully constructed.  For example, Property state variables are set after the callback
      // to addPhetioObject, which occurs during Property.constructor.super().
      setTimeout(() => {
        // eslint-disable-line bad-sim-text

        // Run in the next frame after the object finished getting constructed
        const stateObject = phetioType.toStateObject(instance);
        assert.equal(stateObject.value, propertyValue, 'toStateObject should match');
        assert.deepEqual(stateObject.validValues, validValues, 'toStateObject should match');
        done();
      }, 0);
    };
    new NumberProperty(propertyValue, {
      // eslint-disable-line no-new
      tandem: tandem,
      validValues: validValues
    });
  });
  QUnit.test('propertyStateHandlerSingleton tests for Property', assert => {
    const parentTandem = Tandem.ROOT_TEST;
    const originalOrderDependencyLength = propertyStateHandlerSingleton.getNumberOfOrderDependencies();
    const getOrderDependencyLength = () => propertyStateHandlerSingleton.getNumberOfOrderDependencies() - originalOrderDependencyLength;
    const firstProperty = new Property(1, {
      tandem: parentTandem.createTandem('firstProperty'),
      phetioValueType: NumberIO
    });
    const secondProperty = new Property(1, {
      tandem: parentTandem.createTandem('secondProperty'),
      phetioValueType: NumberIO
    });
    propertyStateHandlerSingleton.registerPhetioOrderDependency(firstProperty, PropertyStatePhase.NOTIFY, secondProperty, PropertyStatePhase.UNDEFER);
    firstProperty.dispose();
    assert.ok(getOrderDependencyLength() === 0, 'dispose removes order dependency');
    const thirdProperty = new Property(1, {
      tandem: parentTandem.createTandem('thirdProperty'),
      phetioValueType: NumberIO
    });
    secondProperty.link(() => {
      thirdProperty.value = 2;
    }, {
      phetioDependencies: [thirdProperty]
    });
    assert.ok(getOrderDependencyLength() === 1, 'just added orderDependency from phetioDependencies');
    secondProperty.dispose();
    assert.ok(getOrderDependencyLength() === 0, 'dispose removes order dependency');
    thirdProperty.dispose();
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJUYW5kZW0iLCJOdW1iZXJJTyIsIk11bHRpbGluayIsIk51bWJlclByb3BlcnR5IiwiUHJvcGVydHkiLCJwcm9wZXJ0eVN0YXRlSGFuZGxlclNpbmdsZXRvbiIsIlByb3BlcnR5U3RhdGVQaGFzZSIsIlFVbml0IiwibW9kdWxlIiwidGVzdCIsImFzc2VydCIsInByb3BlcnR5Iiwic3RhcnRpbmdQTGlzdGVuZXJDb3VudCIsImEiLCJfIiwibm9vcCIsImIiLCJjIiwibGluayIsImVxdWFsIiwidW5saW5rIiwib2siLCJoYXNMaXN0ZW5lciIsImFQcm9wZXJ0eSIsImJQcm9wZXJ0eSIsImNhbGxiYWNrcyIsIm11bHRpbGluayIsImxhenlNdWx0aWxpbmsiLCJsYXp5TGluayIsIm5ld1ZhbHVlIiwib2xkVmFsdWUiLCJzZXREZWZlcnJlZCIsInZhbHVlIiwidXBkYXRlIiwiY2FsbHMiLCJwdXNoIiwibGVuZ3RoIiwic3RhdGUiLCJhZ2UiLCJsaXN0ZW5lciIsIlRlc3RUeXBlIiwiY29uc3RydWN0b3IiLCJvcHRpb25zIiwidmFsdWVUeXBlIiwid2luZG93IiwidGhyb3dzIiwic2V0IiwidmFsaWRWYWx1ZXMiLCJpc1ZhbGlkVmFsdWUiLCJQSEVUX0lPX0VOQUJMRUQiLCJkb25lIiwiYXN5bmMiLCJ0YW5kZW0iLCJST09UX1RFU1QiLCJjcmVhdGVUYW5kZW0iLCJwaGV0aW9UeXBlIiwiTnVtYmVyUHJvcGVydHlJTyIsInByb3BlcnR5VmFsdWUiLCJhZGRQaGV0aW9PYmplY3QiLCJpbnN0YW5jZSIsInNldFRpbWVvdXQiLCJzdGF0ZU9iamVjdCIsInRvU3RhdGVPYmplY3QiLCJkZWVwRXF1YWwiLCJwYXJlbnRUYW5kZW0iLCJvcmlnaW5hbE9yZGVyRGVwZW5kZW5jeUxlbmd0aCIsImdldE51bWJlck9mT3JkZXJEZXBlbmRlbmNpZXMiLCJnZXRPcmRlckRlcGVuZGVuY3lMZW5ndGgiLCJmaXJzdFByb3BlcnR5IiwicGhldGlvVmFsdWVUeXBlIiwic2Vjb25kUHJvcGVydHkiLCJyZWdpc3RlclBoZXRpb09yZGVyRGVwZW5kZW5jeSIsIk5PVElGWSIsIlVOREVGRVIiLCJkaXNwb3NlIiwidGhpcmRQcm9wZXJ0eSIsInBoZXRpb0RlcGVuZGVuY2llcyJdLCJzb3VyY2VzIjpbIlByb3BlcnR5VGVzdHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTctMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogUVVuaXQgdGVzdHMgZm9yIFByb3BlcnR5XHJcbiAqXHJcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IFRhbmRlbSBmcm9tICcuLi8uLi90YW5kZW0vanMvVGFuZGVtLmpzJztcclxuaW1wb3J0IE51bWJlcklPIGZyb20gJy4uLy4uL3RhbmRlbS9qcy90eXBlcy9OdW1iZXJJTy5qcyc7XHJcbmltcG9ydCBNdWx0aWxpbmsgZnJvbSAnLi9NdWx0aWxpbmsuanMnO1xyXG5pbXBvcnQgTnVtYmVyUHJvcGVydHkgZnJvbSAnLi9OdW1iZXJQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBQcm9wZXJ0eSBmcm9tICcuL1Byb3BlcnR5LmpzJztcclxuaW1wb3J0IHByb3BlcnR5U3RhdGVIYW5kbGVyU2luZ2xldG9uIGZyb20gJy4vcHJvcGVydHlTdGF0ZUhhbmRsZXJTaW5nbGV0b24uanMnO1xyXG5pbXBvcnQgUHJvcGVydHlTdGF0ZVBoYXNlIGZyb20gJy4vUHJvcGVydHlTdGF0ZVBoYXNlLmpzJztcclxuaW1wb3J0IFRSZWFkT25seVByb3BlcnR5IGZyb20gJy4vVFJlYWRPbmx5UHJvcGVydHkuanMnO1xyXG5pbXBvcnQgSW50ZW50aW9uYWxBbnkgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL0ludGVudGlvbmFsQW55LmpzJztcclxuXHJcblFVbml0Lm1vZHVsZSggJ1Byb3BlcnR5JyApO1xyXG5cclxuUVVuaXQudGVzdCggJ1Rlc3QgdW5saW5rJywgYXNzZXJ0ID0+IHtcclxuICBjb25zdCBwcm9wZXJ0eSA9IG5ldyBQcm9wZXJ0eSggMSApO1xyXG4gIGNvbnN0IHN0YXJ0aW5nUExpc3RlbmVyQ291bnQgPSBwcm9wZXJ0eVsgJ2dldExpc3RlbmVyQ291bnQnIF0oKTtcclxuICBjb25zdCBhID0gZnVuY3Rpb24oIGE6IHVua25vd24gKSB7IF8ubm9vcDsgfTtcclxuICBjb25zdCBiID0gZnVuY3Rpb24oIGI6IHVua25vd24gKSB7IF8ubm9vcDsgfTtcclxuICBjb25zdCBjID0gZnVuY3Rpb24oIGM6IHVua25vd24gKSB7IF8ubm9vcDsgfTtcclxuICBwcm9wZXJ0eS5saW5rKCBhICk7XHJcbiAgcHJvcGVydHkubGluayggYiApO1xyXG4gIHByb3BlcnR5LmxpbmsoIGMgKTtcclxuICBhc3NlcnQuZXF1YWwoIHByb3BlcnR5WyAnZ2V0TGlzdGVuZXJDb3VudCcgXSgpLCAzICsgc3RhcnRpbmdQTGlzdGVuZXJDb3VudCwgJ3Nob3VsZCBoYXZlIDMgb2JzZXJ2ZXJzIG5vdycgKTtcclxuICBwcm9wZXJ0eS51bmxpbmsoIGIgKTtcclxuICBhc3NlcnQub2soIHByb3BlcnR5Lmhhc0xpc3RlbmVyKCBhICksICdzaG91bGQgaGF2ZSByZW1vdmVkIGInICk7XHJcbiAgYXNzZXJ0Lm9rKCBwcm9wZXJ0eS5oYXNMaXN0ZW5lciggYyApLCAnc2hvdWxkIGhhdmUgcmVtb3ZlZCBiJyApO1xyXG4gIGFzc2VydC5lcXVhbCggcHJvcGVydHlbICdnZXRMaXN0ZW5lckNvdW50JyBdKCksIDIgKyBzdGFydGluZ1BMaXN0ZW5lckNvdW50LCAnc2hvdWxkIGhhdmUgcmVtb3ZlZCBhbiBpdGVtJyApO1xyXG59ICk7XHJcblxyXG5RVW5pdC50ZXN0KCAnVGVzdCBNdWx0aWxpbmsubXVsdGlsaW5rJywgYXNzZXJ0ID0+IHtcclxuICBjb25zdCBhUHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIDEgKTtcclxuICBjb25zdCBiUHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIDIgKTtcclxuICBsZXQgY2FsbGJhY2tzID0gMDtcclxuICBNdWx0aWxpbmsubXVsdGlsaW5rKCBbIGFQcm9wZXJ0eSwgYlByb3BlcnR5IF0sICggYSwgYiApID0+IHtcclxuICAgIGNhbGxiYWNrcysrO1xyXG4gICAgYXNzZXJ0LmVxdWFsKCBhLCAxLCAnZmlyc3QgdmFsdWUgc2hvdWxkIHBhc3MgdGhyb3VnaCcgKTtcclxuICAgIGFzc2VydC5lcXVhbCggYiwgMiwgJ3NlY29uZCB2YWx1ZSBzaG91bGQgcGFzcyB0aHJvdWdoJyApO1xyXG4gIH0gKTtcclxuICBhc3NlcnQuZXF1YWwoIGNhbGxiYWNrcywgMSwgJ3Nob3VsZCBoYXZlIGNhbGxlZCBiYWNrIHRvIGEgbXVsdGlsaW5rJyApO1xyXG59ICk7XHJcblxyXG5RVW5pdC50ZXN0KCAnVGVzdCBNdWx0aWxpbmsubGF6eU11bHRpbGluaycsIGFzc2VydCA9PiB7XHJcbiAgY29uc3QgYVByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCAxICk7XHJcbiAgY29uc3QgYlByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCAyICk7XHJcbiAgbGV0IGNhbGxiYWNrcyA9IDA7XHJcbiAgTXVsdGlsaW5rLmxhenlNdWx0aWxpbmsoIFsgYVByb3BlcnR5LCBiUHJvcGVydHkgXSwgKCBhLCBiICkgPT4ge1xyXG4gICAgY2FsbGJhY2tzKys7XHJcbiAgICBhc3NlcnQuZXF1YWwoIGEsIDEgKTtcclxuICAgIGFzc2VydC5lcXVhbCggYiwgMiApO1xyXG4gIH0gKTtcclxuICBhc3NlcnQuZXF1YWwoIGNhbGxiYWNrcywgMCwgJ3Nob3VsZCBub3QgY2FsbCBiYWNrIHRvIGEgbGF6eSBtdWx0aWxpbmsnICk7XHJcbn0gKTtcclxuXHJcblFVbml0LnRlc3QoICdUZXN0IGRlZmVyJywgYXNzZXJ0ID0+IHtcclxuICBjb25zdCBwcm9wZXJ0eSA9IG5ldyBQcm9wZXJ0eSggMCApO1xyXG4gIGxldCBjYWxsYmFja3MgPSAwO1xyXG4gIHByb3BlcnR5LmxhenlMaW5rKCAoIG5ld1ZhbHVlLCBvbGRWYWx1ZSApID0+IHtcclxuICAgIGNhbGxiYWNrcysrO1xyXG4gICAgYXNzZXJ0LmVxdWFsKCBuZXdWYWx1ZSwgMiwgJ25ld1ZhbHVlIHNob3VsZCBiZSB0aGUgZmluYWwgdmFsdWUgYWZ0ZXIgdGhlIHRyYW5zYWN0aW9uJyApO1xyXG4gICAgYXNzZXJ0LmVxdWFsKCBvbGRWYWx1ZSwgMCwgJ29sZFZhbHVlIHNob3VsZCBiZSB0aGUgb3JpZ2luYWwgdmFsdWUgYmVmb3JlIHRoZSB0cmFuc2FjdGlvbicgKTtcclxuICB9ICk7XHJcbiAgcHJvcGVydHkuc2V0RGVmZXJyZWQoIHRydWUgKTtcclxuICBwcm9wZXJ0eS52YWx1ZSA9IDE7XHJcbiAgcHJvcGVydHkudmFsdWUgPSAyO1xyXG4gIGFzc2VydC5lcXVhbCggcHJvcGVydHkudmFsdWUsIDAsICdzaG91bGQgaGF2ZSBvcmlnaW5hbCB2YWx1ZScgKTtcclxuICBjb25zdCB1cGRhdGUgPSBwcm9wZXJ0eS5zZXREZWZlcnJlZCggZmFsc2UgKTtcclxuICBhc3NlcnQuZXF1YWwoIGNhbGxiYWNrcywgMCwgJ3Nob3VsZCBub3QgY2FsbCBiYWNrIHdoaWxlIGRlZmVycmVkJyApO1xyXG4gIGFzc2VydC5lcXVhbCggcHJvcGVydHkudmFsdWUsIDIsICdzaG91bGQgaGF2ZSBuZXcgdmFsdWUnICk7XHJcblxyXG4gIC8vIEB0cy1leHBlY3QtZXJyb3IgLnNldERlZmVycmVkKGZhbHNlKSB3aWxsIGFsd2F5cyByZXR1cm4gKCkgPT4gdm9pZFxyXG4gIHVwZGF0ZSgpO1xyXG4gIGFzc2VydC5lcXVhbCggY2FsbGJhY2tzLCAxLCAnc2hvdWxkIGhhdmUgYmVlbiBjYWxsZWQgYmFjayBhZnRlciB1cGRhdGUnICk7XHJcbiAgYXNzZXJ0LmVxdWFsKCBwcm9wZXJ0eS52YWx1ZSwgMiwgJ3Nob3VsZCB0YWtlIGZpbmFsIHZhbHVlJyApO1xyXG59ICk7XHJcblxyXG5RVW5pdC50ZXN0KCAnUHJvcGVydHkgSUQgY2hlY2tzJywgYXNzZXJ0ID0+IHtcclxuICBhc3NlcnQub2soIG5ldyBQcm9wZXJ0eSggMSApWyAnaWQnIF0gIT09IG5ldyBQcm9wZXJ0eSggMSApWyAnaWQnIF0sICdQcm9wZXJ0aWVzIHNob3VsZCBoYXZlIHVuaXF1ZSBJRHMnICk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2VsZi1jb21wYXJlXHJcbn0gKTtcclxuXHJcbnR5cGUgY2FsbFZhbHVlcyA9IHtcclxuICBuZXdWYWx1ZTogbnVtYmVyO1xyXG4gIG9sZFZhbHVlOiBudW1iZXIgfCBudWxsO1xyXG4gIHByb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxudW1iZXI+O1xyXG59O1xyXG5cclxuUVVuaXQudGVzdCggJ1Byb3BlcnR5IGxpbmsgcGFyYW1ldGVycycsIGFzc2VydCA9PiB7XHJcbiAgY29uc3QgcHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIDEgKTtcclxuICBjb25zdCBjYWxsczogQXJyYXk8Y2FsbFZhbHVlcz4gPSBbXTtcclxuICBwcm9wZXJ0eS5saW5rKCAoIG5ld1ZhbHVlLCBvbGRWYWx1ZSwgcHJvcGVydHkgKSA9PiB7XHJcbiAgICBjYWxscy5wdXNoKCB7XHJcbiAgICAgIG5ld1ZhbHVlOiBuZXdWYWx1ZSxcclxuICAgICAgb2xkVmFsdWU6IG9sZFZhbHVlLFxyXG4gICAgICBwcm9wZXJ0eTogcHJvcGVydHlcclxuICAgIH0gKTtcclxuICB9ICk7XHJcbiAgcHJvcGVydHkudmFsdWUgPSAyO1xyXG5cclxuICBhc3NlcnQub2soIGNhbGxzLmxlbmd0aCA9PT0gMiApO1xyXG5cclxuICBhc3NlcnQub2soIGNhbGxzWyAwIF0ubmV3VmFsdWUgPT09IDEgKTtcclxuICBhc3NlcnQub2soIGNhbGxzWyAwIF0ub2xkVmFsdWUgPT09IG51bGwgKTtcclxuICBhc3NlcnQub2soIGNhbGxzWyAwIF0ucHJvcGVydHkgPT09IHByb3BlcnR5ICk7XHJcblxyXG4gIGFzc2VydC5vayggY2FsbHNbIDEgXS5uZXdWYWx1ZSA9PT0gMiApO1xyXG4gIGFzc2VydC5vayggY2FsbHNbIDEgXS5vbGRWYWx1ZSA9PT0gMSApO1xyXG4gIGFzc2VydC5vayggY2FsbHNbIDEgXS5wcm9wZXJ0eSA9PT0gcHJvcGVydHkgKTtcclxufSApO1xyXG5cclxuLyoqXHJcbiAqIE1ha2Ugc3VyZSBsaW5raW5nIGF0dHJpYnV0ZXMgYW5kIHVubGlua2luZyBhdHRyaWJ1dGVzIHdvcmtzIG9uIFByb3BlcnR5XHJcbiAqL1xyXG5RVW5pdC50ZXN0KCAnUHJvcGVydHkubGlua0F0dHJpYnV0ZScsIGFzc2VydCA9PiB7XHJcbiAgY29uc3QgcHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIDcgKTtcclxuICBjb25zdCBzdGF0ZSA9IHsgYWdlOiA5OSB9O1xyXG4gIGNvbnN0IGxpc3RlbmVyID0gKCBhZ2U6IG51bWJlciApID0+IHtcclxuICAgIHN0YXRlLmFnZSA9IGFnZTtcclxuICB9O1xyXG4gIHByb3BlcnR5LmxpbmsoIGxpc3RlbmVyICk7XHJcbiAgYXNzZXJ0LmVxdWFsKCBzdGF0ZS5hZ2UsIDcsICdsaW5rIHNob3VsZCBzeW5jaHJvbml6ZSB2YWx1ZXMnICk7XHJcbiAgcHJvcGVydHkudmFsdWUgPSA4O1xyXG4gIGFzc2VydC5lcXVhbCggc3RhdGUuYWdlLCA4LCAnbGluayBzaG91bGQgdXBkYXRlIHZhbHVlcycgKTtcclxuICBwcm9wZXJ0eS51bmxpbmsoIGxpc3RlbmVyICk7XHJcbiAgcHJvcGVydHkudmFsdWUgPSA5O1xyXG4gIGFzc2VydC5lcXVhbCggc3RhdGUuYWdlLCA4LCAnc3RhdGUgc2hvdWxkIG5vdCBoYXZlIGNoYW5nZWQgYWZ0ZXIgdW5saW5rJyApO1xyXG59ICk7XHJcblxyXG5RVW5pdC50ZXN0KCAnUHJvcGVydHkgdmFsdWUgdmFsaWRhdGlvbicsIGFzc2VydCA9PiB7XHJcblxyXG4gIC8vIFR5cGUgdGhhdCBpcyBzcGVjaWZpYyB0byB2YWx1ZVR5cGUgdGVzdHNcclxuICBjbGFzcyBUZXN0VHlwZSB7XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKSB7IF8ubm9vcCgpOyB9XHJcbiAgfVxyXG5cclxuICBsZXQgcHJvcGVydHk6IEludGVudGlvbmFsQW55ID0gbnVsbDtcclxuICBsZXQgb3B0aW9ucyA9IHt9O1xyXG5cclxuICAvLyB2YWx1ZVR5cGUgaXMgYSBwcmltaXRpdmUgdHlwZSAodHlwZW9mIHZhbGlkYXRpb24pXHJcbiAgb3B0aW9ucyA9IHtcclxuICAgIHZhbHVlVHlwZTogJ3N0cmluZydcclxuICB9O1xyXG4gIHdpbmRvdy5hc3NlcnQgJiYgYXNzZXJ0LnRocm93cyggKCkgPT4ge1xyXG4gICAgbmV3IFByb3BlcnR5KCAwLCB7IHZhbHVlVHlwZTogJ2ZvbycgfSApOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ld1xyXG4gIH0sICdvcHRpb25zLnZhbHVlVHlwZSBpcyBpbnZhbGlkLCBleHBlY3RlZCBhIHByaW1pdGl2ZSBkYXRhIHR5cGUnICk7XHJcbiAgd2luZG93LmFzc2VydCAmJiBhc3NlcnQudGhyb3dzKCAoKSA9PiB7XHJcbiAgICBuZXcgUHJvcGVydHkoIDAsIG9wdGlvbnMgKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXdcclxuICB9LCAnaW52YWxpZCBpbml0aWFsIHZhbHVlIHdpdGggb3B0aW9ucy52YWx1ZVR5cGUgdHlwZW9mIHZhbGlkYXRpb24nICk7XHJcbiAgcHJvcGVydHkgPSBuZXcgUHJvcGVydHkoICdob3Jpem9udGFsJywgb3B0aW9ucyApO1xyXG4gIHByb3BlcnR5LnNldCggJ3ZlcnRpY2FsJyApO1xyXG4gIHdpbmRvdy5hc3NlcnQgJiYgYXNzZXJ0LnRocm93cyggKCkgPT4ge1xyXG4gICAgcHJvcGVydHkuc2V0KCAwICk7XHJcbiAgfSwgJ2ludmFsaWQgc2V0IHZhbHVlIHdpdGggb3B0aW9ucy52YWx1ZVR5cGUgdHlwZW9mIHZhbGlkYXRpb24nICk7XHJcblxyXG4gIC8vIHZhbHVlVHlwZSBpcyBhIGNvbnN0cnVjdG9yIChpbnN0YW5jZW9mIHZhbGlkYXRpb24pXHJcbiAgb3B0aW9ucyA9IHtcclxuICAgIHZhbHVlVHlwZTogVGVzdFR5cGVcclxuICB9O1xyXG4gIHdpbmRvdy5hc3NlcnQgJiYgYXNzZXJ0LnRocm93cyggKCkgPT4ge1xyXG4gICAgbmV3IFByb3BlcnR5KCAwLCBvcHRpb25zICk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3XHJcbiAgfSwgJ2ludmFsaWQgaW5pdGlhbCB2YWx1ZSBmb3Igb3B0aW9ucy52YWx1ZVR5cGUgaW5zdGFuY2VvZiB2YWxpZGF0aW9uJyApO1xyXG4gIHByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCBuZXcgVGVzdFR5cGUoKSwgb3B0aW9ucyApO1xyXG4gIHByb3BlcnR5LnNldCggbmV3IFRlc3RUeXBlKCkgKTtcclxuICB3aW5kb3cuYXNzZXJ0ICYmIGFzc2VydC50aHJvd3MoICgpID0+IHtcclxuICAgIHByb3BlcnR5LnNldCggMCApO1xyXG4gIH0sICdpbnZhbGlkIHNldCB2YWx1ZSB3aXRoIG9wdGlvbnMudmFsdWVUeXBlIGluc3RhbmNlb2YgdmFsaWRhdGlvbicgKTtcclxuXHJcbiAgLy8gdmFsaWRWYWx1ZXNcclxuICBvcHRpb25zID0ge1xyXG4gICAgdmFsaWRWYWx1ZXM6IFsgMSwgMiwgMyBdXHJcbiAgfTtcclxuICB3aW5kb3cuYXNzZXJ0ICYmIGFzc2VydC50aHJvd3MoICgpID0+IHtcclxuXHJcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIElOVEVOVElPTkFMIHZhbHVlIGlzIGludmFsaWQgZm9yIHRlc3RpbmdcclxuICAgIG5ldyBQcm9wZXJ0eSggMCwgeyB2YWxpZFZhbHVlczogMCB9ICk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3XHJcbiAgfSwgJ29wdGlvbnMudmFsaWRWYWx1ZXMgaXMgaW52YWxpZCcgKTtcclxuICB3aW5kb3cuYXNzZXJ0ICYmIGFzc2VydC50aHJvd3MoICgpID0+IHtcclxuICAgIG5ldyBQcm9wZXJ0eSggMCwgb3B0aW9ucyApOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ld1xyXG4gIH0sICdpbnZhbGlkIGluaXRpYWwgdmFsdWUgd2l0aCBvcHRpb25zLnZhbGlkVmFsdWVzJyApO1xyXG4gIHByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCAxLCBvcHRpb25zICk7XHJcbiAgcHJvcGVydHkuc2V0KCAzICk7XHJcbiAgd2luZG93LmFzc2VydCAmJiBhc3NlcnQudGhyb3dzKCAoKSA9PiB7XHJcbiAgICBwcm9wZXJ0eS5zZXQoIDQgKTtcclxuICB9LCAnaW52YWxpZCBzZXQgdmFsdWUgd2l0aCBvcHRpb25zLnZhbGlkVmFsdWVzJyApO1xyXG5cclxuICAvLyBpc1ZhbGlkVmFsdWVzXHJcbiAgb3B0aW9ucyA9IHtcclxuICAgIGlzVmFsaWRWYWx1ZTogZnVuY3Rpb24oIHZhbHVlOiBudW1iZXIgKSB7XHJcbiAgICAgIHJldHVybiAoIHZhbHVlID4gMCAmJiB2YWx1ZSA8IDQgKTtcclxuICAgIH1cclxuICB9O1xyXG4gIHdpbmRvdy5hc3NlcnQgJiYgYXNzZXJ0LnRocm93cyggKCkgPT4ge1xyXG5cclxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgSU5URU5USU9OQUwgdmFsdWUgaXMgaW52YWxpZCBmb3IgdGVzdGluZ1xyXG4gICAgbmV3IFByb3BlcnR5KCAwLCB7IGlzVmFsaWRWYWx1ZTogMCB9ICk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3XHJcbiAgfSwgJ29wdGlvbnMuaXNWYWxpZFZhbHVlIGlzIGludmFsaWQnICk7XHJcbiAgd2luZG93LmFzc2VydCAmJiBhc3NlcnQudGhyb3dzKCAoKSA9PiB7XHJcbiAgICBuZXcgUHJvcGVydHkoIDAsIG9wdGlvbnMgKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXdcclxuICB9LCAnaW52YWxpZCBpbml0aWFsIHZhbHVlIHdpdGggb3B0aW9ucy5pc1ZhbGlkVmFsdWUnICk7XHJcbiAgcHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIDEsIG9wdGlvbnMgKTtcclxuICBwcm9wZXJ0eS5zZXQoIDMgKTtcclxuICB3aW5kb3cuYXNzZXJ0ICYmIGFzc2VydC50aHJvd3MoICgpID0+IHtcclxuICAgIHByb3BlcnR5LnNldCggNCApO1xyXG4gIH0sICdpbnZhbGlkIHNldCB2YWx1ZSB3aXRoIG9wdGlvbnMuaXNWYWxpZFZhbHVlJyApO1xyXG5cclxuICAvLyBDb21wYXRpYmxlIGNvbWJpbmF0aW9ucyBvZiB2YWxpZGF0aW9uIG9wdGlvbnMsIHBvc3NpYmx5IHJlZHVuZGFudCAobm90IGV4aGF1c3RpdmUpXHJcbiAgb3B0aW9ucyA9IHtcclxuICAgIHZhbHVlVHlwZTogJ3N0cmluZycsXHJcbiAgICB2YWxpZFZhbHVlczogWyAnYm9iJywgJ2pvZScsICdzYW0nIF0sXHJcbiAgICBpc1ZhbGlkVmFsdWU6IGZ1bmN0aW9uKCB2YWx1ZTogc3RyaW5nICkge1xyXG4gICAgICByZXR1cm4gdmFsdWUubGVuZ3RoID09PSAzO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgcHJvcGVydHkgPSBuZXcgUHJvcGVydHkoICdib2InLCBvcHRpb25zICk7XHJcbiAgd2luZG93LmFzc2VydCAmJiBhc3NlcnQudGhyb3dzKCAoKSA9PiB7XHJcbiAgICBwcm9wZXJ0eS5zZXQoIDAgKTtcclxuICB9LCAnaW52YWxpZCBzZXQgdmFsdWUgd2l0aCBjb21wYXRpYmxlIGNvbWJpbmF0aW9uIG9mIHZhbGlkYXRpb24gb3B0aW9ucycgKTtcclxuICB3aW5kb3cuYXNzZXJ0ICYmIGFzc2VydC50aHJvd3MoICgpID0+IHtcclxuICAgIHByb3BlcnR5LnNldCggJ3RlZCcgKTtcclxuICB9LCAnaW52YWxpZCBzZXQgdmFsdWUgd2l0aCBjb21wYXRpYmxlIGNvbWJpbmF0aW9uIG9mIHZhbGlkYXRpb24gb3B0aW9ucycgKTtcclxuXHJcbiAgLy8gSW5jb21wYXRpYmxlIGNvbWJpbmF0aW9ucyBvZiB2YWxpZGF0aW9uIG9wdGlvbnMgKG5vdCBleGhhdXN0aXZlKVxyXG4gIC8vIFRoZXNlIHRlc3RzIHdpbGwgYWx3YXlzIGZhaWwgb24gaW5pdGlhbGl6YXRpb24sIHNpbmNlIHRoZSB2YWxpZGF0aW9uIGNyaXRlcmlhIGFyZSBjb250cmFkaWN0b3J5LlxyXG4gIG9wdGlvbnMgPSB7XHJcbiAgICB2YWx1ZVR5cGU6ICdudW1iZXInLFxyXG4gICAgdmFsaWRWYWx1ZXM6IFsgJ2JvYicsICdqb2UnLCAnc2FtJyBdLFxyXG4gICAgaXNWYWxpZFZhbHVlOiBmdW5jdGlvbiggdmFsdWU6IHN0cmluZyApIHtcclxuICAgICAgcmV0dXJuIHZhbHVlLmxlbmd0aCA9PT0gNDtcclxuICAgIH1cclxuICB9O1xyXG4gIHdpbmRvdy5hc3NlcnQgJiYgYXNzZXJ0LnRocm93cyggKCkgPT4ge1xyXG4gICAgcHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIDAsIG9wdGlvbnMgKTtcclxuICB9LCAnaW52YWxpZCBpbml0aWFsIHZhbHVlIHdpdGggaW5jb21wYXRpYmxlIGNvbWJpbmF0aW9uIG9mIHZhbGlkYXRpb24gb3B0aW9ucycgKTtcclxuICB3aW5kb3cuYXNzZXJ0ICYmIGFzc2VydC50aHJvd3MoICgpID0+IHtcclxuICAgIHByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCAnYm9iJywgb3B0aW9ucyApO1xyXG4gIH0sICdpbnZhbGlkIGluaXRpYWwgdmFsdWUgd2l0aCBpbmNvbXBhdGlibGUgY29tYmluYXRpb24gb2YgdmFsaWRhdGlvbiBvcHRpb25zJyApO1xyXG4gIHdpbmRvdy5hc3NlcnQgJiYgYXNzZXJ0LnRocm93cyggKCkgPT4ge1xyXG4gICAgcHJvcGVydHkgPSBuZXcgUHJvcGVydHkoICdmcmVkJywgb3B0aW9ucyApO1xyXG4gIH0sICdpbnZhbGlkIGluaXRpYWwgdmFsdWUgd2l0aCBpbmNvbXBhdGlibGUgY29tYmluYXRpb24gb2YgdmFsaWRhdGlvbiBvcHRpb25zJyApO1xyXG5cclxuICBhc3NlcnQub2soIHRydWUsICdzbyB3ZSBoYXZlIGF0IGxlYXN0IDEgdGVzdCBpbiB0aGlzIHNldCcgKTtcclxufSApO1xyXG5cclxuLy8gVGVzdHMgdGhhdCBjYW4gb25seSBydW4gaW4gcGhldC1pbyBtb2RlXHJcbmlmICggVGFuZGVtLlBIRVRfSU9fRU5BQkxFRCApIHtcclxuICBRVW5pdC50ZXN0KCAnVGVzdCBQcm9wZXJ0eUlPIHRvU3RhdGVPYmplY3QvZnJvbVN0YXRlT2JqZWN0JywgYXNzZXJ0ID0+IHtcclxuICAgIGNvbnN0IGRvbmUgPSBhc3NlcnQuYXN5bmMoKTtcclxuICAgIGNvbnN0IHRhbmRlbSA9IFRhbmRlbS5ST09UX1RFU1QuY3JlYXRlVGFuZGVtKCAndGVzdFRhbmRlbVByb3BlcnR5JyApO1xyXG4gICAgY29uc3QgcGhldGlvVHlwZSA9IE51bWJlclByb3BlcnR5Lk51bWJlclByb3BlcnR5SU87XHJcbiAgICBjb25zdCBwcm9wZXJ0eVZhbHVlID0gMTIzO1xyXG4gICAgY29uc3QgdmFsaWRWYWx1ZXMgPSBbIDAsIDEsIDIsIDMsIHByb3BlcnR5VmFsdWUgXTtcclxuXHJcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHJlZGVmaW5pbmcgZnVuY3Rpb24gZm9yIHRlc3RpbmdcclxuICAgIHRhbmRlbS5hZGRQaGV0aW9PYmplY3QgPSBmdW5jdGlvbiggaW5zdGFuY2U6IE51bWJlclByb3BlcnR5LCBvcHRpb25zOiBJbnRlbnRpb25hbEFueSApOiB2b2lkIHtcclxuXHJcbiAgICAgIC8vIFBoRVQtaU8gb3BlcmF0ZXMgdW5kZXIgdGhlIGFzc3VtcHRpb24gdGhhdCBub3RoaW5nIHdpbGwgYWNjZXNzIGEgUGhldGlvT2JqZWN0IHVudGlsIHRoZSBuZXh0IGFuaW1hdGlvbiBmcmFtZVxyXG4gICAgICAvLyB3aGVuIHRoZSBvYmplY3QgaXMgZnVsbHkgY29uc3RydWN0ZWQuICBGb3IgZXhhbXBsZSwgUHJvcGVydHkgc3RhdGUgdmFyaWFibGVzIGFyZSBzZXQgYWZ0ZXIgdGhlIGNhbGxiYWNrXHJcbiAgICAgIC8vIHRvIGFkZFBoZXRpb09iamVjdCwgd2hpY2ggb2NjdXJzIGR1cmluZyBQcm9wZXJ0eS5jb25zdHJ1Y3Rvci5zdXBlcigpLlxyXG4gICAgICBzZXRUaW1lb3V0KCAoKSA9PiB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFkLXNpbS10ZXh0XHJcblxyXG4gICAgICAgIC8vIFJ1biBpbiB0aGUgbmV4dCBmcmFtZSBhZnRlciB0aGUgb2JqZWN0IGZpbmlzaGVkIGdldHRpbmcgY29uc3RydWN0ZWRcclxuICAgICAgICBjb25zdCBzdGF0ZU9iamVjdCA9IHBoZXRpb1R5cGUudG9TdGF0ZU9iamVjdCggaW5zdGFuY2UgKTtcclxuICAgICAgICBhc3NlcnQuZXF1YWwoIHN0YXRlT2JqZWN0LnZhbHVlLCBwcm9wZXJ0eVZhbHVlLCAndG9TdGF0ZU9iamVjdCBzaG91bGQgbWF0Y2gnICk7XHJcbiAgICAgICAgYXNzZXJ0LmRlZXBFcXVhbCggc3RhdGVPYmplY3QudmFsaWRWYWx1ZXMsIHZhbGlkVmFsdWVzLCAndG9TdGF0ZU9iamVjdCBzaG91bGQgbWF0Y2gnICk7XHJcbiAgICAgICAgZG9uZSgpO1xyXG4gICAgICB9LCAwICk7XHJcbiAgICB9O1xyXG4gICAgbmV3IE51bWJlclByb3BlcnR5KCBwcm9wZXJ0eVZhbHVlLCB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3XHJcbiAgICAgIHRhbmRlbTogdGFuZGVtLFxyXG4gICAgICB2YWxpZFZhbHVlczogdmFsaWRWYWx1ZXNcclxuICAgIH0gKTtcclxuICB9ICk7XHJcblxyXG4gIFFVbml0LnRlc3QoICdwcm9wZXJ0eVN0YXRlSGFuZGxlclNpbmdsZXRvbiB0ZXN0cyBmb3IgUHJvcGVydHknLCBhc3NlcnQgPT4ge1xyXG4gICAgY29uc3QgcGFyZW50VGFuZGVtID0gVGFuZGVtLlJPT1RfVEVTVDtcclxuXHJcbiAgICBjb25zdCBvcmlnaW5hbE9yZGVyRGVwZW5kZW5jeUxlbmd0aCA9IHByb3BlcnR5U3RhdGVIYW5kbGVyU2luZ2xldG9uLmdldE51bWJlck9mT3JkZXJEZXBlbmRlbmNpZXMoKTtcclxuICAgIGNvbnN0IGdldE9yZGVyRGVwZW5kZW5jeUxlbmd0aCA9ICgpID0+IHByb3BlcnR5U3RhdGVIYW5kbGVyU2luZ2xldG9uLmdldE51bWJlck9mT3JkZXJEZXBlbmRlbmNpZXMoKSAtIG9yaWdpbmFsT3JkZXJEZXBlbmRlbmN5TGVuZ3RoO1xyXG5cclxuICAgIGNvbnN0IGZpcnN0UHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIDEsIHtcclxuICAgICAgdGFuZGVtOiBwYXJlbnRUYW5kZW0uY3JlYXRlVGFuZGVtKCAnZmlyc3RQcm9wZXJ0eScgKSxcclxuICAgICAgcGhldGlvVmFsdWVUeXBlOiBOdW1iZXJJT1xyXG4gICAgfSApO1xyXG4gICAgY29uc3Qgc2Vjb25kUHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIDEsIHtcclxuICAgICAgdGFuZGVtOiBwYXJlbnRUYW5kZW0uY3JlYXRlVGFuZGVtKCAnc2Vjb25kUHJvcGVydHknICksXHJcbiAgICAgIHBoZXRpb1ZhbHVlVHlwZTogTnVtYmVySU9cclxuICAgIH0gKTtcclxuXHJcbiAgICBwcm9wZXJ0eVN0YXRlSGFuZGxlclNpbmdsZXRvbi5yZWdpc3RlclBoZXRpb09yZGVyRGVwZW5kZW5jeSggZmlyc3RQcm9wZXJ0eSwgUHJvcGVydHlTdGF0ZVBoYXNlLk5PVElGWSwgc2Vjb25kUHJvcGVydHksIFByb3BlcnR5U3RhdGVQaGFzZS5VTkRFRkVSICk7XHJcblxyXG4gICAgZmlyc3RQcm9wZXJ0eS5kaXNwb3NlKCk7XHJcbiAgICBhc3NlcnQub2soIGdldE9yZGVyRGVwZW5kZW5jeUxlbmd0aCgpID09PSAwLCAnZGlzcG9zZSByZW1vdmVzIG9yZGVyIGRlcGVuZGVuY3knICk7XHJcblxyXG4gICAgY29uc3QgdGhpcmRQcm9wZXJ0eSA9IG5ldyBQcm9wZXJ0eSggMSwge1xyXG4gICAgICB0YW5kZW06IHBhcmVudFRhbmRlbS5jcmVhdGVUYW5kZW0oICd0aGlyZFByb3BlcnR5JyApLFxyXG4gICAgICBwaGV0aW9WYWx1ZVR5cGU6IE51bWJlcklPXHJcbiAgICB9ICk7XHJcbiAgICBzZWNvbmRQcm9wZXJ0eS5saW5rKCAoKSA9PiB7IHRoaXJkUHJvcGVydHkudmFsdWUgPSAyO30sIHtcclxuICAgICAgcGhldGlvRGVwZW5kZW5jaWVzOiBbIHRoaXJkUHJvcGVydHkgXVxyXG4gICAgfSApO1xyXG5cclxuICAgIGFzc2VydC5vayggZ2V0T3JkZXJEZXBlbmRlbmN5TGVuZ3RoKCkgPT09IDEsICdqdXN0IGFkZGVkIG9yZGVyRGVwZW5kZW5jeSBmcm9tIHBoZXRpb0RlcGVuZGVuY2llcycgKTtcclxuXHJcbiAgICBzZWNvbmRQcm9wZXJ0eS5kaXNwb3NlKCk7XHJcbiAgICBhc3NlcnQub2soIGdldE9yZGVyRGVwZW5kZW5jeUxlbmd0aCgpID09PSAwLCAnZGlzcG9zZSByZW1vdmVzIG9yZGVyIGRlcGVuZGVuY3knICk7XHJcblxyXG4gICAgdGhpcmRQcm9wZXJ0eS5kaXNwb3NlKCk7XHJcbiAgfSApO1xyXG59Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLE1BQU0sTUFBTSwyQkFBMkI7QUFDOUMsT0FBT0MsUUFBUSxNQUFNLG1DQUFtQztBQUN4RCxPQUFPQyxTQUFTLE1BQU0sZ0JBQWdCO0FBQ3RDLE9BQU9DLGNBQWMsTUFBTSxxQkFBcUI7QUFDaEQsT0FBT0MsUUFBUSxNQUFNLGVBQWU7QUFDcEMsT0FBT0MsNkJBQTZCLE1BQU0sb0NBQW9DO0FBQzlFLE9BQU9DLGtCQUFrQixNQUFNLHlCQUF5QjtBQUl4REMsS0FBSyxDQUFDQyxNQUFNLENBQUUsVUFBVyxDQUFDO0FBRTFCRCxLQUFLLENBQUNFLElBQUksQ0FBRSxhQUFhLEVBQUVDLE1BQU0sSUFBSTtFQUNuQyxNQUFNQyxRQUFRLEdBQUcsSUFBSVAsUUFBUSxDQUFFLENBQUUsQ0FBQztFQUNsQyxNQUFNUSxzQkFBc0IsR0FBR0QsUUFBUSxDQUFFLGtCQUFrQixDQUFFLENBQUMsQ0FBQztFQUMvRCxNQUFNRSxDQUFDLEdBQUcsU0FBQUEsQ0FBVUEsQ0FBVSxFQUFHO0lBQUVDLENBQUMsQ0FBQ0MsSUFBSTtFQUFFLENBQUM7RUFDNUMsTUFBTUMsQ0FBQyxHQUFHLFNBQUFBLENBQVVBLENBQVUsRUFBRztJQUFFRixDQUFDLENBQUNDLElB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