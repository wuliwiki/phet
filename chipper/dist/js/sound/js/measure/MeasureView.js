// Copyright 2022, University of Colorado Boulder
/**
 * View for the measure screen.
 *
 * @author Piet Goris (University of Leuven)
 * @author Sam Reid (PhET Interactive Simulations)
 */

import Vector2 from '../../../dot/js/Vector2.js';
import ModelViewTransform2 from '../../../phetcommon/js/view/ModelViewTransform2.js';
import RulerNode from '../../../scenery-phet/js/RulerNode.js';
import StopwatchNode from '../../../scenery-phet/js/StopwatchNode.js';
import SoundClip from '../../../tambo/js/sound-generators/SoundClip.js';
import soundManager from '../../../tambo/js/soundManager.js';
import grab_mp3 from '../../../tambo/sounds/grab_mp3.js';
import release_mp3 from '../../../tambo/sounds/release_mp3.js';
import MovableNode from '../common/view/MovableNode.js';
import sound from '../sound.js';
import SoundScreenView from '../common/view/SoundScreenView.js';
export default class MeasureView extends SoundScreenView {
  constructor(model) {
    super(model);
    const rulerLength = model.modelViewTransform.modelToViewDeltaX(500);
    const majorTickMarkWidth = rulerLength / 10;
    // Compute tick labels, 1 major tick for every 0.5 unit of length, labels on the ticks that correspond to integer values.
    const majorTickLabels = [];
    const numberOfTicks = 11;
    for (let i = 0; i < numberOfTicks; i++) {
      majorTickLabels[i] = i % 2 === 0 ? (i / 2).toString() : '';
    }
    const soundClipOptions = {
      initialOutputLevel: 0.4
    };
    const grabSound = new SoundClip(grab_mp3, soundClipOptions);
    soundManager.addSoundGenerator(grabSound, {
      categoryName: 'user-interface'
    });
    const releaseSound = new SoundClip(release_mp3, soundClipOptions);
    soundManager.addSoundGenerator(releaseSound, {
      categoryName: 'user-interface'
    });

    // Ruler
    const rulerNode = new RulerNode(rulerLength, 50, majorTickMarkWidth, majorTickLabels, 'meter', {
      minorTicksPerMajorTick: 4,
      insetsWidth: 60,
      unitsMajorTickIndex: 10,
      unitsSpacing: 8
    });
    const movableRuler = new MovableNode(model.rulerPositionProperty, this.visibleBoundsProperty.value, ModelViewTransform2.createOffsetScaleMapping(new Vector2(0, 0), 1), rulerNode);
    this.addChild(movableRuler);

    // Stopwatch
    const createFormatter = units => StopwatchNode.createRichTextNumberFormatter({
      showAsMinutesAndSeconds: false,
      units: units
    });
    const stopwatchNode = new StopwatchNode(model.stopwatch, {
      dragBoundsProperty: this.visibleBoundsProperty,
      numberDisplayOptions: {
        numberFormatter: createFormatter('ms')
      },
      dragListenerOptions: {
        start: () => {
          grabSound.play();
        },
        end: () => {
          releaseSound.play();
        }
      }
    });
    this.addChild(stopwatchNode);
  }
}
sound.register('MeasureView', MeasureView);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWZWN0b3IyIiwiTW9kZWxWaWV3VHJhbnNmb3JtMiIsIlJ1bGVyTm9kZSIsIlN0b3B3YXRjaE5vZGUiLCJTb3VuZENsaXAiLCJzb3VuZE1hbmFnZXIiLCJncmFiX21wMyIsInJlbGVhc2VfbXAzIiwiTW92YWJsZU5vZGUiLCJzb3VuZCIsIlNvdW5kU2NyZWVuVmlldyIsIk1lYXN1cmVWaWV3IiwiY29uc3RydWN0b3IiLCJtb2RlbCIsInJ1bGVyTGVuZ3RoIiwibW9kZWxWaWV3VHJhbnNmb3JtIiwibW9kZWxUb1ZpZXdEZWx0YVgiLCJtYWpvclRpY2tNYXJrV2lkdGgiLCJtYWpvclRpY2tMYWJlbHMiLCJudW1iZXJPZlRpY2tzIiwiaSIsInRvU3RyaW5nIiwic291bmRDbGlwT3B0aW9ucyIsImluaXRpYWxPdXRwdXRMZXZlbCIsImdyYWJTb3VuZCIsImFkZFNvdW5kR2VuZXJhdG9yIiwiY2F0ZWdvcnlOYW1lIiwicmVsZWFzZVNvdW5kIiwicnVsZXJOb2RlIiwibWlub3JUaWNrc1Blck1ham9yVGljayIsImluc2V0c1dpZHRoIiwidW5pdHNNYWpvclRpY2tJbmRleCIsInVuaXRzU3BhY2luZyIsIm1vdmFibGVSdWxlciIsInJ1bGVyUG9zaXRpb25Qcm9wZXJ0eSIsInZpc2libGVCb3VuZHNQcm9wZXJ0eSIsInZhbHVlIiwiY3JlYXRlT2Zmc2V0U2NhbGVNYXBwaW5nIiwiYWRkQ2hpbGQiLCJjcmVhdGVGb3JtYXR0ZXIiLCJ1bml0cyIsImNyZWF0ZVJpY2hUZXh0TnVtYmVyRm9ybWF0dGVyIiwic2hvd0FzTWludXRlc0FuZFNlY29uZHMiLCJzdG9wd2F0Y2hOb2RlIiwic3RvcHdhdGNoIiwiZHJhZ0JvdW5kc1Byb3BlcnR5IiwibnVtYmVyRGlzcGxheU9wdGlvbnMiLCJudW1iZXJGb3JtYXR0ZXIiLCJkcmFnTGlzdGVuZXJPcHRpb25zIiwic3RhcnQiLCJwbGF5IiwiZW5kIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJNZWFzdXJlVmlldy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcbi8qKlxyXG4gKiBWaWV3IGZvciB0aGUgbWVhc3VyZSBzY3JlZW4uXHJcbiAqXHJcbiAqIEBhdXRob3IgUGlldCBHb3JpcyAoVW5pdmVyc2l0eSBvZiBMZXV2ZW4pXHJcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgTW9kZWxWaWV3VHJhbnNmb3JtMiBmcm9tICcuLi8uLi8uLi9waGV0Y29tbW9uL2pzL3ZpZXcvTW9kZWxWaWV3VHJhbnNmb3JtMi5qcyc7XHJcbmltcG9ydCBSdWxlck5vZGUgZnJvbSAnLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1J1bGVyTm9kZS5qcyc7XHJcbmltcG9ydCBTdG9wd2F0Y2hOb2RlIGZyb20gJy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9TdG9wd2F0Y2hOb2RlLmpzJztcclxuaW1wb3J0IFNvdW5kQ2xpcCBmcm9tICcuLi8uLi8uLi90YW1iby9qcy9zb3VuZC1nZW5lcmF0b3JzL1NvdW5kQ2xpcC5qcyc7XHJcbmltcG9ydCBzb3VuZE1hbmFnZXIgZnJvbSAnLi4vLi4vLi4vdGFtYm8vanMvc291bmRNYW5hZ2VyLmpzJztcclxuaW1wb3J0IGdyYWJfbXAzIGZyb20gJy4uLy4uLy4uL3RhbWJvL3NvdW5kcy9ncmFiX21wMy5qcyc7XHJcbmltcG9ydCByZWxlYXNlX21wMyBmcm9tICcuLi8uLi8uLi90YW1iby9zb3VuZHMvcmVsZWFzZV9tcDMuanMnO1xyXG5pbXBvcnQgTW92YWJsZU5vZGUgZnJvbSAnLi4vY29tbW9uL3ZpZXcvTW92YWJsZU5vZGUuanMnO1xyXG5pbXBvcnQgc291bmQgZnJvbSAnLi4vc291bmQuanMnO1xyXG5pbXBvcnQgTWVhc3VyZU1vZGVsIGZyb20gJy4uL21lYXN1cmUvTWVhc3VyZU1vZGVsLmpzJztcclxuaW1wb3J0IFNvdW5kU2NyZWVuVmlldyBmcm9tICcuLi9jb21tb24vdmlldy9Tb3VuZFNjcmVlblZpZXcuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWVhc3VyZVZpZXcgZXh0ZW5kcyBTb3VuZFNjcmVlblZpZXcge1xyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggbW9kZWw6IE1lYXN1cmVNb2RlbCApIHtcclxuICAgIHN1cGVyKCBtb2RlbCApO1xyXG5cclxuICAgIGNvbnN0IHJ1bGVyTGVuZ3RoID0gbW9kZWwubW9kZWxWaWV3VHJhbnNmb3JtIS5tb2RlbFRvVmlld0RlbHRhWCggNTAwICk7XHJcbiAgICBjb25zdCBtYWpvclRpY2tNYXJrV2lkdGggPSBydWxlckxlbmd0aCAvICggMTAgKTtcclxuICAgIC8vIENvbXB1dGUgdGljayBsYWJlbHMsIDEgbWFqb3IgdGljayBmb3IgZXZlcnkgMC41IHVuaXQgb2YgbGVuZ3RoLCBsYWJlbHMgb24gdGhlIHRpY2tzIHRoYXQgY29ycmVzcG9uZCB0byBpbnRlZ2VyIHZhbHVlcy5cclxuICAgIGNvbnN0IG1ham9yVGlja0xhYmVscyA9IFtdO1xyXG4gICAgY29uc3QgbnVtYmVyT2ZUaWNrcyA9IDExO1xyXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgbnVtYmVyT2ZUaWNrczsgaSsrICkge1xyXG4gICAgICBtYWpvclRpY2tMYWJlbHNbIGkgXSA9ICggaSAlIDIgPT09IDAgKSA/ICggaSAvIDIgKS50b1N0cmluZygpIDogJyc7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc291bmRDbGlwT3B0aW9ucyA9IHsgaW5pdGlhbE91dHB1dExldmVsOiAwLjQgfTtcclxuICAgIGNvbnN0IGdyYWJTb3VuZCA9IG5ldyBTb3VuZENsaXAoIGdyYWJfbXAzLCBzb3VuZENsaXBPcHRpb25zICk7XHJcbiAgICBzb3VuZE1hbmFnZXIuYWRkU291bmRHZW5lcmF0b3IoIGdyYWJTb3VuZCwgeyBjYXRlZ29yeU5hbWU6ICd1c2VyLWludGVyZmFjZScgfSApO1xyXG5cclxuICAgIGNvbnN0IHJlbGVhc2VTb3VuZCA9IG5ldyBTb3VuZENsaXAoIHJlbGVhc2VfbXAzLCBzb3VuZENsaXBPcHRpb25zICk7XHJcbiAgICBzb3VuZE1hbmFnZXIuYWRkU291bmRHZW5lcmF0b3IoIHJlbGVhc2VTb3VuZCwgeyBjYXRlZ29yeU5hbWU6ICd1c2VyLWludGVyZmFjZScgfSApO1xyXG5cclxuICAgIC8vIFJ1bGVyXHJcbiAgICBjb25zdCBydWxlck5vZGUgPSBuZXcgUnVsZXJOb2RlKCBydWxlckxlbmd0aCwgNTAsIG1ham9yVGlja01hcmtXaWR0aCwgbWFqb3JUaWNrTGFiZWxzLCAnbWV0ZXInLCB7XHJcbiAgICAgIG1pbm9yVGlja3NQZXJNYWpvclRpY2s6IDQsXHJcbiAgICAgIGluc2V0c1dpZHRoOiA2MCxcclxuICAgICAgdW5pdHNNYWpvclRpY2tJbmRleDogMTAsXHJcbiAgICAgIHVuaXRzU3BhY2luZzogOFxyXG4gICAgfSApO1xyXG4gICAgY29uc3QgbW92YWJsZVJ1bGVyID0gbmV3IE1vdmFibGVOb2RlKCBtb2RlbC5ydWxlclBvc2l0aW9uUHJvcGVydHksIHRoaXMudmlzaWJsZUJvdW5kc1Byb3BlcnR5LnZhbHVlLCBNb2RlbFZpZXdUcmFuc2Zvcm0yLmNyZWF0ZU9mZnNldFNjYWxlTWFwcGluZyggbmV3IFZlY3RvcjIoIDAsIDAgKSwgMSApLCBydWxlck5vZGUgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIG1vdmFibGVSdWxlciApO1xyXG5cclxuICAgIC8vIFN0b3B3YXRjaFxyXG4gICAgY29uc3QgY3JlYXRlRm9ybWF0dGVyID0gKCB1bml0czogc3RyaW5nICkgPT4gU3RvcHdhdGNoTm9kZS5jcmVhdGVSaWNoVGV4dE51bWJlckZvcm1hdHRlcigge1xyXG4gICAgICBzaG93QXNNaW51dGVzQW5kU2Vjb25kczogZmFsc2UsXHJcbiAgICAgIHVuaXRzOiB1bml0c1xyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IHN0b3B3YXRjaE5vZGUgPSBuZXcgU3RvcHdhdGNoTm9kZSggbW9kZWwuc3RvcHdhdGNoLCB7XHJcbiAgICAgIGRyYWdCb3VuZHNQcm9wZXJ0eTogdGhpcy52aXNpYmxlQm91bmRzUHJvcGVydHksXHJcbiAgICAgIG51bWJlckRpc3BsYXlPcHRpb25zOiB7XHJcbiAgICAgICAgbnVtYmVyRm9ybWF0dGVyOiBjcmVhdGVGb3JtYXR0ZXIoICdtcycgKVxyXG4gICAgICB9LFxyXG4gICAgICBkcmFnTGlzdGVuZXJPcHRpb25zOiB7XHJcbiAgICAgICAgc3RhcnQ6ICgpID0+IHtcclxuICAgICAgICAgIGdyYWJTb3VuZC5wbGF5KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbmQ6ICgpID0+IHtcclxuICAgICAgICAgIHJlbGVhc2VTb3VuZC5wbGF5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5hZGRDaGlsZCggc3RvcHdhdGNoTm9kZSApO1xyXG4gIH1cclxufVxyXG5cclxuc291bmQucmVnaXN0ZXIoICdNZWFzdXJlVmlldycsIE1lYXN1cmVWaWV3ICk7Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxPQUFPLE1BQU0sNEJBQTRCO0FBQ2hELE9BQU9DLG1CQUFtQixNQUFNLG9EQUFvRDtBQUNwRixPQUFPQyxTQUFTLE1BQU0sdUNBQXVDO0FBQzdELE9BQU9DLGFBQWEsTUFBTSwyQ0FBMkM7QUFDckUsT0FBT0MsU0FBUyxNQUFNLGlEQUFpRDtBQUN2RSxPQUFPQyxZQUFZLE1BQU0sbUNBQW1DO0FBQzVELE9BQU9DLFFBQVEsTUFBTSxtQ0FBbUM7QUFDeEQsT0FBT0MsV0FBVyxNQUFNLHNDQUFzQztBQUM5RCxPQUFPQyxXQUFXLE1BQU0sK0JBQStCO0FBQ3ZELE9BQU9DLEtBQUssTUFBTSxhQUFhO0FBRS9CLE9BQU9DLGVBQWUsTUFBTSxtQ0FBbUM7QUFFL0QsZUFBZSxNQUFN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