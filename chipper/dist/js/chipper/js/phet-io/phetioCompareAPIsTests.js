// Copyright 2021-2023, University of Colorado Boulder

/**
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */

const qunit = require('qunit');
const assert = require('assert');
const _phetioCompareAPIs = require('./phetioCompareAPIs'); // eslint-disable-line require-statement-match
const _ = require('lodash');
qunit.module('phetioCompareAPIs');

/**
 * @param referenceAPI
 * @param proposedAPI
 * @param options
 * @returns {{breakingProblems: string[], designedProblems: string[], newAPI: Object}}
 */
const phetioCompareAPIs = (referenceAPI, proposedAPI, options) => {
  return _phetioCompareAPIs(referenceAPI, proposedAPI, _, assert, options);
};

// To cover the boilerplate that will be largely copied around otherwise.
const DEFAULT_API = {
  phetioElements: {},
  phetioFullAPI: true,
  phetioTypes: {
    ObjectIO: {
      documentation: 'The root of the IO Type hierarchy',
      events: [],
      metadataDefaults: {
        phetioArchetypePhetioID: null,
        phetioDesigned: false,
        phetioDocumentation: '',
        phetioDynamicElement: false,
        phetioEventType: 'MODEL',
        phetioFeatured: false,
        phetioHighFrequency: false,
        phetioIsArchetype: false,
        phetioPlayback: false,
        phetioReadOnly: false,
        phetioState: true,
        phetioTypeName: 'ObjectIO'
      },
      methodOrder: [],
      methods: {},
      parameterTypes: [],
      supertype: null,
      typeName: 'ObjectIO'
    }
  },
  sim: 'natural-selection',
  version: {
    major: 1,
    minor: 0
  }
};
qunit.test('basics', assert => {
  const referenceAPI = _.merge({
    phetioElements: {
      phetioEngine: {
        _metadata: {
          phetioDocumentation: 'Central point for PhET-iO interoperability. Please see the IO Type Documentation for API details.',
          phetioEventType: 'MODEL',
          phetioState: false,
          phetioTypeName: 'ObjectIO'
        }
      }
    }
  }, DEFAULT_API);
  const proposedAPI = _.cloneDeep(referenceAPI);
  let report = phetioCompareAPIs(referenceAPI, proposedAPI);
  assert.ok(report.breakingProblems.length === 0, 'no breaking problems when compare to self');
  assert.ok(report.designedProblems.length === 0, 'no designed problems when compare to self');
  proposedAPI.phetioElements.phetioEngine._metadata.phetioPlayback = true;
  report = phetioCompareAPIs(referenceAPI, proposedAPI);
  assert.ok(report.breakingProblems.length === 1, 'no breaking problems when compare to self');
  assert.ok(report.designedProblems.length === 0, 'no designed problems when compare to self');
});
qunit.test('designed changes', assert => {
  const referenceAPI = _.merge({
    phetioElements: {
      designedElement: {
        _metadata: {
          phetioDesigned: true
        },
        designedChild: {
          _metadata: {}
        }
      }
    }
  }, DEFAULT_API);
  const proposedAPI = _.cloneDeep(referenceAPI);
  proposedAPI.phetioElements.designedElement._metadata.phetioDocumentation = 'changed though I am designed, oh boy, this cannot be good.';
  let report = phetioCompareAPIs(referenceAPI, proposedAPI);
  assert.ok(report.breakingProblems.length === 0, 'no breaking problems when compare to design change');
  assert.ok(report.designedProblems.length === 1, 'no designed problems when changing designed problem');
  proposedAPI.phetioElements.designedElement.designedChild._metadata.phetioDocumentation = 'changed though I am a child of designed, oh boy, this cannot be good.';
  report = phetioCompareAPIs(referenceAPI, proposedAPI);
  assert.ok(report.breakingProblems.length === 0, 'no breaking problems when compare to design change');
  assert.ok(report.designedProblems.length === 2, 'no designed problems when changing designed problem on child');

  // in the reference, but not the proposed
  referenceAPI.phetioElements.designedElement.otherChild = {
    _metadata: {}
  };
  report = phetioCompareAPIs(referenceAPI, proposedAPI);
  assert.ok(report.breakingProblems.length === 1, 'cannot delete children like otherChild');

  // test shut off switch suppresses problems
  report = phetioCompareAPIs(referenceAPI, proposedAPI, {
    compareDesignedAPIChanges: false,
    compareBreakingAPIChanges: false
  });
  assert.ok(report.breakingProblems.length === 0, 'no breaking problems if not testing for them');
  assert.ok(report.designedProblems.length === 0, 'no designed problems if not testing for them');
});
qunit.test('breaking element API changes', assert => {
  const referenceAPI = _.merge({
    phetioElements: {
      breakingElement: {
        _metadata: {
          phetioDesigned: true
        },
        designedChild: {
          _metadata: {}
        }
      }
    }
  }, DEFAULT_API);
  let proposedAPI = _.cloneDeep(referenceAPI);
  delete proposedAPI.phetioElements.breakingElement.designedChild;
  let report = phetioCompareAPIs(referenceAPI, proposedAPI);
  assert.ok(report.breakingProblems.length === 1, 'missing an element');
  assert.ok(report.designedProblems.length === 1, 'missing element is also a designed problem');
  referenceAPI.phetioElements.breakingElement._metadata.phetioDesigned = false;
  report = phetioCompareAPIs(referenceAPI, proposedAPI);
  assert.ok(report.breakingProblems.length === 1, 'missing an element');
  assert.ok(report.designedProblems.length === 0, 'not a problem if not designed in the reference');
  const testMetadataKeyChange = (metadataKey, valueThatBreaksAPI) => {
    proposedAPI = _.cloneDeep(referenceAPI);
    proposedAPI.phetioElements.breakingElement._metadata[metadataKey] = valueThatBreaksAPI;
    report = phetioCompareAPIs(referenceAPI, proposedAPI, {
      compareDesignedAPIChanges: false
    });
    assert.ok(report.breakingProblems.length === 1, `it is a breaking change for ${metadataKey} to become ${valueThatBreaksAPI}`);
  };

  // All values that would constitute a breaking change, sometimes breaking the comparison task with an assertion.
  const metadataBreakingData = [{
    metadataKey: 'phetioTypeName',
    value: 'OtherTypeIO',
    assert: true
  }, {
    metadataKey: 'phetioTypeName',
    value: true,
    assert: true
  }, {
    metadataKey: 'phetioEventType',
    value: true
  }, {
    metadataKey: 'phetioEventType',
    value: 'MOdDEL'
  }, {
    metadataKey: 'phetioEventType',
    value: 'USER'
  }, {
    metadataKey: 'phetioPlayback',
    value: true
  }, {
    metadataKey: 'phetioPlayback',
    value: '"a string"'
  }, {
    metadataKey: 'phetioDynamicElement',
    value: true
  }, {
    metadataKey: 'phetioIsArchetype',
    value: true
  }, {
    metadataKey: 'phetioIsArchetype',
    value: 'hi'
  }, {
    metadataKey: 'phetioArchetypePhetioID',
    value: true
  }, {
    metadataKey: 'phetioArchetypePhetioID',
    value: false
  }, {
    metadataKey: 'phetioArchetypePhetioID',
    value: 'wrongPhetioID'
  }, {
    metadataKey: 'phetioState',
    value: false
  }, {
    metadataKey: 'phetioReadOnly',
    value: true
  }];
  metadataBreakingData.forEach(testData => {
    const test = () => testMetadataKeyChange(testData.metadataKey, testData.value);
    if (testData.assert) {
      assert.throws(() => {
        test();
      }, `assertion expected with key: ${testData.key}, and wrong value: ${testData.value}`);
    } else {
      test();
    }
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJxdW5pdCIsInJlcXVpcmUiLCJhc3NlcnQiLCJfcGhldGlvQ29tcGFyZUFQSXMiLCJfIiwibW9kdWxlIiwicGhldGlvQ29tcGFyZUFQSXMiLCJyZWZlcmVuY2VBUEkiLCJwcm9wb3NlZEFQSSIsIm9wdGlvbnMiLCJERUZBVUxUX0FQSSIsInBoZXRpb0VsZW1lbnRzIiwicGhldGlvRnVsbEFQSSIsInBoZXRpb1R5cGVzIiwiT2JqZWN0SU8iLCJkb2N1bWVudGF0aW9uIiwiZXZlbnRzIiwibWV0YWRhdGFEZWZhdWx0cyIsInBoZXRpb0FyY2hldHlwZVBoZXRpb0lEIiwicGhldGlvRGVzaWduZWQiLCJwaGV0aW9Eb2N1bWVudGF0aW9uIiwicGhldGlvRHluYW1pY0VsZW1lbnQiLCJwaGV0aW9FdmVudFR5cGUiLCJwaGV0aW9GZWF0dXJlZCIsInBoZXRpb0hpZ2hGcmVxdWVuY3kiLCJwaGV0aW9Jc0FyY2hldHlwZSIsInBoZXRpb1BsYXliYWNrIiwicGhldGlvUmVhZE9ubHkiLCJwaGV0aW9TdGF0ZSIsInBoZXRpb1R5cGVOYW1lIiwibWV0aG9kT3JkZXIiLCJtZXRob2RzIiwicGFyYW1ldGVyVHlwZXMiLCJzdXBlcnR5cGUiLCJ0eXBlTmFtZSIsInNpbSIsInZlcnNpb24iLCJtYWpvciIsIm1pbm9yIiwidGVzdCIsIm1lcmdlIiwicGhldGlvRW5naW5lIiwiX21ldGFkYXRhIiwiY2xvbmVEZWVwIiwicmVwb3J0Iiwib2siLCJicmVha2luZ1Byb2JsZW1zIiwibGVuZ3RoIiwiZGVzaWduZWRQcm9ibGVtcyIsImRlc2lnbmVkRWxlbWVudCIsImRlc2lnbmVkQ2hpbGQiLCJvdGhlckNoaWxkIiwiY29tcGFyZURlc2lnbmVkQVBJQ2hhbmdlcyIsImNvbXBhcmVCcmVha2luZ0FQSUNoYW5nZXMiLCJicmVha2luZ0VsZW1lbnQiLCJ0ZXN0TWV0YWRhdGFLZXlDaGFuZ2UiLCJtZXRhZGF0YUtleSIsInZhbHVlVGhhdEJyZWFrc0FQSSIsIm1ldGFkYXRhQnJlYWtpbmdEYXRhIiwidmFsdWUiLCJmb3JFYWNoIiwidGVzdERhdGEiLCJ0aHJvd3MiLCJrZXkiXSwic291cmNlcyI6WyJwaGV0aW9Db21wYXJlQVBJc1Rlc3RzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIxLTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIEBhdXRob3IgTWljaGFlbCBLYXV6bWFubiAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICovXHJcblxyXG5cclxuY29uc3QgcXVuaXQgPSByZXF1aXJlKCAncXVuaXQnICk7XHJcbmNvbnN0IGFzc2VydCA9IHJlcXVpcmUoICdhc3NlcnQnICk7XHJcbmNvbnN0IF9waGV0aW9Db21wYXJlQVBJcyA9IHJlcXVpcmUoICcuL3BoZXRpb0NvbXBhcmVBUElzJyApOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHJlcXVpcmUtc3RhdGVtZW50LW1hdGNoXHJcbmNvbnN0IF8gPSByZXF1aXJlKCAnbG9kYXNoJyApO1xyXG5cclxucXVuaXQubW9kdWxlKCAncGhldGlvQ29tcGFyZUFQSXMnICk7XHJcblxyXG4vKipcclxuICogQHBhcmFtIHJlZmVyZW5jZUFQSVxyXG4gKiBAcGFyYW0gcHJvcG9zZWRBUElcclxuICogQHBhcmFtIG9wdGlvbnNcclxuICogQHJldHVybnMge3ticmVha2luZ1Byb2JsZW1zOiBzdHJpbmdbXSwgZGVzaWduZWRQcm9ibGVtczogc3RyaW5nW10sIG5ld0FQSTogT2JqZWN0fX1cclxuICovXHJcbmNvbnN0IHBoZXRpb0NvbXBhcmVBUElzID0gKCByZWZlcmVuY2VBUEksIHByb3Bvc2VkQVBJLCBvcHRpb25zICkgPT4ge1xyXG4gIHJldHVybiBfcGhldGlvQ29tcGFyZUFQSXMoIHJlZmVyZW5jZUFQSSwgcHJvcG9zZWRBUEksIF8sIGFzc2VydCwgb3B0aW9ucyApO1xyXG59O1xyXG5cclxuLy8gVG8gY292ZXIgdGhlIGJvaWxlcnBsYXRlIHRoYXQgd2lsbCBiZSBsYXJnZWx5IGNvcGllZCBhcm91bmQgb3RoZXJ3aXNlLlxyXG5jb25zdCBERUZBVUxUX0FQSSA9IHtcclxuICBwaGV0aW9FbGVtZW50czoge30sXHJcbiAgcGhldGlvRnVsbEFQSTogdHJ1ZSxcclxuICBwaGV0aW9UeXBlczoge1xyXG4gICAgT2JqZWN0SU86IHtcclxuICAgICAgZG9jdW1lbnRhdGlvbjogJ1RoZSByb290IG9mIHRoZSBJTyBUeXBlIGhpZXJhcmNoeScsXHJcbiAgICAgIGV2ZW50czogW10sXHJcbiAgICAgIG1ldGFkYXRhRGVmYXVsdHM6IHtcclxuICAgICAgICBwaGV0aW9BcmNoZXR5cGVQaGV0aW9JRDogbnVsbCxcclxuICAgICAgICBwaGV0aW9EZXNpZ25lZDogZmFsc2UsXHJcbiAgICAgICAgcGhldGlvRG9jdW1lbnRhdGlvbjogJycsXHJcbiAgICAgICAgcGhldGlvRHluYW1pY0VsZW1lbnQ6IGZhbHNlLFxyXG4gICAgICAgIHBoZXRpb0V2ZW50VHlwZTogJ01PREVMJyxcclxuICAgICAgICBwaGV0aW9GZWF0dXJlZDogZmFsc2UsXHJcbiAgICAgICAgcGhldGlvSGlnaEZyZXF1ZW5jeTogZmFsc2UsXHJcbiAgICAgICAgcGhldGlvSXNBcmNoZXR5cGU6IGZhbHNlLFxyXG4gICAgICAgIHBoZXRpb1BsYXliYWNrOiBmYWxzZSxcclxuICAgICAgICBwaGV0aW9SZWFkT25seTogZmFsc2UsXHJcbiAgICAgICAgcGhldGlvU3RhdGU6IHRydWUsXHJcbiAgICAgICAgcGhldGlvVHlwZU5hbWU6ICdPYmplY3RJTydcclxuICAgICAgfSxcclxuICAgICAgbWV0aG9kT3JkZXI6IFtdLFxyXG4gICAgICBtZXRob2RzOiB7fSxcclxuICAgICAgcGFyYW1ldGVyVHlwZXM6IFtdLFxyXG4gICAgICBzdXBlcnR5cGU6IG51bGwsXHJcbiAgICAgIHR5cGVOYW1lOiAnT2JqZWN0SU8nXHJcbiAgICB9XHJcbiAgfSxcclxuICBzaW06ICduYXR1cmFsLXNlbGVjdGlvbicsXHJcbiAgdmVyc2lvbjoge1xyXG4gICAgbWFqb3I6IDEsXHJcbiAgICBtaW5vcjogMFxyXG4gIH1cclxufTtcclxuXHJcblxyXG5xdW5pdC50ZXN0KCAnYmFzaWNzJywgYXNzZXJ0ID0+IHtcclxuXHJcbiAgY29uc3QgcmVmZXJlbmNlQVBJID0gXy5tZXJnZSgge1xyXG4gICAgcGhldGlvRWxlbWVudHM6IHtcclxuICAgICAgcGhldGlvRW5naW5lOiB7XHJcbiAgICAgICAgX21ldGFkYXRhOiB7XHJcbiAgICAgICAgICBwaGV0aW9Eb2N1bWVudGF0aW9uOiAnQ2VudHJhbCBwb2ludCBmb3IgUGhFVC1pTyBpbnRlcm9wZXJhYmlsaXR5LiBQbGVhc2Ugc2VlIHRoZSBJTyBUeXBlIERvY3VtZW50YXRpb24gZm9yIEFQSSBkZXRhaWxzLicsXHJcbiAgICAgICAgICBwaGV0aW9FdmVudFR5cGU6ICdNT0RFTCcsXHJcbiAgICAgICAgICBwaGV0aW9TdGF0ZTogZmFsc2UsXHJcbiAgICAgICAgICBwaGV0aW9UeXBlTmFtZTogJ09iamVjdElPJ1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sIERFRkFVTFRfQVBJICk7XHJcblxyXG4gIGNvbnN0IHByb3Bvc2VkQVBJID0gXy5jbG9uZURlZXAoIHJlZmVyZW5jZUFQSSApO1xyXG5cclxuICBsZXQgcmVwb3J0ID0gcGhldGlvQ29tcGFyZUFQSXMoIHJlZmVyZW5jZUFQSSwgcHJvcG9zZWRBUEkgKTtcclxuXHJcbiAgYXNzZXJ0Lm9rKCByZXBvcnQuYnJlYWtpbmdQcm9ibGVtcy5sZW5ndGggPT09IDAsICdubyBicmVha2luZyBwcm9ibGVtcyB3aGVuIGNvbXBhcmUgdG8gc2VsZicgKTtcclxuICBhc3NlcnQub2soIHJlcG9ydC5kZXNpZ25lZFByb2JsZW1zLmxlbmd0aCA9PT0gMCwgJ25vIGRlc2lnbmVkIHByb2JsZW1zIHdoZW4gY29tcGFyZSB0byBzZWxmJyApO1xyXG5cclxuXHJcbiAgcHJvcG9zZWRBUEkucGhldGlvRWxlbWVudHMucGhldGlvRW5naW5lLl9tZXRhZGF0YS5waGV0aW9QbGF5YmFjayA9IHRydWU7XHJcblxyXG4gIHJlcG9ydCA9IHBoZXRpb0NvbXBhcmVBUElzKCByZWZlcmVuY2VBUEksIHByb3Bvc2VkQVBJICk7XHJcblxyXG4gIGFzc2VydC5vayggcmVwb3J0LmJyZWFraW5nUHJvYmxlbXMubGVuZ3RoID09PSAxLCAnbm8gYnJlYWtpbmcgcHJvYmxlbXMgd2hlbiBjb21wYXJlIHRvIHNlbGYnICk7XHJcbiAgYXNzZXJ0Lm9rKCByZXBvcnQuZGVzaWduZWRQcm9ibGVtcy5sZW5ndGggPT09IDAsICdubyBkZXNpZ25lZCBwcm9ibGVtcyB3aGVuIGNvbXBhcmUgdG8gc2VsZicgKTtcclxufSApO1xyXG5cclxuXHJcbnF1bml0LnRlc3QoICdkZXNpZ25lZCBjaGFuZ2VzJywgYXNzZXJ0ID0+IHtcclxuICBjb25zdCByZWZlcmVuY2VBUEkgPSBfLm1lcmdlKCB7XHJcbiAgICBwaGV0aW9FbGVtZW50czoge1xyXG4gICAgICBkZXNpZ25lZEVsZW1lbnQ6IHtcclxuICAgICAgICBfbWV0YWRhdGE6IHtcclxuICAgICAgICAgIHBoZXRpb0Rlc2lnbmVkOiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkZXNpZ25lZENoaWxkOiB7XHJcbiAgICAgICAgICBfbWV0YWRhdGE6IHt9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSwgREVGQVVMVF9BUEkgKTtcclxuXHJcbiAgY29uc3QgcHJvcG9zZWRBUEkgPSBfLmNsb25lRGVlcCggcmVmZXJlbmNlQVBJICk7XHJcblxyXG4gIHByb3Bvc2VkQVBJLnBoZXRpb0VsZW1lbnRzLmRlc2lnbmVkRWxlbWVudC5fbWV0YWRhdGEucGhldGlvRG9jdW1lbnRhdGlvbiA9ICdjaGFuZ2VkIHRob3VnaCBJIGFtIGRlc2lnbmVkLCBvaCBib3ksIHRoaXMgY2Fubm90IGJlIGdvb2QuJztcclxuXHJcbiAgbGV0IHJlcG9ydCA9IHBoZXRpb0NvbXBhcmVBUElzKCByZWZlcmVuY2VBUEksIHByb3Bvc2VkQVBJICk7XHJcbiAgYXNzZXJ0Lm9rKCByZXBvcnQuYnJlYWtpbmdQcm9ibGVtcy5sZW5ndGggPT09IDAsICdubyBicmVha2luZyBwcm9ibGVtcyB3aGVuIGNvbXBhcmUgdG8gZGVzaWduIGNoYW5nZScgKTtcclxuICBhc3NlcnQub2soIHJlcG9ydC5kZXNpZ25lZFByb2JsZW1zLmxlbmd0aCA9PT0gMSwgJ25vIGRlc2lnbmVkIHByb2JsZW1zIHdoZW4gY2hhbmdpbmcgZGVzaWduZWQgcHJvYmxlbScgKTtcclxuXHJcbiAgcHJvcG9zZWRBUEkucGhldGlvRWxlbWVudHMuZGVzaWduZWRFbGVtZW50LmRlc2lnbmVkQ2hpbGQuX21ldGFkYXRhLnBoZXRpb0RvY3VtZW50YXRpb24gPVxyXG4gICAgJ2NoYW5nZWQgdGhvdWdoIEkgYW0gYSBjaGlsZCBvZiBkZXNpZ25lZCwgb2ggYm95LCB0aGlzIGNhbm5vdCBiZSBnb29kLic7XHJcblxyXG4gIHJlcG9ydCA9IHBoZXRpb0NvbXBhcmVBUElzKCByZWZlcmVuY2VBUEksIHByb3Bvc2VkQVBJICk7XHJcbiAgYXNzZXJ0Lm9rKCByZXBvcnQuYnJlYWtpbmdQcm9ibGVtcy5sZW5ndGggPT09IDAsICdubyBicmVha2luZyBwcm9ibGVtcyB3aGVuIGNvbXBhcmUgdG8gZGVzaWduIGNoYW5nZScgKTtcclxuICBhc3NlcnQub2soIHJlcG9ydC5kZXNpZ25lZFByb2JsZW1zLmxlbmd0aCA9PT0gMiwgJ25vIGRlc2lnbmVkIHByb2JsZW1zIHdoZW4gY2hhbmdpbmcgZGVzaWduZWQgcHJvYmxlbSBvbiBjaGlsZCcgKTtcclxuXHJcblxyXG4gIC8vIGluIHRoZSByZWZlcmVuY2UsIGJ1dCBub3QgdGhlIHByb3Bvc2VkXHJcbiAgcmVmZXJlbmNlQVBJLnBoZXRpb0VsZW1lbnRzLmRlc2lnbmVkRWxlbWVudC5vdGhlckNoaWxkID0geyBfbWV0YWRhdGE6IHt9IH07XHJcbiAgcmVwb3J0ID0gcGhldGlvQ29tcGFyZUFQSXMoIHJlZmVyZW5jZUFQSSwgcHJvcG9zZWRBUEkgKTtcclxuICBhc3NlcnQub2soIHJlcG9ydC5icmVha2luZ1Byb2JsZW1zLmxlbmd0aCA9PT0gMSwgJ2Nhbm5vdCBkZWxldGUgY2hpbGRyZW4gbGlrZSBvdGhlckNoaWxkJyApO1xyXG5cclxuICAvLyB0ZXN0IHNodXQgb2ZmIHN3aXRjaCBzdXBwcmVzc2VzIHByb2JsZW1zXHJcbiAgcmVwb3J0ID0gcGhldGlvQ29tcGFyZUFQSXMoIHJlZmVyZW5jZUFQSSwgcHJvcG9zZWRBUEksIHtcclxuICAgIGNvbXBhcmVEZXNpZ25lZEFQSUNoYW5nZXM6IGZhbHNlLFxyXG4gICAgY29tcGFyZUJyZWFraW5nQVBJQ2hhbmdlczogZmFsc2VcclxuICB9ICk7XHJcbiAgYXNzZXJ0Lm9rKCByZXBvcnQuYnJlYWtpbmdQcm9ibGVtcy5sZW5ndGggPT09IDAsICdubyBicmVha2luZyBwcm9ibGVtcyBpZiBub3QgdGVzdGluZyBmb3IgdGhlbScgKTtcclxuICBhc3NlcnQub2soIHJlcG9ydC5kZXNpZ25lZFByb2JsZW1zLmxlbmd0aCA9PT0gMCwgJ25vIGRlc2lnbmVkIHByb2JsZW1zIGlmIG5vdCB0ZXN0aW5nIGZvciB0aGVtJyApO1xyXG59ICk7XHJcblxyXG5cclxucXVuaXQudGVzdCggJ2JyZWFraW5nIGVsZW1lbnQgQVBJIGNoYW5nZXMnLCBhc3NlcnQgPT4ge1xyXG4gIGNvbnN0IHJlZmVyZW5jZUFQSSA9IF8ubWVyZ2UoIHtcclxuICAgIHBoZXRpb0VsZW1lbnRzOiB7XHJcbiAgICAgIGJyZWFraW5nRWxlbWVudDoge1xyXG4gICAgICAgIF9tZXRhZGF0YToge1xyXG4gICAgICAgICAgcGhldGlvRGVzaWduZWQ6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRlc2lnbmVkQ2hpbGQ6IHtcclxuICAgICAgICAgIF9tZXRhZGF0YToge31cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LCBERUZBVUxUX0FQSSApO1xyXG5cclxuICBsZXQgcHJvcG9zZWRBUEkgPSBfLmNsb25lRGVlcCggcmVmZXJlbmNlQVBJICk7XHJcblxyXG4gIGRlbGV0ZSBwcm9wb3NlZEFQSS5waGV0aW9FbGVtZW50cy5icmVha2luZ0VsZW1lbnQuZGVzaWduZWRDaGlsZDtcclxuXHJcbiAgbGV0IHJlcG9ydCA9IHBoZXRpb0NvbXBhcmVBUElzKCByZWZlcmVuY2VBUEksIHByb3Bvc2VkQVBJICk7XHJcbiAgYXNzZXJ0Lm9rKCByZXBvcnQuYnJlYWtpbmdQcm9ibGVtcy5sZW5ndGggPT09IDEsICdtaXNzaW5nIGFuIGVsZW1lbnQnICk7XHJcbiAgYXNzZXJ0Lm9rKCByZXBvcnQuZGVzaWduZWRQcm9ibGVtcy5sZW5ndGggPT09IDEsICdtaXNzaW5nIGVsZW1lbnQgaXMgYWxzbyBhIGRlc2lnbmVkIHByb2JsZW0nICk7XHJcblxyXG4gIHJlZmVyZW5jZUFQSS5waGV0aW9FbGVtZW50cy5icmVha2luZ0VsZW1lbnQuX21ldGFkYXRhLnBoZXRpb0Rlc2lnbmVkID0gZmFsc2U7XHJcblxyXG4gIHJlcG9ydCA9IHBoZXRpb0NvbXBhcmVBUElzKCByZWZlcmVuY2VBUEksIHByb3Bvc2VkQVBJICk7XHJcbiAgYXNzZXJ0Lm9rKCByZXBvcnQuYnJlYWtpbmdQcm9ibGVtcy5sZW5ndGggPT09IDEsICdtaXNzaW5nIGFuIGVsZW1lbnQnICk7XHJcbiAgYXNzZXJ0Lm9rKCByZXBvcnQuZGVzaWduZWRQcm9ibGVtcy5sZW5ndGggPT09IDAsICdub3QgYSBwcm9ibGVtIGlmIG5vdCBkZXNpZ25lZCBpbiB0aGUgcmVmZXJlbmNlJyApO1xyXG5cclxuICBjb25zdCB0ZXN0TWV0YWRhdGFLZXlDaGFuZ2UgPSAoIG1ldGFkYXRhS2V5LCB2YWx1ZVRoYXRCcmVha3NBUEkgKSA9PiB7XHJcblxyXG4gICAgcHJvcG9zZWRBUEkgPSBfLmNsb25lRGVlcCggcmVmZXJlbmNlQVBJICk7XHJcblxyXG4gICAgcHJvcG9zZWRBUEkucGhldGlvRWxlbWVudHMuYnJlYWtpbmdFbGVtZW50Ll9tZXRhZGF0YVsgbWV0YWRhdGFLZXkgXSA9IHZhbHVlVGhhdEJyZWFrc0FQSTtcclxuXHJcbiAgICByZXBvcnQgPSBwaGV0aW9Db21wYXJlQVBJcyggcmVmZXJlbmNlQVBJLCBwcm9wb3NlZEFQSSwge1xyXG4gICAgICBjb21wYXJlRGVzaWduZWRBUElDaGFuZ2VzOiBmYWxzZVxyXG4gICAgfSApO1xyXG4gICAgYXNzZXJ0Lm9rKCByZXBvcnQuYnJlYWtpbmdQcm9ibGVtcy5sZW5ndGggPT09IDEsIGBpdCBpcyBhIGJyZWFraW5nIGNoYW5nZSBmb3IgJHttZXRhZGF0YUtleX0gdG8gYmVjb21lICR7dmFsdWVUaGF0QnJlYWtzQVBJfWAgKTtcclxuICB9O1xyXG5cclxuICAvLyBBbGwgdmFsdWVzIHRoYXQgd291bGQgY29uc3RpdHV0ZSBhIGJyZWFraW5nIGNoYW5nZSwgc29tZXRpbWVzIGJyZWFraW5nIHRoZSBjb21wYXJpc29uIHRhc2sgd2l0aCBhbiBhc3NlcnRpb24uXHJcbiAgY29uc3QgbWV0YWRhdGFCcmVha2luZ0RhdGEgPSBbXHJcbiAgICB7IG1ldGFkYXRhS2V5OiAncGhldGlvVHlwZU5hbWUnLCB2YWx1ZTogJ090aGVyVHlwZUlPJywgYXNzZXJ0OiB0cnVlIH0sXHJcbiAgICB7IG1ldGFkYXRhS2V5OiAncGhldGlvVHlwZU5hbWUnLCB2YWx1ZTogdHJ1ZSwgYXNzZXJ0OiB0cnVlIH0sXHJcbiAgICB7IG1ldGFkYXRhS2V5OiAncGhldGlvRXZlbnRUeXBlJywgdmFsdWU6IHRydWUgfSxcclxuICAgIHsgbWV0YWRhdGFLZXk6ICdwaGV0aW9FdmVudFR5cGUnLCB2YWx1ZTogJ01PZERFTCcgfSxcclxuICAgIHsgbWV0YWRhdGFLZXk6ICdwaGV0aW9FdmVudFR5cGUnLCB2YWx1ZTogJ1VTRVInIH0sXHJcbiAgICB7IG1ldGFkYXRhS2V5OiAncGhldGlvUGxheWJhY2snLCB2YWx1ZTogdHJ1ZSB9LFxyXG4gICAgeyBtZXRhZGF0YUtleTogJ3BoZXRpb1BsYXliYWNrJywgdmFsdWU6ICdcImEgc3RyaW5nXCInIH0sXHJcbiAgICB7IG1ldGFkYXRhS2V5OiAncGhldGlvRHluYW1pY0VsZW1lbnQnLCB2YWx1ZTogdHJ1ZSB9LFxyXG4gICAgeyBtZXRhZGF0YUtleTogJ3BoZXRpb0lzQXJjaGV0eXBlJywgdmFsdWU6IHRydWUgfSxcclxuICAgIHsgbWV0YWRhdGFLZXk6ICdwaGV0aW9Jc0FyY2hldHlwZScsIHZhbHVlOiAnaGknIH0sXHJcbiAgICB7IG1ldGFkYXRhS2V5OiAncGhldGlvQXJjaGV0eXBlUGhldGlvSUQnLCB2YWx1ZTogdHJ1ZSB9LFxyXG4gICAgeyBtZXRhZGF0YUtleTogJ3BoZXRpb0FyY2hldHlwZVBoZXRpb0lEJywgdmFsdWU6IGZhbHNlIH0sXHJcbiAgICB7IG1ldGFkYXRhS2V5OiAncGhldGlvQXJjaGV0eXBlUGhldGlvSUQnLCB2YWx1ZTogJ3dyb25nUGhldGlvSUQnIH0sXHJcbiAgICB7IG1ldGFkYXRhS2V5OiAncGhldGlvU3RhdGUnLCB2YWx1ZTogZmFsc2UgfSxcclxuICAgIHsgbWV0YWRhdGFLZXk6ICdwaGV0aW9SZWFkT25seScsIHZhbHVlOiB0cnVlIH1cclxuICBdO1xyXG5cclxuICBtZXRhZGF0YUJyZWFraW5nRGF0YS5mb3JFYWNoKCB0ZXN0RGF0YSA9PiB7XHJcblxyXG4gICAgY29uc3QgdGVzdCA9ICgpID0+IHRlc3RNZXRhZGF0YUtleUNoYW5nZSggdGVzdERhdGEubWV0YWRhdGFLZXksIHRlc3REYXRhLnZhbHVlICk7XHJcblxyXG4gICAgaWYgKCB0ZXN0RGF0YS5hc3NlcnQgKSB7XHJcbiAgICAgIGFzc2VydC50aHJvd3MoICgpID0+IHtcclxuICAgICAgICB0ZXN0KCk7XHJcbiAgICAgIH0sIGBhc3NlcnRpb24gZXhwZWN0ZWQgd2l0aCBrZXk6ICR7dGVzdERhdGEua2V5fSwgYW5kIHdyb25nIHZhbHVlOiAke3Rlc3REYXRhLnZhbHVlfWAgKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0ZXN0KCk7XHJcbiAgICB9XHJcbiAgfSApO1xyXG59ICk7XHJcbiJdLCJtYXBwaW5ncyI6IkFB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