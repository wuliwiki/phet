// Copyright 2020-2021, University of Colorado Boulder

/**
 * For a given repository, it returns the JSON object content that should go in phet.chipper.stringRepos for a
 * compilation-free simulation run.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

// modules
const fs = require('fs');
const getDependencies = require('./getDependencies');

/**
 * @returns {Promise.<Object>}
 */
module.exports = async repo => {
  return Object.keys(await getDependencies(repo)).filter(stringRepo => stringRepo !== 'comment').filter(stringRepo => {
    return fs.existsSync(`../${stringRepo}/${stringRepo}-strings_en.json`);
  }).map(stringRepo => {
    return {
      repo: stringRepo,
      requirejsNamespace: JSON.parse(fs.readFileSync(`../${stringRepo}/package.json`, 'utf-8')).phet.requirejsNamespace
    };
  });
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmcyIsInJlcXVpcmUiLCJnZXREZXBlbmRlbmNpZXMiLCJtb2R1bGUiLCJleHBvcnRzIiwicmVwbyIsIk9iamVjdCIsImtleXMiLCJmaWx0ZXIiLCJzdHJpbmdSZXBvIiwiZXhpc3RzU3luYyIsIm1hcCIsInJlcXVpcmVqc05hbWVzcGFjZSIsIkpTT04iLCJwYXJzZSIsInJlYWRGaWxlU3luYyIsInBoZXQiXSwic291cmNlcyI6WyJnZXRTdHJpbmdSZXBvcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMC0yMDIxLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBGb3IgYSBnaXZlbiByZXBvc2l0b3J5LCBpdCByZXR1cm5zIHRoZSBKU09OIG9iamVjdCBjb250ZW50IHRoYXQgc2hvdWxkIGdvIGluIHBoZXQuY2hpcHBlci5zdHJpbmdSZXBvcyBmb3IgYVxyXG4gKiBjb21waWxhdGlvbi1mcmVlIHNpbXVsYXRpb24gcnVuLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XHJcbiAqL1xyXG5cclxuXHJcbi8vIG1vZHVsZXNcclxuY29uc3QgZnMgPSByZXF1aXJlKCAnZnMnICk7XHJcbmNvbnN0IGdldERlcGVuZGVuY2llcyA9IHJlcXVpcmUoICcuL2dldERlcGVuZGVuY2llcycgKTtcclxuXHJcbi8qKlxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48T2JqZWN0Pn1cclxuICovXHJcbm1vZHVsZS5leHBvcnRzID0gYXN5bmMgcmVwbyA9PiB7XHJcbiAgcmV0dXJuIE9iamVjdC5rZXlzKCBhd2FpdCBnZXREZXBlbmRlbmNpZXMoIHJlcG8gKSApLmZpbHRlciggc3RyaW5nUmVwbyA9PiBzdHJpbmdSZXBvICE9PSAnY29tbWVudCcgKS5maWx0ZXIoIHN0cmluZ1JlcG8gPT4ge1xyXG4gICAgcmV0dXJuIGZzLmV4aXN0c1N5bmMoIGAuLi8ke3N0cmluZ1JlcG99LyR7c3RyaW5nUmVwb30tc3RyaW5nc19lbi5qc29uYCApO1xyXG4gIH0gKS5tYXAoIHN0cmluZ1JlcG8gPT4ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVwbzogc3RyaW5nUmVwbyxcclxuICAgICAgcmVxdWlyZWpzTmFtZXNwYWNlOiBKU09OLnBhcnNlKCBmcy5yZWFkRmlsZVN5bmMoIGAuLi8ke3N0cmluZ1JlcG99L3BhY2thZ2UuanNvbmAsICd1dGYtOCcgKSApLnBoZXQucmVxdWlyZWpzTmFtZXNwYWNlXHJcbiAgICB9O1xyXG4gIH0gKTtcclxufTtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQSxNQUFNQSxFQUFFLEdBQUdDLE9BQU8sQ0FBRSxJQUFLLENBQUM7QUFDMUIsTUFBTUMsZUFBZSxHQUFHRCxPQUFPLENBQUUsbUJBQW9CLENBQUM7O0FBRXREO0FBQ0E7QUFDQTtBQUNBRSxNQUFNLENBQUNDLE9BQU8sR0FBRyxNQUFNQyxJQUFJLElBQUk7RUFDN0IsT0FBT0MsTUFBTSxDQUFDQyxJQUFJLENBQUUsTUFBTUwsZUFBZSxDQUFFRyxJQUFLLENBQUUsQ0FBQyxDQUFDRyxNQUFNLENBQUVDLFVBQVUsSUFBSUEsVUFBVSxLQUFLLFNBQVUsQ0FBQyxDQUFDRCxNQUFNLENBQUVDLFVBQVUsSUFBSTtJQUN6SCxPQUFPVCxFQUFFLENBQUNVLFVBQVUsQ0FBRyxNQUFLRCxVQUFXLElBQUdBLFVBQVcsa0JBQWtCLENBQUM7RUFDMUUsQ0FBRSxDQUFDLENBQUNFLEdBQUcsQ0FBRUYsVUFBVSxJQUFJO0lBQ3JCLE9BQU87TUFDTEosSUFBSSxFQUFFSSxVQUFVO01BQ2hCRyxrQkFBa0IsRUFBRUMsSUFBSSxDQUFDQyxLQUFLLENBQUVkLEVBQUUsQ0FBQ2UsWUFBWSxDQUFHLE1BQUtOLFVBQVcsZUFBYyxFQUFFLE9BQVEsQ0FBRSxDQUFDLENBQUNPLElBQUksQ0FBQ0o7SUFDckcsQ0FBQztFQUNILENBQUUsQ0FBQztBQUNMLENBQUMifQ==