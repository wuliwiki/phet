// Copyright 2016-2022, University of Colorado Boulder

/**
 * Generates the top-level simName-accessibility-view.html file for simulations (or runnables). Lets one
 * see the accessible content by placing the sim in an iframe and running an up to date copy of the parallel
 * DOM next to it.
 *
 * @author Jesse Greenberg
 */

// modules
const ChipperConstants = require('../common/ChipperConstants');
const ChipperStringUtils = require('../common/ChipperStringUtils');
const getA11yViewHTMLFromTemplate = require('./getA11yViewHTMLFromTemplate');
const writeFileAndGitAdd = require('../../../perennial-alias/js/common/writeFileAndGitAdd');

/**
 * @param {string} repo
 */
module.exports = async function (repo) {
  let html = getA11yViewHTMLFromTemplate(repo);
  html = ChipperStringUtils.replaceFirst(html, '{{PHET_REPOSITORY}}', repo);

  // Write to the repository's root directory.
  await writeFileAndGitAdd(repo, `${repo}${ChipperConstants.A11Y_VIEW_HTML_SUFFIX}`, html);
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDaGlwcGVyQ29uc3RhbnRzIiwicmVxdWlyZSIsIkNoaXBwZXJTdHJpbmdVdGlscyIsImdldEExMXlWaWV3SFRNTEZyb21UZW1wbGF0ZSIsIndyaXRlRmlsZUFuZEdpdEFkZCIsIm1vZHVsZSIsImV4cG9ydHMiLCJyZXBvIiwiaHRtbCIsInJlcGxhY2VGaXJzdCIsIkExMVlfVklFV19IVE1MX1NVRkZJWCJdLCJzb3VyY2VzIjpbImdlbmVyYXRlQTExeVZpZXdIVE1MLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE2LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIEdlbmVyYXRlcyB0aGUgdG9wLWxldmVsIHNpbU5hbWUtYWNjZXNzaWJpbGl0eS12aWV3Lmh0bWwgZmlsZSBmb3Igc2ltdWxhdGlvbnMgKG9yIHJ1bm5hYmxlcykuIExldHMgb25lXHJcbiAqIHNlZSB0aGUgYWNjZXNzaWJsZSBjb250ZW50IGJ5IHBsYWNpbmcgdGhlIHNpbSBpbiBhbiBpZnJhbWUgYW5kIHJ1bm5pbmcgYW4gdXAgdG8gZGF0ZSBjb3B5IG9mIHRoZSBwYXJhbGxlbFxyXG4gKiBET00gbmV4dCB0byBpdC5cclxuICpcclxuICogQGF1dGhvciBKZXNzZSBHcmVlbmJlcmdcclxuICovXHJcblxyXG5cclxuLy8gbW9kdWxlc1xyXG5jb25zdCBDaGlwcGVyQ29uc3RhbnRzID0gcmVxdWlyZSggJy4uL2NvbW1vbi9DaGlwcGVyQ29uc3RhbnRzJyApO1xyXG5jb25zdCBDaGlwcGVyU3RyaW5nVXRpbHMgPSByZXF1aXJlKCAnLi4vY29tbW9uL0NoaXBwZXJTdHJpbmdVdGlscycgKTtcclxuY29uc3QgZ2V0QTExeVZpZXdIVE1MRnJvbVRlbXBsYXRlID0gcmVxdWlyZSggJy4vZ2V0QTExeVZpZXdIVE1MRnJvbVRlbXBsYXRlJyApO1xyXG5jb25zdCB3cml0ZUZpbGVBbmRHaXRBZGQgPSByZXF1aXJlKCAnLi4vLi4vLi4vcGVyZW5uaWFsLWFsaWFzL2pzL2NvbW1vbi93cml0ZUZpbGVBbmRHaXRBZGQnICk7XHJcblxyXG4vKipcclxuICogQHBhcmFtIHtzdHJpbmd9IHJlcG9cclxuICovXHJcbm1vZHVsZS5leHBvcnRzID0gYXN5bmMgZnVuY3Rpb24oIHJlcG8gKSB7XHJcblxyXG4gIGxldCBodG1sID0gZ2V0QTExeVZpZXdIVE1MRnJvbVRlbXBsYXRlKCByZXBvICk7XHJcbiAgaHRtbCA9IENoaXBwZXJTdHJpbmdVdGlscy5yZXBsYWNlRmlyc3QoIGh0bWwsICd7e1BIRVRfUkVQT1NJVE9SWX19JywgcmVwbyApO1xyXG5cclxuICAvLyBXcml0ZSB0byB0aGUgcmVwb3NpdG9yeSdzIHJvb3QgZGlyZWN0b3J5LlxyXG4gIGF3YWl0IHdyaXRlRmlsZUFuZEdpdEFkZCggcmVwbywgYCR7cmVwb30ke0NoaXBwZXJDb25zdGFudHMuQTExWV9WSUVXX0hUTUxfU1VGRklYfWAsIGh0bWwgKTtcclxufTtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBLE1BQU1BLGdCQUFnQixHQUFHQyxPQUFPLENBQUUsNEJBQTZCLENBQUM7QUFDaEUsTUFBTUMsa0JBQWtCLEdBQUdELE9BQU8sQ0FBRSw4QkFBK0IsQ0FBQztBQUNwRSxNQUFNRSwyQkFBMkIsR0FBR0YsT0FBTyxDQUFFLCtCQUFnQyxDQUFDO0FBQzlFLE1BQU1HLGtCQUFrQixHQUFHSCxPQUFPLENBQUUsdURBQXdELENBQUM7O0FBRTdGO0FBQ0E7QUFDQTtBQUNBSSxNQUFNLENBQUNDLE9BQU8sR0FBRyxnQkFBZ0JDLElBQUksRUFBRztFQUV0QyxJQUFJQyxJQUFJLEdBQUdMLDJCQUEyQixDQUFFSSxJQUFLLENBQUM7RUFDOUNDLElBQUksR0FBR04sa0JBQWtCLENBQUNPLFlBQVksQ0FBRUQsSUFBSSxFQUFFLHFCQUFxQixFQUFFRCxJQUFLLENBQUM7O0VBRTNFO0VBQ0EsTUFBTUgsa0JBQWtCLENBQUVHLElBQUksRUFBRyxHQUFFQSxJQUFLLEdBQUVQLGdCQUFnQixDQUFDVSxxQkFBc0IsRUFBQyxFQUFFRixJQUFLLENBQUM7QUFDNUYsQ0FBQyJ9