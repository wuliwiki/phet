// Copyright 2019-2023, University of Colorado Boulder

/**
 * ScreenView for the 'Compare' screen.
 *
 * @author Chris Klusendorf (PhET Interactive Simulations)
 */

import BooleanProperty from '../../../../axon/js/BooleanProperty.js';
import Range from '../../../../dot/js/Range.js';
import ScreenView from '../../../../joist/js/ScreenView.js';
import ResetAllButton from '../../../../scenery-phet/js/buttons/ResetAllButton.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { Text } from '../../../../scenery/js/imports.js';
import Checkbox from '../../../../sun/js/Checkbox.js';
import SpeechSynthesisControl from '../../../../number-suite-common/js/common/view/SpeechSynthesisControl.js';
import TotalAccordionBox from '../../../../number-suite-common/js/common/view/TotalAccordionBox.js';
import CompareCountingType from '../model/CompareCountingType.js';
import BlockValuesNode from './BlockValuesNode.js';
import CompareCountingTypeRadioButtonGroup from './CompareCountingTypeRadioButtonGroup.js';
import CompareNumberLineNode from './CompareNumberLineNode.js';
import ComparisonTextNode from './ComparisonTextNode.js';
import CountingAccordionBox from '../../../../number-suite-common/js/common/view/CountingAccordionBox.js';
import OrganizeButton from '../../../../number-suite-common/js/common/view/OrganizeButton.js';
import Multilink from '../../../../axon/js/Multilink.js';
import { combineOptions } from '../../../../phet-core/js/optionize.js';
import CountingObjectType from '../../../../counting-common/js/common/model/CountingObjectType.js';
import numberCompare from '../../numberCompare.js';
import numberCompareSpeechSynthesisAnnouncer from '../../common/view/numberCompareSpeechSynthesisAnnouncer.js';
import numberCompareUtteranceQueue from '../../common/view/numberCompareUtteranceQueue.js';
import NumberCompareColors from '../../common/NumberCompareColors.js';
import NumberSuiteCommonColors from '../../../../number-suite-common/js/common/NumberSuiteCommonColors.js';
import NumberSuiteCommonConstants from '../../../../number-suite-common/js/common/NumberSuiteCommonConstants.js';
import LocaleRadioButtonGroup from './LocaleRadioButtonGroup.js';
import numberComparePreferences from '../../common/model/numberComparePreferences.js';

// constants
const UPPER_ACCORDION_BOX_CONTENT_HEIGHT = 80; // in screen coordinates
const LOWER_ACCORDION_BOX_CONTENT_WIDTH = 390; // in screen coordinates

// strings
const lessThanString = '<';
const equalString = '=';
const greaterThanString = '>';
class CompareScreenView extends ScreenView {
  constructor(model, tandem) {
    super({
      tandem: tandem
    });
    this.leftTotalAccordionBoxExpandedProperty = new BooleanProperty(true);
    this.rightTotalAccordionBoxExpandedProperty = new BooleanProperty(true);
    this.leftCountingAccordionBoxExpandedProperty = new BooleanProperty(true);
    this.rightCountingAccordionBoxExpandedProperty = new BooleanProperty(true);

    // config for the left and right TotalAccordionBox
    const totalAccordionBoxOptions = {
      font: new PhetFont(78),
      arrowButtonOptions: {
        arrowWidth: 15,
        // empirically determined
        arrowHeight: 15 // empirically determined
      },

      arrowButtonSpacing: 5 // empirically determined
    };

    // create and add the left TotalAccordionBox
    const leftTotalAccordionBox = new TotalAccordionBox(model.leftCountingArea, UPPER_ACCORDION_BOX_CONTENT_HEIGHT, combineOptions({
      expandedProperty: this.leftTotalAccordionBoxExpandedProperty,
      fill: NumberCompareColors.mediumPurpleBackgroundColorProperty
    }, totalAccordionBoxOptions));
    leftTotalAccordionBox.top = this.layoutBounds.minY + NumberSuiteCommonConstants.SCREEN_VIEW_PADDING_Y;
    this.addChild(leftTotalAccordionBox);

    // create and add the right TotalAccordionBox
    const rightTotalAccordionBox = new TotalAccordionBox(model.rightCountingArea, UPPER_ACCORDION_BOX_CONTENT_HEIGHT, combineOptions({
      expandedProperty: this.rightTotalAccordionBoxExpandedProperty,
      fill: NumberSuiteCommonColors.lightOrangeBackgroundColorProperty
    }, totalAccordionBoxOptions));
    rightTotalAccordionBox.top = leftTotalAccordionBox.top;
    this.addChild(rightTotalAccordionBox);

    // create and add the left CountingAccordionBox
    const leftCountingAccordionBox = new CountingAccordionBox(model.leftCountingArea, model.leftCountingObjectTypeProperty, LOWER_ACCORDION_BOX_CONTENT_WIDTH, NumberSuiteCommonConstants.TALL_LOWER_ACCORDION_BOX_HEIGHT, {
      countingObjectTypes: CountingObjectType.enumeration.values,
      expandedProperty: this.leftCountingAccordionBoxExpandedProperty,
      fill: NumberCompareColors.mediumPurpleBackgroundColorProperty
    });
    leftCountingAccordionBox.left = NumberSuiteCommonConstants.ACCORDION_BOX_MARGIN_X;
    leftCountingAccordionBox.bottom = this.layoutBounds.maxY - NumberSuiteCommonConstants.SCREEN_VIEW_PADDING_Y;
    this.addChild(leftCountingAccordionBox);

    // create and add the right CountingAccordionBox
    const rightCountingAccordionBox = new CountingAccordionBox(model.rightCountingArea, model.rightCountingObjectTypeProperty, LOWER_ACCORDION_BOX_CONTENT_WIDTH, NumberSuiteCommonConstants.TALL_LOWER_ACCORDION_BOX_HEIGHT, {
      countingObjectTypes: CountingObjectType.enumeration.values,
      expandedProperty: this.rightCountingAccordionBoxExpandedProperty,
      fill: NumberSuiteCommonColors.lightOrangeBackgroundColorProperty
    });
    rightCountingAccordionBox.right = this.layoutBounds.maxX - NumberSuiteCommonConstants.ACCORDION_BOX_MARGIN_X;
    rightCountingAccordionBox.bottom = leftCountingAccordionBox.bottom;
    this.addChild(rightCountingAccordionBox);

    // set the x-position of the TotalAccordionBox's after the CompareObjectAccordionBoxes have been added
    leftTotalAccordionBox.right = leftCountingAccordionBox.right;
    rightTotalAccordionBox.left = rightCountingAccordionBox.left;

    // create and add the ComparisonTextNode
    const comparisonTextNode = new ComparisonTextNode(model.comparisonStringProperty, this.layoutBounds);
    comparisonTextNode.centerY = new Range(leftTotalAccordionBox.bottom, leftCountingAccordionBox.top).getCenter();
    this.addChild(comparisonTextNode);

    // create and add the SpeechSynthesisButton if the announcer is initialized
    if (numberCompareSpeechSynthesisAnnouncer.initialized) {
      const speechSynthesisControl = new SpeechSynthesisControl(numberCompareSpeechSynthesisAnnouncer, numberCompareUtteranceQueue, {
        speechSynthesisButtonOptions: {
          comparisonSignsAndTextVisibleProperty: model.comparisonSignsAndTextVisibleProperty
        },
        left: NumberSuiteCommonConstants.SCREEN_VIEW_PADDING_X,
        top: leftTotalAccordionBox.top
      });
      this.addChild(speechSynthesisControl);
    }

    // LocaleRadioButtonGroup
    const localeRadioButtonGroup = new LocaleRadioButtonGroup();
    localeRadioButtonGroup.left = leftCountingAccordionBox.left;
    localeRadioButtonGroup.top = leftTotalAccordionBox.top + 2;
    this.addChild(localeRadioButtonGroup);

    // create and add the comparison signs node
    const comparisonSignsNode = new Text(equalString, {
      font: new PhetFont(90)
    });
    this.addChild(comparisonSignsNode);
    comparisonSignsNode.centerX = this.layoutBounds.centerX;
    comparisonSignsNode.centerY = leftTotalAccordionBox.centerY;

    // create and add the CompareCountingTypeRadioButtonGroup
    const countingTypeRadioButtonGroup = new CompareCountingTypeRadioButtonGroup(model.countingTypeProperty);
    countingTypeRadioButtonGroup.right = this.layoutBounds.maxX - NumberSuiteCommonConstants.SCREEN_VIEW_PADDING_X;
    countingTypeRadioButtonGroup.top = leftTotalAccordionBox.top;
    this.addChild(countingTypeRadioButtonGroup);

    // create and add the show comparison checkbox
    const showComparisonCheckbox = new Checkbox(model.comparisonSignsAndTextVisibleProperty, new Text(`${lessThanString} ${equalString} ${greaterThanString}`, {
      font: new PhetFont(20)
    }));
    showComparisonCheckbox.right = countingTypeRadioButtonGroup.right;
    showComparisonCheckbox.top = countingTypeRadioButtonGroup.bottom + 14; // empirically determined
    this.addChild(showComparisonCheckbox);

    // create and add the BlockValuesNode
    const blockValuesNode = new BlockValuesNode(model.leftCountingArea.sumProperty, model.rightCountingArea.sumProperty);
    this.addChild(blockValuesNode);
    blockValuesNode.centerX = comparisonSignsNode.centerX;
    blockValuesNode.bottom = leftCountingAccordionBox.bottom - 4; // empirically determined tweak

    // create and add the CompareNumberLineNode
    const compareNumberLineNode = new CompareNumberLineNode(NumberSuiteCommonConstants.TALL_LOWER_ACCORDION_BOX_HEIGHT - 22, model.leftCountingArea.sumProperty, model.rightCountingArea.sumProperty, model.sumRange);
    compareNumberLineNode.x = comparisonSignsNode.centerX;
    compareNumberLineNode.bottom = leftCountingAccordionBox.bottom + 3;
    this.addChild(compareNumberLineNode);

    // create and add the ResetAllButton
    const resetAllButton = new ResetAllButton({
      listener: () => {
        this.interruptSubtreeInput(); // cancel interactions that may be in progress
        model.reset();
        this.reset();
      },
      right: this.layoutBounds.maxX - NumberSuiteCommonConstants.SCREEN_VIEW_PADDING_X,
      bottom: this.layoutBounds.maxY - NumberSuiteCommonConstants.SCREEN_VIEW_PADDING_Y,
      tandem: tandem.createTandem('resetAllButton')
    });
    this.addChild(resetAllButton);

    // create and add a button to organize the left counting objects in a grid
    const leftOrganizeButton = new OrganizeButton(NumberCompareColors.mediumPurpleBackgroundColorProperty, () => {
      model.leftCountingArea.organizeObjects();
    });
    leftOrganizeButton.left = NumberSuiteCommonConstants.SCREEN_VIEW_PADDING_X;
    leftOrganizeButton.top = leftCountingAccordionBox.top;
    this.addChild(leftOrganizeButton);

    // create and add a button to organize the objectsAccordionBox countingObjects in a grid
    const rightOrganizeButton = new OrganizeButton(NumberSuiteCommonColors.lightOrangeBackgroundColorProperty, () => {
      model.rightCountingArea.organizeObjects();
    });
    rightOrganizeButton.centerX = resetAllButton.centerX;
    rightOrganizeButton.top = rightCountingAccordionBox.top;
    this.addChild(rightOrganizeButton);

    // update the comparison signs node's text and the BlockValuesNode when either current number changes
    Multilink.multilink([model.leftCountingArea.sumProperty, model.rightCountingArea.sumProperty], (leftCurrentNumber, rightCurrentNumber) => {
      comparisonSignsNode.string = leftCurrentNumber < rightCurrentNumber ? lessThanString : leftCurrentNumber > rightCurrentNumber ? greaterThanString : equalString;
    });

    // update the visibility of the comparison signs node
    model.comparisonSignsAndTextVisibleProperty.link(visible => {
      comparisonSignsNode.visible = visible;
      comparisonTextNode.visible = visible;
    });

    // update the visibility of the BlockValuesNode and NumberLineNode
    model.countingTypeProperty.link(countingType => {
      blockValuesNode.visible = countingType === CompareCountingType.BLOCKS;
      compareNumberLineNode.visible = countingType === CompareCountingType.NUMBER_LINE;
    });
  }

  /**
   * Resets the view.
   */
  reset() {
    this.leftTotalAccordionBoxExpandedProperty.reset();
    this.rightTotalAccordionBoxExpandedProperty.reset();
    this.leftCountingAccordionBoxExpandedProperty.reset();
    this.rightCountingAccordionBoxExpandedProperty.reset();
    numberComparePreferences.autoHearEnabledProperty.value && numberCompareUtteranceQueue.speakSpeechData();
  }
  dispose() {
    assert && assert(false, 'dispose is not supported, exists for the lifetime of the sim');
    super.dispose();
  }
}
numberCompare.register('CompareScreenView', CompareScreenView);
export default CompareScreenView;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb29sZWFuUHJvcGVydHkiLCJSYW5nZSIsIlNjcmVlblZpZXciLCJSZXNldEFsbEJ1dHRvbiIsIlBoZXRGb250IiwiVGV4dCIsIkNoZWNrYm94IiwiU3BlZWNoU3ludGhlc2lzQ29udHJvbCIsIlRvdGFsQWNjb3JkaW9uQm94IiwiQ29tcGFyZUNvdW50aW5nVHlwZSIsIkJsb2NrVmFsdWVzTm9kZSIsIkNvbXBhcmVDb3VudGluZ1R5cGVSYWRpb0J1dHRvbkdyb3VwIiwiQ29tcGFyZU51bWJlckxpbmVOb2RlIiwiQ29tcGFyaXNvblRleHROb2RlIiwiQ291bnRpbmdBY2NvcmRpb25Cb3giLCJPcmdhbml6ZUJ1dHRvbiIsIk11bHRpbGluayIsImNvbWJpbmVPcHRpb25zIiwiQ291bnRpbmdPYmplY3RUeXBlIiwibnVtYmVyQ29tcGFyZSIsIm51bWJlckNvbXBhcmVTcGVlY2hTeW50aGVzaXNBbm5vdW5jZXIiLCJudW1iZXJDb21wYXJlVXR0ZXJhbmNlUXVldWUiLCJOdW1iZXJDb21wYXJlQ29sb3JzIiwiTnVtYmVyU3VpdGVDb21tb25Db2xvcnMiLCJOdW1iZXJTdWl0ZUNvbW1vbkNvbnN0YW50cyIsIkxvY2FsZVJhZGlvQnV0dG9uR3JvdXAiLCJudW1iZXJDb21wYXJlUHJlZmVyZW5jZXMiLCJVUFBFUl9BQ0NPUkRJT05fQk9YX0NPTlRFTlRfSEVJR0hUIiwiTE9XRVJfQUNDT1JESU9OX0JPWF9DT05URU5UX1dJRFRIIiwibGVzc1RoYW5TdHJpbmciLCJlcXVhbFN0cmluZyIsImdyZWF0ZXJUaGFuU3RyaW5nIiwiQ29tcGFyZVNjcmVlblZpZXciLCJjb25zdHJ1Y3RvciIsIm1vZGVsIiwidGFuZGVtIiwibGVmdFRvdGFsQWNjb3JkaW9uQm94RXhwYW5kZWRQcm9wZXJ0eSIsInJpZ2h0VG90YWxBY2NvcmRpb25Cb3hFeHBhbmRlZFByb3BlcnR5IiwibGVmdENvdW50aW5nQWNjb3JkaW9uQm94RXhwYW5kZWRQcm9wZXJ0eSIsInJpZ2h0Q291bnRpbmdBY2NvcmRpb25Cb3hFeHBhbmRlZFByb3BlcnR5IiwidG90YWxBY2NvcmRpb25Cb3hPcHRpb25zIiwiZm9udCIsImFycm93QnV0dG9uT3B0aW9ucyIsImFycm93V2lkdGgiLCJhcnJvd0hlaWdodCIsImFycm93QnV0dG9uU3BhY2luZyIsImxlZnRUb3RhbEFjY29yZGlvbkJveCIsImxlZnRDb3VudGluZ0FyZWEiLCJleHBhbmRlZFByb3BlcnR5IiwiZmlsbCIsIm1lZGl1bVB1cnBsZUJhY2tncm91bmRDb2xvclByb3BlcnR5IiwidG9wIiwibGF5b3V0Qm91bmRzIiwibWluWSIsIlNDUkVFTl9WSUVXX1BBRERJTkdfWSIsImFkZENoaWxkIiwicmlnaHRUb3RhbEFjY29yZGlvbkJveCIsInJpZ2h0Q291bnRpbmdBcmVhIiwibGlnaHRPcmFuZ2VCYWNrZ3JvdW5kQ29sb3JQcm9wZXJ0eSIsImxlZnRDb3VudGluZ0FjY29yZGlvbkJveCIsImxlZnRDb3VudGluZ09iamVjdFR5cGVQcm9wZXJ0eSIsIlRBTExfTE9XRVJfQUNDT1JESU9OX0JPWF9IRUlHSFQiLCJjb3VudGluZ09iamVjdFR5cGVzIiwiZW51bWVyYXRpb24iLCJ2YWx1ZXMiLCJsZWZ0IiwiQUNDT1JESU9OX0JPWF9NQVJHSU5fWCIsImJvdHRvbSIsIm1heFkiLCJyaWdodENvdW50aW5nQWNjb3JkaW9uQm94IiwicmlnaHRDb3VudGluZ09iamVjdFR5cGVQcm9wZXJ0eSIsInJpZ2h0IiwibWF4WCIsImNvbXBhcmlzb25UZXh0Tm9kZSIsImNvbXBhcmlzb25TdHJpbmdQcm9wZXJ0eSIsImNlbnRlclkiLCJnZXRDZW50ZXIiLCJpbml0aWFsaXplZCIsInNwZWVjaFN5bnRoZXNpc0NvbnRyb2wiLCJzcGVlY2hTeW50aGVzaXNCdXR0b25PcHRpb25zIiwiY29tcGFyaXNvblNpZ25zQW5kVGV4dFZpc2libGVQcm9wZXJ0eSIsIlNDUkVFTl9WSUVXX1BBRERJTkdfWCIsImxvY2FsZVJhZGlvQnV0dG9uR3JvdXAiLCJjb21wYXJpc29uU2lnbnNOb2RlIiwiY2VudGVyWCIsImNvdW50aW5nVHlwZVJhZGlvQnV0dG9uR3JvdXAiLCJjb3VudGluZ1R5cGVQcm9wZXJ0eSIsInNob3dDb21wYXJpc29uQ2hlY2tib3giLCJibG9ja1ZhbHVlc05vZGUiLCJzdW1Qcm9wZXJ0eSIsImNvbXBhcmVOdW1iZXJMaW5lTm9kZSIsInN1bVJhbmdlIiwieCIsInJlc2V0QWxsQnV0dG9uIiwibGlzdGVuZXIiLCJpbnRlcnJ1cHRTdWJ0cmVlSW5wdXQiLCJyZXNldCIsImNyZWF0ZVRhbmRlbSIsImxlZnRPcmdhbml6ZUJ1dHRvbiIsIm9yZ2FuaXplT2JqZWN0cyIsInJpZ2h0T3JnYW5pemVCdXR0b24iLCJtdWx0aWxpbmsiLCJsZWZ0Q3VycmVudE51bWJlciIsInJpZ2h0Q3VycmVudE51bWJlciIsInN0cmluZyIsImxpbmsiLCJ2aXNpYmxlIiwiY291bnRpbmdUeXBlIiwiQkxPQ0tTIiwiTlVNQkVSX0xJTkUiLCJhdXRvSGVhckVuYWJsZWRQcm9wZXJ0eSIsInZhbHVlIiwic3BlYWtTcGVlY2hEYXRhIiwiZGlzcG9zZSIsImFzc2VydCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiQ29tcGFyZVNjcmVlblZpZXcudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTktMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogU2NyZWVuVmlldyBmb3IgdGhlICdDb21wYXJlJyBzY3JlZW4uXHJcbiAqXHJcbiAqIEBhdXRob3IgQ2hyaXMgS2x1c2VuZG9yZiAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICovXHJcblxyXG5pbXBvcnQgQm9vbGVhblByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvQm9vbGVhblByb3BlcnR5LmpzJztcclxuaW1wb3J0IFJhbmdlIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9SYW5nZS5qcyc7XHJcbmltcG9ydCBTY3JlZW5WaWV3IGZyb20gJy4uLy4uLy4uLy4uL2pvaXN0L2pzL1NjcmVlblZpZXcuanMnO1xyXG5pbXBvcnQgUmVzZXRBbGxCdXR0b24gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL2J1dHRvbnMvUmVzZXRBbGxCdXR0b24uanMnO1xyXG5pbXBvcnQgUGhldEZvbnQgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1BoZXRGb250LmpzJztcclxuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBDaGVja2JveCBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvQ2hlY2tib3guanMnO1xyXG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uLy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xyXG5pbXBvcnQgU3BlZWNoU3ludGhlc2lzQ29udHJvbCBmcm9tICcuLi8uLi8uLi8uLi9udW1iZXItc3VpdGUtY29tbW9uL2pzL2NvbW1vbi92aWV3L1NwZWVjaFN5bnRoZXNpc0NvbnRyb2wuanMnO1xyXG5pbXBvcnQgVG90YWxBY2NvcmRpb25Cb3gsIHsgVG90YWxBY2NvcmRpb25Cb3hPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vLi4vbnVtYmVyLXN1aXRlLWNvbW1vbi9qcy9jb21tb24vdmlldy9Ub3RhbEFjY29yZGlvbkJveC5qcyc7XHJcbmltcG9ydCBDb21wYXJlQ291bnRpbmdUeXBlIGZyb20gJy4uL21vZGVsL0NvbXBhcmVDb3VudGluZ1R5cGUuanMnO1xyXG5pbXBvcnQgQ29tcGFyZU1vZGVsIGZyb20gJy4uL21vZGVsL0NvbXBhcmVNb2RlbC5qcyc7XHJcbmltcG9ydCBCbG9ja1ZhbHVlc05vZGUgZnJvbSAnLi9CbG9ja1ZhbHVlc05vZGUuanMnO1xyXG5pbXBvcnQgQ29tcGFyZUNvdW50aW5nVHlwZVJhZGlvQnV0dG9uR3JvdXAgZnJvbSAnLi9Db21wYXJlQ291bnRpbmdUeXBlUmFkaW9CdXR0b25Hcm91cC5qcyc7XHJcbmltcG9ydCBDb21wYXJlTnVtYmVyTGluZU5vZGUgZnJvbSAnLi9Db21wYXJlTnVtYmVyTGluZU5vZGUuanMnO1xyXG5pbXBvcnQgQ29tcGFyaXNvblRleHROb2RlIGZyb20gJy4vQ29tcGFyaXNvblRleHROb2RlLmpzJztcclxuaW1wb3J0IENvdW50aW5nQWNjb3JkaW9uQm94LCB7IENvdW50aW5nQWNjb3JkaW9uQm94T3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL251bWJlci1zdWl0ZS1jb21tb24vanMvY29tbW9uL3ZpZXcvQ291bnRpbmdBY2NvcmRpb25Cb3guanMnO1xyXG5pbXBvcnQgT3JnYW5pemVCdXR0b24gZnJvbSAnLi4vLi4vLi4vLi4vbnVtYmVyLXN1aXRlLWNvbW1vbi9qcy9jb21tb24vdmlldy9Pcmdhbml6ZUJ1dHRvbi5qcyc7XHJcbmltcG9ydCBNdWx0aWxpbmsgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9NdWx0aWxpbmsuanMnO1xyXG5pbXBvcnQgeyBjb21iaW5lT3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgQ291bnRpbmdPYmplY3RUeXBlIGZyb20gJy4uLy4uLy4uLy4uL2NvdW50aW5nLWNvbW1vbi9qcy9jb21tb24vbW9kZWwvQ291bnRpbmdPYmplY3RUeXBlLmpzJztcclxuaW1wb3J0IG51bWJlckNvbXBhcmUgZnJvbSAnLi4vLi4vbnVtYmVyQ29tcGFyZS5qcyc7XHJcbmltcG9ydCBudW1iZXJDb21wYXJlU3BlZWNoU3ludGhlc2lzQW5ub3VuY2VyIGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L251bWJlckNvbXBhcmVTcGVlY2hTeW50aGVzaXNBbm5vdW5jZXIuanMnO1xyXG5pbXBvcnQgbnVtYmVyQ29tcGFyZVV0dGVyYW5jZVF1ZXVlIGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L251bWJlckNvbXBhcmVVdHRlcmFuY2VRdWV1ZS5qcyc7XHJcbmltcG9ydCBOdW1iZXJDb21wYXJlQ29sb3JzIGZyb20gJy4uLy4uL2NvbW1vbi9OdW1iZXJDb21wYXJlQ29sb3JzLmpzJztcclxuaW1wb3J0IE51bWJlclN1aXRlQ29tbW9uQ29sb3JzIGZyb20gJy4uLy4uLy4uLy4uL251bWJlci1zdWl0ZS1jb21tb24vanMvY29tbW9uL051bWJlclN1aXRlQ29tbW9uQ29sb3JzLmpzJztcclxuaW1wb3J0IE51bWJlclN1aXRlQ29tbW9uQ29uc3RhbnRzIGZyb20gJy4uLy4uLy4uLy4uL251bWJlci1zdWl0ZS1jb21tb24vanMvY29tbW9uL051bWJlclN1aXRlQ29tbW9uQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgTG9jYWxlUmFkaW9CdXR0b25Hcm91cCBmcm9tICcuL0xvY2FsZVJhZGlvQnV0dG9uR3JvdXAuanMnO1xyXG5pbXBvcnQgbnVtYmVyQ29tcGFyZVByZWZlcmVuY2VzIGZyb20gJy4uLy4uL2NvbW1vbi9tb2RlbC9udW1iZXJDb21wYXJlUHJlZmVyZW5jZXMuanMnO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IFVQUEVSX0FDQ09SRElPTl9CT1hfQ09OVEVOVF9IRUlHSFQgPSA4MDsgLy8gaW4gc2NyZWVuIGNvb3JkaW5hdGVzXHJcbmNvbnN0IExPV0VSX0FDQ09SRElPTl9CT1hfQ09OVEVOVF9XSURUSCA9IDM5MDsgLy8gaW4gc2NyZWVuIGNvb3JkaW5hdGVzXHJcblxyXG4vLyBzdHJpbmdzXHJcbmNvbnN0IGxlc3NUaGFuU3RyaW5nID0gJzwnO1xyXG5jb25zdCBlcXVhbFN0cmluZyA9ICc9JztcclxuY29uc3QgZ3JlYXRlclRoYW5TdHJpbmcgPSAnPic7XHJcblxyXG5jbGFzcyBDb21wYXJlU2NyZWVuVmlldyBleHRlbmRzIFNjcmVlblZpZXcge1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgbGVmdFRvdGFsQWNjb3JkaW9uQm94RXhwYW5kZWRQcm9wZXJ0eTogUHJvcGVydHk8Ym9vbGVhbj47XHJcbiAgcHJpdmF0ZSByZWFkb25seSByaWdodFRvdGFsQWNjb3JkaW9uQm94RXhwYW5kZWRQcm9wZXJ0eTogUHJvcGVydHk8Ym9vbGVhbj47XHJcbiAgcHJpdmF0ZSByZWFkb25seSByaWdodENvdW50aW5nQWNjb3JkaW9uQm94RXhwYW5kZWRQcm9wZXJ0eTogUHJvcGVydHk8Ym9vbGVhbj47XHJcbiAgcHJpdmF0ZSByZWFkb25seSBsZWZ0Q291bnRpbmdBY2NvcmRpb25Cb3hFeHBhbmRlZFByb3BlcnR5OiBQcm9wZXJ0eTxib29sZWFuPjtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBtb2RlbDogQ29tcGFyZU1vZGVsLCB0YW5kZW06IFRhbmRlbSApIHtcclxuXHJcbiAgICBzdXBlciggeyB0YW5kZW06IHRhbmRlbSB9ICk7XHJcblxyXG4gICAgdGhpcy5sZWZ0VG90YWxBY2NvcmRpb25Cb3hFeHBhbmRlZFByb3BlcnR5ID0gbmV3IEJvb2xlYW5Qcm9wZXJ0eSggdHJ1ZSApO1xyXG4gICAgdGhpcy5yaWdodFRvdGFsQWNjb3JkaW9uQm94RXhwYW5kZWRQcm9wZXJ0eSA9IG5ldyBCb29sZWFuUHJvcGVydHkoIHRydWUgKTtcclxuICAgIHRoaXMubGVmdENvdW50aW5nQWNjb3JkaW9uQm94RXhwYW5kZWRQcm9wZXJ0eSA9IG5ldyBCb29sZWFuUHJvcGVydHkoIHRydWUgKTtcclxuICAgIHRoaXMucmlnaHRDb3VudGluZ0FjY29yZGlvbkJveEV4cGFuZGVkUHJvcGVydHkgPSBuZXcgQm9vbGVhblByb3BlcnR5KCB0cnVlICk7XHJcblxyXG4gICAgLy8gY29uZmlnIGZvciB0aGUgbGVmdCBhbmQgcmlnaHQgVG90YWxBY2NvcmRpb25Cb3hcclxuICAgIGNvbnN0IHRvdGFsQWNjb3JkaW9uQm94T3B0aW9ucyA9IHtcclxuICAgICAgZm9udDogbmV3IFBoZXRGb250KCA3OCApLFxyXG4gICAgICBhcnJvd0J1dHRvbk9wdGlvbnM6IHtcclxuICAgICAgICBhcnJvd1dpZHRoOiAxNSwgLy8gZW1waXJpY2FsbHkgZGV0ZXJtaW5lZFxyXG4gICAgICAgIGFycm93SGVpZ2h0OiAxNSAvLyBlbXBpcmljYWxseSBkZXRlcm1pbmVkXHJcbiAgICAgIH0sXHJcbiAgICAgIGFycm93QnV0dG9uU3BhY2luZzogNSAvLyBlbXBpcmljYWxseSBkZXRlcm1pbmVkXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGNyZWF0ZSBhbmQgYWRkIHRoZSBsZWZ0IFRvdGFsQWNjb3JkaW9uQm94XHJcbiAgICBjb25zdCBsZWZ0VG90YWxBY2NvcmRpb25Cb3ggPSBuZXcgVG90YWxBY2NvcmRpb25Cb3goIG1vZGVsLmxlZnRDb3VudGluZ0FyZWEsIFVQUEVSX0FDQ09SRElPTl9CT1hfQ09OVEVOVF9IRUlHSFQsXHJcbiAgICAgIGNvbWJpbmVPcHRpb25zPFRvdGFsQWNjb3JkaW9uQm94T3B0aW9ucz4oIHtcclxuICAgICAgICBleHBhbmRlZFByb3BlcnR5OiB0aGlzLmxlZnRUb3RhbEFjY29yZGlvbkJveEV4cGFuZGVkUHJvcGVydHksXHJcbiAgICAgICAgZmlsbDogTnVtYmVyQ29tcGFyZUNvbG9ycy5tZWRpdW1QdXJwbGVCYWNrZ3JvdW5kQ29sb3JQcm9wZXJ0eVxyXG4gICAgICB9LCB0b3RhbEFjY29yZGlvbkJveE9wdGlvbnMgKSApO1xyXG4gICAgbGVmdFRvdGFsQWNjb3JkaW9uQm94LnRvcCA9IHRoaXMubGF5b3V0Qm91bmRzLm1pblkgKyBOdW1iZXJTdWl0ZUNvbW1vbkNvbnN0YW50cy5TQ1JFRU5fVklFV19QQURESU5HX1k7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBsZWZ0VG90YWxBY2NvcmRpb25Cb3ggKTtcclxuXHJcbiAgICAvLyBjcmVhdGUgYW5kIGFkZCB0aGUgcmlnaHQgVG90YWxBY2NvcmRpb25Cb3hcclxuICAgIGNvbnN0IHJpZ2h0VG90YWxBY2NvcmRpb25Cb3ggPSBuZXcgVG90YWxBY2NvcmRpb25Cb3goIG1vZGVsLnJpZ2h0Q291bnRpbmdBcmVhLCBVUFBFUl9BQ0NPUkRJT05fQk9YX0NPTlRFTlRfSEVJR0hULFxyXG4gICAgICBjb21iaW5lT3B0aW9uczxUb3RhbEFjY29yZGlvbkJveE9wdGlvbnM+KCB7XHJcbiAgICAgICAgZXhwYW5kZWRQcm9wZXJ0eTogdGhpcy5yaWdodFRvdGFsQWNjb3JkaW9uQm94RXhwYW5kZWRQcm9wZXJ0eSxcclxuICAgICAgICBmaWxsOiBOdW1iZXJTdWl0ZUNvbW1vbkNvbG9ycy5saWdodE9yYW5nZUJhY2tncm91bmRDb2xvclByb3BlcnR5XHJcbiAgICAgIH0sIHRvdGFsQWNjb3JkaW9uQm94T3B0aW9ucyApICk7XHJcbiAgICByaWdodFRvdGFsQWNjb3JkaW9uQm94LnRvcCA9IGxlZnRUb3RhbEFjY29yZGlvbkJveC50b3A7XHJcbiAgICB0aGlzLmFkZENoaWxkKCByaWdodFRvdGFsQWNjb3JkaW9uQm94ICk7XHJcblxyXG4gICAgLy8gY3JlYXRlIGFuZCBhZGQgdGhlIGxlZnQgQ291bnRpbmdBY2NvcmRpb25Cb3hcclxuICAgIGNvbnN0IGxlZnRDb3VudGluZ0FjY29yZGlvbkJveCA9IG5ldyBDb3VudGluZ0FjY29yZGlvbkJveChcclxuICAgICAgbW9kZWwubGVmdENvdW50aW5nQXJlYSxcclxuICAgICAgbW9kZWwubGVmdENvdW50aW5nT2JqZWN0VHlwZVByb3BlcnR5LFxyXG4gICAgICBMT1dFUl9BQ0NPUkRJT05fQk9YX0NPTlRFTlRfV0lEVEgsXHJcbiAgICAgIE51bWJlclN1aXRlQ29tbW9uQ29uc3RhbnRzLlRBTExfTE9XRVJfQUNDT1JESU9OX0JPWF9IRUlHSFQsIHtcclxuICAgICAgICBjb3VudGluZ09iamVjdFR5cGVzOiBDb3VudGluZ09iamVjdFR5cGUuZW51bWVyYXRpb24udmFsdWVzLFxyXG4gICAgICAgIGV4cGFuZGVkUHJvcGVydHk6IHRoaXMubGVmdENvdW50aW5nQWNjb3JkaW9uQm94RXhwYW5kZWRQcm9wZXJ0eSxcclxuICAgICAgICBmaWxsOiBOdW1iZXJDb21wYXJlQ29sb3JzLm1lZGl1bVB1cnBsZUJhY2tncm91bmRDb2xvclByb3BlcnR5XHJcbiAgICAgIH0gYXMgdW5rbm93biBhcyBDb3VudGluZ0FjY29yZGlvbkJveE9wdGlvbnMgKTtcclxuICAgIGxlZnRDb3VudGluZ0FjY29yZGlvbkJveC5sZWZ0ID0gTnVtYmVyU3VpdGVDb21tb25Db25zdGFudHMuQUNDT1JESU9OX0JPWF9NQVJHSU5fWDtcclxuICAgIGxlZnRDb3VudGluZ0FjY29yZGlvbkJveC5ib3R0b20gPSB0aGlzLmxheW91dEJvdW5kcy5tYXhZIC0gTnVtYmVyU3VpdGVDb21tb25Db25zdGFudHMuU0NSRUVOX1ZJRVdfUEFERElOR19ZO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggbGVmdENvdW50aW5nQWNjb3JkaW9uQm94ICk7XHJcblxyXG4gICAgLy8gY3JlYXRlIGFuZCBhZGQgdGhlIHJpZ2h0IENvdW50aW5nQWNjb3JkaW9uQm94XHJcbiAgICBjb25zdCByaWdodENvdW50aW5nQWNjb3JkaW9uQm94ID0gbmV3IENvdW50aW5nQWNjb3JkaW9uQm94KFxyXG4gICAgICBtb2RlbC5yaWdodENvdW50aW5nQXJlYSxcclxuICAgICAgbW9kZWwucmlnaHRDb3VudGluZ09iamVjdFR5cGVQcm9wZXJ0eSxcclxuICAgICAgTE9XRVJfQUNDT1JESU9OX0JPWF9DT05URU5UX1dJRFRILFxyXG4gICAgICBOdW1iZXJTdWl0ZUNvbW1vbkNvbnN0YW50cy5UQUxMX0xPV0VSX0FDQ09SRElPTl9CT1hfSEVJR0hULCB7XHJcbiAgICAgICAgY291bnRpbmdPYmplY3RUeXBlczogQ291bnRpbmdPYmplY3RUeXBlLmVudW1lcmF0aW9uLnZhbHVlcyxcclxuICAgICAgICBleHBhbmRlZFByb3BlcnR5OiB0aGlzLnJpZ2h0Q291bnRpbmdBY2NvcmRpb25Cb3hFeHBhbmRlZFByb3BlcnR5LFxyXG4gICAgICAgIGZpbGw6IE51bWJlclN1aXRlQ29tbW9uQ29sb3JzLmxpZ2h0T3JhbmdlQmFja2dyb3VuZENvbG9yUHJvcGVydHlcclxuICAgICAgfSBhcyB1bmtub3duIGFzIENvdW50aW5nQWNjb3JkaW9uQm94T3B0aW9ucyApO1xyXG4gICAgcmlnaHRDb3VudGluZ0FjY29yZGlvbkJveC5yaWdodCA9IHRoaXMubGF5b3V0Qm91bmRzLm1heFggLSBOdW1iZXJTdWl0ZUNvbW1vbkNvbnN0YW50cy5BQ0NPUkRJT05fQk9YX01BUkdJTl9YO1xyXG4gICAgcmlnaHRDb3VudGluZ0FjY29yZGlvbkJveC5ib3R0b20gPSBsZWZ0Q291bnRpbmdBY2NvcmRpb25Cb3guYm90dG9tO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggcmlnaHRDb3VudGluZ0FjY29yZGlvbkJveCApO1xyXG5cclxuICAgIC8vIHNldCB0aGUgeC1wb3NpdGlvbiBvZiB0aGUgVG90YWxBY2NvcmRpb25Cb3gncyBhZnRlciB0aGUgQ29tcGFyZU9iamVjdEFjY29yZGlvbkJveGVzIGhhdmUgYmVlbiBhZGRlZFxyXG4gICAgbGVmdFRvdGFsQWNjb3JkaW9uQm94LnJpZ2h0ID0gbGVmdENvdW50aW5nQWNjb3JkaW9uQm94LnJpZ2h0O1xyXG4gICAgcmlnaHRUb3RhbEFjY29yZGlvbkJveC5sZWZ0ID0gcmlnaHRDb3VudGluZ0FjY29yZGlvbkJveC5sZWZ0O1xyXG5cclxuICAgIC8vIGNyZWF0ZSBhbmQgYWRkIHRoZSBDb21wYXJpc29uVGV4dE5vZGVcclxuICAgIGNvbnN0IGNvbXBhcmlzb25UZXh0Tm9kZSA9IG5ldyBDb21wYXJpc29uVGV4dE5vZGUoXHJcbiAgICAgIG1vZGVsLmNvbXBhcmlzb25TdHJpbmdQcm9wZXJ0eSxcclxuICAgICAgdGhpcy5sYXlvdXRCb3VuZHNcclxuICAgICk7XHJcbiAgICBjb21wYXJpc29uVGV4dE5vZGUuY2VudGVyWSA9IG5ldyBSYW5nZSggbGVmdFRvdGFsQWNjb3JkaW9uQm94LmJvdHRvbSwgbGVmdENvdW50aW5nQWNjb3JkaW9uQm94LnRvcCApLmdldENlbnRlcigpO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggY29tcGFyaXNvblRleHROb2RlICk7XHJcblxyXG4gICAgLy8gY3JlYXRlIGFuZCBhZGQgdGhlIFNwZWVjaFN5bnRoZXNpc0J1dHRvbiBpZiB0aGUgYW5ub3VuY2VyIGlzIGluaXRpYWxpemVkXHJcbiAgICBpZiAoIG51bWJlckNvbXBhcmVTcGVlY2hTeW50aGVzaXNBbm5vdW5jZXIuaW5pdGlhbGl6ZWQgKSB7XHJcbiAgICAgIGNvbnN0IHNwZWVjaFN5bnRoZXNpc0NvbnRyb2wgPSBuZXcgU3BlZWNoU3ludGhlc2lzQ29udHJvbChcclxuICAgICAgICBudW1iZXJDb21wYXJlU3BlZWNoU3ludGhlc2lzQW5ub3VuY2VyLFxyXG4gICAgICAgIG51bWJlckNvbXBhcmVVdHRlcmFuY2VRdWV1ZSwge1xyXG4gICAgICAgICAgc3BlZWNoU3ludGhlc2lzQnV0dG9uT3B0aW9uczoge1xyXG4gICAgICAgICAgICBjb21wYXJpc29uU2lnbnNBbmRUZXh0VmlzaWJsZVByb3BlcnR5OiBtb2RlbC5jb21wYXJpc29uU2lnbnNBbmRUZXh0VmlzaWJsZVByb3BlcnR5XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgbGVmdDogTnVtYmVyU3VpdGVDb21tb25Db25zdGFudHMuU0NSRUVOX1ZJRVdfUEFERElOR19YLFxyXG4gICAgICAgICAgdG9wOiBsZWZ0VG90YWxBY2NvcmRpb25Cb3gudG9wXHJcbiAgICAgICAgfSApO1xyXG4gICAgICB0aGlzLmFkZENoaWxkKCBzcGVlY2hTeW50aGVzaXNDb250cm9sICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTG9jYWxlUmFkaW9CdXR0b25Hcm91cFxyXG4gICAgY29uc3QgbG9jYWxlUmFkaW9CdXR0b25Hcm91cCA9IG5ldyBMb2NhbGVSYWRpb0J1dHRvbkdyb3VwKCk7XHJcbiAgICBsb2NhbGVSYWRpb0J1dHRvbkdyb3VwLmxlZnQgPSBsZWZ0Q291bnRpbmdBY2NvcmRpb25Cb3gubGVmdDtcclxuICAgIGxvY2FsZVJhZGlvQnV0dG9uR3JvdXAudG9wID0gbGVmdFRvdGFsQWNjb3JkaW9uQm94LnRvcCArIDI7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBsb2NhbGVSYWRpb0J1dHRvbkdyb3VwICk7XHJcblxyXG4gICAgLy8gY3JlYXRlIGFuZCBhZGQgdGhlIGNvbXBhcmlzb24gc2lnbnMgbm9kZVxyXG4gICAgY29uc3QgY29tcGFyaXNvblNpZ25zTm9kZSA9IG5ldyBUZXh0KCBlcXVhbFN0cmluZywgeyBmb250OiBuZXcgUGhldEZvbnQoIDkwICkgfSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggY29tcGFyaXNvblNpZ25zTm9kZSApO1xyXG4gICAgY29tcGFyaXNvblNpZ25zTm9kZS5jZW50ZXJYID0gdGhpcy5sYXlvdXRCb3VuZHMuY2VudGVyWDtcclxuICAgIGNvbXBhcmlzb25TaWduc05vZGUuY2VudGVyWSA9IGxlZnRUb3RhbEFjY29yZGlvbkJveC5jZW50ZXJZO1xyXG5cclxuICAgIC8vIGNyZWF0ZSBhbmQgYWRkIHRoZSBDb21wYXJlQ291bnRpbmdUeXBlUmFkaW9CdXR0b25Hcm91cFxyXG4gICAgY29uc3QgY291bnRpbmdUeXBlUmFkaW9CdXR0b25Hcm91cCA9IG5ldyBDb21wYXJlQ291bnRpbmdUeXBlUmFkaW9CdXR0b25Hcm91cCggbW9kZWwuY291bnRpbmdUeXBlUHJvcGVydHkgKTtcclxuICAgIGNvdW50aW5nVHlwZVJhZGlvQnV0dG9uR3JvdXAucmlnaHQgPSB0aGlzLmxheW91dEJvdW5kcy5tYXhYIC0gTnVtYmVyU3VpdGVDb21tb25Db25zdGFudHMuU0NSRUVOX1ZJRVdfUEFERElOR19YO1xyXG4gICAgY291bnRpbmdUeXBlUmFkaW9CdXR0b25Hcm91cC50b3AgPSBsZWZ0VG90YWxBY2NvcmRpb25Cb3gudG9wO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggY291bnRpbmdUeXBlUmFkaW9CdXR0b25Hcm91cCApO1xyXG5cclxuICAgIC8vIGNyZWF0ZSBhbmQgYWRkIHRoZSBzaG93IGNvbXBhcmlzb24gY2hlY2tib3hcclxuICAgIGNvbnN0IHNob3dDb21wYXJpc29uQ2hlY2tib3ggPSBuZXcgQ2hlY2tib3goIG1vZGVsLmNvbXBhcmlzb25TaWduc0FuZFRleHRWaXNpYmxlUHJvcGVydHksIG5ldyBUZXh0KCBgJHtsZXNzVGhhblN0cmluZ30gJHtlcXVhbFN0cmluZ30gJHtncmVhdGVyVGhhblN0cmluZ31gLCB7IGZvbnQ6IG5ldyBQaGV0Rm9udCggMjAgKSB9ICkgKTtcclxuICAgIHNob3dDb21wYXJpc29uQ2hlY2tib3gucmlnaHQgPSBjb3VudGluZ1R5cGVSYWRpb0J1dHRvbkdyb3VwLnJpZ2h0O1xyXG4gICAgc2hvd0NvbXBhcmlzb25DaGVja2JveC50b3AgPSBjb3VudGluZ1R5cGVSYWRpb0J1dHRvbkdyb3VwLmJvdHRvbSArIDE0OyAvLyBlbXBpcmljYWxseSBkZXRlcm1pbmVkXHJcbiAgICB0aGlzLmFkZENoaWxkKCBzaG93Q29tcGFyaXNvbkNoZWNrYm94ICk7XHJcblxyXG4gICAgLy8gY3JlYXRlIGFuZCBhZGQgdGhlIEJsb2NrVmFsdWVzTm9kZVxyXG4gICAgY29uc3QgYmxvY2tWYWx1ZXNOb2RlID0gbmV3IEJsb2NrVmFsdWVzTm9kZSggbW9kZWwubGVmdENvdW50aW5nQXJlYS5zdW1Qcm9wZXJ0eSwgbW9kZWwucmlnaHRDb3VudGluZ0FyZWEuc3VtUHJvcGVydHkgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIGJsb2NrVmFsdWVzTm9kZSApO1xyXG4gICAgYmxvY2tWYWx1ZXNOb2RlLmNlbnRlclggPSBjb21wYXJpc29uU2lnbnNOb2RlLmNlbnRlclg7XHJcbiAgICBibG9ja1ZhbHVlc05vZGUuYm90dG9tID0gbGVmdENvdW50aW5nQWNjb3JkaW9uQm94LmJvdHRvbSAtIDQ7IC8vIGVtcGlyaWNhbGx5IGRldGVybWluZWQgdHdlYWtcclxuXHJcbiAgICAvLyBjcmVhdGUgYW5kIGFkZCB0aGUgQ29tcGFyZU51bWJlckxpbmVOb2RlXHJcbiAgICBjb25zdCBjb21wYXJlTnVtYmVyTGluZU5vZGUgPSBuZXcgQ29tcGFyZU51bWJlckxpbmVOb2RlKFxyXG4gICAgICBOdW1iZXJTdWl0ZUNvbW1vbkNvbnN0YW50cy5UQUxMX0xPV0VSX0FDQ09SRElPTl9CT1hfSEVJR0hUIC0gMjIsXHJcbiAgICAgIG1vZGVsLmxlZnRDb3VudGluZ0FyZWEuc3VtUHJvcGVydHksXHJcbiAgICAgIG1vZGVsLnJpZ2h0Q291bnRpbmdBcmVhLnN1bVByb3BlcnR5LFxyXG4gICAgICBtb2RlbC5zdW1SYW5nZVxyXG4gICAgKTtcclxuICAgIGNvbXBhcmVOdW1iZXJMaW5lTm9kZS54ID0gY29tcGFyaXNvblNpZ25zTm9kZS5jZW50ZXJYO1xyXG4gICAgY29tcGFyZU51bWJlckxpbmVOb2RlLmJvdHRvbSA9IGxlZnRDb3VudGluZ0FjY29yZGlvbkJveC5ib3R0b20gKyAzO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggY29tcGFyZU51bWJlckxpbmVOb2RlICk7XHJcblxyXG4gICAgLy8gY3JlYXRlIGFuZCBhZGQgdGhlIFJlc2V0QWxsQnV0dG9uXHJcbiAgICBjb25zdCByZXNldEFsbEJ1dHRvbiA9IG5ldyBSZXNldEFsbEJ1dHRvbigge1xyXG4gICAgICBsaXN0ZW5lcjogKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaW50ZXJydXB0U3VidHJlZUlucHV0KCk7IC8vIGNhbmNlbCBpbnRlcmFjdGlvbnMgdGhhdCBtYXkgYmUgaW4gcHJvZ3Jlc3NcclxuICAgICAgICBtb2RlbC5yZXNldCgpO1xyXG4gICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgICAgfSxcclxuICAgICAgcmlnaHQ6IHRoaXMubGF5b3V0Qm91bmRzLm1heFggLSBOdW1iZXJTdWl0ZUNvbW1vbkNvbnN0YW50cy5TQ1JFRU5fVklFV19QQURESU5HX1gsXHJcbiAgICAgIGJvdHRvbTogdGhpcy5sYXlvdXRCb3VuZHMubWF4WSAtIE51bWJlclN1aXRlQ29tbW9uQ29uc3RhbnRzLlNDUkVFTl9WSUVXX1BBRERJTkdfWSxcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAncmVzZXRBbGxCdXR0b24nIClcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHJlc2V0QWxsQnV0dG9uICk7XHJcblxyXG4gICAgLy8gY3JlYXRlIGFuZCBhZGQgYSBidXR0b24gdG8gb3JnYW5pemUgdGhlIGxlZnQgY291bnRpbmcgb2JqZWN0cyBpbiBhIGdyaWRcclxuICAgIGNvbnN0IGxlZnRPcmdhbml6ZUJ1dHRvbiA9IG5ldyBPcmdhbml6ZUJ1dHRvbiggTnVtYmVyQ29tcGFyZUNvbG9ycy5tZWRpdW1QdXJwbGVCYWNrZ3JvdW5kQ29sb3JQcm9wZXJ0eSwgKCkgPT4ge1xyXG4gICAgICBtb2RlbC5sZWZ0Q291bnRpbmdBcmVhLm9yZ2FuaXplT2JqZWN0cygpO1xyXG4gICAgfSApO1xyXG4gICAgbGVmdE9yZ2FuaXplQnV0dG9uLmxlZnQgPSBOdW1iZXJTdWl0ZUNvbW1vbkNvbnN0YW50cy5TQ1JFRU5fVklFV19QQURESU5HX1g7XHJcbiAgICBsZWZ0T3JnYW5pemVCdXR0b24udG9wID0gbGVmdENvdW50aW5nQWNjb3JkaW9uQm94LnRvcDtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIGxlZnRPcmdhbml6ZUJ1dHRvbiApO1xyXG5cclxuICAgIC8vIGNyZWF0ZSBhbmQgYWRkIGEgYnV0dG9uIHRvIG9yZ2FuaXplIHRoZSBvYmplY3RzQWNjb3JkaW9uQm94IGNvdW50aW5nT2JqZWN0cyBpbiBhIGdyaWRcclxuICAgIGNvbnN0IHJpZ2h0T3JnYW5pemVCdXR0b24gPSBuZXcgT3JnYW5pemVCdXR0b24oIE51bWJlclN1aXRlQ29tbW9uQ29sb3JzLmxpZ2h0T3JhbmdlQmFja2dyb3VuZENvbG9yUHJvcGVydHksICgpID0+IHtcclxuICAgICAgbW9kZWwucmlnaHRDb3VudGluZ0FyZWEub3JnYW5pemVPYmplY3RzKCk7XHJcbiAgICB9ICk7XHJcbiAgICByaWdodE9yZ2FuaXplQnV0dG9uLmNlbnRlclggPSByZXNldEFsbEJ1dHRvbi5jZW50ZXJYO1xyXG4gICAgcmlnaHRPcmdhbml6ZUJ1dHRvbi50b3AgPSByaWdodENvdW50aW5nQWNjb3JkaW9uQm94LnRvcDtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHJpZ2h0T3JnYW5pemVCdXR0b24gKTtcclxuXHJcbiAgICAvLyB1cGRhdGUgdGhlIGNvbXBhcmlzb24gc2lnbnMgbm9kZSdzIHRleHQgYW5kIHRoZSBCbG9ja1ZhbHVlc05vZGUgd2hlbiBlaXRoZXIgY3VycmVudCBudW1iZXIgY2hhbmdlc1xyXG4gICAgTXVsdGlsaW5rLm11bHRpbGluayggWyBtb2RlbC5sZWZ0Q291bnRpbmdBcmVhLnN1bVByb3BlcnR5LCBtb2RlbC5yaWdodENvdW50aW5nQXJlYS5zdW1Qcm9wZXJ0eSBdLFxyXG4gICAgICAoIGxlZnRDdXJyZW50TnVtYmVyLCByaWdodEN1cnJlbnROdW1iZXIgKSA9PiB7XHJcbiAgICAgICAgY29tcGFyaXNvblNpZ25zTm9kZS5zdHJpbmcgPSBsZWZ0Q3VycmVudE51bWJlciA8IHJpZ2h0Q3VycmVudE51bWJlciA/IGxlc3NUaGFuU3RyaW5nIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnRDdXJyZW50TnVtYmVyID4gcmlnaHRDdXJyZW50TnVtYmVyID8gZ3JlYXRlclRoYW5TdHJpbmcgOiBlcXVhbFN0cmluZztcclxuICAgICAgfSApO1xyXG5cclxuICAgIC8vIHVwZGF0ZSB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgY29tcGFyaXNvbiBzaWducyBub2RlXHJcbiAgICBtb2RlbC5jb21wYXJpc29uU2lnbnNBbmRUZXh0VmlzaWJsZVByb3BlcnR5LmxpbmsoIHZpc2libGUgPT4ge1xyXG4gICAgICBjb21wYXJpc29uU2lnbnNOb2RlLnZpc2libGUgPSB2aXNpYmxlO1xyXG4gICAgICBjb21wYXJpc29uVGV4dE5vZGUudmlzaWJsZSA9IHZpc2libGU7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gdXBkYXRlIHRoZSB2aXNpYmlsaXR5IG9mIHRoZSBCbG9ja1ZhbHVlc05vZGUgYW5kIE51bWJlckxpbmVOb2RlXHJcbiAgICBtb2RlbC5jb3VudGluZ1R5cGVQcm9wZXJ0eS5saW5rKCBjb3VudGluZ1R5cGUgPT4ge1xyXG4gICAgICBibG9ja1ZhbHVlc05vZGUudmlzaWJsZSA9IGNvdW50aW5nVHlwZSA9PT0gQ29tcGFyZUNvdW50aW5nVHlwZS5CTE9DS1M7XHJcbiAgICAgIGNvbXBhcmVOdW1iZXJMaW5lTm9kZS52aXNpYmxlID0gY291bnRpbmdUeXBlID09PSBDb21wYXJlQ291bnRpbmdUeXBlLk5VTUJFUl9MSU5FO1xyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVzZXRzIHRoZSB2aWV3LlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcclxuICAgIHRoaXMubGVmdFRvdGFsQWNjb3JkaW9uQm94RXhwYW5kZWRQcm9wZXJ0eS5yZXNldCgpO1xyXG4gICAgdGhpcy5yaWdodFRvdGFsQWNjb3JkaW9uQm94RXhwYW5kZWRQcm9wZXJ0eS5yZXNldCgpO1xyXG4gICAgdGhpcy5sZWZ0Q291bnRpbmdBY2NvcmRpb25Cb3hFeHBhbmRlZFByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICB0aGlzLnJpZ2h0Q291bnRpbmdBY2NvcmRpb25Cb3hFeHBhbmRlZFByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICBudW1iZXJDb21wYXJlUHJlZmVyZW5jZXMuYXV0b0hlYXJFbmFibGVkUHJvcGVydHkudmFsdWUgJiYgbnVtYmVyQ29tcGFyZVV0dGVyYW5jZVF1ZXVlLnNwZWFrU3BlZWNoRGF0YSgpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG92ZXJyaWRlIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBmYWxzZSwgJ2Rpc3Bvc2UgaXMgbm90IHN1cHBvcnRlZCwgZXhpc3RzIGZvciB0aGUgbGlmZXRpbWUgb2YgdGhlIHNpbScgKTtcclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcbn1cclxuXHJcbm51bWJlckNvbXBhcmUucmVnaXN0ZXIoICdDb21wYXJlU2NyZWVuVmlldycsIENvbXBhcmVTY3JlZW5WaWV3ICk7XHJcbmV4cG9ydCBkZWZhdWx0IENvbXBhcmVTY3JlZW5WaWV3OyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FB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