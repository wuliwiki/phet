// Copyright 2019-2023, University of Colorado Boulder

/**
 * Main entry point for the sim.
 *
 * @author Chris Klusendorf (PhET Interactive Simulations)
 */

import Sim from '../../joist/js/Sim.js';
import simLauncher from '../../joist/js/simLauncher.js';
import Tandem from '../../tandem/js/Tandem.js';
import CompareScreen from './compare/CompareScreen.js';
import { Display } from '../../scenery/js/imports.js';
import DerivedProperty from '../../axon/js/DerivedProperty.js';
import audioManager from '../../joist/js/audioManager.js';
import SpeechSynthesisAnnouncer from '../../utterance-queue/js/SpeechSynthesisAnnouncer.js';
import NumberCompareStrings from './NumberCompareStrings.js';
import PreferencesModel from '../../joist/js/preferences/PreferencesModel.js';
import NumberComparePreferencesNode from './common/view/NumberComparePreferencesNode.js';
import numberComparePreferences from './common/model/numberComparePreferences.js';
import AutoHearControl from '../../number-suite-common/js/common/view/AutoHearControl.js';
import LabScreen from '../../number-suite-common/js/lab/LabScreen.js';
import numberCompareSpeechSynthesisAnnouncer from './common/view/numberCompareSpeechSynthesisAnnouncer.js';
import NumberSuiteCommonPreferencesNode from '../../number-suite-common/js/common/view/NumberSuiteCommonPreferencesNode.js';
import numberCompareUtteranceQueue from './common/view/numberCompareUtteranceQueue.js';
import LanguageAndVoiceControl from '../../number-suite-common/js/common/view/LanguageAndVoiceControl.js';
import localeProperty from '../../joist/js/i18n/localeProperty.js';
import MathSymbols from '../../scenery-phet/js/MathSymbols.js';
const numberCompareTitleStringProperty = NumberCompareStrings['number-compare'].titleStringProperty;
const LAB_SCREEN_SYMBOLS = [MathSymbols.LESS_THAN, MathSymbols.GREATER_THAN, MathSymbols.EQUAL_TO, MathSymbols.PLUS, MathSymbols.MINUS];
const simOptions = {
  credits: {
    leadDesign: 'Amanda McGarry',
    softwareDevelopment: 'Chris Klusendorf, Luisa Vargas',
    team: 'Sylvia CeledÃ³n-Pattichis, Michael Kauzmann, Chris Malley (PixelZoom, Inc.), Ariel Paul, Kathy Perkins, Marla Schulz, Ian Whitacre',
    qualityAssurance: 'Clifford Hardin, Emily Miller, Nancy Salpepi, Martin Veillette, Kathryn Woessner',
    graphicArts: 'Mariah Hermsmeyer',
    thanks: 'Andrea Barraugh (Math Transformations), Kristin Donley, Bertha Orona'
  },
  preferencesModel: new PreferencesModel({
    simulationOptions: {
      customPreferences: [{
        createContent: () => new NumberComparePreferencesNode()
      }]
    },
    audioOptions: {
      customPreferences: [{
        createContent: () => new AutoHearControl(numberComparePreferences, numberCompareSpeechSynthesisAnnouncer, NumberCompareStrings.automaticallyHearNumberSentenceStringProperty, NumberCompareStrings.automaticallyHearNumberSentenceDescriptionStringProperty, NumberSuiteCommonPreferencesNode.hasScreenType(CompareScreen))
      }],
      // speech synthesis is the only sound used in this sim, no general sim sounds
      supportsSound: false
    },
    localizationOptions: {
      includeLocalePanel: false,
      customPreferences: [{
        createContent: () => new LanguageAndVoiceControl(localeProperty, numberComparePreferences.primaryVoiceProperty, numberCompareUtteranceQueue)
      }]
    }
  })
};

// launch the sim - beware that scenery Image nodes created outside of simLauncher.launch() will have zero bounds
// until the images are fully loaded, see https://github.com/phetsims/coulombs-law/issues/70
simLauncher.launch(() => {
  const sim = new Sim(numberCompareTitleStringProperty, [new CompareScreen(Tandem.ROOT.createTandem('compareScreen')), new LabScreen(LAB_SCREEN_SYMBOLS, numberComparePreferences, Tandem.ROOT.createTandem('numberCompareLabScreen'))], simOptions);
  sim.start();

  // initialize the SpeechSynthesisAnnouncers that will use speech synthesis for general sim use and setting preferences
  if (SpeechSynthesisAnnouncer.isSpeechSynthesisSupported()) {
    numberCompareSpeechSynthesisAnnouncer.initialize(Display.userGestureEmitter, {
      // specify the Properties that control whether output is allowed with speech synthesis
      speechAllowedProperty: new DerivedProperty([sim.isConstructionCompleteProperty, sim.browserTabVisibleProperty, sim.activeProperty, sim.isSettingPhetioStateProperty, audioManager.audioEnabledProperty], (simConstructionComplete, simVisible, simActive, simSettingPhetioState, audioEnabled) => {
        return simConstructionComplete && simVisible && simActive && !simSettingPhetioState && audioEnabled;
      })
    });
    numberCompareSpeechSynthesisAnnouncer.enabledProperty.value = true;
  }
  numberCompareUtteranceQueue.initialize(sim.selectedScreenProperty);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTaW0iLCJzaW1MYXVuY2hlciIsIlRhbmRlbSIsIkNvbXBhcmVTY3JlZW4iLCJEaXNwbGF5IiwiRGVyaXZlZFByb3BlcnR5IiwiYXVkaW9NYW5hZ2VyIiwiU3BlZWNoU3ludGhlc2lzQW5ub3VuY2VyIiwiTnVtYmVyQ29tcGFyZVN0cmluZ3MiLCJQcmVmZXJlbmNlc01vZGVsIiwiTnVtYmVyQ29tcGFyZVByZWZlcmVuY2VzTm9kZSIsIm51bWJlckNvbXBhcmVQcmVmZXJlbmNlcyIsIkF1dG9IZWFyQ29udHJvbCIsIkxhYlNjcmVlbiIsIm51bWJlckNvbXBhcmVTcGVlY2hTeW50aGVzaXNBbm5vdW5jZXIiLCJOdW1iZXJTdWl0ZUNvbW1vblByZWZlcmVuY2VzTm9kZSIsIm51bWJlckNvbXBhcmVVdHRlcmFuY2VRdWV1ZSIsIkxhbmd1YWdlQW5kVm9pY2VDb250cm9sIiwibG9jYWxlUHJvcGVydHkiLCJNYXRoU3ltYm9scyIsIm51bWJlckNvbXBhcmVUaXRsZVN0cmluZ1Byb3BlcnR5IiwidGl0bGVTdHJpbmdQcm9wZXJ0eSIsIkxBQl9TQ1JFRU5fU1lNQk9MUyIsIkxFU1NfVEhBTiIsIkdSRUFURVJfVEhBTiIsIkVRVUFMX1RPIiwiUExVUyIsIk1JTlVTIiwic2ltT3B0aW9ucyIsImNyZWRpdHMiLCJsZWFkRGVzaWduIiwic29mdHdhcmVEZXZlbG9wbWVudCIsInRlYW0iLCJxdWFsaXR5QXNzdXJhbmNlIiwiZ3JhcGhpY0FydHMiLCJ0aGFua3MiLCJwcmVmZXJlbmNlc01vZGVsIiwic2ltdWxhdGlvbk9wdGlvbnMiLCJjdXN0b21QcmVmZXJlbmNlcyIsImNyZWF0ZUNvbnRlbnQiLCJhdWRpb09wdGlvbnMiLCJhdXRvbWF0aWNhbGx5SGVhck51bWJlclNlbnRlbmNlU3RyaW5nUHJvcGVydHkiLCJhdXRvbWF0aWNhbGx5SGVhck51bWJlclNlbnRlbmNlRGVzY3JpcHRpb25TdHJpbmdQcm9wZXJ0eSIsImhhc1NjcmVlblR5cGUiLCJzdXBwb3J0c1NvdW5kIiwibG9jYWxpemF0aW9uT3B0aW9ucyIsImluY2x1ZGVMb2NhbGVQYW5lbCIsInByaW1hcnlWb2ljZVByb3BlcnR5IiwibGF1bmNoIiwic2ltIiwiUk9PVCIsImNyZWF0ZVRhbmRlbSIsInN0YXJ0IiwiaXNTcGVlY2hTeW50aGVzaXNTdXBwb3J0ZWQiLCJpbml0aWFsaXplIiwidXNlckdlc3R1cmVFbWl0dGVyIiwic3BlZWNoQWxsb3dlZFByb3BlcnR5IiwiaXNDb25zdHJ1Y3Rpb25Db21wbGV0ZVByb3BlcnR5IiwiYnJvd3NlclRhYlZpc2libGVQcm9wZXJ0eSIsImFjdGl2ZVByb3BlcnR5IiwiaXNTZXR0aW5nUGhldGlvU3RhdGVQcm9wZXJ0eSIsImF1ZGlvRW5hYmxlZFByb3BlcnR5Iiwic2ltQ29uc3RydWN0aW9uQ29tcGxldGUiLCJzaW1WaXNpYmxlIiwic2ltQWN0aXZlIiwic2ltU2V0dGluZ1BoZXRpb1N0YXRlIiwiYXVkaW9FbmFibGVkIiwiZW5hYmxlZFByb3BlcnR5IiwidmFsdWUiLCJzZWxlY3RlZFNjcmVlblByb3BlcnR5Il0sInNvdXJjZXMiOlsibnVtYmVyLWNvbXBhcmUtbWFpbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOS0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBNYWluIGVudHJ5IHBvaW50IGZvciB0aGUgc2ltLlxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIEtsdXNlbmRvcmYgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IFNpbSwgeyBTaW1PcHRpb25zIH0gZnJvbSAnLi4vLi4vam9pc3QvanMvU2ltLmpzJztcclxuaW1wb3J0IHNpbUxhdW5jaGVyIGZyb20gJy4uLy4uL2pvaXN0L2pzL3NpbUxhdW5jaGVyLmpzJztcclxuaW1wb3J0IFRhbmRlbSBmcm9tICcuLi8uLi90YW5kZW0vanMvVGFuZGVtLmpzJztcclxuaW1wb3J0IENvbXBhcmVTY3JlZW4gZnJvbSAnLi9jb21wYXJlL0NvbXBhcmVTY3JlZW4uanMnO1xyXG5pbXBvcnQgeyBEaXNwbGF5IH0gZnJvbSAnLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IERlcml2ZWRQcm9wZXJ0eSBmcm9tICcuLi8uLi9heG9uL2pzL0Rlcml2ZWRQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBhdWRpb01hbmFnZXIgZnJvbSAnLi4vLi4vam9pc3QvanMvYXVkaW9NYW5hZ2VyLmpzJztcclxuaW1wb3J0IFNwZWVjaFN5bnRoZXNpc0Fubm91bmNlciBmcm9tICcuLi8uLi91dHRlcmFuY2UtcXVldWUvanMvU3BlZWNoU3ludGhlc2lzQW5ub3VuY2VyLmpzJztcclxuaW1wb3J0IE51bWJlckNvbXBhcmVTdHJpbmdzIGZyb20gJy4vTnVtYmVyQ29tcGFyZVN0cmluZ3MuanMnO1xyXG5pbXBvcnQgUHJlZmVyZW5jZXNNb2RlbCBmcm9tICcuLi8uLi9qb2lzdC9qcy9wcmVmZXJlbmNlcy9QcmVmZXJlbmNlc01vZGVsLmpzJztcclxuaW1wb3J0IE51bWJlckNvbXBhcmVQcmVmZXJlbmNlc05vZGUgZnJvbSAnLi9jb21tb24vdmlldy9OdW1iZXJDb21wYXJlUHJlZmVyZW5jZXNOb2RlLmpzJztcclxuaW1wb3J0IG51bWJlckNvbXBhcmVQcmVmZXJlbmNlcyBmcm9tICcuL2NvbW1vbi9tb2RlbC9udW1iZXJDb21wYXJlUHJlZmVyZW5jZXMuanMnO1xyXG5pbXBvcnQgQXV0b0hlYXJDb250cm9sIGZyb20gJy4uLy4uL251bWJlci1zdWl0ZS1jb21tb24vanMvY29tbW9uL3ZpZXcvQXV0b0hlYXJDb250cm9sLmpzJztcclxuaW1wb3J0IExhYlNjcmVlbiBmcm9tICcuLi8uLi9udW1iZXItc3VpdGUtY29tbW9uL2pzL2xhYi9MYWJTY3JlZW4uanMnO1xyXG5pbXBvcnQgbnVtYmVyQ29tcGFyZVNwZWVjaFN5bnRoZXNpc0Fubm91bmNlciBmcm9tICcuL2NvbW1vbi92aWV3L251bWJlckNvbXBhcmVTcGVlY2hTeW50aGVzaXNBbm5vdW5jZXIuanMnO1xyXG5pbXBvcnQgTnVtYmVyU3VpdGVDb21tb25QcmVmZXJlbmNlc05vZGUgZnJvbSAnLi4vLi4vbnVtYmVyLXN1aXRlLWNvbW1vbi9qcy9jb21tb24vdmlldy9OdW1iZXJTdWl0ZUNvbW1vblByZWZlcmVuY2VzTm9kZS5qcyc7XHJcbmltcG9ydCBudW1iZXJDb21wYXJlVXR0ZXJhbmNlUXVldWUgZnJvbSAnLi9jb21tb24vdmlldy9udW1iZXJDb21wYXJlVXR0ZXJhbmNlUXVldWUuanMnO1xyXG5pbXBvcnQgTGFuZ3VhZ2VBbmRWb2ljZUNvbnRyb2wgZnJvbSAnLi4vLi4vbnVtYmVyLXN1aXRlLWNvbW1vbi9qcy9jb21tb24vdmlldy9MYW5ndWFnZUFuZFZvaWNlQ29udHJvbC5qcyc7XHJcbmltcG9ydCBsb2NhbGVQcm9wZXJ0eSBmcm9tICcuLi8uLi9qb2lzdC9qcy9pMThuL2xvY2FsZVByb3BlcnR5LmpzJztcclxuaW1wb3J0IE1hdGhTeW1ib2xzIGZyb20gJy4uLy4uL3NjZW5lcnktcGhldC9qcy9NYXRoU3ltYm9scy5qcyc7XHJcblxyXG5jb25zdCBudW1iZXJDb21wYXJlVGl0bGVTdHJpbmdQcm9wZXJ0eSA9IE51bWJlckNvbXBhcmVTdHJpbmdzWyAnbnVtYmVyLWNvbXBhcmUnIF0udGl0bGVTdHJpbmdQcm9wZXJ0eTtcclxuY29uc3QgTEFCX1NDUkVFTl9TWU1CT0xTID0gWyBNYXRoU3ltYm9scy5MRVNTX1RIQU4sIE1hdGhTeW1ib2xzLkdSRUFURVJfVEhBTiwgTWF0aFN5bWJvbHMuRVFVQUxfVE8sIE1hdGhTeW1ib2xzLlBMVVMsIE1hdGhTeW1ib2xzLk1JTlVTIF07XHJcblxyXG5jb25zdCBzaW1PcHRpb25zOiBTaW1PcHRpb25zID0ge1xyXG4gIGNyZWRpdHM6IHtcclxuICAgIGxlYWREZXNpZ246ICdBbWFuZGEgTWNHYXJyeScsXHJcbiAgICBzb2Z0d2FyZURldmVsb3BtZW50OiAnQ2hyaXMgS2x1c2VuZG9yZiwgTHVpc2EgVmFyZ2FzJyxcclxuICAgIHRlYW06ICdTeWx2aWEgQ2VsZWTDs24tUGF0dGljaGlzLCBNaWNoYWVsIEthdXptYW5uLCBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLiksIEFyaWVsIFBhdWwsIEthdGh5IFBlcmtpbnMsIE1hcmxhIFNjaHVseiwgSWFuIFdoaXRhY3JlJyxcclxuICAgIHF1YWxpdHlBc3N1cmFuY2U6ICdDbGlmZm9yZCBIYXJkaW4sIEVtaWx5IE1pbGxlciwgTmFuY3kgU2FscGVwaSwgTWFydGluIFZlaWxsZXR0ZSwgS2F0aHJ5biBXb2Vzc25lcicsXHJcbiAgICBncmFwaGljQXJ0czogJ01hcmlhaCBIZXJtc21leWVyJyxcclxuICAgIHRoYW5rczogJ0FuZHJlYSBCYXJyYXVnaCAoTWF0aCBUcmFuc2Zvcm1hdGlvbnMpLCBLcmlzdGluIERvbmxleSwgQmVydGhhIE9yb25hJ1xyXG4gIH0sXHJcbiAgcHJlZmVyZW5jZXNNb2RlbDogbmV3IFByZWZlcmVuY2VzTW9kZWwoIHtcclxuICAgIHNpbXVsYXRpb25PcHRpb25zOiB7XHJcbiAgICAgIGN1c3RvbVByZWZlcmVuY2VzOiBbIHtcclxuICAgICAgICBjcmVhdGVDb250ZW50OiAoKSA9PiBuZXcgTnVtYmVyQ29tcGFyZVByZWZlcmVuY2VzTm9kZSgpXHJcbiAgICAgIH0gXVxyXG4gICAgfSxcclxuICAgIGF1ZGlvT3B0aW9uczoge1xyXG4gICAgICBjdXN0b21QcmVmZXJlbmNlczogWyB7XHJcbiAgICAgICAgY3JlYXRlQ29udGVudDogKCkgPT4gbmV3IEF1dG9IZWFyQ29udHJvbChcclxuICAgICAgICAgIG51bWJlckNvbXBhcmVQcmVmZXJlbmNlcyxcclxuICAgICAgICAgIG51bWJlckNvbXBhcmVTcGVlY2hTeW50aGVzaXNBbm5vdW5jZXIsXHJcbiAgICAgICAgICBOdW1iZXJDb21wYXJlU3RyaW5ncy5hdXRvbWF0aWNhbGx5SGVhck51bWJlclNlbnRlbmNlU3RyaW5nUHJvcGVydHksXHJcbiAgICAgICAgICBOdW1iZXJDb21wYXJlU3RyaW5ncy5hdXRvbWF0aWNhbGx5SGVhck51bWJlclNlbnRlbmNlRGVzY3JpcHRpb25TdHJpbmdQcm9wZXJ0eSxcclxuICAgICAgICAgIE51bWJlclN1aXRlQ29tbW9uUHJlZmVyZW5jZXNOb2RlLmhhc1NjcmVlblR5cGUoIENvbXBhcmVTY3JlZW4gKSApXHJcbiAgICAgIH0gXSxcclxuXHJcbiAgICAgIC8vIHNwZWVjaCBzeW50aGVzaXMgaXMgdGhlIG9ubHkgc291bmQgdXNlZCBpbiB0aGlzIHNpbSwgbm8gZ2VuZXJhbCBzaW0gc291bmRzXHJcbiAgICAgIHN1cHBvcnRzU291bmQ6IGZhbHNlXHJcbiAgICB9LFxyXG4gICAgbG9jYWxpemF0aW9uT3B0aW9uczoge1xyXG4gICAgICBpbmNsdWRlTG9jYWxlUGFuZWw6IGZhbHNlLFxyXG4gICAgICBjdXN0b21QcmVmZXJlbmNlczogWyB7XHJcbiAgICAgICAgY3JlYXRlQ29udGVudDogKCkgPT4gbmV3IExhbmd1YWdlQW5kVm9pY2VDb250cm9sKFxyXG4gICAgICAgICAgbG9jYWxlUHJvcGVydHksXHJcbiAgICAgICAgICBudW1iZXJDb21wYXJlUHJlZmVyZW5jZXMucHJpbWFyeVZvaWNlUHJvcGVydHksXHJcbiAgICAgICAgICBudW1iZXJDb21wYXJlVXR0ZXJhbmNlUXVldWVcclxuICAgICAgICApXHJcbiAgICAgIH0gXVxyXG4gICAgfVxyXG4gIH0gKVxyXG59O1xyXG5cclxuLy8gbGF1bmNoIHRoZSBzaW0gLSBiZXdhcmUgdGhhdCBzY2VuZXJ5IEltYWdlIG5vZGVzIGNyZWF0ZWQgb3V0c2lkZSBvZiBzaW1MYXVuY2hlci5sYXVuY2goKSB3aWxsIGhhdmUgemVybyBib3VuZHNcclxuLy8gdW50aWwgdGhlIGltYWdlcyBhcmUgZnVsbHkgbG9hZGVkLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL2NvdWxvbWJzLWxhdy9pc3N1ZXMvNzBcclxuc2ltTGF1bmNoZXIubGF1bmNoKCAoKSA9PiB7XHJcblxyXG4gIGNvbnN0IHNpbSA9IG5ldyBTaW0oIG51bWJlckNvbXBhcmVUaXRsZVN0cmluZ1Byb3BlcnR5LCBbXHJcbiAgICBuZXcgQ29tcGFyZVNjcmVlbiggVGFuZGVtLlJPT1QuY3JlYXRlVGFuZGVtKCAnY29tcGFyZVNjcmVlbicgKSApLFxyXG4gICAgbmV3IExhYlNjcmVlbiggTEFCX1NDUkVFTl9TWU1CT0xTLCBudW1iZXJDb21wYXJlUHJlZmVyZW5jZXMsIFRhbmRlbS5ST09ULmNyZWF0ZVRhbmRlbSggJ251bWJlckNvbXBhcmVMYWJTY3JlZW4nICkgKVxyXG4gIF0sIHNpbU9wdGlvbnMgKTtcclxuICBzaW0uc3RhcnQoKTtcclxuXHJcbiAgLy8gaW5pdGlhbGl6ZSB0aGUgU3BlZWNoU3ludGhlc2lzQW5ub3VuY2VycyB0aGF0IHdpbGwgdXNlIHNwZWVjaCBzeW50aGVzaXMgZm9yIGdlbmVyYWwgc2ltIHVzZSBhbmQgc2V0dGluZyBwcmVmZXJlbmNlc1xyXG4gIGlmICggU3BlZWNoU3ludGhlc2lzQW5ub3VuY2VyLmlzU3BlZWNoU3ludGhlc2lzU3VwcG9ydGVkKCkgKSB7XHJcbiAgICBudW1iZXJDb21wYXJlU3BlZWNoU3ludGhlc2lzQW5ub3VuY2VyLmluaXRpYWxpemUoIERpc3BsYXkudXNlckdlc3R1cmVFbWl0dGVyLCB7XHJcblxyXG4gICAgICAvLyBzcGVjaWZ5IHRoZSBQcm9wZXJ0aWVzIHRoYXQgY29udHJvbCB3aGV0aGVyIG91dHB1dCBpcyBhbGxvd2VkIHdpdGggc3BlZWNoIHN5bnRoZXNpc1xyXG4gICAgICBzcGVlY2hBbGxvd2VkUHJvcGVydHk6IG5ldyBEZXJpdmVkUHJvcGVydHkoIFtcclxuICAgICAgICBzaW0uaXNDb25zdHJ1Y3Rpb25Db21wbGV0ZVByb3BlcnR5LFxyXG4gICAgICAgIHNpbS5icm93c2VyVGFiVmlzaWJsZVByb3BlcnR5LFxyXG4gICAgICAgIHNpbS5hY3RpdmVQcm9wZXJ0eSxcclxuICAgICAgICBzaW0uaXNTZXR0aW5nUGhldGlvU3RhdGVQcm9wZXJ0eSxcclxuICAgICAgICBhdWRpb01hbmFnZXIuYXVkaW9FbmFibGVkUHJvcGVydHlcclxuICAgICAgXSwgKCBzaW1Db25zdHJ1Y3Rpb25Db21wbGV0ZSwgc2ltVmlzaWJsZSwgc2ltQWN0aXZlLCBzaW1TZXR0aW5nUGhldGlvU3RhdGUsIGF1ZGlvRW5hYmxlZCApID0+IHtcclxuICAgICAgICByZXR1cm4gc2ltQ29uc3RydWN0aW9uQ29tcGxldGUgJiYgc2ltVmlzaWJsZSAmJiBzaW1BY3RpdmUgJiYgIXNpbVNldHRpbmdQaGV0aW9TdGF0ZSAmJiBhdWRpb0VuYWJsZWQ7XHJcbiAgICAgIH0gKVxyXG4gICAgfSApO1xyXG4gICAgbnVtYmVyQ29tcGFyZVNwZWVjaFN5bnRoZXNpc0Fubm91bmNlci5lbmFibGVkUHJvcGVydHkudmFsdWUgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgbnVtYmVyQ29tcGFyZVV0dGVyYW5jZVF1ZXVlLmluaXRpYWxpemUoIHNpbS5zZWxlY3RlZFNjcmVlblByb3BlcnR5ICk7XHJcbn0gKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsR0FBRyxNQUFzQix1QkFBdUI7QUFDdkQsT0FBT0MsV0FBVyxNQUFNLCtCQUErQjtBQUN2RCxPQUFPQyxNQUFNLE1BQU0sMkJBQTJCO0FBQzlDLE9BQU9DLGFBQWEsTUFBTSw0QkFBNEI7QUFDdEQsU0FBU0MsT0FBTyxRQUFRLDZCQUE2QjtBQUNyRCxPQUFPQyxlQUFlLE1BQU0sa0NBQWtDO0FBQzlELE9BQU9DLFlBQVksTUFBTSxnQ0FBZ0M7QUFDekQsT0FBT0Msd0JBQXdCLE1BQU0sc0RBQXNEO0FBQzNGLE9BQU9DLG9CQUFvQixNQUFNLDJCQUEyQjtBQUM1RCxPQUFPQyxnQkFBZ0IsTUFBTSxnREFBZ0Q7QUFDN0UsT0FBT0MsNEJBQTRCLE1BQU0sK0NBQStDO0FBQ3hGLE9BQU9DLHdCQUF3QixNQUFNLDRDQUE0QztBQUNqRixPQUFPQyxlQUFlLE1BQU0sNkRBQTZEO0FBQ3pGLE9BQU9DLFNBQVMsTUFBTSwrQ0FBK0M7QUFDckUsT0FB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