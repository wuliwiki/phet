// Copyright 2021-2022, University of Colorado Boulder

/**
 * Mixin for THREE.Object3D types that handles instrumentation details.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import ThreeObject3DPhetioObject from './ThreeObject3DPhetioObject.js';
import mobius from './mobius.js';
import memoize from '../../phet-core/js/memoize.js';
/**
 * @param type - Should be THREE.Object3D or a subtype
 */
const ThreeInstrumentable = memoize(type => {
  return class ThreeInstrumentableMixin extends type {
    /**
     * Pass tandem as the first arg, the rest will be passed through
     */
    constructor(...args) {
      const options = args[args.length - 1];
      const threeArgs = args.slice(0, args.length - 1);
      super(...threeArgs);
      this.phetioObject = new ThreeObject3DPhetioObject(options);
    }

    /**
     * Releases references
     */
    dispose() {
      // @ts-expect-error
      super.dispose && super.dispose();
      this.phetioObject.dispose();
    }
  };
});
mobius.register('ThreeInstrumentable', ThreeInstrumentable);
export default ThreeInstrumentable;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJUaHJlZU9iamVjdDNEUGhldGlvT2JqZWN0IiwibW9iaXVzIiwibWVtb2l6ZSIsIlRocmVlSW5zdHJ1bWVudGFibGUiLCJ0eXBlIiwiVGhyZWVJbnN0cnVtZW50YWJsZU1peGluIiwiY29uc3RydWN0b3IiLCJhcmdzIiwib3B0aW9ucyIsImxlbmd0aCIsInRocmVlQXJncyIsInNsaWNlIiwicGhldGlvT2JqZWN0IiwiZGlzcG9zZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiVGhyZWVJbnN0cnVtZW50YWJsZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMS0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBNaXhpbiBmb3IgVEhSRUUuT2JqZWN0M0QgdHlwZXMgdGhhdCBoYW5kbGVzIGluc3RydW1lbnRhdGlvbiBkZXRhaWxzLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XHJcbiAqL1xyXG5cclxuaW1wb3J0IFRocmVlT2JqZWN0M0RQaGV0aW9PYmplY3QgZnJvbSAnLi9UaHJlZU9iamVjdDNEUGhldGlvT2JqZWN0LmpzJztcclxuaW1wb3J0IG1vYml1cyBmcm9tICcuL21vYml1cy5qcyc7XHJcbmltcG9ydCBDb25zdHJ1Y3RvciBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvQ29uc3RydWN0b3IuanMnO1xyXG5pbXBvcnQgbWVtb2l6ZSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvbWVtb2l6ZS5qcyc7XHJcbmltcG9ydCBJbnRlbnRpb25hbEFueSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvSW50ZW50aW9uYWxBbnkuanMnO1xyXG5cclxuLyoqXHJcbiAqIEBwYXJhbSB0eXBlIC0gU2hvdWxkIGJlIFRIUkVFLk9iamVjdDNEIG9yIGEgc3VidHlwZVxyXG4gKi9cclxuY29uc3QgVGhyZWVJbnN0cnVtZW50YWJsZSA9IG1lbW9pemUoIDxTdXBlclR5cGUgZXh0ZW5kcyBDb25zdHJ1Y3Rvcj4oIHR5cGU6IFN1cGVyVHlwZSApID0+IHtcclxuXHJcbiAgcmV0dXJuIGNsYXNzIFRocmVlSW5zdHJ1bWVudGFibGVNaXhpbiBleHRlbmRzIHR5cGUge1xyXG5cclxuICAgIHB1YmxpYyBwaGV0aW9PYmplY3Q6IFRocmVlT2JqZWN0M0RQaGV0aW9PYmplY3Q7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQYXNzIHRhbmRlbSBhcyB0aGUgZmlyc3QgYXJnLCB0aGUgcmVzdCB3aWxsIGJlIHBhc3NlZCB0aHJvdWdoXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvciggLi4uYXJnczogSW50ZW50aW9uYWxBbnlbXSApIHtcclxuICAgICAgY29uc3Qgb3B0aW9ucyA9IGFyZ3NbIGFyZ3MubGVuZ3RoIC0gMSBdO1xyXG4gICAgICBjb25zdCB0aHJlZUFyZ3MgPSBhcmdzLnNsaWNlKCAwLCBhcmdzLmxlbmd0aCAtIDEgKTtcclxuXHJcbiAgICAgIHN1cGVyKCAuLi50aHJlZUFyZ3MgKTtcclxuXHJcbiAgICAgIHRoaXMucGhldGlvT2JqZWN0ID0gbmV3IFRocmVlT2JqZWN0M0RQaGV0aW9PYmplY3QoIG9wdGlvbnMgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbGVhc2VzIHJlZmVyZW5jZXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcclxuICAgICAgc3VwZXIuZGlzcG9zZSAmJiBzdXBlci5kaXNwb3NlKCk7XHJcblxyXG4gICAgICB0aGlzLnBoZXRpb09iamVjdC5kaXNwb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxufSApO1xyXG5cclxubW9iaXVzLnJlZ2lzdGVyKCAnVGhyZWVJbnN0cnVtZW50YWJsZScsIFRocmVlSW5zdHJ1bWVudGFibGUgKTtcclxuZXhwb3J0IGRlZmF1bHQgVGhyZWVJbnN0cnVtZW50YWJsZTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EseUJBQXlCLE1BQU0sZ0NBQWdDO0FBQ3RFLE9BQU9DLE1BQU0sTUFBTSxhQUFhO0FBRWhDLE9BQU9DLE9BQU8sTUFBTSwrQkFBK0I7QUFHbkQ7QUFDQTtBQUNBO0FBQ0EsTUFBTUMsbUJBQW1CLEdBQUdELE9BQU8sQ0FBbUNFLElBQWUsSUFBTTtFQUV6RixPQUFPLE1BQU1DLHdCQUF3QixTQUFTRCxJQUFJLENBQUM7SUFJakQ7QUFDSjtBQUNBO0lBQ1dFLFdBQVdBLENBQUUsR0FBR0MsSUFBc0IsRUFBRztNQUM5QyxNQUFNQyxPQUFPLEdBQUdELElBQUksQ0FBRUEsSUFBSSxDQUFDRSxNQUFNLEdBQUcsQ0FBQyxDQUFFO01BQ3ZDLE1BQU1DLFNBQVMsR0FBR0gsSUFBSSxDQUFDSSxLQUFLLENBQUUsQ0FBQyxFQUFFSixJQUFJLENBQUNFLE1BQU0sR0FBRyxDQUFFLENBQUM7TUFFbEQsS0FBSyxDQUFFLEdBQUdDLFNBQVUsQ0FBQztNQUVyQixJQUFJLENBQUNFLFlBQVksR0FBRyxJQUFJWix5QkFBeUIsQ0FBRVEsT0FBUSxDQUFDO0lBQzlEOztJQUVBO0FBQ0o7QUFDQTtJQUNXSyxPQUFPQSxDQUFBLEVBQVM7TUFDckI7TUFDQSxLQUFLLENBQUNBLE9BQU8sSUFBSSxLQUFLLENBQUNBLE9BQU8sQ0FBQyxDQUFDO01BRWhDLElBQUksQ0FBQ0QsWUFBWSxDQUFDQyxPQUFPLENBQUMsQ0FBQztJQUM3QjtFQUNGLENBQUM7QUFDSCxDQUFFLENBQUM7QUFFSFosTUFBTSxDQUFDYSxRQUFRLENBQUUscUJBQXFCLEVBQUVYLG1CQUFvQixDQUFDO0FBQzdELGVBQWVBLG1CQUFtQiJ9