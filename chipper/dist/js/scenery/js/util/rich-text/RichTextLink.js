// Copyright 2023, University of Colorado Boulder

/**
 * A link node in RichText - NOTE: This is NOT embedded for layout. Instead, link content will be added as children to this node,
 * and this will exist solely for the link functionality.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */
import Pool from '../../../../phet-core/js/Pool.js';
import Tandem from '../../../../tandem/js/Tandem.js';
import { allowLinksProperty, FireListener, Node, openPopup, RichTextCleanable, scenery, Voicing } from '../../imports.js';
export default class RichTextLink extends Voicing(RichTextCleanable(Node)) {
  fireListener = null;
  accessibleInputListener = null;
  allowLinksListener = null;
  constructor(innerContent, href) {
    super();

    // Voicing was already initialized in the super call, we do not want to initialize super again. But we do want to
    // initialize the RichText portion of the implementation.
    this.initialize(innerContent, href, false);

    // Mutate to make sure initialize doesn't clear this away
    this.mutate({
      cursor: 'pointer',
      tagName: 'a'
    });
  }

  /**
   * Set up this state. First construction does not need to use super.initialize() because the constructor has done
   * that for us. But repeated initialization with Poolable will need to initialize super again.
   */
  initialize(innerContent, href, initializeSuper = true) {
    if (initializeSuper) {
      super.initialize();
    }

    // pdom - open the link in the new tab when activated with a keyboard.
    // also see https://github.com/phetsims/joist/issues/430
    this.innerContent = innerContent;
    this.voicingNameResponse = innerContent;

    // If our href is a function, it should be called when the user clicks on the link
    if (typeof href === 'function') {
      this.fireListener = new FireListener({
        fire: href,
        tandem: Tandem.OPT_OUT
      });
      this.addInputListener(this.fireListener);
      this.setPDOMAttribute('href', '#'); // Required so that the click listener will get called.
      this.setPDOMAttribute('target', '_self'); // This is the default (easier than conditionally removing)
      this.accessibleInputListener = {
        click: event => {
          event.domEvent && event.domEvent.preventDefault();
          href();
        }
      };
      this.addInputListener(this.accessibleInputListener);
    }
    // Otherwise our href is a {string}, and we should open a window pointing to it (assuming it's a URL)
    else {
      this.fireListener = new FireListener({
        fire: event => {
          if (event.isFromPDOM()) {
            // prevent default from pdom activation so we don't also open a new tab from native DOM input on a link
            event.domEvent.preventDefault();
          }
          // @ts-expect-error TODO TODO TODO this is a bug! How do we handle this?
          self._linkEventsHandled && event.handle();
          openPopup(href); // open in a new window/tab
        },

        tandem: Tandem.OPT_OUT
      });
      this.addInputListener(this.fireListener);
      this.setPDOMAttribute('href', href);
      this.setPDOMAttribute('target', '_blank');
      this.allowLinksListener = allowLinks => {
        this.visible = allowLinks;
      };
      allowLinksProperty.link(this.allowLinksListener);
    }
    return this;
  }

  /**
   * Cleans references that could cause memory leaks (as those things may contain other references).
   */
  clean() {
    super.clean();
    if (this.fireListener) {
      this.removeInputListener(this.fireListener);
      this.fireListener.dispose();
    }
    this.fireListener = null;
    if (this.accessibleInputListener) {
      this.removeInputListener(this.accessibleInputListener);
      this.accessibleInputListener = null;
    }
    if (this.allowLinksListener) {
      allowLinksProperty.unlink(this.allowLinksListener);
      this.allowLinksListener = null;
    }
  }
  freeToPool() {
    RichTextLink.pool.freeToPool(this);
  }
  static pool = new Pool(RichTextLink);
}
scenery.register('RichTextLink', RichTextLink);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQb29sIiwiVGFuZGVtIiwiYWxsb3dMaW5rc1Byb3BlcnR5IiwiRmlyZUxpc3RlbmVyIiwiTm9kZSIsIm9wZW5Qb3B1cCIsIlJpY2hUZXh0Q2xlYW5hYmxlIiwic2NlbmVyeSIsIlZvaWNpbmciLCJSaWNoVGV4dExpbmsiLCJmaXJlTGlzdGVuZXIiLCJhY2Nlc3NpYmxlSW5wdXRMaXN0ZW5lciIsImFsbG93TGlua3NMaXN0ZW5lciIsImNvbnN0cnVjdG9yIiwiaW5uZXJDb250ZW50IiwiaHJlZiIsImluaXRpYWxpemUiLCJtdXRhdGUiLCJjdXJzb3IiLCJ0YWdOYW1lIiwiaW5pdGlhbGl6ZVN1cGVyIiwidm9pY2luZ05hbWVSZXNwb25zZSIsImZpcmUiLCJ0YW5kZW0iLCJPUFRfT1VUIiwiYWRkSW5wdXRMaXN0ZW5lciIsInNldFBET01BdHRyaWJ1dGUiLCJjbGljayIsImV2ZW50IiwiZG9tRXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsImlzRnJvbVBET00iLCJzZWxmIiwiX2xpbmtFdmVudHNIYW5kbGVkIiwiaGFuZGxlIiwiYWxsb3dMaW5rcyIsInZpc2libGUiLCJsaW5rIiwiY2xlYW4iLCJyZW1vdmVJbnB1dExpc3RlbmVyIiwiZGlzcG9zZSIsInVubGluayIsImZyZWVUb1Bvb2wiLCJwb29sIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJSaWNoVGV4dExpbmsudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIEEgbGluayBub2RlIGluIFJpY2hUZXh0IC0gTk9URTogVGhpcyBpcyBOT1QgZW1iZWRkZWQgZm9yIGxheW91dC4gSW5zdGVhZCwgbGluayBjb250ZW50IHdpbGwgYmUgYWRkZWQgYXMgY2hpbGRyZW4gdG8gdGhpcyBub2RlLFxyXG4gKiBhbmQgdGhpcyB3aWxsIGV4aXN0IHNvbGVseSBmb3IgdGhlIGxpbmsgZnVuY3Rpb25hbGl0eS5cclxuICpcclxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxyXG4gKi9cclxuaW1wb3J0IFBvb2wsIHsgVFBvb2xhYmxlIH0gZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL1Bvb2wuanMnO1xyXG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uLy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xyXG5pbXBvcnQgeyBhbGxvd0xpbmtzUHJvcGVydHksIEZpcmVMaXN0ZW5lciwgTm9kZSwgb3BlblBvcHVwLCBSaWNoVGV4dENsZWFuYWJsZSwgUmljaFRleHRIcmVmLCBzY2VuZXJ5LCBUSW5wdXRMaXN0ZW5lciwgVm9pY2luZyB9IGZyb20gJy4uLy4uL2ltcG9ydHMuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmljaFRleHRMaW5rIGV4dGVuZHMgVm9pY2luZyggUmljaFRleHRDbGVhbmFibGUoIE5vZGUgKSApIGltcGxlbWVudHMgVFBvb2xhYmxlIHtcclxuXHJcbiAgcHJpdmF0ZSBmaXJlTGlzdGVuZXI6IEZpcmVMaXN0ZW5lciB8IG51bGwgPSBudWxsO1xyXG4gIHByaXZhdGUgYWNjZXNzaWJsZUlucHV0TGlzdGVuZXI6IFRJbnB1dExpc3RlbmVyIHwgbnVsbCA9IG51bGw7XHJcbiAgcHJpdmF0ZSBhbGxvd0xpbmtzTGlzdGVuZXI6ICggKCBhbGxvd0xpbmtzOiBib29sZWFuICkgPT4gdm9pZCApIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggaW5uZXJDb250ZW50OiBzdHJpbmcsIGhyZWY6IFJpY2hUZXh0SHJlZiApIHtcclxuICAgIHN1cGVyKCk7XHJcblxyXG4gICAgLy8gVm9pY2luZyB3YXMgYWxyZWFkeSBpbml0aWFsaXplZCBpbiB0aGUgc3VwZXIgY2FsbCwgd2UgZG8gbm90IHdhbnQgdG8gaW5pdGlhbGl6ZSBzdXBlciBhZ2Fpbi4gQnV0IHdlIGRvIHdhbnQgdG9cclxuICAgIC8vIGluaXRpYWxpemUgdGhlIFJpY2hUZXh0IHBvcnRpb24gb2YgdGhlIGltcGxlbWVudGF0aW9uLlxyXG4gICAgdGhpcy5pbml0aWFsaXplKCBpbm5lckNvbnRlbnQsIGhyZWYsIGZhbHNlICk7XHJcblxyXG4gICAgLy8gTXV0YXRlIHRvIG1ha2Ugc3VyZSBpbml0aWFsaXplIGRvZXNuJ3QgY2xlYXIgdGhpcyBhd2F5XHJcbiAgICB0aGlzLm11dGF0ZSgge1xyXG4gICAgICBjdXJzb3I6ICdwb2ludGVyJyxcclxuICAgICAgdGFnTmFtZTogJ2EnXHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXQgdXAgdGhpcyBzdGF0ZS4gRmlyc3QgY29uc3RydWN0aW9uIGRvZXMgbm90IG5lZWQgdG8gdXNlIHN1cGVyLmluaXRpYWxpemUoKSBiZWNhdXNlIHRoZSBjb25zdHJ1Y3RvciBoYXMgZG9uZVxyXG4gICAqIHRoYXQgZm9yIHVzLiBCdXQgcmVwZWF0ZWQgaW5pdGlhbGl6YXRpb24gd2l0aCBQb29sYWJsZSB3aWxsIG5lZWQgdG8gaW5pdGlhbGl6ZSBzdXBlciBhZ2Fpbi5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgaW5pdGlhbGl6ZSggaW5uZXJDb250ZW50OiBzdHJpbmcsIGhyZWY6IFJpY2hUZXh0SHJlZiwgaW5pdGlhbGl6ZVN1cGVyID0gdHJ1ZSApOiB0aGlzIHtcclxuXHJcbiAgICBpZiAoIGluaXRpYWxpemVTdXBlciApIHtcclxuICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHBkb20gLSBvcGVuIHRoZSBsaW5rIGluIHRoZSBuZXcgdGFiIHdoZW4gYWN0aXZhdGVkIHdpdGggYSBrZXlib2FyZC5cclxuICAgIC8vIGFsc28gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9qb2lzdC9pc3N1ZXMvNDMwXHJcbiAgICB0aGlzLmlubmVyQ29udGVudCA9IGlubmVyQ29udGVudDtcclxuXHJcbiAgICB0aGlzLnZvaWNpbmdOYW1lUmVzcG9uc2UgPSBpbm5lckNvbnRlbnQ7XHJcblxyXG4gICAgLy8gSWYgb3VyIGhyZWYgaXMgYSBmdW5jdGlvbiwgaXQgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIHRoZSB1c2VyIGNsaWNrcyBvbiB0aGUgbGlua1xyXG4gICAgaWYgKCB0eXBlb2YgaHJlZiA9PT0gJ2Z1bmN0aW9uJyApIHtcclxuICAgICAgdGhpcy5maXJlTGlzdGVuZXIgPSBuZXcgRmlyZUxpc3RlbmVyKCB7XHJcbiAgICAgICAgZmlyZTogaHJlZixcclxuICAgICAgICB0YW5kZW06IFRhbmRlbS5PUFRfT1VUXHJcbiAgICAgIH0gKTtcclxuICAgICAgdGhpcy5hZGRJbnB1dExpc3RlbmVyKCB0aGlzLmZpcmVMaXN0ZW5lciApO1xyXG4gICAgICB0aGlzLnNldFBET01BdHRyaWJ1dGUoICdocmVmJywgJyMnICk7IC8vIFJlcXVpcmVkIHNvIHRoYXQgdGhlIGNsaWNrIGxpc3RlbmVyIHdpbGwgZ2V0IGNhbGxlZC5cclxuICAgICAgdGhpcy5zZXRQRE9NQXR0cmlidXRlKCAndGFyZ2V0JywgJ19zZWxmJyApOyAvLyBUaGlzIGlzIHRoZSBkZWZhdWx0IChlYXNpZXIgdGhhbiBjb25kaXRpb25hbGx5IHJlbW92aW5nKVxyXG4gICAgICB0aGlzLmFjY2Vzc2libGVJbnB1dExpc3RlbmVyID0ge1xyXG4gICAgICAgIGNsaWNrOiBldmVudCA9PiB7XHJcbiAgICAgICAgICBldmVudC5kb21FdmVudCAmJiBldmVudC5kb21FdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgIGhyZWYoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIHRoaXMuYWRkSW5wdXRMaXN0ZW5lciggdGhpcy5hY2Nlc3NpYmxlSW5wdXRMaXN0ZW5lciApO1xyXG4gICAgfVxyXG4gICAgLy8gT3RoZXJ3aXNlIG91ciBocmVmIGlzIGEge3N0cmluZ30sIGFuZCB3ZSBzaG91bGQgb3BlbiBhIHdpbmRvdyBwb2ludGluZyB0byBpdCAoYXNzdW1pbmcgaXQncyBhIFVSTClcclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLmZpcmVMaXN0ZW5lciA9IG5ldyBGaXJlTGlzdGVuZXIoIHtcclxuICAgICAgICBmaXJlOiBldmVudCA9PiB7XHJcbiAgICAgICAgICBpZiAoIGV2ZW50LmlzRnJvbVBET00oKSApIHtcclxuXHJcbiAgICAgICAgICAgIC8vIHByZXZlbnQgZGVmYXVsdCBmcm9tIHBkb20gYWN0aXZhdGlvbiBzbyB3ZSBkb24ndCBhbHNvIG9wZW4gYSBuZXcgdGFiIGZyb20gbmF0aXZlIERPTSBpbnB1dCBvbiBhIGxpbmtcclxuICAgICAgICAgICAgZXZlbnQuZG9tRXZlbnQhLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE8gVE9ETyBUT0RPIHRoaXMgaXMgYSBidWchIEhvdyBkbyB3ZSBoYW5kbGUgdGhpcz9cclxuICAgICAgICAgIHNlbGYuX2xpbmtFdmVudHNIYW5kbGVkICYmIGV2ZW50LmhhbmRsZSgpO1xyXG4gICAgICAgICAgb3BlblBvcHVwKCBocmVmICk7IC8vIG9wZW4gaW4gYSBuZXcgd2luZG93L3RhYlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdGFuZGVtOiBUYW5kZW0uT1BUX09VVFxyXG4gICAgICB9ICk7XHJcbiAgICAgIHRoaXMuYWRkSW5wdXRMaXN0ZW5lciggdGhpcy5maXJlTGlzdGVuZXIgKTtcclxuICAgICAgdGhpcy5zZXRQRE9NQXR0cmlidXRlKCAnaHJlZicsIGhyZWYgKTtcclxuICAgICAgdGhpcy5zZXRQRE9NQXR0cmlidXRlKCAndGFyZ2V0JywgJ19ibGFuaycgKTtcclxuXHJcbiAgICAgIHRoaXMuYWxsb3dMaW5rc0xpc3RlbmVyID0gKCBhbGxvd0xpbmtzOiBib29sZWFuICkgPT4ge1xyXG4gICAgICAgIHRoaXMudmlzaWJsZSA9IGFsbG93TGlua3M7XHJcbiAgICAgIH07XHJcbiAgICAgIGFsbG93TGlua3NQcm9wZXJ0eS5saW5rKCB0aGlzLmFsbG93TGlua3NMaXN0ZW5lciApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2xlYW5zIHJlZmVyZW5jZXMgdGhhdCBjb3VsZCBjYXVzZSBtZW1vcnkgbGVha3MgKGFzIHRob3NlIHRoaW5ncyBtYXkgY29udGFpbiBvdGhlciByZWZlcmVuY2VzKS5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgY2xlYW4oKTogdm9pZCB7XHJcbiAgICBzdXBlci5jbGVhbigpO1xyXG5cclxuICAgIGlmICggdGhpcy5maXJlTGlzdGVuZXIgKSB7XHJcbiAgICAgIHRoaXMucmVtb3ZlSW5wdXRMaXN0ZW5lciggdGhpcy5maXJlTGlzdGVuZXIgKTtcclxuICAgICAgdGhpcy5maXJlTGlzdGVuZXIuZGlzcG9zZSgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5maXJlTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgaWYgKCB0aGlzLmFjY2Vzc2libGVJbnB1dExpc3RlbmVyICkge1xyXG4gICAgICB0aGlzLnJlbW92ZUlucHV0TGlzdGVuZXIoIHRoaXMuYWNjZXNzaWJsZUlucHV0TGlzdGVuZXIgKTtcclxuICAgICAgdGhpcy5hY2Nlc3NpYmxlSW5wdXRMaXN0ZW5lciA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBpZiAoIHRoaXMuYWxsb3dMaW5rc0xpc3RlbmVyICkge1xyXG4gICAgICBhbGxvd0xpbmtzUHJvcGVydHkudW5saW5rKCB0aGlzLmFsbG93TGlua3NMaXN0ZW5lciApO1xyXG4gICAgICB0aGlzLmFsbG93TGlua3NMaXN0ZW5lciA9IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZnJlZVRvUG9vbCgpOiB2b2lkIHtcclxuICAgIFJpY2hUZXh0TGluay5wb29sLmZyZWVUb1Bvb2woIHRoaXMgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgcG9vbCA9IG5ldyBQb29sKCBSaWNoVGV4dExpbmsgKTtcclxufVxyXG5cclxuc2NlbmVyeS5yZWdpc3RlciggJ1JpY2hUZXh0TGluaycsIFJpY2hUZXh0TGluayApO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU9BLElBQUksTUFBcUIsa0NBQWtDO0FBQ2xFLE9BQU9DLE1BQU0sTUFBTSxpQ0FBaUM7QUFDcEQsU0FBU0Msa0JBQWtCLEVBQUVDLFlBQVksRUFBRUMsSUFBSSxFQUFFQyxTQUFTLEVBQUVDLGlCQUFpQixFQUFnQkMsT0FBTyxFQUFrQkMsT0FBTyxRQUFRLGtCQUFrQjtBQUV2SixlQUFlLE1BQU1DLFlBQVksU0FBU0QsT0FBTyxDQUFFRixpQkFBaUIsQ0FBRUYsSUFBSyxDQUFFLENBQUMsQ0FBc0I7RUFFMUZNLFlBQVksR0FBd0IsSUFBSTtFQUN4Q0MsdUJBQXVCLEdBQTBCLElBQUk7RUFDckRDLGtCQUFrQixHQUErQyxJQUFJO0VBRXRFQyxXQUFXQSxDQUFFQyxZQUFvQixFQUFFQyxJQUFrQixFQUFHO0lBQzdELEtBQUssQ0FBQyxDQUFDOztJQUVQO0lBQ0E7SUFDQSxJQUFJLENBQUNDLFVBQVUsQ0FBRUYsWUFBWSxFQUFFQyxJQUFJLEVBQUUsS0FBTSxDQUFDOztJQUU1QztJQUNBLElBQUksQ0FBQ0UsTUFBTSxDQUFFO01BQ1hDLE1BQU0sRUFBRSxTQUFTO01BQ2pCQyxPQUFPLEVBQUU7SUFDWCxDQUFFLENBQUM7RUFDTDs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtFQUNrQkgsVUFBVUEsQ0FBRUYsWUFBb0IsRUFBRUMsSUFBa0IsRUFBRUssZUFBZSxHQUFHLElBQUksRUFBUztJQUVuRyxJQUFLQSxlQUFlLEVBQUc7TUFDckIsS0FBSyxDQUFDSixVQUFVLENBQUMsQ0FBQztJQUNwQjs7SUFFQTtJQUNBO0lBQ0EsSUFBSSxDQUFDRixZQUFZLEdBQUdBLFlBQVk7SUFFaEMsSUFBSSxDQUFDTyxtQkFBbUIsR0FBR1AsWUFBWTs7SUFFdkM7SUFDQSxJ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