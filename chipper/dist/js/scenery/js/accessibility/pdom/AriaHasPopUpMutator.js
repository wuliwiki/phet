// Copyright 2021-2022, University of Colorado Boulder

/**
 * Sets ParallelDOM.js fields for an Node that uses aria-haspopup. It was discovered that
 * this attribute changes how iOS 14 VoiceOver interacts with elements - elements with
 * aria-haspopup must be positioned in the viewport to receive pointer and click
 * events.
 *
 * See https://github.com/phetsims/scenery/issues/1094 for more information.
 *
 * @author Jesse Greenberg
 */
import { scenery } from '../../imports.js';
const AriaHasPopUpMutator = {
  /**
   * @param node - Node whose ParallelDOM.js fields will change
   * @param value - Valid value for aria-haspopup attribute, or false to remove the attribute
   */
  mutateNode(node, value) {
    if (value) {
      node.setPDOMAttribute('aria-haspopup', value);
    } else {
      assert && assert(node.hasPDOMAttribute('aria-haspopup'), 'Set aria-haspopup once before removing it.');
      node.removePDOMAttribute('aria-haspopup');
    }
    node.positionInPDOM = !!value;
  }
};
scenery.register('AriaHasPopUpMutator', AriaHasPopUpMutator);
export default AriaHasPopUpMutator;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzY2VuZXJ5IiwiQXJpYUhhc1BvcFVwTXV0YXRvciIsIm11dGF0ZU5vZGUiLCJub2RlIiwidmFsdWUiLCJzZXRQRE9NQXR0cmlidXRlIiwiYXNzZXJ0IiwiaGFzUERPTUF0dHJpYnV0ZSIsInJlbW92ZVBET01BdHRyaWJ1dGUiLCJwb3NpdGlvbkluUERPTSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiQXJpYUhhc1BvcFVwTXV0YXRvci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMS0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBTZXRzIFBhcmFsbGVsRE9NLmpzIGZpZWxkcyBmb3IgYW4gTm9kZSB0aGF0IHVzZXMgYXJpYS1oYXNwb3B1cC4gSXQgd2FzIGRpc2NvdmVyZWQgdGhhdFxyXG4gKiB0aGlzIGF0dHJpYnV0ZSBjaGFuZ2VzIGhvdyBpT1MgMTQgVm9pY2VPdmVyIGludGVyYWN0cyB3aXRoIGVsZW1lbnRzIC0gZWxlbWVudHMgd2l0aFxyXG4gKiBhcmlhLWhhc3BvcHVwIG11c3QgYmUgcG9zaXRpb25lZCBpbiB0aGUgdmlld3BvcnQgdG8gcmVjZWl2ZSBwb2ludGVyIGFuZCBjbGlja1xyXG4gKiBldmVudHMuXHJcbiAqXHJcbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvc2NlbmVyeS9pc3N1ZXMvMTA5NCBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cclxuICpcclxuICogQGF1dGhvciBKZXNzZSBHcmVlbmJlcmdcclxuICovXHJcbmltcG9ydCB7IE5vZGUsIHNjZW5lcnkgfSBmcm9tICcuLi8uLi9pbXBvcnRzLmpzJztcclxuXHJcbmNvbnN0IEFyaWFIYXNQb3BVcE11dGF0b3IgPSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSBub2RlIC0gTm9kZSB3aG9zZSBQYXJhbGxlbERPTS5qcyBmaWVsZHMgd2lsbCBjaGFuZ2VcclxuICAgKiBAcGFyYW0gdmFsdWUgLSBWYWxpZCB2YWx1ZSBmb3IgYXJpYS1oYXNwb3B1cCBhdHRyaWJ1dGUsIG9yIGZhbHNlIHRvIHJlbW92ZSB0aGUgYXR0cmlidXRlXHJcbiAgICovXHJcbiAgbXV0YXRlTm9kZSggbm9kZTogTm9kZSwgdmFsdWU6IGJvb2xlYW4gfCBzdHJpbmcgKTogdm9pZCB7XHJcbiAgICBpZiAoIHZhbHVlICkge1xyXG4gICAgICBub2RlLnNldFBET01BdHRyaWJ1dGUoICdhcmlhLWhhc3BvcHVwJywgdmFsdWUgKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBub2RlLmhhc1BET01BdHRyaWJ1dGUoICdhcmlhLWhhc3BvcHVwJyApLCAnU2V0IGFyaWEtaGFzcG9wdXAgb25jZSBiZWZvcmUgcmVtb3ZpbmcgaXQuJyApO1xyXG4gICAgICBub2RlLnJlbW92ZVBET01BdHRyaWJ1dGUoICdhcmlhLWhhc3BvcHVwJyApO1xyXG4gICAgfVxyXG5cclxuICAgIG5vZGUucG9zaXRpb25JblBET00gPSAhIXZhbHVlO1xyXG4gIH1cclxufTtcclxuXHJcbnNjZW5lcnkucmVnaXN0ZXIoICdBcmlhSGFzUG9wVXBNdXRhdG9yJywgQXJpYUhhc1BvcFVwTXV0YXRvciApO1xyXG5leHBvcnQgZGVmYXVsdCBBcmlhSGFzUG9wVXBNdXRhdG9yOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFlQSxPQUFPLFFBQVEsa0JBQWtCO0FBRWhELE1BQU1DLG1CQUFtQixHQUFHO0VBRTFCO0FBQ0Y7QUFDQTtBQUNBO0VBQ0VDLFVBQVVBLENBQUVDLElBQVUsRUFBRUMsS0FBdUIsRUFBUztJQUN0RCxJQUFLQSxLQUFLLEVBQUc7TUFDWEQsSUFBSSxDQUFDRSxnQkFBZ0IsQ0FBRSxlQUFlLEVBQUVELEtBQU0sQ0FBQztJQUNqRCxDQUFDLE1BQ0k7TUFDSEUsTUFBTSxJQUFJQSxNQUFNLENBQUVILElBQUksQ0FBQ0ksZ0JBQWdCLENBQUUsZUFBZ0IsQ0FBQyxFQUFFLDRDQUE2QyxDQUFDO01BQzFHSixJQUFJLENBQUNLLG1CQUFtQixDQUFFLGVBQWdCLENBQUM7SUFDN0M7SUFFQUwsSUFBSSxDQUFDTSxjQUFjLEdBQUcsQ0FBQyxDQUFDTCxLQUFLO0VBQy9CO0FBQ0YsQ0FBQztBQUVESixPQUFPLENBQUNVLFFBQVEsQ0FBRSxxQkFBcUIsRUFBRVQsbUJBQW9CLENBQUM7QUFDOUQsZUFBZUEsbUJBQW1CIn0=