// Copyright 2019-2022, University of Colorado Boulder

/**
 * Tests for styling accessibility siblings. Siblings should be positioned on top of other elements in the PDOM.
 *
 * @author Jesse Greenberg (PhET Interactive Simulations)
 */

import Bounds2 from '../../../../dot/js/Bounds2.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import Display from '../../display/Display.js';
import Node from '../../nodes/Node.js';
import Rectangle from '../../nodes/Rectangle.js';
import PDOMPeer from './PDOMPeer.js';

// constants
const PIXEL_PADDING = 3;
QUnit.module('PDOMSiblingTests');

/**
 * Gets the bounds of the DOMElement in the viewport in global coordinates.
 * @param {Node} node
 * @returns {Bounds2}
 */
const getSiblingBounds = node => {
  const siblingRect = node.pdomInstances[0].peer.primarySibling.getBoundingClientRect();
  return new Bounds2(siblingRect.x, siblingRect.y, siblingRect.x + siblingRect.width, siblingRect.y + siblingRect.height);
};

/**
 * Returns true if the node's first accessible peer has a primary sibling with bounds thar are correctly positioned
 * in the viewport. Some padding is required for the HTML elements to have defined bounds, so we allow a few pixels
 * of error.
 * @param  {Node} node
 * @returns {boolean}
 */
const siblingBoundsCorrect = node => {
  // if a pdomTransformSourceNode is specified, the sibling should overlap this node's bounds instead of its own
  // bounds
  const transformSourceNode = node.pdomTransformSourceNode;
  const sourceNodeBounds = transformSourceNode ? transformSourceNode.globalBounds : node.globalBounds;
  const siblingBounds = getSiblingBounds(node);
  const comparedBounds = node.positionInPDOM ? sourceNodeBounds : PDOMPeer.OFFSCREEN_SIBLING_BOUNDS;
  return siblingBounds.equalsEpsilon(comparedBounds, PIXEL_PADDING);
};

// tests
QUnit.test('sibling positioning', assert => {
  const rootNode = new Node({
    tagName: 'div'
  });
  const display = new Display(rootNode);
  document.body.appendChild(display.domElement);

  // test bounds are set for basic input elements
  const buttonElement = new Rectangle(5, 5, 5, 5, {
    tagName: 'button'
  });
  const divElement = new Rectangle(0, 0, 20, 20, {
    tagName: 'div',
    focusable: true
  });
  const inputElement = new Rectangle(10, 3, 25, 5, {
    tagName: 'input',
    inputType: 'range'
  });
  rootNode.addChild(buttonElement);
  rootNode.addChild(divElement);
  rootNode.addChild(inputElement);

  // udpdate so the display to position elements
  display.updateDisplay();
  assert.ok(siblingBoundsCorrect(buttonElement), 'button element child of root correctly positioned');
  assert.ok(siblingBoundsCorrect(divElement), 'div element child of root correctly positioned');
  assert.ok(siblingBoundsCorrect(inputElement), 'input element child of root correctly positioned');

  // test that bounds are set correctly once we have a hierarchy and add transformations
  rootNode.removeChild(buttonElement);
  rootNode.removeChild(divElement);
  rootNode.removeChild(inputElement);
  rootNode.addChild(divElement);
  divElement.addChild(buttonElement);
  buttonElement.addChild(inputElement);

  // arbitrary transformations down the tree (should be propagated to input element)
  divElement.setCenter(new Vector2(50, 50));
  buttonElement.setScaleMagnitude(0.89);
  inputElement.setRotation(Math.PI / 4);

  // udpdate so the display to position elements
  display.updateDisplay();
  assert.ok(siblingBoundsCorrect(buttonElement), 'button element descendant correctly positioned');
  assert.ok(siblingBoundsCorrect(inputElement), 'input element descendant correctly positioned');

  // when inner content of an element changes, its client bounds change - make sure that the element still matches
  // the Node
  buttonElement.innerHTML = 'Some Test';
  display.updateDisplay();
  assert.ok(siblingBoundsCorrect(buttonElement), 'button element descendant correclty positioned after inner content changed');

  // remove the display element so it doesn't interfere with qunit API
  document.body.removeChild(display.domElement);
  display.dispose();
});
QUnit.test('PDOM transform source Node', assert => {
  const rootNode = new Node({
    tagName: 'div'
  });
  const display = new Display(rootNode);
  document.body.appendChild(display.domElement);
  const buttonNode = new Rectangle(5, 5, 5, 5, {
    tagName: 'button',
    positionInPDOM: true
  });
  const transformSourceNode = new Rectangle(0, 0, 25, 25);
  rootNode.addChild(buttonNode);
  rootNode.addChild(transformSourceNode);

  // update the display to position elements
  display.updateDisplay();
  assert.ok(siblingBoundsCorrect(buttonNode), 'button element child of root correctly positioned');
  const siblingBoundsBefore = getSiblingBounds(buttonNode);

  // test setting transform source Node
  buttonNode.pdomTransformSourceNode = transformSourceNode;

  // update the display to position elements
  display.updateDisplay();
  assert.ok(siblingBoundsCorrect(buttonNode), 'button element transformed with transform source Node');
  assert.ok(!siblingBoundsBefore.equals(getSiblingBounds(buttonNode)), 'sibling bounds should have changed after setting transform source');

  // reposition the buttonNode - pdom sibling should NOT reposition
  const siblingBoundsBeforeNodeReposition = getSiblingBounds(buttonNode);
  buttonNode.setX(100);
  buttonNode.setY(100);
  display.updateDisplay();
  assert.ok(siblingBoundsCorrect(buttonNode), 'sibling bounds correct after node repositioned');
  assert.ok(siblingBoundsBeforeNodeReposition.equals(getSiblingBounds(buttonNode)), 'transform source didnt change, primary sibling should not reposition');

  // reposition the transform source - pdom sibling SHOULD reposition
  const siblingBoundsBeforeSourceReposition = getSiblingBounds(buttonNode);
  transformSourceNode.setX(50);
  transformSourceNode.setX(50);
  display.updateDisplay();
  assert.ok(siblingBoundsCorrect(buttonNode), 'sibling bounds correct after source node repositioned');
  assert.ok(!siblingBoundsBeforeSourceReposition.equals(getSiblingBounds(buttonNode)), 'transform source didnt change, primary sibling should not reposition');

  // remove the display element so it doesn't interfere with qunit API
  document.body.removeChild(display.domElement);
  display.dispose();
});
QUnit.test('setPositionElements test', assert => {
  const rootNode = new Node({
    tagName: 'div'
  });
  const display = new Display(rootNode);
  document.body.appendChild(display.domElement);
  const buttonNode = new Rectangle(5, 5, 5, 5, {
    tagName: 'button',
    positionInPDOM: true
  });
  rootNode.addChild(buttonNode);
  display.updateDisplay();
  assert.ok(siblingBoundsCorrect(buttonNode), 'sibling bounds initially correct');
  buttonNode.setPositionInPDOM(false);
  display.updateDisplay();
  assert.ok(siblingBoundsCorrect(buttonNode), 'sibling bounds correct after positionInPDOM false');
  buttonNode.setPositionInPDOM(true);
  display.updateDisplay();
  assert.ok(siblingBoundsCorrect(buttonNode), 'sibling bounds repositioned after positionInPDOM true');

  // remove the display element so it doesn't interfere with qunit API
  document.body.removeChild(display.domElement);
  display.dispose();
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb3VuZHMyIiwiVmVjdG9yMiIsIkRpc3BsYXkiLCJOb2RlIiwiUmVjdGFuZ2xlIiwiUERPTVBlZXIiLCJQSVhFTF9QQURESU5HIiwiUVVuaXQiLCJtb2R1bGUiLCJnZXRTaWJsaW5nQm91bmRzIiwibm9kZSIsInNpYmxpbmdSZWN0IiwicGRvbUluc3RhbmNlcyIsInBlZXIiLCJwcmltYXJ5U2libGluZyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIngiLCJ5Iiwid2lkdGgiLCJoZWlnaHQiLCJzaWJsaW5nQm91bmRzQ29ycmVjdCIsInRyYW5zZm9ybVNvdXJjZU5vZGUiLCJwZG9tVHJhbnNmb3JtU291cmNlTm9kZSIsInNvdXJjZU5vZGVCb3VuZHMiLCJnbG9iYWxCb3VuZHMiLCJzaWJsaW5nQm91bmRzIiwiY29tcGFyZWRCb3VuZHMiLCJwb3NpdGlvbkluUERPTSIsIk9GRlNDUkVFTl9TSUJMSU5HX0JPVU5EUyIsImVxdWFsc0Vwc2lsb24iLCJ0ZXN0IiwiYXNzZXJ0Iiwicm9vdE5vZGUiLCJ0YWdOYW1lIiwiZGlzcGxheSIsImRvY3VtZW50IiwiYm9keSIsImFwcGVuZENoaWxkIiwiZG9tRWxlbWVudCIsImJ1dHRvbkVsZW1lbnQiLCJkaXZFbGVtZW50IiwiZm9jdXNhYmxlIiwiaW5wdXRFbGVtZW50IiwiaW5wdXRUeXBlIiwiYWRkQ2hpbGQiLCJ1cGRhdGVEaXNwbGF5Iiwib2siLCJyZW1vdmVDaGlsZCIsInNldENlbnRlciIsInNldFNjYWxlTWFnbml0dWRlIiwic2V0Um90YXRpb24iLCJNYXRoIiwiUEkiLCJpbm5lckhUTUwiLCJkaXNwb3NlIiwiYnV0dG9uTm9kZSIsInNpYmxpbmdCb3VuZHNCZWZvcmUiLCJlcXVhbHMiLCJzaWJsaW5nQm91bmRzQmVmb3JlTm9kZVJlcG9zaXRpb24iLCJzZXRYIiwic2V0WSIsInNpYmxpbmdCb3VuZHNCZWZvcmVTb3VyY2VSZXBvc2l0aW9uIiwic2V0UG9zaXRpb25JblBET00iXSwic291cmNlcyI6WyJQRE9NU2libGluZ1Rlc3RzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE5LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFRlc3RzIGZvciBzdHlsaW5nIGFjY2Vzc2liaWxpdHkgc2libGluZ3MuIFNpYmxpbmdzIHNob3VsZCBiZSBwb3NpdGlvbmVkIG9uIHRvcCBvZiBvdGhlciBlbGVtZW50cyBpbiB0aGUgUERPTS5cclxuICpcclxuICogQGF1dGhvciBKZXNzZSBHcmVlbmJlcmcgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IEJvdW5kczIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL0JvdW5kczIuanMnO1xyXG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVmVjdG9yMi5qcyc7XHJcbmltcG9ydCBEaXNwbGF5IGZyb20gJy4uLy4uL2Rpc3BsYXkvRGlzcGxheS5qcyc7XHJcbmltcG9ydCBOb2RlIGZyb20gJy4uLy4uL25vZGVzL05vZGUuanMnO1xyXG5pbXBvcnQgUmVjdGFuZ2xlIGZyb20gJy4uLy4uL25vZGVzL1JlY3RhbmdsZS5qcyc7XHJcbmltcG9ydCBQRE9NUGVlciBmcm9tICcuL1BET01QZWVyLmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBQSVhFTF9QQURESU5HID0gMztcclxuXHJcblFVbml0Lm1vZHVsZSggJ1BET01TaWJsaW5nVGVzdHMnICk7XHJcblxyXG4vKipcclxuICogR2V0cyB0aGUgYm91bmRzIG9mIHRoZSBET01FbGVtZW50IGluIHRoZSB2aWV3cG9ydCBpbiBnbG9iYWwgY29vcmRpbmF0ZXMuXHJcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxyXG4gKiBAcmV0dXJucyB7Qm91bmRzMn1cclxuICovXHJcbmNvbnN0IGdldFNpYmxpbmdCb3VuZHMgPSBub2RlID0+IHtcclxuICBjb25zdCBzaWJsaW5nUmVjdCA9IG5vZGUucGRvbUluc3RhbmNlc1sgMCBdLnBlZXIucHJpbWFyeVNpYmxpbmcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgcmV0dXJuIG5ldyBCb3VuZHMyKCBzaWJsaW5nUmVjdC54LCBzaWJsaW5nUmVjdC55LCBzaWJsaW5nUmVjdC54ICsgc2libGluZ1JlY3Qud2lkdGgsIHNpYmxpbmdSZWN0LnkgKyBzaWJsaW5nUmVjdC5oZWlnaHQgKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIG5vZGUncyBmaXJzdCBhY2Nlc3NpYmxlIHBlZXIgaGFzIGEgcHJpbWFyeSBzaWJsaW5nIHdpdGggYm91bmRzIHRoYXIgYXJlIGNvcnJlY3RseSBwb3NpdGlvbmVkXHJcbiAqIGluIHRoZSB2aWV3cG9ydC4gU29tZSBwYWRkaW5nIGlzIHJlcXVpcmVkIGZvciB0aGUgSFRNTCBlbGVtZW50cyB0byBoYXZlIGRlZmluZWQgYm91bmRzLCBzbyB3ZSBhbGxvdyBhIGZldyBwaXhlbHNcclxuICogb2YgZXJyb3IuXHJcbiAqIEBwYXJhbSAge05vZGV9IG5vZGVcclxuICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAqL1xyXG5jb25zdCBzaWJsaW5nQm91bmRzQ29ycmVjdCA9IG5vZGUgPT4ge1xyXG5cclxuICAvLyBpZiBhIHBkb21UcmFuc2Zvcm1Tb3VyY2VOb2RlIGlzIHNwZWNpZmllZCwgdGhlIHNpYmxpbmcgc2hvdWxkIG92ZXJsYXAgdGhpcyBub2RlJ3MgYm91bmRzIGluc3RlYWQgb2YgaXRzIG93blxyXG4gIC8vIGJvdW5kc1xyXG4gIGNvbnN0IHRyYW5zZm9ybVNvdXJjZU5vZGUgPSBub2RlLnBkb21UcmFuc2Zvcm1Tb3VyY2VOb2RlO1xyXG4gIGNvbnN0IHNvdXJjZU5vZGVCb3VuZHMgPSB0cmFuc2Zvcm1Tb3VyY2VOb2RlID8gdHJhbnNmb3JtU291cmNlTm9kZS5nbG9iYWxCb3VuZHMgOiBub2RlLmdsb2JhbEJvdW5kcztcclxuXHJcbiAgY29uc3Qgc2libGluZ0JvdW5kcyA9IGdldFNpYmxpbmdCb3VuZHMoIG5vZGUgKTtcclxuICBjb25zdCBjb21wYXJlZEJvdW5kcyA9IG5vZGUucG9zaXRpb25JblBET00gPyBzb3VyY2VOb2RlQm91bmRzIDogUERPTVBlZXIuT0ZGU0NSRUVOX1NJQkxJTkdfQk9VTkRTO1xyXG4gIHJldHVybiBzaWJsaW5nQm91bmRzLmVxdWFsc0Vwc2lsb24oIGNvbXBhcmVkQm91bmRzLCBQSVhFTF9QQURESU5HICk7XHJcbn07XHJcblxyXG4vLyB0ZXN0c1xyXG5RVW5pdC50ZXN0KCAnc2libGluZyBwb3NpdGlvbmluZycsIGFzc2VydCA9PiB7XHJcblxyXG4gIGNvbnN0IHJvb3ROb2RlID0gbmV3IE5vZGUoIHsgdGFnTmFtZTogJ2RpdicgfSApO1xyXG4gIGNvbnN0IGRpc3BsYXkgPSBuZXcgRGlzcGxheSggcm9vdE5vZGUgKTtcclxuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCBkaXNwbGF5LmRvbUVsZW1lbnQgKTtcclxuXHJcbiAgLy8gdGVzdCBib3VuZHMgYXJlIHNldCBmb3IgYmFzaWMgaW5wdXQgZWxlbWVudHNcclxuICBjb25zdCBidXR0b25FbGVtZW50ID0gbmV3IFJlY3RhbmdsZSggNSwgNSwgNSwgNSwgeyB0YWdOYW1lOiAnYnV0dG9uJyB9ICk7XHJcbiAgY29uc3QgZGl2RWxlbWVudCA9IG5ldyBSZWN0YW5nbGUoIDAsIDAsIDIwLCAyMCwgeyB0YWdOYW1lOiAnZGl2JywgZm9jdXNhYmxlOiB0cnVlIH0gKTtcclxuICBjb25zdCBpbnB1dEVsZW1lbnQgPSBuZXcgUmVjdGFuZ2xlKCAxMCwgMywgMjUsIDUsIHsgdGFnTmFtZTogJ2lucHV0JywgaW5wdXRUeXBlOiAncmFuZ2UnIH0gKTtcclxuXHJcbiAgcm9vdE5vZGUuYWRkQ2hpbGQoIGJ1dHRvbkVsZW1lbnQgKTtcclxuICByb290Tm9kZS5hZGRDaGlsZCggZGl2RWxlbWVudCApO1xyXG4gIHJvb3ROb2RlLmFkZENoaWxkKCBpbnB1dEVsZW1lbnQgKTtcclxuXHJcbiAgLy8gdWRwZGF0ZSBzbyB0aGUgZGlzcGxheSB0byBwb3NpdGlvbiBlbGVtZW50c1xyXG4gIGRpc3BsYXkudXBkYXRlRGlzcGxheSgpO1xyXG5cclxuICBhc3NlcnQub2soIHNpYmxpbmdCb3VuZHNDb3JyZWN0KCBidXR0b25FbGVtZW50ICksICdidXR0b24gZWxlbWVudCBjaGlsZCBvZiByb290IGNvcnJlY3RseSBwb3NpdGlvbmVkJyApO1xyXG4gIGFzc2VydC5vayggc2libGluZ0JvdW5kc0NvcnJlY3QoIGRpdkVsZW1lbnQgKSwgJ2RpdiBlbGVtZW50IGNoaWxkIG9mIHJvb3QgY29ycmVjdGx5IHBvc2l0aW9uZWQnICk7XHJcbiAgYXNzZXJ0Lm9rKCBzaWJsaW5nQm91bmRzQ29ycmVjdCggaW5wdXRFbGVtZW50ICksICdpbnB1dCBlbGVtZW50IGNoaWxkIG9mIHJvb3QgY29ycmVjdGx5IHBvc2l0aW9uZWQnICk7XHJcblxyXG4gIC8vIHRlc3QgdGhhdCBib3VuZHMgYXJlIHNldCBjb3JyZWN0bHkgb25jZSB3ZSBoYXZlIGEgaGllcmFyY2h5IGFuZCBhZGQgdHJhbnNmb3JtYXRpb25zXHJcbiAgcm9vdE5vZGUucmVtb3ZlQ2hpbGQoIGJ1dHRvbkVsZW1lbnQgKTtcclxuICByb290Tm9kZS5yZW1vdmVDaGlsZCggZGl2RWxlbWVudCApO1xyXG4gIHJvb3ROb2RlLnJlbW92ZUNoaWxkKCBpbnB1dEVsZW1lbnQgKTtcclxuXHJcbiAgcm9vdE5vZGUuYWRkQ2hpbGQoIGRpdkVsZW1lbnQgKTtcclxuICBkaXZFbGVtZW50LmFkZENoaWxkKCBidXR0b25FbGVtZW50ICk7XHJcbiAgYnV0dG9uRWxlbWVudC5hZGRDaGlsZCggaW5wdXRFbGVtZW50ICk7XHJcblxyXG4gIC8vIGFyYml0cmFyeSB0cmFuc2Zvcm1hdGlvbnMgZG93biB0aGUgdHJlZSAoc2hvdWxkIGJlIHByb3BhZ2F0ZWQgdG8gaW5wdXQgZWxlbWVudClcclxuICBkaXZFbGVtZW50LnNldENlbnRlciggbmV3IFZlY3RvcjIoIDUwLCA1MCApICk7XHJcbiAgYnV0dG9uRWxlbWVudC5zZXRTY2FsZU1hZ25pdHVkZSggMC44OSApO1xyXG4gIGlucHV0RWxlbWVudC5zZXRSb3RhdGlvbiggTWF0aC5QSSAvIDQgKTtcclxuXHJcbiAgLy8gdWRwZGF0ZSBzbyB0aGUgZGlzcGxheSB0byBwb3NpdGlvbiBlbGVtZW50c1xyXG4gIGRpc3BsYXkudXBkYXRlRGlzcGxheSgpO1xyXG4gIGFzc2VydC5vayggc2libGluZ0JvdW5kc0NvcnJlY3QoIGJ1dHRvbkVsZW1lbnQgKSwgJ2J1dHRvbiBlbGVtZW50IGRlc2NlbmRhbnQgY29ycmVjdGx5IHBvc2l0aW9uZWQnICk7XHJcbiAgYXNzZXJ0Lm9rKCBzaWJsaW5nQm91bmRzQ29ycmVjdCggaW5wdXRFbGVtZW50ICksICdpbnB1dCBlbGVtZW50IGRlc2NlbmRhbnQgY29ycmVjdGx5IHBvc2l0aW9uZWQnICk7XHJcblxyXG4gIC8vIHdoZW4gaW5uZXIgY29udGVudCBvZiBhbiBlbGVtZW50IGNoYW5nZXMsIGl0cyBjbGllbnQgYm91bmRzIGNoYW5nZSAtIG1ha2Ugc3VyZSB0aGF0IHRoZSBlbGVtZW50IHN0aWxsIG1hdGNoZXNcclxuICAvLyB0aGUgTm9kZVxyXG4gIGJ1dHRvbkVsZW1lbnQuaW5uZXJIVE1MID0gJ1NvbWUgVGVzdCc7XHJcbiAgZGlzcGxheS51cGRhdGVEaXNwbGF5KCk7XHJcbiAgYXNzZXJ0Lm9rKCBzaWJsaW5nQm91bmRzQ29ycmVjdCggYnV0dG9uRWxlbWVudCApLCAnYnV0dG9uIGVsZW1lbnQgZGVzY2VuZGFudCBjb3JyZWNsdHkgcG9zaXRpb25lZCBhZnRlciBpbm5lciBjb250ZW50IGNoYW5nZWQnICk7XHJcblxyXG4gIC8vIHJlbW92ZSB0aGUgZGlzcGxheSBlbGVtZW50IHNvIGl0IGRvZXNuJ3QgaW50ZXJmZXJlIHdpdGggcXVuaXQgQVBJXHJcbiAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCggZGlzcGxheS5kb21FbGVtZW50ICk7XHJcbiAgZGlzcGxheS5kaXNwb3NlKCk7XHJcblxyXG59ICk7XHJcblxyXG5RVW5pdC50ZXN0KCAnUERPTSB0cmFuc2Zvcm0gc291cmNlIE5vZGUnLCBhc3NlcnQgPT4ge1xyXG4gIGNvbnN0IHJvb3ROb2RlID0gbmV3IE5vZGUoIHsgdGFnTmFtZTogJ2RpdicgfSApO1xyXG4gIGNvbnN0IGRpc3BsYXkgPSBuZXcgRGlzcGxheSggcm9vdE5vZGUgKTtcclxuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCBkaXNwbGF5LmRvbUVsZW1lbnQgKTtcclxuXHJcbiAgY29uc3QgYnV0dG9uTm9kZSA9IG5ldyBSZWN0YW5nbGUoIDUsIDUsIDUsIDUsIHsgdGFnTmFtZTogJ2J1dHRvbicsIHBvc2l0aW9uSW5QRE9NOiB0cnVlIH0gKTtcclxuICBjb25zdCB0cmFuc2Zvcm1Tb3VyY2VOb2RlID0gbmV3IFJlY3RhbmdsZSggMCwgMCwgMjUsIDI1ICk7XHJcblxyXG4gIHJvb3ROb2RlLmFkZENoaWxkKCBidXR0b25Ob2RlICk7XHJcbiAgcm9vdE5vZGUuYWRkQ2hpbGQoIHRyYW5zZm9ybVNvdXJjZU5vZGUgKTtcclxuXHJcbiAgLy8gdXBkYXRlIHRoZSBkaXNwbGF5IHRvIHBvc2l0aW9uIGVsZW1lbnRzXHJcbiAgZGlzcGxheS51cGRhdGVEaXNwbGF5KCk7XHJcbiAgYXNzZXJ0Lm9rKCBzaWJsaW5nQm91bmRzQ29ycmVjdCggYnV0dG9uTm9kZSApLCAnYnV0dG9uIGVsZW1lbnQgY2hpbGQgb2Ygcm9vdCBjb3JyZWN0bHkgcG9zaXRpb25lZCcgKTtcclxuXHJcbiAgY29uc3Qgc2libGluZ0JvdW5kc0JlZm9yZSA9IGdldFNpYmxpbmdCb3VuZHMoIGJ1dHRvbk5vZGUgKTtcclxuXHJcbiAgLy8gdGVzdCBzZXR0aW5nIHRyYW5zZm9ybSBzb3VyY2UgTm9kZVxyXG4gIGJ1dHRvbk5vZGUucGRvbVRyYW5zZm9ybVNvdXJjZU5vZGUgPSB0cmFuc2Zvcm1Tb3VyY2VOb2RlO1xyXG5cclxuICAvLyB1cGRhdGUgdGhlIGRpc3BsYXkgdG8gcG9zaXRpb24gZWxlbWVudHNcclxuICBkaXNwbGF5LnVwZGF0ZURpc3BsYXkoKTtcclxuXHJcbiAgYXNzZXJ0Lm9rKCBzaWJsaW5nQm91bmRzQ29ycmVjdCggYnV0dG9uTm9kZSApLCAnYnV0dG9uIGVsZW1lbnQgdHJhbnNmb3JtZWQgd2l0aCB0cmFuc2Zvcm0gc291cmNlIE5vZGUnICk7XHJcbiAgYXNzZXJ0Lm9rKCAhc2libGluZ0JvdW5kc0JlZm9yZS5lcXVhbHMoIGdldFNpYmxpbmdCb3VuZHMoIGJ1dHRvbk5vZGUgKSApLCAnc2libGluZyBib3VuZHMgc2hvdWxkIGhhdmUgY2hhbmdlZCBhZnRlciBzZXR0aW5nIHRyYW5zZm9ybSBzb3VyY2UnICk7XHJcblxyXG4gIC8vIHJlcG9zaXRpb24gdGhlIGJ1dHRvbk5vZGUgLSBwZG9tIHNpYmxpbmcgc2hvdWxkIE5PVCByZXBvc2l0aW9uXHJcbiAgY29uc3Qgc2libGluZ0JvdW5kc0JlZm9yZU5vZGVSZXBvc2l0aW9uID0gZ2V0U2libGluZ0JvdW5kcyggYnV0dG9uTm9kZSApO1xyXG4gIGJ1dHRvbk5vZGUuc2V0WCggMTAwICk7XHJcbiAgYnV0dG9uTm9kZS5zZXRZKCAxMDAgKTtcclxuICBkaXNwbGF5LnVwZGF0ZURpc3BsYXkoKTtcclxuICBhc3NlcnQub2soIHNpYmxpbmdCb3VuZHNDb3JyZWN0KCBidXR0b25Ob2RlICksICdzaWJsaW5nIGJvdW5kcyBjb3JyZWN0IGFmdGVyIG5vZGUgcmVwb3NpdGlvbmVkJyApO1xyXG4gIGFzc2VydC5vayggc2libGluZ0JvdW5kc0JlZm9yZU5vZGVSZXBvc2l0aW9uLmVxdWFscyggZ2V0U2libGluZ0JvdW5kcyggYnV0dG9uTm9kZSApICksICd0cmFuc2Zvcm0gc291cmNlIGRpZG50IGNoYW5nZSwgcHJpbWFyeSBzaWJsaW5nIHNob3VsZCBub3QgcmVwb3NpdGlvbicgKTtcclxuXHJcbiAgLy8gcmVwb3NpdGlvbiB0aGUgdHJhbnNmb3JtIHNvdXJjZSAtIHBkb20gc2libGluZyBTSE9VTEQgcmVwb3NpdGlvblxyXG4gIGNvbnN0IHNpYmxpbmdCb3VuZHNCZWZvcmVTb3VyY2VSZXBvc2l0aW9uID0gZ2V0U2libGluZ0JvdW5kcyggYnV0dG9uTm9kZSApO1xyXG4gIHRyYW5zZm9ybVNvdXJjZU5vZGUuc2V0WCggNTAgKTtcclxuICB0cmFuc2Zvcm1Tb3VyY2VOb2RlLnNldFgoIDUwICk7XHJcbiAgZGlzcGxheS51cGRhdGVEaXNwbGF5KCk7XHJcbiAgYXNzZXJ0Lm9rKCBzaWJsaW5nQm91bmRzQ29ycmVjdCggYnV0dG9uTm9kZSApLCAnc2libGluZyBib3VuZHMgY29ycmVjdCBhZnRlciBzb3VyY2Ugbm9kZSByZXBvc2l0aW9uZWQnICk7XHJcbiAgYXNzZXJ0Lm9rKCAhc2libGluZ0JvdW5kc0JlZm9yZVNvdXJjZVJlcG9zaXRpb24uZXF1YWxzKCBnZXRTaWJsaW5nQm91bmRzKCBidXR0b25Ob2RlICkgKSwgJ3RyYW5zZm9ybSBzb3VyY2UgZGlkbnQgY2hhbmdlLCBwcmltYXJ5IHNpYmxpbmcgc2hvdWxkIG5vdCByZXBvc2l0aW9uJyApO1xyXG5cclxuICAvLyByZW1vdmUgdGhlIGRpc3BsYXkgZWxlbWVudCBzbyBpdCBkb2Vzbid0IGludGVyZmVyZSB3aXRoIHF1bml0IEFQSVxyXG4gIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoIGRpc3BsYXkuZG9tRWxlbWVudCApO1xyXG4gIGRpc3BsYXkuZGlzcG9zZSgpO1xyXG5cclxufSApO1xyXG5cclxuUVVuaXQudGVzdCggJ3NldFBvc2l0aW9uRWxlbWVudHMgdGVzdCcsIGFzc2VydCA9PiB7XHJcbiAgY29uc3Qgcm9vdE5vZGUgPSBuZXcgTm9kZSggeyB0YWdOYW1lOiAnZGl2JyB9ICk7XHJcbiAgY29uc3QgZGlzcGxheSA9IG5ldyBEaXNwbGF5KCByb290Tm9kZSApO1xyXG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoIGRpc3BsYXkuZG9tRWxlbWVudCApO1xyXG5cclxuICBjb25zdCBidXR0b25Ob2RlID0gbmV3IFJlY3RhbmdsZSggNSwgNSwgNSwgNSwgeyB0YWdOYW1lOiAnYnV0dG9uJywgcG9zaXRpb25JblBET006IHRydWUgfSApO1xyXG4gIHJvb3ROb2RlLmFkZENoaWxkKCBidXR0b25Ob2RlICk7XHJcblxyXG4gIGRpc3BsYXkudXBkYXRlRGlzcGxheSgpO1xyXG4gIGFzc2VydC5vayggc2libGluZ0JvdW5kc0NvcnJlY3QoIGJ1dHRvbk5vZGUgKSwgJ3NpYmxpbmcgYm91bmRzIGluaXRpYWxseSBjb3JyZWN0JyApO1xyXG5cclxuICBidXR0b25Ob2RlLnNldFBvc2l0aW9uSW5QRE9NKCBmYWxzZSApO1xyXG4gIGRpc3BsYXkudXBkYXRlRGlzcGxheSgpO1xyXG4gIGFzc2VydC5vayggc2libGluZ0JvdW5kc0NvcnJlY3QoIGJ1dHRvbk5vZGUgKSwgJ3NpYmxpbmcgYm91bmRzIGNvcnJlY3QgYWZ0ZXIgcG9zaXRpb25JblBET00gZmFsc2UnICk7XHJcblxyXG4gIGJ1dHRvbk5vZGUuc2V0UG9zaXRpb25JblBET00oIHRydWUgKTtcclxuICBkaXNwbGF5LnVwZGF0ZURpc3BsYXkoKTtcclxuICBhc3NlcnQub2soIHNpYmxpbmdCb3VuZHNDb3JyZWN0KCBidXR0b25Ob2RlICksICdzaWJsaW5nIGJvdW5kcyByZXBvc2l0aW9uZWQgYWZ0ZXIgcG9zaXRpb25JblBET00gdHJ1ZScgKTtcclxuXHJcbiAgLy8gcmVtb3ZlIHRoZSBkaXNwbGF5IGVsZW1lbnQgc28gaXQgZG9lc24ndCBpbnRlcmZlcmUgd2l0aCBxdW5pdCBBUElcclxuICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKCBkaXNwbGF5LmRvbUVsZW1lbnQgKTtcclxuICBkaXNwbGF5LmRpc3Bvc2UoKTtcclxufSApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxPQUFPLE1BQU0sK0JBQStCO0FBQ25ELE9BQU9DLE9BQU8sTUFBTSwrQkFBK0I7QUFDbkQsT0FBT0MsT0FBTyxNQUFNLDBCQUEwQjtBQUM5QyxPQUFPQyxJQUFJLE1BQU0scUJBQXFCO0FBQ3RDLE9BQU9DLFNBQVMsTUFB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