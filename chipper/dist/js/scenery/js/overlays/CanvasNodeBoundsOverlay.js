// Copyright 2013-2022, University of Colorado Boulder

/**
 * Displays CanvasNode bounds.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import { Shape } from '../../../kite/js/imports.js';
import { CanvasNode, scenery, ShapeBasedOverlay, Trail } from '../imports.js';
export default class CanvasNodeBoundsOverlay extends ShapeBasedOverlay {
  constructor(display, rootNode) {
    super(display, rootNode, 'canvasNodeBoundsOverlay');
  }
  addShapes() {
    new Trail(this.rootNode).eachTrailUnder(trail => {
      const node = trail.lastNode();
      if (!node.isVisible()) {
        // skip this subtree if the node is invisible
        return true;
      }
      if (node instanceof CanvasNode && trail.isVisible()) {
        const transform = trail.getTransform();
        this.addShape(transform.transformShape(Shape.bounds(node.selfBounds)), 'rgba(0,255,0,0.8)', true);
      }
      return false;
    });
  }
}
scenery.register('CanvasNodeBoundsOverlay', CanvasNodeBoundsOverlay);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTaGFwZSIsIkNhbnZhc05vZGUiLCJzY2VuZXJ5IiwiU2hhcGVCYXNlZE92ZXJsYXkiLCJUcmFpbCIsIkNhbnZhc05vZGVCb3VuZHNPdmVybGF5IiwiY29uc3RydWN0b3IiLCJkaXNwbGF5Iiwicm9vdE5vZGUiLCJhZGRTaGFwZXMiLCJlYWNoVHJhaWxVbmRlciIsInRyYWlsIiwibm9kZSIsImxhc3ROb2RlIiwiaXNWaXNpYmxlIiwidHJhbnNmb3JtIiwiZ2V0VHJhbnNmb3JtIiwiYWRkU2hhcGUiLCJ0cmFuc2Zvcm1TaGFwZSIsImJvdW5kcyIsInNlbGZCb3VuZHMiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkNhbnZhc05vZGVCb3VuZHNPdmVybGF5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIERpc3BsYXlzIENhbnZhc05vZGUgYm91bmRzLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgU2hhcGUgfSBmcm9tICcuLi8uLi8uLi9raXRlL2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgeyBDYW52YXNOb2RlLCBEaXNwbGF5LCBUT3ZlcmxheSwgTm9kZSwgc2NlbmVyeSwgU2hhcGVCYXNlZE92ZXJsYXksIFRyYWlsIH0gZnJvbSAnLi4vaW1wb3J0cy5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYW52YXNOb2RlQm91bmRzT3ZlcmxheSBleHRlbmRzIFNoYXBlQmFzZWRPdmVybGF5IGltcGxlbWVudHMgVE92ZXJsYXkge1xyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggZGlzcGxheTogRGlzcGxheSwgcm9vdE5vZGU6IE5vZGUgKSB7XHJcbiAgICBzdXBlciggZGlzcGxheSwgcm9vdE5vZGUsICdjYW52YXNOb2RlQm91bmRzT3ZlcmxheScgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhZGRTaGFwZXMoKTogdm9pZCB7XHJcbiAgICBuZXcgVHJhaWwoIHRoaXMucm9vdE5vZGUgKS5lYWNoVHJhaWxVbmRlciggdHJhaWwgPT4ge1xyXG4gICAgICBjb25zdCBub2RlID0gdHJhaWwubGFzdE5vZGUoKTtcclxuICAgICAgaWYgKCAhbm9kZS5pc1Zpc2libGUoKSApIHtcclxuICAgICAgICAvLyBza2lwIHRoaXMgc3VidHJlZSBpZiB0aGUgbm9kZSBpcyBpbnZpc2libGVcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoICggbm9kZSBpbnN0YW5jZW9mIENhbnZhc05vZGUgKSAmJiB0cmFpbC5pc1Zpc2libGUoKSApIHtcclxuICAgICAgICBjb25zdCB0cmFuc2Zvcm0gPSB0cmFpbC5nZXRUcmFuc2Zvcm0oKTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRTaGFwZSggdHJhbnNmb3JtLnRyYW5zZm9ybVNoYXBlKCBTaGFwZS5ib3VuZHMoIG5vZGUuc2VsZkJvdW5kcyApICksICdyZ2JhKDAsMjU1LDAsMC44KScsIHRydWUgKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9ICk7XHJcbiAgfVxyXG59XHJcblxyXG5zY2VuZXJ5LnJlZ2lzdGVyKCAnQ2FudmFzTm9kZUJvdW5kc092ZXJsYXknLCBDYW52YXNOb2RlQm91bmRzT3ZlcmxheSApO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBU0EsS0FBSyxRQUFRLDZCQUE2QjtBQUNuRCxTQUFTQyxVQUFVLEVBQTJCQyxPQUFPLEVBQUVDLGlCQUFpQixFQUFFQyxLQUFLLFFBQVEsZUFBZTtBQUV0RyxlQUFlLE1BQU1DLHVCQUF1QixTQUFTRixpQkFBaUIsQ0FBcUI7RUFDbEZHLFdBQVdBLENBQUVDLE9BQWdCLEVBQUVDLFFBQWMsRUFBRztJQUNyRCxLQUFLLENBQUVELE9BQU8sRUFBRUMsUUFBUSxFQUFFLHlCQUEwQixDQUFDO0VBQ3ZEO0VBRU9DLFNBQVNBLENBQUEsRUFBUztJQUN2QixJQUFJTCxLQUFLLENBQUUsSUFBSSxDQUFDSSxRQUFTLENBQUMsQ0FBQ0UsY0FBYyxDQUFFQyxLQUFLLElBQUk7TUFDbEQsTUFBTUMsSUFBSSxHQUFHRCxLQUFLLENBQUNFLFFBQVEsQ0FBQyxDQUFDO01BQzdCLElBQUssQ0FBQ0QsSUFBSSxDQUFDRSxTQUFTLENBQUMsQ0FBQyxFQUFHO1FBQ3ZCO1FBQ0EsT0FBTyxJQUFJO01BQ2I7TUFDQSxJQUFPRixJQUFJLFlBQVlYLFVBQVUsSUFBTVUsS0FBSyxDQUFDRyxTQUFTLENBQUMsQ0FBQyxFQUFHO1FBQ3pELE1BQU1DLFNBQVMsR0FBR0osS0FBSyxDQUFDSyxZQUFZLENBQUMsQ0FBQztRQUV0QyxJQUFJLENBQUNDLFFBQVEsQ0FBRUYsU0FBUyxDQUFDRyxjQUFjLENBQUVsQixLQUFLLENBQUNtQixNQUFNLENBQUVQLElBQUksQ0FBQ1EsVUFBVyxDQUFFLENBQUMsRUFBRSxtQkFBbUIsRUFBRSxJQUFLLENBQUM7TUFDekc7TUFDQSxPQUFPLEtBQUs7SUFDZCxDQUFFLENBQUM7RUFDTDtBQUNGO0FBRUFsQixPQUFPLENBQUNtQixRQUFRLENBQUUseUJBQXlCLEVBQUVoQix1QkFBd0IsQ0FBQyJ9