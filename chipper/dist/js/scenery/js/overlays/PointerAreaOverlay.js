// Copyright 2013-2022, University of Colorado Boulder

/**
 * Displays mouse and touch areas when they are customized. Expensive to display!
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import Bounds2 from '../../../dot/js/Bounds2.js';
import { Shape } from '../../../kite/js/imports.js';
import { scenery, ShapeBasedOverlay, Trail } from '../imports.js';
export default class PointerAreaOverlay extends ShapeBasedOverlay {
  constructor(display, rootNode) {
    super(display, rootNode, 'mouseTouchAreaOverlay');
  }
  addShapes() {
    new Trail(this.rootNode).eachTrailUnder(trail => {
      const node = trail.lastNode();
      if (!node.isVisible()) {
        // skip this subtree if the node is invisible
        return true;
      }
      if ((node.mouseArea || node.touchArea) && trail.isVisible()) {
        const transform = trail.getTransform();
        if (node.mouseArea) {
          this.addShape(transform.transformShape(node.mouseArea instanceof Bounds2 ? Shape.bounds(node.mouseArea) : node.mouseArea), 'rgba(0,0,255,0.8)', true);
        }
        if (node.touchArea) {
          this.addShape(transform.transformShape(node.touchArea instanceof Bounds2 ? Shape.bounds(node.touchArea) : node.touchArea), 'rgba(255,0,0,0.8)', false);
        }
      }
      return false;
    });
  }
}
scenery.register('PointerAreaOverlay', PointerAreaOverlay);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb3VuZHMyIiwiU2hhcGUiLCJzY2VuZXJ5IiwiU2hhcGVCYXNlZE92ZXJsYXkiLCJUcmFpbCIsIlBvaW50ZXJBcmVhT3ZlcmxheSIsImNvbnN0cnVjdG9yIiwiZGlzcGxheSIsInJvb3ROb2RlIiwiYWRkU2hhcGVzIiwiZWFjaFRyYWlsVW5kZXIiLCJ0cmFpbCIsIm5vZGUiLCJsYXN0Tm9kZSIsImlzVmlzaWJsZSIsIm1vdXNlQXJlYSIsInRvdWNoQXJlYSIsInRyYW5zZm9ybSIsImdldFRyYW5zZm9ybSIsImFkZFNoYXBlIiwidHJhbnNmb3JtU2hhcGUiLCJib3VuZHMiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlBvaW50ZXJBcmVhT3ZlcmxheS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxMy0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBEaXNwbGF5cyBtb3VzZSBhbmQgdG91Y2ggYXJlYXMgd2hlbiB0aGV5IGFyZSBjdXN0b21pemVkLiBFeHBlbnNpdmUgdG8gZGlzcGxheSFcclxuICpcclxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxyXG4gKi9cclxuXHJcbmltcG9ydCBCb3VuZHMyIGZyb20gJy4uLy4uLy4uL2RvdC9qcy9Cb3VuZHMyLmpzJztcclxuaW1wb3J0IHsgU2hhcGUgfSBmcm9tICcuLi8uLi8uLi9raXRlL2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgeyBEaXNwbGF5LCBUT3ZlcmxheSwgTm9kZSwgc2NlbmVyeSwgU2hhcGVCYXNlZE92ZXJsYXksIFRyYWlsIH0gZnJvbSAnLi4vaW1wb3J0cy5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb2ludGVyQXJlYU92ZXJsYXkgZXh0ZW5kcyBTaGFwZUJhc2VkT3ZlcmxheSBpbXBsZW1lbnRzIFRPdmVybGF5IHtcclxuICBwdWJsaWMgY29uc3RydWN0b3IoIGRpc3BsYXk6IERpc3BsYXksIHJvb3ROb2RlOiBOb2RlICkge1xyXG4gICAgc3VwZXIoIGRpc3BsYXksIHJvb3ROb2RlLCAnbW91c2VUb3VjaEFyZWFPdmVybGF5JyApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGFkZFNoYXBlcygpOiB2b2lkIHtcclxuICAgIG5ldyBUcmFpbCggdGhpcy5yb290Tm9kZSApLmVhY2hUcmFpbFVuZGVyKCB0cmFpbCA9PiB7XHJcbiAgICAgIGNvbnN0IG5vZGUgPSB0cmFpbC5sYXN0Tm9kZSgpO1xyXG4gICAgICBpZiAoICFub2RlLmlzVmlzaWJsZSgpICkge1xyXG4gICAgICAgIC8vIHNraXAgdGhpcyBzdWJ0cmVlIGlmIHRoZSBub2RlIGlzIGludmlzaWJsZVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICggKCBub2RlLm1vdXNlQXJlYSB8fCBub2RlLnRvdWNoQXJlYSApICYmIHRyYWlsLmlzVmlzaWJsZSgpICkge1xyXG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IHRyYWlsLmdldFRyYW5zZm9ybSgpO1xyXG5cclxuICAgICAgICBpZiAoIG5vZGUubW91c2VBcmVhICkge1xyXG4gICAgICAgICAgdGhpcy5hZGRTaGFwZSggdHJhbnNmb3JtLnRyYW5zZm9ybVNoYXBlKCBub2RlLm1vdXNlQXJlYSBpbnN0YW5jZW9mIEJvdW5kczIgPyBTaGFwZS5ib3VuZHMoIG5vZGUubW91c2VBcmVhICkgOiBub2RlLm1vdXNlQXJlYSApLCAncmdiYSgwLDAsMjU1LDAuOCknLCB0cnVlICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggbm9kZS50b3VjaEFyZWEgKSB7XHJcbiAgICAgICAgICB0aGlzLmFkZFNoYXBlKCB0cmFuc2Zvcm0udHJhbnNmb3JtU2hhcGUoIG5vZGUudG91Y2hBcmVhIGluc3RhbmNlb2YgQm91bmRzMiA/IFNoYXBlLmJvdW5kcyggbm9kZS50b3VjaEFyZWEgKSA6IG5vZGUudG91Y2hBcmVhICksICdyZ2JhKDI1NSwwLDAsMC44KScsIGZhbHNlICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0gKTtcclxuICB9XHJcbn1cclxuXHJcbnNjZW5lcnkucmVnaXN0ZXIoICdQb2ludGVyQXJlYU92ZXJsYXknLCBQb2ludGVyQXJlYU92ZXJsYXkgKTtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLE9BQU8sTUFBTSw0QkFBNEI7QUFDaEQsU0FBU0MsS0FBSyxRQUFRLDZCQUE2QjtBQUNuRCxTQUFrQ0MsT0FBTyxFQUFFQyxpQkFBaUIsRUFBRUMsS0FBSyxRQUFRLGVBQWU7QUFFMUYsZUFBZSxNQUFNQyxrQkFBa0IsU0FBU0YsaUJBQWlCLENBQXFCO0VBQzdFRyxXQUFXQSxDQUFFQyxPQUFnQixFQUFFQyxRQUFjLEVBQUc7SUFDckQsS0FBSyxDQUFFRCxPQUFPLEVBQUVDLFFBQVEsRUFBRSx1QkFBd0IsQ0FBQztFQUNyRDtFQUVPQyxTQUFTQSxDQUFBLEVBQVM7SUFDdkIsSUFBSUwsS0FBSyxDQUFFLElBQUksQ0FBQ0ksUUFBUyxDQUFDLENBQUNFLGNBQWMsQ0FBRUMsS0FBSyxJQUFJO01BQ2xELE1BQU1DLElBQUksR0FBR0QsS0FBSyxDQUFDRSxRQUFRLENBQUMsQ0FBQztNQUM3QixJQUFLLENBQUNELElBQUksQ0FBQ0UsU0FBUyxDQUFDLENBQUMsRUFBRztRQUN2QjtRQUNBLE9BQU8sSUFBSTtNQUNiO01BQ0EsSUFBSyxDQUFFRixJQUFJLENBQUNHLFNBQVMsSUFBSUgsSUFBSSxDQUFDSSxTQUFTLEtBQU1MLEtBQUssQ0FBQ0csU0FBUyxDQUFDLENBQUMsRUFBRztRQUMvRCxNQUFNRyxTQUFTLEdBQUdOLEtBQUssQ0FBQ08sWUFBWSxDQUFDLENBQUM7UUFFdEMsSUFBS04sSUFBSSxDQUFDRyxTQUFTLEVBQUc7VUFDcEIsSUFBSSxDQUFDSSxRQUFRLENBQUVGLFNBQVMsQ0FBQ0csY0FBYyxDQUFFUixJQUFJLENBQUNHLFNBQVMsWUFBWWYsT0FBTyxHQUFHQyxLQUFLLENBQUNvQixNQUFNLENBQUVULElBQUksQ0FBQ0csU0FBVSxDQUFDLEdBQUdILElBQUksQ0FBQ0csU0FBVSxDQUFDLEVBQUUsbUJBQW1CLEVBQUUsSUFBSyxDQUFDO1FBQzdKO1FBQ0EsSUFBS0gsSUFBSSxDQUFDSSxTQUFTLEVBQUc7VUFDcEIsSUFBSSxDQUFDRyxRQUFRLENBQUVGLFNBQVMsQ0FBQ0csY0FBYyxDQUFFUixJQUFJLENBQUNJLFNBQVMsWUFBWWhCLE9BQU8sR0FBR0MsS0FBSyxDQUFDb0IsTUFBTSxDQUFFVCxJQUFJLENBQUNJLFNBQVUsQ0FBQyxHQUFHSixJQUFJLENBQUNJLFNBQVUsQ0FBQyxFQUFFLG1CQUFtQixFQUFFLEtBQU0sQ0FBQztRQUM5SjtNQUNGO01BQ0EsT0FBTyxLQUFLO0lBQ2QsQ0FBRSxDQUFDO0VBQ0w7QUFDRjtBQUVBZCxPQUFPLENBQUNvQixRQUFRLENBQUUsb0JBQW9CLEVBQUVqQixrQkFBbUIsQ0FBQyJ9