// Copyright 2022-2023, University of Colorado Boulder

/**
 * A poolable internal representation of a line for layout handling in FlowConstraint
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import Orientation from '../../../../phet-core/js/Orientation.js';
import Pool from '../../../../phet-core/js/Pool.js';
import { LayoutLine, scenery } from '../../imports.js';
export default class FlowLine extends LayoutLine {
  // (scenery-internal)

  /**
   * (scenery-internal)
   */
  constructor(orientation, cells) {
    super();
    this.initialize(orientation, cells);
  }

  /**
   * (scenery-internal)
   */
  initialize(orientation, cells) {
    this.orientation = orientation;
    this.cells = cells;
    this.initializeLayoutLine();
    return this;
  }

  /**
   * (scenery-internal)
   */
  getMinimumSize(spacing) {
    return (this.cells.length - 1) * spacing + _.sum(this.cells.map(cell => cell.getMinimumSize(this.orientation)));
  }

  /**
   * (scenery-internal)
   */
  freeToPool() {
    FlowLine.pool.freeToPool(this);
  }
  clean() {
    this.cells.length = 0;
    this.freeToPool();
  }

  /**
   * (scenery-internal)
   */
  static pool = new Pool(FlowLine, {
    defaultArguments: [Orientation.HORIZONTAL, []]
  });
}
scenery.register('FlowLine', FlowLine);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPcmllbnRhdGlvbiIsIlBvb2wiLCJMYXlvdXRMaW5lIiwic2NlbmVyeSIsIkZsb3dMaW5lIiwiY29uc3RydWN0b3IiLCJvcmllbnRhdGlvbiIsImNlbGxzIiwiaW5pdGlhbGl6ZSIsImluaXRpYWxpemVMYXlvdXRMaW5lIiwiZ2V0TWluaW11bVNpemUiLCJzcGFjaW5nIiwibGVuZ3RoIiwiXyIsInN1bSIsIm1hcCIsImNlbGwiLCJmcmVlVG9Qb29sIiwicG9vbCIsImNsZWFuIiwiZGVmYXVsdEFyZ3VtZW50cyIsIkhPUklaT05UQUwiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkZsb3dMaW5lLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIyLTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIEEgcG9vbGFibGUgaW50ZXJuYWwgcmVwcmVzZW50YXRpb24gb2YgYSBsaW5lIGZvciBsYXlvdXQgaGFuZGxpbmcgaW4gRmxvd0NvbnN0cmFpbnRcclxuICpcclxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxyXG4gKi9cclxuXHJcbmltcG9ydCBPcmllbnRhdGlvbiBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvT3JpZW50YXRpb24uanMnO1xyXG5pbXBvcnQgUG9vbCBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvUG9vbC5qcyc7XHJcbmltcG9ydCB7IEZsb3dDZWxsLCBMYXlvdXRMaW5lLCBzY2VuZXJ5IH0gZnJvbSAnLi4vLi4vaW1wb3J0cy5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGbG93TGluZSBleHRlbmRzIExheW91dExpbmUge1xyXG5cclxuICAvLyAoc2NlbmVyeS1pbnRlcm5hbClcclxuICBwdWJsaWMgb3JpZW50YXRpb24hOiBPcmllbnRhdGlvbjtcclxuICBwdWJsaWMgY2VsbHMhOiBGbG93Q2VsbFtdO1xyXG5cclxuICAvKipcclxuICAgKiAoc2NlbmVyeS1pbnRlcm5hbClcclxuICAgKi9cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIG9yaWVudGF0aW9uOiBPcmllbnRhdGlvbiwgY2VsbHM6IEZsb3dDZWxsW10gKSB7XHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIHRoaXMuaW5pdGlhbGl6ZSggb3JpZW50YXRpb24sIGNlbGxzICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiAoc2NlbmVyeS1pbnRlcm5hbClcclxuICAgKi9cclxuICBwdWJsaWMgaW5pdGlhbGl6ZSggb3JpZW50YXRpb246IE9yaWVudGF0aW9uLCBjZWxsczogRmxvd0NlbGxbXSApOiB0aGlzIHtcclxuXHJcbiAgICB0aGlzLm9yaWVudGF0aW9uID0gb3JpZW50YXRpb247XHJcbiAgICB0aGlzLmNlbGxzID0gY2VsbHM7XHJcblxyXG4gICAgdGhpcy5pbml0aWFsaXplTGF5b3V0TGluZSgpO1xyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogKHNjZW5lcnktaW50ZXJuYWwpXHJcbiAgICovXHJcbiAgcHVibGljIGdldE1pbmltdW1TaXplKCBzcGFjaW5nOiBudW1iZXIgKTogbnVtYmVyIHtcclxuICAgIHJldHVybiAoIHRoaXMuY2VsbHMubGVuZ3RoIC0gMSApICogc3BhY2luZyArIF8uc3VtKCB0aGlzLmNlbGxzLm1hcCggY2VsbCA9PiBjZWxsLmdldE1pbmltdW1TaXplKCB0aGlzLm9yaWVudGF0aW9uICkgKSApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogKHNjZW5lcnktaW50ZXJuYWwpXHJcbiAgICovXHJcbiAgcHVibGljIGZyZWVUb1Bvb2woKTogdm9pZCB7XHJcbiAgICBGbG93TGluZS5wb29sLmZyZWVUb1Bvb2woIHRoaXMgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBjbGVhbigpOiB2b2lkIHtcclxuICAgIHRoaXMuY2VsbHMubGVuZ3RoID0gMDtcclxuICAgIHRoaXMuZnJlZVRvUG9vbCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogKHNjZW5lcnktaW50ZXJuYWwpXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBwb29sID0gbmV3IFBvb2woIEZsb3dMaW5lLCB7XHJcbiAgICBkZWZhdWx0QXJndW1lbnRzOiBbIE9yaWVudGF0aW9uLkhPUklaT05UQUwsIFtdIF1cclxuICB9ICk7XHJcbn1cclxuXHJcbnNjZW5lcnkucmVnaXN0ZXIoICdGbG93TGluZScsIEZsb3dMaW5lICk7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxXQUFXLE1BQU0seUNBQXlDO0FBQ2pFLE9BQU9DLElBQUksTUFBTSxrQ0FBa0M7QUFDbkQsU0FBbUJDLFVBQVUsRUFBRUMsT0FBTyxRQUFRLGtCQUFrQjtBQUVoRSxlQUFlLE1BQU1DLFFBQVEsU0FBU0YsVUFBVSxDQUFDO0VBRS9DOztFQUlBO0FBQ0Y7QUFDQTtFQUNTRyxXQUFXQSxDQUFFQyxXQUF3QixFQUFFQyxLQUFpQixFQUFHO0lBQ2hFLEtBQUssQ0FBQyxDQUFDO0lBRVAsSUFBSSxDQUFDQyxVQUFVLENBQUVGLFdBQVcsRUFBRUMsS0FBTSxDQUFDO0VBQ3ZDOztFQUVBO0FBQ0Y7QUFDQTtFQUNTQyxVQUFVQSxDQUFFRixXQUF3QixFQUFFQyxLQUFpQixFQUFTO0lBRXJFLElBQUksQ0FBQ0QsV0FBVyxHQUFHQSxXQUFXO0lBQzlCLElBQUksQ0FBQ0MsS0FBSyxHQUFHQSxLQUFLO0lBRWxCLElBQUksQ0FBQ0Usb0JBQW9CLENBQUMsQ0FBQztJQUUzQixPQUFPLElBQUk7RUFDYjs7RUFFQTtBQUNGO0FBQ0E7RUFDU0MsY0FBY0EsQ0FBRUMsT0FBZSxFQUFXO0lBQy9DLE9BQU8sQ0FBRSxJQUFJLENBQUNKLEtBQUssQ0FBQ0ssTUFBTSxHQUFHLENBQUMsSUFBS0QsT0FBTyxHQUFHRSxDQUFDLENBQUNDLEdBQUcsQ0FBRSxJQUFJLENBQUNQLEtBQUssQ0FBQ1EsR0FBRyxDQUFFQyxJQUFJLElBQUlBLElBQUksQ0FBQ04sY0FBYyxDQUFFLElBQUksQ0FBQ0osV0FBWSxDQUFFLENBQUUsQ0FBQztFQUN6SDs7RUFFQTtBQUNGO0FBQ0E7RUFDU1csVUFBVUEsQ0FBQSxFQUFTO0lBQ3hCYixRQUFRLENBQUNjLElBQUksQ0FBQ0QsVUFBVSxDQUFFLElBQUssQ0FBQztFQUNsQztFQUVPRSxLQUFLQSxDQUFBLEVBQVM7SUFDbkIsSUFBSSxDQUFDWixLQUFLLENBQUNLLE1BQU0sR0FBRyxDQUFDO0lBQ3JCLElBQUksQ0FBQ0ssVUFBVSxDQUFDLENBQUM7RUFDbkI7O0VBRUE7QUFDRjtBQUNBO0VBQ0UsT0FBdUJDLElBQUksR0FBRyxJQUFJakIsSUFBSSxDQUFFRyxRQUFRLEVBQUU7SUFDaERnQixnQkFBZ0IsRUFBRSxDQUFFcEIsV0FBVyxDQUFDcUIsVUFBVSxFQUFFLEVBQUU7RUFDaEQsQ0FBRSxDQUFDO0FBQ0w7QUFFQWxCLE9BQU8sQ0FBQ21CLFFBQVEsQ0FBRSxVQUFVLEVBQUVsQixRQUFTLENBQUMifQ==