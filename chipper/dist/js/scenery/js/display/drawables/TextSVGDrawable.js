// Copyright 2016-2022, University of Colorado Boulder

/**
 * SVG drawable for Text nodes.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import platform from '../../../../phet-core/js/platform.js';
import Poolable from '../../../../phet-core/js/Poolable.js';
import { scenery, svgns, SVGSelfDrawable, TextStatefulDrawable, Utils } from '../../imports.js';

// TODO: change this based on memory and performance characteristics of the platform
const keepSVGTextElements = true; // whether we should pool SVG elements for the SVG rendering states, or whether we should free them when possible for memory

// Some browsers (IE/Edge) can't handle our UTF-8 embedding marks AND SVG textLength/spacingAndGlyphs. We disable
// using these features, because they aren't necessary on these browsers.
// See https://github.com/phetsims/scenery/issues/455 for more information.
const useSVGTextLengthAdjustments = !platform.edge;
class TextSVGDrawable extends TextStatefulDrawable(SVGSelfDrawable) {
  /**
   * @public
   * @override
   *
   * @param {number} renderer
   * @param {Instance} instance
   */
  initialize(renderer, instance) {
    super.initialize(renderer, instance, true, keepSVGTextElements); // usesPaint: true

    // @private {boolean}
    this.hasLength = false;
    if (!this.svgElement) {
      const text = document.createElementNS(svgns, 'text');

      // @protected {SVGTextElement} - Sole SVG element for this drawable, implementing API for SVGSelfDrawable
      this.svgElement = text;
      text.appendChild(document.createTextNode(''));

      // TODO: flag adjustment for SVG qualities
      text.setAttribute('dominant-baseline', 'alphabetic'); // to match Canvas right now
      text.setAttribute('text-rendering', 'geometricPrecision');
      text.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');
      text.setAttribute('direction', 'ltr');
    }
  }

  /**
   * Updates the SVG elements so that they will appear like the current node's representation.
   * @protected
   *
   * Implements the interface for SVGSelfDrawable (and is called from the SVGSelfDrawable's update).
   */
  updateSVGSelf() {
    const text = this.svgElement;

    // set all of the font attributes, since we can't use the combined one
    if (this.dirtyFont) {
      text.setAttribute('font-family', this.node._font.getFamily());
      text.setAttribute('font-size', this.node._font.getSize());
      text.setAttribute('font-style', this.node._font.getStyle());
      text.setAttribute('font-weight', this.node._font.getWeight());
      text.setAttribute('font-stretch', this.node._font.getStretch());
    }

    // update the text-node's value
    if (this.dirtyText) {
      text.lastChild.nodeValue = Utils.safariEmbeddingMarkWorkaround(this.node.renderedText);
    }

    // text length correction, tested with scenery/tests/text-quality-test.html to determine how to match Canvas/SVG rendering (and overall length)
    if (this.dirtyBounds && useSVGTextLengthAdjustments) {
      const useLengthAdjustment = this.node._boundsMethod !== 'accurate' && isFinite(this.node.selfBounds.width);
      if (useLengthAdjustment) {
        if (!this.hasLength) {
          this.hasLength = true;
          text.setAttribute('lengthAdjust', 'spacingAndGlyphs');
        }
        text.setAttribute('textLength', this.node.selfBounds.width);
      } else if (this.hasLength) {
        this.hasLength = false;
        text.removeAttribute('lengthAdjust');
        text.removeAttribute('textLength');
      }
    }

    // Apply any fill/stroke changes to our element.
    this.updateFillStrokeStyle(text);
  }
}
scenery.register('TextSVGDrawable', TextSVGDrawable);
Poolable.mixInto(TextSVGDrawable);
export default TextSVGDrawable;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwbGF0Zm9ybSIsIlBvb2xhYmxlIiwic2NlbmVyeSIsInN2Z25zIiwiU1ZHU2VsZkRyYXdhYmxlIiwiVGV4dFN0YXRlZnVsRHJhd2FibGUiLCJVdGlscyIsImtlZXBTVkdUZXh0RWxlbWVudHMiLCJ1c2VTVkdUZXh0TGVuZ3RoQWRqdXN0bWVudHMiLCJlZGdlIiwiVGV4dFNWR0RyYXdhYmxlIiwiaW5pdGlhbGl6ZSIsInJlbmRlcmVyIiwiaW5zdGFuY2UiLCJoYXNMZW5ndGgiLCJzdmdFbGVtZW50IiwidGV4dCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVUZXh0Tm9kZSIsInNldEF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZU5TIiwidXBkYXRlU1ZHU2VsZiIsImRpcnR5Rm9udCIsIm5vZGUiLCJfZm9udCIsImdldEZhbWlseSIsImdldFNpemUiLCJnZXRTdHlsZSIsImdldFdlaWdodCIsImdldFN0cmV0Y2giLCJkaXJ0eVRleHQiLCJsYXN0Q2hpbGQiLCJub2RlVmFsdWUiLCJzYWZhcmlFbWJlZGRpbmdNYXJrV29ya2Fyb3VuZCIsInJlbmRlcmVkVGV4dCIsImRpcnR5Qm91bmRzIiwidXNlTGVuZ3RoQWRqdXN0bWVudCIsIl9ib3VuZHNNZXRob2QiLCJpc0Zpbml0ZSIsInNlbGZCb3VuZHMiLCJ3aWR0aCIsInJlbW92ZUF0dHJpYnV0ZSIsInVwZGF0ZUZpbGxTdHJva2VTdHlsZSIsInJlZ2lzdGVyIiwibWl4SW50byJdLCJzb3VyY2VzIjpbIlRleHRTVkdEcmF3YWJsZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNi0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBTVkcgZHJhd2FibGUgZm9yIFRleHQgbm9kZXMuXHJcbiAqXHJcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cclxuICovXHJcblxyXG5pbXBvcnQgcGxhdGZvcm0gZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL3BsYXRmb3JtLmpzJztcclxuaW1wb3J0IFBvb2xhYmxlIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9Qb29sYWJsZS5qcyc7XHJcbmltcG9ydCB7IHNjZW5lcnksIHN2Z25zLCBTVkdTZWxmRHJhd2FibGUsIFRleHRTdGF0ZWZ1bERyYXdhYmxlLCBVdGlscyB9IGZyb20gJy4uLy4uL2ltcG9ydHMuanMnO1xyXG5cclxuLy8gVE9ETzogY2hhbmdlIHRoaXMgYmFzZWQgb24gbWVtb3J5IGFuZCBwZXJmb3JtYW5jZSBjaGFyYWN0ZXJpc3RpY3Mgb2YgdGhlIHBsYXRmb3JtXHJcbmNvbnN0IGtlZXBTVkdUZXh0RWxlbWVudHMgPSB0cnVlOyAvLyB3aGV0aGVyIHdlIHNob3VsZCBwb29sIFNWRyBlbGVtZW50cyBmb3IgdGhlIFNWRyByZW5kZXJpbmcgc3RhdGVzLCBvciB3aGV0aGVyIHdlIHNob3VsZCBmcmVlIHRoZW0gd2hlbiBwb3NzaWJsZSBmb3IgbWVtb3J5XHJcblxyXG4vLyBTb21lIGJyb3dzZXJzIChJRS9FZGdlKSBjYW4ndCBoYW5kbGUgb3VyIFVURi04IGVtYmVkZGluZyBtYXJrcyBBTkQgU1ZHIHRleHRMZW5ndGgvc3BhY2luZ0FuZEdseXBocy4gV2UgZGlzYWJsZVxyXG4vLyB1c2luZyB0aGVzZSBmZWF0dXJlcywgYmVjYXVzZSB0aGV5IGFyZW4ndCBuZWNlc3Nhcnkgb24gdGhlc2UgYnJvd3NlcnMuXHJcbi8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvc2NlbmVyeS9pc3N1ZXMvNDU1IGZvciBtb3JlIGluZm9ybWF0aW9uLlxyXG5jb25zdCB1c2VTVkdUZXh0TGVuZ3RoQWRqdXN0bWVudHMgPSAhcGxhdGZvcm0uZWRnZTtcclxuXHJcbmNsYXNzIFRleHRTVkdEcmF3YWJsZSBleHRlbmRzIFRleHRTdGF0ZWZ1bERyYXdhYmxlKCBTVkdTZWxmRHJhd2FibGUgKSB7XHJcbiAgLyoqXHJcbiAgICogQHB1YmxpY1xyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHJlbmRlcmVyXHJcbiAgICogQHBhcmFtIHtJbnN0YW5jZX0gaW5zdGFuY2VcclxuICAgKi9cclxuICBpbml0aWFsaXplKCByZW5kZXJlciwgaW5zdGFuY2UgKSB7XHJcbiAgICBzdXBlci5pbml0aWFsaXplKCByZW5kZXJlciwgaW5zdGFuY2UsIHRydWUsIGtlZXBTVkdUZXh0RWxlbWVudHMgKTsgLy8gdXNlc1BhaW50OiB0cnVlXHJcblxyXG4gICAgLy8gQHByaXZhdGUge2Jvb2xlYW59XHJcbiAgICB0aGlzLmhhc0xlbmd0aCA9IGZhbHNlO1xyXG5cclxuICAgIGlmICggIXRoaXMuc3ZnRWxlbWVudCApIHtcclxuICAgICAgY29uc3QgdGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyggc3ZnbnMsICd0ZXh0JyApO1xyXG5cclxuICAgICAgLy8gQHByb3RlY3RlZCB7U1ZHVGV4dEVsZW1lbnR9IC0gU29sZSBTVkcgZWxlbWVudCBmb3IgdGhpcyBkcmF3YWJsZSwgaW1wbGVtZW50aW5nIEFQSSBmb3IgU1ZHU2VsZkRyYXdhYmxlXHJcbiAgICAgIHRoaXMuc3ZnRWxlbWVudCA9IHRleHQ7XHJcblxyXG4gICAgICB0ZXh0LmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSggJycgKSApO1xyXG5cclxuICAgICAgLy8gVE9ETzogZmxhZyBhZGp1c3RtZW50IGZvciBTVkcgcXVhbGl0aWVzXHJcbiAgICAgIHRleHQuc2V0QXR0cmlidXRlKCAnZG9taW5hbnQtYmFzZWxpbmUnLCAnYWxwaGFiZXRpYycgKTsgLy8gdG8gbWF0Y2ggQ2FudmFzIHJpZ2h0IG5vd1xyXG4gICAgICB0ZXh0LnNldEF0dHJpYnV0ZSggJ3RleHQtcmVuZGVyaW5nJywgJ2dlb21ldHJpY1ByZWNpc2lvbicgKTtcclxuICAgICAgdGV4dC5zZXRBdHRyaWJ1dGVOUyggJ2h0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZScsICd4bWw6c3BhY2UnLCAncHJlc2VydmUnICk7XHJcbiAgICAgIHRleHQuc2V0QXR0cmlidXRlKCAnZGlyZWN0aW9uJywgJ2x0cicgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZXMgdGhlIFNWRyBlbGVtZW50cyBzbyB0aGF0IHRoZXkgd2lsbCBhcHBlYXIgbGlrZSB0aGUgY3VycmVudCBub2RlJ3MgcmVwcmVzZW50YXRpb24uXHJcbiAgICogQHByb3RlY3RlZFxyXG4gICAqXHJcbiAgICogSW1wbGVtZW50cyB0aGUgaW50ZXJmYWNlIGZvciBTVkdTZWxmRHJhd2FibGUgKGFuZCBpcyBjYWxsZWQgZnJvbSB0aGUgU1ZHU2VsZkRyYXdhYmxlJ3MgdXBkYXRlKS5cclxuICAgKi9cclxuICB1cGRhdGVTVkdTZWxmKCkge1xyXG4gICAgY29uc3QgdGV4dCA9IHRoaXMuc3ZnRWxlbWVudDtcclxuXHJcbiAgICAvLyBzZXQgYWxsIG9mIHRoZSBmb250IGF0dHJpYnV0ZXMsIHNpbmNlIHdlIGNhbid0IHVzZSB0aGUgY29tYmluZWQgb25lXHJcbiAgICBpZiAoIHRoaXMuZGlydHlGb250ICkge1xyXG4gICAgICB0ZXh0LnNldEF0dHJpYnV0ZSggJ2ZvbnQtZmFtaWx5JywgdGhpcy5ub2RlLl9mb250LmdldEZhbWlseSgpICk7XHJcbiAgICAgIHRleHQuc2V0QXR0cmlidXRlKCAnZm9udC1zaXplJywgdGhpcy5ub2RlLl9mb250LmdldFNpemUoKSApO1xyXG4gICAgICB0ZXh0LnNldEF0dHJpYnV0ZSggJ2ZvbnQtc3R5bGUnLCB0aGlzLm5vZGUuX2ZvbnQuZ2V0U3R5bGUoKSApO1xyXG4gICAgICB0ZXh0LnNldEF0dHJpYnV0ZSggJ2ZvbnQtd2VpZ2h0JywgdGhpcy5ub2RlLl9mb250LmdldFdlaWdodCgpICk7XHJcbiAgICAgIHRleHQuc2V0QXR0cmlidXRlKCAnZm9udC1zdHJldGNoJywgdGhpcy5ub2RlLl9mb250LmdldFN0cmV0Y2goKSApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHVwZGF0ZSB0aGUgdGV4dC1ub2RlJ3MgdmFsdWVcclxuICAgIGlmICggdGhpcy5kaXJ0eVRleHQgKSB7XHJcbiAgICAgIHRleHQubGFzdENoaWxkLm5vZGVWYWx1ZSA9IFV0aWxzLnNhZmFyaUVtYmVkZGluZ01hcmtXb3JrYXJvdW5kKCB0aGlzLm5vZGUucmVuZGVyZWRUZXh0ICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gdGV4dCBsZW5ndGggY29ycmVjdGlvbiwgdGVzdGVkIHdpdGggc2NlbmVyeS90ZXN0cy90ZXh0LXF1YWxpdHktdGVzdC5odG1sIHRvIGRldGVybWluZSBob3cgdG8gbWF0Y2ggQ2FudmFzL1NWRyByZW5kZXJpbmcgKGFuZCBvdmVyYWxsIGxlbmd0aClcclxuICAgIGlmICggdGhpcy5kaXJ0eUJvdW5kcyAmJiB1c2VTVkdUZXh0TGVuZ3RoQWRqdXN0bWVudHMgKSB7XHJcbiAgICAgIGNvbnN0IHVzZUxlbmd0aEFkanVzdG1lbnQgPSB0aGlzLm5vZGUuX2JvdW5kc01ldGhvZCAhPT0gJ2FjY3VyYXRlJyAmJiBpc0Zpbml0ZSggdGhpcy5ub2RlLnNlbGZCb3VuZHMud2lkdGggKTtcclxuXHJcbiAgICAgIGlmICggdXNlTGVuZ3RoQWRqdXN0bWVudCApIHtcclxuICAgICAgICBpZiAoICF0aGlzLmhhc0xlbmd0aCApIHtcclxuICAgICAgICAgIHRoaXMuaGFzTGVuZ3RoID0gdHJ1ZTtcclxuICAgICAgICAgIHRleHQuc2V0QXR0cmlidXRlKCAnbGVuZ3RoQWRqdXN0JywgJ3NwYWNpbmdBbmRHbHlwaHMnICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRleHQuc2V0QXR0cmlidXRlKCAndGV4dExlbmd0aCcsIHRoaXMubm9kZS5zZWxmQm91bmRzLndpZHRoICk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAoIHRoaXMuaGFzTGVuZ3RoICkge1xyXG4gICAgICAgIHRoaXMuaGFzTGVuZ3RoID0gZmFsc2U7XHJcbiAgICAgICAgdGV4dC5yZW1vdmVBdHRyaWJ1dGUoICdsZW5ndGhBZGp1c3QnICk7XHJcbiAgICAgICAgdGV4dC5yZW1vdmVBdHRyaWJ1dGUoICd0ZXh0TGVuZ3RoJyApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQXBwbHkgYW55IGZpbGwvc3Ryb2tlIGNoYW5nZXMgdG8gb3VyIGVsZW1lbnQuXHJcbiAgICB0aGlzLnVwZGF0ZUZpbGxTdHJva2VTdHlsZSggdGV4dCApO1xyXG4gIH1cclxufVxyXG5cclxuc2NlbmVyeS5yZWdpc3RlciggJ1RleHRTVkdEcmF3YWJsZScsIFRleHRTVkdEcmF3YWJsZSApO1xyXG5cclxuUG9vbGFibGUubWl4SW50byggVGV4dFNWR0RyYXdhYmxlICk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBUZXh0U1ZHRHJhd2FibGU7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFFBQVEsTUFBTSxzQ0FBc0M7QUFDM0QsT0FBT0MsUUFBUSxNQUFNLHNDQUFzQztBQUMzRCxTQUFTQyxPQUFPLEVBQUVDLEtBQUssRUFBRUMsZUFBZSxFQUFFQyxvQkFBb0IsRUFBRUMsS0FBSyxRQUFRLGtCQUFrQjs7QUFFL0Y7QUFDQSxNQUFNQyxtQkFBbUIsR0FBRyxJQUFJLENBQUMsQ0FBQzs7QUFFbEM7QUFDQTtBQUNBO0FBQ0EsTUFBTUMsMkJBQTJCLEdBQUcsQ0FBQ1IsUUFBUSxDQUFDUyxJQUFJO0FBRWxELE1BQU1DLGVBQWUsU0FBU0wsb0JBQW9CLENBQUVELGVBQWdCLENBQUMsQ0FBQztFQUNwRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFTyxVQUFVQSxDQUFFQyxRQUFRLEVBQUVDLFFBQVEsRUFBRztJQUMvQixLQUFLLENBQUNGLFVBQVUsQ0FBRUMsUUFBUSxFQUFFQyxRQUFRLEVBQUUsSUFBSSxFQUFFTixtQkFBb0IsQ0FBQyxDQUFDLENBQUM7O0lBRW5FO0lBQ0EsSUFBSSxDQUFDTyxT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