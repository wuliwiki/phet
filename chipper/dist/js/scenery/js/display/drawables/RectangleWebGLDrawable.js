// Copyright 2016-2022, University of Colorado Boulder

/**
 * WebGL drawable for Rectangle nodes.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import ReadOnlyProperty from '../../../../axon/js/ReadOnlyProperty.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import Poolable from '../../../../phet-core/js/Poolable.js';
import { Color, RectangleStatefulDrawable, Renderer, scenery, WebGLSelfDrawable } from '../../imports.js';
const scratchColor = new Color('transparent');
class RectangleWebGLDrawable extends RectangleStatefulDrawable(WebGLSelfDrawable) {
  /**
   * @public
   * @override
   *
   * @param {number} renderer
   * @param {Instance} instance
   */
  initialize(renderer, instance) {
    super.initialize(renderer, instance);
    if (!this.vertexArray) {
      // format [X Y R G B A] for all vertices
      this.vertexArray = new Float32Array(6 * 6); // 6-length components for 6 vertices (2 tris).
    }

    // corner vertices in the relative transform root coordinate space
    this.upperLeft = new Vector2(0, 0);
    this.lowerLeft = new Vector2(0, 0);
    this.upperRight = new Vector2(0, 0);
    this.lowerRight = new Vector2(0, 0);
    this.transformDirty = true;
    this.includeVertices = true; // used by the processor
  }

  /**
   * @public
   *
   * @param {WebGLBlock} webglBlock
   */
  onAddToBlock(webglBlock) {
    this.webglBlock = webglBlock; // TODO: do we need this reference?
    this.markDirty();
  }

  /**
   * @public
   *
   * @param {WebGLBlock} webglBlock
   */
  onRemoveFromBlock(webglBlock) {}

  /**
   * @public
   * @override
   */
  markTransformDirty() {
    this.transformDirty = true;
    super.markTransformDirty();
  }

  /**
   * Updates the DOM appearance of this drawable (whether by preparing/calling draw calls, DOM element updates, etc.)
   * @public
   * @override
   *
   * @returns {boolean} - Whether the update should continue (if false, further updates in supertype steps should not
   *                      be done).
   */
  update() {
    // See if we need to actually update things (will bail out if we are not dirty, or if we've been disposed)
    if (!super.update()) {
      return false;
    }
    if (this.dirtyFill) {
      this.includeVertices = this.node.hasFill();
      if (this.includeVertices) {
        const fill = this.node.fill instanceof ReadOnlyProperty ? this.node.fill.value : this.node.fill;
        const color = scratchColor.set(fill);
        const red = color.red / 255;
        const green = color.green / 255;
        const blue = color.blue / 255;
        const alpha = color.alpha;
        for (let i = 0; i < 6; i++) {
          const offset = i * 6;
          this.vertexArray[2 + offset] = red;
          this.vertexArray[3 + offset] = green;
          this.vertexArray[4 + offset] = blue;
          this.vertexArray[5 + offset] = alpha;
        }
      }
    }
    if (this.transformDirty || this.dirtyX || this.dirtyY || this.dirtyWidth || this.dirtyHeight) {
      this.transformDirty = false;
      const x = this.node._rectX;
      const y = this.node._rectY;
      const width = this.node._rectWidth;
      const height = this.node._rectHeight;
      const transformMatrix = this.instance.relativeTransform.matrix; // with compute need, should always be accurate
      transformMatrix.multiplyVector2(this.upperLeft.setXY(x, y));
      transformMatrix.multiplyVector2(this.lowerLeft.setXY(x, y + height));
      transformMatrix.multiplyVector2(this.upperRight.setXY(x + width, y));
      transformMatrix.multiplyVector2(this.lowerRight.setXY(x + width, y + height));

      // first triangle XYs
      this.vertexArray[0] = this.upperLeft.x;
      this.vertexArray[1] = this.upperLeft.y;
      this.vertexArray[6] = this.lowerLeft.x;
      this.vertexArray[7] = this.lowerLeft.y;
      this.vertexArray[12] = this.upperRight.x;
      this.vertexArray[13] = this.upperRight.y;

      // second triangle XYs
      this.vertexArray[18] = this.upperRight.x;
      this.vertexArray[19] = this.upperRight.y;
      this.vertexArray[24] = this.lowerLeft.x;
      this.vertexArray[25] = this.lowerLeft.y;
      this.vertexArray[30] = this.lowerRight.x;
      this.vertexArray[31] = this.lowerRight.y;
    }
    this.setToCleanState();
    this.cleanPaintableState();
    return true;
  }
}
RectangleWebGLDrawable.prototype.webglRenderer = Renderer.webglVertexColorPolygons;
scenery.register('RectangleWebGLDrawable', RectangleWebGLDrawable);
Poolable.mixInto(RectangleWebGLDrawable);
export default RectangleWebGLDrawable;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFkT25seVByb3BlcnR5IiwiVmVjdG9yMiIsIlBvb2xhYmxlIiwiQ29sb3IiLCJSZWN0YW5nbGVTdGF0ZWZ1bERyYXdhYmxlIiwiUmVuZGVyZXIiLCJzY2VuZXJ5IiwiV2ViR0xTZWxmRHJhd2FibGUiLCJzY3JhdGNoQ29sb3IiLCJSZWN0YW5nbGVXZWJHTERyYXdhYmxlIiwiaW5pdGlhbGl6ZSIsInJlbmRlcmVyIiwiaW5zdGFuY2UiLCJ2ZXJ0ZXhBcnJheSIsIkZsb2F0MzJBcnJheSIsInVwcGVyTGVmdCIsImxvd2VyTGVmdCIsInVwcGVyUmlnaHQiLCJsb3dlclJpZ2h0IiwidHJhbnNmb3JtRGlydHkiLCJpbmNsdWRlVmVydGljZXMiLCJvbkFkZFRvQmxvY2siLCJ3ZWJnbEJsb2NrIiwibWFya0RpcnR5Iiwib25SZW1vdmVGcm9tQmxvY2siLCJtYXJrVHJhbnNmb3JtRGlydHkiLCJ1cGRhdGUiLCJkaXJ0eUZpbGwiLCJub2RlIiwiaGFzRmlsbCIsImZpbGwiLCJ2YWx1ZSIsImNvbG9yIiwic2V0IiwicmVkIiwiZ3JlZW4iLCJibHVlIiwiYWxwaGEiLCJpIiwib2Zmc2V0IiwiZGlydHlYIiwiZGlydHlZIiwiZGlydHlXaWR0aCIsImRpcnR5SGVpZ2h0IiwieCIsIl9yZWN0WCIsInkiLCJfcmVjdFkiLCJ3aWR0aCIsIl9yZWN0V2lkdGgiLCJoZWlnaHQiLCJfcmVjdEhlaWdodCIsInRyYW5zZm9ybU1hdHJpeCIsInJlbGF0aXZlVHJhbnNmb3JtIiwibWF0cml4IiwibXVsdGlwbHlWZWN0b3IyIiwic2V0WFkiLCJzZXRUb0NsZWFuU3RhdGUiLCJjbGVhblBhaW50YWJsZVN0YXRlIiwicHJvdG90eXBlIiwid2ViZ2xSZW5kZXJlciIsIndlYmdsVmVydGV4Q29sb3JQb2x5Z29ucyIsInJlZ2lzdGVyIiwibWl4SW50byJdLCJzb3VyY2VzIjpbIlJlY3RhbmdsZVdlYkdMRHJhd2FibGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTYtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogV2ViR0wgZHJhd2FibGUgZm9yIFJlY3RhbmdsZSBub2Rlcy5cclxuICpcclxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxyXG4gKi9cclxuXHJcbmltcG9ydCBSZWFkT25seVByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvUmVhZE9ubHlQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBWZWN0b3IyIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9WZWN0b3IyLmpzJztcclxuaW1wb3J0IFBvb2xhYmxlIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9Qb29sYWJsZS5qcyc7XHJcbmltcG9ydCB7IENvbG9yLCBSZWN0YW5nbGVTdGF0ZWZ1bERyYXdhYmxlLCBSZW5kZXJlciwgc2NlbmVyeSwgV2ViR0xTZWxmRHJhd2FibGUgfSBmcm9tICcuLi8uLi9pbXBvcnRzLmpzJztcclxuXHJcbmNvbnN0IHNjcmF0Y2hDb2xvciA9IG5ldyBDb2xvciggJ3RyYW5zcGFyZW50JyApO1xyXG5cclxuY2xhc3MgUmVjdGFuZ2xlV2ViR0xEcmF3YWJsZSBleHRlbmRzIFJlY3RhbmdsZVN0YXRlZnVsRHJhd2FibGUoIFdlYkdMU2VsZkRyYXdhYmxlICkge1xyXG4gIC8qKlxyXG4gICAqIEBwdWJsaWNcclxuICAgKiBAb3ZlcnJpZGVcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSByZW5kZXJlclxyXG4gICAqIEBwYXJhbSB7SW5zdGFuY2V9IGluc3RhbmNlXHJcbiAgICovXHJcbiAgaW5pdGlhbGl6ZSggcmVuZGVyZXIsIGluc3RhbmNlICkge1xyXG4gICAgc3VwZXIuaW5pdGlhbGl6ZSggcmVuZGVyZXIsIGluc3RhbmNlICk7XHJcblxyXG4gICAgaWYgKCAhdGhpcy52ZXJ0ZXhBcnJheSApIHtcclxuICAgICAgLy8gZm9ybWF0IFtYIFkgUiBHIEIgQV0gZm9yIGFsbCB2ZXJ0aWNlc1xyXG4gICAgICB0aGlzLnZlcnRleEFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSggNiAqIDYgKTsgLy8gNi1sZW5ndGggY29tcG9uZW50cyBmb3IgNiB2ZXJ0aWNlcyAoMiB0cmlzKS5cclxuICAgIH1cclxuXHJcbiAgICAvLyBjb3JuZXIgdmVydGljZXMgaW4gdGhlIHJlbGF0aXZlIHRyYW5zZm9ybSByb290IGNvb3JkaW5hdGUgc3BhY2VcclxuICAgIHRoaXMudXBwZXJMZWZ0ID0gbmV3IFZlY3RvcjIoIDAsIDAgKTtcclxuICAgIHRoaXMubG93ZXJMZWZ0ID0gbmV3IFZlY3RvcjIoIDAsIDAgKTtcclxuICAgIHRoaXMudXBwZXJSaWdodCA9IG5ldyBWZWN0b3IyKCAwLCAwICk7XHJcbiAgICB0aGlzLmxvd2VyUmlnaHQgPSBuZXcgVmVjdG9yMiggMCwgMCApO1xyXG5cclxuICAgIHRoaXMudHJhbnNmb3JtRGlydHkgPSB0cnVlO1xyXG4gICAgdGhpcy5pbmNsdWRlVmVydGljZXMgPSB0cnVlOyAvLyB1c2VkIGJ5IHRoZSBwcm9jZXNzb3JcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwdWJsaWNcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7V2ViR0xCbG9ja30gd2ViZ2xCbG9ja1xyXG4gICAqL1xyXG4gIG9uQWRkVG9CbG9jayggd2ViZ2xCbG9jayApIHtcclxuICAgIHRoaXMud2ViZ2xCbG9jayA9IHdlYmdsQmxvY2s7IC8vIFRPRE86IGRvIHdlIG5lZWQgdGhpcyByZWZlcmVuY2U/XHJcbiAgICB0aGlzLm1hcmtEaXJ0eSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHB1YmxpY1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHtXZWJHTEJsb2NrfSB3ZWJnbEJsb2NrXHJcbiAgICovXHJcbiAgb25SZW1vdmVGcm9tQmxvY2soIHdlYmdsQmxvY2sgKSB7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcHVibGljXHJcbiAgICogQG92ZXJyaWRlXHJcbiAgICovXHJcbiAgbWFya1RyYW5zZm9ybURpcnR5KCkge1xyXG4gICAgdGhpcy50cmFuc2Zvcm1EaXJ0eSA9IHRydWU7XHJcblxyXG4gICAgc3VwZXIubWFya1RyYW5zZm9ybURpcnR5KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBVcGRhdGVzIHRoZSBET00gYXBwZWFyYW5jZSBvZiB0aGlzIGRyYXdhYmxlICh3aGV0aGVyIGJ5IHByZXBhcmluZy9jYWxsaW5nIGRyYXcgY2FsbHMsIERPTSBlbGVtZW50IHVwZGF0ZXMsIGV0Yy4pXHJcbiAgICogQHB1YmxpY1xyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqXHJcbiAgICogQHJldHVybnMge2Jvb2xlYW59IC0gV2hldGhlciB0aGUgdXBkYXRlIHNob3VsZCBjb250aW51ZSAoaWYgZmFsc2UsIGZ1cnRoZXIgdXBkYXRlcyBpbiBzdXBlcnR5cGUgc3RlcHMgc2hvdWxkIG5vdFxyXG4gICAqICAgICAgICAgICAgICAgICAgICAgIGJlIGRvbmUpLlxyXG4gICAqL1xyXG4gIHVwZGF0ZSgpIHtcclxuICAgIC8vIFNlZSBpZiB3ZSBuZWVkIHRvIGFjdHVhbGx5IHVwZGF0ZSB0aGluZ3MgKHdpbGwgYmFpbCBvdXQgaWYgd2UgYXJlIG5vdCBkaXJ0eSwgb3IgaWYgd2UndmUgYmVlbiBkaXNwb3NlZClcclxuICAgIGlmICggIXN1cGVyLnVwZGF0ZSgpICkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCB0aGlzLmRpcnR5RmlsbCApIHtcclxuICAgICAgdGhpcy5pbmNsdWRlVmVydGljZXMgPSB0aGlzLm5vZGUuaGFzRmlsbCgpO1xyXG5cclxuICAgICAgaWYgKCB0aGlzLmluY2x1ZGVWZXJ0aWNlcyApIHtcclxuICAgICAgICBjb25zdCBmaWxsID0gKCB0aGlzLm5vZGUuZmlsbCBpbnN0YW5jZW9mIFJlYWRPbmx5UHJvcGVydHkgKSA/IHRoaXMubm9kZS5maWxsLnZhbHVlIDogdGhpcy5ub2RlLmZpbGw7XHJcbiAgICAgICAgY29uc3QgY29sb3IgPSBzY3JhdGNoQ29sb3Iuc2V0KCBmaWxsICk7XHJcbiAgICAgICAgY29uc3QgcmVkID0gY29sb3IucmVkIC8gMjU1O1xyXG4gICAgICAgIGNvbnN0IGdyZWVuID0gY29sb3IuZ3JlZW4gLyAyNTU7XHJcbiAgICAgICAgY29uc3QgYmx1ZSA9IGNvbG9yLmJsdWUgLyAyNTU7XHJcbiAgICAgICAgY29uc3QgYWxwaGEgPSBjb2xvci5hbHBoYTtcclxuXHJcbiAgICAgICAgZm9yICggbGV0IGkgPSAwOyBpIDwgNjsgaSsrICkge1xyXG4gICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gaSAqIDY7XHJcbiAgICAgICAgICB0aGlzLnZlcnRleEFycmF5WyAyICsgb2Zmc2V0IF0gPSByZWQ7XHJcbiAgICAgICAgICB0aGlzLnZlcnRleEFycmF5WyAzICsgb2Zmc2V0IF0gPSBncmVlbjtcclxuICAgICAgICAgIHRoaXMudmVydGV4QXJyYXlbIDQgKyBvZmZzZXQgXSA9IGJsdWU7XHJcbiAgICAgICAgICB0aGlzLnZlcnRleEFycmF5WyA1ICsgb2Zmc2V0IF0gPSBhbHBoYTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoIHRoaXMudHJhbnNmb3JtRGlydHkgfHwgdGhpcy5kaXJ0eVggfHwgdGhpcy5kaXJ0eVkgfHwgdGhpcy5kaXJ0eVdpZHRoIHx8IHRoaXMuZGlydHlIZWlnaHQgKSB7XHJcbiAgICAgIHRoaXMudHJhbnNmb3JtRGlydHkgPSBmYWxzZTtcclxuXHJcbiAgICAgIGNvbnN0IHggPSB0aGlzLm5vZGUuX3JlY3RYO1xyXG4gICAgICBjb25zdCB5ID0gdGhpcy5ub2RlLl9yZWN0WTtcclxuICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLm5vZGUuX3JlY3RXaWR0aDtcclxuICAgICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5ub2RlLl9yZWN0SGVpZ2h0O1xyXG5cclxuICAgICAgY29uc3QgdHJhbnNmb3JtTWF0cml4ID0gdGhpcy5pbnN0YW5jZS5yZWxhdGl2ZVRyYW5zZm9ybS5tYXRyaXg7IC8vIHdpdGggY29tcHV0ZSBuZWVkLCBzaG91bGQgYWx3YXlzIGJlIGFjY3VyYXRlXHJcbiAgICAgIHRyYW5zZm9ybU1hdHJpeC5tdWx0aXBseVZlY3RvcjIoIHRoaXMudXBwZXJMZWZ0LnNldFhZKCB4LCB5ICkgKTtcclxuICAgICAgdHJhbnNmb3JtTWF0cml4Lm11bHRpcGx5VmVjdG9yMiggdGhpcy5sb3dlckxlZnQuc2V0WFkoIHgsIHkgKyBoZWlnaHQgKSApO1xyXG4gICAgICB0cmFuc2Zvcm1NYXRyaXgubXVsdGlwbHlWZWN0b3IyKCB0aGlzLnVwcGVyUmlnaHQuc2V0WFkoIHggKyB3aWR0aCwgeSApICk7XHJcbiAgICAgIHRyYW5zZm9ybU1hdHJpeC5tdWx0aXBseVZlY3RvcjIoIHRoaXMubG93ZXJSaWdodC5zZXRYWSggeCArIHdpZHRoLCB5ICsgaGVpZ2h0ICkgKTtcclxuXHJcbiAgICAgIC8vIGZpcnN0IHRyaWFuZ2xlIFhZc1xyXG4gICAgICB0aGlzLnZlcnRleEFycmF5WyAwIF0gPSB0aGlzLnVwcGVyTGVmdC54O1xyXG4gICAgICB0aGlzLnZlcnRleEFycmF5WyAxIF0gPSB0aGlzLnVwcGVyTGVmdC55O1xyXG4gICAgICB0aGlzLnZlcnRleEFycmF5WyA2IF0gPSB0aGlzLmxvd2VyTGVmdC54O1xyXG4gICAgICB0aGlzLnZlcnRleEFycmF5WyA3IF0gPSB0aGlzLmxvd2VyTGVmdC55O1xyXG4gICAgICB0aGlzLnZlcnRleEFycmF5WyAxMiBdID0gdGhpcy51cHBlclJpZ2h0Lng7XHJcbiAgICAgIHRoaXMudmVydGV4QXJyYXlbIDEzIF0gPSB0aGlzLnVwcGVyUmlnaHQueTtcclxuXHJcbiAgICAgIC8vIHNlY29uZCB0cmlhbmdsZSBYWXNcclxuICAgICAgdGhpcy52ZXJ0ZXhBcnJheVsgMTggXSA9IHRoaXMudXBwZXJSaWdodC54O1xyXG4gICAgICB0aGlzLnZlcnRleEFycmF5WyAxOSBdID0gdGhpcy51cHBlclJpZ2h0Lnk7XHJcbiAgICAgIHRoaXMudmVydGV4QXJyYXlbIDI0IF0gPSB0aGlzLmxvd2VyTGVmdC54O1xyXG4gICAgICB0aGlzLnZlcnRleEFycmF5WyAyNSBdID0gdGhpcy5sb3dlckxlZnQueTtcclxuICAgICAgdGhpcy52ZXJ0ZXhBcnJheVsgMzAgXSA9IHRoaXMubG93ZXJSaWdodC54O1xyXG4gICAgICB0aGlzLnZlcnRleEFycmF5WyAzMSBdID0gdGhpcy5sb3dlclJpZ2h0Lnk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zZXRUb0NsZWFuU3RhdGUoKTtcclxuICAgIHRoaXMuY2xlYW5QYWludGFibGVTdGF0ZSgpO1xyXG5cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxufVxyXG5cclxuUmVjdGFuZ2xlV2ViR0xEcmF3YWJsZS5wcm90b3R5cGUud2ViZ2xSZW5kZXJlciA9IFJlbmRlcmVyLndlYmdsVmVydGV4Q29sb3JQb2x5Z29ucztcclxuXHJcbnNjZW5lcnkucmVnaXN0ZXIoICdSZWN0YW5nbGVXZWJHTERyYXdhYmxlJywgUmVjdGFuZ2xlV2ViR0xEcmF3YWJsZSApO1xyXG5cclxuUG9vbGFibGUubWl4SW50byggUmVjdGFuZ2xlV2ViR0xEcmF3YWJsZSApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgUmVjdGFuZ2xlV2ViR0xEcmF3YWJsZTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsZ0JBQWdCLE1BQU0seUNBQXlDO0FBQ3RFLE9BQU9DLE9BQU8sTUFBTSwrQkFBK0I7QUFDbkQsT0FBT0MsUUFBUSxNQUFNLHNDQUFzQztBQUMzRCxTQUFTQyxLQUFLLEVBQUVDLHlCQUF5QixFQUFFQyxRQUFRLEVBQUVDLE9BQU8sRUFBRUMsaUJBQWlCLFFBQVEsa0JBQWtCO0FBRXpHLE1BQU1DLFlBQVksR0FBRyxJQUFJTCxLQUFLLENBQUUsYUFBYyxDQUFDO0FBRS9DLE1BQU1NLHNCQUFzQixTQUFTTCx5QkFBeUIsQ0FBRUcsaUJBQWtCLENB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