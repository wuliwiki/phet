// Copyright 2016-2022, University of Colorado Boulder

/**
 * DOM drawable for Text nodes.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import Matrix3 from '../../../../dot/js/Matrix3.js';
import Poolable from '../../../../phet-core/js/Poolable.js';
import { DOMSelfDrawable, scenery, TextStatefulDrawable, Utils } from '../../imports.js';

// TODO: change this based on memory and performance characteristics of the platform
const keepDOMTextElements = true; // whether we should pool DOM elements for the DOM rendering states, or whether we should free them when possible for memory

// scratch matrix used in DOM rendering
const scratchMatrix = Matrix3.pool.fetch();
class TextDOMDrawable extends TextStatefulDrawable(DOMSelfDrawable) {
  /**
   * @param {number} renderer - Renderer bitmask, see Renderer's documentation for more details.
   * @param {Instance} instance
   */
  constructor(renderer, instance) {
    super(renderer, instance);

    // Apply CSS needed for future CSS transforms to work properly. Just do this once for performance
    Utils.prepareForTransform(this.domElement);
  }

  /**
   * @public
   * @override
   *
   * @param {number} renderer
   * @param {Instance} instance
   */
  initialize(renderer, instance) {
    super.initialize(renderer, instance);

    // only create elements if we don't already have them (we pool visual states always, and depending on the platform may also pool the actual elements to minimize
    // allocation and performance costs)
    if (!this.domElement) {
      // @protected {HTMLElement} - Our primary DOM element. This is exposed as part of the DOMSelfDrawable API.
      this.domElement = document.createElement('div');
      this.domElement.style.display = 'block';
      this.domElement.style.position = 'absolute';
      this.domElement.style.pointerEvents = 'none';
      this.domElement.style.left = '0';
      this.domElement.style.top = '0';
      this.domElement.setAttribute('dir', 'ltr');
    }
  }

  /**
   * Updates our DOM element so that its appearance matches our node's representation.
   * @protected
   *
   * This implements part of the DOMSelfDrawable required API for subtypes.
   */
  updateDOM() {
    const node = this.node;
    const div = this.domElement;
    if (this.paintDirty) {
      if (this.dirtyFont) {
        div.style.font = node.getFont();
      }
      if (this.dirtyStroke) {
        div.style.color = node.getCSSFill();
      }
      if (this.dirtyBounds) {
        // TODO: this condition is set on invalidateText, so it's almost always true?
        div.style.width = `${node.getSelfBounds().width}px`;
        div.style.height = `${node.getSelfBounds().height}px`;
        // TODO: do we require the jQuery versions here, or are they vestigial?
        // $div.width( node.getSelfBounds().width );
        // $div.height( node.getSelfBounds().height );
      }

      if (this.dirtyText) {
        div.textContent = node.renderedText;
      }
    }
    if (this.transformDirty || this.dirtyText || this.dirtyFont || this.dirtyBounds) {
      // shift the text vertically, postmultiplied with the entire transform.
      const yOffset = node.getSelfBounds().minY;
      scratchMatrix.set(this.getTransformMatrix());
      const translation = Matrix3.translation(0, yOffset);
      scratchMatrix.multiplyMatrix(translation);
      translation.freeToPool();
      Utils.applyPreparedTransform(scratchMatrix, div);
    }

    // clear all of the dirty flags
    this.setToCleanState();
    this.cleanPaintableState();
    this.transformDirty = false;
  }

  /**
   * Disposes the drawable.
   * @public
   * @override
   */
  dispose() {
    if (!keepDOMTextElements) {
      // clear the references
      this.domElement = null;
    }
    super.dispose();
  }
}
scenery.register('TextDOMDrawable', TextDOMDrawable);
Poolable.mixInto(TextDOMDrawable);
export default TextDOMDrawable;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNYXRyaXgzIiwiUG9vbGFibGUiLCJET01TZWxmRHJhd2FibGUiLCJzY2VuZXJ5IiwiVGV4dFN0YXRlZnVsRHJhd2FibGUiLCJVdGlscyIsImtlZXBET01UZXh0RWxlbWVudHMiLCJzY3JhdGNoTWF0cml4IiwicG9vbCIsImZldGNoIiwiVGV4dERPTURyYXdhYmxlIiwiY29uc3RydWN0b3IiLCJyZW5kZXJlciIsImluc3RhbmNlIiwicHJlcGFyZUZvclRyYW5zZm9ybSIsImRvbUVsZW1lbnQiLCJpbml0aWFsaXplIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJkaXNwbGF5IiwicG9zaXRpb24iLCJwb2ludGVyRXZlbnRzIiwibGVmdCIsInRvcCIsInNldEF0dHJpYnV0ZSIsInVwZGF0ZURPTSIsIm5vZGUiLCJkaXYiLCJwYWludERpcnR5IiwiZGlydHlGb250IiwiZm9udCIsImdldEZvbnQiLCJkaXJ0eVN0cm9rZSIsImNvbG9yIiwiZ2V0Q1NTRmlsbCIsImRpcnR5Qm91bmRzIiwid2lkdGgiLCJnZXRTZWxmQm91bmRzIiwiaGVpZ2h0IiwiZGlydHlUZXh0IiwidGV4dENvbnRlbnQiLCJyZW5kZXJlZFRleHQiLCJ0cmFuc2Zvcm1EaXJ0eSIsInlPZmZzZXQiLCJtaW5ZIiwic2V0IiwiZ2V0VHJhbnNmb3JtTWF0cml4IiwidHJhbnNsYXRpb24iLCJtdWx0aXBseU1hdHJpeCIsImZyZWVUb1Bvb2wiLCJhcHBseVByZXBhcmVkVHJhbnNmb3JtIiwic2V0VG9DbGVhblN0YXRlIiwiY2xlYW5QYWludGFibGVTdGF0ZSIsImRpc3Bvc2UiLCJyZWdpc3RlciIsIm1peEludG8iXSwic291cmNlcyI6WyJUZXh0RE9NRHJhd2FibGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTYtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogRE9NIGRyYXdhYmxlIGZvciBUZXh0IG5vZGVzLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XHJcbiAqL1xyXG5cclxuaW1wb3J0IE1hdHJpeDMgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL01hdHJpeDMuanMnO1xyXG5pbXBvcnQgUG9vbGFibGUgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL1Bvb2xhYmxlLmpzJztcclxuaW1wb3J0IHsgRE9NU2VsZkRyYXdhYmxlLCBzY2VuZXJ5LCBUZXh0U3RhdGVmdWxEcmF3YWJsZSwgVXRpbHMgfSBmcm9tICcuLi8uLi9pbXBvcnRzLmpzJztcclxuXHJcbi8vIFRPRE86IGNoYW5nZSB0aGlzIGJhc2VkIG9uIG1lbW9yeSBhbmQgcGVyZm9ybWFuY2UgY2hhcmFjdGVyaXN0aWNzIG9mIHRoZSBwbGF0Zm9ybVxyXG5jb25zdCBrZWVwRE9NVGV4dEVsZW1lbnRzID0gdHJ1ZTsgLy8gd2hldGhlciB3ZSBzaG91bGQgcG9vbCBET00gZWxlbWVudHMgZm9yIHRoZSBET00gcmVuZGVyaW5nIHN0YXRlcywgb3Igd2hldGhlciB3ZSBzaG91bGQgZnJlZSB0aGVtIHdoZW4gcG9zc2libGUgZm9yIG1lbW9yeVxyXG5cclxuLy8gc2NyYXRjaCBtYXRyaXggdXNlZCBpbiBET00gcmVuZGVyaW5nXHJcbmNvbnN0IHNjcmF0Y2hNYXRyaXggPSBNYXRyaXgzLnBvb2wuZmV0Y2goKTtcclxuXHJcbmNsYXNzIFRleHRET01EcmF3YWJsZSBleHRlbmRzIFRleHRTdGF0ZWZ1bERyYXdhYmxlKCBET01TZWxmRHJhd2FibGUgKSB7XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHJlbmRlcmVyIC0gUmVuZGVyZXIgYml0bWFzaywgc2VlIFJlbmRlcmVyJ3MgZG9jdW1lbnRhdGlvbiBmb3IgbW9yZSBkZXRhaWxzLlxyXG4gICAqIEBwYXJhbSB7SW5zdGFuY2V9IGluc3RhbmNlXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIHJlbmRlcmVyLCBpbnN0YW5jZSApIHtcclxuICAgIHN1cGVyKCByZW5kZXJlciwgaW5zdGFuY2UgKTtcclxuXHJcbiAgICAvLyBBcHBseSBDU1MgbmVlZGVkIGZvciBmdXR1cmUgQ1NTIHRyYW5zZm9ybXMgdG8gd29yayBwcm9wZXJseS4gSnVzdCBkbyB0aGlzIG9uY2UgZm9yIHBlcmZvcm1hbmNlXHJcbiAgICBVdGlscy5wcmVwYXJlRm9yVHJhbnNmb3JtKCB0aGlzLmRvbUVsZW1lbnQgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwdWJsaWNcclxuICAgKiBAb3ZlcnJpZGVcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSByZW5kZXJlclxyXG4gICAqIEBwYXJhbSB7SW5zdGFuY2V9IGluc3RhbmNlXHJcbiAgICovXHJcbiAgaW5pdGlhbGl6ZSggcmVuZGVyZXIsIGluc3RhbmNlICkge1xyXG4gICAgc3VwZXIuaW5pdGlhbGl6ZSggcmVuZGVyZXIsIGluc3RhbmNlICk7XHJcblxyXG4gICAgLy8gb25seSBjcmVhdGUgZWxlbWVudHMgaWYgd2UgZG9uJ3QgYWxyZWFkeSBoYXZlIHRoZW0gKHdlIHBvb2wgdmlzdWFsIHN0YXRlcyBhbHdheXMsIGFuZCBkZXBlbmRpbmcgb24gdGhlIHBsYXRmb3JtIG1heSBhbHNvIHBvb2wgdGhlIGFjdHVhbCBlbGVtZW50cyB0byBtaW5pbWl6ZVxyXG4gICAgLy8gYWxsb2NhdGlvbiBhbmQgcGVyZm9ybWFuY2UgY29zdHMpXHJcbiAgICBpZiAoICF0aGlzLmRvbUVsZW1lbnQgKSB7XHJcbiAgICAgIC8vIEBwcm90ZWN0ZWQge0hUTUxFbGVtZW50fSAtIE91ciBwcmltYXJ5IERPTSBlbGVtZW50LiBUaGlzIGlzIGV4cG9zZWQgYXMgcGFydCBvZiB0aGUgRE9NU2VsZkRyYXdhYmxlIEFQSS5cclxuICAgICAgdGhpcy5kb21FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicgKTtcclxuICAgICAgdGhpcy5kb21FbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICB0aGlzLmRvbUVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG4gICAgICB0aGlzLmRvbUVsZW1lbnQuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJztcclxuICAgICAgdGhpcy5kb21FbGVtZW50LnN0eWxlLmxlZnQgPSAnMCc7XHJcbiAgICAgIHRoaXMuZG9tRWxlbWVudC5zdHlsZS50b3AgPSAnMCc7XHJcbiAgICAgIHRoaXMuZG9tRWxlbWVudC5zZXRBdHRyaWJ1dGUoICdkaXInLCAnbHRyJyApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlcyBvdXIgRE9NIGVsZW1lbnQgc28gdGhhdCBpdHMgYXBwZWFyYW5jZSBtYXRjaGVzIG91ciBub2RlJ3MgcmVwcmVzZW50YXRpb24uXHJcbiAgICogQHByb3RlY3RlZFxyXG4gICAqXHJcbiAgICogVGhpcyBpbXBsZW1lbnRzIHBhcnQgb2YgdGhlIERPTVNlbGZEcmF3YWJsZSByZXF1aXJlZCBBUEkgZm9yIHN1YnR5cGVzLlxyXG4gICAqL1xyXG4gIHVwZGF0ZURPTSgpIHtcclxuICAgIGNvbnN0IG5vZGUgPSB0aGlzLm5vZGU7XHJcblxyXG4gICAgY29uc3QgZGl2ID0gdGhpcy5kb21FbGVtZW50O1xyXG5cclxuICAgIGlmICggdGhpcy5wYWludERpcnR5ICkge1xyXG4gICAgICBpZiAoIHRoaXMuZGlydHlGb250ICkge1xyXG4gICAgICAgIGRpdi5zdHlsZS5mb250ID0gbm9kZS5nZXRGb250KCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCB0aGlzLmRpcnR5U3Ryb2tlICkge1xyXG4gICAgICAgIGRpdi5zdHlsZS5jb2xvciA9IG5vZGUuZ2V0Q1NTRmlsbCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICggdGhpcy5kaXJ0eUJvdW5kcyApIHsgLy8gVE9ETzogdGhpcyBjb25kaXRpb24gaXMgc2V0IG9uIGludmFsaWRhdGVUZXh0LCBzbyBpdCdzIGFsbW9zdCBhbHdheXMgdHJ1ZT9cclxuICAgICAgICBkaXYuc3R5bGUud2lkdGggPSBgJHtub2RlLmdldFNlbGZCb3VuZHMoKS53aWR0aH1weGA7XHJcbiAgICAgICAgZGl2LnN0eWxlLmhlaWdodCA9IGAke25vZGUuZ2V0U2VsZkJvdW5kcygpLmhlaWdodH1weGA7XHJcbiAgICAgICAgLy8gVE9ETzogZG8gd2UgcmVxdWlyZSB0aGUgalF1ZXJ5IHZlcnNpb25zIGhlcmUsIG9yIGFyZSB0aGV5IHZlc3RpZ2lhbD9cclxuICAgICAgICAvLyAkZGl2LndpZHRoKCBub2RlLmdldFNlbGZCb3VuZHMoKS53aWR0aCApO1xyXG4gICAgICAgIC8vICRkaXYuaGVpZ2h0KCBub2RlLmdldFNlbGZCb3VuZHMoKS5oZWlnaHQgKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIHRoaXMuZGlydHlUZXh0ICkge1xyXG4gICAgICAgIGRpdi50ZXh0Q29udGVudCA9IG5vZGUucmVuZGVyZWRUZXh0O1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCB0aGlzLnRyYW5zZm9ybURpcnR5IHx8IHRoaXMuZGlydHlUZXh0IHx8IHRoaXMuZGlydHlGb250IHx8IHRoaXMuZGlydHlCb3VuZHMgKSB7XHJcbiAgICAgIC8vIHNoaWZ0IHRoZSB0ZXh0IHZlcnRpY2FsbHksIHBvc3RtdWx0aXBsaWVkIHdpdGggdGhlIGVudGlyZSB0cmFuc2Zvcm0uXHJcbiAgICAgIGNvbnN0IHlPZmZzZXQgPSBub2RlLmdldFNlbGZCb3VuZHMoKS5taW5ZO1xyXG4gICAgICBzY3JhdGNoTWF0cml4LnNldCggdGhpcy5nZXRUcmFuc2Zvcm1NYXRyaXgoKSApO1xyXG4gICAgICBjb25zdCB0cmFuc2xhdGlvbiA9IE1hdHJpeDMudHJhbnNsYXRpb24oIDAsIHlPZmZzZXQgKTtcclxuICAgICAgc2NyYXRjaE1hdHJpeC5tdWx0aXBseU1hdHJpeCggdHJhbnNsYXRpb24gKTtcclxuICAgICAgdHJhbnNsYXRpb24uZnJlZVRvUG9vbCgpO1xyXG4gICAgICBVdGlscy5hcHBseVByZXBhcmVkVHJhbnNmb3JtKCBzY3JhdGNoTWF0cml4LCBkaXYgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjbGVhciBhbGwgb2YgdGhlIGRpcnR5IGZsYWdzXHJcbiAgICB0aGlzLnNldFRvQ2xlYW5TdGF0ZSgpO1xyXG4gICAgdGhpcy5jbGVhblBhaW50YWJsZVN0YXRlKCk7XHJcbiAgICB0aGlzLnRyYW5zZm9ybURpcnR5ID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEaXNwb3NlcyB0aGUgZHJhd2FibGUuXHJcbiAgICogQHB1YmxpY1xyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqL1xyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICBpZiAoICFrZWVwRE9NVGV4dEVsZW1lbnRzICkge1xyXG4gICAgICAvLyBjbGVhciB0aGUgcmVmZXJlbmNlc1xyXG4gICAgICB0aGlzLmRvbUVsZW1lbnQgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcbn1cclxuXHJcbnNjZW5lcnkucmVnaXN0ZXIoICdUZXh0RE9NRHJhd2FibGUnLCBUZXh0RE9NRHJhd2FibGUgKTtcclxuXHJcblBvb2xhYmxlLm1peEludG8oIFRleHRET01EcmF3YWJsZSApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgVGV4dERPTURyYXdhYmxlOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxPQUFPLE1BQU0sK0JBQStCO0FBQ25ELE9BQU9DLFFBQVEsTUFBTSxzQ0FBc0M7QUFDM0QsU0FBU0MsZUFBZSxFQUFFQyxPQUFPLEVBQUVDLG9CQUFvQixFQUFFQyxLQUFLLFFBQVEsa0JBQWtCOztBQUV4RjtBQUNBLE1BQU1DLG1CQUFtQixHQUFHLElBQUksQ0FBQyxDQUFDOztBQUVsQztBQUNBLE1BQU1DLGFBQWEsR0FBR1AsT0FBTyxDQUFDUSxJQUFJLENBQUNDLEtBQUssQ0FBQyxDQUFDO0FBRTFD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