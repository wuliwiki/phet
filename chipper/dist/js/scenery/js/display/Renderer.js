// Copyright 2013-2021, University of Colorado Boulder

/**
 * An enumeration of different back-end technologies used for rendering. It also essentially represents the API that
 * nodes need to implement to be used with this specified back-end.
 *
 * We use a bitmask to represent renderers currently, in a way that can be logically-ANDed in order to obtain
 * information about "what renderer can support all of these Nodes?"
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import { scenery } from '../imports.js';

// now it's a namespace
const Renderer = {};
scenery.register('Renderer', Renderer);

//OHTWO TODO: rename to take advantage of lack of deprecated names? (remove bitmask prefix)

/*---------------------------------------------------------------------------*
 * Renderer bitmask flags
 *---------------------------------------------------------------------------*/

Renderer.numActiveRenderers = 4;
Renderer.bitsPerRenderer = 5;
Renderer.bitmaskRendererArea = 0x00000FF;
Renderer.bitmaskCurrentRendererArea = 0x000000F;
Renderer.bitmaskLacksOffset = 0x10000;
Renderer.bitmaskLacksShift = 16; // number of bits between the main renderer bitmask and the "lacks" variety
Renderer.bitmaskNodeDefault = Renderer.bitmaskRendererArea;
Renderer.bitmaskCanvas = 0x0000001;
Renderer.bitmaskSVG = 0x0000002;
Renderer.bitmaskDOM = 0x0000004;
Renderer.bitmaskWebGL = 0x0000008;
// 10, 20, 40, 80 reserved for future renderers NOTE: update bitmaskCurrentRendererArea/numActiveRenderers if they are added/removed

// summary bits (for RendererSummary):
Renderer.bitmaskSingleCanvas = 0x100;
Renderer.bitmaskSingleSVG = 0x200;
// reserved gap 0x400, 0x800, 0x1000, 0x2000, 0x4000, 0x8000 for future renderer-specific single information
Renderer.bitmaskNotPainted = 0x1000;
Renderer.bitmaskBoundsValid = 0x2000;
Renderer.bitmaskNoPDOM = 0x4000;
// summary bits for whether a renderer could be potentially used to display a Node.
Renderer.bitmaskLacksCanvas = Renderer.bitmaskCanvas << Renderer.bitmaskLacksShift; // 0x10000
Renderer.bitmaskLacksSVG = Renderer.bitmaskSVG << Renderer.bitmaskLacksShift; // 0x20000
Renderer.bitmaskLacksDOM = Renderer.bitmaskDOM << Renderer.bitmaskLacksShift; // 0x40000
Renderer.bitmaskLacksWebGL = Renderer.bitmaskWebGL << Renderer.bitmaskLacksShift; // 0x80000
// reserved gap 0x10000, 0x20000, 0x40000, 0x80000 for future renderers

Renderer.isCanvas = function (bitmask) {
  return (bitmask & Renderer.bitmaskCanvas) !== 0;
};
Renderer.isSVG = function (bitmask) {
  return (bitmask & Renderer.bitmaskSVG) !== 0;
};
Renderer.isDOM = function (bitmask) {
  return (bitmask & Renderer.bitmaskDOM) !== 0;
};
Renderer.isWebGL = function (bitmask) {
  return (bitmask & Renderer.bitmaskWebGL) !== 0;
};
const rendererMap = {
  canvas: Renderer.bitmaskCanvas,
  svg: Renderer.bitmaskSVG,
  dom: Renderer.bitmaskDOM,
  webgl: Renderer.bitmaskWebGL
};
Renderer.fromName = function (name) {
  return rendererMap[name];
};

// returns the part of the bitmask that should contain only Canvas/SVG/DOM/WebGL flags
//OHTWO TODO: use this instead of direct access to bitmaskRendererArea
Renderer.stripBitmask = function (bitmask) {
  return bitmask & Renderer.bitmaskRendererArea;
};
Renderer.createOrderBitmask = function (firstRenderer, secondRenderer, thirdRenderer, fourthRenderer) {
  firstRenderer = firstRenderer || 0;
  secondRenderer = secondRenderer || 0;
  thirdRenderer = thirdRenderer || 0;
  fourthRenderer = fourthRenderer || 0;

  // uses 20 bits now with 4 renderers
  return firstRenderer | secondRenderer << 5 | thirdRenderer << 10 | fourthRenderer << 15;
};
// bitmaskOrderN with n=0 is bitmaskOrderFirst, n=1 is bitmaskOrderSecond, etc.
Renderer.bitmaskOrder = function (bitmask, n) {
  // Normally the condition here shouldn't be needed, but Safari seemed to cause a logic error when this function
  // gets inlined elsewhere if n=0. See https://github.com/phetsims/scenery/issues/481 and
  // https://github.com/phetsims/bending-light/issues/259.
  if (n > 0) {
    bitmask = bitmask >> 5 * n;
  }
  return bitmask & Renderer.bitmaskCurrentRendererArea;
};
Renderer.bitmaskOrderFirst = function (bitmask) {
  return bitmask & Renderer.bitmaskCurrentRendererArea;
};
Renderer.bitmaskOrderSecond = function (bitmask) {
  return bitmask >> 5 & Renderer.bitmaskCurrentRendererArea;
};
Renderer.bitmaskOrderThird = function (bitmask) {
  return bitmask >> 10 & Renderer.bitmaskCurrentRendererArea;
};
Renderer.bitmaskOrderFourth = function (bitmask) {
  return bitmask >> 15 & Renderer.bitmaskCurrentRendererArea;
};
Renderer.pushOrderBitmask = function (bitmask, renderer) {
  assert && assert(typeof bitmask === 'number');
  assert && assert(typeof renderer === 'number');
  let rendererToInsert = renderer;
  const totalBits = Renderer.bitsPerRenderer * Renderer.numActiveRenderers;
  for (let i = 0; i <= totalBits; i += Renderer.bitsPerRenderer) {
    const currentRenderer = bitmask >> i & Renderer.bitmaskCurrentRendererArea;
    if (currentRenderer === rendererToInsert) {
      return bitmask;
    } else if (currentRenderer === 0) {
      // place the renderer and exit
      bitmask = bitmask | rendererToInsert << i;
      return bitmask;
    } else {
      // clear out that slot
      bitmask = bitmask & ~(Renderer.bitmaskCurrentRendererArea << i);

      // place in the renderer to insert
      bitmask = bitmask | rendererToInsert << i;
      rendererToInsert = currentRenderer;
    }

    // don't walk over and re-place our initial renderer
    if (rendererToInsert === renderer) {
      return bitmask;
    }
  }
  throw new Error('pushOrderBitmask overflow');
};
Renderer.createSelfDrawable = function (instance, node, selfRenderer, fittable) {
  let drawable;
  if (Renderer.isCanvas(selfRenderer)) {
    drawable = node.createCanvasDrawable(selfRenderer, instance);
  } else if (Renderer.isSVG(selfRenderer)) {
    drawable = node.createSVGDrawable(selfRenderer, instance);
  } else if (Renderer.isDOM(selfRenderer)) {
    drawable = node.createDOMDrawable(selfRenderer, instance);
  } else if (Renderer.isWebGL(selfRenderer)) {
    drawable = node.createWebGLDrawable(selfRenderer, instance);
  } else {
    throw new Error(`Unrecognized renderer: ${selfRenderer}`);
  }

  // Check to make sure that all of the drawables have the required mark-dirty methods available.
  if (assert) {
    _.each(node.drawableMarkFlags, flag => {
      const methodName = `markDirty${flag[0].toUpperCase()}${flag.slice(1)}`;
      assert(typeof drawable[methodName] === 'function', `Did not find ${methodName}`);
    });
  }

  // Initialize its fittable flag
  drawable.setFittable(fittable);
  return drawable;
};

/*---------------------------------------------------------------------------*
 * WebGL Renderer type enumeration
 *----------------------------------------------------------------------------*/
Renderer.webglCustom = 0x1;
Renderer.webglTexturedTriangles = 0x2;
Renderer.webglVertexColorPolygons = 0x3;
export default Renderer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzY2VuZXJ5IiwiUmVuZGVyZXIiLCJyZWdpc3RlciIsIm51bUFjdGl2ZVJlbmRlcmVycyIsImJpdHNQZXJSZW5kZXJlciIsImJpdG1hc2tSZW5kZXJlckFyZWEiLCJiaXRtYXNrQ3VycmVudFJlbmRlcmVyQXJlYSIsImJpdG1hc2tMYWNrc09mZnNldCIsImJpdG1hc2tMYWNrc1NoaWZ0IiwiYml0bWFza05vZGVEZWZhdWx0IiwiYml0bWFza0NhbnZhcyIsImJpdG1hc2tTVkciLCJiaXRtYXNrRE9NIiwiYml0bWFza1dlYkdMIiwiYml0bWFza1NpbmdsZUNhbnZhcyIsImJpdG1hc2tTaW5nbGVTVkciLCJiaXRtYXNrTm90UGFpbnRlZCIsImJpdG1hc2tCb3VuZHNWYWxpZCIsImJpdG1hc2tOb1BET00iLCJiaXRtYXNrTGFja3NDYW52YXMiLCJiaXRtYXNrTGFja3NTVkciLCJiaXRtYXNrTGFja3NET00iLCJiaXRtYXNrTGFja3NXZWJHTCIsImlzQ2FudmFzIiwiYml0bWFzayIsImlzU1ZHIiwiaXNET00iLCJpc1dlYkdMIiwicmVuZGVyZXJNYXAiLCJjYW52YXMiLCJzdmciLCJkb20iLCJ3ZWJnbCIsImZyb21OYW1lIiwibmFtZSIsInN0cmlwQml0bWFzayIsImNyZWF0ZU9yZGVyQml0bWFzayIsImZpcnN0UmVuZGVyZXIiLCJzZWNvbmRSZW5kZXJlciIsInRoaXJkUmVuZGVyZXIiLCJmb3VydGhSZW5kZXJlciIsImJpdG1hc2tPcmRlciIsIm4iLCJiaXRtYXNrT3JkZXJGaXJzdCIsImJpdG1hc2tPcmRlclNlY29uZCIsImJpdG1hc2tPcmRlclRoaXJkIiwiYml0bWFza09yZGVyRm91cnRoIiwicHVzaE9yZGVyQml0bWFzayIsInJlbmRlcmVyIiwiYXNzZXJ0IiwicmVuZGVyZXJUb0luc2VydCIsInRvdGFsQml0cyIsImkiLCJjdXJyZW50UmVuZGVyZXIiLCJFcnJvciIsImNyZWF0ZVNlbGZEcmF3YWJsZSIsImluc3RhbmNlIiwibm9kZSIsInNlbGZSZW5kZXJlciIsImZpdHRhYmxlIiwiZHJhd2FibGUiLCJjcmVhdGVDYW52YXNEcmF3YWJsZSIsImNyZWF0ZVNWR0RyYXdhYmxlIiwiY3JlYXRlRE9NRHJhd2FibGUiLCJjcmVhdGVXZWJHTERyYXdhYmxlIiwiXyIsImVhY2giLCJkcmF3YWJsZU1hcmtGbGFncyIsImZsYWciLCJtZXRob2ROYW1lIiwidG9VcHBlckNhc2UiLCJzbGljZSIsInNldEZpdHRhYmxlIiwid2ViZ2xDdXN0b20iLCJ3ZWJnbFRleHR1cmVkVHJpYW5nbGVzIiwid2ViZ2xWZXJ0ZXhDb2xvclBvbHlnb25zIl0sInNvdXJjZXMiOlsiUmVuZGVyZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTMtMjAyMSwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogQW4gZW51bWVyYXRpb24gb2YgZGlmZmVyZW50IGJhY2stZW5kIHRlY2hub2xvZ2llcyB1c2VkIGZvciByZW5kZXJpbmcuIEl0IGFsc28gZXNzZW50aWFsbHkgcmVwcmVzZW50cyB0aGUgQVBJIHRoYXRcclxuICogbm9kZXMgbmVlZCB0byBpbXBsZW1lbnQgdG8gYmUgdXNlZCB3aXRoIHRoaXMgc3BlY2lmaWVkIGJhY2stZW5kLlxyXG4gKlxyXG4gKiBXZSB1c2UgYSBiaXRtYXNrIHRvIHJlcHJlc2VudCByZW5kZXJlcnMgY3VycmVudGx5LCBpbiBhIHdheSB0aGF0IGNhbiBiZSBsb2dpY2FsbHktQU5EZWQgaW4gb3JkZXIgdG8gb2J0YWluXHJcbiAqIGluZm9ybWF0aW9uIGFib3V0IFwid2hhdCByZW5kZXJlciBjYW4gc3VwcG9ydCBhbGwgb2YgdGhlc2UgTm9kZXM/XCJcclxuICpcclxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IHNjZW5lcnkgfSBmcm9tICcuLi9pbXBvcnRzLmpzJztcclxuXHJcbi8vIG5vdyBpdCdzIGEgbmFtZXNwYWNlXHJcbmNvbnN0IFJlbmRlcmVyID0ge307XHJcbnNjZW5lcnkucmVnaXN0ZXIoICdSZW5kZXJlcicsIFJlbmRlcmVyICk7XHJcblxyXG4vL09IVFdPIFRPRE86IHJlbmFtZSB0byB0YWtlIGFkdmFudGFnZSBvZiBsYWNrIG9mIGRlcHJlY2F0ZWQgbmFtZXM/IChyZW1vdmUgYml0bWFzayBwcmVmaXgpXHJcblxyXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSpcclxuICogUmVuZGVyZXIgYml0bWFzayBmbGFnc1xyXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG5SZW5kZXJlci5udW1BY3RpdmVSZW5kZXJlcnMgPSA0O1xyXG5SZW5kZXJlci5iaXRzUGVyUmVuZGVyZXIgPSA1O1xyXG5SZW5kZXJlci5iaXRtYXNrUmVuZGVyZXJBcmVhID0gMHgwMDAwMEZGO1xyXG5SZW5kZXJlci5iaXRtYXNrQ3VycmVudFJlbmRlcmVyQXJlYSA9IDB4MDAwMDAwRjtcclxuUmVuZGVyZXIuYml0bWFza0xhY2tzT2Zmc2V0ID0gMHgxMDAwMDtcclxuUmVuZGVyZXIuYml0bWFza0xhY2tzU2hpZnQgPSAxNjsgLy8gbnVtYmVyIG9mIGJpdHMgYmV0d2VlbiB0aGUgbWFpbiByZW5kZXJlciBiaXRtYXNrIGFuZCB0aGUgXCJsYWNrc1wiIHZhcmlldHlcclxuUmVuZGVyZXIuYml0bWFza05vZGVEZWZhdWx0ID0gUmVuZGVyZXIuYml0bWFza1JlbmRlcmVyQXJlYTtcclxuXHJcblJlbmRlcmVyLmJpdG1hc2tDYW52YXMgPSAweDAwMDAwMDE7XHJcblJlbmRlcmVyLmJpdG1hc2tTVkcgPSAweDAwMDAwMDI7XHJcblJlbmRlcmVyLmJpdG1hc2tET00gPSAweDAwMDAwMDQ7XHJcblJlbmRlcmVyLmJpdG1hc2tXZWJHTCA9IDB4MDAwMDAwODtcclxuLy8gMTAsIDIwLCA0MCwgODAgcmVzZXJ2ZWQgZm9yIGZ1dHVyZSByZW5kZXJlcnMgTk9URTogdXBkYXRlIGJpdG1hc2tDdXJyZW50UmVuZGVyZXJBcmVhL251bUFjdGl2ZVJlbmRlcmVycyBpZiB0aGV5IGFyZSBhZGRlZC9yZW1vdmVkXHJcblxyXG4vLyBzdW1tYXJ5IGJpdHMgKGZvciBSZW5kZXJlclN1bW1hcnkpOlxyXG5SZW5kZXJlci5iaXRtYXNrU2luZ2xlQ2FudmFzID0gMHgxMDA7XHJcblJlbmRlcmVyLmJpdG1hc2tTaW5nbGVTVkcgPSAweDIwMDtcclxuLy8gcmVzZXJ2ZWQgZ2FwIDB4NDAwLCAweDgwMCwgMHgxMDAwLCAweDIwMDAsIDB4NDAwMCwgMHg4MDAwIGZvciBmdXR1cmUgcmVuZGVyZXItc3BlY2lmaWMgc2luZ2xlIGluZm9ybWF0aW9uXHJcblJlbmRlcmVyLmJpdG1hc2tOb3RQYWludGVkID0gMHgxMDAwO1xyXG5SZW5kZXJlci5iaXRtYXNrQm91bmRzVmFsaWQgPSAweDIwMDA7XHJcblJlbmRlcmVyLmJpdG1hc2tOb1BET00gPSAweDQwMDA7XHJcbi8vIHN1bW1hcnkgYml0cyBmb3Igd2hldGhlciBhIHJlbmRlcmVyIGNvdWxkIGJlIHBvdGVudGlhbGx5IHVzZWQgdG8gZGlzcGxheSBhIE5vZGUuXHJcblJlbmRlcmVyLmJpdG1hc2tMYWNrc0NhbnZhcyA9IFJlbmRlcmVyLmJpdG1hc2tDYW52YXMgPDwgUmVuZGVyZXIuYml0bWFza0xhY2tzU2hpZnQ7IC8vIDB4MTAwMDBcclxuUmVuZGVyZXIuYml0bWFza0xhY2tzU1ZHID0gUmVuZGVyZXIuYml0bWFza1NWRyA8PCBSZW5kZXJlci5iaXRtYXNrTGFja3NTaGlmdDsgLy8gMHgyMDAwMFxyXG5SZW5kZXJlci5iaXRtYXNrTGFja3NET00gPSBSZW5kZXJlci5iaXRtYXNrRE9NIDw8IFJlbmRlcmVyLmJpdG1hc2tMYWNrc1NoaWZ0OyAvLyAweDQwMDAwXHJcblJlbmRlcmVyLmJpdG1hc2tMYWNrc1dlYkdMID0gUmVuZGVyZXIuYml0bWFza1dlYkdMIDw8IFJlbmRlcmVyLmJpdG1hc2tMYWNrc1NoaWZ0OyAvLyAweDgwMDAwXHJcbi8vIHJlc2VydmVkIGdhcCAweDEwMDAwLCAweDIwMDAwLCAweDQwMDAwLCAweDgwMDAwIGZvciBmdXR1cmUgcmVuZGVyZXJzXHJcblxyXG5SZW5kZXJlci5pc0NhbnZhcyA9IGZ1bmN0aW9uKCBiaXRtYXNrICkge1xyXG4gIHJldHVybiAoIGJpdG1hc2sgJiBSZW5kZXJlci5iaXRtYXNrQ2FudmFzICkgIT09IDA7XHJcbn07XHJcblJlbmRlcmVyLmlzU1ZHID0gZnVuY3Rpb24oIGJpdG1hc2sgKSB7XHJcbiAgcmV0dXJuICggYml0bWFzayAmIFJlbmRlcmVyLmJpdG1hc2tTVkcgKSAhPT0gMDtcclxufTtcclxuUmVuZGVyZXIuaXNET00gPSBmdW5jdGlvbiggYml0bWFzayApIHtcclxuICByZXR1cm4gKCBiaXRtYXNrICYgUmVuZGVyZXIuYml0bWFza0RPTSApICE9PSAwO1xyXG59O1xyXG5SZW5kZXJlci5pc1dlYkdMID0gZnVuY3Rpb24oIGJpdG1hc2sgKSB7XHJcbiAgcmV0dXJuICggYml0bWFzayAmIFJlbmRlcmVyLmJpdG1hc2tXZWJHTCApICE9PSAwO1xyXG59O1xyXG5cclxuY29uc3QgcmVuZGVyZXJNYXAgPSB7XHJcbiAgY2FudmFzOiBSZW5kZXJlci5iaXRtYXNrQ2FudmFzLFxyXG4gIHN2ZzogUmVuZGVyZXIuYml0bWFza1NWRyxcclxuICBkb206IFJlbmRlcmVyLmJpdG1hc2tET00sXHJcbiAgd2ViZ2w6IFJlbmRlcmVyLmJpdG1hc2tXZWJHTFxyXG59O1xyXG5SZW5kZXJlci5mcm9tTmFtZSA9IGZ1bmN0aW9uKCBuYW1lICkge1xyXG4gIHJldHVybiByZW5kZXJlck1hcFsgbmFtZSBdO1xyXG59O1xyXG5cclxuLy8gcmV0dXJucyB0aGUgcGFydCBvZiB0aGUgYml0bWFzayB0aGF0IHNob3VsZCBjb250YWluIG9ubHkgQ2FudmFzL1NWRy9ET00vV2ViR0wgZmxhZ3NcclxuLy9PSFRXTyBUT0RPOiB1c2UgdGhpcyBpbnN0ZWFkIG9mIGRpcmVjdCBhY2Nlc3MgdG8gYml0bWFza1JlbmRlcmVyQXJlYVxyXG5SZW5kZXJlci5zdHJpcEJpdG1hc2sgPSBmdW5jdGlvbiggYml0bWFzayApIHtcclxuICByZXR1cm4gYml0bWFzayAmIFJlbmRlcmVyLmJpdG1hc2tSZW5kZXJlckFyZWE7XHJcbn07XHJcblxyXG5SZW5kZXJlci5jcmVhdGVPcmRlckJpdG1hc2sgPSBmdW5jdGlvbiggZmlyc3RSZW5kZXJlciwgc2Vjb25kUmVuZGVyZXIsIHRoaXJkUmVuZGVyZXIsIGZvdXJ0aFJlbmRlcmVyICkge1xyXG4gIGZpcnN0UmVuZGVyZXIgPSBmaXJzdFJlbmRlcmVyIHx8IDA7XHJcbiAgc2Vjb25kUmVuZGVyZXIgPSBzZWNvbmRSZW5kZXJlciB8fCAwO1xyXG4gIHRoaXJkUmVuZGVyZXIgPSB0aGlyZFJlbmRlcmVyIHx8IDA7XHJcbiAgZm91cnRoUmVuZGVyZXIgPSBmb3VydGhSZW5kZXJlciB8fCAwO1xyXG5cclxuICAvLyB1c2VzIDIwIGJpdHMgbm93IHdpdGggNCByZW5kZXJlcnNcclxuICByZXR1cm4gZmlyc3RSZW5kZXJlciB8XHJcbiAgICAgICAgICggc2Vjb25kUmVuZGVyZXIgPDwgNSApIHxcclxuICAgICAgICAgKCB0aGlyZFJlbmRlcmVyIDw8IDEwICkgfFxyXG4gICAgICAgICAoIGZvdXJ0aFJlbmRlcmVyIDw8IDE1ICk7XHJcbn07XHJcbi8vIGJpdG1hc2tPcmRlck4gd2l0aCBuPTAgaXMgYml0bWFza09yZGVyRmlyc3QsIG49MSBpcyBiaXRtYXNrT3JkZXJTZWNvbmQsIGV0Yy5cclxuUmVuZGVyZXIuYml0bWFza09yZGVyID0gZnVuY3Rpb24oIGJpdG1hc2ssIG4gKSB7XHJcbiAgLy8gTm9ybWFsbHkgdGhlIGNvbmRpdGlvbiBoZXJlIHNob3VsZG4ndCBiZSBuZWVkZWQsIGJ1dCBTYWZhcmkgc2VlbWVkIHRvIGNhdXNlIGEgbG9naWMgZXJyb3Igd2hlbiB0aGlzIGZ1bmN0aW9uXHJcbiAgLy8gZ2V0cyBpbmxpbmVkIGVsc2V3aGVyZSBpZiBuPTAuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvc2NlbmVyeS9pc3N1ZXMvNDgxIGFuZFxyXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9iZW5kaW5nLWxpZ2h0L2lzc3Vlcy8yNTkuXHJcbiAgaWYgKCBuID4gMCApIHtcclxuICAgIGJpdG1hc2sgPSBiaXRtYXNrID4+ICggNSAqIG4gKTtcclxuICB9XHJcbiAgcmV0dXJuIGJpdG1hc2sgJiBSZW5kZXJlci5iaXRtYXNrQ3VycmVudFJlbmRlcmVyQXJlYTtcclxufTtcclxuUmVuZGVyZXIuYml0bWFza09yZGVyRmlyc3QgPSBmdW5jdGlvbiggYml0bWFzayApIHtcclxuICByZXR1cm4gYml0bWFzayAmIFJlbmRlcmVyLmJpdG1hc2tDdXJyZW50UmVuZGVyZXJBcmVhO1xyXG59O1xyXG5SZW5kZXJlci5iaXRtYXNrT3JkZXJTZWNvbmQgPSBmdW5jdGlvbiggYml0bWFzayApIHtcclxuICByZXR1cm4gKCBiaXRtYXNrID4+IDUgKSAmIFJlbmRlcmVyLmJpdG1hc2tDdXJyZW50UmVuZGVyZXJBcmVhO1xyXG59O1xyXG5SZW5kZXJlci5iaXRtYXNrT3JkZXJUaGlyZCA9IGZ1bmN0aW9uKCBiaXRtYXNrICkge1xyXG4gIHJldHVybiAoIGJpdG1hc2sgPj4gMTAgKSAmIFJlbmRlcmVyLmJpdG1hc2tDdXJyZW50UmVuZGVyZXJBcmVhO1xyXG59O1xyXG5SZW5kZXJlci5iaXRtYXNrT3JkZXJGb3VydGggPSBmdW5jdGlvbiggYml0bWFzayApIHtcclxuICByZXR1cm4gKCBiaXRtYXNrID4+IDE1ICkgJiBSZW5kZXJlci5iaXRtYXNrQ3VycmVudFJlbmRlcmVyQXJlYTtcclxufTtcclxuUmVuZGVyZXIucHVzaE9yZGVyQml0bWFzayA9IGZ1bmN0aW9uKCBiaXRtYXNrLCByZW5kZXJlciApIHtcclxuICBhc3NlcnQgJiYgYXNzZXJ0KCB0eXBlb2YgYml0bWFzayA9PT0gJ251bWJlcicgKTtcclxuICBhc3NlcnQgJiYgYXNzZXJ0KCB0eXBlb2YgcmVuZGVyZXIgPT09ICdudW1iZXInICk7XHJcbiAgbGV0IHJlbmRlcmVyVG9JbnNlcnQgPSByZW5kZXJlcjtcclxuICBjb25zdCB0b3RhbEJpdHMgPSBSZW5kZXJlci5iaXRzUGVyUmVuZGVyZXIgKiBSZW5kZXJlci5udW1BY3RpdmVSZW5kZXJlcnM7XHJcbiAgZm9yICggbGV0IGkgPSAwOyBpIDw9IHRvdGFsQml0czsgaSArPSBSZW5kZXJlci5iaXRzUGVyUmVuZGVyZXIgKSB7XHJcbiAgICBjb25zdCBjdXJyZW50UmVuZGVyZXIgPSAoIGJpdG1hc2sgPj4gaSApICYgUmVuZGVyZXIuYml0bWFza0N1cnJlbnRSZW5kZXJlckFyZWE7XHJcbiAgICBpZiAoIGN1cnJlbnRSZW5kZXJlciA9PT0gcmVuZGVyZXJUb0luc2VydCApIHtcclxuICAgICAgcmV0dXJuIGJpdG1hc2s7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICggY3VycmVudFJlbmRlcmVyID09PSAwICkge1xyXG4gICAgICAvLyBwbGFjZSB0aGUgcmVuZGVyZXIgYW5kIGV4aXRcclxuICAgICAgYml0bWFzayA9IGJpdG1hc2sgfCAoIHJlbmRlcmVyVG9JbnNlcnQgPDwgaSApO1xyXG4gICAgICByZXR1cm4gYml0bWFzaztcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAvLyBjbGVhciBvdXQgdGhhdCBzbG90XHJcbiAgICAgIGJpdG1hc2sgPSAoIGJpdG1hc2sgJiB+KCBSZW5kZXJlci5iaXRtYXNrQ3VycmVudFJlbmRlcmVyQXJlYSA8PCBpICkgKTtcclxuXHJcbiAgICAgIC8vIHBsYWNlIGluIHRoZSByZW5kZXJlciB0byBpbnNlcnRcclxuICAgICAgYml0bWFzayA9IGJpdG1hc2sgfCAoIHJlbmRlcmVyVG9JbnNlcnQgPDwgaSApO1xyXG5cclxuICAgICAgcmVuZGVyZXJUb0luc2VydCA9IGN1cnJlbnRSZW5kZXJlcjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBkb24ndCB3YWxrIG92ZXIgYW5kIHJlLXBsYWNlIG91ciBpbml0aWFsIHJlbmRlcmVyXHJcbiAgICBpZiAoIHJlbmRlcmVyVG9JbnNlcnQgPT09IHJlbmRlcmVyICkge1xyXG4gICAgICByZXR1cm4gYml0bWFzaztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHRocm93IG5ldyBFcnJvciggJ3B1c2hPcmRlckJpdG1hc2sgb3ZlcmZsb3cnICk7XHJcbn07XHJcblxyXG5SZW5kZXJlci5jcmVhdGVTZWxmRHJhd2FibGUgPSBmdW5jdGlvbiggaW5zdGFuY2UsIG5vZGUsIHNlbGZSZW5kZXJlciwgZml0dGFibGUgKSB7XHJcbiAgbGV0IGRyYXdhYmxlO1xyXG5cclxuICBpZiAoIFJlbmRlcmVyLmlzQ2FudmFzKCBzZWxmUmVuZGVyZXIgKSApIHtcclxuICAgIGRyYXdhYmxlID0gbm9kZS5jcmVhdGVDYW52YXNEcmF3YWJsZSggc2VsZlJlbmRlcmVyLCBpbnN0YW5jZSApO1xyXG4gIH1cclxuICBlbHNlIGlmICggUmVuZGVyZXIuaXNTVkcoIHNlbGZSZW5kZXJlciApICkge1xyXG4gICAgZHJhd2FibGUgPSBub2RlLmNyZWF0ZVNWR0RyYXdhYmxlKCBzZWxmUmVuZGVyZXIsIGluc3RhbmNlICk7XHJcbiAgfVxyXG4gIGVsc2UgaWYgKCBSZW5kZXJlci5pc0RPTSggc2VsZlJlbmRlcmVyICkgKSB7XHJcbiAgICBkcmF3YWJsZSA9IG5vZGUuY3JlYXRlRE9NRHJhd2FibGUoIHNlbGZSZW5kZXJlciwgaW5zdGFuY2UgKTtcclxuICB9XHJcbiAgZWxzZSBpZiAoIFJlbmRlcmVyLmlzV2ViR0woIHNlbGZSZW5kZXJlciApICkge1xyXG4gICAgZHJhd2FibGUgPSBub2RlLmNyZWF0ZVdlYkdMRHJhd2FibGUoIHNlbGZSZW5kZXJlciwgaW5zdGFuY2UgKTtcclxuICB9XHJcbiAgZWxzZSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoIGBVbnJlY29nbml6ZWQgcmVuZGVyZXI6ICR7c2VsZlJlbmRlcmVyfWAgKTtcclxuICB9XHJcblxyXG4gIC8vIENoZWNrIHRvIG1ha2Ugc3VyZSB0aGF0IGFsbCBvZiB0aGUgZHJhd2FibGVzIGhhdmUgdGhlIHJlcXVpcmVkIG1hcmstZGlydHkgbWV0aG9kcyBhdmFpbGFibGUuXHJcbiAgaWYgKCBhc3NlcnQgKSB7XHJcbiAgICBfLmVhY2goIG5vZGUuZHJhd2FibGVNYXJrRmxhZ3MsIGZsYWcgPT4ge1xyXG4gICAgICBjb25zdCBtZXRob2ROYW1lID0gYG1hcmtEaXJ0eSR7ZmxhZ1sgMCBdLnRvVXBwZXJDYXNlKCl9JHtmbGFnLnNsaWNlKCAxICl9YDtcclxuICAgICAgYXNzZXJ0KCB0eXBlb2YgZHJhd2FibGVbIG1ldGhvZE5hbWUgXSA9PT0gJ2Z1bmN0aW9uJywgYERpZCBub3QgZmluZCAke21ldGhvZE5hbWV9YCApO1xyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcbiAgLy8gSW5pdGlhbGl6ZSBpdHMgZml0dGFibGUgZmxhZ1xyXG4gIGRyYXdhYmxlLnNldEZpdHRhYmxlKCBmaXR0YWJsZSApO1xyXG5cclxuICByZXR1cm4gZHJhd2FibGU7XHJcbn07XHJcblxyXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSpcclxuICogV2ViR0wgUmVuZGVyZXIgdHlwZSBlbnVtZXJhdGlvblxyXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5SZW5kZXJlci53ZWJnbEN1c3RvbSA9IDB4MTtcclxuUmVuZGVyZXIud2ViZ2xUZXh0dXJlZFRyaWFuZ2xlcyA9IDB4MjtcclxuUmVuZGVyZXIud2ViZ2xWZXJ0ZXhDb2xvclBvbHlnb25zID0gMHgzO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgUmVuZGVyZXI7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FB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