// Copyright 2018-2022, University of Colorado Boulder

/**
 * CollisionCounter counts collisions between particles and the walls of a container.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import BooleanProperty from '../../../../axon/js/BooleanProperty.js';
import NumberProperty from '../../../../axon/js/NumberProperty.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import Vector2Property from '../../../../dot/js/Vector2Property.js';
import optionize from '../../../../phet-core/js/optionize.js';
import gasProperties from '../../gasProperties.js';
export default class CollisionCounter {
  // position of the collision counter, in view coordinates

  // the number of particle-container collisions

  // whether the collision counter is running

  // time that the counter has been running, in ps

  // whether the collision counter is visible

  // valid values for samplePeriodProperty, in ps

  // Sample period for counting collisions
  // Actual sample period will be close to this value, but not exact (confirmed OK with @arouinfar).
  constructor(collisionDetector, providedOptions) {
    const options = optionize()({
      // SelfOptions
      position: Vector2.ZERO,
      visible: false
    }, providedOptions);
    this.collisionDetector = collisionDetector;
    this.positionProperty = new Vector2Property(options.position, {
      tandem: options.tandem.createTandem('positionProperty')
    });
    this.numberOfCollisionsProperty = new NumberProperty(0, {
      numberType: 'Integer',
      isValidValue: value => value >= 0,
      tandem: options.tandem.createTandem('numberOfCollisionsProperty')
    });
    this.isRunningProperty = new BooleanProperty(false, {
      tandem: options.tandem.createTandem('isRunningProperty')
    });
    this.timeRunning = 0;
    this.visibleProperty = new BooleanProperty(options.visible, {
      tandem: options.tandem.createTandem('visibleProperty')
    });
    this.samplePeriods = [5, 10, 20];
    this.samplePeriodProperty = new NumberProperty(this.samplePeriods[1], {
      numberType: 'Integer',
      validValues: this.samplePeriods,
      units: 'ps',
      tandem: options.tandem.createTandem('samplePeriodProperty')
    });

    // Changing the running state resets the collision count.
    this.isRunningProperty.link(() => this.resetCount());

    // Changing visibility or sample period stops the counter and resets the collision count.
    this.visibleProperty.link(() => this.stopAndResetCount());
    this.samplePeriodProperty.link(() => this.stopAndResetCount());
  }
  dispose() {
    assert && assert(false, 'dispose is not supported, exists for the lifetime of the sim');
  }
  reset() {
    this.positionProperty.reset();
    this.numberOfCollisionsProperty.reset();
    this.isRunningProperty.reset();
    this.visibleProperty.reset();
    this.samplePeriodProperty.reset();
  }

  /**
   * Resets the collision count and set its run-time to zero.
   */
  resetCount() {
    this.numberOfCollisionsProperty.value = 0;
    this.timeRunning = 0;
  }

  /**
   * Stops the collision counter and does resetCount.
   */
  stopAndResetCount() {
    this.isRunningProperty.value = false;
    this.resetCount();
  }

  /**
   * Steps the collision counter.
   * @param dt - time step, in ps
   */
  step(dt) {
    assert && assert(dt > 0, `invalid dt: ${dt}`);
    if (this.isRunningProperty.value) {
      // record the number of collisions for this time step
      this.numberOfCollisionsProperty.value += this.collisionDetector.numberOfParticleContainerCollisions;

      // If we've come to the end of the sample period, stop the counter.
      // isRunningProperty is used by the Play/Reset toggle button, and changing its state resets the count.
      // So we need to save and restore the count here when modifying isRunningProperty.  This was simpler
      // than other solutions that were investigated.
      this.timeRunning += dt;
      if (this.timeRunning >= this.samplePeriodProperty.value) {
        phet.log && phet.log(`CollisionCounter sample period: desired=${this.samplePeriodProperty.value} actual=${this.timeRunning}`);
        const numberOfCollisions = this.numberOfCollisionsProperty.value;
        this.isRunningProperty.value = false;
        this.numberOfCollisionsProperty.value = numberOfCollisions;
      }
    }
  }
}
gasProperties.register('CollisionCounter', CollisionCounter);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb29sZWFuUHJvcGVydHkiLCJOdW1iZXJQcm9wZXJ0eSIsIlZlY3RvcjIiLCJWZWN0b3IyUHJvcGVydHkiLCJvcHRpb25pemUiLCJnYXNQcm9wZXJ0aWVzIiwiQ29sbGlzaW9uQ291bnRlciIsImNvbnN0cnVjdG9yIiwiY29sbGlzaW9uRGV0ZWN0b3IiLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwicG9zaXRpb24iLCJaRVJPIiwidmlzaWJsZSIsInBvc2l0aW9uUHJvcGVydHkiLCJ0YW5kZW0iLCJjcmVhdGVUYW5kZW0iLCJudW1iZXJPZkNvbGxpc2lvbnNQcm9wZXJ0eSIsIm51bWJlclR5cGUiLCJpc1ZhbGlkVmFsdWUiLCJ2YWx1ZSIsImlzUnVubmluZ1Byb3BlcnR5IiwidGltZVJ1bm5pbmciLCJ2aXNpYmxlUHJvcGVydHkiLCJzYW1wbGVQZXJpb2RzIiwic2FtcGxlUGVyaW9kUHJvcGVydHkiLCJ2YWxpZFZhbHVlcyIsInVuaXRzIiwibGluayIsInJlc2V0Q291bnQiLCJzdG9wQW5kUmVzZXRDb3VudCIsImRpc3Bvc2UiLCJhc3NlcnQiLCJyZXNldCIsInN0ZXAiLCJkdCIsIm51bWJlck9mUGFydGljbGVDb250YWluZXJDb2xsaXNpb25zIiwicGhldCIsImxvZyIsIm51bWJlck9mQ29sbGlzaW9ucyIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiQ29sbGlzaW9uQ291bnRlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOC0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBDb2xsaXNpb25Db3VudGVyIGNvdW50cyBjb2xsaXNpb25zIGJldHdlZW4gcGFydGljbGVzIGFuZCB0aGUgd2FsbHMgb2YgYSBjb250YWluZXIuXHJcbiAqXHJcbiAqIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXHJcbiAqL1xyXG5cclxuaW1wb3J0IEJvb2xlYW5Qcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL0Jvb2xlYW5Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBOdW1iZXJQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL051bWJlclByb3BlcnR5LmpzJztcclxuaW1wb3J0IFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVmVjdG9yMi5qcyc7XHJcbmltcG9ydCBWZWN0b3IyUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjJQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBvcHRpb25pemUgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCBQaWNrUmVxdWlyZWQgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL1BpY2tSZXF1aXJlZC5qcyc7XHJcbmltcG9ydCB7IFBoZXRpb09iamVjdE9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi90YW5kZW0vanMvUGhldGlvT2JqZWN0LmpzJztcclxuaW1wb3J0IGdhc1Byb3BlcnRpZXMgZnJvbSAnLi4vLi4vZ2FzUHJvcGVydGllcy5qcyc7XHJcbmltcG9ydCBDb2xsaXNpb25EZXRlY3RvciBmcm9tICcuL0NvbGxpc2lvbkRldGVjdG9yLmpzJztcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSB7XHJcbiAgcG9zaXRpb24/OiBWZWN0b3IyO1xyXG4gIHZpc2libGU/OiBib29sZWFuO1xyXG59O1xyXG5cclxudHlwZSBDb2xsaXNpb25Db3VudGVyT3B0aW9ucyA9IFNlbGZPcHRpb25zICYgUGlja1JlcXVpcmVkPFBoZXRpb09iamVjdE9wdGlvbnMsICd0YW5kZW0nPjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbGxpc2lvbkNvdW50ZXIge1xyXG5cclxuICBwcml2YXRlIHJlYWRvbmx5IGNvbGxpc2lvbkRldGVjdG9yOiBDb2xsaXNpb25EZXRlY3RvcjtcclxuXHJcbiAgLy8gcG9zaXRpb24gb2YgdGhlIGNvbGxpc2lvbiBjb3VudGVyLCBpbiB2aWV3IGNvb3JkaW5hdGVzXHJcbiAgcHVibGljIHJlYWRvbmx5IHBvc2l0aW9uUHJvcGVydHk6IFByb3BlcnR5PFZlY3RvcjI+O1xyXG5cclxuICAvLyB0aGUgbnVtYmVyIG9mIHBhcnRpY2xlLWNvbnRhaW5lciBjb2xsaXNpb25zXHJcbiAgcHVibGljIHJlYWRvbmx5IG51bWJlck9mQ29sbGlzaW9uc1Byb3BlcnR5OiBQcm9wZXJ0eTxudW1iZXI+O1xyXG5cclxuICAvLyB3aGV0aGVyIHRoZSBjb2xsaXNpb24gY291bnRlciBpcyBydW5uaW5nXHJcbiAgcHVibGljIHJlYWRvbmx5IGlzUnVubmluZ1Byb3BlcnR5OiBQcm9wZXJ0eTxib29sZWFuPjtcclxuXHJcbiAgLy8gdGltZSB0aGF0IHRoZSBjb3VudGVyIGhhcyBiZWVuIHJ1bm5pbmcsIGluIHBzXHJcbiAgcHJpdmF0ZSB0aW1lUnVubmluZzogbnVtYmVyO1xyXG5cclxuICAvLyB3aGV0aGVyIHRoZSBjb2xsaXNpb24gY291bnRlciBpcyB2aXNpYmxlXHJcbiAgcHVibGljIHJlYWRvbmx5IHZpc2libGVQcm9wZXJ0eTogUHJvcGVydHk8Ym9vbGVhbj47XHJcblxyXG4gIC8vIHZhbGlkIHZhbHVlcyBmb3Igc2FtcGxlUGVyaW9kUHJvcGVydHksIGluIHBzXHJcbiAgcHVibGljIHJlYWRvbmx5IHNhbXBsZVBlcmlvZHM6IG51bWJlcltdO1xyXG5cclxuICAvLyBTYW1wbGUgcGVyaW9kIGZvciBjb3VudGluZyBjb2xsaXNpb25zXHJcbiAgLy8gQWN0dWFsIHNhbXBsZSBwZXJpb2Qgd2lsbCBiZSBjbG9zZSB0byB0aGlzIHZhbHVlLCBidXQgbm90IGV4YWN0IChjb25maXJtZWQgT0sgd2l0aCBAYXJvdWluZmFyKS5cclxuICBwdWJsaWMgcmVhZG9ubHkgc2FtcGxlUGVyaW9kUHJvcGVydHk6IFByb3BlcnR5PG51bWJlcj47XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggY29sbGlzaW9uRGV0ZWN0b3I6IENvbGxpc2lvbkRldGVjdG9yLCBwcm92aWRlZE9wdGlvbnM6IENvbGxpc2lvbkNvdW50ZXJPcHRpb25zICkge1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8Q29sbGlzaW9uQ291bnRlck9wdGlvbnMsIFNlbGZPcHRpb25zPigpKCB7XHJcblxyXG4gICAgICAvLyBTZWxmT3B0aW9uc1xyXG4gICAgICBwb3NpdGlvbjogVmVjdG9yMi5aRVJPLFxyXG4gICAgICB2aXNpYmxlOiBmYWxzZVxyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgdGhpcy5jb2xsaXNpb25EZXRlY3RvciA9IGNvbGxpc2lvbkRldGVjdG9yO1xyXG5cclxuICAgIHRoaXMucG9zaXRpb25Qcm9wZXJ0eSA9IG5ldyBWZWN0b3IyUHJvcGVydHkoIG9wdGlvbnMucG9zaXRpb24sIHtcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdwb3NpdGlvblByb3BlcnR5JyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5udW1iZXJPZkNvbGxpc2lvbnNQcm9wZXJ0eSA9IG5ldyBOdW1iZXJQcm9wZXJ0eSggMCwge1xyXG4gICAgICBudW1iZXJUeXBlOiAnSW50ZWdlcicsXHJcbiAgICAgIGlzVmFsaWRWYWx1ZTogdmFsdWUgPT4gKCB2YWx1ZSA+PSAwICksXHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnbnVtYmVyT2ZDb2xsaXNpb25zUHJvcGVydHknIClcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLmlzUnVubmluZ1Byb3BlcnR5ID0gbmV3IEJvb2xlYW5Qcm9wZXJ0eSggZmFsc2UsIHtcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdpc1J1bm5pbmdQcm9wZXJ0eScgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIHRoaXMudGltZVJ1bm5pbmcgPSAwO1xyXG5cclxuICAgIHRoaXMudmlzaWJsZVByb3BlcnR5ID0gbmV3IEJvb2xlYW5Qcm9wZXJ0eSggb3B0aW9ucy52aXNpYmxlLCB7XHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAndmlzaWJsZVByb3BlcnR5JyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5zYW1wbGVQZXJpb2RzID0gWyA1LCAxMCwgMjAgXTtcclxuXHJcbiAgICB0aGlzLnNhbXBsZVBlcmlvZFByb3BlcnR5ID0gbmV3IE51bWJlclByb3BlcnR5KCB0aGlzLnNhbXBsZVBlcmlvZHNbIDEgXSwge1xyXG4gICAgICBudW1iZXJUeXBlOiAnSW50ZWdlcicsXHJcbiAgICAgIHZhbGlkVmFsdWVzOiB0aGlzLnNhbXBsZVBlcmlvZHMsXHJcbiAgICAgIHVuaXRzOiAncHMnLFxyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3NhbXBsZVBlcmlvZFByb3BlcnR5JyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gQ2hhbmdpbmcgdGhlIHJ1bm5pbmcgc3RhdGUgcmVzZXRzIHRoZSBjb2xsaXNpb24gY291bnQuXHJcbiAgICB0aGlzLmlzUnVubmluZ1Byb3BlcnR5LmxpbmsoICgpID0+IHRoaXMucmVzZXRDb3VudCgpICk7XHJcblxyXG4gICAgLy8gQ2hhbmdpbmcgdmlzaWJpbGl0eSBvciBzYW1wbGUgcGVyaW9kIHN0b3BzIHRoZSBjb3VudGVyIGFuZCByZXNldHMgdGhlIGNvbGxpc2lvbiBjb3VudC5cclxuICAgIHRoaXMudmlzaWJsZVByb3BlcnR5LmxpbmsoICgpID0+IHRoaXMuc3RvcEFuZFJlc2V0Q291bnQoKSApO1xyXG4gICAgdGhpcy5zYW1wbGVQZXJpb2RQcm9wZXJ0eS5saW5rKCAoKSA9PiB0aGlzLnN0b3BBbmRSZXNldENvdW50KCkgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggZmFsc2UsICdkaXNwb3NlIGlzIG5vdCBzdXBwb3J0ZWQsIGV4aXN0cyBmb3IgdGhlIGxpZmV0aW1lIG9mIHRoZSBzaW0nICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLnBvc2l0aW9uUHJvcGVydHkucmVzZXQoKTtcclxuICAgIHRoaXMubnVtYmVyT2ZDb2xsaXNpb25zUHJvcGVydHkucmVzZXQoKTtcclxuICAgIHRoaXMuaXNSdW5uaW5nUHJvcGVydHkucmVzZXQoKTtcclxuICAgIHRoaXMudmlzaWJsZVByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICB0aGlzLnNhbXBsZVBlcmlvZFByb3BlcnR5LnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXNldHMgdGhlIGNvbGxpc2lvbiBjb3VudCBhbmQgc2V0IGl0cyBydW4tdGltZSB0byB6ZXJvLlxyXG4gICAqL1xyXG4gIHByaXZhdGUgcmVzZXRDb3VudCgpOiB2b2lkIHtcclxuICAgIHRoaXMubnVtYmVyT2ZDb2xsaXNpb25zUHJvcGVydHkudmFsdWUgPSAwO1xyXG4gICAgdGhpcy50aW1lUnVubmluZyA9IDA7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTdG9wcyB0aGUgY29sbGlzaW9uIGNvdW50ZXIgYW5kIGRvZXMgcmVzZXRDb3VudC5cclxuICAgKi9cclxuICBwcml2YXRlIHN0b3BBbmRSZXNldENvdW50KCk6IHZvaWQge1xyXG4gICAgdGhpcy5pc1J1bm5pbmdQcm9wZXJ0eS52YWx1ZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5yZXNldENvdW50KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTdGVwcyB0aGUgY29sbGlzaW9uIGNvdW50ZXIuXHJcbiAgICogQHBhcmFtIGR0IC0gdGltZSBzdGVwLCBpbiBwc1xyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGVwKCBkdDogbnVtYmVyICk6IHZvaWQge1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggZHQgPiAwLCBgaW52YWxpZCBkdDogJHtkdH1gICk7XHJcbiAgICBpZiAoIHRoaXMuaXNSdW5uaW5nUHJvcGVydHkudmFsdWUgKSB7XHJcblxyXG4gICAgICAvLyByZWNvcmQgdGhlIG51bWJlciBvZiBjb2xsaXNpb25zIGZvciB0aGlzIHRpbWUgc3RlcFxyXG4gICAgICB0aGlzLm51bWJlck9mQ29sbGlzaW9uc1Byb3BlcnR5LnZhbHVlICs9IHRoaXMuY29sbGlzaW9uRGV0ZWN0b3IubnVtYmVyT2ZQYXJ0aWNsZUNvbnRhaW5lckNvbGxpc2lvbnM7XHJcblxyXG4gICAgICAvLyBJZiB3ZSd2ZSBjb21lIHRvIHRoZSBlbmQgb2YgdGhlIHNhbXBsZSBwZXJpb2QsIHN0b3AgdGhlIGNvdW50ZXIuXHJcbiAgICAgIC8vIGlzUnVubmluZ1Byb3BlcnR5IGlzIHVzZWQgYnkgdGhlIFBsYXkvUmVzZXQgdG9nZ2xlIGJ1dHRvbiwgYW5kIGNoYW5naW5nIGl0cyBzdGF0ZSByZXNldHMgdGhlIGNvdW50LlxyXG4gICAgICAvLyBTbyB3ZSBuZWVkIHRvIHNhdmUgYW5kIHJlc3RvcmUgdGhlIGNvdW50IGhlcmUgd2hlbiBtb2RpZnlpbmcgaXNSdW5uaW5nUHJvcGVydHkuICBUaGlzIHdhcyBzaW1wbGVyXHJcbiAgICAgIC8vIHRoYW4gb3RoZXIgc29sdXRpb25zIHRoYXQgd2VyZSBpbnZlc3RpZ2F0ZWQuXHJcbiAgICAgIHRoaXMudGltZVJ1bm5pbmcgKz0gZHQ7XHJcbiAgICAgIGlmICggdGhpcy50aW1lUnVubmluZyA+PSB0aGlzLnNhbXBsZVBlcmlvZFByb3BlcnR5LnZhbHVlICkge1xyXG4gICAgICAgIHBoZXQubG9nICYmIHBoZXQubG9nKCBgQ29sbGlzaW9uQ291bnRlciBzYW1wbGUgcGVyaW9kOiBkZXNpcmVkPSR7dGhpcy5zYW1wbGVQZXJpb2RQcm9wZXJ0eS52YWx1ZX0gYWN0dWFsPSR7dGhpcy50aW1lUnVubmluZ31gICk7XHJcbiAgICAgICAgY29uc3QgbnVtYmVyT2ZDb2xsaXNpb25zID0gdGhpcy5udW1iZXJPZkNvbGxpc2lvbnNQcm9wZXJ0eS52YWx1ZTtcclxuICAgICAgICB0aGlzLmlzUnVubmluZ1Byb3BlcnR5LnZhbHVlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5udW1iZXJPZkNvbGxpc2lvbnNQcm9wZXJ0eS52YWx1ZSA9IG51bWJlck9mQ29sbGlzaW9ucztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZ2FzUHJvcGVydGllcy5yZWdpc3RlciggJ0NvbGxpc2lvbkNvdW50ZXInLCBDb2xsaXNpb25Db3VudGVyICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGVBQWUsTUFBTSx3Q0FBd0M7QUFDcEUsT0FBT0MsY0FBYyxNQUFNLHVDQUF1QztBQUVsRSxPQUFPQyxPQUFPLE1BQU0sK0JBQStCO0FBQ25ELE9BQU9DLGVBQWUsTUFBTSx1Q0FBdUM7QUFDbkUsT0FBT0MsU0FBUyxNQUFNLHVDQUF1QztBQUc3RCxPQUFPQyxhQUFhLE1BQU0sd0JBQXdCO0FBVWxELGVBQWUsTUFBTUMsZ0JBQWdCLENBQUM7RUFJcEM7O0VBR0E7O0VBR0E7O0VBR0E7O0VBR0E7O0VBR0E7O0VBR0E7RUFDQTtFQUdPQyxXQUFXQSxDQUFFQyxpQkFBb0MsRUFBRUMsZUFBd0MsRUFBRztJQUVuRyxNQUFNQyxPQUFPLEdBQUdOLFNBQVMsQ0FBdUMsQ0FBQyxDQUFFO01BRWpFO01BQ0FPLFFBQVEsRUFBRVQsT0FBTyxDQUFDVSxJQUFJO01BQ3RCQyxPQUFPLEVBQUU7SUFDWCxDQUFDLEVBQUVKLGVBQWdCLENBQUM7SUFFcEIsSUFBSSxDQUFDRCxpQkFBaUIsR0FBR0EsaUJBQWlCO0lBRTFDLElBQUksQ0FBQ00sZ0JBQWdCLEdBQUcsSUFBSVgsZUFBZSxDQUFFTyxPQUFPLENBQUNDLFFBQVEsRUFBRTtNQUM3REksTUFBTSxFQUFFTCxPQUFPLENBQUNLLE1BQU0s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