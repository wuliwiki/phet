// Copyright 2018-2022, University of Colorado Boulder

/**
 * LidNode is the lid on the top of the container. The lid is composed of 2 pieces, a handle and a base.
 * Origin is at the bottom-left of the base.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import optionize from '../../../../phet-core/js/optionize.js';
import HandleNode from '../../../../scenery-phet/js/HandleNode.js';
import { Node, Rectangle } from '../../../../scenery/js/imports.js';
import gasProperties from '../../gasProperties.js';
import GasPropertiesColors from '../GasPropertiesColors.js';
// constants
const HANDLE_ATTACHMENT_LINE_WIDTH = 1;
const HANDLE_RIGHT_INSET = 3;
export default class LidNode extends Node {
  constructor(holdConstantProperty, providedOptions) {
    const options = optionize()({
      // SelfOptions
      gripColor: GasPropertiesColors.lidGripColorProperty
    }, providedOptions);
    const baseNode = new Rectangle(0, 0, options.baseWidth, options.baseHeight, {
      fill: GasPropertiesColors.lidBaseFillProperty,
      left: 0,
      bottom: 0
    });
    const handleNode = new HandleNode({
      cursor: 'pointer',
      hasLeftAttachment: false,
      gripBaseColor: options.gripColor,
      attachmentLineWidth: HANDLE_ATTACHMENT_LINE_WIDTH,
      scale: 0.4,
      right: baseNode.right - HANDLE_RIGHT_INSET,
      bottom: baseNode.top + 1
    });
    assert && assert(handleNode.width <= baseNode.width, `handleNode.width ${handleNode.width} is wider than baseNode.width ${baseNode.width}`);
    handleNode.touchArea = handleNode.localBounds.dilatedXY(25, 20);
    options.children = [handleNode, baseNode];
    super(options);

    // Hide the handle when holding temperature constant.  We don't want to deal with counteracting evaporative
    // cooling, which will occur when the lid is open. See https://github.com/phetsims/gas-properties/issues/159
    holdConstantProperty.link(holdConstant => {
      this.interruptSubtreeInput();
      handleNode.visible = holdConstant !== 'temperature';
    });
    this.handleNode = handleNode;
    this.baseNode = baseNode;
  }
  dispose() {
    assert && assert(false, 'dispose is not supported, exists for the lifetime of the sim');
    super.dispose();
  }

  /**
   * Sets the width of the lid's base.
   */
  setBaseWidth(baseWidth) {
    assert && assert(baseWidth > 0, `invalid baseWidth: ${baseWidth}`);
    this.baseNode.setRectWidth(baseWidth);
    this.baseNode.left = 0;
    this.baseNode.bottom = 0;
    this.handleNode.right = this.baseNode.right - HANDLE_RIGHT_INSET;
  }
}
gasProperties.register('LidNode', LidNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcHRpb25pemUiLCJIYW5kbGVOb2RlIiwiTm9kZSIsIlJlY3RhbmdsZSIsImdhc1Byb3BlcnRpZXMiLCJHYXNQcm9wZXJ0aWVzQ29sb3JzIiwiSEFORExFX0FUVEFDSE1FTlRfTElORV9XSURUSCIsIkhBTkRMRV9SSUdIVF9JTlNFVCIsIkxpZE5vZGUiLCJjb25zdHJ1Y3RvciIsImhvbGRDb25zdGFudFByb3BlcnR5IiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsImdyaXBDb2xvciIsImxpZEdyaXBDb2xvclByb3BlcnR5IiwiYmFzZU5vZGUiLCJiYXNlV2lkdGgiLCJiYXNlSGVpZ2h0IiwiZmlsbCIsImxpZEJhc2VGaWxsUHJvcGVydHkiLCJsZWZ0IiwiYm90dG9tIiwiaGFuZGxlTm9kZSIsImN1cnNvciIsImhhc0xlZnRBdHRhY2htZW50IiwiZ3JpcEJhc2VDb2xvciIsImF0dGFjaG1lbnRMaW5lV2lkdGgiLCJzY2FsZSIsInJpZ2h0IiwidG9wIiwiYXNzZXJ0Iiwid2lkdGgiLCJ0b3VjaEFyZWEiLCJsb2NhbEJvdW5kcyIsImRpbGF0ZWRYWSIsImNoaWxkcmVuIiwibGluayIsImhvbGRDb25zdGFudCIsImludGVycnVwdFN1YnRyZWVJbnB1dCIsInZpc2libGUiLCJkaXNwb3NlIiwic2V0QmFzZVdpZHRoIiwic2V0UmVjdFdpZHRoIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJMaWROb2RlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE4LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIExpZE5vZGUgaXMgdGhlIGxpZCBvbiB0aGUgdG9wIG9mIHRoZSBjb250YWluZXIuIFRoZSBsaWQgaXMgY29tcG9zZWQgb2YgMiBwaWVjZXMsIGEgaGFuZGxlIGFuZCBhIGJhc2UuXHJcbiAqIE9yaWdpbiBpcyBhdCB0aGUgYm90dG9tLWxlZnQgb2YgdGhlIGJhc2UuXHJcbiAqXHJcbiAqIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXHJcbiAqL1xyXG5cclxuaW1wb3J0IFN0cmluZ1VuaW9uUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9TdHJpbmdVbmlvblByb3BlcnR5LmpzJztcclxuaW1wb3J0IG9wdGlvbml6ZSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuaW1wb3J0IFBpY2tSZXF1aXJlZCBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvUGlja1JlcXVpcmVkLmpzJztcclxuaW1wb3J0IEhhbmRsZU5vZGUgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL0hhbmRsZU5vZGUuanMnO1xyXG5pbXBvcnQgeyBOb2RlLCBOb2RlT3B0aW9ucywgUmVjdGFuZ2xlLCBUQ29sb3IgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgZ2FzUHJvcGVydGllcyBmcm9tICcuLi8uLi9nYXNQcm9wZXJ0aWVzLmpzJztcclxuaW1wb3J0IEdhc1Byb3BlcnRpZXNDb2xvcnMgZnJvbSAnLi4vR2FzUHJvcGVydGllc0NvbG9ycy5qcyc7XHJcbmltcG9ydCB7IEhvbGRDb25zdGFudCB9IGZyb20gJy4uL21vZGVsL0hvbGRDb25zdGFudC5qcyc7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgSEFORExFX0FUVEFDSE1FTlRfTElORV9XSURUSCA9IDE7XHJcbmNvbnN0IEhBTkRMRV9SSUdIVF9JTlNFVCA9IDM7XHJcblxyXG50eXBlIFNlbGZPcHRpb25zID0ge1xyXG4gIGJhc2VXaWR0aDogbnVtYmVyO1xyXG4gIGJhc2VIZWlnaHQ6IG51bWJlcjtcclxuICBncmlwQ29sb3I/OiBUQ29sb3I7XHJcbn07XHJcblxyXG50eXBlIExpZE5vZGVPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBQaWNrUmVxdWlyZWQ8Tm9kZU9wdGlvbnMsICd0YW5kZW0nPjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExpZE5vZGUgZXh0ZW5kcyBOb2RlIHtcclxuXHJcbiAgcHVibGljIHJlYWRvbmx5IGhhbmRsZU5vZGU6IEhhbmRsZU5vZGU7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBiYXNlTm9kZTogUmVjdGFuZ2xlO1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIGhvbGRDb25zdGFudFByb3BlcnR5OiBTdHJpbmdVbmlvblByb3BlcnR5PEhvbGRDb25zdGFudD4sIHByb3ZpZGVkT3B0aW9uczogTGlkTm9kZU9wdGlvbnMgKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxMaWROb2RlT3B0aW9ucywgU2VsZk9wdGlvbnMsIE5vZGVPcHRpb25zPigpKCB7XHJcblxyXG4gICAgICAvLyBTZWxmT3B0aW9uc1xyXG4gICAgICBncmlwQ29sb3I6IEdhc1Byb3BlcnRpZXNDb2xvcnMubGlkR3JpcENvbG9yUHJvcGVydHlcclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIGNvbnN0IGJhc2VOb2RlID0gbmV3IFJlY3RhbmdsZSggMCwgMCwgb3B0aW9ucy5iYXNlV2lkdGgsIG9wdGlvbnMuYmFzZUhlaWdodCwge1xyXG4gICAgICBmaWxsOiBHYXNQcm9wZXJ0aWVzQ29sb3JzLmxpZEJhc2VGaWxsUHJvcGVydHksXHJcbiAgICAgIGxlZnQ6IDAsXHJcbiAgICAgIGJvdHRvbTogMFxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IGhhbmRsZU5vZGUgPSBuZXcgSGFuZGxlTm9kZSgge1xyXG4gICAgICBjdXJzb3I6ICdwb2ludGVyJyxcclxuICAgICAgaGFzTGVmdEF0dGFjaG1lbnQ6IGZhbHNlLFxyXG4gICAgICBncmlwQmFzZUNvbG9yOiBvcHRpb25zLmdyaXBDb2xvcixcclxuICAgICAgYXR0YWNobWVudExpbmVXaWR0aDogSEFORExFX0FUVEFDSE1FTlRfTElORV9XSURUSCxcclxuICAgICAgc2NhbGU6IDAuNCxcclxuICAgICAgcmlnaHQ6IGJhc2VOb2RlLnJpZ2h0IC0gSEFORExFX1JJR0hUX0lOU0VULFxyXG4gICAgICBib3R0b206IGJhc2VOb2RlLnRvcCArIDFcclxuICAgIH0gKTtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIGhhbmRsZU5vZGUud2lkdGggPD0gYmFzZU5vZGUud2lkdGgsXHJcbiAgICAgIGBoYW5kbGVOb2RlLndpZHRoICR7aGFuZGxlTm9kZS53aWR0aH0gaXMgd2lkZXIgdGhhbiBiYXNlTm9kZS53aWR0aCAke2Jhc2VOb2RlLndpZHRofWAgKTtcclxuICAgIGhhbmRsZU5vZGUudG91Y2hBcmVhID0gaGFuZGxlTm9kZS5sb2NhbEJvdW5kcy5kaWxhdGVkWFkoIDI1LCAyMCApO1xyXG5cclxuICAgIG9wdGlvbnMuY2hpbGRyZW4gPSBbIGhhbmRsZU5vZGUsIGJhc2VOb2RlIF07XHJcblxyXG4gICAgc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcbiAgICAvLyBIaWRlIHRoZSBoYW5kbGUgd2hlbiBob2xkaW5nIHRlbXBlcmF0dXJlIGNvbnN0YW50LiAgV2UgZG9uJ3Qgd2FudCB0byBkZWFsIHdpdGggY291bnRlcmFjdGluZyBldmFwb3JhdGl2ZVxyXG4gICAgLy8gY29vbGluZywgd2hpY2ggd2lsbCBvY2N1ciB3aGVuIHRoZSBsaWQgaXMgb3Blbi4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9nYXMtcHJvcGVydGllcy9pc3N1ZXMvMTU5XHJcbiAgICBob2xkQ29uc3RhbnRQcm9wZXJ0eS5saW5rKCBob2xkQ29uc3RhbnQgPT4ge1xyXG4gICAgICB0aGlzLmludGVycnVwdFN1YnRyZWVJbnB1dCgpO1xyXG4gICAgICBoYW5kbGVOb2RlLnZpc2libGUgPSAoIGhvbGRDb25zdGFudCAhPT0gJ3RlbXBlcmF0dXJlJyApO1xyXG4gICAgfSApO1xyXG5cclxuICAgIHRoaXMuaGFuZGxlTm9kZSA9IGhhbmRsZU5vZGU7XHJcbiAgICB0aGlzLmJhc2VOb2RlID0gYmFzZU5vZGU7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb3ZlcnJpZGUgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIGZhbHNlLCAnZGlzcG9zZSBpcyBub3Qgc3VwcG9ydGVkLCBleGlzdHMgZm9yIHRoZSBsaWZldGltZSBvZiB0aGUgc2ltJyApO1xyXG4gICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0cyB0aGUgd2lkdGggb2YgdGhlIGxpZCdzIGJhc2UuXHJcbiAgICovXHJcbiAgcHVibGljIHNldEJhc2VXaWR0aCggYmFzZVdpZHRoOiBudW1iZXIgKTogdm9pZCB7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBiYXNlV2lkdGggPiAwLCBgaW52YWxpZCBiYXNlV2lkdGg6ICR7YmFzZVdpZHRofWAgKTtcclxuXHJcbiAgICB0aGlzLmJhc2VOb2RlLnNldFJlY3RXaWR0aCggYmFzZVdpZHRoICk7XHJcbiAgICB0aGlzLmJhc2VOb2RlLmxlZnQgPSAwO1xyXG4gICAgdGhpcy5iYXNlTm9kZS5ib3R0b20gPSAwO1xyXG4gICAgdGhpcy5oYW5kbGVOb2RlLnJpZ2h0ID0gdGhpcy5iYXNlTm9kZS5yaWdodCAtIEhBTkRMRV9SSUdIVF9JTlNFVDtcclxuICB9XHJcbn1cclxuXHJcbmdhc1Byb3BlcnRpZXMucmVnaXN0ZXIoICdMaWROb2RlJywgTGlkTm9kZSApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBLE9BQU9BLFNBQVMsTUFBTSx1Q0FBdUM7QUFFN0QsT0FBT0MsVUFBVSxNQUFNLDJDQUEyQztBQUNsRSxTQUFTQyxJQUFJLEVBQWVDLFNBQVMsUUFBZ0IsbUNBQW1DO0FBQ3hGLE9BQU9DLGFBQWEsTUFBTSx3QkFBd0I7QUFDbEQsT0FBT0MsbUJBQW1CLE1BQU0sMkJBQTJCO0FBRzNEO0FBQ0EsTUFBTUMsNEJBQTRCLEdBQUcsQ0FBQztBQUN0QyxNQUFNQyxrQkFBa0IsR0FBRyxDQUFDO0FBVTVC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