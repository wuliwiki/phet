// Copyright 2018-2022, University of Colorado Boulder

/**
 * PressureDisplay displays a pressure gauge, pressure value, and a control for selecting temperature units.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import optionize from '../../../../phet-core/js/optionize.js';
import GaugeNode from '../../../../scenery-phet/js/GaugeNode.js';
import { Circle, LinearGradient, Node, Rectangle } from '../../../../scenery/js/imports.js';
import Tandem from '../../../../tandem/js/Tandem.js';
import gasProperties from '../../gasProperties.js';
import GasPropertiesStrings from '../../GasPropertiesStrings.js';
import GasPropertiesQueryParameters from '../GasPropertiesQueryParameters.js';
import PressureDisplay from './PressureDisplay.js';

// constants
const DIAL_RADIUS = 50;
const POST_HEIGHT = 0.6 * DIAL_RADIUS;
export default class PressureGaugeNode extends Node {
  constructor(pressureGauge, listboxParent, providedOptions) {
    const options = optionize()({
      // because options.children is set below
    }, providedOptions);

    // circular dial with needle
    const gaugeNode = new GaugeNode(pressureGauge.pressureKilopascalsProperty, GasPropertiesStrings.pressureStringProperty, pressureGauge.pressureRange, {
      radius: DIAL_RADIUS,
      tandem: Tandem.OPTIONAL
    });

    // horizontal post the sticks out of the left side of the gauge
    const postNode = new Rectangle(0, 0, DIAL_RADIUS + 15, POST_HEIGHT, {
      fill: PressureGaugeNode.createPostGradient(POST_HEIGHT),
      right: gaugeNode.centerX,
      centerY: gaugeNode.centerY
    });

    // combo box to display value and choose units
    const comboBox = new PressureDisplay(pressureGauge, listboxParent, {
      maxWidth: gaugeNode.width,
      tandem: options.tandem.createTandem('comboBox')
    });
    comboBox.boundsProperty.link(bounds => {
      comboBox.centerX = gaugeNode.centerX;
      comboBox.bottom = gaugeNode.bottom;
    });
    options.children = [postNode, gaugeNode, comboBox];
    super(options);

    // Red dot at the origin, for debugging layout
    if (GasPropertiesQueryParameters.origin) {
      this.addChild(new Circle(3, {
        fill: 'red'
      }));
    }
  }
  dispose() {
    assert && assert(false, 'dispose is not supported, exists for the lifetime of the sim');
    super.dispose();
  }

  /**
   * Creates the vertical gradient for the post that connects the gauge to the container.
   */
  static createPostGradient(postHeight) {
    assert && assert(postHeight > 0, `invalid postHeight: ${postHeight}`);
    return new LinearGradient(0, 0, 0, postHeight).addColorStop(0, 'rgb( 120, 120, 120 )').addColorStop(0.3, 'rgb( 220, 220, 220 )').addColorStop(0.5, 'rgb( 220, 220, 220 )').addColorStop(1, 'rgb( 100, 100, 100 )');
  }
}
gasProperties.register('PressureGaugeNode', PressureGaugeNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcHRpb25pemUiLCJHYXVnZU5vZGUiLCJDaXJjbGUiLCJMaW5lYXJHcmFkaWVudCIsIk5vZGUiLCJSZWN0YW5nbGUiLCJUYW5kZW0iLCJnYXNQcm9wZXJ0aWVzIiwiR2FzUHJvcGVydGllc1N0cmluZ3MiLCJHYXNQcm9wZXJ0aWVzUXVlcnlQYXJhbWV0ZXJzIiwiUHJlc3N1cmVEaXNwbGF5IiwiRElBTF9SQURJVVMiLCJQT1NUX0hFSUdIVCIsIlByZXNzdXJlR2F1Z2VOb2RlIiwiY29uc3RydWN0b3IiLCJwcmVzc3VyZUdhdWdlIiwibGlzdGJveFBhcmVudCIsInByb3ZpZGVkT3B0aW9ucyIsIm9wdGlvbnMiLCJnYXVnZU5vZGUiLCJwcmVzc3VyZUtpbG9wYXNjYWxzUHJvcGVydHkiLCJwcmVzc3VyZVN0cmluZ1Byb3BlcnR5IiwicHJlc3N1cmVSYW5nZSIsInJhZGl1cyIsInRhbmRlbSIsIk9QVElPTkFMIiwicG9zdE5vZGUiLCJmaWxsIiwiY3JlYXRlUG9zdEdyYWRpZW50IiwicmlnaHQiLCJjZW50ZXJYIiwiY2VudGVyWSIsImNvbWJvQm94IiwibWF4V2lkdGgiLCJ3aWR0aCIsImNyZWF0ZVRhbmRlbSIsImJvdW5kc1Byb3BlcnR5IiwibGluayIsImJvdW5kcyIsImJvdHRvbSIsImNoaWxkcmVuIiwib3JpZ2luIiwiYWRkQ2hpbGQiLCJkaXNwb3NlIiwiYXNzZXJ0IiwicG9zdEhlaWdodCIsImFkZENvbG9yU3RvcCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiUHJlc3N1cmVHYXVnZU5vZGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTgtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogUHJlc3N1cmVEaXNwbGF5IGRpc3BsYXlzIGEgcHJlc3N1cmUgZ2F1Z2UsIHByZXNzdXJlIHZhbHVlLCBhbmQgYSBjb250cm9sIGZvciBzZWxlY3RpbmcgdGVtcGVyYXR1cmUgdW5pdHMuXHJcbiAqXHJcbiAqIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXHJcbiAqL1xyXG5cclxuaW1wb3J0IG9wdGlvbml6ZSwgeyBFbXB0eVNlbGZPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCBQaWNrUmVxdWlyZWQgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL1BpY2tSZXF1aXJlZC5qcyc7XHJcbmltcG9ydCBHYXVnZU5vZGUgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL0dhdWdlTm9kZS5qcyc7XHJcbmltcG9ydCB7IENpcmNsZSwgTGluZWFyR3JhZGllbnQsIE5vZGUsIE5vZGVPcHRpb25zLCBSZWN0YW5nbGUgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uLy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xyXG5pbXBvcnQgZ2FzUHJvcGVydGllcyBmcm9tICcuLi8uLi9nYXNQcm9wZXJ0aWVzLmpzJztcclxuaW1wb3J0IEdhc1Byb3BlcnRpZXNTdHJpbmdzIGZyb20gJy4uLy4uL0dhc1Byb3BlcnRpZXNTdHJpbmdzLmpzJztcclxuaW1wb3J0IEdhc1Byb3BlcnRpZXNRdWVyeVBhcmFtZXRlcnMgZnJvbSAnLi4vR2FzUHJvcGVydGllc1F1ZXJ5UGFyYW1ldGVycy5qcyc7XHJcbmltcG9ydCBQcmVzc3VyZUdhdWdlIGZyb20gJy4uL21vZGVsL1ByZXNzdXJlR2F1Z2UuanMnO1xyXG5pbXBvcnQgUHJlc3N1cmVEaXNwbGF5IGZyb20gJy4vUHJlc3N1cmVEaXNwbGF5LmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBESUFMX1JBRElVUyA9IDUwO1xyXG5jb25zdCBQT1NUX0hFSUdIVCA9IDAuNiAqIERJQUxfUkFESVVTO1xyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IEVtcHR5U2VsZk9wdGlvbnM7XHJcblxyXG50eXBlIFByZXNzdXJlR2F1Z2VOb2RlT3B0aW9ucyA9IFNlbGZPcHRpb25zICYgUGlja1JlcXVpcmVkPE5vZGVPcHRpb25zLCAndGFuZGVtJz47XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcmVzc3VyZUdhdWdlTm9kZSBleHRlbmRzIE5vZGUge1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIHByZXNzdXJlR2F1Z2U6IFByZXNzdXJlR2F1Z2UsIGxpc3Rib3hQYXJlbnQ6IE5vZGUsIHByb3ZpZGVkT3B0aW9uczogUHJlc3N1cmVHYXVnZU5vZGVPcHRpb25zICkge1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8UHJlc3N1cmVHYXVnZU5vZGVPcHRpb25zLCBTZWxmT3B0aW9ucywgTm9kZU9wdGlvbnM+KCkoIHtcclxuICAgICAgLy8gYmVjYXVzZSBvcHRpb25zLmNoaWxkcmVuIGlzIHNldCBiZWxvd1xyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgLy8gY2lyY3VsYXIgZGlhbCB3aXRoIG5lZWRsZVxyXG4gICAgY29uc3QgZ2F1Z2VOb2RlID0gbmV3IEdhdWdlTm9kZSggcHJlc3N1cmVHYXVnZS5wcmVzc3VyZUtpbG9wYXNjYWxzUHJvcGVydHksIEdhc1Byb3BlcnRpZXNTdHJpbmdzLnByZXNzdXJlU3RyaW5nUHJvcGVydHksXHJcbiAgICAgIHByZXNzdXJlR2F1Z2UucHJlc3N1cmVSYW5nZSwge1xyXG4gICAgICAgIHJhZGl1czogRElBTF9SQURJVVMsXHJcbiAgICAgICAgdGFuZGVtOiBUYW5kZW0uT1BUSU9OQUxcclxuICAgICAgfSApO1xyXG5cclxuICAgIC8vIGhvcml6b250YWwgcG9zdCB0aGUgc3RpY2tzIG91dCBvZiB0aGUgbGVmdCBzaWRlIG9mIHRoZSBnYXVnZVxyXG4gICAgY29uc3QgcG9zdE5vZGUgPSBuZXcgUmVjdGFuZ2xlKCAwLCAwLCBESUFMX1JBRElVUyArIDE1LCBQT1NUX0hFSUdIVCwge1xyXG4gICAgICBmaWxsOiBQcmVzc3VyZUdhdWdlTm9kZS5jcmVhdGVQb3N0R3JhZGllbnQoIFBPU1RfSEVJR0hUICksXHJcbiAgICAgIHJpZ2h0OiBnYXVnZU5vZGUuY2VudGVyWCxcclxuICAgICAgY2VudGVyWTogZ2F1Z2VOb2RlLmNlbnRlcllcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBjb21ibyBib3ggdG8gZGlzcGxheSB2YWx1ZSBhbmQgY2hvb3NlIHVuaXRzXHJcbiAgICBjb25zdCBjb21ib0JveCA9IG5ldyBQcmVzc3VyZURpc3BsYXkoIHByZXNzdXJlR2F1Z2UsIGxpc3Rib3hQYXJlbnQsIHtcclxuICAgICAgbWF4V2lkdGg6IGdhdWdlTm9kZS53aWR0aCxcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdjb21ib0JveCcgKVxyXG4gICAgfSApO1xyXG4gICAgY29tYm9Cb3guYm91bmRzUHJvcGVydHkubGluayggYm91bmRzID0+IHtcclxuICAgICAgY29tYm9Cb3guY2VudGVyWCA9IGdhdWdlTm9kZS5jZW50ZXJYO1xyXG4gICAgICBjb21ib0JveC5ib3R0b20gPSBnYXVnZU5vZGUuYm90dG9tO1xyXG4gICAgfSApO1xyXG5cclxuICAgIG9wdGlvbnMuY2hpbGRyZW4gPSBbIHBvc3ROb2RlLCBnYXVnZU5vZGUsIGNvbWJvQm94IF07XHJcblxyXG4gICAgc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcbiAgICAvLyBSZWQgZG90IGF0IHRoZSBvcmlnaW4sIGZvciBkZWJ1Z2dpbmcgbGF5b3V0XHJcbiAgICBpZiAoIEdhc1Byb3BlcnRpZXNRdWVyeVBhcmFtZXRlcnMub3JpZ2luICkge1xyXG4gICAgICB0aGlzLmFkZENoaWxkKCBuZXcgQ2lyY2xlKCAzLCB7IGZpbGw6ICdyZWQnIH0gKSApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIG92ZXJyaWRlIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBmYWxzZSwgJ2Rpc3Bvc2UgaXMgbm90IHN1cHBvcnRlZCwgZXhpc3RzIGZvciB0aGUgbGlmZXRpbWUgb2YgdGhlIHNpbScgKTtcclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgdGhlIHZlcnRpY2FsIGdyYWRpZW50IGZvciB0aGUgcG9zdCB0aGF0IGNvbm5lY3RzIHRoZSBnYXVnZSB0byB0aGUgY29udGFpbmVyLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgY3JlYXRlUG9zdEdyYWRpZW50KCBwb3N0SGVpZ2h0OiBudW1iZXIgKTogTGluZWFyR3JhZGllbnQge1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggcG9zdEhlaWdodCA+IDAsIGBpbnZhbGlkIHBvc3RIZWlnaHQ6ICR7cG9zdEhlaWdodH1gICk7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBMaW5lYXJHcmFkaWVudCggMCwgMCwgMCwgcG9zdEhlaWdodCApXHJcbiAgICAgIC5hZGRDb2xvclN0b3AoIDAsICdyZ2IoIDEyMCwgMTIwLCAxMjAgKScgKVxyXG4gICAgICAuYWRkQ29sb3JTdG9wKCAwLjMsICdyZ2IoIDIyMCwgMjIwLCAyMjAgKScgKVxyXG4gICAgICAuYWRkQ29sb3JTdG9wKCAwLjUsICdyZ2IoIDIyMCwgMjIwLCAyMjAgKScgKVxyXG4gICAgICAuYWRkQ29sb3JTdG9wKCAxLCAncmdiKCAxMDAsIDEwMCwgMTAwICknICk7XHJcbiAgfVxyXG59XHJcblxyXG5nYXNQcm9wZXJ0aWVzLnJlZ2lzdGVyKCAnUHJlc3N1cmVHYXVnZU5vZGUnLCBQcmVzc3VyZUdhdWdlTm9kZSApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxTQUFTLE1BQTRCLHVDQUF1QztBQUVuRixPQUFPQyxTQUFTLE1BQU0sMENBQTBDO0FBQ2hFLFNBQVNDLE1BQU0sRUFBRUMsY0FBYyxFQUFFQyxJQUFJLEVBQWVDLFNBQVMsUUFBUSxtQ0FBbUM7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