// Copyright 2018-2022, University of Colorado Boulder

/**
 * DiffusionScreenView is the view for the 'Diffusion' screen.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import GasPropertiesColors from '../../common/GasPropertiesColors.js';
import GasPropertiesConstants from '../../common/GasPropertiesConstants.js';
import GasPropertiesQueryParameters from '../../common/GasPropertiesQueryParameters.js';
import BaseScreenView from '../../common/view/BaseScreenView.js';
import GasPropertiesStopwatchNode from '../../common/view/GasPropertiesStopwatchNode.js';
import RegionsNode from '../../common/view/RegionsNode.js';
import gasProperties from '../../gasProperties.js';
import CenterOfMassNode from './CenterOfMassNode.js';
import DataAccordionBox from './DataAccordionBox.js';
import DiffusionContainerNode from './DiffusionContainerNode.js';
import DiffusionControlPanel from './DiffusionControlPanel.js';
import DiffusionParticleSystemNode from './DiffusionParticleSystemNode.js';
import DiffusionViewProperties from './DiffusionViewProperties.js';
import ParticleFlowRateNode from './ParticleFlowRateNode.js';
import ScaleNode from './ScaleNode.js';
export default class DiffusionScreenView extends BaseScreenView {
  constructor(model, tandem) {
    super(model, tandem, {
      hasSlowMotion: true // adds Normal/Slow radio buttons to the time controls
    });

    const viewProperties = new DiffusionViewProperties(tandem.createTandem('viewProperties'));

    // Container
    const containerNode = new DiffusionContainerNode(model.container, model.modelViewTransform, {
      tandem: tandem.createTandem('containerNode')
    });

    // Scale below the container
    const scaleNode = new ScaleNode(model.container.widthProperty.value, model.modelViewTransform, {
      visibleProperty: viewProperties.scaleVisibleProperty,
      centerX: model.modelViewTransform.modelToViewX(model.container.dividerX),
      top: model.modelViewTransform.modelToViewY(model.container.bottom - model.container.wallThickness),
      tandem: tandem.createTandem('scaleNode')
    });

    // Show how the collision detection space is partitioned into regions
    let regionsNode = null;
    if (GasPropertiesQueryParameters.regions) {
      regionsNode = new RegionsNode(model.collisionDetector.regions, model.modelViewTransform);
    }

    // Center of Mass indicators
    const centerOfMassNode1 = new CenterOfMassNode(model.centerOfMass1Property, model.container.bottom, model.modelViewTransform, GasPropertiesColors.particle1ColorProperty, {
      visibleProperty: viewProperties.centerOfMassVisibleProperty,
      tandem: tandem.createTandem('centerOfMassNode1')
    });
    const centerOfMassNode2 = new CenterOfMassNode(model.centerOfMass2Property, model.container.bottom, model.modelViewTransform, GasPropertiesColors.particle2ColorProperty, {
      visibleProperty: viewProperties.centerOfMassVisibleProperty,
      tandem: tandem.createTandem('centerOfMassNode2')
    });

    // Particle Flow Rate vectors
    const particleFlowRateNode1 = new ParticleFlowRateNode(model.particleFlowRate1, {
      visibleProperty: viewProperties.particleFlowRateVisibleProperty,
      arrowNodeOptions: {
        fill: GasPropertiesColors.particle1ColorProperty
      },
      centerX: containerNode.centerX,
      top: containerNode.bottom + 38,
      tandem: tandem.createTandem('particleFlowRateNode1')
    });
    const particleFlowRateNode2 = new ParticleFlowRateNode(model.particleFlowRate2, {
      visibleProperty: viewProperties.particleFlowRateVisibleProperty,
      arrowNodeOptions: {
        fill: GasPropertiesColors.particle2ColorProperty
      },
      centerX: containerNode.centerX,
      top: particleFlowRateNode1.bottom + 5,
      tandem: tandem.createTandem('particleFlowRateNode2')
    });

    // Data accordion box
    const dataAccordionBox = new DataAccordionBox(model.leftData, model.rightData, model.modelViewTransform, {
      expandedProperty: viewProperties.dataExpandedProperty,
      tandem: tandem.createTandem('dataAccordionBox')
    });
    dataAccordionBox.boundsProperty.link(bounds => {
      dataAccordionBox.centerX = containerNode.centerX;
      dataAccordionBox.bottom = containerNode.top - 15;
    });

    // Control panel at right side of screen
    const controlPanel = new DiffusionControlPanel(model.leftSettings, model.rightSettings, model.modelViewTransform, model.container.hasDividerProperty, model.numberOfParticlesProperty, model.stopwatch.isVisibleProperty, viewProperties, {
      fixedWidth: 300,
      right: this.layoutBounds.right - GasPropertiesConstants.SCREEN_VIEW_X_MARGIN,
      top: this.layoutBounds.top + GasPropertiesConstants.SCREEN_VIEW_Y_MARGIN,
      tandem: tandem.createTandem('controlPanel')
    });

    // The complete system of particles
    const particleSystemNode = new DiffusionParticleSystemNode(model);

    // If the number of particles changes while the sim is paused, redraw the particle system.
    model.numberOfParticlesProperty.link(() => {
      if (!model.isPlayingProperty.value) {
        particleSystemNode.update();
      }
    });

    // Stopwatch
    const stopwatchNode = new GasPropertiesStopwatchNode(model.stopwatch, {
      dragBoundsProperty: this.visibleBoundsProperty,
      tandem: tandem.createTandem('stopwatchNode')
    });

    // Rendering order
    regionsNode && this.addChild(regionsNode);
    this.addChild(dataAccordionBox);
    this.addChild(controlPanel);
    this.addChild(scaleNode);
    this.addChild(containerNode);
    this.addChild(particleSystemNode);
    this.addChild(centerOfMassNode1);
    this.addChild(centerOfMassNode2);
    this.addChild(particleFlowRateNode1);
    this.addChild(particleFlowRateNode2);
    this.addChild(stopwatchNode);

    // Position the time controls
    this.timeControlNode.mutate({
      left: controlPanel.left,
      bottom: this.layoutBounds.bottom - GasPropertiesConstants.SCREEN_VIEW_Y_MARGIN
    });

    // Move particle-flow rate indicators to the back, so they go behind time controls.
    particleFlowRateNode1.moveToBack();

    // Vertical space is tight. So set a maxHeight for the control panel, since font height does vary on some
    // platforms, and may make the control panel taller.  See https://github.com/phetsims/gas-properties/issues/130.
    controlPanel.maxHeight = this.layoutBounds.height - this.timeControlNode.height - 2 * GasPropertiesConstants.SCREEN_VIEW_Y_MARGIN - 25;
    this.viewProperties = viewProperties;
    this.particleSystemNode = particleSystemNode;
    this.regionsNode = regionsNode;
  }
  dispose() {
    assert && assert(false, 'dispose is not supported, exists for the lifetime of the sim');
    super.dispose();
  }
  reset() {
    super.reset();
    this.viewProperties.reset();
  }

  /**
   * Steps the view using real time units.
   * @param dt - time delta, in seconds
   */
  stepView(dt) {
    assert && assert(dt >= 0, `invalid dt: ${dt}`);
    this.particleSystemNode.update();
    this.regionsNode && this.regionsNode.update();
  }
}
gasProperties.register('DiffusionScreenView', DiffusionScreenView);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJHYXNQcm9wZXJ0aWVzQ29sb3JzIiwiR2FzUHJvcGVydGllc0NvbnN0YW50cyIsIkdhc1Byb3BlcnRpZXNRdWVyeVBhcmFtZXRlcnMiLCJCYXNlU2NyZWVuVmlldyIsIkdhc1Byb3BlcnRpZXNTdG9wd2F0Y2hOb2RlIiwiUmVnaW9uc05vZGUiLCJnYXNQcm9wZXJ0aWVzIiwiQ2VudGVyT2ZNYXNzTm9kZSIsIkRhdGFBY2NvcmRpb25Cb3giLCJEaWZmdXNpb25Db250YWluZXJOb2RlIiwiRGlmZnVzaW9uQ29udHJvbFBhbmVsIiwiRGlmZnVzaW9uUGFydGljbGVTeXN0ZW1Ob2RlIiwiRGlmZnVzaW9uVmlld1Byb3BlcnRpZXMiLCJQYXJ0aWNsZUZsb3dSYXRlTm9kZSIsIlNjYWxlTm9kZSIsIkRpZmZ1c2lvblNjcmVlblZpZXciLCJjb25zdHJ1Y3RvciIsIm1vZGVsIiwidGFuZGVtIiwiaGFzU2xvd01vdGlvbiIsInZpZXdQcm9wZXJ0aWVzIiwiY3JlYXRlVGFuZGVtIiwiY29udGFpbmVyTm9kZSIsImNvbnRhaW5lciIsIm1vZGVsVmlld1RyYW5zZm9ybSIsInNjYWxlTm9kZSIsIndpZHRoUHJvcGVydHkiLCJ2YWx1ZSIsInZpc2libGVQcm9wZXJ0eSIsInNjYWxlVmlzaWJsZVByb3BlcnR5IiwiY2VudGVyWCIsIm1vZGVsVG9WaWV3WCIsImRpdmlkZXJYIiwidG9wIiwibW9kZWxUb1ZpZXdZIiwiYm90dG9tIiwid2FsbFRoaWNrbmVzcyIsInJlZ2lvbnNOb2RlIiwicmVnaW9ucyIsImNvbGxpc2lvbkRldGVjdG9yIiwiY2VudGVyT2ZNYXNzTm9kZTEiLCJjZW50ZXJPZk1hc3MxUHJvcGVydHkiLCJwYXJ0aWNsZTFDb2xvclByb3BlcnR5IiwiY2VudGVyT2ZNYXNzVmlzaWJsZVByb3BlcnR5IiwiY2VudGVyT2ZNYXNzTm9kZTIiLCJjZW50ZXJPZk1hc3MyUHJvcGVydHkiLCJwYXJ0aWNsZTJDb2xvclByb3BlcnR5IiwicGFydGljbGVGbG93UmF0ZU5vZGUxIiwicGFydGljbGVGbG93UmF0ZTEiLCJwYXJ0aWNsZUZsb3dSYXRlVmlzaWJsZVByb3BlcnR5IiwiYXJyb3dOb2RlT3B0aW9ucyIsImZpbGwiLCJwYXJ0aWNsZUZsb3dSYXRlTm9kZTIiLCJwYXJ0aWNsZUZsb3dSYXRlMiIsImRhdGFBY2NvcmRpb25Cb3giLCJsZWZ0RGF0YSIsInJpZ2h0RGF0YSIsImV4cGFuZGVkUHJvcGVydHkiLCJkYXRhRXhwYW5kZWRQcm9wZXJ0eSIsImJvdW5kc1Byb3BlcnR5IiwibGluayIsImJvdW5kcyIsImNvbnRyb2xQYW5lbCIsImxlZnRTZXR0aW5ncyIsInJpZ2h0U2V0dGluZ3MiLCJoYXNEaXZpZGVyUHJvcGVydHkiLCJudW1iZXJPZlBhcnRpY2xlc1Byb3BlcnR5Iiwic3RvcHdhdGNoIiwiaXNWaXNpYmxlUHJvcGVydHkiLCJmaXhlZFdpZHRoIiwicmlnaHQiLCJsYXlvdXRCb3VuZHMiLCJTQ1JFRU5fVklFV19YX01BUkdJTiIsIlNDUkVFTl9WSUVXX1lfTUFSR0lOIiwicGFydGljbGVTeXN0ZW1Ob2RlIiwiaXNQbGF5aW5nUHJvcGVydHkiLCJ1cGRhdGUiLCJzdG9wd2F0Y2hOb2RlIiwiZHJhZ0JvdW5kc1Byb3BlcnR5IiwidmlzaWJsZUJvdW5kc1Byb3BlcnR5IiwiYWRkQ2hpbGQiLCJ0aW1lQ29udHJvbE5vZGUiLCJtdXRhdGUiLCJsZWZ0IiwibW92ZVRvQmFjayIsIm1heEhlaWdodCIsImhlaWdodCIsImRpc3Bvc2UiLCJhc3NlcnQiLCJyZXNldCIsInN0ZXBWaWV3IiwiZHQiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkRpZmZ1c2lvblNjcmVlblZpZXcudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTgtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogRGlmZnVzaW9uU2NyZWVuVmlldyBpcyB0aGUgdmlldyBmb3IgdGhlICdEaWZmdXNpb24nIHNjcmVlbi5cclxuICpcclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICovXHJcblxyXG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uLy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xyXG5pbXBvcnQgR2FzUHJvcGVydGllc0NvbG9ycyBmcm9tICcuLi8uLi9jb21tb24vR2FzUHJvcGVydGllc0NvbG9ycy5qcyc7XHJcbmltcG9ydCBHYXNQcm9wZXJ0aWVzQ29uc3RhbnRzIGZyb20gJy4uLy4uL2NvbW1vbi9HYXNQcm9wZXJ0aWVzQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IEdhc1Byb3BlcnRpZXNRdWVyeVBhcmFtZXRlcnMgZnJvbSAnLi4vLi4vY29tbW9uL0dhc1Byb3BlcnRpZXNRdWVyeVBhcmFtZXRlcnMuanMnO1xyXG5pbXBvcnQgQmFzZVNjcmVlblZpZXcgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvQmFzZVNjcmVlblZpZXcuanMnO1xyXG5pbXBvcnQgR2FzUHJvcGVydGllc1N0b3B3YXRjaE5vZGUgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvR2FzUHJvcGVydGllc1N0b3B3YXRjaE5vZGUuanMnO1xyXG5pbXBvcnQgUmVnaW9uc05vZGUgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvUmVnaW9uc05vZGUuanMnO1xyXG5pbXBvcnQgZ2FzUHJvcGVydGllcyBmcm9tICcuLi8uLi9nYXNQcm9wZXJ0aWVzLmpzJztcclxuaW1wb3J0IERpZmZ1c2lvbk1vZGVsIGZyb20gJy4uL21vZGVsL0RpZmZ1c2lvbk1vZGVsLmpzJztcclxuaW1wb3J0IENlbnRlck9mTWFzc05vZGUgZnJvbSAnLi9DZW50ZXJPZk1hc3NOb2RlLmpzJztcclxuaW1wb3J0IERhdGFBY2NvcmRpb25Cb3ggZnJvbSAnLi9EYXRhQWNjb3JkaW9uQm94LmpzJztcclxuaW1wb3J0IERpZmZ1c2lvbkNvbnRhaW5lck5vZGUgZnJvbSAnLi9EaWZmdXNpb25Db250YWluZXJOb2RlLmpzJztcclxuaW1wb3J0IERpZmZ1c2lvbkNvbnRyb2xQYW5lbCBmcm9tICcuL0RpZmZ1c2lvbkNvbnRyb2xQYW5lbC5qcyc7XHJcbmltcG9ydCBEaWZmdXNpb25QYXJ0aWNsZVN5c3RlbU5vZGUgZnJvbSAnLi9EaWZmdXNpb25QYXJ0aWNsZVN5c3RlbU5vZGUuanMnO1xyXG5pbXBvcnQgRGlmZnVzaW9uVmlld1Byb3BlcnRpZXMgZnJvbSAnLi9EaWZmdXNpb25WaWV3UHJvcGVydGllcy5qcyc7XHJcbmltcG9ydCBQYXJ0aWNsZUZsb3dSYXRlTm9kZSBmcm9tICcuL1BhcnRpY2xlRmxvd1JhdGVOb2RlLmpzJztcclxuaW1wb3J0IFNjYWxlTm9kZSBmcm9tICcuL1NjYWxlTm9kZS5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEaWZmdXNpb25TY3JlZW5WaWV3IGV4dGVuZHMgQmFzZVNjcmVlblZpZXcge1xyXG5cclxuICBwcml2YXRlIHJlYWRvbmx5IHZpZXdQcm9wZXJ0aWVzOiBEaWZmdXNpb25WaWV3UHJvcGVydGllcztcclxuICBwcml2YXRlIHJlYWRvbmx5IHBhcnRpY2xlU3lzdGVtTm9kZTogRGlmZnVzaW9uUGFydGljbGVTeXN0ZW1Ob2RlO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgcmVnaW9uc05vZGU6IFJlZ2lvbnNOb2RlIHwgbnVsbDtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBtb2RlbDogRGlmZnVzaW9uTW9kZWwsIHRhbmRlbTogVGFuZGVtICkge1xyXG5cclxuICAgIHN1cGVyKCBtb2RlbCwgdGFuZGVtLCB7XHJcbiAgICAgIGhhc1Nsb3dNb3Rpb246IHRydWUgLy8gYWRkcyBOb3JtYWwvU2xvdyByYWRpbyBidXR0b25zIHRvIHRoZSB0aW1lIGNvbnRyb2xzXHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3Qgdmlld1Byb3BlcnRpZXMgPSBuZXcgRGlmZnVzaW9uVmlld1Byb3BlcnRpZXMoIHRhbmRlbS5jcmVhdGVUYW5kZW0oICd2aWV3UHJvcGVydGllcycgKSApO1xyXG5cclxuICAgIC8vIENvbnRhaW5lclxyXG4gICAgY29uc3QgY29udGFpbmVyTm9kZSA9IG5ldyBEaWZmdXNpb25Db250YWluZXJOb2RlKCBtb2RlbC5jb250YWluZXIsIG1vZGVsLm1vZGVsVmlld1RyYW5zZm9ybSwge1xyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdjb250YWluZXJOb2RlJyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gU2NhbGUgYmVsb3cgdGhlIGNvbnRhaW5lclxyXG4gICAgY29uc3Qgc2NhbGVOb2RlID0gbmV3IFNjYWxlTm9kZSggbW9kZWwuY29udGFpbmVyLndpZHRoUHJvcGVydHkudmFsdWUsIG1vZGVsLm1vZGVsVmlld1RyYW5zZm9ybSwge1xyXG4gICAgICB2aXNpYmxlUHJvcGVydHk6IHZpZXdQcm9wZXJ0aWVzLnNjYWxlVmlzaWJsZVByb3BlcnR5LFxyXG4gICAgICBjZW50ZXJYOiBtb2RlbC5tb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdYKCBtb2RlbC5jb250YWluZXIuZGl2aWRlclggKSxcclxuICAgICAgdG9wOiBtb2RlbC5tb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdZKCBtb2RlbC5jb250YWluZXIuYm90dG9tIC0gbW9kZWwuY29udGFpbmVyLndhbGxUaGlja25lc3MgKSxcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnc2NhbGVOb2RlJyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gU2hvdyBob3cgdGhlIGNvbGxpc2lvbiBkZXRlY3Rpb24gc3BhY2UgaXMgcGFydGl0aW9uZWQgaW50byByZWdpb25zXHJcbiAgICBsZXQgcmVnaW9uc05vZGUgPSBudWxsO1xyXG4gICAgaWYgKCBHYXNQcm9wZXJ0aWVzUXVlcnlQYXJhbWV0ZXJzLnJlZ2lvbnMgKSB7XHJcbiAgICAgIHJlZ2lvbnNOb2RlID0gbmV3IFJlZ2lvbnNOb2RlKCBtb2RlbC5jb2xsaXNpb25EZXRlY3Rvci5yZWdpb25zLCBtb2RlbC5tb2RlbFZpZXdUcmFuc2Zvcm0gKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDZW50ZXIgb2YgTWFzcyBpbmRpY2F0b3JzXHJcbiAgICBjb25zdCBjZW50ZXJPZk1hc3NOb2RlMSA9IG5ldyBDZW50ZXJPZk1hc3NOb2RlKCBtb2RlbC5jZW50ZXJPZk1hc3MxUHJvcGVydHksIG1vZGVsLmNvbnRhaW5lci5ib3R0b20sXHJcbiAgICAgIG1vZGVsLm1vZGVsVmlld1RyYW5zZm9ybSwgR2FzUHJvcGVydGllc0NvbG9ycy5wYXJ0aWNsZTFDb2xvclByb3BlcnR5LCB7XHJcbiAgICAgICAgdmlzaWJsZVByb3BlcnR5OiB2aWV3UHJvcGVydGllcy5jZW50ZXJPZk1hc3NWaXNpYmxlUHJvcGVydHksXHJcbiAgICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnY2VudGVyT2ZNYXNzTm9kZTEnIClcclxuICAgICAgfSApO1xyXG4gICAgY29uc3QgY2VudGVyT2ZNYXNzTm9kZTIgPSBuZXcgQ2VudGVyT2ZNYXNzTm9kZSggbW9kZWwuY2VudGVyT2ZNYXNzMlByb3BlcnR5LCBtb2RlbC5jb250YWluZXIuYm90dG9tLFxyXG4gICAgICBtb2RlbC5tb2RlbFZpZXdUcmFuc2Zvcm0sIEdhc1Byb3BlcnRpZXNDb2xvcnMucGFydGljbGUyQ29sb3JQcm9wZXJ0eSwge1xyXG4gICAgICAgIHZpc2libGVQcm9wZXJ0eTogdmlld1Byb3BlcnRpZXMuY2VudGVyT2ZNYXNzVmlzaWJsZVByb3BlcnR5LFxyXG4gICAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2NlbnRlck9mTWFzc05vZGUyJyApXHJcbiAgICAgIH0gKTtcclxuXHJcbiAgICAvLyBQYXJ0aWNsZSBGbG93IFJhdGUgdmVjdG9yc1xyXG4gICAgY29uc3QgcGFydGljbGVGbG93UmF0ZU5vZGUxID0gbmV3IFBhcnRpY2xlRmxvd1JhdGVOb2RlKCBtb2RlbC5wYXJ0aWNsZUZsb3dSYXRlMSwge1xyXG4gICAgICB2aXNpYmxlUHJvcGVydHk6IHZpZXdQcm9wZXJ0aWVzLnBhcnRpY2xlRmxvd1JhdGVWaXNpYmxlUHJvcGVydHksXHJcbiAgICAgIGFycm93Tm9kZU9wdGlvbnM6IHtcclxuICAgICAgICBmaWxsOiBHYXNQcm9wZXJ0aWVzQ29sb3JzLnBhcnRpY2xlMUNvbG9yUHJvcGVydHlcclxuICAgICAgfSxcclxuICAgICAgY2VudGVyWDogY29udGFpbmVyTm9kZS5jZW50ZXJYLFxyXG4gICAgICB0b3A6IGNvbnRhaW5lck5vZGUuYm90dG9tICsgMzgsXHJcbiAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3BhcnRpY2xlRmxvd1JhdGVOb2RlMScgKVxyXG4gICAgfSApO1xyXG4gICAgY29uc3QgcGFydGljbGVGbG93UmF0ZU5vZGUyID0gbmV3IFBhcnRpY2xlRmxvd1JhdGVOb2RlKCBtb2RlbC5wYXJ0aWNsZUZsb3dSYXRlMiwge1xyXG4gICAgICB2aXNpYmxlUHJvcGVydHk6IHZpZXdQcm9wZXJ0aWVzLnBhcnRpY2xlRmxvd1JhdGVWaXNpYmxlUHJvcGVydHksXHJcbiAgICAgIGFycm93Tm9kZU9wdGlvbnM6IHtcclxuICAgICAgICBmaWxsOiBHYXNQcm9wZXJ0aWVzQ29sb3JzLnBhcnRpY2xlMkNvbG9yUHJvcGVydHlcclxuICAgICAgfSxcclxuICAgICAgY2VudGVyWDogY29udGFpbmVyTm9kZS5jZW50ZXJYLFxyXG4gICAgICB0b3A6IHBhcnRpY2xlRmxvd1JhdGVOb2RlMS5ib3R0b20gKyA1LFxyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdwYXJ0aWNsZUZsb3dSYXRlTm9kZTInIClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBEYXRhIGFjY29yZGlvbiBib3hcclxuICAgIGNvbnN0IGRhdGFBY2NvcmRpb25Cb3ggPSBuZXcgRGF0YUFjY29yZGlvbkJveCggbW9kZWwubGVmdERhdGEsIG1vZGVsLnJpZ2h0RGF0YSwgbW9kZWwubW9kZWxWaWV3VHJhbnNmb3JtLCB7XHJcbiAgICAgIGV4cGFuZGVkUHJvcGVydHk6IHZpZXdQcm9wZXJ0aWVzLmRhdGFFeHBhbmRlZFByb3BlcnR5LFxyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdkYXRhQWNjb3JkaW9uQm94JyApXHJcbiAgICB9ICk7XHJcbiAgICBkYXRhQWNjb3JkaW9uQm94LmJvdW5kc1Byb3BlcnR5LmxpbmsoIGJvdW5kcyA9PiB7XHJcbiAgICAgIGRhdGFBY2NvcmRpb25Cb3guY2VudGVyWCA9IGNvbnRhaW5lck5vZGUuY2VudGVyWDtcclxuICAgICAgZGF0YUFjY29yZGlvbkJveC5ib3R0b20gPSBjb250YWluZXJOb2RlLnRvcCAtIDE1O1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIENvbnRyb2wgcGFuZWwgYXQgcmlnaHQgc2lkZSBvZiBzY3JlZW5cclxuICAgIGNvbnN0IGNvbnRyb2xQYW5lbCA9IG5ldyBEaWZmdXNpb25Db250cm9sUGFuZWwoIG1vZGVsLmxlZnRTZXR0aW5ncywgbW9kZWwucmlnaHRTZXR0aW5ncyxcclxuICAgICAgbW9kZWwubW9kZWxWaWV3VHJhbnNmb3JtLFxyXG4gICAgICBtb2RlbC5jb250YWluZXIuaGFzRGl2aWRlclByb3BlcnR5LFxyXG4gICAgICBtb2RlbC5udW1iZXJPZlBhcnRpY2xlc1Byb3BlcnR5LFxyXG4gICAgICBtb2RlbC5zdG9wd2F0Y2guaXNWaXNpYmxlUHJvcGVydHksXHJcbiAgICAgIHZpZXdQcm9wZXJ0aWVzLCB7XHJcbiAgICAgICAgZml4ZWRXaWR0aDogMzAwLFxyXG4gICAgICAgIHJpZ2h0OiB0aGlzLmxheW91dEJvdW5kcy5yaWdodCAtIEdhc1Byb3BlcnRpZXNDb25zdGFudHMuU0NSRUVOX1ZJRVdfWF9NQVJHSU4sXHJcbiAgICAgICAgdG9wOiB0aGlzLmxheW91dEJvdW5kcy50b3AgKyBHYXNQcm9wZXJ0aWVzQ29uc3RhbnRzLlNDUkVFTl9WSUVXX1lfTUFSR0lOLFxyXG4gICAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2NvbnRyb2xQYW5lbCcgKVxyXG4gICAgICB9ICk7XHJcblxyXG4gICAgLy8gVGhlIGNvbXBsZXRlIHN5c3RlbSBvZiBwYXJ0aWNsZXNcclxuICAgIGNvbnN0IHBhcnRpY2xlU3lzdGVtTm9kZSA9IG5ldyBEaWZmdXNpb25QYXJ0aWNsZVN5c3RlbU5vZGUoIG1vZGVsICk7XHJcblxyXG4gICAgLy8gSWYgdGhlIG51bWJlciBvZiBwYXJ0aWNsZXMgY2hhbmdlcyB3aGlsZSB0aGUgc2ltIGlzIHBhdXNlZCwgcmVkcmF3IHRoZSBwYXJ0aWNsZSBzeXN0ZW0uXHJcbiAgICBtb2RlbC5udW1iZXJPZlBhcnRpY2xlc1Byb3BlcnR5LmxpbmsoICgpID0+IHtcclxuICAgICAgaWYgKCAhbW9kZWwuaXNQbGF5aW5nUHJvcGVydHkudmFsdWUgKSB7XHJcbiAgICAgICAgcGFydGljbGVTeXN0ZW1Ob2RlLnVwZGF0ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gU3RvcHdhdGNoXHJcbiAgICBjb25zdCBzdG9wd2F0Y2hOb2RlID0gbmV3IEdhc1Byb3BlcnRpZXNTdG9wd2F0Y2hOb2RlKCBtb2RlbC5zdG9wd2F0Y2gsIHtcclxuICAgICAgZHJhZ0JvdW5kc1Byb3BlcnR5OiB0aGlzLnZpc2libGVCb3VuZHNQcm9wZXJ0eSxcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnc3RvcHdhdGNoTm9kZScgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIFJlbmRlcmluZyBvcmRlclxyXG4gICAgcmVnaW9uc05vZGUgJiYgdGhpcy5hZGRDaGlsZCggcmVnaW9uc05vZGUgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIGRhdGFBY2NvcmRpb25Cb3ggKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIGNvbnRyb2xQYW5lbCApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggc2NhbGVOb2RlICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBjb250YWluZXJOb2RlICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBwYXJ0aWNsZVN5c3RlbU5vZGUgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIGNlbnRlck9mTWFzc05vZGUxICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBjZW50ZXJPZk1hc3NOb2RlMiApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggcGFydGljbGVGbG93UmF0ZU5vZGUxICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBwYXJ0aWNsZUZsb3dSYXRlTm9kZTIgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHN0b3B3YXRjaE5vZGUgKTtcclxuXHJcbiAgICAvLyBQb3NpdGlvbiB0aGUgdGltZSBjb250cm9sc1xyXG4gICAgdGhpcy50aW1lQ29udHJvbE5vZGUubXV0YXRlKCB7XHJcbiAgICAgIGxlZnQ6IGNvbnRyb2xQYW5lbC5sZWZ0LFxyXG4gICAgICBib3R0b206IHRoaXMubGF5b3V0Qm91bmRzLmJvdHRvbSAtIEdhc1Byb3BlcnRpZXNDb25zdGFudHMuU0NSRUVOX1ZJRVdfWV9NQVJHSU5cclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBNb3ZlIHBhcnRpY2xlLWZsb3cgcmF0ZSBpbmRpY2F0b3JzIHRvIHRoZSBiYWNrLCBzbyB0aGV5IGdvIGJlaGluZCB0aW1lIGNvbnRyb2xzLlxyXG4gICAgcGFydGljbGVGbG93UmF0ZU5vZGUxLm1vdmVUb0JhY2soKTtcclxuXHJcbiAgICAvLyBWZXJ0aWNhbCBzcGFjZSBpcyB0aWdodC4gU28gc2V0IGEgbWF4SGVpZ2h0IGZvciB0aGUgY29udHJvbCBwYW5lbCwgc2luY2UgZm9udCBoZWlnaHQgZG9lcyB2YXJ5IG9uIHNvbWVcclxuICAgIC8vIHBsYXRmb3JtcywgYW5kIG1heSBtYWtlIHRoZSBjb250cm9sIHBhbmVsIHRhbGxlci4gIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvZ2FzLXByb3BlcnRpZXMvaXNzdWVzLzEzMC5cclxuICAgIGNvbnRyb2xQYW5lbC5tYXhIZWlnaHQgPSB0aGlzLmxheW91dEJvdW5kcy5oZWlnaHQgLSB0aGlzLnRpbWVDb250cm9sTm9kZS5oZWlnaHQgLVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICggMiAqIEdhc1Byb3BlcnRpZXNDb25zdGFudHMuU0NSRUVOX1ZJRVdfWV9NQVJHSU4gKSAtIDI1O1xyXG5cclxuICAgIHRoaXMudmlld1Byb3BlcnRpZXMgPSB2aWV3UHJvcGVydGllcztcclxuICAgIHRoaXMucGFydGljbGVTeXN0ZW1Ob2RlID0gcGFydGljbGVTeXN0ZW1Ob2RlO1xyXG4gICAgdGhpcy5yZWdpb25zTm9kZSA9IHJlZ2lvbnNOb2RlO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG92ZXJyaWRlIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBmYWxzZSwgJ2Rpc3Bvc2UgaXMgbm90IHN1cHBvcnRlZCwgZXhpc3RzIGZvciB0aGUgbGlmZXRpbWUgb2YgdGhlIHNpbScgKTtcclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBvdmVycmlkZSByZXNldCgpOiB2b2lkIHtcclxuICAgIHN1cGVyLnJlc2V0KCk7XHJcbiAgICB0aGlzLnZpZXdQcm9wZXJ0aWVzLnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTdGVwcyB0aGUgdmlldyB1c2luZyByZWFsIHRpbWUgdW5pdHMuXHJcbiAgICogQHBhcmFtIGR0IC0gdGltZSBkZWx0YSwgaW4gc2Vjb25kc1xyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBzdGVwVmlldyggZHQ6IG51bWJlciApOiB2b2lkIHtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIGR0ID49IDAsIGBpbnZhbGlkIGR0OiAke2R0fWAgKTtcclxuICAgIHRoaXMucGFydGljbGVTeXN0ZW1Ob2RlLnVwZGF0ZSgpO1xyXG4gICAgdGhpcy5yZWdpb25zTm9kZSAmJiB0aGlzLnJlZ2lvbnNOb2RlLnVwZGF0ZSgpO1xyXG4gIH1cclxufVxyXG5cclxuZ2FzUHJvcGVydGllcy5yZWdpc3RlciggJ0RpZmZ1c2lvblNjcmVlblZpZXcnLCBEaWZmdXNpb25TY3JlZW5WaWV3ICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBLE9BQU9BLG1CQUFtQixNQUFNLHFDQUFxQztBQUNyRSxPQUFPQyxzQkFBc0IsTUFBTSx3Q0FBd0M7QUFDM0UsT0FBT0MsNEJBQTRCLE1BQU0sOENBQThDO0FBQ3ZGLE9BQU9DLGNBQWMsTUFBTSxxQ0FBcUM7QUFDaEUsT0FBT0MsMEJBQTBCLE1BQU0saURBQWlEO0FBQ3hGLE9BQU9DLFdBQVcsTUFBTSxrQ0FBa0M7QUFDMUQsT0FBT0MsYUFBYSxNQUFNLHdCQUF3QjtBQUVsRCxPQUFPQyxnQkFBZ0IsTUFBTSx1QkFBdUI7QUFDcEQsT0FBT0MsZ0JBQWdCLE1BQU0sdUJBQXVCO0FBQ3BELE9BQU9DLHNCQUFzQixNQUFNLDZCQUE2QjtBQUNoRSxPQUFPQyxxQkFBcUIsTUFBTSw0QkFBNEI7QUFDOUQsT0FBT0MsMkJBQTJCLE1BQU0sa0NBQWtDO0FBQzFFLE9BQU9DLHVCQUF1QixNQUFNLDhCQUE4QjtBQUNsRSxPQUFPQyxvQkFBb0IsTUFBTSwyQkFBMkI7QUFDNUQsT0FBT0MsU0FBUyxNQUFNLGdCQUFnQjtBQUV0QyxlQUFlLE1BQU1DLG1CQUFtQixTQUFTWixjQUFjLENBQUM7RUFNdkRhLFdBQVdBLENBQUVDLEtBQXFCLEVBQUVDLE1BQWMsRUFBRztJQUUxRCxLQUFLLENBQUVELEtBQUssRUFBRUMsTUFBTSxFQUFFO01BQ3BCQyxhQUFhLEVBQUUsSUFBSSxDQUFDO0lBQ3RCLENBQUUsQ0FBQzs7SUFFSCxNQUFNQyxjQUFjLEdBQUcsSUFBSVIsdUJBQXVCLENBQUVNLE1BQU0sQ0FBQ0csWUFBWSxDQUFFLGdCQUFpQixDQUFFLENBQUM7O0lBRTdGO0lBQ0EsTUFBTUMsYUFBYSxHQUFHLElBQUliLHNCQUFzQixDQUFFUSxLQUFLLENBQUNNLFNBQVMsRUFBRU4sS0FBSyxDQUFDTyxrQkFBa0IsRUFBRTtNQUMzRk4sTUFBTSxFQUFFQSxNQUFNLENBQUNHLFlBQVksQ0FBRSxlQUFnQjtJQUMvQyxDQUFFLENBQUM7O0lBRUg7SUFDQSxNQUFNSSxTQUFTLEdBQUcsSUFBSVgsU0FBUyxDQUFFRyxLQUFLLENBQUNNLFNBQVMsQ0FBQ0csYUFBYSxDQUFDQyxLQUFLLEVBQUVWLEtBQUssQ0FBQ08sa0JBQWtCLEVBQUU7TUFDOUZJLGVBQWUsRUFBRVIsY0FBYyxDQUFDUyxvQkFBb0I7TUFDcERDLE9BQU8sRUFBRWIsS0FBSyxDQUFDTyxrQkFBa0IsQ0FBQ08sWUFBWSxDQUFFZCxLQUFLLENBQUNNLFNBQVMsQ0FBQ1MsUUFBUyxDQUFDO01BQzFFQyxHQUFHLEVBQUVoQixLQUFLLENBQUNPLGtCQUFrQixDQUFDVSxZQUFZLENBQUVqQixLQUFLLENBQUNNLFNBQVMsQ0FBQ1ksTUFBTSxHQUFHbEIsS0FBSyxDQUFDTSxTQUFTLENBQUNhLGFBQWMsQ0FBQztNQUNwR2xCLE1BQU0sRUFBRUEsTUFBTSxDQUFDRyxZQUFZLENBQUUsV0FBWTtJQUMzQyxDQUFFLENBQUM7O0lBRUg7SUFDQSxJQUFJZ0IsV0FBVyxHQUFHLElBQUk7SUFDdEIsSUFBS25DLDRCQUE0QixDQUFDb0MsT0FBTyxFQUFHO01BQzFDRCxXQUFXLEdBQUcsSUFBSWhDLFdBQVcsQ0FBRVksS0FBSyxDQUFDc0IsaUJBQWlCLENBQUNELE9BQU8sRUFBRXJCLEtBQUssQ0FBQ08sa0JBQW1CLENBQUM7SUFDNUY7O0lBRUE7SUFDQSxNQUFNZ0IsaUJBQWlCLEdBQUcsSUFBSWpDLGdCQUFnQixDQUFFVSxLQUFLLENBQUN3QixxQkFBcUIsRUFBRXhCLEtBQUssQ0FBQ00sU0FBUyxDQUFDWSxNQUFNLEVBQ2pHbEIsS0FBSyxDQUFDTyxrQkFBa0IsRUFBRXhCLG1CQUFtQixDQUFDMEMsc0JBQXNCLEVBQUU7TUFDcEVkLGVBQWUsRUFBRVIsY0FBYyxDQUFDdUIsMkJBQTJCO01BQzNEekIsTUFBTSxFQUFFQSxNQUFNLENBQUNHLFlBQVksQ0FBRSxtQkFBb0I7SUFDbkQsQ0FBRSxDQUFDO0lBQ0wsTUFBTXVCLGlCQUFpQixHQUFHLElBQUlyQyxnQkFBZ0IsQ0FBRVUsS0FBSyxDQUFDNEIscUJBQXFCLEVBQUU1QixLQUFLLENBQUNNLFNBQVMsQ0FBQ1ksTUFBTSxFQUNqR2xCLEtBQUssQ0FBQ08sa0JBQWtCLEVBQUV4QixtQkFBbUIsQ0FBQzhDLHNCQUFzQixFQUFFO01BQ3BFbEIsZUFBZSxFQUFFUixjQUFjLENBQUN1QiwyQkFBMkI7TUFDM0R6QixNQUFNLEVBQUVBLE1BQU0sQ0FBQ0csWUFBWSxDQUFFLG1CQUFvQjtJQUNuRCxDQUFFLENBQUM7O0lBRUw7SUFDQSxNQUFNMEIscUJBQXFCLEdBQUcsSUFBSWxDLG9CQUFvQixDQUFFSSxLQUFLLENBQUMrQixpQkFBaUIsRUFBRTtNQUMvRXBCLGVBQWUsRUFBRVIsY0FBYyxDQUFDNkIsK0JBQStCO01BQy9EQyxnQkFBZ0IsRUFBRTtRQUNoQkMsSUFBSSxFQUFFbkQsbUJBQW1CLENBQUMwQztNQUM1QixDQUFDO01BQ0RaLE9BQU8sRUFBRVIsYUFBYSxDQUFDUSxPQUFPO01BQzlCRyxHQUFHLEVBQUVYLGFBQWEsQ0FBQ2EsTUFBTSxHQUFHLEVBQUU7TUFDOUJqQixNQUFNLEVBQUVBLE1BQU0sQ0FBQ0csWUFBWSxDQUFFLHVCQUF3QjtJQUN2RCxDQUFFLENBQUM7SUFDSCxNQUFNK0IscUJBQXFCLEdBQUcsSUFBSXZDLG9CQUFvQixDQUFFSSxLQUFLLENBQUNvQyxpQkFBaUIsRUFBRTtNQUMvRXpCLGVBQWUsRUFBRVIsY0FBYyxDQUFDNkIsK0JBQStCO01BQy9EQyxnQkFBZ0IsRUFBRTtRQUNoQkMsSUFBSSxFQUFFbkQsbUJBQW1CLENBQUM4QztNQUM1QixDQUFDO01BQ0RoQixPQUFPLEVBQUVSLGFBQWEsQ0FBQ1EsT0FBTztNQUM5QkcsR0FBRyxFQUFFYyxxQkFBcUIsQ0FBQ1osTUFBTSxHQUFHLENBQUM7TUFDckNqQixNQUFNLEVBQUVBLE1BQU0sQ0FBQ0csWUFBWSxDQUFFLHVCQUF3QjtJQUN2RCxDQUFFLENBQUM7O0lBRUg7SUFDQSxNQUFNaUMsZ0JBQWdCLEdBQUcsSUFBSTlDLGdCQUFnQixDQUFFUyxLQUFLLENBQUNzQyxRQUFRLEVBQUV0QyxLQUFLLENBQUN1QyxTQUFTLEVBQUV2QyxLQUFLLENBQUNPLGtCQUFrQixFQUFFO01BQ3hHaUMsZ0JBQWdCLEVBQUVyQyxjQUFjLENBQUNzQyxvQkFBb0I7TUFDckR4QyxNQUFNLEVBQUVBLE1BQU0sQ0FBQ0csWUFBWSxDQUFFLGtCQUFtQjtJQUNsRCxDQUFFLENBQUM7SUFDSGlDLGdCQUFnQixDQUFDSyxjQUFjLENBQUNDLElBQUksQ0FBRUMsTUFBTSxJQUFJO01BQzlDUCxnQkFBZ0IsQ0FBQ3hCLE9BQU8sR0FBR1IsYUFBYSxDQUFDUSxPQUFPO01BQ2hEd0IsZ0JBQWdCLENBQUNuQixNQUFNLEdBQUdiLGFBQWEsQ0FBQ1csR0FBRyxHQUFHLEVBQUU7SUFDbEQsQ0FBRSxDQUFDOztJQUVIO0lBQ0EsTUFBTTZCLFlBQVksR0FBRyxJQUFJcEQscUJBQXFCLENBQUVPLEtBQUssQ0FBQzhDLFlBQVksRUFBRTlDLEtBQUssQ0FBQytDLGFBQWEsRUFDckYvQyxLQUFLLENBQUNPLGtCQUFrQixFQUN4QlAsS0FBSyxDQUFDTSxTQUFTLENBQUMwQyxrQkFBa0IsRUFDbENoRCxLQUFLLENBQUNpRCx5QkFBeUIsRUFDL0JqRCxLQUFLLENBQUNrRCxTQUFTLENBQUNDLGlCQUFpQixFQUNqQ2hELGNBQWMsRUFBRTtNQUNkaUQsVUFBVSxFQUFFLEdBQUc7TUFDZkMsS0FBSyxFQUFFLElBQUksQ0FBQ0MsWUFBWSxDQUFDRCxLQUFLLEdBQUdyRSxzQkFBc0IsQ0FBQ3VFLG9CQUFvQjtNQUM1RXZDLEdBQUcsRUFBRSxJQUFJLENBQUNzQyxZQUFZLENBQUN0QyxHQUFHLEdBQUdoQyxzQkFBc0IsQ0FBQ3dFLG9CQUFvQjtNQUN4RXZELE1BQU0sRUFBRUEsTUFBTSxDQUFDRyxZQUFZLENBQUUsY0FBZTtJQUM5QyxDQUFFLENBQUM7O0lBRUw7SUFDQSxNQUFNcUQsa0JBQWtCLEdBQUcsSUFBSS9ELDJCQUEyQixDQUFFTSxLQUFNLENBQUM7O0lBRW5FO0lBQ0FBLEtBQUssQ0FBQ2lELHlCQUF5QixDQUFDTixJQUFJLENBQUUsTUFBTTtNQUMxQyxJQUFLLENBQUMzQyxLQUFLLENBQUMwRCxpQkFBaUIsQ0FBQ2hELEtBQUssRUFBRztRQUNwQytDLGtCQUFrQixDQUFDRSxNQUFNLENBQUMsQ0FBQztNQUM3QjtJQUNGLENBQUUsQ0FBQzs7SUFFSDtJQUNBLE1BQU1DLGFBQWEsR0FBRyxJQUFJekUsMEJBQTBCLENBQUVhLEtBQUssQ0FBQ2tELFNBQVMsRUFBRTtNQUNyRVcsa0JBQWtCLEVBQUUsSUFBSSxDQUFDQyxxQkFBcUI7TUFDOUM3RCxNQUFNLEVBQUVBLE1BQU0sQ0FBQ0csWUFBWSxDQUFFLGVBQWdCO0lBQy9DLENBQUUsQ0FBQzs7SUFFSDtJQUNBZ0IsV0FBVyxJQUFJLElBQUksQ0FBQzJDLFFBQVEsQ0FBRTNDLFdBQVksQ0FBQztJQUMzQyxJQUFJLENBQUMyQyxRQUFRLENBQUUxQixnQkFBaUIsQ0FBQztJQUNqQyxJQUFJLENBQUMwQixRQUFRLENBQUVsQixZQUFhLENBQUM7SUFDN0IsSUFBSSxDQUFDa0IsUUFBUSxDQUFFdkQsU0FBVSxDQUFDO0lBQzFCLElBQUksQ0FBQ3VELFFBQVEsQ0FBRTFELGFBQWMsQ0FBQztJQUM5QixJQUFJLENBQUMwRCxRQUFRLENBQUVOLGtCQUFtQixDQUFDO0lBQ25DLElBQUksQ0FBQ00sUUFBUSxDQUFFeEMsaUJBQWtCLENBQUM7SUFDbEMsSUFBSSxDQUFDd0MsUUFBUSxDQUFFcEMsaUJBQWtCLENBQUM7SUFDbEMsSUFBSSxDQUFDb0MsUUFBUSxDQUFFakMscUJBQXNCLENBQUM7SUFDdEMsSUFBSSxDQUFDaUMsUUFBUSxDQUFFNUIscUJBQXNCLENBQUM7SUFDdEMsSUFBSSxDQUFDNEIsUUFBUSxDQUFFSCxhQUFjLENBQUM7O0lBRTlCO0lBQ0EsSUFBSSxDQUFDSSxlQUFlLENBQUNDLE1BQU0sQ0FBRTtNQUMzQkMsSUFBSSxFQUFFckIsWUFBWSxDQUFDcUIsSUFBSTtNQUN2QmhELE1BQU0sRUFBRSxJQUFJLENBQUNvQyxZQUFZLENBQUNwQyxNQUFNLEdBQUdsQyxzQkFBc0IsQ0FBQ3dFO0lBQzVELENBQUUsQ0FBQzs7SUFFSDtJQUNBMUIscUJBQXFCLENBQUNxQyxVQUFVLENBQUMsQ0FBQzs7SUFFbEM7SUFDQTtJQUNBdEIsWUFBWSxDQUFDdUIsU0FBUyxHQUFHLElBQUksQ0FBQ2QsWUFBWSxDQUFDZSxNQUFNLEdBQUcsSUFBSSxDQUFDTCxlQUFlLENBQUNLLE1BQU0sR0FDcEQsQ0FBQyxHQUFHckYsc0JBQXNCLENBQUN3RSxvQkFBc0IsR0FBRyxFQUFFO0lBRWpGLElBQUksQ0FBQ3JELGNBQWMsR0FBR0EsY0FBYztJQUNwQyxJQUFJLENBQUNzRCxrQkFBa0IsR0FBR0Esa0JBQWtCO0lBQzVDLElBQUksQ0FBQ3JDLFdBQVcsR0FBR0EsV0FBVztFQUNoQztFQUVnQmtELE9BQU9BLENBQUEsRUFBUztJQUM5QkMsTUFBTSxJQUFJQSxNQUFNLENBQUUsS0FBSyxFQUFFLDhEQUErRCxDQUFDO0lBQ3pGLEtBQUssQ0FBQ0QsT0FBTyxDQUFDLENBQUM7RUFDakI7RUFFbUJFLEtBQUtBLENBQUEsRUFBUztJQUMvQixLQUFLLENBQUNBLEtBQUssQ0FBQyxDQUFDO0lBQ2IsSUFBSSxDQUFDckUsY0FBYyxDQUFDcUUsS0FBSyxDQUFDLENBQUM7RUFDN0I7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7RUFDa0JDLFFBQVFBLENBQUVDLEVBQVUsRUFBUztJQUMzQ0gsTUFBTSxJQUFJQSxNQUFNLENBQUVHLEVBQUUsSUFBSSxDQUFDLEVBQUcsZUFBY0EsRUFBRyxFQUFFLENBQUM7SUFDaEQsSUFBSSxDQUFDakIsa0JBQWtCLENBQUNFLE1BQU0sQ0FBQyxDQUFDO0lBQ2hDLElBQUksQ0FBQ3ZDLFdBQVcsSUFBSSxJQUFJLENBQUNBLFdBQVcsQ0FBQ3VDLE1BQU0sQ0FBQyxDQUFDO0VBQy9DO0FBQ0Y7QUFFQXRFLGFBQWEsQ0FBQ3NGLFFBQVEsQ0FBRSxxQkFBcUIsRUFBRTdFLG1CQUFvQixDQUFDIn0=