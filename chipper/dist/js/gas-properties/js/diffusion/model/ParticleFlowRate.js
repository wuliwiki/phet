// Copyright 2019-2022, University of Colorado Boulder

/**
 * ParticleFlowRate is a sub-model of the 'Diffusion' screen model, responsible for flow rate for one set of particles.
 * Flow rate is the number of particles moving between the two sides of the container, in particles/ps.
 * It uses a running average.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import NumberProperty from '../../../../axon/js/NumberProperty.js';
import { combineOptions } from '../../../../phet-core/js/optionize.js';
import gasProperties from '../../gasProperties.js';

// constants
const FLOW_RATE_PROPERTY_OPTIONS = {
  isValidValue: value => value >= 0,
  units: 'particles/ps',
  phetioReadOnly: true // derived from state of the particle system
};

// number of samples used to compute running average, see https://github.com/phetsims/gas-properties/issues/51
const NUMBER_OF_SAMPLES = 300;
export default class ParticleFlowRate {
  // flow rate to left side of container, in particles/ps

  // flow rate to right side of container, in particles/ps

  // samples of number of particles that have crossed the container's divider
  // particles that crossed from right to left <--
  // particles that crossed from left to right -->
  // dt values for each sample
  /**
   * @param dividerX - x position of the container's divider
   * @param particles - particles to be monitored
   * @param tandem
   */
  constructor(dividerX, particles, tandem) {
    this.dividerX = dividerX;
    this.particles = particles;
    this.leftFlowRateProperty = new NumberProperty(0, combineOptions({}, FLOW_RATE_PROPERTY_OPTIONS, {
      tandem: tandem.createTandem('leftFlowRateProperty'),
      phetioDocumentation: 'flow rate of particles to the left side of the container'
    }));
    this.rightFlowRateProperty = new NumberProperty(0, combineOptions({}, FLOW_RATE_PROPERTY_OPTIONS, {
      tandem: tandem.createTandem('rightFlowRateProperty'),
      phetioDocumentation: 'flow rate of particles to the right side of the container'
    }));
    this.leftCounts = []; // particles that crossed from right to left <--
    this.rightCounts = []; // particles that crossed from left to right -->

    this.dts = [];
  }
  dispose() {
    assert && assert(false, 'dispose is not supported, exists for the lifetime of the sim');
  }
  reset() {
    this.leftFlowRateProperty.reset();
    this.rightFlowRateProperty.reset();
    this.leftCounts.length = 0;
    this.rightCounts.length = 0;
    this.dts.length = 0;
  }

  /**
   * @param dt - time delta , in ps
   */
  step(dt) {
    assert && assert(dt > 0, `invalid dt: ${dt}`);

    // Take a sample.
    let leftCount = 0; // <--
    let rightCount = 0; // -->
    for (let i = this.particles.length - 1; i >= 0; i--) {
      const particle = this.particles[i];
      if (particle.previousPosition.x >= this.dividerX && particle.position.x < this.dividerX) {
        leftCount++;
      } else if (particle.previousPosition.x <= this.dividerX && particle.position.x > this.dividerX) {
        rightCount++;
      }
    }
    this.leftCounts.push(leftCount);
    this.rightCounts.push(rightCount);
    this.dts.push(dt);

    // Drop the oldest sample.
    if (this.leftCounts.length > NUMBER_OF_SAMPLES) {
      this.leftCounts.shift();
      this.rightCounts.shift();
      this.dts.shift();
    }

    // All sample arrays should have the same length
    assert && assert(this.leftCounts.length === this.rightCounts.length && this.leftCounts.length === this.dts.length, 'all arrays should have the same length');

    // Update flow-rate Properties with an average of the current samples.
    const leftAverage = _.sum(this.leftCounts) / this.leftCounts.length;
    const rightAverage = _.sum(this.rightCounts) / this.rightCounts.length;
    const dtAverage = _.sum(this.dts) / this.dts.length;
    this.leftFlowRateProperty.value = leftAverage / dtAverage;
    this.rightFlowRateProperty.value = rightAverage / dtAverage;
  }
}
gasProperties.register('ParticleFlowRate', ParticleFlowRate);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJOdW1iZXJQcm9wZXJ0eSIsImNvbWJpbmVPcHRpb25zIiwiZ2FzUHJvcGVydGllcyIsIkZMT1dfUkFURV9QUk9QRVJUWV9PUFRJT05TIiwiaXNWYWxpZFZhbHVlIiwidmFsdWUiLCJ1bml0cyIsInBoZXRpb1JlYWRPbmx5IiwiTlVNQkVSX09GX1NBTVBMRVMiLCJQYXJ0aWNsZUZsb3dSYXRlIiwiY29uc3RydWN0b3IiLCJkaXZpZGVyWCIsInBhcnRpY2xlcyIsInRhbmRlbSIsImxlZnRGbG93UmF0ZVByb3BlcnR5IiwiY3JlYXRlVGFuZGVtIiwicGhldGlvRG9jdW1lbnRhdGlvbiIsInJpZ2h0Rmxvd1JhdGVQcm9wZXJ0eSIsImxlZnRDb3VudHMiLCJyaWdodENvdW50cyIsImR0cyIsImRpc3Bvc2UiLCJhc3NlcnQiLCJyZXNldCIsImxlbmd0aCIsInN0ZXAiLCJkdCIsImxlZnRDb3VudCIsInJpZ2h0Q291bnQiLCJpIiwicGFydGljbGUiLCJwcmV2aW91c1Bvc2l0aW9uIiwieCIsInBvc2l0aW9uIiwicHVzaCIsInNoaWZ0IiwibGVmdEF2ZXJhZ2UiLCJfIiwic3VtIiwicmlnaHRBdmVyYWdlIiwiZHRBdmVyYWdlIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJQYXJ0aWNsZUZsb3dSYXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE5LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFBhcnRpY2xlRmxvd1JhdGUgaXMgYSBzdWItbW9kZWwgb2YgdGhlICdEaWZmdXNpb24nIHNjcmVlbiBtb2RlbCwgcmVzcG9uc2libGUgZm9yIGZsb3cgcmF0ZSBmb3Igb25lIHNldCBvZiBwYXJ0aWNsZXMuXHJcbiAqIEZsb3cgcmF0ZSBpcyB0aGUgbnVtYmVyIG9mIHBhcnRpY2xlcyBtb3ZpbmcgYmV0d2VlbiB0aGUgdHdvIHNpZGVzIG9mIHRoZSBjb250YWluZXIsIGluIHBhcnRpY2xlcy9wcy5cclxuICogSXQgdXNlcyBhIHJ1bm5pbmcgYXZlcmFnZS5cclxuICpcclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICovXHJcblxyXG5pbXBvcnQgTnVtYmVyUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9OdW1iZXJQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBQcm9wZXJ0eSwgeyBQcm9wZXJ0eU9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1Byb3BlcnR5LmpzJztcclxuaW1wb3J0IHsgY29tYmluZU9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuaW1wb3J0IFRhbmRlbSBmcm9tICcuLi8uLi8uLi8uLi90YW5kZW0vanMvVGFuZGVtLmpzJztcclxuaW1wb3J0IFBhcnRpY2xlIGZyb20gJy4uLy4uL2NvbW1vbi9tb2RlbC9QYXJ0aWNsZS5qcyc7XHJcbmltcG9ydCBnYXNQcm9wZXJ0aWVzIGZyb20gJy4uLy4uL2dhc1Byb3BlcnRpZXMuanMnO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IEZMT1dfUkFURV9QUk9QRVJUWV9PUFRJT05TOiBQcm9wZXJ0eU9wdGlvbnM8bnVtYmVyPiA9IHtcclxuICBpc1ZhbGlkVmFsdWU6IHZhbHVlID0+ICggdmFsdWUgPj0gMCApLFxyXG4gIHVuaXRzOiAncGFydGljbGVzL3BzJyxcclxuICBwaGV0aW9SZWFkT25seTogdHJ1ZSAvLyBkZXJpdmVkIGZyb20gc3RhdGUgb2YgdGhlIHBhcnRpY2xlIHN5c3RlbVxyXG59O1xyXG5cclxuLy8gbnVtYmVyIG9mIHNhbXBsZXMgdXNlZCB0byBjb21wdXRlIHJ1bm5pbmcgYXZlcmFnZSwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9nYXMtcHJvcGVydGllcy9pc3N1ZXMvNTFcclxuY29uc3QgTlVNQkVSX09GX1NBTVBMRVMgPSAzMDA7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXJ0aWNsZUZsb3dSYXRlIHtcclxuXHJcbiAgcHJpdmF0ZSByZWFkb25seSBkaXZpZGVyWDogbnVtYmVyO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgcGFydGljbGVzOiBQYXJ0aWNsZVtdO1xyXG5cclxuICAvLyBmbG93IHJhdGUgdG8gbGVmdCBzaWRlIG9mIGNvbnRhaW5lciwgaW4gcGFydGljbGVzL3BzXHJcbiAgcHVibGljIHJlYWRvbmx5IGxlZnRGbG93UmF0ZVByb3BlcnR5OiBQcm9wZXJ0eTxudW1iZXI+O1xyXG5cclxuICAvLyBmbG93IHJhdGUgdG8gcmlnaHQgc2lkZSBvZiBjb250YWluZXIsIGluIHBhcnRpY2xlcy9wc1xyXG4gIHB1YmxpYyByZWFkb25seSByaWdodEZsb3dSYXRlUHJvcGVydHk6IFByb3BlcnR5PG51bWJlcj47XHJcblxyXG4gIC8vIHNhbXBsZXMgb2YgbnVtYmVyIG9mIHBhcnRpY2xlcyB0aGF0IGhhdmUgY3Jvc3NlZCB0aGUgY29udGFpbmVyJ3MgZGl2aWRlclxyXG4gIHByaXZhdGUgcmVhZG9ubHkgbGVmdENvdW50czogbnVtYmVyW107IC8vIHBhcnRpY2xlcyB0aGF0IGNyb3NzZWQgZnJvbSByaWdodCB0byBsZWZ0IDwtLVxyXG4gIHByaXZhdGUgcmVhZG9ubHkgcmlnaHRDb3VudHM6IG51bWJlcltdOyAvLyBwYXJ0aWNsZXMgdGhhdCBjcm9zc2VkIGZyb20gbGVmdCB0byByaWdodCAtLT5cclxuXHJcbiAgLy8gZHQgdmFsdWVzIGZvciBlYWNoIHNhbXBsZVxyXG4gIHByaXZhdGUgcmVhZG9ubHkgZHRzOiBudW1iZXJbXTtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIGRpdmlkZXJYIC0geCBwb3NpdGlvbiBvZiB0aGUgY29udGFpbmVyJ3MgZGl2aWRlclxyXG4gICAqIEBwYXJhbSBwYXJ0aWNsZXMgLSBwYXJ0aWNsZXMgdG8gYmUgbW9uaXRvcmVkXHJcbiAgICogQHBhcmFtIHRhbmRlbVxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggZGl2aWRlclg6IG51bWJlciwgcGFydGljbGVzOiBQYXJ0aWNsZVtdLCB0YW5kZW06IFRhbmRlbSApIHtcclxuXHJcbiAgICB0aGlzLmRpdmlkZXJYID0gZGl2aWRlclg7XHJcbiAgICB0aGlzLnBhcnRpY2xlcyA9IHBhcnRpY2xlcztcclxuXHJcbiAgICB0aGlzLmxlZnRGbG93UmF0ZVByb3BlcnR5ID0gbmV3IE51bWJlclByb3BlcnR5KCAwLFxyXG4gICAgICBjb21iaW5lT3B0aW9uczxQcm9wZXJ0eU9wdGlvbnM8bnVtYmVyPj4oIHt9LCBGTE9XX1JBVEVfUFJPUEVSVFlfT1BUSU9OUywge1xyXG4gICAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2xlZnRGbG93UmF0ZVByb3BlcnR5JyApLFxyXG4gICAgICAgIHBoZXRpb0RvY3VtZW50YXRpb246ICdmbG93IHJhdGUgb2YgcGFydGljbGVzIHRvIHRoZSBsZWZ0IHNpZGUgb2YgdGhlIGNvbnRhaW5lcidcclxuICAgICAgfSApICk7XHJcblxyXG4gICAgdGhpcy5yaWdodEZsb3dSYXRlUHJvcGVydHkgPSBuZXcgTnVtYmVyUHJvcGVydHkoIDAsXHJcbiAgICAgIGNvbWJpbmVPcHRpb25zPFByb3BlcnR5T3B0aW9uczxudW1iZXI+Pigge30sIEZMT1dfUkFURV9QUk9QRVJUWV9PUFRJT05TLCB7XHJcbiAgICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAncmlnaHRGbG93UmF0ZVByb3BlcnR5JyApLFxyXG4gICAgICAgIHBoZXRpb0RvY3VtZW50YXRpb246ICdmbG93IHJhdGUgb2YgcGFydGljbGVzIHRvIHRoZSByaWdodCBzaWRlIG9mIHRoZSBjb250YWluZXInXHJcbiAgICAgIH0gKSApO1xyXG5cclxuICAgIHRoaXMubGVmdENvdW50cyA9IFtdOyAvLyBwYXJ0aWNsZXMgdGhhdCBjcm9zc2VkIGZyb20gcmlnaHQgdG8gbGVmdCA8LS1cclxuICAgIHRoaXMucmlnaHRDb3VudHMgPSBbXTsgLy8gcGFydGljbGVzIHRoYXQgY3Jvc3NlZCBmcm9tIGxlZnQgdG8gcmlnaHQgLS0+XHJcblxyXG4gICAgdGhpcy5kdHMgPSBbXTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggZmFsc2UsICdkaXNwb3NlIGlzIG5vdCBzdXBwb3J0ZWQsIGV4aXN0cyBmb3IgdGhlIGxpZmV0aW1lIG9mIHRoZSBzaW0nICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLmxlZnRGbG93UmF0ZVByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICB0aGlzLnJpZ2h0Rmxvd1JhdGVQcm9wZXJ0eS5yZXNldCgpO1xyXG4gICAgdGhpcy5sZWZ0Q291bnRzLmxlbmd0aCA9IDA7XHJcbiAgICB0aGlzLnJpZ2h0Q291bnRzLmxlbmd0aCA9IDA7XHJcbiAgICB0aGlzLmR0cy5sZW5ndGggPSAwO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIGR0IC0gdGltZSBkZWx0YSAsIGluIHBzXHJcbiAgICovXHJcbiAgcHVibGljIHN0ZXAoIGR0OiBudW1iZXIgKTogdm9pZCB7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBkdCA+IDAsIGBpbnZhbGlkIGR0OiAke2R0fWAgKTtcclxuXHJcbiAgICAvLyBUYWtlIGEgc2FtcGxlLlxyXG4gICAgbGV0IGxlZnRDb3VudCA9IDA7IC8vIDwtLVxyXG4gICAgbGV0IHJpZ2h0Q291bnQgPSAwOyAvLyAtLT5cclxuICAgIGZvciAoIGxldCBpID0gdGhpcy5wYXJ0aWNsZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0gKSB7XHJcbiAgICAgIGNvbnN0IHBhcnRpY2xlID0gdGhpcy5wYXJ0aWNsZXNbIGkgXTtcclxuICAgICAgaWYgKCBwYXJ0aWNsZS5wcmV2aW91c1Bvc2l0aW9uLnggPj0gdGhpcy5kaXZpZGVyWCAmJiBwYXJ0aWNsZS5wb3NpdGlvbi54IDwgdGhpcy5kaXZpZGVyWCApIHtcclxuICAgICAgICBsZWZ0Q291bnQrKztcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmICggcGFydGljbGUucHJldmlvdXNQb3NpdGlvbi54IDw9IHRoaXMuZGl2aWRlclggJiYgcGFydGljbGUucG9zaXRpb24ueCA+IHRoaXMuZGl2aWRlclggKSB7XHJcbiAgICAgICAgcmlnaHRDb3VudCsrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLmxlZnRDb3VudHMucHVzaCggbGVmdENvdW50ICk7XHJcbiAgICB0aGlzLnJpZ2h0Q291bnRzLnB1c2goIHJpZ2h0Q291bnQgKTtcclxuICAgIHRoaXMuZHRzLnB1c2goIGR0ICk7XHJcblxyXG4gICAgLy8gRHJvcCB0aGUgb2xkZXN0IHNhbXBsZS5cclxuICAgIGlmICggdGhpcy5sZWZ0Q291bnRzLmxlbmd0aCA+IE5VTUJFUl9PRl9TQU1QTEVTICkge1xyXG4gICAgICB0aGlzLmxlZnRDb3VudHMuc2hpZnQoKTtcclxuICAgICAgdGhpcy5yaWdodENvdW50cy5zaGlmdCgpO1xyXG4gICAgICB0aGlzLmR0cy5zaGlmdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFsbCBzYW1wbGUgYXJyYXlzIHNob3VsZCBoYXZlIHRoZSBzYW1lIGxlbmd0aFxyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5sZWZ0Q291bnRzLmxlbmd0aCA9PT0gdGhpcy5yaWdodENvdW50cy5sZW5ndGggJiYgdGhpcy5sZWZ0Q291bnRzLmxlbmd0aCA9PT0gdGhpcy5kdHMubGVuZ3RoLFxyXG4gICAgICAnYWxsIGFycmF5cyBzaG91bGQgaGF2ZSB0aGUgc2FtZSBsZW5ndGgnICk7XHJcblxyXG4gICAgLy8gVXBkYXRlIGZsb3ctcmF0ZSBQcm9wZXJ0aWVzIHdpdGggYW4gYXZlcmFnZSBvZiB0aGUgY3VycmVudCBzYW1wbGVzLlxyXG4gICAgY29uc3QgbGVmdEF2ZXJhZ2UgPSBfLnN1bSggdGhpcy5sZWZ0Q291bnRzICkgLyB0aGlzLmxlZnRDb3VudHMubGVuZ3RoO1xyXG4gICAgY29uc3QgcmlnaHRBdmVyYWdlID0gXy5zdW0oIHRoaXMucmlnaHRDb3VudHMgKSAvIHRoaXMucmlnaHRDb3VudHMubGVuZ3RoO1xyXG4gICAgY29uc3QgZHRBdmVyYWdlID0gXy5zdW0oIHRoaXMuZHRzICkgLyB0aGlzLmR0cy5sZW5ndGg7XHJcbiAgICB0aGlzLmxlZnRGbG93UmF0ZVByb3BlcnR5LnZhbHVlID0gbGVmdEF2ZXJhZ2UgLyBkdEF2ZXJhZ2U7XHJcbiAgICB0aGlzLnJpZ2h0Rmxvd1JhdGVQcm9wZXJ0eS52YWx1ZSA9IHJpZ2h0QXZlcmFnZSAvIGR0QXZlcmFnZTtcclxuICB9XHJcbn1cclxuXHJcbmdhc1Byb3BlcnRpZXMucmVnaXN0ZXIoICdQYXJ0aWNsZUZsb3dSYXRlJywgUGFydGljbGVGbG93UmF0ZSApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsY0FBYyxNQUFNLHVDQUF1QztBQUVsRSxTQUFTQyxjQUFjLFFBQVEsdUNBQXVDO0FBR3RFLE9BQU9DLGFBQWEsTUFBTSx3QkFBd0I7O0FBRWxEO0FBQ0EsTUFBTUMsMEJBQW1ELEdBQUc7RUFDMURDLFlBQVksRUFBRUMsS0FBSyxJQUFNQSxLQUFLLElBQUksQ0FBRztFQUNyQ0MsS0FBSyxFQUFFLGNBQWM7RUFDckJDLGNBQWMsRUFBRSxJQUFJLENBQUM7QUFDdkIsQ0FBQzs7QUFFRDtBQUNBLE1BQU1DLGlCQUFpQixHQUFHLEdBQUc7QUFFN0IsZUFBZSxNQUFNQyxnQkFBZ0IsQ0FBQztFQUtwQzs7RUFHQTs7RUFHQTtFQUN1QztFQUNDO0VBRXhDO0VBR0E7QUFDRjtBQUNBO0FBQ0E7QUFDQTtFQUNTQyxXQUFXQSxDQUFFQyxRQUFnQixFQUFFQyxTQUFxQixFQUFFQyxNQUFjLEVBQUc7SUFFNUUsSUFBSSxDQUFDRixRQUFRLEdBQUdBLFFBQVE7SUFDeEIsSUFBSSxDQUFDQyxTQUFTLEdBQUdBLFNBQVM7SUFFMUIsSUFBSSxDQUFDRSxvQkFBb0IsR0FBRyxJ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