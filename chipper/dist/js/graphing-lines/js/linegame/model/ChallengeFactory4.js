// Copyright 2013-2023, University of Colorado Boulder

/**
 * Creates game challenges for Level 4, as specified in the design document.
 * Uses the same sets of slopes and y-intercepts as Level 2, but generates different challenges.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import Fraction from '../../../../phetcommon/js/model/Fraction.js';
import graphingLines from '../../graphingLines.js';
import BaseChallengeFactory from './BaseChallengeFactory.js';
import ChallengeFactory2 from './ChallengeFactory2.js';
import EquationForm from './EquationForm.js';
import GraphTheLine from './GraphTheLine.js';
import MakeTheEquation from './MakeTheEquation.js';
import ManipulationMode from './ManipulationMode.js';
import ValuePool from './ValuePool.js';
export default class ChallengeFactory4 extends ChallengeFactory2 {
  constructor() {
    super();
  }

  /**
   * Creates challenges for this game level.
   */
  createChallenges() {
    const challenges = [];

    // hoist vars
    let slope;
    let point;
    let positiveSlopes;

    // pools of values for slope and y-intercept
    const slopePool = new ValuePool(this.createSlopeArrays());
    const yInterceptPool = new ValuePool(this.createYInterceptArrays());

    // equation form for 3rd challenge of each type
    const equationForms = [EquationForm.SLOPE_INTERCEPT, EquationForm.POINT_SLOPE];

    // CHALLENGE 1: Make-the-Equation, slope-intercept form
    challenges.push(new MakeTheEquation('1: MakeTheEquation, required y-intercepts, slope and intercept variable', this.createSlopeInterceptLine(slopePool.chooseOptional(), yInterceptPool.chooseRequired()), EquationForm.SLOPE_INTERCEPT, ManipulationMode.SLOPE_INTERCEPT, this.xRange, this.yRange));

    // CHALLENGE 2: Make-the-Equation, point-slope form
    slope = slopePool.chooseRequired();
    point = BaseChallengeFactory.choosePointForSlope(slope, this.xRange, this.yRange);
    challenges.push(new MakeTheEquation('2: MakeTheEquation, required slope, point and slope variable', this.createPointSlopeLine(point, slope), EquationForm.POINT_SLOPE, ManipulationMode.POINT_SLOPE, this.xRange, this.yRange));

    // CHALLENGE 3: Make-the-Equation, slope-intercept or point-slope form (random choice)
    if (ValuePool.choose(equationForms) === EquationForm.SLOPE_INTERCEPT) {
      // Make-the-Equation, slope-intercept form
      challenges.push(new MakeTheEquation('3: MakeTheEquation, slope and intercept variable', this.createSlopeInterceptLine(slopePool.chooseOptional(), yInterceptPool.chooseOptional()), EquationForm.SLOPE_INTERCEPT, ManipulationMode.SLOPE_INTERCEPT, this.xRange, this.yRange));
    } else {
      // Make-the-Equation, point-slope form
      slope = slopePool.chooseRequired();
      point = BaseChallengeFactory.choosePointForSlope(slope, this.xRange, this.yRange);
      challenges.push(new MakeTheEquation('3: MakeTheEquation , required slopes, point and slope variable', this.createPointSlopeLine(point, slope), EquationForm.POINT_SLOPE, ManipulationMode.POINT_SLOPE, this.xRange, this.yRange));
    }

    // CHALLENGE 4: Graph-the-Line, slope-intercept form, slope and intercept variable
    challenges.push(new GraphTheLine('4: GraphTheLine, required y-intercept, slope and intercept variable', this.createSlopeInterceptLine(slopePool.chooseOptional(), yInterceptPool.chooseRequired()), EquationForm.SLOPE_INTERCEPT, ManipulationMode.SLOPE_INTERCEPT, this.xRange, this.yRange));

    // CHALLENGE 5: Graph-the-Line, point-slope form
    slope = slopePool.chooseRequired();
    point = BaseChallengeFactory.choosePointForSlope(slope, this.xRange, this.yRange);
    challenges.push(new GraphTheLine('5: GraphTheLine, required slope, point and slope variable', this.createPointSlopeLine(point, slope), EquationForm.POINT_SLOPE, ManipulationMode.POINT_SLOPE, this.xRange, this.yRange));

    // CHALLENGE 6: Graph-the-Line, slope-intercept or point-slope form (random choice), 2 points.
    // Choose y-intercept or point such that (x2,y2) is off the graph, so that user is forced to invert the slope.
    {
      // choose a positive fractional slope
      positiveSlopes = ChallengeFactory2.createPositiveFractionalSlopes();
      positiveSlopes.push(new Fraction(2, 1));
      positiveSlopes.push(new Fraction(3, 1));
      positiveSlopes.push(new Fraction(4, 1));
      positiveSlopes.push(new Fraction(5, 1));
      slope = ValuePool.choose(positiveSlopes);
      point = BaseChallengeFactory.choosePointForSlopeInversion(slope, this.xRange, this.yRange);
      if (ValuePool.choose(equationForms) === EquationForm.SLOPE_INTERCEPT) {
        // Graph-the-Line, slope-intercept, 2 points variable
        challenges.push(new GraphTheLine('6: GraphTheLine, force slope inversion, 2 points variable', this.createSlopeInterceptLine(slope, point.y), EquationForm.SLOPE_INTERCEPT, ManipulationMode.TWO_POINTS, this.xRange, this.yRange));
      } else {
        // Graph-the-Line, point-slope, 2 points variable
        challenges.push(new GraphTheLine('6: GraphTheLine, force slope inversion, 2 points variable', this.createPointSlopeLine(point, slope), EquationForm.POINT_SLOPE, ManipulationMode.TWO_POINTS, this.xRange, this.yRange));
      }
    }
    return challenges;
  }
}
graphingLines.register('ChallengeFactory4', ChallengeFactory4);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJGcmFjdGlvbiIsImdyYXBoaW5nTGluZXMiLCJCYXNlQ2hhbGxlbmdlRmFjdG9yeSIsIkNoYWxsZW5nZUZhY3RvcnkyIiwiRXF1YXRpb25Gb3JtIiwiR3JhcGhUaGVMaW5lIiwiTWFrZVRoZUVxdWF0aW9uIiwiTWFuaXB1bGF0aW9uTW9kZSIsIlZhbHVlUG9vbCIsIkNoYWxsZW5nZUZhY3Rvcnk0IiwiY29uc3RydWN0b3IiLCJjcmVhdGVDaGFsbGVuZ2VzIiwiY2hhbGxlbmdlcyIsInNsb3BlIiwicG9pbnQiLCJwb3NpdGl2ZVNsb3BlcyIsInNsb3BlUG9vbCIsImNyZWF0ZVNsb3BlQXJyYXlzIiwieUludGVyY2VwdFBvb2wiLCJjcmVhdGVZSW50ZXJjZXB0QXJyYXlzIiwiZXF1YXRpb25Gb3JtcyIsIlNMT1BFX0lOVEVSQ0VQVCIsIlBPSU5UX1NMT1BFIiwicHVzaCIsImNyZWF0ZVNsb3BlSW50ZXJjZXB0TGluZSIsImNob29zZU9wdGlvbmFsIiwiY2hvb3NlUmVxdWlyZWQiLCJ4UmFuZ2UiLCJ5UmFuZ2UiLCJjaG9vc2VQb2ludEZvclNsb3BlIiwiY3JlYXRlUG9pbnRTbG9wZUxpbmUiLCJjaG9vc2UiLCJjcmVhdGVQb3NpdGl2ZUZyYWN0aW9uYWxTbG9wZXMiLCJjaG9vc2VQb2ludEZvclNsb3BlSW52ZXJzaW9uIiwieSIsIlRXT19QT0lOVFMiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkNoYWxsZW5nZUZhY3Rvcnk0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgZ2FtZSBjaGFsbGVuZ2VzIGZvciBMZXZlbCA0LCBhcyBzcGVjaWZpZWQgaW4gdGhlIGRlc2lnbiBkb2N1bWVudC5cclxuICogVXNlcyB0aGUgc2FtZSBzZXRzIG9mIHNsb3BlcyBhbmQgeS1pbnRlcmNlcHRzIGFzIExldmVsIDIsIGJ1dCBnZW5lcmF0ZXMgZGlmZmVyZW50IGNoYWxsZW5nZXMuXHJcbiAqXHJcbiAqIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXHJcbiAqL1xyXG5cclxuaW1wb3J0IEZyYWN0aW9uIGZyb20gJy4uLy4uLy4uLy4uL3BoZXRjb21tb24vanMvbW9kZWwvRnJhY3Rpb24uanMnO1xyXG5pbXBvcnQgZ3JhcGhpbmdMaW5lcyBmcm9tICcuLi8uLi9ncmFwaGluZ0xpbmVzLmpzJztcclxuaW1wb3J0IEJhc2VDaGFsbGVuZ2VGYWN0b3J5IGZyb20gJy4vQmFzZUNoYWxsZW5nZUZhY3RvcnkuanMnO1xyXG5pbXBvcnQgQ2hhbGxlbmdlIGZyb20gJy4vQ2hhbGxlbmdlLmpzJztcclxuaW1wb3J0IENoYWxsZW5nZUZhY3RvcnkyIGZyb20gJy4vQ2hhbGxlbmdlRmFjdG9yeTIuanMnO1xyXG5pbXBvcnQgRXF1YXRpb25Gb3JtIGZyb20gJy4vRXF1YXRpb25Gb3JtLmpzJztcclxuaW1wb3J0IEdyYXBoVGhlTGluZSBmcm9tICcuL0dyYXBoVGhlTGluZS5qcyc7XHJcbmltcG9ydCBNYWtlVGhlRXF1YXRpb24gZnJvbSAnLi9NYWtlVGhlRXF1YXRpb24uanMnO1xyXG5pbXBvcnQgTWFuaXB1bGF0aW9uTW9kZSBmcm9tICcuL01hbmlwdWxhdGlvbk1vZGUuanMnO1xyXG5pbXBvcnQgVmFsdWVQb29sIGZyb20gJy4vVmFsdWVQb29sLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENoYWxsZW5nZUZhY3Rvcnk0IGV4dGVuZHMgQ2hhbGxlbmdlRmFjdG9yeTIge1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyBjaGFsbGVuZ2VzIGZvciB0aGlzIGdhbWUgbGV2ZWwuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGNyZWF0ZUNoYWxsZW5nZXMoKTogQ2hhbGxlbmdlW10ge1xyXG5cclxuICAgIGNvbnN0IGNoYWxsZW5nZXMgPSBbXTtcclxuXHJcbiAgICAvLyBob2lzdCB2YXJzXHJcbiAgICBsZXQgc2xvcGU7XHJcbiAgICBsZXQgcG9pbnQ7XHJcbiAgICBsZXQgcG9zaXRpdmVTbG9wZXM7XHJcblxyXG4gICAgLy8gcG9vbHMgb2YgdmFsdWVzIGZvciBzbG9wZSBhbmQgeS1pbnRlcmNlcHRcclxuICAgIGNvbnN0IHNsb3BlUG9vbCA9IG5ldyBWYWx1ZVBvb2woIHRoaXMuY3JlYXRlU2xvcGVBcnJheXMoKSApO1xyXG4gICAgY29uc3QgeUludGVyY2VwdFBvb2wgPSBuZXcgVmFsdWVQb29sKCB0aGlzLmNyZWF0ZVlJbnRlcmNlcHRBcnJheXMoKSApO1xyXG5cclxuICAgIC8vIGVxdWF0aW9uIGZvcm0gZm9yIDNyZCBjaGFsbGVuZ2Ugb2YgZWFjaCB0eXBlXHJcbiAgICBjb25zdCBlcXVhdGlvbkZvcm1zID0gWyBFcXVhdGlvbkZvcm0uU0xPUEVfSU5URVJDRVBULCBFcXVhdGlvbkZvcm0uUE9JTlRfU0xPUEUgXTtcclxuXHJcbiAgICAvLyBDSEFMTEVOR0UgMTogTWFrZS10aGUtRXF1YXRpb24sIHNsb3BlLWludGVyY2VwdCBmb3JtXHJcbiAgICBjaGFsbGVuZ2VzLnB1c2goIG5ldyBNYWtlVGhlRXF1YXRpb24oXHJcbiAgICAgICcxOiBNYWtlVGhlRXF1YXRpb24sIHJlcXVpcmVkIHktaW50ZXJjZXB0cywgc2xvcGUgYW5kIGludGVyY2VwdCB2YXJpYWJsZScsXHJcbiAgICAgIHRoaXMuY3JlYXRlU2xvcGVJbnRlcmNlcHRMaW5lKCBzbG9wZVBvb2wuY2hvb3NlT3B0aW9uYWwoKSwgeUludGVyY2VwdFBvb2wuY2hvb3NlUmVxdWlyZWQoKSApLFxyXG4gICAgICBFcXVhdGlvbkZvcm0uU0xPUEVfSU5URVJDRVBULFxyXG4gICAgICBNYW5pcHVsYXRpb25Nb2RlLlNMT1BFX0lOVEVSQ0VQVCxcclxuICAgICAgdGhpcy54UmFuZ2UsIHRoaXMueVJhbmdlICkgKTtcclxuXHJcbiAgICAvLyBDSEFMTEVOR0UgMjogTWFrZS10aGUtRXF1YXRpb24sIHBvaW50LXNsb3BlIGZvcm1cclxuICAgIHNsb3BlID0gc2xvcGVQb29sLmNob29zZVJlcXVpcmVkKCk7XHJcbiAgICBwb2ludCA9IEJhc2VDaGFsbGVuZ2VGYWN0b3J5LmNob29zZVBvaW50Rm9yU2xvcGUoIHNsb3BlLCB0aGlzLnhSYW5nZSwgdGhpcy55UmFuZ2UgKTtcclxuICAgIGNoYWxsZW5nZXMucHVzaCggbmV3IE1ha2VUaGVFcXVhdGlvbihcclxuICAgICAgJzI6IE1ha2VUaGVFcXVhdGlvbiwgcmVxdWlyZWQgc2xvcGUsIHBvaW50IGFuZCBzbG9wZSB2YXJpYWJsZScsXHJcbiAgICAgIHRoaXMuY3JlYXRlUG9pbnRTbG9wZUxpbmUoIHBvaW50LCBzbG9wZSApLFxyXG4gICAgICBFcXVhdGlvbkZvcm0uUE9JTlRfU0xPUEUsXHJcbiAgICAgIE1hbmlwdWxhdGlvbk1vZGUuUE9JTlRfU0xPUEUsXHJcbiAgICAgIHRoaXMueFJhbmdlLCB0aGlzLnlSYW5nZSApICk7XHJcblxyXG4gICAgLy8gQ0hBTExFTkdFIDM6IE1ha2UtdGhlLUVxdWF0aW9uLCBzbG9wZS1pbnRlcmNlcHQgb3IgcG9pbnQtc2xvcGUgZm9ybSAocmFuZG9tIGNob2ljZSlcclxuICAgIGlmICggVmFsdWVQb29sLmNob29zZSggZXF1YXRpb25Gb3JtcyApID09PSBFcXVhdGlvbkZvcm0uU0xPUEVfSU5URVJDRVBUICkge1xyXG5cclxuICAgICAgLy8gTWFrZS10aGUtRXF1YXRpb24sIHNsb3BlLWludGVyY2VwdCBmb3JtXHJcbiAgICAgIGNoYWxsZW5nZXMucHVzaCggbmV3IE1ha2VUaGVFcXVhdGlvbihcclxuICAgICAgICAnMzogTWFrZVRoZUVxdWF0aW9uLCBzbG9wZSBhbmQgaW50ZXJjZXB0IHZhcmlhYmxlJyxcclxuICAgICAgICB0aGlzLmNyZWF0ZVNsb3BlSW50ZXJjZXB0TGluZSggc2xvcGVQb29sLmNob29zZU9wdGlvbmFsKCksIHlJbnRlcmNlcHRQb29sLmNob29zZU9wdGlvbmFsKCkgKSxcclxuICAgICAgICBFcXVhdGlvbkZvcm0uU0xPUEVfSU5URVJDRVBULFxyXG4gICAgICAgIE1hbmlwdWxhdGlvbk1vZGUuU0xPUEVfSU5URVJDRVBULFxyXG4gICAgICAgIHRoaXMueFJhbmdlLCB0aGlzLnlSYW5nZSApICk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuXHJcbiAgICAgIC8vIE1ha2UtdGhlLUVxdWF0aW9uLCBwb2ludC1zbG9wZSBmb3JtXHJcbiAgICAgIHNsb3BlID0gc2xvcGVQb29sLmNob29zZVJlcXVpcmVkKCk7XHJcbiAgICAgIHBvaW50ID0gQmFzZUNoYWxsZW5nZUZhY3RvcnkuY2hvb3NlUG9pbnRGb3JTbG9wZSggc2xvcGUsIHRoaXMueFJhbmdlLCB0aGlzLnlSYW5nZSApO1xyXG4gICAgICBjaGFsbGVuZ2VzLnB1c2goIG5ldyBNYWtlVGhlRXF1YXRpb24oXHJcbiAgICAgICAgJzM6IE1ha2VUaGVFcXVhdGlvbiAsIHJlcXVpcmVkIHNsb3BlcywgcG9pbnQgYW5kIHNsb3BlIHZhcmlhYmxlJyxcclxuICAgICAgICB0aGlzLmNyZWF0ZVBvaW50U2xvcGVMaW5lKCBwb2ludCwgc2xvcGUgKSxcclxuICAgICAgICBFcXVhdGlvbkZvcm0uUE9JTlRfU0xPUEUsXHJcbiAgICAgICAgTWFuaXB1bGF0aW9uTW9kZS5QT0lOVF9TTE9QRSxcclxuICAgICAgICB0aGlzLnhSYW5nZSwgdGhpcy55UmFuZ2UgKSApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENIQUxMRU5HRSA0OiBHcmFwaC10aGUtTGluZSwgc2xvcGUtaW50ZXJjZXB0IGZvcm0sIHNsb3BlIGFuZCBpbnRlcmNlcHQgdmFyaWFibGVcclxuICAgIGNoYWxsZW5nZXMucHVzaCggbmV3IEdyYXBoVGhlTGluZShcclxuICAgICAgJzQ6IEdyYXBoVGhlTGluZSwgcmVxdWlyZWQgeS1pbnRlcmNlcHQsIHNsb3BlIGFuZCBpbnRlcmNlcHQgdmFyaWFibGUnLFxyXG4gICAgICB0aGlzLmNyZWF0ZVNsb3BlSW50ZXJjZXB0TGluZSggc2xvcGVQb29sLmNob29zZU9wdGlvbmFsKCksIHlJbnRlcmNlcHRQb29sLmNob29zZVJlcXVpcmVkKCkgKSxcclxuICAgICAgRXF1YXRpb25Gb3JtLlNMT1BFX0lOVEVSQ0VQVCxcclxuICAgICAgTWFuaXB1bGF0aW9uTW9kZS5TTE9QRV9JTlRFUkNFUFQsXHJcbiAgICAgIHRoaXMueFJhbmdlLCB0aGlzLnlSYW5nZSApICk7XHJcblxyXG4gICAgLy8gQ0hBTExFTkdFIDU6IEdyYXBoLXRoZS1MaW5lLCBwb2ludC1zbG9wZSBmb3JtXHJcbiAgICBzbG9wZSA9IHNsb3BlUG9vbC5jaG9vc2VSZXF1aXJlZCgpO1xyXG4gICAgcG9pbnQgPSBCYXNlQ2hhbGxlbmdlRmFjdG9yeS5jaG9vc2VQb2ludEZvclNsb3BlKCBzbG9wZSwgdGhpcy54UmFuZ2UsIHRoaXMueVJhbmdlICk7XHJcbiAgICBjaGFsbGVuZ2VzLnB1c2goIG5ldyBHcmFwaFRoZUxpbmUoXHJcbiAgICAgICc1OiBHcmFwaFRoZUxpbmUsIHJlcXVpcmVkIHNsb3BlLCBwb2ludCBhbmQgc2xvcGUgdmFyaWFibGUnLFxyXG4gICAgICB0aGlzLmNyZWF0ZVBvaW50U2xvcGVMaW5lKCBwb2ludCwgc2xvcGUgKSxcclxuICAgICAgRXF1YXRpb25Gb3JtLlBPSU5UX1NMT1BFLFxyXG4gICAgICBNYW5pcHVsYXRpb25Nb2RlLlBPSU5UX1NMT1BFLFxyXG4gICAgICB0aGlzLnhSYW5nZSwgdGhpcy55UmFuZ2UgKSApO1xyXG5cclxuICAgIC8vIENIQUxMRU5HRSA2OiBHcmFwaC10aGUtTGluZSwgc2xvcGUtaW50ZXJjZXB0IG9yIHBvaW50LXNsb3BlIGZvcm0gKHJhbmRvbSBjaG9pY2UpLCAyIHBvaW50cy5cclxuICAgIC8vIENob29zZSB5LWludGVyY2VwdCBvciBwb2ludCBzdWNoIHRoYXQgKHgyLHkyKSBpcyBvZmYgdGhlIGdyYXBoLCBzbyB0aGF0IHVzZXIgaXMgZm9yY2VkIHRvIGludmVydCB0aGUgc2xvcGUuXHJcbiAgICB7XHJcbiAgICAgIC8vIGNob29zZSBhIHBvc2l0aXZlIGZyYWN0aW9uYWwgc2xvcGVcclxuICAgICAgcG9zaXRpdmVTbG9wZXMgPSBDaGFsbGVuZ2VGYWN0b3J5Mi5jcmVhdGVQb3NpdGl2ZUZyYWN0aW9uYWxTbG9wZXMoKTtcclxuICAgICAgcG9zaXRpdmVTbG9wZXMucHVzaCggbmV3IEZyYWN0aW9uKCAyLCAxICkgKTtcclxuICAgICAgcG9zaXRpdmVTbG9wZXMucHVzaCggbmV3IEZyYWN0aW9uKCAzLCAxICkgKTtcclxuICAgICAgcG9zaXRpdmVTbG9wZXMucHVzaCggbmV3IEZyYWN0aW9uKCA0LCAxICkgKTtcclxuICAgICAgcG9zaXRpdmVTbG9wZXMucHVzaCggbmV3IEZyYWN0aW9uKCA1LCAxICkgKTtcclxuICAgICAgc2xvcGUgPSBWYWx1ZVBvb2wuY2hvb3NlKCBwb3NpdGl2ZVNsb3BlcyApO1xyXG5cclxuICAgICAgcG9pbnQgPSBCYXNlQ2hhbGxlbmdlRmFjdG9yeS5jaG9vc2VQb2ludEZvclNsb3BlSW52ZXJzaW9uKCBzbG9wZSwgdGhpcy54UmFuZ2UsIHRoaXMueVJhbmdlICk7XHJcblxyXG4gICAgICBpZiAoIFZhbHVlUG9vbC5jaG9vc2UoIGVxdWF0aW9uRm9ybXMgKSA9PT0gRXF1YXRpb25Gb3JtLlNMT1BFX0lOVEVSQ0VQVCApIHtcclxuXHJcbiAgICAgICAgLy8gR3JhcGgtdGhlLUxpbmUsIHNsb3BlLWludGVyY2VwdCwgMiBwb2ludHMgdmFyaWFibGVcclxuICAgICAgICBjaGFsbGVuZ2VzLnB1c2goIG5ldyBHcmFwaFRoZUxpbmUoXHJcbiAgICAgICAgICAnNjogR3JhcGhUaGVMaW5lLCBmb3JjZSBzbG9wZSBpbnZlcnNpb24sIDIgcG9pbnRzIHZhcmlhYmxlJyxcclxuICAgICAgICAgIHRoaXMuY3JlYXRlU2xvcGVJbnRlcmNlcHRMaW5lKCBzbG9wZSwgcG9pbnQueSApLFxyXG4gICAgICAgICAgRXF1YXRpb25Gb3JtLlNMT1BFX0lOVEVSQ0VQVCxcclxuICAgICAgICAgIE1hbmlwdWxhdGlvbk1vZGUuVFdPX1BPSU5UUyxcclxuICAgICAgICAgIHRoaXMueFJhbmdlLCB0aGlzLnlSYW5nZSApICk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcblxyXG4gICAgICAgIC8vIEdyYXBoLXRoZS1MaW5lLCBwb2ludC1zbG9wZSwgMiBwb2ludHMgdmFyaWFibGVcclxuICAgICAgICBjaGFsbGVuZ2VzLnB1c2goIG5ldyBHcmFwaFRoZUxpbmUoXHJcbiAgICAgICAgICAnNjogR3JhcGhUaGVMaW5lLCBmb3JjZSBzbG9wZSBpbnZlcnNpb24sIDIgcG9pbnRzIHZhcmlhYmxlJyxcclxuICAgICAgICAgIHRoaXMuY3JlYXRlUG9pbnRTbG9wZUxpbmUoIHBvaW50LCBzbG9wZSApLFxyXG4gICAgICAgICAgRXF1YXRpb25Gb3JtLlBPSU5UX1NMT1BFLFxyXG4gICAgICAgICAgTWFuaXB1bGF0aW9uTW9kZS5UV09fUE9JTlRTLFxyXG4gICAgICAgICAgdGhpcy54UmFuZ2UsIHRoaXMueVJhbmdlICkgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBjaGFsbGVuZ2VzO1xyXG4gIH1cclxufVxyXG5cclxuZ3JhcGhpbmdMaW5lcy5yZWdpc3RlciggJ0NoYWxsZW5nZUZhY3Rvcnk0JywgQ2hhbGxlbmdlRmFjdG9yeTQgKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxRQUFRLE1BQU0sNkNBQTZDO0FBQ2xFLE9BQU9DLGFBQWEsTUFBTSx3QkFBd0I7QUFDbEQsT0FBT0Msb0JBQW9CLE1BQU0sMkJBQTJCO0FBRTVELE9BQU9DLGlCQUFpQixNQUFNLHdCQUF3QjtBQUN0RCxPQUFPQyxZQUFZLE1BQU0sbUJBQW1CO0FBQzVDLE9BQU9DLFlBQVksTUFBTSxtQkFBbUI7QUFDNUMsT0FBT0MsZUFBZSxNQUFNLHNCQUFzQjtBQUNsRCxPQUFPQyxnQkFBZ0IsTUFBTSx1QkFBdUI7QUFDcEQsT0FBT0Ms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