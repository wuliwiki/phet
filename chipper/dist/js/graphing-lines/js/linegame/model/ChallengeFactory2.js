// Copyright 2013-2023, University of Colorado Boulder

/**
 * Creates game challenges for Level 2, as specified in the design document.
 * Slope and intercept are uniquely chosen.
 * Point (x1,y1) is not unique, but is chosen such that slope indicator is on the graph.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import Range from '../../../../dot/js/Range.js';
import Fraction from '../../../../phetcommon/js/model/Fraction.js';
import graphingLines from '../../graphingLines.js';
import BaseChallengeFactory from './BaseChallengeFactory.js';
import EquationForm from './EquationForm.js';
import GraphTheLine from './GraphTheLine.js';
import MakeTheEquation from './MakeTheEquation.js';
import ManipulationMode from './ManipulationMode.js';
import ValuePool from './ValuePool.js';
export default class ChallengeFactory2 extends BaseChallengeFactory {
  constructor() {
    super();
  }

  /**
   * Creates challenges for this game level.
   */
  createChallenges() {
    const challenges = [];

    // hoist vars
    let slope;
    let point;
    let description;
    let manipulationMode;

    // pools of values for slope and y-intercept
    const slopePool = new ValuePool(this.createSlopeArrays());
    const yInterceptPool = new ValuePool(this.createYInterceptArrays());

    // CHALLENGE 1: Graph-the-Line, slope-intercept form
    challenges.push(new GraphTheLine('1: GraphTheLine, required slope, slope variable', this.createSlopeInterceptLine(slopePool.chooseRequired(), yInterceptPool.chooseOptional()), EquationForm.SLOPE_INTERCEPT, ManipulationMode.SLOPE, this.xRange, this.yRange));

    // CHALLENGE 2: Graph-the-Line, slope-intercept form
    challenges.push(new GraphTheLine('2: GraphTheLine, required y-intercept, y-intercept variable', this.createSlopeInterceptLine(slopePool.chooseOptional(), yInterceptPool.chooseRequired()), EquationForm.SLOPE_INTERCEPT, ManipulationMode.INTERCEPT, this.xRange, this.yRange));

    // CHALLENGE 3: Make-the-Equation, slope-intercept form
    challenges.push(new MakeTheEquation('3: MakeTheEquation, required slope, slope variable', this.createSlopeInterceptLine(slopePool.chooseRequired(), yInterceptPool.chooseOptional()), EquationForm.SLOPE_INTERCEPT, ManipulationMode.SLOPE, this.xRange, this.yRange));

    // CHALLENGE 4: Make-the-Equation, slope-intercept form
    challenges.push(new MakeTheEquation('4: MakeTheEquation, required y-intercept, y-intercept variable', this.createSlopeInterceptLine(slopePool.chooseOptional(), yInterceptPool.chooseRequired()), EquationForm.SLOPE_INTERCEPT, ManipulationMode.INTERCEPT, this.xRange, this.yRange));

    // for point-slope form, one of each manipulation mode
    const pointSlopeManipulationModes = [ManipulationMode.POINT, ManipulationMode.SLOPE];

    // CHALLENGE 5: Graph-the-Line, point-slope form, point or slope variable (random choice)
    {
      // manipulation mode
      manipulationMode = ValuePool.choose(pointSlopeManipulationModes);
      if (manipulationMode === ManipulationMode.SLOPE) {
        slope = slopePool.chooseRequired();
        description = '5: GraphTheLine, required slope, slope variable';
      } else {
        slope = slopePool.chooseOptional();
        description = '5: GraphTheLine, point variable';
      }
      point = BaseChallengeFactory.choosePointForSlope(slope, this.xRange, this.yRange);

      // challenge
      challenges.push(new GraphTheLine(description, this.createPointSlopeLine(point, slope), EquationForm.POINT_SLOPE, manipulationMode, this.xRange, this.yRange));
    }

    // CHALLENGE 6: Make-the-Equation, point-slope form, point or slope variable (whichever was not variable above)
    {
      // manipulation mode
      manipulationMode = ValuePool.choose(pointSlopeManipulationModes);
      if (manipulationMode === ManipulationMode.SLOPE) {
        slope = slopePool.chooseRequired();
        description = '6: MakeTheEquation, required slope, slope variable';
      } else {
        slope = slopePool.chooseOptional();
        description = '6: MakeTheEquation, point variable';
      }
      point = BaseChallengeFactory.choosePointForSlope(slope, this.xRange, this.yRange);

      // challenge
      challenges.push(new MakeTheEquation(description, this.createPointSlopeLine(point, slope), EquationForm.POINT_SLOPE, manipulationMode, this.xRange, this.yRange));
    }
    return challenges;
  }

  /**
   * Creates the 3 sets of slopes that are identified in the design document.
   */
  createSlopeArrays() {
    return [
    // positive and negative integers
    [new Fraction(1, 1), new Fraction(2, 1), new Fraction(3, 1), new Fraction(4, 1), new Fraction(5, 1), new Fraction(-1, 1), new Fraction(-2, 1), new Fraction(-3, 1), new Fraction(-4, 1), new Fraction(-5, 1)],
    // {Fraction[]} positive fractions
    ChallengeFactory2.createPositiveFractionalSlopes(),
    // negative fractions
    [new Fraction(-1, 2), new Fraction(-1, 3), new Fraction(-1, 4), new Fraction(-1, 5), new Fraction(-2, 3), new Fraction(-3, 4), new Fraction(-2, 5), new Fraction(-3, 5), new Fraction(-4, 5), new Fraction(-3, 2), new Fraction(-4, 3), new Fraction(-5, 2), new Fraction(-5, 3), new Fraction(-5, 4)]];
  }

  /**
   * Creates the sets of y-intercepts used for generating challenges.
   */
  createYInterceptArrays() {
    return [ValuePool.rangeToArray(new Range(this.yRange.min, -1)),
    // negative intercepts
    ValuePool.rangeToArray(new Range(1, this.yRange.max)) // positive intercepts
    ];
  }

  /**
   * Creates the set of positive fractional slopes that are identified in the design document.
   */
  static createPositiveFractionalSlopes() {
    return [
    // positive fractions
    new Fraction(1, 4), new Fraction(1, 5), new Fraction(1, 6), new Fraction(1, 7), new Fraction(2, 5), new Fraction(3, 5), new Fraction(2, 7), new Fraction(3, 7), new Fraction(4, 7), new Fraction(5, 2), new Fraction(3, 2), new Fraction(7, 2), new Fraction(7, 3), new Fraction(7, 4)];
  }
}
graphingLines.register('ChallengeFactory2', ChallengeFactory2);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSYW5nZSIsIkZyYWN0aW9uIiwiZ3JhcGhpbmdMaW5lcyIsIkJhc2VDaGFsbGVuZ2VGYWN0b3J5IiwiRXF1YXRpb25Gb3JtIiwiR3JhcGhUaGVMaW5lIiwiTWFrZVRoZUVxdWF0aW9uIiwiTWFuaXB1bGF0aW9uTW9kZSIsIlZhbHVlUG9vbCIsIkNoYWxsZW5nZUZhY3RvcnkyIiwiY29uc3RydWN0b3IiLCJjcmVhdGVDaGFsbGVuZ2VzIiwiY2hhbGxlbmdlcyIsInNsb3BlIiwicG9pbnQiLCJkZXNjcmlwdGlvbiIsIm1hbmlwdWxhdGlvbk1vZGUiLCJzbG9wZVBvb2wiLCJjcmVhdGVTbG9wZUFycmF5cyIsInlJbnRlcmNlcHRQb29sIiwiY3JlYXRlWUludGVyY2VwdEFycmF5cyIsInB1c2giLCJjcmVhdGVTbG9wZUludGVyY2VwdExpbmUiLCJjaG9vc2VSZXF1aXJlZCIsImNob29zZU9wdGlvbmFsIiwiU0xPUEVfSU5URVJDRVBUIiwiU0xPUEUiLCJ4UmFuZ2UiLCJ5UmFuZ2UiLCJJTlRFUkNFUFQiLCJwb2ludFNsb3BlTWFuaXB1bGF0aW9uTW9kZXMiLCJQT0lOVCIsImNob29zZSIsImNob29zZVBvaW50Rm9yU2xvcGUiLCJjcmVhdGVQb2ludFNsb3BlTGluZSIsIlBPSU5UX1NMT1BFIiwiY3JlYXRlUG9zaXRpdmVGcmFjdGlvbmFsU2xvcGVzIiwicmFuZ2VUb0FycmF5IiwibWluIiwibWF4IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJDaGFsbGVuZ2VGYWN0b3J5Mi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxMy0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGdhbWUgY2hhbGxlbmdlcyBmb3IgTGV2ZWwgMiwgYXMgc3BlY2lmaWVkIGluIHRoZSBkZXNpZ24gZG9jdW1lbnQuXHJcbiAqIFNsb3BlIGFuZCBpbnRlcmNlcHQgYXJlIHVuaXF1ZWx5IGNob3Nlbi5cclxuICogUG9pbnQgKHgxLHkxKSBpcyBub3QgdW5pcXVlLCBidXQgaXMgY2hvc2VuIHN1Y2ggdGhhdCBzbG9wZSBpbmRpY2F0b3IgaXMgb24gdGhlIGdyYXBoLlxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCBSYW5nZSBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvUmFuZ2UuanMnO1xyXG5pbXBvcnQgRnJhY3Rpb24gZnJvbSAnLi4vLi4vLi4vLi4vcGhldGNvbW1vbi9qcy9tb2RlbC9GcmFjdGlvbi5qcyc7XHJcbmltcG9ydCBncmFwaGluZ0xpbmVzIGZyb20gJy4uLy4uL2dyYXBoaW5nTGluZXMuanMnO1xyXG5pbXBvcnQgQmFzZUNoYWxsZW5nZUZhY3RvcnkgZnJvbSAnLi9CYXNlQ2hhbGxlbmdlRmFjdG9yeS5qcyc7XHJcbmltcG9ydCBDaGFsbGVuZ2UgZnJvbSAnLi9DaGFsbGVuZ2UuanMnO1xyXG5pbXBvcnQgRXF1YXRpb25Gb3JtIGZyb20gJy4vRXF1YXRpb25Gb3JtLmpzJztcclxuaW1wb3J0IEdyYXBoVGhlTGluZSBmcm9tICcuL0dyYXBoVGhlTGluZS5qcyc7XHJcbmltcG9ydCBNYWtlVGhlRXF1YXRpb24gZnJvbSAnLi9NYWtlVGhlRXF1YXRpb24uanMnO1xyXG5pbXBvcnQgTWFuaXB1bGF0aW9uTW9kZSBmcm9tICcuL01hbmlwdWxhdGlvbk1vZGUuanMnO1xyXG5pbXBvcnQgVmFsdWVQb29sIGZyb20gJy4vVmFsdWVQb29sLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENoYWxsZW5nZUZhY3RvcnkyIGV4dGVuZHMgQmFzZUNoYWxsZW5nZUZhY3Rvcnkge1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyBjaGFsbGVuZ2VzIGZvciB0aGlzIGdhbWUgbGV2ZWwuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGNyZWF0ZUNoYWxsZW5nZXMoKTogQ2hhbGxlbmdlW10ge1xyXG5cclxuICAgIGNvbnN0IGNoYWxsZW5nZXMgPSBbXTtcclxuXHJcbiAgICAvLyBob2lzdCB2YXJzXHJcbiAgICBsZXQgc2xvcGU7XHJcbiAgICBsZXQgcG9pbnQ7XHJcbiAgICBsZXQgZGVzY3JpcHRpb247XHJcbiAgICBsZXQgbWFuaXB1bGF0aW9uTW9kZTtcclxuXHJcbiAgICAvLyBwb29scyBvZiB2YWx1ZXMgZm9yIHNsb3BlIGFuZCB5LWludGVyY2VwdFxyXG4gICAgY29uc3Qgc2xvcGVQb29sID0gbmV3IFZhbHVlUG9vbCggdGhpcy5jcmVhdGVTbG9wZUFycmF5cygpICk7XHJcbiAgICBjb25zdCB5SW50ZXJjZXB0UG9vbCA9IG5ldyBWYWx1ZVBvb2woIHRoaXMuY3JlYXRlWUludGVyY2VwdEFycmF5cygpICk7XHJcblxyXG4gICAgLy8gQ0hBTExFTkdFIDE6IEdyYXBoLXRoZS1MaW5lLCBzbG9wZS1pbnRlcmNlcHQgZm9ybVxyXG4gICAgY2hhbGxlbmdlcy5wdXNoKCBuZXcgR3JhcGhUaGVMaW5lKFxyXG4gICAgICAnMTogR3JhcGhUaGVMaW5lLCByZXF1aXJlZCBzbG9wZSwgc2xvcGUgdmFyaWFibGUnLFxyXG4gICAgICB0aGlzLmNyZWF0ZVNsb3BlSW50ZXJjZXB0TGluZSggc2xvcGVQb29sLmNob29zZVJlcXVpcmVkKCksIHlJbnRlcmNlcHRQb29sLmNob29zZU9wdGlvbmFsKCkgKSxcclxuICAgICAgRXF1YXRpb25Gb3JtLlNMT1BFX0lOVEVSQ0VQVCxcclxuICAgICAgTWFuaXB1bGF0aW9uTW9kZS5TTE9QRSxcclxuICAgICAgdGhpcy54UmFuZ2UsIHRoaXMueVJhbmdlICkgKTtcclxuXHJcbiAgICAvLyBDSEFMTEVOR0UgMjogR3JhcGgtdGhlLUxpbmUsIHNsb3BlLWludGVyY2VwdCBmb3JtXHJcbiAgICBjaGFsbGVuZ2VzLnB1c2goIG5ldyBHcmFwaFRoZUxpbmUoXHJcbiAgICAgICcyOiBHcmFwaFRoZUxpbmUsIHJlcXVpcmVkIHktaW50ZXJjZXB0LCB5LWludGVyY2VwdCB2YXJpYWJsZScsXHJcbiAgICAgIHRoaXMuY3JlYXRlU2xvcGVJbnRlcmNlcHRMaW5lKCBzbG9wZVBvb2wuY2hvb3NlT3B0aW9uYWwoKSwgeUludGVyY2VwdFBvb2wuY2hvb3NlUmVxdWlyZWQoKSApLFxyXG4gICAgICBFcXVhdGlvbkZvcm0uU0xPUEVfSU5URVJDRVBULFxyXG4gICAgICBNYW5pcHVsYXRpb25Nb2RlLklOVEVSQ0VQVCxcclxuICAgICAgdGhpcy54UmFuZ2UsIHRoaXMueVJhbmdlICkgKTtcclxuXHJcbiAgICAvLyBDSEFMTEVOR0UgMzogTWFrZS10aGUtRXF1YXRpb24sIHNsb3BlLWludGVyY2VwdCBmb3JtXHJcbiAgICBjaGFsbGVuZ2VzLnB1c2goIG5ldyBNYWtlVGhlRXF1YXRpb24oXHJcbiAgICAgICczOiBNYWtlVGhlRXF1YXRpb24sIHJlcXVpcmVkIHNsb3BlLCBzbG9wZSB2YXJpYWJsZScsXHJcbiAgICAgIHRoaXMuY3JlYXRlU2xvcGVJbnRlcmNlcHRMaW5lKCBzbG9wZVBvb2wuY2hvb3NlUmVxdWlyZWQoKSwgeUludGVyY2VwdFBvb2wuY2hvb3NlT3B0aW9uYWwoKSApLFxyXG4gICAgICBFcXVhdGlvbkZvcm0uU0xPUEVfSU5URVJDRVBULFxyXG4gICAgICBNYW5pcHVsYXRpb25Nb2RlLlNMT1BFLFxyXG4gICAgICB0aGlzLnhSYW5nZSwgdGhpcy55UmFuZ2UgKSApO1xyXG5cclxuICAgIC8vIENIQUxMRU5HRSA0OiBNYWtlLXRoZS1FcXVhdGlvbiwgc2xvcGUtaW50ZXJjZXB0IGZvcm1cclxuICAgIGNoYWxsZW5nZXMucHVzaCggbmV3IE1ha2VUaGVFcXVhdGlvbihcclxuICAgICAgJzQ6IE1ha2VUaGVFcXVhdGlvbiwgcmVxdWlyZWQgeS1pbnRlcmNlcHQsIHktaW50ZXJjZXB0IHZhcmlhYmxlJyxcclxuICAgICAgdGhpcy5jcmVhdGVTbG9wZUludGVyY2VwdExpbmUoIHNsb3BlUG9vbC5jaG9vc2VPcHRpb25hbCgpLCB5SW50ZXJjZXB0UG9vbC5jaG9vc2VSZXF1aXJlZCgpICksXHJcbiAgICAgIEVxdWF0aW9uRm9ybS5TTE9QRV9JTlRFUkNFUFQsXHJcbiAgICAgIE1hbmlwdWxhdGlvbk1vZGUuSU5URVJDRVBULFxyXG4gICAgICB0aGlzLnhSYW5nZSwgdGhpcy55UmFuZ2UgKSApO1xyXG5cclxuICAgIC8vIGZvciBwb2ludC1zbG9wZSBmb3JtLCBvbmUgb2YgZWFjaCBtYW5pcHVsYXRpb24gbW9kZVxyXG4gICAgY29uc3QgcG9pbnRTbG9wZU1hbmlwdWxhdGlvbk1vZGVzID0gWyBNYW5pcHVsYXRpb25Nb2RlLlBPSU5ULCBNYW5pcHVsYXRpb25Nb2RlLlNMT1BFIF07XHJcblxyXG4gICAgLy8gQ0hBTExFTkdFIDU6IEdyYXBoLXRoZS1MaW5lLCBwb2ludC1zbG9wZSBmb3JtLCBwb2ludCBvciBzbG9wZSB2YXJpYWJsZSAocmFuZG9tIGNob2ljZSlcclxuICAgIHtcclxuICAgICAgLy8gbWFuaXB1bGF0aW9uIG1vZGVcclxuICAgICAgbWFuaXB1bGF0aW9uTW9kZSA9IFZhbHVlUG9vbC5jaG9vc2UoIHBvaW50U2xvcGVNYW5pcHVsYXRpb25Nb2RlcyApO1xyXG5cclxuICAgICAgaWYgKCBtYW5pcHVsYXRpb25Nb2RlID09PSBNYW5pcHVsYXRpb25Nb2RlLlNMT1BFICkge1xyXG4gICAgICAgIHNsb3BlID0gc2xvcGVQb29sLmNob29zZVJlcXVpcmVkKCk7XHJcbiAgICAgICAgZGVzY3JpcHRpb24gPSAnNTogR3JhcGhUaGVMaW5lLCByZXF1aXJlZCBzbG9wZSwgc2xvcGUgdmFyaWFibGUnO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHNsb3BlID0gc2xvcGVQb29sLmNob29zZU9wdGlvbmFsKCk7XHJcbiAgICAgICAgZGVzY3JpcHRpb24gPSAnNTogR3JhcGhUaGVMaW5lLCBwb2ludCB2YXJpYWJsZSc7XHJcbiAgICAgIH1cclxuICAgICAgcG9pbnQgPSBCYXNlQ2hhbGxlbmdlRmFjdG9yeS5jaG9vc2VQb2ludEZvclNsb3BlKCBzbG9wZSwgdGhpcy54UmFuZ2UsIHRoaXMueVJhbmdlICk7XHJcblxyXG4gICAgICAvLyBjaGFsbGVuZ2VcclxuICAgICAgY2hhbGxlbmdlcy5wdXNoKCBuZXcgR3JhcGhUaGVMaW5lKCBkZXNjcmlwdGlvbixcclxuICAgICAgICB0aGlzLmNyZWF0ZVBvaW50U2xvcGVMaW5lKCBwb2ludCwgc2xvcGUgKSxcclxuICAgICAgICBFcXVhdGlvbkZvcm0uUE9JTlRfU0xPUEUsXHJcbiAgICAgICAgbWFuaXB1bGF0aW9uTW9kZSxcclxuICAgICAgICB0aGlzLnhSYW5nZSwgdGhpcy55UmFuZ2UgKSApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENIQUxMRU5HRSA2OiBNYWtlLXRoZS1FcXVhdGlvbiwgcG9pbnQtc2xvcGUgZm9ybSwgcG9pbnQgb3Igc2xvcGUgdmFyaWFibGUgKHdoaWNoZXZlciB3YXMgbm90IHZhcmlhYmxlIGFib3ZlKVxyXG4gICAge1xyXG4gICAgICAvLyBtYW5pcHVsYXRpb24gbW9kZVxyXG4gICAgICBtYW5pcHVsYXRpb25Nb2RlID0gVmFsdWVQb29sLmNob29zZSggcG9pbnRTbG9wZU1hbmlwdWxhdGlvbk1vZGVzICk7XHJcblxyXG4gICAgICBpZiAoIG1hbmlwdWxhdGlvbk1vZGUgPT09IE1hbmlwdWxhdGlvbk1vZGUuU0xPUEUgKSB7XHJcbiAgICAgICAgc2xvcGUgPSBzbG9wZVBvb2wuY2hvb3NlUmVxdWlyZWQoKTtcclxuICAgICAgICBkZXNjcmlwdGlvbiA9ICc2OiBNYWtlVGhlRXF1YXRpb24sIHJlcXVpcmVkIHNsb3BlLCBzbG9wZSB2YXJpYWJsZSc7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgc2xvcGUgPSBzbG9wZVBvb2wuY2hvb3NlT3B0aW9uYWwoKTtcclxuICAgICAgICBkZXNjcmlwdGlvbiA9ICc2OiBNYWtlVGhlRXF1YXRpb24sIHBvaW50IHZhcmlhYmxlJztcclxuICAgICAgfVxyXG4gICAgICBwb2ludCA9IEJhc2VDaGFsbGVuZ2VGYWN0b3J5LmNob29zZVBvaW50Rm9yU2xvcGUoIHNsb3BlLCB0aGlzLnhSYW5nZSwgdGhpcy55UmFuZ2UgKTtcclxuXHJcbiAgICAgIC8vIGNoYWxsZW5nZVxyXG4gICAgICBjaGFsbGVuZ2VzLnB1c2goIG5ldyBNYWtlVGhlRXF1YXRpb24oIGRlc2NyaXB0aW9uLFxyXG4gICAgICAgIHRoaXMuY3JlYXRlUG9pbnRTbG9wZUxpbmUoIHBvaW50LCBzbG9wZSApLFxyXG4gICAgICAgIEVxdWF0aW9uRm9ybS5QT0lOVF9TTE9QRSxcclxuICAgICAgICBtYW5pcHVsYXRpb25Nb2RlLFxyXG4gICAgICAgIHRoaXMueFJhbmdlLCB0aGlzLnlSYW5nZSApICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNoYWxsZW5nZXM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIHRoZSAzIHNldHMgb2Ygc2xvcGVzIHRoYXQgYXJlIGlkZW50aWZpZWQgaW4gdGhlIGRlc2lnbiBkb2N1bWVudC5cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgY3JlYXRlU2xvcGVBcnJheXMoKTogRnJhY3Rpb25bXVtdIHtcclxuICAgIHJldHVybiBbXHJcblxyXG4gICAgICAvLyBwb3NpdGl2ZSBhbmQgbmVnYXRpdmUgaW50ZWdlcnNcclxuICAgICAgW1xyXG4gICAgICAgIG5ldyBGcmFjdGlvbiggMSwgMSApLFxyXG4gICAgICAgIG5ldyBGcmFjdGlvbiggMiwgMSApLFxyXG4gICAgICAgIG5ldyBGcmFjdGlvbiggMywgMSApLFxyXG4gICAgICAgIG5ldyBGcmFjdGlvbiggNCwgMSApLFxyXG4gICAgICAgIG5ldyBGcmFjdGlvbiggNSwgMSApLFxyXG4gICAgICAgIG5ldyBGcmFjdGlvbiggLTEsIDEgKSxcclxuICAgICAgICBuZXcgRnJhY3Rpb24oIC0yLCAxICksXHJcbiAgICAgICAgbmV3IEZyYWN0aW9uKCAtMywgMSApLFxyXG4gICAgICAgIG5ldyBGcmFjdGlvbiggLTQsIDEgKSxcclxuICAgICAgICBuZXcgRnJhY3Rpb24oIC01LCAxIClcclxuICAgICAgXSxcclxuXHJcbiAgICAgIC8vIHtGcmFjdGlvbltdfSBwb3NpdGl2ZSBmcmFjdGlvbnNcclxuICAgICAgQ2hhbGxlbmdlRmFjdG9yeTIuY3JlYXRlUG9zaXRpdmVGcmFjdGlvbmFsU2xvcGVzKCksXHJcblxyXG4gICAgICAvLyBuZWdhdGl2ZSBmcmFjdGlvbnNcclxuICAgICAgW1xyXG4gICAgICAgIG5ldyBGcmFjdGlvbiggLTEsIDIgKSxcclxuICAgICAgICBuZXcgRnJhY3Rpb24oIC0xLCAzICksXHJcbiAgICAgICAgbmV3IEZyYWN0aW9uKCAtMSwgNCApLFxyXG4gICAgICAgIG5ldyBGcmFjdGlvbiggLTEsIDUgKSxcclxuICAgICAgICBuZXcgRnJhY3Rpb24oIC0yLCAzICksXHJcbiAgICAgICAgbmV3IEZyYWN0aW9uKCAtMywgNCApLFxyXG4gICAgICAgIG5ldyBGcmFjdGlvbiggLTIsIDUgKSxcclxuICAgICAgICBuZXcgRnJhY3Rpb24oIC0zLCA1ICksXHJcbiAgICAgICAgbmV3IEZyYWN0aW9uKCAtNCwgNSApLFxyXG4gICAgICAgIG5ldyBGcmFjdGlvbiggLTMsIDIgKSxcclxuICAgICAgICBuZXcgRnJhY3Rpb24oIC00LCAzICksXHJcbiAgICAgICAgbmV3IEZyYWN0aW9uKCAtNSwgMiApLFxyXG4gICAgICAgIG5ldyBGcmFjdGlvbiggLTUsIDMgKSxcclxuICAgICAgICBuZXcgRnJhY3Rpb24oIC01LCA0IClcclxuICAgICAgXVxyXG4gICAgXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgdGhlIHNldHMgb2YgeS1pbnRlcmNlcHRzIHVzZWQgZm9yIGdlbmVyYXRpbmcgY2hhbGxlbmdlcy5cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgY3JlYXRlWUludGVyY2VwdEFycmF5cygpOiBudW1iZXJbXVtdIHtcclxuICAgIHJldHVybiBbXHJcbiAgICAgIFZhbHVlUG9vbC5yYW5nZVRvQXJyYXkoIG5ldyBSYW5nZSggdGhpcy55UmFuZ2UubWluLCAtMSApICksIC8vIG5lZ2F0aXZlIGludGVyY2VwdHNcclxuICAgICAgVmFsdWVQb29sLnJhbmdlVG9BcnJheSggbmV3IFJhbmdlKCAxLCB0aGlzLnlSYW5nZS5tYXggKSApICAgLy8gcG9zaXRpdmUgaW50ZXJjZXB0c1xyXG4gICAgXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgdGhlIHNldCBvZiBwb3NpdGl2ZSBmcmFjdGlvbmFsIHNsb3BlcyB0aGF0IGFyZSBpZGVudGlmaWVkIGluIHRoZSBkZXNpZ24gZG9jdW1lbnQuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBjcmVhdGVQb3NpdGl2ZUZyYWN0aW9uYWxTbG9wZXMoKTogRnJhY3Rpb25bXSB7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAvLyBwb3NpdGl2ZSBmcmFjdGlvbnNcclxuICAgICAgbmV3IEZyYWN0aW9uKCAxLCA0ICksXHJcbiAgICAgIG5ldyBGcmFjdGlvbiggMSwgNSApLFxyXG4gICAgICBuZXcgRnJhY3Rpb24oIDEsIDYgKSxcclxuICAgICAgbmV3IEZyYWN0aW9uKCAxLCA3ICksXHJcbiAgICAgIG5ldyBGcmFjdGlvbiggMiwgNSApLFxyXG4gICAgICBuZXcgRnJhY3Rpb24oIDMsIDUgKSxcclxuICAgICAgbmV3IEZyYWN0aW9uKCAyLCA3ICksXHJcbiAgICAgIG5ldyBGcmFjdGlvbiggMywgNyApLFxyXG4gICAgICBuZXcgRnJhY3Rpb24oIDQsIDcgKSxcclxuICAgICAgbmV3IEZyYWN0aW9uKCA1LCAyICksXHJcbiAgICAgIG5ldyBGcmFjdGlvbiggMywgMiApLFxyXG4gICAgICBuZXcgRnJhY3Rpb24oIDcsIDIgKSxcclxuICAgICAgbmV3IEZyYWN0aW9uKCA3LCAzICksXHJcbiAgICAgIG5ldyBGcmFjdGlvbiggNywgNCApXHJcbiAgICBdO1xyXG4gIH1cclxufVxyXG5cclxuZ3JhcGhpbmdMaW5lcy5y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QThCLENBQUMsQ0FBQztJQUVsRDtJQUNBLENBQ0UsSUFBSW5DLFFBQVEsQ0FBRSxDQUFDLENBQUMsRUFBRSxDQUFFLENBQUMsRUFDckIsSUFBSUEsUUFBUSxDQUFFLENBQUMsQ0FBQyxFQUFFLENBQUUsQ0FBQyxFQUNyQixJQUFJQSxRQUFRLENBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBRSxDQUFDLEVBQ3JCLElBQUlBLFFBQVEsQ0FBRSxDQUFDLENBQUMsRUFBRSxDQUFFLENBQUMsRUFDckIsSUFBSUEsUUFBUSxDQUFFLENBQUMsQ0FBQyxFQUFFLENBQUUsQ0FBQyxFQUNyQixJQUFJQSxRQUFRLENBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBRSxDQUFDLEVBQ3JCLElBQUlBLFFBQVEsQ0FBRSxDQUFDLENBQUMsRUFBRSxDQUFFLENBQUMsRUFDckIsSUFBSUEsUUFBUSxDQUFFLENBQUMsQ0FBQyxFQUFFLENBQUUsQ0FBQyxFQUNyQixJQUFJQSxRQUFRLENBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBRSxDQUFDLEVBQ3JCLElBQUlBLFFBQVEsQ0FBRSxDQUFDLENBQUMsRUFBRSxDQUFFLENBQUMsRUFDckIsSUFBSUEsUUFBUSxDQUFFLENBQUMsQ0FBQyxFQUFFLENBQUUsQ0FBQyxFQUNyQixJQUFJQSxRQUFRLENBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBRSxDQUFDLEVBQ3JCLElBQUlBLFFBQVEsQ0FBRSxDQUFDLENBQUMsRUFBRSxDQUFFLENBQUMsRUFDckIsSUFBSUEsUUFBUSxDQUFFLENBQUMsQ0FBQyxFQUFFLENBQUUsQ0FBQyxDQUN0QixDQUNGO0VBQ0g7O0VBRUE7QUFDRjtBQUNBO0VBQ1ltQixzQkFBc0JBLENBQUEsRUFBZTtJQUM3QyxPQUFPLENBQ0xaLFNBQVMsQ0FBQzZCLFlBQVksQ0FBRSxJQUFJckMsS0FBSyxDQUFFLElBQUksQ0FBQzRCLE1BQU0sQ0FBQ1UsR0FBRyxFQUFFLENBQUMsQ0FBRSxDQUFFLENBQUM7SUFBRTtJQUM1RDlCLFNBQVMsQ0FBQzZCLFlBQVksQ0FBRSxJQUFJckMsS0FBSyxDQUFFLENBQUMsRUFBRSxJQUFJLENBQUM0QixNQUFNLENBQUNXLEdBQUksQ0FBRSxDQUFDLENBQUc7SUFBQSxDQUM3RDtFQUNIOztFQUVBO0FBQ0Y7QUFDQTtFQUNFLE9BQWNILDhCQUE4QkEsQ0FBQSxFQUFlO0lBQ3pELE9BQU87SUFDTDtJQUNBLElBQUluQyxRQUFRLENBQUUsQ0FBQyxFQUFFLENBQUUsQ0FBQyxFQUNwQixJQUFJQSxRQUFRLENBQUUsQ0FBQyxFQUFFLENBQUUsQ0FBQyxFQUNwQixJQUFJQSxRQUFRLENBQUUsQ0FBQyxFQUFFLENBQUUsQ0FBQyxFQUNwQixJQUFJQSxRQUFRLENBQUUsQ0FBQyxFQUFFLENBQUUsQ0FBQyxFQUNwQixJQUFJQSxRQUFRLENBQUUsQ0FBQyxFQUFFLENBQUUsQ0FBQyxFQUNwQixJQUFJQSxRQUFRLENBQUUsQ0FBQyxFQUFFLENBQUUsQ0FBQyxFQUNwQixJQUFJQSxRQUFRLENBQUUsQ0FBQyxFQUFFLENBQUUsQ0FBQyxFQUNwQixJQUFJQSxRQUFRLENBQUUsQ0FBQyxFQUFFLENBQUUsQ0FBQyxFQUNwQixJQUFJQSxRQUFRLENBQUUsQ0FBQyxFQUFFLENBQUUsQ0FBQyxFQUNwQixJQUFJQSxRQUFRLENBQUUsQ0FBQyxFQUFFLENBQUUsQ0FBQyxFQUNwQixJQUFJQSxRQUFRLENBQUUsQ0FBQyxFQUFFLENBQUUsQ0FBQyxFQUNwQixJQUFJQSxRQUFRLENBQUUsQ0FBQyxFQUFFLENBQUUsQ0FBQyxFQUNwQixJQUFJQSxRQUFRLENBQUUsQ0FBQyxFQUFFLENBQUUsQ0FBQyxFQUNwQixJQUFJQSxRQUFRLENBQUUsQ0FBQyxFQUFFLENBQUUsQ0FBQyxDQUNyQjtFQUNIO0FBQ0Y7QUFFQUMsYUFBYSxDQUFDc0MsUUFBUSxDQUFFLG1CQUFtQixFQUFFL0IsaUJBQWtCLENBQUMifQ==