// Copyright 2013-2023, University of Colorado Boulder

/**
 * Base type for graph nodes in game challenges.
 * Renders the answer line, guess line, and slope tool.
 * Everything on the graph is hidden by default, it's up to subclasses and clients to determine what they want to see.
 * Optional manipulators are provided by subclasses.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import Property from '../../../../axon/js/Property.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import optionize from '../../../../phet-core/js/optionize.js';
import Line from '../../common/model/Line.js';
import GraphNode from '../../common/view/GraphNode.js';
import LineNode from '../../common/view/LineNode.js';
import PlottedPointNode from '../../common/view/PlottedPointNode.js';
import SlopeToolNode from '../../common/view/SlopeToolNode.js';
import graphingLines from '../../graphingLines.js';
import LineGameConstants from '../LineGameConstants.js';
export default class ChallengeGraphNode extends GraphNode {
  // answer to the challenge

  // the user's guess

  constructor(challenge, providedOptions) {
    const options = optionize()({
      // SelfOptions
      answerLineVisible: false,
      answerPointVisible: false,
      guessLineVisible: false,
      guessPointVisible: false,
      slopeToolVisible: false,
      slopeToolEnabled: true
    }, providedOptions);
    super(challenge.graph, challenge.modelViewTransform);

    // To reduce brain damage during development, show the answer as a translucent gray line.
    if (phet.chipper.queryParameters.showAnswers) {
      this.addChild(new LineNode(new Property(challenge.answer.withColor('rgba( 0, 0, 0, 0.1 )')), challenge.graph, challenge.modelViewTransform));
    }
    const pointRadius = challenge.modelViewTransform.modelToViewDeltaX(LineGameConstants.POINT_RADIUS);

    // answer
    this.answerLineNode = new LineNode(new Property(challenge.answer), challenge.graph, challenge.modelViewTransform);
    this.answerPointNode = new PlottedPointNode(pointRadius, LineGameConstants.ANSWER_COLOR);
    this.answerPointNode.translation = challenge.modelViewTransform.modelToViewXY(challenge.answer.x1, challenge.answer.y1);

    // guess
    // @ts-expect-error guessProperty is Property<Line | NotALine>
    this.guessLineNode = new LineNode(challenge.guessProperty, challenge.graph, challenge.modelViewTransform);
    this.guessPointNode = new PlottedPointNode(pointRadius, LineGameConstants.GUESS_COLOR);

    // optional slope tool
    // @ts-expect-error guessProperty is Property<Line | NotALine>
    this.slopeToolNode = options.slopeToolEnabled ? new SlopeToolNode(challenge.guessProperty, challenge.modelViewTransform) : null;

    // Rendering order: lines behind points, guess behind answer
    // See https://github.com/phetsims/graphing-lines/issues/115
    this.addChild(this.guessLineNode);
    this.addChild(this.answerLineNode);
    this.addChild(this.guessPointNode);
    this.addChild(this.answerPointNode);
    if (this.slopeToolNode) {
      this.addChild(this.slopeToolNode);
    }

    // Sync with the guess
    const guessObserver = line => {
      if (line instanceof Line) {
        // plot (x1,y1)
        this.guessPointNode.translation = challenge.modelViewTransform.modelToViewPosition(new Vector2(line.x1, line.y1));
      }
    };
    challenge.guessProperty.link(guessObserver); // unlink in dispose

    // initial state
    this.setAnswerLineVisible(options.answerLineVisible);
    this.setAnswerPointVisible(options.answerPointVisible);
    this.setGuessLineVisible(options.guessLineVisible);
    this.setGuessPointVisible(options.guessPointVisible);
    this.setSlopeToolVisible(options.slopeToolVisible);
    this.disposeChallengeGraphNode = () => {
      this.guessLineNode.dispose();
      this.slopeToolNode && this.slopeToolNode.dispose();
      challenge.guessProperty.unlink(guessObserver);
    };
  }
  dispose() {
    this.disposeChallengeGraphNode();
    super.dispose();
  }

  // Sets the visibility of the answer line.
  setAnswerLineVisible(visible) {
    this.answerLineNode.visible = visible;
  }

  // Sets the visibility of (x1,y1) for the answer.
  setAnswerPointVisible(visible) {
    this.answerPointNode.visible = visible;
  }

  // Sets the visibility of the guess line.
  setGuessLineVisible(visible) {
    this.guessLineNode.visible = visible;
  }

  // Sets the visibility of (x1,y1) for the guess.
  setGuessPointVisible(visible) {
    this.guessPointNode.visible = visible;
  }

  // Sets the visibility of the slope tool for the guess.
  setSlopeToolVisible(visible) {
    if (this.slopeToolNode) {
      this.slopeToolNode.visible = visible;
    }
  }
}
graphingLines.register('ChallengeGraphNode', ChallengeGraphNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQcm9wZXJ0eSIsIlZlY3RvcjIiLCJvcHRpb25pemUiLCJMaW5lIiwiR3JhcGhOb2RlIiwiTGluZU5vZGUiLCJQbG90dGVkUG9pbnROb2RlIiwiU2xvcGVUb29sTm9kZSIsImdyYXBoaW5nTGluZXMiLCJMaW5lR2FtZUNvbnN0YW50cyIsIkNoYWxsZW5nZUdyYXBoTm9kZSIsImNvbnN0cnVjdG9yIiwiY2hhbGxlbmdlIiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsImFuc3dlckxpbmVWaXNpYmxlIiwiYW5zd2VyUG9pbnRWaXNpYmxlIiwiZ3Vlc3NMaW5lVmlzaWJsZSIsImd1ZXNzUG9pbnRWaXNpYmxlIiwic2xvcGVUb29sVmlzaWJsZSIsInNsb3BlVG9vbEVuYWJsZWQiLCJncmFwaCIsIm1vZGVsVmlld1RyYW5zZm9ybSIsInBoZXQiLCJjaGlwcGVyIiwicXVlcnlQYXJhbWV0ZXJzIiwic2hvd0Fuc3dlcnMiLCJhZGRDaGlsZCIsImFuc3dlciIsIndpdGhDb2xvciIsInBvaW50UmFkaXVzIiwibW9kZWxUb1ZpZXdEZWx0YVgiLCJQT0lOVF9SQURJVVMiLCJhbnN3ZXJMaW5lTm9kZSIsImFuc3dlclBvaW50Tm9kZSIsIkFOU1dFUl9DT0xPUiIsInRyYW5zbGF0aW9uIiwibW9kZWxUb1ZpZXdYWSIsIngxIiwieTEiLCJndWVzc0xpbmVOb2RlIiwiZ3Vlc3NQcm9wZXJ0eSIsImd1ZXNzUG9pbnROb2RlIiwiR1VFU1NfQ09MT1IiLCJzbG9wZVRvb2xOb2RlIiwiZ3Vlc3NPYnNlcnZlciIsImxpbmUiLCJtb2RlbFRvVmlld1Bvc2l0aW9uIiwibGluayIsInNldEFuc3dlckxpbmVWaXNpYmxlIiwic2V0QW5zd2VyUG9pbnRWaXNpYmxlIiwic2V0R3Vlc3NMaW5lVmlzaWJsZSIsInNldEd1ZXNzUG9pbnRWaXNpYmxlIiwic2V0U2xvcGVUb29sVmlzaWJsZSIsImRpc3Bvc2VDaGFsbGVuZ2VHcmFwaE5vZGUiLCJkaXNwb3NlIiwidW5saW5rIiwidmlzaWJsZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiQ2hhbGxlbmdlR3JhcGhOb2RlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIEJhc2UgdHlwZSBmb3IgZ3JhcGggbm9kZXMgaW4gZ2FtZSBjaGFsbGVuZ2VzLlxyXG4gKiBSZW5kZXJzIHRoZSBhbnN3ZXIgbGluZSwgZ3Vlc3MgbGluZSwgYW5kIHNsb3BlIHRvb2wuXHJcbiAqIEV2ZXJ5dGhpbmcgb24gdGhlIGdyYXBoIGlzIGhpZGRlbiBieSBkZWZhdWx0LCBpdCdzIHVwIHRvIHN1YmNsYXNzZXMgYW5kIGNsaWVudHMgdG8gZGV0ZXJtaW5lIHdoYXQgdGhleSB3YW50IHRvIHNlZS5cclxuICogT3B0aW9uYWwgbWFuaXB1bGF0b3JzIGFyZSBwcm92aWRlZCBieSBzdWJjbGFzc2VzLlxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCBQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1Byb3BlcnR5LmpzJztcclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgb3B0aW9uaXplIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgTGluZSBmcm9tICcuLi8uLi9jb21tb24vbW9kZWwvTGluZS5qcyc7XHJcbmltcG9ydCBHcmFwaE5vZGUgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvR3JhcGhOb2RlLmpzJztcclxuaW1wb3J0IExpbmVOb2RlIGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L0xpbmVOb2RlLmpzJztcclxuaW1wb3J0IFBsb3R0ZWRQb2ludE5vZGUgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvUGxvdHRlZFBvaW50Tm9kZS5qcyc7XHJcbmltcG9ydCBTbG9wZVRvb2xOb2RlIGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L1Nsb3BlVG9vbE5vZGUuanMnO1xyXG5pbXBvcnQgZ3JhcGhpbmdMaW5lcyBmcm9tICcuLi8uLi9ncmFwaGluZ0xpbmVzLmpzJztcclxuaW1wb3J0IExpbmVHYW1lQ29uc3RhbnRzIGZyb20gJy4uL0xpbmVHYW1lQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IENoYWxsZW5nZSBmcm9tICcuLi9tb2RlbC9DaGFsbGVuZ2UuanMnO1xyXG5pbXBvcnQgTm90QUxpbmUgZnJvbSAnLi4vbW9kZWwvTm90QUxpbmUuanMnO1xyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IHtcclxuICBhbnN3ZXJMaW5lVmlzaWJsZT86IGJvb2xlYW47XHJcbiAgYW5zd2VyUG9pbnRWaXNpYmxlPzogYm9vbGVhbjtcclxuICBndWVzc0xpbmVWaXNpYmxlPzogYm9vbGVhbjtcclxuICBndWVzc1BvaW50VmlzaWJsZT86IGJvb2xlYW47XHJcbiAgc2xvcGVUb29sVmlzaWJsZT86IGJvb2xlYW47XHJcbiAgc2xvcGVUb29sRW5hYmxlZD86IGJvb2xlYW47XHJcbn07XHJcblxyXG50eXBlIENoYWxsZW5nZUdyYXBoTm9kZU9wdGlvbnMgPSBTZWxmT3B0aW9ucztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENoYWxsZW5nZUdyYXBoTm9kZSBleHRlbmRzIEdyYXBoTm9kZSB7XHJcblxyXG4gIC8vIGFuc3dlciB0byB0aGUgY2hhbGxlbmdlXHJcbiAgcHJpdmF0ZSByZWFkb25seSBhbnN3ZXJMaW5lTm9kZTogTGluZU5vZGU7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBhbnN3ZXJQb2ludE5vZGU6IFBsb3R0ZWRQb2ludE5vZGU7XHJcblxyXG4gIC8vIHRoZSB1c2VyJ3MgZ3Vlc3NcclxuICBwcml2YXRlIHJlYWRvbmx5IGd1ZXNzTGluZU5vZGU6IExpbmVOb2RlO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgZ3Vlc3NQb2ludE5vZGU6IFBsb3R0ZWRQb2ludE5vZGU7XHJcblxyXG4gIHByaXZhdGUgcmVhZG9ubHkgc2xvcGVUb29sTm9kZTogU2xvcGVUb29sTm9kZSB8IG51bGw7XHJcblxyXG4gIHByaXZhdGUgcmVhZG9ubHkgZGlzcG9zZUNoYWxsZW5nZUdyYXBoTm9kZTogKCkgPT4gdm9pZDtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBjaGFsbGVuZ2U6IENoYWxsZW5nZSwgcHJvdmlkZWRPcHRpb25zPzogQ2hhbGxlbmdlR3JhcGhOb2RlT3B0aW9ucyApIHtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPENoYWxsZW5nZUdyYXBoTm9kZU9wdGlvbnMsIFNlbGZPcHRpb25zPigpKCB7XHJcblxyXG4gICAgICAvLyBTZWxmT3B0aW9uc1xyXG4gICAgICBhbnN3ZXJMaW5lVmlzaWJsZTogZmFsc2UsXHJcbiAgICAgIGFuc3dlclBvaW50VmlzaWJsZTogZmFsc2UsXHJcbiAgICAgIGd1ZXNzTGluZVZpc2libGU6IGZhbHNlLFxyXG4gICAgICBndWVzc1BvaW50VmlzaWJsZTogZmFsc2UsXHJcbiAgICAgIHNsb3BlVG9vbFZpc2libGU6IGZhbHNlLFxyXG4gICAgICBzbG9wZVRvb2xFbmFibGVkOiB0cnVlXHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICBzdXBlciggY2hhbGxlbmdlLmdyYXBoLCBjaGFsbGVuZ2UubW9kZWxWaWV3VHJhbnNmb3JtICk7XHJcblxyXG4gICAgLy8gVG8gcmVkdWNlIGJyYWluIGRhbWFnZSBkdXJpbmcgZGV2ZWxvcG1lbnQsIHNob3cgdGhlIGFuc3dlciBhcyBhIHRyYW5zbHVjZW50IGdyYXkgbGluZS5cclxuICAgIGlmICggcGhldC5jaGlwcGVyLnF1ZXJ5UGFyYW1ldGVycy5zaG93QW5zd2VycyApIHtcclxuICAgICAgdGhpcy5hZGRDaGlsZCggbmV3IExpbmVOb2RlKCBuZXcgUHJvcGVydHkoIGNoYWxsZW5nZS5hbnN3ZXIud2l0aENvbG9yKCAncmdiYSggMCwgMCwgMCwgMC4xICknICkgKSxcclxuICAgICAgICBjaGFsbGVuZ2UuZ3JhcGgsIGNoYWxsZW5nZS5tb2RlbFZpZXdUcmFuc2Zvcm0gKSApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHBvaW50UmFkaXVzID0gY2hhbGxlbmdlLm1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld0RlbHRhWCggTGluZUdhbWVDb25zdGFudHMuUE9JTlRfUkFESVVTICk7XHJcblxyXG4gICAgLy8gYW5zd2VyXHJcbiAgICB0aGlzLmFuc3dlckxpbmVOb2RlID0gbmV3IExpbmVOb2RlKCBuZXcgUHJvcGVydHkoIGNoYWxsZW5nZS5hbnN3ZXIgKSwgY2hhbGxlbmdlLmdyYXBoLCBjaGFsbGVuZ2UubW9kZWxWaWV3VHJhbnNmb3JtICk7XHJcbiAgICB0aGlzLmFuc3dlclBvaW50Tm9kZSA9IG5ldyBQbG90dGVkUG9pbnROb2RlKCBwb2ludFJhZGl1cywgTGluZUdhbWVDb25zdGFudHMuQU5TV0VSX0NPTE9SICk7XHJcbiAgICB0aGlzLmFuc3dlclBvaW50Tm9kZS50cmFuc2xhdGlvbiA9IGNoYWxsZW5nZS5tb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdYWSggY2hhbGxlbmdlLmFuc3dlci54MSwgY2hhbGxlbmdlLmFuc3dlci55MSApO1xyXG5cclxuICAgIC8vIGd1ZXNzXHJcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIGd1ZXNzUHJvcGVydHkgaXMgUHJvcGVydHk8TGluZSB8IE5vdEFMaW5lPlxyXG4gICAgdGhpcy5ndWVzc0xpbmVOb2RlID0gbmV3IExpbmVOb2RlKCBjaGFsbGVuZ2UuZ3Vlc3NQcm9wZXJ0eSwgY2hhbGxlbmdlLmdyYXBoLCBjaGFsbGVuZ2UubW9kZWxWaWV3VHJhbnNmb3JtICk7XHJcbiAgICB0aGlzLmd1ZXNzUG9pbnROb2RlID0gbmV3IFBsb3R0ZWRQb2ludE5vZGUoIHBvaW50UmFkaXVzLCBMaW5lR2FtZUNvbnN0YW50cy5HVUVTU19DT0xPUiApO1xyXG5cclxuICAgIC8vIG9wdGlvbmFsIHNsb3BlIHRvb2xcclxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgZ3Vlc3NQcm9wZXJ0eSBpcyBQcm9wZXJ0eTxMaW5lIHwgTm90QUxpbmU+XHJcbiAgICB0aGlzLnNsb3BlVG9vbE5vZGUgPSAoIG9wdGlvbnMuc2xvcGVUb29sRW5hYmxlZCApID8gbmV3IFNsb3BlVG9vbE5vZGUoIGNoYWxsZW5nZS5ndWVzc1Byb3BlcnR5LCBjaGFsbGVuZ2UubW9kZWxWaWV3VHJhbnNmb3JtICkgOiBudWxsO1xyXG5cclxuICAgIC8vIFJlbmRlcmluZyBvcmRlcjogbGluZXMgYmVoaW5kIHBvaW50cywgZ3Vlc3MgYmVoaW5kIGFuc3dlclxyXG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9ncmFwaGluZy1saW5lcy9pc3N1ZXMvMTE1XHJcbiAgICB0aGlzLmFkZENoaWxkKCB0aGlzLmd1ZXNzTGluZU5vZGUgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMuYW5zd2VyTGluZU5vZGUgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMuZ3Vlc3NQb2ludE5vZGUgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMuYW5zd2VyUG9pbnROb2RlICk7XHJcbiAgICBpZiAoIHRoaXMuc2xvcGVUb29sTm9kZSApIHtcclxuICAgICAgdGhpcy5hZGRDaGlsZCggdGhpcy5zbG9wZVRvb2xOb2RlICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU3luYyB3aXRoIHRoZSBndWVzc1xyXG4gICAgY29uc3QgZ3Vlc3NPYnNlcnZlciA9ICggbGluZTogTGluZSB8IE5vdEFMaW5lICkgPT4ge1xyXG4gICAgICBpZiAoIGxpbmUgaW5zdGFuY2VvZiBMaW5lICkge1xyXG4gICAgICAgIC8vIHBsb3QgKHgxLHkxKVxyXG4gICAgICAgIHRoaXMuZ3Vlc3NQb2ludE5vZGUudHJhbnNsYXRpb24gPSBjaGFsbGVuZ2UubW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3UG9zaXRpb24oIG5ldyBWZWN0b3IyKCBsaW5lLngxLCBsaW5lLnkxICkgKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIGNoYWxsZW5nZS5ndWVzc1Byb3BlcnR5LmxpbmsoIGd1ZXNzT2JzZXJ2ZXIgKTsgLy8gdW5saW5rIGluIGRpc3Bvc2VcclxuXHJcbiAgICAvLyBpbml0aWFsIHN0YXRlXHJcbiAgICB0aGlzLnNldEFuc3dlckxpbmVWaXNpYmxlKCBvcHRpb25zLmFuc3dlckxpbmVWaXNpYmxlICk7XHJcbiAgICB0aGlzLnNldEFuc3dlclBvaW50VmlzaWJsZSggb3B0aW9ucy5hbnN3ZXJQb2ludFZpc2libGUgKTtcclxuICAgIHRoaXMuc2V0R3Vlc3NMaW5lVmlzaWJsZSggb3B0aW9ucy5ndWVzc0xpbmVWaXNpYmxlICk7XHJcbiAgICB0aGlzLnNldEd1ZXNzUG9pbnRWaXNpYmxlKCBvcHRpb25zLmd1ZXNzUG9pbnRWaXNpYmxlICk7XHJcbiAgICB0aGlzLnNldFNsb3BlVG9vbFZpc2libGUoIG9wdGlvbnMuc2xvcGVUb29sVmlzaWJsZSApO1xyXG5cclxuICAgIHRoaXMuZGlzcG9zZUNoYWxsZW5nZUdyYXBoTm9kZSA9ICgpID0+IHtcclxuICAgICAgdGhpcy5ndWVzc0xpbmVOb2RlLmRpc3Bvc2UoKTtcclxuICAgICAgdGhpcy5zbG9wZVRvb2xOb2RlICYmIHRoaXMuc2xvcGVUb29sTm9kZS5kaXNwb3NlKCk7XHJcbiAgICAgIGNoYWxsZW5nZS5ndWVzc1Byb3BlcnR5LnVubGluayggZ3Vlc3NPYnNlcnZlciApO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvdmVycmlkZSBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgdGhpcy5kaXNwb3NlQ2hhbGxlbmdlR3JhcGhOb2RlKCk7XHJcbiAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgfVxyXG5cclxuICAvLyBTZXRzIHRoZSB2aXNpYmlsaXR5IG9mIHRoZSBhbnN3ZXIgbGluZS5cclxuICBwdWJsaWMgc2V0QW5zd2VyTGluZVZpc2libGUoIHZpc2libGU6IGJvb2xlYW4gKTogdm9pZCB7XHJcbiAgICB0aGlzLmFuc3dlckxpbmVOb2RlLnZpc2libGUgPSB2aXNpYmxlO1xyXG4gIH1cclxuXHJcbiAgLy8gU2V0cyB0aGUgdmlzaWJpbGl0eSBvZiAoeDEseTEpIGZvciB0aGUgYW5zd2VyLlxyXG4gIHB1YmxpYyBzZXRBbnN3ZXJQb2ludFZpc2libGUoIHZpc2libGU6IGJvb2xlYW4gKTogdm9pZCB7XHJcbiAgICB0aGlzLmFuc3dlclBvaW50Tm9kZS52aXNpYmxlID0gdmlzaWJsZTtcclxuICB9XHJcblxyXG4gIC8vIFNldHMgdGhlIHZpc2liaWxpdHkgb2YgdGhlIGd1ZXNzIGxpbmUuXHJcbiAgcHVibGljIHNldEd1ZXNzTGluZVZpc2libGUoIHZpc2libGU6IGJvb2xlYW4gKTogdm9pZCB7XHJcbiAgICB0aGlzLmd1ZXNzTGluZU5vZGUudmlzaWJsZSA9IHZpc2libGU7XHJcbiAgfVxyXG5cclxuICAvLyBTZXRzIHRoZSB2aXNpYmlsaXR5IG9mICh4MSx5MSkgZm9yIHRoZSBndWVzcy5cclxuICBwdWJsaWMgc2V0R3Vlc3NQb2ludFZpc2libGUoIHZpc2libGU6IGJvb2xlYW4gKTogdm9pZCB7XHJcbiAgICB0aGlzLmd1ZXNzUG9pbnROb2RlLnZpc2libGUgPSB2aXNpYmxlO1xyXG4gIH1cclxuXHJcbiAgLy8gU2V0cyB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgc2xvcGUgdG9vbCBmb3IgdGhlIGd1ZXNzLlxyXG4gIHB1YmxpYyBzZXRTbG9wZVRvb2xWaXNpYmxlKCB2aXNpYmxlOiBib29sZWFuICk6IHZvaWQge1xyXG4gICAgaWYgKCB0aGlzLnNsb3BlVG9vbE5vZGUgKSB7XHJcbiAgICAgIHRoaXMuc2xvcGVUb29sTm9kZS52aXNpYmxlID0gdmlzaWJsZTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmdyYXBoaW5nTGluZXMucmVnaXN0ZXIoICdDaGFsbGVuZ2VHcmFwaE5vZGUnLCBDaGFsbGVuZ2VHcmFwaE5vZGUgKTsiXSwibWFwcGluZ3MiOiJB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