// Copyright 2019-2023, University of Colorado Boulder

/**
 * ToggleBox is a specialized version of AccordionBox that doesn't expand/collapse.  Instead, it toggles between
 * 'closed' content and 'open' content, while maintaining a fixed height.
 *
 * The box itself is a fixed width and height; both its fixed width and height are calculated by the largest
 * between the closed and open content added to its margins.
 *
 * However, there is an option to pass a defined fixed width and/or fixed height. The box will scale the nodes to fit
 * defined dimensions.
 *
 * Instances of this class are not meant to be disposed.
 *
 * @author Brandon Li
 */

import BooleanProperty from '../../../../axon/js/BooleanProperty.js';
import Bounds2 from '../../../../dot/js/Bounds2.js';
import merge from '../../../../phet-core/js/merge.js';
import { AlignBox, Node } from '../../../../scenery/js/imports.js';
import AccordionBox from '../../../../sun/js/AccordionBox.js';
import vectorAddition from '../../vectorAddition.js';
import VectorAdditionConstants from '../VectorAdditionConstants.js';
export default class ToggleBox extends AccordionBox {
  /**
   * @param {Node} closedContent - content when the box is closed
   * @param {Node} openContent - content when the box is open
   * @param {Object} [options]
   */
  constructor(closedContent, openContent, options) {
    options = merge({}, VectorAdditionConstants.ACCORDION_BOX_OPTIONS, {
      isExpandedInitially: true,
      // {boolean} - false means the box will start off as closed

      contentYMargin: 0,
      titleYMargin: 0,
      buttonYMargin: 0,
      // content align
      contentAlign: 'left',
      // {string} - 'left', 'center', or 'right'
      contentFixedWidth: null,
      // {number|null} if provided, the content will scale to fix this width. Otherwise,
      // the fixed size is calculated by the largest of the content nodes and its respective
      // margin

      contentFixedHeight: null // {number|null} if provided, the content will scale to fix this height. Otherwise,
      // the fixed size is calculated by the largest of the content nodes and its respective
      // margin

      // See VectorAdditionConstants.ACCORDION_BOX_OPTIONS for the rest of the defaults
    }, options);
    assert && assert(closedContent instanceof Node, `invalid closedContent: ${closedContent}`);
    assert && assert(openContent instanceof Node, `invalid openContent: ${openContent}`);

    // Determine the content width
    const contentWidth = options.contentFixedWidth || _.max([closedContent.width, openContent.width]);
    const contentHeight = options.contentFixedHeight || _.max([closedContent.height, openContent.height]);

    // Constrain the content width and height
    openContent.maxWidth = contentWidth;
    openContent.maxHeight = contentHeight;
    closedContent.maxWidth = contentWidth;
    closedContent.maxHeight = contentHeight;

    // Put the content in AlignBoxes, to handle alignment
    const alignBoxOptions = {
      xAlign: options.contentAlign,
      alignBounds: new Bounds2(0, 0, contentWidth, contentHeight)
    };
    const openContentAlignBox = new AlignBox(openContent, alignBoxOptions);
    const closedContentAlignBox = new AlignBox(closedContent, alignBoxOptions);
    super(openContentAlignBox, merge({
      expandedProperty: new BooleanProperty(options.isExpandedInitially),
      showTitleWhenExpanded: false,
      titleNode: closedContentAlignBox,
      // unorthodox use of AccordionBox, but it works
      titleBarExpandCollapse: false
    }, options));
  }
}
vectorAddition.register('ToggleBox', ToggleBox);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb29sZWFuUHJvcGVydHkiLCJCb3VuZHMyIiwibWVyZ2UiLCJBbGlnbkJveCIsIk5vZGUiLCJBY2NvcmRpb25Cb3giLCJ2ZWN0b3JBZGRpdGlvbiIsIlZlY3RvckFkZGl0aW9uQ29uc3RhbnRzIiwiVG9nZ2xlQm94IiwiY29uc3RydWN0b3IiLCJjbG9zZWRDb250ZW50Iiwib3BlbkNvbnRlbnQiLCJvcHRpb25zIiwiQUNDT1JESU9OX0JPWF9PUFRJT05TIiwiaXNFeHBhbmRlZEluaXRpYWxseSIsImNvbnRlbnRZTWFyZ2luIiwidGl0bGVZTWFyZ2luIiwiYnV0dG9uWU1hcmdpbiIsImNvbnRlbnRBbGlnbiIsImNvbnRlbnRGaXhlZFdpZHRoIiwiY29udGVudEZpeGVkSGVpZ2h0IiwiYXNzZXJ0IiwiY29udGVudFdpZHRoIiwiXyIsIm1heCIsIndpZHRoIiwiY29udGVudEhlaWdodCIsImhlaWdodCIsIm1heFdpZHRoIiwibWF4SGVpZ2h0IiwiYWxpZ25Cb3hPcHRpb25zIiwieEFsaWduIiwiYWxpZ25Cb3VuZHMiLCJvcGVuQ29udGVudEFsaWduQm94IiwiY2xvc2VkQ29udGVudEFsaWduQm94IiwiZXhwYW5kZWRQcm9wZXJ0eSIsInNob3dUaXRsZVdoZW5FeHBhbmRlZCIsInRpdGxlTm9kZSIsInRpdGxlQmFyRXhwYW5kQ29sbGFwc2UiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlRvZ2dsZUJveC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOS0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBUb2dnbGVCb3ggaXMgYSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIEFjY29yZGlvbkJveCB0aGF0IGRvZXNuJ3QgZXhwYW5kL2NvbGxhcHNlLiAgSW5zdGVhZCwgaXQgdG9nZ2xlcyBiZXR3ZWVuXHJcbiAqICdjbG9zZWQnIGNvbnRlbnQgYW5kICdvcGVuJyBjb250ZW50LCB3aGlsZSBtYWludGFpbmluZyBhIGZpeGVkIGhlaWdodC5cclxuICpcclxuICogVGhlIGJveCBpdHNlbGYgaXMgYSBmaXhlZCB3aWR0aCBhbmQgaGVpZ2h0OyBib3RoIGl0cyBmaXhlZCB3aWR0aCBhbmQgaGVpZ2h0IGFyZSBjYWxjdWxhdGVkIGJ5IHRoZSBsYXJnZXN0XHJcbiAqIGJldHdlZW4gdGhlIGNsb3NlZCBhbmQgb3BlbiBjb250ZW50IGFkZGVkIHRvIGl0cyBtYXJnaW5zLlxyXG4gKlxyXG4gKiBIb3dldmVyLCB0aGVyZSBpcyBhbiBvcHRpb24gdG8gcGFzcyBhIGRlZmluZWQgZml4ZWQgd2lkdGggYW5kL29yIGZpeGVkIGhlaWdodC4gVGhlIGJveCB3aWxsIHNjYWxlIHRoZSBub2RlcyB0byBmaXRcclxuICogZGVmaW5lZCBkaW1lbnNpb25zLlxyXG4gKlxyXG4gKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgbm90IG1lYW50IHRvIGJlIGRpc3Bvc2VkLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEJyYW5kb24gTGlcclxuICovXHJcblxyXG5pbXBvcnQgQm9vbGVhblByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvQm9vbGVhblByb3BlcnR5LmpzJztcclxuaW1wb3J0IEJvdW5kczIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL0JvdW5kczIuanMnO1xyXG5pbXBvcnQgbWVyZ2UgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL21lcmdlLmpzJztcclxuaW1wb3J0IHsgQWxpZ25Cb3gsIE5vZGUgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgQWNjb3JkaW9uQm94IGZyb20gJy4uLy4uLy4uLy4uL3N1bi9qcy9BY2NvcmRpb25Cb3guanMnO1xyXG5pbXBvcnQgdmVjdG9yQWRkaXRpb24gZnJvbSAnLi4vLi4vdmVjdG9yQWRkaXRpb24uanMnO1xyXG5pbXBvcnQgVmVjdG9yQWRkaXRpb25Db25zdGFudHMgZnJvbSAnLi4vVmVjdG9yQWRkaXRpb25Db25zdGFudHMuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVG9nZ2xlQm94IGV4dGVuZHMgQWNjb3JkaW9uQm94IHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtOb2RlfSBjbG9zZWRDb250ZW50IC0gY29udGVudCB3aGVuIHRoZSBib3ggaXMgY2xvc2VkXHJcbiAgICogQHBhcmFtIHtOb2RlfSBvcGVuQ29udGVudCAtIGNvbnRlbnQgd2hlbiB0aGUgYm94IGlzIG9wZW5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIGNsb3NlZENvbnRlbnQsIG9wZW5Db250ZW50LCBvcHRpb25zICkge1xyXG5cclxuICAgIG9wdGlvbnMgPSBtZXJnZSgge30sIFZlY3RvckFkZGl0aW9uQ29uc3RhbnRzLkFDQ09SRElPTl9CT1hfT1BUSU9OUywge1xyXG5cclxuICAgICAgaXNFeHBhbmRlZEluaXRpYWxseTogdHJ1ZSwgLy8ge2Jvb2xlYW59IC0gZmFsc2UgbWVhbnMgdGhlIGJveCB3aWxsIHN0YXJ0IG9mZiBhcyBjbG9zZWRcclxuXHJcblxyXG4gICAgICBjb250ZW50WU1hcmdpbjogMCxcclxuICAgICAgdGl0bGVZTWFyZ2luOiAwLFxyXG4gICAgICBidXR0b25ZTWFyZ2luOiAwLFxyXG5cclxuICAgICAgLy8gY29udGVudCBhbGlnblxyXG4gICAgICBjb250ZW50QWxpZ246ICdsZWZ0JywgICAgLy8ge3N0cmluZ30gLSAnbGVmdCcsICdjZW50ZXInLCBvciAncmlnaHQnXHJcbiAgICAgIGNvbnRlbnRGaXhlZFdpZHRoOiBudWxsLCAvLyB7bnVtYmVyfG51bGx9IGlmIHByb3ZpZGVkLCB0aGUgY29udGVudCB3aWxsIHNjYWxlIHRvIGZpeCB0aGlzIHdpZHRoLiBPdGhlcndpc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZml4ZWQgc2l6ZSBpcyBjYWxjdWxhdGVkIGJ5IHRoZSBsYXJnZXN0IG9mIHRoZSBjb250ZW50IG5vZGVzIGFuZCBpdHMgcmVzcGVjdGl2ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWFyZ2luXHJcblxyXG4gICAgICBjb250ZW50Rml4ZWRIZWlnaHQ6IG51bGwgIC8vIHtudW1iZXJ8bnVsbH0gaWYgcHJvdmlkZWQsIHRoZSBjb250ZW50IHdpbGwgc2NhbGUgdG8gZml4IHRoaXMgaGVpZ2h0LiBPdGhlcndpc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGZpeGVkIHNpemUgaXMgY2FsY3VsYXRlZCBieSB0aGUgbGFyZ2VzdCBvZiB0aGUgY29udGVudCBub2RlcyBhbmQgaXRzIHJlc3BlY3RpdmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtYXJnaW5cclxuXHJcbiAgICAgIC8vIFNlZSBWZWN0b3JBZGRpdGlvbkNvbnN0YW50cy5BQ0NPUkRJT05fQk9YX09QVElPTlMgZm9yIHRoZSByZXN0IG9mIHRoZSBkZWZhdWx0c1xyXG4gICAgfSwgb3B0aW9ucyApO1xyXG5cclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIGNsb3NlZENvbnRlbnQgaW5zdGFuY2VvZiBOb2RlLCBgaW52YWxpZCBjbG9zZWRDb250ZW50OiAke2Nsb3NlZENvbnRlbnR9YCApO1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggb3BlbkNvbnRlbnQgaW5zdGFuY2VvZiBOb2RlLCBgaW52YWxpZCBvcGVuQ29udGVudDogJHtvcGVuQ29udGVudH1gICk7XHJcblxyXG4gICAgLy8gRGV0ZXJtaW5lIHRoZSBjb250ZW50IHdpZHRoXHJcbiAgICBjb25zdCBjb250ZW50V2lkdGggPSBvcHRpb25zLmNvbnRlbnRGaXhlZFdpZHRoIHx8IF8ubWF4KCBbIGNsb3NlZENvbnRlbnQud2lkdGgsIG9wZW5Db250ZW50LndpZHRoIF0gKTtcclxuICAgIGNvbnN0IGNvbnRlbnRIZWlnaHQgPSBvcHRpb25zLmNvbnRlbnRGaXhlZEhlaWdodCB8fCBfLm1heCggWyBjbG9zZWRDb250ZW50LmhlaWdodCwgb3BlbkNvbnRlbnQuaGVpZ2h0IF0gKTtcclxuXHJcbiAgICAvLyBDb25zdHJhaW4gdGhlIGNvbnRlbnQgd2lkdGggYW5kIGhlaWdodFxyXG4gICAgb3BlbkNvbnRlbnQubWF4V2lkdGggPSBjb250ZW50V2lkdGg7XHJcbiAgICBvcGVuQ29udGVudC5tYXhIZWlnaHQgPSBjb250ZW50SGVpZ2h0O1xyXG4gICAgY2xvc2VkQ29udGVudC5tYXhXaWR0aCA9IGNvbnRlbnRXaWR0aDtcclxuICAgIGNsb3NlZENvbnRlbnQubWF4SGVpZ2h0ID0gY29udGVudEhlaWdodDtcclxuXHJcbiAgICAvLyBQdXQgdGhlIGNvbnRlbnQgaW4gQWxpZ25Cb3hlcywgdG8gaGFuZGxlIGFsaWdubWVudFxyXG4gICAgY29uc3QgYWxpZ25Cb3hPcHRpb25zID0ge1xyXG4gICAgICB4QWxpZ246IG9wdGlvbnMuY29udGVudEFsaWduLFxyXG4gICAgICBhbGlnbkJvdW5kczogbmV3IEJvdW5kczIoIDAsIDAsIGNvbnRlbnRXaWR0aCwgY29udGVudEhlaWdodCApXHJcbiAgICB9O1xyXG4gICAgY29uc3Qgb3BlbkNvbnRlbnRBbGlnbkJveCA9IG5ldyBBbGlnbkJveCggb3BlbkNvbnRlbnQsIGFsaWduQm94T3B0aW9ucyApO1xyXG4gICAgY29uc3QgY2xvc2VkQ29udGVudEFsaWduQm94ID0gbmV3IEFsaWduQm94KCBjbG9zZWRDb250ZW50LCBhbGlnbkJveE9wdGlvbnMgKTtcclxuXHJcbiAgICBzdXBlciggb3BlbkNvbnRlbnRBbGlnbkJveCwgbWVyZ2UoIHtcclxuICAgICAgZXhwYW5kZWRQcm9wZXJ0eTogbmV3IEJvb2xlYW5Qcm9wZXJ0eSggb3B0aW9ucy5pc0V4cGFuZGVkSW5pdGlhbGx5ICksXHJcbiAgICAgIHNob3dUaXRsZVdoZW5FeHBhbmRlZDogZmFsc2UsXHJcbiAgICAgIHRpdGxlTm9kZTogY2xvc2VkQ29udGVudEFsaWduQm94LCAvLyB1bm9ydGhvZG94IHVzZSBvZiBBY2NvcmRpb25Cb3gsIGJ1dCBpdCB3b3Jrc1xyXG4gICAgICB0aXRsZUJhckV4cGFuZENvbGxhcHNlOiBmYWxzZVxyXG4gICAgfSwgb3B0aW9ucyApICk7XHJcbiAgfVxyXG59XHJcblxyXG52ZWN0b3JBZGRpdGlvbi5yZWdpc3RlciggJ1RvZ2dsZUJveCcsIFRvZ2dsZUJveCApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxlQUFlLE1BQU0sd0NBQXdDO0FBQ3BFLE9BQU9DLE9BQU8sTUFBTSwrQkFBK0I7QUFDbkQsT0FBT0MsS0FBSyxNQUFNLG1DQUFtQztBQUNyRCxTQUFTQyxRQUFRLEVBQUVDLElBQUksUUFBUSxtQ0FBbUM7QUFDbEUsT0FBT0MsWUFBWSxNQUFNLG9DQUFvQztBQUM3RCxPQUFPQyxjQUFjLE1BQU0seUJBQXlCO0FBQ3BELE9BQU9DLHVCQUF1QixNQUFNLCtCQUErQjtBQUVuRSxlQUFlLE1BQU1DLFNBQVMsU0FBU0gsWUFBWSxDQUFDO0VBRWxEO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDRUksV0FBV0EsQ0FBRUMsYUFBYSxFQUFFQyxXQUFXLEVBQUVDLE9BQU8sRUFBRztJQUVqREEsT0FBTyxHQUFHVixLQUFLLENBQUUsQ0FBQyxDQUFDLEVBQUVLLHVCQUF1QixDQUFDTSxxQkFBcUIsRUFBRTtNQUVsRUMsbUJBQW1CLEVBQUUsSUFBSTtNQUFFOztNQUczQkMsY0FBYyxFQUFFLENBQUM7TUFDakJDLFlBQVksRUFBRSxDQUFDO01BQ2ZDLGFBQWEsRUFBRSxDQUFDO01BRWhCO01BQ0FDLFlBQVksRUFBRSxNQUFNO01BQUs7TUFDekJDLGlCQUFpQixFQUFFLElBQUk7TUFBRTtNQUNBO01BQ0E7O01BRXpCQyxrQkFBa0IsRUFBRSxJQUFJLENBQUU7TUFDQTtNQUNBOztNQUUxQjtJQUNGLENBQUMsRUFBRVIsT0FBUSxDQUFDO0lBRVpTLE1BQU0sSUFBSUEsTUFBTSxDQUFFWCxhQUFhLFlBQVlOLElBQUksRUFBRywwQkFBeUJNLGFBQWMsRUFBRSxDQUFDO0lBQzVGVyxNQUFNLElBQUlBLE1BQU0sQ0FBRVYsV0FBVyxZQUFZUCxJQUFJLEVBQUcsd0JBQXVCTyxXQUFZLEVBQUUsQ0FBQzs7SUFFdEY7SUFDQSxNQUFNVyxZQUFZLEdBQUdWLE9BQU8sQ0FBQ08saUJBQWlCLElBQUlJLENBQUMsQ0FBQ0MsR0FBRyxDQUFFLENBQUVkLGFBQWEsQ0FBQ2UsS0FBSyxFQUFFZCxXQUFXLENBQUNjLEtBQUssQ0FBRyxDQUFDO0lBQ3JHLE1BQU1DLGFBQWEsR0FBR2QsT0FBTyxDQUFDUSxrQkFBa0IsSUFBSUcsQ0FBQyxDQUFDQyxHQUFHLENBQUUsQ0FBRWQsYUFBYSxDQUFDaUIsTUFBTSxFQUFFaEIsV0FBVyxDQUFDZ0IsTUFBTSxDQUFHLENBQUM7O0lBRXpHO0lBQ0FoQixXQUFXLENBQUNpQixRQUFRLEdBQUdOLFlBQVk7SUFDbkNYLFdBQVcsQ0FBQ2tCLFNBQVMsR0FBR0gsYUFBYTtJQUNyQ2hCLGFBQWEsQ0FBQ2tCLFFBQVEsR0FBR04sWUFBWTtJQUNyQ1osYUFBYSxDQUFDbUIsU0FBUyxHQUFHSCxhQUFhOztJQUV2QztJQUNBLE1BQU1JLGVBQWUsR0FBRztNQUN0QkMsTUFBTSxFQUFFbkIsT0FBTyxDQUFDTSxZQUFZO01BQzVCYyxXQUFXLEVBQUUsSUFBSS9CLE9BQU8sQ0FBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFcUIsWUFBWSxFQUFFSSxhQUFjO0lBQzlELENBQUM7SUFDRCxNQUFNTyxtQkFBbUIsR0FBRyxJQUFJOUIsUUFBUSxDQUFFUSxXQUFXLEVBQUVtQixlQUFnQixDQUFDO0lBQ3hFLE1BQU1JLHFCQUFxQixHQUFHLElBQUkvQixRQUFRLENBQUVPLGFBQWEsRUFBRW9CLGVBQWdCLENBQUM7SUFFNUUsS0FBSyxDQUFFRyxtQkFBbUIsRUFBRS9CLEtBQUssQ0FBRTtNQUNqQ2lDLGdCQUFnQixFQUFFLElBQUluQyxlQUFlLENBQUVZLE9BQU8sQ0FBQ0UsbUJBQW9CLENBQUM7TUFDcEVzQixxQkFBcUIsRUFBRSxLQUFLO01BQzVCQyxTQUFTLEVBQUVILHFCQUFxQjtNQUFFO01BQ2xDSSxzQkFBc0IsRUFBRTtJQUMxQixDQUFDLEVBQUUxQixPQUFRLENBQUUsQ0FBQztFQUNoQjtBQUNGO0FBRUFOLGNBQWMsQ0FBQ2lDLFFBQVEsQ0FBRSxXQUFXLEVBQUUvQixTQUFVLENBQUMifQ==