// Copyright 2019-2023, University of Colorado Boulder

/**
 * EquationsVectorSet is a specialization of VectorSet for the 'Equations' screen.  It adds:
 *
 *  - a predefined set of vectors; vectors cannot be added or removed
 *  - an EquationsSumVector
 *
 * @author Brandon Li
 */

import Utils from '../../../../dot/js/Utils.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import merge from '../../../../phet-core/js/merge.js';
import CoordinateSnapModes from '../../common/model/CoordinateSnapModes.js';
import VectorSet from '../../common/model/VectorSet.js';
import VectorAdditionConstants from '../../common/VectorAdditionConstants.js';
import vectorAddition from '../../vectorAddition.js';
import EquationsSumVector from './EquationsSumVector.js';
import EquationsVector from './EquationsVector.js';

// Describes the initial vectors for Cartesian snap mode. See https://github.com/phetsims/vector-addition/issues/227
const CARTESIAN_VECTOR_DESCRIPTIONS = [
// a
{
  vectorComponents: new Vector2(0, 5),
  vectorTail: new Vector2(5, 5),
  baseVectorTail: new Vector2(35, 15)
},
// b
{
  vectorComponents: new Vector2(5, 5),
  vectorTail: new Vector2(15, 5),
  baseVectorTail: new Vector2(35, 5)
}];

// Describes the initial vectors for polar snap mode. See https://github.com/phetsims/vector-addition/issues/227
const POLAR_VECTOR_DESCRIPTIONS = [
// d
{
  vectorComponents: Vector2.createPolar(5, 0),
  vectorTail: new Vector2(5, 5),
  baseVectorTail: new Vector2(35, 15)
},
// e
{
  vectorComponents: Vector2.createPolar(8, Utils.toRadians(45)),
  vectorTail: new Vector2(15, 5),
  baseVectorTail: new Vector2(35, 5)
}];
export default class EquationsVectorSet extends VectorSet {
  /**
   * @param {EquationsGraph} graph
   * @param {BooleanProperty} sumVisibleProperty
   * @param {EnumerationProperty.<ComponentVectorStyles>} componentStyleProperty
   * @param {VectorColorPalette} vectorColorPalette - color palette for vectors in this set
   * @param {CoordinateSnapModes} coordinateSnapMode - each vector set can only represent one snap mode
   * @param {Object} [options]
   */
  constructor(graph, componentStyleProperty, sumVisibleProperty, vectorColorPalette, coordinateSnapMode, options) {
    options = merge({
      // EquationsVectorSet will initialize its own sum vector, because the sum vector in this screen is different.
      // It's not truly a sum, and its computation depends on which equation type is selected (see EquationTypes).
      initializeSum: false,
      // offsets for sum component vectors in PROJECTION style
      sumProjectionXOffset: 0.5,
      sumProjectionYOffset: 0.5
    }, options);
    super(graph, componentStyleProperty, sumVisibleProperty, vectorColorPalette, options);

    // @public (read-only) {string[]} symbols
    this.symbols = coordinateSnapMode === CoordinateSnapModes.CARTESIAN ? VectorAdditionConstants.VECTOR_SYMBOLS_GROUP_1 : VectorAdditionConstants.VECTOR_SYMBOLS_GROUP_2;

    //----------------------------------------------------------------------------------------------------
    // Create the vectors, one less than symbols. For example, if symbols were [ 'a', 'b', 'c' ],
    // 'a' and 'c' would be vector symbols and 'c' would be the sum vector.

    const vectorDescriptions = coordinateSnapMode === CoordinateSnapModes.CARTESIAN ? CARTESIAN_VECTOR_DESCRIPTIONS : POLAR_VECTOR_DESCRIPTIONS;
    assert && assert(vectorDescriptions.length === this.symbols.length - 1);
    for (let i = 0; i < vectorDescriptions.length; i++) {
      const vectorDescription = vectorDescriptions[i];

      // verify that all fields in the description are present
      assert && assert(vectorDescription.vectorTail, 'missing vectorTail');
      assert && assert(vectorDescription.vectorComponents, 'missing vectorComponents');
      assert && assert(vectorDescription.baseVectorTail, 'missing baseVectorTail');
      const vector = new EquationsVector(vectorDescription.vectorTail, vectorDescription.vectorComponents, vectorDescription.baseVectorTail, graph, this, this.symbols[i]);
      this.vectors.push(vector);
    }

    //----------------------------------------------------------------------------------------
    // Create the sum vector

    // @public (read-only) {EquationsSumVector}
    this.sumVector = new EquationsSumVector(graph, this, graph.equationTypeProperty, _.last(this.symbols));
    this.sumVector.setProjectionOffsets(options.sumProjectionXOffset, options.sumProjectionYOffset);
  }

  /**
   * Resets the vector set.
   * @override
   * @public
   */
  reset() {
    // We are not calling super.reset because the default behavior is to dispose of all vectors in this.vectors.
    // In the Equations screen, vectors are created automatically at startup, and there is no way to created them
    // via the UI.  So we want to keep them around, but reset them.
    // See https://github.com/phetsims/vector-addition/issues/143
    this.vectors.forEach(vector => {
      vector.reset();
    });
    this.sumVector.reset();
  }
}
vectorAddition.register('EquationsVectorSet', EquationsVectorSet);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVdGlscyIsIlZlY3RvcjIiLCJtZXJnZSIsIkNvb3JkaW5hdGVTbmFwTW9kZXMiLCJWZWN0b3JTZXQiLCJWZWN0b3JBZGRpdGlvbkNvbnN0YW50cyIsInZlY3RvckFkZGl0aW9uIiwiRXF1YXRpb25zU3VtVmVjdG9yIiwiRXF1YXRpb25zVmVjdG9yIiwiQ0FSVEVTSUFOX1ZFQ1RPUl9ERVNDUklQVElPTlMiLCJ2ZWN0b3JDb21wb25lbnRzIiwidmVjdG9yVGFpbCIsImJhc2VWZWN0b3JUYWlsIiwiUE9MQVJfVkVDVE9SX0RFU0NSSVBUSU9OUyIsImNyZWF0ZVBvbGFyIiwidG9SYWRpYW5zIiwiRXF1YXRpb25zVmVjdG9yU2V0IiwiY29uc3RydWN0b3IiLCJncmFwaCIsImNvbXBvbmVudFN0eWxlUHJvcGVydHkiLCJzdW1WaXNpYmxlUHJvcGVydHkiLCJ2ZWN0b3JDb2xvclBhbGV0dGUiLCJjb29yZGluYXRlU25hcE1vZGUiLCJvcHRpb25zIiwiaW5pdGlhbGl6ZVN1bSIsInN1bVByb2plY3Rpb25YT2Zmc2V0Iiwic3VtUHJvamVjdGlvbllPZmZzZXQiLCJzeW1ib2xzIiwiQ0FSVEVTSUFOIiwiVkVDVE9SX1NZTUJPTFNfR1JPVVBfMSIsIlZFQ1RPUl9TWU1CT0xTX0dST1VQXzIiLCJ2ZWN0b3JEZXNjcmlwdGlvbnMiLCJhc3NlcnQiLCJsZW5ndGgiLCJpIiwidmVjdG9yRGVzY3JpcHRpb24iLCJ2ZWN0b3IiLCJ2ZWN0b3JzIiwicHVzaCIsInN1bVZlY3RvciIsImVxdWF0aW9uVHlwZVByb3BlcnR5IiwiXyIsImxhc3QiLCJzZXRQcm9qZWN0aW9uT2Zmc2V0cyIsInJlc2V0IiwiZm9yRWFjaCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiRXF1YXRpb25zVmVjdG9yU2V0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE5LTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIEVxdWF0aW9uc1ZlY3RvclNldCBpcyBhIHNwZWNpYWxpemF0aW9uIG9mIFZlY3RvclNldCBmb3IgdGhlICdFcXVhdGlvbnMnIHNjcmVlbi4gIEl0IGFkZHM6XHJcbiAqXHJcbiAqICAtIGEgcHJlZGVmaW5lZCBzZXQgb2YgdmVjdG9yczsgdmVjdG9ycyBjYW5ub3QgYmUgYWRkZWQgb3IgcmVtb3ZlZFxyXG4gKiAgLSBhbiBFcXVhdGlvbnNTdW1WZWN0b3JcclxuICpcclxuICogQGF1dGhvciBCcmFuZG9uIExpXHJcbiAqL1xyXG5cclxuaW1wb3J0IFV0aWxzIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9VdGlscy5qcyc7XHJcbmltcG9ydCBWZWN0b3IyIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9WZWN0b3IyLmpzJztcclxuaW1wb3J0IG1lcmdlIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9tZXJnZS5qcyc7XHJcbmltcG9ydCBDb29yZGluYXRlU25hcE1vZGVzIGZyb20gJy4uLy4uL2NvbW1vbi9tb2RlbC9Db29yZGluYXRlU25hcE1vZGVzLmpzJztcclxuaW1wb3J0IFZlY3RvclNldCBmcm9tICcuLi8uLi9jb21tb24vbW9kZWwvVmVjdG9yU2V0LmpzJztcclxuaW1wb3J0IFZlY3RvckFkZGl0aW9uQ29uc3RhbnRzIGZyb20gJy4uLy4uL2NvbW1vbi9WZWN0b3JBZGRpdGlvbkNvbnN0YW50cy5qcyc7XHJcbmltcG9ydCB2ZWN0b3JBZGRpdGlvbiBmcm9tICcuLi8uLi92ZWN0b3JBZGRpdGlvbi5qcyc7XHJcbmltcG9ydCBFcXVhdGlvbnNTdW1WZWN0b3IgZnJvbSAnLi9FcXVhdGlvbnNTdW1WZWN0b3IuanMnO1xyXG5pbXBvcnQgRXF1YXRpb25zVmVjdG9yIGZyb20gJy4vRXF1YXRpb25zVmVjdG9yLmpzJztcclxuXHJcbi8vIERlc2NyaWJlcyB0aGUgaW5pdGlhbCB2ZWN0b3JzIGZvciBDYXJ0ZXNpYW4gc25hcCBtb2RlLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3ZlY3Rvci1hZGRpdGlvbi9pc3N1ZXMvMjI3XHJcbmNvbnN0IENBUlRFU0lBTl9WRUNUT1JfREVTQ1JJUFRJT05TID0gW1xyXG5cclxuICAvLyBhXHJcbiAge1xyXG4gICAgdmVjdG9yQ29tcG9uZW50czogbmV3IFZlY3RvcjIoIDAsIDUgKSxcclxuICAgIHZlY3RvclRhaWw6IG5ldyBWZWN0b3IyKCA1LCA1ICksXHJcbiAgICBiYXNlVmVjdG9yVGFpbDogbmV3IFZlY3RvcjIoIDM1LCAxNSApXHJcbiAgfSxcclxuXHJcbiAgLy8gYlxyXG4gIHtcclxuICAgIHZlY3RvckNvbXBvbmVudHM6IG5ldyBWZWN0b3IyKCA1LCA1ICksXHJcbiAgICB2ZWN0b3JUYWlsOiBuZXcgVmVjdG9yMiggMTUsIDUgKSxcclxuICAgIGJhc2VWZWN0b3JUYWlsOiBuZXcgVmVjdG9yMiggMzUsIDUgKVxyXG4gIH1cclxuXTtcclxuXHJcbi8vIERlc2NyaWJlcyB0aGUgaW5pdGlhbCB2ZWN0b3JzIGZvciBwb2xhciBzbmFwIG1vZGUuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvdmVjdG9yLWFkZGl0aW9uL2lzc3Vlcy8yMjdcclxuY29uc3QgUE9MQVJfVkVDVE9SX0RFU0NSSVBUSU9OUyA9IFtcclxuXHJcbiAgLy8gZFxyXG4gIHtcclxuICAgIHZlY3RvckNvbXBvbmVudHM6IFZlY3RvcjIuY3JlYXRlUG9sYXIoIDUsIDAgKSxcclxuICAgIHZlY3RvclRhaWw6IG5ldyBWZWN0b3IyKCA1LCA1ICksXHJcbiAgICBiYXNlVmVjdG9yVGFpbDogbmV3IFZlY3RvcjIoIDM1LCAxNSApXHJcbiAgfSxcclxuXHJcbiAgLy8gZVxyXG4gIHtcclxuICAgIHZlY3RvckNvbXBvbmVudHM6IFZlY3RvcjIuY3JlYXRlUG9sYXIoIDgsIFV0aWxzLnRvUmFkaWFucyggNDUgKSApLFxyXG4gICAgdmVjdG9yVGFpbDogbmV3IFZlY3RvcjIoIDE1LCA1ICksXHJcbiAgICBiYXNlVmVjdG9yVGFpbDogbmV3IFZlY3RvcjIoIDM1LCA1IClcclxuICB9XHJcbl07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFcXVhdGlvbnNWZWN0b3JTZXQgZXh0ZW5kcyBWZWN0b3JTZXQge1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge0VxdWF0aW9uc0dyYXBofSBncmFwaFxyXG4gICAqIEBwYXJhbSB7Qm9vbGVhblByb3BlcnR5fSBzdW1WaXNpYmxlUHJvcGVydHlcclxuICAgKiBAcGFyYW0ge0VudW1lcmF0aW9uUHJvcGVydHkuPENvbXBvbmVudFZlY3RvclN0eWxlcz59IGNvbXBvbmVudFN0eWxlUHJvcGVydHlcclxuICAgKiBAcGFyYW0ge1ZlY3RvckNvbG9yUGFsZXR0ZX0gdmVjdG9yQ29sb3JQYWxldHRlIC0gY29sb3IgcGFsZXR0ZSBmb3IgdmVjdG9ycyBpbiB0aGlzIHNldFxyXG4gICAqIEBwYXJhbSB7Q29vcmRpbmF0ZVNuYXBNb2Rlc30gY29vcmRpbmF0ZVNuYXBNb2RlIC0gZWFjaCB2ZWN0b3Igc2V0IGNhbiBvbmx5IHJlcHJlc2VudCBvbmUgc25hcCBtb2RlXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBncmFwaCwgY29tcG9uZW50U3R5bGVQcm9wZXJ0eSwgc3VtVmlzaWJsZVByb3BlcnR5LCB2ZWN0b3JDb2xvclBhbGV0dGUsIGNvb3JkaW5hdGVTbmFwTW9kZSwgb3B0aW9ucyApIHtcclxuXHJcbiAgICBvcHRpb25zID0gbWVyZ2UoIHtcclxuXHJcbiAgICAgIC8vIEVxdWF0aW9uc1ZlY3RvclNldCB3aWxsIGluaXRpYWxpemUgaXRzIG93biBzdW0gdmVjdG9yLCBiZWNhdXNlIHRoZSBzdW0gdmVjdG9yIGluIHRoaXMgc2NyZWVuIGlzIGRpZmZlcmVudC5cclxuICAgICAgLy8gSXQncyBub3QgdHJ1bHkgYSBzdW0sIGFuZCBpdHMgY29tcHV0YXRpb24gZGVwZW5kcyBvbiB3aGljaCBlcXVhdGlvbiB0eXBlIGlzIHNlbGVjdGVkIChzZWUgRXF1YXRpb25UeXBlcykuXHJcbiAgICAgIGluaXRpYWxpemVTdW06IGZhbHNlLFxyXG5cclxuICAgICAgLy8gb2Zmc2V0cyBmb3Igc3VtIGNvbXBvbmVudCB2ZWN0b3JzIGluIFBST0pFQ1RJT04gc3R5bGVcclxuICAgICAgc3VtUHJvamVjdGlvblhPZmZzZXQ6IDAuNSxcclxuICAgICAgc3VtUHJvamVjdGlvbllPZmZzZXQ6IDAuNVxyXG4gICAgfSwgb3B0aW9ucyApO1xyXG5cclxuICAgIHN1cGVyKCBncmFwaCwgY29tcG9uZW50U3R5bGVQcm9wZXJ0eSwgc3VtVmlzaWJsZVByb3BlcnR5LCB2ZWN0b3JDb2xvclBhbGV0dGUsIG9wdGlvbnMgKTtcclxuXHJcbiAgICAvLyBAcHVibGljIChyZWFkLW9ubHkpIHtzdHJpbmdbXX0gc3ltYm9sc1xyXG4gICAgdGhpcy5zeW1ib2xzID0gKCBjb29yZGluYXRlU25hcE1vZGUgPT09IENvb3JkaW5hdGVTbmFwTW9kZXMuQ0FSVEVTSUFOICkgP1xyXG4gICAgICAgICAgICAgICAgICAgVmVjdG9yQWRkaXRpb25Db25zdGFudHMuVkVDVE9SX1NZTUJPTFNfR1JPVVBfMSA6XHJcbiAgICAgICAgICAgICAgICAgICBWZWN0b3JBZGRpdGlvbkNvbnN0YW50cy5WRUNUT1JfU1lNQk9MU19HUk9VUF8yO1xyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8gQ3JlYXRlIHRoZSB2ZWN0b3JzLCBvbmUgbGVzcyB0aGFuIHN5bWJvbHMuIEZvciBleGFtcGxlLCBpZiBzeW1ib2xzIHdlcmUgWyAnYScsICdiJywgJ2MnIF0sXHJcbiAgICAvLyAnYScgYW5kICdjJyB3b3VsZCBiZSB2ZWN0b3Igc3ltYm9scyBhbmQgJ2MnIHdvdWxkIGJlIHRoZSBzdW0gdmVjdG9yLlxyXG5cclxuICAgIGNvbnN0IHZlY3RvckRlc2NyaXB0aW9ucyA9ICggY29vcmRpbmF0ZVNuYXBNb2RlID09PSBDb29yZGluYXRlU25hcE1vZGVzLkNBUlRFU0lBTiApID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENBUlRFU0lBTl9WRUNUT1JfREVTQ1JJUFRJT05TIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBPTEFSX1ZFQ1RPUl9ERVNDUklQVElPTlM7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCB2ZWN0b3JEZXNjcmlwdGlvbnMubGVuZ3RoID09PSB0aGlzLnN5bWJvbHMubGVuZ3RoIC0gMSApO1xyXG5cclxuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IHZlY3RvckRlc2NyaXB0aW9ucy5sZW5ndGg7IGkrKyApIHtcclxuXHJcbiAgICAgIGNvbnN0IHZlY3RvckRlc2NyaXB0aW9uID0gdmVjdG9yRGVzY3JpcHRpb25zWyBpIF07XHJcblxyXG4gICAgICAvLyB2ZXJpZnkgdGhhdCBhbGwgZmllbGRzIGluIHRoZSBkZXNjcmlwdGlvbiBhcmUgcHJlc2VudFxyXG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCB2ZWN0b3JEZXNjcmlwdGlvbi52ZWN0b3JUYWlsLCAnbWlzc2luZyB2ZWN0b3JUYWlsJyApO1xyXG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCB2ZWN0b3JEZXNjcmlwdGlvbi52ZWN0b3JDb21wb25lbnRzLCAnbWlzc2luZyB2ZWN0b3JDb21wb25lbnRzJyApO1xyXG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCB2ZWN0b3JEZXNjcmlwdGlvbi5iYXNlVmVjdG9yVGFpbCwgJ21pc3NpbmcgYmFzZVZlY3RvclRhaWwnICk7XHJcblxyXG4gICAgICBjb25zdCB2ZWN0b3IgPSBuZXcgRXF1YXRpb25zVmVjdG9yKFxyXG4gICAgICAgIHZlY3RvckRlc2NyaXB0aW9uLnZlY3RvclRhaWwsXHJcbiAgICAgICAgdmVjdG9yRGVzY3JpcHRpb24udmVjdG9yQ29tcG9uZW50cyxcclxuICAgICAgICB2ZWN0b3JEZXNjcmlwdGlvbi5iYXNlVmVjdG9yVGFpbCxcclxuICAgICAgICBncmFwaCxcclxuICAgICAgICB0aGlzLFxyXG4gICAgICAgIHRoaXMuc3ltYm9sc1sgaSBdICk7XHJcblxyXG4gICAgICB0aGlzLnZlY3RvcnMucHVzaCggdmVjdG9yICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyBDcmVhdGUgdGhlIHN1bSB2ZWN0b3JcclxuXHJcbiAgICAvLyBAcHVibGljIChyZWFkLW9ubHkpIHtFcXVhdGlvbnNTdW1WZWN0b3J9XHJcbiAgICB0aGlzLnN1bVZlY3RvciA9IG5ldyBFcXVhdGlvbnNTdW1WZWN0b3IoIGdyYXBoLCB0aGlzLCBncmFwaC5lcXVhdGlvblR5cGVQcm9wZXJ0eSxcclxuICAgICAgXy5sYXN0KCB0aGlzLnN5bWJvbHMgKSApO1xyXG4gICAgdGhpcy5zdW1WZWN0b3Iuc2V0UHJvamVjdGlvbk9mZnNldHMoIG9wdGlvbnMuc3VtUHJvamVjdGlvblhPZmZzZXQsIG9wdGlvbnMuc3VtUHJvamVjdGlvbllPZmZzZXQgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlc2V0cyB0aGUgdmVjdG9yIHNldC5cclxuICAgKiBAb3ZlcnJpZGVcclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgcmVzZXQoKSB7XHJcblxyXG4gICAgLy8gV2UgYXJlIG5vdCBjYWxsaW5nIHN1cGVyLnJlc2V0IGJlY2F1c2UgdGhlIGRlZmF1bHQgYmVoYXZpb3IgaXMgdG8gZGlzcG9zZSBvZiBhbGwgdmVjdG9ycyBpbiB0aGlzLnZlY3RvcnMuXHJcbiAgICAvLyBJbiB0aGUgRXF1YXRpb25zIHNjcmVlbiwgdmVjdG9ycyBhcmUgY3JlYXRlZCBhdXRvbWF0aWNhbGx5IGF0IHN0YXJ0dXAsIGFuZCB0aGVyZSBpcyBubyB3YXkgdG8gY3JlYXRlZCB0aGVtXHJcbiAgICAvLyB2aWEgdGhlIFVJLiAgU28gd2Ugd2FudCB0byBrZWVwIHRoZW0gYXJvdW5kLCBidXQgcmVzZXQgdGhlbS5cclxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvdmVjdG9yLWFkZGl0aW9uL2lzc3Vlcy8xNDNcclxuICAgIHRoaXMudmVjdG9ycy5mb3JFYWNoKCB2ZWN0b3IgPT4geyB2ZWN0b3IucmVzZXQoKTsgfSApO1xyXG5cclxuICAgIHRoaXMuc3VtVmVjdG9yLnJlc2V0KCk7XHJcbiAgfVxyXG59XHJcblxyXG52ZWN0b3JBZGRpdGlvbi5yZWdpc3RlciggJ0VxdWF0aW9uc1ZlY3RvclNldCcsIEVxdWF0aW9uc1ZlY3RvclNldCApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxLQUFLLE1BQU0sNkJBQTZCO0FBQy9DLE9BQU9DLE9BQU8sTUFBTSwrQkFBK0I7QUFDbkQsT0FBT0MsS0FBSyxNQUFNLG1DQUFtQztBQUNyRCxPQUFPQyxtQkFBbUIsTUFBTSwyQ0FBMkM7QUFDM0UsT0FBT0MsU0FBUyxNQUFNLGlDQUFpQztBQUN2RCxPQUFPQyx1QkFBdUIsTUFBTSx5Q0FBeUM7QUFDN0UsT0FBT0MsY0FBYyxNQUFNLHlCQUF5QjtBQUNwRCxPQUFPQyxrQkFBa0IsTUFBTSx5QkFBeUI7QUFDeEQsT0FBT0MsZUFBZSxNQUFNLHNCQUFzQjs7QUFFbEQ7QUFDQSxNQUFNQyw2QkFBNkIsR0FBRztBQUVwQztBQUNBO0VBQ0VDLGdCQUFnQixFQUFFLElBQUlULE9BQU8sQ0FBRSxDQUFDLEVBQUUsQ0FBRSxDQUFDO0VBQ3JDVSxVQUFVLEVBQUUsSUFBSVYsT0FBTyxDQUFFLENBQUMsRUFBRSxDQUFFLENBQUM7RUFDL0JXLGNBQWMsRUFBRSxJQUFJWCxPQUFPLENBQUUsRUFBRSxFQUFFLEVBQUc7QUFDdEMsQ0FBQztBQUVEO0FBQ0E7RUFDRVMsZ0JBQWdCLEVBQUUsSUFBSVQsT0FBTyxDQUFFLENBQUMs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