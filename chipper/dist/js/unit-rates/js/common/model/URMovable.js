// Copyright 2017-2023, University of Colorado Boulder

/**
 * A model element that is movable.
 * It has a current position and a desired destination.
 * When the user drags the model element, it moves immediately to the desired destination.
 * When the destination is set programmatically, it animates to the desired destination.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import Vector2 from '../../../../dot/js/Vector2.js';
import Vector2Property from '../../../../dot/js/Vector2Property.js';
import merge from '../../../../phet-core/js/merge.js';
import unitRates from '../../unitRates.js';
export default class URMovable {
  /**
   * @param {Object} [options]
   */
  constructor(options) {
    options = merge({
      position: new Vector2(0, 0),
      // {Vector2} initial position
      dragging: false,
      // {boolean} is this instance being dragged by the user?
      animationSpeed: 100 // {number} distance/second when animating
    }, options);

    // @public (read-only) DO NOT set this directly! Use moveTo or animateTo.
    this.positionProperty = new Vector2Property(options.position);

    // @public drag handlers must manage this flag during a drag sequence
    this.dragging = options.dragging;

    // @private
    this.animationSpeed = options.animationSpeed;

    // @private {Vector2} destination to animate to, set using animateTo
    this.destination = options.position.copy();

    // @private {function|null} called when animation step occurs, set using animateTo. Don't do anything expensive here!
    this.animationStepCallback = null;

    // @private {function|null} called when animation to destination completes, set using animateTo
    this.animationCompletedCallback = null;
  }

  // @public
  reset() {
    // call moveTo instead of positionProperty.set, so that any animation in progress is cancelled
    this.moveTo(this.positionProperty.initialValue);
  }

  /**
   * Moves immediately to the specified position, without animation.
   * @param {Vector2} position
   * @public
   */
  moveTo(position) {
    // cancel any pending callbacks
    this.animationStepCallback = null;
    this.animationCompletedCallback = null;

    // move immediately to the position
    this.destination = position;
    this.positionProperty.set(position);
  }

  /**
   * Animates to the specified position.
   * Provides optional callback that occur on animation step and completion.
   * @param {Vector2} destination
   * @param {Object} [options]
   * @public
   */
  animateTo(destination, options) {
    options = merge({
      animationStepCallback: null,
      // {function} called when animation step occurs
      animationCompletedCallback: null // {function} called when animation has completed
    }, options);
    this.destination = destination;
    this.animationStepCallback = options.animationStepCallback;
    this.animationCompletedCallback = options.animationCompletedCallback;
  }

  /**
   * Animates position, when not being dragged by the user.
   * @param {number} dt - time since the previous step, in seconds
   * @public
   */
  step(dt) {
    const doStep = !this.dragging && (!this.positionProperty.get().equals(this.destination) || this.animationCompletedCallback);
    if (doStep) {
      // optional callback
      this.animationStepCallback && this.animationStepCallback();

      // distance from destination
      const totalDistance = this.positionProperty.get().distance(this.destination);

      // distance to move on this step
      const stepDistance = this.animationSpeed * dt;
      if (totalDistance <= stepDistance) {
        // move directly to the destination
        this.positionProperty.set(this.destination);

        // callback, which may set a new callback
        const saveAnimationCompletedCallback = this.animationCompletedCallback;
        this.animationCompletedCallback && this.animationCompletedCallback();
        if (saveAnimationCompletedCallback === this.animationCompletedCallback) {
          this.animationCompletedCallback = null;
        }
      } else {
        // move one step towards the destination
        const stepAngle = Math.atan2(this.destination.y - this.positionProperty.get().y, this.destination.x - this.positionProperty.get().x);
        const stepVector = Vector2.createPolar(stepDistance, stepAngle);
        this.positionProperty.set(this.positionProperty.get().plus(stepVector));
      }
    }
  }
}
unitRates.register('URMovable', URMovable);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWZWN0b3IyIiwiVmVjdG9yMlByb3BlcnR5IiwibWVyZ2UiLCJ1bml0UmF0ZXMiLCJVUk1vdmFibGUiLCJjb25zdHJ1Y3RvciIsIm9wdGlvbnMiLCJwb3NpdGlvbiIsImRyYWdnaW5nIiwiYW5pbWF0aW9uU3BlZWQiLCJwb3NpdGlvblByb3BlcnR5IiwiZGVzdGluYXRpb24iLCJjb3B5IiwiYW5pbWF0aW9uU3RlcENhbGxiYWNrIiwiYW5pbWF0aW9uQ29tcGxldGVkQ2FsbGJhY2siLCJyZXNldCIsIm1vdmVUbyIsImluaXRpYWxWYWx1ZSIsInNldCIsImFuaW1hdGVUbyIsInN0ZXAiLCJkdCIsImRvU3RlcCIsImdldCIsImVxdWFscyIsInRvdGFsRGlzdGFuY2UiLCJkaXN0YW5jZSIsInN0ZXBEaXN0YW5jZSIsInNhdmVBbmltYXRpb25Db21wbGV0ZWRDYWxsYmFjayIsInN0ZXBBbmdsZSIsIk1hdGgiLCJhdGFuMiIsInkiLCJ4Iiwic3RlcFZlY3RvciIsImNyZWF0ZVBvbGFyIiwicGx1cyIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiVVJNb3ZhYmxlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE3LTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIEEgbW9kZWwgZWxlbWVudCB0aGF0IGlzIG1vdmFibGUuXHJcbiAqIEl0IGhhcyBhIGN1cnJlbnQgcG9zaXRpb24gYW5kIGEgZGVzaXJlZCBkZXN0aW5hdGlvbi5cclxuICogV2hlbiB0aGUgdXNlciBkcmFncyB0aGUgbW9kZWwgZWxlbWVudCwgaXQgbW92ZXMgaW1tZWRpYXRlbHkgdG8gdGhlIGRlc2lyZWQgZGVzdGluYXRpb24uXHJcbiAqIFdoZW4gdGhlIGRlc3RpbmF0aW9uIGlzIHNldCBwcm9ncmFtbWF0aWNhbGx5LCBpdCBhbmltYXRlcyB0byB0aGUgZGVzaXJlZCBkZXN0aW5hdGlvbi5cclxuICpcclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICovXHJcblxyXG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVmVjdG9yMi5qcyc7XHJcbmltcG9ydCBWZWN0b3IyUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjJQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBtZXJnZSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvbWVyZ2UuanMnO1xyXG5pbXBvcnQgdW5pdFJhdGVzIGZyb20gJy4uLy4uL3VuaXRSYXRlcy5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVUk1vdmFibGUge1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIG9wdGlvbnMgKSB7XHJcblxyXG4gICAgb3B0aW9ucyA9IG1lcmdlKCB7XHJcbiAgICAgIHBvc2l0aW9uOiBuZXcgVmVjdG9yMiggMCwgMCApLCAvLyB7VmVjdG9yMn0gaW5pdGlhbCBwb3NpdGlvblxyXG4gICAgICBkcmFnZ2luZzogZmFsc2UsIC8vIHtib29sZWFufSBpcyB0aGlzIGluc3RhbmNlIGJlaW5nIGRyYWdnZWQgYnkgdGhlIHVzZXI/XHJcbiAgICAgIGFuaW1hdGlvblNwZWVkOiAxMDAgLy8ge251bWJlcn0gZGlzdGFuY2Uvc2Vjb25kIHdoZW4gYW5pbWF0aW5nXHJcbiAgICB9LCBvcHRpb25zICk7XHJcblxyXG4gICAgLy8gQHB1YmxpYyAocmVhZC1vbmx5KSBETyBOT1Qgc2V0IHRoaXMgZGlyZWN0bHkhIFVzZSBtb3ZlVG8gb3IgYW5pbWF0ZVRvLlxyXG4gICAgdGhpcy5wb3NpdGlvblByb3BlcnR5ID0gbmV3IFZlY3RvcjJQcm9wZXJ0eSggb3B0aW9ucy5wb3NpdGlvbiApO1xyXG5cclxuICAgIC8vIEBwdWJsaWMgZHJhZyBoYW5kbGVycyBtdXN0IG1hbmFnZSB0aGlzIGZsYWcgZHVyaW5nIGEgZHJhZyBzZXF1ZW5jZVxyXG4gICAgdGhpcy5kcmFnZ2luZyA9IG9wdGlvbnMuZHJhZ2dpbmc7XHJcblxyXG4gICAgLy8gQHByaXZhdGVcclxuICAgIHRoaXMuYW5pbWF0aW9uU3BlZWQgPSBvcHRpb25zLmFuaW1hdGlvblNwZWVkO1xyXG5cclxuICAgIC8vIEBwcml2YXRlIHtWZWN0b3IyfSBkZXN0aW5hdGlvbiB0byBhbmltYXRlIHRvLCBzZXQgdXNpbmcgYW5pbWF0ZVRvXHJcbiAgICB0aGlzLmRlc3RpbmF0aW9uID0gb3B0aW9ucy5wb3NpdGlvbi5jb3B5KCk7XHJcblxyXG4gICAgLy8gQHByaXZhdGUge2Z1bmN0aW9ufG51bGx9IGNhbGxlZCB3aGVuIGFuaW1hdGlvbiBzdGVwIG9jY3Vycywgc2V0IHVzaW5nIGFuaW1hdGVUby4gRG9uJ3QgZG8gYW55dGhpbmcgZXhwZW5zaXZlIGhlcmUhXHJcbiAgICB0aGlzLmFuaW1hdGlvblN0ZXBDYWxsYmFjayA9IG51bGw7XHJcblxyXG4gICAgLy8gQHByaXZhdGUge2Z1bmN0aW9ufG51bGx9IGNhbGxlZCB3aGVuIGFuaW1hdGlvbiB0byBkZXN0aW5hdGlvbiBjb21wbGV0ZXMsIHNldCB1c2luZyBhbmltYXRlVG9cclxuICAgIHRoaXMuYW5pbWF0aW9uQ29tcGxldGVkQ2FsbGJhY2sgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgLy8gQHB1YmxpY1xyXG4gIHJlc2V0KCkge1xyXG5cclxuICAgIC8vIGNhbGwgbW92ZVRvIGluc3RlYWQgb2YgcG9zaXRpb25Qcm9wZXJ0eS5zZXQsIHNvIHRoYXQgYW55IGFuaW1hdGlvbiBpbiBwcm9ncmVzcyBpcyBjYW5jZWxsZWRcclxuICAgIHRoaXMubW92ZVRvKCB0aGlzLnBvc2l0aW9uUHJvcGVydHkuaW5pdGlhbFZhbHVlICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBNb3ZlcyBpbW1lZGlhdGVseSB0byB0aGUgc3BlY2lmaWVkIHBvc2l0aW9uLCB3aXRob3V0IGFuaW1hdGlvbi5cclxuICAgKiBAcGFyYW0ge1ZlY3RvcjJ9IHBvc2l0aW9uXHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG4gIG1vdmVUbyggcG9zaXRpb24gKSB7XHJcblxyXG4gICAgLy8gY2FuY2VsIGFueSBwZW5kaW5nIGNhbGxiYWNrc1xyXG4gICAgdGhpcy5hbmltYXRpb25TdGVwQ2FsbGJhY2sgPSBudWxsO1xyXG4gICAgdGhpcy5hbmltYXRpb25Db21wbGV0ZWRDYWxsYmFjayA9IG51bGw7XHJcblxyXG4gICAgLy8gbW92ZSBpbW1lZGlhdGVseSB0byB0aGUgcG9zaXRpb25cclxuICAgIHRoaXMuZGVzdGluYXRpb24gPSBwb3NpdGlvbjtcclxuICAgIHRoaXMucG9zaXRpb25Qcm9wZXJ0eS5zZXQoIHBvc2l0aW9uICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBbmltYXRlcyB0byB0aGUgc3BlY2lmaWVkIHBvc2l0aW9uLlxyXG4gICAqIFByb3ZpZGVzIG9wdGlvbmFsIGNhbGxiYWNrIHRoYXQgb2NjdXIgb24gYW5pbWF0aW9uIHN0ZXAgYW5kIGNvbXBsZXRpb24uXHJcbiAgICogQHBhcmFtIHtWZWN0b3IyfSBkZXN0aW5hdGlvblxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgYW5pbWF0ZVRvKCBkZXN0aW5hdGlvbiwgb3B0aW9ucyApIHtcclxuXHJcbiAgICBvcHRpb25zID0gbWVyZ2UoIHtcclxuICAgICAgYW5pbWF0aW9uU3RlcENhbGxiYWNrOiBudWxsLCAvLyB7ZnVuY3Rpb259IGNhbGxlZCB3aGVuIGFuaW1hdGlvbiBzdGVwIG9jY3Vyc1xyXG4gICAgICBhbmltYXRpb25Db21wbGV0ZWRDYWxsYmFjazogbnVsbCAvLyB7ZnVuY3Rpb259IGNhbGxlZCB3aGVuIGFuaW1hdGlvbiBoYXMgY29tcGxldGVkXHJcbiAgICB9LCBvcHRpb25zICk7XHJcblxyXG4gICAgdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xyXG4gICAgdGhpcy5hbmltYXRpb25TdGVwQ2FsbGJhY2sgPSBvcHRpb25zLmFuaW1hdGlvblN0ZXBDYWxsYmFjaztcclxuICAgIHRoaXMuYW5pbWF0aW9uQ29tcGxldGVkQ2FsbGJhY2sgPSBvcHRpb25zLmFuaW1hdGlvbkNvbXBsZXRlZENhbGxiYWNrO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQW5pbWF0ZXMgcG9zaXRpb24sIHdoZW4gbm90IGJlaW5nIGRyYWdnZWQgYnkgdGhlIHVzZXIuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGR0IC0gdGltZSBzaW5jZSB0aGUgcHJldmlvdXMgc3RlcCwgaW4gc2Vjb25kc1xyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBzdGVwKCBkdCApIHtcclxuICAgIGNvbnN0IGRvU3RlcCA9ICF0aGlzLmRyYWdnaW5nICYmICggIXRoaXMucG9zaXRpb25Qcm9wZXJ0eS5nZXQoKS5lcXVhbHMoIHRoaXMuZGVzdGluYXRpb24gKSB8fCB0aGlzLmFuaW1hdGlvbkNvbXBsZXRlZENhbGxiYWNrICk7XHJcbiAgICBpZiAoIGRvU3RlcCApIHtcclxuXHJcbiAgICAgIC8vIG9wdGlvbmFsIGNhbGxiYWNrXHJcbiAgICAgIHRoaXMuYW5pbWF0aW9uU3RlcENhbGxiYWNrICYmIHRoaXMuYW5pbWF0aW9uU3RlcENhbGxiYWNrKCk7XHJcblxyXG4gICAgICAvLyBkaXN0YW5jZSBmcm9tIGRlc3RpbmF0aW9uXHJcbiAgICAgIGNvbnN0IHRvdGFsRGlzdGFuY2UgPSB0aGlzLnBvc2l0aW9uUHJvcGVydHkuZ2V0KCkuZGlzdGFuY2UoIHRoaXMuZGVzdGluYXRpb24gKTtcclxuXHJcbiAgICAgIC8vIGRpc3RhbmNlIHRvIG1vdmUgb24gdGhpcyBzdGVwXHJcbiAgICAgIGNvbnN0IHN0ZXBEaXN0YW5jZSA9IHRoaXMuYW5pbWF0aW9uU3BlZWQgKiBkdDtcclxuXHJcbiAgICAgIGlmICggdG90YWxEaXN0YW5jZSA8PSBzdGVwRGlzdGFuY2UgKSB7XHJcblxyXG4gICAgICAgIC8vIG1vdmUgZGlyZWN0bHkgdG8gdGhlIGRlc3RpbmF0aW9uXHJcbiAgICAgICAgdGhpcy5wb3NpdGlvblByb3BlcnR5LnNldCggdGhpcy5kZXN0aW5hdGlvbiApO1xyXG5cclxuICAgICAgICAvLyBjYWxsYmFjaywgd2hpY2ggbWF5IHNldCBhIG5ldyBjYWxsYmFja1xyXG4gICAgICAgIGNvbnN0IHNhdmVBbmltYXRpb25Db21wbGV0ZWRDYWxsYmFjayA9IHRoaXMuYW5pbWF0aW9uQ29tcGxldGVkQ2FsbGJhY2s7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb25Db21wbGV0ZWRDYWxsYmFjayAmJiB0aGlzLmFuaW1hdGlvbkNvbXBsZXRlZENhbGxiYWNrKCk7XHJcbiAgICAgICAgaWYgKCBzYXZlQW5pbWF0aW9uQ29tcGxldGVkQ2FsbGJhY2sgPT09IHRoaXMuYW5pbWF0aW9uQ29tcGxldGVkQ2FsbGJhY2sgKSB7XHJcbiAgICAgICAgICB0aGlzLmFuaW1hdGlvbkNvbXBsZXRlZENhbGxiYWNrID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcblxyXG4gICAgICAgIC8vIG1vdmUgb25lIHN0ZXAgdG93YXJkcyB0aGUgZGVzdGluYXRpb25cclxuICAgICAgICBjb25zdCBzdGVwQW5nbGUgPSBNYXRoLmF0YW4yKFxyXG4gICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi55IC0gdGhpcy5wb3NpdGlvblByb3BlcnR5LmdldCgpLnksXHJcbiAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLnggLSB0aGlzLnBvc2l0aW9uUHJvcGVydHkuZ2V0KCkueCApO1xyXG4gICAgICAgIGNvbnN0IHN0ZXBWZWN0b3IgPSBWZWN0b3IyLmNyZWF0ZVBvbGFyKCBzdGVwRGlzdGFuY2UsIHN0ZXBBbmdsZSApO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb25Qcm9wZXJ0eS5zZXQoIHRoaXMucG9zaXRpb25Qcm9wZXJ0eS5nZXQoKS5wbHVzKCBzdGVwVmVjdG9yICkgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxudW5pdFJhdGVzLnJlZ2lzdGVyKCAnVVJNb3ZhYmxlJywgVVJNb3ZhYmxlICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLE9BQU8sTUFBTSwrQkFBK0I7QUFDbkQsT0FBT0MsZUFBZSxNQUFNLHVDQUF1QztBQUNuRSxPQUFPQyxLQUFLLE1BQU0sbUNBQW1DO0FBQ3JELE9BQU9DLFNBQVMsTUFBTSxvQkFBb0I7QUFFMUMsZUFBZSxNQUFNQyxTQUFTLENBQUM7RUFFN0I7QUFDRjtBQUNBO0VBQ0VDLFdBQVdBLENBQUVDLE9BQU8sRUFBRztJQUVyQkEsT0FBTyxHQUFHSixLQUFLLENBQUU7TUFDZkssUUFBUSxFQUFFLElBQUlQLE9BQU8sQ0FBRSxDQUFDLEVBQUUsQ0FBRSxDQUFDO01BQUU7TUFDL0JRLFFBQVEsRUFBRSxLQUFLO01BQUU7TUFDakJDLGNBQWMsRUFBRSxHQUFHLENBQUM7SUFDdEIsQ0FBQyxFQUFFSCxPQUFRLENBQUM7O0lBRVo7SUFDQSxJQUFJLENBQUNJLGdCQUFnQixHQUFHLElBQUlULGVBQWUsQ0FBRUssT0FBTyxDQUFDQyxRQUFTLENBQUM7O0lBRS9EO0lBQ0EsSUFBSSxDQUFDQyxRQUFRLEdBQUdGLE9BQU8sQ0FBQ0UsUUFBUTs7SUFFaEM7SUFDQSxJQUFJLENBQUNDLGNBQWMsR0FBR0gsT0FBTyxDQUFDRyxjQUFjOztJQUU1QztJQUNBLElBQUksQ0FBQ0UsV0FBVyxHQUFHTCxPQUFPLENBQUNDLFFBQVEsQ0FBQ0ssSUFBSSxDQUFDLENBQUM7O0lBRTFDO0lBQ0EsSUFBSSxDQUFDQyxxQkFBcUIsR0FBRyxJQUFJOztJQUVqQztJQUNBLElBQUksQ0FBQ0MsMEJBQTBCLEdBQUcsSUFBSTtFQUN4Qzs7RUFFQTtFQUNBQyxLQUFLQSxDQUFBLEVBQUc7SUFFTjtJQUNBLElBQUksQ0FBQ0MsTUFBTSxDQUFFLElBQUksQ0FBQ04sZ0JBQWdCLENBQUNPLFlBQWEsQ0FBQztFQUNuRDs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBQ0VELE1BQU1BLENBQUVULFFBQVEsRUFBRztJQUVqQjtJQUNBLElBQUksQ0FBQ00scUJBQXFCLEdBQUcsSUFBSTtJQUNqQyxJQUFJLENBQUNDLDBCQUEwQixHQUFHLElBQUk7O0lBRXRDO0lBQ0EsSUFBSSxDQUFDSCxXQUFXLEdBQUdKLFFBQVE7SUFDM0IsSUFBSSxDQUFDRyxnQkFBZ0IsQ0FBQ1EsR0FBRyxDQUFFWCxRQUFTLENBQUM7RUFDdkM7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRVksU0FBU0EsQ0FBRVIsV0FBVyxFQUFFTCxPQUFPLEVBQUc7SUFFaENBLE9BQU8sR0FBR0osS0FBSyxDQUFFO01BQ2ZXLHFCQUFxQixFQUFFLElBQUk7TUFBRTtNQUM3QkMsMEJBQTBCLEVBQUUsSUFBSSxDQUFDO0lBQ25DLENBQUMsRUFBRVIsT0FBUSxDQUFDO0lBRVosSUFBSSxDQUFDSyxXQUFXLEdBQUdBLFdBQVc7SUFDOUIsSUFBSSxDQUFDRSxxQkFBcUIsR0FBR1AsT0FBTyxDQUFDTyxxQkFBcUI7SUFDMUQsSUFBSSxDQUFDQywwQkFBMEIsR0FBR1IsT0FBTyxDQUFDUSwwQkFBMEI7RUFDdEU7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtFQUNFTSxJQUFJQSxDQUFFQyxFQUFFLEVBQUc7SUFDVCxNQUFNQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLENBQUNkLFFBQVEsS0FBTSxDQUFDLElBQUksQ0FBQ0UsZ0JBQWdCLENBQUNhLEdBQUcsQ0FBQyxDQUFDLENBQUNDLE1BQU0sQ0FBRSxJQUFJLENBQUNiLFdBQVksQ0FBQyxJQUFJLElBQUksQ0FBQ0csMEJBQTBCLENBQUU7SUFDL0gsSUFBS1EsTUFBTSxFQUFHO01BRVo7TUFDQSxJQUFJLENBQUNULHFCQUFxQixJQUFJLElBQUksQ0FBQ0EscUJBQXFCLENBQUMsQ0FBQzs7TUFFMUQ7TUFDQSxNQUFNWSxhQUFhLEdBQUcsSUFBSSxDQUFDZixnQkFBZ0IsQ0FBQ2EsR0FBRyxDQUFDLENBQUMsQ0FBQ0csUUFBUSxDQUFFLElBQUksQ0FBQ2YsV0FBWSxDQUFDOztNQUU5RTtNQUNBLE1BQU1nQixZQUFZLEdBQUcsSUFBSSxDQUFDbEIsY0FBYyxHQUFHWSxFQUFFO01BRTdDLElBQUtJLGFBQWEsSUFBSUUsWUFBWSxFQUFHO1FBRW5DO1FBQ0EsSUFBSSxDQUFDakIsZ0JBQWdCLENBQUNRLEdBQUcsQ0FBRSxJQUFJLENBQUNQLFdBQVksQ0FBQzs7UUFFN0M7UUFDQSxNQUFNaUIsOEJBQThCLEdBQUcsSUFBSSxDQUFDZCwwQkFBMEI7UUFDdEUsSUFBSSxDQUFDQSwwQkFBMEIsSUFBSSxJQUFJLENBQUNBLDBCQUEwQixDQUFDLENBQUM7UUFDcEUsSUFBS2MsOEJBQThCLEtBQUssSUFBSSxDQUFDZCwwQkFBMEIsRUFBRztVQUN4RSxJQUFJLENBQUNBLDBCQUEwQixHQUFHLElBQUk7UUFDeEM7TUFDRixDQUFDLE1BQ0k7UUFFSDtRQUNBLE1BQU1lLFNBQVMsR0FBR0MsSUFBSSxDQUFDQyxLQUFLLENBQzFCLElBQUksQ0FBQ3BCLFdBQVcsQ0FBQ3FCLENBQUMsR0FBRyxJQUFJLENBQUN0QixnQkFBZ0IsQ0FBQ2EsR0FBRyxDQUFDLENBQUMsQ0FBQ1MsQ0FBQyxFQUNsRCxJQUFJLENBQUNyQixXQUFXLENBQUNzQixDQUFDLEdBQUcsSUFBSSxDQUFDdkIsZ0JBQWdCLENBQUNhLEdBQUcsQ0FBQyxDQUFDLENBQUNVLENBQUUsQ0FBQztRQUN0RCxNQUFNQyxVQUFVLEdBQUdsQyxPQUFPLENBQUNtQyxXQUFXLENBQUVSLFlBQVksRUFBRUUsU0FBVSxDQUFDO1FBQ2pFLElBQUksQ0FBQ25CLGdCQUFnQixDQUFDUSxHQUFHLENBQUUsSUFBSSxDQUFDUixnQkFBZ0IsQ0FBQ2EsR0FBRyxDQUFDLENBQUMsQ0FBQ2EsSUFBSSxDQUFFRixVQUFXLENBQUUsQ0FBQztNQUM3RTtJQUNGO0VBQ0Y7QUFDRjtBQUVBL0IsU0FBUyxDQUFDa0MsUUFBUSxDQUFFLFdBQVcsRUFBRWpDLFNBQVUsQ0FBQyJ9