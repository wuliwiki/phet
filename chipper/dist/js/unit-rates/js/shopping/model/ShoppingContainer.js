// Copyright 2017-2023, University of Colorado Boulder

/**
 * Container for bags and shopping items, used as the base type for Shelf and Scale.
 * Provides 1 row of bags, and 2 rows of shopping items (front and back).
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import Dimension2 from '../../../../dot/js/Dimension2.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import merge from '../../../../phet-core/js/merge.js';
import unitRates from '../../unitRates.js';
import Bag from './Bag.js';
import RowOfMovables from './RowOfMovables.js';
import ShoppingItem from './ShoppingItem.js';
export default class ShoppingContainer {
  /**
   * @param {Object} [options]
   */
  constructor(options) {
    options = merge({
      position: new Vector2(0, 0),
      // {Vector2} position of the container

      // bags
      numberOfBags: 4,
      // {number} maximum number of bags on the shelf
      bagSize: new Dimension2(100, 100),
      // {number} dimensions of each bag
      bagRowYOffset: 0,
      // {number} offset of bag row from the container's origin

      // items
      itemSize: new Dimension2(10, 10),
      // {number} dimensions of each item
      itemCellSpacing: 8,
      // {number} horizontal spacing between cells in each row
      backRowYOffset: 0,
      // {number} offset of items front row from the container's origin
      frontRowYOffset: 0 // {number} offset of items back row from the container's origin
    }, options);

    // @public (read-only)
    this.position = options.position;

    // @public row of bags, dispose not required, exists for sim lifetime
    this.bagRow = new RowOfMovables({
      position: new Vector2(options.position.x, options.position.y + options.bagRowYOffset),
      numberOfCells: options.numberOfBags,
      cellSize: options.bagSize,
      // These values were determined empirically, to look visually pleasing.
      // For fruit, the spacing affects how cells are populated when bags open to reveal items.
      cellSpacing: options.numberOfBags < 4 ? 25 : 15
    });

    // Back row has 1 more cell than front row
    const backNumberOfCells = Math.floor(options.numberOfItems / 2) + 1;
    const frontNumberOfCells = options.numberOfItems - backNumberOfCells;
    assert && assert(backNumberOfCells + frontNumberOfCells === options.numberOfItems);

    // @public back row of items, dispose not required, exists for sim lifetime
    this.backItemRow = new RowOfMovables({
      position: new Vector2(options.position.x, options.position.y + options.backRowYOffset),
      numberOfCells: backNumberOfCells,
      cellSize: options.itemSize,
      cellSpacing: options.itemCellSpacing
    });

    // @public front row of items, dispose not required, exists for sim lifetime
    this.frontItemRow = new RowOfMovables({
      position: new Vector2(options.position.x, options.position.y + options.frontRowYOffset),
      numberOfCells: frontNumberOfCells,
      cellSize: options.itemSize,
      cellSpacing: options.itemCellSpacing
    });

    // @public dispose not required, exists for sim lifetime
    this.numberOfBagsProperty = new DerivedProperty([this.bagRow.numberOfMovablesProperty], numberOfMovables => numberOfMovables);

    // @public dispose not required, exists for sim lifetime
    this.numberOfItemsProperty = new DerivedProperty([this.frontItemRow.numberOfMovablesProperty, this.backItemRow.numberOfMovablesProperty], (frontNumberOfMovables, backNumberOfMovables) => frontNumberOfMovables + backNumberOfMovables);
  }

  // @public
  reset() {
    this.bagRow.reset();
    this.backItemRow.reset();
    this.frontItemRow.reset();
  }

  /**
   * @param {Bag} bag
   * @returns {boolean}
   * @public
   */
  containsBag(bag) {
    assert && assert(bag instanceof Bag);
    return this.bagRow.contains(bag);
  }

  /**
   * @param {ShoppingItem} item
   * @returns {boolean}
   * @public
   */
  containsItem(item) {
    assert && assert(item instanceof ShoppingItem);
    return this.backItemRow.contains(item) || this.frontItemRow.contains(item);
  }

  /**
   * Removes a bag.
   * @param {Bag} bag
   * @public
   */
  removeBag(bag) {
    assert && assert(bag instanceof Bag);
    assert && assert(this.containsBag(bag), 'does not contain bag');
    this.bagRow.remove(bag);

    // Make the bag move up a few pixels, to make it obvious that it has been removed.
    // See https://github.com/phetsims/unit-rates/issues/187
    bag.moveTo(bag.positionProperty.value.plusXY(0, -5));
  }

  /**
   * Removes an item.
   * @param {ShoppingItem} item
   * @public
   */
  removeItem(item) {
    assert && assert(item instanceof ShoppingItem);
    assert && assert(this.containsItem(item), 'does not contain item');
    if (this.backItemRow.contains(item)) {
      this.backItemRow.remove(item);
    } else {
      this.frontItemRow.remove(item);
    }

    // Make the item move up a few pixels, to make it obvious that it has been removed.
    // See https://github.com/phetsims/unit-rates/issues/187
    item.moveTo(item.positionProperty.value.plusXY(0, -5));
  }

  /**
   * Is the specific item in the front row?
   * @param {ShoppingItem} item
   * @returns {boolean}
   * @public
   */
  isItemInFrontRow(item) {
    return this.frontItemRow.contains(item);
  }
}
unitRates.register('ShoppingContainer', ShoppingContainer);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJEaW1lbnNpb24yIiwiVmVjdG9yMiIsIm1lcmdlIiwidW5pdFJhdGVzIiwiQmFnIiwiUm93T2ZNb3ZhYmxlcyIsIlNob3BwaW5nSXRlbSIsIlNob3BwaW5nQ29udGFpbmVyIiwiY29uc3RydWN0b3IiLCJvcHRpb25zIiwicG9zaXRpb24iLCJudW1iZXJPZkJhZ3MiLCJiYWdTaXplIiwiYmFnUm93WU9mZnNldCIsIml0ZW1TaXplIiwiaXRlbUNlbGxTcGFjaW5nIiwiYmFja1Jvd1lPZmZzZXQiLCJmcm9udFJvd1lPZmZzZXQiLCJiYWdSb3ciLCJ4IiwieSIsIm51bWJlck9mQ2VsbHMiLCJjZWxsU2l6ZSIsImNlbGxTcGFjaW5nIiwiYmFja051bWJlck9mQ2VsbHMiLCJNYXRoIiwiZmxvb3IiLCJudW1iZXJPZkl0ZW1zIiwiZnJvbnROdW1iZXJPZkNlbGxzIiwiYXNzZXJ0IiwiYmFja0l0ZW1Sb3ciLCJmcm9udEl0ZW1Sb3ciLCJudW1iZXJPZkJhZ3NQcm9wZXJ0eSIsIm51bWJlck9mTW92YWJsZXNQcm9wZXJ0eSIsIm51bWJlck9mTW92YWJsZXMiLCJudW1iZXJPZkl0ZW1zUHJvcGVydHkiLCJmcm9udE51bWJlck9mTW92YWJsZXMiLCJiYWNrTnVtYmVyT2ZNb3ZhYmxlcyIsInJlc2V0IiwiY29udGFpbnNCYWciLCJiYWciLCJjb250YWlucyIsImNvbnRhaW5zSXRlbSIsIml0ZW0iLCJyZW1vdmVCYWciLCJyZW1vdmUiLCJtb3ZlVG8iLCJwb3NpdGlvblByb3BlcnR5IiwidmFsdWUiLCJwbHVzWFkiLCJyZW1vdmVJdGVtIiwiaXNJdGVtSW5Gcm9udFJvdyIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiU2hvcHBpbmdDb250YWluZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTctMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogQ29udGFpbmVyIGZvciBiYWdzIGFuZCBzaG9wcGluZyBpdGVtcywgdXNlZCBhcyB0aGUgYmFzZSB0eXBlIGZvciBTaGVsZiBhbmQgU2NhbGUuXHJcbiAqIFByb3ZpZGVzIDEgcm93IG9mIGJhZ3MsIGFuZCAyIHJvd3Mgb2Ygc2hvcHBpbmcgaXRlbXMgKGZyb250IGFuZCBiYWNrKS5cclxuICpcclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICovXHJcblxyXG5pbXBvcnQgRGVyaXZlZFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvRGVyaXZlZFByb3BlcnR5LmpzJztcclxuaW1wb3J0IERpbWVuc2lvbjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL0RpbWVuc2lvbjIuanMnO1xyXG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVmVjdG9yMi5qcyc7XHJcbmltcG9ydCBtZXJnZSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvbWVyZ2UuanMnO1xyXG5pbXBvcnQgdW5pdFJhdGVzIGZyb20gJy4uLy4uL3VuaXRSYXRlcy5qcyc7XHJcbmltcG9ydCBCYWcgZnJvbSAnLi9CYWcuanMnO1xyXG5pbXBvcnQgUm93T2ZNb3ZhYmxlcyBmcm9tICcuL1Jvd09mTW92YWJsZXMuanMnO1xyXG5pbXBvcnQgU2hvcHBpbmdJdGVtIGZyb20gJy4vU2hvcHBpbmdJdGVtLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNob3BwaW5nQ29udGFpbmVyIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBvcHRpb25zICkge1xyXG5cclxuICAgIG9wdGlvbnMgPSBtZXJnZSgge1xyXG5cclxuICAgICAgcG9zaXRpb246IG5ldyBWZWN0b3IyKCAwLCAwICksIC8vIHtWZWN0b3IyfSBwb3NpdGlvbiBvZiB0aGUgY29udGFpbmVyXHJcblxyXG4gICAgICAvLyBiYWdzXHJcbiAgICAgIG51bWJlck9mQmFnczogNCwgLy8ge251bWJlcn0gbWF4aW11bSBudW1iZXIgb2YgYmFncyBvbiB0aGUgc2hlbGZcclxuICAgICAgYmFnU2l6ZTogbmV3IERpbWVuc2lvbjIoIDEwMCwgMTAwICksIC8vIHtudW1iZXJ9IGRpbWVuc2lvbnMgb2YgZWFjaCBiYWdcclxuICAgICAgYmFnUm93WU9mZnNldDogMCwgLy8ge251bWJlcn0gb2Zmc2V0IG9mIGJhZyByb3cgZnJvbSB0aGUgY29udGFpbmVyJ3Mgb3JpZ2luXHJcblxyXG4gICAgICAvLyBpdGVtc1xyXG4gICAgICBpdGVtU2l6ZTogbmV3IERpbWVuc2lvbjIoIDEwLCAxMCApLCAvLyB7bnVtYmVyfSBkaW1lbnNpb25zIG9mIGVhY2ggaXRlbVxyXG4gICAgICBpdGVtQ2VsbFNwYWNpbmc6IDgsIC8vIHtudW1iZXJ9IGhvcml6b250YWwgc3BhY2luZyBiZXR3ZWVuIGNlbGxzIGluIGVhY2ggcm93XHJcbiAgICAgIGJhY2tSb3dZT2Zmc2V0OiAwLCAvLyB7bnVtYmVyfSBvZmZzZXQgb2YgaXRlbXMgZnJvbnQgcm93IGZyb20gdGhlIGNvbnRhaW5lcidzIG9yaWdpblxyXG4gICAgICBmcm9udFJvd1lPZmZzZXQ6IDAgLy8ge251bWJlcn0gb2Zmc2V0IG9mIGl0ZW1zIGJhY2sgcm93IGZyb20gdGhlIGNvbnRhaW5lcidzIG9yaWdpblxyXG5cclxuICAgIH0sIG9wdGlvbnMgKTtcclxuXHJcbiAgICAvLyBAcHVibGljIChyZWFkLW9ubHkpXHJcbiAgICB0aGlzLnBvc2l0aW9uID0gb3B0aW9ucy5wb3NpdGlvbjtcclxuXHJcbiAgICAvLyBAcHVibGljIHJvdyBvZiBiYWdzLCBkaXNwb3NlIG5vdCByZXF1aXJlZCwgZXhpc3RzIGZvciBzaW0gbGlmZXRpbWVcclxuICAgIHRoaXMuYmFnUm93ID0gbmV3IFJvd09mTW92YWJsZXMoIHtcclxuICAgICAgcG9zaXRpb246IG5ldyBWZWN0b3IyKCBvcHRpb25zLnBvc2l0aW9uLngsIG9wdGlvbnMucG9zaXRpb24ueSArIG9wdGlvbnMuYmFnUm93WU9mZnNldCApLFxyXG4gICAgICBudW1iZXJPZkNlbGxzOiBvcHRpb25zLm51bWJlck9mQmFncyxcclxuICAgICAgY2VsbFNpemU6IG9wdGlvbnMuYmFnU2l6ZSxcclxuXHJcbiAgICAgIC8vIFRoZXNlIHZhbHVlcyB3ZXJlIGRldGVybWluZWQgZW1waXJpY2FsbHksIHRvIGxvb2sgdmlzdWFsbHkgcGxlYXNpbmcuXHJcbiAgICAgIC8vIEZvciBmcnVpdCwgdGhlIHNwYWNpbmcgYWZmZWN0cyBob3cgY2VsbHMgYXJlIHBvcHVsYXRlZCB3aGVuIGJhZ3Mgb3BlbiB0byByZXZlYWwgaXRlbXMuXHJcbiAgICAgIGNlbGxTcGFjaW5nOiAoIG9wdGlvbnMubnVtYmVyT2ZCYWdzIDwgNCApID8gMjUgOiAxNVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIEJhY2sgcm93IGhhcyAxIG1vcmUgY2VsbCB0aGFuIGZyb250IHJvd1xyXG4gICAgY29uc3QgYmFja051bWJlck9mQ2VsbHMgPSBNYXRoLmZsb29yKCBvcHRpb25zLm51bWJlck9mSXRlbXMgLyAyICkgKyAxO1xyXG4gICAgY29uc3QgZnJvbnROdW1iZXJPZkNlbGxzID0gb3B0aW9ucy5udW1iZXJPZkl0ZW1zIC0gYmFja051bWJlck9mQ2VsbHM7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBiYWNrTnVtYmVyT2ZDZWxscyArIGZyb250TnVtYmVyT2ZDZWxscyA9PT0gb3B0aW9ucy5udW1iZXJPZkl0ZW1zICk7XHJcblxyXG4gICAgLy8gQHB1YmxpYyBiYWNrIHJvdyBvZiBpdGVtcywgZGlzcG9zZSBub3QgcmVxdWlyZWQsIGV4aXN0cyBmb3Igc2ltIGxpZmV0aW1lXHJcbiAgICB0aGlzLmJhY2tJdGVtUm93ID0gbmV3IFJvd09mTW92YWJsZXMoIHtcclxuICAgICAgcG9zaXRpb246IG5ldyBWZWN0b3IyKCBvcHRpb25zLnBvc2l0aW9uLngsIG9wdGlvbnMucG9zaXRpb24ueSArIG9wdGlvbnMuYmFja1Jvd1lPZmZzZXQgKSxcclxuICAgICAgbnVtYmVyT2ZDZWxsczogYmFja051bWJlck9mQ2VsbHMsXHJcbiAgICAgIGNlbGxTaXplOiBvcHRpb25zLml0ZW1TaXplLFxyXG4gICAgICBjZWxsU3BhY2luZzogb3B0aW9ucy5pdGVtQ2VsbFNwYWNpbmdcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBAcHVibGljIGZyb250IHJvdyBvZiBpdGVtcywgZGlzcG9zZSBub3QgcmVxdWlyZWQsIGV4aXN0cyBmb3Igc2ltIGxpZmV0aW1lXHJcbiAgICB0aGlzLmZyb250SXRlbVJvdyA9IG5ldyBSb3dPZk1vdmFibGVzKCB7XHJcbiAgICAgIHBvc2l0aW9uOiBuZXcgVmVjdG9yMiggb3B0aW9ucy5wb3NpdGlvbi54LCBvcHRpb25zLnBvc2l0aW9uLnkgKyBvcHRpb25zLmZyb250Um93WU9mZnNldCApLFxyXG4gICAgICBudW1iZXJPZkNlbGxzOiBmcm9udE51bWJlck9mQ2VsbHMsXHJcbiAgICAgIGNlbGxTaXplOiBvcHRpb25zLml0ZW1TaXplLFxyXG4gICAgICBjZWxsU3BhY2luZzogb3B0aW9ucy5pdGVtQ2VsbFNwYWNpbmdcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBAcHVibGljIGRpc3Bvc2Ugbm90IHJlcXVpcmVkLCBleGlzdHMgZm9yIHNpbSBsaWZldGltZVxyXG4gICAgdGhpcy5udW1iZXJPZkJhZ3NQcm9wZXJ0eSA9IG5ldyBEZXJpdmVkUHJvcGVydHkoXHJcbiAgICAgIFsgdGhpcy5iYWdSb3cubnVtYmVyT2ZNb3ZhYmxlc1Byb3BlcnR5IF0sXHJcbiAgICAgIG51bWJlck9mTW92YWJsZXMgPT4gbnVtYmVyT2ZNb3ZhYmxlc1xyXG4gICAgKTtcclxuXHJcbiAgICAvLyBAcHVibGljIGRpc3Bvc2Ugbm90IHJlcXVpcmVkLCBleGlzdHMgZm9yIHNpbSBsaWZldGltZVxyXG4gICAgdGhpcy5udW1iZXJPZkl0ZW1zUHJvcGVydHkgPSBuZXcgRGVyaXZlZFByb3BlcnR5KFxyXG4gICAgICBbIHRoaXMuZnJvbnRJdGVtUm93Lm51bWJlck9mTW92YWJsZXNQcm9wZXJ0eSwgdGhpcy5iYWNrSXRlbVJvdy5udW1iZXJPZk1vdmFibGVzUHJvcGVydHkgXSxcclxuICAgICAgKCBmcm9udE51bWJlck9mTW92YWJsZXMsIGJhY2tOdW1iZXJPZk1vdmFibGVzICkgPT4gZnJvbnROdW1iZXJPZk1vdmFibGVzICsgYmFja051bWJlck9mTW92YWJsZXNcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvLyBAcHVibGljXHJcbiAgcmVzZXQoKSB7XHJcbiAgICB0aGlzLmJhZ1Jvdy5yZXNldCgpO1xyXG4gICAgdGhpcy5iYWNrSXRlbVJvdy5yZXNldCgpO1xyXG4gICAgdGhpcy5mcm9udEl0ZW1Sb3cucmVzZXQoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7QmFnfSBiYWdcclxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgY29udGFpbnNCYWcoIGJhZyApIHtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIGJhZyBpbnN0YW5jZW9mIEJhZyApO1xyXG4gICAgcmV0dXJuIHRoaXMuYmFnUm93LmNvbnRhaW5zKCBiYWcgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7U2hvcHBpbmdJdGVtfSBpdGVtXHJcbiAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG4gIGNvbnRhaW5zSXRlbSggaXRlbSApIHtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIGl0ZW0gaW5zdGFuY2VvZiBTaG9wcGluZ0l0ZW0gKTtcclxuICAgIHJldHVybiAoIHRoaXMuYmFja0l0ZW1Sb3cuY29udGFpbnMoIGl0ZW0gKSB8fCB0aGlzLmZyb250SXRlbVJvdy5jb250YWlucyggaXRlbSApICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIGEgYmFnLlxyXG4gICAqIEBwYXJhbSB7QmFnfSBiYWdcclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgcmVtb3ZlQmFnKCBiYWcgKSB7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBiYWcgaW5zdGFuY2VvZiBCYWcgKTtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIHRoaXMuY29udGFpbnNCYWcoIGJhZyApLCAnZG9lcyBub3QgY29udGFpbiBiYWcnICk7XHJcbiAgICB0aGlzLmJhZ1Jvdy5yZW1vdmUoIGJhZyApO1xyXG5cclxuICAgIC8vIE1ha2UgdGhlIGJhZyBtb3ZlIHVwIGEgZmV3IHBpeGVscywgdG8gbWFrZSBpdCBvYnZpb3VzIHRoYXQgaXQgaGFzIGJlZW4gcmVtb3ZlZC5cclxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvdW5pdC1yYXRlcy9pc3N1ZXMvMTg3XHJcbiAgICBiYWcubW92ZVRvKCBiYWcucG9zaXRpb25Qcm9wZXJ0eS52YWx1ZS5wbHVzWFkoIDAsIC01ICkgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZXMgYW4gaXRlbS5cclxuICAgKiBAcGFyYW0ge1Nob3BwaW5nSXRlbX0gaXRlbVxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICByZW1vdmVJdGVtKCBpdGVtICkge1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggaXRlbSBpbnN0YW5jZW9mIFNob3BwaW5nSXRlbSApO1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5jb250YWluc0l0ZW0oIGl0ZW0gKSwgJ2RvZXMgbm90IGNvbnRhaW4gaXRlbScgKTtcclxuXHJcbiAgICBpZiAoIHRoaXMuYmFja0l0ZW1Sb3cuY29udGFpbnMoIGl0ZW0gKSApIHtcclxuICAgICAgdGhpcy5iYWNrSXRlbVJvdy5yZW1vdmUoIGl0ZW0gKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLmZyb250SXRlbVJvdy5yZW1vdmUoIGl0ZW0gKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNYWtlIHRoZSBpdGVtIG1vdmUgdXAgYSBmZXcgcGl4ZWxzLCB0byBtYWtlIGl0IG9idmlvdXMgdGhhdCBpdCBoYXMgYmVlbiByZW1vdmVkLlxyXG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy91bml0LXJhdGVzL2lzc3Vlcy8xODdcclxuICAgIGl0ZW0ubW92ZVRvKCBpdGVtLnBvc2l0aW9uUHJvcGVydHkudmFsdWUucGx1c1hZKCAwLCAtNSApICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJcyB0aGUgc3BlY2lmaWMgaXRlbSBpbiB0aGUgZnJvbnQgcm93P1xyXG4gICAqIEBwYXJhbSB7U2hvcHBpbmdJdGVtfSBpdGVtXHJcbiAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG4gIGlzSXRlbUluRnJvbnRSb3coIGl0ZW0gKSB7XHJcbiAgICByZXR1cm4gdGhpcy5mcm9udEl0ZW1Sb3cuY29udGFpbnMoIGl0ZW0gKTtcclxuICB9XHJcbn1cclxuXHJcbnVuaXRSYXRlcy5yZWdpc3RlciggJ1Nob3BwaW5nQ29udGFpbmVyJywgU2hvcHBpbmdDb250YWluZXIgKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxlQUFlLE1BQU0sd0NBQXdDO0FBQ3BFLE9BQU9DLFVBQVUsTUFBTSxrQ0FBa0M7QUFDekQsT0FBT0MsT0FBTyxNQUFNLCtCQUErQjtBQUNuRCxPQUFPQyxLQUFLLE1BQU0sbUNBQW1DO0FBQ3JELE9BQU9DLFNBQVMsTUFBTSxvQkFBb0I7QUFDMUMsT0FBT0MsR0FBRyxNQUFNLFVBQVU7QUFDMUIsT0FBT0MsYUFBYSxNQUFNLG9CQUFvQjtBQUM5QyxPQUFPQyxZQUFZLE1BQU0sbUJBQW1CO0FBRTVDLGVBQWUsTUFBTUMsaUJBQWlCLENBQUM7RUFFckM7QUFDRjtBQUNBO0VBQ0VDLFdBQVdBLENBQUVDLE9BQU8sRUFBRztJQUVyQkEsT0FBTyxHQUFHUCxLQUFLLENBQUU7TUFFZlEsUUFBUSxF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