// Copyright 2016-2023, University of Colorado Boulder

/**
 * Displays questions in an accordion box, with a refresh button.
 * Layout is specified in https://github.com/phetsims/unit-rates/issues/152
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import merge from '../../../../phet-core/js/merge.js';
import RefreshButton from '../../../../scenery-phet/js/buttons/RefreshButton.js';
import { Rectangle, Text, VBox } from '../../../../scenery/js/imports.js';
import AccordionBox from '../../../../sun/js/AccordionBox.js';
import URColors from '../../common/URColors.js';
import URConstants from '../../common/URConstants.js';
import unitRates from '../../unitRates.js';
import UnitRatesStrings from '../../UnitRatesStrings.js';
import ShoppingQuestionNode from './ShoppingQuestionNode.js';
export default class ShoppingQuestionsAccordionBox extends AccordionBox {
  /**
   * @param {ShoppingScene} shoppingScene
   * @param {Node} keypadLayer
   * @param {Object} [options]
   */
  constructor(shoppingScene, keypadLayer, options) {
    options = merge({}, URConstants.ACCORDION_BOX_OPTIONS, {
      // AccordionBox options
      // tight vertical margins and spacing, see https://github.com/phetsims/unit-rates/issues/140
      titleYMargin: 0,
      contentXMargin: 10,
      contentYMargin: 6,
      contentYSpacing: 2,
      titleNode: new Text(UnitRatesStrings.questionsStringProperty, {
        font: URConstants.ACCORDION_BOX_TITLE_FONT,
        maxWidth: 100
      }),
      // VBox options
      vBoxSpacing: 12 // vertical spacing between UI elements in the accordion box's content
    }, options);

    // An invisible rectangle that has the same bounds as the accordion box. Used to position the keypad.
    // Dimensions will be set after calling super.  This was added so when converting to an ES6 class, because
    // we can't use this before super.  See https://github.com/phetsims/tasks/issues/1026#issuecomment-594357784
    const thisBoundsNode = new Rectangle(0, 0, 1, 1, {
      visible: false,
      pickable: false
    });

    // 'Unit Rate?' question, dispose required.
    // This question is separate because it does not change when the refresh button is pressed.
    const unitRateQuestionNode = new ShoppingQuestionNode(shoppingScene.unitRateQuestion, thisBoundsNode, keypadLayer, {
      denominatorVisible: true
    });

    // Below the 'Unit Rate?' question is a set of questions that change when the refresh button is pressed.
    const questionsParent = new VBox({
      align: 'right',
      spacing: options.vBoxSpacing
    });
    const questionSetObserver = questionSet => {
      // remove previous questions
      questionsParent.getChildren().forEach(child => {
        assert && assert(child instanceof ShoppingQuestionNode);
        child.dispose();
      });
      questionsParent.removeAllChildren();

      // add new questions, dispose required
      const questionNodes = [];
      for (let i = 0; i < questionSet.length; i++) {
        questionNodes.push(new ShoppingQuestionNode(questionSet[i], thisBoundsNode, keypadLayer));
      }
      questionsParent.setChildren(questionNodes);
    };
    shoppingScene.questionSetProperty.link(questionSetObserver); // unlink in dispose

    // Refresh button, advances to the next question set
    const refreshButton = new RefreshButton({
      iconHeight: 14,
      xMargin: 10,
      yMargin: 5,
      baseColor: URColors.refreshButton,
      listener: () => shoppingScene.nextQuestionSet()
    });
    refreshButton.touchArea = refreshButton.localBounds.dilatedXY(5, 5);

    // AccordionBox content
    const contentNode = new VBox({
      spacing: 0,
      // no space here, we want refreshButton snug against bottom question
      align: 'left',
      children: [new VBox({
        spacing: options.vBoxSpacing,
        align: 'right',
        children: [unitRateQuestionNode, questionsParent]
      }), refreshButton]
    });
    super(contentNode, options);

    // Adjust rectangle to match accordion box size.
    thisBoundsNode.setRectBounds(this.localBounds);
    this.addChild(thisBoundsNode);
    thisBoundsNode.moveToBack();

    // @private cleanup that's specific to this Node
    this.disposeShoppingQuestionsAccordionBox = () => {
      shoppingScene.questionSetProperty.unlink(questionSetObserver);
      unitRateQuestionNode.dispose();
      questionsParent.getChildren().forEach(child => {
        assert && assert(child instanceof ShoppingQuestionNode);
        child.dispose();
      });
      refreshButton.dispose(); // workaround for memory leak https://github.com/phetsims/unit-rates/issues/207
    };
  }

  /**
   * @public
   * @override
   */
  dispose() {
    this.disposeShoppingQuestionsAccordionBox();
    super.dispose();
  }
}
unitRates.register('ShoppingQuestionsAccordionBox', ShoppingQuestionsAccordionBox);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtZXJnZSIsIlJlZnJlc2hCdXR0b24iLCJSZWN0YW5nbGUiLCJUZXh0IiwiVkJveCIsIkFjY29yZGlvbkJveCIsIlVSQ29sb3JzIiwiVVJDb25zdGFudHMiLCJ1bml0UmF0ZXMiLCJVbml0UmF0ZXNTdHJpbmdzIiwiU2hvcHBpbmdRdWVzdGlvbk5vZGUiLCJTaG9wcGluZ1F1ZXN0aW9uc0FjY29yZGlvbkJveCIsImNvbnN0cnVjdG9yIiwic2hvcHBpbmdTY2VuZSIsImtleXBhZExheWVyIiwib3B0aW9ucyIsIkFDQ09SRElPTl9CT1hfT1BUSU9OUyIsInRpdGxlWU1hcmdpbiIsImNvbnRlbnRYTWFyZ2luIiwiY29udGVudFlNYXJnaW4iLCJjb250ZW50WVNwYWNpbmciLCJ0aXRsZU5vZGUiLCJxdWVzdGlvbnNTdHJpbmdQcm9wZXJ0eSIsImZvbnQiLCJBQ0NPUkRJT05fQk9YX1RJVExFX0ZPTlQiLCJtYXhXaWR0aCIsInZCb3hTcGFjaW5nIiwidGhpc0JvdW5kc05vZGUiLCJ2aXNpYmxlIiwicGlja2FibGUiLCJ1bml0UmF0ZVF1ZXN0aW9uTm9kZSIsInVuaXRSYXRlUXVlc3Rpb24iLCJkZW5vbWluYXRvclZpc2libGUiLCJxdWVzdGlvbnNQYXJlbnQiLCJhbGlnbiIsInNwYWNpbmciLCJxdWVzdGlvblNldE9ic2VydmVyIiwicXVlc3Rpb25TZXQiLCJnZXRDaGlsZHJlbiIsImZvckVhY2giLCJjaGlsZCIsImFzc2VydCIsImRpc3Bvc2UiLCJyZW1vdmVBbGxDaGlsZHJlbiIsInF1ZXN0aW9uTm9kZXMiLCJpIiwibGVuZ3RoIiwicHVzaCIsInNldENoaWxkcmVuIiwicXVlc3Rpb25TZXRQcm9wZXJ0eSIsImxpbmsiLCJyZWZyZXNoQnV0dG9uIiwiaWNvbkhlaWdodCIsInhNYXJnaW4iLCJ5TWFyZ2luIiwiYmFzZUNvbG9yIiwibGlzdGVuZXIiLCJuZXh0UXVlc3Rpb25TZXQiLCJ0b3VjaEFyZWEiLCJsb2NhbEJvdW5kcyIsImRpbGF0ZWRYWSIsImNvbnRlbnROb2RlIiwiY2hpbGRyZW4iLCJzZXRSZWN0Qm91bmRzIiwiYWRkQ2hpbGQiLCJtb3ZlVG9CYWNrIiwiZGlzcG9zZVNob3BwaW5nUXVlc3Rpb25zQWNjb3JkaW9uQm94IiwidW5saW5rIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJTaG9wcGluZ1F1ZXN0aW9uc0FjY29yZGlvbkJveC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNi0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBEaXNwbGF5cyBxdWVzdGlvbnMgaW4gYW4gYWNjb3JkaW9uIGJveCwgd2l0aCBhIHJlZnJlc2ggYnV0dG9uLlxyXG4gKiBMYXlvdXQgaXMgc3BlY2lmaWVkIGluIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy91bml0LXJhdGVzL2lzc3Vlcy8xNTJcclxuICpcclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICovXHJcblxyXG5pbXBvcnQgbWVyZ2UgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL21lcmdlLmpzJztcclxuaW1wb3J0IFJlZnJlc2hCdXR0b24gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL2J1dHRvbnMvUmVmcmVzaEJ1dHRvbi5qcyc7XHJcbmltcG9ydCB7IFJlY3RhbmdsZSwgVGV4dCwgVkJveCB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBBY2NvcmRpb25Cb3ggZnJvbSAnLi4vLi4vLi4vLi4vc3VuL2pzL0FjY29yZGlvbkJveC5qcyc7XHJcbmltcG9ydCBVUkNvbG9ycyBmcm9tICcuLi8uLi9jb21tb24vVVJDb2xvcnMuanMnO1xyXG5pbXBvcnQgVVJDb25zdGFudHMgZnJvbSAnLi4vLi4vY29tbW9uL1VSQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IHVuaXRSYXRlcyBmcm9tICcuLi8uLi91bml0UmF0ZXMuanMnO1xyXG5pbXBvcnQgVW5pdFJhdGVzU3RyaW5ncyBmcm9tICcuLi8uLi9Vbml0UmF0ZXNTdHJpbmdzLmpzJztcclxuaW1wb3J0IFNob3BwaW5nUXVlc3Rpb25Ob2RlIGZyb20gJy4vU2hvcHBpbmdRdWVzdGlvbk5vZGUuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2hvcHBpbmdRdWVzdGlvbnNBY2NvcmRpb25Cb3ggZXh0ZW5kcyBBY2NvcmRpb25Cb3gge1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge1Nob3BwaW5nU2NlbmV9IHNob3BwaW5nU2NlbmVcclxuICAgKiBAcGFyYW0ge05vZGV9IGtleXBhZExheWVyXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBzaG9wcGluZ1NjZW5lLCBrZXlwYWRMYXllciwgb3B0aW9ucyApIHtcclxuXHJcbiAgICBvcHRpb25zID0gbWVyZ2UoIHt9LCBVUkNvbnN0YW50cy5BQ0NPUkRJT05fQk9YX09QVElPTlMsIHtcclxuXHJcbiAgICAgIC8vIEFjY29yZGlvbkJveCBvcHRpb25zXHJcbiAgICAgIC8vIHRpZ2h0IHZlcnRpY2FsIG1hcmdpbnMgYW5kIHNwYWNpbmcsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvdW5pdC1yYXRlcy9pc3N1ZXMvMTQwXHJcbiAgICAgIHRpdGxlWU1hcmdpbjogMCxcclxuICAgICAgY29udGVudFhNYXJnaW46IDEwLFxyXG4gICAgICBjb250ZW50WU1hcmdpbjogNixcclxuICAgICAgY29udGVudFlTcGFjaW5nOiAyLFxyXG4gICAgICB0aXRsZU5vZGU6IG5ldyBUZXh0KCBVbml0UmF0ZXNTdHJpbmdzLnF1ZXN0aW9uc1N0cmluZ1Byb3BlcnR5LCB7XHJcbiAgICAgICAgZm9udDogVVJDb25zdGFudHMuQUNDT1JESU9OX0JPWF9USVRMRV9GT05ULFxyXG4gICAgICAgIG1heFdpZHRoOiAxMDBcclxuICAgICAgfSApLFxyXG5cclxuICAgICAgLy8gVkJveCBvcHRpb25zXHJcbiAgICAgIHZCb3hTcGFjaW5nOiAxMiAvLyB2ZXJ0aWNhbCBzcGFjaW5nIGJldHdlZW4gVUkgZWxlbWVudHMgaW4gdGhlIGFjY29yZGlvbiBib3gncyBjb250ZW50XHJcblxyXG4gICAgfSwgb3B0aW9ucyApO1xyXG5cclxuICAgIC8vIEFuIGludmlzaWJsZSByZWN0YW5nbGUgdGhhdCBoYXMgdGhlIHNhbWUgYm91bmRzIGFzIHRoZSBhY2NvcmRpb24gYm94LiBVc2VkIHRvIHBvc2l0aW9uIHRoZSBrZXlwYWQuXHJcbiAgICAvLyBEaW1lbnNpb25zIHdpbGwgYmUgc2V0IGFmdGVyIGNhbGxpbmcgc3VwZXIuICBUaGlzIHdhcyBhZGRlZCBzbyB3aGVuIGNvbnZlcnRpbmcgdG8gYW4gRVM2IGNsYXNzLCBiZWNhdXNlXHJcbiAgICAvLyB3ZSBjYW4ndCB1c2UgdGhpcyBiZWZvcmUgc3VwZXIuICBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3Rhc2tzL2lzc3Vlcy8xMDI2I2lzc3VlY29tbWVudC01OTQzNTc3ODRcclxuICAgIGNvbnN0IHRoaXNCb3VuZHNOb2RlID0gbmV3IFJlY3RhbmdsZSggMCwgMCwgMSwgMSwge1xyXG4gICAgICB2aXNpYmxlOiBmYWxzZSxcclxuICAgICAgcGlja2FibGU6IGZhbHNlXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gJ1VuaXQgUmF0ZT8nIHF1ZXN0aW9uLCBkaXNwb3NlIHJlcXVpcmVkLlxyXG4gICAgLy8gVGhpcyBxdWVzdGlvbiBpcyBzZXBhcmF0ZSBiZWNhdXNlIGl0IGRvZXMgbm90IGNoYW5nZSB3aGVuIHRoZSByZWZyZXNoIGJ1dHRvbiBpcyBwcmVzc2VkLlxyXG4gICAgY29uc3QgdW5pdFJhdGVRdWVzdGlvbk5vZGUgPSBuZXcgU2hvcHBpbmdRdWVzdGlvbk5vZGUoIHNob3BwaW5nU2NlbmUudW5pdFJhdGVRdWVzdGlvbiwgdGhpc0JvdW5kc05vZGUsIGtleXBhZExheWVyLCB7XHJcbiAgICAgIGRlbm9taW5hdG9yVmlzaWJsZTogdHJ1ZVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIEJlbG93IHRoZSAnVW5pdCBSYXRlPycgcXVlc3Rpb24gaXMgYSBzZXQgb2YgcXVlc3Rpb25zIHRoYXQgY2hhbmdlIHdoZW4gdGhlIHJlZnJlc2ggYnV0dG9uIGlzIHByZXNzZWQuXHJcbiAgICBjb25zdCBxdWVzdGlvbnNQYXJlbnQgPSBuZXcgVkJveCgge1xyXG4gICAgICBhbGlnbjogJ3JpZ2h0JyxcclxuICAgICAgc3BhY2luZzogb3B0aW9ucy52Qm94U3BhY2luZ1xyXG4gICAgfSApO1xyXG4gICAgY29uc3QgcXVlc3Rpb25TZXRPYnNlcnZlciA9IHF1ZXN0aW9uU2V0ID0+IHtcclxuXHJcbiAgICAgIC8vIHJlbW92ZSBwcmV2aW91cyBxdWVzdGlvbnNcclxuICAgICAgcXVlc3Rpb25zUGFyZW50LmdldENoaWxkcmVuKCkuZm9yRWFjaCggY2hpbGQgPT4ge1xyXG4gICAgICAgIGFzc2VydCAmJiBhc3NlcnQoIGNoaWxkIGluc3RhbmNlb2YgU2hvcHBpbmdRdWVzdGlvbk5vZGUgKTtcclxuICAgICAgICBjaGlsZC5kaXNwb3NlKCk7XHJcbiAgICAgIH0gKTtcclxuICAgICAgcXVlc3Rpb25zUGFyZW50LnJlbW92ZUFsbENoaWxkcmVuKCk7XHJcblxyXG4gICAgICAvLyBhZGQgbmV3IHF1ZXN0aW9ucywgZGlzcG9zZSByZXF1aXJlZFxyXG4gICAgICBjb25zdCBxdWVzdGlvbk5vZGVzID0gW107XHJcbiAgICAgIGZvciAoIGxldCBpID0gMDsgaSA8IHF1ZXN0aW9uU2V0Lmxlbmd0aDsgaSsrICkge1xyXG4gICAgICAgIHF1ZXN0aW9uTm9kZXMucHVzaCggbmV3IFNob3BwaW5nUXVlc3Rpb25Ob2RlKCBxdWVzdGlvblNldFsgaSBdLCB0aGlzQm91bmRzTm9kZSwga2V5cGFkTGF5ZXIgKSApO1xyXG4gICAgICB9XHJcbiAgICAgIHF1ZXN0aW9uc1BhcmVudC5zZXRDaGlsZHJlbiggcXVlc3Rpb25Ob2RlcyApO1xyXG4gICAgfTtcclxuICAgIHNob3BwaW5nU2NlbmUucXVlc3Rpb25TZXRQcm9wZXJ0eS5saW5rKCBxdWVzdGlvblNldE9ic2VydmVyICk7IC8vIHVubGluayBpbiBkaXNwb3NlXHJcblxyXG4gICAgLy8gUmVmcmVzaCBidXR0b24sIGFkdmFuY2VzIHRvIHRoZSBuZXh0IHF1ZXN0aW9uIHNldFxyXG4gICAgY29uc3QgcmVmcmVzaEJ1dHRvbiA9IG5ldyBSZWZyZXNoQnV0dG9uKCB7XHJcbiAgICAgIGljb25IZWlnaHQ6IDE0LFxyXG4gICAgICB4TWFyZ2luOiAxMCxcclxuICAgICAgeU1hcmdpbjogNSxcclxuICAgICAgYmFzZUNvbG9yOiBVUkNvbG9ycy5yZWZyZXNoQnV0dG9uLFxyXG4gICAgICBsaXN0ZW5lcjogKCkgPT4gc2hvcHBpbmdTY2VuZS5uZXh0UXVlc3Rpb25TZXQoKVxyXG4gICAgfSApO1xyXG4gICAgcmVmcmVzaEJ1dHRvbi50b3VjaEFyZWEgPSByZWZyZXNoQnV0dG9uLmxvY2FsQm91bmRzLmRpbGF0ZWRYWSggNSwgNSApO1xyXG5cclxuICAgIC8vIEFjY29yZGlvbkJveCBjb250ZW50XHJcbiAgICBjb25zdCBjb250ZW50Tm9kZSA9IG5ldyBWQm94KCB7XHJcbiAgICAgIHNwYWNpbmc6IDAsIC8vIG5vIHNwYWNlIGhlcmUsIHdlIHdhbnQgcmVmcmVzaEJ1dHRvbiBzbnVnIGFnYWluc3QgYm90dG9tIHF1ZXN0aW9uXHJcbiAgICAgIGFsaWduOiAnbGVmdCcsXHJcbiAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgbmV3IFZCb3goIHtcclxuICAgICAgICAgIHNwYWNpbmc6IG9wdGlvbnMudkJveFNwYWNpbmcsXHJcbiAgICAgICAgICBhbGlnbjogJ3JpZ2h0JyxcclxuICAgICAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgICAgIHVuaXRSYXRlUXVlc3Rpb25Ob2RlLFxyXG4gICAgICAgICAgICBxdWVzdGlvbnNQYXJlbnRcclxuICAgICAgICAgIF1cclxuICAgICAgICB9ICksXHJcbiAgICAgICAgcmVmcmVzaEJ1dHRvblxyXG4gICAgICBdXHJcbiAgICB9ICk7XHJcblxyXG4gICAgc3VwZXIoIGNvbnRlbnROb2RlLCBvcHRpb25zICk7XHJcblxyXG4gICAgLy8gQWRqdXN0IHJlY3RhbmdsZSB0byBtYXRjaCBhY2NvcmRpb24gYm94IHNpemUuXHJcbiAgICB0aGlzQm91bmRzTm9kZS5zZXRSZWN0Qm91bmRzKCB0aGlzLmxvY2FsQm91bmRzICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCB0aGlzQm91bmRzTm9kZSApO1xyXG4gICAgdGhpc0JvdW5kc05vZGUubW92ZVRvQmFjaygpO1xyXG5cclxuICAgIC8vIEBwcml2YXRlIGNsZWFudXAgdGhhdCdzIHNwZWNpZmljIHRvIHRoaXMgTm9kZVxyXG4gICAgdGhpcy5kaXNwb3NlU2hvcHBpbmdRdWVzdGlvbnNBY2NvcmRpb25Cb3ggPSAoKSA9PiB7XHJcbiAgICAgIHNob3BwaW5nU2NlbmUucXVlc3Rpb25TZXRQcm9wZXJ0eS51bmxpbmsoIHF1ZXN0aW9uU2V0T2JzZXJ2ZXIgKTtcclxuICAgICAgdW5pdFJhdGVRdWVzdGlvbk5vZGUuZGlzcG9zZSgpO1xyXG4gICAgICBxdWVzdGlvbnNQYXJlbnQuZ2V0Q2hpbGRyZW4oKS5mb3JFYWNoKCBjaGlsZCA9PiB7XHJcbiAgICAgICAgYXNzZXJ0ICYmIGFzc2VydCggY2hpbGQgaW5zdGFuY2VvZiBTaG9wcGluZ1F1ZXN0aW9uTm9kZSApO1xyXG4gICAgICAgIGNoaWxkLmRpc3Bvc2UoKTtcclxuICAgICAgfSApO1xyXG4gICAgICByZWZyZXNoQnV0dG9uLmRpc3Bvc2UoKTsgLy8gd29ya2Fyb3VuZCBmb3IgbWVtb3J5IGxlYWsgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3VuaXQtcmF0ZXMvaXNzdWVzLzIwN1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwdWJsaWNcclxuICAgKiBAb3ZlcnJpZGVcclxuICAgKi9cclxuICBkaXNwb3NlKCkge1xyXG4gICAgdGhpcy5kaXNwb3NlU2hvcHBpbmdRdWVzdGlvbnNBY2NvcmRpb25Cb3goKTtcclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcbn1cclxuXHJcbnVuaXRSYXRlcy5yZWdpc3RlciggJ1Nob3BwaW5nUXVlc3Rpb25zQWNjb3JkaW9uQm94JywgU2hvcHBpbmdRdWVzdGlvbnNBY2NvcmRpb25Cb3ggKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxLQUFLLE1BQU0sbUNBQW1DO0FBQ3JELE9BQU9DLGFBQWEsTUFBTSxzREFBc0Q7QUFDaEYsU0FBU0MsU0FBUyxFQUFFQyxJQUFJLEVBQUVDLElBQUksUUFBUSxtQ0FBbUM7QUFDekUsT0FBT0MsWUFBWSxNQUFNLG9DQUFvQztBQUM3RCxPQUFPQyxRQUFRLE1BQU0sMEJBQTBCO0FBQy9DLE9BQU9DLFdBQVcsTUFBTSw2QkFBNkI7QUFDckQsT0FBT0MsU0FBUyxNQUFNLG9CQUFvQjtBQUMxQyxPQUFPQyxnQkFBZ0IsTUFBTSwyQkFBMkI7QUFDeEQsT0FBT0Msb0JBQW9CLE1BQU0sMkJBQTJCO0FBRTVELGVBQWUsTUFBTUMsNkJBQTZCLFNBQVNOLFlBQVksQ0FBQztFQUV0RTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBQ0VPLFdBQVdBLENBQUVDLGFBQWEsRUFBRUMsV0FBVyxFQUFFQyxPQUFPLEVBQUc7SUFFakRBLE9BQU8sR0FBR2YsS0FBSyxDQUFFLENBQUMsQ0FBQyxFQUFFTyxXQUFXLENBQUNTLHFCQUFxQixFQUFFO01BRXREO01BQ0E7TUFDQUMsWUFBWSxFQUFFLENBQUM7TUFDZkMsY0FBYyxFQUFFLEVBQUU7TUFDbEJDLGNBQWMsRUFBRSxDQUFDO01BQ2pCQyxlQUFlLEVBQUUsQ0FBQztNQUNsQkMsU0FBUyxFQUFFLElBQUlsQixJQUFJLENBQUVNLGdCQUFnQixDQUFDYSx1QkFBdUIsRUFBRTtRQUM3REMsSUFBSSxFQUFFaEIsV0FBVyxDQUFDaUIsd0JBQXdCO1FBQzFDQyxRQUFRLEVBQUU7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