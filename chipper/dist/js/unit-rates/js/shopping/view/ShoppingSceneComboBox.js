// Copyright 2016-2023, University of Colorado Boulder

/**
 * Combo box for selecting a scene in the 'Shopping' screen.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import Dimension2 from '../../../../dot/js/Dimension2.js';
import merge from '../../../../phet-core/js/merge.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { HBox, HStrut, Image, Node, Rectangle, Text } from '../../../../scenery/js/imports.js';
import ComboBox from '../../../../sun/js/ComboBox.js';
import unitRates from '../../unitRates.js';
export default class ShoppingSceneComboBox extends ComboBox {
  /**
   * @param {Property.<ShoppingScene>} shoppingSceneProperty - the selected scene
   * @param {ShoppingScene[]} shoppingScenes
   * @param {Node} parentNode - the parent node of the combo box
   * @param {Object} [options]
   * @constructor
   */
  constructor(shoppingSceneProperty, shoppingScenes, parentNode, options) {
    assert && assert(shoppingScenes && shoppingScenes.length > 0, 'at least 1 ShoppingScene is required');
    options = merge({
      // ShoppingSceneComboBox options
      iconSize: new Dimension2(30, 30),
      // {Dimension2} size of the icons in the combo box

      // ComboBox options
      listPosition: 'above',
      cornerRadius: 5,
      xMargin: 10,
      yMargin: 10
    }, options);

    // {ComboBoxItem[]}
    const items = shoppingScenes.map(shoppingScene => createItem(shoppingScene, options.iconSize));
    super(shoppingSceneProperty, items, parentNode, options);
  }
}

/**
 * Creates an item for the combo box.
 *
 * @param {ShoppingScene} shoppingScene
 * @param {Dimension2} iconSize
 * @returns {ComboBoxItem}
 */
function createItem(shoppingScene, iconSize) {
  // Scale the image down if it's larger than iconSize
  const imageNode = new Image(shoppingScene.itemImage);
  if (imageNode.width > iconSize.width || imageNode.height > iconSize.height) {
    const scale = Math.min(iconSize.width / imageNode.width, iconSize.height / imageNode.height);
    imageNode.setScaleMagnitude(scale);
  }

  // Create uniform icon size by centering the image on a transparent rectangle
  const iconNode = new Node({
    children: [imageNode, new Rectangle(0, 0, iconSize.width, iconSize.height, {
      center: imageNode.center
    })]
  });

  // Use the plural name to label the item
  const labelNode = new Text(shoppingScene.pluralName, {
    font: new PhetFont(18),
    maxWidth: 140,
    children: [new HStrut(140)] // makes labels for all items the same width
  });

  return {
    value: shoppingScene,
    // icon to the left of label
    createNode: () => new HBox({
      align: 'center',
      spacing: 10,
      children: [iconNode, labelNode]
    })
  };
}
unitRates.register('ShoppingSceneComboBox', ShoppingSceneComboBox);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEaW1lbnNpb24yIiwibWVyZ2UiLCJQaGV0Rm9udCIsIkhCb3giLCJIU3RydXQiLCJJbWFnZSIsIk5vZGUiLCJSZWN0YW5nbGUiLCJUZXh0IiwiQ29tYm9Cb3giLCJ1bml0UmF0ZXMiLCJTaG9wcGluZ1NjZW5lQ29tYm9Cb3giLCJjb25zdHJ1Y3RvciIsInNob3BwaW5nU2NlbmVQcm9wZXJ0eSIsInNob3BwaW5nU2NlbmVzIiwicGFyZW50Tm9kZSIsIm9wdGlvbnMiLCJhc3NlcnQiLCJsZW5ndGgiLCJpY29uU2l6ZSIsImxpc3RQb3NpdGlvbiIsImNvcm5lclJhZGl1cyIsInhNYXJnaW4iLCJ5TWFyZ2luIiwiaXRlbXMiLCJtYXAiLCJzaG9wcGluZ1NjZW5lIiwiY3JlYXRlSXRlbSIsImltYWdlTm9kZSIsIml0ZW1JbWFnZSIsIndpZHRoIiwiaGVpZ2h0Iiwic2NhbGUiLCJNYXRoIiwibWluIiwic2V0U2NhbGVNYWduaXR1ZGUiLCJpY29uTm9kZSIsImNoaWxkcmVuIiwiY2VudGVyIiwibGFiZWxOb2RlIiwicGx1cmFsTmFtZSIsImZvbnQiLCJtYXhXaWR0aCIsInZhbHVlIiwiY3JlYXRlTm9kZSIsImFsaWduIiwic3BhY2luZyIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiU2hvcHBpbmdTY2VuZUNvbWJvQm94LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE2LTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIENvbWJvIGJveCBmb3Igc2VsZWN0aW5nIGEgc2NlbmUgaW4gdGhlICdTaG9wcGluZycgc2NyZWVuLlxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCBEaW1lbnNpb24yIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9EaW1lbnNpb24yLmpzJztcclxuaW1wb3J0IG1lcmdlIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9tZXJnZS5qcyc7XHJcbmltcG9ydCBQaGV0Rm9udCBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvUGhldEZvbnQuanMnO1xyXG5pbXBvcnQgeyBIQm94LCBIU3RydXQsIEltYWdlLCBOb2RlLCBSZWN0YW5nbGUsIFRleHQgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgQ29tYm9Cb3ggZnJvbSAnLi4vLi4vLi4vLi4vc3VuL2pzL0NvbWJvQm94LmpzJztcclxuaW1wb3J0IHVuaXRSYXRlcyBmcm9tICcuLi8uLi91bml0UmF0ZXMuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2hvcHBpbmdTY2VuZUNvbWJvQm94IGV4dGVuZHMgQ29tYm9Cb3gge1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge1Byb3BlcnR5LjxTaG9wcGluZ1NjZW5lPn0gc2hvcHBpbmdTY2VuZVByb3BlcnR5IC0gdGhlIHNlbGVjdGVkIHNjZW5lXHJcbiAgICogQHBhcmFtIHtTaG9wcGluZ1NjZW5lW119IHNob3BwaW5nU2NlbmVzXHJcbiAgICogQHBhcmFtIHtOb2RlfSBwYXJlbnROb2RlIC0gdGhlIHBhcmVudCBub2RlIG9mIHRoZSBjb21ibyBib3hcclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXHJcbiAgICogQGNvbnN0cnVjdG9yXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIHNob3BwaW5nU2NlbmVQcm9wZXJ0eSwgc2hvcHBpbmdTY2VuZXMsIHBhcmVudE5vZGUsIG9wdGlvbnMgKSB7XHJcblxyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggc2hvcHBpbmdTY2VuZXMgJiYgc2hvcHBpbmdTY2VuZXMubGVuZ3RoID4gMCwgJ2F0IGxlYXN0IDEgU2hvcHBpbmdTY2VuZSBpcyByZXF1aXJlZCcgKTtcclxuXHJcbiAgICBvcHRpb25zID0gbWVyZ2UoIHtcclxuXHJcbiAgICAgIC8vIFNob3BwaW5nU2NlbmVDb21ib0JveCBvcHRpb25zXHJcbiAgICAgIGljb25TaXplOiBuZXcgRGltZW5zaW9uMiggMzAsIDMwICksIC8vIHtEaW1lbnNpb24yfSBzaXplIG9mIHRoZSBpY29ucyBpbiB0aGUgY29tYm8gYm94XHJcblxyXG4gICAgICAvLyBDb21ib0JveCBvcHRpb25zXHJcbiAgICAgIGxpc3RQb3NpdGlvbjogJ2Fib3ZlJyxcclxuICAgICAgY29ybmVyUmFkaXVzOiA1LFxyXG4gICAgICB4TWFyZ2luOiAxMCxcclxuICAgICAgeU1hcmdpbjogMTBcclxuXHJcbiAgICB9LCBvcHRpb25zICk7XHJcblxyXG4gICAgLy8ge0NvbWJvQm94SXRlbVtdfVxyXG4gICAgY29uc3QgaXRlbXMgPSBzaG9wcGluZ1NjZW5lcy5tYXAoIHNob3BwaW5nU2NlbmUgPT4gY3JlYXRlSXRlbSggc2hvcHBpbmdTY2VuZSwgb3B0aW9ucy5pY29uU2l6ZSApICk7XHJcblxyXG4gICAgc3VwZXIoIHNob3BwaW5nU2NlbmVQcm9wZXJ0eSwgaXRlbXMsIHBhcmVudE5vZGUsIG9wdGlvbnMgKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGFuIGl0ZW0gZm9yIHRoZSBjb21ibyBib3guXHJcbiAqXHJcbiAqIEBwYXJhbSB7U2hvcHBpbmdTY2VuZX0gc2hvcHBpbmdTY2VuZVxyXG4gKiBAcGFyYW0ge0RpbWVuc2lvbjJ9IGljb25TaXplXHJcbiAqIEByZXR1cm5zIHtDb21ib0JveEl0ZW19XHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVJdGVtKCBzaG9wcGluZ1NjZW5lLCBpY29uU2l6ZSApIHtcclxuXHJcbiAgLy8gU2NhbGUgdGhlIGltYWdlIGRvd24gaWYgaXQncyBsYXJnZXIgdGhhbiBpY29uU2l6ZVxyXG4gIGNvbnN0IGltYWdlTm9kZSA9IG5ldyBJbWFnZSggc2hvcHBpbmdTY2VuZS5pdGVtSW1hZ2UgKTtcclxuICBpZiAoIGltYWdlTm9kZS53aWR0aCA+IGljb25TaXplLndpZHRoIHx8IGltYWdlTm9kZS5oZWlnaHQgPiBpY29uU2l6ZS5oZWlnaHQgKSB7XHJcbiAgICBjb25zdCBzY2FsZSA9IE1hdGgubWluKCBpY29uU2l6ZS53aWR0aCAvIGltYWdlTm9kZS53aWR0aCwgaWNvblNpemUuaGVpZ2h0IC8gaW1hZ2VOb2RlLmhlaWdodCApO1xyXG4gICAgaW1hZ2VOb2RlLnNldFNjYWxlTWFnbml0dWRlKCBzY2FsZSApO1xyXG4gIH1cclxuXHJcbiAgLy8gQ3JlYXRlIHVuaWZvcm0gaWNvbiBzaXplIGJ5IGNlbnRlcmluZyB0aGUgaW1hZ2Ugb24gYSB0cmFuc3BhcmVudCByZWN0YW5nbGVcclxuICBjb25zdCBpY29uTm9kZSA9IG5ldyBOb2RlKCB7XHJcbiAgICBjaGlsZHJlbjogW1xyXG4gICAgICBpbWFnZU5vZGUsXHJcbiAgICAgIG5ldyBSZWN0YW5nbGUoIDAsIDAsIGljb25TaXplLndpZHRoLCBpY29uU2l6ZS5oZWlnaHQsIHsgY2VudGVyOiBpbWFnZU5vZGUuY2VudGVyIH0gKVxyXG4gICAgXVxyXG4gIH0gKTtcclxuXHJcbiAgLy8gVXNlIHRoZSBwbHVyYWwgbmFtZSB0byBsYWJlbCB0aGUgaXRlbVxyXG4gIGNvbnN0IGxhYmVsTm9kZSA9IG5ldyBUZXh0KCBzaG9wcGluZ1NjZW5lLnBsdXJhbE5hbWUsIHtcclxuICAgIGZvbnQ6IG5ldyBQaGV0Rm9udCggMTggKSxcclxuICAgIG1heFdpZHRoOiAxNDAsXHJcbiAgICBjaGlsZHJlbjogWyBuZXcgSFN0cnV0KCAxNDAgKSBdIC8vIG1ha2VzIGxhYmVscyBmb3IgYWxsIGl0ZW1zIHRoZSBzYW1lIHdpZHRoXHJcbiAgfSApO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgdmFsdWU6IHNob3BwaW5nU2NlbmUsXHJcblxyXG4gICAgLy8gaWNvbiB0byB0aGUgbGVmdCBvZiBsYWJlbFxyXG4gICAgY3JlYXRlTm9kZTogKCkgPT4gbmV3IEhCb3goIHtcclxuICAgICAgYWxpZ246ICdjZW50ZXInLFxyXG4gICAgICBzcGFjaW5nOiAxMCxcclxuICAgICAgY2hpbGRyZW46IFsgaWNvbk5vZGUsIGxhYmVsTm9kZSBdXHJcbiAgICB9IClcclxuICB9O1xyXG59XHJcblxyXG51bml0UmF0ZXMucmVnaXN0ZXIoICdTaG9wcGluZ1NjZW5lQ29tYm9Cb3gnLCBTaG9wcGluZ1NjZW5lQ29tYm9Cb3ggKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsVUFBVSxNQUFNLGtDQUFrQztBQUN6RCxPQUFPQyxLQUFLLE1BQU0sbUNBQW1DO0FBQ3JELE9BQU9DLFFBQVEsTUFBTSx5Q0FBeUM7QUFDOUQsU0FBU0MsSUFBSSxFQUFFQyxNQUFNLEVBQUVDLEtBQUssRUFBRUMsSUFBSSxFQUFFQyxTQUFTLEVBQUVDLElBQUksUUFBUSxtQ0FBbUM7QUFDOUYsT0FBT0MsUUFBUSxNQUFNLGdDQUFnQztBQUNyRCxPQUFPQyxTQUFTLE1BQU0sb0JBQW9CO0FBRTFDLGVBQWUsTUFBTUMscUJBQXFCLFNBQVNGLFFBQVEsQ0FBQztFQUUxRDtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFRyxXQUFXQSxDQUFFQyxxQkFBcUIsRUFBRUMsY0FBYyxFQUFFQyxVQUFVLEVBQUVDLE9BQU8sRUFBRztJQUV4RUMsTUFBTSxJQUFJQSxNQUFNLENBQUVILGNBQWMsSUFBSUEsY0FBYyxDQUFDSSxNQUFNLEdBQUcsQ0FBQyxFQUFFLHNDQUF1QyxDQUFDO0lBRXZHRixPQUFPLEdBQUdmLEtBQUssQ0FBRTtNQUVmO01BQ0FrQixRQUFRLEVBQUUsSUFBSW5CLFVBQVUsQ0FBRSxFQUFFLEVBQUUsRUFBRyxDQUFDO01BQUU7O01BRXBDO01BQ0FvQixZQUFZLEVBQUUsT0FBTztNQUNyQkMsWUFBWSxFQUFFLENBQUM7TUFDZkMsT0FBTyxFQUFFLEVBQUU7TUFDWEMsT0FBTyxFQUFFO0lBRVgsQ0FBQyxFQUFFUCxPQUFRLENBQUM7O0lBRVo7SUFDQSxNQUFNUSxLQUFLLEdBQUdWLGNBQWMsQ0FBQ1csR0FBRyxDQUFFQyxhQUFhLElBQUlDLFVBQVUsQ0FBRUQsYUFBYSxFQUFFVixPQUFPLENBQUNHLFFBQVMsQ0FBRSxDQUFDO0lBRWxHLEtBQUssQ0FBRU4scUJBQXFCLEVBQUVXLEtBQUssRUFBRVQsVUFBVSxFQUFFQyxPQUFRLENBQUM7RUFDNUQ7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVNXLFVBQVVBLENBQUVELGFBQWEsRUFBRVAsUUFBUSxFQUFHO0VBRTdDO0VBQ0EsTUFBTVMsU0FBUyxHQUFHLElBQUl2QixLQUFLLENBQUVxQixhQUFhLENBQUNHLFNBQVUsQ0FBQztFQUN0RCxJQUFLRCxTQUFTLENBQUNFLEtBQUssR0FBR1gsUUFBUSxDQUFDVyxLQUFLLElBQUlGLFNBQVMsQ0FBQ0csTUFBTSxHQUFHWixRQUFRLENBQUNZLE1BQU0sRUFBRztJQUM1RSxNQUFNQyxLQUFLLEdBQUdDLElBQUksQ0FBQ0MsR0FBRyxDQUFFZixRQUFRLENBQUNXLEtBQUssR0FBR0YsU0FBUyxDQUFDRSxLQUFLLEVBQUVYLFFBQVEsQ0FBQ1ksTUFBTSxHQUFHSCxTQUFTLENBQUNHLE1BQU8sQ0FBQztJQUM5RkgsU0FBUyxDQUFDTyxpQkFBaUIsQ0FBRUgsS0FBTSxDQUFDO0VBQ3RDOztFQUVBO0VBQ0EsTUFBTUksUUFBUSxHQUFHLElBQUk5QixJQUFJLENBQUU7SUFDekIrQixRQUFRLEVBQUUsQ0FDUlQsU0FBUyxFQUNULElBQUlyQixTQUFTLENBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRVksUUFBUSxDQUFDVyxLQUFLLEVBQUVYLFFBQVEsQ0FBQ1ksTUFBTSxFQUFFO01BQUVPLE1BQU0sRUFBRVYsU0FBUyxDQUFDVTtJQUFPLENBQUUsQ0FBQztFQUV4RixDQUFFLENBQUM7O0VBRUg7RUFDQSxNQUFNQyxTQUFTLEdBQUcsSUFBSS9CLElBQUksQ0FBRWtCLGFBQWEsQ0FBQ2MsVUFBVSxFQUFFO0lBQ3BEQyxJQUFJLEVBQUUsSUFBSXZDLFFBQVEsQ0FBRSxFQUFHLENBQUM7SUFDeEJ3QyxRQUFRLEVBQUUsR0FBRztJQUNiTCxRQUFRLEVBQUUsQ0FBRSxJQUFJakMsTUFBTSxDQUFFLEdBQUksQ0FBQyxDQUFFLENBQUM7RUFDbEMsQ0FBRSxDQUFDOztFQUVILE9BQU87SUFDTHVDLEtBQUssRUFBRWpCLGFBQWE7SUFFcEI7SUFDQWtCLFVBQVUsRUFBRUEsQ0FBQSxLQUFNLElBQUl6QyxJQUFJLENBQUU7TUFDMUIwQyxLQUFLLEVBQUUsUUFBUTtNQUNmQyxPQUFPLEVBQUUsRUFBRTtNQUNYVCxRQUFRLEVBQUUsQ0FBRUQsUUFBUSxFQUFFRyxTQUFTO0lBQ2pDLENBQUU7RUFDSixDQUFDO0FBQ0g7QUFFQTdCLFNBQVMsQ0FBQ3FDLFFBQVEsQ0FBRSx1QkFBdUIsRUFBRXBDLHFCQUFzQixDQUFDIn0=