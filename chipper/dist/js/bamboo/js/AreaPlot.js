// Copyright 2023, University of Colorado Boulder

/**
 * AreaPlot is a plot that combines a line plot and a bar plot. An area plot is distinguished from a line plot by
 * the addition of shading between lines and a baseline, like in a bar plot.
 *
 * Null values are skipped and allow you to create separate shaded regions.
 *
 * @author Martin Veillette
 */

import { Shape } from '../../kite/js/imports.js';
import optionize from '../../phet-core/js/optionize.js';
import { Path } from '../../scenery/js/imports.js';
import bamboo from './bamboo.js';
export default class AreaPlot extends Path {
  // if you change this directly, you are responsible for calling update

  // a y-value that serves as foundation for the area plot.

  constructor(chartTransform, dataSet, providedOptions) {
    const options = optionize()({
      // SelfOptions
      baseline: 0,
      // PathOptions
      fill: 'black'
    }, providedOptions);
    super(null, options);
    this.chartTransform = chartTransform;
    this.dataSet = dataSet;
    this.baseline = options.baseline;

    // Initialize
    this.update();

    // Update when the transform changes.
    const changedListener = () => this.update();
    chartTransform.changedEmitter.addListener(changedListener);
    this.disposeAreaChart = () => chartTransform.changedEmitter.removeListener(changedListener);
  }
  dispose() {
    this.disposeAreaChart();
    super.dispose();
  }

  // Recomputes the rendered shape.
  update() {
    const shape = new Shape();
    let moveToNextPoint = true;

    // previous dataPoint
    let oldDataPoint = null;
    for (let i = 0; i < this.dataSet.length; i++) {
      const dataPoint = this.dataSet[i];
      assert && assert(dataPoint === null || dataPoint.isFinite(), 'data points must be finite Vector2 or null');
      if (dataPoint) {
        const viewPoint = this.chartTransform.modelToViewPosition(dataPoint);
        if (moveToNextPoint) {
          // basePoint for the shape
          const startBasePoint = this.chartTransform.modelToViewXY(dataPoint.x, this.baseline);
          shape.moveToPoint(startBasePoint);

          // move to the actual data point
          shape.lineToPoint(viewPoint);
          moveToNextPoint = false;
        } else {
          shape.lineToPoint(viewPoint);
        }

        // keep a record of the last datapoint
        oldDataPoint = dataPoint;
      } else {
        // if oldDataPoint exists, it must be the first null value of dataPoint,
        if (oldDataPoint) {
          // go straight down to baseline using the last valid value and close the shape.
          this.closeShape(oldDataPoint, shape);
        }

        // set oldDataPoint to null
        oldDataPoint = null;
        moveToNextPoint = true;
      }
    }

    // close the shape associated with the last point (if non-null)
    if (oldDataPoint) {
      this.closeShape(oldDataPoint, shape);
    }
    this.shape = shape.makeImmutable();
  }

  /**
   * Given a point and a shape, first go to the baseline of the point and then close the shape.
   */
  closeShape(dataPoint, shape) {
    const endBasePoint = this.chartTransform.modelToViewXY(dataPoint.x, this.baseline);
    shape.lineToPoint(endBasePoint);
    shape.close();
  }

  /**
   * Sets the dataSet and redraws the plot. If instead the dataSet array is mutated, it is the client's responsibility
   * to call `update` or make sure `update` is called elsewhere (say, if the chart scrolls in that frame).
   */
  setDataSet(dataSet) {
    this.dataSet = dataSet;
    this.update();
  }

  /**
   * Sets the baseline value for the area plot.
   */
  setBaseline(baseline) {
    this.baseline = baseline;
    this.update();
  }
}
bamboo.register('AreaPlot', AreaPlot);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTaGFwZSIsIm9wdGlvbml6ZSIsIlBhdGgiLCJiYW1ib28iLCJBcmVhUGxvdCIsImNvbnN0cnVjdG9yIiwiY2hhcnRUcmFuc2Zvcm0iLCJkYXRhU2V0IiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsImJhc2VsaW5lIiwiZmlsbCIsInVwZGF0ZSIsImNoYW5nZWRMaXN0ZW5lciIsImNoYW5nZWRFbWl0dGVyIiwiYWRkTGlzdGVuZXIiLCJkaXNwb3NlQXJlYUNoYXJ0IiwicmVtb3ZlTGlzdGVuZXIiLCJkaXNwb3NlIiwic2hhcGUiLCJtb3ZlVG9OZXh0UG9pbnQiLCJvbGREYXRhUG9pbnQiLCJpIiwibGVuZ3RoIiwiZGF0YVBvaW50IiwiYXNzZXJ0IiwiaXNGaW5pdGUiLCJ2aWV3UG9pbnQiLCJtb2RlbFRvVmlld1Bvc2l0aW9uIiwic3RhcnRCYXNlUG9pbnQiLCJtb2RlbFRvVmlld1hZIiwieCIsIm1vdmVUb1BvaW50IiwibGluZVRvUG9pbnQiLCJjbG9zZVNoYXBlIiwibWFrZUltbXV0YWJsZSIsImVuZEJhc2VQb2ludCIsImNsb3NlIiwic2V0RGF0YVNldCIsInNldEJhc2VsaW5lIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJBcmVhUGxvdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogQXJlYVBsb3QgaXMgYSBwbG90IHRoYXQgY29tYmluZXMgYSBsaW5lIHBsb3QgYW5kIGEgYmFyIHBsb3QuIEFuIGFyZWEgcGxvdCBpcyBkaXN0aW5ndWlzaGVkIGZyb20gYSBsaW5lIHBsb3QgYnlcclxuICogdGhlIGFkZGl0aW9uIG9mIHNoYWRpbmcgYmV0d2VlbiBsaW5lcyBhbmQgYSBiYXNlbGluZSwgbGlrZSBpbiBhIGJhciBwbG90LlxyXG4gKlxyXG4gKiBOdWxsIHZhbHVlcyBhcmUgc2tpcHBlZCBhbmQgYWxsb3cgeW91IHRvIGNyZWF0ZSBzZXBhcmF0ZSBzaGFkZWQgcmVnaW9ucy5cclxuICpcclxuICogQGF1dGhvciBNYXJ0aW4gVmVpbGxldHRlXHJcbiAqL1xyXG5cclxuaW1wb3J0IENoYXJ0VHJhbnNmb3JtIGZyb20gJy4vQ2hhcnRUcmFuc2Zvcm0uanMnO1xyXG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuLi8uLi9kb3QvanMvVmVjdG9yMi5qcyc7XHJcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSAnLi4vLi4va2l0ZS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IG9wdGlvbml6ZSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuaW1wb3J0IHsgUGF0aCwgUGF0aE9wdGlvbnMgfSBmcm9tICcuLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgYmFtYm9vIGZyb20gJy4vYmFtYm9vLmpzJztcclxuXHJcbmV4cG9ydCB0eXBlIEFyZWFDaGFydERhdGFTZXQgPSAoIFZlY3RvcjIgfCBudWxsIClbXTtcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSB7XHJcbiAgYmFzZWxpbmU/OiBudW1iZXI7IC8vIHktdmFsdWUgcmVwcmVzZW50aW5nIHRoZSBmb3VuZGF0aW9uIG9mIHRoZSBwbG90XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBBcmVhQ2hhcnRPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBQYXRoT3B0aW9ucztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFyZWFQbG90IGV4dGVuZHMgUGF0aCB7XHJcblxyXG4gIC8vIGlmIHlvdSBjaGFuZ2UgdGhpcyBkaXJlY3RseSwgeW91IGFyZSByZXNwb25zaWJsZSBmb3IgY2FsbGluZyB1cGRhdGVcclxuICBwdWJsaWMgZGF0YVNldDogQXJlYUNoYXJ0RGF0YVNldDtcclxuXHJcbiAgLy8gYSB5LXZhbHVlIHRoYXQgc2VydmVzIGFzIGZvdW5kYXRpb24gZm9yIHRoZSBhcmVhIHBsb3QuXHJcbiAgcHVibGljIGJhc2VsaW5lOiBudW1iZXI7XHJcblxyXG4gIHByaXZhdGUgY2hhcnRUcmFuc2Zvcm06IENoYXJ0VHJhbnNmb3JtO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgZGlzcG9zZUFyZWFDaGFydDogKCkgPT4gdm9pZDtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBjaGFydFRyYW5zZm9ybTogQ2hhcnRUcmFuc2Zvcm0sXHJcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhU2V0OiBBcmVhQ2hhcnREYXRhU2V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZWRPcHRpb25zPzogQXJlYUNoYXJ0T3B0aW9ucyApIHtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPEFyZWFDaGFydE9wdGlvbnMsIFNlbGZPcHRpb25zLCBQYXRoT3B0aW9ucz4oKSgge1xyXG5cclxuICAgICAgLy8gU2VsZk9wdGlvbnNcclxuICAgICAgYmFzZWxpbmU6IDAsXHJcblxyXG4gICAgICAvLyBQYXRoT3B0aW9uc1xyXG4gICAgICBmaWxsOiAnYmxhY2snXHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICBzdXBlciggbnVsbCwgb3B0aW9ucyApO1xyXG5cclxuICAgIHRoaXMuY2hhcnRUcmFuc2Zvcm0gPSBjaGFydFRyYW5zZm9ybTtcclxuICAgIHRoaXMuZGF0YVNldCA9IGRhdGFTZXQ7XHJcbiAgICB0aGlzLmJhc2VsaW5lID0gb3B0aW9ucy5iYXNlbGluZTtcclxuXHJcbiAgICAvLyBJbml0aWFsaXplXHJcbiAgICB0aGlzLnVwZGF0ZSgpO1xyXG5cclxuICAgIC8vIFVwZGF0ZSB3aGVuIHRoZSB0cmFuc2Zvcm0gY2hhbmdlcy5cclxuICAgIGNvbnN0IGNoYW5nZWRMaXN0ZW5lciA9ICgpID0+IHRoaXMudXBkYXRlKCk7XHJcbiAgICBjaGFydFRyYW5zZm9ybS5jaGFuZ2VkRW1pdHRlci5hZGRMaXN0ZW5lciggY2hhbmdlZExpc3RlbmVyICk7XHJcblxyXG4gICAgdGhpcy5kaXNwb3NlQXJlYUNoYXJ0ID0gKCkgPT4gY2hhcnRUcmFuc2Zvcm0uY2hhbmdlZEVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIoIGNoYW5nZWRMaXN0ZW5lciApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG92ZXJyaWRlIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICB0aGlzLmRpc3Bvc2VBcmVhQ2hhcnQoKTtcclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcblxyXG4gIC8vIFJlY29tcHV0ZXMgdGhlIHJlbmRlcmVkIHNoYXBlLlxyXG4gIHB1YmxpYyB1cGRhdGUoKTogdm9pZCB7XHJcbiAgICBjb25zdCBzaGFwZSA9IG5ldyBTaGFwZSgpO1xyXG4gICAgbGV0IG1vdmVUb05leHRQb2ludCA9IHRydWU7XHJcblxyXG4gICAgLy8gcHJldmlvdXMgZGF0YVBvaW50XHJcbiAgICBsZXQgb2xkRGF0YVBvaW50OiBWZWN0b3IyIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgdGhpcy5kYXRhU2V0Lmxlbmd0aDsgaSsrICkge1xyXG5cclxuICAgICAgY29uc3QgZGF0YVBvaW50ID0gdGhpcy5kYXRhU2V0WyBpIF07XHJcbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoIGRhdGFQb2ludCA9PT0gbnVsbCB8fCBkYXRhUG9pbnQuaXNGaW5pdGUoKSwgJ2RhdGEgcG9pbnRzIG11c3QgYmUgZmluaXRlIFZlY3RvcjIgb3IgbnVsbCcgKTtcclxuXHJcbiAgICAgIGlmICggZGF0YVBvaW50ICkge1xyXG4gICAgICAgIGNvbnN0IHZpZXdQb2ludCA9IHRoaXMuY2hhcnRUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdQb3NpdGlvbiggZGF0YVBvaW50ICk7XHJcblxyXG4gICAgICAgIGlmICggbW92ZVRvTmV4dFBvaW50ICkge1xyXG5cclxuICAgICAgICAgIC8vIGJhc2VQb2ludCBmb3IgdGhlIHNoYXBlXHJcbiAgICAgICAgICBjb25zdCBzdGFydEJhc2VQb2ludCA9IHRoaXMuY2hhcnRUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdYWSggZGF0YVBvaW50LngsIHRoaXMuYmFzZWxpbmUgKTtcclxuICAgICAgICAgIHNoYXBlLm1vdmVUb1BvaW50KCBzdGFydEJhc2VQb2ludCApO1xyXG5cclxuICAgICAgICAgIC8vIG1vdmUgdG8gdGhlIGFjdHVhbCBkYXRhIHBvaW50XHJcbiAgICAgICAgICBzaGFwZS5saW5lVG9Qb2ludCggdmlld1BvaW50ICk7XHJcbiAgICAgICAgICBtb3ZlVG9OZXh0UG9pbnQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcblxyXG4gICAgICAgICAgc2hhcGUubGluZVRvUG9pbnQoIHZpZXdQb2ludCApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8ga2VlcCBhIHJlY29yZCBvZiB0aGUgbGFzdCBkYXRhcG9pbnRcclxuICAgICAgICBvbGREYXRhUG9pbnQgPSBkYXRhUG9pbnQ7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcblxyXG4gICAgICAgIC8vIGlmIG9sZERhdGFQb2ludCBleGlzdHMsIGl0IG11c3QgYmUgdGhlIGZpcnN0IG51bGwgdmFsdWUgb2YgZGF0YVBvaW50LFxyXG4gICAgICAgIGlmICggb2xkRGF0YVBvaW50ICkge1xyXG5cclxuICAgICAgICAgIC8vIGdvIHN0cmFpZ2h0IGRvd24gdG8gYmFzZWxpbmUgdXNpbmcgdGhlIGxhc3QgdmFsaWQgdmFsdWUgYW5kIGNsb3NlIHRoZSBzaGFwZS5cclxuICAgICAgICAgIHRoaXMuY2xvc2VTaGFwZSggb2xkRGF0YVBvaW50LCBzaGFwZSApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gc2V0IG9sZERhdGFQb2ludCB0byBudWxsXHJcbiAgICAgICAgb2xkRGF0YVBvaW50ID0gbnVsbDtcclxuXHJcbiAgICAgICAgbW92ZVRvTmV4dFBvaW50ID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGNsb3NlIHRoZSBzaGFwZSBhc3NvY2lhdGVkIHdpdGggdGhlIGxhc3QgcG9pbnQgKGlmIG5vbi1udWxsKVxyXG4gICAgaWYgKCBvbGREYXRhUG9pbnQgKSB7XHJcbiAgICAgIHRoaXMuY2xvc2VTaGFwZSggb2xkRGF0YVBvaW50LCBzaGFwZSApO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2hhcGUgPSBzaGFwZS5tYWtlSW1tdXRhYmxlKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHaXZlbiBhIHBvaW50IGFuZCBhIHNoYXBlLCBmaXJzdCBnbyB0byB0aGUgYmFzZWxpbmUgb2YgdGhlIHBvaW50IGFuZCB0aGVuIGNsb3NlIHRoZSBzaGFwZS5cclxuICAgKi9cclxuICBwcml2YXRlIGNsb3NlU2hhcGUoIGRhdGFQb2ludDogVmVjdG9yMiwgc2hhcGU6IFNoYXBlICk6IHZvaWQge1xyXG4gICAgY29uc3QgZW5kQmFzZVBvaW50ID0gdGhpcy5jaGFydFRyYW5zZm9ybS5tb2RlbFRvVmlld1hZKCBkYXRhUG9pbnQueCwgdGhpcy5iYXNlbGluZSApO1xyXG4gICAgc2hhcGUubGluZVRvUG9pbnQoIGVuZEJhc2VQb2ludCApO1xyXG4gICAgc2hhcGUuY2xvc2UoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIGRhdGFTZXQgYW5kIHJlZHJhd3MgdGhlIHBsb3QuIElmIGluc3RlYWQgdGhlIGRhdGFTZXQgYXJyYXkgaXMgbXV0YXRlZCwgaXQgaXMgdGhlIGNsaWVudCdzIHJlc3BvbnNpYmlsaXR5XHJcbiAgICogdG8gY2FsbCBgdXBkYXRlYCBvciBtYWtlIHN1cmUgYHVwZGF0ZWAgaXMgY2FsbGVkIGVsc2V3aGVyZSAoc2F5LCBpZiB0aGUgY2hhcnQgc2Nyb2xscyBpbiB0aGF0IGZyYW1lKS5cclxuICAgKi9cclxuICBwdWJsaWMgc2V0RGF0YVNldCggZGF0YVNldDogQXJlYUNoYXJ0RGF0YVNldCApOiB2b2lkIHtcclxuICAgIHRoaXMuZGF0YVNldCA9IGRhdGFTZXQ7XHJcbiAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0cyB0aGUgYmFzZWxpbmUgdmFsdWUgZm9yIHRoZSBhcmVhIHBsb3QuXHJcbiAgICovXHJcbiAgcHVibGljIHNldEJhc2VsaW5lKCBiYXNlbGluZTogbnVtYmVyICk6IHZvaWQge1xyXG4gICAgdGhpcy5iYXNlbGluZSA9IGJhc2VsaW5lO1xyXG4gICAgdGhpcy51cGRhdGUoKTtcclxuICB9XHJcbn1cclxuXHJcbmJhbWJvby5yZWdpc3RlciggJ0FyZWFQbG90JywgQXJlYVBsb3QgKTtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUlBLFNBQVNBLEtBQUssUUFBUSwwQkFBMEI7QUFDaEQsT0FBT0MsU0FBUyxNQUFNLGlDQUFpQztBQUN2RCxTQUFTQyxJQUFJLFFBQXFCLDZCQUE2QjtBQUMvRCxPQUFPQyxNQUFNLE1BQU0sYUFBYTtBQVVoQyxlQUFlLE1BQU1DLFFBQVEsU0FBU0YsSUFBSSxDQUFDO0VBRXpDOztFQUdBOztFQU1PRyxXQUFXQSxDQUFFQyxjQUE4QixFQUM5QkMsT0FBeUIsRUFDekJDLGVBQWtDLEVBQUc7SUFFdkQsTUFBTUMsT0FBTyxHQUFHUixTQUFTLENBQTZDLENBQUMsQ0FBRTtNQUV2RTtNQUNBUyxRQUFRLEVBQUUsQ0FBQztNQUVYO01BQ0FDLElBQUksRUFBRTtJQUNSLENBQUMsRUFBRUgsZUFBZ0IsQ0FBQztJQUVwQixLQUFLLENBQUUsSUFBSSxFQUFFQyxPQUFRLENBQUM7SUFFdEIsSUFBSSxDQUFDSCxjQUFjLEdBQUdBLGNBQWM7SUFDcEMsSUFBSSxDQUFDQyxPQUFPLEdBQUdBLE9BQU87SUFDdEIsSUFBSSxDQUFDRyxRQUFRLEdBQUdELE9BQU8sQ0FBQ0MsUUFBUTs7SUFFaEM7SUFDQSxJQUFJLENBQUNFLE1BQU0sQ0FBQyxDQUFDOztJQUViO0lBQ0EsTUFBTUMsZUFBZSxHQUFHQSxDQUFBLEtBQU0sSUFBSSxDQUFDRCxNQUFNLENBQUMsQ0FBQztJQUMzQ04sY0FBYyxDQUFDUSxj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