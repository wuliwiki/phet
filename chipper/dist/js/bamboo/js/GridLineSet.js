// Copyright 2020-2023, University of Colorado Boulder

/**
 * Draws a set of lines within a graph.  For example, the minor horizontal lines.  Back-computes the model
 * locations given the view area.
 *
 * See also CanvasGridLineSet for one that renders to canvas. Note, these 2 files should be maintained together,
 * to keep as similar an API as possible.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */

import { Shape } from '../../kite/js/imports.js';
import Orientation from '../../phet-core/js/Orientation.js';
import { Path } from '../../scenery/js/imports.js';
import bamboo from './bamboo.js';
import optionize from '../../phet-core/js/optionize.js';
class GridLineSet extends Path {
  /**
   * @param chartTransform
   * @param axisOrientation - axis along which successive grid lines appear.  For example,
   *                                      - grid lines that are drawn horizontally progress up the Orientation.VERTICAL axis
   * @param spacing - in model coordinates
   * @param [providedOptions]
   */
  constructor(chartTransform, axisOrientation, spacing, providedOptions) {
    const options = optionize()({
      // SelfOptions
      origin: 0,
      clippingType: 'strict',
      // Path options
      stroke: 'black'
    }, providedOptions);
    super(null, options);
    this.chartTransform = chartTransform;
    this.axisOrientation = axisOrientation;
    this.spacing = spacing;
    this.origin = options.origin;
    this.clippingType = options.clippingType;

    // Initialize
    this.update();

    // Update when the transform changes.
    const changedListener = () => this.update();
    chartTransform.changedEmitter.addListener(changedListener);
    this.disposeGridLineSet = () => chartTransform.changedEmitter.removeListener(changedListener);
  }
  update() {
    const shape = new Shape();
    this.chartTransform.forEachSpacing(this.axisOrientation, this.spacing, this.origin, this.clippingType, (modelPosition, viewPosition) => {
      if (this.axisOrientation === Orientation.VERTICAL) {
        shape.moveTo(0, viewPosition);
        shape.lineTo(this.chartTransform.viewWidth, viewPosition);
      } else {
        shape.moveTo(viewPosition, 0);
        shape.lineTo(viewPosition, this.chartTransform.viewHeight);
      }
    });
    this.shape = shape.makeImmutable();
  }
  setSpacing(spacing) {
    if (this.spacing !== spacing) {
      this.spacing = spacing;
      this.update();
    }
  }
  dispose() {
    this.disposeGridLineSet();
    super.dispose();
  }
}
bamboo.register('GridLineSet', GridLineSet);
export default GridLineSet;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTaGFwZSIsIk9yaWVudGF0aW9uIiwiUGF0aCIsImJhbWJvbyIsIm9wdGlvbml6ZSIsIkdyaWRMaW5lU2V0IiwiY29uc3RydWN0b3IiLCJjaGFydFRyYW5zZm9ybSIsImF4aXNPcmllbnRhdGlvbiIsInNwYWNpbmciLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwib3JpZ2luIiwiY2xpcHBpbmdUeXBlIiwic3Ryb2tlIiwidXBkYXRlIiwiY2hhbmdlZExpc3RlbmVyIiwiY2hhbmdlZEVtaXR0ZXIiLCJhZGRMaXN0ZW5lciIsImRpc3Bvc2VHcmlkTGluZVNldCIsInJlbW92ZUxpc3RlbmVyIiwic2hhcGUiLCJmb3JFYWNoU3BhY2luZyIsIm1vZGVsUG9zaXRpb24iLCJ2aWV3UG9zaXRpb24iLCJWRVJUSUNBTCIsIm1vdmVUbyIsImxpbmVUbyIsInZpZXdXaWR0aCIsInZpZXdIZWlnaHQiLCJtYWtlSW1tdXRhYmxlIiwic2V0U3BhY2luZyIsImRpc3Bvc2UiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkdyaWRMaW5lU2V0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIwLTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIERyYXdzIGEgc2V0IG9mIGxpbmVzIHdpdGhpbiBhIGdyYXBoLiAgRm9yIGV4YW1wbGUsIHRoZSBtaW5vciBob3Jpem9udGFsIGxpbmVzLiAgQmFjay1jb21wdXRlcyB0aGUgbW9kZWxcclxuICogbG9jYXRpb25zIGdpdmVuIHRoZSB2aWV3IGFyZWEuXHJcbiAqXHJcbiAqIFNlZSBhbHNvIENhbnZhc0dyaWRMaW5lU2V0IGZvciBvbmUgdGhhdCByZW5kZXJzIHRvIGNhbnZhcy4gTm90ZSwgdGhlc2UgMiBmaWxlcyBzaG91bGQgYmUgbWFpbnRhaW5lZCB0b2dldGhlcixcclxuICogdG8ga2VlcCBhcyBzaW1pbGFyIGFuIEFQSSBhcyBwb3NzaWJsZS5cclxuICpcclxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICovXHJcblxyXG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gJy4uLy4uL2tpdGUvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBPcmllbnRhdGlvbiBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvT3JpZW50YXRpb24uanMnO1xyXG5pbXBvcnQgeyBQYXRoLCBQYXRoT3B0aW9ucyB9IGZyb20gJy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBiYW1ib28gZnJvbSAnLi9iYW1ib28uanMnO1xyXG5pbXBvcnQgQ2xpcHBpbmdUeXBlIGZyb20gJy4vQ2xpcHBpbmdUeXBlLmpzJztcclxuaW1wb3J0IENoYXJ0VHJhbnNmb3JtIGZyb20gJy4vQ2hhcnRUcmFuc2Zvcm0uanMnO1xyXG5pbXBvcnQgb3B0aW9uaXplIGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IHtcclxuICBvcmlnaW4/OiBudW1iZXI7XHJcbiAgY2xpcHBpbmdUeXBlPzogQ2xpcHBpbmdUeXBlO1xyXG59O1xyXG5leHBvcnQgdHlwZSBHcmlkTGluZVNldE9wdGlvbnMgPSBTZWxmT3B0aW9ucyAmIFBhdGhPcHRpb25zO1xyXG5cclxuY2xhc3MgR3JpZExpbmVTZXQgZXh0ZW5kcyBQYXRoIHtcclxuXHJcbiAgcHJpdmF0ZSByZWFkb25seSBjaGFydFRyYW5zZm9ybTogQ2hhcnRUcmFuc2Zvcm07XHJcbiAgcHJpdmF0ZSByZWFkb25seSBheGlzT3JpZW50YXRpb246IE9yaWVudGF0aW9uO1xyXG4gIHByaXZhdGUgc3BhY2luZzogbnVtYmVyO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgb3JpZ2luOiBudW1iZXI7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBjbGlwcGluZ1R5cGU6IENsaXBwaW5nVHlwZTtcclxuICBwcml2YXRlIHJlYWRvbmx5IGRpc3Bvc2VHcmlkTGluZVNldDogKCkgPT4gdm9pZDtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIGNoYXJ0VHJhbnNmb3JtXHJcbiAgICogQHBhcmFtIGF4aXNPcmllbnRhdGlvbiAtIGF4aXMgYWxvbmcgd2hpY2ggc3VjY2Vzc2l2ZSBncmlkIGxpbmVzIGFwcGVhci4gIEZvciBleGFtcGxlLFxyXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtIGdyaWQgbGluZXMgdGhhdCBhcmUgZHJhd24gaG9yaXpvbnRhbGx5IHByb2dyZXNzIHVwIHRoZSBPcmllbnRhdGlvbi5WRVJUSUNBTCBheGlzXHJcbiAgICogQHBhcmFtIHNwYWNpbmcgLSBpbiBtb2RlbCBjb29yZGluYXRlc1xyXG4gICAqIEBwYXJhbSBbcHJvdmlkZWRPcHRpb25zXVxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggY2hhcnRUcmFuc2Zvcm06IENoYXJ0VHJhbnNmb3JtLCBheGlzT3JpZW50YXRpb246IE9yaWVudGF0aW9uLCBzcGFjaW5nOiBudW1iZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlZE9wdGlvbnM/OiBHcmlkTGluZVNldE9wdGlvbnMgKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxHcmlkTGluZVNldE9wdGlvbnMsIFNlbGZPcHRpb25zLCBQYXRoT3B0aW9ucz4oKSgge1xyXG5cclxuICAgICAgLy8gU2VsZk9wdGlvbnNcclxuICAgICAgb3JpZ2luOiAwLFxyXG4gICAgICBjbGlwcGluZ1R5cGU6ICdzdHJpY3QnLFxyXG5cclxuICAgICAgLy8gUGF0aCBvcHRpb25zXHJcbiAgICAgIHN0cm9rZTogJ2JsYWNrJ1xyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgc3VwZXIoIG51bGwsIG9wdGlvbnMgKTtcclxuXHJcbiAgICB0aGlzLmNoYXJ0VHJhbnNmb3JtID0gY2hhcnRUcmFuc2Zvcm07XHJcbiAgICB0aGlzLmF4aXNPcmllbnRhdGlvbiA9IGF4aXNPcmllbnRhdGlvbjtcclxuICAgIHRoaXMuc3BhY2luZyA9IHNwYWNpbmc7XHJcbiAgICB0aGlzLm9yaWdpbiA9IG9wdGlvbnMub3JpZ2luO1xyXG4gICAgdGhpcy5jbGlwcGluZ1R5cGUgPSBvcHRpb25zLmNsaXBwaW5nVHlwZTtcclxuXHJcbiAgICAvLyBJbml0aWFsaXplXHJcbiAgICB0aGlzLnVwZGF0ZSgpO1xyXG5cclxuICAgIC8vIFVwZGF0ZSB3aGVuIHRoZSB0cmFuc2Zvcm0gY2hhbmdlcy5cclxuICAgIGNvbnN0IGNoYW5nZWRMaXN0ZW5lciA9ICgpID0+IHRoaXMudXBkYXRlKCk7XHJcbiAgICBjaGFydFRyYW5zZm9ybS5jaGFuZ2VkRW1pdHRlci5hZGRMaXN0ZW5lciggY2hhbmdlZExpc3RlbmVyICk7XHJcblxyXG4gICAgdGhpcy5kaXNwb3NlR3JpZExpbmVTZXQgPSAoKSA9PiBjaGFydFRyYW5zZm9ybS5jaGFuZ2VkRW1pdHRlci5yZW1vdmVMaXN0ZW5lciggY2hhbmdlZExpc3RlbmVyICk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHVwZGF0ZSgpOiB2b2lkIHtcclxuICAgIGNvbnN0IHNoYXBlID0gbmV3IFNoYXBlKCk7XHJcbiAgICB0aGlzLmNoYXJ0VHJhbnNmb3JtLmZvckVhY2hTcGFjaW5nKCB0aGlzLmF4aXNPcmllbnRhdGlvbiwgdGhpcy5zcGFjaW5nLCB0aGlzLm9yaWdpbiwgdGhpcy5jbGlwcGluZ1R5cGUsXHJcbiAgICAgICggbW9kZWxQb3NpdGlvbiwgdmlld1Bvc2l0aW9uICkgPT4ge1xyXG4gICAgICAgIGlmICggdGhpcy5heGlzT3JpZW50YXRpb24gPT09IE9yaWVudGF0aW9uLlZFUlRJQ0FMICkge1xyXG4gICAgICAgICAgc2hhcGUubW92ZVRvKCAwLCB2aWV3UG9zaXRpb24gKTtcclxuICAgICAgICAgIHNoYXBlLmxpbmVUbyggdGhpcy5jaGFydFRyYW5zZm9ybS52aWV3V2lkdGgsIHZpZXdQb3NpdGlvbiApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIHNoYXBlLm1vdmVUbyggdmlld1Bvc2l0aW9uLCAwICk7XHJcbiAgICAgICAgICBzaGFwZS5saW5lVG8oIHZpZXdQb3NpdGlvbiwgdGhpcy5jaGFydFRyYW5zZm9ybS52aWV3SGVpZ2h0ICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9ICk7XHJcbiAgICB0aGlzLnNoYXBlID0gc2hhcGUubWFrZUltbXV0YWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldFNwYWNpbmcoIHNwYWNpbmc6IG51bWJlciApOiB2b2lkIHtcclxuICAgIGlmICggdGhpcy5zcGFjaW5nICE9PSBzcGFjaW5nICkge1xyXG4gICAgICB0aGlzLnNwYWNpbmcgPSBzcGFjaW5nO1xyXG4gICAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIG92ZXJyaWRlIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICB0aGlzLmRpc3Bvc2VHcmlkTGluZVNldCgpO1xyXG4gICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gIH1cclxufVxyXG5cclxuYmFtYm9vLnJlZ2lzdGVyKCAnR3JpZExpbmVTZXQnLCBHcmlkTGluZVNldCApO1xyXG5leHBvcnQgZGVmYXVsdCBHcmlkTGluZVNldDsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxTQUFTQSxLQUFLLFFBQVEsMEJBQTBCO0FBQ2hELE9BQU9DLFdBQVcsTUFBTSxtQ0FBbUM7QUFDM0QsU0FBU0MsSUFBSSxRQUFxQiw2QkFBNkI7QUFDL0QsT0FBT0MsTUFBTSxNQUFNLGFBQWE7QUFHaEMsT0FBT0MsU0FBUyxNQUFNLGlDQUFpQztBQVF2RCxNQUFNQyxXQUFXLFNBQVNILElBQUksQ0FBQztFQVM3QjtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNTSSxXQUFXQSxDQUFFQyxjQUE4QixFQUFFQyxlQUE0QixFQUFF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