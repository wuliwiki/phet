// Copyright 2020-2023, University of Colorado Boulder

/**
 * SpanNode shows a double-headed arrow pointing to parallel bars, and a text label. It is shown under a chart to
 * indicate the distance between gridlines.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */

import optionize, { combineOptions } from '../../phet-core/js/optionize.js';
import Orientation from '../../phet-core/js/Orientation.js';
import ArrowNode from '../../scenery-phet/js/ArrowNode.js';
import { FlowBox, Line, Node } from '../../scenery/js/imports.js';
import bamboo from './bamboo.js';
// Same as the value in Node's validateBounds
const notificationThreshold = 1e-13;

// Default option values for ArrowNode
const ARROW_NODE_OPTIONS = {
  doubleHead: true,
  headHeight: 4.5,
  headWidth: 5,
  tailWidth: 1.5,
  stroke: null // Not supported since it throws off the dimensions, use fill instead
};

class SpanNode extends FlowBox {
  /**
   * @param chartTransform
   * @param axisOrientation
   * @param delta - in model coordinates
   * @param labelNode
   * @param [providedOptions]
   */
  constructor(chartTransform, axisOrientation, delta, labelNode, providedOptions) {
    //TODO https://github.com/phetsims/bamboo/issues/21 support Orientation.VERTICAL
    assert && assert(axisOrientation !== Orientation.VERTICAL, 'Orientation.VERTICAL is not yet supported');
    const options = optionize()({
      // SelfOptions
      color: 'black',
      outerLineLength: 6,
      // length of the bars at the ends of each arrow

      // FlowBoxOptions
      spacing: 0 // between arrow and labelNode
    }, providedOptions);
    super();
    this.chartTransform = chartTransform;
    this.axisOrientation = axisOrientation;
    this.delta = delta;
    this.labelNode = labelNode;
    this.color = options.color;
    this.outerLineLength = options.outerLineLength;
    this.viewWidth = 0;
    this.arrowNodeOptions = combineOptions({
      fill: options.color // default to the color of the SpanNode, but can be overridden via arrowNodeOptions
    }, ARROW_NODE_OPTIONS, options.arrowNodeOptions);

    // Initialize
    this.update();

    // mutate after initializing, so that transform options work correctly
    this.mutate(options);

    // Update when the range of the associated axis changes.
    const changedListener = () => this.update();
    chartTransform.changedEmitter.addListener(changedListener);
    this.disposeSpanNode = () => chartTransform.changedEmitter.removeListener(changedListener);
  }

  /**
   * Sets delta and updates.
   * @param delta - in model coordinates
   */
  setDelta(delta) {
    if (delta !== this.delta) {
      this.delta = delta;
      this.update();
    }
  }
  update() {
    const viewWidth = this.chartTransform.modelToViewDelta(this.axisOrientation, this.delta);

    // If the view width changes a 'noticeable amount', then update.
    if (Math.abs(viewWidth - this.viewWidth) > notificationThreshold) {
      this.viewWidth = viewWidth;

      //TODO https://github.com/phetsims/bamboo/issues/21 support Orientation.VERTICAL

      // Create double-headed arrow with perpendicular lines at ends to show modelDelta
      const createBar = centerX => new Line(0, 0, 0, this.outerLineLength, {
        stroke: this.color,
        centerX: centerX
      });
      const leftBar = createBar(0);
      const rightBar = createBar(viewWidth);
      const arrowNode = new ArrowNode(leftBar.right, leftBar.centerY, rightBar.left, rightBar.centerY, this.arrowNodeOptions);
      const arrowWithBars = new Node({
        children: [leftBar, rightBar, arrowNode]
      });

      //TODO https://github.com/phetsims/bamboo/issues/21 support Orientation.VERTICAL

      // Prevent labelNode from being wider than arrowWithBars
      this.labelNode.maxWidth = arrowWithBars.width;
      this.children = [arrowWithBars, this.labelNode];
    }
  }
  dispose() {
    this.disposeSpanNode();
    super.dispose();
  }
}
bamboo.register('SpanNode', SpanNode);
export default SpanNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcHRpb25pemUiLCJjb21iaW5lT3B0aW9ucyIsIk9yaWVudGF0aW9uIiwiQXJyb3dOb2RlIiwiRmxvd0JveCIsIkxpbmUiLCJOb2RlIiwiYmFtYm9vIiwibm90aWZpY2F0aW9uVGhyZXNob2xkIiwiQVJST1dfTk9ERV9PUFRJT05TIiwiZG91YmxlSGVhZCIsImhlYWRIZWlnaHQiLCJoZWFkV2lkdGgiLCJ0YWlsV2lkdGgiLCJzdHJva2UiLCJTcGFuTm9kZSIsImNvbnN0cnVjdG9yIiwiY2hhcnRUcmFuc2Zvcm0iLCJheGlzT3JpZW50YXRpb24iLCJkZWx0YSIsImxhYmVsTm9kZSIsInByb3ZpZGVkT3B0aW9ucyIsImFzc2VydCIsIlZFUlRJQ0FMIiwib3B0aW9ucyIsImNvbG9yIiwib3V0ZXJMaW5lTGVuZ3RoIiwic3BhY2luZyIsInZpZXdXaWR0aCIsImFycm93Tm9kZU9wdGlvbnMiLCJmaWxsIiwidXBkYXRlIiwibXV0YXRlIiwiY2hhbmdlZExpc3RlbmVyIiwiY2hhbmdlZEVtaXR0ZXIiLCJhZGRMaXN0ZW5lciIsImRpc3Bvc2VTcGFuTm9kZSIsInJlbW92ZUxpc3RlbmVyIiwic2V0RGVsdGEiLCJtb2RlbFRvVmlld0RlbHRhIiwiTWF0aCIsImFicyIsImNyZWF0ZUJhciIsImNlbnRlclgiLCJsZWZ0QmFyIiwicmlnaHRCYXIiLCJhcnJvd05vZGUiLCJyaWdodCIsImNlbnRlclkiLCJsZWZ0IiwiYXJyb3dXaXRoQmFycyIsImNoaWxkcmVuIiwibWF4V2lkdGgiLCJ3aWR0aCIsImRpc3Bvc2UiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlNwYW5Ob2RlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIwLTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFNwYW5Ob2RlIHNob3dzIGEgZG91YmxlLWhlYWRlZCBhcnJvdyBwb2ludGluZyB0byBwYXJhbGxlbCBiYXJzLCBhbmQgYSB0ZXh0IGxhYmVsLiBJdCBpcyBzaG93biB1bmRlciBhIGNoYXJ0IHRvXHJcbiAqIGluZGljYXRlIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIGdyaWRsaW5lcy5cclxuICpcclxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICovXHJcblxyXG5pbXBvcnQgb3B0aW9uaXplLCB7IGNvbWJpbmVPcHRpb25zIH0gZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCBPcmllbnRhdGlvbiBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvT3JpZW50YXRpb24uanMnO1xyXG5pbXBvcnQgU3RyaWN0T21pdCBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvU3RyaWN0T21pdC5qcyc7XHJcbmltcG9ydCBBcnJvd05vZGUsIHsgQXJyb3dOb2RlT3B0aW9ucyB9IGZyb20gJy4uLy4uL3NjZW5lcnktcGhldC9qcy9BcnJvd05vZGUuanMnO1xyXG5pbXBvcnQgeyBDb2xvciwgRmxvd0JveCwgRmxvd0JveE9wdGlvbnMsIExpbmUsIE5vZGUgfSBmcm9tICcuLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgYmFtYm9vIGZyb20gJy4vYmFtYm9vLmpzJztcclxuaW1wb3J0IENoYXJ0VHJhbnNmb3JtIGZyb20gJy4vQ2hhcnRUcmFuc2Zvcm0uanMnO1xyXG5cclxuLy8gU2FtZSBhcyB0aGUgdmFsdWUgaW4gTm9kZSdzIHZhbGlkYXRlQm91bmRzXHJcbmNvbnN0IG5vdGlmaWNhdGlvblRocmVzaG9sZCA9IDFlLTEzO1xyXG5cclxuLy8gRGVmYXVsdCBvcHRpb24gdmFsdWVzIGZvciBBcnJvd05vZGVcclxuY29uc3QgQVJST1dfTk9ERV9PUFRJT05TOiBBcnJvd05vZGVPcHRpb25zID0ge1xyXG4gIGRvdWJsZUhlYWQ6IHRydWUsXHJcbiAgaGVhZEhlaWdodDogNC41LFxyXG4gIGhlYWRXaWR0aDogNSxcclxuICB0YWlsV2lkdGg6IDEuNSxcclxuICBzdHJva2U6IG51bGwgLy8gTm90IHN1cHBvcnRlZCBzaW5jZSBpdCB0aHJvd3Mgb2ZmIHRoZSBkaW1lbnNpb25zLCB1c2UgZmlsbCBpbnN0ZWFkXHJcbn07XHJcblxyXG50eXBlIFNlbGZPcHRpb25zID0ge1xyXG4gIGNvbG9yPzogc3RyaW5nIHwgQ29sb3I7XHJcbiAgb3V0ZXJMaW5lTGVuZ3RoPzogbnVtYmVyO1xyXG4gIGFycm93Tm9kZU9wdGlvbnM/OiBTdHJpY3RPbWl0PEFycm93Tm9kZU9wdGlvbnMsICdzdHJva2UnPjtcclxufTtcclxuZXhwb3J0IHR5cGUgU3Bhbk5vZGVPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBTdHJpY3RPbWl0PEZsb3dCb3hPcHRpb25zLCAnY2hpbGRyZW4nIHwgJ29yaWVudGF0aW9uJz47XHJcblxyXG5jbGFzcyBTcGFuTm9kZSBleHRlbmRzIEZsb3dCb3gge1xyXG5cclxuICBwcml2YXRlIGNoYXJ0VHJhbnNmb3JtOiBDaGFydFRyYW5zZm9ybTtcclxuICBwcml2YXRlIHJlYWRvbmx5IGF4aXNPcmllbnRhdGlvbjogT3JpZW50YXRpb247XHJcbiAgcHJpdmF0ZSBkZWx0YTogbnVtYmVyO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgbGFiZWxOb2RlOiBOb2RlO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgY29sb3I6IHN0cmluZyB8IENvbG9yO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgb3V0ZXJMaW5lTGVuZ3RoOiBudW1iZXI7XHJcbiAgcHJpdmF0ZSB2aWV3V2lkdGg6IG51bWJlcjtcclxuICBwcml2YXRlIHJlYWRvbmx5IGFycm93Tm9kZU9wdGlvbnM6IEFycm93Tm9kZU9wdGlvbnM7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBkaXNwb3NlU3Bhbk5vZGU6ICgpID0+IHZvaWQ7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSBjaGFydFRyYW5zZm9ybVxyXG4gICAqIEBwYXJhbSBheGlzT3JpZW50YXRpb25cclxuICAgKiBAcGFyYW0gZGVsdGEgLSBpbiBtb2RlbCBjb29yZGluYXRlc1xyXG4gICAqIEBwYXJhbSBsYWJlbE5vZGVcclxuICAgKiBAcGFyYW0gW3Byb3ZpZGVkT3B0aW9uc11cclxuICAgKi9cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIGNoYXJ0VHJhbnNmb3JtOiBDaGFydFRyYW5zZm9ybSwgYXhpc09yaWVudGF0aW9uOiBPcmllbnRhdGlvbiwgZGVsdGE6IG51bWJlciwgbGFiZWxOb2RlOiBOb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZWRPcHRpb25zPzogU3Bhbk5vZGVPcHRpb25zICkge1xyXG5cclxuICAgIC8vVE9ETyBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvYmFtYm9vL2lzc3Vlcy8yMSBzdXBwb3J0IE9yaWVudGF0aW9uLlZFUlRJQ0FMXHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBheGlzT3JpZW50YXRpb24gIT09IE9yaWVudGF0aW9uLlZFUlRJQ0FMLCAnT3JpZW50YXRpb24uVkVSVElDQUwgaXMgbm90IHlldCBzdXBwb3J0ZWQnICk7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxTcGFuTm9kZU9wdGlvbnMsIFN0cmljdE9taXQ8U2VsZk9wdGlvbnMsICdhcnJvd05vZGVPcHRpb25zJz4sIEZsb3dCb3hPcHRpb25zPigpKCB7XHJcblxyXG4gICAgICAvLyBTZWxmT3B0aW9uc1xyXG4gICAgICBjb2xvcjogJ2JsYWNrJyxcclxuICAgICAgb3V0ZXJMaW5lTGVuZ3RoOiA2LCAvLyBsZW5ndGggb2YgdGhlIGJhcnMgYXQgdGhlIGVuZHMgb2YgZWFjaCBhcnJvd1xyXG5cclxuICAgICAgLy8gRmxvd0JveE9wdGlvbnNcclxuICAgICAgc3BhY2luZzogMCAvLyBiZXR3ZWVuIGFycm93IGFuZCBsYWJlbE5vZGVcclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIHN1cGVyKCk7XHJcblxyXG4gICAgdGhpcy5jaGFydFRyYW5zZm9ybSA9IGNoYXJ0VHJhbnNmb3JtO1xyXG4gICAgdGhpcy5heGlzT3JpZW50YXRpb24gPSBheGlzT3JpZW50YXRpb247XHJcbiAgICB0aGlzLmRlbHRhID0gZGVsdGE7XHJcbiAgICB0aGlzLmxhYmVsTm9kZSA9IGxhYmVsTm9kZTtcclxuICAgIHRoaXMuY29sb3IgPSBvcHRpb25zLmNvbG9yO1xyXG4gICAgdGhpcy5vdXRlckxpbmVMZW5ndGggPSBvcHRpb25zLm91dGVyTGluZUxlbmd0aDtcclxuICAgIHRoaXMudmlld1dpZHRoID0gMDtcclxuICAgIHRoaXMuYXJyb3dOb2RlT3B0aW9ucyA9IGNvbWJpbmVPcHRpb25zPEFycm93Tm9kZU9wdGlvbnM+KCB7XHJcbiAgICAgIGZpbGw6IG9wdGlvbnMuY29sb3IgLy8gZGVmYXVsdCB0byB0aGUgY29sb3Igb2YgdGhlIFNwYW5Ob2RlLCBidXQgY2FuIGJlIG92ZXJyaWRkZW4gdmlhIGFycm93Tm9kZU9wdGlvbnNcclxuICAgIH0sIEFSUk9XX05PREVfT1BUSU9OUywgb3B0aW9ucy5hcnJvd05vZGVPcHRpb25zICk7XHJcblxyXG4gICAgLy8gSW5pdGlhbGl6ZVxyXG4gICAgdGhpcy51cGRhdGUoKTtcclxuXHJcbiAgICAvLyBtdXRhdGUgYWZ0ZXIgaW5pdGlhbGl6aW5nLCBzbyB0aGF0IHRyYW5zZm9ybSBvcHRpb25zIHdvcmsgY29ycmVjdGx5XHJcbiAgICB0aGlzLm11dGF0ZSggb3B0aW9ucyApO1xyXG5cclxuICAgIC8vIFVwZGF0ZSB3aGVuIHRoZSByYW5nZSBvZiB0aGUgYXNzb2NpYXRlZCBheGlzIGNoYW5nZXMuXHJcbiAgICBjb25zdCBjaGFuZ2VkTGlzdGVuZXIgPSAoKSA9PiB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgY2hhcnRUcmFuc2Zvcm0uY2hhbmdlZEVtaXR0ZXIuYWRkTGlzdGVuZXIoIGNoYW5nZWRMaXN0ZW5lciApO1xyXG5cclxuICAgIHRoaXMuZGlzcG9zZVNwYW5Ob2RlID0gKCkgPT4gY2hhcnRUcmFuc2Zvcm0uY2hhbmdlZEVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIoIGNoYW5nZWRMaXN0ZW5lciApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0cyBkZWx0YSBhbmQgdXBkYXRlcy5cclxuICAgKiBAcGFyYW0gZGVsdGEgLSBpbiBtb2RlbCBjb29yZGluYXRlc1xyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXREZWx0YSggZGVsdGE6IG51bWJlciApOiB2b2lkIHtcclxuICAgIGlmICggZGVsdGEgIT09IHRoaXMuZGVsdGEgKSB7XHJcbiAgICAgIHRoaXMuZGVsdGEgPSBkZWx0YTtcclxuICAgICAgdGhpcy51cGRhdGUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgdXBkYXRlKCk6IHZvaWQge1xyXG5cclxuICAgIGNvbnN0IHZpZXdXaWR0aCA9IHRoaXMuY2hhcnRUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdEZWx0YSggdGhpcy5heGlzT3JpZW50YXRpb24sIHRoaXMuZGVsdGEgKTtcclxuXHJcbiAgICAvLyBJZiB0aGUgdmlldyB3aWR0aCBjaGFuZ2VzIGEgJ25vdGljZWFibGUgYW1vdW50JywgdGhlbiB1cGRhdGUuXHJcbiAgICBpZiAoIE1hdGguYWJzKCB2aWV3V2lkdGggLSB0aGlzLnZpZXdXaWR0aCApID4gbm90aWZpY2F0aW9uVGhyZXNob2xkICkge1xyXG4gICAgICB0aGlzLnZpZXdXaWR0aCA9IHZpZXdXaWR0aDtcclxuXHJcbiAgICAgIC8vVE9ETyBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvYmFtYm9vL2lzc3Vlcy8yMSBzdXBwb3J0IE9yaWVudGF0aW9uLlZFUlRJQ0FMXHJcblxyXG4gICAgICAvLyBDcmVhdGUgZG91YmxlLWhlYWRlZCBhcnJvdyB3aXRoIHBlcnBlbmRpY3VsYXIgbGluZXMgYXQgZW5kcyB0byBzaG93IG1vZGVsRGVsdGFcclxuICAgICAgY29uc3QgY3JlYXRlQmFyID0gKCBjZW50ZXJYOiBudW1iZXIgKSA9PiBuZXcgTGluZSggMCwgMCwgMCwgdGhpcy5vdXRlckxpbmVMZW5ndGgsIHsgc3Ryb2tlOiB0aGlzLmNvbG9yLCBjZW50ZXJYOiBjZW50ZXJYIH0gKTtcclxuICAgICAgY29uc3QgbGVmdEJhciA9IGNyZWF0ZUJhciggMCApO1xyXG4gICAgICBjb25zdCByaWdodEJhciA9IGNyZWF0ZUJhciggdmlld1dpZHRoICk7XHJcbiAgICAgIGNvbnN0IGFycm93Tm9kZSA9IG5ldyBBcnJvd05vZGUoXHJcbiAgICAgICAgbGVmdEJhci5yaWdodCxcclxuICAgICAgICBsZWZ0QmFyLmNlbnRlclksXHJcbiAgICAgICAgcmlnaHRCYXIubGVmdCxcclxuICAgICAgICByaWdodEJhci5jZW50ZXJZLFxyXG4gICAgICAgIHRoaXMuYXJyb3dOb2RlT3B0aW9uc1xyXG4gICAgICApO1xyXG4gICAgICBjb25zdCBhcnJvd1dpdGhCYXJzID0gbmV3IE5vZGUoIHtcclxuICAgICAgICBjaGlsZHJlbjogWyBsZWZ0QmFyLCByaWdodEJhciwgYXJyb3dOb2RlIF1cclxuICAgICAgfSApO1xyXG5cclxuICAgICAgLy9UT0RPIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9iYW1ib28vaXNzdWVzLzIxIHN1cHBvcnQgT3JpZW50YXRpb24uVkVSVElDQUxcclxuXHJcbiAgICAgIC8vIFByZXZlbnQgbGFiZWxOb2RlIGZyb20gYmVpbmcgd2lkZXIgdGhhbiBhcnJvd1dpdGhCYXJzXHJcbiAgICAgIHRoaXMubGFiZWxOb2RlLm1heFdpZHRoID0gYXJyb3dXaXRoQmFycy53aWR0aDtcclxuXHJcbiAgICAgIHRoaXMuY2hpbGRyZW4gPSBbIGFycm93V2l0aEJhcnMsIHRoaXMubGFiZWxOb2RlIF07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb3ZlcnJpZGUgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgIHRoaXMuZGlzcG9zZVNwYW5Ob2RlKCk7XHJcbiAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgfVxyXG59XHJcblxyXG5iYW1ib28ucmVnaXN0ZXIoICdTcGFuTm9kZScsIFNwYW5Ob2RlICk7XHJcbmV4cG9y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