// Copyright 2020-2023, University of Colorado Boulder

/**
 * Copy/paste of GridLineSet that renders to canvas.  Note, these 2 files should be maintained together,
 * to keep as similar an API as possible.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */

import optionize from '../../phet-core/js/optionize.js';
import Orientation from '../../phet-core/js/Orientation.js';
import bamboo from './bamboo.js';
import CanvasPainter from './CanvasPainter.js';
class CanvasGridLineSet extends CanvasPainter {
  /**
   * @param chartTransform
   * @param axisOrientation - axis along which successive grid lines appear.  For example,
   *                        - grid lines that are drawn horizontally progress up the Orientation.VERTICAL axis
   * @param spacing - in model coordinates
   * @param [providedOptions]
   */
  constructor(chartTransform, axisOrientation, spacing, providedOptions) {
    const options = optionize()({
      // SelfOptions
      origin: 0,
      clippingType: 'strict',
      stroke: 'black',
      lineWidth: 1,
      lineDash: [1],
      lineDashOffset: 0
    }, providedOptions);
    super();
    this.chartTransform = chartTransform;
    this.axisOrientation = axisOrientation;
    this.spacing = spacing;
    this.origin = options.origin;
    this.clippingType = options.clippingType;

    // Path options
    this.stroke = options.stroke;
    this.lineDash = options.lineDash;
    this.lineWidth = options.lineWidth;
    this.lineDashOffset = options.lineDashOffset;
  }
  setSpacing(spacing) {
    if (this.spacing !== spacing) {
      this.spacing = spacing;
    }
  }
  setLineDashOffset(lineDashOffset) {
    this.lineDashOffset = lineDashOffset;
  }
  paintCanvas(context) {
    context.strokeStyle = this.stroke;
    context.lineWidth = this.lineWidth;
    context.beginPath();
    context.setLineDash(this.lineDash);
    context.lineDashOffset = this.lineDashOffset;
    this.chartTransform.forEachSpacing(this.axisOrientation, this.spacing, this.origin, this.clippingType, (modelPosition, viewPosition) => {
      if (this.axisOrientation === Orientation.VERTICAL) {
        context.moveTo(0, viewPosition);
        context.lineTo(this.chartTransform.viewWidth, viewPosition);
      } else {
        context.moveTo(viewPosition, 0);
        context.lineTo(viewPosition, this.chartTransform.viewHeight);
      }
    });
    context.stroke();
  }
}
bamboo.register('CanvasGridLineSet', CanvasGridLineSet);
export default CanvasGridLineSet;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcHRpb25pemUiLCJPcmllbnRhdGlvbiIsImJhbWJvbyIsIkNhbnZhc1BhaW50ZXIiLCJDYW52YXNHcmlkTGluZVNldCIsImNvbnN0cnVjdG9yIiwiY2hhcnRUcmFuc2Zvcm0iLCJheGlzT3JpZW50YXRpb24iLCJzcGFjaW5nIiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsIm9yaWdpbiIsImNsaXBwaW5nVHlwZSIsInN0cm9rZSIsImxpbmVXaWR0aCIsImxpbmVEYXNoIiwibGluZURhc2hPZmZzZXQiLCJzZXRTcGFjaW5nIiwic2V0TGluZURhc2hPZmZzZXQiLCJwYWludENhbnZhcyIsImNvbnRleHQiLCJzdHJva2VTdHlsZSIsImJlZ2luUGF0aCIsInNldExpbmVEYXNoIiwiZm9yRWFjaFNwYWNpbmciLCJtb2RlbFBvc2l0aW9uIiwidmlld1Bvc2l0aW9uIiwiVkVSVElDQUwiLCJtb3ZlVG8iLCJsaW5lVG8iLCJ2aWV3V2lkdGgiLCJ2aWV3SGVpZ2h0IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJDYW52YXNHcmlkTGluZVNldC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMC0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBDb3B5L3Bhc3RlIG9mIEdyaWRMaW5lU2V0IHRoYXQgcmVuZGVycyB0byBjYW52YXMuICBOb3RlLCB0aGVzZSAyIGZpbGVzIHNob3VsZCBiZSBtYWludGFpbmVkIHRvZ2V0aGVyLFxyXG4gKiB0byBrZWVwIGFzIHNpbWlsYXIgYW4gQVBJIGFzIHBvc3NpYmxlLlxyXG4gKlxyXG4gKiBAYXV0aG9yIFNhbSBSZWlkIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxyXG4gKi9cclxuXHJcbmltcG9ydCBvcHRpb25pemUgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCBPcmllbnRhdGlvbiBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvT3JpZW50YXRpb24uanMnO1xyXG5pbXBvcnQgUGlja09wdGlvbmFsIGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9QaWNrT3B0aW9uYWwuanMnO1xyXG5pbXBvcnQgeyBQYXRoT3B0aW9ucyB9IGZyb20gJy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBiYW1ib28gZnJvbSAnLi9iYW1ib28uanMnO1xyXG5pbXBvcnQgQ2FudmFzUGFpbnRlciwgeyBDYW52YXNQYWludGVyT3B0aW9ucyB9IGZyb20gJy4vQ2FudmFzUGFpbnRlci5qcyc7XHJcbmltcG9ydCBDaGFydFRyYW5zZm9ybSBmcm9tICcuL0NoYXJ0VHJhbnNmb3JtLmpzJztcclxuaW1wb3J0IENsaXBwaW5nVHlwZSBmcm9tICcuL0NsaXBwaW5nVHlwZS5qcyc7XHJcblxyXG50eXBlIFNlbGZPcHRpb25zID0ge1xyXG4gIG9yaWdpbj86IG51bWJlcjtcclxuICBjbGlwcGluZ1R5cGU/OiBDbGlwcGluZ1R5cGU7XHJcbiAgc3Ryb2tlPzogc3RyaW5nIHwgQ2FudmFzR3JhZGllbnQgfCBDYW52YXNQYXR0ZXJuO1xyXG59ICYgUGlja09wdGlvbmFsPFBhdGhPcHRpb25zLCAnbGluZVdpZHRoJyB8ICdsaW5lRGFzaCcgfCAnbGluZURhc2hPZmZzZXQnPjtcclxuXHJcbmV4cG9ydCB0eXBlIENhbnZhc0dyaWRMaW5lU2V0T3B0aW9ucyA9IFNlbGZPcHRpb25zICYgQ2FudmFzUGFpbnRlck9wdGlvbnM7XHJcblxyXG5jbGFzcyBDYW52YXNHcmlkTGluZVNldCBleHRlbmRzIENhbnZhc1BhaW50ZXIge1xyXG5cclxuICBwcml2YXRlIHJlYWRvbmx5IGNoYXJ0VHJhbnNmb3JtOiBDaGFydFRyYW5zZm9ybTtcclxuICBwcml2YXRlIHJlYWRvbmx5IGF4aXNPcmllbnRhdGlvbjogT3JpZW50YXRpb247XHJcbiAgcHJpdmF0ZSBzcGFjaW5nOiBudW1iZXI7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBvcmlnaW46IG51bWJlcjtcclxuICBwcml2YXRlIHJlYWRvbmx5IGNsaXBwaW5nVHlwZTogQ2xpcHBpbmdUeXBlO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgc3Ryb2tlOiBzdHJpbmcgfCBDYW52YXNHcmFkaWVudCB8IENhbnZhc1BhdHRlcm47XHJcbiAgcHJpdmF0ZSByZWFkb25seSBsaW5lRGFzaDogbnVtYmVyW107XHJcbiAgcHJpdmF0ZSByZWFkb25seSBsaW5lV2lkdGg6IG51bWJlcjtcclxuICBwcml2YXRlIGxpbmVEYXNoT2Zmc2V0OiBudW1iZXI7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSBjaGFydFRyYW5zZm9ybVxyXG4gICAqIEBwYXJhbSBheGlzT3JpZW50YXRpb24gLSBheGlzIGFsb25nIHdoaWNoIHN1Y2Nlc3NpdmUgZ3JpZCBsaW5lcyBhcHBlYXIuICBGb3IgZXhhbXBsZSxcclxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgIC0gZ3JpZCBsaW5lcyB0aGF0IGFyZSBkcmF3biBob3Jpem9udGFsbHkgcHJvZ3Jlc3MgdXAgdGhlIE9yaWVudGF0aW9uLlZFUlRJQ0FMIGF4aXNcclxuICAgKiBAcGFyYW0gc3BhY2luZyAtIGluIG1vZGVsIGNvb3JkaW5hdGVzXHJcbiAgICogQHBhcmFtIFtwcm92aWRlZE9wdGlvbnNdXHJcbiAgICovXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBjaGFydFRyYW5zZm9ybTogQ2hhcnRUcmFuc2Zvcm0sIGF4aXNPcmllbnRhdGlvbjogT3JpZW50YXRpb24sIHNwYWNpbmc6IG51bWJlcixcclxuICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVkT3B0aW9ucz86IENhbnZhc0dyaWRMaW5lU2V0T3B0aW9ucyApIHtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPENhbnZhc0dyaWRMaW5lU2V0T3B0aW9ucywgU2VsZk9wdGlvbnM+KCkoIHtcclxuXHJcbiAgICAgIC8vIFNlbGZPcHRpb25zXHJcbiAgICAgIG9yaWdpbjogMCxcclxuICAgICAgY2xpcHBpbmdUeXBlOiAnc3RyaWN0JyxcclxuICAgICAgc3Ryb2tlOiAnYmxhY2snLFxyXG4gICAgICBsaW5lV2lkdGg6IDEsXHJcbiAgICAgIGxpbmVEYXNoOiBbIDEgXSxcclxuICAgICAgbGluZURhc2hPZmZzZXQ6IDBcclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIHN1cGVyKCk7XHJcblxyXG4gICAgdGhpcy5jaGFydFRyYW5zZm9ybSA9IGNoYXJ0VHJhbnNmb3JtO1xyXG4gICAgdGhpcy5heGlzT3JpZW50YXRpb24gPSBheGlzT3JpZW50YXRpb247XHJcbiAgICB0aGlzLnNwYWNpbmcgPSBzcGFjaW5nO1xyXG4gICAgdGhpcy5vcmlnaW4gPSBvcHRpb25zLm9yaWdpbjtcclxuICAgIHRoaXMuY2xpcHBpbmdUeXBlID0gb3B0aW9ucy5jbGlwcGluZ1R5cGU7XHJcblxyXG4gICAgLy8gUGF0aCBvcHRpb25zXHJcbiAgICB0aGlzLnN0cm9rZSA9IG9wdGlvbnMuc3Ryb2tlO1xyXG4gICAgdGhpcy5saW5lRGFzaCA9IG9wdGlvbnMubGluZURhc2g7XHJcbiAgICB0aGlzLmxpbmVXaWR0aCA9IG9wdGlvbnMubGluZVdpZHRoO1xyXG4gICAgdGhpcy5saW5lRGFzaE9mZnNldCA9IG9wdGlvbnMubGluZURhc2hPZmZzZXQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0U3BhY2luZyggc3BhY2luZzogbnVtYmVyICk6IHZvaWQge1xyXG4gICAgaWYgKCB0aGlzLnNwYWNpbmcgIT09IHNwYWNpbmcgKSB7XHJcbiAgICAgIHRoaXMuc3BhY2luZyA9IHNwYWNpbmc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0TGluZURhc2hPZmZzZXQoIGxpbmVEYXNoT2Zmc2V0OiBudW1iZXIgKTogdm9pZCB7XHJcbiAgICB0aGlzLmxpbmVEYXNoT2Zmc2V0ID0gbGluZURhc2hPZmZzZXQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcGFpbnRDYW52YXMoIGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCApOiB2b2lkIHtcclxuICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSB0aGlzLnN0cm9rZTtcclxuICAgIGNvbnRleHQubGluZVdpZHRoID0gdGhpcy5saW5lV2lkdGg7XHJcbiAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgY29udGV4dC5zZXRMaW5lRGFzaCggdGhpcy5saW5lRGFzaCApO1xyXG4gICAgY29udGV4dC5saW5lRGFzaE9mZnNldCA9IHRoaXMubGluZURhc2hPZmZzZXQ7XHJcblxyXG4gICAgdGhpcy5jaGFydFRyYW5zZm9ybS5mb3JFYWNoU3BhY2luZyggdGhpcy5heGlzT3JpZW50YXRpb24sIHRoaXMuc3BhY2luZywgdGhpcy5vcmlnaW4sIHRoaXMuY2xpcHBpbmdUeXBlLFxyXG4gICAgICAoIG1vZGVsUG9zaXRpb24sIHZpZXdQb3NpdGlvbiApID0+IHtcclxuXHJcbiAgICAgICAgaWYgKCB0aGlzLmF4aXNPcmllbnRhdGlvbiA9PT0gT3JpZW50YXRpb24uVkVSVElDQUwgKSB7XHJcbiAgICAgICAgICBjb250ZXh0Lm1vdmVUbyggMCwgdmlld1Bvc2l0aW9uICk7XHJcbiAgICAgICAgICBjb250ZXh0LmxpbmVUbyggdGhpcy5jaGFydFRyYW5zZm9ybS52aWV3V2lkdGgsIHZpZXdQb3NpdGlvbiApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIGNvbnRleHQubW92ZVRvKCB2aWV3UG9zaXRpb24sIDAgKTtcclxuICAgICAgICAgIGNvbnRleHQubGluZVRvKCB2aWV3UG9zaXRpb24sIHRoaXMuY2hhcnRUcmFuc2Zvcm0udmlld0hlaWdodCApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSApO1xyXG5cclxuICAgIGNvbnRleHQuc3Ryb2tlKCk7XHJcbiAgfVxyXG59XHJcblxyXG5iYW1ib28ucmVnaXN0ZXIoICdDYW52YXNHcmlkTGluZVNldCcsIENhbnZhc0dyaWRMaW5lU2V0ICk7XHJc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