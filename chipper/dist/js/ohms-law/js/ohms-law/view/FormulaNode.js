// Copyright 2013-2022, University of Colorado Boulder

/**
 * View formula ohms law. This was developed to be statically placed in the view. All components are laid
 * out based on the equals sign.
 * @author Vasily Shakhov (Mlearner)
 * @author Anton Ulyanov (Mlearner)
 */

import Multilink from '../../../../axon/js/Multilink.js';
import merge from '../../../../phet-core/js/merge.js';
import StringUtils from '../../../../phetcommon/js/util/StringUtils.js';
import MathSymbols from '../../../../scenery-phet/js/MathSymbols.js';
import PhetColorScheme from '../../../../scenery-phet/js/PhetColorScheme.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { Node, Rectangle, Text } from '../../../../scenery/js/imports.js';
import Tandem from '../../../../tandem/js/Tandem.js';
import ohmsLaw from '../../ohmsLaw.js';
import OhmsLawStrings from '../../OhmsLawStrings.js';
import OhmsLawA11yStrings from '../OhmsLawA11yStrings.js';
import OhmsLawConstants from '../OhmsLawConstants.js';
const currentSymbolString = OhmsLawStrings.currentSymbol;
const resistanceSymbolString = OhmsLawStrings.resistanceSymbol;
const voltageSymbolString = OhmsLawStrings.voltageSymbol;
const relativeSizePatternString = OhmsLawA11yStrings.relativeSizePattern.value;
const ohmsLawEquationString = OhmsLawA11yStrings.ohmsLawEquation.value;
const ohmsLawDefinitionString = OhmsLawA11yStrings.ohmsLawDefinition.value;

// constants
const TEXT_FONT = new PhetFont({
  family: OhmsLawConstants.FONT_FAMILY,
  size: 20,
  weight: 'bold'
});
const CURRENT_SCALE_M = 150; // empirically determined
const CURRENT_SCALE_B = 1; // empirically determined
const OTHERS_SCALE_M = 16; // empirically determined
const OTHERS_SCALE_B = 4; // empirically determined

class FormulaNode extends Node {
  /**
   * @param {OhmsLawModel} model
   * @param {Object} [options]
   */
  constructor(model, options) {
    options = merge({
      tandem: Tandem.REQUIRED,
      // pdom
      labelContent: ohmsLawEquationString,
      descriptionContent: ohmsLawDefinitionString,
      tagName: 'div',
      labelTagName: 'h3' // labels should come before other child content
    }, options);
    super();

    // Create the equals sign, which does not change size
    const equalsSignText = new Text(MathSymbols.EQUAL_TO, {
      // We never internationalize the '=' sign
      font: new PhetFont({
        family: OhmsLawConstants.FONT_FAMILY,
        size: 140,
        weight: 'bold'
      }),
      fill: '#000',
      centerX: 300,
      centerY: 0,
      tandem: options.tandem.createTandem('equalsSignText')
    });

    // Create the Current Letter
    const currentText = new Text(currentSymbolString, {
      font: TEXT_FONT,
      fill: PhetColorScheme.RED_COLORBLIND,
      centerX: 0,
      centerY: 0,
      tandem: options.tandem.createTandem('currentLetterText')
    });

    // Create the node that contains the text
    this.currentLetterNode = new Node({
      children: [getAntiArtifactRectangle(currentText), currentText]
    });
    const currentXPosition = equalsSignText.centerX + 80;

    // Scale the text as the associated value changes. Present for the lifetime of the sim; no need to dispose.
    model.currentProperty.link(() => {
      this.currentLetterNode.setTranslation(currentXPosition, 0);
      this.currentLetterNode.setScaleMagnitude(CURRENT_SCALE_M * model.getNormalizedCurrent() + CURRENT_SCALE_B);
    });

    // Create the Voltage Letter
    const voltageText = new Text(voltageSymbolString, {
      font: TEXT_FONT,
      fill: OhmsLawConstants.BLUE_COLOR,
      centerX: 0,
      centerY: 0,
      tandem: options.tandem.createTandem('voltageLetterText')
    });

    // Create the node that contains the text
    this.voltageLetterNode = new Node({
      children: [getAntiArtifactRectangle(voltageText), voltageText]
    });
    const voltageXPosition = equalsSignText.centerX - 150;

    // Scale the text as the associated value changes. Present for the lifetime of the sim; no need to dispose.
    model.voltageProperty.link(() => {
      this.voltageLetterNode.setTranslation(voltageXPosition, 0);
      this.voltageLetterNode.setScaleMagnitude(OTHERS_SCALE_M * model.getNormalizedVoltage() + OTHERS_SCALE_B);
    });

    // Create the Resistance Letter
    const resistanceText = new Text(resistanceSymbolString, {
      font: TEXT_FONT,
      fill: OhmsLawConstants.BLUE_COLOR,
      centerX: 0,
      centerY: 0,
      tandem: options.tandem.createTandem('resistanceLetterText')
    });

    // Create the node that contains the text
    this.resistanceLetterNode = new Node({
      children: [getAntiArtifactRectangle(resistanceText), resistanceText]
    });
    const resistanceXPosition = equalsSignText.centerX + 240;

    // Scale the text as the associated value changes. Present for the lifetime of the sim; no need to dispose.
    model.resistanceProperty.link(() => {
      this.resistanceLetterNode.setTranslation(resistanceXPosition, 0);
      this.resistanceLetterNode.setScaleMagnitude(OTHERS_SCALE_M * model.getNormalizedResistance() + OTHERS_SCALE_B);
    });

    // Current letter is added first so that when it gets huge, it doesn't cover anything up.
    this.addChild(this.currentLetterNode);
    this.addChild(this.resistanceLetterNode);
    this.addChild(this.voltageLetterNode);

    // must come after letters to be on top
    this.addChild(equalsSignText);

    // add a node for accessibility that describes the relative sizes of the letters
    const descriptionNode = new Node({
      tagName: 'p'
    });
    this.addChild(descriptionNode);

    // when any of the model Properties change, update the accessible description
    Multilink.multilink([model.currentProperty, model.resistanceProperty, model.voltageProperty], (current, resistance, voltage) => {
      descriptionNode.innerContent = this.getComparativeSizeDescription();
    });
    this.mutate(options);
  }

  /**
   * Get the comparative size description for the letters, something like
   * "Letter V is much larger than letter I and comparable to letter R."
   * Used for a11y.
   *
   * @public
   * @returns {string}
   */
  getComparativeSizeDescription() {
    const rHeight = this.resistanceLetterNode.height;
    const iHeight = this.currentLetterNode.height;
    const vHeight = this.voltageLetterNode.height;
    const vToI = vHeight / iHeight;
    const vToR = vHeight / rHeight;

    // for iteration
    let i;
    let describedRange;

    // map the relations to the comparative descriptions
    // loop through array of keys to avoid closures every time this is called
    const ranges = OhmsLawConstants.COMPARATIVE_DESCRIPTION_RANGES;
    const keys = Object.keys(ranges);

    // get the relative size description comparing V to I
    let vToIDescription;
    for (i = 0; i < keys.length; i++) {
      describedRange = ranges[keys[i]];
      if (describedRange.range.contains(vToI)) {
        vToIDescription = describedRange.description;
        break;
      }
    }

    // get the relative size description comparing V to R
    let vToRDescription;
    for (i = 0; i < keys.length; i++) {
      describedRange = ranges[keys[i]];
      if (describedRange.range.contains(vToR)) {
        vToRDescription = describedRange.description;
        break;
      }
    }
    return StringUtils.fillIn(relativeSizePatternString, {
      iComparison: vToIDescription,
      rComparison: vToRDescription
    });
  }
}

/**
 * Add an invisible rectangle with bounds slightly larger than the text so that artifacts aren't left on the
 * screen, see https://github.com/phetsims/ohms-law/issues/26.
 * @param {Node} node
 * @returns {Rectangle}
 */
function getAntiArtifactRectangle(node) {
  return Rectangle.bounds(node.bounds.dilated(1), {
    fill: 'transparent'
  });
}
ohmsLaw.register('FormulaNode', FormulaNode);
export default FormulaNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNdWx0aWxpbmsiLCJtZXJnZSIsIlN0cmluZ1V0aWxzIiwiTWF0aFN5bWJvbHMiLCJQaGV0Q29sb3JTY2hlbWUiLCJQaGV0Rm9udCIsIk5vZGUiLCJSZWN0YW5nbGUiLCJUZXh0IiwiVGFuZGVtIiwib2htc0xhdyIsIk9obXNMYXdTdHJpbmdzIiwiT2htc0xhd0ExMXlTdHJpbmdzIiwiT2htc0xhd0NvbnN0YW50cyIsImN1cnJlbnRTeW1ib2xTdHJpbmciLCJjdXJyZW50U3ltYm9sIiwicmVzaXN0YW5jZVN5bWJvbFN0cmluZyIsInJlc2lzdGFuY2VTeW1ib2wiLCJ2b2x0YWdlU3ltYm9sU3RyaW5nIiwidm9sdGFnZVN5bWJvbCIsInJlbGF0aXZlU2l6ZVBhdHRlcm5TdHJpbmciLCJyZWxhdGl2ZVNpemVQYXR0ZXJuIiwidmFsdWUiLCJvaG1zTGF3RXF1YXRpb25TdHJpbmciLCJvaG1zTGF3RXF1YXRpb24iLCJvaG1zTGF3RGVmaW5pdGlvblN0cmluZyIsIm9obXNMYXdEZWZpbml0aW9uIiwiVEVYVF9GT05UIiwiZmFtaWx5IiwiRk9OVF9GQU1JTFkiLCJzaXplIiwid2VpZ2h0IiwiQ1VSUkVOVF9TQ0FMRV9NIiwiQ1VSUkVOVF9TQ0FMRV9CIiwiT1RIRVJTX1NDQUxFX00iLCJPVEhFUlNfU0NBTEVfQiIsIkZvcm11bGFOb2RlIiwiY29uc3RydWN0b3IiLCJtb2RlbCIsIm9wdGlvbnMiLCJ0YW5kZW0iLCJSRVFVSVJFRCIsImxhYmVsQ29udGVudCIsImRlc2NyaXB0aW9uQ29udGVudCIsInRhZ05hbWUiLCJsYWJlbFRhZ05hbWUiLCJlcXVhbHNTaWduVGV4dCIsIkVRVUFMX1RPIiwiZm9udCIsImZpbGwiLCJjZW50ZXJYIiwiY2VudGVyWSIsImNyZWF0ZVRhbmRlbSIsImN1cnJlbnRUZXh0IiwiUkVEX0NPTE9SQkxJTkQiLCJjdXJyZW50TGV0dGVyTm9kZSIsImNoaWxkcmVuIiwiZ2V0QW50aUFydGlmYWN0UmVjdGFuZ2xlIiwiY3VycmVudFhQb3NpdGlvbiIsImN1cnJlbnRQcm9wZXJ0eSIsImxpbmsiLCJzZXRUcmFuc2xhdGlvbiIsInNldFNjYWxlTWFnbml0dWRlIiwiZ2V0Tm9ybWFsaXplZEN1cnJlbnQiLCJ2b2x0YWdlVGV4dCIsIkJMVUVfQ09MT1IiLCJ2b2x0YWdlTGV0dGVyTm9kZSIsInZvbHRhZ2VYUG9zaXRpb24iLCJ2b2x0YWdlUHJvcGVydHkiLCJnZXROb3JtYWxpemVkVm9sdGFnZSIsInJlc2lzdGFuY2VUZXh0IiwicmVzaXN0YW5jZUxldHRlck5vZGUiLCJyZXNpc3RhbmNlWFBvc2l0aW9uIiwicmVzaXN0YW5jZVByb3BlcnR5IiwiZ2V0Tm9ybWFsaXplZFJlc2lzdGFuY2UiLCJhZGRDaGlsZCIsImRlc2NyaXB0aW9uTm9kZSIsIm11bHRpbGluayIsImN1cnJlbnQiLCJyZXNpc3RhbmNlIiwidm9sdGFnZSIsImlubmVyQ29udGVudCIsImdldENvbXBhcmF0aXZlU2l6ZURlc2NyaXB0aW9uIiwibXV0YXRlIiwickhlaWdodCIsImhlaWdodCIsImlIZWlnaHQiLCJ2SGVpZ2h0IiwidlRvSSIsInZUb1IiLCJpIiwiZGVzY3JpYmVkUmFuZ2UiLCJyYW5nZXMiLCJDT01QQVJBVElWRV9ERVNDUklQVElPTl9SQU5HRVMiLCJrZXlzIiwiT2JqZWN0IiwidlRvSURlc2NyaXB0aW9uIiwibGVuZ3RoIiwicmFuZ2UiLCJjb250YWlucyIsImRlc2NyaXB0aW9uIiwidlRvUkRlc2NyaXB0aW9uIiwiZmlsbEluIiwiaUNvbXBhcmlzb24iLCJyQ29tcGFyaXNvbiIsIm5vZGUiLCJib3VuZHMiLCJkaWxhdGVkIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJGb3JtdWxhTm9kZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxMy0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBWaWV3IGZvcm11bGEgb2htcyBsYXcuIFRoaXMgd2FzIGRldmVsb3BlZCB0byBiZSBzdGF0aWNhbGx5IHBsYWNlZCBpbiB0aGUgdmlldy4gQWxsIGNvbXBvbmVudHMgYXJlIGxhaWRcclxuICogb3V0IGJhc2VkIG9uIHRoZSBlcXVhbHMgc2lnbi5cclxuICogQGF1dGhvciBWYXNpbHkgU2hha2hvdiAoTWxlYXJuZXIpXHJcbiAqIEBhdXRob3IgQW50b24gVWx5YW5vdiAoTWxlYXJuZXIpXHJcbiAqL1xyXG5cclxuaW1wb3J0IE11bHRpbGluayBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL011bHRpbGluay5qcyc7XHJcbmltcG9ydCBtZXJnZSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvbWVyZ2UuanMnO1xyXG5pbXBvcnQgU3RyaW5nVXRpbHMgZnJvbSAnLi4vLi4vLi4vLi4vcGhldGNvbW1vbi9qcy91dGlsL1N0cmluZ1V0aWxzLmpzJztcclxuaW1wb3J0IE1hdGhTeW1ib2xzIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9NYXRoU3ltYm9scy5qcyc7XHJcbmltcG9ydCBQaGV0Q29sb3JTY2hlbWUgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1BoZXRDb2xvclNjaGVtZS5qcyc7XHJcbmltcG9ydCBQaGV0Rm9udCBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvUGhldEZvbnQuanMnO1xyXG5pbXBvcnQgeyBOb2RlLCBSZWN0YW5nbGUsIFRleHQgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uLy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xyXG5pbXBvcnQgb2htc0xhdyBmcm9tICcuLi8uLi9vaG1zTGF3LmpzJztcclxuaW1wb3J0IE9obXNMYXdTdHJpbmdzIGZyb20gJy4uLy4uL09obXNMYXdTdHJpbmdzLmpzJztcclxuaW1wb3J0IE9obXNMYXdBMTF5U3RyaW5ncyBmcm9tICcuLi9PaG1zTGF3QTExeVN0cmluZ3MuanMnO1xyXG5pbXBvcnQgT2htc0xhd0NvbnN0YW50cyBmcm9tICcuLi9PaG1zTGF3Q29uc3RhbnRzLmpzJztcclxuXHJcbmNvbnN0IGN1cnJlbnRTeW1ib2xTdHJpbmcgPSBPaG1zTGF3U3RyaW5ncy5jdXJyZW50U3ltYm9sO1xyXG5jb25zdCByZXNpc3RhbmNlU3ltYm9sU3RyaW5nID0gT2htc0xhd1N0cmluZ3MucmVzaXN0YW5jZVN5bWJvbDtcclxuY29uc3Qgdm9sdGFnZVN5bWJvbFN0cmluZyA9IE9obXNMYXdTdHJpbmdzLnZvbHRhZ2VTeW1ib2w7XHJcblxyXG5jb25zdCByZWxhdGl2ZVNpemVQYXR0ZXJuU3RyaW5nID0gT2htc0xhd0ExMXlTdHJpbmdzLnJlbGF0aXZlU2l6ZVBhdHRlcm4udmFsdWU7XHJcbmNvbnN0IG9obXNMYXdFcXVhdGlvblN0cmluZyA9IE9obXNMYXdBMTF5U3RyaW5ncy5vaG1zTGF3RXF1YXRpb24udmFsdWU7XHJcbmNvbnN0IG9obXNMYXdEZWZpbml0aW9uU3RyaW5nID0gT2htc0xhd0ExMXlTdHJpbmdzLm9obXNMYXdEZWZpbml0aW9uLnZhbHVlO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IFRFWFRfRk9OVCA9IG5ldyBQaGV0Rm9udCggeyBmYW1pbHk6IE9obXNMYXdDb25zdGFudHMuRk9OVF9GQU1JTFksIHNpemU6IDIwLCB3ZWlnaHQ6ICdib2xkJyB9ICk7XHJcbmNvbnN0IENVUlJFTlRfU0NBTEVfTSA9IDE1MDsgLy8gZW1waXJpY2FsbHkgZGV0ZXJtaW5lZFxyXG5jb25zdCBDVVJSRU5UX1NDQUxFX0IgPSAxOyAvLyBlbXBpcmljYWxseSBkZXRlcm1pbmVkXHJcbmNvbnN0IE9USEVSU19TQ0FMRV9NID0gMTY7IC8vIGVtcGlyaWNhbGx5IGRldGVybWluZWRcclxuY29uc3QgT1RIRVJTX1NDQUxFX0IgPSA0OyAvLyBlbXBpcmljYWxseSBkZXRlcm1pbmVkXHJcblxyXG5jbGFzcyBGb3JtdWxhTm9kZSBleHRlbmRzIE5vZGUge1xyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7T2htc0xhd01vZGVsfSBtb2RlbFxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cclxuICAgKi9cclxuICBjb25zdHJ1Y3RvciggbW9kZWwsIG9wdGlvbnMgKSB7XHJcblxyXG4gICAgb3B0aW9ucyA9IG1lcmdlKCB7XHJcbiAgICAgIHRhbmRlbTogVGFuZGVtLlJFUVVJUkVELFxyXG5cclxuICAgICAgLy8gcGRvbVxyXG4gICAgICBsYWJlbENvbnRlbnQ6IG9obXNMYXdFcXVhdGlvblN0cmluZyxcclxuICAgICAgZGVzY3JpcHRpb25Db250ZW50OiBvaG1zTGF3RGVmaW5pdGlvblN0cmluZyxcclxuICAgICAgdGFnTmFtZTogJ2RpdicsXHJcbiAgICAgIGxhYmVsVGFnTmFtZTogJ2gzJyAvLyBsYWJlbHMgc2hvdWxkIGNvbWUgYmVmb3JlIG90aGVyIGNoaWxkIGNvbnRlbnRcclxuICAgIH0sIG9wdGlvbnMgKTtcclxuXHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIC8vIENyZWF0ZSB0aGUgZXF1YWxzIHNpZ24sIHdoaWNoIGRvZXMgbm90IGNoYW5nZSBzaXplXHJcbiAgICBjb25zdCBlcXVhbHNTaWduVGV4dCA9IG5ldyBUZXh0KCBNYXRoU3ltYm9scy5FUVVBTF9UTywgeyAvLyBXZSBuZXZlciBpbnRlcm5hdGlvbmFsaXplIHRoZSAnPScgc2lnblxyXG4gICAgICBmb250OiBuZXcgUGhldEZvbnQoIHsgZmFtaWx5OiBPaG1zTGF3Q29uc3RhbnRzLkZPTlRfRkFNSUxZLCBzaXplOiAxNDAsIHdlaWdodDogJ2JvbGQnIH0gKSxcclxuICAgICAgZmlsbDogJyMwMDAnLFxyXG4gICAgICBjZW50ZXJYOiAzMDAsXHJcbiAgICAgIGNlbnRlclk6IDAsXHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnZXF1YWxzU2lnblRleHQnIClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgdGhlIEN1cnJlbnQgTGV0dGVyXHJcbiAgICBjb25zdCBjdXJyZW50VGV4dCA9IG5ldyBUZXh0KCBjdXJyZW50U3ltYm9sU3RyaW5nLCB7XHJcbiAgICAgIGZvbnQ6IFRFWFRfRk9OVCxcclxuICAgICAgZmlsbDogUGhldENvbG9yU2NoZW1lLlJFRF9DT0xPUkJMSU5ELFxyXG4gICAgICBjZW50ZXJYOiAwLFxyXG4gICAgICBjZW50ZXJZOiAwLFxyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2N1cnJlbnRMZXR0ZXJUZXh0JyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIHRoZSBub2RlIHRoYXQgY29udGFpbnMgdGhlIHRleHRcclxuICAgIHRoaXMuY3VycmVudExldHRlck5vZGUgPSBuZXcgTm9kZSggeyBjaGlsZHJlbjogWyBnZXRBbnRpQXJ0aWZhY3RSZWN0YW5nbGUoIGN1cnJlbnRUZXh0ICksIGN1cnJlbnRUZXh0IF0gfSApO1xyXG4gICAgY29uc3QgY3VycmVudFhQb3NpdGlvbiA9IGVxdWFsc1NpZ25UZXh0LmNlbnRlclggKyA4MDtcclxuXHJcbiAgICAvLyBTY2FsZSB0aGUgdGV4dCBhcyB0aGUgYXNzb2NpYXRlZCB2YWx1ZSBjaGFuZ2VzLiBQcmVzZW50IGZvciB0aGUgbGlmZXRpbWUgb2YgdGhlIHNpbTsgbm8gbmVlZCB0byBkaXNwb3NlLlxyXG4gICAgbW9kZWwuY3VycmVudFByb3BlcnR5LmxpbmsoICgpID0+IHtcclxuICAgICAgdGhpcy5jdXJyZW50TGV0dGVyTm9kZS5zZXRUcmFuc2xhdGlvbiggY3VycmVudFhQb3NpdGlvbiwgMCApO1xyXG4gICAgICB0aGlzLmN1cnJlbnRMZXR0ZXJOb2RlLnNldFNjYWxlTWFnbml0dWRlKCBDVVJSRU5UX1NDQUxFX00gKiBtb2RlbC5nZXROb3JtYWxpemVkQ3VycmVudCgpICsgQ1VSUkVOVF9TQ0FMRV9CICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIHRoZSBWb2x0YWdlIExldHRlclxyXG4gICAgY29uc3Qgdm9sdGFnZVRleHQgPSBuZXcgVGV4dCggdm9sdGFnZVN5bWJvbFN0cmluZywge1xyXG4gICAgICBmb250OiBURVhUX0ZPTlQsXHJcbiAgICAgIGZpbGw6IE9obXNMYXdDb25zdGFudHMuQkxVRV9DT0xPUixcclxuICAgICAgY2VudGVyWDogMCxcclxuICAgICAgY2VudGVyWTogMCxcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICd2b2x0YWdlTGV0dGVyVGV4dCcgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIENyZWF0ZSB0aGUgbm9kZSB0aGF0IGNvbnRhaW5zIHRoZSB0ZXh0XHJcbiAgICB0aGlzLnZvbHRhZ2VMZXR0ZXJOb2RlID0gbmV3IE5vZGUoIHsgY2hpbGRyZW46IFsgZ2V0QW50aUFydGlmYWN0UmVjdGFuZ2xlKCB2b2x0YWdlVGV4dCApLCB2b2x0YWdlVGV4dCBdIH0gKTtcclxuICAgIGNvbnN0IHZvbHRhZ2VYUG9zaXRpb24gPSBlcXVhbHNTaWduVGV4dC5jZW50ZXJYIC0gMTUwO1xyXG5cclxuICAgIC8vIFNjYWxlIHRoZSB0ZXh0IGFzIHRoZSBhc3NvY2lhdGVkIHZhbHVlIGNoYW5nZXMuIFByZXNlbnQgZm9yIHRoZSBsaWZldGltZSBvZiB0aGUgc2ltOyBubyBuZWVkIHRvIGRpc3Bvc2UuXHJcbiAgICBtb2RlbC52b2x0YWdlUHJvcGVydHkubGluayggKCkgPT4ge1xyXG4gICAgICB0aGlzLnZvbHRhZ2VMZXR0ZXJOb2RlLnNldFRyYW5zbGF0aW9uKCB2b2x0YWdlWFBvc2l0aW9uLCAwICk7XHJcbiAgICAgIHRoaXMudm9sdGFnZUxldHRlck5vZGUuc2V0U2NhbGVNYWduaXR1ZGUoIE9USEVSU19TQ0FMRV9NICogbW9kZWwuZ2V0Tm9ybWFsaXplZFZvbHRhZ2UoKSArIE9USEVSU19TQ0FMRV9CICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIHRoZSBSZXNpc3RhbmNlIExldHRlclxyXG4gICAgY29uc3QgcmVzaXN0YW5jZVRleHQgPSBuZXcgVGV4dCggcmVzaXN0YW5jZVN5bWJvbFN0cmluZywge1xyXG4gICAgICBmb250OiBURVhUX0ZPTlQsXHJcbiAgICAgIGZpbGw6IE9obXNMYXdDb25zdGFudHMuQkxVRV9DT0xPUixcclxuICAgICAgY2VudGVyWDogMCxcclxuICAgICAgY2VudGVyWTogMCxcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdyZXNpc3RhbmNlTGV0dGVyVGV4dCcgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIENyZWF0ZSB0aGUgbm9kZSB0aGF0IGNvbnRhaW5zIHRoZSB0ZXh0XHJcbiAgICB0aGlzLnJlc2lzdGFuY2VMZXR0ZXJOb2RlID0gbmV3IE5vZGUoIHsgY2hpbGRyZW46IFsgZ2V0QW50aUFydGlmYWN0UmVjdGFuZ2xlKCByZXNpc3RhbmNlVGV4dCApLCByZXNpc3RhbmNlVGV4dCBdIH0gKTtcclxuICAgIGNvbnN0IHJlc2lzdGFuY2VYUG9zaXRpb24gPSBlcXVhbHNTaWduVGV4dC5jZW50ZXJYICsgMjQwO1xyXG5cclxuICAgIC8vIFNjYWxlIHRoZSB0ZXh0IGFzIHRoZSBhc3NvY2lhdGVkIHZhbHVlIGNoYW5nZXMuIFByZXNlbnQgZm9yIHRoZSBsaWZldGltZSBvZiB0aGUgc2ltOyBubyBuZWVkIHRvIGRpc3Bvc2UuXHJcbiAgICBtb2RlbC5yZXNpc3RhbmNlUHJvcGVydHkubGluayggKCkgPT4ge1xyXG4gICAgICB0aGlzLnJlc2lzdGFuY2VMZXR0ZXJOb2RlLnNldFRyYW5zbGF0aW9uKCByZXNpc3RhbmNlWFBvc2l0aW9uLCAwICk7XHJcbiAgICAgIHRoaXMucmVzaXN0YW5jZUxldHRlck5vZGUuc2V0U2NhbGVNYWduaXR1ZGUoIE9USEVSU19TQ0FMRV9NICogbW9kZWwuZ2V0Tm9ybWFsaXplZFJlc2lzdGFuY2UoKSArIE9USEVSU19TQ0FMRV9CICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gQ3VycmVudCBsZXR0ZXIgaXMgYWRkZWQgZmlyc3Qgc28gdGhhdCB3aGVuIGl0IGdldHMgaHVnZSwgaXQgZG9lc24ndCBjb3ZlciBhbnl0aGluZyB1cC5cclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMuY3VycmVudExldHRlck5vZGUgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMucmVzaXN0YW5jZUxldHRlck5vZGUgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMudm9sdGFnZUxldHRlck5vZGUgKTtcclxuXHJcbiAgICAvLyBtdXN0IGNvbWUgYWZ0ZXIgbGV0dGVycyB0byBiZSBvbiB0b3BcclxuICAgIHRoaXMuYWRkQ2hpbGQoIGVxdWFsc1NpZ25UZXh0ICk7XHJcblxyXG4gICAgLy8gYWRkIGEgbm9kZSBmb3IgYWNjZXNzaWJpbGl0eSB0aGF0IGRlc2NyaWJlcyB0aGUgcmVsYXRpdmUgc2l6ZXMgb2YgdGhlIGxldHRlcnNcclxuICAgIGNvbnN0IGRlc2NyaXB0aW9uTm9kZSA9IG5ldyBOb2RlKCB7IHRhZ05hbWU6ICdwJyB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBkZXNjcmlwdGlvbk5vZGUgKTtcclxuXHJcbiAgICAvLyB3aGVuIGFueSBvZiB0aGUgbW9kZWwgUHJvcGVydGllcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgYWNjZXNzaWJsZSBkZXNjcmlwdGlvblxyXG4gICAgTXVsdGlsaW5rLm11bHRpbGluayggWyBtb2RlbC5jdXJyZW50UHJvcGVydHksIG1vZGVsLnJlc2lzdGFuY2VQcm9wZXJ0eSwgbW9kZWwudm9sdGFnZVByb3BlcnR5IF0sICggY3VycmVudCwgcmVzaXN0YW5jZSwgdm9sdGFnZSApID0+IHtcclxuICAgICAgZGVzY3JpcHRpb25Ob2RlLmlubmVyQ29udGVudCA9IHRoaXMuZ2V0Q29tcGFyYXRpdmVTaXplRGVzY3JpcHRpb24oKTtcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLm11dGF0ZSggb3B0aW9ucyApO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCB0aGUgY29tcGFyYXRpdmUgc2l6ZSBkZXNjcmlwdGlvbiBmb3IgdGhlIGxldHRlcnMsIHNvbWV0aGluZyBsaWtlXHJcbiAgICogXCJMZXR0ZXIgViBpcyBtdWNoIGxhcmdlciB0aGFuIGxldHRlciBJIGFuZCBjb21wYXJhYmxlIHRvIGxldHRlciBSLlwiXHJcbiAgICogVXNlZCBmb3IgYTExeS5cclxuICAgKlxyXG4gICAqIEBwdWJsaWNcclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gICAqL1xyXG4gIGdldENvbXBhcmF0aXZlU2l6ZURlc2NyaXB0aW9uKCkge1xyXG5cclxuICAgIGNvbnN0IHJIZWlnaHQgPSB0aGlzLnJlc2lzdGFuY2VMZXR0ZXJOb2RlLmhlaWdodDtcclxuICAgIGNvbnN0IGlIZWlnaHQgPSB0aGlzLmN1cnJlbnRMZXR0ZXJOb2RlLmhlaWdodDtcclxuICAgIGNvbnN0IHZIZWlnaHQgPSB0aGlzLnZvbHRhZ2VMZXR0ZXJOb2RlLmhlaWdodDtcclxuXHJcbiAgICBjb25zdCB2VG9JID0gdkhlaWdodCAvIGlIZWlnaHQ7XHJcbiAgICBjb25zdCB2VG9SID0gdkhlaWdodCAvIHJIZWlnaHQ7XHJcblxyXG4gICAgLy8gZm9yIGl0ZXJhdGlvblxyXG4gICAgbGV0IGk7XHJcbiAgICBsZXQgZGVzY3JpYmVkUmFuZ2U7XHJcblxyXG4gICAgLy8gbWFwIHRoZSByZWxhdGlvbnMgdG8gdGhlIGNvbXBhcmF0aXZlIGRlc2NyaXB0aW9uc1xyXG4gICAgLy8gbG9vcCB0aHJvdWdoIGFycmF5IG9mIGtleXMgdG8gYXZvaWQgY2xvc3VyZXMgZXZlcnkgdGltZSB0aGlzIGlzIGNhbGxlZFxyXG4gICAgY29uc3QgcmFuZ2VzID0gT2htc0xhd0NvbnN0YW50cy5DT01QQVJBVElWRV9ERVNDUklQVElPTl9SQU5HRVM7XHJcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoIHJhbmdlcyApO1xyXG5cclxuICAgIC8vIGdldCB0aGUgcmVsYXRpdmUgc2l6ZSBkZXNjcmlwdGlvbiBjb21wYXJpbmcgViB0byBJXHJcbiAgICBsZXQgdlRvSURlc2NyaXB0aW9uO1xyXG4gICAgZm9yICggaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICBkZXNjcmliZWRSYW5nZSA9IHJhbmdlc1sga2V5c1sgaSBdIF07XHJcbiAgICAgIGlmICggZGVzY3JpYmVkUmFuZ2UucmFuZ2UuY29udGFpbnMoIHZUb0kgKSApIHtcclxuICAgICAgICB2VG9JRGVzY3JpcHRpb24gPSBkZXNjcmliZWRSYW5nZS5kZXNjcmlwdGlvbjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGdldCB0aGUgcmVsYXRpdmUgc2l6ZSBkZXNjcmlwdGlvbiBjb21wYXJpbmcgViB0byBSXHJcbiAgICBsZXQgdlRvUkRlc2NyaXB0aW9uO1xyXG4gICAgZm9yICggaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICBkZXNjcmliZWRSYW5nZSA9IHJhbmdlc1sga2V5c1sgaSBdIF07XHJcbiAgICAgIGlmICggZGVzY3JpYmVkUmFuZ2UucmFuZ2UuY29udGFpbnMoIHZUb1IgKSApIHtcclxuICAgICAgICB2VG9SRGVzY3JpcHRpb24gPSBkZXNjcmliZWRSYW5nZS5kZXNjcmlwdGlvbjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBTdHJpbmdVdGlscy5maWxsSW4oIHJlbGF0aXZlU2l6ZVBhdHRlcm5TdHJpbmcsIHtcclxuICAgICAgaUNvbXBhcmlzb246IHZUb0lEZXNjcmlwdGlvbixcclxuICAgICAgckNvbXBhcmlzb246IHZUb1JEZXNjcmlwdGlvblxyXG4gICAgfSApO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEFkZCBhbiBpbnZpc2libGUgcmVjdGFuZ2xlIHdpdGggYm91bmRzIHNsaWdodGx5IGxhcmdlciB0aGFuIHRoZSB0ZXh0IHNvIHRoYXQgYXJ0aWZhY3RzIGFyZW4ndCBsZWZ0IG9uIHRoZVxyXG4gKiBzY3JlZW4sIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvb2htcy1sYXcvaXNzdWVzLzI2LlxyXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcclxuICogQHJldHVybnMge1JlY3RhbmdsZX1cclxuICovXHJcbmZ1bmN0aW9uIGdldEFudGlBcnRpZmFjdFJlY3RhbmdsZSggbm9kZSApIHtcclxuICByZXR1cm4gUmVjdGFuZ2xlLmJvdW5kcyggbm9kZS5ib3VuZHMuZGlsYXRlZCggMSApLCB7IGZpbGw6ICd0cmFuc3BhcmVudCcgfSApO1xyXG59XHJcblxyXG5vaG1zTGF3LnJlZ2lzdGVyKCAnRm9ybXVsYU5vZGUnLCBGb3JtdWxhTm9kZSApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybXVsYU5vZGU7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsU0FBUyxNQUFNLGtDQUFrQztBQUN4RCxPQUFPQyxLQUFLLE1BQU0sbUNBQW1DO0FBQ3JELE9BQU9DLFdBQVcsTUFBTSwrQ0FBK0M7QUFDdkUsT0FBT0MsV0FBVyxNQUFNLDRDQUE0QztBQUNwRSxPQUFPQyxlQUFlLE1BQU0sZ0RBQWdEO0FBQzVFLE9BQU9DLFFBQVEsTUFBTSx5Q0FBeUM7QUFDOUQsU0FBU0MsSUFBSSxFQUFFQyxTQUFTLEVBQUVDLElBQUksUUFBUSxtQ0FBbUM7QUFDekUsT0FBT0MsTUFBTSxNQUFNLGlDQUFpQztBQUNwRCxPQUFPQyxPQUFPLE1BQU0sa0JBQWtCO0FBQ3RDLE9BQU9DLGNBQWMsTUFBTSx5QkFBeUI7QUFDcEQsT0FBT0Msa0JBQWtCLE1BQU0sMEJBQTBCO0FBQ3pELE9BQU9DLGdCQUFnQixNQUFNLHdCQUF3QjtBQUVyRCxNQUFNQyxtQkFBbUIsR0FBR0gsY0FBYyxDQUFDSSxhQUFhO0FBQ3hELE1BQU1DLHNCQUFzQixHQUFHTCxjQUFjLENBQUNNLGdCQUFnQjtBQUM5RCxNQUFNQyxtQkFBbUIsR0FBR1AsY0FBYyxDQUFDUSxhQUFhO0FBRXhELE1BQU1DLHlCQUF5QixHQUFHUixrQkFBa0IsQ0FBQ1MsbUJBQW1C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