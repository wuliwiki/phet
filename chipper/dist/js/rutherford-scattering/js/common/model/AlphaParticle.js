// Copyright 2016-2021, University of Colorado Boulder

/**
 * Alpha particle representation - speed, orientation, current/past positions.
 * An alpha particle is initially added to an AtomSpace.  If, during its trajectory, it enters
 * a bounding box of an atom, it will be added to that atom, and its containing atom will
 * cary it through its trajectory until it enters the bounding box of a new atom.
 *
 * @author Dave Schmitz (Schmitzware)
 * @author Jesse Greenberg
 */

import Property from '../../../../axon/js/Property.js';
import Matrix3 from '../../../../dot/js/Matrix3.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import merge from '../../../../phet-core/js/merge.js';
import rutherfordScattering from '../../rutherfordScattering.js';
class AlphaParticle {
  /**
   * @param {Object} [options]
   */
  constructor(options) {
    options = merge({
      speed: 0,
      defaultSpeed: 0,
      position: new Vector2(0, 0),
      // {Vector2} initial position
      orientation: Math.PI / 2 // {number} in radians
    }, options);
    this.speedProperty = new Property(options.speed);
    this.defaultSpeedProperty = new Property(options.defaultSpeed);
    this.positionProperty = new Property(options.position);
    this.orientationProperty = new Property(options.orientation);

    // @public (read-only) - the position coordinates used for trace rendering
    this.positions = [];

    // @public - initial position of the particle in a new bounding box, must be set
    // once a particle enters the bounding box of an atom
    this.initialPosition = new Vector2(0, 0);

    // @public - atom this particle is being deflected by
    this.atom = null;

    // @public - next atom for this particle, set once it has entered a new atom bounding circle
    this.preparedAtom = null;

    // @public {Shape} - shape which is the bounding box for the atom this particle belongs to,
    // set once the particle enters the bounding box of the atom
    this.boundingBox = null;

    // @public - angle of rotation of this particle relative to the vertical in space coordinates (Math.PI)
    // used to adjust coordinates of the atomic bounding box for the trajectory algorithm
    this.rotationAngle = null;

    // @public - same as rotation angle, but prepared as soon as the particle enters the bounding circle
    // of the atom nucleus - applied once particle enters bounding box
    this.preparedRotationAngle;

    // @public - is this particle in the atom space or does it belong to an atom?
    this.isInSpace = true;

    // @public {Shape} - transformed shape for the bounding box of the next atom, set once
    // the particle enters the bounding circle of the atom
    this.preparedBoundingBox = null;

    // @private - save new particle position
    const positionListener = position => {
      this.positions.push(new Vector2(position.x, position.y));
    };
    this.positionProperty.link(positionListener);

    // @private
    this.disposeAlphaParticle = () => {
      this.positionProperty.unlink(positionListener);
    };
  }

  // @public
  dispose() {
    this.disposeAlphaParticle();
  }

  /**
   * Get the direction that this particle is travelling in space coordinates as a vector
   * of unit length.  The vector is created from the latest positions in the array since
   * the particle orientation is bound to the second quadrant.
   * @returns {Vector2}
   * @public
   */
  getDirection() {
    // if there are less than two positions, return a vector pointing in the initial orientation
    if (this.positions.length < 2) {
      const orientation = this.orientationProperty.get();
      return new Vector2(Math.cos(orientation), Math.sin(orientation)).normalized();
    }
    const position1 = this.positions[this.positions.length - 2];
    const position2 = this.positions[this.positions.length - 1];
    const direction = new Vector2(position2.x - position1.x, position2.y - position1.y);
    return direction.normalized();
  }

  /**
   * Set the bounding box for the particle. The bounding box is a rectangle shape of
   * the atom's bounds transformed so that the bottom edge is orthogonal to the orientation
   * of the particle.  The prepared box is set as soon as a particle enters the bounding circle
   * containing the atom.
   * @param {RutherfordAtom} atom
   * @public
   */
  prepareBoundingBox(atom) {
    // get the angle of the vector orthogonal to the direction of movement
    const direction = this.getDirection();
    const perpendicular = direction.perpendicular;
    const rotationAngle = perpendicular.angle;
    this.preparedRotationAngle = rotationAngle;
    const transformedShape = atom.boundingRect.transformed(Matrix3.rotationAroundPoint(rotationAngle, atom.position));
    this.preparedBoundingBox = transformedShape;
  }
} // constructor

rutherfordScattering.register('AlphaParticle', AlphaParticle);
export default AlphaParticle;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQcm9wZXJ0eSIsIk1hdHJpeDMiLCJWZWN0b3IyIiwibWVyZ2UiLCJydXRoZXJmb3JkU2NhdHRlcmluZyIsIkFscGhhUGFydGljbGUiLCJjb25zdHJ1Y3RvciIsIm9wdGlvbnMiLCJzcGVlZCIsImRlZmF1bHRTcGVlZCIsInBvc2l0aW9uIiwib3JpZW50YXRpb24iLCJNYXRoIiwiUEkiLCJzcGVlZFByb3BlcnR5IiwiZGVmYXVsdFNwZWVkUHJvcGVydHkiLCJwb3NpdGlvblByb3BlcnR5Iiwib3JpZW50YXRpb25Qcm9wZXJ0eSIsInBvc2l0aW9ucyIsImluaXRpYWxQb3NpdGlvbiIsImF0b20iLCJwcmVwYXJlZEF0b20iLCJib3VuZGluZ0JveCIsInJvdGF0aW9uQW5nbGUiLCJwcmVwYXJlZFJvdGF0aW9uQW5nbGUiLCJpc0luU3BhY2UiLCJwcmVwYXJlZEJvdW5kaW5nQm94IiwicG9zaXRpb25MaXN0ZW5lciIsInB1c2giLCJ4IiwieSIsImxpbmsiLCJkaXNwb3NlQWxwaGFQYXJ0aWNsZSIsInVubGluayIsImRpc3Bvc2UiLCJnZXREaXJlY3Rpb24iLCJsZW5ndGgiLCJnZXQiLCJjb3MiLCJzaW4iLCJub3JtYWxpemVkIiwicG9zaXRpb24xIiwicG9zaXRpb24yIiwiZGlyZWN0aW9uIiwicHJlcGFyZUJvdW5kaW5nQm94IiwicGVycGVuZGljdWxhciIsImFuZ2xlIiwidHJhbnNmb3JtZWRTaGFwZSIsImJvdW5kaW5nUmVjdCIsInRyYW5zZm9ybWVkIiwicm90YXRpb25Bcm91bmRQb2ludCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiQWxwaGFQYXJ0aWNsZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNi0yMDIxLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBBbHBoYSBwYXJ0aWNsZSByZXByZXNlbnRhdGlvbiAtIHNwZWVkLCBvcmllbnRhdGlvbiwgY3VycmVudC9wYXN0IHBvc2l0aW9ucy5cclxuICogQW4gYWxwaGEgcGFydGljbGUgaXMgaW5pdGlhbGx5IGFkZGVkIHRvIGFuIEF0b21TcGFjZS4gIElmLCBkdXJpbmcgaXRzIHRyYWplY3RvcnksIGl0IGVudGVyc1xyXG4gKiBhIGJvdW5kaW5nIGJveCBvZiBhbiBhdG9tLCBpdCB3aWxsIGJlIGFkZGVkIHRvIHRoYXQgYXRvbSwgYW5kIGl0cyBjb250YWluaW5nIGF0b20gd2lsbFxyXG4gKiBjYXJ5IGl0IHRocm91Z2ggaXRzIHRyYWplY3RvcnkgdW50aWwgaXQgZW50ZXJzIHRoZSBib3VuZGluZyBib3ggb2YgYSBuZXcgYXRvbS5cclxuICpcclxuICogQGF1dGhvciBEYXZlIFNjaG1pdHogKFNjaG1pdHp3YXJlKVxyXG4gKiBAYXV0aG9yIEplc3NlIEdyZWVuYmVyZ1xyXG4gKi9cclxuXHJcbmltcG9ydCBQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1Byb3BlcnR5LmpzJztcclxuaW1wb3J0IE1hdHJpeDMgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL01hdHJpeDMuanMnO1xyXG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVmVjdG9yMi5qcyc7XHJcbmltcG9ydCBtZXJnZSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvbWVyZ2UuanMnO1xyXG5pbXBvcnQgcnV0aGVyZm9yZFNjYXR0ZXJpbmcgZnJvbSAnLi4vLi4vcnV0aGVyZm9yZFNjYXR0ZXJpbmcuanMnO1xyXG5cclxuY2xhc3MgQWxwaGFQYXJ0aWNsZSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvciggb3B0aW9ucyApIHtcclxuXHJcbiAgICBvcHRpb25zID0gbWVyZ2UoIHtcclxuICAgICAgc3BlZWQ6IDAsXHJcbiAgICAgIGRlZmF1bHRTcGVlZDogMCxcclxuICAgICAgcG9zaXRpb246IG5ldyBWZWN0b3IyKCAwLCAwICksICAvLyB7VmVjdG9yMn0gaW5pdGlhbCBwb3NpdGlvblxyXG4gICAgICBvcmllbnRhdGlvbjogTWF0aC5QSSAvIDIgIC8vIHtudW1iZXJ9IGluIHJhZGlhbnNcclxuICAgIH0sIG9wdGlvbnMgKTtcclxuXHJcbiAgICB0aGlzLnNwZWVkUHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIG9wdGlvbnMuc3BlZWQgKTtcclxuICAgIHRoaXMuZGVmYXVsdFNwZWVkUHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIG9wdGlvbnMuZGVmYXVsdFNwZWVkICk7XHJcbiAgICB0aGlzLnBvc2l0aW9uUHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIG9wdGlvbnMucG9zaXRpb24gKTtcclxuICAgIHRoaXMub3JpZW50YXRpb25Qcm9wZXJ0eSA9IG5ldyBQcm9wZXJ0eSggb3B0aW9ucy5vcmllbnRhdGlvbiApO1xyXG5cclxuICAgIC8vIEBwdWJsaWMgKHJlYWQtb25seSkgLSB0aGUgcG9zaXRpb24gY29vcmRpbmF0ZXMgdXNlZCBmb3IgdHJhY2UgcmVuZGVyaW5nXHJcbiAgICB0aGlzLnBvc2l0aW9ucyA9IFtdO1xyXG5cclxuICAgIC8vIEBwdWJsaWMgLSBpbml0aWFsIHBvc2l0aW9uIG9mIHRoZSBwYXJ0aWNsZSBpbiBhIG5ldyBib3VuZGluZyBib3gsIG11c3QgYmUgc2V0XHJcbiAgICAvLyBvbmNlIGEgcGFydGljbGUgZW50ZXJzIHRoZSBib3VuZGluZyBib3ggb2YgYW4gYXRvbVxyXG4gICAgdGhpcy5pbml0aWFsUG9zaXRpb24gPSBuZXcgVmVjdG9yMiggMCwgMCApO1xyXG5cclxuICAgIC8vIEBwdWJsaWMgLSBhdG9tIHRoaXMgcGFydGljbGUgaXMgYmVpbmcgZGVmbGVjdGVkIGJ5XHJcbiAgICB0aGlzLmF0b20gPSBudWxsO1xyXG5cclxuICAgIC8vIEBwdWJsaWMgLSBuZXh0IGF0b20gZm9yIHRoaXMgcGFydGljbGUsIHNldCBvbmNlIGl0IGhhcyBlbnRlcmVkIGEgbmV3IGF0b20gYm91bmRpbmcgY2lyY2xlXHJcbiAgICB0aGlzLnByZXBhcmVkQXRvbSA9IG51bGw7XHJcblxyXG4gICAgLy8gQHB1YmxpYyB7U2hhcGV9IC0gc2hhcGUgd2hpY2ggaXMgdGhlIGJvdW5kaW5nIGJveCBmb3IgdGhlIGF0b20gdGhpcyBwYXJ0aWNsZSBiZWxvbmdzIHRvLFxyXG4gICAgLy8gc2V0IG9uY2UgdGhlIHBhcnRpY2xlIGVudGVycyB0aGUgYm91bmRpbmcgYm94IG9mIHRoZSBhdG9tXHJcbiAgICB0aGlzLmJvdW5kaW5nQm94ID0gbnVsbDtcclxuXHJcbiAgICAvLyBAcHVibGljIC0gYW5nbGUgb2Ygcm90YXRpb24gb2YgdGhpcyBwYXJ0aWNsZSByZWxhdGl2ZSB0byB0aGUgdmVydGljYWwgaW4gc3BhY2UgY29vcmRpbmF0ZXMgKE1hdGguUEkpXHJcbiAgICAvLyB1c2VkIHRvIGFkanVzdCBjb29yZGluYXRlcyBvZiB0aGUgYXRvbWljIGJvdW5kaW5nIGJveCBmb3IgdGhlIHRyYWplY3RvcnkgYWxnb3JpdGhtXHJcbiAgICB0aGlzLnJvdGF0aW9uQW5nbGUgPSBudWxsO1xyXG5cclxuICAgIC8vIEBwdWJsaWMgLSBzYW1lIGFzIHJvdGF0aW9uIGFuZ2xlLCBidXQgcHJlcGFyZWQgYXMgc29vbiBhcyB0aGUgcGFydGljbGUgZW50ZXJzIHRoZSBib3VuZGluZyBjaXJjbGVcclxuICAgIC8vIG9mIHRoZSBhdG9tIG51Y2xldXMgLSBhcHBsaWVkIG9uY2UgcGFydGljbGUgZW50ZXJzIGJvdW5kaW5nIGJveFxyXG4gICAgdGhpcy5wcmVwYXJlZFJvdGF0aW9uQW5nbGU7XHJcblxyXG4gICAgLy8gQHB1YmxpYyAtIGlzIHRoaXMgcGFydGljbGUgaW4gdGhlIGF0b20gc3BhY2Ugb3IgZG9lcyBpdCBiZWxvbmcgdG8gYW4gYXRvbT9cclxuICAgIHRoaXMuaXNJblNwYWNlID0gdHJ1ZTtcclxuXHJcbiAgICAvLyBAcHVibGljIHtTaGFwZX0gLSB0cmFuc2Zvcm1lZCBzaGFwZSBmb3IgdGhlIGJvdW5kaW5nIGJveCBvZiB0aGUgbmV4dCBhdG9tLCBzZXQgb25jZVxyXG4gICAgLy8gdGhlIHBhcnRpY2xlIGVudGVycyB0aGUgYm91bmRpbmcgY2lyY2xlIG9mIHRoZSBhdG9tXHJcbiAgICB0aGlzLnByZXBhcmVkQm91bmRpbmdCb3ggPSBudWxsO1xyXG5cclxuICAgIC8vIEBwcml2YXRlIC0gc2F2ZSBuZXcgcGFydGljbGUgcG9zaXRpb25cclxuICAgIGNvbnN0IHBvc2l0aW9uTGlzdGVuZXIgPSBwb3NpdGlvbiA9PiB7XHJcbiAgICAgIHRoaXMucG9zaXRpb25zLnB1c2goIG5ldyBWZWN0b3IyKCBwb3NpdGlvbi54LCBwb3NpdGlvbi55ICkgKTtcclxuICAgIH07XHJcbiAgICB0aGlzLnBvc2l0aW9uUHJvcGVydHkubGluayggcG9zaXRpb25MaXN0ZW5lciApO1xyXG5cclxuICAgIC8vIEBwcml2YXRlXHJcbiAgICB0aGlzLmRpc3Bvc2VBbHBoYVBhcnRpY2xlID0gKCkgPT4ge1xyXG4gICAgICB0aGlzLnBvc2l0aW9uUHJvcGVydHkudW5saW5rKCBwb3NpdGlvbkxpc3RlbmVyICk7XHJcbiAgICB9O1xyXG5cclxuICB9XHJcblxyXG4gIC8vIEBwdWJsaWNcclxuICBkaXNwb3NlKCkge1xyXG4gICAgdGhpcy5kaXNwb3NlQWxwaGFQYXJ0aWNsZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHRoZSBkaXJlY3Rpb24gdGhhdCB0aGlzIHBhcnRpY2xlIGlzIHRyYXZlbGxpbmcgaW4gc3BhY2UgY29vcmRpbmF0ZXMgYXMgYSB2ZWN0b3JcclxuICAgKiBvZiB1bml0IGxlbmd0aC4gIFRoZSB2ZWN0b3IgaXMgY3JlYXRlZCBmcm9tIHRoZSBsYXRlc3QgcG9zaXRpb25zIGluIHRoZSBhcnJheSBzaW5jZVxyXG4gICAqIHRoZSBwYXJ0aWNsZSBvcmllbnRhdGlvbiBpcyBib3VuZCB0byB0aGUgc2Vjb25kIHF1YWRyYW50LlxyXG4gICAqIEByZXR1cm5zIHtWZWN0b3IyfVxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBnZXREaXJlY3Rpb24oKSB7XHJcblxyXG4gICAgLy8gaWYgdGhlcmUgYXJlIGxlc3MgdGhhbiB0d28gcG9zaXRpb25zLCByZXR1cm4gYSB2ZWN0b3IgcG9pbnRpbmcgaW4gdGhlIGluaXRpYWwgb3JpZW50YXRpb25cclxuICAgIGlmICggdGhpcy5wb3NpdGlvbnMubGVuZ3RoIDwgMiApIHtcclxuICAgICAgY29uc3Qgb3JpZW50YXRpb24gPSB0aGlzLm9yaWVudGF0aW9uUHJvcGVydHkuZ2V0KCk7XHJcbiAgICAgIHJldHVybiBuZXcgVmVjdG9yMiggTWF0aC5jb3MoIG9yaWVudGF0aW9uICksIE1hdGguc2luKCBvcmllbnRhdGlvbiApICkubm9ybWFsaXplZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHBvc2l0aW9uMSA9IHRoaXMucG9zaXRpb25zWyB0aGlzLnBvc2l0aW9ucy5sZW5ndGggLSAyIF07XHJcbiAgICBjb25zdCBwb3NpdGlvbjIgPSB0aGlzLnBvc2l0aW9uc1sgdGhpcy5wb3NpdGlvbnMubGVuZ3RoIC0gMSBdO1xyXG4gICAgY29uc3QgZGlyZWN0aW9uID0gbmV3IFZlY3RvcjIoIHBvc2l0aW9uMi54IC0gcG9zaXRpb24xLngsIHBvc2l0aW9uMi55IC0gcG9zaXRpb24xLnkgKTtcclxuXHJcbiAgICByZXR1cm4gZGlyZWN0aW9uLm5vcm1hbGl6ZWQoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldCB0aGUgYm91bmRpbmcgYm94IGZvciB0aGUgcGFydGljbGUuIFRoZSBib3VuZGluZyBib3ggaXMgYSByZWN0YW5nbGUgc2hhcGUgb2ZcclxuICAgKiB0aGUgYXRvbSdzIGJvdW5kcyB0cmFuc2Zvcm1lZCBzbyB0aGF0IHRoZSBib3R0b20gZWRnZSBpcyBvcnRob2dvbmFsIHRvIHRoZSBvcmllbnRhdGlvblxyXG4gICAqIG9mIHRoZSBwYXJ0aWNsZS4gIFRoZSBwcmVwYXJlZCBib3ggaXMgc2V0IGFzIHNvb24gYXMgYSBwYXJ0aWNsZSBlbnRlcnMgdGhlIGJvdW5kaW5nIGNpcmNsZVxyXG4gICAqIGNvbnRhaW5pbmcgdGhlIGF0b20uXHJcbiAgICogQHBhcmFtIHtSdXRoZXJmb3JkQXRvbX0gYXRvbVxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBwcmVwYXJlQm91bmRpbmdCb3goIGF0b20gKSB7XHJcblxyXG4gICAgLy8gZ2V0IHRoZSBhbmdsZSBvZiB0aGUgdmVjdG9yIG9ydGhvZ29uYWwgdG8gdGhlIGRpcmVjdGlvbiBvZiBtb3ZlbWVudFxyXG4gICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5nZXREaXJlY3Rpb24oKTtcclxuICAgIGNvbnN0IHBlcnBlbmRpY3VsYXIgPSBkaXJlY3Rpb24ucGVycGVuZGljdWxhcjtcclxuXHJcbiAgICBjb25zdCByb3RhdGlvbkFuZ2xlID0gcGVycGVuZGljdWxhci5hbmdsZTtcclxuICAgIHRoaXMucHJlcGFyZWRSb3RhdGlvbkFuZ2xlID0gcm90YXRpb25BbmdsZTtcclxuXHJcbiAgICBjb25zdCB0cmFuc2Zvcm1lZFNoYXBlID0gYXRvbS5ib3VuZGluZ1JlY3QudHJhbnNmb3JtZWQoIE1hdHJpeDMucm90YXRpb25Bcm91bmRQb2ludCggcm90YXRpb25BbmdsZSwgYXRvbS5wb3NpdGlvbiApICk7XHJcbiAgICB0aGlzLnByZXBhcmVkQm91bmRpbmdCb3ggPSB0cmFuc2Zvcm1lZFNoYXBlO1xyXG4gIH1cclxufSAvLyBjb25zdHJ1Y3RvclxyXG5cclxucnV0aGVyZm9yZFNjYXR0ZXJpbmcucmVnaXN0ZXIoICdBbHBoYVBhcnRpY2xlJywgQWxwaGFQYXJ0aWNsZSApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgQWxwaGFQYXJ0aWNsZTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxRQUFRLE1BQU0saUNBQWlDO0FBQ3RELE9BQU9DLE9BQU8sTUFBTSwrQkFBK0I7QUFDbkQsT0FBT0MsT0FBTyxNQUFNLCtCQUErQjtBQUNuRCxPQUFPQyxLQUFLLE1BQU0s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