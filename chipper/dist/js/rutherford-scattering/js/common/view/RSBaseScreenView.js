// Copyright 2016-2022, University of Colorado Boulder

/**
 * Base type for ScreenViews
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import Property from '../../../../axon/js/Property.js';
import Bounds2 from '../../../../dot/js/Bounds2.js';
import Dimension2 from '../../../../dot/js/Dimension2.js';
import ScreenView from '../../../../joist/js/ScreenView.js';
import { Shape } from '../../../../kite/js/imports.js';
import merge from '../../../../phet-core/js/merge.js';
import ModelViewTransform2 from '../../../../phetcommon/js/view/ModelViewTransform2.js';
import PlayPauseButton from '../../../../scenery-phet/js/buttons/PlayPauseButton.js';
import ResetAllButton from '../../../../scenery-phet/js/buttons/ResetAllButton.js';
import StepForwardButton from '../../../../scenery-phet/js/buttons/StepForwardButton.js';
import LaserPointerNode from '../../../../scenery-phet/js/LaserPointerNode.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { Node, Path, Text } from '../../../../scenery/js/imports.js';
import rutherfordScattering from '../../rutherfordScattering.js';
import RutherfordScatteringStrings from '../../RutherfordScatteringStrings.js';
import RSColors from '../RSColors.js';
import RSConstants from '../RSConstants.js';
import BeamNode from './BeamNode.js';
import RSControlPanel from './RSControlPanel.js';
import RSScreenSummaryNode from './RSScreenSummaryNode.js';
import ScaleInfoNode from './ScaleInfoNode.js';
import TargetMaterialNode from './TargetMaterialNode.js';
import TinyBox from './TinyBox.js';

// constants
const alphaParticlesString = RutherfordScatteringStrings.alphaParticles;
const toggleAlphaParticleString = RutherfordScatteringStrings.a11y.toggleAlphaParticle;
const alphaParticlesHelpTextString = RutherfordScatteringStrings.a11y.alphaParticlesHelpText;
const otherViewingStreamingOptionsString = RutherfordScatteringStrings.a11y.otherViewingStreamingOptions;
const otherOptionsDescriptionString = RutherfordScatteringStrings.a11y.otherOptionsDescription;
const GUN_ROTATION = -Math.PI / 2; // so the laser pointer points straight up

class RSBaseScreenView extends ScreenView {
  /**
   * @param {RSBaseModel} model
   * @param {string} scaleString
   * @param {function(RSBaseModel, Property.<boolean>, ModelViewTransform2, Bounds2 ): Node} createSpaceNode
   * @param {Object} [options]
   */
  constructor(model, scaleString, createSpaceNode, options) {
    options = merge({
      includeElectronLegend: true,
      // should the particle legend include an entry for the electron?
      includePlumPuddingLegend: false,
      // should the particle legend include an entry for the plum pudding cloud?
      additionalControlPanels: null,
      // {Panel[]|null} additional control panels, added below the common panels

      // pdom
      screenSummaryContent: new RSScreenSummaryNode()
    }, options);
    super(options);
    // properties
    this.showAlphaTraceProperty = new Property(RSConstants.DEFAULT_SHOW_TRACES);

    // @protected for layout in subtypes, alpha particle gun
    this.gunNode = new LaserPointerNode(model.gun.onProperty, {
      left: this.layoutBounds.left + 75,
      top: this.layoutBounds.centerY + 50,
      bodySize: new Dimension2(75, 68),
      nozzleSize: new Dimension2(20, 60),
      topColor: 'rgb(211, 140, 70)',
      highlightColor: 'rgb(229, 186, 144)',
      bottomColor: 'rgb(106, 70, 35)',
      buttonColor: 'rgb(0, 203, 230)',
      rotation: GUN_ROTATION,
      // pointing up
      buttonRotation: -GUN_ROTATION,
      // so button lighting is correct
      buttonAccessibleName: toggleAlphaParticleString,
      buttonDescriptionContent: alphaParticlesHelpTextString
    });
    this.addChild(this.gunNode);
    const alphaParticlesText = new Text(alphaParticlesString, {
      centerX: this.gunNode.centerX,
      top: this.gunNode.bottom + 15,
      font: new PhetFont(15),
      fill: RSColors.panelLabelColorProperty,
      maxWidth: 210
    });
    this.addChild(alphaParticlesText);

    // @protected, alpha particle beam
    this.beamNode = new BeamNode(model.gun.onProperty, {
      centerX: this.gunNode.centerX,
      bottom: this.gunNode.top,
      fill: RSColors.atomBeamColorProperty
    });
    this.addChild(this.beamNode);

    // @protected for layout in subtypes, alpha particle source target
    this.targetMaterialNode = new TargetMaterialNode({
      centerX: this.beamNode.centerX,
      bottom: this.beamNode.top
    });
    this.addChild(this.targetMaterialNode);

    // tiny box that indicates what will be zoomed
    const tinyBoxNode = new TinyBox({
      centerX: this.targetMaterialNode.centerX,
      centerY: this.targetMaterialNode.centerY
    });
    this.addChild(tinyBoxNode);

    // atom animation space
    const spaceNodeX = this.targetMaterialNode.right + RSConstants.TARGET_SPACE_MARGIN - RSConstants.SPACE_BUFFER;
    const spaceNodeY = RSConstants.PANEL_TOP_MARGIN - RSConstants.SPACE_BUFFER;
    const spaceNodeBounds = new Bounds2(spaceNodeX, spaceNodeY, spaceNodeX + RSConstants.SPACE_NODE_WIDTH, spaceNodeY + RSConstants.SPACE_NODE_HEIGHT);
    const modelViewTransform = ModelViewTransform2.createRectangleInvertedYMapping(model.bounds, spaceNodeBounds);

    // @protected for layout in subtypes
    this.spaceNode = createSpaceNode(model, this.showAlphaTraceProperty, modelViewTransform, spaceNodeBounds);
    this.addChild(this.spaceNode);

    // dashed lines that connect the tiny box and space
    const dashedLines = new Path(new Shape().moveTo(tinyBoxNode.centerX, tinyBoxNode.top).lineTo(this.spaceNode.left, this.spaceNode.top).moveTo(tinyBoxNode.centerX, tinyBoxNode.bottom).lineTo(this.spaceNode.left, this.spaceNode.bottom), {
      stroke: 'grey',
      lineDash: [5, 5]
    });
    this.addChild(dashedLines);

    // @protected, visibility can be manipulated by subtypes - scale info
    this.scaleInfoNode = new ScaleInfoNode(scaleString, this.spaceNode.getWidth(), {
      centerX: this.spaceNode.centerX,
      top: this.spaceNode.bottom + 10
    });
    this.addChild(this.scaleInfoNode);

    // play/pause button
    const playPauseButton = new PlayPauseButton(model.runningProperty, {
      bottom: this.scaleInfoNode.bottom + 60,
      centerX: this.scaleInfoNode.centerX - 25,
      radius: 23
    });
    this.addChild(playPauseButton);

    // step button to manually step the animation.
    const stepButton = new StepForwardButton({
      enabledProperty: DerivedProperty.not(model.runningProperty),
      listener: () => {
        model.manualStep();
      },
      centerY: playPauseButton.centerY,
      centerX: this.scaleInfoNode.centerX + 25,
      radius: 15
    });
    this.addChild(stepButton);

    // reset all button
    const resetAllButton = new ResetAllButton({
      listener: () => {
        this.showAlphaTraceProperty.reset();
        model.reset();
      },
      right: this.layoutBounds.maxX - 48,
      bottom: this.layoutBounds.bottom - 20
    });
    this.addChild(resetAllButton);

    // pdom
    const viewingStreamingOptionsNode = new Node({
      tagName: 'div',
      labelTagName: 'h3',
      labelContent: otherViewingStreamingOptionsString,
      descriptionContent: otherOptionsDescriptionString
    });
    this.addChild(viewingStreamingOptionsNode);
    this.pdomControlAreaNode.pdomOrder = [null, viewingStreamingOptionsNode, playPauseButton, stepButton, resetAllButton];
  }

  /**
   * Create a control panel - used by subtypes to generate a control panel from a set
   * of panels.
   *
   * @param  {array.<Panel>} panels
   * @returns {RSControlPanel}
   * @protected
   */
  createControlPanel(panels) {
    return new RSControlPanel(panels, {
      top: this.spaceNode.top,
      left: this.spaceNode.right + RSConstants.PANEL_SPACE_MARGIN
    });
  }
}
rutherfordScattering.register('RSBaseScreenView', RSBaseScreenView);
export default RSBaseScreenView;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJQcm9wZXJ0eSIsIkJvdW5kczIiLCJEaW1lbnNpb24yIiwiU2NyZWVuVmlldyIsIlNoYXBlIiwibWVyZ2UiLCJNb2RlbFZpZXdUcmFuc2Zvcm0yIiwiUGxheVBhdXNlQnV0dG9uIiwiUmVzZXRBbGxCdXR0b24iLCJTdGVwRm9yd2FyZEJ1dHRvbiIsIkxhc2VyUG9pbnRlck5vZGUiLCJQaGV0Rm9udCIsIk5vZGUiLCJQYXRoIiwiVGV4dCIsInJ1dGhlcmZvcmRTY2F0dGVyaW5nIiwiUnV0aGVyZm9yZFNjYXR0ZXJpbmdTdHJpbmdzIiwiUlNDb2xvcnMiLCJSU0NvbnN0YW50cyIsIkJlYW1Ob2RlIiwiUlNDb250cm9sUGFuZWwiLCJSU1NjcmVlblN1bW1hcnlOb2RlIiwiU2NhbGVJbmZvTm9kZSIsIlRhcmdldE1hdGVyaWFsTm9kZSIsIlRpbnlCb3giLCJhbHBoYVBhcnRpY2xlc1N0cmluZyIsImFscGhhUGFydGljbGVzIiwidG9nZ2xlQWxwaGFQYXJ0aWNsZVN0cmluZyIsImExMXkiLCJ0b2dnbGVBbHBoYVBhcnRpY2xlIiwiYWxwaGFQYXJ0aWNsZXNIZWxwVGV4dFN0cmluZyIsImFscGhhUGFydGljbGVzSGVscFRleHQiLCJvdGhlclZpZXdpbmdTdHJlYW1pbmdPcHRpb25zU3RyaW5nIiwib3RoZXJWaWV3aW5nU3RyZWFtaW5nT3B0aW9ucyIsIm90aGVyT3B0aW9uc0Rlc2NyaXB0aW9uU3RyaW5nIiwib3RoZXJPcHRpb25zRGVzY3JpcHRpb24iLCJHVU5fUk9UQVRJT04iLCJNYXRoIiwiUEkiLCJSU0Jhc2VTY3JlZW5WaWV3IiwiY29uc3RydWN0b3IiLCJtb2RlbCIsInNjYWxlU3RyaW5nIiwiY3JlYXRlU3BhY2VOb2RlIiwib3B0aW9ucyIsImluY2x1ZGVFbGVjdHJvbkxlZ2VuZCIsImluY2x1ZGVQbHVtUHVkZGluZ0xlZ2VuZCIsImFkZGl0aW9uYWxDb250cm9sUGFuZWxzIiwic2NyZWVuU3VtbWFyeUNvbnRlbnQiLCJzaG93QWxwaGFUcmFjZVByb3BlcnR5IiwiREVGQVVMVF9TSE9XX1RSQUNFUyIsImd1bk5vZGUiLCJndW4iLCJvblByb3BlcnR5IiwibGVmdCIsImxheW91dEJvdW5kcyIsInRvcCIsImNlbnRlclkiLCJib2R5U2l6ZSIsIm5venpsZVNpemUiLCJ0b3BDb2xvciIsImhpZ2hsaWdodENvbG9yIiwiYm90dG9tQ29sb3IiLCJidXR0b25Db2xvciIsInJvdGF0aW9uIiwiYnV0dG9uUm90YXRpb24iLCJidXR0b25BY2Nlc3NpYmxlTmFtZSIsImJ1dHRvbkRlc2NyaXB0aW9uQ29udGVudCIsImFkZENoaWxkIiwiYWxwaGFQYXJ0aWNsZXNUZXh0IiwiY2VudGVyWCIsImJvdHRvbSIsImZvbnQiLCJmaWxsIiwicGFuZWxMYWJlbENvbG9yUHJvcGVydHkiLCJtYXhXaWR0aCIsImJlYW1Ob2RlIiwiYXRvbUJlYW1Db2xvclByb3BlcnR5IiwidGFyZ2V0TWF0ZXJpYWxOb2RlIiwidGlueUJveE5vZGUiLCJzcGFjZU5vZGVYIiwicmlnaHQiLCJUQVJHRVRfU1BBQ0VfTUFSR0lOIiwiU1BBQ0VfQlVGRkVSIiwic3BhY2VOb2RlWSIsIlBBTkVMX1RPUF9NQVJHSU4iLCJzcGFjZU5vZGVCb3VuZHMiLCJTUEFDRV9OT0RFX1dJRFRIIiwiU1BBQ0VfTk9ERV9IRUlHSFQiLCJtb2RlbFZpZXdUcmFuc2Zvcm0iLCJjcmVhdGVSZWN0YW5nbGVJbnZlcnRlZFlNYXBwaW5nIiwiYm91bmRzIiwic3BhY2VOb2RlIiwiZGFzaGVkTGluZXMiLCJtb3ZlVG8iLCJsaW5lVG8iLCJzdHJva2UiLCJsaW5lRGFzaCIsInNjYWxlSW5mb05vZGUiLCJnZXRXaWR0aCIsInBsYXlQYXVzZUJ1dHRvbiIsInJ1bm5pbmdQcm9wZXJ0eSIsInJhZGl1cyIsInN0ZXBCdXR0b24iLCJlbmFibGVkUHJvcGVydHkiLCJub3QiLCJsaXN0ZW5lciIsIm1hbnVhbFN0ZXAiLCJyZXNldEFsbEJ1dHRvbiIsInJlc2V0IiwibWF4WCIsInZpZXdpbmdTdHJlYW1pbmdPcHRpb25zTm9kZSIsInRhZ05hbWUiLCJsYWJlbFRhZ05hbWUiLCJsYWJlbENvbnRlbnQiLCJkZXNjcmlwdGlvbkNvbnRlbnQiLCJwZG9tQ29udHJvbEFyZWFOb2RlIiwicGRvbU9yZGVyIiwiY3JlYXRlQ29udHJvbFBhbmVsIiwicGFuZWxzIiwiUEFORUxfU1BBQ0VfTUFSR0lOIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJSU0Jhc2VTY3JlZW5WaWV3LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE2LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIEJhc2UgdHlwZSBmb3IgU2NyZWVuVmlld3NcclxuICpcclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICovXHJcblxyXG5pbXBvcnQgRGVyaXZlZFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvRGVyaXZlZFByb3BlcnR5LmpzJztcclxuaW1wb3J0IFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgQm91bmRzMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvQm91bmRzMi5qcyc7XHJcbmltcG9ydCBEaW1lbnNpb24yIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9EaW1lbnNpb24yLmpzJztcclxuaW1wb3J0IFNjcmVlblZpZXcgZnJvbSAnLi4vLi4vLi4vLi4vam9pc3QvanMvU2NyZWVuVmlldy5qcyc7XHJcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSAnLi4vLi4vLi4vLi4va2l0ZS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IG1lcmdlIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9tZXJnZS5qcyc7XHJcbmltcG9ydCBNb2RlbFZpZXdUcmFuc2Zvcm0yIGZyb20gJy4uLy4uLy4uLy4uL3BoZXRjb21tb24vanMvdmlldy9Nb2RlbFZpZXdUcmFuc2Zvcm0yLmpzJztcclxuaW1wb3J0IFBsYXlQYXVzZUJ1dHRvbiBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvYnV0dG9ucy9QbGF5UGF1c2VCdXR0b24uanMnO1xyXG5pbXBvcnQgUmVzZXRBbGxCdXR0b24gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL2J1dHRvbnMvUmVzZXRBbGxCdXR0b24uanMnO1xyXG5pbXBvcnQgU3RlcEZvcndhcmRCdXR0b24gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL2J1dHRvbnMvU3RlcEZvcndhcmRCdXR0b24uanMnO1xyXG5pbXBvcnQgTGFzZXJQb2ludGVyTm9kZSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvTGFzZXJQb2ludGVyTm9kZS5qcyc7XHJcbmltcG9ydCBQaGV0Rm9udCBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvUGhldEZvbnQuanMnO1xyXG5pbXBvcnQgeyBOb2RlLCBQYXRoLCBUZXh0IH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IHJ1dGhlcmZvcmRTY2F0dGVyaW5nIGZyb20gJy4uLy4uL3J1dGhlcmZvcmRTY2F0dGVyaW5nLmpzJztcclxuaW1wb3J0IFJ1dGhlcmZvcmRTY2F0dGVyaW5nU3RyaW5ncyBmcm9tICcuLi8uLi9SdXRoZXJmb3JkU2NhdHRlcmluZ1N0cmluZ3MuanMnO1xyXG5pbXBvcnQgUlNDb2xvcnMgZnJvbSAnLi4vUlNDb2xvcnMuanMnO1xyXG5pbXBvcnQgUlNDb25zdGFudHMgZnJvbSAnLi4vUlNDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgQmVhbU5vZGUgZnJvbSAnLi9CZWFtTm9kZS5qcyc7XHJcbmltcG9ydCBSU0NvbnRyb2xQYW5lbCBmcm9tICcuL1JTQ29udHJvbFBhbmVsLmpzJztcclxuaW1wb3J0IFJTU2NyZWVuU3VtbWFyeU5vZGUgZnJvbSAnLi9SU1NjcmVlblN1bW1hcnlOb2RlLmpzJztcclxuaW1wb3J0IFNjYWxlSW5mb05vZGUgZnJvbSAnLi9TY2FsZUluZm9Ob2RlLmpzJztcclxuaW1wb3J0IFRhcmdldE1hdGVyaWFsTm9kZSBmcm9tICcuL1RhcmdldE1hdGVyaWFsTm9kZS5qcyc7XHJcbmltcG9ydCBUaW55Qm94IGZyb20gJy4vVGlueUJveC5qcyc7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgYWxwaGFQYXJ0aWNsZXNTdHJpbmcgPSBSdXRoZXJmb3JkU2NhdHRlcmluZ1N0cmluZ3MuYWxwaGFQYXJ0aWNsZXM7XHJcbmNvbnN0IHRvZ2dsZUFscGhhUGFydGljbGVTdHJpbmcgPSBSdXRoZXJmb3JkU2NhdHRlcmluZ1N0cmluZ3MuYTExeS50b2dnbGVBbHBoYVBhcnRpY2xlO1xyXG5jb25zdCBhbHBoYVBhcnRpY2xlc0hlbHBUZXh0U3RyaW5nID0gUnV0aGVyZm9yZFNjYXR0ZXJpbmdTdHJpbmdzLmExMXkuYWxwaGFQYXJ0aWNsZXNIZWxwVGV4dDtcclxuXHJcbmNvbnN0IG90aGVyVmlld2luZ1N0cmVhbWluZ09wdGlvbnNTdHJpbmcgPSBSdXRoZXJmb3JkU2NhdHRlcmluZ1N0cmluZ3MuYTExeS5vdGhlclZpZXdpbmdTdHJlYW1pbmdPcHRpb25zO1xyXG5jb25zdCBvdGhlck9wdGlvbnNEZXNjcmlwdGlvblN0cmluZyA9IFJ1dGhlcmZvcmRTY2F0dGVyaW5nU3RyaW5ncy5hMTF5Lm90aGVyT3B0aW9uc0Rlc2NyaXB0aW9uO1xyXG5cclxuY29uc3QgR1VOX1JPVEFUSU9OID0gLU1hdGguUEkgLyAyOyAvLyBzbyB0aGUgbGFzZXIgcG9pbnRlciBwb2ludHMgc3RyYWlnaHQgdXBcclxuXHJcbmNsYXNzIFJTQmFzZVNjcmVlblZpZXcgZXh0ZW5kcyBTY3JlZW5WaWV3IHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtSU0Jhc2VNb2RlbH0gbW9kZWxcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2NhbGVTdHJpbmdcclxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKFJTQmFzZU1vZGVsLCBQcm9wZXJ0eS48Ym9vbGVhbj4sIE1vZGVsVmlld1RyYW5zZm9ybTIsIEJvdW5kczIgKTogTm9kZX0gY3JlYXRlU3BhY2VOb2RlXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBtb2RlbCwgc2NhbGVTdHJpbmcsIGNyZWF0ZVNwYWNlTm9kZSwgb3B0aW9ucyApIHtcclxuXHJcbiAgICBvcHRpb25zID0gbWVyZ2UoIHtcclxuICAgICAgaW5jbHVkZUVsZWN0cm9uTGVnZW5kOiB0cnVlLCAvLyBzaG91bGQgdGhlIHBhcnRpY2xlIGxlZ2VuZCBpbmNsdWRlIGFuIGVudHJ5IGZvciB0aGUgZWxlY3Ryb24/XHJcbiAgICAgIGluY2x1ZGVQbHVtUHVkZGluZ0xlZ2VuZDogZmFsc2UsIC8vIHNob3VsZCB0aGUgcGFydGljbGUgbGVnZW5kIGluY2x1ZGUgYW4gZW50cnkgZm9yIHRoZSBwbHVtIHB1ZGRpbmcgY2xvdWQ/XHJcbiAgICAgIGFkZGl0aW9uYWxDb250cm9sUGFuZWxzOiBudWxsLCAvLyB7UGFuZWxbXXxudWxsfSBhZGRpdGlvbmFsIGNvbnRyb2wgcGFuZWxzLCBhZGRlZCBiZWxvdyB0aGUgY29tbW9uIHBhbmVsc1xyXG5cclxuICAgICAgLy8gcGRvbVxyXG4gICAgICBzY3JlZW5TdW1tYXJ5Q29udGVudDogbmV3IFJTU2NyZWVuU3VtbWFyeU5vZGUoKVxyXG4gICAgfSwgb3B0aW9ucyApO1xyXG5cclxuICAgIHN1cGVyKCBvcHRpb25zICk7XHJcbiAgICAvLyBwcm9wZXJ0aWVzXHJcbiAgICB0aGlzLnNob3dBbHBoYVRyYWNlUHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIFJTQ29uc3RhbnRzLkRFRkFVTFRfU0hPV19UUkFDRVMgKTtcclxuXHJcbiAgICAvLyBAcHJvdGVjdGVkIGZvciBsYXlvdXQgaW4gc3VidHlwZXMsIGFscGhhIHBhcnRpY2xlIGd1blxyXG4gICAgdGhpcy5ndW5Ob2RlID0gbmV3IExhc2VyUG9pbnRlck5vZGUoIG1vZGVsLmd1bi5vblByb3BlcnR5LCB7XHJcbiAgICAgIGxlZnQ6IHRoaXMubGF5b3V0Qm91bmRzLmxlZnQgKyA3NSxcclxuICAgICAgdG9wOiB0aGlzLmxheW91dEJvdW5kcy5jZW50ZXJZICsgNTAsXHJcbiAgICAgIGJvZHlTaXplOiBuZXcgRGltZW5zaW9uMiggNzUsIDY4ICksXHJcbiAgICAgIG5venpsZVNpemU6IG5ldyBEaW1lbnNpb24yKCAyMCwgNjAgKSxcclxuICAgICAgdG9wQ29sb3I6ICdyZ2IoMjExLCAxNDAsIDcwKScsXHJcbiAgICAgIGhpZ2hsaWdodENvbG9yOiAncmdiKDIyOSwgMTg2LCAxNDQpJyxcclxuICAgICAgYm90dG9tQ29sb3I6ICdyZ2IoMTA2LCA3MCwgMzUpJyxcclxuICAgICAgYnV0dG9uQ29sb3I6ICdyZ2IoMCwgMjAzLCAyMzApJyxcclxuICAgICAgcm90YXRpb246IEdVTl9ST1RBVElPTiwgLy8gcG9pbnRpbmcgdXBcclxuICAgICAgYnV0dG9uUm90YXRpb246IC1HVU5fUk9UQVRJT04sIC8vIHNvIGJ1dHRvbiBsaWdodGluZyBpcyBjb3JyZWN0XHJcbiAgICAgIGJ1dHRvbkFjY2Vzc2libGVOYW1lOiB0b2dnbGVBbHBoYVBhcnRpY2xlU3RyaW5nLFxyXG4gICAgICBidXR0b25EZXNjcmlwdGlvbkNvbnRlbnQ6IGFscGhhUGFydGljbGVzSGVscFRleHRTdHJpbmdcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMuZ3VuTm9kZSApO1xyXG5cclxuICAgIGNvbnN0IGFscGhhUGFydGljbGVzVGV4dCA9IG5ldyBUZXh0KCBhbHBoYVBhcnRpY2xlc1N0cmluZywge1xyXG4gICAgICBjZW50ZXJYOiB0aGlzLmd1bk5vZGUuY2VudGVyWCxcclxuICAgICAgdG9wOiB0aGlzLmd1bk5vZGUuYm90dG9tICsgMTUsXHJcbiAgICAgIGZvbnQ6IG5ldyBQaGV0Rm9udCggMTUgKSxcclxuICAgICAgZmlsbDogUlNDb2xvcnMucGFuZWxMYWJlbENvbG9yUHJvcGVydHksXHJcbiAgICAgIG1heFdpZHRoOiAyMTBcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIGFscGhhUGFydGljbGVzVGV4dCApO1xyXG5cclxuICAgIC8vIEBwcm90ZWN0ZWQsIGFscGhhIHBhcnRpY2xlIGJlYW1cclxuICAgIHRoaXMuYmVhbU5vZGUgPSBuZXcgQmVhbU5vZGUoIG1vZGVsLmd1bi5vblByb3BlcnR5LCB7XHJcbiAgICAgIGNlbnRlclg6IHRoaXMuZ3VuTm9kZS5jZW50ZXJYLFxyXG4gICAgICBib3R0b206IHRoaXMuZ3VuTm9kZS50b3AsXHJcbiAgICAgIGZpbGw6IFJTQ29sb3JzLmF0b21CZWFtQ29sb3JQcm9wZXJ0eVxyXG4gICAgfSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggdGhpcy5iZWFtTm9kZSApO1xyXG5cclxuICAgIC8vIEBwcm90ZWN0ZWQgZm9yIGxheW91dCBpbiBzdWJ0eXBlcywgYWxwaGEgcGFydGljbGUgc291cmNlIHRhcmdldFxyXG4gICAgdGhpcy50YXJnZXRNYXRlcmlhbE5vZGUgPSBuZXcgVGFyZ2V0TWF0ZXJpYWxOb2RlKCB7XHJcbiAgICAgIGNlbnRlclg6IHRoaXMuYmVhbU5vZGUuY2VudGVyWCxcclxuICAgICAgYm90dG9tOiB0aGlzLmJlYW1Ob2RlLnRvcFxyXG4gICAgfSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggdGhpcy50YXJnZXRNYXRlcmlhbE5vZGUgKTtcclxuXHJcbiAgICAvLyB0aW55IGJveCB0aGF0IGluZGljYXRlcyB3aGF0IHdpbGwgYmUgem9vbWVkXHJcbiAgICBjb25zdCB0aW55Qm94Tm9kZSA9IG5ldyBUaW55Qm94KCB7XHJcbiAgICAgIGNlbnRlclg6IHRoaXMudGFyZ2V0TWF0ZXJpYWxOb2RlLmNlbnRlclgsXHJcbiAgICAgIGNlbnRlclk6IHRoaXMudGFyZ2V0TWF0ZXJpYWxOb2RlLmNlbnRlcllcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRpbnlCb3hOb2RlICk7XHJcblxyXG4gICAgLy8gYXRvbSBhbmltYXRpb24gc3BhY2VcclxuICAgIGNvbnN0IHNwYWNlTm9kZVggPSB0aGlzLnRhcmdldE1hdGVyaWFsTm9kZS5yaWdodCArIFJTQ29uc3RhbnRzLlRBUkdFVF9TUEFDRV9NQVJHSU4gLSBSU0NvbnN0YW50cy5TUEFDRV9CVUZGRVI7XHJcbiAgICBjb25zdCBzcGFjZU5vZGVZID0gUlNDb25zdGFudHMuUEFORUxfVE9QX01BUkdJTiAtIFJTQ29uc3RhbnRzLlNQQUNFX0JVRkZFUjtcclxuICAgIGNvbnN0IHNwYWNlTm9kZUJvdW5kcyA9IG5ldyBCb3VuZHMyKCBzcGFjZU5vZGVYLCBzcGFjZU5vZGVZLFxyXG4gICAgICBzcGFjZU5vZGVYICsgUlNDb25zdGFudHMuU1BBQ0VfTk9ERV9XSURUSCxcclxuICAgICAgc3BhY2VOb2RlWSArIFJTQ29uc3RhbnRzLlNQQUNFX05PREVfSEVJR0hUICk7XHJcbiAgICBjb25zdCBtb2RlbFZpZXdUcmFuc2Zvcm0gPSBNb2RlbFZpZXdUcmFuc2Zvcm0yLmNyZWF0ZVJlY3RhbmdsZUludmVydGVkWU1hcHBpbmcoIG1vZGVsLmJvdW5kcywgc3BhY2VOb2RlQm91bmRzICk7XHJcblxyXG4gICAgLy8gQHByb3RlY3RlZCBmb3IgbGF5b3V0IGluIHN1YnR5cGVzXHJcbiAgICB0aGlzLnNwYWNlTm9kZSA9IGNyZWF0ZVNwYWNlTm9kZSggbW9kZWwsIHRoaXMuc2hvd0FscGhhVHJhY2VQcm9wZXJ0eSwgbW9kZWxWaWV3VHJhbnNmb3JtLCBzcGFjZU5vZGVCb3VuZHMgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMuc3BhY2VOb2RlICk7XHJcblxyXG4gICAgLy8gZGFzaGVkIGxpbmVzIHRoYXQgY29ubmVjdCB0aGUgdGlueSBib3ggYW5kIHNwYWNlXHJcbiAgICBjb25zdCBkYXNoZWRMaW5lcyA9IG5ldyBQYXRoKCBuZXcgU2hhcGUoKVxyXG4gICAgICAubW92ZVRvKCB0aW55Qm94Tm9kZS5jZW50ZXJYLCB0aW55Qm94Tm9kZS50b3AgKVxyXG4gICAgICAubGluZVRvKCB0aGlzLnNwYWNlTm9kZS5sZWZ0LCB0aGlzLnNwYWNlTm9kZS50b3AgKVxyXG4gICAgICAubW92ZVRvKCB0aW55Qm94Tm9kZS5jZW50ZXJYLCB0aW55Qm94Tm9kZS5ib3R0b20gKVxyXG4gICAgICAubGluZVRvKCB0aGlzLnNwYWNlTm9kZS5sZWZ0LCB0aGlzLnNwYWNlTm9kZS5ib3R0b20gKSwge1xyXG4gICAgICBzdHJva2U6ICdncmV5JyxcclxuICAgICAgbGluZURhc2g6IFsgNSwgNSBdXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBkYXNoZWRMaW5lcyApO1xyXG5cclxuICAgIC8vIEBwcm90ZWN0ZWQsIHZpc2liaWxpdHkgY2FuIGJlIG1hbmlwdWxhdGVkIGJ5IHN1YnR5cGVzIC0gc2NhbGUgaW5mb1xyXG4gICAgdGhpcy5zY2FsZUluZm9Ob2RlID0gbmV3IFNjYWxlSW5mb05vZGUoIHNjYWxlU3RyaW5nLCB0aGlzLnNwYWNlTm9kZS5nZXRXaWR0aCgpLCB7XHJcbiAgICAgIGNlbnRlclg6IHRoaXMuc3BhY2VOb2RlLmNlbnRlclgsXHJcbiAgICAgIHRvcDogdGhpcy5zcGFjZU5vZGUuYm90dG9tICsgMTBcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMuc2NhbGVJbmZvTm9kZSApO1xyXG5cclxuICAgIC8vIHBsYXkvcGF1c2UgYnV0dG9uXHJcbiAgICBjb25zdCBwbGF5UGF1c2VCdXR0b24gPSBuZXcgUGxheVBhdXNlQnV0dG9uKCBtb2RlbC5ydW5uaW5nUHJvcGVydHksIHtcclxuICAgICAgYm90dG9tOiB0aGlzLnNjYWxlSW5mb05vZGUuYm90dG9tICsgNjAsXHJcbiAgICAgIGNlbnRlclg6IHRoaXMuc2NhbGVJbmZvTm9kZS5jZW50ZXJYIC0gMjUsXHJcbiAgICAgIHJhZGl1czogMjNcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHBsYXlQYXVzZUJ1dHRvbiApO1xyXG5cclxuICAgIC8vIHN0ZXAgYnV0dG9uIHRvIG1hbnVhbGx5IHN0ZXAgdGhlIGFuaW1hdGlvbi5cclxuICAgIGNvbnN0IHN0ZXBCdXR0b24gPSBuZXcgU3RlcEZvcndhcmRCdXR0b24oIHtcclxuICAgICAgZW5hYmxlZFByb3BlcnR5OiBEZXJpdmVkUHJvcGVydHkubm90KCBtb2RlbC5ydW5uaW5nUHJvcGVydHkgKSxcclxuICAgICAgbGlzdGVuZXI6ICgpID0+IHsgbW9kZWwubWFudWFsU3RlcCgpOyB9LFxyXG4gICAgICBjZW50ZXJZOiBwbGF5UGF1c2VCdXR0b24uY2VudGVyWSxcclxuICAgICAgY2VudGVyWDogdGhpcy5zY2FsZUluZm9Ob2RlLmNlbnRlclggKyAyNSxcclxuICAgICAgcmFkaXVzOiAxNVxyXG4gICAgfSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggc3RlcEJ1dHRvbiApO1xyXG5cclxuICAgIC8vIHJlc2V0IGFsbCBidXR0b25cclxuICAgIGNvbnN0IHJlc2V0QWxsQnV0dG9uID0gbmV3IFJlc2V0QWxsQnV0dG9uKCB7XHJcbiAgICAgIGxpc3RlbmVyOiAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zaG93QWxwaGFUcmFjZVByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICAgICAgbW9kZWwucmVzZXQoKTtcclxuICAgICAgfSxcclxuICAgICAgcmlnaHQ6IHRoaXMubGF5b3V0Qm91bmRzLm1heFggLSA0OCxcclxuICAgICAgYm90dG9tOiB0aGlzLmxheW91dEJvdW5kcy5ib3R0b20gLSAyMFxyXG4gICAgfSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggcmVzZXRBbGxCdXR0b24gKTtcclxuXHJcbiAgICAvLyBwZG9tXHJcbiAgICBjb25zdCB2aWV3aW5nU3RyZWFtaW5nT3B0aW9uc05vZGUgPSBuZXcgTm9kZSgge1xyXG4gICAgICB0YWdOYW1lOiAnZGl2JyxcclxuICAgICAgbGFiZWxUYWdOYW1lOiAnaDMnLFxyXG4gICAgICBsYWJlbENvbnRlbnQ6IG90aGVyVmlld2luZ1N0cmVhbWluZ09wdGlvbnNTdHJpbmcsXHJcbiAgICAgIGRlc2NyaXB0aW9uQ29udGVudDogb3RoZXJPcHRpb25zRGVzY3JpcHRpb25TdHJpbmdcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHZpZXdpbmdTdHJlYW1pbmdPcHRpb25zTm9kZSApO1xyXG5cclxuICAgIHRoaXMucGRvbUNvbnRyb2xBcmVhTm9kZS5wZG9tT3JkZXIgPSBbIG51bGwsIHZpZXdpbmdTdHJlYW1pbmdPcHRpb25zTm9kZSwgcGxheVBhdXNlQnV0dG9uLCBzdGVwQnV0dG9uLCByZXNldEFsbEJ1dHRvbiBdO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIGEgY29udHJvbCBwYW5lbCAtIHVzZWQgYnkgc3VidHlwZXMgdG8gZ2VuZXJhdGUgYSBjb250cm9sIHBhbmVsIGZyb20gYSBzZXRcclxuICAgKiBvZiBwYW5lbHMuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gIHthcnJheS48UGFuZWw+fSBwYW5lbHNcclxuICAgKiBAcmV0dXJucyB7UlNDb250cm9sUGFuZWx9XHJcbiAgICogQHByb3RlY3RlZFxyXG4gICAqL1xyXG4gIGNyZWF0ZUNvbnRyb2xQYW5lbCggcGFuZWxzICkge1xyXG4gICAgcmV0dXJuIG5ldyBSU0NvbnRyb2xQYW5lbCggcGFuZWxzLCB7XHJcbiAgICAgIHRvcDogdGhpcy5zcGFjZU5vZGUudG9wLFxyXG4gICAgICBsZWZ0OiB0aGlzLnNwYWNlTm9kZS5yaWdodCArIFJTQ29uc3RhbnRzLlBBTkVMX1NQQUNFX01BUkdJTlxyXG4gICAgfSApO1xyXG4gIH1cclxufVxyXG5cclxucnV0aGVyZm9yZFNjYXR0ZXJpbmcucmVnaXN0ZXIoICdSU0Jhc2VTY3JlZW5WaWV3JywgUlNCYXNlU2NyZWVuVmlldyApO1xyXG5leHBvcnQgZGVmYXVsdCBSU0Jhc2VTY3JlZW5WaWV3OyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxlQUFlLE1BQU0sd0NBQXdDO0FBQ3BFLE9BQU9DLFFBQVEsTUFBTSxpQ0FB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