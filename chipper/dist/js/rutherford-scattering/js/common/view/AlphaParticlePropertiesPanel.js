// Copyright 2016-2022, University of Colorado Boulder

/**
 * Control panel for the "Ruthorford Scattering" sim. Allows the user to adjust the energy of alpha particles
 * being simulated.  Content is created by AlphaParticlePropertiesPanelContent below since the Content
 * is created and destroyed when the scene or color profile changes.
 *
 * @author Dave Schmitz (Schmitzware)
 */

import Dimension2 from '../../../../dot/js/Dimension2.js';
import Range from '../../../../dot/js/Range.js';
import merge from '../../../../phet-core/js/merge.js';
import { HBox, HStrut, Rectangle, Text, VBox, VStrut } from '../../../../scenery/js/imports.js';
import Checkbox from '../../../../sun/js/Checkbox.js';
import HSlider from '../../../../sun/js/HSlider.js';
import Panel from '../../../../sun/js/Panel.js';
import rutherfordScattering from '../../rutherfordScattering.js';
import RutherfordScatteringStrings from '../../RutherfordScatteringStrings.js';
import RSColors from '../RSColors.js';
import RSConstants from '../RSConstants.js';

// constants
const alphaParticlePropertiesString = RutherfordScatteringStrings.alphaParticleProperties;
const energyString = RutherfordScatteringStrings.energy;
const maxEnergyString = RutherfordScatteringStrings.maxEnergy;
const minEnergyString = RutherfordScatteringStrings.minEnergy;
const showTracesString = RutherfordScatteringStrings.showTraces;
const alphaParticleSettingsString = RutherfordScatteringStrings.a11y.alphaParticleSettings;
const energySliderDescriptionString = RutherfordScatteringStrings.a11y.energySliderDescription;
const tracesString = RutherfordScatteringStrings.a11y.traces;
const traceCheckboxDescriptionString = RutherfordScatteringStrings.a11y.traceCheckboxDescription;

// global, tracks fingers on the slider for multitouch support
// must persist beyond individual panel instances so multitouch is supported
// when a panel is created or destroyed
const FINGER_TRACKER = {};
class AlphaParticlePropertiesPanel extends Panel {
  /**
   * @param {AlphaParticlePropertiesPanelContent} content - content for the panel
   * @param {Object} [options]
   */
  constructor(content, options) {
    // the title for the panel
    const alphaParticlePropertiesText = new Text(alphaParticlePropertiesString, {
      font: RSConstants.PANEL_TITLE_FONT,
      fontWeight: 'bold',
      fill: RSColors.panelTitleColorProperty,
      maxWidth: 215
    });
    const contentVBox = new VBox({
      children: [alphaParticlePropertiesText, content],
      align: 'left',
      spacing: RSConstants.PANEL_CHILD_SPACING
    });
    options = merge({
      xMargin: RSConstants.PANEL_X_MARGIN,
      yMargin: 8,
      minWidth: RSConstants.PANEL_MIN_WIDTH,
      maxWidth: RSConstants.PANEL_MAX_WIDTH,
      align: 'center',
      fill: RSColors.panelColorProperty,
      stroke: RSColors.panelBorderColorProperty,
      // pdom
      tagName: 'div',
      labelTagName: 'h3',
      labelContent: alphaParticleSettingsString
    }, options);
    super(contentVBox, options);

    // @private - make panel eligible for garbage collection
    this.disposeAlphaParticlePropertiesPanel = () => {
      content.dispose();
    };
  }

  /**
   * Create the panel content for this panel.
   *
   * @param  {Property.<boolean>} energyInteractionProperty
   * @param  {Property.<boolean>} alphaParticleEnergyProperty
   * @param  {Property.<boolean>} showTracesProperty
   * @param  {Object} [options]
   * @returns {Node}
   * @public
   */
  static createPanelContent(energyInteractionProperty, alphaParticleEnergyProperty, showTracesProperty, options) {
    return new AlphaParticlePropertiesPanelContent(energyInteractionProperty, alphaParticleEnergyProperty, showTracesProperty, options);
  }

  /**
   * dispose - this panel is created and destroyed every time the scene and color scheme changes
   * so it is important to fully dispose of all elements.
   * @public
   */
  dispose() {
    this.disposeAlphaParticlePropertiesPanel();
    super.dispose();
  }
}
rutherfordScattering.register('AlphaParticlePropertiesPanel', AlphaParticlePropertiesPanel);
class AlphaParticlePropertiesPanelContent extends VBox {
  /**
   * @param  {Property.<boolean>} energyInteractionProperty
   * @param  {Property.<boolean>} alphaParticleEnergyProperty
   * @param  {Property.<boolean>} showTracesProperty
   * @param  {Object} [options]
   */
  constructor(energyInteractionProperty, alphaParticleEnergyProperty, showTracesProperty, options) {
    options = merge({
      xMargin: 15,
      yMargin: 8,
      minWidth: RSConstants.PANEL_MIN_WIDTH,
      maxWidth: RSConstants.PANEL_MAX_WIDTH,
      align: 'left',
      fill: RSColors.panelColorProperty,
      stroke: RSColors.panelBorderColorProperty
    }, options);
    const energyText = new Text(energyString, {
      font: RSConstants.PANEL_PROPERTY_FONT,
      fontWeight: 'bold',
      fill: RSColors.panelLabelColorProperty,
      maxWidth: 210
    });
    const minEnergyText = new Text(minEnergyString, {
      font: RSConstants.PANEL_TICK_FONT,
      fill: RSColors.panelSliderLabelColorProperty,
      maxWidth: options.maxWidth / 5,
      pickable: false
    });
    const maxEnergyText = new Text(maxEnergyString, {
      font: RSConstants.PANEL_TICK_FONT,
      fill: RSColors.panelSliderLabelColorProperty,
      maxWidth: options.maxWidth / 5,
      pickable: false
    });

    // slider title
    const energyTextStrut = new HStrut(options.minWidth * 0.05);
    const energyTitleBox = new HBox({
      children: [energyTextStrut, energyText]
    });

    /**
     * Track fingers for multitouch, adding a finger count to the slider and setting the proper
     * interaction properties.
     */
    const addFinger = elementID => {
      energyInteractionProperty.set(true);
      if (!FINGER_TRACKER[elementID] && FINGER_TRACKER[elementID] !== 0) {
        FINGER_TRACKER[elementID] = 1; // first time finger is down on this thumb
      } else {
        FINGER_TRACKER[elementID]++;
      }
    };

    /**
     * Remove a finger from an element for multitouch support, removing a finger count from a particular element
     * and setting the interaction properties appropriately.
     */
    const removeFinger = elementID => {
      FINGER_TRACKER[elementID]--;
      assert && assert(FINGER_TRACKER[elementID] >= 0, 'at least 0 fingers must be using the slider');
      if (FINGER_TRACKER[elementID] === 0) {
        energyInteractionProperty.set(false);
      }
    };

    // particle engery slider
    const sliderWidth = options.minWidth * 0.75;
    const particleEnergySlider = new HSlider(alphaParticleEnergyProperty, new Range(RSConstants.MIN_ALPHA_ENERGY, RSConstants.MAX_ALPHA_ENERGY), {
      trackFill: RSColors.panelSliderLabelColorProperty,
      trackStroke: RSColors.panelSliderLabelColorProperty,
      majorTickStroke: RSColors.panelSliderLabelColorProperty,
      majorTickLength: 15,
      tickLabelSpacing: 2,
      trackSize: new Dimension2(sliderWidth, 1),
      thumbSize: RSConstants.PANEL_SLIDER_THUMB_DIMENSION,
      thumbTouchAreaXDilation: 15,
      thumbTouchAreaYDilation: 12,
      startDrag: () => {
        // called when the pointer is pressed
        addFinger('particleEnergySlider');
      },
      endDrag: () => {
        // called when the pointer is released
        removeFinger('particleEnergySlider');
      },
      // pdom
      keyboardStep: 5,
      shiftKeyboardStep: 1,
      pageKeyboardStep: 10,
      labelContent: energyString,
      labelTagName: 'label',
      descriptionContent: energySliderDescriptionString,
      appendDescription: true
    });
    particleEnergySlider.addMajorTick(RSConstants.MIN_ALPHA_ENERGY, minEnergyText);
    particleEnergySlider.addMajorTick(RSConstants.MAX_ALPHA_ENERGY, maxEnergyText);

    // place the slider in a container rectangle so that the layout does not change when the thumb is at the halfway
    // mark
    const thumbWidth = RSConstants.PANEL_SLIDER_THUMB_DIMENSION.width + 2;
    const rectHeight = 5; // something small so that it doesn't interfere with the layout
    const containerRect = new Rectangle(-thumbWidth / 2, -rectHeight, sliderWidth + thumbWidth, rectHeight);
    containerRect.addChild(particleEnergySlider);

    // show traces
    const showTraceStrut = new HStrut(options.minWidth * 0.05);
    const showTraceText = new Text(showTracesString, {
      font: RSConstants.PANEL_PROPERTY_FONT,
      fontWeight: 'bold',
      fill: RSColors.panelLabelColorProperty,
      maxWidth: 180
    });
    const showTraceCheckbox = new Checkbox(showTracesProperty, showTraceText, {
      checkboxColor: RSColors.panelLabelColorProperty,
      checkboxColorBackground: RSColors.panelColorProperty,
      // pdom
      labelContent: tracesString,
      labelTagName: 'label',
      descriptionContent: traceCheckboxDescriptionString,
      containerTagName: 'div'
    });
    const showTraceBox = new HBox({
      children: [showTraceStrut, showTraceCheckbox]
    });
    super({
      spacing: RSConstants.PANEL_CHILD_SPACING,
      top: 0,
      right: 0,
      align: 'left',
      resize: false,
      children: [energyTitleBox, containerRect, new VStrut(5), showTraceBox]
    });

    // @private
    this.energyInteractionProperty = energyInteractionProperty;

    // @private
    this.disposeContent = () => {
      showTraceCheckbox.dispose();
      particleEnergySlider.dispose();
    };
  }

  /**
   * @public
   * @override
   */
  dispose() {
    this.disposeContent();
    super.dispose();
  }
}
rutherfordScattering.register('AlphaParticlePropertiesPanelContent', AlphaParticlePropertiesPanelContent);
export default AlphaParticlePropertiesPanel;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEaW1lbnNpb24yIiwiUmFuZ2UiLCJtZXJnZSIsIkhCb3giLCJIU3RydXQiLCJSZWN0YW5nbGUiLCJUZXh0IiwiVkJveCIsIlZTdHJ1dCIsIkNoZWNrYm94IiwiSFNsaWRlciIsIlBhbmVsIiwicnV0aGVyZm9yZFNjYXR0ZXJpbmciLCJSdXRoZXJmb3JkU2NhdHRlcmluZ1N0cmluZ3MiLCJSU0NvbG9ycyIsIlJTQ29uc3RhbnRzIiwiYWxwaGFQYXJ0aWNsZVByb3BlcnRpZXNTdHJpbmciLCJhbHBoYVBhcnRpY2xlUHJvcGVydGllcyIsImVuZXJneVN0cmluZyIsImVuZXJneSIsIm1heEVuZXJneVN0cmluZyIsIm1heEVuZXJneSIsIm1pbkVuZXJneVN0cmluZyIsIm1pbkVuZXJneSIsInNob3dUcmFjZXNTdHJpbmciLCJzaG93VHJhY2VzIiwiYWxwaGFQYXJ0aWNsZVNldHRpbmdzU3RyaW5nIiwiYTExeSIsImFscGhhUGFydGljbGVTZXR0aW5ncyIsImVuZXJneVNsaWRlckRlc2NyaXB0aW9uU3RyaW5nIiwiZW5lcmd5U2xpZGVyRGVzY3JpcHRpb24iLCJ0cmFjZXNTdHJpbmciLCJ0cmFjZXMiLCJ0cmFjZUNoZWNrYm94RGVzY3JpcHRpb25TdHJpbmciLCJ0cmFjZUNoZWNrYm94RGVzY3JpcHRpb24iLCJGSU5HRVJfVFJBQ0tFUiIsIkFscGhhUGFydGljbGVQcm9wZXJ0aWVzUGFuZWwiLCJjb25zdHJ1Y3RvciIsImNvbnRlbnQiLCJvcHRpb25zIiwiYWxwaGFQYXJ0aWNsZVByb3BlcnRpZXNUZXh0IiwiZm9udCIsIlBBTkVMX1RJVExFX0ZPTlQiLCJmb250V2VpZ2h0IiwiZmlsbCIsInBhbmVsVGl0bGVDb2xvclByb3BlcnR5IiwibWF4V2lkdGgiLCJjb250ZW50VkJveCIsImNoaWxkcmVuIiwiYWxpZ24iLCJzcGFjaW5nIiwiUEFORUxfQ0hJTERfU1BBQ0lORyIsInhNYXJnaW4iLCJQQU5FTF9YX01BUkdJTiIsInlNYXJnaW4iLCJtaW5XaWR0aCIsIlBBTkVMX01JTl9XSURUSCIsIlBBTkVMX01BWF9XSURUSCIsInBhbmVsQ29sb3JQcm9wZXJ0eSIsInN0cm9rZSIsInBhbmVsQm9yZGVyQ29sb3JQcm9wZXJ0eSIsInRhZ05hbWUiLCJsYWJlbFRhZ05hbWUiLCJsYWJlbENvbnRlbnQiLCJkaXNwb3NlQWxwaGFQYXJ0aWNsZVByb3BlcnRpZXNQYW5lbCIsImRpc3Bvc2UiLCJjcmVhdGVQYW5lbENvbnRlbnQiLCJlbmVyZ3lJbnRlcmFjdGlvblByb3BlcnR5IiwiYWxwaGFQYXJ0aWNsZUVuZXJneVByb3BlcnR5Iiwic2hvd1RyYWNlc1Byb3BlcnR5IiwiQWxwaGFQYXJ0aWNsZVByb3BlcnRpZXNQYW5lbENvbnRlbnQiLCJyZWdpc3RlciIsImVuZXJneVRleHQiLCJQQU5FTF9QUk9QRVJUWV9GT05UIiwicGFuZWxMYWJlbENvbG9yUHJvcGVydHkiLCJtaW5FbmVyZ3lUZXh0IiwiUEFORUxfVElDS19GT05UIiwicGFuZWxTbGlkZXJMYWJlbENvbG9yUHJvcGVydHkiLCJwaWNrYWJsZSIsIm1heEVuZXJneVRleHQiLCJlbmVyZ3lUZXh0U3RydXQiLCJlbmVyZ3lUaXRsZUJveCIsImFkZEZpbmdlciIsImVsZW1lbnRJRCIsInNldCIsInJlbW92ZUZpbmdlciIsImFzc2VydCIsInNsaWRlcldpZHRoIiwicGFydGljbGVFbmVyZ3lTbGlkZXIiLCJNSU5fQUxQSEFfRU5FUkdZIiwiTUFYX0FMUEhBX0VORVJHWSIsInRyYWNrRmlsbCIsInRyYWNrU3Ryb2tlIiwibWFqb3JUaWNrU3Ryb2tlIiwibWFqb3JUaWNrTGVuZ3RoIiwidGlja0xhYmVsU3BhY2luZyIsInRyYWNrU2l6ZSIsInRodW1iU2l6ZSIsIlBBTkVMX1NMSURFUl9USFVNQl9ESU1FTlNJT04iLCJ0aHVtYlRvdWNoQXJlYVhEaWxhdGlvbiIsInRodW1iVG91Y2hBcmVhWURpbGF0aW9uIiwic3RhcnREcmFnIiwiZW5kRHJhZyIsImtleWJvYXJkU3RlcCIsInNoaWZ0S2V5Ym9hcmRTdGVwIiwicGFnZUtleWJvYXJkU3RlcCIsImRlc2NyaXB0aW9uQ29udGVudCIsImFwcGVuZERlc2NyaXB0aW9uIiwiYWRkTWFqb3JUaWNrIiwidGh1bWJXaWR0aCIsIndpZHRoIiwicmVjdEhlaWdodCIsImNvbnRhaW5lclJlY3QiLCJhZGRDaGlsZCIsInNob3dUcmFjZVN0cnV0Iiwic2hvd1RyYWNlVGV4dCIsInNob3dUcmFjZUNoZWNrYm94IiwiY2hlY2tib3hDb2xvciIsImNoZWNrYm94Q29sb3JCYWNrZ3JvdW5kIiwiY29udGFpbmVyVGFnTmFtZSIsInNob3dUcmFjZUJveCIsInRvcCIsInJpZ2h0IiwicmVzaXplIiwiZGlzcG9zZUNvbnRlbnQiXSwic291cmNlcyI6WyJBbHBoYVBhcnRpY2xlUHJvcGVydGllc1BhbmVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE2LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIENvbnRyb2wgcGFuZWwgZm9yIHRoZSBcIlJ1dGhvcmZvcmQgU2NhdHRlcmluZ1wiIHNpbS4gQWxsb3dzIHRoZSB1c2VyIHRvIGFkanVzdCB0aGUgZW5lcmd5IG9mIGFscGhhIHBhcnRpY2xlc1xyXG4gKiBiZWluZyBzaW11bGF0ZWQuICBDb250ZW50IGlzIGNyZWF0ZWQgYnkgQWxwaGFQYXJ0aWNsZVByb3BlcnRpZXNQYW5lbENvbnRlbnQgYmVsb3cgc2luY2UgdGhlIENvbnRlbnRcclxuICogaXMgY3JlYXRlZCBhbmQgZGVzdHJveWVkIHdoZW4gdGhlIHNjZW5lIG9yIGNvbG9yIHByb2ZpbGUgY2hhbmdlcy5cclxuICpcclxuICogQGF1dGhvciBEYXZlIFNjaG1pdHogKFNjaG1pdHp3YXJlKVxyXG4gKi9cclxuXHJcbmltcG9ydCBEaW1lbnNpb24yIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9EaW1lbnNpb24yLmpzJztcclxuaW1wb3J0IFJhbmdlIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9SYW5nZS5qcyc7XHJcbmltcG9ydCBtZXJnZSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvbWVyZ2UuanMnO1xyXG5pbXBvcnQgeyBIQm94LCBIU3RydXQsIFJlY3RhbmdsZSwgVGV4dCwgVkJveCwgVlN0cnV0IH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IENoZWNrYm94IGZyb20gJy4uLy4uLy4uLy4uL3N1bi9qcy9DaGVja2JveC5qcyc7XHJcbmltcG9ydCBIU2xpZGVyIGZyb20gJy4uLy4uLy4uLy4uL3N1bi9qcy9IU2xpZGVyLmpzJztcclxuaW1wb3J0IFBhbmVsIGZyb20gJy4uLy4uLy4uLy4uL3N1bi9qcy9QYW5lbC5qcyc7XHJcbmltcG9ydCBydXRoZXJmb3JkU2NhdHRlcmluZyBmcm9tICcuLi8uLi9ydXRoZXJmb3JkU2NhdHRlcmluZy5qcyc7XHJcbmltcG9ydCBSdXRoZXJmb3JkU2NhdHRlcmluZ1N0cmluZ3MgZnJvbSAnLi4vLi4vUnV0aGVyZm9yZFNjYXR0ZXJpbmdTdHJpbmdzLmpzJztcclxuaW1wb3J0IFJTQ29sb3JzIGZyb20gJy4uL1JTQ29sb3JzLmpzJztcclxuaW1wb3J0IFJTQ29uc3RhbnRzIGZyb20gJy4uL1JTQ29uc3RhbnRzLmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBhbHBoYVBhcnRpY2xlUHJvcGVydGllc1N0cmluZyA9IFJ1dGhlcmZvcmRTY2F0dGVyaW5nU3RyaW5ncy5hbHBoYVBhcnRpY2xlUHJvcGVydGllcztcclxuY29uc3QgZW5lcmd5U3RyaW5nID0gUnV0aGVyZm9yZFNjYXR0ZXJpbmdTdHJpbmdzLmVuZXJneTtcclxuY29uc3QgbWF4RW5lcmd5U3RyaW5nID0gUnV0aGVyZm9yZFNjYXR0ZXJpbmdTdHJpbmdzLm1heEVuZXJneTtcclxuY29uc3QgbWluRW5lcmd5U3RyaW5nID0gUnV0aGVyZm9yZFNjYXR0ZXJpbmdTdHJpbmdzLm1pbkVuZXJneTtcclxuY29uc3Qgc2hvd1RyYWNlc1N0cmluZyA9IFJ1dGhlcmZvcmRTY2F0dGVyaW5nU3RyaW5ncy5zaG93VHJhY2VzO1xyXG5jb25zdCBhbHBoYVBhcnRpY2xlU2V0dGluZ3NTdHJpbmcgPSBSdXRoZXJmb3JkU2NhdHRlcmluZ1N0cmluZ3MuYTExeS5hbHBoYVBhcnRpY2xlU2V0dGluZ3M7XHJcbmNvbnN0IGVuZXJneVNsaWRlckRlc2NyaXB0aW9uU3RyaW5nID0gUnV0aGVyZm9yZFNjYXR0ZXJpbmdTdHJpbmdzLmExMXkuZW5lcmd5U2xpZGVyRGVzY3JpcHRpb247XHJcbmNvbnN0IHRyYWNlc1N0cmluZyA9IFJ1dGhlcmZvcmRTY2F0dGVyaW5nU3RyaW5ncy5hMTF5LnRyYWNlcztcclxuY29uc3QgdHJhY2VDaGVja2JveERlc2NyaXB0aW9uU3RyaW5nID0gUnV0aGVyZm9yZFNjYXR0ZXJpbmdTdHJpbmdzLmExMXkudHJhY2VDaGVja2JveERlc2NyaXB0aW9uO1xyXG5cclxuLy8gZ2xvYmFsLCB0cmFja3MgZmluZ2VycyBvbiB0aGUgc2xpZGVyIGZvciBtdWx0aXRvdWNoIHN1cHBvcnRcclxuLy8gbXVzdCBwZXJzaXN0IGJleW9uZCBpbmRpdmlkdWFsIHBhbmVsIGluc3RhbmNlcyBzbyBtdWx0aXRvdWNoIGlzIHN1cHBvcnRlZFxyXG4vLyB3aGVuIGEgcGFuZWwgaXMgY3JlYXRlZCBvciBkZXN0cm95ZWRcclxuY29uc3QgRklOR0VSX1RSQUNLRVIgPSB7fTtcclxuXHJcbmNsYXNzIEFscGhhUGFydGljbGVQcm9wZXJ0aWVzUGFuZWwgZXh0ZW5kcyBQYW5lbCB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7QWxwaGFQYXJ0aWNsZVByb3BlcnRpZXNQYW5lbENvbnRlbnR9IGNvbnRlbnQgLSBjb250ZW50IGZvciB0aGUgcGFuZWxcclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIGNvbnRlbnQsIG9wdGlvbnMgKSB7XHJcblxyXG4gICAgLy8gdGhlIHRpdGxlIGZvciB0aGUgcGFuZWxcclxuICAgIGNvbnN0IGFscGhhUGFydGljbGVQcm9wZXJ0aWVzVGV4dCA9IG5ldyBUZXh0KCBhbHBoYVBhcnRpY2xlUHJvcGVydGllc1N0cmluZywge1xyXG4gICAgICBmb250OiBSU0NvbnN0YW50cy5QQU5FTF9USVRMRV9GT05ULFxyXG4gICAgICBmb250V2VpZ2h0OiAnYm9sZCcsXHJcbiAgICAgIGZpbGw6IFJTQ29sb3JzLnBhbmVsVGl0bGVDb2xvclByb3BlcnR5LFxyXG4gICAgICBtYXhXaWR0aDogMjE1XHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgY29udGVudFZCb3ggPSBuZXcgVkJveCgge1xyXG4gICAgICBjaGlsZHJlbjogWyBhbHBoYVBhcnRpY2xlUHJvcGVydGllc1RleHQsIGNvbnRlbnQgXSxcclxuICAgICAgYWxpZ246ICdsZWZ0JyxcclxuICAgICAgc3BhY2luZzogUlNDb25zdGFudHMuUEFORUxfQ0hJTERfU1BBQ0lOR1xyXG4gICAgfSApO1xyXG5cclxuICAgIG9wdGlvbnMgPSBtZXJnZSgge1xyXG4gICAgICB4TWFyZ2luOiBSU0NvbnN0YW50cy5QQU5FTF9YX01BUkdJTixcclxuICAgICAgeU1hcmdpbjogOCxcclxuICAgICAgbWluV2lkdGg6IFJTQ29uc3RhbnRzLlBBTkVMX01JTl9XSURUSCxcclxuICAgICAgbWF4V2lkdGg6IFJTQ29uc3RhbnRzLlBBTkVMX01BWF9XSURUSCxcclxuICAgICAgYWxpZ246ICdjZW50ZXInLFxyXG4gICAgICBmaWxsOiBSU0NvbG9ycy5wYW5lbENvbG9yUHJvcGVydHksXHJcbiAgICAgIHN0cm9rZTogUlNDb2xvcnMucGFuZWxCb3JkZXJDb2xvclByb3BlcnR5LFxyXG5cclxuICAgICAgLy8gcGRvbVxyXG4gICAgICB0YWdOYW1lOiAnZGl2JyxcclxuICAgICAgbGFiZWxUYWdOYW1lOiAnaDMnLFxyXG4gICAgICBsYWJlbENvbnRlbnQ6IGFscGhhUGFydGljbGVTZXR0aW5nc1N0cmluZ1xyXG4gICAgfSwgb3B0aW9ucyApO1xyXG5cclxuICAgIHN1cGVyKCBjb250ZW50VkJveCwgb3B0aW9ucyApO1xyXG5cclxuICAgIC8vIEBwcml2YXRlIC0gbWFrZSBwYW5lbCBlbGlnaWJsZSBmb3IgZ2FyYmFnZSBjb2xsZWN0aW9uXHJcbiAgICB0aGlzLmRpc3Bvc2VBbHBoYVBhcnRpY2xlUHJvcGVydGllc1BhbmVsID0gKCkgPT4ge1xyXG4gICAgICBjb250ZW50LmRpc3Bvc2UoKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGUgdGhlIHBhbmVsIGNvbnRlbnQgZm9yIHRoaXMgcGFuZWwuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gIHtQcm9wZXJ0eS48Ym9vbGVhbj59IGVuZXJneUludGVyYWN0aW9uUHJvcGVydHlcclxuICAgKiBAcGFyYW0gIHtQcm9wZXJ0eS48Ym9vbGVhbj59IGFscGhhUGFydGljbGVFbmVyZ3lQcm9wZXJ0eVxyXG4gICAqIEBwYXJhbSAge1Byb3BlcnR5Ljxib29sZWFuPn0gc2hvd1RyYWNlc1Byb3BlcnR5XHJcbiAgICogQHBhcmFtICB7T2JqZWN0fSBbb3B0aW9uc11cclxuICAgKiBAcmV0dXJucyB7Tm9kZX1cclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgc3RhdGljIGNyZWF0ZVBhbmVsQ29udGVudCggZW5lcmd5SW50ZXJhY3Rpb25Qcm9wZXJ0eSwgYWxwaGFQYXJ0aWNsZUVuZXJneVByb3BlcnR5LCBzaG93VHJhY2VzUHJvcGVydHksIG9wdGlvbnMgKSB7XHJcbiAgICByZXR1cm4gbmV3IEFscGhhUGFydGljbGVQcm9wZXJ0aWVzUGFuZWxDb250ZW50KCBlbmVyZ3lJbnRlcmFjdGlvblByb3BlcnR5LCBhbHBoYVBhcnRpY2xlRW5lcmd5UHJvcGVydHksIHNob3dUcmFjZXNQcm9wZXJ0eSwgb3B0aW9ucyApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogZGlzcG9zZSAtIHRoaXMgcGFuZWwgaXMgY3JlYXRlZCBhbmQgZGVzdHJveWVkIGV2ZXJ5IHRpbWUgdGhlIHNjZW5lIGFuZCBjb2xvciBzY2hlbWUgY2hhbmdlc1xyXG4gICAqIHNvIGl0IGlzIGltcG9ydGFudCB0byBmdWxseSBkaXNwb3NlIG9mIGFsbCBlbGVtZW50cy5cclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgZGlzcG9zZSgpIHtcclxuICAgIHRoaXMuZGlzcG9zZUFscGhhUGFydGljbGVQcm9wZXJ0aWVzUGFuZWwoKTtcclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcbn1cclxuXHJcbnJ1dGhlcmZvcmRTY2F0dGVyaW5nLnJlZ2lzdGVyKCAnQWxwaGFQYXJ0aWNsZVByb3BlcnRpZXNQYW5lbCcsIEFscGhhUGFydGljbGVQcm9wZXJ0aWVzUGFuZWwgKTtcclxuXHJcbmNsYXNzIEFscGhhUGFydGljbGVQcm9wZXJ0aWVzUGFuZWxDb250ZW50IGV4dGVuZHMgVkJveCB7XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtICB7UHJvcGVydHkuPGJvb2xlYW4+fSBlbmVyZ3lJbnRlcmFjdGlvblByb3BlcnR5XHJcbiAgICogQHBhcmFtICB7UHJvcGVydHkuPGJvb2xlYW4+fSBhbHBoYVBhcnRpY2xlRW5lcmd5UHJvcGVydHlcclxuICAgKiBAcGFyYW0gIHtQcm9wZXJ0eS48Ym9vbGVhbj59IHNob3dUcmFjZXNQcm9wZXJ0eVxyXG4gICAqIEBwYXJhbSAge09iamVjdH0gW29wdGlvbnNdXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIGVuZXJneUludGVyYWN0aW9uUHJvcGVydHksIGFscGhhUGFydGljbGVFbmVyZ3lQcm9wZXJ0eSwgc2hvd1RyYWNlc1Byb3BlcnR5LCBvcHRpb25zICkge1xyXG5cclxuICAgIG9wdGlvbnMgPSBtZXJnZSgge1xyXG4gICAgICB4TWFyZ2luOiAxNSxcclxuICAgICAgeU1hcmdpbjogOCxcclxuICAgICAgbWluV2lkdGg6IFJTQ29uc3RhbnRzLlBBTkVMX01JTl9XSURUSCxcclxuICAgICAgbWF4V2lkdGg6IFJTQ29uc3RhbnRzLlBBTkVMX01BWF9XSURUSCxcclxuICAgICAgYWxpZ246ICdsZWZ0JyxcclxuICAgICAgZmlsbDogUlNDb2xvcnMucGFuZWxDb2xvclByb3BlcnR5LFxyXG4gICAgICBzdHJva2U6IFJTQ29sb3JzLnBhbmVsQm9yZGVyQ29sb3JQcm9wZXJ0eVxyXG4gICAgfSwgb3B0aW9ucyApO1xyXG5cclxuICAgIGNvbnN0IGVuZXJneVRleHQgPSBuZXcgVGV4dCggZW5lcmd5U3RyaW5nLCB7XHJcbiAgICAgIGZvbnQ6IFJTQ29uc3RhbnRzLlBBTkVMX1BST1BFUlRZX0ZPTlQsXHJcbiAgICAgIGZvbnRXZWlnaHQ6ICdib2xkJyxcclxuICAgICAgZmlsbDogUlNDb2xvcnMucGFuZWxMYWJlbENvbG9yUHJvcGVydHksXHJcbiAgICAgIG1heFdpZHRoOiAyMTBcclxuICAgIH0gKTtcclxuICAgIGNvbnN0IG1pbkVuZXJneVRleHQgPSBuZXcgVGV4dCggbWluRW5lcmd5U3RyaW5nLCB7XHJcbiAgICAgIGZvbnQ6IFJTQ29uc3RhbnRzLlBBTkVMX1RJQ0tfRk9OVCxcclxuICAgICAgZmlsbDogUlNDb2xvcnMucGFuZWxTbGlkZXJMYWJlbENvbG9yUHJvcGVydHksXHJcbiAgICAgIG1heFdpZHRoOiBvcHRpb25zLm1heFdpZHRoIC8gNSxcclxuICAgICAgcGlja2FibGU6IGZhbHNlXHJcbiAgICB9ICk7XHJcbiAgICBjb25zdCBtYXhFbmVyZ3lUZXh0ID0gbmV3IFRleHQoIG1heEVuZXJneVN0cmluZywge1xyXG4gICAgICBmb250OiBSU0NvbnN0YW50cy5QQU5FTF9USUNLX0ZPTlQsXHJcbiAgICAgIGZpbGw6IFJTQ29sb3JzLnBhbmVsU2xpZGVyTGFiZWxDb2xvclByb3BlcnR5LFxyXG4gICAgICBtYXhXaWR0aDogb3B0aW9ucy5tYXhXaWR0aCAvIDUsXHJcbiAgICAgIHBpY2thYmxlOiBmYWxzZVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIHNsaWRlciB0aXRsZVxyXG4gICAgY29uc3QgZW5lcmd5VGV4dFN0cnV0ID0gbmV3IEhTdHJ1dCggb3B0aW9ucy5taW5XaWR0aCAqIDAuMDUgKTtcclxuICAgIGNvbnN0IGVuZXJneVRpdGxlQm94ID0gbmV3IEhCb3goIHsgY2hpbGRyZW46IFsgZW5lcmd5VGV4dFN0cnV0LCBlbmVyZ3lUZXh0IF0gfSApO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVHJhY2sgZmluZ2VycyBmb3IgbXVsdGl0b3VjaCwgYWRkaW5nIGEgZmluZ2VyIGNvdW50IHRvIHRoZSBzbGlkZXIgYW5kIHNldHRpbmcgdGhlIHByb3BlclxyXG4gICAgICogaW50ZXJhY3Rpb24gcHJvcGVydGllcy5cclxuICAgICAqL1xyXG4gICAgY29uc3QgYWRkRmluZ2VyID0gZWxlbWVudElEID0+IHtcclxuICAgICAgZW5lcmd5SW50ZXJhY3Rpb25Qcm9wZXJ0eS5zZXQoIHRydWUgKTtcclxuICAgICAgaWYgKCAhRklOR0VSX1RSQUNLRVJbIGVsZW1lbnRJRCBdICYmIEZJTkdFUl9UUkFDS0VSWyBlbGVtZW50SUQgXSAhPT0gMCApIHtcclxuICAgICAgICBGSU5HRVJfVFJBQ0tFUlsgZWxlbWVudElEIF0gPSAxOyAvLyBmaXJzdCB0aW1lIGZpbmdlciBpcyBkb3duIG9uIHRoaXMgdGh1bWJcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBGSU5HRVJfVFJBQ0tFUlsgZWxlbWVudElEIF0rKztcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZSBhIGZpbmdlciBmcm9tIGFuIGVsZW1lbnQgZm9yIG11bHRpdG91Y2ggc3VwcG9ydCwgcmVtb3ZpbmcgYSBmaW5nZXIgY291bnQgZnJvbSBhIHBhcnRpY3VsYXIgZWxlbWVudFxyXG4gICAgICogYW5kIHNldHRpbmcgdGhlIGludGVyYWN0aW9uIHByb3BlcnRpZXMgYXBwcm9wcmlhdGVseS5cclxuICAgICAqL1xyXG4gICAgY29uc3QgcmVtb3ZlRmluZ2VyID0gZWxlbWVudElEID0+IHtcclxuICAgICAgRklOR0VSX1RSQUNLRVJbIGVsZW1lbnRJRCBdLS07XHJcbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoIEZJTkdFUl9UUkFDS0VSWyBlbGVtZW50SUQgXSA+PSAwLCAnYXQgbGVhc3QgMCBmaW5nZXJzIG11c3QgYmUgdXNpbmcgdGhlIHNsaWRlcicgKTtcclxuICAgICAgaWYgKCBGSU5HRVJfVFJBQ0tFUlsgZWxlbWVudElEIF0gPT09IDAgKSB7XHJcbiAgICAgICAgZW5lcmd5SW50ZXJhY3Rpb25Qcm9wZXJ0eS5zZXQoIGZhbHNlICk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gcGFydGljbGUgZW5nZXJ5IHNsaWRlclxyXG4gICAgY29uc3Qgc2xpZGVyV2lkdGggPSBvcHRpb25zLm1pbldpZHRoICogMC43NTtcclxuICAgIGNvbnN0IHBhcnRpY2xlRW5lcmd5U2xpZGVyID0gbmV3IEhTbGlkZXIoIGFscGhhUGFydGljbGVFbmVyZ3lQcm9wZXJ0eSwgbmV3IFJhbmdlKFxyXG4gICAgICBSU0NvbnN0YW50cy5NSU5fQUxQSEFfRU5FUkdZLFxyXG4gICAgICBSU0NvbnN0YW50cy5NQVhfQUxQSEFfRU5FUkdZXHJcbiAgICApLCB7XHJcbiAgICAgIHRyYWNrRmlsbDogUlNDb2xvcnMucGFuZWxTbGlkZXJMYWJlbENvbG9yUHJvcGVydHksXHJcbiAgICAgIHRyYWNrU3Ryb2tlOiBSU0NvbG9ycy5wYW5lbFNsaWRlckxhYmVsQ29sb3JQcm9wZXJ0eSxcclxuICAgICAgbWFqb3JUaWNrU3Ryb2tlOiBSU0NvbG9ycy5wYW5lbFNsaWRlckxhYmVsQ29sb3JQcm9wZXJ0eSxcclxuICAgICAgbWFqb3JUaWNrTGVuZ3RoOiAxNSxcclxuICAgICAgdGlja0xhYmVsU3BhY2luZzogMixcclxuICAgICAgdHJhY2tTaXplOiBuZXcgRGltZW5zaW9uMiggc2xpZGVyV2lkdGgsIDEgKSxcclxuICAgICAgdGh1bWJTaXplOiBSU0NvbnN0YW50cy5QQU5FTF9TTElERVJfVEhVTUJfRElNRU5TSU9OLFxyXG4gICAgICB0aHVtYlRvdWNoQXJlYVhEaWxhdGlvbjogMTUsXHJcbiAgICAgIHRodW1iVG91Y2hBcmVhWURpbGF0aW9uOiAxMixcclxuICAgICAgc3RhcnREcmFnOiAoKSA9PiB7IC8vIGNhbGxlZCB3aGVuIHRoZSBwb2ludGVyIGlzIHByZXNzZWRcclxuICAgICAgICBhZGRGaW5nZXIoICdwYXJ0aWNsZUVuZXJneVNsaWRlcicgKTtcclxuICAgICAgfSxcclxuICAgICAgZW5kRHJhZzogKCkgPT4geyAvLyBjYWxsZWQgd2hlbiB0aGUgcG9pbnRlciBpcyByZWxlYXNlZFxyXG4gICAgICAgIHJlbW92ZUZpbmdlciggJ3BhcnRpY2xlRW5lcmd5U2xpZGVyJyApO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgLy8gcGRvbVxyXG4gICAgICBrZXlib2FyZFN0ZXA6IDUsXHJcbiAgICAgIHNoaWZ0S2V5Ym9hcmRTdGVwOiAxLFxyXG4gICAgICBwYWdlS2V5Ym9hcmRTdGVwOiAxMCxcclxuICAgICAgbGFiZWxDb250ZW50OiBlbmVyZ3lTdHJpbmcsXHJcbiAgICAgIGxhYmVsVGFnTmFtZTogJ2xhYmVsJyxcclxuICAgICAgZGVzY3JpcHRpb25Db250ZW50OiBlbmVyZ3lTbGlkZXJEZXNjcmlwdGlvblN0cmluZyxcclxuICAgICAgYXBwZW5kRGVzY3JpcHRpb246IHRydWVcclxuICAgIH0gKTtcclxuICAgIHBhcnRpY2xlRW5lcmd5U2xpZGVyLmFkZE1ham9yVGljayggUlNDb25zdGFudHMuTUlOX0FMUEhBX0VORVJHWSwgbWluRW5lcmd5VGV4dCApO1xyXG4gICAgcGFydGljbGVFbmVyZ3lTbGlkZXIuYWRkTWFqb3JUaWNrKCBSU0NvbnN0YW50cy5NQVhfQUxQSEFfRU5FUkdZLCBtYXhFbmVyZ3lUZXh0ICk7XHJcblxyXG4gICAgLy8gcGxhY2UgdGhlIHNsaWRlciBpbiBhIGNvbnRhaW5lciByZWN0YW5nbGUgc28gdGhhdCB0aGUgbGF5b3V0IGRvZXMgbm90IGNoYW5nZSB3aGVuIHRoZSB0aHVtYiBpcyBhdCB0aGUgaGFsZndheVxyXG4gICAgLy8gbWFya1xyXG4gICAgY29uc3QgdGh1bWJXaWR0aCA9IFJTQ29uc3RhbnRzLlBBTkVMX1NMSURFUl9USFVNQl9ESU1FTlNJT04ud2lkdGggKyAyO1xyXG4gICAgY29uc3QgcmVjdEhlaWdodCA9IDU7IC8vIHNvbWV0aGluZyBzbWFsbCBzbyB0aGF0IGl0IGRvZXNuJ3QgaW50ZXJmZXJlIHdpdGggdGhlIGxheW91dFxyXG4gICAgY29uc3QgY29udGFpbmVyUmVjdCA9IG5ldyBSZWN0YW5nbGUoIC10aHVtYldpZHRoIC8gMiwgLXJlY3RIZWlnaHQsIHNsaWRlcldpZHRoICsgdGh1bWJXaWR0aCwgcmVjdEhlaWdodCApO1xyXG4gICAgY29udGFpbmVyUmVjdC5hZGRDaGlsZCggcGFydGljbGVFbmVyZ3lTbGlkZXIgKTtcclxuXHJcbiAgICAvLyBzaG93IHRyYWNlc1xyXG4gICAgY29uc3Qgc2hvd1RyYWNlU3RydXQgPSBuZXcgSFN0cnV0KCBvcHRpb25zLm1pbldpZHRoICogMC4wNSApO1xyXG4gICAgY29uc3Qgc2hvd1RyYWNlVGV4dCA9IG5ldyBUZXh0KCBzaG93VHJhY2VzU3RyaW5nLCB7XHJcbiAgICAgIGZvbnQ6IFJTQ29uc3RhbnRzLlBBTkVMX1BST1BFUlRZX0ZPTlQsXHJcbiAgICAgIGZvbnRXZWlnaHQ6ICdib2xkJyxcclxuICAgICAgZmlsbDogUlNDb2xvcnMucGFuZWxMYWJlbENvbG9yUHJvcGVydHksXHJcbiAgICAgIG1heFdpZHRoOiAxODBcclxuICAgIH0gKTtcclxuICAgIGNvbnN0IHNob3dUcmFjZUNoZWNrYm94ID0gbmV3IENoZWNrYm94KCBzaG93VHJhY2VzUHJvcGVydHksIHNob3dUcmFjZVRleHQsIHtcclxuICAgICAgY2hlY2tib3hDb2xvcjogUlNDb2xvcnMucGFuZWxMYWJlbENvbG9yUHJvcGVydHksXHJcbiAgICAgIGNoZWNrYm94Q29sb3JCYWNrZ3JvdW5kOiBSU0NvbG9ycy5wYW5lbENvbG9yUHJvcGVydHksXHJcblxyXG4gICAgICAvLyBwZG9tXHJcbiAgICAgIGxhYmVsQ29udGVudDogdHJhY2VzU3RyaW5nLFxyXG4gICAgICBsYWJlbFRhZ05hbWU6ICdsYWJlbCcsXHJcbiAgICAgIGRlc2NyaXB0aW9uQ29udGVudDogdHJhY2VDaGVja2JveERlc2NyaXB0aW9uU3RyaW5nLFxyXG4gICAgICBjb250YWluZXJUYWdOYW1lOiAnZGl2J1xyXG4gICAgfSApO1xyXG4gICAgY29uc3Qgc2hvd1RyYWNlQm94ID0gbmV3IEhCb3goIHsgY2hpbGRyZW46IFsgc2hvd1RyYWNlU3RydXQsIHNob3dUcmFjZUNoZWNrYm94IF0gfSApO1xyXG5cclxuICAgIHN1cGVyKCB7XHJcbiAgICAgIHNwYWNpbmc6IFJTQ29uc3RhbnRzLlBBTkVMX0NISUxEX1NQQUNJTkcsXHJcbiAgICAgIHRvcDogMCxcclxuICAgICAgcmlnaHQ6IDAsXHJcbiAgICAgIGFsaWduOiAnbGVmdCcsXHJcbiAgICAgIHJlc2l6ZTogZmFsc2UsXHJcbiAgICAgIGNoaWxkcmVuOiBbIGVuZXJneVRpdGxlQm94LCBjb250YWluZXJSZWN0LCBuZXcgVlN0cnV0KCA1ICksIHNob3dUcmFjZUJveCBdXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gQHByaXZhdGVcclxuICAgIHRoaXMuZW5lcmd5SW50ZXJhY3Rpb25Qcm9wZXJ0eSA9IGVuZXJneUludGVyYWN0aW9uUHJvcGVydHk7XHJcblxyXG4gICAgLy8gQHByaXZhdGVcclxuICAgIHRoaXMuZGlzcG9zZUNvbnRlbnQgPSAoKSA9PiB7XHJcbiAgICAgIHNob3dUcmFjZUNoZWNrYm94LmRpc3Bvc2UoKTtcclxuICAgICAgcGFydGljbGVFbmVyZ3lTbGlkZXIuZGlzcG9zZSgpO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwdWJsaWNcclxuICAgKiBAb3ZlcnJpZGVcclxuICAgKi9cclxuICBkaXNwb3NlKCkge1xyXG4gICAgdGhpcy5kaXNwb3NlQ29udGVudCgpO1xyXG4gICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gIH1cclxufVxyXG5cclxucnV0aGVyZm9yZFNjYXR0ZXJpbmcucmVnaXN0ZXIoICdBbHBoYVBhcnRpY2xlUHJvcGVydGllc1BhbmVsQ29udGVudCcsIEFscGhhUGFydGljbGVQcm9wZXJ0aWVzUGFuZWxDb250ZW50ICk7XHJcbmV4cG9ydCBkZWZhdWx0IEFscGhhUGFydGljbGVQcm9wZXJ0aWVzUGFuZWw7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxVQUFVLE1BQU0sa0NBQWtDO0FBQ3pELE9BQU9DLEtBQUssTUFBTSw2QkFBNkI7QUFDL0MsT0FBT0MsS0FBSyxNQUFNLG1DQUFtQztBQUNyRCxTQUFTQyxJQUFJLEVBQUVDLE1BQU0sRUFBRUMsU0FBUyxFQUFFQyxJQUFJLEVBQUVDLElBQUksRUFBRUMsTUFBTSxRQUFRLG1DQUFtQztBQUMvRixPQUFPQyxRQUFRLE1BQU0sZ0NBQWdDO0FBQ3JELE9BQU9DLE9BQU8sTUFBTSwrQkFBK0I7QUFDbkQsT0FBT0MsS0FBSyxNQUFNLDZCQUE2QjtBQUMvQyxPQUFPQyxvQkFBb0IsTUFBTSwrQkFBK0I7QUFDaEUsT0FBT0MsMkJBQTJCLE1BQU0sc0NBQXNDO0FBQzlFLE9BQU9DLFFBQVEsTUFBTSxnQkFBZ0I7QUFDckMsT0FBT0MsV0FBVyxNQUFNLG1CQUFtQjs7QUFFM0M7QUFDQSxNQUFNQyw2QkFBNkIsR0FBR0gsMkJBQTJCLENBQUNJLHVCQUF1QjtBQUN6RixNQUFNQyxZQUFZLEdBQUdMLDJCQUEyQixDQUFDTSxNQUFNO0FBQ3ZELE1BQU1DLGVBQWUsR0FBR1AsMkJBQTJCLENBQUNRLFNBQVM7QUFDN0QsTUFBTUMsZUFBZSxHQUFHVCwyQkFBMkIsQ0FBQ1UsU0FBUztBQUM3RCxNQUFNQyxnQkFBZ0IsR0FBR1gsMkJBQTJCLENBQUNZLFVBQVU7QUFDL0QsTUFBTUMsMkJBQTJCLEdBQUdiLDJCQUEyQixDQUFDYyxJQUFJLENBQUNDLHFCQUFxQjtBQUMxRixNQUFNQyw2QkFBNkIsR0FBR2hCLDJCQUEyQixDQUFDYyxJQUFJLENBQUNHLHVCQUF1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