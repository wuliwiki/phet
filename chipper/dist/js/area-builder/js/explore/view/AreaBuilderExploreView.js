// Copyright 2014-2021, University of Colorado Boulder

/**
 * View for the 'Explore' screen of the Area Builder simulation.
 *
 * @author John Blanco
 */

import ScreenView from '../../../../joist/js/ScreenView.js';
import ResetAllButton from '../../../../scenery-phet/js/buttons/ResetAllButton.js';
import { Node } from '../../../../scenery/js/imports.js';
import areaBuilder from '../../areaBuilder.js';
import AreaBuilderQueryParameters from '../../common/AreaBuilderQueryParameters.js';
import AreaBuilderSharedConstants from '../../common/AreaBuilderSharedConstants.js';
import AreaBuilderControlPanel from '../../common/view/AreaBuilderControlPanel.js';
import BoardDisplayModePanel from './BoardDisplayModePanel.js';
import ExploreNode from './ExploreNode.js';

// constants
const SPACE_AROUND_SHAPE_PLACEMENT_BOARD = AreaBuilderSharedConstants.CONTROLS_INSET;
class AreaBuilderExploreView extends ScreenView {
  /**
   * @param {AreaBuilderExploreModel} model
   */
  constructor(model) {
    super({
      layoutBounds: AreaBuilderSharedConstants.LAYOUT_BOUNDS
    });

    // Create the layers where the shapes will be placed.  The shapes are maintained in separate layers so that they
    // are over all of the shape placement boards in the z-order.
    const movableShapesLayer = new Node({
      layerSplit: true
    }); // Force the moving shape into a separate layer for improved performance.
    const singleBoardShapesLayer = new Node();
    movableShapesLayer.addChild(singleBoardShapesLayer);
    const dualBoardShapesLayer = new Node();
    movableShapesLayer.addChild(dualBoardShapesLayer);

    // Create the composite nodes that contain the shape placement board, the readout, the bucket, the shape creator
    // nodes, and the eraser button.
    const centerExploreNode = new ExploreNode(model.singleShapePlacementBoard, model.addUserCreatedMovableShape.bind(model), model.movableShapes, model.singleModeBucket, {
      shapesLayer: singleBoardShapesLayer,
      shapeDragBounds: this.layoutBounds
    });
    this.addChild(centerExploreNode);
    const leftExploreNode = new ExploreNode(model.leftShapePlacementBoard, model.addUserCreatedMovableShape.bind(model), model.movableShapes, model.leftBucket, {
      shapesLayer: dualBoardShapesLayer,
      shapeDragBounds: this.layoutBounds
    });
    this.addChild(leftExploreNode);
    const rightExploreNode = new ExploreNode(model.rightShapePlacementBoard, model.addUserCreatedMovableShape.bind(model), model.movableShapes, model.rightBucket, {
      shapesLayer: dualBoardShapesLayer,
      shapeDragBounds: this.layoutBounds
    });
    this.addChild(rightExploreNode);

    // Control which board(s), bucket(s), and shapes are visible.
    model.boardDisplayModeProperty.link(boardDisplayMode => {
      centerExploreNode.visible = boardDisplayMode === 'single';
      singleBoardShapesLayer.pickable = boardDisplayMode === 'single';
      leftExploreNode.visible = boardDisplayMode === 'dual';
      rightExploreNode.visible = boardDisplayMode === 'dual';
      dualBoardShapesLayer.pickable = boardDisplayMode === 'dual';
    });

    // Create and add the panel that contains the ABSwitch.
    const switchPanel = new BoardDisplayModePanel(model.boardDisplayModeProperty);
    this.addChild(switchPanel);

    // Create and add the common control panel.
    const controlPanel = new AreaBuilderControlPanel(model.showShapeBoardGridsProperty, model.showDimensionsProperty);
    this.addChild(controlPanel);

    // Add the reset button.
    this.addChild(new ResetAllButton({
      radius: AreaBuilderSharedConstants.RESET_BUTTON_RADIUS,
      right: this.layoutBounds.width - AreaBuilderSharedConstants.CONTROLS_INSET,
      bottom: this.layoutBounds.height - AreaBuilderSharedConstants.CONTROLS_INSET,
      listener: () => {
        this.interruptSubtreeInput();
        centerExploreNode.reset();
        leftExploreNode.reset();
        rightExploreNode.reset();
        model.reset();
      }
    }));

    // Add the layers where the movable shapes reside.
    this.addChild(movableShapesLayer);

    // Perform final layout adjustments
    const centerBoardBounds = model.singleShapePlacementBoard.bounds;
    controlPanel.top = centerBoardBounds.maxY + SPACE_AROUND_SHAPE_PLACEMENT_BOARD;
    controlPanel.left = centerBoardBounds.minX;
    switchPanel.top = centerBoardBounds.maxY + SPACE_AROUND_SHAPE_PLACEMENT_BOARD;
    switchPanel.right = centerBoardBounds.maxX;

    // If the appropriate query parameter is set, fill the boards.  This is useful for debugging.
    if (AreaBuilderQueryParameters.prefillBoards) {
      model.fillBoards();
    }
  }
}
areaBuilder.register('AreaBuilderExploreView', AreaBuilderExploreView);
export default AreaBuilderExploreView;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTY3JlZW5WaWV3IiwiUmVzZXRBbGxCdXR0b24iLCJOb2RlIiwiYXJlYUJ1aWxkZXIiLCJBcmVhQnVpbGRlclF1ZXJ5UGFyYW1ldGVycyIsIkFyZWFCdWlsZGVyU2hhcmVkQ29uc3RhbnRzIiwiQXJlYUJ1aWxkZXJDb250cm9sUGFuZWwiLCJCb2FyZERpc3BsYXlNb2RlUGFuZWwiLCJFeHBsb3JlTm9kZSIsIlNQQUNFX0FST1VORF9TSEFQRV9QTEFDRU1FTlRfQk9BUkQiLCJDT05UUk9MU19JTlNFVCIsIkFyZWFCdWlsZGVyRXhwbG9yZVZpZXciLCJjb25zdHJ1Y3RvciIsIm1vZGVsIiwibGF5b3V0Qm91bmRzIiwiTEFZT1VUX0JPVU5EUyIsIm1vdmFibGVTaGFwZXNMYXllciIsImxheWVyU3BsaXQiLCJzaW5nbGVCb2FyZFNoYXBlc0xheWVyIiwiYWRkQ2hpbGQiLCJkdWFsQm9hcmRTaGFwZXNMYXllciIsImNlbnRlckV4cGxvcmVOb2RlIiwic2luZ2xlU2hhcGVQbGFjZW1lbnRCb2FyZCIsImFkZFVzZXJDcmVhdGVkTW92YWJsZVNoYXBlIiwiYmluZCIsIm1vdmFibGVTaGFwZXMiLCJzaW5nbGVNb2RlQnVja2V0Iiwic2hhcGVzTGF5ZXIiLCJzaGFwZURyYWdCb3VuZHMiLCJsZWZ0RXhwbG9yZU5vZGUiLCJsZWZ0U2hhcGVQbGFjZW1lbnRCb2FyZCIsImxlZnRCdWNrZXQiLCJyaWdodEV4cGxvcmVOb2RlIiwicmlnaHRTaGFwZVBsYWNlbWVudEJvYXJkIiwicmlnaHRCdWNrZXQiLCJib2FyZERpc3BsYXlNb2RlUHJvcGVydHkiLCJsaW5rIiwiYm9hcmREaXNwbGF5TW9kZSIsInZpc2libGUiLCJwaWNrYWJsZSIsInN3aXRjaFBhbmVsIiwiY29udHJvbFBhbmVsIiwic2hvd1NoYXBlQm9hcmRHcmlkc1Byb3BlcnR5Iiwic2hvd0RpbWVuc2lvbnNQcm9wZXJ0eSIsInJhZGl1cyIsIlJFU0VUX0JVVFRPTl9SQURJVVMiLCJyaWdodCIsIndpZHRoIiwiYm90dG9tIiwiaGVpZ2h0IiwibGlzdGVuZXIiLCJpbnRlcnJ1cHRTdWJ0cmVlSW5wdXQiLCJyZXNldCIsImNlbnRlckJvYXJkQm91bmRzIiwiYm91bmRzIiwidG9wIiwibWF4WSIsImxlZnQiLCJtaW5YIiwibWF4WCIsInByZWZpbGxCb2FyZHMiLCJmaWxsQm9hcmRzIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJBcmVhQnVpbGRlckV4cGxvcmVWaWV3LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE0LTIwMjEsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFZpZXcgZm9yIHRoZSAnRXhwbG9yZScgc2NyZWVuIG9mIHRoZSBBcmVhIEJ1aWxkZXIgc2ltdWxhdGlvbi5cclxuICpcclxuICogQGF1dGhvciBKb2huIEJsYW5jb1xyXG4gKi9cclxuXHJcbmltcG9ydCBTY3JlZW5WaWV3IGZyb20gJy4uLy4uLy4uLy4uL2pvaXN0L2pzL1NjcmVlblZpZXcuanMnO1xyXG5pbXBvcnQgUmVzZXRBbGxCdXR0b24gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL2J1dHRvbnMvUmVzZXRBbGxCdXR0b24uanMnO1xyXG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IGFyZWFCdWlsZGVyIGZyb20gJy4uLy4uL2FyZWFCdWlsZGVyLmpzJztcclxuaW1wb3J0IEFyZWFCdWlsZGVyUXVlcnlQYXJhbWV0ZXJzIGZyb20gJy4uLy4uL2NvbW1vbi9BcmVhQnVpbGRlclF1ZXJ5UGFyYW1ldGVycy5qcyc7XHJcbmltcG9ydCBBcmVhQnVpbGRlclNoYXJlZENvbnN0YW50cyBmcm9tICcuLi8uLi9jb21tb24vQXJlYUJ1aWxkZXJTaGFyZWRDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgQXJlYUJ1aWxkZXJDb250cm9sUGFuZWwgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvQXJlYUJ1aWxkZXJDb250cm9sUGFuZWwuanMnO1xyXG5pbXBvcnQgQm9hcmREaXNwbGF5TW9kZVBhbmVsIGZyb20gJy4vQm9hcmREaXNwbGF5TW9kZVBhbmVsLmpzJztcclxuaW1wb3J0IEV4cGxvcmVOb2RlIGZyb20gJy4vRXhwbG9yZU5vZGUuanMnO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IFNQQUNFX0FST1VORF9TSEFQRV9QTEFDRU1FTlRfQk9BUkQgPSBBcmVhQnVpbGRlclNoYXJlZENvbnN0YW50cy5DT05UUk9MU19JTlNFVDtcclxuXHJcbmNsYXNzIEFyZWFCdWlsZGVyRXhwbG9yZVZpZXcgZXh0ZW5kcyBTY3JlZW5WaWV3IHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtBcmVhQnVpbGRlckV4cGxvcmVNb2RlbH0gbW9kZWxcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvciggbW9kZWwgKSB7XHJcblxyXG4gICAgc3VwZXIoIHsgbGF5b3V0Qm91bmRzOiBBcmVhQnVpbGRlclNoYXJlZENvbnN0YW50cy5MQVlPVVRfQk9VTkRTIH0gKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgdGhlIGxheWVycyB3aGVyZSB0aGUgc2hhcGVzIHdpbGwgYmUgcGxhY2VkLiAgVGhlIHNoYXBlcyBhcmUgbWFpbnRhaW5lZCBpbiBzZXBhcmF0ZSBsYXllcnMgc28gdGhhdCB0aGV5XHJcbiAgICAvLyBhcmUgb3ZlciBhbGwgb2YgdGhlIHNoYXBlIHBsYWNlbWVudCBib2FyZHMgaW4gdGhlIHotb3JkZXIuXHJcbiAgICBjb25zdCBtb3ZhYmxlU2hhcGVzTGF5ZXIgPSBuZXcgTm9kZSggeyBsYXllclNwbGl0OiB0cnVlIH0gKTsgLy8gRm9yY2UgdGhlIG1vdmluZyBzaGFwZSBpbnRvIGEgc2VwYXJhdGUgbGF5ZXIgZm9yIGltcHJvdmVkIHBlcmZvcm1hbmNlLlxyXG4gICAgY29uc3Qgc2luZ2xlQm9hcmRTaGFwZXNMYXllciA9IG5ldyBOb2RlKCk7XHJcbiAgICBtb3ZhYmxlU2hhcGVzTGF5ZXIuYWRkQ2hpbGQoIHNpbmdsZUJvYXJkU2hhcGVzTGF5ZXIgKTtcclxuICAgIGNvbnN0IGR1YWxCb2FyZFNoYXBlc0xheWVyID0gbmV3IE5vZGUoKTtcclxuICAgIG1vdmFibGVTaGFwZXNMYXllci5hZGRDaGlsZCggZHVhbEJvYXJkU2hhcGVzTGF5ZXIgKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgdGhlIGNvbXBvc2l0ZSBub2RlcyB0aGF0IGNvbnRhaW4gdGhlIHNoYXBlIHBsYWNlbWVudCBib2FyZCwgdGhlIHJlYWRvdXQsIHRoZSBidWNrZXQsIHRoZSBzaGFwZSBjcmVhdG9yXHJcbiAgICAvLyBub2RlcywgYW5kIHRoZSBlcmFzZXIgYnV0dG9uLlxyXG4gICAgY29uc3QgY2VudGVyRXhwbG9yZU5vZGUgPSBuZXcgRXhwbG9yZU5vZGUoXHJcbiAgICAgIG1vZGVsLnNpbmdsZVNoYXBlUGxhY2VtZW50Qm9hcmQsXHJcbiAgICAgIG1vZGVsLmFkZFVzZXJDcmVhdGVkTW92YWJsZVNoYXBlLmJpbmQoIG1vZGVsICksXHJcbiAgICAgIG1vZGVsLm1vdmFibGVTaGFwZXMsIG1vZGVsLnNpbmdsZU1vZGVCdWNrZXQsXHJcbiAgICAgIHtcclxuICAgICAgICBzaGFwZXNMYXllcjogc2luZ2xlQm9hcmRTaGFwZXNMYXllcixcclxuICAgICAgICBzaGFwZURyYWdCb3VuZHM6IHRoaXMubGF5b3V0Qm91bmRzXHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBjZW50ZXJFeHBsb3JlTm9kZSApO1xyXG4gICAgY29uc3QgbGVmdEV4cGxvcmVOb2RlID0gbmV3IEV4cGxvcmVOb2RlKFxyXG4gICAgICBtb2RlbC5sZWZ0U2hhcGVQbGFjZW1lbnRCb2FyZCxcclxuICAgICAgbW9kZWwuYWRkVXNlckNyZWF0ZWRNb3ZhYmxlU2hhcGUuYmluZCggbW9kZWwgKSxcclxuICAgICAgbW9kZWwubW92YWJsZVNoYXBlcyxcclxuICAgICAgbW9kZWwubGVmdEJ1Y2tldCxcclxuICAgICAge1xyXG4gICAgICAgIHNoYXBlc0xheWVyOiBkdWFsQm9hcmRTaGFwZXNMYXllcixcclxuICAgICAgICBzaGFwZURyYWdCb3VuZHM6IHRoaXMubGF5b3V0Qm91bmRzXHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBsZWZ0RXhwbG9yZU5vZGUgKTtcclxuICAgIGNvbnN0IHJpZ2h0RXhwbG9yZU5vZGUgPSBuZXcgRXhwbG9yZU5vZGUoXHJcbiAgICAgIG1vZGVsLnJpZ2h0U2hhcGVQbGFjZW1lbnRCb2FyZCxcclxuICAgICAgbW9kZWwuYWRkVXNlckNyZWF0ZWRNb3ZhYmxlU2hhcGUuYmluZCggbW9kZWwgKSxcclxuICAgICAgbW9kZWwubW92YWJsZVNoYXBlcyxcclxuICAgICAgbW9kZWwucmlnaHRCdWNrZXQsXHJcbiAgICAgIHtcclxuICAgICAgICBzaGFwZXNMYXllcjogZHVhbEJvYXJkU2hhcGVzTGF5ZXIsXHJcbiAgICAgICAgc2hhcGVEcmFnQm91bmRzOiB0aGlzLmxheW91dEJvdW5kc1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggcmlnaHRFeHBsb3JlTm9kZSApO1xyXG5cclxuICAgIC8vIENvbnRyb2wgd2hpY2ggYm9hcmQocyksIGJ1Y2tldChzKSwgYW5kIHNoYXBlcyBhcmUgdmlzaWJsZS5cclxuICAgIG1vZGVsLmJvYXJkRGlzcGxheU1vZGVQcm9wZXJ0eS5saW5rKCBib2FyZERpc3BsYXlNb2RlID0+IHtcclxuICAgICAgY2VudGVyRXhwbG9yZU5vZGUudmlzaWJsZSA9IGJvYXJkRGlzcGxheU1vZGUgPT09ICdzaW5nbGUnO1xyXG4gICAgICBzaW5nbGVCb2FyZFNoYXBlc0xheWVyLnBpY2thYmxlID0gYm9hcmREaXNwbGF5TW9kZSA9PT0gJ3NpbmdsZSc7XHJcbiAgICAgIGxlZnRFeHBsb3JlTm9kZS52aXNpYmxlID0gYm9hcmREaXNwbGF5TW9kZSA9PT0gJ2R1YWwnO1xyXG4gICAgICByaWdodEV4cGxvcmVOb2RlLnZpc2libGUgPSBib2FyZERpc3BsYXlNb2RlID09PSAnZHVhbCc7XHJcbiAgICAgIGR1YWxCb2FyZFNoYXBlc0xheWVyLnBpY2thYmxlID0gYm9hcmREaXNwbGF5TW9kZSA9PT0gJ2R1YWwnO1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIENyZWF0ZSBhbmQgYWRkIHRoZSBwYW5lbCB0aGF0IGNvbnRhaW5zIHRoZSBBQlN3aXRjaC5cclxuICAgIGNvbnN0IHN3aXRjaFBhbmVsID0gbmV3IEJvYXJkRGlzcGxheU1vZGVQYW5lbCggbW9kZWwuYm9hcmREaXNwbGF5TW9kZVByb3BlcnR5ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBzd2l0Y2hQYW5lbCApO1xyXG5cclxuICAgIC8vIENyZWF0ZSBhbmQgYWRkIHRoZSBjb21tb24gY29udHJvbCBwYW5lbC5cclxuICAgIGNvbnN0IGNvbnRyb2xQYW5lbCA9IG5ldyBBcmVhQnVpbGRlckNvbnRyb2xQYW5lbCggbW9kZWwuc2hvd1NoYXBlQm9hcmRHcmlkc1Byb3BlcnR5LCBtb2RlbC5zaG93RGltZW5zaW9uc1Byb3BlcnR5ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBjb250cm9sUGFuZWwgKTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIHJlc2V0IGJ1dHRvbi5cclxuICAgIHRoaXMuYWRkQ2hpbGQoIG5ldyBSZXNldEFsbEJ1dHRvbigge1xyXG4gICAgICByYWRpdXM6IEFyZWFCdWlsZGVyU2hhcmVkQ29uc3RhbnRzLlJFU0VUX0JVVFRPTl9SQURJVVMsXHJcbiAgICAgIHJpZ2h0OiB0aGlzLmxheW91dEJvdW5kcy53aWR0aCAtIEFyZWFCdWlsZGVyU2hhcmVkQ29uc3RhbnRzLkNPTlRST0xTX0lOU0VULFxyXG4gICAgICBib3R0b206IHRoaXMubGF5b3V0Qm91bmRzLmhlaWdodCAtIEFyZWFCdWlsZGVyU2hhcmVkQ29uc3RhbnRzLkNPTlRST0xTX0lOU0VULFxyXG4gICAgICBsaXN0ZW5lcjogKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaW50ZXJydXB0U3VidHJlZUlucHV0KCk7XHJcbiAgICAgICAgY2VudGVyRXhwbG9yZU5vZGUucmVzZXQoKTtcclxuICAgICAgICBsZWZ0RXhwbG9yZU5vZGUucmVzZXQoKTtcclxuICAgICAgICByaWdodEV4cGxvcmVOb2RlLnJlc2V0KCk7XHJcbiAgICAgICAgbW9kZWwucmVzZXQoKTtcclxuICAgICAgfVxyXG4gICAgfSApICk7XHJcblxyXG4gICAgLy8gQWRkIHRoZSBsYXllcnMgd2hlcmUgdGhlIG1vdmFibGUgc2hhcGVzIHJlc2lkZS5cclxuICAgIHRoaXMuYWRkQ2hpbGQoIG1vdmFibGVTaGFwZXNMYXllciApO1xyXG5cclxuICAgIC8vIFBlcmZvcm0gZmluYWwgbGF5b3V0IGFkanVzdG1lbnRzXHJcbiAgICBjb25zdCBjZW50ZXJCb2FyZEJvdW5kcyA9IG1vZGVsLnNpbmdsZVNoYXBlUGxhY2VtZW50Qm9hcmQuYm91bmRzO1xyXG4gICAgY29udHJvbFBhbmVsLnRvcCA9IGNlbnRlckJvYXJkQm91bmRzLm1heFkgKyBTUEFDRV9BUk9VTkRfU0hBUEVfUExBQ0VNRU5UX0JPQVJEO1xyXG4gICAgY29udHJvbFBhbmVsLmxlZnQgPSBjZW50ZXJCb2FyZEJvdW5kcy5taW5YO1xyXG4gICAgc3dpdGNoUGFuZWwudG9wID0gY2VudGVyQm9hcmRCb3VuZHMubWF4WSArIFNQQUNFX0FST1VORF9TSEFQRV9QTEFDRU1FTlRfQk9BUkQ7XHJcbiAgICBzd2l0Y2hQYW5lbC5yaWdodCA9IGNlbnRlckJvYXJkQm91bmRzLm1heFg7XHJcblxyXG4gICAgLy8gSWYgdGhlIGFwcHJvcHJpYXRlIHF1ZXJ5IHBhcmFtZXRlciBpcyBzZXQsIGZpbGwgdGhlIGJvYXJkcy4gIFRoaXMgaXMgdXNlZnVsIGZvciBkZWJ1Z2dpbmcuXHJcbiAgICBpZiAoIEFyZWFCdWlsZGVyUXVlcnlQYXJhbWV0ZXJzLnByZWZpbGxCb2FyZHMgKSB7XHJcbiAgICAgIG1vZGVsLmZpbGxCb2FyZHMoKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmFyZWFCdWlsZGVyLnJlZ2lzdGVyKCAnQXJlYUJ1aWxkZXJFeHBsb3JlVmlldycsIEFyZWFCdWlsZGVyRXhwbG9yZVZpZXcgKTtcclxuZXhwb3J0IGRlZmF1bHQgQXJlYUJ1aWxkZXJFeHBsb3JlVmlldzsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsVUFBVSxNQUFNLG9DQUFvQztBQUMzRCxPQUFPQyxjQUFjLE1BQU0sdURBQXVEO0FBQ2xGLFNBQVNDLElBQUksUUFBUSxtQ0FBbUM7QUFDeEQsT0FBT0MsV0FBVyxNQUFNLHNCQUFzQjtBQUM5QyxPQUFPQywwQkFBMEIsTUFBTSw0Q0FBNEM7QUFDbkYsT0FBT0MsMEJBQTBCLE1BQU0sNENBQTRDO0FBQ25GLE9BQU9DLHVCQUF1QixNQUFNLDhDQUE4QztBQUNsRixPQUFPQyxxQkFBcUIsTUFBTSw0QkFBNEI7QUFDOUQsT0FBT0MsV0FBVyxNQUFNLGtCQUFrQjs7QUFFMUM7QUFDQSxNQUFNQyxrQ0FBa0MsR0FBR0osMEJBQTBCLENBQUNLLGNBQWM7QUFFcEYsTUFBTUMsc0JBQXNCLFNBQVNYLFVBQVUsQ0FBQztFQUU5QztBQUNGO0FBQ0E7RUFDRVksV0FBV0EsQ0FBRUMsS0FBSyxFQUFHO0lBRW5CLEtBQUssQ0FBRTtNQUFFQyxZQUFZLEVBQUVULDBCQUEwQixDQUFDVTtJQUFjLENBQUUsQ0FBQzs7SUFFbkU7SUFDQTtJQUNBLE1BQU1DLGtCQUFrQixHQUFHLElBQUlkLElBQUksQ0FBRTtNQUFFZSxVQUFVLEVBQUU7SUFBSyxDQUFFLENBQUMsQ0FBQyxDQUFDO0lBQzdELE1BQU1DLHNCQUFzQixHQUFHLElBQUloQixJQUFJLENBQUMsQ0FBQztJQUN6Q2Msa0JBQWtCLENBQUNHLFFBQVEsQ0FBRUQsc0JBQXVCLENBQUM7SUFDckQsTUFBTUUsb0JBQW9CLEdBQUcsSUFBSWxCLElBQUksQ0FBQyxDQUFDO0lBQ3ZDYyxrQkFBa0IsQ0FBQ0csUUFBUSxDQUFFQyxvQkFBcUIsQ0FBQzs7SUFFbkQ7SUFDQTtJQUNBLE1BQU1DLGlCQUFpQixHQUFHLElB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