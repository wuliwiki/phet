// Copyright 2014-2021, University of Colorado Boulder

/**
 * This type defines a challenge used in the Area Builder game.  It exists as a place to document the format of a
 * challenge and to verify that challenges are created correctly.
 *
 * @author John Blanco
 */

import areaBuilder from '../../areaBuilder.js';
import PerimeterShape from '../../common/model/PerimeterShape.js';
import BuildSpec from './BuildSpec.js';
class AreaBuilderGameChallenge {
  /**
   * @param {Object} toolSpec An object that specifies which tools are available to the user.  It should have three
   * boolean properties - 'gridControl', 'dimensionsControl', and 'decompositionToolControl' - that indicate whether
   * the user is allowed to control these things for this challenge.
   * @param {Array.<Object>} userShapes An array of shape specification that describe the shapes that can be created and
   * manipulated by the user for this challenge.  Each shape specification is an object with a 'shape' field and a
   * 'color' field.  This value can be null to signify no user shapes are present for the challenge.
   * @param {BuildSpec} buildSpec Object that specifies what the user should build, see BuildSpec.js file for details.
   * @param {PerimeterShape} backgroundShape Shape that should appear on the board, null for challenges that don't
   * require such a shape.
   * @param {string} checkSpec Specifies what should be checked when the user pressed the 'Check' button.  Valid values
   * are 'areaEntered', 'areaConstructed', 'areaAndPerimeterConstructed', 'areaAndProportionConstructed',
   * 'areaPerimeterAndProportionConstructed'.
   * @param {Array.<Object>} exampleBuildItSolution An example solution for a build problem.  It consists of a list of
   * cell positions for unit squares and a color, e.g. { cellColumn: x, cellRow: y, color: 'blue' }.  This should be
   * null for challenges where no example solution needs to be shown.
   */
  constructor(toolSpec, userShapes, buildSpec, backgroundShape, checkSpec, exampleBuildItSolution) {
    // Verification
    assert && assert(buildSpec instanceof BuildSpec || buildSpec === null);
    assert && assert(backgroundShape instanceof PerimeterShape || backgroundShape === null);

    // Fields, all public.
    this.toolSpec = toolSpec;
    this.userShapes = userShapes;
    this.buildSpec = buildSpec;
    this.backgroundShape = backgroundShape;
    this.checkSpec = checkSpec;
    this.exampleBuildItSolution = exampleBuildItSolution;
  }

  /**
   * @param areaToBuild
   * @param userShapes
   * @param exampleSolution
   * @returns {AreaBuilderGameChallenge}
   * @public
   */
  static createBuildAreaChallenge(areaToBuild, userShapes, exampleSolution) {
    return new AreaBuilderGameChallenge(
    // toolSpec
    {
      gridControl: true,
      dimensionsControl: true,
      decompositionToolControl: true
    },
    // userShapes
    userShapes,
    // buildSpec
    BuildSpec.areaOnly(areaToBuild),
    // backgroundShape
    null,
    // checkSpec
    'areaConstructed',
    // exampleBuildItSolution
    exampleSolution);
  }

  /**
   * @param areaToBuild
   * @param color1
   * @param color2
   * @param color1Fraction
   * @param userShapes
   * @param exampleSolution
   * @returns {AreaBuilderGameChallenge}
   * @public
   */
  static createTwoToneBuildAreaChallenge(areaToBuild, color1, color2, color1Fraction, userShapes, exampleSolution) {
    return new AreaBuilderGameChallenge(
    // toolSpec
    {
      gridControl: true,
      dimensionsControl: true,
      decompositionToolControl: true
    },
    // userShapes
    userShapes,
    // buildSpec
    BuildSpec.areaAndProportions(areaToBuild, color1, color2, color1Fraction),
    // backgroundShape
    null,
    // checkSpec
    'areaAndProportionConstructed',
    // exampleBuildItSolution
    exampleSolution);
  }

  /**
   * @param areaToBuild
   * @param perimeterToBuild
   * @param color1
   * @param color2
   * @param color1Fraction
   * @param userShapes
   * @param exampleSolution
   * @returns {AreaBuilderGameChallenge}
   * @public
   */
  static createTwoToneBuildAreaAndPerimeterChallenge(areaToBuild, perimeterToBuild, color1, color2, color1Fraction, userShapes, exampleSolution) {
    return new AreaBuilderGameChallenge(
    // toolSpec
    {
      gridControl: true,
      dimensionsControl: true,
      decompositionToolControl: true
    },
    // userShapes
    userShapes,
    // buildSpec
    BuildSpec.areaPerimeterAndProportions(areaToBuild, perimeterToBuild, color1, color2, color1Fraction),
    // backgroundShape
    null,
    // checkSpec
    'areaPerimeterAndProportionConstructed',
    // exampleBuildItSolution
    exampleSolution);
  }

  /**
   * @param areaToBuild
   * @param perimeterToBuild
   * @param userShapes
   * @param exampleSolution
   * @returns {AreaBuilderGameChallenge}
   * @public
   */
  static createBuildAreaAndPerimeterChallenge(areaToBuild, perimeterToBuild, userShapes, exampleSolution) {
    return new AreaBuilderGameChallenge(
    // toolSpec
    {
      gridControl: true,
      dimensionsControl: true,
      decompositionToolControl: true
    },
    // userShapes
    userShapes,
    // buildSpec
    BuildSpec.areaAndPerimeter(areaToBuild, perimeterToBuild),
    // backgroundShape
    null,
    // checkSpec
    'areaAndPerimeterConstructed',
    // exampleBuildItSolution
    exampleSolution);
  }

  /**
   * @param areaShape
   * @param userShapes
   * @returns {AreaBuilderGameChallenge}
   * @public
   */
  static createFindAreaChallenge(areaShape, userShapes) {
    return new AreaBuilderGameChallenge(
    // toolSpec
    {
      gridControl: true,
      dimensionsControl: true,
      decompositionToolControl: true
    },
    // userShapes
    userShapes,
    // buildSpec
    null,
    // backgroundShape
    areaShape,
    // checkSpec
    'areaEntered',
    // exampleBuildItSolution
    null);
  }
}
areaBuilder.register('AreaBuilderGameChallenge', AreaBuilderGameChallenge);
export default AreaBuilderGameChallenge;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcmVhQnVpbGRlciIsIlBlcmltZXRlclNoYXBlIiwiQnVpbGRTcGVjIiwiQXJlYUJ1aWxkZXJHYW1lQ2hhbGxlbmdlIiwiY29uc3RydWN0b3IiLCJ0b29sU3BlYyIsInVzZXJTaGFwZXMiLCJidWlsZFNwZWMiLCJiYWNrZ3JvdW5kU2hhcGUiLCJjaGVja1NwZWMiLCJleGFtcGxlQnVpbGRJdFNvbHV0aW9uIiwiYXNzZXJ0IiwiY3JlYXRlQnVpbGRBcmVhQ2hhbGxlbmdlIiwiYXJlYVRvQnVpbGQiLCJleGFtcGxlU29sdXRpb24iLCJncmlkQ29udHJvbCIsImRpbWVuc2lvbnNDb250cm9sIiwiZGVjb21wb3NpdGlvblRvb2xDb250cm9sIiwiYXJlYU9ubHkiLCJjcmVhdGVUd29Ub25lQnVpbGRBcmVhQ2hhbGxlbmdlIiwiY29sb3IxIiwiY29sb3IyIiwiY29sb3IxRnJhY3Rpb24iLCJhcmVhQW5kUHJvcG9ydGlvbnMiLCJjcmVhdGVUd29Ub25lQnVpbGRBcmVhQW5kUGVyaW1ldGVyQ2hhbGxlbmdlIiwicGVyaW1ldGVyVG9CdWlsZCIsImFyZWFQZXJpbWV0ZXJBbmRQcm9wb3J0aW9ucyIsImNyZWF0ZUJ1aWxkQXJlYUFuZFBlcmltZXRlckNoYWxsZW5nZSIsImFyZWFBbmRQZXJpbWV0ZXIiLCJjcmVhdGVGaW5kQXJlYUNoYWxsZW5nZSIsImFyZWFTaGFwZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiQXJlYUJ1aWxkZXJHYW1lQ2hhbGxlbmdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE0LTIwMjEsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFRoaXMgdHlwZSBkZWZpbmVzIGEgY2hhbGxlbmdlIHVzZWQgaW4gdGhlIEFyZWEgQnVpbGRlciBnYW1lLiAgSXQgZXhpc3RzIGFzIGEgcGxhY2UgdG8gZG9jdW1lbnQgdGhlIGZvcm1hdCBvZiBhXHJcbiAqIGNoYWxsZW5nZSBhbmQgdG8gdmVyaWZ5IHRoYXQgY2hhbGxlbmdlcyBhcmUgY3JlYXRlZCBjb3JyZWN0bHkuXHJcbiAqXHJcbiAqIEBhdXRob3IgSm9obiBCbGFuY29cclxuICovXHJcblxyXG5pbXBvcnQgYXJlYUJ1aWxkZXIgZnJvbSAnLi4vLi4vYXJlYUJ1aWxkZXIuanMnO1xyXG5pbXBvcnQgUGVyaW1ldGVyU2hhcGUgZnJvbSAnLi4vLi4vY29tbW9uL21vZGVsL1BlcmltZXRlclNoYXBlLmpzJztcclxuaW1wb3J0IEJ1aWxkU3BlYyBmcm9tICcuL0J1aWxkU3BlYy5qcyc7XHJcblxyXG5jbGFzcyBBcmVhQnVpbGRlckdhbWVDaGFsbGVuZ2Uge1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge09iamVjdH0gdG9vbFNwZWMgQW4gb2JqZWN0IHRoYXQgc3BlY2lmaWVzIHdoaWNoIHRvb2xzIGFyZSBhdmFpbGFibGUgdG8gdGhlIHVzZXIuICBJdCBzaG91bGQgaGF2ZSB0aHJlZVxyXG4gICAqIGJvb2xlYW4gcHJvcGVydGllcyAtICdncmlkQ29udHJvbCcsICdkaW1lbnNpb25zQ29udHJvbCcsIGFuZCAnZGVjb21wb3NpdGlvblRvb2xDb250cm9sJyAtIHRoYXQgaW5kaWNhdGUgd2hldGhlclxyXG4gICAqIHRoZSB1c2VyIGlzIGFsbG93ZWQgdG8gY29udHJvbCB0aGVzZSB0aGluZ3MgZm9yIHRoaXMgY2hhbGxlbmdlLlxyXG4gICAqIEBwYXJhbSB7QXJyYXkuPE9iamVjdD59IHVzZXJTaGFwZXMgQW4gYXJyYXkgb2Ygc2hhcGUgc3BlY2lmaWNhdGlvbiB0aGF0IGRlc2NyaWJlIHRoZSBzaGFwZXMgdGhhdCBjYW4gYmUgY3JlYXRlZCBhbmRcclxuICAgKiBtYW5pcHVsYXRlZCBieSB0aGUgdXNlciBmb3IgdGhpcyBjaGFsbGVuZ2UuICBFYWNoIHNoYXBlIHNwZWNpZmljYXRpb24gaXMgYW4gb2JqZWN0IHdpdGggYSAnc2hhcGUnIGZpZWxkIGFuZCBhXHJcbiAgICogJ2NvbG9yJyBmaWVsZC4gIFRoaXMgdmFsdWUgY2FuIGJlIG51bGwgdG8gc2lnbmlmeSBubyB1c2VyIHNoYXBlcyBhcmUgcHJlc2VudCBmb3IgdGhlIGNoYWxsZW5nZS5cclxuICAgKiBAcGFyYW0ge0J1aWxkU3BlY30gYnVpbGRTcGVjIE9iamVjdCB0aGF0IHNwZWNpZmllcyB3aGF0IHRoZSB1c2VyIHNob3VsZCBidWlsZCwgc2VlIEJ1aWxkU3BlYy5qcyBmaWxlIGZvciBkZXRhaWxzLlxyXG4gICAqIEBwYXJhbSB7UGVyaW1ldGVyU2hhcGV9IGJhY2tncm91bmRTaGFwZSBTaGFwZSB0aGF0IHNob3VsZCBhcHBlYXIgb24gdGhlIGJvYXJkLCBudWxsIGZvciBjaGFsbGVuZ2VzIHRoYXQgZG9uJ3RcclxuICAgKiByZXF1aXJlIHN1Y2ggYSBzaGFwZS5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2hlY2tTcGVjIFNwZWNpZmllcyB3aGF0IHNob3VsZCBiZSBjaGVja2VkIHdoZW4gdGhlIHVzZXIgcHJlc3NlZCB0aGUgJ0NoZWNrJyBidXR0b24uICBWYWxpZCB2YWx1ZXNcclxuICAgKiBhcmUgJ2FyZWFFbnRlcmVkJywgJ2FyZWFDb25zdHJ1Y3RlZCcsICdhcmVhQW5kUGVyaW1ldGVyQ29uc3RydWN0ZWQnLCAnYXJlYUFuZFByb3BvcnRpb25Db25zdHJ1Y3RlZCcsXHJcbiAgICogJ2FyZWFQZXJpbWV0ZXJBbmRQcm9wb3J0aW9uQ29uc3RydWN0ZWQnLlxyXG4gICAqIEBwYXJhbSB7QXJyYXkuPE9iamVjdD59IGV4YW1wbGVCdWlsZEl0U29sdXRpb24gQW4gZXhhbXBsZSBzb2x1dGlvbiBmb3IgYSBidWlsZCBwcm9ibGVtLiAgSXQgY29uc2lzdHMgb2YgYSBsaXN0IG9mXHJcbiAgICogY2VsbCBwb3NpdGlvbnMgZm9yIHVuaXQgc3F1YXJlcyBhbmQgYSBjb2xvciwgZS5nLiB7IGNlbGxDb2x1bW46IHgsIGNlbGxSb3c6IHksIGNvbG9yOiAnYmx1ZScgfS4gIFRoaXMgc2hvdWxkIGJlXHJcbiAgICogbnVsbCBmb3IgY2hhbGxlbmdlcyB3aGVyZSBubyBleGFtcGxlIHNvbHV0aW9uIG5lZWRzIHRvIGJlIHNob3duLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCB0b29sU3BlYywgdXNlclNoYXBlcywgYnVpbGRTcGVjLCBiYWNrZ3JvdW5kU2hhcGUsIGNoZWNrU3BlYywgZXhhbXBsZUJ1aWxkSXRTb2x1dGlvbiApIHtcclxuICAgIC8vIFZlcmlmaWNhdGlvblxyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggYnVpbGRTcGVjIGluc3RhbmNlb2YgQnVpbGRTcGVjIHx8IGJ1aWxkU3BlYyA9PT0gbnVsbCApO1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggYmFja2dyb3VuZFNoYXBlIGluc3RhbmNlb2YgUGVyaW1ldGVyU2hhcGUgfHwgYmFja2dyb3VuZFNoYXBlID09PSBudWxsICk7XHJcblxyXG4gICAgLy8gRmllbGRzLCBhbGwgcHVibGljLlxyXG4gICAgdGhpcy50b29sU3BlYyA9IHRvb2xTcGVjO1xyXG4gICAgdGhpcy51c2VyU2hhcGVzID0gdXNlclNoYXBlcztcclxuICAgIHRoaXMuYnVpbGRTcGVjID0gYnVpbGRTcGVjO1xyXG4gICAgdGhpcy5iYWNrZ3JvdW5kU2hhcGUgPSBiYWNrZ3JvdW5kU2hhcGU7XHJcbiAgICB0aGlzLmNoZWNrU3BlYyA9IGNoZWNrU3BlYztcclxuICAgIHRoaXMuZXhhbXBsZUJ1aWxkSXRTb2x1dGlvbiA9IGV4YW1wbGVCdWlsZEl0U29sdXRpb247XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0gYXJlYVRvQnVpbGRcclxuICAgKiBAcGFyYW0gdXNlclNoYXBlc1xyXG4gICAqIEBwYXJhbSBleGFtcGxlU29sdXRpb25cclxuICAgKiBAcmV0dXJucyB7QXJlYUJ1aWxkZXJHYW1lQ2hhbGxlbmdlfVxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBzdGF0aWMgY3JlYXRlQnVpbGRBcmVhQ2hhbGxlbmdlKCBhcmVhVG9CdWlsZCwgdXNlclNoYXBlcywgZXhhbXBsZVNvbHV0aW9uICkge1xyXG4gICAgcmV0dXJuIG5ldyBBcmVhQnVpbGRlckdhbWVDaGFsbGVuZ2UoXHJcbiAgICAgIC8vIHRvb2xTcGVjXHJcbiAgICAgIHtcclxuICAgICAgICBncmlkQ29udHJvbDogdHJ1ZSxcclxuICAgICAgICBkaW1lbnNpb25zQ29udHJvbDogdHJ1ZSxcclxuICAgICAgICBkZWNvbXBvc2l0aW9uVG9vbENvbnRyb2w6IHRydWVcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8vIHVzZXJTaGFwZXNcclxuICAgICAgdXNlclNoYXBlcyxcclxuXHJcbiAgICAgIC8vIGJ1aWxkU3BlY1xyXG4gICAgICBCdWlsZFNwZWMuYXJlYU9ubHkoIGFyZWFUb0J1aWxkICksXHJcblxyXG4gICAgICAvLyBiYWNrZ3JvdW5kU2hhcGVcclxuICAgICAgbnVsbCxcclxuXHJcbiAgICAgIC8vIGNoZWNrU3BlY1xyXG4gICAgICAnYXJlYUNvbnN0cnVjdGVkJyxcclxuXHJcbiAgICAgIC8vIGV4YW1wbGVCdWlsZEl0U29sdXRpb25cclxuICAgICAgZXhhbXBsZVNvbHV0aW9uXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIGFyZWFUb0J1aWxkXHJcbiAgICogQHBhcmFtIGNvbG9yMVxyXG4gICAqIEBwYXJhbSBjb2xvcjJcclxuICAgKiBAcGFyYW0gY29sb3IxRnJhY3Rpb25cclxuICAgKiBAcGFyYW0gdXNlclNoYXBlc1xyXG4gICAqIEBwYXJhbSBleGFtcGxlU29sdXRpb25cclxuICAgKiBAcmV0dXJucyB7QXJlYUJ1aWxkZXJHYW1lQ2hhbGxlbmdlfVxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBzdGF0aWMgY3JlYXRlVHdvVG9uZUJ1aWxkQXJlYUNoYWxsZW5nZSggYXJlYVRvQnVpbGQsIGNvbG9yMSwgY29sb3IyLCBjb2xvcjFGcmFjdGlvbiwgdXNlclNoYXBlcywgZXhhbXBsZVNvbHV0aW9uICkge1xyXG4gICAgcmV0dXJuIG5ldyBBcmVhQnVpbGRlckdhbWVDaGFsbGVuZ2UoXHJcbiAgICAgIC8vIHRvb2xTcGVjXHJcbiAgICAgIHtcclxuICAgICAgICBncmlkQ29udHJvbDogdHJ1ZSxcclxuICAgICAgICBkaW1lbnNpb25zQ29udHJvbDogdHJ1ZSxcclxuICAgICAgICBkZWNvbXBvc2l0aW9uVG9vbENvbnRyb2w6IHRydWVcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8vIHVzZXJTaGFwZXNcclxuICAgICAgdXNlclNoYXBlcyxcclxuXHJcbiAgICAgIC8vIGJ1aWxkU3BlY1xyXG4gICAgICBCdWlsZFNwZWMuYXJlYUFuZFByb3BvcnRpb25zKCBhcmVhVG9CdWlsZCwgY29sb3IxLCBjb2xvcjIsIGNvbG9yMUZyYWN0aW9uICksXHJcblxyXG4gICAgICAvLyBiYWNrZ3JvdW5kU2hhcGVcclxuICAgICAgbnVsbCxcclxuXHJcbiAgICAgIC8vIGNoZWNrU3BlY1xyXG4gICAgICAnYXJlYUFuZFByb3BvcnRpb25Db25zdHJ1Y3RlZCcsXHJcblxyXG4gICAgICAvLyBleGFtcGxlQnVpbGRJdFNvbHV0aW9uXHJcbiAgICAgIGV4YW1wbGVTb2x1dGlvblxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSBhcmVhVG9CdWlsZFxyXG4gICAqIEBwYXJhbSBwZXJpbWV0ZXJUb0J1aWxkXHJcbiAgICogQHBhcmFtIGNvbG9yMVxyXG4gICAqIEBwYXJhbSBjb2xvcjJcclxuICAgKiBAcGFyYW0gY29sb3IxRnJhY3Rpb25cclxuICAgKiBAcGFyYW0gdXNlclNoYXBlc1xyXG4gICAqIEBwYXJhbSBleGFtcGxlU29sdXRpb25cclxuICAgKiBAcmV0dXJucyB7QXJlYUJ1aWxkZXJHYW1lQ2hhbGxlbmdlfVxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBzdGF0aWMgY3JlYXRlVHdvVG9uZUJ1aWxkQXJlYUFuZFBlcmltZXRlckNoYWxsZW5nZSggYXJlYVRvQnVpbGQsIHBlcmltZXRlclRvQnVpbGQsIGNvbG9yMSwgY29sb3IyLCBjb2xvcjFGcmFjdGlvbiwgdXNlclNoYXBlcywgZXhhbXBsZVNvbHV0aW9uICkge1xyXG4gICAgcmV0dXJuIG5ldyBBcmVhQnVpbGRlckdhbWVDaGFsbGVuZ2UoXHJcbiAgICAgIC8vIHRvb2xTcGVjXHJcbiAgICAgIHtcclxuICAgICAgICBncmlkQ29udHJvbDogdHJ1ZSxcclxuICAgICAgICBkaW1lbnNpb25zQ29udHJvbDogdHJ1ZSxcclxuICAgICAgICBkZWNvbXBvc2l0aW9uVG9vbENvbnRyb2w6IHRydWVcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8vIHVzZXJTaGFwZXNcclxuICAgICAgdXNlclNoYXBlcyxcclxuXHJcbiAgICAgIC8vIGJ1aWxkU3BlY1xyXG4gICAgICBCdWlsZFNwZWMuYXJlYVBlcmltZXRlckFuZFByb3BvcnRpb25zKCBhcmVhVG9CdWlsZCwgcGVyaW1ldGVyVG9CdWlsZCwgY29sb3IxLCBjb2xvcjIsIGNvbG9yMUZyYWN0aW9uICksXHJcblxyXG4gICAgICAvLyBiYWNrZ3JvdW5kU2hhcGVcclxuICAgICAgbnVsbCxcclxuXHJcbiAgICAgIC8vIGNoZWNrU3BlY1xyXG4gICAgICAnYXJlYVBlcmltZXRlckFuZFByb3BvcnRpb25Db25zdHJ1Y3RlZCcsXHJcblxyXG4gICAgICAvLyBleGFtcGxlQnVpbGRJdFNvbHV0aW9uXHJcbiAgICAgIGV4YW1wbGVTb2x1dGlvblxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSBhcmVhVG9CdWlsZFxyXG4gICAqIEBwYXJhbSBwZXJpbWV0ZXJUb0J1aWxkXHJcbiAgICogQHBhcmFtIHVzZXJTaGFwZXNcclxuICAgKiBAcGFyYW0gZXhhbXBsZVNvbHV0aW9uXHJcbiAgICogQHJldHVybnMge0FyZWFCdWlsZGVyR2FtZUNoYWxsZW5nZX1cclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgc3RhdGljIGNyZWF0ZUJ1aWxkQXJlYUFuZFBlcmltZXRlckNoYWxsZW5nZSggYXJlYVRvQnVpbGQsIHBlcmltZXRlclRvQnVpbGQsIHVzZXJTaGFwZXMsIGV4YW1wbGVTb2x1dGlvbiApIHtcclxuICAgIHJldHVybiBuZXcgQXJlYUJ1aWxkZXJHYW1lQ2hhbGxlbmdlKFxyXG4gICAgICAvLyB0b29sU3BlY1xyXG4gICAgICB7XHJcbiAgICAgICAgZ3JpZENvbnRyb2w6IHRydWUsXHJcbiAgICAgICAgZGltZW5zaW9uc0NvbnRyb2w6IHRydWUsXHJcbiAgICAgICAgZGVjb21wb3NpdGlvblRvb2xDb250cm9sOiB0cnVlXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvLyB1c2VyU2hhcGVzXHJcbiAgICAgIHVzZXJTaGFwZXMsXHJcblxyXG4gICAgICAvLyBidWlsZFNwZWNcclxuICAgICAgQnVpbGRTcGVjLmFyZWFBbmRQZXJpbWV0ZXIoIGFyZWFUb0J1aWxkLCBwZXJpbWV0ZXJUb0J1aWxkICksXHJcblxyXG4gICAgICAvLyBiYWNrZ3JvdW5kU2hhcGVcclxuICAgICAgbnVsbCxcclxuXHJcbiAgICAgIC8vIGNoZWNrU3BlY1xyXG4gICAgICAnYXJlYUFuZFBlcmltZXRlckNvbnN0cnVjdGVkJyxcclxuXHJcbiAgICAgIC8vIGV4YW1wbGVCdWlsZEl0U29sdXRpb25cclxuICAgICAgZXhhbXBsZVNvbHV0aW9uXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIGFyZWFTaGFwZVxyXG4gICAqIEBwYXJhbSB1c2VyU2hhcGVzXHJcbiAgICogQHJldHVybnMge0FyZWFCdWlsZGVyR2FtZUNoYWxsZW5nZX1cclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgc3RhdGljIGNyZWF0ZUZpbmRBcmVhQ2hhbGxlbmdlKCBhcmVhU2hhcGUsIHVzZXJTaGFwZXMgKSB7XHJcbiAgICByZXR1cm4gbmV3IEFyZWFCdWlsZGVyR2FtZUNoYWxsZW5nZShcclxuICAgICAgLy8gdG9vbFNwZWNcclxuICAgICAge1xyXG4gICAgICAgIGdyaWRDb250cm9sOiB0cnVlLFxyXG4gICAgICAgIGRpbWVuc2lvbnNDb250cm9sOiB0cnVlLFxyXG4gICAgICAgIGRlY29tcG9zaXRpb25Ub29sQ29udHJvbDogdHJ1ZVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgLy8gdXNlclNoYXBlc1xyXG4gICAgICB1c2VyU2hhcGVzLFxyXG5cclxuICAgICAgLy8gYnVpbGRTcGVjXHJcbiAgICAgIG51bGwsXHJcblxyXG4gICAgICAvLyBiYWNrZ3JvdW5kU2hhcGVcclxuICAgICAgYXJlYVNoYXBlLFxyXG5cclxuICAgICAgLy8gY2hlY2tTcGVjXHJcbiAgICAgICdhcmVhRW50ZXJlZCcsXHJcblxyXG4gICAgICAvLyBleGFtcGxlQnVpbGRJdFNvbHV0aW9uXHJcbiAgICAgIG51bGxcclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG5hcmVhQnVpbGRlci5yZWdpc3RlciggJ0FyZWFCdWlsZGVyR2FtZUNoYWxsZW5nZScsIEFyZWFCdWlsZGVyR2FtZUNoYWxsZW5nZSApO1xyXG5leHBvcnQgZGVmYXVsdCBBcmVhQnVpbGRlckdhbWVDaGFsbGVuZ2U7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsV0FBVyxNQUFNLHNCQUFzQjtBQUM5QyxPQUFPQyxjQUFjLE1BQU0sc0NBQXNDO0FBQ2pFLE9BQU9DLFNBQVMsTUFBTSxnQkFBZ0I7QUFFdEMsTUFBTUMsd0JBQXdCLENBQUM7RUFFN0I7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFQyxXQUFXQSxDQUFFQyxRQUFRLEVBQUVDLFVBQVUsRUFBRUMsU0FBUyxFQUFFQyxlQUFlLEVBQUVDLFNBQVMsRUFBRUMsc0JBQXNCLEVBQUc7SUFDakc7SUFDQUMsTUFBTSxJQUFJQSxNQUFNLENBQUVKLFNBQVMsWUFBWUwsU0FBUyxJQUFJSyxTQUFTLEtBQUssSUFBSyxDQUFDO0lBQ3hFSSxNQUFNLElBQUlBLE1BQU0sQ0FBRUgsZUFBZSxZQUFZUCxjQUFjLElBQUlPLGVBQWUsS0FB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