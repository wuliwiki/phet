// Copyright 2014-2022, University of Colorado Boulder

/**
 * View for handles on the pipe node. The pipe can be dragged and scaled using these handles.
 * Handles on the middle pipe are used for deforming the pipe shape and handles on the pipe ends are used for
 * scaling and dragging.
 *
 * @author Siddhartha Chinthapally (Actual Concepts).
 */

import Multilink from '../../../../axon/js/Multilink.js';
import Bounds2 from '../../../../dot/js/Bounds2.js';
import { Image, Node } from '../../../../scenery/js/imports.js';
import handleWithBar_png from '../../../images/handleWithBar_png.js';
import fluidPressureAndFlow from '../../fluidPressureAndFlow.js';
import PipeHandleNode from './PipeHandleNode.js';
import PipeMainDragHandle from './PipeMainDragHandle.js';

// constants
const LEFT_PIPE_DRAG_HANDLE_OFFSET = 10;
const RIGHT_PIPE_DRAG_HANDLE_OFFSET = 50;
const HANDLE_X_TOUCH_EXPAND = 30;
class PipeHandlesNode extends Node {
  /*
  * @param {FlowModel} flowModel of the simulation
  * @param {PipeNode} pipeNode
  * @param {GridInjectorNode} gridInjectorNode that sits on the pipe
  * @param {ModelViewTransform2} modelViewTransform to convert between model and view co-ordinate frames
  * @param {Bounds2} layoutBounds of the simulation
  */
  constructor(flowModel, pipeNode, gridInjectorNode, modelViewTransform, layoutBounds) {
    super();
    this.flowModel = flowModel;
    this.pipeNode = pipeNode;
    this.layoutBounds = layoutBounds;
    this.gridInjectorNode = gridInjectorNode;
    const pipe = flowModel.pipe;
    const topControlHandleNodes = [];
    const bottomControlHandleNodes = [];

    // add handle to drag the left pipe
    this.leftPipeMainHandleNode = new Image(handleWithBar_png, {
      y: flowModel.pipe.leftPipeMainHandleYPositionProperty.value,
      x: layoutBounds.minX - LEFT_PIPE_DRAG_HANDLE_OFFSET,
      cursor: 'pointer',
      scale: 0.32
    });

    //TODO this should be private, outside of constructor
    function boundsToTouchAreaForLeftAndRightHandles(localBounds) {
      return new Bounds2(localBounds.minX - HANDLE_X_TOUCH_EXPAND, localBounds.minY + 25, localBounds.maxX + HANDLE_X_TOUCH_EXPAND, localBounds.maxY + 60);
    }

    // touch area for the left pipe drag handle
    this.leftPipeMainHandleNode.touchArea = boundsToTouchAreaForLeftAndRightHandles(this.leftPipeMainHandleNode.localBounds);
    this.addChild(this.leftPipeMainHandleNode);

    // add handle to drag the right pipe
    this.rightPipeMainHandleNode = new Image(handleWithBar_png, {
      y: flowModel.pipe.rightPipeMainHandleYPositionProperty.value,
      x: layoutBounds.maxX - RIGHT_PIPE_DRAG_HANDLE_OFFSET,
      cursor: 'pointer',
      scale: 0.32
    });
    // touch area for the right pipe drag handle
    this.rightPipeMainHandleNode.touchArea = boundsToTouchAreaForLeftAndRightHandles(this.rightPipeMainHandleNode.localBounds);
    this.addChild(this.rightPipeMainHandleNode);
    this.pipeMainDragHandles = {
      left: this.leftPipeMainHandleNode,
      right: this.rightPipeMainHandleNode
    };
    this.addChild(new PipeMainDragHandle(this, 'left', modelViewTransform));
    this.addChild(new PipeMainDragHandle(this, 'right', modelViewTransform));
    for (let i = 1; i < pipe.top.length - 1; i++) {
      const pipeHandleNode = new PipeHandleNode(this, true, i, modelViewTransform);
      topControlHandleNodes.push(pipeHandleNode);
      this.addChild(pipeHandleNode);
    }
    for (let i = 1; i < pipe.bottom.length - 1; i++) {
      const pipeHandleNode = new PipeHandleNode(this, false, i, modelViewTransform);
      bottomControlHandleNodes.push(pipeHandleNode);
      this.addChild(pipeHandleNode);
    }
    flowModel.pipe.leftPipeMainHandleYPositionProperty.linkAttribute(this.leftPipeMainHandleNode, 'y');
    flowModel.pipe.rightPipeMainHandleYPositionProperty.linkAttribute(this.rightPipeMainHandleNode, 'y');
    Multilink.multilink([pipe.leftPipeTopHandleYProperty, pipe.leftPipeBottomHandleYProperty], (leftTop, leftBottom) => {
      topControlHandleNodes[0].bottom = leftTop;
      bottomControlHandleNodes[0].top = leftBottom;
    });
    Multilink.multilink([pipe.rightPipeTopHandleYProperty, pipe.rightPipeBottomHandleYProperty], (rightTop, rightBottom) => {
      topControlHandleNodes[topControlHandleNodes.length - 1].bottom = rightTop;
      bottomControlHandleNodes[bottomControlHandleNodes.length - 1].top = rightBottom;
    });
  }

  /**
   * @public
   */
  reset() {
    // reset the grid injector position
    this.gridInjectorNode.updateGridInjector();
  }
}
fluidPressureAndFlow.register('PipeHandlesNode', PipeHandlesNode);
export default PipeHandlesNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNdWx0aWxpbmsiLCJCb3VuZHMyIiwiSW1hZ2UiLCJOb2RlIiwiaGFuZGxlV2l0aEJhcl9wbmciLCJmbHVpZFByZXNzdXJlQW5kRmxvdyIsIlBpcGVIYW5kbGVOb2RlIiwiUGlwZU1haW5EcmFnSGFuZGxlIiwiTEVGVF9QSVBFX0RSQUdfSEFORExFX09GRlNFVCIsIlJJR0hUX1BJUEVfRFJBR19IQU5ETEVfT0ZGU0VUIiwiSEFORExFX1hfVE9VQ0hfRVhQQU5EIiwiUGlwZUhhbmRsZXNOb2RlIiwiY29uc3RydWN0b3IiLCJmbG93TW9kZWwiLCJwaXBlTm9kZSIsImdyaWRJbmplY3Rvck5vZGUiLCJtb2RlbFZpZXdUcmFuc2Zvcm0iLCJsYXlvdXRCb3VuZHMiLCJwaXBlIiwidG9wQ29udHJvbEhhbmRsZU5vZGVzIiwiYm90dG9tQ29udHJvbEhhbmRsZU5vZGVzIiwibGVmdFBpcGVNYWluSGFuZGxlTm9kZSIsInkiLCJsZWZ0UGlwZU1haW5IYW5kbGVZUG9zaXRpb25Qcm9wZXJ0eSIsInZhbHVlIiwieCIsIm1pblgiLCJjdXJzb3IiLCJzY2FsZSIsImJvdW5kc1RvVG91Y2hBcmVhRm9yTGVmdEFuZFJpZ2h0SGFuZGxlcyIsImxvY2FsQm91bmRzIiwibWluWSIsIm1heFgiLCJtYXhZIiwidG91Y2hBcmVhIiwiYWRkQ2hpbGQiLCJyaWdodFBpcGVNYWluSGFuZGxlTm9kZSIsInJpZ2h0UGlwZU1haW5IYW5kbGVZUG9zaXRpb25Qcm9wZXJ0eSIsInBpcGVNYWluRHJhZ0hhbmRsZXMiLCJsZWZ0IiwicmlnaHQiLCJpIiwidG9wIiwibGVuZ3RoIiwicGlwZUhhbmRsZU5vZGUiLCJwdXNoIiwiYm90dG9tIiwibGlua0F0dHJpYnV0ZSIsIm11bHRpbGluayIsImxlZnRQaXBlVG9wSGFuZGxlWVByb3BlcnR5IiwibGVmdFBpcGVCb3R0b21IYW5kbGVZUHJvcGVydHkiLCJsZWZ0VG9wIiwibGVmdEJvdHRvbSIsInJpZ2h0UGlwZVRvcEhhbmRsZVlQcm9wZXJ0eSIsInJpZ2h0UGlwZUJvdHRvbUhhbmRsZVlQcm9wZXJ0eSIsInJpZ2h0VG9wIiwicmlnaHRCb3R0b20iLCJyZXNldCIsInVwZGF0ZUdyaWRJbmplY3RvciIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiUGlwZUhhbmRsZXNOb2RlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE0LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFZpZXcgZm9yIGhhbmRsZXMgb24gdGhlIHBpcGUgbm9kZS4gVGhlIHBpcGUgY2FuIGJlIGRyYWdnZWQgYW5kIHNjYWxlZCB1c2luZyB0aGVzZSBoYW5kbGVzLlxyXG4gKiBIYW5kbGVzIG9uIHRoZSBtaWRkbGUgcGlwZSBhcmUgdXNlZCBmb3IgZGVmb3JtaW5nIHRoZSBwaXBlIHNoYXBlIGFuZCBoYW5kbGVzIG9uIHRoZSBwaXBlIGVuZHMgYXJlIHVzZWQgZm9yXHJcbiAqIHNjYWxpbmcgYW5kIGRyYWdnaW5nLlxyXG4gKlxyXG4gKiBAYXV0aG9yIFNpZGRoYXJ0aGEgQ2hpbnRoYXBhbGx5IChBY3R1YWwgQ29uY2VwdHMpLlxyXG4gKi9cclxuXHJcbmltcG9ydCBNdWx0aWxpbmsgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9NdWx0aWxpbmsuanMnO1xyXG5pbXBvcnQgQm91bmRzMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvQm91bmRzMi5qcyc7XHJcbmltcG9ydCB7IEltYWdlLCBOb2RlIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IGhhbmRsZVdpdGhCYXJfcG5nIGZyb20gJy4uLy4uLy4uL2ltYWdlcy9oYW5kbGVXaXRoQmFyX3BuZy5qcyc7XHJcbmltcG9ydCBmbHVpZFByZXNzdXJlQW5kRmxvdyBmcm9tICcuLi8uLi9mbHVpZFByZXNzdXJlQW5kRmxvdy5qcyc7XHJcbmltcG9ydCBQaXBlSGFuZGxlTm9kZSBmcm9tICcuL1BpcGVIYW5kbGVOb2RlLmpzJztcclxuaW1wb3J0IFBpcGVNYWluRHJhZ0hhbmRsZSBmcm9tICcuL1BpcGVNYWluRHJhZ0hhbmRsZS5qcyc7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgTEVGVF9QSVBFX0RSQUdfSEFORExFX09GRlNFVCA9IDEwO1xyXG5jb25zdCBSSUdIVF9QSVBFX0RSQUdfSEFORExFX09GRlNFVCA9IDUwO1xyXG5jb25zdCBIQU5ETEVfWF9UT1VDSF9FWFBBTkQgPSAzMDtcclxuXHJcbmNsYXNzIFBpcGVIYW5kbGVzTm9kZSBleHRlbmRzIE5vZGUge1xyXG5cclxuICAvKlxyXG4gKiBAcGFyYW0ge0Zsb3dNb2RlbH0gZmxvd01vZGVsIG9mIHRoZSBzaW11bGF0aW9uXHJcbiAqIEBwYXJhbSB7UGlwZU5vZGV9IHBpcGVOb2RlXHJcbiAqIEBwYXJhbSB7R3JpZEluamVjdG9yTm9kZX0gZ3JpZEluamVjdG9yTm9kZSB0aGF0IHNpdHMgb24gdGhlIHBpcGVcclxuICogQHBhcmFtIHtNb2RlbFZpZXdUcmFuc2Zvcm0yfSBtb2RlbFZpZXdUcmFuc2Zvcm0gdG8gY29udmVydCBiZXR3ZWVuIG1vZGVsIGFuZCB2aWV3IGNvLW9yZGluYXRlIGZyYW1lc1xyXG4gKiBAcGFyYW0ge0JvdW5kczJ9IGxheW91dEJvdW5kcyBvZiB0aGUgc2ltdWxhdGlvblxyXG4gKi9cclxuICBjb25zdHJ1Y3RvciggZmxvd01vZGVsLCBwaXBlTm9kZSwgZ3JpZEluamVjdG9yTm9kZSwgbW9kZWxWaWV3VHJhbnNmb3JtLCBsYXlvdXRCb3VuZHMgKSB7XHJcblxyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICB0aGlzLmZsb3dNb2RlbCA9IGZsb3dNb2RlbDtcclxuICAgIHRoaXMucGlwZU5vZGUgPSBwaXBlTm9kZTtcclxuICAgIHRoaXMubGF5b3V0Qm91bmRzID0gbGF5b3V0Qm91bmRzO1xyXG4gICAgdGhpcy5ncmlkSW5qZWN0b3JOb2RlID0gZ3JpZEluamVjdG9yTm9kZTtcclxuXHJcbiAgICBjb25zdCBwaXBlID0gZmxvd01vZGVsLnBpcGU7XHJcblxyXG4gICAgY29uc3QgdG9wQ29udHJvbEhhbmRsZU5vZGVzID0gW107XHJcbiAgICBjb25zdCBib3R0b21Db250cm9sSGFuZGxlTm9kZXMgPSBbXTtcclxuXHJcbiAgICAvLyBhZGQgaGFuZGxlIHRvIGRyYWcgdGhlIGxlZnQgcGlwZVxyXG4gICAgdGhpcy5sZWZ0UGlwZU1haW5IYW5kbGVOb2RlID0gbmV3IEltYWdlKCBoYW5kbGVXaXRoQmFyX3BuZyxcclxuICAgICAge1xyXG4gICAgICAgIHk6IGZsb3dNb2RlbC5waXBlLmxlZnRQaXBlTWFpbkhhbmRsZVlQb3NpdGlvblByb3BlcnR5LnZhbHVlLFxyXG4gICAgICAgIHg6IGxheW91dEJvdW5kcy5taW5YIC0gTEVGVF9QSVBFX0RSQUdfSEFORExFX09GRlNFVCxcclxuICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcclxuICAgICAgICBzY2FsZTogMC4zMlxyXG4gICAgICB9XHJcbiAgICApO1xyXG5cclxuICAgIC8vVE9ETyB0aGlzIHNob3VsZCBiZSBwcml2YXRlLCBvdXRzaWRlIG9mIGNvbnN0cnVjdG9yXHJcbiAgICBmdW5jdGlvbiBib3VuZHNUb1RvdWNoQXJlYUZvckxlZnRBbmRSaWdodEhhbmRsZXMoIGxvY2FsQm91bmRzICkge1xyXG4gICAgICByZXR1cm4gbmV3IEJvdW5kczIoIGxvY2FsQm91bmRzLm1pblggLSBIQU5ETEVfWF9UT1VDSF9FWFBBTkQsIGxvY2FsQm91bmRzLm1pblkgKyAyNSxcclxuICAgICAgICBsb2NhbEJvdW5kcy5tYXhYICsgSEFORExFX1hfVE9VQ0hfRVhQQU5ELCBsb2NhbEJvdW5kcy5tYXhZICsgNjAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyB0b3VjaCBhcmVhIGZvciB0aGUgbGVmdCBwaXBlIGRyYWcgaGFuZGxlXHJcbiAgICB0aGlzLmxlZnRQaXBlTWFpbkhhbmRsZU5vZGUudG91Y2hBcmVhID0gYm91bmRzVG9Ub3VjaEFyZWFGb3JMZWZ0QW5kUmlnaHRIYW5kbGVzKCB0aGlzLmxlZnRQaXBlTWFpbkhhbmRsZU5vZGUubG9jYWxCb3VuZHMgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMubGVmdFBpcGVNYWluSGFuZGxlTm9kZSApO1xyXG5cclxuICAgIC8vIGFkZCBoYW5kbGUgdG8gZHJhZyB0aGUgcmlnaHQgcGlwZVxyXG4gICAgdGhpcy5yaWdodFBpcGVNYWluSGFuZGxlTm9kZSA9IG5ldyBJbWFnZSggaGFuZGxlV2l0aEJhcl9wbmcsXHJcbiAgICAgIHtcclxuICAgICAgICB5OiBmbG93TW9kZWwucGlwZS5yaWdodFBpcGVNYWluSGFuZGxlWVBvc2l0aW9uUHJvcGVydHkudmFsdWUsXHJcbiAgICAgICAgeDogbGF5b3V0Qm91bmRzLm1heFggLSBSSUdIVF9QSVBFX0RSQUdfSEFORExFX09GRlNFVCxcclxuICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcclxuICAgICAgICBzY2FsZTogMC4zMlxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgLy8gdG91Y2ggYXJlYSBmb3IgdGhlIHJpZ2h0IHBpcGUgZHJhZyBoYW5kbGVcclxuICAgIHRoaXMucmlnaHRQaXBlTWFpbkhhbmRsZU5vZGUudG91Y2hBcmVhID0gYm91bmRzVG9Ub3VjaEFyZWFGb3JMZWZ0QW5kUmlnaHRIYW5kbGVzKCB0aGlzLnJpZ2h0UGlwZU1haW5IYW5kbGVOb2RlLmxvY2FsQm91bmRzICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCB0aGlzLnJpZ2h0UGlwZU1haW5IYW5kbGVOb2RlICk7XHJcblxyXG4gICAgdGhpcy5waXBlTWFpbkRyYWdIYW5kbGVzID0ge1xyXG4gICAgICBsZWZ0OiB0aGlzLmxlZnRQaXBlTWFpbkhhbmRsZU5vZGUsXHJcbiAgICAgIHJpZ2h0OiB0aGlzLnJpZ2h0UGlwZU1haW5IYW5kbGVOb2RlXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuYWRkQ2hpbGQoIG5ldyBQaXBlTWFpbkRyYWdIYW5kbGUoIHRoaXMsICdsZWZ0JywgbW9kZWxWaWV3VHJhbnNmb3JtICkgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIG5ldyBQaXBlTWFpbkRyYWdIYW5kbGUoIHRoaXMsICdyaWdodCcsIG1vZGVsVmlld1RyYW5zZm9ybSApICk7XHJcblxyXG4gICAgZm9yICggbGV0IGkgPSAxOyBpIDwgcGlwZS50b3AubGVuZ3RoIC0gMTsgaSsrICkge1xyXG4gICAgICBjb25zdCBwaXBlSGFuZGxlTm9kZSA9IG5ldyBQaXBlSGFuZGxlTm9kZSggdGhpcywgdHJ1ZSwgaSwgbW9kZWxWaWV3VHJhbnNmb3JtICk7XHJcbiAgICAgIHRvcENvbnRyb2xIYW5kbGVOb2Rlcy5wdXNoKCBwaXBlSGFuZGxlTm9kZSApO1xyXG4gICAgICB0aGlzLmFkZENoaWxkKCBwaXBlSGFuZGxlTm9kZSApO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAoIGxldCBpID0gMTsgaSA8IHBpcGUuYm90dG9tLmxlbmd0aCAtIDE7IGkrKyApIHtcclxuICAgICAgY29uc3QgcGlwZUhhbmRsZU5vZGUgPSBuZXcgUGlwZUhhbmRsZU5vZGUoIHRoaXMsIGZhbHNlLCBpLCBtb2RlbFZpZXdUcmFuc2Zvcm0gKTtcclxuICAgICAgYm90dG9tQ29udHJvbEhhbmRsZU5vZGVzLnB1c2goIHBpcGVIYW5kbGVOb2RlICk7XHJcbiAgICAgIHRoaXMuYWRkQ2hpbGQoIHBpcGVIYW5kbGVOb2RlICk7XHJcbiAgICB9XHJcblxyXG4gICAgZmxvd01vZGVsLnBpcGUubGVmdFBpcGVNYWluSGFuZGxlWVBvc2l0aW9uUHJvcGVydHkubGlua0F0dHJpYnV0ZSggdGhpcy5sZWZ0UGlwZU1haW5IYW5kbGVOb2RlLCAneScgKTtcclxuICAgIGZsb3dNb2RlbC5waXBlLnJpZ2h0UGlwZU1haW5IYW5kbGVZUG9zaXRpb25Qcm9wZXJ0eS5saW5rQXR0cmlidXRlKCB0aGlzLnJpZ2h0UGlwZU1haW5IYW5kbGVOb2RlLCAneScgKTtcclxuICAgIE11bHRpbGluay5tdWx0aWxpbmsoIFsgcGlwZS5sZWZ0UGlwZVRvcEhhbmRsZVlQcm9wZXJ0eSwgcGlwZS5sZWZ0UGlwZUJvdHRvbUhhbmRsZVlQcm9wZXJ0eSBdLFxyXG4gICAgICAoIGxlZnRUb3AsIGxlZnRCb3R0b20gKSA9PiB7XHJcbiAgICAgICAgdG9wQ29udHJvbEhhbmRsZU5vZGVzWyAwIF0uYm90dG9tID0gbGVmdFRvcDtcclxuICAgICAgICBib3R0b21Db250cm9sSGFuZGxlTm9kZXNbIDAgXS50b3AgPSBsZWZ0Qm90dG9tO1xyXG4gICAgICB9ICk7XHJcblxyXG4gICAgTXVsdGlsaW5rLm11bHRpbGluayggWyBwaXBlLnJpZ2h0UGlwZVRvcEhhbmRsZVlQcm9wZXJ0eSwgcGlwZS5yaWdodFBpcGVCb3R0b21IYW5kbGVZUHJvcGVydHkgXSxcclxuICAgICAgKCByaWdodFRvcCwgcmlnaHRCb3R0b20gKSA9PiB7XHJcbiAgICAgICAgdG9wQ29udHJvbEhhbmRsZU5vZGVzWyB0b3BDb250cm9sSGFuZGxlTm9kZXMubGVuZ3RoIC0gMSBdLmJvdHRvbSA9IHJpZ2h0VG9wO1xyXG4gICAgICAgIGJvdHRvbUNvbnRyb2xIYW5kbGVOb2Rlc1sgYm90dG9tQ29udHJvbEhhbmRsZU5vZGVzLmxlbmd0aCAtIDEgXS50b3AgPSByaWdodEJvdHRvbTtcclxuICAgICAgfSApO1xyXG5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICByZXNldCgpIHtcclxuXHJcbiAgICAvLyByZXNldCB0aGUgZ3JpZCBpbmplY3RvciBwb3NpdGlvblxyXG4gICAgdGhpcy5ncmlkSW5qZWN0b3JOb2RlLnVwZGF0ZUdyaWRJbmplY3RvcigpO1xyXG4gIH1cclxufVxyXG5cclxuZmx1aWRQcmVzc3VyZUFuZEZsb3cucmVnaXN0ZXIoICdQaXBlSGFuZGxlc05vZGUnLCBQaXBlSGFuZGxlc05vZGUgKTtcclxuZXhwb3J0IGRlZmF1bHQgUGlwZUhhbmRsZXNOb2RlOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsU0FBUyxNQUFNLGtDQUFrQztBQUN4RCxPQUFPQyxPQUFPLE1BQU0sK0JBQStCO0FBQ25ELFNBQVNDLEtBQUssRUFBRUMsSUFBSSxRQUFRLG1DQUFtQztBQUMvRCxPQUFPQyxpQkFBaUIsTUFBTSxzQ0FBc0M7QUFDcEUsT0FBT0Msb0JBQW9CLE1BQU0sK0JBQStCO0FBQ2hFLE9BQU9DLGNBQWMsTUFBTSxxQkFBcUI7QUFDaEQsT0FBT0Msa0JBQWtCLE1BQU0seUJBQXlCOztBQUV4RDtBQUNBLE1BQU1DLDRCQUE0QixHQUFHLEVBQUU7QUFDdkMsTUFBTUMsNkJBQTZCLEdBQUcsRUFBRTtBQUN4QyxNQUFNQyxxQkFBcUIsR0FBRyxFQUFFO0FBRWhDLE1BQU1DLGVBQWUsU0FBU1IsSUFBSSxDQUFDO0VBRWpDO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VTLFdBQVdBLENBQUVDLFNBQVMsRUFBRUMsUUFBUSxFQUFFQyxnQkFBZ0IsRUFBRUMsa0JBQWtCLEVBQUVDLFlBQVksRUFBRztJQUVyRixLQUFLLENBQUMsQ0FBQztJQUVQLElBQUksQ0FBQ0osU0FBUyxHQUFHQSxTQUFTO0lBQzFCLElBQUksQ0FBQ0MsUUFBUSxHQUFHQSxRQUFRO0lBQ3hCLElBQUksQ0FBQ0csWUFBWSxHQUFHQSxZQUFZO0lBQ2hDLElBQUksQ0FBQ0YsZ0JBQWdCLEdBQUdBLGdCQUFnQjtJQUV4QyxNQUFNRyxJQUFJLEdBQUdMLFNBQVMsQ0FBQ0ssSUFBSTtJQUUzQixNQUFNQyxxQkFBcUIsR0FBRyxFQUFFO0lBQ2hDLE1BQU1DLHdCQUF3QixHQUFHLEVBQUU7O0lBRW5DO0lBQ0EsSUFBSSxDQUFDQyxzQkFBc0IsR0FBRyxJQUFJbkIsS0FBSyxDQUFFRSxpQkFBaUIsRUFDeEQ7TUFDRWtCLENBQUMsRUFBRVQsU0FBUyxDQUFDSyxJQUFJLENBQUNLLG1DQUFtQyxDQUFDQyxLQUFLO01BQzNEQyxDQUFDLEVBQUVSLFlBQVksQ0FBQ1MsSUFBSSxHQUFHbEIsNEJBQTRCO01BQ25EbUIsTUFBTSxFQUFFLFNBQVM7TUFDakJDLEtBQUssRUFBRTtJQUNULENBQ0YsQ0FBQzs7SUFFRDtJQUNBLFNBQVNDLHVDQUF1Q0EsQ0FBRUMsV0FBVyxFQUFHO01BQzlELE9BQU8sSUFBSTdCLE9BQU8sQ0FBRTZCLFdBQVcsQ0FBQ0osSUFBSSxHQUFHaEIscUJBQXFCLEVBQUVvQixXQUFXLENBQUNDLElBQUksR0FBRyxFQUFFLEVBQ2pGRCxXQUFXLENBQUNFLElBQUksR0FBR3RCLHFCQUFxQixFQUFFb0IsV0FBVyxDQUFDRyxJQUFJLEdBQUcsRUFBRyxDQUFDO0lBQ3JFOztJQUVBO0lBQ0EsSUFBSSxDQUFDWixzQkFBc0IsQ0FBQ2EsU0FBUyxHQUFHTCx1Q0FBdUMsQ0FBRSxJQUFJLENBQUNSLHNCQUFzQixDQUFDUyxXQUFZLENBQUM7SUFDMUgsSUFBSSxDQUFDSyxRQUFRLENBQUUsSUFBSSxDQUFDZCxzQkFBdUIsQ0FBQzs7SUFFNUM7SUFDQSxJQUFJLENBQUNlLHVCQUF1QixHQUFHLElBQUlsQyxLQUFLLENBQUVFLGlCQUFpQixFQUN6RDtNQUNFa0IsQ0FBQyxFQUFFVCxTQUFTLENBQUNLLElBQUksQ0FBQ21CLG9DQUFvQyxDQUFDYixLQUFLO01BQzVEQyxDQUFDLEVBQUVSLFlBQVksQ0FBQ2UsSUFBSSxHQUFHdkIsNkJBQTZCO01BQ3BEa0IsTUFBTSxFQUFFLFNBQVM7TUFDakJDLEtBQUssRUFBRTtJQUNULENBQ0YsQ0FBQztJQUNEO0lBQ0EsSUFBSSxDQUFDUSx1QkFBdUIsQ0FBQ0YsU0FBUyxHQUFHTCx1Q0FBdUMsQ0FBRSxJQUFJLENBQUNPLHVCQUF1QixDQUFDTixXQUFZLENBQUM7SUFDNUgsSUFBSSxDQUFDSyxRQUFRLENBQUUsSUFBSSxDQUFDQyx1QkFBd0IsQ0FBQztJQUU3QyxJQUFJLENBQUNFLG1CQUFtQixHQUFHO01BQ3pCQyxJQUFJLEVBQUUsSUFBSSxDQUFDbEIsc0JBQXNCO01BQ2pDbUIsS0FBSyxFQUFFLElBQUksQ0FBQ0o7SUFDZCxDQUFDO0lBRUQsSUFBSSxDQUFDRCxRQUFRLENBQUUsSUFBSTVCLGtCQUFrQixDQUFFLElBQUksRUFBRSxNQUFNLEVBQUVTLGtCQUFtQixDQUFFLENBQUM7SUFDM0UsSUFBSSxDQUFDbUIsUUFBUSxDQUFFLElBQUk1QixrQkFBa0IsQ0FBRSxJQUFJLEVBQUUsT0FBTyxFQUFFUyxrQkFBbUIsQ0FBRSxDQUFDO0lBRTVFLEtBQU0sSUFBSXlCLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR3ZCLElBQUksQ0FBQ3dCLEdBQUcsQ0FBQ0MsTUFBTSxHQUFHLENBQUMsRUFBRUYsQ0FBQyxFQUFFLEVBQUc7TUFDOUMsTUFBTUcsY0FBYyxHQUFHLElBQUl0QyxjQUFjLENBQUUsSUFBSSxFQUFFLElBQUksRUFBRW1DLENBQUMsRUFBRXpCLGtCQUFtQixDQUFDO01BQzlFRyxxQkFBcUIsQ0FBQzBCLElBQUksQ0FBRUQsY0FBZSxDQUFDO01BQzVDLElBQUksQ0FBQ1QsUUFBUSxDQUFFUyxjQUFlLENBQUM7SUFDakM7SUFFQSxLQUFNLElBQUlILENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR3ZCLElBQUksQ0FBQzRCLE1BQU0sQ0FBQ0gsTUFBTSxHQUFHLENBQUMsRUFBRUYsQ0FBQyxFQUFFLEVBQUc7TUFDakQsTUFBTUcsY0FBYyxHQUFHLElBQUl0QyxjQUFjLENBQUUsSUFBSSxFQUFFLEtBQUssRUFBRW1DLENBQUMsRUFBRXpCLGtCQUFtQixDQUFDO01BQy9FSSx3QkFBd0IsQ0FBQ3lCLElBQUksQ0FBRUQsY0FBZSxDQUFDO01BQy9DLElBQUksQ0FBQ1QsUUFBUSxDQUFFUyxjQUFlLENBQUM7SUFDakM7SUFFQS9CLFNBQVMsQ0FBQ0ssSUFBSSxDQUFDSyxtQ0FBbUMsQ0FBQ3dCLGFBQWEsQ0FBRSxJQUFJLENBQUMxQixzQkFBc0IsRUFBRSxHQUFJLENBQUM7SUFDcEdSLFNBQVMsQ0FBQ0ssSUFBSSxDQUFDbUIsb0NBQW9DLENBQUNVLGFBQWEsQ0FBRSxJQUFJLENBQUNYLHVCQUF1QixFQUFFLEdBQUksQ0FBQztJQUN0R3BDLFNBQVMsQ0FBQ2dELFNBQVMsQ0FBRSxDQUFFOUIsSUFBSSxDQUFDK0IsMEJBQTBCLEVBQUUvQixJQUFJLENBQUNnQyw2QkFBNkIsQ0FBRSxFQUMxRixDQUFFQyxPQUFPLEVBQUVDLFVBQVUsS0FBTTtNQUN6QmpDLHFCQUFxQixDQUFFLENBQUMsQ0FBRSxDQUFDMkIsTUFBTSxHQUFHSyxPQUFPO01BQzNDL0Isd0JBQXdCLENBQUUsQ0FBQyxDQUFFLENBQUNzQixHQUFHLEdBQUdVLFVBQVU7SUFDaEQsQ0FBRSxDQUFDO0lBRUxwRCxTQUFTLENBQUNnRCxTQUFTLENBQUUsQ0FBRTlCLElBQUksQ0FBQ21DLDJCQUEyQixFQUFFbkMsSUFBSSxDQUFDb0MsOEJBQThCLENBQUUsRUFDNUYsQ0FBRUMsUUFBUSxFQUFFQyxXQUFXLEtBQU07TUFDM0JyQyxxQkFBcUIsQ0FBRUEscUJBQXFCLENBQUN3QixNQUFNLEdBQUcsQ0FBQyxDQUFFLENBQUNHLE1BQU0sR0FBR1MsUUFBUTtNQUMzRW5DLHdCQUF3QixDQUFFQSx3QkFBd0IsQ0FBQ3VCLE1BQU0sR0FBRyxDQUFDLENBQUUsQ0FBQ0QsR0FBRyxHQUFHYyxXQUFXO0lBQ25GLENBQUUsQ0FBQztFQUVQOztFQUVBO0FBQ0Y7QUFDQTtFQUNFQyxLQUFLQSxDQUFBLEVBQUc7SUFFTjtJQUNBLElBQUksQ0FBQzFDLGdCQUFnQixDQUFDMkMsa0JBQWtCLENBQUMsQ0FBQztFQUM1QztBQUNGO0FBRUFyRCxvQkFBb0IsQ0FBQ3NELFFBQVEsQ0FBRSxpQkFBaUIsRUFBRWhELGVBQWdCLENBQUM7QUFDbkUsZUFBZUEsZUFBZSJ9