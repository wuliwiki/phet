// Copyright 2014-2022, University of Colorado Boulder

/**
 * View for the Fluid Pressure and Flow sim's Flow tab. The view contains a flexible pipe that can be dragged
 * and scaled using handles, particles to show the fluid flow and tools to measure flux, area, length, velocity etc.
 *
 * @author Siddhartha Chinthapally (Actual Concepts).
 */

import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import Bounds2 from '../../../../dot/js/Bounds2.js';
import Matrix3 from '../../../../dot/js/Matrix3.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import ScreenView from '../../../../joist/js/ScreenView.js';
import ModelViewTransform2 from '../../../../phetcommon/js/view/ModelViewTransform2.js';
import PlayPauseButton from '../../../../scenery-phet/js/buttons/PlayPauseButton.js';
import ResetAllButton from '../../../../scenery-phet/js/buttons/ResetAllButton.js';
import StepForwardButton from '../../../../scenery-phet/js/buttons/StepForwardButton.js';
import GroundNode from '../../../../scenery-phet/js/GroundNode.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import SkyNode from '../../../../scenery-phet/js/SkyNode.js';
import { Node, Pattern, Rectangle, Text, VBox } from '../../../../scenery/js/imports.js';
import AquaRadioButton from '../../../../sun/js/AquaRadioButton.js';
import grassTexture_png from '../../../images/grassTexture_png.js';
import Constants from '../../common/Constants.js';
import ControlSlider from '../../common/view/ControlSlider.js';
import FPAFRuler from '../../common/view/FPAFRuler.js';
import SensorToolbox from '../../common/view/SensorToolbox.js';
import UnitsControlPanel from '../../common/view/UnitsControlPanel.js';
import fluidPressureAndFlow from '../../fluidPressureAndFlow.js';
import FluidPressureAndFlowStrings from '../../FluidPressureAndFlowStrings.js';
import FlowToolsControlPanel from './FlowToolsControlPanel.js';
import FluxMeterNode from './FluxMeterNode.js';
import GridInjectorNode from './GridInjectorNode.js';
import PipeHandlesNode from './PipeHandlesNode.js';
import PipeNode from './PipeNode.js';
const flowRateString = FluidPressureAndFlowStrings.flowRate;
const fluidDensityString = FluidPressureAndFlowStrings.fluidDensity;
const gasolineString = FluidPressureAndFlowStrings.gasoline;
const honeyString = FluidPressureAndFlowStrings.honey;
const normalString = FluidPressureAndFlowStrings.normal;
const slowMotionString = FluidPressureAndFlowStrings.slowMotion;
const waterString = FluidPressureAndFlowStrings.water;

//images

//View layout related constants
const INSET = 10;
class FlowScreenView extends ScreenView {
  /**
   * @param {FlowModel} flowModel
   */
  constructor(flowModel) {
    super(Constants.SCREEN_VIEW_OPTIONS);

    // view co-ordinates (370,140) map to model origin (0,0) with inverted y-axis (y grows up in the model)
    const modelViewTransform = ModelViewTransform2.createSinglePointScaleInvertedYMapping(Vector2.ZERO, new Vector2(370, 140), 50); //1m = 50Px

    const groundY = modelViewTransform.modelToViewY(0);
    const backgroundNodeStartX = -5000;
    const backgroundNodeWidth = 10000;
    const skyExtensionHeight = 10000;
    const groundDepth = 10000;
    this.flowModel = flowModel;

    // This is a workaround, see https://github.com/phetsims/fluid-pressure-and-flow/issues/87
    // add rectangle on top of the sky node to extend sky upwards.
    this.addChild(new Rectangle(backgroundNodeStartX, -skyExtensionHeight, backgroundNodeWidth, skyExtensionHeight, {
      stroke: '#01ACE4',
      fill: '#01ACE4'
    }));

    // add sky node
    this.addChild(new SkyNode(backgroundNodeStartX, 0, backgroundNodeWidth, groundY, groundY));

    // add ground node with gradient
    const groundNode = new GroundNode(backgroundNodeStartX, groundY, backgroundNodeWidth, groundDepth, 400, {
      topColor: '#9D8B61',
      bottomColor: '#645A3C'
    });
    this.addChild(groundNode);

    // add grass above the ground
    const grassPattern = new Pattern(grassTexture_png).setTransformMatrix(Matrix3.scale(0.25));
    const grassRectYOffset = 1;
    const grassRectHeight = 10;
    this.addChild(new Rectangle(backgroundNodeStartX, grassRectYOffset, backgroundNodeWidth, grassRectHeight, {
      fill: grassPattern,
      bottom: groundNode.top
    }));

    // Control panel with checkboxes to toggle tools on the screen
    const toolsControlPanel = new FlowToolsControlPanel(flowModel, {
      right: this.layoutBounds.right - 7,
      top: 7
    });
    this.addChild(toolsControlPanel);

    // all the movable tools are added to this layer
    const toolsLayer = new Node();
    this.addChild(toolsLayer);

    // units control panel
    const unitsControlPanel = new UnitsControlPanel(flowModel.measureUnitsProperty, {
      right: toolsControlPanel.left - 7,
      top: toolsControlPanel.top
    });
    this.addChild(unitsControlPanel);
    const fluxMeterNode = new FluxMeterNode(flowModel, modelViewTransform, {
      stroke: 'blue'
    });
    flowModel.isFluxMeterVisibleProperty.linkAttribute(fluxMeterNode.ellipse2, 'visible');

    // Injector which generates grid particles
    const gridInjectorNode = new GridInjectorNode(flowModel.isGridInjectorPressedProperty, modelViewTransform, flowModel.pipe);
    this.addChild(gridInjectorNode);

    // add the pipe (without handles)
    this.pipeNode = new PipeNode(flowModel, modelViewTransform, this.layoutBounds);
    this.addChild(this.pipeNode);

    // add the handles
    const pipeHandlesNode = new PipeHandlesNode(flowModel, this.pipeNode, gridInjectorNode, modelViewTransform, this.layoutBounds);
    this.addChild(pipeHandlesNode);

    // add the back ellipse of the fluxMeter to the pipe node's pre-particle layer
    this.pipeNode.preParticleLayer.addChild(fluxMeterNode.ellipse2);

    // now add the front part of the fluxMeter
    toolsLayer.addChild(fluxMeterNode);

    // add the reset button
    const resetAllButton = new ResetAllButton({
      listener: () => {
        flowModel.reset();
        this.pipeNode.reset();
        pipeHandlesNode.reset();
        sensorPanel.reset();
      },
      radius: 18,
      bottom: this.layoutBounds.bottom - 7,
      right: this.layoutBounds.right - 13
    });
    this.addChild(resetAllButton);

    // add the fluid density control slider
    const fluidDensityControlNode = new ControlSlider(flowModel.measureUnitsProperty, flowModel.fluidDensityProperty, flowModel.getFluidDensityString.bind(flowModel), flowModel.fluidDensityRange, flowModel.fluidDensityControlExpandedProperty, {
      right: resetAllButton.left - 55,
      bottom: resetAllButton.bottom,
      title: fluidDensityString,
      ticks: [{
        title: waterString,
        value: flowModel.fluidDensityProperty.value
      }, {
        title: gasolineString,
        value: flowModel.fluidDensityRange.min
      }, {
        title: honeyString,
        value: flowModel.fluidDensityRange.max
      }],
      titleAlign: 'center',
      xMargin: 10
    });
    this.addChild(fluidDensityControlNode);

    // add the sensors panel
    const sensorPanel = new SensorToolbox(flowModel, modelViewTransform, this, {
      stroke: 'gray',
      lineWidth: 1,
      fill: '#f2fa6a',
      right: unitsControlPanel.left - 4,
      top: toolsControlPanel.top
    });
    this.addChild(sensorPanel);
    flowModel.isGridInjectorPressedProperty.link(isGridInjectorPressed => {
      if (isGridInjectorPressed) {
        flowModel.injectGridParticles();
      }
    });
    // add play pause button and step button
    const stepButton = new StepForwardButton({
      enabledProperty: DerivedProperty.not(flowModel.isPlayingProperty),
      listener: () => {
        flowModel.timer.step(0.016);
        flowModel.propagateParticles(0.016);
        this.pipeNode.particlesLayer.step();
      },
      radius: 12,
      stroke: 'black',
      fill: '#005566',
      right: fluidDensityControlNode.left - 82,
      bottom: this.layoutBounds.bottom - 14
    });
    this.addChild(stepButton);
    const playPauseButton = new PlayPauseButton(flowModel.isPlayingProperty, {
      radius: 18,
      stroke: 'black',
      fill: '#005566',
      y: stepButton.centerY,
      right: stepButton.left - INSET
    });
    this.addChild(playPauseButton);

    // add sim speed controls
    const slowMotionRadioBox = new AquaRadioButton(flowModel.speedProperty, 'slow', new Text(slowMotionString, {
      font: new PhetFont(12)
    }), {
      radius: 8
    });
    const normalMotionRadioBox = new AquaRadioButton(flowModel.speedProperty, 'normal', new Text(normalString, {
      font: new PhetFont(12)
    }), {
      radius: 8
    });
    const speedControlMaxWidth = slowMotionRadioBox.width > normalMotionRadioBox.width ? slowMotionRadioBox.width : normalMotionRadioBox.width;
    const radioButtonSpacing = 5;
    const touchAreaYDilation = radioButtonSpacing / 2;
    slowMotionRadioBox.touchArea = new Bounds2(slowMotionRadioBox.localBounds.minX, slowMotionRadioBox.localBounds.minY - touchAreaYDilation, slowMotionRadioBox.localBounds.minX + speedControlMaxWidth, slowMotionRadioBox.localBounds.maxY + touchAreaYDilation);
    normalMotionRadioBox.touchArea = new Bounds2(normalMotionRadioBox.localBounds.minX, normalMotionRadioBox.localBounds.minY - touchAreaYDilation, normalMotionRadioBox.localBounds.minX + speedControlMaxWidth, normalMotionRadioBox.localBounds.maxY + touchAreaYDilation);
    const speedControl = new VBox({
      align: 'left',
      spacing: radioButtonSpacing,
      children: [slowMotionRadioBox, normalMotionRadioBox]
    });
    this.addChild(speedControl.mutate({
      right: playPauseButton.left - 8,
      bottom: playPauseButton.bottom
    }));

    // add flow rate panel
    const flowRateControlNode = new ControlSlider(flowModel.measureUnitsProperty, flowModel.pipe.flowRateProperty, flowModel.getFluidFlowRateString.bind(flowModel), flowModel.flowRateRange, flowModel.flowRateControlExpandedProperty, {
      right: speedControl.left - 20,
      bottom: fluidDensityControlNode.bottom,
      title: flowRateString,
      ticks: [{
        title: 'Min',
        value: Constants.MIN_FLOW_RATE
      }, {
        title: 'Max',
        value: Constants.MAX_FLOW_RATE
      }],
      ticksVisible: false,
      titleAlign: 'center'
    });
    this.addChild(flowRateControlNode);

    // add the rule node
    toolsLayer.addChild(new FPAFRuler(flowModel.isRulerVisibleProperty, flowModel.rulerPositionProperty, flowModel.measureUnitsProperty, modelViewTransform, this.layoutBounds));
    toolsLayer.moveToFront();
  }

  /**
   * Called by the animation loop.
   * @public
   */
  step() {
    if (this.flowModel.isPlayingProperty.value) {
      this.pipeNode.particlesLayer.step();
    }
  }
}
fluidPressureAndFlow.register('FlowScreenView', FlowScreenView);
export default FlowScreenView;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJCb3VuZHMyIiwiTWF0cml4MyIsIlZlY3RvcjIiLCJTY3JlZW5WaWV3IiwiTW9kZWxWaWV3VHJhbnNmb3JtMiIsIlBsYXlQYXVzZUJ1dHRvbiIsIlJlc2V0QWxsQnV0dG9uIiwiU3RlcEZvcndhcmRCdXR0b24iLCJHcm91bmROb2RlIiwiUGhldEZvbnQiLCJTa3lOb2RlIiwiTm9kZSIsIlBhdHRlcm4iLCJSZWN0YW5nbGUiLCJUZXh0IiwiVkJveCIsIkFxdWFSYWRpb0J1dHRvbiIsImdyYXNzVGV4dHVyZV9wbmciLCJDb25zdGFudHMiLCJDb250cm9sU2xpZGVyIiwiRlBBRlJ1bGVyIiwiU2Vuc29yVG9vbGJveCIsIlVuaXRzQ29udHJvbFBhbmVsIiwiZmx1aWRQcmVzc3VyZUFuZEZsb3ciLCJGbHVpZFByZXNzdXJlQW5kRmxvd1N0cmluZ3MiLCJGbG93VG9vbHNDb250cm9sUGFuZWwiLCJGbHV4TWV0ZXJOb2RlIiwiR3JpZEluamVjdG9yTm9kZSIsIlBpcGVIYW5kbGVzTm9kZSIsIlBpcGVOb2RlIiwiZmxvd1JhdGVTdHJpbmciLCJmbG93UmF0ZSIsImZsdWlkRGVuc2l0eVN0cmluZyIsImZsdWlkRGVuc2l0eSIsImdhc29saW5lU3RyaW5nIiwiZ2Fzb2xpbmUiLCJob25leVN0cmluZyIsImhvbmV5Iiwibm9ybWFsU3RyaW5nIiwibm9ybWFsIiwic2xvd01vdGlvblN0cmluZyIsInNsb3dNb3Rpb24iLCJ3YXRlclN0cmluZyIsIndhdGVyIiwiSU5TRVQiLCJGbG93U2NyZWVuVmlldyIsImNvbnN0cnVjdG9yIiwiZmxvd01vZGVsIiwiU0NSRUVOX1ZJRVdfT1BUSU9OUyIsIm1vZGVsVmlld1RyYW5zZm9ybSIsImNyZWF0ZVNpbmdsZVBvaW50U2NhbGVJbnZlcnRlZFlNYXBwaW5nIiwiWkVSTyIsImdyb3VuZFkiLCJtb2RlbFRvVmlld1kiLCJiYWNrZ3JvdW5kTm9kZVN0YXJ0WCIsImJhY2tncm91bmROb2RlV2lkdGgiLCJza3lFeHRlbnNpb25IZWlnaHQiLCJncm91bmREZXB0aCIsImFkZENoaWxkIiwic3Ryb2tlIiwiZmlsbCIsImdyb3VuZE5vZGUiLCJ0b3BDb2xvciIsImJvdHRvbUNvbG9yIiwiZ3Jhc3NQYXR0ZXJuIiwic2V0VHJhbnNmb3JtTWF0cml4Iiwic2NhbGUiLCJncmFzc1JlY3RZT2Zmc2V0IiwiZ3Jhc3NSZWN0SGVpZ2h0IiwiYm90dG9tIiwidG9wIiwidG9vbHNDb250cm9sUGFuZWwiLCJyaWdodCIsImxheW91dEJvdW5kcyIsInRvb2xzTGF5ZXIiLCJ1bml0c0NvbnRyb2xQYW5lbCIsIm1lYXN1cmVVbml0c1Byb3BlcnR5IiwibGVmdCIsImZsdXhNZXRlck5vZGUiLCJpc0ZsdXhNZXRlclZpc2libGVQcm9wZXJ0eSIsImxpbmtBdHRyaWJ1dGUiLCJlbGxpcHNlMiIsImdyaWRJbmplY3Rvck5vZGUiLCJpc0dyaWRJbmplY3RvclByZXNzZWRQcm9wZXJ0eSIsInBpcGUiLCJwaXBlTm9kZSIsInBpcGVIYW5kbGVzTm9kZSIsInByZVBhcnRpY2xlTGF5ZXIiLCJyZXNldEFsbEJ1dHRvbiIsImxpc3RlbmVyIiwicmVzZXQiLCJzZW5zb3JQYW5lbCIsInJhZGl1cyIsImZsdWlkRGVuc2l0eUNvbnRyb2xOb2RlIiwiZmx1aWREZW5zaXR5UHJvcGVydHkiLCJnZXRGbHVpZERlbnNpdHlTdHJpbmciLCJiaW5kIiwiZmx1aWREZW5zaXR5UmFuZ2UiLCJmbHVpZERlbnNpdHlDb250cm9sRXhwYW5kZWRQcm9wZXJ0eSIsInRpdGxlIiwidGlja3MiLCJ2YWx1ZSIsIm1pbiIsIm1heCIsInRpdGxlQWxpZ24iLCJ4TWFyZ2luIiwibGluZVdpZHRoIiwibGluayIsImlzR3JpZEluamVjdG9yUHJlc3NlZCIsImluamVjdEdyaWRQYXJ0aWNsZXMiLCJzdGVwQnV0dG9uIiwiZW5hYmxlZFByb3BlcnR5Iiwibm90IiwiaXNQbGF5aW5nUHJvcGVydHkiLCJ0aW1lciIsInN0ZXAiLCJwcm9wYWdhdGVQYXJ0aWNsZXMiLCJwYXJ0aWNsZXNMYXllciIsInBsYXlQYXVzZUJ1dHRvbiIsInkiLCJjZW50ZXJZIiwic2xvd01vdGlvblJhZGlvQm94Iiwic3BlZWRQcm9wZXJ0eSIsImZvbnQiLCJub3JtYWxNb3Rpb25SYWRpb0JveCIsInNwZWVkQ29udHJvbE1heFdpZHRoIiwid2lkdGgiLCJyYWRpb0J1dHRvblNwYWNpbmciLCJ0b3VjaEFyZWFZRGlsYXRpb24iLCJ0b3VjaEFyZWEiLCJsb2NhbEJvdW5kcyIsIm1pblgiLCJtaW5ZIiwibWF4WSIsInNwZWVkQ29udHJvbCIsImFsaWduIiwic3BhY2luZyIsImNoaWxkcmVuIiwibXV0YXRlIiwiZmxvd1JhdGVDb250cm9sTm9kZSIsImZsb3dSYXRlUHJvcGVydHkiLCJnZXRGbHVpZEZsb3dSYXRlU3RyaW5nIiwiZmxvd1JhdGVSYW5nZSIsImZsb3dSYXRlQ29udHJvbEV4cGFuZGVkUHJvcGVydHkiLCJNSU5fRkxPV19SQVRFIiwiTUFYX0ZMT1dfUkFURSIsInRpY2tzVmlzaWJsZSIsImlzUnVsZXJWaXNpYmxlUHJvcGVydHkiLCJydWxlclBvc2l0aW9uUHJvcGVydHkiLCJtb3ZlVG9Gcm9udCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiRmxvd1NjcmVlblZpZXcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTQtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogVmlldyBmb3IgdGhlIEZsdWlkIFByZXNzdXJlIGFuZCBGbG93IHNpbSdzIEZsb3cgdGFiLiBUaGUgdmlldyBjb250YWlucyBhIGZsZXhpYmxlIHBpcGUgdGhhdCBjYW4gYmUgZHJhZ2dlZFxyXG4gKiBhbmQgc2NhbGVkIHVzaW5nIGhhbmRsZXMsIHBhcnRpY2xlcyB0byBzaG93IHRoZSBmbHVpZCBmbG93IGFuZCB0b29scyB0byBtZWFzdXJlIGZsdXgsIGFyZWEsIGxlbmd0aCwgdmVsb2NpdHkgZXRjLlxyXG4gKlxyXG4gKiBAYXV0aG9yIFNpZGRoYXJ0aGEgQ2hpbnRoYXBhbGx5IChBY3R1YWwgQ29uY2VwdHMpLlxyXG4gKi9cclxuXHJcbmltcG9ydCBEZXJpdmVkUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9EZXJpdmVkUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgQm91bmRzMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvQm91bmRzMi5qcyc7XHJcbmltcG9ydCBNYXRyaXgzIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9NYXRyaXgzLmpzJztcclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgU2NyZWVuVmlldyBmcm9tICcuLi8uLi8uLi8uLi9qb2lzdC9qcy9TY3JlZW5WaWV3LmpzJztcclxuaW1wb3J0IE1vZGVsVmlld1RyYW5zZm9ybTIgZnJvbSAnLi4vLi4vLi4vLi4vcGhldGNvbW1vbi9qcy92aWV3L01vZGVsVmlld1RyYW5zZm9ybTIuanMnO1xyXG5pbXBvcnQgUGxheVBhdXNlQnV0dG9uIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9idXR0b25zL1BsYXlQYXVzZUJ1dHRvbi5qcyc7XHJcbmltcG9ydCBSZXNldEFsbEJ1dHRvbiBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvYnV0dG9ucy9SZXNldEFsbEJ1dHRvbi5qcyc7XHJcbmltcG9ydCBTdGVwRm9yd2FyZEJ1dHRvbiBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvYnV0dG9ucy9TdGVwRm9yd2FyZEJ1dHRvbi5qcyc7XHJcbmltcG9ydCBHcm91bmROb2RlIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9Hcm91bmROb2RlLmpzJztcclxuaW1wb3J0IFBoZXRGb250IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9QaGV0Rm9udC5qcyc7XHJcbmltcG9ydCBTa3lOb2RlIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9Ta3lOb2RlLmpzJztcclxuaW1wb3J0IHsgTm9kZSwgUGF0dGVybiwgUmVjdGFuZ2xlLCBUZXh0LCBWQm94IH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IEFxdWFSYWRpb0J1dHRvbiBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvQXF1YVJhZGlvQnV0dG9uLmpzJztcclxuaW1wb3J0IGdyYXNzVGV4dHVyZV9wbmcgZnJvbSAnLi4vLi4vLi4vaW1hZ2VzL2dyYXNzVGV4dHVyZV9wbmcuanMnO1xyXG5pbXBvcnQgQ29uc3RhbnRzIGZyb20gJy4uLy4uL2NvbW1vbi9Db25zdGFudHMuanMnO1xyXG5pbXBvcnQgQ29udHJvbFNsaWRlciBmcm9tICcuLi8uLi9jb21tb24vdmlldy9Db250cm9sU2xpZGVyLmpzJztcclxuaW1wb3J0IEZQQUZSdWxlciBmcm9tICcuLi8uLi9jb21tb24vdmlldy9GUEFGUnVsZXIuanMnO1xyXG5pbXBvcnQgU2Vuc29yVG9vbGJveCBmcm9tICcuLi8uLi9jb21tb24vdmlldy9TZW5zb3JUb29sYm94LmpzJztcclxuaW1wb3J0IFVuaXRzQ29udHJvbFBhbmVsIGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L1VuaXRzQ29udHJvbFBhbmVsLmpzJztcclxuaW1wb3J0IGZsdWlkUHJlc3N1cmVBbmRGbG93IGZyb20gJy4uLy4uL2ZsdWlkUHJlc3N1cmVBbmRGbG93LmpzJztcclxuaW1wb3J0IEZsdWlkUHJlc3N1cmVBbmRGbG93U3RyaW5ncyBmcm9tICcuLi8uLi9GbHVpZFByZXNzdXJlQW5kRmxvd1N0cmluZ3MuanMnO1xyXG5pbXBvcnQgRmxvd1Rvb2xzQ29udHJvbFBhbmVsIGZyb20gJy4vRmxvd1Rvb2xzQ29udHJvbFBhbmVsLmpzJztcclxuaW1wb3J0IEZsdXhNZXRlck5vZGUgZnJvbSAnLi9GbHV4TWV0ZXJOb2RlLmpzJztcclxuaW1wb3J0IEdyaWRJbmplY3Rvck5vZGUgZnJvbSAnLi9HcmlkSW5qZWN0b3JOb2RlLmpzJztcclxuaW1wb3J0IFBpcGVIYW5kbGVzTm9kZSBmcm9tICcuL1BpcGVIYW5kbGVzTm9kZS5qcyc7XHJcbmltcG9ydCBQaXBlTm9kZSBmcm9tICcuL1BpcGVOb2RlLmpzJztcclxuXHJcbmNvbnN0IGZsb3dSYXRlU3RyaW5nID0gRmx1aWRQcmVzc3VyZUFuZEZsb3dTdHJpbmdzLmZsb3dSYXRlO1xyXG5jb25zdCBmbHVpZERlbnNpdHlTdHJpbmcgPSBGbHVpZFByZXNzdXJlQW5kRmxvd1N0cmluZ3MuZmx1aWREZW5zaXR5O1xyXG5jb25zdCBnYXNvbGluZVN0cmluZyA9IEZsdWlkUHJlc3N1cmVBbmRGbG93U3RyaW5ncy5nYXNvbGluZTtcclxuY29uc3QgaG9uZXlTdHJpbmcgPSBGbHVpZFByZXNzdXJlQW5kRmxvd1N0cmluZ3MuaG9uZXk7XHJcbmNvbnN0IG5vcm1hbFN0cmluZyA9IEZsdWlkUHJlc3N1cmVBbmRGbG93U3RyaW5ncy5ub3JtYWw7XHJcbmNvbnN0IHNsb3dNb3Rpb25TdHJpbmcgPSBGbHVpZFByZXNzdXJlQW5kRmxvd1N0cmluZ3Muc2xvd01vdGlvbjtcclxuY29uc3Qgd2F0ZXJTdHJpbmcgPSBGbHVpZFByZXNzdXJlQW5kRmxvd1N0cmluZ3Mud2F0ZXI7XHJcblxyXG4vL2ltYWdlc1xyXG5cclxuLy9WaWV3IGxheW91dCByZWxhdGVkIGNvbnN0YW50c1xyXG5jb25zdCBJTlNFVCA9IDEwO1xyXG5cclxuY2xhc3MgRmxvd1NjcmVlblZpZXcgZXh0ZW5kcyBTY3JlZW5WaWV3IHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtGbG93TW9kZWx9IGZsb3dNb2RlbFxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBmbG93TW9kZWwgKSB7XHJcblxyXG4gICAgc3VwZXIoIENvbnN0YW50cy5TQ1JFRU5fVklFV19PUFRJT05TICk7XHJcblxyXG4gICAgLy8gdmlldyBjby1vcmRpbmF0ZXMgKDM3MCwxNDApIG1hcCB0byBtb2RlbCBvcmlnaW4gKDAsMCkgd2l0aCBpbnZlcnRlZCB5LWF4aXMgKHkgZ3Jvd3MgdXAgaW4gdGhlIG1vZGVsKVxyXG4gICAgY29uc3QgbW9kZWxWaWV3VHJhbnNmb3JtID0gTW9kZWxWaWV3VHJhbnNmb3JtMi5jcmVhdGVTaW5nbGVQb2ludFNjYWxlSW52ZXJ0ZWRZTWFwcGluZyhcclxuICAgICAgVmVjdG9yMi5aRVJPLFxyXG4gICAgICBuZXcgVmVjdG9yMiggMzcwLCAxNDAgKSxcclxuICAgICAgNTAgKTsgLy8xbSA9IDUwUHhcclxuXHJcbiAgICBjb25zdCBncm91bmRZID0gbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WSggMCApO1xyXG4gICAgY29uc3QgYmFja2dyb3VuZE5vZGVTdGFydFggPSAtNTAwMDtcclxuICAgIGNvbnN0IGJhY2tncm91bmROb2RlV2lkdGggPSAxMDAwMDtcclxuICAgIGNvbnN0IHNreUV4dGVuc2lvbkhlaWdodCA9IDEwMDAwO1xyXG4gICAgY29uc3QgZ3JvdW5kRGVwdGggPSAxMDAwMDtcclxuICAgIHRoaXMuZmxvd01vZGVsID0gZmxvd01vZGVsO1xyXG5cclxuICAgIC8vIFRoaXMgaXMgYSB3b3JrYXJvdW5kLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL2ZsdWlkLXByZXNzdXJlLWFuZC1mbG93L2lzc3Vlcy84N1xyXG4gICAgLy8gYWRkIHJlY3RhbmdsZSBvbiB0b3Agb2YgdGhlIHNreSBub2RlIHRvIGV4dGVuZCBza3kgdXB3YXJkcy5cclxuICAgIHRoaXMuYWRkQ2hpbGQoIG5ldyBSZWN0YW5nbGUoIGJhY2tncm91bmROb2RlU3RhcnRYLCAtc2t5RXh0ZW5zaW9uSGVpZ2h0LCBiYWNrZ3JvdW5kTm9kZVdpZHRoLCBza3lFeHRlbnNpb25IZWlnaHQsXHJcbiAgICAgIHsgc3Ryb2tlOiAnIzAxQUNFNCcsIGZpbGw6ICcjMDFBQ0U0JyB9ICkgKTtcclxuXHJcbiAgICAvLyBhZGQgc2t5IG5vZGVcclxuICAgIHRoaXMuYWRkQ2hpbGQoIG5ldyBTa3lOb2RlKCBiYWNrZ3JvdW5kTm9kZVN0YXJ0WCwgMCwgYmFja2dyb3VuZE5vZGVXaWR0aCwgZ3JvdW5kWSwgZ3JvdW5kWSApICk7XHJcblxyXG4gICAgLy8gYWRkIGdyb3VuZCBub2RlIHdpdGggZ3JhZGllbnRcclxuICAgIGNvbnN0IGdyb3VuZE5vZGUgPSBuZXcgR3JvdW5kTm9kZSggYmFja2dyb3VuZE5vZGVTdGFydFgsIGdyb3VuZFksIGJhY2tncm91bmROb2RlV2lkdGgsIGdyb3VuZERlcHRoLCA0MDAsXHJcbiAgICAgIHsgdG9wQ29sb3I6ICcjOUQ4QjYxJywgYm90dG9tQ29sb3I6ICcjNjQ1QTNDJyB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBncm91bmROb2RlICk7XHJcblxyXG4gICAgLy8gYWRkIGdyYXNzIGFib3ZlIHRoZSBncm91bmRcclxuICAgIGNvbnN0IGdyYXNzUGF0dGVybiA9IG5ldyBQYXR0ZXJuKCBncmFzc1RleHR1cmVfcG5nICkuc2V0VHJhbnNmb3JtTWF0cml4KCBNYXRyaXgzLnNjYWxlKCAwLjI1ICkgKTtcclxuICAgIGNvbnN0IGdyYXNzUmVjdFlPZmZzZXQgPSAxO1xyXG4gICAgY29uc3QgZ3Jhc3NSZWN0SGVpZ2h0ID0gMTA7XHJcblxyXG4gICAgdGhpcy5hZGRDaGlsZCggbmV3IFJlY3RhbmdsZSggYmFja2dyb3VuZE5vZGVTdGFydFgsIGdyYXNzUmVjdFlPZmZzZXQsIGJhY2tncm91bmROb2RlV2lkdGgsIGdyYXNzUmVjdEhlaWdodCwge1xyXG4gICAgICBmaWxsOiBncmFzc1BhdHRlcm4sXHJcbiAgICAgIGJvdHRvbTogZ3JvdW5kTm9kZS50b3BcclxuICAgIH0gKSApO1xyXG5cclxuICAgIC8vIENvbnRyb2wgcGFuZWwgd2l0aCBjaGVja2JveGVzIHRvIHRvZ2dsZSB0b29scyBvbiB0aGUgc2NyZWVuXHJcbiAgICBjb25zdCB0b29sc0NvbnRyb2xQYW5lbCA9IG5ldyBGbG93VG9vbHNDb250cm9sUGFuZWwoIGZsb3dNb2RlbCwgeyByaWdodDogdGhpcy5sYXlvdXRCb3VuZHMucmlnaHQgLSA3LCB0b3A6IDcgfSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggdG9vbHNDb250cm9sUGFuZWwgKTtcclxuXHJcbiAgICAvLyBhbGwgdGhlIG1vdmFibGUgdG9vbHMgYXJlIGFkZGVkIHRvIHRoaXMgbGF5ZXJcclxuICAgIGNvbnN0IHRvb2xzTGF5ZXIgPSBuZXcgTm9kZSgpO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggdG9vbHNMYXllciApO1xyXG5cclxuICAgIC8vIHVuaXRzIGNvbnRyb2wgcGFuZWxcclxuICAgIGNvbnN0IHVuaXRzQ29udHJvbFBhbmVsID0gbmV3IFVuaXRzQ29udHJvbFBhbmVsKCBmbG93TW9kZWwubWVhc3VyZVVuaXRzUHJvcGVydHksXHJcbiAgICAgIHsgcmlnaHQ6IHRvb2xzQ29udHJvbFBhbmVsLmxlZnQgLSA3LCB0b3A6IHRvb2xzQ29udHJvbFBhbmVsLnRvcCB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCB1bml0c0NvbnRyb2xQYW5lbCApO1xyXG5cclxuICAgIGNvbnN0IGZsdXhNZXRlck5vZGUgPSBuZXcgRmx1eE1ldGVyTm9kZSggZmxvd01vZGVsLCBtb2RlbFZpZXdUcmFuc2Zvcm0sIHsgc3Ryb2tlOiAnYmx1ZScgfSApO1xyXG4gICAgZmxvd01vZGVsLmlzRmx1eE1ldGVyVmlzaWJsZVByb3BlcnR5LmxpbmtBdHRyaWJ1dGUoIGZsdXhNZXRlck5vZGUuZWxsaXBzZTIsICd2aXNpYmxlJyApO1xyXG5cclxuICAgIC8vIEluamVjdG9yIHdoaWNoIGdlbmVyYXRlcyBncmlkIHBhcnRpY2xlc1xyXG4gICAgY29uc3QgZ3JpZEluamVjdG9yTm9kZSA9IG5ldyBHcmlkSW5qZWN0b3JOb2RlKCBmbG93TW9kZWwuaXNHcmlkSW5qZWN0b3JQcmVzc2VkUHJvcGVydHksIG1vZGVsVmlld1RyYW5zZm9ybSxcclxuICAgICAgZmxvd01vZGVsLnBpcGUgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIGdyaWRJbmplY3Rvck5vZGUgKTtcclxuXHJcbiAgICAvLyBhZGQgdGhlIHBpcGUgKHdpdGhvdXQgaGFuZGxlcylcclxuICAgIHRoaXMucGlwZU5vZGUgPSBuZXcgUGlwZU5vZGUoIGZsb3dNb2RlbCwgbW9kZWxWaWV3VHJhbnNmb3JtLCB0aGlzLmxheW91dEJvdW5kcyApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggdGhpcy5waXBlTm9kZSApO1xyXG5cclxuICAgIC8vIGFkZCB0aGUgaGFuZGxlc1xyXG4gICAgY29uc3QgcGlwZUhhbmRsZXNOb2RlID0gbmV3IFBpcGVIYW5kbGVzTm9kZSggZmxvd01vZGVsLCB0aGlzLnBpcGVOb2RlLCBncmlkSW5qZWN0b3JOb2RlLCBtb2RlbFZpZXdUcmFuc2Zvcm0sXHJcbiAgICAgIHRoaXMubGF5b3V0Qm91bmRzICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBwaXBlSGFuZGxlc05vZGUgKTtcclxuXHJcbiAgICAvLyBhZGQgdGhlIGJhY2sgZWxsaXBzZSBvZiB0aGUgZmx1eE1ldGVyIHRvIHRoZSBwaXBlIG5vZGUncyBwcmUtcGFydGljbGUgbGF5ZXJcclxuICAgIHRoaXMucGlwZU5vZGUucHJlUGFydGljbGVMYXllci5hZGRDaGlsZCggZmx1eE1ldGVyTm9kZS5lbGxpcHNlMiApO1xyXG5cclxuICAgIC8vIG5vdyBhZGQgdGhlIGZyb250IHBhcnQgb2YgdGhlIGZsdXhNZXRlclxyXG4gICAgdG9vbHNMYXllci5hZGRDaGlsZCggZmx1eE1ldGVyTm9kZSApO1xyXG5cclxuICAgIC8vIGFkZCB0aGUgcmVzZXQgYnV0dG9uXHJcbiAgICBjb25zdCByZXNldEFsbEJ1dHRvbiA9IG5ldyBSZXNldEFsbEJ1dHRvbigge1xyXG4gICAgICBsaXN0ZW5lcjogKCkgPT4ge1xyXG4gICAgICAgIGZsb3dNb2RlbC5yZXNldCgpO1xyXG4gICAgICAgIHRoaXMucGlwZU5vZGUucmVzZXQoKTtcclxuICAgICAgICBwaXBlSGFuZGxlc05vZGUucmVzZXQoKTtcclxuICAgICAgICBzZW5zb3JQYW5lbC5yZXNldCgpO1xyXG4gICAgICB9LFxyXG4gICAgICByYWRpdXM6IDE4LFxyXG4gICAgICBib3R0b206IHRoaXMubGF5b3V0Qm91bmRzLmJvdHRvbSAtIDcsXHJcbiAgICAgIHJpZ2h0OiB0aGlzLmxheW91dEJvdW5kcy5yaWdodCAtIDEzXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCByZXNldEFsbEJ1dHRvbiApO1xyXG5cclxuICAgIC8vIGFkZCB0aGUgZmx1aWQgZGVuc2l0eSBjb250cm9sIHNsaWRlclxyXG4gICAgY29uc3QgZmx1aWREZW5zaXR5Q29udHJvbE5vZGUgPSBuZXcgQ29udHJvbFNsaWRlcihcclxuICAgICAgZmxvd01vZGVsLm1lYXN1cmVVbml0c1Byb3BlcnR5LFxyXG4gICAgICBmbG93TW9kZWwuZmx1aWREZW5zaXR5UHJvcGVydHksXHJcbiAgICAgIGZsb3dNb2RlbC5nZXRGbHVpZERlbnNpdHlTdHJpbmcuYmluZCggZmxvd01vZGVsICksXHJcbiAgICAgIGZsb3dNb2RlbC5mbHVpZERlbnNpdHlSYW5nZSxcclxuICAgICAgZmxvd01vZGVsLmZsdWlkRGVuc2l0eUNvbnRyb2xFeHBhbmRlZFByb3BlcnR5LFxyXG4gICAgICB7XHJcbiAgICAgICAgcmlnaHQ6IHJlc2V0QWxsQnV0dG9uLmxlZnQgLSA1NSxcclxuICAgICAgICBib3R0b206IHJlc2V0QWxsQnV0dG9uLmJvdHRvbSxcclxuICAgICAgICB0aXRsZTogZmx1aWREZW5zaXR5U3RyaW5nLFxyXG4gICAgICAgIHRpY2tzOiBbXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHRpdGxlOiB3YXRlclN0cmluZyxcclxuICAgICAgICAgICAgdmFsdWU6IGZsb3dNb2RlbC5mbHVpZERlbnNpdHlQcm9wZXJ0eS52YWx1ZVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgdGl0bGU6IGdhc29saW5lU3RyaW5nLFxyXG4gICAgICAgICAgICB2YWx1ZTogZmxvd01vZGVsLmZsdWlkRGVuc2l0eVJhbmdlLm1pblxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgdGl0bGU6IGhvbmV5U3RyaW5nLFxyXG4gICAgICAgICAgICB2YWx1ZTogZmxvd01vZGVsLmZsdWlkRGVuc2l0eVJhbmdlLm1heFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgdGl0bGVBbGlnbjogJ2NlbnRlcicsXHJcbiAgICAgICAgeE1hcmdpbjogMTBcclxuICAgICAgfSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggZmx1aWREZW5zaXR5Q29udHJvbE5vZGUgKTtcclxuXHJcbiAgICAvLyBhZGQgdGhlIHNlbnNvcnMgcGFuZWxcclxuICAgIGNvbnN0IHNlbnNvclBhbmVsID0gbmV3IFNlbnNvclRvb2xib3goIGZsb3dNb2RlbCwgbW9kZWxWaWV3VHJhbnNmb3JtLCB0aGlzLCB7XHJcbiAgICAgIHN0cm9rZTogJ2dyYXknLCBsaW5lV2lkdGg6IDEsIGZpbGw6ICcjZjJmYTZhJyxcclxuICAgICAgcmlnaHQ6IHVuaXRzQ29udHJvbFBhbmVsLmxlZnQgLSA0LCB0b3A6IHRvb2xzQ29udHJvbFBhbmVsLnRvcFxyXG4gICAgfSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggc2Vuc29yUGFuZWwgKTtcclxuXHJcbiAgICBmbG93TW9kZWwuaXNHcmlkSW5qZWN0b3JQcmVzc2VkUHJvcGVydHkubGluayggaXNHcmlkSW5qZWN0b3JQcmVzc2VkID0+IHtcclxuICAgICAgaWYgKCBpc0dyaWRJbmplY3RvclByZXNzZWQgKSB7XHJcbiAgICAgICAgZmxvd01vZGVsLmluamVjdEdyaWRQYXJ0aWNsZXMoKTtcclxuICAgICAgfVxyXG4gICAgfSApO1xyXG4gICAgLy8gYWRkIHBsYXkgcGF1c2UgYnV0dG9uIGFuZCBzdGVwIGJ1dHRvblxyXG4gICAgY29uc3Qgc3RlcEJ1dHRvbiA9IG5ldyBTdGVwRm9yd2FyZEJ1dHRvbigge1xyXG4gICAgICBlbmFibGVkUHJvcGVydHk6IERlcml2ZWRQcm9wZXJ0eS5ub3QoIGZsb3dNb2RlbC5pc1BsYXlpbmdQcm9wZXJ0eSApLFxyXG4gICAgICBsaXN0ZW5lcjogKCkgPT4ge1xyXG4gICAgICAgIGZsb3dNb2RlbC50aW1lci5zdGVwKCAwLjAxNiApO1xyXG4gICAgICAgIGZsb3dNb2RlbC5wcm9wYWdhdGVQYXJ0aWNsZXMoIDAuMDE2ICk7XHJcbiAgICAgICAgdGhpcy5waXBlTm9kZS5wYXJ0aWNsZXNMYXllci5zdGVwKCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHJhZGl1czogMTIsXHJcbiAgICAgIHN0cm9rZTogJ2JsYWNrJyxcclxuICAgICAgZmlsbDogJyMwMDU1NjYnLFxyXG4gICAgICByaWdodDogZmx1aWREZW5zaXR5Q29udHJvbE5vZGUubGVmdCAtIDgyLFxyXG4gICAgICBib3R0b206IHRoaXMubGF5b3V0Qm91bmRzLmJvdHRvbSAtIDE0XHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5hZGRDaGlsZCggc3RlcEJ1dHRvbiApO1xyXG5cclxuICAgIGNvbnN0IHBsYXlQYXVzZUJ1dHRvbiA9IG5ldyBQbGF5UGF1c2VCdXR0b24oIGZsb3dNb2RlbC5pc1BsYXlpbmdQcm9wZXJ0eSwge1xyXG4gICAgICByYWRpdXM6IDE4LFxyXG4gICAgICBzdHJva2U6ICdibGFjaycsXHJcbiAgICAgIGZpbGw6ICcjMDA1NTY2JyxcclxuICAgICAgeTogc3RlcEJ1dHRvbi5jZW50ZXJZLFxyXG4gICAgICByaWdodDogc3RlcEJ1dHRvbi5sZWZ0IC0gSU5TRVRcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHBsYXlQYXVzZUJ1dHRvbiApO1xyXG5cclxuICAgIC8vIGFkZCBzaW0gc3BlZWQgY29udHJvbHNcclxuICAgIGNvbnN0IHNsb3dNb3Rpb25SYWRpb0JveCA9IG5ldyBBcXVhUmFkaW9CdXR0b24oIGZsb3dNb2RlbC5zcGVlZFByb3BlcnR5LCAnc2xvdycsXHJcbiAgICAgIG5ldyBUZXh0KCBzbG93TW90aW9uU3RyaW5nLCB7IGZvbnQ6IG5ldyBQaGV0Rm9udCggMTIgKSB9ICksIHsgcmFkaXVzOiA4IH0gKTtcclxuICAgIGNvbnN0IG5vcm1hbE1vdGlvblJhZGlvQm94ID0gbmV3IEFxdWFSYWRpb0J1dHRvbiggZmxvd01vZGVsLnNwZWVkUHJvcGVydHksICdub3JtYWwnLFxyXG4gICAgICBuZXcgVGV4dCggbm9ybWFsU3RyaW5nLCB7IGZvbnQ6IG5ldyBQaGV0Rm9udCggMTIgKSB9ICksIHsgcmFkaXVzOiA4IH0gKTtcclxuXHJcbiAgICBjb25zdCBzcGVlZENvbnRyb2xNYXhXaWR0aCA9ICggc2xvd01vdGlvblJhZGlvQm94LndpZHRoID4gbm9ybWFsTW90aW9uUmFkaW9Cb3gud2lkdGggKSA/IHNsb3dNb3Rpb25SYWRpb0JveC53aWR0aCA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbE1vdGlvblJhZGlvQm94LndpZHRoO1xyXG5cclxuICAgIGNvbnN0IHJhZGlvQnV0dG9uU3BhY2luZyA9IDU7XHJcbiAgICBjb25zdCB0b3VjaEFyZWFZRGlsYXRpb24gPSByYWRpb0J1dHRvblNwYWNpbmcgLyAyO1xyXG4gICAgc2xvd01vdGlvblJhZGlvQm94LnRvdWNoQXJlYSA9IG5ldyBCb3VuZHMyKFxyXG4gICAgICBzbG93TW90aW9uUmFkaW9Cb3gubG9jYWxCb3VuZHMubWluWCxcclxuICAgICAgc2xvd01vdGlvblJhZGlvQm94LmxvY2FsQm91bmRzLm1pblkgLSB0b3VjaEFyZWFZRGlsYXRpb24sXHJcbiAgICAgICggc2xvd01vdGlvblJhZGlvQm94LmxvY2FsQm91bmRzLm1pblggKyBzcGVlZENvbnRyb2xNYXhXaWR0aCApLFxyXG4gICAgICBzbG93TW90aW9uUmFkaW9Cb3gubG9jYWxCb3VuZHMubWF4WSArIHRvdWNoQXJlYVlEaWxhdGlvblxyXG4gICAgKTtcclxuXHJcbiAgICBub3JtYWxNb3Rpb25SYWRpb0JveC50b3VjaEFyZWEgPSBuZXcgQm91bmRzMihcclxuICAgICAgbm9ybWFsTW90aW9uUmFkaW9Cb3gubG9jYWxCb3VuZHMubWluWCxcclxuICAgICAgbm9ybWFsTW90aW9uUmFkaW9Cb3gubG9jYWxCb3VuZHMubWluWSAtIHRvdWNoQXJlYVlEaWxhdGlvbixcclxuICAgICAgKCBub3JtYWxNb3Rpb25SYWRpb0JveC5sb2NhbEJvdW5kcy5taW5YICsgc3BlZWRDb250cm9sTWF4V2lkdGggKSxcclxuICAgICAgbm9ybWFsTW90aW9uUmFkaW9Cb3gubG9jYWxCb3VuZHMubWF4WSArIHRvdWNoQXJlYVlEaWxhdGlvblxyXG4gICAgKTtcclxuXHJcbiAgICBjb25zdCBzcGVlZENvbnRyb2wgPSBuZXcgVkJveCgge1xyXG4gICAgICBhbGlnbjogJ2xlZnQnLFxyXG4gICAgICBzcGFjaW5nOiByYWRpb0J1dHRvblNwYWNpbmcsXHJcbiAgICAgIGNoaWxkcmVuOiBbIHNsb3dNb3Rpb25SYWRpb0JveCwgbm9ybWFsTW90aW9uUmFkaW9Cb3ggXVxyXG4gICAgfSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggc3BlZWRDb250cm9sLm11dGF0ZSggeyByaWdodDogcGxheVBhdXNlQnV0dG9uLmxlZnQgLSA4LCBib3R0b206IHBsYXlQYXVzZUJ1dHRvbi5ib3R0b20gfSApICk7XHJcblxyXG4gICAgLy8gYWRkIGZsb3cgcmF0ZSBwYW5lbFxyXG4gICAgY29uc3QgZmxvd1JhdGVDb250cm9sTm9kZSA9IG5ldyBDb250cm9sU2xpZGVyKFxyXG4gICAgICBmbG93TW9kZWwubWVhc3VyZVVuaXRzUHJvcGVydHksXHJcbiAgICAgIGZsb3dNb2RlbC5waXBlLmZsb3dSYXRlUHJvcGVydHksXHJcbiAgICAgIGZsb3dNb2RlbC5nZXRGbHVpZEZsb3dSYXRlU3RyaW5nLmJpbmQoIGZsb3dNb2RlbCApLFxyXG4gICAgICBmbG93TW9kZWwuZmxvd1JhdGVSYW5nZSxcclxuICAgICAgZmxvd01vZGVsLmZsb3dSYXRlQ29udHJvbEV4cGFuZGVkUHJvcGVydHksXHJcbiAgICAgIHtcclxuICAgICAgICByaWdodDogc3BlZWRDb250cm9sLmxlZnQgLSAyMCxcclxuICAgICAgICBib3R0b206IGZsdWlkRGVuc2l0eUNvbnRyb2xOb2RlLmJvdHRvbSxcclxuICAgICAgICB0aXRsZTogZmxvd1JhdGVTdHJpbmcsXHJcbiAgICAgICAgdGlja3M6IFtcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgdGl0bGU6ICdNaW4nLFxyXG4gICAgICAgICAgICB2YWx1ZTogQ29uc3RhbnRzLk1JTl9GTE9XX1JBVEVcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHRpdGxlOiAnTWF4JyxcclxuICAgICAgICAgICAgdmFsdWU6IENvbnN0YW50cy5NQVhfRkxPV19SQVRFXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgXSxcclxuICAgICAgICB0aWNrc1Zpc2libGU6IGZhbHNlLFxyXG4gICAgICAgIHRpdGxlQWxpZ246ICdjZW50ZXInXHJcbiAgICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIGZsb3dSYXRlQ29udHJvbE5vZGUgKTtcclxuXHJcblxyXG4gICAgLy8gYWRkIHRoZSBydWxlIG5vZGVcclxuICAgIHRvb2xzTGF5ZXIuYWRkQ2hpbGQoIG5ldyBGUEFGUnVsZXIoXHJcbiAgICAgIGZsb3dNb2RlbC5pc1J1bGVyVmlzaWJsZVByb3BlcnR5LFxyXG4gICAgICBmbG93TW9kZWwucnVsZXJQb3NpdGlvblByb3BlcnR5LFxyXG4gICAgICBmbG93TW9kZWwubWVhc3VyZVVuaXRzUHJvcGVydHksXHJcbiAgICAgIG1vZGVsVmlld1RyYW5zZm9ybSxcclxuICAgICAgdGhpcy5sYXlvdXRCb3VuZHMgKVxyXG4gICAgKTtcclxuXHJcbiAgICB0b29sc0xheWVyLm1vdmVUb0Zyb250KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDYWxsZWQgYnkgdGhlIGFuaW1hdGlvbiBsb29wLlxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBzdGVwKCkge1xyXG4gICAgaWYgKCB0aGlzLmZsb3dNb2RlbC5pc1BsYXlpbmdQcm9wZXJ0eS52YWx1ZSApIHtcclxuICAgICAgdGhpcy5waXBlTm9kZS5wYXJ0aWNsZXNMYXllci5zdGVwKCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mbHVpZFByZXNzdXJlQW5kRmxvdy5yZWdpc3RlciggJ0Zsb3dTY3JlZW5WaWV3JywgRmxvd1NjcmVlblZpZXcgKTtcclxuZXhwb3J0IGRlZmF1bHQgRmxvd1NjcmVlblZpZXc7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsZUFBZSxNQUFNLHdDQUF3QztBQUNwRSxPQUFPQyxPQUFPLE1BQU0sK0JBQStCO0FBQ25ELE9BQU9DLE9BQU8sTUFBTSwrQkFBK0I7QUFDbkQsT0FBT0MsT0FBTyxNQUFNLCtCQUErQjtBQUNuRCxPQUFPQyxVQUFVLE1BQU0sb0NBQW9DO0FBQzNELE9BQU9DLG1CQUFtQixNQUFNLHVEQUF1RDtBQUN2RixPQUFPQyxlQUFlLE1BQU0sd0RBQXdEO0FBQ3BGLE9BQU9DLGNBQWMsTUFBTSx1REFBdUQ7QUFDbEYsT0FBT0MsaUJBQWlCLE1BQU0sMERBQTBEO0FBQ3hGLE9BQU9DLFVBQVUsTUFBTSwyQ0FBMkM7QUFDbEUsT0FBT0MsUUFBUSxNQUFNLHlDQUF5QztBQUM5RCxPQUFPQyxPQUFPLE1BQU0sd0NBQXdDO0FBQzVELFNBQVNDLElBQUksRUFBRUMsT0FBTyxFQUFFQyxTQUFTLEVBQUVDLElBQUksRUFBRUMsSUFBSSxRQUFRLG1DQUFtQztBQUN4RixPQUFPQyxlQUFlLE1BQU0sdUNBQXVDO0FBQ25FLE9BQU9DLGdCQUFnQixNQUFNLHFDQUFxQztBQUNsRSxPQUFPQyxTQUFTLE1BQU0sMkJBQTJCO0FBQ2pELE9BQU9DLGFBQWEsTUFBTSxvQ0FBb0M7QUFDOUQsT0FBT0MsU0FBUyxNQUFNLGdDQUFnQztBQUN0RCxPQUFPQyxhQUFhLE1BQU0sb0NBQW9DO0FBQzlELE9BQU9DLGlCQUFpQixNQUFNLHdDQUF3QztBQUN0RSxPQUFPQyxvQkFBb0IsTUFBTSwrQkFBK0I7QUFDaEUsT0FBT0MsMkJBQTJCLE1BQU0sc0NBQXNDO0FB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