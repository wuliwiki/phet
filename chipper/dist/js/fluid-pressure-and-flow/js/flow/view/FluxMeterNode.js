// Copyright 2014-2023, University of Colorado Boulder

/**
 * View for the flux meter tool. Looks like a ring around the pipe with a display panel at the top and a drag handle
 * at the bottom. The ring is rendered in two layers so that particles can pass through the ring.
 * A flux meter that display flow rate, area and flux at a particular cross section.
 *
 * @author Siddhartha Chinthapally (Actual Concepts)
 */

import Multilink from '../../../../axon/js/Multilink.js';
import Utils from '../../../../dot/js/Utils.js';
import { Shape } from '../../../../kite/js/imports.js';
import merge from '../../../../phet-core/js/merge.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { Color, HBox, HStrut, Image, Node, Path, RichText, SimpleDragHandler, Text, VBox } from '../../../../scenery/js/imports.js';
import Panel from '../../../../sun/js/Panel.js';
import handleTwoSided_png from '../../../images/handleTwoSided_png.js';
import Units from '../../common/model/Units.js';
import fluidPressureAndFlow from '../../fluidPressureAndFlow.js';
import FluidPressureAndFlowStrings from '../../FluidPressureAndFlowStrings.js';
const areaString = FluidPressureAndFlowStrings.area;
const areaUnitsEnglishString = FluidPressureAndFlowStrings.areaUnitsEnglish;
const areaUnitsMetricString = FluidPressureAndFlowStrings.areaUnitsMetric;
const flowRateWithColonString = FluidPressureAndFlowStrings.flowRateWithColon;
const fluxString = FluidPressureAndFlowStrings.flux;
const fluxUnitsEnglishString = FluidPressureAndFlowStrings.fluxUnitsEnglish;
const fluxUnitsMetricString = FluidPressureAndFlowStrings.fluxUnitsMetric;
const rateUnitsEnglishString = FluidPressureAndFlowStrings.rateUnitsEnglish;
const rateUnitsMetricString = FluidPressureAndFlowStrings.rateUnitsMetric;
class FluxMeterNode extends Node {
  /**
   * @param {FlowModel} flowModel of the simulation
   * @param {ModelViewTransform2} modelViewTransform to convert between model and view co-ordinates
   * @param {Object} [options] that can be passed on to the underlying node
   */
  constructor(flowModel, modelViewTransform, options) {
    super();
    options = merge({
      xMargin: 10,
      yMargin: 10,
      fill: '#f2fa6a ',
      stroke: 'blue',
      lineWidth: 2
    }, options);
    this.flowModel = flowModel;
    this.modelViewTransform = modelViewTransform;
    const textOptions = {
      font: new PhetFont(10)
    };

    // flowRate row
    const flowRateText = new Text(flowRateWithColonString, textOptions);
    this.flowRateValue = new Text('', textOptions);
    this.flowRateUnit = new RichText(rateUnitsMetricString, textOptions);

    // area row
    const area = new Text(areaString, textOptions);
    this.areaValue = new Text('', textOptions);
    this.areaUnit = new RichText(areaUnitsMetricString, textOptions);

    // flux row
    const flux = new Text(fluxString, textOptions);
    this.fluxValue = new Text('', textOptions);
    this.fluxUnit = new RichText(fluxUnitsMetricString, textOptions);

    // Split the content into 3 vboxes. First vbox holds the right aligned title,
    // second the right aligned value and the third vbox holds the left aligned units text
    const content = new HBox({
      spacing: 5,
      children: [new VBox({
        align: 'right',
        children: [new HBox({
          children: [new HStrut(4), flowRateText]
        }), new HBox({
          children: [new HStrut(4), area]
        }), new HBox({
          children: [new HStrut(4), flux]
        })]
      }), new VBox({
        align: 'right',
        children: [new HBox({
          children: [new HStrut(4), this.flowRateValue]
        }), new HBox({
          children: [new HStrut(4), this.areaValue]
        }), new HBox({
          children: [new HStrut(4), this.fluxValue]
        })]
      }), new VBox({
        align: 'left',
        children: [this.flowRateUnit, this.areaUnit, this.fluxUnit]
      })]
    });
    this.displayPanel = new Panel(content, {
      xMargin: 7,
      yMargin: 6,
      fill: '#f2fa6a ',
      stroke: 'blue',
      lineWidth: 2
    });
    const yTop = modelViewTransform.modelToViewY(flowModel.pipe.fractionToPosition(flowModel.fluxMeter.xPositionProperty.value, 1));
    const yBottom = modelViewTransform.modelToViewY(flowModel.pipe.fractionToPosition(flowModel.fluxMeter.xPositionProperty.value, 0));
    const centerY = (yTop + yBottom) / 2;
    const radiusY = (yBottom - yTop) / 2;
    const initialCenterX = 60; // initial center x of ellipse
    this.radiusX = 6; // x radius for the ellipse is  always constant

    // split the ring into two ellipses
    this.ellipse = new Path(new Shape().ellipticalArc(initialCenterX, centerY, radiusY, this.radiusX, Math.PI / 2, 0, Math.PI, false), {
      lineWidth: 5,
      stroke: 'blue'
    });
    this.ellipse2 = new Path(new Shape().ellipticalArc(initialCenterX, centerY, radiusY, this.radiusX, Math.PI / 2, Math.PI, 0, false), {
      lineWidth: 5,
      stroke: new Color(0, 0, 255, 0.5)
    });

    // add only the first ellipse. The second ellipse is added by the pipe node.
    this.addChild(this.ellipse);

    // the line connecting the ring and the display panel
    const upperLineShape = new Shape().moveTo(this.ellipse2.centerX - 3, this.ellipse2.centerY - 20).lineTo(this.ellipse2.right, this.ellipse2.top);
    this.upperLine = new Path(upperLineShape, {
      stroke: 'blue',
      lineWidth: 3,
      left: this.ellipse.right - 1,
      bottom: this.ellipse2.top + 3
    });
    this.addChild(this.upperLine);
    this.displayPanel.bottom = this.upperLine.top;
    this.displayPanel.left = this.upperLine.left - 50;

    // the line connecting the ring and the bottom handle
    const lowerLineShape = new Shape().moveTo(this.ellipse2.centerX - 3, this.ellipse2.centerY + 20).lineTo(this.ellipse2.centerX - 3, this.ellipse2.centerY + 60);
    this.lowerLine = new Path(lowerLineShape, {
      stroke: 'blue',
      lineWidth: 2,
      top: this.ellipse2.bottom,
      left: this.ellipse.right - 1
    });
    this.addChild(this.lowerLine);
    this.handle = new Image(handleTwoSided_png, {
      cursor: 'pointer',
      top: this.lowerLine.bottom,
      left: this.lowerLine.right - 16,
      scale: 0.35
    });
    this.handle.touchArea = this.handle.localBounds.dilatedXY(20, 20);
    this.addChild(this.handle);
    this.addChild(this.displayPanel);
    flowModel.isFluxMeterVisibleProperty.linkAttribute(this, 'visible');
    Multilink.multilink([flowModel.pipe.flowRateProperty, flowModel.measureUnitsProperty], (flowRate, units) => {
      this.updateDisplayPanel(units);
    });
    flowModel.fluxMeter.xPositionProperty.link(() => {
      this.updateFluxMeter();
    });

    // flux meter drag handle
    this.handle.addInputListener(new SimpleDragHandler({
      drag: event => {
        this.moveToFront();
        let x = this.globalToParentPoint(event.pointer.point).x;
        x = x < 46 ? 46 : x > 698 ? 698 : x; // min, max view values (emperically determined)
        flowModel.fluxMeter.xPositionProperty.value = modelViewTransform.viewToModelX(x);
      }
    }));
    flowModel.fluxMeter.updateEmitter.addListener(() => {
      this.updateFluxMeter();
    });
    this.mutate(options);
  }

  /**
   * Redraws the flux meter's ellipses based on the pipe shape at that x position
   * @private
   */
  updateFluxMeter() {
    const yTop = this.modelViewTransform.modelToViewY(this.flowModel.pipe.fractionToPosition(this.flowModel.fluxMeter.xPositionProperty.value, 1));
    const yBottom = this.modelViewTransform.modelToViewY(this.flowModel.pipe.fractionToPosition(this.flowModel.fluxMeter.xPositionProperty.value, 0));
    const centerX = this.modelViewTransform.modelToViewX(this.flowModel.fluxMeter.xPositionProperty.value);
    const centerY = (yTop + yBottom) / 2;
    const radiusY = (yBottom - yTop) / 2;
    const newEllipse1 = new Shape().ellipticalArc(centerX, centerY, radiusY, this.radiusX, Math.PI / 2, 0, Math.PI, false);
    const newEllipse2 = new Shape().ellipticalArc(centerX, centerY, radiusY, this.radiusX, Math.PI / 2, Math.PI, 0, false);
    this.ellipse.setShape(newEllipse1);
    this.ellipse2.setShape(newEllipse2);
    this.upperLine.left = this.ellipse.right - 1;
    this.upperLine.bottom = this.ellipse2.top + 3;
    this.displayPanel.bottom = this.upperLine.top;
    this.displayPanel.left = this.upperLine.left - 50;
    this.lowerLine.top = this.ellipse2.bottom;
    this.lowerLine.left = this.ellipse.right - 1;
    this.handle.top = this.lowerLine.bottom - 3;
    this.handle.left = this.lowerLine.right - 16;
    this.updateDisplayPanel(this.flowModel.measureUnitsProperty.value);
  }

  /**
   * Updates the display text in the panel as per the new x position
   * @param {string} units can be metric/english
   * @private
   */
  updateDisplayPanel(units) {
    if (units === 'metric') {
      this.flowRateValue.string = Utils.toFixed(this.flowModel.fluxMeter.getFlowRate(), 1);
      this.flowRateUnit.string = rateUnitsMetricString;
      this.areaValue.string = Utils.toFixed(this.flowModel.fluxMeter.getArea(), 1);
      this.areaUnit.string = areaUnitsMetricString;
      this.fluxValue.string = Utils.toFixed(this.flowModel.fluxMeter.getFlux(), 1);
      this.fluxUnit.string = fluxUnitsMetricString;
    } else {
      // use english for either english or atmospheres
      const flowRate = this.flowModel.fluxMeter.getFlowRate() * Units.FEET_CUBE_PER_LITER;
      this.flowRateValue.string = Utils.toFixed(flowRate, 1);
      this.flowRateUnit.string = rateUnitsEnglishString;
      const area = this.flowModel.fluxMeter.getArea() * Units.SQUARE_FEET_PER_SQUARE_METER;
      this.areaValue.string = Utils.toFixed(area, 1);
      this.areaUnit.string = areaUnitsEnglishString;
      const flux = this.flowModel.fluxMeter.getFlux() * Units.FEET_PER_CENTIMETER;
      this.fluxValue.string = Utils.toFixed(flux, 1);
      this.fluxUnit.string = fluxUnitsEnglishString;
    }
  }
}
fluidPressureAndFlow.register('FluxMeterNode', FluxMeterNode);
export default FluxMeterNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNdWx0aWxpbmsiLCJVdGlscyIsIlNoYXBlIiwibWVyZ2UiLCJQaGV0Rm9udCIsIkNvbG9yIiwiSEJveCIsIkhTdHJ1dCIsIkltYWdlIiwiTm9kZSIsIlBhdGgiLCJSaWNoVGV4dCIsIlNpbXBsZURyYWdIYW5kbGVyIiwiVGV4dCIsIlZCb3giLCJQYW5lbCIsImhhbmRsZVR3b1NpZGVkX3BuZyIsIlVuaXRzIiwiZmx1aWRQcmVzc3VyZUFuZEZsb3ciLCJGbHVpZFByZXNzdXJlQW5kRmxvd1N0cmluZ3MiLCJhcmVhU3RyaW5nIiwiYXJlYSIsImFyZWFVbml0c0VuZ2xpc2hTdHJpbmciLCJhcmVhVW5pdHNFbmdsaXNoIiwiYXJlYVVuaXRzTWV0cmljU3RyaW5nIiwiYXJlYVVuaXRzTWV0cmljIiwiZmxvd1JhdGVXaXRoQ29sb25TdHJpbmciLCJmbG93UmF0ZVdpdGhDb2xvbiIsImZsdXhTdHJpbmciLCJmbHV4IiwiZmx1eFVuaXRzRW5nbGlzaFN0cmluZyIsImZsdXhVbml0c0VuZ2xpc2giLCJmbHV4VW5pdHNNZXRyaWNTdHJpbmciLCJmbHV4VW5pdHNNZXRyaWMiLCJyYXRlVW5pdHNFbmdsaXNoU3RyaW5nIiwicmF0ZVVuaXRzRW5nbGlzaCIsInJhdGVVbml0c01ldHJpY1N0cmluZyIsInJhdGVVbml0c01ldHJpYyIsIkZsdXhNZXRlck5vZGUiLCJjb25zdHJ1Y3RvciIsImZsb3dNb2RlbCIsIm1vZGVsVmlld1RyYW5zZm9ybSIsIm9wdGlvbnMiLCJ4TWFyZ2luIiwieU1hcmdpbiIsImZpbGwiLCJzdHJva2UiLCJsaW5lV2lkdGgiLCJ0ZXh0T3B0aW9ucyIsImZvbnQiLCJmbG93UmF0ZVRleHQiLCJmbG93UmF0ZVZhbHVlIiwiZmxvd1JhdGVVbml0IiwiYXJlYVZhbHVlIiwiYXJlYVVuaXQiLCJmbHV4VmFsdWUiLCJmbHV4VW5pdCIsImNvbnRlbnQiLCJzcGFjaW5nIiwiY2hpbGRyZW4iLCJhbGlnbiIsImRpc3BsYXlQYW5lbCIsInlUb3AiLCJtb2RlbFRvVmlld1kiLCJwaXBlIiwiZnJhY3Rpb25Ub1Bvc2l0aW9uIiwiZmx1eE1ldGVyIiwieFBvc2l0aW9uUHJvcGVydHkiLCJ2YWx1ZSIsInlCb3R0b20iLCJjZW50ZXJZIiwicmFkaXVzWSIsImluaXRpYWxDZW50ZXJYIiwicmFkaXVzWCIsImVsbGlwc2UiLCJlbGxpcHRpY2FsQXJjIiwiTWF0aCIsIlBJIiwiZWxsaXBzZTIiLCJhZGRDaGlsZCIsInVwcGVyTGluZVNoYXBlIiwibW92ZVRvIiwiY2VudGVyWCIsImxpbmVUbyIsInJpZ2h0IiwidG9wIiwidXBwZXJMaW5lIiwibGVmdCIsImJvdHRvbSIsImxvd2VyTGluZVNoYXBlIiwibG93ZXJMaW5lIiwiaGFuZGxlIiwiY3Vyc29yIiwic2NhbGUiLCJ0b3VjaEFyZWEiLCJsb2NhbEJvdW5kcyIsImRpbGF0ZWRYWSIsImlzRmx1eE1ldGVyVmlzaWJsZVByb3BlcnR5IiwibGlua0F0dHJpYnV0ZSIsIm11bHRpbGluayIsImZsb3dSYXRlUHJvcGVydHkiLCJtZWFzdXJlVW5pdHNQcm9wZXJ0eSIsImZsb3dSYXRlIiwidW5pdHMiLCJ1cGRhdGVEaXNwbGF5UGFuZWwiLCJsaW5rIiwidXBkYXRlRmx1eE1ldGVyIiwiYWRkSW5wdXRMaXN0ZW5lciIsImRyYWciLCJldmVudCIsIm1vdmVUb0Zyb250IiwieCIsImdsb2JhbFRvUGFyZW50UG9pbnQiLCJwb2ludGVyIiwicG9pbnQiLCJ2aWV3VG9Nb2RlbFgiLCJ1cGRhdGVFbWl0dGVyIiwiYWRkTGlzdGVuZXIiLCJtdXRhdGUiLCJtb2RlbFRvVmlld1giLCJuZXdFbGxpcHNlMSIsIm5ld0VsbGlwc2UyIiwic2V0U2hhcGUiLCJzdHJpbmciLCJ0b0ZpeGVkIiwiZ2V0Rmxvd1JhdGUiLCJnZXRBcmVhIiwiZ2V0Rmx1eCIsIkZFRVRfQ1VCRV9QRVJfTElURVIiLCJTUVVBUkVfRkVFVF9QRVJfU1FVQVJFX01FVEVSIiwiRkVFVF9QRVJfQ0VOVElNRVRFUiIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiRmx1eE1ldGVyTm9kZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNC0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBWaWV3IGZvciB0aGUgZmx1eCBtZXRlciB0b29sLiBMb29rcyBsaWtlIGEgcmluZyBhcm91bmQgdGhlIHBpcGUgd2l0aCBhIGRpc3BsYXkgcGFuZWwgYXQgdGhlIHRvcCBhbmQgYSBkcmFnIGhhbmRsZVxyXG4gKiBhdCB0aGUgYm90dG9tLiBUaGUgcmluZyBpcyByZW5kZXJlZCBpbiB0d28gbGF5ZXJzIHNvIHRoYXQgcGFydGljbGVzIGNhbiBwYXNzIHRocm91Z2ggdGhlIHJpbmcuXHJcbiAqIEEgZmx1eCBtZXRlciB0aGF0IGRpc3BsYXkgZmxvdyByYXRlLCBhcmVhIGFuZCBmbHV4IGF0IGEgcGFydGljdWxhciBjcm9zcyBzZWN0aW9uLlxyXG4gKlxyXG4gKiBAYXV0aG9yIFNpZGRoYXJ0aGEgQ2hpbnRoYXBhbGx5IChBY3R1YWwgQ29uY2VwdHMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IE11bHRpbGluayBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL011bHRpbGluay5qcyc7XHJcbmltcG9ydCBVdGlscyBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVXRpbHMuanMnO1xyXG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gJy4uLy4uLy4uLy4uL2tpdGUvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBtZXJnZSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvbWVyZ2UuanMnO1xyXG5pbXBvcnQgUGhldEZvbnQgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1BoZXRGb250LmpzJztcclxuaW1wb3J0IHsgQ29sb3IsIEhCb3gsIEhTdHJ1dCwgSW1hZ2UsIE5vZGUsIFBhdGgsIFJpY2hUZXh0LCBTaW1wbGVEcmFnSGFuZGxlciwgVGV4dCwgVkJveCB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBQYW5lbCBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvUGFuZWwuanMnO1xyXG5pbXBvcnQgaGFuZGxlVHdvU2lkZWRfcG5nIGZyb20gJy4uLy4uLy4uL2ltYWdlcy9oYW5kbGVUd29TaWRlZF9wbmcuanMnO1xyXG5pbXBvcnQgVW5pdHMgZnJvbSAnLi4vLi4vY29tbW9uL21vZGVsL1VuaXRzLmpzJztcclxuaW1wb3J0IGZsdWlkUHJlc3N1cmVBbmRGbG93IGZyb20gJy4uLy4uL2ZsdWlkUHJlc3N1cmVBbmRGbG93LmpzJztcclxuaW1wb3J0IEZsdWlkUHJlc3N1cmVBbmRGbG93U3RyaW5ncyBmcm9tICcuLi8uLi9GbHVpZFByZXNzdXJlQW5kRmxvd1N0cmluZ3MuanMnO1xyXG5cclxuY29uc3QgYXJlYVN0cmluZyA9IEZsdWlkUHJlc3N1cmVBbmRGbG93U3RyaW5ncy5hcmVhO1xyXG5jb25zdCBhcmVhVW5pdHNFbmdsaXNoU3RyaW5nID0gRmx1aWRQcmVzc3VyZUFuZEZsb3dTdHJpbmdzLmFyZWFVbml0c0VuZ2xpc2g7XHJcbmNvbnN0IGFyZWFVbml0c01ldHJpY1N0cmluZyA9IEZsdWlkUHJlc3N1cmVBbmRGbG93U3RyaW5ncy5hcmVhVW5pdHNNZXRyaWM7XHJcbmNvbnN0IGZsb3dSYXRlV2l0aENvbG9uU3RyaW5nID0gRmx1aWRQcmVzc3VyZUFuZEZsb3dTdHJpbmdzLmZsb3dSYXRlV2l0aENvbG9uO1xyXG5jb25zdCBmbHV4U3RyaW5nID0gRmx1aWRQcmVzc3VyZUFuZEZsb3dTdHJpbmdzLmZsdXg7XHJcbmNvbnN0IGZsdXhVbml0c0VuZ2xpc2hTdHJpbmcgPSBGbHVpZFByZXNzdXJlQW5kRmxvd1N0cmluZ3MuZmx1eFVuaXRzRW5nbGlzaDtcclxuY29uc3QgZmx1eFVuaXRzTWV0cmljU3RyaW5nID0gRmx1aWRQcmVzc3VyZUFuZEZsb3dTdHJpbmdzLmZsdXhVbml0c01ldHJpYztcclxuY29uc3QgcmF0ZVVuaXRzRW5nbGlzaFN0cmluZyA9IEZsdWlkUHJlc3N1cmVBbmRGbG93U3RyaW5ncy5yYXRlVW5pdHNFbmdsaXNoO1xyXG5jb25zdCByYXRlVW5pdHNNZXRyaWNTdHJpbmcgPSBGbHVpZFByZXNzdXJlQW5kRmxvd1N0cmluZ3MucmF0ZVVuaXRzTWV0cmljO1xyXG5cclxuXHJcbmNsYXNzIEZsdXhNZXRlck5vZGUgZXh0ZW5kcyBOb2RlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtGbG93TW9kZWx9IGZsb3dNb2RlbCBvZiB0aGUgc2ltdWxhdGlvblxyXG4gICAqIEBwYXJhbSB7TW9kZWxWaWV3VHJhbnNmb3JtMn0gbW9kZWxWaWV3VHJhbnNmb3JtIHRvIGNvbnZlcnQgYmV0d2VlbiBtb2RlbCBhbmQgdmlldyBjby1vcmRpbmF0ZXNcclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIHRoYXQgY2FuIGJlIHBhc3NlZCBvbiB0byB0aGUgdW5kZXJseWluZyBub2RlXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIGZsb3dNb2RlbCwgbW9kZWxWaWV3VHJhbnNmb3JtLCBvcHRpb25zICkge1xyXG5cclxuICAgIHN1cGVyKCk7XHJcblxyXG4gICAgb3B0aW9ucyA9IG1lcmdlKCB7XHJcbiAgICAgIHhNYXJnaW46IDEwLFxyXG4gICAgICB5TWFyZ2luOiAxMCxcclxuICAgICAgZmlsbDogJyNmMmZhNmEgJyxcclxuICAgICAgc3Ryb2tlOiAnYmx1ZScsXHJcbiAgICAgIGxpbmVXaWR0aDogMlxyXG4gICAgfSwgb3B0aW9ucyApO1xyXG5cclxuICAgIHRoaXMuZmxvd01vZGVsID0gZmxvd01vZGVsO1xyXG4gICAgdGhpcy5tb2RlbFZpZXdUcmFuc2Zvcm0gPSBtb2RlbFZpZXdUcmFuc2Zvcm07XHJcbiAgICBjb25zdCB0ZXh0T3B0aW9ucyA9IHsgZm9udDogbmV3IFBoZXRGb250KCAxMCApIH07XHJcblxyXG4gICAgLy8gZmxvd1JhdGUgcm93XHJcbiAgICBjb25zdCBmbG93UmF0ZVRleHQgPSBuZXcgVGV4dCggZmxvd1JhdGVXaXRoQ29sb25TdHJpbmcsIHRleHRPcHRpb25zICk7XHJcbiAgICB0aGlzLmZsb3dSYXRlVmFsdWUgPSBuZXcgVGV4dCggJycsIHRleHRPcHRpb25zICk7XHJcbiAgICB0aGlzLmZsb3dSYXRlVW5pdCA9IG5ldyBSaWNoVGV4dCggcmF0ZVVuaXRzTWV0cmljU3RyaW5nLCB0ZXh0T3B0aW9ucyApO1xyXG5cclxuICAgIC8vIGFyZWEgcm93XHJcbiAgICBjb25zdCBhcmVhID0gbmV3IFRleHQoIGFyZWFTdHJpbmcsIHRleHRPcHRpb25zICk7XHJcbiAgICB0aGlzLmFyZWFWYWx1ZSA9IG5ldyBUZXh0KCAnJywgdGV4dE9wdGlvbnMgKTtcclxuICAgIHRoaXMuYXJlYVVuaXQgPSBuZXcgUmljaFRleHQoIGFyZWFVbml0c01ldHJpY1N0cmluZywgdGV4dE9wdGlvbnMgKTtcclxuXHJcbiAgICAvLyBmbHV4IHJvd1xyXG4gICAgY29uc3QgZmx1eCA9IG5ldyBUZXh0KCBmbHV4U3RyaW5nLCB0ZXh0T3B0aW9ucyApO1xyXG4gICAgdGhpcy5mbHV4VmFsdWUgPSBuZXcgVGV4dCggJycsIHRleHRPcHRpb25zICk7XHJcbiAgICB0aGlzLmZsdXhVbml0ID0gbmV3IFJpY2hUZXh0KCBmbHV4VW5pdHNNZXRyaWNTdHJpbmcsIHRleHRPcHRpb25zICk7XHJcblxyXG4gICAgLy8gU3BsaXQgdGhlIGNvbnRlbnQgaW50byAzIHZib3hlcy4gRmlyc3QgdmJveCBob2xkcyB0aGUgcmlnaHQgYWxpZ25lZCB0aXRsZSxcclxuICAgIC8vIHNlY29uZCB0aGUgcmlnaHQgYWxpZ25lZCB2YWx1ZSBhbmQgdGhlIHRoaXJkIHZib3ggaG9sZHMgdGhlIGxlZnQgYWxpZ25lZCB1bml0cyB0ZXh0XHJcbiAgICBjb25zdCBjb250ZW50ID0gbmV3IEhCb3goIHtcclxuICAgICAgc3BhY2luZzogNSxcclxuICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICBuZXcgVkJveCgge1xyXG4gICAgICAgICAgYWxpZ246ICdyaWdodCcsIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgICAgIG5ldyBIQm94KCB7IGNoaWxkcmVuOiBbIG5ldyBIU3RydXQoIDQgKSwgZmxvd1JhdGVUZXh0IF0gfSApLFxyXG4gICAgICAgICAgICBuZXcgSEJveCggeyBjaGlsZHJlbjogWyBuZXcgSFN0cnV0KCA0ICksIGFyZWEgXSB9ICksXHJcbiAgICAgICAgICAgIG5ldyBIQm94KCB7IGNoaWxkcmVuOiBbIG5ldyBIU3RydXQoIDQgKSwgZmx1eCBdIH0gKVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0gKSxcclxuICAgICAgICBuZXcgVkJveCgge1xyXG4gICAgICAgICAgYWxpZ246ICdyaWdodCcsIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgICAgIG5ldyBIQm94KCB7IGNoaWxkcmVuOiBbIG5ldyBIU3RydXQoIDQgKSwgdGhpcy5mbG93UmF0ZVZhbHVlIF0gfSApLFxyXG4gICAgICAgICAgICBuZXcgSEJveCggeyBjaGlsZHJlbjogWyBuZXcgSFN0cnV0KCA0ICksIHRoaXMuYXJlYVZhbHVlIF0gfSApLFxyXG4gICAgICAgICAgICBuZXcgSEJveCggeyBjaGlsZHJlbjogWyBuZXcgSFN0cnV0KCA0ICksIHRoaXMuZmx1eFZhbHVlIF0gfSApXHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSApLFxyXG4gICAgICAgIG5ldyBWQm94KCB7XHJcbiAgICAgICAgICBhbGlnbjogJ2xlZnQnLCBjaGlsZHJlbjogW1xyXG4gICAgICAgICAgICB0aGlzLmZsb3dSYXRlVW5pdCxcclxuICAgICAgICAgICAgdGhpcy5hcmVhVW5pdCxcclxuICAgICAgICAgICAgdGhpcy5mbHV4VW5pdFxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0gKVxyXG4gICAgICBdXHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5kaXNwbGF5UGFuZWwgPSBuZXcgUGFuZWwoIGNvbnRlbnQsIHtcclxuICAgICAgeE1hcmdpbjogNyxcclxuICAgICAgeU1hcmdpbjogNixcclxuICAgICAgZmlsbDogJyNmMmZhNmEgJyxcclxuICAgICAgc3Ryb2tlOiAnYmx1ZScsXHJcbiAgICAgIGxpbmVXaWR0aDogMlxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IHlUb3AgPSBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdZKCBmbG93TW9kZWwucGlwZS5mcmFjdGlvblRvUG9zaXRpb24oIGZsb3dNb2RlbC5mbHV4TWV0ZXIueFBvc2l0aW9uUHJvcGVydHkudmFsdWUsIDEgKSApO1xyXG4gICAgY29uc3QgeUJvdHRvbSA9IG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1koIGZsb3dNb2RlbC5waXBlLmZyYWN0aW9uVG9Qb3NpdGlvbiggZmxvd01vZGVsLmZsdXhNZXRlci54UG9zaXRpb25Qcm9wZXJ0eS52YWx1ZSxcclxuICAgICAgMCApICk7XHJcbiAgICBjb25zdCBjZW50ZXJZID0gKCB5VG9wICsgeUJvdHRvbSApIC8gMjtcclxuICAgIGNvbnN0IHJhZGl1c1kgPSAoIHlCb3R0b20gLSB5VG9wICkgLyAyO1xyXG4gICAgY29uc3QgaW5pdGlhbENlbnRlclggPSA2MDsgLy8gaW5pdGlhbCBjZW50ZXIgeCBvZiBlbGxpcHNlXHJcbiAgICB0aGlzLnJhZGl1c1ggPSA2OyAvLyB4IHJhZGl1cyBmb3IgdGhlIGVsbGlwc2UgaXMgIGFsd2F5cyBjb25zdGFudFxyXG5cclxuICAgIC8vIHNwbGl0IHRoZSByaW5nIGludG8gdHdvIGVsbGlwc2VzXHJcbiAgICB0aGlzLmVsbGlwc2UgPSBuZXcgUGF0aCggbmV3IFNoYXBlKCkuZWxsaXB0aWNhbEFyYyggaW5pdGlhbENlbnRlclgsIGNlbnRlclksIHJhZGl1c1ksIHRoaXMucmFkaXVzWCwgTWF0aC5QSSAvIDIsXHJcbiAgICAgIDAsIE1hdGguUEksIGZhbHNlICksIHtcclxuICAgICAgbGluZVdpZHRoOiA1LFxyXG4gICAgICBzdHJva2U6ICdibHVlJ1xyXG4gICAgfSApO1xyXG4gICAgdGhpcy5lbGxpcHNlMiA9IG5ldyBQYXRoKCBuZXcgU2hhcGUoKS5lbGxpcHRpY2FsQXJjKCBpbml0aWFsQ2VudGVyWCwgY2VudGVyWSwgcmFkaXVzWSwgdGhpcy5yYWRpdXNYLCBNYXRoLlBJIC8gMixcclxuICAgICAgTWF0aC5QSSxcclxuICAgICAgMCwgZmFsc2UgKSxcclxuICAgICAge1xyXG4gICAgICAgIGxpbmVXaWR0aDogNSxcclxuICAgICAgICBzdHJva2U6IG5ldyBDb2xvciggMCwgMCwgMjU1LCAwLjUgKVxyXG4gICAgICB9ICk7XHJcblxyXG4gICAgLy8gYWRkIG9ubHkgdGhlIGZpcnN0IGVsbGlwc2UuIFRoZSBzZWNvbmQgZWxsaXBzZSBpcyBhZGRlZCBieSB0aGUgcGlwZSBub2RlLlxyXG4gICAgdGhpcy5hZGRDaGlsZCggdGhpcy5lbGxpcHNlICk7XHJcblxyXG4gICAgLy8gdGhlIGxpbmUgY29ubmVjdGluZyB0aGUgcmluZyBhbmQgdGhlIGRpc3BsYXkgcGFuZWxcclxuICAgIGNvbnN0IHVwcGVyTGluZVNoYXBlID0gbmV3IFNoYXBlKCkubW92ZVRvKCB0aGlzLmVsbGlwc2UyLmNlbnRlclggLSAzLCB0aGlzLmVsbGlwc2UyLmNlbnRlclkgLSAyMCApLmxpbmVUbyggdGhpcy5lbGxpcHNlMi5yaWdodCwgdGhpcy5lbGxpcHNlMi50b3AgKTtcclxuXHJcbiAgICB0aGlzLnVwcGVyTGluZSA9IG5ldyBQYXRoKCB1cHBlckxpbmVTaGFwZSxcclxuICAgICAge1xyXG4gICAgICAgIHN0cm9rZTogJ2JsdWUnLFxyXG4gICAgICAgIGxpbmVXaWR0aDogMyxcclxuICAgICAgICBsZWZ0OiB0aGlzLmVsbGlwc2UucmlnaHQgLSAxLFxyXG4gICAgICAgIGJvdHRvbTogdGhpcy5lbGxpcHNlMi50b3AgKyAzXHJcbiAgICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLmFkZENoaWxkKCB0aGlzLnVwcGVyTGluZSApO1xyXG4gICAgdGhpcy5kaXNwbGF5UGFuZWwuYm90dG9tID0gdGhpcy51cHBlckxpbmUudG9wO1xyXG4gICAgdGhpcy5kaXNwbGF5UGFuZWwubGVmdCA9IHRoaXMudXBwZXJMaW5lLmxlZnQgLSA1MDtcclxuXHJcbiAgICAvLyB0aGUgbGluZSBjb25uZWN0aW5nIHRoZSByaW5nIGFuZCB0aGUgYm90dG9tIGhhbmRsZVxyXG4gICAgY29uc3QgbG93ZXJMaW5lU2hhcGUgPSBuZXcgU2hhcGUoKS5tb3ZlVG8oIHRoaXMuZWxsaXBzZTIuY2VudGVyWCAtIDMsIHRoaXMuZWxsaXBzZTIuY2VudGVyWSArIDIwICkubGluZVRvKCB0aGlzLmVsbGlwc2UyLmNlbnRlclggLSAzLCB0aGlzLmVsbGlwc2UyLmNlbnRlclkgKyA2MCApO1xyXG5cclxuICAgIHRoaXMubG93ZXJMaW5lID0gbmV3IFBhdGgoIGxvd2VyTGluZVNoYXBlLFxyXG4gICAgICB7XHJcbiAgICAgICAgc3Ryb2tlOiAnYmx1ZScsIGxpbmVXaWR0aDogMixcclxuICAgICAgICB0b3A6IHRoaXMuZWxsaXBzZTIuYm90dG9tLFxyXG4gICAgICAgIGxlZnQ6IHRoaXMuZWxsaXBzZS5yaWdodCAtIDFcclxuICAgICAgfSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggdGhpcy5sb3dlckxpbmUgKTtcclxuXHJcbiAgICB0aGlzLmhhbmRsZSA9IG5ldyBJbWFnZSggaGFuZGxlVHdvU2lkZWRfcG5nLFxyXG4gICAgICB7IGN1cnNvcjogJ3BvaW50ZXInLCB0b3A6IHRoaXMubG93ZXJMaW5lLmJvdHRvbSwgbGVmdDogdGhpcy5sb3dlckxpbmUucmlnaHQgLSAxNiwgc2NhbGU6IDAuMzUgfSApO1xyXG4gICAgdGhpcy5oYW5kbGUudG91Y2hBcmVhID0gdGhpcy5oYW5kbGUubG9jYWxCb3VuZHMuZGlsYXRlZFhZKCAyMCwgMjAgKTtcclxuXHJcbiAgICB0aGlzLmFkZENoaWxkKCB0aGlzLmhhbmRsZSApO1xyXG5cclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMuZGlzcGxheVBhbmVsICk7XHJcblxyXG4gICAgZmxvd01vZGVsLmlzRmx1eE1ldGVyVmlzaWJsZVByb3BlcnR5LmxpbmtBdHRyaWJ1dGUoIHRoaXMsICd2aXNpYmxlJyApO1xyXG5cclxuICAgIE11bHRpbGluay5tdWx0aWxpbmsoIFsgZmxvd01vZGVsLnBpcGUuZmxvd1JhdGVQcm9wZXJ0eSwgZmxvd01vZGVsLm1lYXN1cmVVbml0c1Byb3BlcnR5IF0sXHJcbiAgICAgICggZmxvd1JhdGUsIHVuaXRzICkgPT4ge1xyXG4gICAgICAgIHRoaXMudXBkYXRlRGlzcGxheVBhbmVsKCB1bml0cyApO1xyXG4gICAgICB9ICk7XHJcblxyXG4gICAgZmxvd01vZGVsLmZsdXhNZXRlci54UG9zaXRpb25Qcm9wZXJ0eS5saW5rKCAoKSA9PiB7XHJcbiAgICAgIHRoaXMudXBkYXRlRmx1eE1ldGVyKCk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gZmx1eCBtZXRlciBkcmFnIGhhbmRsZVxyXG4gICAgdGhpcy5oYW5kbGUuYWRkSW5wdXRMaXN0ZW5lciggbmV3IFNpbXBsZURyYWdIYW5kbGVyKCB7XHJcbiAgICAgIGRyYWc6IGV2ZW50ID0+IHtcclxuICAgICAgICB0aGlzLm1vdmVUb0Zyb250KCk7XHJcbiAgICAgICAgbGV0IHggPSB0aGlzLmdsb2JhbFRvUGFyZW50UG9pbnQoIGV2ZW50LnBvaW50ZXIucG9pbnQgKS54O1xyXG4gICAgICAgIHggPSB4IDwgNDYgPyA0NiA6IHggPiA2OTggPyA2OTggOiB4OyAvLyBtaW4sIG1heCB2aWV3IHZhbHVlcyAoZW1wZXJpY2FsbHkgZGV0ZXJtaW5lZClcclxuICAgICAgICBmbG93TW9kZWwuZmx1eE1ldGVyLnhQb3NpdGlvblByb3BlcnR5LnZhbHVlID0gbW9kZWxWaWV3VHJhbnNmb3JtLnZpZXdUb01vZGVsWCggeCApO1xyXG4gICAgICB9XHJcbiAgICB9ICkgKTtcclxuXHJcbiAgICBmbG93TW9kZWwuZmx1eE1ldGVyLnVwZGF0ZUVtaXR0ZXIuYWRkTGlzdGVuZXIoICgpID0+IHtcclxuICAgICAgdGhpcy51cGRhdGVGbHV4TWV0ZXIoKTtcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLm11dGF0ZSggb3B0aW9ucyApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVkcmF3cyB0aGUgZmx1eCBtZXRlcidzIGVsbGlwc2VzIGJhc2VkIG9uIHRoZSBwaXBlIHNoYXBlIGF0IHRoYXQgeCBwb3NpdGlvblxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgdXBkYXRlRmx1eE1ldGVyKCkge1xyXG5cclxuICAgIGNvbnN0IHlUb3AgPSB0aGlzLm1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1koIHRoaXMuZmxvd01vZGVsLnBpcGUuZnJhY3Rpb25Ub1Bvc2l0aW9uKFxyXG4gICAgICB0aGlzLmZsb3dNb2RlbC5mbHV4TWV0ZXIueFBvc2l0aW9uUHJvcGVydHkudmFsdWUsIDEgKSApO1xyXG4gICAgY29uc3QgeUJvdHRvbSA9IHRoaXMubW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WSggdGhpcy5mbG93TW9kZWwucGlwZS5mcmFjdGlvblRvUG9zaXRpb24oXHJcbiAgICAgIHRoaXMuZmxvd01vZGVsLmZsdXhNZXRlci54UG9zaXRpb25Qcm9wZXJ0eS52YWx1ZSwgMCApICk7XHJcbiAgICBjb25zdCBjZW50ZXJYID0gdGhpcy5tb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdYKCB0aGlzLmZsb3dNb2RlbC5mbHV4TWV0ZXIueFBvc2l0aW9uUHJvcGVydHkudmFsdWUgKTtcclxuICAgIGNvbnN0IGNlbnRlclkgPSAoIHlUb3AgKyB5Qm90dG9tICkgLyAyO1xyXG4gICAgY29uc3QgcmFkaXVzWSA9ICggeUJvdHRvbSAtIHlUb3AgKSAvIDI7XHJcblxyXG4gICAgY29uc3QgbmV3RWxsaXBzZTEgPSBuZXcgU2hhcGUoKS5lbGxpcHRpY2FsQXJjKCBjZW50ZXJYLCBjZW50ZXJZLCByYWRpdXNZLCB0aGlzLnJhZGl1c1gsIE1hdGguUEkgLyAyLCAwLCBNYXRoLlBJLFxyXG4gICAgICBmYWxzZSApO1xyXG4gICAgY29uc3QgbmV3RWxsaXBzZTIgPSBuZXcgU2hhcGUoKS5lbGxpcHRpY2FsQXJjKCBjZW50ZXJYLCBjZW50ZXJZLCByYWRpdXNZLCB0aGlzLnJhZGl1c1gsIE1hdGguUEkgLyAyLCBNYXRoLlBJLCAwLFxyXG4gICAgICBmYWxzZSApO1xyXG5cclxuICAgIHRoaXMuZWxsaXBzZS5zZXRTaGFwZSggbmV3RWxsaXBzZTEgKTtcclxuICAgIHRoaXMuZWxsaXBzZTIuc2V0U2hhcGUoIG5ld0VsbGlwc2UyICk7XHJcblxyXG4gICAgdGhpcy51cHBlckxpbmUubGVmdCA9IHRoaXMuZWxsaXBzZS5yaWdodCAtIDE7XHJcbiAgICB0aGlzLnVwcGVyTGluZS5ib3R0b20gPSB0aGlzLmVsbGlwc2UyLnRvcCArIDM7XHJcbiAgICB0aGlzLmRpc3BsYXlQYW5lbC5ib3R0b20gPSB0aGlzLnVwcGVyTGluZS50b3A7XHJcbiAgICB0aGlzLmRpc3BsYXlQYW5lbC5sZWZ0ID0gdGhpcy51cHBlckxpbmUubGVmdCAtIDUwO1xyXG4gICAgdGhpcy5sb3dlckxpbmUudG9wID0gdGhpcy5lbGxpcHNlMi5ib3R0b207XHJcbiAgICB0aGlzLmxvd2VyTGluZS5sZWZ0ID0gdGhpcy5lbGxpcHNlLnJpZ2h0IC0gMTtcclxuICAgIHRoaXMuaGFuZGxlLnRvcCA9IHRoaXMubG93ZXJMaW5lLmJvdHRvbSAtIDM7XHJcbiAgICB0aGlzLmhhbmRsZS5sZWZ0ID0gdGhpcy5sb3dlckxpbmUucmlnaHQgLSAxNjtcclxuXHJcbiAgICB0aGlzLnVwZGF0ZURpc3BsYXlQYW5lbCggdGhpcy5mbG93TW9kZWwubWVhc3VyZVVuaXRzUHJvcGVydHkudmFsdWUgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZXMgdGhlIGRpc3BsYXkgdGV4dCBpbiB0aGUgcGFuZWwgYXMgcGVyIHRoZSBuZXcgeCBwb3NpdGlvblxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0cyBjYW4gYmUgbWV0cmljL2VuZ2xpc2hcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIHVwZGF0ZURpc3BsYXlQYW5lbCggdW5pdHMgKSB7XHJcblxyXG4gICAgaWYgKCB1bml0cyA9PT0gJ21ldHJpYycgKSB7XHJcbiAgICAgIHRoaXMuZmxvd1JhdGVWYWx1ZS5zdHJpbmcgPSBVdGlscy50b0ZpeGVkKCB0aGlzLmZsb3dNb2RlbC5mbHV4TWV0ZXIuZ2V0Rmxvd1JhdGUoKSwgMSApO1xyXG4gICAgICB0aGlzLmZsb3dSYXRlVW5pdC5zdHJpbmcgPSByYXRlVW5pdHNNZXRyaWNTdHJpbmc7XHJcblxyXG4gICAgICB0aGlzLmFyZWFWYWx1ZS5zdHJpbmcgPSBVdGlscy50b0ZpeGVkKCB0aGlzLmZsb3dNb2RlbC5mbHV4TWV0ZXIuZ2V0QXJlYSgpLCAxICk7XHJcbiAgICAgIHRoaXMuYXJlYVVuaXQuc3RyaW5nID0gYXJlYVVuaXRzTWV0cmljU3RyaW5nO1xyXG5cclxuICAgICAgdGhpcy5mbHV4VmFsdWUuc3RyaW5nID0gVXRpbHMudG9GaXhlZCggdGhpcy5mbG93TW9kZWwuZmx1eE1ldGVyLmdldEZsdXgoKSwgMSApO1xyXG4gICAgICB0aGlzLmZsdXhVbml0LnN0cmluZyA9IGZsdXhVbml0c01ldHJpY1N0cmluZztcclxuICAgIH1cclxuICAgIGVsc2UgeyAvLyB1c2UgZW5nbGlzaCBmb3IgZWl0aGVyIGVuZ2xpc2ggb3IgYXRtb3NwaGVyZXNcclxuICAgICAgY29uc3QgZmxvd1JhdGUgPSB0aGlzLmZsb3dNb2RlbC5mbHV4TWV0ZXIuZ2V0Rmxvd1JhdGUoKSAqIFVuaXRzLkZFRVRfQ1VCRV9QRVJfTElURVI7XHJcbiAgICAgIHRoaXMuZmxvd1JhdGVWYWx1ZS5zdHJpbmcgPSBVdGlscy50b0ZpeGVkKCBmbG93UmF0ZSwgMSApO1xyXG4gICAgICB0aGlzLmZsb3dSYXRlVW5pdC5zdHJpbmcgPSByYXRlVW5pdHNFbmdsaXNoU3RyaW5nO1xyXG5cclxuICAgICAgY29uc3QgYXJlYSA9IHRoaXMuZmxvd01vZGVsLmZsdXhNZXRlci5nZXRBcmVhKCkgKiBVbml0cy5TUVVBUkVfRkVFVF9QRVJfU1FVQVJFX01FVEVSO1xyXG4gICAgICB0aGlzLmFyZWFWYWx1ZS5zdHJpbmcgPSBVdGlscy50b0ZpeGVkKCBhcmVhLCAxICk7XHJcbiAgICAgIHRoaXMuYXJlYVVuaXQuc3RyaW5nID0gYXJlYVVuaXRzRW5nbGlzaFN0cmluZztcclxuXHJcbiAgICAgIGNvbnN0IGZsdXggPSB0aGlzLmZsb3dNb2RlbC5mbHV4TWV0ZXIuZ2V0Rmx1eCgpICogVW5pdHMuRkVFVF9QRVJfQ0VOVElNRVRFUjtcclxuICAgICAgdGhpcy5mbHV4VmFsdWUuc3RyaW5nID0gVXRpbHMudG9GaXhlZCggZmx1eCwgMSApO1xyXG4gICAgICB0aGlzLmZsdXhVbml0LnN0cmluZyA9IGZsdXhVbml0c0VuZ2xpc2hTdHJpbmc7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mbHVpZFByZXNzdXJlQW5kRmxvdy5yZWdpc3RlciggJ0ZsdXhNZXRlck5vZGUnLCBGbHV4TWV0ZXJOb2RlICk7XHJcbmV4cG9ydCBkZWZhdWx0IEZsdXhNZXRlck5vZGU7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxTQUFTLE1BQU0sa0NBQWtDO0FBQ3hELE9BQU9DLEtBQUssTUFBTSw2QkFBNkI7QUFDL0MsU0FBU0MsS0FBSyxRQUFRLGdDQUFnQztBQUN0RCxPQUFPQyxLQUFLLE1BQU0sbUNBQW1DO0FBQ3JELE9BQU9DLFFBQVEsTUFBTSx5Q0FBeUM7QUFDOUQsU0FBU0MsS0FBSyxFQUFFQyxJQUFJLEVBQUVDLE1BQU0sRUFBRUMsS0FBSyxFQUFFQyxJQUFJLEVBQUVDLElBQUksRUFBRUMsUUFBUSxFQUFFQyxpQkFBaUIsRUFBRUMsSUFBSSxFQUFFQyxJQUFJLFFBQVEsbUNBQW1DO0FBQ25JLE9BQU9DLEtBQUssTUFBTSw2QkFBNkI7QUFDL0MsT0FBT0Msa0JBQWtCLE1BQU0sdUNBQXVDO0FBQ3RFLE9BQU9DLEtBQUssTUFBTSw2QkFBNkI7QUFDL0MsT0FBT0Msb0JBQW9CLE1BQU0sK0JBQStCO0FBQ2hFLE9BQU9DLDJCQUEyQixNQUFNLHNDQUFzQztBQUU5RSxNQUFN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