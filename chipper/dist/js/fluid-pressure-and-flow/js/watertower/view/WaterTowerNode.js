// Copyright 2014-2022, University of Colorado Boulder

/**
 * Node for the 'Water Tower' includes the tower, water, stand/legs, hose and the wheel.
 *
 * @author Siddhartha Chinthapally (Actual Concepts)
 */

import Vector2 from '../../../../dot/js/Vector2.js';
import { Shape } from '../../../../kite/js/imports.js';
import merge from '../../../../phet-core/js/merge.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { Image, LinearGradient, Node, Path, Rectangle, SimpleDragHandler } from '../../../../scenery/js/imports.js';
import TextPushButton from '../../../../sun/js/buttons/TextPushButton.js';
import handle_png from '../../../images/handle_png.js';
import wheel_png from '../../../images/wheel_png.js';
import fluidPressureAndFlow from '../../fluidPressureAndFlow.js';
import FluidPressureAndFlowStrings from '../../FluidPressureAndFlowStrings.js';
import WaterTowerLegsNode from './WaterTowerLegsNode.js';
const fillString = FluidPressureAndFlowStrings.fill;
class WaterTowerNode extends Node {
  /**
   * @param {WaterTower} waterTower model
   * @param {FluidColorModel} fluidColorModel to change the color based on density
   * @param {ModelViewTransform2} modelViewTransform transform to convert between waterTower and view values
   * @param {HoseNode} hoseNode
   * @param {Object} [options]
   */
  constructor(waterTower, fluidColorModel, modelViewTransform, hoseNode, options) {
    options = merge({
      towerFrameColor: 'black'
    }, options);
    super();
    this.waterTower = waterTower;
    this.modelViewTransform = modelViewTransform;
    //add the frame
    const modelTankShape = new Shape().moveTo(modelViewTransform.modelToViewX(0), modelViewTransform.modelToViewY(0)).lineTo(modelViewTransform.modelToViewX(2 * waterTower.TANK_RADIUS), modelViewTransform.modelToViewY(0)).moveTo(modelViewTransform.modelToViewX(2 * waterTower.TANK_RADIUS), modelViewTransform.modelToViewY(waterTower.HOLE_SIZE)).lineTo(modelViewTransform.modelToViewX(2 * waterTower.TANK_RADIUS), modelViewTransform.modelToViewY(waterTower.TANK_HEIGHT)).lineTo(modelViewTransform.modelToViewX(waterTower.HOLE_SIZE + 0.4 + waterTower.INLET_X_OFFSET), modelViewTransform.modelToViewY(waterTower.TANK_HEIGHT)).moveTo(modelViewTransform.modelToViewX(waterTower.INLET_X_OFFSET), modelViewTransform.modelToViewY(waterTower.TANK_HEIGHT)).lineTo(modelViewTransform.modelToViewX(0), modelViewTransform.modelToViewY(waterTower.TANK_HEIGHT)).lineTo(modelViewTransform.modelToViewX(0), modelViewTransform.modelToViewY(0));
    this.waterTankFrame = new Path(modelTankShape, {
      top: 20,
      stroke: options.towerFrameColor,
      lineWidth: 2
    });

    //added tank background shape
    const tankBackgroundShape = new Shape().moveTo(modelViewTransform.modelToViewX(0), modelViewTransform.modelToViewY(0) - 1).lineTo(modelViewTransform.modelToViewX(2 * waterTower.TANK_RADIUS) - 1, modelViewTransform.modelToViewY(0) - 1).lineTo(modelViewTransform.modelToViewX(2 * waterTower.TANK_RADIUS) - 1, modelViewTransform.modelToViewY(waterTower.TANK_HEIGHT)).lineTo(modelViewTransform.modelToViewX(0), modelViewTransform.modelToViewY(waterTower.TANK_HEIGHT)).close();
    this.addChild(new Path(tankBackgroundShape, {
      bottom: this.waterTankFrame.bottom - 1,
      fill: '#808080'
    }));

    //add water
    const waterShape = new Shape().moveTo(modelViewTransform.modelToViewX(0), modelViewTransform.modelToViewY(0)).lineTo(modelViewTransform.modelToViewX(2 * waterTower.TANK_RADIUS), modelViewTransform.modelToViewY(0)).lineTo(modelViewTransform.modelToViewX(2 * waterTower.TANK_RADIUS), modelViewTransform.modelToViewY(waterTower.fluidLevelProperty.value)).lineTo(modelViewTransform.modelToViewX(0), modelViewTransform.modelToViewY(waterTower.fluidLevelProperty.value)).close();
    this.waterShapeNode = new Path(waterShape, {
      bottom: this.waterTankFrame.bottom - 2,
      fill: fluidColorModel.colorProperty.value
    });
    this.addChild(this.waterShapeNode);
    this.addChild(this.waterTankFrame);
    //add the legs
    this.waterTowerLegs = new WaterTowerLegsNode(this.waterTankFrame.width, waterTower.tankPositionProperty, modelViewTransform, {
      top: this.waterTankFrame.bottom
    });
    this.addChild(this.waterTowerLegs);

    //add the handle
    const handleNode = new Image(handle_png, {
      cursor: 'pointer',
      scale: 0.3,
      top: this.waterTankFrame.bottom,
      centerX: this.waterTankFrame.centerX
    });
    this.addChild(handleNode);
    handleNode.touchArea = handleNode.localBounds.dilatedXY(20, 20);

    //add the wheel and rope
    const wheelNode = new Image(wheel_png, {
      cursor: 'pointer',
      scale: 0.4,
      bottom: this.waterTankFrame.top,
      right: this.waterTankFrame.right + 3
    });
    this.addChild(wheelNode);
    this.addChild(new Path(Shape.lineSegment(0, this.waterTankFrame.height - modelViewTransform.modelToViewDeltaX(waterTower.HOLE_SIZE * 1.5), 0, 0), {
      right: wheelNode.right,
      top: wheelNode.bottom,
      lineWidth: 1,
      stroke: 'black'
    }));

    //add the gate at the end of the rope
    this.sluiceGate = new Rectangle(0, 0, 5, modelViewTransform.modelToViewDeltaX(waterTower.HOLE_SIZE * 2.5), {
      fill: new LinearGradient(0, 0, 5, 0).addColorStop(0, '#656570').addColorStop(0.5, '#dee6f5').addColorStop(0.7, '#bdc3cf').addColorStop(1, '#656570'),
      bottom: this.waterTankFrame.bottom,
      left: this.waterTankFrame.right,
      stroke: 'black',
      lineWidth: 0.5
    });
    this.addChild(this.sluiceGate);

    // water tank fill button
    let fillButtonFont = new PhetFont(14);
    let xMargin = 7;
    if (fillString.length > 8) {
      fillButtonFont = new PhetFont(10);
      xMargin = 2;
    }
    this.fillButton = new TextPushButton(fillString, {
      font: fillButtonFont,
      baseColor: 'yellow',
      listener: () => {
        waterTower.fill();
      },
      xMargin: xMargin,
      right: this.waterTankFrame.left - 10,
      top: this.waterTankFrame.centerY - 15
    });
    this.addChild(this.fillButton);
    let clickYOffset;
    let initialY;
    let initialHeight;
    handleNode.addInputListener(new SimpleDragHandler({
      start: event => {
        clickYOffset = this.globalToParentPoint(event.pointer.point).y;
        initialY = waterTower.tankPositionProperty.value.y;
        initialHeight = hoseNode.hose.heightProperty.value;
      },
      drag: event => {
        let deltaY = this.globalToParentPoint(event.pointer.point).y - clickYOffset;
        deltaY = modelViewTransform.viewToModelDeltaY(deltaY);
        let newY = initialY + deltaY;
        newY = newY > 13 ? 13 : newY < 0 ? 0 : newY;
        deltaY = newY - initialY;
        this.waterTower.tankPositionProperty.value = new Vector2(this.waterTower.tankPositionProperty.value.x, newY);
        hoseNode.hose.heightProperty.value = initialHeight + deltaY;
        hoseNode.setY(modelViewTransform.modelToViewY(this.waterTower.tankPositionProperty.value.y) - 117);
      }
    }));
    waterTower.tankPositionProperty.link(tankPosition => {
      this.bottom = tankPosition.y > 1.6 ? modelViewTransform.modelToViewY(0) : modelViewTransform.modelToViewY(tankPosition.y - 1.6);
    });
    waterTower.fluidVolumeProperty.link(() => {
      const waterShape = new Shape().moveTo(modelViewTransform.modelToViewX(0), modelViewTransform.modelToViewY(0)).lineTo(modelViewTransform.modelToViewX(2 * waterTower.TANK_RADIUS), modelViewTransform.modelToViewY(0)).lineTo(modelViewTransform.modelToViewX(2 * waterTower.TANK_RADIUS), modelViewTransform.modelToViewY(waterTower.fluidLevelProperty.value)).lineTo(modelViewTransform.modelToViewX(0), modelViewTransform.modelToViewY(waterTower.fluidLevelProperty.value)).close();
      this.waterShapeNode.setShape(waterShape);
    });
    fluidColorModel.colorProperty.linkAttribute(this.waterShapeNode, 'fill');
    this.setTranslation(modelViewTransform.modelToViewDeltaX(waterTower.tankPositionProperty.value.x), -modelViewTransform.modelToViewDeltaY(waterTower.tankPositionProperty.value.y));
    this.mutate(options);
  }
}
fluidPressureAndFlow.register('WaterTowerNode', WaterTowerNode);
export default WaterTowerNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWZWN0b3IyIiwiU2hhcGUiLCJtZXJnZSIsIlBoZXRGb250IiwiSW1hZ2UiLCJMaW5lYXJHcmFkaWVudCIsIk5vZGUiLCJQYXRoIiwiUmVjdGFuZ2xlIiwiU2ltcGxlRHJhZ0hhbmRsZXIiLCJUZXh0UHVzaEJ1dHRvbiIsImhhbmRsZV9wbmciLCJ3aGVlbF9wbmciLCJmbHVpZFByZXNzdXJlQW5kRmxvdyIsIkZsdWlkUHJlc3N1cmVBbmRGbG93U3RyaW5ncyIsIldhdGVyVG93ZXJMZWdzTm9kZSIsImZpbGxTdHJpbmciLCJmaWxsIiwiV2F0ZXJUb3dlck5vZGUiLCJjb25zdHJ1Y3RvciIsIndhdGVyVG93ZXIiLCJmbHVpZENvbG9yTW9kZWwiLCJtb2RlbFZpZXdUcmFuc2Zvcm0iLCJob3NlTm9kZSIsIm9wdGlvbnMiLCJ0b3dlckZyYW1lQ29sb3IiLCJtb2RlbFRhbmtTaGFwZSIsIm1vdmVUbyIsIm1vZGVsVG9WaWV3WCIsIm1vZGVsVG9WaWV3WSIsImxpbmVUbyIsIlRBTktfUkFESVVTIiwiSE9MRV9TSVpFIiwiVEFOS19IRUlHSFQiLCJJTkxFVF9YX09GRlNFVCIsIndhdGVyVGFua0ZyYW1lIiwidG9wIiwic3Ryb2tlIiwibGluZVdpZHRoIiwidGFua0JhY2tncm91bmRTaGFwZSIsImNsb3NlIiwiYWRkQ2hpbGQiLCJib3R0b20iLCJ3YXRlclNoYXBlIiwiZmx1aWRMZXZlbFByb3BlcnR5IiwidmFsdWUiLCJ3YXRlclNoYXBlTm9kZSIsImNvbG9yUHJvcGVydHkiLCJ3YXRlclRvd2VyTGVncyIsIndpZHRoIiwidGFua1Bvc2l0aW9uUHJvcGVydHkiLCJoYW5kbGVOb2RlIiwiY3Vyc29yIiwic2NhbGUiLCJjZW50ZXJYIiwidG91Y2hBcmVhIiwibG9jYWxCb3VuZHMiLCJkaWxhdGVkWFkiLCJ3aGVlbE5vZGUiLCJyaWdodCIsImxpbmVTZWdtZW50IiwiaGVpZ2h0IiwibW9kZWxUb1ZpZXdEZWx0YVgiLCJzbHVpY2VHYXRlIiwiYWRkQ29sb3JTdG9wIiwibGVmdCIsImZpbGxCdXR0b25Gb250IiwieE1hcmdpbiIsImxlbmd0aCIsImZpbGxCdXR0b24iLCJmb250IiwiYmFzZUNvbG9yIiwibGlzdGVuZXIiLCJjZW50ZXJZIiwiY2xpY2tZT2Zmc2V0IiwiaW5pdGlhbFkiLCJpbml0aWFsSGVpZ2h0IiwiYWRkSW5wdXRMaXN0ZW5lciIsInN0YXJ0IiwiZXZlbnQiLCJnbG9iYWxUb1BhcmVudFBvaW50IiwicG9pbnRlciIsInBvaW50IiwieSIsImhvc2UiLCJoZWlnaHRQcm9wZXJ0eSIsImRyYWciLCJkZWx0YVkiLCJ2aWV3VG9Nb2RlbERlbHRhWSIsIm5ld1kiLCJ4Iiwic2V0WSIsImxpbmsiLCJ0YW5rUG9zaXRpb24iLCJmbHVpZFZvbHVtZVByb3BlcnR5Iiwic2V0U2hhcGUiLCJsaW5rQXR0cmlidXRlIiwic2V0VHJhbnNsYXRpb24iLCJtb2RlbFRvVmlld0RlbHRhWSIsIm11dGF0ZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiV2F0ZXJUb3dlck5vZGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTQtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogTm9kZSBmb3IgdGhlICdXYXRlciBUb3dlcicgaW5jbHVkZXMgdGhlIHRvd2VyLCB3YXRlciwgc3RhbmQvbGVncywgaG9zZSBhbmQgdGhlIHdoZWVsLlxyXG4gKlxyXG4gKiBAYXV0aG9yIFNpZGRoYXJ0aGEgQ2hpbnRoYXBhbGx5IChBY3R1YWwgQ29uY2VwdHMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gJy4uLy4uLy4uLy4uL2tpdGUvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBtZXJnZSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvbWVyZ2UuanMnO1xyXG5pbXBvcnQgUGhldEZvbnQgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1BoZXRGb250LmpzJztcclxuaW1wb3J0IHsgSW1hZ2UsIExpbmVhckdyYWRpZW50LCBOb2RlLCBQYXRoLCBSZWN0YW5nbGUsIFNpbXBsZURyYWdIYW5kbGVyIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IFRleHRQdXNoQnV0dG9uIGZyb20gJy4uLy4uLy4uLy4uL3N1bi9qcy9idXR0b25zL1RleHRQdXNoQnV0dG9uLmpzJztcclxuaW1wb3J0IGhhbmRsZV9wbmcgZnJvbSAnLi4vLi4vLi4vaW1hZ2VzL2hhbmRsZV9wbmcuanMnO1xyXG5pbXBvcnQgd2hlZWxfcG5nIGZyb20gJy4uLy4uLy4uL2ltYWdlcy93aGVlbF9wbmcuanMnO1xyXG5pbXBvcnQgZmx1aWRQcmVzc3VyZUFuZEZsb3cgZnJvbSAnLi4vLi4vZmx1aWRQcmVzc3VyZUFuZEZsb3cuanMnO1xyXG5pbXBvcnQgRmx1aWRQcmVzc3VyZUFuZEZsb3dTdHJpbmdzIGZyb20gJy4uLy4uL0ZsdWlkUHJlc3N1cmVBbmRGbG93U3RyaW5ncy5qcyc7XHJcbmltcG9ydCBXYXRlclRvd2VyTGVnc05vZGUgZnJvbSAnLi9XYXRlclRvd2VyTGVnc05vZGUuanMnO1xyXG5cclxuY29uc3QgZmlsbFN0cmluZyA9IEZsdWlkUHJlc3N1cmVBbmRGbG93U3RyaW5ncy5maWxsO1xyXG5cclxuY2xhc3MgV2F0ZXJUb3dlck5vZGUgZXh0ZW5kcyBOb2RlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtXYXRlclRvd2VyfSB3YXRlclRvd2VyIG1vZGVsXHJcbiAgICogQHBhcmFtIHtGbHVpZENvbG9yTW9kZWx9IGZsdWlkQ29sb3JNb2RlbCB0byBjaGFuZ2UgdGhlIGNvbG9yIGJhc2VkIG9uIGRlbnNpdHlcclxuICAgKiBAcGFyYW0ge01vZGVsVmlld1RyYW5zZm9ybTJ9IG1vZGVsVmlld1RyYW5zZm9ybSB0cmFuc2Zvcm0gdG8gY29udmVydCBiZXR3ZWVuIHdhdGVyVG93ZXIgYW5kIHZpZXcgdmFsdWVzXHJcbiAgICogQHBhcmFtIHtIb3NlTm9kZX0gaG9zZU5vZGVcclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIHdhdGVyVG93ZXIsIGZsdWlkQ29sb3JNb2RlbCwgbW9kZWxWaWV3VHJhbnNmb3JtLCBob3NlTm9kZSwgb3B0aW9ucyApIHtcclxuXHJcbiAgICBvcHRpb25zID0gbWVyZ2UoIHtcclxuICAgICAgdG93ZXJGcmFtZUNvbG9yOiAnYmxhY2snXHJcbiAgICB9LCBvcHRpb25zICk7XHJcblxyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICB0aGlzLndhdGVyVG93ZXIgPSB3YXRlclRvd2VyO1xyXG4gICAgdGhpcy5tb2RlbFZpZXdUcmFuc2Zvcm0gPSBtb2RlbFZpZXdUcmFuc2Zvcm07XHJcbiAgICAvL2FkZCB0aGUgZnJhbWVcclxuICAgIGNvbnN0IG1vZGVsVGFua1NoYXBlID0gbmV3IFNoYXBlKClcclxuICAgICAgLm1vdmVUbyggbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WCggMCApLCBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdZKCAwICkgKVxyXG4gICAgICAubGluZVRvKCBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdYKCAyICogd2F0ZXJUb3dlci5UQU5LX1JBRElVUyApLCBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdZKCAwICkgKVxyXG4gICAgICAubW92ZVRvKCBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdYKCAyICogd2F0ZXJUb3dlci5UQU5LX1JBRElVUyApLCBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdZKCB3YXRlclRvd2VyLkhPTEVfU0laRSApIClcclxuICAgICAgLmxpbmVUbyggbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WCggMiAqIHdhdGVyVG93ZXIuVEFOS19SQURJVVMgKSwgbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WSggd2F0ZXJUb3dlci5UQU5LX0hFSUdIVCApIClcclxuICAgICAgLmxpbmVUbyggbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WCggd2F0ZXJUb3dlci5IT0xFX1NJWkUgKyAwLjQgKyB3YXRlclRvd2VyLklOTEVUX1hfT0ZGU0VUICksIG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1koIHdhdGVyVG93ZXIuVEFOS19IRUlHSFQgKSApXHJcbiAgICAgIC5tb3ZlVG8oIG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1goIHdhdGVyVG93ZXIuSU5MRVRfWF9PRkZTRVQgKSwgbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WSggd2F0ZXJUb3dlci5UQU5LX0hFSUdIVCApIClcclxuICAgICAgLmxpbmVUbyggbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WCggMCApLCBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdZKCB3YXRlclRvd2VyLlRBTktfSEVJR0hUICkgKVxyXG4gICAgICAubGluZVRvKCBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdYKCAwICksIG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1koIDAgKSApO1xyXG4gICAgdGhpcy53YXRlclRhbmtGcmFtZSA9IG5ldyBQYXRoKCBtb2RlbFRhbmtTaGFwZSwgeyB0b3A6IDIwLCBzdHJva2U6IG9wdGlvbnMudG93ZXJGcmFtZUNvbG9yLCBsaW5lV2lkdGg6IDIgfSApO1xyXG5cclxuICAgIC8vYWRkZWQgdGFuayBiYWNrZ3JvdW5kIHNoYXBlXHJcbiAgICBjb25zdCB0YW5rQmFja2dyb3VuZFNoYXBlID0gbmV3IFNoYXBlKClcclxuICAgICAgLm1vdmVUbyggbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WCggMCApLCBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdZKCAwICkgLSAxIClcclxuICAgICAgLmxpbmVUbyggbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WCggMiAqIHdhdGVyVG93ZXIuVEFOS19SQURJVVMgKSAtIDEsIG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1koIDAgKSAtIDEgKVxyXG4gICAgICAubGluZVRvKCBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdYKCAyICogd2F0ZXJUb3dlci5UQU5LX1JBRElVUyApIC0gMSwgbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WSggd2F0ZXJUb3dlci5UQU5LX0hFSUdIVCApIClcclxuICAgICAgLmxpbmVUbyggbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WCggMCApLCBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdZKCB3YXRlclRvd2VyLlRBTktfSEVJR0hUICkgKS5jbG9zZSgpO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggbmV3IFBhdGgoIHRhbmtCYWNrZ3JvdW5kU2hhcGUsIHsgYm90dG9tOiB0aGlzLndhdGVyVGFua0ZyYW1lLmJvdHRvbSAtIDEsIGZpbGw6ICcjODA4MDgwJyB9ICkgKTtcclxuXHJcbiAgICAvL2FkZCB3YXRlclxyXG4gICAgY29uc3Qgd2F0ZXJTaGFwZSA9IG5ldyBTaGFwZSgpXHJcbiAgICAgIC5tb3ZlVG8oIG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1goIDAgKSwgbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WSggMCApIClcclxuICAgICAgLmxpbmVUbyggbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WCggMiAqIHdhdGVyVG93ZXIuVEFOS19SQURJVVMgKSwgbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WSggMCApIClcclxuICAgICAgLmxpbmVUbyggbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WCggMiAqIHdhdGVyVG93ZXIuVEFOS19SQURJVVMgKSwgbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WSggd2F0ZXJUb3dlci5mbHVpZExldmVsUHJvcGVydHkudmFsdWUgKSApXHJcbiAgICAgIC5saW5lVG8oIG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1goIDAgKSwgbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WSggd2F0ZXJUb3dlci5mbHVpZExldmVsUHJvcGVydHkudmFsdWUgKSApLmNsb3NlKCk7XHJcbiAgICB0aGlzLndhdGVyU2hhcGVOb2RlID0gbmV3IFBhdGgoIHdhdGVyU2hhcGUsIHtcclxuICAgICAgYm90dG9tOiB0aGlzLndhdGVyVGFua0ZyYW1lLmJvdHRvbSAtIDIsXHJcbiAgICAgIGZpbGw6IGZsdWlkQ29sb3JNb2RlbC5jb2xvclByb3BlcnR5LnZhbHVlXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCB0aGlzLndhdGVyU2hhcGVOb2RlICk7XHJcblxyXG4gICAgdGhpcy5hZGRDaGlsZCggdGhpcy53YXRlclRhbmtGcmFtZSApO1xyXG4gICAgLy9hZGQgdGhlIGxlZ3NcclxuICAgIHRoaXMud2F0ZXJUb3dlckxlZ3MgPSBuZXcgV2F0ZXJUb3dlckxlZ3NOb2RlKCB0aGlzLndhdGVyVGFua0ZyYW1lLndpZHRoLCB3YXRlclRvd2VyLnRhbmtQb3NpdGlvblByb3BlcnR5LCBtb2RlbFZpZXdUcmFuc2Zvcm0sIHsgdG9wOiB0aGlzLndhdGVyVGFua0ZyYW1lLmJvdHRvbSB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCB0aGlzLndhdGVyVG93ZXJMZWdzICk7XHJcblxyXG4gICAgLy9hZGQgdGhlIGhhbmRsZVxyXG4gICAgY29uc3QgaGFuZGxlTm9kZSA9IG5ldyBJbWFnZSggaGFuZGxlX3BuZywge1xyXG4gICAgICBjdXJzb3I6ICdwb2ludGVyJyxcclxuICAgICAgc2NhbGU6IDAuMyxcclxuICAgICAgdG9wOiB0aGlzLndhdGVyVGFua0ZyYW1lLmJvdHRvbSxcclxuICAgICAgY2VudGVyWDogdGhpcy53YXRlclRhbmtGcmFtZS5jZW50ZXJYXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBoYW5kbGVOb2RlICk7XHJcbiAgICBoYW5kbGVOb2RlLnRvdWNoQXJlYSA9IGhhbmRsZU5vZGUubG9jYWxCb3VuZHMuZGlsYXRlZFhZKCAyMCwgMjAgKTtcclxuXHJcbiAgICAvL2FkZCB0aGUgd2hlZWwgYW5kIHJvcGVcclxuICAgIGNvbnN0IHdoZWVsTm9kZSA9IG5ldyBJbWFnZSggd2hlZWxfcG5nLCB7XHJcbiAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxyXG4gICAgICBzY2FsZTogMC40LFxyXG4gICAgICBib3R0b206IHRoaXMud2F0ZXJUYW5rRnJhbWUudG9wLFxyXG4gICAgICByaWdodDogdGhpcy53YXRlclRhbmtGcmFtZS5yaWdodCArIDNcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHdoZWVsTm9kZSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggbmV3IFBhdGgoIFNoYXBlLmxpbmVTZWdtZW50KCAwLCB0aGlzLndhdGVyVGFua0ZyYW1lLmhlaWdodCAtIG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld0RlbHRhWCggd2F0ZXJUb3dlci5IT0xFX1NJWkUgKiAxLjUgKSwgMCwgMCApLCB7XHJcbiAgICAgIHJpZ2h0OiB3aGVlbE5vZGUucmlnaHQsXHJcbiAgICAgIHRvcDogd2hlZWxOb2RlLmJvdHRvbSxcclxuICAgICAgbGluZVdpZHRoOiAxLFxyXG4gICAgICBzdHJva2U6ICdibGFjaydcclxuICAgIH0gKSApO1xyXG5cclxuICAgIC8vYWRkIHRoZSBnYXRlIGF0IHRoZSBlbmQgb2YgdGhlIHJvcGVcclxuICAgIHRoaXMuc2x1aWNlR2F0ZSA9IG5ldyBSZWN0YW5nbGUoIDAsIDAsIDUsIG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld0RlbHRhWCggd2F0ZXJUb3dlci5IT0xFX1NJWkUgKiAyLjUgKSwge1xyXG4gICAgICBmaWxsOiBuZXcgTGluZWFyR3JhZGllbnQoIDAsIDAsIDUsIDAgKVxyXG4gICAgICAgIC5hZGRDb2xvclN0b3AoIDAsICcjNjU2NTcwJyApXHJcbiAgICAgICAgLmFkZENvbG9yU3RvcCggMC41LCAnI2RlZTZmNScgKVxyXG4gICAgICAgIC5hZGRDb2xvclN0b3AoIDAuNywgJyNiZGMzY2YnIClcclxuICAgICAgICAuYWRkQ29sb3JTdG9wKCAxLCAnIzY1NjU3MCcgKSxcclxuICAgICAgYm90dG9tOiB0aGlzLndhdGVyVGFua0ZyYW1lLmJvdHRvbSxcclxuICAgICAgbGVmdDogdGhpcy53YXRlclRhbmtGcmFtZS5yaWdodCxcclxuICAgICAgc3Ryb2tlOiAnYmxhY2snLFxyXG4gICAgICBsaW5lV2lkdGg6IDAuNVxyXG4gICAgfSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggdGhpcy5zbHVpY2VHYXRlICk7XHJcblxyXG4gICAgLy8gd2F0ZXIgdGFuayBmaWxsIGJ1dHRvblxyXG4gICAgbGV0IGZpbGxCdXR0b25Gb250ID0gbmV3IFBoZXRGb250KCAxNCApO1xyXG4gICAgbGV0IHhNYXJnaW4gPSA3O1xyXG4gICAgaWYgKCBmaWxsU3RyaW5nLmxlbmd0aCA+IDggKSB7XHJcbiAgICAgIGZpbGxCdXR0b25Gb250ID0gbmV3IFBoZXRGb250KCAxMCApO1xyXG4gICAgICB4TWFyZ2luID0gMjtcclxuICAgIH1cclxuICAgIHRoaXMuZmlsbEJ1dHRvbiA9IG5ldyBUZXh0UHVzaEJ1dHRvbiggZmlsbFN0cmluZywge1xyXG4gICAgICBmb250OiBmaWxsQnV0dG9uRm9udCxcclxuICAgICAgYmFzZUNvbG9yOiAneWVsbG93JyxcclxuICAgICAgbGlzdGVuZXI6ICgpID0+IHtcclxuICAgICAgICB3YXRlclRvd2VyLmZpbGwoKTtcclxuICAgICAgfSxcclxuICAgICAgeE1hcmdpbjogeE1hcmdpbixcclxuICAgICAgcmlnaHQ6IHRoaXMud2F0ZXJUYW5rRnJhbWUubGVmdCAtIDEwLFxyXG4gICAgICB0b3A6IHRoaXMud2F0ZXJUYW5rRnJhbWUuY2VudGVyWSAtIDE1XHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCB0aGlzLmZpbGxCdXR0b24gKTtcclxuXHJcbiAgICBsZXQgY2xpY2tZT2Zmc2V0O1xyXG4gICAgbGV0IGluaXRpYWxZO1xyXG4gICAgbGV0IGluaXRpYWxIZWlnaHQ7XHJcbiAgICBoYW5kbGVOb2RlLmFkZElucHV0TGlzdGVuZXIoIG5ldyBTaW1wbGVEcmFnSGFuZGxlcigge1xyXG4gICAgICBzdGFydDogZXZlbnQgPT4ge1xyXG4gICAgICAgIGNsaWNrWU9mZnNldCA9IHRoaXMuZ2xvYmFsVG9QYXJlbnRQb2ludCggZXZlbnQucG9pbnRlci5wb2ludCApLnk7XHJcbiAgICAgICAgaW5pdGlhbFkgPSB3YXRlclRvd2VyLnRhbmtQb3NpdGlvblByb3BlcnR5LnZhbHVlLnk7XHJcbiAgICAgICAgaW5pdGlhbEhlaWdodCA9IGhvc2VOb2RlLmhvc2UuaGVpZ2h0UHJvcGVydHkudmFsdWU7XHJcbiAgICAgIH0sXHJcbiAgICAgIGRyYWc6IGV2ZW50ID0+IHtcclxuICAgICAgICBsZXQgZGVsdGFZID0gdGhpcy5nbG9iYWxUb1BhcmVudFBvaW50KCBldmVudC5wb2ludGVyLnBvaW50ICkueSAtIGNsaWNrWU9mZnNldDtcclxuICAgICAgICBkZWx0YVkgPSBtb2RlbFZpZXdUcmFuc2Zvcm0udmlld1RvTW9kZWxEZWx0YVkoIGRlbHRhWSApO1xyXG4gICAgICAgIGxldCBuZXdZID0gaW5pdGlhbFkgKyBkZWx0YVk7XHJcbiAgICAgICAgbmV3WSA9IG5ld1kgPiAxMyA/IDEzIDogbmV3WSA8IDAgPyAwIDogbmV3WTtcclxuICAgICAgICBkZWx0YVkgPSBuZXdZIC0gaW5pdGlhbFk7XHJcbiAgICAgICAgdGhpcy53YXRlclRvd2VyLnRhbmtQb3NpdGlvblByb3BlcnR5LnZhbHVlID0gbmV3IFZlY3RvcjIoIHRoaXMud2F0ZXJUb3dlci50YW5rUG9zaXRpb25Qcm9wZXJ0eS52YWx1ZS54LCBuZXdZICk7XHJcblxyXG4gICAgICAgIGhvc2VOb2RlLmhvc2UuaGVpZ2h0UHJvcGVydHkudmFsdWUgPSBpbml0aWFsSGVpZ2h0ICsgZGVsdGFZO1xyXG4gICAgICAgIGhvc2VOb2RlLnNldFkoIG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1koIHRoaXMud2F0ZXJUb3dlci50YW5rUG9zaXRpb25Qcm9wZXJ0eS52YWx1ZS55ICkgLSAxMTcgKTtcclxuICAgICAgfVxyXG4gICAgfSApICk7XHJcblxyXG4gICAgd2F0ZXJUb3dlci50YW5rUG9zaXRpb25Qcm9wZXJ0eS5saW5rKCB0YW5rUG9zaXRpb24gPT4ge1xyXG4gICAgICB0aGlzLmJvdHRvbSA9ICggdGFua1Bvc2l0aW9uLnkgPiAxLjYgKSA/IG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1koIDAgKSA6IG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1koIHRhbmtQb3NpdGlvbi55IC0gMS42ICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgd2F0ZXJUb3dlci5mbHVpZFZvbHVtZVByb3BlcnR5LmxpbmsoICgpID0+IHtcclxuICAgICAgY29uc3Qgd2F0ZXJTaGFwZSA9IG5ldyBTaGFwZSgpXHJcbiAgICAgICAgLm1vdmVUbyggbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WCggMCApLCBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdZKCAwICkgKVxyXG4gICAgICAgIC5saW5lVG8oIG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1goIDIgKiB3YXRlclRvd2VyLlRBTktfUkFESVVTICksIG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1koIDAgKSApXHJcbiAgICAgICAgLmxpbmVUbyggbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WCggMiAqIHdhdGVyVG93ZXIuVEFOS19SQURJVVMgKSwgbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WSggd2F0ZXJUb3dlci5mbHVpZExldmVsUHJvcGVydHkudmFsdWUgKSApXHJcbiAgICAgICAgLmxpbmVUbyggbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WCggMCApLCBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdZKCB3YXRlclRvd2VyLmZsdWlkTGV2ZWxQcm9wZXJ0eS52YWx1ZSApICkuY2xvc2UoKTtcclxuICAgICAgdGhpcy53YXRlclNoYXBlTm9kZS5zZXRTaGFwZSggd2F0ZXJTaGFwZSApO1xyXG4gICAgfSApO1xyXG5cclxuXHJcbiAgICBmbHVpZENvbG9yTW9kZWwuY29sb3JQcm9wZXJ0eS5saW5rQXR0cmlidXRlKCB0aGlzLndhdGVyU2hhcGVOb2RlLCAnZmlsbCcgKTtcclxuXHJcbiAgICB0aGlzLnNldFRyYW5zbGF0aW9uKCBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdEZWx0YVgoIHdhdGVyVG93ZXIudGFua1Bvc2l0aW9uUHJvcGVydHkudmFsdWUueCApLFxyXG4gICAgICAtbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3RGVsdGFZKCB3YXRlclRvd2VyLnRhbmtQb3NpdGlvblByb3BlcnR5LnZhbHVlLnkgKSApO1xyXG5cclxuICAgIHRoaXMubXV0YXRlKCBvcHRpb25zICk7XHJcbiAgfVxyXG59XHJcblxyXG5mbHVpZFByZXNzdXJlQW5kRmxvdy5yZWdpc3RlciggJ1dhdGVyVG93ZXJOb2RlJywgV2F0ZXJUb3dlck5vZGUgKTtcclxuZXhwb3J0IGRlZmF1bHQgV2F0ZXJUb3dlck5vZGU7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLE9BQU8sTUFBTSwrQkFBK0I7QUFDbkQsU0FBU0MsS0FBSyxRQUFRLGdDQUFnQztBQUN0RCxPQUFPQyxLQUFLLE1BQU0sbUNBQW1DO0FBQ3JELE9BQU9DLFFBQVEsTUFBTSx5Q0FBeUM7QUFDOUQsU0FBU0MsS0FBSyxFQUFFQyxjQUFjLEVBQUVDLElBQUksRUFBRUMsSUFBSSxFQUFFQyxTQUFTLEVBQUVDLGlCQUFpQixRQUFRLG1DQUFtQztBQUNuSCxPQUFPQyxjQUFjLE1BQU0sOENBQThDO0FBQ3pFLE9BQU9DLFVBQVUs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