// Copyright 2013-2023, University of Colorado Boulder

/**
 * View for mystery pool which is based on square pool.
 * Mystery pool has one of gravity/fluidDensity controls with a question mark and a random gravity/fluidDensity is used
 * for the hidden control. The objective is to figure out the hidden value.
 *
 * @author Vasily Shakhov (Mlearner)
 * @author Siddhartha Chinthapally (Actual Concepts)
 */

import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { Text, VBox } from '../../../../scenery/js/imports.js';
import AquaRadioButton from '../../../../sun/js/AquaRadioButton.js';
import ComboBox from '../../../../sun/js/ComboBox.js';
import Panel from '../../../../sun/js/Panel.js';
import fluidPressureAndFlow from '../../fluidPressureAndFlow.js';
import FluidPressureAndFlowStrings from '../../FluidPressureAndFlowStrings.js';
import SquarePoolView from './SquarePoolView.js';
const fluidAString = FluidPressureAndFlowStrings.fluidA;
const fluidBString = FluidPressureAndFlowStrings.fluidB;
const fluidCString = FluidPressureAndFlowStrings.fluidC;
const mysteryFluidString = FluidPressureAndFlowStrings.mysteryFluid;
const mysteryPlanetString = FluidPressureAndFlowStrings.mysteryPlanet;
const planetAString = FluidPressureAndFlowStrings.planetA;
const planetBString = FluidPressureAndFlowStrings.planetB;
const planetCString = FluidPressureAndFlowStrings.planetC;

// constants
const RADIO_BUTTON_TOUCH_DILATION_Y = 2; // empirically determined

class MysteryPoolView extends SquarePoolView {
  /**
   * @param mysteryPoolModel
   * @param modelViewTransform
   * @param bounds
   * @param bottom
   * @param left
   * @param fluidDensityTop
   * @param fluidDensityLeft
   * @param width
   */
  constructor(mysteryPoolModel, modelViewTransform, bounds, bottom, left, fluidDensityTop, fluidDensityLeft, width) {
    super(mysteryPoolModel, modelViewTransform);
    const radioButtonTextOptions = {
      font: new PhetFont(12),
      maxWidth: width * 0.8
    };
    const comboBoxTextOptions = {
      font: new PhetFont(12),
      maxWidth: width * 0.5
    };
    const mysteryFluidRadio = new AquaRadioButton(mysteryPoolModel.underPressureModel.mysteryChoiceProperty, 'fluidDensity', new Text(mysteryFluidString, radioButtonTextOptions), {
      radius: 6
    });
    const mysteryPlanetRadio = new AquaRadioButton(mysteryPoolModel.underPressureModel.mysteryChoiceProperty, 'gravity', new Text(mysteryPlanetString, radioButtonTextOptions), {
      radius: 6
    });

    //touch areas
    mysteryFluidRadio.touchArea = mysteryFluidRadio.bounds.dilatedY(RADIO_BUTTON_TOUCH_DILATION_Y);
    mysteryPlanetRadio.touchArea = mysteryPlanetRadio.bounds.dilatedY(RADIO_BUTTON_TOUCH_DILATION_Y);
    const content = new VBox({
      children: [mysteryFluidRadio, mysteryPlanetRadio],
      spacing: 5,
      align: 'left',
      resize: false
    });
    const choicePanel = new Panel(content, {
      xMargin: 7,
      yMargin: 6,
      stroke: 'gray',
      lineWidth: 1,
      fill: '#f2fa6a',
      resize: false,
      align: 'left',
      cornerRadius: 7,
      minWidth: width,
      maxWidth: width
    });
    choicePanel.top = bottom + 5;
    choicePanel.left = left;
    this.addChild(choicePanel);

    // items
    this.fluidDensityComboBox = new ComboBox(mysteryPoolModel.customFluidDensityProperty, [{
      value: 0,
      createNode: () => new Text(fluidAString, comboBoxTextOptions)
    }, {
      value: 1,
      createNode: () => new Text(fluidBString, comboBoxTextOptions)
    }, {
      value: 2,
      createNode: () => new Text(fluidCString, comboBoxTextOptions)
    }], this, {
      highlightFill: 'rgb(218,255,255)',
      visible: false
    });
    this.fluidDensityComboBox.touchArea = this.fluidDensityComboBox.localBounds.dilatedXY(0, 0);
    this.fluidDensityComboBox.top = fluidDensityTop;
    this.fluidDensityComboBox.right = fluidDensityLeft - 10;
    this.addChild(this.fluidDensityComboBox);
    this.gravityComboBox = new ComboBox(mysteryPoolModel.customGravityProperty, [{
      value: 0,
      createNode: () => new Text(planetAString, comboBoxTextOptions)
    }, {
      value: 1,
      createNode: () => new Text(planetBString, comboBoxTextOptions)
    }, {
      value: 2,
      createNode: () => new Text(planetCString, comboBoxTextOptions)
    }], this, {
      cornerRadius: 8,
      highlightFill: 'rgb(218,255,255)',
      visible: false
    });
    this.gravityComboBox.touchArea = this.gravityComboBox.localBounds.dilatedXY(0, 0);
    this.gravityComboBox.right = this.fluidDensityComboBox.right;
    this.gravityComboBox.top = this.fluidDensityComboBox.top;
    this.addChild(this.gravityComboBox);

    //TODO replace 2 DerivedProperties with 1 mysteryChoiceProperty listener
    new DerivedProperty([mysteryPoolModel.underPressureModel.mysteryChoiceProperty], mysteryChoice => {
      return mysteryChoice === 'fluidDensity';
    }).linkAttribute(this.fluidDensityComboBox, 'visible');
    new DerivedProperty([mysteryPoolModel.underPressureModel.mysteryChoiceProperty], mysteryChoice => {
      return mysteryChoice === 'gravity';
    }).linkAttribute(this.gravityComboBox, 'visible');
  }
}
fluidPressureAndFlow.register('MysteryPoolView', MysteryPoolView);
export default MysteryPoolView;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJQaGV0Rm9udCIsIlRleHQiLCJWQm94IiwiQXF1YVJhZGlvQnV0dG9uIiwiQ29tYm9Cb3giLCJQYW5lbCIsImZsdWlkUHJlc3N1cmVBbmRGbG93IiwiRmx1aWRQcmVzc3VyZUFuZEZsb3dTdHJpbmdzIiwiU3F1YXJlUG9vbFZpZXciLCJmbHVpZEFTdHJpbmciLCJmbHVpZEEiLCJmbHVpZEJTdHJpbmciLCJmbHVpZEIiLCJmbHVpZENTdHJpbmciLCJmbHVpZEMiLCJteXN0ZXJ5Rmx1aWRTdHJpbmciLCJteXN0ZXJ5Rmx1aWQiLCJteXN0ZXJ5UGxhbmV0U3RyaW5nIiwibXlzdGVyeVBsYW5ldCIsInBsYW5ldEFTdHJpbmciLCJwbGFuZXRBIiwicGxhbmV0QlN0cmluZyIsInBsYW5ldEIiLCJwbGFuZXRDU3RyaW5nIiwicGxhbmV0QyIsIlJBRElPX0JVVFRPTl9UT1VDSF9ESUxBVElPTl9ZIiwiTXlzdGVyeVBvb2xWaWV3IiwiY29uc3RydWN0b3IiLCJteXN0ZXJ5UG9vbE1vZGVsIiwibW9kZWxWaWV3VHJhbnNmb3JtIiwiYm91bmRzIiwiYm90dG9tIiwibGVmdCIsImZsdWlkRGVuc2l0eVRvcCIsImZsdWlkRGVuc2l0eUxlZnQiLCJ3aWR0aCIsInJhZGlvQnV0dG9uVGV4dE9wdGlvbnMiLCJmb250IiwibWF4V2lkdGgiLCJjb21ib0JveFRleHRPcHRpb25zIiwibXlzdGVyeUZsdWlkUmFkaW8iLCJ1bmRlclByZXNzdXJlTW9kZWwiLCJteXN0ZXJ5Q2hvaWNlUHJvcGVydHkiLCJyYWRpdXMiLCJteXN0ZXJ5UGxhbmV0UmFkaW8iLCJ0b3VjaEFyZWEiLCJkaWxhdGVkWSIsImNvbnRlbnQiLCJjaGlsZHJlbiIsInNwYWNpbmciLCJhbGlnbiIsInJlc2l6ZSIsImNob2ljZVBhbmVsIiwieE1hcmdpbiIsInlNYXJnaW4iLCJzdHJva2UiLCJsaW5lV2lkdGgiLCJmaWxsIiwiY29ybmVyUmFkaXVzIiwibWluV2lkdGgiLCJ0b3AiLCJhZGRDaGlsZCIsImZsdWlkRGVuc2l0eUNvbWJvQm94IiwiY3VzdG9tRmx1aWREZW5zaXR5UHJvcGVydHkiLCJ2YWx1ZSIsImNyZWF0ZU5vZGUiLCJoaWdobGlnaHRGaWxsIiwidmlzaWJsZSIsImxvY2FsQm91bmRzIiwiZGlsYXRlZFhZIiwicmlnaHQiLCJncmF2aXR5Q29tYm9Cb3giLCJjdXN0b21HcmF2aXR5UHJvcGVydHkiLCJteXN0ZXJ5Q2hvaWNlIiwibGlua0F0dHJpYnV0ZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiTXlzdGVyeVBvb2xWaWV3LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFZpZXcgZm9yIG15c3RlcnkgcG9vbCB3aGljaCBpcyBiYXNlZCBvbiBzcXVhcmUgcG9vbC5cclxuICogTXlzdGVyeSBwb29sIGhhcyBvbmUgb2YgZ3Jhdml0eS9mbHVpZERlbnNpdHkgY29udHJvbHMgd2l0aCBhIHF1ZXN0aW9uIG1hcmsgYW5kIGEgcmFuZG9tIGdyYXZpdHkvZmx1aWREZW5zaXR5IGlzIHVzZWRcclxuICogZm9yIHRoZSBoaWRkZW4gY29udHJvbC4gVGhlIG9iamVjdGl2ZSBpcyB0byBmaWd1cmUgb3V0IHRoZSBoaWRkZW4gdmFsdWUuXHJcbiAqXHJcbiAqIEBhdXRob3IgVmFzaWx5IFNoYWtob3YgKE1sZWFybmVyKVxyXG4gKiBAYXV0aG9yIFNpZGRoYXJ0aGEgQ2hpbnRoYXBhbGx5IChBY3R1YWwgQ29uY2VwdHMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IERlcml2ZWRQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL0Rlcml2ZWRQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBQaGV0Rm9udCBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvUGhldEZvbnQuanMnO1xyXG5pbXBvcnQgeyBUZXh0LCBWQm94IH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IEFxdWFSYWRpb0J1dHRvbiBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvQXF1YVJhZGlvQnV0dG9uLmpzJztcclxuaW1wb3J0IENvbWJvQm94IGZyb20gJy4uLy4uLy4uLy4uL3N1bi9qcy9Db21ib0JveC5qcyc7XHJcbmltcG9ydCBQYW5lbCBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvUGFuZWwuanMnO1xyXG5pbXBvcnQgZmx1aWRQcmVzc3VyZUFuZEZsb3cgZnJvbSAnLi4vLi4vZmx1aWRQcmVzc3VyZUFuZEZsb3cuanMnO1xyXG5pbXBvcnQgRmx1aWRQcmVzc3VyZUFuZEZsb3dTdHJpbmdzIGZyb20gJy4uLy4uL0ZsdWlkUHJlc3N1cmVBbmRGbG93U3RyaW5ncy5qcyc7XHJcbmltcG9ydCBTcXVhcmVQb29sVmlldyBmcm9tICcuL1NxdWFyZVBvb2xWaWV3LmpzJztcclxuXHJcbmNvbnN0IGZsdWlkQVN0cmluZyA9IEZsdWlkUHJlc3N1cmVBbmRGbG93U3RyaW5ncy5mbHVpZEE7XHJcbmNvbnN0IGZsdWlkQlN0cmluZyA9IEZsdWlkUHJlc3N1cmVBbmRGbG93U3RyaW5ncy5mbHVpZEI7XHJcbmNvbnN0IGZsdWlkQ1N0cmluZyA9IEZsdWlkUHJlc3N1cmVBbmRGbG93U3RyaW5ncy5mbHVpZEM7XHJcbmNvbnN0IG15c3RlcnlGbHVpZFN0cmluZyA9IEZsdWlkUHJlc3N1cmVBbmRGbG93U3RyaW5ncy5teXN0ZXJ5Rmx1aWQ7XHJcbmNvbnN0IG15c3RlcnlQbGFuZXRTdHJpbmcgPSBGbHVpZFByZXNzdXJlQW5kRmxvd1N0cmluZ3MubXlzdGVyeVBsYW5ldDtcclxuY29uc3QgcGxhbmV0QVN0cmluZyA9IEZsdWlkUHJlc3N1cmVBbmRGbG93U3RyaW5ncy5wbGFuZXRBO1xyXG5jb25zdCBwbGFuZXRCU3RyaW5nID0gRmx1aWRQcmVzc3VyZUFuZEZsb3dTdHJpbmdzLnBsYW5ldEI7XHJcbmNvbnN0IHBsYW5ldENTdHJpbmcgPSBGbHVpZFByZXNzdXJlQW5kRmxvd1N0cmluZ3MucGxhbmV0QztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBSQURJT19CVVRUT05fVE9VQ0hfRElMQVRJT05fWSA9IDI7IC8vIGVtcGlyaWNhbGx5IGRldGVybWluZWRcclxuXHJcbmNsYXNzIE15c3RlcnlQb29sVmlldyBleHRlbmRzIFNxdWFyZVBvb2xWaWV3IHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIG15c3RlcnlQb29sTW9kZWxcclxuICAgKiBAcGFyYW0gbW9kZWxWaWV3VHJhbnNmb3JtXHJcbiAgICogQHBhcmFtIGJvdW5kc1xyXG4gICAqIEBwYXJhbSBib3R0b21cclxuICAgKiBAcGFyYW0gbGVmdFxyXG4gICAqIEBwYXJhbSBmbHVpZERlbnNpdHlUb3BcclxuICAgKiBAcGFyYW0gZmx1aWREZW5zaXR5TGVmdFxyXG4gICAqIEBwYXJhbSB3aWR0aFxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBteXN0ZXJ5UG9vbE1vZGVsLCBtb2RlbFZpZXdUcmFuc2Zvcm0sIGJvdW5kcywgYm90dG9tLCBsZWZ0LCBmbHVpZERlbnNpdHlUb3AsIGZsdWlkRGVuc2l0eUxlZnQsIHdpZHRoICkge1xyXG5cclxuICAgIHN1cGVyKCBteXN0ZXJ5UG9vbE1vZGVsLCBtb2RlbFZpZXdUcmFuc2Zvcm0gKTtcclxuXHJcbiAgICBjb25zdCByYWRpb0J1dHRvblRleHRPcHRpb25zID0ge1xyXG4gICAgICBmb250OiBuZXcgUGhldEZvbnQoIDEyICksXHJcbiAgICAgIG1heFdpZHRoOiB3aWR0aCAqIDAuOFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBjb21ib0JveFRleHRPcHRpb25zID0ge1xyXG4gICAgICBmb250OiBuZXcgUGhldEZvbnQoIDEyICksXHJcbiAgICAgIG1heFdpZHRoOiB3aWR0aCAqIDAuNVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBteXN0ZXJ5Rmx1aWRSYWRpbyA9IG5ldyBBcXVhUmFkaW9CdXR0b24oIG15c3RlcnlQb29sTW9kZWwudW5kZXJQcmVzc3VyZU1vZGVsLm15c3RlcnlDaG9pY2VQcm9wZXJ0eSxcclxuICAgICAgJ2ZsdWlkRGVuc2l0eScsIG5ldyBUZXh0KCBteXN0ZXJ5Rmx1aWRTdHJpbmcsIHJhZGlvQnV0dG9uVGV4dE9wdGlvbnMgKSwgeyByYWRpdXM6IDYgfSApO1xyXG4gICAgY29uc3QgbXlzdGVyeVBsYW5ldFJhZGlvID0gbmV3IEFxdWFSYWRpb0J1dHRvbiggbXlzdGVyeVBvb2xNb2RlbC51bmRlclByZXNzdXJlTW9kZWwubXlzdGVyeUNob2ljZVByb3BlcnR5LCAnZ3Jhdml0eScsXHJcbiAgICAgIG5ldyBUZXh0KCBteXN0ZXJ5UGxhbmV0U3RyaW5nLCByYWRpb0J1dHRvblRleHRPcHRpb25zICksIHsgcmFkaXVzOiA2IH0gKTtcclxuXHJcbiAgICAvL3RvdWNoIGFyZWFzXHJcbiAgICBteXN0ZXJ5Rmx1aWRSYWRpby50b3VjaEFyZWEgPSBteXN0ZXJ5Rmx1aWRSYWRpby5ib3VuZHMuZGlsYXRlZFkoIFJBRElPX0JVVFRPTl9UT1VDSF9ESUxBVElPTl9ZICk7XHJcbiAgICBteXN0ZXJ5UGxhbmV0UmFkaW8udG91Y2hBcmVhID0gbXlzdGVyeVBsYW5ldFJhZGlvLmJvdW5kcy5kaWxhdGVkWSggUkFESU9fQlVUVE9OX1RPVUNIX0RJTEFUSU9OX1kgKTtcclxuXHJcbiAgICBjb25zdCBjb250ZW50ID0gbmV3IFZCb3goIHtcclxuICAgICAgY2hpbGRyZW46IFsgbXlzdGVyeUZsdWlkUmFkaW8sIG15c3RlcnlQbGFuZXRSYWRpbyBdLFxyXG4gICAgICBzcGFjaW5nOiA1LFxyXG4gICAgICBhbGlnbjogJ2xlZnQnLFxyXG4gICAgICByZXNpemU6IGZhbHNlXHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgY2hvaWNlUGFuZWwgPSBuZXcgUGFuZWwoIGNvbnRlbnQsIHtcclxuICAgICAgeE1hcmdpbjogNyxcclxuICAgICAgeU1hcmdpbjogNixcclxuICAgICAgc3Ryb2tlOiAnZ3JheScsXHJcbiAgICAgIGxpbmVXaWR0aDogMSxcclxuICAgICAgZmlsbDogJyNmMmZhNmEnLFxyXG4gICAgICByZXNpemU6IGZhbHNlLFxyXG4gICAgICBhbGlnbjogJ2xlZnQnLFxyXG4gICAgICBjb3JuZXJSYWRpdXM6IDcsXHJcbiAgICAgIG1pbldpZHRoOiB3aWR0aCxcclxuICAgICAgbWF4V2lkdGg6IHdpZHRoXHJcbiAgICB9ICk7XHJcbiAgICBjaG9pY2VQYW5lbC50b3AgPSBib3R0b20gKyA1O1xyXG4gICAgY2hvaWNlUGFuZWwubGVmdCA9IGxlZnQ7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBjaG9pY2VQYW5lbCApO1xyXG5cclxuICAgIC8vIGl0ZW1zXHJcbiAgICB0aGlzLmZsdWlkRGVuc2l0eUNvbWJvQm94ID0gbmV3IENvbWJvQm94KCBteXN0ZXJ5UG9vbE1vZGVsLmN1c3RvbUZsdWlkRGVuc2l0eVByb3BlcnR5LCBbXHJcbiAgICAgIHsgdmFsdWU6IDAsIGNyZWF0ZU5vZGU6ICgpID0+IG5ldyBUZXh0KCBmbHVpZEFTdHJpbmcsIGNvbWJvQm94VGV4dE9wdGlvbnMgKSB9LFxyXG4gICAgICB7IHZhbHVlOiAxLCBjcmVhdGVOb2RlOiAoKSA9PiBuZXcgVGV4dCggZmx1aWRCU3RyaW5nLCBjb21ib0JveFRleHRPcHRpb25zICkgfSxcclxuICAgICAgeyB2YWx1ZTogMiwgY3JlYXRlTm9kZTogKCkgPT4gbmV3IFRleHQoIGZsdWlkQ1N0cmluZywgY29tYm9Cb3hUZXh0T3B0aW9ucyApIH1cclxuICAgIF0sIHRoaXMsIHtcclxuICAgICAgaGlnaGxpZ2h0RmlsbDogJ3JnYigyMTgsMjU1LDI1NSknLFxyXG4gICAgICB2aXNpYmxlOiBmYWxzZVxyXG4gICAgfSApO1xyXG5cclxuICAgIHRoaXMuZmx1aWREZW5zaXR5Q29tYm9Cb3gudG91Y2hBcmVhID0gdGhpcy5mbHVpZERlbnNpdHlDb21ib0JveC5sb2NhbEJvdW5kcy5kaWxhdGVkWFkoIDAsIDAgKTtcclxuICAgIHRoaXMuZmx1aWREZW5zaXR5Q29tYm9Cb3gudG9wID0gZmx1aWREZW5zaXR5VG9wO1xyXG4gICAgdGhpcy5mbHVpZERlbnNpdHlDb21ib0JveC5yaWdodCA9IGZsdWlkRGVuc2l0eUxlZnQgLSAxMDtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMuZmx1aWREZW5zaXR5Q29tYm9Cb3ggKTtcclxuXHJcbiAgICB0aGlzLmdyYXZpdHlDb21ib0JveCA9IG5ldyBDb21ib0JveCggbXlzdGVyeVBvb2xNb2RlbC5jdXN0b21HcmF2aXR5UHJvcGVydHksIFtcclxuICAgICAgeyB2YWx1ZTogMCwgY3JlYXRlTm9kZTogKCkgPT4gbmV3IFRleHQoIHBsYW5ldEFTdHJpbmcsIGNvbWJvQm94VGV4dE9wdGlvbnMgKSB9LFxyXG4gICAgICB7IHZhbHVlOiAxLCBjcmVhdGVOb2RlOiAoKSA9PiBuZXcgVGV4dCggcGxhbmV0QlN0cmluZywgY29tYm9Cb3hUZXh0T3B0aW9ucyApIH0sXHJcbiAgICAgIHsgdmFsdWU6IDIsIGNyZWF0ZU5vZGU6ICgpID0+IG5ldyBUZXh0KCBwbGFuZXRDU3RyaW5nLCBjb21ib0JveFRleHRPcHRpb25zICkgfVxyXG4gICAgXSwgdGhpcywge1xyXG4gICAgICBjb3JuZXJSYWRpdXM6IDgsXHJcbiAgICAgIGhpZ2hsaWdodEZpbGw6ICdyZ2IoMjE4LDI1NSwyNTUpJyxcclxuICAgICAgdmlzaWJsZTogZmFsc2VcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLmdyYXZpdHlDb21ib0JveC50b3VjaEFyZWEgPSB0aGlzLmdyYXZpdHlDb21ib0JveC5sb2NhbEJvdW5kcy5kaWxhdGVkWFkoIDAsIDAgKTtcclxuICAgIHRoaXMuZ3Jhdml0eUNvbWJvQm94LnJpZ2h0ID0gdGhpcy5mbHVpZERlbnNpdHlDb21ib0JveC5yaWdodDtcclxuICAgIHRoaXMuZ3Jhdml0eUNvbWJvQm94LnRvcCA9IHRoaXMuZmx1aWREZW5zaXR5Q29tYm9Cb3gudG9wO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggdGhpcy5ncmF2aXR5Q29tYm9Cb3ggKTtcclxuXHJcbiAgICAvL1RPRE8gcmVwbGFjZSAyIERlcml2ZWRQcm9wZXJ0aWVzIHdpdGggMSBteXN0ZXJ5Q2hvaWNlUHJvcGVydHkgbGlzdGVuZXJcclxuICAgIG5ldyBEZXJpdmVkUHJvcGVydHkoIFsgbXlzdGVyeVBvb2xNb2RlbC51bmRlclByZXNzdXJlTW9kZWwubXlzdGVyeUNob2ljZVByb3BlcnR5IF0sXHJcbiAgICAgIG15c3RlcnlDaG9pY2UgPT4ge1xyXG4gICAgICAgIHJldHVybiBteXN0ZXJ5Q2hvaWNlID09PSAnZmx1aWREZW5zaXR5JztcclxuICAgICAgfSApLmxpbmtBdHRyaWJ1dGUoIHRoaXMuZmx1aWREZW5zaXR5Q29tYm9Cb3gsICd2aXNpYmxlJyApO1xyXG4gICAgbmV3IERlcml2ZWRQcm9wZXJ0eSggWyBteXN0ZXJ5UG9vbE1vZGVsLnVuZGVyUHJlc3N1cmVNb2RlbC5teXN0ZXJ5Q2hvaWNlUHJvcGVydHkgXSxcclxuICAgICAgbXlzdGVyeUNob2ljZSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIG15c3RlcnlDaG9pY2UgPT09ICdncmF2aXR5JztcclxuICAgICAgfSApLmxpbmtBdHRyaWJ1dGUoIHRoaXMuZ3Jhdml0eUNvbWJvQm94LCAndmlzaWJsZScgKTtcclxuICB9XHJcbn1cclxuXHJcbmZsdWlkUHJlc3N1cmVBbmRGbG93LnJlZ2lzdGVyKCAnTXlzdGVyeVBvb2xWaWV3JywgTXlzdGVyeVBvb2xWaWV3ICk7XHJcbmV4cG9ydCBkZWZhdWx0IE15c3RlcnlQb29sVmlldzsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsZUFBZSxNQUFNLHdDQUF3QztBQUNwRSxPQUFPQyxRQUFRLE1BQU0seUNBQXlDO0FBQzlELFNBQVNDLElBQUksRUFBRUMsSUFBSSxRQUFRLG1DQUFtQztBQUM5RCxPQUFPQyxlQUFlLE1BQU0sdUNBQXVDO0FBQ25FLE9BQU9DLFFBQVEsTUFBTSxnQ0FBZ0M7QUFDckQsT0FBT0MsS0FBSyxNQUFN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