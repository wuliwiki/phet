// Copyright 2013-2020, University of Colorado Boulder

/**
 * Top model for all screens - all common properties and methods are placed here.
 *
 * @author Vasily Shakhov (Mlearner)
 * @author Siddhartha Chinthapally (Actual Concepts)
 */

import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import Property from '../../../../axon/js/Property.js';
import Range from '../../../../dot/js/Range.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import Vector2Property from '../../../../dot/js/Vector2Property.js';
import Constants from '../../common/Constants.js';
import FluidColorModel from '../../common/model/FluidColorModel.js';
import getStandardAirPressure from '../../common/model/getStandardAirPressure.js';
import Sensor from '../../common/model/Sensor.js';
import Units from '../../common/model/Units.js';
import fluidPressureAndFlow from '../../fluidPressureAndFlow.js';
import ChamberPoolModel from './ChamberPoolModel.js';
import MysteryPoolModel from './MysteryPoolModel.js';
import SquarePoolModel from './SquarePoolModel.js';
import TrapezoidPoolModel from './TrapezoidPoolModel.js';

// constants
const NUM_BAROMETERS = 4;
class UnderPressureModel {
  constructor() {
    this.gravityRange = new Range(Constants.MARS_GRAVITY, Constants.JUPITER_GRAVITY); // @public
    this.fluidDensityRange = new Range(Constants.GASOLINE_DENSITY, Constants.HONEY_DENSITY); // @public

    // @public
    this.isAtmosphereProperty = new Property(true);
    this.isRulerVisibleProperty = new Property(false);
    this.isGridVisibleProperty = new Property(false); // TODO: is this used?
    this.measureUnitsProperty = new Property('metric'); //metric, english or atmosphere
    this.gravityProperty = new Property(Constants.EARTH_GRAVITY);
    this.fluidDensityProperty = new Property(Constants.WATER_DENSITY);
    this.currentSceneProperty = new Property('square'); // name of the current screen. Can take values square/trapezoid/chamber/mystery.

    // currentVolume is just a "simulated" derived property that depends on currentScene and the volume in the current scene.
    // This property is passed to barometer so that it can react to changes in the volume.
    // This way Barometer doesn't need to know about the different scenes and can depend only on
    // UnderPressureModel's properties.
    this.currentVolumeProperty = new Property(0); //L, volume of liquid in currentScene
    this.rulerPositionProperty = new Vector2Property(new Vector2(300, 100)); // ruler initial position above the ground and center of square pool // TODO: is this used?
    this.mysteryChoiceProperty = new Property('fluidDensity'); //for mystery-pool, gravity of fluidDensity
    this.fluidDensityControlExpandedProperty = new Property(true); //For the accordion box
    this.gravityControlExpandedProperty = new Property(true); //For the accordion box

    this.sceneModels = {}; // @public
    this.sceneModels.square = new SquarePoolModel(this);
    this.sceneModels.trapezoid = new TrapezoidPoolModel(this);
    this.sceneModels.chamber = new ChamberPoolModel(this);
    this.sceneModels.mystery = new MysteryPoolModel(this);
    this.fluidColorModel = new FluidColorModel(this.fluidDensityProperty, this.fluidDensityRange); // @public

    this.barometers = []; // @public

    for (let i = 0; i < NUM_BAROMETERS; i++) {
      // initial position of barometer on screen adjacent to control panel above ground
      this.barometers.push(new Sensor(new Vector2(7.75, 2.5), 0));
    }

    // current scene's model
    this.currentSceneModelProperty = new DerivedProperty([this.currentSceneProperty], currentScene => {
      return this.sceneModels[currentScene];
    });
    this.currentSceneModelProperty.link(currentSceneModel => {
      this.currentVolumeProperty.value = currentSceneModel.volumeProperty.value;
    });
  }

  /**
   * @public
   * @param {number} dt seconds
   */
  step(dt) {
    this.fluidColorModel.step();
    this.currentSceneModelProperty.value.step(dt);
  }

  // @public
  reset() {
    this.isAtmosphereProperty.reset();
    this.isRulerVisibleProperty.reset();
    this.isGridVisibleProperty.reset();
    this.measureUnitsProperty.reset();
    this.gravityProperty.reset();
    this.fluidDensityProperty.reset();
    this.currentSceneProperty.reset();
    this.currentVolumeProperty.reset();
    this.rulerPositionProperty.reset();
    this.mysteryChoiceProperty.reset();
    this.fluidDensityControlExpandedProperty.reset();
    this.gravityControlExpandedProperty.reset();
    this.sceneModels.square.reset();
    this.sceneModels.trapezoid.reset();
    this.sceneModels.chamber.reset();
    this.sceneModels.mystery.reset();
    this.barometers.forEach(barometer => {
      barometer.reset();
    });
  }

  /**
   * @public
   * Returns the air pressure (in Pa) at the given height.
   * @param {number} height in meters
   * @returns {number}
   */
  getAirPressure(height) {
    if (!this.isAtmosphereProperty.value) {
      return 0;
    } else {
      return getStandardAirPressure(height) * this.gravityProperty.value / Constants.EARTH_GRAVITY;
    }
  }

  /**
   * @public
   * Returns the pressure (in Pa) exerted by a fluid column of given height.
   * @param {number} height - of the fluid column
   * @returns {number}
   */
  getWaterPressure(height) {
    return height * this.gravityProperty.value * this.fluidDensityProperty.value;
  }

  /**
   * @public
   * Returns the pressure (in Pa) at the given position.
   * @param {number} x - position in meters
   * @param {number} y - position in meters
   * @returns {number}
   */
  getPressureAtCoords(x, y) {
    let pressure = null;
    const currentModel = this.currentSceneModelProperty.value;
    if (y > 0) {
      pressure = this.getAirPressure(y);
    } else if (currentModel.isPointInsidePool(x, y)) {
      // get the water height over barometer
      const waterHeight = currentModel.getWaterHeightAboveY(x, y);
      if (waterHeight <= 0) {
        pressure = this.getAirPressure(y);
      } else {
        pressure = this.getAirPressure(waterHeight + y) + this.getWaterPressure(waterHeight);
      }
    }
    return pressure;
  }

  /**
   * @public
   * @param {number} pressure in Pa
   * @param {string} units -- can be english/metric/atmospheres
   * @returns {string}
   */
  getPressureString(pressure, units) {
    return Units.getPressureString(pressure, units, false);
  }

  // @public
  getGravityString() {
    return Units.getGravityString(this.gravityProperty.value, this.measureUnitsProperty.value);
  }

  // @public
  getFluidDensityString() {
    return Units.getFluidDensityString(this.fluidDensityProperty.value, this.measureUnitsProperty.value);
  }
}
fluidPressureAndFlow.register('UnderPressureModel', UnderPressureModel);
export default UnderPressureModel;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJQcm9wZXJ0eSIsIlJhbmdlIiwiVmVjdG9yMiIsIlZlY3RvcjJQcm9wZXJ0eSIsIkNvbnN0YW50cyIsIkZsdWlkQ29sb3JNb2RlbCIsImdldFN0YW5kYXJkQWlyUHJlc3N1cmUiLCJTZW5zb3IiLCJVbml0cyIsImZsdWlkUHJlc3N1cmVBbmRGbG93IiwiQ2hhbWJlclBvb2xNb2RlbCIsIk15c3RlcnlQb29sTW9kZWwiLCJTcXVhcmVQb29sTW9kZWwiLCJUcmFwZXpvaWRQb29sTW9kZWwiLCJOVU1fQkFST01FVEVSUyIsIlVuZGVyUHJlc3N1cmVNb2RlbCIsImNvbnN0cnVjdG9yIiwiZ3Jhdml0eVJhbmdlIiwiTUFSU19HUkFWSVRZIiwiSlVQSVRFUl9HUkFWSVRZIiwiZmx1aWREZW5zaXR5UmFuZ2UiLCJHQVNPTElORV9ERU5TSVRZIiwiSE9ORVlfREVOU0lUWSIsImlzQXRtb3NwaGVyZVByb3BlcnR5IiwiaXNSdWxlclZpc2libGVQcm9wZXJ0eSIsImlzR3JpZFZpc2libGVQcm9wZXJ0eSIsIm1lYXN1cmVVbml0c1Byb3BlcnR5IiwiZ3Jhdml0eVByb3BlcnR5IiwiRUFSVEhfR1JBVklUWSIsImZsdWlkRGVuc2l0eVByb3BlcnR5IiwiV0FURVJfREVOU0lUWSIsImN1cnJlbnRTY2VuZVByb3BlcnR5IiwiY3VycmVudFZvbHVtZVByb3BlcnR5IiwicnVsZXJQb3NpdGlvblByb3BlcnR5IiwibXlzdGVyeUNob2ljZVByb3BlcnR5IiwiZmx1aWREZW5zaXR5Q29udHJvbEV4cGFuZGVkUHJvcGVydHkiLCJncmF2aXR5Q29udHJvbEV4cGFuZGVkUHJvcGVydHkiLCJzY2VuZU1vZGVscyIsInNxdWFyZSIsInRyYXBlem9pZCIsImNoYW1iZXIiLCJteXN0ZXJ5IiwiZmx1aWRDb2xvck1vZGVsIiwiYmFyb21ldGVycyIsImkiLCJwdXNoIiwiY3VycmVudFNjZW5lTW9kZWxQcm9wZXJ0eSIsImN1cnJlbnRTY2VuZSIsImxpbmsiLCJjdXJyZW50U2NlbmVNb2RlbCIsInZhbHVlIiwidm9sdW1lUHJvcGVydHkiLCJzdGVwIiwiZHQiLCJyZXNldCIsImZvckVhY2giLCJiYXJvbWV0ZXIiLCJnZXRBaXJQcmVzc3VyZSIsImhlaWdodCIsImdldFdhdGVyUHJlc3N1cmUiLCJnZXRQcmVzc3VyZUF0Q29vcmRzIiwieCIsInkiLCJwcmVzc3VyZSIsImN1cnJlbnRNb2RlbCIsImlzUG9pbnRJbnNpZGVQb29sIiwid2F0ZXJIZWlnaHQiLCJnZXRXYXRlckhlaWdodEFib3ZlWSIsImdldFByZXNzdXJlU3RyaW5nIiwidW5pdHMiLCJnZXRHcmF2aXR5U3RyaW5nIiwiZ2V0Rmx1aWREZW5zaXR5U3RyaW5nIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJVbmRlclByZXNzdXJlTW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTMtMjAyMCwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogVG9wIG1vZGVsIGZvciBhbGwgc2NyZWVucyAtIGFsbCBjb21tb24gcHJvcGVydGllcyBhbmQgbWV0aG9kcyBhcmUgcGxhY2VkIGhlcmUuXHJcbiAqXHJcbiAqIEBhdXRob3IgVmFzaWx5IFNoYWtob3YgKE1sZWFybmVyKVxyXG4gKiBAYXV0aG9yIFNpZGRoYXJ0aGEgQ2hpbnRoYXBhbGx5IChBY3R1YWwgQ29uY2VwdHMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IERlcml2ZWRQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL0Rlcml2ZWRQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1Byb3BlcnR5LmpzJztcclxuaW1wb3J0IFJhbmdlIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9SYW5nZS5qcyc7XHJcbmltcG9ydCBWZWN0b3IyIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9WZWN0b3IyLmpzJztcclxuaW1wb3J0IFZlY3RvcjJQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVmVjdG9yMlByb3BlcnR5LmpzJztcclxuaW1wb3J0IENvbnN0YW50cyBmcm9tICcuLi8uLi9jb21tb24vQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IEZsdWlkQ29sb3JNb2RlbCBmcm9tICcuLi8uLi9jb21tb24vbW9kZWwvRmx1aWRDb2xvck1vZGVsLmpzJztcclxuaW1wb3J0IGdldFN0YW5kYXJkQWlyUHJlc3N1cmUgZnJvbSAnLi4vLi4vY29tbW9uL21vZGVsL2dldFN0YW5kYXJkQWlyUHJlc3N1cmUuanMnO1xyXG5pbXBvcnQgU2Vuc29yIGZyb20gJy4uLy4uL2NvbW1vbi9tb2RlbC9TZW5zb3IuanMnO1xyXG5pbXBvcnQgVW5pdHMgZnJvbSAnLi4vLi4vY29tbW9uL21vZGVsL1VuaXRzLmpzJztcclxuaW1wb3J0IGZsdWlkUHJlc3N1cmVBbmRGbG93IGZyb20gJy4uLy4uL2ZsdWlkUHJlc3N1cmVBbmRGbG93LmpzJztcclxuaW1wb3J0IENoYW1iZXJQb29sTW9kZWwgZnJvbSAnLi9DaGFtYmVyUG9vbE1vZGVsLmpzJztcclxuaW1wb3J0IE15c3RlcnlQb29sTW9kZWwgZnJvbSAnLi9NeXN0ZXJ5UG9vbE1vZGVsLmpzJztcclxuaW1wb3J0IFNxdWFyZVBvb2xNb2RlbCBmcm9tICcuL1NxdWFyZVBvb2xNb2RlbC5qcyc7XHJcbmltcG9ydCBUcmFwZXpvaWRQb29sTW9kZWwgZnJvbSAnLi9UcmFwZXpvaWRQb29sTW9kZWwuanMnO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IE5VTV9CQVJPTUVURVJTID0gNDtcclxuXHJcbmNsYXNzIFVuZGVyUHJlc3N1cmVNb2RlbCB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG5cclxuICAgIHRoaXMuZ3Jhdml0eVJhbmdlID0gbmV3IFJhbmdlKCBDb25zdGFudHMuTUFSU19HUkFWSVRZLCBDb25zdGFudHMuSlVQSVRFUl9HUkFWSVRZICk7IC8vIEBwdWJsaWNcclxuICAgIHRoaXMuZmx1aWREZW5zaXR5UmFuZ2UgPSBuZXcgUmFuZ2UoIENvbnN0YW50cy5HQVNPTElORV9ERU5TSVRZLCBDb25zdGFudHMuSE9ORVlfREVOU0lUWSApOyAvLyBAcHVibGljXHJcblxyXG4gICAgLy8gQHB1YmxpY1xyXG4gICAgdGhpcy5pc0F0bW9zcGhlcmVQcm9wZXJ0eSA9IG5ldyBQcm9wZXJ0eSggdHJ1ZSApO1xyXG4gICAgdGhpcy5pc1J1bGVyVmlzaWJsZVByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCBmYWxzZSApO1xyXG4gICAgdGhpcy5pc0dyaWRWaXNpYmxlUHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIGZhbHNlICk7IC8vIFRPRE86IGlzIHRoaXMgdXNlZD9cclxuICAgIHRoaXMubWVhc3VyZVVuaXRzUHJvcGVydHkgPSBuZXcgUHJvcGVydHkoICdtZXRyaWMnICk7IC8vbWV0cmljLCBlbmdsaXNoIG9yIGF0bW9zcGhlcmVcclxuICAgIHRoaXMuZ3Jhdml0eVByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCBDb25zdGFudHMuRUFSVEhfR1JBVklUWSApO1xyXG4gICAgdGhpcy5mbHVpZERlbnNpdHlQcm9wZXJ0eSA9IG5ldyBQcm9wZXJ0eSggQ29uc3RhbnRzLldBVEVSX0RFTlNJVFkgKTtcclxuICAgIHRoaXMuY3VycmVudFNjZW5lUHJvcGVydHkgPSBuZXcgUHJvcGVydHkoICdzcXVhcmUnICk7IC8vIG5hbWUgb2YgdGhlIGN1cnJlbnQgc2NyZWVuLiBDYW4gdGFrZSB2YWx1ZXMgc3F1YXJlL3RyYXBlem9pZC9jaGFtYmVyL215c3RlcnkuXHJcblxyXG4gICAgLy8gY3VycmVudFZvbHVtZSBpcyBqdXN0IGEgXCJzaW11bGF0ZWRcIiBkZXJpdmVkIHByb3BlcnR5IHRoYXQgZGVwZW5kcyBvbiBjdXJyZW50U2NlbmUgYW5kIHRoZSB2b2x1bWUgaW4gdGhlIGN1cnJlbnQgc2NlbmUuXHJcbiAgICAvLyBUaGlzIHByb3BlcnR5IGlzIHBhc3NlZCB0byBiYXJvbWV0ZXIgc28gdGhhdCBpdCBjYW4gcmVhY3QgdG8gY2hhbmdlcyBpbiB0aGUgdm9sdW1lLlxyXG4gICAgLy8gVGhpcyB3YXkgQmFyb21ldGVyIGRvZXNuJ3QgbmVlZCB0byBrbm93IGFib3V0IHRoZSBkaWZmZXJlbnQgc2NlbmVzIGFuZCBjYW4gZGVwZW5kIG9ubHkgb25cclxuICAgIC8vIFVuZGVyUHJlc3N1cmVNb2RlbCdzIHByb3BlcnRpZXMuXHJcbiAgICB0aGlzLmN1cnJlbnRWb2x1bWVQcm9wZXJ0eSA9IG5ldyBQcm9wZXJ0eSggMCApOyAvL0wsIHZvbHVtZSBvZiBsaXF1aWQgaW4gY3VycmVudFNjZW5lXHJcbiAgICB0aGlzLnJ1bGVyUG9zaXRpb25Qcm9wZXJ0eSA9IG5ldyBWZWN0b3IyUHJvcGVydHkoIG5ldyBWZWN0b3IyKCAzMDAsIDEwMCApICk7IC8vIHJ1bGVyIGluaXRpYWwgcG9zaXRpb24gYWJvdmUgdGhlIGdyb3VuZCBhbmQgY2VudGVyIG9mIHNxdWFyZSBwb29sIC8vIFRPRE86IGlzIHRoaXMgdXNlZD9cclxuICAgIHRoaXMubXlzdGVyeUNob2ljZVByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCAnZmx1aWREZW5zaXR5JyApOyAvL2ZvciBteXN0ZXJ5LXBvb2wsIGdyYXZpdHkgb2YgZmx1aWREZW5zaXR5XHJcbiAgICB0aGlzLmZsdWlkRGVuc2l0eUNvbnRyb2xFeHBhbmRlZFByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCB0cnVlICk7Ly9Gb3IgdGhlIGFjY29yZGlvbiBib3hcclxuICAgIHRoaXMuZ3Jhdml0eUNvbnRyb2xFeHBhbmRlZFByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCB0cnVlICk7Ly9Gb3IgdGhlIGFjY29yZGlvbiBib3hcclxuXHJcbiAgICB0aGlzLnNjZW5lTW9kZWxzID0ge307IC8vIEBwdWJsaWNcclxuICAgIHRoaXMuc2NlbmVNb2RlbHMuc3F1YXJlID0gbmV3IFNxdWFyZVBvb2xNb2RlbCggdGhpcyApO1xyXG4gICAgdGhpcy5zY2VuZU1vZGVscy50cmFwZXpvaWQgPSBuZXcgVHJhcGV6b2lkUG9vbE1vZGVsKCB0aGlzICk7XHJcbiAgICB0aGlzLnNjZW5lTW9kZWxzLmNoYW1iZXIgPSBuZXcgQ2hhbWJlclBvb2xNb2RlbCggdGhpcyApO1xyXG4gICAgdGhpcy5zY2VuZU1vZGVscy5teXN0ZXJ5ID0gbmV3IE15c3RlcnlQb29sTW9kZWwoIHRoaXMgKTtcclxuXHJcbiAgICB0aGlzLmZsdWlkQ29sb3JNb2RlbCA9IG5ldyBGbHVpZENvbG9yTW9kZWwoIHRoaXMuZmx1aWREZW5zaXR5UHJvcGVydHksIHRoaXMuZmx1aWREZW5zaXR5UmFuZ2UgKTsgLy8gQHB1YmxpY1xyXG5cclxuICAgIHRoaXMuYmFyb21ldGVycyA9IFtdOyAvLyBAcHVibGljXHJcblxyXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgTlVNX0JBUk9NRVRFUlM7IGkrKyApIHtcclxuICAgICAgLy8gaW5pdGlhbCBwb3NpdGlvbiBvZiBiYXJvbWV0ZXIgb24gc2NyZWVuIGFkamFjZW50IHRvIGNvbnRyb2wgcGFuZWwgYWJvdmUgZ3JvdW5kXHJcbiAgICAgIHRoaXMuYmFyb21ldGVycy5wdXNoKCBuZXcgU2Vuc29yKCBuZXcgVmVjdG9yMiggNy43NSwgMi41ICksIDAgKSApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGN1cnJlbnQgc2NlbmUncyBtb2RlbFxyXG4gICAgdGhpcy5jdXJyZW50U2NlbmVNb2RlbFByb3BlcnR5ID0gbmV3IERlcml2ZWRQcm9wZXJ0eSggWyB0aGlzLmN1cnJlbnRTY2VuZVByb3BlcnR5IF0sIGN1cnJlbnRTY2VuZSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLnNjZW5lTW9kZWxzWyBjdXJyZW50U2NlbmUgXTtcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLmN1cnJlbnRTY2VuZU1vZGVsUHJvcGVydHkubGluayggY3VycmVudFNjZW5lTW9kZWwgPT4ge1xyXG4gICAgICB0aGlzLmN1cnJlbnRWb2x1bWVQcm9wZXJ0eS52YWx1ZSA9IGN1cnJlbnRTY2VuZU1vZGVsLnZvbHVtZVByb3BlcnR5LnZhbHVlO1xyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHB1YmxpY1xyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkdCBzZWNvbmRzXHJcbiAgICovXHJcbiAgc3RlcCggZHQgKSB7XHJcbiAgICB0aGlzLmZsdWlkQ29sb3JNb2RlbC5zdGVwKCk7XHJcbiAgICB0aGlzLmN1cnJlbnRTY2VuZU1vZGVsUHJvcGVydHkudmFsdWUuc3RlcCggZHQgKTtcclxuICB9XHJcblxyXG4gIC8vIEBwdWJsaWNcclxuICByZXNldCgpIHtcclxuICAgIHRoaXMuaXNBdG1vc3BoZXJlUHJvcGVydHkucmVzZXQoKTtcclxuICAgIHRoaXMuaXNSdWxlclZpc2libGVQcm9wZXJ0eS5yZXNldCgpO1xyXG4gICAgdGhpcy5pc0dyaWRWaXNpYmxlUHJvcGVydHkucmVzZXQoKTtcclxuICAgIHRoaXMubWVhc3VyZVVuaXRzUHJvcGVydHkucmVzZXQoKTtcclxuICAgIHRoaXMuZ3Jhdml0eVByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICB0aGlzLmZsdWlkRGVuc2l0eVByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICB0aGlzLmN1cnJlbnRTY2VuZVByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICB0aGlzLmN1cnJlbnRWb2x1bWVQcm9wZXJ0eS5yZXNldCgpO1xyXG4gICAgdGhpcy5ydWxlclBvc2l0aW9uUHJvcGVydHkucmVzZXQoKTtcclxuICAgIHRoaXMubXlzdGVyeUNob2ljZVByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICB0aGlzLmZsdWlkRGVuc2l0eUNvbnRyb2xFeHBhbmRlZFByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICB0aGlzLmdyYXZpdHlDb250cm9sRXhwYW5kZWRQcm9wZXJ0eS5yZXNldCgpO1xyXG5cclxuICAgIHRoaXMuc2NlbmVNb2RlbHMuc3F1YXJlLnJlc2V0KCk7XHJcbiAgICB0aGlzLnNjZW5lTW9kZWxzLnRyYXBlem9pZC5yZXNldCgpO1xyXG4gICAgdGhpcy5zY2VuZU1vZGVscy5jaGFtYmVyLnJlc2V0KCk7XHJcbiAgICB0aGlzLnNjZW5lTW9kZWxzLm15c3RlcnkucmVzZXQoKTtcclxuXHJcbiAgICB0aGlzLmJhcm9tZXRlcnMuZm9yRWFjaCggYmFyb21ldGVyID0+IHtcclxuICAgICAgYmFyb21ldGVyLnJlc2V0KCk7XHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcHVibGljXHJcbiAgICogUmV0dXJucyB0aGUgYWlyIHByZXNzdXJlIChpbiBQYSkgYXQgdGhlIGdpdmVuIGhlaWdodC5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IGluIG1ldGVyc1xyXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAgICovXHJcbiAgZ2V0QWlyUHJlc3N1cmUoIGhlaWdodCApIHtcclxuICAgIGlmICggIXRoaXMuaXNBdG1vc3BoZXJlUHJvcGVydHkudmFsdWUgKSB7XHJcbiAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHJldHVybiBnZXRTdGFuZGFyZEFpclByZXNzdXJlKCBoZWlnaHQgKSAqIHRoaXMuZ3Jhdml0eVByb3BlcnR5LnZhbHVlIC8gQ29uc3RhbnRzLkVBUlRIX0dSQVZJVFk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcHVibGljXHJcbiAgICogUmV0dXJucyB0aGUgcHJlc3N1cmUgKGluIFBhKSBleGVydGVkIGJ5IGEgZmx1aWQgY29sdW1uIG9mIGdpdmVuIGhlaWdodC5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IC0gb2YgdGhlIGZsdWlkIGNvbHVtblxyXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAgICovXHJcbiAgZ2V0V2F0ZXJQcmVzc3VyZSggaGVpZ2h0ICkge1xyXG4gICAgcmV0dXJuIGhlaWdodCAqIHRoaXMuZ3Jhdml0eVByb3BlcnR5LnZhbHVlICogdGhpcy5mbHVpZERlbnNpdHlQcm9wZXJ0eS52YWx1ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwdWJsaWNcclxuICAgKiBSZXR1cm5zIHRoZSBwcmVzc3VyZSAoaW4gUGEpIGF0IHRoZSBnaXZlbiBwb3NpdGlvbi5cclxuICAgKiBAcGFyYW0ge251bWJlcn0geCAtIHBvc2l0aW9uIGluIG1ldGVyc1xyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IC0gcG9zaXRpb24gaW4gbWV0ZXJzXHJcbiAgICogQHJldHVybnMge251bWJlcn1cclxuICAgKi9cclxuICBnZXRQcmVzc3VyZUF0Q29vcmRzKCB4LCB5ICkge1xyXG4gICAgbGV0IHByZXNzdXJlID0gbnVsbDtcclxuICAgIGNvbnN0IGN1cnJlbnRNb2RlbCA9IHRoaXMuY3VycmVudFNjZW5lTW9kZWxQcm9wZXJ0eS52YWx1ZTtcclxuICAgIGlmICggeSA+IDAgKSB7XHJcbiAgICAgIHByZXNzdXJlID0gdGhpcy5nZXRBaXJQcmVzc3VyZSggeSApO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoIGN1cnJlbnRNb2RlbC5pc1BvaW50SW5zaWRlUG9vbCggeCwgeSApICkge1xyXG5cclxuICAgICAgLy8gZ2V0IHRoZSB3YXRlciBoZWlnaHQgb3ZlciBiYXJvbWV0ZXJcclxuICAgICAgY29uc3Qgd2F0ZXJIZWlnaHQgPSBjdXJyZW50TW9kZWwuZ2V0V2F0ZXJIZWlnaHRBYm92ZVkoIHgsIHkgKTtcclxuICAgICAgaWYgKCB3YXRlckhlaWdodCA8PSAwICkge1xyXG4gICAgICAgIHByZXNzdXJlID0gdGhpcy5nZXRBaXJQcmVzc3VyZSggeSApO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHByZXNzdXJlID0gdGhpcy5nZXRBaXJQcmVzc3VyZSggd2F0ZXJIZWlnaHQgKyB5ICkgKyB0aGlzLmdldFdhdGVyUHJlc3N1cmUoIHdhdGVySGVpZ2h0ICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgICByZXR1cm4gcHJlc3N1cmU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcHVibGljXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHByZXNzdXJlIGluIFBhXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVuaXRzIC0tIGNhbiBiZSBlbmdsaXNoL21ldHJpYy9hdG1vc3BoZXJlc1xyXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAgICovXHJcbiAgZ2V0UHJlc3N1cmVTdHJpbmcoIHByZXNzdXJlLCB1bml0cyApIHtcclxuICAgIHJldHVybiBVbml0cy5nZXRQcmVzc3VyZVN0cmluZyggcHJlc3N1cmUsIHVuaXRzLCBmYWxzZSApO1xyXG4gIH1cclxuXHJcbiAgLy8gQHB1YmxpY1xyXG4gIGdldEdyYXZpdHlTdHJpbmcoKSB7XHJcbiAgICByZXR1cm4gVW5pdHMuZ2V0R3Jhdml0eVN0cmluZyggdGhpcy5ncmF2aXR5UHJvcGVydHkudmFsdWUsIHRoaXMubWVhc3VyZVVuaXRzUHJvcGVydHkudmFsdWUgKTtcclxuICB9XHJcblxyXG4gIC8vIEBwdWJsaWNcclxuICBnZXRGbHVpZERlbnNpdHlTdHJpbmcoKSB7XHJcbiAgICByZXR1cm4gVW5pdHMuZ2V0Rmx1aWREZW5zaXR5U3RyaW5nKCB0aGlzLmZsdWlkRGVuc2l0eVByb3BlcnR5LnZhbHVlLCB0aGlzLm1lYXN1cmVVbml0c1Byb3BlcnR5LnZhbHVlICk7XHJcbiAgfVxyXG59XHJcblxyXG5mbHVpZFByZXNzdXJlQW5kRmxvdy5yZWdpc3RlciggJ1VuZGVyUHJlc3N1cmVNb2RlbCcsIFVuZGVyUHJlc3N1cmVNb2RlbCApO1xyXG5leHBvcnQgZGVmYXVsdCBVbmRlclByZXNzdXJlTW9kZWw7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsZUFBZSxNQUFNLHdDQUF3QztBQUNwRSxPQUFPQyxRQUFRLE1BQU0saUNBQWlDO0FBQ3RELE9BQU9DLEtBQUssTUFBTSw2QkFBNkI7QUFDL0MsT0FBT0MsT0FBTyxNQUFNLCtCQUErQjtBQUNuRCxPQUFPQyxlQUFlLE1BQU0sdUNBQXVDO0FBQ25FLE9BQU9DLFNBQVMsTUFBTSwyQkFB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