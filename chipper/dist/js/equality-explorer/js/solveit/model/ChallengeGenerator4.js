// Copyright 2018-2022, University of Colorado Boulder

/**
 * Challenge generator for game level 4.
 * See specification in https://docs.google.com/document/d/1vG5U9HhcqVGMvmGGXry28PLqlNWj25lStDP2vSWgUOo/edit.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import dotRandom from '../../../../dot/js/dotRandom.js';
import Fraction from '../../../../phetcommon/js/model/Fraction.js';
import StringUtils from '../../../../phetcommon/js/util/StringUtils.js';
import equalityExplorer from '../../equalityExplorer.js';
import Challenge from './Challenge.js';
import ChallengeGenerator from './ChallengeGenerator.js';

// strings (debug)
const PATTERN1 = 'type 1, (a/d)x + b = c<br>' + 'x = {{x}}<br>' + 'd = {{d}}<br>' + 'a = {{a}}<br>' + 'b = {{b}}<br>' + 'c = (a/d)x + b = {{c}}';
const PATTERN2 = 'type 2, (a/d)x + b/d = c<br>' + 'x = {{x}}<br>' + 'd = {{d}}<br>' + 'a = {{a}}<br>' + 'b = {{b}}<br>' + 'c = (ax + b)/d = {{c}}';

// constants
const X_VALUES = ChallengeGenerator.rangeToArray(-40, 40);
const A_VALUES = ChallengeGenerator.rangeToArray(-10, 10);
const B_VALUES_TYPE1 = ChallengeGenerator.rangeToArray(-3, 3);
const B_VALUES_TYPE2 = ChallengeGenerator.rangeToArray(-10, 10);
const D_VALUES = ChallengeGenerator.rangeToArray(-10, 10);
export default class ChallengeGenerator4 extends ChallengeGenerator {
  // methods for generating the 2 types of challenges

  constructor() {
    super();
    this.challengeTypeMethods = [() => this.nextType1(), () => this.nextType2()];
  }

  /**
   * Generates the next challenge.
   */
  nextChallengeProtected() {
    // Randomly select the type of challenge to generate.
    return dotRandom.sample(this.challengeTypeMethods)();
  }

  /**
   * Generates the next 'type 1' challenge.
   *
   * Form: (a/d)x + b = c
   * Let x be a random integer between [-40,40], x !== 0
   * Let d be a random integer between [-10, 10], d !== [0,1,-1]
   * Let a be a random integer between [-10,10], a % d !== 0
   * Let b be a random integer between [-10,10], b !== 0
   * Let c = (a/d)x + b, c == 0 is OK
   */
  nextType1() {
    const x = this.randomX(X_VALUES);
    const d = ChallengeGenerator.randomValue(D_VALUES, [0, 1, -1]);
    const a = ChallengeGenerator.randomValueBy(A_VALUES, a => a % d !== 0);
    const b = ChallengeGenerator.randomValue(B_VALUES_TYPE1, [0]);
    const c = new Fraction(a, d).timesInteger(x).plusInteger(b).reduce();

    // Verify that computations meeting design requirements.
    assert && assert(x !== 0, 'x is 0');
    assert && assert(d !== 0, 'd is 0');
    assert && assert(a % d !== 0, `a/d reduces to an integer, a=${a}, d=${d}`);
    assert && assert(b !== 0, 'b is 0');

    // Verify that we fixed the 'too many steps to solve' problem.
    // see https://github.com/phetsims/equality-explorer/issues/38#issuecomment-384761619
    const bd = b * d;
    assert && assert(bd >= -30 && bd <= 30, `(b * d) out of range: ${bd}`);

    // derivation that corresponds to design doc, displayed with 'showAnswers' query parameter
    const debugDerivation = StringUtils.fillIn(PATTERN1, {
      x: x,
      a: a,
      b: b,
      c: c,
      d: d
    });

    // (a/d)x + b = 0x + c
    return new Challenge(x, new Fraction(a, d).reduce(), Fraction.fromInteger(b), Fraction.fromInteger(0), c, debugDerivation);
  }

  /**
   * Generates the next 'type 2' challenge.
   *
   * Form: (a/d)x + (b/d) = c
   * Let x be a random integer between [-40,40], x !== 0
   * Let d be a random integer between [-10, 10], d !== [0, 1, -1]
   * Let a be a random integer between [-10,10], a % d !== 0
   * Let b be a random integer between [-10,10], b % d !== 0
   * Let c = ( ax + b )/d, c == 0 is OK
   */
  nextType2() {
    const x = this.randomX(X_VALUES);
    const d = ChallengeGenerator.randomValue(D_VALUES, [0, 1, -1]);
    const a = ChallengeGenerator.randomValueBy(A_VALUES, a => a % d !== 0);
    const b = ChallengeGenerator.randomValueBy(B_VALUES_TYPE2, b => b % d !== 0);
    const c = new Fraction(a * x + b, d).reduce();

    // Verify that computations meeting design requirements.
    assert && assert(x !== 0, 'x is 0');
    assert && assert(d !== 0, 'd is 0');
    assert && assert(a % d !== 0, `a/d reduces to an integer, a=${a}, d=${d}`);
    assert && assert(b % d !== 0, `b/d reduces to an integer, b=${b}, d=${d}`);

    // derivation that corresponds to design doc, displayed with 'showAnswers' query parameter
    const debugDerivation = StringUtils.fillIn(PATTERN2, {
      x: x,
      a: a,
      b: b,
      c: c,
      d: d
    });

    // (a/d)x + (b/d) = 0x + c
    return new Challenge(x, new Fraction(a, d).reduce(), new Fraction(b, d).reduce(), Fraction.fromInteger(0), c, debugDerivation);
  }
}
equalityExplorer.register('ChallengeGenerator4', ChallengeGenerator4);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3RSYW5kb20iLCJGcmFjdGlvbiIsIlN0cmluZ1V0aWxzIiwiZXF1YWxpdHlFeHBsb3JlciIsIkNoYWxsZW5nZSIsIkNoYWxsZW5nZUdlbmVyYXRvciIsIlBBVFRFUk4xIiwiUEFUVEVSTjIiLCJYX1ZBTFVFUyIsInJhbmdlVG9BcnJheSIsIkFfVkFMVUVTIiwiQl9WQUxVRVNfVFlQRTEiLCJCX1ZBTFVFU19UWVBFMiIsIkRfVkFMVUVTIiwiQ2hhbGxlbmdlR2VuZXJhdG9yNCIsImNvbnN0cnVjdG9yIiwiY2hhbGxlbmdlVHlwZU1ldGhvZHMiLCJuZXh0VHlwZTEiLCJuZXh0VHlwZTIiLCJuZXh0Q2hhbGxlbmdlUHJvdGVjdGVkIiwic2FtcGxlIiwieCIsInJhbmRvbVgiLCJkIiwicmFuZG9tVmFsdWUiLCJhIiwicmFuZG9tVmFsdWVCeSIsImIiLCJjIiwidGltZXNJbnRlZ2VyIiwicGx1c0ludGVnZXIiLCJyZWR1Y2UiLCJhc3NlcnQiLCJiZCIsImRlYnVnRGVyaXZhdGlvbiIsImZpbGxJbiIsImZyb21JbnRlZ2VyIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJDaGFsbGVuZ2VHZW5lcmF0b3I0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE4LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIENoYWxsZW5nZSBnZW5lcmF0b3IgZm9yIGdhbWUgbGV2ZWwgNC5cclxuICogU2VlIHNwZWNpZmljYXRpb24gaW4gaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vZG9jdW1lbnQvZC8xdkc1VTlIaGNxVkdNdm1HR1hyeTI4UExxbE5XajI1bFN0RFAydlNXZ1VPby9lZGl0LlxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCBkb3RSYW5kb20gZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL2RvdFJhbmRvbS5qcyc7XHJcbmltcG9ydCBGcmFjdGlvbiBmcm9tICcuLi8uLi8uLi8uLi9waGV0Y29tbW9uL2pzL21vZGVsL0ZyYWN0aW9uLmpzJztcclxuaW1wb3J0IFN0cmluZ1V0aWxzIGZyb20gJy4uLy4uLy4uLy4uL3BoZXRjb21tb24vanMvdXRpbC9TdHJpbmdVdGlscy5qcyc7XHJcbmltcG9ydCBlcXVhbGl0eUV4cGxvcmVyIGZyb20gJy4uLy4uL2VxdWFsaXR5RXhwbG9yZXIuanMnO1xyXG5pbXBvcnQgQ2hhbGxlbmdlIGZyb20gJy4vQ2hhbGxlbmdlLmpzJztcclxuaW1wb3J0IENoYWxsZW5nZUdlbmVyYXRvciBmcm9tICcuL0NoYWxsZW5nZUdlbmVyYXRvci5qcyc7XHJcblxyXG4vLyBzdHJpbmdzIChkZWJ1ZylcclxuY29uc3QgUEFUVEVSTjEgPSAndHlwZSAxLCAoYS9kKXggKyBiID0gYzxicj4nICtcclxuICAgICAgICAgICAgICAgICAneCA9IHt7eH19PGJyPicgK1xyXG4gICAgICAgICAgICAgICAgICdkID0ge3tkfX08YnI+JyArXHJcbiAgICAgICAgICAgICAgICAgJ2EgPSB7e2F9fTxicj4nICtcclxuICAgICAgICAgICAgICAgICAnYiA9IHt7Yn19PGJyPicgK1xyXG4gICAgICAgICAgICAgICAgICdjID0gKGEvZCl4ICsgYiA9IHt7Y319JztcclxuY29uc3QgUEFUVEVSTjIgPSAndHlwZSAyLCAoYS9kKXggKyBiL2QgPSBjPGJyPicgK1xyXG4gICAgICAgICAgICAgICAgICd4ID0ge3t4fX08YnI+JyArXHJcbiAgICAgICAgICAgICAgICAgJ2QgPSB7e2R9fTxicj4nICtcclxuICAgICAgICAgICAgICAgICAnYSA9IHt7YX19PGJyPicgK1xyXG4gICAgICAgICAgICAgICAgICdiID0ge3tifX08YnI+JyArXHJcbiAgICAgICAgICAgICAgICAgJ2MgPSAoYXggKyBiKS9kID0ge3tjfX0nO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IFhfVkFMVUVTID0gQ2hhbGxlbmdlR2VuZXJhdG9yLnJhbmdlVG9BcnJheSggLTQwLCA0MCApO1xyXG5jb25zdCBBX1ZBTFVFUyA9IENoYWxsZW5nZUdlbmVyYXRvci5yYW5nZVRvQXJyYXkoIC0xMCwgMTAgKTtcclxuY29uc3QgQl9WQUxVRVNfVFlQRTEgPSBDaGFsbGVuZ2VHZW5lcmF0b3IucmFuZ2VUb0FycmF5KCAtMywgMyApO1xyXG5jb25zdCBCX1ZBTFVFU19UWVBFMiA9IENoYWxsZW5nZUdlbmVyYXRvci5yYW5nZVRvQXJyYXkoIC0xMCwgMTAgKTtcclxuY29uc3QgRF9WQUxVRVMgPSBDaGFsbGVuZ2VHZW5lcmF0b3IucmFuZ2VUb0FycmF5KCAtMTAsIDEwICk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDaGFsbGVuZ2VHZW5lcmF0b3I0IGV4dGVuZHMgQ2hhbGxlbmdlR2VuZXJhdG9yIHtcclxuXHJcbiAgLy8gbWV0aG9kcyBmb3IgZ2VuZXJhdGluZyB0aGUgMiB0eXBlcyBvZiBjaGFsbGVuZ2VzXHJcbiAgcHJpdmF0ZSByZWFkb25seSBjaGFsbGVuZ2VUeXBlTWV0aG9kczogKCAoKSA9PiBDaGFsbGVuZ2UgKVtdO1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIHRoaXMuY2hhbGxlbmdlVHlwZU1ldGhvZHMgPSBbXHJcbiAgICAgICgpID0+IHRoaXMubmV4dFR5cGUxKCksXHJcbiAgICAgICgpID0+IHRoaXMubmV4dFR5cGUyKClcclxuICAgIF07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZW5lcmF0ZXMgdGhlIG5leHQgY2hhbGxlbmdlLlxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBvdmVycmlkZSBuZXh0Q2hhbGxlbmdlUHJvdGVjdGVkKCk6IENoYWxsZW5nZSB7XHJcblxyXG4gICAgLy8gUmFuZG9tbHkgc2VsZWN0IHRoZSB0eXBlIG9mIGNoYWxsZW5nZSB0byBnZW5lcmF0ZS5cclxuICAgIHJldHVybiBkb3RSYW5kb20uc2FtcGxlKCB0aGlzLmNoYWxsZW5nZVR5cGVNZXRob2RzICkoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdlbmVyYXRlcyB0aGUgbmV4dCAndHlwZSAxJyBjaGFsbGVuZ2UuXHJcbiAgICpcclxuICAgKiBGb3JtOiAoYS9kKXggKyBiID0gY1xyXG4gICAqIExldCB4IGJlIGEgcmFuZG9tIGludGVnZXIgYmV0d2VlbiBbLTQwLDQwXSwgeCAhPT0gMFxyXG4gICAqIExldCBkIGJlIGEgcmFuZG9tIGludGVnZXIgYmV0d2VlbiBbLTEwLCAxMF0sIGQgIT09IFswLDEsLTFdXHJcbiAgICogTGV0IGEgYmUgYSByYW5kb20gaW50ZWdlciBiZXR3ZWVuIFstMTAsMTBdLCBhICUgZCAhPT0gMFxyXG4gICAqIExldCBiIGJlIGEgcmFuZG9tIGludGVnZXIgYmV0d2VlbiBbLTEwLDEwXSwgYiAhPT0gMFxyXG4gICAqIExldCBjID0gKGEvZCl4ICsgYiwgYyA9PSAwIGlzIE9LXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBuZXh0VHlwZTEoKTogQ2hhbGxlbmdlIHtcclxuXHJcbiAgICBjb25zdCB4ID0gdGhpcy5yYW5kb21YKCBYX1ZBTFVFUyApO1xyXG4gICAgY29uc3QgZCA9IENoYWxsZW5nZUdlbmVyYXRvci5yYW5kb21WYWx1ZSggRF9WQUxVRVMsIFsgMCwgMSwgLTEgXSApO1xyXG4gICAgY29uc3QgYSA9IENoYWxsZW5nZUdlbmVyYXRvci5yYW5kb21WYWx1ZUJ5KCBBX1ZBTFVFUywgYSA9PiAoIGEgJSBkICE9PSAwICkgKTtcclxuICAgIGNvbnN0IGIgPSBDaGFsbGVuZ2VHZW5lcmF0b3IucmFuZG9tVmFsdWUoIEJfVkFMVUVTX1RZUEUxLCBbIDAgXSApO1xyXG4gICAgY29uc3QgYyA9IG5ldyBGcmFjdGlvbiggYSwgZCApLnRpbWVzSW50ZWdlciggeCApLnBsdXNJbnRlZ2VyKCBiICkucmVkdWNlKCk7XHJcblxyXG4gICAgLy8gVmVyaWZ5IHRoYXQgY29tcHV0YXRpb25zIG1lZXRpbmcgZGVzaWduIHJlcXVpcmVtZW50cy5cclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIHggIT09IDAsICd4IGlzIDAnICk7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBkICE9PSAwLCAnZCBpcyAwJyApO1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggYSAlIGQgIT09IDAsIGBhL2QgcmVkdWNlcyB0byBhbiBpbnRlZ2VyLCBhPSR7YX0sIGQ9JHtkfWAgKTtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIGIgIT09IDAsICdiIGlzIDAnICk7XHJcblxyXG4gICAgLy8gVmVyaWZ5IHRoYXQgd2UgZml4ZWQgdGhlICd0b28gbWFueSBzdGVwcyB0byBzb2x2ZScgcHJvYmxlbS5cclxuICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvZXF1YWxpdHktZXhwbG9yZXIvaXNzdWVzLzM4I2lzc3VlY29tbWVudC0zODQ3NjE2MTlcclxuICAgIGNvbnN0IGJkID0gYiAqIGQ7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBiZCA+PSAtMzAgJiYgYmQgPD0gMzAsIGAoYiAqIGQpIG91dCBvZiByYW5nZTogJHtiZH1gICk7XHJcblxyXG4gICAgLy8gZGVyaXZhdGlvbiB0aGF0IGNvcnJlc3BvbmRzIHRvIGRlc2lnbiBkb2MsIGRpc3BsYXllZCB3aXRoICdzaG93QW5zd2VycycgcXVlcnkgcGFyYW1ldGVyXHJcbiAgICBjb25zdCBkZWJ1Z0Rlcml2YXRpb24gPSBTdHJpbmdVdGlscy5maWxsSW4oIFBBVFRFUk4xLCB7IHg6IHgsIGE6IGEsIGI6IGIsIGM6IGMsIGQ6IGQgfSApO1xyXG5cclxuICAgIC8vIChhL2QpeCArIGIgPSAweCArIGNcclxuICAgIHJldHVybiBuZXcgQ2hhbGxlbmdlKCB4LFxyXG4gICAgICBuZXcgRnJhY3Rpb24oIGEsIGQgKS5yZWR1Y2UoKSwgRnJhY3Rpb24uZnJvbUludGVnZXIoIGIgKSxcclxuICAgICAgRnJhY3Rpb24uZnJvbUludGVnZXIoIDAgKSwgYyxcclxuICAgICAgZGVidWdEZXJpdmF0aW9uICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZW5lcmF0ZXMgdGhlIG5leHQgJ3R5cGUgMicgY2hhbGxlbmdlLlxyXG4gICAqXHJcbiAgICogRm9ybTogKGEvZCl4ICsgKGIvZCkgPSBjXHJcbiAgICogTGV0IHggYmUgYSByYW5kb20gaW50ZWdlciBiZXR3ZWVuIFstNDAsNDBdLCB4ICE9PSAwXHJcbiAgICogTGV0IGQgYmUgYSByYW5kb20gaW50ZWdlciBiZXR3ZWVuIFstMTAsIDEwXSwgZCAhPT0gWzAsIDEsIC0xXVxyXG4gICAqIExldCBhIGJlIGEgcmFuZG9tIGludGVnZXIgYmV0d2VlbiBbLTEwLDEwXSwgYSAlIGQgIT09IDBcclxuICAgKiBMZXQgYiBiZSBhIHJhbmRvbSBpbnRlZ2VyIGJldHdlZW4gWy0xMCwxMF0sIGIgJSBkICE9PSAwXHJcbiAgICogTGV0IGMgPSAoIGF4ICsgYiApL2QsIGMgPT0gMCBpcyBPS1xyXG4gICAqL1xyXG4gIHByaXZhdGUgbmV4dFR5cGUyKCk6IENoYWxsZW5nZSB7XHJcblxyXG4gICAgY29uc3QgeCA9IHRoaXMucmFuZG9tWCggWF9WQUxVRVMgKTtcclxuICAgIGNvbnN0IGQgPSBDaGFsbGVuZ2VHZW5lcmF0b3IucmFuZG9tVmFsdWUoIERfVkFMVUVTLCBbIDAsIDEsIC0xIF0gKTtcclxuICAgIGNvbnN0IGEgPSBDaGFsbGVuZ2VHZW5lcmF0b3IucmFuZG9tVmFsdWVCeSggQV9WQUxVRVMsIGEgPT4gKCBhICUgZCAhPT0gMCApICk7XHJcbiAgICBjb25zdCBiID0gQ2hhbGxlbmdlR2VuZXJhdG9yLnJhbmRvbVZhbHVlQnkoIEJfVkFMVUVTX1RZUEUyLCBiID0+ICggYiAlIGQgIT09IDAgKSApO1xyXG4gICAgY29uc3QgYyA9IG5ldyBGcmFjdGlvbiggKCBhICogeCApICsgYiwgZCApLnJlZHVjZSgpO1xyXG5cclxuICAgIC8vIFZlcmlmeSB0aGF0IGNvbXB1dGF0aW9ucyBtZWV0aW5nIGRlc2lnbiByZXF1aXJlbWVudHMuXHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCB4ICE9PSAwLCAneCBpcyAwJyApO1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggZCAhPT0gMCwgJ2QgaXMgMCcgKTtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIGEgJSBkICE9PSAwLCBgYS9kIHJlZHVjZXMgdG8gYW4gaW50ZWdlciwgYT0ke2F9LCBkPSR7ZH1gICk7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBiICUgZCAhPT0gMCwgYGIvZCByZWR1Y2VzIHRvIGFuIGludGVnZXIsIGI9JHtifSwgZD0ke2R9YCApO1xyXG5cclxuICAgIC8vIGRlcml2YXRpb24gdGhhdCBjb3JyZXNwb25kcyB0byBkZXNpZ24gZG9jLCBkaXNwbGF5ZWQgd2l0aCAnc2hvd0Fuc3dlcnMnIHF1ZXJ5IHBhcmFtZXRlclxyXG4gICAgY29uc3QgZGVidWdEZXJpdmF0aW9uID0gU3RyaW5nVXRpbHMuZmlsbEluKCBQQVRURVJOMiwgeyB4OiB4LCBhOiBhLCBiOiBiLCBjOiBjLCBkOiBkIH0gKTtcclxuXHJcbiAgICAvLyAoYS9kKXggKyAoYi9kKSA9IDB4ICsgY1xyXG4gICAgcmV0dXJuIG5ldyBDaGFsbGVuZ2UoIHgsXHJcbiAgICAgIG5ldyBGcmFjdGlvbiggYSwgZCApLnJlZHVjZSgpLCBuZXcgRnJhY3Rpb24oIGIsIGQgKS5yZWR1Y2UoKSxcclxuICAgICAgRnJhY3Rpb24uZnJvbUludGVnZXIoIDAgKSwgYyxcclxuICAgICAgZGVidWdEZXJpdmF0aW9uICk7XHJcbiAgfVxyXG59XHJcblxyXG5lcXVhbGl0eUV4cGxvcmVyLnJlZ2lzdGVyKCAnQ2hhbGxlbmdlR2VuZXJhdG9yNCcsIENoYWxsZW5nZUdlbmVyYXRvcjQgKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxTQUFTLE1BQU0saUNBQWlDO0FBQ3ZELE9BQU9DLFFBQVEsTUFBTSw2Q0FBNkM7QUFDbEUsT0FBT0MsV0FBVyxNQUFNLCtDQUErQztBQUN2RSxPQUFPQyxnQkFBZ0IsTUFBTSwyQkFBMkI7QUFDeEQs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