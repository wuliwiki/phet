// Copyright 2018-2022, University of Colorado Boulder

/**
 * This is the reward that's shown behind RewardDialog when the user gets to 10 stars.
 * The reward varies by level.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import StringProperty from '../../../../axon/js/StringProperty.js';
import Fraction from '../../../../phetcommon/js/model/Fraction.js';
import FaceNode from '../../../../scenery-phet/js/FaceNode.js';
import StarNode from '../../../../scenery-phet/js/StarNode.js';
import { Image } from '../../../../scenery/js/imports.js';
import RewardNode from '../../../../vegas/js/RewardNode.js';
import apple_png from '../../../images/apple_png.js';
import cat_png from '../../../images/cat_png.js';
import dog_png from '../../../images/dog_png.js';
import orange_png from '../../../images/orange_png.js';
import sphere_png from '../../../images/sphere_png.js';
import square_png from '../../../images/square_png.js';
import ConstantTerm from '../../common/model/ConstantTerm.js';
import UniversalOperation from '../../common/model/UniversalOperation.js';
import UniversalOperator from '../../common/model/UniversalOperator.js';
import ConstantTermNode from '../../common/view/ConstantTermNode.js';
import UniversalOperationNode from '../../common/view/UniversalOperationNode.js';
import VariableTermNode from '../../common/view/VariableTermNode.js';
import equalityExplorer from '../../equalityExplorer.js';
import EqualityExplorerStrings from '../../EqualityExplorerStrings.js';
import ChallengeGenerator from '../model/ChallengeGenerator.js';

// constants
const DIAMETER = 40;
const IMAGE_OPTIONS = {
  maxHeight: DIAMETER
};

// Ranges for coefficients and constants, zero excluded
const POSITIVE_INTEGER_VALUES = ChallengeGenerator.rangeToArray(1, 9);
const NEGATIVE_INTEGER_VALUES = ChallengeGenerator.rangeToArray(-9, -1);
const INTEGER_VALUES = [...POSITIVE_INTEGER_VALUES, ...NEGATIVE_INTEGER_VALUES];

// Node instances that are reused throughout the rewards
const APPLE_NODE = new Image(apple_png, IMAGE_OPTIONS);
const CAT_NODE = new Image(cat_png, IMAGE_OPTIONS);
const DOG_NODE = new Image(dog_png, IMAGE_OPTIONS);
const ORANGE_NODE = new Image(orange_png, IMAGE_OPTIONS);
const SPHERE_NODE = new Image(sphere_png, IMAGE_OPTIONS);
const SQUARE_NODE = new Image(square_png, IMAGE_OPTIONS);
const STAR_NODE = new StarNode({
  starShapeOptions: {
    innerRadius: DIAMETER / 4,
    outerRadius: DIAMETER / 2
  }
});
const FACE_NODE = new FaceNode(DIAMETER, {
  headStroke: 'black'
});
export default class SolveItRewardNode extends RewardNode {
  /**
   * @param level - the game level
   */
  constructor(level) {
    const createNodesFunction = [createNodes1, createNodes2, createNodes3, createNodes4, createNodes5];
    const nodes = createNodesFunction[level - 1]();
    super({
      nodes: RewardNode.createRandomNodes(nodes, 100 /* count */)
    });
  }
}

/**
 * Creates nodes for level 1 reward.
 */
function createNodes1() {
  const nodes = [];

  // variable terms with positive integer coefficients
  POSITIVE_INTEGER_VALUES.forEach(i => {
    nodes.push(createVariableTermNode(i));
  });
  INTEGER_VALUES.forEach(i => {
    // constant terms with integer values
    nodes.push(createIntegerConstantTermNode(i));

    // spheres & rectangles
    nodes.push(SPHERE_NODE);
    nodes.push(SQUARE_NODE);
  });
  return nodes;
}

/**
 * Creates nodes for level 2 reward.
 */
function createNodes2() {
  const nodes = [];

  // variable terms with negative integer coefficients
  NEGATIVE_INTEGER_VALUES.forEach(i => {
    nodes.push(createVariableTermNode(i));
  });
  INTEGER_VALUES.forEach(i => {
    // constant terms with integer values
    nodes.push(createIntegerConstantTermNode(i));

    // apples & oranges
    nodes.push(APPLE_NODE);
    nodes.push(ORANGE_NODE);
  });
  return nodes;
}

/**
 * Creates nodes for level 3 reward.
 */
function createNodes3() {
  const nodes = [];
  INTEGER_VALUES.forEach(i => {
    // variable terms with integer coefficients
    nodes.push(createVariableTermNode(i));

    // constant terms with integer values
    nodes.push(createIntegerConstantTermNode(i));

    // random operations on integers
    nodes.push(createOperationNode());

    // stars
    nodes.push(STAR_NODE);
  });
  return nodes;
}

/**
 * Creates nodes for level 4 reward.
 */
function createNodes4() {
  const nodes = [];
  INTEGER_VALUES.forEach(i => {
    // variable terms with integer coefficients
    nodes.push(createVariableTermNode(i));

    // constant terms with fraction values
    nodes.push(createFractionConstantTermNode());

    // random operations on integers
    nodes.push(createOperationNode());

    // smiley faces
    nodes.push(FACE_NODE);
  });
  return nodes;
}

/**
 * Creates nodes for level 5 reward.
 */
function createNodes5() {
  const nodes = [];
  INTEGER_VALUES.forEach(i => {
    // variable terms with integer coefficients
    nodes.push(createVariableTermNode(i));

    // constant terms with integer values
    nodes.push(createIntegerConstantTermNode(i));

    // cats and dogs
    nodes.push(CAT_NODE);
    nodes.push(DOG_NODE);
  });
  return nodes;
}

/**
 * Create a variable term node with a specified integer coefficient.
 */
function createVariableTermNode(coefficient) {
  // NOTE: Use a static string here for 'x' because:
  // (1) a new SolveItRewardNode is instantiated each time the game displays a reward, so this Node would need to
  //     be disposed when SolveItRewardNode is disposed, and
  // (2) the implementation of RewardNode converts the Nodes to HTMLImageElements, which are rendered with Canvas,
  //     so updates to EqualityExplorerStrings.xStringProperty would have no affect.
  const stringProperty = new StringProperty(EqualityExplorerStrings.xStringProperty.value);
  return VariableTermNode.createInteractiveTermNode(Fraction.fromInteger(coefficient), stringProperty, {
    diameter: DIAMETER,
    equationTermNodeOptions: {
      showOne: true // show coefficient for '1x'
    }
  });
}

/**
 * Creates a constant term node with a specified integer value.
 */
function createIntegerConstantTermNode(constantValue) {
  return ConstantTermNode.createInteractiveTermNode(Fraction.fromInteger(constantValue), {
    diameter: DIAMETER
  });
}

/**
 * Creates a constant term node with a random fraction value.
 */
function createFractionConstantTermNode() {
  const numerator = ChallengeGenerator.randomValue(INTEGER_VALUES, [0]);
  const denominator = ChallengeGenerator.randomValueBy(INTEGER_VALUES, denominator => denominator !== 0 && Math.abs(denominator) !== 1 && numerator % denominator !== 0);
  const constantValue = new Fraction(numerator, denominator).reduced();
  return ConstantTermNode.createInteractiveTermNode(constantValue, {
    diameter: DIAMETER
  });
}

/**
 * Creates an operation node with a random operator and a random positive integer operand.
 */
function createOperationNode() {
  const operator = UniversalOperator.getRandom();
  const constantValue = ChallengeGenerator.randomValueBy(INTEGER_VALUES, value => value > 0);
  const operand = new ConstantTerm({
    constantValue: Fraction.fromInteger(constantValue)
  });
  const operation = new UniversalOperation(operator, operand);
  return new UniversalOperationNode(operation, {
    maxHeight: DIAMETER
  });
}
equalityExplorer.register('SolveItRewardNode', SolveItRewardNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTdHJpbmdQcm9wZXJ0eSIsIkZyYWN0aW9uIiwiRmFjZU5vZGUiLCJTdGFyTm9kZSIsIkltYWdlIiwiUmV3YXJkTm9kZSIsImFwcGxlX3BuZyIsImNhdF9wbmciLCJkb2dfcG5nIiwib3JhbmdlX3BuZyIsInNwaGVyZV9wbmciLCJzcXVhcmVfcG5nIiwiQ29uc3RhbnRUZXJtIiwiVW5pdmVyc2FsT3BlcmF0aW9uIiwiVW5pdmVyc2FsT3BlcmF0b3IiLCJDb25zdGFudFRlcm1Ob2RlIiwiVW5pdmVyc2FsT3BlcmF0aW9uTm9kZSIsIlZhcmlhYmxlVGVybU5vZGUiLCJlcXVhbGl0eUV4cGxvcmVyIiwiRXF1YWxpdHlFeHBsb3JlclN0cmluZ3MiLCJDaGFsbGVuZ2VHZW5lcmF0b3IiLCJESUFNRVRFUiIsIklNQUdFX09QVElPTlMiLCJtYXhIZWlnaHQiLCJQT1NJVElWRV9JTlRFR0VSX1ZBTFVFUyIsInJhbmdlVG9BcnJheSIsIk5FR0FUSVZFX0lOVEVHRVJfVkFMVUVTIiwiSU5URUdFUl9WQUxVRVMiLCJBUFBMRV9OT0RFIiwiQ0FUX05PREUiLCJET0dfTk9ERSIsIk9SQU5HRV9OT0RFIiwiU1BIRVJFX05PREUiLCJTUVVBUkVfTk9ERSIsIlNUQVJfTk9ERSIsInN0YXJTaGFwZU9wdGlvbnMiLCJpbm5lclJhZGl1cyIsIm91dGVyUmFkaXVzIiwiRkFDRV9OT0RFIiwiaGVhZFN0cm9rZSIsIlNvbHZlSXRSZXdhcmROb2RlIiwiY29uc3RydWN0b3IiLCJsZXZlbCIsImNyZWF0ZU5vZGVzRnVuY3Rpb24iLCJjcmVhdGVOb2RlczEiLCJjcmVhdGVOb2RlczIiLCJjcmVhdGVOb2RlczMiLCJjcmVhdGVOb2RlczQiLCJjcmVhdGVOb2RlczUiLCJub2RlcyIsImNyZWF0ZVJhbmRvbU5vZGVzIiwiZm9yRWFjaCIsImkiLCJwdXNoIiwiY3JlYXRlVmFyaWFibGVUZXJtTm9kZSIsImNyZWF0ZUludGVnZXJDb25zdGFudFRlcm1Ob2RlIiwiY3JlYXRlT3BlcmF0aW9uTm9kZSIsImNyZWF0ZUZyYWN0aW9uQ29uc3RhbnRUZXJtTm9kZSIsImNvZWZmaWNpZW50Iiwic3RyaW5nUHJvcGVydHkiLCJ4U3RyaW5nUHJvcGVydHkiLCJ2YWx1ZSIsImNyZWF0ZUludGVyYWN0aXZlVGVybU5vZGUiLCJmcm9tSW50ZWdlciIsImRpYW1ldGVyIiwiZXF1YXRpb25UZXJtTm9kZU9wdGlvbnMiLCJzaG93T25lIiwiY29uc3RhbnRWYWx1ZSIsIm51bWVyYXRvciIsInJhbmRvbVZhbHVlIiwiZGVub21pbmF0b3IiLCJyYW5kb21WYWx1ZUJ5IiwiTWF0aCIsImFicyIsInJlZHVjZWQiLCJvcGVyYXRvciIsImdldFJhbmRvbSIsIm9wZXJhbmQiLCJvcGVyYXRpb24iLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlNvbHZlSXRSZXdhcmROb2RlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE4LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFRoaXMgaXMgdGhlIHJld2FyZCB0aGF0J3Mgc2hvd24gYmVoaW5kIFJld2FyZERpYWxvZyB3aGVuIHRoZSB1c2VyIGdldHMgdG8gMTAgc3RhcnMuXHJcbiAqIFRoZSByZXdhcmQgdmFyaWVzIGJ5IGxldmVsLlxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCBTdHJpbmdQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1N0cmluZ1Byb3BlcnR5LmpzJztcclxuaW1wb3J0IEZyYWN0aW9uIGZyb20gJy4uLy4uLy4uLy4uL3BoZXRjb21tb24vanMvbW9kZWwvRnJhY3Rpb24uanMnO1xyXG5pbXBvcnQgRmFjZU5vZGUgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL0ZhY2VOb2RlLmpzJztcclxuaW1wb3J0IFN0YXJOb2RlIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9TdGFyTm9kZS5qcyc7XHJcbmltcG9ydCB7IEltYWdlLCBOb2RlIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IFJld2FyZE5vZGUgZnJvbSAnLi4vLi4vLi4vLi4vdmVnYXMvanMvUmV3YXJkTm9kZS5qcyc7XHJcbmltcG9ydCBhcHBsZV9wbmcgZnJvbSAnLi4vLi4vLi4vaW1hZ2VzL2FwcGxlX3BuZy5qcyc7XHJcbmltcG9ydCBjYXRfcG5nIGZyb20gJy4uLy4uLy4uL2ltYWdlcy9jYXRfcG5nLmpzJztcclxuaW1wb3J0IGRvZ19wbmcgZnJvbSAnLi4vLi4vLi4vaW1hZ2VzL2RvZ19wbmcuanMnO1xyXG5pbXBvcnQgb3JhbmdlX3BuZyBmcm9tICcuLi8uLi8uLi9pbWFnZXMvb3JhbmdlX3BuZy5qcyc7XHJcbmltcG9ydCBzcGhlcmVfcG5nIGZyb20gJy4uLy4uLy4uL2ltYWdlcy9zcGhlcmVfcG5nLmpzJztcclxuaW1wb3J0IHNxdWFyZV9wbmcgZnJvbSAnLi4vLi4vLi4vaW1hZ2VzL3NxdWFyZV9wbmcuanMnO1xyXG5pbXBvcnQgQ29uc3RhbnRUZXJtIGZyb20gJy4uLy4uL2NvbW1vbi9tb2RlbC9Db25zdGFudFRlcm0uanMnO1xyXG5pbXBvcnQgVW5pdmVyc2FsT3BlcmF0aW9uIGZyb20gJy4uLy4uL2NvbW1vbi9tb2RlbC9Vbml2ZXJzYWxPcGVyYXRpb24uanMnO1xyXG5pbXBvcnQgVW5pdmVyc2FsT3BlcmF0b3IgZnJvbSAnLi4vLi4vY29tbW9uL21vZGVsL1VuaXZlcnNhbE9wZXJhdG9yLmpzJztcclxuaW1wb3J0IENvbnN0YW50VGVybU5vZGUgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvQ29uc3RhbnRUZXJtTm9kZS5qcyc7XHJcbmltcG9ydCBVbml2ZXJzYWxPcGVyYXRpb25Ob2RlIGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L1VuaXZlcnNhbE9wZXJhdGlvbk5vZGUuanMnO1xyXG5pbXBvcnQgVmFyaWFibGVUZXJtTm9kZSBmcm9tICcuLi8uLi9jb21tb24vdmlldy9WYXJpYWJsZVRlcm1Ob2RlLmpzJztcclxuaW1wb3J0IGVxdWFsaXR5RXhwbG9yZXIgZnJvbSAnLi4vLi4vZXF1YWxpdHlFeHBsb3Jlci5qcyc7XHJcbmltcG9ydCBFcXVhbGl0eUV4cGxvcmVyU3RyaW5ncyBmcm9tICcuLi8uLi9FcXVhbGl0eUV4cGxvcmVyU3RyaW5ncy5qcyc7XHJcbmltcG9ydCBDaGFsbGVuZ2VHZW5lcmF0b3IgZnJvbSAnLi4vbW9kZWwvQ2hhbGxlbmdlR2VuZXJhdG9yLmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBESUFNRVRFUiA9IDQwO1xyXG5jb25zdCBJTUFHRV9PUFRJT05TID0geyBtYXhIZWlnaHQ6IERJQU1FVEVSIH07XHJcblxyXG4vLyBSYW5nZXMgZm9yIGNvZWZmaWNpZW50cyBhbmQgY29uc3RhbnRzLCB6ZXJvIGV4Y2x1ZGVkXHJcbmNvbnN0IFBPU0lUSVZFX0lOVEVHRVJfVkFMVUVTID0gQ2hhbGxlbmdlR2VuZXJhdG9yLnJhbmdlVG9BcnJheSggMSwgOSApO1xyXG5jb25zdCBORUdBVElWRV9JTlRFR0VSX1ZBTFVFUyA9IENoYWxsZW5nZUdlbmVyYXRvci5yYW5nZVRvQXJyYXkoIC05LCAtMSApO1xyXG5jb25zdCBJTlRFR0VSX1ZBTFVFUyA9IFsgLi4uUE9TSVRJVkVfSU5URUdFUl9WQUxVRVMsIC4uLk5FR0FUSVZFX0lOVEVHRVJfVkFMVUVTIF07XHJcblxyXG4vLyBOb2RlIGluc3RhbmNlcyB0aGF0IGFyZSByZXVzZWQgdGhyb3VnaG91dCB0aGUgcmV3YXJkc1xyXG5jb25zdCBBUFBMRV9OT0RFID0gbmV3IEltYWdlKCBhcHBsZV9wbmcsIElNQUdFX09QVElPTlMgKTtcclxuY29uc3QgQ0FUX05PREUgPSBuZXcgSW1hZ2UoIGNhdF9wbmcsIElNQUdFX09QVElPTlMgKTtcclxuY29uc3QgRE9HX05PREUgPSBuZXcgSW1hZ2UoIGRvZ19wbmcsIElNQUdFX09QVElPTlMgKTtcclxuY29uc3QgT1JBTkdFX05PREUgPSBuZXcgSW1hZ2UoIG9yYW5nZV9wbmcsIElNQUdFX09QVElPTlMgKTtcclxuY29uc3QgU1BIRVJFX05PREUgPSBuZXcgSW1hZ2UoIHNwaGVyZV9wbmcsIElNQUdFX09QVElPTlMgKTtcclxuY29uc3QgU1FVQVJFX05PREUgPSBuZXcgSW1hZ2UoIHNxdWFyZV9wbmcsIElNQUdFX09QVElPTlMgKTtcclxuY29uc3QgU1RBUl9OT0RFID0gbmV3IFN0YXJOb2RlKCB7XHJcbiAgc3RhclNoYXBlT3B0aW9uczoge1xyXG4gICAgaW5uZXJSYWRpdXM6IERJQU1FVEVSIC8gNCxcclxuICAgIG91dGVyUmFkaXVzOiBESUFNRVRFUiAvIDJcclxuICB9XHJcbn0gKTtcclxuY29uc3QgRkFDRV9OT0RFID0gbmV3IEZhY2VOb2RlKCBESUFNRVRFUiwge1xyXG4gIGhlYWRTdHJva2U6ICdibGFjaydcclxufSApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU29sdmVJdFJld2FyZE5vZGUgZXh0ZW5kcyBSZXdhcmROb2RlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIGxldmVsIC0gdGhlIGdhbWUgbGV2ZWxcclxuICAgKi9cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIGxldmVsOiBudW1iZXIgKSB7XHJcblxyXG4gICAgY29uc3QgY3JlYXRlTm9kZXNGdW5jdGlvbiA9IFsgY3JlYXRlTm9kZXMxLCBjcmVhdGVOb2RlczIsIGNyZWF0ZU5vZGVzMywgY3JlYXRlTm9kZXM0LCBjcmVhdGVOb2RlczUgXTtcclxuXHJcbiAgICBjb25zdCBub2RlcyA9IGNyZWF0ZU5vZGVzRnVuY3Rpb25bIGxldmVsIC0gMSBdKCk7XHJcblxyXG4gICAgc3VwZXIoIHtcclxuICAgICAgbm9kZXM6IFJld2FyZE5vZGUuY3JlYXRlUmFuZG9tTm9kZXMoIG5vZGVzLCAxMDAgLyogY291bnQgKi8gKVxyXG4gICAgfSApO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgbm9kZXMgZm9yIGxldmVsIDEgcmV3YXJkLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlTm9kZXMxKCk6IE5vZGVbXSB7XHJcbiAgY29uc3Qgbm9kZXM6IE5vZGVbXSA9IFtdO1xyXG5cclxuICAvLyB2YXJpYWJsZSB0ZXJtcyB3aXRoIHBvc2l0aXZlIGludGVnZXIgY29lZmZpY2llbnRzXHJcbiAgUE9TSVRJVkVfSU5URUdFUl9WQUxVRVMuZm9yRWFjaCggaSA9PiB7XHJcbiAgICBub2Rlcy5wdXNoKCBjcmVhdGVWYXJpYWJsZVRlcm1Ob2RlKCBpICkgKTtcclxuICB9ICk7XHJcblxyXG4gIElOVEVHRVJfVkFMVUVTLmZvckVhY2goIGkgPT4ge1xyXG5cclxuICAgIC8vIGNvbnN0YW50IHRlcm1zIHdpdGggaW50ZWdlciB2YWx1ZXNcclxuICAgIG5vZGVzLnB1c2goIGNyZWF0ZUludGVnZXJDb25zdGFudFRlcm1Ob2RlKCBpICkgKTtcclxuXHJcbiAgICAvLyBzcGhlcmVzICYgcmVjdGFuZ2xlc1xyXG4gICAgbm9kZXMucHVzaCggU1BIRVJFX05PREUgKTtcclxuICAgIG5vZGVzLnB1c2goIFNRVUFSRV9OT0RFICk7XHJcbiAgfSApO1xyXG4gIHJldHVybiBub2RlcztcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgbm9kZXMgZm9yIGxldmVsIDIgcmV3YXJkLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlTm9kZXMyKCk6IE5vZGVbXSB7XHJcbiAgY29uc3Qgbm9kZXM6IE5vZGVbXSA9IFtdO1xyXG5cclxuICAvLyB2YXJpYWJsZSB0ZXJtcyB3aXRoIG5lZ2F0aXZlIGludGVnZXIgY29lZmZpY2llbnRzXHJcbiAgTkVHQVRJVkVfSU5URUdFUl9WQUxVRVMuZm9yRWFjaCggaSA9PiB7XHJcbiAgICBub2Rlcy5wdXNoKCBjcmVhdGVWYXJpYWJsZVRlcm1Ob2RlKCBpICkgKTtcclxuICB9ICk7XHJcblxyXG4gIElOVEVHRVJfVkFMVUVTLmZvckVhY2goIGkgPT4ge1xyXG5cclxuICAgIC8vIGNvbnN0YW50IHRlcm1zIHdpdGggaW50ZWdlciB2YWx1ZXNcclxuICAgIG5vZGVzLnB1c2goIGNyZWF0ZUludGVnZXJDb25zdGFudFRlcm1Ob2RlKCBpICkgKTtcclxuXHJcbiAgICAvLyBhcHBsZXMgJiBvcmFuZ2VzXHJcbiAgICBub2Rlcy5wdXNoKCBBUFBMRV9OT0RFICk7XHJcbiAgICBub2Rlcy5wdXNoKCBPUkFOR0VfTk9ERSApO1xyXG4gIH0gKTtcclxuICByZXR1cm4gbm9kZXM7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIG5vZGVzIGZvciBsZXZlbCAzIHJld2FyZC5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZU5vZGVzMygpOiBOb2RlW10ge1xyXG4gIGNvbnN0IG5vZGVzOiBOb2RlW10gPSBbXTtcclxuICBJTlRFR0VSX1ZBTFVFUy5mb3JFYWNoKCBpID0+IHtcclxuXHJcbiAgICAvLyB2YXJpYWJsZSB0ZXJtcyB3aXRoIGludGVnZXIgY29lZmZpY2llbnRzXHJcbiAgICBub2Rlcy5wdXNoKCBjcmVhdGVWYXJpYWJsZVRlcm1Ob2RlKCBpICkgKTtcclxuXHJcbiAgICAvLyBjb25zdGFudCB0ZXJtcyB3aXRoIGludGVnZXIgdmFsdWVzXHJcbiAgICBub2Rlcy5wdXNoKCBjcmVhdGVJbnRlZ2VyQ29uc3RhbnRUZXJtTm9kZSggaSApICk7XHJcblxyXG4gICAgLy8gcmFuZG9tIG9wZXJhdGlvbnMgb24gaW50ZWdlcnNcclxuICAgIG5vZGVzLnB1c2goIGNyZWF0ZU9wZXJhdGlvbk5vZGUoKSApO1xyXG5cclxuICAgIC8vIHN0YXJzXHJcbiAgICBub2Rlcy5wdXNoKCBTVEFSX05PREUgKTtcclxuICB9ICk7XHJcbiAgcmV0dXJuIG5vZGVzO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBub2RlcyBmb3IgbGV2ZWwgNCByZXdhcmQuXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVOb2RlczQoKTogTm9kZVtdIHtcclxuICBjb25zdCBub2RlczogTm9kZVtdID0gW107XHJcbiAgSU5URUdFUl9WQUxVRVMuZm9yRWFjaCggaSA9PiB7XHJcblxyXG4gICAgLy8gdmFyaWFibGUgdGVybXMgd2l0aCBpbnRlZ2VyIGNvZWZmaWNpZW50c1xyXG4gICAgbm9kZXMucHVzaCggY3JlYXRlVmFyaWFibGVUZXJtTm9kZSggaSApICk7XHJcblxyXG4gICAgLy8gY29uc3RhbnQgdGVybXMgd2l0aCBmcmFjdGlvbiB2YWx1ZXNcclxuICAgIG5vZGVzLnB1c2goIGNyZWF0ZUZyYWN0aW9uQ29uc3RhbnRUZXJtTm9kZSgpICk7XHJcblxyXG4gICAgLy8gcmFuZG9tIG9wZXJhdGlvbnMgb24gaW50ZWdlcnNcclxuICAgIG5vZGVzLnB1c2goIGNyZWF0ZU9wZXJhdGlvbk5vZGUoKSApO1xyXG5cclxuICAgIC8vIHNtaWxleSBmYWNlc1xyXG4gICAgbm9kZXMucHVzaCggRkFDRV9OT0RFICk7XHJcbiAgfSApO1xyXG4gIHJldHVybiBub2RlcztcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgbm9kZXMgZm9yIGxldmVsIDUgcmV3YXJkLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlTm9kZXM1KCk6IE5vZGVbXSB7XHJcbiAgY29uc3Qgbm9kZXM6IE5vZGVbXSA9IFtdO1xyXG4gIElOVEVHRVJfVkFMVUVTLmZvckVhY2goIGkgPT4ge1xyXG5cclxuICAgIC8vIHZhcmlhYmxlIHRlcm1zIHdpdGggaW50ZWdlciBjb2VmZmljaWVudHNcclxuICAgIG5vZGVzLnB1c2goIGNyZWF0ZVZhcmlhYmxlVGVybU5vZGUoIGkgKSApO1xyXG5cclxuICAgIC8vIGNvbnN0YW50IHRlcm1zIHdpdGggaW50ZWdlciB2YWx1ZXNcclxuICAgIG5vZGVzLnB1c2goIGNyZWF0ZUludGVnZXJDb25zdGFudFRlcm1Ob2RlKCBpICkgKTtcclxuXHJcbiAgICAvLyBjYXRzIGFuZCBkb2dzXHJcbiAgICBub2Rlcy5wdXNoKCBDQVRfTk9ERSApO1xyXG4gICAgbm9kZXMucHVzaCggRE9HX05PREUgKTtcclxuICB9ICk7XHJcbiAgcmV0dXJuIG5vZGVzO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGEgdmFyaWFibGUgdGVybSBub2RlIHdpdGggYSBzcGVjaWZpZWQgaW50ZWdlciBjb2VmZmljaWVudC5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVZhcmlhYmxlVGVybU5vZGUoIGNvZWZmaWNpZW50OiBudW1iZXIgKTogTm9kZSB7XHJcblxyXG4gIC8vIE5PVEU6IFVzZSBhIHN0YXRpYyBzdHJpbmcgaGVyZSBmb3IgJ3gnIGJlY2F1c2U6XHJcbiAgLy8gKDEpIGEgbmV3IFNvbHZlSXRSZXdhcmROb2RlIGlzIGluc3RhbnRpYXRlZCBlYWNoIHRpbWUgdGhlIGdhbWUgZGlzcGxheXMgYSByZXdhcmQsIHNvIHRoaXMgTm9kZSB3b3VsZCBuZWVkIHRvXHJcbiAgLy8gICAgIGJlIGRpc3Bvc2VkIHdoZW4gU29sdmVJdFJld2FyZE5vZGUgaXMgZGlzcG9zZWQsIGFuZFxyXG4gIC8vICgyKSB0aGUgaW1wbGVtZW50YXRpb24gb2YgUmV3YXJkTm9kZSBjb252ZXJ0cyB0aGUgTm9kZXMgdG8gSFRNTEltYWdlRWxlbWVudHMsIHdoaWNoIGFyZSByZW5kZXJlZCB3aXRoIENhbnZhcyxcclxuICAvLyAgICAgc28gdXBkYXRlcyB0byBFcXVhbGl0eUV4cGxvcmVyU3RyaW5ncy54U3RyaW5nUHJvcGVydHkgd291bGQgaGF2ZSBubyBhZmZlY3QuXHJcbiAgY29uc3Qgc3RyaW5nUHJvcGVydHkgPSBuZXcgU3RyaW5nUHJvcGVydHkoIEVxdWFsaXR5RXhwbG9yZXJTdHJpbmdzLnhTdHJpbmdQcm9wZXJ0eS52YWx1ZSApO1xyXG5cclxuICByZXR1cm4gVmFyaWFibGVUZXJtTm9kZS5jcmVhdGVJbnRlcmFjdGl2ZVRlcm1Ob2RlKCBGcmFjdGlvbi5mcm9tSW50ZWdlciggY29lZmZpY2llbnQgKSwgc3RyaW5nUHJvcGVydHksIHtcclxuICAgIGRpYW1ldGVyOiBESUFNRVRFUixcclxuICAgIGVxdWF0aW9uVGVybU5vZGVPcHRpb25zOiB7XHJcbiAgICAgIHNob3dPbmU6IHRydWUgLy8gc2hvdyBjb2VmZmljaWVudCBmb3IgJzF4J1xyXG4gICAgfVxyXG4gIH0gKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBjb25zdGFudCB0ZXJtIG5vZGUgd2l0aCBhIHNwZWNpZmllZCBpbnRlZ2VyIHZhbHVlLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlSW50ZWdlckNvbnN0YW50VGVybU5vZGUoIGNvbnN0YW50VmFsdWU6IG51bWJlciApOiBOb2RlIHtcclxuICByZXR1cm4gQ29uc3RhbnRUZXJtTm9kZS5jcmVhdGVJbnRlcmFjdGl2ZVRlcm1Ob2RlKCBGcmFjdGlvbi5mcm9tSW50ZWdlciggY29uc3RhbnRWYWx1ZSApLCB7XHJcbiAgICBkaWFtZXRlcjogRElBTUVURVJcclxuICB9ICk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgY29uc3RhbnQgdGVybSBub2RlIHdpdGggYSByYW5kb20gZnJhY3Rpb24gdmFsdWUuXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVGcmFjdGlvbkNvbnN0YW50VGVybU5vZGUoKTogTm9kZSB7XHJcbiAgY29uc3QgbnVtZXJhdG9yID0gQ2hhbGxlbmdlR2VuZXJhdG9yLnJhbmRvbVZhbHVlKCBJTlRFR0VSX1ZBTFVFUywgWyAwIF0gKTtcclxuICBjb25zdCBkZW5vbWluYXRvciA9IENoYWxsZW5nZUdlbmVyYXRvci5yYW5kb21WYWx1ZUJ5KCBJTlRFR0VSX1ZBTFVFUyxcclxuICAgIGRlbm9taW5hdG9yID0+ICggZGVub21pbmF0b3IgIT09IDAgKSAmJiAoIE1hdGguYWJzKCBkZW5vbWluYXRvciApICE9PSAxICkgJiYgKCBudW1lcmF0b3IgJSBkZW5vbWluYXRvciAhPT0gMCApXHJcbiAgKTtcclxuICBjb25zdCBjb25zdGFudFZhbHVlID0gbmV3IEZyYWN0aW9uKCBudW1lcmF0b3IsIGRlbm9taW5hdG9yICkucmVkdWNlZCgpO1xyXG4gIHJldHVybiBDb25zdGFudFRlcm1Ob2RlLmNyZWF0ZUludGVyYWN0aXZlVGVybU5vZGUoIGNvbnN0YW50VmFsdWUsIHtcclxuICAgIGRpYW1ldGVyOiBESUFNRVRFUlxyXG4gIH0gKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYW4gb3BlcmF0aW9uIG5vZGUgd2l0aCBhIHJhbmRvbSBvcGVyYXRvciBhbmQgYSByYW5kb20gcG9zaXRpdmUgaW50ZWdlciBvcGVyYW5kLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlT3BlcmF0aW9uTm9kZSgpOiBOb2RlIHtcclxuICBjb25zdCBvcGVyYXRvciA9IFVuaXZlcnNhbE9wZXJhdG9yLmdldFJhbmRvbSgpO1xyXG4gIGNvbnN0IGNvbnN0YW50VmFsdWUgPSBDaGFsbGVuZ2VHZW5lcmF0b3IucmFuZG9tVmFsdWVCeSggSU5URUdFUl9WQUxVRVMsIHZhbHVlID0+ICggdmFsdWUgPiAwICkgKTtcclxuICBjb25zdCBvcGVyYW5kID0gbmV3IENvbnN0YW50VGVybSggeyBjb25zdGFudFZhbHVlOiBGcmFjdGlvbi5mcm9tSW50ZWdlciggY29uc3RhbnRWYWx1ZSApIH0gKTtcclxuICBjb25zdCBvcGVyYXRpb24gPSBuZXcgVW5pdmVyc2FsT3BlcmF0aW9uKCBvcGVyYXRvciwgb3BlcmFuZCApO1xyXG4gIHJldHVybiBuZXcgVW5pdmVyc2FsT3BlcmF0aW9uTm9kZSggb3BlcmF0aW9uLCB7XHJcbiAgICBtYXhIZWlnaHQ6IERJQU1FVEVSXHJcbiAgfSApO1xyXG59XHJcblxyXG5lcXVhbGl0eUV4cGxvcmVyLnJlZ2lzdGVyKCAnU29sdmVJdFJld2FyZE5vZGUnLCBTb2x2ZUl0UmV3YXJkTm9kZSApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGNBQWMsTUFBTSx1Q0FBdUM7QUFDbEUsT0FBT0MsUUFBUSxNQUFNLDZDQUE2QztBQUNsRSxPQUFPQyxRQUFRLE1BQU0seUNBQXlDO0FBQzlELE9BQU9DLFFBQVEsTUFBTSx5Q0FBeUM7QUFDOUQsU0FBU0MsS0FBSyxRQUFjLG1DQUFtQztBQUMvRCxP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