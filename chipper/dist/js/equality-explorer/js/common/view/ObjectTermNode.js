// Copyright 2018-2022, University of Colorado Boulder

/**
 * Displays an ObjectTerm.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import optionize from '../../../../phet-core/js/optionize.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { HBox, Image, Node, Text } from '../../../../scenery/js/imports.js';
import EqualityExplorerConstants from '../EqualityExplorerConstants.js';
import TermNode from './TermNode.js';
import equalityExplorer from '../../equalityExplorer.js';
// constants
const DEFAULT_COEFFICIENT_FONT = new PhetFont(28);
const ICON_SCALE_MULTIPLIER = 0.7; // use this to adjust size of icon relative to coefficient

export default class ObjectTermNode extends TermNode {
  constructor(termCreator, term, providedOptions) {
    const contentNode = ObjectTermNode.createInteractiveTermNode(term.objectVariable.image, {
      maxHeight: term.diameter
    });
    const shadowNode = new Image(term.objectVariable.shadow, {
      maxHeight: term.diameter,
      opacity: EqualityExplorerConstants.SHADOW_OPACITY
    });
    super(termCreator, term, contentNode, shadowNode, providedOptions);
  }

  /**
   * Creates the representation of an ObjectTerm that the user interacts with.
   */
  static createInteractiveTermNode(image, providedOptions) {
    return new InteractiveTermNode(image, providedOptions); //TODO https://github.com/phetsims/equality-explorer/issues/200 dynamic
  }

  /**
   * Creates the representation of an ObjectTerm that is shown in equations.
   */
  static createEquationTermNode(coefficient, icon, providedOptions) {
    return new EquationTermNode(coefficient, icon, providedOptions); //TODO https://github.com/phetsims/equality-explorer/issues/200 dynamic
  }
}

/**
 * The representation of a term that the user interacts with, in this case the object type's icon.
 * No coefficient is shown because every ObjectTerm has an implicit coefficient of 1.
 */
class InteractiveTermNode extends Image {
  constructor(image, providedOptions) {
    const options = optionize()({
      // ImageOptions
      maxHeight: EqualityExplorerConstants.SMALL_TERM_DIAMETER
    }, providedOptions);
    super(image, options);
  }
}
/**
 * The representation of a term that is shown in equations.
 * Since every ObjectTerm has an implicit coefficient of 1, the coefficient is an integer.
 */
class EquationTermNode extends HBox {
  constructor(coefficient, icon, providedOptions) {
    const options = optionize()({
      // EquationTermNodeSelfOptions
      font: DEFAULT_COEFFICIENT_FONT,
      // HBoxOptions
      spacing: 2
    }, providedOptions);
    const coefficientText = new Text(coefficient, {
      font: options.font
    });
    const iconWrapper = new Node({
      children: [icon],
      scale: ICON_SCALE_MULTIPLIER * coefficientText.height / icon.height
    });
    options.children = [coefficientText, iconWrapper];
    super(options);
  }
}
equalityExplorer.register('ObjectTermNode', ObjectTermNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcHRpb25pemUiLCJQaGV0Rm9udCIsIkhCb3giLCJJbWFnZSIsIk5vZGUiLCJUZXh0IiwiRXF1YWxpdHlFeHBsb3JlckNvbnN0YW50cyIsIlRlcm1Ob2RlIiwiZXF1YWxpdHlFeHBsb3JlciIsIkRFRkFVTFRfQ09FRkZJQ0lFTlRfRk9OVCIsIklDT05fU0NBTEVfTVVMVElQTElFUiIsIk9iamVjdFRlcm1Ob2RlIiwiY29uc3RydWN0b3IiLCJ0ZXJtQ3JlYXRvciIsInRlcm0iLCJwcm92aWRlZE9wdGlvbnMiLCJjb250ZW50Tm9kZSIsImNyZWF0ZUludGVyYWN0aXZlVGVybU5vZGUiLCJvYmplY3RWYXJpYWJsZSIsImltYWdlIiwibWF4SGVpZ2h0IiwiZGlhbWV0ZXIiLCJzaGFkb3dOb2RlIiwic2hhZG93Iiwib3BhY2l0eSIsIlNIQURPV19PUEFDSVRZIiwiSW50ZXJhY3RpdmVUZXJtTm9kZSIsImNyZWF0ZUVxdWF0aW9uVGVybU5vZGUiLCJjb2VmZmljaWVudCIsImljb24iLCJFcXVhdGlvblRlcm1Ob2RlIiwib3B0aW9ucyIsIlNNQUxMX1RFUk1fRElBTUVURVIiLCJmb250Iiwic3BhY2luZyIsImNvZWZmaWNpZW50VGV4dCIsImljb25XcmFwcGVyIiwiY2hpbGRyZW4iLCJzY2FsZSIsImhlaWdodCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiT2JqZWN0VGVybU5vZGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTgtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogRGlzcGxheXMgYW4gT2JqZWN0VGVybS5cclxuICpcclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICovXHJcblxyXG5pbXBvcnQgb3B0aW9uaXplLCB7IEVtcHR5U2VsZk9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuaW1wb3J0IFN0cmljdE9taXQgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL1N0cmljdE9taXQuanMnO1xyXG5pbXBvcnQgUGhldEZvbnQgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1BoZXRGb250LmpzJztcclxuaW1wb3J0IHsgRm9udCwgSEJveCwgSEJveE9wdGlvbnMsIEltYWdlLCBJbWFnZU9wdGlvbnMsIE5vZGUsIFRleHQgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgRXF1YWxpdHlFeHBsb3JlckNvbnN0YW50cyBmcm9tICcuLi9FcXVhbGl0eUV4cGxvcmVyQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IFRlcm1Ob2RlLCB7IFRlcm1Ob2RlT3B0aW9ucyB9IGZyb20gJy4vVGVybU5vZGUuanMnO1xyXG5pbXBvcnQgZXF1YWxpdHlFeHBsb3JlciBmcm9tICcuLi8uLi9lcXVhbGl0eUV4cGxvcmVyLmpzJztcclxuaW1wb3J0IE9iamVjdFRlcm0gZnJvbSAnLi4vbW9kZWwvT2JqZWN0VGVybS5qcyc7XHJcbmltcG9ydCBPYmplY3RUZXJtQ3JlYXRvciBmcm9tICcuLi9tb2RlbC9PYmplY3RUZXJtQ3JlYXRvci5qcyc7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgREVGQVVMVF9DT0VGRklDSUVOVF9GT05UID0gbmV3IFBoZXRGb250KCAyOCApO1xyXG5jb25zdCBJQ09OX1NDQUxFX01VTFRJUExJRVIgPSAwLjc7IC8vIHVzZSB0aGlzIHRvIGFkanVzdCBzaXplIG9mIGljb24gcmVsYXRpdmUgdG8gY29lZmZpY2llbnRcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSBFbXB0eVNlbGZPcHRpb25zO1xyXG5cclxudHlwZSBPYmplY3RUZXJtTm9kZU9wdGlvbnMgPSBTZWxmT3B0aW9ucyAmIFRlcm1Ob2RlT3B0aW9ucztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9iamVjdFRlcm1Ob2RlIGV4dGVuZHMgVGVybU5vZGUge1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIHRlcm1DcmVhdG9yOiBPYmplY3RUZXJtQ3JlYXRvciwgdGVybTogT2JqZWN0VGVybSwgcHJvdmlkZWRPcHRpb25zPzogT2JqZWN0VGVybU5vZGVPcHRpb25zICkge1xyXG5cclxuICAgIGNvbnN0IGNvbnRlbnROb2RlID0gT2JqZWN0VGVybU5vZGUuY3JlYXRlSW50ZXJhY3RpdmVUZXJtTm9kZSggdGVybS5vYmplY3RWYXJpYWJsZS5pbWFnZSwge1xyXG4gICAgICBtYXhIZWlnaHQ6IHRlcm0uZGlhbWV0ZXJcclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCBzaGFkb3dOb2RlID0gbmV3IEltYWdlKCB0ZXJtLm9iamVjdFZhcmlhYmxlLnNoYWRvdywge1xyXG4gICAgICBtYXhIZWlnaHQ6IHRlcm0uZGlhbWV0ZXIsXHJcbiAgICAgIG9wYWNpdHk6IEVxdWFsaXR5RXhwbG9yZXJDb25zdGFudHMuU0hBRE9XX09QQUNJVFlcclxuICAgIH0gKTtcclxuXHJcbiAgICBzdXBlciggdGVybUNyZWF0b3IsIHRlcm0sIGNvbnRlbnROb2RlLCBzaGFkb3dOb2RlLCBwcm92aWRlZE9wdGlvbnMgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgdGhlIHJlcHJlc2VudGF0aW9uIG9mIGFuIE9iamVjdFRlcm0gdGhhdCB0aGUgdXNlciBpbnRlcmFjdHMgd2l0aC5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGNyZWF0ZUludGVyYWN0aXZlVGVybU5vZGUoIGltYWdlOiBIVE1MSW1hZ2VFbGVtZW50LCBwcm92aWRlZE9wdGlvbnM/OiBJbnRlcmFjdGl2ZVRlcm1Ob2RlT3B0aW9ucyApOiBOb2RlIHtcclxuICAgIHJldHVybiBuZXcgSW50ZXJhY3RpdmVUZXJtTm9kZSggaW1hZ2UsIHByb3ZpZGVkT3B0aW9ucyApOyAvL1RPRE8gaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL2VxdWFsaXR5LWV4cGxvcmVyL2lzc3Vlcy8yMDAgZHluYW1pY1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyB0aGUgcmVwcmVzZW50YXRpb24gb2YgYW4gT2JqZWN0VGVybSB0aGF0IGlzIHNob3duIGluIGVxdWF0aW9ucy5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGNyZWF0ZUVxdWF0aW9uVGVybU5vZGUoIGNvZWZmaWNpZW50OiBudW1iZXIsIGljb246IE5vZGUsIHByb3ZpZGVkT3B0aW9ucz86IEVxdWF0aW9uVGVybU5vZGVPcHRpb25zICk6IE5vZGUge1xyXG4gICAgcmV0dXJuIG5ldyBFcXVhdGlvblRlcm1Ob2RlKCBjb2VmZmljaWVudCwgaWNvbiwgcHJvdmlkZWRPcHRpb25zICk7IC8vVE9ETyBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvZXF1YWxpdHktZXhwbG9yZXIvaXNzdWVzLzIwMCBkeW5hbWljXHJcbiAgfVxyXG59XHJcblxyXG50eXBlIEludGVyYWN0aXZlVGVybU5vZGVTZWxmT3B0aW9ucyA9IEVtcHR5U2VsZk9wdGlvbnM7XHJcbnR5cGUgSW50ZXJhY3RpdmVUZXJtTm9kZU9wdGlvbnMgPSBJbnRlcmFjdGl2ZVRlcm1Ob2RlU2VsZk9wdGlvbnMgJiBJbWFnZU9wdGlvbnM7XHJcblxyXG4vKipcclxuICogVGhlIHJlcHJlc2VudGF0aW9uIG9mIGEgdGVybSB0aGF0IHRoZSB1c2VyIGludGVyYWN0cyB3aXRoLCBpbiB0aGlzIGNhc2UgdGhlIG9iamVjdCB0eXBlJ3MgaWNvbi5cclxuICogTm8gY29lZmZpY2llbnQgaXMgc2hvd24gYmVjYXVzZSBldmVyeSBPYmplY3RUZXJtIGhhcyBhbiBpbXBsaWNpdCBjb2VmZmljaWVudCBvZiAxLlxyXG4gKi9cclxuY2xhc3MgSW50ZXJhY3RpdmVUZXJtTm9kZSBleHRlbmRzIEltYWdlIHtcclxuICBwdWJsaWMgY29uc3RydWN0b3IoIGltYWdlOiBIVE1MSW1hZ2VFbGVtZW50LCBwcm92aWRlZE9wdGlvbnM/OiBJbnRlcmFjdGl2ZVRlcm1Ob2RlT3B0aW9ucyApIHtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPEludGVyYWN0aXZlVGVybU5vZGVPcHRpb25zLCBJbnRlcmFjdGl2ZVRlcm1Ob2RlU2VsZk9wdGlvbnMsIEltYWdlT3B0aW9ucz4oKSgge1xyXG5cclxuICAgICAgLy8gSW1hZ2VPcHRpb25zXHJcbiAgICAgIG1heEhlaWdodDogRXF1YWxpdHlFeHBsb3JlckNvbnN0YW50cy5TTUFMTF9URVJNX0RJQU1FVEVSXHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICBzdXBlciggaW1hZ2UsIG9wdGlvbnMgKTtcclxuICB9XHJcbn1cclxuXHJcbnR5cGUgRXF1YXRpb25UZXJtTm9kZVNlbGZPcHRpb25zID0ge1xyXG4gIGZvbnQ/OiBGb250O1xyXG59O1xyXG50eXBlIEVxdWF0aW9uVGVybU5vZGVPcHRpb25zID0gRXF1YXRpb25UZXJtTm9kZVNlbGZPcHRpb25zICYgU3RyaWN0T21pdDxIQm94T3B0aW9ucywgJ2NoaWxkcmVuJz47XHJcblxyXG4vKipcclxuICogVGhlIHJlcHJlc2VudGF0aW9uIG9mIGEgdGVybSB0aGF0IGlzIHNob3duIGluIGVxdWF0aW9ucy5cclxuICogU2luY2UgZXZlcnkgT2JqZWN0VGVybSBoYXMgYW4gaW1wbGljaXQgY29lZmZpY2llbnQgb2YgMSwgdGhlIGNvZWZmaWNpZW50IGlzIGFuIGludGVnZXIuXHJcbiAqL1xyXG5jbGFzcyBFcXVhdGlvblRlcm1Ob2RlIGV4dGVuZHMgSEJveCB7XHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBjb2VmZmljaWVudDogbnVtYmVyLCBpY29uOiBOb2RlLCBwcm92aWRlZE9wdGlvbnM/OiBFcXVhdGlvblRlcm1Ob2RlT3B0aW9ucyApIHtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPEVxdWF0aW9uVGVybU5vZGVPcHRpb25zLCBFcXVhdGlvblRlcm1Ob2RlU2VsZk9wdGlvbnMsIEhCb3hPcHRpb25zPigpKCB7XHJcblxyXG4gICAgICAvLyBFcXVhdGlvblRlcm1Ob2RlU2VsZk9wdGlvbnNcclxuICAgICAgZm9udDogREVGQVVMVF9DT0VGRklDSUVOVF9GT05ULFxyXG5cclxuICAgICAgLy8gSEJveE9wdGlvbnNcclxuICAgICAgc3BhY2luZzogMlxyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgY29uc3QgY29lZmZpY2llbnRUZXh0ID0gbmV3IFRleHQoIGNvZWZmaWNpZW50LCB7IGZvbnQ6IG9wdGlvbnMuZm9udCB9ICk7XHJcblxyXG4gICAgY29uc3QgaWNvbldyYXBwZXIgPSBuZXcgTm9kZSgge1xyXG4gICAgICBjaGlsZHJlbjogWyBpY29uIF0sXHJcbiAgICAgIHNjYWxlOiBJQ09OX1NDQUxFX01VTFRJUExJRVIgKiBjb2VmZmljaWVudFRleHQuaGVpZ2h0IC8gaWNvbi5oZWlnaHRcclxuICAgIH0gKTtcclxuXHJcbiAgICBvcHRpb25zLmNoaWxkcmVuID0gWyBjb2VmZmljaWVudFRleHQsIGljb25XcmFwcGVyIF07XHJcblxyXG4gICAgc3VwZXIoIG9wdGlvbnMgKTtcclxuICB9XHJcbn1cclxuXHJcbmVxdWFsaXR5RXhwbG9yZXIucmVnaXN0ZXIoICdPYmplY3RUZXJtTm9kZScsIE9iamVjdFRlcm1Ob2RlICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFNBQVMsTUFBNEIsdUNBQXVDO0FBRW5GLE9BQU9DLFFBQVEsTUFBTSx5Q0FBeUM7QUFDOUQsU0FBZUMsSUFBSSxFQUFlQyxLQUFLLEVBQWdCQyxJQUFJLEVBQUVDLElBQUksUUFBUSxtQ0FBbUM7QUFDNUcsT0FBT0MseUJBQXlCLE1BQU0saUNBQWlDO0FBQ3ZFLE9BQU9DLFFBQVEsTUFBMkIsZUFBZTtBQUN6RCxPQUFPQyxnQkFBZ0IsTUFBTSwyQkFBMkI7QUFJeEQ7QUFDQSxNQUFNQyx3QkFBd0IsR0FBRyxJQUFJUixRQUFRLENBQUUsRUFBRyxDQUFDO0FBQ25ELE1B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