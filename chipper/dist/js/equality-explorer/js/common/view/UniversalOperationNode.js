// Copyright 2018-2022, University of Colorado Boulder

/**
 * Displays an operation.
 * Used in the animation that occurs when the universal operation 'go' button is pressed.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import optionize from '../../../../phet-core/js/optionize.js';
import { HBox, Text } from '../../../../scenery/js/imports.js';
import equalityExplorer from '../../equalityExplorer.js';
import EqualityExplorerConstants from '../EqualityExplorerConstants.js';
import ConstantTerm from '../model/ConstantTerm.js';
import VariableTerm from '../model/VariableTerm.js';
import ConstantTermNode from './ConstantTermNode.js';
import VariableTermNode from './VariableTermNode.js';
export default class UniversalOperationNode extends HBox {
  constructor(operation, providedOptions) {
    const options = optionize()({
      // HBoxOptions
      spacing: 4
    }, providedOptions);
    const operatorNode = UniversalOperationNode.createOperatorNode(operation.operator);

    // If operandNode involves a variable, it is linked to a translated StringProperty and must be disposed.
    const operandNode = UniversalOperationNode.createOperandNode(operation.operand);
    assert && assert(!options.children, 'UniversalOperationNode sets children');
    options.children = [operatorNode, operandNode];
    super(options);
    this.disposeUniversalOperationNode = () => {
      operandNode.dispose();
    };
  }
  dispose() {
    this.disposeUniversalOperationNode();
    super.dispose();
  }

  /**
   * Creates the view for a universal operator.
   */
  static createOperatorNode(operator) {
    return new Text(operator.symbol, {
      font: EqualityExplorerConstants.UNIVERSAL_OPERATION_INTEGER_FONT
    });
  }

  /**
   * Creates the view for a universal operand.
   */
  static createOperandNode(operand) {
    let operandNode = null;
    if (operand instanceof ConstantTerm) {
      operandNode = ConstantTermNode.createEquationTermNode(operand.constantValue, {
        integerFont: EqualityExplorerConstants.UNIVERSAL_OPERATION_INTEGER_FONT,
        fractionFont: EqualityExplorerConstants.UNIVERSAL_OPERATION_FRACTION_FONT
      });
    } else if (operand instanceof VariableTerm) {
      operandNode = VariableTermNode.createEquationTermNode(operand.coefficient, operand.variable.symbolProperty, {
        symbolFont: EqualityExplorerConstants.UNIVERSAL_OPERATION_SYMBOL_FONT,
        integerFont: EqualityExplorerConstants.UNIVERSAL_OPERATION_INTEGER_FONT,
        fractionFont: EqualityExplorerConstants.UNIVERSAL_OPERATION_FRACTION_FONT,
        maxWidth: 50 // determined empirically
      });
    } else {
      throw new Error(`unsupported operand type: ${operand}`);
    }
    return operandNode;
  }
}
equalityExplorer.register('UniversalOperationNode', UniversalOperationNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcHRpb25pemUiLCJIQm94IiwiVGV4dCIsImVxdWFsaXR5RXhwbG9yZXIiLCJFcXVhbGl0eUV4cGxvcmVyQ29uc3RhbnRzIiwiQ29uc3RhbnRUZXJtIiwiVmFyaWFibGVUZXJtIiwiQ29uc3RhbnRUZXJtTm9kZSIsIlZhcmlhYmxlVGVybU5vZGUiLCJVbml2ZXJzYWxPcGVyYXRpb25Ob2RlIiwiY29uc3RydWN0b3IiLCJvcGVyYXRpb24iLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwic3BhY2luZyIsIm9wZXJhdG9yTm9kZSIsImNyZWF0ZU9wZXJhdG9yTm9kZSIsIm9wZXJhdG9yIiwib3BlcmFuZE5vZGUiLCJjcmVhdGVPcGVyYW5kTm9kZSIsIm9wZXJhbmQiLCJhc3NlcnQiLCJjaGlsZHJlbiIsImRpc3Bvc2VVbml2ZXJzYWxPcGVyYXRpb25Ob2RlIiwiZGlzcG9zZSIsInN5bWJvbCIsImZvbnQiLCJVTklWRVJTQUxfT1BFUkFUSU9OX0lOVEVHRVJfRk9OVCIsImNyZWF0ZUVxdWF0aW9uVGVybU5vZGUiLCJjb25zdGFudFZhbHVlIiwiaW50ZWdlckZvbnQiLCJmcmFjdGlvbkZvbnQiLCJVTklWRVJTQUxfT1BFUkFUSU9OX0ZSQUNUSU9OX0ZPTlQiLCJjb2VmZmljaWVudCIsInZhcmlhYmxlIiwic3ltYm9sUHJvcGVydHkiLCJzeW1ib2xGb250IiwiVU5JVkVSU0FMX09QRVJBVElPTl9TWU1CT0xfRk9OVCIsIm1heFdpZHRoIiwiRXJyb3IiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlVuaXZlcnNhbE9wZXJhdGlvbk5vZGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTgtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogRGlzcGxheXMgYW4gb3BlcmF0aW9uLlxyXG4gKiBVc2VkIGluIHRoZSBhbmltYXRpb24gdGhhdCBvY2N1cnMgd2hlbiB0aGUgdW5pdmVyc2FsIG9wZXJhdGlvbiAnZ28nIGJ1dHRvbiBpcyBwcmVzc2VkLlxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCBvcHRpb25pemUsIHsgRW1wdHlTZWxmT3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgUGlja09wdGlvbmFsIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9QaWNrT3B0aW9uYWwuanMnO1xyXG5pbXBvcnQgeyBIQm94LCBIQm94T3B0aW9ucywgTm9kZSwgTm9kZVRyYW5zbGF0aW9uT3B0aW9ucywgVGV4dCB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBlcXVhbGl0eUV4cGxvcmVyIGZyb20gJy4uLy4uL2VxdWFsaXR5RXhwbG9yZXIuanMnO1xyXG5pbXBvcnQgRXF1YWxpdHlFeHBsb3JlckNvbnN0YW50cyBmcm9tICcuLi9FcXVhbGl0eUV4cGxvcmVyQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IENvbnN0YW50VGVybSBmcm9tICcuLi9tb2RlbC9Db25zdGFudFRlcm0uanMnO1xyXG5pbXBvcnQgVW5pdmVyc2FsT3BlcmF0aW9uLCB7IFVuaXZlcnNhbE9wZXJhbmQgfSBmcm9tICcuLi9tb2RlbC9Vbml2ZXJzYWxPcGVyYXRpb24uanMnO1xyXG5pbXBvcnQgVW5pdmVyc2FsT3BlcmF0b3IgZnJvbSAnLi4vbW9kZWwvVW5pdmVyc2FsT3BlcmF0b3IuanMnO1xyXG5pbXBvcnQgVmFyaWFibGVUZXJtIGZyb20gJy4uL21vZGVsL1ZhcmlhYmxlVGVybS5qcyc7XHJcbmltcG9ydCBDb25zdGFudFRlcm1Ob2RlIGZyb20gJy4vQ29uc3RhbnRUZXJtTm9kZS5qcyc7XHJcbmltcG9ydCBWYXJpYWJsZVRlcm1Ob2RlIGZyb20gJy4vVmFyaWFibGVUZXJtTm9kZS5qcyc7XHJcblxyXG50eXBlIFNlbGZPcHRpb25zID0gRW1wdHlTZWxmT3B0aW9ucztcclxuXHJcbnR5cGUgVW5pdmVyc2FsT3BlcmF0aW9uTm9kZU9wdGlvbnMgPSBTZWxmT3B0aW9ucyAmIE5vZGVUcmFuc2xhdGlvbk9wdGlvbnMgJiBQaWNrT3B0aW9uYWw8SEJveE9wdGlvbnMsICdtYXhIZWlnaHQnPjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVuaXZlcnNhbE9wZXJhdGlvbk5vZGUgZXh0ZW5kcyBIQm94IHtcclxuXHJcbiAgcHJpdmF0ZSByZWFkb25seSBkaXNwb3NlVW5pdmVyc2FsT3BlcmF0aW9uTm9kZTogKCkgPT4gdm9pZDtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBvcGVyYXRpb246IFVuaXZlcnNhbE9wZXJhdGlvbiwgcHJvdmlkZWRPcHRpb25zPzogVW5pdmVyc2FsT3BlcmF0aW9uTm9kZU9wdGlvbnMgKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxVbml2ZXJzYWxPcGVyYXRpb25Ob2RlT3B0aW9ucywgU2VsZk9wdGlvbnMsIEhCb3hPcHRpb25zPigpKCB7XHJcblxyXG4gICAgICAvLyBIQm94T3B0aW9uc1xyXG4gICAgICBzcGFjaW5nOiA0XHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICBjb25zdCBvcGVyYXRvck5vZGUgPSBVbml2ZXJzYWxPcGVyYXRpb25Ob2RlLmNyZWF0ZU9wZXJhdG9yTm9kZSggb3BlcmF0aW9uLm9wZXJhdG9yICk7XHJcblxyXG4gICAgLy8gSWYgb3BlcmFuZE5vZGUgaW52b2x2ZXMgYSB2YXJpYWJsZSwgaXQgaXMgbGlua2VkIHRvIGEgdHJhbnNsYXRlZCBTdHJpbmdQcm9wZXJ0eSBhbmQgbXVzdCBiZSBkaXNwb3NlZC5cclxuICAgIGNvbnN0IG9wZXJhbmROb2RlID0gVW5pdmVyc2FsT3BlcmF0aW9uTm9kZS5jcmVhdGVPcGVyYW5kTm9kZSggb3BlcmF0aW9uLm9wZXJhbmQgKTtcclxuXHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhb3B0aW9ucy5jaGlsZHJlbiwgJ1VuaXZlcnNhbE9wZXJhdGlvbk5vZGUgc2V0cyBjaGlsZHJlbicgKTtcclxuICAgIG9wdGlvbnMuY2hpbGRyZW4gPSBbIG9wZXJhdG9yTm9kZSwgb3BlcmFuZE5vZGUgXTtcclxuXHJcbiAgICBzdXBlciggb3B0aW9ucyApO1xyXG5cclxuICAgIHRoaXMuZGlzcG9zZVVuaXZlcnNhbE9wZXJhdGlvbk5vZGUgPSAoKSA9PiB7XHJcbiAgICAgIG9wZXJhbmROb2RlLmRpc3Bvc2UoKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb3ZlcnJpZGUgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgIHRoaXMuZGlzcG9zZVVuaXZlcnNhbE9wZXJhdGlvbk5vZGUoKTtcclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgdGhlIHZpZXcgZm9yIGEgdW5pdmVyc2FsIG9wZXJhdG9yLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgY3JlYXRlT3BlcmF0b3JOb2RlKCBvcGVyYXRvcjogVW5pdmVyc2FsT3BlcmF0b3IgKTogTm9kZSB7XHJcbiAgICByZXR1cm4gbmV3IFRleHQoIG9wZXJhdG9yLnN5bWJvbCwge1xyXG4gICAgICBmb250OiBFcXVhbGl0eUV4cGxvcmVyQ29uc3RhbnRzLlVOSVZFUlNBTF9PUEVSQVRJT05fSU5URUdFUl9GT05UXHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIHRoZSB2aWV3IGZvciBhIHVuaXZlcnNhbCBvcGVyYW5kLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgY3JlYXRlT3BlcmFuZE5vZGUoIG9wZXJhbmQ6IFVuaXZlcnNhbE9wZXJhbmQgKTogTm9kZSB7XHJcblxyXG4gICAgbGV0IG9wZXJhbmROb2RlID0gbnVsbDtcclxuXHJcbiAgICBpZiAoIG9wZXJhbmQgaW5zdGFuY2VvZiBDb25zdGFudFRlcm0gKSB7XHJcbiAgICAgIG9wZXJhbmROb2RlID0gQ29uc3RhbnRUZXJtTm9kZS5jcmVhdGVFcXVhdGlvblRlcm1Ob2RlKCBvcGVyYW5kLmNvbnN0YW50VmFsdWUsIHtcclxuICAgICAgICBpbnRlZ2VyRm9udDogRXF1YWxpdHlFeHBsb3JlckNvbnN0YW50cy5VTklWRVJTQUxfT1BFUkFUSU9OX0lOVEVHRVJfRk9OVCxcclxuICAgICAgICBmcmFjdGlvbkZvbnQ6IEVxdWFsaXR5RXhwbG9yZXJDb25zdGFudHMuVU5JVkVSU0FMX09QRVJBVElPTl9GUkFDVElPTl9GT05UXHJcbiAgICAgIH0gKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKCBvcGVyYW5kIGluc3RhbmNlb2YgVmFyaWFibGVUZXJtICkge1xyXG4gICAgICBvcGVyYW5kTm9kZSA9IFZhcmlhYmxlVGVybU5vZGUuY3JlYXRlRXF1YXRpb25UZXJtTm9kZSggb3BlcmFuZC5jb2VmZmljaWVudCwgb3BlcmFuZC52YXJpYWJsZS5zeW1ib2xQcm9wZXJ0eSwge1xyXG4gICAgICAgIHN5bWJvbEZvbnQ6IEVxdWFsaXR5RXhwbG9yZXJDb25zdGFudHMuVU5JVkVSU0FMX09QRVJBVElPTl9TWU1CT0xfRk9OVCxcclxuICAgICAgICBpbnRlZ2VyRm9udDogRXF1YWxpdHlFeHBsb3JlckNvbnN0YW50cy5VTklWRVJTQUxfT1BFUkFUSU9OX0lOVEVHRVJfRk9OVCxcclxuICAgICAgICBmcmFjdGlvbkZvbnQ6IEVxdWFsaXR5RXhwbG9yZXJDb25zdGFudHMuVU5JVkVSU0FMX09QRVJBVElPTl9GUkFDVElPTl9GT05ULFxyXG4gICAgICAgIG1heFdpZHRoOiA1MCAvLyBkZXRlcm1pbmVkIGVtcGlyaWNhbGx5XHJcbiAgICAgIH0gKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoIGB1bnN1cHBvcnRlZCBvcGVyYW5kIHR5cGU6ICR7b3BlcmFuZH1gICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG9wZXJhbmROb2RlO1xyXG4gIH1cclxufVxyXG5cclxuZXF1YWxpdHlFeHBsb3Jlci5yZWdpc3RlciggJ1VuaXZlcnNhbE9wZXJhdGlvbk5vZGUnLCBVbml2ZXJzYWxPcGVyYXRpb25Ob2RlICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsU0FBUyxNQUE0Qix1Q0FBdUM7QUFFbkYsU0FBU0MsSUFBSSxFQUE2Q0MsSUFBSSxRQUFRLG1DQUFtQztBQUN6RyxPQUFPQyxnQkFBZ0IsTUFBTSwyQkFBMkI7QUFDeEQsT0FBT0MseUJBQXlCLE1BQU0saUNBQWlDO0FBQ3ZFLE9BQU9DLFlBQVksTUFBTSwwQkFBMEI7QUFHbkQsT0FBT0MsWUFBWSxNQUFNLDBCQUEwQjtBQUNuRCxPQUFPQyxnQkFBZ0IsTUFBTSx1QkFBdUI7QUFDcEQsT0FBT0MsZ0JBQWdCLE1BQU0sdUJBQXVCO0FBTXBELGVBQWUsTUFBTUMsc0JBQXNCLFNBQVNSLElBQUksQ0FBQztFQUloRFMsV0FBV0EsQ0FBRUMsU0FBNkIsRUFBRUMsZUFBK0MsRUFBRztJQUVuRyxNQUFNQyxPQUFPLEdBQUdiLFNBQVMsQ0FBMEQsQ0FBQyxDQUFFO01BRXBGO01BQ0FjLE9BQU8sRUFBRTtJQUNYLENBQUMsRUFBRUYsZUFBZ0IsQ0FBQztJQUVwQixNQUFNRyxZQUFZLEdBQUdOLHNCQUFzQixDQUFDTyxrQkFBa0IsQ0FBRUwsU0FBUyxDQUFDTSxRQUFTLENBQUM7O0lBRXBGO0lBQ0EsTUFBTUMsV0FBVyxHQUFHVCxzQkFBc0IsQ0FBQ1UsaUJBQWlCLENBQUVSLFNBQVMsQ0FBQ1MsT0FBUSxDQUFDO0lBRWpGQyxNQUFNLElBQUlBLE1BQU0sQ0FBRSxDQUFDUixPQUFPLENBQUNTLFFBQVEsRUFBRSxzQ0FBdUMsQ0FBQztJQUM3RVQsT0FBTyxDQUFDUyxRQUFRLEdBQUcsQ0FBRVAsWUFBWSxFQUFFRyxXQUFXLENBQUU7SUFFaEQsS0FBSyxDQUFFTCxPQUFRLENBQUM7SUFFaEIsSUFBSSxDQUFDVSw2QkFBNkIsR0FBRyxNQUFNO01BQ3pDTCxXQUFXLENBQUNNLE9BQU8sQ0FBQyxDQUFDO0lBQ3ZCLENBQUM7RUFDSDtFQUVnQkEsT0FBT0EsQ0FBQSxFQUFTO0lBQzlCLElBQUksQ0FBQ0QsNkJBQTZCLENBQUMsQ0FBQztJQUNwQyxLQUFLLENBQUNDLE9BQU8sQ0FBQyxDQUFDO0VBQ2pCOztFQUVBO0FBQ0Y7QUFDQTtFQUNFLE9BQWNSLGtCQUFrQkEsQ0FBRUMsUUFBMkIsRUFBUztJQUNwRSxPQUFPLElBQUlmLElBQUksQ0FBRWUsUUFBUSxDQUFDUSxNQUFNLEVBQUU7TUFDaENDLElBQUksRUFBRXRCLHlCQUF5QixDQUFDdUI7SUFDbEMsQ0FBRSxDQUFDO0VBQ0w7O0VBRUE7QUFDRjtBQUNBO0VBQ0UsT0FBY1IsaUJBQWlCQSxDQUFFQyxPQUF5QixFQUFTO0lBRWpFLElBQUlGLFdBQVcsR0FBRyxJQUFJO0lBRXRCLElBQUtFLE9BQU8sWUFBWWYsWUFBWSxFQUFHO01BQ3JDYSxXQUFXLEdBQUdYLGdCQUFnQixDQUFDcUIsc0JBQXNCLENBQUVSLE9BQU8sQ0FBQ1MsYUFBYSxFQUFFO1FBQzVFQyxXQUFXLEVBQUUxQix5QkFBeUIsQ0FBQ3VCLGdDQUFnQztRQUN2RUksWUFBWSxFQUFFM0IseUJBQXlCLENBQUM0QjtNQUMxQyxDQUFFLENBQUM7SUFDTCxDQUFDLE1BQ0ksSUFBS1osT0FBTyxZQUFZZCxZQUFZLEVBQUc7TUFDMUNZLFdBQVcsR0FBR1YsZ0JBQWdCLENBQUNvQixzQkFBc0IsQ0FBRVIsT0FBTyxDQUFDYSxXQUFXLEVBQUViLE9BQU8sQ0FBQ2MsUUFBUSxDQUFDQyxjQUFjLEVBQUU7UUFDM0dDLFVBQVUsRUFBRWhDLHlCQUF5QixDQUFDaUMsK0JBQStCO1FBQ3JFUCxXQUFXLEVBQUUxQix5QkFBeUIsQ0FBQ3VCLGdDQUFnQztRQUN2RUksWUFBWSxFQUFFM0IseUJBQXlCLENBQUM0QixpQ0FBaUM7UUFDekVNLFFBQVEsRUFBRSxFQUFFLENBQUM7TUFDZixDQUFFLENBQUM7SUFDTCxDQUFDLE1BQ0k7TUFDSCxNQUFNLElBQUlDLEtBQUssQ0FBRyw2QkFBNEJuQixPQUFRLEVBQUUsQ0FBQztJQUMzRDtJQUVBLE9BQU9GLFdBQVc7RUFDcEI7QUFDRjtBQUVBZixnQkFBZ0IsQ0FBQ3FDLFFBQVEsQ0FBRSx3QkFBd0IsRUFBRS9CLHNCQUF1QixDQUFDIn0=