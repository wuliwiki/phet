// Copyright 2018-2022, University of Colorado Boulder

/**
 * Displays a constant term.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { Circle, Node } from '../../../../scenery/js/imports.js';
import equalityExplorer from '../../equalityExplorer.js';
import EqualityExplorerColors from '../EqualityExplorerColors.js';
import EqualityExplorerConstants from '../EqualityExplorerConstants.js';
import ReducedFractionNode from './ReducedFractionNode.js';
import TermNode from './TermNode.js';
import optionize, { combineOptions } from '../../../../phet-core/js/optionize.js';
export default class ConstantTermNode extends TermNode {
  constructor(termCreator, term, providedOptions) {
    const options = optionize()({
      // empty optionize call because we access options.interactiveTermNodeOptions below
    }, providedOptions);
    const contentNode = ConstantTermNode.createInteractiveTermNode(term.constantValue, combineOptions({}, options.interactiveTermNodeOptions, {
      diameter: term.diameter
    }));
    const shadowNode = new Circle(term.diameter / 2, {
      fill: 'black',
      opacity: EqualityExplorerConstants.SHADOW_OPACITY
    });
    super(termCreator, term, contentNode, shadowNode, options);
  }

  /**
   * Creates the representation of a term that the user interacts with.
   */
  static createInteractiveTermNode(constantValue, providedOptions) {
    return new InteractiveTermNode(constantValue, providedOptions); //TODO https://github.com/phetsims/equality-explorer/issues/200 dynamic
  }

  /**
   * Creates the representation of a term that is shown in equations.
   */
  static createEquationTermNode(constantValue, providedOptions) {
    return new EquationTermNode(constantValue, providedOptions); //TODO https://github.com/phetsims/equality-explorer/issues/200 dynamic
  }
}

/**
 * The representation of a term that is shown in equations, a reduced fraction.
 */
class EquationTermNode extends ReducedFractionNode {
  constructor(constantValue, providedOptions) {
    assert && assert(constantValue.isReduced(), `constantValue must be reduced: ${constantValue}`);
    const options = optionize()({
      // ReducedFractionNodeOptions
      integerFont: new PhetFont(40),
      fractionFont: new PhetFont(20)
    }, providedOptions);
    super(constantValue, options);
  }
}

/**
 * The representation of a term that the user interacts with, in this case a number inside a circle.
 */
class InteractiveTermNode extends Node {
  constructor(constantValue, providedOptions) {
    assert && assert(constantValue.isReduced(), `constantValue must be reduced: ${constantValue}`);
    const options = optionize()({
      // InteractiveTermNodeSelfOptions
      diameter: EqualityExplorerConstants.SMALL_TERM_DIAMETER,
      margin: 8,
      positiveFill: EqualityExplorerColors.POSITIVE_CONSTANT_FILL,
      negativeFill: EqualityExplorerColors.NEGATIVE_CONSTANT_FILL,
      positiveLineDash: [],
      negativeLineDash: [3, 3]
    }, providedOptions);
    const isPositive = constantValue.getValue() >= 0;

    // background circle
    const circleNode = new Circle(options.diameter / 2, {
      stroke: 'black',
      fill: isPositive ? options.positiveFill : options.negativeFill,
      lineDash: isPositive ? options.positiveLineDash : options.negativeLineDash
    });

    // constant value
    const margin = 0.18 * options.diameter; // determined empirically
    const equationTermNode = ConstantTermNode.createEquationTermNode(constantValue, combineOptions({}, options.equationTermNodeOptions, {
      maxWidth: circleNode.width - 2 * margin,
      maxHeight: circleNode.height - 2 * margin
    }));
    equationTermNode.boundsProperty.link(bounds => {
      equationTermNode.center = circleNode.center;
    });
    options.children = [circleNode, equationTermNode];
    super(options);
  }
}
equalityExplorer.register('ConstantTermNode', ConstantTermNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQaGV0Rm9udCIsIkNpcmNsZSIsIk5vZGUiLCJlcXVhbGl0eUV4cGxvcmVyIiwiRXF1YWxpdHlFeHBsb3JlckNvbG9ycyIsIkVxdWFsaXR5RXhwbG9yZXJDb25zdGFudHMiLCJSZWR1Y2VkRnJhY3Rpb25Ob2RlIiwiVGVybU5vZGUiLCJvcHRpb25pemUiLCJjb21iaW5lT3B0aW9ucyIsIkNvbnN0YW50VGVybU5vZGUiLCJjb25zdHJ1Y3RvciIsInRlcm1DcmVhdG9yIiwidGVybSIsInByb3ZpZGVkT3B0aW9ucyIsIm9wdGlvbnMiLCJjb250ZW50Tm9kZSIsImNyZWF0ZUludGVyYWN0aXZlVGVybU5vZGUiLCJjb25zdGFudFZhbHVlIiwiaW50ZXJhY3RpdmVUZXJtTm9kZU9wdGlvbnMiLCJkaWFtZXRlciIsInNoYWRvd05vZGUiLCJmaWxsIiwib3BhY2l0eSIsIlNIQURPV19PUEFDSVRZIiwiSW50ZXJhY3RpdmVUZXJtTm9kZSIsImNyZWF0ZUVxdWF0aW9uVGVybU5vZGUiLCJFcXVhdGlvblRlcm1Ob2RlIiwiYXNzZXJ0IiwiaXNSZWR1Y2VkIiwiaW50ZWdlckZvbnQiLCJmcmFjdGlvbkZvbnQiLCJTTUFMTF9URVJNX0RJQU1FVEVSIiwibWFyZ2luIiwicG9zaXRpdmVGaWxsIiwiUE9TSVRJVkVfQ09OU1RBTlRfRklMTCIsIm5lZ2F0aXZlRmlsbCIsIk5FR0FUSVZFX0NPTlNUQU5UX0ZJTEwiLCJwb3NpdGl2ZUxpbmVEYXNoIiwibmVnYXRpdmVMaW5lRGFzaCIsImlzUG9zaXRpdmUiLCJnZXRWYWx1ZSIsImNpcmNsZU5vZGUiLCJzdHJva2UiLCJsaW5lRGFzaCIsImVxdWF0aW9uVGVybU5vZGUiLCJlcXVhdGlvblRlcm1Ob2RlT3B0aW9ucyIsIm1heFdpZHRoIiwid2lkdGgiLCJtYXhIZWlnaHQiLCJoZWlnaHQiLCJib3VuZHNQcm9wZXJ0eSIsImxpbmsiLCJib3VuZHMiLCJjZW50ZXIiLCJjaGlsZHJlbiIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiQ29uc3RhbnRUZXJtTm9kZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOC0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBEaXNwbGF5cyBhIGNvbnN0YW50IHRlcm0uXHJcbiAqXHJcbiAqIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXHJcbiAqL1xyXG5cclxuaW1wb3J0IFN0cmljdE9taXQgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL1N0cmljdE9taXQuanMnO1xyXG5pbXBvcnQgRnJhY3Rpb24gZnJvbSAnLi4vLi4vLi4vLi4vcGhldGNvbW1vbi9qcy9tb2RlbC9GcmFjdGlvbi5qcyc7XHJcbmltcG9ydCBQaGV0Rm9udCBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvUGhldEZvbnQuanMnO1xyXG5pbXBvcnQgeyBDaXJjbGUsIE5vZGUsIE5vZGVPcHRpb25zLCBUQ29sb3IgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgZXF1YWxpdHlFeHBsb3JlciBmcm9tICcuLi8uLi9lcXVhbGl0eUV4cGxvcmVyLmpzJztcclxuaW1wb3J0IEVxdWFsaXR5RXhwbG9yZXJDb2xvcnMgZnJvbSAnLi4vRXF1YWxpdHlFeHBsb3JlckNvbG9ycy5qcyc7XHJcbmltcG9ydCBFcXVhbGl0eUV4cGxvcmVyQ29uc3RhbnRzIGZyb20gJy4uL0VxdWFsaXR5RXhwbG9yZXJDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgQ29uc3RhbnRUZXJtIGZyb20gJy4uL21vZGVsL0NvbnN0YW50VGVybS5qcyc7XHJcbmltcG9ydCBDb25zdGFudFRlcm1DcmVhdG9yIGZyb20gJy4uL21vZGVsL0NvbnN0YW50VGVybUNyZWF0b3IuanMnO1xyXG5pbXBvcnQgUmVkdWNlZEZyYWN0aW9uTm9kZSwgeyBSZWR1Y2VkRnJhY3Rpb25Ob2RlT3B0aW9ucyB9IGZyb20gJy4vUmVkdWNlZEZyYWN0aW9uTm9kZS5qcyc7XHJcbmltcG9ydCBUZXJtTm9kZSwgeyBUZXJtTm9kZU9wdGlvbnMgfSBmcm9tICcuL1Rlcm1Ob2RlLmpzJztcclxuaW1wb3J0IG9wdGlvbml6ZSwgeyBjb21iaW5lT3B0aW9ucywgRW1wdHlTZWxmT3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgUGlja09wdGlvbmFsIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9QaWNrT3B0aW9uYWwuanMnO1xyXG5cclxudHlwZSBFcXVhdGlvblRlcm1Ob2RlU2VsZk9wdGlvbnMgPSBFbXB0eVNlbGZPcHRpb25zO1xyXG5cclxudHlwZSBFcXVhdGlvblRlcm1Ob2RlT3B0aW9ucyA9IEVxdWF0aW9uVGVybU5vZGVTZWxmT3B0aW9ucyAmXHJcbiAgUGlja09wdGlvbmFsPFJlZHVjZWRGcmFjdGlvbk5vZGVPcHRpb25zLCAnaW50ZWdlckZvbnQnIHwgJ2ZyYWN0aW9uRm9udCcgfCAnbWF4V2lkdGgnIHwgJ21heEhlaWdodCc+O1xyXG5cclxudHlwZSBJbnRlcmFjdGl2ZVRlcm1Ob2RlU2VsZk9wdGlvbnMgPSB7XHJcbiAgZGlhbWV0ZXI/OiBudW1iZXI7XHJcbiAgbWFyZ2luPzogbnVtYmVyIHwgbnVsbDsgLy8gbWFyZ2luLCBkZXRlcm1pbmVkIGVtcGlyaWNhbGx5IGlmIG51bGxcclxuICBwb3NpdGl2ZUZpbGw/OiBUQ29sb3I7IC8vIGZpbGwgb2YgYmFja2dyb3VuZCBjaXJjbGUgZm9yIHBvc2l0aXZlIGNvZWZmaWNpZW50XHJcbiAgbmVnYXRpdmVGaWxsPzogVENvbG9yOyAvLyBmaWxsIG9mIGJhY2tncm91bmQgY2lyY2xlIGZvciBuZWdhdGl2ZSBjb2VmZmljaWVudFxyXG4gIHBvc2l0aXZlTGluZURhc2g/OiBudW1iZXJbXTsgLy8gbGluZURhc2ggZm9yIHBvc2l0aXZlIGNvZWZmaWNpZW50XHJcbiAgbmVnYXRpdmVMaW5lRGFzaD86IG51bWJlcltdOyAvLyBsaW5lRGFzaCBmb3IgbmVnYXRpdmUgY29lZmZpY2llbnRcclxuICBlcXVhdGlvblRlcm1Ob2RlT3B0aW9ucz86IEVxdWF0aW9uVGVybU5vZGVPcHRpb25zOyAvLyBwcm9wYWdhdGVkIHRvIEVxdWF0aW9uVGVybU5vZGVcclxufTtcclxuXHJcbnR5cGUgSW50ZXJhY3RpdmVUZXJtTm9kZU9wdGlvbnMgPSBJbnRlcmFjdGl2ZVRlcm1Ob2RlU2VsZk9wdGlvbnM7XHJcblxyXG50eXBlIFNlbGZPcHRpb25zID0ge1xyXG4gIGludGVyYWN0aXZlVGVybU5vZGVPcHRpb25zPzogU3RyaWN0T21pdDxJbnRlcmFjdGl2ZVRlcm1Ob2RlT3B0aW9ucywgJ2RpYW1ldGVyJz47IC8vIHByb3BhZ2F0ZWQgdG8gSW50ZXJhY3RpdmVUZXJtTm9kZVxyXG59O1xyXG5cclxudHlwZSBDb25zdGFudFRlcm1Ob2RlT3B0aW9ucyA9IFNlbGZPcHRpb25zICYgVGVybU5vZGVPcHRpb25zO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29uc3RhbnRUZXJtTm9kZSBleHRlbmRzIFRlcm1Ob2RlIHtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCB0ZXJtQ3JlYXRvcjogQ29uc3RhbnRUZXJtQ3JlYXRvciwgdGVybTogQ29uc3RhbnRUZXJtLCBwcm92aWRlZE9wdGlvbnM/OiBDb25zdGFudFRlcm1Ob2RlT3B0aW9ucyApIHtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPENvbnN0YW50VGVybU5vZGVPcHRpb25zLCBTdHJpY3RPbWl0PFNlbGZPcHRpb25zLCAnaW50ZXJhY3RpdmVUZXJtTm9kZU9wdGlvbnMnPiwgVGVybU5vZGVPcHRpb25zPigpKCB7XHJcbiAgICAgIC8vIGVtcHR5IG9wdGlvbml6ZSBjYWxsIGJlY2F1c2Ugd2UgYWNjZXNzIG9wdGlvbnMuaW50ZXJhY3RpdmVUZXJtTm9kZU9wdGlvbnMgYmVsb3dcclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIGNvbnN0IGNvbnRlbnROb2RlID0gQ29uc3RhbnRUZXJtTm9kZS5jcmVhdGVJbnRlcmFjdGl2ZVRlcm1Ob2RlKCB0ZXJtLmNvbnN0YW50VmFsdWUsXHJcbiAgICAgIGNvbWJpbmVPcHRpb25zPEludGVyYWN0aXZlVGVybU5vZGVPcHRpb25zPigge30sIG9wdGlvbnMuaW50ZXJhY3RpdmVUZXJtTm9kZU9wdGlvbnMsIHtcclxuICAgICAgICBkaWFtZXRlcjogdGVybS5kaWFtZXRlclxyXG4gICAgICB9ICkgKTtcclxuXHJcbiAgICBjb25zdCBzaGFkb3dOb2RlID0gbmV3IENpcmNsZSggdGVybS5kaWFtZXRlciAvIDIsIHtcclxuICAgICAgZmlsbDogJ2JsYWNrJyxcclxuICAgICAgb3BhY2l0eTogRXF1YWxpdHlFeHBsb3JlckNvbnN0YW50cy5TSEFET1dfT1BBQ0lUWVxyXG4gICAgfSApO1xyXG5cclxuICAgIHN1cGVyKCB0ZXJtQ3JlYXRvciwgdGVybSwgY29udGVudE5vZGUsIHNoYWRvd05vZGUsIG9wdGlvbnMgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgdGhlIHJlcHJlc2VudGF0aW9uIG9mIGEgdGVybSB0aGF0IHRoZSB1c2VyIGludGVyYWN0cyB3aXRoLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgY3JlYXRlSW50ZXJhY3RpdmVUZXJtTm9kZSggY29uc3RhbnRWYWx1ZTogRnJhY3Rpb24sIHByb3ZpZGVkT3B0aW9ucz86IEludGVyYWN0aXZlVGVybU5vZGVPcHRpb25zICk6IE5vZGUge1xyXG4gICAgcmV0dXJuIG5ldyBJbnRlcmFjdGl2ZVRlcm1Ob2RlKCBjb25zdGFudFZhbHVlLCBwcm92aWRlZE9wdGlvbnMgKTsgLy9UT0RPIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9lcXVhbGl0eS1leHBsb3Jlci9pc3N1ZXMvMjAwIGR5bmFtaWNcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgdGhlIHJlcHJlc2VudGF0aW9uIG9mIGEgdGVybSB0aGF0IGlzIHNob3duIGluIGVxdWF0aW9ucy5cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGNyZWF0ZUVxdWF0aW9uVGVybU5vZGUoIGNvbnN0YW50VmFsdWU6IEZyYWN0aW9uLCBwcm92aWRlZE9wdGlvbnM/OiBFcXVhdGlvblRlcm1Ob2RlT3B0aW9ucyApOiBOb2RlIHtcclxuICAgIHJldHVybiBuZXcgRXF1YXRpb25UZXJtTm9kZSggY29uc3RhbnRWYWx1ZSwgcHJvdmlkZWRPcHRpb25zICk7IC8vVE9ETyBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvZXF1YWxpdHktZXhwbG9yZXIvaXNzdWVzLzIwMCBkeW5hbWljXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogVGhlIHJlcHJlc2VudGF0aW9uIG9mIGEgdGVybSB0aGF0IGlzIHNob3duIGluIGVxdWF0aW9ucywgYSByZWR1Y2VkIGZyYWN0aW9uLlxyXG4gKi9cclxuY2xhc3MgRXF1YXRpb25UZXJtTm9kZSBleHRlbmRzIFJlZHVjZWRGcmFjdGlvbk5vZGUge1xyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggY29uc3RhbnRWYWx1ZTogRnJhY3Rpb24sIHByb3ZpZGVkT3B0aW9ucz86IEVxdWF0aW9uVGVybU5vZGVPcHRpb25zICkge1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggY29uc3RhbnRWYWx1ZS5pc1JlZHVjZWQoKSwgYGNvbnN0YW50VmFsdWUgbXVzdCBiZSByZWR1Y2VkOiAke2NvbnN0YW50VmFsdWV9YCApO1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8RXF1YXRpb25UZXJtTm9kZU9wdGlvbnMsIEVxdWF0aW9uVGVybU5vZGVTZWxmT3B0aW9ucywgUmVkdWNlZEZyYWN0aW9uTm9kZU9wdGlvbnM+KCkoIHtcclxuXHJcbiAgICAgIC8vIFJlZHVjZWRGcmFjdGlvbk5vZGVPcHRpb25zXHJcbiAgICAgIGludGVnZXJGb250OiBuZXcgUGhldEZvbnQoIDQwICksXHJcbiAgICAgIGZyYWN0aW9uRm9udDogbmV3IFBoZXRGb250KCAyMCApXHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICBzdXBlciggY29uc3RhbnRWYWx1ZSwgb3B0aW9ucyApO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSByZXByZXNlbnRhdGlvbiBvZiBhIHRlcm0gdGhhdCB0aGUgdXNlciBpbnRlcmFjdHMgd2l0aCwgaW4gdGhpcyBjYXNlIGEgbnVtYmVyIGluc2lkZSBhIGNpcmNsZS5cclxuICovXHJcbmNsYXNzIEludGVyYWN0aXZlVGVybU5vZGUgZXh0ZW5kcyBOb2RlIHtcclxuICBwdWJsaWMgY29uc3RydWN0b3IoIGNvbnN0YW50VmFsdWU6IEZyYWN0aW9uLCBwcm92aWRlZE9wdGlvbnM/OiBJbnRlcmFjdGl2ZVRlcm1Ob2RlT3B0aW9ucyApIHtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIGNvbnN0YW50VmFsdWUuaXNSZWR1Y2VkKCksIGBjb25zdGFudFZhbHVlIG11c3QgYmUgcmVkdWNlZDogJHtjb25zdGFudFZhbHVlfWAgKTtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPEludGVyYWN0aXZlVGVybU5vZGVPcHRpb25zLCBTdHJpY3RPbWl0PEludGVyYWN0aXZlVGVybU5vZGVTZWxmT3B0aW9ucywgJ2VxdWF0aW9uVGVybU5vZGVPcHRpb25zJz4sIE5vZGVPcHRpb25zPigpKCB7XHJcblxyXG4gICAgICAvLyBJbnRlcmFjdGl2ZVRlcm1Ob2RlU2VsZk9wdGlvbnNcclxuICAgICAgZGlhbWV0ZXI6IEVxdWFsaXR5RXhwbG9yZXJDb25zdGFudHMuU01BTExfVEVSTV9ESUFNRVRFUixcclxuICAgICAgbWFyZ2luOiA4LFxyXG4gICAgICBwb3NpdGl2ZUZpbGw6IEVxdWFsaXR5RXhwbG9yZXJDb2xvcnMuUE9TSVRJVkVfQ09OU1RBTlRfRklMTCxcclxuICAgICAgbmVnYXRpdmVGaWxsOiBFcXVhbGl0eUV4cGxvcmVyQ29sb3JzLk5FR0FUSVZFX0NPTlNUQU5UX0ZJTEwsXHJcbiAgICAgIHBvc2l0aXZlTGluZURhc2g6IFtdLFxyXG4gICAgICBuZWdhdGl2ZUxpbmVEYXNoOiBbIDMsIDMgXVxyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgY29uc3QgaXNQb3NpdGl2ZSA9ICggY29uc3RhbnRWYWx1ZS5nZXRWYWx1ZSgpID49IDAgKTtcclxuXHJcbiAgICAvLyBiYWNrZ3JvdW5kIGNpcmNsZVxyXG4gICAgY29uc3QgY2lyY2xlTm9kZSA9IG5ldyBDaXJjbGUoIG9wdGlvbnMuZGlhbWV0ZXIgLyAyLCB7XHJcbiAgICAgIHN0cm9rZTogJ2JsYWNrJyxcclxuICAgICAgZmlsbDogaXNQb3NpdGl2ZSA/IG9wdGlvbnMucG9zaXRpdmVGaWxsIDogb3B0aW9ucy5uZWdhdGl2ZUZpbGwsXHJcbiAgICAgIGxpbmVEYXNoOiBpc1Bvc2l0aXZlID8gb3B0aW9ucy5wb3NpdGl2ZUxpbmVEYXNoIDogb3B0aW9ucy5uZWdhdGl2ZUxpbmVEYXNoXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gY29uc3RhbnQgdmFsdWVcclxuICAgIGNvbnN0IG1hcmdpbiA9IDAuMTggKiBvcHRpb25zLmRpYW1ldGVyOyAvLyBkZXRlcm1pbmVkIGVtcGlyaWNhbGx5XHJcbiAgICBjb25zdCBlcXVhdGlvblRlcm1Ob2RlID0gQ29uc3RhbnRUZXJtTm9kZS5jcmVhdGVFcXVhdGlvblRlcm1Ob2RlKCBjb25zdGFudFZhbHVlLFxyXG4gICAgICBjb21iaW5lT3B0aW9uczxFcXVhdGlvblRlcm1Ob2RlT3B0aW9ucz4oIHt9LCBvcHRpb25zLmVxdWF0aW9uVGVybU5vZGVPcHRpb25zLCB7XHJcbiAgICAgICAgbWF4V2lkdGg6IGNpcmNsZU5vZGUud2lkdGggLSAoIDIgKiBtYXJnaW4gKSxcclxuICAgICAgICBtYXhIZWlnaHQ6IGNpcmNsZU5vZGUuaGVpZ2h0IC0gKCAyICogbWFyZ2luIClcclxuICAgICAgfSApXHJcbiAgICApO1xyXG4gICAgZXF1YXRpb25UZXJtTm9kZS5ib3VuZHNQcm9wZXJ0eS5saW5rKCBib3VuZHMgPT4ge1xyXG4gICAgICBlcXVhdGlvblRlcm1Ob2RlLmNlbnRlciA9IGNpcmNsZU5vZGUuY2VudGVyO1xyXG4gICAgfSApO1xyXG5cclxuICAgIG9wdGlvbnMuY2hpbGRyZW4gPSBbIGNpcmNsZU5vZGUsIGVxdWF0aW9uVGVybU5vZGUgXTtcclxuXHJcbiAgICBzdXBlciggb3B0aW9ucyApO1xyXG4gIH1cclxufVxyXG5cclxuZXF1YWxpdHlFeHBsb3Jlci5yZWdpc3RlciggJ0NvbnN0YW50VGVybU5vZGUnLCBDb25zdGFudFRlcm1Ob2RlICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUlBLE9BQU9BLFFBQVEsTUFBTSx5Q0FBeUM7QUFDOUQsU0FBU0MsTUFBTSxFQUFFQyxJQUFJLFFBQTZCLG1DQUFtQztBQUNyRixPQUFPQyxnQkFBZ0IsTUFBTSwyQkFBMkI7QUFDeEQsT0FBT0Msc0JBQXNCLE1BQU0sOEJBQThCO0FBQ2pFLE9BQU9DLHlCQUF5QixNQUFNLGlDQUFpQztBQUd2RSxPQUFPQyxtQkFBbUIsTUFBc0MsMEJBQTBCO0FBQzFGLE9BQU9DLFFBQVEsTUFBMkIsZUFBZTtBQUN6RCxPQUFPQyxTQUFTLElBQUlDLGNBQWMsUUFBMEIsdUNBQXVDO0FBMEJuRyxlQUFlLE1BQU1DLGdCQUFnQixTQUFTSCxRQUFRLENBQUM7RUFFOUNJLFdBQVdBLENBQUVDLFdBQWdDLEVBQUVDLElBQWtCLEVBQUVDLGVBQXlDLEVBQUc7SUFFcEgsTUFBTUMsT0FBTyxHQUFHUCxTQUFTLENBQWtHLENBQUMsQ0FBRTtNQUM1SDtJQUFBLENBQ0QsRUFBRU0sZUFBZ0IsQ0FBQztJQUVwQixNQUFNRSxXQUFXLEdBQUdOLGdCQUFnQixDQUFDTyx5QkFBeUIsQ0FBRUosSUFBSSxDQUFDSyxhQUFhLEVBQ2hGVCxjQUFjLENBQThCLENBQUMsQ0FBQyxFQUFFTSxPQUFPLENBQUNJLDBCQUEwQixFQUFFO01BQ2xGQyxRQUFRLEVBQUVQ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