// Copyright 2018-2022, University of Colorado Boulder

/**
 * Displays a reduced fraction.
 * Origin is at the top center of the numerator, to support positioning that is independent of sign.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import optionize from '../../../../phet-core/js/optionize.js';
import MathSymbols from '../../../../scenery-phet/js/MathSymbols.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { Line, Node, Text, VBox } from '../../../../scenery/js/imports.js';
import equalityExplorer from '../../equalityExplorer.js';

// constants
const DEFAULT_FRACTION_FONT = new PhetFont(22);
const DEFAULT_INTEGER_FONT = new PhetFont(40);
export default class ReducedFractionNode extends Node {
  constructor(fraction, providedOptions) {
    assert && assert(fraction.isReduced(), `fraction must be reduced: ${fraction}`);
    const options = optionize()({
      // SelfOptions
      minLineLength: 1,
      fractionFont: DEFAULT_FRACTION_FONT,
      integerFont: DEFAULT_INTEGER_FONT,
      color: 'black',
      lineWidth: 1,
      xSpacing: 5,
      ySpacing: 3
    }, providedOptions);
    if (fraction.isInteger()) {
      // integer
      const integerText = new Text(fraction.getValue(), {
        font: options.integerFont
      });
      options.children = [integerText];
    } else {
      const numeratorText = new Text(Math.abs(fraction.numerator), {
        font: options.fractionFont
      });
      const denominatorText = new Text(Math.abs(fraction.denominator), {
        font: options.fractionFont
      });
      const lineLength = Math.max(numeratorText.width, denominatorText.width);
      const lineNode = new Line(0, 0, lineLength, 0, {
        stroke: options.color,
        lineWidth: options.lineWidth
      });
      const absoluteFractionNode = new VBox({
        children: [numeratorText, lineNode, denominatorText],
        align: 'center',
        spacing: options.ySpacing
      });
      options.children = [absoluteFractionNode];

      // Add sign for negative values
      if (fraction.getValue() < 0) {
        const negativeSignText = new Text(MathSymbols.MINUS, {
          font: options.fractionFont,
          right: lineNode.left - options.xSpacing,
          centerY: lineNode.centerY
        });
        options.children.push(negativeSignText);
      }
    }
    super(options);
  }
}
equalityExplorer.register('ReducedFractionNode', ReducedFractionNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcHRpb25pemUiLCJNYXRoU3ltYm9scyIsIlBoZXRGb250IiwiTGluZSIsIk5vZGUiLCJUZXh0IiwiVkJveCIsImVxdWFsaXR5RXhwbG9yZXIiLCJERUZBVUxUX0ZSQUNUSU9OX0ZPTlQiLCJERUZBVUxUX0lOVEVHRVJfRk9OVCIsIlJlZHVjZWRGcmFjdGlvbk5vZGUiLCJjb25zdHJ1Y3RvciIsImZyYWN0aW9uIiwicHJvdmlkZWRPcHRpb25zIiwiYXNzZXJ0IiwiaXNSZWR1Y2VkIiwib3B0aW9ucyIsIm1pbkxpbmVMZW5ndGgiLCJmcmFjdGlvbkZvbnQiLCJpbnRlZ2VyRm9udCIsImNvbG9yIiwibGluZVdpZHRoIiwieFNwYWNpbmciLCJ5U3BhY2luZyIsImlzSW50ZWdlciIsImludGVnZXJUZXh0IiwiZ2V0VmFsdWUiLCJmb250IiwiY2hpbGRyZW4iLCJudW1lcmF0b3JUZXh0IiwiTWF0aCIsImFicyIsIm51bWVyYXRvciIsImRlbm9taW5hdG9yVGV4dCIsImRlbm9taW5hdG9yIiwibGluZUxlbmd0aCIsIm1heCIsIndpZHRoIiwibGluZU5vZGUiLCJzdHJva2UiLCJhYnNvbHV0ZUZyYWN0aW9uTm9kZSIsImFsaWduIiwic3BhY2luZyIsIm5lZ2F0aXZlU2lnblRleHQiLCJNSU5VUyIsInJpZ2h0IiwibGVmdCIsImNlbnRlclkiLCJwdXNoIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJSZWR1Y2VkRnJhY3Rpb25Ob2RlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE4LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIERpc3BsYXlzIGEgcmVkdWNlZCBmcmFjdGlvbi5cclxuICogT3JpZ2luIGlzIGF0IHRoZSB0b3AgY2VudGVyIG9mIHRoZSBudW1lcmF0b3IsIHRvIHN1cHBvcnQgcG9zaXRpb25pbmcgdGhhdCBpcyBpbmRlcGVuZGVudCBvZiBzaWduLlxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCBvcHRpb25pemUgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCBQaWNrT3B0aW9uYWwgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL1BpY2tPcHRpb25hbC5qcyc7XHJcbmltcG9ydCBGcmFjdGlvbiBmcm9tICcuLi8uLi8uLi8uLi9waGV0Y29tbW9uL2pzL21vZGVsL0ZyYWN0aW9uLmpzJztcclxuaW1wb3J0IE1hdGhTeW1ib2xzIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9NYXRoU3ltYm9scy5qcyc7XHJcbmltcG9ydCBQaGV0Rm9udCBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvUGhldEZvbnQuanMnO1xyXG5pbXBvcnQgeyBGb250LCBMaW5lLCBOb2RlLCBOb2RlT3B0aW9ucywgTm9kZVRyYW5zbGF0aW9uT3B0aW9ucywgVENvbG9yLCBUZXh0LCBWQm94IH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IGVxdWFsaXR5RXhwbG9yZXIgZnJvbSAnLi4vLi4vZXF1YWxpdHlFeHBsb3Jlci5qcyc7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgREVGQVVMVF9GUkFDVElPTl9GT05UID0gbmV3IFBoZXRGb250KCAyMiApO1xyXG5jb25zdCBERUZBVUxUX0lOVEVHRVJfRk9OVCA9IG5ldyBQaGV0Rm9udCggNDAgKTtcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSB7XHJcbiAgbWluTGluZUxlbmd0aD86IG51bWJlcjsgLy8gbGVuZ3RoIG9mIHRoZSBmcmFjdGlvbiBsaW5lXHJcbiAgZnJhY3Rpb25Gb250PzogRm9udDsgLy8gZm9udCBmb3IgbnVtZXJhdG9yIGFuZCBkZW5vbWluYXRvciBvZiBmcmFjdGlvbiB2YWx1ZVxyXG4gIGludGVnZXJGb250PzogRm9udDsgLy8gZm9udCBmb3IgaW50ZWdlciB2YWx1ZVxyXG4gIGNvbG9yPzogVENvbG9yOyAvLyBjb2xvciBvZiBldmVyeXRoaW5nXHJcbiAgbGluZVdpZHRoPzogbnVtYmVyOyAvLyBmb3IgdGhlIGZyYWN0aW9uIGxpbmVcclxuICB4U3BhY2luZz86IG51bWJlcjsgLy8gaG9yaXpvbnRhbCBzcGFjZSBiZXR3ZWVuIG5lZ2F0aXZlIHNpZ24gYW5kIGZyYWN0aW9uIGxpbmVcclxuICB5U3BhY2luZz86IG51bWJlcjsgLy8gdmVydGljYWwgc3BhY2luZyBhYm92ZS9iZWxvdyB0aGUgZnJhY3Rpb24gbGluZVxyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgUmVkdWNlZEZyYWN0aW9uTm9kZU9wdGlvbnMgPSBTZWxmT3B0aW9ucyAmIE5vZGVUcmFuc2xhdGlvbk9wdGlvbnMgJiBQaWNrT3B0aW9uYWw8Tm9kZU9wdGlvbnMsICdtYXhXaWR0aCcgfCAnbWF4SGVpZ2h0Jz47XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZWR1Y2VkRnJhY3Rpb25Ob2RlIGV4dGVuZHMgTm9kZSB7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggZnJhY3Rpb246IEZyYWN0aW9uLCBwcm92aWRlZE9wdGlvbnM/OiBSZWR1Y2VkRnJhY3Rpb25Ob2RlT3B0aW9ucyApIHtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIGZyYWN0aW9uLmlzUmVkdWNlZCgpLCBgZnJhY3Rpb24gbXVzdCBiZSByZWR1Y2VkOiAke2ZyYWN0aW9ufWAgKTtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPFJlZHVjZWRGcmFjdGlvbk5vZGVPcHRpb25zLCBTZWxmT3B0aW9ucywgTm9kZU9wdGlvbnM+KCkoIHtcclxuXHJcbiAgICAgIC8vIFNlbGZPcHRpb25zXHJcbiAgICAgIG1pbkxpbmVMZW5ndGg6IDEsXHJcbiAgICAgIGZyYWN0aW9uRm9udDogREVGQVVMVF9GUkFDVElPTl9GT05ULFxyXG4gICAgICBpbnRlZ2VyRm9udDogREVGQVVMVF9JTlRFR0VSX0ZPTlQsXHJcbiAgICAgIGNvbG9yOiAnYmxhY2snLFxyXG4gICAgICBsaW5lV2lkdGg6IDEsXHJcbiAgICAgIHhTcGFjaW5nOiA1LFxyXG4gICAgICB5U3BhY2luZzogM1xyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgaWYgKCBmcmFjdGlvbi5pc0ludGVnZXIoKSApIHtcclxuXHJcbiAgICAgIC8vIGludGVnZXJcclxuICAgICAgY29uc3QgaW50ZWdlclRleHQgPSBuZXcgVGV4dCggZnJhY3Rpb24uZ2V0VmFsdWUoKSwge1xyXG4gICAgICAgIGZvbnQ6IG9wdGlvbnMuaW50ZWdlckZvbnRcclxuICAgICAgfSApO1xyXG5cclxuICAgICAgb3B0aW9ucy5jaGlsZHJlbiA9IFsgaW50ZWdlclRleHQgXTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG5cclxuICAgICAgY29uc3QgbnVtZXJhdG9yVGV4dCA9IG5ldyBUZXh0KCBNYXRoLmFicyggZnJhY3Rpb24ubnVtZXJhdG9yICksIHtcclxuICAgICAgICBmb250OiBvcHRpb25zLmZyYWN0aW9uRm9udFxyXG4gICAgICB9ICk7XHJcblxyXG4gICAgICBjb25zdCBkZW5vbWluYXRvclRleHQgPSBuZXcgVGV4dCggTWF0aC5hYnMoIGZyYWN0aW9uLmRlbm9taW5hdG9yICksIHtcclxuICAgICAgICBmb250OiBvcHRpb25zLmZyYWN0aW9uRm9udFxyXG4gICAgICB9ICk7XHJcblxyXG4gICAgICBjb25zdCBsaW5lTGVuZ3RoID0gTWF0aC5tYXgoIG51bWVyYXRvclRleHQud2lkdGgsIGRlbm9taW5hdG9yVGV4dC53aWR0aCApO1xyXG4gICAgICBjb25zdCBsaW5lTm9kZSA9IG5ldyBMaW5lKCAwLCAwLCBsaW5lTGVuZ3RoLCAwLCB7XHJcbiAgICAgICAgc3Ryb2tlOiBvcHRpb25zLmNvbG9yLFxyXG4gICAgICAgIGxpbmVXaWR0aDogb3B0aW9ucy5saW5lV2lkdGhcclxuICAgICAgfSApO1xyXG5cclxuICAgICAgY29uc3QgYWJzb2x1dGVGcmFjdGlvbk5vZGUgPSBuZXcgVkJveCgge1xyXG4gICAgICAgIGNoaWxkcmVuOiBbIG51bWVyYXRvclRleHQsIGxpbmVOb2RlLCBkZW5vbWluYXRvclRleHQgXSxcclxuICAgICAgICBhbGlnbjogJ2NlbnRlcicsXHJcbiAgICAgICAgc3BhY2luZzogb3B0aW9ucy55U3BhY2luZ1xyXG4gICAgICB9ICk7XHJcblxyXG4gICAgICBvcHRpb25zLmNoaWxkcmVuID0gWyBhYnNvbHV0ZUZyYWN0aW9uTm9kZSBdO1xyXG5cclxuICAgICAgLy8gQWRkIHNpZ24gZm9yIG5lZ2F0aXZlIHZhbHVlc1xyXG4gICAgICBpZiAoIGZyYWN0aW9uLmdldFZhbHVlKCkgPCAwICkge1xyXG4gICAgICAgIGNvbnN0IG5lZ2F0aXZlU2lnblRleHQgPSBuZXcgVGV4dCggTWF0aFN5bWJvbHMuTUlOVVMsIHtcclxuICAgICAgICAgIGZvbnQ6IG9wdGlvbnMuZnJhY3Rpb25Gb250LFxyXG4gICAgICAgICAgcmlnaHQ6IGxpbmVOb2RlLmxlZnQgLSBvcHRpb25zLnhTcGFjaW5nLFxyXG4gICAgICAgICAgY2VudGVyWTogbGluZU5vZGUuY2VudGVyWVxyXG4gICAgICAgIH0gKTtcclxuICAgICAgICBvcHRpb25zLmNoaWxkcmVuLnB1c2goIG5lZ2F0aXZlU2lnblRleHQgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN1cGVyKCBvcHRpb25zICk7XHJcbiAgfVxyXG59XHJcblxyXG5lcXVhbGl0eUV4cGxvcmVyLnJlZ2lzdGVyKCAnUmVkdWNlZEZyYWN0aW9uTm9kZScsIFJlZHVjZWRGcmFjdGlvbk5vZGUgKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxTQUFTLE1BQU0sdUNBQXVDO0FBRzdELE9BQU9DLFdBQVcsTUFBTSw0Q0FBNEM7QUFDcEUsT0FBT0MsUUFBUSxNQUFNLHlDQUF5QztBQUM5RCxT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