// Copyright 2014-2023, University of Colorado Boulder

/**
 * Equation for the 'Sandwiches' screen.
 * This differs from the 'Molecules' screen equation is a few key ways:
 *
 * 1. Terms are images instead of formulas.
 * 2. Reactant coefficients are mutable for the 'custom' sandwich
 * 3. The 'custom' sandwich reaction may not be well-defined.
 * 4. Appearance (fonts, sizes, spacing, ...) needs to be separately tweakable.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import Property from '../../../../axon/js/Property.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import PlusNode from '../../../../scenery-phet/js/PlusNode.js';
import { Node, RichText, Text } from '../../../../scenery/js/imports.js';
import NumberSpinner from '../../../../sun/js/NumberSpinner.js';
import RPALConstants from '../../common/RPALConstants.js';
import RightArrowNode from '../../common/view/RightArrowNode.js';
import SubstanceIcon from '../../common/view/SubstanceIcon.js';
import reactantsProductsAndLeftovers from '../../reactantsProductsAndLeftovers.js';
import ReactantsProductsAndLeftoversStrings from '../../ReactantsProductsAndLeftoversStrings.js';
const COEFFICIENT_X_SPACING = 8; // space between coefficient and node to its right
const PLUS_X_SPACING = 15; // space on both sides of the plus signs
const ARROW_X_SPACING = 15; // space on both sides of arrow
const TEXT_OPTIONS = {
  font: new PhetFont(28),
  fill: 'white'
};
const PLUS_NODE_OPTIONS = {
  fill: 'white'
};
const RIGHT_ARROW_NODE_OPTIONS = {
  fill: 'white',
  stroke: null,
  scale: 0.65
};
export default class SandwichesEquationNode extends Node {
  /**
   * @param reaction the sandwich recipe (reaction) to display
   * @param maxSandwichSize dimensions of the largest sandwich
   * @param visibleProperty
   */
  constructor(reaction, maxSandwichSize, visibleProperty) {
    // left-hand side is the sandwich ingredients
    const leftNode = new Node();
    let plusNode;
    const numberOfReactants = reaction.reactants.length;
    for (let i = 0; i < numberOfReactants; i++) {
      const reactant = reaction.reactants[i];

      // coefficient
      let coefficientNode;
      if (reaction.coefficientsMutable) {
        coefficientNode = new NumberSpinner(reactant.coefficientProperty, new Property(RPALConstants.SANDWICH_COEFFICIENT_RANGE), RPALConstants.NUMBER_SPINNER_OPTIONS);
      } else {
        coefficientNode = new Text(reactant.coefficientProperty.value, TEXT_OPTIONS);
      }
      coefficientNode.left = plusNode ? plusNode.right + PLUS_X_SPACING : 0;
      leftNode.addChild(coefficientNode);

      // icon
      const iconNode = new SubstanceIcon(reactant.iconProperty, {
        left: coefficientNode.right + COEFFICIENT_X_SPACING,
        centerY: coefficientNode.centerY
      });
      leftNode.addChild(iconNode);

      // plus sign between reactants
      if (i < numberOfReactants - 1) {
        plusNode = new PlusNode(PLUS_NODE_OPTIONS);
        plusNode.left = iconNode.right + PLUS_X_SPACING;
        plusNode.centerY = coefficientNode.centerY;
        leftNode.addChild(plusNode);
      }
    }

    // right arrow
    const arrowNode = new RightArrowNode(RIGHT_ARROW_NODE_OPTIONS);
    arrowNode.left = leftNode.right + ARROW_X_SPACING;
    arrowNode.centerY = leftNode.centerY;

    // right-hand side is a sandwich, whose image changes based on coefficients of the ingredients
    const sandwichNode = new SubstanceIcon(reaction.sandwich.iconProperty, {
      centerX: arrowNode.right + ARROW_X_SPACING + maxSandwichSize.width / 2,
      centerY: arrowNode.centerY
    });

    // 'No Reaction', max width determined empirically.
    const noReactionNode = new RichText(ReactantsProductsAndLeftoversStrings.noReactionStringProperty, {
      replaceNewlines: true,
      align: 'center',
      font: new PhetFont(16),
      fill: 'white',
      maxWidth: 85
    });
    noReactionNode.boundsProperty.link(bounds => {
      noReactionNode.left = arrowNode.right + ARROW_X_SPACING;
      noReactionNode.centerY = arrowNode.centerY;
    });
    super({
      children: [leftNode, arrowNode, sandwichNode, noReactionNode],
      visibleProperty: visibleProperty
    });

    // Display 'No Reaction' if we don't have a valid sandwich.
    const sandwichIconPropertyObserver = node => {
      sandwichNode.visible = reaction.isReaction();
      noReactionNode.visible = !sandwichNode.visible;
    };
    reaction.sandwich.iconProperty.link(sandwichIconPropertyObserver);
  }
  dispose() {
    assert && assert(false, 'dispose is not supported, exists for the lifetime of the sim');
    super.dispose();
  }
}
reactantsProductsAndLeftovers.register('SandwichesEquationNode', SandwichesEquationNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQcm9wZXJ0eSIsIlBoZXRGb250IiwiUGx1c05vZGUiLCJOb2RlIiwiUmljaFRleHQiLCJUZXh0IiwiTnVtYmVyU3Bpbm5lciIsIlJQQUxDb25zdGFudHMiLCJSaWdodEFycm93Tm9kZSIsIlN1YnN0YW5jZUljb24iLCJyZWFjdGFudHNQcm9kdWN0c0FuZExlZnRvdmVycyIsIlJlYWN0YW50c1Byb2R1Y3RzQW5kTGVmdG92ZXJzU3RyaW5ncyIsIkNPRUZGSUNJRU5UX1hfU1BBQ0lORyIsIlBMVVNfWF9TUEFDSU5HIiwiQVJST1dfWF9TUEFDSU5HIiwiVEVYVF9PUFRJT05TIiwiZm9udCIsImZpbGwiLCJQTFVTX05PREVfT1BUSU9OUyIsIlJJR0hUX0FSUk9XX05PREVfT1BUSU9OUyIsInN0cm9rZSIsInNjYWxlIiwiU2FuZHdpY2hlc0VxdWF0aW9uTm9kZSIsImNvbnN0cnVjdG9yIiwicmVhY3Rpb24iLCJtYXhTYW5kd2ljaFNpemUiLCJ2aXNpYmxlUHJvcGVydHkiLCJsZWZ0Tm9kZSIsInBsdXNOb2RlIiwibnVtYmVyT2ZSZWFjdGFudHMiLCJyZWFjdGFudHMiLCJsZW5ndGgiLCJpIiwicmVhY3RhbnQiLCJjb2VmZmljaWVudE5vZGUiLCJjb2VmZmljaWVudHNNdXRhYmxlIiwiY29lZmZpY2llbnRQcm9wZXJ0eSIsIlNBTkRXSUNIX0NPRUZGSUNJRU5UX1JBTkdFIiwiTlVNQkVSX1NQSU5ORVJfT1BUSU9OUyIsInZhbHVlIiwibGVmdCIsInJpZ2h0IiwiYWRkQ2hpbGQiLCJpY29uTm9kZSIsImljb25Qcm9wZXJ0eSIsImNlbnRlclkiLCJhcnJvd05vZGUiLCJzYW5kd2ljaE5vZGUiLCJzYW5kd2ljaCIsImNlbnRlclgiLCJ3aWR0aCIsIm5vUmVhY3Rpb25Ob2RlIiwibm9SZWFjdGlvblN0cmluZ1Byb3BlcnR5IiwicmVwbGFjZU5ld2xpbmVzIiwiYWxpZ24iLCJtYXhXaWR0aCIsImJvdW5kc1Byb3BlcnR5IiwibGluayIsImJvdW5kcyIsImNoaWxkcmVuIiwic2FuZHdpY2hJY29uUHJvcGVydHlPYnNlcnZlciIsIm5vZGUiLCJ2aXNpYmxlIiwiaXNSZWFjdGlvbiIsImRpc3Bvc2UiLCJhc3NlcnQiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlNhbmR3aWNoZXNFcXVhdGlvbk5vZGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTQtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogRXF1YXRpb24gZm9yIHRoZSAnU2FuZHdpY2hlcycgc2NyZWVuLlxyXG4gKiBUaGlzIGRpZmZlcnMgZnJvbSB0aGUgJ01vbGVjdWxlcycgc2NyZWVuIGVxdWF0aW9uIGlzIGEgZmV3IGtleSB3YXlzOlxyXG4gKlxyXG4gKiAxLiBUZXJtcyBhcmUgaW1hZ2VzIGluc3RlYWQgb2YgZm9ybXVsYXMuXHJcbiAqIDIuIFJlYWN0YW50IGNvZWZmaWNpZW50cyBhcmUgbXV0YWJsZSBmb3IgdGhlICdjdXN0b20nIHNhbmR3aWNoXHJcbiAqIDMuIFRoZSAnY3VzdG9tJyBzYW5kd2ljaCByZWFjdGlvbiBtYXkgbm90IGJlIHdlbGwtZGVmaW5lZC5cclxuICogNC4gQXBwZWFyYW5jZSAoZm9udHMsIHNpemVzLCBzcGFjaW5nLCAuLi4pIG5lZWRzIHRvIGJlIHNlcGFyYXRlbHkgdHdlYWthYmxlLlxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCBQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1Byb3BlcnR5LmpzJztcclxuaW1wb3J0IFRSZWFkT25seVByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvVFJlYWRPbmx5UHJvcGVydHkuanMnO1xyXG5pbXBvcnQgRGltZW5zaW9uMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvRGltZW5zaW9uMi5qcyc7XHJcbmltcG9ydCBQaGV0Rm9udCBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvUGhldEZvbnQuanMnO1xyXG5pbXBvcnQgUGx1c05vZGUsIHsgUGx1c05vZGVPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1BsdXNOb2RlLmpzJztcclxuaW1wb3J0IHsgTm9kZSwgUmljaFRleHQsIFRleHQsIFRleHRPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IE51bWJlclNwaW5uZXIgZnJvbSAnLi4vLi4vLi4vLi4vc3VuL2pzL051bWJlclNwaW5uZXIuanMnO1xyXG5pbXBvcnQgUlBBTENvbnN0YW50cyBmcm9tICcuLi8uLi9jb21tb24vUlBBTENvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBSaWdodEFycm93Tm9kZSwgeyBSaWdodEFycm93Tm9kZU9wdGlvbnMgfSBmcm9tICcuLi8uLi9jb21tb24vdmlldy9SaWdodEFycm93Tm9kZS5qcyc7XHJcbmltcG9ydCBTdWJzdGFuY2VJY29uIGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L1N1YnN0YW5jZUljb24uanMnO1xyXG5pbXBvcnQgcmVhY3RhbnRzUHJvZHVjdHNBbmRMZWZ0b3ZlcnMgZnJvbSAnLi4vLi4vcmVhY3RhbnRzUHJvZHVjdHNBbmRMZWZ0b3ZlcnMuanMnO1xyXG5pbXBvcnQgUmVhY3RhbnRzUHJvZHVjdHNBbmRMZWZ0b3ZlcnNTdHJpbmdzIGZyb20gJy4uLy4uL1JlYWN0YW50c1Byb2R1Y3RzQW5kTGVmdG92ZXJzU3RyaW5ncy5qcyc7XHJcbmltcG9ydCBTYW5kd2ljaFJlY2lwZSBmcm9tICcuLi9tb2RlbC9TYW5kd2ljaFJlY2lwZS5qcyc7XHJcblxyXG5jb25zdCBDT0VGRklDSUVOVF9YX1NQQUNJTkcgPSA4OyAvLyBzcGFjZSBiZXR3ZWVuIGNvZWZmaWNpZW50IGFuZCBub2RlIHRvIGl0cyByaWdodFxyXG5jb25zdCBQTFVTX1hfU1BBQ0lORyA9IDE1OyAvLyBzcGFjZSBvbiBib3RoIHNpZGVzIG9mIHRoZSBwbHVzIHNpZ25zXHJcbmNvbnN0IEFSUk9XX1hfU1BBQ0lORyA9IDE1OyAvLyBzcGFjZSBvbiBib3RoIHNpZGVzIG9mIGFycm93XHJcbmNvbnN0IFRFWFRfT1BUSU9OUzogVGV4dE9wdGlvbnMgPSB7XHJcbiAgZm9udDogbmV3IFBoZXRGb250KCAyOCApLFxyXG4gIGZpbGw6ICd3aGl0ZSdcclxufTtcclxuY29uc3QgUExVU19OT0RFX09QVElPTlM6IFBsdXNOb2RlT3B0aW9ucyA9IHsgZmlsbDogJ3doaXRlJyB9O1xyXG5jb25zdCBSSUdIVF9BUlJPV19OT0RFX09QVElPTlM6IFJpZ2h0QXJyb3dOb2RlT3B0aW9ucyA9IHtcclxuICBmaWxsOiAnd2hpdGUnLFxyXG4gIHN0cm9rZTogbnVsbCxcclxuICBzY2FsZTogMC42NVxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2FuZHdpY2hlc0VxdWF0aW9uTm9kZSBleHRlbmRzIE5vZGUge1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0gcmVhY3Rpb24gdGhlIHNhbmR3aWNoIHJlY2lwZSAocmVhY3Rpb24pIHRvIGRpc3BsYXlcclxuICAgKiBAcGFyYW0gbWF4U2FuZHdpY2hTaXplIGRpbWVuc2lvbnMgb2YgdGhlIGxhcmdlc3Qgc2FuZHdpY2hcclxuICAgKiBAcGFyYW0gdmlzaWJsZVByb3BlcnR5XHJcbiAgICovXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCByZWFjdGlvbjogU2FuZHdpY2hSZWNpcGUsIG1heFNhbmR3aWNoU2l6ZTogRGltZW5zaW9uMiwgdmlzaWJsZVByb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxib29sZWFuPiApIHtcclxuXHJcbiAgICAvLyBsZWZ0LWhhbmQgc2lkZSBpcyB0aGUgc2FuZHdpY2ggaW5ncmVkaWVudHNcclxuICAgIGNvbnN0IGxlZnROb2RlID0gbmV3IE5vZGUoKTtcclxuXHJcbiAgICBsZXQgcGx1c05vZGU7XHJcbiAgICBjb25zdCBudW1iZXJPZlJlYWN0YW50cyA9IHJlYWN0aW9uLnJlYWN0YW50cy5sZW5ndGg7XHJcbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBudW1iZXJPZlJlYWN0YW50czsgaSsrICkge1xyXG5cclxuICAgICAgY29uc3QgcmVhY3RhbnQgPSByZWFjdGlvbi5yZWFjdGFudHNbIGkgXTtcclxuXHJcbiAgICAgIC8vIGNvZWZmaWNpZW50XHJcbiAgICAgIGxldCBjb2VmZmljaWVudE5vZGU7XHJcbiAgICAgIGlmICggcmVhY3Rpb24uY29lZmZpY2llbnRzTXV0YWJsZSApIHtcclxuICAgICAgICBjb2VmZmljaWVudE5vZGUgPSBuZXcgTnVtYmVyU3Bpbm5lciggcmVhY3RhbnQuY29lZmZpY2llbnRQcm9wZXJ0eSxcclxuICAgICAgICAgIG5ldyBQcm9wZXJ0eSggUlBBTENvbnN0YW50cy5TQU5EV0lDSF9DT0VGRklDSUVOVF9SQU5HRSApLCBSUEFMQ29uc3RhbnRzLk5VTUJFUl9TUElOTkVSX09QVElPTlMgKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBjb2VmZmljaWVudE5vZGUgPSBuZXcgVGV4dCggcmVhY3RhbnQuY29lZmZpY2llbnRQcm9wZXJ0eS52YWx1ZSwgVEVYVF9PUFRJT05TICk7XHJcbiAgICAgIH1cclxuICAgICAgY29lZmZpY2llbnROb2RlLmxlZnQgPSBwbHVzTm9kZSA/ICggcGx1c05vZGUucmlnaHQgKyBQTFVTX1hfU1BBQ0lORyApIDogMDtcclxuICAgICAgbGVmdE5vZGUuYWRkQ2hpbGQoIGNvZWZmaWNpZW50Tm9kZSApO1xyXG5cclxuICAgICAgLy8gaWNvblxyXG4gICAgICBjb25zdCBpY29uTm9kZSA9IG5ldyBTdWJzdGFuY2VJY29uKCByZWFjdGFudC5pY29uUHJvcGVydHksIHtcclxuICAgICAgICBsZWZ0OiBjb2VmZmljaWVudE5vZGUucmlnaHQgKyBDT0VGRklDSUVOVF9YX1NQQUNJTkcsXHJcbiAgICAgICAgY2VudGVyWTogY29lZmZpY2llbnROb2RlLmNlbnRlcllcclxuICAgICAgfSApO1xyXG4gICAgICBsZWZ0Tm9kZS5hZGRDaGlsZCggaWNvbk5vZGUgKTtcclxuXHJcbiAgICAgIC8vIHBsdXMgc2lnbiBiZXR3ZWVuIHJlYWN0YW50c1xyXG4gICAgICBpZiAoIGkgPCBudW1iZXJPZlJlYWN0YW50cyAtIDEgKSB7XHJcbiAgICAgICAgcGx1c05vZGUgPSBuZXcgUGx1c05vZGUoIFBMVVNfTk9ERV9PUFRJT05TICk7XHJcbiAgICAgICAgcGx1c05vZGUubGVmdCA9IGljb25Ob2RlLnJpZ2h0ICsgUExVU19YX1NQQUNJTkc7XHJcbiAgICAgICAgcGx1c05vZGUuY2VudGVyWSA9IGNvZWZmaWNpZW50Tm9kZS5jZW50ZXJZO1xyXG4gICAgICAgIGxlZnROb2RlLmFkZENoaWxkKCBwbHVzTm9kZSApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmlnaHQgYXJyb3dcclxuICAgIGNvbnN0IGFycm93Tm9kZSA9IG5ldyBSaWdodEFycm93Tm9kZSggUklHSFRfQVJST1dfTk9ERV9PUFRJT05TICk7XHJcbiAgICBhcnJvd05vZGUubGVmdCA9IGxlZnROb2RlLnJpZ2h0ICsgQVJST1dfWF9TUEFDSU5HO1xyXG4gICAgYXJyb3dOb2RlLmNlbnRlclkgPSBsZWZ0Tm9kZS5jZW50ZXJZO1xyXG5cclxuICAgIC8vIHJpZ2h0LWhhbmQgc2lkZSBpcyBhIHNhbmR3aWNoLCB3aG9zZSBpbWFnZSBjaGFuZ2VzIGJhc2VkIG9uIGNvZWZmaWNpZW50cyBvZiB0aGUgaW5ncmVkaWVudHNcclxuICAgIGNvbnN0IHNhbmR3aWNoTm9kZSA9IG5ldyBTdWJzdGFuY2VJY29uKCByZWFjdGlvbi5zYW5kd2ljaC5pY29uUHJvcGVydHksIHtcclxuICAgICAgY2VudGVyWDogYXJyb3dOb2RlLnJpZ2h0ICsgQVJST1dfWF9TUEFDSU5HICsgKCBtYXhTYW5kd2ljaFNpemUud2lkdGggLyAyICksXHJcbiAgICAgIGNlbnRlclk6IGFycm93Tm9kZS5jZW50ZXJZXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gJ05vIFJlYWN0aW9uJywgbWF4IHdpZHRoIGRldGVybWluZWQgZW1waXJpY2FsbHkuXHJcbiAgICBjb25zdCBub1JlYWN0aW9uTm9kZSA9IG5ldyBSaWNoVGV4dCggUmVhY3RhbnRzUHJvZHVjdHNBbmRMZWZ0b3ZlcnNTdHJpbmdzLm5vUmVhY3Rpb25TdHJpbmdQcm9wZXJ0eSwge1xyXG4gICAgICByZXBsYWNlTmV3bGluZXM6IHRydWUsXHJcbiAgICAgIGFsaWduOiAnY2VudGVyJyxcclxuICAgICAgZm9udDogbmV3IFBoZXRGb250KCAxNiApLFxyXG4gICAgICBmaWxsOiAnd2hpdGUnLFxyXG4gICAgICBtYXhXaWR0aDogODVcclxuICAgIH0gKTtcclxuICAgIG5vUmVhY3Rpb25Ob2RlLmJvdW5kc1Byb3BlcnR5LmxpbmsoIGJvdW5kcyA9PiB7XHJcbiAgICAgIG5vUmVhY3Rpb25Ob2RlLmxlZnQgPSBhcnJvd05vZGUucmlnaHQgKyBBUlJPV19YX1NQQUNJTkc7XHJcbiAgICAgIG5vUmVhY3Rpb25Ob2RlLmNlbnRlclkgPSBhcnJvd05vZGUuY2VudGVyWTtcclxuICAgIH0gKTtcclxuXHJcbiAgICBzdXBlcigge1xyXG4gICAgICBjaGlsZHJlbjogWyBsZWZ0Tm9kZSwgYXJyb3dOb2RlLCBzYW5kd2ljaE5vZGUsIG5vUmVhY3Rpb25Ob2RlIF0sXHJcbiAgICAgIHZpc2libGVQcm9wZXJ0eTogdmlzaWJsZVByb3BlcnR5XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gRGlzcGxheSAnTm8gUmVhY3Rpb24nIGlmIHdlIGRvbid0IGhhdmUgYSB2YWxpZCBzYW5kd2ljaC5cclxuICAgIGNvbnN0IHNhbmR3aWNoSWNvblByb3BlcnR5T2JzZXJ2ZXIgPSAoIG5vZGU6IE5vZGUgKSA9PiB7XHJcbiAgICAgIHNhbmR3aWNoTm9kZS52aXNpYmxlID0gcmVhY3Rpb24uaXNSZWFjdGlvbigpO1xyXG4gICAgICBub1JlYWN0aW9uTm9kZS52aXNpYmxlID0gIXNhbmR3aWNoTm9kZS52aXNpYmxlO1xyXG4gICAgfTtcclxuICAgIHJlYWN0aW9uLnNhbmR3aWNoLmljb25Qcm9wZXJ0eS5saW5rKCBzYW5kd2ljaEljb25Qcm9wZXJ0eU9ic2VydmVyICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb3ZlcnJpZGUgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIGZhbHNlLCAnZGlzcG9zZSBpcyBub3Qgc3VwcG9ydGVkLCBleGlzdHMgZm9yIHRoZSBsaWZldGltZSBvZiB0aGUgc2ltJyApO1xyXG4gICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gIH1cclxufVxyXG5cclxucmVhY3RhbnRzUHJvZHVjdHNBbmRMZWZ0b3ZlcnMucmVnaXN0ZXIoICdTYW5kd2ljaGVzRXF1YXRpb25Ob2RlJywgU2FuZHdpY2hlc0VxdWF0aW9uTm9kZSApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxRQUFRLE1BQU0saUNBQWlDO0FBR3RELE9BQU9DLFFBQVEsTUFBTSx5Q0FBeUM7QUFDOUQsT0FBT0MsUUFBUSxNQUEyQix5Q0FBeUM7QUFDbkYsU0FBU0MsSUFBSSxFQUFFQyxRQUFRLEVBQUVDLElBQUksUUFBcUIsbUNBQW1DO0FBQ3JGLE9BQU9DLGFBQWEsTUFBTSxxQ0FBcUM7QUFDL0QsT0FBT0MsYUFBYSxNQUFNLCtCQUErQjtBQUN6RCxPQUFPQyxjQUFjLE1BQWlDLHFDQUFxQztBQUMzRixPQUFPQyxhQUFhLE1BQU0sb0NBQW9DO0FBQzlELE9BQU9DLDZCQUE2QixNQUFNLHdDQUF3QztBQUNsRixPQUFPQyxvQ0FBb0MsTUFBTSwrQ0FBK0M7QUFHaEcsTUFBTUMscUJBQXFCLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDakMsTUFBTUMsY0FBYyxHQUFHLEVBQUUsQ0FBQyxDQUFDO0FBQzNCLE1BQU1DLGVBQWUsR0FBRyxFQUFFLENBQUMsQ0FBQztBQUM1QixNQUFNQyxZQUF5QixHQUFHO0VBQ2hDQyxJQUFJLEVBQUUsSUFB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