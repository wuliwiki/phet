// Copyright 2014-2023, University of Colorado Boulder

/**
 *  Accordion box that shows stacks of substances. Used in the 'Sandwiches' and 'Molecules' screens.
 *
 *  @author Chris Malley (PixelZoom, Inc.)
 */

import Dimension2 from '../../../../dot/js/Dimension2.js';
import { Node, Rectangle, Text } from '../../../../scenery/js/imports.js';
import AccordionBox from '../../../../sun/js/AccordionBox.js';
import reactantsProductsAndLeftovers from '../../reactantsProductsAndLeftovers.js';
import RPALColors from '../RPALColors.js';
import StackNode from './StackNode.js';
import optionize from '../../../../phet-core/js/optionize.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
const MAX_TITLE_PERCENTAGE = 0.75; // title will be scaled down if greater than this percentage of the box width
const DEFAULT_CONTENT_SIZE = new Dimension2(100, 100);
const DEFAULT_MIN_ICON_SIZE = new Dimension2(0, 0);
export default class StacksAccordionBox extends AccordionBox {
  /**
   * @param substances - substances in the box
   * @param xOffsets - x-offsets of each substance, in the same order as substances param
   * @param titleStringProperty
   * @param expandedProperty
   * @param [providedOptions]
   */
  constructor(substances, xOffsets, titleStringProperty, expandedProperty, providedOptions) {
    assert && assert(substances.length > 0);
    assert && assert(substances.length === xOffsets.length);
    const options = optionize()({
      // SelfOptions
      contentSize: DEFAULT_CONTENT_SIZE,
      minIconSize: DEFAULT_MIN_ICON_SIZE,
      maxQuantity: 2,
      boxYMargin: 6,
      // AccordionBoxOptions
      fill: RPALColors.BOX_FILL,
      stroke: RPALColors.BOX_STROKE,
      cornerRadius: 3,
      expandedProperty: expandedProperty,
      expandCollapseButtonOptions: {
        touchAreaXDilation: 10,
        touchAreaYDilation: 10
      },
      titleBarOptions: {
        fill: RPALColors.STATUS_BAR_FILL
      },
      titleAlignX: 'center',
      buttonAlign: 'left',
      contentXMargin: 0,
      contentYMargin: 0,
      contentYSpacing: 0
    }, providedOptions);
    assert && assert(Number.isInteger(options.maxQuantity) && options.maxQuantity > 0);

    // scale the title to fit
    const titleText = new Text(titleStringProperty, {
      font: new PhetFont(14),
      fill: 'white',
      maxWidth: 0.75 * options.contentSize.width,
      tandem: options.tandem.createTandem('titleText')
    });
    titleText.setScaleMagnitude(Math.min(1, MAX_TITLE_PERCENTAGE * options.contentSize.width / titleText.width));
    options.titleNode = titleText;

    // content for the accordion box
    const content = new Node();

    // rectangle with no fill, this ensures constant size of the content
    const rectangle = new Rectangle(0, 0, options.contentSize.width, options.contentSize.height, {
      cornerRadius: options.cornerRadius
    });
    content.addChild(rectangle);

    // compute max height of the nodes in the box
    const maxIconHeight = Math.max(options.minIconSize.height, _.maxBy(substances, substance => substance.iconProperty.value.height).iconProperty.value.height);

    // vertical stacks of nodes inside the box
    const stackNodes = [];
    const deltaY = (options.contentSize.height - 2 * options.boxYMargin - maxIconHeight) / (options.maxQuantity - 1);
    const startCenterY = rectangle.height - options.boxYMargin - maxIconHeight / 2;
    for (let i = 0; i < substances.length; i++) {
      const substance = substances[i];
      const stackNode = new StackNode(options.contentSize.height, substance.iconProperty, substance.quantityProperty, startCenterY, deltaY, {
        centerX: xOffsets[i]
      });
      content.addChild(stackNode);
      stackNodes.push(stackNode);
    }
    super(content, options);
    this.disposeStacksAccordionBox = () => {
      titleText.dispose();
      stackNodes.forEach(node => node.dispose());
      stackNodes.length = 0;
    };
  }
  dispose() {
    this.disposeStacksAccordionBox();
    super.dispose();
  }
}
reactantsProductsAndLeftovers.register('StacksAccordionBox', StacksAccordionBox);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEaW1lbnNpb24yIiwiTm9kZSIsIlJlY3RhbmdsZSIsIlRleHQiLCJBY2NvcmRpb25Cb3giLCJyZWFjdGFudHNQcm9kdWN0c0FuZExlZnRvdmVycyIsIlJQQUxDb2xvcnMiLCJTdGFja05vZGUiLCJvcHRpb25pemUiLCJQaGV0Rm9udCIsIk1BWF9USVRMRV9QRVJDRU5UQUdFIiwiREVGQVVMVF9DT05URU5UX1NJWkUiLCJERUZBVUxUX01JTl9JQ09OX1NJWkUiLCJTdGFja3NBY2NvcmRpb25Cb3giLCJjb25zdHJ1Y3RvciIsInN1YnN0YW5jZXMiLCJ4T2Zmc2V0cyIsInRpdGxlU3RyaW5nUHJvcGVydHkiLCJleHBhbmRlZFByb3BlcnR5IiwicHJvdmlkZWRPcHRpb25zIiwiYXNzZXJ0IiwibGVuZ3RoIiwib3B0aW9ucyIsImNvbnRlbnRTaXplIiwibWluSWNvblNpemUiLCJtYXhRdWFudGl0eSIsImJveFlNYXJnaW4iLCJmaWxsIiwiQk9YX0ZJTEwiLCJzdHJva2UiLCJCT1hfU1RST0tFIiwiY29ybmVyUmFkaXVzIiwiZXhwYW5kQ29sbGFwc2VCdXR0b25PcHRpb25zIiwidG91Y2hBcmVhWERpbGF0aW9uIiwidG91Y2hBcmVhWURpbGF0aW9uIiwidGl0bGVCYXJPcHRpb25zIiwiU1RBVFVTX0JBUl9GSUxMIiwidGl0bGVBbGlnblgiLCJidXR0b25BbGlnbiIsImNvbnRlbnRYTWFyZ2luIiwiY29udGVudFlNYXJnaW4iLCJjb250ZW50WVNwYWNpbmciLCJOdW1iZXIiLCJpc0ludGVnZXIiLCJ0aXRsZVRleHQiLCJmb250IiwibWF4V2lkdGgiLCJ3aWR0aCIsInRhbmRlbSIsImNyZWF0ZVRhbmRlbSIsInNldFNjYWxlTWFnbml0dWRlIiwiTWF0aCIsIm1pbiIsInRpdGxlTm9kZSIsImNvbnRlbnQiLCJyZWN0YW5nbGUiLCJoZWlnaHQiLCJhZGRDaGlsZCIsIm1heEljb25IZWlnaHQiLCJtYXgiLCJfIiwibWF4QnkiLCJzdWJzdGFuY2UiLCJpY29uUHJvcGVydHkiLCJ2YWx1ZSIsInN0YWNrTm9kZXMiLCJkZWx0YVkiLCJzdGFydENlbnRlclkiLCJpIiwic3RhY2tOb2RlIiwicXVhbnRpdHlQcm9wZXJ0eSIsImNlbnRlclgiLCJwdXNoIiwiZGlzcG9zZVN0YWNrc0FjY29yZGlvbkJveCIsImRpc3Bvc2UiLCJmb3JFYWNoIiwibm9kZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiU3RhY2tzQWNjb3JkaW9uQm94LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE0LTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqICBBY2NvcmRpb24gYm94IHRoYXQgc2hvd3Mgc3RhY2tzIG9mIHN1YnN0YW5jZXMuIFVzZWQgaW4gdGhlICdTYW5kd2ljaGVzJyBhbmQgJ01vbGVjdWxlcycgc2NyZWVucy5cclxuICpcclxuICogIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXHJcbiAqL1xyXG5cclxuaW1wb3J0IERpbWVuc2lvbjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL0RpbWVuc2lvbjIuanMnO1xyXG5pbXBvcnQgeyBOb2RlLCBSZWN0YW5nbGUsIFRleHQgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgQWNjb3JkaW9uQm94LCB7IEFjY29yZGlvbkJveE9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvQWNjb3JkaW9uQm94LmpzJztcclxuaW1wb3J0IHJlYWN0YW50c1Byb2R1Y3RzQW5kTGVmdG92ZXJzIGZyb20gJy4uLy4uL3JlYWN0YW50c1Byb2R1Y3RzQW5kTGVmdG92ZXJzLmpzJztcclxuaW1wb3J0IFJQQUxDb2xvcnMgZnJvbSAnLi4vUlBBTENvbG9ycy5qcyc7XHJcbmltcG9ydCBTdGFja05vZGUgZnJvbSAnLi9TdGFja05vZGUuanMnO1xyXG5pbXBvcnQgU3Vic3RhbmNlIGZyb20gJy4uL21vZGVsL1N1YnN0YW5jZS5qcyc7XHJcbmltcG9ydCBvcHRpb25pemUgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCBQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1Byb3BlcnR5LmpzJztcclxuaW1wb3J0IFRSZWFkT25seVByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvVFJlYWRPbmx5UHJvcGVydHkuanMnO1xyXG5pbXBvcnQgUGhldEZvbnQgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1BoZXRGb250LmpzJztcclxuaW1wb3J0IFBpY2tSZXF1aXJlZCBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvUGlja1JlcXVpcmVkLmpzJztcclxuXHJcbmNvbnN0IE1BWF9USVRMRV9QRVJDRU5UQUdFID0gMC43NTsgLy8gdGl0bGUgd2lsbCBiZSBzY2FsZWQgZG93biBpZiBncmVhdGVyIHRoYW4gdGhpcyBwZXJjZW50YWdlIG9mIHRoZSBib3ggd2lkdGhcclxuY29uc3QgREVGQVVMVF9DT05URU5UX1NJWkUgPSBuZXcgRGltZW5zaW9uMiggMTAwLCAxMDAgKTtcclxuY29uc3QgREVGQVVMVF9NSU5fSUNPTl9TSVpFID0gbmV3IERpbWVuc2lvbjIoIDAsIDAgKTtcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSB7XHJcbiAgY29udGVudFNpemU/OiBEaW1lbnNpb24yOyAvLyBzaXplIG9mIGJveCdzIGNvbnRlbnRcclxuICBtaW5JY29uU2l6ZT86IERpbWVuc2lvbjI7IC8vIG1pbmltdW0gYW1vdW50IG9mIGxheW91dCBzcGFjZSByZXNlcnZlZCBmb3IgU3Vic3RhbmNlIGljb25zXHJcbiAgbWF4UXVhbnRpdHk/OiBudW1iZXI7IC8vIG1heCBzdWJzdGFuY2VzIGluIGEgc3RhY2tcclxuICBib3hZTWFyZ2luPzogbnVtYmVyOyAvLyB2ZXJ0aWNhbCBtYXJnaW4gYmV0d2VlbiB0aGUgaW5uZXIgZWRnZSBvZiBib3ggYW5kIHRoZSB0YWxsZXN0IG5vZGVcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIFN0YWNrc0FjY29yZGlvbkJveE9wdGlvbnMgPSBTZWxmT3B0aW9ucyAmIFBpY2tSZXF1aXJlZDxBY2NvcmRpb25Cb3hPcHRpb25zLCAndGFuZGVtJz47XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdGFja3NBY2NvcmRpb25Cb3ggZXh0ZW5kcyBBY2NvcmRpb25Cb3gge1xyXG5cclxuICBwcml2YXRlIHJlYWRvbmx5IGRpc3Bvc2VTdGFja3NBY2NvcmRpb25Cb3g6ICgpID0+IHZvaWQ7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSBzdWJzdGFuY2VzIC0gc3Vic3RhbmNlcyBpbiB0aGUgYm94XHJcbiAgICogQHBhcmFtIHhPZmZzZXRzIC0geC1vZmZzZXRzIG9mIGVhY2ggc3Vic3RhbmNlLCBpbiB0aGUgc2FtZSBvcmRlciBhcyBzdWJzdGFuY2VzIHBhcmFtXHJcbiAgICogQHBhcmFtIHRpdGxlU3RyaW5nUHJvcGVydHlcclxuICAgKiBAcGFyYW0gZXhwYW5kZWRQcm9wZXJ0eVxyXG4gICAqIEBwYXJhbSBbcHJvdmlkZWRPcHRpb25zXVxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25zdHJ1Y3Rvciggc3Vic3RhbmNlczogU3Vic3RhbmNlW10sXHJcbiAgICAgICAgICAgICAgICAgICAgICB4T2Zmc2V0czogbnVtYmVyW10sXHJcbiAgICAgICAgICAgICAgICAgICAgICB0aXRsZVN0cmluZ1Byb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxzdHJpbmc+LFxyXG4gICAgICAgICAgICAgICAgICAgICAgZXhwYW5kZWRQcm9wZXJ0eTogUHJvcGVydHk8Ym9vbGVhbj4sXHJcbiAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlZE9wdGlvbnM/OiBTdGFja3NBY2NvcmRpb25Cb3hPcHRpb25zICkge1xyXG5cclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIHN1YnN0YW5jZXMubGVuZ3RoID4gMCApO1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggc3Vic3RhbmNlcy5sZW5ndGggPT09IHhPZmZzZXRzLmxlbmd0aCApO1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8U3RhY2tzQWNjb3JkaW9uQm94T3B0aW9ucywgU2VsZk9wdGlvbnMsIEFjY29yZGlvbkJveE9wdGlvbnM+KCkoIHtcclxuXHJcbiAgICAgIC8vIFNlbGZPcHRpb25zXHJcbiAgICAgIGNvbnRlbnRTaXplOiBERUZBVUxUX0NPTlRFTlRfU0laRSxcclxuICAgICAgbWluSWNvblNpemU6IERFRkFVTFRfTUlOX0lDT05fU0laRSxcclxuICAgICAgbWF4UXVhbnRpdHk6IDIsXHJcbiAgICAgIGJveFlNYXJnaW46IDYsXHJcblxyXG4gICAgICAvLyBBY2NvcmRpb25Cb3hPcHRpb25zXHJcbiAgICAgIGZpbGw6IFJQQUxDb2xvcnMuQk9YX0ZJTEwsXHJcbiAgICAgIHN0cm9rZTogUlBBTENvbG9ycy5CT1hfU1RST0tFLFxyXG4gICAgICBjb3JuZXJSYWRpdXM6IDMsXHJcbiAgICAgIGV4cGFuZGVkUHJvcGVydHk6IGV4cGFuZGVkUHJvcGVydHksXHJcbiAgICAgIGV4cGFuZENvbGxhcHNlQnV0dG9uT3B0aW9uczoge1xyXG4gICAgICAgIHRvdWNoQXJlYVhEaWxhdGlvbjogMTAsXHJcbiAgICAgICAgdG91Y2hBcmVhWURpbGF0aW9uOiAxMFxyXG4gICAgICB9LFxyXG4gICAgICB0aXRsZUJhck9wdGlvbnM6IHtcclxuICAgICAgICBmaWxsOiBSUEFMQ29sb3JzLlNUQVRVU19CQVJfRklMTFxyXG4gICAgICB9LFxyXG4gICAgICB0aXRsZUFsaWduWDogJ2NlbnRlcicsXHJcbiAgICAgIGJ1dHRvbkFsaWduOiAnbGVmdCcsXHJcbiAgICAgIGNvbnRlbnRYTWFyZ2luOiAwLFxyXG4gICAgICBjb250ZW50WU1hcmdpbjogMCxcclxuICAgICAgY29udGVudFlTcGFjaW5nOiAwXHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBOdW1iZXIuaXNJbnRlZ2VyKCBvcHRpb25zLm1heFF1YW50aXR5ICkgJiYgb3B0aW9ucy5tYXhRdWFudGl0eSA+IDAgKTtcclxuXHJcbiAgICAvLyBzY2FsZSB0aGUgdGl0bGUgdG8gZml0XHJcbiAgICBjb25zdCB0aXRsZVRleHQgPSBuZXcgVGV4dCggdGl0bGVTdHJpbmdQcm9wZXJ0eSwge1xyXG4gICAgICBmb250OiBuZXcgUGhldEZvbnQoIDE0ICksXHJcbiAgICAgIGZpbGw6ICd3aGl0ZScsXHJcbiAgICAgIG1heFdpZHRoOiAwLjc1ICogb3B0aW9ucy5jb250ZW50U2l6ZS53aWR0aCxcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICd0aXRsZVRleHQnIClcclxuICAgIH0gKTtcclxuICAgIHRpdGxlVGV4dC5zZXRTY2FsZU1hZ25pdHVkZSggTWF0aC5taW4oIDEsIE1BWF9USVRMRV9QRVJDRU5UQUdFICogb3B0aW9ucy5jb250ZW50U2l6ZS53aWR0aCAvIHRpdGxlVGV4dC53aWR0aCApICk7XHJcbiAgICBvcHRpb25zLnRpdGxlTm9kZSA9IHRpdGxlVGV4dDtcclxuXHJcbiAgICAvLyBjb250ZW50IGZvciB0aGUgYWNjb3JkaW9uIGJveFxyXG4gICAgY29uc3QgY29udGVudCA9IG5ldyBOb2RlKCk7XHJcblxyXG4gICAgLy8gcmVjdGFuZ2xlIHdpdGggbm8gZmlsbCwgdGhpcyBlbnN1cmVzIGNvbnN0YW50IHNpemUgb2YgdGhlIGNvbnRlbnRcclxuICAgIGNvbnN0IHJlY3RhbmdsZSA9IG5ldyBSZWN0YW5nbGUoIDAsIDAsIG9wdGlvbnMuY29udGVudFNpemUud2lkdGgsIG9wdGlvbnMuY29udGVudFNpemUuaGVpZ2h0LCB7XHJcbiAgICAgIGNvcm5lclJhZGl1czogb3B0aW9ucy5jb3JuZXJSYWRpdXNcclxuICAgIH0gKTtcclxuICAgIGNvbnRlbnQuYWRkQ2hpbGQoIHJlY3RhbmdsZSApO1xyXG5cclxuICAgIC8vIGNvbXB1dGUgbWF4IGhlaWdodCBvZiB0aGUgbm9kZXMgaW4gdGhlIGJveFxyXG4gICAgY29uc3QgbWF4SWNvbkhlaWdodCA9IE1hdGgubWF4KFxyXG4gICAgICBvcHRpb25zLm1pbkljb25TaXplLmhlaWdodCxcclxuICAgICAgXy5tYXhCeSggc3Vic3RhbmNlcywgc3Vic3RhbmNlID0+IHN1YnN0YW5jZS5pY29uUHJvcGVydHkudmFsdWUuaGVpZ2h0ICkhLmljb25Qcm9wZXJ0eS52YWx1ZS5oZWlnaHQgKTtcclxuXHJcbiAgICAvLyB2ZXJ0aWNhbCBzdGFja3Mgb2Ygbm9kZXMgaW5zaWRlIHRoZSBib3hcclxuICAgIGNvbnN0IHN0YWNrTm9kZXM6IFN0YWNrTm9kZVtdID0gW107XHJcbiAgICBjb25zdCBkZWx0YVkgPSAoIG9wdGlvbnMuY29udGVudFNpemUuaGVpZ2h0IC0gKCAyICogb3B0aW9ucy5ib3hZTWFyZ2luICkgLSBtYXhJY29uSGVpZ2h0ICkgLyAoIG9wdGlvbnMubWF4UXVhbnRpdHkgLSAxICk7XHJcbiAgICBjb25zdCBzdGFydENlbnRlclkgPSByZWN0YW5nbGUuaGVpZ2h0IC0gb3B0aW9ucy5ib3hZTWFyZ2luIC0gKCBtYXhJY29uSGVpZ2h0IC8gMiApO1xyXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgc3Vic3RhbmNlcy5sZW5ndGg7IGkrKyApIHtcclxuICAgICAgY29uc3Qgc3Vic3RhbmNlID0gc3Vic3RhbmNlc1sgaSBdO1xyXG4gICAgICBjb25zdCBzdGFja05vZGUgPSBuZXcgU3RhY2tOb2RlKCBvcHRpb25zLmNvbnRlbnRTaXplLmhlaWdodCwgc3Vic3RhbmNlLmljb25Qcm9wZXJ0eSwgc3Vic3RhbmNlLnF1YW50aXR5UHJvcGVydHksIHN0YXJ0Q2VudGVyWSwgZGVsdGFZLCB7XHJcbiAgICAgICAgY2VudGVyWDogeE9mZnNldHNbIGkgXVxyXG4gICAgICB9ICk7XHJcbiAgICAgIGNvbnRlbnQuYWRkQ2hpbGQoIHN0YWNrTm9kZSApO1xyXG4gICAgICBzdGFja05vZGVzLnB1c2goIHN0YWNrTm9kZSApO1xyXG4gICAgfVxyXG5cclxuICAgIHN1cGVyKCBjb250ZW50LCBvcHRpb25zICk7XHJcblxyXG4gICAgdGhpcy5kaXNwb3NlU3RhY2tzQWNjb3JkaW9uQm94ID0gKCkgPT4ge1xyXG4gICAgICB0aXRsZVRleHQuZGlzcG9zZSgpO1xyXG4gICAgICBzdGFja05vZGVzLmZvckVhY2goIG5vZGUgPT4gbm9kZS5kaXNwb3NlKCkgKTtcclxuICAgICAgc3RhY2tOb2Rlcy5sZW5ndGggPSAwO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvdmVycmlkZSBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgdGhpcy5kaXNwb3NlU3RhY2tzQWNjb3JkaW9uQm94KCk7XHJcbiAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgfVxyXG59XHJcblxyXG5yZWFjdGFudHNQcm9kdWN0c0FuZExlZnRvdmVycy5yZWdpc3RlciggJ1N0YWNrc0FjY29yZGlvbkJveCcsIFN0YWNrc0FjY29yZGlvbkJveCApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxVQUFVLE1BQU0sa0NBQWtDO0FBQ3pELFNBQVNDLElBQUksRUFBRUMsU0FBUyxFQUFFQyxJQUFJLFFBQVEsbUNBQW1DO0FBQ3pFLE9BQU9DLFlBQVksTUFBK0Isb0NBQW9DO0FBQ3RGLE9BQU9DLDZCQUE2QixNQUFNLHdDQUF3QztBQUNsRixPQUFPQyxVQUFVLE1BQU0sa0JBQWtCO0FBQ3pDLE9BQU9DLFNBQVMsTUFBTSxnQkFBZ0I7QUFFdEMsT0FBT0MsU0FBUyxNQUFNLHVDQUF1QztBQUc3RCxPQUFPQyxRQUFRLE1BQU0seUNBQXlDO0FBRzlELE1BQU1DLG9CQUFvQixHQUFHLElBQUksQ0FBQyxDQUFDO0FBQ25DLE1BQU1DLG9CQUFvQixHQUFHLElBQUlYLFVBQVUsQ0FBRSxHQUFHLEVBQUUsR0FBSSxDQUFDO0FBQ3ZELE1BQU1ZLHFCQUFxQixHQUFHLElBQUlaLFVBQVUsQ0FB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