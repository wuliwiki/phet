// Copyright 2014-2023, University of Colorado Boulder

/**
 * A challenge consists of a reaction (with specific before and after quantities), the user's 'guess',
 * and a specification of which part of the reaction (before or after) the user needs to guess.
 * This is essentially a data structure that keeps all of these associated things together.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import optionize from '../../../../phet-core/js/optionize.js';
import reactantsProductsAndLeftovers from '../../reactantsProductsAndLeftovers.js';
import GameGuess from './GameGuess.js';
export default class Challenge {
  // which box (Before or After) needs to be guessed

  // points awarded for this challenge

  constructor(reaction, interactiveBox, providedOptions) {
    const options = optionize()({
      // SelfOptions
      moleculesVisible: true,
      numbersVisible: true
    }, providedOptions);
    this.reaction = reaction;
    this.interactiveBox = interactiveBox;
    this.moleculesVisible = options.moleculesVisible;
    this.numbersVisible = options.numbersVisible;
    this.guess = new GameGuess(reaction, interactiveBox);
    this.points = 0;
  }
  reset() {
    this.guess.reset();
    this.points = 0;
  }

  // Does the user's guess match the correct answer?
  isCorrect() {
    let i;
    let correct = true;
    // all reactants must be equal
    for (i = 0; correct && i < this.reaction.reactants.length; i++) {
      correct = this.guess.reactants[i].equals(this.reaction.reactants[i]);
    }
    // all products must be equal
    for (i = 0; correct && i < this.reaction.products.length; i++) {
      correct = this.guess.products[i].equals(this.reaction.products[i]);
    }
    // all leftovers must be equal
    for (i = 0; correct && i < this.reaction.leftovers.length; i++) {
      correct = this.guess.leftovers[i].equals(this.reaction.leftovers[i]);
    }
    return correct;
  }

  // Reveals the correct answer by copying the answer's reaction quantities to the guess.
  showAnswer() {
    let i;
    for (i = 0; i < this.guess.reactants.length; i++) {
      this.guess.reactants[i].quantityProperty.value = this.reaction.reactants[i].quantityProperty.value;
    }
    for (i = 0; i < this.guess.products.length; i++) {
      this.guess.products[i].quantityProperty.value = this.reaction.products[i].quantityProperty.value;
    }
    for (i = 0; i < this.guess.leftovers.length; i++) {
      this.guess.leftovers[i].quantityProperty.value = this.reaction.leftovers[i].quantityProperty.value;
    }
  }
}
reactantsProductsAndLeftovers.register('Challenge', Challenge);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcHRpb25pemUiLCJyZWFjdGFudHNQcm9kdWN0c0FuZExlZnRvdmVycyIsIkdhbWVHdWVzcyIsIkNoYWxsZW5nZSIsImNvbnN0cnVjdG9yIiwicmVhY3Rpb24iLCJpbnRlcmFjdGl2ZUJveCIsInByb3ZpZGVkT3B0aW9ucyIsIm9wdGlvbnMiLCJtb2xlY3VsZXNWaXNpYmxlIiwibnVtYmVyc1Zpc2libGUiLCJndWVzcyIsInBvaW50cyIsInJlc2V0IiwiaXNDb3JyZWN0IiwiaSIsImNvcnJlY3QiLCJyZWFjdGFudHMiLCJsZW5ndGgiLCJlcXVhbHMiLCJwcm9kdWN0cyIsImxlZnRvdmVycyIsInNob3dBbnN3ZXIiLCJxdWFudGl0eVByb3BlcnR5IiwidmFsdWUiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkNoYWxsZW5nZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNC0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBBIGNoYWxsZW5nZSBjb25zaXN0cyBvZiBhIHJlYWN0aW9uICh3aXRoIHNwZWNpZmljIGJlZm9yZSBhbmQgYWZ0ZXIgcXVhbnRpdGllcyksIHRoZSB1c2VyJ3MgJ2d1ZXNzJyxcclxuICogYW5kIGEgc3BlY2lmaWNhdGlvbiBvZiB3aGljaCBwYXJ0IG9mIHRoZSByZWFjdGlvbiAoYmVmb3JlIG9yIGFmdGVyKSB0aGUgdXNlciBuZWVkcyB0byBndWVzcy5cclxuICogVGhpcyBpcyBlc3NlbnRpYWxseSBhIGRhdGEgc3RydWN0dXJlIHRoYXQga2VlcHMgYWxsIG9mIHRoZXNlIGFzc29jaWF0ZWQgdGhpbmdzIHRvZ2V0aGVyLlxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCBvcHRpb25pemUgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCBCb3hUeXBlIGZyb20gJy4uLy4uL2NvbW1vbi9tb2RlbC9Cb3hUeXBlLmpzJztcclxuaW1wb3J0IFJlYWN0aW9uIGZyb20gJy4uLy4uL2NvbW1vbi9tb2RlbC9SZWFjdGlvbi5qcyc7XHJcbmltcG9ydCByZWFjdGFudHNQcm9kdWN0c0FuZExlZnRvdmVycyBmcm9tICcuLi8uLi9yZWFjdGFudHNQcm9kdWN0c0FuZExlZnRvdmVycy5qcyc7XHJcbmltcG9ydCBHYW1lR3Vlc3MgZnJvbSAnLi9HYW1lR3Vlc3MuanMnO1xyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IHtcclxuICBtb2xlY3VsZXNWaXNpYmxlPzogYm9vbGVhbjsgLy8gYXJlIG1vbGVjdWxlcyB2aXNpYmxlIHdoZW4gcGxheWluZyB0aGUgY2hhbGxlbmdlP1xyXG4gIG51bWJlcnNWaXNpYmxlPzogYm9vbGVhbjsgLy8gYXJlIG51bWJlcnMgdmlzaWJsZSB3aGVuIHBsYXlpbmcgdGhlIGNoYWxsZW5nZT9cclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIENoYWxsZW5nZU9wdGlvbnMgPSBTZWxmT3B0aW9ucztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENoYWxsZW5nZSB7XHJcblxyXG4gIHB1YmxpYyByZWFkb25seSByZWFjdGlvbjogUmVhY3Rpb247XHJcbiAgcHVibGljIHJlYWRvbmx5IGludGVyYWN0aXZlQm94OiBCb3hUeXBlOyAvLyB3aGljaCBib3ggKEJlZm9yZSBvciBBZnRlcikgbmVlZHMgdG8gYmUgZ3Vlc3NlZFxyXG4gIHB1YmxpYyByZWFkb25seSBtb2xlY3VsZXNWaXNpYmxlOiBib29sZWFuO1xyXG4gIHB1YmxpYyByZWFkb25seSBudW1iZXJzVmlzaWJsZTogYm9vbGVhbjtcclxuICBwdWJsaWMgcmVhZG9ubHkgZ3Vlc3M6IEdhbWVHdWVzcztcclxuICBwdWJsaWMgcG9pbnRzOiBudW1iZXI7IC8vIHBvaW50cyBhd2FyZGVkIGZvciB0aGlzIGNoYWxsZW5nZVxyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIHJlYWN0aW9uOiBSZWFjdGlvbiwgaW50ZXJhY3RpdmVCb3g6IEJveFR5cGUsIHByb3ZpZGVkT3B0aW9ucz86IENoYWxsZW5nZU9wdGlvbnMgKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxDaGFsbGVuZ2VPcHRpb25zLCBTZWxmT3B0aW9ucz4oKSgge1xyXG5cclxuICAgICAgLy8gU2VsZk9wdGlvbnNcclxuICAgICAgbW9sZWN1bGVzVmlzaWJsZTogdHJ1ZSxcclxuICAgICAgbnVtYmVyc1Zpc2libGU6IHRydWVcclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIHRoaXMucmVhY3Rpb24gPSByZWFjdGlvbjtcclxuICAgIHRoaXMuaW50ZXJhY3RpdmVCb3ggPSBpbnRlcmFjdGl2ZUJveDtcclxuICAgIHRoaXMubW9sZWN1bGVzVmlzaWJsZSA9IG9wdGlvbnMubW9sZWN1bGVzVmlzaWJsZTtcclxuICAgIHRoaXMubnVtYmVyc1Zpc2libGUgPSBvcHRpb25zLm51bWJlcnNWaXNpYmxlO1xyXG4gICAgdGhpcy5ndWVzcyA9IG5ldyBHYW1lR3Vlc3MoIHJlYWN0aW9uLCBpbnRlcmFjdGl2ZUJveCApO1xyXG4gICAgdGhpcy5wb2ludHMgPSAwO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5ndWVzcy5yZXNldCgpO1xyXG4gICAgdGhpcy5wb2ludHMgPSAwO1xyXG4gIH1cclxuXHJcbiAgLy8gRG9lcyB0aGUgdXNlcidzIGd1ZXNzIG1hdGNoIHRoZSBjb3JyZWN0IGFuc3dlcj9cclxuICBwdWJsaWMgaXNDb3JyZWN0KCk6IGJvb2xlYW4ge1xyXG4gICAgbGV0IGk7XHJcbiAgICBsZXQgY29ycmVjdCA9IHRydWU7XHJcbiAgICAvLyBhbGwgcmVhY3RhbnRzIG11c3QgYmUgZXF1YWxcclxuICAgIGZvciAoIGkgPSAwOyBjb3JyZWN0ICYmIGkgPCB0aGlzLnJlYWN0aW9uLnJlYWN0YW50cy5sZW5ndGg7IGkrKyApIHtcclxuICAgICAgY29ycmVjdCA9IHRoaXMuZ3Vlc3MucmVhY3RhbnRzWyBpIF0uZXF1YWxzKCB0aGlzLnJlYWN0aW9uLnJlYWN0YW50c1sgaSBdICk7XHJcbiAgICB9XHJcbiAgICAvLyBhbGwgcHJvZHVjdHMgbXVzdCBiZSBlcXVhbFxyXG4gICAgZm9yICggaSA9IDA7IGNvcnJlY3QgJiYgaSA8IHRoaXMucmVhY3Rpb24ucHJvZHVjdHMubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgIGNvcnJlY3QgPSB0aGlzLmd1ZXNzLnByb2R1Y3RzWyBpIF0uZXF1YWxzKCB0aGlzLnJlYWN0aW9uLnByb2R1Y3RzWyBpIF0gKTtcclxuICAgIH1cclxuICAgIC8vIGFsbCBsZWZ0b3ZlcnMgbXVzdCBiZSBlcXVhbFxyXG4gICAgZm9yICggaSA9IDA7IGNvcnJlY3QgJiYgaSA8IHRoaXMucmVhY3Rpb24ubGVmdG92ZXJzLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICBjb3JyZWN0ID0gdGhpcy5ndWVzcy5sZWZ0b3ZlcnNbIGkgXS5lcXVhbHMoIHRoaXMucmVhY3Rpb24ubGVmdG92ZXJzWyBpIF0gKTtcclxuICAgIH1cclxuICAgIHJldHVybiBjb3JyZWN0O1xyXG4gIH1cclxuXHJcbiAgLy8gUmV2ZWFscyB0aGUgY29ycmVjdCBhbnN3ZXIgYnkgY29weWluZyB0aGUgYW5zd2VyJ3MgcmVhY3Rpb24gcXVhbnRpdGllcyB0byB0aGUgZ3Vlc3MuXHJcbiAgcHVibGljIHNob3dBbnN3ZXIoKTogdm9pZCB7XHJcbiAgICBsZXQgaTtcclxuICAgIGZvciAoIGkgPSAwOyBpIDwgdGhpcy5ndWVzcy5yZWFjdGFudHMubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgIHRoaXMuZ3Vlc3MucmVhY3RhbnRzWyBpIF0ucXVhbnRpdHlQcm9wZXJ0eS52YWx1ZSA9IHRoaXMucmVhY3Rpb24ucmVhY3RhbnRzWyBpIF0ucXVhbnRpdHlQcm9wZXJ0eS52YWx1ZTtcclxuICAgIH1cclxuICAgIGZvciAoIGkgPSAwOyBpIDwgdGhpcy5ndWVzcy5wcm9kdWN0cy5sZW5ndGg7IGkrKyApIHtcclxuICAgICAgdGhpcy5ndWVzcy5wcm9kdWN0c1sgaSBdLnF1YW50aXR5UHJvcGVydHkudmFsdWUgPSB0aGlzLnJlYWN0aW9uLnByb2R1Y3RzWyBpIF0ucXVhbnRpdHlQcm9wZXJ0eS52YWx1ZTtcclxuICAgIH1cclxuICAgIGZvciAoIGkgPSAwOyBpIDwgdGhpcy5ndWVzcy5sZWZ0b3ZlcnMubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgIHRoaXMuZ3Vlc3MubGVmdG92ZXJzWyBpIF0ucXVhbnRpdHlQcm9wZXJ0eS52YWx1ZSA9IHRoaXMucmVhY3Rpb24ubGVmdG92ZXJzWyBpIF0ucXVhbnRpdHlQcm9wZXJ0eS52YWx1ZTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbnJlYWN0YW50c1Byb2R1Y3RzQW5kTGVmdG92ZXJzLnJlZ2lzdGVyKCAnQ2hhbGxlbmdlJywgQ2hhbGxlbmdlICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxTQUFTLE1BQU0sdUNBQXVDO0FBRzdELE9BQU9DLDZCQUE2QixNQUFNLHdDQUF3QztBQUNsRixPQUFPQyxTQUFTLE1BQU0sZ0JBQWdCO0FBU3RDLGVBQWUsTUFBTUMsU0FBUyxDQUFDO0VBR1k7O0VBSWxCOztFQUVoQkMsV0FBV0EsQ0FBRUMsUUFBa0IsRUFBRUMsY0FBdUIsRUFBRUMsZUFBa0MsRUFBRztJQUVwRyxNQUFNQyxPQUFPLEdBQUdSLFNBQVMsQ0FBZ0MsQ0FBQyxDQUFFO01BRTFEO01BQ0FTLGdCQUFnQixFQUFFLElBQUk7TUFDdEJDLGNBQWMsRUFBRTtJQUNsQixDQUFDLEVBQUVILGVBQWdCLENBQUM7SUFFcEIsSUFBSSxDQUFDRixRQUFRLEdBQUdBLFFBQVE7SUFDeEIsSUFBSSxDQUFDQyxjQUFjLEdBQUdBLGNBQWM7SUFDcEMsSUFBSSxDQUFDRyxnQkFBZ0IsR0FBR0QsT0FBTyxDQUFDQyxnQkFBZ0I7SUFDaEQsSUFBSSxDQUFDQyxjQUFj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