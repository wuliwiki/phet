// Copyright 2015-2023, University of Colorado Boulder

/**
 * Model for a switch which can be opened and closed.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */

import BooleanProperty from '../../../axon/js/BooleanProperty.js';
import NumberProperty from '../../../axon/js/NumberProperty.js';
import Utils from '../../../dot/js/Utils.js';
import optionize from '../../../phet-core/js/optionize.js';
import Tandem from '../../../tandem/js/Tandem.js';
import CCKCConstants from '../CCKCConstants.js';
import circuitConstructionKitCommon from '../circuitConstructionKitCommon.js';
import FixedCircuitElement from './FixedCircuitElement.js';
// constants
const SWITCH_LENGTH = CCKCConstants.SWITCH_LENGTH;
const SWITCH_START = CCKCConstants.SWITCH_START;
const SWITCH_END = CCKCConstants.SWITCH_END;
export default class Switch extends FixedCircuitElement {
  // the resistance in ohms

  // whether the switch is closed (and current can flow through it)

  constructor(startVertex, endVertex, tandem, circuit) {
    const options = optionize()({
      closed: false,
      // Do not instrument isEditableProperty for switches as there is nothing to edit
      isEditablePropertyOptions: {
        tandem: Tandem.OPT_OUT
      },
      // Use the bounding box of the open lifelike switch to show bounds for all combinations of open/closed x lifelike/schematic
      // See https://github.com/phetsims/circuit-construction-kit-dc/issues/132
      isSizeChangedOnViewChange: false
    });
    super(startVertex, endVertex, SWITCH_LENGTH, tandem, options);
    this.resistanceProperty = new NumberProperty(0);
    this.isClosedProperty = new BooleanProperty(options.closed, {
      tandem: tandem.createTandem('isClosedProperty'),
      phetioFeatured: true
    });
    this.isClosedProperty.link(closed => {
      this.resistanceProperty.value = closed ? 0 : CCKCConstants.MAX_RESISTANCE;
      circuit && circuit.componentEditedEmitter.emit();
    });
  }

  /**
   * Dispose of this and PhET-iO instrumented children, so they will be unregistered.
   */
  dispose() {
    this.isClosedProperty.dispose();
    super.dispose();
  }

  /**
   * Returns the position and angle of the given point along the Switch
   * @param distanceAlongWire
   * @param matrix to be updated with the position and angle, so that garbage isn't created each time
   */
  updateMatrixForPoint(distanceAlongWire, matrix) {
    const startPosition = this.startPositionProperty.get();
    const endPosition = this.endPositionProperty.get();
    const fractionAlongWire = distanceAlongWire / this.chargePathLength;

    // If the charge is halfway up the switch lever for an open switch, show it along the raised lever
    if (fractionAlongWire > SWITCH_START && fractionAlongWire < SWITCH_END && !this.isClosedProperty.get()) {
      const pivot = startPosition.blend(endPosition, SWITCH_START);
      const twoThirdsPoint = startPosition.blend(endPosition, SWITCH_END);
      const rotatedPoint = twoThirdsPoint.rotatedAboutPoint(pivot, -Math.PI / 4);
      const distanceAlongSegment = Utils.linear(SWITCH_START, SWITCH_END, 0, 1, fractionAlongWire);
      const translation = pivot.blend(rotatedPoint, distanceAlongSegment);
      matrix.setToTranslationRotationPoint(translation, endPosition.minus(startPosition).angle);
    } else {
      // For a closed switch, there is a straight path from the start vertex to the end vertex
      super.updateMatrixForPoint(distanceAlongWire, matrix);
    }
  }

  /**
   * Get the properties so that the circuit can be solved when changed.
   */
  getCircuitProperties() {
    return [this.resistanceProperty, this.isClosedProperty];
  }
}
circuitConstructionKitCommon.register('Switch', Switch);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb29sZWFuUHJvcGVydHkiLCJOdW1iZXJQcm9wZXJ0eSIsIlV0aWxzIiwib3B0aW9uaXplIiwiVGFuZGVtIiwiQ0NLQ0NvbnN0YW50cyIsImNpcmN1aXRDb25zdHJ1Y3Rpb25LaXRDb21tb24iLCJGaXhlZENpcmN1aXRFbGVtZW50IiwiU1dJVENIX0xFTkdUSCIsIlNXSVRDSF9TVEFSVCIsIlNXSVRDSF9FTkQiLCJTd2l0Y2giLCJjb25zdHJ1Y3RvciIsInN0YXJ0VmVydGV4IiwiZW5kVmVydGV4IiwidGFuZGVtIiwiY2lyY3VpdCIsIm9wdGlvbnMiLCJjbG9zZWQiLCJpc0VkaXRhYmxlUHJvcGVydHlPcHRpb25zIiwiT1BUX09VVCIsImlzU2l6ZUNoYW5nZWRPblZpZXdDaGFuZ2UiLCJyZXNpc3RhbmNlUHJvcGVydHkiLCJpc0Nsb3NlZFByb3BlcnR5IiwiY3JlYXRlVGFuZGVtIiwicGhldGlvRmVhdHVyZWQiLCJsaW5rIiwidmFsdWUiLCJNQVhfUkVTSVNUQU5DRSIsImNvbXBvbmVudEVkaXRlZEVtaXR0ZXIiLCJlbWl0IiwiZGlzcG9zZSIsInVwZGF0ZU1hdHJpeEZvclBvaW50IiwiZGlzdGFuY2VBbG9uZ1dpcmUiLCJtYXRyaXgiLCJzdGFydFBvc2l0aW9uIiwic3RhcnRQb3NpdGlvblByb3BlcnR5IiwiZ2V0IiwiZW5kUG9zaXRpb24iLCJlbmRQb3NpdGlvblByb3BlcnR5IiwiZnJhY3Rpb25BbG9uZ1dpcmUiLCJjaGFyZ2VQYXRoTGVuZ3RoIiwicGl2b3QiLCJibGVuZCIsInR3b1RoaXJkc1BvaW50Iiwicm90YXRlZFBvaW50Iiwicm90YXRlZEFib3V0UG9pbnQiLCJNYXRoIiwiUEkiLCJkaXN0YW5jZUFsb25nU2VnbWVudCIsImxpbmVhciIsInRyYW5zbGF0aW9uIiwic2V0VG9UcmFuc2xhdGlvblJvdGF0aW9uUG9pbnQiLCJtaW51cyIsImFuZ2xlIiwiZ2V0Q2lyY3VpdFByb3BlcnRpZXMiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlN3aXRjaC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNS0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBNb2RlbCBmb3IgYSBzd2l0Y2ggd2hpY2ggY2FuIGJlIG9wZW5lZCBhbmQgY2xvc2VkLlxyXG4gKlxyXG4gKiBAYXV0aG9yIFNhbSBSZWlkIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxyXG4gKi9cclxuXHJcbmltcG9ydCBCb29sZWFuUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vYXhvbi9qcy9Cb29sZWFuUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgTnVtYmVyUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vYXhvbi9qcy9OdW1iZXJQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi9heG9uL2pzL1Byb3BlcnR5LmpzJztcclxuaW1wb3J0IE1hdHJpeDMgZnJvbSAnLi4vLi4vLi4vZG90L2pzL01hdHJpeDMuanMnO1xyXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi4vLi4vLi4vZG90L2pzL1V0aWxzLmpzJztcclxuaW1wb3J0IG9wdGlvbml6ZSBmcm9tICcuLi8uLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuaW1wb3J0IEludGVudGlvbmFsQW55IGZyb20gJy4uLy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9JbnRlbnRpb25hbEFueS5qcyc7XHJcbmltcG9ydCBUYW5kZW0gZnJvbSAnLi4vLi4vLi4vdGFuZGVtL2pzL1RhbmRlbS5qcyc7XHJcbmltcG9ydCBDQ0tDQ29uc3RhbnRzIGZyb20gJy4uL0NDS0NDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgY2lyY3VpdENvbnN0cnVjdGlvbktpdENvbW1vbiBmcm9tICcuLi9jaXJjdWl0Q29uc3RydWN0aW9uS2l0Q29tbW9uLmpzJztcclxuaW1wb3J0IENpcmN1aXQgZnJvbSAnLi9DaXJjdWl0LmpzJztcclxuaW1wb3J0IEZpeGVkQ2lyY3VpdEVsZW1lbnQsIHsgRml4ZWRDaXJjdWl0RWxlbWVudE9wdGlvbnMgfSBmcm9tICcuL0ZpeGVkQ2lyY3VpdEVsZW1lbnQuanMnO1xyXG5pbXBvcnQgVmVydGV4IGZyb20gJy4vVmVydGV4LmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBTV0lUQ0hfTEVOR1RIID0gQ0NLQ0NvbnN0YW50cy5TV0lUQ0hfTEVOR1RIO1xyXG5jb25zdCBTV0lUQ0hfU1RBUlQgPSBDQ0tDQ29uc3RhbnRzLlNXSVRDSF9TVEFSVDtcclxuY29uc3QgU1dJVENIX0VORCA9IENDS0NDb25zdGFudHMuU1dJVENIX0VORDtcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSB7XHJcbiAgY2xvc2VkPzogYm9vbGVhbjtcclxufTtcclxudHlwZSBTd2l0Y2hPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBGaXhlZENpcmN1aXRFbGVtZW50T3B0aW9ucztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN3aXRjaCBleHRlbmRzIEZpeGVkQ2lyY3VpdEVsZW1lbnQge1xyXG5cclxuICAvLyB0aGUgcmVzaXN0YW5jZSBpbiBvaG1zXHJcbiAgcHVibGljIHJlYWRvbmx5IHJlc2lzdGFuY2VQcm9wZXJ0eTogUHJvcGVydHk8bnVtYmVyPjtcclxuXHJcbiAgLy8gd2hldGhlciB0aGUgc3dpdGNoIGlzIGNsb3NlZCAoYW5kIGN1cnJlbnQgY2FuIGZsb3cgdGhyb3VnaCBpdClcclxuICBwdWJsaWMgcmVhZG9ubHkgaXNDbG9zZWRQcm9wZXJ0eTogUHJvcGVydHk8Ym9vbGVhbj47XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3Rvciggc3RhcnRWZXJ0ZXg6IFZlcnRleCwgZW5kVmVydGV4OiBWZXJ0ZXgsIHRhbmRlbTogVGFuZGVtLCBjaXJjdWl0OiBDaXJjdWl0IHwgbnVsbCApIHtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPFN3aXRjaE9wdGlvbnMsIFNlbGZPcHRpb25zLCBGaXhlZENpcmN1aXRFbGVtZW50T3B0aW9ucz4oKSgge1xyXG4gICAgICBjbG9zZWQ6IGZhbHNlLFxyXG5cclxuICAgICAgLy8gRG8gbm90IGluc3RydW1lbnQgaXNFZGl0YWJsZVByb3BlcnR5IGZvciBzd2l0Y2hlcyBhcyB0aGVyZSBpcyBub3RoaW5nIHRvIGVkaXRcclxuICAgICAgaXNFZGl0YWJsZVByb3BlcnR5T3B0aW9uczoge1xyXG4gICAgICAgIHRhbmRlbTogVGFuZGVtLk9QVF9PVVRcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8vIFVzZSB0aGUgYm91bmRpbmcgYm94IG9mIHRoZSBvcGVuIGxpZmVsaWtlIHN3aXRjaCB0byBzaG93IGJvdW5kcyBmb3IgYWxsIGNvbWJpbmF0aW9ucyBvZiBvcGVuL2Nsb3NlZCB4IGxpZmVsaWtlL3NjaGVtYXRpY1xyXG4gICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL2NpcmN1aXQtY29uc3RydWN0aW9uLWtpdC1kYy9pc3N1ZXMvMTMyXHJcbiAgICAgIGlzU2l6ZUNoYW5nZWRPblZpZXdDaGFuZ2U6IGZhbHNlXHJcbiAgICB9ICk7XHJcblxyXG4gICAgc3VwZXIoIHN0YXJ0VmVydGV4LCBlbmRWZXJ0ZXgsIFNXSVRDSF9MRU5HVEgsIHRhbmRlbSwgb3B0aW9ucyApO1xyXG5cclxuICAgIHRoaXMucmVzaXN0YW5jZVByb3BlcnR5ID0gbmV3IE51bWJlclByb3BlcnR5KCAwICk7XHJcblxyXG4gICAgdGhpcy5pc0Nsb3NlZFByb3BlcnR5ID0gbmV3IEJvb2xlYW5Qcm9wZXJ0eSggb3B0aW9ucy5jbG9zZWQsIHtcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnaXNDbG9zZWRQcm9wZXJ0eScgKSxcclxuICAgICAgcGhldGlvRmVhdHVyZWQ6IHRydWVcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLmlzQ2xvc2VkUHJvcGVydHkubGluayggY2xvc2VkID0+IHtcclxuICAgICAgdGhpcy5yZXNpc3RhbmNlUHJvcGVydHkudmFsdWUgPSBjbG9zZWQgPyAwIDogQ0NLQ0NvbnN0YW50cy5NQVhfUkVTSVNUQU5DRTtcclxuICAgICAgY2lyY3VpdCAmJiBjaXJjdWl0LmNvbXBvbmVudEVkaXRlZEVtaXR0ZXIuZW1pdCgpO1xyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRGlzcG9zZSBvZiB0aGlzIGFuZCBQaEVULWlPIGluc3RydW1lbnRlZCBjaGlsZHJlbiwgc28gdGhleSB3aWxsIGJlIHVucmVnaXN0ZXJlZC5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgIHRoaXMuaXNDbG9zZWRQcm9wZXJ0eS5kaXNwb3NlKCk7XHJcbiAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm5zIHRoZSBwb3NpdGlvbiBhbmQgYW5nbGUgb2YgdGhlIGdpdmVuIHBvaW50IGFsb25nIHRoZSBTd2l0Y2hcclxuICAgKiBAcGFyYW0gZGlzdGFuY2VBbG9uZ1dpcmVcclxuICAgKiBAcGFyYW0gbWF0cml4IHRvIGJlIHVwZGF0ZWQgd2l0aCB0aGUgcG9zaXRpb24gYW5kIGFuZ2xlLCBzbyB0aGF0IGdhcmJhZ2UgaXNuJ3QgY3JlYXRlZCBlYWNoIHRpbWVcclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgdXBkYXRlTWF0cml4Rm9yUG9pbnQoIGRpc3RhbmNlQWxvbmdXaXJlOiBudW1iZXIsIG1hdHJpeDogTWF0cml4MyApOiB2b2lkIHtcclxuXHJcbiAgICBjb25zdCBzdGFydFBvc2l0aW9uID0gdGhpcy5zdGFydFBvc2l0aW9uUHJvcGVydHkuZ2V0KCk7XHJcbiAgICBjb25zdCBlbmRQb3NpdGlvbiA9IHRoaXMuZW5kUG9zaXRpb25Qcm9wZXJ0eS5nZXQoKTtcclxuICAgIGNvbnN0IGZyYWN0aW9uQWxvbmdXaXJlID0gZGlzdGFuY2VBbG9uZ1dpcmUgLyB0aGlzLmNoYXJnZVBhdGhMZW5ndGg7XHJcblxyXG4gICAgLy8gSWYgdGhlIGNoYXJnZSBpcyBoYWxmd2F5IHVwIHRoZSBzd2l0Y2ggbGV2ZXIgZm9yIGFuIG9wZW4gc3dpdGNoLCBzaG93IGl0IGFsb25nIHRoZSByYWlzZWQgbGV2ZXJcclxuICAgIGlmICggZnJhY3Rpb25BbG9uZ1dpcmUgPiBTV0lUQ0hfU1RBUlQgJiYgZnJhY3Rpb25BbG9uZ1dpcmUgPCBTV0lUQ0hfRU5EICYmICF0aGlzLmlzQ2xvc2VkUHJvcGVydHkuZ2V0KCkgKSB7XHJcbiAgICAgIGNvbnN0IHBpdm90ID0gc3RhcnRQb3NpdGlvbi5ibGVuZCggZW5kUG9zaXRpb24sIFNXSVRDSF9TVEFSVCApO1xyXG5cclxuICAgICAgY29uc3QgdHdvVGhpcmRzUG9pbnQgPSBzdGFydFBvc2l0aW9uLmJsZW5kKCBlbmRQb3NpdGlvbiwgU1dJVENIX0VORCApO1xyXG4gICAgICBjb25zdCByb3RhdGVkUG9pbnQgPSB0d29UaGlyZHNQb2ludC5yb3RhdGVkQWJvdXRQb2ludCggcGl2b3QsIC1NYXRoLlBJIC8gNCApO1xyXG5cclxuICAgICAgY29uc3QgZGlzdGFuY2VBbG9uZ1NlZ21lbnQgPSBVdGlscy5saW5lYXIoIFNXSVRDSF9TVEFSVCwgU1dJVENIX0VORCwgMCwgMSwgZnJhY3Rpb25BbG9uZ1dpcmUgKTtcclxuICAgICAgY29uc3QgdHJhbnNsYXRpb24gPSBwaXZvdC5ibGVuZCggcm90YXRlZFBvaW50LCBkaXN0YW5jZUFsb25nU2VnbWVudCApO1xyXG4gICAgICBtYXRyaXguc2V0VG9UcmFuc2xhdGlvblJvdGF0aW9uUG9pbnQoIHRyYW5zbGF0aW9uLCBlbmRQb3NpdGlvbi5taW51cyggc3RhcnRQb3NpdGlvbiApLmFuZ2xlICk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuXHJcbiAgICAgIC8vIEZvciBhIGNsb3NlZCBzd2l0Y2gsIHRoZXJlIGlzIGEgc3RyYWlnaHQgcGF0aCBmcm9tIHRoZSBzdGFydCB2ZXJ0ZXggdG8gdGhlIGVuZCB2ZXJ0ZXhcclxuICAgICAgc3VwZXIudXBkYXRlTWF0cml4Rm9yUG9pbnQoIGRpc3RhbmNlQWxvbmdXaXJlLCBtYXRyaXggKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCB0aGUgcHJvcGVydGllcyBzbyB0aGF0IHRoZSBjaXJjdWl0IGNhbiBiZSBzb2x2ZWQgd2hlbiBjaGFuZ2VkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRDaXJjdWl0UHJvcGVydGllcygpOiBQcm9wZXJ0eTxJbnRlbnRpb25hbEFueT5bXSB7XHJcbiAgICByZXR1cm4gWyB0aGlzLnJlc2lzdGFuY2VQcm9wZXJ0eSwgdGhpcy5pc0Nsb3NlZFByb3BlcnR5IF07XHJcbiAgfVxyXG59XHJcblxyXG5jaXJjdWl0Q29uc3RydWN0aW9uS2l0Q29tbW9uLnJlZ2lzdGVyKCAnU3dpdGNoJywgU3dpdGNoICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGVBQWUsTUFBTSxxQ0FBcUM7QUFDakUsT0FBT0MsY0FBYyxNQUFNLG9DQUFvQztBQUcvRCxPQUFPQyxLQUFLLE1BQU0sMEJBQTBCO0FBQzVDLE9BQU9DLFNBQVMsTUFBTSxvQ0FBb0M7QUFFMUQsT0FBT0MsTUFBTSxNQUFNLDhCQUE4QjtBQUNqRCxPQUFPQyxhQUFhLE1BQU0scUJBQXFCO0FBQy9DLE9BQU9DLDRCQUE0QixNQUFNLG9DQUFvQztBQUU3RSxPQUFPQyxtQkFBbUIsTUFBc0MsMEJBQTBCO0FBRzFGO0FBQ0EsTUFBTUMsYUFBYSxHQUFHSCxhQUFhLENBQUNHLGFBQWE7QUFDakQsTUFBTUMsWUFBWSxHQUFHSixhQUFhLENBQUNJLFlBQVk7QUFDL0MsTUFBTUMsVUFBVSxHQUFHTCxhQUFhLENBQUNLLFVBQVU7QUFPM0MsZUFBZSxNQUFNQyxNQUFNLFNBQVNKLG1CQUFtQixDQUFDO0VBRXREOztFQUdBOztFQUdPSyxXQUFXQSxDQUFFQyxXQUFtQixFQUFFQyxTQUFpQixFQUFFQyxNQUFjLEVBQUVDLE9BQXVCLEVBQUc7SUFFcEcsTUFBTUMsT0FBTyxHQUFHZCxTQUFTLENBQXlE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