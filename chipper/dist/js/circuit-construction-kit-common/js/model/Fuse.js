// Copyright 2019-2023, University of Colorado Boulder

/**
 * Model for a fuse. This circuit element trips (i.e., becomes very high resistance) when its current rating is
 * exceeded.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */

import BooleanProperty from '../../../axon/js/BooleanProperty.js';
import NumberProperty from '../../../axon/js/NumberProperty.js';
import Range from '../../../dot/js/Range.js';
import optionize from '../../../phet-core/js/optionize.js';
import CCKCConstants from '../CCKCConstants.js';
import circuitConstructionKitCommon from '../circuitConstructionKitCommon.js';
import FixedCircuitElement from './FixedCircuitElement.js';
export default class Fuse extends FixedCircuitElement {
  // the current at which the fuse trips, in amps

  // true if the fuse is tripped

  // the resistance in ohms.  Computed in step() as a function of isTrippedProperty and currentRatingProperty.  Computed
  // in step instead of as a DerivedProperty to avoid a re-entrant loop, see https://github.com/phetsims/circuit-construction-kit-common/issues/480#issuecomment-483430822
  constructor(startVertex, endVertex, tandem, providedOptions) {
    const options = optionize()({
      fuseLength: CCKCConstants.RESISTOR_LENGTH,
      // Same length as a resistor
      currentRating: Fuse.DEFAULT_CURRENT_RATING,
      // Amps
      isCurrentReentrant: true,
      // Changing the current can trip a fuse, which changes the current
      numberOfDecimalPlaces: 1
    }, providedOptions);
    super(startVertex, endVertex, options.fuseLength, tandem, options);
    this.currentRatingProperty = new NumberProperty(options.currentRating, {
      range: Fuse.RANGE,
      tandem: tandem.createTandem('currentRatingProperty'),
      phetioFeatured: true
    });
    this.isTrippedProperty = new BooleanProperty(false, {
      tandem: tandem.createTandem('isTrippedProperty'),
      phetioFeatured: true
    });
    this.resistanceProperty = new NumberProperty(CCKCConstants.MINIMUM_RESISTANCE);

    // time in seconds the current rating has been exceeded
    this.timeCurrentRatingExceeded = 0;
    this.isRepairableProperty = new BooleanProperty(true, {
      tandem: tandem.createTandem('isRepairableProperty'),
      phetioFeatured: true
    });
  }
  dispose() {
    super.dispose();
    this.currentRatingProperty.dispose();
    this.isRepairableProperty.dispose();
    this.isTrippedProperty.dispose();
  }

  /**
   * Reset the fuse so it is no longer tripped.
   */
  resetFuse() {
    this.isTrippedProperty.reset();
    this.timeCurrentRatingExceeded = 0;
  }

  /**
   * @param time - total elapsed time. Unused, but provided to match signature defined in body of Circuit.step
   * @param dt - delta between last frame and current frame
   * @param circuit
   */
  step(time, dt, circuit) {
    super.step(time, dt, circuit);
    // When the current exceeds the max, trip the fuse.  This cannot be modeled as a property link because it
    // creates a reentrant property loop which doesn't update the reset fuse button properly
    // Account for roundoff error in the circuit solve step
    const currentRatingExceeded = Math.abs(this.currentProperty.value) > this.currentRatingProperty.value + 1E-6;

    // If not exceeded, the fuse "cools off" right away.
    if (currentRatingExceeded) {
      this.timeCurrentRatingExceeded += dt;
    } else {
      this.timeCurrentRatingExceeded = 0;
    }

    // Trip the fuse if it has exceeded the current rating beyond the threshold time
    if (this.timeCurrentRatingExceeded > 0.0) {
      this.isTrippedProperty.value = true;
      circuit.componentEditedEmitter.emit();
    }

    // The resistance varies inversely with the current rating, with 20.0 A at 3 mÎ©.
    this.resistanceProperty.value = this.isTrippedProperty.value ? CCKCConstants.MAX_RESISTANCE : 1 / this.currentRatingProperty.value * 0.06;
  }

  /**
   * Get the properties that, when changed, require the circuit to be re-solved.
   */
  getCircuitProperties() {
    return [this.resistanceProperty, this.isTrippedProperty];
  }
  static RANGE = new Range(0.5, 20);
  static DEFAULT_CURRENT_RATING = 4;
}
circuitConstructionKitCommon.register('Fuse', Fuse);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb29sZWFuUHJvcGVydHkiLCJOdW1iZXJQcm9wZXJ0eSIsIlJhbmdlIiwib3B0aW9uaXplIiwiQ0NLQ0NvbnN0YW50cyIsImNpcmN1aXRDb25zdHJ1Y3Rpb25LaXRDb21tb24iLCJGaXhlZENpcmN1aXRFbGVtZW50IiwiRnVzZSIsImNvbnN0cnVjdG9yIiwic3RhcnRWZXJ0ZXgiLCJlbmRWZXJ0ZXgiLCJ0YW5kZW0iLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwiZnVzZUxlbmd0aCIsIlJFU0lTVE9SX0xFTkdUSCIsImN1cnJlbnRSYXRpbmciLCJERUZBVUxUX0NVUlJFTlRfUkFUSU5HIiwiaXNDdXJyZW50UmVlbnRyYW50IiwibnVtYmVyT2ZEZWNpbWFsUGxhY2VzIiwiY3VycmVudFJhdGluZ1Byb3BlcnR5IiwicmFuZ2UiLCJSQU5HRSIsImNyZWF0ZVRhbmRlbSIsInBoZXRpb0ZlYXR1cmVkIiwiaXNUcmlwcGVkUHJvcGVydHkiLCJyZXNpc3RhbmNlUHJvcGVydHkiLCJNSU5JTVVNX1JFU0lTVEFOQ0UiLCJ0aW1lQ3VycmVudFJhdGluZ0V4Y2VlZGVkIiwiaXNSZXBhaXJhYmxlUHJvcGVydHkiLCJkaXNwb3NlIiwicmVzZXRGdXNlIiwicmVzZXQiLCJzdGVwIiwidGltZSIsImR0IiwiY2lyY3VpdCIsImN1cnJlbnRSYXRpbmdFeGNlZWRlZCIsIk1hdGgiLCJhYnMiLCJjdXJyZW50UHJvcGVydHkiLCJ2YWx1ZSIsImNvbXBvbmVudEVkaXRlZEVtaXR0ZXIiLCJlbWl0IiwiTUFYX1JFU0lTVEFOQ0UiLCJnZXRDaXJjdWl0UHJvcGVydGllcyIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiRnVzZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOS0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBNb2RlbCBmb3IgYSBmdXNlLiBUaGlzIGNpcmN1aXQgZWxlbWVudCB0cmlwcyAoaS5lLiwgYmVjb21lcyB2ZXJ5IGhpZ2ggcmVzaXN0YW5jZSkgd2hlbiBpdHMgY3VycmVudCByYXRpbmcgaXNcclxuICogZXhjZWVkZWQuXHJcbiAqXHJcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IEJvb2xlYW5Qcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi9heG9uL2pzL0Jvb2xlYW5Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBOdW1iZXJQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi9heG9uL2pzL051bWJlclByb3BlcnR5LmpzJztcclxuaW1wb3J0IFByb3BlcnR5IGZyb20gJy4uLy4uLy4uL2F4b24vanMvUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgUmFuZ2UgZnJvbSAnLi4vLi4vLi4vZG90L2pzL1JhbmdlLmpzJztcclxuaW1wb3J0IG9wdGlvbml6ZSBmcm9tICcuLi8uLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuaW1wb3J0IEludGVudGlvbmFsQW55IGZyb20gJy4uLy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9JbnRlbnRpb25hbEFueS5qcyc7XHJcbmltcG9ydCBUYW5kZW0gZnJvbSAnLi4vLi4vLi4vdGFuZGVtL2pzL1RhbmRlbS5qcyc7XHJcbmltcG9ydCBDQ0tDQ29uc3RhbnRzIGZyb20gJy4uL0NDS0NDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgY2lyY3VpdENvbnN0cnVjdGlvbktpdENvbW1vbiBmcm9tICcuLi9jaXJjdWl0Q29uc3RydWN0aW9uS2l0Q29tbW9uLmpzJztcclxuaW1wb3J0IENpcmN1aXQgZnJvbSAnLi9DaXJjdWl0LmpzJztcclxuaW1wb3J0IEZpeGVkQ2lyY3VpdEVsZW1lbnQsIHsgRml4ZWRDaXJjdWl0RWxlbWVudE9wdGlvbnMgfSBmcm9tICcuL0ZpeGVkQ2lyY3VpdEVsZW1lbnQuanMnO1xyXG5pbXBvcnQgVmVydGV4IGZyb20gJy4vVmVydGV4LmpzJztcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSB7XHJcbiAgZnVzZUxlbmd0aD86IG51bWJlcjtcclxuICBjdXJyZW50UmF0aW5nPzogbnVtYmVyO1xyXG59O1xyXG5cclxudHlwZSBGdXNlT3B0aW9ucyA9IFNlbGZPcHRpb25zICYgRml4ZWRDaXJjdWl0RWxlbWVudE9wdGlvbnM7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGdXNlIGV4dGVuZHMgRml4ZWRDaXJjdWl0RWxlbWVudCB7XHJcblxyXG4gIC8vIHRoZSBjdXJyZW50IGF0IHdoaWNoIHRoZSBmdXNlIHRyaXBzLCBpbiBhbXBzXHJcbiAgcHVibGljIHJlYWRvbmx5IGN1cnJlbnRSYXRpbmdQcm9wZXJ0eTogTnVtYmVyUHJvcGVydHk7XHJcblxyXG4gIC8vIHRydWUgaWYgdGhlIGZ1c2UgaXMgdHJpcHBlZFxyXG4gIHB1YmxpYyByZWFkb25seSBpc1RyaXBwZWRQcm9wZXJ0eTogQm9vbGVhblByb3BlcnR5O1xyXG5cclxuICAvLyB0aGUgcmVzaXN0YW5jZSBpbiBvaG1zLiAgQ29tcHV0ZWQgaW4gc3RlcCgpIGFzIGEgZnVuY3Rpb24gb2YgaXNUcmlwcGVkUHJvcGVydHkgYW5kIGN1cnJlbnRSYXRpbmdQcm9wZXJ0eS4gIENvbXB1dGVkXHJcbiAgLy8gaW4gc3RlcCBpbnN0ZWFkIG9mIGFzIGEgRGVyaXZlZFByb3BlcnR5IHRvIGF2b2lkIGEgcmUtZW50cmFudCBsb29wLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL2NpcmN1aXQtY29uc3RydWN0aW9uLWtpdC1jb21tb24vaXNzdWVzLzQ4MCNpc3N1ZWNvbW1lbnQtNDgzNDMwODIyXHJcbiAgcHVibGljIHJlYWRvbmx5IHJlc2lzdGFuY2VQcm9wZXJ0eTogTnVtYmVyUHJvcGVydHk7XHJcbiAgcHJpdmF0ZSB0aW1lQ3VycmVudFJhdGluZ0V4Y2VlZGVkOiBudW1iZXI7XHJcbiAgcHVibGljIGlzUmVwYWlyYWJsZVByb3BlcnR5OiBCb29sZWFuUHJvcGVydHk7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3Rvciggc3RhcnRWZXJ0ZXg6IFZlcnRleCwgZW5kVmVydGV4OiBWZXJ0ZXgsIHRhbmRlbTogVGFuZGVtLCBwcm92aWRlZE9wdGlvbnM/OiBGdXNlT3B0aW9ucyApIHtcclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8RnVzZU9wdGlvbnMsIFNlbGZPcHRpb25zLCBGaXhlZENpcmN1aXRFbGVtZW50T3B0aW9ucz4oKSgge1xyXG4gICAgICBmdXNlTGVuZ3RoOiBDQ0tDQ29uc3RhbnRzLlJFU0lTVE9SX0xFTkdUSCwgLy8gU2FtZSBsZW5ndGggYXMgYSByZXNpc3RvclxyXG4gICAgICBjdXJyZW50UmF0aW5nOiBGdXNlLkRFRkFVTFRfQ1VSUkVOVF9SQVRJTkcsIC8vIEFtcHNcclxuICAgICAgaXNDdXJyZW50UmVlbnRyYW50OiB0cnVlLCAvLyBDaGFuZ2luZyB0aGUgY3VycmVudCBjYW4gdHJpcCBhIGZ1c2UsIHdoaWNoIGNoYW5nZXMgdGhlIGN1cnJlbnRcclxuICAgICAgbnVtYmVyT2ZEZWNpbWFsUGxhY2VzOiAxXHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICBzdXBlciggc3RhcnRWZXJ0ZXgsIGVuZFZlcnRleCwgb3B0aW9ucy5mdXNlTGVuZ3RoLCB0YW5kZW0sIG9wdGlvbnMgKTtcclxuXHJcbiAgICB0aGlzLmN1cnJlbnRSYXRpbmdQcm9wZXJ0eSA9IG5ldyBOdW1iZXJQcm9wZXJ0eSggb3B0aW9ucy5jdXJyZW50UmF0aW5nLCB7XHJcbiAgICAgIHJhbmdlOiBGdXNlLlJBTkdFLFxyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdjdXJyZW50UmF0aW5nUHJvcGVydHknICksXHJcbiAgICAgIHBoZXRpb0ZlYXR1cmVkOiB0cnVlXHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5pc1RyaXBwZWRQcm9wZXJ0eSA9IG5ldyBCb29sZWFuUHJvcGVydHkoIGZhbHNlLCB7XHJcbiAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2lzVHJpcHBlZFByb3BlcnR5JyApLFxyXG4gICAgICBwaGV0aW9GZWF0dXJlZDogdHJ1ZVxyXG4gICAgfSApO1xyXG5cclxuICAgIHRoaXMucmVzaXN0YW5jZVByb3BlcnR5ID0gbmV3IE51bWJlclByb3BlcnR5KCBDQ0tDQ29uc3RhbnRzLk1JTklNVU1fUkVTSVNUQU5DRSApO1xyXG5cclxuICAgIC8vIHRpbWUgaW4gc2Vjb25kcyB0aGUgY3VycmVudCByYXRpbmcgaGFzIGJlZW4gZXhjZWVkZWRcclxuICAgIHRoaXMudGltZUN1cnJlbnRSYXRpbmdFeGNlZWRlZCA9IDA7XHJcblxyXG4gICAgdGhpcy5pc1JlcGFpcmFibGVQcm9wZXJ0eSA9IG5ldyBCb29sZWFuUHJvcGVydHkoIHRydWUsIHtcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnaXNSZXBhaXJhYmxlUHJvcGVydHknICksXHJcbiAgICAgIHBoZXRpb0ZlYXR1cmVkOiB0cnVlXHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb3ZlcnJpZGUgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICAgIHRoaXMuY3VycmVudFJhdGluZ1Byb3BlcnR5LmRpc3Bvc2UoKTtcclxuICAgIHRoaXMuaXNSZXBhaXJhYmxlUHJvcGVydHkuZGlzcG9zZSgpO1xyXG4gICAgdGhpcy5pc1RyaXBwZWRQcm9wZXJ0eS5kaXNwb3NlKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXNldCB0aGUgZnVzZSBzbyBpdCBpcyBubyBsb25nZXIgdHJpcHBlZC5cclxuICAgKi9cclxuICBwdWJsaWMgcmVzZXRGdXNlKCk6IHZvaWQge1xyXG4gICAgdGhpcy5pc1RyaXBwZWRQcm9wZXJ0eS5yZXNldCgpO1xyXG4gICAgdGhpcy50aW1lQ3VycmVudFJhdGluZ0V4Y2VlZGVkID0gMDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB0aW1lIC0gdG90YWwgZWxhcHNlZCB0aW1lLiBVbnVzZWQsIGJ1dCBwcm92aWRlZCB0byBtYXRjaCBzaWduYXR1cmUgZGVmaW5lZCBpbiBib2R5IG9mIENpcmN1aXQuc3RlcFxyXG4gICAqIEBwYXJhbSBkdCAtIGRlbHRhIGJldHdlZW4gbGFzdCBmcmFtZSBhbmQgY3VycmVudCBmcmFtZVxyXG4gICAqIEBwYXJhbSBjaXJjdWl0XHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIHN0ZXAoIHRpbWU6IG51bWJlciwgZHQ6IG51bWJlciwgY2lyY3VpdDogQ2lyY3VpdCApOiB2b2lkIHtcclxuICAgIHN1cGVyLnN0ZXAoIHRpbWUsIGR0LCBjaXJjdWl0ICk7XHJcbiAgICAvLyBXaGVuIHRoZSBjdXJyZW50IGV4Y2VlZHMgdGhlIG1heCwgdHJpcCB0aGUgZnVzZS4gIFRoaXMgY2Fubm90IGJlIG1vZGVsZWQgYXMgYSBwcm9wZXJ0eSBsaW5rIGJlY2F1c2UgaXRcclxuICAgIC8vIGNyZWF0ZXMgYSByZWVudHJhbnQgcHJvcGVydHkgbG9vcCB3aGljaCBkb2Vzbid0IHVwZGF0ZSB0aGUgcmVzZXQgZnVzZSBidXR0b24gcHJvcGVybHlcclxuICAgIC8vIEFjY291bnQgZm9yIHJvdW5kb2ZmIGVycm9yIGluIHRoZSBjaXJjdWl0IHNvbHZlIHN0ZXBcclxuICAgIGNvbnN0IGN1cnJlbnRSYXRpbmdFeGNlZWRlZCA9IE1hdGguYWJzKCB0aGlzLmN1cnJlbnRQcm9wZXJ0eS52YWx1ZSApID4gdGhpcy5jdXJyZW50UmF0aW5nUHJvcGVydHkudmFsdWUgKyAxRS02O1xyXG5cclxuICAgIC8vIElmIG5vdCBleGNlZWRlZCwgdGhlIGZ1c2UgXCJjb29scyBvZmZcIiByaWdodCBhd2F5LlxyXG4gICAgaWYgKCBjdXJyZW50UmF0aW5nRXhjZWVkZWQgKSB7XHJcbiAgICAgIHRoaXMudGltZUN1cnJlbnRSYXRpbmdFeGNlZWRlZCArPSBkdDtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLnRpbWVDdXJyZW50UmF0aW5nRXhjZWVkZWQgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFRyaXAgdGhlIGZ1c2UgaWYgaXQgaGFzIGV4Y2VlZGVkIHRoZSBjdXJyZW50IHJhdGluZyBiZXlvbmQgdGhlIHRocmVzaG9sZCB0aW1lXHJcbiAgICBpZiAoIHRoaXMudGltZUN1cnJlbnRSYXRpbmdFeGNlZWRlZCA+IDAuMCApIHtcclxuICAgICAgdGhpcy5pc1RyaXBwZWRQcm9wZXJ0eS52YWx1ZSA9IHRydWU7XHJcbiAgICAgIGNpcmN1aXQuY29tcG9uZW50RWRpdGVkRW1pdHRlci5lbWl0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVGhlIHJlc2lzdGFuY2UgdmFyaWVzIGludmVyc2VseSB3aXRoIHRoZSBjdXJyZW50IHJhdGluZywgd2l0aCAyMC4wIEEgYXQgMyBtzqkuXHJcbiAgICB0aGlzLnJlc2lzdGFuY2VQcm9wZXJ0eS52YWx1ZSA9IHRoaXMuaXNUcmlwcGVkUHJvcGVydHkudmFsdWUgPyBDQ0tDQ29uc3RhbnRzLk1BWF9SRVNJU1RBTkNFIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMSAvIHRoaXMuY3VycmVudFJhdGluZ1Byb3BlcnR5LnZhbHVlICogMC4wNjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCB0aGUgcHJvcGVydGllcyB0aGF0LCB3aGVuIGNoYW5nZWQsIHJlcXVpcmUgdGhlIGNpcmN1aXQgdG8gYmUgcmUtc29sdmVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRDaXJjdWl0UHJvcGVydGllcygpOiBQcm9wZXJ0eTxJbnRlbnRpb25hbEFueT5bXSB7XHJcbiAgICByZXR1cm4gWyB0aGlzLnJlc2lzdGFuY2VQcm9wZXJ0eSwgdGhpcy5pc1RyaXBwZWRQcm9wZXJ0eSBdO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBSQU5HRSA9IG5ldyBSYW5nZSggMC41LCAyMCApO1xyXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgREVGQVVMVF9DVVJSRU5UX1JBVElORyA9IDQ7XHJcbn1cclxuXHJcbmNpcmN1aXRDb25zdHJ1Y3Rpb25LaXRDb21tb24ucmVnaXN0ZXIoICdGdXNlJywgRnVzZSApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGVBQWUsTUFBTSxxQ0FBcUM7QUFDakUsT0FBT0MsY0FBYyxNQUFNLG9DQUFvQztBQUUvRCxPQUFPQyxLQUFLLE1BQU0sMEJBQTBCO0FBQzVDLE9BQU9DLFNBQVMsTUFBTSxvQ0FBb0M7QUFHMUQsT0FBT0MsYUFBYSxNQUFNLHFCQUFxQjtBQUMvQyxPQUFPQyw0QkFBNEIsTUFBTSxvQ0FBb0M7QUFFN0UsT0FBT0MsbUJBQW1CLE1BQXNDLDBCQUEwQjtBQVUxRixlQUFlLE1BQU1DLElBQUksU0FBU0QsbUJBQW1CLENBQUM7RUFFcEQ7O0VBR0E7O0VBR0E7RUFDQTtFQUtPRSxXQUFXQSxDQUFFQyxXQUFtQixFQUFFQyxTQUFpQixFQUFFQyxNQUFjLEVBQUVDLGVBQTZCLEVBQUc7SUFDMUcsTUFBTUMsT0FBTyxHQUFHVixTQUFTLENBQXVELENBQUMsQ0FBRTtNQUNqRlcsVUFBVSxFQUFFVixhQUFhLENBQUNXLGVBQWU7TUFBRTtNQUMzQ0MsYUFBYSxFQUFFVCxJQUFJLENBQUNVLHNCQUFzQjtNQUFFO01BQzVDQyxrQkFBa0IsRUFBRSxJQUFJO01BQUU7TUFDMUJDLHFCQUFxQixFQUFFO0lBQ3pCLENBQUMsRUFBRVAsZUFBZ0IsQ0FBQztJQUVwQixLQUFLLENBQUVILFdBQVcsRUFBRUMsU0FBUyxFQUFFRyxPQUFPLENBQUNDLFVBQVUsRUFBRUgsTUFBTSxFQUFFRSxPQUFRLENBQUM7SUFFcEUsSUFBSSxDQUFDTyxxQkFBcUIsR0FBRyxJQUFJbkIsY0FBYyxDQUFFWSxPQUFPLENBQUNHLGFBQWEsRUFBRTtNQUN0RUssS0FBSyxFQUFFZCxJQUFJLENBQUNlLEtBQUs7TUFDakJYLE1BQU0sRUFBRUEsTUFBTSxDQUFDWSxZQUFZLENBQUUsdUJBQXdCLENBQUM7TUFD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