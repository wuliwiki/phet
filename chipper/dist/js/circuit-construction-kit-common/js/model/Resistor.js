// Copyright 2015-2023, University of Colorado Boulder

/**
 * Model for a resistor.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */

import NumberProperty from '../../../axon/js/NumberProperty.js';
import Tandem from '../../../tandem/js/Tandem.js';
import IOType from '../../../tandem/js/types/IOType.js';
import circuitConstructionKitCommon from '../circuitConstructionKitCommon.js';
import CircuitElement from './CircuitElement.js';
import FixedCircuitElement from './FixedCircuitElement.js';
import ResistorType from './ResistorType.js';
import EnumerationIO from '../../../tandem/js/types/EnumerationIO.js';
import BooleanProperty from '../../../axon/js/BooleanProperty.js';
import PowerDissipatedProperty from './PowerDissipatedProperty.js';
import optionize from '../../../phet-core/js/optionize.js';
export default class Resistor extends FixedCircuitElement {
  // the resistance in ohms

  static RESISTANCE_DECIMAL_PLACES = 1;
  static HIGH_RESISTANCE_DECIMAL_PLACES = 0;

  /**
   * @param startVertex
   * @param endVertex
   * @param resistorType
   * @param tandem
   * @param [providedOptions]
   */
  constructor(startVertex, endVertex, resistorType, tandem, providedOptions) {
    const options = optionize()({
      isFlammable: true,
      // All resistors are flammable except for the dog, which automatically disconnects at high current.
      phetioType: Resistor.ResistorIO,
      numberOfDecimalPlaces: resistorType === ResistorType.RESISTOR ? 1 : 0
    }, providedOptions);
    assert && assert(!options.hasOwnProperty('resistance'), 'Resistance should be passed through resistorType');
    assert && assert(!options.hasOwnProperty('isMetallic'), 'isMetallic is given by the resistorType');
    options.isMetallic = resistorType.isMetallic;
    const isHouseholdObject = resistorType !== ResistorType.RESISTOR && resistorType !== ResistorType.EXTREME_RESISTOR;
    if (isHouseholdObject) {
      options.isEditablePropertyOptions = {
        tandem: Tandem.OPT_OUT
      };
    }
    super(startVertex, endVertex, resistorType.length, tandem, options);
    this.resistorType = resistorType;
    assert && assert(typeof this.resistorType.isMetallic === 'boolean');
    this.resistanceProperty = new NumberProperty(resistorType.defaultResistance, {
      tandem: tandem.createTandem('resistanceProperty'),
      // Specify the Property range for seamless PhET-iO interoperation
      range: this.resistorType.range,
      phetioFeatured: true
    });
    this.powerDissipatedProperty = new PowerDissipatedProperty(this.currentProperty, this.resistanceProperty, tandem.createTandem('powerDissipatedProperty'));
    this.isColorCodeVisibleProperty = new BooleanProperty(true, {
      tandem: this.resistorType === ResistorType.RESISTOR ? tandem.createTandem('isColorCodeVisibleProperty') : Tandem.OPT_OUT,
      phetioDocumentation: 'Whether the view can display the resistor color code bands',
      phetioFeatured: true
    });
  }

  /**
   * Dispose of this and PhET-iO instrumented children, so they will be unregistered.
   */
  dispose() {
    this.resistanceProperty.dispose();
    this.powerDissipatedProperty.dispose();
    this.isColorCodeVisibleProperty.dispose();
    super.dispose();
  }

  /**
   * Returns true if the resistance is editable.  Household item resistance is not editable.
   */
  isResistanceEditable() {
    return this.resistorType === ResistorType.EXTREME_RESISTOR || this.resistorType === ResistorType.RESISTOR;
  }

  /**
   * Get the properties so that the circuit can be solved when changed.
   */
  getCircuitProperties() {
    return [this.resistanceProperty];
  }
  static ResistorIO = new IOType('ResistorIO', {
    valueType: Resistor,
    supertype: CircuitElement.CircuitElementIO,
    stateSchema: {
      resistorType: EnumerationIO(ResistorType)
    },
    toStateObject: resistor => {
      const stateObject = CircuitElement.CircuitElementIO.toStateObject(resistor);
      return {
        ...stateObject,
        resistorType: EnumerationIO(ResistorType).toStateObject(resistor.resistorType)
      };
    },
    stateObjectToCreateElementArguments(stateObject) {
      const args = CircuitElement.CircuitElementIO.stateObjectToCreateElementArguments(stateObject);
      args.push(EnumerationIO(ResistorType).fromStateObject(stateObject.resistorType));
      return args;
    }
  });
}
circuitConstructionKitCommon.register('Resistor', Resistor);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJOdW1iZXJQcm9wZXJ0eSIsIlRhbmRlbSIsIklPVHlwZSIsImNpcmN1aXRDb25zdHJ1Y3Rpb25LaXRDb21tb24iLCJDaXJjdWl0RWxlbWVudCIsIkZpeGVkQ2lyY3VpdEVsZW1lbnQiLCJSZXNpc3RvclR5cGUiLCJFbnVtZXJhdGlvbklPIiwiQm9vbGVhblByb3BlcnR5IiwiUG93ZXJEaXNzaXBhdGVkUHJvcGVydHkiLCJvcHRpb25pemUiLCJSZXNpc3RvciIsIlJFU0lTVEFOQ0VfREVDSU1BTF9QTEFDRVMiLCJISUdIX1JFU0lTVEFOQ0VfREVDSU1BTF9QTEFDRVMiLCJjb25zdHJ1Y3RvciIsInN0YXJ0VmVydGV4IiwiZW5kVmVydGV4IiwicmVzaXN0b3JUeXBlIiwidGFuZGVtIiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsImlzRmxhbW1hYmxlIiwicGhldGlvVHlwZSIsIlJlc2lzdG9ySU8iLCJudW1iZXJPZkRlY2ltYWxQbGFjZXMiLCJSRVNJU1RPUiIsImFzc2VydCIsImhhc093blByb3BlcnR5IiwiaXNNZXRhbGxpYyIsImlzSG91c2Vob2xkT2JqZWN0IiwiRVhUUkVNRV9SRVNJU1RPUiIsImlzRWRpdGFibGVQcm9wZXJ0eU9wdGlvbnMiLCJPUFRfT1VUIiwibGVuZ3RoIiwicmVzaXN0YW5jZVByb3BlcnR5IiwiZGVmYXVsdFJlc2lzdGFuY2UiLCJjcmVhdGVUYW5kZW0iLCJyYW5nZSIsInBoZXRpb0ZlYXR1cmVkIiwicG93ZXJEaXNzaXBhdGVkUHJvcGVydHkiLCJjdXJyZW50UHJvcGVydHkiLCJpc0NvbG9yQ29kZVZpc2libGVQcm9wZXJ0eSIsInBoZXRpb0RvY3VtZW50YXRpb24iLCJkaXNwb3NlIiwiaXNSZXNpc3RhbmNlRWRpdGFibGUiLCJnZXRDaXJjdWl0UHJvcGVydGllcyIsInZhbHVlVHlwZSIsInN1cGVydHlwZSIsIkNpcmN1aXRFbGVtZW50SU8iLCJzdGF0ZVNjaGVtYSIsInRvU3RhdGVPYmplY3QiLCJyZXNpc3RvciIsInN0YXRlT2JqZWN0Iiwic3RhdGVPYmplY3RUb0NyZWF0ZUVsZW1lbnRBcmd1bWVudHMiLCJhcmdzIiwicHVzaCIsImZyb21TdGF0ZU9iamVjdCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiUmVzaXN0b3IudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTUtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogTW9kZWwgZm9yIGEgcmVzaXN0b3IuXHJcbiAqXHJcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IE51bWJlclByb3BlcnR5IGZyb20gJy4uLy4uLy4uL2F4b24vanMvTnVtYmVyUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xyXG5pbXBvcnQgSU9UeXBlIGZyb20gJy4uLy4uLy4uL3RhbmRlbS9qcy90eXBlcy9JT1R5cGUuanMnO1xyXG5pbXBvcnQgY2lyY3VpdENvbnN0cnVjdGlvbktpdENvbW1vbiBmcm9tICcuLi9jaXJjdWl0Q29uc3RydWN0aW9uS2l0Q29tbW9uLmpzJztcclxuaW1wb3J0IENpcmN1aXRFbGVtZW50LCB7IENpcmN1aXRFbGVtZW50U3RhdGUgfSBmcm9tICcuL0NpcmN1aXRFbGVtZW50LmpzJztcclxuaW1wb3J0IEZpeGVkQ2lyY3VpdEVsZW1lbnQsIHsgRml4ZWRDaXJjdWl0RWxlbWVudE9wdGlvbnMgfSBmcm9tICcuL0ZpeGVkQ2lyY3VpdEVsZW1lbnQuanMnO1xyXG5pbXBvcnQgUmVzaXN0b3JUeXBlIGZyb20gJy4vUmVzaXN0b3JUeXBlLmpzJztcclxuaW1wb3J0IFZlcnRleCBmcm9tICcuL1ZlcnRleC5qcyc7XHJcbmltcG9ydCBFbnVtZXJhdGlvbklPIGZyb20gJy4uLy4uLy4uL3RhbmRlbS9qcy90eXBlcy9FbnVtZXJhdGlvbklPLmpzJztcclxuaW1wb3J0IEJvb2xlYW5Qcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi9heG9uL2pzL0Jvb2xlYW5Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBQb3dlckRpc3NpcGF0ZWRQcm9wZXJ0eSBmcm9tICcuL1Bvd2VyRGlzc2lwYXRlZFByb3BlcnR5LmpzJztcclxuaW1wb3J0IG9wdGlvbml6ZSBmcm9tICcuLi8uLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuaW1wb3J0IFByb3BlcnR5IGZyb20gJy4uLy4uLy4uL2F4b24vanMvUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgSW50ZW50aW9uYWxBbnkgZnJvbSAnLi4vLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL0ludGVudGlvbmFsQW55LmpzJztcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSB7XHJcbiAgaXNNZXRhbGxpYzogYm9vbGVhbjtcclxuICByZXNpc3RvclR5cGU6IFJlc2lzdG9yVHlwZTtcclxufTtcclxuZXhwb3J0IHR5cGUgUmVzaXN0b3JPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBGaXhlZENpcmN1aXRFbGVtZW50T3B0aW9ucztcclxuXHJcbnR5cGUgUmVzaXN0b3JTdGF0ZSA9IHtcclxuICByZXNpc3RvclR5cGU6IFJlc2lzdG9yVHlwZTtcclxufSAmIENpcmN1aXRFbGVtZW50U3RhdGU7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZXNpc3RvciBleHRlbmRzIEZpeGVkQ2lyY3VpdEVsZW1lbnQge1xyXG5cclxuICAvLyB0aGUgcmVzaXN0YW5jZSBpbiBvaG1zXHJcbiAgcHVibGljIHJlYWRvbmx5IHJlc2lzdGFuY2VQcm9wZXJ0eTogTnVtYmVyUHJvcGVydHk7XHJcblxyXG4gIHB1YmxpYyByZWFkb25seSByZXNpc3RvclR5cGU6IFJlc2lzdG9yVHlwZTtcclxuXHJcbiAgcHVibGljIGlzQ29sb3JDb2RlVmlzaWJsZVByb3BlcnR5OiBCb29sZWFuUHJvcGVydHk7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBwb3dlckRpc3NpcGF0ZWRQcm9wZXJ0eTogUG93ZXJEaXNzaXBhdGVkUHJvcGVydHk7XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgUkVTSVNUQU5DRV9ERUNJTUFMX1BMQUNFUyA9IDE7XHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBISUdIX1JFU0lTVEFOQ0VfREVDSU1BTF9QTEFDRVMgPSAwO1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0gc3RhcnRWZXJ0ZXhcclxuICAgKiBAcGFyYW0gZW5kVmVydGV4XHJcbiAgICogQHBhcmFtIHJlc2lzdG9yVHlwZVxyXG4gICAqIEBwYXJhbSB0YW5kZW1cclxuICAgKiBAcGFyYW0gW3Byb3ZpZGVkT3B0aW9uc11cclxuICAgKi9cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIHN0YXJ0VmVydGV4OiBWZXJ0ZXgsIGVuZFZlcnRleDogVmVydGV4LCByZXNpc3RvclR5cGU6IFJlc2lzdG9yVHlwZSwgdGFuZGVtOiBUYW5kZW0sIHByb3ZpZGVkT3B0aW9ucz86IFJlc2lzdG9yT3B0aW9ucyApIHtcclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8UmVzaXN0b3JPcHRpb25zLCBTZWxmT3B0aW9ucywgRml4ZWRDaXJjdWl0RWxlbWVudE9wdGlvbnM+KCkoIHtcclxuICAgICAgaXNGbGFtbWFibGU6IHRydWUsIC8vIEFsbCByZXNpc3RvcnMgYXJlIGZsYW1tYWJsZSBleGNlcHQgZm9yIHRoZSBkb2csIHdoaWNoIGF1dG9tYXRpY2FsbHkgZGlzY29ubmVjdHMgYXQgaGlnaCBjdXJyZW50LlxyXG4gICAgICBwaGV0aW9UeXBlOiBSZXNpc3Rvci5SZXNpc3RvcklPLFxyXG4gICAgICBudW1iZXJPZkRlY2ltYWxQbGFjZXM6IHJlc2lzdG9yVHlwZSA9PT0gUmVzaXN0b3JUeXBlLlJFU0lTVE9SID8gMSA6IDBcclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIGFzc2VydCAmJiBhc3NlcnQoICFvcHRpb25zLmhhc093blByb3BlcnR5KCAncmVzaXN0YW5jZScgKSwgJ1Jlc2lzdGFuY2Ugc2hvdWxkIGJlIHBhc3NlZCB0aHJvdWdoIHJlc2lzdG9yVHlwZScgKTtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoICFvcHRpb25zLmhhc093blByb3BlcnR5KCAnaXNNZXRhbGxpYycgKSwgJ2lzTWV0YWxsaWMgaXMgZ2l2ZW4gYnkgdGhlIHJlc2lzdG9yVHlwZScgKTtcclxuXHJcbiAgICBvcHRpb25zLmlzTWV0YWxsaWMgPSByZXNpc3RvclR5cGUuaXNNZXRhbGxpYztcclxuXHJcbiAgICBjb25zdCBpc0hvdXNlaG9sZE9iamVjdCA9IHJlc2lzdG9yVHlwZSAhPT0gUmVzaXN0b3JUeXBlLlJFU0lTVE9SICYmIHJlc2lzdG9yVHlwZSAhPT0gUmVzaXN0b3JUeXBlLkVYVFJFTUVfUkVTSVNUT1I7XHJcblxyXG4gICAgaWYgKCBpc0hvdXNlaG9sZE9iamVjdCApIHtcclxuICAgICAgb3B0aW9ucy5pc0VkaXRhYmxlUHJvcGVydHlPcHRpb25zID0ge1xyXG4gICAgICAgIHRhbmRlbTogVGFuZGVtLk9QVF9PVVRcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBzdXBlciggc3RhcnRWZXJ0ZXgsIGVuZFZlcnRleCwgcmVzaXN0b3JUeXBlLmxlbmd0aCwgdGFuZGVtLCBvcHRpb25zICk7XHJcblxyXG4gICAgdGhpcy5yZXNpc3RvclR5cGUgPSByZXNpc3RvclR5cGU7XHJcblxyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdHlwZW9mIHRoaXMucmVzaXN0b3JUeXBlLmlzTWV0YWxsaWMgPT09ICdib29sZWFuJyApO1xyXG5cclxuICAgIHRoaXMucmVzaXN0YW5jZVByb3BlcnR5ID0gbmV3IE51bWJlclByb3BlcnR5KCByZXNpc3RvclR5cGUuZGVmYXVsdFJlc2lzdGFuY2UsIHtcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAncmVzaXN0YW5jZVByb3BlcnR5JyApLFxyXG5cclxuICAgICAgLy8gU3BlY2lmeSB0aGUgUHJvcGVydHkgcmFuZ2UgZm9yIHNlYW1sZXNzIFBoRVQtaU8gaW50ZXJvcGVyYXRpb25cclxuICAgICAgcmFuZ2U6IHRoaXMucmVzaXN0b3JUeXBlLnJhbmdlLFxyXG4gICAgICBwaGV0aW9GZWF0dXJlZDogdHJ1ZVxyXG4gICAgfSApO1xyXG5cclxuICAgIHRoaXMucG93ZXJEaXNzaXBhdGVkUHJvcGVydHkgPSBuZXcgUG93ZXJEaXNzaXBhdGVkUHJvcGVydHkoIHRoaXMuY3VycmVudFByb3BlcnR5LCB0aGlzLnJlc2lzdGFuY2VQcm9wZXJ0eSwgdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3Bvd2VyRGlzc2lwYXRlZFByb3BlcnR5JyApICk7XHJcblxyXG4gICAgdGhpcy5pc0NvbG9yQ29kZVZpc2libGVQcm9wZXJ0eSA9IG5ldyBCb29sZWFuUHJvcGVydHkoIHRydWUsIHtcclxuICAgICAgdGFuZGVtOiB0aGlzLnJlc2lzdG9yVHlwZSA9PT0gUmVzaXN0b3JUeXBlLlJFU0lTVE9SID8gdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2lzQ29sb3JDb2RlVmlzaWJsZVByb3BlcnR5JyApIDpcclxuICAgICAgICAgICAgICBUYW5kZW0uT1BUX09VVCxcclxuICAgICAgcGhldGlvRG9jdW1lbnRhdGlvbjogJ1doZXRoZXIgdGhlIHZpZXcgY2FuIGRpc3BsYXkgdGhlIHJlc2lzdG9yIGNvbG9yIGNvZGUgYmFuZHMnLFxyXG4gICAgICBwaGV0aW9GZWF0dXJlZDogdHJ1ZVxyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRGlzcG9zZSBvZiB0aGlzIGFuZCBQaEVULWlPIGluc3RydW1lbnRlZCBjaGlsZHJlbiwgc28gdGhleSB3aWxsIGJlIHVucmVnaXN0ZXJlZC5cclxuICAgKi9cclxuICBwdWJsaWMgb3ZlcnJpZGUgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgIHRoaXMucmVzaXN0YW5jZVByb3BlcnR5LmRpc3Bvc2UoKTtcclxuICAgIHRoaXMucG93ZXJEaXNzaXBhdGVkUHJvcGVydHkuZGlzcG9zZSgpO1xyXG4gICAgdGhpcy5pc0NvbG9yQ29kZVZpc2libGVQcm9wZXJ0eS5kaXNwb3NlKCk7XHJcbiAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHJlc2lzdGFuY2UgaXMgZWRpdGFibGUuICBIb3VzZWhvbGQgaXRlbSByZXNpc3RhbmNlIGlzIG5vdCBlZGl0YWJsZS5cclxuICAgKi9cclxuICBwdWJsaWMgaXNSZXNpc3RhbmNlRWRpdGFibGUoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5yZXNpc3RvclR5cGUgPT09IFJlc2lzdG9yVHlwZS5FWFRSRU1FX1JFU0lTVE9SIHx8XHJcbiAgICAgICAgICAgdGhpcy5yZXNpc3RvclR5cGUgPT09IFJlc2lzdG9yVHlwZS5SRVNJU1RPUjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCB0aGUgcHJvcGVydGllcyBzbyB0aGF0IHRoZSBjaXJjdWl0IGNhbiBiZSBzb2x2ZWQgd2hlbiBjaGFuZ2VkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRDaXJjdWl0UHJvcGVydGllcygpOiBQcm9wZXJ0eTxJbnRlbnRpb25hbEFueT5bXSB7XHJcbiAgICByZXR1cm4gWyB0aGlzLnJlc2lzdGFuY2VQcm9wZXJ0eSBdO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBSZXNpc3RvcklPID0gbmV3IElPVHlwZTxSZXNpc3RvciwgUmVzaXN0b3JTdGF0ZT4oICdSZXNpc3RvcklPJywge1xyXG4gICAgdmFsdWVUeXBlOiBSZXNpc3RvcixcclxuICAgIHN1cGVydHlwZTogQ2lyY3VpdEVsZW1lbnQuQ2lyY3VpdEVsZW1lbnRJTyxcclxuICAgIHN0YXRlU2NoZW1hOiB7XHJcbiAgICAgIHJlc2lzdG9yVHlwZTogRW51bWVyYXRpb25JTyggUmVzaXN0b3JUeXBlIClcclxuICAgIH0sXHJcbiAgICB0b1N0YXRlT2JqZWN0OiAoIHJlc2lzdG9yOiBSZXNpc3RvciApOiBSZXNpc3RvclN0YXRlID0+IHtcclxuICAgICAgY29uc3Qgc3RhdGVPYmplY3QgPSBDaXJjdWl0RWxlbWVudC5DaXJjdWl0RWxlbWVudElPLnRvU3RhdGVPYmplY3QoIHJlc2lzdG9yICk7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgLi4uc3RhdGVPYmplY3QsXHJcbiAgICAgICAgcmVzaXN0b3JUeXBlOiBFbnVtZXJhdGlvbklPKCBSZXNpc3RvclR5cGUgKS50b1N0YXRlT2JqZWN0KCByZXNpc3Rvci5yZXNpc3RvclR5cGUgKVxyXG4gICAgICB9O1xyXG4gICAgfSxcclxuXHJcbiAgICBzdGF0ZU9iamVjdFRvQ3JlYXRlRWxlbWVudEFyZ3VtZW50cyggc3RhdGVPYmplY3Q6IFJlc2lzdG9yU3RhdGUgKSB7XHJcbiAgICAgIGNvbnN0IGFyZ3MgPSBDaXJjdWl0RWxlbWVudC5DaXJjdWl0RWxlbWVudElPLnN0YXRlT2JqZWN0VG9DcmVhdGVFbGVtZW50QXJndW1lbnRzKCBzdGF0ZU9iamVjdCApO1xyXG4gICAgICBhcmdzLnB1c2goIEVudW1lcmF0aW9uSU8oIFJlc2lzdG9yVHlwZSApLmZyb21TdGF0ZU9iamVjdCggc3RhdGVPYmplY3QucmVzaXN0b3JUeXBlICkgKTtcclxuICAgICAgcmV0dXJuIGFyZ3M7XHJcbiAgICB9XHJcbiAgfSApO1xyXG59XHJcblxyXG5jaXJjdWl0Q29uc3RydWN0aW9uS2l0Q29tbW9uLnJlZ2lzdGVyKCAnUmVzaXN0b3InLCBSZXNpc3RvciApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxjQUFjLE1BQU0sb0NBQW9DO0FBQy9ELE9BQU9DLE1BQU0sTUFBTSw4QkFBOEI7QUFDakQsT0FBT0MsTUFBTSxNQUFNLG9DQUFvQztBQUN2RCxPQUFPQyw0QkFBNEIsTUFBTSxvQ0FBb0M7QUFDN0UsT0FBT0MsY0FBYyxNQUErQixxQkFBcUI7QUFDekUsT0FBT0MsbUJBQW1CLE1BQXNDLDBCQUEwQjtBQUMxRixP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