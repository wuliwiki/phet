// Copyright 2016-2023, University of Colorado Boulder

/**
 * Ported directly from "the Java".
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */

import Utils from '../../../dot/js/Utils.js';
import { Color } from '../../../scenery/js/imports.js';
import circuitConstructionKitCommon from '../circuitConstructionKitCommon.js';

// See https://en.wikipedia.org/wiki/Electronic_color_code#Resistor_color-coding
// Tolerances below gold were eliminated to reduce variance in the tolerance band, see
// https://github.com/phetsims/circuit-construction-kit-dc/issues/10
const colorTable = [{
  name: 'none',
  significantFigure: null,
  multiplier: null,
  tolerance: 20,
  color: null
}, {
  name: 'pink',
  significantFigure: null,
  multiplier: -3,
  tolerance: null,
  color: new Color(255, 105, 180)
}, {
  name: 'silver',
  significantFigure: null,
  multiplier: -2,
  tolerance: 10,
  color: new Color(192, 192, 192)
},
// chose a different color that shows up better against the resistor color
{
  name: 'gold',
  significantFigure: null,
  multiplier: -1,
  tolerance: 5,
  color: new Color('#e6b600')
}, {
  name: 'black',
  significantFigure: 0,
  multiplier: 0,
  tolerance: null,
  color: new Color(0, 0, 0)
}, {
  name: 'brown',
  significantFigure: 1,
  multiplier: 1,
  tolerance: null,
  color: new Color(150, 75, 0)
}, {
  name: 'red',
  significantFigure: 2,
  multiplier: 2,
  tolerance: null,
  color: new Color(255, 0, 0)
}, {
  name: 'orange',
  significantFigure: 3,
  multiplier: 3,
  tolerance: null,
  color: new Color(255, 165, 0)
}, {
  name: 'yellow',
  significantFigure: 4,
  multiplier: 4,
  tolerance: null,
  color: new Color(255, 255, 0)
}, {
  name: 'green',
  significantFigure: 5,
  multiplier: 5,
  tolerance: null,
  color: new Color(154, 205, 50)
}, {
  name: 'blue',
  significantFigure: 6,
  multiplier: 6,
  tolerance: null,
  color: new Color(100, 149, 237)
}, {
  name: 'violet',
  significantFigure: 7,
  multiplier: 7,
  tolerance: null,
  color: new Color(148, 0, 211)
}, {
  name: 'gray',
  significantFigure: 8,
  multiplier: 8,
  tolerance: null,
  color: new Color(160, 160, 160)
}, {
  name: 'white',
  significantFigure: 9,
  multiplier: 9,
  tolerance: null,
  color: new Color(255, 255, 255)
}];

/**
 * Gets the color table entry for the specified column in the colorTable
 * @param keyName - the name of the key
 * @param value - the value to search for
 * @returns entry from the color table, see above
 */
const getEntry = (keyName, value) => _.find(colorTable, colorTableEntry => colorTableEntry[keyName] === value);
const ResistorColors = {
  /**
   * Get the color table entries for the specified resistance.
   * @param resistance
   * @returns entries from the color table
   */
  getEntries: function (resistance) {
    assert && assert(resistance >= 0, 'resistance should be non-negative');

    // 0 resistance has a single black band centered on the resistor
    if (resistance === 0) {
      return [getEntry('name', 'black')];
    }

    // Estimate the exponent
    let exponent = Utils.roundSymmetric(Math.log(resistance) / Math.log(10));

    // Divide out to normalize
    let reduced = resistance / Math.pow(10, exponent);

    // If we went too far, jump up a digit
    if (reduced < 1) {
      reduced = reduced * 10;
      exponent--;
    }

    // Chop off the tail to get the first significant digit
    const firstSignificantDigit = Math.floor(reduced);

    // Chop off first significant digit, then bump up >1 and take first digit
    const x = (reduced - firstSignificantDigit) * 10;
    let secondSignificantDigit = Utils.roundSymmetric(x); //round to prevent cases like resistance=4700 = x2 = 6.99999

    // prevent rounding up from 9.5 to 10.0
    if (secondSignificantDigit === 10) {
      secondSignificantDigit = 9; //hack alert
    }

    // Estimate the value to obtain tolerance band
    const approximateValue = (firstSignificantDigit + secondSignificantDigit / 10) * Math.pow(10, exponent);
    const percentError = Math.abs((resistance - approximateValue) / resistance * 100);
    const colorsWithTolerance = _.filter(colorTable, colorTableEntry => colorTableEntry.tolerance !== null);

    // find the lowest tolerance that fits the value
    const sortedColorsWithTolerance = _.sortBy(colorsWithTolerance, 'tolerance');
    let color = null;
    for (let i = 0; i < sortedColorsWithTolerance.length; i++) {
      color = sortedColorsWithTolerance[i];
      if (color.tolerance > percentError) {
        break;
      }
    }
    assert && assert(percentError < color.tolerance, 'no tolerance high enough to accommodate error');
    return [getEntry('significantFigure', firstSignificantDigit), getEntry('significantFigure', secondSignificantDigit), getEntry('multiplier', exponent - 1),
    // second significant figure counts for a power (see https://en.wikipedia.org/wiki/Electronic_color_code and 4700 ohm example)
    getEntry('tolerance', color.tolerance)];
  },
  /**
   * For debugging and testing, get the human-readable color names.
   */
  getColorNames: function (resistance) {
    return _.map(this.getEntries(resistance), 'name');
  },
  /**
   * Return the colors for the given resistance
   */
  getColorArray: function (resistance) {
    return _.map(this.getEntries(resistance), 'color');
  }
};
circuitConstructionKitCommon.register('ResistorColors', ResistorColors);
export default ResistorColors;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVdGlscyIsIkNvbG9yIiwiY2lyY3VpdENvbnN0cnVjdGlvbktpdENvbW1vbiIsImNvbG9yVGFibGUiLCJuYW1lIiwic2lnbmlmaWNhbnRGaWd1cmUiLCJtdWx0aXBsaWVyIiwidG9sZXJhbmNlIiwiY29sb3IiLCJnZXRFbnRyeSIsImtleU5hbWUiLCJ2YWx1ZSIsIl8iLCJmaW5kIiwiY29sb3JUYWJsZUVudHJ5IiwiUmVzaXN0b3JDb2xvcnMiLCJnZXRFbnRyaWVzIiwicmVzaXN0YW5jZSIsImFzc2VydCIsImV4cG9uZW50Iiwicm91bmRTeW1tZXRyaWMiLCJNYXRoIiwibG9nIiwicmVkdWNlZCIsInBvdyIsImZpcnN0U2lnbmlmaWNhbnREaWdpdCIsImZsb29yIiwieCIsInNlY29uZFNpZ25pZmljYW50RGlnaXQiLCJhcHByb3hpbWF0ZVZhbHVlIiwicGVyY2VudEVycm9yIiwiYWJzIiwiY29sb3JzV2l0aFRvbGVyYW5jZSIsImZpbHRlciIsInNvcnRlZENvbG9yc1dpdGhUb2xlcmFuY2UiLCJzb3J0QnkiLCJpIiwibGVuZ3RoIiwiZ2V0Q29sb3JOYW1lcyIsIm1hcCIsImdldENvbG9yQXJyYXkiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlJlc2lzdG9yQ29sb3JzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE2LTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFBvcnRlZCBkaXJlY3RseSBmcm9tIFwidGhlIEphdmFcIi5cclxuICpcclxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICovXHJcblxyXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi4vLi4vLi4vZG90L2pzL1V0aWxzLmpzJztcclxuaW1wb3J0IHsgQ29sb3IgfSBmcm9tICcuLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgY2lyY3VpdENvbnN0cnVjdGlvbktpdENvbW1vbiBmcm9tICcuLi9jaXJjdWl0Q29uc3RydWN0aW9uS2l0Q29tbW9uLmpzJztcclxuXHJcbi8vIFNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9FbGVjdHJvbmljX2NvbG9yX2NvZGUjUmVzaXN0b3JfY29sb3ItY29kaW5nXHJcbi8vIFRvbGVyYW5jZXMgYmVsb3cgZ29sZCB3ZXJlIGVsaW1pbmF0ZWQgdG8gcmVkdWNlIHZhcmlhbmNlIGluIHRoZSB0b2xlcmFuY2UgYmFuZCwgc2VlXHJcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9jaXJjdWl0LWNvbnN0cnVjdGlvbi1raXQtZGMvaXNzdWVzLzEwXHJcbnR5cGUgRW50cnkgPSB7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIHNpZ25pZmljYW50RmlndXJlOiBudW1iZXIgfCBudWxsO1xyXG4gIG11bHRpcGxpZXI6IG51bWJlciB8IG51bGw7XHJcbiAgdG9sZXJhbmNlOiBudW1iZXIgfCBudWxsO1xyXG4gIGNvbG9yOiBDb2xvciB8IG51bGw7XHJcbn07XHJcbmNvbnN0IGNvbG9yVGFibGU6IEVudHJ5W10gPSBbXHJcbiAgeyBuYW1lOiAnbm9uZScsIHNpZ25pZmljYW50RmlndXJlOiBudWxsLCBtdWx0aXBsaWVyOiBudWxsLCB0b2xlcmFuY2U6IDIwLCBjb2xvcjogbnVsbCB9LFxyXG4gIHsgbmFtZTogJ3BpbmsnLCBzaWduaWZpY2FudEZpZ3VyZTogbnVsbCwgbXVsdGlwbGllcjogLTMsIHRvbGVyYW5jZTogbnVsbCwgY29sb3I6IG5ldyBDb2xvciggMjU1LCAxMDUsIDE4MCApIH0sXHJcbiAgeyBuYW1lOiAnc2lsdmVyJywgc2lnbmlmaWNhbnRGaWd1cmU6IG51bGwsIG11bHRpcGxpZXI6IC0yLCB0b2xlcmFuY2U6IDEwLCBjb2xvcjogbmV3IENvbG9yKCAxOTIsIDE5MiwgMTkyICkgfSxcclxuXHJcbiAgLy8gY2hvc2UgYSBkaWZmZXJlbnQgY29sb3IgdGhhdCBzaG93cyB1cCBiZXR0ZXIgYWdhaW5zdCB0aGUgcmVzaXN0b3IgY29sb3JcclxuICB7IG5hbWU6ICdnb2xkJywgc2lnbmlmaWNhbnRGaWd1cmU6IG51bGwsIG11bHRpcGxpZXI6IC0xLCB0b2xlcmFuY2U6IDUsIGNvbG9yOiBuZXcgQ29sb3IoICcjZTZiNjAwJyApIH0sXHJcbiAgeyBuYW1lOiAnYmxhY2snLCBzaWduaWZpY2FudEZpZ3VyZTogMCwgbXVsdGlwbGllcjogMCwgdG9sZXJhbmNlOiBudWxsLCBjb2xvcjogbmV3IENvbG9yKCAwLCAwLCAwICkgfSxcclxuICB7IG5hbWU6ICdicm93bicsIHNpZ25pZmljYW50RmlndXJlOiAxLCBtdWx0aXBsaWVyOiAxLCB0b2xlcmFuY2U6IG51bGwsIGNvbG9yOiBuZXcgQ29sb3IoIDE1MCwgNzUsIDAgKSB9LFxyXG4gIHsgbmFtZTogJ3JlZCcsIHNpZ25pZmljYW50RmlndXJlOiAyLCBtdWx0aXBsaWVyOiAyLCB0b2xlcmFuY2U6IG51bGwsIGNvbG9yOiBuZXcgQ29sb3IoIDI1NSwgMCwgMCApIH0sXHJcbiAgeyBuYW1lOiAnb3JhbmdlJywgc2lnbmlmaWNhbnRGaWd1cmU6IDMsIG11bHRpcGxpZXI6IDMsIHRvbGVyYW5jZTogbnVsbCwgY29sb3I6IG5ldyBDb2xvciggMjU1LCAxNjUsIDAgKSB9LFxyXG4gIHsgbmFtZTogJ3llbGxvdycsIHNpZ25pZmljYW50RmlndXJlOiA0LCBtdWx0aXBsaWVyOiA0LCB0b2xlcmFuY2U6IG51bGwsIGNvbG9yOiBuZXcgQ29sb3IoIDI1NSwgMjU1LCAwICkgfSxcclxuICB7IG5hbWU6ICdncmVlbicsIHNpZ25pZmljYW50RmlndXJlOiA1LCBtdWx0aXBsaWVyOiA1LCB0b2xlcmFuY2U6IG51bGwsIGNvbG9yOiBuZXcgQ29sb3IoIDE1NCwgMjA1LCA1MCApIH0sXHJcbiAgeyBuYW1lOiAnYmx1ZScsIHNpZ25pZmljYW50RmlndXJlOiA2LCBtdWx0aXBsaWVyOiA2LCB0b2xlcmFuY2U6IG51bGwsIGNvbG9yOiBuZXcgQ29sb3IoIDEwMCwgMTQ5LCAyMzcgKSB9LFxyXG4gIHsgbmFtZTogJ3Zpb2xldCcsIHNpZ25pZmljYW50RmlndXJlOiA3LCBtdWx0aXBsaWVyOiA3LCB0b2xlcmFuY2U6IG51bGwsIGNvbG9yOiBuZXcgQ29sb3IoIDE0OCwgMCwgMjExICkgfSxcclxuICB7IG5hbWU6ICdncmF5Jywgc2lnbmlmaWNhbnRGaWd1cmU6IDgsIG11bHRpcGxpZXI6IDgsIHRvbGVyYW5jZTogbnVsbCwgY29sb3I6IG5ldyBDb2xvciggMTYwLCAxNjAsIDE2MCApIH0sXHJcbiAgeyBuYW1lOiAnd2hpdGUnLCBzaWduaWZpY2FudEZpZ3VyZTogOSwgbXVsdGlwbGllcjogOSwgdG9sZXJhbmNlOiBudWxsLCBjb2xvcjogbmV3IENvbG9yKCAyNTUsIDI1NSwgMjU1ICkgfVxyXG5dO1xyXG5cclxuLyoqXHJcbiAqIEdldHMgdGhlIGNvbG9yIHRhYmxlIGVudHJ5IGZvciB0aGUgc3BlY2lmaWVkIGNvbHVtbiBpbiB0aGUgY29sb3JUYWJsZVxyXG4gKiBAcGFyYW0ga2V5TmFtZSAtIHRoZSBuYW1lIG9mIHRoZSBrZXlcclxuICogQHBhcmFtIHZhbHVlIC0gdGhlIHZhbHVlIHRvIHNlYXJjaCBmb3JcclxuICogQHJldHVybnMgZW50cnkgZnJvbSB0aGUgY29sb3IgdGFibGUsIHNlZSBhYm92ZVxyXG4gKi9cclxuY29uc3QgZ2V0RW50cnkgPSAoIGtleU5hbWU6ICduYW1lJyB8ICdzaWduaWZpY2FudEZpZ3VyZScgfCAnbXVsdGlwbGllcicgfCAndG9sZXJhbmNlJywgdmFsdWU6IHN0cmluZyB8IG51bWJlciB8IG51bGwgKSA9PiBfLmZpbmQoIGNvbG9yVGFibGUsIGNvbG9yVGFibGVFbnRyeSA9PiBjb2xvclRhYmxlRW50cnlbIGtleU5hbWUgXSA9PT0gdmFsdWUgKSE7XHJcblxyXG5jb25zdCBSZXNpc3RvckNvbG9ycyA9IHtcclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHRoZSBjb2xvciB0YWJsZSBlbnRyaWVzIGZvciB0aGUgc3BlY2lmaWVkIHJlc2lzdGFuY2UuXHJcbiAgICogQHBhcmFtIHJlc2lzdGFuY2VcclxuICAgKiBAcmV0dXJucyBlbnRyaWVzIGZyb20gdGhlIGNvbG9yIHRhYmxlXHJcbiAgICovXHJcbiAgZ2V0RW50cmllczogZnVuY3Rpb24oIHJlc2lzdGFuY2U6IG51bWJlciApOiBFbnRyeVtdIHtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIHJlc2lzdGFuY2UgPj0gMCwgJ3Jlc2lzdGFuY2Ugc2hvdWxkIGJlIG5vbi1uZWdhdGl2ZScgKTtcclxuXHJcbiAgICAvLyAwIHJlc2lzdGFuY2UgaGFzIGEgc2luZ2xlIGJsYWNrIGJhbmQgY2VudGVyZWQgb24gdGhlIHJlc2lzdG9yXHJcbiAgICBpZiAoIHJlc2lzdGFuY2UgPT09IDAgKSB7XHJcbiAgICAgIHJldHVybiBbIGdldEVudHJ5KCAnbmFtZScsICdibGFjaycgKSBdO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEVzdGltYXRlIHRoZSBleHBvbmVudFxyXG4gICAgbGV0IGV4cG9uZW50ID0gVXRpbHMucm91bmRTeW1tZXRyaWMoIE1hdGgubG9nKCByZXNpc3RhbmNlICkgLyBNYXRoLmxvZyggMTAgKSApO1xyXG5cclxuICAgIC8vIERpdmlkZSBvdXQgdG8gbm9ybWFsaXplXHJcbiAgICBsZXQgcmVkdWNlZCA9IHJlc2lzdGFuY2UgLyBNYXRoLnBvdyggMTAsIGV4cG9uZW50ICk7XHJcblxyXG4gICAgLy8gSWYgd2Ugd2VudCB0b28gZmFyLCBqdW1wIHVwIGEgZGlnaXRcclxuICAgIGlmICggcmVkdWNlZCA8IDEgKSB7XHJcbiAgICAgIHJlZHVjZWQgPSByZWR1Y2VkICogMTA7XHJcbiAgICAgIGV4cG9uZW50LS07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hvcCBvZmYgdGhlIHRhaWwgdG8gZ2V0IHRoZSBmaXJzdCBzaWduaWZpY2FudCBkaWdpdFxyXG4gICAgY29uc3QgZmlyc3RTaWduaWZpY2FudERpZ2l0ID0gTWF0aC5mbG9vciggcmVkdWNlZCApO1xyXG5cclxuICAgIC8vIENob3Agb2ZmIGZpcnN0IHNpZ25pZmljYW50IGRpZ2l0LCB0aGVuIGJ1bXAgdXAgPjEgYW5kIHRha2UgZmlyc3QgZGlnaXRcclxuICAgIGNvbnN0IHggPSAoIHJlZHVjZWQgLSBmaXJzdFNpZ25pZmljYW50RGlnaXQgKSAqIDEwO1xyXG4gICAgbGV0IHNlY29uZFNpZ25pZmljYW50RGlnaXQgPSBVdGlscy5yb3VuZFN5bW1ldHJpYyggeCApOyAvL3JvdW5kIHRvIHByZXZlbnQgY2FzZXMgbGlrZSByZXNpc3RhbmNlPTQ3MDAgPSB4MiA9IDYuOTk5OTlcclxuXHJcbiAgICAvLyBwcmV2ZW50IHJvdW5kaW5nIHVwIGZyb20gOS41IHRvIDEwLjBcclxuICAgIGlmICggc2Vjb25kU2lnbmlmaWNhbnREaWdpdCA9PT0gMTAgKSB7XHJcbiAgICAgIHNlY29uZFNpZ25pZmljYW50RGlnaXQgPSA5OyAvL2hhY2sgYWxlcnRcclxuICAgIH1cclxuXHJcbiAgICAvLyBFc3RpbWF0ZSB0aGUgdmFsdWUgdG8gb2J0YWluIHRvbGVyYW5jZSBiYW5kXHJcbiAgICBjb25zdCBhcHByb3hpbWF0ZVZhbHVlID0gKCBmaXJzdFNpZ25pZmljYW50RGlnaXQgKyBzZWNvbmRTaWduaWZpY2FudERpZ2l0IC8gMTAgKSAqIE1hdGgucG93KCAxMCwgZXhwb25lbnQgKTtcclxuICAgIGNvbnN0IHBlcmNlbnRFcnJvciA9IE1hdGguYWJzKCAoIHJlc2lzdGFuY2UgLSBhcHByb3hpbWF0ZVZhbHVlICkgLyByZXNpc3RhbmNlICogMTAwICk7XHJcbiAgICBjb25zdCBjb2xvcnNXaXRoVG9sZXJhbmNlID0gXy5maWx0ZXIoIGNvbG9yVGFibGUsIGNvbG9yVGFibGVFbnRyeSA9PiBjb2xvclRhYmxlRW50cnkudG9sZXJhbmNlICE9PSBudWxsICk7XHJcblxyXG4gICAgLy8gZmluZCB0aGUgbG93ZXN0IHRvbGVyYW5jZSB0aGF0IGZpdHMgdGhlIHZhbHVlXHJcbiAgICBjb25zdCBzb3J0ZWRDb2xvcnNXaXRoVG9sZXJhbmNlID0gXy5zb3J0QnkoIGNvbG9yc1dpdGhUb2xlcmFuY2UsICd0b2xlcmFuY2UnICk7XHJcbiAgICBsZXQgY29sb3IgPSBudWxsO1xyXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgc29ydGVkQ29sb3JzV2l0aFRvbGVyYW5jZS5sZW5ndGg7IGkrKyApIHtcclxuICAgICAgY29sb3IgPSBzb3J0ZWRDb2xvcnNXaXRoVG9sZXJhbmNlWyBpIF07XHJcbiAgICAgIGlmICggY29sb3IudG9sZXJhbmNlISA+IHBlcmNlbnRFcnJvciApIHtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggcGVyY2VudEVycm9yIDwgY29sb3IhLnRvbGVyYW5jZSEsICdubyB0b2xlcmFuY2UgaGlnaCBlbm91Z2ggdG8gYWNjb21tb2RhdGUgZXJyb3InICk7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICBnZXRFbnRyeSggJ3NpZ25pZmljYW50RmlndXJlJywgZmlyc3RTaWduaWZpY2FudERpZ2l0ICksXHJcbiAgICAgIGdldEVudHJ5KCAnc2lnbmlmaWNhbnRGaWd1cmUnLCBzZWNvbmRTaWduaWZpY2FudERpZ2l0ICksXHJcbiAgICAgIGdldEVudHJ5KCAnbXVsdGlwbGllcicsIGV4cG9uZW50IC0gMSApLCAvLyBzZWNvbmQgc2lnbmlmaWNhbnQgZmlndXJlIGNvdW50cyBmb3IgYSBwb3dlciAoc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0VsZWN0cm9uaWNfY29sb3JfY29kZSBhbmQgNDcwMCBvaG0gZXhhbXBsZSlcclxuICAgICAgZ2V0RW50cnkoICd0b2xlcmFuY2UnLCBjb2xvciEudG9sZXJhbmNlIClcclxuICAgIF07XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogRm9yIGRlYnVnZ2luZyBhbmQgdGVzdGluZywgZ2V0IHRoZSBodW1hbi1yZWFkYWJsZSBjb2xvciBuYW1lcy5cclxuICAgKi9cclxuICBnZXRDb2xvck5hbWVzOiBmdW5jdGlvbiggcmVzaXN0YW5jZTogbnVtYmVyICk6IHN0cmluZ1tdIHtcclxuICAgIHJldHVybiBfLm1hcCggdGhpcy5nZXRFbnRyaWVzKCByZXNpc3RhbmNlICksICduYW1lJyApO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybiB0aGUgY29sb3JzIGZvciB0aGUgZ2l2ZW4gcmVzaXN0YW5jZVxyXG4gICAqL1xyXG4gIGdldENvbG9yQXJyYXk6IGZ1bmN0aW9uKCByZXNpc3RhbmNlOiBudW1iZXIgKTogKCBDb2xvciB8IG51bGwgKVtdIHtcclxuICAgIHJldHVybiBfLm1hcCggdGhpcy5nZXRFbnRyaWVzKCByZXNpc3RhbmNlICksICdjb2xvcicgKTtcclxuICB9XHJcbn07XHJcblxyXG5jaXJjdWl0Q29uc3RydWN0aW9uS2l0Q29tbW9uLnJlZ2lzdGVyKCAnUmVzaXN0b3JDb2xvcnMnLCBSZXNpc3RvckNvbG9ycyApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgUmVzaXN0b3JDb2xvcnM7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLEtBQUssTUFBTSwwQkFBMEI7QUFDNUMsU0FBU0MsS0FBSyxRQUFRLGdDQUFnQztBQUN0RCxPQUFPQyw0QkFBNEIsTUFBTSxvQ0FBb0M7O0FBRTdFO0FBQ0E7QUFDQTtBQVFBLE1BQU1DLFVBQW1CLEdBQUcsQ0FDMUI7RUFBRUMsSUFBSSxFQUFFLE1BQU07RUFBRUMsaUJBQWlCLEVBQUUsSUFBSTtFQUFFQyxVQUFVLEVBQUUsSUFBSTtFQUFFQyxTQUFTLEVBQUUsRUFBRTtFQUFFQyxLQUFLLEVBQUU7QUFBSyxDQUFDLEVBQ3ZGO0VBQUVKLElBQUksRUFBRSxNQUFNO0VBQUVDLGlCQUFpQixFQUFFLElBQUk7RUFBRUMsVUFBVSxFQUFFLENBQUMsQ0FBQztFQUFFQyxTQUFTLEVBQUUsSUFBSTtFQUFFQyxLQUFLLEVBQUUsSUFBSVAsS0FBSyxDQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBSTtBQUFFLENBQUMsRUFDN0c7RUFBRUcsSUFBSSxFQUFFLFFBQVE7RUFBRUMsaUJBQWlCLEVBQUUsSUFBSTtFQUFFQyxVQUFVLEVBQUUsQ0FBQyxDQUFDO0VBQUVDLFNBQVMsRUFBRSxFQUFFO0VBQUVDLEtBQUssRUFBRSxJQUFJUCxLQUFLLENBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFJO0FBQUUsQ0FBQztBQUU3RztBQUNBO0VBQUVHLElBQUksRUFBRSxNQUFNO0VBQUVDLGlCQUFpQixFQUFFLElBQUk7RUFBRUMsVUFBVSxFQUFFLENBQUMsQ0FBQztFQUFFQyxTQUFTLEVBQUUsQ0FBQztFQUFFQyxLQUFLLEVBQUUsSUFBSVAsS0FBSyxDQUFFLFNBQVU7QUFBRSxDQUFDLEVBQ3RHO0VBQUVHLElBQUksRUFBRSxPQUFPO0VBQUVDLGlCQUFpQixFQUFFLENBQUM7RUFBRUMsVUFBVSxFQUFFLENBQUM7RUFBRUMsU0FBUyxFQUFFLElBQUk7RUFBRUMsS0FBSyxFQUFFLElBQUlQLEtBQUssQ0FBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUU7QUFBRSxDQUFDLEVBQ3BHO0VBQUVHLElBQUksRUFBRSxPQUFPO0VBQUVDLGlCQUFpQixFQUFFLENBQUM7RUFBRUMsVUFBVSxFQUFFLENBQUM7RUFBRUMsU0FBUyxFQUFFLElBQUk7RUFBRUMsS0FBSyxFQUFFLElBQUlQLEtBQUssQ0FBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUU7QUFBRSxDQUFDLEVBQ3ZHO0VBQUVHLElBQUksRUFBRSxLQUFLO0VBQUVDLGlCQUFpQixFQUFFLENBQUM7RUFBRUMsVUFBVSxFQUFFLENBQUM7RUFBRUMsU0FBUyxFQUFFLElBQUk7RUFBRUMsS0FBSyxFQUFFLElBQUlQLEtBQUssQ0FBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUU7QUFBRSxDQUFDLEVBQ3BHO0VBQUVHLElBQUksRUFBRSxRQUFRO0VBQUVDLGlCQUFpQixFQUFFLENBQUM7RUFBRUMsVUFBVSxFQUFFLENBQUM7RUFBRUMsU0FBUyxFQUFFLElBQUk7RUFBRUMsS0FBSyxFQUFFLElBQUlQLEtBQUssQ0FBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUU7QUFBRSxDQUFDLEVBQ3pHO0VBQUVHLElBQUksRUFBRSxRQUFRO0VBQUVDLGlCQUFpQixFQUFFLENBQUM7RUFBRUMsVUFBVSxFQUFFLENBQUM7RUFBRUMsU0FBUyxFQUFFLElBQUk7RUFBRUMsS0FBSyxFQUFFLElBQUlQLEtBQUssQ0FBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUU7QUFBRSxDQUFDLEVBQ3pHO0VBQUVHLElBQUksRUFBRSxPQUFPO0VBQUVDLGlCQUFpQixFQUFFLENBQUM7RUFBRUMsVUFBVSxFQUFFLENBQUM7RUFBRUMsU0FBUyxFQUFFLElBQUk7RUFBRUMsS0FBSyxFQUFFLElBQUlQLEtBQUssQ0FBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEVBQUc7QUFBRSxDQUFDLEVBQ3pHO0VBQUVHLElBQUksRUFBRSxNQUFNO0VBQUVDLGlCQUFpQixFQUFFLENBQUM7RUFBRUMsVUFBVSxFQUFFLENBQUM7RUFBRUMsU0FBUyxFQUFFLElBQUk7RUFBRUMsS0FBSyxFQUFFLElBQUlQLEtBQUssQ0FBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUk7QUFBRSxDQUFDLEVBQ3pHO0VBQUVHLElBQUksRUFBRSxRQUFRO0VBQUVDLGlCQUFpQixFQUFFLENBQUM7RUFBRUMsVUFBVSxFQUFFLENBQUM7RUFBRUMsU0FBUyxFQUFFLElBQUk7RUFBRUMsS0FBSyxFQUFFLElBQUlQLEtBQUssQ0FBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLEdBQUk7QUFBRSxDQUFDLEVBQ3pHO0VBQUVHLElBQUksRUFBRSxNQUFNO0VBQUVDLGlCQUFpQixFQUFFLENBQUM7RUFBRUMsVUFBVSxFQUFFLENBQUM7RUFBRUMsU0FBUyxFQUFFLElBQUk7RUFBRUMsS0FBSyxFQUFFLElBQUlQLEtBQUssQ0FBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUk7QUFBRSxDQUFDLEVBQ3pHO0VBQUVHLElBQUksRUFBRSxPQUFPO0VBQUVDLGlCQUFpQixFQUFFLENBQUM7RUFBRUMsVUFBVSxFQUFFLENBQUM7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