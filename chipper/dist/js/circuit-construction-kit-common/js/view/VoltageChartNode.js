// Copyright 2019-2023, University of Colorado Boulder

/**
 * Shows the voltage as a function of time on a scrolling chart.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */

import createObservableArray from '../../../axon/js/createObservableArray.js';
import Vector2 from '../../../dot/js/Vector2.js';
import Range from '../../../dot/js/Range.js';
import { Color, Rectangle } from '../../../scenery/js/imports.js';
import Tandem from '../../../tandem/js/Tandem.js';
import CCKCConstants from '../CCKCConstants.js';
import CCKCQueryParameters from '../CCKCQueryParameters.js';
import CircuitConstructionKitCommonStrings from '../CircuitConstructionKitCommonStrings.js';
import circuitConstructionKitCommon from '../circuitConstructionKitCommon.js';
import CCKCChartNode from './CCKCChartNode.js';
import { combineOptions } from '../../../phet-core/js/optionize.js';
const voltageWithUnitsStringProperty = CircuitConstructionKitCommonStrings.voltageWithUnitsStringProperty;

// constants
const SERIES_1_COLOR = '#ec3223';
const SERIES_2_COLOR = CCKCConstants.CHART_SERIES_COLOR;
export default class VoltageChartNode extends CCKCChartNode {
  constructor(circuitNode, timeProperty, visibleBoundsProperty, providedOptions) {
    providedOptions = combineOptions({
      defaultZoomLevel: new Range(-10, 10),
      tandem: Tandem.OPTIONAL
    }, providedOptions);
    super(circuitNode, timeProperty, visibleBoundsProperty, createObservableArray(), voltageWithUnitsStringProperty, providedOptions);
    this.probeNode1 = this.addProbeNode(SERIES_1_COLOR, SERIES_1_COLOR, 5, 10, this.aboveBottomLeft1Property, providedOptions.tandem.createTandem('probeNode1'));
    this.probeNode2 = this.addProbeNode(SERIES_2_COLOR, SERIES_2_COLOR, 36, 54, this.aboveBottomLeft2Property, providedOptions.tandem.createTandem('probeNode2'));
    this.lastStepTime = null;
  }
  sampleValue(time) {
    const redPoint = this.circuitNode.globalToLocalPoint(this.localToGlobalPoint(this.probeNode1.translation));
    const blackPoint = this.circuitNode.globalToLocalPoint(this.localToGlobalPoint(this.probeNode2.translation));
    const redConnection = this.circuitNode.getVoltageConnection(redPoint);
    const blackConnection = this.circuitNode.getVoltageConnection(blackPoint);
    const voltage = this.circuitNode.circuit.getVoltageBetweenConnections(redConnection, blackConnection, false);
    return voltage === null ? null : new Vector2(time, voltage);
  }

  /**
   * Records data and displays it on the chart
   * @param time - total elapsed time in seconds
   * @param dt - delta time since last update
   */
  step(time, dt) {
    if (this.meter.isActiveProperty.value) {
      this.series.push(this.sampleValue(time));

      // For debugging, depict the points where the sampling happens
      if (CCKCQueryParameters.showVoltmeterSamplePoints) {
        // These get erased when changing between lifelike/schematic
        this.circuitNode.addChild(new Rectangle(-1, -1, 2, 2, {
          fill: Color.BLACK,
          translation: this.circuitNode.globalToLocalPoint(this.localToGlobalPoint(this.probeNode1.translation))
        }));
      }
      while (this.series[0] === null || this.series.length > 0 && this.series[0].x < this.timeProperty.value - CCKCConstants.NUMBER_OF_TIME_DIVISIONS) {
        this.series.shift();
      }
    }
    this.updatePen();
    this.lastStepTime = time;
  }
  sampleLatestValue() {
    // Avoid trouble during fuzzboard startup
    if (this.lastStepTime === null) {
      return;
    }
    this.series.pop();
    assert && assert(typeof this.lastStepTime === 'number');
    if (typeof this.lastStepTime === 'number') {
      this.series.push(this.sampleValue(this.lastStepTime));
    }
    this.updatePen();
  }
}
circuitConstructionKitCommon.register('VoltageChartNode', VoltageChartNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjcmVhdGVPYnNlcnZhYmxlQXJyYXkiLCJWZWN0b3IyIiwiUmFuZ2UiLCJDb2xvciIsIlJlY3RhbmdsZSIsIlRhbmRlbSIsIkNDS0NDb25zdGFudHMiLCJDQ0tDUXVlcnlQYXJhbWV0ZXJzIiwiQ2lyY3VpdENvbnN0cnVjdGlvbktpdENvbW1vblN0cmluZ3MiLCJjaXJjdWl0Q29uc3RydWN0aW9uS2l0Q29tbW9uIiwiQ0NLQ0NoYXJ0Tm9kZSIsImNvbWJpbmVPcHRpb25zIiwidm9sdGFnZVdpdGhVbml0c1N0cmluZ1Byb3BlcnR5IiwiU0VSSUVTXzFfQ09MT1IiLCJTRVJJRVNfMl9DT0xPUiIsIkNIQVJUX1NFUklFU19DT0xPUiIsIlZvbHRhZ2VDaGFydE5vZGUiLCJjb25zdHJ1Y3RvciIsImNpcmN1aXROb2RlIiwidGltZVByb3BlcnR5IiwidmlzaWJsZUJvdW5kc1Byb3BlcnR5IiwicHJvdmlkZWRPcHRpb25zIiwiZGVmYXVsdFpvb21MZXZlbCIsInRhbmRlbSIsIk9QVElPTkFMIiwicHJvYmVOb2RlMSIsImFkZFByb2JlTm9kZSIsImFib3ZlQm90dG9tTGVmdDFQcm9wZXJ0eSIsImNyZWF0ZVRhbmRlbSIsInByb2JlTm9kZTIiLCJhYm92ZUJvdHRvbUxlZnQyUHJvcGVydHkiLCJsYXN0U3RlcFRpbWUiLCJzYW1wbGVWYWx1ZSIsInRpbWUiLCJyZWRQb2ludCIsImdsb2JhbFRvTG9jYWxQb2ludCIsImxvY2FsVG9HbG9iYWxQb2ludCIsInRyYW5zbGF0aW9uIiwiYmxhY2tQb2ludCIsInJlZENvbm5lY3Rpb24iLCJnZXRWb2x0YWdlQ29ubmVjdGlvbiIsImJsYWNrQ29ubmVjdGlvbiIsInZvbHRhZ2UiLCJjaXJjdWl0IiwiZ2V0Vm9sdGFnZUJldHdlZW5Db25uZWN0aW9ucyIsInN0ZXAiLCJkdCIsIm1ldGVyIiwiaXNBY3RpdmVQcm9wZXJ0eSIsInZhbHVlIiwic2VyaWVzIiwicHVzaCIsInNob3dWb2x0bWV0ZXJTYW1wbGVQb2ludHMiLCJhZGRDaGlsZCIsImZpbGwiLCJCTEFDSyIsImxlbmd0aCIsIngiLCJOVU1CRVJfT0ZfVElNRV9ESVZJU0lPTlMiLCJzaGlmdCIsInVwZGF0ZVBlbiIsInNhbXBsZUxhdGVzdFZhbHVlIiwicG9wIiwiYXNzZXJ0IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJWb2x0YWdlQ2hhcnROb2RlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE5LTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFNob3dzIHRoZSB2b2x0YWdlIGFzIGEgZnVuY3Rpb24gb2YgdGltZSBvbiBhIHNjcm9sbGluZyBjaGFydC5cclxuICpcclxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICovXHJcblxyXG5pbXBvcnQgY3JlYXRlT2JzZXJ2YWJsZUFycmF5IGZyb20gJy4uLy4uLy4uL2F4b24vanMvY3JlYXRlT2JzZXJ2YWJsZUFycmF5LmpzJztcclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgUmFuZ2UgZnJvbSAnLi4vLi4vLi4vZG90L2pzL1JhbmdlLmpzJztcclxuaW1wb3J0IHsgQ29sb3IsIFJlY3RhbmdsZSB9IGZyb20gJy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBUYW5kZW0gZnJvbSAnLi4vLi4vLi4vdGFuZGVtL2pzL1RhbmRlbS5qcyc7XHJcbmltcG9ydCBDQ0tDQ29uc3RhbnRzIGZyb20gJy4uL0NDS0NDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgQ0NLQ1F1ZXJ5UGFyYW1ldGVycyBmcm9tICcuLi9DQ0tDUXVlcnlQYXJhbWV0ZXJzLmpzJztcclxuaW1wb3J0IENpcmN1aXRDb25zdHJ1Y3Rpb25LaXRDb21tb25TdHJpbmdzIGZyb20gJy4uL0NpcmN1aXRDb25zdHJ1Y3Rpb25LaXRDb21tb25TdHJpbmdzLmpzJztcclxuaW1wb3J0IGNpcmN1aXRDb25zdHJ1Y3Rpb25LaXRDb21tb24gZnJvbSAnLi4vY2lyY3VpdENvbnN0cnVjdGlvbktpdENvbW1vbi5qcyc7XHJcbmltcG9ydCBDQ0tDQ2hhcnROb2RlLCB7IENDS0NDaGFydE5vZGVPcHRpb25zIH0gZnJvbSAnLi9DQ0tDQ2hhcnROb2RlLmpzJztcclxuaW1wb3J0IENpcmN1aXROb2RlIGZyb20gJy4vQ2lyY3VpdE5vZGUuanMnO1xyXG5pbXBvcnQgUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vYXhvbi9qcy9Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBCb3VuZHMyIGZyb20gJy4uLy4uLy4uL2RvdC9qcy9Cb3VuZHMyLmpzJztcclxuaW1wb3J0IENDS0NQcm9iZU5vZGUgZnJvbSAnLi9DQ0tDUHJvYmVOb2RlLmpzJztcclxuaW1wb3J0IHsgY29tYmluZU9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuXHJcbmNvbnN0IHZvbHRhZ2VXaXRoVW5pdHNTdHJpbmdQcm9wZXJ0eSA9IENpcmN1aXRDb25zdHJ1Y3Rpb25LaXRDb21tb25TdHJpbmdzLnZvbHRhZ2VXaXRoVW5pdHNTdHJpbmdQcm9wZXJ0eTtcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBTRVJJRVNfMV9DT0xPUiA9ICcjZWMzMjIzJztcclxuY29uc3QgU0VSSUVTXzJfQ09MT1IgPSBDQ0tDQ29uc3RhbnRzLkNIQVJUX1NFUklFU19DT0xPUjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZvbHRhZ2VDaGFydE5vZGUgZXh0ZW5kcyBDQ0tDQ2hhcnROb2RlIHtcclxuICBwcml2YXRlIHJlYWRvbmx5IHByb2JlTm9kZTE6IENDS0NQcm9iZU5vZGU7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBwcm9iZU5vZGUyOiBDQ0tDUHJvYmVOb2RlO1xyXG4gIHByaXZhdGUgbGFzdFN0ZXBUaW1lOiBudW1iZXIgfCBudWxsO1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIGNpcmN1aXROb2RlOiBDaXJjdWl0Tm9kZSwgdGltZVByb3BlcnR5OiBQcm9wZXJ0eTxudW1iZXI+LCB2aXNpYmxlQm91bmRzUHJvcGVydHk6IFByb3BlcnR5PEJvdW5kczI+LCBwcm92aWRlZE9wdGlvbnM/OiBDQ0tDQ2hhcnROb2RlT3B0aW9ucyApIHtcclxuXHJcbiAgICBwcm92aWRlZE9wdGlvbnMgPSBjb21iaW5lT3B0aW9uczxDQ0tDQ2hhcnROb2RlT3B0aW9ucz4oIHtcclxuICAgICAgZGVmYXVsdFpvb21MZXZlbDogbmV3IFJhbmdlKCAtMTAsIDEwICksXHJcbiAgICAgIHRhbmRlbTogVGFuZGVtLk9QVElPTkFMXHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICBzdXBlciggY2lyY3VpdE5vZGUsIHRpbWVQcm9wZXJ0eSwgdmlzaWJsZUJvdW5kc1Byb3BlcnR5LCBjcmVhdGVPYnNlcnZhYmxlQXJyYXkoKSwgdm9sdGFnZVdpdGhVbml0c1N0cmluZ1Byb3BlcnR5LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICB0aGlzLnByb2JlTm9kZTEgPSB0aGlzLmFkZFByb2JlTm9kZSggU0VSSUVTXzFfQ09MT1IsIFNFUklFU18xX0NPTE9SLCA1LCAxMCwgdGhpcy5hYm92ZUJvdHRvbUxlZnQxUHJvcGVydHksIHByb3ZpZGVkT3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAncHJvYmVOb2RlMScgKSApO1xyXG4gICAgdGhpcy5wcm9iZU5vZGUyID0gdGhpcy5hZGRQcm9iZU5vZGUoIFNFUklFU18yX0NPTE9SLCBTRVJJRVNfMl9DT0xPUiwgMzYsIDU0LCB0aGlzLmFib3ZlQm90dG9tTGVmdDJQcm9wZXJ0eSwgcHJvdmlkZWRPcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdwcm9iZU5vZGUyJyApICk7XHJcblxyXG4gICAgdGhpcy5sYXN0U3RlcFRpbWUgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNhbXBsZVZhbHVlKCB0aW1lOiBudW1iZXIgKTogVmVjdG9yMiB8IG51bGwge1xyXG4gICAgY29uc3QgcmVkUG9pbnQgPSB0aGlzLmNpcmN1aXROb2RlLmdsb2JhbFRvTG9jYWxQb2ludCggdGhpcy5sb2NhbFRvR2xvYmFsUG9pbnQoIHRoaXMucHJvYmVOb2RlMS50cmFuc2xhdGlvbiApICk7XHJcbiAgICBjb25zdCBibGFja1BvaW50ID0gdGhpcy5jaXJjdWl0Tm9kZS5nbG9iYWxUb0xvY2FsUG9pbnQoIHRoaXMubG9jYWxUb0dsb2JhbFBvaW50KCB0aGlzLnByb2JlTm9kZTIudHJhbnNsYXRpb24gKSApO1xyXG5cclxuICAgIGNvbnN0IHJlZENvbm5lY3Rpb24gPSB0aGlzLmNpcmN1aXROb2RlLmdldFZvbHRhZ2VDb25uZWN0aW9uKCByZWRQb2ludCApO1xyXG4gICAgY29uc3QgYmxhY2tDb25uZWN0aW9uID0gdGhpcy5jaXJjdWl0Tm9kZS5nZXRWb2x0YWdlQ29ubmVjdGlvbiggYmxhY2tQb2ludCApO1xyXG4gICAgY29uc3Qgdm9sdGFnZSA9IHRoaXMuY2lyY3VpdE5vZGUuY2lyY3VpdC5nZXRWb2x0YWdlQmV0d2VlbkNvbm5lY3Rpb25zKCByZWRDb25uZWN0aW9uLCBibGFja0Nvbm5lY3Rpb24sIGZhbHNlICk7XHJcblxyXG4gICAgcmV0dXJuIHZvbHRhZ2UgPT09IG51bGwgPyBudWxsIDogbmV3IFZlY3RvcjIoIHRpbWUsIHZvbHRhZ2UgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlY29yZHMgZGF0YSBhbmQgZGlzcGxheXMgaXQgb24gdGhlIGNoYXJ0XHJcbiAgICogQHBhcmFtIHRpbWUgLSB0b3RhbCBlbGFwc2VkIHRpbWUgaW4gc2Vjb25kc1xyXG4gICAqIEBwYXJhbSBkdCAtIGRlbHRhIHRpbWUgc2luY2UgbGFzdCB1cGRhdGVcclxuICAgKi9cclxuICBwdWJsaWMgc3RlcCggdGltZTogbnVtYmVyLCBkdDogbnVtYmVyICk6IHZvaWQge1xyXG4gICAgaWYgKCB0aGlzLm1ldGVyLmlzQWN0aXZlUHJvcGVydHkudmFsdWUgKSB7XHJcblxyXG4gICAgICB0aGlzLnNlcmllcy5wdXNoKCB0aGlzLnNhbXBsZVZhbHVlKCB0aW1lICkgKTtcclxuXHJcbiAgICAgIC8vIEZvciBkZWJ1Z2dpbmcsIGRlcGljdCB0aGUgcG9pbnRzIHdoZXJlIHRoZSBzYW1wbGluZyBoYXBwZW5zXHJcbiAgICAgIGlmICggQ0NLQ1F1ZXJ5UGFyYW1ldGVycy5zaG93Vm9sdG1ldGVyU2FtcGxlUG9pbnRzICkge1xyXG5cclxuICAgICAgICAvLyBUaGVzZSBnZXQgZXJhc2VkIHdoZW4gY2hhbmdpbmcgYmV0d2VlbiBsaWZlbGlrZS9zY2hlbWF0aWNcclxuICAgICAgICB0aGlzLmNpcmN1aXROb2RlLmFkZENoaWxkKCBuZXcgUmVjdGFuZ2xlKCAtMSwgLTEsIDIsIDIsIHtcclxuICAgICAgICAgIGZpbGw6IENvbG9yLkJMQUNLLFxyXG4gICAgICAgICAgdHJhbnNsYXRpb246IHRoaXMuY2lyY3VpdE5vZGUuZ2xvYmFsVG9Mb2NhbFBvaW50KCB0aGlzLmxvY2FsVG9HbG9iYWxQb2ludCggdGhpcy5wcm9iZU5vZGUxLnRyYW5zbGF0aW9uICkgKVxyXG4gICAgICAgIH0gKSApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB3aGlsZSAoICggdGhpcy5zZXJpZXNbIDAgXSA9PT0gbnVsbCApIHx8XHJcbiAgICAgICAgICAgICAgKCB0aGlzLnNlcmllcy5sZW5ndGggPiAwICYmIHRoaXMuc2VyaWVzWyAwIF0ueCA8IHRoaXMudGltZVByb3BlcnR5LnZhbHVlIC0gQ0NLQ0NvbnN0YW50cy5OVU1CRVJfT0ZfVElNRV9ESVZJU0lPTlMgKSApIHtcclxuICAgICAgICB0aGlzLnNlcmllcy5zaGlmdCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLnVwZGF0ZVBlbigpO1xyXG4gICAgdGhpcy5sYXN0U3RlcFRpbWUgPSB0aW1lO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNhbXBsZUxhdGVzdFZhbHVlKCk6IHZvaWQge1xyXG5cclxuICAgIC8vIEF2b2lkIHRyb3VibGUgZHVyaW5nIGZ1enpib2FyZCBzdGFydHVwXHJcbiAgICBpZiAoIHRoaXMubGFzdFN0ZXBUaW1lID09PSBudWxsICkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zZXJpZXMucG9wKCk7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0eXBlb2YgdGhpcy5sYXN0U3RlcFRpbWUgPT09ICdudW1iZXInICk7XHJcbiAgICBpZiAoIHR5cGVvZiB0aGlzLmxhc3RTdGVwVGltZSA9PT0gJ251bWJlcicgKSB7XHJcbiAgICAgIHRoaXMuc2VyaWVzLnB1c2goIHRoaXMuc2FtcGxlVmFsdWUoIHRoaXMubGFzdFN0ZXBUaW1lICkgKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnVwZGF0ZVBlbigpO1xyXG4gIH1cclxufVxyXG5cclxuY2lyY3VpdENvbnN0cnVjdGlvbktpdENvbW1vbi5yZWdpc3RlciggJ1ZvbHRhZ2VDaGFydE5vZGUnLCBWb2x0YWdlQ2hhcnROb2RlICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLHFCQUFxQixNQUFNLDJDQUEyQztBQUM3RSxPQUFPQyxPQUFPLE1BQU0sNEJBQTRCO0FBQ2hELE9BQU9DLEtBQUssTUFBTSwwQkFBMEI7QUFDNUMsU0FBU0MsS0FBSyxFQUFFQyxTQUFTLFFBQVEsZ0NBQWdDO0FBQ2pFLE9BQU9DLE1BQU0sTUFBTSw4QkFBOEI7QUFDakQsT0FBT0MsYUFBYSxNQUFNLHFCQUFxQjtBQUMvQyxPQUFPQyxtQkFBbUIsTUFBTSwyQkFBMkI7QUFDM0QsT0FBT0MsbUNBQW1DLE1BQU0sMkNBQTJDO0FBQzNGLE9BQU9DLDRCQUE0QixNQUFNLG9DQUFvQztBQUM3RSxPQUFPQyxhQUFhLE1BQWdDLG9CQUFvQjtBQUt4RSxTQUFTQyxjQUFjLFFBQVEsb0NBQW9DO0FBRW5FLE1BQU1DLDhCQUE4QixHQUFHSixtQ0FBbUMsQ0FBQ0ksOEJBQThCOztBQUV6RztBQUNB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