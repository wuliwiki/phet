// Copyright 2015-2023, University of Colorado Boulder

/**
 * This node shows a resistor.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */

import Matrix3 from '../../../dot/js/Matrix3.js';
import { Shape } from '../../../kite/js/imports.js';
import { Color, Image, Node, Path, Rectangle } from '../../../scenery/js/imports.js';
import coin_png from '../../images/coin_png.js';
import dog_png from '../../images/dog_png.js';
import dollar_png from '../../images/dollar_png.js';
import eraser_png from '../../images/eraser_png.js';
import hand_png from '../../images/hand_png.js';
import paperClip_png from '../../images/paperClip_png.js';
import pencil_png from '../../images/pencil_png.js';
import resistorHigh_png from '../../images/resistorHigh_png.js';
import resistor_png from '../../images/resistor_png.js';
import CCKCConstants from '../CCKCConstants.js';
import circuitConstructionKitCommon from '../circuitConstructionKitCommon.js';
import FixedCircuitElementNode from './FixedCircuitElementNode.js';
import ResistorColors from './ResistorColors.js';
import schematicTypeProperty from './schematicTypeProperty.js';
import SchematicType from './SchematicType.js';
import ResistorType from '../model/ResistorType.js';
import { combineOptions } from '../../../phet-core/js/optionize.js';

// constants

// hard coded because Image.width and Image.initialWidth sometimes return bad values in the built version
const LIFELIKE_IMAGE_WIDTH = 150;
const COLOR_BAND_WIDTH = 10;
const COLOR_BAND_HEIGHT = 39.75;
const COLOR_BAND_TOP = -0.25;
const COLOR_BAND_PADDING = 33;
const AVAILABLE_COLOR_BAND_SPACE = LIFELIKE_IMAGE_WIDTH - 2 * COLOR_BAND_PADDING;

// max is 4 bands, even though they are not always shown
const REMAINING_COLOR_BAND_SPACE = AVAILABLE_COLOR_BAND_SPACE - 4 * COLOR_BAND_WIDTH;
const COLOR_BAND_SPACING = REMAINING_COLOR_BAND_SPACE / 4 - 2; // two spaces before last band
const COLOR_BAND_Y = COLOR_BAND_TOP + 2.5;

// Points sampled using Photoshop from a raster of the IEEE isIcon seen at
// https://upload.wikimedia.org/wikipedia/commons/c/cb/Circuit_elements.svg
const SCHEMATIC_SCALE = 0.54;
const SCHEMATIC_PERIOD = 22 * SCHEMATIC_SCALE;
const SCHEMATIC_STEM_WIDTH = 84 * SCHEMATIC_SCALE;
const SCHEMATIC_WAVELENGTH = 54 * SCHEMATIC_SCALE;
const RESISTOR_IMAGE_MAP = new Map();
RESISTOR_IMAGE_MAP.set(ResistorType.COIN, coin_png);
RESISTOR_IMAGE_MAP.set(ResistorType.PAPER_CLIP, paperClip_png);
RESISTOR_IMAGE_MAP.set(ResistorType.PENCIL, pencil_png);
RESISTOR_IMAGE_MAP.set(ResistorType.ERASER, eraser_png);
RESISTOR_IMAGE_MAP.set(ResistorType.HAND, hand_png);
RESISTOR_IMAGE_MAP.set(ResistorType.EXTREME_RESISTOR, resistorHigh_png);
RESISTOR_IMAGE_MAP.set(ResistorType.RESISTOR, resistor_png);
RESISTOR_IMAGE_MAP.set(ResistorType.DOG, dog_png);
RESISTOR_IMAGE_MAP.set(ResistorType.DOLLAR_BILL, dollar_png);
export default class ResistorNode extends FixedCircuitElementNode {
  // Identifies the images used to render this node so they can be prepopulated in the WebGL sprite sheet.
  static webglSpriteNodes = [new Image(resistor_png), new Image(paperClip_png), new Image(coin_png), new Image(pencil_png), new Image(eraser_png), new Image(hand_png), new Image(resistorHigh_png), new Image(dog_png), new Image(dollar_png)];

  /**
   * @param screenView - main screen view, null for isIcon
   * @param circuitNode, null for isIcon
   * @param resistor
   * @param viewTypeProperty
   * @param tandem
   * @param [providedOptions]
   */
  constructor(screenView, circuitNode, resistor, viewTypeProperty, tandem, providedOptions) {
    providedOptions = combineOptions({
      isIcon: false,
      useHitTestForSensors: true
    }, providedOptions);

    // Assigned to instance variable after super()
    const lifelikeResistorImageNode = new Image(RESISTOR_IMAGE_MAP.get(resistor.resistorType));
    let updateColorBands = null;
    let colorBandsNode = null;

    // Add color bands for the normal resistor
    if (resistor.resistorType === ResistorType.RESISTOR) {
      // Color bands for resistance > 0
      const colorBands = _.range(4).map(index => {
        const additionalOffset = index === 3 ? 12 : 0;
        return new Rectangle(COLOR_BAND_PADDING + (COLOR_BAND_WIDTH + COLOR_BAND_SPACING) * index + additionalOffset, COLOR_BAND_Y, COLOR_BAND_WIDTH, COLOR_BAND_HEIGHT);
      });

      // Single color band when resistance = 0 which appears in the middle
      const singleColorBand = new Rectangle(0, 0, COLOR_BAND_WIDTH, COLOR_BAND_HEIGHT, {
        centerX: COLOR_BAND_PADDING + AVAILABLE_COLOR_BAND_SPACE / 2,
        y: COLOR_BAND_Y
      });

      /**
       * When the resistance changes, update the colors of the color bands.
       */
      updateColorBands = resistance => {
        const colors = ResistorColors.getColorArray(resistance);
        if (colors.length === 1) {
          singleColorBand.fill = colors[0];
          assert && assert(colors[0] !== null && colors[0].equals(Color.BLACK), 'single band should be black');
          colorBands.forEach(colorBand => {
            colorBand.fill = null;
          });
        } else {
          // Show all 4 colors bands and hide the 0-resistance band
          singleColorBand.fill = null;
          for (let i = 0; i < colorBands.length; i++) {
            colorBands[i].fill = colors[i];
          }
        }
      };
      resistor.resistanceProperty.link(updateColorBands);

      // Add the color bands to the resistor image
      colorBandsNode = new Node({
        children: [...colorBands, singleColorBand]
      });
      resistor.isColorCodeVisibleProperty.link(isColorCodeVisible => {
        colorBandsNode.visible = isColorCodeVisible;
      });
      lifelikeResistorImageNode.addChild(colorBandsNode);
    }

    // Icons should appear the same in the toolbox, see
    // https://github.com/phetsims/circuit-construction-kit-common/issues/389
    const width = providedOptions.isIcon ? CCKCConstants.RESISTOR_LENGTH : resistor.distanceBetweenVertices;
    lifelikeResistorImageNode.mutate({
      scale: width / lifelikeResistorImageNode.width
    });

    // Classical zig-zag shape
    let ieeeSchematicShape = new Shape().moveTo(0, lifelikeResistorImageNode.height * SCHEMATIC_SCALE).lineToRelative(SCHEMATIC_STEM_WIDTH, 0).lineToRelative(SCHEMATIC_PERIOD / 2, -SCHEMATIC_WAVELENGTH / 2).lineToRelative(SCHEMATIC_PERIOD, SCHEMATIC_WAVELENGTH).lineToRelative(SCHEMATIC_PERIOD, -SCHEMATIC_WAVELENGTH).lineToRelative(SCHEMATIC_PERIOD, SCHEMATIC_WAVELENGTH).lineToRelative(SCHEMATIC_PERIOD, -SCHEMATIC_WAVELENGTH).lineToRelative(SCHEMATIC_PERIOD, SCHEMATIC_WAVELENGTH).lineToRelative(SCHEMATIC_PERIOD / 2, -SCHEMATIC_WAVELENGTH / 2).lineToRelative(SCHEMATIC_STEM_WIDTH, 0);
    let scale = lifelikeResistorImageNode.width / ieeeSchematicShape.bounds.width;
    ieeeSchematicShape = ieeeSchematicShape.transformed(Matrix3.scale(scale, scale));
    const offsetX = ieeeSchematicShape.bounds.minX;
    const offsetY = ieeeSchematicShape.bounds.minY;
    ieeeSchematicShape = ieeeSchematicShape.transformed(Matrix3.translation(-offsetX, -offsetY));

    // IEC Resistor: it is a box with a left horizontal lead and a right horizontal lead
    const boxHeight = 30;
    const boxLength = 70;
    let iecSchematicShape = new Shape().moveTo(0, boxHeight / 2)

    // left horizontal lead
    .lineToRelative(SCHEMATIC_STEM_WIDTH, 0)

    // upper half of the box
    .lineToRelative(0, -boxHeight / 2).lineToRelative(boxLength, 0).lineToRelative(0, boxHeight / 2)

    // right horizontal lead
    .lineToRelative(SCHEMATIC_STEM_WIDTH, 0)

    // go back along the right horizontal lead
    .lineToRelative(-SCHEMATIC_STEM_WIDTH, 0)

    // lower half of the box
    .lineToRelative(0, boxHeight / 2).lineToRelative(-boxLength, 0).lineToRelative(0, -boxHeight / 2);
    scale = lifelikeResistorImageNode.width / iecSchematicShape.bounds.width;
    iecSchematicShape = iecSchematicShape.transformed(Matrix3.scale(scale, scale));
    const schematicNode = new Path(ieeeSchematicShape, {
      stroke: Color.BLACK,
      lineWidth: CCKCConstants.SCHEMATIC_LINE_WIDTH
    });
    const updateSchematicType = schematicType => {
      schematicNode.shape = schematicType === SchematicType.IEEE ? ieeeSchematicShape : iecSchematicShape;
    };
    schematicTypeProperty.link(updateSchematicType);
    schematicNode.mouseArea = schematicNode.localBounds;
    schematicNode.touchArea = schematicNode.localBounds;

    // Center vertically to match the FixedCircuitElementNode assumption that origin is center left
    schematicNode.centerY = 0;
    lifelikeResistorImageNode.centerY = 0;
    lifelikeResistorImageNode.translate(0, resistor.resistorType.verticalOffset);

    // Super call
    super(screenView, circuitNode, resistor, viewTypeProperty, lifelikeResistorImageNode, schematicNode, tandem, providedOptions);
    this.resistor = resistor;
    this.lifelikeResistorImageNode = lifelikeResistorImageNode;
    this.disposeResistorNode = () => {
      updateColorBands && resistor.resistanceProperty.unlink(updateColorBands);
      lifelikeResistorImageNode.dispose();
      schematicTypeProperty.unlink(updateSchematicType);
      colorBandsNode && colorBandsNode.dispose();
    };
  }
  dispose() {
    this.disposeResistorNode();
    super.dispose();
  }
}
circuitConstructionKitCommon.register('ResistorNode', ResistorNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNYXRyaXgzIiwiU2hhcGUiLCJDb2xvciIsIkltYWdlIiwiTm9kZSIsIlBhdGgiLCJSZWN0YW5nbGUiLCJjb2luX3BuZyIsImRvZ19wbmciLCJkb2xsYXJfcG5nIiwiZXJhc2VyX3BuZyIsImhhbmRfcG5nIiwicGFwZXJDbGlwX3BuZyIsInBlbmNpbF9wbmciLCJyZXNpc3RvckhpZ2hfcG5nIiwicmVzaXN0b3JfcG5nIiwiQ0NLQ0NvbnN0YW50cyIsImNpcmN1aXRDb25zdHJ1Y3Rpb25LaXRDb21tb24iLCJGaXhlZENpcmN1aXRFbGVtZW50Tm9kZSIsIlJlc2lzdG9yQ29sb3JzIiwic2NoZW1hdGljVHlwZVByb3BlcnR5IiwiU2NoZW1hdGljVHlwZSIsIlJlc2lzdG9yVHlwZSIsImNvbWJpbmVPcHRpb25zIiwiTElGRUxJS0VfSU1BR0VfV0lEVEgiLCJDT0xPUl9CQU5EX1dJRFRIIiwiQ09MT1JfQkFORF9IRUlHSFQiLCJDT0xPUl9CQU5EX1RPUCIsIkNPTE9SX0JBTkRfUEFERElORyIsIkFWQUlMQUJMRV9DT0xPUl9CQU5EX1NQQUNFIiwiUkVNQUlOSU5HX0NPTE9SX0JBTkRfU1BBQ0UiLCJDT0xPUl9CQU5EX1NQQUNJTkciLCJDT0xPUl9CQU5EX1kiLCJTQ0hFTUFUSUNfU0NBTEUiLCJTQ0hFTUFUSUNfUEVSSU9EIiwiU0NIRU1BVElDX1NURU1fV0lEVEgiLCJTQ0hFTUFUSUNfV0FWRUxFTkdUSCIsIlJFU0lTVE9SX0lNQUdFX01BUCIsIk1hcCIsInNldCIsIkNPSU4iLCJQQVBFUl9DTElQIiwiUEVOQ0lMIiwiRVJBU0VSIiwiSEFORCIsIkVYVFJFTUVfUkVTSVNUT1IiLCJSRVNJU1RPUiIsIkRPRyIsIkRPTExBUl9CSUxMIiwiUmVzaXN0b3JOb2RlIiwid2ViZ2xTcHJpdGVOb2RlcyIsImNvbnN0cnVjdG9yIiwic2NyZWVuVmlldyIsImNpcmN1aXROb2RlIiwicmVzaXN0b3IiLCJ2aWV3VHlwZVByb3BlcnR5IiwidGFuZGVtIiwicHJvdmlkZWRPcHRpb25zIiwiaXNJY29uIiwidXNlSGl0VGVzdEZvclNlbnNvcnMiLCJsaWZlbGlrZVJlc2lzdG9ySW1hZ2VOb2RlIiwiZ2V0IiwicmVzaXN0b3JUeXBlIiwidXBkYXRlQ29sb3JCYW5kcyIsImNvbG9yQmFuZHNOb2RlIiwiY29sb3JCYW5kcyIsIl8iLCJyYW5nZSIsIm1hcCIsImluZGV4IiwiYWRkaXRpb25hbE9mZnNldCIsInNpbmdsZUNvbG9yQmFuZCIsImNlbnRlclgiLCJ5IiwicmVzaXN0YW5jZSIsImNvbG9ycyIsImdldENvbG9yQXJyYXkiLCJsZW5ndGgiLCJmaWxsIiwiYXNzZXJ0IiwiZXF1YWxzIiwiQkxBQ0siLCJmb3JFYWNoIiwiY29sb3JCYW5kIiwiaSIsInJlc2lzdGFuY2VQcm9wZXJ0eSIsImxpbmsiLCJjaGlsZHJlbiIsImlzQ29sb3JDb2RlVmlzaWJsZVByb3BlcnR5IiwiaXNDb2xvckNvZGVWaXNpYmxlIiwidmlzaWJsZSIsImFkZENoaWxkIiwid2lkdGgiLCJSRVNJU1RPUl9MRU5HVEgiLCJkaXN0YW5jZUJldHdlZW5WZXJ0aWNlcyIsIm11dGF0ZSIsInNjYWxlIiwiaWVlZVNjaGVtYXRpY1NoYXBlIiwibW92ZVRvIiwiaGVpZ2h0IiwibGluZVRvUmVsYXRpdmUiLCJib3VuZHMiLCJ0cmFuc2Zvcm1lZCIsIm9mZnNldFgiLCJtaW5YIiwib2Zmc2V0WSIsIm1pblkiLCJ0cmFuc2xhdGlvbiIsImJveEhlaWdodCIsImJveExlbmd0aCIsImllY1NjaGVtYXRpY1NoYXBlIiwic2NoZW1hdGljTm9kZSIsInN0cm9rZSIsImxpbmVXaWR0aCIsIlNDSEVNQVRJQ19MSU5FX1dJRFRIIiwidXBkYXRlU2NoZW1hdGljVHlwZSIsInNjaGVtYXRpY1R5cGUiLCJzaGFwZSIsIklFRUUiLCJtb3VzZUFyZWEiLCJsb2NhbEJvdW5kcyIsInRvdWNoQXJlYSIsImNlbnRlclkiLCJ0cmFuc2xhdGUiLCJ2ZXJ0aWNhbE9mZnNldCIsImRpc3Bvc2VSZXNpc3Rvck5vZGUiLCJ1bmxpbmsiLCJkaXNwb3NlIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJSZXNpc3Rvck5vZGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTUtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogVGhpcyBub2RlIHNob3dzIGEgcmVzaXN0b3IuXHJcbiAqXHJcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IFByb3BlcnR5IGZyb20gJy4uLy4uLy4uL2F4b24vanMvUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgTWF0cml4MyBmcm9tICcuLi8uLi8uLi9kb3QvanMvTWF0cml4My5qcyc7XHJcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSAnLi4vLi4vLi4va2l0ZS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IHsgQ29sb3IsIEltYWdlLCBOb2RlLCBQYXRoLCBSZWN0YW5nbGUgfSBmcm9tICcuLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xyXG5pbXBvcnQgY29pbl9wbmcgZnJvbSAnLi4vLi4vaW1hZ2VzL2NvaW5fcG5nLmpzJztcclxuaW1wb3J0IGRvZ19wbmcgZnJvbSAnLi4vLi4vaW1hZ2VzL2RvZ19wbmcuanMnO1xyXG5pbXBvcnQgZG9sbGFyX3BuZyBmcm9tICcuLi8uLi9pbWFnZXMvZG9sbGFyX3BuZy5qcyc7XHJcbmltcG9ydCBlcmFzZXJfcG5nIGZyb20gJy4uLy4uL2ltYWdlcy9lcmFzZXJfcG5nLmpzJztcclxuaW1wb3J0IGhhbmRfcG5nIGZyb20gJy4uLy4uL2ltYWdlcy9oYW5kX3BuZy5qcyc7XHJcbmltcG9ydCBwYXBlckNsaXBfcG5nIGZyb20gJy4uLy4uL2ltYWdlcy9wYXBlckNsaXBfcG5nLmpzJztcclxuaW1wb3J0IHBlbmNpbF9wbmcgZnJvbSAnLi4vLi4vaW1hZ2VzL3BlbmNpbF9wbmcuanMnO1xyXG5pbXBvcnQgcmVzaXN0b3JIaWdoX3BuZyBmcm9tICcuLi8uLi9pbWFnZXMvcmVzaXN0b3JIaWdoX3BuZy5qcyc7XHJcbmltcG9ydCByZXNpc3Rvcl9wbmcgZnJvbSAnLi4vLi4vaW1hZ2VzL3Jlc2lzdG9yX3BuZy5qcyc7XHJcbmltcG9ydCBDQ0tDQ29uc3RhbnRzIGZyb20gJy4uL0NDS0NDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgY2lyY3VpdENvbnN0cnVjdGlvbktpdENvbW1vbiBmcm9tICcuLi9jaXJjdWl0Q29uc3RydWN0aW9uS2l0Q29tbW9uLmpzJztcclxuaW1wb3J0IENpcmN1aXRFbGVtZW50Vmlld1R5cGUgZnJvbSAnLi4vbW9kZWwvQ2lyY3VpdEVsZW1lbnRWaWV3VHlwZS5qcyc7XHJcbmltcG9ydCBSZXNpc3RvciBmcm9tICcuLi9tb2RlbC9SZXNpc3Rvci5qcyc7XHJcbmltcG9ydCBDQ0tDU2NyZWVuVmlldyBmcm9tICcuL0NDS0NTY3JlZW5WaWV3LmpzJztcclxuaW1wb3J0IENpcmN1aXROb2RlIGZyb20gJy4vQ2lyY3VpdE5vZGUuanMnO1xyXG5pbXBvcnQgRml4ZWRDaXJjdWl0RWxlbWVudE5vZGUsIHsgRml4ZWRDaXJjdWl0RWxlbWVudE5vZGVPcHRpb25zIH0gZnJvbSAnLi9GaXhlZENpcmN1aXRFbGVtZW50Tm9kZS5qcyc7XHJcbmltcG9ydCBSZXNpc3RvckNvbG9ycyBmcm9tICcuL1Jlc2lzdG9yQ29sb3JzLmpzJztcclxuaW1wb3J0IHNjaGVtYXRpY1R5cGVQcm9wZXJ0eSBmcm9tICcuL3NjaGVtYXRpY1R5cGVQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBTY2hlbWF0aWNUeXBlIGZyb20gJy4vU2NoZW1hdGljVHlwZS5qcyc7XHJcbmltcG9ydCBSZXNpc3RvclR5cGUgZnJvbSAnLi4vbW9kZWwvUmVzaXN0b3JUeXBlLmpzJztcclxuaW1wb3J0IHsgY29tYmluZU9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5cclxuLy8gaGFyZCBjb2RlZCBiZWNhdXNlIEltYWdlLndpZHRoIGFuZCBJbWFnZS5pbml0aWFsV2lkdGggc29tZXRpbWVzIHJldHVybiBiYWQgdmFsdWVzIGluIHRoZSBidWlsdCB2ZXJzaW9uXHJcbmNvbnN0IExJRkVMSUtFX0lNQUdFX1dJRFRIID0gMTUwO1xyXG5jb25zdCBDT0xPUl9CQU5EX1dJRFRIID0gMTA7XHJcbmNvbnN0IENPTE9SX0JBTkRfSEVJR0hUID0gMzkuNzU7XHJcbmNvbnN0IENPTE9SX0JBTkRfVE9QID0gLTAuMjU7XHJcbmNvbnN0IENPTE9SX0JBTkRfUEFERElORyA9IDMzO1xyXG5jb25zdCBBVkFJTEFCTEVfQ09MT1JfQkFORF9TUEFDRSA9IExJRkVMSUtFX0lNQUdFX1dJRFRIIC0gMiAqIENPTE9SX0JBTkRfUEFERElORztcclxuXHJcbi8vIG1heCBpcyA0IGJhbmRzLCBldmVuIHRob3VnaCB0aGV5IGFyZSBub3QgYWx3YXlzIHNob3duXHJcbmNvbnN0IFJFTUFJTklOR19DT0xPUl9CQU5EX1NQQUNFID0gQVZBSUxBQkxFX0NPTE9SX0JBTkRfU1BBQ0UgLSA0ICogQ09MT1JfQkFORF9XSURUSDtcclxuY29uc3QgQ09MT1JfQkFORF9TUEFDSU5HID0gUkVNQUlOSU5HX0NPTE9SX0JBTkRfU1BBQ0UgLyA0IC0gMjsgLy8gdHdvIHNwYWNlcyBiZWZvcmUgbGFzdCBiYW5kXHJcbmNvbnN0IENPTE9SX0JBTkRfWSA9IENPTE9SX0JBTkRfVE9QICsgMi41O1xyXG5cclxuLy8gUG9pbnRzIHNhbXBsZWQgdXNpbmcgUGhvdG9zaG9wIGZyb20gYSByYXN0ZXIgb2YgdGhlIElFRUUgaXNJY29uIHNlZW4gYXRcclxuLy8gaHR0cHM6Ly91cGxvYWQud2lraW1lZGlhLm9yZy93aWtpcGVkaWEvY29tbW9ucy9jL2NiL0NpcmN1aXRfZWxlbWVudHMuc3ZnXHJcbmNvbnN0IFNDSEVNQVRJQ19TQ0FMRSA9IDAuNTQ7XHJcbmNvbnN0IFNDSEVNQVRJQ19QRVJJT0QgPSAyMiAqIFNDSEVNQVRJQ19TQ0FMRTtcclxuY29uc3QgU0NIRU1BVElDX1NURU1fV0lEVEggPSA4NCAqIFNDSEVNQVRJQ19TQ0FMRTtcclxuY29uc3QgU0NIRU1BVElDX1dBVkVMRU5HVEggPSA1NCAqIFNDSEVNQVRJQ19TQ0FMRTtcclxuXHJcbmNvbnN0IFJFU0lTVE9SX0lNQUdFX01BUCA9IG5ldyBNYXA8UmVzaXN0b3JUeXBlLCBIVE1MSW1hZ2VFbGVtZW50PigpO1xyXG5SRVNJU1RPUl9JTUFHRV9NQVAuc2V0KCBSZXNpc3RvclR5cGUuQ09JTiwgY29pbl9wbmcgKTtcclxuUkVTSVNUT1JfSU1BR0VfTUFQLnNldCggUmVzaXN0b3JUeXBlLlBBUEVSX0NMSVAsIHBhcGVyQ2xpcF9wbmcgKTtcclxuUkVTSVNUT1JfSU1BR0VfTUFQLnNldCggUmVzaXN0b3JUeXBlLlBFTkNJTCwgcGVuY2lsX3BuZyApO1xyXG5SRVNJU1RPUl9JTUFHRV9NQVAuc2V0KCBSZXNpc3RvclR5cGUuRVJBU0VSLCBlcmFzZXJfcG5nICk7XHJcblJFU0lTVE9SX0lNQUdFX01BUC5zZXQoIFJlc2lzdG9yVHlwZS5IQU5ELCBoYW5kX3BuZyApO1xyXG5SRVNJU1RPUl9JTUFHRV9NQVAuc2V0KCBSZXNpc3RvclR5cGUuRVhUUkVNRV9SRVNJU1RPUiwgcmVzaXN0b3JIaWdoX3BuZyApO1xyXG5SRVNJU1RPUl9JTUFHRV9NQVAuc2V0KCBSZXNpc3RvclR5cGUuUkVTSVNUT1IsIHJlc2lzdG9yX3BuZyApO1xyXG5SRVNJU1RPUl9JTUFHRV9NQVAuc2V0KCBSZXNpc3RvclR5cGUuRE9HLCBkb2dfcG5nICk7XHJcblJFU0lTVE9SX0lNQUdFX01BUC5zZXQoIFJlc2lzdG9yVHlwZS5ET0xMQVJfQklMTCwgZG9sbGFyX3BuZyApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVzaXN0b3JOb2RlIGV4dGVuZHMgRml4ZWRDaXJjdWl0RWxlbWVudE5vZGUge1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgcmVzaXN0b3I6IFJlc2lzdG9yO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgbGlmZWxpa2VSZXNpc3RvckltYWdlTm9kZTogTm9kZTtcclxuICBwcml2YXRlIHJlYWRvbmx5IGRpc3Bvc2VSZXNpc3Rvck5vZGU6ICgpID0+IHZvaWQ7XHJcblxyXG4gIC8vIElkZW50aWZpZXMgdGhlIGltYWdlcyB1c2VkIHRvIHJlbmRlciB0aGlzIG5vZGUgc28gdGhleSBjYW4gYmUgcHJlcG9wdWxhdGVkIGluIHRoZSBXZWJHTCBzcHJpdGUgc2hlZXQuXHJcbiAgcHVibGljIHN0YXRpYyBvdmVycmlkZSByZWFkb25seSB3ZWJnbFNwcml0ZU5vZGVzID0gW1xyXG4gICAgbmV3IEltYWdlKCByZXNpc3Rvcl9wbmcgKSxcclxuICAgIG5ldyBJbWFnZSggcGFwZXJDbGlwX3BuZyApLFxyXG4gICAgbmV3IEltYWdlKCBjb2luX3BuZyApLFxyXG4gICAgbmV3IEltYWdlKCBwZW5jaWxfcG5nICksXHJcbiAgICBuZXcgSW1hZ2UoIGVyYXNlcl9wbmcgKSxcclxuICAgIG5ldyBJbWFnZSggaGFuZF9wbmcgKSxcclxuICAgIG5ldyBJbWFnZSggcmVzaXN0b3JIaWdoX3BuZyApLFxyXG4gICAgbmV3IEltYWdlKCBkb2dfcG5nICksXHJcbiAgICBuZXcgSW1hZ2UoIGRvbGxhcl9wbmcgKVxyXG4gIF07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSBzY3JlZW5WaWV3IC0gbWFpbiBzY3JlZW4gdmlldywgbnVsbCBmb3IgaXNJY29uXHJcbiAgICogQHBhcmFtIGNpcmN1aXROb2RlLCBudWxsIGZvciBpc0ljb25cclxuICAgKiBAcGFyYW0gcmVzaXN0b3JcclxuICAgKiBAcGFyYW0gdmlld1R5cGVQcm9wZXJ0eVxyXG4gICAqIEBwYXJhbSB0YW5kZW1cclxuICAgKiBAcGFyYW0gW3Byb3ZpZGVkT3B0aW9uc11cclxuICAgKi9cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIHNjcmVlblZpZXc6IENDS0NTY3JlZW5WaWV3IHwgbnVsbCwgY2lyY3VpdE5vZGU6IENpcmN1aXROb2RlIHwgbnVsbCwgcmVzaXN0b3I6IFJlc2lzdG9yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgdmlld1R5cGVQcm9wZXJ0eTogUHJvcGVydHk8Q2lyY3VpdEVsZW1lbnRWaWV3VHlwZT4sIHRhbmRlbTogVGFuZGVtLCBwcm92aWRlZE9wdGlvbnM/OiBGaXhlZENpcmN1aXRFbGVtZW50Tm9kZU9wdGlvbnMgKSB7XHJcblxyXG4gICAgcHJvdmlkZWRPcHRpb25zID0gY29tYmluZU9wdGlvbnM8Rml4ZWRDaXJjdWl0RWxlbWVudE5vZGVPcHRpb25zPiggeyBpc0ljb246IGZhbHNlLCB1c2VIaXRUZXN0Rm9yU2Vuc29yczogdHJ1ZSB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICAvLyBBc3NpZ25lZCB0byBpbnN0YW5jZSB2YXJpYWJsZSBhZnRlciBzdXBlcigpXHJcbiAgICBjb25zdCBsaWZlbGlrZVJlc2lzdG9ySW1hZ2VOb2RlID0gbmV3IEltYWdlKCBSRVNJU1RPUl9JTUFHRV9NQVAuZ2V0KCByZXNpc3Rvci5yZXNpc3RvclR5cGUgKSEgKTtcclxuXHJcbiAgICBsZXQgdXBkYXRlQ29sb3JCYW5kczogKCAoIG46IG51bWJlciApID0+IHZvaWQgKSB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIGxldCBjb2xvckJhbmRzTm9kZTogbnVsbCB8IE5vZGUgPSBudWxsO1xyXG5cclxuICAgIC8vIEFkZCBjb2xvciBiYW5kcyBmb3IgdGhlIG5vcm1hbCByZXNpc3RvclxyXG4gICAgaWYgKCByZXNpc3Rvci5yZXNpc3RvclR5cGUgPT09IFJlc2lzdG9yVHlwZS5SRVNJU1RPUiApIHtcclxuXHJcbiAgICAgIC8vIENvbG9yIGJhbmRzIGZvciByZXNpc3RhbmNlID4gMFxyXG4gICAgICBjb25zdCBjb2xvckJhbmRzID0gXy5yYW5nZSggNCApLm1hcCggaW5kZXggPT4ge1xyXG5cclxuICAgICAgICBjb25zdCBhZGRpdGlvbmFsT2Zmc2V0ID0gaW5kZXggPT09IDMgPyAxMiA6IDA7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZWN0YW5nbGUoXHJcbiAgICAgICAgICBDT0xPUl9CQU5EX1BBRERJTkcgKyAoIENPTE9SX0JBTkRfV0lEVEggKyBDT0xPUl9CQU5EX1NQQUNJTkcgKSAqIGluZGV4ICsgYWRkaXRpb25hbE9mZnNldCwgQ09MT1JfQkFORF9ZLFxyXG4gICAgICAgICAgQ09MT1JfQkFORF9XSURUSCwgQ09MT1JfQkFORF9IRUlHSFRcclxuICAgICAgICApO1xyXG4gICAgICB9ICk7XHJcblxyXG4gICAgICAvLyBTaW5nbGUgY29sb3IgYmFuZCB3aGVuIHJlc2lzdGFuY2UgPSAwIHdoaWNoIGFwcGVhcnMgaW4gdGhlIG1pZGRsZVxyXG4gICAgICBjb25zdCBzaW5nbGVDb2xvckJhbmQgPSBuZXcgUmVjdGFuZ2xlKCAwLCAwLCBDT0xPUl9CQU5EX1dJRFRILCBDT0xPUl9CQU5EX0hFSUdIVCwge1xyXG4gICAgICAgIGNlbnRlclg6IENPTE9SX0JBTkRfUEFERElORyArIEFWQUlMQUJMRV9DT0xPUl9CQU5EX1NQQUNFIC8gMixcclxuICAgICAgICB5OiBDT0xPUl9CQU5EX1lcclxuICAgICAgfSApO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFdoZW4gdGhlIHJlc2lzdGFuY2UgY2hhbmdlcywgdXBkYXRlIHRoZSBjb2xvcnMgb2YgdGhlIGNvbG9yIGJhbmRzLlxyXG4gICAgICAgKi9cclxuICAgICAgdXBkYXRlQ29sb3JCYW5kcyA9ICggcmVzaXN0YW5jZTogbnVtYmVyICkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNvbG9ycyA9IFJlc2lzdG9yQ29sb3JzLmdldENvbG9yQXJyYXkoIHJlc2lzdGFuY2UgKTtcclxuXHJcbiAgICAgICAgaWYgKCBjb2xvcnMubGVuZ3RoID09PSAxICkge1xyXG4gICAgICAgICAgc2luZ2xlQ29sb3JCYW5kLmZpbGwgPSBjb2xvcnNbIDAgXTtcclxuICAgICAgICAgIGFzc2VydCAmJiBhc3NlcnQoIGNvbG9yc1sgMCBdICE9PSBudWxsICYmIGNvbG9yc1sgMCBdLmVxdWFscyggQ29sb3IuQkxBQ0sgKSwgJ3NpbmdsZSBiYW5kIHNob3VsZCBiZSBibGFjaycgKTtcclxuICAgICAgICAgIGNvbG9yQmFuZHMuZm9yRWFjaCggY29sb3JCYW5kID0+IHsgY29sb3JCYW5kLmZpbGwgPSBudWxsOyB9ICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG5cclxuICAgICAgICAgIC8vIFNob3cgYWxsIDQgY29sb3JzIGJhbmRzIGFuZCBoaWRlIHRoZSAwLXJlc2lzdGFuY2UgYmFuZFxyXG4gICAgICAgICAgc2luZ2xlQ29sb3JCYW5kLmZpbGwgPSBudWxsO1xyXG4gICAgICAgICAgZm9yICggbGV0IGkgPSAwOyBpIDwgY29sb3JCYW5kcy5sZW5ndGg7IGkrKyApIHtcclxuICAgICAgICAgICAgY29sb3JCYW5kc1sgaSBdLmZpbGwgPSBjb2xvcnNbIGkgXTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIHJlc2lzdG9yLnJlc2lzdGFuY2VQcm9wZXJ0eS5saW5rKCB1cGRhdGVDb2xvckJhbmRzICk7XHJcblxyXG4gICAgICAvLyBBZGQgdGhlIGNvbG9yIGJhbmRzIHRvIHRoZSByZXNpc3RvciBpbWFnZVxyXG4gICAgICBjb2xvckJhbmRzTm9kZSA9IG5ldyBOb2RlKCB7XHJcbiAgICAgICAgY2hpbGRyZW46IFsgLi4uY29sb3JCYW5kcywgc2luZ2xlQ29sb3JCYW5kIF1cclxuICAgICAgfSApO1xyXG4gICAgICByZXNpc3Rvci5pc0NvbG9yQ29kZVZpc2libGVQcm9wZXJ0eS5saW5rKCBpc0NvbG9yQ29kZVZpc2libGUgPT4ge1xyXG4gICAgICAgIGNvbG9yQmFuZHNOb2RlIS52aXNpYmxlID0gaXNDb2xvckNvZGVWaXNpYmxlO1xyXG4gICAgICB9ICk7XHJcbiAgICAgIGxpZmVsaWtlUmVzaXN0b3JJbWFnZU5vZGUuYWRkQ2hpbGQoIGNvbG9yQmFuZHNOb2RlICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWNvbnMgc2hvdWxkIGFwcGVhciB0aGUgc2FtZSBpbiB0aGUgdG9vbGJveCwgc2VlXHJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvY2lyY3VpdC1jb25zdHJ1Y3Rpb24ta2l0LWNvbW1vbi9pc3N1ZXMvMzg5XHJcbiAgICBjb25zdCB3aWR0aCA9IHByb3ZpZGVkT3B0aW9ucy5pc0ljb24gPyBDQ0tDQ29uc3RhbnRzLlJFU0lTVE9SX0xFTkdUSCA6IHJlc2lzdG9yLmRpc3RhbmNlQmV0d2VlblZlcnRpY2VzO1xyXG4gICAgbGlmZWxpa2VSZXNpc3RvckltYWdlTm9kZS5tdXRhdGUoIHtcclxuICAgICAgc2NhbGU6IHdpZHRoIC8gbGlmZWxpa2VSZXNpc3RvckltYWdlTm9kZS53aWR0aFxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIENsYXNzaWNhbCB6aWctemFnIHNoYXBlXHJcbiAgICBsZXQgaWVlZVNjaGVtYXRpY1NoYXBlID0gbmV3IFNoYXBlKClcclxuICAgICAgLm1vdmVUbyggMCwgbGlmZWxpa2VSZXNpc3RvckltYWdlTm9kZS5oZWlnaHQgKiBTQ0hFTUFUSUNfU0NBTEUgKVxyXG4gICAgICAubGluZVRvUmVsYXRpdmUoIFNDSEVNQVRJQ19TVEVNX1dJRFRILCAwIClcclxuICAgICAgLmxpbmVUb1JlbGF0aXZlKCBTQ0hFTUFUSUNfUEVSSU9EIC8gMiwgLVNDSEVNQVRJQ19XQVZFTEVOR1RIIC8gMiApXHJcbiAgICAgIC5saW5lVG9SZWxhdGl2ZSggU0NIRU1BVElDX1BFUklPRCwgU0NIRU1BVElDX1dBVkVMRU5HVEggKVxyXG4gICAgICAubGluZVRvUmVsYXRpdmUoIFNDSEVNQVRJQ19QRVJJT0QsIC1TQ0hFTUFUSUNfV0FWRUxFTkdUSCApXHJcbiAgICAgIC5saW5lVG9SZWxhdGl2ZSggU0NIRU1BVElDX1BFUklPRCwgU0NIRU1BVElDX1dBVkVMRU5HVEggKVxyXG4gICAgICAubGluZVRvUmVsYXRpdmUoIFNDSEVNQVRJQ19QRVJJT0QsIC1TQ0hFTUFUSUNfV0FWRUxFTkdUSCApXHJcbiAgICAgIC5saW5lVG9SZWxhdGl2ZSggU0NIRU1BVElDX1BFUklPRCwgU0NIRU1BVElDX1dBVkVMRU5HVEggKVxyXG4gICAgICAubGluZVRvUmVsYXRpdmUoIFNDSEVNQVRJQ19QRVJJT0QgLyAyLCAtU0NIRU1BVElDX1dBVkVMRU5HVEggLyAyIClcclxuICAgICAgLmxpbmVUb1JlbGF0aXZlKCBTQ0hFTUFUSUNfU1RFTV9XSURUSCwgMCApO1xyXG5cclxuICAgIGxldCBzY2FsZSA9IGxpZmVsaWtlUmVzaXN0b3JJbWFnZU5vZGUud2lkdGggLyBpZWVlU2NoZW1hdGljU2hhcGUuYm91bmRzLndpZHRoO1xyXG4gICAgaWVlZVNjaGVtYXRpY1NoYXBlID0gaWVlZVNjaGVtYXRpY1NoYXBlLnRyYW5zZm9ybWVkKCBNYXRyaXgzLnNjYWxlKCBzY2FsZSwgc2NhbGUgKSApO1xyXG4gICAgY29uc3Qgb2Zmc2V0WCA9IGllZWVTY2hlbWF0aWNTaGFwZS5ib3VuZHMubWluWDtcclxuICAgIGNvbnN0IG9mZnNldFkgPSBpZWVlU2NoZW1hdGljU2hhcGUuYm91bmRzLm1pblk7XHJcbiAgICBpZWVlU2NoZW1hdGljU2hhcGUgPSBpZWVlU2NoZW1hdGljU2hhcGUudHJhbnNmb3JtZWQoIE1hdHJpeDMudHJhbnNsYXRpb24oIC1vZmZzZXRYLCAtb2Zmc2V0WSApICk7XHJcblxyXG4gICAgLy8gSUVDIFJlc2lzdG9yOiBpdCBpcyBhIGJveCB3aXRoIGEgbGVmdCBob3Jpem9udGFsIGxlYWQgYW5kIGEgcmlnaHQgaG9yaXpvbnRhbCBsZWFkXHJcbiAgICBjb25zdCBib3hIZWlnaHQgPSAzMDtcclxuICAgIGNvbnN0IGJveExlbmd0aCA9IDcwO1xyXG4gICAgbGV0IGllY1NjaGVtYXRpY1NoYXBlID0gbmV3IFNoYXBlKClcclxuICAgICAgLm1vdmVUbyggMCwgYm94SGVpZ2h0IC8gMiApXHJcblxyXG4gICAgICAvLyBsZWZ0IGhvcml6b250YWwgbGVhZFxyXG4gICAgICAubGluZVRvUmVsYXRpdmUoIFNDSEVNQVRJQ19TVEVNX1dJRFRILCAwIClcclxuXHJcbiAgICAgIC8vIHVwcGVyIGhhbGYgb2YgdGhlIGJveFxyXG4gICAgICAubGluZVRvUmVsYXRpdmUoIDAsIC1ib3hIZWlnaHQgLyAyIClcclxuICAgICAgLmxpbmVUb1JlbGF0aXZlKCBib3hMZW5ndGgsIDAgKVxyXG4gICAgICAubGluZVRvUmVsYXRpdmUoIDAsIGJveEhlaWdodCAvIDIgKVxyXG5cclxuICAgICAgLy8gcmlnaHQgaG9yaXpvbnRhbCBsZWFkXHJcbiAgICAgIC5saW5lVG9SZWxhdGl2ZSggU0NIRU1BVElDX1NURU1fV0lEVEgsIDAgKVxyXG5cclxuICAgICAgLy8gZ28gYmFjayBhbG9uZyB0aGUgcmlnaHQgaG9yaXpvbnRhbCBsZWFkXHJcbiAgICAgIC5saW5lVG9SZWxhdGl2ZSggLVNDSEVNQVRJQ19TVEVNX1dJRFRILCAwIClcclxuXHJcbiAgICAgIC8vIGxvd2VyIGhhbGYgb2YgdGhlIGJveFxyXG4gICAgICAubGluZVRvUmVsYXRpdmUoIDAsIGJveEhlaWdodCAvIDIgKVxyXG4gICAgICAubGluZVRvUmVsYXRpdmUoIC1ib3hMZW5ndGgsIDAgKVxyXG4gICAgICAubGluZVRvUmVsYXRpdmUoIDAsIC1ib3hIZWlnaHQgLyAyICk7XHJcblxyXG4gICAgc2NhbGUgPSBsaWZlbGlrZVJlc2lzdG9ySW1hZ2VOb2RlLndpZHRoIC8gaWVjU2NoZW1hdGljU2hhcGUuYm91bmRzLndpZHRoO1xyXG4gICAgaWVjU2NoZW1hdGljU2hhcGUgPSBpZWNTY2hlbWF0aWNTaGFwZS50cmFuc2Zvcm1lZCggTWF0cml4My5zY2FsZSggc2NhbGUsIHNjYWxlICkgKTtcclxuXHJcbiAgICBjb25zdCBzY2hlbWF0aWNOb2RlID0gbmV3IFBhdGgoIGllZWVTY2hlbWF0aWNTaGFwZSwge1xyXG4gICAgICBzdHJva2U6IENvbG9yLkJMQUNLLFxyXG4gICAgICBsaW5lV2lkdGg6IENDS0NDb25zdGFudHMuU0NIRU1BVElDX0xJTkVfV0lEVEhcclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCB1cGRhdGVTY2hlbWF0aWNUeXBlID0gKCBzY2hlbWF0aWNUeXBlOiBTY2hlbWF0aWNUeXBlICkgPT4ge1xyXG4gICAgICBzY2hlbWF0aWNOb2RlLnNoYXBlID0gc2NoZW1hdGljVHlwZSA9PT0gU2NoZW1hdGljVHlwZS5JRUVFID8gaWVlZVNjaGVtYXRpY1NoYXBlIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGllY1NjaGVtYXRpY1NoYXBlO1xyXG4gICAgfTtcclxuICAgIHNjaGVtYXRpY1R5cGVQcm9wZXJ0eS5saW5rKCB1cGRhdGVTY2hlbWF0aWNUeXBlICk7XHJcblxyXG4gICAgc2NoZW1hdGljTm9kZS5tb3VzZUFyZWEgPSBzY2hlbWF0aWNOb2RlLmxvY2FsQm91bmRzO1xyXG4gICAgc2NoZW1hdGljTm9kZS50b3VjaEFyZWEgPSBzY2hlbWF0aWNOb2RlLmxvY2FsQm91bmRzO1xyXG5cclxuICAgIC8vIENlbnRlciB2ZXJ0aWNhbGx5IHRvIG1hdGNoIHRoZSBGaXhlZENpcmN1aXRFbGVtZW50Tm9kZSBhc3N1bXB0aW9uIHRoYXQgb3JpZ2luIGlzIGNlbnRlciBsZWZ0XHJcbiAgICBzY2hlbWF0aWNOb2RlLmNlbnRlclkgPSAwO1xyXG4gICAgbGlmZWxpa2VSZXNpc3RvckltYWdlTm9kZS5jZW50ZXJZID0gMDtcclxuXHJcbiAgICBsaWZlbGlrZVJlc2lzdG9ySW1hZ2VOb2RlLnRyYW5zbGF0ZSggMCwgcmVzaXN0b3IucmVzaXN0b3JUeXBlLnZlcnRpY2FsT2Zmc2V0ICk7XHJcblxyXG4gICAgLy8gU3VwZXIgY2FsbFxyXG4gICAgc3VwZXIoXHJcbiAgICAgIHNjcmVlblZpZXcsXHJcbiAgICAgIGNpcmN1aXROb2RlLFxyXG4gICAgICByZXNpc3RvcixcclxuICAgICAgdmlld1R5cGVQcm9wZXJ0eSxcclxuICAgICAgbGlmZWxpa2VSZXNpc3RvckltYWdlTm9kZSxcclxuICAgICAgc2NoZW1hdGljTm9kZSxcclxuICAgICAgdGFuZGVtLFxyXG4gICAgICBwcm92aWRlZE9wdGlvbnNcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5yZXNpc3RvciA9IHJlc2lzdG9yO1xyXG5cclxuICAgIHRoaXMubGlmZWxpa2VSZXNpc3RvckltYWdlTm9kZSA9IGxpZmVsaWtlUmVzaXN0b3JJbWFnZU5vZGU7XHJcblxyXG4gICAgdGhpcy5kaXNwb3NlUmVzaXN0b3JOb2RlID0gKCkgPT4ge1xyXG4gICAgICB1cGRhdGVDb2xvckJhbmRzICYmIHJlc2lzdG9yLnJlc2lzdGFuY2VQcm9wZXJ0eS51bmxpbmsoIHVwZGF0ZUNvbG9yQmFuZHMgKTtcclxuICAgICAgbGlmZWxpa2VSZXNpc3RvckltYWdlTm9kZS5kaXNwb3NlKCk7XHJcbiAgICAgIHNjaGVtYXRpY1R5cGVQcm9wZXJ0eS51bmxpbmsoIHVwZGF0ZVNjaGVtYXRpY1R5cGUgKTtcclxuICAgICAgY29sb3JCYW5kc05vZGUgJiYgY29sb3JCYW5kc05vZGUuZGlzcG9zZSgpO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvdmVycmlkZSBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgdGhpcy5kaXNwb3NlUmVzaXN0b3JOb2RlKCk7XHJcbiAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgfVxyXG59XHJcblxyXG5jaXJjdWl0Q29uc3RydWN0aW9uS2l0Q29tbW9uLnJlZ2lzdGVyKCAnUmVzaXN0b3JOb2RlJywgUmVzaXN0b3JOb2RlICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBLE9BQU9BLE9BQU8sTUFBTSw0QkFBNEI7QUFDaEQsU0FBU0MsS0FBSyxRQUFRLDZCQUE2QjtBQUNuRCxTQUFTQyxLQUFLLEVBQUVDLEtBQUssRUFBRUMsSUFBSSxFQUFFQyxJQUFJLEVBQUVDLFNBQVMsUUFBUSxnQ0FBZ0M7QUFFcEYsT0FBT0MsUUFBUSxNQUFNLDBCQUEwQjtBQUMvQyxPQUFPQyxPQUFPLE1BQU0seUJBQXlCO0FBQzdDLE9B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