// Copyright 2017-2023, University of Colorado Boulder

/**
 * Creates CircuitElementToolNodes that can be used to create CircuitElements from the toolbox.  Exists for the life of
 * the sim and hence does not require disposal.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */

import BooleanProperty from '../../../axon/js/BooleanProperty.js';
import NumberProperty from '../../../axon/js/NumberProperty.js';
import { AlignGroup, Color, Image, Line, Node } from '../../../scenery/js/imports.js';
import Vector2 from '../../../dot/js/Vector2.js';
import ToggleNode from '../../../sun/js/ToggleNode.js';
import Tandem from '../../../tandem/js/Tandem.js';
import wireIcon_png from '../../images/wireIcon_png.js';
import CCKCConstants from '../CCKCConstants.js';
import CircuitConstructionKitCommonStrings from '../CircuitConstructionKitCommonStrings.js';
import circuitConstructionKitCommon from '../circuitConstructionKitCommon.js';
import ACVoltage from '../model/ACVoltage.js';
import Battery from '../model/Battery.js';
import Capacitor from '../model/Capacitor.js';
import Fuse from '../model/Fuse.js';
import Inductor from '../model/Inductor.js';
import LightBulb from '../model/LightBulb.js';
import Resistor from '../model/Resistor.js';
import Switch from '../model/Switch.js';
import Vertex from '../model/Vertex.js';
import Wire from '../model/Wire.js';
import ACVoltageNode from './ACVoltageNode.js';
import BatteryNode from './BatteryNode.js';
import CapacitorCircuitElementNode from './CapacitorCircuitElementNode.js';
import CCKCLightBulbNode from './CCKCLightBulbNode.js';
import CircuitElementToolNode from './CircuitElementToolNode.js';
import FuseNode from './FuseNode.js';
import InductorNode from './InductorNode.js';
import ResistorNode from './ResistorNode.js';
import SwitchNode from './SwitchNode.js';
import CircuitElementViewType from '../model/CircuitElementViewType.js';
import CCKCQueryParameters from '../CCKCQueryParameters.js';
import ResistorType from '../model/ResistorType.js';
import EnumerationProperty from '../../../axon/js/EnumerationProperty.js';
import optionize from '../../../phet-core/js/optionize.js';
const acSourceStringProperty = CircuitConstructionKitCommonStrings.acSourceStringProperty;
const capacitorStringProperty = CircuitConstructionKitCommonStrings.capacitorStringProperty;
const inductorStringProperty = CircuitConstructionKitCommonStrings.inductorStringProperty;
const batteryStringProperty = CircuitConstructionKitCommonStrings.batteryStringProperty;
const coinStringProperty = CircuitConstructionKitCommonStrings.coinStringProperty;
const dogStringProperty = CircuitConstructionKitCommonStrings.dogStringProperty;
const dollarBillStringProperty = CircuitConstructionKitCommonStrings.dollarBillStringProperty;
const eraserStringProperty = CircuitConstructionKitCommonStrings.eraserStringProperty;
const fuseStringProperty = CircuitConstructionKitCommonStrings.fuseStringProperty;
const handStringProperty = CircuitConstructionKitCommonStrings.handStringProperty;
const lightBulbStringProperty = CircuitConstructionKitCommonStrings.lightBulbStringProperty;
const paperClipStringProperty = CircuitConstructionKitCommonStrings.paperClipStringProperty;
const pencilStringProperty = CircuitConstructionKitCommonStrings.pencilStringProperty;
const resistorStringProperty = CircuitConstructionKitCommonStrings.resistorStringProperty;
const switchStringProperty = CircuitConstructionKitCommonStrings.switchStringProperty;
const wireStringProperty = CircuitConstructionKitCommonStrings.wireStringProperty;

// constants
const BATTERY_LENGTH = CCKCConstants.BATTERY_LENGTH;
const AC_VOLTAGE_LENGTH = CCKCConstants.AC_VOLTAGE_LENGTH;
const FUSE_LENGTH = CCKCConstants.FUSE_LENGTH;
const WIRE_LENGTH = CCKCConstants.WIRE_LENGTH;
const SWITCH_LENGTH = CCKCConstants.SWITCH_LENGTH;

// Separate icons are made for schematic/lifelike so they can be aligned
const iconAlignGroup = new AlignGroup();
const LIFELIKE_PROPERTY = new EnumerationProperty(CircuitElementViewType.LIFELIKE);
const SCHEMATIC_PROPERTY = new EnumerationProperty(CircuitElementViewType.SCHEMATIC);
export default class CircuitElementToolFactory {
  /**
   * @param circuit
   * @param showLabelsProperty
   * @param viewTypeProperty
   * @param globalToCircuitNodePoint Vector2=>Vector2 global point to coordinate frame of circuitNode
   * @param parentTandem - parent tandem for the created tool nodes
   */
  constructor(circuit, showLabelsProperty, viewTypeProperty, globalToCircuitNodePoint, parentTandem) {
    this.circuit = circuit;
    this.showLabelsProperty = showLabelsProperty;
    this.viewTypeProperty = viewTypeProperty;
    this.globalToCircuitNodePoint = globalToCircuitNodePoint;
    this.parentTandem = parentTandem;
    this.wireToolNode = null;
  }

  /**
   * Utility function that creates a CircuitElementToolNode
   * @param labelStringProperty
   * @param count
   * @param createIcon
   * @param predicate - CircuitElement => boolean, used to count circuit elements of that kind.
   *                             - NOTE: All of the predicates are intended to cover all circuit elements and be
   *                             - mutually exclusive (so there is no double counting).  However, this is not enforced.
   * @param createElement - (Vector2) => CircuitElement Function that creates a CircuitElement at the given position
   *                                 - for most components it is the center of the component.  For Light Bulbs, it is
   *                                 - in the center of the socket
   * @param [providedOptions]
   */
  createCircuitElementToolNode(labelStringProperty, count, createIcon, predicate, createElement, providedOptions) {
    assert && assert(Number.isInteger(count), 'count should be an integer');
    const options = optionize()({
      additionalProperty: new BooleanProperty(true),
      lifelikeIconHeight: CCKCConstants.TOOLBOX_ICON_HEIGHT,
      schematicIconHeight: CCKCConstants.TOOLBOX_ICON_HEIGHT
    }, providedOptions);
    const wrap = (node, height) => {
      const node1 = new Node({
        children: [node]
      });
      node1.mutate({
        scale: height / node1.height
      });
      return node1;
    };
    const toggleNode = new ToggleNode(this.viewTypeProperty, [{
      value: CircuitElementViewType.LIFELIKE,
      createNode: () => wrap(createIcon(Tandem.OPT_OUT, LIFELIKE_PROPERTY), options.lifelikeIconHeight)
    }, {
      value: CircuitElementViewType.SCHEMATIC,
      createNode: () => wrap(createIcon(Tandem.OPT_OUT, SCHEMATIC_PROPERTY), options.schematicIconHeight)
    }]);
    return new CircuitElementToolNode(labelStringProperty, this.showLabelsProperty, this.viewTypeProperty, this.circuit, this.globalToCircuitNodePoint, iconAlignGroup.createBox(toggleNode, {
      yAlign: 'bottom'
    }), count, this.createCounter(predicate), createElement, {
      tandem: options.tandem,
      additionalProperty: options.additionalProperty
    });
  }

  /**
   * Returns a function which counts the number of circuit elements (not counting those in the true black box).
   * @param predicate - CircuitElement => boolean
   * @returns - a no-arg function that returns the {number} of CircuitElements of the specified type
   */
  createCounter(predicate) {
    return () => this.circuit.circuitElements.filter(circuitElement =>
    // Count according to the predicate, but don't count elements inside the true black box
    predicate(circuitElement) && !circuitElement.insideTrueBlackBoxProperty.get()).length;
  }
  createWireToolNode(tandem) {
    return this.createCircuitElementToolNode(wireStringProperty, CCKCConstants.NUMBER_OF_WIRES, (tandem, viewTypeProperty) => {
      return viewTypeProperty.value === CircuitElementViewType.LIFELIKE ? new Image(wireIcon_png, {
        tandem: tandem
      }) : new Line(0, 0, 120, 0, {
        stroke: Color.BLACK,
        lineWidth: 4.5,
        // match with other toolbox icons
        tandem: tandem
      });
    }, circuitElement => circuitElement instanceof Wire, position => this.circuit.wireGroup.createNextElement(...this.circuit.createVertexPairArray(position, WIRE_LENGTH)), {
      tandem: tandem,
      lifelikeIconHeight: 9,
      schematicIconHeight: 2
    });
  }

  /**
   * @param count - the number that can be dragged out at once
   */
  createRightBatteryToolNode(tandem, count = 10) {
    const batteryModel = new Battery(new Vertex(Vector2.ZERO, this.circuit.selectionProperty), new Vertex(new Vector2(CCKCConstants.BATTERY_LENGTH, 0), this.circuit.selectionProperty), new NumberProperty(0), 'normal', Tandem.OPTIONAL);
    return this.createCircuitElementToolNode(batteryStringProperty, count, (tandem, viewTypeProperty) => new BatteryNode(null, null, batteryModel, viewTypeProperty, tandem.createTandem('batteryIcon'), {
      isIcon: true
    }), circuitElement => circuitElement instanceof Battery && circuitElement.initialOrientation === 'right' && circuitElement.batteryType === 'normal', position => this.circuit.batteryGroup.createNextElement(...this.circuit.createVertexPairArray(position, BATTERY_LENGTH)), {
      tandem: tandem,
      lifelikeIconHeight: 15
    });
  }

  /**
   * @param count - the number that can be dragged out at once
   */
  createACVoltageToolNode(tandem, count = 10) {
    const acSource = new ACVoltage(new Vertex(Vector2.ZERO, this.circuit.selectionProperty), new Vertex(new Vector2(AC_VOLTAGE_LENGTH, 0), this.circuit.selectionProperty), new NumberProperty(0), Tandem.OPTIONAL);
    return this.createCircuitElementToolNode(acSourceStringProperty, count, (tandem, viewTypeProperty) => new ACVoltageNode(null, null, acSource, viewTypeProperty, tandem.createTandem('acSourceIcon'), {
      isIcon: true,
      scale: 0.68
    }), circuitElement => circuitElement instanceof ACVoltage, position => this.circuit.acVoltageGroup.createNextElement(...this.circuit.createVertexPairArray(position, AC_VOLTAGE_LENGTH)), {
      tandem: tandem,
      lifelikeIconHeight: 27,
      schematicIconHeight: 27
    });
  }
  createLightBulbToolNode(tandem, lightBulbGroup = this.circuit.lightBulbGroup, string = lightBulbStringProperty, real = false, addRealBulbsProperty = null) {
    const vertexPair = LightBulb.createVertexPair(Vector2.ZERO, this.circuit, true);
    const lightBulbModel = LightBulb.createAtPosition(vertexPair.startVertex, vertexPair.endVertex, this.circuit, CCKCConstants.DEFAULT_RESISTANCE, this.viewTypeProperty, Tandem.OPTIONAL, {
      isExtreme: false,
      isReal: real
    });
    return this.createCircuitElementToolNode(string, 10, (tandem, viewTypeProperty) => new CCKCLightBulbNode(null, null, lightBulbModel, new BooleanProperty(true), viewTypeProperty, Tandem.OPT_OUT, {
      isIcon: true,
      scale: 0.85
    }), circuitElement => circuitElement instanceof LightBulb && !circuitElement.isExtreme, position => {
      const vertexPair = LightBulb.createVertexPair(position, this.circuit);
      return lightBulbGroup.createNextElement(vertexPair.startVertex, vertexPair.endVertex);
    }, {
      tandem: tandem,
      additionalProperty: addRealBulbsProperty || new BooleanProperty(true),
      schematicIconHeight: 27
    });
  }
  createResistorToolNode(tandem, group = this.circuit.resistorGroup, providedOptions) {
    const options = optionize()({
      count: 10,
      resistorType: ResistorType.RESISTOR,
      lifelikeIconHeight: 15,
      schematicIconHeight: 14,
      labelStringProperty: resistorStringProperty,
      tandemName: 'resistorToolNode'
    }, providedOptions);
    const labelStringProperty = options.labelStringProperty;
    const resistorType = options.resistorType;

    // Create the icon model without using the PhetioGroup, so it will not be PhET-iO instrumented.
    const resistorModel = new Resistor(new Vertex(Vector2.ZERO, this.circuit.selectionProperty), new Vertex(new Vector2(resistorType.length, 0), this.circuit.selectionProperty), resistorType, Tandem.OPTIONAL);
    return this.createCircuitElementToolNode(labelStringProperty, options.count, (tandem, viewTypeProperty) => new ResistorNode(null, null, resistorModel, viewTypeProperty, tandem.createTandem('resistorIcon'), {
      isIcon: true
    }), circuitElement => circuitElement instanceof Resistor && circuitElement.resistorType === resistorType, position => {
      const vertices = this.circuit.createVertexPairArray(position, resistorType.length);
      return group.createNextElement(vertices[0], vertices[1], resistorType); // last arg ignored by some groups
    }, {
      tandem: tandem,
      lifelikeIconHeight: options.lifelikeIconHeight,
      schematicIconHeight: options.schematicIconHeight
    });
  }
  createFuseToolNode(tandem) {
    const fuseModel = new Fuse(new Vertex(Vector2.ZERO, this.circuit.selectionProperty), new Vertex(new Vector2(CCKCConstants.RESISTOR_LENGTH, 0), this.circuit.selectionProperty), Tandem.OPTIONAL);
    return this.createCircuitElementToolNode(fuseStringProperty, 10, (tandem, viewTypeProperty) => new FuseNode(null, null, fuseModel, viewTypeProperty, tandem.createTandem('fuseIcon'), {
      isIcon: true
    }), circuitElement => circuitElement instanceof Fuse, position => this.circuit.fuseGroup.createNextElement(...this.circuit.createVertexPairArray(position, FUSE_LENGTH)), {
      tandem: tandem,
      lifelikeIconHeight: 15,
      schematicIconHeight: 14
    });
  }

  /**
   * @param count - the number that can be dragged out at once
   */
  createCapacitorToolNode(tandem, count = 10) {
    const capacitor = new Capacitor(new Vertex(Vector2.ZERO, this.circuit.selectionProperty), new Vertex(new Vector2(CCKCConstants.CAPACITOR_LENGTH, 0), this.circuit.selectionProperty), Tandem.OPTIONAL);
    return this.createCircuitElementToolNode(capacitorStringProperty, count, (tandem, viewTypeProperty) => new CapacitorCircuitElementNode(null, null, capacitor, viewTypeProperty, tandem.createTandem('capacitorIcon'), {
      isIcon: true
    }), circuitElement => circuitElement instanceof Capacitor, position => this.circuit.capacitorGroup.createNextElement(...this.circuit.createVertexPairArray(position, CCKCConstants.CAPACITOR_LENGTH)), {
      tandem: tandem
    });
  }
  createInductorToolNode(tandem) {
    const inductorModel = new Inductor(new Vertex(Vector2.ZERO, this.circuit.selectionProperty), new Vertex(new Vector2(CCKCConstants.INDUCTOR_LENGTH, 0), this.circuit.selectionProperty), Tandem.OPTIONAL);
    const count = CCKCQueryParameters.moreInductors ? 10 : 1;
    return this.createCircuitElementToolNode(inductorStringProperty, count, (tandem, viewTypeProperty) => new InductorNode(null, null, inductorModel, viewTypeProperty, tandem.createTandem('inductorIcon'), {
      isIcon: true,
      scale: 0.75
    }), circuitElement => circuitElement instanceof Inductor, position => this.circuit.inductorGroup.createNextElement(...this.circuit.createVertexPairArray(position, CCKCConstants.INDUCTOR_LENGTH)), {
      tandem: tandem,
      lifelikeIconHeight: 22,
      schematicIconHeight: 6
    });
  }
  createSwitchToolNode(tandem) {
    return this.createCircuitElementToolNode(switchStringProperty, 5, (tandem, viewTypeProperty) => new SwitchNode(null, null, new Switch(new Vertex(Vector2.ZERO, this.circuit.selectionProperty), new Vertex(new Vector2(SWITCH_LENGTH, 0), this.circuit.selectionProperty), Tandem.OPTIONAL, null), viewTypeProperty, tandem.createTandem('switchIcon'), {
      isIcon: true
    }), circuitElement => circuitElement instanceof Switch, position => this.circuit.switchGroup.createNextElement(...this.circuit.createVertexPairArray(position, SWITCH_LENGTH)), {
      tandem: tandem,
      lifelikeIconHeight: 22,
      schematicIconHeight: 16
    });
  }
  createPaperClipToolNode(tandem) {
    return this.createResistorToolNode(tandem, this.circuit.householdObjectGroup, {
      count: 1,
      resistorType: ResistorType.PAPER_CLIP,
      tandemName: 'paperClipToolNode',
      labelStringProperty: paperClipStringProperty
    });
  }

  // Same docs as for createPaperClipToolNode
  createCoinToolNode(tandem) {
    return this.createResistorToolNode(tandem, this.circuit.householdObjectGroup, {
      count: 1,
      resistorType: ResistorType.COIN,
      tandemName: 'coinToolNode',
      labelStringProperty: coinStringProperty,
      lifelikeIconHeight: 30
    });
  }

  // Same docs as as for createPaperClipToolNode
  createDollarBillToolNode(tandem) {
    return this.createResistorToolNode(tandem, this.circuit.householdObjectGroup, {
      count: 1,
      resistorType: ResistorType.DOLLAR_BILL,
      tandemName: 'dollarBillToolNode',
      labelStringProperty: dollarBillStringProperty,
      lifelikeIconHeight: 22
    });
  }

  // Same docs as for createPaperClipToolNode
  createEraserToolNode(tandem) {
    return this.createResistorToolNode(tandem, this.circuit.householdObjectGroup, {
      count: 1,
      resistorType: ResistorType.ERASER,
      tandemName: 'eraserToolNode',
      labelStringProperty: eraserStringProperty,
      lifelikeIconHeight: 17
    });
  }

  // Same docs as for createPaperClipToolNode
  createPencilToolNode(tandem) {
    return this.createResistorToolNode(tandem, this.circuit.householdObjectGroup, {
      count: 1,
      resistorType: ResistorType.PENCIL,
      tandemName: 'pencilToolNode',
      labelStringProperty: pencilStringProperty,
      lifelikeIconHeight: 12
    });
  }

  // Same docs as for createPaperClipToolNode
  createHandToolNode(tandem) {
    return this.createResistorToolNode(tandem, this.circuit.householdObjectGroup, {
      count: 1,
      resistorType: ResistorType.HAND,
      tandemName: 'handToolNode',
      labelStringProperty: handStringProperty,
      lifelikeIconHeight: 30
    });
  }

  // Same docs as for createPaperClipToolNode
  createDogToolNode(tandem) {
    return this.createResistorToolNode(tandem, this.circuit.householdObjectGroup, {
      count: 1,
      resistorType: ResistorType.DOG,
      tandemName: 'dogToolNode',
      labelStringProperty: dogStringProperty,
      lifelikeIconHeight: 30
    });
  }

  // Same docs as for createPaperClipToolNode
  createExtremeResistorToolNode(tandem) {
    return this.createResistorToolNode(tandem, this.circuit.extremeResistorGroup, {
      count: 4,
      resistorType: ResistorType.EXTREME_RESISTOR,
      tandemName: 'extremeResistorToolNode',
      labelStringProperty: resistorStringProperty
    });
  }
  createExtremeBatteryToolNode(tandem) {
    return this.createCircuitElementToolNode(batteryStringProperty, 4, (tandem, viewTypeProperty) => new BatteryNode(null, null, new Battery(new Vertex(Vector2.ZERO, this.circuit.selectionProperty), new Vertex(new Vector2(CCKCConstants.BATTERY_LENGTH, 0), this.circuit.selectionProperty), new NumberProperty(0), 'high-voltage', Tandem.OPTIONAL, {
      voltage: 1000,
      numberOfDecimalPlaces: Battery.HIGH_VOLTAGE_DECIMAL_PLACES
    }), viewTypeProperty, tandem.createTandem('extremeBatteryToolNode'), {
      isIcon: true
    }), circuitElement => circuitElement instanceof Battery && circuitElement.initialOrientation === 'right' && circuitElement.batteryType === 'high-voltage', position => {
      return this.circuit.extremeBatteryGroup.createNextElement(...this.circuit.createVertexPairArray(position, SWITCH_LENGTH));
    }, {
      tandem: tandem,
      lifelikeIconHeight: 15
    });
  }
  createExtremeBulbToolNode(tandem) {
    const vertexPair = LightBulb.createVertexPair(Vector2.ZERO, this.circuit, true);
    return this.createCircuitElementToolNode(lightBulbStringProperty, 4, (tandem, viewTypeProperty) => new CCKCLightBulbNode(null, null, LightBulb.createAtPosition(vertexPair.startVertex, vertexPair.endVertex, this.circuit, 1000, this.viewTypeProperty, Tandem.OPTIONAL, {
      isExtreme: true
    }), new BooleanProperty(true), viewTypeProperty, tandem.createTandem('extremeLightBulbToolNode'), {
      isIcon: true
    }), circuitElement => circuitElement instanceof LightBulb && circuitElement.isExtreme, position => {
      const vertexPair = LightBulb.createVertexPair(position, this.circuit, false);
      return this.circuit.extremeLightBulbGroup.createNextElement(vertexPair.startVertex, vertexPair.endVertex);
    }, {
      tandem: tandem
    });
  }
}
circuitConstructionKitCommon.register('CircuitElementToolFactory', CircuitElementToolFactory);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb29sZWFuUHJvcGVydHkiLCJOdW1iZXJQcm9wZXJ0eSIsIkFsaWduR3JvdXAiLCJDb2xvciIsIkltYWdlIiwiTGluZSIsIk5vZGUiLCJWZWN0b3IyIiwiVG9nZ2xlTm9kZSIsIlRhbmRlbSIsIndpcmVJY29uX3BuZyIsIkNDS0NDb25zdGFudHMiLCJDaXJjdWl0Q29uc3RydWN0aW9uS2l0Q29tbW9uU3RyaW5ncyIsImNpcmN1aXRDb25zdHJ1Y3Rpb25LaXRDb21tb24iLCJBQ1ZvbHRhZ2UiLCJCYXR0ZXJ5IiwiQ2FwYWNpdG9yIiwiRnVzZSIsIkluZHVjdG9yIiwiTGlnaHRCdWxiIiwiUmVzaXN0b3IiLCJTd2l0Y2giLCJWZXJ0ZXgiLCJXaXJlIiwiQUNWb2x0YWdlTm9kZSIsIkJhdHRlcnlOb2RlIiwiQ2FwYWNpdG9yQ2lyY3VpdEVsZW1lbnROb2RlIiwiQ0NLQ0xpZ2h0QnVsYk5vZGUiLCJDaXJjdWl0RWxlbWVudFRvb2xOb2RlIiwiRnVzZU5vZGUiLCJJbmR1Y3Rvck5vZGUiLCJSZXNpc3Rvck5vZGUiLCJTd2l0Y2hOb2RlIiwiQ2lyY3VpdEVsZW1lbnRWaWV3VHlwZSIsIkNDS0NRdWVyeVBhcmFtZXRlcnMiLCJSZXNpc3RvclR5cGUiLCJFbnVtZXJhdGlvblByb3BlcnR5Iiwib3B0aW9uaXplIiwiYWNTb3VyY2VTdHJpbmdQcm9wZXJ0eSIsImNhcGFjaXRvclN0cmluZ1Byb3BlcnR5IiwiaW5kdWN0b3JTdHJpbmdQcm9wZXJ0eSIsImJhdHRlcnlTdHJpbmdQcm9wZXJ0eSIsImNvaW5TdHJpbmdQcm9wZXJ0eSIsImRvZ1N0cmluZ1Byb3BlcnR5IiwiZG9sbGFyQmlsbFN0cmluZ1Byb3BlcnR5IiwiZXJhc2VyU3RyaW5nUHJvcGVydHkiLCJmdXNlU3RyaW5nUHJvcGVydHkiLCJoYW5kU3RyaW5nUHJvcGVydHkiLCJsaWdodEJ1bGJTdHJpbmdQcm9wZXJ0eSIsInBhcGVyQ2xpcFN0cmluZ1Byb3BlcnR5IiwicGVuY2lsU3RyaW5nUHJvcGVydHkiLCJyZXNpc3RvclN0cmluZ1Byb3BlcnR5Iiwic3dpdGNoU3RyaW5nUHJvcGVydHkiLCJ3aXJlU3RyaW5nUHJvcGVydHkiLCJCQVRURVJZX0xFTkdUSCIsIkFDX1ZPTFRBR0VfTEVOR1RIIiwiRlVTRV9MRU5HVEgiLCJXSVJFX0xFTkdUSCIsIlNXSVRDSF9MRU5HVEgiLCJpY29uQWxpZ25Hcm91cCIsIkxJRkVMSUtFX1BST1BFUlRZIiwiTElGRUxJS0UiLCJTQ0hFTUFUSUNfUFJPUEVSVFkiLCJTQ0hFTUFUSUMiLCJDaXJjdWl0RWxlbWVudFRvb2xGYWN0b3J5IiwiY29uc3RydWN0b3IiLCJjaXJjdWl0Iiwic2hvd0xhYmVsc1Byb3BlcnR5Iiwidmlld1R5cGVQcm9wZXJ0eSIsImdsb2JhbFRvQ2lyY3VpdE5vZGVQb2ludCIsInBhcmVudFRhbmRlbSIsIndpcmVUb29sTm9kZSIsImNyZWF0ZUNpcmN1aXRFbGVtZW50VG9vbE5vZGUiLCJsYWJlbFN0cmluZ1Byb3BlcnR5IiwiY291bnQiLCJjcmVhdGVJY29uIiwicHJlZGljYXRlIiwiY3JlYXRlRWxlbWVudCIsInByb3ZpZGVkT3B0aW9ucyIsImFzc2VydCIsIk51bWJlciIsImlzSW50ZWdlciIsIm9wdGlvbnMiLCJhZGRpdGlvbmFsUHJvcGVydHkiLCJsaWZlbGlrZUljb25IZWlnaHQiLCJUT09MQk9YX0lDT05fSEVJR0hUIiwic2NoZW1hdGljSWNvbkhlaWdodCIsIndyYXAiLCJub2RlIiwiaGVpZ2h0Iiwibm9kZTEiLCJjaGlsZHJlbiIsIm11dGF0ZSIsInNjYWxlIiwidG9nZ2xlTm9kZSIsInZhbHVlIiwiY3JlYXRlTm9kZSIsIk9QVF9PVVQiLCJjcmVhdGVCb3giLCJ5QWxpZ24iLCJjcmVhdGVDb3VudGVyIiwidGFuZGVtIiwiY2lyY3VpdEVsZW1lbnRzIiwiZmlsdGVyIiwiY2lyY3VpdEVsZW1lbnQiLCJpbnNpZGVUcnVlQmxhY2tCb3hQcm9wZXJ0eSIsImdldCIsImxlbmd0aCIsImNyZWF0ZVdpcmVUb29sTm9kZSIsIk5VTUJFUl9PRl9XSVJFUyIsInN0cm9rZSIsIkJMQUNLIiwibGluZVdpZHRoIiwicG9zaXRpb24iLCJ3aXJlR3JvdXAiLCJjcmVhdGVOZXh0RWxlbWVudCIsImNyZWF0ZVZlcnRleFBhaXJBcnJheSIsImNyZWF0ZVJpZ2h0QmF0dGVyeVRvb2xOb2RlIiwiYmF0dGVyeU1vZGVsIiwiWkVSTyIsInNlbGVjdGlvblByb3BlcnR5IiwiT1BUSU9OQUwiLCJjcmVhdGVUYW5kZW0iLCJpc0ljb24iLCJpbml0aWFsT3JpZW50YXRpb24iLCJiYXR0ZXJ5VHlwZSIsImJhdHRlcnlHcm91cCIsImNyZWF0ZUFDVm9sdGFnZVRvb2xOb2RlIiwiYWNTb3VyY2UiLCJhY1ZvbHRhZ2VHcm91cCIsImNyZWF0ZUxpZ2h0QnVsYlRvb2xOb2RlIiwibGlnaHRCdWxiR3JvdXAiLCJzdHJpbmciLCJyZWFsIiwiYWRkUmVhbEJ1bGJzUHJvcGVydHkiLCJ2ZXJ0ZXhQYWlyIiwiY3JlYXRlVmVydGV4UGFpciIsImxpZ2h0QnVsYk1vZGVsIiwiY3JlYXRlQXRQb3NpdGlvbiIsInN0YXJ0VmVydGV4IiwiZW5kVmVydGV4IiwiREVGQVVMVF9SRVNJU1RBTkNFIiwiaXNFeHRyZW1lIiwiaXNSZWFsIiwiY3JlYXRlUmVzaXN0b3JUb29sTm9kZSIsImdyb3VwIiwicmVzaXN0b3JHcm91cCIsInJlc2lzdG9yVHlwZSIsIlJFU0lTVE9SIiwidGFuZGVtTmFtZSIsInJlc2lzdG9yTW9kZWwiLCJ2ZXJ0aWNlcyIsImNyZWF0ZUZ1c2VUb29sTm9kZSIsImZ1c2VNb2RlbCIsIlJFU0lTVE9SX0xFTkdUSCIsImZ1c2VHcm91cCIsImNyZWF0ZUNhcGFjaXRvclRvb2xOb2RlIiwiY2FwYWNpdG9yIiwiQ0FQQUNJVE9SX0xFTkdUSCIsImNhcGFjaXRvckdyb3VwIiwiY3JlYXRlSW5kdWN0b3JUb29sTm9kZSIsImluZHVjdG9yTW9kZWwiLCJJTkRVQ1RPUl9MRU5HVEgiLCJtb3JlSW5kdWN0b3JzIiwiaW5kdWN0b3JHcm91cCIsImNyZWF0ZVN3aXRjaFRvb2xOb2RlIiwic3dpdGNoR3JvdXAiLCJjcmVhdGVQYXBlckNsaXBUb29sTm9kZSIsImhvdXNlaG9sZE9iamVjdEdyb3VwIiwiUEFQRVJfQ0xJUCIsImNyZWF0ZUNvaW5Ub29sTm9kZSIsIkNPSU4iLCJjcmVhdGVEb2xsYXJCaWxsVG9vbE5vZGUiLCJET0xMQVJfQklMTCIsImNyZWF0ZUVyYXNlclRvb2xOb2RlIiwiRVJBU0VSIiwiY3JlYXRlUGVuY2lsVG9vbE5vZGUiLCJQRU5DSUwiLCJjcmVhdGVIYW5kVG9vbE5vZGUiLCJIQU5EIiwiY3JlYXRlRG9nVG9vbE5vZGUiLCJET0ciLCJjcmVhdGVFeHRyZW1lUmVzaXN0b3JUb29sTm9kZSIsImV4dHJlbWVSZXNpc3Rvckdyb3VwIiwiRVhUUkVNRV9SRVNJU1RPUiIsImNyZWF0ZUV4dHJlbWVCYXR0ZXJ5VG9vbE5vZGUiLCJ2b2x0YWdlIiwibnVtYmVyT2ZEZWNpbWFsUGxhY2VzIiwiSElHSF9WT0xUQUdFX0RFQ0lNQUxfUExBQ0VTIiwiZXh0cmVtZUJhdHRlcnlHcm91cCIsImNyZWF0ZUV4dHJlbWVCdWxiVG9vbE5vZGUiLCJleHRyZW1lTGlnaHRCdWxiR3JvdXAiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkNpcmN1aXRFbGVtZW50VG9vbEZhY3RvcnkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTctMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBDaXJjdWl0RWxlbWVudFRvb2xOb2RlcyB0aGF0IGNhbiBiZSB1c2VkIHRvIGNyZWF0ZSBDaXJjdWl0RWxlbWVudHMgZnJvbSB0aGUgdG9vbGJveC4gIEV4aXN0cyBmb3IgdGhlIGxpZmUgb2ZcclxuICogdGhlIHNpbSBhbmQgaGVuY2UgZG9lcyBub3QgcmVxdWlyZSBkaXNwb3NhbC5cclxuICpcclxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICovXHJcblxyXG5pbXBvcnQgQm9vbGVhblByb3BlcnR5IGZyb20gJy4uLy4uLy4uL2F4b24vanMvQm9vbGVhblByb3BlcnR5LmpzJztcclxuaW1wb3J0IE51bWJlclByb3BlcnR5IGZyb20gJy4uLy4uLy4uL2F4b24vanMvTnVtYmVyUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vYXhvbi9qcy9Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCB7IEFsaWduR3JvdXAsIENvbG9yLCBJbWFnZSwgTGluZSwgTm9kZSB9IGZyb20gJy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBWZWN0b3IyIGZyb20gJy4uLy4uLy4uL2RvdC9qcy9WZWN0b3IyLmpzJztcclxuaW1wb3J0IFRvZ2dsZU5vZGUgZnJvbSAnLi4vLi4vLi4vc3VuL2pzL1RvZ2dsZU5vZGUuanMnO1xyXG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xyXG5pbXBvcnQgd2lyZUljb25fcG5nIGZyb20gJy4uLy4uL2ltYWdlcy93aXJlSWNvbl9wbmcuanMnO1xyXG5pbXBvcnQgQ0NLQ0NvbnN0YW50cyBmcm9tICcuLi9DQ0tDQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IENpcmN1aXRDb25zdHJ1Y3Rpb25LaXRDb21tb25TdHJpbmdzIGZyb20gJy4uL0NpcmN1aXRDb25zdHJ1Y3Rpb25LaXRDb21tb25TdHJpbmdzLmpzJztcclxuaW1wb3J0IGNpcmN1aXRDb25zdHJ1Y3Rpb25LaXRDb21tb24gZnJvbSAnLi4vY2lyY3VpdENvbnN0cnVjdGlvbktpdENvbW1vbi5qcyc7XHJcbmltcG9ydCBBQ1ZvbHRhZ2UgZnJvbSAnLi4vbW9kZWwvQUNWb2x0YWdlLmpzJztcclxuaW1wb3J0IEJhdHRlcnkgZnJvbSAnLi4vbW9kZWwvQmF0dGVyeS5qcyc7XHJcbmltcG9ydCBDYXBhY2l0b3IgZnJvbSAnLi4vbW9kZWwvQ2FwYWNpdG9yLmpzJztcclxuaW1wb3J0IEZ1c2UgZnJvbSAnLi4vbW9kZWwvRnVzZS5qcyc7XHJcbmltcG9ydCBJbmR1Y3RvciBmcm9tICcuLi9tb2RlbC9JbmR1Y3Rvci5qcyc7XHJcbmltcG9ydCBMaWdodEJ1bGIgZnJvbSAnLi4vbW9kZWwvTGlnaHRCdWxiLmpzJztcclxuaW1wb3J0IFJlc2lzdG9yIGZyb20gJy4uL21vZGVsL1Jlc2lzdG9yLmpzJztcclxuaW1wb3J0IFN3aXRjaCBmcm9tICcuLi9tb2RlbC9Td2l0Y2guanMnO1xyXG5pbXBvcnQgVmVydGV4IGZyb20gJy4uL21vZGVsL1ZlcnRleC5qcyc7XHJcbmltcG9ydCBXaXJlIGZyb20gJy4uL21vZGVsL1dpcmUuanMnO1xyXG5pbXBvcnQgQUNWb2x0YWdlTm9kZSBmcm9tICcuL0FDVm9sdGFnZU5vZGUuanMnO1xyXG5pbXBvcnQgQmF0dGVyeU5vZGUgZnJvbSAnLi9CYXR0ZXJ5Tm9kZS5qcyc7XHJcbmltcG9ydCBDYXBhY2l0b3JDaXJjdWl0RWxlbWVudE5vZGUgZnJvbSAnLi9DYXBhY2l0b3JDaXJjdWl0RWxlbWVudE5vZGUuanMnO1xyXG5pbXBvcnQgQ0NLQ0xpZ2h0QnVsYk5vZGUgZnJvbSAnLi9DQ0tDTGlnaHRCdWxiTm9kZS5qcyc7XHJcbmltcG9ydCBDaXJjdWl0RWxlbWVudFRvb2xOb2RlLCB7IENpcmN1aXRFbGVtZW50VG9vbE5vZGVPcHRpb25zIH0gZnJvbSAnLi9DaXJjdWl0RWxlbWVudFRvb2xOb2RlLmpzJztcclxuaW1wb3J0IEZ1c2VOb2RlIGZyb20gJy4vRnVzZU5vZGUuanMnO1xyXG5pbXBvcnQgSW5kdWN0b3JOb2RlIGZyb20gJy4vSW5kdWN0b3JOb2RlLmpzJztcclxuaW1wb3J0IFJlc2lzdG9yTm9kZSBmcm9tICcuL1Jlc2lzdG9yTm9kZS5qcyc7XHJcbmltcG9ydCBTd2l0Y2hOb2RlIGZyb20gJy4vU3dpdGNoTm9kZS5qcyc7XHJcbmltcG9ydCBDaXJjdWl0IGZyb20gJy4uL21vZGVsL0NpcmN1aXQuanMnO1xyXG5pbXBvcnQgQ2lyY3VpdEVsZW1lbnRWaWV3VHlwZSBmcm9tICcuLi9tb2RlbC9DaXJjdWl0RWxlbWVudFZpZXdUeXBlLmpzJztcclxuaW1wb3J0IENpcmN1aXRFbGVtZW50IGZyb20gJy4uL21vZGVsL0NpcmN1aXRFbGVtZW50LmpzJztcclxuaW1wb3J0IENDS0NRdWVyeVBhcmFtZXRlcnMgZnJvbSAnLi4vQ0NLQ1F1ZXJ5UGFyYW1ldGVycy5qcyc7XHJcbmltcG9ydCBSZXNpc3RvclR5cGUgZnJvbSAnLi4vbW9kZWwvUmVzaXN0b3JUeXBlLmpzJztcclxuaW1wb3J0IEVudW1lcmF0aW9uUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vYXhvbi9qcy9FbnVtZXJhdGlvblByb3BlcnR5LmpzJztcclxuaW1wb3J0IG9wdGlvbml6ZSBmcm9tICcuLi8uLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuaW1wb3J0IFRSZWFkT25seVByb3BlcnR5IGZyb20gJy4uLy4uLy4uL2F4b24vanMvVFJlYWRPbmx5UHJvcGVydHkuanMnO1xyXG5pbXBvcnQgUGhldGlvR3JvdXAgZnJvbSAnLi4vLi4vLi4vdGFuZGVtL2pzL1BoZXRpb0dyb3VwLmpzJztcclxuaW1wb3J0IFBpY2tSZXF1aXJlZCBmcm9tICcuLi8uLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvUGlja1JlcXVpcmVkLmpzJztcclxuXHJcbmNvbnN0IGFjU291cmNlU3RyaW5nUHJvcGVydHkgPSBDaXJjdWl0Q29uc3RydWN0aW9uS2l0Q29tbW9uU3RyaW5ncy5hY1NvdXJjZVN0cmluZ1Byb3BlcnR5O1xyXG5jb25zdCBjYXBhY2l0b3JTdHJpbmdQcm9wZXJ0eSA9IENpcmN1aXRDb25zdHJ1Y3Rpb25LaXRDb21tb25TdHJpbmdzLmNhcGFjaXRvclN0cmluZ1Byb3BlcnR5O1xyXG5jb25zdCBpbmR1Y3RvclN0cmluZ1Byb3BlcnR5ID0gQ2lyY3VpdENvbnN0cnVjdGlvbktpdENvbW1vblN0cmluZ3MuaW5kdWN0b3JTdHJpbmdQcm9wZXJ0eTtcclxuY29uc3QgYmF0dGVyeVN0cmluZ1Byb3BlcnR5ID0gQ2lyY3VpdENvbnN0cnVjdGlvbktpdENvbW1vblN0cmluZ3MuYmF0dGVyeVN0cmluZ1Byb3BlcnR5O1xyXG5jb25zdCBjb2luU3RyaW5nUHJvcGVydHkgPSBDaXJjdWl0Q29uc3RydWN0aW9uS2l0Q29tbW9uU3RyaW5ncy5jb2luU3RyaW5nUHJvcGVydHk7XHJcbmNvbnN0IGRvZ1N0cmluZ1Byb3BlcnR5ID0gQ2lyY3VpdENvbnN0cnVjdGlvbktpdENvbW1vblN0cmluZ3MuZG9nU3RyaW5nUHJvcGVydHk7XHJcbmNvbnN0IGRvbGxhckJpbGxTdHJpbmdQcm9wZXJ0eSA9IENpcmN1aXRDb25zdHJ1Y3Rpb25LaXRDb21tb25TdHJpbmdzLmRvbGxhckJpbGxTdHJpbmdQcm9wZXJ0eTtcclxuY29uc3QgZXJhc2VyU3RyaW5nUHJvcGVydHkgPSBDaXJjdWl0Q29uc3RydWN0aW9uS2l0Q29tbW9uU3RyaW5ncy5lcmFzZXJTdHJpbmdQcm9wZXJ0eTtcclxuY29uc3QgZnVzZVN0cmluZ1Byb3BlcnR5ID0gQ2lyY3VpdENvbnN0cnVjdGlvbktpdENvbW1vblN0cmluZ3MuZnVzZVN0cmluZ1Byb3BlcnR5O1xyXG5jb25zdCBoYW5kU3RyaW5nUHJvcGVydHkgPSBDaXJjdWl0Q29uc3RydWN0aW9uS2l0Q29tbW9uU3RyaW5ncy5oYW5kU3RyaW5nUHJvcGVydHk7XHJcbmNvbnN0IGxpZ2h0QnVsYlN0cmluZ1Byb3BlcnR5ID0gQ2lyY3VpdENvbnN0cnVjdGlvbktpdENvbW1vblN0cmluZ3MubGlnaHRCdWxiU3RyaW5nUHJvcGVydHk7XHJcbmNvbnN0IHBhcGVyQ2xpcFN0cmluZ1Byb3BlcnR5ID0gQ2lyY3VpdENvbnN0cnVjdGlvbktpdENvbW1vblN0cmluZ3MucGFwZXJDbGlwU3RyaW5nUHJvcGVydHk7XHJcbmNvbnN0IHBlbmNpbFN0cmluZ1Byb3BlcnR5ID0gQ2lyY3VpdENvbnN0cnVjdGlvbktpdENvbW1vblN0cmluZ3MucGVuY2lsU3RyaW5nUHJvcGVydHk7XHJcbmNvbnN0IHJlc2lzdG9yU3RyaW5nUHJvcGVydHkgPSBDaXJjdWl0Q29uc3RydWN0aW9uS2l0Q29tbW9uU3RyaW5ncy5yZXNpc3RvclN0cmluZ1Byb3BlcnR5O1xyXG5jb25zdCBzd2l0Y2hTdHJpbmdQcm9wZXJ0eSA9IENpcmN1aXRDb25zdHJ1Y3Rpb25LaXRDb21tb25TdHJpbmdzLnN3aXRjaFN0cmluZ1Byb3BlcnR5O1xyXG5jb25zdCB3aXJlU3RyaW5nUHJvcGVydHkgPSBDaXJjdWl0Q29uc3RydWN0aW9uS2l0Q29tbW9uU3RyaW5ncy53aXJlU3RyaW5nUHJvcGVydHk7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgQkFUVEVSWV9MRU5HVEggPSBDQ0tDQ29uc3RhbnRzLkJBVFRFUllfTEVOR1RIO1xyXG5jb25zdCBBQ19WT0xUQUdFX0xFTkdUSCA9IENDS0NDb25zdGFudHMuQUNfVk9MVEFHRV9MRU5HVEg7XHJcbmNvbnN0IEZVU0VfTEVOR1RIID0gQ0NLQ0NvbnN0YW50cy5GVVNFX0xFTkdUSDtcclxuY29uc3QgV0lSRV9MRU5HVEggPSBDQ0tDQ29uc3RhbnRzLldJUkVfTEVOR1RIO1xyXG5jb25zdCBTV0lUQ0hfTEVOR1RIID0gQ0NLQ0NvbnN0YW50cy5TV0lUQ0hfTEVOR1RIO1xyXG5cclxuLy8gU2VwYXJhdGUgaWNvbnMgYXJlIG1hZGUgZm9yIHNjaGVtYXRpYy9saWZlbGlrZSBzbyB0aGV5IGNhbiBiZSBhbGlnbmVkXHJcbmNvbnN0IGljb25BbGlnbkdyb3VwID0gbmV3IEFsaWduR3JvdXAoKTtcclxuY29uc3QgTElGRUxJS0VfUFJPUEVSVFkgPSBuZXcgRW51bWVyYXRpb25Qcm9wZXJ0eSggQ2lyY3VpdEVsZW1lbnRWaWV3VHlwZS5MSUZFTElLRSApO1xyXG5jb25zdCBTQ0hFTUFUSUNfUFJPUEVSVFkgPSBuZXcgRW51bWVyYXRpb25Qcm9wZXJ0eSggQ2lyY3VpdEVsZW1lbnRWaWV3VHlwZS5TQ0hFTUFUSUMgKTtcclxuXHJcbnR5cGUgQ3JlYXRlQ2lyY3VpdEVsZW1lbnRUb29sTm9kZVNlbGZPcHRpb25zID0ge1xyXG4gIGxpZmVsaWtlSWNvbkhlaWdodD86IG51bWJlcjtcclxuICBzY2hlbWF0aWNJY29uSGVpZ2h0PzogbnVtYmVyO1xyXG59O1xyXG5cclxudHlwZSBDcmVhdGVSZXNpc3RvclRvb2xOb2RlU2VsZk9wdGlvbnMgPSB7XHJcbiAgY291bnQ/OiBudW1iZXI7XHJcbiAgcmVzaXN0b3JUeXBlPzogUmVzaXN0b3JUeXBlO1xyXG4gIGxhYmVsU3RyaW5nUHJvcGVydHk/OiBUUmVhZE9ubHlQcm9wZXJ0eTxzdHJpbmc+O1xyXG4gIHRhbmRlbU5hbWU/OiBzdHJpbmc7XHJcbn07XHJcblxyXG50eXBlIENyZWF0ZUNpcmN1aXRFbGVtZW50VG9vbE5vZGVQcm92aWRlZE9wdGlvbnMgPSBDcmVhdGVDaXJjdWl0RWxlbWVudFRvb2xOb2RlU2VsZk9wdGlvbnMgJiBDaXJjdWl0RWxlbWVudFRvb2xOb2RlT3B0aW9ucztcclxudHlwZSBDcmVhdGVSZXNpc3RvclRvb2xOb2RlUHJvdmlkZWRPcHRpb25zID0gQ3JlYXRlUmVzaXN0b3JUb29sTm9kZVNlbGZPcHRpb25zICYgQ3JlYXRlQ2lyY3VpdEVsZW1lbnRUb29sTm9kZVByb3ZpZGVkT3B0aW9ucztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENpcmN1aXRFbGVtZW50VG9vbEZhY3Rvcnkge1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgY2lyY3VpdDogQ2lyY3VpdDtcclxuICBwcml2YXRlIHJlYWRvbmx5IHNob3dMYWJlbHNQcm9wZXJ0eTogUHJvcGVydHk8Ym9vbGVhbj47XHJcbiAgcHJpdmF0ZSByZWFkb25seSB2aWV3VHlwZVByb3BlcnR5OiBQcm9wZXJ0eTxDaXJjdWl0RWxlbWVudFZpZXdUeXBlPjtcclxuICBwcml2YXRlIHJlYWRvbmx5IGdsb2JhbFRvQ2lyY3VpdE5vZGVQb2ludDogKCB2OiBWZWN0b3IyICkgPT4gVmVjdG9yMjtcclxuICBwcml2YXRlIHJlYWRvbmx5IHBhcmVudFRhbmRlbTogVGFuZGVtO1xyXG4gIHByaXZhdGUgd2lyZVRvb2xOb2RlOiBDaXJjdWl0RWxlbWVudFRvb2xOb2RlIHwgbnVsbDtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIGNpcmN1aXRcclxuICAgKiBAcGFyYW0gc2hvd0xhYmVsc1Byb3BlcnR5XHJcbiAgICogQHBhcmFtIHZpZXdUeXBlUHJvcGVydHlcclxuICAgKiBAcGFyYW0gZ2xvYmFsVG9DaXJjdWl0Tm9kZVBvaW50IFZlY3RvcjI9PlZlY3RvcjIgZ2xvYmFsIHBvaW50IHRvIGNvb3JkaW5hdGUgZnJhbWUgb2YgY2lyY3VpdE5vZGVcclxuICAgKiBAcGFyYW0gcGFyZW50VGFuZGVtIC0gcGFyZW50IHRhbmRlbSBmb3IgdGhlIGNyZWF0ZWQgdG9vbCBub2Rlc1xyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggY2lyY3VpdDogQ2lyY3VpdCwgc2hvd0xhYmVsc1Byb3BlcnR5OiBQcm9wZXJ0eTxib29sZWFuPiwgdmlld1R5cGVQcm9wZXJ0eTogUHJvcGVydHk8Q2lyY3VpdEVsZW1lbnRWaWV3VHlwZT4sIGdsb2JhbFRvQ2lyY3VpdE5vZGVQb2ludDogKCB2OiBWZWN0b3IyICkgPT4gVmVjdG9yMiwgcGFyZW50VGFuZGVtOiBUYW5kZW0gKSB7XHJcbiAgICB0aGlzLmNpcmN1aXQgPSBjaXJjdWl0O1xyXG4gICAgdGhpcy5zaG93TGFiZWxzUHJvcGVydHkgPSBzaG93TGFiZWxzUHJvcGVydHk7XHJcbiAgICB0aGlzLnZpZXdUeXBlUHJvcGVydHkgPSB2aWV3VHlwZVByb3BlcnR5O1xyXG4gICAgdGhpcy5nbG9iYWxUb0NpcmN1aXROb2RlUG9pbnQgPSBnbG9iYWxUb0NpcmN1aXROb2RlUG9pbnQ7XHJcbiAgICB0aGlzLnBhcmVudFRhbmRlbSA9IHBhcmVudFRhbmRlbTtcclxuICAgIHRoaXMud2lyZVRvb2xOb2RlID0gbnVsbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFV0aWxpdHkgZnVuY3Rpb24gdGhhdCBjcmVhdGVzIGEgQ2lyY3VpdEVsZW1lbnRUb29sTm9kZVxyXG4gICAqIEBwYXJhbSBsYWJlbFN0cmluZ1Byb3BlcnR5XHJcbiAgICogQHBhcmFtIGNvdW50XHJcbiAgICogQHBhcmFtIGNyZWF0ZUljb25cclxuICAgKiBAcGFyYW0gcHJlZGljYXRlIC0gQ2lyY3VpdEVsZW1lbnQgPT4gYm9vbGVhbiwgdXNlZCB0byBjb3VudCBjaXJjdWl0IGVsZW1lbnRzIG9mIHRoYXQga2luZC5cclxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLSBOT1RFOiBBbGwgb2YgdGhlIHByZWRpY2F0ZXMgYXJlIGludGVuZGVkIHRvIGNvdmVyIGFsbCBjaXJjdWl0IGVsZW1lbnRzIGFuZCBiZVxyXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtIG11dHVhbGx5IGV4Y2x1c2l2ZSAoc28gdGhlcmUgaXMgbm8gZG91YmxlIGNvdW50aW5nKS4gIEhvd2V2ZXIsIHRoaXMgaXMgbm90IGVuZm9yY2VkLlxyXG4gICAqIEBwYXJhbSBjcmVhdGVFbGVtZW50IC0gKFZlY3RvcjIpID0+IENpcmN1aXRFbGVtZW50IEZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBhIENpcmN1aXRFbGVtZW50IGF0IHRoZSBnaXZlbiBwb3NpdGlvblxyXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLSBmb3IgbW9zdCBjb21wb25lbnRzIGl0IGlzIHRoZSBjZW50ZXIgb2YgdGhlIGNvbXBvbmVudC4gIEZvciBMaWdodCBCdWxicywgaXQgaXNcclxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0gaW4gdGhlIGNlbnRlciBvZiB0aGUgc29ja2V0XHJcbiAgICogQHBhcmFtIFtwcm92aWRlZE9wdGlvbnNdXHJcbiAgICovXHJcbiAgcHVibGljIGNyZWF0ZUNpcmN1aXRFbGVtZW50VG9vbE5vZGUoXHJcbiAgICBsYWJlbFN0cmluZ1Byb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxzdHJpbmc+LFxyXG4gICAgY291bnQ6IG51bWJlcixcclxuICAgIGNyZWF0ZUljb246ICggdDogVGFuZGVtLCBwOiBQcm9wZXJ0eTxDaXJjdWl0RWxlbWVudFZpZXdUeXBlPiApID0+IE5vZGUsXHJcbiAgICBwcmVkaWNhdGU6ICggY2lyY3VpdEVsZW1lbnQ6IENpcmN1aXRFbGVtZW50ICkgPT4gYm9vbGVhbixcclxuICAgIGNyZWF0ZUVsZW1lbnQ6ICggdjogVmVjdG9yMiApID0+IENpcmN1aXRFbGVtZW50LFxyXG4gICAgcHJvdmlkZWRPcHRpb25zPzogQ3JlYXRlQ2lyY3VpdEVsZW1lbnRUb29sTm9kZVByb3ZpZGVkT3B0aW9ucyAmIFBpY2tSZXF1aXJlZDxOb2RlLCAndGFuZGVtJz4gKTogQ2lyY3VpdEVsZW1lbnRUb29sTm9kZSB7XHJcblxyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggTnVtYmVyLmlzSW50ZWdlciggY291bnQgKSwgJ2NvdW50IHNob3VsZCBiZSBhbiBpbnRlZ2VyJyApO1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8Q3JlYXRlQ2lyY3VpdEVsZW1lbnRUb29sTm9kZVByb3ZpZGVkT3B0aW9ucywgQ3JlYXRlQ2lyY3VpdEVsZW1lbnRUb29sTm9kZVNlbGZPcHRpb25zLCBDaXJjdWl0RWxlbWVudFRvb2xOb2RlT3B0aW9ucz4oKSgge1xyXG4gICAgICBhZGRpdGlvbmFsUHJvcGVydHk6IG5ldyBCb29sZWFuUHJvcGVydHkoIHRydWUgKSxcclxuICAgICAgbGlmZWxpa2VJY29uSGVpZ2h0OiBDQ0tDQ29uc3RhbnRzLlRPT0xCT1hfSUNPTl9IRUlHSFQsXHJcbiAgICAgIHNjaGVtYXRpY0ljb25IZWlnaHQ6IENDS0NDb25zdGFudHMuVE9PTEJPWF9JQ09OX0hFSUdIVFxyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgY29uc3Qgd3JhcCA9ICggbm9kZTogTm9kZSwgaGVpZ2h0OiBudW1iZXIgKSA9PiB7XHJcbiAgICAgIGNvbnN0IG5vZGUxID0gbmV3IE5vZGUoIHtcclxuICAgICAgICBjaGlsZHJlbjogWyBub2RlIF1cclxuICAgICAgfSApO1xyXG4gICAgICBub2RlMS5tdXRhdGUoIHsgc2NhbGU6IGhlaWdodCAvIG5vZGUxLmhlaWdodCB9ICk7XHJcbiAgICAgIHJldHVybiBub2RlMTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgdG9nZ2xlTm9kZSA9IG5ldyBUb2dnbGVOb2RlKCB0aGlzLnZpZXdUeXBlUHJvcGVydHksIFtcclxuICAgICAge1xyXG4gICAgICAgIHZhbHVlOiBDaXJjdWl0RWxlbWVudFZpZXdUeXBlLkxJRkVMSUtFLFxyXG4gICAgICAgIGNyZWF0ZU5vZGU6ICgpID0+IHdyYXAoIGNyZWF0ZUljb24oIFRhbmRlbS5PUFRfT1VULCBMSUZFTElLRV9QUk9QRVJUWSApLCBvcHRpb25zLmxpZmVsaWtlSWNvbkhlaWdodCApXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZTogQ2lyY3VpdEVsZW1lbnRWaWV3VHlwZS5TQ0hFTUFUSUMsXHJcbiAgICAgICAgY3JlYXRlTm9kZTogKCkgPT4gd3JhcCggY3JlYXRlSWNvbiggVGFuZGVtLk9QVF9PVVQsIFNDSEVNQVRJQ19QUk9QRVJUWSApLCBvcHRpb25zLnNjaGVtYXRpY0ljb25IZWlnaHQgKVxyXG4gICAgICB9XHJcbiAgICBdICk7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBDaXJjdWl0RWxlbWVudFRvb2xOb2RlKFxyXG4gICAgICBsYWJlbFN0cmluZ1Byb3BlcnR5LFxyXG4gICAgICB0aGlzLnNob3dMYWJlbHNQcm9wZXJ0eSxcclxuICAgICAgdGhpcy52aWV3VHlwZVByb3BlcnR5LFxyXG4gICAgICB0aGlzLmNpcmN1aXQsXHJcbiAgICAgIHRoaXMuZ2xvYmFsVG9DaXJjdWl0Tm9kZVBvaW50LFxyXG4gICAgICBpY29uQWxpZ25Hcm91cC5jcmVhdGVCb3goIHRvZ2dsZU5vZGUsIHsgeUFsaWduOiAnYm90dG9tJyB9ICksXHJcbiAgICAgIGNvdW50LFxyXG4gICAgICB0aGlzLmNyZWF0ZUNvdW50ZXIoIHByZWRpY2F0ZSApLFxyXG4gICAgICBjcmVhdGVFbGVtZW50LCB7XHJcbiAgICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbSxcclxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydHk6IG9wdGlvbnMuYWRkaXRpb25hbFByb3BlcnR5XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm5zIGEgZnVuY3Rpb24gd2hpY2ggY291bnRzIHRoZSBudW1iZXIgb2YgY2lyY3VpdCBlbGVtZW50cyAobm90IGNvdW50aW5nIHRob3NlIGluIHRoZSB0cnVlIGJsYWNrIGJveCkuXHJcbiAgICogQHBhcmFtIHByZWRpY2F0ZSAtIENpcmN1aXRFbGVtZW50ID0+IGJvb2xlYW5cclxuICAgKiBAcmV0dXJucyAtIGEgbm8tYXJnIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUge251bWJlcn0gb2YgQ2lyY3VpdEVsZW1lbnRzIG9mIHRoZSBzcGVjaWZpZWQgdHlwZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBjcmVhdGVDb3VudGVyKCBwcmVkaWNhdGU6ICggYzogQ2lyY3VpdEVsZW1lbnQgKSA9PiBib29sZWFuICk6ICgpID0+IG51bWJlciB7XHJcbiAgICByZXR1cm4gKCkgPT5cclxuICAgICAgdGhpcy5jaXJjdWl0LmNpcmN1aXRFbGVtZW50cy5maWx0ZXIoIGNpcmN1aXRFbGVtZW50ID0+XHJcblxyXG4gICAgICAgIC8vIENvdW50IGFjY29yZGluZyB0byB0aGUgcHJlZGljYXRlLCBidXQgZG9uJ3QgY291bnQgZWxlbWVudHMgaW5zaWRlIHRoZSB0cnVlIGJsYWNrIGJveFxyXG4gICAgICAgIHByZWRpY2F0ZSggY2lyY3VpdEVsZW1lbnQgKSAmJiAhY2lyY3VpdEVsZW1lbnQuaW5zaWRlVHJ1ZUJsYWNrQm94UHJvcGVydHkuZ2V0KClcclxuICAgICAgKS5sZW5ndGg7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgY3JlYXRlV2lyZVRvb2xOb2RlKCB0YW5kZW06IFRhbmRlbSApOiBOb2RlIHtcclxuICAgIHJldHVybiB0aGlzLmNyZWF0ZUNpcmN1aXRFbGVtZW50VG9vbE5vZGUoIHdpcmVTdHJpbmdQcm9wZXJ0eSwgQ0NLQ0NvbnN0YW50cy5OVU1CRVJfT0ZfV0lSRVMsXHJcbiAgICAgICggdGFuZGVtOiBUYW5kZW0sIHZpZXdUeXBlUHJvcGVydHk6IFByb3BlcnR5PENpcmN1aXRFbGVtZW50Vmlld1R5cGU+ICkgPT4ge1xyXG4gICAgICAgIHJldHVybiB2aWV3VHlwZVByb3BlcnR5LnZhbHVlID09PSBDaXJjdWl0RWxlbWVudFZpZXdUeXBlLkxJRkVMSUtFID8gKCBuZXcgSW1hZ2UoIHdpcmVJY29uX3BuZywge1xyXG4gICAgICAgICAgdGFuZGVtOiB0YW5kZW1cclxuICAgICAgICB9ICkgKSA6IG5ldyBMaW5lKCAwLCAwLCAxMjAsIDAsIHtcclxuICAgICAgICAgIHN0cm9rZTogQ29sb3IuQkxBQ0ssXHJcbiAgICAgICAgICBsaW5lV2lkdGg6IDQuNSwgLy8gbWF0Y2ggd2l0aCBvdGhlciB0b29sYm94IGljb25zXHJcbiAgICAgICAgICB0YW5kZW06IHRhbmRlbVxyXG4gICAgICAgIH0gKTtcclxuICAgICAgfSxcclxuICAgICAgY2lyY3VpdEVsZW1lbnQgPT4gY2lyY3VpdEVsZW1lbnQgaW5zdGFuY2VvZiBXaXJlLFxyXG4gICAgICAoIHBvc2l0aW9uOiBWZWN0b3IyICkgPT4gdGhpcy5jaXJjdWl0LndpcmVHcm91cC5jcmVhdGVOZXh0RWxlbWVudCggLi4udGhpcy5jaXJjdWl0LmNyZWF0ZVZlcnRleFBhaXJBcnJheSggcG9zaXRpb24sIFdJUkVfTEVOR1RIICkgKSwge1xyXG4gICAgICAgIHRhbmRlbTogdGFuZGVtLFxyXG4gICAgICAgIGxpZmVsaWtlSWNvbkhlaWdodDogOSxcclxuICAgICAgICBzY2hlbWF0aWNJY29uSGVpZ2h0OiAyXHJcbiAgICAgIH0gKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSBjb3VudCAtIHRoZSBudW1iZXIgdGhhdCBjYW4gYmUgZHJhZ2dlZCBvdXQgYXQgb25jZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBjcmVhdGVSaWdodEJhdHRlcnlUb29sTm9kZSggdGFuZGVtOiBUYW5kZW0sIGNvdW50ID0gMTAgKTogQ2lyY3VpdEVsZW1lbnRUb29sTm9kZSB7XHJcbiAgICBjb25zdCBiYXR0ZXJ5TW9kZWwgPSBuZXcgQmF0dGVyeShcclxuICAgICAgbmV3IFZlcnRleCggVmVjdG9yMi5aRVJPLCB0aGlzLmNpcmN1aXQuc2VsZWN0aW9uUHJvcGVydHkgKSwgbmV3IFZlcnRleCggbmV3IFZlY3RvcjIoIENDS0NDb25zdGFudHMuQkFUVEVSWV9MRU5HVEgsIDAgKSwgdGhpcy5jaXJjdWl0LnNlbGVjdGlvblByb3BlcnR5ICksXHJcbiAgICAgIG5ldyBOdW1iZXJQcm9wZXJ0eSggMCApLCAnbm9ybWFsJywgVGFuZGVtLk9QVElPTkFMXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlQ2lyY3VpdEVsZW1lbnRUb29sTm9kZSggYmF0dGVyeVN0cmluZ1Byb3BlcnR5LCBjb3VudCxcclxuICAgICAgKCB0YW5kZW0sIHZpZXdUeXBlUHJvcGVydHkgKSA9PiBuZXcgQmF0dGVyeU5vZGUoIG51bGwsIG51bGwsIGJhdHRlcnlNb2RlbCwgdmlld1R5cGVQcm9wZXJ0eSwgdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2JhdHRlcnlJY29uJyApLCB7IGlzSWNvbjogdHJ1ZSB9ICksXHJcbiAgICAgIGNpcmN1aXRFbGVtZW50ID0+IGNpcmN1aXRFbGVtZW50IGluc3RhbmNlb2YgQmF0dGVyeSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaXJjdWl0RWxlbWVudC5pbml0aWFsT3JpZW50YXRpb24gPT09ICdyaWdodCcgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2lyY3VpdEVsZW1lbnQuYmF0dGVyeVR5cGUgPT09ICdub3JtYWwnLFxyXG4gICAgICAoIHBvc2l0aW9uOiBWZWN0b3IyICkgPT4gdGhpcy5jaXJjdWl0LmJhdHRlcnlHcm91cC5jcmVhdGVOZXh0RWxlbWVudCggLi4udGhpcy5jaXJjdWl0LmNyZWF0ZVZlcnRleFBhaXJBcnJheSggcG9zaXRpb24sIEJBVFRFUllfTEVOR1RIICkgKSwge1xyXG4gICAgICAgIHRhbmRlbTogdGFuZGVtLFxyXG4gICAgICAgIGxpZmVsaWtlSWNvbkhlaWdodDogMTVcclxuICAgICAgfSApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIGNvdW50IC0gdGhlIG51bWJlciB0aGF0IGNhbiBiZSBkcmFnZ2VkIG91dCBhdCBvbmNlXHJcbiAgICovXHJcbiAgcHVibGljIGNyZWF0ZUFDVm9sdGFnZVRvb2xOb2RlKCB0YW5kZW06IFRhbmRlbSwgY291bnQgPSAxMCApOiBDaXJjdWl0RWxlbWVudFRvb2xOb2RlIHtcclxuICAgIGNvbnN0IGFjU291cmNlID0gbmV3IEFDVm9sdGFnZShcclxuICAgICAgbmV3IFZlcnRleCggVmVjdG9yMi5aRVJPLCB0aGlzLmNpcmN1aXQuc2VsZWN0aW9uUHJvcGVydHkgKSxcclxuICAgICAgbmV3IFZlcnRleCggbmV3IFZlY3RvcjIoIEFDX1ZPTFRBR0VfTEVOR1RILCAwICksIHRoaXMuY2lyY3VpdC5zZWxlY3Rpb25Qcm9wZXJ0eSApLFxyXG4gICAgICBuZXcgTnVtYmVyUHJvcGVydHkoIDAgKSxcclxuICAgICAgVGFuZGVtLk9QVElPTkFMXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlQ2lyY3VpdEVsZW1lbnRUb29sTm9kZSggYWNTb3VyY2VTdHJpbmdQcm9wZXJ0eSwgY291bnQsXHJcbiAgICAgICggdGFuZGVtLCB2aWV3VHlwZVByb3BlcnR5ICkgPT4gbmV3IEFDVm9sdGFnZU5vZGUoIG51bGwsIG51bGwsIGFjU291cmNlLCB2aWV3VHlwZVByb3BlcnR5LCB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnYWNTb3VyY2VJY29uJyApLCB7XHJcbiAgICAgICAgaXNJY29uOiB0cnVlLFxyXG4gICAgICAgIHNjYWxlOiAwLjY4XHJcbiAgICAgIH0gKSxcclxuICAgICAgY2lyY3VpdEVsZW1lbnQgPT4gY2lyY3VpdEVsZW1lbnQgaW5zdGFuY2VvZiBBQ1ZvbHRhZ2UsXHJcbiAgICAgICggcG9zaXRpb246IFZlY3RvcjIgKSA9PiB0aGlzLmNpcmN1aXQuYWNWb2x0YWdlR3JvdXAhLmNyZWF0ZU5leHRFbGVtZW50KCAuLi50aGlzLmNpcmN1aXQuY3JlYXRlVmVydGV4UGFpckFycmF5KCBwb3NpdGlvbiwgQUNfVk9MVEFHRV9MRU5HVEggKSApLCB7XHJcbiAgICAgICAgdGFuZGVtOiB0YW5kZW0sXHJcbiAgICAgICAgbGlmZWxpa2VJY29uSGVpZ2h0OiAyNyxcclxuICAgICAgICBzY2hlbWF0aWNJY29uSGVpZ2h0OiAyN1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGNyZWF0ZUxpZ2h0QnVsYlRvb2xOb2RlKCB0YW5kZW06IFRhbmRlbSwgbGlnaHRCdWxiR3JvdXAgPSB0aGlzLmNpcmN1aXQubGlnaHRCdWxiR3JvdXAsIHN0cmluZyA9IGxpZ2h0QnVsYlN0cmluZ1Byb3BlcnR5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhbCA9IGZhbHNlLCBhZGRSZWFsQnVsYnNQcm9wZXJ0eTogQm9vbGVhblByb3BlcnR5IHwgbnVsbCA9IG51bGwgKTogQ2lyY3VpdEVsZW1lbnRUb29sTm9kZSB7XHJcbiAgICBjb25zdCB2ZXJ0ZXhQYWlyID0gTGlnaHRCdWxiLmNyZWF0ZVZlcnRleFBhaXIoIFZlY3RvcjIuWkVSTywgdGhpcy5jaXJjdWl0LCB0cnVlICk7XHJcbiAgICBjb25zdCBsaWdodEJ1bGJNb2RlbCA9IExpZ2h0QnVsYi5jcmVhdGVBdFBvc2l0aW9uKFxyXG4gICAgICB2ZXJ0ZXhQYWlyLnN0YXJ0VmVydGV4LFxyXG4gICAgICB2ZXJ0ZXhQYWlyLmVuZFZlcnRleCxcclxuICAgICAgdGhpcy5jaXJjdWl0LFxyXG4gICAgICBDQ0tDQ29uc3RhbnRzLkRFRkFVTFRfUkVTSVNUQU5DRSxcclxuICAgICAgdGhpcy52aWV3VHlwZVByb3BlcnR5LFxyXG4gICAgICBUYW5kZW0uT1BUSU9OQUwsIHtcclxuICAgICAgICBpc0V4dHJlbWU6IGZhbHNlLFxyXG4gICAgICAgIGlzUmVhbDogcmVhbFxyXG4gICAgICB9ICk7XHJcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVDaXJjdWl0RWxlbWVudFRvb2xOb2RlKCBzdHJpbmcsIDEwLFxyXG4gICAgICAoIHRhbmRlbSwgdmlld1R5cGVQcm9wZXJ0eSApID0+IG5ldyBDQ0tDTGlnaHRCdWxiTm9kZSggbnVsbCwgbnVsbCxcclxuICAgICAgICBsaWdodEJ1bGJNb2RlbCxcclxuICAgICAgICBuZXcgQm9vbGVhblByb3BlcnR5KCB0cnVlICksIHZpZXdUeXBlUHJvcGVydHksIFRhbmRlbS5PUFRfT1VULCB7IGlzSWNvbjogdHJ1ZSwgc2NhbGU6IDAuODUgfSApLFxyXG4gICAgICBjaXJjdWl0RWxlbWVudCA9PiBjaXJjdWl0RWxlbWVudCBpbnN0YW5jZW9mIExpZ2h0QnVsYiAmJiAhY2lyY3VpdEVsZW1lbnQuaXNFeHRyZW1lLFxyXG4gICAgICAoIHBvc2l0aW9uOiBWZWN0b3IyICkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHZlcnRleFBhaXIgPSBMaWdodEJ1bGIuY3JlYXRlVmVydGV4UGFpciggcG9zaXRpb24sIHRoaXMuY2lyY3VpdCApO1xyXG4gICAgICAgIHJldHVybiBsaWdodEJ1bGJHcm91cC5jcmVhdGVOZXh0RWxlbWVudCggdmVydGV4UGFpci5zdGFydFZlcnRleCwgdmVydGV4UGFpci5lbmRWZXJ0ZXggKTtcclxuICAgICAgfSwge1xyXG4gICAgICAgIHRhbmRlbTogdGFuZGVtLFxyXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0eTogYWRkUmVhbEJ1bGJzUHJvcGVydHkgfHwgbmV3IEJvb2xlYW5Qcm9wZXJ0eSggdHJ1ZSApLFxyXG4gICAgICAgIHNjaGVtYXRpY0ljb25IZWlnaHQ6IDI3XHJcbiAgICAgIH0gKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBjcmVhdGVSZXNpc3RvclRvb2xOb2RlKCB0YW5kZW06IFRhbmRlbSwgZ3JvdXA6IFBoZXRpb0dyb3VwPFJlc2lzdG9yLCBbIFZlcnRleCwgVmVydGV4IF0+IHwgUGhldGlvR3JvdXA8UmVzaXN0b3IsIFsgVmVydGV4LCBWZXJ0ZXgsIFJlc2lzdG9yVHlwZSBdPiA9IHRoaXMuY2lyY3VpdC5yZXNpc3Rvckdyb3VwLCBwcm92aWRlZE9wdGlvbnM/OiBDcmVhdGVSZXNpc3RvclRvb2xOb2RlUHJvdmlkZWRPcHRpb25zICk6IENpcmN1aXRFbGVtZW50VG9vbE5vZGUge1xyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxDcmVhdGVSZXNpc3RvclRvb2xOb2RlUHJvdmlkZWRPcHRpb25zLCBDcmVhdGVSZXNpc3RvclRvb2xOb2RlU2VsZk9wdGlvbnMsIENyZWF0ZUNpcmN1aXRFbGVtZW50VG9vbE5vZGVTZWxmT3B0aW9ucz4oKSgge1xyXG4gICAgICBjb3VudDogMTAsXHJcbiAgICAgIHJlc2lzdG9yVHlwZTogUmVzaXN0b3JUeXBlLlJFU0lTVE9SLFxyXG4gICAgICBsaWZlbGlrZUljb25IZWlnaHQ6IDE1LFxyXG4gICAgICBzY2hlbWF0aWNJY29uSGVpZ2h0OiAxNCxcclxuICAgICAgbGFiZWxTdHJpbmdQcm9wZXJ0eTogcmVzaXN0b3JTdHJpbmdQcm9wZXJ0eSxcclxuICAgICAgdGFuZGVtTmFtZTogJ3Jlc2lzdG9yVG9vbE5vZGUnXHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuICAgIGNvbnN0IGxhYmVsU3RyaW5nUHJvcGVydHkgPSBvcHRpb25zLmxhYmVsU3RyaW5nUHJvcGVydHk7XHJcbiAgICBjb25zdCByZXNpc3RvclR5cGUgPSBvcHRpb25zLnJlc2lzdG9yVHlwZTtcclxuXHJcbiAgICAvLyBDcmVhdGUgdGhlIGljb24gbW9kZWwgd2l0aG91dCB1c2luZyB0aGUgUGhldGlvR3JvdXAsIHNvIGl0IHdpbGwgbm90IGJlIFBoRVQtaU8gaW5zdHJ1bWVudGVkLlxyXG4gICAgY29uc3QgcmVzaXN0b3JNb2RlbCA9IG5ldyBSZXNpc3RvcihcclxuICAgICAgbmV3IFZlcnRleCggVmVjdG9yMi5aRVJPLCB0aGlzLmNpcmN1aXQuc2VsZWN0aW9uUHJvcGVydHkgKSxcclxuICAgICAgbmV3IFZlcnRleCggbmV3IFZlY3RvcjIoIHJlc2lzdG9yVHlwZS5sZW5ndGgsIDAgKSwgdGhpcy5jaXJjdWl0LnNlbGVjdGlvblByb3BlcnR5ICksXHJcbiAgICAgIHJlc2lzdG9yVHlwZSxcclxuICAgICAgVGFuZGVtLk9QVElPTkFMXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiB0aGlzLmNyZWF0ZUNpcmN1aXRFbGVtZW50VG9vbE5vZGUoIGxhYmVsU3RyaW5nUHJvcGVydHksIG9wdGlvbnMuY291bnQsXHJcbiAgICAgICggdGFuZGVtLCB2aWV3VHlwZVByb3BlcnR5ICkgPT4gbmV3IFJlc2lzdG9yTm9kZSggbnVsbCwgbnVsbCwgcmVzaXN0b3JNb2RlbCwgdmlld1R5cGVQcm9wZXJ0eSwgdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3Jlc2lzdG9ySWNvbicgKSwge1xyXG4gICAgICAgIGlzSWNvbjogdHJ1ZVxyXG4gICAgICB9ICksXHJcbiAgICAgIGNpcmN1aXRFbGVtZW50ID0+IGNpcmN1aXRFbGVtZW50IGluc3RhbmNlb2YgUmVzaXN0b3IgJiYgY2lyY3VpdEVsZW1lbnQucmVzaXN0b3JUeXBlID09PSByZXNpc3RvclR5cGUsXHJcbiAgICAgICggcG9zaXRpb246IFZlY3RvcjIgKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLmNpcmN1aXQuY3JlYXRlVmVydGV4UGFpckFycmF5KCBwb3NpdGlvbiwgcmVzaXN0b3JUeXBlLmxlbmd0aCApO1xyXG4gICAgICAgIHJldHVybiBncm91cC5jcmVhdGVOZXh0RWxlbWVudCggdmVydGljZXNbIDAgXSwgdmVydGljZXNbIDEgXSwgcmVzaXN0b3JUeXBlICk7Ly8gbGFzdCBhcmcgaWdub3JlZCBieSBzb21lIGdyb3Vwc1xyXG4gICAgICB9LCB7XHJcbiAgICAgICAgdGFuZGVtOiB0YW5kZW0sXHJcbiAgICAgICAgbGlmZWxpa2VJY29uSGVpZ2h0OiBvcHRpb25zLmxpZmVsaWtlSWNvbkhlaWdodCxcclxuICAgICAgICBzY2hlbWF0aWNJY29uSGVpZ2h0OiBvcHRpb25zLnNjaGVtYXRpY0ljb25IZWlnaHRcclxuICAgICAgfSApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGNyZWF0ZUZ1c2VUb29sTm9kZSggdGFuZGVtOiBUYW5kZW0gKTogQ2lyY3VpdEVsZW1lbnRUb29sTm9kZSB7XHJcbiAgICBjb25zdCBmdXNlTW9kZWwgPSBuZXcgRnVzZShcclxuICAgICAgbmV3IFZlcnRleCggVmVjdG9yMi5aRVJPLCB0aGlzLmNpcmN1aXQuc2VsZWN0aW9uUHJvcGVydHkgKSxcclxuICAgICAgbmV3IFZlcnRleCggbmV3IFZlY3RvcjIoIENDS0NDb25zdGFudHMuUkVTSVNUT1JfTEVOR1RILCAwICksIHRoaXMuY2lyY3VpdC5zZWxlY3Rpb25Qcm9wZXJ0eSApLFxyXG4gICAgICBUYW5kZW0uT1BUSU9OQUxcclxuICAgICk7XHJcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVDaXJjdWl0RWxlbWVudFRvb2xOb2RlKCBmdXNlU3RyaW5nUHJvcGVydHksIDEwLFxyXG4gICAgICAoIHRhbmRlbSwgdmlld1R5cGVQcm9wZXJ0eSApID0+IG5ldyBGdXNlTm9kZSggbnVsbCwgbnVsbCwgZnVzZU1vZGVsLCB2aWV3VHlwZVByb3BlcnR5LCB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnZnVzZUljb24nICksIHtcclxuICAgICAgICBpc0ljb246IHRydWVcclxuICAgICAgfSApLFxyXG4gICAgICBjaXJjdWl0RWxlbWVudCA9PiBjaXJjdWl0RWxlbWVudCBpbnN0YW5jZW9mIEZ1c2UsXHJcbiAgICAgICggcG9zaXRpb246IFZlY3RvcjIgKSA9PiB0aGlzLmNpcmN1aXQuZnVzZUdyb3VwLmNyZWF0ZU5leHRFbGVtZW50KCAuLi50aGlzLmNpcmN1aXQuY3JlYXRlVmVydGV4UGFpckFycmF5KCBwb3NpdGlvbiwgRlVTRV9MRU5HVEggKSApLCB7XHJcbiAgICAgICAgdGFuZGVtOiB0YW5kZW0sXHJcbiAgICAgICAgbGlmZWxpa2VJY29uSGVpZ2h0OiAxNSxcclxuICAgICAgICBzY2hlbWF0aWNJY29uSGVpZ2h0OiAxNFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIGNvdW50IC0gdGhlIG51bWJlciB0aGF0IGNhbiBiZSBkcmFnZ2VkIG91dCBhdCBvbmNlXHJcbiAgICovXHJcbiAgcHVibGljIGNyZWF0ZUNhcGFjaXRvclRvb2xOb2RlKCB0YW5kZW06IFRhbmRlbSwgY291bnQgPSAxMCApOiBDaXJjdWl0RWxlbWVudFRvb2xOb2RlIHtcclxuICAgIGNvbnN0IGNhcGFjaXRvciA9IG5ldyBDYXBhY2l0b3IoXHJcbiAgICAgIG5ldyBWZXJ0ZXgoIFZlY3RvcjIuWkVSTywgdGhpcy5jaXJjdWl0LnNlbGVjdGlvblByb3BlcnR5ICksXHJcbiAgICAgIG5ldyBWZXJ0ZXgoIG5ldyBWZWN0b3IyKCBDQ0tDQ29uc3RhbnRzLkNBUEFDSVRPUl9MRU5HVEgsIDAgKSwgdGhpcy5jaXJjdWl0LnNlbGVjdGlvblByb3BlcnR5ICksXHJcbiAgICAgIFRhbmRlbS5PUFRJT05BTFxyXG4gICAgKTtcclxuICAgIHJldHVybiB0aGlzLmNyZWF0ZUNpcmN1aXRFbGVtZW50VG9vbE5vZGUoIGNhcGFjaXRvclN0cmluZ1Byb3BlcnR5LCBjb3VudCxcclxuICAgICAgKCB0YW5kZW0sIHZpZXdUeXBlUHJvcGVydHkgKSA9PiBuZXcgQ2FwYWNpdG9yQ2lyY3VpdEVsZW1lbnROb2RlKCBudWxsLCBudWxsLCBjYXBhY2l0b3IsIHZpZXdUeXBlUHJvcGVydHksIHRhbmRlbS5jcmVhdGVUYW5kZW0oICdjYXBhY2l0b3JJY29uJyApLCB7XHJcbiAgICAgICAgaXNJY29uOiB0cnVlXHJcbiAgICAgIH0gKSxcclxuICAgICAgY2lyY3VpdEVsZW1lbnQgPT4gY2lyY3VpdEVsZW1lbnQgaW5zdGFuY2VvZiBDYXBhY2l0b3IsXHJcbiAgICAgICggcG9zaXRpb246IFZlY3RvcjIgKSA9PiB0aGlzLmNpcmN1aXQuY2FwYWNpdG9yR3JvdXAhLmNyZWF0ZU5leHRFbGVtZW50KCAuLi50aGlzLmNpcmN1aXQuY3JlYXRlVmVydGV4UGFpckFycmF5KCBwb3NpdGlvbiwgQ0NLQ0NvbnN0YW50cy5DQVBBQ0lUT1JfTEVOR1RIICkgKSwge1xyXG4gICAgICAgIHRhbmRlbTogdGFuZGVtXHJcbiAgICAgIH0gKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBjcmVhdGVJbmR1Y3RvclRvb2xOb2RlKCB0YW5kZW06IFRhbmRlbSApOiBDaXJjdWl0RWxlbWVudFRvb2xOb2RlIHtcclxuICAgIGNvbnN0IGluZHVjdG9yTW9kZWwgPSBuZXcgSW5kdWN0b3IoXHJcbiAgICAgIG5ldyBWZXJ0ZXgoIFZlY3RvcjIuWkVSTywgdGhpcy5jaXJjdWl0LnNlbGVjdGlvblByb3BlcnR5ICksXHJcbiAgICAgIG5ldyBWZXJ0ZXgoIG5ldyBWZWN0b3IyKCBDQ0tDQ29uc3RhbnRzLklORFVDVE9SX0xFTkdUSCwgMCApLCB0aGlzLmNpcmN1aXQuc2VsZWN0aW9uUHJvcGVydHkgKSxcclxuICAgICAgVGFuZGVtLk9QVElPTkFMXHJcbiAgICApO1xyXG4gICAgY29uc3QgY291bnQgPSBDQ0tDUXVlcnlQYXJhbWV0ZXJzLm1vcmVJbmR1Y3RvcnMgPyAxMCA6IDE7XHJcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVDaXJjdWl0RWxlbWVudFRvb2xOb2RlKCBpbmR1Y3RvclN0cmluZ1Byb3BlcnR5LCBjb3VudCxcclxuICAgICAgKCB0YW5kZW0sIHZpZXdUeXBlUHJvcGVydHkgKSA9PiBuZXcgSW5kdWN0b3JOb2RlKCBudWxsLCBudWxsLCBpbmR1Y3Rvck1vZGVsLCB2aWV3VHlwZVByb3BlcnR5LCB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnaW5kdWN0b3JJY29uJyApLCB7XHJcbiAgICAgICAgaXNJY29uOiB0cnVlLFxyXG4gICAgICAgIHNjYWxlOiAwLjc1XHJcbiAgICAgIH0gKSxcclxuICAgICAgY2lyY3VpdEVsZW1lbnQgPT4gY2lyY3VpdEVsZW1lbnQgaW5zdGFuY2VvZiBJbmR1Y3RvcixcclxuICAgICAgKCBwb3NpdGlvbjogVmVjdG9yMiApID0+IHRoaXMuY2lyY3VpdC5pbmR1Y3Rvckdyb3VwIS5jcmVhdGVOZXh0RWxlbWVudCggLi4udGhpcy5jaXJjdWl0LmNyZWF0ZVZlcnRleFBhaXJBcnJheSggcG9zaXRpb24sIENDS0NDb25zdGFudHMuSU5EVUNUT1JfTEVOR1RIICkgKSwge1xyXG4gICAgICAgIHRhbmRlbTogdGFuZGVtLFxyXG4gICAgICAgIGxpZmVsaWtlSWNvbkhlaWdodDogMjIsXHJcbiAgICAgICAgc2NoZW1hdGljSWNvbkhlaWdodDogNlxyXG4gICAgICB9ICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgY3JlYXRlU3dpdGNoVG9vbE5vZGUoIHRhbmRlbTogVGFuZGVtICk6IENpcmN1aXRFbGVtZW50VG9vbE5vZGUge1xyXG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlQ2lyY3VpdEVsZW1lbnRUb29sTm9kZSggc3dpdGNoU3RyaW5nUHJvcGVydHksIDUsXHJcbiAgICAgICggdGFuZGVtLCB2aWV3VHlwZVByb3BlcnR5ICkgPT4gbmV3IFN3aXRjaE5vZGUoIG51bGwsIG51bGwsXHJcbiAgICAgICAgbmV3IFN3aXRjaChcclxuICAgICAgICAgIG5ldyBWZXJ0ZXgoIFZlY3RvcjIuWkVSTywgdGhpcy5jaXJjdWl0LnNlbGVjdGlvblByb3BlcnR5ICksXHJcbiAgICAgICAgICBuZXcgVmVydGV4KCBuZXcgVmVjdG9yMiggU1dJVENIX0xFTkdUSCwgMCApLCB0aGlzLmNpcmN1aXQuc2VsZWN0aW9uUHJvcGVydHkgKSxcclxuICAgICAgICAgIFRhbmRlbS5PUFRJT05BTCxcclxuICAgICAgICAgIG51bGxcclxuICAgICAgICApLCB2aWV3VHlwZVByb3BlcnR5LCB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnc3dpdGNoSWNvbicgKSwge1xyXG4gICAgICAgICAgaXNJY29uOiB0cnVlXHJcbiAgICAgICAgfSApLFxyXG4gICAgICBjaXJjdWl0RWxlbWVudCA9PiBjaXJjdWl0RWxlbWVudCBpbnN0YW5jZW9mIFN3aXRjaCxcclxuICAgICAgKCBwb3NpdGlvbjogVmVjdG9yMiApID0+IHRoaXMuY2lyY3VpdC5zd2l0Y2hHcm91cC5jcmVhdGVOZXh0RWxlbWVudCggLi4udGhpcy5jaXJjdWl0LmNyZWF0ZVZlcnRleFBhaXJBcnJheSggcG9zaXRpb24sIFNXSVRDSF9MRU5HVEggKSApLCB7XHJcbiAgICAgICAgdGFuZGVtOiB0YW5kZW0sXHJcbiAgICAgICAgbGlmZWxpa2VJY29uSGVpZ2h0OiAyMixcclxuICAgICAgICBzY2hlbWF0aWNJY29uSGVpZ2h0OiAxNlxyXG4gICAgICB9ICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgY3JlYXRlUGFwZXJDbGlwVG9vbE5vZGUoIHRhbmRlbTogVGFuZGVtICk6IENpcmN1aXRFbGVtZW50VG9vbE5vZGUge1xyXG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlUmVzaXN0b3JUb29sTm9kZSggdGFuZGVtLCB0aGlzLmNpcmN1aXQuaG91c2Vob2xkT2JqZWN0R3JvdXAsIHtcclxuICAgICAgY291bnQ6IDEsXHJcbiAgICAgIHJlc2lzdG9yVHlwZTogUmVzaXN0b3JUeXBlLlBBUEVSX0NMSVAsXHJcbiAgICAgIHRhbmRlbU5hbWU6ICdwYXBlckNsaXBUb29sTm9kZScsXHJcbiAgICAgIGxhYmVsU3RyaW5nUHJvcGVydHk6IHBhcGVyQ2xpcFN0cmluZ1Byb3BlcnR5XHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICAvLyBTYW1lIGRvY3MgYXMgZm9yIGNyZWF0ZVBhcGVyQ2xpcFRvb2xOb2RlXHJcbiAgcHVibGljIGNyZWF0ZUNvaW5Ub29sTm9kZSggdGFuZGVtOiBUYW5kZW0gKTogQ2lyY3VpdEVsZW1lbnRUb29sTm9kZSB7XHJcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVSZXNpc3RvclRvb2xOb2RlKCB0YW5kZW0sIHRoaXMuY2lyY3VpdC5ob3VzZWhvbGRPYmplY3RHcm91cCwge1xyXG4gICAgICBjb3VudDogMSxcclxuICAgICAgcmVzaXN0b3JUeXBlOiBSZXNpc3RvclR5cGUuQ09JTixcclxuICAgICAgdGFuZGVtTmFtZTogJ2NvaW5Ub29sTm9kZScsXHJcbiAgICAgIGxhYmVsU3RyaW5nUHJvcGVydHk6IGNvaW5TdHJpbmdQcm9wZXJ0eSxcclxuICAgICAgbGlmZWxpa2VJY29uSGVpZ2h0OiAzMFxyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcbiAgLy8gU2FtZSBkb2NzIGFzIGFzIGZvciBjcmVhdGVQYXBlckNsaXBUb29sTm9kZVxyXG4gIHB1YmxpYyBjcmVhdGVEb2xsYXJCaWxsVG9vbE5vZGUoIHRhbmRlbTogVGFuZGVtICk6IENpcmN1aXRFbGVtZW50VG9vbE5vZGUge1xyXG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlUmVzaXN0b3JUb29sTm9kZSggdGFuZGVtLCB0aGlzLmNpcmN1aXQuaG91c2Vob2xkT2JqZWN0R3JvdXAsIHtcclxuICAgICAgY291bnQ6IDEsXHJcbiAgICAgIHJlc2lzdG9yVHlwZTogUmVzaXN0b3JUeXBlLkRPTExBUl9CSUxMLFxyXG4gICAgICB0YW5kZW1OYW1lOiAnZG9sbGFyQmlsbFRvb2xOb2RlJyxcclxuICAgICAgbGFiZWxTdHJpbmdQcm9wZXJ0eTogZG9sbGFyQmlsbFN0cmluZ1Byb3BlcnR5LFxyXG4gICAgICBsaWZlbGlrZUljb25IZWlnaHQ6IDIyXHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICAvLyBTYW1lIGRvY3MgYXMgZm9yIGNyZWF0ZVBhcGVyQ2xpcFRvb2xOb2RlXHJcbiAgcHVibGljIGNyZWF0ZUVyYXNlclRvb2xOb2RlKCB0YW5kZW06IFRhbmRlbSApOiBDaXJjdWl0RWxlbWVudFRvb2xOb2RlIHtcclxuICAgIHJldHVybiB0aGlzLmNyZWF0ZVJlc2lzdG9yVG9vbE5vZGUoIHRhbmRlbSwgdGhpcy5jaXJjdWl0LmhvdXNlaG9sZE9iamVjdEdyb3VwLCB7XHJcbiAgICAgIGNvdW50OiAxLFxyXG4gICAgICByZXNpc3RvclR5cGU6IFJlc2lzdG9yVHlwZS5FUkFTRVIsXHJcbiAgICAgIHRhbmRlbU5hbWU6ICdlcmFzZXJUb29sTm9kZScsXHJcbiAgICAgIGxhYmVsU3RyaW5nUHJvcGVydHk6IGVyYXNlclN0cmluZ1Byb3BlcnR5LFxyXG4gICAgICBsaWZlbGlrZUljb25IZWlnaHQ6IDE3XHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICAvLyBTYW1lIGRvY3MgYXMgZm9yIGNyZWF0ZVBhcGVyQ2xpcFRvb2xOb2RlXHJcbiAgcHVibGljIGNyZWF0ZVBlbmNpbFRvb2xOb2RlKCB0YW5kZW06IFRhbmRlbSApOiBDaXJjdWl0RWxlbWVudFRvb2xOb2RlIHtcclxuICAgIHJldHVybiB0aGlzLmNyZWF0ZVJlc2lzdG9yVG9vbE5vZGUoIHRhbmRlbSwgdGhpcy5jaXJjdWl0LmhvdXNlaG9sZE9iamVjdEdyb3VwLCB7XHJcbiAgICAgIGNvdW50OiAxLFxyXG4gICAgICByZXNpc3RvclR5cGU6IFJlc2lzdG9yVHlwZS5QRU5DSUwsXHJcbiAgICAgIHRhbmRlbU5hbWU6ICdwZW5jaWxUb29sTm9kZScsXHJcbiAgICAgIGxhYmVsU3RyaW5nUHJvcGVydHk6IHBlbmNpbFN0cmluZ1Byb3BlcnR5LFxyXG4gICAgICBsaWZlbGlrZUljb25IZWlnaHQ6IDEyXHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICAvLyBTYW1lIGRvY3MgYXMgZm9yIGNyZWF0ZVBhcGVyQ2xpcFRvb2xOb2RlXHJcbiAgcHVibGljIGNyZWF0ZUhhbmRUb29sTm9kZSggdGFuZGVtOiBUYW5kZW0gKTogQ2lyY3VpdEVsZW1lbnRUb29sTm9kZSB7XHJcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVSZXNpc3RvclRvb2xOb2RlKCB0YW5kZW0sIHRoaXMuY2lyY3VpdC5ob3VzZWhvbGRPYmplY3RHcm91cCwge1xyXG4gICAgICBjb3VudDogMSxcclxuICAgICAgcmVzaXN0b3JUeXBlOiBSZXNpc3RvclR5cGUuSEFORCxcclxuICAgICAgdGFuZGVtTmFtZTogJ2hhbmRUb29sTm9kZScsXHJcbiAgICAgIGxhYmVsU3RyaW5nUHJvcGVydHk6IGhhbmRTdHJpbmdQcm9wZXJ0eSxcclxuICAgICAgbGlmZWxpa2VJY29uSGVpZ2h0OiAzMFxyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcbiAgLy8gU2FtZSBkb2NzIGFzIGZvciBjcmVhdGVQYXBlckNsaXBUb29sTm9kZVxyXG4gIHB1YmxpYyBjcmVhdGVEb2dUb29sTm9kZSggdGFuZGVtOiBUYW5kZW0gKTogQ2lyY3VpdEVsZW1lbnRUb29sTm9kZSB7XHJcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVSZXNpc3RvclRvb2xOb2RlKCB0YW5kZW0sIHRoaXMuY2lyY3VpdC5ob3VzZWhvbGRPYmplY3RHcm91cCwge1xyXG4gICAgICBjb3VudDogMSxcclxuICAgICAgcmVzaXN0b3JUeXBlOiBSZXNpc3RvclR5cGUuRE9HLFxyXG4gICAgICB0YW5kZW1OYW1lOiAnZG9nVG9vbE5vZGUnLFxyXG4gICAgICBsYWJlbFN0cmluZ1Byb3BlcnR5OiBkb2dTdHJpbmdQcm9wZXJ0eSxcclxuICAgICAgbGlmZWxpa2VJY29uSGVpZ2h0OiAzMFxyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcbiAgLy8gU2FtZSBkb2NzIGFzIGZvciBjcmVhdGVQYXBlckNsaXBUb29sTm9kZVxyXG4gIHB1YmxpYyBjcmVhdGVFeHRyZW1lUmVzaXN0b3JUb29sTm9kZSggdGFuZGVtOiBUYW5kZW0gKTogQ2lyY3VpdEVsZW1lbnRUb29sTm9kZSB7XHJcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVSZXNpc3RvclRvb2xOb2RlKCB0YW5kZW0sIHRoaXMuY2lyY3VpdC5leHRyZW1lUmVzaXN0b3JHcm91cCEsIHtcclxuICAgICAgY291bnQ6IDQsXHJcbiAgICAgIHJlc2lzdG9yVHlwZTogUmVzaXN0b3JUeXBlLkVYVFJFTUVfUkVTSVNUT1IsXHJcbiAgICAgIHRhbmRlbU5hbWU6ICdleHRyZW1lUmVzaXN0b3JUb29sTm9kZScsXHJcbiAgICAgIGxhYmVsU3RyaW5nUHJvcGVydHk6IHJlc2lzdG9yU3RyaW5nUHJvcGVydHlcclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBjcmVhdGVFeHRyZW1lQmF0dGVyeVRvb2xOb2RlKCB0YW5kZW06IFRhbmRlbSApOiBDaXJjdWl0RWxlbWVudFRvb2xOb2RlIHtcclxuICAgIHJldHVybiB0aGlzLmNyZWF0ZUNpcmN1aXRFbGVtZW50VG9vbE5vZGUoIGJhdHRlcnlTdHJpbmdQcm9wZXJ0eSwgNCxcclxuICAgICAgKCB0YW5kZW0sIHZpZXdUeXBlUHJvcGVydHkgKSA9PiBuZXcgQmF0dGVyeU5vZGUoIG51bGwsIG51bGwsXHJcbiAgICAgICAgbmV3IEJhdHRlcnkoXHJcbiAgICAgICAgICBuZXcgVmVydGV4KCBWZWN0b3IyLlpFUk8sIHRoaXMuY2lyY3VpdC5zZWxlY3Rpb25Qcm9wZXJ0eSApLFxyXG4gICAgICAgICAgbmV3IFZlcnRleCggbmV3IFZlY3RvcjIoIENDS0NDb25zdGFudHMuQkFUVEVSWV9MRU5HVEgsIDAgKSwgdGhpcy5jaXJjdWl0LnNlbGVjdGlvblByb3BlcnR5ICksXHJcbiAgICAgICAgICBuZXcgTnVtYmVyUHJvcGVydHkoIDAgKSxcclxuICAgICAgICAgICdoaWdoLXZvbHRhZ2UnLFxyXG4gICAgICAgICAgVGFuZGVtLk9QVElPTkFMLCB7XHJcbiAgICAgICAgICAgIHZvbHRhZ2U6IDEwMDAsXHJcbiAgICAgICAgICAgIG51bWJlck9mRGVjaW1hbFBsYWNlczogQmF0dGVyeS5ISUdIX1ZPTFRBR0VfREVDSU1BTF9QTEFDRVNcclxuICAgICAgICAgIH1cclxuICAgICAgICApLCB2aWV3VHlwZVByb3BlcnR5LCB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnZXh0cmVtZUJhdHRlcnlUb29sTm9kZScgKSwgeyBpc0ljb246IHRydWUgfSApLFxyXG4gICAgICBjaXJjdWl0RWxlbWVudCA9PiBjaXJjdWl0RWxlbWVudCBpbnN0YW5jZW9mIEJhdHRlcnkgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2lyY3VpdEVsZW1lbnQuaW5pdGlhbE9yaWVudGF0aW9uID09PSAncmlnaHQnICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNpcmN1aXRFbGVtZW50LmJhdHRlcnlUeXBlID09PSAnaGlnaC12b2x0YWdlJywgKCBwb3NpdGlvbjogVmVjdG9yMiApID0+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jaXJjdWl0LmV4dHJlbWVCYXR0ZXJ5R3JvdXAhLmNyZWF0ZU5leHRFbGVtZW50KCAuLi50aGlzLmNpcmN1aXQuY3JlYXRlVmVydGV4UGFpckFycmF5KCBwb3NpdGlvbiwgU1dJVENIX0xFTkdUSCApICk7XHJcbiAgICAgIH0sIHtcclxuICAgICAgICB0YW5kZW06IHRhbmRlbSxcclxuICAgICAgICBsaWZlbGlrZUljb25IZWlnaHQ6IDE1XHJcbiAgICAgIH0gKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBjcmVhdGVFeHRyZW1lQnVsYlRvb2xOb2RlKCB0YW5kZW06IFRhbmRlbSApOiBDaXJjdWl0RWxlbWVudFRvb2xOb2RlIHtcclxuICAgIGNvbnN0IHZlcnRleFBhaXIgPSBMaWdodEJ1bGIuY3JlYXRlVmVydGV4UGFpciggVmVjdG9yMi5aRVJPLCB0aGlzLmNpcmN1aXQsIHRydWUgKTtcclxuICAgIHJldHVybiB0aGlzLmNyZWF0ZUNpcmN1aXRFbGVtZW50VG9vbE5vZGUoIGxpZ2h0QnVsYlN0cmluZ1Byb3BlcnR5LCA0LFxyXG4gICAgICAoIHRhbmRlbSwgdmlld1R5cGVQcm9wZXJ0eSApID0+IG5ldyBDQ0tDTGlnaHRCdWxiTm9kZShcclxuICAgICAgICBudWxsLFxyXG4gICAgICAgIG51bGwsXHJcbiAgICAgICAgTGlnaHRCdWxiLmNyZWF0ZUF0UG9zaXRpb24oXHJcbiAgICAgICAgICB2ZXJ0ZXhQYWlyLnN0YXJ0VmVydGV4LFxyXG4gICAgICAgICAgdmVydGV4UGFpci5lbmRWZXJ0ZXgsXHJcbiAgICAgICAgICB0aGlzLmNpcmN1aXQsXHJcbiAgICAgICAgICAxMDAwLFxyXG4gICAgICAgICAgdGhpcy52aWV3VHlwZVByb3BlcnR5LFxyXG4gICAgICAgICAgVGFuZGVtLk9QVElPTkFMLCB7XHJcbiAgICAgICAgICAgIGlzRXh0cmVtZTogdHJ1ZVxyXG4gICAgICAgICAgfSApLFxyXG4gICAgICAgIG5ldyBCb29sZWFuUHJvcGVydHkoIHRydWUgKSxcclxuICAgICAgICB2aWV3VHlwZVByb3BlcnR5LFxyXG4gICAgICAgIHRhbmRlbS5jcmVhdGVUYW5kZW0oICdleHRyZW1lTGlnaHRCdWxiVG9vbE5vZGUnICksIHtcclxuICAgICAgICAgIGlzSWNvbjogdHJ1ZVxyXG4gICAgICAgIH0gKSxcclxuICAgICAgY2lyY3VpdEVsZW1lbnQgPT4gY2lyY3VpdEVsZW1lbnQgaW5zdGFuY2VvZiBMaWdodEJ1bGIgJiYgY2lyY3VpdEVsZW1lbnQuaXNFeHRyZW1lLFxyXG4gICAgICAoIHBvc2l0aW9uOiBWZWN0b3IyICkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHZlcnRleFBhaXIgPSBMaWdodEJ1bGIuY3JlYXRlVmVydGV4UGFpciggcG9zaXRpb24sIHRoaXMuY2lyY3VpdCwgZmFsc2UgKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5jaXJjdWl0LmV4dHJlbWVMaWdodEJ1bGJHcm91cCEuY3JlYXRlTmV4dEVsZW1lbnQoIHZlcnRleFBhaXIuc3RhcnRWZXJ0ZXgsIHZlcnRleFBhaXIuZW5kVmVydGV4ICk7XHJcbiAgICAgIH0sIHtcclxuICAgICAgICB0YW5kZW06IHRhbmRlbVxyXG4gICAgICB9ICk7XHJcbiAgfVxyXG59XHJcblxyXG5jaXJjdWl0Q29uc3RydWN0aW9uS2l0Q29tbW9uLnJlZ2lzdGVyKCAnQ2lyY3VpdEVsZW1lbnRUb29sRmFjdG9yeScsIENpcmN1aXRFbGVtZW50VG9vbEZhY3RvcnkgKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxlQUFlLE1BQU0scUNBQXFDO0FBQ2pFLE9BQU9DLGNBQWMsTUFB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