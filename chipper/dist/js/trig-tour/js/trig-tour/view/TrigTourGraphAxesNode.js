// Copyright 2015-2022, University of Colorado Boulder

/**
 * Axes and labels for the GraphView in trig-tour.  The axes and labels are broken into two nodes which are publicly
 * accessible so that the graph can be correctly layered in GraphView.  In order for the graph to be layered correctly,
 * the axes must be rendered first with the trig plots second, followed by the labels.
 *
 * @author Michael Dubson (PhET developer) on 6/3/2015.
 * @author Jesse Greenberg
 */

import Utils from '../../../../dot/js/Utils.js';
import StringUtils from '../../../../phetcommon/js/util/StringUtils.js';
import ArrowNode from '../../../../scenery-phet/js/ArrowNode.js';
import MathSymbols from '../../../../scenery-phet/js/MathSymbols.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { Line, Node, Text } from '../../../../scenery/js/imports.js';
import trigTour from '../../trigTour.js';
import TrigTourStrings from '../../TrigTourStrings.js';
import TrigTourMathStrings from '../TrigTourMathStrings.js';
import TrigFunctionLabelText from './TrigFunctionLabelText.js';
import TrigTourColors from './TrigTourColors.js';

// constants
const LINE_COLOR = TrigTourColors.LINE_COLOR;
const DISPLAY_FONT_SMALL = new PhetFont(18);
const TEXT_COLOR = TrigTourColors.TEXT_COLOR;
const DISPLAY_FONT_ITALIC = new PhetFont({
  size: 20,
  style: 'italic'
});
const DISPLAY_FONT_SMALL_ITALIC = new PhetFont({
  size: 18,
  family: 'Arial',
  style: 'italic'
});
const cosString = TrigTourStrings.cos;
const numberPiPatternString = TrigTourStrings.numberPiPattern;
const sinString = TrigTourStrings.sin;
const tanString = TrigTourStrings.tan;
class TrigTourGraphAxesNode extends Node {
  /**
   * Constructor.
   *
   * @param {number} width
   * @param {number} wavelength
   * @param {number} numberOfWavelengths
   * @param {number} amplitude
   * @param {ViewProperties} viewProperties
   */
  constructor(width, wavelength, numberOfWavelengths, amplitude, viewProperties) {
    super();

    // Break into layers because we need to to layer things on the graph view in order: Axis, plots, labels
    this.axisNode = new Node(); // @public (read-only)
    this.labelsNode = new Node(); // @public (read-only)

    // draw x-axis and y-axis, represented by ArrowNodes
    const xAxisLength = width;
    const xAxis = new ArrowNode(-xAxisLength / 2, 0, xAxisLength / 2, 0, {
      tailWidth: 0.3,
      fill: LINE_COLOR,
      headHeight: 12,
      headWidth: 8
    });
    const yAxis = new ArrowNode(0, 1.18 * amplitude, 0, -1.3 * amplitude, {
      tailWidth: 0.3,
      fill: LINE_COLOR,
      headHeight: 12,
      headWidth: 8
    });

    // draw tic marks for x and y axes
    const ticLength = 5;
    const xTics = new Node();
    const yTics = new Node();
    let xTic;
    let yTic;
    for (let i = -2 * numberOfWavelengths; i <= 2 * numberOfWavelengths; i++) {
      xTic = new Line(0, ticLength, 0, -ticLength, {
        lineWidth: 2,
        stroke: LINE_COLOR
      });
      xTic.x = i * wavelength / 4;
      xTics.addChild(xTic);
    }
    for (let i = -1; i <= 1; i += 2) {
      yTic = new Line(-ticLength, 0, ticLength, 0, {
        lineWidth: 2,
        stroke: LINE_COLOR
      });
      yTic.y = i * amplitude;
      yTics.addChild(yTic);
    }
    this.children = [xAxis, yAxis];

    // draw 1/-1 labels on y-axis
    const onesNode = new Node(); // @public (read-only)
    let fontInfo = {
      font: DISPLAY_FONT_SMALL,
      fill: TEXT_COLOR
    };
    const oneLabel = new Text(TrigTourMathStrings.ONE_STRING, fontInfo);
    const minusOneLabel = new Text(TrigTourMathStrings.MINUS_ONE_STRING, fontInfo);
    onesNode.children = [oneLabel, minusOneLabel];
    const xOffset = 8;
    oneLabel.left = xOffset;
    minusOneLabel.right = -xOffset;
    oneLabel.centerY = -amplitude - 5;
    minusOneLabel.centerY = amplitude + 5;

    // draw tic mark labels in degrees
    const tickMarkLabelsInDegrees = new Node();
    let label;
    for (let j = -numberOfWavelengths; j <= numberOfWavelengths; j++) {
      let degrees = Utils.toFixed(180 * j, 0);
      degrees = degrees.toString();
      label = new Text(`${degrees}\u00B0`, {
        font: DISPLAY_FONT_SMALL
      });
      label.centerX = j * wavelength / 2;
      label.top = xAxis.bottom;
      if (j !== 0) {
        tickMarkLabelsInDegrees.addChild(label);
      }
    }

    // tic mark labels in radians
    const tickMarkLabelsInRadians = new Node();
    let labelString = '';
    const pi = MathSymbols.PI;
    const labelStrings = [StringUtils.format(numberPiPatternString, '-4', pi), StringUtils.format(numberPiPatternString, '-3', pi), StringUtils.format(numberPiPatternString, '-2', pi), StringUtils.format(numberPiPatternString, '-', pi), pi, StringUtils.format(numberPiPatternString, '2', pi), StringUtils.format(numberPiPatternString, '3', pi), StringUtils.format(numberPiPatternString, '4', pi)];
    const xPositions = [-4, -3, -2, -1, 1, 2, 3, 4];
    for (let i = 0; i < xPositions.length; i++) {
      labelString = labelStrings[i];
      label = new Text(labelString, {
        font: DISPLAY_FONT_SMALL_ITALIC,
        fill: TEXT_COLOR
      });
      label.centerX = xPositions[i] * wavelength / 2;
      label.top = xAxis.bottom;
      tickMarkLabelsInRadians.addChild(label);
    }

    // visibility set by Labels control in Control Panel and by degs/rads RBs in Readout Panel
    onesNode.visible = false;
    tickMarkLabelsInDegrees.visible = false;
    tickMarkLabelsInRadians.visible = false;

    // Axes labels
    const maxThetaWidth = ticLength * 3; // restrict for i18n
    fontInfo = {
      font: DISPLAY_FONT_ITALIC,
      fill: TEXT_COLOR,
      maxWidth: maxThetaWidth
    };
    const thetaLabel = new Text(MathSymbols.THETA, fontInfo);
    thetaLabel.left = this.right + 5;
    thetaLabel.centerY = xAxis.centerY;
    const maxTrigLabelWidth = xAxis.width / 4;
    const cosThetaLabel = new TrigFunctionLabelText(cosString, {
      maxWidth: maxTrigLabelWidth
    });
    const sinThetaLabel = new TrigFunctionLabelText(sinString, {
      maxWidth: maxTrigLabelWidth
    });
    const tanThetaLabel = new TrigFunctionLabelText(tanString, {
      maxWidth: maxTrigLabelWidth
    });
    cosThetaLabel.right = sinThetaLabel.right = tanThetaLabel.right = yAxis.left - 10;
    cosThetaLabel.top = sinThetaLabel.top = tanThetaLabel.top = yAxis.top;
    this.axisNode.children = [xAxis, yAxis, thetaLabel, cosThetaLabel, sinThetaLabel, tanThetaLabel];
    this.labelsNode.children = [onesNode, tickMarkLabelsInDegrees, tickMarkLabelsInRadians, xTics, yTics];

    // sync visibility with view properties
    viewProperties.graphProperty.link(graph => {
      sinThetaLabel.visible = graph === 'sin';
      cosThetaLabel.visible = graph === 'cos';
      tanThetaLabel.visible = graph === 'tan';
    });
    viewProperties.labelsVisibleProperty.link(isVisible => {
      onesNode.visible = isVisible;
      if (isVisible) {
        tickMarkLabelsInRadians.visible = viewProperties.angleUnitsProperty.value === 'radians';
        tickMarkLabelsInDegrees.visible = viewProperties.angleUnitsProperty.value === 'degrees';
      } else {
        tickMarkLabelsInRadians.visible = false;
        tickMarkLabelsInDegrees.visible = false;
      }
    });
    viewProperties.angleUnitsProperty.link(angleUnits => {
      if (viewProperties.labelsVisibleProperty.value) {
        tickMarkLabelsInRadians.visible = angleUnits === 'radians';
        tickMarkLabelsInDegrees.visible = angleUnits !== 'radians';
      }
    });
  }
}
trigTour.register('TrigTourGraphAxesNode', TrigTourGraphAxesNode);
export default TrigTourGraphAxesNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVdGlscyIsIlN0cmluZ1V0aWxzIiwiQXJyb3dOb2RlIiwiTWF0aFN5bWJvbHMiLCJQaGV0Rm9udCIsIkxpbmUiLCJOb2RlIiwiVGV4dCIsInRyaWdUb3VyIiwiVHJpZ1RvdXJTdHJpbmdzIiwiVHJpZ1RvdXJNYXRoU3RyaW5ncyIsIlRyaWdGdW5jdGlvbkxhYmVsVGV4dCIsIlRyaWdUb3VyQ29sb3JzIiwiTElORV9DT0xPUiIsIkRJU1BMQVlfRk9OVF9TTUFMTCIsIlRFWFRfQ09MT1IiLCJESVNQTEFZX0ZPTlRfSVRBTElDIiwic2l6ZSIsInN0eWxlIiwiRElTUExBWV9GT05UX1NNQUxMX0lUQUxJQyIsImZhbWlseSIsImNvc1N0cmluZyIsImNvcyIsIm51bWJlclBpUGF0dGVyblN0cmluZyIsIm51bWJlclBpUGF0dGVybiIsInNpblN0cmluZyIsInNpbiIsInRhblN0cmluZyIsInRhbiIsIlRyaWdUb3VyR3JhcGhBeGVzTm9kZSIsImNvbnN0cnVjdG9yIiwid2lkdGgiLCJ3YXZlbGVuZ3RoIiwibnVtYmVyT2ZXYXZlbGVuZ3RocyIsImFtcGxpdHVkZSIsInZpZXdQcm9wZXJ0aWVzIiwiYXhpc05vZGUiLCJsYWJlbHNOb2RlIiwieEF4aXNMZW5ndGgiLCJ4QXhpcyIsInRhaWxXaWR0aCIsImZpbGwiLCJoZWFkSGVpZ2h0IiwiaGVhZFdpZHRoIiwieUF4aXMiLCJ0aWNMZW5ndGgiLCJ4VGljcyIsInlUaWNzIiwieFRpYyIsInlUaWMiLCJpIiwibGluZVdpZHRoIiwic3Ryb2tlIiwieCIsImFkZENoaWxkIiwieSIsImNoaWxkcmVuIiwib25lc05vZGUiLCJmb250SW5mbyIsImZvbnQiLCJvbmVMYWJlbCIsIk9ORV9TVFJJTkciLCJtaW51c09uZUxhYmVsIiwiTUlOVVNfT05FX1NUUklORyIsInhPZmZzZXQiLCJsZWZ0IiwicmlnaHQiLCJjZW50ZXJZIiwidGlja01hcmtMYWJlbHNJbkRlZ3JlZXMiLCJsYWJlbCIsImoiLCJkZWdyZWVzIiwidG9GaXhlZCIsInRvU3RyaW5nIiwiY2VudGVyWCIsInRvcCIsImJvdHRvbSIsInRpY2tNYXJrTGFiZWxzSW5SYWRpYW5zIiwibGFiZWxTdHJpbmciLCJwaSIsIlBJIiwibGFiZWxTdHJpbmdzIiwiZm9ybWF0IiwieFBvc2l0aW9ucyIsImxlbmd0aCIsInZpc2libGUiLCJtYXhUaGV0YVdpZHRoIiwibWF4V2lkdGgiLCJ0aGV0YUxhYmVsIiwiVEhFVEEiLCJtYXhUcmlnTGFiZWxXaWR0aCIsImNvc1RoZXRhTGFiZWwiLCJzaW5UaGV0YUxhYmVsIiwidGFuVGhldGFMYWJlbCIsImdyYXBoUHJvcGVydHkiLCJsaW5rIiwiZ3JhcGgiLCJsYWJlbHNWaXNpYmxlUHJvcGVydHkiLCJpc1Zpc2libGUiLCJhbmdsZVVuaXRzUHJvcGVydHkiLCJ2YWx1ZSIsImFuZ2xlVW5pdHMiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlRyaWdUb3VyR3JhcGhBeGVzTm9kZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNS0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBBeGVzIGFuZCBsYWJlbHMgZm9yIHRoZSBHcmFwaFZpZXcgaW4gdHJpZy10b3VyLiAgVGhlIGF4ZXMgYW5kIGxhYmVscyBhcmUgYnJva2VuIGludG8gdHdvIG5vZGVzIHdoaWNoIGFyZSBwdWJsaWNseVxyXG4gKiBhY2Nlc3NpYmxlIHNvIHRoYXQgdGhlIGdyYXBoIGNhbiBiZSBjb3JyZWN0bHkgbGF5ZXJlZCBpbiBHcmFwaFZpZXcuICBJbiBvcmRlciBmb3IgdGhlIGdyYXBoIHRvIGJlIGxheWVyZWQgY29ycmVjdGx5LFxyXG4gKiB0aGUgYXhlcyBtdXN0IGJlIHJlbmRlcmVkIGZpcnN0IHdpdGggdGhlIHRyaWcgcGxvdHMgc2Vjb25kLCBmb2xsb3dlZCBieSB0aGUgbGFiZWxzLlxyXG4gKlxyXG4gKiBAYXV0aG9yIE1pY2hhZWwgRHVic29uIChQaEVUIGRldmVsb3Blcikgb24gNi8zLzIwMTUuXHJcbiAqIEBhdXRob3IgSmVzc2UgR3JlZW5iZXJnXHJcbiAqL1xyXG5cclxuaW1wb3J0IFV0aWxzIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9VdGlscy5qcyc7XHJcbmltcG9ydCBTdHJpbmdVdGlscyBmcm9tICcuLi8uLi8uLi8uLi9waGV0Y29tbW9uL2pzL3V0aWwvU3RyaW5nVXRpbHMuanMnO1xyXG5pbXBvcnQgQXJyb3dOb2RlIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9BcnJvd05vZGUuanMnO1xyXG5pbXBvcnQgTWF0aFN5bWJvbHMgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL01hdGhTeW1ib2xzLmpzJztcclxuaW1wb3J0IFBoZXRGb250IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9QaGV0Rm9udC5qcyc7XHJcbmltcG9ydCB7IExpbmUsIE5vZGUsIFRleHQgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgdHJpZ1RvdXIgZnJvbSAnLi4vLi4vdHJpZ1RvdXIuanMnO1xyXG5pbXBvcnQgVHJpZ1RvdXJTdHJpbmdzIGZyb20gJy4uLy4uL1RyaWdUb3VyU3RyaW5ncy5qcyc7XHJcbmltcG9ydCBUcmlnVG91ck1hdGhTdHJpbmdzIGZyb20gJy4uL1RyaWdUb3VyTWF0aFN0cmluZ3MuanMnO1xyXG5pbXBvcnQgVHJpZ0Z1bmN0aW9uTGFiZWxUZXh0IGZyb20gJy4vVHJpZ0Z1bmN0aW9uTGFiZWxUZXh0LmpzJztcclxuaW1wb3J0IFRyaWdUb3VyQ29sb3JzIGZyb20gJy4vVHJpZ1RvdXJDb2xvcnMuanMnO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IExJTkVfQ09MT1IgPSBUcmlnVG91ckNvbG9ycy5MSU5FX0NPTE9SO1xyXG5jb25zdCBESVNQTEFZX0ZPTlRfU01BTEwgPSBuZXcgUGhldEZvbnQoIDE4ICk7XHJcbmNvbnN0IFRFWFRfQ09MT1IgPSBUcmlnVG91ckNvbG9ycy5URVhUX0NPTE9SO1xyXG5jb25zdCBESVNQTEFZX0ZPTlRfSVRBTElDID0gbmV3IFBoZXRGb250KCB7IHNpemU6IDIwLCBzdHlsZTogJ2l0YWxpYycgfSApO1xyXG5jb25zdCBESVNQTEFZX0ZPTlRfU01BTExfSVRBTElDID0gbmV3IFBoZXRGb250KCB7IHNpemU6IDE4LCBmYW1pbHk6ICdBcmlhbCcsIHN0eWxlOiAnaXRhbGljJyB9ICk7XHJcblxyXG5jb25zdCBjb3NTdHJpbmcgPSBUcmlnVG91clN0cmluZ3MuY29zO1xyXG5jb25zdCBudW1iZXJQaVBhdHRlcm5TdHJpbmcgPSBUcmlnVG91clN0cmluZ3MubnVtYmVyUGlQYXR0ZXJuO1xyXG5jb25zdCBzaW5TdHJpbmcgPSBUcmlnVG91clN0cmluZ3Muc2luO1xyXG5jb25zdCB0YW5TdHJpbmcgPSBUcmlnVG91clN0cmluZ3MudGFuO1xyXG5cclxuY2xhc3MgVHJpZ1RvdXJHcmFwaEF4ZXNOb2RlIGV4dGVuZHMgTm9kZSB7XHJcbiAgLyoqXHJcbiAgICogQ29uc3RydWN0b3IuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGhcclxuICAgKiBAcGFyYW0ge251bWJlcn0gd2F2ZWxlbmd0aFxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBudW1iZXJPZldhdmVsZW5ndGhzXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGFtcGxpdHVkZVxyXG4gICAqIEBwYXJhbSB7Vmlld1Byb3BlcnRpZXN9IHZpZXdQcm9wZXJ0aWVzXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIHdpZHRoLCB3YXZlbGVuZ3RoLCBudW1iZXJPZldhdmVsZW5ndGhzLCBhbXBsaXR1ZGUsIHZpZXdQcm9wZXJ0aWVzICkge1xyXG5cclxuICAgIHN1cGVyKCk7XHJcblxyXG4gICAgLy8gQnJlYWsgaW50byBsYXllcnMgYmVjYXVzZSB3ZSBuZWVkIHRvIHRvIGxheWVyIHRoaW5ncyBvbiB0aGUgZ3JhcGggdmlldyBpbiBvcmRlcjogQXhpcywgcGxvdHMsIGxhYmVsc1xyXG4gICAgdGhpcy5heGlzTm9kZSA9IG5ldyBOb2RlKCk7IC8vIEBwdWJsaWMgKHJlYWQtb25seSlcclxuICAgIHRoaXMubGFiZWxzTm9kZSA9IG5ldyBOb2RlKCk7IC8vIEBwdWJsaWMgKHJlYWQtb25seSlcclxuXHJcbiAgICAvLyBkcmF3IHgtYXhpcyBhbmQgeS1heGlzLCByZXByZXNlbnRlZCBieSBBcnJvd05vZGVzXHJcbiAgICBjb25zdCB4QXhpc0xlbmd0aCA9IHdpZHRoO1xyXG4gICAgY29uc3QgeEF4aXMgPSBuZXcgQXJyb3dOb2RlKCAteEF4aXNMZW5ndGggLyAyLCAwLCB4QXhpc0xlbmd0aCAvIDIsIDAsIHtcclxuICAgICAgdGFpbFdpZHRoOiAwLjMsXHJcbiAgICAgIGZpbGw6IExJTkVfQ09MT1IsXHJcbiAgICAgIGhlYWRIZWlnaHQ6IDEyLFxyXG4gICAgICBoZWFkV2lkdGg6IDhcclxuICAgIH0gKTtcclxuICAgIGNvbnN0IHlBeGlzID0gbmV3IEFycm93Tm9kZSggMCwgMS4xOCAqIGFtcGxpdHVkZSwgMCwgLTEuMyAqIGFtcGxpdHVkZSwge1xyXG4gICAgICB0YWlsV2lkdGg6IDAuMyxcclxuICAgICAgZmlsbDogTElORV9DT0xPUixcclxuICAgICAgaGVhZEhlaWdodDogMTIsXHJcbiAgICAgIGhlYWRXaWR0aDogOFxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIGRyYXcgdGljIG1hcmtzIGZvciB4IGFuZCB5IGF4ZXNcclxuICAgIGNvbnN0IHRpY0xlbmd0aCA9IDU7XHJcbiAgICBjb25zdCB4VGljcyA9IG5ldyBOb2RlKCk7XHJcbiAgICBjb25zdCB5VGljcyA9IG5ldyBOb2RlKCk7XHJcbiAgICBsZXQgeFRpYztcclxuICAgIGxldCB5VGljO1xyXG4gICAgZm9yICggbGV0IGkgPSAtMiAqIG51bWJlck9mV2F2ZWxlbmd0aHM7IGkgPD0gMiAqIG51bWJlck9mV2F2ZWxlbmd0aHM7IGkrKyApIHtcclxuICAgICAgeFRpYyA9IG5ldyBMaW5lKCAwLCB0aWNMZW5ndGgsIDAsIC10aWNMZW5ndGgsIHsgbGluZVdpZHRoOiAyLCBzdHJva2U6IExJTkVfQ09MT1IgfSApO1xyXG4gICAgICB4VGljLnggPSBpICogd2F2ZWxlbmd0aCAvIDQ7XHJcbiAgICAgIHhUaWNzLmFkZENoaWxkKCB4VGljICk7XHJcbiAgICB9XHJcbiAgICBmb3IgKCBsZXQgaSA9IC0xOyBpIDw9IDE7IGkgKz0gMiApIHtcclxuICAgICAgeVRpYyA9IG5ldyBMaW5lKCAtdGljTGVuZ3RoLCAwLCB0aWNMZW5ndGgsIDAsIHsgbGluZVdpZHRoOiAyLCBzdHJva2U6IExJTkVfQ09MT1IgfSApO1xyXG4gICAgICB5VGljLnkgPSBpICogYW1wbGl0dWRlO1xyXG4gICAgICB5VGljcy5hZGRDaGlsZCggeVRpYyApO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY2hpbGRyZW4gPSBbIHhBeGlzLCB5QXhpcyBdO1xyXG5cclxuICAgIC8vIGRyYXcgMS8tMSBsYWJlbHMgb24geS1heGlzXHJcbiAgICBjb25zdCBvbmVzTm9kZSA9IG5ldyBOb2RlKCk7IC8vIEBwdWJsaWMgKHJlYWQtb25seSlcclxuICAgIGxldCBmb250SW5mbyA9IHsgZm9udDogRElTUExBWV9GT05UX1NNQUxMLCBmaWxsOiBURVhUX0NPTE9SIH07XHJcbiAgICBjb25zdCBvbmVMYWJlbCA9IG5ldyBUZXh0KCBUcmlnVG91ck1hdGhTdHJpbmdzLk9ORV9TVFJJTkcsIGZvbnRJbmZvICk7XHJcbiAgICBjb25zdCBtaW51c09uZUxhYmVsID0gbmV3IFRleHQoIFRyaWdUb3VyTWF0aFN0cmluZ3MuTUlOVVNfT05FX1NUUklORywgZm9udEluZm8gKTtcclxuICAgIG9uZXNOb2RlLmNoaWxkcmVuID0gWyBvbmVMYWJlbCwgbWludXNPbmVMYWJlbCBdO1xyXG4gICAgY29uc3QgeE9mZnNldCA9IDg7XHJcbiAgICBvbmVMYWJlbC5sZWZ0ID0geE9mZnNldDtcclxuICAgIG1pbnVzT25lTGFiZWwucmlnaHQgPSAteE9mZnNldDtcclxuICAgIG9uZUxhYmVsLmNlbnRlclkgPSAtYW1wbGl0dWRlIC0gNTtcclxuICAgIG1pbnVzT25lTGFiZWwuY2VudGVyWSA9IGFtcGxpdHVkZSArIDU7XHJcblxyXG4gICAgLy8gZHJhdyB0aWMgbWFyayBsYWJlbHMgaW4gZGVncmVlc1xyXG4gICAgY29uc3QgdGlja01hcmtMYWJlbHNJbkRlZ3JlZXMgPSBuZXcgTm9kZSgpO1xyXG4gICAgbGV0IGxhYmVsO1xyXG4gICAgZm9yICggbGV0IGogPSAtbnVtYmVyT2ZXYXZlbGVuZ3RoczsgaiA8PSBudW1iZXJPZldhdmVsZW5ndGhzOyBqKysgKSB7XHJcbiAgICAgIGxldCBkZWdyZWVzID0gVXRpbHMudG9GaXhlZCggMTgwICogaiwgMCApO1xyXG4gICAgICBkZWdyZWVzID0gZGVncmVlcy50b1N0cmluZygpO1xyXG4gICAgICBsYWJlbCA9IG5ldyBUZXh0KCBgJHtkZWdyZWVzfVxcdTAwQjBgLCB7IGZvbnQ6IERJU1BMQVlfRk9OVF9TTUFMTCB9ICk7XHJcbiAgICAgIGxhYmVsLmNlbnRlclggPSBqICogd2F2ZWxlbmd0aCAvIDI7XHJcbiAgICAgIGxhYmVsLnRvcCA9IHhBeGlzLmJvdHRvbTtcclxuICAgICAgaWYgKCBqICE9PSAwICkge1xyXG4gICAgICAgIHRpY2tNYXJrTGFiZWxzSW5EZWdyZWVzLmFkZENoaWxkKCBsYWJlbCApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gdGljIG1hcmsgbGFiZWxzIGluIHJhZGlhbnNcclxuICAgIGNvbnN0IHRpY2tNYXJrTGFiZWxzSW5SYWRpYW5zID0gbmV3IE5vZGUoKTtcclxuICAgIGxldCBsYWJlbFN0cmluZyA9ICcnO1xyXG4gICAgY29uc3QgcGkgPSBNYXRoU3ltYm9scy5QSTtcclxuICAgIGNvbnN0IGxhYmVsU3RyaW5ncyA9IFtcclxuICAgICAgU3RyaW5nVXRpbHMuZm9ybWF0KCBudW1iZXJQaVBhdHRlcm5TdHJpbmcsICctNCcsIHBpICksXHJcbiAgICAgIFN0cmluZ1V0aWxzLmZvcm1hdCggbnVtYmVyUGlQYXR0ZXJuU3RyaW5nLCAnLTMnLCBwaSApLFxyXG4gICAgICBTdHJpbmdVdGlscy5mb3JtYXQoIG51bWJlclBpUGF0dGVyblN0cmluZywgJy0yJywgcGkgKSxcclxuICAgICAgU3RyaW5nVXRpbHMuZm9ybWF0KCBudW1iZXJQaVBhdHRlcm5TdHJpbmcsICctJywgcGkgKSxcclxuICAgICAgcGksXHJcbiAgICAgIFN0cmluZ1V0aWxzLmZvcm1hdCggbnVtYmVyUGlQYXR0ZXJuU3RyaW5nLCAnMicsIHBpICksXHJcbiAgICAgIFN0cmluZ1V0aWxzLmZvcm1hdCggbnVtYmVyUGlQYXR0ZXJuU3RyaW5nLCAnMycsIHBpICksXHJcbiAgICAgIFN0cmluZ1V0aWxzLmZvcm1hdCggbnVtYmVyUGlQYXR0ZXJuU3RyaW5nLCAnNCcsIHBpIClcclxuICAgIF07XHJcbiAgICBjb25zdCB4UG9zaXRpb25zID0gWyAtNCwgLTMsIC0yLCAtMSwgMSwgMiwgMywgNCBdO1xyXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgeFBvc2l0aW9ucy5sZW5ndGg7IGkrKyApIHtcclxuICAgICAgbGFiZWxTdHJpbmcgPSBsYWJlbFN0cmluZ3NbIGkgXTtcclxuICAgICAgbGFiZWwgPSBuZXcgVGV4dCggbGFiZWxTdHJpbmcsIHsgZm9udDogRElTUExBWV9GT05UX1NNQUxMX0lUQUxJQywgZmlsbDogVEVYVF9DT0xPUiB9ICk7XHJcbiAgICAgIGxhYmVsLmNlbnRlclggPSB4UG9zaXRpb25zWyBpIF0gKiB3YXZlbGVuZ3RoIC8gMjtcclxuICAgICAgbGFiZWwudG9wID0geEF4aXMuYm90dG9tO1xyXG4gICAgICB0aWNrTWFya0xhYmVsc0luUmFkaWFucy5hZGRDaGlsZCggbGFiZWwgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyB2aXNpYmlsaXR5IHNldCBieSBMYWJlbHMgY29udHJvbCBpbiBDb250cm9sIFBhbmVsIGFuZCBieSBkZWdzL3JhZHMgUkJzIGluIFJlYWRvdXQgUGFuZWxcclxuICAgIG9uZXNOb2RlLnZpc2libGUgPSBmYWxzZTtcclxuICAgIHRpY2tNYXJrTGFiZWxzSW5EZWdyZWVzLnZpc2libGUgPSBmYWxzZTtcclxuICAgIHRpY2tNYXJrTGFiZWxzSW5SYWRpYW5zLnZpc2libGUgPSBmYWxzZTtcclxuXHJcbiAgICAvLyBBeGVzIGxhYmVsc1xyXG4gICAgY29uc3QgbWF4VGhldGFXaWR0aCA9IHRpY0xlbmd0aCAqIDM7IC8vIHJlc3RyaWN0IGZvciBpMThuXHJcbiAgICBmb250SW5mbyA9IHsgZm9udDogRElTUExBWV9GT05UX0lUQUxJQywgZmlsbDogVEVYVF9DT0xPUiwgbWF4V2lkdGg6IG1heFRoZXRhV2lkdGggfTtcclxuICAgIGNvbnN0IHRoZXRhTGFiZWwgPSBuZXcgVGV4dCggTWF0aFN5bWJvbHMuVEhFVEEsIGZvbnRJbmZvICk7XHJcbiAgICB0aGV0YUxhYmVsLmxlZnQgPSB0aGlzLnJpZ2h0ICsgNTtcclxuICAgIHRoZXRhTGFiZWwuY2VudGVyWSA9IHhBeGlzLmNlbnRlclk7XHJcbiAgICBjb25zdCBtYXhUcmlnTGFiZWxXaWR0aCA9IHhBeGlzLndpZHRoIC8gNDtcclxuICAgIGNvbnN0IGNvc1RoZXRhTGFiZWwgPSBuZXcgVHJpZ0Z1bmN0aW9uTGFiZWxUZXh0KCBjb3NTdHJpbmcsIHsgbWF4V2lkdGg6IG1heFRyaWdMYWJlbFdpZHRoIH0gKTtcclxuICAgIGNvbnN0IHNpblRoZXRhTGFiZWwgPSBuZXcgVHJpZ0Z1bmN0aW9uTGFiZWxUZXh0KCBzaW5TdHJpbmcsIHsgbWF4V2lkdGg6IG1heFRyaWdMYWJlbFdpZHRoIH0gKTtcclxuICAgIGNvbnN0IHRhblRoZXRhTGFiZWwgPSBuZXcgVHJpZ0Z1bmN0aW9uTGFiZWxUZXh0KCB0YW5TdHJpbmcsIHsgbWF4V2lkdGg6IG1heFRyaWdMYWJlbFdpZHRoIH0gKTtcclxuICAgIGNvc1RoZXRhTGFiZWwucmlnaHQgPSBzaW5UaGV0YUxhYmVsLnJpZ2h0ID0gdGFuVGhldGFMYWJlbC5yaWdodCA9IHlBeGlzLmxlZnQgLSAxMDtcclxuICAgIGNvc1RoZXRhTGFiZWwudG9wID0gc2luVGhldGFMYWJlbC50b3AgPSB0YW5UaGV0YUxhYmVsLnRvcCA9IHlBeGlzLnRvcDtcclxuXHJcbiAgICB0aGlzLmF4aXNOb2RlLmNoaWxkcmVuID0gWyB4QXhpcywgeUF4aXMsIHRoZXRhTGFiZWwsIGNvc1RoZXRhTGFiZWwsIHNpblRoZXRhTGFiZWwsIHRhblRoZXRhTGFiZWwgXTtcclxuICAgIHRoaXMubGFiZWxzTm9kZS5jaGlsZHJlbiA9IFsgb25lc05vZGUsIHRpY2tNYXJrTGFiZWxzSW5EZWdyZWVzLCB0aWNrTWFya0xhYmVsc0luUmFkaWFucywgeFRpY3MsIHlUaWNzIF07XHJcblxyXG4gICAgLy8gc3luYyB2aXNpYmlsaXR5IHdpdGggdmlldyBwcm9wZXJ0aWVzXHJcbiAgICB2aWV3UHJvcGVydGllcy5ncmFwaFByb3BlcnR5LmxpbmsoIGdyYXBoID0+IHtcclxuICAgICAgc2luVGhldGFMYWJlbC52aXNpYmxlID0gKCBncmFwaCA9PT0gJ3NpbicgKTtcclxuICAgICAgY29zVGhldGFMYWJlbC52aXNpYmxlID0gKCBncmFwaCA9PT0gJ2NvcycgKTtcclxuICAgICAgdGFuVGhldGFMYWJlbC52aXNpYmxlID0gKCBncmFwaCA9PT0gJ3RhbicgKTtcclxuICAgIH0gKTtcclxuXHJcbiAgICB2aWV3UHJvcGVydGllcy5sYWJlbHNWaXNpYmxlUHJvcGVydHkubGluayggaXNWaXNpYmxlID0+IHtcclxuICAgICAgb25lc05vZGUudmlzaWJsZSA9IGlzVmlzaWJsZTtcclxuICAgICAgaWYgKCBpc1Zpc2libGUgKSB7XHJcbiAgICAgICAgdGlja01hcmtMYWJlbHNJblJhZGlhbnMudmlzaWJsZSA9IHZpZXdQcm9wZXJ0aWVzLmFuZ2xlVW5pdHNQcm9wZXJ0eS52YWx1ZSA9PT0gJ3JhZGlhbnMnO1xyXG4gICAgICAgIHRpY2tNYXJrTGFiZWxzSW5EZWdyZWVzLnZpc2libGUgPSB2aWV3UHJvcGVydGllcy5hbmdsZVVuaXRzUHJvcGVydHkudmFsdWUgPT09ICdkZWdyZWVzJztcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICB0aWNrTWFya0xhYmVsc0luUmFkaWFucy52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgdGlja01hcmtMYWJlbHNJbkRlZ3JlZXMudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9ICk7XHJcblxyXG4gICAgdmlld1Byb3BlcnRpZXMuYW5nbGVVbml0c1Byb3BlcnR5LmxpbmsoIGFuZ2xlVW5pdHMgPT4ge1xyXG4gICAgICBpZiAoIHZpZXdQcm9wZXJ0aWVzLmxhYmVsc1Zpc2libGVQcm9wZXJ0eS52YWx1ZSApIHtcclxuICAgICAgICB0aWNrTWFya0xhYmVsc0luUmFkaWFucy52aXNpYmxlID0gKCBhbmdsZVVuaXRzID09PSAncmFkaWFucycgKTtcclxuICAgICAgICB0aWNrTWFya0xhYmVsc0luRGVncmVlcy52aXNpYmxlID0gKCBhbmdsZVVuaXRzICE9PSAncmFkaWFucycgKTtcclxuICAgICAgfVxyXG4gICAgfSApO1xyXG5cclxuICB9XHJcbn1cclxuXHJcbnRyaWdUb3VyLnJlZ2lzdGVyKCAnVHJpZ1RvdXJHcmFwaEF4ZXNOb2RlJywgVHJpZ1RvdXJHcmFwaEF4ZXNOb2RlICk7XHJcbmV4cG9ydCBkZWZhdWx0IFRyaWdUb3VyR3JhcGhBeGVzTm9kZTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsS0FBSyxNQUFNLDZCQUE2QjtBQUMvQyxPQUFPQyxXQUFXLE1BQU0sK0NBQStDO0FBQ3ZFLE9BQU9DLFNBQVMsTUFBTSwwQ0FBMEM7QUFDaEUsT0FBT0MsV0FBVyxNQUFNLDRDQUE0QztBQUNwRSxPQUFPQyxRQUFRLE1BQU0seUNBQXlDO0FBQzlELFNBQVNDLElBQUksRUFBRUMsSUFBSSxFQUFFQyxJQUFJLFFBQVEsbUNBQW1DO0FBQ3BFLE9BQU9DLFFBQVEsTUFBTSxtQkFBbUI7QUFDeEMsT0FBT0MsZUFBZSxNQUFNLDBCQUEwQjtBQUN0RCxPQUFPQyxt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