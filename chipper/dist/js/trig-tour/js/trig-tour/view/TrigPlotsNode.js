// Copyright 2015-2022, University of Colorado Boulder

/**
 * Handles drawing the shapes and creating the paths for the trig plots on the graph of Trig Tour.
 *
 * @author Michael Dubson (PhET developer) on 6/3/2015.
 * @author Jesse Greenberg
 */

import Utils from '../../../../dot/js/Utils.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import { Shape } from '../../../../kite/js/imports.js';
import { Node, Path } from '../../../../scenery/js/imports.js';
import trigTour from '../../trigTour.js';
import TriangleNode from './TriangleNode.js';
import TrigTourColors from './TrigTourColors.js';

// constants
const COS_COLOR = TrigTourColors.COS_COLOR;
const SIN_COLOR = TrigTourColors.SIN_COLOR;
const TAN_COLOR = TrigTourColors.TAN_COLOR;
class TrigPlotsNode extends Node {
  /**
   * Constructor.
   *
   * @param {number} wavelength
   * @param {number} numberOfWavelengths
   * @param {number} amplitude
   * @param {Property.<string>} graphProperty - which graph is visible, one of 'cos', 'sin', or 'tan'
   */
  constructor(wavelength, numberOfWavelengths, amplitude, graphProperty) {
    super();
    const cosShape = new Shape();
    const sinShape = new Shape();
    const tanShape = new Shape();

    // shape origins and calculate number of points
    let dx = wavelength / 100;
    let numberOfPoints = (numberOfWavelengths + 0.08) * wavelength / dx;
    const xOrigin = 0;
    const yOrigin = 0;
    let xPos = xOrigin - numberOfPoints * dx / 2;
    sinShape.moveTo(xPos, yOrigin - amplitude * Math.sin(2 * Math.PI * (xPos - xOrigin) / wavelength));
    cosShape.moveTo(xPos, yOrigin - amplitude * Math.cos(2 * Math.PI * (xPos - xOrigin) / wavelength));
    tanShape.moveTo(xPos, yOrigin - amplitude * Math.tan(2 * Math.PI * (xPos - xOrigin) / wavelength));

    // draw sin and cos curves
    for (let i = 0; i < numberOfPoints; i++) {
      xPos += dx;
      sinShape.lineTo(xPos, yOrigin - amplitude * Math.sin(2 * Math.PI * (xPos - xOrigin) / wavelength));
      cosShape.lineTo(xPos, yOrigin - amplitude * Math.cos(2 * Math.PI * (xPos - xOrigin) / wavelength));
    }

    // draw tangent curve - cut off at upper and lower limits, need more resolution due to steep slope
    xPos = xOrigin - numberOfPoints * dx / 2; //start at left edge
    let tanValue = Math.tan(2 * Math.PI * (xPos - xOrigin) / wavelength);
    dx = wavelength / 600; //x-distance between points on curve
    numberOfPoints = (numberOfWavelengths + 0.08) * wavelength / dx;
    const maxTanValue = 1.15;
    const minTanValue = -1.0;
    let yPos;
    for (let i = 0; i < numberOfPoints; i++) {
      tanValue = Math.tan(2 * Math.PI * (xPos - xOrigin) / wavelength);
      yPos = yOrigin - amplitude * tanValue;
      if (tanValue <= maxTanValue && tanValue > minTanValue) {
        tanShape.lineTo(xPos, yPos);
      } else {
        tanShape.moveTo(xPos, yPos);
      }
      xPos += dx;
    }
    const sinPath = new Path(sinShape, {
      stroke: SIN_COLOR,
      lineWidth: 3
    });
    const cosPath = new Path(cosShape, {
      stroke: COS_COLOR,
      lineWidth: 3
    });
    const tanPath = new Path(tanShape, {
      stroke: TAN_COLOR,
      lineWidth: 3
    });

    // Add TriangleNode arrow heads at ends of curves
    const pi = Math.PI;
    const leftEnd = -(numberOfWavelengths + 0.08) * wavelength / 2;
    const rightEnd = (numberOfWavelengths + 0.08) * wavelength / 2;
    const arrowHeadLength = 15;
    const arrowHeadWidth = 8;

    // Place arrow heads on left and right ends of sin curve
    let slopeLeft = amplitude * 2 * pi / wavelength * Math.cos(2 * pi * leftEnd / wavelength);
    let slopeRight = amplitude * 2 * pi / wavelength * Math.cos(2 * pi * rightEnd / wavelength);
    let angleLeft = Utils.toDegrees(Math.atan(slopeLeft));
    let angleRight = Utils.toDegrees(Math.atan(slopeRight));
    const sinArrowLeft = new TriangleNode(arrowHeadLength, arrowHeadWidth, SIN_COLOR, -angleLeft + 180);
    const sinArrowRight = new TriangleNode(arrowHeadLength, arrowHeadWidth, SIN_COLOR, -angleRight);
    sinArrowLeft.x = leftEnd;
    sinArrowRight.x = rightEnd;
    sinArrowLeft.y = -amplitude * Math.sin(2 * pi * leftEnd / wavelength);
    sinArrowRight.y = -amplitude * Math.sin(2 * pi * rightEnd / wavelength);
    sinPath.children = [sinArrowLeft, sinArrowRight];

    // Place arrow heads on ends of cos curve
    slopeLeft = amplitude * 2 * pi / wavelength * Math.sin(2 * pi * leftEnd / wavelength);
    slopeRight = amplitude * 2 * pi / wavelength * Math.sin(2 * pi * rightEnd / wavelength);
    angleLeft = Utils.toDegrees(Math.atan(slopeLeft));
    angleRight = Utils.toDegrees(Math.atan(slopeRight));
    const cosArrowLeft = new TriangleNode(arrowHeadLength, arrowHeadWidth, COS_COLOR, angleLeft + 180);
    const cosArrowRight = new TriangleNode(arrowHeadLength, arrowHeadWidth, COS_COLOR, angleRight);
    cosArrowLeft.x = leftEnd;
    cosArrowRight.x = rightEnd;
    cosArrowLeft.y = -amplitude * Math.cos(2 * pi * leftEnd / wavelength);
    cosArrowRight.y = -amplitude * Math.cos(2 * pi * rightEnd / wavelength);
    cosPath.children = [cosArrowLeft, cosArrowRight];

    //Place arrow heads on ends of all tan curve segments. This is pretty tricky
    const arrowHeads = []; //array of arrow heads

    // x and y coordinates of ends of the 'central' tan segment, in view coordinates.
    // 'Central' segment is the one centered on the origin.
    const xTanMax = Math.atan(maxTanValue) * wavelength / (2 * pi);
    const xTanMin = Math.atan(minTanValue) * wavelength / (2 * pi);
    let xPosMax;
    let xPosMin;
    let yPosMax;
    let yPosMin;
    for (let i = -numberOfWavelengths; i <= numberOfWavelengths; i++) {
      xPosMax = i * wavelength / 2 + xTanMax;
      xPosMin = i * wavelength / 2 + xTanMin;
      yPosMax = -Math.tan(xPosMax * 2 * pi / wavelength) * amplitude;
      yPosMin = -Math.tan(xPosMin * 2 * pi / wavelength) * amplitude;
      arrowHeads.push(new Vector2(xPosMax, yPosMax));
      arrowHeads.push(new Vector2(xPosMin, yPosMin));
    }

    // The left and right end arrow heads are special cases.
    // Remove extraneous left- and right-end arrow heads created in previous for-loop
    // and replace with correct arrow heads
    const yLeftEnd = -Math.tan(leftEnd * 2 * pi / wavelength) * amplitude;
    const yRightEnd = -Math.tan(rightEnd * 2 * pi / wavelength) * amplitude;
    arrowHeads.splice(arrowHeads.length - 2, 1, new Vector2(rightEnd, yRightEnd));
    arrowHeads.splice(1, 1, new Vector2(leftEnd, yLeftEnd));
    let triangleNode;
    let rotationAngle;
    for (let i = 0; i < arrowHeads.length; i++) {
      const xPix = arrowHeads[i].x;
      const yPix = arrowHeads[i].y;
      const xTan = xPix * 2 * pi / wavelength;

      // Derivative of tan is 1 + tan^2
      const tanSlope = amplitude * 2 * pi / wavelength * (1 + Math.tan(xTan) * Math.tan(xTan));
      rotationAngle = -Utils.toDegrees(Math.atan(tanSlope));
      if (i % 2 !== 0) {
        rotationAngle += 180;
      }
      triangleNode = new TriangleNode(arrowHeadLength, arrowHeadWidth, TAN_COLOR, rotationAngle);
      tanPath.addChild(triangleNode);
      triangleNode.x = xPix;
      triangleNode.y = yPix + 1;
    }

    // finally add the trig plots as children of this node
    this.children = [cosPath, sinPath, tanPath];

    // link plot visibility with model view property
    graphProperty.link(visibleGraph => {
      cosPath.visible = visibleGraph === 'cos';
      sinPath.visible = visibleGraph === 'sin';
      tanPath.visible = visibleGraph === 'tan';
    });
  }
}
trigTour.register('TrigPlotsNode', TrigPlotsNode);
export default TrigPlotsNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVdGlscyIsIlZlY3RvcjIiLCJTaGFwZSIsIk5vZGUiLCJQYXRoIiwidHJpZ1RvdXIiLCJUcmlhbmdsZU5vZGUiLCJUcmlnVG91ckNvbG9ycyIsIkNPU19DT0xPUiIsIlNJTl9DT0xPUiIsIlRBTl9DT0xPUiIsIlRyaWdQbG90c05vZGUiLCJjb25zdHJ1Y3RvciIsIndhdmVsZW5ndGgiLCJudW1iZXJPZldhdmVsZW5ndGhzIiwiYW1wbGl0dWRlIiwiZ3JhcGhQcm9wZXJ0eSIsImNvc1NoYXBlIiwic2luU2hhcGUiLCJ0YW5TaGFwZSIsImR4IiwibnVtYmVyT2ZQb2ludHMiLCJ4T3JpZ2luIiwieU9yaWdpbiIsInhQb3MiLCJtb3ZlVG8iLCJNYXRoIiwic2luIiwiUEkiLCJjb3MiLCJ0YW4iLCJpIiwibGluZVRvIiwidGFuVmFsdWUiLCJtYXhUYW5WYWx1ZSIsIm1pblRhblZhbHVlIiwieVBvcyIsInNpblBhdGgiLCJzdHJva2UiLCJsaW5lV2lkdGgiLCJjb3NQYXRoIiwidGFuUGF0aCIsInBpIiwibGVmdEVuZCIsInJpZ2h0RW5kIiwiYXJyb3dIZWFkTGVuZ3RoIiwiYXJyb3dIZWFkV2lkdGgiLCJzbG9wZUxlZnQiLCJzbG9wZVJpZ2h0IiwiYW5nbGVMZWZ0IiwidG9EZWdyZWVzIiwiYXRhbiIsImFuZ2xlUmlnaHQiLCJzaW5BcnJvd0xlZnQiLCJzaW5BcnJvd1JpZ2h0IiwieCIsInkiLCJjaGlsZHJlbiIsImNvc0Fycm93TGVmdCIsImNvc0Fycm93UmlnaHQiLCJhcnJvd0hlYWRzIiwieFRhbk1heCIsInhUYW5NaW4iLCJ4UG9zTWF4IiwieFBvc01pbiIsInlQb3NNYXgiLCJ5UG9zTWluIiwicHVzaCIsInlMZWZ0RW5kIiwieVJpZ2h0RW5kIiwic3BsaWNlIiwibGVuZ3RoIiwidHJpYW5nbGVOb2RlIiwicm90YXRpb25BbmdsZSIsInhQaXgiLCJ5UGl4IiwieFRhbiIsInRhblNsb3BlIiwiYWRkQ2hpbGQiLCJsaW5rIiwidmlzaWJsZUdyYXBoIiwidmlzaWJsZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiVHJpZ1Bsb3RzTm9kZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNS0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBIYW5kbGVzIGRyYXdpbmcgdGhlIHNoYXBlcyBhbmQgY3JlYXRpbmcgdGhlIHBhdGhzIGZvciB0aGUgdHJpZyBwbG90cyBvbiB0aGUgZ3JhcGggb2YgVHJpZyBUb3VyLlxyXG4gKlxyXG4gKiBAYXV0aG9yIE1pY2hhZWwgRHVic29uIChQaEVUIGRldmVsb3Blcikgb24gNi8zLzIwMTUuXHJcbiAqIEBhdXRob3IgSmVzc2UgR3JlZW5iZXJnXHJcbiAqL1xyXG5cclxuaW1wb3J0IFV0aWxzIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9VdGlscy5qcyc7XHJcbmltcG9ydCBWZWN0b3IyIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9WZWN0b3IyLmpzJztcclxuaW1wb3J0IHsgU2hhcGUgfSBmcm9tICcuLi8uLi8uLi8uLi9raXRlL2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgeyBOb2RlLCBQYXRoIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IHRyaWdUb3VyIGZyb20gJy4uLy4uL3RyaWdUb3VyLmpzJztcclxuaW1wb3J0IFRyaWFuZ2xlTm9kZSBmcm9tICcuL1RyaWFuZ2xlTm9kZS5qcyc7XHJcbmltcG9ydCBUcmlnVG91ckNvbG9ycyBmcm9tICcuL1RyaWdUb3VyQ29sb3JzLmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBDT1NfQ09MT1IgPSBUcmlnVG91ckNvbG9ycy5DT1NfQ09MT1I7XHJcbmNvbnN0IFNJTl9DT0xPUiA9IFRyaWdUb3VyQ29sb3JzLlNJTl9DT0xPUjtcclxuY29uc3QgVEFOX0NPTE9SID0gVHJpZ1RvdXJDb2xvcnMuVEFOX0NPTE9SO1xyXG5cclxuY2xhc3MgVHJpZ1Bsb3RzTm9kZSBleHRlbmRzIE5vZGUge1xyXG5cclxuICAvKipcclxuICAgKiBDb25zdHJ1Y3Rvci5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB3YXZlbGVuZ3RoXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IG51bWJlck9mV2F2ZWxlbmd0aHNcclxuICAgKiBAcGFyYW0ge251bWJlcn0gYW1wbGl0dWRlXHJcbiAgICogQHBhcmFtIHtQcm9wZXJ0eS48c3RyaW5nPn0gZ3JhcGhQcm9wZXJ0eSAtIHdoaWNoIGdyYXBoIGlzIHZpc2libGUsIG9uZSBvZiAnY29zJywgJ3NpbicsIG9yICd0YW4nXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIHdhdmVsZW5ndGgsIG51bWJlck9mV2F2ZWxlbmd0aHMsIGFtcGxpdHVkZSwgZ3JhcGhQcm9wZXJ0eSApIHtcclxuXHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIGNvbnN0IGNvc1NoYXBlID0gbmV3IFNoYXBlKCk7XHJcbiAgICBjb25zdCBzaW5TaGFwZSA9IG5ldyBTaGFwZSgpO1xyXG4gICAgY29uc3QgdGFuU2hhcGUgPSBuZXcgU2hhcGUoKTtcclxuXHJcbiAgICAvLyBzaGFwZSBvcmlnaW5zIGFuZCBjYWxjdWxhdGUgbnVtYmVyIG9mIHBvaW50c1xyXG4gICAgbGV0IGR4ID0gd2F2ZWxlbmd0aCAvIDEwMDtcclxuICAgIGxldCBudW1iZXJPZlBvaW50cyA9ICggbnVtYmVyT2ZXYXZlbGVuZ3RocyArIDAuMDggKSAqIHdhdmVsZW5ndGggLyBkeDtcclxuICAgIGNvbnN0IHhPcmlnaW4gPSAwO1xyXG4gICAgY29uc3QgeU9yaWdpbiA9IDA7XHJcbiAgICBsZXQgeFBvcyA9IHhPcmlnaW4gLSBudW1iZXJPZlBvaW50cyAqIGR4IC8gMjtcclxuICAgIHNpblNoYXBlLm1vdmVUbyggeFBvcywgeU9yaWdpbiAtIGFtcGxpdHVkZSAqIE1hdGguc2luKCAyICogTWF0aC5QSSAqICggeFBvcyAtIHhPcmlnaW4gKSAvIHdhdmVsZW5ndGggKSApO1xyXG4gICAgY29zU2hhcGUubW92ZVRvKCB4UG9zLCB5T3JpZ2luIC0gYW1wbGl0dWRlICogTWF0aC5jb3MoIDIgKiBNYXRoLlBJICogKCB4UG9zIC0geE9yaWdpbiApIC8gd2F2ZWxlbmd0aCApICk7XHJcbiAgICB0YW5TaGFwZS5tb3ZlVG8oIHhQb3MsIHlPcmlnaW4gLSBhbXBsaXR1ZGUgKiBNYXRoLnRhbiggMiAqIE1hdGguUEkgKiAoIHhQb3MgLSB4T3JpZ2luICkgLyB3YXZlbGVuZ3RoICkgKTtcclxuXHJcbiAgICAvLyBkcmF3IHNpbiBhbmQgY29zIGN1cnZlc1xyXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgbnVtYmVyT2ZQb2ludHM7IGkrKyApIHtcclxuICAgICAgeFBvcyArPSBkeDtcclxuICAgICAgc2luU2hhcGUubGluZVRvKCB4UG9zLCB5T3JpZ2luIC0gYW1wbGl0dWRlICogTWF0aC5zaW4oIDIgKiBNYXRoLlBJICogKCB4UG9zIC0geE9yaWdpbiApIC8gd2F2ZWxlbmd0aCApICk7XHJcbiAgICAgIGNvc1NoYXBlLmxpbmVUbyggeFBvcywgeU9yaWdpbiAtIGFtcGxpdHVkZSAqIE1hdGguY29zKCAyICogTWF0aC5QSSAqICggeFBvcyAtIHhPcmlnaW4gKSAvIHdhdmVsZW5ndGggKSApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGRyYXcgdGFuZ2VudCBjdXJ2ZSAtIGN1dCBvZmYgYXQgdXBwZXIgYW5kIGxvd2VyIGxpbWl0cywgbmVlZCBtb3JlIHJlc29sdXRpb24gZHVlIHRvIHN0ZWVwIHNsb3BlXHJcbiAgICB4UG9zID0geE9yaWdpbiAtIG51bWJlck9mUG9pbnRzICogZHggLyAyOyAgLy9zdGFydCBhdCBsZWZ0IGVkZ2VcclxuICAgIGxldCB0YW5WYWx1ZSA9IE1hdGgudGFuKCAyICogTWF0aC5QSSAqICggeFBvcyAtIHhPcmlnaW4gKSAvIHdhdmVsZW5ndGggKTtcclxuXHJcbiAgICBkeCA9IHdhdmVsZW5ndGggLyA2MDA7ICAvL3gtZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgb24gY3VydmVcclxuICAgIG51bWJlck9mUG9pbnRzID0gKCBudW1iZXJPZldhdmVsZW5ndGhzICsgMC4wOCApICogd2F2ZWxlbmd0aCAvIGR4O1xyXG4gICAgY29uc3QgbWF4VGFuVmFsdWUgPSAxLjE1O1xyXG4gICAgY29uc3QgbWluVGFuVmFsdWUgPSAtMS4wO1xyXG4gICAgbGV0IHlQb3M7XHJcbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBudW1iZXJPZlBvaW50czsgaSsrICkge1xyXG4gICAgICB0YW5WYWx1ZSA9IE1hdGgudGFuKCAyICogTWF0aC5QSSAqICggeFBvcyAtIHhPcmlnaW4gKSAvIHdhdmVsZW5ndGggKTtcclxuICAgICAgeVBvcyA9IHlPcmlnaW4gLSBhbXBsaXR1ZGUgKiB0YW5WYWx1ZTtcclxuICAgICAgaWYgKCAoIHRhblZhbHVlIDw9IG1heFRhblZhbHVlICkgJiYgKCB0YW5WYWx1ZSA+IG1pblRhblZhbHVlICkgKSB7XHJcbiAgICAgICAgdGFuU2hhcGUubGluZVRvKCB4UG9zLCB5UG9zICk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGFuU2hhcGUubW92ZVRvKCB4UG9zLCB5UG9zICk7XHJcbiAgICAgIH1cclxuICAgICAgeFBvcyArPSBkeDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzaW5QYXRoID0gbmV3IFBhdGgoIHNpblNoYXBlLCB7IHN0cm9rZTogU0lOX0NPTE9SLCBsaW5lV2lkdGg6IDMgfSApO1xyXG4gICAgY29uc3QgY29zUGF0aCA9IG5ldyBQYXRoKCBjb3NTaGFwZSwgeyBzdHJva2U6IENPU19DT0xPUiwgbGluZVdpZHRoOiAzIH0gKTtcclxuICAgIGNvbnN0IHRhblBhdGggPSBuZXcgUGF0aCggdGFuU2hhcGUsIHsgc3Ryb2tlOiBUQU5fQ09MT1IsIGxpbmVXaWR0aDogMyB9ICk7XHJcblxyXG4gICAgLy8gQWRkIFRyaWFuZ2xlTm9kZSBhcnJvdyBoZWFkcyBhdCBlbmRzIG9mIGN1cnZlc1xyXG4gICAgY29uc3QgcGkgPSBNYXRoLlBJO1xyXG4gICAgY29uc3QgbGVmdEVuZCA9IC0oIG51bWJlck9mV2F2ZWxlbmd0aHMgKyAwLjA4ICkgKiB3YXZlbGVuZ3RoIC8gMjtcclxuICAgIGNvbnN0IHJpZ2h0RW5kID0gKCBudW1iZXJPZldhdmVsZW5ndGhzICsgMC4wOCApICogd2F2ZWxlbmd0aCAvIDI7XHJcbiAgICBjb25zdCBhcnJvd0hlYWRMZW5ndGggPSAxNTtcclxuICAgIGNvbnN0IGFycm93SGVhZFdpZHRoID0gODtcclxuXHJcbiAgICAvLyBQbGFjZSBhcnJvdyBoZWFkcyBvbiBsZWZ0IGFuZCByaWdodCBlbmRzIG9mIHNpbiBjdXJ2ZVxyXG4gICAgbGV0IHNsb3BlTGVmdCA9ICggYW1wbGl0dWRlICogMiAqIHBpIC8gd2F2ZWxlbmd0aCApICogTWF0aC5jb3MoIDIgKiBwaSAqIGxlZnRFbmQgLyB3YXZlbGVuZ3RoICk7XHJcbiAgICBsZXQgc2xvcGVSaWdodCA9ICggYW1wbGl0dWRlICogMiAqIHBpIC8gd2F2ZWxlbmd0aCApICogTWF0aC5jb3MoIDIgKiBwaSAqIHJpZ2h0RW5kIC8gd2F2ZWxlbmd0aCApO1xyXG4gICAgbGV0IGFuZ2xlTGVmdCA9IFV0aWxzLnRvRGVncmVlcyggTWF0aC5hdGFuKCBzbG9wZUxlZnQgKSApO1xyXG4gICAgbGV0IGFuZ2xlUmlnaHQgPSBVdGlscy50b0RlZ3JlZXMoIE1hdGguYXRhbiggc2xvcGVSaWdodCApICk7XHJcbiAgICBjb25zdCBzaW5BcnJvd0xlZnQgPSBuZXcgVHJpYW5nbGVOb2RlKCBhcnJvd0hlYWRMZW5ndGgsIGFycm93SGVhZFdpZHRoLCBTSU5fQ09MT1IsIC1hbmdsZUxlZnQgKyAxODAgKTtcclxuICAgIGNvbnN0IHNpbkFycm93UmlnaHQgPSBuZXcgVHJpYW5nbGVOb2RlKCBhcnJvd0hlYWRMZW5ndGgsIGFycm93SGVhZFdpZHRoLCBTSU5fQ09MT1IsIC1hbmdsZVJpZ2h0ICk7XHJcbiAgICBzaW5BcnJvd0xlZnQueCA9IGxlZnRFbmQ7XHJcbiAgICBzaW5BcnJvd1JpZ2h0LnggPSByaWdodEVuZDtcclxuICAgIHNpbkFycm93TGVmdC55ID0gLWFtcGxpdHVkZSAqIE1hdGguc2luKCAyICogcGkgKiBsZWZ0RW5kIC8gd2F2ZWxlbmd0aCApO1xyXG4gICAgc2luQXJyb3dSaWdodC55ID0gLWFtcGxpdHVkZSAqIE1hdGguc2luKCAyICogcGkgKiByaWdodEVuZCAvIHdhdmVsZW5ndGggKTtcclxuICAgIHNpblBhdGguY2hpbGRyZW4gPSBbIHNpbkFycm93TGVmdCwgc2luQXJyb3dSaWdodCBdO1xyXG5cclxuICAgIC8vIFBsYWNlIGFycm93IGhlYWRzIG9uIGVuZHMgb2YgY29zIGN1cnZlXHJcbiAgICBzbG9wZUxlZnQgPSAoIGFtcGxpdHVkZSAqIDIgKiBwaSAvIHdhdmVsZW5ndGggKSAqIE1hdGguc2luKCAyICogcGkgKiBsZWZ0RW5kIC8gd2F2ZWxlbmd0aCApO1xyXG4gICAgc2xvcGVSaWdodCA9ICggYW1wbGl0dWRlICogMiAqIHBpIC8gd2F2ZWxlbmd0aCApICogTWF0aC5zaW4oIDIgKiBwaSAqIHJpZ2h0RW5kIC8gd2F2ZWxlbmd0aCApO1xyXG4gICAgYW5nbGVMZWZ0ID0gVXRpbHMudG9EZWdyZWVzKCBNYXRoLmF0YW4oIHNsb3BlTGVmdCApICk7XHJcbiAgICBhbmdsZVJpZ2h0ID0gVXRpbHMudG9EZWdyZWVzKCBNYXRoLmF0YW4oIHNsb3BlUmlnaHQgKSApO1xyXG4gICAgY29uc3QgY29zQXJyb3dMZWZ0ID0gbmV3IFRyaWFuZ2xlTm9kZSggYXJyb3dIZWFkTGVuZ3RoLCBhcnJvd0hlYWRXaWR0aCwgQ09TX0NPTE9SLCBhbmdsZUxlZnQgKyAxODAgKTtcclxuICAgIGNvbnN0IGNvc0Fycm93UmlnaHQgPSBuZXcgVHJpYW5nbGVOb2RlKCBhcnJvd0hlYWRMZW5ndGgsIGFycm93SGVhZFdpZHRoLCBDT1NfQ09MT1IsIGFuZ2xlUmlnaHQgKTtcclxuICAgIGNvc0Fycm93TGVmdC54ID0gbGVmdEVuZDtcclxuICAgIGNvc0Fycm93UmlnaHQueCA9IHJpZ2h0RW5kO1xyXG4gICAgY29zQXJyb3dMZWZ0LnkgPSAtYW1wbGl0dWRlICogTWF0aC5jb3MoIDIgKiBwaSAqIGxlZnRFbmQgLyB3YXZlbGVuZ3RoICk7XHJcbiAgICBjb3NBcnJvd1JpZ2h0LnkgPSAtYW1wbGl0dWRlICogTWF0aC5jb3MoIDIgKiBwaSAqIHJpZ2h0RW5kIC8gd2F2ZWxlbmd0aCApO1xyXG4gICAgY29zUGF0aC5jaGlsZHJlbiA9IFsgY29zQXJyb3dMZWZ0LCBjb3NBcnJvd1JpZ2h0IF07XHJcblxyXG4gICAgLy9QbGFjZSBhcnJvdyBoZWFkcyBvbiBlbmRzIG9mIGFsbCB0YW4gY3VydmUgc2VnbWVudHMuIFRoaXMgaXMgcHJldHR5IHRyaWNreVxyXG4gICAgY29uc3QgYXJyb3dIZWFkcyA9IFtdOyAvL2FycmF5IG9mIGFycm93IGhlYWRzXHJcblxyXG4gICAgLy8geCBhbmQgeSBjb29yZGluYXRlcyBvZiBlbmRzIG9mIHRoZSAnY2VudHJhbCcgdGFuIHNlZ21lbnQsIGluIHZpZXcgY29vcmRpbmF0ZXMuXHJcbiAgICAvLyAnQ2VudHJhbCcgc2VnbWVudCBpcyB0aGUgb25lIGNlbnRlcmVkIG9uIHRoZSBvcmlnaW4uXHJcbiAgICBjb25zdCB4VGFuTWF4ID0gTWF0aC5hdGFuKCBtYXhUYW5WYWx1ZSApICogd2F2ZWxlbmd0aCAvICggMiAqIHBpICk7XHJcbiAgICBjb25zdCB4VGFuTWluID0gTWF0aC5hdGFuKCBtaW5UYW5WYWx1ZSApICogd2F2ZWxlbmd0aCAvICggMiAqIHBpICk7XHJcbiAgICBsZXQgeFBvc01heDtcclxuICAgIGxldCB4UG9zTWluO1xyXG4gICAgbGV0IHlQb3NNYXg7XHJcbiAgICBsZXQgeVBvc01pbjtcclxuICAgIGZvciAoIGxldCBpID0gLW51bWJlck9mV2F2ZWxlbmd0aHM7IGkgPD0gbnVtYmVyT2ZXYXZlbGVuZ3RoczsgaSsrICkge1xyXG4gICAgICB4UG9zTWF4ID0gaSAqIHdhdmVsZW5ndGggLyAyICsgeFRhbk1heDtcclxuICAgICAgeFBvc01pbiA9IGkgKiB3YXZlbGVuZ3RoIC8gMiArIHhUYW5NaW47XHJcbiAgICAgIHlQb3NNYXggPSAtTWF0aC50YW4oIHhQb3NNYXggKiAyICogcGkgLyB3YXZlbGVuZ3RoICkgKiBhbXBsaXR1ZGU7XHJcbiAgICAgIHlQb3NNaW4gPSAtTWF0aC50YW4oIHhQb3NNaW4gKiAyICogcGkgLyB3YXZlbGVuZ3RoICkgKiBhbXBsaXR1ZGU7XHJcbiAgICAgIGFycm93SGVhZHMucHVzaCggbmV3IFZlY3RvcjIoIHhQb3NNYXgsIHlQb3NNYXggKSApO1xyXG4gICAgICBhcnJvd0hlYWRzLnB1c2goIG5ldyBWZWN0b3IyKCB4UG9zTWluLCB5UG9zTWluICkgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUaGUgbGVmdCBhbmQgcmlnaHQgZW5kIGFycm93IGhlYWRzIGFyZSBzcGVjaWFsIGNhc2VzLlxyXG4gICAgLy8gUmVtb3ZlIGV4dHJhbmVvdXMgbGVmdC0gYW5kIHJpZ2h0LWVuZCBhcnJvdyBoZWFkcyBjcmVhdGVkIGluIHByZXZpb3VzIGZvci1sb29wXHJcbiAgICAvLyBhbmQgcmVwbGFjZSB3aXRoIGNvcnJlY3QgYXJyb3cgaGVhZHNcclxuICAgIGNvbnN0IHlMZWZ0RW5kID0gLU1hdGgudGFuKCBsZWZ0RW5kICogMiAqIHBpIC8gd2F2ZWxlbmd0aCApICogYW1wbGl0dWRlO1xyXG4gICAgY29uc3QgeVJpZ2h0RW5kID0gLU1hdGgudGFuKCByaWdodEVuZCAqIDIgKiBwaSAvIHdhdmVsZW5ndGggKSAqIGFtcGxpdHVkZTtcclxuICAgIGFycm93SGVhZHMuc3BsaWNlKCBhcnJvd0hlYWRzLmxlbmd0aCAtIDIsIDEsIG5ldyBWZWN0b3IyKCByaWdodEVuZCwgeVJpZ2h0RW5kICkgKTtcclxuICAgIGFycm93SGVhZHMuc3BsaWNlKCAxLCAxLCBuZXcgVmVjdG9yMiggbGVmdEVuZCwgeUxlZnRFbmQgKSApO1xyXG4gICAgbGV0IHRyaWFuZ2xlTm9kZTtcclxuICAgIGxldCByb3RhdGlvbkFuZ2xlO1xyXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgYXJyb3dIZWFkcy5sZW5ndGg7IGkrKyApIHtcclxuICAgICAgY29uc3QgeFBpeCA9IGFycm93SGVhZHNbIGkgXS54O1xyXG4gICAgICBjb25zdCB5UGl4ID0gYXJyb3dIZWFkc1sgaSBdLnk7XHJcbiAgICAgIGNvbnN0IHhUYW4gPSB4UGl4ICogMiAqIHBpIC8gd2F2ZWxlbmd0aDtcclxuXHJcbiAgICAgIC8vIERlcml2YXRpdmUgb2YgdGFuIGlzIDEgKyB0YW5eMlxyXG4gICAgICBjb25zdCB0YW5TbG9wZSA9ICggYW1wbGl0dWRlICogMiAqIHBpIC8gd2F2ZWxlbmd0aCApICogKCAxICsgTWF0aC50YW4oIHhUYW4gKSAqIE1hdGgudGFuKCB4VGFuICkgKTtcclxuICAgICAgcm90YXRpb25BbmdsZSA9IC1VdGlscy50b0RlZ3JlZXMoIE1hdGguYXRhbiggdGFuU2xvcGUgKSApO1xyXG4gICAgICBpZiAoIGkgJSAyICE9PSAwICkge1xyXG4gICAgICAgIHJvdGF0aW9uQW5nbGUgKz0gMTgwO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0cmlhbmdsZU5vZGUgPSBuZXcgVHJpYW5nbGVOb2RlKCBhcnJvd0hlYWRMZW5ndGgsIGFycm93SGVhZFdpZHRoLCBUQU5fQ09MT1IsIHJvdGF0aW9uQW5nbGUgKTtcclxuICAgICAgdGFuUGF0aC5hZGRDaGlsZCggdHJpYW5nbGVOb2RlICk7XHJcbiAgICAgIHRyaWFuZ2xlTm9kZS54ID0geFBpeDtcclxuICAgICAgdHJpYW5nbGVOb2RlLnkgPSB5UGl4ICsgMTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBmaW5hbGx5IGFkZCB0aGUgdHJpZyBwbG90cyBhcyBjaGlsZHJlbiBvZiB0aGlzIG5vZGVcclxuICAgIHRoaXMuY2hpbGRyZW4gPSBbIGNvc1BhdGgsIHNpblBhdGgsIHRhblBhdGggXTtcclxuXHJcbiAgICAvLyBsaW5rIHBsb3QgdmlzaWJpbGl0eSB3aXRoIG1vZGVsIHZpZXcgcHJvcGVydHlcclxuICAgIGdyYXBoUHJvcGVydHkubGluayggdmlzaWJsZUdyYXBoID0+IHtcclxuICAgICAgY29zUGF0aC52aXNpYmxlID0gKCB2aXNpYmxlR3JhcGggPT09ICdjb3MnICk7XHJcbiAgICAgIHNpblBhdGgudmlzaWJsZSA9ICggdmlzaWJsZUdyYXBoID09PSAnc2luJyApO1xyXG4gICAgICB0YW5QYXRoLnZpc2libGUgPSAoIHZpc2libGVHcmFwaCA9PT0gJ3RhbicgKTtcclxuICAgIH0gKTtcclxuICB9XHJcbn1cclxuXHJcbnRyaWdUb3VyLnJlZ2lzdGVyKCAnVHJpZ1Bsb3RzTm9kZScsIFRyaWdQbG90c05vZGUgKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFRyaWdQbG90c05vZGU7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsS0FBSyxNQUFNLDZCQUE2QjtBQUMvQyxPQUFPQyxPQUFPLE1BQU0sK0JBQStCO0FBQ25ELFNBQVNDLEtBQUssUUFBUSxnQ0FBZ0M7QUFDdEQsU0FBU0MsSUFBSSxFQUFFQyxJQUFJLFFBQVEsbUNBQW1DO0FBQzlELE9BQU9DLFFBQVEsTUFBTSxtQkFBbUI7QUFDeEMsT0FBT0MsWUFBWSxNQUFNLG1CQUFtQjtBQUM1QyxPQUFPQyxjQUFjLE1BQU0scUJBQXFCOztBQUVoRDtBQUNBLE1BQU1DLFNBQVMsR0FBR0QsY0FBYyxDQUFDQyxTQUFTO0FBQzFDLE1BQU1DLFNBQVMsR0FBR0YsY0FBYyxDQUFDRSxTQUFTO0FBQzFDLE1BQU1DLFNBQVMsR0FBR0gsY0FBYyxDQUFDRyxTQUFTO0FBRTFDLE1BQU1DLGFBQWEsU0FBU1IsSUFBSSxDQUFDO0VBRS9CO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRVMsV0FBV0EsQ0FBRUMsVUFBVSxFQUFFQyxtQkFBbUIsRUFBRUMsU0FBUyxFQUFFQyxhQUFhLEVBQUc7SUFFdkUsS0FBSyxDQUFDLENBQUM7SUFFUCxNQUFNQyxRQUFRLEdBQUcsSUFBSWYsS0FBSyxDQUFDLENBQUM7SUFDNUIsTUFB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