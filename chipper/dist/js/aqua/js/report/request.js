// Copyright 2022, University of Colorado Boulder

/**
 * Sends requests to the CT server
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

const options = QueryStringMachine.getAll({
  server: {
    type: 'string',
    // Origin for our server (ignoring current port), so that we don't require localhost
    defaultValue: `${window.location.protocol}//${window.location.hostname}`
  }
});
const request = relativeURL => new Promise((resolve, reject) => {
  const req = new XMLHttpRequest();
  req.onload = function () {
    if (req.responseText.includes('<title>503 Service Unavailable</title>')) {
      resolve(null);
    } else {
      resolve(JSON.parse(req.responseText));
    }
  };
  req.onerror = function () {
    resolve(null);
  };
  req.open('get', `${options.server}${relativeURL}`, true);
  req.send();
});
export default request;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcHRpb25zIiwiUXVlcnlTdHJpbmdNYWNoaW5lIiwiZ2V0QWxsIiwic2VydmVyIiwidHlwZSIsImRlZmF1bHRWYWx1ZSIsIndpbmRvdyIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJob3N0bmFtZSIsInJlcXVlc3QiLCJyZWxhdGl2ZVVSTCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicmVxIiwiWE1MSHR0cFJlcXVlc3QiLCJvbmxvYWQiLCJyZXNwb25zZVRleHQiLCJpbmNsdWRlcyIsIkpTT04iLCJwYXJzZSIsIm9uZXJyb3IiLCJvcGVuIiwic2VuZCJdLCJzb3VyY2VzIjpbInJlcXVlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFNlbmRzIHJlcXVlc3RzIHRvIHRoZSBDVCBzZXJ2ZXJcclxuICpcclxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxyXG4gKi9cclxuXHJcbmNvbnN0IG9wdGlvbnMgPSBRdWVyeVN0cmluZ01hY2hpbmUuZ2V0QWxsKCB7XHJcbiAgc2VydmVyOiB7XHJcbiAgICB0eXBlOiAnc3RyaW5nJyxcclxuXHJcbiAgICAvLyBPcmlnaW4gZm9yIG91ciBzZXJ2ZXIgKGlnbm9yaW5nIGN1cnJlbnQgcG9ydCksIHNvIHRoYXQgd2UgZG9uJ3QgcmVxdWlyZSBsb2NhbGhvc3RcclxuICAgIGRlZmF1bHRWYWx1ZTogYCR7d2luZG93LmxvY2F0aW9uLnByb3RvY29sfS8vJHt3aW5kb3cubG9jYXRpb24uaG9zdG5hbWV9YFxyXG4gIH1cclxufSApO1xyXG5cclxuY29uc3QgcmVxdWVzdCA9IHJlbGF0aXZlVVJMID0+IG5ldyBQcm9taXNlKCAoIHJlc29sdmUsIHJlamVjdCApID0+IHtcclxuICBjb25zdCByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICByZXEub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoIHJlcS5yZXNwb25zZVRleHQuaW5jbHVkZXMoICc8dGl0bGU+NTAzIFNlcnZpY2UgVW5hdmFpbGFibGU8L3RpdGxlPicgKSApIHtcclxuICAgICAgcmVzb2x2ZSggbnVsbCApO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHJlc29sdmUoIEpTT04ucGFyc2UoIHJlcS5yZXNwb25zZVRleHQgKSApO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgcmVxLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcclxuICAgIHJlc29sdmUoIG51bGwgKTtcclxuICB9O1xyXG4gIHJlcS5vcGVuKCAnZ2V0JywgYCR7b3B0aW9ucy5zZXJ2ZXJ9JHtyZWxhdGl2ZVVSTH1gLCB0cnVlICk7XHJcbiAgcmVxLnNlbmQoKTtcclxufSApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgcmVxdWVzdDtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU1BLE9BQU8sR0FBR0Msa0JBQWtCLENBQUNDLE1BQU0sQ0FBRTtFQUN6Q0MsTUFBTSxFQUFFO0lBQ05DLElBQUksRUFBRSxRQUFRO0lBRWQ7SUFDQUMsWUFBWSxFQUFHLEdBQUVDLE1BQU0sQ0FBQ0MsUUFBUSxDQUFDQyxRQUFTLEtBQUlGLE1BQU0sQ0FBQ0MsUUFBUSxDQUFDRSxRQUFTO0VBQ3pFO0FBQ0YsQ0FBRSxDQUFDO0FBRUgsTUFBTUMsT0FBTyxHQUFHQyxXQUFXLElBQUksSUFBSUMsT0FBTyxDQUFFLENBQUVDLE9BQU8sRUFBRUMsTUFBTSxLQUFNO0VBQ2pFLE1BQU1DLEdBQUcsR0FBRyxJQUFJQyxjQUFjLENBQUMsQ0FBQztFQUNoQ0QsR0FBRyxDQUFDRSxNQUFNLEdBQUcsWUFBVztJQUN0QixJQUFLRixHQUFHLENBQUNHLFlBQVksQ0FBQ0MsUUFBUSxDQUFFLHdDQUF5QyxDQUFDLEVBQUc7TUFDM0VOLE9BQU8sQ0FBRSxJQUFLLENBQUM7SUFDakIsQ0FBQyxNQUNJO01BQ0hBLE9BQU8sQ0FBRU8sSUFBSSxDQUFDQyxLQUFLLENBQUVOLEdBQUcsQ0FBQ0csWUFBYSxDQUFFLENBQUM7SUFDM0M7RUFDRixDQUFDO0VBQ0RILEdBQUcsQ0FBQ08sT0FBTyxHQUFHLFlBQVc7SUFDdkJULE9BQU8sQ0FBRSxJQUFLLENBQUM7RUFDakIsQ0FBQztFQUNERSxHQUFHLENBQUNRLElBQUksQ0FBRSxLQUFLLEVBQUcsR0FBRXZCLE9BQU8sQ0FBQ0csTUFBTyxHQUFFUSxXQUFZLEVBQUMsRUFBRSxJQUFLLENBQUM7RUFDMURJLEdBQUcsQ0FBQ1MsSUFBSSxDQUFDLENBQUM7QUFDWixDQUFFLENBQUM7QUFFSCxlQUFlZCxPQUFPIn0=