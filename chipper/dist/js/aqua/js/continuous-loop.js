// Copyright 2017-2021, University of Colorado Boulder

/**
 * Continuously loops tests, by:
 * 1. Request a test from the server (continuous-server.js)
 * 2. Run the test (reporting results back)
 * 3. Detect when we need to run another test, going to (1)
 *
 * On bayes, can open with:
 * xvfb-run --server-args='-screen 0, 1024x768x16' google-chrome -start-maximized -ignore-certificate-errors -new-window -disable-gpu https://bayes.colorado.edu/continuous-testing/aqua/html/continuous-loop.html
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

const options = QueryStringMachine.getAll({
  id: {
    type: 'string'
  },
  old: {
    type: 'flag'
  },
  server: {
    type: 'string',
    // Ignore current port, keep protocol and host.
    defaultValue: `${window.location.protocol}//${window.location.hostname}`
  }
});

// iframe that will contain qunit-test.html/sim-test.html/etc.
const iframe = document.createElement('iframe');
iframe.setAttribute('frameborder', '0');
iframe.setAttribute('seamless', '1');
iframe.setAttribute('width', '768');
iframe.setAttribute('height', '576');
document.body.appendChild(iframe);
const infoElement = document.createElement('pre');
document.body.appendChild(infoElement);

// {number} - Timeout that will force moving to another test (if our test in our iframe doesn't notify us it is time, e.g. something is broken)
let timeout = null;

/**
 * Resets our "force move to next test" timer. Should only kick in when our iframe test has failed.
 * @private
 */
function resetTimer() {
  if (timeout !== null) {
    clearTimeout(timeout);
  }
  timeout = setTimeout(nextTest, 5 * 60000); // 5min "restart, something probably broke"
}

/**
 * Kicks off moving to the next test.
 * @private
 */
function nextTest() {
  iframe.src = 'about:blank';
  const req = new XMLHttpRequest();
  req.onload = function () {
    try {
      const data = JSON.parse(req.responseText);

      // kick off loading our iframe
      iframe.src = QueryStringMachine.appendQueryString(data.url, `testInfo=${encodeURIComponent(JSON.stringify({
        test: data.test,
        snapshotName: data.snapshotName,
        timestamp: data.timestamp
      }))}`);
      infoElement.textContent = JSON.stringify(data, null, 2);
      document.title = `Continuous Testing loop for: ${data.test.join(' : ')}`;
    } catch (e) {
      console.log('parse error?');

      // On parse failure, just try again with a delay (don't hammer the server)
      setTimeout(nextTest, 5000);
    }
  };
  req.onerror = function () {
    console.log('XHR error?');

    // On connection failure, just try again with a delay (don't hammer the server)
    setTimeout(nextTest, 60000); // 1min
  };

  req.open('get', `${options.server}/aquaserver/next-test?old=${options.old}`, true);
  req.send();
  resetTimer();
}

/**
 * Send a test result to the server.
 * @private
 *
 * @param {string|undefined} message
 * @param {Object} testInfo - The original test request from continuous-server.js
 * @param {boolean} passed
 */
function sendTestResult(message, testInfo, passed) {
  const req = new XMLHttpRequest();
  const result = {
    passed: passed,
    test: testInfo.test,
    snapshotName: testInfo.snapshotName,
    timestamp: testInfo.timestamp,
    message: message,
    id: options.id
  };
  req.open('get', `${options.server}/aquaserver/test-result?result=${encodeURIComponent(JSON.stringify(result))}`);
  req.send();
  resetTimer();
}

// Listen to messages from our iframe (fired in test-client.js)
window.addEventListener('message', evt => {
  if (typeof evt.data !== 'string') {
    return;
  }
  const data = JSON.parse(evt.data);

  // test pass/fail has names,message
  if (data.type === 'test-pass') {
    console.log('PASSED');
    sendTestResult(data.message, data.testInfo, true);
  } else if (data.type === 'test-fail') {
    console.log('FAILED');
    sendTestResult(data.message, data.testInfo, false);
  } else if (data.type === 'test-next') {
    nextTest();
  }
});
nextTest();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcHRpb25zIiwiUXVlcnlTdHJpbmdNYWNoaW5lIiwiZ2V0QWxsIiwiaWQiLCJ0eXBlIiwib2xkIiwic2VydmVyIiwiZGVmYXVsdFZhbHVlIiwid2luZG93IiwibG9jYXRpb24iLCJwcm90b2NvbCIsImhvc3RuYW1lIiwiaWZyYW1lIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiYm9keSIsImFwcGVuZENoaWxkIiwiaW5mb0VsZW1lbnQiLCJ0aW1lb3V0IiwicmVzZXRUaW1lciIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJuZXh0VGVzdCIsInNyYyIsInJlcSIsIlhNTEh0dHBSZXF1ZXN0Iiwib25sb2FkIiwiZGF0YSIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsImFwcGVuZFF1ZXJ5U3RyaW5nIiwidXJsIiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwic3RyaW5naWZ5IiwidGVzdCIsInNuYXBzaG90TmFtZSIsInRpbWVzdGFtcCIsInRleHRDb250ZW50IiwidGl0bGUiLCJqb2luIiwiZSIsImNvbnNvbGUiLCJsb2ciLCJvbmVycm9yIiwib3BlbiIsInNlbmQiLCJzZW5kVGVzdFJlc3VsdCIsIm1lc3NhZ2UiLCJ0ZXN0SW5mbyIsInBhc3NlZCIsInJlc3VsdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiXSwic291cmNlcyI6WyJjb250aW51b3VzLWxvb3AuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTctMjAyMSwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogQ29udGludW91c2x5IGxvb3BzIHRlc3RzLCBieTpcclxuICogMS4gUmVxdWVzdCBhIHRlc3QgZnJvbSB0aGUgc2VydmVyIChjb250aW51b3VzLXNlcnZlci5qcylcclxuICogMi4gUnVuIHRoZSB0ZXN0IChyZXBvcnRpbmcgcmVzdWx0cyBiYWNrKVxyXG4gKiAzLiBEZXRlY3Qgd2hlbiB3ZSBuZWVkIHRvIHJ1biBhbm90aGVyIHRlc3QsIGdvaW5nIHRvICgxKVxyXG4gKlxyXG4gKiBPbiBiYXllcywgY2FuIG9wZW4gd2l0aDpcclxuICogeHZmYi1ydW4gLS1zZXJ2ZXItYXJncz0nLXNjcmVlbiAwLCAxMDI0eDc2OHgxNicgZ29vZ2xlLWNocm9tZSAtc3RhcnQtbWF4aW1pemVkIC1pZ25vcmUtY2VydGlmaWNhdGUtZXJyb3JzIC1uZXctd2luZG93IC1kaXNhYmxlLWdwdSBodHRwczovL2JheWVzLmNvbG9yYWRvLmVkdS9jb250aW51b3VzLXRlc3RpbmcvYXF1YS9odG1sL2NvbnRpbnVvdXMtbG9vcC5odG1sXHJcbiAqXHJcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cclxuICovXHJcblxyXG5cclxuY29uc3Qgb3B0aW9ucyA9IFF1ZXJ5U3RyaW5nTWFjaGluZS5nZXRBbGwoIHtcclxuICBpZDoge1xyXG4gICAgdHlwZTogJ3N0cmluZydcclxuICB9LFxyXG4gIG9sZDoge1xyXG4gICAgdHlwZTogJ2ZsYWcnXHJcbiAgfSxcclxuICBzZXJ2ZXI6IHtcclxuICAgIHR5cGU6ICdzdHJpbmcnLFxyXG5cclxuICAgIC8vIElnbm9yZSBjdXJyZW50IHBvcnQsIGtlZXAgcHJvdG9jb2wgYW5kIGhvc3QuXHJcbiAgICBkZWZhdWx0VmFsdWU6IGAke3dpbmRvdy5sb2NhdGlvbi5wcm90b2NvbH0vLyR7d2luZG93LmxvY2F0aW9uLmhvc3RuYW1lfWBcclxuICB9XHJcbn0gKTtcclxuXHJcbi8vIGlmcmFtZSB0aGF0IHdpbGwgY29udGFpbiBxdW5pdC10ZXN0Lmh0bWwvc2ltLXRlc3QuaHRtbC9ldGMuXHJcbmNvbnN0IGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdpZnJhbWUnICk7XHJcbmlmcmFtZS5zZXRBdHRyaWJ1dGUoICdmcmFtZWJvcmRlcicsICcwJyApO1xyXG5pZnJhbWUuc2V0QXR0cmlidXRlKCAnc2VhbWxlc3MnLCAnMScgKTtcclxuaWZyYW1lLnNldEF0dHJpYnV0ZSggJ3dpZHRoJywgJzc2OCcgKTtcclxuaWZyYW1lLnNldEF0dHJpYnV0ZSggJ2hlaWdodCcsICc1NzYnICk7XHJcbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoIGlmcmFtZSApO1xyXG5cclxuY29uc3QgaW5mb0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAncHJlJyApO1xyXG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCBpbmZvRWxlbWVudCApO1xyXG5cclxuLy8ge251bWJlcn0gLSBUaW1lb3V0IHRoYXQgd2lsbCBmb3JjZSBtb3ZpbmcgdG8gYW5vdGhlciB0ZXN0IChpZiBvdXIgdGVzdCBpbiBvdXIgaWZyYW1lIGRvZXNuJ3Qgbm90aWZ5IHVzIGl0IGlzIHRpbWUsIGUuZy4gc29tZXRoaW5nIGlzIGJyb2tlbilcclxubGV0IHRpbWVvdXQgPSBudWxsO1xyXG5cclxuLyoqXHJcbiAqIFJlc2V0cyBvdXIgXCJmb3JjZSBtb3ZlIHRvIG5leHQgdGVzdFwiIHRpbWVyLiBTaG91bGQgb25seSBraWNrIGluIHdoZW4gb3VyIGlmcmFtZSB0ZXN0IGhhcyBmYWlsZWQuXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5mdW5jdGlvbiByZXNldFRpbWVyKCkge1xyXG4gIGlmICggdGltZW91dCAhPT0gbnVsbCApIHtcclxuICAgIGNsZWFyVGltZW91dCggdGltZW91dCApO1xyXG4gIH1cclxuICB0aW1lb3V0ID0gc2V0VGltZW91dCggbmV4dFRlc3QsIDUgKiA2MDAwMCApOyAvLyA1bWluIFwicmVzdGFydCwgc29tZXRoaW5nIHByb2JhYmx5IGJyb2tlXCJcclxufVxyXG5cclxuLyoqXHJcbiAqIEtpY2tzIG9mZiBtb3ZpbmcgdG8gdGhlIG5leHQgdGVzdC5cclxuICogQHByaXZhdGVcclxuICovXHJcbmZ1bmN0aW9uIG5leHRUZXN0KCkge1xyXG4gIGlmcmFtZS5zcmMgPSAnYWJvdXQ6YmxhbmsnO1xyXG5cclxuICBjb25zdCByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICByZXEub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSggcmVxLnJlc3BvbnNlVGV4dCApO1xyXG5cclxuICAgICAgLy8ga2ljayBvZmYgbG9hZGluZyBvdXIgaWZyYW1lXHJcbiAgICAgIGlmcmFtZS5zcmMgPSBRdWVyeVN0cmluZ01hY2hpbmUuYXBwZW5kUXVlcnlTdHJpbmcoIGRhdGEudXJsLCBgdGVzdEluZm89JHtlbmNvZGVVUklDb21wb25lbnQoIEpTT04uc3RyaW5naWZ5KCB7XHJcbiAgICAgICAgdGVzdDogZGF0YS50ZXN0LFxyXG4gICAgICAgIHNuYXBzaG90TmFtZTogZGF0YS5zbmFwc2hvdE5hbWUsXHJcbiAgICAgICAgdGltZXN0YW1wOiBkYXRhLnRpbWVzdGFtcFxyXG4gICAgICB9ICkgKX1gICk7XHJcblxyXG4gICAgICBpbmZvRWxlbWVudC50ZXh0Q29udGVudCA9IEpTT04uc3RyaW5naWZ5KCBkYXRhLCBudWxsLCAyICk7XHJcbiAgICAgIGRvY3VtZW50LnRpdGxlID0gYENvbnRpbnVvdXMgVGVzdGluZyBsb29wIGZvcjogJHtkYXRhLnRlc3Quam9pbiggJyA6ICcgKX1gO1xyXG4gICAgfVxyXG4gICAgY2F0Y2goIGUgKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCAncGFyc2UgZXJyb3I/JyApO1xyXG5cclxuICAgICAgLy8gT24gcGFyc2UgZmFpbHVyZSwganVzdCB0cnkgYWdhaW4gd2l0aCBhIGRlbGF5IChkb24ndCBoYW1tZXIgdGhlIHNlcnZlcilcclxuICAgICAgc2V0VGltZW91dCggbmV4dFRlc3QsIDUwMDAgKTtcclxuICAgIH1cclxuICB9O1xyXG4gIHJlcS5vbmVycm9yID0gZnVuY3Rpb24oKSB7XHJcbiAgICBjb25zb2xlLmxvZyggJ1hIUiBlcnJvcj8nICk7XHJcblxyXG4gICAgLy8gT24gY29ubmVjdGlvbiBmYWlsdXJlLCBqdXN0IHRyeSBhZ2FpbiB3aXRoIGEgZGVsYXkgKGRvbid0IGhhbW1lciB0aGUgc2VydmVyKVxyXG4gICAgc2V0VGltZW91dCggbmV4dFRlc3QsIDYwMDAwICk7IC8vIDFtaW5cclxuICB9O1xyXG4gIHJlcS5vcGVuKCAnZ2V0JywgYCR7b3B0aW9ucy5zZXJ2ZXJ9L2FxdWFzZXJ2ZXIvbmV4dC10ZXN0P29sZD0ke29wdGlvbnMub2xkfWAsIHRydWUgKTtcclxuICByZXEuc2VuZCgpO1xyXG4gIHJlc2V0VGltZXIoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNlbmQgYSB0ZXN0IHJlc3VsdCB0byB0aGUgc2VydmVyLlxyXG4gKiBAcHJpdmF0ZVxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ3x1bmRlZmluZWR9IG1lc3NhZ2VcclxuICogQHBhcmFtIHtPYmplY3R9IHRlc3RJbmZvIC0gVGhlIG9yaWdpbmFsIHRlc3QgcmVxdWVzdCBmcm9tIGNvbnRpbnVvdXMtc2VydmVyLmpzXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gcGFzc2VkXHJcbiAqL1xyXG5mdW5jdGlvbiBzZW5kVGVzdFJlc3VsdCggbWVzc2FnZSwgdGVzdEluZm8sIHBhc3NlZCApIHtcclxuICBjb25zdCByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICBjb25zdCByZXN1bHQgPSB7XHJcbiAgICBwYXNzZWQ6IHBhc3NlZCxcclxuICAgIHRlc3Q6IHRlc3RJbmZvLnRlc3QsXHJcbiAgICBzbmFwc2hvdE5hbWU6IHRlc3RJbmZvLnNuYXBzaG90TmFtZSxcclxuICAgIHRpbWVzdGFtcDogdGVzdEluZm8udGltZXN0YW1wLFxyXG4gICAgbWVzc2FnZTogbWVzc2FnZSxcclxuICAgIGlkOiBvcHRpb25zLmlkXHJcbiAgfTtcclxuICByZXEub3BlbiggJ2dldCcsIGAke29wdGlvbnMuc2VydmVyfS9hcXVhc2VydmVyL3Rlc3QtcmVzdWx0P3Jlc3VsdD0ke2VuY29kZVVSSUNvbXBvbmVudCggSlNPTi5zdHJpbmdpZnkoIHJlc3VsdCApICl9YCApO1xyXG4gIHJlcS5zZW5kKCk7XHJcbiAgcmVzZXRUaW1lcigpO1xyXG59XHJcblxyXG4vLyBMaXN0ZW4gdG8gbWVzc2FnZXMgZnJvbSBvdXIgaWZyYW1lIChmaXJlZCBpbiB0ZXN0LWNsaWVudC5qcylcclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdtZXNzYWdlJywgZXZ0ID0+IHtcclxuICBpZiAoIHR5cGVvZiBldnQuZGF0YSAhPT0gJ3N0cmluZycgKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSggZXZ0LmRhdGEgKTtcclxuXHJcbiAgLy8gdGVzdCBwYXNzL2ZhaWwgaGFzIG5hbWVzLG1lc3NhZ2VcclxuICBpZiAoIGRhdGEudHlwZSA9PT0gJ3Rlc3QtcGFzcycgKSB7XHJcbiAgICBjb25zb2xlLmxvZyggJ1BBU1NFRCcgKTtcclxuICAgIHNlbmRUZXN0UmVzdWx0KCBkYXRhLm1lc3NhZ2UsIGRhdGEudGVzdEluZm8sIHRydWUgKTtcclxuICB9XHJcbiAgZWxzZSBpZiAoIGRhdGEudHlwZSA9PT0gJ3Rlc3QtZmFpbCcgKSB7XHJcbiAgICBjb25zb2xlLmxvZyggJ0ZBSUxFRCcgKTtcclxuICAgIHNlbmRUZXN0UmVzdWx0KCBkYXRhLm1lc3NhZ2UsIGRhdGEudGVzdEluZm8sIGZhbHNlICk7XHJcbiAgfVxyXG4gIGVsc2UgaWYgKCBkYXRhLnR5cGUgPT09ICd0ZXN0LW5leHQnICkge1xyXG4gICAgbmV4dFRlc3QoKTtcclxuICB9XHJcbn0gKTtcclxuXHJcbm5leHRUZXN0KCk7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQSxNQUFNQSxPQUFPLEdBQUdDLGtCQUFrQixDQUFDQyxNQUFNLENBQUU7RUFDekNDLEVBQUUsRUFBRTtJQUNGQyxJQUFJLEVBQUU7RUFDUixDQUFDO0VBQ0RDLEdBQUcsRUFBRTtJQUNIRCxJQUFJLEVBQUU7RUFDUixD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