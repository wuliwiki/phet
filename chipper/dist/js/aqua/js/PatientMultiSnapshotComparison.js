// Copyright 2022, University of Colorado Boulder
// eslint-disable-next-line bad-typescript-text
// @ts-nocheck
/**
 * Snapshot comparison across multiple running urls
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

// TODO: allow linting (it's not finding common definitions)
/* eslint-disable */

import Multilink from '../../axon/js/Multilink.js';
import Property from '../../axon/js/Property.js';
import { combineOptions } from '../../phet-core/js/optionize.js';
import PhetFont from '../../scenery-phet/js/PhetFont.js';
import { Color, Display, DOM, FireListener, FlowBox, GridBox, Image, Node, Text } from '../../scenery/js/imports.js';
(async () => {
  const options = QueryStringMachine.getAll({
    runnable: {
      type: 'string',
      defaultValue: 'collision-lab'
    },
    // The URLs that point to the base git roots that can be browsed. A slash will be added after. Each one will be
    // represented by a column in the interface
    urls: {
      type: 'array',
      elementSchema: {
        type: 'string'
      },
      // Explicitly giving a port so that both are "cross-origin" (full-screen-enabled might be true on same-origin)
      defaultValue: ['http://localhost:80', 'http://localhost:8080'],
      public: true
    },
    // Controls the random seed for comparison
    simSeed: {
      type: 'number',
      defaultValue: 4 // Ideal constant taken from https://xkcd.com/221/, DO NOT CHANGE, it's random!
    },

    // Passed to the simulation in addition to brand/ea
    simQueryParameters: {
      type: 'string',
      defaultValue: 'brand=phet&ea'
    },
    // Controls the size of the sims (can be used for higher resolution)
    simWidth: {
      type: 'number',
      defaultValue: 1024 / 4
    },
    simHeight: {
      type: 'number',
      defaultValue: 768 / 4
    }
  });
  const childQueryParams = `simSeed=${encodeURIComponent(options.simSeed)}&simWidth=${encodeURIComponent(options.simWidth)}&simHeight=${encodeURIComponent(options.simHeight)}`;
  const loadImage = url => {
    return new Promise((resolve, reject) => {
      const image = document.createElement('img');
      image.addEventListener('load', () => {
        resolve(image);
      });
      image.src = url;
    });
  };
  const createText = str => new Text(str, {
    font: new PhetFont(12)
  });

  // TODO: factor out somewhere
  function imageToContext(image, width, height) {
    const canvas = document.createElement('canvas');
    const context = canvas.getContext('2d');
    canvas.width = width;
    canvas.height = height;
    context.drawImage(image, 0, 0);
    return context;
  }

  // TODO: factor out somewhere
  function contextToData(context, width, height) {
    return context.getImageData(0, 0, width, height);
  }

  // TODO: factor out somewhere
  function dataToCanvas(data, width, height) {
    const canvas = document.createElement('canvas');
    const context = canvas.getContext('2d');
    canvas.width = width;
    canvas.height = height;
    context.putImageData(data, 0, 0);
    return canvas;
  }
  const compareImages = async (urlA, urlB, width, height) => {
    const imageA = await loadImage(urlA);
    const imageB = await loadImage(urlB);
    const threshold = 0;
    const a = contextToData(imageToContext(imageA, width, height), width, height);
    const b = contextToData(imageToContext(imageB, width, height), width, height);
    let largestDifference = 0;
    let totalDifference = 0;
    const colorDiffData = document.createElement('canvas').getContext('2d').createImageData(a.width, a.height);
    const alphaDiffData = document.createElement('canvas').getContext('2d').createImageData(a.width, a.height);
    for (let i = 0; i < a.data.length; i++) {
      const diff = Math.abs(a.data[i] - b.data[i]);
      if (i % 4 === 3) {
        colorDiffData.data[i] = 255;
        alphaDiffData.data[i] = 255;
        alphaDiffData.data[i - 3] = diff; // red
        alphaDiffData.data[i - 2] = diff; // green
        alphaDiffData.data[i - 1] = diff; // blue
      } else {
        colorDiffData.data[i] = diff;
      }
      const alphaIndex = i - i % 4 + 3;
      // grab the associated alpha channel and multiply it times the diff
      const alphaMultipliedDiff = i % 4 === 3 ? diff : diff * (a.data[alphaIndex] / 255) * (b.data[alphaIndex] / 255);
      totalDifference += alphaMultipliedDiff;
      // if ( alphaMultipliedDiff > threshold ) {
      // console.log( message + ': ' + Math.abs( a.data[i] - b.data[i] ) );
      largestDifference = Math.max(largestDifference, alphaMultipliedDiff);
      // isEqual = false;
      // break;
      // }
    }

    const averageDifference = totalDifference / (4 * a.width * a.height);
    if (averageDifference > threshold) {
      return {
        a: dataToCanvas(a, width, height),
        b: dataToCanvas(b, width, height),
        diff: dataToCanvas(colorDiffData, width, height),
        largestDifference: largestDifference,
        averageDifference: averageDifference
      };
    }
    return null;
  };
  const createIframe = () => {
    const iframe = document.createElement('iframe');
    iframe.setAttribute('frameborder', '0');
    iframe.setAttribute('seamless', '1');
    iframe.setAttribute('width', options.simWidth);
    iframe.setAttribute('height', options.simHeight);
    iframe.style.position = 'absolute';
    return iframe;
  };
  const scene = new Node();
  const display = new Display(scene, {
    width: 512,
    height: 512,
    backgroundColor: Color.TRANSPARENT,
    passiveEvents: true
  });
  document.body.appendChild(display.domElement);
  display.initializeEvents();
  const iframe0 = createIframe();
  const iframe1 = createIframe();
  const gridBox = new GridBox({
    spacing: 10,
    x: 10,
    y: 10,
    rows: [[createText(options.urls[0]), createText(options.urls[1])], [new DOM(iframe0), new DOM(iframe1)]]
  });
  scene.addChild(gridBox);
  const simQueryParameters = encodeURIComponent(options.simQueryParameters);
  const url0 = encodeURIComponent(`${options.urls[0]}/${options.runnable}/${options.runnable}_en.html`);
  const url1 = encodeURIComponent(`${options.urls[1]}/${options.runnable}/${options.runnable}_en.html`);
  iframe0.src = `http://localhost/aqua/html/patient-snapshotter.html?id=${0}&${childQueryParams}&url=${url0}&simQueryParameters=${simQueryParameters}`;
  iframe1.src = `http://localhost:8080/aqua/html/patient-snapshotter.html?id=${1}&${childQueryParams}&url=${url1}&simQueryParameters=${simQueryParameters}`;
  const frame0LastProperty = new Property(null);
  const frame1LastProperty = new Property(null);
  const frame0Property = new Property(null);
  const frame1Property = new Property(null);
  const sendNextFrame0 = () => iframe0.contentWindow.postMessage(JSON.stringify({
    type: 'frame'
  }), '*');
  const sendNextFrame1 = () => iframe1.contentWindow.postMessage(JSON.stringify({
    type: 'frame'
  }), '*');
  Multilink.multilink([frame0Property, frame1Property], async (frame0, frame1) => {
    if (frame0 !== null && frame1 !== null) {
      if (frame0.screenshot.hash === frame1.screenshot.hash) {
        frame0LastProperty.value = frame0Property.value;
        frame1LastProperty.value = frame1Property.value;
        frame0Property.value = null;
        frame1Property.value = null;
        sendNextFrame0();
        sendNextFrame1();
      } else {
        const data = await compareImages(frame0.screenshot.url, frame1.screenshot.url, options.simWidth, options.simHeight);
        const createImageNode = (label, targetImage, options) => {
          const image = new Image(targetImage);
          image.cursor = 'pointer';
          image.addInputListener(new FireListener({
            fire: () => navigator.clipboard?.writeText(targetImage instanceof HTMLCanvasElement ? targetImage.toDataURL() : targetImage.src)
          }));
          return new FlowBox(combineOptions({
            orientation: 'vertical',
            children: [createText(label), image]
          }, options));
        };
        console.log(data);
        gridBox.addRow([createImageNode('before', await loadImage(frame0LastProperty.value?.screenshot.url)), createImageNode('before', await loadImage(frame1LastProperty.value?.screenshot.url))]);
        if (data) {
          gridBox.addRow([createImageNode('after', data.a), createImageNode('after', data.b), createImageNode('difference', data.diff)]);
        }
      }
    }
  });
  window.addEventListener('message', evt => {
    if (typeof evt.data !== 'string') {
      return;
    }
    const data = JSON.parse(evt.data);
    if (data.type === 'frameEmitted') {
      // number, screenshot: { url, hash }
      console.log(data);
      if (data.id === 0) {
        frame0Property.value = data;
      } else if (data.id === 1) {
        frame1Property.value = data;
      }
    } else if (data.type === 'error') {
      console.log('data');
      console.log(data);
      // snapshotterMap.get( data.id )!.addError();

      gridBox.addChild(new Text('ERRORED', {
        layoutOptions: {
          column: data.id,
          row: 100
        }
      }));
    } else if (data.type === 'load' && typeof data.id === 'number') {
      if (data.id === 0) {
        console.log('multi loaded 0');
        sendNextFrame0();
      } else if (data.id === 1) {
        console.log('multi loaded 1');
        sendNextFrame1();
      }
    }
  });
  display.updateOnRequestAnimationFrame(dt => {
    display.width = Math.ceil(Math.max(window.innerWidth, scene.right));
    display.height = Math.ceil(Math.max(window.innerHeight, scene.bottom));
  });
})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNdWx0aWxpbmsiLCJQcm9wZXJ0eSIsImNvbWJpbmVPcHRpb25zIiwiUGhldEZvbnQiLCJDb2xvciIsIkRpc3BsYXkiLCJET00iLCJGaXJlTGlzdGVuZXIiLCJGbG93Qm94IiwiR3JpZEJveCIsIkltYWdlIiwiTm9kZSIsIlRleHQiLCJvcHRpb25zIiwiUXVlcnlTdHJpbmdNYWNoaW5lIiwiZ2V0QWxsIiwicnVubmFibGUiLCJ0eXBlIiwiZGVmYXVsdFZhbHVlIiwidXJscyIsImVsZW1lbnRTY2hlbWEiLCJwdWJsaWMiLCJzaW1TZWVkIiwic2ltUXVlcnlQYXJhbWV0ZXJzIiwic2ltV2lkdGgiLCJzaW1IZWlnaHQiLCJjaGlsZFF1ZXJ5UGFyYW1zIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwibG9hZEltYWdlIiwidXJsIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJpbWFnZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzcmMiLCJjcmVhdGVUZXh0Iiwic3RyIiwiZm9udCIsImltYWdlVG9Db250ZXh0Iiwid2lkdGgiLCJoZWlnaHQiLCJjYW52YXMiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsImRyYXdJbWFnZSIsImNvbnRleHRUb0RhdGEiLCJnZXRJbWFnZURhdGEiLCJkYXRhVG9DYW52YXMiLCJkYXRhIiwicHV0SW1hZ2VEYXRhIiwiY29tcGFyZUltYWdlcyIsInVybEEiLCJ1cmxCIiwiaW1hZ2VBIiwiaW1hZ2VCIiwidGhyZXNob2xkIiwiYSIsImIiLCJsYXJnZXN0RGlmZmVyZW5jZSIsInRvdGFsRGlmZmVyZW5jZSIsImNvbG9yRGlmZkRhdGEiLCJjcmVhdGVJbWFnZURhdGEiLCJhbHBoYURpZmZEYXRhIiwiaSIsImxlbmd0aCIsImRpZmYiLCJNYXRoIiwiYWJzIiwiYWxwaGFJbmRleCIsImFscGhhTXVsdGlwbGllZERpZmYiLCJtYXgiLCJhdmVyYWdlRGlmZmVyZW5jZSIsImNyZWF0ZUlmcmFtZSIsImlmcmFtZSIsInNldEF0dHJpYnV0ZSIsInN0eWxlIiwicG9zaXRpb24iLCJzY2VuZSIsImRpc3BsYXkiLCJiYWNrZ3JvdW5kQ29sb3IiLCJUUkFOU1BBUkVOVCIsInBhc3NpdmVFdmVudHMiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJkb21FbGVtZW50IiwiaW5pdGlhbGl6ZUV2ZW50cyIsImlmcmFtZTAiLCJpZnJhbWUxIiwiZ3JpZEJveCIsInNwYWNpbmciLCJ4IiwieSIsInJvd3MiLCJhZGRDaGlsZCIsInVybDAiLCJ1cmwxIiwiZnJhbWUwTGFzdFByb3BlcnR5IiwiZnJhbWUxTGFzdFByb3BlcnR5IiwiZnJhbWUwUHJvcGVydHkiLCJmcmFtZTFQcm9wZXJ0eSIsInNlbmROZXh0RnJhbWUwIiwiY29udGVudFdpbmRvdyIsInBvc3RNZXNzYWdlIiwiSlNPTiIsInN0cmluZ2lmeSIsInNlbmROZXh0RnJhbWUxIiwibXVsdGlsaW5rIiwiZnJhbWUwIiwiZnJhbWUxIiwic2NyZWVuc2hvdCIsImhhc2giLCJ2YWx1ZSIsImNyZWF0ZUltYWdlTm9kZSIsImxhYmVsIiwidGFyZ2V0SW1hZ2UiLCJjdXJzb3IiLCJhZGRJbnB1dExpc3RlbmVyIiwiZmlyZSIsIm5hdmlnYXRvciIsImNsaXBib2FyZCIsIndyaXRlVGV4dCIsIkhUTUxDYW52YXNFbGVtZW50IiwidG9EYXRhVVJMIiwib3JpZW50YXRpb24iLCJjaGlsZHJlbiIsImNvbnNvbGUiLCJsb2ciLCJhZGRSb3ciLCJ3aW5kb3ciLCJldnQiLCJwYXJzZSIsImlkIiwibGF5b3V0T3B0aW9ucyIsImNvbHVtbiIsInJvdyIsInVwZGF0ZU9uUmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiZHQiLCJjZWlsIiwiaW5uZXJXaWR0aCIsInJpZ2h0IiwiaW5uZXJIZWlnaHQiLCJib3R0b20iXSwic291cmNlcyI6WyJQYXRpZW50TXVsdGlTbmFwc2hvdENvbXBhcmlzb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgYmFkLXR5cGVzY3JpcHQtdGV4dFxyXG4vLyBAdHMtbm9jaGVja1xyXG4vKipcclxuICogU25hcHNob3QgY29tcGFyaXNvbiBhY3Jvc3MgbXVsdGlwbGUgcnVubmluZyB1cmxzXHJcbiAqXHJcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cclxuICovXHJcblxyXG4vLyBUT0RPOiBhbGxvdyBsaW50aW5nIChpdCdzIG5vdCBmaW5kaW5nIGNvbW1vbiBkZWZpbml0aW9ucylcclxuLyogZXNsaW50LWRpc2FibGUgKi9cclxuXHJcbmltcG9ydCBNdWx0aWxpbmsgZnJvbSAnLi4vLi4vYXhvbi9qcy9NdWx0aWxpbmsuanMnO1xyXG5pbXBvcnQgUHJvcGVydHkgZnJvbSAnLi4vLi4vYXhvbi9qcy9Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCB7IGNvbWJpbmVPcHRpb25zIH0gZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCBQaGV0Rm9udCBmcm9tICcuLi8uLi9zY2VuZXJ5LXBoZXQvanMvUGhldEZvbnQuanMnO1xyXG5pbXBvcnQgeyBDb2xvciwgRGlzcGxheSwgRE9NLCBGaXJlTGlzdGVuZXIsIEZsb3dCb3gsIEZsb3dCb3hPcHRpb25zLCBHcmlkQm94LCBJbWFnZSwgTm9kZSwgTm9kZU9wdGlvbnMsIFRleHQgfSBmcm9tICcuLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5cclxudHlwZSBGcmFtZSA9IHtcclxuICBudW1iZXI6IG51bWJlcjtcclxuICBzY3JlZW5zaG90OiB7XHJcbiAgICBoYXNoOiBzdHJpbmc7XHJcbiAgICB1cmw6IHN0cmluZztcclxuICB9O1xyXG59O1xyXG5cclxuKCBhc3luYyAoKSA9PiB7XHJcbiAgY29uc3Qgb3B0aW9ucyA9IFF1ZXJ5U3RyaW5nTWFjaGluZS5nZXRBbGwoIHtcclxuXHJcbiAgICBydW5uYWJsZToge1xyXG4gICAgICB0eXBlOiAnc3RyaW5nJyxcclxuICAgICAgZGVmYXVsdFZhbHVlOiAnY29sbGlzaW9uLWxhYidcclxuICAgIH0sXHJcblxyXG4gICAgLy8gVGhlIFVSTHMgdGhhdCBwb2ludCB0byB0aGUgYmFzZSBnaXQgcm9vdHMgdGhhdCBjYW4gYmUgYnJvd3NlZC4gQSBzbGFzaCB3aWxsIGJlIGFkZGVkIGFmdGVyLiBFYWNoIG9uZSB3aWxsIGJlXHJcbiAgICAvLyByZXByZXNlbnRlZCBieSBhIGNvbHVtbiBpbiB0aGUgaW50ZXJmYWNlXHJcbiAgICB1cmxzOiB7XHJcbiAgICAgIHR5cGU6ICdhcnJheScsXHJcbiAgICAgIGVsZW1lbnRTY2hlbWE6IHtcclxuICAgICAgICB0eXBlOiAnc3RyaW5nJ1xyXG4gICAgICB9LFxyXG4gICAgICAvLyBFeHBsaWNpdGx5IGdpdmluZyBhIHBvcnQgc28gdGhhdCBib3RoIGFyZSBcImNyb3NzLW9yaWdpblwiIChmdWxsLXNjcmVlbi1lbmFibGVkIG1pZ2h0IGJlIHRydWUgb24gc2FtZS1vcmlnaW4pXHJcbiAgICAgIGRlZmF1bHRWYWx1ZTogWyAnaHR0cDovL2xvY2FsaG9zdDo4MCcsICdodHRwOi8vbG9jYWxob3N0OjgwODAnIF0sXHJcbiAgICAgIHB1YmxpYzogdHJ1ZVxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBDb250cm9scyB0aGUgcmFuZG9tIHNlZWQgZm9yIGNvbXBhcmlzb25cclxuICAgIHNpbVNlZWQ6IHtcclxuICAgICAgdHlwZTogJ251bWJlcicsXHJcbiAgICAgIGRlZmF1bHRWYWx1ZTogNCAvLyBJZGVhbCBjb25zdGFudCB0YWtlbiBmcm9tIGh0dHBzOi8veGtjZC5jb20vMjIxLywgRE8gTk9UIENIQU5HRSwgaXQncyByYW5kb20hXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIFBhc3NlZCB0byB0aGUgc2ltdWxhdGlvbiBpbiBhZGRpdGlvbiB0byBicmFuZC9lYVxyXG4gICAgc2ltUXVlcnlQYXJhbWV0ZXJzOiB7XHJcbiAgICAgIHR5cGU6ICdzdHJpbmcnLFxyXG4gICAgICBkZWZhdWx0VmFsdWU6ICdicmFuZD1waGV0JmVhJ1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBDb250cm9scyB0aGUgc2l6ZSBvZiB0aGUgc2ltcyAoY2FuIGJlIHVzZWQgZm9yIGhpZ2hlciByZXNvbHV0aW9uKVxyXG4gICAgc2ltV2lkdGg6IHtcclxuICAgICAgdHlwZTogJ251bWJlcicsXHJcbiAgICAgIGRlZmF1bHRWYWx1ZTogMTAyNCAvIDRcclxuICAgIH0sXHJcbiAgICBzaW1IZWlnaHQ6IHtcclxuICAgICAgdHlwZTogJ251bWJlcicsXHJcbiAgICAgIGRlZmF1bHRWYWx1ZTogNzY4IC8gNFxyXG4gICAgfVxyXG4gIH0gKTtcclxuXHJcbiAgY29uc3QgY2hpbGRRdWVyeVBhcmFtcyA9XHJcbiAgICBgc2ltU2VlZD0ke2VuY29kZVVSSUNvbXBvbmVudCggb3B0aW9ucy5zaW1TZWVkIClcclxuICAgIH0mc2ltV2lkdGg9JHtlbmNvZGVVUklDb21wb25lbnQoIG9wdGlvbnMuc2ltV2lkdGggKVxyXG4gICAgfSZzaW1IZWlnaHQ9JHtlbmNvZGVVUklDb21wb25lbnQoIG9wdGlvbnMuc2ltSGVpZ2h0IClcclxuICAgIH1gO1xyXG5cclxuICBjb25zdCBsb2FkSW1hZ2UgPSAoIHVybDogc3RyaW5nICk6IFByb21pc2U8SFRNTEltYWdlRWxlbWVudD4gPT4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPEhUTUxJbWFnZUVsZW1lbnQ+KCAoIHJlc29sdmUsIHJlamVjdCApID0+IHtcclxuICAgICAgY29uc3QgaW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnaW1nJyApO1xyXG4gICAgICBpbWFnZS5hZGRFdmVudExpc3RlbmVyKCAnbG9hZCcsICgpID0+IHtcclxuICAgICAgICByZXNvbHZlKCBpbWFnZSApO1xyXG4gICAgICB9ICk7XHJcbiAgICAgIGltYWdlLnNyYyA9IHVybDtcclxuICAgIH0gKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBjcmVhdGVUZXh0ID0gc3RyID0+IG5ldyBUZXh0KCBzdHIsIHsgZm9udDogbmV3IFBoZXRGb250KCAxMiApIH0gKTtcclxuXHJcbiAgLy8gVE9ETzogZmFjdG9yIG91dCBzb21ld2hlcmVcclxuICBmdW5jdGlvbiBpbWFnZVRvQ29udGV4dCggaW1hZ2UsIHdpZHRoLCBoZWlnaHQgKSB7XHJcbiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnY2FudmFzJyApO1xyXG4gICAgY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCAnMmQnICk7XHJcbiAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcclxuICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICBjb250ZXh0LmRyYXdJbWFnZSggaW1hZ2UsIDAsIDAgKTtcclxuICAgIHJldHVybiBjb250ZXh0O1xyXG4gIH1cclxuXHJcbiAgLy8gVE9ETzogZmFjdG9yIG91dCBzb21ld2hlcmVcclxuICBmdW5jdGlvbiBjb250ZXh0VG9EYXRhKCBjb250ZXh0LCB3aWR0aCwgaGVpZ2h0ICkge1xyXG4gICAgcmV0dXJuIGNvbnRleHQuZ2V0SW1hZ2VEYXRhKCAwLCAwLCB3aWR0aCwgaGVpZ2h0ICk7XHJcbiAgfVxyXG5cclxuICAvLyBUT0RPOiBmYWN0b3Igb3V0IHNvbWV3aGVyZVxyXG4gIGZ1bmN0aW9uIGRhdGFUb0NhbnZhcyggZGF0YSwgd2lkdGgsIGhlaWdodCApIHtcclxuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdjYW52YXMnICk7XHJcbiAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoICcyZCcgKTtcclxuICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcclxuICAgIGNvbnRleHQucHV0SW1hZ2VEYXRhKCBkYXRhLCAwLCAwICk7XHJcbiAgICByZXR1cm4gY2FudmFzO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgY29tcGFyZUltYWdlcyA9IGFzeW5jICggdXJsQSwgdXJsQiwgd2lkdGgsIGhlaWdodCApOiBQcm9taXNlPHsgYTogSFRNTENhbnZhc0VsZW1lbnQ7IGI6IEhUTUxDYW52YXNFbGVtZW50OyBkaWZmOiBIVE1MQ2FudmFzRWxlbWVudDsgbGFyZ2VzdERpZmZlcmVuY2U6IG51bWJlcjsgYXZlcmFnZURpZmZlcmVuY2U6IG51bWJlciB9IHwgbnVsbD4gPT4ge1xyXG4gICAgY29uc3QgaW1hZ2VBID0gYXdhaXQgbG9hZEltYWdlKCB1cmxBICk7XHJcbiAgICBjb25zdCBpbWFnZUIgPSBhd2FpdCBsb2FkSW1hZ2UoIHVybEIgKTtcclxuXHJcbiAgICBjb25zdCB0aHJlc2hvbGQgPSAwO1xyXG4gICAgY29uc3QgYSA9IGNvbnRleHRUb0RhdGEoIGltYWdlVG9Db250ZXh0KCBpbWFnZUEsIHdpZHRoLCBoZWlnaHQgKSwgd2lkdGgsIGhlaWdodCApO1xyXG4gICAgY29uc3QgYiA9IGNvbnRleHRUb0RhdGEoIGltYWdlVG9Db250ZXh0KCBpbWFnZUIsIHdpZHRoLCBoZWlnaHQgKSwgd2lkdGgsIGhlaWdodCApO1xyXG5cclxuICAgIGxldCBsYXJnZXN0RGlmZmVyZW5jZSA9IDA7XHJcbiAgICBsZXQgdG90YWxEaWZmZXJlbmNlID0gMDtcclxuICAgIGNvbnN0IGNvbG9yRGlmZkRhdGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnY2FudmFzJyApLmdldENvbnRleHQoICcyZCcgKS5jcmVhdGVJbWFnZURhdGEoIGEud2lkdGgsIGEuaGVpZ2h0ICk7XHJcbiAgICBjb25zdCBhbHBoYURpZmZEYXRhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2NhbnZhcycgKS5nZXRDb250ZXh0KCAnMmQnICkuY3JlYXRlSW1hZ2VEYXRhKCBhLndpZHRoLCBhLmhlaWdodCApO1xyXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgYS5kYXRhLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICBjb25zdCBkaWZmID0gTWF0aC5hYnMoIGEuZGF0YVsgaSBdIC0gYi5kYXRhWyBpIF0gKTtcclxuICAgICAgaWYgKCBpICUgNCA9PT0gMyApIHtcclxuICAgICAgICBjb2xvckRpZmZEYXRhLmRhdGFbIGkgXSA9IDI1NTtcclxuICAgICAgICBhbHBoYURpZmZEYXRhLmRhdGFbIGkgXSA9IDI1NTtcclxuICAgICAgICBhbHBoYURpZmZEYXRhLmRhdGFbIGkgLSAzIF0gPSBkaWZmOyAvLyByZWRcclxuICAgICAgICBhbHBoYURpZmZEYXRhLmRhdGFbIGkgLSAyIF0gPSBkaWZmOyAvLyBncmVlblxyXG4gICAgICAgIGFscGhhRGlmZkRhdGEuZGF0YVsgaSAtIDEgXSA9IGRpZmY7IC8vIGJsdWVcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBjb2xvckRpZmZEYXRhLmRhdGFbIGkgXSA9IGRpZmY7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgYWxwaGFJbmRleCA9ICggaSAtICggaSAlIDQgKSArIDMgKTtcclxuICAgICAgLy8gZ3JhYiB0aGUgYXNzb2NpYXRlZCBhbHBoYSBjaGFubmVsIGFuZCBtdWx0aXBseSBpdCB0aW1lcyB0aGUgZGlmZlxyXG4gICAgICBjb25zdCBhbHBoYU11bHRpcGxpZWREaWZmID0gKCBpICUgNCA9PT0gMyApID8gZGlmZiA6IGRpZmYgKiAoIGEuZGF0YVsgYWxwaGFJbmRleCBdIC8gMjU1ICkgKiAoIGIuZGF0YVsgYWxwaGFJbmRleCBdIC8gMjU1ICk7XHJcblxyXG4gICAgICB0b3RhbERpZmZlcmVuY2UgKz0gYWxwaGFNdWx0aXBsaWVkRGlmZjtcclxuICAgICAgLy8gaWYgKCBhbHBoYU11bHRpcGxpZWREaWZmID4gdGhyZXNob2xkICkge1xyXG4gICAgICAvLyBjb25zb2xlLmxvZyggbWVzc2FnZSArICc6ICcgKyBNYXRoLmFicyggYS5kYXRhW2ldIC0gYi5kYXRhW2ldICkgKTtcclxuICAgICAgbGFyZ2VzdERpZmZlcmVuY2UgPSBNYXRoLm1heCggbGFyZ2VzdERpZmZlcmVuY2UsIGFscGhhTXVsdGlwbGllZERpZmYgKTtcclxuICAgICAgLy8gaXNFcXVhbCA9IGZhbHNlO1xyXG4gICAgICAvLyBicmVhaztcclxuICAgICAgLy8gfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGF2ZXJhZ2VEaWZmZXJlbmNlID0gdG90YWxEaWZmZXJlbmNlIC8gKCA0ICogYS53aWR0aCAqIGEuaGVpZ2h0ICk7XHJcblxyXG4gICAgaWYgKCBhdmVyYWdlRGlmZmVyZW5jZSA+IHRocmVzaG9sZCApIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBhOiBkYXRhVG9DYW52YXMoIGEsIHdpZHRoLCBoZWlnaHQgKSxcclxuICAgICAgICBiOiBkYXRhVG9DYW52YXMoIGIsIHdpZHRoLCBoZWlnaHQgKSxcclxuICAgICAgICBkaWZmOiBkYXRhVG9DYW52YXMoIGNvbG9yRGlmZkRhdGEsIHdpZHRoLCBoZWlnaHQgKSxcclxuICAgICAgICBsYXJnZXN0RGlmZmVyZW5jZTogbGFyZ2VzdERpZmZlcmVuY2UsXHJcbiAgICAgICAgYXZlcmFnZURpZmZlcmVuY2U6IGF2ZXJhZ2VEaWZmZXJlbmNlXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9O1xyXG5cclxuICBjb25zdCBjcmVhdGVJZnJhbWUgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnaWZyYW1lJyApO1xyXG4gICAgaWZyYW1lLnNldEF0dHJpYnV0ZSggJ2ZyYW1lYm9yZGVyJywgJzAnICk7XHJcbiAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCAnc2VhbWxlc3MnLCAnMScgKTtcclxuICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoICd3aWR0aCcsIG9wdGlvbnMuc2ltV2lkdGggKTtcclxuICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoICdoZWlnaHQnLCBvcHRpb25zLnNpbUhlaWdodCApO1xyXG4gICAgaWZyYW1lLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuICAgIHJldHVybiBpZnJhbWU7XHJcbiAgfTtcclxuXHJcbiAgY29uc3Qgc2NlbmUgPSBuZXcgTm9kZSgpO1xyXG4gIGNvbnN0IGRpc3BsYXkgPSBuZXcgRGlzcGxheSggc2NlbmUsIHtcclxuICAgIHdpZHRoOiA1MTIsXHJcbiAgICBoZWlnaHQ6IDUxMixcclxuICAgIGJhY2tncm91bmRDb2xvcjogQ29sb3IuVFJBTlNQQVJFTlQsXHJcbiAgICBwYXNzaXZlRXZlbnRzOiB0cnVlXHJcbiAgfSApO1xyXG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoIGRpc3BsYXkuZG9tRWxlbWVudCApO1xyXG4gIGRpc3BsYXkuaW5pdGlhbGl6ZUV2ZW50cygpO1xyXG5cclxuICBjb25zdCBpZnJhbWUwID0gY3JlYXRlSWZyYW1lKCk7XHJcbiAgY29uc3QgaWZyYW1lMSA9IGNyZWF0ZUlmcmFtZSgpO1xyXG5cclxuICBjb25zdCBncmlkQm94ID0gbmV3IEdyaWRCb3goIHtcclxuICAgIHNwYWNpbmc6IDEwLFxyXG4gICAgeDogMTAsXHJcbiAgICB5OiAxMCxcclxuICAgIHJvd3M6IFtcclxuICAgICAgW1xyXG4gICAgICAgIGNyZWF0ZVRleHQoIG9wdGlvbnMudXJsc1sgMCBdICksXHJcbiAgICAgICAgY3JlYXRlVGV4dCggb3B0aW9ucy51cmxzWyAxIF0gKVxyXG4gICAgICBdLFxyXG4gICAgICBbXHJcbiAgICAgICAgbmV3IERPTSggaWZyYW1lMCApLFxyXG4gICAgICAgIG5ldyBET00oIGlmcmFtZTEgKVxyXG4gICAgICBdXHJcbiAgICBdXHJcbiAgfSApO1xyXG4gIHNjZW5lLmFkZENoaWxkKCBncmlkQm94ICk7XHJcblxyXG4gIGNvbnN0IHNpbVF1ZXJ5UGFyYW1ldGVycyA9IGVuY29kZVVSSUNvbXBvbmVudCggb3B0aW9ucy5zaW1RdWVyeVBhcmFtZXRlcnMgKTtcclxuICBjb25zdCB1cmwwID0gZW5jb2RlVVJJQ29tcG9uZW50KCBgJHtvcHRpb25zLnVybHNbIDAgXX0vJHtvcHRpb25zLnJ1bm5hYmxlfS8ke29wdGlvbnMucnVubmFibGV9X2VuLmh0bWxgICk7XHJcbiAgY29uc3QgdXJsMSA9IGVuY29kZVVSSUNvbXBvbmVudCggYCR7b3B0aW9ucy51cmxzWyAxIF19LyR7b3B0aW9ucy5ydW5uYWJsZX0vJHtvcHRpb25zLnJ1bm5hYmxlfV9lbi5odG1sYCApO1xyXG4gIGlmcmFtZTAuc3JjID0gYGh0dHA6Ly9sb2NhbGhvc3QvYXF1YS9odG1sL3BhdGllbnQtc25hcHNob3R0ZXIuaHRtbD9pZD0kezB9JiR7Y2hpbGRRdWVyeVBhcmFtc30mdXJsPSR7dXJsMH0mc2ltUXVlcnlQYXJhbWV0ZXJzPSR7c2ltUXVlcnlQYXJhbWV0ZXJzfWA7XHJcbiAgaWZyYW1lMS5zcmMgPSBgaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FxdWEvaHRtbC9wYXRpZW50LXNuYXBzaG90dGVyLmh0bWw/aWQ9JHsxfSYke2NoaWxkUXVlcnlQYXJhbXN9JnVybD0ke3VybDF9JnNpbVF1ZXJ5UGFyYW1ldGVycz0ke3NpbVF1ZXJ5UGFyYW1ldGVyc31gO1xyXG5cclxuICBjb25zdCBmcmFtZTBMYXN0UHJvcGVydHkgPSBuZXcgUHJvcGVydHk8RnJhbWUgfCBudWxsPiggbnVsbCApO1xyXG4gIGNvbnN0IGZyYW1lMUxhc3RQcm9wZXJ0eSA9IG5ldyBQcm9wZXJ0eTxGcmFtZSB8IG51bGw+KCBudWxsICk7XHJcblxyXG4gIGNvbnN0IGZyYW1lMFByb3BlcnR5ID0gbmV3IFByb3BlcnR5PEZyYW1lIHwgbnVsbD4oIG51bGwgKTtcclxuICBjb25zdCBmcmFtZTFQcm9wZXJ0eSA9IG5ldyBQcm9wZXJ0eTxGcmFtZSB8IG51bGw+KCBudWxsICk7XHJcblxyXG4gIGNvbnN0IHNlbmROZXh0RnJhbWUwID0gKCkgPT4gaWZyYW1lMC5jb250ZW50V2luZG93IS5wb3N0TWVzc2FnZSggSlNPTi5zdHJpbmdpZnkoIHsgdHlwZTogJ2ZyYW1lJyB9ICksICcqJyApO1xyXG4gIGNvbnN0IHNlbmROZXh0RnJhbWUxID0gKCkgPT4gaWZyYW1lMS5jb250ZW50V2luZG93IS5wb3N0TWVzc2FnZSggSlNPTi5zdHJpbmdpZnkoIHsgdHlwZTogJ2ZyYW1lJyB9ICksICcqJyApO1xyXG5cclxuICBNdWx0aWxpbmsubXVsdGlsaW5rKCBbIGZyYW1lMFByb3BlcnR5LCBmcmFtZTFQcm9wZXJ0eSBdLCBhc3luYyAoIGZyYW1lMCwgZnJhbWUxICkgPT4ge1xyXG4gICAgaWYgKCBmcmFtZTAgIT09IG51bGwgJiYgZnJhbWUxICE9PSBudWxsICkge1xyXG4gICAgICBpZiAoIGZyYW1lMC5zY3JlZW5zaG90Lmhhc2ggPT09IGZyYW1lMS5zY3JlZW5zaG90Lmhhc2ggKSB7XHJcbiAgICAgICAgZnJhbWUwTGFzdFByb3BlcnR5LnZhbHVlID0gZnJhbWUwUHJvcGVydHkudmFsdWU7XHJcbiAgICAgICAgZnJhbWUxTGFzdFByb3BlcnR5LnZhbHVlID0gZnJhbWUxUHJvcGVydHkudmFsdWU7XHJcbiAgICAgICAgZnJhbWUwUHJvcGVydHkudmFsdWUgPSBudWxsO1xyXG4gICAgICAgIGZyYW1lMVByb3BlcnR5LnZhbHVlID0gbnVsbDtcclxuXHJcbiAgICAgICAgc2VuZE5leHRGcmFtZTAoKTtcclxuICAgICAgICBzZW5kTmV4dEZyYW1lMSgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBjb21wYXJlSW1hZ2VzKCBmcmFtZTAuc2NyZWVuc2hvdC51cmwsIGZyYW1lMS5zY3JlZW5zaG90LnVybCwgb3B0aW9ucy5zaW1XaWR0aCwgb3B0aW9ucy5zaW1IZWlnaHQgKTtcclxuXHJcbiAgICAgICAgY29uc3QgY3JlYXRlSW1hZ2VOb2RlID0gKCBsYWJlbDogc3RyaW5nLCB0YXJnZXRJbWFnZTogSFRNTENhbnZhc0VsZW1lbnQgfCBIVE1MSW1hZ2VFbGVtZW50LCBvcHRpb25zPzogTm9kZU9wdGlvbnMgKTogTm9kZSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBpbWFnZSA9IG5ldyBJbWFnZSggdGFyZ2V0SW1hZ2UgKTtcclxuICAgICAgICAgIGltYWdlLmN1cnNvciA9ICdwb2ludGVyJztcclxuICAgICAgICAgIGltYWdlLmFkZElucHV0TGlzdGVuZXIoIG5ldyBGaXJlTGlzdGVuZXIoIHtcclxuICAgICAgICAgICAgZmlyZTogKCkgPT4gbmF2aWdhdG9yLmNsaXBib2FyZD8ud3JpdGVUZXh0KCB0YXJnZXRJbWFnZSBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50ID8gdGFyZ2V0SW1hZ2UudG9EYXRhVVJMKCkgOiB0YXJnZXRJbWFnZS5zcmMgKVxyXG4gICAgICAgICAgfSApICk7XHJcbiAgICAgICAgICByZXR1cm4gbmV3IEZsb3dCb3goIGNvbWJpbmVPcHRpb25zPEZsb3dCb3hPcHRpb25zPigge1xyXG4gICAgICAgICAgICBvcmllbnRhdGlvbjogJ3ZlcnRpY2FsJyxcclxuICAgICAgICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICAgICAgICBjcmVhdGVUZXh0KCBsYWJlbCApLFxyXG4gICAgICAgICAgICAgIGltYWdlXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICAgIH0sIG9wdGlvbnMgICkgKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyggZGF0YSApO1xyXG5cclxuICAgICAgICBncmlkQm94LmFkZFJvdyggW1xyXG4gICAgICAgICAgY3JlYXRlSW1hZ2VOb2RlKCAnYmVmb3JlJywgYXdhaXQgbG9hZEltYWdlKCBmcmFtZTBMYXN0UHJvcGVydHkudmFsdWU/LnNjcmVlbnNob3QudXJsISApICksXHJcbiAgICAgICAgICBjcmVhdGVJbWFnZU5vZGUoICdiZWZvcmUnLCBhd2FpdCBsb2FkSW1hZ2UoIGZyYW1lMUxhc3RQcm9wZXJ0eS52YWx1ZT8uc2NyZWVuc2hvdC51cmwhICkgKVxyXG4gICAgICAgIF0gKTtcclxuXHJcbiAgICAgICAgaWYgKCBkYXRhICkge1xyXG4gICAgICAgICAgZ3JpZEJveC5hZGRSb3coIFtcclxuICAgICAgICAgICAgY3JlYXRlSW1hZ2VOb2RlKCAnYWZ0ZXInLCBkYXRhLmEgKSxcclxuICAgICAgICAgICAgY3JlYXRlSW1hZ2VOb2RlKCAnYWZ0ZXInLCBkYXRhLmIgKSxcclxuICAgICAgICAgICAgY3JlYXRlSW1hZ2VOb2RlKCAnZGlmZmVyZW5jZScsIGRhdGEuZGlmZiApXHJcbiAgICAgICAgICBdICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSApO1xyXG5cclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ21lc3NhZ2UnLCBldnQgPT4ge1xyXG4gICAgaWYgKCB0eXBlb2YgZXZ0LmRhdGEgIT09ICdzdHJpbmcnICkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoIGV2dC5kYXRhICk7XHJcblxyXG4gICAgaWYgKCBkYXRhLnR5cGUgPT09ICdmcmFtZUVtaXR0ZWQnICkge1xyXG4gICAgICAvLyBudW1iZXIsIHNjcmVlbnNob3Q6IHsgdXJsLCBoYXNoIH1cclxuICAgICAgY29uc29sZS5sb2coIGRhdGEgKTtcclxuICAgICAgaWYgKCBkYXRhLmlkID09PSAwICkge1xyXG4gICAgICAgIGZyYW1lMFByb3BlcnR5LnZhbHVlID0gZGF0YTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmICggZGF0YS5pZCA9PT0gMSApIHtcclxuICAgICAgICBmcmFtZTFQcm9wZXJ0eS52YWx1ZSA9IGRhdGE7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKCBkYXRhLnR5cGUgPT09ICdlcnJvcicgKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCAnZGF0YScgKTtcclxuICAgICAgY29uc29sZS5sb2coIGRhdGEgKTtcclxuICAgICAgLy8gc25hcHNob3R0ZXJNYXAuZ2V0KCBkYXRhLmlkICkhLmFkZEVycm9yKCk7XHJcblxyXG4gICAgICBncmlkQm94LmFkZENoaWxkKCBuZXcgVGV4dCggJ0VSUk9SRUQnLCB7XHJcbiAgICAgICAgbGF5b3V0T3B0aW9uczogeyBjb2x1bW46IGRhdGEuaWQsIHJvdzogMTAwIH1cclxuICAgICAgfSApICk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICggZGF0YS50eXBlID09PSAnbG9hZCcgJiYgdHlwZW9mIGRhdGEuaWQgPT09ICdudW1iZXInICkge1xyXG4gICAgICBpZiAoIGRhdGEuaWQgPT09IDAgKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coICdtdWx0aSBsb2FkZWQgMCcgKTtcclxuICAgICAgICBzZW5kTmV4dEZyYW1lMCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKCBkYXRhLmlkID09PSAxICkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCAnbXVsdGkgbG9hZGVkIDEnICk7XHJcbiAgICAgICAgc2VuZE5leHRGcmFtZTEoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0gKTtcclxuXHJcbiAgZGlzcGxheS51cGRhdGVPblJlcXVlc3RBbmltYXRpb25GcmFtZSggZHQgPT4ge1xyXG4gICAgZGlzcGxheS53aWR0aCA9IE1hdGguY2VpbCggTWF0aC5tYXgoIHdpbmRvdy5pbm5lcldpZHRoLCBzY2VuZS5yaWdodCApICk7XHJcbiAgICBkaXNwbGF5LmhlaWdodCA9IE1hdGguY2VpbCggTWF0aC5tYXgoIHdpbmRvdy5pbm5lckhlaWdodCwgc2NlbmUuYm90dG9tICkgKTtcclxuICB9ICk7XHJcbn0gKSgpO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxPQUFPQSxTQUFTLE1BQU0sNEJBQTRCO0FBQ2xELE9BQU9DLFFBQVEsTUFBTSwyQkFBMkI7QUFDaEQsU0FBU0MsY0FBYyxRQUFRLGlDQUFpQztBQUNoRSxPQUFPQyxRQUFRLE1BQU0sbUNBQW1DO0FBQ3hELFNBQVNDLEtBQUssRUFBRUMsT0FBTyxFQUFFQyxHQUFHLEVBQUVDLFlBQVksRUFBRUMsT0FBTyxFQUFrQkMsT0FBTyxF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