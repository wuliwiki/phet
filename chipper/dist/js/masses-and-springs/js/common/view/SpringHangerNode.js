// Copyright 2017-2022, University of Colorado Boulder

/**
 * Object that creates the grey bar that the springs hang from and their respective numerical label.
 *
 * @author Matt Pennington (PhET Interactive Simulations)
 * @author Denzell Barnett (PhET Interactive Simulations)
 */

import merge from '../../../../phet-core/js/merge.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { Node, Rectangle, Text } from '../../../../scenery/js/imports.js';
import massesAndSprings from '../../massesAndSprings.js';
import MassesAndSpringsConstants from '../MassesAndSpringsConstants.js';

// constants
const SPRING_HANGER_FONT = new PhetFont({
  size: 16,
  weight: 'bold'
});
const SPRING_HANGER_FILL = 'rgb( 180, 180, 180 )';
class SpringHangerNode extends Rectangle {
  /**
   * @param {Array.<Spring>} springs
   * @param {ModelViewTransform2} modelViewTransform
   * @param {Tandem} tandem
   * @param {Object} [options]
   */
  constructor(springs, modelViewTransform, tandem, options) {
    options = merge({
      singleSpring: false
    }, options);
    if (options.singleSpring === false) {
      const springsSeparation = modelViewTransform.modelToViewDeltaX(Math.abs(springs[0].positionProperty.get().x - springs[1].positionProperty.get().x));
      const springHangerNodeWidth = springsSeparation * 1.4;

      // X coordinate of middle of springs
      const middleOfSprings = modelViewTransform.modelToViewX((springs[0].positionProperty.get().x + springs[1].positionProperty.get().x) / 2);

      // derived from x positions of springs.
      super(0, 0, springHangerNodeWidth, 20, 8, 8, {
        fill: SPRING_HANGER_FILL,
        stroke: 'grey',
        centerX: middleOfSprings,
        top: modelViewTransform.modelToViewY(MassesAndSpringsConstants.CEILING_Y),
        tandem: tandem.createTandem('springHangerNode')
      });

      // Node for hanger text label
      const springHangerLabelNode = new Node({
        tandem: tandem.createTandem('springHangerLabelNode')
      });
      springHangerLabelNode.addChild(new Text('1', {
        font: SPRING_HANGER_FONT,
        centerX: springs[0].positionProperty.get().x - 1.5,
        // Slightly shifted so tail of the number one is drawn above spring anchor
        tandem: tandem.createTandem('1')
      }));
      springHangerLabelNode.addChild(new Text('2', {
        font: SPRING_HANGER_FONT,
        tandem: tandem.createTandem('2'),
        centerX: springsSeparation
      }));
      springHangerLabelNode.centerX = this.width / 2;
      springHangerLabelNode.centerY = this.height / 2;
      this.addChild(springHangerLabelNode);
    } else {
      // derived from x positions of springs.
      super(0, 0, 48, 20, 8, 8, {
        fill: SPRING_HANGER_FILL,
        stroke: 'grey',
        tandem: tandem
      });
    }
    this.setCornerRadius(MassesAndSpringsConstants.PANEL_CORNER_RADIUS);
  }
}
massesAndSprings.register('SpringHangerNode', SpringHangerNode);
export default SpringHangerNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtZXJnZSIsIlBoZXRGb250IiwiTm9kZSIsIlJlY3RhbmdsZSIsIlRleHQiLCJtYXNzZXNBbmRTcHJpbmdzIiwiTWFzc2VzQW5kU3ByaW5nc0NvbnN0YW50cyIsIlNQUklOR19IQU5HRVJfRk9OVCIsInNpemUiLCJ3ZWlnaHQiLCJTUFJJTkdfSEFOR0VSX0ZJTEwiLCJTcHJpbmdIYW5nZXJOb2RlIiwiY29uc3RydWN0b3IiLCJzcHJpbmdzIiwibW9kZWxWaWV3VHJhbnNmb3JtIiwidGFuZGVtIiwib3B0aW9ucyIsInNpbmdsZVNwcmluZyIsInNwcmluZ3NTZXBhcmF0aW9uIiwibW9kZWxUb1ZpZXdEZWx0YVgiLCJNYXRoIiwiYWJzIiwicG9zaXRpb25Qcm9wZXJ0eSIsImdldCIsIngiLCJzcHJpbmdIYW5nZXJOb2RlV2lkdGgiLCJtaWRkbGVPZlNwcmluZ3MiLCJtb2RlbFRvVmlld1giLCJmaWxsIiwic3Ryb2tlIiwiY2VudGVyWCIsInRvcCIsIm1vZGVsVG9WaWV3WSIsIkNFSUxJTkdfWSIsImNyZWF0ZVRhbmRlbSIsInNwcmluZ0hhbmdlckxhYmVsTm9kZSIsImFkZENoaWxkIiwiZm9udCIsIndpZHRoIiwiY2VudGVyWSIsImhlaWdodCIsInNldENvcm5lclJhZGl1cyIsIlBBTkVMX0NPUk5FUl9SQURJVVMiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlNwcmluZ0hhbmdlck5vZGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTctMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogT2JqZWN0IHRoYXQgY3JlYXRlcyB0aGUgZ3JleSBiYXIgdGhhdCB0aGUgc3ByaW5ncyBoYW5nIGZyb20gYW5kIHRoZWlyIHJlc3BlY3RpdmUgbnVtZXJpY2FsIGxhYmVsLlxyXG4gKlxyXG4gKiBAYXV0aG9yIE1hdHQgUGVubmluZ3RvbiAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICogQGF1dGhvciBEZW56ZWxsIEJhcm5ldHQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IG1lcmdlIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9tZXJnZS5qcyc7XHJcbmltcG9ydCBQaGV0Rm9udCBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvUGhldEZvbnQuanMnO1xyXG5pbXBvcnQgeyBOb2RlLCBSZWN0YW5nbGUsIFRleHQgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgbWFzc2VzQW5kU3ByaW5ncyBmcm9tICcuLi8uLi9tYXNzZXNBbmRTcHJpbmdzLmpzJztcclxuaW1wb3J0IE1hc3Nlc0FuZFNwcmluZ3NDb25zdGFudHMgZnJvbSAnLi4vTWFzc2VzQW5kU3ByaW5nc0NvbnN0YW50cy5qcyc7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgU1BSSU5HX0hBTkdFUl9GT05UID0gbmV3IFBoZXRGb250KCB7IHNpemU6IDE2LCB3ZWlnaHQ6ICdib2xkJyB9ICk7XHJcbmNvbnN0IFNQUklOR19IQU5HRVJfRklMTCA9ICdyZ2IoIDE4MCwgMTgwLCAxODAgKSc7XHJcblxyXG5jbGFzcyBTcHJpbmdIYW5nZXJOb2RlIGV4dGVuZHMgUmVjdGFuZ2xlIHtcclxuICAvKipcclxuICAgKiBAcGFyYW0ge0FycmF5LjxTcHJpbmc+fSBzcHJpbmdzXHJcbiAgICogQHBhcmFtIHtNb2RlbFZpZXdUcmFuc2Zvcm0yfSBtb2RlbFZpZXdUcmFuc2Zvcm1cclxuICAgKiBAcGFyYW0ge1RhbmRlbX0gdGFuZGVtXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBzcHJpbmdzLCBtb2RlbFZpZXdUcmFuc2Zvcm0sIHRhbmRlbSwgb3B0aW9ucyApIHtcclxuXHJcbiAgICBvcHRpb25zID0gbWVyZ2UoIHtcclxuICAgICAgc2luZ2xlU3ByaW5nOiBmYWxzZVxyXG4gICAgfSwgb3B0aW9ucyApO1xyXG4gICAgaWYgKCBvcHRpb25zLnNpbmdsZVNwcmluZyA9PT0gZmFsc2UgKSB7XHJcbiAgICAgIGNvbnN0IHNwcmluZ3NTZXBhcmF0aW9uID1cclxuICAgICAgICBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdEZWx0YVgoIE1hdGguYWJzKCBzcHJpbmdzWyAwIF0ucG9zaXRpb25Qcm9wZXJ0eS5nZXQoKS54IC1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJpbmdzWyAxIF0ucG9zaXRpb25Qcm9wZXJ0eS5nZXQoKS54ICkgKTtcclxuICAgICAgY29uc3Qgc3ByaW5nSGFuZ2VyTm9kZVdpZHRoID0gc3ByaW5nc1NlcGFyYXRpb24gKiAxLjQ7XHJcblxyXG4gICAgICAvLyBYIGNvb3JkaW5hdGUgb2YgbWlkZGxlIG9mIHNwcmluZ3NcclxuICAgICAgY29uc3QgbWlkZGxlT2ZTcHJpbmdzID0gbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WCggKCBzcHJpbmdzWyAwIF0ucG9zaXRpb25Qcm9wZXJ0eS5nZXQoKS54ICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJpbmdzWyAxIF0ucG9zaXRpb25Qcm9wZXJ0eS5nZXQoKS54ICkgLyAyICk7XHJcblxyXG4gICAgICAvLyBkZXJpdmVkIGZyb20geCBwb3NpdGlvbnMgb2Ygc3ByaW5ncy5cclxuICAgICAgc3VwZXIoIDAsIDAsIHNwcmluZ0hhbmdlck5vZGVXaWR0aCwgMjAsIDgsIDgsIHtcclxuICAgICAgICBmaWxsOiBTUFJJTkdfSEFOR0VSX0ZJTEwsXHJcbiAgICAgICAgc3Ryb2tlOiAnZ3JleScsXHJcbiAgICAgICAgY2VudGVyWDogbWlkZGxlT2ZTcHJpbmdzLFxyXG4gICAgICAgIHRvcDogbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WSggTWFzc2VzQW5kU3ByaW5nc0NvbnN0YW50cy5DRUlMSU5HX1kgKSxcclxuICAgICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdzcHJpbmdIYW5nZXJOb2RlJyApXHJcbiAgICAgIH0gKTtcclxuXHJcbiAgICAgIC8vIE5vZGUgZm9yIGhhbmdlciB0ZXh0IGxhYmVsXHJcbiAgICAgIGNvbnN0IHNwcmluZ0hhbmdlckxhYmVsTm9kZSA9IG5ldyBOb2RlKCB7IHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3NwcmluZ0hhbmdlckxhYmVsTm9kZScgKSB9ICk7XHJcbiAgICAgIHNwcmluZ0hhbmdlckxhYmVsTm9kZS5hZGRDaGlsZCggbmV3IFRleHQoICcxJywge1xyXG4gICAgICAgIGZvbnQ6IFNQUklOR19IQU5HRVJfRk9OVCxcclxuICAgICAgICBjZW50ZXJYOiBzcHJpbmdzWyAwIF0ucG9zaXRpb25Qcm9wZXJ0eS5nZXQoKS54IC0gMS41LCAvLyBTbGlnaHRseSBzaGlmdGVkIHNvIHRhaWwgb2YgdGhlIG51bWJlciBvbmUgaXMgZHJhd24gYWJvdmUgc3ByaW5nIGFuY2hvclxyXG4gICAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJzEnIClcclxuICAgICAgfSApICk7XHJcbiAgICAgIHNwcmluZ0hhbmdlckxhYmVsTm9kZS5hZGRDaGlsZCggbmV3IFRleHQoICcyJywge1xyXG4gICAgICAgIGZvbnQ6IFNQUklOR19IQU5HRVJfRk9OVCxcclxuICAgICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICcyJyApLFxyXG4gICAgICAgIGNlbnRlclg6IHNwcmluZ3NTZXBhcmF0aW9uXHJcbiAgICAgIH0gKSApO1xyXG4gICAgICBzcHJpbmdIYW5nZXJMYWJlbE5vZGUuY2VudGVyWCA9IHRoaXMud2lkdGggLyAyO1xyXG4gICAgICBzcHJpbmdIYW5nZXJMYWJlbE5vZGUuY2VudGVyWSA9IHRoaXMuaGVpZ2h0IC8gMjtcclxuICAgICAgdGhpcy5hZGRDaGlsZCggc3ByaW5nSGFuZ2VyTGFiZWxOb2RlICk7XHJcbiAgICB9XHJcblxyXG4gICAgZWxzZSB7XHJcbiAgICAgIC8vIGRlcml2ZWQgZnJvbSB4IHBvc2l0aW9ucyBvZiBzcHJpbmdzLlxyXG4gICAgICBzdXBlciggMCwgMCwgNDgsIDIwLCA4LCA4LCB7XHJcbiAgICAgICAgZmlsbDogU1BSSU5HX0hBTkdFUl9GSUxMLFxyXG4gICAgICAgIHN0cm9rZTogJ2dyZXknLFxyXG4gICAgICAgIHRhbmRlbTogdGFuZGVtXHJcbiAgICAgIH0gKTtcclxuICAgIH1cclxuICAgIHRoaXMuc2V0Q29ybmVyUmFkaXVzKCBNYXNzZXNBbmRTcHJpbmdzQ29uc3RhbnRzLlBBTkVMX0NPUk5FUl9SQURJVVMgKTtcclxuICB9XHJcbn1cclxuXHJcbm1hc3Nlc0FuZFNwcmluZ3MucmVnaXN0ZXIoICdTcHJpbmdIYW5nZXJOb2RlJywgU3ByaW5nSGFuZ2VyTm9kZSApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgU3ByaW5nSGFuZ2VyTm9kZTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxLQUFLLE1BQU0sbUNBQW1DO0FBQ3JELE9BQU9DLFFBQVEsTUFBTSx5Q0FBeUM7QUFDOUQsU0FBU0MsSUFBSSxFQUFFQyxTQUFTLEVBQUVDLElBQUksUUFBUSxtQ0FBbUM7QUFDekUsT0FBT0MsZ0JBQWdCLE1BQU0sMkJBQTJCO0FBQ3hELE9BQU9DLHlCQUF5QixNQUFNLGlDQUFpQzs7QUFFdkU7QUFDQSxNQUFNQyxrQkFBa0IsR0FBRyxJQUFJTixRQUFRLENBQUU7RUFBRU8sSUFBSSxFQUFFLEVBQUU7RUFBRUMsTUFBTSxFQUFFO0FBQU8sQ0FBRSxDQUFDO0FBQ3ZFLE1BQU1DLGtCQUFrQixHQUFHLHNCQUFzQjtBQUVqRCxNQUFNQyxnQkFBZ0IsU0FBU1IsU0FBUyxDQUFDO0VBQ3ZDO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFUyxXQUFXQSxDQUFFQyxPQUFPLEVBQUVDLGtCQUFrQixFQUFFQyxNQUFNLEVBQUVDLE9BQU8sRUFBRztJQUUxREEsT0FBTyxHQUFHaEIsS0FBSyxDQUFFO01BQ2ZpQixZQUFZLEVBQUU7SUFDaEIsQ0FBQyxFQUFFRCxPQUFRLENBQUM7SUFDWixJQUFLQSxPQUFPLENBQUNDLFlBQVksS0FBSyxLQUFLLEVBQUc7TUFDcEMsTUFBTUMsaUJBQWlCLEdBQ3JCSixrQkFBa0IsQ0FBQ0ssaUJBQWlCLENBQUVDLElBQUksQ0FBQ0MsR0FBRyxDQUFFUixPQUFPLENBQUUsQ0FBQyxDQUFFLENBQUNTLGdCQUFnQixDQUFDQyxHQUFHLENBQUMsQ0FBQyxDQUFDQyxDQUFDLEdBQ3JDWCxPQUFPLENBQUUsQ0FBQyxDQUFFLENBQUNTLGdCQUFnQixDQUFDQyxHQUFHLENBQUMsQ0FBQyxDQUFDQyxDQUFFLENBQUUsQ0FBQztNQUMzRixNQUFNQyxxQkFBcUIsR0FBR1AsaUJBQWlCLEdBQUcsR0FBRzs7TUFFckQ7TUFDQSxNQUFNUSxlQUFlLEdBQUdaLGtCQUFrQixDQUFDYSxZQUFZLENBQUUsQ0FBRWQsT0FBTyxDQUFFLENBQUMsQ0FBRSxDQUFDUyxnQkFBZ0IsQ0FBQ0MsR0FBRyxDQUFDLENBQUMsQ0FBQ0MsQ0FBQyxHQUNyQ1gsT0FBTyxDQUFFLENBQUMsQ0FBRSxDQUFDUyxnQkFBZ0IsQ0FBQ0MsR0FBRyxDQUFDLENBQUMsQ0FBQ0MsQ0FBQyxJQUFLLENBQUUsQ0FBQzs7TUFFeEc7TUFDQSxLQUFLLENBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRUMscUJBQXFCLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7UUFDNUNHLElBQUksRUFBRWxCLGtCQUFrQjtRQUN4Qm1CLE1BQU0sRUFBRSxNQUFNO1FBQ2RDLE9BQU8sRUFBRUosZUFBZTtRQUN4QkssR0FBRyxFQUFFakIsa0JBQWtCLENBQUNrQixZQUFZLENBQUUxQix5QkFBeUIsQ0FBQzJCLFNBQVUsQ0FBQztRQUMzRWxCLE1BQU0sRUFBRUEsTUFBTSxDQUFDbUIsWUFBWSxDQUFFLGtCQUFtQjtNQUNsRCxDQUFFLENBQUM7O01BRUg7TUFDQSxNQUFNQyxxQkFBcUIsR0FBRyxJQUFJakMsSUFBSSxDQUFFO1FBQUVhLE1BQU0sRUFBRUEsTUFBTSxDQUFDbUIsWUFBWSxDQUFFLHVCQUF3QjtNQUFFLENBQUUsQ0FBQztNQUNwR0MscUJBQXFCLENBQUNDLFFBQVEsQ0FBRSxJQUFJaEMsSUFBSSxDQUFFLEdBQUcsRUFBRTtRQUM3Q2lDLElBQUksRUFBRTlCLGtCQUFrQjtRQUN4QnVCLE9BQU8sRUFBRWpCLE9BQU8sQ0FBRSxDQUFDLENBQUUsQ0FBQ1MsZ0JBQWdCLENBQUNDLEdBQUcsQ0FBQyxDQUFDLENBQUNDLENBQUMsR0FBRyxHQUFHO1FBQUU7UUFDdERULE1BQU0sRUFBRUEsTUFBTSxDQUFDbUIsWUFBWSxDQUFFLEdBQUk7TUFDbkMsQ0FBRSxDQUFFLENBQUM7TUFDTEMscUJBQXFCLENBQUNDLFFBQVEsQ0FBRSxJQUFJaEMsSUFBSSxDQUFFLEdBQUcsRUFBRTtRQUM3Q2lDLElBQUksRUFBRTlCLGtCQUFrQjtRQUN4QlEsTUFBTSxFQUFFQSxNQUFNLENBQUNtQixZQUFZLENBQUUsR0FBSSxDQUFDO1FBQ2xDSixPQUFPLEVBQUVaO01BQ1gsQ0FBRSxDQUFFLENBQUM7TUFDTGlCLHFCQUFxQixDQUFDTCxPQUFPLEdBQUcsSUFBSSxDQUFDUSxLQUFLLEdBQUcsQ0FBQztNQUM5Q0gscUJBQXFCLENBQUNJLE9BQU8sR0FBRyxJQUFJLENBQUNDLE1BQU0sR0FBRyxDQUFDO01BQy9DLElBQUksQ0FBQ0osUUFBUSxDQUFFRCxxQkFBc0IsQ0FBQztJQUN4QyxDQUFDLE1BRUk7TUFDSDtNQUNBLEtBQUssQ0FBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtRQUN6QlAsSUFBSSxFQUFFbEIsa0JBQWtCO1FBQ3hCbUIsTUFBTSxFQUFFLE1BQU07UUFDZGQsTUFBTSxFQUFFQTtNQUNWLENBQUUsQ0FBQztJQUNMO0lBQ0EsSUFBSSxDQUFDMEIsZUFBZSxDQUFFbkMseUJBQXlCLENBQUNvQyxtQkFBb0IsQ0FBQztFQUN2RTtBQUNGO0FBRUFyQyxnQkFBZ0IsQ0FBQ3NDLFFBQVEsQ0FBRSxrQkFBa0IsRUFBRWhDLGdCQUFpQixDQUFDO0FBRWpFLGVBQWVBLGdCQUFnQiJ9