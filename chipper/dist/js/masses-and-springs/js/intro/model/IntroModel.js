// Copyright 2016-2022, University of Colorado Boulder

/**
 * Intro model (base type) for Masses and Springs
 *
 * @author Matt Pennington (PhET Interactive Simulations)
 * @author Denzell Barnett (PhET Interactive Simulations)
 */

import EnumerationDeprecatedProperty from '../../../../axon/js/EnumerationDeprecatedProperty.js';
import Multilink from '../../../../axon/js/Multilink.js';
import MassesAndSpringsConstants from '../../common/MassesAndSpringsConstants.js';
import ConstantMode from '../../common/model/ConstantMode.js';
import MassesAndSpringsModel from '../../common/model/MassesAndSpringsModel.js';
import SceneMode from '../../common/model/SceneMode.js';
import massesAndSprings from '../../massesAndSprings.js';
class IntroModel extends MassesAndSpringsModel {
  /**
   * @param {Tandem} tandem
   *
   */
  constructor(tandem) {
    super(tandem);
    this.basicsVersion = false;

    // Set initial springs and masses
    this.addDefaultSprings(tandem);
    this.addDefaultMasses(tandem);

    // @public {Property.<string|null>} determines which spring property to keep constant in the constants panel
    this.constantModeProperty = new EnumerationDeprecatedProperty(ConstantMode, ConstantMode.SPRING_CONSTANT, {
      tandem: tandem.createTandem('constantModeProperty')
    });

    // @public {EnumerationDeprecatedProperty.<SceneModeEnum>} determines the scene selection for the intro screen
    this.sceneModeProperty = new EnumerationDeprecatedProperty(SceneMode, SceneMode.SAME_LENGTH, {
      tandem: tandem.createTandem('sceneModeProperty')
    });

    // @public {Spring} Renamed for readability. Springs are constantly referenced.
    this.spring1 = this.springs[0];
    this.spring2 = this.springs[1];

    // We are updating the spring thickness for each spring, whenever we are on the first scene
    this.springs.forEach(spring => {
      spring.springConstantProperty.link(springConstant => {
        if (this.sceneModeProperty.get() === SceneMode.SAME_LENGTH) {
          spring.updateThickness(spring.naturalRestingLengthProperty.get(), springConstant);
        }
      });
    });

    // Array of parameters for scene 1
    let sameLengthModeSpringState = this.getSpringState();

    // Array of parameters for scene 2
    this.spring1.naturalRestingLengthProperty.set(MassesAndSpringsConstants.DEFAULT_SPRING_LENGTH / 2);
    let adjustableLengthModeSpringState = this.getSpringState();
    this.spring1.naturalRestingLengthProperty.set(MassesAndSpringsConstants.DEFAULT_SPRING_LENGTH);

    // Link that is responsible for switching the scenes
    this.sceneModeProperty.lazyLink(scene => {
      if (scene === SceneMode.SAME_LENGTH) {
        // Manages stashing and applying parameters to each scene
        this.resetScene(true);

        // reset the spring stop buttons
        this.spring1.buttonEnabledProperty.reset();
        this.spring2.buttonEnabledProperty.reset();

        // save the state of the adjustable length scene
        adjustableLengthModeSpringState = this.getSpringState();
        this.setSpringState(sameLengthModeSpringState);
      } else if (scene === SceneMode.ADJUSTABLE_LENGTH) {
        // Manages stashing and applying parameters to each scene
        this.resetScene(true);

        // Reset the spring stop buttons
        this.spring1.buttonEnabledProperty.reset();
        this.spring2.buttonEnabledProperty.reset();

        // save the state of the same length scene
        sameLengthModeSpringState = this.getSpringState();
        this.setSpringState(adjustableLengthModeSpringState);
      }
    });

    // Manages logic for updating spring thickness and spring constant
    this.spring1.naturalRestingLengthProperty.link(naturalRestingLength => {
      // Functions used to determine the inverse relationship between the length and springConstant/thickness
      // SpringConstant = constant --> As length increases, spring thickness decreases (and vice versa)
      // Thickness = constant --> As length increases, spring constant decreases  (and vice versa)
      if (this.constantModeProperty.get() === this.constantModeProperty.SPRING_CONSTANT) {
        this.spring1.updateThickness(naturalRestingLength, this.spring1.springConstantProperty.get());
      } else if (this.constantModeProperty.get() === this.constantModeProperty.SPRING_THICKNESS) {
        this.spring1.updateSpringConstant(naturalRestingLength, this.spring1.thicknessProperty.get());
      }
    });
    Multilink.multilink([this.constantModeProperty, this.sceneModeProperty], (selectedConstant, scene) => {
      // Only adjust thickness/springConstant on adjustableLength scene
      if (scene === SceneMode.ADJUSTABLE_LENGTH) {
        // Manages logic for changing between constant parameters
        if (selectedConstant === ConstantMode.SPRING_CONSTANT) {
          this.spring1.springConstantProperty.reset();
          this.spring1.updateThickness(this.spring1.naturalRestingLengthProperty.get(), this.spring1.springConstantProperty.get());
        } else if (selectedConstant === ConstantMode.SPRING_THICKNESS) {
          this.spring1.thicknessProperty.reset();
          this.spring1.updateSpringConstant(this.spring1.naturalRestingLengthProperty.get(), this.spring1.thicknessProperty.get());
        }
      }
    });
  }

  /**
   * @override
   *
   * @public
   */
  reset() {
    super.reset();
    this.sceneModeProperty.reset();
    this.constantModeProperty.reset();
    this.initializeScenes();
  }

  /**
   * Responsible for preserving the properties of the masses and springs then stores them in a mutable object.
   *
   * @private
   */
  getSpringState() {
    return {
      spring1State: this.spring1.getSpringState(),
      spring2State: this.spring2.getSpringState()
    };
  }

  /**
   * Responsible for setting the properties of the masses and springs.
   * @param {Object} sceneState: Contains properties of springs and masses. See getSpringState().
   *
   * @private
   */
  setSpringState(sceneState) {
    this.spring1.setSpringState(sceneState.spring1State);
    this.spring2.setSpringState(sceneState.spring2State);
  }

  /**
   * Resets the properties of the masses and springs. The entire sim isn't reset, just the properties affectign the
   * masses and the springs.
   * @private
   *
   * @param {boolean} massesOnly
   */
  resetScene(massesOnly) {
    if (massesOnly === false) {
      this.spring1.reset();
      this.spring2.reset();
    }
    this.masses.forEach(mass => {
      mass.reset();
    });

    // We are resetting the springs' displacement Property to recalculate an appropriate length (derived property)
    this.springs.forEach(spring => {
      if (spring.massAttachedProperty.get()) {
        spring.massAttachedProperty.reset();
        spring.displacementProperty.reset();
      }
    });
  }

  /**
   * Resets both scenes of intro screen to initial sim state. This resets only the properties affecting the masses
   * and the springs.
   *
   * @private
   */
  initializeScenes() {
    this.sceneModeProperty.set(SceneMode.ADJUSTABLE_LENGTH);
    this.resetScene(false);
    this.spring1.naturalRestingLengthProperty.set(0.25);

    // initial parameters set for both scenes
    this.sceneModeProperty.set(SceneMode.SAME_LENGTH);
    this.resetScene(false);
  }
}
massesAndSprings.register('IntroModel', IntroModel);
export default IntroModel;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFbnVtZXJhdGlvbkRlcHJlY2F0ZWRQcm9wZXJ0eSIsIk11bHRpbGluayIsIk1hc3Nlc0FuZFNwcmluZ3NDb25zdGFudHMiLCJDb25zdGFudE1vZGUiLCJNYXNzZXNBbmRTcHJpbmdzTW9kZWwiLCJTY2VuZU1vZGUiLCJtYXNzZXNBbmRTcHJpbmdzIiwiSW50cm9Nb2RlbCIsImNvbnN0cnVjdG9yIiwidGFuZGVtIiwiYmFzaWNzVmVyc2lvbiIsImFkZERlZmF1bHRTcHJpbmdzIiwiYWRkRGVmYXVsdE1hc3NlcyIsImNvbnN0YW50TW9kZVByb3BlcnR5IiwiU1BSSU5HX0NPTlNUQU5UIiwiY3JlYXRlVGFuZGVtIiwic2NlbmVNb2RlUHJvcGVydHkiLCJTQU1FX0xFTkdUSCIsInNwcmluZzEiLCJzcHJpbmdzIiwic3ByaW5nMiIsImZvckVhY2giLCJzcHJpbmciLCJzcHJpbmdDb25zdGFudFByb3BlcnR5IiwibGluayIsInNwcmluZ0NvbnN0YW50IiwiZ2V0IiwidXBkYXRlVGhpY2tuZXNzIiwibmF0dXJhbFJlc3RpbmdMZW5ndGhQcm9wZXJ0eSIsInNhbWVMZW5ndGhNb2RlU3ByaW5nU3RhdGUiLCJnZXRTcHJpbmdTdGF0ZSIsInNldCIsIkRFRkFVTFRfU1BSSU5HX0xFTkdUSCIsImFkanVzdGFibGVMZW5ndGhNb2RlU3ByaW5nU3RhdGUiLCJsYXp5TGluayIsInNjZW5lIiwicmVzZXRTY2VuZSIsImJ1dHRvbkVuYWJsZWRQcm9wZXJ0eSIsInJlc2V0Iiwic2V0U3ByaW5nU3RhdGUiLCJBREpVU1RBQkxFX0xFTkdUSCIsIm5hdHVyYWxSZXN0aW5nTGVuZ3RoIiwiU1BSSU5HX1RISUNLTkVTUyIsInVwZGF0ZVNwcmluZ0NvbnN0YW50IiwidGhpY2tuZXNzUHJvcGVydHkiLCJtdWx0aWxpbmsiLCJzZWxlY3RlZENvbnN0YW50IiwiaW5pdGlhbGl6ZVNjZW5lcyIsInNwcmluZzFTdGF0ZSIsInNwcmluZzJTdGF0ZSIsInNjZW5lU3RhdGUiLCJtYXNzZXNPbmx5IiwibWFzc2VzIiwibWFzcyIsIm1hc3NBdHRhY2hlZFByb3BlcnR5IiwiZGlzcGxhY2VtZW50UHJvcGVydHkiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkludHJvTW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTYtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogSW50cm8gbW9kZWwgKGJhc2UgdHlwZSkgZm9yIE1hc3NlcyBhbmQgU3ByaW5nc1xyXG4gKlxyXG4gKiBAYXV0aG9yIE1hdHQgUGVubmluZ3RvbiAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICogQGF1dGhvciBEZW56ZWxsIEJhcm5ldHQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IEVudW1lcmF0aW9uRGVwcmVjYXRlZFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvRW51bWVyYXRpb25EZXByZWNhdGVkUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgTXVsdGlsaW5rIGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvTXVsdGlsaW5rLmpzJztcclxuaW1wb3J0IE1hc3Nlc0FuZFNwcmluZ3NDb25zdGFudHMgZnJvbSAnLi4vLi4vY29tbW9uL01hc3Nlc0FuZFNwcmluZ3NDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgQ29uc3RhbnRNb2RlIGZyb20gJy4uLy4uL2NvbW1vbi9tb2RlbC9Db25zdGFudE1vZGUuanMnO1xyXG5pbXBvcnQgTWFzc2VzQW5kU3ByaW5nc01vZGVsIGZyb20gJy4uLy4uL2NvbW1vbi9tb2RlbC9NYXNzZXNBbmRTcHJpbmdzTW9kZWwuanMnO1xyXG5pbXBvcnQgU2NlbmVNb2RlIGZyb20gJy4uLy4uL2NvbW1vbi9tb2RlbC9TY2VuZU1vZGUuanMnO1xyXG5pbXBvcnQgbWFzc2VzQW5kU3ByaW5ncyBmcm9tICcuLi8uLi9tYXNzZXNBbmRTcHJpbmdzLmpzJztcclxuXHJcbmNsYXNzIEludHJvTW9kZWwgZXh0ZW5kcyBNYXNzZXNBbmRTcHJpbmdzTW9kZWwge1xyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7VGFuZGVtfSB0YW5kZW1cclxuICAgKlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCB0YW5kZW0gKSB7XHJcblxyXG4gICAgc3VwZXIoIHRhbmRlbSApO1xyXG4gICAgdGhpcy5iYXNpY3NWZXJzaW9uID0gZmFsc2U7XHJcblxyXG4gICAgLy8gU2V0IGluaXRpYWwgc3ByaW5ncyBhbmQgbWFzc2VzXHJcbiAgICB0aGlzLmFkZERlZmF1bHRTcHJpbmdzKCB0YW5kZW0gKTtcclxuICAgIHRoaXMuYWRkRGVmYXVsdE1hc3NlcyggdGFuZGVtICk7XHJcblxyXG4gICAgLy8gQHB1YmxpYyB7UHJvcGVydHkuPHN0cmluZ3xudWxsPn0gZGV0ZXJtaW5lcyB3aGljaCBzcHJpbmcgcHJvcGVydHkgdG8ga2VlcCBjb25zdGFudCBpbiB0aGUgY29uc3RhbnRzIHBhbmVsXHJcbiAgICB0aGlzLmNvbnN0YW50TW9kZVByb3BlcnR5ID0gbmV3IEVudW1lcmF0aW9uRGVwcmVjYXRlZFByb3BlcnR5KCBDb25zdGFudE1vZGUsIENvbnN0YW50TW9kZS5TUFJJTkdfQ09OU1RBTlQsIHtcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnY29uc3RhbnRNb2RlUHJvcGVydHknIClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBAcHVibGljIHtFbnVtZXJhdGlvbkRlcHJlY2F0ZWRQcm9wZXJ0eS48U2NlbmVNb2RlRW51bT59IGRldGVybWluZXMgdGhlIHNjZW5lIHNlbGVjdGlvbiBmb3IgdGhlIGludHJvIHNjcmVlblxyXG4gICAgdGhpcy5zY2VuZU1vZGVQcm9wZXJ0eSA9IG5ldyBFbnVtZXJhdGlvbkRlcHJlY2F0ZWRQcm9wZXJ0eSggU2NlbmVNb2RlLCBTY2VuZU1vZGUuU0FNRV9MRU5HVEgsIHtcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnc2NlbmVNb2RlUHJvcGVydHknIClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBAcHVibGljIHtTcHJpbmd9IFJlbmFtZWQgZm9yIHJlYWRhYmlsaXR5LiBTcHJpbmdzIGFyZSBjb25zdGFudGx5IHJlZmVyZW5jZWQuXHJcbiAgICB0aGlzLnNwcmluZzEgPSB0aGlzLnNwcmluZ3NbIDAgXTtcclxuICAgIHRoaXMuc3ByaW5nMiA9IHRoaXMuc3ByaW5nc1sgMSBdO1xyXG5cclxuICAgIC8vIFdlIGFyZSB1cGRhdGluZyB0aGUgc3ByaW5nIHRoaWNrbmVzcyBmb3IgZWFjaCBzcHJpbmcsIHdoZW5ldmVyIHdlIGFyZSBvbiB0aGUgZmlyc3Qgc2NlbmVcclxuICAgIHRoaXMuc3ByaW5ncy5mb3JFYWNoKCBzcHJpbmcgPT4ge1xyXG4gICAgICBzcHJpbmcuc3ByaW5nQ29uc3RhbnRQcm9wZXJ0eS5saW5rKCBzcHJpbmdDb25zdGFudCA9PiB7XHJcbiAgICAgICAgaWYgKCB0aGlzLnNjZW5lTW9kZVByb3BlcnR5LmdldCgpID09PSBTY2VuZU1vZGUuU0FNRV9MRU5HVEggKSB7XHJcbiAgICAgICAgICBzcHJpbmcudXBkYXRlVGhpY2tuZXNzKCBzcHJpbmcubmF0dXJhbFJlc3RpbmdMZW5ndGhQcm9wZXJ0eS5nZXQoKSwgc3ByaW5nQ29uc3RhbnQgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gKTtcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBBcnJheSBvZiBwYXJhbWV0ZXJzIGZvciBzY2VuZSAxXHJcbiAgICBsZXQgc2FtZUxlbmd0aE1vZGVTcHJpbmdTdGF0ZSA9IHRoaXMuZ2V0U3ByaW5nU3RhdGUoKTtcclxuXHJcbiAgICAvLyBBcnJheSBvZiBwYXJhbWV0ZXJzIGZvciBzY2VuZSAyXHJcbiAgICB0aGlzLnNwcmluZzEubmF0dXJhbFJlc3RpbmdMZW5ndGhQcm9wZXJ0eS5zZXQoIE1hc3Nlc0FuZFNwcmluZ3NDb25zdGFudHMuREVGQVVMVF9TUFJJTkdfTEVOR1RIIC8gMiApO1xyXG4gICAgbGV0IGFkanVzdGFibGVMZW5ndGhNb2RlU3ByaW5nU3RhdGUgPSB0aGlzLmdldFNwcmluZ1N0YXRlKCk7XHJcblxyXG4gICAgdGhpcy5zcHJpbmcxLm5hdHVyYWxSZXN0aW5nTGVuZ3RoUHJvcGVydHkuc2V0KCBNYXNzZXNBbmRTcHJpbmdzQ29uc3RhbnRzLkRFRkFVTFRfU1BSSU5HX0xFTkdUSCApO1xyXG5cclxuICAgIC8vIExpbmsgdGhhdCBpcyByZXNwb25zaWJsZSBmb3Igc3dpdGNoaW5nIHRoZSBzY2VuZXNcclxuICAgIHRoaXMuc2NlbmVNb2RlUHJvcGVydHkubGF6eUxpbmsoIHNjZW5lID0+IHtcclxuICAgICAgaWYgKCBzY2VuZSA9PT0gU2NlbmVNb2RlLlNBTUVfTEVOR1RIICkge1xyXG5cclxuICAgICAgICAvLyBNYW5hZ2VzIHN0YXNoaW5nIGFuZCBhcHBseWluZyBwYXJhbWV0ZXJzIHRvIGVhY2ggc2NlbmVcclxuICAgICAgICB0aGlzLnJlc2V0U2NlbmUoIHRydWUgKTtcclxuXHJcbiAgICAgICAgLy8gcmVzZXQgdGhlIHNwcmluZyBzdG9wIGJ1dHRvbnNcclxuICAgICAgICB0aGlzLnNwcmluZzEuYnV0dG9uRW5hYmxlZFByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICAgICAgdGhpcy5zcHJpbmcyLmJ1dHRvbkVuYWJsZWRQcm9wZXJ0eS5yZXNldCgpO1xyXG5cclxuICAgICAgICAvLyBzYXZlIHRoZSBzdGF0ZSBvZiB0aGUgYWRqdXN0YWJsZSBsZW5ndGggc2NlbmVcclxuICAgICAgICBhZGp1c3RhYmxlTGVuZ3RoTW9kZVNwcmluZ1N0YXRlID0gdGhpcy5nZXRTcHJpbmdTdGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuc2V0U3ByaW5nU3RhdGUoIHNhbWVMZW5ndGhNb2RlU3ByaW5nU3RhdGUgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZWxzZSBpZiAoIHNjZW5lID09PSBTY2VuZU1vZGUuQURKVVNUQUJMRV9MRU5HVEggKSB7XHJcblxyXG4gICAgICAgIC8vIE1hbmFnZXMgc3Rhc2hpbmcgYW5kIGFwcGx5aW5nIHBhcmFtZXRlcnMgdG8gZWFjaCBzY2VuZVxyXG4gICAgICAgIHRoaXMucmVzZXRTY2VuZSggdHJ1ZSApO1xyXG5cclxuICAgICAgICAvLyBSZXNldCB0aGUgc3ByaW5nIHN0b3AgYnV0dG9uc1xyXG4gICAgICAgIHRoaXMuc3ByaW5nMS5idXR0b25FbmFibGVkUHJvcGVydHkucmVzZXQoKTtcclxuICAgICAgICB0aGlzLnNwcmluZzIuYnV0dG9uRW5hYmxlZFByb3BlcnR5LnJlc2V0KCk7XHJcblxyXG4gICAgICAgIC8vIHNhdmUgdGhlIHN0YXRlIG9mIHRoZSBzYW1lIGxlbmd0aCBzY2VuZVxyXG4gICAgICAgIHNhbWVMZW5ndGhNb2RlU3ByaW5nU3RhdGUgPSB0aGlzLmdldFNwcmluZ1N0YXRlKCk7XHJcbiAgICAgICAgdGhpcy5zZXRTcHJpbmdTdGF0ZSggYWRqdXN0YWJsZUxlbmd0aE1vZGVTcHJpbmdTdGF0ZSApO1xyXG4gICAgICB9XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gTWFuYWdlcyBsb2dpYyBmb3IgdXBkYXRpbmcgc3ByaW5nIHRoaWNrbmVzcyBhbmQgc3ByaW5nIGNvbnN0YW50XHJcbiAgICB0aGlzLnNwcmluZzEubmF0dXJhbFJlc3RpbmdMZW5ndGhQcm9wZXJ0eS5saW5rKCBuYXR1cmFsUmVzdGluZ0xlbmd0aCA9PiB7XHJcblxyXG4gICAgICAvLyBGdW5jdGlvbnMgdXNlZCB0byBkZXRlcm1pbmUgdGhlIGludmVyc2UgcmVsYXRpb25zaGlwIGJldHdlZW4gdGhlIGxlbmd0aCBhbmQgc3ByaW5nQ29uc3RhbnQvdGhpY2tuZXNzXHJcbiAgICAgIC8vIFNwcmluZ0NvbnN0YW50ID0gY29uc3RhbnQgLS0+IEFzIGxlbmd0aCBpbmNyZWFzZXMsIHNwcmluZyB0aGlja25lc3MgZGVjcmVhc2VzIChhbmQgdmljZSB2ZXJzYSlcclxuICAgICAgLy8gVGhpY2tuZXNzID0gY29uc3RhbnQgLS0+IEFzIGxlbmd0aCBpbmNyZWFzZXMsIHNwcmluZyBjb25zdGFudCBkZWNyZWFzZXMgIChhbmQgdmljZSB2ZXJzYSlcclxuICAgICAgaWYgKCB0aGlzLmNvbnN0YW50TW9kZVByb3BlcnR5LmdldCgpID09PSB0aGlzLmNvbnN0YW50TW9kZVByb3BlcnR5LlNQUklOR19DT05TVEFOVCApIHtcclxuICAgICAgICB0aGlzLnNwcmluZzEudXBkYXRlVGhpY2tuZXNzKCBuYXR1cmFsUmVzdGluZ0xlbmd0aCwgdGhpcy5zcHJpbmcxLnNwcmluZ0NvbnN0YW50UHJvcGVydHkuZ2V0KCkgKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmICggdGhpcy5jb25zdGFudE1vZGVQcm9wZXJ0eS5nZXQoKSA9PT0gdGhpcy5jb25zdGFudE1vZGVQcm9wZXJ0eS5TUFJJTkdfVEhJQ0tORVNTICkge1xyXG4gICAgICAgIHRoaXMuc3ByaW5nMS51cGRhdGVTcHJpbmdDb25zdGFudCggbmF0dXJhbFJlc3RpbmdMZW5ndGgsIHRoaXMuc3ByaW5nMS50aGlja25lc3NQcm9wZXJ0eS5nZXQoKSApO1xyXG4gICAgICB9XHJcbiAgICB9ICk7XHJcblxyXG4gICAgTXVsdGlsaW5rLm11bHRpbGluayggWyB0aGlzLmNvbnN0YW50TW9kZVByb3BlcnR5LCB0aGlzLnNjZW5lTW9kZVByb3BlcnR5IF0sICggc2VsZWN0ZWRDb25zdGFudCwgc2NlbmUgKSA9PiB7XHJcblxyXG4gICAgICAvLyBPbmx5IGFkanVzdCB0aGlja25lc3Mvc3ByaW5nQ29uc3RhbnQgb24gYWRqdXN0YWJsZUxlbmd0aCBzY2VuZVxyXG4gICAgICBpZiAoIHNjZW5lID09PSBTY2VuZU1vZGUuQURKVVNUQUJMRV9MRU5HVEggKSB7XHJcblxyXG4gICAgICAgIC8vIE1hbmFnZXMgbG9naWMgZm9yIGNoYW5naW5nIGJldHdlZW4gY29uc3RhbnQgcGFyYW1ldGVyc1xyXG4gICAgICAgIGlmICggc2VsZWN0ZWRDb25zdGFudCA9PT0gQ29uc3RhbnRNb2RlLlNQUklOR19DT05TVEFOVCApIHtcclxuICAgICAgICAgIHRoaXMuc3ByaW5nMS5zcHJpbmdDb25zdGFudFByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICAgICAgICB0aGlzLnNwcmluZzEudXBkYXRlVGhpY2tuZXNzKCB0aGlzLnNwcmluZzEubmF0dXJhbFJlc3RpbmdMZW5ndGhQcm9wZXJ0eS5nZXQoKSwgdGhpcy5zcHJpbmcxLnNwcmluZ0NvbnN0YW50UHJvcGVydHkuZ2V0KCkgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoIHNlbGVjdGVkQ29uc3RhbnQgPT09IENvbnN0YW50TW9kZS5TUFJJTkdfVEhJQ0tORVNTICkge1xyXG4gICAgICAgICAgdGhpcy5zcHJpbmcxLnRoaWNrbmVzc1Byb3BlcnR5LnJlc2V0KCk7XHJcbiAgICAgICAgICB0aGlzLnNwcmluZzEudXBkYXRlU3ByaW5nQ29uc3RhbnQoIHRoaXMuc3ByaW5nMS5uYXR1cmFsUmVzdGluZ0xlbmd0aFByb3BlcnR5LmdldCgpLCB0aGlzLnNwcmluZzEudGhpY2tuZXNzUHJvcGVydHkuZ2V0KCkgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gKTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBAb3ZlcnJpZGVcclxuICAgKlxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICByZXNldCgpIHtcclxuICAgIHN1cGVyLnJlc2V0KCk7XHJcblxyXG4gICAgdGhpcy5zY2VuZU1vZGVQcm9wZXJ0eS5yZXNldCgpO1xyXG4gICAgdGhpcy5jb25zdGFudE1vZGVQcm9wZXJ0eS5yZXNldCgpO1xyXG4gICAgdGhpcy5pbml0aWFsaXplU2NlbmVzKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXNwb25zaWJsZSBmb3IgcHJlc2VydmluZyB0aGUgcHJvcGVydGllcyBvZiB0aGUgbWFzc2VzIGFuZCBzcHJpbmdzIHRoZW4gc3RvcmVzIHRoZW0gaW4gYSBtdXRhYmxlIG9iamVjdC5cclxuICAgKlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgZ2V0U3ByaW5nU3RhdGUoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzcHJpbmcxU3RhdGU6IHRoaXMuc3ByaW5nMS5nZXRTcHJpbmdTdGF0ZSgpLFxyXG4gICAgICBzcHJpbmcyU3RhdGU6IHRoaXMuc3ByaW5nMi5nZXRTcHJpbmdTdGF0ZSgpXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVzcG9uc2libGUgZm9yIHNldHRpbmcgdGhlIHByb3BlcnRpZXMgb2YgdGhlIG1hc3NlcyBhbmQgc3ByaW5ncy5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gc2NlbmVTdGF0ZTogQ29udGFpbnMgcHJvcGVydGllcyBvZiBzcHJpbmdzIGFuZCBtYXNzZXMuIFNlZSBnZXRTcHJpbmdTdGF0ZSgpLlxyXG4gICAqXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBzZXRTcHJpbmdTdGF0ZSggc2NlbmVTdGF0ZSApIHtcclxuICAgIHRoaXMuc3ByaW5nMS5zZXRTcHJpbmdTdGF0ZSggc2NlbmVTdGF0ZS5zcHJpbmcxU3RhdGUgKTtcclxuICAgIHRoaXMuc3ByaW5nMi5zZXRTcHJpbmdTdGF0ZSggc2NlbmVTdGF0ZS5zcHJpbmcyU3RhdGUgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlc2V0cyB0aGUgcHJvcGVydGllcyBvZiB0aGUgbWFzc2VzIGFuZCBzcHJpbmdzLiBUaGUgZW50aXJlIHNpbSBpc24ndCByZXNldCwganVzdCB0aGUgcHJvcGVydGllcyBhZmZlY3RpZ24gdGhlXHJcbiAgICogbWFzc2VzIGFuZCB0aGUgc3ByaW5ncy5cclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBtYXNzZXNPbmx5XHJcbiAgICovXHJcbiAgcmVzZXRTY2VuZSggbWFzc2VzT25seSApIHtcclxuICAgIGlmICggbWFzc2VzT25seSA9PT0gZmFsc2UgKSB7XHJcbiAgICAgIHRoaXMuc3ByaW5nMS5yZXNldCgpO1xyXG4gICAgICB0aGlzLnNwcmluZzIucmVzZXQoKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm1hc3Nlcy5mb3JFYWNoKCBtYXNzID0+IHtcclxuICAgICAgbWFzcy5yZXNldCgpO1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIFdlIGFyZSByZXNldHRpbmcgdGhlIHNwcmluZ3MnIGRpc3BsYWNlbWVudCBQcm9wZXJ0eSB0byByZWNhbGN1bGF0ZSBhbiBhcHByb3ByaWF0ZSBsZW5ndGggKGRlcml2ZWQgcHJvcGVydHkpXHJcbiAgICB0aGlzLnNwcmluZ3MuZm9yRWFjaCggc3ByaW5nID0+IHtcclxuICAgICAgaWYgKCBzcHJpbmcubWFzc0F0dGFjaGVkUHJvcGVydHkuZ2V0KCkgKSB7XHJcbiAgICAgICAgc3ByaW5nLm1hc3NBdHRhY2hlZFByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICAgICAgc3ByaW5nLmRpc3BsYWNlbWVudFByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICAgIH1cclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlc2V0cyBib3RoIHNjZW5lcyBvZiBpbnRybyBzY3JlZW4gdG8gaW5pdGlhbCBzaW0gc3RhdGUuIFRoaXMgcmVzZXRzIG9ubHkgdGhlIHByb3BlcnRpZXMgYWZmZWN0aW5nIHRoZSBtYXNzZXNcclxuICAgKiBhbmQgdGhlIHNwcmluZ3MuXHJcbiAgICpcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIGluaXRpYWxpemVTY2VuZXMoKSB7XHJcbiAgICB0aGlzLnNjZW5lTW9kZVByb3BlcnR5LnNldCggU2NlbmVNb2RlLkFESlVTVEFCTEVfTEVOR1RIICk7XHJcbiAgICB0aGlzLnJlc2V0U2NlbmUoIGZhbHNlICk7XHJcbiAgICB0aGlzLnNwcmluZzEubmF0dXJhbFJlc3RpbmdMZW5ndGhQcm9wZXJ0eS5zZXQoIDAuMjUgKTtcclxuXHJcbiAgICAvLyBpbml0aWFsIHBhcmFtZXRlcnMgc2V0IGZvciBib3RoIHNjZW5lc1xyXG4gICAgdGhpcy5zY2VuZU1vZGVQcm9wZXJ0eS5zZXQoIFNjZW5lTW9kZS5TQU1FX0xFTkdUSCApO1xyXG4gICAgdGhpcy5yZXNldFNjZW5lKCBmYWxzZSApO1xyXG4gIH1cclxufVxyXG5cclxubWFzc2VzQW5kU3ByaW5ncy5yZWdpc3RlciggJ0ludHJvTW9kZWwnLCBJbnRyb01vZGVsICk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBJbnRyb01vZGVsOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLDZCQUE2QixNQUFNLHNEQUFzRDtBQUNoRyxPQUFPQyxTQUFTLE1BQU0sa0NBQWtDO0FBQ3hELE9BQU9DLHlCQUF5QixNQUFNLDJDQUEyQztBQUNqRixPQUFPQyxZQUFZLE1BQU0sb0NBQW9DO0FBQzdELE9BQU9DLHFCQUFxQixNQUFNLDZDQUE2QztBQUMvRSxPQUFPQyxTQUFTLE1BQU0saUNBQWlDO0FBQ3ZELE9BQU9DLGdCQUFnQixNQUFNLDJCQUEyQjtBQUV4RCxNQUFNQyxVQUFVLFNBQVNILHFCQUFxQixDQUFDO0VBQzdDO0FBQ0Y7QUFDQTtBQUNBO0VBQ0VJLFdBQVdBLENBQUVDLE1BQU0sRUFBRztJQUVwQixLQUFLLENBQUVBLE1BQU8sQ0FBQztJQUNmLElBQUksQ0FBQ0MsYUFBYSxHQUFHLEtBQUs7O0lBRTFCO0lBQ0EsSUFBSSxDQUFDQyxpQkFBaUIsQ0FBRUYsTUFBTyxDQUFDO0lBQ2hDLElBQUksQ0FBQ0csZ0JBQWdCLENBQUVILE1BQU8sQ0FBQzs7SUFFL0I7SUFDQSxJQUFJLENBQUNJLG9CQUFvQixHQUFHLElBQUliLDZCQUE2QixDQUFFRyxZQUFZLEVBQUVBLFlBQVksQ0FBQ1csZUFBZSxFQUFFO01BQ3pHTCxNQUFNLEVBQUVBLE1BQU0sQ0FBQ00sWUFBWSxDQUFFLHNCQUF1QjtJQUN0RCxDQUFFLENBQUM7O0lBRUg7SUFDQSxJQUFJLENBQUNDLGlCQUFpQixHQUFHLElBQUloQiw2QkFBNkIsQ0FBRUssU0FBUyxFQUFFQSxTQUFTLENBQUNZLFdBQVcsRUFBRTtNQUM1RlIsTUFBTSxF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