// Copyright 2016-2021, University of Colorado Boulder

/**
 * Screen view used for lab screen.
 *
 * @author Matt Pennington (PhET Interactive Simulations)
 * @author Denzell Barnett (PhET Interactive Simulations)
 */

import Vector2 from '../../../../dot/js/Vector2.js';
import { VBox } from '../../../../scenery/js/imports.js';
import MassesAndSpringsConstants from '../../common/MassesAndSpringsConstants.js';
import OneSpringScreenView from '../../common/view/OneSpringScreenView.js';
import massesAndSprings from '../../massesAndSprings.js';
import VectorVisibilityControlNode from '../../vectors/view/VectorVisibilityControlNode.js';
import PeriodTraceNode from './PeriodTraceNode.js';
class LabScreenView extends OneSpringScreenView {
  /**
   * @param {LabModel} model
   * @param {Tandem} tandem
   */
  constructor(model, tandem) {
    super(model, tandem, {
      useSliderLabels: false,
      dampingVisible: true
    });
    const vectorVisibilityControlNode = new VectorVisibilityControlNode(model, tandem.createTandem('vectorVisibilityControlNode'), {
      maxWidth: MassesAndSpringsConstants.PANEL_MAX_WIDTH + 30,
      showForces: false
    });

    // Contains visibility options for the reference lines and displacement arrow
    const indicatorVisibilityControlNode = this.createIndicatorVisibilityPanel(model, true, tandem);

    // VBox that contains all of the panel's content
    const optionsVBox = new VBox({
      spacing: 10,
      children: [indicatorVisibilityControlNode, MassesAndSpringsConstants.LINE_SEPARATOR(165), this.gravityAndDampingControlNode, MassesAndSpringsConstants.LINE_SEPARATOR(165), vectorVisibilityControlNode]
    });

    // @protected {PeriodTraceNode}
    this.periodTraceNode = new PeriodTraceNode(model.firstSpring.periodTrace, this.modelViewTransform, {
      center: this.massEquilibriumLineNode.center
    });
    this.addChild(this.periodTraceNode);
    this.periodTraceNode.moveToBack();

    // Panel that will display all the toggleable options.
    const optionsPanel = this.createOptionsPanel(optionsVBox, this.rightPanelAlignGroup, tandem);

    // Contains all of the options for the reference lines, gravity, damping, and toolbox
    const rightPanelsVBox = new VBox({
      children: [optionsPanel, this.toolboxPanel],
      spacing: this.spacing * 0.9
    });
    this.addChild(rightPanelsVBox);
    rightPanelsVBox.moveToBack();
    this.visibleBoundsProperty.link(() => {
      rightPanelsVBox.rightTop = new Vector2(this.panelRightSpacing, this.energyGraphAccordionBox.top);
    });
    this.shelf.rectWidth = 160;
    this.shelf.left = this.energyGraphAccordionBox.right + this.spacing;

    // Move tools layer so ruler is always in front.
    this.toolsLayer.moveToFront();

    // Move this plane to the back of the scene graph
    this.backgroundDragPlane.moveToBack();
  }

  /**
   * @param {number} dt
   * @public
   * @overrides
   */
  step(dt) {
    super.step(dt);
    this.periodTraceNode.step(dt, this.model.playingProperty);
  }
}
massesAndSprings.register('LabScreenView', LabScreenView);
export default LabScreenView;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWZWN0b3IyIiwiVkJveCIsIk1hc3Nlc0FuZFNwcmluZ3NDb25zdGFudHMiLCJPbmVTcHJpbmdTY3JlZW5WaWV3IiwibWFzc2VzQW5kU3ByaW5ncyIsIlZlY3RvclZpc2liaWxpdHlDb250cm9sTm9kZSIsIlBlcmlvZFRyYWNlTm9kZSIsIkxhYlNjcmVlblZpZXciLCJjb25zdHJ1Y3RvciIsIm1vZGVsIiwidGFuZGVtIiwidXNlU2xpZGVyTGFiZWxzIiwiZGFtcGluZ1Zpc2libGUiLCJ2ZWN0b3JWaXNpYmlsaXR5Q29udHJvbE5vZGUiLCJjcmVhdGVUYW5kZW0iLCJtYXhXaWR0aCIsIlBBTkVMX01BWF9XSURUSCIsInNob3dGb3JjZXMiLCJpbmRpY2F0b3JWaXNpYmlsaXR5Q29udHJvbE5vZGUiLCJjcmVhdGVJbmRpY2F0b3JWaXNpYmlsaXR5UGFuZWwiLCJvcHRpb25zVkJveCIsInNwYWNpbmciLCJjaGlsZHJlbiIsIkxJTkVfU0VQQVJBVE9SIiwiZ3Jhdml0eUFuZERhbXBpbmdDb250cm9sTm9kZSIsInBlcmlvZFRyYWNlTm9kZSIsImZpcnN0U3ByaW5nIiwicGVyaW9kVHJhY2UiLCJtb2RlbFZpZXdUcmFuc2Zvcm0iLCJjZW50ZXIiLCJtYXNzRXF1aWxpYnJpdW1MaW5lTm9kZSIsImFkZENoaWxkIiwibW92ZVRvQmFjayIsIm9wdGlvbnNQYW5lbCIsImNyZWF0ZU9wdGlvbnNQYW5lbCIsInJpZ2h0UGFuZWxBbGlnbkdyb3VwIiwicmlnaHRQYW5lbHNWQm94IiwidG9vbGJveFBhbmVsIiwidmlzaWJsZUJvdW5kc1Byb3BlcnR5IiwibGluayIsInJpZ2h0VG9wIiwicGFuZWxSaWdodFNwYWNpbmciLCJlbmVyZ3lHcmFwaEFjY29yZGlvbkJveCIsInRvcCIsInNoZWxmIiwicmVjdFdpZHRoIiwibGVmdCIsInJpZ2h0IiwidG9vbHNMYXllciIsIm1vdmVUb0Zyb250IiwiYmFja2dyb3VuZERyYWdQbGFuZSIsInN0ZXAiLCJkdCIsInBsYXlpbmdQcm9wZXJ0eSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiTGFiU2NyZWVuVmlldy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNi0yMDIxLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBTY3JlZW4gdmlldyB1c2VkIGZvciBsYWIgc2NyZWVuLlxyXG4gKlxyXG4gKiBAYXV0aG9yIE1hdHQgUGVubmluZ3RvbiAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICogQGF1dGhvciBEZW56ZWxsIEJhcm5ldHQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgeyBWQm94IH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IE1hc3Nlc0FuZFNwcmluZ3NDb25zdGFudHMgZnJvbSAnLi4vLi4vY29tbW9uL01hc3Nlc0FuZFNwcmluZ3NDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgT25lU3ByaW5nU2NyZWVuVmlldyBmcm9tICcuLi8uLi9jb21tb24vdmlldy9PbmVTcHJpbmdTY3JlZW5WaWV3LmpzJztcclxuaW1wb3J0IG1hc3Nlc0FuZFNwcmluZ3MgZnJvbSAnLi4vLi4vbWFzc2VzQW5kU3ByaW5ncy5qcyc7XHJcbmltcG9ydCBWZWN0b3JWaXNpYmlsaXR5Q29udHJvbE5vZGUgZnJvbSAnLi4vLi4vdmVjdG9ycy92aWV3L1ZlY3RvclZpc2liaWxpdHlDb250cm9sTm9kZS5qcyc7XHJcbmltcG9ydCBQZXJpb2RUcmFjZU5vZGUgZnJvbSAnLi9QZXJpb2RUcmFjZU5vZGUuanMnO1xyXG5cclxuY2xhc3MgTGFiU2NyZWVuVmlldyBleHRlbmRzIE9uZVNwcmluZ1NjcmVlblZpZXcge1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge0xhYk1vZGVsfSBtb2RlbFxyXG4gICAqIEBwYXJhbSB7VGFuZGVtfSB0YW5kZW1cclxuICAgKi9cclxuICBjb25zdHJ1Y3RvciggbW9kZWwsIHRhbmRlbSApIHtcclxuXHJcbiAgICBzdXBlciggbW9kZWwsIHRhbmRlbSwge1xyXG4gICAgICB1c2VTbGlkZXJMYWJlbHM6IGZhbHNlLFxyXG4gICAgICBkYW1waW5nVmlzaWJsZTogdHJ1ZVxyXG4gICAgfSApO1xyXG4gICAgY29uc3QgdmVjdG9yVmlzaWJpbGl0eUNvbnRyb2xOb2RlID0gbmV3IFZlY3RvclZpc2liaWxpdHlDb250cm9sTm9kZShcclxuICAgICAgbW9kZWwsXHJcbiAgICAgIHRhbmRlbS5jcmVhdGVUYW5kZW0oICd2ZWN0b3JWaXNpYmlsaXR5Q29udHJvbE5vZGUnICksXHJcbiAgICAgIHtcclxuICAgICAgICBtYXhXaWR0aDogTWFzc2VzQW5kU3ByaW5nc0NvbnN0YW50cy5QQU5FTF9NQVhfV0lEVEggKyAzMCxcclxuICAgICAgICBzaG93Rm9yY2VzOiBmYWxzZVxyXG4gICAgICB9ICk7XHJcblxyXG4gICAgLy8gQ29udGFpbnMgdmlzaWJpbGl0eSBvcHRpb25zIGZvciB0aGUgcmVmZXJlbmNlIGxpbmVzIGFuZCBkaXNwbGFjZW1lbnQgYXJyb3dcclxuICAgIGNvbnN0IGluZGljYXRvclZpc2liaWxpdHlDb250cm9sTm9kZSA9IHRoaXMuY3JlYXRlSW5kaWNhdG9yVmlzaWJpbGl0eVBhbmVsKCBtb2RlbCwgdHJ1ZSwgdGFuZGVtICk7XHJcblxyXG4gICAgLy8gVkJveCB0aGF0IGNvbnRhaW5zIGFsbCBvZiB0aGUgcGFuZWwncyBjb250ZW50XHJcbiAgICBjb25zdCBvcHRpb25zVkJveCA9IG5ldyBWQm94KCB7XHJcbiAgICAgIHNwYWNpbmc6IDEwLFxyXG4gICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgIGluZGljYXRvclZpc2liaWxpdHlDb250cm9sTm9kZSxcclxuICAgICAgICBNYXNzZXNBbmRTcHJpbmdzQ29uc3RhbnRzLkxJTkVfU0VQQVJBVE9SKCAxNjUgKSxcclxuICAgICAgICB0aGlzLmdyYXZpdHlBbmREYW1waW5nQ29udHJvbE5vZGUsXHJcbiAgICAgICAgTWFzc2VzQW5kU3ByaW5nc0NvbnN0YW50cy5MSU5FX1NFUEFSQVRPUiggMTY1ICksXHJcbiAgICAgICAgdmVjdG9yVmlzaWJpbGl0eUNvbnRyb2xOb2RlXHJcbiAgICAgIF1cclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBAcHJvdGVjdGVkIHtQZXJpb2RUcmFjZU5vZGV9XHJcbiAgICB0aGlzLnBlcmlvZFRyYWNlTm9kZSA9IG5ldyBQZXJpb2RUcmFjZU5vZGUoIG1vZGVsLmZpcnN0U3ByaW5nLnBlcmlvZFRyYWNlLCB0aGlzLm1vZGVsVmlld1RyYW5zZm9ybSwge1xyXG4gICAgICBjZW50ZXI6IHRoaXMubWFzc0VxdWlsaWJyaXVtTGluZU5vZGUuY2VudGVyXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCB0aGlzLnBlcmlvZFRyYWNlTm9kZSApO1xyXG4gICAgdGhpcy5wZXJpb2RUcmFjZU5vZGUubW92ZVRvQmFjaygpO1xyXG5cclxuICAgIC8vIFBhbmVsIHRoYXQgd2lsbCBkaXNwbGF5IGFsbCB0aGUgdG9nZ2xlYWJsZSBvcHRpb25zLlxyXG4gICAgY29uc3Qgb3B0aW9uc1BhbmVsID0gdGhpcy5jcmVhdGVPcHRpb25zUGFuZWwoIG9wdGlvbnNWQm94LCB0aGlzLnJpZ2h0UGFuZWxBbGlnbkdyb3VwLCB0YW5kZW0gKTtcclxuXHJcbiAgICAvLyBDb250YWlucyBhbGwgb2YgdGhlIG9wdGlvbnMgZm9yIHRoZSByZWZlcmVuY2UgbGluZXMsIGdyYXZpdHksIGRhbXBpbmcsIGFuZCB0b29sYm94XHJcbiAgICBjb25zdCByaWdodFBhbmVsc1ZCb3ggPSBuZXcgVkJveCggeyBjaGlsZHJlbjogWyBvcHRpb25zUGFuZWwsIHRoaXMudG9vbGJveFBhbmVsIF0sIHNwYWNpbmc6IHRoaXMuc3BhY2luZyAqIDAuOSB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCByaWdodFBhbmVsc1ZCb3ggKTtcclxuICAgIHJpZ2h0UGFuZWxzVkJveC5tb3ZlVG9CYWNrKCk7XHJcblxyXG4gICAgdGhpcy52aXNpYmxlQm91bmRzUHJvcGVydHkubGluayggKCkgPT4ge1xyXG4gICAgICByaWdodFBhbmVsc1ZCb3gucmlnaHRUb3AgPSBuZXcgVmVjdG9yMiggdGhpcy5wYW5lbFJpZ2h0U3BhY2luZywgdGhpcy5lbmVyZ3lHcmFwaEFjY29yZGlvbkJveC50b3AgKTtcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLnNoZWxmLnJlY3RXaWR0aCA9IDE2MDtcclxuICAgIHRoaXMuc2hlbGYubGVmdCA9IHRoaXMuZW5lcmd5R3JhcGhBY2NvcmRpb25Cb3gucmlnaHQgKyB0aGlzLnNwYWNpbmc7XHJcblxyXG4gICAgLy8gTW92ZSB0b29scyBsYXllciBzbyBydWxlciBpcyBhbHdheXMgaW4gZnJvbnQuXHJcbiAgICB0aGlzLnRvb2xzTGF5ZXIubW92ZVRvRnJvbnQoKTtcclxuXHJcbiAgICAvLyBNb3ZlIHRoaXMgcGxhbmUgdG8gdGhlIGJhY2sgb2YgdGhlIHNjZW5lIGdyYXBoXHJcbiAgICB0aGlzLmJhY2tncm91bmREcmFnUGxhbmUubW92ZVRvQmFjaygpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGR0XHJcbiAgICogQHB1YmxpY1xyXG4gICAqIEBvdmVycmlkZXNcclxuICAgKi9cclxuICBzdGVwKCBkdCApIHtcclxuICAgIHN1cGVyLnN0ZXAoIGR0ICk7XHJcbiAgICB0aGlzLnBlcmlvZFRyYWNlTm9kZS5zdGVwKCBkdCwgdGhpcy5tb2RlbC5wbGF5aW5nUHJvcGVydHkgKTtcclxuICB9XHJcbn1cclxuXHJcbm1hc3Nlc0FuZFNwcmluZ3MucmVnaXN0ZXIoICdMYWJTY3JlZW5WaWV3JywgTGFiU2NyZWVuVmlldyApO1xyXG5leHBvcnQgZGVmYXVsdCBMYWJTY3JlZW5WaWV3OyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLE9BQU8sTUFBTSwrQkFBK0I7QUFDbkQsU0FBU0MsSUFBSSxRQUFRLG1DQUFtQztBQUN4RCxPQUFPQyx5QkFBeUIsTUFBTSwyQ0FBMkM7QUFDakYsT0FBT0MsbUJBQW1CLE1BQU0sMENBQTBDO0FBQzFFLE9BQU9DLGdCQUFnQixNQUFNLDJCQUEyQjtBQUN4RCxPQUFPQywyQkFBMkIsTUFBTSxtREFBbUQ7QUFDM0YsT0FBT0MsZUFBZSxNQUFNLHNCQUFzQjtBQUVsRCxNQUFNQyxhQUFhLFNBQVNKLG1CQUFtQixDQUFDO0VBRTlDO0FBQ0Y7QUFDQTtBQUNBO0VBQ0VLLFdBQVdBLENBQUVDLEtBQUssRUFBRUMsTUFBTSxFQUFHO0lBRTNCLEtBQUssQ0FBRUQsS0FBSyxFQUFFQyxNQUFNLEVBQUU7TUFDcEJDLGVBQWUsRUFBRSxLQUFLO01BQ3RCQyxjQUFjLEVBQUU7SUFDbEIsQ0FBRSxDQUFDO0lBQ0gsTUFBTUMsMkJBQTJCLEdBQUcsSUFBSVIsMkJBQTJCLENBQ2pFSSxLQUFLLEVBQ0xDLE1BQU0sQ0FBQ0ksWUFBWSxDQUFFLDZCQUE4QixDQUFDLEVBQ3BEO01BQ0VDLFFBQVEsRUFBRWIseUJBQXlCLENBQUNjLGVBQWUsR0FBRyxFQUFFO01BQ3hEQyxVQUFVLEVBQUU7SUFDZCxDQUFFLENBQUM7O0lBRUw7SUFDQSxNQUFNQyw4QkFBOEIsR0FBRyxJQUFJLENBQUNDLDhCQUE4QixDQUFFVixLQUFLLEVBQUUsSUFBSSxFQUFFQyxNQUFPLENBQUM7O0lBRWpHO0lBQ0EsTUFBTVUsV0FBVyxHQUFHLElBQUluQixJQUFJLENBQUU7TUFDNUJvQixPQUFPLEVBQUUsRUFBRTtNQUNYQyxRQUFRLEVBQUUsQ0FDUkosOEJBQThCLEVBQzlCaEIseUJBQXlCLENBQUNxQixjQUFjLENBQUUsR0FBSSxDQUFDLEVBQy9DLElBQUksQ0FBQ0MsNEJBQTRCLEVBQ2pDdEIseUJBQXlCLENBQUNxQixjQUFjLENBQUUsR0FBSSxDQUFDLEVBQy9DViwyQkFBMkI7SUFFL0IsQ0FBRSxDQUFDOztJQUVIO0lBQ0EsSUFBSSxDQUFDWSxlQUFlLEdBQUcsSUFBSW5CLGVBQWUsQ0FBRUcsS0FBSyxDQUFDaUIsV0FBVyxDQUFDQyxXQUFXLEVBQUUsSUFBSSxDQUFDQyxrQkFBa0IsRUFBRTtNQUNsR0MsTUFBTSxFQUFFLElBQUksQ0FBQ0MsdUJBQXVCLENBQUNEO0lBQ3ZDLENBQUUsQ0FBQztJQUNILElBQUksQ0FBQ0UsUUFBUSxDQUFFLElBQUksQ0FBQ04sZUFBZ0IsQ0FBQztJQUNyQyxJQUFJLENBQUNBLGVBQWUsQ0FBQ08sVUFBVSxDQUFDLENBQUM7O0lBRWpDO0lBQ0EsTUFBTUMsWUFBWSxHQUFHLElBQUksQ0FBQ0Msa0JBQWtCLENBQUVkLFdBQVcsRUFBRSxJQUFJLENBQUNlLG9CQUFvQixFQUFFekIsTUFBTyxDQUFDOztJQUU5RjtJQUNBLE1BQU0wQixlQUFlLEdBQUcsSUFBSW5DLElBQUksQ0FBRTtNQUFFcUIsUUFBUSxFQUFFLENBQUVXLFlBQVksRUFBRSxJQUFJLENBQUNJLFlBQVksQ0FBRTtNQUFFaEIsT0FBTyxFQUFFLElBQUksQ0FBQ0EsT0FBTyxHQUFHO0lBQUksQ0FBRSxDQUFDO0lBQ2xILElBQUksQ0FBQ1UsUUFBUSxDQUFFSyxlQUFnQixDQUFDO0lBQ2hDQSxlQUFlLENBQUNKLFVBQVUsQ0FBQyxDQUFDO0lBRTVCLElBQUksQ0FBQ00scUJBQXFCLENBQUNDLElBQUksQ0FBRSxNQUFNO01BQ3JDSCxlQUFlLENBQUNJLFFBQVEsR0FBRyxJQUFJeEMsT0FBTyxDQUFFLElBQUksQ0FBQ3lDLGlCQUFpQixFQUFFLElBQUksQ0FBQ0MsdUJBQXVCLENBQUNDLEdBQUksQ0FBQztJQUNwRyxDQUFFLENBQUM7SUFFSCxJQUFJLENBQUNDLEtBQUssQ0FBQ0MsU0FBUyxHQUFHLEdBQUc7SUFDMUIsSUFBSSxDQUFDRCxLQUFLLENBQUNFLElBQUksR0FBRyxJQUFJLENBQUNKLHVCQUF1QixDQUFDSyxLQUFLLEdBQUcsSUFBSSxDQUFDMUIsT0FBTzs7SUFFbkU7SUFDQSxJQUFJLENBQUMyQixVQUFVLENBQUNDLFdBQVcsQ0FBQyxDQUFDOztJQUU3QjtJQUNBLElBQUksQ0FBQ0MsbUJBQW1CLENBQUNsQixVQUFVLENBQUMsQ0FBQztFQUN2Qzs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBQ0VtQixJQUFJQSxDQUFFQyxFQUFFLEVBQUc7SUFDVCxLQUFLLENBQUNELElBQUksQ0FBRUMsRUFBRyxDQUFDO0lBQ2hCLElBQUksQ0FBQzNCLGVBQWUsQ0FBQzBCLElBQUksQ0FBRUMsRUFBRSxFQUFFLElBQUksQ0FBQzNDLEtBQUssQ0FBQzRDLGVBQWdCLENBQUM7RUFDN0Q7QUFDRjtBQUVBakQsZ0JBQWdCLENBQUNrRCxRQUFRLENBQUUsZUFBZSxFQUFFL0MsYUFBYyxDQUFDO0FBQzNELGVBQWVBLGFBQWEifQ==