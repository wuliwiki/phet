// Copyright 2018-2023, University of Colorado Boulder

/**
 * Graph for the 'Explore' screen.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import Multilink from '../../../../axon/js/Multilink.js';
import GQConstants from '../../common/GQConstants.js';
import GQGraphNode from '../../common/view/GQGraphNode.js';
import QuadraticNode from '../../common/view/QuadraticNode.js';
import graphingQuadratics from '../../graphingQuadratics.js';
export default class ExploreGraphNode extends GQGraphNode {
  constructor(model, viewProperties) {
    // There is no vertex displayed on this screen.
    const preventVertexAndEquationOverlap = false;

    // quadratic term, y = ax^2
    const quadraticTermNode = new QuadraticNode(model.quadraticTermProperty, model.graph.xRange, model.graph.yRange, model.modelViewTransform, viewProperties.equationForm, viewProperties.equationsVisibleProperty, {
      visibleProperty: viewProperties.quadraticTermVisibleProperty,
      lineWidth: GQConstants.QUADRATIC_TERMS_LINE_WIDTH,
      preventVertexAndEquationOverlap: preventVertexAndEquationOverlap
    });

    // linear term, y = bx
    const linearTermNode = new QuadraticNode(model.linearTermProperty, model.graph.xRange, model.graph.yRange, model.modelViewTransform, viewProperties.equationForm, viewProperties.equationsVisibleProperty, {
      visibleProperty: viewProperties.linearTermVisibleProperty,
      lineWidth: GQConstants.QUADRATIC_TERMS_LINE_WIDTH,
      preventVertexAndEquationOverlap: preventVertexAndEquationOverlap
    });

    // constant term, y = bx
    const constantTermNode = new QuadraticNode(model.constantTermProperty, model.graph.xRange, model.graph.yRange, model.modelViewTransform, viewProperties.equationForm, viewProperties.equationsVisibleProperty, {
      visibleProperty: viewProperties.constantTermVisibleProperty,
      lineWidth: GQConstants.QUADRATIC_TERMS_LINE_WIDTH,
      preventVertexAndEquationOverlap: preventVertexAndEquationOverlap
    });
    super(model, viewProperties, {
      otherCurves: [constantTermNode, linearTermNode, quadraticTermNode] // rendered in this order
    });

    // Make quadratic terms available to the point tool, if they are visible. The order of
    // model.quadraticTermsProperty determines the order that the terms will be considered by
    // point tools, so maintain the order.
    Multilink.multilink([viewProperties.quadraticTermVisibleProperty, model.quadraticTermProperty, viewProperties.linearTermVisibleProperty, model.linearTermProperty, viewProperties.constantTermVisibleProperty, model.constantTermProperty], (quadraticTermVisible, quadraticTerm, linearTermVisible, linearTerm, constantTermVisible, constantTerm) => {
      // order is important! compact to remove falsy values
      model.quadraticTermsProperty.value = _.compact([quadraticTermVisible && quadraticTerm, linearTermVisible && linearTerm, constantTermVisible && constantTerm]);
    });
  }
}
graphingQuadratics.register('ExploreGraphNode', ExploreGraphNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNdWx0aWxpbmsiLCJHUUNvbnN0YW50cyIsIkdRR3JhcGhOb2RlIiwiUXVhZHJhdGljTm9kZSIsImdyYXBoaW5nUXVhZHJhdGljcyIsIkV4cGxvcmVHcmFwaE5vZGUiLCJjb25zdHJ1Y3RvciIsIm1vZGVsIiwidmlld1Byb3BlcnRpZXMiLCJwcmV2ZW50VmVydGV4QW5kRXF1YXRpb25PdmVybGFwIiwicXVhZHJhdGljVGVybU5vZGUiLCJxdWFkcmF0aWNUZXJtUHJvcGVydHkiLCJncmFwaCIsInhSYW5nZSIsInlSYW5nZSIsIm1vZGVsVmlld1RyYW5zZm9ybSIsImVxdWF0aW9uRm9ybSIsImVxdWF0aW9uc1Zpc2libGVQcm9wZXJ0eSIsInZpc2libGVQcm9wZXJ0eSIsInF1YWRyYXRpY1Rlcm1WaXNpYmxlUHJvcGVydHkiLCJsaW5lV2lkdGgiLCJRVUFEUkFUSUNfVEVSTVNfTElORV9XSURUSCIsImxpbmVhclRlcm1Ob2RlIiwibGluZWFyVGVybVByb3BlcnR5IiwibGluZWFyVGVybVZpc2libGVQcm9wZXJ0eSIsImNvbnN0YW50VGVybU5vZGUiLCJjb25zdGFudFRlcm1Qcm9wZXJ0eSIsImNvbnN0YW50VGVybVZpc2libGVQcm9wZXJ0eSIsIm90aGVyQ3VydmVzIiwibXVsdGlsaW5rIiwicXVhZHJhdGljVGVybVZpc2libGUiLCJxdWFkcmF0aWNUZXJtIiwibGluZWFyVGVybVZpc2libGUiLCJsaW5lYXJUZXJtIiwiY29uc3RhbnRUZXJtVmlzaWJsZSIsImNvbnN0YW50VGVybSIsInF1YWRyYXRpY1Rlcm1zUHJvcGVydHkiLCJ2YWx1ZSIsIl8iLCJjb21wYWN0IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJFeHBsb3JlR3JhcGhOb2RlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE4LTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIEdyYXBoIGZvciB0aGUgJ0V4cGxvcmUnIHNjcmVlbi5cclxuICpcclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICovXHJcblxyXG5pbXBvcnQgTXVsdGlsaW5rIGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvTXVsdGlsaW5rLmpzJztcclxuaW1wb3J0IEdRQ29uc3RhbnRzIGZyb20gJy4uLy4uL2NvbW1vbi9HUUNvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBHUUdyYXBoTm9kZSBmcm9tICcuLi8uLi9jb21tb24vdmlldy9HUUdyYXBoTm9kZS5qcyc7XHJcbmltcG9ydCBRdWFkcmF0aWNOb2RlIGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L1F1YWRyYXRpY05vZGUuanMnO1xyXG5pbXBvcnQgZ3JhcGhpbmdRdWFkcmF0aWNzIGZyb20gJy4uLy4uL2dyYXBoaW5nUXVhZHJhdGljcy5qcyc7XHJcbmltcG9ydCBFeHBsb3JlTW9kZWwgZnJvbSAnLi4vbW9kZWwvRXhwbG9yZU1vZGVsLmpzJztcclxuaW1wb3J0IEV4cGxvcmVWaWV3UHJvcGVydGllcyBmcm9tICcuL0V4cGxvcmVWaWV3UHJvcGVydGllcy5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFeHBsb3JlR3JhcGhOb2RlIGV4dGVuZHMgR1FHcmFwaE5vZGUge1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIG1vZGVsOiBFeHBsb3JlTW9kZWwsIHZpZXdQcm9wZXJ0aWVzOiBFeHBsb3JlVmlld1Byb3BlcnRpZXMgKSB7XHJcblxyXG4gICAgLy8gVGhlcmUgaXMgbm8gdmVydGV4IGRpc3BsYXllZCBvbiB0aGlzIHNjcmVlbi5cclxuICAgIGNvbnN0IHByZXZlbnRWZXJ0ZXhBbmRFcXVhdGlvbk92ZXJsYXAgPSBmYWxzZTtcclxuXHJcbiAgICAvLyBxdWFkcmF0aWMgdGVybSwgeSA9IGF4XjJcclxuICAgIGNvbnN0IHF1YWRyYXRpY1Rlcm1Ob2RlID0gbmV3IFF1YWRyYXRpY05vZGUoXHJcbiAgICAgIG1vZGVsLnF1YWRyYXRpY1Rlcm1Qcm9wZXJ0eSxcclxuICAgICAgbW9kZWwuZ3JhcGgueFJhbmdlLFxyXG4gICAgICBtb2RlbC5ncmFwaC55UmFuZ2UsXHJcbiAgICAgIG1vZGVsLm1vZGVsVmlld1RyYW5zZm9ybSxcclxuICAgICAgdmlld1Byb3BlcnRpZXMuZXF1YXRpb25Gb3JtLFxyXG4gICAgICB2aWV3UHJvcGVydGllcy5lcXVhdGlvbnNWaXNpYmxlUHJvcGVydHksIHtcclxuICAgICAgICB2aXNpYmxlUHJvcGVydHk6IHZpZXdQcm9wZXJ0aWVzLnF1YWRyYXRpY1Rlcm1WaXNpYmxlUHJvcGVydHksXHJcbiAgICAgICAgbGluZVdpZHRoOiBHUUNvbnN0YW50cy5RVUFEUkFUSUNfVEVSTVNfTElORV9XSURUSCxcclxuICAgICAgICBwcmV2ZW50VmVydGV4QW5kRXF1YXRpb25PdmVybGFwOiBwcmV2ZW50VmVydGV4QW5kRXF1YXRpb25PdmVybGFwXHJcbiAgICAgIH0gKTtcclxuXHJcbiAgICAvLyBsaW5lYXIgdGVybSwgeSA9IGJ4XHJcbiAgICBjb25zdCBsaW5lYXJUZXJtTm9kZSA9IG5ldyBRdWFkcmF0aWNOb2RlKFxyXG4gICAgICBtb2RlbC5saW5lYXJUZXJtUHJvcGVydHksXHJcbiAgICAgIG1vZGVsLmdyYXBoLnhSYW5nZSxcclxuICAgICAgbW9kZWwuZ3JhcGgueVJhbmdlLFxyXG4gICAgICBtb2RlbC5tb2RlbFZpZXdUcmFuc2Zvcm0sXHJcbiAgICAgIHZpZXdQcm9wZXJ0aWVzLmVxdWF0aW9uRm9ybSxcclxuICAgICAgdmlld1Byb3BlcnRpZXMuZXF1YXRpb25zVmlzaWJsZVByb3BlcnR5LCB7XHJcbiAgICAgICAgdmlzaWJsZVByb3BlcnR5OiB2aWV3UHJvcGVydGllcy5saW5lYXJUZXJtVmlzaWJsZVByb3BlcnR5LFxyXG4gICAgICAgIGxpbmVXaWR0aDogR1FDb25zdGFudHMuUVVBRFJBVElDX1RFUk1TX0xJTkVfV0lEVEgsXHJcbiAgICAgICAgcHJldmVudFZlcnRleEFuZEVxdWF0aW9uT3ZlcmxhcDogcHJldmVudFZlcnRleEFuZEVxdWF0aW9uT3ZlcmxhcFxyXG4gICAgICB9ICk7XHJcblxyXG4gICAgLy8gY29uc3RhbnQgdGVybSwgeSA9IGJ4XHJcbiAgICBjb25zdCBjb25zdGFudFRlcm1Ob2RlID0gbmV3IFF1YWRyYXRpY05vZGUoXHJcbiAgICAgIG1vZGVsLmNvbnN0YW50VGVybVByb3BlcnR5LFxyXG4gICAgICBtb2RlbC5ncmFwaC54UmFuZ2UsXHJcbiAgICAgIG1vZGVsLmdyYXBoLnlSYW5nZSxcclxuICAgICAgbW9kZWwubW9kZWxWaWV3VHJhbnNmb3JtLFxyXG4gICAgICB2aWV3UHJvcGVydGllcy5lcXVhdGlvbkZvcm0sXHJcbiAgICAgIHZpZXdQcm9wZXJ0aWVzLmVxdWF0aW9uc1Zpc2libGVQcm9wZXJ0eSwge1xyXG4gICAgICAgIHZpc2libGVQcm9wZXJ0eTogdmlld1Byb3BlcnRpZXMuY29uc3RhbnRUZXJtVmlzaWJsZVByb3BlcnR5LFxyXG4gICAgICAgIGxpbmVXaWR0aDogR1FDb25zdGFudHMuUVVBRFJBVElDX1RFUk1TX0xJTkVfV0lEVEgsXHJcbiAgICAgICAgcHJldmVudFZlcnRleEFuZEVxdWF0aW9uT3ZlcmxhcDogcHJldmVudFZlcnRleEFuZEVxdWF0aW9uT3ZlcmxhcFxyXG4gICAgICB9ICk7XHJcblxyXG4gICAgc3VwZXIoIG1vZGVsLCB2aWV3UHJvcGVydGllcywge1xyXG4gICAgICBvdGhlckN1cnZlczogWyBjb25zdGFudFRlcm1Ob2RlLCBsaW5lYXJUZXJtTm9kZSwgcXVhZHJhdGljVGVybU5vZGUgXSAvLyByZW5kZXJlZCBpbiB0aGlzIG9yZGVyXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gTWFrZSBxdWFkcmF0aWMgdGVybXMgYXZhaWxhYmxlIHRvIHRoZSBwb2ludCB0b29sLCBpZiB0aGV5IGFyZSB2aXNpYmxlLiBUaGUgb3JkZXIgb2ZcclxuICAgIC8vIG1vZGVsLnF1YWRyYXRpY1Rlcm1zUHJvcGVydHkgZGV0ZXJtaW5lcyB0aGUgb3JkZXIgdGhhdCB0aGUgdGVybXMgd2lsbCBiZSBjb25zaWRlcmVkIGJ5XHJcbiAgICAvLyBwb2ludCB0b29scywgc28gbWFpbnRhaW4gdGhlIG9yZGVyLlxyXG4gICAgTXVsdGlsaW5rLm11bHRpbGluayggW1xyXG4gICAgICB2aWV3UHJvcGVydGllcy5xdWFkcmF0aWNUZXJtVmlzaWJsZVByb3BlcnR5LCBtb2RlbC5xdWFkcmF0aWNUZXJtUHJvcGVydHksXHJcbiAgICAgIHZpZXdQcm9wZXJ0aWVzLmxpbmVhclRlcm1WaXNpYmxlUHJvcGVydHksIG1vZGVsLmxpbmVhclRlcm1Qcm9wZXJ0eSxcclxuICAgICAgdmlld1Byb3BlcnRpZXMuY29uc3RhbnRUZXJtVmlzaWJsZVByb3BlcnR5LCBtb2RlbC5jb25zdGFudFRlcm1Qcm9wZXJ0eVxyXG4gICAgXSwgKFxyXG4gICAgICBxdWFkcmF0aWNUZXJtVmlzaWJsZSwgcXVhZHJhdGljVGVybSxcclxuICAgICAgbGluZWFyVGVybVZpc2libGUsIGxpbmVhclRlcm0sXHJcbiAgICAgIGNvbnN0YW50VGVybVZpc2libGUsIGNvbnN0YW50VGVybVxyXG4gICAgKSA9PiB7XHJcbiAgICAgIC8vIG9yZGVyIGlzIGltcG9ydGFudCEgY29tcGFjdCB0byByZW1vdmUgZmFsc3kgdmFsdWVzXHJcbiAgICAgIG1vZGVsLnF1YWRyYXRpY1Rlcm1zUHJvcGVydHkudmFsdWUgPSBfLmNvbXBhY3QoIFtcclxuICAgICAgICBxdWFkcmF0aWNUZXJtVmlzaWJsZSAmJiBxdWFkcmF0aWNUZXJtLFxyXG4gICAgICAgIGxpbmVhclRlcm1WaXNpYmxlICYmIGxpbmVhclRlcm0sXHJcbiAgICAgICAgY29uc3RhbnRUZXJtVmlzaWJsZSAmJiBjb25zdGFudFRlcm1cclxuICAgICAgXSApO1xyXG4gICAgfSApO1xyXG4gIH1cclxufVxyXG5cclxuZ3JhcGhpbmdRdWFkcmF0aWNzLnJlZ2lzdGVyKCAnRXhwbG9yZUdyYXBoTm9kZScsIEV4cGxvcmVHcmFwaE5vZGUgKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFD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