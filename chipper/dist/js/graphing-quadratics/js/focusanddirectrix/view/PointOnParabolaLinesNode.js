// Copyright 2018-2023, University of Colorado Boulder

/**
 * Dashed lines that connect the 'point on parabola' to the focus and directrix.
 * The visibility of the point-focus and point-directrix lines is controlled independently.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import Multilink from '../../../../axon/js/Multilink.js';
import { combineOptions } from '../../../../phet-core/js/optionize.js';
import { Line, Node } from '../../../../scenery/js/imports.js';
import GQColors from '../../common/GQColors.js';
import GQConstants from '../../common/GQConstants.js';
import graphingQuadratics from '../../graphingQuadratics.js';
export default class PointOnParabolaLinesNode extends Node {
  constructor(quadraticProperty, pointOnParabolaProperty, modelViewTransform, pointOnParabolaVisibleProperty, focusVisibleProperty, directrixVisibleProperty) {
    const pathOptions = {
      stroke: GQColors.POINT_ON_PARABOLA,
      lineWidth: GQConstants.POINT_ON_PARABOLA_LINE_WIDTH,
      lineDash: GQConstants.POINT_ON_PARABOLA_LINE_DASH
    };

    // line connecting point and focus
    const focusLine = new Line(0, 0, 0, 1, combineOptions({
      visibleProperty: new DerivedProperty([pointOnParabolaVisibleProperty, focusVisibleProperty], (pointOnParabolaVisible, focusVisibleProperty) => {
        return pointOnParabolaVisible && focusVisibleProperty;
      })
    }, pathOptions));

    // line connecting point and directrix                                             
    const directrixLine = new Line(0, 0, 0, 1, combineOptions({
      visibleProperty: new DerivedProperty([pointOnParabolaVisibleProperty, directrixVisibleProperty], (pointOnParabolaVisible, directrixVisible) => {
        return pointOnParabolaVisible && directrixVisible;
      })
    }, pathOptions));
    super({
      children: [focusLine, directrixLine]
    });

    // update the lines
    Multilink.multilink([quadraticProperty, pointOnParabolaProperty], (quadratic, pointOnParabola) => {
      assert && assert(quadratic.isaParabola(), `expected a parabola, quadratic=${quadratic}`);
      assert && assert(quadratic.focus);
      assert && assert(quadratic.directrix !== undefined);
      const pointView = modelViewTransform.modelToViewPosition(pointOnParabola);
      const focusView = modelViewTransform.modelToViewPosition(quadratic.focus);
      const directrixView = modelViewTransform.modelToViewY(quadratic.directrix);
      focusLine.setLine(pointView.x, pointView.y, focusView.x, focusView.y);
      directrixLine.setLine(pointView.x, pointView.y, pointView.x, directrixView);
    });
  }
}
graphingQuadratics.register('PointOnParabolaLinesNode', PointOnParabolaLinesNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJNdWx0aWxpbmsiLCJjb21iaW5lT3B0aW9ucyIsIkxpbmUiLCJOb2RlIiwiR1FDb2xvcnMiLCJHUUNvbnN0YW50cyIsImdyYXBoaW5nUXVhZHJhdGljcyIsIlBvaW50T25QYXJhYm9sYUxpbmVzTm9kZSIsImNvbnN0cnVjdG9yIiwicXVhZHJhdGljUHJvcGVydHkiLCJwb2ludE9uUGFyYWJvbGFQcm9wZXJ0eSIsIm1vZGVsVmlld1RyYW5zZm9ybSIsInBvaW50T25QYXJhYm9sYVZpc2libGVQcm9wZXJ0eSIsImZvY3VzVmlzaWJsZVByb3BlcnR5IiwiZGlyZWN0cml4VmlzaWJsZVByb3BlcnR5IiwicGF0aE9wdGlvbnMiLCJzdHJva2UiLCJQT0lOVF9PTl9QQVJBQk9MQSIsImxpbmVXaWR0aCIsIlBPSU5UX09OX1BBUkFCT0xBX0xJTkVfV0lEVEgiLCJsaW5lRGFzaCIsIlBPSU5UX09OX1BBUkFCT0xBX0xJTkVfREFTSCIsImZvY3VzTGluZSIsInZpc2libGVQcm9wZXJ0eSIsInBvaW50T25QYXJhYm9sYVZpc2libGUiLCJkaXJlY3RyaXhMaW5lIiwiZGlyZWN0cml4VmlzaWJsZSIsImNoaWxkcmVuIiwibXVsdGlsaW5rIiwicXVhZHJhdGljIiwicG9pbnRPblBhcmFib2xhIiwiYXNzZXJ0IiwiaXNhUGFyYWJvbGEiLCJmb2N1cyIsImRpcmVjdHJpeCIsInVuZGVmaW5lZCIsInBvaW50VmlldyIsIm1vZGVsVG9WaWV3UG9zaXRpb24iLCJmb2N1c1ZpZXciLCJkaXJlY3RyaXhWaWV3IiwibW9kZWxUb1ZpZXdZIiwic2V0TGluZSIsIngiLCJ5IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJQb2ludE9uUGFyYWJvbGFMaW5lc05vZGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTgtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogRGFzaGVkIGxpbmVzIHRoYXQgY29ubmVjdCB0aGUgJ3BvaW50IG9uIHBhcmFib2xhJyB0byB0aGUgZm9jdXMgYW5kIGRpcmVjdHJpeC5cclxuICogVGhlIHZpc2liaWxpdHkgb2YgdGhlIHBvaW50LWZvY3VzIGFuZCBwb2ludC1kaXJlY3RyaXggbGluZXMgaXMgY29udHJvbGxlZCBpbmRlcGVuZGVudGx5LlxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCBEZXJpdmVkUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9EZXJpdmVkUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgTXVsdGlsaW5rIGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvTXVsdGlsaW5rLmpzJztcclxuaW1wb3J0IFRSZWFkT25seVByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvVFJlYWRPbmx5UHJvcGVydHkuanMnO1xyXG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVmVjdG9yMi5qcyc7XHJcbmltcG9ydCB7IGNvbWJpbmVPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCBNb2RlbFZpZXdUcmFuc2Zvcm0yIGZyb20gJy4uLy4uLy4uLy4uL3BoZXRjb21tb24vanMvdmlldy9Nb2RlbFZpZXdUcmFuc2Zvcm0yLmpzJztcclxuaW1wb3J0IHsgTGluZSwgTGluZU9wdGlvbnMsIE5vZGUgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgR1FDb2xvcnMgZnJvbSAnLi4vLi4vY29tbW9uL0dRQ29sb3JzLmpzJztcclxuaW1wb3J0IEdRQ29uc3RhbnRzIGZyb20gJy4uLy4uL2NvbW1vbi9HUUNvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBRdWFkcmF0aWMgZnJvbSAnLi4vLi4vY29tbW9uL21vZGVsL1F1YWRyYXRpYy5qcyc7XHJcbmltcG9ydCBncmFwaGluZ1F1YWRyYXRpY3MgZnJvbSAnLi4vLi4vZ3JhcGhpbmdRdWFkcmF0aWNzLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvaW50T25QYXJhYm9sYUxpbmVzTm9kZSBleHRlbmRzIE5vZGUge1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIHF1YWRyYXRpY1Byb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxRdWFkcmF0aWM+LFxyXG4gICAgICAgICAgICAgICAgICAgICAgcG9pbnRPblBhcmFib2xhUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PFZlY3RvcjI+LFxyXG4gICAgICAgICAgICAgICAgICAgICAgbW9kZWxWaWV3VHJhbnNmb3JtOiBNb2RlbFZpZXdUcmFuc2Zvcm0yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgcG9pbnRPblBhcmFib2xhVmlzaWJsZVByb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxib29sZWFuPixcclxuICAgICAgICAgICAgICAgICAgICAgIGZvY3VzVmlzaWJsZVByb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxib29sZWFuPixcclxuICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdHJpeFZpc2libGVQcm9wZXJ0eTogVFJlYWRPbmx5UHJvcGVydHk8Ym9vbGVhbj4gKSB7XHJcblxyXG4gICAgY29uc3QgcGF0aE9wdGlvbnMgPSB7XHJcbiAgICAgIHN0cm9rZTogR1FDb2xvcnMuUE9JTlRfT05fUEFSQUJPTEEsXHJcbiAgICAgIGxpbmVXaWR0aDogR1FDb25zdGFudHMuUE9JTlRfT05fUEFSQUJPTEFfTElORV9XSURUSCxcclxuICAgICAgbGluZURhc2g6IEdRQ29uc3RhbnRzLlBPSU5UX09OX1BBUkFCT0xBX0xJTkVfREFTSFxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBsaW5lIGNvbm5lY3RpbmcgcG9pbnQgYW5kIGZvY3VzXHJcbiAgICBjb25zdCBmb2N1c0xpbmUgPSBuZXcgTGluZSggMCwgMCwgMCwgMSwgY29tYmluZU9wdGlvbnM8TGluZU9wdGlvbnM+KCB7XHJcbiAgICAgIHZpc2libGVQcm9wZXJ0eTogbmV3IERlcml2ZWRQcm9wZXJ0eShcclxuICAgICAgICBbIHBvaW50T25QYXJhYm9sYVZpc2libGVQcm9wZXJ0eSwgZm9jdXNWaXNpYmxlUHJvcGVydHkgXSxcclxuICAgICAgICAoIHBvaW50T25QYXJhYm9sYVZpc2libGUsIGZvY3VzVmlzaWJsZVByb3BlcnR5ICkgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuICggcG9pbnRPblBhcmFib2xhVmlzaWJsZSAmJiBmb2N1c1Zpc2libGVQcm9wZXJ0eSApO1xyXG4gICAgICAgIH0gKVxyXG4gICAgfSwgcGF0aE9wdGlvbnMgKSApO1xyXG5cclxuICAgIC8vIGxpbmUgY29ubmVjdGluZyBwb2ludCBhbmQgZGlyZWN0cml4ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICBjb25zdCBkaXJlY3RyaXhMaW5lID0gbmV3IExpbmUoIDAsIDAsIDAsIDEsIGNvbWJpbmVPcHRpb25zPExpbmVPcHRpb25zPigge1xyXG4gICAgICB2aXNpYmxlUHJvcGVydHk6IG5ldyBEZXJpdmVkUHJvcGVydHkoXHJcbiAgICAgICAgWyBwb2ludE9uUGFyYWJvbGFWaXNpYmxlUHJvcGVydHksIGRpcmVjdHJpeFZpc2libGVQcm9wZXJ0eSBdLFxyXG4gICAgICAgICggcG9pbnRPblBhcmFib2xhVmlzaWJsZSwgZGlyZWN0cml4VmlzaWJsZSApID0+IHtcclxuICAgICAgICAgIHJldHVybiAoIHBvaW50T25QYXJhYm9sYVZpc2libGUgJiYgZGlyZWN0cml4VmlzaWJsZSApO1xyXG4gICAgICAgIH0gKVxyXG4gICAgfSwgcGF0aE9wdGlvbnMgKSApO1xyXG5cclxuICAgIHN1cGVyKCB7XHJcbiAgICAgIGNoaWxkcmVuOiBbIGZvY3VzTGluZSwgZGlyZWN0cml4TGluZSBdXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gdXBkYXRlIHRoZSBsaW5lc1xyXG4gICAgTXVsdGlsaW5rLm11bHRpbGluayggWyBxdWFkcmF0aWNQcm9wZXJ0eSwgcG9pbnRPblBhcmFib2xhUHJvcGVydHkgXSxcclxuICAgICAgKCBxdWFkcmF0aWMsIHBvaW50T25QYXJhYm9sYSApID0+IHtcclxuXHJcbiAgICAgICAgYXNzZXJ0ICYmIGFzc2VydCggcXVhZHJhdGljLmlzYVBhcmFib2xhKCksIGBleHBlY3RlZCBhIHBhcmFib2xhLCBxdWFkcmF0aWM9JHtxdWFkcmF0aWN9YCApO1xyXG4gICAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHF1YWRyYXRpYy5mb2N1cyApO1xyXG4gICAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHF1YWRyYXRpYy5kaXJlY3RyaXggIT09IHVuZGVmaW5lZCApO1xyXG5cclxuICAgICAgICBjb25zdCBwb2ludFZpZXcgPSBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdQb3NpdGlvbiggcG9pbnRPblBhcmFib2xhICk7XHJcbiAgICAgICAgY29uc3QgZm9jdXNWaWV3ID0gbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3UG9zaXRpb24oIHF1YWRyYXRpYy5mb2N1cyEgKTtcclxuICAgICAgICBjb25zdCBkaXJlY3RyaXhWaWV3ID0gbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WSggcXVhZHJhdGljLmRpcmVjdHJpeCEgKTtcclxuXHJcbiAgICAgICAgZm9jdXNMaW5lLnNldExpbmUoIHBvaW50Vmlldy54LCBwb2ludFZpZXcueSwgZm9jdXNWaWV3LngsIGZvY3VzVmlldy55ICk7XHJcbiAgICAgICAgZGlyZWN0cml4TGluZS5zZXRMaW5lKCBwb2ludFZpZXcueCwgcG9pbnRWaWV3LnksIHBvaW50Vmlldy54LCBkaXJlY3RyaXhWaWV3ICk7XHJcbiAgICAgIH0gKTtcclxuICB9XHJcbn1cclxuXHJcbmdyYXBoaW5nUXVhZHJhdGljcy5yZWdpc3RlciggJ1BvaW50T25QYXJhYm9sYUxpbmVzTm9kZScsIFBvaW50T25QYXJh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