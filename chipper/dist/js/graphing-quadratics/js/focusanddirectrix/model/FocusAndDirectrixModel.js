// Copyright 2018-2023, University of Colorado Boulder

/**
 * Model for the 'Focus & Directrix' screen.
 * Alternate vertex form of the quadratic equation is: y = (1/(4p)(x - h)^2 - k
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import NumberProperty from '../../../../axon/js/NumberProperty.js';
import RangeWithValue from '../../../../dot/js/RangeWithValue.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import Vector2Property from '../../../../dot/js/Vector2Property.js';
import StringUtils from '../../../../phetcommon/js/util/StringUtils.js';
import GQColors from '../../common/GQColors.js';
import GQConstants from '../../common/GQConstants.js';
import GQModel from '../../common/model/GQModel.js';
import Quadratic from '../../common/model/Quadratic.js';
import graphingQuadratics from '../../graphingQuadratics.js';

// constants
const P_RANGE = new RangeWithValue(-9, 9, 2); // p coefficient
const H_RANGE = new RangeWithValue(-6, 6, 0); // h coefficient
const K_RANGE = new RangeWithValue(-6, 6, 0); // k coefficient
const POINT_X = 5; // default x value for point on parabola

export default class FocusAndDirectrixModel extends GQModel {
  // Coefficients of the alternative vertex form: y = (1/(4p))(x - h)^2 + k

  // the interactive point on the parabola

  constructor(tandem) {
    // p
    const pProperty = new NumberProperty(P_RANGE.defaultValue, {
      range: P_RANGE,
      isValidValue: value => value !== 0,
      // zero is not supported
      tandem: tandem.createTandem('pProperty'),
      phetioDocumentation: StringUtils.fillIn(GQConstants.VALUE_DOC, {
        symbol: 'p'
      })
    });
    phet.log && pProperty.link(p => {
      phet.log(`p=${p}`);
    });

    // h
    const hProperty = new NumberProperty(H_RANGE.defaultValue, {
      range: H_RANGE,
      tandem: tandem.createTandem('hProperty'),
      phetioDocumentation: StringUtils.fillIn(GQConstants.VALUE_DOC, {
        symbol: 'h'
      })
    });
    phet.log && hProperty.link(h => {
      phet.log(`h=${h}`);
    });

    // k
    const kProperty = new NumberProperty(K_RANGE.defaultValue, {
      range: K_RANGE,
      tandem: tandem.createTandem('kProperty'),
      phetioDocumentation: StringUtils.fillIn(GQConstants.VALUE_DOC, {
        symbol: 'k'
      })
    });
    phet.log && kProperty.link(k => {
      phet.log(`k=${k}`);
    });

    // {DerivedProperty.<Quadratic>}
    const quadraticProperty = new DerivedProperty([pProperty, hProperty, kProperty], (p, h, k) => Quadratic.createFromAlternateVertexForm(p, h, k, {
      color: GQColors.FOCUS_AND_DIRECTRIX_INTERACTIVE_CURVE
    }), {
      tandem: tandem.createTandem('quadraticProperty'),
      phetioDocumentation: 'the interactive quadratic, derived from p, h, and k',
      phetioValueType: Quadratic.QuadraticIO
    });
    phet.log && quadraticProperty.link(quadratic => {
      phet.log(`quadratic: y = (1/(4(${quadratic.p})))(x - ${quadratic.h})^2 + ${quadratic.k}`);
    });
    super(quadraticProperty, tandem);
    this.pProperty = pProperty;
    this.hProperty = hProperty;
    this.kProperty = kProperty;
    const initialPoint = new Vector2(POINT_X, this.quadraticProperty.value.solveY(POINT_X));
    this.pointOnParabolaProperty = new Vector2Property(initialPoint, {
      tandem: tandem.createTandem('pointOnParabolaProperty'),
      phetioDocumentation: 'the interactive point on the parabola'
    });

    // update the point
    this.quadraticProperty.lazyLink((quadratic, oldQuadratic) => {
      assert && assert(quadratic.vertex, `expected quadratic.vertex: ${quadratic.vertex}`);
      assert && assert(oldQuadratic.vertex, `expected oldQuadratic.vertex: ${oldQuadratic.vertex}`);
      if (!phet.joist.sim.isSettingPhetioStateProperty.value) {
        const dx = quadratic.vertex.x - oldQuadratic.vertex.x;
        const x = this.pointOnParabolaProperty.value.x + dx;
        this.pointOnParabolaProperty.value = quadratic.getClosestPointInRange(x, this.graph.xRange, this.graph.yRange);
      }
    });
  }
  reset() {
    this.pProperty.reset();
    this.hProperty.reset();
    this.kProperty.reset();
    this.pointOnParabolaProperty.reset();
    super.reset();
  }
}
graphingQuadratics.register('FocusAndDirectrixModel', FocusAndDirectrixModel);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJOdW1iZXJQcm9wZXJ0eSIsIlJhbmdlV2l0aFZhbHVlIiwiVmVjdG9yMiIsIlZlY3RvcjJQcm9wZXJ0eSIsIlN0cmluZ1V0aWxzIiwiR1FDb2xvcnMiLCJHUUNvbnN0YW50cyIsIkdRTW9kZWwiLCJRdWFkcmF0aWMiLCJncmFwaGluZ1F1YWRyYXRpY3MiLCJQX1JBTkdFIiwiSF9SQU5HRSIsIktfUkFOR0UiLCJQT0lOVF9YIiwiRm9jdXNBbmREaXJlY3RyaXhNb2RlbCIsImNvbnN0cnVjdG9yIiwidGFuZGVtIiwicFByb3BlcnR5IiwiZGVmYXVsdFZhbHVlIiwicmFuZ2UiLCJpc1ZhbGlkVmFsdWUiLCJ2YWx1ZSIsImNyZWF0ZVRhbmRlbSIsInBoZXRpb0RvY3VtZW50YXRpb24iLCJmaWxsSW4iLCJWQUxVRV9ET0MiLCJzeW1ib2wiLCJwaGV0IiwibG9nIiwibGluayIsInAiLCJoUHJvcGVydHkiLCJoIiwia1Byb3BlcnR5IiwiayIsInF1YWRyYXRpY1Byb3BlcnR5IiwiY3JlYXRlRnJvbUFsdGVybmF0ZVZlcnRleEZvcm0iLCJjb2xvciIsIkZPQ1VTX0FORF9ESVJFQ1RSSVhfSU5URVJBQ1RJVkVfQ1VSVkUiLCJwaGV0aW9WYWx1ZVR5cGUiLCJRdWFkcmF0aWNJTyIsInF1YWRyYXRpYyIsImluaXRpYWxQb2ludCIsInNvbHZlWSIsInBvaW50T25QYXJhYm9sYVByb3BlcnR5IiwibGF6eUxpbmsiLCJvbGRRdWFkcmF0aWMiLCJhc3NlcnQiLCJ2ZXJ0ZXgiLCJqb2lzdCIsInNpbSIsImlzU2V0dGluZ1BoZXRpb1N0YXRlUHJvcGVydHkiLCJkeCIsIngiLCJnZXRDbG9zZXN0UG9pbnRJblJhbmdlIiwiZ3JhcGgiLCJ4UmFuZ2UiLCJ5UmFuZ2UiLCJyZXNldCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiRm9jdXNBbmREaXJlY3RyaXhNb2RlbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOC0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBNb2RlbCBmb3IgdGhlICdGb2N1cyAmIERpcmVjdHJpeCcgc2NyZWVuLlxyXG4gKiBBbHRlcm5hdGUgdmVydGV4IGZvcm0gb2YgdGhlIHF1YWRyYXRpYyBlcXVhdGlvbiBpczogeSA9ICgxLyg0cCkoeCAtIGgpXjIgLSBrXHJcbiAqXHJcbiAqIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXHJcbiAqL1xyXG5cclxuaW1wb3J0IERlcml2ZWRQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL0Rlcml2ZWRQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBOdW1iZXJQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL051bWJlclByb3BlcnR5LmpzJztcclxuaW1wb3J0IFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgUmFuZ2VXaXRoVmFsdWUgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1JhbmdlV2l0aFZhbHVlLmpzJztcclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgVmVjdG9yMlByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9WZWN0b3IyUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgU3RyaW5nVXRpbHMgZnJvbSAnLi4vLi4vLi4vLi4vcGhldGNvbW1vbi9qcy91dGlsL1N0cmluZ1V0aWxzLmpzJztcclxuaW1wb3J0IFRhbmRlbSBmcm9tICcuLi8uLi8uLi8uLi90YW5kZW0vanMvVGFuZGVtLmpzJztcclxuaW1wb3J0IEdRQ29sb3JzIGZyb20gJy4uLy4uL2NvbW1vbi9HUUNvbG9ycy5qcyc7XHJcbmltcG9ydCBHUUNvbnN0YW50cyBmcm9tICcuLi8uLi9jb21tb24vR1FDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgR1FNb2RlbCBmcm9tICcuLi8uLi9jb21tb24vbW9kZWwvR1FNb2RlbC5qcyc7XHJcbmltcG9ydCBRdWFkcmF0aWMgZnJvbSAnLi4vLi4vY29tbW9uL21vZGVsL1F1YWRyYXRpYy5qcyc7XHJcbmltcG9ydCBncmFwaGluZ1F1YWRyYXRpY3MgZnJvbSAnLi4vLi4vZ3JhcGhpbmdRdWFkcmF0aWNzLmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBQX1JBTkdFID0gbmV3IFJhbmdlV2l0aFZhbHVlKCAtOSwgOSwgMiApOyAvLyBwIGNvZWZmaWNpZW50XHJcbmNvbnN0IEhfUkFOR0UgPSBuZXcgUmFuZ2VXaXRoVmFsdWUoIC02LCA2LCAwICk7IC8vIGggY29lZmZpY2llbnRcclxuY29uc3QgS19SQU5HRSA9IG5ldyBSYW5nZVdpdGhWYWx1ZSggLTYsIDYsIDAgKTsgLy8gayBjb2VmZmljaWVudFxyXG5jb25zdCBQT0lOVF9YID0gNTsgLy8gZGVmYXVsdCB4IHZhbHVlIGZvciBwb2ludCBvbiBwYXJhYm9sYVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9jdXNBbmREaXJlY3RyaXhNb2RlbCBleHRlbmRzIEdRTW9kZWwge1xyXG5cclxuICAvLyBDb2VmZmljaWVudHMgb2YgdGhlIGFsdGVybmF0aXZlIHZlcnRleCBmb3JtOiB5ID0gKDEvKDRwKSkoeCAtIGgpXjIgKyBrXHJcbiAgcHVibGljIHJlYWRvbmx5IHBQcm9wZXJ0eTogTnVtYmVyUHJvcGVydHk7XHJcbiAgcHVibGljIHJlYWRvbmx5IGhQcm9wZXJ0eTogTnVtYmVyUHJvcGVydHk7XHJcbiAgcHVibGljIHJlYWRvbmx5IGtQcm9wZXJ0eTogTnVtYmVyUHJvcGVydHk7XHJcblxyXG4gIC8vIHRoZSBpbnRlcmFjdGl2ZSBwb2ludCBvbiB0aGUgcGFyYWJvbGFcclxuICBwdWJsaWMgcmVhZG9ubHkgcG9pbnRPblBhcmFib2xhUHJvcGVydHk6IFByb3BlcnR5PFZlY3RvcjI+O1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIHRhbmRlbTogVGFuZGVtICkge1xyXG5cclxuICAgIC8vIHBcclxuICAgIGNvbnN0IHBQcm9wZXJ0eSA9IG5ldyBOdW1iZXJQcm9wZXJ0eSggUF9SQU5HRS5kZWZhdWx0VmFsdWUsIHtcclxuICAgICAgcmFuZ2U6IFBfUkFOR0UsXHJcbiAgICAgIGlzVmFsaWRWYWx1ZTogdmFsdWUgPT4gKCB2YWx1ZSAhPT0gMCApLCAvLyB6ZXJvIGlzIG5vdCBzdXBwb3J0ZWRcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAncFByb3BlcnR5JyApLFxyXG4gICAgICBwaGV0aW9Eb2N1bWVudGF0aW9uOiBTdHJpbmdVdGlscy5maWxsSW4oIEdRQ29uc3RhbnRzLlZBTFVFX0RPQywgeyBzeW1ib2w6ICdwJyB9IClcclxuICAgIH0gKTtcclxuICAgIHBoZXQubG9nICYmIHBQcm9wZXJ0eS5saW5rKCBwID0+IHsgcGhldC5sb2coIGBwPSR7cH1gICk7IH0gKTtcclxuXHJcbiAgICAvLyBoXHJcbiAgICBjb25zdCBoUHJvcGVydHkgPSBuZXcgTnVtYmVyUHJvcGVydHkoIEhfUkFOR0UuZGVmYXVsdFZhbHVlLCB7XHJcbiAgICAgIHJhbmdlOiBIX1JBTkdFLFxyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdoUHJvcGVydHknICksXHJcbiAgICAgIHBoZXRpb0RvY3VtZW50YXRpb246IFN0cmluZ1V0aWxzLmZpbGxJbiggR1FDb25zdGFudHMuVkFMVUVfRE9DLCB7IHN5bWJvbDogJ2gnIH0gKVxyXG4gICAgfSApO1xyXG4gICAgcGhldC5sb2cgJiYgaFByb3BlcnR5LmxpbmsoIGggPT4geyBwaGV0LmxvZyggYGg9JHtofWAgKTsgfSApO1xyXG5cclxuICAgIC8vIGtcclxuICAgIGNvbnN0IGtQcm9wZXJ0eSA9IG5ldyBOdW1iZXJQcm9wZXJ0eSggS19SQU5HRS5kZWZhdWx0VmFsdWUsIHtcclxuICAgICAgcmFuZ2U6IEtfUkFOR0UsXHJcbiAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2tQcm9wZXJ0eScgKSxcclxuICAgICAgcGhldGlvRG9jdW1lbnRhdGlvbjogU3RyaW5nVXRpbHMuZmlsbEluKCBHUUNvbnN0YW50cy5WQUxVRV9ET0MsIHsgc3ltYm9sOiAnaycgfSApXHJcbiAgICB9ICk7XHJcbiAgICBwaGV0LmxvZyAmJiBrUHJvcGVydHkubGluayggayA9PiB7IHBoZXQubG9nKCBgaz0ke2t9YCApOyB9ICk7XHJcblxyXG4gICAgLy8ge0Rlcml2ZWRQcm9wZXJ0eS48UXVhZHJhdGljPn1cclxuICAgIGNvbnN0IHF1YWRyYXRpY1Byb3BlcnR5ID0gbmV3IERlcml2ZWRQcm9wZXJ0eShcclxuICAgICAgWyBwUHJvcGVydHksIGhQcm9wZXJ0eSwga1Byb3BlcnR5IF0sXHJcbiAgICAgICggcCwgaCwgayApID0+IFF1YWRyYXRpYy5jcmVhdGVGcm9tQWx0ZXJuYXRlVmVydGV4Rm9ybSggcCwgaCwgaywge1xyXG4gICAgICAgIGNvbG9yOiBHUUNvbG9ycy5GT0NVU19BTkRfRElSRUNUUklYX0lOVEVSQUNUSVZFX0NVUlZFXHJcbiAgICAgIH0gKSwge1xyXG4gICAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3F1YWRyYXRpY1Byb3BlcnR5JyApLFxyXG4gICAgICAgIHBoZXRpb0RvY3VtZW50YXRpb246ICd0aGUgaW50ZXJhY3RpdmUgcXVhZHJhdGljLCBkZXJpdmVkIGZyb20gcCwgaCwgYW5kIGsnLFxyXG4gICAgICAgIHBoZXRpb1ZhbHVlVHlwZTogUXVhZHJhdGljLlF1YWRyYXRpY0lPXHJcbiAgICAgIH0gKTtcclxuICAgIHBoZXQubG9nICYmIHF1YWRyYXRpY1Byb3BlcnR5LmxpbmsoIHF1YWRyYXRpYyA9PiB7XHJcbiAgICAgIHBoZXQubG9nKCBgcXVhZHJhdGljOiB5ID0gKDEvKDQoJHtxdWFkcmF0aWMucH0pKSkoeCAtICR7cXVhZHJhdGljLmh9KV4yICsgJHtxdWFkcmF0aWMua31gICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgc3VwZXIoIHF1YWRyYXRpY1Byb3BlcnR5LCB0YW5kZW0gKTtcclxuXHJcbiAgICB0aGlzLnBQcm9wZXJ0eSA9IHBQcm9wZXJ0eTtcclxuICAgIHRoaXMuaFByb3BlcnR5ID0gaFByb3BlcnR5O1xyXG4gICAgdGhpcy5rUHJvcGVydHkgPSBrUHJvcGVydHk7XHJcblxyXG4gICAgY29uc3QgaW5pdGlhbFBvaW50ID0gbmV3IFZlY3RvcjIoIFBPSU5UX1gsIHRoaXMucXVhZHJhdGljUHJvcGVydHkudmFsdWUuc29sdmVZKCBQT0lOVF9YICkgKTtcclxuXHJcbiAgICB0aGlzLnBvaW50T25QYXJhYm9sYVByb3BlcnR5ID0gbmV3IFZlY3RvcjJQcm9wZXJ0eSggaW5pdGlhbFBvaW50LCB7XHJcbiAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3BvaW50T25QYXJhYm9sYVByb3BlcnR5JyApLFxyXG4gICAgICBwaGV0aW9Eb2N1bWVudGF0aW9uOiAndGhlIGludGVyYWN0aXZlIHBvaW50IG9uIHRoZSBwYXJhYm9sYSdcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyB1cGRhdGUgdGhlIHBvaW50XHJcbiAgICB0aGlzLnF1YWRyYXRpY1Byb3BlcnR5LmxhenlMaW5rKCAoIHF1YWRyYXRpYywgb2xkUXVhZHJhdGljICkgPT4ge1xyXG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBxdWFkcmF0aWMudmVydGV4LCBgZXhwZWN0ZWQgcXVhZHJhdGljLnZlcnRleDogJHtxdWFkcmF0aWMudmVydGV4fWAgKTtcclxuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggb2xkUXVhZHJhdGljLnZlcnRleCwgYGV4cGVjdGVkIG9sZFF1YWRyYXRpYy52ZXJ0ZXg6ICR7b2xkUXVhZHJhdGljLnZlcnRleH1gICk7XHJcblxyXG4gICAgICBpZiAoICFwaGV0LmpvaXN0LnNpbS5pc1NldHRpbmdQaGV0aW9TdGF0ZVByb3BlcnR5LnZhbHVlICkge1xyXG4gICAgICAgIGNvbnN0IGR4ID0gcXVhZHJhdGljLnZlcnRleCEueCAtIG9sZFF1YWRyYXRpYy52ZXJ0ZXghLng7XHJcbiAgICAgICAgY29uc3QgeCA9IHRoaXMucG9pbnRPblBhcmFib2xhUHJvcGVydHkudmFsdWUueCArIGR4O1xyXG4gICAgICAgIHRoaXMucG9pbnRPblBhcmFib2xhUHJvcGVydHkudmFsdWUgPSBxdWFkcmF0aWMuZ2V0Q2xvc2VzdFBvaW50SW5SYW5nZSggeCwgdGhpcy5ncmFwaC54UmFuZ2UsIHRoaXMuZ3JhcGgueVJhbmdlICk7XHJcbiAgICAgIH1cclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNldCgpOiB2b2lkIHtcclxuICAgIHRoaXMucFByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICB0aGlzLmhQcm9wZXJ0eS5yZXNldCgpO1xyXG4gICAgdGhpcy5rUHJvcGVydHkucmVzZXQoKTtcclxuICAgIHRoaXMucG9pbnRPblBhcmFib2xhUHJvcGVydHkucmVzZXQoKTtcclxuICAgIHN1cGVyLnJlc2V0KCk7XHJcbiAgfVxyXG59XHJcblxyXG5ncmFwaGluZ1F1YWRyYXRpY3MucmVnaXN0ZXIoICdGb2N1c0FuZERpcmVjdHJpeE1vZGVsJywgRm9jdXNBbmREaXJlY3RyaXhNb2RlbCApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGVBQWUsTUFBTSx3Q0FBd0M7QUFDcEUsT0FBT0MsY0FBYyxNQUFNLHVDQUF1QztBQUVsRSxPQUFPQyxjQUFjLE1BQU0sc0NBQXNDO0FBQ2pFLE9BQU9DLE9BQU8sTUFBTSwrQkFBK0I7QUFDbkQsT0FBT0MsZUFBZSxNQUFNLHVDQUF1QztBQUNuRSxPQUFPQyxXQUFXLE1BQU0sK0NBQStDO0FBRXZFLE9BQU9DLFFBQVEsTUFBTSwwQkFBMEI7QUFDL0MsT0FBT0MsV0FBVyxNQUFNLDZCQUE2QjtBQUNyRCxPQUFPQyxPQUFPLE1BQU0sK0JBQStCO0FBQ25ELE9BQU9DLFNBQVMsTUFBTSxpQ0FBaUM7QUFDdkQsT0FBT0Msa0JBQWtCLE1BQU0sNkJBQTZCOztB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