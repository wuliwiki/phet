// Copyright 2021-2023, University of Colorado Boulder

/**
 * NumberPlayGameLevel is the model for a game level which each type of game will extend.
 *
 * @author Chris Klusendorf (PhET Interactive Simulations)
 * @author Luisa Vargas
 */

import BooleanProperty from '../../../../axon/js/BooleanProperty.js';
import NumberProperty from '../../../../axon/js/NumberProperty.js';
import numberPlay from '../../numberPlay.js';
import Range from '../../../../dot/js/Range.js';
import dotRandom from '../../../../dot/js/dotRandom.js';
class NumberPlayGameLevel {
  static REWARD_SCORE = 10;

  // the total number of points that have been awarded for this level

  // whether the current challenge has been solved. A challenge is considered solved when the user has correctly
  // guessed the answer
  // the range of numbers used for all challenges of this level
  // the random number generated to create a representation for
  // used to store old challenge number values. this.oldChallengeNumberOne tracks the most recent value of
  // this.challengeNumberProperty, and this.oldChallengeNumberTwo tracks the value used before that.
  // the number of times any wrong answer button in answerButtons was pressed
  /**
   * @param levelNumber
   * @param gameType
   * @param levelChallengeRange - the range of challenge numbers for a level, where 'range' is referring to a
   * mathematical range, where the min and max values are unknown, so it is just a number
   */
  constructor(levelNumber, gameType, levelChallengeRange) {
    this.levelNumber = levelNumber;
    this.gameType = gameType;
    this.challengeRange = NumberPlayGameLevel.getChallengeRange(levelNumber, levelChallengeRange);
    this.scoreProperty = new NumberProperty(0, {
      numberType: 'Integer',
      isValidValue: value => value >= 0
    });
    this.isChallengeSolvedProperty = new BooleanProperty(false);
    this.challengeNumberProperty = new NumberProperty(this.getRandomChallengeNumber(), {
      numberType: 'Integer',
      range: this.challengeRange
    });
    this.oldChallengeNumberOne = this.challengeNumberProperty.value;
    this.oldChallengeNumberTwo = this.challengeNumberProperty.value;
    this.numberOfAnswerButtonPressesProperty = new NumberProperty(0, {
      numberType: 'Integer',
      isValidValue: value => value >= 0
    });
  }
  reset() {
    this.scoreProperty.reset();
    this.isChallengeSolvedProperty.reset();
    this.numberOfAnswerButtonPressesProperty.reset();

    // the challengeNumber should not necessarily be reset to the same initial number that the screen loaded with,
    // so don't use traditional reset()
    this.challengeNumberProperty.value = this.getRandomChallengeNumber();
  }

  /**
   * @param dt - in seconds
   */
  step(dt) {
    // See subclass for implementation
  }

  /**
   * Sets up a new challenge for this level.
   */
  newChallenge() {
    this.isChallengeSolvedProperty.value = false;
    this.setRandomChallengeNumber();
    this.numberOfAnswerButtonPressesProperty.reset();
  }

  /**
   * Sets a new challenge number. Can be the value of the previous challenge number, but there cannot be three of the
   * same number in a row.
   */
  setRandomChallengeNumber() {
    assert && assert(this.challengeRange.min !== this.challengeRange.max, `challengeRange must contain more than one number: ${this.challengeRange.toString()}`);

    // shift values down to make room for a new challenge number
    this.oldChallengeNumberTwo = this.oldChallengeNumberOne;
    this.oldChallengeNumberOne = this.challengeNumberProperty.value;
    let newChallengeNumber = this.getRandomChallengeNumber();
    while (newChallengeNumber === this.oldChallengeNumberOne && newChallengeNumber === this.oldChallengeNumberTwo) {
      newChallengeNumber = this.getRandomChallengeNumber();
    }
    this.challengeNumberProperty.value = newChallengeNumber;
  }

  /**
   * Generate a random challenge number that is in the defined challenge range.
   */
  getRandomChallengeNumber() {
    return dotRandom.nextIntBetween(this.challengeRange.min, this.challengeRange.max);
  }

  /**
   * Calculates the range of the challenge numbers for the given level number and input range. This is converting
   * levelChallengeRange, a mathematical range (see parameter doc of this class), to a Range type, which includes min
   * and max values.
   *
   * Examples:
   * 1, 10 => 1, 10
   * 2, 10 => 11, 20
   * 1, 5 => 1, 5
   * 2, 5 => 6, 10
   */
  static getChallengeRange(levelNumber, levelChallengeRange) {
    const minimumChallengeNumber = (levelNumber - 1) * levelChallengeRange + 1;
    const maximumChallengeNumber = levelNumber * levelChallengeRange;
    return new Range(minimumChallengeNumber, maximumChallengeNumber);
  }
  dispose() {
    assert && assert(false, 'dispose is not supported, exists for the lifetime of the sim');
  }
}
numberPlay.register('NumberPlayGameLevel', NumberPlayGameLevel);
export default NumberPlayGameLevel;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb29sZWFuUHJvcGVydHkiLCJOdW1iZXJQcm9wZXJ0eSIsIm51bWJlclBsYXkiLCJSYW5nZSIsImRvdFJhbmRvbSIsIk51bWJlclBsYXlHYW1lTGV2ZWwiLCJSRVdBUkRfU0NPUkUiLCJjb25zdHJ1Y3RvciIsImxldmVsTnVtYmVyIiwiZ2FtZVR5cGUiLCJsZXZlbENoYWxsZW5nZVJhbmdlIiwiY2hhbGxlbmdlUmFuZ2UiLCJnZXRDaGFsbGVuZ2VSYW5nZSIsInNjb3JlUHJvcGVydHkiLCJudW1iZXJUeXBlIiwiaXNWYWxpZFZhbHVlIiwidmFsdWUiLCJpc0NoYWxsZW5nZVNvbHZlZFByb3BlcnR5IiwiY2hhbGxlbmdlTnVtYmVyUHJvcGVydHkiLCJnZXRSYW5kb21DaGFsbGVuZ2VOdW1iZXIiLCJyYW5nZSIsIm9sZENoYWxsZW5nZU51bWJlck9uZSIsIm9sZENoYWxsZW5nZU51bWJlclR3byIsIm51bWJlck9mQW5zd2VyQnV0dG9uUHJlc3Nlc1Byb3BlcnR5IiwicmVzZXQiLCJzdGVwIiwiZHQiLCJuZXdDaGFsbGVuZ2UiLCJzZXRSYW5kb21DaGFsbGVuZ2VOdW1iZXIiLCJhc3NlcnQiLCJtaW4iLCJtYXgiLCJ0b1N0cmluZyIsIm5ld0NoYWxsZW5nZU51bWJlciIsIm5leHRJbnRCZXR3ZWVuIiwibWluaW11bUNoYWxsZW5nZU51bWJlciIsIm1heGltdW1DaGFsbGVuZ2VOdW1iZXIiLCJkaXNwb3NlIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJOdW1iZXJQbGF5R2FtZUxldmVsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIxLTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIE51bWJlclBsYXlHYW1lTGV2ZWwgaXMgdGhlIG1vZGVsIGZvciBhIGdhbWUgbGV2ZWwgd2hpY2ggZWFjaCB0eXBlIG9mIGdhbWUgd2lsbCBleHRlbmQuXHJcbiAqXHJcbiAqIEBhdXRob3IgQ2hyaXMgS2x1c2VuZG9yZiAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICogQGF1dGhvciBMdWlzYSBWYXJnYXNcclxuICovXHJcblxyXG5pbXBvcnQgQm9vbGVhblByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvQm9vbGVhblByb3BlcnR5LmpzJztcclxuaW1wb3J0IE51bWJlclByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvTnVtYmVyUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgbnVtYmVyUGxheSBmcm9tICcuLi8uLi9udW1iZXJQbGF5LmpzJztcclxuaW1wb3J0IFJhbmdlIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9SYW5nZS5qcyc7XHJcbmltcG9ydCBkb3RSYW5kb20gZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL2RvdFJhbmRvbS5qcyc7XHJcbmltcG9ydCBOdW1iZXJQbGF5R2FtZVR5cGUgZnJvbSAnLi9OdW1iZXJQbGF5R2FtZVR5cGUuanMnO1xyXG5pbXBvcnQgeyBUQ29sb3IgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9Qcm9wZXJ0eS5qcyc7XHJcblxyXG5hYnN0cmFjdCBjbGFzcyBOdW1iZXJQbGF5R2FtZUxldmVsIHtcclxuXHJcbiAgcHVibGljIHJlYWRvbmx5IGxldmVsTnVtYmVyOiBudW1iZXI7XHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBSRVdBUkRfU0NPUkUgPSAxMDtcclxuXHJcbiAgLy8gdGhlIHRvdGFsIG51bWJlciBvZiBwb2ludHMgdGhhdCBoYXZlIGJlZW4gYXdhcmRlZCBmb3IgdGhpcyBsZXZlbFxyXG4gIHB1YmxpYyByZWFkb25seSBzY29yZVByb3BlcnR5OiBQcm9wZXJ0eTxudW1iZXI+O1xyXG5cclxuICAvLyB3aGV0aGVyIHRoZSBjdXJyZW50IGNoYWxsZW5nZSBoYXMgYmVlbiBzb2x2ZWQuIEEgY2hhbGxlbmdlIGlzIGNvbnNpZGVyZWQgc29sdmVkIHdoZW4gdGhlIHVzZXIgaGFzIGNvcnJlY3RseVxyXG4gIC8vIGd1ZXNzZWQgdGhlIGFuc3dlclxyXG4gIHB1YmxpYyByZWFkb25seSBpc0NoYWxsZW5nZVNvbHZlZFByb3BlcnR5OiBQcm9wZXJ0eTxib29sZWFuPjtcclxuXHJcbiAgLy8gdGhlIHJhbmdlIG9mIG51bWJlcnMgdXNlZCBmb3IgYWxsIGNoYWxsZW5nZXMgb2YgdGhpcyBsZXZlbFxyXG4gIHB1YmxpYyByZWFkb25seSBjaGFsbGVuZ2VSYW5nZTogUmFuZ2U7XHJcblxyXG4gIC8vIHRoZSByYW5kb20gbnVtYmVyIGdlbmVyYXRlZCB0byBjcmVhdGUgYSByZXByZXNlbnRhdGlvbiBmb3JcclxuICBwdWJsaWMgcmVhZG9ubHkgY2hhbGxlbmdlTnVtYmVyUHJvcGVydHk6IE51bWJlclByb3BlcnR5O1xyXG5cclxuICAvLyB1c2VkIHRvIHN0b3JlIG9sZCBjaGFsbGVuZ2UgbnVtYmVyIHZhbHVlcy4gdGhpcy5vbGRDaGFsbGVuZ2VOdW1iZXJPbmUgdHJhY2tzIHRoZSBtb3N0IHJlY2VudCB2YWx1ZSBvZlxyXG4gIC8vIHRoaXMuY2hhbGxlbmdlTnVtYmVyUHJvcGVydHksIGFuZCB0aGlzLm9sZENoYWxsZW5nZU51bWJlclR3byB0cmFja3MgdGhlIHZhbHVlIHVzZWQgYmVmb3JlIHRoYXQuXHJcbiAgcHJpdmF0ZSBvbGRDaGFsbGVuZ2VOdW1iZXJPbmU6IG51bWJlcjtcclxuICBwcml2YXRlIG9sZENoYWxsZW5nZU51bWJlclR3bzogbnVtYmVyO1xyXG5cclxuICAvLyB0aGUgbnVtYmVyIG9mIHRpbWVzIGFueSB3cm9uZyBhbnN3ZXIgYnV0dG9uIGluIGFuc3dlckJ1dHRvbnMgd2FzIHByZXNzZWRcclxuICBwdWJsaWMgcmVhZG9ubHkgbnVtYmVyT2ZBbnN3ZXJCdXR0b25QcmVzc2VzUHJvcGVydHk6IFByb3BlcnR5PG51bWJlcj47XHJcbiAgcHVibGljIHJlYWRvbmx5IGdhbWVUeXBlOiBOdW1iZXJQbGF5R2FtZVR5cGU7XHJcbiAgcHVibGljIGFic3RyYWN0IHJlYWRvbmx5IGJhc2VDb2xvclByb3BlcnR5OiBUQ29sb3I7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSBsZXZlbE51bWJlclxyXG4gICAqIEBwYXJhbSBnYW1lVHlwZVxyXG4gICAqIEBwYXJhbSBsZXZlbENoYWxsZW5nZVJhbmdlIC0gdGhlIHJhbmdlIG9mIGNoYWxsZW5nZSBudW1iZXJzIGZvciBhIGxldmVsLCB3aGVyZSAncmFuZ2UnIGlzIHJlZmVycmluZyB0byBhXHJcbiAgICogbWF0aGVtYXRpY2FsIHJhbmdlLCB3aGVyZSB0aGUgbWluIGFuZCBtYXggdmFsdWVzIGFyZSB1bmtub3duLCBzbyBpdCBpcyBqdXN0IGEgbnVtYmVyXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKCBsZXZlbE51bWJlcjogbnVtYmVyLCBnYW1lVHlwZTogTnVtYmVyUGxheUdhbWVUeXBlLCBsZXZlbENoYWxsZW5nZVJhbmdlOiBudW1iZXIgKSB7XHJcblxyXG4gICAgdGhpcy5sZXZlbE51bWJlciA9IGxldmVsTnVtYmVyO1xyXG4gICAgdGhpcy5nYW1lVHlwZSA9IGdhbWVUeXBlO1xyXG5cclxuICAgIHRoaXMuY2hhbGxlbmdlUmFuZ2UgPSBOdW1iZXJQbGF5R2FtZUxldmVsLmdldENoYWxsZW5nZVJhbmdlKCBsZXZlbE51bWJlciwgbGV2ZWxDaGFsbGVuZ2VSYW5nZSApO1xyXG5cclxuICAgIHRoaXMuc2NvcmVQcm9wZXJ0eSA9IG5ldyBOdW1iZXJQcm9wZXJ0eSggMCwge1xyXG4gICAgICBudW1iZXJUeXBlOiAnSW50ZWdlcicsXHJcbiAgICAgIGlzVmFsaWRWYWx1ZTogKCB2YWx1ZTogbnVtYmVyICkgPT4gKCB2YWx1ZSA+PSAwIClcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLmlzQ2hhbGxlbmdlU29sdmVkUHJvcGVydHkgPSBuZXcgQm9vbGVhblByb3BlcnR5KCBmYWxzZSApO1xyXG5cclxuICAgIHRoaXMuY2hhbGxlbmdlTnVtYmVyUHJvcGVydHkgPSBuZXcgTnVtYmVyUHJvcGVydHkoIHRoaXMuZ2V0UmFuZG9tQ2hhbGxlbmdlTnVtYmVyKCksIHtcclxuICAgICAgbnVtYmVyVHlwZTogJ0ludGVnZXInLFxyXG4gICAgICByYW5nZTogdGhpcy5jaGFsbGVuZ2VSYW5nZVxyXG4gICAgfSApO1xyXG5cclxuICAgIHRoaXMub2xkQ2hhbGxlbmdlTnVtYmVyT25lID0gdGhpcy5jaGFsbGVuZ2VOdW1iZXJQcm9wZXJ0eS52YWx1ZTtcclxuICAgIHRoaXMub2xkQ2hhbGxlbmdlTnVtYmVyVHdvID0gdGhpcy5jaGFsbGVuZ2VOdW1iZXJQcm9wZXJ0eS52YWx1ZTtcclxuXHJcbiAgICB0aGlzLm51bWJlck9mQW5zd2VyQnV0dG9uUHJlc3Nlc1Byb3BlcnR5ID0gbmV3IE51bWJlclByb3BlcnR5KCAwLCB7XHJcbiAgICAgIG51bWJlclR5cGU6ICdJbnRlZ2VyJyxcclxuICAgICAgaXNWYWxpZFZhbHVlOiAoIHZhbHVlOiBudW1iZXIgKSA9PiAoIHZhbHVlID49IDAgKVxyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5zY29yZVByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICB0aGlzLmlzQ2hhbGxlbmdlU29sdmVkUHJvcGVydHkucmVzZXQoKTtcclxuICAgIHRoaXMubnVtYmVyT2ZBbnN3ZXJCdXR0b25QcmVzc2VzUHJvcGVydHkucmVzZXQoKTtcclxuXHJcbiAgICAvLyB0aGUgY2hhbGxlbmdlTnVtYmVyIHNob3VsZCBub3QgbmVjZXNzYXJpbHkgYmUgcmVzZXQgdG8gdGhlIHNhbWUgaW5pdGlhbCBudW1iZXIgdGhhdCB0aGUgc2NyZWVuIGxvYWRlZCB3aXRoLFxyXG4gICAgLy8gc28gZG9uJ3QgdXNlIHRyYWRpdGlvbmFsIHJlc2V0KClcclxuICAgIHRoaXMuY2hhbGxlbmdlTnVtYmVyUHJvcGVydHkudmFsdWUgPSB0aGlzLmdldFJhbmRvbUNoYWxsZW5nZU51bWJlcigpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIGR0IC0gaW4gc2Vjb25kc1xyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGVwKCBkdDogbnVtYmVyICk6IHZvaWQge1xyXG4gICAgLy8gU2VlIHN1YmNsYXNzIGZvciBpbXBsZW1lbnRhdGlvblxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0cyB1cCBhIG5ldyBjaGFsbGVuZ2UgZm9yIHRoaXMgbGV2ZWwuXHJcbiAgICovXHJcbiAgcHVibGljIG5ld0NoYWxsZW5nZSgpOiB2b2lkIHtcclxuICAgIHRoaXMuaXNDaGFsbGVuZ2VTb2x2ZWRQcm9wZXJ0eS52YWx1ZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5zZXRSYW5kb21DaGFsbGVuZ2VOdW1iZXIoKTtcclxuICAgIHRoaXMubnVtYmVyT2ZBbnN3ZXJCdXR0b25QcmVzc2VzUHJvcGVydHkucmVzZXQoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgYSBuZXcgY2hhbGxlbmdlIG51bWJlci4gQ2FuIGJlIHRoZSB2YWx1ZSBvZiB0aGUgcHJldmlvdXMgY2hhbGxlbmdlIG51bWJlciwgYnV0IHRoZXJlIGNhbm5vdCBiZSB0aHJlZSBvZiB0aGVcclxuICAgKiBzYW1lIG51bWJlciBpbiBhIHJvdy5cclxuICAgKi9cclxuICBwcml2YXRlIHNldFJhbmRvbUNoYWxsZW5nZU51bWJlcigpOiB2b2lkIHtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIHRoaXMuY2hhbGxlbmdlUmFuZ2UubWluICE9PSB0aGlzLmNoYWxsZW5nZVJhbmdlLm1heCxcclxuICAgICAgYGNoYWxsZW5nZVJhbmdlIG11c3QgY29udGFpbiBtb3JlIHRoYW4gb25lIG51bWJlcjogJHt0aGlzLmNoYWxsZW5nZVJhbmdlLnRvU3RyaW5nKCl9YCApO1xyXG5cclxuICAgIC8vIHNoaWZ0IHZhbHVlcyBkb3duIHRvIG1ha2Ugcm9vbSBmb3IgYSBuZXcgY2hhbGxlbmdlIG51bWJlclxyXG4gICAgdGhpcy5vbGRDaGFsbGVuZ2VOdW1iZXJUd28gPSB0aGlzLm9sZENoYWxsZW5nZU51bWJlck9uZTtcclxuICAgIHRoaXMub2xkQ2hhbGxlbmdlTnVtYmVyT25lID0gdGhpcy5jaGFsbGVuZ2VOdW1iZXJQcm9wZXJ0eS52YWx1ZTtcclxuXHJcbiAgICBsZXQgbmV3Q2hhbGxlbmdlTnVtYmVyID0gdGhpcy5nZXRSYW5kb21DaGFsbGVuZ2VOdW1iZXIoKTtcclxuICAgIHdoaWxlICggKCBuZXdDaGFsbGVuZ2VOdW1iZXIgPT09IHRoaXMub2xkQ2hhbGxlbmdlTnVtYmVyT25lICkgJiYgKCBuZXdDaGFsbGVuZ2VOdW1iZXIgPT09IHRoaXMub2xkQ2hhbGxlbmdlTnVtYmVyVHdvICkgKSB7XHJcbiAgICAgIG5ld0NoYWxsZW5nZU51bWJlciA9IHRoaXMuZ2V0UmFuZG9tQ2hhbGxlbmdlTnVtYmVyKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmNoYWxsZW5nZU51bWJlclByb3BlcnR5LnZhbHVlID0gbmV3Q2hhbGxlbmdlTnVtYmVyO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2VuZXJhdGUgYSByYW5kb20gY2hhbGxlbmdlIG51bWJlciB0aGF0IGlzIGluIHRoZSBkZWZpbmVkIGNoYWxsZW5nZSByYW5nZS5cclxuICAgKi9cclxuICBwcml2YXRlIGdldFJhbmRvbUNoYWxsZW5nZU51bWJlcigpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIGRvdFJhbmRvbS5uZXh0SW50QmV0d2VlbiggdGhpcy5jaGFsbGVuZ2VSYW5nZS5taW4sIHRoaXMuY2hhbGxlbmdlUmFuZ2UubWF4ICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDYWxjdWxhdGVzIHRoZSByYW5nZSBvZiB0aGUgY2hhbGxlbmdlIG51bWJlcnMgZm9yIHRoZSBnaXZlbiBsZXZlbCBudW1iZXIgYW5kIGlucHV0IHJhbmdlLiBUaGlzIGlzIGNvbnZlcnRpbmdcclxuICAgKiBsZXZlbENoYWxsZW5nZVJhbmdlLCBhIG1hdGhlbWF0aWNhbCByYW5nZSAoc2VlIHBhcmFtZXRlciBkb2Mgb2YgdGhpcyBjbGFzcyksIHRvIGEgUmFuZ2UgdHlwZSwgd2hpY2ggaW5jbHVkZXMgbWluXHJcbiAgICogYW5kIG1heCB2YWx1ZXMuXHJcbiAgICpcclxuICAgKiBFeGFtcGxlczpcclxuICAgKiAxLCAxMCA9PiAxLCAxMFxyXG4gICAqIDIsIDEwID0+IDExLCAyMFxyXG4gICAqIDEsIDUgPT4gMSwgNVxyXG4gICAqIDIsIDUgPT4gNiwgMTBcclxuICAgKi9cclxuICBwcml2YXRlIHN0YXRpYyBnZXRDaGFsbGVuZ2VSYW5nZSggbGV2ZWxOdW1iZXI6IG51bWJlciwgbGV2ZWxDaGFsbGVuZ2VSYW5nZTogbnVtYmVyICk6IFJhbmdlIHtcclxuICAgIGNvbnN0IG1pbmltdW1DaGFsbGVuZ2VOdW1iZXIgPSAoIGxldmVsTnVtYmVyIC0gMSApICogbGV2ZWxDaGFsbGVuZ2VSYW5nZSArIDE7XHJcbiAgICBjb25zdCBtYXhpbXVtQ2hhbGxlbmdlTnVtYmVyID0gbGV2ZWxOdW1iZXIgKiBsZXZlbENoYWxsZW5nZVJhbmdlO1xyXG4gICAgcmV0dXJuIG5ldyBSYW5nZSggbWluaW11bUNoYWxsZW5nZU51bWJlciwgbWF4aW11bUNoYWxsZW5nZU51bWJlciApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBmYWxzZSwgJ2Rpc3Bvc2UgaXMgbm90IHN1cHBvcnRlZCwgZXhpc3RzIGZvciB0aGUgbGlmZXRpbWUgb2YgdGhlIHNpbScgKTtcclxuICB9XHJcbn1cclxuXHJcbm51bWJlclBsYXkucmVnaXN0ZXIoICdOdW1iZXJQbGF5R2FtZUxldmVsJywgTnVtYmVyUGxheUdhbWVMZXZlbCApO1xyXG5leHBvcnQgZGVmYXVsdCBOdW1iZXJQbGF5R2FtZUxldmVsOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGVBQWUsTUFBTSx3Q0FBd0M7QUFDcEUsT0FB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