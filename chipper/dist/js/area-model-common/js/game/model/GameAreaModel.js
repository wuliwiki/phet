// Copyright 2017-2021, University of Colorado Boulder

/**
 * Model for the game screens
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import DynamicProperty from '../../../../axon/js/DynamicProperty.js';
import Property from '../../../../axon/js/Property.js';
import areaModelCommon from '../../areaModelCommon.js';
import AreaLevel from './AreaLevel.js';
import Entry from './Entry.js';
import EntryStatus from './EntryStatus.js';
import GameState from './GameState.js';
class GameAreaModel {
  /**
   * @param {Array.<AreaLevel>} levels
   * @param {boolean} hasExponents
   */
  constructor(levels, hasExponents) {
    // @public {Array.<AreaLevel>}
    this.levels = levels;

    // @public {boolean}
    this.hasExponents = hasExponents;

    // @public {Property.<AreaLevel|null>} - The current level
    this.currentLevelProperty = new Property(null, {
      isValidValue: value => value === null || value instanceof AreaLevel
    });

    // @public {Property.<Entry|null}
    this.activeEntryProperty = new Property(null, {
      isValidValue: value => value === null || value instanceof Entry
    });

    // @public {Property.<AreaChallenge|null>}
    this.currentChallengeProperty = new DynamicProperty(this.currentLevelProperty, {
      derive: 'currentChallengeProperty'
    });
    this.currentChallengeProperty.lazyLink(this.activeEntryProperty.reset.bind(this.activeEntryProperty));

    // @public {Property.<GameState|null>} - This is null when there is no current challenge (e.g. level selection)
    this.stateProperty = new DynamicProperty(this.currentChallengeProperty, {
      derive: 'stateProperty',
      bidirectional: true
    }, {
      validValues: GameState.VALUES.concat([null])
    });

    // @public {Property.<boolean>} - Whether the check button should be enabled
    this.allowCheckingProperty = new DynamicProperty(this.currentChallengeProperty, {
      derive: 'allowCheckingProperty',
      defaultValue: false
    });
  }

  /**
   * Selects a given level, making it the current level.
   * @public
   *
   * @param {AreaLevel} level
   */
  selectLevel(level) {
    level.select();
    this.currentLevelProperty.value = level;
  }

  /**
   * Sets the value of the current editable property to that of the provided term.
   * @public
   *
   * @param {Term} term
   */
  setActiveTerm(term) {
    // Appearance change for https://github.com/phetsims/area-model-common/issues/42, handles only showing the
    // "wrong" values for the variables 6-1 case (non-unique)
    this.currentChallengeProperty.value.checkNonUniqueChanges();
    this.activeEntryProperty.value.valueProperty.value = term;
    this.activeEntryProperty.value.statusProperty.value = EntryStatus.NORMAL;
    this.activeEntryProperty.value = null;
  }

  /**
   * Checks the user's input against the known answer.
   * @public
   */
  check() {
    // Close any keypads, see https://github.com/phetsims/area-model-common/issues/66
    this.activeEntryProperty.value = null;
    const challenge = this.currentChallengeProperty.value;
    this.currentLevelProperty.value.scoreProperty.value += challenge.check();
  }

  /**
   * Move to try another time.
   * @public
   */
  tryAgain() {
    if (this.currentChallengeProperty.value) {
      this.currentChallengeProperty.value.tryAgain();
    }
  }

  /**
   * Move to the next challenge.
   * @public
   */
  next() {
    if (this.currentLevelProperty.value) {
      this.currentLevelProperty.value.next();
    }
  }

  /**
   * Goes to the level selection.
   * @public
   */
  moveToLevelSelection() {
    this.currentLevelProperty.value = null; // move to no level
  }

  /**
   * Shows the answer.
   * @public
   */
  showAnswer() {
    if (this.currentChallengeProperty.value) {
      this.currentChallengeProperty.value.showAnswers();
      this.currentChallengeProperty.value.stateProperty.value = GameState.SHOW_SOLUTION;
      this.activeEntryProperty.reset();
    }
  }

  /**
   * Fills in the answers without moving to the "SHOW_SOLUTION" state.
   * @public
   */
  cheat() {
    if (this.currentChallengeProperty.value) {
      // filling in the correct answers to the entries
      this.currentChallengeProperty.value.showAnswers();

      // unselecting the edited one and closing the keypad if necessary
      this.activeEntryProperty.reset();
    }
  }

  /**
   * Returns the model to its initial state.
   * @public
   */
  reset() {
    this.activeEntryProperty.reset();
    this.currentLevelProperty.reset();
    this.levels.forEach(level => {
      level.reset();
    });
  }
}
areaModelCommon.register('GameAreaModel', GameAreaModel);
export default GameAreaModel;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEeW5hbWljUHJvcGVydHkiLCJQcm9wZXJ0eSIsImFyZWFNb2RlbENvbW1vbiIsIkFyZWFMZXZlbCIsIkVudHJ5IiwiRW50cnlTdGF0dXMiLCJHYW1lU3RhdGUiLCJHYW1lQXJlYU1vZGVsIiwiY29uc3RydWN0b3IiLCJsZXZlbHMiLCJoYXNFeHBvbmVudHMiLCJjdXJyZW50TGV2ZWxQcm9wZXJ0eSIsImlzVmFsaWRWYWx1ZSIsInZhbHVlIiwiYWN0aXZlRW50cnlQcm9wZXJ0eSIsImN1cnJlbnRDaGFsbGVuZ2VQcm9wZXJ0eSIsImRlcml2ZSIsImxhenlMaW5rIiwicmVzZXQiLCJiaW5kIiwic3RhdGVQcm9wZXJ0eSIsImJpZGlyZWN0aW9uYWwiLCJ2YWxpZFZhbHVlcyIsIlZBTFVFUyIsImNvbmNhdCIsImFsbG93Q2hlY2tpbmdQcm9wZXJ0eSIsImRlZmF1bHRWYWx1ZSIsInNlbGVjdExldmVsIiwibGV2ZWwiLCJzZWxlY3QiLCJzZXRBY3RpdmVUZXJtIiwidGVybSIsImNoZWNrTm9uVW5pcXVlQ2hhbmdlcyIsInZhbHVlUHJvcGVydHkiLCJzdGF0dXNQcm9wZXJ0eSIsIk5PUk1BTCIsImNoZWNrIiwiY2hhbGxlbmdlIiwic2NvcmVQcm9wZXJ0eSIsInRyeUFnYWluIiwibmV4dCIsIm1vdmVUb0xldmVsU2VsZWN0aW9uIiwic2hvd0Fuc3dlciIsInNob3dBbnN3ZXJzIiwiU0hPV19TT0xVVElPTiIsImNoZWF0IiwiZm9yRWFjaCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiR2FtZUFyZWFNb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNy0yMDIxLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBNb2RlbCBmb3IgdGhlIGdhbWUgc2NyZWVuc1xyXG4gKlxyXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XHJcbiAqL1xyXG5cclxuaW1wb3J0IER5bmFtaWNQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL0R5bmFtaWNQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1Byb3BlcnR5LmpzJztcclxuaW1wb3J0IGFyZWFNb2RlbENvbW1vbiBmcm9tICcuLi8uLi9hcmVhTW9kZWxDb21tb24uanMnO1xyXG5pbXBvcnQgQXJlYUxldmVsIGZyb20gJy4vQXJlYUxldmVsLmpzJztcclxuaW1wb3J0IEVudHJ5IGZyb20gJy4vRW50cnkuanMnO1xyXG5pbXBvcnQgRW50cnlTdGF0dXMgZnJvbSAnLi9FbnRyeVN0YXR1cy5qcyc7XHJcbmltcG9ydCBHYW1lU3RhdGUgZnJvbSAnLi9HYW1lU3RhdGUuanMnO1xyXG5cclxuY2xhc3MgR2FtZUFyZWFNb2RlbCB7XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtBcnJheS48QXJlYUxldmVsPn0gbGV2ZWxzXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBoYXNFeHBvbmVudHNcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvciggbGV2ZWxzLCBoYXNFeHBvbmVudHMgKSB7XHJcblxyXG4gICAgLy8gQHB1YmxpYyB7QXJyYXkuPEFyZWFMZXZlbD59XHJcbiAgICB0aGlzLmxldmVscyA9IGxldmVscztcclxuXHJcbiAgICAvLyBAcHVibGljIHtib29sZWFufVxyXG4gICAgdGhpcy5oYXNFeHBvbmVudHMgPSBoYXNFeHBvbmVudHM7XHJcblxyXG4gICAgLy8gQHB1YmxpYyB7UHJvcGVydHkuPEFyZWFMZXZlbHxudWxsPn0gLSBUaGUgY3VycmVudCBsZXZlbFxyXG4gICAgdGhpcy5jdXJyZW50TGV2ZWxQcm9wZXJ0eSA9IG5ldyBQcm9wZXJ0eSggbnVsbCwge1xyXG4gICAgICBpc1ZhbGlkVmFsdWU6IHZhbHVlID0+IHZhbHVlID09PSBudWxsIHx8IHZhbHVlIGluc3RhbmNlb2YgQXJlYUxldmVsXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gQHB1YmxpYyB7UHJvcGVydHkuPEVudHJ5fG51bGx9XHJcbiAgICB0aGlzLmFjdGl2ZUVudHJ5UHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIG51bGwsIHtcclxuICAgICAgaXNWYWxpZFZhbHVlOiB2YWx1ZSA9PiB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSBpbnN0YW5jZW9mIEVudHJ5XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gQHB1YmxpYyB7UHJvcGVydHkuPEFyZWFDaGFsbGVuZ2V8bnVsbD59XHJcbiAgICB0aGlzLmN1cnJlbnRDaGFsbGVuZ2VQcm9wZXJ0eSA9IG5ldyBEeW5hbWljUHJvcGVydHkoIHRoaXMuY3VycmVudExldmVsUHJvcGVydHksIHtcclxuICAgICAgZGVyaXZlOiAnY3VycmVudENoYWxsZW5nZVByb3BlcnR5J1xyXG4gICAgfSApO1xyXG4gICAgdGhpcy5jdXJyZW50Q2hhbGxlbmdlUHJvcGVydHkubGF6eUxpbmsoIHRoaXMuYWN0aXZlRW50cnlQcm9wZXJ0eS5yZXNldC5iaW5kKCB0aGlzLmFjdGl2ZUVudHJ5UHJvcGVydHkgKSApO1xyXG5cclxuICAgIC8vIEBwdWJsaWMge1Byb3BlcnR5LjxHYW1lU3RhdGV8bnVsbD59IC0gVGhpcyBpcyBudWxsIHdoZW4gdGhlcmUgaXMgbm8gY3VycmVudCBjaGFsbGVuZ2UgKGUuZy4gbGV2ZWwgc2VsZWN0aW9uKVxyXG4gICAgdGhpcy5zdGF0ZVByb3BlcnR5ID0gbmV3IER5bmFtaWNQcm9wZXJ0eSggdGhpcy5jdXJyZW50Q2hhbGxlbmdlUHJvcGVydHksIHtcclxuICAgICAgZGVyaXZlOiAnc3RhdGVQcm9wZXJ0eScsXHJcbiAgICAgIGJpZGlyZWN0aW9uYWw6IHRydWVcclxuICAgIH0sIHtcclxuICAgICAgdmFsaWRWYWx1ZXM6IEdhbWVTdGF0ZS5WQUxVRVMuY29uY2F0KCBbIG51bGwgXSApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gQHB1YmxpYyB7UHJvcGVydHkuPGJvb2xlYW4+fSAtIFdoZXRoZXIgdGhlIGNoZWNrIGJ1dHRvbiBzaG91bGQgYmUgZW5hYmxlZFxyXG4gICAgdGhpcy5hbGxvd0NoZWNraW5nUHJvcGVydHkgPSBuZXcgRHluYW1pY1Byb3BlcnR5KCB0aGlzLmN1cnJlbnRDaGFsbGVuZ2VQcm9wZXJ0eSwge1xyXG4gICAgICBkZXJpdmU6ICdhbGxvd0NoZWNraW5nUHJvcGVydHknLFxyXG4gICAgICBkZWZhdWx0VmFsdWU6IGZhbHNlXHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZWxlY3RzIGEgZ2l2ZW4gbGV2ZWwsIG1ha2luZyBpdCB0aGUgY3VycmVudCBsZXZlbC5cclxuICAgKiBAcHVibGljXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0FyZWFMZXZlbH0gbGV2ZWxcclxuICAgKi9cclxuICBzZWxlY3RMZXZlbCggbGV2ZWwgKSB7XHJcbiAgICBsZXZlbC5zZWxlY3QoKTtcclxuICAgIHRoaXMuY3VycmVudExldmVsUHJvcGVydHkudmFsdWUgPSBsZXZlbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIHZhbHVlIG9mIHRoZSBjdXJyZW50IGVkaXRhYmxlIHByb3BlcnR5IHRvIHRoYXQgb2YgdGhlIHByb3ZpZGVkIHRlcm0uXHJcbiAgICogQHB1YmxpY1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHtUZXJtfSB0ZXJtXHJcbiAgICovXHJcbiAgc2V0QWN0aXZlVGVybSggdGVybSApIHtcclxuICAgIC8vIEFwcGVhcmFuY2UgY2hhbmdlIGZvciBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvYXJlYS1tb2RlbC1jb21tb24vaXNzdWVzLzQyLCBoYW5kbGVzIG9ubHkgc2hvd2luZyB0aGVcclxuICAgIC8vIFwid3JvbmdcIiB2YWx1ZXMgZm9yIHRoZSB2YXJpYWJsZXMgNi0xIGNhc2UgKG5vbi11bmlxdWUpXHJcbiAgICB0aGlzLmN1cnJlbnRDaGFsbGVuZ2VQcm9wZXJ0eS52YWx1ZS5jaGVja05vblVuaXF1ZUNoYW5nZXMoKTtcclxuXHJcbiAgICB0aGlzLmFjdGl2ZUVudHJ5UHJvcGVydHkudmFsdWUudmFsdWVQcm9wZXJ0eS52YWx1ZSA9IHRlcm07XHJcbiAgICB0aGlzLmFjdGl2ZUVudHJ5UHJvcGVydHkudmFsdWUuc3RhdHVzUHJvcGVydHkudmFsdWUgPSBFbnRyeVN0YXR1cy5OT1JNQUw7XHJcbiAgICB0aGlzLmFjdGl2ZUVudHJ5UHJvcGVydHkudmFsdWUgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2tzIHRoZSB1c2VyJ3MgaW5wdXQgYWdhaW5zdCB0aGUga25vd24gYW5zd2VyLlxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBjaGVjaygpIHtcclxuICAgIC8vIENsb3NlIGFueSBrZXlwYWRzLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL2FyZWEtbW9kZWwtY29tbW9uL2lzc3Vlcy82NlxyXG4gICAgdGhpcy5hY3RpdmVFbnRyeVByb3BlcnR5LnZhbHVlID0gbnVsbDtcclxuXHJcbiAgICBjb25zdCBjaGFsbGVuZ2UgPSB0aGlzLmN1cnJlbnRDaGFsbGVuZ2VQcm9wZXJ0eS52YWx1ZTtcclxuXHJcbiAgICB0aGlzLmN1cnJlbnRMZXZlbFByb3BlcnR5LnZhbHVlLnNjb3JlUHJvcGVydHkudmFsdWUgKz0gY2hhbGxlbmdlLmNoZWNrKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBNb3ZlIHRvIHRyeSBhbm90aGVyIHRpbWUuXHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG4gIHRyeUFnYWluKCkge1xyXG4gICAgaWYgKCB0aGlzLmN1cnJlbnRDaGFsbGVuZ2VQcm9wZXJ0eS52YWx1ZSApIHtcclxuICAgICAgdGhpcy5jdXJyZW50Q2hhbGxlbmdlUHJvcGVydHkudmFsdWUudHJ5QWdhaW4oKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE1vdmUgdG8gdGhlIG5leHQgY2hhbGxlbmdlLlxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBuZXh0KCkge1xyXG4gICAgaWYgKCB0aGlzLmN1cnJlbnRMZXZlbFByb3BlcnR5LnZhbHVlICkge1xyXG4gICAgICB0aGlzLmN1cnJlbnRMZXZlbFByb3BlcnR5LnZhbHVlLm5leHQoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdvZXMgdG8gdGhlIGxldmVsIHNlbGVjdGlvbi5cclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgbW92ZVRvTGV2ZWxTZWxlY3Rpb24oKSB7XHJcbiAgICB0aGlzLmN1cnJlbnRMZXZlbFByb3BlcnR5LnZhbHVlID0gbnVsbDsgLy8gbW92ZSB0byBubyBsZXZlbFxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2hvd3MgdGhlIGFuc3dlci5cclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgc2hvd0Fuc3dlcigpIHtcclxuICAgIGlmICggdGhpcy5jdXJyZW50Q2hhbGxlbmdlUHJvcGVydHkudmFsdWUgKSB7XHJcbiAgICAgIHRoaXMuY3VycmVudENoYWxsZW5nZVByb3BlcnR5LnZhbHVlLnNob3dBbnN3ZXJzKCk7XHJcbiAgICAgIHRoaXMuY3VycmVudENoYWxsZW5nZVByb3BlcnR5LnZhbHVlLnN0YXRlUHJvcGVydHkudmFsdWUgPSBHYW1lU3RhdGUuU0hPV19TT0xVVElPTjtcclxuICAgICAgdGhpcy5hY3RpdmVFbnRyeVByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGaWxscyBpbiB0aGUgYW5zd2VycyB3aXRob3V0IG1vdmluZyB0byB0aGUgXCJTSE9XX1NPTFVUSU9OXCIgc3RhdGUuXHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG4gIGNoZWF0KCkge1xyXG4gICAgaWYgKCB0aGlzLmN1cnJlbnRDaGFsbGVuZ2VQcm9wZXJ0eS52YWx1ZSApIHtcclxuXHJcbiAgICAgIC8vIGZpbGxpbmcgaW4gdGhlIGNvcnJlY3QgYW5zd2VycyB0byB0aGUgZW50cmllc1xyXG4gICAgICB0aGlzLmN1cnJlbnRDaGFsbGVuZ2VQcm9wZXJ0eS52YWx1ZS5zaG93QW5zd2VycygpO1xyXG5cclxuICAgICAgLy8gdW5zZWxlY3RpbmcgdGhlIGVkaXRlZCBvbmUgYW5kIGNsb3NpbmcgdGhlIGtleXBhZCBpZiBuZWNlc3NhcnlcclxuICAgICAgdGhpcy5hY3RpdmVFbnRyeVByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm5zIHRoZSBtb2RlbCB0byBpdHMgaW5pdGlhbCBzdGF0ZS5cclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgcmVzZXQoKSB7XHJcbiAgICB0aGlzLmFjdGl2ZUVudHJ5UHJvcGVydHkucmVzZXQoKTtcclxuICAgIHRoaXMuY3VycmVudExldmVsUHJvcGVydHkucmVzZXQoKTtcclxuICAgIHRoaXMubGV2ZWxzLmZvckVhY2goIGxldmVsID0+IHtcclxuICAgICAgbGV2ZWwucmVzZXQoKTtcclxuICAgIH0gKTtcclxuICB9XHJcbn1cclxuXHJcbmFyZWFNb2RlbENvbW1vbi5yZWdpc3RlciggJ0dhbWVBcmVhTW9kZWwnLCBHYW1lQXJlYU1vZGVsICk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBHYW1lQXJlYU1vZGVsOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxlQUFlLE1BQU0sd0NBQXdDO0FBQ3BFLE9BQU9DLFFBQVEsTUFBTSxpQ0FBaUM7QUFDdEQsT0FBT0MsZUFBZSxNQUFNLDBCQUEwQjtBQUN0RCxPQUFPQyxTQUFTLE1BQU0sZ0JBQWdCO0FBQ3RDLE9BQU9DLEtBQUssTUFBTSxZQUFZO0FBQzlCLE9BQU9DLFdBQVcsTUFBTSxrQkFBa0I7QUFDMUMsT0FBT0MsU0FBUyxNQUFNLGdCQUFnQjtBQUV0QyxNQUFNQyxhQUFhLENBQUM7RUFDbEI7QUFDRjtBQUNBO0FBQ0E7RUFDRUMsV0FBV0EsQ0FBRUMsTUFBTSxFQUFFQyxZQUFZLEVBQUc7SUFFbEM7SUFDQSxJQUFJLENBQUNE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