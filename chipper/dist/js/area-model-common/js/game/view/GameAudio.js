// Copyright 2017-2021, University of Colorado Boulder

/**
 * Handles playing audio for the game.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import GameAudioPlayer from '../../../../vegas/js/GameAudioPlayer.js';
import areaModelCommon from '../../areaModelCommon.js';
import AreaModelCommonConstants from '../../common/AreaModelCommonConstants.js';
import GameState from '../model/GameState.js';
class GameAudio {
  /**
   * @param {GameAreaModel} model
   */
  constructor(model) {
    const audioPlayer = new GameAudioPlayer();
    model.stateProperty.link((state, oldState) => {
      // If we just moved to/from level section (outside of a level), don't fire sounds.
      if (state === null || oldState === null) {
        return;
      }
      if (state === GameState.CORRECT_ANSWER) {
        audioPlayer.correctAnswer();
      }
      if (state === GameState.WRONG_FIRST_ANSWER || state === GameState.WRONG_SECOND_ANSWER) {
        audioPlayer.wrongAnswer();
      }
      if (state === GameState.LEVEL_COMPLETE) {
        const score = model.currentLevelProperty.value.scoreProperty.value;
        if (score === AreaModelCommonConstants.PERFECT_SCORE) {
          audioPlayer.gameOverPerfectScore();
        } else if (score === 0) {
          audioPlayer.gameOverZeroScore();
        } else {
          audioPlayer.gameOverImperfectScore();
        }
      }
    });
  }
}
areaModelCommon.register('GameAudio', GameAudio);
export default GameAudio;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJHYW1lQXVkaW9QbGF5ZXIiLCJhcmVhTW9kZWxDb21tb24iLCJBcmVhTW9kZWxDb21tb25Db25zdGFudHMiLCJHYW1lU3RhdGUiLCJHYW1lQXVkaW8iLCJjb25zdHJ1Y3RvciIsIm1vZGVsIiwiYXVkaW9QbGF5ZXIiLCJzdGF0ZVByb3BlcnR5IiwibGluayIsInN0YXRlIiwib2xkU3RhdGUiLCJDT1JSRUNUX0FOU1dFUiIsImNvcnJlY3RBbnN3ZXIiLCJXUk9OR19GSVJTVF9BTlNXRVIiLCJXUk9OR19TRUNPTkRfQU5TV0VSIiwid3JvbmdBbnN3ZXIiLCJMRVZFTF9DT01QTEVURSIsInNjb3JlIiwiY3VycmVudExldmVsUHJvcGVydHkiLCJ2YWx1ZSIsInNjb3JlUHJvcGVydHkiLCJQRVJGRUNUX1NDT1JFIiwiZ2FtZU92ZXJQZXJmZWN0U2NvcmUiLCJnYW1lT3Zlclplcm9TY29yZSIsImdhbWVPdmVySW1wZXJmZWN0U2NvcmUiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkdhbWVBdWRpby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNy0yMDIxLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBIYW5kbGVzIHBsYXlpbmcgYXVkaW8gZm9yIHRoZSBnYW1lLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XHJcbiAqL1xyXG5cclxuaW1wb3J0IEdhbWVBdWRpb1BsYXllciBmcm9tICcuLi8uLi8uLi8uLi92ZWdhcy9qcy9HYW1lQXVkaW9QbGF5ZXIuanMnO1xyXG5pbXBvcnQgYXJlYU1vZGVsQ29tbW9uIGZyb20gJy4uLy4uL2FyZWFNb2RlbENvbW1vbi5qcyc7XHJcbmltcG9ydCBBcmVhTW9kZWxDb21tb25Db25zdGFudHMgZnJvbSAnLi4vLi4vY29tbW9uL0FyZWFNb2RlbENvbW1vbkNvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBHYW1lU3RhdGUgZnJvbSAnLi4vbW9kZWwvR2FtZVN0YXRlLmpzJztcclxuXHJcbmNsYXNzIEdhbWVBdWRpbyB7XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtHYW1lQXJlYU1vZGVsfSBtb2RlbFxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBtb2RlbCApIHtcclxuICAgIGNvbnN0IGF1ZGlvUGxheWVyID0gbmV3IEdhbWVBdWRpb1BsYXllcigpO1xyXG5cclxuICAgIG1vZGVsLnN0YXRlUHJvcGVydHkubGluayggKCBzdGF0ZSwgb2xkU3RhdGUgKSA9PiB7XHJcbiAgICAgIC8vIElmIHdlIGp1c3QgbW92ZWQgdG8vZnJvbSBsZXZlbCBzZWN0aW9uIChvdXRzaWRlIG9mIGEgbGV2ZWwpLCBkb24ndCBmaXJlIHNvdW5kcy5cclxuICAgICAgaWYgKCBzdGF0ZSA9PT0gbnVsbCB8fCBvbGRTdGF0ZSA9PT0gbnVsbCApIHsgcmV0dXJuOyB9XHJcblxyXG4gICAgICBpZiAoIHN0YXRlID09PSBHYW1lU3RhdGUuQ09SUkVDVF9BTlNXRVIgKSB7XHJcbiAgICAgICAgYXVkaW9QbGF5ZXIuY29ycmVjdEFuc3dlcigpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICggc3RhdGUgPT09IEdhbWVTdGF0ZS5XUk9OR19GSVJTVF9BTlNXRVIgfHwgc3RhdGUgPT09IEdhbWVTdGF0ZS5XUk9OR19TRUNPTkRfQU5TV0VSICkge1xyXG4gICAgICAgIGF1ZGlvUGxheWVyLndyb25nQW5zd2VyKCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCBzdGF0ZSA9PT0gR2FtZVN0YXRlLkxFVkVMX0NPTVBMRVRFICkge1xyXG4gICAgICAgIGNvbnN0IHNjb3JlID0gbW9kZWwuY3VycmVudExldmVsUHJvcGVydHkudmFsdWUuc2NvcmVQcm9wZXJ0eS52YWx1ZTtcclxuICAgICAgICBpZiAoIHNjb3JlID09PSBBcmVhTW9kZWxDb21tb25Db25zdGFudHMuUEVSRkVDVF9TQ09SRSApIHtcclxuICAgICAgICAgIGF1ZGlvUGxheWVyLmdhbWVPdmVyUGVyZmVjdFNjb3JlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCBzY29yZSA9PT0gMCApIHtcclxuICAgICAgICAgIGF1ZGlvUGxheWVyLmdhbWVPdmVyWmVyb1Njb3JlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgYXVkaW9QbGF5ZXIuZ2FtZU92ZXJJbXBlcmZlY3RTY29yZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSApO1xyXG4gIH1cclxufVxyXG5cclxuYXJlYU1vZGVsQ29tbW9uLnJlZ2lzdGVyKCAnR2FtZUF1ZGlvJywgR2FtZUF1ZGlvICk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBHYW1lQXVkaW87Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGVBQWUsTUFBTSx5Q0FBeUM7QUFDckUsT0FBT0MsZUFBZSxNQUFNLDBCQUEwQjtBQUN0RCxPQUFPQyx3QkFBd0IsTUFBTSwwQ0FBMEM7QUFDL0UsT0FBT0MsU0FBUyxNQUFNLHVCQUF1QjtBQUU3QyxNQUFNQyxTQUFTLENBQUM7RUFDZDtBQUNGO0FBQ0E7RUFDRUMsV0FBV0EsQ0FBRUMsS0FBSyxFQUFHO0lBQ25CLE1BQU1DLFdBQVcsR0FBRyxJQUFJUCxlQUFlLENBQUMsQ0FBQztJQUV6Q00sS0FBSyxDQUFDRSxhQUFhLENBQUNDLElBQUksQ0FBRSxDQUFFQyxLQUFLLEVBQUVDLFFBQVEsS0FBTTtNQUMvQztNQUNBLElBQUtELEtBQUssS0FBSyxJQUFJLElBQUlDLFFBQVEsS0FBSyxJQUFJLEVBQUc7UUFBRTtNQUFRO01BRXJELElBQUtELEtBQUssS0FBS1AsU0FBUyxDQUFDUyxjQUFjLEVBQUc7UUFDeENMLFdBQVcsQ0FBQ00sYUFBYSxDQUFDLENBQUM7TUFDN0I7TUFDQSxJQUFLSCxLQUFLLEtBQUtQLFNBQVMsQ0FBQ1csa0JBQWtCLElBQUlKLEtBQUssS0FBS1AsU0FBUyxDQUFDWSxtQkFBbUIsRUFBRztRQUN2RlIsV0FBVyxDQUFDUyxXQUFXLENBQUMsQ0FBQztNQUMzQjtNQUNBLElBQUtOLEtBQUssS0FBS1AsU0FBUyxDQUFDYyxjQUFjLEVBQUc7UUFDeEMsTUFBTUMsS0FBSyxHQUFHWixLQUFLLENBQUNhLG9CQUFvQixDQUFDQyxLQUFLLENBQUNDLGFBQWEsQ0FBQ0QsS0FBSztRQUNsRSxJQUFLRixLQUFLLEtBQUtoQix3QkFBd0IsQ0FBQ29CLGFBQWEsRUFBRztVQUN0RGYsV0FBVyxDQUFDZ0Isb0JBQW9CLENBQUMsQ0FBQztRQUNwQyxDQUFDLE1BQ0ksSUFBS0wsS0FBSyxLQUFLLENBQUMsRUFBRztVQUN0QlgsV0FBVyxDQUFDaUIsaUJBQWlCLENBQUMsQ0FBQztRQUNqQyxDQUFDLE1BQ0k7VUFDSGpCLFdBQVcsQ0FBQ2tCLHNCQUFzQixDQUFDLENBQUM7UUFDdEM7TUFDRjtJQUNGLENBQUUsQ0FBQztFQUNMO0FBQ0Y7QUFFQXhCLGVBQWUsQ0FBQ3lCLFFBQVEsQ0FBRSxXQUFXLEVBQUV0QixTQUFVLENBQUM7QUFFbEQsZUFBZUEsU0FBUyJ9