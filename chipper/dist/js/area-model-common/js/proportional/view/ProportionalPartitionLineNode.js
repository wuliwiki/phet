// Copyright 2017-2023, University of Colorado Boulder

/**
 * Display for the partition lines in proportional screens.
 *
 * NOTE: This type is designed to be persistent, and will not need to release references to avoid memory leaks.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import DynamicProperty from '../../../../axon/js/DynamicProperty.js';
import Multilink from '../../../../axon/js/Multilink.js';
import Property from '../../../../axon/js/Property.js';
import validate from '../../../../axon/js/validate.js';
import Matrix3 from '../../../../dot/js/Matrix3.js';
import Range from '../../../../dot/js/Range.js';
import Utils from '../../../../dot/js/Utils.js';
import { Shape } from '../../../../kite/js/imports.js';
import Orientation from '../../../../phet-core/js/Orientation.js';
import ArrowNode from '../../../../scenery-phet/js/ArrowNode.js';
import { DragListener, FocusHighlightPath, Line, Node, Path } from '../../../../scenery/js/imports.js';
import AccessibleSlider from '../../../../sun/js/accessibility/AccessibleSlider.js';
import areaModelCommon from '../../areaModelCommon.js';
import AreaModelCommonStrings from '../../AreaModelCommonStrings.js';
import AreaModelCommonConstants from '../../common/AreaModelCommonConstants.js';
import OrientationPair from '../../common/model/OrientationPair.js';
import AreaModelCommonColors from '../../common/view/AreaModelCommonColors.js';
const horizontalPartitionHandleString = AreaModelCommonStrings.a11y.horizontalPartitionHandle;
const horizontalPartitionHandleDescriptionString = AreaModelCommonStrings.a11y.horizontalPartitionHandleDescription;
const verticalPartitionHandleString = AreaModelCommonStrings.a11y.verticalPartitionHandle;
const verticalPartitionHandleDescriptionString = AreaModelCommonStrings.a11y.verticalPartitionHandleDescription;
class ProportionalPartitionLineNode extends AccessibleSlider(Node, 0) {
  /**
   * @mixes AccessibleSlider
   *
   * @param {ProportionalAreaDisplay} areaDisplay
   * @param {Property.<ModelViewTransform2>} modelViewTransformProperty
   * @param {Orientation} orientation
   */
  constructor(areaDisplay, modelViewTransformProperty, orientation) {
    validate(orientation, {
      validValues: Orientation.enumeration.values
    });

    // Relevant properties
    const partitionSplitProperty = areaDisplay.partitionSplitProperties.get(orientation);
    const oppositeActiveTotalProperty = areaDisplay.activeTotalProperties.get(orientation.opposite);
    const activeTotalProperty = areaDisplay.activeTotalProperties.get(orientation);

    // We need to reverse the accessible property for the vertical case.
    // See https://github.com/phetsims/area-model-introduction/issues/2
    const accessibleProperty = orientation === Orientation.HORIZONTAL ? partitionSplitProperty : new DynamicProperty(new Property(partitionSplitProperty), {
      bidirectional: true,
      map: v => -v,
      inverseMap: v => -v
    }, {
      valueType: 'number' // AccessibleSlider doesn't want anything besides a number
    });

    const enabledRangeProperty = new DerivedProperty([activeTotalProperty, areaDisplay.snapSizeProperty], (total, snapSize) => {
      const size = total - snapSize;
      return orientation === Orientation.HORIZONTAL ? new Range(0, size) : new Range(-size, 0);
    });
    super({
      valueProperty: accessibleProperty,
      enabledRangeProperty: enabledRangeProperty,
      constrainValue: value => Utils.roundSymmetric(value / areaDisplay.partitionSnapSizeProperty.value) * areaDisplay.partitionSnapSizeProperty.value,
      keyboardStep: 1,
      shiftKeyboardStep: 1,
      pageKeyboardStep: 5,
      ariaOrientation: orientation,
      a11yMapPDOMValue: v => (orientation === Orientation.HORIZONTAL ? 1 : -1) * v,
      roundToStepSize: true
    });

    // @private {ProportionalAreaDisplay}
    this.areaDisplay = areaDisplay;
    const showHintArrowsProperty = areaDisplay.hasHintArrows.get(orientation);
    let minHintArrow;
    let maxHintArrow;
    const hintOffset = 15;
    const hintLength = 20;
    const arrowOptions = {
      fill: 'yellow',
      pickable: false
    };
    if (orientation === Orientation.HORIZONTAL) {
      minHintArrow = new ArrowNode(-hintOffset, 0, -(hintLength + hintOffset), 0, arrowOptions);
      maxHintArrow = new ArrowNode(hintOffset, 0, hintLength + hintOffset, 0, arrowOptions);
    } else {
      minHintArrow = new ArrowNode(0, -hintOffset, 0, -(hintLength + hintOffset), arrowOptions);
      maxHintArrow = new ArrowNode(0, hintOffset, 0, hintLength + hintOffset, arrowOptions);
    }
    showHintArrowsProperty.linkAttribute(minHintArrow, 'visible');
    showHintArrowsProperty.linkAttribute(maxHintArrow, 'visible');
    const handleShape = ProportionalPartitionLineNode.HANDLE_ARROW_SHAPES.get(orientation);
    const handleMouseBounds = handleShape.bounds;
    const handleTouchBounds = handleMouseBounds.dilated(5);

    // We need to cut off the corners that would overlap between the two partition line handles, so we create a clipping
    // area and intersect with that. See https://github.com/phetsims/area-model-common/issues/80.
    let handleClipShape = new Shape().moveToPoint(handleTouchBounds.leftTop).lineToPoint(handleTouchBounds.leftBottom).lineToPoint(handleTouchBounds.rightBottom).lineToPoint(handleTouchBounds.rightTop.blend(handleTouchBounds.rightBottom, 0.4)).lineToPoint(handleTouchBounds.rightTop.blend(handleTouchBounds.leftTop, 0.4)).close();
    if (orientation === Orientation.VERTICAL) {
      handleClipShape = handleClipShape.transformed(Matrix3.rotation2(Math.PI));
    }
    const handle = new Path(handleShape, {
      mouseArea: Shape.bounds(handleMouseBounds).shapeIntersection(handleClipShape),
      touchArea: Shape.bounds(handleTouchBounds).shapeIntersection(handleClipShape),
      fill: areaDisplay.colorProperties.get(orientation),
      stroke: AreaModelCommonColors.partitionLineBorderProperty,
      cursor: 'pointer',
      children: [minHintArrow, maxHintArrow]
    });
    const line = new Line({
      stroke: AreaModelCommonColors.partitionLineStrokeProperty,
      lineWidth: 2,
      cursor: 'pointer'
    });
    this.children = [line, handle];
    this.labelTagName = 'label';
    this.labelContent = orientation === Orientation.HORIZONTAL ? verticalPartitionHandleString : horizontalPartitionHandleString;
    this.descriptionContent = orientation === Orientation.HORIZONTAL ? verticalPartitionHandleDescriptionString : horizontalPartitionHandleDescriptionString;
    this.focusHighlight = new FocusHighlightPath(handleShape.getOffsetShape(5));
    handle.addChild(this.focusHighlight);
    this.focusHighlightLayerable = true;

    // Main coordinate (when dragging)
    Multilink.multilink([partitionSplitProperty, modelViewTransformProperty], (split, modelViewTransform) => {
      this[orientation.coordinate] = orientation.modelToView(modelViewTransform, split);
    });

    // Opposite coordinate (how wide the area is in the other direction)
    Multilink.multilink([oppositeActiveTotalProperty, modelViewTransformProperty], (oppositeTotal, modelViewTransform) => {
      const offsetValue = orientation.opposite.modelToView(modelViewTransform, oppositeTotal) + AreaModelCommonConstants.PARTITION_HANDLE_OFFSET;
      handle[orientation.opposite.coordinate] = offsetValue;
      line[`${orientation.opposite.coordinate}2`] = offsetValue;
      line.mouseArea = line.localBounds.dilated(4);
      line.touchArea = line.localBounds.dilated(8);
    });

    // Visibility
    areaDisplay.partitionSplitVisibleProperties.get(orientation).linkAttribute(this, 'visible');
    areaDisplay.partitionSnapSizeProperty.link(snapSize => {
      this.setKeyboardStep(snapSize);
    });
    let dragHandler;
    modelViewTransformProperty.link(modelViewTransform => {
      if (dragHandler) {
        this.removeInputListener(dragHandler);
        dragHandler.dispose();
      }
      dragHandler = new DragListener({
        transform: modelViewTransform,
        drag: (event, listener) => {
          let value = listener.modelPoint[orientation.coordinate];
          value = Utils.roundSymmetric(value / areaDisplay.partitionSnapSizeProperty.value) * areaDisplay.partitionSnapSizeProperty.value;
          value = Utils.clamp(value, 0, activeTotalProperty.value);

          // Hint arrows disappear when the actual split changes during a drag, see
          // https://github.com/phetsims/area-model-common/issues/68
          const currentSplitValue = partitionSplitProperty.value;
          if (value !== currentSplitValue && value !== 0) {
            showHintArrowsProperty.value = false;
          }
          partitionSplitProperty.value = value;
        },
        end: () => {
          if (partitionSplitProperty.value === activeTotalProperty.value) {
            partitionSplitProperty.value = 0;
          }
        }
      });
      dragHandler.isUserControlledProperty.link(controlled => {
        areaDisplay.partitionSplitUserControlledProperties.get(orientation).value = controlled;
      });
      this.addInputListener(dragHandler);
    });
  }
}
areaModelCommon.register('ProportionalPartitionLineNode', ProportionalPartitionLineNode);

// Handle arrows
const arrowHalfLength = 10;
const arrowHalfWidth = 10;
const verticalArrowShape = new Shape().moveTo(-arrowHalfLength, 0).lineTo(arrowHalfLength, arrowHalfWidth).lineTo(arrowHalfLength, -arrowHalfWidth).close();
const horizontalArrowShape = verticalArrowShape.transformed(Matrix3.rotation2(Math.PI / 2));
ProportionalPartitionLineNode.HANDLE_ARROW_SHAPES = new OrientationPair(horizontalArrowShape, verticalArrowShape);
export default ProportionalPartitionLineNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJEeW5hbWljUHJvcGVydHkiLCJNdWx0aWxpbmsiLCJQcm9wZXJ0eSIsInZhbGlkYXRlIiwiTWF0cml4MyIsIlJhbmdlIiwiVXRpbHMiLCJTaGFwZSIsIk9yaWVudGF0aW9uIiwiQXJyb3dOb2RlIiwiRHJhZ0xpc3RlbmVyIiwiRm9jdXNIaWdobGlnaHRQYXRoIiwiTGluZSIsIk5vZGUiLCJQYXRoIiwiQWNjZXNzaWJsZVNsaWRlciIsImFyZWFNb2RlbENvbW1vbiIsIkFyZWFNb2RlbENvbW1vblN0cmluZ3MiLCJBcmVhTW9kZWxDb21tb25Db25zdGFudHMiLCJPcmllbnRhdGlvblBhaXIiLCJBcmVhTW9kZWxDb21tb25Db2xvcnMiLCJob3Jpem9udGFsUGFydGl0aW9uSGFuZGxlU3RyaW5nIiwiYTExeSIsImhvcml6b250YWxQYXJ0aXRpb25IYW5kbGUiLCJob3Jpem9udGFsUGFydGl0aW9uSGFuZGxlRGVzY3JpcHRpb25TdHJpbmciLCJob3Jpem9udGFsUGFydGl0aW9uSGFuZGxlRGVzY3JpcHRpb24iLCJ2ZXJ0aWNhbFBhcnRpdGlvbkhhbmRsZVN0cmluZyIsInZlcnRpY2FsUGFydGl0aW9uSGFuZGxlIiwidmVydGljYWxQYXJ0aXRpb25IYW5kbGVEZXNjcmlwdGlvblN0cmluZyIsInZlcnRpY2FsUGFydGl0aW9uSGFuZGxlRGVzY3JpcHRpb24iLCJQcm9wb3J0aW9uYWxQYXJ0aXRpb25MaW5lTm9kZSIsImNvbnN0cnVjdG9yIiwiYXJlYURpc3BsYXkiLCJtb2RlbFZpZXdUcmFuc2Zvcm1Qcm9wZXJ0eSIsIm9yaWVudGF0aW9uIiwidmFsaWRWYWx1ZXMiLCJlbnVtZXJhdGlvbiIsInZhbHVlcyIsInBhcnRpdGlvblNwbGl0UHJvcGVydHkiLCJwYXJ0aXRpb25TcGxpdFByb3BlcnRpZXMiLCJnZXQiLCJvcHBvc2l0ZUFjdGl2ZVRvdGFsUHJvcGVydHkiLCJhY3RpdmVUb3RhbFByb3BlcnRpZXMiLCJvcHBvc2l0ZSIsImFjdGl2ZVRvdGFsUHJvcGVydHkiLCJhY2Nlc3NpYmxlUHJvcGVydHkiLCJIT1JJWk9OVEFMIiwiYmlkaXJlY3Rpb25hbCIsIm1hcCIsInYiLCJpbnZlcnNlTWFwIiwidmFsdWVUeXBlIiwiZW5hYmxlZFJhbmdlUHJvcGVydHkiLCJzbmFwU2l6ZVByb3BlcnR5IiwidG90YWwiLCJzbmFwU2l6ZSIsInNpemUiLCJ2YWx1ZVByb3BlcnR5IiwiY29uc3RyYWluVmFsdWUiLCJ2YWx1ZSIsInJvdW5kU3ltbWV0cmljIiwicGFydGl0aW9uU25hcFNpemVQcm9wZXJ0eSIsImtleWJvYXJkU3RlcCIsInNoaWZ0S2V5Ym9hcmRTdGVwIiwicGFnZUtleWJvYXJkU3RlcCIsImFyaWFPcmllbnRhdGlvbiIsImExMXlNYXBQRE9NVmFsdWUiLCJyb3VuZFRvU3RlcFNpemUiLCJzaG93SGludEFycm93c1Byb3BlcnR5IiwiaGFzSGludEFycm93cyIsIm1pbkhpbnRBcnJvdyIsIm1heEhpbnRBcnJvdyIsImhpbnRPZmZzZXQiLCJoaW50TGVuZ3RoIiwiYXJyb3dPcHRpb25zIiwiZmlsbCIsInBpY2thYmxlIiwibGlua0F0dHJpYnV0ZSIsImhhbmRsZVNoYXBlIiwiSEFORExFX0FSUk9XX1NIQVBFUyIsImhhbmRsZU1vdXNlQm91bmRzIiwiYm91bmRzIiwiaGFuZGxlVG91Y2hCb3VuZHMiLCJkaWxhdGVkIiwiaGFuZGxlQ2xpcFNoYXBlIiwibW92ZVRvUG9pbnQiLCJsZWZ0VG9wIiwibGluZVRvUG9pbnQiLCJsZWZ0Qm90dG9tIiwicmlnaHRCb3R0b20iLCJyaWdodFRvcCIsImJsZW5kIiwiY2xvc2UiLCJWRVJUSUNBTCIsInRyYW5zZm9ybWVkIiwicm90YXRpb24yIiwiTWF0aCIsIlBJIiwiaGFuZGxlIiwibW91c2VBcmVhIiwic2hhcGVJbnRlcnNlY3Rpb24iLCJ0b3VjaEFyZWEiLCJjb2xvclByb3BlcnRpZXMiLCJzdHJva2UiLCJwYXJ0aXRpb25MaW5lQm9yZGVyUHJvcGVydHkiLCJjdXJzb3IiLCJjaGlsZHJlbiIsImxpbmUiLCJwYXJ0aXRpb25MaW5lU3Ryb2tlUHJvcGVydHkiLCJsaW5lV2lkdGgiLCJsYWJlbFRhZ05hbWUiLCJsYWJlbENvbnRlbnQiLCJkZXNjcmlwdGlvbkNvbnRlbnQiLCJmb2N1c0hpZ2hsaWdodCIsImdldE9mZnNldFNoYXBlIiwiYWRkQ2hpbGQiLCJmb2N1c0hpZ2hsaWdodExheWVyYWJsZSIsIm11bHRpbGluayIsInNwbGl0IiwibW9kZWxWaWV3VHJhbnNmb3JtIiwiY29vcmRpbmF0ZSIsIm1vZGVsVG9WaWV3Iiwib3Bwb3NpdGVUb3RhbCIsIm9mZnNldFZhbHVlIiwiUEFSVElUSU9OX0hBTkRMRV9PRkZTRVQiLCJsb2NhbEJvdW5kcyIsInBhcnRpdGlvblNwbGl0VmlzaWJsZVByb3BlcnRpZXMiLCJsaW5rIiwic2V0S2V5Ym9hcmRTdGVwIiwiZHJhZ0hhbmRsZXIiLCJyZW1vdmVJbnB1dExpc3RlbmVyIiwiZGlzcG9zZSIsInRyYW5zZm9ybSIsImRyYWciLCJldmVudCIsImxpc3RlbmVyIiwibW9kZWxQb2ludCIsImNsYW1wIiwiY3VycmVudFNwbGl0VmFsdWUiLCJlbmQiLCJpc1VzZXJDb250cm9sbGVkUHJvcGVydHkiLCJjb250cm9sbGVkIiwicGFydGl0aW9uU3BsaXRVc2VyQ29udHJvbGxlZFByb3BlcnRpZXMiLCJhZGRJbnB1dExpc3RlbmVyIiwicmVnaXN0ZXIiLCJhcnJvd0hhbGZMZW5ndGgiLCJhcnJvd0hhbGZXaWR0aCIsInZlcnRpY2FsQXJyb3dTaGFwZSIsIm1vdmVUbyIsImxpbmVUbyIsImhvcml6b250YWxBcnJvd1NoYXBlIl0sInNvdXJjZXMiOlsiUHJvcG9ydGlvbmFsUGFydGl0aW9uTGluZU5vZGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTctMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogRGlzcGxheSBmb3IgdGhlIHBhcnRpdGlvbiBsaW5lcyBpbiBwcm9wb3J0aW9uYWwgc2NyZWVucy5cclxuICpcclxuICogTk9URTogVGhpcyB0eXBlIGlzIGRlc2lnbmVkIHRvIGJlIHBlcnNpc3RlbnQsIGFuZCB3aWxsIG5vdCBuZWVkIHRvIHJlbGVhc2UgcmVmZXJlbmNlcyB0byBhdm9pZCBtZW1vcnkgbGVha3MuXHJcbiAqXHJcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cclxuICovXHJcblxyXG5pbXBvcnQgRGVyaXZlZFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvRGVyaXZlZFByb3BlcnR5LmpzJztcclxuaW1wb3J0IER5bmFtaWNQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL0R5bmFtaWNQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBNdWx0aWxpbmsgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9NdWx0aWxpbmsuanMnO1xyXG5pbXBvcnQgUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCB2YWxpZGF0ZSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL3ZhbGlkYXRlLmpzJztcclxuaW1wb3J0IE1hdHJpeDMgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL01hdHJpeDMuanMnO1xyXG5pbXBvcnQgUmFuZ2UgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1JhbmdlLmpzJztcclxuaW1wb3J0IFV0aWxzIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9VdGlscy5qcyc7XHJcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSAnLi4vLi4vLi4vLi4va2l0ZS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IE9yaWVudGF0aW9uIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9PcmllbnRhdGlvbi5qcyc7XHJcbmltcG9ydCBBcnJvd05vZGUgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL0Fycm93Tm9kZS5qcyc7XHJcbmltcG9ydCB7IERyYWdMaXN0ZW5lciwgRm9jdXNIaWdobGlnaHRQYXRoLCBMaW5lLCBOb2RlLCBQYXRoIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IEFjY2Vzc2libGVTbGlkZXIgZnJvbSAnLi4vLi4vLi4vLi4vc3VuL2pzL2FjY2Vzc2liaWxpdHkvQWNjZXNzaWJsZVNsaWRlci5qcyc7XHJcbmltcG9ydCBhcmVhTW9kZWxDb21tb24gZnJvbSAnLi4vLi4vYXJlYU1vZGVsQ29tbW9uLmpzJztcclxuaW1wb3J0IEFyZWFNb2RlbENvbW1vblN0cmluZ3MgZnJvbSAnLi4vLi4vQXJlYU1vZGVsQ29tbW9uU3RyaW5ncy5qcyc7XHJcbmltcG9ydCBBcmVhTW9kZWxDb21tb25Db25zdGFudHMgZnJvbSAnLi4vLi4vY29tbW9uL0FyZWFNb2RlbENvbW1vbkNvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBPcmllbnRhdGlvblBhaXIgZnJvbSAnLi4vLi4vY29tbW9uL21vZGVsL09yaWVudGF0aW9uUGFpci5qcyc7XHJcbmltcG9ydCBBcmVhTW9kZWxDb21tb25Db2xvcnMgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvQXJlYU1vZGVsQ29tbW9uQ29sb3JzLmpzJztcclxuXHJcbmNvbnN0IGhvcml6b250YWxQYXJ0aXRpb25IYW5kbGVTdHJpbmcgPSBBcmVhTW9kZWxDb21tb25TdHJpbmdzLmExMXkuaG9yaXpvbnRhbFBhcnRpdGlvbkhhbmRsZTtcclxuY29uc3QgaG9yaXpvbnRhbFBhcnRpdGlvbkhhbmRsZURlc2NyaXB0aW9uU3RyaW5nID0gQXJlYU1vZGVsQ29tbW9uU3RyaW5ncy5hMTF5Lmhvcml6b250YWxQYXJ0aXRpb25IYW5kbGVEZXNjcmlwdGlvbjtcclxuY29uc3QgdmVydGljYWxQYXJ0aXRpb25IYW5kbGVTdHJpbmcgPSBBcmVhTW9kZWxDb21tb25TdHJpbmdzLmExMXkudmVydGljYWxQYXJ0aXRpb25IYW5kbGU7XHJcbmNvbnN0IHZlcnRpY2FsUGFydGl0aW9uSGFuZGxlRGVzY3JpcHRpb25TdHJpbmcgPSBBcmVhTW9kZWxDb21tb25TdHJpbmdzLmExMXkudmVydGljYWxQYXJ0aXRpb25IYW5kbGVEZXNjcmlwdGlvbjtcclxuXHJcbmNsYXNzIFByb3BvcnRpb25hbFBhcnRpdGlvbkxpbmVOb2RlIGV4dGVuZHMgQWNjZXNzaWJsZVNsaWRlciggTm9kZSwgMCApIHtcclxuICAvKipcclxuICAgKiBAbWl4ZXMgQWNjZXNzaWJsZVNsaWRlclxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtQcm9wb3J0aW9uYWxBcmVhRGlzcGxheX0gYXJlYURpc3BsYXlcclxuICAgKiBAcGFyYW0ge1Byb3BlcnR5LjxNb2RlbFZpZXdUcmFuc2Zvcm0yPn0gbW9kZWxWaWV3VHJhbnNmb3JtUHJvcGVydHlcclxuICAgKiBAcGFyYW0ge09yaWVudGF0aW9ufSBvcmllbnRhdGlvblxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBhcmVhRGlzcGxheSwgbW9kZWxWaWV3VHJhbnNmb3JtUHJvcGVydHksIG9yaWVudGF0aW9uICkge1xyXG4gICAgdmFsaWRhdGUoIG9yaWVudGF0aW9uLCB7IHZhbGlkVmFsdWVzOiBPcmllbnRhdGlvbi5lbnVtZXJhdGlvbi52YWx1ZXMgfSApO1xyXG5cclxuICAgIC8vIFJlbGV2YW50IHByb3BlcnRpZXNcclxuICAgIGNvbnN0IHBhcnRpdGlvblNwbGl0UHJvcGVydHkgPSBhcmVhRGlzcGxheS5wYXJ0aXRpb25TcGxpdFByb3BlcnRpZXMuZ2V0KCBvcmllbnRhdGlvbiApO1xyXG4gICAgY29uc3Qgb3Bwb3NpdGVBY3RpdmVUb3RhbFByb3BlcnR5ID0gYXJlYURpc3BsYXkuYWN0aXZlVG90YWxQcm9wZXJ0aWVzLmdldCggb3JpZW50YXRpb24ub3Bwb3NpdGUgKTtcclxuICAgIGNvbnN0IGFjdGl2ZVRvdGFsUHJvcGVydHkgPSBhcmVhRGlzcGxheS5hY3RpdmVUb3RhbFByb3BlcnRpZXMuZ2V0KCBvcmllbnRhdGlvbiApO1xyXG5cclxuICAgIC8vIFdlIG5lZWQgdG8gcmV2ZXJzZSB0aGUgYWNjZXNzaWJsZSBwcm9wZXJ0eSBmb3IgdGhlIHZlcnRpY2FsIGNhc2UuXHJcbiAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL2FyZWEtbW9kZWwtaW50cm9kdWN0aW9uL2lzc3Vlcy8yXHJcbiAgICBjb25zdCBhY2Nlc3NpYmxlUHJvcGVydHkgPSBvcmllbnRhdGlvbiA9PT0gT3JpZW50YXRpb24uSE9SSVpPTlRBTFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBwYXJ0aXRpb25TcGxpdFByb3BlcnR5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG5ldyBEeW5hbWljUHJvcGVydHkoIG5ldyBQcm9wZXJ0eSggcGFydGl0aW9uU3BsaXRQcm9wZXJ0eSApLCB7XHJcbiAgICAgICAgYmlkaXJlY3Rpb25hbDogdHJ1ZSxcclxuICAgICAgICBtYXA6IHYgPT4gLXYsXHJcbiAgICAgICAgaW52ZXJzZU1hcDogdiA9PiAtdlxyXG4gICAgICB9LCB7XHJcbiAgICAgICAgdmFsdWVUeXBlOiAnbnVtYmVyJyAvLyBBY2Nlc3NpYmxlU2xpZGVyIGRvZXNuJ3Qgd2FudCBhbnl0aGluZyBiZXNpZGVzIGEgbnVtYmVyXHJcbiAgICAgIH0gKTtcclxuICAgIGNvbnN0IGVuYWJsZWRSYW5nZVByb3BlcnR5ID0gbmV3IERlcml2ZWRQcm9wZXJ0eShcclxuICAgICAgWyBhY3RpdmVUb3RhbFByb3BlcnR5LCBhcmVhRGlzcGxheS5zbmFwU2l6ZVByb3BlcnR5IF0sXHJcbiAgICAgICggdG90YWwsIHNuYXBTaXplICkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHNpemUgPSB0b3RhbCAtIHNuYXBTaXplO1xyXG4gICAgICAgIHJldHVybiBvcmllbnRhdGlvbiA9PT0gT3JpZW50YXRpb24uSE9SSVpPTlRBTCA/IG5ldyBSYW5nZSggMCwgc2l6ZSApIDogbmV3IFJhbmdlKCAtc2l6ZSwgMCApO1xyXG4gICAgICB9ICk7XHJcblxyXG4gICAgc3VwZXIoIHtcclxuICAgICAgdmFsdWVQcm9wZXJ0eTogYWNjZXNzaWJsZVByb3BlcnR5LFxyXG4gICAgICBlbmFibGVkUmFuZ2VQcm9wZXJ0eTogZW5hYmxlZFJhbmdlUHJvcGVydHksXHJcbiAgICAgIGNvbnN0cmFpblZhbHVlOiB2YWx1ZSA9PiBVdGlscy5yb3VuZFN5bW1ldHJpYyggdmFsdWUgLyBhcmVhRGlzcGxheS5wYXJ0aXRpb25TbmFwU2l6ZVByb3BlcnR5LnZhbHVlICkgKlxyXG4gICAgICAgICAgICAgICAgICAgICAgYXJlYURpc3BsYXkucGFydGl0aW9uU25hcFNpemVQcm9wZXJ0eS52YWx1ZSxcclxuICAgICAga2V5Ym9hcmRTdGVwOiAxLFxyXG4gICAgICBzaGlmdEtleWJvYXJkU3RlcDogMSxcclxuICAgICAgcGFnZUtleWJvYXJkU3RlcDogNSxcclxuICAgICAgYXJpYU9yaWVudGF0aW9uOiBvcmllbnRhdGlvbixcclxuICAgICAgYTExeU1hcFBET01WYWx1ZTogdiA9PiAoIG9yaWVudGF0aW9uID09PSBPcmllbnRhdGlvbi5IT1JJWk9OVEFMID8gMSA6IC0xICkgKiB2LFxyXG4gICAgICByb3VuZFRvU3RlcFNpemU6IHRydWVcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZSB7UHJvcG9ydGlvbmFsQXJlYURpc3BsYXl9XHJcbiAgICB0aGlzLmFyZWFEaXNwbGF5ID0gYXJlYURpc3BsYXk7XHJcblxyXG4gICAgY29uc3Qgc2hvd0hpbnRBcnJvd3NQcm9wZXJ0eSA9IGFyZWFEaXNwbGF5Lmhhc0hpbnRBcnJvd3MuZ2V0KCBvcmllbnRhdGlvbiApO1xyXG5cclxuICAgIGxldCBtaW5IaW50QXJyb3c7XHJcbiAgICBsZXQgbWF4SGludEFycm93O1xyXG4gICAgY29uc3QgaGludE9mZnNldCA9IDE1O1xyXG4gICAgY29uc3QgaGludExlbmd0aCA9IDIwO1xyXG4gICAgY29uc3QgYXJyb3dPcHRpb25zID0ge1xyXG4gICAgICBmaWxsOiAneWVsbG93JyxcclxuICAgICAgcGlja2FibGU6IGZhbHNlXHJcbiAgICB9O1xyXG4gICAgaWYgKCBvcmllbnRhdGlvbiA9PT0gT3JpZW50YXRpb24uSE9SSVpPTlRBTCApIHtcclxuICAgICAgbWluSGludEFycm93ID0gbmV3IEFycm93Tm9kZSggLWhpbnRPZmZzZXQsIDAsIC0oIGhpbnRMZW5ndGggKyBoaW50T2Zmc2V0ICksIDAsIGFycm93T3B0aW9ucyApO1xyXG4gICAgICBtYXhIaW50QXJyb3cgPSBuZXcgQXJyb3dOb2RlKCBoaW50T2Zmc2V0LCAwLCBoaW50TGVuZ3RoICsgaGludE9mZnNldCwgMCwgYXJyb3dPcHRpb25zICk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgbWluSGludEFycm93ID0gbmV3IEFycm93Tm9kZSggMCwgLWhpbnRPZmZzZXQsIDAsIC0oIGhpbnRMZW5ndGggKyBoaW50T2Zmc2V0ICksIGFycm93T3B0aW9ucyApO1xyXG4gICAgICBtYXhIaW50QXJyb3cgPSBuZXcgQXJyb3dOb2RlKCAwLCBoaW50T2Zmc2V0LCAwLCBoaW50TGVuZ3RoICsgaGludE9mZnNldCwgYXJyb3dPcHRpb25zICk7XHJcbiAgICB9XHJcbiAgICBzaG93SGludEFycm93c1Byb3BlcnR5LmxpbmtBdHRyaWJ1dGUoIG1pbkhpbnRBcnJvdywgJ3Zpc2libGUnICk7XHJcbiAgICBzaG93SGludEFycm93c1Byb3BlcnR5LmxpbmtBdHRyaWJ1dGUoIG1heEhpbnRBcnJvdywgJ3Zpc2libGUnICk7XHJcblxyXG4gICAgY29uc3QgaGFuZGxlU2hhcGUgPSBQcm9wb3J0aW9uYWxQYXJ0aXRpb25MaW5lTm9kZS5IQU5ETEVfQVJST1dfU0hBUEVTLmdldCggb3JpZW50YXRpb24gKTtcclxuICAgIGNvbnN0IGhhbmRsZU1vdXNlQm91bmRzID0gaGFuZGxlU2hhcGUuYm91bmRzO1xyXG4gICAgY29uc3QgaGFuZGxlVG91Y2hCb3VuZHMgPSBoYW5kbGVNb3VzZUJvdW5kcy5kaWxhdGVkKCA1ICk7XHJcblxyXG4gICAgLy8gV2UgbmVlZCB0byBjdXQgb2ZmIHRoZSBjb3JuZXJzIHRoYXQgd291bGQgb3ZlcmxhcCBiZXR3ZWVuIHRoZSB0d28gcGFydGl0aW9uIGxpbmUgaGFuZGxlcywgc28gd2UgY3JlYXRlIGEgY2xpcHBpbmdcclxuICAgIC8vIGFyZWEgYW5kIGludGVyc2VjdCB3aXRoIHRoYXQuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvYXJlYS1tb2RlbC1jb21tb24vaXNzdWVzLzgwLlxyXG4gICAgbGV0IGhhbmRsZUNsaXBTaGFwZSA9IG5ldyBTaGFwZSgpLm1vdmVUb1BvaW50KCBoYW5kbGVUb3VjaEJvdW5kcy5sZWZ0VG9wIClcclxuICAgICAgLmxpbmVUb1BvaW50KCBoYW5kbGVUb3VjaEJvdW5kcy5sZWZ0Qm90dG9tIClcclxuICAgICAgLmxpbmVUb1BvaW50KCBoYW5kbGVUb3VjaEJvdW5kcy5yaWdodEJvdHRvbSApXHJcbiAgICAgIC5saW5lVG9Qb2ludCggaGFuZGxlVG91Y2hCb3VuZHMucmlnaHRUb3AuYmxlbmQoIGhhbmRsZVRvdWNoQm91bmRzLnJpZ2h0Qm90dG9tLCAwLjQgKSApXHJcbiAgICAgIC5saW5lVG9Qb2ludCggaGFuZGxlVG91Y2hCb3VuZHMucmlnaHRUb3AuYmxlbmQoIGhhbmRsZVRvdWNoQm91bmRzLmxlZnRUb3AsIDAuNCApIClcclxuICAgICAgLmNsb3NlKCk7XHJcbiAgICBpZiAoIG9yaWVudGF0aW9uID09PSBPcmllbnRhdGlvbi5WRVJUSUNBTCApIHtcclxuICAgICAgaGFuZGxlQ2xpcFNoYXBlID0gaGFuZGxlQ2xpcFNoYXBlLnRyYW5zZm9ybWVkKCBNYXRyaXgzLnJvdGF0aW9uMiggTWF0aC5QSSApICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaGFuZGxlID0gbmV3IFBhdGgoIGhhbmRsZVNoYXBlLCB7XHJcbiAgICAgIG1vdXNlQXJlYTogU2hhcGUuYm91bmRzKCBoYW5kbGVNb3VzZUJvdW5kcyApLnNoYXBlSW50ZXJzZWN0aW9uKCBoYW5kbGVDbGlwU2hhcGUgKSxcclxuICAgICAgdG91Y2hBcmVhOiBTaGFwZS5ib3VuZHMoIGhhbmRsZVRvdWNoQm91bmRzICkuc2hhcGVJbnRlcnNlY3Rpb24oIGhhbmRsZUNsaXBTaGFwZSApLFxyXG4gICAgICBmaWxsOiBhcmVhRGlzcGxheS5jb2xvclByb3BlcnRpZXMuZ2V0KCBvcmllbnRhdGlvbiApLFxyXG4gICAgICBzdHJva2U6IEFyZWFNb2RlbENvbW1vbkNvbG9ycy5wYXJ0aXRpb25MaW5lQm9yZGVyUHJvcGVydHksXHJcbiAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxyXG4gICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgIG1pbkhpbnRBcnJvdyxcclxuICAgICAgICBtYXhIaW50QXJyb3dcclxuICAgICAgXVxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IGxpbmUgPSBuZXcgTGluZSgge1xyXG4gICAgICBzdHJva2U6IEFyZWFNb2RlbENvbW1vbkNvbG9ycy5wYXJ0aXRpb25MaW5lU3Ryb2tlUHJvcGVydHksXHJcbiAgICAgIGxpbmVXaWR0aDogMixcclxuICAgICAgY3Vyc29yOiAncG9pbnRlcidcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLmNoaWxkcmVuID0gW1xyXG4gICAgICBsaW5lLFxyXG4gICAgICBoYW5kbGVcclxuICAgIF07XHJcblxyXG5cclxuICAgIHRoaXMubGFiZWxUYWdOYW1lID0gJ2xhYmVsJztcclxuICAgIHRoaXMubGFiZWxDb250ZW50ID0gb3JpZW50YXRpb24gPT09IE9yaWVudGF0aW9uLkhPUklaT05UQUwgPyB2ZXJ0aWNhbFBhcnRpdGlvbkhhbmRsZVN0cmluZyA6IGhvcml6b250YWxQYXJ0aXRpb25IYW5kbGVTdHJpbmc7XHJcbiAgICB0aGlzLmRlc2NyaXB0aW9uQ29udGVudCA9IG9yaWVudGF0aW9uID09PSBPcmllbnRhdGlvbi5IT1JJWk9OVEFMID8gdmVydGljYWxQYXJ0aXRpb25IYW5kbGVEZXNjcmlwdGlvblN0cmluZyA6IGhvcml6b250YWxQYXJ0aXRpb25IYW5kbGVEZXNjcmlwdGlvblN0cmluZztcclxuXHJcbiAgICB0aGlzLmZvY3VzSGlnaGxpZ2h0ID0gbmV3IEZvY3VzSGlnaGxpZ2h0UGF0aCggaGFuZGxlU2hhcGUuZ2V0T2Zmc2V0U2hhcGUoIDUgKSApO1xyXG4gICAgaGFuZGxlLmFkZENoaWxkKCB0aGlzLmZvY3VzSGlnaGxpZ2h0ICk7XHJcbiAgICB0aGlzLmZvY3VzSGlnaGxpZ2h0TGF5ZXJhYmxlID0gdHJ1ZTtcclxuXHJcbiAgICAvLyBNYWluIGNvb3JkaW5hdGUgKHdoZW4gZHJhZ2dpbmcpXHJcbiAgICBNdWx0aWxpbmsubXVsdGlsaW5rKCBbIHBhcnRpdGlvblNwbGl0UHJvcGVydHksIG1vZGVsVmlld1RyYW5zZm9ybVByb3BlcnR5IF0sICggc3BsaXQsIG1vZGVsVmlld1RyYW5zZm9ybSApID0+IHtcclxuICAgICAgdGhpc1sgb3JpZW50YXRpb24uY29vcmRpbmF0ZSBdID0gb3JpZW50YXRpb24ubW9kZWxUb1ZpZXcoIG1vZGVsVmlld1RyYW5zZm9ybSwgc3BsaXQgKTtcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBPcHBvc2l0ZSBjb29yZGluYXRlIChob3cgd2lkZSB0aGUgYXJlYSBpcyBpbiB0aGUgb3RoZXIgZGlyZWN0aW9uKVxyXG4gICAgTXVsdGlsaW5rLm11bHRpbGluayhcclxuICAgICAgWyBvcHBvc2l0ZUFjdGl2ZVRvdGFsUHJvcGVydHksIG1vZGVsVmlld1RyYW5zZm9ybVByb3BlcnR5IF0sXHJcbiAgICAgICggb3Bwb3NpdGVUb3RhbCwgbW9kZWxWaWV3VHJhbnNmb3JtICkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG9mZnNldFZhbHVlID0gb3JpZW50YXRpb24ub3Bwb3NpdGUubW9kZWxUb1ZpZXcoIG1vZGVsVmlld1RyYW5zZm9ybSwgb3Bwb3NpdGVUb3RhbCApICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFyZWFNb2RlbENvbW1vbkNvbnN0YW50cy5QQVJUSVRJT05fSEFORExFX09GRlNFVDtcclxuICAgICAgICBoYW5kbGVbIG9yaWVudGF0aW9uLm9wcG9zaXRlLmNvb3JkaW5hdGUgXSA9IG9mZnNldFZhbHVlO1xyXG4gICAgICAgIGxpbmVbIGAke29yaWVudGF0aW9uLm9wcG9zaXRlLmNvb3JkaW5hdGV9MmAgXSA9IG9mZnNldFZhbHVlO1xyXG4gICAgICAgIGxpbmUubW91c2VBcmVhID0gbGluZS5sb2NhbEJvdW5kcy5kaWxhdGVkKCA0ICk7XHJcbiAgICAgICAgbGluZS50b3VjaEFyZWEgPSBsaW5lLmxvY2FsQm91bmRzLmRpbGF0ZWQoIDggKTtcclxuICAgICAgfSApO1xyXG5cclxuICAgIC8vIFZpc2liaWxpdHlcclxuICAgIGFyZWFEaXNwbGF5LnBhcnRpdGlvblNwbGl0VmlzaWJsZVByb3BlcnRpZXMuZ2V0KCBvcmllbnRhdGlvbiApLmxpbmtBdHRyaWJ1dGUoIHRoaXMsICd2aXNpYmxlJyApO1xyXG5cclxuICAgIGFyZWFEaXNwbGF5LnBhcnRpdGlvblNuYXBTaXplUHJvcGVydHkubGluayggc25hcFNpemUgPT4ge1xyXG4gICAgICB0aGlzLnNldEtleWJvYXJkU3RlcCggc25hcFNpemUgKTtcclxuICAgIH0gKTtcclxuXHJcbiAgICBsZXQgZHJhZ0hhbmRsZXI7XHJcbiAgICBtb2RlbFZpZXdUcmFuc2Zvcm1Qcm9wZXJ0eS5saW5rKCBtb2RlbFZpZXdUcmFuc2Zvcm0gPT4ge1xyXG4gICAgICBpZiAoIGRyYWdIYW5kbGVyICkge1xyXG4gICAgICAgIHRoaXMucmVtb3ZlSW5wdXRMaXN0ZW5lciggZHJhZ0hhbmRsZXIgKTtcclxuICAgICAgICBkcmFnSGFuZGxlci5kaXNwb3NlKCk7XHJcbiAgICAgIH1cclxuICAgICAgZHJhZ0hhbmRsZXIgPSBuZXcgRHJhZ0xpc3RlbmVyKCB7XHJcbiAgICAgICAgdHJhbnNmb3JtOiBtb2RlbFZpZXdUcmFuc2Zvcm0sXHJcbiAgICAgICAgZHJhZzogKCBldmVudCwgbGlzdGVuZXIgKSA9PiB7XHJcbiAgICAgICAgICBsZXQgdmFsdWUgPSBsaXN0ZW5lci5tb2RlbFBvaW50WyBvcmllbnRhdGlvbi5jb29yZGluYXRlIF07XHJcblxyXG4gICAgICAgICAgdmFsdWUgPSBVdGlscy5yb3VuZFN5bW1ldHJpYyggdmFsdWUgLyBhcmVhRGlzcGxheS5wYXJ0aXRpb25TbmFwU2l6ZVByb3BlcnR5LnZhbHVlICkgKlxyXG4gICAgICAgICAgICAgICAgICBhcmVhRGlzcGxheS5wYXJ0aXRpb25TbmFwU2l6ZVByb3BlcnR5LnZhbHVlO1xyXG4gICAgICAgICAgdmFsdWUgPSBVdGlscy5jbGFtcCggdmFsdWUsIDAsIGFjdGl2ZVRvdGFsUHJvcGVydHkudmFsdWUgKTtcclxuXHJcbiAgICAgICAgICAvLyBIaW50IGFycm93cyBkaXNhcHBlYXIgd2hlbiB0aGUgYWN0dWFsIHNwbGl0IGNoYW5nZXMgZHVyaW5nIGEgZHJhZywgc2VlXHJcbiAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvYXJlYS1tb2RlbC1jb21tb24vaXNzdWVzLzY4XHJcbiAgICAgICAgICBjb25zdCBjdXJyZW50U3BsaXRWYWx1ZSA9IHBhcnRpdGlvblNwbGl0UHJvcGVydHkudmFsdWU7XHJcbiAgICAgICAgICBpZiAoIHZhbHVlICE9PSBjdXJyZW50U3BsaXRWYWx1ZSAmJiB2YWx1ZSAhPT0gMCApIHtcclxuICAgICAgICAgICAgc2hvd0hpbnRBcnJvd3NQcm9wZXJ0eS52YWx1ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHBhcnRpdGlvblNwbGl0UHJvcGVydHkudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBlbmQ6ICgpID0+IHtcclxuICAgICAgICAgIGlmICggcGFydGl0aW9uU3BsaXRQcm9wZXJ0eS52YWx1ZSA9PT0gYWN0aXZlVG90YWxQcm9wZXJ0eS52YWx1ZSApIHtcclxuICAgICAgICAgICAgcGFydGl0aW9uU3BsaXRQcm9wZXJ0eS52YWx1ZSA9IDA7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9ICk7XHJcbiAgICAgIGRyYWdIYW5kbGVyLmlzVXNlckNvbnRyb2xsZWRQcm9wZXJ0eS5saW5rKCBjb250cm9sbGVkID0+IHtcclxuICAgICAgICBhcmVhRGlzcGxheS5wYXJ0aXRpb25TcGxpdFVzZXJDb250cm9sbGVkUHJvcGVydGllcy5nZXQoIG9yaWVudGF0aW9uICkudmFsdWUgPSBjb250cm9sbGVkO1xyXG4gICAgICB9ICk7XHJcbiAgICAgIHRoaXMuYWRkSW5wdXRMaXN0ZW5lciggZHJhZ0hhbmRsZXIgKTtcclxuICAgIH0gKTtcclxuICB9XHJcbn1cclxuXHJcbmFyZWFNb2RlbENvbW1vbi5yZWdpc3RlciggJ1Byb3BvcnRpb25hbFBhcnRpdGlvbkxpbmVOb2RlJywgUHJvcG9ydGlvbmFsUGFydGl0aW9uTGluZU5vZGUgKTtcclxuXHJcbi8vIEhhbmRsZSBhcnJvd3NcclxuY29uc3QgYXJyb3dIYWxmTGVuZ3RoID0gMTA7XHJcbmNvbnN0IGFycm93SGFsZldpZHRoID0gMTA7XHJcbmNvbnN0IHZlcnRpY2FsQXJyb3dTaGFwZSA9IG5ldyBTaGFwZSgpXHJcbiAgLm1vdmVUbyggLWFycm93SGFsZkxlbmd0aCwgMCApXHJcbiAgLmxpbmVUbyggYXJyb3dIYWxmTGVuZ3RoLCBhcnJvd0hhbGZXaWR0aCApXHJcbiAgLmxpbmVUbyggYXJyb3dIYWxmTGVuZ3RoLCAtYXJyb3dIYWxmV2lkdGggKVxyXG4gIC5jbG9zZSgpO1xyXG5jb25zdCBob3Jpem9udGFsQXJyb3dTaGFwZSA9IHZlcnRpY2FsQXJyb3dTaGFwZS50cmFuc2Zvcm1lZCggTWF0cml4My5yb3RhdGlvbjIoIE1hdGguUEkgLyAyICkgKTtcclxuXHJcblByb3BvcnRpb25hbFBhcnRpdGlvbkxpbmVOb2RlLkhBTkRMRV9BUlJPV19TSEFQRVMgPSBuZXcgT3JpZW50YXRpb25QYWlyKCBob3Jpem9udGFsQXJyb3dTaGFwZSwgdmVydGljYWxBcnJvd1NoYXBlICk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQcm9wb3J0aW9uYWxQYXJ0aXRpb25MaW5lTm9kZTsiXSwibWFw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