// Copyright 2018-2022, University of Colorado Boulder

/**
 * Displays numbers for each square of a unit size.
 *
 * NOTE: This type is designed to be persistent, and will not need to release references to avoid memory leaks.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import Vector2 from '../../../../dot/js/Vector2.js';
import { Node, Text } from '../../../../scenery/js/imports.js';
import areaModelCommon from '../../areaModelCommon.js';
import AreaModelCommonConstants from '../../common/AreaModelCommonConstants.js';
import AreaModelCommonColors from '../../common/view/AreaModelCommonColors.js';

// constants
const scratchVector = new Vector2(0, 0); // Created so we can minimize object creation and garbage collection

class CountingAreaNode extends Node {
  /**
   * @param {OrientationPair.<Property.<number>>} activeTotalProperties
   * @param {Property.<ModelViewTransform2>} modelViewTransformProperty
   * @param {Property.<boolean>} countingVisibleProperty
   */
  constructor(activeTotalProperties, modelViewTransformProperty, countingVisibleProperty) {
    super();

    // @private {OrientationPair.<Property.<number>>}
    this.activeTotalProperties = activeTotalProperties;

    // @private {Property.<ModelViewTransform2>}
    this.modelViewTransformProperty = modelViewTransformProperty;

    // @private {Property.<boolean>}
    this.countingVisibleProperty = countingVisibleProperty;

    // @private {Array.<Text>} - We reuse these to avoid GC/performance issues
    this.textNodes = [];

    // @private {boolean} - Whether we should be redrawn
    this.dirty = true;

    // Things we depend on
    const invalidate = () => {
      this.dirty = true;
    };
    countingVisibleProperty.link(invalidate);
    activeTotalProperties.horizontal.link(invalidate);
    activeTotalProperties.vertical.link(invalidate);
    modelViewTransformProperty.link(invalidate);
    countingVisibleProperty.linkAttribute(this, 'visible');
  }

  /**
   * Creates a reusable text node with a given number.
   * @private
   *
   * @param {number} number
   * @returns {Text}
   */
  createTextNode(number) {
    const text = new Text(number, {
      font: AreaModelCommonConstants.COUNTING_FONT,
      fill: AreaModelCommonColors.countingLabelProperty
    });
    this.textNodes.push(text);
    this.addChild(text);
    return text;
  }

  /**
   * Returns the reusable text node with a given number.
   * @private
   *
   * @param {number} number
   * @returns {Text}
   */
  getTextNode(number) {
    let text = this.textNodes[number - 1];
    if (!text) {
      text = this.createTextNode(number);
    }
    return text;
  }

  /**
   * Updates the view for tiled areas (since it is somewhat expensive to re-draw, and we don't want it being done
   * multiple times per frame.
   * @private
   */
  update() {
    const modelViewTransform = this.modelViewTransformProperty.value;

    // Ignore updates if we are not dirty
    if (!this.dirty) {
      return;
    }
    this.dirty = false;
    if (!this.countingVisibleProperty.value) {
      return;
    }

    // Coordinate mapping into the view
    const modelToViewX = modelViewTransform.modelToViewX.bind(modelViewTransform);
    const modelToViewY = modelViewTransform.modelToViewY.bind(modelViewTransform);
    const width = this.activeTotalProperties.horizontal.value;
    const height = this.activeTotalProperties.vertical.value;
    let cellNumber = 1;
    for (let row = 0; row < height; row++) {
      const rowCenter = modelToViewY(row + 0.5);
      for (let col = 0; col < width; col++) {
        const colCenter = modelToViewX(col + 0.5);
        const text = this.getTextNode(cellNumber);
        text.center = scratchVector.setXY(colCenter, rowCenter);
        text.visible = true;
        cellNumber++;
      }
    }

    // Hide the rest of the text nodes (that should NOT show up)
    for (; cellNumber - 1 < this.textNodes.length; cellNumber++) {
      this.textNodes[cellNumber - 1].visible = false;
    }
  }
}
areaModelCommon.register('CountingAreaNode', CountingAreaNode);
export default CountingAreaNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWZWN0b3IyIiwiTm9kZSIsIlRleHQiLCJhcmVhTW9kZWxDb21tb24iLCJBcmVhTW9kZWxDb21tb25Db25zdGFudHMiLCJBcmVhTW9kZWxDb21tb25Db2xvcnMiLCJzY3JhdGNoVmVjdG9yIiwiQ291bnRpbmdBcmVhTm9kZSIsImNvbnN0cnVjdG9yIiwiYWN0aXZlVG90YWxQcm9wZXJ0aWVzIiwibW9kZWxWaWV3VHJhbnNmb3JtUHJvcGVydHkiLCJjb3VudGluZ1Zpc2libGVQcm9wZXJ0eSIsInRleHROb2RlcyIsImRpcnR5IiwiaW52YWxpZGF0ZSIsImxpbmsiLCJob3Jpem9udGFsIiwidmVydGljYWwiLCJsaW5rQXR0cmlidXRlIiwiY3JlYXRlVGV4dE5vZGUiLCJudW1iZXIiLCJ0ZXh0IiwiZm9udCIsIkNPVU5USU5HX0ZPTlQiLCJmaWxsIiwiY291bnRpbmdMYWJlbFByb3BlcnR5IiwicHVzaCIsImFkZENoaWxkIiwiZ2V0VGV4dE5vZGUiLCJ1cGRhdGUiLCJtb2RlbFZpZXdUcmFuc2Zvcm0iLCJ2YWx1ZSIsIm1vZGVsVG9WaWV3WCIsImJpbmQiLCJtb2RlbFRvVmlld1kiLCJ3aWR0aCIsImhlaWdodCIsImNlbGxOdW1iZXIiLCJyb3ciLCJyb3dDZW50ZXIiLCJjb2wiLCJjb2xDZW50ZXIiLCJjZW50ZXIiLCJzZXRYWSIsInZpc2libGUiLCJsZW5ndGgiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkNvdW50aW5nQXJlYU5vZGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTgtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogRGlzcGxheXMgbnVtYmVycyBmb3IgZWFjaCBzcXVhcmUgb2YgYSB1bml0IHNpemUuXHJcbiAqXHJcbiAqIE5PVEU6IFRoaXMgdHlwZSBpcyBkZXNpZ25lZCB0byBiZSBwZXJzaXN0ZW50LCBhbmQgd2lsbCBub3QgbmVlZCB0byByZWxlYXNlIHJlZmVyZW5jZXMgdG8gYXZvaWQgbWVtb3J5IGxlYWtzLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XHJcbiAqL1xyXG5cclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgeyBOb2RlLCBUZXh0IH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IGFyZWFNb2RlbENvbW1vbiBmcm9tICcuLi8uLi9hcmVhTW9kZWxDb21tb24uanMnO1xyXG5pbXBvcnQgQXJlYU1vZGVsQ29tbW9uQ29uc3RhbnRzIGZyb20gJy4uLy4uL2NvbW1vbi9BcmVhTW9kZWxDb21tb25Db25zdGFudHMuanMnO1xyXG5pbXBvcnQgQXJlYU1vZGVsQ29tbW9uQ29sb3JzIGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L0FyZWFNb2RlbENvbW1vbkNvbG9ycy5qcyc7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3Qgc2NyYXRjaFZlY3RvciA9IG5ldyBWZWN0b3IyKCAwLCAwICk7IC8vIENyZWF0ZWQgc28gd2UgY2FuIG1pbmltaXplIG9iamVjdCBjcmVhdGlvbiBhbmQgZ2FyYmFnZSBjb2xsZWN0aW9uXHJcblxyXG5jbGFzcyBDb3VudGluZ0FyZWFOb2RlIGV4dGVuZHMgTm9kZSB7XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtPcmllbnRhdGlvblBhaXIuPFByb3BlcnR5LjxudW1iZXI+Pn0gYWN0aXZlVG90YWxQcm9wZXJ0aWVzXHJcbiAgICogQHBhcmFtIHtQcm9wZXJ0eS48TW9kZWxWaWV3VHJhbnNmb3JtMj59IG1vZGVsVmlld1RyYW5zZm9ybVByb3BlcnR5XHJcbiAgICogQHBhcmFtIHtQcm9wZXJ0eS48Ym9vbGVhbj59IGNvdW50aW5nVmlzaWJsZVByb3BlcnR5XHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIGFjdGl2ZVRvdGFsUHJvcGVydGllcywgbW9kZWxWaWV3VHJhbnNmb3JtUHJvcGVydHksIGNvdW50aW5nVmlzaWJsZVByb3BlcnR5ICkge1xyXG5cclxuICAgIHN1cGVyKCk7XHJcblxyXG4gICAgLy8gQHByaXZhdGUge09yaWVudGF0aW9uUGFpci48UHJvcGVydHkuPG51bWJlcj4+fVxyXG4gICAgdGhpcy5hY3RpdmVUb3RhbFByb3BlcnRpZXMgPSBhY3RpdmVUb3RhbFByb3BlcnRpZXM7XHJcblxyXG4gICAgLy8gQHByaXZhdGUge1Byb3BlcnR5LjxNb2RlbFZpZXdUcmFuc2Zvcm0yPn1cclxuICAgIHRoaXMubW9kZWxWaWV3VHJhbnNmb3JtUHJvcGVydHkgPSBtb2RlbFZpZXdUcmFuc2Zvcm1Qcm9wZXJ0eTtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZSB7UHJvcGVydHkuPGJvb2xlYW4+fVxyXG4gICAgdGhpcy5jb3VudGluZ1Zpc2libGVQcm9wZXJ0eSA9IGNvdW50aW5nVmlzaWJsZVByb3BlcnR5O1xyXG5cclxuICAgIC8vIEBwcml2YXRlIHtBcnJheS48VGV4dD59IC0gV2UgcmV1c2UgdGhlc2UgdG8gYXZvaWQgR0MvcGVyZm9ybWFuY2UgaXNzdWVzXHJcbiAgICB0aGlzLnRleHROb2RlcyA9IFtdO1xyXG5cclxuICAgIC8vIEBwcml2YXRlIHtib29sZWFufSAtIFdoZXRoZXIgd2Ugc2hvdWxkIGJlIHJlZHJhd25cclxuICAgIHRoaXMuZGlydHkgPSB0cnVlO1xyXG5cclxuICAgIC8vIFRoaW5ncyB3ZSBkZXBlbmQgb25cclxuICAgIGNvbnN0IGludmFsaWRhdGUgPSAoKSA9PiB7XHJcbiAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb3VudGluZ1Zpc2libGVQcm9wZXJ0eS5saW5rKCBpbnZhbGlkYXRlICk7XHJcbiAgICBhY3RpdmVUb3RhbFByb3BlcnRpZXMuaG9yaXpvbnRhbC5saW5rKCBpbnZhbGlkYXRlICk7XHJcbiAgICBhY3RpdmVUb3RhbFByb3BlcnRpZXMudmVydGljYWwubGluayggaW52YWxpZGF0ZSApO1xyXG4gICAgbW9kZWxWaWV3VHJhbnNmb3JtUHJvcGVydHkubGluayggaW52YWxpZGF0ZSApO1xyXG5cclxuICAgIGNvdW50aW5nVmlzaWJsZVByb3BlcnR5LmxpbmtBdHRyaWJ1dGUoIHRoaXMsICd2aXNpYmxlJyApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyBhIHJldXNhYmxlIHRleHQgbm9kZSB3aXRoIGEgZ2l2ZW4gbnVtYmVyLlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge251bWJlcn0gbnVtYmVyXHJcbiAgICogQHJldHVybnMge1RleHR9XHJcbiAgICovXHJcbiAgY3JlYXRlVGV4dE5vZGUoIG51bWJlciApIHtcclxuICAgIGNvbnN0IHRleHQgPSBuZXcgVGV4dCggbnVtYmVyLCB7XHJcbiAgICAgIGZvbnQ6IEFyZWFNb2RlbENvbW1vbkNvbnN0YW50cy5DT1VOVElOR19GT05ULFxyXG4gICAgICBmaWxsOiBBcmVhTW9kZWxDb21tb25Db2xvcnMuY291bnRpbmdMYWJlbFByb3BlcnR5XHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLnRleHROb2Rlcy5wdXNoKCB0ZXh0ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCB0ZXh0ICk7XHJcbiAgICByZXR1cm4gdGV4dDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgdGhlIHJldXNhYmxlIHRleHQgbm9kZSB3aXRoIGEgZ2l2ZW4gbnVtYmVyLlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge251bWJlcn0gbnVtYmVyXHJcbiAgICogQHJldHVybnMge1RleHR9XHJcbiAgICovXHJcbiAgZ2V0VGV4dE5vZGUoIG51bWJlciApIHtcclxuICAgIGxldCB0ZXh0ID0gdGhpcy50ZXh0Tm9kZXNbIG51bWJlciAtIDEgXTtcclxuICAgIGlmICggIXRleHQgKSB7XHJcbiAgICAgIHRleHQgPSB0aGlzLmNyZWF0ZVRleHROb2RlKCBudW1iZXIgKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0ZXh0O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlcyB0aGUgdmlldyBmb3IgdGlsZWQgYXJlYXMgKHNpbmNlIGl0IGlzIHNvbWV3aGF0IGV4cGVuc2l2ZSB0byByZS1kcmF3LCBhbmQgd2UgZG9uJ3Qgd2FudCBpdCBiZWluZyBkb25lXHJcbiAgICogbXVsdGlwbGUgdGltZXMgcGVyIGZyYW1lLlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgdXBkYXRlKCkge1xyXG4gICAgY29uc3QgbW9kZWxWaWV3VHJhbnNmb3JtID0gdGhpcy5tb2RlbFZpZXdUcmFuc2Zvcm1Qcm9wZXJ0eS52YWx1ZTtcclxuXHJcbiAgICAvLyBJZ25vcmUgdXBkYXRlcyBpZiB3ZSBhcmUgbm90IGRpcnR5XHJcbiAgICBpZiAoICF0aGlzLmRpcnR5ICkgeyByZXR1cm47IH1cclxuICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcclxuXHJcbiAgICBpZiAoICF0aGlzLmNvdW50aW5nVmlzaWJsZVByb3BlcnR5LnZhbHVlICkgeyByZXR1cm47IH1cclxuXHJcbiAgICAvLyBDb29yZGluYXRlIG1hcHBpbmcgaW50byB0aGUgdmlld1xyXG4gICAgY29uc3QgbW9kZWxUb1ZpZXdYID0gbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WC5iaW5kKCBtb2RlbFZpZXdUcmFuc2Zvcm0gKTtcclxuICAgIGNvbnN0IG1vZGVsVG9WaWV3WSA9IG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1kuYmluZCggbW9kZWxWaWV3VHJhbnNmb3JtICk7XHJcblxyXG4gICAgY29uc3Qgd2lkdGggPSB0aGlzLmFjdGl2ZVRvdGFsUHJvcGVydGllcy5ob3Jpem9udGFsLnZhbHVlO1xyXG4gICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5hY3RpdmVUb3RhbFByb3BlcnRpZXMudmVydGljYWwudmFsdWU7XHJcblxyXG4gICAgbGV0IGNlbGxOdW1iZXIgPSAxO1xyXG4gICAgZm9yICggbGV0IHJvdyA9IDA7IHJvdyA8IGhlaWdodDsgcm93KysgKSB7XHJcbiAgICAgIGNvbnN0IHJvd0NlbnRlciA9IG1vZGVsVG9WaWV3WSggcm93ICsgMC41ICk7XHJcblxyXG4gICAgICBmb3IgKCBsZXQgY29sID0gMDsgY29sIDwgd2lkdGg7IGNvbCsrICkge1xyXG4gICAgICAgIGNvbnN0IGNvbENlbnRlciA9IG1vZGVsVG9WaWV3WCggY29sICsgMC41ICk7XHJcblxyXG4gICAgICAgIGNvbnN0IHRleHQgPSB0aGlzLmdldFRleHROb2RlKCBjZWxsTnVtYmVyICk7XHJcbiAgICAgICAgdGV4dC5jZW50ZXIgPSBzY3JhdGNoVmVjdG9yLnNldFhZKCBjb2xDZW50ZXIsIHJvd0NlbnRlciApO1xyXG4gICAgICAgIHRleHQudmlzaWJsZSA9IHRydWU7XHJcblxyXG4gICAgICAgIGNlbGxOdW1iZXIrKztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEhpZGUgdGhlIHJlc3Qgb2YgdGhlIHRleHQgbm9kZXMgKHRoYXQgc2hvdWxkIE5PVCBzaG93IHVwKVxyXG4gICAgZm9yICggOyBjZWxsTnVtYmVyIC0gMSA8IHRoaXMudGV4dE5vZGVzLmxlbmd0aDsgY2VsbE51bWJlcisrICkge1xyXG4gICAgICB0aGlzLnRleHROb2Rlc1sgY2VsbE51bWJlciAtIDEgXS52aXNpYmxlID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5hcmVhTW9kZWxDb21tb24ucmVnaXN0ZXIoICdDb3VudGluZ0FyZWFOb2RlJywgQ291bnRpbmdBcmVhTm9kZSApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ291bnRpbmdBcmVhTm9kZTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLE9BQU8sTUFBTSwrQkFBK0I7QUFDbkQsU0FBU0MsSUFBSSxFQUFFQyxJQUFJLFFBQVEsbUNBQW1DO0FBQzlELE9BQU9DLGVBQWUsTUFBTSwwQkFBMEI7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