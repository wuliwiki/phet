// Copyright 2017-2022, University of Colorado Boulder

/**
 * Displays the main factors (horizontal sum and vertical sum)
 *
 * NOTE: This type is designed to be persistent, and will not need to release references to avoid memory leaks.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import validate from '../../../../axon/js/validate.js';
import Bounds2 from '../../../../dot/js/Bounds2.js';
import Orientation from '../../../../phet-core/js/Orientation.js';
import MathSymbols from '../../../../scenery-phet/js/MathSymbols.js';
import { AlignBox, HBox, Node, Rectangle, RichText, Text } from '../../../../scenery/js/imports.js';
import areaModelCommon from '../../areaModelCommon.js';
import AreaModelCommonConstants from '../../common/AreaModelCommonConstants.js';
import AreaModelCommonColors from '../../common/view/AreaModelCommonColors.js';

// constants
const BOX_SIZE = 30;
const PAREN_BOUNDS = new Text(')(', {
  font: AreaModelCommonConstants.FACTORS_PAREN_FONT,
  boundsMethod: 'accurate'
}).bounds;
class GenericFactorsNode extends AlignBox {
  /**
   * @param {OrientationPair.<Property.<TermList|null>>} displayProperties - The term lists to be displayed
   * @param {Property.<boolean>} allowExponentsProperty - Whether exponents (powers of x) are allowed
   */
  constructor(displayProperties, allowExponentsProperty) {
    const readouts = displayProperties.map((displayProperty, orientation) => GenericFactorsNode.createOrientationReadout(orientation, displayProperty));
    const leftParenText = new Text('(', {
      font: AreaModelCommonConstants.FACTORS_PAREN_FONT
    });
    const middleParenText = new Text(')(', {
      font: AreaModelCommonConstants.FACTORS_PAREN_FONT
    });
    const rightParenText = new Text(')', {
      font: AreaModelCommonConstants.FACTORS_PAREN_FONT
    });
    const xText = new Text(MathSymbols.TIMES, {
      font: AreaModelCommonConstants.FACTORS_TERM_FONT
    });

    // Have the X take up at least the same vertical bounds as the parentheses
    xText.localBounds = xText.localBounds.union(new Bounds2(0, middleParenText.localBounds.minY, 0, middleParenText.localBounds.maxY));

    // Center the box vertically, so that when maxWidth kicks in, we stay vertically centered in our area of the box
    const box = new HBox({
      spacing: 10,
      align: 'origin'
    });
    allowExponentsProperty.link(allowExponents => {
      box.children = allowExponents ? [leftParenText, readouts.vertical, middleParenText, readouts.horizontal, rightParenText] : [readouts.vertical, xText, readouts.horizontal];
    });
    const spacer = new Node();
    super(new Node({
      children: [box, spacer],
      maxWidth: AreaModelCommonConstants.PANEL_INTERIOR_MAX
    }));

    // Set our alignBounds to the maximum size we can be, so that we remain centered nicely in the accordion box.
    allowExponentsProperty.link(allowExponents => {
      const maxBounds = Bounds2.NOTHING.copy();
      maxBounds.includeBounds(new RichText(allowExponents ? 'x<sup>2</sup>' : 'x', {
        font: AreaModelCommonConstants.FACTORS_TERM_FONT
      }).bounds);
      maxBounds.includeBounds(PAREN_BOUNDS);
      this.alignBounds = new Bounds2(0, 0, AreaModelCommonConstants.PANEL_INTERIOR_MAX, maxBounds.height);
      spacer.localBounds = new Bounds2(0, maxBounds.minY, 0, maxBounds.maxY);
    });
  }

  /**
   * Creates a readout for the total sum for a particular orientation.
   * @private
   *
   * @param {Orientation} orientation
   * @param {Property.<TermList|null>} displayProperty
   * @returns {Node}
   */
  static createOrientationReadout(orientation, displayProperty) {
    validate(orientation, {
      validValues: Orientation.enumeration.values
    });
    const colorProperty = AreaModelCommonColors.genericColorProperties.get(orientation);
    const richText = new RichText('', {
      font: AreaModelCommonConstants.FACTORS_TERM_FONT,
      fill: colorProperty
    });
    const box = new Rectangle(0, 0, BOX_SIZE, BOX_SIZE, {
      stroke: colorProperty,
      centerY: PAREN_BOUNDS.centerY // So that it is perfectly vertically aligned
    });

    const node = new Node();
    displayProperty.link(termList => {
      if (termList === null) {
        node.children = [box];
      } else {
        richText.string = termList.toRichString();
        node.children = [richText];
      }
    });
    return node;
  }
}
areaModelCommon.register('GenericFactorsNode', GenericFactorsNode);
export default GenericFactorsNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ2YWxpZGF0ZSIsIkJvdW5kczIiLCJPcmllbnRhdGlvbiIsIk1hdGhTeW1ib2xzIiwiQWxpZ25Cb3giLCJIQm94IiwiTm9kZSIsIlJlY3RhbmdsZSIsIlJpY2hUZXh0IiwiVGV4dCIsImFyZWFNb2RlbENvbW1vbiIsIkFyZWFNb2RlbENvbW1vbkNvbnN0YW50cyIsIkFyZWFNb2RlbENvbW1vbkNvbG9ycyIsIkJPWF9TSVpFIiwiUEFSRU5fQk9VTkRTIiwiZm9udCIsIkZBQ1RPUlNfUEFSRU5fRk9OVCIsImJvdW5kc01ldGhvZCIsImJvdW5kcyIsIkdlbmVyaWNGYWN0b3JzTm9kZSIsImNvbnN0cnVjdG9yIiwiZGlzcGxheVByb3BlcnRpZXMiLCJhbGxvd0V4cG9uZW50c1Byb3BlcnR5IiwicmVhZG91dHMiLCJtYXAiLCJkaXNwbGF5UHJvcGVydHkiLCJvcmllbnRhdGlvbiIsImNyZWF0ZU9yaWVudGF0aW9uUmVhZG91dCIsImxlZnRQYXJlblRleHQiLCJtaWRkbGVQYXJlblRleHQiLCJyaWdodFBhcmVuVGV4dCIsInhUZXh0IiwiVElNRVMiLCJGQUNUT1JTX1RFUk1fRk9OVCIsImxvY2FsQm91bmRzIiwidW5pb24iLCJtaW5ZIiwibWF4WSIsImJveCIsInNwYWNpbmciLCJhbGlnbiIsImxpbmsiLCJhbGxvd0V4cG9uZW50cyIsImNoaWxkcmVuIiwidmVydGljYWwiLCJob3Jpem9udGFsIiwic3BhY2VyIiwibWF4V2lkdGgiLCJQQU5FTF9JTlRFUklPUl9NQVgiLCJtYXhCb3VuZHMiLCJOT1RISU5HIiwiY29weSIsImluY2x1ZGVCb3VuZHMiLCJhbGlnbkJvdW5kcyIsImhlaWdodCIsInZhbGlkVmFsdWVzIiwiZW51bWVyYXRpb24iLCJ2YWx1ZXMiLCJjb2xvclByb3BlcnR5IiwiZ2VuZXJpY0NvbG9yUHJvcGVydGllcyIsImdldCIsInJpY2hUZXh0IiwiZmlsbCIsInN0cm9rZSIsImNlbnRlclkiLCJub2RlIiwidGVybUxpc3QiLCJzdHJpbmciLCJ0b1JpY2hTdHJpbmciLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkdlbmVyaWNGYWN0b3JzTm9kZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNy0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBEaXNwbGF5cyB0aGUgbWFpbiBmYWN0b3JzIChob3Jpem9udGFsIHN1bSBhbmQgdmVydGljYWwgc3VtKVxyXG4gKlxyXG4gKiBOT1RFOiBUaGlzIHR5cGUgaXMgZGVzaWduZWQgdG8gYmUgcGVyc2lzdGVudCwgYW5kIHdpbGwgbm90IG5lZWQgdG8gcmVsZWFzZSByZWZlcmVuY2VzIHRvIGF2b2lkIG1lbW9yeSBsZWFrcy5cclxuICpcclxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxyXG4gKi9cclxuXHJcbmltcG9ydCB2YWxpZGF0ZSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL3ZhbGlkYXRlLmpzJztcclxuaW1wb3J0IEJvdW5kczIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL0JvdW5kczIuanMnO1xyXG5pbXBvcnQgT3JpZW50YXRpb24gZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL09yaWVudGF0aW9uLmpzJztcclxuaW1wb3J0IE1hdGhTeW1ib2xzIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9NYXRoU3ltYm9scy5qcyc7XHJcbmltcG9ydCB7IEFsaWduQm94LCBIQm94LCBOb2RlLCBSZWN0YW5nbGUsIFJpY2hUZXh0LCBUZXh0IH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IGFyZWFNb2RlbENvbW1vbiBmcm9tICcuLi8uLi9hcmVhTW9kZWxDb21tb24uanMnO1xyXG5pbXBvcnQgQXJlYU1vZGVsQ29tbW9uQ29uc3RhbnRzIGZyb20gJy4uLy4uL2NvbW1vbi9BcmVhTW9kZWxDb21tb25Db25zdGFudHMuanMnO1xyXG5pbXBvcnQgQXJlYU1vZGVsQ29tbW9uQ29sb3JzIGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L0FyZWFNb2RlbENvbW1vbkNvbG9ycy5qcyc7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgQk9YX1NJWkUgPSAzMDtcclxuY29uc3QgUEFSRU5fQk9VTkRTID0gbmV3IFRleHQoICcpKCcsIHtcclxuICBmb250OiBBcmVhTW9kZWxDb21tb25Db25zdGFudHMuRkFDVE9SU19QQVJFTl9GT05ULFxyXG4gIGJvdW5kc01ldGhvZDogJ2FjY3VyYXRlJ1xyXG59ICkuYm91bmRzO1xyXG5cclxuY2xhc3MgR2VuZXJpY0ZhY3RvcnNOb2RlIGV4dGVuZHMgQWxpZ25Cb3gge1xyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7T3JpZW50YXRpb25QYWlyLjxQcm9wZXJ0eS48VGVybUxpc3R8bnVsbD4+fSBkaXNwbGF5UHJvcGVydGllcyAtIFRoZSB0ZXJtIGxpc3RzIHRvIGJlIGRpc3BsYXllZFxyXG4gICAqIEBwYXJhbSB7UHJvcGVydHkuPGJvb2xlYW4+fSBhbGxvd0V4cG9uZW50c1Byb3BlcnR5IC0gV2hldGhlciBleHBvbmVudHMgKHBvd2VycyBvZiB4KSBhcmUgYWxsb3dlZFxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBkaXNwbGF5UHJvcGVydGllcywgYWxsb3dFeHBvbmVudHNQcm9wZXJ0eSApIHtcclxuXHJcbiAgICBjb25zdCByZWFkb3V0cyA9IGRpc3BsYXlQcm9wZXJ0aWVzLm1hcCggKCBkaXNwbGF5UHJvcGVydHksIG9yaWVudGF0aW9uICkgPT4gR2VuZXJpY0ZhY3RvcnNOb2RlLmNyZWF0ZU9yaWVudGF0aW9uUmVhZG91dCggb3JpZW50YXRpb24sIGRpc3BsYXlQcm9wZXJ0eSApICk7XHJcblxyXG4gICAgY29uc3QgbGVmdFBhcmVuVGV4dCA9IG5ldyBUZXh0KCAnKCcsIHsgZm9udDogQXJlYU1vZGVsQ29tbW9uQ29uc3RhbnRzLkZBQ1RPUlNfUEFSRU5fRk9OVCB9ICk7XHJcbiAgICBjb25zdCBtaWRkbGVQYXJlblRleHQgPSBuZXcgVGV4dCggJykoJywgeyBmb250OiBBcmVhTW9kZWxDb21tb25Db25zdGFudHMuRkFDVE9SU19QQVJFTl9GT05UIH0gKTtcclxuICAgIGNvbnN0IHJpZ2h0UGFyZW5UZXh0ID0gbmV3IFRleHQoICcpJywgeyBmb250OiBBcmVhTW9kZWxDb21tb25Db25zdGFudHMuRkFDVE9SU19QQVJFTl9GT05UIH0gKTtcclxuICAgIGNvbnN0IHhUZXh0ID0gbmV3IFRleHQoIE1hdGhTeW1ib2xzLlRJTUVTLCB7IGZvbnQ6IEFyZWFNb2RlbENvbW1vbkNvbnN0YW50cy5GQUNUT1JTX1RFUk1fRk9OVCB9ICk7XHJcblxyXG4gICAgLy8gSGF2ZSB0aGUgWCB0YWtlIHVwIGF0IGxlYXN0IHRoZSBzYW1lIHZlcnRpY2FsIGJvdW5kcyBhcyB0aGUgcGFyZW50aGVzZXNcclxuICAgIHhUZXh0LmxvY2FsQm91bmRzID0geFRleHQubG9jYWxCb3VuZHMudW5pb24oXHJcbiAgICAgIG5ldyBCb3VuZHMyKCAwLCBtaWRkbGVQYXJlblRleHQubG9jYWxCb3VuZHMubWluWSwgMCwgbWlkZGxlUGFyZW5UZXh0LmxvY2FsQm91bmRzLm1heFkgKVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBDZW50ZXIgdGhlIGJveCB2ZXJ0aWNhbGx5LCBzbyB0aGF0IHdoZW4gbWF4V2lkdGgga2lja3MgaW4sIHdlIHN0YXkgdmVydGljYWxseSBjZW50ZXJlZCBpbiBvdXIgYXJlYSBvZiB0aGUgYm94XHJcbiAgICBjb25zdCBib3ggPSBuZXcgSEJveCgge1xyXG4gICAgICBzcGFjaW5nOiAxMCxcclxuICAgICAgYWxpZ246ICdvcmlnaW4nXHJcbiAgICB9ICk7XHJcblxyXG4gICAgYWxsb3dFeHBvbmVudHNQcm9wZXJ0eS5saW5rKCBhbGxvd0V4cG9uZW50cyA9PiB7XHJcbiAgICAgIGJveC5jaGlsZHJlbiA9IGFsbG93RXhwb25lbnRzID8gW1xyXG4gICAgICAgIGxlZnRQYXJlblRleHQsXHJcbiAgICAgICAgcmVhZG91dHMudmVydGljYWwsXHJcbiAgICAgICAgbWlkZGxlUGFyZW5UZXh0LFxyXG4gICAgICAgIHJlYWRvdXRzLmhvcml6b250YWwsXHJcbiAgICAgICAgcmlnaHRQYXJlblRleHRcclxuICAgICAgXSA6IFtcclxuICAgICAgICByZWFkb3V0cy52ZXJ0aWNhbCxcclxuICAgICAgICB4VGV4dCxcclxuICAgICAgICByZWFkb3V0cy5ob3Jpem9udGFsXHJcbiAgICAgIF07XHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3Qgc3BhY2VyID0gbmV3IE5vZGUoKTtcclxuXHJcbiAgICBzdXBlciggbmV3IE5vZGUoIHtcclxuICAgICAgY2hpbGRyZW46IFsgYm94LCBzcGFjZXIgXSxcclxuICAgICAgbWF4V2lkdGg6IEFyZWFNb2RlbENvbW1vbkNvbnN0YW50cy5QQU5FTF9JTlRFUklPUl9NQVhcclxuICAgIH0gKSApO1xyXG5cclxuICAgIC8vIFNldCBvdXIgYWxpZ25Cb3VuZHMgdG8gdGhlIG1heGltdW0gc2l6ZSB3ZSBjYW4gYmUsIHNvIHRoYXQgd2UgcmVtYWluIGNlbnRlcmVkIG5pY2VseSBpbiB0aGUgYWNjb3JkaW9uIGJveC5cclxuICAgIGFsbG93RXhwb25lbnRzUHJvcGVydHkubGluayggYWxsb3dFeHBvbmVudHMgPT4ge1xyXG4gICAgICBjb25zdCBtYXhCb3VuZHMgPSBCb3VuZHMyLk5PVEhJTkcuY29weSgpO1xyXG4gICAgICBtYXhCb3VuZHMuaW5jbHVkZUJvdW5kcyggbmV3IFJpY2hUZXh0KCBhbGxvd0V4cG9uZW50cyA/ICd4PHN1cD4yPC9zdXA+JyA6ICd4Jywge1xyXG4gICAgICAgIGZvbnQ6IEFyZWFNb2RlbENvbW1vbkNvbnN0YW50cy5GQUNUT1JTX1RFUk1fRk9OVFxyXG4gICAgICB9ICkuYm91bmRzICk7XHJcbiAgICAgIG1heEJvdW5kcy5pbmNsdWRlQm91bmRzKCBQQVJFTl9CT1VORFMgKTtcclxuXHJcbiAgICAgIHRoaXMuYWxpZ25Cb3VuZHMgPSBuZXcgQm91bmRzMiggMCwgMCwgQXJlYU1vZGVsQ29tbW9uQ29uc3RhbnRzLlBBTkVMX0lOVEVSSU9SX01BWCwgbWF4Qm91bmRzLmhlaWdodCApO1xyXG4gICAgICBzcGFjZXIubG9jYWxCb3VuZHMgPSBuZXcgQm91bmRzMiggMCwgbWF4Qm91bmRzLm1pblksIDAsIG1heEJvdW5kcy5tYXhZICk7XHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIGEgcmVhZG91dCBmb3IgdGhlIHRvdGFsIHN1bSBmb3IgYSBwYXJ0aWN1bGFyIG9yaWVudGF0aW9uLlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09yaWVudGF0aW9ufSBvcmllbnRhdGlvblxyXG4gICAqIEBwYXJhbSB7UHJvcGVydHkuPFRlcm1MaXN0fG51bGw+fSBkaXNwbGF5UHJvcGVydHlcclxuICAgKiBAcmV0dXJucyB7Tm9kZX1cclxuICAgKi9cclxuICBzdGF0aWMgY3JlYXRlT3JpZW50YXRpb25SZWFkb3V0KCBvcmllbnRhdGlvbiwgZGlzcGxheVByb3BlcnR5ICkge1xyXG4gICAgdmFsaWRhdGUoIG9yaWVudGF0aW9uLCB7IHZhbGlkVmFsdWVzOiBPcmllbnRhdGlvbi5lbnVtZXJhdGlvbi52YWx1ZXMgfSApO1xyXG5cclxuICAgIGNvbnN0IGNvbG9yUHJvcGVydHkgPSBBcmVhTW9kZWxDb21tb25Db2xvcnMuZ2VuZXJpY0NvbG9yUHJvcGVydGllcy5nZXQoIG9yaWVudGF0aW9uICk7XHJcblxyXG4gICAgY29uc3QgcmljaFRleHQgPSBuZXcgUmljaFRleHQoICcnLCB7XHJcbiAgICAgIGZvbnQ6IEFyZWFNb2RlbENvbW1vbkNvbnN0YW50cy5GQUNUT1JTX1RFUk1fRk9OVCxcclxuICAgICAgZmlsbDogY29sb3JQcm9wZXJ0eVxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IGJveCA9IG5ldyBSZWN0YW5nbGUoIDAsIDAsIEJPWF9TSVpFLCBCT1hfU0laRSwge1xyXG4gICAgICBzdHJva2U6IGNvbG9yUHJvcGVydHksXHJcbiAgICAgIGNlbnRlclk6IFBBUkVOX0JPVU5EUy5jZW50ZXJZIC8vIFNvIHRoYXQgaXQgaXMgcGVyZmVjdGx5IHZlcnRpY2FsbHkgYWxpZ25lZFxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IG5vZGUgPSBuZXcgTm9kZSgpO1xyXG4gICAgZGlzcGxheVByb3BlcnR5LmxpbmsoIHRlcm1MaXN0ID0+IHtcclxuICAgICAgaWYgKCB0ZXJtTGlzdCA9PT0gbnVsbCApIHtcclxuICAgICAgICBub2RlLmNoaWxkcmVuID0gWyBib3ggXTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICByaWNoVGV4dC5zdHJpbmcgPSB0ZXJtTGlzdC50b1JpY2hTdHJpbmcoKTtcclxuICAgICAgICBub2RlLmNoaWxkcmVuID0gWyByaWNoVGV4dCBdO1xyXG4gICAgICB9XHJcbiAgICB9ICk7XHJcblxyXG4gICAgcmV0dXJuIG5vZGU7XHJcbiAgfVxyXG59XHJcblxyXG5hcmVhTW9kZWxDb21tb24ucmVnaXN0ZXIoICdHZW5lcmljRmFjdG9yc05vZGUnLCBHZW5lcmljRmFjdG9yc05vZGUgKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEdlbmVyaWNGYWN0b3JzTm9kZTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFFBQVEsTUFBTSxpQ0FBaUM7QUFDdEQsT0FBT0MsT0FBTyxNQUFNLCtCQUErQjtBQUNuRCxPQUFPQyxXQUFXLE1BQU0seUNBQXlDO0FBQ2pFLE9BQU9DLFdBQVcsTUFBTSw0Q0FBNEM7QUFDcEUsU0FBU0MsUUFBUSxFQUFFQyxJQUFJLEVBQUVDLElBQUksRUFBRUMsU0FBUyxFQUFFQyxRQUFRLEVBQUVDLElBQUksUUFBUSxtQ0FBbUM7QUFDbkcsT0FBT0MsZUFBZSxNQUFNLDBCQUEwQjtBQUN0RCxPQUFPQyx3QkFBd0IsTUFBTSwwQ0FBMEM7QUFDL0UsT0FBT0MscUJBQXFCLE1BQU0sNENBQTRDOztBQUU5RTtBQUNBLE1BQU1DLFFBQVEsR0FBRyxFQUFFO0FBQ25CLE1BQU1DLFlBQVksR0FBRyxJQUFJTCxJQUFJLENBQUUsSUFBSSxFQUFFO0VBQ25DTSxJQUFJLEVBQUVKLHdCQUF3QixDQUFDSyxrQkFBa0I7RUFDakRDLFlBQVksRUFBRTtBQUNoQixDQUFFLENBQUMsQ0FBQ0MsTUFBTTtBQUVWLE1BQU1DLGtCQUFrQixTQUFTZixRQUFRLENBQUM7RUFDeEM7QUFDRjtBQUNBO0FBQ0E7RUFDRWdCLFdBQVdBLENBQUVDLGlCQUFpQixFQUFFQyxzQkFBc0IsRUFBRztJQUV2RCxNQUFNQyxRQUFRLEdBQUdGLGlCQUFpQixDQUFDRyxHQUFHLENBQUUsQ0FBRUMsZUFBZSxFQUFFQyxXQUFXLEtBQU1QLGtCQUFrQixDQUFDUSx3QkFBd0IsQ0FBRUQsV0FBVyxFQUFFRCxlQUFnQixDQUFFLENBQUM7SUFFekosTUFBTUcsYUFBYSxHQUFHLElBQUluQixJQUFJLENBQUUsR0FBRyxFQUFFO01BQUVNLElBQUksRUFBRUosd0JBQXdCLENBQUNLO0lBQW1CLENBQUUsQ0FBQztJQUM1RixNQUFNYSxlQUFlLEdBQUcsSUFBSXBCLElBQUksQ0FBRSxJQUFJLEVBQUU7TUFBRU0sSUFBSSxFQUFFSix3QkFBd0IsQ0FBQ0s7SUFBbUIsQ0FBRSxDQUFDO0lBQy9GLE1BQU1jLGNBQWMsR0FBRyxJQUFJckIsSUFBSSxDQUFFLEdBQUcsRUFBRTtNQUFFTSxJQUFJLEVBQUVKLHdCQUF3QixDQUFDSztJQUFtQixDQUFFLENBQUM7SUFDN0YsTUFBTWUsS0FBSyxHQUFHLElBQUl0QixJQUFJLENBQUVOLFdBQVcsQ0FBQzZCLEtBQUssRUFBRTtNQUFFakIsSUFBSSxFQUFFSix3QkFBd0IsQ0FBQ3NCO0lBQWtCLENBQUUsQ0FBQzs7SUFFakc7SUFDQUYsS0FBSyxDQUFDRyxXQUFXLEdBQUdILEtBQUssQ0FBQ0csV0FBVyxDQUFDQyxLQUFLLENBQ3pDLElBQUlsQyxPQUFPLENBQUUsQ0FBQyxFQUFFNEIsZUFBZSxDQUFDSyxXQUFXLENBQUNFLElBQUksRUFBRSxDQUFDLEVBQUVQLGVBQWUsQ0FBQ0ssV0FBVyxDQUFDRyxJQUFLLENBQ3hGLENBQUM7O0lBRUQ7SUFDQSxNQUFNQyxHQUFHLEdBQUcsSUFBSWpDLElBQUksQ0FBRTtNQUNwQmtDLE9BQU8sRUFBRSxFQUFFO01BQ1hDLEtBQUssRUFBRTtJQUNULENBQUUsQ0FBQztJQUVIbEIsc0JBQXNCLENBQUNtQixJQUFJLENBQUVDLGNBQWMsSUFBSTtNQUM3Q0osR0FBRyxDQUFDSyxRQUFRLEdBQUdELGNBQWMsR0FBRyxDQUM5QmQsYUFBYSxFQUNiTCxRQUFRLENBQUNxQixRQUFRLEVBQ2pCZixlQUFlLEVBQ2ZOLFFBQVEsQ0FBQ3NCLFVBQVUsRUFDbkJmLGNBQWMsQ0FDZixHQUFHLENBQ0ZQLFFBQVEsQ0FBQ3FCLFFBQVEsRUFDakJiLEtBQUssRUFDTFIsUUFBUSxDQUFDc0IsVUFBVSxDQUNwQjtJQUNILENBQUUsQ0FBQztJQUVILE1BQU1DLE1BQU0sR0FBRyxJQUFJeEMsSUFBSSxDQUFDLENBQUM7SUFFekIsS0FBSyxDQUFFLElBQUlBLElBQUksQ0FBRTtNQUNmcUMsUUFBUSxFQUFFLENBQUVMLEdBQUcsRUFBRVEsTUFBTSxDQUFFO01BQ3pCQyxRQUFRLEVBQUVwQyx3QkFBd0IsQ0FBQ3FDO0lBQ3JDLENBQUUsQ0FBRSxDQUFDOztJQUVMO0lBQ0ExQixzQkFBc0IsQ0FBQ21CLElBQUksQ0FBRUMsY0FBYyxJQUFJO01BQzdDLE1BQU1PLFNBQVMsR0FBR2hELE9BQU8sQ0FBQ2lELE9BQU8sQ0FBQ0MsSUFBSSxDQUFDLENBQUM7TUFDeENGLFNBQVMsQ0FBQ0csYUFBYSxDQUFFLElBQUk1QyxRQUFRLENBQUVrQyxjQUFjLEdBQUcsZUFBZSxHQUFHLEdBQUcsRUFBRTtRQUM3RTNCLElBQUksRUFBRUosd0JBQXdCLENBQUNzQjtNQUNqQyxDQUFFLENBQUMsQ0FBQ2YsTUFBTyxDQUFDO01BQ1orQixTQUFTLENBQUNHLGFBQWEsQ0FBRXRDLFlBQWEsQ0FBQztNQUV2QyxJQUFJLENBQUN1QyxXQUFXLEdBQUcsSUFBSXBELE9BQU8sQ0FBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFVSx3QkFBd0IsQ0FBQ3FDLGtCQUFrQixFQUFFQyxTQUFTLENBQUNLLE1BQU8sQ0FBQztNQUNyR1IsTUFBTSxDQUFDWixXQUFXLEdBQUcsSUFBSWpDLE9BQU8sQ0FBRSxDQUFDLEVBQUVnRCxTQUFTLENBQUNiLElBQUksRUFBRSxDQUFDLEVBQUVhLFNBQVMsQ0FBQ1osSUFBSyxDQUFDO0lBQzFFLENBQUUsQ0FBQztFQUNMOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRSxPQUFPVix3QkFBd0JBLENBQUVELFdBQVcsRUFBRUQsZUFBZSxFQUFHO0lBQzlEekIsUUFBUSxDQUFFMEIsV0FBVyxFQUFFO01BQUU2QixXQUFXLEVBQUVyRCxXQUFXLENBQUNzRCxXQUFXLENBQUNDO0lBQU8sQ0FBRSxDQUFDO0lBRXhFLE1BQU1DLGFBQWEsR0FBRzlDLHFCQUFxQixDQUFDK0Msc0JBQXNCLENBQUNDLEdBQUcsQ0FBRWxDLFdBQVksQ0FBQztJQUVyRixNQUFNbUMsUUFBUSxHQUFHLElBQUlyRCxRQUFRLENBQUUsRUFBRSxFQUFFO01BQ2pDTyxJQUFJLEVBQUVKLHdCQUF3QixDQUFDc0IsaUJBQWlCO01BQ2hENkIsSUFBSSxFQUFFSjtJQUNSLENBQUUsQ0FBQztJQUVILE1BQU1wQixHQUFHLEdBQUcsSUFBSS9CLFNBQVMsQ0FBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFTSxRQUFRLEVBQUVBLFFBQVEsRUFBRTtNQUNuRGtELE1BQU0sRUFBRUwsYUFBYTtNQUNyQk0sT0FBTyxFQUFFbEQsWUFBWSxDQUFDa0QsT0FBTyxDQUFDO0lBQ2hDLENBQUUsQ0FBQzs7SUFFSCxNQUFNQyxJQUFJLEdBQUcsSUFBSTNELElBQUksQ0FBQyxDQUFDO0lBQ3ZCbUIsZUFBZSxDQUFDZ0IsSUFBSSxDQUFFeUIsUUFBUSxJQUFJO01BQ2hDLElBQUtBLFFBQVEsS0FBSyxJQUFJLEVBQUc7UUFDdkJELElBQUksQ0FBQ3RCLFFBQVEsR0FBRyxDQUFFTCxHQUFHLENBQUU7TUFDekIsQ0FBQyxNQUNJO1FBQ0h1QixRQUFRLENBQUNNLE1BQU0sR0FBR0QsUUFBUSxDQUFDRSxZQUFZLENBQUMsQ0FBQztRQUN6Q0gsSUFBSSxDQUFDdEIsUUFBUSxHQUFHLENBQUVrQixRQUFRLENBQUU7TUFDOUI7SUFDRixDQUFFLENBQUM7SUFFSCxPQUFPSSxJQUFJO0VBQ2I7QUFDRjtBQUVBdkQsZUFBZSxDQUFDMkQsUUFBUSxDQUFFLG9CQUFvQixFQUFFbEQsa0JBQW1CLENBQUM7QUFFcEUsZUFBZUEsa0JBQWtCIn0=