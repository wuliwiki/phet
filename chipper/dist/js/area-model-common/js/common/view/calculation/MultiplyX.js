// Copyright 2018-2022, University of Colorado Boulder

/**
 * Combines two nodes with an x-like multiplication in the middle (poolable)
 *
 * This is pooled for performance, as recreating the view structure had unacceptable performance/GC characteristics.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import ReadOnlyProperty from '../../../../../axon/js/ReadOnlyProperty.js';
import Poolable from '../../../../../phet-core/js/Poolable.js';
import StringUtils from '../../../../../phetcommon/js/util/StringUtils.js';
import MathSymbols from '../../../../../scenery-phet/js/MathSymbols.js';
import { HBox, Node, Text } from '../../../../../scenery/js/imports.js';
import areaModelCommon from '../../../areaModelCommon.js';
import AreaModelCommonStrings from '../../../AreaModelCommonStrings.js';
import AreaModelCommonConstants from '../../AreaModelCommonConstants.js';
const productTimesPatternString = AreaModelCommonStrings.a11y.productTimesPattern;
class MultiplyX extends HBox {
  /**
   * @param {Node} leftContent - Should have a clean() method to support pooling
   * @param {Node} rightContent - Should have a clean() method to support pooling
   * @param {Property.<Color>} baseColorProperty
   */
  constructor(leftContent, rightContent, baseColorProperty) {
    super({
      spacing: AreaModelCommonConstants.CALCULATION_X_PADDING,
      align: 'bottom'
    });

    // @private {Text} - Persistent (since it's declared in the constructor instead of the initialize function, this
    // will persist for the life of this node).
    this.timesNode = new Text(MathSymbols.TIMES, {
      font: AreaModelCommonConstants.CALCULATION_X_FONT,
      // pdom
      tagName: 'mo',
      pdomNamespace: 'http://www.w3.org/1998/Math/MathML',
      innerContent: '&times;'
    });
    this.children = [this.timesNode];
    this.initialize(leftContent, rightContent, baseColorProperty);
  }

  /**
   * @public
   *
   * @param {Node} leftContent - Should have a clean() method to support pooling
   * @param {Node} rightContent - Should have a clean() method to support pooling
   * @param {Property.<Color>} baseColorProperty
   */
  initialize(leftContent, rightContent, baseColorProperty) {
    assert && assert(leftContent instanceof Node);
    assert && assert(rightContent instanceof Node);
    assert && assert(baseColorProperty instanceof ReadOnlyProperty);

    // @public {string}
    this.accessibleText = StringUtils.fillIn(productTimesPatternString, {
      left: leftContent.accessibleText,
      right: rightContent.accessibleText
    });

    // @private {Node|null}
    this.leftContent = leftContent;
    this.rightContent = rightContent;
    assert && assert(this.children.length === 1, 'Should only have the timesNode');
    this.insertChild(0, leftContent);
    this.addChild(rightContent);
    this.timesNode.fill = baseColorProperty;
  }

  /**
   * Clears the state of this node (releasing references) so it can be freed to the pool (and potentially GC'ed).
   * @public
   */
  clean() {
    assert && assert(this.children.length === 3, 'Should have two content nodes and our timesNode');

    // Remove our content
    this.removeChild(this.leftContent);
    this.removeChild(this.rightContent);
    this.leftContent.clean();
    this.rightContent.clean();
    this.leftContent = null;
    this.rightContent = null;
    this.timesNode.fill = null;
    this.freeToPool();
  }
}
areaModelCommon.register('MultiplyX', MultiplyX);
Poolable.mixInto(MultiplyX);
export default MultiplyX;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFkT25seVByb3BlcnR5IiwiUG9vbGFibGUiLCJTdHJpbmdVdGlscyIsIk1hdGhTeW1ib2xzIiwiSEJveCIsIk5vZGUiLCJUZXh0IiwiYXJlYU1vZGVsQ29tbW9uIiwiQXJlYU1vZGVsQ29tbW9uU3RyaW5ncyIsIkFyZWFNb2RlbENvbW1vbkNvbnN0YW50cyIsInByb2R1Y3RUaW1lc1BhdHRlcm5TdHJpbmciLCJhMTF5IiwicHJvZHVjdFRpbWVzUGF0dGVybiIsIk11bHRpcGx5WCIsImNvbnN0cnVjdG9yIiwibGVmdENvbnRlbnQiLCJyaWdodENvbnRlbnQiLCJiYXNlQ29sb3JQcm9wZXJ0eSIsInNwYWNpbmciLCJDQUxDVUxBVElPTl9YX1BBRERJTkciLCJhbGlnbiIsInRpbWVzTm9kZSIsIlRJTUVTIiwiZm9udCIsIkNBTENVTEFUSU9OX1hfRk9OVCIsInRhZ05hbWUiLCJwZG9tTmFtZXNwYWNlIiwiaW5uZXJDb250ZW50IiwiY2hpbGRyZW4iLCJpbml0aWFsaXplIiwiYXNzZXJ0IiwiYWNjZXNzaWJsZVRleHQiLCJmaWxsSW4iLCJsZWZ0IiwicmlnaHQiLCJsZW5ndGgiLCJpbnNlcnRDaGlsZCIsImFkZENoaWxkIiwiZmlsbCIsImNsZWFuIiwicmVtb3ZlQ2hpbGQiLCJmcmVlVG9Qb29sIiwicmVnaXN0ZXIiLCJtaXhJbnRvIl0sInNvdXJjZXMiOlsiTXVsdGlwbHlYLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE4LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIENvbWJpbmVzIHR3byBub2RlcyB3aXRoIGFuIHgtbGlrZSBtdWx0aXBsaWNhdGlvbiBpbiB0aGUgbWlkZGxlIChwb29sYWJsZSlcclxuICpcclxuICogVGhpcyBpcyBwb29sZWQgZm9yIHBlcmZvcm1hbmNlLCBhcyByZWNyZWF0aW5nIHRoZSB2aWV3IHN0cnVjdHVyZSBoYWQgdW5hY2NlcHRhYmxlIHBlcmZvcm1hbmNlL0dDIGNoYXJhY3RlcmlzdGljcy5cclxuICpcclxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxyXG4gKi9cclxuXHJcbmltcG9ydCBSZWFkT25seVByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uLy4uL2F4b24vanMvUmVhZE9ubHlQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBQb29sYWJsZSBmcm9tICcuLi8uLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvUG9vbGFibGUuanMnO1xyXG5pbXBvcnQgU3RyaW5nVXRpbHMgZnJvbSAnLi4vLi4vLi4vLi4vLi4vcGhldGNvbW1vbi9qcy91dGlsL1N0cmluZ1V0aWxzLmpzJztcclxuaW1wb3J0IE1hdGhTeW1ib2xzIGZyb20gJy4uLy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9NYXRoU3ltYm9scy5qcyc7XHJcbmltcG9ydCB7IEhCb3gsIE5vZGUsIFRleHQgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgYXJlYU1vZGVsQ29tbW9uIGZyb20gJy4uLy4uLy4uL2FyZWFNb2RlbENvbW1vbi5qcyc7XHJcbmltcG9ydCBBcmVhTW9kZWxDb21tb25TdHJpbmdzIGZyb20gJy4uLy4uLy4uL0FyZWFNb2RlbENvbW1vblN0cmluZ3MuanMnO1xyXG5pbXBvcnQgQXJlYU1vZGVsQ29tbW9uQ29uc3RhbnRzIGZyb20gJy4uLy4uL0FyZWFNb2RlbENvbW1vbkNvbnN0YW50cy5qcyc7XHJcblxyXG5jb25zdCBwcm9kdWN0VGltZXNQYXR0ZXJuU3RyaW5nID0gQXJlYU1vZGVsQ29tbW9uU3RyaW5ncy5hMTF5LnByb2R1Y3RUaW1lc1BhdHRlcm47XHJcblxyXG5jbGFzcyBNdWx0aXBseVggZXh0ZW5kcyBIQm94IHtcclxuICAvKipcclxuICAgKiBAcGFyYW0ge05vZGV9IGxlZnRDb250ZW50IC0gU2hvdWxkIGhhdmUgYSBjbGVhbigpIG1ldGhvZCB0byBzdXBwb3J0IHBvb2xpbmdcclxuICAgKiBAcGFyYW0ge05vZGV9IHJpZ2h0Q29udGVudCAtIFNob3VsZCBoYXZlIGEgY2xlYW4oKSBtZXRob2QgdG8gc3VwcG9ydCBwb29saW5nXHJcbiAgICogQHBhcmFtIHtQcm9wZXJ0eS48Q29sb3I+fSBiYXNlQ29sb3JQcm9wZXJ0eVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBsZWZ0Q29udGVudCwgcmlnaHRDb250ZW50LCBiYXNlQ29sb3JQcm9wZXJ0eSApIHtcclxuXHJcbiAgICBzdXBlcigge1xyXG4gICAgICBzcGFjaW5nOiBBcmVhTW9kZWxDb21tb25Db25zdGFudHMuQ0FMQ1VMQVRJT05fWF9QQURESU5HLFxyXG4gICAgICBhbGlnbjogJ2JvdHRvbSdcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZSB7VGV4dH0gLSBQZXJzaXN0ZW50IChzaW5jZSBpdCdzIGRlY2xhcmVkIGluIHRoZSBjb25zdHJ1Y3RvciBpbnN0ZWFkIG9mIHRoZSBpbml0aWFsaXplIGZ1bmN0aW9uLCB0aGlzXHJcbiAgICAvLyB3aWxsIHBlcnNpc3QgZm9yIHRoZSBsaWZlIG9mIHRoaXMgbm9kZSkuXHJcbiAgICB0aGlzLnRpbWVzTm9kZSA9IG5ldyBUZXh0KCBNYXRoU3ltYm9scy5USU1FUywge1xyXG4gICAgICBmb250OiBBcmVhTW9kZWxDb21tb25Db25zdGFudHMuQ0FMQ1VMQVRJT05fWF9GT05ULFxyXG5cclxuICAgICAgLy8gcGRvbVxyXG4gICAgICB0YWdOYW1lOiAnbW8nLFxyXG4gICAgICBwZG9tTmFtZXNwYWNlOiAnaHR0cDovL3d3dy53My5vcmcvMTk5OC9NYXRoL01hdGhNTCcsXHJcbiAgICAgIGlubmVyQ29udGVudDogJyZ0aW1lczsnXHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5jaGlsZHJlbiA9IFsgdGhpcy50aW1lc05vZGUgXTtcclxuXHJcbiAgICB0aGlzLmluaXRpYWxpemUoIGxlZnRDb250ZW50LCByaWdodENvbnRlbnQsIGJhc2VDb2xvclByb3BlcnR5ICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcHVibGljXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge05vZGV9IGxlZnRDb250ZW50IC0gU2hvdWxkIGhhdmUgYSBjbGVhbigpIG1ldGhvZCB0byBzdXBwb3J0IHBvb2xpbmdcclxuICAgKiBAcGFyYW0ge05vZGV9IHJpZ2h0Q29udGVudCAtIFNob3VsZCBoYXZlIGEgY2xlYW4oKSBtZXRob2QgdG8gc3VwcG9ydCBwb29saW5nXHJcbiAgICogQHBhcmFtIHtQcm9wZXJ0eS48Q29sb3I+fSBiYXNlQ29sb3JQcm9wZXJ0eVxyXG4gICAqL1xyXG4gIGluaXRpYWxpemUoIGxlZnRDb250ZW50LCByaWdodENvbnRlbnQsIGJhc2VDb2xvclByb3BlcnR5ICkge1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggbGVmdENvbnRlbnQgaW5zdGFuY2VvZiBOb2RlICk7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCByaWdodENvbnRlbnQgaW5zdGFuY2VvZiBOb2RlICk7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBiYXNlQ29sb3JQcm9wZXJ0eSBpbnN0YW5jZW9mIFJlYWRPbmx5UHJvcGVydHkgKTtcclxuXHJcbiAgICAvLyBAcHVibGljIHtzdHJpbmd9XHJcbiAgICB0aGlzLmFjY2Vzc2libGVUZXh0ID0gU3RyaW5nVXRpbHMuZmlsbEluKCBwcm9kdWN0VGltZXNQYXR0ZXJuU3RyaW5nLCB7XHJcbiAgICAgIGxlZnQ6IGxlZnRDb250ZW50LmFjY2Vzc2libGVUZXh0LFxyXG4gICAgICByaWdodDogcmlnaHRDb250ZW50LmFjY2Vzc2libGVUZXh0XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gQHByaXZhdGUge05vZGV8bnVsbH1cclxuICAgIHRoaXMubGVmdENvbnRlbnQgPSBsZWZ0Q29udGVudDtcclxuICAgIHRoaXMucmlnaHRDb250ZW50ID0gcmlnaHRDb250ZW50O1xyXG5cclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIHRoaXMuY2hpbGRyZW4ubGVuZ3RoID09PSAxLCAnU2hvdWxkIG9ubHkgaGF2ZSB0aGUgdGltZXNOb2RlJyApO1xyXG5cclxuICAgIHRoaXMuaW5zZXJ0Q2hpbGQoIDAsIGxlZnRDb250ZW50ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCByaWdodENvbnRlbnQgKTtcclxuXHJcbiAgICB0aGlzLnRpbWVzTm9kZS5maWxsID0gYmFzZUNvbG9yUHJvcGVydHk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDbGVhcnMgdGhlIHN0YXRlIG9mIHRoaXMgbm9kZSAocmVsZWFzaW5nIHJlZmVyZW5jZXMpIHNvIGl0IGNhbiBiZSBmcmVlZCB0byB0aGUgcG9vbCAoYW5kIHBvdGVudGlhbGx5IEdDJ2VkKS5cclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgY2xlYW4oKSB7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0aGlzLmNoaWxkcmVuLmxlbmd0aCA9PT0gMywgJ1Nob3VsZCBoYXZlIHR3byBjb250ZW50IG5vZGVzIGFuZCBvdXIgdGltZXNOb2RlJyApO1xyXG5cclxuICAgIC8vIFJlbW92ZSBvdXIgY29udGVudFxyXG4gICAgdGhpcy5yZW1vdmVDaGlsZCggdGhpcy5sZWZ0Q29udGVudCApO1xyXG4gICAgdGhpcy5yZW1vdmVDaGlsZCggdGhpcy5yaWdodENvbnRlbnQgKTtcclxuICAgIHRoaXMubGVmdENvbnRlbnQuY2xlYW4oKTtcclxuICAgIHRoaXMucmlnaHRDb250ZW50LmNsZWFuKCk7XHJcbiAgICB0aGlzLmxlZnRDb250ZW50ID0gbnVsbDtcclxuICAgIHRoaXMucmlnaHRDb250ZW50ID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLnRpbWVzTm9kZS5maWxsID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLmZyZWVUb1Bvb2woKTtcclxuICB9XHJcbn1cclxuXHJcbmFyZWFNb2RlbENvbW1vbi5yZWdpc3RlciggJ011bHRpcGx5WCcsIE11bHRpcGx5WCApO1xyXG5cclxuUG9vbGFibGUubWl4SW50byggTXVs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