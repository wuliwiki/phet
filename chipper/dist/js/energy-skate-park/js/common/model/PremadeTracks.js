// Copyright 2018-2022, University of Colorado Boulder

/**
 * A collection of tracks used in the EnergySkateParkTrackSet models of energy-skate-park and energy-skate-park-basics.
 * Premade tracks are not draggable but they can sometimes be "configurable", meaning that control points can be moved.
 * For configurable premade tracks, the control points can only be dragged within a smaller set of bounds. These
 * bounds are specified for all premade tracks, but will only apply to the track if the model tracks are "configurable".
 *
 * Premade tracks are all isolated so they have no "parent" tracks, see Track.js for definition of parent.
 *
 * @author Jesse Greenberg (PhET Interactive Simulations)
 */

import Bounds2 from '../../../../dot/js/Bounds2.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import EnumerationDeprecated from '../../../../phet-core/js/EnumerationDeprecated.js';
import merge from '../../../../phet-core/js/merge.js';
import energySkatePark from '../../energySkatePark.js';
import Track from './Track.js';

// constants
const PARENT_TRACKS = [];

// limiting bounds for dragging control points
const END_BOUNDS_WIDTH = 2.5;
const END_BOUNDS_HEIGHT = 4;

// the supported premade tracks, used in EnegySkateParkTrackSetModels
const TrackType = EnumerationDeprecated.byKeys(['PARABOLA', 'SLOPE', 'DOUBLE_WELL', 'LOOP']);

/**
 * Create a set of limiting drag bounds for a control point of a premade track. The control point is at the
 * CENTER of the limiting bounds.
 *
 * @param  {Vector2} point - position of control point, CENTER of the bounds
 * @param  {number} width
 * @param  {number} height
 * @returns {Bounds2}
 */
const createCenteredLimitBounds = (point, width, height) => {
  return new Bounds2(point.x - width / 2, point.y - height / 2, point.x + width / 2, point.y + height / 2);
};

/**
 * Create a set of limiting drag bounds for a control point of a premade track. The control point is at the BOTTOM
 * CENTER of the limiting bounds.
 *
 * @param  {Vector2} point - position of control point, BOTTOM CENTER of the bounds
 * @param  {number} width
 * @param  {number} height
 * @returns {Bounds2}
 */
const createBottomLimitBounds = (point, width, height) => {
  return new Bounds2(point.x - width / 2, point.y, point.x + width / 2, point.y + height);
};

/**
 * Create a set of limiting drag bounds for a control point. The spacing args are relative to provided point,
 * which is presumably the position of the control point.
 *
 * @param {Vector2} point - spacing in each direction relative to this point
 * @param {number} leftSpace - space to the left of point for bounds
 * @param {number} rightSpace - space to the right of point for bounds
 * @param {number} upSpace - space to the up of point for bounds
 * @param {number} downSpace - space to the down of point for bounds
 * @returns {Bounds2}
 */
const createRelativeSpaceBounds = (point, leftSpace, rightSpace, upSpace, downSpace) => {
  return new Bounds2(point.x - leftSpace, point.y - downSpace, point.x + rightSpace, point.y + upSpace);
};
const PremadeTracks = {
  /**
   * Create a set of control points that create a parabola shaped track.
   * @param {EnergySkateParkModel} model
   * @param {Object} [options]
   * @returns {ControlPoint[]}
   */
  createParabolaControlPoints: (model, options) => {
    options = merge({
      trackHeight: 6,
      // largest height for the parabola
      trackWidth: 8,
      // width from the left most control point to the right most control point

      // {boolean} - individual points may or may not be visible
      p1Visible: true,
      p2Visible: true,
      p3Visible: true
    }, options);
    const p1 = new Vector2(-options.trackWidth / 2, options.trackHeight);
    const p2 = new Vector2(0, 0);
    const p3 = new Vector2(options.trackWidth / 2, options.trackHeight);
    const p1Bounds = createCenteredLimitBounds(p1, END_BOUNDS_WIDTH, END_BOUNDS_HEIGHT);
    const p2Bounds = createBottomLimitBounds(p2, 5, 3);
    const p3Bounds = createCenteredLimitBounds(p3, END_BOUNDS_WIDTH, END_BOUNDS_HEIGHT);
    return [model.controlPointGroup.createNextElement(p1.x, p1.y, {
      visible: options.p1Visible,
      limitBounds: p1Bounds,
      phetioState: false
    }), model.controlPointGroup.createNextElement(p2.x, p2.y, {
      visible: options.p2Visible,
      limitBounds: p2Bounds,
      phetioState: false
    }), model.controlPointGroup.createNextElement(p3.x, p3.y, {
      visible: options.p3Visible,
      limitBounds: p3Bounds,
      phetioState: false
    })];
  },
  /**
   * Create a set of control points which create a slope shaped track, touching the ground on the right side.
   *
   * @param {EnergySkateParkModel} model
   * @param {Object} [options]
   * @returns {ControlPoint[]}
   */
  createSlopeControlPoints: (model, options) => {
    options = merge({
      trackWidth: 6,
      trackHeight: 6
    }, options);
    const p1 = new Vector2(-4, options.trackHeight);
    const p2 = new Vector2(-2, 1.2);
    const p3 = new Vector2(-4 + options.trackWidth, 0);
    const p1Bounds = createCenteredLimitBounds(p1, END_BOUNDS_WIDTH, END_BOUNDS_HEIGHT);

    // custom relative bounds so that bounds fall along the meter
    const p2Bounds = createRelativeSpaceBounds(p2, 0.5, 2.5, 1.8, 0.2);
    const p3Bounds = createRelativeSpaceBounds(p3, 0.5, 2.5, 3, 0);
    return [model.controlPointGroup.createNextElement(p1.x, p1.y, {
      limitBounds: p1Bounds,
      phetioState: false
    }), model.controlPointGroup.createNextElement(p2.x, p2.y, {
      limitBounds: p2Bounds,
      phetioState: false
    }), model.controlPointGroup.createNextElement(p3.x, p3.y, {
      limitBounds: p3Bounds,
      phetioState: false
    })];
  },
  /**
   * Create a set of control points that will create a double well track. For the double well, move the left well up
   * a but since the interpolation moves it down by that much and we don't want the skater to go below ground
   * while on the track. Numbers determined by trial and error.
   *
   * @param {EnergySkateParkModel} model
   * @param {Object} [options]
   * @returns {ControlPoint[]}
   */
  createDoubleWellControlPoints: (model, options) => {
    options = merge({
      trackHeight: 5,
      // largest height for the well
      trackWidth: 8,
      // width from the left most control point to the right most control point
      trackMidHeight: 2,
      // height of the mid control point that creates the double well

      // {boolean} - individual points may or may not be visible
      p1Visible: true,
      p2Visible: true,
      p3Visible: true,
      p4Visible: true,
      p5Visible: true,
      // spacing for drag bounds of the first (left) control point for createRelativeSpaceBounds
      p1UpSpacing: 3,
      p1DownSpacing: 1,
      // Spacing for drag bounds of the third (center) control point for createRelativeSpaceBounds
      p3UpSpacing: 4,
      p3DownSpacing: 2,
      // spacing for the drag bounds of the fifth (right) control point for createRelativeSpaceBounds
      p5UpSpacing: 3,
      p5DownSpacing: 1
    }, options);
    const p1 = new Vector2(-options.trackWidth / 2, options.trackHeight);
    const p2 = new Vector2(-2, 0.0166015);
    const p3 = new Vector2(0, options.trackMidHeight);
    const p4 = new Vector2(2, 1);
    const p5 = new Vector2(options.trackWidth / 2, options.trackHeight);
    const p1Bounds = createRelativeSpaceBounds(p1, 1.0, 1.5, options.p1UpSpacing, options.p1DownSpacing);
    const p2Bounds = createRelativeSpaceBounds(p2, 1.5, 0.5, 3, 0);
    const p3Bounds = createRelativeSpaceBounds(p3, 1, 1, options.p3UpSpacing, options.p3DownSpacing);
    const p4Bounds = createRelativeSpaceBounds(p4, 0.5, 1.5, 2, 1);
    const p5Bounds = createRelativeSpaceBounds(p5, 1.5, 1.0, options.p5UpSpacing, options.p5DownSpacing);
    return [model.controlPointGroup.createNextElement(p1.x, p1.y, {
      limitBounds: p1Bounds,
      visible: options.p1Visible,
      phetioState: false
    }), model.controlPointGroup.createNextElement(p2.x, p2.y, {
      limitBounds: p2Bounds,
      visible: options.p2Visible,
      phetioState: false
    }), model.controlPointGroup.createNextElement(p3.x, p3.y, {
      limitBounds: p3Bounds,
      visible: options.p3Visible,
      phetioState: false
    }), model.controlPointGroup.createNextElement(p4.x, p4.y, {
      limitBounds: p4Bounds,
      visible: options.p4Visible,
      phetioState: false
    }), model.controlPointGroup.createNextElement(p5.x, p5.y, {
      limitBounds: p5Bounds,
      visible: options.p5Visible,
      phetioState: false
    })];
  },
  /**
   * Create a set of control points that will form a track that takes the shape of a loop.
   *
   * @param {EnergySkateParkModel} model
   * @param {Object} [options]
   * @returns {Array.<ControlPoint>}
   */
  createLoopControlPoints: (model, options) => {
    options = merge({
      trackWidth: 9,
      trackHeight: 6,
      innerLoopWidth: 3,
      innerLoopTop: 4
    }, options);

    // top of the left and right endpoints of the loop, higher than loopTop so that it is easy for the skater to go
    // all the way around the loop
    const trackTop = options.trackHeight;
    const trackBottom = 0.3; // bottom points, so that the skater doesn't go below y = 0
    const loopTop = options.innerLoopTop; // adjust to make the loop top point higher or lower
    const loopWidth = options.trackWidth; // adjust to make the loop more or less wide
    const innerLoopWidth = options.innerLoopWidth; // roughly adjusts the width of the innerloop
    const innerLoopHeight = 2; // roughly adjust inner loop height (for control points, actual loop will be higher)

    const p1 = new Vector2(-loopWidth / 2, trackTop);
    const p2 = new Vector2(-innerLoopWidth / 2, trackBottom);
    const p3 = new Vector2(innerLoopWidth / 2, innerLoopHeight);
    const p4 = new Vector2(0, loopTop);
    const p5 = new Vector2(-innerLoopWidth / 2, innerLoopHeight);
    const p6 = new Vector2(innerLoopWidth / 2, trackBottom);
    const p7 = new Vector2(loopWidth / 2, trackTop);
    const p1Bounds = createRelativeSpaceBounds(p1, 0.5, 1.5, 2, 3);
    const p2Bounds = createRelativeSpaceBounds(p2, 1, 1, 1 - trackBottom, trackBottom);
    const p3Bounds = createCenteredLimitBounds(p3, 2, 1);
    const p4Bounds = createRelativeSpaceBounds(p4, 1.5, 1.5, 2, 1);
    const p5Bounds = createCenteredLimitBounds(p5, 2, 1);
    const p6Bounds = createRelativeSpaceBounds(p6, 1, 1, 1 - trackBottom, trackBottom);
    const p7Bounds = createRelativeSpaceBounds(p7, 1.5, 0.5, 2, 3);
    return [model.controlPointGroup.createNextElement(p1.x, p1.y, {
      limitBounds: p1Bounds,
      phetioState: false
    }), model.controlPointGroup.createNextElement(p2.x, p2.y, {
      limitBounds: p2Bounds,
      phetioState: false
    }), model.controlPointGroup.createNextElement(p3.x, p3.y, {
      limitBounds: p3Bounds,
      phetioState: false
    }), model.controlPointGroup.createNextElement(p4.x, p4.y, {
      limitBounds: p4Bounds,
      phetioState: false
    }), model.controlPointGroup.createNextElement(p5.x, p5.y, {
      limitBounds: p5Bounds,
      phetioState: false
    }), model.controlPointGroup.createNextElement(p6.x, p6.y, {
      limitBounds: p6Bounds,
      phetioState: false
    }), model.controlPointGroup.createNextElement(p7.x, p7.y, {
      limitBounds: p7Bounds,
      phetioState: false
    })];
  },
  /**
   * Create a track from the provided control points.
   *
   * @param {EnergySkateParkModel} model
   * @param {Array.<ControlPoint>} controlPoints
   * @param {Object} [options]
   * @returns {Track}
   */
  createTrack(model, controlPoints, options) {
    return new Track(model, controlPoints, PARENT_TRACKS, options);
  }
};

// @public @static
PremadeTracks.TrackType = TrackType;
energySkatePark.register('PremadeTracks', PremadeTracks);
export default PremadeTracks;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb3VuZHMyIiwiVmVjdG9yMiIsIkVudW1lcmF0aW9uRGVwcmVjYXRlZCIsIm1lcmdlIiwiZW5lcmd5U2thdGVQYXJrIiwiVHJhY2siLCJQQVJFTlRfVFJBQ0tTIiwiRU5EX0JPVU5EU19XSURUSCIsIkVORF9CT1VORFNfSEVJR0hUIiwiVHJhY2tUeXBlIiwiYnlLZXlzIiwiY3JlYXRlQ2VudGVyZWRMaW1pdEJvdW5kcyIsInBvaW50Iiwid2lkdGgiLCJoZWlnaHQiLCJ4IiwieSIsImNyZWF0ZUJvdHRvbUxpbWl0Qm91bmRzIiwiY3JlYXRlUmVsYXRpdmVTcGFjZUJvdW5kcyIsImxlZnRTcGFjZSIsInJpZ2h0U3BhY2UiLCJ1cFNwYWNlIiwiZG93blNwYWNlIiwiUHJlbWFkZVRyYWNrcyIsImNyZWF0ZVBhcmFib2xhQ29udHJvbFBvaW50cyIsIm1vZGVsIiwib3B0aW9ucyIsInRyYWNrSGVpZ2h0IiwidHJhY2tXaWR0aCIsInAxVmlzaWJsZSIsInAyVmlzaWJsZSIsInAzVmlzaWJsZSIsInAxIiwicDIiLCJwMyIsInAxQm91bmRzIiwicDJCb3VuZHMiLCJwM0JvdW5kcyIsImNvbnRyb2xQb2ludEdyb3VwIiwiY3JlYXRlTmV4dEVsZW1lbnQiLCJ2aXNpYmxlIiwibGltaXRCb3VuZHMiLCJwaGV0aW9TdGF0ZSIsImNyZWF0ZVNsb3BlQ29udHJvbFBvaW50cyIsImNyZWF0ZURvdWJsZVdlbGxDb250cm9sUG9pbnRzIiwidHJhY2tNaWRIZWlnaHQiLCJwNFZpc2libGUiLCJwNVZpc2libGUiLCJwMVVwU3BhY2luZyIsInAxRG93blNwYWNpbmciLCJwM1VwU3BhY2luZyIsInAzRG93blNwYWNpbmciLCJwNVVwU3BhY2luZyIsInA1RG93blNwYWNpbmciLCJwNCIsInA1IiwicDRCb3VuZHMiLCJwNUJvdW5kcyIsImNyZWF0ZUxvb3BDb250cm9sUG9pbnRzIiwiaW5uZXJMb29wV2lkdGgiLCJpbm5lckxvb3BUb3AiLCJ0cmFja1RvcCIsInRyYWNrQm90dG9tIiwibG9vcFRvcCIsImxvb3BXaWR0aCIsImlubmVyTG9vcEhlaWdodCIsInA2IiwicDciLCJwNkJvdW5kcyIsInA3Qm91bmRzIiwiY3JlYXRlVHJhY2siLCJjb250cm9sUG9pbnRzIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJQcmVtYWRlVHJhY2tzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE4LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIEEgY29sbGVjdGlvbiBvZiB0cmFja3MgdXNlZCBpbiB0aGUgRW5lcmd5U2thdGVQYXJrVHJhY2tTZXQgbW9kZWxzIG9mIGVuZXJneS1za2F0ZS1wYXJrIGFuZCBlbmVyZ3ktc2thdGUtcGFyay1iYXNpY3MuXHJcbiAqIFByZW1hZGUgdHJhY2tzIGFyZSBub3QgZHJhZ2dhYmxlIGJ1dCB0aGV5IGNhbiBzb21ldGltZXMgYmUgXCJjb25maWd1cmFibGVcIiwgbWVhbmluZyB0aGF0IGNvbnRyb2wgcG9pbnRzIGNhbiBiZSBtb3ZlZC5cclxuICogRm9yIGNvbmZpZ3VyYWJsZSBwcmVtYWRlIHRyYWNrcywgdGhlIGNvbnRyb2wgcG9pbnRzIGNhbiBvbmx5IGJlIGRyYWdnZWQgd2l0aGluIGEgc21hbGxlciBzZXQgb2YgYm91bmRzLiBUaGVzZVxyXG4gKiBib3VuZHMgYXJlIHNwZWNpZmllZCBmb3IgYWxsIHByZW1hZGUgdHJhY2tzLCBidXQgd2lsbCBvbmx5IGFwcGx5IHRvIHRoZSB0cmFjayBpZiB0aGUgbW9kZWwgdHJhY2tzIGFyZSBcImNvbmZpZ3VyYWJsZVwiLlxyXG4gKlxyXG4gKiBQcmVtYWRlIHRyYWNrcyBhcmUgYWxsIGlzb2xhdGVkIHNvIHRoZXkgaGF2ZSBubyBcInBhcmVudFwiIHRyYWNrcywgc2VlIFRyYWNrLmpzIGZvciBkZWZpbml0aW9uIG9mIHBhcmVudC5cclxuICpcclxuICogQGF1dGhvciBKZXNzZSBHcmVlbmJlcmcgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IEJvdW5kczIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL0JvdW5kczIuanMnO1xyXG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVmVjdG9yMi5qcyc7XHJcbmltcG9ydCBFbnVtZXJhdGlvbkRlcHJlY2F0ZWQgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL0VudW1lcmF0aW9uRGVwcmVjYXRlZC5qcyc7XHJcbmltcG9ydCBtZXJnZSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvbWVyZ2UuanMnO1xyXG5pbXBvcnQgZW5lcmd5U2thdGVQYXJrIGZyb20gJy4uLy4uL2VuZXJneVNrYXRlUGFyay5qcyc7XHJcbmltcG9ydCBUcmFjayBmcm9tICcuL1RyYWNrLmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBQQVJFTlRfVFJBQ0tTID0gW107XHJcblxyXG4vLyBsaW1pdGluZyBib3VuZHMgZm9yIGRyYWdnaW5nIGNvbnRyb2wgcG9pbnRzXHJcbmNvbnN0IEVORF9CT1VORFNfV0lEVEggPSAyLjU7XHJcbmNvbnN0IEVORF9CT1VORFNfSEVJR0hUID0gNDtcclxuXHJcbi8vIHRoZSBzdXBwb3J0ZWQgcHJlbWFkZSB0cmFja3MsIHVzZWQgaW4gRW5lZ3lTa2F0ZVBhcmtUcmFja1NldE1vZGVsc1xyXG5jb25zdCBUcmFja1R5cGUgPSBFbnVtZXJhdGlvbkRlcHJlY2F0ZWQuYnlLZXlzKCBbICdQQVJBQk9MQScsICdTTE9QRScsICdET1VCTEVfV0VMTCcsICdMT09QJyBdICk7XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGEgc2V0IG9mIGxpbWl0aW5nIGRyYWcgYm91bmRzIGZvciBhIGNvbnRyb2wgcG9pbnQgb2YgYSBwcmVtYWRlIHRyYWNrLiBUaGUgY29udHJvbCBwb2ludCBpcyBhdCB0aGVcclxuICogQ0VOVEVSIG9mIHRoZSBsaW1pdGluZyBib3VuZHMuXHJcbiAqXHJcbiAqIEBwYXJhbSAge1ZlY3RvcjJ9IHBvaW50IC0gcG9zaXRpb24gb2YgY29udHJvbCBwb2ludCwgQ0VOVEVSIG9mIHRoZSBib3VuZHNcclxuICogQHBhcmFtICB7bnVtYmVyfSB3aWR0aFxyXG4gKiBAcGFyYW0gIHtudW1iZXJ9IGhlaWdodFxyXG4gKiBAcmV0dXJucyB7Qm91bmRzMn1cclxuICovXHJcbmNvbnN0IGNyZWF0ZUNlbnRlcmVkTGltaXRCb3VuZHMgPSAoIHBvaW50LCB3aWR0aCwgaGVpZ2h0ICkgPT4ge1xyXG4gIHJldHVybiBuZXcgQm91bmRzMiggcG9pbnQueCAtIHdpZHRoIC8gMiwgcG9pbnQueSAtIGhlaWdodCAvIDIsIHBvaW50LnggKyB3aWR0aCAvIDIsIHBvaW50LnkgKyBoZWlnaHQgLyAyICk7XHJcbn07XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGEgc2V0IG9mIGxpbWl0aW5nIGRyYWcgYm91bmRzIGZvciBhIGNvbnRyb2wgcG9pbnQgb2YgYSBwcmVtYWRlIHRyYWNrLiBUaGUgY29udHJvbCBwb2ludCBpcyBhdCB0aGUgQk9UVE9NXHJcbiAqIENFTlRFUiBvZiB0aGUgbGltaXRpbmcgYm91bmRzLlxyXG4gKlxyXG4gKiBAcGFyYW0gIHtWZWN0b3IyfSBwb2ludCAtIHBvc2l0aW9uIG9mIGNvbnRyb2wgcG9pbnQsIEJPVFRPTSBDRU5URVIgb2YgdGhlIGJvdW5kc1xyXG4gKiBAcGFyYW0gIHtudW1iZXJ9IHdpZHRoXHJcbiAqIEBwYXJhbSAge251bWJlcn0gaGVpZ2h0XHJcbiAqIEByZXR1cm5zIHtCb3VuZHMyfVxyXG4gKi9cclxuY29uc3QgY3JlYXRlQm90dG9tTGltaXRCb3VuZHMgPSAoIHBvaW50LCB3aWR0aCwgaGVpZ2h0ICkgPT4ge1xyXG4gIHJldHVybiBuZXcgQm91bmRzMiggcG9pbnQueCAtIHdpZHRoIC8gMiwgcG9pbnQueSwgcG9pbnQueCArIHdpZHRoIC8gMiwgcG9pbnQueSArIGhlaWdodCApO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSBhIHNldCBvZiBsaW1pdGluZyBkcmFnIGJvdW5kcyBmb3IgYSBjb250cm9sIHBvaW50LiBUaGUgc3BhY2luZyBhcmdzIGFyZSByZWxhdGl2ZSB0byBwcm92aWRlZCBwb2ludCxcclxuICogd2hpY2ggaXMgcHJlc3VtYWJseSB0aGUgcG9zaXRpb24gb2YgdGhlIGNvbnRyb2wgcG9pbnQuXHJcbiAqXHJcbiAqIEBwYXJhbSB7VmVjdG9yMn0gcG9pbnQgLSBzcGFjaW5nIGluIGVhY2ggZGlyZWN0aW9uIHJlbGF0aXZlIHRvIHRoaXMgcG9pbnRcclxuICogQHBhcmFtIHtudW1iZXJ9IGxlZnRTcGFjZSAtIHNwYWNlIHRvIHRoZSBsZWZ0IG9mIHBvaW50IGZvciBib3VuZHNcclxuICogQHBhcmFtIHtudW1iZXJ9IHJpZ2h0U3BhY2UgLSBzcGFjZSB0byB0aGUgcmlnaHQgb2YgcG9pbnQgZm9yIGJvdW5kc1xyXG4gKiBAcGFyYW0ge251bWJlcn0gdXBTcGFjZSAtIHNwYWNlIHRvIHRoZSB1cCBvZiBwb2ludCBmb3IgYm91bmRzXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBkb3duU3BhY2UgLSBzcGFjZSB0byB0aGUgZG93biBvZiBwb2ludCBmb3IgYm91bmRzXHJcbiAqIEByZXR1cm5zIHtCb3VuZHMyfVxyXG4gKi9cclxuY29uc3QgY3JlYXRlUmVsYXRpdmVTcGFjZUJvdW5kcyA9ICggcG9pbnQsIGxlZnRTcGFjZSwgcmlnaHRTcGFjZSwgdXBTcGFjZSwgZG93blNwYWNlICkgPT4ge1xyXG4gIHJldHVybiBuZXcgQm91bmRzMiggcG9pbnQueCAtIGxlZnRTcGFjZSwgcG9pbnQueSAtIGRvd25TcGFjZSwgcG9pbnQueCArIHJpZ2h0U3BhY2UsIHBvaW50LnkgKyB1cFNwYWNlICk7XHJcbn07XHJcblxyXG5jb25zdCBQcmVtYWRlVHJhY2tzID0ge1xyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGUgYSBzZXQgb2YgY29udHJvbCBwb2ludHMgdGhhdCBjcmVhdGUgYSBwYXJhYm9sYSBzaGFwZWQgdHJhY2suXHJcbiAgICogQHBhcmFtIHtFbmVyZ3lTa2F0ZVBhcmtNb2RlbH0gbW9kZWxcclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXHJcbiAgICogQHJldHVybnMge0NvbnRyb2xQb2ludFtdfVxyXG4gICAqL1xyXG4gIGNyZWF0ZVBhcmFib2xhQ29udHJvbFBvaW50czogKCBtb2RlbCwgb3B0aW9ucyApID0+IHtcclxuICAgIG9wdGlvbnMgPSBtZXJnZSgge1xyXG4gICAgICB0cmFja0hlaWdodDogNiwgLy8gbGFyZ2VzdCBoZWlnaHQgZm9yIHRoZSBwYXJhYm9sYVxyXG4gICAgICB0cmFja1dpZHRoOiA4LCAvLyB3aWR0aCBmcm9tIHRoZSBsZWZ0IG1vc3QgY29udHJvbCBwb2ludCB0byB0aGUgcmlnaHQgbW9zdCBjb250cm9sIHBvaW50XHJcblxyXG4gICAgICAvLyB7Ym9vbGVhbn0gLSBpbmRpdmlkdWFsIHBvaW50cyBtYXkgb3IgbWF5IG5vdCBiZSB2aXNpYmxlXHJcbiAgICAgIHAxVmlzaWJsZTogdHJ1ZSxcclxuICAgICAgcDJWaXNpYmxlOiB0cnVlLFxyXG4gICAgICBwM1Zpc2libGU6IHRydWVcclxuICAgIH0sIG9wdGlvbnMgKTtcclxuXHJcbiAgICBjb25zdCBwMSA9IG5ldyBWZWN0b3IyKCAtb3B0aW9ucy50cmFja1dpZHRoIC8gMiwgb3B0aW9ucy50cmFja0hlaWdodCApO1xyXG4gICAgY29uc3QgcDIgPSBuZXcgVmVjdG9yMiggMCwgMCApO1xyXG4gICAgY29uc3QgcDMgPSBuZXcgVmVjdG9yMiggb3B0aW9ucy50cmFja1dpZHRoIC8gMiwgb3B0aW9ucy50cmFja0hlaWdodCApO1xyXG5cclxuICAgIGNvbnN0IHAxQm91bmRzID0gY3JlYXRlQ2VudGVyZWRMaW1pdEJvdW5kcyggcDEsIEVORF9CT1VORFNfV0lEVEgsIEVORF9CT1VORFNfSEVJR0hUICk7XHJcbiAgICBjb25zdCBwMkJvdW5kcyA9IGNyZWF0ZUJvdHRvbUxpbWl0Qm91bmRzKCBwMiwgNSwgMyApO1xyXG4gICAgY29uc3QgcDNCb3VuZHMgPSBjcmVhdGVDZW50ZXJlZExpbWl0Qm91bmRzKCBwMywgRU5EX0JPVU5EU19XSURUSCwgRU5EX0JPVU5EU19IRUlHSFQgKTtcclxuXHJcbiAgICByZXR1cm4gW1xyXG4gICAgICBtb2RlbC5jb250cm9sUG9pbnRHcm91cC5jcmVhdGVOZXh0RWxlbWVudCggcDEueCwgcDEueSwge1xyXG4gICAgICAgIHZpc2libGU6IG9wdGlvbnMucDFWaXNpYmxlLFxyXG4gICAgICAgIGxpbWl0Qm91bmRzOiBwMUJvdW5kcyxcclxuICAgICAgICBwaGV0aW9TdGF0ZTogZmFsc2VcclxuICAgICAgfSApLFxyXG4gICAgICBtb2RlbC5jb250cm9sUG9pbnRHcm91cC5jcmVhdGVOZXh0RWxlbWVudCggcDIueCwgcDIueSwge1xyXG4gICAgICAgIHZpc2libGU6IG9wdGlvbnMucDJWaXNpYmxlLFxyXG4gICAgICAgIGxpbWl0Qm91bmRzOiBwMkJvdW5kcyxcclxuICAgICAgICBwaGV0aW9TdGF0ZTogZmFsc2VcclxuICAgICAgfSApLFxyXG4gICAgICBtb2RlbC5jb250cm9sUG9pbnRHcm91cC5jcmVhdGVOZXh0RWxlbWVudCggcDMueCwgcDMueSwge1xyXG4gICAgICAgIHZpc2libGU6IG9wdGlvbnMucDNWaXNpYmxlLFxyXG4gICAgICAgIGxpbWl0Qm91bmRzOiBwM0JvdW5kcyxcclxuICAgICAgICBwaGV0aW9TdGF0ZTogZmFsc2VcclxuICAgICAgfSApXHJcbiAgICBdO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZSBhIHNldCBvZiBjb250cm9sIHBvaW50cyB3aGljaCBjcmVhdGUgYSBzbG9wZSBzaGFwZWQgdHJhY2ssIHRvdWNoaW5nIHRoZSBncm91bmQgb24gdGhlIHJpZ2h0IHNpZGUuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0VuZXJneVNrYXRlUGFya01vZGVsfSBtb2RlbFxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cclxuICAgKiBAcmV0dXJucyB7Q29udHJvbFBvaW50W119XHJcbiAgICovXHJcbiAgY3JlYXRlU2xvcGVDb250cm9sUG9pbnRzOiAoIG1vZGVsLCBvcHRpb25zICkgPT4ge1xyXG5cclxuICAgIG9wdGlvbnMgPSBtZXJnZSgge1xyXG4gICAgICB0cmFja1dpZHRoOiA2LFxyXG4gICAgICB0cmFja0hlaWdodDogNlxyXG4gICAgfSwgb3B0aW9ucyApO1xyXG5cclxuICAgIGNvbnN0IHAxID0gbmV3IFZlY3RvcjIoIC00LCBvcHRpb25zLnRyYWNrSGVpZ2h0ICk7XHJcbiAgICBjb25zdCBwMiA9IG5ldyBWZWN0b3IyKCAtMiwgMS4yICk7XHJcbiAgICBjb25zdCBwMyA9IG5ldyBWZWN0b3IyKCAtNCArIG9wdGlvbnMudHJhY2tXaWR0aCwgMCApO1xyXG5cclxuICAgIGNvbnN0IHAxQm91bmRzID0gY3JlYXRlQ2VudGVyZWRMaW1pdEJvdW5kcyggcDEsIEVORF9CT1VORFNfV0lEVEgsIEVORF9CT1VORFNfSEVJR0hUICk7XHJcblxyXG4gICAgLy8gY3VzdG9tIHJlbGF0aXZlIGJvdW5kcyBzbyB0aGF0IGJvdW5kcyBmYWxsIGFsb25nIHRoZSBtZXRlclxyXG4gICAgY29uc3QgcDJCb3VuZHMgPSBjcmVhdGVSZWxhdGl2ZVNwYWNlQm91bmRzKCBwMiwgMC41LCAyLjUsIDEuOCwgMC4yICk7XHJcbiAgICBjb25zdCBwM0JvdW5kcyA9IGNyZWF0ZVJlbGF0aXZlU3BhY2VCb3VuZHMoIHAzLCAwLjUsIDIuNSwgMywgMCApO1xyXG5cclxuICAgIHJldHVybiBbXHJcbiAgICAgIG1vZGVsLmNvbnRyb2xQb2ludEdyb3VwLmNyZWF0ZU5leHRFbGVtZW50KCBwMS54LCBwMS55LCB7XHJcbiAgICAgICAgbGltaXRCb3VuZHM6IHAxQm91bmRzLFxyXG4gICAgICAgIHBoZXRpb1N0YXRlOiBmYWxzZVxyXG4gICAgICB9ICksXHJcbiAgICAgIG1vZGVsLmNvbnRyb2xQb2ludEdyb3VwLmNyZWF0ZU5leHRFbGVtZW50KCBwMi54LCBwMi55LCB7XHJcbiAgICAgICAgbGltaXRCb3VuZHM6IHAyQm91bmRzLFxyXG4gICAgICAgIHBoZXRpb1N0YXRlOiBmYWxzZVxyXG4gICAgICB9ICksXHJcbiAgICAgIG1vZGVsLmNvbnRyb2xQb2ludEdyb3VwLmNyZWF0ZU5leHRFbGVtZW50KCBwMy54LCBwMy55LCB7XHJcbiAgICAgICAgbGltaXRCb3VuZHM6IHAzQm91bmRzLFxyXG4gICAgICAgIHBoZXRpb1N0YXRlOiBmYWxzZVxyXG4gICAgICB9IClcclxuICAgIF07XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIGEgc2V0IG9mIGNvbnRyb2wgcG9pbnRzIHRoYXQgd2lsbCBjcmVhdGUgYSBkb3VibGUgd2VsbCB0cmFjay4gRm9yIHRoZSBkb3VibGUgd2VsbCwgbW92ZSB0aGUgbGVmdCB3ZWxsIHVwXHJcbiAgICogYSBidXQgc2luY2UgdGhlIGludGVycG9sYXRpb24gbW92ZXMgaXQgZG93biBieSB0aGF0IG11Y2ggYW5kIHdlIGRvbid0IHdhbnQgdGhlIHNrYXRlciB0byBnbyBiZWxvdyBncm91bmRcclxuICAgKiB3aGlsZSBvbiB0aGUgdHJhY2suIE51bWJlcnMgZGV0ZXJtaW5lZCBieSB0cmlhbCBhbmQgZXJyb3IuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0VuZXJneVNrYXRlUGFya01vZGVsfSBtb2RlbFxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cclxuICAgKiBAcmV0dXJucyB7Q29udHJvbFBvaW50W119XHJcbiAgICovXHJcbiAgY3JlYXRlRG91YmxlV2VsbENvbnRyb2xQb2ludHM6ICggbW9kZWwsIG9wdGlvbnMgKSA9PiB7XHJcbiAgICBvcHRpb25zID0gbWVyZ2UoIHtcclxuICAgICAgdHJhY2tIZWlnaHQ6IDUsIC8vIGxhcmdlc3QgaGVpZ2h0IGZvciB0aGUgd2VsbFxyXG4gICAgICB0cmFja1dpZHRoOiA4LCAvLyB3aWR0aCBmcm9tIHRoZSBsZWZ0IG1vc3QgY29udHJvbCBwb2ludCB0byB0aGUgcmlnaHQgbW9zdCBjb250cm9sIHBvaW50XHJcbiAgICAgIHRyYWNrTWlkSGVpZ2h0OiAyLCAvLyBoZWlnaHQgb2YgdGhlIG1pZCBjb250cm9sIHBvaW50IHRoYXQgY3JlYXRlcyB0aGUgZG91YmxlIHdlbGxcclxuXHJcbiAgICAgIC8vIHtib29sZWFufSAtIGluZGl2aWR1YWwgcG9pbnRzIG1heSBvciBtYXkgbm90IGJlIHZpc2libGVcclxuICAgICAgcDFWaXNpYmxlOiB0cnVlLFxyXG4gICAgICBwMlZpc2libGU6IHRydWUsXHJcbiAgICAgIHAzVmlzaWJsZTogdHJ1ZSxcclxuICAgICAgcDRWaXNpYmxlOiB0cnVlLFxyXG4gICAgICBwNVZpc2libGU6IHRydWUsXHJcblxyXG4gICAgICAvLyBzcGFjaW5nIGZvciBkcmFnIGJvdW5kcyBvZiB0aGUgZmlyc3QgKGxlZnQpIGNvbnRyb2wgcG9pbnQgZm9yIGNyZWF0ZVJlbGF0aXZlU3BhY2VCb3VuZHNcclxuICAgICAgcDFVcFNwYWNpbmc6IDMsXHJcbiAgICAgIHAxRG93blNwYWNpbmc6IDEsXHJcblxyXG4gICAgICAvLyBTcGFjaW5nIGZvciBkcmFnIGJvdW5kcyBvZiB0aGUgdGhpcmQgKGNlbnRlcikgY29udHJvbCBwb2ludCBmb3IgY3JlYXRlUmVsYXRpdmVTcGFjZUJvdW5kc1xyXG4gICAgICBwM1VwU3BhY2luZzogNCxcclxuICAgICAgcDNEb3duU3BhY2luZzogMixcclxuXHJcbiAgICAgIC8vIHNwYWNpbmcgZm9yIHRoZSBkcmFnIGJvdW5kcyBvZiB0aGUgZmlmdGggKHJpZ2h0KSBjb250cm9sIHBvaW50IGZvciBjcmVhdGVSZWxhdGl2ZVNwYWNlQm91bmRzXHJcbiAgICAgIHA1VXBTcGFjaW5nOiAzLFxyXG4gICAgICBwNURvd25TcGFjaW5nOiAxXHJcblxyXG4gICAgfSwgb3B0aW9ucyApO1xyXG5cclxuICAgIGNvbnN0IHAxID0gbmV3IFZlY3RvcjIoIC1vcHRpb25zLnRyYWNrV2lkdGggLyAyLCBvcHRpb25zLnRyYWNrSGVpZ2h0ICk7XHJcbiAgICBjb25zdCBwMiA9IG5ldyBWZWN0b3IyKCAtMiwgMC4wMTY2MDE1ICk7XHJcbiAgICBjb25zdCBwMyA9IG5ldyBWZWN0b3IyKCAwLCBvcHRpb25zLnRyYWNrTWlkSGVpZ2h0ICk7XHJcbiAgICBjb25zdCBwNCA9IG5ldyBWZWN0b3IyKCAyLCAxICk7XHJcbiAgICBjb25zdCBwNSA9IG5ldyBWZWN0b3IyKCBvcHRpb25zLnRyYWNrV2lkdGggLyAyLCBvcHRpb25zLnRyYWNrSGVpZ2h0ICk7XHJcblxyXG4gICAgY29uc3QgcDFCb3VuZHMgPSBjcmVhdGVSZWxhdGl2ZVNwYWNlQm91bmRzKCBwMSwgMS4wLCAxLjUsIG9wdGlvbnMucDFVcFNwYWNpbmcsIG9wdGlvbnMucDFEb3duU3BhY2luZyApO1xyXG4gICAgY29uc3QgcDJCb3VuZHMgPSBjcmVhdGVSZWxhdGl2ZVNwYWNlQm91bmRzKCBwMiwgMS41LCAwLjUsIDMsIDAgKTtcclxuICAgIGNvbnN0IHAzQm91bmRzID0gY3JlYXRlUmVsYXRpdmVTcGFjZUJvdW5kcyggcDMsIDEsIDEsIG9wdGlvbnMucDNVcFNwYWNpbmcsIG9wdGlvbnMucDNEb3duU3BhY2luZyApO1xyXG4gICAgY29uc3QgcDRCb3VuZHMgPSBjcmVhdGVSZWxhdGl2ZVNwYWNlQm91bmRzKCBwNCwgMC41LCAxLjUsIDIsIDEgKTtcclxuICAgIGNvbnN0IHA1Qm91bmRzID0gY3JlYXRlUmVsYXRpdmVTcGFjZUJvdW5kcyggcDUsIDEuNSwgMS4wLCBvcHRpb25zLnA1VXBTcGFjaW5nLCBvcHRpb25zLnA1RG93blNwYWNpbmcgKTtcclxuXHJcbiAgICByZXR1cm4gW1xyXG4gICAgICBtb2RlbC5jb250cm9sUG9pbnRHcm91cC5jcmVhdGVOZXh0RWxlbWVudCggcDEueCwgcDEueSwge1xyXG4gICAgICAgIGxpbWl0Qm91bmRzOiBwMUJvdW5kcyxcclxuICAgICAgICB2aXNpYmxlOiBvcHRpb25zLnAxVmlzaWJsZSxcclxuICAgICAgICBwaGV0aW9TdGF0ZTogZmFsc2VcclxuICAgICAgfSApLFxyXG4gICAgICBtb2RlbC5jb250cm9sUG9pbnRHcm91cC5jcmVhdGVOZXh0RWxlbWVudCggcDIueCwgcDIueSwge1xyXG4gICAgICAgIGxpbWl0Qm91bmRzOiBwMkJvdW5kcyxcclxuICAgICAgICB2aXNpYmxlOiBvcHRpb25zLnAyVmlzaWJsZSxcclxuICAgICAgICBwaGV0aW9TdGF0ZTogZmFsc2VcclxuICAgICAgfSApLFxyXG4gICAgICBtb2RlbC5jb250cm9sUG9pbnRHcm91cC5jcmVhdGVOZXh0RWxlbWVudCggcDMueCwgcDMueSwge1xyXG4gICAgICAgIGxpbWl0Qm91bmRzOiBwM0JvdW5kcyxcclxuICAgICAgICB2aXNpYmxlOiBvcHRpb25zLnAzVmlzaWJsZSxcclxuICAgICAgICBwaGV0aW9TdGF0ZTogZmFsc2VcclxuICAgICAgfSApLFxyXG4gICAgICBtb2RlbC5jb250cm9sUG9pbnRHcm91cC5jcmVhdGVOZXh0RWxlbWVudCggcDQueCwgcDQueSwge1xyXG4gICAgICAgIGxpbWl0Qm91bmRzOiBwNEJvdW5kcyxcclxuICAgICAgICB2aXNpYmxlOiBvcHRpb25zLnA0VmlzaWJsZSxcclxuICAgICAgICBwaGV0aW9TdGF0ZTogZmFsc2VcclxuICAgICAgfSApLFxyXG4gICAgICBtb2RlbC5jb250cm9sUG9pbnRHcm91cC5jcmVhdGVOZXh0RWxlbWVudCggcDUueCwgcDUueSwge1xyXG4gICAgICAgIGxpbWl0Qm91bmRzOiBwNUJvdW5kcyxcclxuICAgICAgICB2aXNpYmxlOiBvcHRpb25zLnA1VmlzaWJsZSxcclxuICAgICAgICBwaGV0aW9TdGF0ZTogZmFsc2VcclxuICAgICAgfSApXHJcbiAgICBdO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZSBhIHNldCBvZiBjb250cm9sIHBvaW50cyB0aGF0IHdpbGwgZm9ybSBhIHRyYWNrIHRoYXQgdGFrZXMgdGhlIHNoYXBlIG9mIGEgbG9vcC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RW5lcmd5U2thdGVQYXJrTW9kZWx9IG1vZGVsXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxyXG4gICAqIEByZXR1cm5zIHtBcnJheS48Q29udHJvbFBvaW50Pn1cclxuICAgKi9cclxuICBjcmVhdGVMb29wQ29udHJvbFBvaW50czogKCBtb2RlbCwgb3B0aW9ucyApID0+IHtcclxuICAgIG9wdGlvbnMgPSBtZXJnZSgge1xyXG4gICAgICB0cmFja1dpZHRoOiA5LFxyXG4gICAgICB0cmFja0hlaWdodDogNixcclxuICAgICAgaW5uZXJMb29wV2lkdGg6IDMsXHJcbiAgICAgIGlubmVyTG9vcFRvcDogNFxyXG4gICAgfSwgb3B0aW9ucyApO1xyXG5cclxuICAgIC8vIHRvcCBvZiB0aGUgbGVmdCBhbmQgcmlnaHQgZW5kcG9pbnRzIG9mIHRoZSBsb29wLCBoaWdoZXIgdGhhbiBsb29wVG9wIHNvIHRoYXQgaXQgaXMgZWFzeSBmb3IgdGhlIHNrYXRlciB0byBnb1xyXG4gICAgLy8gYWxsIHRoZSB3YXkgYXJvdW5kIHRoZSBsb29wXHJcbiAgICBjb25zdCB0cmFja1RvcCA9IG9wdGlvbnMudHJhY2tIZWlnaHQ7XHJcblxyXG4gICAgY29uc3QgdHJhY2tCb3R0b20gPSAwLjM7IC8vIGJvdHRvbSBwb2ludHMsIHNvIHRoYXQgdGhlIHNrYXRlciBkb2Vzbid0IGdvIGJlbG93IHkgPSAwXHJcbiAgICBjb25zdCBsb29wVG9wID0gb3B0aW9ucy5pbm5lckxvb3BUb3A7IC8vIGFkanVzdCB0byBtYWtlIHRoZSBsb29wIHRvcCBwb2ludCBoaWdoZXIgb3IgbG93ZXJcclxuICAgIGNvbnN0IGxvb3BXaWR0aCA9IG9wdGlvbnMudHJhY2tXaWR0aDsgLy8gYWRqdXN0IHRvIG1ha2UgdGhlIGxvb3AgbW9yZSBvciBsZXNzIHdpZGVcclxuICAgIGNvbnN0IGlubmVyTG9vcFdpZHRoID0gb3B0aW9ucy5pbm5lckxvb3BXaWR0aDsgLy8gcm91Z2hseSBhZGp1c3RzIHRoZSB3aWR0aCBvZiB0aGUgaW5uZXJsb29wXHJcbiAgICBjb25zdCBpbm5lckxvb3BIZWlnaHQgPSAyOyAvLyByb3VnaGx5IGFkanVzdCBpbm5lciBsb29wIGhlaWdodCAoZm9yIGNvbnRyb2wgcG9pbnRzLCBhY3R1YWwgbG9vcCB3aWxsIGJlIGhpZ2hlcilcclxuXHJcbiAgICBjb25zdCBwMSA9IG5ldyBWZWN0b3IyKCAtbG9vcFdpZHRoIC8gMiwgdHJhY2tUb3AgKTtcclxuICAgIGNvbnN0IHAyID0gbmV3IFZlY3RvcjIoIC1pbm5lckxvb3BXaWR0aCAvIDIsIHRyYWNrQm90dG9tICk7XHJcbiAgICBjb25zdCBwMyA9IG5ldyBWZWN0b3IyKCBpbm5lckxvb3BXaWR0aCAvIDIsIGlubmVyTG9vcEhlaWdodCApO1xyXG4gICAgY29uc3QgcDQgPSBuZXcgVmVjdG9yMiggMCwgbG9vcFRvcCApO1xyXG4gICAgY29uc3QgcDUgPSBuZXcgVmVjdG9yMiggLWlubmVyTG9vcFdpZHRoIC8gMiwgaW5uZXJMb29wSGVpZ2h0ICk7XHJcbiAgICBjb25zdCBwNiA9IG5ldyBWZWN0b3IyKCBpbm5lckxvb3BXaWR0aCAvIDIsIHRyYWNrQm90dG9tICk7XHJcbiAgICBjb25zdCBwNyA9IG5ldyBWZWN0b3IyKCBsb29wV2lkdGggLyAyLCB0cmFja1RvcCApO1xyXG5cclxuICAgIGNvbnN0IHAxQm91bmRzID0gY3JlYXRlUmVsYXRpdmVTcGFjZUJvdW5kcyggcDEsIDAuNSwgMS41LCAyLCAzICk7XHJcbiAgICBjb25zdCBwMkJvdW5kcyA9IGNyZWF0ZVJlbGF0aXZlU3BhY2VCb3VuZHMoIHAyLCAxLCAxLCAxIC0gdHJhY2tCb3R0b20sIHRyYWNrQm90dG9tICk7XHJcbiAgICBjb25zdCBwM0JvdW5kcyA9IGNyZWF0ZUNlbnRlcmVkTGltaXRCb3VuZHMoIHAzLCAyLCAxICk7XHJcbiAgICBjb25zdCBwNEJvdW5kcyA9IGNyZWF0ZVJlbGF0aXZlU3BhY2VCb3VuZHMoIHA0LCAxLjUsIDEuNSwgMiwgMSApO1xyXG4gICAgY29uc3QgcDVCb3VuZHMgPSBjcmVhdGVDZW50ZXJlZExpbWl0Qm91bmRzKCBwNSwgMiwgMSApO1xyXG4gICAgY29uc3QgcDZCb3VuZHMgPSBjcmVhdGVSZWxhdGl2ZVNwYWNlQm91bmRzKCBwNiwgMSwgMSwgMSAtIHRyYWNrQm90dG9tLCB0cmFja0JvdHRvbSApO1xyXG4gICAgY29uc3QgcDdCb3VuZHMgPSBjcmVhdGVSZWxhdGl2ZVNwYWNlQm91bmRzKCBwNywgMS41LCAwLjUsIDIsIDMgKTtcclxuXHJcbiAgICByZXR1cm4gW1xyXG4gICAgICBtb2RlbC5jb250cm9sUG9pbnRHcm91cC5jcmVhdGVOZXh0RWxlbWVudCggcDEueCwgcDEueSwge1xyXG4gICAgICAgIGxpbWl0Qm91bmRzOiBwMUJvdW5kcyxcclxuICAgICAgICBwaGV0aW9TdGF0ZTogZmFsc2VcclxuICAgICAgfSApLFxyXG4gICAgICBtb2RlbC5jb250cm9sUG9pbnRHcm91cC5jcmVhdGVOZXh0RWxlbWVudCggcDIueCwgcDIueSwge1xyXG4gICAgICAgIGxpbWl0Qm91bmRzOiBwMkJvdW5kcyxcclxuICAgICAgICBwaGV0aW9TdGF0ZTogZmFsc2VcclxuICAgICAgfSApLFxyXG4gICAgICBtb2RlbC5jb250cm9sUG9pbnRHcm91cC5jcmVhdGVOZXh0RWxlbWVudCggcDMueCwgcDMueSwge1xyXG4gICAgICAgIGxpbWl0Qm91bmRzOiBwM0JvdW5kcyxcclxuICAgICAgICBwaGV0aW9TdGF0ZTogZmFsc2VcclxuICAgICAgfSApLFxyXG4gICAgICBtb2RlbC5jb250cm9sUG9pbnRHcm91cC5jcmVhdGVOZXh0RWxlbWVudCggcDQueCwgcDQueSwge1xyXG4gICAgICAgIGxpbWl0Qm91bmRzOiBwNEJvdW5kcyxcclxuICAgICAgICBwaGV0aW9TdGF0ZTogZmFsc2VcclxuICAgICAgfSApLFxyXG4gICAgICBtb2RlbC5jb250cm9sUG9pbnRHcm91cC5jcmVhdGVOZXh0RWxlbWVudCggcDUueCwgcDUueSwge1xyXG4gICAgICAgIGxpbWl0Qm91bmRzOiBwNUJvdW5kcyxcclxuICAgICAgICBwaGV0aW9TdGF0ZTogZmFsc2VcclxuICAgICAgfSApLFxyXG4gICAgICBtb2RlbC5jb250cm9sUG9pbnRHcm91cC5jcmVhdGVOZXh0RWxlbWVudCggcDYueCwgcDYueSwge1xyXG4gICAgICAgIGxpbWl0Qm91bmRzOiBwNkJvdW5kcyxcclxuICAgICAgICBwaGV0aW9TdGF0ZTogZmFsc2VcclxuICAgICAgfSApLFxyXG4gICAgICBtb2RlbC5jb250cm9sUG9pbnRHcm91cC5jcmVhdGVOZXh0RWxlbWVudCggcDcueCwgcDcueSwge1xyXG4gICAgICAgIGxpbWl0Qm91bmRzOiBwN0JvdW5kcyxcclxuICAgICAgICBwaGV0aW9TdGF0ZTogZmFsc2VcclxuICAgICAgfSApXHJcbiAgICBdO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZSBhIHRyYWNrIGZyb20gdGhlIHByb3ZpZGVkIGNvbnRyb2wgcG9pbnRzLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtFbmVyZ3lTa2F0ZVBhcmtNb2RlbH0gbW9kZWxcclxuICAgKiBAcGFyYW0ge0FycmF5LjxDb250cm9sUG9pbnQ+fSBjb250cm9sUG9pbnRzXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxyXG4gICAqIEByZXR1cm5zIHtUcmFja31cclxuICAgKi9cclxuICBjcmVhdGVUcmFjayggbW9kZWwsIGNvbnRyb2xQb2ludHMsIG9wdGlvbnMgKSB7XHJcbiAgICByZXR1cm4gbmV3IFRyYWNrKCBtb2RlbCwgY29udHJvbFBvaW50cywgUEFSRU5UX1RSQUNLUywgb3B0aW9ucyApO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIEBwdWJsaWMgQHN0YXRpY1xyXG5QcmVtYWRlVHJhY2tzLlRyYWNrVHlwZSA9IFRyYWNrVHlwZTtcclxuXHJcbmVuZXJneVNrYXRlUGFyay5yZWdpc3RlciggJ1ByZW1hZGVUcmFja3MnLCBQcmVtYWRlVHJhY2tzICk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQcmVtYWRlVHJhY2tzOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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