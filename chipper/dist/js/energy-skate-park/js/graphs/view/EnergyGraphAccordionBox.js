// Copyright 2019-2023, University of Colorado Boulder

/**
 * The accordion box in the "Graphs" screen that contains the energy graphs, as well as controls for
 * controlling the data.
 *
 * @author Jesse Greenberg (PhET Interactive Simulations)
 */

import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import Dimension2 from '../../../../dot/js/Dimension2.js';
import merge from '../../../../phet-core/js/merge.js';
import EraserButton from '../../../../scenery-phet/js/buttons/EraserButton.js';
import MagnifyingGlassZoomButtonGroup from '../../../../scenery-phet/js/MagnifyingGlassZoomButtonGroup.js';
import PhetColorScheme from '../../../../scenery-phet/js/PhetColorScheme.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { AlignGroup, Circle, HBox, Node, Text, VBox } from '../../../../scenery/js/imports.js';
import ABSwitch from '../../../../sun/js/ABSwitch.js';
import AccordionBox from '../../../../sun/js/AccordionBox.js';
import VerticalCheckboxGroup from '../../../../sun/js/VerticalCheckboxGroup.js';
import EnergySkateParkConstants from '../../common/EnergySkateParkConstants.js';
import EnergySkateParkColorScheme from '../../common/view/EnergySkateParkColorScheme.js';
import energySkatePark from '../../energySkatePark.js';
import EnergySkateParkStrings from '../../EnergySkateParkStrings.js';
import GraphsConstants from '../GraphsConstants.js';
import GraphsModel from '../model/GraphsModel.js';
import EnergyChart from './EnergyChart.js';
const kineticEnergyLabelString = EnergySkateParkStrings.energies.kineticStringProperty;
const potentialEnergyLabelString = EnergySkateParkStrings.energies.potentialStringProperty;
const thermalEnergyLabelString = EnergySkateParkStrings.energies.thermalStringProperty;
const totalEnergyLabelString = EnergySkateParkStrings.energies.totalStringProperty;
const timeSwitchLabelString = EnergySkateParkStrings.plots.timeSwitchLabelStringProperty;
const positionSwitchLabelString = EnergySkateParkStrings.plots.positionSwitchLabelStringProperty;
const plotsEnergyGraphString = EnergySkateParkStrings.plots.energyGraph.labelStringProperty;
const plotsPositionLabelStringProperty = EnergySkateParkStrings.plots.positionLabelStringProperty;
const plotsEnergyLabelString = EnergySkateParkStrings.plots.energyLabelStringProperty;
const plotsTimeLabelStringProperty = EnergySkateParkStrings.plots.timeLabelStringProperty;

// constants
const GRAPH_HEIGHT = 141;

// margin for content within the panel
const CONTENT_X_MARGIN = 4;

// size of the ABSwitch that changes from plotting position vs time
const SWITCH_SIZE = new Dimension2(37, 18);
const LABEL_FONT = new PhetFont({
  size: 15
});
class EnergyGraphAccordionBox extends AccordionBox {
  /**
   * @param {GraphsModel} model
   * @param {ModelViewTransform2} modelViewTransform
   * @param {Tandem} tandem
   */
  constructor(model, modelViewTransform, tandem) {
    // the parent for all content of the accordion box
    const contentNode = new Node();
    const labelAlignGroup = new AlignGroup({
      matchVertical: false
    });

    // check boxes for visibility of energy data
    const checkboxGroup = new VerticalCheckboxGroup([EnergyGraphAccordionBox.createCheckboxItem(model.kineticEnergyDataVisibleProperty, kineticEnergyLabelString, EnergySkateParkColorScheme.kineticEnergy, labelAlignGroup), EnergyGraphAccordionBox.createCheckboxItem(model.potentialEnergyDataVisibleProperty, potentialEnergyLabelString, EnergySkateParkColorScheme.potentialEnergy, labelAlignGroup), EnergyGraphAccordionBox.createCheckboxItem(model.thermalEnergyDataVisibleProperty, thermalEnergyLabelString, EnergySkateParkColorScheme.thermalEnergy, labelAlignGroup), EnergyGraphAccordionBox.createCheckboxItem(model.totalEnergyDataVisibleProperty, totalEnergyLabelString, EnergySkateParkColorScheme.totalEnergy, labelAlignGroup)], {
      checkboxOptions: {
        boxWidth: EnergySkateParkConstants.CHECKBOX_WIDTH
      },
      spacing: 12
    });
    contentNode.addChild(checkboxGroup);

    // the graph is as long as the tracks in the Graphs screen so that position of the skater matches
    // with position along the plot
    const graphWidth = modelViewTransform.modelToViewDeltaX(GraphsConstants.TRACK_WIDTH);
    const energyPlot = new EnergyChart(model, graphWidth, GRAPH_HEIGHT, tandem.createTandem('energyPlot'));
    contentNode.addChild(energyPlot);

    // eraser button to clear all data from the graph
    const eraserButton = new EraserButton({
      iconWidth: 22,
      touchAreaXDilation: 8,
      touchAreaYDilation: 8,
      listener: () => {
        this.clearEnergyData();
      },
      tandem: tandem.createTandem('eraserButton')
    });

    // ABSwitch to change plotting variables
    const switchLabelOptions = {
      font: LABEL_FONT,
      maxWidth: 100
    };
    const variables = GraphsModel.IndependentVariable;
    const variableSwitchTandem = tandem.createTandem('variableSwitch');
    const positionLabelText = new Text(positionSwitchLabelString, merge({
      tandem: variableSwitchTandem.createTandem('positionLabelText')
    }, switchLabelOptions));
    const timeLabelText = new Text(timeSwitchLabelString, merge({
      tandem: variableSwitchTandem.createTandem('timeLabelText')
    }, switchLabelOptions));
    const variableSwitch = new ABSwitch(model.independentVariableProperty, variables.POSITION, positionLabelText, variables.TIME, timeLabelText, {
      toggleSwitchOptions: {
        size: SWITCH_SIZE
      },
      tandem: variableSwitchTandem
    });
    const zoomButtonGroup = new MagnifyingGlassZoomButtonGroup(model.energyPlotScaleIndexProperty, {
      magnifyingGlassNodeOptions: {
        glassRadius: 6
      },
      buttonOptions: {
        xMargin: 4,
        yMargin: 4,
        touchAreaXDilation: 3,
        touchAreaYDilation: 3,
        baseColor: PhetColorScheme.PHET_LOGO_BLUE
      },
      spacing: 7,
      orientation: 'vertical',
      tandem: tandem.createTandem('zoomButtonGroup')
    });

    // graph labels - y axis includes zoom buttons as part of the label
    const yLabelText = new Text(plotsEnergyLabelString, {
      rotation: -Math.PI / 2,
      font: LABEL_FONT,
      maxWidth: energyPlot.height / 2
    });

    // Label the x-axis with the independent variable.
    const xLabelStringProperty = new DerivedProperty([model.independentVariableProperty, plotsTimeLabelStringProperty, plotsPositionLabelStringProperty], (independentVariable, timeLabelString, positionLabelString) => independentVariable === GraphsModel.IndependentVariable.TIME ? timeLabelString : positionLabelString);
    const xLabelText = new Text(xLabelStringProperty, {
      font: LABEL_FONT,
      maxWidth: energyPlot.width
    });
    const yLabel = new VBox({
      children: [yLabelText, zoomButtonGroup],
      spacing: 10
    });
    contentNode.addChild(yLabel);
    contentNode.addChild(xLabelText);
    const titleNode = new Text(plotsEnergyGraphString, {
      font: new PhetFont({
        size: 20
      }),
      maxWidth: energyPlot.width / 3
    });
    yLabel.rightCenter = energyPlot.leftCenter.minusXY(10, 0);
    xLabelText.centerTop = energyPlot.centerBottom.plusXY(0, 10);
    checkboxGroup.rightCenter = yLabel.leftCenter.minusXY(10, 0);
    const buttonYMargin = 5;
    const contentYMargin = 3;
    super(contentNode, merge({
      titleNode: titleNode,
      titleAlignX: 'left',
      titleXSpacing: 7,
      buttonXMargin: 6,
      buttonYMargin: buttonYMargin,
      contentYMargin: contentYMargin,
      contentXMargin: 7,
      contentYSpacing: 0,
      // do not resize the AccordionBox as EnergyChart labels animate (new labels may adjust bounds)
      resize: false,
      // clicking doesn't expand since the title contains other controls
      titleBarExpandCollapse: false,
      expandCollapseButtonOptions: {
        sideLength: 19,
        touchAreaXDilation: 8,
        touchAreaXShift: 2,
        touchAreaYDilation: 6
      },
      expandedProperty: model.energyPlotVisibleProperty,
      tandem: tandem.createTandem('accordionBox')
    }, EnergySkateParkConstants.PANEL_OPTIONS));

    // decorate this Node with additional controls that are positioned along the title
    this.addChild(variableSwitch);
    this.addChild(eraserButton);
    variableSwitch.centerBottom = variableSwitch.globalToParentPoint(energyPlot.parentToGlobalPoint(energyPlot.chartPanel.centerTop)).minusXY(0, buttonYMargin + contentYMargin);
    eraserButton.right = eraserButton.globalToParentPoint(energyPlot.parentToGlobalPoint(energyPlot.chartPanel.rightCenter)).x;
    eraserButton.centerY = variableSwitch.centerY;

    // The variable switch and eraser button are part of the title layout but should only be visible when
    // expanded
    this.expandedProperty.link(expanded => {
      variableSwitch.visible = expanded;
      eraserButton.visible = expanded;
    });

    // @public
    this.energyPlot = energyPlot;

    // @private {GraphsModel}
    this.model = model;

    // Keep xLabelText horizontally centered.
    xLabelText.boundsProperty.link(() => {
      xLabelText.centerX = xLabelText.globalToParentPoint(energyPlot.parentToGlobalPoint(energyPlot.center)).x;
    });

    // listeners - when the independent variable changes, clear all data and update labels
    model.independentVariableProperty.link(independentVariable => {
      this.clearEnergyData();
    });

    // listeners - when the reference height is changed, clear all data (otherwise the graph will be incorrect, not inertial)
    model.skater.referenceHeightProperty.link(referenceHeight => {
      this.clearEnergyData();
    });
  }

  /**
   * Clear all data, removing saved EnergySkateParkDataSamples and removing all data from the series rendered by the chart.
   * @private
   */
  clearEnergyData() {
    this.model.clearEnergyData();
    this.energyPlot.clearEnergyDataSeries();
  }

  /**
   * Gets the spacing in view coordinates between the right edge of the panel and the right most
   * content within the panel. Useful for layout since we want the grid lines in the ScreenView to
   * perfectly align with grid lines in the plot.
   * @public
   *
   * @returns {number}
   */
  getContentRight() {
    const localContentRight = this.globalToLocalBounds(this.energyPlot.localToGlobalBounds(this.energyPlot.chartPanel.localBounds)).right;
    const localPanelRight = this.localBounds.right;
    return localPanelRight - localContentRight;
  }

  /**
   * Create an "item" for a checkbox of the VerticalCheckboxGroup, with the label and controlling Property.
   * @private
   *
   * @param {Property} property
   * @param {string} labelString
   * @param {PaintDef|Color} energyColor
   * @param {AlignGroup} labelAlignGroup - for icon layout, so all lable Text has the same dimensions
   *
   * @returns {*} - Conforms to the item object of VerticalCheckboxGroup
   */
  static createCheckboxItem(property, labelString, energyColor, labelAlignGroup) {
    const labelText = new Text(labelString, {
      font: EnergySkateParkConstants.CHECKBOX_LABEL_FONT,
      maxWidth: 50
    });
    const labelBox = labelAlignGroup.createBox(labelText, {
      xAlign: 'left'
    });

    // filled circle identifying the energy this label represents
    const iconNode = new Circle(5, {
      lineWidth: 0.5,
      stroke: 'black',
      fill: energyColor,
      leftCenter: labelBox.rightCenter.plusXY(5, 0)
    });
    return {
      createNode: () => new HBox({
        children: [labelBox, iconNode],
        spacing: 5
      }),
      property: property
    };
  }
}

// for layout of the accordion box within a screen view, the spacing of the graph from the right edge of the
// accordion box is the x content margin
EnergyGraphAccordionBox.GRAPH_OFFSET = CONTENT_X_MARGIN;
energySkatePark.register('EnergyGraphAccordionBox', EnergyGraphAccordionBox);
export default EnergyGraphAccordionBox;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJEaW1lbnNpb24yIiwibWVyZ2UiLCJFcmFzZXJCdXR0b24iLCJNYWduaWZ5aW5nR2xhc3Nab29tQnV0dG9uR3JvdXAiLCJQaGV0Q29sb3JTY2hlbWUiLCJQaGV0Rm9udCIsIkFsaWduR3JvdXAiLCJDaXJjbGUiLCJIQm94IiwiTm9kZSIsIlRleHQiLCJWQm94IiwiQUJTd2l0Y2giLCJBY2NvcmRpb25Cb3giLCJWZXJ0aWNhbENoZWNrYm94R3JvdXAiLCJFbmVyZ3lTa2F0ZVBhcmtDb25zdGFudHMiLCJFbmVyZ3lTa2F0ZVBhcmtDb2xvclNjaGVtZSIsImVuZXJneVNrYXRlUGFyayIsIkVuZXJneVNrYXRlUGFya1N0cmluZ3MiLCJHcmFwaHNDb25zdGFudHMiLCJHcmFwaHNNb2RlbCIsIkVuZXJneUNoYXJ0Iiwia2luZXRpY0VuZXJneUxhYmVsU3RyaW5nIiwiZW5lcmdpZXMiLCJraW5ldGljU3RyaW5nUHJvcGVydHkiLCJwb3RlbnRpYWxFbmVyZ3lMYWJlbFN0cmluZyIsInBvdGVudGlhbFN0cmluZ1Byb3BlcnR5IiwidGhlcm1hbEVuZXJneUxhYmVsU3RyaW5nIiwidGhlcm1hbFN0cmluZ1Byb3BlcnR5IiwidG90YWxFbmVyZ3lMYWJlbFN0cmluZyIsInRvdGFsU3RyaW5nUHJvcGVydHkiLCJ0aW1lU3dpdGNoTGFiZWxTdHJpbmciLCJwbG90cyIsInRpbWVTd2l0Y2hMYWJlbFN0cmluZ1Byb3BlcnR5IiwicG9zaXRpb25Td2l0Y2hMYWJlbFN0cmluZyIsInBvc2l0aW9uU3dpdGNoTGFiZWxTdHJpbmdQcm9wZXJ0eSIsInBsb3RzRW5lcmd5R3JhcGhTdHJpbmciLCJlbmVyZ3lHcmFwaCIsImxhYmVsU3RyaW5nUHJvcGVydHkiLCJwbG90c1Bvc2l0aW9uTGFiZWxTdHJpbmdQcm9wZXJ0eSIsInBvc2l0aW9uTGFiZWxTdHJpbmdQcm9wZXJ0eSIsInBsb3RzRW5lcmd5TGFiZWxTdHJpbmciLCJlbmVyZ3lMYWJlbFN0cmluZ1Byb3BlcnR5IiwicGxvdHNUaW1lTGFiZWxTdHJpbmdQcm9wZXJ0eSIsInRpbWVMYWJlbFN0cmluZ1Byb3BlcnR5IiwiR1JBUEhfSEVJR0hUIiwiQ09OVEVOVF9YX01BUkdJTiIsIlNXSVRDSF9TSVpFIiwiTEFCRUxfRk9OVCIsInNpemUiLCJFbmVyZ3lHcmFwaEFjY29yZGlvbkJveCIsImNvbnN0cnVjdG9yIiwibW9kZWwiLCJtb2RlbFZpZXdUcmFuc2Zvcm0iLCJ0YW5kZW0iLCJjb250ZW50Tm9kZSIsImxhYmVsQWxpZ25Hcm91cCIsIm1hdGNoVmVydGljYWwiLCJjaGVja2JveEdyb3VwIiwiY3JlYXRlQ2hlY2tib3hJdGVtIiwia2luZXRpY0VuZXJneURhdGFWaXNpYmxlUHJvcGVydHkiLCJraW5ldGljRW5lcmd5IiwicG90ZW50aWFsRW5lcmd5RGF0YVZpc2libGVQcm9wZXJ0eSIsInBvdGVudGlhbEVuZXJneSIsInRoZXJtYWxFbmVyZ3lEYXRhVmlzaWJsZVByb3BlcnR5IiwidGhlcm1hbEVuZXJneSIsInRvdGFsRW5lcmd5RGF0YVZpc2libGVQcm9wZXJ0eSIsInRvdGFsRW5lcmd5IiwiY2hlY2tib3hPcHRpb25zIiwiYm94V2lkdGgiLCJDSEVDS0JPWF9XSURUSCIsInNwYWNpbmciLCJhZGRDaGlsZCIsImdyYXBoV2lkdGgiLCJtb2RlbFRvVmlld0RlbHRhWCIsIlRSQUNLX1dJRFRIIiwiZW5lcmd5UGxvdCIsImNyZWF0ZVRhbmRlbSIsImVyYXNlckJ1dHRvbiIsImljb25XaWR0aCIsInRvdWNoQXJlYVhEaWxhdGlvbiIsInRvdWNoQXJlYVlEaWxhdGlvbiIsImxpc3RlbmVyIiwiY2xlYXJFbmVyZ3lEYXRhIiwic3dpdGNoTGFiZWxPcHRpb25zIiwiZm9udCIsIm1heFdpZHRoIiwidmFyaWFibGVzIiwiSW5kZXBlbmRlbnRWYXJpYWJsZSIsInZhcmlhYmxlU3dpdGNoVGFuZGVtIiwicG9zaXRpb25MYWJlbFRleHQiLCJ0aW1lTGFiZWxUZXh0IiwidmFyaWFibGVTd2l0Y2giLCJpbmRlcGVuZGVudFZhcmlhYmxlUHJvcGVydHkiLCJQT1NJVElPTiIsIlRJTUUiLCJ0b2dnbGVTd2l0Y2hPcHRpb25zIiwiem9vbUJ1dHRvbkdyb3VwIiwiZW5lcmd5UGxvdFNjYWxlSW5kZXhQcm9wZXJ0eSIsIm1hZ25pZnlpbmdHbGFzc05vZGVPcHRpb25zIiwiZ2xhc3NSYWRpdXMiLCJidXR0b25PcHRpb25zIiwieE1hcmdpbiIsInlNYXJnaW4iLCJiYXNlQ29sb3IiLCJQSEVUX0xPR09fQkxVRSIsIm9yaWVudGF0aW9uIiwieUxhYmVsVGV4dCIsInJvdGF0aW9uIiwiTWF0aCIsIlBJIiwiaGVpZ2h0IiwieExhYmVsU3RyaW5nUHJvcGVydHkiLCJpbmRlcGVuZGVudFZhcmlhYmxlIiwidGltZUxhYmVsU3RyaW5nIiwicG9zaXRpb25MYWJlbFN0cmluZyIsInhMYWJlbFRleHQiLCJ3aWR0aCIsInlMYWJlbCIsImNoaWxkcmVuIiwidGl0bGVOb2RlIiwicmlnaHRDZW50ZXIiLCJsZWZ0Q2VudGVyIiwibWludXNYWSIsImNlbnRlclRvcCIsImNlbnRlckJvdHRvbSIsInBsdXNYWSIsImJ1dHRvbllNYXJnaW4iLCJjb250ZW50WU1hcmdpbiIsInRpdGxlQWxpZ25YIiwidGl0bGVYU3BhY2luZyIsImJ1dHRvblhNYXJnaW4iLCJjb250ZW50WE1hcmdpbiIsImNvbnRlbnRZU3BhY2luZyIsInJlc2l6ZSIsInRpdGxlQmFyRXhwYW5kQ29sbGFwc2UiLCJleHBhbmRDb2xsYXBzZUJ1dHRvbk9wdGlvbnMiLCJzaWRlTGVuZ3RoIiwidG91Y2hBcmVhWFNoaWZ0IiwiZXhwYW5kZWRQcm9wZXJ0eSIsImVuZXJneVBsb3RWaXNpYmxlUHJvcGVydHkiLCJQQU5FTF9PUFRJT05TIiwiZ2xvYmFsVG9QYXJlbnRQb2ludCIsInBhcmVudFRvR2xvYmFsUG9pbnQiLCJjaGFydFBhbmVsIiwicmlnaHQiLCJ4IiwiY2VudGVyWSIsImxpbmsiLCJleHBhbmRlZCIsInZpc2libGUiLCJib3VuZHNQcm9wZXJ0eSIsImNlbnRlclgiLCJjZW50ZXIiLCJza2F0ZXIiLCJyZWZlcmVuY2VIZWlnaHRQcm9wZXJ0eSIsInJlZmVyZW5jZUhlaWdodCIsImNsZWFyRW5lcmd5RGF0YVNlcmllcyIsImdldENvbnRlbnRSaWdodCIsImxvY2FsQ29udGVudFJpZ2h0IiwiZ2xvYmFsVG9Mb2NhbEJvdW5kcyIsImxvY2FsVG9HbG9iYWxCb3VuZHMiLCJsb2NhbEJvdW5kcyIsImxvY2FsUGFuZWxSaWdodCIsInByb3BlcnR5IiwibGFiZWxTdHJpbmciLCJlbmVyZ3lDb2xvciIsImxhYmVsVGV4dCIsIkNIRUNLQk9YX0xBQkVMX0ZPTlQiLCJsYWJlbEJveCIsImNyZWF0ZUJveCIsInhBbGlnbiIsImljb25Ob2RlIiwibGluZVdpZHRoIiwic3Ryb2tlIiwiZmlsbCIsImNyZWF0ZU5vZGUiLCJHUkFQSF9PRkZTRVQiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkVuZXJneUdyYXBoQWNjb3JkaW9uQm94LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE5LTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFRoZSBhY2NvcmRpb24gYm94IGluIHRoZSBcIkdyYXBoc1wiIHNjcmVlbiB0aGF0IGNvbnRhaW5zIHRoZSBlbmVyZ3kgZ3JhcGhzLCBhcyB3ZWxsIGFzIGNvbnRyb2xzIGZvclxyXG4gKiBjb250cm9sbGluZyB0aGUgZGF0YS5cclxuICpcclxuICogQGF1dGhvciBKZXNzZSBHcmVlbmJlcmcgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IERlcml2ZWRQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL0Rlcml2ZWRQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBEaW1lbnNpb24yIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9EaW1lbnNpb24yLmpzJztcclxuaW1wb3J0IG1lcmdlIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9tZXJnZS5qcyc7XHJcbmltcG9ydCBFcmFzZXJCdXR0b24gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL2J1dHRvbnMvRXJhc2VyQnV0dG9uLmpzJztcclxuaW1wb3J0IE1hZ25pZnlpbmdHbGFzc1pvb21CdXR0b25Hcm91cCBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvTWFnbmlmeWluZ0dsYXNzWm9vbUJ1dHRvbkdyb3VwLmpzJztcclxuaW1wb3J0IFBoZXRDb2xvclNjaGVtZSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvUGhldENvbG9yU2NoZW1lLmpzJztcclxuaW1wb3J0IFBoZXRGb250IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9QaGV0Rm9udC5qcyc7XHJcbmltcG9ydCB7IEFsaWduR3JvdXAsIENpcmNsZSwgSEJveCwgTm9kZSwgVGV4dCwgVkJveCB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBBQlN3aXRjaCBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvQUJTd2l0Y2guanMnO1xyXG5pbXBvcnQgQWNjb3JkaW9uQm94IGZyb20gJy4uLy4uLy4uLy4uL3N1bi9qcy9BY2NvcmRpb25Cb3guanMnO1xyXG5pbXBvcnQgVmVydGljYWxDaGVja2JveEdyb3VwIGZyb20gJy4uLy4uLy4uLy4uL3N1bi9qcy9WZXJ0aWNhbENoZWNrYm94R3JvdXAuanMnO1xyXG5pbXBvcnQgRW5lcmd5U2thdGVQYXJrQ29uc3RhbnRzIGZyb20gJy4uLy4uL2NvbW1vbi9FbmVyZ3lTa2F0ZVBhcmtDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgRW5lcmd5U2thdGVQYXJrQ29sb3JTY2hlbWUgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvRW5lcmd5U2thdGVQYXJrQ29sb3JTY2hlbWUuanMnO1xyXG5pbXBvcnQgZW5lcmd5U2thdGVQYXJrIGZyb20gJy4uLy4uL2VuZXJneVNrYXRlUGFyay5qcyc7XHJcbmltcG9ydCBFbmVyZ3lTa2F0ZVBhcmtTdHJpbmdzIGZyb20gJy4uLy4uL0VuZXJneVNrYXRlUGFya1N0cmluZ3MuanMnO1xyXG5pbXBvcnQgR3JhcGhzQ29uc3RhbnRzIGZyb20gJy4uL0dyYXBoc0NvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBHcmFwaHNNb2RlbCBmcm9tICcuLi9tb2RlbC9HcmFwaHNNb2RlbC5qcyc7XHJcbmltcG9ydCBFbmVyZ3lDaGFydCBmcm9tICcuL0VuZXJneUNoYXJ0LmpzJztcclxuXHJcbmNvbnN0IGtpbmV0aWNFbmVyZ3lMYWJlbFN0cmluZyA9IEVuZXJneVNrYXRlUGFya1N0cmluZ3MuZW5lcmdpZXMua2luZXRpY1N0cmluZ1Byb3BlcnR5O1xyXG5jb25zdCBwb3RlbnRpYWxFbmVyZ3lMYWJlbFN0cmluZyA9IEVuZXJneVNrYXRlUGFya1N0cmluZ3MuZW5lcmdpZXMucG90ZW50aWFsU3RyaW5nUHJvcGVydHk7XHJcbmNvbnN0IHRoZXJtYWxFbmVyZ3lMYWJlbFN0cmluZyA9IEVuZXJneVNrYXRlUGFya1N0cmluZ3MuZW5lcmdpZXMudGhlcm1hbFN0cmluZ1Byb3BlcnR5O1xyXG5jb25zdCB0b3RhbEVuZXJneUxhYmVsU3RyaW5nID0gRW5lcmd5U2thdGVQYXJrU3RyaW5ncy5lbmVyZ2llcy50b3RhbFN0cmluZ1Byb3BlcnR5O1xyXG5jb25zdCB0aW1lU3dpdGNoTGFiZWxTdHJpbmcgPSBFbmVyZ3lTa2F0ZVBhcmtTdHJpbmdzLnBsb3RzLnRpbWVTd2l0Y2hMYWJlbFN0cmluZ1Byb3BlcnR5O1xyXG5jb25zdCBwb3NpdGlvblN3aXRjaExhYmVsU3RyaW5nID0gRW5lcmd5U2thdGVQYXJrU3RyaW5ncy5wbG90cy5wb3NpdGlvblN3aXRjaExhYmVsU3RyaW5nUHJvcGVydHk7XHJcbmNvbnN0IHBsb3RzRW5lcmd5R3JhcGhTdHJpbmcgPSBFbmVyZ3lTa2F0ZVBhcmtTdHJpbmdzLnBsb3RzLmVuZXJneUdyYXBoLmxhYmVsU3RyaW5nUHJvcGVydHk7XHJcbmNvbnN0IHBsb3RzUG9zaXRpb25MYWJlbFN0cmluZ1Byb3BlcnR5ID0gRW5lcmd5U2thdGVQYXJrU3RyaW5ncy5wbG90cy5wb3NpdGlvbkxhYmVsU3RyaW5nUHJvcGVydHk7XHJcbmNvbnN0IHBsb3RzRW5lcmd5TGFiZWxTdHJpbmcgPSBFbmVyZ3lTa2F0ZVBhcmtTdHJpbmdzLnBsb3RzLmVuZXJneUxhYmVsU3RyaW5nUHJvcGVydHk7XHJcbmNvbnN0IHBsb3RzVGltZUxhYmVsU3RyaW5nUHJvcGVydHkgPSBFbmVyZ3lTa2F0ZVBhcmtTdHJpbmdzLnBsb3RzLnRpbWVMYWJlbFN0cmluZ1Byb3BlcnR5O1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IEdSQVBIX0hFSUdIVCA9IDE0MTtcclxuXHJcbi8vIG1hcmdpbiBmb3IgY29udGVudCB3aXRoaW4gdGhlIHBhbmVsXHJcbmNvbnN0IENPTlRFTlRfWF9NQVJHSU4gPSA0O1xyXG5cclxuLy8gc2l6ZSBvZiB0aGUgQUJTd2l0Y2ggdGhhdCBjaGFuZ2VzIGZyb20gcGxvdHRpbmcgcG9zaXRpb24gdnMgdGltZVxyXG5jb25zdCBTV0lUQ0hfU0laRSA9IG5ldyBEaW1lbnNpb24yKCAzNywgMTggKTtcclxuXHJcbmNvbnN0IExBQkVMX0ZPTlQgPSBuZXcgUGhldEZvbnQoIHsgc2l6ZTogMTUgfSApO1xyXG5cclxuY2xhc3MgRW5lcmd5R3JhcGhBY2NvcmRpb25Cb3ggZXh0ZW5kcyBBY2NvcmRpb25Cb3gge1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge0dyYXBoc01vZGVsfSBtb2RlbFxyXG4gICAqIEBwYXJhbSB7TW9kZWxWaWV3VHJhbnNmb3JtMn0gbW9kZWxWaWV3VHJhbnNmb3JtXHJcbiAgICogQHBhcmFtIHtUYW5kZW19IHRhbmRlbVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBtb2RlbCwgbW9kZWxWaWV3VHJhbnNmb3JtLCB0YW5kZW0gKSB7XHJcblxyXG4gICAgLy8gdGhlIHBhcmVudCBmb3IgYWxsIGNvbnRlbnQgb2YgdGhlIGFjY29yZGlvbiBib3hcclxuICAgIGNvbnN0IGNvbnRlbnROb2RlID0gbmV3IE5vZGUoKTtcclxuXHJcbiAgICBjb25zdCBsYWJlbEFsaWduR3JvdXAgPSBuZXcgQWxpZ25Hcm91cCggeyBtYXRjaFZlcnRpY2FsOiBmYWxzZSB9ICk7XHJcblxyXG4gICAgLy8gY2hlY2sgYm94ZXMgZm9yIHZpc2liaWxpdHkgb2YgZW5lcmd5IGRhdGFcclxuICAgIGNvbnN0IGNoZWNrYm94R3JvdXAgPSBuZXcgVmVydGljYWxDaGVja2JveEdyb3VwKCBbXHJcbiAgICAgIEVuZXJneUdyYXBoQWNjb3JkaW9uQm94LmNyZWF0ZUNoZWNrYm94SXRlbSggbW9kZWwua2luZXRpY0VuZXJneURhdGFWaXNpYmxlUHJvcGVydHksIGtpbmV0aWNFbmVyZ3lMYWJlbFN0cmluZywgRW5lcmd5U2thdGVQYXJrQ29sb3JTY2hlbWUua2luZXRpY0VuZXJneSwgbGFiZWxBbGlnbkdyb3VwICksXHJcbiAgICAgIEVuZXJneUdyYXBoQWNjb3JkaW9uQm94LmNyZWF0ZUNoZWNrYm94SXRlbSggbW9kZWwucG90ZW50aWFsRW5lcmd5RGF0YVZpc2libGVQcm9wZXJ0eSwgcG90ZW50aWFsRW5lcmd5TGFiZWxTdHJpbmcsIEVuZXJneVNrYXRlUGFya0NvbG9yU2NoZW1lLnBvdGVudGlhbEVuZXJneSwgbGFiZWxBbGlnbkdyb3VwICksXHJcbiAgICAgIEVuZXJneUdyYXBoQWNjb3JkaW9uQm94LmNyZWF0ZUNoZWNrYm94SXRlbSggbW9kZWwudGhlcm1hbEVuZXJneURhdGFWaXNpYmxlUHJvcGVydHksIHRoZXJtYWxFbmVyZ3lMYWJlbFN0cmluZywgRW5lcmd5U2thdGVQYXJrQ29sb3JTY2hlbWUudGhlcm1hbEVuZXJneSwgbGFiZWxBbGlnbkdyb3VwICksXHJcbiAgICAgIEVuZXJneUdyYXBoQWNjb3JkaW9uQm94LmNyZWF0ZUNoZWNrYm94SXRlbSggbW9kZWwudG90YWxFbmVyZ3lEYXRhVmlzaWJsZVByb3BlcnR5LCB0b3RhbEVuZXJneUxhYmVsU3RyaW5nLCBFbmVyZ3lTa2F0ZVBhcmtDb2xvclNjaGVtZS50b3RhbEVuZXJneSwgbGFiZWxBbGlnbkdyb3VwIClcclxuICAgIF0sIHtcclxuICAgICAgY2hlY2tib3hPcHRpb25zOiB7XHJcbiAgICAgICAgYm94V2lkdGg6IEVuZXJneVNrYXRlUGFya0NvbnN0YW50cy5DSEVDS0JPWF9XSURUSFxyXG4gICAgICB9LFxyXG4gICAgICBzcGFjaW5nOiAxMlxyXG4gICAgfSApO1xyXG4gICAgY29udGVudE5vZGUuYWRkQ2hpbGQoIGNoZWNrYm94R3JvdXAgKTtcclxuXHJcbiAgICAvLyB0aGUgZ3JhcGggaXMgYXMgbG9uZyBhcyB0aGUgdHJhY2tzIGluIHRoZSBHcmFwaHMgc2NyZWVuIHNvIHRoYXQgcG9zaXRpb24gb2YgdGhlIHNrYXRlciBtYXRjaGVzXHJcbiAgICAvLyB3aXRoIHBvc2l0aW9uIGFsb25nIHRoZSBwbG90XHJcbiAgICBjb25zdCBncmFwaFdpZHRoID0gbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3RGVsdGFYKCBHcmFwaHNDb25zdGFudHMuVFJBQ0tfV0lEVEggKTtcclxuXHJcbiAgICBjb25zdCBlbmVyZ3lQbG90ID0gbmV3IEVuZXJneUNoYXJ0KCBtb2RlbCwgZ3JhcGhXaWR0aCwgR1JBUEhfSEVJR0hULCB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnZW5lcmd5UGxvdCcgKSApO1xyXG4gICAgY29udGVudE5vZGUuYWRkQ2hpbGQoIGVuZXJneVBsb3QgKTtcclxuXHJcbiAgICAvLyBlcmFzZXIgYnV0dG9uIHRvIGNsZWFyIGFsbCBkYXRhIGZyb20gdGhlIGdyYXBoXHJcbiAgICBjb25zdCBlcmFzZXJCdXR0b24gPSBuZXcgRXJhc2VyQnV0dG9uKCB7XHJcbiAgICAgIGljb25XaWR0aDogMjIsXHJcbiAgICAgIHRvdWNoQXJlYVhEaWxhdGlvbjogOCxcclxuICAgICAgdG91Y2hBcmVhWURpbGF0aW9uOiA4LFxyXG4gICAgICBsaXN0ZW5lcjogKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuY2xlYXJFbmVyZ3lEYXRhKCk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdlcmFzZXJCdXR0b24nIClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBBQlN3aXRjaCB0byBjaGFuZ2UgcGxvdHRpbmcgdmFyaWFibGVzXHJcbiAgICBjb25zdCBzd2l0Y2hMYWJlbE9wdGlvbnMgPSB7XHJcbiAgICAgIGZvbnQ6IExBQkVMX0ZPTlQsXHJcbiAgICAgIG1heFdpZHRoOiAxMDBcclxuICAgIH07XHJcbiAgICBjb25zdCB2YXJpYWJsZXMgPSBHcmFwaHNNb2RlbC5JbmRlcGVuZGVudFZhcmlhYmxlO1xyXG4gICAgY29uc3QgdmFyaWFibGVTd2l0Y2hUYW5kZW0gPSB0YW5kZW0uY3JlYXRlVGFuZGVtKCAndmFyaWFibGVTd2l0Y2gnICk7XHJcbiAgICBjb25zdCBwb3NpdGlvbkxhYmVsVGV4dCA9IG5ldyBUZXh0KCBwb3NpdGlvblN3aXRjaExhYmVsU3RyaW5nLCBtZXJnZSgge1xyXG4gICAgICB0YW5kZW06IHZhcmlhYmxlU3dpdGNoVGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3Bvc2l0aW9uTGFiZWxUZXh0JyApXHJcbiAgICB9LCBzd2l0Y2hMYWJlbE9wdGlvbnMgKSApO1xyXG4gICAgY29uc3QgdGltZUxhYmVsVGV4dCA9IG5ldyBUZXh0KCB0aW1lU3dpdGNoTGFiZWxTdHJpbmcsIG1lcmdlKCB7XHJcbiAgICAgIHRhbmRlbTogdmFyaWFibGVTd2l0Y2hUYW5kZW0uY3JlYXRlVGFuZGVtKCAndGltZUxhYmVsVGV4dCcgKVxyXG4gICAgfSwgc3dpdGNoTGFiZWxPcHRpb25zICkgKTtcclxuICAgIGNvbnN0IHZhcmlhYmxlU3dpdGNoID0gbmV3IEFCU3dpdGNoKCBtb2RlbC5pbmRlcGVuZGVudFZhcmlhYmxlUHJvcGVydHksIHZhcmlhYmxlcy5QT1NJVElPTiwgcG9zaXRpb25MYWJlbFRleHQsIHZhcmlhYmxlcy5USU1FLCB0aW1lTGFiZWxUZXh0LCB7XHJcbiAgICAgIHRvZ2dsZVN3aXRjaE9wdGlvbnM6IHsgc2l6ZTogU1dJVENIX1NJWkUgfSxcclxuICAgICAgdGFuZGVtOiB2YXJpYWJsZVN3aXRjaFRhbmRlbVxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IHpvb21CdXR0b25Hcm91cCA9IG5ldyBNYWduaWZ5aW5nR2xhc3Nab29tQnV0dG9uR3JvdXAoIG1vZGVsLmVuZXJneVBsb3RTY2FsZUluZGV4UHJvcGVydHksIHtcclxuICAgICAgbWFnbmlmeWluZ0dsYXNzTm9kZU9wdGlvbnM6IHtcclxuICAgICAgICBnbGFzc1JhZGl1czogNlxyXG4gICAgICB9LFxyXG4gICAgICBidXR0b25PcHRpb25zOiB7XHJcbiAgICAgICAgeE1hcmdpbjogNCxcclxuICAgICAgICB5TWFyZ2luOiA0LFxyXG4gICAgICAgIHRvdWNoQXJlYVhEaWxhdGlvbjogMyxcclxuICAgICAgICB0b3VjaEFyZWFZRGlsYXRpb246IDMsXHJcblxyXG4gICAgICAgIGJhc2VDb2xvcjogUGhldENvbG9yU2NoZW1lLlBIRVRfTE9HT19CTFVFXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBzcGFjaW5nOiA3LFxyXG4gICAgICBvcmllbnRhdGlvbjogJ3ZlcnRpY2FsJyxcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnem9vbUJ1dHRvbkdyb3VwJyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gZ3JhcGggbGFiZWxzIC0geSBheGlzIGluY2x1ZGVzIHpvb20gYnV0dG9ucyBhcyBwYXJ0IG9mIHRoZSBsYWJlbFxyXG4gICAgY29uc3QgeUxhYmVsVGV4dCA9IG5ldyBUZXh0KCBwbG90c0VuZXJneUxhYmVsU3RyaW5nLCB7XHJcbiAgICAgIHJvdGF0aW9uOiAtTWF0aC5QSSAvIDIsXHJcbiAgICAgIGZvbnQ6IExBQkVMX0ZPTlQsXHJcbiAgICAgIG1heFdpZHRoOiBlbmVyZ3lQbG90LmhlaWdodCAvIDJcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBMYWJlbCB0aGUgeC1heGlzIHdpdGggdGhlIGluZGVwZW5kZW50IHZhcmlhYmxlLlxyXG4gICAgY29uc3QgeExhYmVsU3RyaW5nUHJvcGVydHkgPSBuZXcgRGVyaXZlZFByb3BlcnR5KCBbIG1vZGVsLmluZGVwZW5kZW50VmFyaWFibGVQcm9wZXJ0eSwgcGxvdHNUaW1lTGFiZWxTdHJpbmdQcm9wZXJ0eSwgcGxvdHNQb3NpdGlvbkxhYmVsU3RyaW5nUHJvcGVydHkgXSxcclxuICAgICAgKCBpbmRlcGVuZGVudFZhcmlhYmxlLCB0aW1lTGFiZWxTdHJpbmcsIHBvc2l0aW9uTGFiZWxTdHJpbmcgKSA9PiAoIGluZGVwZW5kZW50VmFyaWFibGUgPT09IEdyYXBoc01vZGVsLkluZGVwZW5kZW50VmFyaWFibGUuVElNRSApID8gdGltZUxhYmVsU3RyaW5nIDogcG9zaXRpb25MYWJlbFN0cmluZ1xyXG4gICAgKTtcclxuICAgIGNvbnN0IHhMYWJlbFRleHQgPSBuZXcgVGV4dCggeExhYmVsU3RyaW5nUHJvcGVydHksIHsgZm9udDogTEFCRUxfRk9OVCwgbWF4V2lkdGg6IGVuZXJneVBsb3Qud2lkdGggfSApO1xyXG5cclxuICAgIGNvbnN0IHlMYWJlbCA9IG5ldyBWQm94KCB7XHJcbiAgICAgIGNoaWxkcmVuOiBbIHlMYWJlbFRleHQsIHpvb21CdXR0b25Hcm91cCBdLFxyXG4gICAgICBzcGFjaW5nOiAxMFxyXG4gICAgfSApO1xyXG4gICAgY29udGVudE5vZGUuYWRkQ2hpbGQoIHlMYWJlbCApO1xyXG4gICAgY29udGVudE5vZGUuYWRkQ2hpbGQoIHhMYWJlbFRleHQgKTtcclxuXHJcbiAgICBjb25zdCB0aXRsZU5vZGUgPSBuZXcgVGV4dCggcGxvdHNFbmVyZ3lHcmFwaFN0cmluZywge1xyXG4gICAgICBmb250OiBuZXcgUGhldEZvbnQoIHsgc2l6ZTogMjAgfSApLFxyXG4gICAgICBtYXhXaWR0aDogZW5lcmd5UGxvdC53aWR0aCAvIDNcclxuICAgIH0gKTtcclxuXHJcbiAgICB5TGFiZWwucmlnaHRDZW50ZXIgPSBlbmVyZ3lQbG90LmxlZnRDZW50ZXIubWludXNYWSggMTAsIDAgKTtcclxuICAgIHhMYWJlbFRleHQuY2VudGVyVG9wID0gZW5lcmd5UGxvdC5jZW50ZXJCb3R0b20ucGx1c1hZKCAwLCAxMCApO1xyXG4gICAgY2hlY2tib3hHcm91cC5yaWdodENlbnRlciA9IHlMYWJlbC5sZWZ0Q2VudGVyLm1pbnVzWFkoIDEwLCAwICk7XHJcblxyXG4gICAgY29uc3QgYnV0dG9uWU1hcmdpbiA9IDU7XHJcbiAgICBjb25zdCBjb250ZW50WU1hcmdpbiA9IDM7XHJcbiAgICBzdXBlciggY29udGVudE5vZGUsIG1lcmdlKCB7XHJcbiAgICAgIHRpdGxlTm9kZTogdGl0bGVOb2RlLFxyXG4gICAgICB0aXRsZUFsaWduWDogJ2xlZnQnLFxyXG4gICAgICB0aXRsZVhTcGFjaW5nOiA3LFxyXG4gICAgICBidXR0b25YTWFyZ2luOiA2LFxyXG4gICAgICBidXR0b25ZTWFyZ2luOiBidXR0b25ZTWFyZ2luLFxyXG4gICAgICBjb250ZW50WU1hcmdpbjogY29udGVudFlNYXJnaW4sXHJcbiAgICAgIGNvbnRlbnRYTWFyZ2luOiA3LFxyXG4gICAgICBjb250ZW50WVNwYWNpbmc6IDAsXHJcblxyXG4gICAgICAvLyBkbyBub3QgcmVzaXplIHRoZSBBY2NvcmRpb25Cb3ggYXMgRW5lcmd5Q2hhcnQgbGFiZWxzIGFuaW1hdGUgKG5ldyBsYWJlbHMgbWF5IGFkanVzdCBib3VuZHMpXHJcbiAgICAgIHJlc2l6ZTogZmFsc2UsXHJcblxyXG4gICAgICAvLyBjbGlja2luZyBkb2Vzbid0IGV4cGFuZCBzaW5jZSB0aGUgdGl0bGUgY29udGFpbnMgb3RoZXIgY29udHJvbHNcclxuICAgICAgdGl0bGVCYXJFeHBhbmRDb2xsYXBzZTogZmFsc2UsXHJcblxyXG4gICAgICBleHBhbmRDb2xsYXBzZUJ1dHRvbk9wdGlvbnM6IHtcclxuICAgICAgICBzaWRlTGVuZ3RoOiAxOSxcclxuICAgICAgICB0b3VjaEFyZWFYRGlsYXRpb246IDgsXHJcbiAgICAgICAgdG91Y2hBcmVhWFNoaWZ0OiAyLFxyXG4gICAgICAgIHRvdWNoQXJlYVlEaWxhdGlvbjogNlxyXG4gICAgICB9LFxyXG5cclxuICAgICAgZXhwYW5kZWRQcm9wZXJ0eTogbW9kZWwuZW5lcmd5UGxvdFZpc2libGVQcm9wZXJ0eSxcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnYWNjb3JkaW9uQm94JyApXHJcbiAgICB9LCBFbmVyZ3lTa2F0ZVBhcmtDb25zdGFudHMuUEFORUxfT1BUSU9OUyApICk7XHJcblxyXG4gICAgLy8gZGVjb3JhdGUgdGhpcyBOb2RlIHdpdGggYWRkaXRpb25hbCBjb250cm9scyB0aGF0IGFyZSBwb3NpdGlvbmVkIGFsb25nIHRoZSB0aXRsZVxyXG4gICAgdGhpcy5hZGRDaGlsZCggdmFyaWFibGVTd2l0Y2ggKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIGVyYXNlckJ1dHRvbiApO1xyXG5cclxuICAgIHZhcmlhYmxlU3dpdGNoLmNlbnRlckJvdHRvbSA9IHZhcmlhYmxlU3dpdGNoLmdsb2JhbFRvUGFyZW50UG9pbnQoIGVuZXJneVBsb3QucGFyZW50VG9HbG9iYWxQb2ludCggZW5lcmd5UGxvdC5jaGFydFBhbmVsLmNlbnRlclRvcCApICkubWludXNYWSggMCwgYnV0dG9uWU1hcmdpbiArIGNvbnRlbnRZTWFyZ2luICk7XHJcbiAgICBlcmFzZXJCdXR0b24ucmlnaHQgPSBlcmFzZXJCdXR0b24uZ2xvYmFsVG9QYXJlbnRQb2ludCggZW5lcmd5UGxvdC5wYXJlbnRUb0dsb2JhbFBvaW50KCBlbmVyZ3lQbG90LmNoYXJ0UGFuZWwucmlnaHRDZW50ZXIgKSApLng7XHJcbiAgICBlcmFzZXJCdXR0b24uY2VudGVyWSA9IHZhcmlhYmxlU3dpdGNoLmNlbnRlclk7XHJcblxyXG4gICAgLy8gVGhlIHZhcmlhYmxlIHN3aXRjaCBhbmQgZXJhc2VyIGJ1dHRvbiBhcmUgcGFydCBvZiB0aGUgdGl0bGUgbGF5b3V0IGJ1dCBzaG91bGQgb25seSBiZSB2aXNpYmxlIHdoZW5cclxuICAgIC8vIGV4cGFuZGVkXHJcbiAgICB0aGlzLmV4cGFuZGVkUHJvcGVydHkubGluayggZXhwYW5kZWQgPT4ge1xyXG4gICAgICB2YXJpYWJsZVN3aXRjaC52aXNpYmxlID0gZXhwYW5kZWQ7XHJcbiAgICAgIGVyYXNlckJ1dHRvbi52aXNpYmxlID0gZXhwYW5kZWQ7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gQHB1YmxpY1xyXG4gICAgdGhpcy5lbmVyZ3lQbG90ID0gZW5lcmd5UGxvdDtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZSB7R3JhcGhzTW9kZWx9XHJcbiAgICB0aGlzLm1vZGVsID0gbW9kZWw7XHJcblxyXG4gICAgLy8gS2VlcCB4TGFiZWxUZXh0IGhvcml6b250YWxseSBjZW50ZXJlZC5cclxuICAgIHhMYWJlbFRleHQuYm91bmRzUHJvcGVydHkubGluayggKCkgPT4ge1xyXG4gICAgICB4TGFiZWxUZXh0LmNlbnRlclggPSB4TGFiZWxUZXh0Lmdsb2JhbFRvUGFyZW50UG9pbnQoIGVuZXJneVBsb3QucGFyZW50VG9HbG9iYWxQb2ludCggZW5lcmd5UGxvdC5jZW50ZXIgKSApLng7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gbGlzdGVuZXJzIC0gd2hlbiB0aGUgaW5kZXBlbmRlbnQgdmFyaWFibGUgY2hhbmdlcywgY2xlYXIgYWxsIGRhdGEgYW5kIHVwZGF0ZSBsYWJlbHNcclxuICAgIG1vZGVsLmluZGVwZW5kZW50VmFyaWFibGVQcm9wZXJ0eS5saW5rKCBpbmRlcGVuZGVudFZhcmlhYmxlID0+IHtcclxuICAgICAgdGhpcy5jbGVhckVuZXJneURhdGEoKTtcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBsaXN0ZW5lcnMgLSB3aGVuIHRoZSByZWZlcmVuY2UgaGVpZ2h0IGlzIGNoYW5nZWQsIGNsZWFyIGFsbCBkYXRhIChvdGhlcndpc2UgdGhlIGdyYXBoIHdpbGwgYmUgaW5jb3JyZWN0LCBub3QgaW5lcnRpYWwpXHJcbiAgICBtb2RlbC5za2F0ZXIucmVmZXJlbmNlSGVpZ2h0UHJvcGVydHkubGluayggcmVmZXJlbmNlSGVpZ2h0ID0+IHtcclxuICAgICAgdGhpcy5jbGVhckVuZXJneURhdGEoKTtcclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENsZWFyIGFsbCBkYXRhLCByZW1vdmluZyBzYXZlZCBFbmVyZ3lTa2F0ZVBhcmtEYXRhU2FtcGxlcyBhbmQgcmVtb3ZpbmcgYWxsIGRhdGEgZnJvbSB0aGUgc2VyaWVzIHJlbmRlcmVkIGJ5IHRoZSBjaGFydC5cclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIGNsZWFyRW5lcmd5RGF0YSgpIHtcclxuICAgIHRoaXMubW9kZWwuY2xlYXJFbmVyZ3lEYXRhKCk7XHJcbiAgICB0aGlzLmVuZXJneVBsb3QuY2xlYXJFbmVyZ3lEYXRhU2VyaWVzKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXRzIHRoZSBzcGFjaW5nIGluIHZpZXcgY29vcmRpbmF0ZXMgYmV0d2VlbiB0aGUgcmlnaHQgZWRnZSBvZiB0aGUgcGFuZWwgYW5kIHRoZSByaWdodCBtb3N0XHJcbiAgICogY29udGVudCB3aXRoaW4gdGhlIHBhbmVsLiBVc2VmdWwgZm9yIGxheW91dCBzaW5jZSB3ZSB3YW50IHRoZSBncmlkIGxpbmVzIGluIHRoZSBTY3JlZW5WaWV3IHRvXHJcbiAgICogcGVyZmVjdGx5IGFsaWduIHdpdGggZ3JpZCBsaW5lcyBpbiB0aGUgcGxvdC5cclxuICAgKiBAcHVibGljXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAqL1xyXG4gIGdldENvbnRlbnRSaWdodCgpIHtcclxuICAgIGNvbnN0IGxvY2FsQ29udGVudFJpZ2h0ID0gdGhpcy5nbG9iYWxUb0xvY2FsQm91bmRzKCB0aGlzLmVuZXJneVBsb3QubG9jYWxUb0dsb2JhbEJvdW5kcyggdGhpcy5lbmVyZ3lQbG90LmNoYXJ0UGFuZWwubG9jYWxCb3VuZHMgKSApLnJpZ2h0O1xyXG4gICAgY29uc3QgbG9jYWxQYW5lbFJpZ2h0ID0gdGhpcy5sb2NhbEJvdW5kcy5yaWdodDtcclxuICAgIHJldHVybiBsb2NhbFBhbmVsUmlnaHQgLSBsb2NhbENvbnRlbnRSaWdodDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZSBhbiBcIml0ZW1cIiBmb3IgYSBjaGVja2JveCBvZiB0aGUgVmVydGljYWxDaGVja2JveEdyb3VwLCB3aXRoIHRoZSBsYWJlbCBhbmQgY29udHJvbGxpbmcgUHJvcGVydHkuXHJcbiAgICogQHByaXZhdGVcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7UHJvcGVydHl9IHByb3BlcnR5XHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxhYmVsU3RyaW5nXHJcbiAgICogQHBhcmFtIHtQYWludERlZnxDb2xvcn0gZW5lcmd5Q29sb3JcclxuICAgKiBAcGFyYW0ge0FsaWduR3JvdXB9IGxhYmVsQWxpZ25Hcm91cCAtIGZvciBpY29uIGxheW91dCwgc28gYWxsIGxhYmxlIFRleHQgaGFzIHRoZSBzYW1lIGRpbWVuc2lvbnNcclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHsqfSAtIENvbmZvcm1zIHRvIHRoZSBpdGVtIG9iamVjdCBvZiBWZXJ0aWNhbENoZWNrYm94R3JvdXBcclxuICAgKi9cclxuICBzdGF0aWMgY3JlYXRlQ2hlY2tib3hJdGVtKCBwcm9wZXJ0eSwgbGFiZWxTdHJpbmcsIGVuZXJneUNvbG9yLCBsYWJlbEFsaWduR3JvdXAgKSB7XHJcbiAgICBjb25zdCBsYWJlbFRleHQgPSBuZXcgVGV4dCggbGFiZWxTdHJpbmcsIHtcclxuICAgICAgZm9udDogRW5lcmd5U2thdGVQYXJrQ29uc3RhbnRzLkNIRUNLQk9YX0xBQkVMX0ZPTlQsXHJcbiAgICAgIG1heFdpZHRoOiA1MFxyXG4gICAgfSApO1xyXG4gICAgY29uc3QgbGFiZWxCb3ggPSBsYWJlbEFsaWduR3JvdXAuY3JlYXRlQm94KCBsYWJlbFRleHQsIHsgeEFsaWduOiAnbGVmdCcgfSApO1xyXG5cclxuICAgIC8vIGZpbGxlZCBjaXJjbGUgaWRlbnRpZnlpbmcgdGhlIGVuZXJneSB0aGlzIGxhYmVsIHJlcHJlc2VudHNcclxuICAgIGNvbnN0IGljb25Ob2RlID0gbmV3IENpcmNsZSggNSwge1xyXG4gICAgICBsaW5lV2lkdGg6IDAuNSxcclxuICAgICAgc3Ryb2tlOiAnYmxhY2snLFxyXG4gICAgICBmaWxsOiBlbmVyZ3lDb2xvcixcclxuICAgICAgbGVmdENlbnRlcjogbGFiZWxCb3gucmlnaHRDZW50ZXIucGx1c1hZKCA1LCAwIClcclxuICAgIH0gKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBjcmVhdGVOb2RlOiAoKSA9PiBuZXcgSEJveCggeyBjaGlsZHJlbjogWyBsYWJlbEJveCwgaWNvbk5vZGUgXSwgc3BhY2luZzogNSB9ICksXHJcbiAgICAgIHByb3BlcnR5OiBwcm9wZXJ0eVxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbi8vIGZvciBsYXlvdXQgb2YgdGhlIGFjY29yZGlvbiBib3ggd2l0aGluIGEgc2NyZWVuIHZpZXcsIHRoZSBzcGFjaW5nIG9mIHRoZSBncmFwaCBmcm9tIHRoZSByaWdodCBlZGdlIG9mIHRoZVxyXG4vLyBhY2NvcmRpb24gYm94IGlzIHRoZSB4IGNvbnRlbnQgbWFyZ2luXHJcbkVuZXJneUdyYXBoQWNjb3JkaW9uQm94LkdSQVBIX09GRlNFVCA9IENPTlRFTlRfWF9NQVJHSU47XHJcblxyXG5lbmVyZ3lTa2F0ZVBhcmsucmVnaXN0ZXIoICdFbmVyZ3lHcmFwaEFjY29yZGlvbkJveCcsIEVuZXJneUdyYXBoQWNjb3JkaW9uQm94ICk7XHJcbmV4cG9ydCBkZWZhdWx0IEVuZXJneUdyYXBoQWNjb3JkaW9uQm94OyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGVBQWUsTUFBTSx3Q0FBd0M7QUFDcEUsT0FBT0MsVUFBVSxNQUFNLGtDQUFrQztBQUN6RCxPQUFPQyxLQUFLLE1BQU0sbUNBQW1DO0FBQ3JELE9BQU9DLFlBQVksTUFBTSxxREFBcUQ7QUFDOUUsT0FB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