// Copyright 2014-2022, University of Colorado Boulder

/**
 * MySolutionPanel is the panel titled 'Solution' in the 'MySolution' screen.
 * It has controls for modifying a custom solutions.
 *
 * @author Andrey Zelenkov (Mlearner)
 * @author Chris Malley (PixelZoom, Inc.)
 */

import { AlignBox, HSeparator, Text, VBox } from '../../../../scenery/js/imports.js';
import Panel from '../../../../sun/js/Panel.js';
import acidBaseSolutions from '../../acidBaseSolutions.js';
import AcidBaseSolutionsStrings from '../../AcidBaseSolutionsStrings.js';
import ABSConstants from '../../common/ABSConstants.js';
import { combineOptions } from '../../../../phet-core/js/optionize.js';
import StringUnionProperty from '../../../../axon/js/StringUnionProperty.js';
import InitialConcentrationControl from './InitialConcentrationControl.js';
import StrengthControl from './StrengthControl.js';
import StringSwitch from './StringSwitch.js';
const AcidBaseTypeValues = ['acid', 'base'];
const WeakStrongTypeValues = ['weak', 'strong'];
export default class MySolutionPanel extends Panel {
  constructor(solutionTypeProperty, concentrationProperty, strengthProperty, contentAlignGroup,
  // so that both control panels have the same width
  tandem) {
    const options = combineOptions({}, ABSConstants.PANEL_OPTIONS, {
      tandem: tandem
    });

    //TODO https://github.com/phetsims/acid-base-solutions/issues/178 move to model
    const acidBaseProperty = new StringUnionProperty(solutionTypeToAcidBase(solutionTypeProperty.value), {
      validValues: AcidBaseTypeValues,
      tandem: tandem.createTandem('acidBaseProperty')
    });

    //TODO https://github.com/phetsims/acid-base-solutions/issues/178 move to model
    const weakStrongProperty = new StringUnionProperty(solutionTypeToWeakStrong(solutionTypeProperty.value), {
      validValues: WeakStrongTypeValues,
      tandem: tandem.createTandem('weakStrongProperty')
    });

    // title
    const titleText = new Text(AcidBaseSolutionsStrings.solutionStringProperty, {
      font: ABSConstants.TITLE_FONT,
      layoutOptions: {
        align: 'left'
      },
      maxWidth: 180,
      // determined empirically
      tandem: tandem.createTandem('titleText')
    });

    // Acid/Base switch
    const acidBaseSwitch = new StringSwitch(acidBaseProperty, 'acid', AcidBaseSolutionsStrings.acidStringProperty, 'base', AcidBaseSolutionsStrings.baseStringProperty, combineOptions({}, ABSConstants.STRING_SWITCH_OPTIONS, {
      tandem: tandem.createTandem('acidBaseSwitch')
    }));

    // Initial Concentration control
    const initialConcentrationControl = new InitialConcentrationControl(concentrationProperty, tandem.createTandem('initialConcentrationControl'));

    // Strength control
    const strengthControl = new StrengthControl(strengthProperty, weakStrongProperty, tandem.createTandem('strengthControl'));
    const content = new AlignBox(new VBox({
      spacing: 6,
      align: 'center',
      children: [titleText, acidBaseSwitch, new HSeparator(), initialConcentrationControl, new HSeparator(), strengthControl]
    }), {
      group: contentAlignGroup,
      xAlign: 'left'
    });
    super(content, options);

    // flag to prevent circular update of related Properties, see #152
    let updateSolutionTypeEnabled = true;

    // update solution type
    const updateSolutionType = () => {
      if (updateSolutionTypeEnabled) {
        const isAcid = acidBaseProperty.value === 'acid';
        const isWeak = weakStrongProperty.value === 'weak';
        if (isWeak && isAcid) {
          solutionTypeProperty.value = 'weakAcid';
        } else if (isWeak && !isAcid) {
          solutionTypeProperty.value = 'weakBase';
        } else if (!isWeak && isAcid) {
          solutionTypeProperty.value = 'strongAcid';
        } else if (!isWeak && !isAcid) {
          solutionTypeProperty.value = 'strongBase';
        }
      }
    };
    acidBaseProperty.link(updateSolutionType.bind(this));
    weakStrongProperty.link(updateSolutionType.bind(this));
    solutionTypeProperty.link(solutionType => {
      updateSolutionTypeEnabled = false;
      acidBaseProperty.value = solutionTypeToAcidBase(solutionType);
      weakStrongProperty.value = solutionTypeToWeakStrong(solutionType);
      updateSolutionTypeEnabled = true;
    });
  }
  dispose() {
    assert && assert(false, 'dispose is not supported, exists for the lifetime of the sim');
    super.dispose();
  }
}
function solutionTypeToAcidBase(solutionType) {
  return solutionType === 'weakAcid' || solutionType === 'strongAcid' ? 'acid' : 'base';
}
function solutionTypeToWeakStrong(solutionType) {
  return solutionType === 'weakAcid' || solutionType === 'weakBase' ? 'weak' : 'strong';
}
acidBaseSolutions.register('MySolutionPanel', MySolutionPanel);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBbGlnbkJveCIsIkhTZXBhcmF0b3IiLCJUZXh0IiwiVkJveCIsIlBhbmVsIiwiYWNpZEJhc2VTb2x1dGlvbnMiLCJBY2lkQmFzZVNvbHV0aW9uc1N0cmluZ3MiLCJBQlNDb25zdGFudHMiLCJjb21iaW5lT3B0aW9ucyIsIlN0cmluZ1VuaW9uUHJvcGVydHkiLCJJbml0aWFsQ29uY2VudHJhdGlvbkNvbnRyb2wiLCJTdHJlbmd0aENvbnRyb2wiLCJTdHJpbmdTd2l0Y2giLCJBY2lkQmFzZVR5cGVWYWx1ZXMiLCJXZWFrU3Ryb25nVHlwZVZhbHVlcyIsIk15U29sdXRpb25QYW5lbCIsImNvbnN0cnVjdG9yIiwic29sdXRpb25UeXBlUHJvcGVydHkiLCJjb25jZW50cmF0aW9uUHJvcGVydHkiLCJzdHJlbmd0aFByb3BlcnR5IiwiY29udGVudEFsaWduR3JvdXAiLCJ0YW5kZW0iLCJvcHRpb25zIiwiUEFORUxfT1BUSU9OUyIsImFjaWRCYXNlUHJvcGVydHkiLCJzb2x1dGlvblR5cGVUb0FjaWRCYXNlIiwidmFsdWUiLCJ2YWxpZFZhbHVlcyIsImNyZWF0ZVRhbmRlbSIsIndlYWtTdHJvbmdQcm9wZXJ0eSIsInNvbHV0aW9uVHlwZVRvV2Vha1N0cm9uZyIsInRpdGxlVGV4dCIsInNvbHV0aW9uU3RyaW5nUHJvcGVydHkiLCJmb250IiwiVElUTEVfRk9OVCIsImxheW91dE9wdGlvbnMiLCJhbGlnbiIsIm1heFdpZHRoIiwiYWNpZEJhc2VTd2l0Y2giLCJhY2lkU3RyaW5nUHJvcGVydHkiLCJiYXNlU3RyaW5nUHJvcGVydHkiLCJTVFJJTkdfU1dJVENIX09QVElPTlMiLCJpbml0aWFsQ29uY2VudHJhdGlvbkNvbnRyb2wiLCJzdHJlbmd0aENvbnRyb2wiLCJjb250ZW50Iiwic3BhY2luZyIsImNoaWxkcmVuIiwiZ3JvdXAiLCJ4QWxpZ24iLCJ1cGRhdGVTb2x1dGlvblR5cGVFbmFibGVkIiwidXBkYXRlU29sdXRpb25UeXBlIiwiaXNBY2lkIiwiaXNXZWFrIiwibGluayIsImJpbmQiLCJzb2x1dGlvblR5cGUiLCJkaXNwb3NlIiwiYXNzZXJ0IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJNeVNvbHV0aW9uUGFuZWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTQtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogTXlTb2x1dGlvblBhbmVsIGlzIHRoZSBwYW5lbCB0aXRsZWQgJ1NvbHV0aW9uJyBpbiB0aGUgJ015U29sdXRpb24nIHNjcmVlbi5cclxuICogSXQgaGFzIGNvbnRyb2xzIGZvciBtb2RpZnlpbmcgYSBjdXN0b20gc29sdXRpb25zLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEFuZHJleSBaZWxlbmtvdiAoTWxlYXJuZXIpXHJcbiAqIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQWxpZ25Cb3gsIEFsaWduR3JvdXAsIEhTZXBhcmF0b3IsIFRleHQsIFZCb3ggfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgUGFuZWwsIHsgUGFuZWxPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vLi4vc3VuL2pzL1BhbmVsLmpzJztcclxuaW1wb3J0IGFjaWRCYXNlU29sdXRpb25zIGZyb20gJy4uLy4uL2FjaWRCYXNlU29sdXRpb25zLmpzJztcclxuaW1wb3J0IEFjaWRCYXNlU29sdXRpb25zU3RyaW5ncyBmcm9tICcuLi8uLi9BY2lkQmFzZVNvbHV0aW9uc1N0cmluZ3MuanMnO1xyXG5pbXBvcnQgQUJTQ29uc3RhbnRzIGZyb20gJy4uLy4uL2NvbW1vbi9BQlNDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgeyBTb2x1dGlvblR5cGUgfSBmcm9tICcuLi8uLi9jb21tb24vbW9kZWwvU29sdXRpb25UeXBlLmpzJztcclxuaW1wb3J0IFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgeyBjb21iaW5lT3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uLy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xyXG5pbXBvcnQgU3RyaW5nVW5pb25Qcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1N0cmluZ1VuaW9uUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgSW5pdGlhbENvbmNlbnRyYXRpb25Db250cm9sIGZyb20gJy4vSW5pdGlhbENvbmNlbnRyYXRpb25Db250cm9sLmpzJztcclxuaW1wb3J0IFN0cmVuZ3RoQ29udHJvbCBmcm9tICcuL1N0cmVuZ3RoQ29udHJvbC5qcyc7XHJcbmltcG9ydCBTdHJpbmdTd2l0Y2gsIHsgU3RyaW5nU3dpdGNoT3B0aW9ucyB9IGZyb20gJy4vU3RyaW5nU3dpdGNoLmpzJztcclxuXHJcbmNvbnN0IEFjaWRCYXNlVHlwZVZhbHVlcyA9IFsgJ2FjaWQnLCAnYmFzZScgXSBhcyBjb25zdDtcclxuZXhwb3J0IHR5cGUgQWNpZEJhc2VUeXBlID0gKCB0eXBlb2YgQWNpZEJhc2VUeXBlVmFsdWVzIClbbnVtYmVyXTtcclxuXHJcbmNvbnN0IFdlYWtTdHJvbmdUeXBlVmFsdWVzID0gWyAnd2VhaycsICdzdHJvbmcnIF0gYXMgY29uc3Q7XHJcbmV4cG9ydCB0eXBlIFdlYWtTdHJvbmdUeXBlID0gKCB0eXBlb2YgV2Vha1N0cm9uZ1R5cGVWYWx1ZXMgKVtudW1iZXJdO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTXlTb2x1dGlvblBhbmVsIGV4dGVuZHMgUGFuZWwge1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIHNvbHV0aW9uVHlwZVByb3BlcnR5OiBQcm9wZXJ0eTxTb2x1dGlvblR5cGU+LFxyXG4gICAgICAgICAgICAgICAgICAgICAgY29uY2VudHJhdGlvblByb3BlcnR5OiBQcm9wZXJ0eTxudW1iZXI+LFxyXG4gICAgICAgICAgICAgICAgICAgICAgc3RyZW5ndGhQcm9wZXJ0eTogUHJvcGVydHk8bnVtYmVyPixcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRBbGlnbkdyb3VwOiBBbGlnbkdyb3VwLCAvLyBzbyB0aGF0IGJvdGggY29udHJvbCBwYW5lbHMgaGF2ZSB0aGUgc2FtZSB3aWR0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgdGFuZGVtOiBUYW5kZW0gKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IGNvbWJpbmVPcHRpb25zPFBhbmVsT3B0aW9ucz4oIHt9LCBBQlNDb25zdGFudHMuUEFORUxfT1BUSU9OUywge1xyXG4gICAgICB0YW5kZW06IHRhbmRlbVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vVE9ETyBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvYWNpZC1iYXNlLXNvbHV0aW9ucy9pc3N1ZXMvMTc4IG1vdmUgdG8gbW9kZWxcclxuICAgIGNvbnN0IGFjaWRCYXNlUHJvcGVydHkgPSBuZXcgU3RyaW5nVW5pb25Qcm9wZXJ0eSggc29sdXRpb25UeXBlVG9BY2lkQmFzZSggc29sdXRpb25UeXBlUHJvcGVydHkudmFsdWUgKSwge1xyXG4gICAgICB2YWxpZFZhbHVlczogQWNpZEJhc2VUeXBlVmFsdWVzLFxyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdhY2lkQmFzZVByb3BlcnR5JyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy9UT0RPIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9hY2lkLWJhc2Utc29sdXRpb25zL2lzc3Vlcy8xNzggbW92ZSB0byBtb2RlbFxyXG4gICAgY29uc3Qgd2Vha1N0cm9uZ1Byb3BlcnR5ID0gbmV3IFN0cmluZ1VuaW9uUHJvcGVydHkoIHNvbHV0aW9uVHlwZVRvV2Vha1N0cm9uZyggc29sdXRpb25UeXBlUHJvcGVydHkudmFsdWUgKSwge1xyXG4gICAgICB2YWxpZFZhbHVlczogV2Vha1N0cm9uZ1R5cGVWYWx1ZXMsXHJcbiAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3dlYWtTdHJvbmdQcm9wZXJ0eScgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIHRpdGxlXHJcbiAgICBjb25zdCB0aXRsZVRleHQgPSBuZXcgVGV4dCggQWNpZEJhc2VTb2x1dGlvbnNTdHJpbmdzLnNvbHV0aW9uU3RyaW5nUHJvcGVydHksIHtcclxuICAgICAgZm9udDogQUJTQ29uc3RhbnRzLlRJVExFX0ZPTlQsXHJcbiAgICAgIGxheW91dE9wdGlvbnM6IHtcclxuICAgICAgICBhbGlnbjogJ2xlZnQnXHJcbiAgICAgIH0sXHJcbiAgICAgIG1heFdpZHRoOiAxODAsIC8vIGRldGVybWluZWQgZW1waXJpY2FsbHlcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAndGl0bGVUZXh0JyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gQWNpZC9CYXNlIHN3aXRjaFxyXG4gICAgY29uc3QgYWNpZEJhc2VTd2l0Y2ggPSBuZXcgU3RyaW5nU3dpdGNoKCBhY2lkQmFzZVByb3BlcnR5LFxyXG4gICAgICAnYWNpZCcsIEFjaWRCYXNlU29sdXRpb25zU3RyaW5ncy5hY2lkU3RyaW5nUHJvcGVydHksXHJcbiAgICAgICdiYXNlJywgQWNpZEJhc2VTb2x1dGlvbnNTdHJpbmdzLmJhc2VTdHJpbmdQcm9wZXJ0eSxcclxuICAgICAgY29tYmluZU9wdGlvbnM8U3RyaW5nU3dpdGNoT3B0aW9ucz4oIHt9LCBBQlNDb25zdGFudHMuU1RSSU5HX1NXSVRDSF9PUFRJT05TLCB7XHJcbiAgICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnYWNpZEJhc2VTd2l0Y2gnIClcclxuICAgICAgfSApICk7XHJcblxyXG4gICAgLy8gSW5pdGlhbCBDb25jZW50cmF0aW9uIGNvbnRyb2xcclxuICAgIGNvbnN0IGluaXRpYWxDb25jZW50cmF0aW9uQ29udHJvbCA9IG5ldyBJbml0aWFsQ29uY2VudHJhdGlvbkNvbnRyb2woIGNvbmNlbnRyYXRpb25Qcm9wZXJ0eSxcclxuICAgICAgdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2luaXRpYWxDb25jZW50cmF0aW9uQ29udHJvbCcgKSApO1xyXG5cclxuICAgIC8vIFN0cmVuZ3RoIGNvbnRyb2xcclxuICAgIGNvbnN0IHN0cmVuZ3RoQ29udHJvbCA9IG5ldyBTdHJlbmd0aENvbnRyb2woIHN0cmVuZ3RoUHJvcGVydHksIHdlYWtTdHJvbmdQcm9wZXJ0eSxcclxuICAgICAgdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3N0cmVuZ3RoQ29udHJvbCcgKSApO1xyXG5cclxuICAgIGNvbnN0IGNvbnRlbnQgPSBuZXcgQWxpZ25Cb3goIG5ldyBWQm94KCB7XHJcbiAgICAgIHNwYWNpbmc6IDYsXHJcbiAgICAgIGFsaWduOiAnY2VudGVyJyxcclxuICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICB0aXRsZVRleHQsXHJcbiAgICAgICAgYWNpZEJhc2VTd2l0Y2gsXHJcbiAgICAgICAgbmV3IEhTZXBhcmF0b3IoKSxcclxuICAgICAgICBpbml0aWFsQ29uY2VudHJhdGlvbkNvbnRyb2wsXHJcbiAgICAgICAgbmV3IEhTZXBhcmF0b3IoKSxcclxuICAgICAgICBzdHJlbmd0aENvbnRyb2xcclxuICAgICAgXVxyXG4gICAgfSApLCB7XHJcbiAgICAgIGdyb3VwOiBjb250ZW50QWxpZ25Hcm91cCxcclxuICAgICAgeEFsaWduOiAnbGVmdCdcclxuICAgIH0gKTtcclxuXHJcbiAgICBzdXBlciggY29udGVudCwgb3B0aW9ucyApO1xyXG5cclxuICAgIC8vIGZsYWcgdG8gcHJldmVudCBjaXJjdWxhciB1cGRhdGUgb2YgcmVsYXRlZCBQcm9wZXJ0aWVzLCBzZWUgIzE1MlxyXG4gICAgbGV0IHVwZGF0ZVNvbHV0aW9uVHlwZUVuYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgIC8vIHVwZGF0ZSBzb2x1dGlvbiB0eXBlXHJcbiAgICBjb25zdCB1cGRhdGVTb2x1dGlvblR5cGUgPSAoKSA9PiB7XHJcblxyXG4gICAgICBpZiAoIHVwZGF0ZVNvbHV0aW9uVHlwZUVuYWJsZWQgKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGlzQWNpZCA9ICggYWNpZEJhc2VQcm9wZXJ0eS52YWx1ZSA9PT0gJ2FjaWQnICk7XHJcbiAgICAgICAgY29uc3QgaXNXZWFrID0gKCB3ZWFrU3Ryb25nUHJvcGVydHkudmFsdWUgPT09ICd3ZWFrJyApO1xyXG5cclxuICAgICAgICBpZiAoIGlzV2VhayAmJiBpc0FjaWQgKSB7XHJcbiAgICAgICAgICBzb2x1dGlvblR5cGVQcm9wZXJ0eS52YWx1ZSA9ICd3ZWFrQWNpZCc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCBpc1dlYWsgJiYgIWlzQWNpZCApIHtcclxuICAgICAgICAgIHNvbHV0aW9uVHlwZVByb3BlcnR5LnZhbHVlID0gJ3dlYWtCYXNlJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoICFpc1dlYWsgJiYgaXNBY2lkICkge1xyXG4gICAgICAgICAgc29sdXRpb25UeXBlUHJvcGVydHkudmFsdWUgPSAnc3Ryb25nQWNpZCc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCAhaXNXZWFrICYmICFpc0FjaWQgKSB7XHJcbiAgICAgICAgICBzb2x1dGlvblR5cGVQcm9wZXJ0eS52YWx1ZSA9ICdzdHJvbmdCYXNlJztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBhY2lkQmFzZVByb3BlcnR5LmxpbmsoIHVwZGF0ZVNvbHV0aW9uVHlwZS5iaW5kKCB0aGlzICkgKTtcclxuICAgIHdlYWtTdHJvbmdQcm9wZXJ0eS5saW5rKCB1cGRhdGVTb2x1dGlvblR5cGUuYmluZCggdGhpcyApICk7XHJcblxyXG4gICAgc29sdXRpb25UeXBlUHJvcGVydHkubGluayggc29sdXRpb25UeXBlID0+IHtcclxuICAgICAgdXBkYXRlU29sdXRpb25UeXBlRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICBhY2lkQmFzZVByb3BlcnR5LnZhbHVlID0gc29sdXRpb25UeXBlVG9BY2lkQmFzZSggc29sdXRpb25UeXBlICk7XHJcbiAgICAgIHdlYWtTdHJvbmdQcm9wZXJ0eS52YWx1ZSA9IHNvbHV0aW9uVHlwZVRvV2Vha1N0cm9uZyggc29sdXRpb25UeXBlICk7XHJcbiAgICAgIHVwZGF0ZVNvbHV0aW9uVHlwZUVuYWJsZWQgPSB0cnVlO1xyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG92ZXJyaWRlIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBmYWxzZSwgJ2Rpc3Bvc2UgaXMgbm90IHN1cHBvcnRlZCwgZXhpc3RzIGZvciB0aGUgbGlmZXRpbWUgb2YgdGhlIHNpbScgKTtcclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNvbHV0aW9uVHlwZVRvQWNpZEJhc2UoIHNvbHV0aW9uVHlwZTogU29sdXRpb25UeXBlICk6IEFjaWRCYXNlVHlwZSB7XHJcbiAgcmV0dXJuICggc29sdXRpb25UeXBlID09PSAnd2Vha0FjaWQnIHx8IHNvbHV0aW9uVHlwZSA9PT0gJ3N0cm9uZ0FjaWQnICkgPyAnYWNpZCcgOiAnYmFzZSc7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNvbHV0aW9uVHlwZVRvV2Vha1N0cm9uZyggc29sdXRpb25UeXBlOiBTb2x1dGlvblR5cGUgKTogV2Vha1N0cm9uZ1R5cGUge1xyXG4gIHJldHVybiAoIHNvbHV0aW9uVHlwZSA9PT0gJ3dlYWtBY2lkJyB8fCBzb2x1dGlvblR5cGUgPT09ICd3ZWFrQmFzZScgKSA/ICd3ZWFrJyA6ICdzdHJvbmcnO1xyXG59XHJcblxyXG5hY2lkQmFzZVNvbHV0aW9ucy5yZWdpc3RlciggJ015U29sdXRpb25QYW5lbCcsIE15U29sdXRpb25QYW5lbCApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBU0EsUUFBUSxF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