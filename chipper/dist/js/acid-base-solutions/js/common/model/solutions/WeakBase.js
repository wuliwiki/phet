// Copyright 2014-2022, University of Colorado Boulder

/**
 * WeakBase is an aqueous solution whose solute is a weak base.
 *
 * @author Andrey Zelenkov (Mlearner)
 * @author Chris Malley (PixelZoom, Inc.)
 */

import acidBaseSolutions from '../../../acidBaseSolutions.js';
import ABSConstants from '../../ABSConstants.js';
import AqueousSolution from './AqueousSolution.js';
import ABSColors from '../../ABSColors.js';
export default class WeakBase extends AqueousSolution {
  constructor(tandem) {
    // particless found in this solution
    const particles = [{
      key: 'B',
      color: ABSColors.B,
      getConcentration: () => this.getSoluteConcentration()
    }, {
      key: 'H2O',
      color: ABSColors.H2O,
      getConcentration: () => this.getH2OConcentration()
    }, {
      key: 'BH',
      color: ABSColors.BH,
      getConcentration: () => this.getProductConcentration()
    }, {
      key: 'OH',
      color: ABSColors.OH,
      getConcentration: () => this.getOHConcentration()
    }];
    super('weakBase', ABSConstants.WEAK_STRENGTH_RANGE.defaultValue, ABSConstants.CONCENTRATION_RANGE.defaultValue, particles, tandem);
  }

  // [B] = c - [BH+]
  getSoluteConcentration() {
    return this.getConcentration() - this.getProductConcentration();
  }

  // [BH+] = ( -Kb + sqrt( Kb*Kb + 4*Kb*c ) ) / 2
  getProductConcentration() {
    const Kb = this.getStrength();
    const c = this.getConcentration();
    return (-Kb + Math.sqrt(Kb * Kb + 4 * Kb * c)) / 2;
  }

  // [H3O+] = Kw / [OH-]
  getH3OConcentration() {
    return ABSConstants.WATER_EQUILIBRIUM_CONSTANT / this.getOHConcentration();
  }

  // [OH-] = [BH+]
  getOHConcentration() {
    return this.getProductConcentration();
  }

  // [H2O] = W - [BH+]
  getH2OConcentration() {
    return ABSConstants.WATER_CONCENTRATION - this.getProductConcentration();
  }

  // Is strength in the weak range?
  isValidStrength(strength) {
    return ABSConstants.WEAK_STRENGTH_RANGE.contains(strength);
  }
}
acidBaseSolutions.register('WeakBase', WeakBase);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhY2lkQmFzZVNvbHV0aW9ucyIsIkFCU0NvbnN0YW50cyIsIkFxdWVvdXNTb2x1dGlvbiIsIkFCU0NvbG9ycyIsIldlYWtCYXNlIiwiY29uc3RydWN0b3IiLCJ0YW5kZW0iLCJwYXJ0aWNsZXMiLCJrZXkiLCJjb2xvciIsIkIiLCJnZXRDb25jZW50cmF0aW9uIiwiZ2V0U29sdXRlQ29uY2VudHJhdGlvbiIsIkgyTyIsImdldEgyT0NvbmNlbnRyYXRpb24iLCJCSCIsImdldFByb2R1Y3RDb25jZW50cmF0aW9uIiwiT0giLCJnZXRPSENvbmNlbnRyYXRpb24iLCJXRUFLX1NUUkVOR1RIX1JBTkdFIiwiZGVmYXVsdFZhbHVlIiwiQ09OQ0VOVFJBVElPTl9SQU5HRSIsIktiIiwiZ2V0U3RyZW5ndGgiLCJjIiwiTWF0aCIsInNxcnQiLCJnZXRIM09Db25jZW50cmF0aW9uIiwiV0FURVJfRVFVSUxJQlJJVU1fQ09OU1RBTlQiLCJXQVRFUl9DT05DRU5UUkFUSU9OIiwiaXNWYWxpZFN0cmVuZ3RoIiwic3RyZW5ndGgiLCJjb250YWlucyIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiV2Vha0Jhc2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTQtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogV2Vha0Jhc2UgaXMgYW4gYXF1ZW91cyBzb2x1dGlvbiB3aG9zZSBzb2x1dGUgaXMgYSB3ZWFrIGJhc2UuXHJcbiAqXHJcbiAqIEBhdXRob3IgQW5kcmV5IFplbGVua292IChNbGVhcm5lcilcclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICovXHJcblxyXG5pbXBvcnQgYWNpZEJhc2VTb2x1dGlvbnMgZnJvbSAnLi4vLi4vLi4vYWNpZEJhc2VTb2x1dGlvbnMuanMnO1xyXG5pbXBvcnQgQUJTQ29uc3RhbnRzIGZyb20gJy4uLy4uL0FCU0NvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBBcXVlb3VzU29sdXRpb24gZnJvbSAnLi9BcXVlb3VzU29sdXRpb24uanMnO1xyXG5pbXBvcnQgQUJTQ29sb3JzIGZyb20gJy4uLy4uL0FCU0NvbG9ycy5qcyc7XHJcbmltcG9ydCBUYW5kZW0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vdGFuZGVtL2pzL1RhbmRlbS5qcyc7XHJcbmltcG9ydCB7IFBhcnRpY2xlIH0gZnJvbSAnLi9QYXJ0aWNsZS5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXZWFrQmFzZSBleHRlbmRzIEFxdWVvdXNTb2x1dGlvbiB7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggdGFuZGVtOiBUYW5kZW0gKSB7XHJcblxyXG4gICAgLy8gcGFydGljbGVzcyBmb3VuZCBpbiB0aGlzIHNvbHV0aW9uXHJcbiAgICBjb25zdCBwYXJ0aWNsZXM6IFBhcnRpY2xlW10gPSBbXHJcbiAgICAgIHsga2V5OiAnQicsIGNvbG9yOiBBQlNDb2xvcnMuQiwgZ2V0Q29uY2VudHJhdGlvbjogKCkgPT4gdGhpcy5nZXRTb2x1dGVDb25jZW50cmF0aW9uKCkgfSxcclxuICAgICAgeyBrZXk6ICdIMk8nLCBjb2xvcjogQUJTQ29sb3JzLkgyTywgZ2V0Q29uY2VudHJhdGlvbjogKCkgPT4gdGhpcy5nZXRIMk9Db25jZW50cmF0aW9uKCkgfSxcclxuICAgICAgeyBrZXk6ICdCSCcsIGNvbG9yOiBBQlNDb2xvcnMuQkgsIGdldENvbmNlbnRyYXRpb246ICgpID0+IHRoaXMuZ2V0UHJvZHVjdENvbmNlbnRyYXRpb24oKSB9LFxyXG4gICAgICB7IGtleTogJ09IJywgY29sb3I6IEFCU0NvbG9ycy5PSCwgZ2V0Q29uY2VudHJhdGlvbjogKCkgPT4gdGhpcy5nZXRPSENvbmNlbnRyYXRpb24oKSB9XHJcbiAgICBdO1xyXG5cclxuICAgIHN1cGVyKCAnd2Vha0Jhc2UnLCBBQlNDb25zdGFudHMuV0VBS19TVFJFTkdUSF9SQU5HRS5kZWZhdWx0VmFsdWUsIEFCU0NvbnN0YW50cy5DT05DRU5UUkFUSU9OX1JBTkdFLmRlZmF1bHRWYWx1ZSxcclxuICAgICAgcGFydGljbGVzLCB0YW5kZW0gKTtcclxuICB9XHJcblxyXG4gIC8vIFtCXSA9IGMgLSBbQkgrXVxyXG4gIHB1YmxpYyBvdmVycmlkZSBnZXRTb2x1dGVDb25jZW50cmF0aW9uKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gKCB0aGlzLmdldENvbmNlbnRyYXRpb24oKSAtIHRoaXMuZ2V0UHJvZHVjdENvbmNlbnRyYXRpb24oKSApO1xyXG4gIH1cclxuXHJcbiAgLy8gW0JIK10gPSAoIC1LYiArIHNxcnQoIEtiKktiICsgNCpLYipjICkgKSAvIDJcclxuICBwdWJsaWMgb3ZlcnJpZGUgZ2V0UHJvZHVjdENvbmNlbnRyYXRpb24oKTogbnVtYmVyIHtcclxuICAgIGNvbnN0IEtiID0gdGhpcy5nZXRTdHJlbmd0aCgpO1xyXG4gICAgY29uc3QgYyA9IHRoaXMuZ2V0Q29uY2VudHJhdGlvbigpO1xyXG4gICAgcmV0dXJuICggLUtiICsgTWF0aC5zcXJ0KCAoIEtiICogS2IgKSArICggNCAqIEtiICogYyApICkgKSAvIDI7XHJcbiAgfVxyXG5cclxuICAvLyBbSDNPK10gPSBLdyAvIFtPSC1dXHJcbiAgcHVibGljIG92ZXJyaWRlIGdldEgzT0NvbmNlbnRyYXRpb24oKTogbnVtYmVyIHtcclxuICAgIHJldHVybiBBQlNDb25zdGFudHMuV0FURVJfRVFVSUxJQlJJVU1fQ09OU1RBTlQgLyB0aGlzLmdldE9IQ29uY2VudHJhdGlvbigpO1xyXG4gIH1cclxuXHJcbiAgLy8gW09ILV0gPSBbQkgrXVxyXG4gIHB1YmxpYyBvdmVycmlkZSBnZXRPSENvbmNlbnRyYXRpb24oKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLmdldFByb2R1Y3RDb25jZW50cmF0aW9uKCk7XHJcbiAgfVxyXG5cclxuICAvLyBbSDJPXSA9IFcgLSBbQkgrXVxyXG4gIHB1YmxpYyBvdmVycmlkZSBnZXRIMk9Db25jZW50cmF0aW9uKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gKCBBQlNDb25zdGFudHMuV0FURVJfQ09OQ0VOVFJBVElPTiAtIHRoaXMuZ2V0UHJvZHVjdENvbmNlbnRyYXRpb24oKSApO1xyXG4gIH1cclxuXHJcbiAgLy8gSXMgc3RyZW5ndGggaW4gdGhlIHdlYWsgcmFuZ2U/XHJcbiAgcHJvdGVjdGVkIG92ZXJyaWRlIGlzVmFsaWRTdHJlbmd0aCggc3RyZW5ndGg6IG51bWJlciApOiBib29sZWFuIHtcclxuICAgIHJldHVybiBBQlNDb25zdGFudHMuV0VBS19TVFJFTkdUSF9SQU5HRS5jb250YWlucyggc3RyZW5ndGggKTtcclxuICB9XHJcbn1cclxuXHJcbmFjaWRCYXNlU29sdXRpb25zLnJlZ2lzdGVyKCAnV2Vha0Jhc2UnLCBXZWFrQmFzZSApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGlCQUFpQixNQUFNLCtCQUErQjtBQUM3RCxPQUFPQyxZQUFZLE1BQU0sdUJBQXVCO0FBQ2hELE9BQU9DLGVBQWUsTUFBTSxzQkFBc0I7QUFDbEQsT0FBT0MsU0FBUyxNQUFNLG9CQUFvQjtBQUkxQyxlQUFlLE1BQU1DLFFBQVEsU0FBU0YsZUFBZSxDQUFDO0VBRTdDRyxXQUFXQSxDQUFFQyxNQUFjLEVBQUc7SUFFbkM7SUFDQSxNQUFNQyxTQUFxQixHQUFHLENBQzVCO01BQUVDLEdBQUcsRUFBRSxHQUFHO01BQUVDLEtBQUssRUFBRU4sU0FBUyxDQUFDTyxDQUFDO01BQUVDLGdCQUFnQixFQUFFQSxDQUFBLEtBQU0sSUFBSSxDQUFDQyxzQkFBc0IsQ0FBQztJQUFFLENBQUMsRUFDdkY7TUFBRUosR0FBRyxFQUFFLEtBQUs7TUFBRUMsS0FBSyxFQUFFTixTQUFTLENBQUNVLEdBQUc7TUFBRUYsZ0JBQWdCLEVBQUVBLENBQUEsS0FBTSxJQUFJLENBQUNHLG1CQUFtQixDQUFDO0lBQUUsQ0FBQyxFQUN4RjtNQUFFTixHQUFHLEVBQUUsSUFBSTtNQUFFQyxLQUFLLEVBQUVOLFNBQVMsQ0FBQ1ksRUFBRTtNQUFFSixnQkFBZ0IsRUFBRUEsQ0FBQSxLQUFNLElBQUksQ0FBQ0ssdUJBQXVCLENBQUM7SUFBRSxDQUFDLEVBQzFGO01BQUVSLEdBQUcsRUFBRSxJQUFJO01BQUVDLEtBQUssRUFBRU4sU0FBUyxDQUFDYyxFQUFFO01BQUVOLGdCQUFnQixFQUFFQSxDQUFBLEtBQU0sSUFBSSxDQUFDTyxrQkFBa0IsQ0FBQztJQUFFLENBQUMsQ0FDdEY7SUFFRCxLQUFLLENBQUUsVUFBVSxFQUFFakIsWUFBWSxDQUFDa0IsbUJBQW1CLENBQUNDLFlBQVksRUFBRW5CLFlBQVksQ0FBQ29CLG1CQUFtQixDQUFDRCxZQUFZLEVBQzdHYixTQUFTLEVBQUVELE1BQU8sQ0FBQztFQUN2Qjs7RUFFQTtFQUNnQk0sc0JBQXNCQSxDQUFBLEVBQVc7SUFDL0MsT0FBUyxJQUFJLENBQUNELGdCQUFnQixDQUFDLENBQUMsR0FBRyxJQUFJLENBQUNLLHVCQUF1QixDQUFDLENBQUM7RUFDbkU7O0VBRUE7RUFDZ0JBLHVCQUF1QkEsQ0FBQSxFQUFXO0lBQ2hELE1BQU1NLEVBQUUsR0FBRyxJQUFJLENBQUNDLFdBQVcsQ0FBQyxDQUFDO0lBQzdCLE1BQU1DLENBQUMsR0FBRyxJQUFJLENBQUNiLGdCQUFnQixDQUFDLENBQUM7SUFDakMsT0FBTyxDQUFFLENBQUNXLEVBQUUsR0FBR0csSUFBSSxDQUFDQyxJQUFJLENBQUlKLEVBQUUsR0FBR0EsRUFBRSxHQUFPLENBQUMsR0FBR0EsRUFBRSxHQUFHRSxDQUFJLENBQUMsSUFBSyxDQUFDO0VBQ2hFOztFQUVBO0VBQ2dCRyxtQkFBbUJBLENBQUEsRUFBVztJQUM1QyxPQUFPMUIsWUFBWSxDQUFDMkIsMEJBQTBCLEdBQUcsSUFBSSxDQUFDVixrQkFBa0IsQ0FBQyxDQUFDO0VBQzVFOztFQUVBO0VBQ2dCQSxrQkFBa0JBLENBQUEsRUFBVztJQUMzQyxPQUFPLElBQUksQ0FBQ0YsdUJBQXVCLENBQUMsQ0FBQztFQUN2Qzs7RUFFQTtFQUNnQkYsbUJBQW1CQSxDQUFBLEVBQVc7SUFDNUMsT0FBU2IsWUFBWSxDQUFDNEIsbUJBQW1CLEdBQUcsSUFBSSxDQUFDYix1QkFBdUIsQ0FBQyxDQUFDO0VBQzVFOztFQUVBO0VBQ21CYyxlQUFlQSxDQUFFQyxRQUFnQixFQUFZO0lBQzlELE9BQU85QixZQUFZLENBQUNrQixtQkFBbUIsQ0FBQ2EsUUFBUSxDQUFFRCxRQUFTLENBQUM7RUFDOUQ7QUFDRjtBQUVBL0IsaUJBQWlCLENBQUNpQyxRQUFRLENBQUUsVUFBVSxFQUFFN0IsUUFBUyxDQUFDIn0=