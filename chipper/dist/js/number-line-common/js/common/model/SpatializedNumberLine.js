// Copyright 2020-2022, University of Colorado Boulder

/**
 * SpatializedNumberLine is a model of a number line that is projected into 2D space.  It also tracks a number of other
 * pieces of information that control how the number line is displayed when presented to the user.
 *
 * @author John Blanco (PhET Interactive Simulations)
 * @author Chris Klusendorf (PhET Interactive Simulations)
 */

import BooleanProperty from '../../../../axon/js/BooleanProperty.js';
import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import EnumerationProperty from '../../../../axon/js/EnumerationProperty.js';
import Property from '../../../../axon/js/Property.js';
import Bounds2 from '../../../../dot/js/Bounds2.js';
import Range from '../../../../dot/js/Range.js';
import Utils from '../../../../dot/js/Utils.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import Vector2Property from '../../../../dot/js/Vector2Property.js';
import { Line } from '../../../../kite/js/imports.js';
import NumberLine from '../../../../number-line-common/js/common/model/NumberLine.js';
import merge from '../../../../phet-core/js/merge.js';
import Orientation from '../../../../phet-core/js/Orientation.js';
import numberLineCommon from '../../numberLineCommon.js';
class SpatializedNumberLine extends NumberLine {
  /**
   * {Vector2} initialZeroPosition - the position in model space of the zero point on the number line
   * {Object} [options]
   * @public
   */
  constructor(initialZeroPosition, options) {
    super(options);
    options = merge({
      // {Orientation} - whether the number line is initially oriented in the horizontal or vertical direction
      initialOrientation: Orientation.HORIZONTAL,
      // {Range} - range of values to be displayed
      initialDisplayedRange: new Range(-10, 10),
      // {boolean} - whether point labels should initially be shown
      labelsInitiallyVisible: false,
      // {boolean} - whether tick marks should be initially displayed
      tickMarksInitiallyVisible: false,
      // {boolean} - whether absolute value indicators should be initially displayed
      absoluteValuesInitiallyVisible: false,
      // {number} - The width and height values used when projecting the number line into model space. The default
      // values are pretty arbitrary and at least one of these will generally need to be set. However, if the number
      // line is only ever shown in one orientation, the value corresponding to the other orientation can be left at
      // the default value.
      widthInModelSpace: 100,
      heightInModelSpace: 100,
      // {number} perpendicular distance from number line in model/view coords where points get created
      pointCreationPerpendicularDistance: 60,
      // {number} distance from the end of the number line in model/view coords where points get created
      pointCreationEndDistance: 20,
      // {number} perpendicular distance from number line in model/view coords where points get removed
      pointRemovalPerpendicularDistance: 120,
      // {number} distance from the end of the number line in model/view coords where points get removed
      pointRemovalEndDistance: 25
    }, options);

    // @public {Vector2Property} - center in model space where this number line exists
    this.centerPositionProperty = new Vector2Property(initialZeroPosition);

    // @public {Property} - the value used to scale from model coordinates to number line distance
    this.orientationProperty = new EnumerationProperty(options.initialOrientation);

    // @public {Property.<Range>} - the range of values that should be displayed to the user
    this.displayedRangeProperty = new Property(options.initialDisplayedRange, {
      valueType: Range
    });

    // @public {BooleanProperty} - controls whether point labels are displayed to the user
    this.showPointLabelsProperty = new BooleanProperty(options.labelsInitiallyVisible);

    // @public {BooleanProperty} - controls whether tick marks should be displayed to the user
    this.showTickMarksProperty = new BooleanProperty(options.tickMarksInitiallyVisible);

    // @public {BooleanProperty} - controls whether tick marks should be displayed to the user
    this.showAbsoluteValuesProperty = new BooleanProperty(options.absoluteValuesInitiallyVisible);

    // @public {BooleanProperty} - controls whether tick marks should be displayed to the user
    this.showOppositesProperty = new BooleanProperty(false);

    // @private - 2D scale for transforming between model coordinates and number line position
    this.modelToPositonScale = Vector2.ZERO.copy();
    this.displayedRangeProperty.link(displayedRange => {
      this.modelToPositonScale = new Vector2(displayedRange.getLength() / options.widthInModelSpace, displayedRange.getLength() / options.heightInModelSpace);
    });

    // @public (read-only) {Property.<Line>} - The line into which the number line is projected in model space. This only
    // includes the displayed range and nothing beyond that.
    this.modelProjectedLineProperty = new DerivedProperty([this.centerPositionProperty, this.orientationProperty, this.displayedRangeProperty], (centerPosition, orientation, displayedRange) => {
      let x1;
      let y1;
      let x2;
      let y2;
      if (orientation === Orientation.HORIZONTAL) {
        x1 = centerPosition.x + displayedRange.min / this.modelToPositonScale.x;
        x2 = centerPosition.x + displayedRange.max / this.modelToPositonScale.x;
        y1 = centerPosition.y;
        y2 = centerPosition.y;
      } else {
        x1 = centerPosition.x;
        x2 = centerPosition.x;
        y1 = centerPosition.y + displayedRange.min / this.modelToPositonScale.y;
        y2 = centerPosition.y + displayedRange.max / this.modelToPositonScale.y;
      }
      return new Line(new Vector2(x1, y1), new Vector2(x2, y2));
    });

    // @private
    this.pointCreationPerpendicularDistance = options.pointCreationPerpendicularDistance;
    this.pointCreationEndDistance = options.pointCreationEndDistance;
    this.pointRemovalPerpendicularDistance = options.pointRemovalPerpendicularDistance;
    this.pointRemovalEndDistance = options.pointRemovalEndDistance;
  }

  /**
   * whether this number line is in the horizontal orientation
   * @returns {boolean}
   * @public
   */
  get isHorizontal() {
    return this.orientationProperty.value === Orientation.HORIZONTAL;
  }

  /**
   * whether this number line is in the horizontal orientation
   * @returns {boolean}
   * @public
   */
  get isVertical() {
    return this.orientationProperty.value === Orientation.VERTICAL;
  }

  /**
   * Project a position in model space into a 1D value on the number line.
   * @param {Vector2} modelPosition
   * @returns {number}
   * @public
   */
  modelPositionToValue(modelPosition) {
    assert && assert(!this.modelToPositonScale.equals(Vector2.ZERO), 'must set model display bounds if using this method');
    let numberLineValue;
    if (this.isHorizontal) {
      numberLineValue = (modelPosition.x - this.centerPositionProperty.value.x) * this.modelToPositonScale.x;
    } else {
      numberLineValue = (modelPosition.y - this.centerPositionProperty.value.y) * -this.modelToPositonScale.y;
    }
    return numberLineValue;
  }

  /**
   * Convert a value on the number line to a position in 2D model space.
   * @param {number} numberLineValue
   * @returns {Vector2}
   * @public
   */
  valueToModelPosition(numberLineValue) {
    let modelPosition;
    if (this.isHorizontal) {
      modelPosition = new Vector2(numberLineValue / this.modelToPositonScale.x + this.centerPositionProperty.value.x, this.centerPositionProperty.value.y);
    } else {
      modelPosition = new Vector2(this.centerPositionProperty.value.x, numberLineValue / -this.modelToPositonScale.y + this.centerPositionProperty.value.y);
    }
    return modelPosition;
  }

  /**
   * Get the positive or negative distance in model space from the zero point on the number line to the provided value.
   * @param numberLineValue
   * @returns {number}
   * @public
   */
  getScaledOffsetFromZero(numberLineValue) {
    let scaledOffsetFromZero;
    if (this.isHorizontal) {
      scaledOffsetFromZero = numberLineValue / this.modelToPositonScale.x;
    } else {
      scaledOffsetFromZero = numberLineValue / -this.modelToPositonScale.y;
    }
    return scaledOffsetFromZero;
  }

  /**
   * Whether the provided point controller position is within range for a number line point to be created.
   * @param {Vector2} pointControllerPosition
   * @returns {boolean}
   * @public
   */
  isWithinPointCreationDistance(pointControllerPosition) {
    return this.isWithinDistance(pointControllerPosition, this.pointCreationPerpendicularDistance, this.pointCreationEndDistance);
  }

  /**
   * Whether the provided point controller position is within range for a number line point to be removed.
   * @param {Vector2} pointControllerPosition
   * @returns {boolean}
   * @public
   */
  isWithinPointRemovalDistance(pointControllerPosition) {
    return this.isWithinDistance(pointControllerPosition, this.pointRemovalPerpendicularDistance, this.pointRemovalEndDistance);
  }

  /**
   * Check whether the provided point is within the current displayed range of the number line.  The point does not have
   * to be resident on the number line.
   * @param {NumberLinePoint} point
   * @public
   */
  isPointInDisplayedRange(point) {
    return this.displayedRangeProperty.value.contains(point.valueProperty.value);
  }

  /**
   * Return true if the provided position is within range of the provided distance, false if not.
   * @param {Vector2} pointControllerPosition
   * @param {number} perpendicularDistance
   * @param {number} endDistance
   * @returns {boolean}
   * @public
   */
  isWithinDistance(pointControllerPosition, perpendicularDistance, endDistance) {
    let testBounds;
    const projectedLine = this.modelProjectedLineProperty.value;
    const lineStart = projectedLine.getStart();
    const lineEnd = projectedLine.getEnd();
    if (this.isHorizontal) {
      assert && assert(lineStart.x < lineEnd.x && lineStart.y === lineEnd.y, 'line not as expected');
      testBounds = new Bounds2(lineStart.x - endDistance, lineStart.y - perpendicularDistance, lineEnd.x + endDistance, lineStart.y + perpendicularDistance);
    } else {
      assert && assert(lineStart.y < lineEnd.y && lineStart.x === lineEnd.x, 'line not as expected');
      testBounds = new Bounds2(lineStart.x - perpendicularDistance, lineStart.y - endDistance, lineEnd.x + perpendicularDistance, lineEnd.y + endDistance);
    }
    return testBounds.containsPoint(pointControllerPosition);
  }

  /**
   * See docs in base class.
   * @param {number} proposedValue
   * @returns {number}
   * @override
   * @public
   */
  getConstrainedValue(proposedValue) {
    // Get the value allowed by the resolution constraint.
    const initiallyConstrainedValue = super.getConstrainedValue(proposedValue);

    // Further constrain the value to the displayed range.
    const displayedRange = this.displayedRangeProperty.value;
    return Utils.clamp(Utils.roundSymmetric(initiallyConstrainedValue), displayedRange.min, displayedRange.max);
  }

  /**
   * Reset to initial state.
   * @public
   * @override
   */
  reset() {
    super.reset();
    this.showAbsoluteValuesProperty.reset();
    this.orientationProperty.reset();
    this.displayedRangeProperty.reset();
    this.showPointLabelsProperty.reset();
    this.showTickMarksProperty.reset();
    this.showOppositesProperty.reset();
  }
}
numberLineCommon.register('SpatializedNumberLine', SpatializedNumberLine);
export default SpatializedNumberLine;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb29sZWFuUHJvcGVydHkiLCJEZXJpdmVkUHJvcGVydHkiLCJFbnVtZXJhdGlvblByb3BlcnR5IiwiUHJvcGVydHkiLCJCb3VuZHMyIiwiUmFuZ2UiLCJVdGlscyIsIlZlY3RvcjIiLCJWZWN0b3IyUHJvcGVydHkiLCJMaW5lIiwiTnVtYmVyTGluZSIsIm1lcmdlIiwiT3JpZW50YXRpb24iLCJudW1iZXJMaW5lQ29tbW9uIiwiU3BhdGlhbGl6ZWROdW1iZXJMaW5lIiwiY29uc3RydWN0b3IiLCJpbml0aWFsWmVyb1Bvc2l0aW9uIiwib3B0aW9ucyIsImluaXRpYWxPcmllbnRhdGlvbiIsIkhPUklaT05UQUwiLCJpbml0aWFsRGlzcGxheWVkUmFuZ2UiLCJsYWJlbHNJbml0aWFsbHlWaXNpYmxlIiwidGlja01hcmtzSW5pdGlhbGx5VmlzaWJsZSIsImFic29sdXRlVmFsdWVzSW5pdGlhbGx5VmlzaWJsZSIsIndpZHRoSW5Nb2RlbFNwYWNlIiwiaGVpZ2h0SW5Nb2RlbFNwYWNlIiwicG9pbnRDcmVhdGlvblBlcnBlbmRpY3VsYXJEaXN0YW5jZSIsInBvaW50Q3JlYXRpb25FbmREaXN0YW5jZSIsInBvaW50UmVtb3ZhbFBlcnBlbmRpY3VsYXJEaXN0YW5jZSIsInBvaW50UmVtb3ZhbEVuZERpc3RhbmNlIiwiY2VudGVyUG9zaXRpb25Qcm9wZXJ0eSIsIm9yaWVudGF0aW9uUHJvcGVydHkiLCJkaXNwbGF5ZWRSYW5nZVByb3BlcnR5IiwidmFsdWVUeXBlIiwic2hvd1BvaW50TGFiZWxzUHJvcGVydHkiLCJzaG93VGlja01hcmtzUHJvcGVydHkiLCJzaG93QWJzb2x1dGVWYWx1ZXNQcm9wZXJ0eSIsInNob3dPcHBvc2l0ZXNQcm9wZXJ0eSIsIm1vZGVsVG9Qb3NpdG9uU2NhbGUiLCJaRVJPIiwiY29weSIsImxpbmsiLCJkaXNwbGF5ZWRSYW5nZSIsImdldExlbmd0aCIsIm1vZGVsUHJvamVjdGVkTGluZVByb3BlcnR5IiwiY2VudGVyUG9zaXRpb24iLCJvcmllbnRhdGlvbiIsIngxIiwieTEiLCJ4MiIsInkyIiwieCIsIm1pbiIsIm1heCIsInkiLCJpc0hvcml6b250YWwiLCJ2YWx1ZSIsImlzVmVydGljYWwiLCJWRVJUSUNBTCIsIm1vZGVsUG9zaXRpb25Ub1ZhbHVlIiwibW9kZWxQb3NpdGlvbiIsImFzc2VydCIsImVxdWFscyIsIm51bWJlckxpbmVWYWx1ZSIsInZhbHVlVG9Nb2RlbFBvc2l0aW9uIiwiZ2V0U2NhbGVkT2Zmc2V0RnJvbVplcm8iLCJzY2FsZWRPZmZzZXRGcm9tWmVybyIsImlzV2l0aGluUG9pbnRDcmVhdGlvbkRpc3RhbmNlIiwicG9pbnRDb250cm9sbGVyUG9zaXRpb24iLCJpc1dpdGhpbkRpc3RhbmNlIiwiaXNXaXRoaW5Qb2ludFJlbW92YWxEaXN0YW5jZSIsImlzUG9pbnRJbkRpc3BsYXllZFJhbmdlIiwicG9pbnQiLCJjb250YWlucyIsInZhbHVlUHJvcGVydHkiLCJwZXJwZW5kaWN1bGFyRGlzdGFuY2UiLCJlbmREaXN0YW5jZSIsInRlc3RCb3VuZHMiLCJwcm9qZWN0ZWRMaW5lIiwibGluZVN0YXJ0IiwiZ2V0U3RhcnQiLCJsaW5lRW5kIiwiZ2V0RW5kIiwiY29udGFpbnNQb2ludCIsImdldENvbnN0cmFpbmVkVmFsdWUiLCJwcm9wb3NlZFZhbHVlIiwiaW5pdGlhbGx5Q29uc3RyYWluZWRWYWx1ZSIsImNsYW1wIiwicm91bmRTeW1tZXRyaWMiLCJyZXNldCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiU3BhdGlhbGl6ZWROdW1iZXJMaW5lLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIwLTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFNwYXRpYWxpemVkTnVtYmVyTGluZSBpcyBhIG1vZGVsIG9mIGEgbnVtYmVyIGxpbmUgdGhhdCBpcyBwcm9qZWN0ZWQgaW50byAyRCBzcGFjZS4gIEl0IGFsc28gdHJhY2tzIGEgbnVtYmVyIG9mIG90aGVyXHJcbiAqIHBpZWNlcyBvZiBpbmZvcm1hdGlvbiB0aGF0IGNvbnRyb2wgaG93IHRoZSBudW1iZXIgbGluZSBpcyBkaXNwbGF5ZWQgd2hlbiBwcmVzZW50ZWQgdG8gdGhlIHVzZXIuXHJcbiAqXHJcbiAqIEBhdXRob3IgSm9obiBCbGFuY28gKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqIEBhdXRob3IgQ2hyaXMgS2x1c2VuZG9yZiAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICovXHJcblxyXG5pbXBvcnQgQm9vbGVhblByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvQm9vbGVhblByb3BlcnR5LmpzJztcclxuaW1wb3J0IERlcml2ZWRQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL0Rlcml2ZWRQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBFbnVtZXJhdGlvblByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvRW51bWVyYXRpb25Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1Byb3BlcnR5LmpzJztcclxuaW1wb3J0IEJvdW5kczIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL0JvdW5kczIuanMnO1xyXG5pbXBvcnQgUmFuZ2UgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1JhbmdlLmpzJztcclxuaW1wb3J0IFV0aWxzIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9VdGlscy5qcyc7XHJcbmltcG9ydCBWZWN0b3IyIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9WZWN0b3IyLmpzJztcclxuaW1wb3J0IFZlY3RvcjJQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVmVjdG9yMlByb3BlcnR5LmpzJztcclxuaW1wb3J0IHsgTGluZSB9IGZyb20gJy4uLy4uLy4uLy4uL2tpdGUvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBOdW1iZXJMaW5lIGZyb20gJy4uLy4uLy4uLy4uL251bWJlci1saW5lLWNvbW1vbi9qcy9jb21tb24vbW9kZWwvTnVtYmVyTGluZS5qcyc7XHJcbmltcG9ydCBtZXJnZSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvbWVyZ2UuanMnO1xyXG5pbXBvcnQgT3JpZW50YXRpb24gZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL09yaWVudGF0aW9uLmpzJztcclxuaW1wb3J0IG51bWJlckxpbmVDb21tb24gZnJvbSAnLi4vLi4vbnVtYmVyTGluZUNvbW1vbi5qcyc7XHJcblxyXG5jbGFzcyBTcGF0aWFsaXplZE51bWJlckxpbmUgZXh0ZW5kcyBOdW1iZXJMaW5lIHtcclxuXHJcbiAgLyoqXHJcbiAgICoge1ZlY3RvcjJ9IGluaXRpYWxaZXJvUG9zaXRpb24gLSB0aGUgcG9zaXRpb24gaW4gbW9kZWwgc3BhY2Ugb2YgdGhlIHplcm8gcG9pbnQgb24gdGhlIG51bWJlciBsaW5lXHJcbiAgICoge09iamVjdH0gW29wdGlvbnNdXHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBpbml0aWFsWmVyb1Bvc2l0aW9uLCBvcHRpb25zICkge1xyXG5cclxuICAgIHN1cGVyKCBvcHRpb25zICk7XHJcblxyXG4gICAgb3B0aW9ucyA9IG1lcmdlKCB7XHJcblxyXG4gICAgICAvLyB7T3JpZW50YXRpb259IC0gd2hldGhlciB0aGUgbnVtYmVyIGxpbmUgaXMgaW5pdGlhbGx5IG9yaWVudGVkIGluIHRoZSBob3Jpem9udGFsIG9yIHZlcnRpY2FsIGRpcmVjdGlvblxyXG4gICAgICBpbml0aWFsT3JpZW50YXRpb246IE9yaWVudGF0aW9uLkhPUklaT05UQUwsXHJcblxyXG4gICAgICAvLyB7UmFuZ2V9IC0gcmFuZ2Ugb2YgdmFsdWVzIHRvIGJlIGRpc3BsYXllZFxyXG4gICAgICBpbml0aWFsRGlzcGxheWVkUmFuZ2U6IG5ldyBSYW5nZSggLTEwLCAxMCApLFxyXG5cclxuICAgICAgLy8ge2Jvb2xlYW59IC0gd2hldGhlciBwb2ludCBsYWJlbHMgc2hvdWxkIGluaXRpYWxseSBiZSBzaG93blxyXG4gICAgICBsYWJlbHNJbml0aWFsbHlWaXNpYmxlOiBmYWxzZSxcclxuXHJcbiAgICAgIC8vIHtib29sZWFufSAtIHdoZXRoZXIgdGljayBtYXJrcyBzaG91bGQgYmUgaW5pdGlhbGx5IGRpc3BsYXllZFxyXG4gICAgICB0aWNrTWFya3NJbml0aWFsbHlWaXNpYmxlOiBmYWxzZSxcclxuXHJcbiAgICAgIC8vIHtib29sZWFufSAtIHdoZXRoZXIgYWJzb2x1dGUgdmFsdWUgaW5kaWNhdG9ycyBzaG91bGQgYmUgaW5pdGlhbGx5IGRpc3BsYXllZFxyXG4gICAgICBhYnNvbHV0ZVZhbHVlc0luaXRpYWxseVZpc2libGU6IGZhbHNlLFxyXG5cclxuICAgICAgLy8ge251bWJlcn0gLSBUaGUgd2lkdGggYW5kIGhlaWdodCB2YWx1ZXMgdXNlZCB3aGVuIHByb2plY3RpbmcgdGhlIG51bWJlciBsaW5lIGludG8gbW9kZWwgc3BhY2UuIFRoZSBkZWZhdWx0XHJcbiAgICAgIC8vIHZhbHVlcyBhcmUgcHJldHR5IGFyYml0cmFyeSBhbmQgYXQgbGVhc3Qgb25lIG9mIHRoZXNlIHdpbGwgZ2VuZXJhbGx5IG5lZWQgdG8gYmUgc2V0LiBIb3dldmVyLCBpZiB0aGUgbnVtYmVyXHJcbiAgICAgIC8vIGxpbmUgaXMgb25seSBldmVyIHNob3duIGluIG9uZSBvcmllbnRhdGlvbiwgdGhlIHZhbHVlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIG90aGVyIG9yaWVudGF0aW9uIGNhbiBiZSBsZWZ0IGF0XHJcbiAgICAgIC8vIHRoZSBkZWZhdWx0IHZhbHVlLlxyXG4gICAgICB3aWR0aEluTW9kZWxTcGFjZTogMTAwLFxyXG4gICAgICBoZWlnaHRJbk1vZGVsU3BhY2U6IDEwMCxcclxuXHJcbiAgICAgIC8vIHtudW1iZXJ9IHBlcnBlbmRpY3VsYXIgZGlzdGFuY2UgZnJvbSBudW1iZXIgbGluZSBpbiBtb2RlbC92aWV3IGNvb3JkcyB3aGVyZSBwb2ludHMgZ2V0IGNyZWF0ZWRcclxuICAgICAgcG9pbnRDcmVhdGlvblBlcnBlbmRpY3VsYXJEaXN0YW5jZTogNjAsXHJcblxyXG4gICAgICAvLyB7bnVtYmVyfSBkaXN0YW5jZSBmcm9tIHRoZSBlbmQgb2YgdGhlIG51bWJlciBsaW5lIGluIG1vZGVsL3ZpZXcgY29vcmRzIHdoZXJlIHBvaW50cyBnZXQgY3JlYXRlZFxyXG4gICAgICBwb2ludENyZWF0aW9uRW5kRGlzdGFuY2U6IDIwLFxyXG5cclxuICAgICAgLy8ge251bWJlcn0gcGVycGVuZGljdWxhciBkaXN0YW5jZSBmcm9tIG51bWJlciBsaW5lIGluIG1vZGVsL3ZpZXcgY29vcmRzIHdoZXJlIHBvaW50cyBnZXQgcmVtb3ZlZFxyXG4gICAgICBwb2ludFJlbW92YWxQZXJwZW5kaWN1bGFyRGlzdGFuY2U6IDEyMCxcclxuXHJcbiAgICAgIC8vIHtudW1iZXJ9IGRpc3RhbmNlIGZyb20gdGhlIGVuZCBvZiB0aGUgbnVtYmVyIGxpbmUgaW4gbW9kZWwvdmlldyBjb29yZHMgd2hlcmUgcG9pbnRzIGdldCByZW1vdmVkXHJcbiAgICAgIHBvaW50UmVtb3ZhbEVuZERpc3RhbmNlOiAyNVxyXG4gICAgfSwgb3B0aW9ucyApO1xyXG5cclxuICAgIC8vIEBwdWJsaWMge1ZlY3RvcjJQcm9wZXJ0eX0gLSBjZW50ZXIgaW4gbW9kZWwgc3BhY2Ugd2hlcmUgdGhpcyBudW1iZXIgbGluZSBleGlzdHNcclxuICAgIHRoaXMuY2VudGVyUG9zaXRpb25Qcm9wZXJ0eSA9IG5ldyBWZWN0b3IyUHJvcGVydHkoIGluaXRpYWxaZXJvUG9zaXRpb24gKTtcclxuXHJcbiAgICAvLyBAcHVibGljIHtQcm9wZXJ0eX0gLSB0aGUgdmFsdWUgdXNlZCB0byBzY2FsZSBmcm9tIG1vZGVsIGNvb3JkaW5hdGVzIHRvIG51bWJlciBsaW5lIGRpc3RhbmNlXHJcbiAgICB0aGlzLm9yaWVudGF0aW9uUHJvcGVydHkgPSBuZXcgRW51bWVyYXRpb25Qcm9wZXJ0eSggb3B0aW9ucy5pbml0aWFsT3JpZW50YXRpb24gKTtcclxuXHJcbiAgICAvLyBAcHVibGljIHtQcm9wZXJ0eS48UmFuZ2U+fSAtIHRoZSByYW5nZSBvZiB2YWx1ZXMgdGhhdCBzaG91bGQgYmUgZGlzcGxheWVkIHRvIHRoZSB1c2VyXHJcbiAgICB0aGlzLmRpc3BsYXllZFJhbmdlUHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIG9wdGlvbnMuaW5pdGlhbERpc3BsYXllZFJhbmdlLCB7IHZhbHVlVHlwZTogUmFuZ2UgfSApO1xyXG5cclxuICAgIC8vIEBwdWJsaWMge0Jvb2xlYW5Qcm9wZXJ0eX0gLSBjb250cm9scyB3aGV0aGVyIHBvaW50IGxhYmVscyBhcmUgZGlzcGxheWVkIHRvIHRoZSB1c2VyXHJcbiAgICB0aGlzLnNob3dQb2ludExhYmVsc1Byb3BlcnR5ID0gbmV3IEJvb2xlYW5Qcm9wZXJ0eSggb3B0aW9ucy5sYWJlbHNJbml0aWFsbHlWaXNpYmxlICk7XHJcblxyXG4gICAgLy8gQHB1YmxpYyB7Qm9vbGVhblByb3BlcnR5fSAtIGNvbnRyb2xzIHdoZXRoZXIgdGljayBtYXJrcyBzaG91bGQgYmUgZGlzcGxheWVkIHRvIHRoZSB1c2VyXHJcbiAgICB0aGlzLnNob3dUaWNrTWFya3NQcm9wZXJ0eSA9IG5ldyBCb29sZWFuUHJvcGVydHkoIG9wdGlvbnMudGlja01hcmtzSW5pdGlhbGx5VmlzaWJsZSApO1xyXG5cclxuICAgIC8vIEBwdWJsaWMge0Jvb2xlYW5Qcm9wZXJ0eX0gLSBjb250cm9scyB3aGV0aGVyIHRpY2sgbWFya3Mgc2hvdWxkIGJlIGRpc3BsYXllZCB0byB0aGUgdXNlclxyXG4gICAgdGhpcy5zaG93QWJzb2x1dGVWYWx1ZXNQcm9wZXJ0eSA9IG5ldyBCb29sZWFuUHJvcGVydHkoIG9wdGlvbnMuYWJzb2x1dGVWYWx1ZXNJbml0aWFsbHlWaXNpYmxlICk7XHJcblxyXG4gICAgLy8gQHB1YmxpYyB7Qm9vbGVhblByb3BlcnR5fSAtIGNvbnRyb2xzIHdoZXRoZXIgdGljayBtYXJrcyBzaG91bGQgYmUgZGlzcGxheWVkIHRvIHRoZSB1c2VyXHJcbiAgICB0aGlzLnNob3dPcHBvc2l0ZXNQcm9wZXJ0eSA9IG5ldyBCb29sZWFuUHJvcGVydHkoIGZhbHNlICk7XHJcblxyXG4gICAgLy8gQHByaXZhdGUgLSAyRCBzY2FsZSBmb3IgdHJhbnNmb3JtaW5nIGJldHdlZW4gbW9kZWwgY29vcmRpbmF0ZXMgYW5kIG51bWJlciBsaW5lIHBvc2l0aW9uXHJcbiAgICB0aGlzLm1vZGVsVG9Qb3NpdG9uU2NhbGUgPSBWZWN0b3IyLlpFUk8uY29weSgpO1xyXG4gICAgdGhpcy5kaXNwbGF5ZWRSYW5nZVByb3BlcnR5LmxpbmsoIGRpc3BsYXllZFJhbmdlID0+IHtcclxuICAgICAgdGhpcy5tb2RlbFRvUG9zaXRvblNjYWxlID0gbmV3IFZlY3RvcjIoXHJcbiAgICAgICAgZGlzcGxheWVkUmFuZ2UuZ2V0TGVuZ3RoKCkgLyBvcHRpb25zLndpZHRoSW5Nb2RlbFNwYWNlLFxyXG4gICAgICAgIGRpc3BsYXllZFJhbmdlLmdldExlbmd0aCgpIC8gb3B0aW9ucy5oZWlnaHRJbk1vZGVsU3BhY2VcclxuICAgICAgKTtcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBAcHVibGljIChyZWFkLW9ubHkpIHtQcm9wZXJ0eS48TGluZT59IC0gVGhlIGxpbmUgaW50byB3aGljaCB0aGUgbnVtYmVyIGxpbmUgaXMgcHJvamVjdGVkIGluIG1vZGVsIHNwYWNlLiBUaGlzIG9ubHlcclxuICAgIC8vIGluY2x1ZGVzIHRoZSBkaXNwbGF5ZWQgcmFuZ2UgYW5kIG5vdGhpbmcgYmV5b25kIHRoYXQuXHJcbiAgICB0aGlzLm1vZGVsUHJvamVjdGVkTGluZVByb3BlcnR5ID0gbmV3IERlcml2ZWRQcm9wZXJ0eShcclxuICAgICAgWyB0aGlzLmNlbnRlclBvc2l0aW9uUHJvcGVydHksIHRoaXMub3JpZW50YXRpb25Qcm9wZXJ0eSwgdGhpcy5kaXNwbGF5ZWRSYW5nZVByb3BlcnR5IF0sXHJcbiAgICAgICggY2VudGVyUG9zaXRpb24sIG9yaWVudGF0aW9uLCBkaXNwbGF5ZWRSYW5nZSApID0+IHtcclxuICAgICAgICBsZXQgeDE7XHJcbiAgICAgICAgbGV0IHkxO1xyXG4gICAgICAgIGxldCB4MjtcclxuICAgICAgICBsZXQgeTI7XHJcbiAgICAgICAgaWYgKCBvcmllbnRhdGlvbiA9PT0gT3JpZW50YXRpb24uSE9SSVpPTlRBTCApIHtcclxuICAgICAgICAgIHgxID0gY2VudGVyUG9zaXRpb24ueCArIGRpc3BsYXllZFJhbmdlLm1pbiAvIHRoaXMubW9kZWxUb1Bvc2l0b25TY2FsZS54O1xyXG4gICAgICAgICAgeDIgPSBjZW50ZXJQb3NpdGlvbi54ICsgZGlzcGxheWVkUmFuZ2UubWF4IC8gdGhpcy5tb2RlbFRvUG9zaXRvblNjYWxlLng7XHJcbiAgICAgICAgICB5MSA9IGNlbnRlclBvc2l0aW9uLnk7XHJcbiAgICAgICAgICB5MiA9IGNlbnRlclBvc2l0aW9uLnk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgeDEgPSBjZW50ZXJQb3NpdGlvbi54O1xyXG4gICAgICAgICAgeDIgPSBjZW50ZXJQb3NpdGlvbi54O1xyXG4gICAgICAgICAgeTEgPSBjZW50ZXJQb3NpdGlvbi55ICsgZGlzcGxheWVkUmFuZ2UubWluIC8gdGhpcy5tb2RlbFRvUG9zaXRvblNjYWxlLnk7XHJcbiAgICAgICAgICB5MiA9IGNlbnRlclBvc2l0aW9uLnkgKyBkaXNwbGF5ZWRSYW5nZS5tYXggLyB0aGlzLm1vZGVsVG9Qb3NpdG9uU2NhbGUueTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBMaW5lKCBuZXcgVmVjdG9yMiggeDEsIHkxICksIG5ldyBWZWN0b3IyKCB4MiwgeTIgKSApO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG5cclxuICAgIC8vIEBwcml2YXRlXHJcbiAgICB0aGlzLnBvaW50Q3JlYXRpb25QZXJwZW5kaWN1bGFyRGlzdGFuY2UgPSBvcHRpb25zLnBvaW50Q3JlYXRpb25QZXJwZW5kaWN1bGFyRGlzdGFuY2U7XHJcbiAgICB0aGlzLnBvaW50Q3JlYXRpb25FbmREaXN0YW5jZSA9IG9wdGlvbnMucG9pbnRDcmVhdGlvbkVuZERpc3RhbmNlO1xyXG4gICAgdGhpcy5wb2ludFJlbW92YWxQZXJwZW5kaWN1bGFyRGlzdGFuY2UgPSBvcHRpb25zLnBvaW50UmVtb3ZhbFBlcnBlbmRpY3VsYXJEaXN0YW5jZTtcclxuICAgIHRoaXMucG9pbnRSZW1vdmFsRW5kRGlzdGFuY2UgPSBvcHRpb25zLnBvaW50UmVtb3ZhbEVuZERpc3RhbmNlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogd2hldGhlciB0aGlzIG51bWJlciBsaW5lIGlzIGluIHRoZSBob3Jpem9udGFsIG9yaWVudGF0aW9uXHJcbiAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG4gIGdldCBpc0hvcml6b250YWwoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5vcmllbnRhdGlvblByb3BlcnR5LnZhbHVlID09PSBPcmllbnRhdGlvbi5IT1JJWk9OVEFMO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogd2hldGhlciB0aGlzIG51bWJlciBsaW5lIGlzIGluIHRoZSBob3Jpem9udGFsIG9yaWVudGF0aW9uXHJcbiAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG4gIGdldCBpc1ZlcnRpY2FsKCkge1xyXG4gICAgcmV0dXJuIHRoaXMub3JpZW50YXRpb25Qcm9wZXJ0eS52YWx1ZSA9PT0gT3JpZW50YXRpb24uVkVSVElDQUw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBQcm9qZWN0IGEgcG9zaXRpb24gaW4gbW9kZWwgc3BhY2UgaW50byBhIDFEIHZhbHVlIG9uIHRoZSBudW1iZXIgbGluZS5cclxuICAgKiBAcGFyYW0ge1ZlY3RvcjJ9IG1vZGVsUG9zaXRpb25cclxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBtb2RlbFBvc2l0aW9uVG9WYWx1ZSggbW9kZWxQb3NpdGlvbiApIHtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoXHJcbiAgICAgICF0aGlzLm1vZGVsVG9Qb3NpdG9uU2NhbGUuZXF1YWxzKCBWZWN0b3IyLlpFUk8gKSxcclxuICAgICAgJ211c3Qgc2V0IG1vZGVsIGRpc3BsYXkgYm91bmRzIGlmIHVzaW5nIHRoaXMgbWV0aG9kJ1xyXG4gICAgKTtcclxuICAgIGxldCBudW1iZXJMaW5lVmFsdWU7XHJcbiAgICBpZiAoIHRoaXMuaXNIb3Jpem9udGFsICkge1xyXG4gICAgICBudW1iZXJMaW5lVmFsdWUgPSAoIG1vZGVsUG9zaXRpb24ueCAtIHRoaXMuY2VudGVyUG9zaXRpb25Qcm9wZXJ0eS52YWx1ZS54ICkgKiB0aGlzLm1vZGVsVG9Qb3NpdG9uU2NhbGUueDtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBudW1iZXJMaW5lVmFsdWUgPSAoIG1vZGVsUG9zaXRpb24ueSAtIHRoaXMuY2VudGVyUG9zaXRpb25Qcm9wZXJ0eS52YWx1ZS55ICkgKiAtdGhpcy5tb2RlbFRvUG9zaXRvblNjYWxlLnk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG51bWJlckxpbmVWYWx1ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbnZlcnQgYSB2YWx1ZSBvbiB0aGUgbnVtYmVyIGxpbmUgdG8gYSBwb3NpdGlvbiBpbiAyRCBtb2RlbCBzcGFjZS5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gbnVtYmVyTGluZVZhbHVlXHJcbiAgICogQHJldHVybnMge1ZlY3RvcjJ9XHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG4gIHZhbHVlVG9Nb2RlbFBvc2l0aW9uKCBudW1iZXJMaW5lVmFsdWUgKSB7XHJcblxyXG4gICAgbGV0IG1vZGVsUG9zaXRpb247XHJcbiAgICBpZiAoIHRoaXMuaXNIb3Jpem9udGFsICkge1xyXG4gICAgICBtb2RlbFBvc2l0aW9uID0gbmV3IFZlY3RvcjIoXHJcbiAgICAgICAgbnVtYmVyTGluZVZhbHVlIC8gdGhpcy5tb2RlbFRvUG9zaXRvblNjYWxlLnggKyB0aGlzLmNlbnRlclBvc2l0aW9uUHJvcGVydHkudmFsdWUueCxcclxuICAgICAgICB0aGlzLmNlbnRlclBvc2l0aW9uUHJvcGVydHkudmFsdWUueVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIG1vZGVsUG9zaXRpb24gPSBuZXcgVmVjdG9yMihcclxuICAgICAgICB0aGlzLmNlbnRlclBvc2l0aW9uUHJvcGVydHkudmFsdWUueCxcclxuICAgICAgICBudW1iZXJMaW5lVmFsdWUgLyAtdGhpcy5tb2RlbFRvUG9zaXRvblNjYWxlLnkgKyB0aGlzLmNlbnRlclBvc2l0aW9uUHJvcGVydHkudmFsdWUueVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1vZGVsUG9zaXRpb247XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgdGhlIHBvc2l0aXZlIG9yIG5lZ2F0aXZlIGRpc3RhbmNlIGluIG1vZGVsIHNwYWNlIGZyb20gdGhlIHplcm8gcG9pbnQgb24gdGhlIG51bWJlciBsaW5lIHRvIHRoZSBwcm92aWRlZCB2YWx1ZS5cclxuICAgKiBAcGFyYW0gbnVtYmVyTGluZVZhbHVlXHJcbiAgICogQHJldHVybnMge251bWJlcn1cclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgZ2V0U2NhbGVkT2Zmc2V0RnJvbVplcm8oIG51bWJlckxpbmVWYWx1ZSApIHtcclxuICAgIGxldCBzY2FsZWRPZmZzZXRGcm9tWmVybztcclxuICAgIGlmICggdGhpcy5pc0hvcml6b250YWwgKSB7XHJcbiAgICAgIHNjYWxlZE9mZnNldEZyb21aZXJvID0gbnVtYmVyTGluZVZhbHVlIC8gdGhpcy5tb2RlbFRvUG9zaXRvblNjYWxlLng7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgc2NhbGVkT2Zmc2V0RnJvbVplcm8gPSBudW1iZXJMaW5lVmFsdWUgLyAtdGhpcy5tb2RlbFRvUG9zaXRvblNjYWxlLnk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc2NhbGVkT2Zmc2V0RnJvbVplcm87XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBXaGV0aGVyIHRoZSBwcm92aWRlZCBwb2ludCBjb250cm9sbGVyIHBvc2l0aW9uIGlzIHdpdGhpbiByYW5nZSBmb3IgYSBudW1iZXIgbGluZSBwb2ludCB0byBiZSBjcmVhdGVkLlxyXG4gICAqIEBwYXJhbSB7VmVjdG9yMn0gcG9pbnRDb250cm9sbGVyUG9zaXRpb25cclxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgaXNXaXRoaW5Qb2ludENyZWF0aW9uRGlzdGFuY2UoIHBvaW50Q29udHJvbGxlclBvc2l0aW9uICkge1xyXG4gICAgcmV0dXJuIHRoaXMuaXNXaXRoaW5EaXN0YW5jZSggcG9pbnRDb250cm9sbGVyUG9zaXRpb24sIHRoaXMucG9pbnRDcmVhdGlvblBlcnBlbmRpY3VsYXJEaXN0YW5jZSwgdGhpcy5wb2ludENyZWF0aW9uRW5kRGlzdGFuY2UgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFdoZXRoZXIgdGhlIHByb3ZpZGVkIHBvaW50IGNvbnRyb2xsZXIgcG9zaXRpb24gaXMgd2l0aGluIHJhbmdlIGZvciBhIG51bWJlciBsaW5lIHBvaW50IHRvIGJlIHJlbW92ZWQuXHJcbiAgICogQHBhcmFtIHtWZWN0b3IyfSBwb2ludENvbnRyb2xsZXJQb3NpdGlvblxyXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBpc1dpdGhpblBvaW50UmVtb3ZhbERpc3RhbmNlKCBwb2ludENvbnRyb2xsZXJQb3NpdGlvbiApIHtcclxuICAgIHJldHVybiB0aGlzLmlzV2l0aGluRGlzdGFuY2UoIHBvaW50Q29udHJvbGxlclBvc2l0aW9uLCB0aGlzLnBvaW50UmVtb3ZhbFBlcnBlbmRpY3VsYXJEaXN0YW5jZSwgdGhpcy5wb2ludFJlbW92YWxFbmREaXN0YW5jZSApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2sgd2hldGhlciB0aGUgcHJvdmlkZWQgcG9pbnQgaXMgd2l0aGluIHRoZSBjdXJyZW50IGRpc3BsYXllZCByYW5nZSBvZiB0aGUgbnVtYmVyIGxpbmUuICBUaGUgcG9pbnQgZG9lcyBub3QgaGF2ZVxyXG4gICAqIHRvIGJlIHJlc2lkZW50IG9uIHRoZSBudW1iZXIgbGluZS5cclxuICAgKiBAcGFyYW0ge051bWJlckxpbmVQb2ludH0gcG9pbnRcclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgaXNQb2ludEluRGlzcGxheWVkUmFuZ2UoIHBvaW50ICkge1xyXG4gICAgcmV0dXJuIHRoaXMuZGlzcGxheWVkUmFuZ2VQcm9wZXJ0eS52YWx1ZS5jb250YWlucyggcG9pbnQudmFsdWVQcm9wZXJ0eS52YWx1ZSApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJuIHRydWUgaWYgdGhlIHByb3ZpZGVkIHBvc2l0aW9uIGlzIHdpdGhpbiByYW5nZSBvZiB0aGUgcHJvdmlkZWQgZGlzdGFuY2UsIGZhbHNlIGlmIG5vdC5cclxuICAgKiBAcGFyYW0ge1ZlY3RvcjJ9IHBvaW50Q29udHJvbGxlclBvc2l0aW9uXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHBlcnBlbmRpY3VsYXJEaXN0YW5jZVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBlbmREaXN0YW5jZVxyXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBpc1dpdGhpbkRpc3RhbmNlKCBwb2ludENvbnRyb2xsZXJQb3NpdGlvbiwgcGVycGVuZGljdWxhckRpc3RhbmNlLCBlbmREaXN0YW5jZSApIHtcclxuICAgIGxldCB0ZXN0Qm91bmRzO1xyXG4gICAgY29uc3QgcHJvamVjdGVkTGluZSA9IHRoaXMubW9kZWxQcm9qZWN0ZWRMaW5lUHJvcGVydHkudmFsdWU7XHJcbiAgICBjb25zdCBsaW5lU3RhcnQgPSBwcm9qZWN0ZWRMaW5lLmdldFN0YXJ0KCk7XHJcbiAgICBjb25zdCBsaW5lRW5kID0gcHJvamVjdGVkTGluZS5nZXRFbmQoKTtcclxuICAgIGlmICggdGhpcy5pc0hvcml6b250YWwgKSB7XHJcbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoIGxpbmVTdGFydC54IDwgbGluZUVuZC54ICYmIGxpbmVTdGFydC55ID09PSBsaW5lRW5kLnksICdsaW5lIG5vdCBhcyBleHBlY3RlZCcgKTtcclxuICAgICAgdGVzdEJvdW5kcyA9IG5ldyBCb3VuZHMyKFxyXG4gICAgICAgIGxpbmVTdGFydC54IC0gZW5kRGlzdGFuY2UsXHJcbiAgICAgICAgbGluZVN0YXJ0LnkgLSBwZXJwZW5kaWN1bGFyRGlzdGFuY2UsXHJcbiAgICAgICAgbGluZUVuZC54ICsgZW5kRGlzdGFuY2UsXHJcbiAgICAgICAgbGluZVN0YXJ0LnkgKyBwZXJwZW5kaWN1bGFyRGlzdGFuY2VcclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBsaW5lU3RhcnQueSA8IGxpbmVFbmQueSAmJiBsaW5lU3RhcnQueCA9PT0gbGluZUVuZC54LCAnbGluZSBub3QgYXMgZXhwZWN0ZWQnICk7XHJcbiAgICAgIHRlc3RCb3VuZHMgPSBuZXcgQm91bmRzMihcclxuICAgICAgICBsaW5lU3RhcnQueCAtIHBlcnBlbmRpY3VsYXJEaXN0YW5jZSxcclxuICAgICAgICBsaW5lU3RhcnQueSAtIGVuZERpc3RhbmNlLFxyXG4gICAgICAgIGxpbmVFbmQueCArIHBlcnBlbmRpY3VsYXJEaXN0YW5jZSxcclxuICAgICAgICBsaW5lRW5kLnkgKyBlbmREaXN0YW5jZVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRlc3RCb3VuZHMuY29udGFpbnNQb2ludCggcG9pbnRDb250cm9sbGVyUG9zaXRpb24gKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNlZSBkb2NzIGluIGJhc2UgY2xhc3MuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHByb3Bvc2VkVmFsdWVcclxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBnZXRDb25zdHJhaW5lZFZhbHVlKCBwcm9wb3NlZFZhbHVlICkge1xyXG5cclxuICAgIC8vIEdldCB0aGUgdmFsdWUgYWxsb3dlZCBieSB0aGUgcmVzb2x1dGlvbiBjb25zdHJhaW50LlxyXG4gICAgY29uc3QgaW5pdGlhbGx5Q29uc3RyYWluZWRWYWx1ZSA9IHN1cGVyLmdldENvbnN0cmFpbmVkVmFsdWUoIHByb3Bvc2VkVmFsdWUgKTtcclxuXHJcbiAgICAvLyBGdXJ0aGVyIGNvbnN0cmFpbiB0aGUgdmFsdWUgdG8gdGhlIGRpc3BsYXllZCByYW5nZS5cclxuICAgIGNvbnN0IGRpc3BsYXllZFJhbmdlID0gdGhpcy5kaXNwbGF5ZWRSYW5nZVByb3BlcnR5LnZhbHVlO1xyXG4gICAgcmV0dXJuIFV0aWxzLmNsYW1wKCBVdGlscy5yb3VuZFN5bW1ldHJpYyggaW5pdGlhbGx5Q29uc3RyYWluZWRWYWx1ZSApLCBkaXNwbGF5ZWRSYW5nZS5taW4sIGRpc3BsYXllZFJhbmdlLm1heCApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVzZXQgdG8gaW5pdGlhbCBzdGF0ZS5cclxuICAgKiBAcHVibGljXHJcbiAgICogQG92ZXJyaWRlXHJcbiAgICovXHJcbiAgcmVzZXQoKSB7XHJcbiAgICBzdXBlci5yZXNldCgpO1xyXG4gICAgdGhpcy5zaG93QWJzb2x1dGVWYWx1ZXNQcm9wZXJ0eS5yZXNldCgpO1xyXG4gICAgdGhpcy5vcmllbnRhdGlvblByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICB0aGlzLmRpc3BsYXllZFJhbmdlUHJvcGVydHkucmVzZXQoKTtcclxuICAgIHRoaXMuc2hvd1BvaW50TGFiZWxzUHJvcGVydHkucmVzZXQoKTtcclxuICAgIHRoaXMuc2hvd1RpY2tNYXJrc1Byb3BlcnR5LnJlc2V0KCk7XHJcbiAgICB0aGlzLnNob3dPcHBvc2l0ZXNQcm9wZXJ0eS5yZXNldCgpO1xyXG4gIH1cclxufVxyXG5cclxubnVtYmVyTGluZUNvbW1vbi5yZWdpc3RlciggJ1NwYXRpYWxpemVkTnVtYmVyTGluZScsIFNwYXRpYWxpemVkTnVtYmVyTGluZSApO1xyXG5leHBvcnQgZGVmYXVsdCBTcGF0aWFsaXplZE51bWJlckxpbmU7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsZUFBZSxNQUFNLHdDQUF3QztBQUNwRSxPQUFPQyxlQUFlLE1BQU0sd0NBQXdDO0FBQ3BFLE9BQU9DLG1CQUFtQixNQUFNLDRDQUE0QztBQUM1RSxPQUFPQyxRQUFRLE1BQU0saUNBQWlDO0FBQ3RELE9BQU9DLE9BQU8sTUFBTSwrQkFBK0I7QUFDbkQsT0FBT0MsS0FBSyxNQUFNLDZCQUE2QjtBQUMvQyxPQUFPQyxLQUFLLE1BQU0sNkJBQTZCO0FBQy9DLE9BQU9DLE9BQU8sTUFBTSwrQkFBK0I7QUFDbkQsT0FBT0MsZUFBZSxNQUFNLHVDQUF1QztBQUNuRSxTQUFTQyxJQUFJLFFBQVEsZ0NBQWdDO0FBQ3JELE9BQU9DLFVBQVUsTUFBTSw4REFBOEQ7QUFDckYsT0FBT0MsS0FBSyxNQUFNLG1DQUFtQztBQUNyRCxPQUFPQyxXQUFXLE1BQU0seUNBQXlDO0FBQ2pFLE9BQU9DLGdCQUFnQixNQUFNLDJCQUEyQjtBQUV4RCxNQUFNQyxxQkFBcUIsU0FBU0osVUFBVSxDQUFDO0VBRTdDO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDRUssV0FBV0EsQ0FBRUMsbUJBQW1CLEVBQUVDLE9BQU8sRUFBRztJQUUxQyxLQUFLLENBQUVBLE9BQVEsQ0FBQztJQUVoQkEsT0FBTyxHQUFHTixLQUFLLENBQUU7TUFFZjtNQUNBTyxrQkFBa0IsRUFBRU4sV0FBVyxDQUFDTyxVQUFVO01BRTFDO01BQ0FDLHFCQUFxQixFQUFFLElBQUlmLEtBQUssQ0FBRSxDQUFD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