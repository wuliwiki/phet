// Copyright 2015-2022, University of Colorado Boulder

/**
 * Graph area node in 'Curve Fitting' simulation.
 * Contains static graph area with axes, tick lines and labels
 *
 * @author Andrey Zelenkov (Mlearner)
 * @author Saurabh Totey
 */

import { Shape } from '../../../../kite/js/imports.js';
import ArrowNode from '../../../../scenery-phet/js/ArrowNode.js';
import { Node, Path, Rectangle, Text } from '../../../../scenery/js/imports.js';
import curveFitting from '../../curveFitting.js';
import CurveFittingStrings from '../../CurveFittingStrings.js';
import CurveFittingConstants from '../CurveFittingConstants.js';
const xSymbolString = CurveFittingStrings.xSymbol;
const ySymbolString = CurveFittingStrings.ySymbol;

// constants
const AXIS_OPTIONS = {
  lineWidth: 1,
  stroke: 'black'
};
const GRAPH_BACKGROUND_OPTIONS = {
  fill: 'white',
  stroke: 'rgb( 214, 223, 226 )'
};

// information regarding ticks and axes; all distances and lengths are in model coordinates
const MINOR_TICK_LENGTH = 0.3;
const MAJOR_TICK_LENGTH = 0.75;
const MAJOR_TICK_POSITIONS = [-10, -5, 5, 10];
const TICK_LABEL_FONT = CurveFittingConstants.GRAPH_TICK_LABEL_FONT;
const TICK_LABEL_DISTANCE_FROM_AXES = 0.5;
const AXIS_LABEL_DISTANCE_FROM_AXES = 0.2;
const AXIS_LABEL_FONT = CurveFittingConstants.GRAPH_AXIS_LABEL_FONT;
const AXIS_LABEL_MAX_WIDTH = 20;
const AXIS_ARROW_OPTIONS = {
  doubleHead: true,
  tailWidth: 0,
  headWidth: 5,
  headHeight: 5
};
class GraphAreaNode extends Node {
  /**
   * @param {ModelViewTransform2} modelViewTransform
   */
  constructor(modelViewTransform) {
    super();

    // convenience variable, white background bounds for graph in model coordinates
    const backgroundBounds = CurveFittingConstants.GRAPH_BACKGROUND_MODEL_BOUNDS;

    // convenience variable, graph node bounds in model coordinates.
    const graphBounds = CurveFittingConstants.GRAPH_NODE_MODEL_BOUNDS;

    // convenience variable, curve bounds in model coordinates
    const axesBounds = CurveFittingConstants.GRAPH_AXES_BOUNDS;

    // create and add white background
    this.addChild(Rectangle.bounds(modelViewTransform.modelToViewBounds(backgroundBounds), GRAPH_BACKGROUND_OPTIONS));

    // axes
    const axisShape = new Shape();
    axisShape.moveTo(axesBounds.minX, 0).horizontalLineTo(axesBounds.maxX);
    axisShape.moveTo(0, axesBounds.minY).verticalLineTo(axesBounds.maxY);

    // ticks: assumes that backgroundBounds is a square
    for (let i = backgroundBounds.minX; i <= backgroundBounds.maxX; i++) {
      let tickLength = MINOR_TICK_LENGTH;
      if (_.includes(MAJOR_TICK_POSITIONS, i)) {
        tickLength = MAJOR_TICK_LENGTH;
      }
      axisShape.moveTo(i, -tickLength / 2);
      axisShape.lineTo(i, tickLength / 2);
      axisShape.moveTo(-tickLength / 2, i);
      axisShape.lineTo(tickLength / 2, i);
    }
    this.addChild(new Path(modelViewTransform.modelToViewShape(axisShape), AXIS_OPTIONS));

    // tick labels
    MAJOR_TICK_POSITIONS.forEach(tickPosition => {
      this.addChild(new Text(tickPosition, {
        font: TICK_LABEL_FONT,
        centerX: modelViewTransform.modelToViewX(tickPosition),
        top: modelViewTransform.modelToViewY(-TICK_LABEL_DISTANCE_FROM_AXES)
      }));
      this.addChild(new Text(tickPosition, {
        font: TICK_LABEL_FONT,
        centerY: modelViewTransform.modelToViewY(tickPosition),
        right: modelViewTransform.modelToViewX(-TICK_LABEL_DISTANCE_FROM_AXES)
      }));
    });

    // axis labels
    this.addChild(new Text(xSymbolString, {
      font: AXIS_LABEL_FONT,
      maxWidth: AXIS_LABEL_MAX_WIDTH,
      centerY: modelViewTransform.modelToViewY(0),
      left: modelViewTransform.modelToViewX(axesBounds.maxX + AXIS_LABEL_DISTANCE_FROM_AXES)
    }));
    this.addChild(new Text(ySymbolString, {
      font: AXIS_LABEL_FONT,
      maxWidth: AXIS_LABEL_MAX_WIDTH,
      centerX: modelViewTransform.modelToViewX(0),
      bottom: modelViewTransform.modelToViewY(axesBounds.maxY + AXIS_LABEL_DISTANCE_FROM_AXES)
    }));

    // axis arrows
    this.addChild(new ArrowNode(modelViewTransform.modelToViewX(axesBounds.minX), modelViewTransform.modelToViewY(0), modelViewTransform.modelToViewX(axesBounds.maxX), modelViewTransform.modelToViewY(0), AXIS_ARROW_OPTIONS));
    this.addChild(new ArrowNode(modelViewTransform.modelToViewX(0), modelViewTransform.modelToViewY(axesBounds.minY), modelViewTransform.modelToViewX(0), modelViewTransform.modelToViewY(axesBounds.maxY), AXIS_ARROW_OPTIONS));

    // add clip area
    this.clipArea = Shape.bounds(modelViewTransform.modelToViewBounds(graphBounds));
  }
}
curveFitting.register('GraphAreaNode', GraphAreaNode);
export default GraphAreaNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTaGFwZSIsIkFycm93Tm9kZSIsIk5vZGUiLCJQYXRoIiwiUmVjdGFuZ2xlIiwiVGV4dCIsImN1cnZlRml0dGluZyIsIkN1cnZlRml0dGluZ1N0cmluZ3MiLCJDdXJ2ZUZpdHRpbmdDb25zdGFudHMiLCJ4U3ltYm9sU3RyaW5nIiwieFN5bWJvbCIsInlTeW1ib2xTdHJpbmciLCJ5U3ltYm9sIiwiQVhJU19PUFRJT05TIiwibGluZVdpZHRoIiwic3Ryb2tlIiwiR1JBUEhfQkFDS0dST1VORF9PUFRJT05TIiwiZmlsbCIsIk1JTk9SX1RJQ0tfTEVOR1RIIiwiTUFKT1JfVElDS19MRU5HVEgiLCJNQUpPUl9USUNLX1BPU0lUSU9OUyIsIlRJQ0tfTEFCRUxfRk9OVCIsIkdSQVBIX1RJQ0tfTEFCRUxfRk9OVCIsIlRJQ0tfTEFCRUxfRElTVEFOQ0VfRlJPTV9BWEVTIiwiQVhJU19MQUJFTF9ESVNUQU5DRV9GUk9NX0FYRVMiLCJBWElTX0xBQkVMX0ZPTlQiLCJHUkFQSF9BWElTX0xBQkVMX0ZPTlQiLCJBWElTX0xBQkVMX01BWF9XSURUSCIsIkFYSVNfQVJST1dfT1BUSU9OUyIsImRvdWJsZUhlYWQiLCJ0YWlsV2lkdGgiLCJoZWFkV2lkdGgiLCJoZWFkSGVpZ2h0IiwiR3JhcGhBcmVhTm9kZSIsImNvbnN0cnVjdG9yIiwibW9kZWxWaWV3VHJhbnNmb3JtIiwiYmFja2dyb3VuZEJvdW5kcyIsIkdSQVBIX0JBQ0tHUk9VTkRfTU9ERUxfQk9VTkRTIiwiZ3JhcGhCb3VuZHMiLCJHUkFQSF9OT0RFX01PREVMX0JPVU5EUyIsImF4ZXNCb3VuZHMiLCJHUkFQSF9BWEVTX0JPVU5EUyIsImFkZENoaWxkIiwiYm91bmRzIiwibW9kZWxUb1ZpZXdCb3VuZHMiLCJheGlzU2hhcGUiLCJtb3ZlVG8iLCJtaW5YIiwiaG9yaXpvbnRhbExpbmVUbyIsIm1heFgiLCJtaW5ZIiwidmVydGljYWxMaW5lVG8iLCJtYXhZIiwiaSIsInRpY2tMZW5ndGgiLCJfIiwiaW5jbHVkZXMiLCJsaW5lVG8iLCJtb2RlbFRvVmlld1NoYXBlIiwiZm9yRWFjaCIsInRpY2tQb3NpdGlvbiIsImZvbnQiLCJjZW50ZXJYIiwibW9kZWxUb1ZpZXdYIiwidG9wIiwibW9kZWxUb1ZpZXdZIiwiY2VudGVyWSIsInJpZ2h0IiwibWF4V2lkdGgiLCJsZWZ0IiwiYm90dG9tIiwiY2xpcEFyZWEiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkdyYXBoQXJlYU5vZGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTUtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogR3JhcGggYXJlYSBub2RlIGluICdDdXJ2ZSBGaXR0aW5nJyBzaW11bGF0aW9uLlxyXG4gKiBDb250YWlucyBzdGF0aWMgZ3JhcGggYXJlYSB3aXRoIGF4ZXMsIHRpY2sgbGluZXMgYW5kIGxhYmVsc1xyXG4gKlxyXG4gKiBAYXV0aG9yIEFuZHJleSBaZWxlbmtvdiAoTWxlYXJuZXIpXHJcbiAqIEBhdXRob3IgU2F1cmFiaCBUb3RleVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSAnLi4vLi4vLi4vLi4va2l0ZS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IEFycm93Tm9kZSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvQXJyb3dOb2RlLmpzJztcclxuaW1wb3J0IHsgTm9kZSwgUGF0aCwgUmVjdGFuZ2xlLCBUZXh0IH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IGN1cnZlRml0dGluZyBmcm9tICcuLi8uLi9jdXJ2ZUZpdHRpbmcuanMnO1xyXG5pbXBvcnQgQ3VydmVGaXR0aW5nU3RyaW5ncyBmcm9tICcuLi8uLi9DdXJ2ZUZpdHRpbmdTdHJpbmdzLmpzJztcclxuaW1wb3J0IEN1cnZlRml0dGluZ0NvbnN0YW50cyBmcm9tICcuLi9DdXJ2ZUZpdHRpbmdDb25zdGFudHMuanMnO1xyXG5cclxuY29uc3QgeFN5bWJvbFN0cmluZyA9IEN1cnZlRml0dGluZ1N0cmluZ3MueFN5bWJvbDtcclxuY29uc3QgeVN5bWJvbFN0cmluZyA9IEN1cnZlRml0dGluZ1N0cmluZ3MueVN5bWJvbDtcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBBWElTX09QVElPTlMgPSB7IGxpbmVXaWR0aDogMSwgc3Ryb2tlOiAnYmxhY2snIH07XHJcbmNvbnN0IEdSQVBIX0JBQ0tHUk9VTkRfT1BUSU9OUyA9IHsgZmlsbDogJ3doaXRlJywgc3Ryb2tlOiAncmdiKCAyMTQsIDIyMywgMjI2ICknIH07XHJcblxyXG4vLyBpbmZvcm1hdGlvbiByZWdhcmRpbmcgdGlja3MgYW5kIGF4ZXM7IGFsbCBkaXN0YW5jZXMgYW5kIGxlbmd0aHMgYXJlIGluIG1vZGVsIGNvb3JkaW5hdGVzXHJcbmNvbnN0IE1JTk9SX1RJQ0tfTEVOR1RIID0gMC4zO1xyXG5jb25zdCBNQUpPUl9USUNLX0xFTkdUSCA9IDAuNzU7XHJcbmNvbnN0IE1BSk9SX1RJQ0tfUE9TSVRJT05TID0gWyAtMTAsIC01LCA1LCAxMCBdO1xyXG5jb25zdCBUSUNLX0xBQkVMX0ZPTlQgPSBDdXJ2ZUZpdHRpbmdDb25zdGFudHMuR1JBUEhfVElDS19MQUJFTF9GT05UO1xyXG5jb25zdCBUSUNLX0xBQkVMX0RJU1RBTkNFX0ZST01fQVhFUyA9IDAuNTtcclxuY29uc3QgQVhJU19MQUJFTF9ESVNUQU5DRV9GUk9NX0FYRVMgPSAwLjI7XHJcbmNvbnN0IEFYSVNfTEFCRUxfRk9OVCA9IEN1cnZlRml0dGluZ0NvbnN0YW50cy5HUkFQSF9BWElTX0xBQkVMX0ZPTlQ7XHJcbmNvbnN0IEFYSVNfTEFCRUxfTUFYX1dJRFRIID0gMjA7XHJcbmNvbnN0IEFYSVNfQVJST1dfT1BUSU9OUyA9IHtcclxuICBkb3VibGVIZWFkOiB0cnVlLFxyXG4gIHRhaWxXaWR0aDogMCxcclxuICBoZWFkV2lkdGg6IDUsXHJcbiAgaGVhZEhlaWdodDogNVxyXG59O1xyXG5cclxuY2xhc3MgR3JhcGhBcmVhTm9kZSBleHRlbmRzIE5vZGUge1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge01vZGVsVmlld1RyYW5zZm9ybTJ9IG1vZGVsVmlld1RyYW5zZm9ybVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBtb2RlbFZpZXdUcmFuc2Zvcm0gKSB7XHJcblxyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICAvLyBjb252ZW5pZW5jZSB2YXJpYWJsZSwgd2hpdGUgYmFja2dyb3VuZCBib3VuZHMgZm9yIGdyYXBoIGluIG1vZGVsIGNvb3JkaW5hdGVzXHJcbiAgICBjb25zdCBiYWNrZ3JvdW5kQm91bmRzID0gQ3VydmVGaXR0aW5nQ29uc3RhbnRzLkdSQVBIX0JBQ0tHUk9VTkRfTU9ERUxfQk9VTkRTO1xyXG5cclxuICAgIC8vIGNvbnZlbmllbmNlIHZhcmlhYmxlLCBncmFwaCBub2RlIGJvdW5kcyBpbiBtb2RlbCBjb29yZGluYXRlcy5cclxuICAgIGNvbnN0IGdyYXBoQm91bmRzID0gQ3VydmVGaXR0aW5nQ29uc3RhbnRzLkdSQVBIX05PREVfTU9ERUxfQk9VTkRTO1xyXG5cclxuICAgIC8vIGNvbnZlbmllbmNlIHZhcmlhYmxlLCBjdXJ2ZSBib3VuZHMgaW4gbW9kZWwgY29vcmRpbmF0ZXNcclxuICAgIGNvbnN0IGF4ZXNCb3VuZHMgPSBDdXJ2ZUZpdHRpbmdDb25zdGFudHMuR1JBUEhfQVhFU19CT1VORFM7XHJcblxyXG4gICAgLy8gY3JlYXRlIGFuZCBhZGQgd2hpdGUgYmFja2dyb3VuZFxyXG4gICAgdGhpcy5hZGRDaGlsZCggUmVjdGFuZ2xlLmJvdW5kcyhcclxuICAgICAgbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3Qm91bmRzKCBiYWNrZ3JvdW5kQm91bmRzICksXHJcbiAgICAgIEdSQVBIX0JBQ0tHUk9VTkRfT1BUSU9OU1xyXG4gICAgKSApO1xyXG5cclxuICAgIC8vIGF4ZXNcclxuICAgIGNvbnN0IGF4aXNTaGFwZSA9IG5ldyBTaGFwZSgpO1xyXG4gICAgYXhpc1NoYXBlLm1vdmVUbyggYXhlc0JvdW5kcy5taW5YLCAwICkuaG9yaXpvbnRhbExpbmVUbyggYXhlc0JvdW5kcy5tYXhYICk7XHJcbiAgICBheGlzU2hhcGUubW92ZVRvKCAwLCBheGVzQm91bmRzLm1pblkgKS52ZXJ0aWNhbExpbmVUbyggYXhlc0JvdW5kcy5tYXhZICk7XHJcblxyXG4gICAgLy8gdGlja3M6IGFzc3VtZXMgdGhhdCBiYWNrZ3JvdW5kQm91bmRzIGlzIGEgc3F1YXJlXHJcbiAgICBmb3IgKCBsZXQgaSA9IGJhY2tncm91bmRCb3VuZHMubWluWDsgaSA8PSBiYWNrZ3JvdW5kQm91bmRzLm1heFg7IGkrKyApIHtcclxuICAgICAgbGV0IHRpY2tMZW5ndGggPSBNSU5PUl9USUNLX0xFTkdUSDtcclxuICAgICAgaWYgKCBfLmluY2x1ZGVzKCBNQUpPUl9USUNLX1BPU0lUSU9OUywgaSApICkge1xyXG4gICAgICAgIHRpY2tMZW5ndGggPSBNQUpPUl9USUNLX0xFTkdUSDtcclxuICAgICAgfVxyXG4gICAgICBheGlzU2hhcGUubW92ZVRvKCBpLCAtdGlja0xlbmd0aCAvIDIgKTtcclxuICAgICAgYXhpc1NoYXBlLmxpbmVUbyggaSwgdGlja0xlbmd0aCAvIDIgKTtcclxuICAgICAgYXhpc1NoYXBlLm1vdmVUbyggLXRpY2tMZW5ndGggLyAyLCBpICk7XHJcbiAgICAgIGF4aXNTaGFwZS5saW5lVG8oIHRpY2tMZW5ndGggLyAyLCBpICk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmFkZENoaWxkKCBuZXcgUGF0aCggbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3U2hhcGUoIGF4aXNTaGFwZSApLCBBWElTX09QVElPTlMgKSApO1xyXG5cclxuICAgIC8vIHRpY2sgbGFiZWxzXHJcbiAgICBNQUpPUl9USUNLX1BPU0lUSU9OUy5mb3JFYWNoKCB0aWNrUG9zaXRpb24gPT4ge1xyXG4gICAgICB0aGlzLmFkZENoaWxkKCBuZXcgVGV4dCggdGlja1Bvc2l0aW9uLCB7XHJcbiAgICAgICAgZm9udDogVElDS19MQUJFTF9GT05ULFxyXG4gICAgICAgIGNlbnRlclg6IG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1goIHRpY2tQb3NpdGlvbiApLFxyXG4gICAgICAgIHRvcDogbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WSggLVRJQ0tfTEFCRUxfRElTVEFOQ0VfRlJPTV9BWEVTIClcclxuICAgICAgfSApICk7XHJcbiAgICAgIHRoaXMuYWRkQ2hpbGQoIG5ldyBUZXh0KCB0aWNrUG9zaXRpb24sIHtcclxuICAgICAgICBmb250OiBUSUNLX0xBQkVMX0ZPTlQsXHJcbiAgICAgICAgY2VudGVyWTogbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WSggdGlja1Bvc2l0aW9uICksXHJcbiAgICAgICAgcmlnaHQ6IG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1goIC1USUNLX0xBQkVMX0RJU1RBTkNFX0ZST01fQVhFUyApXHJcbiAgICAgIH0gKSApO1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIGF4aXMgbGFiZWxzXHJcbiAgICB0aGlzLmFkZENoaWxkKCBuZXcgVGV4dCggeFN5bWJvbFN0cmluZywge1xyXG4gICAgICBmb250OiBBWElTX0xBQkVMX0ZPTlQsXHJcbiAgICAgIG1heFdpZHRoOiBBWElTX0xBQkVMX01BWF9XSURUSCxcclxuICAgICAgY2VudGVyWTogbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WSggMCApLFxyXG4gICAgICBsZWZ0OiBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdYKCBheGVzQm91bmRzLm1heFggKyBBWElTX0xBQkVMX0RJU1RBTkNFX0ZST01fQVhFUyApXHJcbiAgICB9ICkgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIG5ldyBUZXh0KCB5U3ltYm9sU3RyaW5nLCB7XHJcbiAgICAgIGZvbnQ6IEFYSVNfTEFCRUxfRk9OVCxcclxuICAgICAgbWF4V2lkdGg6IEFYSVNfTEFCRUxfTUFYX1dJRFRILFxyXG4gICAgICBjZW50ZXJYOiBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdYKCAwICksXHJcbiAgICAgIGJvdHRvbTogbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WSggYXhlc0JvdW5kcy5tYXhZICsgQVhJU19MQUJFTF9ESVNUQU5DRV9GUk9NX0FYRVMgKVxyXG4gICAgfSApICk7XHJcblxyXG4gICAgLy8gYXhpcyBhcnJvd3NcclxuICAgIHRoaXMuYWRkQ2hpbGQoIG5ldyBBcnJvd05vZGUoXHJcbiAgICAgIG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1goIGF4ZXNCb3VuZHMubWluWCApLFxyXG4gICAgICBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdZKCAwICksXHJcbiAgICAgIG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1goIGF4ZXNCb3VuZHMubWF4WCApLFxyXG4gICAgICBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdZKCAwICksXHJcbiAgICAgIEFYSVNfQVJST1dfT1BUSU9OU1xyXG4gICAgKSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggbmV3IEFycm93Tm9kZShcclxuICAgICAgbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WCggMCApLFxyXG4gICAgICBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdZKCBheGVzQm91bmRzLm1pblkgKSxcclxuICAgICAgbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WCggMCApLFxyXG4gICAgICBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdZKCBheGVzQm91bmRzLm1heFkgKSxcclxuICAgICAgQVhJU19BUlJPV19PUFRJT05TXHJcbiAgICApICk7XHJcblxyXG4gICAgLy8gYWRkIGNsaXAgYXJlYVxyXG4gICAgdGhpcy5jbGlwQXJlYSA9IFNoYXBlLmJvdW5kcyggbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3Qm91bmRzKCBncmFwaEJvdW5kcyApICk7XHJcblxyXG4gIH1cclxuXHJcbn1cclxuXHJcbmN1cnZlRml0dGluZy5yZWdpc3RlciggJ0dyYXBoQXJlYU5vZGUnLCBHcmFwaEFyZWFOb2RlICk7XHJcbmV4cG9ydCBkZWZhdWx0IEdyYXBoQXJlYU5vZGU7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBU0EsS0FBSyxRQUFRLGdDQUFnQztBQUN0RCxPQUFPQyxTQUFTLE1BQU0sMENBQTBDO0FBQ2hFLFNBQVNDLElBQUksRUFBRUMsSUFBSSxFQUFFQyxTQUFTLEVBQUVDLElBQUksUUFBUSxtQ0FBbUM7QUFDL0UsT0FBT0MsWUFBWSxNQUFNLHVCQUF1QjtBQUNoRCxPQUFPQyxtQkFBbUIsTUFBTSw4QkFBOEI7QUFDOUQsT0FBT0MscUJBQXFCLE1BQU0sNkJBQTZCO0FBRS9ELE1BQU1DLGFBQWEsR0FBR0YsbUJBQW1CLENBQUNHLE9BQU87QUFDakQsTUFBTUMsYUFBYSxHQUFHSixtQkFBbUIsQ0FBQ0ssT0FBTzs7QUFFakQ7QUFDQSxNQUFNQyxZQUFZLEdBQUc7RUFBRUMsU0FBUyxFQUFFLENBQUM7RUFBRUMsTUFBTSxFQUFFO0FBQVEsQ0FBQztBQUN0RCxNQUFNQyx3QkFBd0IsR0FBRztFQUFFQyxJQUFJLEVBQUUsT0FBTztFQUFFRixNQUFNLEVBQUU7QUFBdUIsQ0FBQzs7QUFFbEY7QUFDQSxNQUFNRyxpQkFBaUIsR0FBRyxHQUFHO0FBQzdCLE1BQU1DLGlCQUFpQixHQUFHLElBQUk7QUFDOUIsTUFBTUMsb0JBQW9CLEdBQUcsQ0FBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFFO0FBQy9DLE1BQU1DLGVBQWUsR0FBR2IscUJBQXFCLENBQUNjLHFCQUFxQjtBQUNuRSxNQUFNQyw2QkFBNkIsR0FBRyxHQUFHO0FBQ3pDLE1BQU1DLDZCQUE2QixHQUFHLEdBQUc7QUFDekMsTUFBTUMsZUFBZSxHQUFHakIscUJBQXFCLENBQUNrQixxQkFBcUI7QUFDbkUsTUFBTUMsb0JB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