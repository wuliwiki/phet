// Copyright 2014-2023, University of Colorado Boulder

/**
 * Type for a user controlled movable element. The element can return to its origin when animated.
 *
 * @author Martin Veillette (Berea College)
 */

import BooleanProperty from '../../../../axon/js/BooleanProperty.js';
import Emitter from '../../../../axon/js/Emitter.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import Vector2Property from '../../../../dot/js/Vector2Property.js';
import merge from '../../../../phet-core/js/merge.js';
import PhetioObject from '../../../../tandem/js/PhetioObject.js';
import IOType from '../../../../tandem/js/types/IOType.js';
import NullableIO from '../../../../tandem/js/types/NullableIO.js';
import chargesAndFields from '../../chargesAndFields.js';
import ChargesAndFieldsConstants from '../ChargesAndFieldsConstants.js';

// constants
const NullableIOVector2IO = NullableIO(Vector2.Vector2IO);
class ModelElement extends PhetioObject {
  /**
   * @param {Vector2} initialPosition - Where to animate the element when it is done being used.
   * @param {Object} [options]
   */
  constructor(initialPosition, options) {
    options = merge({
      phetioType: ModelElement.ModelElementIO
    }, options);
    super(options);
    assert && assert(initialPosition instanceof Vector2);
    const tandem = options.tandem; // required

    // @public
    this.positionProperty = new Vector2Property(new Vector2(0, 0), {
      tandem: tandem.createTandem('positionProperty'),
      valueComparisonStrategy: 'equalsFunction' // see https://github.com/phetsims/charges-and-fields/issues/132
    });

    // @public {Property.<boolean>}
    // Flag that indicates if this model element is controlled by the user
    this.isUserControlledProperty = new BooleanProperty(false, {
      tandem: tandem.createTandem('isUserControlledProperty')
    });

    // @public {Property.<boolean>}
    // Flag that indicates if the model element is active or dormant
    this.isActiveProperty = new BooleanProperty(false, {
      tandem: tandem.createTandem('isActiveProperty')
    });

    // @public {Property.<boolean>}
    // If false, the user will not be able to interact with this charge at all.
    this.isInteractiveProperty = new BooleanProperty(true, {
      tandem: tandem.createTandem('isInteractiveProperty')
    });

    // @public (read-only) {Tween|null} - Tween that is animating the particle back to its home in the toolbox, or null
    // if not animating.  Public access is only for checking existence, not for manipulating or reading the tween attributes
    this.animationTween = null;

    // @public {Vector2} Where to animate the element when it is done being used.
    this.initialPosition = initialPosition;

    // @public
    this.returnedToOriginEmitter = new Emitter();
  }

  /**
   * Releases references
   * @public
   */
  dispose() {
    this.isInteractiveProperty.dispose();
    this.isUserControlledProperty.dispose();
    this.isActiveProperty.dispose();
    this.positionProperty.dispose();

    // Cancel animation (if any) so it doesn't try to update a disposed ModelElement
    this.animationTween && this.animationTween.stop();
    super.dispose();
  }

  /**
   * Function that animates the position of the chargeParticle toward its origin Position.
   * @public
   */
  animate() {
    assert && assert(this.animationTween === null, 'cannot start animating while already animating');

    // distance from current position to the destination position
    const distanceToDestination = this.positionProperty.get().distance(this.initialPosition);

    // time to perform the animation in milliseconds, time is proportional to distance
    const animationTime = distanceToDestination / ChargesAndFieldsConstants.ANIMATION_VELOCITY * 1000; // in milliseconds

    // convenience variable for the Tween animation
    const position = {
      x: this.positionProperty.get().x,
      y: this.positionProperty.get().y
    };
    this.animationTween = new TWEEN.Tween(position).to({
      x: this.initialPosition.x,
      y: this.initialPosition.y
    }, animationTime).easing(TWEEN.Easing.Cubic.InOut).onUpdate(() => {
      this.positionProperty.set(new Vector2(position.x, position.y));
    }).onComplete(() => {
      this.animationTween = null; // done with the animation
      this.returnedToOriginEmitter.emit(); // model element can be removed from its observable array
    });

    this.animationTween.start(phet.joist.elapsedTime);
  }
}
ModelElement.ModelElementIO = new IOType('ModelElementIO', {
  valueType: ModelElement,
  documentation: 'A Model Element',
  toStateObject: modelElement => ({
    initialPosition: NullableIOVector2IO.toStateObject(modelElement.initialPosition)
  }),
  stateSchema: {
    initialPosition: NullableIOVector2IO
  },
  stateObjectToCreateElementArguments: stateObject => [NullableIOVector2IO.fromStateObject(stateObject.initialPosition)]
});
chargesAndFields.register('ModelElement', ModelElement);
export default ModelElement;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb29sZWFuUHJvcGVydHkiLCJFbWl0dGVyIiwiVmVjdG9yMiIsIlZlY3RvcjJQcm9wZXJ0eSIsIm1lcmdlIiwiUGhldGlvT2JqZWN0IiwiSU9UeXBlIiwiTnVsbGFibGVJTyIsImNoYXJnZXNBbmRGaWVsZHMiLCJDaGFyZ2VzQW5kRmllbGRzQ29uc3RhbnRzIiwiTnVsbGFibGVJT1ZlY3RvcjJJTyIsIlZlY3RvcjJJTyIsIk1vZGVsRWxlbWVudCIsImNvbnN0cnVjdG9yIiwiaW5pdGlhbFBvc2l0aW9uIiwib3B0aW9ucyIsInBoZXRpb1R5cGUiLCJNb2RlbEVsZW1lbnRJTyIsImFzc2VydCIsInRhbmRlbSIsInBvc2l0aW9uUHJvcGVydHkiLCJjcmVhdGVUYW5kZW0iLCJ2YWx1ZUNvbXBhcmlzb25TdHJhdGVneSIsImlzVXNlckNvbnRyb2xsZWRQcm9wZXJ0eSIsImlzQWN0aXZlUHJvcGVydHkiLCJpc0ludGVyYWN0aXZlUHJvcGVydHkiLCJhbmltYXRpb25Ud2VlbiIsInJldHVybmVkVG9PcmlnaW5FbWl0dGVyIiwiZGlzcG9zZSIsInN0b3AiLCJhbmltYXRlIiwiZGlzdGFuY2VUb0Rlc3RpbmF0aW9uIiwiZ2V0IiwiZGlzdGFuY2UiLCJhbmltYXRpb25UaW1lIiwiQU5JTUFUSU9OX1ZFTE9DSVRZIiwicG9zaXRpb24iLCJ4IiwieSIsIlRXRUVOIiwiVHdlZW4iLCJ0byIsImVhc2luZyIsIkVhc2luZyIsIkN1YmljIiwiSW5PdXQiLCJvblVwZGF0ZSIsInNldCIsIm9uQ29tcGxldGUiLCJlbWl0Iiwic3RhcnQiLCJwaGV0Iiwiam9pc3QiLCJlbGFwc2VkVGltZSIsInZhbHVlVHlwZSIsImRvY3VtZW50YXRpb24iLCJ0b1N0YXRlT2JqZWN0IiwibW9kZWxFbGVtZW50Iiwic3RhdGVTY2hlbWEiLCJzdGF0ZU9iamVjdFRvQ3JlYXRlRWxlbWVudEFyZ3VtZW50cyIsInN0YXRlT2JqZWN0IiwiZnJvbVN0YXRlT2JqZWN0IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJNb2RlbEVsZW1lbnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTQtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogVHlwZSBmb3IgYSB1c2VyIGNvbnRyb2xsZWQgbW92YWJsZSBlbGVtZW50LiBUaGUgZWxlbWVudCBjYW4gcmV0dXJuIHRvIGl0cyBvcmlnaW4gd2hlbiBhbmltYXRlZC5cclxuICpcclxuICogQGF1dGhvciBNYXJ0aW4gVmVpbGxldHRlIChCZXJlYSBDb2xsZWdlKVxyXG4gKi9cclxuXHJcbmltcG9ydCBCb29sZWFuUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9Cb29sZWFuUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgRW1pdHRlciBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL0VtaXR0ZXIuanMnO1xyXG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVmVjdG9yMi5qcyc7XHJcbmltcG9ydCBWZWN0b3IyUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjJQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBtZXJnZSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvbWVyZ2UuanMnO1xyXG5pbXBvcnQgUGhldGlvT2JqZWN0IGZyb20gJy4uLy4uLy4uLy4uL3RhbmRlbS9qcy9QaGV0aW9PYmplY3QuanMnO1xyXG5pbXBvcnQgSU9UeXBlIGZyb20gJy4uLy4uLy4uLy4uL3RhbmRlbS9qcy90eXBlcy9JT1R5cGUuanMnO1xyXG5pbXBvcnQgTnVsbGFibGVJTyBmcm9tICcuLi8uLi8uLi8uLi90YW5kZW0vanMvdHlwZXMvTnVsbGFibGVJTy5qcyc7XHJcbmltcG9ydCBjaGFyZ2VzQW5kRmllbGRzIGZyb20gJy4uLy4uL2NoYXJnZXNBbmRGaWVsZHMuanMnO1xyXG5pbXBvcnQgQ2hhcmdlc0FuZEZpZWxkc0NvbnN0YW50cyBmcm9tICcuLi9DaGFyZ2VzQW5kRmllbGRzQ29uc3RhbnRzLmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBOdWxsYWJsZUlPVmVjdG9yMklPID0gTnVsbGFibGVJTyggVmVjdG9yMi5WZWN0b3IySU8gKTtcclxuXHJcbmNsYXNzIE1vZGVsRWxlbWVudCBleHRlbmRzIFBoZXRpb09iamVjdCB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7VmVjdG9yMn0gaW5pdGlhbFBvc2l0aW9uIC0gV2hlcmUgdG8gYW5pbWF0ZSB0aGUgZWxlbWVudCB3aGVuIGl0IGlzIGRvbmUgYmVpbmcgdXNlZC5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIGluaXRpYWxQb3NpdGlvbiwgb3B0aW9ucyApIHtcclxuXHJcbiAgICBvcHRpb25zID0gbWVyZ2UoIHtcclxuXHJcbiAgICAgIHBoZXRpb1R5cGU6IE1vZGVsRWxlbWVudC5Nb2RlbEVsZW1lbnRJT1xyXG4gICAgfSwgb3B0aW9ucyApO1xyXG4gICAgc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBpbml0aWFsUG9zaXRpb24gaW5zdGFuY2VvZiBWZWN0b3IyICk7XHJcblxyXG4gICAgY29uc3QgdGFuZGVtID0gb3B0aW9ucy50YW5kZW07Ly8gcmVxdWlyZWRcclxuXHJcbiAgICAvLyBAcHVibGljXHJcbiAgICB0aGlzLnBvc2l0aW9uUHJvcGVydHkgPSBuZXcgVmVjdG9yMlByb3BlcnR5KCBuZXcgVmVjdG9yMiggMCwgMCApLCB7XHJcbiAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3Bvc2l0aW9uUHJvcGVydHknICksXHJcbiAgICAgIHZhbHVlQ29tcGFyaXNvblN0cmF0ZWd5OiAnZXF1YWxzRnVuY3Rpb24nIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvY2hhcmdlcy1hbmQtZmllbGRzL2lzc3Vlcy8xMzJcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBAcHVibGljIHtQcm9wZXJ0eS48Ym9vbGVhbj59XHJcbiAgICAvLyBGbGFnIHRoYXQgaW5kaWNhdGVzIGlmIHRoaXMgbW9kZWwgZWxlbWVudCBpcyBjb250cm9sbGVkIGJ5IHRoZSB1c2VyXHJcbiAgICB0aGlzLmlzVXNlckNvbnRyb2xsZWRQcm9wZXJ0eSA9IG5ldyBCb29sZWFuUHJvcGVydHkoIGZhbHNlLCB7XHJcbiAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2lzVXNlckNvbnRyb2xsZWRQcm9wZXJ0eScgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIEBwdWJsaWMge1Byb3BlcnR5Ljxib29sZWFuPn1cclxuICAgIC8vIEZsYWcgdGhhdCBpbmRpY2F0ZXMgaWYgdGhlIG1vZGVsIGVsZW1lbnQgaXMgYWN0aXZlIG9yIGRvcm1hbnRcclxuICAgIHRoaXMuaXNBY3RpdmVQcm9wZXJ0eSA9IG5ldyBCb29sZWFuUHJvcGVydHkoIGZhbHNlLCB7XHJcbiAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2lzQWN0aXZlUHJvcGVydHknIClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBAcHVibGljIHtQcm9wZXJ0eS48Ym9vbGVhbj59XHJcbiAgICAvLyBJZiBmYWxzZSwgdGhlIHVzZXIgd2lsbCBub3QgYmUgYWJsZSB0byBpbnRlcmFjdCB3aXRoIHRoaXMgY2hhcmdlIGF0IGFsbC5cclxuICAgIHRoaXMuaXNJbnRlcmFjdGl2ZVByb3BlcnR5ID0gbmV3IEJvb2xlYW5Qcm9wZXJ0eSggdHJ1ZSwge1xyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdpc0ludGVyYWN0aXZlUHJvcGVydHknIClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBAcHVibGljIChyZWFkLW9ubHkpIHtUd2VlbnxudWxsfSAtIFR3ZWVuIHRoYXQgaXMgYW5pbWF0aW5nIHRoZSBwYXJ0aWNsZSBiYWNrIHRvIGl0cyBob21lIGluIHRoZSB0b29sYm94LCBvciBudWxsXHJcbiAgICAvLyBpZiBub3QgYW5pbWF0aW5nLiAgUHVibGljIGFjY2VzcyBpcyBvbmx5IGZvciBjaGVja2luZyBleGlzdGVuY2UsIG5vdCBmb3IgbWFuaXB1bGF0aW5nIG9yIHJlYWRpbmcgdGhlIHR3ZWVuIGF0dHJpYnV0ZXNcclxuICAgIHRoaXMuYW5pbWF0aW9uVHdlZW4gPSBudWxsO1xyXG5cclxuICAgIC8vIEBwdWJsaWMge1ZlY3RvcjJ9IFdoZXJlIHRvIGFuaW1hdGUgdGhlIGVsZW1lbnQgd2hlbiBpdCBpcyBkb25lIGJlaW5nIHVzZWQuXHJcbiAgICB0aGlzLmluaXRpYWxQb3NpdGlvbiA9IGluaXRpYWxQb3NpdGlvbjtcclxuXHJcbiAgICAvLyBAcHVibGljXHJcbiAgICB0aGlzLnJldHVybmVkVG9PcmlnaW5FbWl0dGVyID0gbmV3IEVtaXR0ZXIoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbGVhc2VzIHJlZmVyZW5jZXNcclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgZGlzcG9zZSgpIHtcclxuICAgIHRoaXMuaXNJbnRlcmFjdGl2ZVByb3BlcnR5LmRpc3Bvc2UoKTtcclxuICAgIHRoaXMuaXNVc2VyQ29udHJvbGxlZFByb3BlcnR5LmRpc3Bvc2UoKTtcclxuICAgIHRoaXMuaXNBY3RpdmVQcm9wZXJ0eS5kaXNwb3NlKCk7XHJcbiAgICB0aGlzLnBvc2l0aW9uUHJvcGVydHkuZGlzcG9zZSgpO1xyXG5cclxuICAgIC8vIENhbmNlbCBhbmltYXRpb24gKGlmIGFueSkgc28gaXQgZG9lc24ndCB0cnkgdG8gdXBkYXRlIGEgZGlzcG9zZWQgTW9kZWxFbGVtZW50XHJcbiAgICB0aGlzLmFuaW1hdGlvblR3ZWVuICYmIHRoaXMuYW5pbWF0aW9uVHdlZW4uc3RvcCgpO1xyXG4gICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdGhhdCBhbmltYXRlcyB0aGUgcG9zaXRpb24gb2YgdGhlIGNoYXJnZVBhcnRpY2xlIHRvd2FyZCBpdHMgb3JpZ2luIFBvc2l0aW9uLlxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBhbmltYXRlKCkge1xyXG5cclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIHRoaXMuYW5pbWF0aW9uVHdlZW4gPT09IG51bGwsICdjYW5ub3Qgc3RhcnQgYW5pbWF0aW5nIHdoaWxlIGFscmVhZHkgYW5pbWF0aW5nJyApO1xyXG5cclxuICAgIC8vIGRpc3RhbmNlIGZyb20gY3VycmVudCBwb3NpdGlvbiB0byB0aGUgZGVzdGluYXRpb24gcG9zaXRpb25cclxuICAgIGNvbnN0IGRpc3RhbmNlVG9EZXN0aW5hdGlvbiA9IHRoaXMucG9zaXRpb25Qcm9wZXJ0eS5nZXQoKS5kaXN0YW5jZSggdGhpcy5pbml0aWFsUG9zaXRpb24gKTtcclxuXHJcbiAgICAvLyB0aW1lIHRvIHBlcmZvcm0gdGhlIGFuaW1hdGlvbiBpbiBtaWxsaXNlY29uZHMsIHRpbWUgaXMgcHJvcG9ydGlvbmFsIHRvIGRpc3RhbmNlXHJcbiAgICBjb25zdCBhbmltYXRpb25UaW1lID0gKCBkaXN0YW5jZVRvRGVzdGluYXRpb24gLyBDaGFyZ2VzQW5kRmllbGRzQ29uc3RhbnRzLkFOSU1BVElPTl9WRUxPQ0lUWSApICogMTAwMDsgLy8gaW4gbWlsbGlzZWNvbmRzXHJcblxyXG4gICAgLy8gY29udmVuaWVuY2UgdmFyaWFibGUgZm9yIHRoZSBUd2VlbiBhbmltYXRpb25cclxuICAgIGNvbnN0IHBvc2l0aW9uID0ge1xyXG4gICAgICB4OiB0aGlzLnBvc2l0aW9uUHJvcGVydHkuZ2V0KCkueCxcclxuICAgICAgeTogdGhpcy5wb3NpdGlvblByb3BlcnR5LmdldCgpLnlcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5hbmltYXRpb25Ud2VlbiA9IG5ldyBUV0VFTi5Ud2VlbiggcG9zaXRpb24gKS50bygge1xyXG4gICAgICB4OiB0aGlzLmluaXRpYWxQb3NpdGlvbi54LFxyXG4gICAgICB5OiB0aGlzLmluaXRpYWxQb3NpdGlvbi55XHJcbiAgICB9LCBhbmltYXRpb25UaW1lICkuZWFzaW5nKCBUV0VFTi5FYXNpbmcuQ3ViaWMuSW5PdXQgKS5vblVwZGF0ZSggKCkgPT4ge1xyXG4gICAgICB0aGlzLnBvc2l0aW9uUHJvcGVydHkuc2V0KCBuZXcgVmVjdG9yMiggcG9zaXRpb24ueCwgcG9zaXRpb24ueSApICk7XHJcbiAgICB9ICkub25Db21wbGV0ZSggKCkgPT4ge1xyXG4gICAgICB0aGlzLmFuaW1hdGlvblR3ZWVuID0gbnVsbDsgLy8gZG9uZSB3aXRoIHRoZSBhbmltYXRpb25cclxuICAgICAgdGhpcy5yZXR1cm5lZFRvT3JpZ2luRW1pdHRlci5lbWl0KCk7IC8vIG1vZGVsIGVsZW1lbnQgY2FuIGJlIHJlbW92ZWQgZnJvbSBpdHMgb2JzZXJ2YWJsZSBhcnJheVxyXG4gICAgfSApO1xyXG5cclxuICAgIHRoaXMuYW5pbWF0aW9uVHdlZW4uc3RhcnQoIHBoZXQuam9pc3QuZWxhcHNlZFRpbWUgKTtcclxuICB9XHJcbn1cclxuXHJcbk1vZGVsRWxlbWVudC5Nb2RlbEVsZW1lbnRJTyA9IG5ldyBJT1R5cGUoICdNb2RlbEVsZW1lbnRJTycsIHtcclxuICB2YWx1ZVR5cGU6IE1vZGVsRWxlbWVudCxcclxuICBkb2N1bWVudGF0aW9uOiAnQSBNb2RlbCBFbGVtZW50JyxcclxuICB0b1N0YXRlT2JqZWN0OiBtb2RlbEVsZW1lbnQgPT4gKCB7XHJcbiAgICBpbml0aWFsUG9zaXRpb246IE51bGxhYmxlSU9WZWN0b3IySU8udG9TdGF0ZU9iamVjdCggbW9kZWxFbGVtZW50LmluaXRpYWxQb3NpdGlvbiApXHJcbiAgfSApLFxyXG4gIHN0YXRlU2NoZW1hOiB7XHJcbiAgICBpbml0aWFsUG9zaXRpb246IE51bGxhYmxlSU9WZWN0b3IySU9cclxuICB9LFxyXG4gIHN0YXRlT2JqZWN0VG9DcmVhdGVFbGVtZW50QXJndW1lbnRzOiBzdGF0ZU9iamVjdCA9PiBbIE51bGxhYmxlSU9WZWN0b3IySU8uZnJvbVN0YXRlT2JqZWN0KCBzdGF0ZU9iamVjdC5pbml0aWFsUG9zaXRpb24gKSBdXHJcbn0gKTtcclxuXHJcbmNoYXJnZXNBbmRGaWVsZHMucmVnaXN0ZXIoICdNb2RlbEVsZW1lbnQnLCBNb2RlbEVsZW1lbnQgKTtcclxuZXhwb3J0IGRlZmF1bHQgTW9kZWxFbGVtZW50OyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxlQUFlLE1BQU0sd0NBQXdDO0FBQ3BFLE9BQU9DLE9BQU8sTUFBTSxnQ0FBZ0M7QUFDcEQsT0FBT0MsT0FBTyxNQUFNLCtCQUErQjtBQUNuRCxPQUFPQyxlQUFlLE1BQU0sdUNBQXVDO0FBQ25FLE9BQU9DLEtBQUssTUFBTSxtQ0FBbUM7QUFDckQsT0FBT0MsWUFBWSxNQUFNLHVDQUF1QztBQUNoRSxPQUFPQyxNQUFNLE1BQU0sdUNBQXVDO0FBQzFELE9BQU9DLFVBQVUsTUFBTSwyQ0FBMkM7QUFDbEUsT0FBT0MsZ0JBQWdCLE1BQU0sMkJBQTJCO0FBQ3hELE9BQU9DLHlCQUF5QixNQUFNLGlDQUFpQzs7QUFFdkU7QUFDQSxNQUFNQyxtQkFBbUIsR0FBR0gsVUFBVSxDQUFFTCxPQUFPLENBQUNTLFNBQVUsQ0FBQztBQUUzRCxNQUFNQyxZQUFZLFNBQVNQLFlBQVksQ0FBQztFQUV0QztBQUNGO0FBQ0E7QUFDQTtFQUNFUSxXQUFXQSxDQUFFQyxlQUFlLEVBQUVDLE9BQU8sRUFBRztJQUV0Q0EsT0FBTyxHQUFHWCxLQUFLLENBQUU7TUFFZlksVUFBVSxFQUFFSixZQUFZLENBQUNLO0lBQzNCLENBQUMsRUFBRUYsT0FBUSxDQUFDO0lBQ1osS0FBSyxDQUFFQSxPQUFRLENBQUM7SUFFaEJHLE1BQU0sSUFBSUEsTUFBTSxDQUFFSixlQUFlLFlBQVlaLE9BQVEsQ0FBQztJQUV0RCxNQUFNaUIsTUFBTSxHQUFHSixPQUFPLENBQUNJLE1BQU0sQ0FBQzs7SUFFOUI7SUFDQSxJQUFJLENBQUNDLGdCQUFnQixHQUFHLElBQUlqQixlQUFlLENBQUUsSUFBSUQsT0FBTyxDQUFFLENBQUMsRUFB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