// Copyright 2014-2022, University of Colorado Boulder

/**
 * View for the charged particle, which can be dragged to translate.
 *
 * @author Martin Veillette (Berea College)
 */

import Vector2 from '../../../../dot/js/Vector2.js';
import { DragListener, Node } from '../../../../scenery/js/imports.js';
import chargesAndFields from '../../chargesAndFields.js';
import ChargesAndFieldsConstants from '../ChargesAndFieldsConstants.js';
import ChargedParticleRepresentationNode from './ChargedParticleRepresentationNode.js';

// constants
const CIRCLE_RADIUS = ChargesAndFieldsConstants.CHARGE_RADIUS; // radius of a charged particle

class ChargedParticleNode extends ChargedParticleRepresentationNode {
  /**
   * Constructor for the ChargedParticleNode which renders the charge as a scenery node.
   * @param {ChargedParticle} chargedParticle - the model of the charged particle
   * @param {function} snapToGridLines - function( {Property.<Vector2>})
   * @param {ModelViewTransform2} modelViewTransform - the coordinate transform between model coordinates and view coordinates
   * @param {Property.<Bounds2>} availableModelBoundsProperty - dragBounds for the charged particle
   * @param {Bounds2} enclosureBounds - bounds in the model coordinate frame of the charge and sensor enclosure
   * @param {Tandem} tandem
   */
  constructor(chargedParticle, snapToGridLines, modelViewTransform, availableModelBoundsProperty, enclosureBounds, tandem) {
    super(chargedParticle.charge, {
      tandem: tandem,
      phetioDynamicElement: true,
      phetioType: Node.NodeIO
    });
    this.modelElement = chargedParticle;

    // Set up the mouse areas for this node so that this can still be grabbed when invisible.
    this.touchArea = this.localBounds.dilated(10);

    // Register for synchronization with model.
    const positionListener = position => {
      this.translation = modelViewTransform.modelToViewPosition(position);
    };
    chargedParticle.positionProperty.link(positionListener);
    this.dragListener = new DragListener({
      applyOffset: false,
      positionProperty: chargedParticle.positionProperty,
      tandem: tandem.createTandem('dragListener'),
      dragBoundsProperty: availableModelBoundsProperty,
      transform: modelViewTransform,
      canStartPress: () => !chargedParticle.animationTween,
      offsetPosition: (point, listener) => {
        return listener.pointer && listener.pointer.isTouchLike() ? new Vector2(0, -2 * CIRCLE_RADIUS) : Vector2.ZERO;
      },
      start: () => {
        // Move the chargedParticle to the front of this layer when grabbed by the user.
        this.moveToFront();
      },
      end: () => {
        snapToGridLines(chargedParticle.positionProperty);
        if (!enclosureBounds.containsPoint(chargedParticle.positionProperty.get())) {
          chargedParticle.isActiveProperty.set(true);
        }
      }
    });
    this.dragListener.isUserControlledProperty.link(controlled => {
      chargedParticle.isUserControlledProperty.value = controlled;
    });

    // Conditionally hook up the input handling (and cursor) when the charged particle is interactive.
    let isDragListenerAttached = false;
    const isInteractiveListener = () => {
      const isInteractive = chargedParticle.isInteractiveProperty.get();
      if (isDragListenerAttached !== isInteractive) {
        if (isInteractive) {
          this.cursor = 'pointer';
          this.addInputListener(this.dragListener);
        } else {
          this.cursor = null;
          this.removeInputListener(this.dragListener);
        }
        isDragListenerAttached = isInteractive;
      }
    };
    chargedParticle.isInteractiveProperty.link(isInteractiveListener);
    this.disposeChargedParticleNode = () => {
      chargedParticle.positionProperty.unlink(positionListener);
      chargedParticle.isInteractiveProperty.unlink(isInteractiveListener);
      this.dragListener.dispose();
    };
  }

  /**
   * Releases references
   * @public
   */
  dispose() {
    this.disposeChargedParticleNode();
    super.dispose();
  }
}
chargesAndFields.register('ChargedParticleNode', ChargedParticleNode);
export default ChargedParticleNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWZWN0b3IyIiwiRHJhZ0xpc3RlbmVyIiwiTm9kZSIsImNoYXJnZXNBbmRGaWVsZHMiLCJDaGFyZ2VzQW5kRmllbGRzQ29uc3RhbnRzIiwiQ2hhcmdlZFBhcnRpY2xlUmVwcmVzZW50YXRpb25Ob2RlIiwiQ0lSQ0xFX1JBRElVUyIsIkNIQVJHRV9SQURJVVMiLCJDaGFyZ2VkUGFydGljbGVOb2RlIiwiY29uc3RydWN0b3IiLCJjaGFyZ2VkUGFydGljbGUiLCJzbmFwVG9HcmlkTGluZXMiLCJtb2RlbFZpZXdUcmFuc2Zvcm0iLCJhdmFpbGFibGVNb2RlbEJvdW5kc1Byb3BlcnR5IiwiZW5jbG9zdXJlQm91bmRzIiwidGFuZGVtIiwiY2hhcmdlIiwicGhldGlvRHluYW1pY0VsZW1lbnQiLCJwaGV0aW9UeXBlIiwiTm9kZUlPIiwibW9kZWxFbGVtZW50IiwidG91Y2hBcmVhIiwibG9jYWxCb3VuZHMiLCJkaWxhdGVkIiwicG9zaXRpb25MaXN0ZW5lciIsInBvc2l0aW9uIiwidHJhbnNsYXRpb24iLCJtb2RlbFRvVmlld1Bvc2l0aW9uIiwicG9zaXRpb25Qcm9wZXJ0eSIsImxpbmsiLCJkcmFnTGlzdGVuZXIiLCJhcHBseU9mZnNldCIsImNyZWF0ZVRhbmRlbSIsImRyYWdCb3VuZHNQcm9wZXJ0eSIsInRyYW5zZm9ybSIsImNhblN0YXJ0UHJlc3MiLCJhbmltYXRpb25Ud2VlbiIsIm9mZnNldFBvc2l0aW9uIiwicG9pbnQiLCJsaXN0ZW5lciIsInBvaW50ZXIiLCJpc1RvdWNoTGlrZSIsIlpFUk8iLCJzdGFydCIsIm1vdmVUb0Zyb250IiwiZW5kIiwiY29udGFpbnNQb2ludCIsImdldCIsImlzQWN0aXZlUHJvcGVydHkiLCJzZXQiLCJpc1VzZXJDb250cm9sbGVkUHJvcGVydHkiLCJjb250cm9sbGVkIiwidmFsdWUiLCJpc0RyYWdMaXN0ZW5lckF0dGFjaGVkIiwiaXNJbnRlcmFjdGl2ZUxpc3RlbmVyIiwiaXNJbnRlcmFjdGl2ZSIsImlzSW50ZXJhY3RpdmVQcm9wZXJ0eSIsImN1cnNvciIsImFkZElucHV0TGlzdGVuZXIiLCJyZW1vdmVJbnB1dExpc3RlbmVyIiwiZGlzcG9zZUNoYXJnZWRQYXJ0aWNsZU5vZGUiLCJ1bmxpbmsiLCJkaXNwb3NlIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJDaGFyZ2VkUGFydGljbGVOb2RlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE0LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFZpZXcgZm9yIHRoZSBjaGFyZ2VkIHBhcnRpY2xlLCB3aGljaCBjYW4gYmUgZHJhZ2dlZCB0byB0cmFuc2xhdGUuXHJcbiAqXHJcbiAqIEBhdXRob3IgTWFydGluIFZlaWxsZXR0ZSAoQmVyZWEgQ29sbGVnZSlcclxuICovXHJcblxyXG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVmVjdG9yMi5qcyc7XHJcbmltcG9ydCB7IERyYWdMaXN0ZW5lciwgTm9kZSB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBjaGFyZ2VzQW5kRmllbGRzIGZyb20gJy4uLy4uL2NoYXJnZXNBbmRGaWVsZHMuanMnO1xyXG5pbXBvcnQgQ2hhcmdlc0FuZEZpZWxkc0NvbnN0YW50cyBmcm9tICcuLi9DaGFyZ2VzQW5kRmllbGRzQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IENoYXJnZWRQYXJ0aWNsZVJlcHJlc2VudGF0aW9uTm9kZSBmcm9tICcuL0NoYXJnZWRQYXJ0aWNsZVJlcHJlc2VudGF0aW9uTm9kZS5qcyc7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgQ0lSQ0xFX1JBRElVUyA9IENoYXJnZXNBbmRGaWVsZHNDb25zdGFudHMuQ0hBUkdFX1JBRElVUzsgLy8gcmFkaXVzIG9mIGEgY2hhcmdlZCBwYXJ0aWNsZVxyXG5cclxuY2xhc3MgQ2hhcmdlZFBhcnRpY2xlTm9kZSBleHRlbmRzIENoYXJnZWRQYXJ0aWNsZVJlcHJlc2VudGF0aW9uTm9kZSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbnN0cnVjdG9yIGZvciB0aGUgQ2hhcmdlZFBhcnRpY2xlTm9kZSB3aGljaCByZW5kZXJzIHRoZSBjaGFyZ2UgYXMgYSBzY2VuZXJ5IG5vZGUuXHJcbiAgICogQHBhcmFtIHtDaGFyZ2VkUGFydGljbGV9IGNoYXJnZWRQYXJ0aWNsZSAtIHRoZSBtb2RlbCBvZiB0aGUgY2hhcmdlZCBwYXJ0aWNsZVxyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IHNuYXBUb0dyaWRMaW5lcyAtIGZ1bmN0aW9uKCB7UHJvcGVydHkuPFZlY3RvcjI+fSlcclxuICAgKiBAcGFyYW0ge01vZGVsVmlld1RyYW5zZm9ybTJ9IG1vZGVsVmlld1RyYW5zZm9ybSAtIHRoZSBjb29yZGluYXRlIHRyYW5zZm9ybSBiZXR3ZWVuIG1vZGVsIGNvb3JkaW5hdGVzIGFuZCB2aWV3IGNvb3JkaW5hdGVzXHJcbiAgICogQHBhcmFtIHtQcm9wZXJ0eS48Qm91bmRzMj59IGF2YWlsYWJsZU1vZGVsQm91bmRzUHJvcGVydHkgLSBkcmFnQm91bmRzIGZvciB0aGUgY2hhcmdlZCBwYXJ0aWNsZVxyXG4gICAqIEBwYXJhbSB7Qm91bmRzMn0gZW5jbG9zdXJlQm91bmRzIC0gYm91bmRzIGluIHRoZSBtb2RlbCBjb29yZGluYXRlIGZyYW1lIG9mIHRoZSBjaGFyZ2UgYW5kIHNlbnNvciBlbmNsb3N1cmVcclxuICAgKiBAcGFyYW0ge1RhbmRlbX0gdGFuZGVtXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIGNoYXJnZWRQYXJ0aWNsZSxcclxuICAgICAgICAgICAgICAgc25hcFRvR3JpZExpbmVzLFxyXG4gICAgICAgICAgICAgICBtb2RlbFZpZXdUcmFuc2Zvcm0sXHJcbiAgICAgICAgICAgICAgIGF2YWlsYWJsZU1vZGVsQm91bmRzUHJvcGVydHksXHJcbiAgICAgICAgICAgICAgIGVuY2xvc3VyZUJvdW5kcyxcclxuICAgICAgICAgICAgICAgdGFuZGVtICkge1xyXG5cclxuICAgIHN1cGVyKCBjaGFyZ2VkUGFydGljbGUuY2hhcmdlLCB7XHJcbiAgICAgIHRhbmRlbTogdGFuZGVtLFxyXG4gICAgICBwaGV0aW9EeW5hbWljRWxlbWVudDogdHJ1ZSxcclxuICAgICAgcGhldGlvVHlwZTogTm9kZS5Ob2RlSU9cclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLm1vZGVsRWxlbWVudCA9IGNoYXJnZWRQYXJ0aWNsZTtcclxuXHJcbiAgICAvLyBTZXQgdXAgdGhlIG1vdXNlIGFyZWFzIGZvciB0aGlzIG5vZGUgc28gdGhhdCB0aGlzIGNhbiBzdGlsbCBiZSBncmFiYmVkIHdoZW4gaW52aXNpYmxlLlxyXG4gICAgdGhpcy50b3VjaEFyZWEgPSB0aGlzLmxvY2FsQm91bmRzLmRpbGF0ZWQoIDEwICk7XHJcblxyXG4gICAgLy8gUmVnaXN0ZXIgZm9yIHN5bmNocm9uaXphdGlvbiB3aXRoIG1vZGVsLlxyXG4gICAgY29uc3QgcG9zaXRpb25MaXN0ZW5lciA9IHBvc2l0aW9uID0+IHtcclxuICAgICAgdGhpcy50cmFuc2xhdGlvbiA9IG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1Bvc2l0aW9uKCBwb3NpdGlvbiApO1xyXG4gICAgfTtcclxuICAgIGNoYXJnZWRQYXJ0aWNsZS5wb3NpdGlvblByb3BlcnR5LmxpbmsoIHBvc2l0aW9uTGlzdGVuZXIgKTtcclxuXHJcbiAgICB0aGlzLmRyYWdMaXN0ZW5lciA9IG5ldyBEcmFnTGlzdGVuZXIoIHtcclxuICAgICAgYXBwbHlPZmZzZXQ6IGZhbHNlLFxyXG4gICAgICBwb3NpdGlvblByb3BlcnR5OiBjaGFyZ2VkUGFydGljbGUucG9zaXRpb25Qcm9wZXJ0eSxcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnZHJhZ0xpc3RlbmVyJyApLFxyXG4gICAgICBkcmFnQm91bmRzUHJvcGVydHk6IGF2YWlsYWJsZU1vZGVsQm91bmRzUHJvcGVydHksXHJcbiAgICAgIHRyYW5zZm9ybTogbW9kZWxWaWV3VHJhbnNmb3JtLFxyXG4gICAgICBjYW5TdGFydFByZXNzOiAoKSA9PiAhY2hhcmdlZFBhcnRpY2xlLmFuaW1hdGlvblR3ZWVuLFxyXG4gICAgICBvZmZzZXRQb3NpdGlvbjogKCBwb2ludCwgbGlzdGVuZXIgKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGxpc3RlbmVyLnBvaW50ZXIgJiYgbGlzdGVuZXIucG9pbnRlci5pc1RvdWNoTGlrZSgpID8gbmV3IFZlY3RvcjIoIDAsIC0yICogQ0lSQ0xFX1JBRElVUyApIDogVmVjdG9yMi5aRVJPO1xyXG4gICAgICB9LFxyXG4gICAgICBzdGFydDogKCkgPT4ge1xyXG4gICAgICAgIC8vIE1vdmUgdGhlIGNoYXJnZWRQYXJ0aWNsZSB0byB0aGUgZnJvbnQgb2YgdGhpcyBsYXllciB3aGVuIGdyYWJiZWQgYnkgdGhlIHVzZXIuXHJcbiAgICAgICAgdGhpcy5tb3ZlVG9Gcm9udCgpO1xyXG4gICAgICB9LFxyXG4gICAgICBlbmQ6ICgpID0+IHtcclxuICAgICAgICBzbmFwVG9HcmlkTGluZXMoIGNoYXJnZWRQYXJ0aWNsZS5wb3NpdGlvblByb3BlcnR5ICk7XHJcblxyXG4gICAgICAgIGlmICggIWVuY2xvc3VyZUJvdW5kcy5jb250YWluc1BvaW50KCBjaGFyZ2VkUGFydGljbGUucG9zaXRpb25Qcm9wZXJ0eS5nZXQoKSApICkge1xyXG4gICAgICAgICAgY2hhcmdlZFBhcnRpY2xlLmlzQWN0aXZlUHJvcGVydHkuc2V0KCB0cnVlICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmRyYWdMaXN0ZW5lci5pc1VzZXJDb250cm9sbGVkUHJvcGVydHkubGluayggY29udHJvbGxlZCA9PiB7XHJcbiAgICAgIGNoYXJnZWRQYXJ0aWNsZS5pc1VzZXJDb250cm9sbGVkUHJvcGVydHkudmFsdWUgPSBjb250cm9sbGVkO1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIENvbmRpdGlvbmFsbHkgaG9vayB1cCB0aGUgaW5wdXQgaGFuZGxpbmcgKGFuZCBjdXJzb3IpIHdoZW4gdGhlIGNoYXJnZWQgcGFydGljbGUgaXMgaW50ZXJhY3RpdmUuXHJcbiAgICBsZXQgaXNEcmFnTGlzdGVuZXJBdHRhY2hlZCA9IGZhbHNlO1xyXG5cclxuICAgIGNvbnN0IGlzSW50ZXJhY3RpdmVMaXN0ZW5lciA9ICgpID0+IHtcclxuXHJcbiAgICAgIGNvbnN0IGlzSW50ZXJhY3RpdmUgPSBjaGFyZ2VkUGFydGljbGUuaXNJbnRlcmFjdGl2ZVByb3BlcnR5LmdldCgpO1xyXG5cclxuICAgICAgaWYgKCBpc0RyYWdMaXN0ZW5lckF0dGFjaGVkICE9PSBpc0ludGVyYWN0aXZlICkge1xyXG4gICAgICAgIGlmICggaXNJbnRlcmFjdGl2ZSApIHtcclxuICAgICAgICAgIHRoaXMuY3Vyc29yID0gJ3BvaW50ZXInO1xyXG4gICAgICAgICAgdGhpcy5hZGRJbnB1dExpc3RlbmVyKCB0aGlzLmRyYWdMaXN0ZW5lciApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuY3Vyc29yID0gbnVsbDtcclxuICAgICAgICAgIHRoaXMucmVtb3ZlSW5wdXRMaXN0ZW5lciggdGhpcy5kcmFnTGlzdGVuZXIgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlzRHJhZ0xpc3RlbmVyQXR0YWNoZWQgPSBpc0ludGVyYWN0aXZlO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgY2hhcmdlZFBhcnRpY2xlLmlzSW50ZXJhY3RpdmVQcm9wZXJ0eS5saW5rKCBpc0ludGVyYWN0aXZlTGlzdGVuZXIgKTtcclxuXHJcbiAgICB0aGlzLmRpc3Bvc2VDaGFyZ2VkUGFydGljbGVOb2RlID0gKCkgPT4ge1xyXG4gICAgICBjaGFyZ2VkUGFydGljbGUucG9zaXRpb25Qcm9wZXJ0eS51bmxpbmsoIHBvc2l0aW9uTGlzdGVuZXIgKTtcclxuICAgICAgY2hhcmdlZFBhcnRpY2xlLmlzSW50ZXJhY3RpdmVQcm9wZXJ0eS51bmxpbmsoIGlzSW50ZXJhY3RpdmVMaXN0ZW5lciApO1xyXG4gICAgICB0aGlzLmRyYWdMaXN0ZW5lci5kaXNwb3NlKCk7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVsZWFzZXMgcmVmZXJlbmNlc1xyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBkaXNwb3NlKCkge1xyXG4gICAgdGhpcy5kaXNwb3NlQ2hhcmdlZFBhcnRpY2xlTm9kZSgpO1xyXG4gICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gIH1cclxufVxyXG5cclxuY2hhcmdlc0FuZEZpZWxkcy5yZWdpc3RlciggJ0NoYXJnZWRQYXJ0aWNsZU5vZGUnLCBDaGFyZ2VkUGFydGljbGVOb2RlICk7XHJcbmV4cG9ydCBkZWZhdWx0IENoYXJnZWRQYXJ0aWNsZU5vZGU7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLE9BQU8sTUFBTSwrQkFBK0I7QUFDbkQsU0FBU0MsWUFBWSxFQUFFQyxJQUFJLFFBQVEsbUNBQW1DO0FBQ3RFLE9BQU9DLGdCQUFnQixNQUFNLDJCQUEyQjtBQUN4RCxPQUFPQyx5QkFBeUIsTUFBTSxpQ0FBaUM7QUFDdkUsT0FBT0MsaUNBQWlDLE1BQU0sd0NBQXdDOztBQUV0RjtBQUNBLE1BQU1DLGFBQWEsR0FBR0YseUJBQXlCLENBQUNHLGFBQWEsQ0FBQyxDQUFDOztBQUUvRCxNQUFNQyxtQkFBbUIsU0FBU0gsaUNBQWlDLENBQUM7RUFFbEU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VJLFdBQVdBLENBQUVDLGVBQWUsRUFDZkMsZUFBZSxFQUNmQyxrQkFBa0IsRUFDbEJDLDRCQUE0QixFQUM1QkMsZUFBZSxFQUNmQyxNQUFNLEVBQUc7SUFFcEIsS0FBSyxDQUFFTCxlQUFlLENBQUNNLE1BQU0sRUFBRTtNQUM3QkQsTUFBTSxFQUFFQSxNQUFNO01BQ2RFLG9CQUFvQixFQUFFLElBQUk7TUFDMUJDLFVBQVUsRUFBRWhCLElBQUksQ0FB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