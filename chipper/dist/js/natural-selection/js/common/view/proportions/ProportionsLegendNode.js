// Copyright 2019-2022, University of Colorado Boulder

/**
 * ProportionsLegendNode displays the legend in the control panel for the Proportions graph.
 * It shows the color-coding and fill styles used for each allele.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import optionize, { optionize4 } from '../../../../../phet-core/js/optionize.js';
import { HBox, Rectangle, Text, VBox } from '../../../../../scenery/js/imports.js';
import naturalSelection from '../../../naturalSelection.js';
import NaturalSelectionConstants from '../../NaturalSelectionConstants.js';
import HatchingRectangle from '../HatchingRectangle.js';

// constants
const RECTANGLE_WIDTH = 25;
const RECTANGLE_HEIGHT = 15;
export default class ProportionsLegendNode extends VBox {
  constructor(genePool, providedOptions) {
    const options = optionize4()({}, NaturalSelectionConstants.VBOX_OPTIONS, {
      // VBoxOptions
      align: 'left',
      spacing: 25
    }, providedOptions);

    // A legend for each gene
    const legendNodes = _.map(genePool.genes, gene => new GeneLegendNode(gene, {
      tandem: options.tandem.createTandem(`${gene.tandemPrefix}LegendNode`),
      normalTandemName: `${gene.normalAllele.tandemPrefix}LegendNode`,
      mutantTandemName: `${gene.mutantAllele.tandemPrefix}LegendNode`
    }));
    options.children = legendNodes;
    super(options);
    this.legendNodes = legendNodes;
  }
  dispose() {
    assert && assert(false, 'dispose is not supported, exists for the lifetime of the sim');
    super.dispose();
  }

  /**
   * Sets visibility of the UI components related to a specific gene.
   */
  setGeneVisible(gene, visible) {
    const legendNode = _.find(this.legendNodes, legendNode => legendNode.gene === gene);
    assert && assert(legendNode, `legendNode not found for ${gene.nameProperty.value} gene`);
    legendNode.visible = visible;
  }
}

/**
 * GeneLegendNode is the legend for one gene. It shows the color and fill-style used for both the normal allele and
 * the mutation allele.
 */

class GeneLegendNode extends VBox {
  constructor(gene, providedOptions) {
    const options = optionize4()({}, NaturalSelectionConstants.VBOX_OPTIONS, {
      // VBoxOptions
      visiblePropertyOptions: {
        phetioReadOnly: true
      }
    }, providedOptions);
    options.children = [new AlleleLegendNode(gene.normalAllele.nameProperty, gene.color, {
      tandem: options.tandem.createTandem(options.normalTandemName)
    }), new AlleleLegendNode(gene.mutantAllele.nameProperty, gene.color, {
      isMutant: true,
      tandem: options.tandem.createTandem(options.mutantTandemName)
    })];
    super(options);
    this.gene = gene;
  }
  dispose() {
    assert && assert(false, 'GeneLegendNode does not support dispose');
    super.dispose();
  }
}

/**
 * AlleleLegendNode is the legend for one allele. It describes the color and fill style used for a specific allele.
 * Mutations are use a hatching fill style, while non-mutations use a solid fill style.
 */

class AlleleLegendNode extends HBox {
  constructor(alleleNameProperty, color, providedOptions) {
    const options = optionize()({
      // AlleleLegendNodeSelfOptions
      isMutant: false,
      // HBoxOptions
      spacing: 5,
      phetioVisiblePropertyInstrumented: false
    }, providedOptions);
    const rectangleOptions = {
      fill: color,
      stroke: color
    };
    const rectangleNode = options.isMutant ? new HatchingRectangle(0, 0, RECTANGLE_WIDTH, RECTANGLE_HEIGHT, rectangleOptions) : new Rectangle(0, 0, RECTANGLE_WIDTH, RECTANGLE_HEIGHT, rectangleOptions);
    const text = new Text(alleleNameProperty, {
      font: NaturalSelectionConstants.PROPORTIONS_LEGEND_FONT,
      maxWidth: 92,
      // determined empirically
      tandem: options.tandem.createTandem('text')
    });
    options.children = [rectangleNode, text];
    super(options);
  }
  dispose() {
    assert && assert(false, 'AlleleLegendNode does not support dispose');
    super.dispose();
  }
}
naturalSelection.register('ProportionsLegendNode', ProportionsLegendNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcHRpb25pemUiLCJvcHRpb25pemU0IiwiSEJveCIsIlJlY3RhbmdsZSIsIlRleHQiLCJWQm94IiwibmF0dXJhbFNlbGVjdGlvbiIsIk5hdHVyYWxTZWxlY3Rpb25Db25zdGFudHMiLCJIYXRjaGluZ1JlY3RhbmdsZSIsIlJFQ1RBTkdMRV9XSURUSCIsIlJFQ1RBTkdMRV9IRUlHSFQiLCJQcm9wb3J0aW9uc0xlZ2VuZE5vZGUiLCJjb25zdHJ1Y3RvciIsImdlbmVQb29sIiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsIlZCT1hfT1BUSU9OUyIsImFsaWduIiwic3BhY2luZyIsImxlZ2VuZE5vZGVzIiwiXyIsIm1hcCIsImdlbmVzIiwiZ2VuZSIsIkdlbmVMZWdlbmROb2RlIiwidGFuZGVtIiwiY3JlYXRlVGFuZGVtIiwidGFuZGVtUHJlZml4Iiwibm9ybWFsVGFuZGVtTmFtZSIsIm5vcm1hbEFsbGVsZSIsIm11dGFudFRhbmRlbU5hbWUiLCJtdXRhbnRBbGxlbGUiLCJjaGlsZHJlbiIsImRpc3Bvc2UiLCJhc3NlcnQiLCJzZXRHZW5lVmlzaWJsZSIsInZpc2libGUiLCJsZWdlbmROb2RlIiwiZmluZCIsIm5hbWVQcm9wZXJ0eSIsInZhbHVlIiwidmlzaWJsZVByb3BlcnR5T3B0aW9ucyIsInBoZXRpb1JlYWRPbmx5IiwiQWxsZWxlTGVnZW5kTm9kZSIsImNvbG9yIiwiaXNNdXRhbnQiLCJhbGxlbGVOYW1lUHJvcGVydHkiLCJwaGV0aW9WaXNpYmxlUHJvcGVydHlJbnN0cnVtZW50ZWQiLCJyZWN0YW5nbGVPcHRpb25zIiwiZmlsbCIsInN0cm9rZSIsInJlY3RhbmdsZU5vZGUiLCJ0ZXh0IiwiZm9udCIsIlBST1BPUlRJT05TX0xFR0VORF9GT05UIiwibWF4V2lkdGgiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlByb3BvcnRpb25zTGVnZW5kTm9kZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBQcm9wb3J0aW9uc0xlZ2VuZE5vZGUgZGlzcGxheXMgdGhlIGxlZ2VuZCBpbiB0aGUgY29udHJvbCBwYW5lbCBmb3IgdGhlIFByb3BvcnRpb25zIGdyYXBoLlxyXG4gKiBJdCBzaG93cyB0aGUgY29sb3ItY29kaW5nIGFuZCBmaWxsIHN0eWxlcyB1c2VkIGZvciBlYWNoIGFsbGVsZS5cclxuICpcclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICovXHJcblxyXG5pbXBvcnQgVFJlYWRPbmx5UHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vLi4vYXhvbi9qcy9UUmVhZE9ubHlQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBvcHRpb25pemUsIHsgRW1wdHlTZWxmT3B0aW9ucywgb3B0aW9uaXplNCB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgUGlja1JlcXVpcmVkIGZyb20gJy4uLy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9QaWNrUmVxdWlyZWQuanMnO1xyXG5pbXBvcnQgeyBIQm94LCBIQm94T3B0aW9ucywgUmVjdGFuZ2xlLCBUQ29sb3IsIFRleHQsIFZCb3gsIFZCb3hPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IG5hdHVyYWxTZWxlY3Rpb24gZnJvbSAnLi4vLi4vLi4vbmF0dXJhbFNlbGVjdGlvbi5qcyc7XHJcbmltcG9ydCBHZW5lIGZyb20gJy4uLy4uL21vZGVsL0dlbmUuanMnO1xyXG5pbXBvcnQgR2VuZVBvb2wgZnJvbSAnLi4vLi4vbW9kZWwvR2VuZVBvb2wuanMnO1xyXG5pbXBvcnQgTmF0dXJhbFNlbGVjdGlvbkNvbnN0YW50cyBmcm9tICcuLi8uLi9OYXR1cmFsU2VsZWN0aW9uQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IEhhdGNoaW5nUmVjdGFuZ2xlIGZyb20gJy4uL0hhdGNoaW5nUmVjdGFuZ2xlLmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBSRUNUQU5HTEVfV0lEVEggPSAyNTtcclxuY29uc3QgUkVDVEFOR0xFX0hFSUdIVCA9IDE1O1xyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IEVtcHR5U2VsZk9wdGlvbnM7XHJcblxyXG50eXBlIFByb3BvcnRpb25zTGVnZW5kTm9kZU9wdGlvbnMgPSBTZWxmT3B0aW9ucyAmIFBpY2tSZXF1aXJlZDxWQm94T3B0aW9ucywgJ3RhbmRlbSc+O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvcG9ydGlvbnNMZWdlbmROb2RlIGV4dGVuZHMgVkJveCB7XHJcblxyXG4gIHByaXZhdGUgcmVhZG9ubHkgbGVnZW5kTm9kZXM6IEdlbmVMZWdlbmROb2RlW107XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggZ2VuZVBvb2w6IEdlbmVQb29sLCBwcm92aWRlZE9wdGlvbnM6IFByb3BvcnRpb25zTGVnZW5kTm9kZU9wdGlvbnMgKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTQ8UHJvcG9ydGlvbnNMZWdlbmROb2RlT3B0aW9ucywgU2VsZk9wdGlvbnMsIFZCb3hPcHRpb25zPigpKFxyXG4gICAgICB7fSwgTmF0dXJhbFNlbGVjdGlvbkNvbnN0YW50cy5WQk9YX09QVElPTlMsIHtcclxuXHJcbiAgICAgICAgLy8gVkJveE9wdGlvbnNcclxuICAgICAgICBhbGlnbjogJ2xlZnQnLFxyXG4gICAgICAgIHNwYWNpbmc6IDI1XHJcbiAgICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIC8vIEEgbGVnZW5kIGZvciBlYWNoIGdlbmVcclxuICAgIGNvbnN0IGxlZ2VuZE5vZGVzID0gXy5tYXAoIGdlbmVQb29sLmdlbmVzLCBnZW5lID0+XHJcbiAgICAgIG5ldyBHZW5lTGVnZW5kTm9kZSggZ2VuZSwge1xyXG4gICAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCBgJHtnZW5lLnRhbmRlbVByZWZpeH1MZWdlbmROb2RlYCApLFxyXG4gICAgICAgIG5vcm1hbFRhbmRlbU5hbWU6IGAke2dlbmUubm9ybWFsQWxsZWxlLnRhbmRlbVByZWZpeH1MZWdlbmROb2RlYCxcclxuICAgICAgICBtdXRhbnRUYW5kZW1OYW1lOiBgJHtnZW5lLm11dGFudEFsbGVsZS50YW5kZW1QcmVmaXh9TGVnZW5kTm9kZWBcclxuICAgICAgfSApICk7XHJcblxyXG4gICAgb3B0aW9ucy5jaGlsZHJlbiA9IGxlZ2VuZE5vZGVzO1xyXG5cclxuICAgIHN1cGVyKCBvcHRpb25zICk7XHJcblxyXG4gICAgdGhpcy5sZWdlbmROb2RlcyA9IGxlZ2VuZE5vZGVzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG92ZXJyaWRlIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBmYWxzZSwgJ2Rpc3Bvc2UgaXMgbm90IHN1cHBvcnRlZCwgZXhpc3RzIGZvciB0aGUgbGlmZXRpbWUgb2YgdGhlIHNpbScgKTtcclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgdmlzaWJpbGl0eSBvZiB0aGUgVUkgY29tcG9uZW50cyByZWxhdGVkIHRvIGEgc3BlY2lmaWMgZ2VuZS5cclxuICAgKi9cclxuICBwdWJsaWMgc2V0R2VuZVZpc2libGUoIGdlbmU6IEdlbmUsIHZpc2libGU6IGJvb2xlYW4gKTogdm9pZCB7XHJcbiAgICBjb25zdCBsZWdlbmROb2RlID0gXy5maW5kKCB0aGlzLmxlZ2VuZE5vZGVzLCBsZWdlbmROb2RlID0+ICggbGVnZW5kTm9kZS5nZW5lID09PSBnZW5lICkgKSE7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBsZWdlbmROb2RlLCBgbGVnZW5kTm9kZSBub3QgZm91bmQgZm9yICR7Z2VuZS5uYW1lUHJvcGVydHkudmFsdWV9IGdlbmVgICk7XHJcbiAgICBsZWdlbmROb2RlLnZpc2libGUgPSB2aXNpYmxlO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEdlbmVMZWdlbmROb2RlIGlzIHRoZSBsZWdlbmQgZm9yIG9uZSBnZW5lLiBJdCBzaG93cyB0aGUgY29sb3IgYW5kIGZpbGwtc3R5bGUgdXNlZCBmb3IgYm90aCB0aGUgbm9ybWFsIGFsbGVsZSBhbmRcclxuICogdGhlIG11dGF0aW9uIGFsbGVsZS5cclxuICovXHJcblxyXG50eXBlIEdlbmVMZWdlbmROb2RlU2VsZk9wdGlvbnMgPSB7XHJcbiAgbm9ybWFsVGFuZGVtTmFtZTogc3RyaW5nOyAvLyB0YW5kZW0gbmFtZSBmb3IgdGhlIG5vcm1hbCBhbGxlbGVcclxuICBtdXRhbnRUYW5kZW1OYW1lOiBzdHJpbmc7IC8vIHRhbmRlbSBuYW1lIGZvciB0aGUgbXV0YW50IGFsbGVsZVxyXG59O1xyXG5cclxudHlwZSBHZW5lTGVnZW5kTm9kZU9wdGlvbnMgPSBHZW5lTGVnZW5kTm9kZVNlbGZPcHRpb25zICYgUGlja1JlcXVpcmVkPFZCb3hPcHRpb25zLCAndGFuZGVtJz47XHJcblxyXG5jbGFzcyBHZW5lTGVnZW5kTm9kZSBleHRlbmRzIFZCb3gge1xyXG5cclxuICBwdWJsaWMgcmVhZG9ubHkgZ2VuZTogR2VuZTtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBnZW5lOiBHZW5lLCBwcm92aWRlZE9wdGlvbnM6IEdlbmVMZWdlbmROb2RlT3B0aW9ucyApIHtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplNDxHZW5lTGVnZW5kTm9kZU9wdGlvbnMsIEdlbmVMZWdlbmROb2RlU2VsZk9wdGlvbnMsIFZCb3hPcHRpb25zPigpKFxyXG4gICAgICB7fSwgTmF0dXJhbFNlbGVjdGlvbkNvbnN0YW50cy5WQk9YX09QVElPTlMsIHtcclxuXHJcbiAgICAgICAgLy8gVkJveE9wdGlvbnNcclxuICAgICAgICB2aXNpYmxlUHJvcGVydHlPcHRpb25zOiB7IHBoZXRpb1JlYWRPbmx5OiB0cnVlIH1cclxuICAgICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgb3B0aW9ucy5jaGlsZHJlbiA9IFtcclxuICAgICAgbmV3IEFsbGVsZUxlZ2VuZE5vZGUoIGdlbmUubm9ybWFsQWxsZWxlLm5hbWVQcm9wZXJ0eSwgZ2VuZS5jb2xvciwge1xyXG4gICAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCBvcHRpb25zLm5vcm1hbFRhbmRlbU5hbWUgKVxyXG4gICAgICB9ICksXHJcbiAgICAgIG5ldyBBbGxlbGVMZWdlbmROb2RlKCBnZW5lLm11dGFudEFsbGVsZS5uYW1lUHJvcGVydHksIGdlbmUuY29sb3IsIHtcclxuICAgICAgICBpc011dGFudDogdHJ1ZSxcclxuICAgICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggb3B0aW9ucy5tdXRhbnRUYW5kZW1OYW1lIClcclxuICAgICAgfSApXHJcbiAgICBdO1xyXG5cclxuICAgIHN1cGVyKCBvcHRpb25zICk7XHJcblxyXG4gICAgdGhpcy5nZW5lID0gZ2VuZTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvdmVycmlkZSBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggZmFsc2UsICdHZW5lTGVnZW5kTm9kZSBkb2VzIG5vdCBzdXBwb3J0IGRpc3Bvc2UnICk7XHJcbiAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQWxsZWxlTGVnZW5kTm9kZSBpcyB0aGUgbGVnZW5kIGZvciBvbmUgYWxsZWxlLiBJdCBkZXNjcmliZXMgdGhlIGNvbG9yIGFuZCBmaWxsIHN0eWxlIHVzZWQgZm9yIGEgc3BlY2lmaWMgYWxsZWxlLlxyXG4gKiBNdXRhdGlvbnMgYXJlIHVzZSBhIGhhdGNoaW5nIGZpbGwgc3R5bGUsIHdoaWxlIG5vbi1tdXRhdGlvbnMgdXNlIGEgc29saWQgZmlsbCBzdHlsZS5cclxuICovXHJcblxyXG50eXBlIEFsbGVsZUxlZ2VuZE5vZGVTZWxmT3B0aW9ucyA9IHtcclxuICBpc011dGFudD86IGJvb2xlYW47IC8vIHdoZXRoZXIgdGhlIGFsbGVsZSBpcyBtdXRhbnQsIGFmZmVjdHMgdGhlIGZpbGwgc3R5bGUgdXNlZFxyXG59O1xyXG5cclxudHlwZSBBbGxlbGVMZWdlbmROb2RlT3B0aW9ucyA9IEFsbGVsZUxlZ2VuZE5vZGVTZWxmT3B0aW9ucyAmIFBpY2tSZXF1aXJlZDxIQm94T3B0aW9ucywgJ3RhbmRlbSc+O1xyXG5cclxuY2xhc3MgQWxsZWxlTGVnZW5kTm9kZSBleHRlbmRzIEhCb3gge1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIGFsbGVsZU5hbWVQcm9wZXJ0eTogVFJlYWRPbmx5UHJvcGVydHk8c3RyaW5nPiwgY29sb3I6IFRDb2xvciwgcHJvdmlkZWRPcHRpb25zOiBBbGxlbGVMZWdlbmROb2RlT3B0aW9ucyApIHtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPEFsbGVsZUxlZ2VuZE5vZGVPcHRpb25zLCBBbGxlbGVMZWdlbmROb2RlU2VsZk9wdGlvbnMsIEhCb3hPcHRpb25zPigpKCB7XHJcblxyXG4gICAgICAvLyBBbGxlbGVMZWdlbmROb2RlU2VsZk9wdGlvbnNcclxuICAgICAgaXNNdXRhbnQ6IGZhbHNlLFxyXG5cclxuICAgICAgLy8gSEJveE9wdGlvbnNcclxuICAgICAgc3BhY2luZzogNSxcclxuICAgICAgcGhldGlvVmlzaWJsZVByb3BlcnR5SW5zdHJ1bWVudGVkOiBmYWxzZVxyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgY29uc3QgcmVjdGFuZ2xlT3B0aW9ucyA9IHtcclxuICAgICAgZmlsbDogY29sb3IsXHJcbiAgICAgIHN0cm9rZTogY29sb3JcclxuICAgIH07XHJcbiAgICBjb25zdCByZWN0YW5nbGVOb2RlID0gb3B0aW9ucy5pc011dGFudCA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEhhdGNoaW5nUmVjdGFuZ2xlKCAwLCAwLCBSRUNUQU5HTEVfV0lEVEgsIFJFQ1RBTkdMRV9IRUlHSFQsIHJlY3RhbmdsZU9wdGlvbnMgKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFJlY3RhbmdsZSggMCwgMCwgUkVDVEFOR0xFX1dJRFRILCBSRUNUQU5HTEVfSEVJR0hULCByZWN0YW5nbGVPcHRpb25zICk7XHJcblxyXG4gICAgY29uc3QgdGV4dCA9IG5ldyBUZXh0KCBhbGxlbGVOYW1lUHJvcGVydHksIHtcclxuICAgICAgZm9udDogTmF0dXJhbFNlbGVjdGlvbkNvbnN0YW50cy5QUk9QT1JUSU9OU19MRUdFTkRfRk9OVCxcclxuICAgICAgbWF4V2lkdGg6IDkyLCAvLyBkZXRlcm1pbmVkIGVtcGlyaWNhbGx5XHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAndGV4dCcgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIG9wdGlvbnMuY2hpbGRyZW4gPSBbIHJlY3RhbmdsZU5vZGUsIHRleHQgXTtcclxuXHJcbiAgICBzdXBlciggb3B0aW9ucyApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG92ZXJyaWRlIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBmYWxzZSwgJ0FsbGVsZUxlZ2VuZE5vZGUgZG9lcyBub3Qgc3VwcG9ydCBkaXNwb3NlJyApO1xyXG4gICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gIH1cclxufVxyXG5cclxubmF0dXJhbFNlbGVjdGlvbi5yZWdpc3RlciggJ1Byb3BvcnRpb25zTGVnZW5kTm9kZScsIFByb3BvcnRpb25zTGVnZW5kTm9kZSApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBLE9BQU9BLFNBQVMsSUFBc0JDLFVBQVUsUUFBUSwwQ0FBMEM7QUFFbEcsU0FBU0MsSUFBSSxFQUFlQyxTQUFTLEVBQVVDLElBQUksRUFBRUMsSUFBSSxRQUFxQixzQ0FBc0M7QUFDcEgsT0FBT0Ms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