// Copyright 2019-2022, University of Colorado Boulder

/**
 * ProportionsNode is the parent for all parts of the Proportions view.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import optionize from '../../../../../phet-core/js/optionize.js';
import { HBox } from '../../../../../scenery/js/imports.js';
import naturalSelection from '../../../naturalSelection.js';
import NaturalSelectionConstants from '../../NaturalSelectionConstants.js';
import ProportionsGraphNode from './ProportionsGraphNode.js';
import ProportionsPanel from './ProportionsPanel.js';
export default class ProportionsNode extends HBox {
  constructor(proportionsModel, genePool, size, providedOptions) {
    const options = optionize()({
      // HBoxOptions
      spacing: NaturalSelectionConstants.SCREEN_VIEW_X_SPACING,
      align: 'center',
      excludeInvisibleChildrenFromBounds: false,
      phetioDocumentation: 'the Proportions graph and its control panel',
      visiblePropertyOptions: {
        phetioReadOnly: true
      }
    }, providedOptions);

    // Divy up the width
    const panelWidth = 0.2 * size.width;
    const graphWidth = size.width - panelWidth - options.spacing;
    const proportionsPanel = new ProportionsPanel(genePool, proportionsModel.valuesVisibleProperty, {
      fixedWidth: panelWidth,
      maxHeight: size.height,
      tandem: options.tandem.createTandem('proportionsPanel')
    });
    const proportionsGraphNode = new ProportionsGraphNode(proportionsModel, genePool, {
      graphWidth: graphWidth,
      graphHeight: size.height,
      tandem: options.tandem.createTandem('proportionsGraphNode')
    });
    options.children = [proportionsPanel, proportionsGraphNode];
    super(options);

    // Create a Studio link to the model
    this.addLinkedElement(proportionsModel, {
      tandem: options.tandem.createTandem('proportionsModel')
    });
    this.proportionsPanel = proportionsPanel;
    this.proportionsGraphNode = proportionsGraphNode;
  }
  dispose() {
    assert && assert(false, 'dispose is not supported, exists for the lifetime of the sim');
    super.dispose();
  }

  /**
   * Sets visibility of the UI components related to a specific gene.
   */
  setGeneVisible(gene, visible) {
    this.proportionsPanel.setGeneVisible(gene, visible);
    this.proportionsGraphNode.setGeneVisible(gene, visible);
  }
}
naturalSelection.register('ProportionsNode', ProportionsNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcHRpb25pemUiLCJIQm94IiwibmF0dXJhbFNlbGVjdGlvbiIsIk5hdHVyYWxTZWxlY3Rpb25Db25zdGFudHMiLCJQcm9wb3J0aW9uc0dyYXBoTm9kZSIsIlByb3BvcnRpb25zUGFuZWwiLCJQcm9wb3J0aW9uc05vZGUiLCJjb25zdHJ1Y3RvciIsInByb3BvcnRpb25zTW9kZWwiLCJnZW5lUG9vbCIsInNpemUiLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwic3BhY2luZyIsIlNDUkVFTl9WSUVXX1hfU1BBQ0lORyIsImFsaWduIiwiZXhjbHVkZUludmlzaWJsZUNoaWxkcmVuRnJvbUJvdW5kcyIsInBoZXRpb0RvY3VtZW50YXRpb24iLCJ2aXNpYmxlUHJvcGVydHlPcHRpb25zIiwicGhldGlvUmVhZE9ubHkiLCJwYW5lbFdpZHRoIiwid2lkdGgiLCJncmFwaFdpZHRoIiwicHJvcG9ydGlvbnNQYW5lbCIsInZhbHVlc1Zpc2libGVQcm9wZXJ0eSIsImZpeGVkV2lkdGgiLCJtYXhIZWlnaHQiLCJoZWlnaHQiLCJ0YW5kZW0iLCJjcmVhdGVUYW5kZW0iLCJwcm9wb3J0aW9uc0dyYXBoTm9kZSIsImdyYXBoSGVpZ2h0IiwiY2hpbGRyZW4iLCJhZGRMaW5rZWRFbGVtZW50IiwiZGlzcG9zZSIsImFzc2VydCIsInNldEdlbmVWaXNpYmxlIiwiZ2VuZSIsInZpc2libGUiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlByb3BvcnRpb25zTm9kZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBQcm9wb3J0aW9uc05vZGUgaXMgdGhlIHBhcmVudCBmb3IgYWxsIHBhcnRzIG9mIHRoZSBQcm9wb3J0aW9ucyB2aWV3LlxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCBEaW1lbnNpb24yIGZyb20gJy4uLy4uLy4uLy4uLy4uL2RvdC9qcy9EaW1lbnNpb24yLmpzJztcclxuaW1wb3J0IG9wdGlvbml6ZSwgeyBFbXB0eVNlbGZPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCBQaWNrUmVxdWlyZWQgZnJvbSAnLi4vLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL1BpY2tSZXF1aXJlZC5qcyc7XHJcbmltcG9ydCB7IEhCb3gsIEhCb3hPcHRpb25zLCBOb2RlVHJhbnNsYXRpb25PcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IG5hdHVyYWxTZWxlY3Rpb24gZnJvbSAnLi4vLi4vLi4vbmF0dXJhbFNlbGVjdGlvbi5qcyc7XHJcbmltcG9ydCBHZW5lIGZyb20gJy4uLy4uL21vZGVsL0dlbmUuanMnO1xyXG5pbXBvcnQgR2VuZVBvb2wgZnJvbSAnLi4vLi4vbW9kZWwvR2VuZVBvb2wuanMnO1xyXG5pbXBvcnQgUHJvcG9ydGlvbnNNb2RlbCBmcm9tICcuLi8uLi9tb2RlbC9Qcm9wb3J0aW9uc01vZGVsLmpzJztcclxuaW1wb3J0IE5hdHVyYWxTZWxlY3Rpb25Db25zdGFudHMgZnJvbSAnLi4vLi4vTmF0dXJhbFNlbGVjdGlvbkNvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBQcm9wb3J0aW9uc0dyYXBoTm9kZSBmcm9tICcuL1Byb3BvcnRpb25zR3JhcGhOb2RlLmpzJztcclxuaW1wb3J0IFByb3BvcnRpb25zUGFuZWwgZnJvbSAnLi9Qcm9wb3J0aW9uc1BhbmVsLmpzJztcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSBFbXB0eVNlbGZPcHRpb25zO1xyXG5cclxudHlwZSBQcm9wb3J0aW9uc05vZGVPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBOb2RlVHJhbnNsYXRpb25PcHRpb25zICYgUGlja1JlcXVpcmVkPEhCb3hPcHRpb25zLCAndGFuZGVtJz47XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9wb3J0aW9uc05vZGUgZXh0ZW5kcyBIQm94IHtcclxuXHJcbiAgcHJpdmF0ZSByZWFkb25seSBwcm9wb3J0aW9uc1BhbmVsOiBQcm9wb3J0aW9uc1BhbmVsO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgcHJvcG9ydGlvbnNHcmFwaE5vZGU6IFByb3BvcnRpb25zR3JhcGhOb2RlO1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIHByb3BvcnRpb25zTW9kZWw6IFByb3BvcnRpb25zTW9kZWwsIGdlbmVQb29sOiBHZW5lUG9vbCwgc2l6ZTogRGltZW5zaW9uMiwgcHJvdmlkZWRPcHRpb25zOiBQcm9wb3J0aW9uc05vZGVPcHRpb25zICkge1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8UHJvcG9ydGlvbnNOb2RlT3B0aW9ucywgU2VsZk9wdGlvbnMsIEhCb3hPcHRpb25zPigpKCB7XHJcblxyXG4gICAgICAvLyBIQm94T3B0aW9uc1xyXG4gICAgICBzcGFjaW5nOiBOYXR1cmFsU2VsZWN0aW9uQ29uc3RhbnRzLlNDUkVFTl9WSUVXX1hfU1BBQ0lORyxcclxuICAgICAgYWxpZ246ICdjZW50ZXInLFxyXG4gICAgICBleGNsdWRlSW52aXNpYmxlQ2hpbGRyZW5Gcm9tQm91bmRzOiBmYWxzZSxcclxuICAgICAgcGhldGlvRG9jdW1lbnRhdGlvbjogJ3RoZSBQcm9wb3J0aW9ucyBncmFwaCBhbmQgaXRzIGNvbnRyb2wgcGFuZWwnLFxyXG4gICAgICB2aXNpYmxlUHJvcGVydHlPcHRpb25zOiB7IHBoZXRpb1JlYWRPbmx5OiB0cnVlIH1cclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIC8vIERpdnkgdXAgdGhlIHdpZHRoXHJcbiAgICBjb25zdCBwYW5lbFdpZHRoID0gMC4yICogc2l6ZS53aWR0aDtcclxuICAgIGNvbnN0IGdyYXBoV2lkdGggPSBzaXplLndpZHRoIC0gcGFuZWxXaWR0aCAtIG9wdGlvbnMuc3BhY2luZztcclxuXHJcbiAgICBjb25zdCBwcm9wb3J0aW9uc1BhbmVsID0gbmV3IFByb3BvcnRpb25zUGFuZWwoIGdlbmVQb29sLCBwcm9wb3J0aW9uc01vZGVsLnZhbHVlc1Zpc2libGVQcm9wZXJ0eSwge1xyXG4gICAgICBmaXhlZFdpZHRoOiBwYW5lbFdpZHRoLFxyXG4gICAgICBtYXhIZWlnaHQ6IHNpemUuaGVpZ2h0LFxyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3Byb3BvcnRpb25zUGFuZWwnIClcclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCBwcm9wb3J0aW9uc0dyYXBoTm9kZSA9IG5ldyBQcm9wb3J0aW9uc0dyYXBoTm9kZSggcHJvcG9ydGlvbnNNb2RlbCwgZ2VuZVBvb2wsIHtcclxuICAgICAgZ3JhcGhXaWR0aDogZ3JhcGhXaWR0aCxcclxuICAgICAgZ3JhcGhIZWlnaHQ6IHNpemUuaGVpZ2h0LFxyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3Byb3BvcnRpb25zR3JhcGhOb2RlJyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgb3B0aW9ucy5jaGlsZHJlbiA9IFsgcHJvcG9ydGlvbnNQYW5lbCwgcHJvcG9ydGlvbnNHcmFwaE5vZGUgXTtcclxuXHJcbiAgICBzdXBlciggb3B0aW9ucyApO1xyXG5cclxuICAgIC8vIENyZWF0ZSBhIFN0dWRpbyBsaW5rIHRvIHRoZSBtb2RlbFxyXG4gICAgdGhpcy5hZGRMaW5rZWRFbGVtZW50KCBwcm9wb3J0aW9uc01vZGVsLCB7XHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAncHJvcG9ydGlvbnNNb2RlbCcgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIHRoaXMucHJvcG9ydGlvbnNQYW5lbCA9IHByb3BvcnRpb25zUGFuZWw7XHJcbiAgICB0aGlzLnByb3BvcnRpb25zR3JhcGhOb2RlID0gcHJvcG9ydGlvbnNHcmFwaE5vZGU7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb3ZlcnJpZGUgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIGZhbHNlLCAnZGlzcG9zZSBpcyBub3Qgc3VwcG9ydGVkLCBleGlzdHMgZm9yIHRoZSBsaWZldGltZSBvZiB0aGUgc2ltJyApO1xyXG4gICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0cyB2aXNpYmlsaXR5IG9mIHRoZSBVSSBjb21wb25lbnRzIHJlbGF0ZWQgdG8gYSBzcGVjaWZpYyBnZW5lLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXRHZW5lVmlzaWJsZSggZ2VuZTogR2VuZSwgdmlzaWJsZTogYm9vbGVhbiApOiB2b2lkIHtcclxuICAgIHRoaXMucHJvcG9ydGlvbnNQYW5lbC5zZXRHZW5lVmlzaWJsZSggZ2VuZSwgdmlzaWJsZSApO1xyXG4gICAgdGhpcy5wcm9wb3J0aW9uc0dyYXBoTm9kZS5zZXRHZW5lVmlzaWJsZSggZ2VuZSwgdmlzaWJsZSApO1xyXG4gIH1cclxufVxyXG5cclxubmF0dXJhbFNlbGVjdGlvbi5yZWdpc3RlciggJ1Byb3BvcnRpb25zTm9kZScsIFByb3BvcnRpb25zTm9kZSApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQSxPQUFPQSxTQUFTLE1BQTRCLDBDQUEwQztBQUV0RixTQUFTQyxJQUFJLFFBQTZDLHNDQUFzQztBQUNoRyxPQUFPQyxnQkFBZ0IsTUFBTSw4QkFBOEI7QUFJM0QsT0FBT0MseUJBQXlCLE1BQU0sb0NBQW9DO0FBQzFFLE9BQU9DLG9CQUFvQixNQUFNLDJCQUEyQjtBQUM1RCxPQUFPQyxnQkFBZ0IsTUFBTSx1QkFBdUI7QUFNcEQsZUFBZSxNQUFNQyxlQUFlLFNBQVNMLElBQUksQ0FBQztFQUt6Q00sV0FBV0EsQ0FBRUMsZ0JBQWtDLEVBQUVDLFFBQWtCLEVBQUVDLElBQWdCLEVBQUVDLGVBQXVDLEVBQUc7SUFFdEksTUFBTUMsT0FBTyxHQUFHWixTQUFTLENBQW1ELENBQUMsQ0FBRTtNQUU3RTtNQUNBYSxPQUFPLEVBQUVWLHlCQUF5QixDQUFDVyxxQkFBcUI7TUFDeERDLEtBQUssRUFBRSxRQUFRO01BQ2ZDLGtDQUFrQyxFQUFFLEtBQUs7TUFDekNDLG1CQUFtQixFQUFFLDZDQUE2QztNQUNsRUMsc0JBQXNCLEVBQUU7UUFBRUMsY0FBYyxFQUFFO01BQUs7SUFDakQsQ0FBQyxFQUFFUixlQUFnQixDQUFDOztJQUVwQjtJQUNBLE1BQU1TLFVBQVUsR0FBRyxHQUFHLEdBQUdWLElBQUksQ0FBQ1csS0FBSztJQUNuQyxNQUFNQyxVQUFVLEdBQUdaLElBQUksQ0FBQ1csS0FBSyxHQUFHRCxVQUFVLEdBQUdSLE9BQU8sQ0FBQ0MsT0FBTztJQUU1RCxNQUFNVSxnQkFBZ0IsR0FBRyxJQUFJbEIsZ0JBQWdCLENBQUVJLFFBQVEsRUFBRUQsZ0JBQWdCLENBQUNnQixxQkFBcUIsRUFBRTtNQUMvRkMsVUFBVSxFQUFFTCxVQUFVO01BQ3RCTSxTQUFTLEVBQUVoQixJQUFJLENBQUNpQixNQUFNO01BQ3RCQyxNQUFNLEVBQUVoQixPQUFPLENBQUNnQixNQUFNLENBQUNDLFlBQVksQ0FBRSxrQkFBbUI7SUFDMUQsQ0FBRSxDQUFDO0lBRUgsTUFBTUMsb0JBQW9CLEdBQUcsSUFBSTFCLG9CQUFvQixDQUFFSSxnQkFBZ0IsRUFBRUMsUUFBUSxFQUFFO01BQ2pGYSxVQUFVLEVBQUVBLFVBQVU7TUFDdEJTLFdBQVcsRUFBRXJCLElBQUksQ0FBQ2lCLE1BQU07TUFDeEJDLE1BQU0sRUFBRWhCLE9BQU8sQ0FBQ2dCLE1BQU0sQ0FBQ0MsWUFBWSxDQUFFLHNCQUF1QjtJQUM5RCxDQUFFLENBQUM7SUFFSGpCLE9BQU8sQ0FBQ29CLFFBQVEsR0FBRyxDQUFFVCxnQkFBZ0IsRUFBRU8sb0JBQW9CLENBQUU7SUFFN0QsS0FBSyxDQUFFbEIsT0FBUSxDQUFDOztJQUVoQjtJQUNBLElBQUksQ0FBQ3FCLGdCQUFnQixDQUFFekIsZ0JBQWdCLEVBQUU7TUFDdkNvQixNQUFNLEVBQUVoQixPQUFPLENBQUNnQixNQUFNLENBQUNDLFlBQVksQ0FBRSxrQkFBbUI7SUFDMUQsQ0FBRSxDQUFDO0lBRUgsSUFBSSxDQUFDTixnQkFBZ0IsR0FBR0EsZ0JBQWdCO0lBQ3hDLElBQUksQ0FBQ08sb0JBQW9CLEdBQUdBLG9CQUFvQjtFQUNsRDtFQUVnQkksT0FBT0EsQ0FBQSxFQUFTO0lBQzlCQyxNQUFNLElBQUlBLE1BQU0sQ0FBRSxLQUFLLEVBQUUsOERBQStELENBQUM7SUFDekYsS0FBSyxDQUFDRCxPQUFPLENBQUMsQ0FBQztFQUNqQjs7RUFFQTtBQUNGO0FBQ0E7RUFDU0UsY0FBY0EsQ0FBRUMsSUFBVSxFQUFFQyxPQUFnQixFQUFTO0lBQzFELElBQUksQ0FBQ2YsZ0JBQWdCLENBQUNhLGNBQWMsQ0FBRUMsSUFBSSxFQUFFQyxPQUFRLENBQUM7SUFDckQsSUFBSSxDQUFDUixvQkFBb0IsQ0FBQ00sY0FBYyxDQUFFQyxJQUFJLEVBQUVDLE9BQVEsQ0FBQztFQUMzRDtBQUNGO0FBRUFwQyxnQkFBZ0IsQ0FBQ3FDLFFBQVEsQ0FBRSxpQkFBaUIsRUFBRWpDLGVBQWdCLENBQUMifQ==