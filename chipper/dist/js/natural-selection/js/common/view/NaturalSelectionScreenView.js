// Copyright 2019-2022, University of Colorado Boulder

/**
 * NaturalSelectionScreenView is the base class for all ScreenViews in this sim.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import EnumerationProperty from '../../../../axon/js/EnumerationProperty.js';
import Dimension2 from '../../../../dot/js/Dimension2.js';
import ScreenView from '../../../../joist/js/ScreenView.js';
import optionize from '../../../../phet-core/js/optionize.js';
import ResetAllButton from '../../../../scenery-phet/js/buttons/ResetAllButton.js';
import { VBox } from '../../../../scenery/js/imports.js';
import naturalSelection from '../../naturalSelection.js';
import SimulationMode from '../model/SimulationMode.js';
import NaturalSelectionConstants from '../NaturalSelectionConstants.js';
import AddMutationsPanel from './AddMutationsPanel.js';
import BunnyImageMap from './BunnyImageMap.js';
import DiedDialog from './DiedDialog.js';
import EnvironmentalFactorsPanel from './EnvironmentalFactorsPanel.js';
import EnvironmentPanel from './EnvironmentPanel.js';
import GenesVisibilityManager from './GenesVisibilityManager.js';
import GraphChoice from './GraphChoice.js';
import GraphChoiceRadioButtonGroup from './GraphChoiceRadioButtonGroup.js';
import MemoryLimitDialog from './MemoryLimitDialog.js';
import MutationAlertsNode from './MutationAlertsNode.js';
import NaturalSelectionTimeControlNode from './NaturalSelectionTimeControlNode.js';
import PedigreeNode from './pedigree/PedigreeNode.js';
import PopulationNode from './population/PopulationNode.js';
import ProportionsNode from './proportions/ProportionsNode.js';
import WorldDialog from './WorldDialog.js';
export default class NaturalSelectionScreenView extends ScreenView {
  constructor(model, providedOptions) {
    const options = optionize()({
      // SelfOptions
      furVisible: true,
      earsVisible: true,
      teethVisible: true,
      toughFoodCheckboxVisible: true
    }, providedOptions);
    super(providedOptions);
    const bunnyImageMap = new BunnyImageMap();
    const environmentPanel = new EnvironmentPanel(model, bunnyImageMap, {
      left: this.layoutBounds.left + NaturalSelectionConstants.SCREEN_VIEW_X_MARGIN,
      top: this.layoutBounds.top + NaturalSelectionConstants.SCREEN_VIEW_Y_MARGIN,
      tandem: options.tandem.createTandem('environmentPanel')
    });

    // Available width to the right of environmentPanel, used to size control panels
    const rightOfViewportWidth = this.layoutBounds.width - environmentPanel.width - 2 * NaturalSelectionConstants.SCREEN_VIEW_X_MARGIN - NaturalSelectionConstants.SCREEN_VIEW_X_SPACING;
    const addMutationsPanel = new AddMutationsPanel(model.genePool, {
      fixedWidth: rightOfViewportWidth,
      tandem: options.tandem.createTandem('addMutationsPanel')
    });
    const environmentalFactorsPanel = new EnvironmentalFactorsPanel(model.wolfCollection.enabledProperty, model.food.isToughProperty, model.food.isLimitedProperty, {
      toughFoodCheckboxVisible: options.toughFoodCheckboxVisible,
      fixedWidth: rightOfViewportWidth,
      tandem: options.tandem.createTandem('environmentalFactorsPanel')
    });
    const controlPanelsParent = new VBox({
      children: [addMutationsPanel, environmentalFactorsPanel],
      spacing: NaturalSelectionConstants.SCREEN_VIEW_X_SPACING,
      left: environmentPanel.right + NaturalSelectionConstants.SCREEN_VIEW_X_SPACING,
      top: environmentPanel.top
    });

    // Displays the 'Mutation Coming...' alerts
    const mutationAlertsNode = new MutationAlertsNode(model.genePool, addMutationsPanel, {
      tandem: options.tandem.createTandem('mutationAlertsNode')
    });

    // The graphs and their related controls fill the space below the viewport.
    const graphAreaSize = new Dimension2(environmentPanel.width, this.layoutBounds.height - 2 * NaturalSelectionConstants.SCREEN_VIEW_Y_MARGIN - environmentPanel.height - NaturalSelectionConstants.SCREEN_VIEW_Y_SPACING);
    const graphAreaLeft = environmentPanel.left;
    const graphAreaTop = environmentPanel.bottom + NaturalSelectionConstants.SCREEN_VIEW_Y_SPACING;

    // Organize everything related to graphs under this tandem
    const graphsTandem = options.tandem.createTandem('graphs');

    // Population
    const populationNode = new PopulationNode(model.populationModel, graphAreaSize, {
      left: graphAreaLeft,
      y: graphAreaTop,
      tandem: graphsTandem.createTandem('populationNode')
    });

    // Proportions
    const proportionsNode = new ProportionsNode(model.proportionsModel, model.genePool, graphAreaSize, {
      left: graphAreaLeft,
      top: graphAreaTop,
      tandem: graphsTandem.createTandem('proportionsNode')
    });

    // Pedigree
    const pedigreeNode = new PedigreeNode(model.pedigreeModel, model.bunnyCollection.selectedBunnyProperty, model.genePool, bunnyImageMap, graphAreaSize, {
      left: graphAreaLeft,
      top: graphAreaTop,
      tandem: graphsTandem.createTandem('pedigreeNode')
    });
    this.graphChoiceProperty = new EnumerationProperty(GraphChoice.POPULATION, {
      tandem: graphsTandem.createTandem('graphChoiceProperty'),
      phetioDocumentation: 'the graph choice made via graphChoiceRadioButtonGroup'
    });

    // Radio buttons for choosing a graph
    const graphChoiceRadioButtonGroup = new GraphChoiceRadioButtonGroup(this.graphChoiceProperty, {
      maxWidth: rightOfViewportWidth,
      // Add PANEL_OPTIONS.xMargin so that radio buttons left-align with controls in panels above them.
      left: environmentPanel.right + NaturalSelectionConstants.SCREEN_VIEW_X_SPACING + NaturalSelectionConstants.PANEL_OPTIONS.xMargin,
      centerY: populationNode.centerY,
      tandem: graphsTandem.createTandem('graphChoiceRadioButtonGroup')
    });

    // Visibility of graphs. unlink is not necessary.
    this.graphChoiceProperty.link(graph => {
      populationNode.visible = graph === GraphChoice.POPULATION;
      proportionsNode.visible = graph === GraphChoice.PROPORTIONS;
      pedigreeNode.visible = graph === GraphChoice.PEDIGREE;
    });

    // Play/pause/step time controls
    const timeControlNode = new NaturalSelectionTimeControlNode(model.isPlayingProperty, model.timeSpeedProperty, {
      left: graphChoiceRadioButtonGroup.left,
      bottom: this.layoutBounds.bottom - NaturalSelectionConstants.SCREEN_VIEW_Y_MARGIN,
      tandem: options.tandem.createTandem('timeControlNode')
    });

    // Reset All push button
    const resetAllButton = new ResetAllButton({
      listener: () => {
        this.interruptSubtreeInput(); // cancel interactions that are in progress
        model.reset();
        this.reset();
      },
      right: this.layoutBounds.right - NaturalSelectionConstants.SCREEN_VIEW_X_MARGIN,
      bottom: this.layoutBounds.bottom - NaturalSelectionConstants.SCREEN_VIEW_Y_MARGIN,
      tandem: options.tandem.createTandem('resetAllButton')
    });

    // layering
    this.children = [environmentPanel, controlPanelsParent, graphChoiceRadioButtonGroup, timeControlNode, populationNode, proportionsNode, pedigreeNode, resetAllButton, mutationAlertsNode];
    this.resetNaturalSelectionScreenView = () => {
      this.graphChoiceProperty.reset();
    };

    // Simulation mode determines which UI components are enabled. unlink is not necessary.
    model.simulationModeProperty.link(simulationMode => {
      const enabled = simulationMode !== SimulationMode.COMPLETED;
      addMutationsPanel.setContentEnabled(enabled);
      environmentalFactorsPanel.setContentEnabled(enabled);
      timeControlNode.enabledProperty.value = enabled;
    });

    // Stuff to do when the simulation needs to be ended.
    const endSimulation = () => {
      // Interrupt any interactions that are in progress
      this.interruptSubtreeInput();
      model.simulationModeProperty.value = SimulationMode.COMPLETED;

      // So we don't leave bunnies captured in mid-hop
      model.bunnyCollection.moveBunniesToGround();
      environmentPanel.updateSprites();
    };

    // Group all dialogs in Studio
    const dialogsTandem = options.tandem.createTandem('dialogs');

    // Display a dialog when all bunnies have died.
    const diedDialog = new DiedDialog({
      tandem: dialogsTandem.createTandem('diedDialog')
    });

    // removeListener is not necessary.
    model.bunnyCollection.allBunniesHaveDiedEmitter.addListener(() => {
      endSimulation();
      diedDialog.show();
    });

    // Display a dialog when bunnies have taken over the world.
    const worldDialog = new WorldDialog({
      tandem: dialogsTandem.createTandem('worldDialog')
    });

    // removeListener is not necessary.
    model.bunnyCollection.bunniesHaveTakenOverTheWorldEmitter.addListener(() => {
      endSimulation();
      worldDialog.show();
    });

    // Display a dialog when we hit the memory limit (which is actually a generation limit).
    // See https://github.com/phetsims/natural-selection/issues/46
    const memoryLimitDialog = new MemoryLimitDialog({
      tandem: dialogsTandem.createTandem('memoryLimitDialog')
    });

    // removeListener is not necessary.
    model.memoryLimitEmitter.addListener(() => {
      endSimulation();
      memoryLimitDialog.show();
    });
    this.model = model;
    this.environmentPanel = environmentPanel;

    // eslint-disable-next-line no-new
    new GenesVisibilityManager(model.genePool, addMutationsPanel, populationNode, proportionsNode, pedigreeNode, {
      furVisible: options.furVisible,
      earsVisible: options.earsVisible,
      teethVisible: options.teethVisible,
      tandem: options.tandem.createTandem('genes')
    });
  }
  reset() {
    this.resetNaturalSelectionScreenView();
  }
  dispose() {
    assert && assert(false, 'dispose is not supported, exists for the lifetime of the sim');
    super.dispose();
  }

  /**
   * Steps the view.
   * @param dt - time step, in seconds. Note that dt is currently not used by the view, and constrained by
   *   the model. If it needs to be used by the view, see NaturalSelectionModel.step and GenerationClock.constrainDt.
   */
  step(dt) {
    super.step(dt);
    if (this.model.isPlayingProperty.value) {
      // Sim.js calls model.step before view.step. So after all model elements have been updated, this
      // updates the view of their corresponding sprites.
      this.environmentPanel.updateSprites();
    }
  }
}
naturalSelection.register('NaturalSelectionScreenView', NaturalSelectionScreenView);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFbnVtZXJhdGlvblByb3BlcnR5IiwiRGltZW5zaW9uMiIsIlNjcmVlblZpZXciLCJvcHRpb25pemUiLCJSZXNldEFsbEJ1dHRvbiIsIlZCb3giLCJuYXR1cmFsU2VsZWN0aW9uIiwiU2ltdWxhdGlvbk1vZGUiLCJOYXR1cmFsU2VsZWN0aW9uQ29uc3RhbnRzIiwiQWRkTXV0YXRpb25zUGFuZWwiLCJCdW5ueUltYWdlTWFwIiwiRGllZERpYWxvZyIsIkVudmlyb25tZW50YWxGYWN0b3JzUGFuZWwiLCJFbnZpcm9ubWVudFBhbmVsIiwiR2VuZXNWaXNpYmlsaXR5TWFuYWdlciIsIkdyYXBoQ2hvaWNlIiwiR3JhcGhDaG9pY2VSYWRpb0J1dHRvbkdyb3VwIiwiTWVtb3J5TGltaXREaWFsb2ciLCJNdXRhdGlvbkFsZXJ0c05vZGUiLCJOYXR1cmFsU2VsZWN0aW9uVGltZUNvbnRyb2xOb2RlIiwiUGVkaWdyZWVOb2RlIiwiUG9wdWxhdGlvbk5vZGUiLCJQcm9wb3J0aW9uc05vZGUiLCJXb3JsZERpYWxvZyIsIk5hdHVyYWxTZWxlY3Rpb25TY3JlZW5WaWV3IiwiY29uc3RydWN0b3IiLCJtb2RlbCIsInByb3ZpZGVkT3B0aW9ucyIsIm9wdGlvbnMiLCJmdXJWaXNpYmxlIiwiZWFyc1Zpc2libGUiLCJ0ZWV0aFZpc2libGUiLCJ0b3VnaEZvb2RDaGVja2JveFZpc2libGUiLCJidW5ueUltYWdlTWFwIiwiZW52aXJvbm1lbnRQYW5lbCIsImxlZnQiLCJsYXlvdXRCb3VuZHMiLCJTQ1JFRU5fVklFV19YX01BUkdJTiIsInRvcCIsIlNDUkVFTl9WSUVXX1lfTUFSR0lOIiwidGFuZGVtIiwiY3JlYXRlVGFuZGVtIiwicmlnaHRPZlZpZXdwb3J0V2lkdGgiLCJ3aWR0aCIsIlNDUkVFTl9WSUVXX1hfU1BBQ0lORyIsImFkZE11dGF0aW9uc1BhbmVsIiwiZ2VuZVBvb2wiLCJmaXhlZFdpZHRoIiwiZW52aXJvbm1lbnRhbEZhY3RvcnNQYW5lbCIsIndvbGZDb2xsZWN0aW9uIiwiZW5hYmxlZFByb3BlcnR5IiwiZm9vZCIsImlzVG91Z2hQcm9wZXJ0eSIsImlzTGltaXRlZFByb3BlcnR5IiwiY29udHJvbFBhbmVsc1BhcmVudCIsImNoaWxkcmVuIiwic3BhY2luZyIsInJpZ2h0IiwibXV0YXRpb25BbGVydHNOb2RlIiwiZ3JhcGhBcmVhU2l6ZSIsImhlaWdodCIsIlNDUkVFTl9WSUVXX1lfU1BBQ0lORyIsImdyYXBoQXJlYUxlZnQiLCJncmFwaEFyZWFUb3AiLCJib3R0b20iLCJncmFwaHNUYW5kZW0iLCJwb3B1bGF0aW9uTm9kZSIsInBvcHVsYXRpb25Nb2RlbCIsInkiLCJwcm9wb3J0aW9uc05vZGUiLCJwcm9wb3J0aW9uc01vZGVsIiwicGVkaWdyZWVOb2RlIiwicGVkaWdyZWVNb2RlbCIsImJ1bm55Q29sbGVjdGlvbiIsInNlbGVjdGVkQnVubnlQcm9wZXJ0eSIsImdyYXBoQ2hvaWNlUHJvcGVydHkiLCJQT1BVTEFUSU9OIiwicGhldGlvRG9jdW1lbnRhdGlvbiIsImdyYXBoQ2hvaWNlUmFkaW9CdXR0b25Hcm91cCIsIm1heFdpZHRoIiwiUEFORUxfT1BUSU9OUyIsInhNYXJnaW4iLCJjZW50ZXJZIiwibGluayIsImdyYXBoIiwidmlzaWJsZSIsIlBST1BPUlRJT05TIiwiUEVESUdSRUUiLCJ0aW1lQ29udHJvbE5vZGUiLCJpc1BsYXlpbmdQcm9wZXJ0eSIsInRpbWVTcGVlZFByb3BlcnR5IiwicmVzZXRBbGxCdXR0b24iLCJsaXN0ZW5lciIsImludGVycnVwdFN1YnRyZWVJbnB1dCIsInJlc2V0IiwicmVzZXROYXR1cmFsU2VsZWN0aW9uU2NyZWVuVmlldyIsInNpbXVsYXRpb25Nb2RlUHJvcGVydHkiLCJzaW11bGF0aW9uTW9kZSIsImVuYWJsZWQiLCJDT01QTEVURUQiLCJzZXRDb250ZW50RW5hYmxlZCIsInZhbHVlIiwiZW5kU2ltdWxhdGlvbiIsIm1vdmVCdW5uaWVzVG9Hcm91bmQiLCJ1cGRhdGVTcHJpdGVzIiwiZGlhbG9nc1RhbmRlbSIsImRpZWREaWFsb2ciLCJhbGxCdW5uaWVzSGF2ZURpZWRFbWl0dGVyIiwiYWRkTGlzdGVuZXIiLCJzaG93Iiwid29ybGREaWFsb2ciLCJidW5uaWVzSGF2ZVRha2VuT3ZlclRoZVdvcmxkRW1pdHRlciIsIm1lbW9yeUxpbWl0RGlhbG9nIiwibWVtb3J5TGltaXRFbWl0dGVyIiwiZGlzcG9zZSIsImFzc2VydCIsInN0ZXAiLCJkdCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiTmF0dXJhbFNlbGVjdGlvblNjcmVlblZpZXcudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogTmF0dXJhbFNlbGVjdGlvblNjcmVlblZpZXcgaXMgdGhlIGJhc2UgY2xhc3MgZm9yIGFsbCBTY3JlZW5WaWV3cyBpbiB0aGlzIHNpbS5cclxuICpcclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICovXHJcblxyXG5pbXBvcnQgRW51bWVyYXRpb25Qcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL0VudW1lcmF0aW9uUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgRGltZW5zaW9uMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvRGltZW5zaW9uMi5qcyc7XHJcbmltcG9ydCBTY3JlZW5WaWV3LCB7IFNjcmVlblZpZXdPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vLi4vam9pc3QvanMvU2NyZWVuVmlldy5qcyc7XHJcbmltcG9ydCBvcHRpb25pemUgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCBQaWNrUmVxdWlyZWQgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL1BpY2tSZXF1aXJlZC5qcyc7XHJcbmltcG9ydCBSZXNldEFsbEJ1dHRvbiBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvYnV0dG9ucy9SZXNldEFsbEJ1dHRvbi5qcyc7XHJcbmltcG9ydCB7IFZCb3ggfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgbmF0dXJhbFNlbGVjdGlvbiBmcm9tICcuLi8uLi9uYXR1cmFsU2VsZWN0aW9uLmpzJztcclxuaW1wb3J0IE5hdHVyYWxTZWxlY3Rpb25Nb2RlbCBmcm9tICcuLi9tb2RlbC9OYXR1cmFsU2VsZWN0aW9uTW9kZWwuanMnO1xyXG5pbXBvcnQgU2ltdWxhdGlvbk1vZGUgZnJvbSAnLi4vbW9kZWwvU2ltdWxhdGlvbk1vZGUuanMnO1xyXG5pbXBvcnQgTmF0dXJhbFNlbGVjdGlvbkNvbnN0YW50cyBmcm9tICcuLi9OYXR1cmFsU2VsZWN0aW9uQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IEFkZE11dGF0aW9uc1BhbmVsIGZyb20gJy4vQWRkTXV0YXRpb25zUGFuZWwuanMnO1xyXG5pbXBvcnQgQnVubnlJbWFnZU1hcCBmcm9tICcuL0J1bm55SW1hZ2VNYXAuanMnO1xyXG5pbXBvcnQgRGllZERpYWxvZyBmcm9tICcuL0RpZWREaWFsb2cuanMnO1xyXG5pbXBvcnQgRW52aXJvbm1lbnRhbEZhY3RvcnNQYW5lbCBmcm9tICcuL0Vudmlyb25tZW50YWxGYWN0b3JzUGFuZWwuanMnO1xyXG5pbXBvcnQgRW52aXJvbm1lbnRQYW5lbCBmcm9tICcuL0Vudmlyb25tZW50UGFuZWwuanMnO1xyXG5pbXBvcnQgR2VuZXNWaXNpYmlsaXR5TWFuYWdlciBmcm9tICcuL0dlbmVzVmlzaWJpbGl0eU1hbmFnZXIuanMnO1xyXG5pbXBvcnQgR3JhcGhDaG9pY2UgZnJvbSAnLi9HcmFwaENob2ljZS5qcyc7XHJcbmltcG9ydCBHcmFwaENob2ljZVJhZGlvQnV0dG9uR3JvdXAgZnJvbSAnLi9HcmFwaENob2ljZVJhZGlvQnV0dG9uR3JvdXAuanMnO1xyXG5pbXBvcnQgTWVtb3J5TGltaXREaWFsb2cgZnJvbSAnLi9NZW1vcnlMaW1pdERpYWxvZy5qcyc7XHJcbmltcG9ydCBNdXRhdGlvbkFsZXJ0c05vZGUgZnJvbSAnLi9NdXRhdGlvbkFsZXJ0c05vZGUuanMnO1xyXG5pbXBvcnQgTmF0dXJhbFNlbGVjdGlvblRpbWVDb250cm9sTm9kZSBmcm9tICcuL05hdHVyYWxTZWxlY3Rpb25UaW1lQ29udHJvbE5vZGUuanMnO1xyXG5pbXBvcnQgUGVkaWdyZWVOb2RlIGZyb20gJy4vcGVkaWdyZWUvUGVkaWdyZWVOb2RlLmpzJztcclxuaW1wb3J0IFBvcHVsYXRpb25Ob2RlIGZyb20gJy4vcG9wdWxhdGlvbi9Qb3B1bGF0aW9uTm9kZS5qcyc7XHJcbmltcG9ydCBQcm9wb3J0aW9uc05vZGUgZnJvbSAnLi9wcm9wb3J0aW9ucy9Qcm9wb3J0aW9uc05vZGUuanMnO1xyXG5pbXBvcnQgV29ybGREaWFsb2cgZnJvbSAnLi9Xb3JsZERpYWxvZy5qcyc7XHJcblxyXG50eXBlIFNlbGZPcHRpb25zID0ge1xyXG5cclxuICAvLyB3aGV0aGVyIHRoZSB1c2VyLWludGVyZmFjZSBmb3IgdGhlc2UgZmVhdHVyZXMgaXMgdmlzaWJsZVxyXG4gIGZ1clZpc2libGU/OiBib29sZWFuO1xyXG4gIGVhcnNWaXNpYmxlPzogYm9vbGVhbjtcclxuICB0ZWV0aFZpc2libGU/OiBib29sZWFuO1xyXG4gIHRvdWdoRm9vZENoZWNrYm94VmlzaWJsZT86IGJvb2xlYW47XHJcbn07XHJcblxyXG50eXBlIE5hdHVyYWxTZWxlY3Rpb25TY3JlZW5WaWV3T3B0aW9ucyA9IFNlbGZPcHRpb25zICYgU2NyZWVuVmlld09wdGlvbnMgJiBQaWNrUmVxdWlyZWQ8U2NyZWVuVmlld09wdGlvbnMsICd0YW5kZW0nPjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5hdHVyYWxTZWxlY3Rpb25TY3JlZW5WaWV3IGV4dGVuZHMgU2NyZWVuVmlldyB7XHJcblxyXG4gIHB1YmxpYyByZWFkb25seSBncmFwaENob2ljZVByb3BlcnR5OiBFbnVtZXJhdGlvblByb3BlcnR5PEdyYXBoQ2hvaWNlPjtcclxuXHJcbiAgcHJpdmF0ZSByZWFkb25seSBtb2RlbDogTmF0dXJhbFNlbGVjdGlvbk1vZGVsO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgZW52aXJvbm1lbnRQYW5lbDogRW52aXJvbm1lbnRQYW5lbDtcclxuICBwcml2YXRlIHJlYWRvbmx5IHJlc2V0TmF0dXJhbFNlbGVjdGlvblNjcmVlblZpZXc6ICgpID0+IHZvaWQ7XHJcblxyXG4gIHByb3RlY3RlZCBjb25zdHJ1Y3RvciggbW9kZWw6IE5hdHVyYWxTZWxlY3Rpb25Nb2RlbCwgcHJvdmlkZWRPcHRpb25zOiBOYXR1cmFsU2VsZWN0aW9uU2NyZWVuVmlld09wdGlvbnMgKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxOYXR1cmFsU2VsZWN0aW9uU2NyZWVuVmlld09wdGlvbnMsIFNlbGZPcHRpb25zLCBTY3JlZW5WaWV3T3B0aW9ucz4oKSgge1xyXG5cclxuICAgICAgLy8gU2VsZk9wdGlvbnNcclxuICAgICAgZnVyVmlzaWJsZTogdHJ1ZSxcclxuICAgICAgZWFyc1Zpc2libGU6IHRydWUsXHJcbiAgICAgIHRlZXRoVmlzaWJsZTogdHJ1ZSxcclxuICAgICAgdG91Z2hGb29kQ2hlY2tib3hWaXNpYmxlOiB0cnVlXHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICBzdXBlciggcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgY29uc3QgYnVubnlJbWFnZU1hcCA9IG5ldyBCdW5ueUltYWdlTWFwKCk7XHJcblxyXG4gICAgY29uc3QgZW52aXJvbm1lbnRQYW5lbCA9IG5ldyBFbnZpcm9ubWVudFBhbmVsKCBtb2RlbCwgYnVubnlJbWFnZU1hcCwge1xyXG4gICAgICBsZWZ0OiB0aGlzLmxheW91dEJvdW5kcy5sZWZ0ICsgTmF0dXJhbFNlbGVjdGlvbkNvbnN0YW50cy5TQ1JFRU5fVklFV19YX01BUkdJTixcclxuICAgICAgdG9wOiB0aGlzLmxheW91dEJvdW5kcy50b3AgKyBOYXR1cmFsU2VsZWN0aW9uQ29uc3RhbnRzLlNDUkVFTl9WSUVXX1lfTUFSR0lOLFxyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2Vudmlyb25tZW50UGFuZWwnIClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBBdmFpbGFibGUgd2lkdGggdG8gdGhlIHJpZ2h0IG9mIGVudmlyb25tZW50UGFuZWwsIHVzZWQgdG8gc2l6ZSBjb250cm9sIHBhbmVsc1xyXG4gICAgY29uc3QgcmlnaHRPZlZpZXdwb3J0V2lkdGggPSB0aGlzLmxheW91dEJvdW5kcy53aWR0aCAtIGVudmlyb25tZW50UGFuZWwud2lkdGggLVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIDIgKiBOYXR1cmFsU2VsZWN0aW9uQ29uc3RhbnRzLlNDUkVFTl9WSUVXX1hfTUFSR0lOICkgLVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOYXR1cmFsU2VsZWN0aW9uQ29uc3RhbnRzLlNDUkVFTl9WSUVXX1hfU1BBQ0lORztcclxuXHJcbiAgICBjb25zdCBhZGRNdXRhdGlvbnNQYW5lbCA9IG5ldyBBZGRNdXRhdGlvbnNQYW5lbCggbW9kZWwuZ2VuZVBvb2wsIHtcclxuICAgICAgZml4ZWRXaWR0aDogcmlnaHRPZlZpZXdwb3J0V2lkdGgsXHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnYWRkTXV0YXRpb25zUGFuZWwnIClcclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCBlbnZpcm9ubWVudGFsRmFjdG9yc1BhbmVsID0gbmV3IEVudmlyb25tZW50YWxGYWN0b3JzUGFuZWwoIG1vZGVsLndvbGZDb2xsZWN0aW9uLmVuYWJsZWRQcm9wZXJ0eSxcclxuICAgICAgbW9kZWwuZm9vZC5pc1RvdWdoUHJvcGVydHksIG1vZGVsLmZvb2QuaXNMaW1pdGVkUHJvcGVydHksIHtcclxuICAgICAgICB0b3VnaEZvb2RDaGVja2JveFZpc2libGU6IG9wdGlvbnMudG91Z2hGb29kQ2hlY2tib3hWaXNpYmxlLFxyXG4gICAgICAgIGZpeGVkV2lkdGg6IHJpZ2h0T2ZWaWV3cG9ydFdpZHRoLFxyXG4gICAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnZW52aXJvbm1lbnRhbEZhY3RvcnNQYW5lbCcgKVxyXG4gICAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgY29udHJvbFBhbmVsc1BhcmVudCA9IG5ldyBWQm94KCB7XHJcbiAgICAgIGNoaWxkcmVuOiBbIGFkZE11dGF0aW9uc1BhbmVsLCBlbnZpcm9ubWVudGFsRmFjdG9yc1BhbmVsIF0sXHJcbiAgICAgIHNwYWNpbmc6IE5hdHVyYWxTZWxlY3Rpb25Db25zdGFudHMuU0NSRUVOX1ZJRVdfWF9TUEFDSU5HLFxyXG4gICAgICBsZWZ0OiBlbnZpcm9ubWVudFBhbmVsLnJpZ2h0ICsgTmF0dXJhbFNlbGVjdGlvbkNvbnN0YW50cy5TQ1JFRU5fVklFV19YX1NQQUNJTkcsXHJcbiAgICAgIHRvcDogZW52aXJvbm1lbnRQYW5lbC50b3BcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBEaXNwbGF5cyB0aGUgJ011dGF0aW9uIENvbWluZy4uLicgYWxlcnRzXHJcbiAgICBjb25zdCBtdXRhdGlvbkFsZXJ0c05vZGUgPSBuZXcgTXV0YXRpb25BbGVydHNOb2RlKCBtb2RlbC5nZW5lUG9vbCwgYWRkTXV0YXRpb25zUGFuZWwsIHtcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdtdXRhdGlvbkFsZXJ0c05vZGUnIClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBUaGUgZ3JhcGhzIGFuZCB0aGVpciByZWxhdGVkIGNvbnRyb2xzIGZpbGwgdGhlIHNwYWNlIGJlbG93IHRoZSB2aWV3cG9ydC5cclxuICAgIGNvbnN0IGdyYXBoQXJlYVNpemUgPSBuZXcgRGltZW5zaW9uMihcclxuICAgICAgZW52aXJvbm1lbnRQYW5lbC53aWR0aCxcclxuICAgICAgdGhpcy5sYXlvdXRCb3VuZHMuaGVpZ2h0IC0gKCAyICogTmF0dXJhbFNlbGVjdGlvbkNvbnN0YW50cy5TQ1JFRU5fVklFV19ZX01BUkdJTiApIC1cclxuICAgICAgZW52aXJvbm1lbnRQYW5lbC5oZWlnaHQgLSBOYXR1cmFsU2VsZWN0aW9uQ29uc3RhbnRzLlNDUkVFTl9WSUVXX1lfU1BBQ0lOR1xyXG4gICAgKTtcclxuICAgIGNvbnN0IGdyYXBoQXJlYUxlZnQgPSBlbnZpcm9ubWVudFBhbmVsLmxlZnQ7XHJcbiAgICBjb25zdCBncmFwaEFyZWFUb3AgPSBlbnZpcm9ubWVudFBhbmVsLmJvdHRvbSArIE5hdHVyYWxTZWxlY3Rpb25Db25zdGFudHMuU0NSRUVOX1ZJRVdfWV9TUEFDSU5HO1xyXG5cclxuICAgIC8vIE9yZ2FuaXplIGV2ZXJ5dGhpbmcgcmVsYXRlZCB0byBncmFwaHMgdW5kZXIgdGhpcyB0YW5kZW1cclxuICAgIGNvbnN0IGdyYXBoc1RhbmRlbSA9IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2dyYXBocycgKTtcclxuXHJcbiAgICAvLyBQb3B1bGF0aW9uXHJcbiAgICBjb25zdCBwb3B1bGF0aW9uTm9kZSA9IG5ldyBQb3B1bGF0aW9uTm9kZSggbW9kZWwucG9wdWxhdGlvbk1vZGVsLCBncmFwaEFyZWFTaXplLCB7XHJcbiAgICAgIGxlZnQ6IGdyYXBoQXJlYUxlZnQsXHJcbiAgICAgIHk6IGdyYXBoQXJlYVRvcCxcclxuICAgICAgdGFuZGVtOiBncmFwaHNUYW5kZW0uY3JlYXRlVGFuZGVtKCAncG9wdWxhdGlvbk5vZGUnIClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBQcm9wb3J0aW9uc1xyXG4gICAgY29uc3QgcHJvcG9ydGlvbnNOb2RlID0gbmV3IFByb3BvcnRpb25zTm9kZSggbW9kZWwucHJvcG9ydGlvbnNNb2RlbCwgbW9kZWwuZ2VuZVBvb2wsXHJcbiAgICAgIGdyYXBoQXJlYVNpemUsIHtcclxuICAgICAgICBsZWZ0OiBncmFwaEFyZWFMZWZ0LFxyXG4gICAgICAgIHRvcDogZ3JhcGhBcmVhVG9wLFxyXG4gICAgICAgIHRhbmRlbTogZ3JhcGhzVGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3Byb3BvcnRpb25zTm9kZScgKVxyXG4gICAgICB9ICk7XHJcblxyXG4gICAgLy8gUGVkaWdyZWVcclxuICAgIGNvbnN0IHBlZGlncmVlTm9kZSA9IG5ldyBQZWRpZ3JlZU5vZGUoIG1vZGVsLnBlZGlncmVlTW9kZWwsIG1vZGVsLmJ1bm55Q29sbGVjdGlvbi5zZWxlY3RlZEJ1bm55UHJvcGVydHksXHJcbiAgICAgIG1vZGVsLmdlbmVQb29sLCBidW5ueUltYWdlTWFwLCBncmFwaEFyZWFTaXplLCB7XHJcbiAgICAgICAgbGVmdDogZ3JhcGhBcmVhTGVmdCxcclxuICAgICAgICB0b3A6IGdyYXBoQXJlYVRvcCxcclxuICAgICAgICB0YW5kZW06IGdyYXBoc1RhbmRlbS5jcmVhdGVUYW5kZW0oICdwZWRpZ3JlZU5vZGUnIClcclxuICAgICAgfSApO1xyXG5cclxuICAgIHRoaXMuZ3JhcGhDaG9pY2VQcm9wZXJ0eSA9IG5ldyBFbnVtZXJhdGlvblByb3BlcnR5KCBHcmFwaENob2ljZS5QT1BVTEFUSU9OLCB7XHJcbiAgICAgIHRhbmRlbTogZ3JhcGhzVGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2dyYXBoQ2hvaWNlUHJvcGVydHknICksXHJcbiAgICAgIHBoZXRpb0RvY3VtZW50YXRpb246ICd0aGUgZ3JhcGggY2hvaWNlIG1hZGUgdmlhIGdyYXBoQ2hvaWNlUmFkaW9CdXR0b25Hcm91cCdcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBSYWRpbyBidXR0b25zIGZvciBjaG9vc2luZyBhIGdyYXBoXHJcbiAgICBjb25zdCBncmFwaENob2ljZVJhZGlvQnV0dG9uR3JvdXAgPSBuZXcgR3JhcGhDaG9pY2VSYWRpb0J1dHRvbkdyb3VwKCB0aGlzLmdyYXBoQ2hvaWNlUHJvcGVydHksIHtcclxuICAgICAgbWF4V2lkdGg6IHJpZ2h0T2ZWaWV3cG9ydFdpZHRoLFxyXG5cclxuICAgICAgLy8gQWRkIFBBTkVMX09QVElPTlMueE1hcmdpbiBzbyB0aGF0IHJhZGlvIGJ1dHRvbnMgbGVmdC1hbGlnbiB3aXRoIGNvbnRyb2xzIGluIHBhbmVscyBhYm92ZSB0aGVtLlxyXG4gICAgICBsZWZ0OiBlbnZpcm9ubWVudFBhbmVsLnJpZ2h0ICsgTmF0dXJhbFNlbGVjdGlvbkNvbnN0YW50cy5TQ1JFRU5fVklFV19YX1NQQUNJTkcgKyBOYXR1cmFsU2VsZWN0aW9uQ29uc3RhbnRzLlBBTkVMX09QVElPTlMueE1hcmdpbiEsXHJcbiAgICAgIGNlbnRlclk6IHBvcHVsYXRpb25Ob2RlLmNlbnRlclksXHJcbiAgICAgIHRhbmRlbTogZ3JhcGhzVGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2dyYXBoQ2hvaWNlUmFkaW9CdXR0b25Hcm91cCcgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIFZpc2liaWxpdHkgb2YgZ3JhcGhzLiB1bmxpbmsgaXMgbm90IG5lY2Vzc2FyeS5cclxuICAgIHRoaXMuZ3JhcGhDaG9pY2VQcm9wZXJ0eS5saW5rKCBncmFwaCA9PiB7XHJcbiAgICAgIHBvcHVsYXRpb25Ob2RlLnZpc2libGUgPSAoIGdyYXBoID09PSBHcmFwaENob2ljZS5QT1BVTEFUSU9OICk7XHJcbiAgICAgIHByb3BvcnRpb25zTm9kZS52aXNpYmxlID0gKCBncmFwaCA9PT0gR3JhcGhDaG9pY2UuUFJPUE9SVElPTlMgKTtcclxuICAgICAgcGVkaWdyZWVOb2RlLnZpc2libGUgPSAoIGdyYXBoID09PSBHcmFwaENob2ljZS5QRURJR1JFRSApO1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIFBsYXkvcGF1c2Uvc3RlcCB0aW1lIGNvbnRyb2xzXHJcbiAgICBjb25zdCB0aW1lQ29udHJvbE5vZGUgPSBuZXcgTmF0dXJhbFNlbGVjdGlvblRpbWVDb250cm9sTm9kZSggbW9kZWwuaXNQbGF5aW5nUHJvcGVydHksIG1vZGVsLnRpbWVTcGVlZFByb3BlcnR5LCB7XHJcbiAgICAgIGxlZnQ6IGdyYXBoQ2hvaWNlUmFkaW9CdXR0b25Hcm91cC5sZWZ0LFxyXG4gICAgICBib3R0b206IHRoaXMubGF5b3V0Qm91bmRzLmJvdHRvbSAtIE5hdHVyYWxTZWxlY3Rpb25Db25zdGFudHMuU0NSRUVOX1ZJRVdfWV9NQVJHSU4sXHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAndGltZUNvbnRyb2xOb2RlJyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gUmVzZXQgQWxsIHB1c2ggYnV0dG9uXHJcbiAgICBjb25zdCByZXNldEFsbEJ1dHRvbiA9IG5ldyBSZXNldEFsbEJ1dHRvbigge1xyXG4gICAgICBsaXN0ZW5lcjogKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaW50ZXJydXB0U3VidHJlZUlucHV0KCk7IC8vIGNhbmNlbCBpbnRlcmFjdGlvbnMgdGhhdCBhcmUgaW4gcHJvZ3Jlc3NcclxuICAgICAgICBtb2RlbC5yZXNldCgpO1xyXG4gICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgICAgfSxcclxuICAgICAgcmlnaHQ6IHRoaXMubGF5b3V0Qm91bmRzLnJpZ2h0IC0gTmF0dXJhbFNlbGVjdGlvbkNvbnN0YW50cy5TQ1JFRU5fVklFV19YX01BUkdJTixcclxuICAgICAgYm90dG9tOiB0aGlzLmxheW91dEJvdW5kcy5ib3R0b20gLSBOYXR1cmFsU2VsZWN0aW9uQ29uc3RhbnRzLlNDUkVFTl9WSUVXX1lfTUFSR0lOLFxyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3Jlc2V0QWxsQnV0dG9uJyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gbGF5ZXJpbmdcclxuICAgIHRoaXMuY2hpbGRyZW4gPSBbXHJcbiAgICAgIGVudmlyb25tZW50UGFuZWwsXHJcbiAgICAgIGNvbnRyb2xQYW5lbHNQYXJlbnQsXHJcbiAgICAgIGdyYXBoQ2hvaWNlUmFkaW9CdXR0b25Hcm91cCxcclxuICAgICAgdGltZUNvbnRyb2xOb2RlLFxyXG4gICAgICBwb3B1bGF0aW9uTm9kZSxcclxuICAgICAgcHJvcG9ydGlvbnNOb2RlLFxyXG4gICAgICBwZWRpZ3JlZU5vZGUsXHJcbiAgICAgIHJlc2V0QWxsQnV0dG9uLFxyXG4gICAgICBtdXRhdGlvbkFsZXJ0c05vZGVcclxuICAgIF07XHJcblxyXG4gICAgdGhpcy5yZXNldE5hdHVyYWxTZWxlY3Rpb25TY3JlZW5WaWV3ID0gKCkgPT4ge1xyXG4gICAgICB0aGlzLmdyYXBoQ2hvaWNlUHJvcGVydHkucmVzZXQoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gU2ltdWxhdGlvbiBtb2RlIGRldGVybWluZXMgd2hpY2ggVUkgY29tcG9uZW50cyBhcmUgZW5hYmxlZC4gdW5saW5rIGlzIG5vdCBuZWNlc3NhcnkuXHJcbiAgICBtb2RlbC5zaW11bGF0aW9uTW9kZVByb3BlcnR5LmxpbmsoIHNpbXVsYXRpb25Nb2RlID0+IHtcclxuICAgICAgY29uc3QgZW5hYmxlZCA9ICggc2ltdWxhdGlvbk1vZGUgIT09IFNpbXVsYXRpb25Nb2RlLkNPTVBMRVRFRCApO1xyXG4gICAgICBhZGRNdXRhdGlvbnNQYW5lbC5zZXRDb250ZW50RW5hYmxlZCggZW5hYmxlZCApO1xyXG4gICAgICBlbnZpcm9ubWVudGFsRmFjdG9yc1BhbmVsLnNldENvbnRlbnRFbmFibGVkKCBlbmFibGVkICk7XHJcbiAgICAgIHRpbWVDb250cm9sTm9kZS5lbmFibGVkUHJvcGVydHkudmFsdWUgPSBlbmFibGVkO1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIFN0dWZmIHRvIGRvIHdoZW4gdGhlIHNpbXVsYXRpb24gbmVlZHMgdG8gYmUgZW5kZWQuXHJcbiAgICBjb25zdCBlbmRTaW11bGF0aW9uID0gKCkgPT4ge1xyXG5cclxuICAgICAgLy8gSW50ZXJydXB0IGFueSBpbnRlcmFjdGlvbnMgdGhhdCBhcmUgaW4gcHJvZ3Jlc3NcclxuICAgICAgdGhpcy5pbnRlcnJ1cHRTdWJ0cmVlSW5wdXQoKTtcclxuXHJcbiAgICAgIG1vZGVsLnNpbXVsYXRpb25Nb2RlUHJvcGVydHkudmFsdWUgPSBTaW11bGF0aW9uTW9kZS5DT01QTEVURUQ7XHJcblxyXG4gICAgICAvLyBTbyB3ZSBkb24ndCBsZWF2ZSBidW5uaWVzIGNhcHR1cmVkIGluIG1pZC1ob3BcclxuICAgICAgbW9kZWwuYnVubnlDb2xsZWN0aW9uLm1vdmVCdW5uaWVzVG9Hcm91bmQoKTtcclxuICAgICAgZW52aXJvbm1lbnRQYW5lbC51cGRhdGVTcHJpdGVzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIEdyb3VwIGFsbCBkaWFsb2dzIGluIFN0dWRpb1xyXG4gICAgY29uc3QgZGlhbG9nc1RhbmRlbSA9IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2RpYWxvZ3MnICk7XHJcblxyXG4gICAgLy8gRGlzcGxheSBhIGRpYWxvZyB3aGVuIGFsbCBidW5uaWVzIGhhdmUgZGllZC5cclxuICAgIGNvbnN0IGRpZWREaWFsb2cgPSBuZXcgRGllZERpYWxvZygge1xyXG4gICAgICB0YW5kZW06IGRpYWxvZ3NUYW5kZW0uY3JlYXRlVGFuZGVtKCAnZGllZERpYWxvZycgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIHJlbW92ZUxpc3RlbmVyIGlzIG5vdCBuZWNlc3NhcnkuXHJcbiAgICBtb2RlbC5idW5ueUNvbGxlY3Rpb24uYWxsQnVubmllc0hhdmVEaWVkRW1pdHRlci5hZGRMaXN0ZW5lciggKCkgPT4ge1xyXG4gICAgICBlbmRTaW11bGF0aW9uKCk7XHJcbiAgICAgIGRpZWREaWFsb2cuc2hvdygpO1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIERpc3BsYXkgYSBkaWFsb2cgd2hlbiBidW5uaWVzIGhhdmUgdGFrZW4gb3ZlciB0aGUgd29ybGQuXHJcbiAgICBjb25zdCB3b3JsZERpYWxvZyA9IG5ldyBXb3JsZERpYWxvZygge1xyXG4gICAgICB0YW5kZW06IGRpYWxvZ3NUYW5kZW0uY3JlYXRlVGFuZGVtKCAnd29ybGREaWFsb2cnIClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyByZW1vdmVMaXN0ZW5lciBpcyBub3QgbmVjZXNzYXJ5LlxyXG4gICAgbW9kZWwuYnVubnlDb2xsZWN0aW9uLmJ1bm5pZXNIYXZlVGFrZW5PdmVyVGhlV29ybGRFbWl0dGVyLmFkZExpc3RlbmVyKCAoKSA9PiB7XHJcbiAgICAgIGVuZFNpbXVsYXRpb24oKTtcclxuICAgICAgd29ybGREaWFsb2cuc2hvdygpO1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIERpc3BsYXkgYSBkaWFsb2cgd2hlbiB3ZSBoaXQgdGhlIG1lbW9yeSBsaW1pdCAod2hpY2ggaXMgYWN0dWFsbHkgYSBnZW5lcmF0aW9uIGxpbWl0KS5cclxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvbmF0dXJhbC1zZWxlY3Rpb24vaXNzdWVzLzQ2XHJcbiAgICBjb25zdCBtZW1vcnlMaW1pdERpYWxvZyA9IG5ldyBNZW1vcnlMaW1pdERpYWxvZygge1xyXG4gICAgICB0YW5kZW06IGRpYWxvZ3NUYW5kZW0uY3JlYXRlVGFuZGVtKCAnbWVtb3J5TGltaXREaWFsb2cnIClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyByZW1vdmVMaXN0ZW5lciBpcyBub3QgbmVjZXNzYXJ5LlxyXG4gICAgbW9kZWwubWVtb3J5TGltaXRFbWl0dGVyLmFkZExpc3RlbmVyKCAoKSA9PiB7XHJcbiAgICAgIGVuZFNpbXVsYXRpb24oKTtcclxuICAgICAgbWVtb3J5TGltaXREaWFsb2cuc2hvdygpO1xyXG4gICAgfSApO1xyXG5cclxuICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcclxuICAgIHRoaXMuZW52aXJvbm1lbnRQYW5lbCA9IGVudmlyb25tZW50UGFuZWw7XHJcblxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5ld1xyXG4gICAgbmV3IEdlbmVzVmlzaWJpbGl0eU1hbmFnZXIoIG1vZGVsLmdlbmVQb29sLCBhZGRNdXRhdGlvbnNQYW5lbCwgcG9wdWxhdGlvbk5vZGUsIHByb3BvcnRpb25zTm9kZSwgcGVkaWdyZWVOb2RlLCB7XHJcbiAgICAgIGZ1clZpc2libGU6IG9wdGlvbnMuZnVyVmlzaWJsZSxcclxuICAgICAgZWFyc1Zpc2libGU6IG9wdGlvbnMuZWFyc1Zpc2libGUsXHJcbiAgICAgIHRlZXRoVmlzaWJsZTogb3B0aW9ucy50ZWV0aFZpc2libGUsXHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnZ2VuZXMnIClcclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcclxuICAgIHRoaXMucmVzZXROYXR1cmFsU2VsZWN0aW9uU2NyZWVuVmlldygpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG92ZXJyaWRlIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBmYWxzZSwgJ2Rpc3Bvc2UgaXMgbm90IHN1cHBvcnRlZCwgZXhpc3RzIGZvciB0aGUgbGlmZXRpbWUgb2YgdGhlIHNpbScgKTtcclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFN0ZXBzIHRoZSB2aWV3LlxyXG4gICAqIEBwYXJhbSBkdCAtIHRpbWUgc3RlcCwgaW4gc2Vjb25kcy4gTm90ZSB0aGF0IGR0IGlzIGN1cnJlbnRseSBub3QgdXNlZCBieSB0aGUgdmlldywgYW5kIGNvbnN0cmFpbmVkIGJ5XHJcbiAgICogICB0aGUgbW9kZWwuIElmIGl0IG5lZWRzIHRvIGJlIHVzZWQgYnkgdGhlIHZpZXcsIHNlZSBOYXR1cmFsU2VsZWN0aW9uTW9kZWwuc3RlcCBhbmQgR2VuZXJhdGlvbkNsb2NrLmNvbnN0cmFpbkR0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSBzdGVwKCBkdDogbnVtYmVyICk6IHZvaWQge1xyXG4gICAgc3VwZXIuc3RlcCggZHQgKTtcclxuICAgIGlmICggdGhpcy5tb2RlbC5pc1BsYXlpbmdQcm9wZXJ0eS52YWx1ZSApIHtcclxuXHJcbiAgICAgIC8vIFNpbS5qcyBjYWxscyBtb2RlbC5zdGVwIGJlZm9yZSB2aWV3LnN0ZXAuIFNvIGFmdGVyIGFsbCBtb2RlbCBlbGVtZW50cyBoYXZlIGJlZW4gdXBkYXRlZCwgdGhpc1xyXG4gICAgICAvLyB1cGRhdGVzIHRoZSB2aWV3IG9mIHRoZWlyIGNvcnJlc3BvbmRpbmcgc3ByaXRlcy5cclxuICAgICAgdGhpcy5lbnZpcm9ubWVudFBhbmVsLnVwZGF0ZVNwcml0ZXMoKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbm5hdHVyYWxTZWxlY3Rpb24ucmVnaXN0ZXIoICdOYXR1cmFsU2VsZWN0aW9uU2NyZWVuVmlldycsIE5hdHVyYWxTZWxlY3Rpb25TY3JlZW5WaWV3ICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLG1CQUFtQixNQUFNLDRDQUE0QztBQUM1RSxPQUFPQyxVQUFVLE1BQU0sa0NBQWtDO0FBQ3pELE9BQU9DLFVBQVUsTUFBNkIsb0NBQW9DO0FBQ2xGLE9BQU9DLFNBQVMsTUFBTSx1Q0FBdUM7QUFFN0QsT0FBT0MsY0FBYyxNQUFNLHVEQUF1RDtBQUNsRixTQUFTQyxJQUFJLFFBQVEsbUNBQW1DO0FBQ3hELE9BQU9DLGdCQUFnQixNQUFNLDJCQUEyQjtBQUV4RCxPQUFPQyxjQUFjLE1BQU0sNEJBQTRCO0FBQ3ZELE9BQU9DLHlCQUF5QixNQUFNLGlDQUFpQztBQUN2RSxPQUFPQyxpQkFBaUIsTUFBTSx3QkFBd0I7QUFDdEQsT0FBT0MsYUFBYSxNQUFNLG9CQUFvQjtBQUM5QyxPQUFPQyxVQUFVLE1BQU0saUJBQWlCO0FBQ3hDLE9BQU9DLHlCQUF5QixNQUFNLGdDQUFnQztBQUN0RSxPQUFPQyxnQkFBZ0IsTUFBTSx1QkFBdUI7QUFDcEQsT0FBT0Msc0JBQXNCLE1BQU0sNkJBQTZCO0FBQ2hFLE9BQU9DLFdBQVcsTUFBTSxrQkFBa0I7QUFDMUMsT0FBT0MsMkJBQTJCLE1BQU0sa0NBQWtDO0FBQzFFLE9BQU9DLGlCQUFpQixNQUFNLHdCQUF3QjtBQUN0RCxPQUFPQyxrQkFBa0IsTUFBTSx5QkFBeUI7QUFDeEQsT0FBT0MsK0JBQStCLE1BQU0sc0NBQXNDO0FBQ2xGLE9BQU9DLFlBQVksTUFBTSw0QkFBNEI7QUFDckQsT0FBT0MsY0FBYyxNQUFNLGdDQUFnQztBQUMzRCxPQUFPQyxlQUFlLE1BQU0sa0NBQWtDO0FBQzlELE9BQU9DLFdBQVcsTUFBTSxrQkFBa0I7QUFhMUMsZUFBZSxNQUFNQywwQkFBMEIsU0FBU3RCLFVBQVUsQ0FBQztFQVF2RHVCLFdBQVdBLENBQUVDLEtBQTRCLEVBQUVDLGVBQWtELEVBQUc7SUFFeEcsTUFBTUMsT0FBTyxHQUFHekIsU0FBUyxDQUFvRSxDQUFDLENBQUU7TUFFOUY7TUFDQTBCLFVBQVUsRUFBRSxJQUFJO01BQ2hCQyxXQUFXLEVBQUUsSUFBSTtNQUNqQkMsWUFBWSxFQUFFLElBQUk7TUFDbEJDLHdCQUF3QixFQUFFO0lBQzVCLENBQUMsRUFBRUwsZUFBZ0IsQ0FBQztJQUVwQixLQUFLLENBQUVBLGVBQWdCLENBQUM7SUFFeEIsTUFBTU0sYUFBYSxHQUFHLElBQUl2QixhQUFhLENBQUMsQ0FBQztJQUV6QyxNQUFNd0IsZ0JBQWdCLEdBQUcsSUFBSXJCLGdCQUFnQixDQUFFYSxLQUFLLEVBQUVPLGFBQWEsRUFBRTtNQUNuRUUsSUFBSSxFQUFFLElBQUksQ0FBQ0MsWUFBWSxDQUFDRCxJQUFJLEdBQUczQix5QkFBeUIsQ0FBQzZCLG9CQUFvQjtNQUM3RUMsR0FBRyxFQUFFLElBQUksQ0FBQ0YsWUFBWSxDQUFDRSxHQUFHLEdBQUc5Qix5QkFBeUIsQ0FBQytCLG9CQUFvQjtNQUMzRUMsTUFBTSxFQUFFWixPQUFPLENBQUNZLE1BQU0sQ0FBQ0MsWUFBWSxDQUFFLGtCQUFtQjtJQUMxRCxDQUFFLENBQUM7O0lBRUg7SUFDQSxNQUFNQyxvQkFBb0IsR0FBRyxJQUFJLENBQUNOLFlBQVksQ0FBQ08sS0FBSyxHQUFHVCxnQkFBZ0IsQ0FBQ1MsS0FBSyxHQUM5QyxDQUFDLEdBQUduQyx5QkFBeUIsQ0FBQzZCLG9CQUFzQixHQUN0RDdCLHlCQUF5QixDQUFDb0MscUJBQXFCO0lBRTVFLE1BQU1DLGlCQUFpQixHQUFHLElBQUlwQyxpQkFBaUIsQ0FBRWlCLEtBQUssQ0FBQ29CLFFBQVEsRUFBRTtNQUMvREMsVUFBVSxFQUFFTCxvQkFBb0I7TUFDaENGLE1BQU0sRUFBRVosT0FBTyxDQUFDWSxNQUFNLENBQUNDLFlBQVksQ0FBRSxtQkFBb0I7SUFDM0QsQ0FBRSxDQUFDO0lBRUgsTUFBTU8seUJBQXlCLEdBQUcsSUFBSXBDLHlCQUF5QixDQUFFYyxLQUFLLENBQUN1QixjQUFjLENBQUNDLGVBQWUsRUFDbkd4QixLQUFLLENBQUN5QixJQUFJLENBQUNDLGVBQWUsRUFBRTFCLEtBQUssQ0FBQ3lCLElBQUksQ0FBQ0UsaUJBQWlCLEVBQUU7TUFDeERyQix3QkFBd0IsRUFBRUosT0FBTyxDQUFDSSx3QkFBd0I7TUFDMURlLFVBQVUsRUFBRUwsb0JBQW9CO01BQ2hDRixNQUFNLEVBQUVaLE9BQU8sQ0FBQ1ksTUFBTSxDQUFDQyxZQUFZLENBQUUsMkJBQTRCO0lBQ25FLENBQUUsQ0FBQztJQUVMLE1BQU1hLG1CQUFtQixHQUFHLElBQUlqRCxJQUFJLENBQUU7TUFDcENrRCxRQUFRLEVBQUUsQ0FBRVYsaUJBQWlCLEVBQUVHLHlCQUF5QixDQUFFO01BQzFEUSxPQUFPLEVBQUVoRCx5QkFBeUIsQ0FBQ29DLHFCQUFxQjtNQUN4RFQsSUFBSSxFQUFFRCxnQkFBZ0IsQ0FBQ3VCLEtBQUssR0FBR2pELHlCQUF5QixDQUFDb0MscUJBQXFCO01BQzlFTixHQUFHLEVBQUVKLGdCQUFnQixDQUFDSTtJQUN4QixDQUFFLENBQUM7O0lBRUg7SUFDQSxNQUFNb0Isa0JBQWtCLEdBQUcsSUFBSXhDLGtCQUFrQixDQUFFUSxLQUFLLENBQUNvQixRQUFRLEVBQUVELGlCQUFpQixFQUFFO01BQ3BGTCxNQUFNLEVBQUVaLE9BQU8sQ0FBQ1ksTUFBTSxDQUFDQyxZQUFZLENBQUUsb0JBQXFCO0lBQzVELENBQUUsQ0FBQzs7SUFFSDtJQUNBLE1BQU1rQixhQUFhLEdBQUcsSUFBSTFELFVBQVUsQ0FDbENpQyxnQkFBZ0IsQ0FBQ1MsS0FBSyxFQUN0QixJQUFJLENBQUNQLFlBQVksQ0FBQ3dCLE1BQU0sR0FBSyxDQUFDLEdBQUdwRCx5QkFBeUIsQ0FBQytCLG9CQUFzQixHQUNqRkwsZ0JBQWdCLENBQUMwQixNQUFNLEdBQUdwRCx5QkFBeUIsQ0FBQ3FELHFCQUN0RCxDQUFDO0lBQ0QsTUFBTUMsYUFBYSxHQUFHNUIsZ0JBQWdCLENBQUNDLElBQUk7SUFDM0MsTUFBTTRCLFlBQVksR0FBRzdCLGdCQUFnQixDQUFDOEIsTUFBTSxHQUFHeEQseUJBQXlCLENBQUNxRCxxQkFBcUI7O0lBRTlGO0lBQ0EsTUFBTUksWUFBWSxHQUFHckMsT0FBTyxDQUFDWSxNQUFNLENBQUNDLFlBQVksQ0FBRSxRQUFTLENBQUM7O0lBRTVEO0lBQ0EsTUFBTXlCLGNBQWMsR0FBRyxJQUFJN0MsY0FBYyxDQUFFSyxLQUFLLENBQUN5QyxlQUFlLEVBQUVSLGFBQWEsRUFBRTtNQUMvRXhCLElBQUksRUFBRTJCLGFBQWE7TUFDbkJNLENBQUMsRUFBRUwsWUFBWTtNQUNmdkIsTUFBTSxFQUFFeUIsWUFBWSxDQUFDeEIsWUFBWSxDQUFFLGdCQUFpQjtJQUN0RCxDQUFFLENBQUM7O0lBRUg7SUFDQSxNQUFNNEIsZUFBZSxHQUFHLElBQUkvQyxlQUFlLENBQUVJLEtBQUssQ0FBQzRDLGdCQUFnQixFQUFFNUMsS0FBSyxDQUFDb0IsUUFBUSxFQUNqRmEsYUFBYSxFQUFFO01BQ2J4QixJQUFJLEVBQUUyQixhQUFhO01BQ25CeEIsR0FBRyxFQUFFeUIsWUFBWTtNQUNqQnZCLE1BQU0sRUFBRXlCLFlBQVksQ0FBQ3hCLFlBQVksQ0FBRSxpQkFBa0I7SUFDdkQsQ0FBRSxDQUFDOztJQUVMO0lBQ0EsTUFBTThCLFlBQVksR0FBRyxJQUFJbkQsWUFBWSxDQUFFTSxLQUFLLENBQUM4QyxhQUFhLEVBQUU5QyxLQUFLLENBQUMrQyxlQUFlLENBQUNDLHFCQUFxQixFQUNyR2hELEtBQUssQ0FBQ29CLFFBQVEsRUFBRWIsYUFBYSxFQUFFMEIsYUFBYSxFQUFFO01BQzVDeEIsSUFBSSxFQUFFMkIsYUFBYTtNQUNuQnhCLEdBQUcsRUFBRXlCLFlBQVk7TUFDakJ2QixNQUFNLEVBQUV5QixZQUFZLENBQUN4QixZQUFZLENBQUUsY0FBZTtJQUNwRCxDQUFFLENBQUM7SUFFTCxJQUFJLENBQUNrQyxtQkFBbUIsR0FBRyxJQUFJM0UsbUJBQW1CLENBQUVlLFdBQVcsQ0FBQzZELFVBQVUsRUFBRTtNQUMxRXBDLE1BQU0sRUFBRXlCLFlBQVksQ0FBQ3hCLFlBQVksQ0FBRSxxQkFBc0IsQ0FBQztNQUMxRG9DLG1CQUFtQixFQUFFO0lBQ3ZCLENBQUUsQ0FBQzs7SUFFSDtJQUNBLE1BQU1DLDJCQUEyQixHQUFHLElBQUk5RCwyQkFBMkIsQ0FBRSxJQUFJLENBQUMyRCxtQkFBbUIsRUFBRTtNQUM3RkksUUFBUSxFQUFFckMsb0JBQW9CO01BRTlCO01BQ0FQLElBQUksRUFBRUQsZ0JBQWdCLENBQUN1QixLQUFLLEdBQUdqRCx5QkFBeUIsQ0FBQ29DLHFCQUFxQixHQUFHcEMseUJBQXlCLENBQUN3RSxhQUFhLENBQUNDLE9BQVE7TUFDaklDLE9BQU8sRUFBRWhCLGNBQWMsQ0FBQ2dCLE9BQU87TUFDL0IxQyxNQUFNLEVBQUV5QixZQUFZLENBQUN4QixZQUFZLENBQUUsNkJBQThCO0lBQ25FLENBQUUsQ0FBQzs7SUFFSDtJQUNBLElBQUksQ0FBQ2tDLG1CQUFtQixDQUFDUSxJQUFJLENBQUVDLEtBQUssSUFBSTtNQUN0Q2xCLGNBQWMsQ0FBQ21CLE9BQU8sR0FBS0QsS0FBSyxLQUFLckUsV0FBVyxDQUFDNkQsVUFBWTtNQUM3RFAsZUFBZSxDQUFDZ0IsT0FBTyxHQUFLRCxLQUFLLEtBQUtyRSxXQUFXLENBQUN1RSxXQUFhO01BQy9EZixZQUFZLENBQUNjLE9BQU8sR0FBS0QsS0FBSyxLQUFLckUsV0FBVyxDQUFDd0UsUUFBVTtJQUMzRCxDQUFFLENBQUM7O0lBRUg7SUFDQSxNQUFNQyxlQUFlLEdBQUcsSUFBSXJFLCtCQUErQixDQUFFTyxLQUFLLENBQUMrRCxpQkFBaUIsRUFBRS9ELEtBQUssQ0FBQ2dFLGlCQUFpQixFQUFFO01BQzdHdkQsSUFBSSxFQUFFMkMsMkJBQTJCLENBQUMzQyxJQUFJO01BQ3RDNkIsTUFBTSxFQUFFLElBQUksQ0FBQzVCLFlBQVksQ0FBQzRCLE1BQU0sR0FBR3hELHlCQUF5QixDQUFDK0Isb0JBQW9CO01BQ2pGQyxNQUFNLEVBQUVaLE9BQU8sQ0FBQ1ksTUFBTSxDQUFDQyxZQUFZLENBQUUsaUJBQWtCO0lBQ3pELENBQUUsQ0FBQzs7SUFFSDtJQUNBLE1BQU1rRCxjQUFjLEdBQUcsSUFBSXZGLGNBQWMsQ0FBRTtNQUN6Q3dGLFFBQVEsRUFBRUEsQ0FBQSxLQUFNO1FBQ2QsSUFBSSxDQUFDQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM5Qm5FLEtBQUssQ0FBQ29FLEtBQUssQ0FBQyxDQUFDO1FBQ2IsSUFBSSxDQUFDQSxLQUFLLENBQUMsQ0FBQztNQUNkLENBQUM7TUFDRHJDLEtBQUssRUFBRSxJQUFJLENBQUNyQixZQUFZLENBQUNxQixLQUFLLEdBQUdqRCx5QkFBeUIsQ0FBQzZCLG9CQUFvQjtNQUMvRTJCLE1BQU0sRUFBRSxJQUFJLENBQUM1QixZQUFZLENBQUM0QixNQUFNLEdBQUd4RCx5QkFBeUIsQ0FBQytCLG9CQUFvQjtNQUNqRkMsTUFBTSxFQUFFWixPQUFPLENBQUNZLE1BQU0sQ0FBQ0MsWUFBWSxDQUFFLGdCQUFpQjtJQUN4RCxDQUFFLENBQUM7O0lBRUg7SUFDQSxJQUFJLENBQUNjLFFBQVEsR0FBRyxDQUNkckIsZ0JBQWdCLEVBQ2hCb0IsbUJBQW1CLEVBQ25Cd0IsMkJBQTJCLEVBQzNCVSxlQUFlLEVBQ2Z0QixjQUFjLEVBQ2RHLGVBQWUsRUFDZkUsWUFBWSxFQUNab0IsY0FBYyxFQUNkakMsa0JBQWtCLENBQ25CO0lBRUQsSUFBSSxDQUFDcUMsK0JBQStCLEdBQUcsTUFBTTtNQUMzQyxJQUFJLENBQUNwQixtQkFBbUIsQ0FBQ21CLEtBQUssQ0FBQyxDQUFDO0lBQ2xDLENBQUM7O0lBRUQ7SUFDQXBFLEtBQUssQ0FBQ3NFLHNCQUFzQixDQUFDYixJQUFJLENBQUVjLGNBQWMsSUFBSTtNQUNuRCxNQUFNQyxPQUFPLEdBQUtELGNBQWMsS0FBSzFGLGNBQWMsQ0FBQzRGLFNBQVc7TUFDL0R0RCxpQkFBaUIsQ0FBQ3VELGlCQUFpQixDQUFFRixPQUFRLENBQUM7TUFDOUNsRCx5QkFBeUIsQ0FBQ29ELGlCQUFpQixDQUFFRixPQUFRLENBQUM7TUFDdERWLGVBQWUsQ0FBQ3RDLGVBQWUsQ0FBQ21ELEtBQUssR0FBR0gsT0FBTztJQUNqRCxDQUFFLENBQUM7O0lBRUg7SUFDQSxNQUFNSSxhQUFhLEdBQUdBLENBQUEsS0FBTTtNQUUxQjtNQUNBLElBQUksQ0FBQ1QscUJBQXFCLENBQUMsQ0FBQztNQUU1Qm5FLEtBQUssQ0FBQ3NFLHNCQUFzQixDQUFDSyxLQUFLLEdBQUc5RixjQUFjLENBQUM0RixTQUFTOztNQUU3RDtNQUNBekUsS0FBSyxDQUFDK0MsZUFBZSxDQUFDOEIsbUJBQW1CLENBQUMsQ0FBQztNQUMzQ3JFLGdCQUFnQixDQUFDc0UsYUFBYSxDQUFDLENBQUM7SUFDbEMsQ0FBQzs7SUFFRDtJQUNBLE1BQU1DLGFBQWEsR0FBRzdFLE9BQU8sQ0FBQ1ksTUFBTSxDQUFDQyxZQUFZLENBQUUsU0FBVSxDQUFDOztJQUU5RDtJQUNBLE1BQU1pRSxVQUFVLEdBQUcsSUFBSS9GLFVBQVUsQ0FBRTtNQUNqQzZCLE1BQU0sRUFBRWlFLGFBQWEsQ0FBQ2hFLFlBQVksQ0FBRSxZQUFhO0lBQ25ELENBQUUsQ0FBQzs7SUFFSDtJQUNBZixLQUFLLENBQUMrQyxlQUFlLENBQUNrQyx5QkFBeUIsQ0FBQ0MsV0FBVyxDQUFFLE1BQU07TUFDakVOLGFBQWEsQ0FBQyxDQUFDO01BQ2ZJLFVBQVUsQ0FBQ0csSUFBSSxDQUFDLENBQUM7SUFDbkIsQ0FBRSxDQUFDOztJQUVIO0lBQ0EsTUFBTUMsV0FBVyxHQUFHLElBQUl2RixXQUFXLENBQUU7TUFDbkNpQixNQUFNLEVBQUVpRSxhQUFhLENBQUNoRSxZQUFZLENBQUUsYUFBYztJQUNwRCxDQUFFLENBQUM7O0lBRUg7SUFDQWYsS0FBSyxDQUFDK0MsZUFBZSxDQUFDc0MsbUNBQW1DLENBQUNILFdBQVcsQ0FBRSxNQUFNO01BQzNFTixhQUFhLENBQUMsQ0FBQztNQUNmUSxXQUFXLENBQUNELElBQUksQ0FBQyxDQUFDO0lBQ3BCLENBQUUsQ0FBQzs7SUFFSDtJQUNBO0lBQ0EsTUFBTUcsaUJBQWlCLEdBQUcsSUFBSS9GLGlCQUFpQixDQUFFO01BQy9DdUIsTUFBTSxFQUFFaUUsYUFBYSxDQUFDaEUsWUFBWSxDQUFFLG1CQUFvQjtJQUMxRCxDQUFFLENBQUM7O0lBRUg7SUFDQWYsS0FBSyxDQUFDdUYsa0JBQWtCLENBQUNMLFdBQVcsQ0FBRSxNQUFNO01BQzFDTixhQUFhLENBQUMsQ0FBQztNQUNmVSxpQkFBaUIsQ0FBQ0gsSUFBSSxDQUFDLENBQUM7SUFDMUIsQ0FBRSxDQUFDO0lBRUgsSUFBSSxDQUFDbkYsS0FBSyxHQUFHQSxLQUFLO0lBQ2xCLElBQUksQ0FBQ1EsZ0JBQWdCLEdBQUdBLGdCQUFnQjs7SUFFeEM7SUFDQSxJQUFJcEIsc0JBQXNCLENBQUVZLEtBQUssQ0FBQ29CLFFBQVEsRUFBRUQsaUJBQWlCLEVBQUVxQixjQUFjLEVBQUVHLGVBQWUsRUFBRUUsWUFBWSxFQUFFO01BQzVHMUMsVUFBVSxFQUFFRCxPQUFPLENBQUNDLFVBQVU7TUFDOUJDLFdBQVcsRUFBRUYsT0FBTyxDQUFDRSxXQUFXO01BQ2hDQyxZQUFZLEVBQUVILE9BQU8sQ0FBQ0csWUFBWTtNQUNsQ1MsTUFBTSxFQUFFWixPQUFPLENBQUNZLE1BQU0sQ0FBQ0MsWUFBWSxDQUFFLE9BQVE7SUFDL0MsQ0FBRSxDQUFDO0VBQ0w7RUFFT3FELEtBQUtBLENBQUEsRUFBUztJQUNuQixJQUFJLENBQUNDLCtCQUErQixDQUFDLENBQUM7RUFDeEM7RUFFZ0JtQixPQUFPQSxDQUFBLEVBQVM7SUFDOUJDLE1BQU0sSUFBSUEsTUFBTSxDQUFFLEtBQUssRUFBRSw4REFBK0QsQ0FBQztJQUN6RixLQUFLLENBQUNELE9BQU8sQ0FBQyxDQUFDO0VBQ2pCOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDa0JFLElBQUlBLENBQUVDLEVBQVUsRUFBUztJQUN2QyxLQUFLLENBQUNELElBQUksQ0FBRUMsRUFBRyxDQUFDO0lBQ2hCLElBQUssSUFBSSxDQUFDM0YsS0FBSyxDQUFDK0QsaUJBQWlCLENBQUNZLEtBQUssRUFBRztNQUV4QztNQUNBO01BQ0EsSUFBSSxDQUFDbkUsZ0JBQWdCLENBQUNzRSxhQUFhLENBQUMsQ0FBQztJQUN2QztFQUNGO0FBQ0Y7QUFFQWxHLGdCQUFnQixDQUFDZ0gsUUFBUSxDQUFFLDRCQUE0QixFQUFFOUYsMEJBQTJCLENBQUMifQ==