// Copyright 2021-2022, University of Colorado Boulder

/**
 * EnvironmentPanel contains everything that's in the panel at the top-center of the screen.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import NumberProperty from '../../../../axon/js/NumberProperty.js';
import optionize from '../../../../phet-core/js/optionize.js';
import { Node } from '../../../../scenery/js/imports.js';
import Panel from '../../../../sun/js/Panel.js';
import Tandem from '../../../../tandem/js/Tandem.js';
import naturalSelection from '../../naturalSelection.js';
import SimulationMode from '../model/SimulationMode.js';
import NaturalSelectionConstants from '../NaturalSelectionConstants.js';
import NaturalSelectionQueryParameters from '../NaturalSelectionQueryParameters.js';
import NaturalSelectionUtils from '../NaturalSelectionUtils.js';
import EnvironmentNode from './environment/EnvironmentNode.js';
import EnvironmentRadioButtonGroup from './EnvironmentRadioButtonGroup.js';
import GenerationClockNode from './GenerationClockNode.js';
import PerformanceTimesNode from './PerformanceTimesNode.js';
import PlayButtonGroup from './PlayButtonGroup.js';
export default class EnvironmentPanel extends Panel {
  constructor(model, bunnyImageMap, providedOptions) {
    const options = optionize()({
      // PanelOptions
      xMargin: 0,
      yMargin: 0,
      cornerRadius: 0,
      fill: null,
      stroke: null,
      phetioVisiblePropertyInstrumented: false
    }, providedOptions);

    // Where the bunnies, food, etc. are displayed
    const environmentNode = new EnvironmentNode(model, bunnyImageMap, {
      tandem: options.tandem.createTandem('environmentNode')
    });

    // Generation clock
    const generationClockNode = new GenerationClockNode(model.generationClock, model.food.enabledProperty, model.wolfCollection.enabledProperty, {
      centerX: environmentNode.centerX,
      top: environmentNode.top + NaturalSelectionConstants.ENVIRONMENT_DISPLAY_Y_MARGIN - 3,
      tandem: options.tandem.createTandem('generationClockNode')
    });

    // Environment radio buttons
    const environmentRadioButtonGroup = new EnvironmentRadioButtonGroup(model.environmentProperty, {
      right: environmentNode.right - NaturalSelectionConstants.ENVIRONMENT_DISPLAY_X_MARGIN,
      top: environmentNode.top + NaturalSelectionConstants.ENVIRONMENT_DISPLAY_Y_MARGIN,
      tandem: options.tandem.createTandem('environmentRadioButtonGroup')
    });

    // The time that it took to execute the 'Start Over' button callback, in ms
    // For performance profiling, see https://github.com/phetsims/natural-selection/issues/140
    const timeToStartOverProperty = new NumberProperty(0, {
      tandem: Tandem.OPT_OUT
    });

    // The different buttons that can be used to make the simulation begin playing.
    const playButtonGroup = new PlayButtonGroup(model.simulationModeProperty, model.bunnyCollection.liveBunnies.lengthProperty, {
      // Callback for the 'Add a Mate' button
      addAMate: () => model.addAMate(),
      // Callback for the 'Start Over' button, with performance profiling,
      // see https://github.com/phetsims/natural-selection/issues/140
      startOver: () => {
        // Like 'Reset All', cancel any interactions that are in progress.
        this.interruptSubtreeInput();
        timeToStartOverProperty.value = NaturalSelectionUtils.time(() => model.startOver());
      },
      tandem: options.tandem.createTandem('playButtonGroup')
    });

    // Buttons at center-bottom, adjusted if their text labels change dynamically
    playButtonGroup.boundsProperty.link(() => {
      playButtonGroup.centerX = environmentNode.centerX;
      playButtonGroup.bottom = environmentNode.bottom - NaturalSelectionConstants.ENVIRONMENT_DISPLAY_Y_MARGIN;
    });
    const content = new Node({
      children: [environmentNode, generationClockNode, environmentRadioButtonGroup, playButtonGroup]
    });
    super(content, options);

    // Show performance profiling in the upper-left corner of the environment, and in the console.
    // See https://github.com/phetsims/natural-selection/issues/60 and https://github.com/phetsims/natural-selection/issues/140
    if (NaturalSelectionQueryParameters.showTimes) {
      this.addChild(new PerformanceTimesNode(model.timeToMateProperty, timeToStartOverProperty, {
        left: environmentNode.left + 5,
        top: environmentNode.top + 5
      }));
    }

    // Simulation mode determines which UI components are enabled. unlink is not necessary.
    model.simulationModeProperty.link(simulationMode => {
      environmentRadioButtonGroup.enabledProperty.value = simulationMode !== SimulationMode.COMPLETED;
    });
    this.environmentNode = environmentNode;
  }

  /**
   * Updates sprites to match the model.
   */
  updateSprites() {
    this.environmentNode.updateSprites();
  }
}
naturalSelection.register('EnvironmentPanel', EnvironmentPanel);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJOdW1iZXJQcm9wZXJ0eSIsIm9wdGlvbml6ZSIsIk5vZGUiLCJQYW5lbCIsIlRhbmRlbSIsIm5hdHVyYWxTZWxlY3Rpb24iLCJTaW11bGF0aW9uTW9kZSIsIk5hdHVyYWxTZWxlY3Rpb25Db25zdGFudHMiLCJOYXR1cmFsU2VsZWN0aW9uUXVlcnlQYXJhbWV0ZXJzIiwiTmF0dXJhbFNlbGVjdGlvblV0aWxzIiwiRW52aXJvbm1lbnROb2RlIiwiRW52aXJvbm1lbnRSYWRpb0J1dHRvbkdyb3VwIiwiR2VuZXJhdGlvbkNsb2NrTm9kZSIsIlBlcmZvcm1hbmNlVGltZXNOb2RlIiwiUGxheUJ1dHRvbkdyb3VwIiwiRW52aXJvbm1lbnRQYW5lbCIsImNvbnN0cnVjdG9yIiwibW9kZWwiLCJidW5ueUltYWdlTWFwIiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsInhNYXJnaW4iLCJ5TWFyZ2luIiwiY29ybmVyUmFkaXVzIiwiZmlsbCIsInN0cm9rZSIsInBoZXRpb1Zpc2libGVQcm9wZXJ0eUluc3RydW1lbnRlZCIsImVudmlyb25tZW50Tm9kZSIsInRhbmRlbSIsImNyZWF0ZVRhbmRlbSIsImdlbmVyYXRpb25DbG9ja05vZGUiLCJnZW5lcmF0aW9uQ2xvY2siLCJmb29kIiwiZW5hYmxlZFByb3BlcnR5Iiwid29sZkNvbGxlY3Rpb24iLCJjZW50ZXJYIiwidG9wIiwiRU5WSVJPTk1FTlRfRElTUExBWV9ZX01BUkdJTiIsImVudmlyb25tZW50UmFkaW9CdXR0b25Hcm91cCIsImVudmlyb25tZW50UHJvcGVydHkiLCJyaWdodCIsIkVOVklST05NRU5UX0RJU1BMQVlfWF9NQVJHSU4iLCJ0aW1lVG9TdGFydE92ZXJQcm9wZXJ0eSIsIk9QVF9PVVQiLCJwbGF5QnV0dG9uR3JvdXAiLCJzaW11bGF0aW9uTW9kZVByb3BlcnR5IiwiYnVubnlDb2xsZWN0aW9uIiwibGl2ZUJ1bm5pZXMiLCJsZW5ndGhQcm9wZXJ0eSIsImFkZEFNYXRlIiwic3RhcnRPdmVyIiwiaW50ZXJydXB0U3VidHJlZUlucHV0IiwidmFsdWUiLCJ0aW1lIiwiYm91bmRzUHJvcGVydHkiLCJsaW5rIiwiYm90dG9tIiwiY29udGVudCIsImNoaWxkcmVuIiwic2hvd1RpbWVzIiwiYWRkQ2hpbGQiLCJ0aW1lVG9NYXRlUHJvcGVydHkiLCJsZWZ0Iiwic2ltdWxhdGlvbk1vZGUiLCJDT01QTEVURUQiLCJ1cGRhdGVTcHJpdGVzIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJFbnZpcm9ubWVudFBhbmVsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIxLTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIEVudmlyb25tZW50UGFuZWwgY29udGFpbnMgZXZlcnl0aGluZyB0aGF0J3MgaW4gdGhlIHBhbmVsIGF0IHRoZSB0b3AtY2VudGVyIG9mIHRoZSBzY3JlZW4uXHJcbiAqXHJcbiAqIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXHJcbiAqL1xyXG5cclxuaW1wb3J0IE51bWJlclByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvTnVtYmVyUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgb3B0aW9uaXplLCB7IEVtcHR5U2VsZk9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuaW1wb3J0IFBpY2tSZXF1aXJlZCBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvUGlja1JlcXVpcmVkLmpzJztcclxuaW1wb3J0IHsgTm9kZSwgTm9kZVRyYW5zbGF0aW9uT3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBQYW5lbCwgeyBQYW5lbE9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvUGFuZWwuanMnO1xyXG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uLy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xyXG5pbXBvcnQgbmF0dXJhbFNlbGVjdGlvbiBmcm9tICcuLi8uLi9uYXR1cmFsU2VsZWN0aW9uLmpzJztcclxuaW1wb3J0IE5hdHVyYWxTZWxlY3Rpb25Nb2RlbCBmcm9tICcuLi9tb2RlbC9OYXR1cmFsU2VsZWN0aW9uTW9kZWwuanMnO1xyXG5pbXBvcnQgU2ltdWxhdGlvbk1vZGUgZnJvbSAnLi4vbW9kZWwvU2ltdWxhdGlvbk1vZGUuanMnO1xyXG5pbXBvcnQgTmF0dXJhbFNlbGVjdGlvbkNvbnN0YW50cyBmcm9tICcuLi9OYXR1cmFsU2VsZWN0aW9uQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IE5hdHVyYWxTZWxlY3Rpb25RdWVyeVBhcmFtZXRlcnMgZnJvbSAnLi4vTmF0dXJhbFNlbGVjdGlvblF1ZXJ5UGFyYW1ldGVycy5qcyc7XHJcbmltcG9ydCBOYXR1cmFsU2VsZWN0aW9uVXRpbHMgZnJvbSAnLi4vTmF0dXJhbFNlbGVjdGlvblV0aWxzLmpzJztcclxuaW1wb3J0IEJ1bm55SW1hZ2VNYXAgZnJvbSAnLi9CdW5ueUltYWdlTWFwLmpzJztcclxuaW1wb3J0IEVudmlyb25tZW50Tm9kZSBmcm9tICcuL2Vudmlyb25tZW50L0Vudmlyb25tZW50Tm9kZS5qcyc7XHJcbmltcG9ydCBFbnZpcm9ubWVudFJhZGlvQnV0dG9uR3JvdXAgZnJvbSAnLi9FbnZpcm9ubWVudFJhZGlvQnV0dG9uR3JvdXAuanMnO1xyXG5pbXBvcnQgR2VuZXJhdGlvbkNsb2NrTm9kZSBmcm9tICcuL0dlbmVyYXRpb25DbG9ja05vZGUuanMnO1xyXG5pbXBvcnQgUGVyZm9ybWFuY2VUaW1lc05vZGUgZnJvbSAnLi9QZXJmb3JtYW5jZVRpbWVzTm9kZS5qcyc7XHJcbmltcG9ydCBQbGF5QnV0dG9uR3JvdXAgZnJvbSAnLi9QbGF5QnV0dG9uR3JvdXAuanMnO1xyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IEVtcHR5U2VsZk9wdGlvbnM7XHJcblxyXG50eXBlIEVudmlyb25tZW50UGFuZWxPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBOb2RlVHJhbnNsYXRpb25PcHRpb25zICYgUGlja1JlcXVpcmVkPFBhbmVsT3B0aW9ucywgJ3RhbmRlbSc+O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW52aXJvbm1lbnRQYW5lbCBleHRlbmRzIFBhbmVsIHtcclxuXHJcbiAgcHJpdmF0ZSByZWFkb25seSBlbnZpcm9ubWVudE5vZGU6IEVudmlyb25tZW50Tm9kZTtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBtb2RlbDogTmF0dXJhbFNlbGVjdGlvbk1vZGVsLCBidW5ueUltYWdlTWFwOiBCdW5ueUltYWdlTWFwLCBwcm92aWRlZE9wdGlvbnM6IEVudmlyb25tZW50UGFuZWxPcHRpb25zICkge1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8RW52aXJvbm1lbnRQYW5lbE9wdGlvbnMsIFNlbGZPcHRpb25zLCBQYW5lbE9wdGlvbnM+KCkoIHtcclxuXHJcbiAgICAgIC8vIFBhbmVsT3B0aW9uc1xyXG4gICAgICB4TWFyZ2luOiAwLFxyXG4gICAgICB5TWFyZ2luOiAwLFxyXG4gICAgICBjb3JuZXJSYWRpdXM6IDAsXHJcbiAgICAgIGZpbGw6IG51bGwsXHJcbiAgICAgIHN0cm9rZTogbnVsbCxcclxuICAgICAgcGhldGlvVmlzaWJsZVByb3BlcnR5SW5zdHJ1bWVudGVkOiBmYWxzZVxyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgLy8gV2hlcmUgdGhlIGJ1bm5pZXMsIGZvb2QsIGV0Yy4gYXJlIGRpc3BsYXllZFxyXG4gICAgY29uc3QgZW52aXJvbm1lbnROb2RlID0gbmV3IEVudmlyb25tZW50Tm9kZSggbW9kZWwsIGJ1bm55SW1hZ2VNYXAsIHtcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdlbnZpcm9ubWVudE5vZGUnIClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBHZW5lcmF0aW9uIGNsb2NrXHJcbiAgICBjb25zdCBnZW5lcmF0aW9uQ2xvY2tOb2RlID0gbmV3IEdlbmVyYXRpb25DbG9ja05vZGUoIG1vZGVsLmdlbmVyYXRpb25DbG9jayxcclxuICAgICAgbW9kZWwuZm9vZC5lbmFibGVkUHJvcGVydHksIG1vZGVsLndvbGZDb2xsZWN0aW9uLmVuYWJsZWRQcm9wZXJ0eSwge1xyXG4gICAgICAgIGNlbnRlclg6IGVudmlyb25tZW50Tm9kZS5jZW50ZXJYLFxyXG4gICAgICAgIHRvcDogZW52aXJvbm1lbnROb2RlLnRvcCArIE5hdHVyYWxTZWxlY3Rpb25Db25zdGFudHMuRU5WSVJPTk1FTlRfRElTUExBWV9ZX01BUkdJTiAtIDMsXHJcbiAgICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdnZW5lcmF0aW9uQ2xvY2tOb2RlJyApXHJcbiAgICAgIH0gKTtcclxuXHJcbiAgICAvLyBFbnZpcm9ubWVudCByYWRpbyBidXR0b25zXHJcbiAgICBjb25zdCBlbnZpcm9ubWVudFJhZGlvQnV0dG9uR3JvdXAgPSBuZXcgRW52aXJvbm1lbnRSYWRpb0J1dHRvbkdyb3VwKCBtb2RlbC5lbnZpcm9ubWVudFByb3BlcnR5LCB7XHJcbiAgICAgIHJpZ2h0OiBlbnZpcm9ubWVudE5vZGUucmlnaHQgLSBOYXR1cmFsU2VsZWN0aW9uQ29uc3RhbnRzLkVOVklST05NRU5UX0RJU1BMQVlfWF9NQVJHSU4sXHJcbiAgICAgIHRvcDogZW52aXJvbm1lbnROb2RlLnRvcCArIE5hdHVyYWxTZWxlY3Rpb25Db25zdGFudHMuRU5WSVJPTk1FTlRfRElTUExBWV9ZX01BUkdJTixcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdlbnZpcm9ubWVudFJhZGlvQnV0dG9uR3JvdXAnIClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBUaGUgdGltZSB0aGF0IGl0IHRvb2sgdG8gZXhlY3V0ZSB0aGUgJ1N0YXJ0IE92ZXInIGJ1dHRvbiBjYWxsYmFjaywgaW4gbXNcclxuICAgIC8vIEZvciBwZXJmb3JtYW5jZSBwcm9maWxpbmcsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvbmF0dXJhbC1zZWxlY3Rpb24vaXNzdWVzLzE0MFxyXG4gICAgY29uc3QgdGltZVRvU3RhcnRPdmVyUHJvcGVydHkgPSBuZXcgTnVtYmVyUHJvcGVydHkoIDAsIHtcclxuICAgICAgdGFuZGVtOiBUYW5kZW0uT1BUX09VVFxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIFRoZSBkaWZmZXJlbnQgYnV0dG9ucyB0aGF0IGNhbiBiZSB1c2VkIHRvIG1ha2UgdGhlIHNpbXVsYXRpb24gYmVnaW4gcGxheWluZy5cclxuICAgIGNvbnN0IHBsYXlCdXR0b25Hcm91cCA9IG5ldyBQbGF5QnV0dG9uR3JvdXAoXHJcbiAgICAgIG1vZGVsLnNpbXVsYXRpb25Nb2RlUHJvcGVydHksXHJcbiAgICAgIG1vZGVsLmJ1bm55Q29sbGVjdGlvbi5saXZlQnVubmllcy5sZW5ndGhQcm9wZXJ0eSwge1xyXG5cclxuICAgICAgICAvLyBDYWxsYmFjayBmb3IgdGhlICdBZGQgYSBNYXRlJyBidXR0b25cclxuICAgICAgICBhZGRBTWF0ZTogKCkgPT4gbW9kZWwuYWRkQU1hdGUoKSxcclxuXHJcbiAgICAgICAgLy8gQ2FsbGJhY2sgZm9yIHRoZSAnU3RhcnQgT3ZlcicgYnV0dG9uLCB3aXRoIHBlcmZvcm1hbmNlIHByb2ZpbGluZyxcclxuICAgICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL25hdHVyYWwtc2VsZWN0aW9uL2lzc3Vlcy8xNDBcclxuICAgICAgICBzdGFydE92ZXI6ICgpID0+IHtcclxuXHJcbiAgICAgICAgICAvLyBMaWtlICdSZXNldCBBbGwnLCBjYW5jZWwgYW55IGludGVyYWN0aW9ucyB0aGF0IGFyZSBpbiBwcm9ncmVzcy5cclxuICAgICAgICAgIHRoaXMuaW50ZXJydXB0U3VidHJlZUlucHV0KCk7XHJcblxyXG4gICAgICAgICAgdGltZVRvU3RhcnRPdmVyUHJvcGVydHkudmFsdWUgPSBOYXR1cmFsU2VsZWN0aW9uVXRpbHMudGltZSggKCkgPT4gbW9kZWwuc3RhcnRPdmVyKCkgKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAncGxheUJ1dHRvbkdyb3VwJyApXHJcbiAgICAgIH0gKTtcclxuXHJcbiAgICAvLyBCdXR0b25zIGF0IGNlbnRlci1ib3R0b20sIGFkanVzdGVkIGlmIHRoZWlyIHRleHQgbGFiZWxzIGNoYW5nZSBkeW5hbWljYWxseVxyXG4gICAgcGxheUJ1dHRvbkdyb3VwLmJvdW5kc1Byb3BlcnR5LmxpbmsoICgpID0+IHtcclxuICAgICAgcGxheUJ1dHRvbkdyb3VwLmNlbnRlclggPSBlbnZpcm9ubWVudE5vZGUuY2VudGVyWDtcclxuICAgICAgcGxheUJ1dHRvbkdyb3VwLmJvdHRvbSA9IGVudmlyb25tZW50Tm9kZS5ib3R0b20gLSBOYXR1cmFsU2VsZWN0aW9uQ29uc3RhbnRzLkVOVklST05NRU5UX0RJU1BMQVlfWV9NQVJHSU47XHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgY29udGVudCA9IG5ldyBOb2RlKCB7XHJcbiAgICAgIGNoaWxkcmVuOiBbIGVudmlyb25tZW50Tm9kZSwgZ2VuZXJhdGlvbkNsb2NrTm9kZSwgZW52aXJvbm1lbnRSYWRpb0J1dHRvbkdyb3VwLCBwbGF5QnV0dG9uR3JvdXAgXVxyXG4gICAgfSApO1xyXG5cclxuICAgIHN1cGVyKCBjb250ZW50LCBvcHRpb25zICk7XHJcblxyXG4gICAgLy8gU2hvdyBwZXJmb3JtYW5jZSBwcm9maWxpbmcgaW4gdGhlIHVwcGVyLWxlZnQgY29ybmVyIG9mIHRoZSBlbnZpcm9ubWVudCwgYW5kIGluIHRoZSBjb25zb2xlLlxyXG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9uYXR1cmFsLXNlbGVjdGlvbi9pc3N1ZXMvNjAgYW5kIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9uYXR1cmFsLXNlbGVjdGlvbi9pc3N1ZXMvMTQwXHJcbiAgICBpZiAoIE5hdHVyYWxTZWxlY3Rpb25RdWVyeVBhcmFtZXRlcnMuc2hvd1RpbWVzICkge1xyXG4gICAgICB0aGlzLmFkZENoaWxkKCBuZXcgUGVyZm9ybWFuY2VUaW1lc05vZGUoIG1vZGVsLnRpbWVUb01hdGVQcm9wZXJ0eSwgdGltZVRvU3RhcnRPdmVyUHJvcGVydHksIHtcclxuICAgICAgICBsZWZ0OiBlbnZpcm9ubWVudE5vZGUubGVmdCArIDUsXHJcbiAgICAgICAgdG9wOiBlbnZpcm9ubWVudE5vZGUudG9wICsgNVxyXG4gICAgICB9ICkgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTaW11bGF0aW9uIG1vZGUgZGV0ZXJtaW5lcyB3aGljaCBVSSBjb21wb25lbnRzIGFyZSBlbmFibGVkLiB1bmxpbmsgaXMgbm90IG5lY2Vzc2FyeS5cclxuICAgIG1vZGVsLnNpbXVsYXRpb25Nb2RlUHJvcGVydHkubGluayggc2ltdWxhdGlvbk1vZGUgPT4ge1xyXG4gICAgICBlbnZpcm9ubWVudFJhZGlvQnV0dG9uR3JvdXAuZW5hYmxlZFByb3BlcnR5LnZhbHVlID0gKCBzaW11bGF0aW9uTW9kZSAhPT0gU2ltdWxhdGlvbk1vZGUuQ09NUExFVEVEICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5lbnZpcm9ubWVudE5vZGUgPSBlbnZpcm9ubWVudE5vZGU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBVcGRhdGVzIHNwcml0ZXMgdG8gbWF0Y2ggdGhlIG1vZGVsLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB1cGRhdGVTcHJpdGVzKCk6IHZvaWQge1xyXG4gICAgdGhpcy5lbnZpcm9ubWVudE5vZGUudXBkYXRlU3ByaXRlcygpO1xyXG4gIH1cclxufVxyXG5cclxubmF0dXJhbFNlbGVjdGlvbi5yZWdpc3RlciggJ0Vudmlyb25tZW50UGFuZWwnLCBFbnZpcm9ubWVudFBhbmVsICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7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