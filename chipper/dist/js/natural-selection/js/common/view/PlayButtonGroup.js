// Copyright 2020-2022, University of Colorado Boulder

/**
 * PlayButtonGroup contains the buttons that can be used to make the simulation begin playing. These buttons are
 * mutually exclusive - at most 1 is visible, depending on the state of the simulation.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import Multilink from '../../../../axon/js/Multilink.js';
import stepTimer from '../../../../axon/js/stepTimer.js';
import optionize, { combineOptions } from '../../../../phet-core/js/optionize.js';
import { Node, Text } from '../../../../scenery/js/imports.js';
import RectangularPushButton from '../../../../sun/js/buttons/RectangularPushButton.js';
import naturalSelection from '../../naturalSelection.js';
import NaturalSelectionStrings from '../../NaturalSelectionStrings.js';
import SimulationMode from '../model/SimulationMode.js';
import NaturalSelectionColors from '../NaturalSelectionColors.js';
import NaturalSelectionConstants from '../NaturalSelectionConstants.js';
export default class PlayButtonGroup extends Node {
  constructor(simulationModeProperty, bunnyCountProperty, providedOptions) {
    const options = optionize()({
      // SelfOptions
      addAMate: _.noop,
      play: _.noop,
      startOver: _.noop
    }, providedOptions);

    // 'Add a Mate' push button, for when the initial population consists of a single bunny.
    const addAMateButton = new TextPushButton(NaturalSelectionStrings.addAMateStringProperty, {
      listener: () => {
        options.addAMate();
        simulationModeProperty.value = SimulationMode.ACTIVE;
      },
      tandem: options.tandem.createTandem('addAMateButton')
    });

    // 'Play' push button, for when the initial population consists of more than one bunny.
    const playButton = new TextPushButton(NaturalSelectionStrings.playStringProperty, {
      listener: () => {
        options.play();
        simulationModeProperty.value = SimulationMode.ACTIVE;
      },
      tandem: options.tandem.createTandem('playButton')
    });

    // 'Start Over' push button, displayed after the game ends (bunnie take over the world, or all bunnies die),
    // while the user is reviewing the final state.
    const startOverButton = new TextPushButton(NaturalSelectionStrings.startOverStringProperty, {
      listener: () => {
        options.startOver();
        simulationModeProperty.value = SimulationMode.STAGED;
      },
      tandem: options.tandem.createTandem('startOverButton')
    });
    options.children = [addAMateButton, playButton, startOverButton];
    super(options);

    // Make all buttons have the same center
    Multilink.multilink([addAMateButton.boundsProperty, playButton.boundsProperty, startOverButton.boundsProperty], () => {
      playButton.center = addAMateButton.center;
      startOverButton.center = addAMateButton.center;
    });

    // Make at most 1 button visible. unlink is not necessary.
    simulationModeProperty.link(simulationMode => {
      // start with all buttons hidden
      addAMateButton.visible = false;
      playButton.visible = false;
      startOverButton.visible = false;
      if (simulationMode === SimulationMode.STAGED) {
        // Show 'Add a Mate' or 'Play' button, depending on the size of the population.
        // Make one of these buttons visible on the next frame, so that a double-click on the 'Start Over' button
        // doesn't fire the button that is made visible. See https://github.com/phetsims/natural-selection/issues/166
        const bunnyCount = bunnyCountProperty.value;
        stepTimer.runOnNextTick(() => {
          // Checking simulationModeProperty to make sure it hasn't changed again before this callback fires.
          // See https://github.com/phetsims/natural-selection/issues/235
          if (simulationModeProperty.value === SimulationMode.STAGED) {
            addAMateButton.visible = bunnyCount === 1;
            playButton.visible = bunnyCount > 1;
          }
        });
      } else if (simulationMode === SimulationMode.ACTIVE) {
        // do nothing, all buttons remain hidden
      } else if (simulationMode === SimulationMode.COMPLETED) {
        // Show 'Start Over' button.
        startOverButton.visible = true;
      } else {
        throw new Error(`unsupported simulationMode: ${simulationMode}`);
      }
    });
  }
  dispose() {
    assert && assert(false, 'PlayButtonGroup does not support dispose');
    super.dispose();
  }
}
class TextPushButton extends RectangularPushButton {
  constructor(stringProperty, providedOptions) {
    const options = optionize()({
      // SelfOptions
      textOptions: {
        font: NaturalSelectionConstants.PUSH_BUTTON_FONT,
        maxWidth: 150 // determined empirically
      },

      // RectangularPushButtonOptions
      baseColor: NaturalSelectionColors.PLAY_BUTTON,
      cornerRadius: 5,
      xMargin: 12,
      yMargin: 8,
      phetioReadOnly: true // because sim state controls when this button is visible
    }, providedOptions);
    options.content = new Text(stringProperty, combineOptions({}, options.textOptions, {
      tandem: options.tandem.createTandem('labelText')
    }));
    super(options);
  }
}
naturalSelection.register('PlayButtonGroup', PlayButtonGroup);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNdWx0aWxpbmsiLCJzdGVwVGltZXIiLCJvcHRpb25pemUiLCJjb21iaW5lT3B0aW9ucyIsIk5vZGUiLCJUZXh0IiwiUmVjdGFuZ3VsYXJQdXNoQnV0dG9uIiwibmF0dXJhbFNlbGVjdGlvbiIsIk5hdHVyYWxTZWxlY3Rpb25TdHJpbmdzIiwiU2ltdWxhdGlvbk1vZGUiLCJOYXR1cmFsU2VsZWN0aW9uQ29sb3JzIiwiTmF0dXJhbFNlbGVjdGlvbkNvbnN0YW50cyIsIlBsYXlCdXR0b25Hcm91cCIsImNvbnN0cnVjdG9yIiwic2ltdWxhdGlvbk1vZGVQcm9wZXJ0eSIsImJ1bm55Q291bnRQcm9wZXJ0eSIsInByb3ZpZGVkT3B0aW9ucyIsIm9wdGlvbnMiLCJhZGRBTWF0ZSIsIl8iLCJub29wIiwicGxheSIsInN0YXJ0T3ZlciIsImFkZEFNYXRlQnV0dG9uIiwiVGV4dFB1c2hCdXR0b24iLCJhZGRBTWF0ZVN0cmluZ1Byb3BlcnR5IiwibGlzdGVuZXIiLCJ2YWx1ZSIsIkFDVElWRSIsInRhbmRlbSIsImNyZWF0ZVRhbmRlbSIsInBsYXlCdXR0b24iLCJwbGF5U3RyaW5nUHJvcGVydHkiLCJzdGFydE92ZXJCdXR0b24iLCJzdGFydE92ZXJTdHJpbmdQcm9wZXJ0eSIsIlNUQUdFRCIsImNoaWxkcmVuIiwibXVsdGlsaW5rIiwiYm91bmRzUHJvcGVydHkiLCJjZW50ZXIiLCJsaW5rIiwic2ltdWxhdGlvbk1vZGUiLCJ2aXNpYmxlIiwiYnVubnlDb3VudCIsInJ1bk9uTmV4dFRpY2siLCJDT01QTEVURUQiLCJFcnJvciIsImRpc3Bvc2UiLCJhc3NlcnQiLCJzdHJpbmdQcm9wZXJ0eSIsInRleHRPcHRpb25zIiwiZm9udCIsIlBVU0hfQlVUVE9OX0ZPTlQiLCJtYXhXaWR0aCIsImJhc2VDb2xvciIsIlBMQVlfQlVUVE9OIiwiY29ybmVyUmFkaXVzIiwieE1hcmdpbiIsInlNYXJnaW4iLCJwaGV0aW9SZWFkT25seSIsImNvbnRlbnQiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlBsYXlCdXR0b25Hcm91cC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMC0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBQbGF5QnV0dG9uR3JvdXAgY29udGFpbnMgdGhlIGJ1dHRvbnMgdGhhdCBjYW4gYmUgdXNlZCB0byBtYWtlIHRoZSBzaW11bGF0aW9uIGJlZ2luIHBsYXlpbmcuIFRoZXNlIGJ1dHRvbnMgYXJlXHJcbiAqIG11dHVhbGx5IGV4Y2x1c2l2ZSAtIGF0IG1vc3QgMSBpcyB2aXNpYmxlLCBkZXBlbmRpbmcgb24gdGhlIHN0YXRlIG9mIHRoZSBzaW11bGF0aW9uLlxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCBFbnVtZXJhdGlvblByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvRW51bWVyYXRpb25Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBNdWx0aWxpbmsgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9NdWx0aWxpbmsuanMnO1xyXG5pbXBvcnQgUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBzdGVwVGltZXIgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9zdGVwVGltZXIuanMnO1xyXG5pbXBvcnQgVFJlYWRPbmx5UHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9UUmVhZE9ubHlQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBvcHRpb25pemUsIHsgY29tYmluZU9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuaW1wb3J0IFBpY2tSZXF1aXJlZCBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvUGlja1JlcXVpcmVkLmpzJztcclxuaW1wb3J0IFN0cmljdE9taXQgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL1N0cmljdE9taXQuanMnO1xyXG5pbXBvcnQgeyBOb2RlLCBOb2RlT3B0aW9ucywgVGV4dCwgVGV4dE9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgUmVjdGFuZ3VsYXJQdXNoQnV0dG9uLCB7IFJlY3Rhbmd1bGFyUHVzaEJ1dHRvbk9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvYnV0dG9ucy9SZWN0YW5ndWxhclB1c2hCdXR0b24uanMnO1xyXG5pbXBvcnQgbmF0dXJhbFNlbGVjdGlvbiBmcm9tICcuLi8uLi9uYXR1cmFsU2VsZWN0aW9uLmpzJztcclxuaW1wb3J0IE5hdHVyYWxTZWxlY3Rpb25TdHJpbmdzIGZyb20gJy4uLy4uL05hdHVyYWxTZWxlY3Rpb25TdHJpbmdzLmpzJztcclxuaW1wb3J0IFNpbXVsYXRpb25Nb2RlIGZyb20gJy4uL21vZGVsL1NpbXVsYXRpb25Nb2RlLmpzJztcclxuaW1wb3J0IE5hdHVyYWxTZWxlY3Rpb25Db2xvcnMgZnJvbSAnLi4vTmF0dXJhbFNlbGVjdGlvbkNvbG9ycy5qcyc7XHJcbmltcG9ydCBOYXR1cmFsU2VsZWN0aW9uQ29uc3RhbnRzIGZyb20gJy4uL05hdHVyYWxTZWxlY3Rpb25Db25zdGFudHMuanMnO1xyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IHtcclxuXHJcbiAgLy8gY2FsbGJhY2tzIGZvciB0aGUgYnV0dG9uc1xyXG4gIGFkZEFNYXRlPzogKCkgPT4gdm9pZDtcclxuICBwbGF5PzogKCkgPT4gdm9pZDtcclxuICBzdGFydE92ZXI/OiAoKSA9PiB2b2lkO1xyXG59O1xyXG5cclxudHlwZSBQbGF5QnV0dG9uR3JvdXBPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBQaWNrUmVxdWlyZWQ8Tm9kZU9wdGlvbnMsICd0YW5kZW0nPjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYXlCdXR0b25Hcm91cCBleHRlbmRzIE5vZGUge1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIHNpbXVsYXRpb25Nb2RlUHJvcGVydHk6IEVudW1lcmF0aW9uUHJvcGVydHk8U2ltdWxhdGlvbk1vZGU+LFxyXG4gICAgICAgICAgICAgICAgICAgICAgYnVubnlDb3VudFByb3BlcnR5OiBQcm9wZXJ0eTxudW1iZXI+LCBwcm92aWRlZE9wdGlvbnM6IFBsYXlCdXR0b25Hcm91cE9wdGlvbnMgKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxQbGF5QnV0dG9uR3JvdXBPcHRpb25zLCBTZWxmT3B0aW9ucywgTm9kZU9wdGlvbnM+KCkoIHtcclxuXHJcbiAgICAgIC8vIFNlbGZPcHRpb25zXHJcbiAgICAgIGFkZEFNYXRlOiBfLm5vb3AsXHJcbiAgICAgIHBsYXk6IF8ubm9vcCxcclxuICAgICAgc3RhcnRPdmVyOiBfLm5vb3BcclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIC8vICdBZGQgYSBNYXRlJyBwdXNoIGJ1dHRvbiwgZm9yIHdoZW4gdGhlIGluaXRpYWwgcG9wdWxhdGlvbiBjb25zaXN0cyBvZiBhIHNpbmdsZSBidW5ueS5cclxuICAgIGNvbnN0IGFkZEFNYXRlQnV0dG9uID0gbmV3IFRleHRQdXNoQnV0dG9uKCBOYXR1cmFsU2VsZWN0aW9uU3RyaW5ncy5hZGRBTWF0ZVN0cmluZ1Byb3BlcnR5LCB7XHJcbiAgICAgIGxpc3RlbmVyOiAoKSA9PiB7XHJcbiAgICAgICAgb3B0aW9ucy5hZGRBTWF0ZSgpO1xyXG4gICAgICAgIHNpbXVsYXRpb25Nb2RlUHJvcGVydHkudmFsdWUgPSBTaW11bGF0aW9uTW9kZS5BQ1RJVkU7XHJcbiAgICAgIH0sXHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnYWRkQU1hdGVCdXR0b24nIClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyAnUGxheScgcHVzaCBidXR0b24sIGZvciB3aGVuIHRoZSBpbml0aWFsIHBvcHVsYXRpb24gY29uc2lzdHMgb2YgbW9yZSB0aGFuIG9uZSBidW5ueS5cclxuICAgIGNvbnN0IHBsYXlCdXR0b24gPSBuZXcgVGV4dFB1c2hCdXR0b24oIE5hdHVyYWxTZWxlY3Rpb25TdHJpbmdzLnBsYXlTdHJpbmdQcm9wZXJ0eSwge1xyXG4gICAgICBsaXN0ZW5lcjogKCkgPT4ge1xyXG4gICAgICAgIG9wdGlvbnMucGxheSgpO1xyXG4gICAgICAgIHNpbXVsYXRpb25Nb2RlUHJvcGVydHkudmFsdWUgPSBTaW11bGF0aW9uTW9kZS5BQ1RJVkU7XHJcbiAgICAgIH0sXHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAncGxheUJ1dHRvbicgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vICdTdGFydCBPdmVyJyBwdXNoIGJ1dHRvbiwgZGlzcGxheWVkIGFmdGVyIHRoZSBnYW1lIGVuZHMgKGJ1bm5pZSB0YWtlIG92ZXIgdGhlIHdvcmxkLCBvciBhbGwgYnVubmllcyBkaWUpLFxyXG4gICAgLy8gd2hpbGUgdGhlIHVzZXIgaXMgcmV2aWV3aW5nIHRoZSBmaW5hbCBzdGF0ZS5cclxuICAgIGNvbnN0IHN0YXJ0T3ZlckJ1dHRvbiA9IG5ldyBUZXh0UHVzaEJ1dHRvbiggTmF0dXJhbFNlbGVjdGlvblN0cmluZ3Muc3RhcnRPdmVyU3RyaW5nUHJvcGVydHksIHtcclxuICAgICAgbGlzdGVuZXI6ICgpID0+IHtcclxuICAgICAgICBvcHRpb25zLnN0YXJ0T3ZlcigpO1xyXG4gICAgICAgIHNpbXVsYXRpb25Nb2RlUHJvcGVydHkudmFsdWUgPSBTaW11bGF0aW9uTW9kZS5TVEFHRUQ7XHJcbiAgICAgIH0sXHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnc3RhcnRPdmVyQnV0dG9uJyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgb3B0aW9ucy5jaGlsZHJlbiA9IFsgYWRkQU1hdGVCdXR0b24sIHBsYXlCdXR0b24sIHN0YXJ0T3ZlckJ1dHRvbiBdO1xyXG5cclxuICAgIHN1cGVyKCBvcHRpb25zICk7XHJcblxyXG4gICAgLy8gTWFrZSBhbGwgYnV0dG9ucyBoYXZlIHRoZSBzYW1lIGNlbnRlclxyXG4gICAgTXVsdGlsaW5rLm11bHRpbGluayggWyBhZGRBTWF0ZUJ1dHRvbi5ib3VuZHNQcm9wZXJ0eSwgcGxheUJ1dHRvbi5ib3VuZHNQcm9wZXJ0eSwgc3RhcnRPdmVyQnV0dG9uLmJvdW5kc1Byb3BlcnR5IF0sXHJcbiAgICAgICgpID0+IHtcclxuICAgICAgICBwbGF5QnV0dG9uLmNlbnRlciA9IGFkZEFNYXRlQnV0dG9uLmNlbnRlcjtcclxuICAgICAgICBzdGFydE92ZXJCdXR0b24uY2VudGVyID0gYWRkQU1hdGVCdXR0b24uY2VudGVyO1xyXG4gICAgICB9ICk7XHJcblxyXG4gICAgLy8gTWFrZSBhdCBtb3N0IDEgYnV0dG9uIHZpc2libGUuIHVubGluayBpcyBub3QgbmVjZXNzYXJ5LlxyXG4gICAgc2ltdWxhdGlvbk1vZGVQcm9wZXJ0eS5saW5rKCBzaW11bGF0aW9uTW9kZSA9PiB7XHJcblxyXG4gICAgICAvLyBzdGFydCB3aXRoIGFsbCBidXR0b25zIGhpZGRlblxyXG4gICAgICBhZGRBTWF0ZUJ1dHRvbi52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgIHBsYXlCdXR0b24udmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICBzdGFydE92ZXJCdXR0b24udmlzaWJsZSA9IGZhbHNlO1xyXG5cclxuICAgICAgaWYgKCBzaW11bGF0aW9uTW9kZSA9PT0gU2ltdWxhdGlvbk1vZGUuU1RBR0VEICkge1xyXG5cclxuICAgICAgICAgIC8vIFNob3cgJ0FkZCBhIE1hdGUnIG9yICdQbGF5JyBidXR0b24sIGRlcGVuZGluZyBvbiB0aGUgc2l6ZSBvZiB0aGUgcG9wdWxhdGlvbi5cclxuICAgICAgICAgIC8vIE1ha2Ugb25lIG9mIHRoZXNlIGJ1dHRvbnMgdmlzaWJsZSBvbiB0aGUgbmV4dCBmcmFtZSwgc28gdGhhdCBhIGRvdWJsZS1jbGljayBvbiB0aGUgJ1N0YXJ0IE92ZXInIGJ1dHRvblxyXG4gICAgICAgICAgLy8gZG9lc24ndCBmaXJlIHRoZSBidXR0b24gdGhhdCBpcyBtYWRlIHZpc2libGUuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvbmF0dXJhbC1zZWxlY3Rpb24vaXNzdWVzLzE2NlxyXG4gICAgICAgICAgY29uc3QgYnVubnlDb3VudCA9IGJ1bm55Q291bnRQcm9wZXJ0eS52YWx1ZTtcclxuICAgICAgICAgIHN0ZXBUaW1lci5ydW5Pbk5leHRUaWNrKCAoKSA9PiB7XHJcblxyXG4gICAgICAgICAgICAvLyBDaGVja2luZyBzaW11bGF0aW9uTW9kZVByb3BlcnR5IHRvIG1ha2Ugc3VyZSBpdCBoYXNuJ3QgY2hhbmdlZCBhZ2FpbiBiZWZvcmUgdGhpcyBjYWxsYmFjayBmaXJlcy5cclxuICAgICAgICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9uYXR1cmFsLXNlbGVjdGlvbi9pc3N1ZXMvMjM1XHJcbiAgICAgICAgICAgIGlmICggc2ltdWxhdGlvbk1vZGVQcm9wZXJ0eS52YWx1ZSA9PT0gU2ltdWxhdGlvbk1vZGUuU1RBR0VEICkge1xyXG4gICAgICAgICAgICAgIGFkZEFNYXRlQnV0dG9uLnZpc2libGUgPSAoIGJ1bm55Q291bnQgPT09IDEgKTtcclxuICAgICAgICAgICAgICBwbGF5QnV0dG9uLnZpc2libGUgPSAoIGJ1bm55Q291bnQgPiAxICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoIHNpbXVsYXRpb25Nb2RlID09PSBTaW11bGF0aW9uTW9kZS5BQ1RJVkUgKSB7XHJcbiAgICAgICAgICAvLyBkbyBub3RoaW5nLCBhbGwgYnV0dG9ucyByZW1haW4gaGlkZGVuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCBzaW11bGF0aW9uTW9kZSA9PT0gU2ltdWxhdGlvbk1vZGUuQ09NUExFVEVEICkge1xyXG5cclxuICAgICAgICAgIC8vIFNob3cgJ1N0YXJ0IE92ZXInIGJ1dHRvbi5cclxuICAgICAgICAgIHN0YXJ0T3ZlckJ1dHRvbi52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIGB1bnN1cHBvcnRlZCBzaW11bGF0aW9uTW9kZTogJHtzaW11bGF0aW9uTW9kZX1gICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG92ZXJyaWRlIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBmYWxzZSwgJ1BsYXlCdXR0b25Hcm91cCBkb2VzIG5vdCBzdXBwb3J0IGRpc3Bvc2UnICk7XHJcbiAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgfVxyXG59XHJcblxyXG50eXBlIFRleHRQdXNoQnV0dG9uU2VsZk9wdGlvbnMgPSB7XHJcbiAgdGV4dE9wdGlvbnM/OiBTdHJpY3RPbWl0PFRleHRPcHRpb25zLCAndGFuZGVtJz47XHJcbn07XHJcblxyXG50eXBlIFRleHRQdXNoQnV0dG9uT3B0aW9ucyA9IFRleHRQdXNoQnV0dG9uU2VsZk9wdGlvbnMgJlxyXG4gIFBpY2tSZXF1aXJlZDxSZWN0YW5ndWxhclB1c2hCdXR0b25PcHRpb25zLCAnbGlzdGVuZXInIHwgJ3RhbmRlbSc+O1xyXG5cclxuY2xhc3MgVGV4dFB1c2hCdXR0b24gZXh0ZW5kcyBSZWN0YW5ndWxhclB1c2hCdXR0b24ge1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIHN0cmluZ1Byb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxzdHJpbmc+LCBwcm92aWRlZE9wdGlvbnM6IFRleHRQdXNoQnV0dG9uT3B0aW9ucyApIHtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPFRleHRQdXNoQnV0dG9uT3B0aW9ucywgVGV4dFB1c2hCdXR0b25TZWxmT3B0aW9ucywgUmVjdGFuZ3VsYXJQdXNoQnV0dG9uT3B0aW9ucz4oKSgge1xyXG5cclxuICAgICAgLy8gU2VsZk9wdGlvbnNcclxuICAgICAgdGV4dE9wdGlvbnM6IHtcclxuICAgICAgICBmb250OiBOYXR1cmFsU2VsZWN0aW9uQ29uc3RhbnRzLlBVU0hfQlVUVE9OX0ZPTlQsXHJcbiAgICAgICAgbWF4V2lkdGg6IDE1MCAvLyBkZXRlcm1pbmVkIGVtcGlyaWNhbGx5XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvLyBSZWN0YW5ndWxhclB1c2hCdXR0b25PcHRpb25zXHJcbiAgICAgIGJhc2VDb2xvcjogTmF0dXJhbFNlbGVjdGlvbkNvbG9ycy5QTEFZX0JVVFRPTixcclxuICAgICAgY29ybmVyUmFkaXVzOiA1LFxyXG4gICAgICB4TWFyZ2luOiAxMixcclxuICAgICAgeU1hcmdpbjogOCxcclxuICAgICAgcGhldGlvUmVhZE9ubHk6IHRydWUgLy8gYmVjYXVzZSBzaW0gc3RhdGUgY29udHJvbHMgd2hlbiB0aGlzIGJ1dHRvbiBpcyB2aXNpYmxlXHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICBvcHRpb25zLmNvbnRlbnQgPSBuZXcgVGV4dCggc3RyaW5nUHJvcGVydHksIGNvbWJpbmVPcHRpb25zPFRleHRPcHRpb25zPigge30sIG9wdGlvbnMudGV4dE9wdGlvbnMsIHtcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdsYWJlbFRleHQnIClcclxuICAgIH0gKSApO1xyXG5cclxuICAgIHN1cGVyKCBvcHRpb25zICk7XHJcbiAgfVxyXG59XHJcblxyXG5uYXR1cmFsU2VsZWN0aW9uLnJlZ2lzdGVyKCAnUGxheUJ1dHRvbkdyb3VwJywgUGxheUJ1dHRvbkdyb3VwICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0EsT0FBT0EsU0FBUyxNQUFNLGtDQUFrQztBQUV4RCxPQUFPQyxT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