// Copyright 2020-2022, University of Colorado Boulder

/**
 * Genotype is the genetic blueprint for an individual bunny. It consists of a gene pair for each gene, and
 * can be abbreviated as a string of letters.  See the 'Genotype and Phenotype' section of model.md at
 * https://github.com/phetsims/natural-selection/blob/master/doc/model.md#genotype-and-phenotype
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import optionize from '../../../../phet-core/js/optionize.js';
import required from '../../../../phet-core/js/required.js';
import PhetioObject from '../../../../tandem/js/PhetioObject.js';
import IOType from '../../../../tandem/js/types/IOType.js';
import NullableIO from '../../../../tandem/js/types/NullableIO.js';
import StringIO from '../../../../tandem/js/types/StringIO.js';
import naturalSelection from '../../naturalSelection.js';
import Allele from './Allele.js';
import GenePair from './GenePair.js';
export default class Genotype extends PhetioObject {
  // optional mutation that modified this genotype

  constructor(genePool, providedOptions) {
    const options = optionize()({
      // SelfOptions
      fatherFurAllele: genePool.furGene.normalAllele,
      motherFurAllele: genePool.furGene.normalAllele,
      fatherEarsAllele: genePool.earsGene.normalAllele,
      motherEarsAllele: genePool.earsGene.normalAllele,
      fatherTeethAllele: genePool.teethGene.normalAllele,
      motherTeethAllele: genePool.teethGene.normalAllele,
      mutateFur: false,
      mutateEars: false,
      mutateTeeth: false,
      // PhetioObjectOptions
      phetioType: Genotype.GenotypeIO,
      phetioDocumentation: 'the genetic blueprint for a bunny'
    }, providedOptions);
    assert && assert(_.filter([options.mutateFur, options.mutateEars, options.mutateTeeth]).length <= 1, 'mutations are mutually exclusive');
    super(options);
    this.genePool = genePool;
    this.furGenePair = new GenePair(genePool.furGene, options.fatherFurAllele, options.motherFurAllele, {
      tandem: options.tandem.createTandem('furGenePair'),
      phetioDocumentation: 'gene pair that determines the fur trait'
    });
    this.earsGenePair = new GenePair(genePool.earsGene, options.fatherEarsAllele, options.motherEarsAllele, {
      tandem: options.tandem.createTandem('earsGenePair'),
      phetioDocumentation: 'gene pair that determines the ears trait'
    });
    this.teethGenePair = new GenePair(genePool.teethGene, options.fatherTeethAllele, options.motherTeethAllele, {
      tandem: options.tandem.createTandem('teethGenePair'),
      phetioDocumentation: 'gene pair that determines the teeth trait'
    });
    this.mutation = null;

    // After gene pairs have been created, apply an optional mutation. This ensures that an allele is inherited and
    // then modified, so that the distribution of alleles in the population is correct.
    if (options.mutateFur) {
      this.mutation = genePool.furGene.mutantAllele;
      this.furGenePair.mutate(this.mutation);
    }
    if (options.mutateEars) {
      this.mutation = genePool.earsGene.mutantAllele;
      this.earsGenePair.mutate(this.mutation);
    }
    if (options.mutateTeeth) {
      this.mutation = genePool.teethGene.mutantAllele;
      this.teethGenePair.mutate(this.mutation);
    }

    // The translated abbreviation of the Genotype. PhET-iO only, not used in brand=phet.
    // dispose is required.
    const abbreviationProperty = DerivedProperty.deriveAny([genePool.furGene.dominantAlleleProperty, genePool.earsGene.dominantAlleleProperty, genePool.teethGene.dominantAlleleProperty, ...this.getAbbreviationStringDependencies()], () => {
      return this.furGenePair.getGenotypeAbbreviation() + this.earsGenePair.getGenotypeAbbreviation() + this.teethGenePair.getGenotypeAbbreviation();
    }, {
      tandem: options.tandem.createTandem('abbreviationProperty'),
      phetioValueType: StringIO,
      phetioDocumentation: 'the abbreviation that describes the genotype, the empty string if there are no dominant alleles'
    });
    this.disposeGenotype = () => {
      this.furGenePair.dispose();
      this.earsGenePair.dispose();
      this.teethGenePair.dispose();
      abbreviationProperty.dispose();
    };
  }
  dispose() {
    this.disposeGenotype();
    super.dispose();
  }

  /**
   * Does this genotype contain a specific allele?
   */
  hasAllele(allele) {
    return this.furGenePair.hasAllele(allele) || this.earsGenePair.hasAllele(allele) || this.teethGenePair.hasAllele(allele);
  }

  /**
   * Converts a Genotype to its untranslated abbreviation, e.g. 'FfEEtt'.
   * This is intended for debugging only. Do not rely on the format!
   */
  toAbbreviation() {
    return this.furGenePair.getGenotypeAbbreviation(false) + this.earsGenePair.getGenotypeAbbreviation(false) + this.teethGenePair.getGenotypeAbbreviation(false);
  }

  /**
   * Gets the dependencies on dynamic strings that are used to derive the abbreviations for this genotype.
   * These strings may be changed via PhET-iO, or by changing the global localeProperty.
   */
  getAbbreviationStringDependencies() {
    return this.genePool.getGenotypeAbbreviationStringDependencies();
  }

  //--------------------------------------------------------------------------------------------------------------------
  // Below here are methods used by GenotypeIO to serialize PhET-iO state.
  //--------------------------------------------------------------------------------------------------------------------

  /**
   * Serializes this Genotype instance.
   */
  toStateObject() {
    return {
      mutation: NullableIO(Allele.AlleleIO).toStateObject(this.mutation)
      // furGenePair, earsGenePair, and teethGenePair are stateful and will be serialized automatically.
    };
  }

  /**
   * Restores Genotype stateObject after instantiation.
   */
  applyState(stateObject) {
    required(stateObject);
    this.mutation = required(NullableIO(Allele.AlleleIO).fromStateObject(stateObject.mutation));
  }

  /**
   * GenotypeIO handles PhET-iO serialization of Genotype.
   * It implements 'Dynamic element serialization', as described in the Serialization section of
   * https://github.com/phetsims/phet-io/blob/master/doc/phet-io-instrumentation-technical-guide.md#serialization
   */
  static GenotypeIO = new IOType('GenotypeIO', {
    valueType: Genotype,
    stateSchema: {
      mutation: NullableIO(Allele.AlleleIO)
    },
    toStateObject: genotype => genotype.toStateObject(),
    applyState: (genotype, stateObject) => genotype.applyState(stateObject)
  });
}
naturalSelection.register('Genotype', Genotype);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJvcHRpb25pemUiLCJyZXF1aXJlZCIsIlBoZXRpb09iamVjdCIsIklPVHlwZSIsIk51bGxhYmxlSU8iLCJTdHJpbmdJTyIsIm5hdHVyYWxTZWxlY3Rpb24iLCJBbGxlbGUiLCJHZW5lUGFpciIsIkdlbm90eXBlIiwiY29uc3RydWN0b3IiLCJnZW5lUG9vbCIsInByb3ZpZGVkT3B0aW9ucyIsIm9wdGlvbnMiLCJmYXRoZXJGdXJBbGxlbGUiLCJmdXJHZW5lIiwibm9ybWFsQWxsZWxlIiwibW90aGVyRnVyQWxsZWxlIiwiZmF0aGVyRWFyc0FsbGVsZSIsImVhcnNHZW5lIiwibW90aGVyRWFyc0FsbGVsZSIsImZhdGhlclRlZXRoQWxsZWxlIiwidGVldGhHZW5lIiwibW90aGVyVGVldGhBbGxlbGUiLCJtdXRhdGVGdXIiLCJtdXRhdGVFYXJzIiwibXV0YXRlVGVldGgiLCJwaGV0aW9UeXBlIiwiR2Vub3R5cGVJTyIsInBoZXRpb0RvY3VtZW50YXRpb24iLCJhc3NlcnQiLCJfIiwiZmlsdGVyIiwibGVuZ3RoIiwiZnVyR2VuZVBhaXIiLCJ0YW5kZW0iLCJjcmVhdGVUYW5kZW0iLCJlYXJzR2VuZVBhaXIiLCJ0ZWV0aEdlbmVQYWlyIiwibXV0YXRpb24iLCJtdXRhbnRBbGxlbGUiLCJtdXRhdGUiLCJhYmJyZXZpYXRpb25Qcm9wZXJ0eSIsImRlcml2ZUFueSIsImRvbWluYW50QWxsZWxlUHJvcGVydHkiLCJnZXRBYmJyZXZpYXRpb25TdHJpbmdEZXBlbmRlbmNpZXMiLCJnZXRHZW5vdHlwZUFiYnJldmlhdGlvbiIsInBoZXRpb1ZhbHVlVHlwZSIsImRpc3Bvc2VHZW5vdHlwZSIsImRpc3Bvc2UiLCJoYXNBbGxlbGUiLCJhbGxlbGUiLCJ0b0FiYnJldmlhdGlvbiIsImdldEdlbm90eXBlQWJicmV2aWF0aW9uU3RyaW5nRGVwZW5kZW5jaWVzIiwidG9TdGF0ZU9iamVjdCIsIkFsbGVsZUlPIiwiYXBwbHlTdGF0ZSIsInN0YXRlT2JqZWN0IiwiZnJvbVN0YXRlT2JqZWN0IiwidmFsdWVUeXBlIiwic3RhdGVTY2hlbWEiLCJnZW5vdHlwZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiR2Vub3R5cGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjAtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogR2Vub3R5cGUgaXMgdGhlIGdlbmV0aWMgYmx1ZXByaW50IGZvciBhbiBpbmRpdmlkdWFsIGJ1bm55LiBJdCBjb25zaXN0cyBvZiBhIGdlbmUgcGFpciBmb3IgZWFjaCBnZW5lLCBhbmRcclxuICogY2FuIGJlIGFiYnJldmlhdGVkIGFzIGEgc3RyaW5nIG9mIGxldHRlcnMuICBTZWUgdGhlICdHZW5vdHlwZSBhbmQgUGhlbm90eXBlJyBzZWN0aW9uIG9mIG1vZGVsLm1kIGF0XHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9uYXR1cmFsLXNlbGVjdGlvbi9ibG9iL21hc3Rlci9kb2MvbW9kZWwubWQjZ2Vub3R5cGUtYW5kLXBoZW5vdHlwZVxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCBEZXJpdmVkUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9EZXJpdmVkUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgb3B0aW9uaXplIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgcmVxdWlyZWQgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL3JlcXVpcmVkLmpzJztcclxuaW1wb3J0IFBpY2tSZXF1aXJlZCBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvUGlja1JlcXVpcmVkLmpzJztcclxuaW1wb3J0IFBoZXRpb09iamVjdCwgeyBQaGV0aW9PYmplY3RPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vLi4vdGFuZGVtL2pzL1BoZXRpb09iamVjdC5qcyc7XHJcbmltcG9ydCBJT1R5cGUgZnJvbSAnLi4vLi4vLi4vLi4vdGFuZGVtL2pzL3R5cGVzL0lPVHlwZS5qcyc7XHJcbmltcG9ydCBOdWxsYWJsZUlPIGZyb20gJy4uLy4uLy4uLy4uL3RhbmRlbS9qcy90eXBlcy9OdWxsYWJsZUlPLmpzJztcclxuaW1wb3J0IFN0cmluZ0lPIGZyb20gJy4uLy4uLy4uLy4uL3RhbmRlbS9qcy90eXBlcy9TdHJpbmdJTy5qcyc7XHJcbmltcG9ydCBuYXR1cmFsU2VsZWN0aW9uIGZyb20gJy4uLy4uL25hdHVyYWxTZWxlY3Rpb24uanMnO1xyXG5pbXBvcnQgQWxsZWxlLCB7IEFsbGVsZVN0YXRlT2JqZWN0IH0gZnJvbSAnLi9BbGxlbGUuanMnO1xyXG5pbXBvcnQgR2VuZVBhaXIgZnJvbSAnLi9HZW5lUGFpci5qcyc7XHJcbmltcG9ydCBHZW5lUG9vbCBmcm9tICcuL0dlbmVQb29sLmpzJztcclxuaW1wb3J0IFRSZWFkT25seVByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvVFJlYWRPbmx5UHJvcGVydHkuanMnO1xyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IHtcclxuXHJcbiAgLy8gYWxsZWxlcyB0aGF0IG1ha2UgdXAgdGhlIGdlbm90eXBlLCBhbGwgb2Ygd2hpY2ggZGVmYXVsdCB0byB0aGUgbm9ybWFsIGFsbGVsZVxyXG4gIGZhdGhlckZ1ckFsbGVsZT86IEFsbGVsZTtcclxuICBtb3RoZXJGdXJBbGxlbGU/OiBBbGxlbGU7XHJcbiAgZmF0aGVyRWFyc0FsbGVsZT86IEFsbGVsZTtcclxuICBtb3RoZXJFYXJzQWxsZWxlPzogQWxsZWxlO1xyXG4gIGZhdGhlclRlZXRoQWxsZWxlPzogQWxsZWxlO1xyXG4gIG1vdGhlclRlZXRoQWxsZWxlPzogQWxsZWxlO1xyXG5cclxuICAvLyB3aGljaCBnZW5lcyB0byBtdXRhdGVcclxuICBtdXRhdGVGdXI/OiBib29sZWFuO1xyXG4gIG11dGF0ZUVhcnM/OiBib29sZWFuO1xyXG4gIG11dGF0ZVRlZXRoPzogYm9vbGVhbjtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIEdlbm90eXBlT3B0aW9ucyA9IFNlbGZPcHRpb25zICYgUGlja1JlcXVpcmVkPFBoZXRpb09iamVjdE9wdGlvbnMsICd0YW5kZW0nPjtcclxuXHJcbnR5cGUgR2Vub3R5cGVTdGF0ZU9iamVjdCA9IHtcclxuICBtdXRhdGlvbjogQWxsZWxlU3RhdGVPYmplY3Q7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHZW5vdHlwZSBleHRlbmRzIFBoZXRpb09iamVjdCB7XHJcblxyXG4gIHB1YmxpYyByZWFkb25seSBnZW5lUG9vbDogR2VuZVBvb2w7XHJcbiAgcHVibGljIHJlYWRvbmx5IGZ1ckdlbmVQYWlyOiBHZW5lUGFpcjtcclxuICBwdWJsaWMgcmVhZG9ubHkgZWFyc0dlbmVQYWlyOiBHZW5lUGFpcjtcclxuICBwdWJsaWMgcmVhZG9ubHkgdGVldGhHZW5lUGFpcjogR2VuZVBhaXI7XHJcblxyXG4gIC8vIG9wdGlvbmFsIG11dGF0aW9uIHRoYXQgbW9kaWZpZWQgdGhpcyBnZW5vdHlwZVxyXG4gIHB1YmxpYyBtdXRhdGlvbjogQWxsZWxlIHwgbnVsbDtcclxuXHJcbiAgcHJpdmF0ZSByZWFkb25seSBkaXNwb3NlR2Vub3R5cGU6ICgpID0+IHZvaWQ7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggZ2VuZVBvb2w6IEdlbmVQb29sLCBwcm92aWRlZE9wdGlvbnM6IEdlbm90eXBlT3B0aW9ucyApIHtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPEdlbm90eXBlT3B0aW9ucywgU2VsZk9wdGlvbnMsIFBoZXRpb09iamVjdE9wdGlvbnM+KCkoIHtcclxuXHJcbiAgICAgIC8vIFNlbGZPcHRpb25zXHJcbiAgICAgIGZhdGhlckZ1ckFsbGVsZTogZ2VuZVBvb2wuZnVyR2VuZS5ub3JtYWxBbGxlbGUsXHJcbiAgICAgIG1vdGhlckZ1ckFsbGVsZTogZ2VuZVBvb2wuZnVyR2VuZS5ub3JtYWxBbGxlbGUsXHJcbiAgICAgIGZhdGhlckVhcnNBbGxlbGU6IGdlbmVQb29sLmVhcnNHZW5lLm5vcm1hbEFsbGVsZSxcclxuICAgICAgbW90aGVyRWFyc0FsbGVsZTogZ2VuZVBvb2wuZWFyc0dlbmUubm9ybWFsQWxsZWxlLFxyXG4gICAgICBmYXRoZXJUZWV0aEFsbGVsZTogZ2VuZVBvb2wudGVldGhHZW5lLm5vcm1hbEFsbGVsZSxcclxuICAgICAgbW90aGVyVGVldGhBbGxlbGU6IGdlbmVQb29sLnRlZXRoR2VuZS5ub3JtYWxBbGxlbGUsXHJcbiAgICAgIG11dGF0ZUZ1cjogZmFsc2UsXHJcbiAgICAgIG11dGF0ZUVhcnM6IGZhbHNlLFxyXG4gICAgICBtdXRhdGVUZWV0aDogZmFsc2UsXHJcblxyXG4gICAgICAvLyBQaGV0aW9PYmplY3RPcHRpb25zXHJcbiAgICAgIHBoZXRpb1R5cGU6IEdlbm90eXBlLkdlbm90eXBlSU8sXHJcbiAgICAgIHBoZXRpb0RvY3VtZW50YXRpb246ICd0aGUgZ2VuZXRpYyBibHVlcHJpbnQgZm9yIGEgYnVubnknXHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBfLmZpbHRlciggWyBvcHRpb25zLm11dGF0ZUZ1ciwgb3B0aW9ucy5tdXRhdGVFYXJzLCBvcHRpb25zLm11dGF0ZVRlZXRoIF0gKS5sZW5ndGggPD0gMSxcclxuICAgICAgJ211dGF0aW9ucyBhcmUgbXV0dWFsbHkgZXhjbHVzaXZlJyApO1xyXG5cclxuICAgIHN1cGVyKCBvcHRpb25zICk7XHJcblxyXG4gICAgdGhpcy5nZW5lUG9vbCA9IGdlbmVQb29sO1xyXG5cclxuICAgIHRoaXMuZnVyR2VuZVBhaXIgPSBuZXcgR2VuZVBhaXIoIGdlbmVQb29sLmZ1ckdlbmUsIG9wdGlvbnMuZmF0aGVyRnVyQWxsZWxlLCBvcHRpb25zLm1vdGhlckZ1ckFsbGVsZSwge1xyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2Z1ckdlbmVQYWlyJyApLFxyXG4gICAgICBwaGV0aW9Eb2N1bWVudGF0aW9uOiAnZ2VuZSBwYWlyIHRoYXQgZGV0ZXJtaW5lcyB0aGUgZnVyIHRyYWl0J1xyXG4gICAgfSApO1xyXG5cclxuICAgIHRoaXMuZWFyc0dlbmVQYWlyID0gbmV3IEdlbmVQYWlyKCBnZW5lUG9vbC5lYXJzR2VuZSwgb3B0aW9ucy5mYXRoZXJFYXJzQWxsZWxlLCBvcHRpb25zLm1vdGhlckVhcnNBbGxlbGUsIHtcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdlYXJzR2VuZVBhaXInICksXHJcbiAgICAgIHBoZXRpb0RvY3VtZW50YXRpb246ICdnZW5lIHBhaXIgdGhhdCBkZXRlcm1pbmVzIHRoZSBlYXJzIHRyYWl0J1xyXG4gICAgfSApO1xyXG5cclxuICAgIHRoaXMudGVldGhHZW5lUGFpciA9IG5ldyBHZW5lUGFpciggZ2VuZVBvb2wudGVldGhHZW5lLCBvcHRpb25zLmZhdGhlclRlZXRoQWxsZWxlLCBvcHRpb25zLm1vdGhlclRlZXRoQWxsZWxlLCB7XHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAndGVldGhHZW5lUGFpcicgKSxcclxuICAgICAgcGhldGlvRG9jdW1lbnRhdGlvbjogJ2dlbmUgcGFpciB0aGF0IGRldGVybWluZXMgdGhlIHRlZXRoIHRyYWl0J1xyXG4gICAgfSApO1xyXG5cclxuICAgIHRoaXMubXV0YXRpb24gPSBudWxsO1xyXG5cclxuICAgIC8vIEFmdGVyIGdlbmUgcGFpcnMgaGF2ZSBiZWVuIGNyZWF0ZWQsIGFwcGx5IGFuIG9wdGlvbmFsIG11dGF0aW9uLiBUaGlzIGVuc3VyZXMgdGhhdCBhbiBhbGxlbGUgaXMgaW5oZXJpdGVkIGFuZFxyXG4gICAgLy8gdGhlbiBtb2RpZmllZCwgc28gdGhhdCB0aGUgZGlzdHJpYnV0aW9uIG9mIGFsbGVsZXMgaW4gdGhlIHBvcHVsYXRpb24gaXMgY29ycmVjdC5cclxuICAgIGlmICggb3B0aW9ucy5tdXRhdGVGdXIgKSB7XHJcbiAgICAgIHRoaXMubXV0YXRpb24gPSBnZW5lUG9vbC5mdXJHZW5lLm11dGFudEFsbGVsZTtcclxuICAgICAgdGhpcy5mdXJHZW5lUGFpci5tdXRhdGUoIHRoaXMubXV0YXRpb24gKTtcclxuICAgIH1cclxuICAgIGlmICggb3B0aW9ucy5tdXRhdGVFYXJzICkge1xyXG4gICAgICB0aGlzLm11dGF0aW9uID0gZ2VuZVBvb2wuZWFyc0dlbmUubXV0YW50QWxsZWxlO1xyXG4gICAgICB0aGlzLmVhcnNHZW5lUGFpci5tdXRhdGUoIHRoaXMubXV0YXRpb24gKTtcclxuICAgIH1cclxuICAgIGlmICggb3B0aW9ucy5tdXRhdGVUZWV0aCApIHtcclxuICAgICAgdGhpcy5tdXRhdGlvbiA9IGdlbmVQb29sLnRlZXRoR2VuZS5tdXRhbnRBbGxlbGU7XHJcbiAgICAgIHRoaXMudGVldGhHZW5lUGFpci5tdXRhdGUoIHRoaXMubXV0YXRpb24gKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUaGUgdHJhbnNsYXRlZCBhYmJyZXZpYXRpb24gb2YgdGhlIEdlbm90eXBlLiBQaEVULWlPIG9ubHksIG5vdCB1c2VkIGluIGJyYW5kPXBoZXQuXHJcbiAgICAvLyBkaXNwb3NlIGlzIHJlcXVpcmVkLlxyXG4gICAgY29uc3QgYWJicmV2aWF0aW9uUHJvcGVydHkgPSBEZXJpdmVkUHJvcGVydHkuZGVyaXZlQW55KFxyXG4gICAgICBbXHJcbiAgICAgICAgZ2VuZVBvb2wuZnVyR2VuZS5kb21pbmFudEFsbGVsZVByb3BlcnR5LFxyXG4gICAgICAgIGdlbmVQb29sLmVhcnNHZW5lLmRvbWluYW50QWxsZWxlUHJvcGVydHksXHJcbiAgICAgICAgZ2VuZVBvb2wudGVldGhHZW5lLmRvbWluYW50QWxsZWxlUHJvcGVydHksXHJcbiAgICAgICAgLi4udGhpcy5nZXRBYmJyZXZpYXRpb25TdHJpbmdEZXBlbmRlbmNpZXMoKVxyXG4gICAgICBdLFxyXG4gICAgICAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZnVyR2VuZVBhaXIuZ2V0R2Vub3R5cGVBYmJyZXZpYXRpb24oKSArXHJcbiAgICAgICAgICAgICAgIHRoaXMuZWFyc0dlbmVQYWlyLmdldEdlbm90eXBlQWJicmV2aWF0aW9uKCkgK1xyXG4gICAgICAgICAgICAgICB0aGlzLnRlZXRoR2VuZVBhaXIuZ2V0R2Vub3R5cGVBYmJyZXZpYXRpb24oKTtcclxuICAgICAgfSwge1xyXG4gICAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnYWJicmV2aWF0aW9uUHJvcGVydHknICksXHJcbiAgICAgICAgcGhldGlvVmFsdWVUeXBlOiBTdHJpbmdJTyxcclxuICAgICAgICBwaGV0aW9Eb2N1bWVudGF0aW9uOiAndGhlIGFiYnJldmlhdGlvbiB0aGF0IGRlc2NyaWJlcyB0aGUgZ2Vub3R5cGUsIHRoZSBlbXB0eSBzdHJpbmcgaWYgdGhlcmUgYXJlIG5vIGRvbWluYW50IGFsbGVsZXMnXHJcbiAgICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLmRpc3Bvc2VHZW5vdHlwZSA9ICgpID0+IHtcclxuICAgICAgdGhpcy5mdXJHZW5lUGFpci5kaXNwb3NlKCk7XHJcbiAgICAgIHRoaXMuZWFyc0dlbmVQYWlyLmRpc3Bvc2UoKTtcclxuICAgICAgdGhpcy50ZWV0aEdlbmVQYWlyLmRpc3Bvc2UoKTtcclxuICAgICAgYWJicmV2aWF0aW9uUHJvcGVydHkuZGlzcG9zZSgpO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvdmVycmlkZSBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgdGhpcy5kaXNwb3NlR2Vub3R5cGUoKTtcclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERvZXMgdGhpcyBnZW5vdHlwZSBjb250YWluIGEgc3BlY2lmaWMgYWxsZWxlP1xyXG4gICAqL1xyXG4gIHB1YmxpYyBoYXNBbGxlbGUoIGFsbGVsZTogQWxsZWxlIHwgbnVsbCApOiBib29sZWFuIHtcclxuICAgIHJldHVybiAoIHRoaXMuZnVyR2VuZVBhaXIuaGFzQWxsZWxlKCBhbGxlbGUgKSB8fFxyXG4gICAgICAgICAgICAgdGhpcy5lYXJzR2VuZVBhaXIuaGFzQWxsZWxlKCBhbGxlbGUgKSB8fFxyXG4gICAgICAgICAgICAgdGhpcy50ZWV0aEdlbmVQYWlyLmhhc0FsbGVsZSggYWxsZWxlICkgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbnZlcnRzIGEgR2Vub3R5cGUgdG8gaXRzIHVudHJhbnNsYXRlZCBhYmJyZXZpYXRpb24sIGUuZy4gJ0ZmRUV0dCcuXHJcbiAgICogVGhpcyBpcyBpbnRlbmRlZCBmb3IgZGVidWdnaW5nIG9ubHkuIERvIG5vdCByZWx5IG9uIHRoZSBmb3JtYXQhXHJcbiAgICovXHJcbiAgcHVibGljIHRvQWJicmV2aWF0aW9uKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5mdXJHZW5lUGFpci5nZXRHZW5vdHlwZUFiYnJldmlhdGlvbiggZmFsc2UgKSArXHJcbiAgICAgICAgICAgdGhpcy5lYXJzR2VuZVBhaXIuZ2V0R2Vub3R5cGVBYmJyZXZpYXRpb24oIGZhbHNlICkgK1xyXG4gICAgICAgICAgIHRoaXMudGVldGhHZW5lUGFpci5nZXRHZW5vdHlwZUFiYnJldmlhdGlvbiggZmFsc2UgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldHMgdGhlIGRlcGVuZGVuY2llcyBvbiBkeW5hbWljIHN0cmluZ3MgdGhhdCBhcmUgdXNlZCB0byBkZXJpdmUgdGhlIGFiYnJldmlhdGlvbnMgZm9yIHRoaXMgZ2Vub3R5cGUuXHJcbiAgICogVGhlc2Ugc3RyaW5ncyBtYXkgYmUgY2hhbmdlZCB2aWEgUGhFVC1pTywgb3IgYnkgY2hhbmdpbmcgdGhlIGdsb2JhbCBsb2NhbGVQcm9wZXJ0eS5cclxuICAgKi9cclxuICBwdWJsaWMgZ2V0QWJicmV2aWF0aW9uU3RyaW5nRGVwZW5kZW5jaWVzKCk6IFRSZWFkT25seVByb3BlcnR5PHN0cmluZz5bXSB7XHJcbiAgICByZXR1cm4gdGhpcy5nZW5lUG9vbC5nZXRHZW5vdHlwZUFiYnJldmlhdGlvblN0cmluZ0RlcGVuZGVuY2llcygpO1xyXG4gIH1cclxuXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vIEJlbG93IGhlcmUgYXJlIG1ldGhvZHMgdXNlZCBieSBHZW5vdHlwZUlPIHRvIHNlcmlhbGl6ZSBQaEVULWlPIHN0YXRlLlxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgLyoqXHJcbiAgICogU2VyaWFsaXplcyB0aGlzIEdlbm90eXBlIGluc3RhbmNlLlxyXG4gICAqL1xyXG4gIHByaXZhdGUgdG9TdGF0ZU9iamVjdCgpOiBHZW5vdHlwZVN0YXRlT2JqZWN0IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG11dGF0aW9uOiBOdWxsYWJsZUlPKCBBbGxlbGUuQWxsZWxlSU8gKS50b1N0YXRlT2JqZWN0KCB0aGlzLm11dGF0aW9uIClcclxuICAgICAgLy8gZnVyR2VuZVBhaXIsIGVhcnNHZW5lUGFpciwgYW5kIHRlZXRoR2VuZVBhaXIgYXJlIHN0YXRlZnVsIGFuZCB3aWxsIGJlIHNlcmlhbGl6ZWQgYXV0b21hdGljYWxseS5cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXN0b3JlcyBHZW5vdHlwZSBzdGF0ZU9iamVjdCBhZnRlciBpbnN0YW50aWF0aW9uLlxyXG4gICAqL1xyXG4gIHByaXZhdGUgYXBwbHlTdGF0ZSggc3RhdGVPYmplY3Q6IEdlbm90eXBlU3RhdGVPYmplY3QgKTogdm9pZCB7XHJcbiAgICByZXF1aXJlZCggc3RhdGVPYmplY3QgKTtcclxuICAgIHRoaXMubXV0YXRpb24gPSByZXF1aXJlZCggTnVsbGFibGVJTyggQWxsZWxlLkFsbGVsZUlPICkuZnJvbVN0YXRlT2JqZWN0KCBzdGF0ZU9iamVjdC5tdXRhdGlvbiApICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZW5vdHlwZUlPIGhhbmRsZXMgUGhFVC1pTyBzZXJpYWxpemF0aW9uIG9mIEdlbm90eXBlLlxyXG4gICAqIEl0IGltcGxlbWVudHMgJ0R5bmFtaWMgZWxlbWVudCBzZXJpYWxpemF0aW9uJywgYXMgZGVzY3JpYmVkIGluIHRoZSBTZXJpYWxpemF0aW9uIHNlY3Rpb24gb2ZcclxuICAgKiBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvcGhldC1pby9ibG9iL21hc3Rlci9kb2MvcGhldC1pby1pbnN0cnVtZW50YXRpb24tdGVjaG5pY2FsLWd1aWRlLm1kI3NlcmlhbGl6YXRpb25cclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IEdlbm90eXBlSU8gPSBuZXcgSU9UeXBlPEdlbm90eXBlLCBHZW5vdHlwZVN0YXRlT2JqZWN0PiggJ0dlbm90eXBlSU8nLCB7XHJcbiAgICB2YWx1ZVR5cGU6IEdlbm90eXBlLFxyXG4gICAgc3RhdGVTY2hlbWE6IHtcclxuICAgICAgbXV0YXRpb246IE51bGxhYmxlSU8oIEFsbGVsZS5BbGxlbGVJTyApXHJcbiAgICB9LFxyXG4gICAgdG9TdGF0ZU9iamVjdDogZ2Vub3R5cGUgPT4gZ2Vub3R5cGUudG9TdGF0ZU9iamVjdCgpLFxyXG4gICAgYXBwbHlTdGF0ZTogKCBnZW5vdHlwZSwgc3RhdGVPYmplY3QgKSA9PiBnZW5vdHlwZS5hcHBseVN0YXRlKCBzdGF0ZU9iamVjdCApXHJcbiAgfSApO1xyXG59XHJcblxyXG5uYXR1cmFsU2VsZWN0aW9uLnJlZ2lzdGVyKCAnR2Vub3R5cGUnLCBHZW5vdHlwZSApOyJdLCJtYXBwaW5ncyI6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