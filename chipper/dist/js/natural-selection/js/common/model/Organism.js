// Copyright 2020-2022, University of Colorado Boulder

/**
 * Organism is the base class for all living things that appear in the environment.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import EnumerationProperty from '../../../../axon/js/EnumerationProperty.js';
import Property from '../../../../axon/js/Property.js';
import Vector3 from '../../../../dot/js/Vector3.js';
import optionize from '../../../../phet-core/js/optionize.js';
import PhetioObject from '../../../../tandem/js/PhetioObject.js';
import Tandem from '../../../../tandem/js/Tandem.js';
import naturalSelection from '../../naturalSelection.js';
import EnvironmentModelViewTransform from './EnvironmentModelViewTransform.js';
import XDirection from './XDirection.js';

// constants
const DEFAULT_POSITION = new Vector3(0, 0, 1); // z=0 is illegal, results in divide-by-zero in modelViewTransform

export default class Organism extends PhetioObject {
  constructor(modelViewTransform, providedOptions) {
    const options = optionize()({
      // SelfOptions
      position: DEFAULT_POSITION,
      xDirection: XDirection.RIGHT,
      // PhetioObjectOptions
      tandem: Tandem.OPTIONAL
    }, providedOptions);
    super(options);
    this.modelViewTransform = modelViewTransform;
    this.positionProperty = new Property(options.position, {
      tandem: options.tandem.createTandem('positionProperty'),
      phetioValueType: Vector3.Vector3IO,
      phetioHighFrequency: true,
      phetioReadOnly: true,
      phetioDocumentation: 'position in the 3D model coordinate frame'
    });
    this.xDirectionProperty = new EnumerationProperty(options.xDirection, {
      tandem: options.tandem.createTandem('xDirectionProperty'),
      phetioReadOnly: true,
      phetioDocumentation: 'direction that the organism is facing along the x axis'
    });
    this.disposeOrganism = () => {
      this.positionProperty.dispose();
      this.xDirectionProperty.dispose();
    };
  }
  reset() {
    this.positionProperty.reset();
    this.xDirectionProperty.reset();
  }
  dispose() {
    this.disposeOrganism();
    super.dispose();
  }

  /**
   * Gets the minimum x coordinate for an organism's position.
   */
  getMinimumX() {
    return this.modelViewTransform.getMinimumX(this.positionProperty.value.z);
  }

  /**
   * Gets the maximum x coordinate for an organism's position.
   */
  getMaximumX() {
    return this.modelViewTransform.getMaximumX(this.positionProperty.value.z);
  }

  /**
   * Gets the minimum z coordinate for an organism's position.
   */
  getMinimumZ() {
    return this.modelViewTransform.getMinimumZ() + EnvironmentModelViewTransform.Z_MARGIN_MODEL;
  }

  /**
   * Gets the maximum z coordinate for an organism's position.
   */
  getMaximumZ() {
    return this.modelViewTransform.getMaximumZ() - EnvironmentModelViewTransform.Z_MARGIN_MODEL;
  }
}
naturalSelection.register('Organism', Organism);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFbnVtZXJhdGlvblByb3BlcnR5IiwiUHJvcGVydHkiLCJWZWN0b3IzIiwib3B0aW9uaXplIiwiUGhldGlvT2JqZWN0IiwiVGFuZGVtIiwibmF0dXJhbFNlbGVjdGlvbiIsIkVudmlyb25tZW50TW9kZWxWaWV3VHJhbnNmb3JtIiwiWERpcmVjdGlvbiIsIkRFRkFVTFRfUE9TSVRJT04iLCJPcmdhbmlzbSIsImNvbnN0cnVjdG9yIiwibW9kZWxWaWV3VHJhbnNmb3JtIiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsInBvc2l0aW9uIiwieERpcmVjdGlvbiIsIlJJR0hUIiwidGFuZGVtIiwiT1BUSU9OQUwiLCJwb3NpdGlvblByb3BlcnR5IiwiY3JlYXRlVGFuZGVtIiwicGhldGlvVmFsdWVUeXBlIiwiVmVjdG9yM0lPIiwicGhldGlvSGlnaEZyZXF1ZW5jeSIsInBoZXRpb1JlYWRPbmx5IiwicGhldGlvRG9jdW1lbnRhdGlvbiIsInhEaXJlY3Rpb25Qcm9wZXJ0eSIsImRpc3Bvc2VPcmdhbmlzbSIsImRpc3Bvc2UiLCJyZXNldCIsImdldE1pbmltdW1YIiwidmFsdWUiLCJ6IiwiZ2V0TWF4aW11bVgiLCJnZXRNaW5pbXVtWiIsIlpfTUFSR0lOX01PREVMIiwiZ2V0TWF4aW11bVoiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIk9yZ2FuaXNtLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIwLTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIE9yZ2FuaXNtIGlzIHRoZSBiYXNlIGNsYXNzIGZvciBhbGwgbGl2aW5nIHRoaW5ncyB0aGF0IGFwcGVhciBpbiB0aGUgZW52aXJvbm1lbnQuXHJcbiAqXHJcbiAqIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXHJcbiAqL1xyXG5cclxuaW1wb3J0IEVudW1lcmF0aW9uUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9FbnVtZXJhdGlvblByb3BlcnR5LmpzJztcclxuaW1wb3J0IFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgVmVjdG9yMyBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVmVjdG9yMy5qcyc7XHJcbmltcG9ydCBvcHRpb25pemUgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCBQaWNrT3B0aW9uYWwgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL1BpY2tPcHRpb25hbC5qcyc7XHJcbmltcG9ydCBQaGV0aW9PYmplY3QsIHsgUGhldGlvT2JqZWN0T3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL3RhbmRlbS9qcy9QaGV0aW9PYmplY3QuanMnO1xyXG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uLy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xyXG5pbXBvcnQgbmF0dXJhbFNlbGVjdGlvbiBmcm9tICcuLi8uLi9uYXR1cmFsU2VsZWN0aW9uLmpzJztcclxuaW1wb3J0IEVudmlyb25tZW50TW9kZWxWaWV3VHJhbnNmb3JtIGZyb20gJy4vRW52aXJvbm1lbnRNb2RlbFZpZXdUcmFuc2Zvcm0uanMnO1xyXG5pbXBvcnQgWERpcmVjdGlvbiBmcm9tICcuL1hEaXJlY3Rpb24uanMnO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IERFRkFVTFRfUE9TSVRJT04gPSBuZXcgVmVjdG9yMyggMCwgMCwgMSApOyAvLyB6PTAgaXMgaWxsZWdhbCwgcmVzdWx0cyBpbiBkaXZpZGUtYnktemVybyBpbiBtb2RlbFZpZXdUcmFuc2Zvcm1cclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSB7XHJcbiAgcG9zaXRpb24/OiBWZWN0b3IzOyAvLyBpbml0aWFsIHBvc2l0aW9uXHJcbiAgeERpcmVjdGlvbj86IFhEaXJlY3Rpb247IC8vIGluaXRpYWwgZGlyZWN0aW9uIG9mIG1vdGlvbiBhbG9uZyB0aGUgeC1heGlzXHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBPcmdhbmlzbU9wdGlvbnMgPSBTZWxmT3B0aW9ucyAmXHJcbiAgUGlja09wdGlvbmFsPFBoZXRpb09iamVjdE9wdGlvbnMsICd0YW5kZW0nIHwgJ3BoZXRpb1R5cGUnIHwgJ3BoZXRpb0R5bmFtaWNFbGVtZW50Jz47XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBPcmdhbmlzbSBleHRlbmRzIFBoZXRpb09iamVjdCB7XHJcblxyXG4gIHB1YmxpYyByZWFkb25seSBtb2RlbFZpZXdUcmFuc2Zvcm06IEVudmlyb25tZW50TW9kZWxWaWV3VHJhbnNmb3JtO1xyXG4gIHB1YmxpYyByZWFkb25seSBwb3NpdGlvblByb3BlcnR5OiBQcm9wZXJ0eTxWZWN0b3IzPjtcclxuICBwdWJsaWMgcmVhZG9ubHkgeERpcmVjdGlvblByb3BlcnR5OiBFbnVtZXJhdGlvblByb3BlcnR5PFhEaXJlY3Rpb24+O1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgZGlzcG9zZU9yZ2FuaXNtOiAoKSA9PiB2b2lkO1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIG1vZGVsVmlld1RyYW5zZm9ybTogRW52aXJvbm1lbnRNb2RlbFZpZXdUcmFuc2Zvcm0sIHByb3ZpZGVkT3B0aW9ucz86IE9yZ2FuaXNtT3B0aW9ucyApIHtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPE9yZ2FuaXNtT3B0aW9ucywgU2VsZk9wdGlvbnMsIFBoZXRpb09iamVjdE9wdGlvbnM+KCkoIHtcclxuXHJcbiAgICAgIC8vIFNlbGZPcHRpb25zXHJcbiAgICAgIHBvc2l0aW9uOiBERUZBVUxUX1BPU0lUSU9OLFxyXG4gICAgICB4RGlyZWN0aW9uOiBYRGlyZWN0aW9uLlJJR0hULFxyXG5cclxuICAgICAgLy8gUGhldGlvT2JqZWN0T3B0aW9uc1xyXG4gICAgICB0YW5kZW06IFRhbmRlbS5PUFRJT05BTFxyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcbiAgICB0aGlzLm1vZGVsVmlld1RyYW5zZm9ybSA9IG1vZGVsVmlld1RyYW5zZm9ybTtcclxuXHJcbiAgICB0aGlzLnBvc2l0aW9uUHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIG9wdGlvbnMucG9zaXRpb24sIHtcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdwb3NpdGlvblByb3BlcnR5JyApLFxyXG4gICAgICBwaGV0aW9WYWx1ZVR5cGU6IFZlY3RvcjMuVmVjdG9yM0lPLFxyXG4gICAgICBwaGV0aW9IaWdoRnJlcXVlbmN5OiB0cnVlLFxyXG4gICAgICBwaGV0aW9SZWFkT25seTogdHJ1ZSxcclxuICAgICAgcGhldGlvRG9jdW1lbnRhdGlvbjogJ3Bvc2l0aW9uIGluIHRoZSAzRCBtb2RlbCBjb29yZGluYXRlIGZyYW1lJ1xyXG4gICAgfSApO1xyXG5cclxuICAgIHRoaXMueERpcmVjdGlvblByb3BlcnR5ID0gbmV3IEVudW1lcmF0aW9uUHJvcGVydHkoIG9wdGlvbnMueERpcmVjdGlvbiwge1xyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3hEaXJlY3Rpb25Qcm9wZXJ0eScgKSxcclxuICAgICAgcGhldGlvUmVhZE9ubHk6IHRydWUsXHJcbiAgICAgIHBoZXRpb0RvY3VtZW50YXRpb246ICdkaXJlY3Rpb24gdGhhdCB0aGUgb3JnYW5pc20gaXMgZmFjaW5nIGFsb25nIHRoZSB4IGF4aXMnXHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5kaXNwb3NlT3JnYW5pc20gPSAoKSA9PiB7XHJcbiAgICAgIHRoaXMucG9zaXRpb25Qcm9wZXJ0eS5kaXNwb3NlKCk7XHJcbiAgICAgIHRoaXMueERpcmVjdGlvblByb3BlcnR5LmRpc3Bvc2UoKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLnBvc2l0aW9uUHJvcGVydHkucmVzZXQoKTtcclxuICAgIHRoaXMueERpcmVjdGlvblByb3BlcnR5LnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb3ZlcnJpZGUgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgIHRoaXMuZGlzcG9zZU9yZ2FuaXNtKCk7XHJcbiAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXRzIHRoZSBtaW5pbXVtIHggY29vcmRpbmF0ZSBmb3IgYW4gb3JnYW5pc20ncyBwb3NpdGlvbi5cclxuICAgKi9cclxuICBwcm90ZWN0ZWQgZ2V0TWluaW11bVgoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLm1vZGVsVmlld1RyYW5zZm9ybS5nZXRNaW5pbXVtWCggdGhpcy5wb3NpdGlvblByb3BlcnR5LnZhbHVlLnogKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldHMgdGhlIG1heGltdW0geCBjb29yZGluYXRlIGZvciBhbiBvcmdhbmlzbSdzIHBvc2l0aW9uLlxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBnZXRNYXhpbXVtWCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMubW9kZWxWaWV3VHJhbnNmb3JtLmdldE1heGltdW1YKCB0aGlzLnBvc2l0aW9uUHJvcGVydHkudmFsdWUueiApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0cyB0aGUgbWluaW11bSB6IGNvb3JkaW5hdGUgZm9yIGFuIG9yZ2FuaXNtJ3MgcG9zaXRpb24uXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIGdldE1pbmltdW1aKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5tb2RlbFZpZXdUcmFuc2Zvcm0uZ2V0TWluaW11bVooKSArIEVudmlyb25tZW50TW9kZWxWaWV3VHJhbnNmb3JtLlpfTUFSR0lOX01PREVMO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0cyB0aGUgbWF4aW11bSB6IGNvb3JkaW5hdGUgZm9yIGFuIG9yZ2FuaXNtJ3MgcG9zaXRpb24uXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIGdldE1heGltdW1aKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5tb2RlbFZpZXdUcmFuc2Zvcm0uZ2V0TWF4aW11bVooKSAtIEVudmlyb25tZW50TW9kZWxWaWV3VHJhbnNmb3JtLlpfTUFSR0lOX01PREVMO1xyXG4gIH1cclxufVxyXG5cclxubmF0dXJhbFNlbGVjdGlvbi5yZWdpc3RlciggJ09yZ2FuaXNtJywgT3JnYW5pc20gKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsbUJBQW1CLE1BQU0sNENBQTRDO0FBQzVFLE9BQU9DLFFBQVEsTUFBTSxpQ0FBaUM7QUFDdEQsT0FBT0MsT0FBTyxNQUFNLCtCQUErQjtBQUNuRCxPQUFPQyxTQUFTLE1BQU0sdUNBQXVDO0FBRTdELE9BQU9DLFlBQVksTUFBK0IsdUNBQXVDO0FBQ3pGLE9BQU9DLE1BQU0sTUFBTSxpQ0FBaUM7QUFDcEQsT0FBT0MsZ0JBQWdCLE1BQU0sMkJBQTJCO0FBQ3hELE9BQU9DLDZCQUE2QixNQUFNLG9DQUFvQztBQUM5RSxPQUFPQyxVQUFVLE1BQU0saUJBQWlCOztBQUV4QztBQUNBLE1BQU1DLGdCQUFnQixHQUFHLElBQUlQLE9BQU8sQ0FBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUUsQ0FBQyxDQUFDLENBQUM7O0FBVWpELGVBQWUsTUFBTVEsUUFBUSxTQUFTTixZQUFZLENBQUM7RUFPMUNPLFdBQVdBLENBQUVDLGtCQUFpRCxFQUFFQyxlQUFpQyxFQUFHO0lBRXpHLE1BQU1DLE9BQU8sR0FBR1gsU0FBUyxDQUFvRCxDQUFDLENBQUU7TUFFOUU7TUFDQVksUUFBUSxFQUFFTixnQkFBZ0I7TUFDMUJPLFVBQVUsRUFBRVIsVUFBVSxDQUFDUyxLQUFLO01BRTVCO01BQ0FDLE1BQU0sRUFBRWIsTUFBTSxDQUFDYztJQUNqQixDQUFDLEVBQUVOLGVBQWdCLENBQUM7SUFFcEIsS0FBSyxDQUFFQyxPQUFRLENBQUM7SUFFaEIsSUFBSSxDQUFDRixrQkFBa0IsR0FBR0Esa0JBQWtCO0lBRTVDLElBQUksQ0FBQ1EsZ0JBQWdCLEdBQUcsSUFBSW5CLFFBQVEsQ0FBRWEsT0FBTyxDQUFDQyxRQUFRLEVBQUU7TUFDdERHLE1BQU0sRUFBRUosT0FBTyxDQUFDSSxNQUFNLENBQUNHLFlBQVksQ0FBRSxrQkFBbUIsQ0FBQztNQUN6REMsZUFBZSxFQUFFcEIsT0FBTyxDQUFDcUIsU0FBUztNQUNsQ0MsbUJBQW1CLEVBQUUsSUFBSTtNQUN6QkMsY0FBYyxFQUFFLElBQUk7TUFDcEJDLG1CQUFtQixFQUFFO0lBQ3ZCLENBQUUsQ0FBQztJQUVILElBQUksQ0FBQ0Msa0JBQWtCLEdBQUcsSUFBSTNCLG1CQUFtQixDQUFFYyxPQUFPLENBQUNFLFVBQVUsRUFBRTtNQUNyRUUsTUFBTSxFQUFFSixPQUFPLENBQUNJLE1BQU0sQ0FBQ0csWUFBWSxDQUFFLG9CQUFxQixDQUFDO01BQzNESSxjQUFjLEVBQUUsSUFBSTtNQUNwQkMsbUJBQW1CLEVBQUU7SUFDdkIsQ0FBRSxDQUFDO0lBRUgsSUFBSSxDQUFDRSxlQUFlLEdBQUcsTUFBTTtNQUMzQixJQUFJLENBQUNSLGdCQUFnQixDQUFDUyxPQUFPLENBQUMsQ0FBQztNQUMvQixJQUFJLENBQUNGLGtCQUFrQixDQUFDRSxPQUFPLENBQUMsQ0FBQztJQUNuQyxDQUFDO0VBQ0g7RUFFT0MsS0FBS0EsQ0FBQSxFQUFTO0lBQ25CLElBQUksQ0FBQ1YsZ0JBQWdCLENBQUNVLEtBQUssQ0FBQyxDQUFDO0lBQzdCLElBQUksQ0FBQ0gsa0JBQWtCLENBQUNHLEtBQUssQ0FBQyxDQUFDO0VBQ2pDO0VBRWdCRCxPQUFPQSxDQUFBLEVBQVM7SUFDOUIsSUFBSSxDQUFDRCxlQUFlLENBQUMsQ0FBQztJQUN0QixLQUFLLENBQUNDLE9BQU8sQ0FBQyxDQUFDO0VBQ2pCOztFQUVBO0FBQ0Y7QUFDQTtFQUNZRSxXQUFXQSxDQUFBLEVBQVc7SUFDOUIsT0FBTyxJQUFJLENBQUNuQixrQkFBa0IsQ0FBQ21CLFdBQVcsQ0FBRSxJQUFJLENBQUNYLGdCQUFnQixDQUFDWSxLQUFLLENBQUNDLENBQUUsQ0FBQztFQUM3RTs7RUFFQTtBQUNGO0FBQ0E7RUFDWUMsV0FBV0EsQ0FBQSxFQUFXO0lBQzlCLE9BQU8sSUFBSSxDQUFDdEIsa0JBQWtCLENBQUNzQixXQUFXLENBQUUsSUFBSSxDQUFDZCxnQkFBZ0IsQ0FBQ1ksS0FBSyxDQUFDQyxDQUFFLENBQUM7RUFDN0U7O0VBRUE7QUFDRjtBQUNBO0VBQ1lFLFdBQVdBLENBQUEsRUFBVztJQUM5QixPQUFPLElBQUksQ0FBQ3ZCLGtCQUFrQixDQUFDdUIsV0FBVyxDQUFDLENBQUMsR0FBRzVCLDZCQUE2QixDQUFDNkIsY0FBYztFQUM3Rjs7RUFFQTtBQUNGO0FBQ0E7RUFDWUMsV0FBV0EsQ0FBQSxFQUFXO0lBQzlCLE9BQU8sSUFBSSxDQUFDekIsa0JBQWtCLENBQUN5QixXQUFXLENBQUMsQ0FBQyxHQUFHOUIsNkJBQTZCLENBQUM2QixjQUFjO0VBQzdGO0FBQ0Y7QUFFQTlCLGdCQUFnQixDQUFDZ0MsUUFBUSxDQUFFLFVBQVUsRUFBRTVCLFFBQVMsQ0FBQyJ9