// Copyright 2022-2023, University of Colorado Boulder

/**
 * Fire a final event when all child events have completed.
 *
 * @author Chris Klusendorf (PhET Interactive Simulations)
 * @author Sam Reid (PhET Interactive Simulations)
 */
import centerAndVariability from '../../centerAndVariability.js';
export default class AsyncCounter {
  constructor(count, callback) {
    this.index = 0;
    this.complete = false;
    this.count = count;
    this.callback = callback;
  }
  increment() {
    this.index++;
    if (this.index >= this.count) {
      assert && assert(!this.complete, 'Too many completions');
      this.complete = true;
      this.callback();
    }
  }
}
centerAndVariability.register('AsyncCounter', AsyncCounter);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjZW50ZXJBbmRWYXJpYWJpbGl0eSIsIkFzeW5jQ291bnRlciIsImNvbnN0cnVjdG9yIiwiY291bnQiLCJjYWxsYmFjayIsImluZGV4IiwiY29tcGxldGUiLCJpbmNyZW1lbnQiLCJhc3NlcnQiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkFzeW5jQ291bnRlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMi0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBGaXJlIGEgZmluYWwgZXZlbnQgd2hlbiBhbGwgY2hpbGQgZXZlbnRzIGhhdmUgY29tcGxldGVkLlxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIEtsdXNlbmRvcmYgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5pbXBvcnQgY2VudGVyQW5kVmFyaWFiaWxpdHkgZnJvbSAnLi4vLi4vY2VudGVyQW5kVmFyaWFiaWxpdHkuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXN5bmNDb3VudGVyIHtcclxuICBwcml2YXRlIGluZGV4OiBudW1iZXI7XHJcbiAgcHJpdmF0ZSBjb21wbGV0ZTogYm9vbGVhbjtcclxuICBwcml2YXRlIHJlYWRvbmx5IGNvdW50OiBudW1iZXI7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBjYWxsYmFjazogKCkgPT4gdm9pZDtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBjb3VudDogbnVtYmVyLCBjYWxsYmFjazogKCkgPT4gdm9pZCApIHtcclxuICAgIHRoaXMuaW5kZXggPSAwO1xyXG4gICAgdGhpcy5jb21wbGV0ZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5jb3VudCA9IGNvdW50O1xyXG4gICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGluY3JlbWVudCgpOiB2b2lkIHtcclxuICAgIHRoaXMuaW5kZXgrKztcclxuXHJcbiAgICBpZiAoIHRoaXMuaW5kZXggPj0gdGhpcy5jb3VudCApIHtcclxuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggIXRoaXMuY29tcGxldGUsICdUb28gbWFueSBjb21wbGV0aW9ucycgKTtcclxuXHJcbiAgICAgIHRoaXMuY29tcGxldGUgPSB0cnVlO1xyXG4gICAgICB0aGlzLmNhbGxiYWNrKCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5jZW50ZXJBbmRWYXJpYWJpbGl0eS5yZWdpc3RlciggJ0FzeW5jQ291bnRlcicsIEFzeW5jQ291bnRlciApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBT0Esb0JBQW9CLE1BQU0sK0JBQStCO0FBRWhFLGVBQWUsTUFBTUMsWUFBWSxDQUFDO0VBTXpCQyxXQUFXQSxDQUFFQyxLQUFhLEVBQUVDLFFBQW9CLEVBQUc7SUFDeEQsSUFBSSxDQUFDQyxLQUFLLEdBQUcsQ0FBQztJQUNkLElBQUksQ0FBQ0MsUUFBUSxHQUFHLEtBQUs7SUFDckIsSUFBSSxDQUFDSCxLQUFLLEdBQUdBLEtBQUs7SUFDbEIsSUFBSSxDQUFDQyxRQUFRLEdBQUdBLFFBQVE7RUFDMUI7RUFFT0csU0FBU0EsQ0FBQSxFQUFTO0lBQ3ZCLElBQUksQ0FBQ0YsS0FBSyxFQUFFO0lBRVosSUFBSyxJQUFJLENBQUNBLEtBQUssSUFBSSxJQUFJLENBQUNGLEtBQUssRUFBRztNQUM5QkssTUFBTSxJQUFJQSxNQUFNLENBQUUsQ0FBQyxJQUFJLENBQUNGLFFBQVEsRUFBRSxzQkFBdUIsQ0FBQztNQUUxRCxJQUFJLENBQUNBLFFBQVEsR0FBRyxJQUFJO01BQ3BCLElBQUksQ0FBQ0YsUUFBUSxDQUFDLENBQUM7SUFDakI7RUFDRjtBQUNGO0FBRUFKLG9CQUFvQixDQUFDUyxRQUFRLENBQUUsY0FBYyxFQUFFUixZQUFhLENBQUMifQ==