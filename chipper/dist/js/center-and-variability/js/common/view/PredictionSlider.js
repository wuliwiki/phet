// Copyright 2022-2023, University of Colorado Boulder

/**
 * Shows a shaded sphere and arrow pointing up, to show where the user predicts a median value.
 *
 * @author Chris Klusendorf (PhET Interactive Simulations)
 * @author Sam Reid (PhET Interactive Simulations)
 */

import centerAndVariability from '../../centerAndVariability.js';
import { DragListener, Node } from '../../../../scenery/js/imports.js';
import optionize from '../../../../phet-core/js/optionize.js';
import Vector2Property from '../../../../dot/js/Vector2Property.js';
import Utils from '../../../../dot/js/Utils.js';
import PredictionThumbNode from './PredictionThumbNode.js';
import AccessibleSlider from '../../../../sun/js/accessibility/AccessibleSlider.js';
export default class PredictionSlider extends AccessibleSlider(Node, 0) {
  constructor(predictionProperty, modelViewTransform, dragRange, providedOptions) {
    const thumbNode = new PredictionThumbNode(providedOptions.predictionThumbNodeOptions);
    const options = optionize()({
      children: [thumbNode],
      cursor: 'pointer',
      keyboardStep: 0.5,
      shiftKeyboardStep: 0.1,
      pageKeyboardStep: 1,
      // Keyboard has a different rounding than mouse
      constrainValue: value => Utils.roundToInterval(value, 0.5)
    }, providedOptions);
    super(options);
    this.addLinkedElement(predictionProperty, {
      tandem: options.tandem.createTandem('predictionProperty')
    });

    // In view coordinates
    const dragPositionProperty = new Vector2Property(modelViewTransform.modelToViewXY(predictionProperty.value, 0));
    dragPositionProperty.lazyLink(dragPosition => {
      const constrainedValue = dragRange.constrainValue(modelViewTransform.viewToModelX(dragPosition.x));
      predictionProperty.value = options.roundToInterval === null ? constrainedValue : Utils.roundToInterval(constrainedValue, options.roundToInterval);
    });
    predictionProperty.link(prediction => {
      this.centerTop = modelViewTransform.modelToViewXY(prediction, 0).plusXY(0, 45);
    });
    this.addInputListener(new DragListener({
      tandem: options.tandem.createTandem('dragListener'),
      positionProperty: dragPositionProperty,
      start: () => this.moveToFront()
    }));
  }
}
centerAndVariability.register('PredictionSlider', PredictionSlider);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjZW50ZXJBbmRWYXJpYWJpbGl0eSIsIkRyYWdMaXN0ZW5lciIsIk5vZGUiLCJvcHRpb25pemUiLCJWZWN0b3IyUHJvcGVydHkiLCJVdGlscyIsIlByZWRpY3Rpb25UaHVtYk5vZGUiLCJBY2Nlc3NpYmxlU2xpZGVyIiwiUHJlZGljdGlvblNsaWRlciIsImNvbnN0cnVjdG9yIiwicHJlZGljdGlvblByb3BlcnR5IiwibW9kZWxWaWV3VHJhbnNmb3JtIiwiZHJhZ1JhbmdlIiwicHJvdmlkZWRPcHRpb25zIiwidGh1bWJOb2RlIiwicHJlZGljdGlvblRodW1iTm9kZU9wdGlvbnMiLCJvcHRpb25zIiwiY2hpbGRyZW4iLCJjdXJzb3IiLCJrZXlib2FyZFN0ZXAiLCJzaGlmdEtleWJvYXJkU3RlcCIsInBhZ2VLZXlib2FyZFN0ZXAiLCJjb25zdHJhaW5WYWx1ZSIsInZhbHVlIiwicm91bmRUb0ludGVydmFsIiwiYWRkTGlua2VkRWxlbWVudCIsInRhbmRlbSIsImNyZWF0ZVRhbmRlbSIsImRyYWdQb3NpdGlvblByb3BlcnR5IiwibW9kZWxUb1ZpZXdYWSIsImxhenlMaW5rIiwiZHJhZ1Bvc2l0aW9uIiwiY29uc3RyYWluZWRWYWx1ZSIsInZpZXdUb01vZGVsWCIsIngiLCJsaW5rIiwicHJlZGljdGlvbiIsImNlbnRlclRvcCIsInBsdXNYWSIsImFkZElucHV0TGlzdGVuZXIiLCJwb3NpdGlvblByb3BlcnR5Iiwic3RhcnQiLCJtb3ZlVG9Gcm9udCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiUHJlZGljdGlvblNsaWRlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMi0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBTaG93cyBhIHNoYWRlZCBzcGhlcmUgYW5kIGFycm93IHBvaW50aW5nIHVwLCB0byBzaG93IHdoZXJlIHRoZSB1c2VyIHByZWRpY3RzIGEgbWVkaWFuIHZhbHVlLlxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIEtsdXNlbmRvcmYgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IGNlbnRlckFuZFZhcmlhYmlsaXR5IGZyb20gJy4uLy4uL2NlbnRlckFuZFZhcmlhYmlsaXR5LmpzJztcclxuaW1wb3J0IHsgRHJhZ0xpc3RlbmVyLCBOb2RlLCBOb2RlT3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBvcHRpb25pemUgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCBQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1Byb3BlcnR5LmpzJztcclxuaW1wb3J0IE1vZGVsVmlld1RyYW5zZm9ybTIgZnJvbSAnLi4vLi4vLi4vLi4vcGhldGNvbW1vbi9qcy92aWV3L01vZGVsVmlld1RyYW5zZm9ybTIuanMnO1xyXG5pbXBvcnQgVmVjdG9yMlByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9WZWN0b3IyUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgUmFuZ2UgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1JhbmdlLmpzJztcclxuaW1wb3J0IFV0aWxzIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9VdGlscy5qcyc7XHJcbmltcG9ydCBQcmVkaWN0aW9uVGh1bWJOb2RlLCB7IFByZWRpY3Rpb25UaHVtYk5vZGVPcHRpb25zIH0gZnJvbSAnLi9QcmVkaWN0aW9uVGh1bWJOb2RlLmpzJztcclxuaW1wb3J0IEFjY2Vzc2libGVTbGlkZXIsIHsgQWNjZXNzaWJsZVNsaWRlck9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvYWNjZXNzaWJpbGl0eS9BY2Nlc3NpYmxlU2xpZGVyLmpzJztcclxuaW1wb3J0IFdpdGhSZXF1aXJlZCBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvV2l0aFJlcXVpcmVkLmpzJztcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSB7XHJcbiAgcHJlZGljdGlvblRodW1iTm9kZU9wdGlvbnM6IFByZWRpY3Rpb25UaHVtYk5vZGVPcHRpb25zO1xyXG5cclxuICAvLyBSb3VuZCB0byB0aGUgbmVhcmVzdCBzcGVjaWZpZWQgbnVtYmVyLCBvciwgaWYgbnVsbCwgdGhlcmUgaXMgbm8gcm91bmRpbmcuIE1lYW4gaXMgY29udGludW91cywgbWVkaWFuIGlzIHJvdW5kZWQgdG8gMC41XHJcbiAgcm91bmRUb0ludGVydmFsOiBudW1iZXIgfCBudWxsO1xyXG59O1xyXG50eXBlIFBhcmVudE9wdGlvbnMgPSBBY2Nlc3NpYmxlU2xpZGVyT3B0aW9ucyAmIE5vZGVPcHRpb25zO1xyXG5leHBvcnQgdHlwZSBQcmVkaWN0aW9uU2xpZGVyT3B0aW9ucyA9IFNlbGZPcHRpb25zICYgV2l0aFJlcXVpcmVkPFBhcmVudE9wdGlvbnMsICd0YW5kZW0nPjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByZWRpY3Rpb25TbGlkZXIgZXh0ZW5kcyBBY2Nlc3NpYmxlU2xpZGVyKCBOb2RlLCAwICkge1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIHByZWRpY3Rpb25Qcm9wZXJ0eTogUHJvcGVydHk8bnVtYmVyPiwgbW9kZWxWaWV3VHJhbnNmb3JtOiBNb2RlbFZpZXdUcmFuc2Zvcm0yLCBkcmFnUmFuZ2U6IFJhbmdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZWRPcHRpb25zOiBQcmVkaWN0aW9uU2xpZGVyT3B0aW9ucyApIHtcclxuXHJcbiAgICBjb25zdCB0aHVtYk5vZGUgPSBuZXcgUHJlZGljdGlvblRodW1iTm9kZSggcHJvdmlkZWRPcHRpb25zLnByZWRpY3Rpb25UaHVtYk5vZGVPcHRpb25zICk7XHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPFByZWRpY3Rpb25TbGlkZXJPcHRpb25zLCBTZWxmT3B0aW9ucywgUGFyZW50T3B0aW9ucz4oKSgge1xyXG4gICAgICBjaGlsZHJlbjogWyB0aHVtYk5vZGUgXSxcclxuICAgICAgY3Vyc29yOiAncG9pbnRlcicsXHJcblxyXG4gICAgICBrZXlib2FyZFN0ZXA6IDAuNSxcclxuICAgICAgc2hpZnRLZXlib2FyZFN0ZXA6IDAuMSxcclxuICAgICAgcGFnZUtleWJvYXJkU3RlcDogMSxcclxuXHJcbiAgICAgIC8vIEtleWJvYXJkIGhhcyBhIGRpZmZlcmVudCByb3VuZGluZyB0aGFuIG1vdXNlXHJcbiAgICAgIGNvbnN0cmFpblZhbHVlOiB2YWx1ZSA9PiBVdGlscy5yb3VuZFRvSW50ZXJ2YWwoIHZhbHVlLCAwLjUgKVxyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcbiAgICB0aGlzLmFkZExpbmtlZEVsZW1lbnQoIHByZWRpY3Rpb25Qcm9wZXJ0eSwge1xyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3ByZWRpY3Rpb25Qcm9wZXJ0eScgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIEluIHZpZXcgY29vcmRpbmF0ZXNcclxuICAgIGNvbnN0IGRyYWdQb3NpdGlvblByb3BlcnR5ID0gbmV3IFZlY3RvcjJQcm9wZXJ0eSggbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WFkoIHByZWRpY3Rpb25Qcm9wZXJ0eS52YWx1ZSwgMCApICk7XHJcblxyXG4gICAgZHJhZ1Bvc2l0aW9uUHJvcGVydHkubGF6eUxpbmsoIGRyYWdQb3NpdGlvbiA9PiB7XHJcbiAgICAgIGNvbnN0IGNvbnN0cmFpbmVkVmFsdWUgPSBkcmFnUmFuZ2UuY29uc3RyYWluVmFsdWUoIG1vZGVsVmlld1RyYW5zZm9ybS52aWV3VG9Nb2RlbFgoIGRyYWdQb3NpdGlvbi54ICkgKTtcclxuICAgICAgcHJlZGljdGlvblByb3BlcnR5LnZhbHVlID0gb3B0aW9ucy5yb3VuZFRvSW50ZXJ2YWwgPT09IG51bGwgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdHJhaW5lZFZhbHVlIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVXRpbHMucm91bmRUb0ludGVydmFsKCBjb25zdHJhaW5lZFZhbHVlLCBvcHRpb25zLnJvdW5kVG9JbnRlcnZhbCApO1xyXG4gICAgfSApO1xyXG5cclxuICAgIHByZWRpY3Rpb25Qcm9wZXJ0eS5saW5rKCBwcmVkaWN0aW9uID0+IHtcclxuICAgICAgdGhpcy5jZW50ZXJUb3AgPSBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdYWSggcHJlZGljdGlvbiwgMCApLnBsdXNYWSggMCwgNDUgKTtcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLmFkZElucHV0TGlzdGVuZXIoIG5ldyBEcmFnTGlzdGVuZXIoIHtcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdkcmFnTGlzdGVuZXInICksXHJcbiAgICAgIHBvc2l0aW9uUHJvcGVydHk6IGRyYWdQb3NpdGlvblByb3BlcnR5LFxyXG4gICAgICBzdGFydDogKCkgPT4gdGhpcy5tb3ZlVG9Gcm9udCgpXHJcbiAgICB9ICkgKTtcclxuICB9XHJcbn1cclxuXHJcbmNlbnRlckFuZFZhcmlhYmlsaXR5LnJlZ2lzdGVyKCAnUHJlZGljdGlvblNsaWRlcicsIFByZWRpY3Rpb25TbGlkZXIgKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxvQkFBb0IsTUFBTSwrQkFBK0I7QUFDaEUsU0FBU0MsWUFBWSxFQUFFQyxJQUFJLFFBQXFCLG1DQUFtQztBQUNuRixPQUFPQyxTQUFTLE1BQU0sdUNBQXVDO0FBRzdELE9BQU9DLGVBQWUsTUFBTSx1Q0FBdUM7QUFFbkUsT0FBT0MsS0FBSyxNQUFNLDZCQUE2QjtBQUMvQyxP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