// Copyright 2023, University of Colorado Boulder

import CAVObjectNode from './CAVObjectNode.js';
import centerAndVariability from '../../centerAndVariability.js';
import CAVObjectType from '../model/CAVObjectType.js';
import { Circle, Node, Path } from '../../../../scenery/js/imports.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import timesSolidShape from '../../../../sherpa/js/fontawesome-5/timesSolidShape.js';
import CAVConstants from '../CAVConstants.js';
import PlotType from '../model/PlotType.js';
import Multilink from '../../../../axon/js/Multilink.js';
export default class DataPointNode extends CAVObjectNode {
  constructor(soccerBall, isShowingPlayAreaMedianProperty, modelViewTransform, options) {
    super(soccerBall, isShowingPlayAreaMedianProperty, modelViewTransform, CAVObjectType.DATA_POINT.radius, options);
    const viewRadius = modelViewTransform.modelToViewDeltaX(CAVObjectType.DATA_POINT.radius);
    const circle = new Circle(viewRadius, {
      fill: options.fill,
      center: Vector2.ZERO
    });
    const cross = new Path(timesSolidShape, {
      // Leave some spacing between the stacked 'x' marks
      fill: options.fill,
      maxWidth: viewRadius * 2 * 0.8,
      center: Vector2.ZERO
    });
    CAVConstants.PLOT_TYPE_PROPERTY.link(plotType => {
      circle.visible = plotType === PlotType.DOT_PLOT;
      cross.visible = plotType === PlotType.LINE_PLOT;
    });
    const node = new Node({
      children: [circle, cross],
      // if the child node is non-square, it should still fit within specified dimensions. Note: this does not change the
      // aspect ratio.
      maxWidth: viewRadius * 2,
      maxHeight: viewRadius * 2,
      center: Vector2.ZERO
    });
    this.addChild(node);

    // Data point should be visible if the soccer ball is active AND if the soccer ball took a non-null value.
    Multilink.multilink([soccerBall.isActiveProperty, soccerBall.valueProperty], (isActive, value) => {
      this.visible = isActive && value !== null;
    });

    // show or hide the median highlight
    Multilink.multilink([soccerBall.isMedianObjectProperty, isShowingPlayAreaMedianProperty, soccerBall.isShowingAnimationHighlightProperty], (isMedianObject, isShowingPlayAreaMedian, isShowingAnimationHighlight) => {
      this.medianHighlight.visible = isShowingAnimationHighlight;

      // Median highlights should be in front in z-ordering. Rather than accomplishing this via a different layer,
      // move this to the front when it is visible.
      if (this.medianHighlight.visible) {
        this.moveToFront();
      }
    });
  }
}
centerAndVariability.register('DataPointNode', DataPointNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDQVZPYmplY3ROb2RlIiwiY2VudGVyQW5kVmFyaWFiaWxpdHkiLCJDQVZPYmplY3RUeXBlIiwiQ2lyY2xlIiwiTm9kZSIsIlBhdGgiLCJWZWN0b3IyIiwidGltZXNTb2xpZFNoYXBlIiwiQ0FWQ29uc3RhbnRzIiwiUGxvdFR5cGUiLCJNdWx0aWxpbmsiLCJEYXRhUG9pbnROb2RlIiwiY29uc3RydWN0b3IiLCJzb2NjZXJCYWxsIiwiaXNTaG93aW5nUGxheUFyZWFNZWRpYW5Qcm9wZXJ0eSIsIm1vZGVsVmlld1RyYW5zZm9ybSIsIm9wdGlvbnMiLCJEQVRBX1BPSU5UIiwicmFkaXVzIiwidmlld1JhZGl1cyIsIm1vZGVsVG9WaWV3RGVsdGFYIiwiY2lyY2xlIiwiZmlsbCIsImNlbnRlciIsIlpFUk8iLCJjcm9zcyIsIm1heFdpZHRoIiwiUExPVF9UWVBFX1BST1BFUlRZIiwibGluayIsInBsb3RUeXBlIiwidmlzaWJsZSIsIkRPVF9QTE9UIiwiTElORV9QTE9UIiwibm9kZSIsImNoaWxkcmVuIiwibWF4SGVpZ2h0IiwiYWRkQ2hpbGQiLCJtdWx0aWxpbmsiLCJpc0FjdGl2ZVByb3BlcnR5IiwidmFsdWVQcm9wZXJ0eSIsImlzQWN0aXZlIiwidmFsdWUiLCJpc01lZGlhbk9iamVjdFByb3BlcnR5IiwiaXNTaG93aW5nQW5pbWF0aW9uSGlnaGxpZ2h0UHJvcGVydHkiLCJpc01lZGlhbk9iamVjdCIsImlzU2hvd2luZ1BsYXlBcmVhTWVkaWFuIiwiaXNTaG93aW5nQW5pbWF0aW9uSGlnaGxpZ2h0IiwibWVkaWFuSGlnaGxpZ2h0IiwibW92ZVRvRnJvbnQiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkRhdGFQb2ludE5vZGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuaW1wb3J0IENBVk9iamVjdE5vZGUsIHsgQ0FWT2JqZWN0Tm9kZU9wdGlvbnMgfSBmcm9tICcuL0NBVk9iamVjdE5vZGUuanMnO1xyXG5pbXBvcnQgY2VudGVyQW5kVmFyaWFiaWxpdHkgZnJvbSAnLi4vLi4vY2VudGVyQW5kVmFyaWFiaWxpdHkuanMnO1xyXG5pbXBvcnQgU29jY2VyQmFsbCBmcm9tICcuLi9tb2RlbC9Tb2NjZXJCYWxsLmpzJztcclxuaW1wb3J0IFRSZWFkT25seVByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvVFJlYWRPbmx5UHJvcGVydHkuanMnO1xyXG5pbXBvcnQgTW9kZWxWaWV3VHJhbnNmb3JtMiBmcm9tICcuLi8uLi8uLi8uLi9waGV0Y29tbW9uL2pzL3ZpZXcvTW9kZWxWaWV3VHJhbnNmb3JtMi5qcyc7XHJcbmltcG9ydCBDQVZPYmplY3RUeXBlIGZyb20gJy4uL21vZGVsL0NBVk9iamVjdFR5cGUuanMnO1xyXG5pbXBvcnQgeyBDaXJjbGUsIE5vZGUsIFBhdGgsIFRDb2xvciB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBWZWN0b3IyIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9WZWN0b3IyLmpzJztcclxuaW1wb3J0IHRpbWVzU29saWRTaGFwZSBmcm9tICcuLi8uLi8uLi8uLi9zaGVycGEvanMvZm9udGF3ZXNvbWUtNS90aW1lc1NvbGlkU2hhcGUuanMnO1xyXG5pbXBvcnQgQ0FWQ29uc3RhbnRzIGZyb20gJy4uL0NBVkNvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBQbG90VHlwZSBmcm9tICcuLi9tb2RlbC9QbG90VHlwZS5qcyc7XHJcbmltcG9ydCBNdWx0aWxpbmsgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9NdWx0aWxpbmsuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGF0YVBvaW50Tm9kZSBleHRlbmRzIENBVk9iamVjdE5vZGUge1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIHNvY2NlckJhbGw6IFNvY2NlckJhbGwsIGlzU2hvd2luZ1BsYXlBcmVhTWVkaWFuUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PGJvb2xlYW4+LFxyXG4gICAgICAgICAgICAgICAgICAgICAgbW9kZWxWaWV3VHJhbnNmb3JtOiBNb2RlbFZpZXdUcmFuc2Zvcm0yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogQ0FWT2JqZWN0Tm9kZU9wdGlvbnMgJiB7IGZpbGw6IFRDb2xvciB9ICkge1xyXG5cclxuICAgIHN1cGVyKCBzb2NjZXJCYWxsLCBpc1Nob3dpbmdQbGF5QXJlYU1lZGlhblByb3BlcnR5LCBtb2RlbFZpZXdUcmFuc2Zvcm0sIENBVk9iamVjdFR5cGUuREFUQV9QT0lOVC5yYWRpdXMsIG9wdGlvbnMgKTtcclxuXHJcbiAgICBjb25zdCB2aWV3UmFkaXVzID0gbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3RGVsdGFYKCBDQVZPYmplY3RUeXBlLkRBVEFfUE9JTlQucmFkaXVzICk7XHJcblxyXG4gICAgY29uc3QgY2lyY2xlID0gbmV3IENpcmNsZSggdmlld1JhZGl1cywge1xyXG4gICAgICBmaWxsOiBvcHRpb25zLmZpbGwsXHJcbiAgICAgIGNlbnRlcjogVmVjdG9yMi5aRVJPXHJcbiAgICB9ICk7XHJcbiAgICBjb25zdCBjcm9zcyA9IG5ldyBQYXRoKCB0aW1lc1NvbGlkU2hhcGUsIHtcclxuXHJcbiAgICAgIC8vIExlYXZlIHNvbWUgc3BhY2luZyBiZXR3ZWVuIHRoZSBzdGFja2VkICd4JyBtYXJrc1xyXG4gICAgICBmaWxsOiBvcHRpb25zLmZpbGwsXHJcbiAgICAgIG1heFdpZHRoOiB2aWV3UmFkaXVzICogMiAqIDAuOCxcclxuICAgICAgY2VudGVyOiBWZWN0b3IyLlpFUk9cclxuICAgIH0gKTtcclxuICAgIENBVkNvbnN0YW50cy5QTE9UX1RZUEVfUFJPUEVSVFkubGluayggcGxvdFR5cGUgPT4ge1xyXG4gICAgICBjaXJjbGUudmlzaWJsZSA9IHBsb3RUeXBlID09PSBQbG90VHlwZS5ET1RfUExPVDtcclxuICAgICAgY3Jvc3MudmlzaWJsZSA9IHBsb3RUeXBlID09PSBQbG90VHlwZS5MSU5FX1BMT1Q7XHJcbiAgICB9ICk7XHJcbiAgICBjb25zdCBub2RlID0gbmV3IE5vZGUoIHtcclxuICAgICAgY2hpbGRyZW46IFsgY2lyY2xlLCBjcm9zcyBdLFxyXG5cclxuICAgICAgLy8gaWYgdGhlIGNoaWxkIG5vZGUgaXMgbm9uLXNxdWFyZSwgaXQgc2hvdWxkIHN0aWxsIGZpdCB3aXRoaW4gc3BlY2lmaWVkIGRpbWVuc2lvbnMuIE5vdGU6IHRoaXMgZG9lcyBub3QgY2hhbmdlIHRoZVxyXG4gICAgICAvLyBhc3BlY3QgcmF0aW8uXHJcbiAgICAgIG1heFdpZHRoOiB2aWV3UmFkaXVzICogMixcclxuICAgICAgbWF4SGVpZ2h0OiB2aWV3UmFkaXVzICogMixcclxuICAgICAgY2VudGVyOiBWZWN0b3IyLlpFUk9cclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLmFkZENoaWxkKCBub2RlICk7XHJcblxyXG4gICAgLy8gRGF0YSBwb2ludCBzaG91bGQgYmUgdmlzaWJsZSBpZiB0aGUgc29jY2VyIGJhbGwgaXMgYWN0aXZlIEFORCBpZiB0aGUgc29jY2VyIGJhbGwgdG9vayBhIG5vbi1udWxsIHZhbHVlLlxyXG4gICAgTXVsdGlsaW5rLm11bHRpbGluayggWyBzb2NjZXJCYWxsLmlzQWN0aXZlUHJvcGVydHksIHNvY2NlckJhbGwudmFsdWVQcm9wZXJ0eSBdLCAoIGlzQWN0aXZlLCB2YWx1ZSApID0+IHtcclxuICAgICAgdGhpcy52aXNpYmxlID0gaXNBY3RpdmUgJiYgdmFsdWUgIT09IG51bGw7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gc2hvdyBvciBoaWRlIHRoZSBtZWRpYW4gaGlnaGxpZ2h0XHJcbiAgICBNdWx0aWxpbmsubXVsdGlsaW5rKFxyXG4gICAgICBbIHNvY2NlckJhbGwuaXNNZWRpYW5PYmplY3RQcm9wZXJ0eSwgaXNTaG93aW5nUGxheUFyZWFNZWRpYW5Qcm9wZXJ0eSwgc29jY2VyQmFsbC5pc1Nob3dpbmdBbmltYXRpb25IaWdobGlnaHRQcm9wZXJ0eSBdLFxyXG4gICAgICAoIGlzTWVkaWFuT2JqZWN0LCBpc1Nob3dpbmdQbGF5QXJlYU1lZGlhbiwgaXNTaG93aW5nQW5pbWF0aW9uSGlnaGxpZ2h0ICkgPT4ge1xyXG4gICAgICAgIHRoaXMubWVkaWFuSGlnaGxpZ2h0LnZpc2libGUgPSBpc1Nob3dpbmdBbmltYXRpb25IaWdobGlnaHQ7XHJcblxyXG4gICAgICAgIC8vIE1lZGlhbiBoaWdobGlnaHRzIHNob3VsZCBiZSBpbiBmcm9udCBpbiB6LW9yZGVyaW5nLiBSYXRoZXIgdGhhbiBhY2NvbXBsaXNoaW5nIHRoaXMgdmlhIGEgZGlmZmVyZW50IGxheWVyLFxyXG4gICAgICAgIC8vIG1vdmUgdGhpcyB0byB0aGUgZnJvbnQgd2hlbiBpdCBpcyB2aXNpYmxlLlxyXG4gICAgICAgIGlmICggdGhpcy5tZWRpYW5IaWdobGlnaHQudmlzaWJsZSApIHtcclxuICAgICAgICAgIHRoaXMubW92ZVRvRnJvbnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gKTtcclxuICB9XHJcbn1cclxuXHJcbmNlbnRlckFuZFZhcmlhYmlsaXR5LnJlZ2lzdGVyKCAnRGF0YVBvaW50Tm9kZScsIERhdGFQb2ludE5vZGUgKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLE9BQU9BLGFBQWEsTUFBZ0Msb0JBQW9CO0FBQ3hFLE9BQU9DLG9CQUFvQixNQUFNLCtCQUErQjtBQUloRSxPQUFPQyxhQUFhLE1BQU0sMkJBQTJCO0FBQ3JELFNBQVNDLE1BQU0sRUFBRUMsSUFBSSxFQUFFQyxJQUFJLFFBQWdCLG1DQUFtQztBQUM5RSxPQUFPQyxPQUFPLE1BQU0sK0JBQStCO0FBQ25ELE9BQU9DLGVBQWUsTUFBTSx3REFBd0Q7QUFDcEYsT0FBT0MsWUFBWSxNQUFNLG9CQUFvQjtBQUM3QyxPQUFPQyxRQUFRLE1BQU0sc0JBQXNCO0FBQzNDLE9BQU9DLFNBQVMsTUFBTSxrQ0FBa0M7QUFFeEQsZUFBZSxNQUFNQyxhQUFhLFNBQVNYLGFBQWEsQ0FBQztFQUVoRFks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