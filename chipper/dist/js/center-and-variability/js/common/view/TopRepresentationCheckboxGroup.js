// Copyright 2022-2023, University of Colorado Boulder

/**
 * Supports any combination of checkboxes for each of the screens.
 *
 * @author Chris Klusendorf (PhET Interactive Simulations)
 * @author Sam Reid (PhET Interactive Simulations)
 */

import centerAndVariability from '../../centerAndVariability.js';
import VerticalCheckboxGroup from '../../../../sun/js/VerticalCheckboxGroup.js';
import { GridBox, Line, Node, Text } from '../../../../scenery/js/imports.js';
import CenterAndVariabilityStrings from '../../CenterAndVariabilityStrings.js';
import CAVConstants from '../CAVConstants.js';
import NumberLineNode from './NumberLineNode.js';
import MedianBarNode from './MedianBarNode.js';
import CAVColors from '../CAVColors.js';
// constants
const ICON_WIDTH = 24;
const LINE_WIDTH = MedianBarNode.LINE_WIDTH;

// TODO: Split this up into separate classes for each screen? https://github.com/phetsims/center-and-variability/issues/153
export default class TopRepresentationCheckboxGroup extends VerticalCheckboxGroup {
  static createGridBox(text, icon, iconGroup) {
    return new GridBox({
      spacing: 10,
      stretch: true,
      grow: 1,
      rows: [[new Node({
        children: [text],
        layoutOptions: {
          xAlign: 'left'
        }
      }), iconGroup.createBox(icon, {
        xAlign: 'center',
        layoutOptions: {
          xAlign: 'right'
        }
      })]]
    });
  }
  static getSortDataCheckboxItem(isSortingDataProperty) {
    return {
      createNode: tandem => new Text(CenterAndVariabilityStrings.sortDataStringProperty, CAVConstants.CHECKBOX_TEXT_OPTIONS),
      property: isSortingDataProperty,
      tandemName: 'sortDataCheckbox'
    };
  }
  static getMedianCheckboxWithIconItem(iconGroup, isShowingTopMedianProperty) {
    return {
      createNode: tandem => {
        return TopRepresentationCheckboxGroup.createGridBox(new Text(CenterAndVariabilityStrings.medianStringProperty, CAVConstants.CHECKBOX_TEXT_OPTIONS), new MedianBarNode({
          notchDirection: 'down',
          barStyle: 'continuous',
          arrowScale: 0.75
        }).setMedianBarShape(0, 0, ICON_WIDTH / 2 - LINE_WIDTH / 2, ICON_WIDTH - LINE_WIDTH, true), iconGroup);
      },
      property: isShowingTopMedianProperty,
      tandemName: 'medianCheckbox'
    };
  }
  static getMedianCheckboxWithoutIconItem(isShowingTopMedianProperty) {
    return {
      createNode: tandem => new Text(CenterAndVariabilityStrings.medianStringProperty, CAVConstants.CHECKBOX_TEXT_OPTIONS),
      property: isShowingTopMedianProperty,
      tandemName: 'medianCheckbox'
    };
  }
  static getMeanCheckboxWithIconItem(iconGroup, isShowingTopMeanProperty) {
    return {
      createNode: tandem => {
        return TopRepresentationCheckboxGroup.createGridBox(new Text(CenterAndVariabilityStrings.meanStringProperty, CAVConstants.CHECKBOX_TEXT_OPTIONS), new Node({
          children: [
          // Horizontal line above the triangle
          new Line(-ICON_WIDTH / 2, -LINE_WIDTH / 2, ICON_WIDTH / 2, -LINE_WIDTH / 2, {
            stroke: CAVColors.meanColorProperty,
            lineWidth: LINE_WIDTH
          }),
          // Triangle
          NumberLineNode.createMeanIndicatorNode(false, true)]
        }), iconGroup);
      },
      property: isShowingTopMeanProperty,
      tandemName: 'meanCheckbox'
    };
  }
  static getRangeCheckboxWithIconItem(iconGroup, isShowingRangeProperty) {
    return {
      createNode: tandem => {
        return TopRepresentationCheckboxGroup.createGridBox(new Text(CenterAndVariabilityStrings.rangeStringProperty, CAVConstants.CHECKBOX_TEXT_OPTIONS),
        // TODO: Replace with range icon, see https://github.com/phetsims/center-and-variability/issues/156
        new Node({
          children: [
          // Horizontal line above the triangle
          new Line(-ICON_WIDTH / 2, -LINE_WIDTH / 2, ICON_WIDTH / 2, -LINE_WIDTH / 2, {
            stroke: CAVColors.meanColorProperty,
            lineWidth: LINE_WIDTH
          }),
          // Triangle
          NumberLineNode.createMeanIndicatorNode(false, true)]
        }), iconGroup);
      },
      property: isShowingRangeProperty,
      tandemName: 'rangeCheckbox'
    };
  }
  static getIQRCheckboxWithIconItem(iconGroup, isShowingIQRProperty) {
    return {
      createNode: tandem => {
        return TopRepresentationCheckboxGroup.createGridBox(new Text(CenterAndVariabilityStrings.iqrStringProperty, CAVConstants.CHECKBOX_TEXT_OPTIONS),
        // TODO: Replace with IQR icon, see https://github.com/phetsims/center-and-variability/issues/156
        new Node({
          children: [
          // Horizontal line above the triangle
          new Line(-ICON_WIDTH / 2, -LINE_WIDTH / 2, ICON_WIDTH / 2, -LINE_WIDTH / 2, {
            stroke: CAVColors.meanColorProperty,
            lineWidth: LINE_WIDTH
          }),
          // Triangle
          NumberLineNode.createMeanIndicatorNode(false, true)]
        }), iconGroup);
      },
      property: isShowingIQRProperty,
      tandemName: 'iqrCheckbox'
    };
  }
  static getMADCheckboxWithIconItem(iconGroup, isShowingMADProperty) {
    return {
      createNode: tandem => {
        return TopRepresentationCheckboxGroup.createGridBox(new Text(CenterAndVariabilityStrings.madStringProperty, CAVConstants.CHECKBOX_TEXT_OPTIONS),
        // TODO: Replace with MAD icon, see https://github.com/phetsims/center-and-variability/issues/156
        new Node({
          children: [
          // Horizontal line above the triangle
          new Line(-ICON_WIDTH / 2, -LINE_WIDTH / 2, ICON_WIDTH / 2, -LINE_WIDTH / 2, {
            stroke: CAVColors.meanColorProperty,
            lineWidth: LINE_WIDTH
          }),
          // Triangle
          NumberLineNode.createMeanIndicatorNode(false, true)]
        }), iconGroup);
      },
      property: isShowingMADProperty,
      tandemName: 'madCheckbox'
    };
  }
}
centerAndVariability.register('TopRepresentationCheckboxGroup', TopRepresentationCheckboxGroup);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjZW50ZXJBbmRWYXJpYWJpbGl0eSIsIlZlcnRpY2FsQ2hlY2tib3hHcm91cCIsIkdyaWRCb3giLCJMaW5lIiwiTm9kZSIsIlRleHQiLCJDZW50ZXJBbmRWYXJpYWJpbGl0eVN0cmluZ3MiLCJDQVZDb25zdGFudHMiLCJOdW1iZXJMaW5lTm9kZSIsIk1lZGlhbkJhck5vZGUiLCJDQVZDb2xvcnMiLCJJQ09OX1dJRFRIIiwiTElORV9XSURUSCIsIlRvcFJlcHJlc2VudGF0aW9uQ2hlY2tib3hHcm91cCIsImNyZWF0ZUdyaWRCb3giLCJ0ZXh0IiwiaWNvbiIsImljb25Hcm91cCIsInNwYWNpbmciLCJzdHJldGNoIiwiZ3JvdyIsInJvd3MiLCJjaGlsZHJlbiIsImxheW91dE9wdGlvbnMiLCJ4QWxpZ24iLCJjcmVhdGVCb3giLCJnZXRTb3J0RGF0YUNoZWNrYm94SXRlbSIsImlzU29ydGluZ0RhdGFQcm9wZXJ0eSIsImNyZWF0ZU5vZGUiLCJ0YW5kZW0iLCJzb3J0RGF0YVN0cmluZ1Byb3BlcnR5IiwiQ0hFQ0tCT1hfVEVYVF9PUFRJT05TIiwicHJvcGVydHkiLCJ0YW5kZW1OYW1lIiwiZ2V0TWVkaWFuQ2hlY2tib3hXaXRoSWNvbkl0ZW0iLCJpc1Nob3dpbmdUb3BNZWRpYW5Qcm9wZXJ0eSIsIm1lZGlhblN0cmluZ1Byb3BlcnR5Iiwibm90Y2hEaXJlY3Rpb24iLCJiYXJTdHlsZSIsImFycm93U2NhbGUiLCJzZXRNZWRpYW5CYXJTaGFwZSIsImdldE1lZGlhbkNoZWNrYm94V2l0aG91dEljb25JdGVtIiwiZ2V0TWVhbkNoZWNrYm94V2l0aEljb25JdGVtIiwiaXNTaG93aW5nVG9wTWVhblByb3BlcnR5IiwibWVhblN0cmluZ1Byb3BlcnR5Iiwic3Ryb2tlIiwibWVhbkNvbG9yUHJvcGVydHkiLCJsaW5lV2lkdGgiLCJjcmVhdGVNZWFuSW5kaWNhdG9yTm9kZSIsImdldFJhbmdlQ2hlY2tib3hXaXRoSWNvbkl0ZW0iLCJpc1Nob3dpbmdSYW5nZVByb3BlcnR5IiwicmFuZ2VTdHJpbmdQcm9wZXJ0eSIsImdldElRUkNoZWNrYm94V2l0aEljb25JdGVtIiwiaXNTaG93aW5nSVFSUHJvcGVydHkiLCJpcXJTdHJpbmdQcm9wZXJ0eSIsImdldE1BRENoZWNrYm94V2l0aEljb25JdGVtIiwiaXNTaG93aW5nTUFEUHJvcGVydHkiLCJtYWRTdHJpbmdQcm9wZXJ0eSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiVG9wUmVwcmVzZW50YXRpb25DaGVja2JveEdyb3VwLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIyLTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFN1cHBvcnRzIGFueSBjb21iaW5hdGlvbiBvZiBjaGVja2JveGVzIGZvciBlYWNoIG9mIHRoZSBzY3JlZW5zLlxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIEtsdXNlbmRvcmYgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IGNlbnRlckFuZFZhcmlhYmlsaXR5IGZyb20gJy4uLy4uL2NlbnRlckFuZFZhcmlhYmlsaXR5LmpzJztcclxuaW1wb3J0IFZlcnRpY2FsQ2hlY2tib3hHcm91cCwgeyBWZXJ0aWNhbENoZWNrYm94R3JvdXBJdGVtIH0gZnJvbSAnLi4vLi4vLi4vLi4vc3VuL2pzL1ZlcnRpY2FsQ2hlY2tib3hHcm91cC5qcyc7XHJcbmltcG9ydCB7IEFsaWduR3JvdXAsIEdyaWRCb3gsIExpbmUsIE5vZGUsIFRleHQgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgQ2VudGVyQW5kVmFyaWFiaWxpdHlTdHJpbmdzIGZyb20gJy4uLy4uL0NlbnRlckFuZFZhcmlhYmlsaXR5U3RyaW5ncy5qcyc7XHJcbmltcG9ydCBDQVZDb25zdGFudHMgZnJvbSAnLi4vQ0FWQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IE51bWJlckxpbmVOb2RlIGZyb20gJy4vTnVtYmVyTGluZU5vZGUuanMnO1xyXG5pbXBvcnQgTWVkaWFuQmFyTm9kZSBmcm9tICcuL01lZGlhbkJhck5vZGUuanMnO1xyXG5pbXBvcnQgQ0FWQ29sb3JzIGZyb20gJy4uL0NBVkNvbG9ycy5qcyc7XHJcbmltcG9ydCBUYW5kZW0gZnJvbSAnLi4vLi4vLi4vLi4vdGFuZGVtL2pzL1RhbmRlbS5qcyc7XHJcbmltcG9ydCBQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1Byb3BlcnR5LmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBJQ09OX1dJRFRIID0gMjQ7XHJcblxyXG5jb25zdCBMSU5FX1dJRFRIID0gTWVkaWFuQmFyTm9kZS5MSU5FX1dJRFRIO1xyXG5cclxuLy8gVE9ETzogU3BsaXQgdGhpcyB1cCBpbnRvIHNlcGFyYXRlIGNsYXNzZXMgZm9yIGVhY2ggc2NyZWVuPyBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvY2VudGVyLWFuZC12YXJpYWJpbGl0eS9pc3N1ZXMvMTUzXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRvcFJlcHJlc2VudGF0aW9uQ2hlY2tib3hHcm91cCBleHRlbmRzIFZlcnRpY2FsQ2hlY2tib3hHcm91cCB7XHJcblxyXG4gIHByaXZhdGUgc3RhdGljIGNyZWF0ZUdyaWRCb3goIHRleHQ6IE5vZGUsIGljb246IE5vZGUsIGljb25Hcm91cDogQWxpZ25Hcm91cCApOiBHcmlkQm94IHtcclxuICAgIHJldHVybiBuZXcgR3JpZEJveCgge1xyXG4gICAgICBzcGFjaW5nOiAxMCxcclxuICAgICAgc3RyZXRjaDogdHJ1ZSxcclxuICAgICAgZ3JvdzogMSxcclxuICAgICAgcm93czogWyBbIG5ldyBOb2RlKCB7IGNoaWxkcmVuOiBbIHRleHQgXSwgbGF5b3V0T3B0aW9uczogeyB4QWxpZ246ICdsZWZ0JyB9IH0gKSxcclxuICAgICAgICBpY29uR3JvdXAuY3JlYXRlQm94KCBpY29uLCB7IHhBbGlnbjogJ2NlbnRlcicsIGxheW91dE9wdGlvbnM6IHsgeEFsaWduOiAncmlnaHQnIH0gfSApIF1cclxuICAgICAgXVxyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBnZXRTb3J0RGF0YUNoZWNrYm94SXRlbSggaXNTb3J0aW5nRGF0YVByb3BlcnR5OiBQcm9wZXJ0eTxib29sZWFuPiApOiBWZXJ0aWNhbENoZWNrYm94R3JvdXBJdGVtIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGNyZWF0ZU5vZGU6ICggdGFuZGVtOiBUYW5kZW0gKSA9PiBuZXcgVGV4dCggQ2VudGVyQW5kVmFyaWFiaWxpdHlTdHJpbmdzLnNvcnREYXRhU3RyaW5nUHJvcGVydHksIENBVkNvbnN0YW50cy5DSEVDS0JPWF9URVhUX09QVElPTlMgKSxcclxuICAgICAgcHJvcGVydHk6IGlzU29ydGluZ0RhdGFQcm9wZXJ0eSxcclxuICAgICAgdGFuZGVtTmFtZTogJ3NvcnREYXRhQ2hlY2tib3gnXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBnZXRNZWRpYW5DaGVja2JveFdpdGhJY29uSXRlbSggaWNvbkdyb3VwOiBBbGlnbkdyb3VwLCBpc1Nob3dpbmdUb3BNZWRpYW5Qcm9wZXJ0eTogUHJvcGVydHk8Ym9vbGVhbj4gKTogVmVydGljYWxDaGVja2JveEdyb3VwSXRlbSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBjcmVhdGVOb2RlOiAoIHRhbmRlbTogVGFuZGVtICkgPT4ge1xyXG4gICAgICAgIHJldHVybiBUb3BSZXByZXNlbnRhdGlvbkNoZWNrYm94R3JvdXAuY3JlYXRlR3JpZEJveChcclxuICAgICAgICAgIG5ldyBUZXh0KCBDZW50ZXJBbmRWYXJpYWJpbGl0eVN0cmluZ3MubWVkaWFuU3RyaW5nUHJvcGVydHksIENBVkNvbnN0YW50cy5DSEVDS0JPWF9URVhUX09QVElPTlMgKSxcclxuICAgICAgICAgIG5ldyBNZWRpYW5CYXJOb2RlKCB7XHJcbiAgICAgICAgICAgIG5vdGNoRGlyZWN0aW9uOiAnZG93bicsXHJcbiAgICAgICAgICAgIGJhclN0eWxlOiAnY29udGludW91cycsXHJcbiAgICAgICAgICAgIGFycm93U2NhbGU6IDAuNzVcclxuICAgICAgICAgIH0gKVxyXG4gICAgICAgICAgICAuc2V0TWVkaWFuQmFyU2hhcGUoIDAsIDAsIElDT05fV0lEVEggLyAyIC0gTElORV9XSURUSCAvIDIsIElDT05fV0lEVEggLSBMSU5FX1dJRFRILCB0cnVlICksXHJcbiAgICAgICAgICBpY29uR3JvdXBcclxuICAgICAgICApO1xyXG4gICAgICB9LFxyXG4gICAgICBwcm9wZXJ0eTogaXNTaG93aW5nVG9wTWVkaWFuUHJvcGVydHksXHJcbiAgICAgIHRhbmRlbU5hbWU6ICdtZWRpYW5DaGVja2JveCdcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGdldE1lZGlhbkNoZWNrYm94V2l0aG91dEljb25JdGVtKCBpc1Nob3dpbmdUb3BNZWRpYW5Qcm9wZXJ0eTogUHJvcGVydHk8Ym9vbGVhbj4gKTogVmVydGljYWxDaGVja2JveEdyb3VwSXRlbSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBjcmVhdGVOb2RlOiAoIHRhbmRlbTogVGFuZGVtICkgPT4gbmV3IFRleHQoIENlbnRlckFuZFZhcmlhYmlsaXR5U3RyaW5ncy5tZWRpYW5TdHJpbmdQcm9wZXJ0eSwgQ0FWQ29uc3RhbnRzLkNIRUNLQk9YX1RFWFRfT1BUSU9OUyApLFxyXG4gICAgICBwcm9wZXJ0eTogaXNTaG93aW5nVG9wTWVkaWFuUHJvcGVydHksXHJcbiAgICAgIHRhbmRlbU5hbWU6ICdtZWRpYW5DaGVja2JveCdcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGdldE1lYW5DaGVja2JveFdpdGhJY29uSXRlbSggaWNvbkdyb3VwOiBBbGlnbkdyb3VwLCBpc1Nob3dpbmdUb3BNZWFuUHJvcGVydHk6IFByb3BlcnR5PGJvb2xlYW4+ICk6IFZlcnRpY2FsQ2hlY2tib3hHcm91cEl0ZW0ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgY3JlYXRlTm9kZTogKCB0YW5kZW06IFRhbmRlbSApID0+IHtcclxuICAgICAgICByZXR1cm4gVG9wUmVwcmVzZW50YXRpb25DaGVja2JveEdyb3VwLmNyZWF0ZUdyaWRCb3goXHJcbiAgICAgICAgICBuZXcgVGV4dCggQ2VudGVyQW5kVmFyaWFiaWxpdHlTdHJpbmdzLm1lYW5TdHJpbmdQcm9wZXJ0eSwgQ0FWQ29uc3RhbnRzLkNIRUNLQk9YX1RFWFRfT1BUSU9OUyApLFxyXG4gICAgICAgICAgbmV3IE5vZGUoIHtcclxuICAgICAgICAgICAgY2hpbGRyZW46IFtcclxuXHJcbiAgICAgICAgICAgICAgLy8gSG9yaXpvbnRhbCBsaW5lIGFib3ZlIHRoZSB0cmlhbmdsZVxyXG4gICAgICAgICAgICAgIG5ldyBMaW5lKCAtSUNPTl9XSURUSCAvIDIsIC1MSU5FX1dJRFRIIC8gMiwgSUNPTl9XSURUSCAvIDIsIC1MSU5FX1dJRFRIIC8gMiwge1xyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBDQVZDb2xvcnMubWVhbkNvbG9yUHJvcGVydHksXHJcbiAgICAgICAgICAgICAgICBsaW5lV2lkdGg6IExJTkVfV0lEVEhcclxuICAgICAgICAgICAgICB9ICksXHJcblxyXG4gICAgICAgICAgICAgIC8vIFRyaWFuZ2xlXHJcbiAgICAgICAgICAgICAgTnVtYmVyTGluZU5vZGUuY3JlYXRlTWVhbkluZGljYXRvck5vZGUoIGZhbHNlLCB0cnVlIClcclxuICAgICAgICAgICAgXVxyXG4gICAgICAgICAgfSApLFxyXG4gICAgICAgICAgaWNvbkdyb3VwXHJcbiAgICAgICAgKTtcclxuICAgICAgfSxcclxuICAgICAgcHJvcGVydHk6IGlzU2hvd2luZ1RvcE1lYW5Qcm9wZXJ0eSxcclxuICAgICAgdGFuZGVtTmFtZTogJ21lYW5DaGVja2JveCdcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGdldFJhbmdlQ2hlY2tib3hXaXRoSWNvbkl0ZW0oIGljb25Hcm91cDogQWxpZ25Hcm91cCwgaXNTaG93aW5nUmFuZ2VQcm9wZXJ0eTogUHJvcGVydHk8Ym9vbGVhbj4gKTogVmVydGljYWxDaGVja2JveEdyb3VwSXRlbSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBjcmVhdGVOb2RlOiAoIHRhbmRlbTogVGFuZGVtICkgPT4ge1xyXG4gICAgICAgIHJldHVybiBUb3BSZXByZXNlbnRhdGlvbkNoZWNrYm94R3JvdXAuY3JlYXRlR3JpZEJveChcclxuICAgICAgICAgIG5ldyBUZXh0KCBDZW50ZXJBbmRWYXJpYWJpbGl0eVN0cmluZ3MucmFuZ2VTdHJpbmdQcm9wZXJ0eSwgQ0FWQ29uc3RhbnRzLkNIRUNLQk9YX1RFWFRfT1BUSU9OUyApLFxyXG4gICAgICAgICAgLy8gVE9ETzogUmVwbGFjZSB3aXRoIHJhbmdlIGljb24sIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvY2VudGVyLWFuZC12YXJpYWJpbGl0eS9pc3N1ZXMvMTU2XHJcbiAgICAgICAgICBuZXcgTm9kZSgge1xyXG4gICAgICAgICAgICBjaGlsZHJlbjogW1xyXG5cclxuICAgICAgICAgICAgICAvLyBIb3Jpem9udGFsIGxpbmUgYWJvdmUgdGhlIHRyaWFuZ2xlXHJcbiAgICAgICAgICAgICAgbmV3IExpbmUoIC1JQ09OX1dJRFRIIC8gMiwgLUxJTkVfV0lEVEggLyAyLCBJQ09OX1dJRFRIIC8gMiwgLUxJTkVfV0lEVEggLyAyLCB7XHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IENBVkNvbG9ycy5tZWFuQ29sb3JQcm9wZXJ0eSxcclxuICAgICAgICAgICAgICAgIGxpbmVXaWR0aDogTElORV9XSURUSFxyXG4gICAgICAgICAgICAgIH0gKSxcclxuXHJcbiAgICAgICAgICAgICAgLy8gVHJpYW5nbGVcclxuICAgICAgICAgICAgICBOdW1iZXJMaW5lTm9kZS5jcmVhdGVNZWFuSW5kaWNhdG9yTm9kZSggZmFsc2UsIHRydWUgKVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgICB9ICksXHJcbiAgICAgICAgICBpY29uR3JvdXBcclxuICAgICAgICApO1xyXG4gICAgICB9LFxyXG4gICAgICBwcm9wZXJ0eTogaXNTaG93aW5nUmFuZ2VQcm9wZXJ0eSxcclxuICAgICAgdGFuZGVtTmFtZTogJ3JhbmdlQ2hlY2tib3gnXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBnZXRJUVJDaGVja2JveFdpdGhJY29uSXRlbSggaWNvbkdyb3VwOiBBbGlnbkdyb3VwLCBpc1Nob3dpbmdJUVJQcm9wZXJ0eTogUHJvcGVydHk8Ym9vbGVhbj4gKTogVmVydGljYWxDaGVja2JveEdyb3VwSXRlbSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBjcmVhdGVOb2RlOiAoIHRhbmRlbTogVGFuZGVtICkgPT4ge1xyXG4gICAgICAgIHJldHVybiBUb3BSZXByZXNlbnRhdGlvbkNoZWNrYm94R3JvdXAuY3JlYXRlR3JpZEJveChcclxuICAgICAgICAgIG5ldyBUZXh0KCBDZW50ZXJBbmRWYXJpYWJpbGl0eVN0cmluZ3MuaXFyU3RyaW5nUHJvcGVydHksIENBVkNvbnN0YW50cy5DSEVDS0JPWF9URVhUX09QVElPTlMgKSxcclxuICAgICAgICAgIC8vIFRPRE86IFJlcGxhY2Ugd2l0aCBJUVIgaWNvbiwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9jZW50ZXItYW5kLXZhcmlhYmlsaXR5L2lzc3Vlcy8xNTZcclxuICAgICAgICAgIG5ldyBOb2RlKCB7XHJcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXHJcblxyXG4gICAgICAgICAgICAgIC8vIEhvcml6b250YWwgbGluZSBhYm92ZSB0aGUgdHJpYW5nbGVcclxuICAgICAgICAgICAgICBuZXcgTGluZSggLUlDT05fV0lEVEggLyAyLCAtTElORV9XSURUSCAvIDIsIElDT05fV0lEVEggLyAyLCAtTElORV9XSURUSCAvIDIsIHtcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogQ0FWQ29sb3JzLm1lYW5Db2xvclByb3BlcnR5LFxyXG4gICAgICAgICAgICAgICAgbGluZVdpZHRoOiBMSU5FX1dJRFRIXHJcbiAgICAgICAgICAgICAgfSApLFxyXG5cclxuICAgICAgICAgICAgICAvLyBUcmlhbmdsZVxyXG4gICAgICAgICAgICAgIE51bWJlckxpbmVOb2RlLmNyZWF0ZU1lYW5JbmRpY2F0b3JOb2RlKCBmYWxzZSwgdHJ1ZSApXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICAgIH0gKSxcclxuICAgICAgICAgIGljb25Hcm91cFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHByb3BlcnR5OiBpc1Nob3dpbmdJUVJQcm9wZXJ0eSxcclxuICAgICAgdGFuZGVtTmFtZTogJ2lxckNoZWNrYm94J1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgZ2V0TUFEQ2hlY2tib3hXaXRoSWNvbkl0ZW0oIGljb25Hcm91cDogQWxpZ25Hcm91cCwgaXNTaG93aW5nTUFEUHJvcGVydHk6IFByb3BlcnR5PGJvb2xlYW4+ICk6IFZlcnRpY2FsQ2hlY2tib3hHcm91cEl0ZW0ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgY3JlYXRlTm9kZTogKCB0YW5kZW06IFRhbmRlbSApID0+IHtcclxuICAgICAgICByZXR1cm4gVG9wUmVwcmVzZW50YXRpb25DaGVja2JveEdyb3VwLmNyZWF0ZUdyaWRCb3goXHJcbiAgICAgICAgICBuZXcgVGV4dCggQ2VudGVyQW5kVmFyaWFiaWxpdHlTdHJpbmdzLm1hZFN0cmluZ1Byb3BlcnR5LCBDQVZDb25zdGFudHMuQ0hFQ0tCT1hfVEVYVF9PUFRJT05TICksXHJcbiAgICAgICAgICAvLyBUT0RPOiBSZXBsYWNlIHdpdGggTUFEIGljb24sIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvY2VudGVyLWFuZC12YXJpYWJpbGl0eS9pc3N1ZXMvMTU2XHJcbiAgICAgICAgICBuZXcgTm9kZSgge1xyXG4gICAgICAgICAgICBjaGlsZHJlbjogW1xyXG5cclxuICAgICAgICAgICAgICAvLyBIb3Jpem9udGFsIGxpbmUgYWJvdmUgdGhlIHRyaWFuZ2xlXHJcbiAgICAgICAgICAgICAgbmV3IExpbmUoIC1JQ09OX1dJRFRIIC8gMiwgLUxJTkVfV0lEVEggLyAyLCBJQ09OX1dJRFRIIC8gMiwgLUxJTkVfV0lEVEggLyAyLCB7XHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IENBVkNvbG9ycy5tZWFuQ29sb3JQcm9wZXJ0eSxcclxuICAgICAgICAgICAgICAgIGxpbmVXaWR0aDogTElORV9XSURUSFxyXG4gICAgICAgICAgICAgIH0gKSxcclxuXHJcbiAgICAgICAgICAgICAgLy8gVHJpYW5nbGVcclxuICAgICAgICAgICAgICBOdW1iZXJMaW5lTm9kZS5jcmVhdGVNZWFuSW5kaWNhdG9yTm9kZSggZmFsc2UsIHRydWUgKVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgICB9ICksXHJcbiAgICAgICAgICBpY29uR3JvdXBcclxuICAgICAgICApO1xyXG4gICAgICB9LFxyXG4gICAgICBwcm9wZXJ0eTogaXNTaG93aW5nTUFEUHJvcGVydHksXHJcbiAgICAgIHRhbmRlbU5hbWU6ICdtYWRDaGVja2JveCdcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5jZW50ZXJBbmRWYXJpYWJpbGl0eS5yZWdpc3RlciggJ1RvcFJlcHJlc2VudGF0aW9uQ2hlY2tib3hHcm91cCcsIFRvcFJlcHJlc2VudGF0aW9uQ2hlY2tib3hHcm91cCApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLG9CQUFvQixNQUFNLCtCQUErQjtBQUNoRSxPQUFPQyxxQkFBcUIsTUFBcUMsNkNBQTZDO0FBQzlHLFNBQXFCQyxPQUFPLEVBQUVDLElBQUksRUFBRUMsSUFBSSxFQUFFQyxJQUFJLFFBQVEsbUNBQW1DO0FBQ3pGLE9BQU9DLDJCQUEyQixNQUFN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