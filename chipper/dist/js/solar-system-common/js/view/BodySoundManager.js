// Copyright 2023, University of Colorado Boulder

/**
 * Module in charge of controlling the sounds of the bodies in the simulation.
 *
 * @author AgustÃ­n Vallejo (PhET Interactive Simulations)
 */

import SoundClip from '../../../tambo/js/sound-generators/SoundClip.js';
import soundManager from '../../../tambo/js/soundManager.js';
import soundConstants from '../../../tambo/js/soundConstants.js';
import Utils from '../../../dot/js/Utils.js';
import Bodies_Collide_Absorb_2_to_1_mp3 from '../../sounds/Bodies_Collide_Absorb_2_to_1_mp3.js';
import Bodies_Collide_Absorb_3_to_2_mp3 from '../../sounds/Bodies_Collide_Absorb_3_to_2_mp3.js';
import Bodies_Collide_Absorb_4_to_3_mp3 from '../../sounds/Bodies_Collide_Absorb_4_to_3_mp3.js';
import Collision_Sound_mp3 from '../../sounds/Collision_Sound_mp3.js';
import Mass_Selection_1_mp3 from '../../sounds/Mass_Selection_1_mp3.js';
import Mass_Selection_2_mp3 from '../../sounds/Mass_Selection_2_mp3.js';
import Mass_Selection_3_mp3 from '../../sounds/Mass_Selection_3_mp3.js';
import Mass_Selection_4_mp3 from '../../sounds/Mass_Selection_4_mp3.js';
import Metronome_Sound_1_mp3 from '../../sounds/Metronome_Sound_1_mp3.js';
import Metronome_Sound_2_mp3 from '../../sounds/Metronome_Sound_2_mp3.js';
import Metronome_Sound_Reverb_1_mp3 from '../../sounds/Metronome_Sound_Reverb_1_mp3.js';
import Metronome_Sound_Reverb_2_mp3 from '../../sounds/Metronome_Sound_Reverb_2_mp3.js';
import solarSystemCommon from '../solarSystemCommon.js';
import SolarSystemCommonConstants from '../SolarSystemCommonConstants.js';
const bodyNumberSounds = [Mass_Selection_1_mp3, Mass_Selection_2_mp3, Mass_Selection_3_mp3, Mass_Selection_4_mp3];

// Sounds for when the bodies are reduced from the number control or collision
const removalSounds = [Bodies_Collide_Absorb_2_to_1_mp3, Bodies_Collide_Absorb_3_to_2_mp3, Bodies_Collide_Absorb_4_to_3_mp3, Collision_Sound_mp3];
const metronomeSounds = [Metronome_Sound_1_mp3, Metronome_Sound_2_mp3, Metronome_Sound_Reverb_1_mp3, Metronome_Sound_Reverb_2_mp3];

// Other scales available to play around with!
const METRONOME = [7, 0, 0, 0, 0, 0]; // METRONOME
// const METRONOME = [ 4, 2, 0, 2, 4, 4 ]; // ADDITIONAL
// const METRONOME = [ 0, 2, 4, 5, 7, 9 ]; // SCALE
// const METRONOME = [ 0, 2, 4, 7, 9, 12 ]; // PENTATONIC_SCALE
// const METRONOME = [ 0, 3, 5, 6, 7, 10 ]; // BLUES_SCALE

export default class BodySoundManager {
  constructor(model) {
    this.model = model;
    this.bodyNumberSoundClips = bodyNumberSounds.map(sound => new SoundClip(sound, {
      initialOutputLevel: SolarSystemCommonConstants.DEFAULT_SOUND_OUTPUT_LEVEL * 2
    }));
    this.removalSoundClips = removalSounds.map(sound => new SoundClip(sound, {
      initialOutputLevel: SolarSystemCommonConstants.DEFAULT_SOUND_OUTPUT_LEVEL * 2
    }));
    this.metronomeSoundClips = metronomeSounds.map(sound => new SoundClip(sound, {
      rateChangesAffectPlayingSounds: false
    }));
    this.bodyNumberSoundClips.forEach(sound => soundManager.addSoundGenerator(sound));
    this.removalSoundClips.forEach(sound => soundManager.addSoundGenerator(sound));
    this.metronomeSoundClips.forEach(sound => soundManager.addSoundGenerator(sound));

    // Increasing the level of the collision sound
    this.removalSoundClips[this.removalSoundClips.length - 1].setOutputLevel(10);
  }
  playBodyAddedSound(bodyNumber) {
    this.bodyNumberSoundClips[bodyNumber].play();
  }
  playBodyRemovedSound(bodyNumber) {
    this.removalSoundClips[bodyNumber].play();
  }

  /**
   *  This function plays the melody described in METRONOME based on the division index.
   *  Because of how scales work, they are powers of the twelfth root of 2.
   *
   *  The amount of divisions shifts the metronome sound up or down half an octave (1 to 1.5)
   *
   *  And depending on the semi major axis, the sound is small (muted) or big (with reverb)
   */
  playOrbitalMetronome(i, semiMajorAxis, divisions) {
    const smallSound = this.metronomeSoundClips[0];
    const bigSound = this.metronomeSoundClips[2];
    const divisionOffset = 1 + divisions / 12;
    smallSound.setPlaybackRate(Math.pow(soundConstants.TWELFTH_ROOT_OF_TWO, METRONOME[i]) * divisionOffset);
    smallSound.setOutputLevel(Utils.clamp(Utils.linear(0, 500, 1, 0, semiMajorAxis), 0, 1));
    smallSound.play();
    bigSound.setPlaybackRate(Math.pow(soundConstants.TWELFTH_ROOT_OF_TWO, METRONOME[i]) * divisionOffset);
    bigSound.setOutputLevel(Utils.clamp(Utils.linear(100, 500, 0, 1, semiMajorAxis), 0, 1));
    bigSound.play();
  }
}
solarSystemCommon.register('BodySoundManager', BodySoundManager);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTb3VuZENsaXAiLCJzb3VuZE1hbmFnZXIiLCJzb3VuZENvbnN0YW50cyIsIlV0aWxzIiwiQm9kaWVzX0NvbGxpZGVfQWJzb3JiXzJfdG9fMV9tcDMiLCJCb2RpZXNfQ29sbGlkZV9BYnNvcmJfM190b18yX21wMyIsIkJvZGllc19Db2xsaWRlX0Fic29yYl80X3RvXzNfbXAzIiwiQ29sbGlzaW9uX1NvdW5kX21wMyIsIk1hc3NfU2VsZWN0aW9uXzFfbXAzIiwiTWFzc19TZWxlY3Rpb25fMl9tcDMiLCJNYXNzX1NlbGVjdGlvbl8zX21wMyIsIk1hc3NfU2VsZWN0aW9uXzRfbXAzIiwiTWV0cm9ub21lX1NvdW5kXzFfbXAzIiwiTWV0cm9ub21lX1NvdW5kXzJfbXAzIiwiTWV0cm9ub21lX1NvdW5kX1JldmVyYl8xX21wMyIsIk1ldHJvbm9tZV9Tb3VuZF9SZXZlcmJfMl9tcDMiLCJzb2xhclN5c3RlbUNvbW1vbiIsIlNvbGFyU3lzdGVtQ29tbW9uQ29uc3RhbnRzIiwiYm9keU51bWJlclNvdW5kcyIsInJlbW92YWxTb3VuZHMiLCJtZXRyb25vbWVTb3VuZHMiLCJNRVRST05PTUUiLCJCb2R5U291bmRNYW5hZ2VyIiwiY29uc3RydWN0b3IiLCJtb2RlbCIsImJvZHlOdW1iZXJTb3VuZENsaXBzIiwibWFwIiwic291bmQiLCJpbml0aWFsT3V0cHV0TGV2ZWwiLCJERUZBVUxUX1NPVU5EX09VVFBVVF9MRVZFTCIsInJlbW92YWxTb3VuZENsaXBzIiwibWV0cm9ub21lU291bmRDbGlwcyIsInJhdGVDaGFuZ2VzQWZmZWN0UGxheWluZ1NvdW5kcyIsImZvckVhY2giLCJhZGRTb3VuZEdlbmVyYXRvciIsImxlbmd0aCIsInNldE91dHB1dExldmVsIiwicGxheUJvZHlBZGRlZFNvdW5kIiwiYm9keU51bWJlciIsInBsYXkiLCJwbGF5Qm9keVJlbW92ZWRTb3VuZCIsInBsYXlPcmJpdGFsTWV0cm9ub21lIiwiaSIsInNlbWlNYWpvckF4aXMiLCJkaXZpc2lvbnMiLCJzbWFsbFNvdW5kIiwiYmlnU291bmQiLCJkaXZpc2lvbk9mZnNldCIsInNldFBsYXliYWNrUmF0ZSIsIk1hdGgiLCJwb3ciLCJUV0VMRlRIX1JPT1RfT0ZfVFdPIiwiY2xhbXAiLCJsaW5lYXIiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkJvZHlTb3VuZE1hbmFnZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIE1vZHVsZSBpbiBjaGFyZ2Ugb2YgY29udHJvbGxpbmcgdGhlIHNvdW5kcyBvZiB0aGUgYm9kaWVzIGluIHRoZSBzaW11bGF0aW9uLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEFndXN0w61uIFZhbGxlam8gKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IFNvbGFyU3lzdGVtQ29tbW9uTW9kZWwgZnJvbSAnLi4vbW9kZWwvU29sYXJTeXN0ZW1Db21tb25Nb2RlbC5qcyc7XHJcbmltcG9ydCBTb3VuZENsaXAgZnJvbSAnLi4vLi4vLi4vdGFtYm8vanMvc291bmQtZ2VuZXJhdG9ycy9Tb3VuZENsaXAuanMnO1xyXG5pbXBvcnQgc291bmRNYW5hZ2VyIGZyb20gJy4uLy4uLy4uL3RhbWJvL2pzL3NvdW5kTWFuYWdlci5qcyc7XHJcbmltcG9ydCBzb3VuZENvbnN0YW50cyBmcm9tICcuLi8uLi8uLi90YW1iby9qcy9zb3VuZENvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBVdGlscyBmcm9tICcuLi8uLi8uLi9kb3QvanMvVXRpbHMuanMnO1xyXG5pbXBvcnQgQm9kaWVzX0NvbGxpZGVfQWJzb3JiXzJfdG9fMV9tcDMgZnJvbSAnLi4vLi4vc291bmRzL0JvZGllc19Db2xsaWRlX0Fic29yYl8yX3RvXzFfbXAzLmpzJztcclxuaW1wb3J0IEJvZGllc19Db2xsaWRlX0Fic29yYl8zX3RvXzJfbXAzIGZyb20gJy4uLy4uL3NvdW5kcy9Cb2RpZXNfQ29sbGlkZV9BYnNvcmJfM190b18yX21wMy5qcyc7XHJcbmltcG9ydCBCb2RpZXNfQ29sbGlkZV9BYnNvcmJfNF90b18zX21wMyBmcm9tICcuLi8uLi9zb3VuZHMvQm9kaWVzX0NvbGxpZGVfQWJzb3JiXzRfdG9fM19tcDMuanMnO1xyXG5pbXBvcnQgQ29sbGlzaW9uX1NvdW5kX21wMyBmcm9tICcuLi8uLi9zb3VuZHMvQ29sbGlzaW9uX1NvdW5kX21wMy5qcyc7XHJcbmltcG9ydCBNYXNzX1NlbGVjdGlvbl8xX21wMyBmcm9tICcuLi8uLi9zb3VuZHMvTWFzc19TZWxlY3Rpb25fMV9tcDMuanMnO1xyXG5pbXBvcnQgTWFzc19TZWxlY3Rpb25fMl9tcDMgZnJvbSAnLi4vLi4vc291bmRzL01hc3NfU2VsZWN0aW9uXzJfbXAzLmpzJztcclxuaW1wb3J0IE1hc3NfU2VsZWN0aW9uXzNfbXAzIGZyb20gJy4uLy4uL3NvdW5kcy9NYXNzX1NlbGVjdGlvbl8zX21wMy5qcyc7XHJcbmltcG9ydCBNYXNzX1NlbGVjdGlvbl80X21wMyBmcm9tICcuLi8uLi9zb3VuZHMvTWFzc19TZWxlY3Rpb25fNF9tcDMuanMnO1xyXG5pbXBvcnQgTWV0cm9ub21lX1NvdW5kXzFfbXAzIGZyb20gJy4uLy4uL3NvdW5kcy9NZXRyb25vbWVfU291bmRfMV9tcDMuanMnO1xyXG5pbXBvcnQgTWV0cm9ub21lX1NvdW5kXzJfbXAzIGZyb20gJy4uLy4uL3NvdW5kcy9NZXRyb25vbWVfU291bmRfMl9tcDMuanMnO1xyXG5pbXBvcnQgTWV0cm9ub21lX1NvdW5kX1JldmVyYl8xX21wMyBmcm9tICcuLi8uLi9zb3VuZHMvTWV0cm9ub21lX1NvdW5kX1JldmVyYl8xX21wMy5qcyc7XHJcbmltcG9ydCBNZXRyb25vbWVfU291bmRfUmV2ZXJiXzJfbXAzIGZyb20gJy4uLy4uL3NvdW5kcy9NZXRyb25vbWVfU291bmRfUmV2ZXJiXzJfbXAzLmpzJztcclxuaW1wb3J0IHNvbGFyU3lzdGVtQ29tbW9uIGZyb20gJy4uL3NvbGFyU3lzdGVtQ29tbW9uLmpzJztcclxuaW1wb3J0IFNvbGFyU3lzdGVtQ29tbW9uQ29uc3RhbnRzIGZyb20gJy4uL1NvbGFyU3lzdGVtQ29tbW9uQ29uc3RhbnRzLmpzJztcclxuXHJcbmNvbnN0IGJvZHlOdW1iZXJTb3VuZHMgPSBbXHJcbiAgTWFzc19TZWxlY3Rpb25fMV9tcDMsXHJcbiAgTWFzc19TZWxlY3Rpb25fMl9tcDMsXHJcbiAgTWFzc19TZWxlY3Rpb25fM19tcDMsXHJcbiAgTWFzc19TZWxlY3Rpb25fNF9tcDNcclxuXTtcclxuXHJcbi8vIFNvdW5kcyBmb3Igd2hlbiB0aGUgYm9kaWVzIGFyZSByZWR1Y2VkIGZyb20gdGhlIG51bWJlciBjb250cm9sIG9yIGNvbGxpc2lvblxyXG5jb25zdCByZW1vdmFsU291bmRzID0gW1xyXG4gIEJvZGllc19Db2xsaWRlX0Fic29yYl8yX3RvXzFfbXAzLFxyXG4gIEJvZGllc19Db2xsaWRlX0Fic29yYl8zX3RvXzJfbXAzLFxyXG4gIEJvZGllc19Db2xsaWRlX0Fic29yYl80X3RvXzNfbXAzLFxyXG4gIENvbGxpc2lvbl9Tb3VuZF9tcDNcclxuXTtcclxuXHJcbmNvbnN0IG1ldHJvbm9tZVNvdW5kcyA9IFtcclxuICBNZXRyb25vbWVfU291bmRfMV9tcDMsXHJcbiAgTWV0cm9ub21lX1NvdW5kXzJfbXAzLFxyXG4gIE1ldHJvbm9tZV9Tb3VuZF9SZXZlcmJfMV9tcDMsXHJcbiAgTWV0cm9ub21lX1NvdW5kX1JldmVyYl8yX21wM1xyXG5dO1xyXG5cclxuLy8gT3RoZXIgc2NhbGVzIGF2YWlsYWJsZSB0byBwbGF5IGFyb3VuZCB3aXRoIVxyXG5jb25zdCBNRVRST05PTUUgPSBbIDcsIDAsIDAsIDAsIDAsIDAgXTsgLy8gTUVUUk9OT01FXHJcbi8vIGNvbnN0IE1FVFJPTk9NRSA9IFsgNCwgMiwgMCwgMiwgNCwgNCBdOyAvLyBBRERJVElPTkFMXHJcbi8vIGNvbnN0IE1FVFJPTk9NRSA9IFsgMCwgMiwgNCwgNSwgNywgOSBdOyAvLyBTQ0FMRVxyXG4vLyBjb25zdCBNRVRST05PTUUgPSBbIDAsIDIsIDQsIDcsIDksIDEyIF07IC8vIFBFTlRBVE9OSUNfU0NBTEVcclxuLy8gY29uc3QgTUVUUk9OT01FID0gWyAwLCAzLCA1LCA2LCA3LCAxMCBdOyAvLyBCTFVFU19TQ0FMRVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQm9keVNvdW5kTWFuYWdlciB7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBtb2RlbDogU29sYXJTeXN0ZW1Db21tb25Nb2RlbDtcclxuICBwcml2YXRlIHJlYWRvbmx5IGJvZHlOdW1iZXJTb3VuZENsaXBzOiBTb3VuZENsaXBbXTtcclxuICBwcml2YXRlIHJlYWRvbmx5IHJlbW92YWxTb3VuZENsaXBzOiBTb3VuZENsaXBbXTtcclxuICBwcml2YXRlIHJlYWRvbmx5IG1ldHJvbm9tZVNvdW5kQ2xpcHM6IFNvdW5kQ2xpcFtdO1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIG1vZGVsOiBTb2xhclN5c3RlbUNvbW1vbk1vZGVsICkge1xyXG4gICAgdGhpcy5tb2RlbCA9IG1vZGVsO1xyXG5cclxuICAgIHRoaXMuYm9keU51bWJlclNvdW5kQ2xpcHMgPSBib2R5TnVtYmVyU291bmRzLm1hcCggc291bmQgPT4gbmV3IFNvdW5kQ2xpcCggc291bmQsIHtcclxuICAgICAgaW5pdGlhbE91dHB1dExldmVsOiBTb2xhclN5c3RlbUNvbW1vbkNvbnN0YW50cy5ERUZBVUxUX1NPVU5EX09VVFBVVF9MRVZFTCAqIDJcclxuICAgIH0gKSApO1xyXG5cclxuICAgIHRoaXMucmVtb3ZhbFNvdW5kQ2xpcHMgPSByZW1vdmFsU291bmRzLm1hcCggc291bmQgPT4gbmV3IFNvdW5kQ2xpcCggc291bmQsIHtcclxuICAgICAgaW5pdGlhbE91dHB1dExldmVsOiBTb2xhclN5c3RlbUNvbW1vbkNvbnN0YW50cy5ERUZBVUxUX1NPVU5EX09VVFBVVF9MRVZFTCAqIDJcclxuICAgIH0gKSApO1xyXG5cclxuICAgIHRoaXMubWV0cm9ub21lU291bmRDbGlwcyA9IG1ldHJvbm9tZVNvdW5kcy5tYXAoIHNvdW5kID0+IG5ldyBTb3VuZENsaXAoIHNvdW5kLCB7XHJcbiAgICAgIHJhdGVDaGFuZ2VzQWZmZWN0UGxheWluZ1NvdW5kczogZmFsc2VcclxuICAgIH0gKSApO1xyXG5cclxuICAgIHRoaXMuYm9keU51bWJlclNvdW5kQ2xpcHMuZm9yRWFjaCggc291bmQgPT4gc291bmRNYW5hZ2VyLmFkZFNvdW5kR2VuZXJhdG9yKCBzb3VuZCApICk7XHJcbiAgICB0aGlzLnJlbW92YWxTb3VuZENsaXBzLmZvckVhY2goIHNvdW5kID0+IHNvdW5kTWFuYWdlci5hZGRTb3VuZEdlbmVyYXRvciggc291bmQgKSApO1xyXG4gICAgdGhpcy5tZXRyb25vbWVTb3VuZENsaXBzLmZvckVhY2goIHNvdW5kID0+IHNvdW5kTWFuYWdlci5hZGRTb3VuZEdlbmVyYXRvciggc291bmQgKSApO1xyXG5cclxuICAgIC8vIEluY3JlYXNpbmcgdGhlIGxldmVsIG9mIHRoZSBjb2xsaXNpb24gc291bmRcclxuICAgIHRoaXMucmVtb3ZhbFNvdW5kQ2xpcHNbIHRoaXMucmVtb3ZhbFNvdW5kQ2xpcHMubGVuZ3RoIC0gMSBdLnNldE91dHB1dExldmVsKCAxMCApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHBsYXlCb2R5QWRkZWRTb3VuZCggYm9keU51bWJlcjogbnVtYmVyICk6IHZvaWQge1xyXG4gICAgdGhpcy5ib2R5TnVtYmVyU291bmRDbGlwc1sgYm9keU51bWJlciBdLnBsYXkoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBwbGF5Qm9keVJlbW92ZWRTb3VuZCggYm9keU51bWJlcjogbnVtYmVyICk6IHZvaWQge1xyXG4gICAgdGhpcy5yZW1vdmFsU291bmRDbGlwc1sgYm9keU51bWJlciBdLnBsYXkoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqICBUaGlzIGZ1bmN0aW9uIHBsYXlzIHRoZSBtZWxvZHkgZGVzY3JpYmVkIGluIE1FVFJPTk9NRSBiYXNlZCBvbiB0aGUgZGl2aXNpb24gaW5kZXguXHJcbiAgICogIEJlY2F1c2Ugb2YgaG93IHNjYWxlcyB3b3JrLCB0aGV5IGFyZSBwb3dlcnMgb2YgdGhlIHR3ZWxmdGggcm9vdCBvZiAyLlxyXG4gICAqXHJcbiAgICogIFRoZSBhbW91bnQgb2YgZGl2aXNpb25zIHNoaWZ0cyB0aGUgbWV0cm9ub21lIHNvdW5kIHVwIG9yIGRvd24gaGFsZiBhbiBvY3RhdmUgKDEgdG8gMS41KVxyXG4gICAqXHJcbiAgICogIEFuZCBkZXBlbmRpbmcgb24gdGhlIHNlbWkgbWFqb3IgYXhpcywgdGhlIHNvdW5kIGlzIHNtYWxsIChtdXRlZCkgb3IgYmlnICh3aXRoIHJldmVyYilcclxuICAgKi9cclxuICBwdWJsaWMgcGxheU9yYml0YWxNZXRyb25vbWUoIGk6IG51bWJlciwgc2VtaU1ham9yQXhpczogbnVtYmVyLCBkaXZpc2lvbnM6IG51bWJlciApOiB2b2lkIHtcclxuICAgIGNvbnN0IHNtYWxsU291bmQgPSB0aGlzLm1ldHJvbm9tZVNvdW5kQ2xpcHNbIDAgXTtcclxuICAgIGNvbnN0IGJpZ1NvdW5kID0gdGhpcy5tZXRyb25vbWVTb3VuZENsaXBzWyAyIF07XHJcblxyXG4gICAgY29uc3QgZGl2aXNpb25PZmZzZXQgPSAxICsgZGl2aXNpb25zIC8gMTI7XHJcblxyXG4gICAgc21hbGxTb3VuZC5zZXRQbGF5YmFja1JhdGUoIE1hdGgucG93KCBzb3VuZENvbnN0YW50cy5UV0VMRlRIX1JPT1RfT0ZfVFdPLCBNRVRST05PTUVbIGkgXSApICogZGl2aXNpb25PZmZzZXQgKTtcclxuICAgIHNtYWxsU291bmQuc2V0T3V0cHV0TGV2ZWwoIFV0aWxzLmNsYW1wKCBVdGlscy5saW5lYXIoIDAsIDUwMCwgMSwgMCwgc2VtaU1ham9yQXhpcyApLCAwLCAxICkgKTtcclxuICAgIHNtYWxsU291bmQucGxheSgpO1xyXG5cclxuXHJcbiAgICBiaWdTb3VuZC5zZXRQbGF5YmFja1JhdGUoIE1hdGgucG93KCBzb3VuZENvbnN0YW50cy5UV0VMRlRIX1JPT1RfT0ZfVFdPLCBNRVRST05PTUVbIGkgXSApICogZGl2aXNpb25PZmZzZXQgKTtcclxuICAgIGJpZ1NvdW5kLnNldE91dHB1dExldmVsKCBVdGlscy5jbGFtcCggVXRpbHMubGluZWFyKCAxMDAsIDUwMCwgMCwgMSwgc2VtaU1ham9yQXhpcyApLCAwLCAxICkgKTtcclxuICAgIGJpZ1NvdW5kLnBsYXkoKTtcclxuICB9XHJcbn1cclxuXHJcblxyXG5zb2xhclN5c3RlbUNvbW1vbi5yZWdpc3RlciggJ0JvZHlTb3VuZE1hbmFnZXInLCBCb2R5U291bmRNYW5hZ2VyICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBLE9BQU9BLFNBQVMsTUFBTSxpREFBaUQ7QUFDdkUsT0FBT0MsWUFBWSxNQUFNLG1DQUFtQztBQUM1RCxPQUFPQyxjQUFjLE1BQU0scUNBQXFDO0FBQ2hFLE9BQU9DLEtBQUssTUFBTSwwQkFBMEI7QUFDNUMsT0FBT0MsZ0NBQWdDLE1BQU0sa0RBQWtEO0FBQy9GLE9BQU9DLGdDQUFnQyxNQUFNLGtEQUFrRDtBQUMvRixPQUFPQyxnQ0FBZ0MsTUFBTSxrREFBa0Q7QUFDL0YsT0FBT0MsbUJBQW1CLE1BQU0scUNBQXFDO0FBQ3JFLE9BQU9DLG9CQUFvQixNQUFNLHNDQUFzQztBQUN2RSxPQUFPQyxvQkFBb0IsTUFBTSxzQ0FBc0M7QUFDdkUsT0FBT0Msb0JBQW9CLE1BQU0sc0NBQXNDO0FBQ3ZFLE9BQU9DLG9CQUFvQixNQUFNLHNDQUFzQztBQUN2RSxPQUFPQyxxQkFBcUIsTUFBTSx1Q0FBdUM7QUFDekUsT0FBT0MscUJBQXFCLE1BQU0sdUNBQXVDO0FBQ3pFLE9BQU9DLDRCQUE0QixNQUFNLDhDQUE4QztBQUN2RixPQUFPQyw0QkFBNEIsTUFBTSw4Q0FBOEM7QUFDdkYsT0FBT0MsaUJBQWlCLE1BQU0seUJBQXlCO0FBQ3ZELE9BQU9DLDBCQUEwQixNQUFNLGtDQUFrQztBQUV6RSxNQUFNQyxnQkFBZ0IsR0FBRyxDQUN2QlYsb0JBQW9CLEVBQ3BCQyxvQkFBb0IsRUFDcEJDLG9CQUFvQixFQUNwQkMsb0JBQW9CLENBQ3JCOztBQUVEO0FBQ0EsTUFBTVEsYUFBYSxHQUFHLENBQ3BCZixnQ0FBZ0MsRUFDaENDLGdDQUFnQyxFQUNoQ0MsZ0NBQWdDLEVBQ2hDQyxtQkFBbUIsQ0FDcEI7QUFFRCxNQUFNYSxlQUFlLEdBQUcsQ0FDdEJSLHFCQUFxQixFQUNyQkMscUJBQXFCLEVBQ3JCQyw0QkFBNEIsRUFDNUJDLDRCQUE0QixDQUM3Qjs7QUFFRDtBQUNBLE1BQU1NLFNBQVMsR0FBRyxDQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFFLENBQUMsQ0FBQztBQUN4QztBQUNBO0FBQ0E7QUFDQTs7QUFFQSxlQUFlLE1BQU1DLGdCQUFnQixDQUFDO0VBTTdCQyxXQUFXQSxDQUFFQyxLQUE2QixFQUFHO0lBQ2xELElBQUksQ0FBQ0EsS0FBSyxHQUFHQSxLQUFLO0lBRWxCLElBQUksQ0FBQ0Msb0JBQW9CLEdBQUdQLGdCQUFnQixDQUFDUSxHQUFHLENBQUVDLEtBQUssSUFBSSxJQUFJM0IsU0FBUyxDQUFFMkIsS0FBSyxFQUFFO01BQy9FQyxrQkFBa0IsRUFBRVgsMEJBQTBCLENBQUNZLDBCQUEwQixHQUFHO0lBQzlFLENBQUUsQ0FBRSxDQUFDO0lBRUwsSUFBSSxDQUFDQyxpQkFBaUIsR0FBR1gsYUFBYSxDQUFDTyxHQUFHLENBQUVDLEtBQUssSUFBSSxJQUFJM0IsU0FBUyxDQUFFMkIsS0FBSyxFQUFFO01BQ3pFQyxrQkFBa0IsRUFBRVgsMEJBQTBCLENBQUNZLDBCQUEwQixHQUFHO0lBQzlFLENBQUUsQ0FBRSxDQUFDO0lBRUwsSUFBSSxDQUFDRSxtQkFBbUIsR0FBR1gsZUFBZSxDQUFDTSxHQUFHLENBQUVDLEtBQUssSUFBSSxJQUFJM0IsU0FBUyxDQUFFMkIsS0FBSyxFQUFFO01BQzdFSyw4QkFBOEIsRUFBRTtJQUNsQyxDQUFFLENBQUUsQ0FBQztJQUVMLElBQUksQ0FBQ1Asb0JBQW9CLENBQUNRLE9BQU8sQ0FBRU4sS0FBSyxJQUFJMUIsWUFBWSxDQUFDaUMsaUJBQWlCLENBQUVQLEtBQU0sQ0FBRSxDQUFDO0lBQ3JGLElBQUksQ0FBQ0csaUJBQWlCLENBQUNHLE9BQU8sQ0FBRU4sS0FBSyxJQUFJMUIsWUFBWSxDQUFDaUMsaUJBQWlCLENBQUVQLEtBQU0sQ0FBRSxDQUFDO0lBQ2xGLElBQUksQ0FBQ0ksbUJBQW1CLENBQUNFLE9BQU8sQ0FBRU4sS0FBSyxJQUFJMUIsWUFBWSxDQUFDaUMsaUJBQWlCLENBQUVQLEtBQU0sQ0FBRSxDQUFDOztJQUVwRjtJQUNBLElBQUksQ0FBQ0csaUJBQWlCLENBQUUsSUFBSSxDQUFDQSxpQkFBaUIsQ0FBQ0ssTUFBTSxHQUFHLENBQUMsQ0FBRSxDQUFDQyxjQUFjLENBQUUsRUFBRyxDQUFDO0VBQ2xGO0VBRU9DLGtCQUFrQkEsQ0FBRUMsVUFBa0IsRUFBUztJQUNwRCxJQUFJLENBQUNiLG9CQUFvQixDQUFFYSxVQUFVLENBQUUsQ0FBQ0MsSUFBSSxDQUFDLENBQUM7RUFDaEQ7RUFFT0Msb0JBQW9CQSxDQUFFRixVQUFrQixFQUFTO0lBQ3RELElBQUksQ0FBQ1IsaUJBQWlCLENBQUVRLFVBQVUsQ0FBRSxDQUFDQyxJQUFJLENBQUMsQ0FBQztFQUM3Qzs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ1NFLG9CQUFvQkEsQ0FBRUMsQ0FBUyxFQUFFQyxhQUFxQixFQUFFQyxTQUFpQixFQUFTO0lBQ3ZGLE1BQU1DLFVBQVUsR0FBRyxJQUFJLENBQUNkLG1CQUFtQixDQUFFLENBQUMsQ0FBRTtJQUNoRCxNQUFNZSxRQUFRLEdBQUcsSUFBSSxDQUFDZixtQkFBbUIsQ0FBRSxDQUFDLENBQUU7SUFFOUMsTUFBTWdCLGNBQWMsR0FBRyxDQUFDLEdBQUdILFNBQVMsR0FBRyxFQUFFO0lBRXpDQyxVQUFVLENBQUNHLGVBQWUsQ0FBRUMsSUFBSSxDQUFDQyxHQUFHLENBQUVoRCxjQUFjLENBQUNpRCxtQkFBbUIsRUFBRTlCLFNBQVMsQ0FBRXFCLENBQUMsQ0FBRyxDQUFDLEdBQUdLLGNBQWUsQ0FBQztJQUM3R0YsVUFBVSxDQUFDVCxjQUFjLENBQUVqQyxLQUFLLENBQUNpRCxLQUFLLENBQUVqRCxLQUFLLENBQUNrRCxNQUFNLENBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFVixhQUFjLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBRSxDQUFFLENBQUM7SUFDN0ZFLFVBQVUsQ0FBQ04sSUFBSSxDQUFDLENBQUM7SUFHakJPLFFBQVEsQ0FBQ0UsZUFBZSxDQUFFQyxJQUFJLENBQUNDLEdBQUcsQ0FBRWhELGNBQWMsQ0FBQ2lELG1CQUFtQixFQUFFOUIsU0FBUyxDQUFFcUIsQ0FBQyxDQUFHLENBQUMsR0FBR0ssY0FBZSxDQUFDO0lBQzNHRCxRQUFRLENBQUNWLGNBQWMsQ0FBRWpDLEtBQUssQ0FBQ2lELEtBQUssQ0FBRWpELEtBQUssQ0FBQ2tELE1BQU0sQ0FBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUVWLGFBQWMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFFLENBQUUsQ0FBQztJQUM3RkcsUUFBUSxDQUFDUCxJQUFJLENBQUMsQ0FBQztFQUNqQjtBQUNGO0FBR0F2QixpQkFBaUIsQ0FBQ3NDLFFBQVEsQ0FBRSxrQkFBa0IsRUFBRWhDLGdCQUFpQixDQUFDIn0=