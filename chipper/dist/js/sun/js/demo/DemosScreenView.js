// Copyright 2015-2023, University of Colorado Boulder

/**
 * DemosScreenView is the base class for ScreenViews that use a carousel to select a demo.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import Property from '../../../axon/js/Property.js';
import ScreenView from '../../../joist/js/ScreenView.js';
import optionize from '../../../phet-core/js/optionize.js';
import PhetFont from '../../../scenery-phet/js/PhetFont.js';
import { Node, Text } from '../../../scenery/js/imports.js';
import Tandem from '../../../tandem/js/Tandem.js';
import CarouselComboBox from '../CarouselComboBox.js';
import sun from '../sun.js';

// constants
const COMBO_BOX_ITEM_FONT = new PhetFont(14);
class DemosScreenView extends ScreenView {
  constructor(demos, providedOptions) {
    const options = optionize()({
      // DemosScreenViewOptions
      selectedDemoLabel: null,
      cacheDemos: false,
      // ScreenViewOptions
      tandem: Tandem.OPTIONAL
    }, providedOptions);
    super(options);
    const demosParent = new Node();
    const layoutBounds = this.layoutBounds;

    // Support PhET-iO API instrumentation and API tracking
    if (Tandem.PHET_IO_ENABLED) {
      options.cacheDemos = true;
      demos.forEach(demo => {
        demo.node = demo.createNode(layoutBounds, {
          tandem: options.tandem.createTandem(`demo${demo.tandemName ? demo.tandemName : demo.label}`)
        });
        demo.node.visible = false;
        demosParent.addChild(demo.node);
      });
    }

    // All demos will be children of this node, to maintain rendering order with combo box list
    this.addChild(demosParent);

    // Sort the demos by label, so that they appear in the combo box in alphabetical order
    demos = _.sortBy(demos, demo => {
      return demo.label;
    });

    // The initial demo that is selected
    let selectedDemo = demos[0];
    if (options.selectedDemoLabel) {
      selectedDemo = _.find(demos, demo => {
        return demo.label === options.selectedDemoLabel;
      });
      if (!selectedDemo) {
        throw new Error(`demo not found: ${options.selectedDemoLabel}`);
      }
    }

    // {Property.<Demo>} the demo that is currently selected
    const selectedDemoProperty = new Property(selectedDemo);
    const selectADemoLabel = new Text('Select a Demo:', {
      font: new PhetFont(16)
    });
    this.addChild(selectADemoLabel);

    // {ComboBoxItem[]}
    const items = demos.map(demo => {
      return {
        value: demo,
        createNode: () => new Text(demo.label, {
          font: COMBO_BOX_ITEM_FONT
        })
      };
    });
    const carouselComboBox = new CarouselComboBox(selectedDemoProperty, items, {
      tandem: options.tandem.createTandem('carouselComboBox')
    });
    this.addChild(carouselComboBox);

    // Layout, with button vertically centered on label.
    selectADemoLabel.left = this.layoutBounds.left + 20;
    carouselComboBox.left = selectADemoLabel.right + 10;
    carouselComboBox.top = this.layoutBounds.top + 20;
    selectADemoLabel.centerY = carouselComboBox.visibleBounds.centerY;

    // Make the selected demo visible
    selectedDemoProperty.link((demo, oldDemo) => {
      // clean up the previously selected demo
      if (oldDemo) {
        const oldDemoNode = oldDemo.node;
        if (options.cacheDemos) {
          // make the old demo invisible
          oldDemoNode.visible = false;
        } else {
          // Delete the old demo.  Note that this will ONLY call the dispose function on the component being demoed if
          // that component is the only thing provided as a demo node, or if the demo node is subclassed and provides
          // its own dispose function.  If the demo node is a VBox or something of that nature, the dispose function of
          // the demoed component(s) will not be invoked.  See https://github.com/phetsims/sun/issues/386.
          demosParent.removeChild(oldDemoNode);
          oldDemoNode.dispose();
          oldDemo.node = null;
        }
      }
      if (demo.node) {
        // If the selected demo has an associated node, make it visible.
        demo.node.visible = true;
      } else {
        // If the selected demo doesn't doesn't have an associated node, create it.
        demo.node = demo.createNode(layoutBounds, {
          tandem: options.tandem.createTandem(`demo${demo.tandemName ? demo.tandemName : demo.label}`)
        });
        demosParent.addChild(demo.node);
      }
    });
  }
}
sun.register('DemosScreenView', DemosScreenView);
export default DemosScreenView;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQcm9wZXJ0eSIsIlNjcmVlblZpZXciLCJvcHRpb25pemUiLCJQaGV0Rm9udCIsIk5vZGUiLCJUZXh0IiwiVGFuZGVtIiwiQ2Fyb3VzZWxDb21ib0JveCIsInN1biIsIkNPTUJPX0JPWF9JVEVNX0ZPTlQiLCJEZW1vc1NjcmVlblZpZXciLCJjb25zdHJ1Y3RvciIsImRlbW9zIiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsInNlbGVjdGVkRGVtb0xhYmVsIiwiY2FjaGVEZW1vcyIsInRhbmRlbSIsIk9QVElPTkFMIiwiZGVtb3NQYXJlbnQiLCJsYXlvdXRCb3VuZHMiLCJQSEVUX0lPX0VOQUJMRUQiLCJmb3JFYWNoIiwiZGVtbyIsIm5vZGUiLCJjcmVhdGVOb2RlIiwiY3JlYXRlVGFuZGVtIiwidGFuZGVtTmFtZSIsImxhYmVsIiwidmlzaWJsZSIsImFkZENoaWxkIiwiXyIsInNvcnRCeSIsInNlbGVjdGVkRGVtbyIsImZpbmQiLCJFcnJvciIsInNlbGVjdGVkRGVtb1Byb3BlcnR5Iiwic2VsZWN0QURlbW9MYWJlbCIsImZvbnQiLCJpdGVtcyIsIm1hcCIsInZhbHVlIiwiY2Fyb3VzZWxDb21ib0JveCIsImxlZnQiLCJyaWdodCIsInRvcCIsImNlbnRlclkiLCJ2aXNpYmxlQm91bmRzIiwibGluayIsIm9sZERlbW8iLCJvbGREZW1vTm9kZSIsInJlbW92ZUNoaWxkIiwiZGlzcG9zZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiRGVtb3NTY3JlZW5WaWV3LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE1LTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIERlbW9zU2NyZWVuVmlldyBpcyB0aGUgYmFzZSBjbGFzcyBmb3IgU2NyZWVuVmlld3MgdGhhdCB1c2UgYSBjYXJvdXNlbCB0byBzZWxlY3QgYSBkZW1vLlxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCBQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi9heG9uL2pzL1Byb3BlcnR5LmpzJztcclxuaW1wb3J0IEJvdW5kczIgZnJvbSAnLi4vLi4vLi4vZG90L2pzL0JvdW5kczIuanMnO1xyXG5pbXBvcnQgU2NyZWVuVmlldywgeyBTY3JlZW5WaWV3T3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uL2pvaXN0L2pzL1NjcmVlblZpZXcuanMnO1xyXG5pbXBvcnQgb3B0aW9uaXplIGZyb20gJy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgUGlja09wdGlvbmFsIGZyb20gJy4uLy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9QaWNrT3B0aW9uYWwuanMnO1xyXG5pbXBvcnQgU3RyaWN0T21pdCBmcm9tICcuLi8uLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvU3RyaWN0T21pdC5qcyc7XHJcbmltcG9ydCBQaGV0Rm9udCBmcm9tICcuLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvUGhldEZvbnQuanMnO1xyXG5pbXBvcnQgeyBOb2RlLCBOb2RlT3B0aW9ucywgVGV4dCB9IGZyb20gJy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBUYW5kZW0gZnJvbSAnLi4vLi4vLi4vdGFuZGVtL2pzL1RhbmRlbS5qcyc7XHJcbmltcG9ydCBDYXJvdXNlbENvbWJvQm94IGZyb20gJy4uL0Nhcm91c2VsQ29tYm9Cb3guanMnO1xyXG5pbXBvcnQgc3VuIGZyb20gJy4uL3N1bi5qcyc7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgQ09NQk9fQk9YX0lURU1fRk9OVCA9IG5ldyBQaGV0Rm9udCggMTQgKTtcclxuXHJcbmV4cG9ydCB0eXBlIFN1bkRlbW9PcHRpb25zID0gTm9kZU9wdGlvbnM7XHJcblxyXG5leHBvcnQgdHlwZSBTdW5EZW1vID0ge1xyXG5cclxuICAvLyBzdHJpbmcgdXNlZCB0byBsYWJlbCB0aGUgZGVtbyBpbiBDb21ib0JveFxyXG4gIGxhYmVsOiBzdHJpbmc7XHJcblxyXG4gIC8vIGNyZWF0ZXMgdGhlIE5vZGUgZm9yIHRoZSBkZW1vXHJcbiAgY3JlYXRlTm9kZTogKCBsYXlvdXRCb3VuZHM6IEJvdW5kczIsIG9wdGlvbnM6IFN1bkRlbW9PcHRpb25zICkgPT4gTm9kZTtcclxuXHJcbiAgbm9kZT86IE5vZGUgfCBudWxsIHwgdW5kZWZpbmVkO1xyXG5cclxuICB0YW5kZW1OYW1lPzogc3RyaW5nO1xyXG59O1xyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IHtcclxuXHJcbiAgLy8gbGFiZWwgZmllbGQgb2YgdGhlIHtTdW5EZW1vfSB0byBiZSBzZWxlY3RlZCBpbml0aWFsbHksIGRlZmF1bHRzIHRvIHRoZSBmaXJzdCBkZW1vIGFmdGVyIHNvcnRpbmdcclxuICBzZWxlY3RlZERlbW9MYWJlbD86IHN0cmluZyB8IG51bGw7XHJcblxyXG4gIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvc3VuL2lzc3Vlcy8zODZcclxuICAvLyB0cnVlID0gY2FjaGVzIE5vZGVzIGZvciBhbGwgZGVtb3MgdGhhdCBoYXZlIGJlZW4gc2VsZWN0ZWRcclxuICAvLyBmYWxzZSA9IGtlZXBzIG9ubHkgdGhlIE5vZGUgZm9yIHRoZSBzZWxlY3RlZCBkZW1vIGluIG1lbW9yeVxyXG4gIGNhY2hlRGVtb3M/OiBib29sZWFuO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgRGVtb3NTY3JlZW5WaWV3T3B0aW9ucyA9IFNlbGZPcHRpb25zICYgU3RyaWN0T21pdDxTY3JlZW5WaWV3T3B0aW9ucywgJ3RhbmRlbSc+ICZcclxuICBQaWNrT3B0aW9uYWw8U2NyZWVuVmlld09wdGlvbnMsICd0YW5kZW0nPjtcclxuXHJcbmNsYXNzIERlbW9zU2NyZWVuVmlldyBleHRlbmRzIFNjcmVlblZpZXcge1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIGRlbW9zOiBTdW5EZW1vW10sIHByb3ZpZGVkT3B0aW9ucz86IERlbW9zU2NyZWVuVmlld09wdGlvbnMgKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxEZW1vc1NjcmVlblZpZXdPcHRpb25zLCBTZWxmT3B0aW9ucywgU2NyZWVuVmlld09wdGlvbnM+KCkoIHtcclxuXHJcbiAgICAgIC8vIERlbW9zU2NyZWVuVmlld09wdGlvbnNcclxuICAgICAgc2VsZWN0ZWREZW1vTGFiZWw6IG51bGwsXHJcbiAgICAgIGNhY2hlRGVtb3M6IGZhbHNlLFxyXG5cclxuICAgICAgLy8gU2NyZWVuVmlld09wdGlvbnNcclxuICAgICAgdGFuZGVtOiBUYW5kZW0uT1BUSU9OQUxcclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIHN1cGVyKCBvcHRpb25zICk7XHJcblxyXG4gICAgY29uc3QgZGVtb3NQYXJlbnQgPSBuZXcgTm9kZSgpO1xyXG4gICAgY29uc3QgbGF5b3V0Qm91bmRzID0gdGhpcy5sYXlvdXRCb3VuZHM7XHJcblxyXG4gICAgLy8gU3VwcG9ydCBQaEVULWlPIEFQSSBpbnN0cnVtZW50YXRpb24gYW5kIEFQSSB0cmFja2luZ1xyXG4gICAgaWYgKCBUYW5kZW0uUEhFVF9JT19FTkFCTEVEICkge1xyXG4gICAgICBvcHRpb25zLmNhY2hlRGVtb3MgPSB0cnVlO1xyXG5cclxuICAgICAgZGVtb3MuZm9yRWFjaCggKCBkZW1vOiBTdW5EZW1vICkgPT4ge1xyXG4gICAgICAgIGRlbW8ubm9kZSA9IGRlbW8uY3JlYXRlTm9kZSggbGF5b3V0Qm91bmRzLCB7XHJcbiAgICAgICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggYGRlbW8ke2RlbW8udGFuZGVtTmFtZSA/IGRlbW8udGFuZGVtTmFtZSA6IGRlbW8ubGFiZWx9YCApXHJcbiAgICAgICAgfSApO1xyXG4gICAgICAgIGRlbW8ubm9kZS52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgZGVtb3NQYXJlbnQuYWRkQ2hpbGQoIGRlbW8ubm9kZSApO1xyXG4gICAgICB9ICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWxsIGRlbW9zIHdpbGwgYmUgY2hpbGRyZW4gb2YgdGhpcyBub2RlLCB0byBtYWludGFpbiByZW5kZXJpbmcgb3JkZXIgd2l0aCBjb21ibyBib3ggbGlzdFxyXG4gICAgdGhpcy5hZGRDaGlsZCggZGVtb3NQYXJlbnQgKTtcclxuXHJcbiAgICAvLyBTb3J0IHRoZSBkZW1vcyBieSBsYWJlbCwgc28gdGhhdCB0aGV5IGFwcGVhciBpbiB0aGUgY29tYm8gYm94IGluIGFscGhhYmV0aWNhbCBvcmRlclxyXG4gICAgZGVtb3MgPSBfLnNvcnRCeSggZGVtb3MsICggZGVtbzogU3VuRGVtbyApID0+IHtcclxuICAgICAgcmV0dXJuIGRlbW8ubGFiZWw7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gVGhlIGluaXRpYWwgZGVtbyB0aGF0IGlzIHNlbGVjdGVkXHJcbiAgICBsZXQgc2VsZWN0ZWREZW1vOiBTdW5EZW1vIHwgdW5kZWZpbmVkID0gZGVtb3NbIDAgXTtcclxuICAgIGlmICggb3B0aW9ucy5zZWxlY3RlZERlbW9MYWJlbCApIHtcclxuICAgICAgc2VsZWN0ZWREZW1vID0gXy5maW5kKCBkZW1vcywgKCBkZW1vOiBTdW5EZW1vICkgPT4ge1xyXG4gICAgICAgIHJldHVybiAoIGRlbW8ubGFiZWwgPT09IG9wdGlvbnMuc2VsZWN0ZWREZW1vTGFiZWwgKTtcclxuICAgICAgfSApO1xyXG4gICAgICBpZiAoICFzZWxlY3RlZERlbW8gKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCBgZGVtbyBub3QgZm91bmQ6ICR7b3B0aW9ucy5zZWxlY3RlZERlbW9MYWJlbH1gICk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyB7UHJvcGVydHkuPERlbW8+fSB0aGUgZGVtbyB0aGF0IGlzIGN1cnJlbnRseSBzZWxlY3RlZFxyXG4gICAgY29uc3Qgc2VsZWN0ZWREZW1vUHJvcGVydHkgPSBuZXcgUHJvcGVydHk8U3VuRGVtbz4oIHNlbGVjdGVkRGVtbyApO1xyXG5cclxuICAgIGNvbnN0IHNlbGVjdEFEZW1vTGFiZWwgPSBuZXcgVGV4dCggJ1NlbGVjdCBhIERlbW86Jywge1xyXG4gICAgICBmb250OiBuZXcgUGhldEZvbnQoIDE2IClcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHNlbGVjdEFEZW1vTGFiZWwgKTtcclxuXHJcbiAgICAvLyB7Q29tYm9Cb3hJdGVtW119XHJcbiAgICBjb25zdCBpdGVtcyA9IGRlbW9zLm1hcCggKCBkZW1vOiBTdW5EZW1vICkgPT4ge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHZhbHVlOiBkZW1vLFxyXG4gICAgICAgIGNyZWF0ZU5vZGU6ICgpID0+IG5ldyBUZXh0KCBkZW1vLmxhYmVsLCB7IGZvbnQ6IENPTUJPX0JPWF9JVEVNX0ZPTlQgfSApXHJcbiAgICAgIH07XHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgY2Fyb3VzZWxDb21ib0JveCA9IG5ldyBDYXJvdXNlbENvbWJvQm94KCBzZWxlY3RlZERlbW9Qcm9wZXJ0eSwgaXRlbXMsIHtcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdjYXJvdXNlbENvbWJvQm94JyApXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBjYXJvdXNlbENvbWJvQm94ICk7XHJcblxyXG4gICAgLy8gTGF5b3V0LCB3aXRoIGJ1dHRvbiB2ZXJ0aWNhbGx5IGNlbnRlcmVkIG9uIGxhYmVsLlxyXG4gICAgc2VsZWN0QURlbW9MYWJlbC5sZWZ0ID0gdGhpcy5sYXlvdXRCb3VuZHMubGVmdCArIDIwO1xyXG4gICAgY2Fyb3VzZWxDb21ib0JveC5sZWZ0ID0gc2VsZWN0QURlbW9MYWJlbC5yaWdodCArIDEwO1xyXG4gICAgY2Fyb3VzZWxDb21ib0JveC50b3AgPSB0aGlzLmxheW91dEJvdW5kcy50b3AgKyAyMDtcclxuICAgIHNlbGVjdEFEZW1vTGFiZWwuY2VudGVyWSA9IGNhcm91c2VsQ29tYm9Cb3gudmlzaWJsZUJvdW5kcy5jZW50ZXJZO1xyXG5cclxuICAgIC8vIE1ha2UgdGhlIHNlbGVjdGVkIGRlbW8gdmlzaWJsZVxyXG4gICAgc2VsZWN0ZWREZW1vUHJvcGVydHkubGluayggKCBkZW1vOiBTdW5EZW1vLCBvbGREZW1vOiBTdW5EZW1vIHwgbnVsbCApID0+IHtcclxuXHJcbiAgICAgIC8vIGNsZWFuIHVwIHRoZSBwcmV2aW91c2x5IHNlbGVjdGVkIGRlbW9cclxuICAgICAgaWYgKCBvbGREZW1vICkge1xyXG5cclxuICAgICAgICBjb25zdCBvbGREZW1vTm9kZSA9IG9sZERlbW8ubm9kZSE7XHJcblxyXG4gICAgICAgIGlmICggb3B0aW9ucy5jYWNoZURlbW9zICkge1xyXG5cclxuICAgICAgICAgIC8vIG1ha2UgdGhlIG9sZCBkZW1vIGludmlzaWJsZVxyXG4gICAgICAgICAgb2xkRGVtb05vZGUudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuXHJcbiAgICAgICAgICAvLyBEZWxldGUgdGhlIG9sZCBkZW1vLiAgTm90ZSB0aGF0IHRoaXMgd2lsbCBPTkxZIGNhbGwgdGhlIGRpc3Bvc2UgZnVuY3Rpb24gb24gdGhlIGNvbXBvbmVudCBiZWluZyBkZW1vZWQgaWZcclxuICAgICAgICAgIC8vIHRoYXQgY29tcG9uZW50IGlzIHRoZSBvbmx5IHRoaW5nIHByb3ZpZGVkIGFzIGEgZGVtbyBub2RlLCBvciBpZiB0aGUgZGVtbyBub2RlIGlzIHN1YmNsYXNzZWQgYW5kIHByb3ZpZGVzXHJcbiAgICAgICAgICAvLyBpdHMgb3duIGRpc3Bvc2UgZnVuY3Rpb24uICBJZiB0aGUgZGVtbyBub2RlIGlzIGEgVkJveCBvciBzb21ldGhpbmcgb2YgdGhhdCBuYXR1cmUsIHRoZSBkaXNwb3NlIGZ1bmN0aW9uIG9mXHJcbiAgICAgICAgICAvLyB0aGUgZGVtb2VkIGNvbXBvbmVudChzKSB3aWxsIG5vdCBiZSBpbnZva2VkLiAgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9zdW4vaXNzdWVzLzM4Ni5cclxuICAgICAgICAgIGRlbW9zUGFyZW50LnJlbW92ZUNoaWxkKCBvbGREZW1vTm9kZSApO1xyXG4gICAgICAgICAgb2xkRGVtb05vZGUuZGlzcG9zZSgpO1xyXG4gICAgICAgICAgb2xkRGVtby5ub2RlID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICggZGVtby5ub2RlICkge1xyXG5cclxuICAgICAgICAvLyBJZiB0aGUgc2VsZWN0ZWQgZGVtbyBoYXMgYW4gYXNzb2NpYXRlZCBub2RlLCBtYWtlIGl0IHZpc2libGUuXHJcbiAgICAgICAgZGVtby5ub2RlLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG5cclxuICAgICAgICAvLyBJZiB0aGUgc2VsZWN0ZWQgZGVtbyBkb2Vzbid0IGRvZXNuJ3QgaGF2ZSBhbiBhc3NvY2lhdGVkIG5vZGUsIGNyZWF0ZSBpdC5cclxuICAgICAgICBkZW1vLm5vZGUgPSBkZW1vLmNyZWF0ZU5vZGUoIGxheW91dEJvdW5kcywge1xyXG4gICAgICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oIGBkZW1vJHtkZW1vLnRhbmRlbU5hbWUgPyBkZW1vLnRhbmRlbU5hbWUgOiBkZW1vLmxhYmVsfWAgKVxyXG4gICAgICAgIH0gKTtcclxuICAgICAgICBkZW1vc1BhcmVudC5hZGRDaGlsZCggZGVtby5ub2RlICk7XHJcbiAgICAgIH1cclxuICAgIH0gKTtcclxuICB9XHJcbn1cclxuXHJcbnN1bi5yZWdpc3RlciggJ0RlbW9zU2NyZWVuVmlldycsIERlbW9zU2NyZWVuVmlldyApO1xyXG5leHBvcnQgZGVmYXVsdCBEZW1vc1NjcmVlblZpZXc7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFFBQVEsTUFBTSw4QkFBOEI7QUFFbkQsT0FBT0MsVUFBVSxNQUE2QixpQ0FBaUM7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