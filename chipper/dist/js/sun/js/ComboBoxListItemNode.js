// Copyright 2019-2023, University of Colorado Boulder

/**
 * Node for an item in a combo box list.
 * Responsible for highlighting itself when the pointer is over it.
 * Typically instantiated by ComboBox, not by client code.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import { Shape } from '../../kite/js/imports.js';
import optionize from '../../phet-core/js/optionize.js';
import { IndexedNodeIO, Node, Rectangle, Voicing } from '../../scenery/js/imports.js';
import Tandem from '../../tandem/js/Tandem.js';
import sun from './sun.js';
import SunConstants from './SunConstants.js';
import Property from '../../axon/js/Property.js';
import PatternStringProperty from '../../axon/js/PatternStringProperty.js';
export default class ComboBoxListItemNode extends Voicing(Node) {
  // when true, the next voicing focus listener will supply the response needed when opening the comboBox.
  // It will then set this back to false.

  constructor(item, node, highlightWidthProperty, highlightHeightProperty, providedOptions) {
    const options = optionize()({
      cursor: 'pointer',
      align: 'left',
      xMargin: 6,
      highlightFill: 'rgb( 245, 245, 245 )',
      highlightCornerRadius: 4,
      // pdom
      tagName: 'li',
      focusable: true,
      ariaRole: 'option',
      // the `li` with ariaRole `option` does not get click events on iOS VoiceOver, so position
      // elements so they receive pointer events
      positionInPDOM: true,
      // voicing
      voicingFocusListener: () => this.comboBoxListItemNodeVoicingFocusListener(),
      comboBoxVoicingNameResponsePattern: SunConstants.VALUE_NAMED_PLACEHOLDER,
      // phet-io
      tandem: Tandem.REQUIRED,
      tandemNameSuffix: 'Item',
      // Together, these options make it possible to reorder the combo box items in studio, and save a customized
      // simulation with the new order.
      phetioType: IndexedNodeIO,
      phetioState: true,
      visiblePropertyOptions: {
        phetioFeatured: true
      }
    }, providedOptions);

    // @ts-expect-error convert Property into string
    options.comboBoxVoicingNameResponsePattern = options.comboBoxVoicingNameResponsePattern.get ?
    // @ts-expect-error convert Property into string
    options.comboBoxVoicingNameResponsePattern.get() : options.comboBoxVoicingNameResponsePattern;

    // Don't test the contents of strings when ?stringTest is enabled
    assert && assert(!!phet.chipper.queryParameters.stringTest ||
    // @ts-expect-error is a string now.
    options.comboBoxVoicingNameResponsePattern.includes('{{value}}'), 'value needs to be filled in');

    // pdom: get innerContent from the item
    options.innerContent = item.a11yName || null;
    options.voicingObjectResponse = item.a11yName || null;
    const patternProperty = typeof options.comboBoxVoicingNameResponsePattern === 'string' ? new Property(options.comboBoxVoicingNameResponsePattern) : options.comboBoxVoicingNameResponsePattern;
    const patternStringProperty = new PatternStringProperty(patternProperty, {
      value: item.a11yName
    });
    options.voicingNameResponse = patternStringProperty;

    // Highlight that is shown when the pointer is over this item. This is not the a11y focus rectangle.
    const highlightRectangle = new Rectangle({
      cornerRadius: options.highlightCornerRadius
    });

    // Wrapper for the item's Node. Do not transform item.node because it is shared with ComboBoxButton!
    const itemNodeWrapper = new Node({
      children: [node]
    });

    // Adjust the size when the highlight size changes.
    const highlightWidthListener = width => {
      highlightRectangle.rectWidth = width;
      itemNodeWrapper.maxWidth = width;
    };
    highlightWidthProperty.link(highlightWidthListener);
    const highlightHeightListener = height => {
      highlightRectangle.rectHeight = height;
      itemNodeWrapper.maxHeight = height;
    };
    highlightHeightProperty.link(highlightHeightListener);

    // Assume that item.node may change (as in ComboBoxDisplay) and adjust layout dynamically.
    // See https://github.com/phetsims/scenery-phet/issues/482
    const updateItemLayout = () => {
      if (options.align === 'left') {
        itemNodeWrapper.left = highlightRectangle.left + options.xMargin;
      } else if (options.align === 'right') {
        itemNodeWrapper.right = highlightRectangle.right - options.xMargin;
      } else {
        itemNodeWrapper.centerX = highlightRectangle.centerX;
      }
      itemNodeWrapper.centerY = highlightRectangle.centerY;
    };
    itemNodeWrapper.boundsProperty.lazyLink(updateItemLayout);
    updateItemLayout();
    options.children = [highlightRectangle, itemNodeWrapper];
    super(options);
    this._supplyOpenResponseOnNextFocus = false;
    this.item = item;

    // pdom focus highlight is fitted to this Node's bounds, so that it doesn't overlap other items in the list box
    this.localBoundsProperty.link(localBounds => {
      this.focusHighlight = Shape.bounds(localBounds);
    });

    // Show highlight when pointer is over this item.
    // Change fill instead of visibility so that we don't end up with vertical pointer gaps in the list
    this.addInputListener({
      enter() {
        highlightRectangle.fill = options.highlightFill;
      },
      exit() {
        highlightRectangle.fill = null;
      }
    });
    this.disposeComboBoxListItemNode = () => {
      patternStringProperty.dispose();
      highlightWidthProperty.unlink(highlightWidthListener);
      highlightHeightProperty.unlink(highlightHeightListener);
    };
  }

  /**
   * Ask for the voicing response for opening the ComboBox upon next focus, but only for the very next focus event.
   */
  supplyOpenResponseOnNextFocus() {
    this._supplyOpenResponseOnNextFocus = true;
  }

  /**
   * Free memory references to avoid leaks.
   */
  dispose() {
    this.disposeComboBoxListItemNode();
    super.dispose();
  }

  /**
   * A custom focus listener for this type, with conditional support for providing a normal focus vs an "open" response.
   */
  comboBoxListItemNodeVoicingFocusListener() {
    this.voicingSpeakFullResponse({
      nameResponse: this._supplyOpenResponseOnNextFocus ? this.voicingNameResponse : null,
      objectResponse: this._supplyOpenResponseOnNextFocus ? null : this.voicingObjectResponse,
      contextResponse: null,
      hintResponse: this._supplyOpenResponseOnNextFocus ? this.voicingHintResponse : null
    });
    this._supplyOpenResponseOnNextFocus = false;
  }
}
sun.register('ComboBoxListItemNode', ComboBoxListItemNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTaGFwZSIsIm9wdGlvbml6ZSIsIkluZGV4ZWROb2RlSU8iLCJOb2RlIiwiUmVjdGFuZ2xlIiwiVm9pY2luZyIsIlRhbmRlbSIsInN1biIsIlN1bkNvbnN0YW50cyIsIlByb3BlcnR5IiwiUGF0dGVyblN0cmluZ1Byb3BlcnR5IiwiQ29tYm9Cb3hMaXN0SXRlbU5vZGUiLCJjb25zdHJ1Y3RvciIsIml0ZW0iLCJub2RlIiwiaGlnaGxpZ2h0V2lkdGhQcm9wZXJ0eSIsImhpZ2hsaWdodEhlaWdodFByb3BlcnR5IiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsImN1cnNvciIsImFsaWduIiwieE1hcmdpbiIsImhpZ2hsaWdodEZpbGwiLCJoaWdobGlnaHRDb3JuZXJSYWRpdXMiLCJ0YWdOYW1lIiwiZm9jdXNhYmxlIiwiYXJpYVJvbGUiLCJwb3NpdGlvbkluUERPTSIsInZvaWNpbmdGb2N1c0xpc3RlbmVyIiwiY29tYm9Cb3hMaXN0SXRlbU5vZGVWb2ljaW5nRm9jdXNMaXN0ZW5lciIsImNvbWJvQm94Vm9pY2luZ05hbWVSZXNwb25zZVBhdHRlcm4iLCJWQUxVRV9OQU1FRF9QTEFDRUhPTERFUiIsInRhbmRlbSIsIlJFUVVJUkVEIiwidGFuZGVtTmFtZVN1ZmZpeCIsInBoZXRpb1R5cGUiLCJwaGV0aW9TdGF0ZSIsInZpc2libGVQcm9wZXJ0eU9wdGlvbnMiLCJwaGV0aW9GZWF0dXJlZCIsImdldCIsImFzc2VydCIsInBoZXQiLCJjaGlwcGVyIiwicXVlcnlQYXJhbWV0ZXJzIiwic3RyaW5nVGVzdCIsImluY2x1ZGVzIiwiaW5uZXJDb250ZW50IiwiYTExeU5hbWUiLCJ2b2ljaW5nT2JqZWN0UmVzcG9uc2UiLCJwYXR0ZXJuUHJvcGVydHkiLCJwYXR0ZXJuU3RyaW5nUHJvcGVydHkiLCJ2YWx1ZSIsInZvaWNpbmdOYW1lUmVzcG9uc2UiLCJoaWdobGlnaHRSZWN0YW5nbGUiLCJjb3JuZXJSYWRpdXMiLCJpdGVtTm9kZVdyYXBwZXIiLCJjaGlsZHJlbiIsImhpZ2hsaWdodFdpZHRoTGlzdGVuZXIiLCJ3aWR0aCIsInJlY3RXaWR0aCIsIm1heFdpZHRoIiwibGluayIsImhpZ2hsaWdodEhlaWdodExpc3RlbmVyIiwiaGVpZ2h0IiwicmVjdEhlaWdodCIsIm1heEhlaWdodCIsInVwZGF0ZUl0ZW1MYXlvdXQiLCJsZWZ0IiwicmlnaHQiLCJjZW50ZXJYIiwiY2VudGVyWSIsImJvdW5kc1Byb3BlcnR5IiwibGF6eUxpbmsiLCJfc3VwcGx5T3BlblJlc3BvbnNlT25OZXh0Rm9jdXMiLCJsb2NhbEJvdW5kc1Byb3BlcnR5IiwibG9jYWxCb3VuZHMiLCJmb2N1c0hpZ2hsaWdodCIsImJvdW5kcyIsImFkZElucHV0TGlzdGVuZXIiLCJlbnRlciIsImZpbGwiLCJleGl0IiwiZGlzcG9zZUNvbWJvQm94TGlzdEl0ZW1Ob2RlIiwiZGlzcG9zZSIsInVubGluayIsInN1cHBseU9wZW5SZXNwb25zZU9uTmV4dEZvY3VzIiwidm9pY2luZ1NwZWFrRnVsbFJlc3BvbnNlIiwibmFtZVJlc3BvbnNlIiwib2JqZWN0UmVzcG9uc2UiLCJjb250ZXh0UmVzcG9uc2UiLCJoaW50UmVzcG9uc2UiLCJ2b2ljaW5nSGludFJlc3BvbnNlIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJDb21ib0JveExpc3RJdGVtTm9kZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOS0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBOb2RlIGZvciBhbiBpdGVtIGluIGEgY29tYm8gYm94IGxpc3QuXHJcbiAqIFJlc3BvbnNpYmxlIGZvciBoaWdobGlnaHRpbmcgaXRzZWxmIHdoZW4gdGhlIHBvaW50ZXIgaXMgb3ZlciBpdC5cclxuICogVHlwaWNhbGx5IGluc3RhbnRpYXRlZCBieSBDb21ib0JveCwgbm90IGJ5IGNsaWVudCBjb2RlLlxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSAnLi4vLi4va2l0ZS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IFN0cmljdE9taXQgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL1N0cmljdE9taXQuanMnO1xyXG5pbXBvcnQgb3B0aW9uaXplIGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgeyBJbmRleGVkTm9kZUlPLCBOb2RlLCBOb2RlT3B0aW9ucywgUmVjdGFuZ2xlLCBUUGFpbnQsIFZvaWNpbmcsIFZvaWNpbmdPcHRpb25zIH0gZnJvbSAnLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IFRhbmRlbSBmcm9tICcuLi8uLi90YW5kZW0vanMvVGFuZGVtLmpzJztcclxuaW1wb3J0IHN1biBmcm9tICcuL3N1bi5qcyc7XHJcbmltcG9ydCBTdW5Db25zdGFudHMgZnJvbSAnLi9TdW5Db25zdGFudHMuanMnO1xyXG5pbXBvcnQgVFJlYWRPbmx5UHJvcGVydHkgZnJvbSAnLi4vLi4vYXhvbi9qcy9UUmVhZE9ubHlQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBQcm9wZXJ0eSBmcm9tICcuLi8uLi9heG9uL2pzL1Byb3BlcnR5LmpzJztcclxuaW1wb3J0IFBhdHRlcm5TdHJpbmdQcm9wZXJ0eSBmcm9tICcuLi8uLi9heG9uL2pzL1BhdHRlcm5TdHJpbmdQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCB7IENvbWJvQm94SXRlbU5vTm9kZSB9IGZyb20gJy4vQ29tYm9Cb3guanMnO1xyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IHtcclxuICBhbGlnbj86ICdsZWZ0JyB8ICdyaWdodCcgfCAnY2VudGVyJztcclxuXHJcbiAgLy8gbWFyZ2luIGJldHdlZW4gdGhlIGl0ZW0gYW5kIHRoZSBoaWdobGlnaHQgZWRnZVxyXG4gIHhNYXJnaW4/OiBudW1iZXI7XHJcblxyXG4gIC8vIGhpZ2hsaWdodCBiZWhpbmQgdGhlIGl0ZW1cclxuICBoaWdobGlnaHRGaWxsPzogVFBhaW50O1xyXG5cclxuICAvLyBjb3JuZXIgcmFkaXVzIGZvciB0aGUgaGlnaGxpZ2h0XHJcbiAgaGlnaGxpZ2h0Q29ybmVyUmFkaXVzPzogbnVtYmVyO1xyXG5cclxuICBjb21ib0JveFZvaWNpbmdOYW1lUmVzcG9uc2VQYXR0ZXJuPzogVFJlYWRPbmx5UHJvcGVydHk8c3RyaW5nPiB8IHN0cmluZztcclxufTtcclxudHlwZSBQYXJlbnRPcHRpb25zID0gVm9pY2luZ09wdGlvbnMgJiBOb2RlT3B0aW9ucztcclxuZXhwb3J0IHR5cGUgQ29tYm9Cb3hMaXN0SXRlbU5vZGVPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBTdHJpY3RPbWl0PFBhcmVudE9wdGlvbnMsICdjaGlsZHJlbicgfCAnaW5uZXJDb250ZW50Jz47XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb21ib0JveExpc3RJdGVtTm9kZTxUPiBleHRlbmRzIFZvaWNpbmcoIE5vZGUgKSB7XHJcblxyXG4gIC8vIHdoZW4gdHJ1ZSwgdGhlIG5leHQgdm9pY2luZyBmb2N1cyBsaXN0ZW5lciB3aWxsIHN1cHBseSB0aGUgcmVzcG9uc2UgbmVlZGVkIHdoZW4gb3BlbmluZyB0aGUgY29tYm9Cb3guXHJcbiAgLy8gSXQgd2lsbCB0aGVuIHNldCB0aGlzIGJhY2sgdG8gZmFsc2UuXHJcbiAgcHJpdmF0ZSBfc3VwcGx5T3BlblJlc3BvbnNlT25OZXh0Rm9jdXM6IGJvb2xlYW47XHJcblxyXG4gIHB1YmxpYyByZWFkb25seSBpdGVtOiBDb21ib0JveEl0ZW1Ob05vZGU8VD47XHJcblxyXG4gIHByaXZhdGUgcmVhZG9ubHkgZGlzcG9zZUNvbWJvQm94TGlzdEl0ZW1Ob2RlOiAoKSA9PiB2b2lkO1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIGl0ZW06IENvbWJvQm94SXRlbU5vTm9kZTxUPiwgbm9kZTogTm9kZSwgaGlnaGxpZ2h0V2lkdGhQcm9wZXJ0eTogVFJlYWRPbmx5UHJvcGVydHk8bnVtYmVyPiwgaGlnaGxpZ2h0SGVpZ2h0UHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PG51bWJlcj4sIHByb3ZpZGVkT3B0aW9ucz86IENvbWJvQm94TGlzdEl0ZW1Ob2RlT3B0aW9ucyApIHtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPENvbWJvQm94TGlzdEl0ZW1Ob2RlT3B0aW9ucywgU2VsZk9wdGlvbnMsIFBhcmVudE9wdGlvbnM+KCkoIHtcclxuXHJcbiAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxyXG4gICAgICBhbGlnbjogJ2xlZnQnLFxyXG4gICAgICB4TWFyZ2luOiA2LFxyXG4gICAgICBoaWdobGlnaHRGaWxsOiAncmdiKCAyNDUsIDI0NSwgMjQ1ICknLFxyXG4gICAgICBoaWdobGlnaHRDb3JuZXJSYWRpdXM6IDQsXHJcblxyXG4gICAgICAvLyBwZG9tXHJcbiAgICAgIHRhZ05hbWU6ICdsaScsXHJcbiAgICAgIGZvY3VzYWJsZTogdHJ1ZSxcclxuICAgICAgYXJpYVJvbGU6ICdvcHRpb24nLFxyXG5cclxuICAgICAgLy8gdGhlIGBsaWAgd2l0aCBhcmlhUm9sZSBgb3B0aW9uYCBkb2VzIG5vdCBnZXQgY2xpY2sgZXZlbnRzIG9uIGlPUyBWb2ljZU92ZXIsIHNvIHBvc2l0aW9uXHJcbiAgICAgIC8vIGVsZW1lbnRzIHNvIHRoZXkgcmVjZWl2ZSBwb2ludGVyIGV2ZW50c1xyXG4gICAgICBwb3NpdGlvbkluUERPTTogdHJ1ZSxcclxuXHJcbiAgICAgIC8vIHZvaWNpbmdcclxuICAgICAgdm9pY2luZ0ZvY3VzTGlzdGVuZXI6ICgpID0+IHRoaXMuY29tYm9Cb3hMaXN0SXRlbU5vZGVWb2ljaW5nRm9jdXNMaXN0ZW5lcigpLFxyXG4gICAgICBjb21ib0JveFZvaWNpbmdOYW1lUmVzcG9uc2VQYXR0ZXJuOiBTdW5Db25zdGFudHMuVkFMVUVfTkFNRURfUExBQ0VIT0xERVIsXHJcblxyXG4gICAgICAvLyBwaGV0LWlvXHJcbiAgICAgIHRhbmRlbTogVGFuZGVtLlJFUVVJUkVELFxyXG4gICAgICB0YW5kZW1OYW1lU3VmZml4OiAnSXRlbScsXHJcblxyXG4gICAgICAvLyBUb2dldGhlciwgdGhlc2Ugb3B0aW9ucyBtYWtlIGl0IHBvc3NpYmxlIHRvIHJlb3JkZXIgdGhlIGNvbWJvIGJveCBpdGVtcyBpbiBzdHVkaW8sIGFuZCBzYXZlIGEgY3VzdG9taXplZFxyXG4gICAgICAvLyBzaW11bGF0aW9uIHdpdGggdGhlIG5ldyBvcmRlci5cclxuICAgICAgcGhldGlvVHlwZTogSW5kZXhlZE5vZGVJTyxcclxuICAgICAgcGhldGlvU3RhdGU6IHRydWUsXHJcbiAgICAgIHZpc2libGVQcm9wZXJ0eU9wdGlvbnM6IHsgcGhldGlvRmVhdHVyZWQ6IHRydWUgfVxyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBjb252ZXJ0IFByb3BlcnR5IGludG8gc3RyaW5nXHJcbiAgICBvcHRpb25zLmNvbWJvQm94Vm9pY2luZ05hbWVSZXNwb25zZVBhdHRlcm4gPSBvcHRpb25zLmNvbWJvQm94Vm9pY2luZ05hbWVSZXNwb25zZVBhdHRlcm4uZ2V0ID9cclxuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBjb252ZXJ0IFByb3BlcnR5IGludG8gc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmNvbWJvQm94Vm9pY2luZ05hbWVSZXNwb25zZVBhdHRlcm4uZ2V0KCkgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5jb21ib0JveFZvaWNpbmdOYW1lUmVzcG9uc2VQYXR0ZXJuO1xyXG5cclxuICAgIC8vIERvbid0IHRlc3QgdGhlIGNvbnRlbnRzIG9mIHN0cmluZ3Mgd2hlbiA/c3RyaW5nVGVzdCBpcyBlbmFibGVkXHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhIXBoZXQuY2hpcHBlci5xdWVyeVBhcmFtZXRlcnMuc3RyaW5nVGVzdCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBpcyBhIHN0cmluZyBub3cuXHJcbiAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmNvbWJvQm94Vm9pY2luZ05hbWVSZXNwb25zZVBhdHRlcm4uaW5jbHVkZXMoICd7e3ZhbHVlfX0nICksXHJcbiAgICAgICd2YWx1ZSBuZWVkcyB0byBiZSBmaWxsZWQgaW4nICk7XHJcblxyXG4gICAgLy8gcGRvbTogZ2V0IGlubmVyQ29udGVudCBmcm9tIHRoZSBpdGVtXHJcbiAgICBvcHRpb25zLmlubmVyQ29udGVudCA9ICggaXRlbS5hMTF5TmFtZSB8fCBudWxsICk7XHJcbiAgICBvcHRpb25zLnZvaWNpbmdPYmplY3RSZXNwb25zZSA9ICggaXRlbS5hMTF5TmFtZSB8fCBudWxsICk7XHJcbiAgICBjb25zdCBwYXR0ZXJuUHJvcGVydHkgPSB0eXBlb2Ygb3B0aW9ucy5jb21ib0JveFZvaWNpbmdOYW1lUmVzcG9uc2VQYXR0ZXJuID09PSAnc3RyaW5nJyA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgUHJvcGVydHkoIG9wdGlvbnMuY29tYm9Cb3hWb2ljaW5nTmFtZVJlc3BvbnNlUGF0dGVybiApIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuY29tYm9Cb3hWb2ljaW5nTmFtZVJlc3BvbnNlUGF0dGVybjtcclxuICAgIGNvbnN0IHBhdHRlcm5TdHJpbmdQcm9wZXJ0eSA9IG5ldyBQYXR0ZXJuU3RyaW5nUHJvcGVydHkoIHBhdHRlcm5Qcm9wZXJ0eSwge1xyXG4gICAgICB2YWx1ZTogaXRlbS5hMTF5TmFtZVxyXG4gICAgfSApO1xyXG4gICAgb3B0aW9ucy52b2ljaW5nTmFtZVJlc3BvbnNlID0gcGF0dGVyblN0cmluZ1Byb3BlcnR5O1xyXG5cclxuICAgIC8vIEhpZ2hsaWdodCB0aGF0IGlzIHNob3duIHdoZW4gdGhlIHBvaW50ZXIgaXMgb3ZlciB0aGlzIGl0ZW0uIFRoaXMgaXMgbm90IHRoZSBhMTF5IGZvY3VzIHJlY3RhbmdsZS5cclxuICAgIGNvbnN0IGhpZ2hsaWdodFJlY3RhbmdsZSA9IG5ldyBSZWN0YW5nbGUoIHtcclxuICAgICAgY29ybmVyUmFkaXVzOiBvcHRpb25zLmhpZ2hsaWdodENvcm5lclJhZGl1c1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIFdyYXBwZXIgZm9yIHRoZSBpdGVtJ3MgTm9kZS4gRG8gbm90IHRyYW5zZm9ybSBpdGVtLm5vZGUgYmVjYXVzZSBpdCBpcyBzaGFyZWQgd2l0aCBDb21ib0JveEJ1dHRvbiFcclxuICAgIGNvbnN0IGl0ZW1Ob2RlV3JhcHBlciA9IG5ldyBOb2RlKCB7XHJcbiAgICAgIGNoaWxkcmVuOiBbIG5vZGUgXVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIEFkanVzdCB0aGUgc2l6ZSB3aGVuIHRoZSBoaWdobGlnaHQgc2l6ZSBjaGFuZ2VzLlxyXG4gICAgY29uc3QgaGlnaGxpZ2h0V2lkdGhMaXN0ZW5lciA9ICggd2lkdGg6IG51bWJlciApID0+IHtcclxuICAgICAgaGlnaGxpZ2h0UmVjdGFuZ2xlLnJlY3RXaWR0aCA9IHdpZHRoO1xyXG4gICAgICBpdGVtTm9kZVdyYXBwZXIubWF4V2lkdGggPSB3aWR0aDtcclxuICAgIH07XHJcbiAgICBoaWdobGlnaHRXaWR0aFByb3BlcnR5LmxpbmsoIGhpZ2hsaWdodFdpZHRoTGlzdGVuZXIgKTtcclxuICAgIGNvbnN0IGhpZ2hsaWdodEhlaWdodExpc3RlbmVyID0gKCBoZWlnaHQ6IG51bWJlciApID0+IHtcclxuICAgICAgaGlnaGxpZ2h0UmVjdGFuZ2xlLnJlY3RIZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgIGl0ZW1Ob2RlV3JhcHBlci5tYXhIZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICB9O1xyXG4gICAgaGlnaGxpZ2h0SGVpZ2h0UHJvcGVydHkubGluayggaGlnaGxpZ2h0SGVpZ2h0TGlzdGVuZXIgKTtcclxuXHJcbiAgICAvLyBBc3N1bWUgdGhhdCBpdGVtLm5vZGUgbWF5IGNoYW5nZSAoYXMgaW4gQ29tYm9Cb3hEaXNwbGF5KSBhbmQgYWRqdXN0IGxheW91dCBkeW5hbWljYWxseS5cclxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvc2NlbmVyeS1waGV0L2lzc3Vlcy80ODJcclxuICAgIGNvbnN0IHVwZGF0ZUl0ZW1MYXlvdXQgPSAoKSA9PiB7XHJcbiAgICAgIGlmICggb3B0aW9ucy5hbGlnbiA9PT0gJ2xlZnQnICkge1xyXG4gICAgICAgIGl0ZW1Ob2RlV3JhcHBlci5sZWZ0ID0gaGlnaGxpZ2h0UmVjdGFuZ2xlLmxlZnQgKyBvcHRpb25zLnhNYXJnaW47XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAoIG9wdGlvbnMuYWxpZ24gPT09ICdyaWdodCcgKSB7XHJcbiAgICAgICAgaXRlbU5vZGVXcmFwcGVyLnJpZ2h0ID0gaGlnaGxpZ2h0UmVjdGFuZ2xlLnJpZ2h0IC0gb3B0aW9ucy54TWFyZ2luO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIGl0ZW1Ob2RlV3JhcHBlci5jZW50ZXJYID0gaGlnaGxpZ2h0UmVjdGFuZ2xlLmNlbnRlclg7XHJcbiAgICAgIH1cclxuICAgICAgaXRlbU5vZGVXcmFwcGVyLmNlbnRlclkgPSBoaWdobGlnaHRSZWN0YW5nbGUuY2VudGVyWTtcclxuICAgIH07XHJcbiAgICBpdGVtTm9kZVdyYXBwZXIuYm91bmRzUHJvcGVydHkubGF6eUxpbmsoIHVwZGF0ZUl0ZW1MYXlvdXQgKTtcclxuICAgIHVwZGF0ZUl0ZW1MYXlvdXQoKTtcclxuXHJcbiAgICBvcHRpb25zLmNoaWxkcmVuID0gWyBoaWdobGlnaHRSZWN0YW5nbGUsIGl0ZW1Ob2RlV3JhcHBlciBdO1xyXG5cclxuICAgIHN1cGVyKCBvcHRpb25zICk7XHJcbiAgICB0aGlzLl9zdXBwbHlPcGVuUmVzcG9uc2VPbk5leHRGb2N1cyA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMuaXRlbSA9IGl0ZW07XHJcblxyXG4gICAgLy8gcGRvbSBmb2N1cyBoaWdobGlnaHQgaXMgZml0dGVkIHRvIHRoaXMgTm9kZSdzIGJvdW5kcywgc28gdGhhdCBpdCBkb2Vzbid0IG92ZXJsYXAgb3RoZXIgaXRlbXMgaW4gdGhlIGxpc3QgYm94XHJcbiAgICB0aGlzLmxvY2FsQm91bmRzUHJvcGVydHkubGluayggbG9jYWxCb3VuZHMgPT4ge1xyXG4gICAgICB0aGlzLmZvY3VzSGlnaGxpZ2h0ID0gU2hhcGUuYm91bmRzKCBsb2NhbEJvdW5kcyApO1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIFNob3cgaGlnaGxpZ2h0IHdoZW4gcG9pbnRlciBpcyBvdmVyIHRoaXMgaXRlbS5cclxuICAgIC8vIENoYW5nZSBmaWxsIGluc3RlYWQgb2YgdmlzaWJpbGl0eSBzbyB0aGF0IHdlIGRvbid0IGVuZCB1cCB3aXRoIHZlcnRpY2FsIHBvaW50ZXIgZ2FwcyBpbiB0aGUgbGlzdFxyXG4gICAgdGhpcy5hZGRJbnB1dExpc3RlbmVyKCB7XHJcbiAgICAgIGVudGVyKCkgeyBoaWdobGlnaHRSZWN0YW5nbGUuZmlsbCA9IG9wdGlvbnMuaGlnaGxpZ2h0RmlsbDsgfSxcclxuICAgICAgZXhpdCgpIHsgaGlnaGxpZ2h0UmVjdGFuZ2xlLmZpbGwgPSBudWxsOyB9XHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5kaXNwb3NlQ29tYm9Cb3hMaXN0SXRlbU5vZGUgPSAoKSA9PiB7XHJcbiAgICAgIHBhdHRlcm5TdHJpbmdQcm9wZXJ0eS5kaXNwb3NlKCk7XHJcbiAgICAgIGhpZ2hsaWdodFdpZHRoUHJvcGVydHkudW5saW5rKCBoaWdobGlnaHRXaWR0aExpc3RlbmVyICk7XHJcbiAgICAgIGhpZ2hsaWdodEhlaWdodFByb3BlcnR5LnVubGluayggaGlnaGxpZ2h0SGVpZ2h0TGlzdGVuZXIgKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBc2sgZm9yIHRoZSB2b2ljaW5nIHJlc3BvbnNlIGZvciBvcGVuaW5nIHRoZSBDb21ib0JveCB1cG9uIG5leHQgZm9jdXMsIGJ1dCBvbmx5IGZvciB0aGUgdmVyeSBuZXh0IGZvY3VzIGV2ZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdXBwbHlPcGVuUmVzcG9uc2VPbk5leHRGb2N1cygpOiB2b2lkIHtcclxuICAgIHRoaXMuX3N1cHBseU9wZW5SZXNwb25zZU9uTmV4dEZvY3VzID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZyZWUgbWVtb3J5IHJlZmVyZW5jZXMgdG8gYXZvaWQgbGVha3MuXHJcbiAgICovXHJcbiAgcHVibGljIG92ZXJyaWRlIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICB0aGlzLmRpc3Bvc2VDb21ib0JveExpc3RJdGVtTm9kZSgpO1xyXG4gICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQSBjdXN0b20gZm9jdXMgbGlzdGVuZXIgZm9yIHRoaXMgdHlwZSwgd2l0aCBjb25kaXRpb25hbCBzdXBwb3J0IGZvciBwcm92aWRpbmcgYSBub3JtYWwgZm9jdXMgdnMgYW4gXCJvcGVuXCIgcmVzcG9uc2UuXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBjb21ib0JveExpc3RJdGVtTm9kZVZvaWNpbmdGb2N1c0xpc3RlbmVyKCk6IHZvaWQge1xyXG4gICAgdGhpcy52b2ljaW5nU3BlYWtGdWxsUmVzcG9uc2UoIHtcclxuICAgICAgbmFtZVJlc3BvbnNlOiB0aGlzLl9zdXBwbHlPcGVuUmVzcG9uc2VPbk5leHRGb2N1cyA/IHRoaXMudm9pY2luZ05hbWVSZXNwb25zZSA6IG51bGwsXHJcbiAgICAgIG9iamVjdFJlc3BvbnNlOiB0aGlzLl9zdXBwbHlPcGVuUmVzcG9uc2VPbk5leHRGb2N1cyA/IG51bGwgOiB0aGlzLnZvaWNpbmdPYmplY3RSZXNwb25zZSxcclxuICAgICAgY29udGV4dFJlc3BvbnNlOiBudWxsLFxyXG4gICAgICBoaW50UmVzcG9uc2U6IHRoaXMuX3N1cHBseU9wZW5SZXNwb25zZU9uTmV4dEZvY3VzID8gdGhpcy52b2ljaW5nSGludFJlc3BvbnNlIDogbnVsbFxyXG4gICAgfSApO1xyXG4gICAgdGhpcy5fc3VwcGx5T3BlblJlc3BvbnNlT25OZXh0Rm9jdXMgPSBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcbnN1bi5yZWdpc3RlciggJ0NvbWJvQm94TGlzdEl0ZW1Ob2RlJywgQ29tYm9Cb3hMaXN0SXRlbU5vZGUgKTtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxTQUFTQSxLQUFLLFFBQVEsMEJBQTBCO0FBRWhELE9BQU9DLFNBQVMsTUFBTSxpQ0FBaUM7QUFDdkQsU0FBU0MsYUFBYSxFQUFFQyxJQUFJLEVBQWVDLFNBQVMsRUFBVUMsT0FBTyxRQUF3Qiw2QkFBNkI7QUFDMUgsT0FBT0MsTUFBTSxNQUFNLDJCQUEyQjtBQUM5QyxPQUFPQyxHQUFHLE1BQU0sVUFBVTtBQUMxQixPQUFPQyxZQUFZLE1BQU0sbUJBQW1CO0FBRTVDLE9BQU9DLFFBQVEsTUFBTSwyQkFBMkI7QUFDaEQsT0FBT0MscUJBQXFCLE1BQU0sd0NBQXdDO0FBb0IxRSxlQUFlLE1BQU1DLG9CQUFvQixTQUFZTixPQUFPLENBQUVGLElBQUssQ0FBQyxDQUFDO0VBRW5FO0VBQ0E7O0VBT09TLFdBQVdBLENBQUVDLElBQTJCLEVBQUVDLElBQVUsRUFBRUMsc0JBQWlELEVBQUVDLHVCQUFrRCxFQUFFQyxlQUE2QyxFQUFHO0lBRWxOLE1BQU1DLE9BQU8sR0FBR2pCLFNBQVMsQ0FBMEQsQ0FBQyxDQUFFO01BRXBGa0IsTUFBTSxFQUFFLFNBQVM7TUFDakJDLEtBQUssRUFBRSxNQUFNO01BQ2JDLE9BQU8sRUFBRSxDQUFDO01BQ1ZDLGFBQWEsRUFBRSxzQkFBc0I7TUFDckNDLHFCQUFxQixFQUFFLENBQUM7TUFFeEI7TUFDQUMsT0FBTyxFQUFFLElBQUk7TUFDYkMsU0FBUyxFQUFFLElBQUk7TUFDZkMsUUFBUSxFQUFFLFFBQVE7TUFFbEI7TUFDQTtNQUNBQyxjQUFjLEVBQUUsSUFBSTtNQUVw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