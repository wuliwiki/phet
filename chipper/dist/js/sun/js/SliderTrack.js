// Copyright 2016-2022, University of Colorado Boulder

/**
 * Shows a track on a slider.  Must be supplied a Node for rendering the track.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Jesse Greenberg (PhET Interactive Simulations)
 */

import Dimension2 from '../../dot/js/Dimension2.js';
import LinearFunction from '../../dot/js/LinearFunction.js';
import Range from '../../dot/js/Range.js';
import ValueChangeSoundPlayer from '../../tambo/js/sound-generators/ValueChangeSoundPlayer.js';
import optionize from '../../phet-core/js/optionize.js';
import { DragListener, Node, WidthSizable } from '../../scenery/js/imports.js';
import Tandem from '../../tandem/js/Tandem.js';
import sun from './sun.js';
import Slider from './Slider.js';
import TinyProperty from '../../axon/js/TinyProperty.js';
import DerivedProperty from '../../axon/js/DerivedProperty.js';
export default class SliderTrack extends WidthSizable(Node) {
  // For use by Slider, maps the value along the range of the track to the position along the width of the track

  // public so that clients can access Properties of the DragListener that tell us about its state
  // See https://github.com/phetsims/sun/issues/680
  // (sun-internal)
  constructor(valueProperty, trackNode, range, providedOptions) {
    super();
    this.rangeProperty = range instanceof Range ? new TinyProperty(range) : range;
    const options = optionize()({
      size: new Dimension2(100, 5),
      startDrag: _.noop,
      // called when a drag sequence starts
      drag: _.noop,
      // called at the beginning of a drag event, before any other drag work happens
      endDrag: _.noop,
      // called when a drag sequence ends
      constrainValue: _.identity,
      // called before valueProperty is set
      enabledRangeProperty: this.rangeProperty,
      soundGenerator: Slider.DEFAULT_SOUND,
      valueChangeSoundGeneratorOptions: {},
      voicingOnEndResponse: _.noop,
      leftVisualOverflow: 0,
      rightVisualOverflow: 0,
      // phet-io
      tandem: Tandem.REQUIRED,
      tandemNameSuffix: 'TrackNode'
    }, providedOptions);

    // If no sound generator was provided, create the default.
    if (options.soundGenerator === Slider.DEFAULT_SOUND) {
      // NOTE: We'll want to update ValueChangeSoundPlayer for dynamic ranges if it's used more for that
      options.soundGenerator = new ValueChangeSoundPlayer(this.rangeProperty.value, options.valueChangeSoundGeneratorOptions || {});
    } else if (options.soundGenerator === null) {
      options.soundGenerator = ValueChangeSoundPlayer.NO_SOUND;
    }
    this.leftVisualOverflow = options.leftVisualOverflow;
    this.rightVisualOverflow = options.rightVisualOverflow;
    this.minimumSize = options.size;
    this.minimumWidth = this.minimumSize.width;
    this.internalWidthProperty = new DerivedProperty([this.localPreferredWidthProperty], localPreferredWidth => {
      // Our preferred width should be subtracted out by the anticipated overflow, so that our size can be slightly
      // smaller.
      return (localPreferredWidth === null ? this.minimumSize.width : Math.max(this.minimumSize.width, localPreferredWidth)) - options.leftVisualOverflow - options.rightVisualOverflow;
    });
    this.sizeProperty = new DerivedProperty([this.internalWidthProperty], width => new Dimension2(width, this.minimumSize.height));

    // NOTE: Slider needs to make a lot of assumptions about how this works (in order to figure out proper layout).
    // DO NOT change without taking a CLOSE CLOSE look at Slider's layout code.
    this.valueToPositionProperty = new DerivedProperty([this.rangeProperty, this.internalWidthProperty], (range, width) => {
      return new LinearFunction(range.min, range.max, 0, width, true /* clamp */);
    });

    // click in the track to change the value, continue dragging if desired
    const handleTrackEvent = (event, trail) => {
      const oldValue = valueProperty.value;
      const transform = trail.subtrailTo(this).getTransform();
      const x = transform.inversePosition2(event.pointer.point).x;
      const value = this.valueToPositionProperty.value.inverse(x);
      const valueInRange = options.enabledRangeProperty.value.constrainValue(value);
      const newValue = options.constrainValue(valueInRange);
      valueProperty.set(newValue);

      // Down events on the track can cause value changes.  If that's what just happened, play a sound.
      if (event.type === 'down') {
        options.soundGenerator.playSoundIfThresholdReached(newValue, oldValue);
      }
    };
    this.addChild(trackNode);
    let valueOnStart = valueProperty.value;
    this.dragListener = new DragListener({
      tandem: options.tandem.createTandem('dragListener'),
      start: (event, listener) => {
        options.startDrag(event);
        valueOnStart = valueProperty.value;
        handleTrackEvent(event, listener.pressedTrail);
      },
      drag: (event, listener) => {
        options.drag(event);

        // Reuse the same handleTrackEvent but make sure the startedCallbacks call is made before the value changes
        handleTrackEvent(event, listener.pressedTrail);
      },
      end: event => {
        options.endDrag(event);
        options.voicingOnEndResponse(valueOnStart);
      }
    });
    trackNode.addInputListener(this.dragListener);
    this.mutate(options);
    this.disposeSliderTrack = () => {
      trackNode.removeInputListener(this.dragListener);
      this.dragListener.dispose();
    };
  }
  dispose() {
    this.disposeSliderTrack();
    super.dispose();
  }
}
sun.register('SliderTrack', SliderTrack);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEaW1lbnNpb24yIiwiTGluZWFyRnVuY3Rpb24iLCJSYW5nZSIsIlZhbHVlQ2hhbmdlU291bmRQbGF5ZXIiLCJvcHRpb25pemUiLCJEcmFnTGlzdGVuZXIiLCJOb2RlIiwiV2lkdGhTaXphYmxlIiwiVGFuZGVtIiwic3VuIiwiU2xpZGVyIiwiVGlueVByb3BlcnR5IiwiRGVyaXZlZFByb3BlcnR5IiwiU2xpZGVyVHJhY2siLCJjb25zdHJ1Y3RvciIsInZhbHVlUHJvcGVydHkiLCJ0cmFja05vZGUiLCJyYW5nZSIsInByb3ZpZGVkT3B0aW9ucyIsInJhbmdlUHJvcGVydHkiLCJvcHRpb25zIiwic2l6ZSIsInN0YXJ0RHJhZyIsIl8iLCJub29wIiwiZHJhZyIsImVuZERyYWciLCJjb25zdHJhaW5WYWx1ZSIsImlkZW50aXR5IiwiZW5hYmxlZFJhbmdlUHJvcGVydHkiLCJzb3VuZEdlbmVyYXRvciIsIkRFRkFVTFRfU09VTkQiLCJ2YWx1ZUNoYW5nZVNvdW5kR2VuZXJhdG9yT3B0aW9ucyIsInZvaWNpbmdPbkVuZFJlc3BvbnNlIiwibGVmdFZpc3VhbE92ZXJmbG93IiwicmlnaHRWaXN1YWxPdmVyZmxvdyIsInRhbmRlbSIsIlJFUVVJUkVEIiwidGFuZGVtTmFtZVN1ZmZpeCIsInZhbHVlIiwiTk9fU09VTkQiLCJtaW5pbXVtU2l6ZSIsIm1pbmltdW1XaWR0aCIsIndpZHRoIiwiaW50ZXJuYWxXaWR0aFByb3BlcnR5IiwibG9jYWxQcmVmZXJyZWRXaWR0aFByb3BlcnR5IiwibG9jYWxQcmVmZXJyZWRXaWR0aCIsIk1hdGgiLCJtYXgiLCJzaXplUHJvcGVydHkiLCJoZWlnaHQiLCJ2YWx1ZVRvUG9zaXRpb25Qcm9wZXJ0eSIsIm1pbiIsImhhbmRsZVRyYWNrRXZlbnQiLCJldmVudCIsInRyYWlsIiwib2xkVmFsdWUiLCJ0cmFuc2Zvcm0iLCJzdWJ0cmFpbFRvIiwiZ2V0VHJhbnNmb3JtIiwieCIsImludmVyc2VQb3NpdGlvbjIiLCJwb2ludGVyIiwicG9pbnQiLCJpbnZlcnNlIiwidmFsdWVJblJhbmdlIiwibmV3VmFsdWUiLCJzZXQiLCJ0eXBlIiwicGxheVNvdW5kSWZUaHJlc2hvbGRSZWFjaGVkIiwiYWRkQ2hpbGQiLCJ2YWx1ZU9uU3RhcnQiLCJkcmFnTGlzdGVuZXIiLCJjcmVhdGVUYW5kZW0iLCJzdGFydCIsImxpc3RlbmVyIiwicHJlc3NlZFRyYWlsIiwiZW5kIiwiYWRkSW5wdXRMaXN0ZW5lciIsIm11dGF0ZSIsImRpc3Bvc2VTbGlkZXJUcmFjayIsInJlbW92ZUlucHV0TGlzdGVuZXIiLCJkaXNwb3NlIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJTbGlkZXJUcmFjay50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNi0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBTaG93cyBhIHRyYWNrIG9uIGEgc2xpZGVyLiAgTXVzdCBiZSBzdXBwbGllZCBhIE5vZGUgZm9yIHJlbmRlcmluZyB0aGUgdHJhY2suXHJcbiAqXHJcbiAqIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXHJcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqIEBhdXRob3IgSmVzc2UgR3JlZW5iZXJnIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxyXG4gKi9cclxuXHJcbmltcG9ydCBUUHJvcGVydHkgZnJvbSAnLi4vLi4vYXhvbi9qcy9UUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgVFJlYWRPbmx5UHJvcGVydHkgZnJvbSAnLi4vLi4vYXhvbi9qcy9UUmVhZE9ubHlQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBEaW1lbnNpb24yIGZyb20gJy4uLy4uL2RvdC9qcy9EaW1lbnNpb24yLmpzJztcclxuaW1wb3J0IExpbmVhckZ1bmN0aW9uIGZyb20gJy4uLy4uL2RvdC9qcy9MaW5lYXJGdW5jdGlvbi5qcyc7XHJcbmltcG9ydCBSYW5nZSBmcm9tICcuLi8uLi9kb3QvanMvUmFuZ2UuanMnO1xyXG5pbXBvcnQgVmFsdWVDaGFuZ2VTb3VuZFBsYXllciwgeyBWYWx1ZUNoYW5nZVNvdW5kUGxheWVyT3B0aW9ucyB9IGZyb20gJy4uLy4uL3RhbWJvL2pzL3NvdW5kLWdlbmVyYXRvcnMvVmFsdWVDaGFuZ2VTb3VuZFBsYXllci5qcyc7XHJcbmltcG9ydCBvcHRpb25pemUgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCB7IERyYWdMaXN0ZW5lciwgTm9kZSwgTm9kZU9wdGlvbnMsIFNjZW5lcnlFdmVudCwgVHJhaWwsIFdpZHRoU2l6YWJsZSB9IGZyb20gJy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBUYW5kZW0gZnJvbSAnLi4vLi4vdGFuZGVtL2pzL1RhbmRlbS5qcyc7XHJcbmltcG9ydCBzdW4gZnJvbSAnLi9zdW4uanMnO1xyXG5pbXBvcnQgU2xpZGVyIGZyb20gJy4vU2xpZGVyLmpzJztcclxuaW1wb3J0IHsgVm9pY2luZ09uRW5kUmVzcG9uc2UgfSBmcm9tICcuL2FjY2Vzc2liaWxpdHkvQWNjZXNzaWJsZVZhbHVlSGFuZGxlci5qcyc7XHJcbmltcG9ydCBUaW55UHJvcGVydHkgZnJvbSAnLi4vLi4vYXhvbi9qcy9UaW55UHJvcGVydHkuanMnO1xyXG5pbXBvcnQgRGVyaXZlZFByb3BlcnR5IGZyb20gJy4uLy4uL2F4b24vanMvRGVyaXZlZFByb3BlcnR5LmpzJztcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSB7XHJcbiAgLy8gTk9URTogZm9yIGJhY2t3YXJkcy1jb21wYXRpYmlsaXR5LCB0aGUgc2l6ZSBkb2VzIE5PVCBpbmNsdWRlIHRoZSBleHRlbnQgb2YgdGhlIHN0cm9rZSwgc28gdGhlIHRyYWNrIHdpbGwgYmUgbGFyZ2VyXHJcbiAgLy8gdGhhbiB0aGlzIHNpemVcclxuICBzaXplPzogRGltZW5zaW9uMjtcclxuXHJcbiAgLy8gY2FsbGVkIHdoZW4gYSBkcmFnIHNlcXVlbmNlIHN0YXJ0c1xyXG4gIHN0YXJ0RHJhZz86ICggZTogU2NlbmVyeUV2ZW50ICkgPT4gdm9pZDtcclxuXHJcbiAgLy8gY2FsbGVkIGF0IHRoZSBiZWdpbm5pbmcgb2YgYSBkcmFnIGV2ZW50LCBiZWZvcmUgYW55IG90aGVyIGRyYWcgd29yayBoYXBwZW5zXHJcbiAgZHJhZz86ICggZTogU2NlbmVyeUV2ZW50ICkgPT4gdm9pZDtcclxuXHJcbiAgLy8gY2FsbGVkIHdoZW4gYSBkcmFnIHNlcXVlbmNlIGVuZHNcclxuICBlbmREcmFnPzogKCBlOiBTY2VuZXJ5RXZlbnQgfCBudWxsICkgPT4gdm9pZDtcclxuXHJcbiAgLy8gY2FsbGVkIGJlZm9yZSB2YWx1ZVByb3BlcnR5IGlzIHNldFxyXG4gIGNvbnN0cmFpblZhbHVlPzogKCBuOiBudW1iZXIgKSA9PiBudW1iZXI7XHJcblxyXG4gIC8vIERlZmF1bHRzIHRvIGEgY29uc3RhbnQgcmFuZ2VcclxuICBlbmFibGVkUmFuZ2VQcm9wZXJ0eT86IFRSZWFkT25seVByb3BlcnR5PFJhbmdlPjtcclxuXHJcbiAgLy8gVGhpcyBpcyB1c2VkIHRvIGdlbmVyYXRlIHNvdW5kcyB3aGVuIGNsaWNraW5nIGluIHRoZSB0cmFjay4gIElmIG5vdCBwcm92aWRlZCwgdGhlIGRlZmF1bHQgc291bmQgZ2VuZXJhdG9yXHJcbiAgLy8gd2lsbCBiZSBjcmVhdGVkLiBJZiBzZXQgdG8gbnVsbCwgdGhlIHNsaWRlciB3aWxsIGdlbmVyYXRlIG5vIHNvdW5kLlxyXG4gIHNvdW5kR2VuZXJhdG9yPzogVmFsdWVDaGFuZ2VTb3VuZFBsYXllciB8IG51bGw7XHJcblxyXG4gIC8vIE9wdGlvbnMgZm9yIHRoZSBkZWZhdWx0IHNvdW5kIGdlbmVyYXRvci4gIFRoZXNlIHNob3VsZCBvbmx5IGJlIHByb3ZpZGVkIHdoZW4gdXNpbmcgdGhlIGRlZmF1bHQuXHJcbiAgdmFsdWVDaGFuZ2VTb3VuZEdlbmVyYXRvck9wdGlvbnM/OiBWYWx1ZUNoYW5nZVNvdW5kUGxheWVyT3B0aW9ucztcclxuXHJcbiAgLy8gQW5ub3VuY2VzIHRoZSB2b2ljaW5nIHJlc3BvbnNlIGF0IHRoZSBlbmQgb2YgYW4gaW50ZXJhY3Rpb24uIFVzZWQgYnkgQWNjZXNzaWJsZVZhbHVlSGFuZGxlciwgc2VlXHJcbiAgLy8gU2xpZGVyIGZvciBhbiBleGFtcGxlIHVzYWdlLlxyXG4gIHZvaWNpbmdPbkVuZFJlc3BvbnNlPzogVm9pY2luZ09uRW5kUmVzcG9uc2U7XHJcblxyXG4gIC8vIFNpbmNlIG91ciBoaXN0b3JpY2FsIHNsaWRlciB0cmFja3MgZXh0ZW5kIFBBU1QgdGhlIDAsc2l6ZSByYW5nZSAoZS5nLiB3aXRoIHN0cm9rZXMpLCBhbmQgdGhpcyBpbmZvcm1hdGlvbiBpcyBuZWVkZWRcclxuICAvLyBzbyB3ZSBjYW4gY29udHJvbCB0aGUgc2l6ZSBiYXNlZCBvbiBvdXIgcHJlZmVycmVkV2lkdGguIFdlJ2xsIG5lZWQgdGhlIHNpemUgdG8gYmUgc29tZXdoYXQgc21hbGxlciB0aGFuIG91clxyXG4gIC8vIHByZWZlcnJlZFdpZHRoXHJcbiAgbGVmdFZpc3VhbE92ZXJmbG93PzogbnVtYmVyO1xyXG4gIHJpZ2h0VmlzdWFsT3ZlcmZsb3c/OiBudW1iZXI7XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBTbGlkZXJUcmFja09wdGlvbnMgPSBTZWxmT3B0aW9ucyAmIE5vZGVPcHRpb25zO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2xpZGVyVHJhY2sgZXh0ZW5kcyBXaWR0aFNpemFibGUoIE5vZGUgKSB7XHJcblxyXG4gIHByb3RlY3RlZCByZWFkb25seSBtaW5pbXVtU2l6ZTogRGltZW5zaW9uMjtcclxuICBwcm90ZWN0ZWQgcmVhZG9ubHkgaW50ZXJuYWxXaWR0aFByb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxudW1iZXI+O1xyXG4gIHByb3RlY3RlZCByZWFkb25seSBzaXplUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PERpbWVuc2lvbjI+O1xyXG5cclxuICAvLyBGb3IgdXNlIGJ5IFNsaWRlciwgbWFwcyB0aGUgdmFsdWUgYWxvbmcgdGhlIHJhbmdlIG9mIHRoZSB0cmFjayB0byB0aGUgcG9zaXRpb24gYWxvbmcgdGhlIHdpZHRoIG9mIHRoZSB0cmFja1xyXG4gIHB1YmxpYyByZWFkb25seSB2YWx1ZVRvUG9zaXRpb25Qcm9wZXJ0eTogVFJlYWRPbmx5UHJvcGVydHk8TGluZWFyRnVuY3Rpb24+O1xyXG5cclxuICAvLyBwdWJsaWMgc28gdGhhdCBjbGllbnRzIGNhbiBhY2Nlc3MgUHJvcGVydGllcyBvZiB0aGUgRHJhZ0xpc3RlbmVyIHRoYXQgdGVsbCB1cyBhYm91dCBpdHMgc3RhdGVcclxuICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3N1bi9pc3N1ZXMvNjgwXHJcbiAgcHVibGljIHJlYWRvbmx5IGRyYWdMaXN0ZW5lcjogRHJhZ0xpc3RlbmVyO1xyXG5cclxuICAvLyAoc3VuLWludGVybmFsKVxyXG4gIHB1YmxpYyByZWFkb25seSByYW5nZVByb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxSYW5nZT47XHJcbiAgcHVibGljIHJlYWRvbmx5IGxlZnRWaXN1YWxPdmVyZmxvdzogbnVtYmVyO1xyXG4gIHB1YmxpYyByZWFkb25seSByaWdodFZpc3VhbE92ZXJmbG93OiBudW1iZXI7XHJcblxyXG4gIHByaXZhdGUgcmVhZG9ubHkgZGlzcG9zZVNsaWRlclRyYWNrOiAoKSA9PiB2b2lkO1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIHZhbHVlUHJvcGVydHk6IFRQcm9wZXJ0eTxudW1iZXI+LCB0cmFja05vZGU6IE5vZGUsIHJhbmdlOiBSYW5nZSB8IFRSZWFkT25seVByb3BlcnR5PFJhbmdlPiwgcHJvdmlkZWRPcHRpb25zPzogU2xpZGVyVHJhY2tPcHRpb25zICkge1xyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICB0aGlzLnJhbmdlUHJvcGVydHkgPSByYW5nZSBpbnN0YW5jZW9mIFJhbmdlID8gbmV3IFRpbnlQcm9wZXJ0eSggcmFuZ2UgKSA6IHJhbmdlO1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8U2xpZGVyVHJhY2tPcHRpb25zLCBTZWxmT3B0aW9ucywgTm9kZU9wdGlvbnM+KCkoIHtcclxuICAgICAgc2l6ZTogbmV3IERpbWVuc2lvbjIoIDEwMCwgNSApLFxyXG4gICAgICBzdGFydERyYWc6IF8ubm9vcCwgLy8gY2FsbGVkIHdoZW4gYSBkcmFnIHNlcXVlbmNlIHN0YXJ0c1xyXG4gICAgICBkcmFnOiBfLm5vb3AsIC8vIGNhbGxlZCBhdCB0aGUgYmVnaW5uaW5nIG9mIGEgZHJhZyBldmVudCwgYmVmb3JlIGFueSBvdGhlciBkcmFnIHdvcmsgaGFwcGVuc1xyXG4gICAgICBlbmREcmFnOiBfLm5vb3AsIC8vIGNhbGxlZCB3aGVuIGEgZHJhZyBzZXF1ZW5jZSBlbmRzXHJcbiAgICAgIGNvbnN0cmFpblZhbHVlOiBfLmlkZW50aXR5LCAvLyBjYWxsZWQgYmVmb3JlIHZhbHVlUHJvcGVydHkgaXMgc2V0XHJcbiAgICAgIGVuYWJsZWRSYW5nZVByb3BlcnR5OiB0aGlzLnJhbmdlUHJvcGVydHksXHJcbiAgICAgIHNvdW5kR2VuZXJhdG9yOiBTbGlkZXIuREVGQVVMVF9TT1VORCxcclxuICAgICAgdmFsdWVDaGFuZ2VTb3VuZEdlbmVyYXRvck9wdGlvbnM6IHt9LFxyXG4gICAgICB2b2ljaW5nT25FbmRSZXNwb25zZTogXy5ub29wLFxyXG5cclxuICAgICAgbGVmdFZpc3VhbE92ZXJmbG93OiAwLFxyXG4gICAgICByaWdodFZpc3VhbE92ZXJmbG93OiAwLFxyXG5cclxuICAgICAgLy8gcGhldC1pb1xyXG4gICAgICB0YW5kZW06IFRhbmRlbS5SRVFVSVJFRCxcclxuICAgICAgdGFuZGVtTmFtZVN1ZmZpeDogJ1RyYWNrTm9kZSdcclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIC8vIElmIG5vIHNvdW5kIGdlbmVyYXRvciB3YXMgcHJvdmlkZWQsIGNyZWF0ZSB0aGUgZGVmYXVsdC5cclxuICAgIGlmICggb3B0aW9ucy5zb3VuZEdlbmVyYXRvciA9PT0gU2xpZGVyLkRFRkFVTFRfU09VTkQgKSB7XHJcbiAgICAgIC8vIE5PVEU6IFdlJ2xsIHdhbnQgdG8gdXBkYXRlIFZhbHVlQ2hhbmdlU291bmRQbGF5ZXIgZm9yIGR5bmFtaWMgcmFuZ2VzIGlmIGl0J3MgdXNlZCBtb3JlIGZvciB0aGF0XHJcbiAgICAgIG9wdGlvbnMuc291bmRHZW5lcmF0b3IgPSBuZXcgVmFsdWVDaGFuZ2VTb3VuZFBsYXllciggdGhpcy5yYW5nZVByb3BlcnR5LnZhbHVlLCBvcHRpb25zLnZhbHVlQ2hhbmdlU291bmRHZW5lcmF0b3JPcHRpb25zIHx8IHt9ICk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICggb3B0aW9ucy5zb3VuZEdlbmVyYXRvciA9PT0gbnVsbCApIHtcclxuICAgICAgb3B0aW9ucy5zb3VuZEdlbmVyYXRvciA9IFZhbHVlQ2hhbmdlU291bmRQbGF5ZXIuTk9fU09VTkQ7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5sZWZ0VmlzdWFsT3ZlcmZsb3cgPSBvcHRpb25zLmxlZnRWaXN1YWxPdmVyZmxvdztcclxuICAgIHRoaXMucmlnaHRWaXN1YWxPdmVyZmxvdyA9IG9wdGlvbnMucmlnaHRWaXN1YWxPdmVyZmxvdztcclxuXHJcbiAgICB0aGlzLm1pbmltdW1TaXplID0gb3B0aW9ucy5zaXplO1xyXG4gICAgdGhpcy5taW5pbXVtV2lkdGggPSB0aGlzLm1pbmltdW1TaXplLndpZHRoO1xyXG4gICAgdGhpcy5pbnRlcm5hbFdpZHRoUHJvcGVydHkgPSBuZXcgRGVyaXZlZFByb3BlcnR5KCBbIHRoaXMubG9jYWxQcmVmZXJyZWRXaWR0aFByb3BlcnR5IF0sIGxvY2FsUHJlZmVycmVkV2lkdGggPT4ge1xyXG4gICAgICAvLyBPdXIgcHJlZmVycmVkIHdpZHRoIHNob3VsZCBiZSBzdWJ0cmFjdGVkIG91dCBieSB0aGUgYW50aWNpcGF0ZWQgb3ZlcmZsb3csIHNvIHRoYXQgb3VyIHNpemUgY2FuIGJlIHNsaWdodGx5XHJcbiAgICAgIC8vIHNtYWxsZXIuXHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgIGxvY2FsUHJlZmVycmVkV2lkdGggPT09IG51bGxcclxuICAgICAgICAgICAgICAgPyB0aGlzLm1pbmltdW1TaXplLndpZHRoXHJcbiAgICAgICAgICAgICAgIDogTWF0aC5tYXgoIHRoaXMubWluaW11bVNpemUud2lkdGgsIGxvY2FsUHJlZmVycmVkV2lkdGggKVxyXG4gICAgICAgICAgICAgKSAtIG9wdGlvbnMubGVmdFZpc3VhbE92ZXJmbG93IC0gb3B0aW9ucy5yaWdodFZpc3VhbE92ZXJmbG93O1xyXG4gICAgfSApO1xyXG4gICAgdGhpcy5zaXplUHJvcGVydHkgPSBuZXcgRGVyaXZlZFByb3BlcnR5KCBbXHJcbiAgICAgIHRoaXMuaW50ZXJuYWxXaWR0aFByb3BlcnR5XHJcbiAgICBdLCB3aWR0aCA9PiBuZXcgRGltZW5zaW9uMiggd2lkdGgsIHRoaXMubWluaW11bVNpemUuaGVpZ2h0ICkgKTtcclxuXHJcbiAgICAvLyBOT1RFOiBTbGlkZXIgbmVlZHMgdG8gbWFrZSBhIGxvdCBvZiBhc3N1bXB0aW9ucyBhYm91dCBob3cgdGhpcyB3b3JrcyAoaW4gb3JkZXIgdG8gZmlndXJlIG91dCBwcm9wZXIgbGF5b3V0KS5cclxuICAgIC8vIERPIE5PVCBjaGFuZ2Ugd2l0aG91dCB0YWtpbmcgYSBDTE9TRSBDTE9TRSBsb29rIGF0IFNsaWRlcidzIGxheW91dCBjb2RlLlxyXG4gICAgdGhpcy52YWx1ZVRvUG9zaXRpb25Qcm9wZXJ0eSA9IG5ldyBEZXJpdmVkUHJvcGVydHkoIFsgdGhpcy5yYW5nZVByb3BlcnR5LCB0aGlzLmludGVybmFsV2lkdGhQcm9wZXJ0eSBdLCAoIHJhbmdlLCB3aWR0aCApID0+IHtcclxuICAgICAgcmV0dXJuIG5ldyBMaW5lYXJGdW5jdGlvbiggcmFuZ2UubWluLCByYW5nZS5tYXgsIDAsIHdpZHRoLCB0cnVlIC8qIGNsYW1wICovICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gY2xpY2sgaW4gdGhlIHRyYWNrIHRvIGNoYW5nZSB0aGUgdmFsdWUsIGNvbnRpbnVlIGRyYWdnaW5nIGlmIGRlc2lyZWRcclxuICAgIGNvbnN0IGhhbmRsZVRyYWNrRXZlbnQgPSAoIGV2ZW50OiBTY2VuZXJ5RXZlbnQsIHRyYWlsOiBUcmFpbCApID0+IHtcclxuICAgICAgY29uc3Qgb2xkVmFsdWUgPSB2YWx1ZVByb3BlcnR5LnZhbHVlO1xyXG4gICAgICBjb25zdCB0cmFuc2Zvcm0gPSB0cmFpbC5zdWJ0cmFpbFRvKCB0aGlzICkuZ2V0VHJhbnNmb3JtKCk7XHJcbiAgICAgIGNvbnN0IHggPSB0cmFuc2Zvcm0uaW52ZXJzZVBvc2l0aW9uMiggZXZlbnQucG9pbnRlci5wb2ludCApLng7XHJcbiAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy52YWx1ZVRvUG9zaXRpb25Qcm9wZXJ0eS52YWx1ZS5pbnZlcnNlKCB4ICk7XHJcbiAgICAgIGNvbnN0IHZhbHVlSW5SYW5nZSA9IG9wdGlvbnMuZW5hYmxlZFJhbmdlUHJvcGVydHkudmFsdWUuY29uc3RyYWluVmFsdWUoIHZhbHVlICk7XHJcbiAgICAgIGNvbnN0IG5ld1ZhbHVlID0gb3B0aW9ucy5jb25zdHJhaW5WYWx1ZSggdmFsdWVJblJhbmdlICk7XHJcbiAgICAgIHZhbHVlUHJvcGVydHkuc2V0KCBuZXdWYWx1ZSApO1xyXG5cclxuICAgICAgLy8gRG93biBldmVudHMgb24gdGhlIHRyYWNrIGNhbiBjYXVzZSB2YWx1ZSBjaGFuZ2VzLiAgSWYgdGhhdCdzIHdoYXQganVzdCBoYXBwZW5lZCwgcGxheSBhIHNvdW5kLlxyXG4gICAgICBpZiAoIGV2ZW50LnR5cGUgPT09ICdkb3duJyApIHtcclxuICAgICAgICBvcHRpb25zLnNvdW5kR2VuZXJhdG9yIS5wbGF5U291bmRJZlRocmVzaG9sZFJlYWNoZWQoIG5ld1ZhbHVlLCBvbGRWYWx1ZSApO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRyYWNrTm9kZSApO1xyXG5cclxuICAgIGxldCB2YWx1ZU9uU3RhcnQgPSB2YWx1ZVByb3BlcnR5LnZhbHVlO1xyXG4gICAgdGhpcy5kcmFnTGlzdGVuZXIgPSBuZXcgRHJhZ0xpc3RlbmVyKCB7XHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnZHJhZ0xpc3RlbmVyJyApLFxyXG5cclxuICAgICAgc3RhcnQ6ICggZXZlbnQsIGxpc3RlbmVyICkgPT4ge1xyXG4gICAgICAgIG9wdGlvbnMuc3RhcnREcmFnKCBldmVudCApO1xyXG4gICAgICAgIHZhbHVlT25TdGFydCA9IHZhbHVlUHJvcGVydHkudmFsdWU7XHJcbiAgICAgICAgaGFuZGxlVHJhY2tFdmVudCggZXZlbnQsIGxpc3RlbmVyLnByZXNzZWRUcmFpbCApO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgZHJhZzogKCBldmVudCwgbGlzdGVuZXIgKSA9PiB7XHJcbiAgICAgICAgb3B0aW9ucy5kcmFnKCBldmVudCApO1xyXG5cclxuICAgICAgICAvLyBSZXVzZSB0aGUgc2FtZSBoYW5kbGVUcmFja0V2ZW50IGJ1dCBtYWtlIHN1cmUgdGhlIHN0YXJ0ZWRDYWxsYmFja3MgY2FsbCBpcyBtYWRlIGJlZm9yZSB0aGUgdmFsdWUgY2hhbmdlc1xyXG4gICAgICAgIGhhbmRsZVRyYWNrRXZlbnQoIGV2ZW50LCBsaXN0ZW5lci5wcmVzc2VkVHJhaWwgKTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGVuZDogZXZlbnQgPT4ge1xyXG4gICAgICAgIG9wdGlvbnMuZW5kRHJhZyggZXZlbnQgKTtcclxuICAgICAgICBvcHRpb25zLnZvaWNpbmdPbkVuZFJlc3BvbnNlKCB2YWx1ZU9uU3RhcnQgKTtcclxuICAgICAgfVxyXG4gICAgfSApO1xyXG4gICAgdHJhY2tOb2RlLmFkZElucHV0TGlzdGVuZXIoIHRoaXMuZHJhZ0xpc3RlbmVyICk7XHJcblxyXG4gICAgdGhpcy5tdXRhdGUoIG9wdGlvbnMgKTtcclxuXHJcbiAgICB0aGlzLmRpc3Bvc2VTbGlkZXJUcmFjayA9ICgpID0+IHtcclxuICAgICAgdHJhY2tOb2RlLnJlbW92ZUlucHV0TGlzdGVuZXIoIHRoaXMuZHJhZ0xpc3RlbmVyICk7XHJcbiAgICAgIHRoaXMuZHJhZ0xpc3RlbmVyLmRpc3Bvc2UoKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb3ZlcnJpZGUgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgIHRoaXMuZGlzcG9zZVNsaWRlclRyYWNrKCk7XHJcbiAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgfVxyXG59XHJcblxyXG5zdW4ucmVnaXN0ZXIoICdTbGlkZXJUcmFjaycsIFNsaWRlclRyYWNrICk7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBSUEsT0FBT0EsVUFBVSxNQUFNLDRCQUE0QjtBQUNuRCxPQUFPQyxjQUFjLE1BQU0sZ0NBQWdDO0FBQzNELE9BQU9DLEtBQUssTUFBTSx1QkFBdUI7QUFDekMsT0FBT0Msc0JBQXNCLE1BQXlDLDJEQUEyRDtBQUNqSSxPQUFPQyxTQUFTLE1BQU0saUNBQWlDO0FBQ3ZELFNBQVNDLFlBQVksRUFBRUMsSUFBSSxFQUFvQ0MsWUFBWSxRQUFRLDZCQUE2QjtBQUNoSCxPQUFPQyxNQUFNLE1BQU0sMkJBQTJCO0FBQzlDLE9BQU9DLEdBQUcsTUFBTSxVQUFVO0FBQzFCLE9BQU9DLE1BQU0sTUFBTSxhQUFhO0FBRWhDLE9BQU9DLFlBQVksTUFBTSwrQkFBK0I7QUFDeEQsT0FBT0MsZUFBZSxNQUFNLGtDQUFrQztBQTBDOUQsZUFBZSxNQUFNQyxXQUFXLFNBQVNOLFlBQVksQ0FBRUQsSUFBSyxDQUFDLENBQUM7RUFNNUQ7O0VBR0E7RUFDQTtFQUdBO0VBT09RLFdBQVdBLENBQUVDLGFBQWdDLEVBQUVDLFNBQWUsRUFBRUMsS0FBdUMsRUFBRUMsZUFBb0MsRUFBRztJQUNySixLQUFLLENBQUMsQ0FBQztJQUVQLElBQUksQ0FBQ0MsYUFBYSxHQUFHRixLQUFLLFlBQVlm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