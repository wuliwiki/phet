// Copyright 2015-2023, University of Colorado Boulder

/**
 * An iOS-style page control. See the 'Navigation' section of the iOS Human Interface Guidelines.
 * A page control indicates the number of pages and which one is currently visible.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import { Shape } from '../../kite/js/imports.js';
import optionize from '../../phet-core/js/optionize.js';
import { Circle, FlowBox, LayoutOrientationValues, Node, PressListener } from '../../scenery/js/imports.js';
import Tandem from '../../tandem/js/Tandem.js';
import sun from './sun.js';
import Vector2 from '../../dot/js/Vector2.js';
export default class PageControl extends Node {
  /**
   * @param pageNumberProperty - which page is currently visible
   * @param numberOfPagesProperty - number of pages
   * @param providedOptions
   */
  constructor(pageNumberProperty, numberOfPagesProperty, providedOptions) {
    const options = optionize()({
      // SelfOptions
      interactive: false,
      orientation: 'horizontal',
      dotRadius: 3,
      lineWidth: 1,
      dotSpacing: 10,
      dotTouchAreaDilation: 4,
      dotMouseAreaDilation: 4,
      currentPageFill: 'black',
      currentPageStroke: null,
      pageFill: 'rgb( 200, 200, 200 )',
      pageStroke: null,
      // NodeOptions
      tandem: Tandem.REQUIRED,
      tandemNameSuffix: 'PageControl',
      visiblePropertyOptions: {
        phetioFeatured: true
      }
    }, providedOptions);

    // validate options
    assert && assert(LayoutOrientationValues.includes(options.orientation), `invalid orientation=${options.orientation}`);

    // Clicking on a dot goes to that page
    const pressListener = new PressListener({
      press: event => {
        if (event.currentTarget instanceof DotNode) {
          pageNumberProperty.value = event.currentTarget.pageNumber;
        }
      },
      tandem: options.tandem.createTandem('pressListener')
    });
    const dotOptions = {
      lineWidth: options.lineWidth,
      mouseArea: options.dotMouseAreaDilation === 0 ? null : Shape.circle(0, 0, options.dotRadius + options.dotMouseAreaDilation),
      touchArea: options.dotTouchAreaDilation === 0 ? null : Shape.circle(0, 0, options.dotRadius + options.dotTouchAreaDilation),
      boundsMethod: 'unstroked',
      // For layout purposes, so we don't have to adjust spacings when things become stroked

      // optional interactivity
      cursor: options.interactive ? 'pointer' : null,
      inputListeners: options.interactive ? [pressListener] : []
    };
    const dotBox = new FlowBox({
      orientation: options.orientation,
      // horizontal pages ordered left-to-right, vertical pages ordered top-to-bottom
      spacing: options.dotSpacing
    });
    let dotNodes = [];

    // Keep it centered
    dotBox.boundsProperty.link(() => {
      dotBox.center = Vector2.ZERO;
    });

    // Dot fill/stroke
    const updateDotAppearance = pageNumber => {
      dotNodes.forEach(dotNode => {
        dotNode.fill = pageNumber === dotNode.pageNumber ? options.currentPageFill : options.pageFill;
        dotNode.stroke = pageNumber === dotNode.pageNumber ? options.currentPageStroke : options.pageStroke;
      });
    };
    pageNumberProperty.link(updateDotAppearance);

    // Recreate the dots when the number of pages changes
    const recreateDotNodes = numberOfPages => {
      assert && assert(numberOfPages >= 1);
      dotNodes = _.range(0, numberOfPages).map(pageNumber => new DotNode(pageNumber, options.dotRadius, dotOptions));
      dotBox.children = dotNodes;
      updateDotAppearance(pageNumberProperty.value); // since they are recreated, update their appearance
    };

    numberOfPagesProperty.link(recreateDotNodes);
    options.children = [dotBox];
    super(options);
    this.disposePageControl = () => {
      pressListener.dispose();
      numberOfPagesProperty.unlink(recreateDotNodes);
      pageNumberProperty.unlink(updateDotAppearance);
    };
  }
  dispose() {
    this.disposePageControl();
    super.dispose();
  }
}

/**
 * One of the dots in the page control, with an associated page number.
 */
class DotNode extends Circle {
  // the page number associated with this dot

  constructor(pageNumber, radius, options) {
    super(radius, options);
    this.pageNumber = pageNumber;
  }
}
sun.register('PageControl', PageControl);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTaGFwZSIsIm9wdGlvbml6ZSIsIkNpcmNsZSIsIkZsb3dCb3giLCJMYXlvdXRPcmllbnRhdGlvblZhbHVlcyIsIk5vZGUiLCJQcmVzc0xpc3RlbmVyIiwiVGFuZGVtIiwic3VuIiwiVmVjdG9yMiIsIlBhZ2VDb250cm9sIiwiY29uc3RydWN0b3IiLCJwYWdlTnVtYmVyUHJvcGVydHkiLCJudW1iZXJPZlBhZ2VzUHJvcGVydHkiLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwiaW50ZXJhY3RpdmUiLCJvcmllbnRhdGlvbiIsImRvdFJhZGl1cyIsImxpbmVXaWR0aCIsImRvdFNwYWNpbmciLCJkb3RUb3VjaEFyZWFEaWxhdGlvbiIsImRvdE1vdXNlQXJlYURpbGF0aW9uIiwiY3VycmVudFBhZ2VGaWxsIiwiY3VycmVudFBhZ2VTdHJva2UiLCJwYWdlRmlsbCIsInBhZ2VTdHJva2UiLCJ0YW5kZW0iLCJSRVFVSVJFRCIsInRhbmRlbU5hbWVTdWZmaXgiLCJ2aXNpYmxlUHJvcGVydHlPcHRpb25zIiwicGhldGlvRmVhdHVyZWQiLCJhc3NlcnQiLCJpbmNsdWRlcyIsInByZXNzTGlzdGVuZXIiLCJwcmVzcyIsImV2ZW50IiwiY3VycmVudFRhcmdldCIsIkRvdE5vZGUiLCJ2YWx1ZSIsInBhZ2VOdW1iZXIiLCJjcmVhdGVUYW5kZW0iLCJkb3RPcHRpb25zIiwibW91c2VBcmVhIiwiY2lyY2xlIiwidG91Y2hBcmVhIiwiYm91bmRzTWV0aG9kIiwiY3Vyc29yIiwiaW5wdXRMaXN0ZW5lcnMiLCJkb3RCb3giLCJzcGFjaW5nIiwiZG90Tm9kZXMiLCJib3VuZHNQcm9wZXJ0eSIsImxpbmsiLCJjZW50ZXIiLCJaRVJPIiwidXBkYXRlRG90QXBwZWFyYW5jZSIsImZvckVhY2giLCJkb3ROb2RlIiwiZmlsbCIsInN0cm9rZSIsInJlY3JlYXRlRG90Tm9kZXMiLCJudW1iZXJPZlBhZ2VzIiwiXyIsInJhbmdlIiwibWFwIiwiY2hpbGRyZW4iLCJkaXNwb3NlUGFnZUNvbnRyb2wiLCJkaXNwb3NlIiwidW5saW5rIiwicmFkaXVzIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJQYWdlQ29udHJvbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNS0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBBbiBpT1Mtc3R5bGUgcGFnZSBjb250cm9sLiBTZWUgdGhlICdOYXZpZ2F0aW9uJyBzZWN0aW9uIG9mIHRoZSBpT1MgSHVtYW4gSW50ZXJmYWNlIEd1aWRlbGluZXMuXHJcbiAqIEEgcGFnZSBjb250cm9sIGluZGljYXRlcyB0aGUgbnVtYmVyIG9mIHBhZ2VzIGFuZCB3aGljaCBvbmUgaXMgY3VycmVudGx5IHZpc2libGUuXHJcbiAqXHJcbiAqIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXHJcbiAqL1xyXG5cclxuaW1wb3J0IFRQcm9wZXJ0eSBmcm9tICcuLi8uLi9heG9uL2pzL1RQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBTdHJpY3RPbWl0IGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9TdHJpY3RPbWl0LmpzJztcclxuaW1wb3J0IHsgU2hhcGUgfSBmcm9tICcuLi8uLi9raXRlL2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgb3B0aW9uaXplIGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgeyBDaXJjbGUsIENpcmNsZU9wdGlvbnMsIEZsb3dCb3gsIExheW91dE9yaWVudGF0aW9uLCBMYXlvdXRPcmllbnRhdGlvblZhbHVlcywgTm9kZSwgTm9kZU9wdGlvbnMsIFByZXNzTGlzdGVuZXIsIFByZXNzTGlzdGVuZXJFdmVudCwgVFBhaW50IH0gZnJvbSAnLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IFRhbmRlbSBmcm9tICcuLi8uLi90YW5kZW0vanMvVGFuZGVtLmpzJztcclxuaW1wb3J0IHN1biBmcm9tICcuL3N1bi5qcyc7XHJcbmltcG9ydCBUUmVhZE9ubHlQcm9wZXJ0eSBmcm9tICcuLi8uLi9heG9uL2pzL1RSZWFkT25seVByb3BlcnR5LmpzJztcclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IHtcclxuICBpbnRlcmFjdGl2ZT86IGJvb2xlYW47IC8vIHdoZXRoZXIgdGhlIGNvbnRyb2wgaXMgaW50ZXJhY3RpdmVcclxuXHJcbiAgb3JpZW50YXRpb24/OiBMYXlvdXRPcmllbnRhdGlvbjtcclxuXHJcbiAgZG90UmFkaXVzPzogbnVtYmVyOyAvLyByYWRpdXMgb2YgdGhlIGRvdHNcclxuICBsaW5lV2lkdGg/OiBudW1iZXI7XHJcbiAgZG90U3BhY2luZz86IG51bWJlcjsgLy8gc3BhY2luZyBiZXR3ZWVuIGRvdHNcclxuICBkb3RUb3VjaEFyZWFEaWxhdGlvbj86IG51bWJlcjsgLy8gaG93IG11Y2ggdG8gZGlsYXRlIHRoZSB0b3VjaEFyZWEgYmV5b25kIHRoZSByYWRpdXMgb2YgYSBkb3RcclxuICBkb3RNb3VzZUFyZWFEaWxhdGlvbj86IG51bWJlcjsgLy8gaG93IG11Y2ggdG8gZGlsYXRlIHRoZSBtb3VzZUFyZWEgYmV5b25kIHRoZSByYWRpdXMgb2YgYSBkb3RcclxuXHJcbiAgLy8gZG90cyByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgcGFnZVxyXG4gIGN1cnJlbnRQYWdlRmlsbD86IFRQYWludDtcclxuICBjdXJyZW50UGFnZVN0cm9rZT86IFRQYWludDtcclxuXHJcbiAgLy8gZG90cyByZXByZXNlbnRpbmcgYWxsIHBhZ2VzIGV4Y2VwdCB0aGUgY3VycmVudCBwYWdlXHJcbiAgcGFnZUZpbGw/OiBUUGFpbnQ7XHJcbiAgcGFnZVN0cm9rZT86IFRQYWludDtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIFBhZ2VDb250cm9sT3B0aW9ucyA9IFNlbGZPcHRpb25zICYgU3RyaWN0T21pdDxOb2RlT3B0aW9ucywgJ2NoaWxkcmVuJz47XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYWdlQ29udHJvbCBleHRlbmRzIE5vZGUge1xyXG5cclxuICBwcml2YXRlIHJlYWRvbmx5IGRpc3Bvc2VQYWdlQ29udHJvbDogKCkgPT4gdm9pZDtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHBhZ2VOdW1iZXJQcm9wZXJ0eSAtIHdoaWNoIHBhZ2UgaXMgY3VycmVudGx5IHZpc2libGVcclxuICAgKiBAcGFyYW0gbnVtYmVyT2ZQYWdlc1Byb3BlcnR5IC0gbnVtYmVyIG9mIHBhZ2VzXHJcbiAgICogQHBhcmFtIHByb3ZpZGVkT3B0aW9uc1xyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggcGFnZU51bWJlclByb3BlcnR5OiBUUHJvcGVydHk8bnVtYmVyPiwgbnVtYmVyT2ZQYWdlc1Byb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxudW1iZXI+LCBwcm92aWRlZE9wdGlvbnM/OiBQYWdlQ29udHJvbE9wdGlvbnMgKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxQYWdlQ29udHJvbE9wdGlvbnMsIFNlbGZPcHRpb25zLCBOb2RlT3B0aW9ucz4oKSgge1xyXG5cclxuICAgICAgLy8gU2VsZk9wdGlvbnNcclxuICAgICAgaW50ZXJhY3RpdmU6IGZhbHNlLFxyXG4gICAgICBvcmllbnRhdGlvbjogJ2hvcml6b250YWwnLFxyXG4gICAgICBkb3RSYWRpdXM6IDMsXHJcbiAgICAgIGxpbmVXaWR0aDogMSxcclxuICAgICAgZG90U3BhY2luZzogMTAsXHJcbiAgICAgIGRvdFRvdWNoQXJlYURpbGF0aW9uOiA0LFxyXG4gICAgICBkb3RNb3VzZUFyZWFEaWxhdGlvbjogNCxcclxuICAgICAgY3VycmVudFBhZ2VGaWxsOiAnYmxhY2snLFxyXG4gICAgICBjdXJyZW50UGFnZVN0cm9rZTogbnVsbCxcclxuICAgICAgcGFnZUZpbGw6ICdyZ2IoIDIwMCwgMjAwLCAyMDAgKScsXHJcbiAgICAgIHBhZ2VTdHJva2U6IG51bGwsXHJcblxyXG4gICAgICAvLyBOb2RlT3B0aW9uc1xyXG4gICAgICB0YW5kZW06IFRhbmRlbS5SRVFVSVJFRCxcclxuICAgICAgdGFuZGVtTmFtZVN1ZmZpeDogJ1BhZ2VDb250cm9sJyxcclxuICAgICAgdmlzaWJsZVByb3BlcnR5T3B0aW9uczoge1xyXG4gICAgICAgIHBoZXRpb0ZlYXR1cmVkOiB0cnVlXHJcbiAgICAgIH1cclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIC8vIHZhbGlkYXRlIG9wdGlvbnNcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIExheW91dE9yaWVudGF0aW9uVmFsdWVzLmluY2x1ZGVzKCBvcHRpb25zLm9yaWVudGF0aW9uICksIGBpbnZhbGlkIG9yaWVudGF0aW9uPSR7b3B0aW9ucy5vcmllbnRhdGlvbn1gICk7XHJcblxyXG4gICAgLy8gQ2xpY2tpbmcgb24gYSBkb3QgZ29lcyB0byB0aGF0IHBhZ2VcclxuICAgIGNvbnN0IHByZXNzTGlzdGVuZXIgPSBuZXcgUHJlc3NMaXN0ZW5lcigge1xyXG4gICAgICBwcmVzczogKCBldmVudDogUHJlc3NMaXN0ZW5lckV2ZW50ICkgPT4ge1xyXG4gICAgICAgIGlmICggZXZlbnQuY3VycmVudFRhcmdldCBpbnN0YW5jZW9mIERvdE5vZGUgKSB7XHJcbiAgICAgICAgICBwYWdlTnVtYmVyUHJvcGVydHkudmFsdWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LnBhZ2VOdW1iZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3ByZXNzTGlzdGVuZXInIClcclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCBkb3RPcHRpb25zOiBDaXJjbGVPcHRpb25zID0ge1xyXG4gICAgICBsaW5lV2lkdGg6IG9wdGlvbnMubGluZVdpZHRoLFxyXG4gICAgICBtb3VzZUFyZWE6ICggb3B0aW9ucy5kb3RNb3VzZUFyZWFEaWxhdGlvbiA9PT0gMCApID8gbnVsbCA6IFNoYXBlLmNpcmNsZSggMCwgMCwgb3B0aW9ucy5kb3RSYWRpdXMgKyBvcHRpb25zLmRvdE1vdXNlQXJlYURpbGF0aW9uICksXHJcbiAgICAgIHRvdWNoQXJlYTogKCBvcHRpb25zLmRvdFRvdWNoQXJlYURpbGF0aW9uID09PSAwICkgPyBudWxsIDogU2hhcGUuY2lyY2xlKCAwLCAwLCBvcHRpb25zLmRvdFJhZGl1cyArIG9wdGlvbnMuZG90VG91Y2hBcmVhRGlsYXRpb24gKSxcclxuXHJcbiAgICAgIGJvdW5kc01ldGhvZDogJ3Vuc3Ryb2tlZCcsIC8vIEZvciBsYXlvdXQgcHVycG9zZXMsIHNvIHdlIGRvbid0IGhhdmUgdG8gYWRqdXN0IHNwYWNpbmdzIHdoZW4gdGhpbmdzIGJlY29tZSBzdHJva2VkXHJcblxyXG4gICAgICAvLyBvcHRpb25hbCBpbnRlcmFjdGl2aXR5XHJcbiAgICAgIGN1cnNvcjogb3B0aW9ucy5pbnRlcmFjdGl2ZSA/ICdwb2ludGVyJyA6IG51bGwsXHJcbiAgICAgIGlucHV0TGlzdGVuZXJzOiBvcHRpb25zLmludGVyYWN0aXZlID8gWyBwcmVzc0xpc3RlbmVyIF0gOiBbXVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBkb3RCb3ggPSBuZXcgRmxvd0JveCgge1xyXG4gICAgICBvcmllbnRhdGlvbjogb3B0aW9ucy5vcmllbnRhdGlvbiwgLy8gaG9yaXpvbnRhbCBwYWdlcyBvcmRlcmVkIGxlZnQtdG8tcmlnaHQsIHZlcnRpY2FsIHBhZ2VzIG9yZGVyZWQgdG9wLXRvLWJvdHRvbVxyXG4gICAgICBzcGFjaW5nOiBvcHRpb25zLmRvdFNwYWNpbmdcclxuICAgIH0gKTtcclxuICAgIGxldCBkb3ROb2RlczogRG90Tm9kZVtdID0gW107XHJcblxyXG4gICAgLy8gS2VlcCBpdCBjZW50ZXJlZFxyXG4gICAgZG90Qm94LmJvdW5kc1Byb3BlcnR5LmxpbmsoICgpID0+IHsgZG90Qm94LmNlbnRlciA9IFZlY3RvcjIuWkVSTzsgfSApO1xyXG5cclxuICAgIC8vIERvdCBmaWxsL3N0cm9rZVxyXG4gICAgY29uc3QgdXBkYXRlRG90QXBwZWFyYW5jZSA9ICggcGFnZU51bWJlcjogbnVtYmVyICkgPT4ge1xyXG4gICAgICBkb3ROb2Rlcy5mb3JFYWNoKCBkb3ROb2RlID0+IHtcclxuICAgICAgICBkb3ROb2RlLmZpbGwgPSAoIHBhZ2VOdW1iZXIgPT09IGRvdE5vZGUucGFnZU51bWJlciApID8gb3B0aW9ucy5jdXJyZW50UGFnZUZpbGwgOiBvcHRpb25zLnBhZ2VGaWxsO1xyXG4gICAgICAgIGRvdE5vZGUuc3Ryb2tlID0gKCBwYWdlTnVtYmVyID09PSBkb3ROb2RlLnBhZ2VOdW1iZXIgKSA/IG9wdGlvbnMuY3VycmVudFBhZ2VTdHJva2UgOiBvcHRpb25zLnBhZ2VTdHJva2U7XHJcbiAgICAgIH0gKTtcclxuICAgIH07XHJcbiAgICBwYWdlTnVtYmVyUHJvcGVydHkubGluayggdXBkYXRlRG90QXBwZWFyYW5jZSApO1xyXG5cclxuICAgIC8vIFJlY3JlYXRlIHRoZSBkb3RzIHdoZW4gdGhlIG51bWJlciBvZiBwYWdlcyBjaGFuZ2VzXHJcbiAgICBjb25zdCByZWNyZWF0ZURvdE5vZGVzID0gKCBudW1iZXJPZlBhZ2VzOiBudW1iZXIgKSA9PiB7XHJcbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoIG51bWJlck9mUGFnZXMgPj0gMSApO1xyXG5cclxuICAgICAgZG90Tm9kZXMgPSBfLnJhbmdlKCAwLCBudW1iZXJPZlBhZ2VzICkubWFwKCBwYWdlTnVtYmVyID0+IG5ldyBEb3ROb2RlKCBwYWdlTnVtYmVyLCBvcHRpb25zLmRvdFJhZGl1cywgZG90T3B0aW9ucyApICk7XHJcbiAgICAgIGRvdEJveC5jaGlsZHJlbiA9IGRvdE5vZGVzO1xyXG4gICAgICB1cGRhdGVEb3RBcHBlYXJhbmNlKCBwYWdlTnVtYmVyUHJvcGVydHkudmFsdWUgKTsgLy8gc2luY2UgdGhleSBhcmUgcmVjcmVhdGVkLCB1cGRhdGUgdGhlaXIgYXBwZWFyYW5jZVxyXG4gICAgfTtcclxuICAgIG51bWJlck9mUGFnZXNQcm9wZXJ0eS5saW5rKCByZWNyZWF0ZURvdE5vZGVzICk7XHJcblxyXG4gICAgb3B0aW9ucy5jaGlsZHJlbiA9IFsgZG90Qm94IF07XHJcblxyXG4gICAgc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcbiAgICB0aGlzLmRpc3Bvc2VQYWdlQ29udHJvbCA9ICgpID0+IHtcclxuICAgICAgcHJlc3NMaXN0ZW5lci5kaXNwb3NlKCk7XHJcbiAgICAgIG51bWJlck9mUGFnZXNQcm9wZXJ0eS51bmxpbmsoIHJlY3JlYXRlRG90Tm9kZXMgKTtcclxuICAgICAgcGFnZU51bWJlclByb3BlcnR5LnVubGluayggdXBkYXRlRG90QXBwZWFyYW5jZSApO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvdmVycmlkZSBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgdGhpcy5kaXNwb3NlUGFnZUNvbnRyb2woKTtcclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBPbmUgb2YgdGhlIGRvdHMgaW4gdGhlIHBhZ2UgY29udHJvbCwgd2l0aCBhbiBhc3NvY2lhdGVkIHBhZ2UgbnVtYmVyLlxyXG4gKi9cclxuY2xhc3MgRG90Tm9kZSBleHRlbmRzIENpcmNsZSB7XHJcblxyXG4gIC8vIHRoZSBwYWdlIG51bWJlciBhc3NvY2lhdGVkIHdpdGggdGhpcyBkb3RcclxuICBwdWJsaWMgcmVhZG9ubHkgcGFnZU51bWJlcjogbnVtYmVyO1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIHBhZ2VOdW1iZXI6IG51bWJlciwgcmFkaXVzOiBudW1iZXIsIG9wdGlvbnM6IENpcmNsZU9wdGlvbnMgKSB7XHJcbiAgICBzdXBlciggcmFkaXVzLCBvcHRpb25zICk7XHJcblxyXG4gICAgdGhpcy5wYWdlTnVtYmVyID0gcGFnZU51bWJlcjtcclxuICB9XHJcbn1cclxuXHJcbnN1bi5yZWdpc3RlciggJ1BhZ2VDb250cm9sJywgUGFnZUNv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