// Copyright 2013-2022, University of Colorado Boulder

/**
 * Light is the model of a simple light.
 * Origin is at the center of the lens.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import BooleanProperty from '../../../../axon/js/BooleanProperty.js';
import EnumerationProperty from '../../../../axon/js/EnumerationProperty.js';
import NumberProperty from '../../../../axon/js/NumberProperty.js';
import Range from '../../../../dot/js/Range.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import optionize from '../../../../phet-core/js/optionize.js';
import VisibleColor from '../../../../scenery-phet/js/VisibleColor.js';
import PhetioObject from '../../../../tandem/js/PhetioObject.js';
import beersLawLab from '../../beersLawLab.js';
import LightMode from './LightMode.js';
export default class Light extends PhetioObject {
  constructor(solutionProperty, providedOptions) {
    const options = optionize()({
      position: Vector2.ZERO,
      // cm
      lensDiameter: 0.45,
      // cm
      isOn: false,
      phetioState: false
    }, providedOptions);
    super(options);
    this.position = options.position;
    this.lensDiameter = options.lensDiameter;
    this.isOnProperty = new BooleanProperty(options.isOn, {
      tandem: options.tandem.createTandem('isOnProperty')
    });
    this.wavelengthProperty = new NumberProperty(solutionProperty.value.molarAbsorptivityData.lambdaMax /*nm*/, {
      units: 'nm',
      range: new Range(VisibleColor.MIN_WAVELENGTH, VisibleColor.MAX_WAVELENGTH),
      tandem: options.tandem.createTandem('wavelengthProperty'),
      phetioReadOnly: true
    });
    this.modeProperty = new EnumerationProperty(LightMode.PRESET, {
      tandem: options.tandem.createTandem('modeProperty')
    });

    // when the solution changes, set the light to the solution's lambdaMax wavelength
    solutionProperty.link(solution => {
      this.wavelengthProperty.value = solution.molarAbsorptivityData.lambdaMax;
    });
    this.modeProperty.link(mode => {
      // 'Preset' sets the light to the current solution's lambdaMax wavelength.
      if (mode === LightMode.PRESET) {
        this.wavelengthProperty.value = solutionProperty.value.molarAbsorptivityData.lambdaMax;
      }
    });
  }
  dispose() {
    assert && assert(false, 'dispose is not supported, exists for the lifetime of the sim');
    super.dispose();
  }
  reset() {
    this.isOnProperty.reset();
    this.wavelengthProperty.reset();
    this.modeProperty.reset();
  }
  getMinY() {
    return this.position.y - this.lensDiameter / 2;
  }
  getMaxY() {
    return this.position.y + this.lensDiameter / 2;
  }
}
beersLawLab.register('Light', Light);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb29sZWFuUHJvcGVydHkiLCJFbnVtZXJhdGlvblByb3BlcnR5IiwiTnVtYmVyUHJvcGVydHkiLCJSYW5nZSIsIlZlY3RvcjIiLCJvcHRpb25pemUiLCJWaXNpYmxlQ29sb3IiLCJQaGV0aW9PYmplY3QiLCJiZWVyc0xhd0xhYiIsIkxpZ2h0TW9kZSIsIkxpZ2h0IiwiY29uc3RydWN0b3IiLCJzb2x1dGlvblByb3BlcnR5IiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsInBvc2l0aW9uIiwiWkVSTyIsImxlbnNEaWFtZXRlciIsImlzT24iLCJwaGV0aW9TdGF0ZSIsImlzT25Qcm9wZXJ0eSIsInRhbmRlbSIsImNyZWF0ZVRhbmRlbSIsIndhdmVsZW5ndGhQcm9wZXJ0eSIsInZhbHVlIiwibW9sYXJBYnNvcnB0aXZpdHlEYXRhIiwibGFtYmRhTWF4IiwidW5pdHMiLCJyYW5nZSIsIk1JTl9XQVZFTEVOR1RIIiwiTUFYX1dBVkVMRU5HVEgiLCJwaGV0aW9SZWFkT25seSIsIm1vZGVQcm9wZXJ0eSIsIlBSRVNFVCIsImxpbmsiLCJzb2x1dGlvbiIsIm1vZGUiLCJkaXNwb3NlIiwiYXNzZXJ0IiwicmVzZXQiLCJnZXRNaW5ZIiwieSIsImdldE1heFkiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkxpZ2h0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIExpZ2h0IGlzIHRoZSBtb2RlbCBvZiBhIHNpbXBsZSBsaWdodC5cclxuICogT3JpZ2luIGlzIGF0IHRoZSBjZW50ZXIgb2YgdGhlIGxlbnMuXHJcbiAqXHJcbiAqIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXHJcbiAqL1xyXG5cclxuaW1wb3J0IEJvb2xlYW5Qcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL0Jvb2xlYW5Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBFbnVtZXJhdGlvblByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvRW51bWVyYXRpb25Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBOdW1iZXJQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL051bWJlclByb3BlcnR5LmpzJztcclxuaW1wb3J0IFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgUmFuZ2UgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1JhbmdlLmpzJztcclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgb3B0aW9uaXplIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgUGlja1JlcXVpcmVkIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9QaWNrUmVxdWlyZWQuanMnO1xyXG5pbXBvcnQgVmlzaWJsZUNvbG9yIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9WaXNpYmxlQ29sb3IuanMnO1xyXG5pbXBvcnQgUGhldGlvT2JqZWN0LCB7IFBoZXRpb09iamVjdE9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi90YW5kZW0vanMvUGhldGlvT2JqZWN0LmpzJztcclxuaW1wb3J0IGJlZXJzTGF3TGFiIGZyb20gJy4uLy4uL2JlZXJzTGF3TGFiLmpzJztcclxuaW1wb3J0IEJlZXJzTGF3U29sdXRpb24gZnJvbSAnLi9CZWVyc0xhd1NvbHV0aW9uLmpzJztcclxuaW1wb3J0IExpZ2h0TW9kZSBmcm9tICcuL0xpZ2h0TW9kZS5qcyc7XHJcblxyXG50eXBlIFNlbGZPcHRpb25zID0ge1xyXG4gIHBvc2l0aW9uPzogVmVjdG9yMjsgLy8gY21cclxuICBsZW5zRGlhbWV0ZXI/OiAwLjQ1OyAvLyBjbVxyXG4gIGlzT24/OiBmYWxzZTtcclxufTtcclxuXHJcbnR5cGUgTGlnaHRPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBQaWNrUmVxdWlyZWQ8UGhldGlvT2JqZWN0T3B0aW9ucywgJ3RhbmRlbSc+O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGlnaHQgZXh0ZW5kcyBQaGV0aW9PYmplY3Qge1xyXG5cclxuICBwdWJsaWMgcmVhZG9ubHkgcG9zaXRpb246IFZlY3RvcjI7XHJcbiAgcHVibGljIHJlYWRvbmx5IGxlbnNEaWFtZXRlcjogbnVtYmVyO1xyXG4gIHB1YmxpYyByZWFkb25seSBpc09uUHJvcGVydHk6IFByb3BlcnR5PGJvb2xlYW4+O1xyXG4gIHB1YmxpYyByZWFkb25seSB3YXZlbGVuZ3RoUHJvcGVydHk6IE51bWJlclByb3BlcnR5O1xyXG4gIHB1YmxpYyByZWFkb25seSBtb2RlUHJvcGVydHk6IEVudW1lcmF0aW9uUHJvcGVydHk8TGlnaHRNb2RlPjtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBzb2x1dGlvblByb3BlcnR5OiBQcm9wZXJ0eTxCZWVyc0xhd1NvbHV0aW9uPiwgcHJvdmlkZWRPcHRpb25zOiBMaWdodE9wdGlvbnMgKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxMaWdodE9wdGlvbnMsIFNlbGZPcHRpb25zLCBQaGV0aW9PYmplY3RPcHRpb25zPigpKCB7XHJcbiAgICAgIHBvc2l0aW9uOiBWZWN0b3IyLlpFUk8sIC8vIGNtXHJcbiAgICAgIGxlbnNEaWFtZXRlcjogMC40NSwgLy8gY21cclxuICAgICAgaXNPbjogZmFsc2UsXHJcbiAgICAgIHBoZXRpb1N0YXRlOiBmYWxzZVxyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcbiAgICB0aGlzLnBvc2l0aW9uID0gb3B0aW9ucy5wb3NpdGlvbjtcclxuICAgIHRoaXMubGVuc0RpYW1ldGVyID0gb3B0aW9ucy5sZW5zRGlhbWV0ZXI7XHJcblxyXG4gICAgdGhpcy5pc09uUHJvcGVydHkgPSBuZXcgQm9vbGVhblByb3BlcnR5KCBvcHRpb25zLmlzT24sIHtcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdpc09uUHJvcGVydHknIClcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLndhdmVsZW5ndGhQcm9wZXJ0eSA9IG5ldyBOdW1iZXJQcm9wZXJ0eSggc29sdXRpb25Qcm9wZXJ0eS52YWx1ZS5tb2xhckFic29ycHRpdml0eURhdGEubGFtYmRhTWF4IC8qbm0qLywge1xyXG4gICAgICB1bml0czogJ25tJyxcclxuICAgICAgcmFuZ2U6IG5ldyBSYW5nZSggVmlzaWJsZUNvbG9yLk1JTl9XQVZFTEVOR1RILCBWaXNpYmxlQ29sb3IuTUFYX1dBVkVMRU5HVEggKSxcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICd3YXZlbGVuZ3RoUHJvcGVydHknICksXHJcbiAgICAgIHBoZXRpb1JlYWRPbmx5OiB0cnVlXHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5tb2RlUHJvcGVydHkgPSBuZXcgRW51bWVyYXRpb25Qcm9wZXJ0eSggTGlnaHRNb2RlLlBSRVNFVCwge1xyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ21vZGVQcm9wZXJ0eScgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIHdoZW4gdGhlIHNvbHV0aW9uIGNoYW5nZXMsIHNldCB0aGUgbGlnaHQgdG8gdGhlIHNvbHV0aW9uJ3MgbGFtYmRhTWF4IHdhdmVsZW5ndGhcclxuICAgIHNvbHV0aW9uUHJvcGVydHkubGluayggc29sdXRpb24gPT4ge1xyXG4gICAgICB0aGlzLndhdmVsZW5ndGhQcm9wZXJ0eS52YWx1ZSA9IHNvbHV0aW9uLm1vbGFyQWJzb3JwdGl2aXR5RGF0YS5sYW1iZGFNYXg7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5tb2RlUHJvcGVydHkubGluayggbW9kZSA9PiB7XHJcblxyXG4gICAgICAvLyAnUHJlc2V0JyBzZXRzIHRoZSBsaWdodCB0byB0aGUgY3VycmVudCBzb2x1dGlvbidzIGxhbWJkYU1heCB3YXZlbGVuZ3RoLlxyXG4gICAgICBpZiAoIG1vZGUgPT09IExpZ2h0TW9kZS5QUkVTRVQgKSB7XHJcbiAgICAgICAgdGhpcy53YXZlbGVuZ3RoUHJvcGVydHkudmFsdWUgPSBzb2x1dGlvblByb3BlcnR5LnZhbHVlLm1vbGFyQWJzb3JwdGl2aXR5RGF0YS5sYW1iZGFNYXg7XHJcbiAgICAgIH1cclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvdmVycmlkZSBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggZmFsc2UsICdkaXNwb3NlIGlzIG5vdCBzdXBwb3J0ZWQsIGV4aXN0cyBmb3IgdGhlIGxpZmV0aW1lIG9mIHRoZSBzaW0nICk7XHJcbiAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLmlzT25Qcm9wZXJ0eS5yZXNldCgpO1xyXG4gICAgdGhpcy53YXZlbGVuZ3RoUHJvcGVydHkucmVzZXQoKTtcclxuICAgIHRoaXMubW9kZVByb3BlcnR5LnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0TWluWSgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMucG9zaXRpb24ueSAtICggdGhpcy5sZW5zRGlhbWV0ZXIgLyAyICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0TWF4WSgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMucG9zaXRpb24ueSArICggdGhpcy5sZW5zRGlhbWV0ZXIgLyAyICk7XHJcbiAgfVxyXG59XHJcblxyXG5iZWVyc0xhd0xhYi5yZWdpc3RlciggJ0xpZ2h0JywgTGlnaHQgKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxlQUFlLE1BQU0sd0NBQXdDO0FBQ3BFLE9BQU9DLG1CQUFtQixNQUFNLDRDQUE0QztBQUM1RSxPQUFPQyxjQUFjLE1BQU0sdUNBQXVDO0FBRWxFLE9BQU9DLEtBQUssTUFBTSw2QkFBNkI7QUFDL0MsT0FBT0MsT0FBTyxNQUFNLCtCQUErQjtBQUNuRCxPQUFPQyxTQUFTLE1BQU0sdUNBQXVDO0FBRTdELE9BQU9DLFlBQVksTUFBTSw2Q0FBNkM7QUFDdEUsT0FBT0MsWUFBWSxNQUErQix1Q0FBdUM7QUFDekYsT0FBT0MsV0FBVyxNQUFNLHNCQUFzQjtBQUU5QyxPQUFPQyxTQUFTLE1BQU0sZ0JBQWdCO0FBVXRDLGVBQWUsTUFBTUMsS0FBSyxTQUFTSCxZQUFZLENBQUM7RUFRdkNJLFdBQVdBLENBQUVDLGdCQUE0QyxFQUFFQyxlQUE2QixFQUFHO0lBRWhHLE1BQU1DLE9BQU8sR0FBR1QsU0FBUyxDQUFpRCxDQUFDLENBQUU7TUFDM0VVLFFBQVEsRUFBRVgsT0FBTyxDQUFDWSxJQUFJO01BQUU7TUFDeEJDLFlBQVksRUFBRSxJQUFJO01BQUU7TUFDcEJDLElBQUksRUFBRSxLQUFLO01BQ1hDLFdBQVcsRUFBRTtJQUNmLENBQUMsRUFBRU4sZUFBZ0IsQ0FBQztJQUVwQixLQUFLLENBQUVDLE9BQVEsQ0FBQztJQUVoQixJQUFJLENBQUNDLFFBQVEsR0FBR0QsT0FBTyxDQUFDQyxRQUFRO0lBQ2hDLElBQUksQ0FBQ0UsWUFBWSxHQUFHSCxPQUFPLENBQUNHLFlBQVk7SUFFeEMsSUFBSSxDQUFDRyxZQUFZLEdBQUcsSUFBSXBCLGVBQWUsQ0FBRWMsT0FBTyxDQUFDSSxJQUFJLEVBQUU7TUFDckRHLE1BQU0sRUFBRVAsT0FBTyxDQUFDTyxNQUFNLENBQUNDLFlBQVksQ0FBRSxjQUFlO0lBQ3RELENBQUUsQ0FBQztJQUVILElBQUksQ0FBQ0Msa0JBQWtCLEdBQUcsSUFBSXJCLGNBQWMsQ0FBRVUsZ0JBQWdCLENBQUNZLEtBQUssQ0FBQ0MscUJBQXFCLENBQUNDLFNBQVMsQ0FBQyxRQUFRO01BQzNHQyxLQUFLLEVBQUUsSUFBSTtNQUNYQyxLQUFLLEVBQUUsSUFBSXpCLEtBQUssQ0FBRUcsWUFBWSxDQUFDdUIsY0FBYyxFQUFFdkIsWUFBWSxDQUFDd0IsY0FBZSxDQUFDO01BQzVFVCxNQUFNLEVBQUVQLE9BQU8sQ0FBQ08sTUFBTSxDQUFDQyxZQUFZLENBQUUsb0JBQXFCLENBQUM7TUFDM0RTLGNBQWMsRUFBRTtJQUNsQixDQUFFLENBQUM7SUFFSCxJQUFJLENBQUNDLFlBQVksR0FBRyxJQUFJL0IsbUJBQW1CLENBQUVRLFNBQVMsQ0FBQ3dCLE1BQU0sRUFBRTtNQUM3RFosTUFBTSxFQUFFUCxPQUFPLENBQUNPLE1BQU0sQ0FBQ0MsWUFBWSxDQUFFLGNBQWU7SUFDdEQsQ0FBRSxDQUFDOztJQUVIO0lBQ0FWLGdCQUFnQixDQUFDc0IsSUFBSSxDQUFFQyxRQUFRLElBQUk7TUFDakMsSUFBSSxDQUFDWixrQkFBa0IsQ0FBQ0MsS0FBSyxHQUFHVyxRQUFRLENBQUNWLHFCQUFxQixDQUFDQyxTQUFTO0lBQzFFLENBQUUsQ0FBQztJQUVILElBQUksQ0FBQ00sWUFBWSxDQUFDRSxJQUFJLENBQUVFLElBQUksSUFBSTtNQUU5QjtNQUNBLElBQUtBLElBQUksS0FBSzNCLFNBQVMsQ0FBQ3dCLE1BQU0sRUFBRztRQUMvQixJQUFJLENBQUNWLGtCQUFrQixDQUFDQyxLQUFLLEdBQUdaLGdCQUFnQixDQUFDWSxLQUFLLENBQUNDLHFCQUFxQixDQUFDQyxTQUFTO01BQ3hGO0lBQ0YsQ0FBRSxDQUFDO0VBQ0w7RUFFZ0JXLE9BQU9BLENBQUEsRUFBUztJQUM5QkMsTUFBTSxJQUFJQSxNQUFNLENBQUUsS0FBSyxFQUFFLDhEQUErRCxDQUFDO0lBQ3pGLEtBQUssQ0FBQ0QsT0FBTyxDQUFDLENBQUM7RUFDakI7RUFFT0UsS0FBS0EsQ0FBQSxFQUFTO0lBQ25CLElBQUksQ0FBQ25CLFlBQVksQ0FBQ21CLEtBQUssQ0FBQyxDQUFDO0lBQ3pCLElBQUksQ0FBQ2hCLGtCQUFrQixDQUFDZ0IsS0FBSyxDQUFDLENBQUM7SUFDL0IsSUFBSSxDQUFDUCxZQUFZLENBQUNPLEtBQUssQ0FBQyxDQUFDO0VBQzNCO0VBRU9DLE9BQU9BLENBQUEsRUFBVztJQUN2QixPQUFPLElBQUksQ0FBQ3pCLFFBQVEsQ0FBQzBCLENBQUMsR0FBSyxJQUFJLENBQUN4QixZQUFZLEdBQUcsQ0FBRztFQUNwRDtFQUVPeUIsT0FBT0EsQ0FBQSxFQUFXO0lBQ3ZCLE9BQU8sSUFBSSxDQUFDM0IsUUFBUSxDQUFDMEIsQ0FBQyxHQUFLLElBQUksQ0FBQ3hCLFlBQVksR0FBRyxDQUFHO0VBQ3BEO0FBQ0Y7QUFFQVQsV0FBVyxDQUFDbUMsUUFBUSxDQUFFLE9BQU8sRUFBRWpDLEtBQU0sQ0FBQyJ9