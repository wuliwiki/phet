// Copyright 2013-2022, University of Colorado Boulder

/**
 * Visual representation of the ruler.
 * This is a wrapper around the common-code ruler node.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import Property from '../../../../axon/js/Property.js';
import { Shape } from '../../../../kite/js/imports.js';
import optionize from '../../../../phet-core/js/optionize.js';
import RulerNode from '../../../../scenery-phet/js/RulerNode.js';
import { DragListener } from '../../../../scenery/js/imports.js';
import beersLawLab from '../../beersLawLab.js';
import BeersLawLabStrings from '../../BeersLawLabStrings.js';
// constants
const MAJOR_TICK_WIDTH = 0.5; // in model coordinate frame

export default class BLLRulerNode extends RulerNode {
  constructor(ruler, modelViewTransform, providedOptions) {
    const options = optionize()({
      //  RulerNodeOptions
      cursor: 'pointer',
      minorTicksPerMajorTick: 4,
      insetsWidth: 0,
      phetioInputEnabledPropertyInstrumented: true
    }, providedOptions);

    // Compute tick labels, 1 major tick for every 0.5 unit of length, labels on the ticks that correspond to integer values.
    const majorTickLabels = [];
    const numberOfTicks = Math.floor(ruler.length / MAJOR_TICK_WIDTH) + 1;
    for (let i = 0; i < numberOfTicks; i++) {
      majorTickLabels[i] = i % 2 === 0 ? `${i / 2}` : '';
    }
    const width = modelViewTransform.modelToViewDeltaX(ruler.length);
    const height = modelViewTransform.modelToViewDeltaY(ruler.height);
    const majorTickWidth = modelViewTransform.modelToViewDeltaX(MAJOR_TICK_WIDTH);
    super(width, height, majorTickWidth, majorTickLabels, BeersLawLabStrings.units.centimetersStringProperty, options);

    // touch area
    const dx = 0.05 * this.width;
    const dy = 0.5 * this.height;
    this.touchArea = Shape.rectangle(-dx, -dy, this.width + dx + dx, this.height + dy + dy);

    // sync with model
    ruler.positionProperty.link(position => {
      const viewPosition = modelViewTransform.modelToViewPosition(position);
      this.x = viewPosition.x;
      this.y = viewPosition.y;
    });
    this.addInputListener(new DragListener({
      positionProperty: ruler.positionProperty,
      dragBoundsProperty: new Property(ruler.dragBounds),
      transform: modelViewTransform,
      tandem: options.tandem.createTandem('dragListener')
    }));
    this.addLinkedElement(ruler, {
      tandem: options.tandem.createTandem('ruler')
    });
  }
  dispose() {
    assert && assert(false, 'dispose is not supported, exists for the lifetime of the sim');
    super.dispose();
  }
}
beersLawLab.register('BLLRulerNode', BLLRulerNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQcm9wZXJ0eSIsIlNoYXBlIiwib3B0aW9uaXplIiwiUnVsZXJOb2RlIiwiRHJhZ0xpc3RlbmVyIiwiYmVlcnNMYXdMYWIiLCJCZWVyc0xhd0xhYlN0cmluZ3MiLCJNQUpPUl9USUNLX1dJRFRIIiwiQkxMUnVsZXJOb2RlIiwiY29uc3RydWN0b3IiLCJydWxlciIsIm1vZGVsVmlld1RyYW5zZm9ybSIsInByb3ZpZGVkT3B0aW9ucyIsIm9wdGlvbnMiLCJjdXJzb3IiLCJtaW5vclRpY2tzUGVyTWFqb3JUaWNrIiwiaW5zZXRzV2lkdGgiLCJwaGV0aW9JbnB1dEVuYWJsZWRQcm9wZXJ0eUluc3RydW1lbnRlZCIsIm1ham9yVGlja0xhYmVscyIsIm51bWJlck9mVGlja3MiLCJNYXRoIiwiZmxvb3IiLCJsZW5ndGgiLCJpIiwid2lkdGgiLCJtb2RlbFRvVmlld0RlbHRhWCIsImhlaWdodCIsIm1vZGVsVG9WaWV3RGVsdGFZIiwibWFqb3JUaWNrV2lkdGgiLCJ1bml0cyIsImNlbnRpbWV0ZXJzU3RyaW5nUHJvcGVydHkiLCJkeCIsImR5IiwidG91Y2hBcmVhIiwicmVjdGFuZ2xlIiwicG9zaXRpb25Qcm9wZXJ0eSIsImxpbmsiLCJwb3NpdGlvbiIsInZpZXdQb3NpdGlvbiIsIm1vZGVsVG9WaWV3UG9zaXRpb24iLCJ4IiwieSIsImFkZElucHV0TGlzdGVuZXIiLCJkcmFnQm91bmRzUHJvcGVydHkiLCJkcmFnQm91bmRzIiwidHJhbnNmb3JtIiwidGFuZGVtIiwiY3JlYXRlVGFuZGVtIiwiYWRkTGlua2VkRWxlbWVudCIsImRpc3Bvc2UiLCJhc3NlcnQiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkJMTFJ1bGVyTm9kZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxMy0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBWaXN1YWwgcmVwcmVzZW50YXRpb24gb2YgdGhlIHJ1bGVyLlxyXG4gKiBUaGlzIGlzIGEgd3JhcHBlciBhcm91bmQgdGhlIGNvbW1vbi1jb2RlIHJ1bGVyIG5vZGUuXHJcbiAqXHJcbiAqIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXHJcbiAqL1xyXG5cclxuaW1wb3J0IFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gJy4uLy4uLy4uLy4uL2tpdGUvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBvcHRpb25pemUsIHsgRW1wdHlTZWxmT3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgUGlja1JlcXVpcmVkIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9QaWNrUmVxdWlyZWQuanMnO1xyXG5pbXBvcnQgTW9kZWxWaWV3VHJhbnNmb3JtMiBmcm9tICcuLi8uLi8uLi8uLi9waGV0Y29tbW9uL2pzL3ZpZXcvTW9kZWxWaWV3VHJhbnNmb3JtMi5qcyc7XHJcbmltcG9ydCBSdWxlck5vZGUsIHsgUnVsZXJOb2RlT3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9SdWxlck5vZGUuanMnO1xyXG5pbXBvcnQgeyBEcmFnTGlzdGVuZXIgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgYmVlcnNMYXdMYWIgZnJvbSAnLi4vLi4vYmVlcnNMYXdMYWIuanMnO1xyXG5pbXBvcnQgQmVlcnNMYXdMYWJTdHJpbmdzIGZyb20gJy4uLy4uL0JlZXJzTGF3TGFiU3RyaW5ncy5qcyc7XHJcbmltcG9ydCBSdWxlciBmcm9tICcuLi9tb2RlbC9SdWxlci5qcyc7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgTUFKT1JfVElDS19XSURUSCA9IDAuNTsgLy8gaW4gbW9kZWwgY29vcmRpbmF0ZSBmcmFtZVxyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IEVtcHR5U2VsZk9wdGlvbnM7XHJcblxyXG50eXBlIEJMTFJ1bGVyTm9kZU9wdGlvbnMgPSBTZWxmT3B0aW9ucyAmIFBpY2tSZXF1aXJlZDxSdWxlck5vZGVPcHRpb25zLCAndGFuZGVtJz47XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCTExSdWxlck5vZGUgZXh0ZW5kcyBSdWxlck5vZGUge1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIHJ1bGVyOiBSdWxlciwgbW9kZWxWaWV3VHJhbnNmb3JtOiBNb2RlbFZpZXdUcmFuc2Zvcm0yLCBwcm92aWRlZE9wdGlvbnM6IEJMTFJ1bGVyTm9kZU9wdGlvbnMgKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxCTExSdWxlck5vZGVPcHRpb25zLCBTZWxmT3B0aW9ucywgUnVsZXJOb2RlT3B0aW9ucz4oKSgge1xyXG5cclxuICAgICAgLy8gIFJ1bGVyTm9kZU9wdGlvbnNcclxuICAgICAgY3Vyc29yOiAncG9pbnRlcicsXHJcbiAgICAgIG1pbm9yVGlja3NQZXJNYWpvclRpY2s6IDQsXHJcbiAgICAgIGluc2V0c1dpZHRoOiAwLFxyXG4gICAgICBwaGV0aW9JbnB1dEVuYWJsZWRQcm9wZXJ0eUluc3RydW1lbnRlZDogdHJ1ZVxyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgLy8gQ29tcHV0ZSB0aWNrIGxhYmVscywgMSBtYWpvciB0aWNrIGZvciBldmVyeSAwLjUgdW5pdCBvZiBsZW5ndGgsIGxhYmVscyBvbiB0aGUgdGlja3MgdGhhdCBjb3JyZXNwb25kIHRvIGludGVnZXIgdmFsdWVzLlxyXG4gICAgY29uc3QgbWFqb3JUaWNrTGFiZWxzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgY29uc3QgbnVtYmVyT2ZUaWNrcyA9IE1hdGguZmxvb3IoIHJ1bGVyLmxlbmd0aCAvIE1BSk9SX1RJQ0tfV0lEVEggKSArIDE7XHJcbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBudW1iZXJPZlRpY2tzOyBpKysgKSB7XHJcbiAgICAgIG1ham9yVGlja0xhYmVsc1sgaSBdID0gKCBpICUgMiA9PT0gMCApID8gYCR7aSAvIDJ9YCA6ICcnO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHdpZHRoID0gbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3RGVsdGFYKCBydWxlci5sZW5ndGggKTtcclxuICAgIGNvbnN0IGhlaWdodCA9IG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld0RlbHRhWSggcnVsZXIuaGVpZ2h0ICk7XHJcbiAgICBjb25zdCBtYWpvclRpY2tXaWR0aCA9IG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld0RlbHRhWCggTUFKT1JfVElDS19XSURUSCApO1xyXG5cclxuICAgIHN1cGVyKCB3aWR0aCwgaGVpZ2h0LCBtYWpvclRpY2tXaWR0aCwgbWFqb3JUaWNrTGFiZWxzLCBCZWVyc0xhd0xhYlN0cmluZ3MudW5pdHMuY2VudGltZXRlcnNTdHJpbmdQcm9wZXJ0eSwgb3B0aW9ucyApO1xyXG5cclxuICAgIC8vIHRvdWNoIGFyZWFcclxuICAgIGNvbnN0IGR4ID0gMC4wNSAqIHRoaXMud2lkdGg7XHJcbiAgICBjb25zdCBkeSA9IDAuNSAqIHRoaXMuaGVpZ2h0O1xyXG4gICAgdGhpcy50b3VjaEFyZWEgPSBTaGFwZS5yZWN0YW5nbGUoIC1keCwgLWR5LCB0aGlzLndpZHRoICsgZHggKyBkeCwgdGhpcy5oZWlnaHQgKyBkeSArIGR5ICk7XHJcblxyXG4gICAgLy8gc3luYyB3aXRoIG1vZGVsXHJcbiAgICBydWxlci5wb3NpdGlvblByb3BlcnR5LmxpbmsoIHBvc2l0aW9uID0+IHtcclxuICAgICAgY29uc3Qgdmlld1Bvc2l0aW9uID0gbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3UG9zaXRpb24oIHBvc2l0aW9uICk7XHJcbiAgICAgIHRoaXMueCA9IHZpZXdQb3NpdGlvbi54O1xyXG4gICAgICB0aGlzLnkgPSB2aWV3UG9zaXRpb24ueTtcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLmFkZElucHV0TGlzdGVuZXIoIG5ldyBEcmFnTGlzdGVuZXIoIHtcclxuICAgICAgcG9zaXRpb25Qcm9wZXJ0eTogcnVsZXIucG9zaXRpb25Qcm9wZXJ0eSxcclxuICAgICAgZHJhZ0JvdW5kc1Byb3BlcnR5OiBuZXcgUHJvcGVydHkoIHJ1bGVyLmRyYWdCb3VuZHMgKSxcclxuICAgICAgdHJhbnNmb3JtOiBtb2RlbFZpZXdUcmFuc2Zvcm0sXHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnZHJhZ0xpc3RlbmVyJyApXHJcbiAgICB9ICkgKTtcclxuXHJcbiAgICB0aGlzLmFkZExpbmtlZEVsZW1lbnQoIHJ1bGVyLCB7XHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAncnVsZXInIClcclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvdmVycmlkZSBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggZmFsc2UsICdkaXNwb3NlIGlzIG5vdCBzdXBwb3J0ZWQsIGV4aXN0cyBmb3IgdGhlIGxpZmV0aW1lIG9mIHRoZSBzaW0nICk7XHJcbiAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgfVxyXG59XHJcblxyXG5iZWVyc0xhd0xhYi5yZWdpc3RlciggJ0JMTFJ1bGVyTm9kZScsIEJMTFJ1bGVyTm9kZSApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFFBQVEsTUFBTSxpQ0FBaUM7QUFDdEQsU0FBU0MsS0FBSyxRQUFRLGdDQUFnQztBQUN0RCxPQUFPQyxTQUFTLE1BQTRCLHVDQUF1QztBQUduRixPQUFPQyxTQUFTLE1BQTRCLDBDQUEwQztBQUN0RixTQUFTQyxZQUFZLFFBQVEsbUNBQW1DO0FBQ2hFLE9BQU9DLFdBQVcsTUFBTSxzQkFBc0I7QUFDOUMsT0FBT0Msa0JBQWtCLE1BQU0sNkJB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