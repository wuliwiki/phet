// Copyright 2013-2023, University of Colorado Boulder

/**
 * Detector for absorbance (A) and percent transmittance (%T).
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import Property from '../../../../axon/js/Property.js';
import Bounds2 from '../../../../dot/js/Bounds2.js';
import Dimension2 from '../../../../dot/js/Dimension2.js';
import Utils from '../../../../dot/js/Utils.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import { Shape } from '../../../../kite/js/imports.js';
import optionize from '../../../../phet-core/js/optionize.js';
import StringUtils from '../../../../phetcommon/js/util/StringUtils.js';
import MathSymbols from '../../../../scenery-phet/js/MathSymbols.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import ProbeNode from '../../../../scenery-phet/js/ProbeNode.js';
import ShadedRectangle from '../../../../scenery-phet/js/ShadedRectangle.js';
import { DragListener, Node, Path, Text, VBox } from '../../../../scenery/js/imports.js';
import AquaRadioButtonGroup from '../../../../sun/js/AquaRadioButtonGroup.js';
import StringIO from '../../../../tandem/js/types/StringIO.js';
import beersLawLab from '../../beersLawLab.js';
import BeersLawLabStrings from '../../BeersLawLabStrings.js';
import BLLConstants from '../../common/BLLConstants.js';
import ATDetectorMode from '../model/ATDetectorMode.js';
// constants
const ABSORBANCE_DECIMAL_PLACES = 2;
const TRANSMITTANCE_DECIMAL_PLACES = 2;
const NO_VALUE = MathSymbols.NO_VALUE;
const BODY_X_MARGIN = 15;
const BODY_Y_MARGIN = 15;
const VALUE_X_MARGIN = 6;
const VALUE_Y_MARGIN = 4;
const PROBE_COLOR = 'rgb( 8, 133, 54 )';
const MIN_VALUE_SIZE = new Dimension2(150, 36);
const MIN_BODY_SIZE = new Dimension2(185, 140);
export default class ATDetectorNode extends Node {
  constructor(detector, light, modelViewTransform, providedOptions) {
    super(providedOptions);
    const bodyNode = new BodyNode(detector, modelViewTransform, {
      tandem: providedOptions.tandem.createTandem('bodyNode')
    });
    const probeNode = new ATProbeNode(detector.probe, light, modelViewTransform, {
      tandem: providedOptions.tandem.createTandem('probeNode')
    });
    const wireNode = new WireNode(detector.body, detector.probe, bodyNode, probeNode);
    this.children = [wireNode, bodyNode, probeNode];
    this.addLinkedElement(detector, {
      tandem: providedOptions.tandem.createTandem('detector')
    });
  }
  dispose() {
    assert && assert(false, 'dispose is not supported, exists for the lifetime of the sim');
    super.dispose();
  }
}

/**
 * The body of the detector, where A and T values are displayed. Note that while the body is a BLLMovable,
 * we have currently decided not to allow it to be moved, so it has no drag handler
 */

class BodyNode extends Node {
  constructor(detector, modelViewTransform, providedOptions) {
    const options = optionize()({
      // NodeOptions
      phetioVisiblePropertyInstrumented: false
    }, providedOptions);
    super(options);
    function createRadioButtonLabel(text, radioButtonTandem) {
      return new Text(text, {
        font: new PhetFont(18),
        fill: 'white',
        maxWidth: 120,
        tandem: radioButtonTandem.createTandem('labelText'),
        phetioVisiblePropertyInstrumented: false
      });
    }

    // radio button descriptions
    const radioButtonItems = [{
      value: ATDetectorMode.TRANSMITTANCE,
      createNode: tandem => createRadioButtonLabel(BeersLawLabStrings.transmittanceStringProperty, tandem),
      tandemName: 'transmittanceRadioButton'
    }, {
      value: ATDetectorMode.ABSORBANCE,
      createNode: tandem => createRadioButtonLabel(BeersLawLabStrings.absorbanceStringProperty, tandem),
      tandemName: 'absorbanceRadioButton'
    }];

    // radio button group
    const radioButtonGroup = new AquaRadioButtonGroup(detector.modeProperty, radioButtonItems, {
      radioButtonOptions: {
        radius: BLLConstants.RADIO_BUTTON_RADIUS
      },
      orientation: 'vertical',
      align: 'left',
      spacing: 15,
      tandem: options.tandem.createTandem('radioButtonGroup')
    });
    const valueTextTandem = options.tandem.createTandem('valueText');

    // value + units
    const valueStringProperty = new DerivedProperty([BeersLawLabStrings.pattern['0percentStringProperty'], detector.modeProperty, detector.absorbanceProperty, detector.transmittanceProperty], (pattern, mode, absorbance, transmittance) => {
      let valueString;
      if (mode === ATDetectorMode.TRANSMITTANCE) {
        valueString = transmittance === null ? NO_VALUE : StringUtils.format(pattern, Utils.toFixed(100 * transmittance, TRANSMITTANCE_DECIMAL_PLACES));
      } else {
        valueString = absorbance === null ? NO_VALUE : Utils.toFixed(absorbance, ABSORBANCE_DECIMAL_PLACES);
      }
      return valueString;
    }, {
      tandem: valueTextTandem.createTandem(Text.STRING_PROPERTY_TANDEM_NAME),
      phetioValueType: StringIO
    });
    const valueText = new Text(valueStringProperty, {
      font: new PhetFont(22),
      maxWidth: 125,
      tandem: valueTextTandem
    });

    // background behind the value
    const backgroundWidth = Math.max(MIN_VALUE_SIZE.width, Math.max(radioButtonGroup.width, valueText.width) + 2 * VALUE_X_MARGIN);
    const backgroundHeight = Math.max(MIN_VALUE_SIZE.height, valueText.height + 2 * VALUE_Y_MARGIN);
    const backgroundNode = new ShadedRectangle(new Bounds2(0, 0, backgroundWidth, backgroundHeight), {
      baseColor: 'white',
      lightSource: 'rightBottom'
    });

    // vertical arrangement of stuff in the meter
    const vBox = new VBox({
      children: [new Node({
        children: [backgroundNode, valueText]
      }), radioButtonGroup],
      align: 'left',
      spacing: 12
    });

    // meter body
    const bodyWidth = Math.max(MIN_BODY_SIZE.width, vBox.width + 2 * BODY_X_MARGIN);
    const bodyHeight = Math.max(MIN_BODY_SIZE.height, vBox.height + 2 * BODY_Y_MARGIN);
    const bodyNode = new ShadedRectangle(new Bounds2(0, 0, bodyWidth, bodyHeight), {
      baseColor: PROBE_COLOR,
      lightOffset: 0.95
    });
    vBox.boundsProperty.link(bounds => {
      vBox.center = bodyNode.center;
    });
    this.children = [bodyNode, vBox];

    // body position
    detector.body.positionProperty.link(position => {
      this.translation = modelViewTransform.modelToViewPosition(position);
    });
    valueText.boundsProperty.link(bounds => {
      if (valueStringProperty.value === NO_VALUE) {
        // centered
        valueText.centerX = backgroundNode.centerX;
      } else {
        // right justified
        valueText.right = backgroundNode.right - VALUE_X_MARGIN;
      }
      valueText.centerY = backgroundNode.centerY;
    });
  }
}

/**
 *  The probe portion of the detector
 */

class ATProbeNode extends ProbeNode {
  constructor(probe, light, modelViewTransform, providedOptions) {
    const options = optionize()({
      cursor: 'pointer',
      radius: 53,
      innerRadius: 40,
      handleWidth: 68,
      handleHeight: 60,
      handleCornerRadius: 22,
      lightAngle: 1.25 * Math.PI,
      color: PROBE_COLOR,
      phetioInputEnabledPropertyInstrumented: true,
      phetioVisiblePropertyInstrumented: false
    }, providedOptions);
    super(options);

    // position
    probe.positionProperty.link(position => {
      this.translation = modelViewTransform.modelToViewPosition(position);
    });
    this.addInputListener(new DragListener({
      positionProperty: probe.positionProperty,
      dragBoundsProperty: new Property(probe.dragBounds),
      transform: modelViewTransform,
      end: () => {
        // If the light is on and the probe is close enough to the beam, snap the probe to the center of beam.
        if (light.isOnProperty.value && probe.positionProperty.value.x >= light.position.x && Math.abs(probe.positionProperty.value.y - light.position.y) <= 0.5 * light.lensDiameter) {
          probe.positionProperty.value = new Vector2(probe.positionProperty.value.x, light.position.y);
        }
      },
      tandem: options.tandem.createTandem('dragListener')
    }));

    // touch area
    this.touchArea = this.localBounds.dilatedXY(0.25 * this.width, 0);
  }
}

/**
 * Wire that connects the body and probe
 */
class WireNode extends Path {
  constructor(body, probe, bodyNode, probeNode) {
    super(new Shape(), {
      // PathOptions
      stroke: 'gray',
      lineWidth: 8,
      lineCap: 'square',
      lineJoin: 'round',
      pickable: false
    });
    const updateCurve = () => {
      // connection points
      const bodyConnectionPoint = new Vector2(bodyNode.centerX, bodyNode.bottom);
      const probeConnectionPoint = new Vector2(probeNode.centerX, probeNode.bottom);

      // control points
      // The y coordinate of the body's control point varies with the x distance between the body and probe.
      const c1Offset = new Vector2(0, Utils.linear(0, 800, 0, 200, bodyNode.centerX - probeNode.left)); // x distance -> y coordinate
      const c2Offset = new Vector2(50, 150);
      const c1 = new Vector2(bodyConnectionPoint.x + c1Offset.x, bodyConnectionPoint.y + c1Offset.y);
      const c2 = new Vector2(probeConnectionPoint.x + c2Offset.x, probeConnectionPoint.y + c2Offset.y);

      // cubic curve
      this.shape = new Shape().moveTo(bodyConnectionPoint.x, bodyConnectionPoint.y).cubicCurveTo(c1.x, c1.y, c2.x, c2.y, probeConnectionPoint.x, probeConnectionPoint.y);
    };
    body.positionProperty.link(updateCurve);
    probe.positionProperty.link(updateCurve);
  }
}
beersLawLab.register('ATDetectorNode', ATDetectorNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJQcm9wZXJ0eSIsIkJvdW5kczIiLCJEaW1lbnNpb24yIiwiVXRpbHMiLCJWZWN0b3IyIiwiU2hhcGUiLCJvcHRpb25pemUiLCJTdHJpbmdVdGlscyIsIk1hdGhTeW1ib2xzIiwiUGhldEZvbnQiLCJQcm9iZU5vZGUiLCJTaGFkZWRSZWN0YW5nbGUiLCJEcmFnTGlzdGVuZXIiLCJOb2RlIiwiUGF0aCIsIlRleHQiLCJWQm94IiwiQXF1YVJhZGlvQnV0dG9uR3JvdXAiLCJTdHJpbmdJTyIsImJlZXJzTGF3TGFiIiwiQmVlcnNMYXdMYWJTdHJpbmdzIiwiQkxMQ29uc3RhbnRzIiwiQVREZXRlY3Rvck1vZGUiLCJBQlNPUkJBTkNFX0RFQ0lNQUxfUExBQ0VTIiwiVFJBTlNNSVRUQU5DRV9ERUNJTUFMX1BMQUNFUyIsIk5PX1ZBTFVFIiwiQk9EWV9YX01BUkdJTiIsIkJPRFlfWV9NQVJHSU4iLCJWQUxVRV9YX01BUkdJTiIsIlZBTFVFX1lfTUFSR0lOIiwiUFJPQkVfQ09MT1IiLCJNSU5fVkFMVUVfU0laRSIsIk1JTl9CT0RZX1NJWkUiLCJBVERldGVjdG9yTm9kZSIsImNvbnN0cnVjdG9yIiwiZGV0ZWN0b3IiLCJsaWdodCIsIm1vZGVsVmlld1RyYW5zZm9ybSIsInByb3ZpZGVkT3B0aW9ucyIsImJvZHlOb2RlIiwiQm9keU5vZGUiLCJ0YW5kZW0iLCJjcmVhdGVUYW5kZW0iLCJwcm9iZU5vZGUiLCJBVFByb2JlTm9kZSIsInByb2JlIiwid2lyZU5vZGUiLCJXaXJlTm9kZSIsImJvZHkiLCJjaGlsZHJlbiIsImFkZExpbmtlZEVsZW1lbnQiLCJkaXNwb3NlIiwiYXNzZXJ0Iiwib3B0aW9ucyIsInBoZXRpb1Zpc2libGVQcm9wZXJ0eUluc3RydW1lbnRlZCIsImNyZWF0ZVJhZGlvQnV0dG9uTGFiZWwiLCJ0ZXh0IiwicmFkaW9CdXR0b25UYW5kZW0iLCJmb250IiwiZmlsbCIsIm1heFdpZHRoIiwicmFkaW9CdXR0b25JdGVtcyIsInZhbHVlIiwiVFJBTlNNSVRUQU5DRSIsImNyZWF0ZU5vZGUiLCJ0cmFuc21pdHRhbmNlU3RyaW5nUHJvcGVydHkiLCJ0YW5kZW1OYW1lIiwiQUJTT1JCQU5DRSIsImFic29yYmFuY2VTdHJpbmdQcm9wZXJ0eSIsInJhZGlvQnV0dG9uR3JvdXAiLCJtb2RlUHJvcGVydHkiLCJyYWRpb0J1dHRvbk9wdGlvbnMiLCJyYWRpdXMiLCJSQURJT19CVVRUT05fUkFESVVTIiwib3JpZW50YXRpb24iLCJhbGlnbiIsInNwYWNpbmciLCJ2YWx1ZVRleHRUYW5kZW0iLCJ2YWx1ZVN0cmluZ1Byb3BlcnR5IiwicGF0dGVybiIsImFic29yYmFuY2VQcm9wZXJ0eSIsInRyYW5zbWl0dGFuY2VQcm9wZXJ0eSIsIm1vZGUiLCJhYnNvcmJhbmNlIiwidHJhbnNtaXR0YW5jZSIsInZhbHVlU3RyaW5nIiwiZm9ybWF0IiwidG9GaXhlZCIsIlNUUklOR19QUk9QRVJUWV9UQU5ERU1fTkFNRSIsInBoZXRpb1ZhbHVlVHlwZSIsInZhbHVlVGV4dCIsImJhY2tncm91bmRXaWR0aCIsIk1hdGgiLCJtYXgiLCJ3aWR0aCIsImJhY2tncm91bmRIZWlnaHQiLCJoZWlnaHQiLCJiYWNrZ3JvdW5kTm9kZSIsImJhc2VDb2xvciIsImxpZ2h0U291cmNlIiwidkJveCIsImJvZHlXaWR0aCIsImJvZHlIZWlnaHQiLCJsaWdodE9mZnNldCIsImJvdW5kc1Byb3BlcnR5IiwibGluayIsImJvdW5kcyIsImNlbnRlciIsInBvc2l0aW9uUHJvcGVydHkiLCJwb3NpdGlvbiIsInRyYW5zbGF0aW9uIiwibW9kZWxUb1ZpZXdQb3NpdGlvbiIsImNlbnRlclgiLCJyaWdodCIsImNlbnRlclkiLCJjdXJzb3IiLCJpbm5lclJhZGl1cyIsImhhbmRsZVdpZHRoIiwiaGFuZGxlSGVpZ2h0IiwiaGFuZGxlQ29ybmVyUmFkaXVzIiwibGlnaHRBbmdsZSIsIlBJIiwiY29sb3IiLCJwaGV0aW9JbnB1dEVuYWJsZWRQcm9wZXJ0eUluc3RydW1lbnRlZCIsImFkZElucHV0TGlzdGVuZXIiLCJkcmFnQm91bmRzUHJvcGVydHkiLCJkcmFnQm91bmRzIiwidHJhbnNmb3JtIiwiZW5kIiwiaXNPblByb3BlcnR5IiwieCIsImFicyIsInkiLCJsZW5zRGlhbWV0ZXIiLCJ0b3VjaEFyZWEiLCJsb2NhbEJvdW5kcyIsImRpbGF0ZWRYWSIsInN0cm9rZSIsImxpbmVXaWR0aCIsImxpbmVDYXAiLCJsaW5lSm9pbiIsInBpY2thYmxlIiwidXBkYXRlQ3VydmUiLCJib2R5Q29ubmVjdGlvblBvaW50IiwiYm90dG9tIiwicHJvYmVDb25uZWN0aW9uUG9pbnQiLCJjMU9mZnNldCIsImxpbmVhciIsImxlZnQiLCJjMk9mZnNldCIsImMxIiwiYzIiLCJzaGFwZSIsIm1vdmVUbyIsImN1YmljQ3VydmVUbyIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiQVREZXRlY3Rvck5vZGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTMtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogRGV0ZWN0b3IgZm9yIGFic29yYmFuY2UgKEEpIGFuZCBwZXJjZW50IHRyYW5zbWl0dGFuY2UgKCVUKS5cclxuICpcclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICovXHJcblxyXG5pbXBvcnQgRGVyaXZlZFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvRGVyaXZlZFByb3BlcnR5LmpzJztcclxuaW1wb3J0IFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgVFJlYWRPbmx5UHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9UUmVhZE9ubHlQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBCb3VuZHMyIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9Cb3VuZHMyLmpzJztcclxuaW1wb3J0IERpbWVuc2lvbjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL0RpbWVuc2lvbjIuanMnO1xyXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1V0aWxzLmpzJztcclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gJy4uLy4uLy4uLy4uL2tpdGUvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBvcHRpb25pemUsIHsgRW1wdHlTZWxmT3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgUGlja1JlcXVpcmVkIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9QaWNrUmVxdWlyZWQuanMnO1xyXG5pbXBvcnQgU3RyaW5nVXRpbHMgZnJvbSAnLi4vLi4vLi4vLi4vcGhldGNvbW1vbi9qcy91dGlsL1N0cmluZ1V0aWxzLmpzJztcclxuaW1wb3J0IE1vZGVsVmlld1RyYW5zZm9ybTIgZnJvbSAnLi4vLi4vLi4vLi4vcGhldGNvbW1vbi9qcy92aWV3L01vZGVsVmlld1RyYW5zZm9ybTIuanMnO1xyXG5pbXBvcnQgTWF0aFN5bWJvbHMgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL01hdGhTeW1ib2xzLmpzJztcclxuaW1wb3J0IFBoZXRGb250IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9QaGV0Rm9udC5qcyc7XHJcbmltcG9ydCBQcm9iZU5vZGUsIHsgUHJvYmVOb2RlT3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9Qcm9iZU5vZGUuanMnO1xyXG5pbXBvcnQgU2hhZGVkUmVjdGFuZ2xlIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9TaGFkZWRSZWN0YW5nbGUuanMnO1xyXG5pbXBvcnQgeyBEcmFnTGlzdGVuZXIsIE5vZGUsIE5vZGVPcHRpb25zLCBQYXRoLCBUZXh0LCBWQm94IH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IEFxdWFSYWRpb0J1dHRvbkdyb3VwLCB7IEFxdWFSYWRpb0J1dHRvbkdyb3VwSXRlbSB9IGZyb20gJy4uLy4uLy4uLy4uL3N1bi9qcy9BcXVhUmFkaW9CdXR0b25Hcm91cC5qcyc7XHJcbmltcG9ydCBUYW5kZW0gZnJvbSAnLi4vLi4vLi4vLi4vdGFuZGVtL2pzL1RhbmRlbS5qcyc7XHJcbmltcG9ydCBTdHJpbmdJTyBmcm9tICcuLi8uLi8uLi8uLi90YW5kZW0vanMvdHlwZXMvU3RyaW5nSU8uanMnO1xyXG5pbXBvcnQgYmVlcnNMYXdMYWIgZnJvbSAnLi4vLi4vYmVlcnNMYXdMYWIuanMnO1xyXG5pbXBvcnQgQmVlcnNMYXdMYWJTdHJpbmdzIGZyb20gJy4uLy4uL0JlZXJzTGF3TGFiU3RyaW5ncy5qcyc7XHJcbmltcG9ydCBCTExDb25zdGFudHMgZnJvbSAnLi4vLi4vY29tbW9uL0JMTENvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBCTExNb3ZhYmxlIGZyb20gJy4uLy4uL2NvbW1vbi9tb2RlbC9CTExNb3ZhYmxlLmpzJztcclxuaW1wb3J0IEFURGV0ZWN0b3IgZnJvbSAnLi4vbW9kZWwvQVREZXRlY3Rvci5qcyc7XHJcbmltcG9ydCBBVERldGVjdG9yTW9kZSBmcm9tICcuLi9tb2RlbC9BVERldGVjdG9yTW9kZS5qcyc7XHJcbmltcG9ydCBMaWdodCBmcm9tICcuLi9tb2RlbC9MaWdodC5qcyc7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgQUJTT1JCQU5DRV9ERUNJTUFMX1BMQUNFUyA9IDI7XHJcbmNvbnN0IFRSQU5TTUlUVEFOQ0VfREVDSU1BTF9QTEFDRVMgPSAyO1xyXG5jb25zdCBOT19WQUxVRSA9IE1hdGhTeW1ib2xzLk5PX1ZBTFVFO1xyXG5jb25zdCBCT0RZX1hfTUFSR0lOID0gMTU7XHJcbmNvbnN0IEJPRFlfWV9NQVJHSU4gPSAxNTtcclxuY29uc3QgVkFMVUVfWF9NQVJHSU4gPSA2O1xyXG5jb25zdCBWQUxVRV9ZX01BUkdJTiA9IDQ7XHJcbmNvbnN0IFBST0JFX0NPTE9SID0gJ3JnYiggOCwgMTMzLCA1NCApJztcclxuY29uc3QgTUlOX1ZBTFVFX1NJWkUgPSBuZXcgRGltZW5zaW9uMiggMTUwLCAzNiApO1xyXG5jb25zdCBNSU5fQk9EWV9TSVpFID0gbmV3IERpbWVuc2lvbjIoIDE4NSwgMTQwICk7XHJcblxyXG50eXBlIFNlbGZPcHRpb25zID0gRW1wdHlTZWxmT3B0aW9ucztcclxuXHJcbnR5cGUgQVREZXRlY3Rvck5vZGVPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBQaWNrUmVxdWlyZWQ8Tm9kZU9wdGlvbnMsICd0YW5kZW0nPjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFURGV0ZWN0b3JOb2RlIGV4dGVuZHMgTm9kZSB7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggZGV0ZWN0b3I6IEFURGV0ZWN0b3IsIGxpZ2h0OiBMaWdodCwgbW9kZWxWaWV3VHJhbnNmb3JtOiBNb2RlbFZpZXdUcmFuc2Zvcm0yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZWRPcHRpb25zOiBBVERldGVjdG9yTm9kZU9wdGlvbnMgKSB7XHJcblxyXG4gICAgc3VwZXIoIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIGNvbnN0IGJvZHlOb2RlID0gbmV3IEJvZHlOb2RlKCBkZXRlY3RvciwgbW9kZWxWaWV3VHJhbnNmb3JtLCB7XHJcbiAgICAgIHRhbmRlbTogcHJvdmlkZWRPcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdib2R5Tm9kZScgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IHByb2JlTm9kZSA9IG5ldyBBVFByb2JlTm9kZSggZGV0ZWN0b3IucHJvYmUsIGxpZ2h0LCBtb2RlbFZpZXdUcmFuc2Zvcm0sIHtcclxuICAgICAgdGFuZGVtOiBwcm92aWRlZE9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3Byb2JlTm9kZScgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IHdpcmVOb2RlID0gbmV3IFdpcmVOb2RlKCBkZXRlY3Rvci5ib2R5LCBkZXRlY3Rvci5wcm9iZSwgYm9keU5vZGUsIHByb2JlTm9kZSApO1xyXG5cclxuICAgIHRoaXMuY2hpbGRyZW4gPSBbIHdpcmVOb2RlLCBib2R5Tm9kZSwgcHJvYmVOb2RlIF07XHJcblxyXG4gICAgdGhpcy5hZGRMaW5rZWRFbGVtZW50KCBkZXRlY3Rvciwge1xyXG4gICAgICB0YW5kZW06IHByb3ZpZGVkT3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnZGV0ZWN0b3InIClcclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvdmVycmlkZSBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggZmFsc2UsICdkaXNwb3NlIGlzIG5vdCBzdXBwb3J0ZWQsIGV4aXN0cyBmb3IgdGhlIGxpZmV0aW1lIG9mIHRoZSBzaW0nICk7XHJcbiAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogVGhlIGJvZHkgb2YgdGhlIGRldGVjdG9yLCB3aGVyZSBBIGFuZCBUIHZhbHVlcyBhcmUgZGlzcGxheWVkLiBOb3RlIHRoYXQgd2hpbGUgdGhlIGJvZHkgaXMgYSBCTExNb3ZhYmxlLFxyXG4gKiB3ZSBoYXZlIGN1cnJlbnRseSBkZWNpZGVkIG5vdCB0byBhbGxvdyBpdCB0byBiZSBtb3ZlZCwgc28gaXQgaGFzIG5vIGRyYWcgaGFuZGxlclxyXG4gKi9cclxudHlwZSBCb2R5Tm9kZVNlbGZPcHRpb25zID0gRW1wdHlTZWxmT3B0aW9ucztcclxudHlwZSBCb2R5Tm9kZU9wdGlvbnMgPSBCb2R5Tm9kZVNlbGZPcHRpb25zICYgUGlja1JlcXVpcmVkPE5vZGVPcHRpb25zLCAndGFuZGVtJz47XHJcblxyXG5jbGFzcyBCb2R5Tm9kZSBleHRlbmRzIE5vZGUge1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoIGRldGVjdG9yOiBBVERldGVjdG9yLCBtb2RlbFZpZXdUcmFuc2Zvcm06IE1vZGVsVmlld1RyYW5zZm9ybTIsIHByb3ZpZGVkT3B0aW9uczogQm9keU5vZGVPcHRpb25zICkge1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8Qm9keU5vZGVPcHRpb25zLCBCb2R5Tm9kZVNlbGZPcHRpb25zLCBOb2RlT3B0aW9ucz4oKSgge1xyXG5cclxuICAgICAgLy8gTm9kZU9wdGlvbnNcclxuICAgICAgcGhldGlvVmlzaWJsZVByb3BlcnR5SW5zdHJ1bWVudGVkOiBmYWxzZVxyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVSYWRpb0J1dHRvbkxhYmVsKCB0ZXh0OiBUUmVhZE9ubHlQcm9wZXJ0eTxzdHJpbmc+LCByYWRpb0J1dHRvblRhbmRlbTogVGFuZGVtICk6IE5vZGUge1xyXG4gICAgICByZXR1cm4gbmV3IFRleHQoIHRleHQsIHtcclxuICAgICAgICBmb250OiBuZXcgUGhldEZvbnQoIDE4ICksXHJcbiAgICAgICAgZmlsbDogJ3doaXRlJyxcclxuICAgICAgICBtYXhXaWR0aDogMTIwLFxyXG4gICAgICAgIHRhbmRlbTogcmFkaW9CdXR0b25UYW5kZW0uY3JlYXRlVGFuZGVtKCAnbGFiZWxUZXh0JyApLFxyXG4gICAgICAgIHBoZXRpb1Zpc2libGVQcm9wZXJ0eUluc3RydW1lbnRlZDogZmFsc2VcclxuICAgICAgfSApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHJhZGlvIGJ1dHRvbiBkZXNjcmlwdGlvbnNcclxuICAgIGNvbnN0IHJhZGlvQnV0dG9uSXRlbXM6IEFxdWFSYWRpb0J1dHRvbkdyb3VwSXRlbTxBVERldGVjdG9yTW9kZT5bXSA9IFtcclxuICAgICAge1xyXG4gICAgICAgIHZhbHVlOiBBVERldGVjdG9yTW9kZS5UUkFOU01JVFRBTkNFLFxyXG4gICAgICAgIGNyZWF0ZU5vZGU6IHRhbmRlbSA9PiBjcmVhdGVSYWRpb0J1dHRvbkxhYmVsKCBCZWVyc0xhd0xhYlN0cmluZ3MudHJhbnNtaXR0YW5jZVN0cmluZ1Byb3BlcnR5LCB0YW5kZW0gKSxcclxuICAgICAgICB0YW5kZW1OYW1lOiAndHJhbnNtaXR0YW5jZVJhZGlvQnV0dG9uJ1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWU6IEFURGV0ZWN0b3JNb2RlLkFCU09SQkFOQ0UsXHJcbiAgICAgICAgY3JlYXRlTm9kZTogdGFuZGVtID0+IGNyZWF0ZVJhZGlvQnV0dG9uTGFiZWwoIEJlZXJzTGF3TGFiU3RyaW5ncy5hYnNvcmJhbmNlU3RyaW5nUHJvcGVydHksIHRhbmRlbSApLFxyXG4gICAgICAgIHRhbmRlbU5hbWU6ICdhYnNvcmJhbmNlUmFkaW9CdXR0b24nXHJcbiAgICAgIH1cclxuICAgIF07XHJcblxyXG4gICAgLy8gcmFkaW8gYnV0dG9uIGdyb3VwXHJcbiAgICBjb25zdCByYWRpb0J1dHRvbkdyb3VwID0gbmV3IEFxdWFSYWRpb0J1dHRvbkdyb3VwKCBkZXRlY3Rvci5tb2RlUHJvcGVydHksIHJhZGlvQnV0dG9uSXRlbXMsIHtcclxuICAgICAgcmFkaW9CdXR0b25PcHRpb25zOiB7XHJcbiAgICAgICAgcmFkaXVzOiBCTExDb25zdGFudHMuUkFESU9fQlVUVE9OX1JBRElVU1xyXG4gICAgICB9LFxyXG4gICAgICBvcmllbnRhdGlvbjogJ3ZlcnRpY2FsJyxcclxuICAgICAgYWxpZ246ICdsZWZ0JyxcclxuICAgICAgc3BhY2luZzogMTUsXHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAncmFkaW9CdXR0b25Hcm91cCcgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IHZhbHVlVGV4dFRhbmRlbSA9IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3ZhbHVlVGV4dCcgKTtcclxuXHJcbiAgICAvLyB2YWx1ZSArIHVuaXRzXHJcbiAgICBjb25zdCB2YWx1ZVN0cmluZ1Byb3BlcnR5ID0gbmV3IERlcml2ZWRQcm9wZXJ0eShcclxuICAgICAgW1xyXG4gICAgICAgIEJlZXJzTGF3TGFiU3RyaW5ncy5wYXR0ZXJuWyAnMHBlcmNlbnRTdHJpbmdQcm9wZXJ0eScgXSxcclxuICAgICAgICBkZXRlY3Rvci5tb2RlUHJvcGVydHksXHJcbiAgICAgICAgZGV0ZWN0b3IuYWJzb3JiYW5jZVByb3BlcnR5LFxyXG4gICAgICAgIGRldGVjdG9yLnRyYW5zbWl0dGFuY2VQcm9wZXJ0eVxyXG4gICAgICBdLFxyXG4gICAgICAoIHBhdHRlcm4sIG1vZGUsIGFic29yYmFuY2UsIHRyYW5zbWl0dGFuY2UgKSA9PiB7XHJcbiAgICAgICAgbGV0IHZhbHVlU3RyaW5nOiBzdHJpbmc7XHJcbiAgICAgICAgaWYgKCBtb2RlID09PSBBVERldGVjdG9yTW9kZS5UUkFOU01JVFRBTkNFICkge1xyXG4gICAgICAgICAgdmFsdWVTdHJpbmcgPSAoIHRyYW5zbWl0dGFuY2UgPT09IG51bGwgKSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE5PX1ZBTFVFIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nVXRpbHMuZm9ybWF0KCBwYXR0ZXJuLCBVdGlscy50b0ZpeGVkKCAxMDAgKiB0cmFuc21pdHRhbmNlLCBUUkFOU01JVFRBTkNFX0RFQ0lNQUxfUExBQ0VTICkgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICB2YWx1ZVN0cmluZyA9ICggYWJzb3JiYW5jZSA9PT0gbnVsbCApID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgTk9fVkFMVUUgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBVdGlscy50b0ZpeGVkKCBhYnNvcmJhbmNlLCBBQlNPUkJBTkNFX0RFQ0lNQUxfUExBQ0VTICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB2YWx1ZVN0cmluZztcclxuICAgICAgfSwge1xyXG4gICAgICAgIHRhbmRlbTogdmFsdWVUZXh0VGFuZGVtLmNyZWF0ZVRhbmRlbSggVGV4dC5TVFJJTkdfUFJPUEVSVFlfVEFOREVNX05BTUUgKSxcclxuICAgICAgICBwaGV0aW9WYWx1ZVR5cGU6IFN0cmluZ0lPXHJcbiAgICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCB2YWx1ZVRleHQgPSBuZXcgVGV4dCggdmFsdWVTdHJpbmdQcm9wZXJ0eSwge1xyXG4gICAgICBmb250OiBuZXcgUGhldEZvbnQoIDIyICksXHJcbiAgICAgIG1heFdpZHRoOiAxMjUsXHJcbiAgICAgIHRhbmRlbTogdmFsdWVUZXh0VGFuZGVtXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gYmFja2dyb3VuZCBiZWhpbmQgdGhlIHZhbHVlXHJcbiAgICBjb25zdCBiYWNrZ3JvdW5kV2lkdGggPSBNYXRoLm1heCggTUlOX1ZBTFVFX1NJWkUud2lkdGgsIE1hdGgubWF4KCByYWRpb0J1dHRvbkdyb3VwLndpZHRoLCB2YWx1ZVRleHQud2lkdGggKSArICggMiAqIFZBTFVFX1hfTUFSR0lOICkgKTtcclxuICAgIGNvbnN0IGJhY2tncm91bmRIZWlnaHQgPSBNYXRoLm1heCggTUlOX1ZBTFVFX1NJWkUuaGVpZ2h0LCB2YWx1ZVRleHQuaGVpZ2h0ICsgKCAyICogVkFMVUVfWV9NQVJHSU4gKSApO1xyXG4gICAgY29uc3QgYmFja2dyb3VuZE5vZGUgPSBuZXcgU2hhZGVkUmVjdGFuZ2xlKCBuZXcgQm91bmRzMiggMCwgMCwgYmFja2dyb3VuZFdpZHRoLCBiYWNrZ3JvdW5kSGVpZ2h0ICksIHtcclxuICAgICAgYmFzZUNvbG9yOiAnd2hpdGUnLFxyXG4gICAgICBsaWdodFNvdXJjZTogJ3JpZ2h0Qm90dG9tJ1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIHZlcnRpY2FsIGFycmFuZ2VtZW50IG9mIHN0dWZmIGluIHRoZSBtZXRlclxyXG4gICAgY29uc3QgdkJveCA9IG5ldyBWQm94KCB7XHJcbiAgICAgIGNoaWxkcmVuOiBbIG5ldyBOb2RlKCB7IGNoaWxkcmVuOiBbIGJhY2tncm91bmROb2RlLCB2YWx1ZVRleHQgXSB9ICksIHJhZGlvQnV0dG9uR3JvdXAgXSxcclxuICAgICAgYWxpZ246ICdsZWZ0JyxcclxuICAgICAgc3BhY2luZzogMTJcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBtZXRlciBib2R5XHJcbiAgICBjb25zdCBib2R5V2lkdGggPSBNYXRoLm1heCggTUlOX0JPRFlfU0laRS53aWR0aCwgdkJveC53aWR0aCArICggMiAqIEJPRFlfWF9NQVJHSU4gKSApO1xyXG4gICAgY29uc3QgYm9keUhlaWdodCA9IE1hdGgubWF4KCBNSU5fQk9EWV9TSVpFLmhlaWdodCwgdkJveC5oZWlnaHQgKyAoIDIgKiBCT0RZX1lfTUFSR0lOICkgKTtcclxuICAgIGNvbnN0IGJvZHlOb2RlID0gbmV3IFNoYWRlZFJlY3RhbmdsZSggbmV3IEJvdW5kczIoIDAsIDAsIGJvZHlXaWR0aCwgYm9keUhlaWdodCApLCB7XHJcbiAgICAgIGJhc2VDb2xvcjogUFJPQkVfQ09MT1IsXHJcbiAgICAgIGxpZ2h0T2Zmc2V0OiAwLjk1XHJcbiAgICB9ICk7XHJcblxyXG4gICAgdkJveC5ib3VuZHNQcm9wZXJ0eS5saW5rKCBib3VuZHMgPT4ge1xyXG4gICAgICB2Qm94LmNlbnRlciA9IGJvZHlOb2RlLmNlbnRlcjtcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLmNoaWxkcmVuID0gWyBib2R5Tm9kZSwgdkJveCBdO1xyXG5cclxuICAgIC8vIGJvZHkgcG9zaXRpb25cclxuICAgIGRldGVjdG9yLmJvZHkucG9zaXRpb25Qcm9wZXJ0eS5saW5rKCAoIHBvc2l0aW9uOiBWZWN0b3IyICkgPT4ge1xyXG4gICAgICB0aGlzLnRyYW5zbGF0aW9uID0gbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3UG9zaXRpb24oIHBvc2l0aW9uICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgdmFsdWVUZXh0LmJvdW5kc1Byb3BlcnR5LmxpbmsoIGJvdW5kcyA9PiB7XHJcbiAgICAgIGlmICggdmFsdWVTdHJpbmdQcm9wZXJ0eS52YWx1ZSA9PT0gTk9fVkFMVUUgKSB7XHJcbiAgICAgICAgLy8gY2VudGVyZWRcclxuICAgICAgICB2YWx1ZVRleHQuY2VudGVyWCA9IGJhY2tncm91bmROb2RlLmNlbnRlclg7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgLy8gcmlnaHQganVzdGlmaWVkXHJcbiAgICAgICAgdmFsdWVUZXh0LnJpZ2h0ID0gYmFja2dyb3VuZE5vZGUucmlnaHQgLSBWQUxVRV9YX01BUkdJTjtcclxuICAgICAgfVxyXG4gICAgICB2YWx1ZVRleHQuY2VudGVyWSA9IGJhY2tncm91bmROb2RlLmNlbnRlclk7XHJcbiAgICB9ICk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogIFRoZSBwcm9iZSBwb3J0aW9uIG9mIHRoZSBkZXRlY3RvclxyXG4gKi9cclxudHlwZSBBVFByb2JlTm9kZVNlbGZPcHRpb25zID0gRW1wdHlTZWxmT3B0aW9ucztcclxudHlwZSBBVFByb2JlTm9kZU9wdGlvbnMgPSBBVFByb2JlTm9kZVNlbGZPcHRpb25zICYgUGlja1JlcXVpcmVkPFByb2JlTm9kZU9wdGlvbnMsICd0YW5kZW0nPjtcclxuXHJcbmNsYXNzIEFUUHJvYmVOb2RlIGV4dGVuZHMgUHJvYmVOb2RlIHtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBwcm9iZTogQkxMTW92YWJsZSwgbGlnaHQ6IExpZ2h0LCBtb2RlbFZpZXdUcmFuc2Zvcm06IE1vZGVsVmlld1RyYW5zZm9ybTIsIHByb3ZpZGVkT3B0aW9uczogQVRQcm9iZU5vZGVPcHRpb25zICkge1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8QVRQcm9iZU5vZGVPcHRpb25zLCBBVFByb2JlTm9kZVNlbGZPcHRpb25zLCBQcm9iZU5vZGVPcHRpb25zPigpKCB7XHJcbiAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxyXG4gICAgICByYWRpdXM6IDUzLFxyXG4gICAgICBpbm5lclJhZGl1czogNDAsXHJcbiAgICAgIGhhbmRsZVdpZHRoOiA2OCxcclxuICAgICAgaGFuZGxlSGVpZ2h0OiA2MCxcclxuICAgICAgaGFuZGxlQ29ybmVyUmFkaXVzOiAyMixcclxuICAgICAgbGlnaHRBbmdsZTogMS4yNSAqIE1hdGguUEksXHJcbiAgICAgIGNvbG9yOiBQUk9CRV9DT0xPUixcclxuICAgICAgcGhldGlvSW5wdXRFbmFibGVkUHJvcGVydHlJbnN0cnVtZW50ZWQ6IHRydWUsXHJcbiAgICAgIHBoZXRpb1Zpc2libGVQcm9wZXJ0eUluc3RydW1lbnRlZDogZmFsc2VcclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIHN1cGVyKCBvcHRpb25zICk7XHJcblxyXG4gICAgLy8gcG9zaXRpb25cclxuICAgIHByb2JlLnBvc2l0aW9uUHJvcGVydHkubGluayggcG9zaXRpb24gPT4ge1xyXG4gICAgICB0aGlzLnRyYW5zbGF0aW9uID0gbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3UG9zaXRpb24oIHBvc2l0aW9uICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5hZGRJbnB1dExpc3RlbmVyKCBuZXcgRHJhZ0xpc3RlbmVyKCB7XHJcbiAgICAgIHBvc2l0aW9uUHJvcGVydHk6IHByb2JlLnBvc2l0aW9uUHJvcGVydHksXHJcbiAgICAgIGRyYWdCb3VuZHNQcm9wZXJ0eTogbmV3IFByb3BlcnR5KCBwcm9iZS5kcmFnQm91bmRzICksXHJcbiAgICAgIHRyYW5zZm9ybTogbW9kZWxWaWV3VHJhbnNmb3JtLFxyXG4gICAgICBlbmQ6ICgpID0+IHtcclxuICAgICAgICAvLyBJZiB0aGUgbGlnaHQgaXMgb24gYW5kIHRoZSBwcm9iZSBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIGJlYW0sIHNuYXAgdGhlIHByb2JlIHRvIHRoZSBjZW50ZXIgb2YgYmVhbS5cclxuICAgICAgICBpZiAoIGxpZ2h0LmlzT25Qcm9wZXJ0eS52YWx1ZSAmJlxyXG4gICAgICAgICAgICAgKCBwcm9iZS5wb3NpdGlvblByb3BlcnR5LnZhbHVlLnggPj0gbGlnaHQucG9zaXRpb24ueCApICYmXHJcbiAgICAgICAgICAgICAoIE1hdGguYWJzKCBwcm9iZS5wb3NpdGlvblByb3BlcnR5LnZhbHVlLnkgLSBsaWdodC5wb3NpdGlvbi55ICkgPD0gMC41ICogbGlnaHQubGVuc0RpYW1ldGVyICkgKSB7XHJcbiAgICAgICAgICBwcm9iZS5wb3NpdGlvblByb3BlcnR5LnZhbHVlID0gbmV3IFZlY3RvcjIoIHByb2JlLnBvc2l0aW9uUHJvcGVydHkudmFsdWUueCwgbGlnaHQucG9zaXRpb24ueSApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdkcmFnTGlzdGVuZXInIClcclxuICAgIH0gKSApO1xyXG5cclxuICAgIC8vIHRvdWNoIGFyZWFcclxuICAgIHRoaXMudG91Y2hBcmVhID0gdGhpcy5sb2NhbEJvdW5kcy5kaWxhdGVkWFkoIDAuMjUgKiB0aGlzLndpZHRoLCAwICk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogV2lyZSB0aGF0IGNvbm5lY3RzIHRoZSBib2R5IGFuZCBwcm9iZVxyXG4gKi9cclxuY2xhc3MgV2lyZU5vZGUgZXh0ZW5kcyBQYXRoIHtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBib2R5OiBCTExNb3ZhYmxlLCBwcm9iZTogQkxMTW92YWJsZSwgYm9keU5vZGU6IE5vZGUsIHByb2JlTm9kZTogTm9kZSApIHtcclxuXHJcbiAgICBzdXBlciggbmV3IFNoYXBlKCksIHtcclxuXHJcbiAgICAgIC8vIFBhdGhPcHRpb25zXHJcbiAgICAgIHN0cm9rZTogJ2dyYXknLFxyXG4gICAgICBsaW5lV2lkdGg6IDgsXHJcbiAgICAgIGxpbmVDYXA6ICdzcXVhcmUnLFxyXG4gICAgICBsaW5lSm9pbjogJ3JvdW5kJyxcclxuICAgICAgcGlja2FibGU6IGZhbHNlXHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgdXBkYXRlQ3VydmUgPSAoKSA9PiB7XHJcblxyXG4gICAgICAvLyBjb25uZWN0aW9uIHBvaW50c1xyXG4gICAgICBjb25zdCBib2R5Q29ubmVjdGlvblBvaW50ID0gbmV3IFZlY3RvcjIoIGJvZHlOb2RlLmNlbnRlclgsIGJvZHlOb2RlLmJvdHRvbSApO1xyXG4gICAgICBjb25zdCBwcm9iZUNvbm5lY3Rpb25Qb2ludCA9IG5ldyBWZWN0b3IyKCBwcm9iZU5vZGUuY2VudGVyWCwgcHJvYmVOb2RlLmJvdHRvbSApO1xyXG5cclxuICAgICAgLy8gY29udHJvbCBwb2ludHNcclxuICAgICAgLy8gVGhlIHkgY29vcmRpbmF0ZSBvZiB0aGUgYm9keSdzIGNvbnRyb2wgcG9pbnQgdmFyaWVzIHdpdGggdGhlIHggZGlzdGFuY2UgYmV0d2VlbiB0aGUgYm9keSBhbmQgcHJvYmUuXHJcbiAgICAgIGNvbnN0IGMxT2Zmc2V0ID0gbmV3IFZlY3RvcjIoIDAsIFV0aWxzLmxpbmVhciggMCwgODAwLCAwLCAyMDAsIGJvZHlOb2RlLmNlbnRlclggLSBwcm9iZU5vZGUubGVmdCApICk7IC8vIHggZGlzdGFuY2UgLT4geSBjb29yZGluYXRlXHJcbiAgICAgIGNvbnN0IGMyT2Zmc2V0ID0gbmV3IFZlY3RvcjIoIDUwLCAxNTAgKTtcclxuICAgICAgY29uc3QgYzEgPSBuZXcgVmVjdG9yMiggYm9keUNvbm5lY3Rpb25Qb2ludC54ICsgYzFPZmZzZXQueCwgYm9keUNvbm5lY3Rpb25Qb2ludC55ICsgYzFPZmZzZXQueSApO1xyXG4gICAgICBjb25zdCBjMiA9IG5ldyBWZWN0b3IyKCBwcm9iZUNvbm5lY3Rpb25Qb2ludC54ICsgYzJPZmZzZXQueCwgcHJvYmVDb25uZWN0aW9uUG9pbnQueSArIGMyT2Zmc2V0LnkgKTtcclxuXHJcbiAgICAgIC8vIGN1YmljIGN1cnZlXHJcbiAgICAgIHRoaXMuc2hhcGUgPSBuZXcgU2hhcGUoKVxyXG4gICAgICAgIC5tb3ZlVG8oIGJvZHlDb25uZWN0aW9uUG9pbnQueCwgYm9keUNvbm5lY3Rpb25Qb2ludC55IClcclxuICAgICAgICAuY3ViaWNDdXJ2ZVRvKCBjMS54LCBjMS55LCBjMi54LCBjMi55LCBwcm9iZUNvbm5lY3Rpb25Qb2ludC54LCBwcm9iZUNvbm5lY3Rpb25Qb2ludC55ICk7XHJcbiAgICB9O1xyXG4gICAgYm9keS5wb3NpdGlvblByb3BlcnR5LmxpbmsoIHVwZGF0ZUN1cnZlICk7XHJcbiAgICBwcm9iZS5wb3NpdGlvblByb3BlcnR5LmxpbmsoIHVwZGF0ZUN1cnZlICk7XHJcbiAgfVxyXG59XHJcblxyXG5iZWVyc0xhd0xhYi5yZWdpc3RlciggJ0FURGV0ZWN0b3JOb2RlJywgQVREZXRlY3Rvck5vZGUgKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsZUFBZSxNQUFNLHdDQUF3QztBQUNwRSxPQUFPQyxRQUFRLE1BQU0saUNBQWlDO0FBRXRELE9BQU9DLE9BQU8sTUFBTSwrQkFBK0I7QUFDbkQsT0FBT0MsVUFBVSxNQUFNLGtDQUFrQztBQUN6RCxPQUFPQyxLQUFLLE1BQU0sNkJBQTZCO0FBQy9DLE9BQU9DLE9BQU8sTUFBTSwrQkFBK0I7QUFDbkQsU0FBU0MsS0FBSyxRQUFRLGdDQUFnQztBQUN0RCxPQUFPQyxTQUFTLE1BQTRCLHVDQUF1QztBQUVuRixPQUFPQyxXQUFXLE1BQU0sK0NBQStDO0FBRXZFLE9BQU9DLFdBQVcsTUFBTSw0Q0FBNEM7QUFDcEUsT0FBT0MsUUFBUSxNQUFNLHlDQUF5QztBQUM5RCxPQUFPQyxTQUFTLE1BQTRCLDBDQUEwQztBQUN0RixPQUFPQyxlQUFlLE1BQU0sZ0RBQWdEO0FBQzVFLFNBQVNDLFlBQVksRUFBRUMsSUFBSSxFQUFlQyxJQUFJLEVBQUVDLElBQUksRUFBRUMsSUFBSSxRQUFRLG1DQUFtQztBQUNyRyxPQUFPQyxvQkFBb0IsTUFBb0MsNENBQTRDO0FBRTNHLE9BQU9DLFFBQVEsTUFBTSx5Q0FBeUM7QUFDOUQsT0FBT0MsV0FBVyxNQUFNLHNCQUFzQjtBQUM5QyxPQUFPQyxrQkFB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