// Copyright 2013-2023, University of Colorado Boulder

/**
 * Visual representation of a beaker that is filled to the top with a solution.
 * Ticks on the left edge of the beaker. Origin is at the bottom center.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import Utils from '../../../../dot/js/Utils.js';
import { Shape } from '../../../../kite/js/imports.js';
import optionize from '../../../../phet-core/js/optionize.js';
import StringUtils from '../../../../phetcommon/js/util/StringUtils.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { Node, Path, Text } from '../../../../scenery/js/imports.js';
import beersLawLab from '../../beersLawLab.js';
import BeersLawLabStrings from '../../BeersLawLabStrings.js';
import BLLPreferences from '../../common/model/BLLPreferences.js';

// constants
const RIM_OFFSET = 20;
const MINOR_TICK_SPACING = 0.1; // L
const MINOR_TICKS_PER_MAJOR_TICK = 5;
const MAJOR_TICK_LENGTH = 30;
const MINOR_TICK_LENGTH = 15;
const TICK_LABEL_X_SPACING = 8;
const MAJOR_TICK_VALUES_LITERS = ['\u00bd', '1']; // 1/2 L, 1 L
const MAJOR_TICK_VALUES_MILLILITERS = ['500', '1000']; // 500 mL, 1000 mL
assert && assert(MAJOR_TICK_VALUES_LITERS.length === MAJOR_TICK_VALUES_MILLILITERS.length);
export default class BeakerNode extends Node {
  constructor(beaker, modelViewTransform, providedOptions) {
    const options = optionize()({
      // NodeOptions
      pickable: false,
      visiblePropertyOptions: {
        phetioReadOnly: true
      }
    }, providedOptions);
    super(options);

    // outline of the beaker, starting from upper left
    const width = modelViewTransform.modelToViewDeltaX(beaker.size.width);
    const height = modelViewTransform.modelToViewDeltaY(beaker.size.height);
    const outlineShape = new Shape().moveTo(-(width / 2) - RIM_OFFSET, -height - RIM_OFFSET).lineTo(-(width / 2), -height).lineTo(-(width / 2), 0).lineTo(width / 2, 0).lineTo(width / 2, -height).lineTo(width / 2 + RIM_OFFSET, -height - RIM_OFFSET);
    this.addChild(new Path(outlineShape, {
      stroke: 'black',
      lineWidth: 3,
      lineCap: 'round',
      lineJoin: 'round'
    }));

    // horizontal tick marks and tick labels, at left edge of beaker, from bottom up
    const tickMarksNode = new Node({
      tandem: options.tandem.createTandem('tickMarksNode')
    });
    this.addChild(tickMarksNode);
    const tickLabelsNode = new Node({
      tandem: options.tandem.createTandem('tickLabelsNode')
    });
    this.addChild(tickLabelsNode);
    const numberOfTicks = Utils.roundSymmetric(beaker.volume / MINOR_TICK_SPACING);
    const deltaY = height / numberOfTicks;
    for (let i = 1; i <= numberOfTicks; i++) {
      // tick
      const isMajorTick = i % MINOR_TICKS_PER_MAJOR_TICK === 0;
      const y = -(i * deltaY);
      const leftX = -width / 2;
      const rightX = leftX + (isMajorTick ? MAJOR_TICK_LENGTH : MINOR_TICK_LENGTH);
      const tickShape = new Shape().moveTo(leftX, y).lineTo(rightX, y);
      const tickPath = new Path(tickShape, {
        stroke: 'black',
        lineWidth: 2,
        lineCap: 'butt',
        lineJoin: 'bevel'
      });
      tickMarksNode.addChild(tickPath);

      // major tick label
      if (isMajorTick) {
        const labelIndex = i / MINOR_TICKS_PER_MAJOR_TICK - 1;
        if (labelIndex < MAJOR_TICK_VALUES_LITERS.length) {
          // display ticks in liters or milliliters, see beers-law-lab#150
          const labelStringProperty = new DerivedProperty([BeersLawLabStrings.pattern['0value']['1unitsStringProperty'], BeersLawLabStrings.units.litersStringProperty, BeersLawLabStrings.units.millilitersStringProperty, BLLPreferences.beakerUnitsProperty], (pattern, litersString, millilitersString, beakerUnits) => StringUtils.format(pattern, beakerUnits === 'liters' ? MAJOR_TICK_VALUES_LITERS[labelIndex] : MAJOR_TICK_VALUES_MILLILITERS[labelIndex], beakerUnits === 'liters' ? litersString : millilitersString));
          tickLabelsNode.addChild(new Text(labelStringProperty, {
            font: new PhetFont(24),
            fill: 'black',
            x: rightX + TICK_LABEL_X_SPACING,
            centerY: tickPath.centerY,
            maxWidth: 0.25 * beaker.size.width // constrain width for i18n
            // No PhET-iO instrumentation is desired.
          }));
        }
      }
    }

    const position = modelViewTransform.modelToViewPosition(beaker.position);
    this.x = position.x;
    this.y = position.y;
  }
  dispose() {
    assert && assert(false, 'dispose is not supported, exists for the lifetime of the sim');
    super.dispose();
  }
}
beersLawLab.register('BeakerNode', BeakerNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJVdGlscyIsIlNoYXBlIiwib3B0aW9uaXplIiwiU3RyaW5nVXRpbHMiLCJQaGV0Rm9udCIsIk5vZGUiLCJQYXRoIiwiVGV4dCIsImJlZXJzTGF3TGFiIiwiQmVlcnNMYXdMYWJTdHJpbmdzIiwiQkxMUHJlZmVyZW5jZXMiLCJSSU1fT0ZGU0VUIiwiTUlOT1JfVElDS19TUEFDSU5HIiwiTUlOT1JfVElDS1NfUEVSX01BSk9SX1RJQ0siLCJNQUpPUl9USUNLX0xFTkdUSCIsIk1JTk9SX1RJQ0tfTEVOR1RIIiwiVElDS19MQUJFTF9YX1NQQUNJTkciLCJNQUpPUl9USUNLX1ZBTFVFU19MSVRFUlMiLCJNQUpPUl9USUNLX1ZBTFVFU19NSUxMSUxJVEVSUyIsImFzc2VydCIsImxlbmd0aCIsIkJlYWtlck5vZGUiLCJjb25zdHJ1Y3RvciIsImJlYWtlciIsIm1vZGVsVmlld1RyYW5zZm9ybSIsInByb3ZpZGVkT3B0aW9ucyIsIm9wdGlvbnMiLCJwaWNrYWJsZSIsInZpc2libGVQcm9wZXJ0eU9wdGlvbnMiLCJwaGV0aW9SZWFkT25seSIsIndpZHRoIiwibW9kZWxUb1ZpZXdEZWx0YVgiLCJzaXplIiwiaGVpZ2h0IiwibW9kZWxUb1ZpZXdEZWx0YVkiLCJvdXRsaW5lU2hhcGUiLCJtb3ZlVG8iLCJsaW5lVG8iLCJhZGRDaGlsZCIsInN0cm9rZSIsImxpbmVXaWR0aCIsImxpbmVDYXAiLCJsaW5lSm9pbiIsInRpY2tNYXJrc05vZGUiLCJ0YW5kZW0iLCJjcmVhdGVUYW5kZW0iLCJ0aWNrTGFiZWxzTm9kZSIsIm51bWJlck9mVGlja3MiLCJyb3VuZFN5bW1ldHJpYyIsInZvbHVtZSIsImRlbHRhWSIsImkiLCJpc01ham9yVGljayIsInkiLCJsZWZ0WCIsInJpZ2h0WCIsInRpY2tTaGFwZSIsInRpY2tQYXRoIiwibGFiZWxJbmRleCIsImxhYmVsU3RyaW5nUHJvcGVydHkiLCJwYXR0ZXJuIiwidW5pdHMiLCJsaXRlcnNTdHJpbmdQcm9wZXJ0eSIsIm1pbGxpbGl0ZXJzU3RyaW5nUHJvcGVydHkiLCJiZWFrZXJVbml0c1Byb3BlcnR5IiwibGl0ZXJzU3RyaW5nIiwibWlsbGlsaXRlcnNTdHJpbmciLCJiZWFrZXJVbml0cyIsImZvcm1hdCIsImZvbnQiLCJmaWxsIiwieCIsImNlbnRlclkiLCJtYXhXaWR0aCIsInBvc2l0aW9uIiwibW9kZWxUb1ZpZXdQb3NpdGlvbiIsImRpc3Bvc2UiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkJlYWtlck5vZGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTMtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogVmlzdWFsIHJlcHJlc2VudGF0aW9uIG9mIGEgYmVha2VyIHRoYXQgaXMgZmlsbGVkIHRvIHRoZSB0b3Agd2l0aCBhIHNvbHV0aW9uLlxyXG4gKiBUaWNrcyBvbiB0aGUgbGVmdCBlZGdlIG9mIHRoZSBiZWFrZXIuIE9yaWdpbiBpcyBhdCB0aGUgYm90dG9tIGNlbnRlci5cclxuICpcclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICovXHJcblxyXG5pbXBvcnQgRGVyaXZlZFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvRGVyaXZlZFByb3BlcnR5LmpzJztcclxuaW1wb3J0IFV0aWxzIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9VdGlscy5qcyc7XHJcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSAnLi4vLi4vLi4vLi4va2l0ZS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IG9wdGlvbml6ZSwgeyBFbXB0eVNlbGZPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCBQaWNrUmVxdWlyZWQgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL1BpY2tSZXF1aXJlZC5qcyc7XHJcbmltcG9ydCBTdHJpbmdVdGlscyBmcm9tICcuLi8uLi8uLi8uLi9waGV0Y29tbW9uL2pzL3V0aWwvU3RyaW5nVXRpbHMuanMnO1xyXG5pbXBvcnQgTW9kZWxWaWV3VHJhbnNmb3JtMiBmcm9tICcuLi8uLi8uLi8uLi9waGV0Y29tbW9uL2pzL3ZpZXcvTW9kZWxWaWV3VHJhbnNmb3JtMi5qcyc7XHJcbmltcG9ydCBQaGV0Rm9udCBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvUGhldEZvbnQuanMnO1xyXG5pbXBvcnQgeyBOb2RlLCBOb2RlT3B0aW9ucywgUGF0aCwgVGV4dCB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBiZWVyc0xhd0xhYiBmcm9tICcuLi8uLi9iZWVyc0xhd0xhYi5qcyc7XHJcbmltcG9ydCBCZWVyc0xhd0xhYlN0cmluZ3MgZnJvbSAnLi4vLi4vQmVlcnNMYXdMYWJTdHJpbmdzLmpzJztcclxuaW1wb3J0IEJlYWtlciBmcm9tICcuLi9tb2RlbC9CZWFrZXIuanMnO1xyXG5pbXBvcnQgQkxMUHJlZmVyZW5jZXMgZnJvbSAnLi4vLi4vY29tbW9uL21vZGVsL0JMTFByZWZlcmVuY2VzLmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBSSU1fT0ZGU0VUID0gMjA7XHJcbmNvbnN0IE1JTk9SX1RJQ0tfU1BBQ0lORyA9IDAuMTsgLy8gTFxyXG5jb25zdCBNSU5PUl9USUNLU19QRVJfTUFKT1JfVElDSyA9IDU7XHJcbmNvbnN0IE1BSk9SX1RJQ0tfTEVOR1RIID0gMzA7XHJcbmNvbnN0IE1JTk9SX1RJQ0tfTEVOR1RIID0gMTU7XHJcbmNvbnN0IFRJQ0tfTEFCRUxfWF9TUEFDSU5HID0gODtcclxuY29uc3QgTUFKT1JfVElDS19WQUxVRVNfTElURVJTID0gWyAnXFx1MDBiZCcsICcxJyBdOyAvLyAxLzIgTCwgMSBMXHJcbmNvbnN0IE1BSk9SX1RJQ0tfVkFMVUVTX01JTExJTElURVJTID0gWyAnNTAwJywgJzEwMDAnIF07IC8vIDUwMCBtTCwgMTAwMCBtTFxyXG5hc3NlcnQgJiYgYXNzZXJ0KCBNQUpPUl9USUNLX1ZBTFVFU19MSVRFUlMubGVuZ3RoID09PSBNQUpPUl9USUNLX1ZBTFVFU19NSUxMSUxJVEVSUy5sZW5ndGggKTtcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSBFbXB0eVNlbGZPcHRpb25zO1xyXG5cclxudHlwZSBCZWFrZXJOb2RlT3B0aW9ucyA9IFNlbGZPcHRpb25zICYgUGlja1JlcXVpcmVkPE5vZGVPcHRpb25zLCAndGFuZGVtJz47XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCZWFrZXJOb2RlIGV4dGVuZHMgTm9kZSB7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggYmVha2VyOiBCZWFrZXIsIG1vZGVsVmlld1RyYW5zZm9ybTogTW9kZWxWaWV3VHJhbnNmb3JtMiwgcHJvdmlkZWRPcHRpb25zOiBCZWFrZXJOb2RlT3B0aW9ucyApIHtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPEJlYWtlck5vZGVPcHRpb25zLCBTZWxmT3B0aW9ucywgTm9kZU9wdGlvbnM+KCkoIHtcclxuXHJcbiAgICAgIC8vIE5vZGVPcHRpb25zXHJcbiAgICAgIHBpY2thYmxlOiBmYWxzZSxcclxuICAgICAgdmlzaWJsZVByb3BlcnR5T3B0aW9uczoge1xyXG4gICAgICAgIHBoZXRpb1JlYWRPbmx5OiB0cnVlXHJcbiAgICAgIH1cclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIHN1cGVyKCBvcHRpb25zICk7XHJcblxyXG4gICAgLy8gb3V0bGluZSBvZiB0aGUgYmVha2VyLCBzdGFydGluZyBmcm9tIHVwcGVyIGxlZnRcclxuICAgIGNvbnN0IHdpZHRoID0gbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3RGVsdGFYKCBiZWFrZXIuc2l6ZS53aWR0aCApO1xyXG4gICAgY29uc3QgaGVpZ2h0ID0gbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3RGVsdGFZKCBiZWFrZXIuc2l6ZS5oZWlnaHQgKTtcclxuICAgIGNvbnN0IG91dGxpbmVTaGFwZSA9IG5ldyBTaGFwZSgpXHJcbiAgICAgIC5tb3ZlVG8oIC0oIHdpZHRoIC8gMiApIC0gUklNX09GRlNFVCwgLWhlaWdodCAtIFJJTV9PRkZTRVQgKVxyXG4gICAgICAubGluZVRvKCAtKCB3aWR0aCAvIDIgKSwgLWhlaWdodCApXHJcbiAgICAgIC5saW5lVG8oIC0oIHdpZHRoIC8gMiApLCAwIClcclxuICAgICAgLmxpbmVUbyggd2lkdGggLyAyLCAwIClcclxuICAgICAgLmxpbmVUbyggd2lkdGggLyAyLCAtaGVpZ2h0IClcclxuICAgICAgLmxpbmVUbyggKCB3aWR0aCAvIDIgKSArIFJJTV9PRkZTRVQsIC1oZWlnaHQgLSBSSU1fT0ZGU0VUICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBuZXcgUGF0aCggb3V0bGluZVNoYXBlLCB7XHJcbiAgICAgIHN0cm9rZTogJ2JsYWNrJyxcclxuICAgICAgbGluZVdpZHRoOiAzLFxyXG4gICAgICBsaW5lQ2FwOiAncm91bmQnLFxyXG4gICAgICBsaW5lSm9pbjogJ3JvdW5kJ1xyXG4gICAgfSApICk7XHJcblxyXG4gICAgLy8gaG9yaXpvbnRhbCB0aWNrIG1hcmtzIGFuZCB0aWNrIGxhYmVscywgYXQgbGVmdCBlZGdlIG9mIGJlYWtlciwgZnJvbSBib3R0b20gdXBcclxuICAgIGNvbnN0IHRpY2tNYXJrc05vZGUgPSBuZXcgTm9kZSgge1xyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3RpY2tNYXJrc05vZGUnIClcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRpY2tNYXJrc05vZGUgKTtcclxuICAgIGNvbnN0IHRpY2tMYWJlbHNOb2RlID0gbmV3IE5vZGUoIHtcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICd0aWNrTGFiZWxzTm9kZScgKVxyXG4gICAgfSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggdGlja0xhYmVsc05vZGUgKTtcclxuXHJcbiAgICBjb25zdCBudW1iZXJPZlRpY2tzID0gVXRpbHMucm91bmRTeW1tZXRyaWMoIGJlYWtlci52b2x1bWUgLyBNSU5PUl9USUNLX1NQQUNJTkcgKTtcclxuICAgIGNvbnN0IGRlbHRhWSA9IGhlaWdodCAvIG51bWJlck9mVGlja3M7XHJcbiAgICBmb3IgKCBsZXQgaSA9IDE7IGkgPD0gbnVtYmVyT2ZUaWNrczsgaSsrICkge1xyXG5cclxuICAgICAgLy8gdGlja1xyXG4gICAgICBjb25zdCBpc01ham9yVGljayA9ICggaSAlIE1JTk9SX1RJQ0tTX1BFUl9NQUpPUl9USUNLID09PSAwICk7XHJcbiAgICAgIGNvbnN0IHkgPSAtKCBpICogZGVsdGFZICk7XHJcbiAgICAgIGNvbnN0IGxlZnRYID0gLXdpZHRoIC8gMjtcclxuICAgICAgY29uc3QgcmlnaHRYID0gbGVmdFggKyAoIGlzTWFqb3JUaWNrID8gTUFKT1JfVElDS19MRU5HVEggOiBNSU5PUl9USUNLX0xFTkdUSCApO1xyXG4gICAgICBjb25zdCB0aWNrU2hhcGUgPSBuZXcgU2hhcGUoKS5tb3ZlVG8oIGxlZnRYLCB5ICkubGluZVRvKCByaWdodFgsIHkgKTtcclxuICAgICAgY29uc3QgdGlja1BhdGggPSBuZXcgUGF0aCggdGlja1NoYXBlLCB7XHJcbiAgICAgICAgc3Ryb2tlOiAnYmxhY2snLFxyXG4gICAgICAgIGxpbmVXaWR0aDogMixcclxuICAgICAgICBsaW5lQ2FwOiAnYnV0dCcsXHJcbiAgICAgICAgbGluZUpvaW46ICdiZXZlbCdcclxuICAgICAgfSApO1xyXG4gICAgICB0aWNrTWFya3NOb2RlLmFkZENoaWxkKCB0aWNrUGF0aCApO1xyXG5cclxuICAgICAgLy8gbWFqb3IgdGljayBsYWJlbFxyXG4gICAgICBpZiAoIGlzTWFqb3JUaWNrICkge1xyXG4gICAgICAgIGNvbnN0IGxhYmVsSW5kZXggPSAoIGkgLyBNSU5PUl9USUNLU19QRVJfTUFKT1JfVElDSyApIC0gMTtcclxuICAgICAgICBpZiAoIGxhYmVsSW5kZXggPCBNQUpPUl9USUNLX1ZBTFVFU19MSVRFUlMubGVuZ3RoICkge1xyXG5cclxuICAgICAgICAgIC8vIGRpc3BsYXkgdGlja3MgaW4gbGl0ZXJzIG9yIG1pbGxpbGl0ZXJzLCBzZWUgYmVlcnMtbGF3LWxhYiMxNTBcclxuICAgICAgICAgIGNvbnN0IGxhYmVsU3RyaW5nUHJvcGVydHkgPSBuZXcgRGVyaXZlZFByb3BlcnR5KCBbXHJcbiAgICAgICAgICAgICAgQmVlcnNMYXdMYWJTdHJpbmdzLnBhdHRlcm5bICcwdmFsdWUnIF1bICcxdW5pdHNTdHJpbmdQcm9wZXJ0eScgXSxcclxuICAgICAgICAgICAgICBCZWVyc0xhd0xhYlN0cmluZ3MudW5pdHMubGl0ZXJzU3RyaW5nUHJvcGVydHksXHJcbiAgICAgICAgICAgICAgQmVlcnNMYXdMYWJTdHJpbmdzLnVuaXRzLm1pbGxpbGl0ZXJzU3RyaW5nUHJvcGVydHksXHJcbiAgICAgICAgICAgICAgQkxMUHJlZmVyZW5jZXMuYmVha2VyVW5pdHNQcm9wZXJ0eVxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAoIHBhdHRlcm4sIGxpdGVyc1N0cmluZywgbWlsbGlsaXRlcnNTdHJpbmcsIGJlYWtlclVuaXRzICkgPT5cclxuICAgICAgICAgICAgICBTdHJpbmdVdGlscy5mb3JtYXQoIHBhdHRlcm4sXHJcbiAgICAgICAgICAgICAgICAoIGJlYWtlclVuaXRzID09PSAnbGl0ZXJzJyApID8gTUFKT1JfVElDS19WQUxVRVNfTElURVJTWyBsYWJlbEluZGV4IF0gOiBNQUpPUl9USUNLX1ZBTFVFU19NSUxMSUxJVEVSU1sgbGFiZWxJbmRleCBdLFxyXG4gICAgICAgICAgICAgICAgKCBiZWFrZXJVbml0cyA9PT0gJ2xpdGVycycgKSA/IGxpdGVyc1N0cmluZyA6IG1pbGxpbGl0ZXJzU3RyaW5nIClcclxuICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgdGlja0xhYmVsc05vZGUuYWRkQ2hpbGQoIG5ldyBUZXh0KCBsYWJlbFN0cmluZ1Byb3BlcnR5LCB7XHJcbiAgICAgICAgICAgIGZvbnQ6IG5ldyBQaGV0Rm9udCggMjQgKSxcclxuICAgICAgICAgICAgZmlsbDogJ2JsYWNrJyxcclxuICAgICAgICAgICAgeDogcmlnaHRYICsgVElDS19MQUJFTF9YX1NQQUNJTkcsXHJcbiAgICAgICAgICAgIGNlbnRlclk6IHRpY2tQYXRoLmNlbnRlclksXHJcbiAgICAgICAgICAgIG1heFdpZHRoOiAwLjI1ICogYmVha2VyLnNpemUud2lkdGggLy8gY29uc3RyYWluIHdpZHRoIGZvciBpMThuXHJcbiAgICAgICAgICAgIC8vIE5vIFBoRVQtaU8gaW5zdHJ1bWVudGF0aW9uIGlzIGRlc2lyZWQuXHJcbiAgICAgICAgICB9ICkgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwb3NpdGlvbiA9IG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1Bvc2l0aW9uKCBiZWFrZXIucG9zaXRpb24gKTtcclxuICAgIHRoaXMueCA9IHBvc2l0aW9uLng7XHJcbiAgICB0aGlzLnkgPSBwb3NpdGlvbi55O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG92ZXJyaWRlIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBmYWxzZSwgJ2Rpc3Bvc2UgaXMgbm90IHN1cHBvcnRlZCwgZXhpc3RzIGZvciB0aGUgbGlmZXRpbWUgb2YgdGhlIHNpbScgKTtcclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcbn1cclxuXHJcbmJlZXJzTGF3TGFiLnJlZ2lzdGVyKCAnQmVha2VyTm9kZScsIEJlYWtlck5vZGUgKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxlQUFlLE1BQU0sd0NBQXdDO0FBQ3BFLE9BQU9DLEtBQUssTUFBTSw2QkFBNkI7QUFDL0MsU0FBU0MsS0FBSyxRQUFRLGdDQUFn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