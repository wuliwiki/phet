// Copyright 2014-2023, University of Colorado Boulder

/**
 * Abstract base class for all bar meter nodes.
 * Origin is at the center-left of the vertical track at the base of the bar.
 *
 * The bar meter node is composed of a rectangular bar graph and a value node.
 * The composite parts are added to layout boxes in the BarMeterPanel so that
 * alignment can be perfectly set.
 *
 * @author Jesse Greenberg (PhET Interactive Simulations)
 * @author Andrew Adare (PhET Interactive Simulations)
 */

import Utils from '../../../../../dot/js/Utils.js';
import StringUtils from '../../../../../phetcommon/js/util/StringUtils.js';
import ArrowNode from '../../../../../scenery-phet/js/ArrowNode.js';
import PhetFont from '../../../../../scenery-phet/js/PhetFont.js';
import { Line, Node, Text } from '../../../../../scenery/js/imports.js';
import capacitorLabBasics from '../../../capacitorLabBasics.js';
import BarNode from './BarNode.js';

// constants
const BASE_LINE_LENGTH = 25; // Length of vertical line at the origin (left end) of the bar
const BAR_STROKE_COLOR = 'black';
const BAR_LINE_WIDTH = 1;
const VALUE_METER_SPACING = 7; // between right side of value text and left side of bar
const VALUE_MAX_WIDTH = 67; // max width of value string for i18n

// value display
const VALUE_FONT = new PhetFont(16);
const VALUE_COLOR = 'black';
class BarMeterNode extends Node {
  /**
   * @param {BarMeter} meter
   * @param {string} barColor - fill color of the BarMeter
   * @param {number} maxValue - model value at which the bar has max length
   * @param {string} unitsPattern - string representing units
   * @param {string} titleString - title string for the bar graph
   * @param {Tandem} tandem
   */
  constructor(meter, barColor, maxValue, unitsPattern, titleString, tandem) {
    super({
      tandem: tandem
    });

    // @public {number}
    this.maxValue = maxValue;

    // @private {BarMeter}
    this.meter = meter;

    // @private {string}
    this.unitsPattern = unitsPattern;

    // @public {string}
    this.titleString = titleString;

    // @private {Line} - vertical line that represents the base of this bar meter
    this.axisLine = new Line(0, -BASE_LINE_LENGTH / 2, 0, BASE_LINE_LENGTH / 2, {
      stroke: BAR_STROKE_COLOR,
      lineWidth: BAR_LINE_WIDTH
    });

    // @private {BarNode} - bar node which represents the magnitude of the meter
    this.barNode = new BarNode(barColor, meter.valueProperty.get(), this.maxValue);

    // @public {Text} - value with hundredths precision and units, set in setValue()
    this.valueText = new Text('', {
      font: VALUE_FONT,
      fill: VALUE_COLOR,
      maxWidth: VALUE_MAX_WIDTH,
      tandem: tandem.createTandem('valueText')
    });

    // @public {ArrowNode} - arrow node used to indicate when the value has gone beyond the scale of this meter
    this.arrowNode = new ArrowNode(0, 0, this.barNode.barSize.height + 2, 0, {
      fill: barColor,
      headWidth: this.barNode.barSize.height + 5,
      tailWidth: 12,
      stroke: 'black',
      tandem: tandem.createTandem('arrowNode')
    });
    this.axisLine.children = [this.valueText, this.barNode, this.arrowNode];
    this.addChild(this.axisLine);

    // observers
    meter.valueProperty.link(value => {
      this.setValue(value);
      this.updateArrow();
    });

    // visibility
    meter.visibleProperty.link(visible => {
      this.visible = visible;
    });
    this.updateLayout();
  }

  /**
   * Sets the color used to fill the bar and the overload indicator arrow.
   * @public
   *
   * @param {string} color
   */
  setBarColor(color) {
    this.barNode.fill = color;
    this.arrowNode.fill = color;
  }

  /**
   * Sets the value displayed by the meter.
   * Updates the bar and the value below the meter.
   * @public
   *
   * @param {number} value
   */
  setValue(value) {
    assert && assert(value >= 0, `value must be >= 0 : ${value}`);
    if (value !== this.value) {
      this.value = value;

      // update components
      this.barNode.setValue(value);

      // all meters read in pico units, compensate by multiplying by 10^12
      const meterValue = Utils.toFixed(Math.pow(10, 12) * value, 2);
      const unitsFormatString = StringUtils.fillIn(this.unitsPattern, {
        value: meterValue
      });
      this.valueText.setString(unitsFormatString);
    }
  }

  /**
   * Update the overload indicator arrow visibility and position.
   * @private
   */
  updateArrow() {
    // update position
    this.arrowNode.left = this.barNode.right + VALUE_METER_SPACING;

    // update visibility
    this.arrowNode.visible = Math.abs(this.meter.valueProperty.get()) > this.maxValue;
  }

  /**
   * Update the layout
   * @private
   */
  updateLayout() {
    this.barNode.leftCenter = this.axisLine.leftCenter;
    this.valueText.leftCenter = this.axisLine.leftCenter.minusXY(VALUE_MAX_WIDTH, 0);
  }
}
capacitorLabBasics.register('BarMeterNode', BarMeterNode);
export default BarMeterNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVdGlscyIsIlN0cmluZ1V0aWxzIiwiQXJyb3dOb2RlIiwiUGhldEZvbnQiLCJMaW5lIiwiTm9kZSIsIlRleHQiLCJjYXBhY2l0b3JMYWJCYXNpY3MiLCJCYXJOb2RlIiwiQkFTRV9MSU5FX0xFTkdUSCIsIkJBUl9TVFJPS0VfQ09MT1IiLCJCQVJfTElORV9XSURUSCIsIlZBTFVFX01FVEVSX1NQQUNJTkciLCJWQUxVRV9NQVhfV0lEVEgiLCJWQUxVRV9GT05UIiwiVkFMVUVfQ09MT1IiLCJCYXJNZXRlck5vZGUiLCJjb25zdHJ1Y3RvciIsIm1ldGVyIiwiYmFyQ29sb3IiLCJtYXhWYWx1ZSIsInVuaXRzUGF0dGVybiIsInRpdGxlU3RyaW5nIiwidGFuZGVtIiwiYXhpc0xpbmUiLCJzdHJva2UiLCJsaW5lV2lkdGgiLCJiYXJOb2RlIiwidmFsdWVQcm9wZXJ0eSIsImdldCIsInZhbHVlVGV4dCIsImZvbnQiLCJmaWxsIiwibWF4V2lkdGgiLCJjcmVhdGVUYW5kZW0iLCJhcnJvd05vZGUiLCJiYXJTaXplIiwiaGVpZ2h0IiwiaGVhZFdpZHRoIiwidGFpbFdpZHRoIiwiY2hpbGRyZW4iLCJhZGRDaGlsZCIsImxpbmsiLCJ2YWx1ZSIsInNldFZhbHVlIiwidXBkYXRlQXJyb3ciLCJ2aXNpYmxlUHJvcGVydHkiLCJ2aXNpYmxlIiwidXBkYXRlTGF5b3V0Iiwic2V0QmFyQ29sb3IiLCJjb2xvciIsImFzc2VydCIsIm1ldGVyVmFsdWUiLCJ0b0ZpeGVkIiwiTWF0aCIsInBvdyIsInVuaXRzRm9ybWF0U3RyaW5nIiwiZmlsbEluIiwic2V0U3RyaW5nIiwibGVmdCIsInJpZ2h0IiwiYWJzIiwibGVmdENlbnRlciIsIm1pbnVzWFkiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkJhck1ldGVyTm9kZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNC0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBhbGwgYmFyIG1ldGVyIG5vZGVzLlxyXG4gKiBPcmlnaW4gaXMgYXQgdGhlIGNlbnRlci1sZWZ0IG9mIHRoZSB2ZXJ0aWNhbCB0cmFjayBhdCB0aGUgYmFzZSBvZiB0aGUgYmFyLlxyXG4gKlxyXG4gKiBUaGUgYmFyIG1ldGVyIG5vZGUgaXMgY29tcG9zZWQgb2YgYSByZWN0YW5ndWxhciBiYXIgZ3JhcGggYW5kIGEgdmFsdWUgbm9kZS5cclxuICogVGhlIGNvbXBvc2l0ZSBwYXJ0cyBhcmUgYWRkZWQgdG8gbGF5b3V0IGJveGVzIGluIHRoZSBCYXJNZXRlclBhbmVsIHNvIHRoYXRcclxuICogYWxpZ25tZW50IGNhbiBiZSBwZXJmZWN0bHkgc2V0LlxyXG4gKlxyXG4gKiBAYXV0aG9yIEplc3NlIEdyZWVuYmVyZyAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICogQGF1dGhvciBBbmRyZXcgQWRhcmUgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IFV0aWxzIGZyb20gJy4uLy4uLy4uLy4uLy4uL2RvdC9qcy9VdGlscy5qcyc7XHJcbmltcG9ydCBTdHJpbmdVdGlscyBmcm9tICcuLi8uLi8uLi8uLi8uLi9waGV0Y29tbW9uL2pzL3V0aWwvU3RyaW5nVXRpbHMuanMnO1xyXG5pbXBvcnQgQXJyb3dOb2RlIGZyb20gJy4uLy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9BcnJvd05vZGUuanMnO1xyXG5pbXBvcnQgUGhldEZvbnQgZnJvbSAnLi4vLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1BoZXRGb250LmpzJztcclxuaW1wb3J0IHsgTGluZSwgTm9kZSwgVGV4dCB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBjYXBhY2l0b3JMYWJCYXNpY3MgZnJvbSAnLi4vLi4vLi4vY2FwYWNpdG9yTGFiQmFzaWNzLmpzJztcclxuaW1wb3J0IEJhck5vZGUgZnJvbSAnLi9CYXJOb2RlLmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBCQVNFX0xJTkVfTEVOR1RIID0gMjU7IC8vIExlbmd0aCBvZiB2ZXJ0aWNhbCBsaW5lIGF0IHRoZSBvcmlnaW4gKGxlZnQgZW5kKSBvZiB0aGUgYmFyXHJcbmNvbnN0IEJBUl9TVFJPS0VfQ09MT1IgPSAnYmxhY2snO1xyXG5jb25zdCBCQVJfTElORV9XSURUSCA9IDE7XHJcbmNvbnN0IFZBTFVFX01FVEVSX1NQQUNJTkcgPSA3OyAvLyBiZXR3ZWVuIHJpZ2h0IHNpZGUgb2YgdmFsdWUgdGV4dCBhbmQgbGVmdCBzaWRlIG9mIGJhclxyXG5jb25zdCBWQUxVRV9NQVhfV0lEVEggPSA2NzsgLy8gbWF4IHdpZHRoIG9mIHZhbHVlIHN0cmluZyBmb3IgaTE4blxyXG5cclxuLy8gdmFsdWUgZGlzcGxheVxyXG5jb25zdCBWQUxVRV9GT05UID0gbmV3IFBoZXRGb250KCAxNiApO1xyXG5jb25zdCBWQUxVRV9DT0xPUiA9ICdibGFjayc7XHJcblxyXG5jbGFzcyBCYXJNZXRlck5vZGUgZXh0ZW5kcyBOb2RlIHtcclxuICAvKipcclxuICAgKiBAcGFyYW0ge0Jhck1ldGVyfSBtZXRlclxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBiYXJDb2xvciAtIGZpbGwgY29sb3Igb2YgdGhlIEJhck1ldGVyXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IG1heFZhbHVlIC0gbW9kZWwgdmFsdWUgYXQgd2hpY2ggdGhlIGJhciBoYXMgbWF4IGxlbmd0aFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0c1BhdHRlcm4gLSBzdHJpbmcgcmVwcmVzZW50aW5nIHVuaXRzXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRpdGxlU3RyaW5nIC0gdGl0bGUgc3RyaW5nIGZvciB0aGUgYmFyIGdyYXBoXHJcbiAgICogQHBhcmFtIHtUYW5kZW19IHRhbmRlbVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBtZXRlciwgYmFyQ29sb3IsIG1heFZhbHVlLCB1bml0c1BhdHRlcm4sIHRpdGxlU3RyaW5nLCB0YW5kZW0gKSB7XHJcbiAgICBzdXBlciggeyB0YW5kZW06IHRhbmRlbSB9ICk7XHJcblxyXG4gICAgLy8gQHB1YmxpYyB7bnVtYmVyfVxyXG4gICAgdGhpcy5tYXhWYWx1ZSA9IG1heFZhbHVlO1xyXG5cclxuICAgIC8vIEBwcml2YXRlIHtCYXJNZXRlcn1cclxuICAgIHRoaXMubWV0ZXIgPSBtZXRlcjtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZSB7c3RyaW5nfVxyXG4gICAgdGhpcy51bml0c1BhdHRlcm4gPSB1bml0c1BhdHRlcm47XHJcblxyXG4gICAgLy8gQHB1YmxpYyB7c3RyaW5nfVxyXG4gICAgdGhpcy50aXRsZVN0cmluZyA9IHRpdGxlU3RyaW5nO1xyXG5cclxuICAgIC8vIEBwcml2YXRlIHtMaW5lfSAtIHZlcnRpY2FsIGxpbmUgdGhhdCByZXByZXNlbnRzIHRoZSBiYXNlIG9mIHRoaXMgYmFyIG1ldGVyXHJcbiAgICB0aGlzLmF4aXNMaW5lID0gbmV3IExpbmUoIDAsIC1CQVNFX0xJTkVfTEVOR1RIIC8gMiwgMCwgQkFTRV9MSU5FX0xFTkdUSCAvIDIsIHtcclxuICAgICAgc3Ryb2tlOiBCQVJfU1RST0tFX0NPTE9SLFxyXG4gICAgICBsaW5lV2lkdGg6IEJBUl9MSU5FX1dJRFRIXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gQHByaXZhdGUge0Jhck5vZGV9IC0gYmFyIG5vZGUgd2hpY2ggcmVwcmVzZW50cyB0aGUgbWFnbml0dWRlIG9mIHRoZSBtZXRlclxyXG4gICAgdGhpcy5iYXJOb2RlID0gbmV3IEJhck5vZGUoIGJhckNvbG9yLCBtZXRlci52YWx1ZVByb3BlcnR5LmdldCgpLCB0aGlzLm1heFZhbHVlICk7XHJcblxyXG4gICAgLy8gQHB1YmxpYyB7VGV4dH0gLSB2YWx1ZSB3aXRoIGh1bmRyZWR0aHMgcHJlY2lzaW9uIGFuZCB1bml0cywgc2V0IGluIHNldFZhbHVlKClcclxuICAgIHRoaXMudmFsdWVUZXh0ID0gbmV3IFRleHQoICcnLCB7XHJcbiAgICAgIGZvbnQ6IFZBTFVFX0ZPTlQsXHJcbiAgICAgIGZpbGw6IFZBTFVFX0NPTE9SLFxyXG4gICAgICBtYXhXaWR0aDogVkFMVUVfTUFYX1dJRFRILFxyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICd2YWx1ZVRleHQnIClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBAcHVibGljIHtBcnJvd05vZGV9IC0gYXJyb3cgbm9kZSB1c2VkIHRvIGluZGljYXRlIHdoZW4gdGhlIHZhbHVlIGhhcyBnb25lIGJleW9uZCB0aGUgc2NhbGUgb2YgdGhpcyBtZXRlclxyXG4gICAgdGhpcy5hcnJvd05vZGUgPSBuZXcgQXJyb3dOb2RlKCAwLCAwLCB0aGlzLmJhck5vZGUuYmFyU2l6ZS5oZWlnaHQgKyAyLCAwLCB7XHJcbiAgICAgIGZpbGw6IGJhckNvbG9yLFxyXG4gICAgICBoZWFkV2lkdGg6IHRoaXMuYmFyTm9kZS5iYXJTaXplLmhlaWdodCArIDUsXHJcbiAgICAgIHRhaWxXaWR0aDogMTIsXHJcbiAgICAgIHN0cm9rZTogJ2JsYWNrJyxcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnYXJyb3dOb2RlJyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5heGlzTGluZS5jaGlsZHJlbiA9IFsgdGhpcy52YWx1ZVRleHQsIHRoaXMuYmFyTm9kZSwgdGhpcy5hcnJvd05vZGUgXTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMuYXhpc0xpbmUgKTtcclxuXHJcbiAgICAvLyBvYnNlcnZlcnNcclxuICAgIG1ldGVyLnZhbHVlUHJvcGVydHkubGluayggdmFsdWUgPT4ge1xyXG4gICAgICB0aGlzLnNldFZhbHVlKCB2YWx1ZSApO1xyXG4gICAgICB0aGlzLnVwZGF0ZUFycm93KCk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gdmlzaWJpbGl0eVxyXG4gICAgbWV0ZXIudmlzaWJsZVByb3BlcnR5LmxpbmsoIHZpc2libGUgPT4ge1xyXG4gICAgICB0aGlzLnZpc2libGUgPSB2aXNpYmxlO1xyXG4gICAgfSApO1xyXG5cclxuICAgIHRoaXMudXBkYXRlTGF5b3V0KCk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0cyB0aGUgY29sb3IgdXNlZCB0byBmaWxsIHRoZSBiYXIgYW5kIHRoZSBvdmVybG9hZCBpbmRpY2F0b3IgYXJyb3cuXHJcbiAgICogQHB1YmxpY1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvbG9yXHJcbiAgICovXHJcbiAgc2V0QmFyQ29sb3IoIGNvbG9yICkge1xyXG4gICAgdGhpcy5iYXJOb2RlLmZpbGwgPSBjb2xvcjtcclxuICAgIHRoaXMuYXJyb3dOb2RlLmZpbGwgPSBjb2xvcjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIHZhbHVlIGRpc3BsYXllZCBieSB0aGUgbWV0ZXIuXHJcbiAgICogVXBkYXRlcyB0aGUgYmFyIGFuZCB0aGUgdmFsdWUgYmVsb3cgdGhlIG1ldGVyLlxyXG4gICAqIEBwdWJsaWNcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxyXG4gICAqL1xyXG4gIHNldFZhbHVlKCB2YWx1ZSApIHtcclxuXHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCB2YWx1ZSA+PSAwLCBgdmFsdWUgbXVzdCBiZSA+PSAwIDogJHt2YWx1ZX1gICk7XHJcblxyXG4gICAgaWYgKCB2YWx1ZSAhPT0gdGhpcy52YWx1ZSApIHtcclxuXHJcbiAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuXHJcbiAgICAgIC8vIHVwZGF0ZSBjb21wb25lbnRzXHJcbiAgICAgIHRoaXMuYmFyTm9kZS5zZXRWYWx1ZSggdmFsdWUgKTtcclxuXHJcbiAgICAgIC8vIGFsbCBtZXRlcnMgcmVhZCBpbiBwaWNvIHVuaXRzLCBjb21wZW5zYXRlIGJ5IG11bHRpcGx5aW5nIGJ5IDEwXjEyXHJcbiAgICAgIGNvbnN0IG1ldGVyVmFsdWUgPSBVdGlscy50b0ZpeGVkKCBNYXRoLnBvdyggMTAsIDEyICkgKiB2YWx1ZSwgMiApO1xyXG4gICAgICBjb25zdCB1bml0c0Zvcm1hdFN0cmluZyA9IFN0cmluZ1V0aWxzLmZpbGxJbiggdGhpcy51bml0c1BhdHRlcm4sIHsgdmFsdWU6IG1ldGVyVmFsdWUgfSApO1xyXG4gICAgICB0aGlzLnZhbHVlVGV4dC5zZXRTdHJpbmcoIHVuaXRzRm9ybWF0U3RyaW5nICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBVcGRhdGUgdGhlIG92ZXJsb2FkIGluZGljYXRvciBhcnJvdyB2aXNpYmlsaXR5IGFuZCBwb3NpdGlvbi5cclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIHVwZGF0ZUFycm93KCkge1xyXG4gICAgLy8gdXBkYXRlIHBvc2l0aW9uXHJcbiAgICB0aGlzLmFycm93Tm9kZS5sZWZ0ID0gdGhpcy5iYXJOb2RlLnJpZ2h0ICsgVkFMVUVfTUVURVJfU1BBQ0lORztcclxuXHJcbiAgICAvLyB1cGRhdGUgdmlzaWJpbGl0eVxyXG4gICAgdGhpcy5hcnJvd05vZGUudmlzaWJsZSA9IE1hdGguYWJzKCB0aGlzLm1ldGVyLnZhbHVlUHJvcGVydHkuZ2V0KCkgKSA+IHRoaXMubWF4VmFsdWU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBVcGRhdGUgdGhlIGxheW91dFxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgdXBkYXRlTGF5b3V0KCkge1xyXG4gICAgdGhpcy5iYXJOb2RlLmxlZnRDZW50ZXIgPSB0aGlzLmF4aXNMaW5lLmxlZnRDZW50ZXI7XHJcbiAgICB0aGlzLnZhbHVlVGV4dC5sZWZ0Q2VudGVyID0gdGhpcy5heGlzTGluZS5sZWZ0Q2VudGVyLm1pbnVzWFkoIFZBTFVFX01BWF9XSURUSCwgMCApO1xyXG4gIH1cclxufVxyXG5cclxuY2FwYWNpdG9yTGFiQmFzaWNzLnJlZ2lzdGVyKCAnQmFyTWV0ZXJOb2RlJywgQmFyTWV0ZXJOb2RlICk7XHJcblxyXG5leHBvcnQgZGVm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