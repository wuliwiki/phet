// Copyright 2015-2022, University of Colorado Boulder

/**
 * Arrow and electron that indicates the direction of current flow. Visibility of this node is handled via its
 * transparency. The node appears while current is flowing. When current stops flowing, the node fades out over a
 * period of time.
 *
 * By default, the arrow points to the left. Origin is at the geometric center, so that this node can be easily rotated
 * when current changes direction.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 * @author Jesse Greenberg (PhET Interactive Simulations)
 * @author Andrew Adare (PhET Interactive Simulations)
 */

import Multilink from '../../../../axon/js/Multilink.js';
import Dimension2 from '../../../../dot/js/Dimension2.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import ArrowNode from '../../../../scenery-phet/js/ArrowNode.js';
import MinusNode from '../../../../scenery-phet/js/MinusNode.js';
import PhetColorScheme from '../../../../scenery-phet/js/PhetColorScheme.js';
import PlusNode from '../../../../scenery-phet/js/PlusNode.js';
import ShadedSphereNode from '../../../../scenery-phet/js/ShadedSphereNode.js';
import { Color, Node } from '../../../../scenery/js/imports.js';
import Animation from '../../../../twixt/js/Animation.js';
import Easing from '../../../../twixt/js/Easing.js';
import capacitorLabBasics from '../../capacitorLabBasics.js';

// constants
// arrow properties
const ARROW_LENGTH = 88;
const ARROW_HEAD_WIDTH = 30;
const ARROW_HEAD_HEIGHT = 25;
const ARROW_TAIL_WIDTH = 0.4 * ARROW_HEAD_WIDTH;
const ARROW_TIP_POSITION = new Vector2(0, 0); // origin at the tip
const ARROW_TAIL_POSITION = new Vector2(ARROW_LENGTH, 0);

// electron properties
const CHARGE_DIAMETER = 0.8 * ARROW_TAIL_WIDTH;
const ELECTRON_LINE_WIDTH = 1;
const CHARGE_STROKE_COLOR = 'black';
const CHARGE_SYMBOL_COLOR = 'black';
const CHARGE_SYMBOL_SIZE = new Dimension2(0.6 * CHARGE_DIAMETER, 0.1 * CHARGE_DIAMETER);
class CurrentIndicatorNode extends Node {
  /**
   * Rotation angles should be set such that +dV/dt indicates current flow towards the positive terminal
   * of the battery.
   *
   * @param {Property.<number>} currentAmplitudeProperty
   * @param {number} startingOrientation
   * @param {NumberProperty.<number>} positiveOrientationProperty
   * @param {Property.<Color>} colorProperty
   * @param {Emitter} stepEmitter
   * @param {Tandem} tandem
   */
  constructor(currentAmplitudeProperty, startingOrientation, positiveOrientationProperty, colorProperty, stepEmitter, tandem) {
    super({
      opacity: 0
    });

    // @private {Emitter}
    this.stepEmitter = stepEmitter;
    this.stepEmitter.addListener(dt => {
      this.animation && this.animation.step(dt);
    });
    const arrowNode = new ArrowNode(ARROW_TAIL_POSITION.x, ARROW_TAIL_POSITION.y, ARROW_TIP_POSITION.x, ARROW_TIP_POSITION.y, {
      headHeight: ARROW_HEAD_HEIGHT,
      headWidth: ARROW_HEAD_WIDTH,
      tailWidth: ARROW_TAIL_WIDTH,
      fill: colorProperty,
      tandem: tandem.createTandem('arrowNode')
    });
    this.addChild(arrowNode);
    const electronNode = new ShadedSphereNode(CHARGE_DIAMETER, {
      fill: colorProperty,
      stroke: CHARGE_STROKE_COLOR,
      lineWidth: ELECTRON_LINE_WIDTH,
      mainColor: colorProperty,
      highlightXOffset: 0,
      highlightYOffset: 0
    });
    this.addChild(electronNode);
    const protonNode = new ShadedSphereNode(CHARGE_DIAMETER, {
      fill: new Color(PhetColorScheme.RED_COLORBLIND),
      stroke: CHARGE_STROKE_COLOR,
      lineWidth: ELECTRON_LINE_WIDTH,
      mainColor: new Color(PhetColorScheme.RED_COLORBLIND),
      highlightXOffset: 0,
      highlightYOffset: 0,
      visible: !electronNode.visible
    });
    this.addChild(protonNode);

    // Use scenery-phet's minus node because Text("-") can't be accurately centered.
    const minusNode = new MinusNode({
      size: CHARGE_SYMBOL_SIZE,
      fill: CHARGE_SYMBOL_COLOR
    });
    this.addChild(minusNode);

    // Use scenery-phet's plus node because Text("+") can't be accurately centered.
    const plusNode = new PlusNode({
      size: CHARGE_SYMBOL_SIZE,
      fill: CHARGE_SYMBOL_COLOR,
      visible: !minusNode.visible
    });
    this.addChild(plusNode);

    // layout
    let x = -arrowNode.bounds.width / 2;
    let y = 0;
    arrowNode.translate(x, y);
    x = arrowNode.bounds.maxX - 0.6 * (arrowNode.bounds.width - ARROW_HEAD_HEIGHT);
    y = arrowNode.bounds.centerY;
    electronNode.translate(x, y);
    minusNode.center = electronNode.center;
    protonNode.center = electronNode.center;
    plusNode.center = electronNode.center;

    // @private {Animation|null} animation that will fade out the node
    this.animation = null;
    currentAmplitudeProperty.lazyLink(() => {
      // only start this animation if the current indicator is visible
      if (this.isVisible()) {
        this.startAnimation();
      }
    });
    let lastNonzeroAmplitude = 0;

    // observe current to determine rotation and opacity
    Multilink.lazyMultilink([currentAmplitudeProperty, positiveOrientationProperty], (currentAmplitude, positiveOrientation) => {
      if (currentAmplitude !== 0) {
        lastNonzeroAmplitude = currentAmplitude;
      }

      // update the orientation of the indicator
      if (lastNonzeroAmplitude > 0) {
        this.rotation = startingOrientation + positiveOrientation;
      } else if (lastNonzeroAmplitude < 0) {
        this.rotation = startingOrientation + positiveOrientation + Math.PI;
      }

      // Electron/Proton visibility dependent on orientation of current.
      const chargeVisible = positiveOrientation === 0;
      electronNode.visible = chargeVisible;
      minusNode.visible = chargeVisible;
      protonNode.visible = !chargeVisible;
      plusNode.visible = !chargeVisible;
    });
  }

  /**
   * Start the animation, canceling the animation if it is in progress
   * @public
   */
  startAnimation() {
    const self = this;
    this.stopAnimation();

    // show symbol and gradually fade out by modulating opacity
    this.animation = new Animation({
      stepEmitter: null,
      // animation is controlled by the global phet-core timer
      duration: 1.5,
      // seconds
      easing: Easing.QUARTIC_IN,
      object: this,
      attribute: 'opacity',
      from: 0.75,
      to: 0
    });
    this.animation.endedEmitter.addListener(function endedListener() {
      self.opacity = 0; // in case it was stopped prematurely
      self.animation.endedEmitter.removeListener(endedListener);
      self.animation = null;
    });
    this.animation.start();
  }

  /**
   * Stops the animation
   * @public
   */
  stopAnimation() {
    // stop animation if it's already running
    this.animation && this.animation.stop();
    this.opacity = 0;
  }

  /**
   * Hook for changing visibility that can also handle canceling the animation when necessary (since OpacityTo changes visibility).
   * @public
   *
   * @param {boolean} visible
   */
  adjustVisibility(visible) {
    if (this.visible && !visible) {
      this.stopAnimation();
    }
    this.visible = visible;
  }
}
capacitorLabBasics.register('CurrentIndicatorNode', CurrentIndicatorNode);
export default CurrentIndicatorNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNdWx0aWxpbmsiLCJEaW1lbnNpb24yIiwiVmVjdG9yMiIsIkFycm93Tm9kZSIsIk1pbnVzTm9kZSIsIlBoZXRDb2xvclNjaGVtZSIsIlBsdXNOb2RlIiwiU2hhZGVkU3BoZXJlTm9kZSIsIkNvbG9yIiwiTm9kZSIsIkFuaW1hdGlvbiIsIkVhc2luZyIsImNhcGFjaXRvckxhYkJhc2ljcyIsIkFSUk9XX0xFTkdUSCIsIkFSUk9XX0hFQURfV0lEVEgiLCJBUlJPV19IRUFEX0hFSUdIVCIsIkFSUk9XX1RBSUxfV0lEVEgiLCJBUlJPV19USVBfUE9TSVRJT04iLCJBUlJPV19UQUlMX1BPU0lUSU9OIiwiQ0hBUkdFX0RJQU1FVEVSIiwiRUxFQ1RST05fTElORV9XSURUSCIsIkNIQVJHRV9TVFJPS0VfQ09MT1IiLCJDSEFSR0VfU1lNQk9MX0NPTE9SIiwiQ0hBUkdFX1NZTUJPTF9TSVpFIiwiQ3VycmVudEluZGljYXRvck5vZGUiLCJjb25zdHJ1Y3RvciIsImN1cnJlbnRBbXBsaXR1ZGVQcm9wZXJ0eSIsInN0YXJ0aW5nT3JpZW50YXRpb24iLCJwb3NpdGl2ZU9yaWVudGF0aW9uUHJvcGVydHkiLCJjb2xvclByb3BlcnR5Iiwic3RlcEVtaXR0ZXIiLCJ0YW5kZW0iLCJvcGFjaXR5IiwiYWRkTGlzdGVuZXIiLCJkdCIsImFuaW1hdGlvbiIsInN0ZXAiLCJhcnJvd05vZGUiLCJ4IiwieSIsImhlYWRIZWlnaHQiLCJoZWFkV2lkdGgiLCJ0YWlsV2lkdGgiLCJmaWxsIiwiY3JlYXRlVGFuZGVtIiwiYWRkQ2hpbGQiLCJlbGVjdHJvbk5vZGUiLCJzdHJva2UiLCJsaW5lV2lkdGgiLCJtYWluQ29sb3IiLCJoaWdobGlnaHRYT2Zmc2V0IiwiaGlnaGxpZ2h0WU9mZnNldCIsInByb3Rvbk5vZGUiLCJSRURfQ09MT1JCTElORCIsInZpc2libGUiLCJtaW51c05vZGUiLCJzaXplIiwicGx1c05vZGUiLCJib3VuZHMiLCJ3aWR0aCIsInRyYW5zbGF0ZSIsIm1heFgiLCJjZW50ZXJZIiwiY2VudGVyIiwibGF6eUxpbmsiLCJpc1Zpc2libGUiLCJzdGFydEFuaW1hdGlvbiIsImxhc3ROb256ZXJvQW1wbGl0dWRlIiwibGF6eU11bHRpbGluayIsImN1cnJlbnRBbXBsaXR1ZGUiLCJwb3NpdGl2ZU9yaWVudGF0aW9uIiwicm90YXRpb24iLCJNYXRoIiwiUEkiLCJjaGFyZ2VWaXNpYmxlIiwic2VsZiIsInN0b3BBbmltYXRpb24iLCJkdXJhdGlvbiIsImVhc2luZyIsIlFVQVJUSUNfSU4iLCJvYmplY3QiLCJhdHRyaWJ1dGUiLCJmcm9tIiwidG8iLCJlbmRlZEVtaXR0ZXIiLCJlbmRlZExpc3RlbmVyIiwicmVtb3ZlTGlzdGVuZXIiLCJzdGFydCIsInN0b3AiLCJhZGp1c3RWaXNpYmlsaXR5IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJDdXJyZW50SW5kaWNhdG9yTm9kZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNS0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBBcnJvdyBhbmQgZWxlY3Ryb24gdGhhdCBpbmRpY2F0ZXMgdGhlIGRpcmVjdGlvbiBvZiBjdXJyZW50IGZsb3cuIFZpc2liaWxpdHkgb2YgdGhpcyBub2RlIGlzIGhhbmRsZWQgdmlhIGl0c1xyXG4gKiB0cmFuc3BhcmVuY3kuIFRoZSBub2RlIGFwcGVhcnMgd2hpbGUgY3VycmVudCBpcyBmbG93aW5nLiBXaGVuIGN1cnJlbnQgc3RvcHMgZmxvd2luZywgdGhlIG5vZGUgZmFkZXMgb3V0IG92ZXIgYVxyXG4gKiBwZXJpb2Qgb2YgdGltZS5cclxuICpcclxuICogQnkgZGVmYXVsdCwgdGhlIGFycm93IHBvaW50cyB0byB0aGUgbGVmdC4gT3JpZ2luIGlzIGF0IHRoZSBnZW9tZXRyaWMgY2VudGVyLCBzbyB0aGF0IHRoaXMgbm9kZSBjYW4gYmUgZWFzaWx5IHJvdGF0ZWRcclxuICogd2hlbiBjdXJyZW50IGNoYW5nZXMgZGlyZWN0aW9uLlxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKiBAYXV0aG9yIEplc3NlIEdyZWVuYmVyZyAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICogQGF1dGhvciBBbmRyZXcgQWRhcmUgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IE11bHRpbGluayBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL011bHRpbGluay5qcyc7XHJcbmltcG9ydCBEaW1lbnNpb24yIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9EaW1lbnNpb24yLmpzJztcclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgQXJyb3dOb2RlIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9BcnJvd05vZGUuanMnO1xyXG5pbXBvcnQgTWludXNOb2RlIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9NaW51c05vZGUuanMnO1xyXG5pbXBvcnQgUGhldENvbG9yU2NoZW1lIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9QaGV0Q29sb3JTY2hlbWUuanMnO1xyXG5pbXBvcnQgUGx1c05vZGUgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1BsdXNOb2RlLmpzJztcclxuaW1wb3J0IFNoYWRlZFNwaGVyZU5vZGUgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1NoYWRlZFNwaGVyZU5vZGUuanMnO1xyXG5pbXBvcnQgeyBDb2xvciwgTm9kZSB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBBbmltYXRpb24gZnJvbSAnLi4vLi4vLi4vLi4vdHdpeHQvanMvQW5pbWF0aW9uLmpzJztcclxuaW1wb3J0IEVhc2luZyBmcm9tICcuLi8uLi8uLi8uLi90d2l4dC9qcy9FYXNpbmcuanMnO1xyXG5pbXBvcnQgY2FwYWNpdG9yTGFiQmFzaWNzIGZyb20gJy4uLy4uL2NhcGFjaXRvckxhYkJhc2ljcy5qcyc7XHJcblxyXG4vLyBjb25zdGFudHNcclxuLy8gYXJyb3cgcHJvcGVydGllc1xyXG5jb25zdCBBUlJPV19MRU5HVEggPSA4ODtcclxuY29uc3QgQVJST1dfSEVBRF9XSURUSCA9IDMwO1xyXG5jb25zdCBBUlJPV19IRUFEX0hFSUdIVCA9IDI1O1xyXG5jb25zdCBBUlJPV19UQUlMX1dJRFRIID0gMC40ICogQVJST1dfSEVBRF9XSURUSDtcclxuY29uc3QgQVJST1dfVElQX1BPU0lUSU9OID0gbmV3IFZlY3RvcjIoIDAsIDAgKTsgLy8gb3JpZ2luIGF0IHRoZSB0aXBcclxuY29uc3QgQVJST1dfVEFJTF9QT1NJVElPTiA9IG5ldyBWZWN0b3IyKCBBUlJPV19MRU5HVEgsIDAgKTtcclxuXHJcbi8vIGVsZWN0cm9uIHByb3BlcnRpZXNcclxuY29uc3QgQ0hBUkdFX0RJQU1FVEVSID0gMC44ICogQVJST1dfVEFJTF9XSURUSDtcclxuY29uc3QgRUxFQ1RST05fTElORV9XSURUSCA9IDE7XHJcbmNvbnN0IENIQVJHRV9TVFJPS0VfQ09MT1IgPSAnYmxhY2snO1xyXG5jb25zdCBDSEFSR0VfU1lNQk9MX0NPTE9SID0gJ2JsYWNrJztcclxuY29uc3QgQ0hBUkdFX1NZTUJPTF9TSVpFID0gbmV3IERpbWVuc2lvbjIoIDAuNiAqIENIQVJHRV9ESUFNRVRFUiwgMC4xICogQ0hBUkdFX0RJQU1FVEVSICk7XHJcblxyXG5jbGFzcyBDdXJyZW50SW5kaWNhdG9yTm9kZSBleHRlbmRzIE5vZGUge1xyXG4gIC8qKlxyXG4gICAqIFJvdGF0aW9uIGFuZ2xlcyBzaG91bGQgYmUgc2V0IHN1Y2ggdGhhdCArZFYvZHQgaW5kaWNhdGVzIGN1cnJlbnQgZmxvdyB0b3dhcmRzIHRoZSBwb3NpdGl2ZSB0ZXJtaW5hbFxyXG4gICAqIG9mIHRoZSBiYXR0ZXJ5LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtQcm9wZXJ0eS48bnVtYmVyPn0gY3VycmVudEFtcGxpdHVkZVByb3BlcnR5XHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0aW5nT3JpZW50YXRpb25cclxuICAgKiBAcGFyYW0ge051bWJlclByb3BlcnR5LjxudW1iZXI+fSBwb3NpdGl2ZU9yaWVudGF0aW9uUHJvcGVydHlcclxuICAgKiBAcGFyYW0ge1Byb3BlcnR5LjxDb2xvcj59IGNvbG9yUHJvcGVydHlcclxuICAgKiBAcGFyYW0ge0VtaXR0ZXJ9IHN0ZXBFbWl0dGVyXHJcbiAgICogQHBhcmFtIHtUYW5kZW19IHRhbmRlbVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBjdXJyZW50QW1wbGl0dWRlUHJvcGVydHksIHN0YXJ0aW5nT3JpZW50YXRpb24sIHBvc2l0aXZlT3JpZW50YXRpb25Qcm9wZXJ0eSwgY29sb3JQcm9wZXJ0eSwgc3RlcEVtaXR0ZXIsIHRhbmRlbSApIHtcclxuXHJcbiAgICBzdXBlciggeyBvcGFjaXR5OiAwIH0gKTtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZSB7RW1pdHRlcn1cclxuICAgIHRoaXMuc3RlcEVtaXR0ZXIgPSBzdGVwRW1pdHRlcjtcclxuXHJcbiAgICB0aGlzLnN0ZXBFbWl0dGVyLmFkZExpc3RlbmVyKCBkdCA9PiB7XHJcbiAgICAgIHRoaXMuYW5pbWF0aW9uICYmIHRoaXMuYW5pbWF0aW9uLnN0ZXAoIGR0ICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgYXJyb3dOb2RlID0gbmV3IEFycm93Tm9kZSggQVJST1dfVEFJTF9QT1NJVElPTi54LCBBUlJPV19UQUlMX1BPU0lUSU9OLnksIEFSUk9XX1RJUF9QT1NJVElPTi54LCBBUlJPV19USVBfUE9TSVRJT04ueSwge1xyXG4gICAgICBoZWFkSGVpZ2h0OiBBUlJPV19IRUFEX0hFSUdIVCxcclxuICAgICAgaGVhZFdpZHRoOiBBUlJPV19IRUFEX1dJRFRILFxyXG4gICAgICB0YWlsV2lkdGg6IEFSUk9XX1RBSUxfV0lEVEgsXHJcbiAgICAgIGZpbGw6IGNvbG9yUHJvcGVydHksXHJcbiAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2Fycm93Tm9kZScgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIHRoaXMuYWRkQ2hpbGQoIGFycm93Tm9kZSApO1xyXG5cclxuICAgIGNvbnN0IGVsZWN0cm9uTm9kZSA9IG5ldyBTaGFkZWRTcGhlcmVOb2RlKCBDSEFSR0VfRElBTUVURVIsIHtcclxuICAgICAgZmlsbDogY29sb3JQcm9wZXJ0eSxcclxuICAgICAgc3Ryb2tlOiBDSEFSR0VfU1RST0tFX0NPTE9SLFxyXG4gICAgICBsaW5lV2lkdGg6IEVMRUNUUk9OX0xJTkVfV0lEVEgsXHJcbiAgICAgIG1haW5Db2xvcjogY29sb3JQcm9wZXJ0eSxcclxuICAgICAgaGlnaGxpZ2h0WE9mZnNldDogMCxcclxuICAgICAgaGlnaGxpZ2h0WU9mZnNldDogMFxyXG4gICAgfSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggZWxlY3Ryb25Ob2RlICk7XHJcblxyXG4gICAgY29uc3QgcHJvdG9uTm9kZSA9IG5ldyBTaGFkZWRTcGhlcmVOb2RlKCBDSEFSR0VfRElBTUVURVIsIHtcclxuICAgICAgZmlsbDogbmV3IENvbG9yKCBQaGV0Q29sb3JTY2hlbWUuUkVEX0NPTE9SQkxJTkQgKSxcclxuICAgICAgc3Ryb2tlOiBDSEFSR0VfU1RST0tFX0NPTE9SLFxyXG4gICAgICBsaW5lV2lkdGg6IEVMRUNUUk9OX0xJTkVfV0lEVEgsXHJcbiAgICAgIG1haW5Db2xvcjogbmV3IENvbG9yKCBQaGV0Q29sb3JTY2hlbWUuUkVEX0NPTE9SQkxJTkQgKSxcclxuICAgICAgaGlnaGxpZ2h0WE9mZnNldDogMCxcclxuICAgICAgaGlnaGxpZ2h0WU9mZnNldDogMCxcclxuICAgICAgdmlzaWJsZTogIWVsZWN0cm9uTm9kZS52aXNpYmxlXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBwcm90b25Ob2RlICk7XHJcblxyXG5cclxuICAgIC8vIFVzZSBzY2VuZXJ5LXBoZXQncyBtaW51cyBub2RlIGJlY2F1c2UgVGV4dChcIi1cIikgY2FuJ3QgYmUgYWNjdXJhdGVseSBjZW50ZXJlZC5cclxuICAgIGNvbnN0IG1pbnVzTm9kZSA9IG5ldyBNaW51c05vZGUoIHtcclxuICAgICAgc2l6ZTogQ0hBUkdFX1NZTUJPTF9TSVpFLFxyXG4gICAgICBmaWxsOiBDSEFSR0VfU1lNQk9MX0NPTE9SXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBtaW51c05vZGUgKTtcclxuXHJcbiAgICAvLyBVc2Ugc2NlbmVyeS1waGV0J3MgcGx1cyBub2RlIGJlY2F1c2UgVGV4dChcIitcIikgY2FuJ3QgYmUgYWNjdXJhdGVseSBjZW50ZXJlZC5cclxuICAgIGNvbnN0IHBsdXNOb2RlID0gbmV3IFBsdXNOb2RlKCB7XHJcbiAgICAgIHNpemU6IENIQVJHRV9TWU1CT0xfU0laRSxcclxuICAgICAgZmlsbDogQ0hBUkdFX1NZTUJPTF9DT0xPUixcclxuICAgICAgdmlzaWJsZTogIW1pbnVzTm9kZS52aXNpYmxlXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBwbHVzTm9kZSApO1xyXG5cclxuICAgIC8vIGxheW91dFxyXG4gICAgbGV0IHggPSAtYXJyb3dOb2RlLmJvdW5kcy53aWR0aCAvIDI7XHJcbiAgICBsZXQgeSA9IDA7XHJcbiAgICBhcnJvd05vZGUudHJhbnNsYXRlKCB4LCB5ICk7XHJcbiAgICB4ID0gYXJyb3dOb2RlLmJvdW5kcy5tYXhYIC0gKCAwLjYgKiAoIGFycm93Tm9kZS5ib3VuZHMud2lkdGggLSBBUlJPV19IRUFEX0hFSUdIVCApICk7XHJcbiAgICB5ID0gYXJyb3dOb2RlLmJvdW5kcy5jZW50ZXJZO1xyXG4gICAgZWxlY3Ryb25Ob2RlLnRyYW5zbGF0ZSggeCwgeSApO1xyXG4gICAgbWludXNOb2RlLmNlbnRlciA9IGVsZWN0cm9uTm9kZS5jZW50ZXI7XHJcbiAgICBwcm90b25Ob2RlLmNlbnRlciA9IGVsZWN0cm9uTm9kZS5jZW50ZXI7XHJcbiAgICBwbHVzTm9kZS5jZW50ZXIgPSBlbGVjdHJvbk5vZGUuY2VudGVyO1xyXG5cclxuICAgIC8vIEBwcml2YXRlIHtBbmltYXRpb258bnVsbH0gYW5pbWF0aW9uIHRoYXQgd2lsbCBmYWRlIG91dCB0aGUgbm9kZVxyXG4gICAgdGhpcy5hbmltYXRpb24gPSBudWxsO1xyXG5cclxuICAgIGN1cnJlbnRBbXBsaXR1ZGVQcm9wZXJ0eS5sYXp5TGluayggKCkgPT4ge1xyXG4gICAgICAvLyBvbmx5IHN0YXJ0IHRoaXMgYW5pbWF0aW9uIGlmIHRoZSBjdXJyZW50IGluZGljYXRvciBpcyB2aXNpYmxlXHJcbiAgICAgIGlmICggdGhpcy5pc1Zpc2libGUoKSApIHtcclxuICAgICAgICB0aGlzLnN0YXJ0QW5pbWF0aW9uKCk7XHJcbiAgICAgIH1cclxuICAgIH0gKTtcclxuXHJcbiAgICBsZXQgbGFzdE5vbnplcm9BbXBsaXR1ZGUgPSAwO1xyXG5cclxuICAgIC8vIG9ic2VydmUgY3VycmVudCB0byBkZXRlcm1pbmUgcm90YXRpb24gYW5kIG9wYWNpdHlcclxuICAgIE11bHRpbGluay5sYXp5TXVsdGlsaW5rKCBbIGN1cnJlbnRBbXBsaXR1ZGVQcm9wZXJ0eSwgcG9zaXRpdmVPcmllbnRhdGlvblByb3BlcnR5IF0sICggY3VycmVudEFtcGxpdHVkZSwgcG9zaXRpdmVPcmllbnRhdGlvbiApID0+IHtcclxuXHJcbiAgICAgIGlmICggY3VycmVudEFtcGxpdHVkZSAhPT0gMCApIHtcclxuICAgICAgICBsYXN0Tm9uemVyb0FtcGxpdHVkZSA9IGN1cnJlbnRBbXBsaXR1ZGU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIHVwZGF0ZSB0aGUgb3JpZW50YXRpb24gb2YgdGhlIGluZGljYXRvclxyXG4gICAgICBpZiAoIGxhc3ROb256ZXJvQW1wbGl0dWRlID4gMCApIHtcclxuICAgICAgICB0aGlzLnJvdGF0aW9uID0gc3RhcnRpbmdPcmllbnRhdGlvbiArIHBvc2l0aXZlT3JpZW50YXRpb247XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAoIGxhc3ROb256ZXJvQW1wbGl0dWRlIDwgMCApIHtcclxuICAgICAgICB0aGlzLnJvdGF0aW9uID0gc3RhcnRpbmdPcmllbnRhdGlvbiArIHBvc2l0aXZlT3JpZW50YXRpb24gKyBNYXRoLlBJO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBFbGVjdHJvbi9Qcm90b24gdmlzaWJpbGl0eSBkZXBlbmRlbnQgb24gb3JpZW50YXRpb24gb2YgY3VycmVudC5cclxuICAgICAgY29uc3QgY2hhcmdlVmlzaWJsZSA9IHBvc2l0aXZlT3JpZW50YXRpb24gPT09IDA7XHJcbiAgICAgIGVsZWN0cm9uTm9kZS52aXNpYmxlID0gY2hhcmdlVmlzaWJsZTtcclxuICAgICAgbWludXNOb2RlLnZpc2libGUgPSBjaGFyZ2VWaXNpYmxlO1xyXG4gICAgICBwcm90b25Ob2RlLnZpc2libGUgPSAhY2hhcmdlVmlzaWJsZTtcclxuICAgICAgcGx1c05vZGUudmlzaWJsZSA9ICFjaGFyZ2VWaXNpYmxlO1xyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU3RhcnQgdGhlIGFuaW1hdGlvbiwgY2FuY2VsaW5nIHRoZSBhbmltYXRpb24gaWYgaXQgaXMgaW4gcHJvZ3Jlc3NcclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgc3RhcnRBbmltYXRpb24oKSB7XHJcbiAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgIHRoaXMuc3RvcEFuaW1hdGlvbigpO1xyXG5cclxuICAgIC8vIHNob3cgc3ltYm9sIGFuZCBncmFkdWFsbHkgZmFkZSBvdXQgYnkgbW9kdWxhdGluZyBvcGFjaXR5XHJcbiAgICB0aGlzLmFuaW1hdGlvbiA9IG5ldyBBbmltYXRpb24oIHtcclxuICAgICAgc3RlcEVtaXR0ZXI6IG51bGwsIC8vIGFuaW1hdGlvbiBpcyBjb250cm9sbGVkIGJ5IHRoZSBnbG9iYWwgcGhldC1jb3JlIHRpbWVyXHJcbiAgICAgIGR1cmF0aW9uOiAxLjUsIC8vIHNlY29uZHNcclxuICAgICAgZWFzaW5nOiBFYXNpbmcuUVVBUlRJQ19JTixcclxuICAgICAgb2JqZWN0OiB0aGlzLFxyXG4gICAgICBhdHRyaWJ1dGU6ICdvcGFjaXR5JyxcclxuICAgICAgZnJvbTogMC43NSxcclxuICAgICAgdG86IDBcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLmFuaW1hdGlvbi5lbmRlZEVtaXR0ZXIuYWRkTGlzdGVuZXIoIGZ1bmN0aW9uIGVuZGVkTGlzdGVuZXIoKSB7XHJcbiAgICAgIHNlbGYub3BhY2l0eSA9IDA7IC8vIGluIGNhc2UgaXQgd2FzIHN0b3BwZWQgcHJlbWF0dXJlbHlcclxuICAgICAgc2VsZi5hbmltYXRpb24uZW5kZWRFbWl0dGVyLnJlbW92ZUxpc3RlbmVyKCBlbmRlZExpc3RlbmVyICk7XHJcbiAgICAgIHNlbGYuYW5pbWF0aW9uID0gbnVsbDtcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLmFuaW1hdGlvbi5zdGFydCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU3RvcHMgdGhlIGFuaW1hdGlvblxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBzdG9wQW5pbWF0aW9uKCkge1xyXG5cclxuICAgIC8vIHN0b3AgYW5pbWF0aW9uIGlmIGl0J3MgYWxyZWFkeSBydW5uaW5nXHJcbiAgICB0aGlzLmFuaW1hdGlvbiAmJiB0aGlzLmFuaW1hdGlvbi5zdG9wKCk7XHJcbiAgICB0aGlzLm9wYWNpdHkgPSAwO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSG9vayBmb3IgY2hhbmdpbmcgdmlzaWJpbGl0eSB0aGF0IGNhbiBhbHNvIGhhbmRsZSBjYW5jZWxpbmcgdGhlIGFuaW1hdGlvbiB3aGVuIG5lY2Vzc2FyeSAoc2luY2UgT3BhY2l0eVRvIGNoYW5nZXMgdmlzaWJpbGl0eSkuXHJcbiAgICogQHB1YmxpY1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSB2aXNpYmxlXHJcbiAgICovXHJcbiAgYWRqdXN0VmlzaWJpbGl0eSggdmlzaWJsZSApIHtcclxuICAgIGlmICggdGhpcy52aXNpYmxlICYmICF2aXNpYmxlICkge1xyXG4gICAgICB0aGlzLnN0b3BBbmltYXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnZpc2libGUgPSB2aXNpYmxlO1xyXG4gIH1cclxufVxyXG5cclxuY2FwYWNpdG9yTGFiQmFzaWNzLnJlZ2lzdGVyKCAnQ3VycmVudEluZGljYXRvck5vZGUnLCBDdXJyZW50SW5kaWNhdG9yTm9kZSApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ3VycmVudEluZGljYXRvck5vZGU7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFNBQVMsTUFBTSxrQ0FBa0M7QUFDeEQsT0FBT0MsVUFBVSxNQUFNLGtDQUFrQztBQUN6RCxPQUFPQyxPQUFPLE1BQU0sK0JBQStCO0FBQ25ELE9BQU9DLFNBQVMsTUFBTSwwQ0FBMEM7QUFDaEUsT0FBT0MsU0FBUyxNQUFNLDBDQUEwQztBQUNoRSxPQUFPQyxlQUFlLE1BQU0sZ0RBQWdEO0FBQzVFLE9BQU9DLFFBQVEsTUFBTSx5Q0FBeUM7QUFDOUQsT0FBT0MsZ0JBQWdCLE1BQU0saURBQWlEO0FBQzlFLFNBQVNDLEtBQUssRUFBRUMsSUFBSSxRQUFRLG1DQUFtQztBQUMvRCxPQUFPQyxTQUFTLE1BQU0sbUNBQW1DO0FBQ3pELE9BQU9DLE1BQU0sTUFBTSxnQ0FBZ0M7QUFDbkQsT0FBT0Msa0JBQWtCLE1BQU0sNkJBQTZCOztBQUU1RDtBQUNBO0FBQ0EsTUFBTUMsWUFBWSxHQUFHLEVBQUU7QUFDdkIsTUFBTUMsZ0JBQWdCLEdBQUcsRUFBRTtBQUMzQixNQUFNQyxpQkFBaUIsR0FBRyxFQUFFO0FBQzVCLE1BQU1DLGdCQUFnQixHQUFHLEdBQUcsR0FBR0YsZ0JBQWdCO0FBQy9DLE1BQU1HLGtCQUFrQixHQUFHLElBQUlmLE9BQU8sQ0FBRSxDQUFD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