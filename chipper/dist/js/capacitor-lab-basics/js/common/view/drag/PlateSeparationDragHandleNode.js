// Copyright 2015-2023, University of Colorado Boulder

/**
 * Drag handle for changing the plate separation.  Origin is at the end of the dashed line that is farthest from the
 * arrow. Attached to the top capacitor plate, in the center of the plate's top face.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 * @author Jesse Greenberg (PhET Interactive Simulations)
 */

import Vector2 from '../../../../../dot/js/Vector2.js';
import { Node } from '../../../../../scenery/js/imports.js';
import capacitorLabBasics from '../../../capacitorLabBasics.js';
import CapacitorLabBasicsStrings from '../../../CapacitorLabBasicsStrings.js';
import CLBConstants from '../../CLBConstants.js';
import UnitsUtils from '../../model/util/UnitsUtils.js';
import DragHandleArrowNode from './DragHandleArrowNode.js';
import DragHandleLineNode from './DragHandleLineNode.js';
import DragHandleValueNode from './DragHandleValueNode.js';
import PlateSeparationDragHandler from './PlateSeparationDragHandler.js';

// constants
// endpoints for vertical double-headed arrow
const ARROW_START_POSITION = new Vector2(0, 0);
const ARROW_END_POSITION = new Vector2(0, -CLBConstants.DRAG_HANDLE_ARROW_LENGTH);

// endpoints for vertical line
const LINE_LENGTH = 60;
const LINE_START_POSITION = new Vector2(0, 0);
const LINE_END_POSITION = new Vector2(0, -LINE_LENGTH);
const millimetersPatternString = CapacitorLabBasicsStrings.millimetersPattern;
const separationString = CapacitorLabBasicsStrings.separation;
class PlateSeparationDragHandleNode extends Node {
  /**
   * @param {Capacitor} capacitor
   * @param {YawPitchModelViewTransform3} modelViewTransform
   * @param {Range} valueRange
   * @param {Tandem} tandem
   */
  constructor(capacitor, modelViewTransform, valueRange, tandem) {
    super({
      tandem: tandem
    });

    // @private
    this.capacitor = capacitor;
    this.modelViewTransform = modelViewTransform;
    const dragHandler = new PlateSeparationDragHandler(capacitor, modelViewTransform, valueRange, tandem.createTandem('dragListener'));
    this.addInputListener(dragHandler);

    // arrow
    const arrowNode = new DragHandleArrowNode(ARROW_START_POSITION, ARROW_END_POSITION, dragHandler.isHighlightedProperty, tandem.createTandem('arrowNode'));
    this.cursor = 'pointer';

    // line
    const lineNode = new DragHandleLineNode(LINE_START_POSITION, LINE_END_POSITION);

    // value
    const millimeters = UnitsUtils.metersToMillimeters(capacitor.plateSeparationProperty.value);
    this.valueNode = new DragHandleValueNode(separationString, millimeters, millimetersPatternString, {
      tandem: tandem.createTandem('valueNode')
    });

    // Make text part of the draggable area
    this.valueNode.mouseArea = this.valueNode.bounds.dilated(0);
    this.valueNode.touchArea = this.valueNode.bounds.dilated(0);

    // rendering order
    this.addChild(lineNode);
    this.addChild(arrowNode);
    this.addChild(this.valueNode);

    // layout: arrow about line, horizontally centered
    let x = 0;
    let y = 0;
    lineNode.translation = new Vector2(x, y);
    x = 0;
    y = lineNode.bounds.minY - 2;
    arrowNode.translation = new Vector2(x, y);
    x = arrowNode.bounds.maxX + 5;
    y = arrowNode.bounds.minY - this.valueNode.bounds.height / 2 + 5;
    this.valueNode.translation = new Vector2(x, y);

    // update when related model properties change
    capacitor.plateSeparationProperty.link(() => {
      this.updateValueDisplay();
      this.updateOffset();
    });
    capacitor.plateSizeProperty.link(() => {
      this.updateOffset();
    });
  }

  /**
   * Synchronizes the value display with the model.
   * @public
   */
  updateValueDisplay() {
    const millimeters = UnitsUtils.metersToMillimeters(this.capacitor.plateSeparationProperty.value);
    this.valueNode.setValue(millimeters, 1); // One decimal place
  }

  /**
   * Attach drag handle to top capacitor plate, in center the plate's top face.
   * @public
   */
  updateOffset() {
    const width = this.capacitor.plateSizeProperty.value.width;
    const height = this.capacitor.plateSizeProperty.value.height;
    const x = this.capacitor.position.x + 0.3 * width;
    const y = this.capacitor.position.y - this.capacitor.plateSeparationProperty.value / 2 - height;
    const z = 0;
    this.translation = this.modelViewTransform.modelToViewXYZ(x, y, z);
  }
}
capacitorLabBasics.register('PlateSeparationDragHandleNode', PlateSeparationDragHandleNode);
export default PlateSeparationDragHandleNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWZWN0b3IyIiwiTm9kZSIsImNhcGFjaXRvckxhYkJhc2ljcyIsIkNhcGFjaXRvckxhYkJhc2ljc1N0cmluZ3MiLCJDTEJDb25zdGFudHMiLCJVbml0c1V0aWxzIiwiRHJhZ0hhbmRsZUFycm93Tm9kZSIsIkRyYWdIYW5kbGVMaW5lTm9kZSIsIkRyYWdIYW5kbGVWYWx1ZU5vZGUiLCJQbGF0ZVNlcGFyYXRpb25EcmFnSGFuZGxlciIsIkFSUk9XX1NUQVJUX1BPU0lUSU9OIiwiQVJST1dfRU5EX1BPU0lUSU9OIiwiRFJBR19IQU5ETEVfQVJST1dfTEVOR1RIIiwiTElORV9MRU5HVEgiLCJMSU5FX1NUQVJUX1BPU0lUSU9OIiwiTElORV9FTkRfUE9TSVRJT04iLCJtaWxsaW1ldGVyc1BhdHRlcm5TdHJpbmciLCJtaWxsaW1ldGVyc1BhdHRlcm4iLCJzZXBhcmF0aW9uU3RyaW5nIiwic2VwYXJhdGlvbiIsIlBsYXRlU2VwYXJhdGlvbkRyYWdIYW5kbGVOb2RlIiwiY29uc3RydWN0b3IiLCJjYXBhY2l0b3IiLCJtb2RlbFZpZXdUcmFuc2Zvcm0iLCJ2YWx1ZVJhbmdlIiwidGFuZGVtIiwiZHJhZ0hhbmRsZXIiLCJjcmVhdGVUYW5kZW0iLCJhZGRJbnB1dExpc3RlbmVyIiwiYXJyb3dOb2RlIiwiaXNIaWdobGlnaHRlZFByb3BlcnR5IiwiY3Vyc29yIiwibGluZU5vZGUiLCJtaWxsaW1ldGVycyIsIm1ldGVyc1RvTWlsbGltZXRlcnMiLCJwbGF0ZVNlcGFyYXRpb25Qcm9wZXJ0eSIsInZhbHVlIiwidmFsdWVOb2RlIiwibW91c2VBcmVhIiwiYm91bmRzIiwiZGlsYXRlZCIsInRvdWNoQXJlYSIsImFkZENoaWxkIiwieCIsInkiLCJ0cmFuc2xhdGlvbiIsIm1pblkiLCJtYXhYIiwiaGVpZ2h0IiwibGluayIsInVwZGF0ZVZhbHVlRGlzcGxheSIsInVwZGF0ZU9mZnNldCIsInBsYXRlU2l6ZVByb3BlcnR5Iiwic2V0VmFsdWUiLCJ3aWR0aCIsInBvc2l0aW9uIiwieiIsIm1vZGVsVG9WaWV3WFlaIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJQbGF0ZVNlcGFyYXRpb25EcmFnSGFuZGxlTm9kZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNS0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBEcmFnIGhhbmRsZSBmb3IgY2hhbmdpbmcgdGhlIHBsYXRlIHNlcGFyYXRpb24uICBPcmlnaW4gaXMgYXQgdGhlIGVuZCBvZiB0aGUgZGFzaGVkIGxpbmUgdGhhdCBpcyBmYXJ0aGVzdCBmcm9tIHRoZVxyXG4gKiBhcnJvdy4gQXR0YWNoZWQgdG8gdGhlIHRvcCBjYXBhY2l0b3IgcGxhdGUsIGluIHRoZSBjZW50ZXIgb2YgdGhlIHBsYXRlJ3MgdG9wIGZhY2UuXHJcbiAqXHJcbiAqIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXHJcbiAqIEBhdXRob3IgSmVzc2UgR3JlZW5iZXJnIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxyXG4gKi9cclxuXHJcbmltcG9ydCBWZWN0b3IyIGZyb20gJy4uLy4uLy4uLy4uLy4uL2RvdC9qcy9WZWN0b3IyLmpzJztcclxuaW1wb3J0IHsgTm9kZSB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBjYXBhY2l0b3JMYWJCYXNpY3MgZnJvbSAnLi4vLi4vLi4vY2FwYWNpdG9yTGFiQmFzaWNzLmpzJztcclxuaW1wb3J0IENhcGFjaXRvckxhYkJhc2ljc1N0cmluZ3MgZnJvbSAnLi4vLi4vLi4vQ2FwYWNpdG9yTGFiQmFzaWNzU3RyaW5ncy5qcyc7XHJcbmltcG9ydCBDTEJDb25zdGFudHMgZnJvbSAnLi4vLi4vQ0xCQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IFVuaXRzVXRpbHMgZnJvbSAnLi4vLi4vbW9kZWwvdXRpbC9Vbml0c1V0aWxzLmpzJztcclxuaW1wb3J0IERyYWdIYW5kbGVBcnJvd05vZGUgZnJvbSAnLi9EcmFnSGFuZGxlQXJyb3dOb2RlLmpzJztcclxuaW1wb3J0IERyYWdIYW5kbGVMaW5lTm9kZSBmcm9tICcuL0RyYWdIYW5kbGVMaW5lTm9kZS5qcyc7XHJcbmltcG9ydCBEcmFnSGFuZGxlVmFsdWVOb2RlIGZyb20gJy4vRHJhZ0hhbmRsZVZhbHVlTm9kZS5qcyc7XHJcbmltcG9ydCBQbGF0ZVNlcGFyYXRpb25EcmFnSGFuZGxlciBmcm9tICcuL1BsYXRlU2VwYXJhdGlvbkRyYWdIYW5kbGVyLmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG4vLyBlbmRwb2ludHMgZm9yIHZlcnRpY2FsIGRvdWJsZS1oZWFkZWQgYXJyb3dcclxuY29uc3QgQVJST1dfU1RBUlRfUE9TSVRJT04gPSBuZXcgVmVjdG9yMiggMCwgMCApO1xyXG5jb25zdCBBUlJPV19FTkRfUE9TSVRJT04gPSBuZXcgVmVjdG9yMiggMCwgLUNMQkNvbnN0YW50cy5EUkFHX0hBTkRMRV9BUlJPV19MRU5HVEggKTtcclxuXHJcbi8vIGVuZHBvaW50cyBmb3IgdmVydGljYWwgbGluZVxyXG5jb25zdCBMSU5FX0xFTkdUSCA9IDYwO1xyXG5jb25zdCBMSU5FX1NUQVJUX1BPU0lUSU9OID0gbmV3IFZlY3RvcjIoIDAsIDAgKTtcclxuY29uc3QgTElORV9FTkRfUE9TSVRJT04gPSBuZXcgVmVjdG9yMiggMCwgLUxJTkVfTEVOR1RIICk7XHJcblxyXG5jb25zdCBtaWxsaW1ldGVyc1BhdHRlcm5TdHJpbmcgPSBDYXBhY2l0b3JMYWJCYXNpY3NTdHJpbmdzLm1pbGxpbWV0ZXJzUGF0dGVybjtcclxuY29uc3Qgc2VwYXJhdGlvblN0cmluZyA9IENhcGFjaXRvckxhYkJhc2ljc1N0cmluZ3Muc2VwYXJhdGlvbjtcclxuXHJcbmNsYXNzIFBsYXRlU2VwYXJhdGlvbkRyYWdIYW5kbGVOb2RlIGV4dGVuZHMgTm9kZSB7XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtDYXBhY2l0b3J9IGNhcGFjaXRvclxyXG4gICAqIEBwYXJhbSB7WWF3UGl0Y2hNb2RlbFZpZXdUcmFuc2Zvcm0zfSBtb2RlbFZpZXdUcmFuc2Zvcm1cclxuICAgKiBAcGFyYW0ge1JhbmdlfSB2YWx1ZVJhbmdlXHJcbiAgICogQHBhcmFtIHtUYW5kZW19IHRhbmRlbVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBjYXBhY2l0b3IsIG1vZGVsVmlld1RyYW5zZm9ybSwgdmFsdWVSYW5nZSwgdGFuZGVtICkge1xyXG5cclxuICAgIHN1cGVyKCB7IHRhbmRlbTogdGFuZGVtIH0gKTtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZVxyXG4gICAgdGhpcy5jYXBhY2l0b3IgPSBjYXBhY2l0b3I7XHJcbiAgICB0aGlzLm1vZGVsVmlld1RyYW5zZm9ybSA9IG1vZGVsVmlld1RyYW5zZm9ybTtcclxuXHJcbiAgICBjb25zdCBkcmFnSGFuZGxlciA9IG5ldyBQbGF0ZVNlcGFyYXRpb25EcmFnSGFuZGxlciggY2FwYWNpdG9yLCBtb2RlbFZpZXdUcmFuc2Zvcm0sIHZhbHVlUmFuZ2UsXHJcbiAgICAgIHRhbmRlbS5jcmVhdGVUYW5kZW0oICdkcmFnTGlzdGVuZXInICkgKTtcclxuICAgIHRoaXMuYWRkSW5wdXRMaXN0ZW5lciggZHJhZ0hhbmRsZXIgKTtcclxuXHJcbiAgICAvLyBhcnJvd1xyXG4gICAgY29uc3QgYXJyb3dOb2RlID0gbmV3IERyYWdIYW5kbGVBcnJvd05vZGUoIEFSUk9XX1NUQVJUX1BPU0lUSU9OLCBBUlJPV19FTkRfUE9TSVRJT04sIGRyYWdIYW5kbGVyLmlzSGlnaGxpZ2h0ZWRQcm9wZXJ0eSxcclxuICAgICAgdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2Fycm93Tm9kZScgKSApO1xyXG5cclxuICAgIHRoaXMuY3Vyc29yID0gJ3BvaW50ZXInO1xyXG5cclxuICAgIC8vIGxpbmVcclxuICAgIGNvbnN0IGxpbmVOb2RlID0gbmV3IERyYWdIYW5kbGVMaW5lTm9kZSggTElORV9TVEFSVF9QT1NJVElPTiwgTElORV9FTkRfUE9TSVRJT04gKTtcclxuXHJcbiAgICAvLyB2YWx1ZVxyXG4gICAgY29uc3QgbWlsbGltZXRlcnMgPSBVbml0c1V0aWxzLm1ldGVyc1RvTWlsbGltZXRlcnMoIGNhcGFjaXRvci5wbGF0ZVNlcGFyYXRpb25Qcm9wZXJ0eS52YWx1ZSApO1xyXG4gICAgdGhpcy52YWx1ZU5vZGUgPSBuZXcgRHJhZ0hhbmRsZVZhbHVlTm9kZSggc2VwYXJhdGlvblN0cmluZywgbWlsbGltZXRlcnMsIG1pbGxpbWV0ZXJzUGF0dGVyblN0cmluZywge1xyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICd2YWx1ZU5vZGUnIClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBNYWtlIHRleHQgcGFydCBvZiB0aGUgZHJhZ2dhYmxlIGFyZWFcclxuICAgIHRoaXMudmFsdWVOb2RlLm1vdXNlQXJlYSA9IHRoaXMudmFsdWVOb2RlLmJvdW5kcy5kaWxhdGVkKCAwICk7XHJcbiAgICB0aGlzLnZhbHVlTm9kZS50b3VjaEFyZWEgPSB0aGlzLnZhbHVlTm9kZS5ib3VuZHMuZGlsYXRlZCggMCApO1xyXG5cclxuICAgIC8vIHJlbmRlcmluZyBvcmRlclxyXG4gICAgdGhpcy5hZGRDaGlsZCggbGluZU5vZGUgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIGFycm93Tm9kZSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggdGhpcy52YWx1ZU5vZGUgKTtcclxuXHJcbiAgICAvLyBsYXlvdXQ6IGFycm93IGFib3V0IGxpbmUsIGhvcml6b250YWxseSBjZW50ZXJlZFxyXG4gICAgbGV0IHggPSAwO1xyXG4gICAgbGV0IHkgPSAwO1xyXG4gICAgbGluZU5vZGUudHJhbnNsYXRpb24gPSBuZXcgVmVjdG9yMiggeCwgeSApO1xyXG5cclxuICAgIHggPSAwO1xyXG4gICAgeSA9IGxpbmVOb2RlLmJvdW5kcy5taW5ZIC0gMjtcclxuICAgIGFycm93Tm9kZS50cmFuc2xhdGlvbiA9IG5ldyBWZWN0b3IyKCB4LCB5ICk7XHJcblxyXG4gICAgeCA9IGFycm93Tm9kZS5ib3VuZHMubWF4WCArIDU7XHJcbiAgICB5ID0gYXJyb3dOb2RlLmJvdW5kcy5taW5ZIC0gdGhpcy52YWx1ZU5vZGUuYm91bmRzLmhlaWdodCAvIDIgKyA1O1xyXG4gICAgdGhpcy52YWx1ZU5vZGUudHJhbnNsYXRpb24gPSBuZXcgVmVjdG9yMiggeCwgeSApO1xyXG5cclxuICAgIC8vIHVwZGF0ZSB3aGVuIHJlbGF0ZWQgbW9kZWwgcHJvcGVydGllcyBjaGFuZ2VcclxuICAgIGNhcGFjaXRvci5wbGF0ZVNlcGFyYXRpb25Qcm9wZXJ0eS5saW5rKCAoKSA9PiB7XHJcbiAgICAgIHRoaXMudXBkYXRlVmFsdWVEaXNwbGF5KCk7XHJcbiAgICAgIHRoaXMudXBkYXRlT2Zmc2V0KCk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgY2FwYWNpdG9yLnBsYXRlU2l6ZVByb3BlcnR5LmxpbmsoICgpID0+IHtcclxuICAgICAgdGhpcy51cGRhdGVPZmZzZXQoKTtcclxuICAgIH0gKTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBTeW5jaHJvbml6ZXMgdGhlIHZhbHVlIGRpc3BsYXkgd2l0aCB0aGUgbW9kZWwuXHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG4gIHVwZGF0ZVZhbHVlRGlzcGxheSgpIHtcclxuICAgIGNvbnN0IG1pbGxpbWV0ZXJzID0gVW5pdHNVdGlscy5tZXRlcnNUb01pbGxpbWV0ZXJzKCB0aGlzLmNhcGFjaXRvci5wbGF0ZVNlcGFyYXRpb25Qcm9wZXJ0eS52YWx1ZSApO1xyXG4gICAgdGhpcy52YWx1ZU5vZGUuc2V0VmFsdWUoIG1pbGxpbWV0ZXJzLCAxICk7IC8vIE9uZSBkZWNpbWFsIHBsYWNlXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBdHRhY2ggZHJhZyBoYW5kbGUgdG8gdG9wIGNhcGFjaXRvciBwbGF0ZSwgaW4gY2VudGVyIHRoZSBwbGF0ZSdzIHRvcCBmYWNlLlxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICB1cGRhdGVPZmZzZXQoKSB7XHJcbiAgICBjb25zdCB3aWR0aCA9IHRoaXMuY2FwYWNpdG9yLnBsYXRlU2l6ZVByb3BlcnR5LnZhbHVlLndpZHRoO1xyXG4gICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5jYXBhY2l0b3IucGxhdGVTaXplUHJvcGVydHkudmFsdWUuaGVpZ2h0O1xyXG4gICAgY29uc3QgeCA9IHRoaXMuY2FwYWNpdG9yLnBvc2l0aW9uLnggKyAoIDAuMyAqIHdpZHRoICk7XHJcbiAgICBjb25zdCB5ID0gdGhpcy5jYXBhY2l0b3IucG9zaXRpb24ueSAtICggdGhpcy5jYXBhY2l0b3IucGxhdGVTZXBhcmF0aW9uUHJvcGVydHkudmFsdWUgLyAyICkgLSBoZWlnaHQ7XHJcbiAgICBjb25zdCB6ID0gMDtcclxuICAgIHRoaXMudHJhbnNsYXRpb24gPSB0aGlzLm1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1hZWiggeCwgeSwgeiApO1xyXG4gIH1cclxufVxyXG5cclxuY2FwYWNpdG9yTGFiQmFzaWNzLnJlZ2lzdGVyKCAnUGxhdGVTZXBhcmF0aW9uRHJhZ0hhbmRsZU5vZGUnLCBQbGF0ZVNlcGFyYXRpb25EcmFnSGFuZGxlTm9kZSApO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgUGxhdGVTZXBhcmF0aW9uRHJhZ0hhbmRsZU5vZGU7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsT0FBTyxNQUFNLGtDQUFrQztBQUN0RCxTQUFTQyxJQUFJLFFBQVEsc0NBQXNDO0FBQzNELE9BQU9DLGtCQUFrQixNQUFNLGdDQUFnQztBQUMvRCxPQUFPQyx5QkFBeUIsTUFBTSx1Q0FBdUM7QUFDN0UsT0FBT0MsWUFBWSxNQUFNLHVCQUF1QjtBQUNoRCxPQUFPQyxVQUFVLE1BQU0sZ0NBQWdDO0FBQ3ZELE9BQU9DLG1CQUFtQixNQUFNLDBCQUEwQjtBQUMxRCxPQUFPQyxrQkFBa0IsTUFBTSx5QkFBeUI7QUFDeEQsT0FBT0MsbUJBQW1CLE1BQU0sMEJBQTBCO0FBQzFELE9BQU9DLDBC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