// Copyright 2014-2022, University of Colorado Boulder

/**
 * Visual representation of a DC battery, with a control for setting its voltage. Image flips when the polarity of the
 * voltage changes. Origin is at center of this node's bounding rectangle.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 * @author Jesse Greenberg (PhET Interactive Simulations)
 * @author Andrew Adare (PhET Interactive Simulations)
 */

import Dimension2 from '../../../../dot/js/Dimension2.js';
import Utils from '../../../../dot/js/Utils.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import StringUtils from '../../../../phetcommon/js/util/StringUtils.js';
import CapacitorConstants from '../../../../scenery-phet/js/capacitor/CapacitorConstants.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { Node, Text } from '../../../../scenery/js/imports.js';
import VSlider from '../../../../sun/js/VSlider.js';
import capacitorLabBasics from '../../capacitorLabBasics.js';
import CapacitorLabBasicsStrings from '../../CapacitorLabBasicsStrings.js';
import CLBConstants from '../CLBConstants.js';
import BatteryGraphicNode from './BatteryGraphicNode.js';

// constants
const LABEL_FONT = new PhetFont(12);
const voltsPatternString = CapacitorLabBasicsStrings.voltsPattern;
class BatteryNode extends Node {
  /**
   * @param {Battery} battery
   * @param {RangeWithValue} voltageRange
   * @param {Tandem} tandem
   */
  constructor(battery, voltageRange, tandem) {
    super({
      tandem: tandem
    });

    // battery image, scaled to match model dimensions
    const graphicNode = new Node({
      scale: 0.30,
      children: [BatteryGraphicNode.POSITIVE_UP]
    });
    this.addChild(graphicNode);

    // voltage slider
    const trackLength = 0.55 * graphicNode.bounds.height;
    const sliderNode = new VSlider(battery.voltageProperty, voltageRange, {
      trackSize: new Dimension2(8, trackLength),
      thumbSize: new Dimension2(35, 20),
      thumbTouchAreaXDilation: 11,
      thumbTouchAreaYDilation: 11,
      majorTickLength: 18,
      thumbFill: 'rgb(255,237,53)',
      thumbFillHighlighted: 'rgb(71,207,255)',
      // same as default
      thumbStroke: 'rgb(191,191,191)',
      thumbLineWidth: 2,
      thumbCenterLineStroke: 'black',
      constrainValue: value => Utils.roundSymmetric(value * 20) / 20,
      endDrag: () => {
        if (Math.abs(battery.voltageProperty.value) < CLBConstants.BATTERY_VOLTAGE_SNAP_TO_ZERO_THRESHOLD) {
          battery.voltageProperty.value = 0;
        }
      },
      tandem: tandem.createTandem('slider')
    });

    // function to create the tick mark labels using a string pattern.
    const createTickLabel = (value, textFill, tandem) => {
      const labelText = new Text(StringUtils.fillIn(voltsPatternString, {
        value: value
      }), {
        font: LABEL_FONT,
        fill: textFill,
        cursor: 'arrow',
        maxWidth: graphicNode.width * 0.3,
        tandem: tandem
      });
      return labelText;
    };
    // add the tick marks
    const maximumTickLabel = createTickLabel(voltageRange.max, 'black', tandem.createTandem('maximumTickLabelText'));
    const defaultTickLabel = createTickLabel(voltageRange.defaultValue, 'white', tandem.createTandem('defaultTickLabelText'));
    const minimumTickLabel = createTickLabel(voltageRange.min, 'white', tandem.createTandem('minimumTickLabelText'));
    sliderNode.addMajorTick(voltageRange.max, maximumTickLabel);
    sliderNode.addMajorTick(voltageRange.defaultValue, defaultTickLabel);
    sliderNode.addMajorTick(voltageRange.min, minimumTickLabel);
    this.addChild(sliderNode);

    // layout, set by visual inspection, depends on battery image.
    sliderNode.center = new Vector2(graphicNode.center.x + 5, graphicNode.center.y + 12); // sort of centered.

    // when battery polarity changes, change the battery image
    battery.polarityProperty.link(polarity => {
      if (polarity === CapacitorConstants.POLARITY.POSITIVE) {
        graphicNode.children = [BatteryGraphicNode.POSITIVE_UP];
        minimumTickLabel.fill = 'white';
        maximumTickLabel.fill = 'black';
      } else {
        graphicNode.children = [BatteryGraphicNode.POSITIVE_DOWN];
        minimumTickLabel.fill = 'black';
        maximumTickLabel.fill = 'white';
      }
    });
  }
}
capacitorLabBasics.register('BatteryNode', BatteryNode);
export default BatteryNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEaW1lbnNpb24yIiwiVXRpbHMiLCJWZWN0b3IyIiwiU3RyaW5nVXRpbHMiLCJDYXBhY2l0b3JDb25zdGFudHMiLCJQaGV0Rm9udCIsIk5vZGUiLCJUZXh0IiwiVlNsaWRlciIsImNhcGFjaXRvckxhYkJhc2ljcyIsIkNhcGFjaXRvckxhYkJhc2ljc1N0cmluZ3MiLCJDTEJDb25zdGFudHMiLCJCYXR0ZXJ5R3JhcGhpY05vZGUiLCJMQUJFTF9GT05UIiwidm9sdHNQYXR0ZXJuU3RyaW5nIiwidm9sdHNQYXR0ZXJuIiwiQmF0dGVyeU5vZGUiLCJjb25zdHJ1Y3RvciIsImJhdHRlcnkiLCJ2b2x0YWdlUmFuZ2UiLCJ0YW5kZW0iLCJncmFwaGljTm9kZSIsInNjYWxlIiwiY2hpbGRyZW4iLCJQT1NJVElWRV9VUCIsImFkZENoaWxkIiwidHJhY2tMZW5ndGgiLCJib3VuZHMiLCJoZWlnaHQiLCJzbGlkZXJOb2RlIiwidm9sdGFnZVByb3BlcnR5IiwidHJhY2tTaXplIiwidGh1bWJTaXplIiwidGh1bWJUb3VjaEFyZWFYRGlsYXRpb24iLCJ0aHVtYlRvdWNoQXJlYVlEaWxhdGlvbiIsIm1ham9yVGlja0xlbmd0aCIsInRodW1iRmlsbCIsInRodW1iRmlsbEhpZ2hsaWdodGVkIiwidGh1bWJTdHJva2UiLCJ0aHVtYkxpbmVXaWR0aCIsInRodW1iQ2VudGVyTGluZVN0cm9rZSIsImNvbnN0cmFpblZhbHVlIiwidmFsdWUiLCJyb3VuZFN5bW1ldHJpYyIsImVuZERyYWciLCJNYXRoIiwiYWJzIiwiQkFUVEVSWV9WT0xUQUdFX1NOQVBfVE9fWkVST19USFJFU0hPTEQiLCJjcmVhdGVUYW5kZW0iLCJjcmVhdGVUaWNrTGFiZWwiLCJ0ZXh0RmlsbCIsImxhYmVsVGV4dCIsImZpbGxJbiIsImZvbnQiLCJmaWxsIiwiY3Vyc29yIiwibWF4V2lkdGgiLCJ3aWR0aCIsIm1heGltdW1UaWNrTGFiZWwiLCJtYXgiLCJkZWZhdWx0VGlja0xhYmVsIiwiZGVmYXVsdFZhbHVlIiwibWluaW11bVRpY2tMYWJlbCIsIm1pbiIsImFkZE1ham9yVGljayIsImNlbnRlciIsIngiLCJ5IiwicG9sYXJpdHlQcm9wZXJ0eSIsImxpbmsiLCJwb2xhcml0eSIsIlBPTEFSSVRZIiwiUE9TSVRJVkUiLCJQT1NJVElWRV9ET1dOIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJCYXR0ZXJ5Tm9kZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNC0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBWaXN1YWwgcmVwcmVzZW50YXRpb24gb2YgYSBEQyBiYXR0ZXJ5LCB3aXRoIGEgY29udHJvbCBmb3Igc2V0dGluZyBpdHMgdm9sdGFnZS4gSW1hZ2UgZmxpcHMgd2hlbiB0aGUgcG9sYXJpdHkgb2YgdGhlXHJcbiAqIHZvbHRhZ2UgY2hhbmdlcy4gT3JpZ2luIGlzIGF0IGNlbnRlciBvZiB0aGlzIG5vZGUncyBib3VuZGluZyByZWN0YW5nbGUuXHJcbiAqXHJcbiAqIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXHJcbiAqIEBhdXRob3IgSmVzc2UgR3JlZW5iZXJnIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxyXG4gKiBAYXV0aG9yIEFuZHJldyBBZGFyZSAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICovXHJcblxyXG5pbXBvcnQgRGltZW5zaW9uMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvRGltZW5zaW9uMi5qcyc7XHJcbmltcG9ydCBVdGlscyBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVXRpbHMuanMnO1xyXG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVmVjdG9yMi5qcyc7XHJcbmltcG9ydCBTdHJpbmdVdGlscyBmcm9tICcuLi8uLi8uLi8uLi9waGV0Y29tbW9uL2pzL3V0aWwvU3RyaW5nVXRpbHMuanMnO1xyXG5pbXBvcnQgQ2FwYWNpdG9yQ29uc3RhbnRzIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9jYXBhY2l0b3IvQ2FwYWNpdG9yQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IFBoZXRGb250IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9QaGV0Rm9udC5qcyc7XHJcbmltcG9ydCB7IE5vZGUsIFRleHQgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgVlNsaWRlciBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvVlNsaWRlci5qcyc7XHJcbmltcG9ydCBjYXBhY2l0b3JMYWJCYXNpY3MgZnJvbSAnLi4vLi4vY2FwYWNpdG9yTGFiQmFzaWNzLmpzJztcclxuaW1wb3J0IENhcGFjaXRvckxhYkJhc2ljc1N0cmluZ3MgZnJvbSAnLi4vLi4vQ2FwYWNpdG9yTGFiQmFzaWNzU3RyaW5ncy5qcyc7XHJcbmltcG9ydCBDTEJDb25zdGFudHMgZnJvbSAnLi4vQ0xCQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IEJhdHRlcnlHcmFwaGljTm9kZSBmcm9tICcuL0JhdHRlcnlHcmFwaGljTm9kZS5qcyc7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgTEFCRUxfRk9OVCA9IG5ldyBQaGV0Rm9udCggMTIgKTtcclxuXHJcbmNvbnN0IHZvbHRzUGF0dGVyblN0cmluZyA9IENhcGFjaXRvckxhYkJhc2ljc1N0cmluZ3Mudm9sdHNQYXR0ZXJuO1xyXG5cclxuY2xhc3MgQmF0dGVyeU5vZGUgZXh0ZW5kcyBOb2RlIHtcclxuICAvKipcclxuICAgKiBAcGFyYW0ge0JhdHRlcnl9IGJhdHRlcnlcclxuICAgKiBAcGFyYW0ge1JhbmdlV2l0aFZhbHVlfSB2b2x0YWdlUmFuZ2VcclxuICAgKiBAcGFyYW0ge1RhbmRlbX0gdGFuZGVtXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIGJhdHRlcnksIHZvbHRhZ2VSYW5nZSwgdGFuZGVtICkge1xyXG5cclxuICAgIHN1cGVyKCB7IHRhbmRlbTogdGFuZGVtIH0gKTtcclxuXHJcbiAgICAvLyBiYXR0ZXJ5IGltYWdlLCBzY2FsZWQgdG8gbWF0Y2ggbW9kZWwgZGltZW5zaW9uc1xyXG4gICAgY29uc3QgZ3JhcGhpY05vZGUgPSBuZXcgTm9kZSgge1xyXG4gICAgICBzY2FsZTogMC4zMCxcclxuICAgICAgY2hpbGRyZW46IFsgQmF0dGVyeUdyYXBoaWNOb2RlLlBPU0lUSVZFX1VQIF1cclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIGdyYXBoaWNOb2RlICk7XHJcblxyXG4gICAgLy8gdm9sdGFnZSBzbGlkZXJcclxuICAgIGNvbnN0IHRyYWNrTGVuZ3RoID0gMC41NSAqIGdyYXBoaWNOb2RlLmJvdW5kcy5oZWlnaHQ7XHJcbiAgICBjb25zdCBzbGlkZXJOb2RlID0gbmV3IFZTbGlkZXIoIGJhdHRlcnkudm9sdGFnZVByb3BlcnR5LCB2b2x0YWdlUmFuZ2UsIHtcclxuICAgICAgdHJhY2tTaXplOiBuZXcgRGltZW5zaW9uMiggOCwgdHJhY2tMZW5ndGggKSxcclxuICAgICAgdGh1bWJTaXplOiBuZXcgRGltZW5zaW9uMiggMzUsIDIwICksXHJcbiAgICAgIHRodW1iVG91Y2hBcmVhWERpbGF0aW9uOiAxMSxcclxuICAgICAgdGh1bWJUb3VjaEFyZWFZRGlsYXRpb246IDExLFxyXG4gICAgICBtYWpvclRpY2tMZW5ndGg6IDE4LFxyXG4gICAgICB0aHVtYkZpbGw6ICdyZ2IoMjU1LDIzNyw1MyknLFxyXG4gICAgICB0aHVtYkZpbGxIaWdobGlnaHRlZDogJ3JnYig3MSwyMDcsMjU1KScsIC8vIHNhbWUgYXMgZGVmYXVsdFxyXG4gICAgICB0aHVtYlN0cm9rZTogJ3JnYigxOTEsMTkxLDE5MSknLFxyXG4gICAgICB0aHVtYkxpbmVXaWR0aDogMixcclxuICAgICAgdGh1bWJDZW50ZXJMaW5lU3Ryb2tlOiAnYmxhY2snLFxyXG4gICAgICBjb25zdHJhaW5WYWx1ZTogdmFsdWUgPT4gVXRpbHMucm91bmRTeW1tZXRyaWMoIHZhbHVlICogMjAgKSAvIDIwLFxyXG4gICAgICBlbmREcmFnOiAoKSA9PiB7XHJcbiAgICAgICAgaWYgKCBNYXRoLmFicyggYmF0dGVyeS52b2x0YWdlUHJvcGVydHkudmFsdWUgKSA8IENMQkNvbnN0YW50cy5CQVRURVJZX1ZPTFRBR0VfU05BUF9UT19aRVJPX1RIUkVTSE9MRCApIHtcclxuICAgICAgICAgIGJhdHRlcnkudm9sdGFnZVByb3BlcnR5LnZhbHVlID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3NsaWRlcicgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIGZ1bmN0aW9uIHRvIGNyZWF0ZSB0aGUgdGljayBtYXJrIGxhYmVscyB1c2luZyBhIHN0cmluZyBwYXR0ZXJuLlxyXG4gICAgY29uc3QgY3JlYXRlVGlja0xhYmVsID0gKCB2YWx1ZSwgdGV4dEZpbGwsIHRhbmRlbSApID0+IHtcclxuICAgICAgY29uc3QgbGFiZWxUZXh0ID0gbmV3IFRleHQoIFN0cmluZ1V0aWxzLmZpbGxJbiggdm9sdHNQYXR0ZXJuU3RyaW5nLCB7IHZhbHVlOiB2YWx1ZSB9ICksIHtcclxuICAgICAgICBmb250OiBMQUJFTF9GT05ULFxyXG4gICAgICAgIGZpbGw6IHRleHRGaWxsLFxyXG4gICAgICAgIGN1cnNvcjogJ2Fycm93JyxcclxuICAgICAgICBtYXhXaWR0aDogZ3JhcGhpY05vZGUud2lkdGggKiAwLjMsXHJcbiAgICAgICAgdGFuZGVtOiB0YW5kZW1cclxuICAgICAgfSApO1xyXG4gICAgICByZXR1cm4gbGFiZWxUZXh0O1xyXG4gICAgfTtcclxuICAgIC8vIGFkZCB0aGUgdGljayBtYXJrc1xyXG4gICAgY29uc3QgbWF4aW11bVRpY2tMYWJlbCA9IGNyZWF0ZVRpY2tMYWJlbCggdm9sdGFnZVJhbmdlLm1heCwgJ2JsYWNrJywgdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ21heGltdW1UaWNrTGFiZWxUZXh0JyApICk7XHJcbiAgICBjb25zdCBkZWZhdWx0VGlja0xhYmVsID0gY3JlYXRlVGlja0xhYmVsKCB2b2x0YWdlUmFuZ2UuZGVmYXVsdFZhbHVlLCAnd2hpdGUnLCB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnZGVmYXVsdFRpY2tMYWJlbFRleHQnICkgKTtcclxuICAgIGNvbnN0IG1pbmltdW1UaWNrTGFiZWwgPSBjcmVhdGVUaWNrTGFiZWwoIHZvbHRhZ2VSYW5nZS5taW4sICd3aGl0ZScsIHRhbmRlbS5jcmVhdGVUYW5kZW0oICdtaW5pbXVtVGlja0xhYmVsVGV4dCcgKSApO1xyXG4gICAgc2xpZGVyTm9kZS5hZGRNYWpvclRpY2soIHZvbHRhZ2VSYW5nZS5tYXgsIG1heGltdW1UaWNrTGFiZWwgKTtcclxuICAgIHNsaWRlck5vZGUuYWRkTWFqb3JUaWNrKCB2b2x0YWdlUmFuZ2UuZGVmYXVsdFZhbHVlLCBkZWZhdWx0VGlja0xhYmVsICk7XHJcbiAgICBzbGlkZXJOb2RlLmFkZE1ham9yVGljayggdm9sdGFnZVJhbmdlLm1pbiwgbWluaW11bVRpY2tMYWJlbCApO1xyXG5cclxuICAgIHRoaXMuYWRkQ2hpbGQoIHNsaWRlck5vZGUgKTtcclxuXHJcbiAgICAvLyBsYXlvdXQsIHNldCBieSB2aXN1YWwgaW5zcGVjdGlvbiwgZGVwZW5kcyBvbiBiYXR0ZXJ5IGltYWdlLlxyXG4gICAgc2xpZGVyTm9kZS5jZW50ZXIgPSBuZXcgVmVjdG9yMiggZ3JhcGhpY05vZGUuY2VudGVyLnggKyA1LCBncmFwaGljTm9kZS5jZW50ZXIueSArIDEyICk7IC8vIHNvcnQgb2YgY2VudGVyZWQuXHJcblxyXG4gICAgLy8gd2hlbiBiYXR0ZXJ5IHBvbGFyaXR5IGNoYW5nZXMsIGNoYW5nZSB0aGUgYmF0dGVyeSBpbWFnZVxyXG4gICAgYmF0dGVyeS5wb2xhcml0eVByb3BlcnR5LmxpbmsoIHBvbGFyaXR5ID0+IHtcclxuICAgICAgaWYgKCBwb2xhcml0eSA9PT0gQ2FwYWNpdG9yQ29uc3RhbnRzLlBPTEFSSVRZLlBPU0lUSVZFICkge1xyXG4gICAgICAgIGdyYXBoaWNOb2RlLmNoaWxkcmVuID0gWyBCYXR0ZXJ5R3JhcGhpY05vZGUuUE9TSVRJVkVfVVAgXTtcclxuICAgICAgICBtaW5pbXVtVGlja0xhYmVsLmZpbGwgPSAnd2hpdGUnO1xyXG4gICAgICAgIG1heGltdW1UaWNrTGFiZWwuZmlsbCA9ICdibGFjayc7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgZ3JhcGhpY05vZGUuY2hpbGRyZW4gPSBbIEJhdHRlcnlHcmFwaGljTm9kZS5QT1NJVElWRV9ET1dOIF07XHJcbiAgICAgICAgbWluaW11bVRpY2tMYWJlbC5maWxsID0gJ2JsYWNrJztcclxuICAgICAgICBtYXhpbXVtVGlja0xhYmVsLmZpbGwgPSAnd2hpdGUnO1xyXG4gICAgICB9XHJcbiAgICB9ICk7XHJcbiAgfVxyXG59XHJcblxyXG5jYXBhY2l0b3JMYWJCYXNpY3MucmVnaXN0ZXIoICdCYXR0ZXJ5Tm9kZScsIEJhdHRlcnlOb2RlICk7XHJcbmV4cG9ydCBkZWZhdWx0IEJhdHRlcnlOb2RlOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxVQUFVLE1BQU0sa0NBQWtDO0FBQ3pELE9BQU9DLEtBQUssTUFBTSw2QkFBNkI7QUFDL0MsT0FBT0MsT0FBTyxNQUFNLCtCQUErQjtBQUNuRCxPQUFPQyxXQUFXLE1BQU0sK0NBQStDO0FBQ3ZFLE9BQU9DLGtCQUFrQixNQUFNLDZEQUE2RDtBQUM1RixPQUFPQyxRQUFRLE1BQU0seUNBQXlDO0FBQzlELFNBQVNDLElBQUksRUFBRUMsSUFBSSxRQUFRLG1DQUFtQztBQUM5RCxPQUFPQyxPQUFPLE1BQU0sK0JBQStCO0FBQ25ELE9BQU9DLGtCQUFrQixNQUFNLDZCQUE2QjtBQUM1RCxPQUFPQyx5QkFBeUIsTUFBTSxvQ0FBb0M7QUFDMUUsT0FBT0MsWUFBWSxNQUFNLG9CQUFvQjtBQUM3QyxPQUFPQyxrQkFBa0IsTUFBTSx5QkFBeUI7O0FBRXhE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