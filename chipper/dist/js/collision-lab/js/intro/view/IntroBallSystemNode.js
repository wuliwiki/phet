// Copyright 2020-2022, University of Colorado Boulder

/**
 * IntroBallSystemNode is a BallSystemNode sub-type for the 'Intro' screen. See BallSystemNode for context. Like the
 * super-class, IntroBallSystems are never disposed and uses the prepopulatedBalls of the IntroBallSystem.
 *
 * In the 'Intro' screen, there are 'Change in Momentum' vectors that appear 'briefly' when the momentum of a Ball
 * collides and changes momentum with another Ball. See IntroBallSystem for context. The opacity and magnitudes of the
 * 'Change in Momentum' vectors are modeled in IntroBallSystem, so all the view has to do is mirror the opacity and
 * components that are modeled.
 *
 * IntroBallSystem will create a ChangeInMomentumVectorNode for each of the 2 Balls in the 'Intro' screen. It will
 * also create a text that displays 'Change in Momentum,' which is positioned over the collision point of the two
 * Balls. See https://github.com/phetsims/collision-lab/issues/85.
 *
 * NOTE: Do not translate this node. It's origin must be at the origin of the view coordinate frame.
 *
 * @author Brandon Li
 */

import AssertUtils from '../../../../phetcommon/js/AssertUtils.js';
import ModelViewTransform2 from '../../../../phetcommon/js/view/ModelViewTransform2.js';
import { Node, Text } from '../../../../scenery/js/imports.js';
import collisionLab from '../../collisionLab.js';
import CollisionLabStrings from '../../CollisionLabStrings.js';
import CollisionLabConstants from '../../common/CollisionLabConstants.js';
import PlayArea from '../../common/model/PlayArea.js';
import BallSystemNode from '../../common/view/BallSystemNode.js';
import IntroBallSystem from '../model/IntroBallSystem.js';
import ChangeInMomentumVectorNode from './ChangeInMomentumVectorNode.js';

// constants
const CHANGE_IN_MOMENTUM_TEXT_Y_OFFSET = 30; // Vertical margin between the label and the ChangeInMomentumVectorNodes.

class IntroBallSystemNode extends BallSystemNode {
  /**
   * @param {IntroBallSystem} ballSystem
   * @param {PlayArea} playArea
   * @param {Property.<boolean>} valuesVisibleProperty
   * @param {Property.<boolean>} velocityVectorVisibleProperty
   * @param {Property.<boolean>} momentumVectorVisibleProperty
   * @param {Property.<boolean>} isPlayingProperty
   * @param {ModelViewTransform2} modelViewTransform
   * @param {Object} [options]
   */
  constructor(ballSystem, playArea, valuesVisibleProperty, velocityVectorVisibleProperty, momentumVectorVisibleProperty, isPlayingProperty, modelViewTransform, options) {
    assert && assert(ballSystem instanceof IntroBallSystem, `invalid ballSystem: ${ballSystem}`);
    assert && assert(playArea instanceof PlayArea, `invalid playArea: ${playArea}`);
    assert && AssertUtils.assertPropertyOf(valuesVisibleProperty, 'boolean');
    assert && AssertUtils.assertPropertyOf(velocityVectorVisibleProperty, 'boolean');
    assert && AssertUtils.assertPropertyOf(momentumVectorVisibleProperty, 'boolean');
    assert && AssertUtils.assertPropertyOf(isPlayingProperty, 'boolean');
    assert && assert(modelViewTransform instanceof ModelViewTransform2, `invalid modelViewTransform: ${modelViewTransform}`);
    super(ballSystem, playArea, valuesVisibleProperty, velocityVectorVisibleProperty, momentumVectorVisibleProperty, isPlayingProperty, modelViewTransform, options);

    //----------------------------------------------------------------------------------------

    // Create the container for the Change In Momentum Vectors.
    const changeInMomentumContainer = new Node();

    // Loop through each possible changeInMomentumProperty and create the corresponding ChangeInMomentumVectorNode of
    // each Ball.
    ballSystem.ballToChangeInMomentumProperty.forEach((changeInMomentumProperty, ball) => {
      // Create the corresponding ChangeInMomentumVectorNode for each prepopulatedBall.
      const changeInMomentumVectorNode = new ChangeInMomentumVectorNode(changeInMomentumProperty, ballSystem.changeInMomentumOpacityProperty, ball.positionProperty, playArea.bounds, modelViewTransform);

      // Add the ChangeInMomentumVectorNode to the container.
      changeInMomentumContainer.addChild(changeInMomentumVectorNode);
    });

    // Add all ChangeInMomentumVectorNodes as children of this Node.
    this.addChild(changeInMomentumContainer);

    //----------------------------------------------------------------------------------------

    // Create the 'Change in Momentum' text, which is displayed above the collision point.
    const changeInMomentumText = new Text(CollisionLabStrings.changeInMomentum, {
      font: CollisionLabConstants.DISPLAY_FONT,
      maxWidth: 160,
      // Constrain width for i18n. Determined empirically.
      top: modelViewTransform.modelToViewY(playArea.bounds.centerY) - ChangeInMomentumVectorNode.CHANGE_IN_MOMENTUM_Y_OFFSET - CHANGE_IN_MOMENTUM_TEXT_Y_OFFSET
    });

    // Add the 'Change in Momentum' text as a child of this Node.
    this.addChild(changeInMomentumText);

    //----------------------------------------------------------------------------------------

    // Observe when the changeInMomentumOpacityProperty changes and match the opacity of the 'Change in Momentum' Text.
    // Link is never unlinked since IntroBallSystems are never disposed.
    ballSystem.changeInMomentumOpacityProperty.linkAttribute(changeInMomentumText, 'opacity');

    // Observe when the collision-point changes and match the x-position of the 'Change in Momentum' Text, if it exists.
    // Link is never unlinked since IntroBallSystems are never disposed.
    ballSystem.collisionPointProperty.link(collisionPoint => {
      collisionPoint && changeInMomentumText.setCenterX(modelViewTransform.modelToViewX(collisionPoint.x));
    });
  }
}
collisionLab.register('IntroBallSystemNode', IntroBallSystemNode);
export default IntroBallSystemNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBc3NlcnRVdGlscyIsIk1vZGVsVmlld1RyYW5zZm9ybTIiLCJOb2RlIiwiVGV4dCIsImNvbGxpc2lvbkxhYiIsIkNvbGxpc2lvbkxhYlN0cmluZ3MiLCJDb2xsaXNpb25MYWJDb25zdGFudHMiLCJQbGF5QXJlYSIsIkJhbGxTeXN0ZW1Ob2RlIiwiSW50cm9CYWxsU3lzdGVtIiwiQ2hhbmdlSW5Nb21lbnR1bVZlY3Rvck5vZGUiLCJDSEFOR0VfSU5fTU9NRU5UVU1fVEVYVF9ZX09GRlNFVCIsIkludHJvQmFsbFN5c3RlbU5vZGUiLCJjb25zdHJ1Y3RvciIsImJhbGxTeXN0ZW0iLCJwbGF5QXJlYSIsInZhbHVlc1Zpc2libGVQcm9wZXJ0eSIsInZlbG9jaXR5VmVjdG9yVmlzaWJsZVByb3BlcnR5IiwibW9tZW50dW1WZWN0b3JWaXNpYmxlUHJvcGVydHkiLCJpc1BsYXlpbmdQcm9wZXJ0eSIsIm1vZGVsVmlld1RyYW5zZm9ybSIsIm9wdGlvbnMiLCJhc3NlcnQiLCJhc3NlcnRQcm9wZXJ0eU9mIiwiY2hhbmdlSW5Nb21lbnR1bUNvbnRhaW5lciIsImJhbGxUb0NoYW5nZUluTW9tZW50dW1Qcm9wZXJ0eSIsImZvckVhY2giLCJjaGFuZ2VJbk1vbWVudHVtUHJvcGVydHkiLCJiYWxsIiwiY2hhbmdlSW5Nb21lbnR1bVZlY3Rvck5vZGUiLCJjaGFuZ2VJbk1vbWVudHVtT3BhY2l0eVByb3BlcnR5IiwicG9zaXRpb25Qcm9wZXJ0eSIsImJvdW5kcyIsImFkZENoaWxkIiwiY2hhbmdlSW5Nb21lbnR1bVRleHQiLCJjaGFuZ2VJbk1vbWVudHVtIiwiZm9udCIsIkRJU1BMQVlfRk9OVCIsIm1heFdpZHRoIiwidG9wIiwibW9kZWxUb1ZpZXdZIiwiY2VudGVyWSIsIkNIQU5HRV9JTl9NT01FTlRVTV9ZX09GRlNFVCIsImxpbmtBdHRyaWJ1dGUiLCJjb2xsaXNpb25Qb2ludFByb3BlcnR5IiwibGluayIsImNvbGxpc2lvblBvaW50Iiwic2V0Q2VudGVyWCIsIm1vZGVsVG9WaWV3WCIsIngiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkludHJvQmFsbFN5c3RlbU5vZGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjAtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogSW50cm9CYWxsU3lzdGVtTm9kZSBpcyBhIEJhbGxTeXN0ZW1Ob2RlIHN1Yi10eXBlIGZvciB0aGUgJ0ludHJvJyBzY3JlZW4uIFNlZSBCYWxsU3lzdGVtTm9kZSBmb3IgY29udGV4dC4gTGlrZSB0aGVcclxuICogc3VwZXItY2xhc3MsIEludHJvQmFsbFN5c3RlbXMgYXJlIG5ldmVyIGRpc3Bvc2VkIGFuZCB1c2VzIHRoZSBwcmVwb3B1bGF0ZWRCYWxscyBvZiB0aGUgSW50cm9CYWxsU3lzdGVtLlxyXG4gKlxyXG4gKiBJbiB0aGUgJ0ludHJvJyBzY3JlZW4sIHRoZXJlIGFyZSAnQ2hhbmdlIGluIE1vbWVudHVtJyB2ZWN0b3JzIHRoYXQgYXBwZWFyICdicmllZmx5JyB3aGVuIHRoZSBtb21lbnR1bSBvZiBhIEJhbGxcclxuICogY29sbGlkZXMgYW5kIGNoYW5nZXMgbW9tZW50dW0gd2l0aCBhbm90aGVyIEJhbGwuIFNlZSBJbnRyb0JhbGxTeXN0ZW0gZm9yIGNvbnRleHQuIFRoZSBvcGFjaXR5IGFuZCBtYWduaXR1ZGVzIG9mIHRoZVxyXG4gKiAnQ2hhbmdlIGluIE1vbWVudHVtJyB2ZWN0b3JzIGFyZSBtb2RlbGVkIGluIEludHJvQmFsbFN5c3RlbSwgc28gYWxsIHRoZSB2aWV3IGhhcyB0byBkbyBpcyBtaXJyb3IgdGhlIG9wYWNpdHkgYW5kXHJcbiAqIGNvbXBvbmVudHMgdGhhdCBhcmUgbW9kZWxlZC5cclxuICpcclxuICogSW50cm9CYWxsU3lzdGVtIHdpbGwgY3JlYXRlIGEgQ2hhbmdlSW5Nb21lbnR1bVZlY3Rvck5vZGUgZm9yIGVhY2ggb2YgdGhlIDIgQmFsbHMgaW4gdGhlICdJbnRybycgc2NyZWVuLiBJdCB3aWxsXHJcbiAqIGFsc28gY3JlYXRlIGEgdGV4dCB0aGF0IGRpc3BsYXlzICdDaGFuZ2UgaW4gTW9tZW50dW0sJyB3aGljaCBpcyBwb3NpdGlvbmVkIG92ZXIgdGhlIGNvbGxpc2lvbiBwb2ludCBvZiB0aGUgdHdvXHJcbiAqIEJhbGxzLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL2NvbGxpc2lvbi1sYWIvaXNzdWVzLzg1LlxyXG4gKlxyXG4gKiBOT1RFOiBEbyBub3QgdHJhbnNsYXRlIHRoaXMgbm9kZS4gSXQncyBvcmlnaW4gbXVzdCBiZSBhdCB0aGUgb3JpZ2luIG9mIHRoZSB2aWV3IGNvb3JkaW5hdGUgZnJhbWUuXHJcbiAqXHJcbiAqIEBhdXRob3IgQnJhbmRvbiBMaVxyXG4gKi9cclxuXHJcbmltcG9ydCBBc3NlcnRVdGlscyBmcm9tICcuLi8uLi8uLi8uLi9waGV0Y29tbW9uL2pzL0Fzc2VydFV0aWxzLmpzJztcclxuaW1wb3J0IE1vZGVsVmlld1RyYW5zZm9ybTIgZnJvbSAnLi4vLi4vLi4vLi4vcGhldGNvbW1vbi9qcy92aWV3L01vZGVsVmlld1RyYW5zZm9ybTIuanMnO1xyXG5pbXBvcnQgeyBOb2RlLCBUZXh0IH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IGNvbGxpc2lvbkxhYiBmcm9tICcuLi8uLi9jb2xsaXNpb25MYWIuanMnO1xyXG5pbXBvcnQgQ29sbGlzaW9uTGFiU3RyaW5ncyBmcm9tICcuLi8uLi9Db2xsaXNpb25MYWJTdHJpbmdzLmpzJztcclxuaW1wb3J0IENvbGxpc2lvbkxhYkNvbnN0YW50cyBmcm9tICcuLi8uLi9jb21tb24vQ29sbGlzaW9uTGFiQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IFBsYXlBcmVhIGZyb20gJy4uLy4uL2NvbW1vbi9tb2RlbC9QbGF5QXJlYS5qcyc7XHJcbmltcG9ydCBCYWxsU3lzdGVtTm9kZSBmcm9tICcuLi8uLi9jb21tb24vdmlldy9CYWxsU3lzdGVtTm9kZS5qcyc7XHJcbmltcG9ydCBJbnRyb0JhbGxTeXN0ZW0gZnJvbSAnLi4vbW9kZWwvSW50cm9CYWxsU3lzdGVtLmpzJztcclxuaW1wb3J0IENoYW5nZUluTW9tZW50dW1WZWN0b3JOb2RlIGZyb20gJy4vQ2hhbmdlSW5Nb21lbnR1bVZlY3Rvck5vZGUuanMnO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IENIQU5HRV9JTl9NT01FTlRVTV9URVhUX1lfT0ZGU0VUID0gMzA7IC8vIFZlcnRpY2FsIG1hcmdpbiBiZXR3ZWVuIHRoZSBsYWJlbCBhbmQgdGhlIENoYW5nZUluTW9tZW50dW1WZWN0b3JOb2Rlcy5cclxuXHJcbmNsYXNzIEludHJvQmFsbFN5c3RlbU5vZGUgZXh0ZW5kcyBCYWxsU3lzdGVtTm9kZSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7SW50cm9CYWxsU3lzdGVtfSBiYWxsU3lzdGVtXHJcbiAgICogQHBhcmFtIHtQbGF5QXJlYX0gcGxheUFyZWFcclxuICAgKiBAcGFyYW0ge1Byb3BlcnR5Ljxib29sZWFuPn0gdmFsdWVzVmlzaWJsZVByb3BlcnR5XHJcbiAgICogQHBhcmFtIHtQcm9wZXJ0eS48Ym9vbGVhbj59IHZlbG9jaXR5VmVjdG9yVmlzaWJsZVByb3BlcnR5XHJcbiAgICogQHBhcmFtIHtQcm9wZXJ0eS48Ym9vbGVhbj59IG1vbWVudHVtVmVjdG9yVmlzaWJsZVByb3BlcnR5XHJcbiAgICogQHBhcmFtIHtQcm9wZXJ0eS48Ym9vbGVhbj59IGlzUGxheWluZ1Byb3BlcnR5XHJcbiAgICogQHBhcmFtIHtNb2RlbFZpZXdUcmFuc2Zvcm0yfSBtb2RlbFZpZXdUcmFuc2Zvcm1cclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIGJhbGxTeXN0ZW0sXHJcbiAgICAgICAgICAgICAgIHBsYXlBcmVhLFxyXG4gICAgICAgICAgICAgICB2YWx1ZXNWaXNpYmxlUHJvcGVydHksXHJcbiAgICAgICAgICAgICAgIHZlbG9jaXR5VmVjdG9yVmlzaWJsZVByb3BlcnR5LFxyXG4gICAgICAgICAgICAgICBtb21lbnR1bVZlY3RvclZpc2libGVQcm9wZXJ0eSxcclxuICAgICAgICAgICAgICAgaXNQbGF5aW5nUHJvcGVydHksXHJcbiAgICAgICAgICAgICAgIG1vZGVsVmlld1RyYW5zZm9ybSxcclxuICAgICAgICAgICAgICAgb3B0aW9ucyApIHtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIGJhbGxTeXN0ZW0gaW5zdGFuY2VvZiBJbnRyb0JhbGxTeXN0ZW0sIGBpbnZhbGlkIGJhbGxTeXN0ZW06ICR7YmFsbFN5c3RlbX1gICk7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBwbGF5QXJlYSBpbnN0YW5jZW9mIFBsYXlBcmVhLCBgaW52YWxpZCBwbGF5QXJlYTogJHtwbGF5QXJlYX1gICk7XHJcbiAgICBhc3NlcnQgJiYgQXNzZXJ0VXRpbHMuYXNzZXJ0UHJvcGVydHlPZiggdmFsdWVzVmlzaWJsZVByb3BlcnR5LCAnYm9vbGVhbicgKTtcclxuICAgIGFzc2VydCAmJiBBc3NlcnRVdGlscy5hc3NlcnRQcm9wZXJ0eU9mKCB2ZWxvY2l0eVZlY3RvclZpc2libGVQcm9wZXJ0eSwgJ2Jvb2xlYW4nICk7XHJcbiAgICBhc3NlcnQgJiYgQXNzZXJ0VXRpbHMuYXNzZXJ0UHJvcGVydHlPZiggbW9tZW50dW1WZWN0b3JWaXNpYmxlUHJvcGVydHksICdib29sZWFuJyApO1xyXG4gICAgYXNzZXJ0ICYmIEFzc2VydFV0aWxzLmFzc2VydFByb3BlcnR5T2YoIGlzUGxheWluZ1Byb3BlcnR5LCAnYm9vbGVhbicgKTtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIG1vZGVsVmlld1RyYW5zZm9ybSBpbnN0YW5jZW9mIE1vZGVsVmlld1RyYW5zZm9ybTIsIGBpbnZhbGlkIG1vZGVsVmlld1RyYW5zZm9ybTogJHttb2RlbFZpZXdUcmFuc2Zvcm19YCApO1xyXG5cclxuICAgIHN1cGVyKCBiYWxsU3lzdGVtLFxyXG4gICAgICBwbGF5QXJlYSxcclxuICAgICAgdmFsdWVzVmlzaWJsZVByb3BlcnR5LFxyXG4gICAgICB2ZWxvY2l0eVZlY3RvclZpc2libGVQcm9wZXJ0eSxcclxuICAgICAgbW9tZW50dW1WZWN0b3JWaXNpYmxlUHJvcGVydHksXHJcbiAgICAgIGlzUGxheWluZ1Byb3BlcnR5LFxyXG4gICAgICBtb2RlbFZpZXdUcmFuc2Zvcm0sXHJcbiAgICAgIG9wdGlvbnMgKTtcclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBDcmVhdGUgdGhlIGNvbnRhaW5lciBmb3IgdGhlIENoYW5nZSBJbiBNb21lbnR1bSBWZWN0b3JzLlxyXG4gICAgY29uc3QgY2hhbmdlSW5Nb21lbnR1bUNvbnRhaW5lciA9IG5ldyBOb2RlKCk7XHJcblxyXG4gICAgLy8gTG9vcCB0aHJvdWdoIGVhY2ggcG9zc2libGUgY2hhbmdlSW5Nb21lbnR1bVByb3BlcnR5IGFuZCBjcmVhdGUgdGhlIGNvcnJlc3BvbmRpbmcgQ2hhbmdlSW5Nb21lbnR1bVZlY3Rvck5vZGUgb2ZcclxuICAgIC8vIGVhY2ggQmFsbC5cclxuICAgIGJhbGxTeXN0ZW0uYmFsbFRvQ2hhbmdlSW5Nb21lbnR1bVByb3BlcnR5LmZvckVhY2goICggY2hhbmdlSW5Nb21lbnR1bVByb3BlcnR5LCBiYWxsICkgPT4ge1xyXG5cclxuICAgICAgLy8gQ3JlYXRlIHRoZSBjb3JyZXNwb25kaW5nIENoYW5nZUluTW9tZW50dW1WZWN0b3JOb2RlIGZvciBlYWNoIHByZXBvcHVsYXRlZEJhbGwuXHJcbiAgICAgIGNvbnN0IGNoYW5nZUluTW9tZW50dW1WZWN0b3JOb2RlID0gbmV3IENoYW5nZUluTW9tZW50dW1WZWN0b3JOb2RlKFxyXG4gICAgICAgIGNoYW5nZUluTW9tZW50dW1Qcm9wZXJ0eSxcclxuICAgICAgICBiYWxsU3lzdGVtLmNoYW5nZUluTW9tZW50dW1PcGFjaXR5UHJvcGVydHksXHJcbiAgICAgICAgYmFsbC5wb3NpdGlvblByb3BlcnR5LFxyXG4gICAgICAgIHBsYXlBcmVhLmJvdW5kcyxcclxuICAgICAgICBtb2RlbFZpZXdUcmFuc2Zvcm1cclxuICAgICAgKTtcclxuXHJcbiAgICAgIC8vIEFkZCB0aGUgQ2hhbmdlSW5Nb21lbnR1bVZlY3Rvck5vZGUgdG8gdGhlIGNvbnRhaW5lci5cclxuICAgICAgY2hhbmdlSW5Nb21lbnR1bUNvbnRhaW5lci5hZGRDaGlsZCggY2hhbmdlSW5Nb21lbnR1bVZlY3Rvck5vZGUgKTtcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBBZGQgYWxsIENoYW5nZUluTW9tZW50dW1WZWN0b3JOb2RlcyBhcyBjaGlsZHJlbiBvZiB0aGlzIE5vZGUuXHJcbiAgICB0aGlzLmFkZENoaWxkKCBjaGFuZ2VJbk1vbWVudHVtQ29udGFpbmVyICk7XHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gQ3JlYXRlIHRoZSAnQ2hhbmdlIGluIE1vbWVudHVtJyB0ZXh0LCB3aGljaCBpcyBkaXNwbGF5ZWQgYWJvdmUgdGhlIGNvbGxpc2lvbiBwb2ludC5cclxuICAgIGNvbnN0IGNoYW5nZUluTW9tZW50dW1UZXh0ID0gbmV3IFRleHQoIENvbGxpc2lvbkxhYlN0cmluZ3MuY2hhbmdlSW5Nb21lbnR1bSwge1xyXG4gICAgICBmb250OiBDb2xsaXNpb25MYWJDb25zdGFudHMuRElTUExBWV9GT05ULFxyXG4gICAgICBtYXhXaWR0aDogMTYwLCAvLyBDb25zdHJhaW4gd2lkdGggZm9yIGkxOG4uIERldGVybWluZWQgZW1waXJpY2FsbHkuXHJcbiAgICAgIHRvcDogbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WSggcGxheUFyZWEuYm91bmRzLmNlbnRlclkgKVxyXG4gICAgICAgICAgIC0gQ2hhbmdlSW5Nb21lbnR1bVZlY3Rvck5vZGUuQ0hBTkdFX0lOX01PTUVOVFVNX1lfT0ZGU0VUXHJcbiAgICAgICAgICAgLSBDSEFOR0VfSU5fTU9NRU5UVU1fVEVYVF9ZX09GRlNFVFxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIEFkZCB0aGUgJ0NoYW5nZSBpbiBNb21lbnR1bScgdGV4dCBhcyBhIGNoaWxkIG9mIHRoaXMgTm9kZS5cclxuICAgIHRoaXMuYWRkQ2hpbGQoIGNoYW5nZUluTW9tZW50dW1UZXh0ICk7XHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gT2JzZXJ2ZSB3aGVuIHRoZSBjaGFuZ2VJbk1vbWVudHVtT3BhY2l0eVByb3BlcnR5IGNoYW5nZXMgYW5kIG1hdGNoIHRoZSBvcGFjaXR5IG9mIHRoZSAnQ2hhbmdlIGluIE1vbWVudHVtJyBUZXh0LlxyXG4gICAgLy8gTGluayBpcyBuZXZlciB1bmxpbmtlZCBzaW5jZSBJbnRyb0JhbGxTeXN0ZW1zIGFyZSBuZXZlciBkaXNwb3NlZC5cclxuICAgIGJhbGxTeXN0ZW0uY2hhbmdlSW5Nb21lbnR1bU9wYWNpdHlQcm9wZXJ0eS5saW5rQXR0cmlidXRlKCBjaGFuZ2VJbk1vbWVudHVtVGV4dCwgJ29wYWNpdHknICk7XHJcblxyXG4gICAgLy8gT2JzZXJ2ZSB3aGVuIHRoZSBjb2xsaXNpb24tcG9pbnQgY2hhbmdlcyBhbmQgbWF0Y2ggdGhlIHgtcG9zaXRpb24gb2YgdGhlICdDaGFuZ2UgaW4gTW9tZW50dW0nIFRleHQsIGlmIGl0IGV4aXN0cy5cclxuICAgIC8vIExpbmsgaXMgbmV2ZXIgdW5saW5rZWQgc2luY2UgSW50cm9CYWxsU3lzdGVtcyBhcmUgbmV2ZXIgZGlzcG9zZWQuXHJcbiAgICBiYWxsU3lzdGVtLmNvbGxpc2lvblBvaW50UHJvcGVydHkubGluayggY29sbGlzaW9uUG9pbnQgPT4ge1xyXG4gICAgICBjb2xsaXNpb25Qb2ludCAmJiBjaGFuZ2VJbk1vbWVudHVtVGV4dC5zZXRDZW50ZXJYKCBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdYKCBjb2xsaXNpb25Qb2ludC54ICkgKTtcclxuICAgIH0gKTtcclxuICB9XHJcbn1cclxuXHJcbmNvbGxpc2lvbkxhYi5yZWdpc3RlciggJ0ludHJvQmFsbFN5c3RlbU5vZGUnLCBJbnRyb0JhbGxTeXN0ZW1Ob2RlICk7XHJcbmV4cG9ydCBkZWZhdWx0IEludHJvQmFsbFN5c3RlbU5vZGU7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFdBQVcsTUFBTSwwQ0FBMEM7QUFDbEUsT0FBT0MsbUJBQW1CLE1BQU0sdURBQXVEO0FBQ3ZGLFNBQVNDLElBQUksRUFBRUMsSUFBSSxRQUFRLG1DQUFtQztBQUM5RCxPQUFPQyxZQUFZLE1BQU0sdUJBQXVCO0FBQ2hELE9BQU9DLG1CQUFtQixNQUFNLDhCQUE4QjtBQUM5RCxPQUFPQyxxQkFBcUIsTUFBTSx1Q0FBdUM7QUFDekUsT0FBT0MsUUFBUSxNQUFNLGdDQUFnQztBQUNyRCxPQUFPQyxjQUFjLE1BQU0scUNBQXFDO0FBQ2hFLE9BQU9DLGVBQWUsTUFBTSw2QkFBNkI7QUFDekQsT0FBT0MsMEJBQTBCLE1BQU0saUNBQWlDOztBQUV4RTtBQUNBLE1BQU1DLGdDQUFnQyxHQUFHLEVBQUUsQ0FBQyxDQUFDOztBQUU3QyxNQUFNQyxtQkFBbUIsU0FBU0osY0FBYyxDQUFDO0VBRS9DO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VLLFdBQVdBLENBQUVDLFVBQVUsRUFDVkMsUUFBUSxFQUNSQyxxQkFBcUIsRUFDckJDLDZCQUE2QixFQUM3QkMsNkJBQTZCLEVBQzdCQyxpQkFBaUIsRUFD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