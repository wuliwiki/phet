// Copyright 2020-2022, University of Colorado Boulder

/**
 * MomentaDiagramAccordionBox appears on the bottom-right side of all Screens. It's a feature ported from the flash
 * version which displays a graph of the momentum vectors of all the balls that are currently in the system. The
 * AccordionBox is the same size as control panels.
 *
 * The MomentaDiagramAccordionBox displays the following:
 *   - a grid with a zoom-in and zoom-out button to change the scaling.
 *   - momentum vectors of all the balls in the system.
 *   - the total momenta vector of the system.
 *
 * MomentaDiagramAccordionBoxes are created at the start of the sim and are never disposed, so no dispose method is
 * necessary.
 *
 * @author Brandon Li
 */

import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import Bounds2 from '../../../../dot/js/Bounds2.js';
import GridNode from '../../../../griddle/js/GridNode.js';
import { Shape } from '../../../../kite/js/imports.js';
import merge from '../../../../phet-core/js/merge.js';
import AssertUtils from '../../../../phetcommon/js/AssertUtils.js';
import ModelViewTransform2 from '../../../../phetcommon/js/view/ModelViewTransform2.js';
import { Color, Node, Rectangle, Text } from '../../../../scenery/js/imports.js';
import AccordionBox from '../../../../sun/js/AccordionBox.js';
import collisionLab from '../../collisionLab.js';
import CollisionLabStrings from '../../CollisionLabStrings.js';
import CollisionLabConstants from '../../common/CollisionLabConstants.js';
import CollisionLabColors from '../CollisionLabColors.js';
import Ball from '../model/Ball.js';
import MomentaDiagram from '../model/MomentaDiagram.js';
import PlayArea from '../model/PlayArea.js';
import MomentaDiagramVectorNode from './MomentaDiagramVectorNode.js';
import MomentaDiagramZoomControlSet from './MomentaDiagramZoomControlSet.js';

// constants
const PANEL_X_MARGIN = CollisionLabConstants.PANEL_X_MARGIN;
const PANEL_Y_MARGIN = CollisionLabConstants.PANEL_Y_MARGIN;
const PANEL_CORNER_RADIUS = CollisionLabConstants.PANEL_CORNER_RADIUS;
const MOMENTA_DIAGRAM_ASPECT_RATIO = CollisionLabConstants.MOMENTA_DIAGRAM_ASPECT_RATIO;
class MomentaDiagramAccordionBox extends AccordionBox {
  /**
   * @param {MomentaDiagram} momentaDiagram - the model for the MomentaDiagramAccordionBox.
   * @param {ObservableArrayDef.<Ball>} balls - the Balls that are in the PlayArea system.
   * @param {Object} [options]
   */
  constructor(momentaDiagram, balls, options) {
    assert && assert(momentaDiagram instanceof MomentaDiagram, `invalid momentaDiagram: ${momentaDiagram}`);
    assert && assert(Array.isArray(balls)) && AssertUtils.assertArrayOf(balls, Ball);

    //----------------------------------------------------------------------------------------

    options = merge({
      gridLineSpacing: 1,
      // {number} - the spacing of the grid lines, in model units (kg * m/s)
      zoomControlMargin: 5,
      // {number} - the margins between the edge of the Grid and the zoom controls
      dimension: PlayArea.Dimension.TWO,
      // {number} - the dimension of the screen that the MomentaDiagram appears in.

      // {number} - the width of the content (grid) of the MomentaDiagramAccordionBox.
      contentWidth: CollisionLabConstants.CONTROL_PANEL_CONTENT_WIDTH,
      // superclass options
      titleNode: new Text(CollisionLabStrings.momentaDiagram, {
        font: CollisionLabConstants.DISPLAY_FONT
      }),
      expandedProperty: momentaDiagram.expandedProperty,
      cornerRadius: PANEL_CORNER_RADIUS,
      contentXMargin: PANEL_X_MARGIN,
      contentYMargin: PANEL_Y_MARGIN,
      buttonXMargin: PANEL_X_MARGIN,
      buttonYMargin: PANEL_Y_MARGIN,
      titleYMargin: PANEL_Y_MARGIN,
      titleXMargin: PANEL_X_MARGIN,
      titleXSpacing: PANEL_X_MARGIN,
      contentYSpacing: 0,
      titleAlignX: 'left',
      expandCollapseButtonOptions: {
        sideLength: 22,
        touchAreaXDilation: 6,
        touchAreaYDilation: 6
      },
      fill: CollisionLabColors.PANEL_FILL,
      stroke: CollisionLabColors.PANEL_STROKE
    }, options);

    // Assign a max width to the title node for i18n.
    options.titleNode.maxWidth = options.contentWidth - options.expandCollapseButtonOptions.sideLength - options.titleXSpacing - options.titleXMargin;

    //----------------------------------------------------------------------------------------

    // Compute the view Bounds of the GridNode.
    const gridViewBounds = new Bounds2(0, 0, options.contentWidth, options.contentWidth * MOMENTA_DIAGRAM_ASPECT_RATIO.height / MOMENTA_DIAGRAM_ASPECT_RATIO.width);

    // Create a separate modelViewTransform in a Property for mapping MomentaDiagramCoordinates to view coordinates.
    const modelViewTransformProperty = new DerivedProperty([momentaDiagram.boundsProperty], bounds => {
      return ModelViewTransform2.createRectangleInvertedYMapping(bounds, gridViewBounds);
    }, {
      valueType: ModelViewTransform2
    });

    //----------------------------------------------------------------------------------------

    // Create the Grid. Its spacings and offsets will be adjusted when the modelViewTransformProperty changes. Never
    // disposed since MomentaDiagramAccordionBoxes last for the life-time of the sim.
    const gridNode = new GridNode(gridViewBounds.width, gridViewBounds.height, {
      minorLineOptions: {
        lineWidth: CollisionLabConstants.MINOR_GRIDLINE_WIDTH,
        stroke: CollisionLabColors.MAJOR_GRIDLINE_COLOR
      },
      modelViewTransformProperty: modelViewTransformProperty,
      minorHorizontalLineSpacing: options.gridLineSpacing,
      minorVerticalLineSpacing: options.gridLineSpacing
    });

    //----------------------------------------------------------------------------------------

    // Create the container for all Momenta Vector Nodes.
    const momentaVectorContainer = new Node();

    // Loop through each possible Ball and its associated momentaVector. These Balls are NOT necessarily the Balls
    // currently within the PlayArea system, so we are responsible for updating its visibility when necessary.
    momentaDiagram.ballToMomentaVectorMap.forEach((momentaVector, ball) => {
      // Create the momenta Vector Node for the momentaVector.
      const momentaVectorNode = new MomentaDiagramVectorNode(momentaVector, ball.index, modelViewTransformProperty, {
        dimension: options.dimension,
        isTotalMomentaVector: false
      });

      // Add the Vector Node to the container.
      momentaVectorContainer.addChild(momentaVectorNode);

      // Observe when Balls are added or removed from the PlayArea system and adjust the visibility of the momenta
      // Vector, which is only visible if the ball is in the PlayArea system.
      balls.lengthProperty.link(() => {
        momentaVectorNode.visible = balls.includes(ball);
      });
    });

    // Create the Momenta Vector Node for the 'total' sum of the momenta Vectors and add it to the container.
    const sumMomentaVectorNode = new MomentaDiagramVectorNode(momentaDiagram.totalMomentumVector, CollisionLabStrings.total, modelViewTransformProperty, {
      dimension: options.dimension,
      isTotalMomentaVector: true,
      arrowOptions: {
        fill: CollisionLabColors.TOTAL_MOMENTUM_VECTOR_FILL
      },
      textOptions: {
        maxWidth: 50
      }
    });
    momentaVectorContainer.addChild(sumMomentaVectorNode);

    //----------------------------------------------------------------------------------------

    // Create the Border Rectangle of the Grid.
    const borderNode = new Rectangle(gridViewBounds, {
      stroke: Color.BLACK,
      lineWidth: 2
    });

    // Create the background behind the Grid.
    const backgroundNode = new Rectangle(gridViewBounds, {
      fill: CollisionLabColors.GRID_BACKGROUND
    });

    // Create the Zoom Controls
    const zoomControlSet = new MomentaDiagramZoomControlSet(momentaDiagram, {
      bottom: gridViewBounds.maxY - options.zoomControlMargin,
      right: gridViewBounds.maxX - options.zoomControlMargin
    });

    // Create a container of the content of the MomentaDiagramAccordionBox.
    const contentNode = new Node({
      children: [backgroundNode, gridNode, borderNode, momentaVectorContainer, zoomControlSet],
      clipArea: Shape.bounds(gridViewBounds)
    });
    super(contentNode, options);
  }
}
collisionLab.register('MomentaDiagramAccordionBox', MomentaDiagramAccordionBox);
export default MomentaDiagramAccordionBox;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJCb3VuZHMyIiwiR3JpZE5vZGUiLCJTaGFwZSIsIm1lcmdlIiwiQXNzZXJ0VXRpbHMiLCJNb2RlbFZpZXdUcmFuc2Zvcm0yIiwiQ29sb3IiLCJOb2RlIiwiUmVjdGFuZ2xlIiwiVGV4dCIsIkFjY29yZGlvbkJveCIsImNvbGxpc2lvbkxhYiIsIkNvbGxpc2lvbkxhYlN0cmluZ3MiLCJDb2xsaXNpb25MYWJDb25zdGFudHMiLCJDb2xsaXNpb25MYWJDb2xvcnMiLCJCYWxsIiwiTW9tZW50YURpYWdyYW0iLCJQbGF5QXJlYSIsIk1vbWVudGFEaWFncmFtVmVjdG9yTm9kZSIsIk1vbWVudGFEaWFncmFtWm9vbUNvbnRyb2xTZXQiLCJQQU5FTF9YX01BUkdJTiIsIlBBTkVMX1lfTUFSR0lOIiwiUEFORUxfQ09STkVSX1JBRElVUyIsIk1PTUVOVEFfRElBR1JBTV9BU1BFQ1RfUkFUSU8iLCJNb21lbnRhRGlhZ3JhbUFjY29yZGlvbkJveCIsImNvbnN0cnVjdG9yIiwibW9tZW50YURpYWdyYW0iLCJiYWxscyIsIm9wdGlvbnMiLCJhc3NlcnQiLCJBcnJheSIsImlzQXJyYXkiLCJhc3NlcnRBcnJheU9mIiwiZ3JpZExpbmVTcGFjaW5nIiwiem9vbUNvbnRyb2xNYXJnaW4iLCJkaW1lbnNpb24iLCJEaW1lbnNpb24iLCJUV08iLCJjb250ZW50V2lkdGgiLCJDT05UUk9MX1BBTkVMX0NPTlRFTlRfV0lEVEgiLCJ0aXRsZU5vZGUiLCJmb250IiwiRElTUExBWV9GT05UIiwiZXhwYW5kZWRQcm9wZXJ0eSIsImNvcm5lclJhZGl1cyIsImNvbnRlbnRYTWFyZ2luIiwiY29udGVudFlNYXJnaW4iLCJidXR0b25YTWFyZ2luIiwiYnV0dG9uWU1hcmdpbiIsInRpdGxlWU1hcmdpbiIsInRpdGxlWE1hcmdpbiIsInRpdGxlWFNwYWNpbmciLCJjb250ZW50WVNwYWNpbmciLCJ0aXRsZUFsaWduWCIsImV4cGFuZENvbGxhcHNlQnV0dG9uT3B0aW9ucyIsInNpZGVMZW5ndGgiLCJ0b3VjaEFyZWFYRGlsYXRpb24iLCJ0b3VjaEFyZWFZRGlsYXRpb24iLCJmaWxsIiwiUEFORUxfRklMTCIsInN0cm9rZSIsIlBBTkVMX1NUUk9LRSIsIm1heFdpZHRoIiwiZ3JpZFZpZXdCb3VuZHMiLCJoZWlnaHQiLCJ3aWR0aCIsIm1vZGVsVmlld1RyYW5zZm9ybVByb3BlcnR5IiwiYm91bmRzUHJvcGVydHkiLCJib3VuZHMiLCJjcmVhdGVSZWN0YW5nbGVJbnZlcnRlZFlNYXBwaW5nIiwidmFsdWVUeXBlIiwiZ3JpZE5vZGUiLCJtaW5vckxpbmVPcHRpb25zIiwibGluZVdpZHRoIiwiTUlOT1JfR1JJRExJTkVfV0lEVEgiLCJNQUpPUl9HUklETElORV9DT0xPUiIsIm1pbm9ySG9yaXpvbnRhbExpbmVTcGFjaW5nIiwibWlub3JWZXJ0aWNhbExpbmVTcGFjaW5nIiwibW9tZW50YVZlY3RvckNvbnRhaW5lciIsImJhbGxUb01vbWVudGFWZWN0b3JNYXAiLCJmb3JFYWNoIiwibW9tZW50YVZlY3RvciIsImJhbGwiLCJtb21lbnRhVmVjdG9yTm9kZSIsImluZGV4IiwiaXNUb3RhbE1vbWVudGFWZWN0b3IiLCJhZGRDaGlsZCIsImxlbmd0aFByb3BlcnR5IiwibGluayIsInZpc2libGUiLCJpbmNsdWRlcyIsInN1bU1vbWVudGFWZWN0b3JOb2RlIiwidG90YWxNb21lbnR1bVZlY3RvciIsInRvdGFsIiwiYXJyb3dPcHRpb25zIiwiVE9UQUxfTU9NRU5UVU1fVkVDVE9SX0ZJTEwiLCJ0ZXh0T3B0aW9ucyIsImJvcmRlck5vZGUiLCJCTEFDSyIsImJhY2tncm91bmROb2RlIiwiR1JJRF9CQUNLR1JPVU5EIiwiem9vbUNvbnRyb2xTZXQiLCJib3R0b20iLCJtYXhZIiwicmlnaHQiLCJtYXhYIiwiY29udGVudE5vZGUiLCJjaGlsZHJlbiIsImNsaXBBcmVhIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJNb21lbnRhRGlhZ3JhbUFjY29yZGlvbkJveC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMC0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBNb21lbnRhRGlhZ3JhbUFjY29yZGlvbkJveCBhcHBlYXJzIG9uIHRoZSBib3R0b20tcmlnaHQgc2lkZSBvZiBhbGwgU2NyZWVucy4gSXQncyBhIGZlYXR1cmUgcG9ydGVkIGZyb20gdGhlIGZsYXNoXHJcbiAqIHZlcnNpb24gd2hpY2ggZGlzcGxheXMgYSBncmFwaCBvZiB0aGUgbW9tZW50dW0gdmVjdG9ycyBvZiBhbGwgdGhlIGJhbGxzIHRoYXQgYXJlIGN1cnJlbnRseSBpbiB0aGUgc3lzdGVtLiBUaGVcclxuICogQWNjb3JkaW9uQm94IGlzIHRoZSBzYW1lIHNpemUgYXMgY29udHJvbCBwYW5lbHMuXHJcbiAqXHJcbiAqIFRoZSBNb21lbnRhRGlhZ3JhbUFjY29yZGlvbkJveCBkaXNwbGF5cyB0aGUgZm9sbG93aW5nOlxyXG4gKiAgIC0gYSBncmlkIHdpdGggYSB6b29tLWluIGFuZCB6b29tLW91dCBidXR0b24gdG8gY2hhbmdlIHRoZSBzY2FsaW5nLlxyXG4gKiAgIC0gbW9tZW50dW0gdmVjdG9ycyBvZiBhbGwgdGhlIGJhbGxzIGluIHRoZSBzeXN0ZW0uXHJcbiAqICAgLSB0aGUgdG90YWwgbW9tZW50YSB2ZWN0b3Igb2YgdGhlIHN5c3RlbS5cclxuICpcclxuICogTW9tZW50YURpYWdyYW1BY2NvcmRpb25Cb3hlcyBhcmUgY3JlYXRlZCBhdCB0aGUgc3RhcnQgb2YgdGhlIHNpbSBhbmQgYXJlIG5ldmVyIGRpc3Bvc2VkLCBzbyBubyBkaXNwb3NlIG1ldGhvZCBpc1xyXG4gKiBuZWNlc3NhcnkuXHJcbiAqXHJcbiAqIEBhdXRob3IgQnJhbmRvbiBMaVxyXG4gKi9cclxuXHJcbmltcG9ydCBEZXJpdmVkUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9EZXJpdmVkUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgQm91bmRzMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvQm91bmRzMi5qcyc7XHJcbmltcG9ydCBHcmlkTm9kZSBmcm9tICcuLi8uLi8uLi8uLi9ncmlkZGxlL2pzL0dyaWROb2RlLmpzJztcclxuaW1wb3J0IHsgU2hhcGUgfSBmcm9tICcuLi8uLi8uLi8uLi9raXRlL2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgbWVyZ2UgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL21lcmdlLmpzJztcclxuaW1wb3J0IEFzc2VydFV0aWxzIGZyb20gJy4uLy4uLy4uLy4uL3BoZXRjb21tb24vanMvQXNzZXJ0VXRpbHMuanMnO1xyXG5pbXBvcnQgTW9kZWxWaWV3VHJhbnNmb3JtMiBmcm9tICcuLi8uLi8uLi8uLi9waGV0Y29tbW9uL2pzL3ZpZXcvTW9kZWxWaWV3VHJhbnNmb3JtMi5qcyc7XHJcbmltcG9ydCB7IENvbG9yLCBOb2RlLCBSZWN0YW5nbGUsIFRleHQgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgQWNjb3JkaW9uQm94IGZyb20gJy4uLy4uLy4uLy4uL3N1bi9qcy9BY2NvcmRpb25Cb3guanMnO1xyXG5pbXBvcnQgY29sbGlzaW9uTGFiIGZyb20gJy4uLy4uL2NvbGxpc2lvbkxhYi5qcyc7XHJcbmltcG9ydCBDb2xsaXNpb25MYWJTdHJpbmdzIGZyb20gJy4uLy4uL0NvbGxpc2lvbkxhYlN0cmluZ3MuanMnO1xyXG5pbXBvcnQgQ29sbGlzaW9uTGFiQ29uc3RhbnRzIGZyb20gJy4uLy4uL2NvbW1vbi9Db2xsaXNpb25MYWJDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgQ29sbGlzaW9uTGFiQ29sb3JzIGZyb20gJy4uL0NvbGxpc2lvbkxhYkNvbG9ycy5qcyc7XHJcbmltcG9ydCBCYWxsIGZyb20gJy4uL21vZGVsL0JhbGwuanMnO1xyXG5pbXBvcnQgTW9tZW50YURpYWdyYW0gZnJvbSAnLi4vbW9kZWwvTW9tZW50YURpYWdyYW0uanMnO1xyXG5pbXBvcnQgUGxheUFyZWEgZnJvbSAnLi4vbW9kZWwvUGxheUFyZWEuanMnO1xyXG5pbXBvcnQgTW9tZW50YURpYWdyYW1WZWN0b3JOb2RlIGZyb20gJy4vTW9tZW50YURpYWdyYW1WZWN0b3JOb2RlLmpzJztcclxuaW1wb3J0IE1vbWVudGFEaWFncmFtWm9vbUNvbnRyb2xTZXQgZnJvbSAnLi9Nb21lbnRhRGlhZ3JhbVpvb21Db250cm9sU2V0LmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBQQU5FTF9YX01BUkdJTiA9IENvbGxpc2lvbkxhYkNvbnN0YW50cy5QQU5FTF9YX01BUkdJTjtcclxuY29uc3QgUEFORUxfWV9NQVJHSU4gPSBDb2xsaXNpb25MYWJDb25zdGFudHMuUEFORUxfWV9NQVJHSU47XHJcbmNvbnN0IFBBTkVMX0NPUk5FUl9SQURJVVMgPSBDb2xsaXNpb25MYWJDb25zdGFudHMuUEFORUxfQ09STkVSX1JBRElVUztcclxuY29uc3QgTU9NRU5UQV9ESUFHUkFNX0FTUEVDVF9SQVRJTyA9IENvbGxpc2lvbkxhYkNvbnN0YW50cy5NT01FTlRBX0RJQUdSQU1fQVNQRUNUX1JBVElPO1xyXG5cclxuY2xhc3MgTW9tZW50YURpYWdyYW1BY2NvcmRpb25Cb3ggZXh0ZW5kcyBBY2NvcmRpb25Cb3gge1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge01vbWVudGFEaWFncmFtfSBtb21lbnRhRGlhZ3JhbSAtIHRoZSBtb2RlbCBmb3IgdGhlIE1vbWVudGFEaWFncmFtQWNjb3JkaW9uQm94LlxyXG4gICAqIEBwYXJhbSB7T2JzZXJ2YWJsZUFycmF5RGVmLjxCYWxsPn0gYmFsbHMgLSB0aGUgQmFsbHMgdGhhdCBhcmUgaW4gdGhlIFBsYXlBcmVhIHN5c3RlbS5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIG1vbWVudGFEaWFncmFtLCBiYWxscywgb3B0aW9ucyApIHtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIG1vbWVudGFEaWFncmFtIGluc3RhbmNlb2YgTW9tZW50YURpYWdyYW0sIGBpbnZhbGlkIG1vbWVudGFEaWFncmFtOiAke21vbWVudGFEaWFncmFtfWAgKTtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIEFycmF5LmlzQXJyYXkoIGJhbGxzICkgKSAmJiBBc3NlcnRVdGlscy5hc3NlcnRBcnJheU9mKCBiYWxscywgQmFsbCApO1xyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIG9wdGlvbnMgPSBtZXJnZSgge1xyXG5cclxuICAgICAgZ3JpZExpbmVTcGFjaW5nOiAxLCAgIC8vIHtudW1iZXJ9IC0gdGhlIHNwYWNpbmcgb2YgdGhlIGdyaWQgbGluZXMsIGluIG1vZGVsIHVuaXRzIChrZyAqIG0vcylcclxuICAgICAgem9vbUNvbnRyb2xNYXJnaW46IDUsIC8vIHtudW1iZXJ9IC0gdGhlIG1hcmdpbnMgYmV0d2VlbiB0aGUgZWRnZSBvZiB0aGUgR3JpZCBhbmQgdGhlIHpvb20gY29udHJvbHNcclxuICAgICAgZGltZW5zaW9uOiBQbGF5QXJlYS5EaW1lbnNpb24uVFdPLCAvLyB7bnVtYmVyfSAtIHRoZSBkaW1lbnNpb24gb2YgdGhlIHNjcmVlbiB0aGF0IHRoZSBNb21lbnRhRGlhZ3JhbSBhcHBlYXJzIGluLlxyXG5cclxuICAgICAgLy8ge251bWJlcn0gLSB0aGUgd2lkdGggb2YgdGhlIGNvbnRlbnQgKGdyaWQpIG9mIHRoZSBNb21lbnRhRGlhZ3JhbUFjY29yZGlvbkJveC5cclxuICAgICAgY29udGVudFdpZHRoOiBDb2xsaXNpb25MYWJDb25zdGFudHMuQ09OVFJPTF9QQU5FTF9DT05URU5UX1dJRFRILFxyXG5cclxuICAgICAgLy8gc3VwZXJjbGFzcyBvcHRpb25zXHJcbiAgICAgIHRpdGxlTm9kZTogbmV3IFRleHQoIENvbGxpc2lvbkxhYlN0cmluZ3MubW9tZW50YURpYWdyYW0sIHsgZm9udDogQ29sbGlzaW9uTGFiQ29uc3RhbnRzLkRJU1BMQVlfRk9OVCB9ICksXHJcbiAgICAgIGV4cGFuZGVkUHJvcGVydHk6IG1vbWVudGFEaWFncmFtLmV4cGFuZGVkUHJvcGVydHksXHJcbiAgICAgIGNvcm5lclJhZGl1czogUEFORUxfQ09STkVSX1JBRElVUyxcclxuICAgICAgY29udGVudFhNYXJnaW46IFBBTkVMX1hfTUFSR0lOLFxyXG4gICAgICBjb250ZW50WU1hcmdpbjogUEFORUxfWV9NQVJHSU4sXHJcbiAgICAgIGJ1dHRvblhNYXJnaW46IFBBTkVMX1hfTUFSR0lOLFxyXG4gICAgICBidXR0b25ZTWFyZ2luOiBQQU5FTF9ZX01BUkdJTixcclxuICAgICAgdGl0bGVZTWFyZ2luOiBQQU5FTF9ZX01BUkdJTixcclxuICAgICAgdGl0bGVYTWFyZ2luOiBQQU5FTF9YX01BUkdJTixcclxuICAgICAgdGl0bGVYU3BhY2luZzogUEFORUxfWF9NQVJHSU4sXHJcbiAgICAgIGNvbnRlbnRZU3BhY2luZzogMCxcclxuICAgICAgdGl0bGVBbGlnblg6ICdsZWZ0JyxcclxuICAgICAgZXhwYW5kQ29sbGFwc2VCdXR0b25PcHRpb25zOiB7XHJcbiAgICAgICAgc2lkZUxlbmd0aDogMjIsXHJcbiAgICAgICAgdG91Y2hBcmVhWERpbGF0aW9uOiA2LFxyXG4gICAgICAgIHRvdWNoQXJlYVlEaWxhdGlvbjogNlxyXG4gICAgICB9LFxyXG4gICAgICBmaWxsOiBDb2xsaXNpb25MYWJDb2xvcnMuUEFORUxfRklMTCxcclxuICAgICAgc3Ryb2tlOiBDb2xsaXNpb25MYWJDb2xvcnMuUEFORUxfU1RST0tFXHJcblxyXG4gICAgfSwgb3B0aW9ucyApO1xyXG5cclxuICAgIC8vIEFzc2lnbiBhIG1heCB3aWR0aCB0byB0aGUgdGl0bGUgbm9kZSBmb3IgaTE4bi5cclxuICAgIG9wdGlvbnMudGl0bGVOb2RlLm1heFdpZHRoID0gb3B0aW9ucy5jb250ZW50V2lkdGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLSBvcHRpb25zLmV4cGFuZENvbGxhcHNlQnV0dG9uT3B0aW9ucy5zaWRlTGVuZ3RoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0gb3B0aW9ucy50aXRsZVhTcGFjaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0gb3B0aW9ucy50aXRsZVhNYXJnaW47XHJcblxyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIENvbXB1dGUgdGhlIHZpZXcgQm91bmRzIG9mIHRoZSBHcmlkTm9kZS5cclxuICAgIGNvbnN0IGdyaWRWaWV3Qm91bmRzID0gbmV3IEJvdW5kczIoIDAsIDAsXHJcbiAgICAgIG9wdGlvbnMuY29udGVudFdpZHRoLFxyXG4gICAgICBvcHRpb25zLmNvbnRlbnRXaWR0aCAqIE1PTUVOVEFfRElBR1JBTV9BU1BFQ1RfUkFUSU8uaGVpZ2h0IC8gTU9NRU5UQV9ESUFHUkFNX0FTUEVDVF9SQVRJTy53aWR0aFxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgYSBzZXBhcmF0ZSBtb2RlbFZpZXdUcmFuc2Zvcm0gaW4gYSBQcm9wZXJ0eSBmb3IgbWFwcGluZyBNb21lbnRhRGlhZ3JhbUNvb3JkaW5hdGVzIHRvIHZpZXcgY29vcmRpbmF0ZXMuXHJcbiAgICBjb25zdCBtb2RlbFZpZXdUcmFuc2Zvcm1Qcm9wZXJ0eSA9IG5ldyBEZXJpdmVkUHJvcGVydHkoIFsgbW9tZW50YURpYWdyYW0uYm91bmRzUHJvcGVydHkgXSwgYm91bmRzID0+IHtcclxuICAgICAgcmV0dXJuIE1vZGVsVmlld1RyYW5zZm9ybTIuY3JlYXRlUmVjdGFuZ2xlSW52ZXJ0ZWRZTWFwcGluZyggYm91bmRzLCBncmlkVmlld0JvdW5kcyApO1xyXG4gICAgfSwge1xyXG4gICAgICB2YWx1ZVR5cGU6IE1vZGVsVmlld1RyYW5zZm9ybTJcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvLyBDcmVhdGUgdGhlIEdyaWQuIEl0cyBzcGFjaW5ncyBhbmQgb2Zmc2V0cyB3aWxsIGJlIGFkanVzdGVkIHdoZW4gdGhlIG1vZGVsVmlld1RyYW5zZm9ybVByb3BlcnR5IGNoYW5nZXMuIE5ldmVyXHJcbiAgICAvLyBkaXNwb3NlZCBzaW5jZSBNb21lbnRhRGlhZ3JhbUFjY29yZGlvbkJveGVzIGxhc3QgZm9yIHRoZSBsaWZlLXRpbWUgb2YgdGhlIHNpbS5cclxuICAgIGNvbnN0IGdyaWROb2RlID0gbmV3IEdyaWROb2RlKCBncmlkVmlld0JvdW5kcy53aWR0aCwgZ3JpZFZpZXdCb3VuZHMuaGVpZ2h0LCB7XHJcbiAgICAgIG1pbm9yTGluZU9wdGlvbnM6IHtcclxuICAgICAgICBsaW5lV2lkdGg6IENvbGxpc2lvbkxhYkNvbnN0YW50cy5NSU5PUl9HUklETElORV9XSURUSCxcclxuICAgICAgICBzdHJva2U6IENvbGxpc2lvbkxhYkNvbG9ycy5NQUpPUl9HUklETElORV9DT0xPUlxyXG4gICAgICB9LFxyXG4gICAgICBtb2RlbFZpZXdUcmFuc2Zvcm1Qcm9wZXJ0eTogbW9kZWxWaWV3VHJhbnNmb3JtUHJvcGVydHksXHJcbiAgICAgIG1pbm9ySG9yaXpvbnRhbExpbmVTcGFjaW5nOiBvcHRpb25zLmdyaWRMaW5lU3BhY2luZyxcclxuICAgICAgbWlub3JWZXJ0aWNhbExpbmVTcGFjaW5nOiBvcHRpb25zLmdyaWRMaW5lU3BhY2luZ1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIENyZWF0ZSB0aGUgY29udGFpbmVyIGZvciBhbGwgTW9tZW50YSBWZWN0b3IgTm9kZXMuXHJcbiAgICBjb25zdCBtb21lbnRhVmVjdG9yQ29udGFpbmVyID0gbmV3IE5vZGUoKTtcclxuXHJcbiAgICAvLyBMb29wIHRocm91Z2ggZWFjaCBwb3NzaWJsZSBCYWxsIGFuZCBpdHMgYXNzb2NpYXRlZCBtb21lbnRhVmVjdG9yLiBUaGVzZSBCYWxscyBhcmUgTk9UIG5lY2Vzc2FyaWx5IHRoZSBCYWxsc1xyXG4gICAgLy8gY3VycmVudGx5IHdpdGhpbiB0aGUgUGxheUFyZWEgc3lzdGVtLCBzbyB3ZSBhcmUgcmVzcG9uc2libGUgZm9yIHVwZGF0aW5nIGl0cyB2aXNpYmlsaXR5IHdoZW4gbmVjZXNzYXJ5LlxyXG4gICAgbW9tZW50YURpYWdyYW0uYmFsbFRvTW9tZW50YVZlY3Rvck1hcC5mb3JFYWNoKCAoIG1vbWVudGFWZWN0b3IsIGJhbGwgKSA9PiB7XHJcblxyXG4gICAgICAvLyBDcmVhdGUgdGhlIG1vbWVudGEgVmVjdG9yIE5vZGUgZm9yIHRoZSBtb21lbnRhVmVjdG9yLlxyXG4gICAgICBjb25zdCBtb21lbnRhVmVjdG9yTm9kZSA9IG5ldyBNb21lbnRhRGlhZ3JhbVZlY3Rvck5vZGUoIG1vbWVudGFWZWN0b3IsIGJhbGwuaW5kZXgsIG1vZGVsVmlld1RyYW5zZm9ybVByb3BlcnR5LCB7XHJcbiAgICAgICAgZGltZW5zaW9uOiBvcHRpb25zLmRpbWVuc2lvbixcclxuICAgICAgICBpc1RvdGFsTW9tZW50YVZlY3RvcjogZmFsc2VcclxuICAgICAgfSApO1xyXG5cclxuICAgICAgLy8gQWRkIHRoZSBWZWN0b3IgTm9kZSB0byB0aGUgY29udGFpbmVyLlxyXG4gICAgICBtb21lbnRhVmVjdG9yQ29udGFpbmVyLmFkZENoaWxkKCBtb21lbnRhVmVjdG9yTm9kZSApO1xyXG5cclxuICAgICAgLy8gT2JzZXJ2ZSB3aGVuIEJhbGxzIGFyZSBhZGRlZCBvciByZW1vdmVkIGZyb20gdGhlIFBsYXlBcmVhIHN5c3RlbSBhbmQgYWRqdXN0IHRoZSB2aXNpYmlsaXR5IG9mIHRoZSBtb21lbnRhXHJcbiAgICAgIC8vIFZlY3Rvciwgd2hpY2ggaXMgb25seSB2aXNpYmxlIGlmIHRoZSBiYWxsIGlzIGluIHRoZSBQbGF5QXJlYSBzeXN0ZW0uXHJcbiAgICAgIGJhbGxzLmxlbmd0aFByb3BlcnR5LmxpbmsoICgpID0+IHtcclxuICAgICAgICBtb21lbnRhVmVjdG9yTm9kZS52aXNpYmxlID0gYmFsbHMuaW5jbHVkZXMoIGJhbGwgKTtcclxuICAgICAgfSApO1xyXG5cclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgdGhlIE1vbWVudGEgVmVjdG9yIE5vZGUgZm9yIHRoZSAndG90YWwnIHN1bSBvZiB0aGUgbW9tZW50YSBWZWN0b3JzIGFuZCBhZGQgaXQgdG8gdGhlIGNvbnRhaW5lci5cclxuICAgIGNvbnN0IHN1bU1vbWVudGFWZWN0b3JOb2RlID0gbmV3IE1vbWVudGFEaWFncmFtVmVjdG9yTm9kZSggbW9tZW50YURpYWdyYW0udG90YWxNb21lbnR1bVZlY3RvcixcclxuICAgICAgQ29sbGlzaW9uTGFiU3RyaW5ncy50b3RhbCxcclxuICAgICAgbW9kZWxWaWV3VHJhbnNmb3JtUHJvcGVydHksIHtcclxuICAgICAgICBkaW1lbnNpb246IG9wdGlvbnMuZGltZW5zaW9uLFxyXG4gICAgICAgIGlzVG90YWxNb21lbnRhVmVjdG9yOiB0cnVlLFxyXG4gICAgICAgIGFycm93T3B0aW9uczoge1xyXG4gICAgICAgICAgZmlsbDogQ29sbGlzaW9uTGFiQ29sb3JzLlRPVEFMX01PTUVOVFVNX1ZFQ1RPUl9GSUxMXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0ZXh0T3B0aW9uczoge1xyXG4gICAgICAgICAgbWF4V2lkdGg6IDUwXHJcbiAgICAgICAgfVxyXG4gICAgICB9ICk7XHJcbiAgICBtb21lbnRhVmVjdG9yQ29udGFpbmVyLmFkZENoaWxkKCBzdW1Nb21lbnRhVmVjdG9yTm9kZSApO1xyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIENyZWF0ZSB0aGUgQm9yZGVyIFJlY3RhbmdsZSBvZiB0aGUgR3JpZC5cclxuICAgIGNvbnN0IGJvcmRlck5vZGUgPSBuZXcgUmVjdGFuZ2xlKCBncmlkVmlld0JvdW5kcywge1xyXG4gICAgICBzdHJva2U6IENvbG9yLkJMQUNLLFxyXG4gICAgICBsaW5lV2lkdGg6IDJcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgdGhlIGJhY2tncm91bmQgYmVoaW5kIHRoZSBHcmlkLlxyXG4gICAgY29uc3QgYmFja2dyb3VuZE5vZGUgPSBuZXcgUmVjdGFuZ2xlKCBncmlkVmlld0JvdW5kcywgeyBmaWxsOiBDb2xsaXNpb25MYWJDb2xvcnMuR1JJRF9CQUNLR1JPVU5EIH0gKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgdGhlIFpvb20gQ29udHJvbHNcclxuICAgIGNvbnN0IHpvb21Db250cm9sU2V0ID0gbmV3IE1vbWVudGFEaWFncmFtWm9vbUNvbnRyb2xTZXQoIG1vbWVudGFEaWFncmFtLCB7XHJcbiAgICAgIGJvdHRvbTogZ3JpZFZpZXdCb3VuZHMubWF4WSAtIG9wdGlvbnMuem9vbUNvbnRyb2xNYXJnaW4sXHJcbiAgICAgIHJpZ2h0OiBncmlkVmlld0JvdW5kcy5tYXhYIC0gb3B0aW9ucy56b29tQ29udHJvbE1hcmdpblxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIENyZWF0ZSBhIGNvbnRhaW5lciBvZiB0aGUgY29udGVudCBvZiB0aGUgTW9tZW50YURpYWdyYW1BY2NvcmRpb25Cb3guXHJcbiAgICBjb25zdCBjb250ZW50Tm9kZSA9IG5ldyBOb2RlKCB7XHJcbiAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgYmFja2dyb3VuZE5vZGUsXHJcbiAgICAgICAgZ3JpZE5vZGUsXHJcbiAgICAgICAgYm9yZGVyTm9kZSxcclxuICAgICAgICBtb21lbnRhVmVjdG9yQ29udGFpbmVyLFxyXG4gICAgICAgIHpvb21Db250cm9sU2V0XHJcbiAgICAgIF0sXHJcbiAgICAgIGNsaXBBcmVhOiBTaGFwZS5ib3VuZHMoIGdyaWRWaWV3Qm91bmRzIClcclxuICAgIH0gKTtcclxuICAgIHN1cGVyKCBjb250ZW50Tm9kZSwgb3B0aW9ucyApO1xyXG4gIH1cclxufVxyXG5cclxuY29sbGlzaW9uTGFiLnJlZ2lzdGVyKCAnTW9tZW50YURpYWdyYW1BY2NvcmRpb25Cb3gnLCBNb21lbnRhRGlhZ3JhbUFjY29yZGlvbkJveCApO1xyXG5leHBvcnQgZGVmYXVsdCBNb21lbnRhRGlhZ3JhbUFjY29yZGlvbkJveDsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxlQUFlLE1BQU0sd0NBQXdDO0FBQ3BFLE9BQU9DLE9BQU8sTUFBTSwrQkFBK0I7QUFDbkQsT0FBT0MsUUFBUSxNQUFNLG9DQUFvQztBQUN6RCxTQUFTQyxLQUFLLFFBQVEsZ0NBQWdDO0FBQ3RELE9BQU9DLEtBQUssTUFBTSxtQ0FBbUM7QUFDckQsT0FBT0MsV0FBVyxNQUFNLDBDQUEwQztBQUNsRSxPQUFPQyxtQkFBbUIsTUFBTSx1REFBdUQ7QUFDdkYsU0FBU0MsS0FBSyxFQUFFQyxJQUFJLEVBQUVDLFNBQVMsRUFBRUMsSUFBSSxRQUFRLG1DQUFtQztBQUNoRixPQUFPQyxZQUFZLE1BQU0sb0NBQW9DO0FBQzdELE9BQU9DLFlBQVksTUFBTSx1QkFBdUI7QUFDaEQsT0FBT0MsbUJBQW1CLE1BQU0sOEJBQThCO0FBQzlELE9BQU9DLHFCQUFxQixNQUFNLHVDQUF1QztBQUN6RSxPQUFPQyxrQkFBa0IsTUFBTSwwQkFBMEI7QUFDekQsT0FBT0MsSUFBSSxNQUFNLGtCQUFrQjtBQUNuQyxPQUFPQyxjQUFjLE1BQU0s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