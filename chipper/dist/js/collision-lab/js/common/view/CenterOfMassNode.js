// Copyright 2019-2022, University of Colorado Boulder

/**
 * CenterOfMassNode is the view representation of a BallSystem's CenterOfMass, which appears in all screens of the
 * 'Collision Lab' simulation.
 *
 * Primary responsibilities are:
 *  - Creating a XNode to represent the visual mark of the CenterOfMass's position.
 *  - Create a PlayAreaNumberDisplay to display the speed of the CenterOfMass. The NumberDisplay is only visible if
 *    both the 'Values' and 'Center of Mass' checkboxes are checked.
 *
 * For the 'Collision Lab' sim, CenterOfMasses are instantiated at the start and persists for the lifetime of the
 * simulation. Thus, links are left as-is and no dispose method is implemented.
 *
 * NOTE: Do not translate this node. It's origin must be at the origin of the view coordinate frame.
 *
 * @author Brandon Li
 * @author Alex Schor
 */

import Multilink from '../../../../axon/js/Multilink.js';
import Bounds2 from '../../../../dot/js/Bounds2.js';
import { Shape } from '../../../../kite/js/imports.js';
import AssertUtils from '../../../../phetcommon/js/AssertUtils.js';
import StringUtils from '../../../../phetcommon/js/util/StringUtils.js';
import ModelViewTransform2 from '../../../../phetcommon/js/view/ModelViewTransform2.js';
import XNode from '../../../../scenery-phet/js/XNode.js';
import { Node } from '../../../../scenery/js/imports.js';
import collisionLab from '../../collisionLab.js';
import CollisionLabStrings from '../../CollisionLabStrings.js';
import CollisionLabColors from '../CollisionLabColors.js';
import CollisionLabConstants from '../CollisionLabConstants.js';
import CenterOfMass from '../model/CenterOfMass.js';
import PlayAreaNumberDisplay from './PlayAreaNumberDisplay.js';
class CenterOfMassNode extends Node {
  /**
   * @param {CenterOfMass} centerOfMass
   * @param {Property.<boolean>} centerOfMassVisibleProperty
   * @param {Property.<boolean>} valuesVisibleProperty
   * @param {Bounds2} playAreaBounds
   * @param {ModelViewTransform2} modelViewTransform
   * @param {Object} [options]
   */
  constructor(centerOfMass, centerOfMassVisibleProperty, valuesVisibleProperty, playAreaBounds, modelViewTransform, options) {
    assert && assert(centerOfMass instanceof CenterOfMass, `Invalid centerOfMass: ${centerOfMass}`);
    assert && AssertUtils.assertPropertyOf(centerOfMassVisibleProperty, 'boolean');
    assert && AssertUtils.assertPropertyOf(valuesVisibleProperty, 'boolean');
    assert && assert(playAreaBounds instanceof Bounds2, `invalid playAreaBounds: ${playAreaBounds}`);
    assert && assert(modelViewTransform instanceof ModelViewTransform2);
    super(options);

    //----------------------------------------------------------------------------------------

    // Create the XNode to represent the visual mark of the CenterOfMass's position. Position set later.
    const xNode = new XNode({
      fill: CollisionLabColors.CENTER_OF_MASS_FILL,
      stroke: CollisionLabColors.CENTER_OF_MASS_STROKE
    });

    // Create the number display for the speed of the CenterOfMass, which appears above the xNode. Position set later.
    const speedNumberDisplay = new PlayAreaNumberDisplay(centerOfMass.speedProperty, {
      visibleProperty: valuesVisibleProperty,
      valuePattern: StringUtils.fillIn(CollisionLabStrings.pattern.vectorSymbolEqualsValueSpaceUnits, {
        symbol: CollisionLabStrings.symbol.velocity,
        units: CollisionLabStrings.units.metersPerSecond
      })
    });

    // Set the children in the correct rendering order.
    this.children = [
    // Wrap the XNode in a Node and apply a local ClipArea so that the XNode doesn't appear outside of the PlayArea.
    // This container is not translated so its local Bounds is the same as the parent bounds of the XNode.
    new Node({
      children: [xNode],
      clipArea: Shape.bounds(modelViewTransform.modelToViewBounds(playAreaBounds))
    }), speedNumberDisplay];

    //----------------------------------------------------------------------------------------

    // Observe when the centerOfMassVisibleProperty or when the CenterOfMass's position changes and update the
    // positioning of the xNode and speedNumberDisplay and the visibility of this Node. This Node is only visible if the
    // CenterOfMass is visible AND the position is inside the PlayArea's Bounds. Link is never unlinked since
    // CenterOfMassNodes are never disposed.
    Multilink.multilink([centerOfMassVisibleProperty, centerOfMass.positionProperty], (centerOfMassVisible, position) => {
      this.visible = centerOfMassVisible && playAreaBounds.containsPoint(position);

      // Only update positioning if the CenterOfMass is visible for a slight performance optimization.
      if (this.visible) {
        xNode.center = modelViewTransform.modelToViewPosition(position);
        speedNumberDisplay.centerBottom = xNode.centerTop.subtractXY(0, CollisionLabConstants.VALUE_DISPLAY_MARGIN);
      }
    });
  }
}
collisionLab.register('CenterOfMassNode', CenterOfMassNode);
export default CenterOfMassNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNdWx0aWxpbmsiLCJCb3VuZHMyIiwiU2hhcGUiLCJBc3NlcnRVdGlscyIsIlN0cmluZ1V0aWxzIiwiTW9kZWxWaWV3VHJhbnNmb3JtMiIsIlhOb2RlIiwiTm9kZSIsImNvbGxpc2lvbkxhYiIsIkNvbGxpc2lvbkxhYlN0cmluZ3MiLCJDb2xsaXNpb25MYWJDb2xvcnMiLCJDb2xsaXNpb25MYWJDb25zdGFudHMiLCJDZW50ZXJPZk1hc3MiLCJQbGF5QXJlYU51bWJlckRpc3BsYXkiLCJDZW50ZXJPZk1hc3NOb2RlIiwiY29uc3RydWN0b3IiLCJjZW50ZXJPZk1hc3MiLCJjZW50ZXJPZk1hc3NWaXNpYmxlUHJvcGVydHkiLCJ2YWx1ZXNWaXNpYmxlUHJvcGVydHkiLCJwbGF5QXJlYUJvdW5kcyIsIm1vZGVsVmlld1RyYW5zZm9ybSIsIm9wdGlvbnMiLCJhc3NlcnQiLCJhc3NlcnRQcm9wZXJ0eU9mIiwieE5vZGUiLCJmaWxsIiwiQ0VOVEVSX09GX01BU1NfRklMTCIsInN0cm9rZSIsIkNFTlRFUl9PRl9NQVNTX1NUUk9LRSIsInNwZWVkTnVtYmVyRGlzcGxheSIsInNwZWVkUHJvcGVydHkiLCJ2aXNpYmxlUHJvcGVydHkiLCJ2YWx1ZVBhdHRlcm4iLCJmaWxsSW4iLCJwYXR0ZXJuIiwidmVjdG9yU3ltYm9sRXF1YWxzVmFsdWVTcGFjZVVuaXRzIiwic3ltYm9sIiwidmVsb2NpdHkiLCJ1bml0cyIsIm1ldGVyc1BlclNlY29uZCIsImNoaWxkcmVuIiwiY2xpcEFyZWEiLCJib3VuZHMiLCJtb2RlbFRvVmlld0JvdW5kcyIsIm11bHRpbGluayIsInBvc2l0aW9uUHJvcGVydHkiLCJjZW50ZXJPZk1hc3NWaXNpYmxlIiwicG9zaXRpb24iLCJ2aXNpYmxlIiwiY29udGFpbnNQb2ludCIsImNlbnRlciIsIm1vZGVsVG9WaWV3UG9zaXRpb24iLCJjZW50ZXJCb3R0b20iLCJjZW50ZXJUb3AiLCJzdWJ0cmFjdFhZIiwiVkFMVUVfRElTUExBWV9NQVJHSU4iLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkNlbnRlck9mTWFzc05vZGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogQ2VudGVyT2ZNYXNzTm9kZSBpcyB0aGUgdmlldyByZXByZXNlbnRhdGlvbiBvZiBhIEJhbGxTeXN0ZW0ncyBDZW50ZXJPZk1hc3MsIHdoaWNoIGFwcGVhcnMgaW4gYWxsIHNjcmVlbnMgb2YgdGhlXHJcbiAqICdDb2xsaXNpb24gTGFiJyBzaW11bGF0aW9uLlxyXG4gKlxyXG4gKiBQcmltYXJ5IHJlc3BvbnNpYmlsaXRpZXMgYXJlOlxyXG4gKiAgLSBDcmVhdGluZyBhIFhOb2RlIHRvIHJlcHJlc2VudCB0aGUgdmlzdWFsIG1hcmsgb2YgdGhlIENlbnRlck9mTWFzcydzIHBvc2l0aW9uLlxyXG4gKiAgLSBDcmVhdGUgYSBQbGF5QXJlYU51bWJlckRpc3BsYXkgdG8gZGlzcGxheSB0aGUgc3BlZWQgb2YgdGhlIENlbnRlck9mTWFzcy4gVGhlIE51bWJlckRpc3BsYXkgaXMgb25seSB2aXNpYmxlIGlmXHJcbiAqICAgIGJvdGggdGhlICdWYWx1ZXMnIGFuZCAnQ2VudGVyIG9mIE1hc3MnIGNoZWNrYm94ZXMgYXJlIGNoZWNrZWQuXHJcbiAqXHJcbiAqIEZvciB0aGUgJ0NvbGxpc2lvbiBMYWInIHNpbSwgQ2VudGVyT2ZNYXNzZXMgYXJlIGluc3RhbnRpYXRlZCBhdCB0aGUgc3RhcnQgYW5kIHBlcnNpc3RzIGZvciB0aGUgbGlmZXRpbWUgb2YgdGhlXHJcbiAqIHNpbXVsYXRpb24uIFRodXMsIGxpbmtzIGFyZSBsZWZ0IGFzLWlzIGFuZCBubyBkaXNwb3NlIG1ldGhvZCBpcyBpbXBsZW1lbnRlZC5cclxuICpcclxuICogTk9URTogRG8gbm90IHRyYW5zbGF0ZSB0aGlzIG5vZGUuIEl0J3Mgb3JpZ2luIG11c3QgYmUgYXQgdGhlIG9yaWdpbiBvZiB0aGUgdmlldyBjb29yZGluYXRlIGZyYW1lLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEJyYW5kb24gTGlcclxuICogQGF1dGhvciBBbGV4IFNjaG9yXHJcbiAqL1xyXG5cclxuaW1wb3J0IE11bHRpbGluayBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL011bHRpbGluay5qcyc7XHJcbmltcG9ydCBCb3VuZHMyIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9Cb3VuZHMyLmpzJztcclxuaW1wb3J0IHsgU2hhcGUgfSBmcm9tICcuLi8uLi8uLi8uLi9raXRlL2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgQXNzZXJ0VXRpbHMgZnJvbSAnLi4vLi4vLi4vLi4vcGhldGNvbW1vbi9qcy9Bc3NlcnRVdGlscy5qcyc7XHJcbmltcG9ydCBTdHJpbmdVdGlscyBmcm9tICcuLi8uLi8uLi8uLi9waGV0Y29tbW9uL2pzL3V0aWwvU3RyaW5nVXRpbHMuanMnO1xyXG5pbXBvcnQgTW9kZWxWaWV3VHJhbnNmb3JtMiBmcm9tICcuLi8uLi8uLi8uLi9waGV0Y29tbW9uL2pzL3ZpZXcvTW9kZWxWaWV3VHJhbnNmb3JtMi5qcyc7XHJcbmltcG9ydCBYTm9kZSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvWE5vZGUuanMnO1xyXG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IGNvbGxpc2lvbkxhYiBmcm9tICcuLi8uLi9jb2xsaXNpb25MYWIuanMnO1xyXG5pbXBvcnQgQ29sbGlzaW9uTGFiU3RyaW5ncyBmcm9tICcuLi8uLi9Db2xsaXNpb25MYWJTdHJpbmdzLmpzJztcclxuaW1wb3J0IENvbGxpc2lvbkxhYkNvbG9ycyBmcm9tICcuLi9Db2xsaXNpb25MYWJDb2xvcnMuanMnO1xyXG5pbXBvcnQgQ29sbGlzaW9uTGFiQ29uc3RhbnRzIGZyb20gJy4uL0NvbGxpc2lvbkxhYkNvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBDZW50ZXJPZk1hc3MgZnJvbSAnLi4vbW9kZWwvQ2VudGVyT2ZNYXNzLmpzJztcclxuaW1wb3J0IFBsYXlBcmVhTnVtYmVyRGlzcGxheSBmcm9tICcuL1BsYXlBcmVhTnVtYmVyRGlzcGxheS5qcyc7XHJcblxyXG5jbGFzcyBDZW50ZXJPZk1hc3NOb2RlIGV4dGVuZHMgTm9kZSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7Q2VudGVyT2ZNYXNzfSBjZW50ZXJPZk1hc3NcclxuICAgKiBAcGFyYW0ge1Byb3BlcnR5Ljxib29sZWFuPn0gY2VudGVyT2ZNYXNzVmlzaWJsZVByb3BlcnR5XHJcbiAgICogQHBhcmFtIHtQcm9wZXJ0eS48Ym9vbGVhbj59IHZhbHVlc1Zpc2libGVQcm9wZXJ0eVxyXG4gICAqIEBwYXJhbSB7Qm91bmRzMn0gcGxheUFyZWFCb3VuZHNcclxuICAgKiBAcGFyYW0ge01vZGVsVmlld1RyYW5zZm9ybTJ9IG1vZGVsVmlld1RyYW5zZm9ybVxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cclxuICAgKi9cclxuICBjb25zdHJ1Y3RvciggY2VudGVyT2ZNYXNzLFxyXG4gICAgICAgICAgICAgICBjZW50ZXJPZk1hc3NWaXNpYmxlUHJvcGVydHksXHJcbiAgICAgICAgICAgICAgIHZhbHVlc1Zpc2libGVQcm9wZXJ0eSxcclxuICAgICAgICAgICAgICAgcGxheUFyZWFCb3VuZHMsXHJcbiAgICAgICAgICAgICAgIG1vZGVsVmlld1RyYW5zZm9ybSxcclxuICAgICAgICAgICAgICAgb3B0aW9uc1xyXG4gICkge1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggY2VudGVyT2ZNYXNzIGluc3RhbmNlb2YgQ2VudGVyT2ZNYXNzLCBgSW52YWxpZCBjZW50ZXJPZk1hc3M6ICR7Y2VudGVyT2ZNYXNzfWAgKTtcclxuICAgIGFzc2VydCAmJiBBc3NlcnRVdGlscy5hc3NlcnRQcm9wZXJ0eU9mKCBjZW50ZXJPZk1hc3NWaXNpYmxlUHJvcGVydHksICdib29sZWFuJyApO1xyXG4gICAgYXNzZXJ0ICYmIEFzc2VydFV0aWxzLmFzc2VydFByb3BlcnR5T2YoIHZhbHVlc1Zpc2libGVQcm9wZXJ0eSwgJ2Jvb2xlYW4nICk7XHJcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBwbGF5QXJlYUJvdW5kcyBpbnN0YW5jZW9mIEJvdW5kczIsIGBpbnZhbGlkIHBsYXlBcmVhQm91bmRzOiAke3BsYXlBcmVhQm91bmRzfWAgKTtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIG1vZGVsVmlld1RyYW5zZm9ybSBpbnN0YW5jZW9mIE1vZGVsVmlld1RyYW5zZm9ybTIgKTtcclxuXHJcbiAgICBzdXBlciggb3B0aW9ucyApO1xyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIENyZWF0ZSB0aGUgWE5vZGUgdG8gcmVwcmVzZW50IHRoZSB2aXN1YWwgbWFyayBvZiB0aGUgQ2VudGVyT2ZNYXNzJ3MgcG9zaXRpb24uIFBvc2l0aW9uIHNldCBsYXRlci5cclxuICAgIGNvbnN0IHhOb2RlID0gbmV3IFhOb2RlKCB7XHJcbiAgICAgIGZpbGw6IENvbGxpc2lvbkxhYkNvbG9ycy5DRU5URVJfT0ZfTUFTU19GSUxMLFxyXG4gICAgICBzdHJva2U6IENvbGxpc2lvbkxhYkNvbG9ycy5DRU5URVJfT0ZfTUFTU19TVFJPS0VcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgdGhlIG51bWJlciBkaXNwbGF5IGZvciB0aGUgc3BlZWQgb2YgdGhlIENlbnRlck9mTWFzcywgd2hpY2ggYXBwZWFycyBhYm92ZSB0aGUgeE5vZGUuIFBvc2l0aW9uIHNldCBsYXRlci5cclxuICAgIGNvbnN0IHNwZWVkTnVtYmVyRGlzcGxheSA9IG5ldyBQbGF5QXJlYU51bWJlckRpc3BsYXkoIGNlbnRlck9mTWFzcy5zcGVlZFByb3BlcnR5LCB7XHJcbiAgICAgIHZpc2libGVQcm9wZXJ0eTogdmFsdWVzVmlzaWJsZVByb3BlcnR5LFxyXG4gICAgICB2YWx1ZVBhdHRlcm46IFN0cmluZ1V0aWxzLmZpbGxJbiggQ29sbGlzaW9uTGFiU3RyaW5ncy5wYXR0ZXJuLnZlY3RvclN5bWJvbEVxdWFsc1ZhbHVlU3BhY2VVbml0cywge1xyXG4gICAgICAgIHN5bWJvbDogQ29sbGlzaW9uTGFiU3RyaW5ncy5zeW1ib2wudmVsb2NpdHksXHJcbiAgICAgICAgdW5pdHM6IENvbGxpc2lvbkxhYlN0cmluZ3MudW5pdHMubWV0ZXJzUGVyU2Vjb25kXHJcbiAgICAgIH0gKVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIFNldCB0aGUgY2hpbGRyZW4gaW4gdGhlIGNvcnJlY3QgcmVuZGVyaW5nIG9yZGVyLlxyXG4gICAgdGhpcy5jaGlsZHJlbiA9IFtcclxuXHJcbiAgICAgIC8vIFdyYXAgdGhlIFhOb2RlIGluIGEgTm9kZSBhbmQgYXBwbHkgYSBsb2NhbCBDbGlwQXJlYSBzbyB0aGF0IHRoZSBYTm9kZSBkb2Vzbid0IGFwcGVhciBvdXRzaWRlIG9mIHRoZSBQbGF5QXJlYS5cclxuICAgICAgLy8gVGhpcyBjb250YWluZXIgaXMgbm90IHRyYW5zbGF0ZWQgc28gaXRzIGxvY2FsIEJvdW5kcyBpcyB0aGUgc2FtZSBhcyB0aGUgcGFyZW50IGJvdW5kcyBvZiB0aGUgWE5vZGUuXHJcbiAgICAgIG5ldyBOb2RlKCB7XHJcbiAgICAgICAgY2hpbGRyZW46IFsgeE5vZGUgXSxcclxuICAgICAgICBjbGlwQXJlYTogU2hhcGUuYm91bmRzKCBtb2RlbFZpZXdUcmFuc2Zvcm0ubW9kZWxUb1ZpZXdCb3VuZHMoIHBsYXlBcmVhQm91bmRzICkgKVxyXG4gICAgICB9ICksXHJcblxyXG4gICAgICBzcGVlZE51bWJlckRpc3BsYXlcclxuICAgIF07XHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gT2JzZXJ2ZSB3aGVuIHRoZSBjZW50ZXJPZk1hc3NWaXNpYmxlUHJvcGVydHkgb3Igd2hlbiB0aGUgQ2VudGVyT2ZNYXNzJ3MgcG9zaXRpb24gY2hhbmdlcyBhbmQgdXBkYXRlIHRoZVxyXG4gICAgLy8gcG9zaXRpb25pbmcgb2YgdGhlIHhOb2RlIGFuZCBzcGVlZE51bWJlckRpc3BsYXkgYW5kIHRoZSB2aXNpYmlsaXR5IG9mIHRoaXMgTm9kZS4gVGhpcyBOb2RlIGlzIG9ubHkgdmlzaWJsZSBpZiB0aGVcclxuICAgIC8vIENlbnRlck9mTWFzcyBpcyB2aXNpYmxlIEFORCB0aGUgcG9zaXRpb24gaXMgaW5zaWRlIHRoZSBQbGF5QXJlYSdzIEJvdW5kcy4gTGluayBpcyBuZXZlciB1bmxpbmtlZCBzaW5jZVxyXG4gICAgLy8gQ2VudGVyT2ZNYXNzTm9kZXMgYXJlIG5ldmVyIGRpc3Bvc2VkLlxyXG4gICAgTXVsdGlsaW5rLm11bHRpbGluayhcclxuICAgICAgWyBjZW50ZXJPZk1hc3NWaXNpYmxlUHJvcGVydHksIGNlbnRlck9mTWFzcy5wb3NpdGlvblByb3BlcnR5IF0sXHJcbiAgICAgICggY2VudGVyT2ZNYXNzVmlzaWJsZSwgcG9zaXRpb24gKSA9PiB7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlID0gY2VudGVyT2ZNYXNzVmlzaWJsZSAmJiBwbGF5QXJlYUJvdW5kcy5jb250YWluc1BvaW50KCBwb3NpdGlvbiApO1xyXG5cclxuICAgICAgICAvLyBPbmx5IHVwZGF0ZSBwb3NpdGlvbmluZyBpZiB0aGUgQ2VudGVyT2ZNYXNzIGlzIHZpc2libGUgZm9yIGEgc2xpZ2h0IHBlcmZvcm1hbmNlIG9wdGltaXphdGlvbi5cclxuICAgICAgICBpZiAoIHRoaXMudmlzaWJsZSApIHtcclxuICAgICAgICAgIHhOb2RlLmNlbnRlciA9IG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1Bvc2l0aW9uKCBwb3NpdGlvbiApO1xyXG4gICAgICAgICAgc3BlZWROdW1iZXJEaXNwbGF5LmNlbnRlckJvdHRvbSA9IHhOb2RlLmNlbnRlclRvcC5zdWJ0cmFjdFhZKCAwLCBDb2xsaXNpb25MYWJDb25zdGFudHMuVkFMVUVfRElTUExBWV9NQVJHSU4gKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gKTtcclxuICB9XHJcbn1cclxuXHJcbmNvbGxpc2lvbkxhYi5yZWdpc3RlciggJ0NlbnRlck9mTWFzc05vZGUnLCBDZW50ZXJPZk1hc3NOb2RlICk7XHJcbmV4cG9ydCBkZWZhdWx0IENlbnRlck9mTWFzc05vZGU7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFNBQVMsTUFBTSxrQ0FBa0M7QUFDeEQsT0FBT0MsT0FBTyxNQUFNLCtCQUErQjtBQUNuRCxTQUFTQyxLQUFLLFFBQVEsZ0NBQWdDO0FBQ3RELE9BQU9DLFdBQVcsTUFBTSwwQ0FBMEM7QUFDbEUsT0FBT0MsV0FBVyxNQUFNLCtDQUErQztBQUN2RSxPQUFPQyxtQkFBbUIsTUFBTSx1REFBdUQ7QUFDdkYsT0FBT0MsS0FBSyxNQUFNLHNDQUFzQztBQUN4RCxTQUFTQyxJQUFJLFFBQVEsbUNBQW1DO0FBQ3hELE9BQU9DLFlBQVksTUFBTSx1QkFBdUI7QUFDaEQsT0FBT0MsbUJBQW1CLE1BQU0sOEJBQThCO0FBQzlELE9BQU9DLGtCQUFrQixNQUFNLDBCQUEwQjtBQUN6RCxPQUFPQyxxQkFBcUIsTUFBTSw2QkFBNkI7QUFDL0QsT0FBT0MsWUFBWSxNQUFNLDBCQUEwQjtBQUNuRCxPQUFPQyxxQkFBcUIsTUFBTSw0QkFBNEI7QUFFOUQsTUFBTUMsZ0JBQWdCLFNBQVNQLElBQUksQ0FBQztFQUVsQztBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VRLFdBQVdBLENBQUVDLFlBQVksRUFDWkMsMkJBQTJCLEVBQzNCQyxxQkFBcUIsRUFDckJDLGNBQWMsRUFDZEMsa0JBQWtCLEVBQ2xC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