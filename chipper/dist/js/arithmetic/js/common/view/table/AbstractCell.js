// Copyright 2014-2023, University of Colorado Boulder

/**
 * Abstract base type for the cells that are used in the multiplication table.
 *
 * Since many cells are created during the startup of the Arithmetic simulation, this type has been optimized to create
 * the text node 'lazily' (i.e. not until it is needed).
 *
 * Another optimization is that a fixed set fonts is pre-allocated, and the font is chosen from this list rather than
 * creating a new one for each cell.
 *
 * @author Andrey Zelenkov (MLearner)
 * @author John Blanco
 */

import merge from '../../../../../phet-core/js/merge.js';
import PhetFont from '../../../../../scenery-phet/js/PhetFont.js';
import { Rectangle, Text } from '../../../../../scenery/js/imports.js';
import arithmetic from '../../../arithmetic.js';

// constants
const SMALL_FONT = new PhetFont(17);
const MEDIUM_FONT = new PhetFont(22);
const LARGE_FONT = new PhetFont(30);
const EXAMPLE_HEIGHT_STRING = '123456789';
const SMALL_FONT_HEIGHT = new Text(EXAMPLE_HEIGHT_STRING, {
  font: SMALL_FONT
}).bounds.height;
const MEDIUM_FONT_HEIGHT = new Text(EXAMPLE_HEIGHT_STRING, {
  font: MEDIUM_FONT
}).bounds.height;
const LARGE_FONT_HEIGHT = new Text(EXAMPLE_HEIGHT_STRING, {
  font: LARGE_FONT
}).bounds.height;
class AbstractCell extends Rectangle {
  /**
   * @param {Object} backgroundOptions - Background options for button.
   * @param {Object} textOptions - Text options for button.
   */
  constructor(backgroundOptions, textOptions) {
    super(0, 0, backgroundOptions.width, backgroundOptions.height, merge({
      fill: 'white',
      stroke: 'white',
      lineWidth: 2.5
    }, backgroundOptions));

    // @private - save/define text options for when the text node is created
    this._textOptions = merge({
      font: chooseFont(this.bounds.height),
      fill: 'white',
      centerY: this.bounds.height / 2,
      initiallyVisible: true
    }, textOptions);

    // @private - define the _text variable, but create it only when needed in order to save time during startup
    this._textNode = null;

    // @private - string to be displayed, used to support lazy creation of the node
    this._text = '';

    // if the text is initially visible, create the text node now, otherwise wait until it is shown
    if (this._textOptions.initiallyVisible) {
      createTextNodeIfNeeded(this);
    }
  }

  // @public
  setBackgroundFill(fill) {
    this.fill = fill;
  }

  // @protected
  setText(text) {
    this._text = text;
    if (this._textNode) {
      this._textNode.string = text;
      this._textNode.centerX = this.width / 2;
    }
  }

  // @public
  setTextFill(fill) {
    createTextNodeIfNeeded(this);
    this._textNode.setFill(fill);
  }

  // @public
  showText() {
    createTextNodeIfNeeded(this);
    this._textNode.visible = true;
  }

  // @public
  hideText() {
    if (this._textNode) {
      this._textNode.visible = false;
    }
  }

  /**
   * Get the text string contained in this cell (not the text node).
   * @public
   * @returns {string}
   */
  getTextString() {
    return this._text;
  }

  // @public
  isTextVisible() {
    return this._textNode ? this._textNode.visible : false;
  }

  // @public
  getTextHeight() {
    let height;
    switch (this._textOptions.font) {
      case SMALL_FONT:
        height = SMALL_FONT_HEIGHT;
        break;
      case MEDIUM_FONT:
        height = MEDIUM_FONT_HEIGHT;
        break;
      case LARGE_FONT:
        height = LARGE_FONT_HEIGHT;
        break;
      default:
        assert && assert(false, 'unrecognized font');
    }
    return height;
  }
}

// Convenience function for selecting appropriate font size for this cell.  This is done as an optimization so that
// a new font doesn't need to be created for each cell.  The sizes were empirically determined.
function chooseFont(cellHeight) {
  let font;
  if (cellHeight < 27) {
    font = SMALL_FONT;
  } else if (cellHeight < 35) {
    font = MEDIUM_FONT;
  } else {
    font = LARGE_FONT;
  }
  return font;
}

// Convenience function that supports 'lazy' creation of the text node, which is done to minimize startup time.
function createTextNodeIfNeeded(cell) {
  if (cell._textNode) {
    // the text node already exists
    return;
  }
  cell._textNode = new Text(cell._text, cell._textOptions);
  cell._textNode.centerX = cell.bounds.width / 2;
  cell.addChild(cell._textNode);
}
arithmetic.register('AbstractCell', AbstractCell);
export default AbstractCell;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtZXJnZSIsIlBoZXRGb250IiwiUmVjdGFuZ2xlIiwiVGV4dCIsImFyaXRobWV0aWMiLCJTTUFMTF9GT05UIiwiTUVESVVNX0ZPTlQiLCJMQVJHRV9GT05UIiwiRVhBTVBMRV9IRUlHSFRfU1RSSU5HIiwiU01BTExfRk9OVF9IRUlHSFQiLCJmb250IiwiYm91bmRzIiwiaGVpZ2h0IiwiTUVESVVNX0ZPTlRfSEVJR0hUIiwiTEFSR0VfRk9OVF9IRUlHSFQiLCJBYnN0cmFjdENlbGwiLCJjb25zdHJ1Y3RvciIsImJhY2tncm91bmRPcHRpb25zIiwidGV4dE9wdGlvbnMiLCJ3aWR0aCIsImZpbGwiLCJzdHJva2UiLCJsaW5lV2lkdGgiLCJfdGV4dE9wdGlvbnMiLCJjaG9vc2VGb250IiwiY2VudGVyWSIsImluaXRpYWxseVZpc2libGUiLCJfdGV4dE5vZGUiLCJfdGV4dCIsImNyZWF0ZVRleHROb2RlSWZOZWVkZWQiLCJzZXRCYWNrZ3JvdW5kRmlsbCIsInNldFRleHQiLCJ0ZXh0Iiwic3RyaW5nIiwiY2VudGVyWCIsInNldFRleHRGaWxsIiwic2V0RmlsbCIsInNob3dUZXh0IiwidmlzaWJsZSIsImhpZGVUZXh0IiwiZ2V0VGV4dFN0cmluZyIsImlzVGV4dFZpc2libGUiLCJnZXRUZXh0SGVpZ2h0IiwiYXNzZXJ0IiwiY2VsbEhlaWdodCIsImNlbGwiLCJhZGRDaGlsZCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiQWJzdHJhY3RDZWxsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE0LTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIEFic3RyYWN0IGJhc2UgdHlwZSBmb3IgdGhlIGNlbGxzIHRoYXQgYXJlIHVzZWQgaW4gdGhlIG11bHRpcGxpY2F0aW9uIHRhYmxlLlxyXG4gKlxyXG4gKiBTaW5jZSBtYW55IGNlbGxzIGFyZSBjcmVhdGVkIGR1cmluZyB0aGUgc3RhcnR1cCBvZiB0aGUgQXJpdGhtZXRpYyBzaW11bGF0aW9uLCB0aGlzIHR5cGUgaGFzIGJlZW4gb3B0aW1pemVkIHRvIGNyZWF0ZVxyXG4gKiB0aGUgdGV4dCBub2RlICdsYXppbHknIChpLmUuIG5vdCB1bnRpbCBpdCBpcyBuZWVkZWQpLlxyXG4gKlxyXG4gKiBBbm90aGVyIG9wdGltaXphdGlvbiBpcyB0aGF0IGEgZml4ZWQgc2V0IGZvbnRzIGlzIHByZS1hbGxvY2F0ZWQsIGFuZCB0aGUgZm9udCBpcyBjaG9zZW4gZnJvbSB0aGlzIGxpc3QgcmF0aGVyIHRoYW5cclxuICogY3JlYXRpbmcgYSBuZXcgb25lIGZvciBlYWNoIGNlbGwuXHJcbiAqXHJcbiAqIEBhdXRob3IgQW5kcmV5IFplbGVua292IChNTGVhcm5lcilcclxuICogQGF1dGhvciBKb2huIEJsYW5jb1xyXG4gKi9cclxuXHJcbmltcG9ydCBtZXJnZSBmcm9tICcuLi8uLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvbWVyZ2UuanMnO1xyXG5pbXBvcnQgUGhldEZvbnQgZnJvbSAnLi4vLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1BoZXRGb250LmpzJztcclxuaW1wb3J0IHsgUmVjdGFuZ2xlLCBUZXh0IH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IGFyaXRobWV0aWMgZnJvbSAnLi4vLi4vLi4vYXJpdGhtZXRpYy5qcyc7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgU01BTExfRk9OVCA9IG5ldyBQaGV0Rm9udCggMTcgKTtcclxuY29uc3QgTUVESVVNX0ZPTlQgPSBuZXcgUGhldEZvbnQoIDIyICk7XHJcbmNvbnN0IExBUkdFX0ZPTlQgPSBuZXcgUGhldEZvbnQoIDMwICk7XHJcbmNvbnN0IEVYQU1QTEVfSEVJR0hUX1NUUklORyA9ICcxMjM0NTY3ODknO1xyXG5jb25zdCBTTUFMTF9GT05UX0hFSUdIVCA9IG5ldyBUZXh0KCBFWEFNUExFX0hFSUdIVF9TVFJJTkcsIHsgZm9udDogU01BTExfRk9OVCB9ICkuYm91bmRzLmhlaWdodDtcclxuY29uc3QgTUVESVVNX0ZPTlRfSEVJR0hUID0gbmV3IFRleHQoIEVYQU1QTEVfSEVJR0hUX1NUUklORywgeyBmb250OiBNRURJVU1fRk9OVCB9ICkuYm91bmRzLmhlaWdodDtcclxuY29uc3QgTEFSR0VfRk9OVF9IRUlHSFQgPSBuZXcgVGV4dCggRVhBTVBMRV9IRUlHSFRfU1RSSU5HLCB7IGZvbnQ6IExBUkdFX0ZPTlQgfSApLmJvdW5kcy5oZWlnaHQ7XHJcblxyXG5jbGFzcyBBYnN0cmFjdENlbGwgZXh0ZW5kcyBSZWN0YW5nbGUge1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge09iamVjdH0gYmFja2dyb3VuZE9wdGlvbnMgLSBCYWNrZ3JvdW5kIG9wdGlvbnMgZm9yIGJ1dHRvbi5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gdGV4dE9wdGlvbnMgLSBUZXh0IG9wdGlvbnMgZm9yIGJ1dHRvbi5cclxuICAgKi9cclxuICBjb25zdHJ1Y3RvciggYmFja2dyb3VuZE9wdGlvbnMsIHRleHRPcHRpb25zICkge1xyXG4gICAgc3VwZXIoIDAsIDAsIGJhY2tncm91bmRPcHRpb25zLndpZHRoLCBiYWNrZ3JvdW5kT3B0aW9ucy5oZWlnaHQsIG1lcmdlKCB7XHJcbiAgICAgIGZpbGw6ICd3aGl0ZScsXHJcbiAgICAgIHN0cm9rZTogJ3doaXRlJyxcclxuICAgICAgbGluZVdpZHRoOiAyLjVcclxuICAgIH0sIGJhY2tncm91bmRPcHRpb25zICkgKTtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZSAtIHNhdmUvZGVmaW5lIHRleHQgb3B0aW9ucyBmb3Igd2hlbiB0aGUgdGV4dCBub2RlIGlzIGNyZWF0ZWRcclxuICAgIHRoaXMuX3RleHRPcHRpb25zID0gbWVyZ2UoIHtcclxuICAgICAgZm9udDogY2hvb3NlRm9udCggdGhpcy5ib3VuZHMuaGVpZ2h0ICksXHJcbiAgICAgIGZpbGw6ICd3aGl0ZScsXHJcbiAgICAgIGNlbnRlclk6IHRoaXMuYm91bmRzLmhlaWdodCAvIDIsXHJcbiAgICAgIGluaXRpYWxseVZpc2libGU6IHRydWVcclxuICAgIH0sIHRleHRPcHRpb25zICk7XHJcblxyXG4gICAgLy8gQHByaXZhdGUgLSBkZWZpbmUgdGhlIF90ZXh0IHZhcmlhYmxlLCBidXQgY3JlYXRlIGl0IG9ubHkgd2hlbiBuZWVkZWQgaW4gb3JkZXIgdG8gc2F2ZSB0aW1lIGR1cmluZyBzdGFydHVwXHJcbiAgICB0aGlzLl90ZXh0Tm9kZSA9IG51bGw7XHJcblxyXG4gICAgLy8gQHByaXZhdGUgLSBzdHJpbmcgdG8gYmUgZGlzcGxheWVkLCB1c2VkIHRvIHN1cHBvcnQgbGF6eSBjcmVhdGlvbiBvZiB0aGUgbm9kZVxyXG4gICAgdGhpcy5fdGV4dCA9ICcnO1xyXG5cclxuICAgIC8vIGlmIHRoZSB0ZXh0IGlzIGluaXRpYWxseSB2aXNpYmxlLCBjcmVhdGUgdGhlIHRleHQgbm9kZSBub3csIG90aGVyd2lzZSB3YWl0IHVudGlsIGl0IGlzIHNob3duXHJcbiAgICBpZiAoIHRoaXMuX3RleHRPcHRpb25zLmluaXRpYWxseVZpc2libGUgKSB7XHJcbiAgICAgIGNyZWF0ZVRleHROb2RlSWZOZWVkZWQoIHRoaXMgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEBwdWJsaWNcclxuICBzZXRCYWNrZ3JvdW5kRmlsbCggZmlsbCApIHtcclxuICAgIHRoaXMuZmlsbCA9IGZpbGw7XHJcbiAgfVxyXG5cclxuICAvLyBAcHJvdGVjdGVkXHJcbiAgc2V0VGV4dCggdGV4dCApIHtcclxuICAgIHRoaXMuX3RleHQgPSB0ZXh0O1xyXG4gICAgaWYgKCB0aGlzLl90ZXh0Tm9kZSApIHtcclxuICAgICAgdGhpcy5fdGV4dE5vZGUuc3RyaW5nID0gdGV4dDtcclxuICAgICAgdGhpcy5fdGV4dE5vZGUuY2VudGVyWCA9IHRoaXMud2lkdGggLyAyO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gQHB1YmxpY1xyXG4gIHNldFRleHRGaWxsKCBmaWxsICkge1xyXG4gICAgY3JlYXRlVGV4dE5vZGVJZk5lZWRlZCggdGhpcyApO1xyXG4gICAgdGhpcy5fdGV4dE5vZGUuc2V0RmlsbCggZmlsbCApO1xyXG4gIH1cclxuXHJcbiAgLy8gQHB1YmxpY1xyXG4gIHNob3dUZXh0KCkge1xyXG4gICAgY3JlYXRlVGV4dE5vZGVJZk5lZWRlZCggdGhpcyApO1xyXG4gICAgdGhpcy5fdGV4dE5vZGUudmlzaWJsZSA9IHRydWU7XHJcbiAgfVxyXG5cclxuICAvLyBAcHVibGljXHJcbiAgaGlkZVRleHQoKSB7XHJcbiAgICBpZiAoIHRoaXMuX3RleHROb2RlICkge1xyXG4gICAgICB0aGlzLl90ZXh0Tm9kZS52aXNpYmxlID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgdGhlIHRleHQgc3RyaW5nIGNvbnRhaW5lZCBpbiB0aGlzIGNlbGwgKG5vdCB0aGUgdGV4dCBub2RlKS5cclxuICAgKiBAcHVibGljXHJcbiAgICogQHJldHVybnMge3N0cmluZ31cclxuICAgKi9cclxuICBnZXRUZXh0U3RyaW5nKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3RleHQ7XHJcbiAgfVxyXG5cclxuICAvLyBAcHVibGljXHJcbiAgaXNUZXh0VmlzaWJsZSgpIHtcclxuICAgIHJldHVybiB0aGlzLl90ZXh0Tm9kZSA/IHRoaXMuX3RleHROb2RlLnZpc2libGUgOiBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8vIEBwdWJsaWNcclxuICBnZXRUZXh0SGVpZ2h0KCkge1xyXG4gICAgbGV0IGhlaWdodDtcclxuICAgIHN3aXRjaCggdGhpcy5fdGV4dE9wdGlvbnMuZm9udCApIHtcclxuICAgICAgY2FzZSBTTUFMTF9GT05UOlxyXG4gICAgICAgIGhlaWdodCA9IFNNQUxMX0ZPTlRfSEVJR0hUO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIE1FRElVTV9GT05UOlxyXG4gICAgICAgIGhlaWdodCA9IE1FRElVTV9GT05UX0hFSUdIVDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBMQVJHRV9GT05UOlxyXG4gICAgICAgIGhlaWdodCA9IExBUkdFX0ZPTlRfSEVJR0hUO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGFzc2VydCAmJiBhc3NlcnQoIGZhbHNlLCAndW5yZWNvZ25pemVkIGZvbnQnICk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaGVpZ2h0O1xyXG4gIH1cclxufVxyXG5cclxuLy8gQ29udmVuaWVuY2UgZnVuY3Rpb24gZm9yIHNlbGVjdGluZyBhcHByb3ByaWF0ZSBmb250IHNpemUgZm9yIHRoaXMgY2VsbC4gIFRoaXMgaXMgZG9uZSBhcyBhbiBvcHRpbWl6YXRpb24gc28gdGhhdFxyXG4vLyBhIG5ldyBmb250IGRvZXNuJ3QgbmVlZCB0byBiZSBjcmVhdGVkIGZvciBlYWNoIGNlbGwuICBUaGUgc2l6ZXMgd2VyZSBlbXBpcmljYWxseSBkZXRlcm1pbmVkLlxyXG5mdW5jdGlvbiBjaG9vc2VGb250KCBjZWxsSGVpZ2h0ICkge1xyXG4gIGxldCBmb250O1xyXG4gIGlmICggY2VsbEhlaWdodCA8IDI3ICkge1xyXG4gICAgZm9udCA9IFNNQUxMX0ZPTlQ7XHJcbiAgfVxyXG4gIGVsc2UgaWYgKCBjZWxsSGVpZ2h0IDwgMzUgKSB7XHJcbiAgICBmb250ID0gTUVESVVNX0ZPTlQ7XHJcbiAgfVxyXG4gIGVsc2Uge1xyXG4gICAgZm9udCA9IExBUkdFX0ZPTlQ7XHJcbiAgfVxyXG4gIHJldHVybiBmb250O1xyXG59XHJcblxyXG4vLyBDb252ZW5pZW5jZSBmdW5jdGlvbiB0aGF0IHN1cHBvcnRzICdsYXp5JyBjcmVhdGlvbiBvZiB0aGUgdGV4dCBub2RlLCB3aGljaCBpcyBkb25lIHRvIG1pbmltaXplIHN0YXJ0dXAgdGltZS5cclxuZnVuY3Rpb24gY3JlYXRlVGV4dE5vZGVJZk5lZWRlZCggY2VsbCApIHtcclxuXHJcbiAgaWYgKCBjZWxsLl90ZXh0Tm9kZSApIHtcclxuICAgIC8vIHRoZSB0ZXh0IG5vZGUgYWxyZWFkeSBleGlzdHNcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGNlbGwuX3RleHROb2RlID0gbmV3IFRleHQoIGNlbGwuX3RleHQsIGNlbGwuX3RleHRPcHRpb25zICk7XHJcbiAgY2VsbC5fdGV4dE5vZGUuY2VudGVyWCA9IGNlbGwuYm91bmRzLndpZHRoIC8gMjtcclxuICBjZWxsLmFkZENoaWxkKCBjZWxsLl90ZXh0Tm9kZSApO1xyXG59XHJcblxyXG5hcml0aG1ldGljLnJlZ2lzdGVyKCAnQWJzdHJhY3RDZWxsJywgQWJzdHJhY3RDZWxsICk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBYnN0cmFjdENlbGw7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsS0FBSyxNQUFNLHNDQUFzQztBQUN4RCxPQUFPQyxRQUFRLE1BQU0sNENBQTRDO0FBQ2pFLFNBQVNDLFNBQVMsRUFBRUMsSUFBSSxRQUFRLHNDQUFzQztBQUN0RSxPQUFPQyxVQUFVLE1BQU0sd0JBQXdCOztBQUUvQztBQUNBLE1BQU1DLFVBQVUsR0FBRyxJQUFJSixRQUFRLENBQUUsRUFBRyxDQUFDO0FBQ3JDLE1BQU1LLFdBQVcsR0FBRyxJQUFJTCxRQUFRLENBQUUsRUFBRyxDQUFDO0FBQ3RDLE1BQU1NLFVBQVUsR0FBRyxJQUFJTixRQUFRLENBQUUsRUFBRyxDQUFDO0FBQ3JDLE1BQU1PLHFCQUFxQixHQUFHLFdBQVc7QUFDekMsTUFBTUMsaUJBQWlCLEdBQUcsSUFBSU4sSUFBSSxDQUFFSyxxQkFBcUIsRUFBRTtFQUFFRSxJQUFJLEVBQUVMO0FBQVcsQ0FBRSxDQUFDLENBQUNNLE1BQU0sQ0FBQ0MsTUFBTTtBQUMvRixNQUFNQyxrQkFBa0IsR0FBRyxJQUFJVixJQUFJLENBQUVLLHFCQUFxQixFQUFFO0VBQUVFLElBQUksRUFBRUo7QUFBWSxDQUFFLENBQUMsQ0FBQ0ssTUFBTSxDQUFDQyxNQUFNO0FBQ2pHLE1B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