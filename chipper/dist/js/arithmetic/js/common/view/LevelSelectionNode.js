// Copyright 2014-2022, University of Colorado Boulder

/**
 * Screen that allows the user to select the game level that they wish to play.
 *
 * @author Andrey Zelenkov (MLearner)
 * @author John Blanco
 */

import merge from '../../../../phet-core/js/merge.js';
import ResetAllButton from '../../../../scenery-phet/js/buttons/ResetAllButton.js';
import TimerToggleButton from '../../../../scenery-phet/js/buttons/TimerToggleButton.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { HBox, Image, Node, Text, VBox } from '../../../../scenery/js/imports.js';
import LevelSelectionButton from '../../../../vegas/js/LevelSelectionButton.js';
import ScoreDisplayStars from '../../../../vegas/js/ScoreDisplayStars.js';
import divideLevel1Icon_png from '../../../mipmaps/divideLevel1Icon_png.js';
import divideLevel2Icon_png from '../../../mipmaps/divideLevel2Icon_png.js';
import divideLevel3Icon_png from '../../../mipmaps/divideLevel3Icon_png.js';
import factorLevel1Icon_png from '../../../mipmaps/factorLevel1Icon_png.js';
import factorLevel2Icon_png from '../../../mipmaps/factorLevel2Icon_png.js';
import factorLevel3Icon_png from '../../../mipmaps/factorLevel3Icon_png.js';
import multiplyLevel1Icon_png from '../../../mipmaps/multiplyLevel1Icon_png.js';
import multiplyLevel2Icon_png from '../../../mipmaps/multiplyLevel2Icon_png.js';
import multiplyLevel3Icon_png from '../../../mipmaps/multiplyLevel3Icon_png.js';
import arithmetic from '../../arithmetic.js';
import ArithmeticStrings from '../../ArithmeticStrings.js';
import ArithmeticConstants from '../ArithmeticConstants.js';
import ArithmeticGlobals from '../ArithmeticGlobals.js';

// constants
const CHOOSE_LEVEL_TITLE_FONT = new PhetFont({
  size: 24
});
const TAB_TITLE_FONT = new PhetFont({
  size: 54
});
const BUTTON_LENGTH = 150;

// icon sets, used to place on the buttons
const ICON_SETS = {
  multiply: [multiplyLevel1Icon_png, multiplyLevel2Icon_png, multiplyLevel3Icon_png],
  factor: [factorLevel1Icon_png, factorLevel2Icon_png, factorLevel3Icon_png],
  divide: [divideLevel1Icon_png, divideLevel2Icon_png, divideLevel3Icon_png]
};
const chooseYourLevelString = ArithmeticStrings.chooseYourLevel;
class LevelSelectionNode extends Node {
  /**
   * @param {ArithmeticModel} model - Main model for screen.
   * @param {string} titleString - Title string for given screen.
   * @param {Function} callback - Callback function call after pressing button.
   * @param {Bounds2} layoutBounds - Bounds of screen on which this will appear, used for layout
   * @param {Object} [options]
   */
  constructor(model, titleString, callback, layoutBounds, options) {
    super();

    // Default options
    options = merge({
      buttonBaseColor: 'white',
      iconSet: 'multiply' // valid values are 'multiply', 'factor', and 'divide'
    }, options);

    // add title
    const tabTitle = new Text(titleString, {
      font: TAB_TITLE_FONT,
      centerX: layoutBounds.centerX,
      top: layoutBounds.height * 0.1
    });
    this.addChild(tabTitle);

    // add choose level title
    const chooseLevelTitle = new Text(chooseYourLevelString, {
      font: CHOOSE_LEVEL_TITLE_FONT,
      centerX: layoutBounds.centerX,
      top: tabTitle.bottom + 15
    });
    this.addChild(chooseLevelTitle);

    // add select level buttons
    assert && assert(model.levelModels.length === ICON_SETS[options.iconSet].length, 'Number of icons doesn\'t match number of levels');
    const levelSelectButtons = model.levelModels.map((level, levelIndex) => new LevelSelectionButton(new Image(ICON_SETS[options.iconSet][levelIndex]), model.levelModels[levelIndex].displayScoreProperty, {
      buttonWidth: BUTTON_LENGTH,
      buttonHeight: BUTTON_LENGTH,
      baseColor: options.buttonBaseColor,
      bestTimeProperty: model.levelModels[levelIndex].bestTimeProperty,
      bestTimeVisibleProperty: ArithmeticGlobals.timerEnabledProperty,
      listener: () => {
        callback(levelIndex);
      },
      createScoreDisplay: scoreProperty => new ScoreDisplayStars(scoreProperty, {
        numberOfStars: ArithmeticConstants.NUM_STARS,
        perfectScore: level.perfectScore
      }),
      soundPlayerIndex: levelIndex
    }));
    const selectLevelButtonsHBox = new HBox({
      spacing: 50,
      children: levelSelectButtons
    });
    selectLevelButtonsHBox.top = chooseLevelTitle.bottom + 15;
    selectLevelButtonsHBox.centerX = chooseLevelTitle.centerX;
    this.addChild(selectLevelButtonsHBox);

    // add timer and sound buttons
    const soundAndTimerButtons = new VBox({
      spacing: 5,
      children: [new TimerToggleButton(ArithmeticGlobals.timerEnabledProperty)],
      right: layoutBounds.maxX * 0.08,
      bottom: layoutBounds.maxY * 0.95
    });
    this.addChild(soundAndTimerButtons);

    // add reset all button
    const resetAllButton = new ResetAllButton({
      listener: () => {
        model.reset();
      },
      right: layoutBounds.maxX * 0.98,
      bottom: layoutBounds.maxY * 0.95
    });
    this.addChild(resetAllButton);

    // pass options through to superclass
    this.mutate(options);
  }
}
arithmetic.register('LevelSelectionNode', LevelSelectionNode);
export default LevelSelectionNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtZXJnZSIsIlJlc2V0QWxsQnV0dG9uIiwiVGltZXJUb2dnbGVCdXR0b24iLCJQaGV0Rm9udCIsIkhCb3giLCJJbWFnZSIsIk5vZGUiLCJUZXh0IiwiVkJveCIsIkxldmVsU2VsZWN0aW9uQnV0dG9uIiwiU2NvcmVEaXNwbGF5U3RhcnMiLCJkaXZpZGVMZXZlbDFJY29uX3BuZyIsImRpdmlkZUxldmVsMkljb25fcG5nIiwiZGl2aWRlTGV2ZWwzSWNvbl9wbmciLCJmYWN0b3JMZXZlbDFJY29uX3BuZyIsImZhY3RvckxldmVsMkljb25fcG5nIiwiZmFjdG9yTGV2ZWwzSWNvbl9wbmciLCJtdWx0aXBseUxldmVsMUljb25fcG5nIiwibXVsdGlwbHlMZXZlbDJJY29uX3BuZyIsIm11bHRpcGx5TGV2ZWwzSWNvbl9wbmciLCJhcml0aG1ldGljIiwiQXJpdGhtZXRpY1N0cmluZ3MiLCJBcml0aG1ldGljQ29uc3RhbnRzIiwiQXJpdGhtZXRpY0dsb2JhbHMiLCJDSE9PU0VfTEVWRUxfVElUTEVfRk9OVCIsInNpemUiLCJUQUJfVElUTEVfRk9OVCIsIkJVVFRPTl9MRU5HVEgiLCJJQ09OX1NFVFMiLCJtdWx0aXBseSIsImZhY3RvciIsImRpdmlkZSIsImNob29zZVlvdXJMZXZlbFN0cmluZyIsImNob29zZVlvdXJMZXZlbCIsIkxldmVsU2VsZWN0aW9uTm9kZSIsImNvbnN0cnVjdG9yIiwibW9kZWwiLCJ0aXRsZVN0cmluZyIsImNhbGxiYWNrIiwibGF5b3V0Qm91bmRzIiwib3B0aW9ucyIsImJ1dHRvbkJhc2VDb2xvciIsImljb25TZXQiLCJ0YWJUaXRsZSIsImZvbnQiLCJjZW50ZXJYIiwidG9wIiwiaGVpZ2h0IiwiYWRkQ2hpbGQiLCJjaG9vc2VMZXZlbFRpdGxlIiwiYm90dG9tIiwiYXNzZXJ0IiwibGV2ZWxNb2RlbHMiLCJsZW5ndGgiLCJsZXZlbFNlbGVjdEJ1dHRvbnMiLCJtYXAiLCJsZXZlbCIsImxldmVsSW5kZXgiLCJkaXNwbGF5U2NvcmVQcm9wZXJ0eSIsImJ1dHRvbldpZHRoIiwiYnV0dG9uSGVpZ2h0IiwiYmFzZUNvbG9yIiwiYmVzdFRpbWVQcm9wZXJ0eSIsImJlc3RUaW1lVmlzaWJsZVByb3BlcnR5IiwidGltZXJFbmFibGVkUHJvcGVydHkiLCJsaXN0ZW5lciIsImNyZWF0ZVNjb3JlRGlzcGxheSIsInNjb3JlUHJvcGVydHkiLCJudW1iZXJPZlN0YXJzIiwiTlVNX1NUQVJTIiwicGVyZmVjdFNjb3JlIiwic291bmRQbGF5ZXJJbmRleCIsInNlbGVjdExldmVsQnV0dG9uc0hCb3giLCJzcGFjaW5nIiwiY2hpbGRyZW4iLCJzb3VuZEFuZFRpbWVyQnV0dG9ucyIsInJpZ2h0IiwibWF4WCIsIm1heFkiLCJyZXNldEFsbEJ1dHRvbiIsInJlc2V0IiwibXV0YXRlIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJMZXZlbFNlbGVjdGlvbk5vZGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTQtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogU2NyZWVuIHRoYXQgYWxsb3dzIHRoZSB1c2VyIHRvIHNlbGVjdCB0aGUgZ2FtZSBsZXZlbCB0aGF0IHRoZXkgd2lzaCB0byBwbGF5LlxyXG4gKlxyXG4gKiBAYXV0aG9yIEFuZHJleSBaZWxlbmtvdiAoTUxlYXJuZXIpXHJcbiAqIEBhdXRob3IgSm9obiBCbGFuY29cclxuICovXHJcblxyXG5pbXBvcnQgbWVyZ2UgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL21lcmdlLmpzJztcclxuaW1wb3J0IFJlc2V0QWxsQnV0dG9uIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9idXR0b25zL1Jlc2V0QWxsQnV0dG9uLmpzJztcclxuaW1wb3J0IFRpbWVyVG9nZ2xlQnV0dG9uIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9idXR0b25zL1RpbWVyVG9nZ2xlQnV0dG9uLmpzJztcclxuaW1wb3J0IFBoZXRGb250IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9QaGV0Rm9udC5qcyc7XHJcbmltcG9ydCB7IEhCb3gsIEltYWdlLCBOb2RlLCBUZXh0LCBWQm94IH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IExldmVsU2VsZWN0aW9uQnV0dG9uIGZyb20gJy4uLy4uLy4uLy4uL3ZlZ2FzL2pzL0xldmVsU2VsZWN0aW9uQnV0dG9uLmpzJztcclxuaW1wb3J0IFNjb3JlRGlzcGxheVN0YXJzIGZyb20gJy4uLy4uLy4uLy4uL3ZlZ2FzL2pzL1Njb3JlRGlzcGxheVN0YXJzLmpzJztcclxuaW1wb3J0IGRpdmlkZUxldmVsMUljb25fcG5nIGZyb20gJy4uLy4uLy4uL21pcG1hcHMvZGl2aWRlTGV2ZWwxSWNvbl9wbmcuanMnO1xyXG5pbXBvcnQgZGl2aWRlTGV2ZWwySWNvbl9wbmcgZnJvbSAnLi4vLi4vLi4vbWlwbWFwcy9kaXZpZGVMZXZlbDJJY29uX3BuZy5qcyc7XHJcbmltcG9ydCBkaXZpZGVMZXZlbDNJY29uX3BuZyBmcm9tICcuLi8uLi8uLi9taXBtYXBzL2RpdmlkZUxldmVsM0ljb25fcG5nLmpzJztcclxuaW1wb3J0IGZhY3RvckxldmVsMUljb25fcG5nIGZyb20gJy4uLy4uLy4uL21pcG1hcHMvZmFjdG9yTGV2ZWwxSWNvbl9wbmcuanMnO1xyXG5pbXBvcnQgZmFjdG9yTGV2ZWwySWNvbl9wbmcgZnJvbSAnLi4vLi4vLi4vbWlwbWFwcy9mYWN0b3JMZXZlbDJJY29uX3BuZy5qcyc7XHJcbmltcG9ydCBmYWN0b3JMZXZlbDNJY29uX3BuZyBmcm9tICcuLi8uLi8uLi9taXBtYXBzL2ZhY3RvckxldmVsM0ljb25fcG5nLmpzJztcclxuaW1wb3J0IG11bHRpcGx5TGV2ZWwxSWNvbl9wbmcgZnJvbSAnLi4vLi4vLi4vbWlwbWFwcy9tdWx0aXBseUxldmVsMUljb25fcG5nLmpzJztcclxuaW1wb3J0IG11bHRpcGx5TGV2ZWwySWNvbl9wbmcgZnJvbSAnLi4vLi4vLi4vbWlwbWFwcy9tdWx0aXBseUxldmVsMkljb25fcG5nLmpzJztcclxuaW1wb3J0IG11bHRpcGx5TGV2ZWwzSWNvbl9wbmcgZnJvbSAnLi4vLi4vLi4vbWlwbWFwcy9tdWx0aXBseUxldmVsM0ljb25fcG5nLmpzJztcclxuaW1wb3J0IGFyaXRobWV0aWMgZnJvbSAnLi4vLi4vYXJpdGhtZXRpYy5qcyc7XHJcbmltcG9ydCBBcml0aG1ldGljU3RyaW5ncyBmcm9tICcuLi8uLi9Bcml0aG1ldGljU3RyaW5ncy5qcyc7XHJcbmltcG9ydCBBcml0aG1ldGljQ29uc3RhbnRzIGZyb20gJy4uL0FyaXRobWV0aWNDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgQXJpdGhtZXRpY0dsb2JhbHMgZnJvbSAnLi4vQXJpdGhtZXRpY0dsb2JhbHMuanMnO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IENIT09TRV9MRVZFTF9USVRMRV9GT05UID0gbmV3IFBoZXRGb250KCB7IHNpemU6IDI0IH0gKTtcclxuY29uc3QgVEFCX1RJVExFX0ZPTlQgPSBuZXcgUGhldEZvbnQoIHsgc2l6ZTogNTQgfSApO1xyXG5jb25zdCBCVVRUT05fTEVOR1RIID0gMTUwO1xyXG5cclxuLy8gaWNvbiBzZXRzLCB1c2VkIHRvIHBsYWNlIG9uIHRoZSBidXR0b25zXHJcbmNvbnN0IElDT05fU0VUUyA9IHtcclxuICBtdWx0aXBseTogW1xyXG4gICAgbXVsdGlwbHlMZXZlbDFJY29uX3BuZyxcclxuICAgIG11bHRpcGx5TGV2ZWwySWNvbl9wbmcsXHJcbiAgICBtdWx0aXBseUxldmVsM0ljb25fcG5nXHJcbiAgXSxcclxuICBmYWN0b3I6IFtcclxuICAgIGZhY3RvckxldmVsMUljb25fcG5nLFxyXG4gICAgZmFjdG9yTGV2ZWwySWNvbl9wbmcsXHJcbiAgICBmYWN0b3JMZXZlbDNJY29uX3BuZ1xyXG4gIF0sXHJcbiAgZGl2aWRlOiBbXHJcbiAgICBkaXZpZGVMZXZlbDFJY29uX3BuZyxcclxuICAgIGRpdmlkZUxldmVsMkljb25fcG5nLFxyXG4gICAgZGl2aWRlTGV2ZWwzSWNvbl9wbmdcclxuICBdXHJcbn07XHJcblxyXG5jb25zdCBjaG9vc2VZb3VyTGV2ZWxTdHJpbmcgPSBBcml0aG1ldGljU3RyaW5ncy5jaG9vc2VZb3VyTGV2ZWw7XHJcblxyXG5jbGFzcyBMZXZlbFNlbGVjdGlvbk5vZGUgZXh0ZW5kcyBOb2RlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtBcml0aG1ldGljTW9kZWx9IG1vZGVsIC0gTWFpbiBtb2RlbCBmb3Igc2NyZWVuLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0aXRsZVN0cmluZyAtIFRpdGxlIHN0cmluZyBmb3IgZ2l2ZW4gc2NyZWVuLlxyXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIC0gQ2FsbGJhY2sgZnVuY3Rpb24gY2FsbCBhZnRlciBwcmVzc2luZyBidXR0b24uXHJcbiAgICogQHBhcmFtIHtCb3VuZHMyfSBsYXlvdXRCb3VuZHMgLSBCb3VuZHMgb2Ygc2NyZWVuIG9uIHdoaWNoIHRoaXMgd2lsbCBhcHBlYXIsIHVzZWQgZm9yIGxheW91dFxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cclxuICAgKi9cclxuICBjb25zdHJ1Y3RvciggbW9kZWwsIHRpdGxlU3RyaW5nLCBjYWxsYmFjaywgbGF5b3V0Qm91bmRzLCBvcHRpb25zICkge1xyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICAvLyBEZWZhdWx0IG9wdGlvbnNcclxuICAgIG9wdGlvbnMgPSBtZXJnZSgge1xyXG4gICAgICBidXR0b25CYXNlQ29sb3I6ICd3aGl0ZScsXHJcbiAgICAgIGljb25TZXQ6ICdtdWx0aXBseScgLy8gdmFsaWQgdmFsdWVzIGFyZSAnbXVsdGlwbHknLCAnZmFjdG9yJywgYW5kICdkaXZpZGUnXHJcbiAgICB9LCBvcHRpb25zICk7XHJcblxyXG4gICAgLy8gYWRkIHRpdGxlXHJcbiAgICBjb25zdCB0YWJUaXRsZSA9IG5ldyBUZXh0KCB0aXRsZVN0cmluZywge1xyXG4gICAgICBmb250OiBUQUJfVElUTEVfRk9OVCxcclxuICAgICAgY2VudGVyWDogbGF5b3V0Qm91bmRzLmNlbnRlclgsXHJcbiAgICAgIHRvcDogbGF5b3V0Qm91bmRzLmhlaWdodCAqIDAuMVxyXG4gICAgfSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggdGFiVGl0bGUgKTtcclxuXHJcbiAgICAvLyBhZGQgY2hvb3NlIGxldmVsIHRpdGxlXHJcbiAgICBjb25zdCBjaG9vc2VMZXZlbFRpdGxlID0gbmV3IFRleHQoIGNob29zZVlvdXJMZXZlbFN0cmluZywge1xyXG4gICAgICBmb250OiBDSE9PU0VfTEVWRUxfVElUTEVfRk9OVCxcclxuICAgICAgY2VudGVyWDogbGF5b3V0Qm91bmRzLmNlbnRlclgsXHJcbiAgICAgIHRvcDogdGFiVGl0bGUuYm90dG9tICsgMTVcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIGNob29zZUxldmVsVGl0bGUgKTtcclxuXHJcbiAgICAvLyBhZGQgc2VsZWN0IGxldmVsIGJ1dHRvbnNcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIG1vZGVsLmxldmVsTW9kZWxzLmxlbmd0aCA9PT0gSUNPTl9TRVRTWyBvcHRpb25zLmljb25TZXQgXS5sZW5ndGgsICdOdW1iZXIgb2YgaWNvbnMgZG9lc25cXCd0IG1hdGNoIG51bWJlciBvZiBsZXZlbHMnICk7XHJcbiAgICBjb25zdCBsZXZlbFNlbGVjdEJ1dHRvbnMgPSBtb2RlbC5sZXZlbE1vZGVscy5tYXAoICggbGV2ZWwsIGxldmVsSW5kZXggKSA9PiBuZXcgTGV2ZWxTZWxlY3Rpb25CdXR0b24oXHJcbiAgICAgIG5ldyBJbWFnZSggSUNPTl9TRVRTWyBvcHRpb25zLmljb25TZXQgXVsgbGV2ZWxJbmRleCBdICksXHJcbiAgICAgIG1vZGVsLmxldmVsTW9kZWxzWyBsZXZlbEluZGV4IF0uZGlzcGxheVNjb3JlUHJvcGVydHksXHJcbiAgICAgIHtcclxuICAgICAgICBidXR0b25XaWR0aDogQlVUVE9OX0xFTkdUSCxcclxuICAgICAgICBidXR0b25IZWlnaHQ6IEJVVFRPTl9MRU5HVEgsXHJcbiAgICAgICAgYmFzZUNvbG9yOiBvcHRpb25zLmJ1dHRvbkJhc2VDb2xvcixcclxuICAgICAgICBiZXN0VGltZVByb3BlcnR5OiBtb2RlbC5sZXZlbE1vZGVsc1sgbGV2ZWxJbmRleCBdLmJlc3RUaW1lUHJvcGVydHksXHJcbiAgICAgICAgYmVzdFRpbWVWaXNpYmxlUHJvcGVydHk6IEFyaXRobWV0aWNHbG9iYWxzLnRpbWVyRW5hYmxlZFByb3BlcnR5LFxyXG4gICAgICAgIGxpc3RlbmVyOiAoKSA9PiB7XHJcbiAgICAgICAgICBjYWxsYmFjayggbGV2ZWxJbmRleCApO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY3JlYXRlU2NvcmVEaXNwbGF5OiBzY29yZVByb3BlcnR5ID0+IG5ldyBTY29yZURpc3BsYXlTdGFycyggc2NvcmVQcm9wZXJ0eSwge1xyXG4gICAgICAgICAgbnVtYmVyT2ZTdGFyczogQXJpdGhtZXRpY0NvbnN0YW50cy5OVU1fU1RBUlMsXHJcbiAgICAgICAgICBwZXJmZWN0U2NvcmU6IGxldmVsLnBlcmZlY3RTY29yZVxyXG4gICAgICAgIH0gKSxcclxuICAgICAgICBzb3VuZFBsYXllckluZGV4OiBsZXZlbEluZGV4XHJcbiAgICAgIH1cclxuICAgICkgKTtcclxuICAgIGNvbnN0IHNlbGVjdExldmVsQnV0dG9uc0hCb3ggPSBuZXcgSEJveCggeyBzcGFjaW5nOiA1MCwgY2hpbGRyZW46IGxldmVsU2VsZWN0QnV0dG9ucyB9ICk7XHJcbiAgICBzZWxlY3RMZXZlbEJ1dHRvbnNIQm94LnRvcCA9IGNob29zZUxldmVsVGl0bGUuYm90dG9tICsgMTU7XHJcbiAgICBzZWxlY3RMZXZlbEJ1dHRvbnNIQm94LmNlbnRlclggPSBjaG9vc2VMZXZlbFRpdGxlLmNlbnRlclg7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBzZWxlY3RMZXZlbEJ1dHRvbnNIQm94ICk7XHJcblxyXG4gICAgLy8gYWRkIHRpbWVyIGFuZCBzb3VuZCBidXR0b25zXHJcbiAgICBjb25zdCBzb3VuZEFuZFRpbWVyQnV0dG9ucyA9IG5ldyBWQm94KCB7XHJcbiAgICAgIHNwYWNpbmc6IDUsXHJcbiAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgbmV3IFRpbWVyVG9nZ2xlQnV0dG9uKCBBcml0aG1ldGljR2xvYmFscy50aW1lckVuYWJsZWRQcm9wZXJ0eSApXHJcbiAgICAgIF0sXHJcbiAgICAgIHJpZ2h0OiBsYXlvdXRCb3VuZHMubWF4WCAqIDAuMDgsXHJcbiAgICAgIGJvdHRvbTogbGF5b3V0Qm91bmRzLm1heFkgKiAwLjk1XHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBzb3VuZEFuZFRpbWVyQnV0dG9ucyApO1xyXG5cclxuICAgIC8vIGFkZCByZXNldCBhbGwgYnV0dG9uXHJcbiAgICBjb25zdCByZXNldEFsbEJ1dHRvbiA9IG5ldyBSZXNldEFsbEJ1dHRvbigge1xyXG4gICAgICBsaXN0ZW5lcjogKCkgPT4ge21vZGVsLnJlc2V0KCk7IH0sXHJcbiAgICAgIHJpZ2h0OiBsYXlvdXRCb3VuZHMubWF4WCAqIDAuOTgsXHJcbiAgICAgIGJvdHRvbTogbGF5b3V0Qm91bmRzLm1heFkgKiAwLjk1XHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCByZXNldEFsbEJ1dHRvbiApO1xyXG5cclxuICAgIC8vIHBhc3Mgb3B0aW9ucyB0aHJvdWdoIHRvIHN1cGVyY2xhc3NcclxuICAgIHRoaXMubXV0YXRlKCBvcHRpb25zICk7XHJcbiAgfVxyXG59XHJcblxyXG5hcml0aG1ldGljLnJlZ2lzdGVyKCAnTGV2ZWxTZWxlY3Rpb25Ob2RlJywgTGV2ZWxTZWxlY3Rpb25Ob2RlICk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBMZXZlbFNlbGVjdGlvbk5vZGU7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsS0FBSyxNQUFNLG1DQUFtQztBQUNyRCxPQUFPQyxjQUFj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