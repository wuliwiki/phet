// Copyright 2018-2023, University of Colorado Boulder

/**
 * MovementAlerter subtype that knows how to alert movement for Friction's chemistry book, which is pretty specific for a
 * freely draggable object.
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */

import merge from '../../../../../phet-core/js/merge.js';
import BorderAlertsDescriber from '../../../../../scenery-phet/js/accessibility/describers/BorderAlertsDescriber.js';
import DirectionEnum from '../../../../../scenery-phet/js/accessibility/describers/DirectionEnum.js';
import MovementAlerter from '../../../../../scenery-phet/js/accessibility/describers/MovementAlerter.js';
import { Voicing } from '../../../../../scenery/js/imports.js';
import ResponsePacket from '../../../../../utterance-queue/js/ResponsePacket.js';
import Utterance from '../../../../../utterance-queue/js/Utterance.js';
import friction from '../../../friction.js';
import FrictionStrings from '../../../FrictionStrings.js';
import FrictionModel from '../../model/FrictionModel.js';
import LeftRightAlertPair from '../LeftRightAlertPair.js';

// constants
const moveDownToRubHarderSentenceString = FrictionStrings.a11y.moveDownToRubHarderSentence;
const rubFastOrSlowString = FrictionStrings.a11y.rubFastOrSlow;
const DEFAULT_AT_TOP_ALERT = BorderAlertsDescriber.getDefaultTopAlert();
const DEFAULT_MOVEMENT_DESCRIPTIONS = MovementAlerter.getDefaultMovementDescriptions();
const atTopMoveDownResponsePacket = new ResponsePacket({
  objectResponse: DEFAULT_AT_TOP_ALERT,
  hintResponse: FrictionStrings.a11y.moveDownToRubHarder
});
const rubFastOrSlowResponsePacket = new ResponsePacket({
  hintResponse: rubFastOrSlowString
});
const downRubFastOrSlowResponsePacket = rubFastOrSlowResponsePacket.copy();
downRubFastOrSlowResponsePacket.objectResponse = DEFAULT_MOVEMENT_DESCRIPTIONS.DOWN;
class BookMovementAlerter extends MovementAlerter {
  /**
   * @param {FrictionModel} model
   * @param {Object} [options]
   */
  constructor(model, options) {
    options = merge({
      borderAlertsOptions: {
        // don't alert the bottom border alert because the model isn't set up to have that work based on the bounds
        bottomAlert: null,
        // override the default with an alert that will give two "verbose alerts" before repeating the basic default "at top"
        topAlert: new Utterance({
          alert: atTopMoveDownResponsePacket
        }),
        boundsProperty: model.topBookDragBoundsProperty,
        repeatBorderAlerts: true
      },
      // We don't need direction or border alerts here, just a couple a voicing hints added below.
      alertToVoicing: false
    }, options);
    super(model.topBookPositionProperty, options);
    this.directionChangeUtterance.priorityProperty.value = Utterance.LOW_PRIORITY;

    // @private
    this.model = model;

    // @private
    this.bottomDescriptionUtterance = new Utterance({
      alert: downRubFastOrSlowResponsePacket
    });

    // @private
    this.bottomVoicingUtterance = new Utterance({
      alert: rubFastOrSlowResponsePacket
    });

    // @private
    this.moveDownToRubHarderUtterance = new Utterance({
      alert: new ResponsePacket({
        hintResponse: moveDownToRubHarderSentenceString
      })
    });

    // {LeftRightAlertPair} - alert pairs to monitor if both left and right alerts have been triggered.
    this.contactedAlertPair = new LeftRightAlertPair();
    this.separatedAlertPair = new LeftRightAlertPair();

    // reset these properties when the contactProperty changes to false.
    model.contactProperty.lazyLink((isTouching, wasTouching) => {
      // if the books were touching, and now they aren't, reset the ability for left/right alerts when contacted.
      if (!isTouching && wasTouching) {
        this.contactedAlertPair.reset(); // reset the pair monitoring the alerts when contacted.
      } else {
        // reset the pair monitoring the alerts when not contacted.
        this.separatedAlertPair.reset();
      }

      // Once touching, speak the alert
      if (!wasTouching && isTouching && model.numberOfAtomsShearedOffProperty.value === 0) {
        this.alert(this.bottomDescriptionUtterance);
        Voicing.alertUtterance(this.bottomVoicingUtterance);
      }
    });
  }

  /**
   * alert for a specific direction
   * @param {DirectionEnum} direction
   * @private
   */
  alertForDirection(direction) {
    // A horizontal direction
    if (DirectionEnum.isHorizontalDirection(direction)) {
      // are the books touching
      if (this.model.contactProperty.get()) {
        // if both the left and right alerts haven't yet been alerted yet while contacted
        if (!this.contactedAlertPair.bothAlerted()) {
          this.alertDirections(direction);
          this.contactedAlertPair.updateFromDirection(direction);
        }
      }

      // The books aren't touching
      else {
        // if both the left and right alerts haven't yet been alerted while separated
        if (!this.separatedAlertPair.bothAlerted()) {
          if (this.model.vibrationAmplitudeProperty.value < FrictionModel.AMPLITUDE_SETTLED_THRESHOLD) {
            this.alertDirections(direction);
          }
          this.separatedAlertPair.updateFromDirection(direction);
        } else if (this.model.numberOfAtomsShearedOffProperty.value < FrictionModel.NUMBER_OF_SHEARABLE_ATOMS / 2) {
          // If they "bothAlerted" meaning that the user went left and right without contacting the bottom boot, then
          // cue a movement and reset the alertPair. Only until enough atoms shear off that the user is "trained."

          this.alert(this.moveDownToRubHarderUtterance);

          // Support voicing for this hint
          Voicing.alertUtterance(this.moveDownToRubHarderUtterance);

          // This means that we will get left/right alerts again after a "move down" cue
          this.separatedAlertPair.reset();
        }
      }
    } else if (this.model.contactProperty.get() && direction === DirectionEnum.DOWN) {
      // already covered by contacted alert above, don't repeat, or speak "down" again by going to the base case.
    }

    // base case
    else {
      this.alertDirections(direction);
    }
  }

  /**
   * Alert a movement direction. Overridden for specific alert features for Friction, i.e. the alerts change if
   * the two books are in contact.
   * @override
   * @public
   */
  alertDirectionalMovement() {
    const newPosition = this.positionProperty.get();
    if (!newPosition.equals(this.lastAlertedPosition)) {
      const directions = this.getDirections(newPosition, this.lastAlertedPosition);
      directions.forEach(direction => {
        this.alertForDirection(direction);
      });

      // Update the last alerted position even if this.alertForDirection doesn't put anything on utteranceQueue, see https://github.com/phetsims/friction/issues/149#issuecomment-444458179
      // This has to be done because this.alertForDirection only conditionally alerts using `this.alert`, but we still
      // want the model positions to be kept in sync.
      this.lastAlertedPosition = this.positionProperty.get();
    }
  }

  /**
   * @override
   * @public
   */
  reset() {
    super.reset();
    this.bottomDescriptionUtterance.reset();
    this.bottomVoicingUtterance.reset();
    this.moveDownToRubHarderUtterance.reset();
    this.contactedAlertPair.reset();
    this.separatedAlertPair.reset();
  }
}
friction.register('BookMovementAlerter', BookMovementAlerter);
export default BookMovementAlerter;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtZXJnZSIsIkJvcmRlckFsZXJ0c0Rlc2NyaWJlciIsIkRpcmVjdGlvbkVudW0iLCJNb3ZlbWVudEFsZXJ0ZXIiLCJWb2ljaW5nIiwiUmVzcG9uc2VQYWNrZXQiLCJVdHRlcmFuY2UiLCJmcmljdGlvbiIsIkZyaWN0aW9uU3RyaW5ncyIsIkZyaWN0aW9uTW9kZWwiLCJMZWZ0UmlnaHRBbGVydFBhaXIiLCJtb3ZlRG93blRvUnViSGFyZGVyU2VudGVuY2VTdHJpbmciLCJhMTF5IiwibW92ZURvd25Ub1J1YkhhcmRlclNlbnRlbmNlIiwicnViRmFzdE9yU2xvd1N0cmluZyIsInJ1YkZhc3RPclNsb3ciLCJERUZBVUxUX0FUX1RPUF9BTEVSVCIsImdldERlZmF1bHRUb3BBbGVydCIsIkRFRkFVTFRfTU9WRU1FTlRfREVTQ1JJUFRJT05TIiwiZ2V0RGVmYXVsdE1vdmVtZW50RGVzY3JpcHRpb25zIiwiYXRUb3BNb3ZlRG93blJlc3BvbnNlUGFja2V0Iiwib2JqZWN0UmVzcG9uc2UiLCJoaW50UmVzcG9uc2UiLCJtb3ZlRG93blRvUnViSGFyZGVyIiwicnViRmFzdE9yU2xvd1Jlc3BvbnNlUGFja2V0IiwiZG93blJ1YkZhc3RPclNsb3dSZXNwb25zZVBhY2tldCIsImNvcHkiLCJET1dOIiwiQm9va01vdmVtZW50QWxlcnRlciIsImNvbnN0cnVjdG9yIiwibW9kZWwiLCJvcHRpb25zIiwiYm9yZGVyQWxlcnRzT3B0aW9ucyIsImJvdHRvbUFsZXJ0IiwidG9wQWxlcnQiLCJhbGVydCIsImJvdW5kc1Byb3BlcnR5IiwidG9wQm9va0RyYWdCb3VuZHNQcm9wZXJ0eSIsInJlcGVhdEJvcmRlckFsZXJ0cyIsImFsZXJ0VG9Wb2ljaW5nIiwidG9wQm9va1Bvc2l0aW9uUHJvcGVydHkiLCJkaXJlY3Rpb25DaGFuZ2VVdHRlcmFuY2UiLCJwcmlvcml0eVByb3BlcnR5IiwidmFsdWUiLCJMT1dfUFJJT1JJVFkiLCJib3R0b21EZXNjcmlwdGlvblV0dGVyYW5jZSIsImJvdHRvbVZvaWNpbmdVdHRlcmFuY2UiLCJtb3ZlRG93blRvUnViSGFyZGVyVXR0ZXJhbmNlIiwiY29udGFjdGVkQWxlcnRQYWlyIiwic2VwYXJhdGVkQWxlcnRQYWlyIiwiY29udGFjdFByb3BlcnR5IiwibGF6eUxpbmsiLCJpc1RvdWNoaW5nIiwid2FzVG91Y2hpbmciLCJyZXNldCIsIm51bWJlck9mQXRvbXNTaGVhcmVkT2ZmUHJvcGVydHkiLCJhbGVydFV0dGVyYW5jZSIsImFsZXJ0Rm9yRGlyZWN0aW9uIiwiZGlyZWN0aW9uIiwiaXNIb3Jpem9udGFsRGlyZWN0aW9uIiwiZ2V0IiwiYm90aEFsZXJ0ZWQiLCJhbGVydERpcmVjdGlvbnMiLCJ1cGRhdGVGcm9tRGlyZWN0aW9uIiwidmlicmF0aW9uQW1wbGl0dWRlUHJvcGVydHkiLCJBTVBMSVRVREVfU0VUVExFRF9USFJFU0hPTEQiLCJOVU1CRVJfT0ZfU0hFQVJBQkxFX0FUT01TIiwiYWxlcnREaXJlY3Rpb25hbE1vdmVtZW50IiwibmV3UG9zaXRpb24iLCJwb3NpdGlvblByb3BlcnR5IiwiZXF1YWxzIiwibGFzdEFsZXJ0ZWRQb3NpdGlvbiIsImRpcmVjdGlvbnMiLCJnZXREaXJlY3Rpb25zIiwiZm9yRWFjaCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiQm9va01vdmVtZW50QWxlcnRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOC0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBNb3ZlbWVudEFsZXJ0ZXIgc3VidHlwZSB0aGF0IGtub3dzIGhvdyB0byBhbGVydCBtb3ZlbWVudCBmb3IgRnJpY3Rpb24ncyBjaGVtaXN0cnkgYm9vaywgd2hpY2ggaXMgcHJldHR5IHNwZWNpZmljIGZvciBhXHJcbiAqIGZyZWVseSBkcmFnZ2FibGUgb2JqZWN0LlxyXG4gKiBAYXV0aG9yIE1pY2hhZWwgS2F1em1hbm4gKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IG1lcmdlIGZyb20gJy4uLy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9tZXJnZS5qcyc7XHJcbmltcG9ydCBCb3JkZXJBbGVydHNEZXNjcmliZXIgZnJvbSAnLi4vLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL2FjY2Vzc2liaWxpdHkvZGVzY3JpYmVycy9Cb3JkZXJBbGVydHNEZXNjcmliZXIuanMnO1xyXG5pbXBvcnQgRGlyZWN0aW9uRW51bSBmcm9tICcuLi8uLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvYWNjZXNzaWJpbGl0eS9kZXNjcmliZXJzL0RpcmVjdGlvbkVudW0uanMnO1xyXG5pbXBvcnQgTW92ZW1lbnRBbGVydGVyIGZyb20gJy4uLy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9hY2Nlc3NpYmlsaXR5L2Rlc2NyaWJlcnMvTW92ZW1lbnRBbGVydGVyLmpzJztcclxuaW1wb3J0IHsgVm9pY2luZyB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBSZXNwb25zZVBhY2tldCBmcm9tICcuLi8uLi8uLi8uLi8uLi91dHRlcmFuY2UtcXVldWUvanMvUmVzcG9uc2VQYWNrZXQuanMnO1xyXG5pbXBvcnQgVXR0ZXJhbmNlIGZyb20gJy4uLy4uLy4uLy4uLy4uL3V0dGVyYW5jZS1xdWV1ZS9qcy9VdHRlcmFuY2UuanMnO1xyXG5pbXBvcnQgZnJpY3Rpb24gZnJvbSAnLi4vLi4vLi4vZnJpY3Rpb24uanMnO1xyXG5pbXBvcnQgRnJpY3Rpb25TdHJpbmdzIGZyb20gJy4uLy4uLy4uL0ZyaWN0aW9uU3RyaW5ncy5qcyc7XHJcbmltcG9ydCBGcmljdGlvbk1vZGVsIGZyb20gJy4uLy4uL21vZGVsL0ZyaWN0aW9uTW9kZWwuanMnO1xyXG5pbXBvcnQgTGVmdFJpZ2h0QWxlcnRQYWlyIGZyb20gJy4uL0xlZnRSaWdodEFsZXJ0UGFpci5qcyc7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgbW92ZURvd25Ub1J1YkhhcmRlclNlbnRlbmNlU3RyaW5nID0gRnJpY3Rpb25TdHJpbmdzLmExMXkubW92ZURvd25Ub1J1YkhhcmRlclNlbnRlbmNlO1xyXG5jb25zdCBydWJGYXN0T3JTbG93U3RyaW5nID0gRnJpY3Rpb25TdHJpbmdzLmExMXkucnViRmFzdE9yU2xvdztcclxuXHJcbmNvbnN0IERFRkFVTFRfQVRfVE9QX0FMRVJUID0gQm9yZGVyQWxlcnRzRGVzY3JpYmVyLmdldERlZmF1bHRUb3BBbGVydCgpO1xyXG5jb25zdCBERUZBVUxUX01PVkVNRU5UX0RFU0NSSVBUSU9OUyA9IE1vdmVtZW50QWxlcnRlci5nZXREZWZhdWx0TW92ZW1lbnREZXNjcmlwdGlvbnMoKTtcclxuXHJcbmNvbnN0IGF0VG9wTW92ZURvd25SZXNwb25zZVBhY2tldCA9IG5ldyBSZXNwb25zZVBhY2tldCgge1xyXG4gIG9iamVjdFJlc3BvbnNlOiBERUZBVUxUX0FUX1RPUF9BTEVSVCxcclxuICBoaW50UmVzcG9uc2U6IEZyaWN0aW9uU3RyaW5ncy5hMTF5Lm1vdmVEb3duVG9SdWJIYXJkZXJcclxufSApO1xyXG5cclxuY29uc3QgcnViRmFzdE9yU2xvd1Jlc3BvbnNlUGFja2V0ID0gbmV3IFJlc3BvbnNlUGFja2V0KCB7XHJcbiAgaGludFJlc3BvbnNlOiBydWJGYXN0T3JTbG93U3RyaW5nXHJcbn0gKTtcclxuXHJcbmNvbnN0IGRvd25SdWJGYXN0T3JTbG93UmVzcG9uc2VQYWNrZXQgPSBydWJGYXN0T3JTbG93UmVzcG9uc2VQYWNrZXQuY29weSgpO1xyXG5kb3duUnViRmFzdE9yU2xvd1Jlc3BvbnNlUGFja2V0Lm9iamVjdFJlc3BvbnNlID0gREVGQVVMVF9NT1ZFTUVOVF9ERVNDUklQVElPTlMuRE9XTjtcclxuXHJcblxyXG5jbGFzcyBCb29rTW92ZW1lbnRBbGVydGVyIGV4dGVuZHMgTW92ZW1lbnRBbGVydGVyIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtGcmljdGlvbk1vZGVsfSBtb2RlbFxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cclxuICAgKi9cclxuICBjb25zdHJ1Y3RvciggbW9kZWwsIG9wdGlvbnMgKSB7XHJcblxyXG4gICAgb3B0aW9ucyA9IG1lcmdlKCB7XHJcbiAgICAgIGJvcmRlckFsZXJ0c09wdGlvbnM6IHtcclxuXHJcbiAgICAgICAgLy8gZG9uJ3QgYWxlcnQgdGhlIGJvdHRvbSBib3JkZXIgYWxlcnQgYmVjYXVzZSB0aGUgbW9kZWwgaXNuJ3Qgc2V0IHVwIHRvIGhhdmUgdGhhdCB3b3JrIGJhc2VkIG9uIHRoZSBib3VuZHNcclxuICAgICAgICBib3R0b21BbGVydDogbnVsbCxcclxuXHJcbiAgICAgICAgLy8gb3ZlcnJpZGUgdGhlIGRlZmF1bHQgd2l0aCBhbiBhbGVydCB0aGF0IHdpbGwgZ2l2ZSB0d28gXCJ2ZXJib3NlIGFsZXJ0c1wiIGJlZm9yZSByZXBlYXRpbmcgdGhlIGJhc2ljIGRlZmF1bHQgXCJhdCB0b3BcIlxyXG4gICAgICAgIHRvcEFsZXJ0OiBuZXcgVXR0ZXJhbmNlKCB7XHJcbiAgICAgICAgICBhbGVydDogYXRUb3BNb3ZlRG93blJlc3BvbnNlUGFja2V0XHJcbiAgICAgICAgfSApLFxyXG5cclxuICAgICAgICBib3VuZHNQcm9wZXJ0eTogbW9kZWwudG9wQm9va0RyYWdCb3VuZHNQcm9wZXJ0eSxcclxuXHJcbiAgICAgICAgcmVwZWF0Qm9yZGVyQWxlcnRzOiB0cnVlXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvLyBXZSBkb24ndCBuZWVkIGRpcmVjdGlvbiBvciBib3JkZXIgYWxlcnRzIGhlcmUsIGp1c3QgYSBjb3VwbGUgYSB2b2ljaW5nIGhpbnRzIGFkZGVkIGJlbG93LlxyXG4gICAgICBhbGVydFRvVm9pY2luZzogZmFsc2VcclxuICAgIH0sIG9wdGlvbnMgKTtcclxuXHJcbiAgICBzdXBlciggbW9kZWwudG9wQm9va1Bvc2l0aW9uUHJvcGVydHksIG9wdGlvbnMgKTtcclxuXHJcbiAgICB0aGlzLmRpcmVjdGlvbkNoYW5nZVV0dGVyYW5jZS5wcmlvcml0eVByb3BlcnR5LnZhbHVlID0gVXR0ZXJhbmNlLkxPV19QUklPUklUWTtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZVxyXG4gICAgdGhpcy5tb2RlbCA9IG1vZGVsO1xyXG5cclxuICAgIC8vIEBwcml2YXRlXHJcbiAgICB0aGlzLmJvdHRvbURlc2NyaXB0aW9uVXR0ZXJhbmNlID0gbmV3IFV0dGVyYW5jZSgge1xyXG4gICAgICBhbGVydDogZG93blJ1YkZhc3RPclNsb3dSZXNwb25zZVBhY2tldFxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIEBwcml2YXRlXHJcbiAgICB0aGlzLmJvdHRvbVZvaWNpbmdVdHRlcmFuY2UgPSBuZXcgVXR0ZXJhbmNlKCB7XHJcbiAgICAgIGFsZXJ0OiBydWJGYXN0T3JTbG93UmVzcG9uc2VQYWNrZXRcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZVxyXG4gICAgdGhpcy5tb3ZlRG93blRvUnViSGFyZGVyVXR0ZXJhbmNlID0gbmV3IFV0dGVyYW5jZSgge1xyXG4gICAgICBhbGVydDogbmV3IFJlc3BvbnNlUGFja2V0KCB7XHJcbiAgICAgICAgaGludFJlc3BvbnNlOiBtb3ZlRG93blRvUnViSGFyZGVyU2VudGVuY2VTdHJpbmdcclxuICAgICAgfSApXHJcbiAgICB9ICk7XHJcblxyXG5cclxuICAgIC8vIHtMZWZ0UmlnaHRBbGVydFBhaXJ9IC0gYWxlcnQgcGFpcnMgdG8gbW9uaXRvciBpZiBib3RoIGxlZnQgYW5kIHJpZ2h0IGFsZXJ0cyBoYXZlIGJlZW4gdHJpZ2dlcmVkLlxyXG4gICAgdGhpcy5jb250YWN0ZWRBbGVydFBhaXIgPSBuZXcgTGVmdFJpZ2h0QWxlcnRQYWlyKCk7XHJcbiAgICB0aGlzLnNlcGFyYXRlZEFsZXJ0UGFpciA9IG5ldyBMZWZ0UmlnaHRBbGVydFBhaXIoKTtcclxuXHJcbiAgICAvLyByZXNldCB0aGVzZSBwcm9wZXJ0aWVzIHdoZW4gdGhlIGNvbnRhY3RQcm9wZXJ0eSBjaGFuZ2VzIHRvIGZhbHNlLlxyXG4gICAgbW9kZWwuY29udGFjdFByb3BlcnR5LmxhenlMaW5rKCAoIGlzVG91Y2hpbmcsIHdhc1RvdWNoaW5nICkgPT4ge1xyXG5cclxuICAgICAgLy8gaWYgdGhlIGJvb2tzIHdlcmUgdG91Y2hpbmcsIGFuZCBub3cgdGhleSBhcmVuJ3QsIHJlc2V0IHRoZSBhYmlsaXR5IGZvciBsZWZ0L3JpZ2h0IGFsZXJ0cyB3aGVuIGNvbnRhY3RlZC5cclxuICAgICAgaWYgKCAhaXNUb3VjaGluZyAmJiB3YXNUb3VjaGluZyApIHtcclxuICAgICAgICB0aGlzLmNvbnRhY3RlZEFsZXJ0UGFpci5yZXNldCgpOyAvLyByZXNldCB0aGUgcGFpciBtb25pdG9yaW5nIHRoZSBhbGVydHMgd2hlbiBjb250YWN0ZWQuXHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcblxyXG4gICAgICAgIC8vIHJlc2V0IHRoZSBwYWlyIG1vbml0b3JpbmcgdGhlIGFsZXJ0cyB3aGVuIG5vdCBjb250YWN0ZWQuXHJcbiAgICAgICAgdGhpcy5zZXBhcmF0ZWRBbGVydFBhaXIucmVzZXQoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gT25jZSB0b3VjaGluZywgc3BlYWsgdGhlIGFsZXJ0XHJcbiAgICAgIGlmICggIXdhc1RvdWNoaW5nICYmIGlzVG91Y2hpbmcgJiYgbW9kZWwubnVtYmVyT2ZBdG9tc1NoZWFyZWRPZmZQcm9wZXJ0eS52YWx1ZSA9PT0gMCApIHtcclxuICAgICAgICB0aGlzLmFsZXJ0KCB0aGlzLmJvdHRvbURlc2NyaXB0aW9uVXR0ZXJhbmNlICk7XHJcbiAgICAgICAgVm9pY2luZy5hbGVydFV0dGVyYW5jZSggdGhpcy5ib3R0b21Wb2ljaW5nVXR0ZXJhbmNlICk7XHJcbiAgICAgIH1cclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGFsZXJ0IGZvciBhIHNwZWNpZmljIGRpcmVjdGlvblxyXG4gICAqIEBwYXJhbSB7RGlyZWN0aW9uRW51bX0gZGlyZWN0aW9uXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBhbGVydEZvckRpcmVjdGlvbiggZGlyZWN0aW9uICkge1xyXG5cclxuICAgIC8vIEEgaG9yaXpvbnRhbCBkaXJlY3Rpb25cclxuICAgIGlmICggRGlyZWN0aW9uRW51bS5pc0hvcml6b250YWxEaXJlY3Rpb24oIGRpcmVjdGlvbiApICkge1xyXG5cclxuICAgICAgLy8gYXJlIHRoZSBib29rcyB0b3VjaGluZ1xyXG4gICAgICBpZiAoIHRoaXMubW9kZWwuY29udGFjdFByb3BlcnR5LmdldCgpICkge1xyXG5cclxuICAgICAgICAvLyBpZiBib3RoIHRoZSBsZWZ0IGFuZCByaWdodCBhbGVydHMgaGF2ZW4ndCB5ZXQgYmVlbiBhbGVydGVkIHlldCB3aGlsZSBjb250YWN0ZWRcclxuICAgICAgICBpZiAoICF0aGlzLmNvbnRhY3RlZEFsZXJ0UGFpci5ib3RoQWxlcnRlZCgpICkge1xyXG4gICAgICAgICAgdGhpcy5hbGVydERpcmVjdGlvbnMoIGRpcmVjdGlvbiApO1xyXG4gICAgICAgICAgdGhpcy5jb250YWN0ZWRBbGVydFBhaXIudXBkYXRlRnJvbURpcmVjdGlvbiggZGlyZWN0aW9uICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBUaGUgYm9va3MgYXJlbid0IHRvdWNoaW5nXHJcbiAgICAgIGVsc2Uge1xyXG5cclxuICAgICAgICAvLyBpZiBib3RoIHRoZSBsZWZ0IGFuZCByaWdodCBhbGVydHMgaGF2ZW4ndCB5ZXQgYmVlbiBhbGVydGVkIHdoaWxlIHNlcGFyYXRlZFxyXG4gICAgICAgIGlmICggIXRoaXMuc2VwYXJhdGVkQWxlcnRQYWlyLmJvdGhBbGVydGVkKCkgKSB7XHJcblxyXG4gICAgICAgICAgaWYgKCB0aGlzLm1vZGVsLnZpYnJhdGlvbkFtcGxpdHVkZVByb3BlcnR5LnZhbHVlIDwgRnJpY3Rpb25Nb2RlbC5BTVBMSVRVREVfU0VUVExFRF9USFJFU0hPTEQgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWxlcnREaXJlY3Rpb25zKCBkaXJlY3Rpb24gKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMuc2VwYXJhdGVkQWxlcnRQYWlyLnVwZGF0ZUZyb21EaXJlY3Rpb24oIGRpcmVjdGlvbiApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZWxzZSBpZiAoIHRoaXMubW9kZWwubnVtYmVyT2ZBdG9tc1NoZWFyZWRPZmZQcm9wZXJ0eS52YWx1ZSA8IEZyaWN0aW9uTW9kZWwuTlVNQkVSX09GX1NIRUFSQUJMRV9BVE9NUyAvIDIgKSB7XHJcbiAgICAgICAgICAvLyBJZiB0aGV5IFwiYm90aEFsZXJ0ZWRcIiBtZWFuaW5nIHRoYXQgdGhlIHVzZXIgd2VudCBsZWZ0IGFuZCByaWdodCB3aXRob3V0IGNvbnRhY3RpbmcgdGhlIGJvdHRvbSBib290LCB0aGVuXHJcbiAgICAgICAgICAvLyBjdWUgYSBtb3ZlbWVudCBhbmQgcmVzZXQgdGhlIGFsZXJ0UGFpci4gT25seSB1bnRpbCBlbm91Z2ggYXRvbXMgc2hlYXIgb2ZmIHRoYXQgdGhlIHVzZXIgaXMgXCJ0cmFpbmVkLlwiXHJcblxyXG4gICAgICAgICAgdGhpcy5hbGVydCggdGhpcy5tb3ZlRG93blRvUnViSGFyZGVyVXR0ZXJhbmNlICk7XHJcblxyXG4gICAgICAgICAgLy8gU3VwcG9ydCB2b2ljaW5nIGZvciB0aGlzIGhpbnRcclxuICAgICAgICAgIFZvaWNpbmcuYWxlcnRVdHRlcmFuY2UoIHRoaXMubW92ZURvd25Ub1J1YkhhcmRlclV0dGVyYW5jZSApO1xyXG5cclxuICAgICAgICAgIC8vIFRoaXMgbWVhbnMgdGhhdCB3ZSB3aWxsIGdldCBsZWZ0L3JpZ2h0IGFsZXJ0cyBhZ2FpbiBhZnRlciBhIFwibW92ZSBkb3duXCIgY3VlXHJcbiAgICAgICAgICB0aGlzLnNlcGFyYXRlZEFsZXJ0UGFpci5yZXNldCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGVsc2UgaWYgKCB0aGlzLm1vZGVsLmNvbnRhY3RQcm9wZXJ0eS5nZXQoKSAmJiBkaXJlY3Rpb24gPT09IERpcmVjdGlvbkVudW0uRE9XTiApIHtcclxuICAgICAgLy8gYWxyZWFkeSBjb3ZlcmVkIGJ5IGNvbnRhY3RlZCBhbGVydCBhYm92ZSwgZG9uJ3QgcmVwZWF0LCBvciBzcGVhayBcImRvd25cIiBhZ2FpbiBieSBnb2luZyB0byB0aGUgYmFzZSBjYXNlLlxyXG4gICAgfVxyXG5cclxuICAgIC8vIGJhc2UgY2FzZVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMuYWxlcnREaXJlY3Rpb25zKCBkaXJlY3Rpb24gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFsZXJ0IGEgbW92ZW1lbnQgZGlyZWN0aW9uLiBPdmVycmlkZGVuIGZvciBzcGVjaWZpYyBhbGVydCBmZWF0dXJlcyBmb3IgRnJpY3Rpb24sIGkuZS4gdGhlIGFsZXJ0cyBjaGFuZ2UgaWZcclxuICAgKiB0aGUgdHdvIGJvb2tzIGFyZSBpbiBjb250YWN0LlxyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBhbGVydERpcmVjdGlvbmFsTW92ZW1lbnQoKSB7XHJcbiAgICBjb25zdCBuZXdQb3NpdGlvbiA9IHRoaXMucG9zaXRpb25Qcm9wZXJ0eS5nZXQoKTtcclxuICAgIGlmICggIW5ld1Bvc2l0aW9uLmVxdWFscyggdGhpcy5sYXN0QWxlcnRlZFBvc2l0aW9uICkgKSB7XHJcbiAgICAgIGNvbnN0IGRpcmVjdGlvbnMgPSB0aGlzLmdldERpcmVjdGlvbnMoIG5ld1Bvc2l0aW9uLCB0aGlzLmxhc3RBbGVydGVkUG9zaXRpb24gKTtcclxuXHJcbiAgICAgIGRpcmVjdGlvbnMuZm9yRWFjaCggZGlyZWN0aW9uID0+IHtcclxuICAgICAgICB0aGlzLmFsZXJ0Rm9yRGlyZWN0aW9uKCBkaXJlY3Rpb24gKTtcclxuICAgICAgfSApO1xyXG5cclxuICAgICAgLy8gVXBkYXRlIHRoZSBsYXN0IGFsZXJ0ZWQgcG9zaXRpb24gZXZlbiBpZiB0aGlzLmFsZXJ0Rm9yRGlyZWN0aW9uIGRvZXNuJ3QgcHV0IGFueXRoaW5nIG9uIHV0dGVyYW5jZVF1ZXVlLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL2ZyaWN0aW9uL2lzc3Vlcy8xNDkjaXNzdWVjb21tZW50LTQ0NDQ1ODE3OVxyXG4gICAgICAvLyBUaGlzIGhhcyB0byBiZSBkb25lIGJlY2F1c2UgdGhpcy5hbGVydEZvckRpcmVjdGlvbiBvbmx5IGNvbmRpdGlvbmFsbHkgYWxlcnRzIHVzaW5nIGB0aGlzLmFsZXJ0YCwgYnV0IHdlIHN0aWxsXHJcbiAgICAgIC8vIHdhbnQgdGhlIG1vZGVsIHBvc2l0aW9ucyB0byBiZSBrZXB0IGluIHN5bmMuXHJcbiAgICAgIHRoaXMubGFzdEFsZXJ0ZWRQb3NpdGlvbiA9IHRoaXMucG9zaXRpb25Qcm9wZXJ0eS5nZXQoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICByZXNldCgpIHtcclxuICAgIHN1cGVyLnJlc2V0KCk7XHJcbiAgICB0aGlzLmJvdHRvbURlc2NyaXB0aW9uVXR0ZXJhbmNlLnJlc2V0KCk7XHJcbiAgICB0aGlzLmJvdHRvbVZvaWNpbmdVdHRlcmFuY2UucmVzZXQoKTtcclxuICAgIHRoaXMubW92ZURvd25Ub1J1YkhhcmRlclV0dGVyYW5jZS5yZXNldCgpO1xyXG4gICAgdGhpcy5jb250YWN0ZWRBbGVydFBhaXIucmVzZXQoKTtcclxuICAgIHRoaXMuc2VwYXJhdGVkQWxlcnRQYWlyLnJlc2V0KCk7XHJcbiAgfVxyXG59XHJcblxyXG5mcmljdGlvbi5yZWdpc3RlciggJ0Jvb2tNb3ZlbWVudEFsZXJ0ZXInLCBCb29rTW92ZW1lbnRBbGVydGVyICk7XHJcbmV4cG9ydCBkZWZhdWx0IEJvb2tNb3ZlbWVudEFsZXJ0ZXI7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLEtBQUssTUFBTSxzQ0FBc0M7QUFDeEQsT0FBT0MscUJBQXFCLE1B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