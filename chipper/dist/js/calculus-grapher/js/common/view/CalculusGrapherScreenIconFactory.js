// Copyright 2023, University of Colorado Boulder

/**
 * CalculusGrapherScreenIconFactory is a collection of factory methods for creating dynamic ScreenIcons.
 * See https://github.com/phetsims/calculus-grapher/issues/139 for design history.
 *
 * The curves for these icons are created solely using kite.Shape, not using bamboo. Colors are Properties
 * from CalculusGrapherColors, so that color changes (via the phetmarks Color Editor, or via Studio) cause
 * the icons to update. The math expressions in these icons update when the 'Variable' and 'Notation'
 * preferences are changed.
 *
 * Note that the same 3 Shapes are used for curves in the Derivative, Integral, and Lab screen icons. If there's
 * a need to customize these curves in the future, then the functions that create them will need to be further
 * parameterized, and the arguments will need to be tweaked to provide the desired look.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import calculusGrapher from '../../calculusGrapher.js';
import GraphTypeLabelNode from './GraphTypeLabelNode.js';
import GraphType from '../model/GraphType.js';
import CalculusGrapherColors from '../CalculusGrapherColors.js';
import ScreenIcon from '../../../../joist/js/ScreenIcon.js';
import { Circle, Line, Node, Path, VBox } from '../../../../scenery/js/imports.js';
import { Shape } from '../../../../kite/js/imports.js';
const CURVE_WIDTH = 50; // width of the curves for the Derivative, Integral, and Lab screen icons
const CURVE_HEIGHT = 10; // height of the curves for the Derivative, Integral, and Lab screen icons
const LINE_WIDTH = 2; // lineWidth value for Paths
const STANDARD_DEVIATION = 6; // of the Gaussian curve and its derivative

/**
 * Creates a Gaussian shape for the original curve.
 */
function createOriginalShape() {
  // Gaussian coefficients, see https://en.wikipedia.org/wiki/Gaussian_function
  const a = -CURVE_HEIGHT; // sign is flipped for scenery view coordinate frame
  const b = CURVE_WIDTH / 2;
  const c = STANDARD_DEVIATION;
  const shape = new Shape();
  for (let x = 0; x <= CURVE_WIDTH; x++) {
    // sign is flipped for scenery view coordinate frame
    const y = a * Math.exp(-Math.pow(x - b, 2) / (2 * c * c));
    if (x === 0) {
      shape.moveTo(x, y);
    } else {
      shape.lineTo(x, y);
    }
  }
  return shape;
}

/**
 * Creates a derivative-of-Gaussian shape for the original curve.
 * The implementation is similar to createOriginalShape, but with a yFactor and different y computation.
 */
function createDerivativeShape() {
  const a = -CURVE_HEIGHT; // sign is flipped for scenery view coordinate frame
  const b = CURVE_WIDTH / 2;
  const c = STANDARD_DEVIATION;
  const yFactor = 0.25; // to scale, because this is the derivative of a Gaussian

  const shape = new Shape();
  for (let x = 0; x <= CURVE_WIDTH; x++) {
    const y = yFactor * a * Math.exp(-Math.pow(x - b, 2) / (2 * c * c)) * (b - x);
    if (x === 0) {
      shape.moveTo(x, y);
    } else {
      shape.lineTo(x, y);
    }
  }
  return shape;
}

/**
 * Creates an integral-of-Gaussian curve (a sigmoid).
 */
function createIntegralShape() {
  const a = -CURVE_HEIGHT; // sign is flipped for scenery view coordinate frame
  const b = 0.03 * CURVE_WIDTH;
  const shape = new Shape();
  for (let x = 0; x <= CURVE_WIDTH; x++) {
    const y = a / (1 + Math.exp(-(x - CURVE_WIDTH / 2) / b));
    if (x === 0) {
      shape.moveTo(x, y);
    } else {
      shape.lineTo(x, y);
    }
  }
  return shape;
}
const CalculusGrapherScreenIconFactory = {
  /**
   * Creates the ScreenIcon for the 'Derivative' screen.
   */
  createDerivativeScreenIcon() {
    // Derivative math expression, the form of which changes based on 'Variable' and 'Notation' preferences
    const expressionNode = new GraphTypeLabelNode(GraphType.DERIVATIVE);

    // A sample curve, rendered with the color of the derivative curve
    const curveNode = new Path(createDerivativeShape(), {
      stroke: CalculusGrapherColors.derivativeCurveStrokeProperty,
      lineWidth: LINE_WIDTH
    });

    // Math expression above the curve
    const iconNode = new VBox({
      children: [expressionNode, curveNode],
      spacing: 4
    });
    return new ScreenIcon(iconNode, {
      fill: CalculusGrapherColors.screenBackgroundColorProperty
    });
  },
  /**
   * Creates the ScreenIcon for the 'Integral' screen.
   */
  createIntegralScreenIcon() {
    // Integral math expression, the form of which changes based on 'Variable' and 'Notation' preferences.
    const expressionNode = new GraphTypeLabelNode(GraphType.INTEGRAL);

    // A sample curve, rendered with the color of the integral curve.
    const curveNode = new Path(createIntegralShape(), {
      stroke: CalculusGrapherColors.integralCurveStrokeProperty,
      lineWidth: LINE_WIDTH
    });

    // Math expression above the curve
    const iconNode = new VBox({
      children: [expressionNode, curveNode],
      spacing: 4
    });
    return new ScreenIcon(iconNode, {
      fill: CalculusGrapherColors.screenBackgroundColorProperty
    });
  },
  /**
   * Creates the ScreenIcon for the 'Advanced' screen.
   */
  createAdvancedScreenIcon() {
    const triangleWidth = 80;
    const triangleHeight = 15;
    const discontinuityPointRadius = 2;

    // Original curve, a triangle rendered with the color of the original curve
    const triangleShape = new Shape().moveTo(0, 0).lineTo(triangleWidth / 2, -triangleHeight).lineTo(triangleWidth, 0);
    const originalCurveNode = new Path(triangleShape, {
      stroke: CalculusGrapherColors.originalCurveStrokeProperty,
      lineWidth: LINE_WIDTH
    });

    // Derivative curve, which contains a discontinuity at the peak of the triangle
    const leftLine = new Line(0, 0, triangleWidth / 2, 0, {
      stroke: CalculusGrapherColors.derivativeCurveStrokeProperty,
      lineWidth: LINE_WIDTH
    });
    const rightLine = new Line(triangleWidth / 2, triangleHeight, triangleWidth, triangleHeight, {
      stroke: CalculusGrapherColors.derivativeCurveStrokeProperty,
      lineWidth: LINE_WIDTH
    });
    const leftDiscontinuityPoint = new Circle({
      x: triangleWidth / 2,
      y: 0,
      radius: discontinuityPointRadius,
      stroke: CalculusGrapherColors.derivativeCurveStrokeProperty,
      fill: CalculusGrapherColors.screenBackgroundColorProperty,
      lineWidth: LINE_WIDTH
    });
    const rightDiscontinuityPoint = new Circle({
      x: triangleWidth / 2,
      y: triangleHeight,
      radius: discontinuityPointRadius,
      stroke: CalculusGrapherColors.derivativeCurveStrokeProperty,
      fill: CalculusGrapherColors.screenBackgroundColorProperty,
      lineWidth: LINE_WIDTH
    });
    const derivativeCurveNode = new Node({
      children: [leftLine, rightLine, leftDiscontinuityPoint, rightDiscontinuityPoint]
    });

    // Original curve above the derivative curve
    const iconNode = new VBox({
      children: [originalCurveNode, derivativeCurveNode],
      spacing: 8
    });
    return new ScreenIcon(iconNode, {
      fill: CalculusGrapherColors.screenBackgroundColorProperty,
      maxIconWidthProportion: 1
    });
  },
  /**
   * Creates the ScreenIcon for the 'Lab' screen.
   */
  createLabScreenIcon() {
    // 3 curves, as in the Lab screen
    const integralCurveNode = new Path(createIntegralShape(), {
      stroke: CalculusGrapherColors.integralCurveStrokeProperty,
      lineWidth: LINE_WIDTH
    });
    const originalCurveNode = new Path(createOriginalShape(), {
      stroke: CalculusGrapherColors.originalCurveStrokeProperty,
      lineWidth: LINE_WIDTH
    });
    const derivativeCurveNode = new Path(createDerivativeShape(), {
      stroke: CalculusGrapherColors.derivativeCurveStrokeProperty,
      lineWidth: LINE_WIDTH
    });

    // Vertical layout of the 3 curves
    const iconNode = new VBox({
      children: [integralCurveNode, originalCurveNode, derivativeCurveNode],
      spacing: 6
    });
    return new ScreenIcon(iconNode, {
      fill: CalculusGrapherColors.screenBackgroundColorProperty
    });
  }
};
calculusGrapher.register('CalculusGrapherScreenIconFactory', CalculusGrapherScreenIconFactory);
export default CalculusGrapherScreenIconFactory;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjYWxjdWx1c0dyYXBoZXIiLCJHcmFwaFR5cGVMYWJlbE5vZGUiLCJHcmFwaFR5cGUiLCJDYWxjdWx1c0dyYXBoZXJDb2xvcnMiLCJTY3JlZW5JY29uIiwiQ2lyY2xlIiwiTGluZSIsIk5vZGUiLCJQYXRoIiwiVkJveCIsIlNoYXBlIiwiQ1VSVkVfV0lEVEgiLCJDVVJWRV9IRUlHSFQiLCJMSU5FX1dJRFRIIiwiU1RBTkRBUkRfREVWSUFUSU9OIiwiY3JlYXRlT3JpZ2luYWxTaGFwZSIsImEiLCJiIiwiYyIsInNoYXBlIiwieCIsInkiLCJNYXRoIiwiZXhwIiwicG93IiwibW92ZVRvIiwibGluZVRvIiwiY3JlYXRlRGVyaXZhdGl2ZVNoYXBlIiwieUZhY3RvciIsImNyZWF0ZUludGVncmFsU2hhcGUiLCJDYWxjdWx1c0dyYXBoZXJTY3JlZW5JY29uRmFjdG9yeSIsImNyZWF0ZURlcml2YXRpdmVTY3JlZW5JY29uIiwiZXhwcmVzc2lvbk5vZGUiLCJERVJJVkFUSVZFIiwiY3VydmVOb2RlIiwic3Ryb2tlIiwiZGVyaXZhdGl2ZUN1cnZlU3Ryb2tlUHJvcGVydHkiLCJsaW5lV2lkdGgiLCJpY29uTm9kZSIsImNoaWxkcmVuIiwic3BhY2luZyIsImZpbGwiLCJzY3JlZW5CYWNrZ3JvdW5kQ29sb3JQcm9wZXJ0eSIsImNyZWF0ZUludGVncmFsU2NyZWVuSWNvbiIsIklOVEVHUkFMIiwiaW50ZWdyYWxDdXJ2ZVN0cm9rZVByb3BlcnR5IiwiY3JlYXRlQWR2YW5jZWRTY3JlZW5JY29uIiwidHJpYW5nbGVXaWR0aCIsInRyaWFuZ2xlSGVpZ2h0IiwiZGlzY29udGludWl0eVBvaW50UmFkaXVzIiwidHJpYW5nbGVTaGFwZSIsIm9yaWdpbmFsQ3VydmVOb2RlIiwib3JpZ2luYWxDdXJ2ZVN0cm9rZVByb3BlcnR5IiwibGVmdExpbmUiLCJyaWdodExpbmUiLCJsZWZ0RGlzY29udGludWl0eVBvaW50IiwicmFkaXVzIiwicmlnaHREaXNjb250aW51aXR5UG9pbnQiLCJkZXJpdmF0aXZlQ3VydmVOb2RlIiwibWF4SWNvbldpZHRoUHJvcG9ydGlvbiIsImNyZWF0ZUxhYlNjcmVlbkljb24iLCJpbnRlZ3JhbEN1cnZlTm9kZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiQ2FsY3VsdXNHcmFwaGVyU2NyZWVuSWNvbkZhY3RvcnkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIENhbGN1bHVzR3JhcGhlclNjcmVlbkljb25GYWN0b3J5IGlzIGEgY29sbGVjdGlvbiBvZiBmYWN0b3J5IG1ldGhvZHMgZm9yIGNyZWF0aW5nIGR5bmFtaWMgU2NyZWVuSWNvbnMuXHJcbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvY2FsY3VsdXMtZ3JhcGhlci9pc3N1ZXMvMTM5IGZvciBkZXNpZ24gaGlzdG9yeS5cclxuICpcclxuICogVGhlIGN1cnZlcyBmb3IgdGhlc2UgaWNvbnMgYXJlIGNyZWF0ZWQgc29sZWx5IHVzaW5nIGtpdGUuU2hhcGUsIG5vdCB1c2luZyBiYW1ib28uIENvbG9ycyBhcmUgUHJvcGVydGllc1xyXG4gKiBmcm9tIENhbGN1bHVzR3JhcGhlckNvbG9ycywgc28gdGhhdCBjb2xvciBjaGFuZ2VzICh2aWEgdGhlIHBoZXRtYXJrcyBDb2xvciBFZGl0b3IsIG9yIHZpYSBTdHVkaW8pIGNhdXNlXHJcbiAqIHRoZSBpY29ucyB0byB1cGRhdGUuIFRoZSBtYXRoIGV4cHJlc3Npb25zIGluIHRoZXNlIGljb25zIHVwZGF0ZSB3aGVuIHRoZSAnVmFyaWFibGUnIGFuZCAnTm90YXRpb24nXHJcbiAqIHByZWZlcmVuY2VzIGFyZSBjaGFuZ2VkLlxyXG4gKlxyXG4gKiBOb3RlIHRoYXQgdGhlIHNhbWUgMyBTaGFwZXMgYXJlIHVzZWQgZm9yIGN1cnZlcyBpbiB0aGUgRGVyaXZhdGl2ZSwgSW50ZWdyYWwsIGFuZCBMYWIgc2NyZWVuIGljb25zLiBJZiB0aGVyZSdzXHJcbiAqIGEgbmVlZCB0byBjdXN0b21pemUgdGhlc2UgY3VydmVzIGluIHRoZSBmdXR1cmUsIHRoZW4gdGhlIGZ1bmN0aW9ucyB0aGF0IGNyZWF0ZSB0aGVtIHdpbGwgbmVlZCB0byBiZSBmdXJ0aGVyXHJcbiAqIHBhcmFtZXRlcml6ZWQsIGFuZCB0aGUgYXJndW1lbnRzIHdpbGwgbmVlZCB0byBiZSB0d2Vha2VkIHRvIHByb3ZpZGUgdGhlIGRlc2lyZWQgbG9vay5cclxuICpcclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICovXHJcblxyXG5pbXBvcnQgY2FsY3VsdXNHcmFwaGVyIGZyb20gJy4uLy4uL2NhbGN1bHVzR3JhcGhlci5qcyc7XHJcbmltcG9ydCBHcmFwaFR5cGVMYWJlbE5vZGUgZnJvbSAnLi9HcmFwaFR5cGVMYWJlbE5vZGUuanMnO1xyXG5pbXBvcnQgR3JhcGhUeXBlIGZyb20gJy4uL21vZGVsL0dyYXBoVHlwZS5qcyc7XHJcbmltcG9ydCBDYWxjdWx1c0dyYXBoZXJDb2xvcnMgZnJvbSAnLi4vQ2FsY3VsdXNHcmFwaGVyQ29sb3JzLmpzJztcclxuaW1wb3J0IFNjcmVlbkljb24gZnJvbSAnLi4vLi4vLi4vLi4vam9pc3QvanMvU2NyZWVuSWNvbi5qcyc7XHJcbmltcG9ydCB7IENpcmNsZSwgTGluZSwgTm9kZSwgUGF0aCwgVkJveCB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSAnLi4vLi4vLi4vLi4va2l0ZS9qcy9pbXBvcnRzLmpzJztcclxuXHJcbmNvbnN0IENVUlZFX1dJRFRIID0gNTA7IC8vIHdpZHRoIG9mIHRoZSBjdXJ2ZXMgZm9yIHRoZSBEZXJpdmF0aXZlLCBJbnRlZ3JhbCwgYW5kIExhYiBzY3JlZW4gaWNvbnNcclxuY29uc3QgQ1VSVkVfSEVJR0hUID0gMTA7IC8vIGhlaWdodCBvZiB0aGUgY3VydmVzIGZvciB0aGUgRGVyaXZhdGl2ZSwgSW50ZWdyYWwsIGFuZCBMYWIgc2NyZWVuIGljb25zXHJcbmNvbnN0IExJTkVfV0lEVEggPSAyOyAvLyBsaW5lV2lkdGggdmFsdWUgZm9yIFBhdGhzXHJcbmNvbnN0IFNUQU5EQVJEX0RFVklBVElPTiA9IDY7IC8vIG9mIHRoZSBHYXVzc2lhbiBjdXJ2ZSBhbmQgaXRzIGRlcml2YXRpdmVcclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgR2F1c3NpYW4gc2hhcGUgZm9yIHRoZSBvcmlnaW5hbCBjdXJ2ZS5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZU9yaWdpbmFsU2hhcGUoKTogU2hhcGUge1xyXG5cclxuICAvLyBHYXVzc2lhbiBjb2VmZmljaWVudHMsIHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9HYXVzc2lhbl9mdW5jdGlvblxyXG4gIGNvbnN0IGEgPSAtQ1VSVkVfSEVJR0hUOyAvLyBzaWduIGlzIGZsaXBwZWQgZm9yIHNjZW5lcnkgdmlldyBjb29yZGluYXRlIGZyYW1lXHJcbiAgY29uc3QgYiA9IENVUlZFX1dJRFRIIC8gMjtcclxuICBjb25zdCBjID0gU1RBTkRBUkRfREVWSUFUSU9OO1xyXG5cclxuICBjb25zdCBzaGFwZSA9IG5ldyBTaGFwZSgpO1xyXG4gIGZvciAoIGxldCB4ID0gMDsgeCA8PSBDVVJWRV9XSURUSDsgeCsrICkge1xyXG5cclxuICAgIC8vIHNpZ24gaXMgZmxpcHBlZCBmb3Igc2NlbmVyeSB2aWV3IGNvb3JkaW5hdGUgZnJhbWVcclxuICAgIGNvbnN0IHkgPSBhICogTWF0aC5leHAoIC1NYXRoLnBvdyggeCAtIGIsIDIgKSAvICggMiAqIGMgKiBjICkgKTtcclxuICAgIGlmICggeCA9PT0gMCApIHtcclxuICAgICAgc2hhcGUubW92ZVRvKCB4LCB5ICk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgc2hhcGUubGluZVRvKCB4LCB5ICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gc2hhcGU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgZGVyaXZhdGl2ZS1vZi1HYXVzc2lhbiBzaGFwZSBmb3IgdGhlIG9yaWdpbmFsIGN1cnZlLlxyXG4gKiBUaGUgaW1wbGVtZW50YXRpb24gaXMgc2ltaWxhciB0byBjcmVhdGVPcmlnaW5hbFNoYXBlLCBidXQgd2l0aCBhIHlGYWN0b3IgYW5kIGRpZmZlcmVudCB5IGNvbXB1dGF0aW9uLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlRGVyaXZhdGl2ZVNoYXBlKCk6IFNoYXBlIHtcclxuXHJcbiAgY29uc3QgYSA9IC1DVVJWRV9IRUlHSFQ7IC8vIHNpZ24gaXMgZmxpcHBlZCBmb3Igc2NlbmVyeSB2aWV3IGNvb3JkaW5hdGUgZnJhbWVcclxuICBjb25zdCBiID0gQ1VSVkVfV0lEVEggLyAyO1xyXG4gIGNvbnN0IGMgPSBTVEFOREFSRF9ERVZJQVRJT047XHJcbiAgY29uc3QgeUZhY3RvciA9IDAuMjU7IC8vIHRvIHNjYWxlLCBiZWNhdXNlIHRoaXMgaXMgdGhlIGRlcml2YXRpdmUgb2YgYSBHYXVzc2lhblxyXG5cclxuICBjb25zdCBzaGFwZSA9IG5ldyBTaGFwZSgpO1xyXG4gIGZvciAoIGxldCB4ID0gMDsgeCA8PSBDVVJWRV9XSURUSDsgeCsrICkge1xyXG4gICAgY29uc3QgeSA9IHlGYWN0b3IgKiBhICogTWF0aC5leHAoIC1NYXRoLnBvdyggeCAtIGIsIDIgKSAvICggMiAqIGMgKiBjICkgKSAqICggYiAtIHggKTtcclxuICAgIGlmICggeCA9PT0gMCApIHtcclxuICAgICAgc2hhcGUubW92ZVRvKCB4LCB5ICk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgc2hhcGUubGluZVRvKCB4LCB5ICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gc2hhcGU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGFuIGludGVncmFsLW9mLUdhdXNzaWFuIGN1cnZlIChhIHNpZ21vaWQpLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlSW50ZWdyYWxTaGFwZSgpOiBTaGFwZSB7XHJcblxyXG4gIGNvbnN0IGEgPSAtQ1VSVkVfSEVJR0hUOyAvLyBzaWduIGlzIGZsaXBwZWQgZm9yIHNjZW5lcnkgdmlldyBjb29yZGluYXRlIGZyYW1lXHJcbiAgY29uc3QgYiA9IDAuMDMgKiBDVVJWRV9XSURUSDtcclxuXHJcbiAgY29uc3Qgc2hhcGUgPSBuZXcgU2hhcGUoKTtcclxuICBmb3IgKCBsZXQgeCA9IDA7IHggPD0gQ1VSVkVfV0lEVEg7IHgrKyApIHtcclxuICAgIGNvbnN0IHkgPSBhIC8gKCAxICsgTWF0aC5leHAoIC0oIHggLSBDVVJWRV9XSURUSCAvIDIgKSAvIGIgKSApO1xyXG4gICAgaWYgKCB4ID09PSAwICkge1xyXG4gICAgICBzaGFwZS5tb3ZlVG8oIHgsIHkgKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBzaGFwZS5saW5lVG8oIHgsIHkgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBzaGFwZTtcclxufVxyXG5cclxuY29uc3QgQ2FsY3VsdXNHcmFwaGVyU2NyZWVuSWNvbkZhY3RvcnkgPSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgdGhlIFNjcmVlbkljb24gZm9yIHRoZSAnRGVyaXZhdGl2ZScgc2NyZWVuLlxyXG4gICAqL1xyXG4gIGNyZWF0ZURlcml2YXRpdmVTY3JlZW5JY29uKCk6IFNjcmVlbkljb24ge1xyXG5cclxuICAgIC8vIERlcml2YXRpdmUgbWF0aCBleHByZXNzaW9uLCB0aGUgZm9ybSBvZiB3aGljaCBjaGFuZ2VzIGJhc2VkIG9uICdWYXJpYWJsZScgYW5kICdOb3RhdGlvbicgcHJlZmVyZW5jZXNcclxuICAgIGNvbnN0IGV4cHJlc3Npb25Ob2RlID0gbmV3IEdyYXBoVHlwZUxhYmVsTm9kZSggR3JhcGhUeXBlLkRFUklWQVRJVkUgKTtcclxuXHJcbiAgICAvLyBBIHNhbXBsZSBjdXJ2ZSwgcmVuZGVyZWQgd2l0aCB0aGUgY29sb3Igb2YgdGhlIGRlcml2YXRpdmUgY3VydmVcclxuICAgIGNvbnN0IGN1cnZlTm9kZSA9IG5ldyBQYXRoKCBjcmVhdGVEZXJpdmF0aXZlU2hhcGUoKSwge1xyXG4gICAgICBzdHJva2U6IENhbGN1bHVzR3JhcGhlckNvbG9ycy5kZXJpdmF0aXZlQ3VydmVTdHJva2VQcm9wZXJ0eSxcclxuICAgICAgbGluZVdpZHRoOiBMSU5FX1dJRFRIXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gTWF0aCBleHByZXNzaW9uIGFib3ZlIHRoZSBjdXJ2ZVxyXG4gICAgY29uc3QgaWNvbk5vZGUgPSBuZXcgVkJveCgge1xyXG4gICAgICBjaGlsZHJlbjogWyBleHByZXNzaW9uTm9kZSwgY3VydmVOb2RlIF0sXHJcbiAgICAgIHNwYWNpbmc6IDRcclxuICAgIH0gKTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFNjcmVlbkljb24oIGljb25Ob2RlLCB7XHJcbiAgICAgIGZpbGw6IENhbGN1bHVzR3JhcGhlckNvbG9ycy5zY3JlZW5CYWNrZ3JvdW5kQ29sb3JQcm9wZXJ0eVxyXG4gICAgfSApO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgdGhlIFNjcmVlbkljb24gZm9yIHRoZSAnSW50ZWdyYWwnIHNjcmVlbi5cclxuICAgKi9cclxuICBjcmVhdGVJbnRlZ3JhbFNjcmVlbkljb24oKTogU2NyZWVuSWNvbiB7XHJcblxyXG4gICAgLy8gSW50ZWdyYWwgbWF0aCBleHByZXNzaW9uLCB0aGUgZm9ybSBvZiB3aGljaCBjaGFuZ2VzIGJhc2VkIG9uICdWYXJpYWJsZScgYW5kICdOb3RhdGlvbicgcHJlZmVyZW5jZXMuXHJcbiAgICBjb25zdCBleHByZXNzaW9uTm9kZSA9IG5ldyBHcmFwaFR5cGVMYWJlbE5vZGUoIEdyYXBoVHlwZS5JTlRFR1JBTCApO1xyXG5cclxuICAgIC8vIEEgc2FtcGxlIGN1cnZlLCByZW5kZXJlZCB3aXRoIHRoZSBjb2xvciBvZiB0aGUgaW50ZWdyYWwgY3VydmUuXHJcbiAgICBjb25zdCBjdXJ2ZU5vZGUgPSBuZXcgUGF0aCggY3JlYXRlSW50ZWdyYWxTaGFwZSgpLCB7XHJcbiAgICAgIHN0cm9rZTogQ2FsY3VsdXNHcmFwaGVyQ29sb3JzLmludGVncmFsQ3VydmVTdHJva2VQcm9wZXJ0eSxcclxuICAgICAgbGluZVdpZHRoOiBMSU5FX1dJRFRIXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gTWF0aCBleHByZXNzaW9uIGFib3ZlIHRoZSBjdXJ2ZVxyXG4gICAgY29uc3QgaWNvbk5vZGUgPSBuZXcgVkJveCgge1xyXG4gICAgICBjaGlsZHJlbjogWyBleHByZXNzaW9uTm9kZSwgY3VydmVOb2RlIF0sXHJcbiAgICAgIHNwYWNpbmc6IDRcclxuICAgIH0gKTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFNjcmVlbkljb24oIGljb25Ob2RlLCB7XHJcbiAgICAgIGZpbGw6IENhbGN1bHVzR3JhcGhlckNvbG9ycy5zY3JlZW5CYWNrZ3JvdW5kQ29sb3JQcm9wZXJ0eVxyXG4gICAgfSApO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgdGhlIFNjcmVlbkljb24gZm9yIHRoZSAnQWR2YW5jZWQnIHNjcmVlbi5cclxuICAgKi9cclxuICBjcmVhdGVBZHZhbmNlZFNjcmVlbkljb24oKTogU2NyZWVuSWNvbiB7XHJcblxyXG4gICAgY29uc3QgdHJpYW5nbGVXaWR0aCA9IDgwO1xyXG4gICAgY29uc3QgdHJpYW5nbGVIZWlnaHQgPSAxNTtcclxuICAgIGNvbnN0IGRpc2NvbnRpbnVpdHlQb2ludFJhZGl1cyA9IDI7XHJcblxyXG4gICAgLy8gT3JpZ2luYWwgY3VydmUsIGEgdHJpYW5nbGUgcmVuZGVyZWQgd2l0aCB0aGUgY29sb3Igb2YgdGhlIG9yaWdpbmFsIGN1cnZlXHJcbiAgICBjb25zdCB0cmlhbmdsZVNoYXBlID0gbmV3IFNoYXBlKClcclxuICAgICAgLm1vdmVUbyggMCwgMCApXHJcbiAgICAgIC5saW5lVG8oIHRyaWFuZ2xlV2lkdGggLyAyLCAtdHJpYW5nbGVIZWlnaHQgKVxyXG4gICAgICAubGluZVRvKCB0cmlhbmdsZVdpZHRoLCAwICk7XHJcbiAgICBjb25zdCBvcmlnaW5hbEN1cnZlTm9kZSA9IG5ldyBQYXRoKCB0cmlhbmdsZVNoYXBlLCB7XHJcbiAgICAgIHN0cm9rZTogQ2FsY3VsdXNHcmFwaGVyQ29sb3JzLm9yaWdpbmFsQ3VydmVTdHJva2VQcm9wZXJ0eSxcclxuICAgICAgbGluZVdpZHRoOiBMSU5FX1dJRFRIXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gRGVyaXZhdGl2ZSBjdXJ2ZSwgd2hpY2ggY29udGFpbnMgYSBkaXNjb250aW51aXR5IGF0IHRoZSBwZWFrIG9mIHRoZSB0cmlhbmdsZVxyXG4gICAgY29uc3QgbGVmdExpbmUgPSBuZXcgTGluZSggMCwgMCwgdHJpYW5nbGVXaWR0aCAvIDIsIDAsIHtcclxuICAgICAgc3Ryb2tlOiBDYWxjdWx1c0dyYXBoZXJDb2xvcnMuZGVyaXZhdGl2ZUN1cnZlU3Ryb2tlUHJvcGVydHksXHJcbiAgICAgIGxpbmVXaWR0aDogTElORV9XSURUSFxyXG4gICAgfSApO1xyXG4gICAgY29uc3QgcmlnaHRMaW5lID0gbmV3IExpbmUoIHRyaWFuZ2xlV2lkdGggLyAyLCB0cmlhbmdsZUhlaWdodCwgdHJpYW5nbGVXaWR0aCwgdHJpYW5nbGVIZWlnaHQsIHtcclxuICAgICAgc3Ryb2tlOiBDYWxjdWx1c0dyYXBoZXJDb2xvcnMuZGVyaXZhdGl2ZUN1cnZlU3Ryb2tlUHJvcGVydHksXHJcbiAgICAgIGxpbmVXaWR0aDogTElORV9XSURUSFxyXG4gICAgfSApO1xyXG4gICAgY29uc3QgbGVmdERpc2NvbnRpbnVpdHlQb2ludCA9IG5ldyBDaXJjbGUoIHtcclxuICAgICAgeDogdHJpYW5nbGVXaWR0aCAvIDIsXHJcbiAgICAgIHk6IDAsXHJcbiAgICAgIHJhZGl1czogZGlzY29udGludWl0eVBvaW50UmFkaXVzLFxyXG4gICAgICBzdHJva2U6IENhbGN1bHVzR3JhcGhlckNvbG9ycy5kZXJpdmF0aXZlQ3VydmVTdHJva2VQcm9wZXJ0eSxcclxuICAgICAgZmlsbDogQ2FsY3VsdXNHcmFwaGVyQ29sb3JzLnNjcmVlbkJhY2tncm91bmRDb2xvclByb3BlcnR5LFxyXG4gICAgICBsaW5lV2lkdGg6IExJTkVfV0lEVEhcclxuICAgIH0gKTtcclxuICAgIGNvbnN0IHJpZ2h0RGlzY29udGludWl0eVBvaW50ID0gbmV3IENpcmNsZSgge1xyXG4gICAgICB4OiB0cmlhbmdsZVdpZHRoIC8gMixcclxuICAgICAgeTogdHJpYW5nbGVIZWlnaHQsXHJcbiAgICAgIHJhZGl1czogZGlzY29udGludWl0eVBvaW50UmFkaXVzLFxyXG4gICAgICBzdHJva2U6IENhbGN1bHVzR3JhcGhlckNvbG9ycy5kZXJpdmF0aXZlQ3VydmVTdHJva2VQcm9wZXJ0eSxcclxuICAgICAgZmlsbDogQ2FsY3VsdXNHcmFwaGVyQ29sb3JzLnNjcmVlbkJhY2tncm91bmRDb2xvclByb3BlcnR5LFxyXG4gICAgICBsaW5lV2lkdGg6IExJTkVfV0lEVEhcclxuICAgIH0gKTtcclxuICAgIGNvbnN0IGRlcml2YXRpdmVDdXJ2ZU5vZGUgPSBuZXcgTm9kZSgge1xyXG4gICAgICBjaGlsZHJlbjogWyBsZWZ0TGluZSwgcmlnaHRMaW5lLCBsZWZ0RGlzY29udGludWl0eVBvaW50LCByaWdodERpc2NvbnRpbnVpdHlQb2ludCBdXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gT3JpZ2luYWwgY3VydmUgYWJvdmUgdGhlIGRlcml2YXRpdmUgY3VydmVcclxuICAgIGNvbnN0IGljb25Ob2RlID0gbmV3IFZCb3goIHtcclxuICAgICAgY2hpbGRyZW46IFsgb3JpZ2luYWxDdXJ2ZU5vZGUsIGRlcml2YXRpdmVDdXJ2ZU5vZGUgXSxcclxuICAgICAgc3BhY2luZzogOFxyXG4gICAgfSApO1xyXG5cclxuICAgIHJldHVybiBuZXcgU2NyZWVuSWNvbiggaWNvbk5vZGUsIHtcclxuICAgICAgZmlsbDogQ2FsY3VsdXNHcmFwaGVyQ29sb3JzLnNjcmVlbkJhY2tncm91bmRDb2xvclByb3BlcnR5LFxyXG4gICAgICBtYXhJY29uV2lkdGhQcm9wb3J0aW9uOiAxXHJcbiAgICB9ICk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyB0aGUgU2NyZWVuSWNvbiBmb3IgdGhlICdMYWInIHNjcmVlbi5cclxuICAgKi9cclxuICBjcmVhdGVMYWJTY3JlZW5JY29uKCk6IFNjcmVlbkljb24ge1xyXG5cclxuICAgIC8vIDMgY3VydmVzLCBhcyBpbiB0aGUgTGFiIHNjcmVlblxyXG4gICAgY29uc3QgaW50ZWdyYWxDdXJ2ZU5vZGUgPSBuZXcgUGF0aCggY3JlYXRlSW50ZWdyYWxTaGFwZSgpLCB7XHJcbiAgICAgIHN0cm9rZTogQ2FsY3VsdXNHcmFwaGVyQ29sb3JzLmludGVncmFsQ3VydmVTdHJva2VQcm9wZXJ0eSxcclxuICAgICAgbGluZVdpZHRoOiBMSU5FX1dJRFRIXHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3Qgb3JpZ2luYWxDdXJ2ZU5vZGUgPSBuZXcgUGF0aCggY3JlYXRlT3JpZ2luYWxTaGFwZSgpLCB7XHJcbiAgICAgIHN0cm9rZTogQ2FsY3VsdXNHcmFwaGVyQ29sb3JzLm9yaWdpbmFsQ3VydmVTdHJva2VQcm9wZXJ0eSxcclxuICAgICAgbGluZVdpZHRoOiBMSU5FX1dJRFRIXHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgZGVyaXZhdGl2ZUN1cnZlTm9kZSA9IG5ldyBQYXRoKCBjcmVhdGVEZXJpdmF0aXZlU2hhcGUoKSwge1xyXG4gICAgICBzdHJva2U6IENhbGN1bHVzR3JhcGhlckNvbG9ycy5kZXJpdmF0aXZlQ3VydmVTdHJva2VQcm9wZXJ0eSxcclxuICAgICAgbGluZVdpZHRoOiBMSU5FX1dJRFRIXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gVmVydGljYWwgbGF5b3V0IG9mIHRoZSAzIGN1cnZlc1xyXG4gICAgY29uc3QgaWNvbk5vZGUgPSBuZXcgVkJveCgge1xyXG4gICAgICBjaGlsZHJlbjogWyBpbnRlZ3JhbEN1cnZlTm9kZSwgb3JpZ2luYWxDdXJ2ZU5vZGUsIGRlcml2YXRpdmVDdXJ2ZU5vZGUgXSxcclxuICAgICAgc3BhY2luZzogNlxyXG4gICAgfSApO1xyXG4gICAgcmV0dXJuIG5ldyBTY3JlZW5JY29uKCBpY29uTm9kZSwge1xyXG4gICAgICBmaWxsOiBDYWxjdWx1c0dyYXBoZXJDb2xvcnMuc2NyZWVuQmFja2dyb3VuZENvbG9yUHJvcGVydHlcclxuICAgIH0gKTtcclxuICB9XHJcbn07XHJcblxyXG5jYWxjdWx1c0dyYXBoZXIucmVnaXN0ZXIoICdDYWxjdWx1c0dyYXBoZXJTY3JlZW5JY29uRmFjdG9yeScsIENhbGN1bHVzR3JhcGhlclNjcmVlbkljb25GYWN0b3J5ICk7XHJcbmV4cG9ydCBkZWZhdWx0IENhbGN1bHVzR3JhcGhlclNjcmVlbkljb25GYWN0b3J5OyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGVBQWUsTUFBTSwwQkFBMEI7QUFDdEQsT0FBT0Msa0JBQWtCLE1BQU0seUJBQXlCO0FBQ3hELE9BQU9DLFNBQVMsTUFBTSx1QkFBdUI7QUFDN0MsT0FBT0MscUJBQXFCLE1BQU0sNkJBQTZCO0FBQy9ELE9BQU9DLFVBQVUsTUFBTSxvQ0FBb0M7QUFDM0QsU0FBU0MsTUFBTSxFQUFFQyxJQUFJLEVBQUVDLElBQUksRUFBRUMsSUFBSSxFQUFFQyxJQUFJLFFBQVEsbUNBQW1DO0FBQ2xGLFNBQVNDLEtBQUssUUFBUSxnQ0FBZ0M7QUFFdEQsTUFBTUMsV0FBVyxHQUFHLEVBQUUsQ0FBQyxDQUFDO0FBQ3hCLE1BQU1DLFlBQVksR0FBRyxFQUFFLENBQUMsQ0FBQztBQUN6QixNQUFNQyxVQUFVLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDdEIsTUFBTUMsa0JBQWtCLEdBQUcsQ0FBQyxDQUFDLENBQUM7O0FBRTlCO0FBQ0E7QUFDQTtBQUNBLFNBQVNDLG1CQUFtQkEsQ0FBQSxFQUFVO0VBRXBDO0VBQ0EsTUFBTUMsQ0FBQyxHQUFH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