// Copyright 2022-2023, University of Colorado Boulder

/**
 * LabeledPointNode is a point on originalCurve, with a label. The point is a scenery/Circle
 * The label updates its positions, and is set perpendicular to the tangent of the curve
 *
 * @author Martin Veillette
 * @author Chris Malley (PixelZoom, Inc.)
 */

import optionize from '../../../../phet-core/js/optionize.js';
import { Node, Text } from '../../../../scenery/js/imports.js';
import calculusGrapher from '../../calculusGrapher.js';
import PlottedPoint from './PlottedPoint.js';
import CalculusGrapherConstants from '../CalculusGrapherConstants.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import BackgroundNode from '../../../../scenery-phet/js/BackgroundNode.js';
import BooleanIO from '../../../../tandem/js/types/BooleanIO.js';
import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import Multilink from '../../../../axon/js/Multilink.js';
export default class LabeledPointNode extends Node {
  constructor(labeledPoint, chartTransform, predictEnabledProperty, curveLayerVisibleProperty, providedOptions) {
    const options = optionize()({
      // NodeOptions
      pickable: false,
      // optimization, see https://github.com/phetsims/calculus-grapher/issues/210
      visibleProperty: new DerivedProperty([labeledPoint.visibleProperty, curveLayerVisibleProperty, predictEnabledProperty, labeledPoint.originalCurvePointProperty], (labeledPointVisible, curveLayerVisible, predictEnabled, point) => labeledPointVisible && curveLayerVisible && !predictEnabled && chartTransform.modelXRange.contains(point.x) && chartTransform.modelYRange.contains(point.y), {
        tandem: providedOptions.tandem.createTandem('visibleProperty'),
        phetioValueType: BooleanIO
      })
    }, providedOptions);

    // point that is plotted on the curve
    const plottedPoint = new PlottedPoint(labeledPoint.originalCurvePointProperty, chartTransform, {
      fill: labeledPoint.pointColorProperty
    });

    // label for the point
    const text = new Text(labeledPoint.stringProperty, {
      font: CalculusGrapherConstants.POINT_LABEL_FONT,
      maxWidth: 50,
      tandem: options.tandem.createTandem('text')
    });
    const labelNode = new BackgroundNode(text, {
      rectangleOptions: {
        cornerRadius: 3
      }
    });

    // update the positions of the label Node
    // we use some heuristic algorithm to prevent the label to overlap with the curve
    const updateLabelPosition = () => {
      // value of the tangent (slope) at the y point
      const tangent = labeledPoint.derivativeCurvePointProperty.value.y;

      // angle (with respect to x-axis) associated with the normal vector to the tangent
      const modelPerpendicularTangent = Math.atan(tangent) + Math.PI / 2;

      // determine a distance between the label and plottedPoint (center to center) - put them as close as possible
      const distance = labelNode.height / 2 + plottedPoint.height / 2 + 1;

      // vector perpendicular to the tangent in view (hence the minus sign for the angle, since y is inverted)
      const perpendicularDisplacement = Vector2.createPolar(distance, -modelPerpendicularTangent);

      // position the label node perpendicular to the curve
      labelNode.center = plottedPoint.center.plus(perpendicularDisplacement);
    };
    Multilink.multilink([plottedPoint.boundsProperty, labeledPoint.derivativeCurvePointProperty, labeledPoint.stringProperty], () => updateLabelPosition());
    options.children = [plottedPoint, labelNode];
    super(options);
    this.addLinkedElement(labeledPoint, {
      tandem: options.tandem.createTandem(labeledPoint.tandem.name)
    });
  }
}
calculusGrapher.register('LabeledPointNode', LabeledPointNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcHRpb25pemUiLCJOb2RlIiwiVGV4dCIsImNhbGN1bHVzR3JhcGhlciIsIlBsb3R0ZWRQb2ludCIsIkNhbGN1bHVzR3JhcGhlckNvbnN0YW50cyIsIlZlY3RvcjIiLCJCYWNrZ3JvdW5kTm9kZSIsIkJvb2xlYW5JTyIsIkRlcml2ZWRQcm9wZXJ0eSIsIk11bHRpbGluayIsIkxhYmVsZWRQb2ludE5vZGUiLCJjb25zdHJ1Y3RvciIsImxhYmVsZWRQb2ludCIsImNoYXJ0VHJhbnNmb3JtIiwicHJlZGljdEVuYWJsZWRQcm9wZXJ0eSIsImN1cnZlTGF5ZXJWaXNpYmxlUHJvcGVydHkiLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwicGlja2FibGUiLCJ2aXNpYmxlUHJvcGVydHkiLCJvcmlnaW5hbEN1cnZlUG9pbnRQcm9wZXJ0eSIsImxhYmVsZWRQb2ludFZpc2libGUiLCJjdXJ2ZUxheWVyVmlzaWJsZSIsInByZWRpY3RFbmFibGVkIiwicG9pbnQiLCJtb2RlbFhSYW5nZSIsImNvbnRhaW5zIiwieCIsIm1vZGVsWVJhbmdlIiwieSIsInRhbmRlbSIsImNyZWF0ZVRhbmRlbSIsInBoZXRpb1ZhbHVlVHlwZSIsInBsb3R0ZWRQb2ludCIsImZpbGwiLCJwb2ludENvbG9yUHJvcGVydHkiLCJ0ZXh0Iiwic3RyaW5nUHJvcGVydHkiLCJmb250IiwiUE9JTlRfTEFCRUxfRk9OVCIsIm1heFdpZHRoIiwibGFiZWxOb2RlIiwicmVjdGFuZ2xlT3B0aW9ucyIsImNvcm5lclJhZGl1cyIsInVwZGF0ZUxhYmVsUG9zaXRpb24iLCJ0YW5nZW50IiwiZGVyaXZhdGl2ZUN1cnZlUG9pbnRQcm9wZXJ0eSIsInZhbHVlIiwibW9kZWxQZXJwZW5kaWN1bGFyVGFuZ2VudCIsIk1hdGgiLCJhdGFuIiwiUEkiLCJkaXN0YW5jZSIsImhlaWdodCIsInBlcnBlbmRpY3VsYXJEaXNwbGFjZW1lbnQiLCJjcmVhdGVQb2xhciIsImNlbnRlciIsInBsdXMiLCJtdWx0aWxpbmsiLCJib3VuZHNQcm9wZXJ0eSIsImNoaWxkcmVuIiwiYWRkTGlua2VkRWxlbWVudCIsIm5hbWUiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkxhYmVsZWRQb2ludE5vZGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjItMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogTGFiZWxlZFBvaW50Tm9kZSBpcyBhIHBvaW50IG9uIG9yaWdpbmFsQ3VydmUsIHdpdGggYSBsYWJlbC4gVGhlIHBvaW50IGlzIGEgc2NlbmVyeS9DaXJjbGVcclxuICogVGhlIGxhYmVsIHVwZGF0ZXMgaXRzIHBvc2l0aW9ucywgYW5kIGlzIHNldCBwZXJwZW5kaWN1bGFyIHRvIHRoZSB0YW5nZW50IG9mIHRoZSBjdXJ2ZVxyXG4gKlxyXG4gKiBAYXV0aG9yIE1hcnRpbiBWZWlsbGV0dGVcclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICovXHJcblxyXG5pbXBvcnQgQ2hhcnRUcmFuc2Zvcm0gZnJvbSAnLi4vLi4vLi4vLi4vYmFtYm9vL2pzL0NoYXJ0VHJhbnNmb3JtLmpzJztcclxuaW1wb3J0IG9wdGlvbml6ZSwgeyBFbXB0eVNlbGZPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCB7IE5vZGUsIE5vZGVPcHRpb25zLCBUZXh0IH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IGNhbGN1bHVzR3JhcGhlciBmcm9tICcuLi8uLi9jYWxjdWx1c0dyYXBoZXIuanMnO1xyXG5pbXBvcnQgUGxvdHRlZFBvaW50IGZyb20gJy4vUGxvdHRlZFBvaW50LmpzJztcclxuaW1wb3J0IENhbGN1bHVzR3JhcGhlckNvbnN0YW50cyBmcm9tICcuLi9DYWxjdWx1c0dyYXBoZXJDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVmVjdG9yMi5qcyc7XHJcbmltcG9ydCBCYWNrZ3JvdW5kTm9kZSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvQmFja2dyb3VuZE5vZGUuanMnO1xyXG5pbXBvcnQgVFJlYWRPbmx5UHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9UUmVhZE9ubHlQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBCb29sZWFuSU8gZnJvbSAnLi4vLi4vLi4vLi4vdGFuZGVtL2pzL3R5cGVzL0Jvb2xlYW5JTy5qcyc7XHJcbmltcG9ydCBEZXJpdmVkUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9EZXJpdmVkUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgUGlja1JlcXVpcmVkIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9QaWNrUmVxdWlyZWQuanMnO1xyXG5pbXBvcnQgTXVsdGlsaW5rIGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvTXVsdGlsaW5rLmpzJztcclxuaW1wb3J0IExhYmVsZWRQb2ludCBmcm9tICcuLi9tb2RlbC9MYWJlbGVkUG9pbnQuanMnO1xyXG5cclxudHlwZSBTZWxmT3B0aW9ucyA9IEVtcHR5U2VsZk9wdGlvbnM7XHJcblxyXG50eXBlIExhYmVsZWRQb2ludE5vZGVPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBQaWNrUmVxdWlyZWQ8Tm9kZU9wdGlvbnMsICd0YW5kZW0nPjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExhYmVsZWRQb2ludE5vZGUgZXh0ZW5kcyBOb2RlIHtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBsYWJlbGVkUG9pbnQ6IExhYmVsZWRQb2ludCxcclxuICAgICAgICAgICAgICAgICAgICAgIGNoYXJ0VHJhbnNmb3JtOiBDaGFydFRyYW5zZm9ybSxcclxuICAgICAgICAgICAgICAgICAgICAgIHByZWRpY3RFbmFibGVkUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PGJvb2xlYW4+LFxyXG4gICAgICAgICAgICAgICAgICAgICAgY3VydmVMYXllclZpc2libGVQcm9wZXJ0eTogVFJlYWRPbmx5UHJvcGVydHk8Ym9vbGVhbj4sXHJcbiAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlZE9wdGlvbnM6IExhYmVsZWRQb2ludE5vZGVPcHRpb25zICkge1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8TGFiZWxlZFBvaW50Tm9kZU9wdGlvbnMsIFNlbGZPcHRpb25zLCBOb2RlT3B0aW9ucz4oKSgge1xyXG5cclxuICAgICAgLy8gTm9kZU9wdGlvbnNcclxuICAgICAgcGlja2FibGU6IGZhbHNlLCAvLyBvcHRpbWl6YXRpb24sIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvY2FsY3VsdXMtZ3JhcGhlci9pc3N1ZXMvMjEwXHJcbiAgICAgIHZpc2libGVQcm9wZXJ0eTogbmV3IERlcml2ZWRQcm9wZXJ0eShcclxuICAgICAgICBbIGxhYmVsZWRQb2ludC52aXNpYmxlUHJvcGVydHksIGN1cnZlTGF5ZXJWaXNpYmxlUHJvcGVydHksIHByZWRpY3RFbmFibGVkUHJvcGVydHksXHJcbiAgICAgICAgICBsYWJlbGVkUG9pbnQub3JpZ2luYWxDdXJ2ZVBvaW50UHJvcGVydHkgXSxcclxuICAgICAgICAoIGxhYmVsZWRQb2ludFZpc2libGUsIGN1cnZlTGF5ZXJWaXNpYmxlLCBwcmVkaWN0RW5hYmxlZCwgcG9pbnQgKSA9PlxyXG4gICAgICAgICAgbGFiZWxlZFBvaW50VmlzaWJsZSAmJiBjdXJ2ZUxheWVyVmlzaWJsZSAmJiAhcHJlZGljdEVuYWJsZWQgJiYgY2hhcnRUcmFuc2Zvcm0ubW9kZWxYUmFuZ2UuY29udGFpbnMoIHBvaW50LnggKSAmJiBjaGFydFRyYW5zZm9ybS5tb2RlbFlSYW5nZS5jb250YWlucyggcG9pbnQueSApLCB7XHJcbiAgICAgICAgICB0YW5kZW06IHByb3ZpZGVkT3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAndmlzaWJsZVByb3BlcnR5JyApLFxyXG4gICAgICAgICAgcGhldGlvVmFsdWVUeXBlOiBCb29sZWFuSU9cclxuICAgICAgICB9IClcclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIC8vIHBvaW50IHRoYXQgaXMgcGxvdHRlZCBvbiB0aGUgY3VydmVcclxuICAgIGNvbnN0IHBsb3R0ZWRQb2ludCA9IG5ldyBQbG90dGVkUG9pbnQoIGxhYmVsZWRQb2ludC5vcmlnaW5hbEN1cnZlUG9pbnRQcm9wZXJ0eSwgY2hhcnRUcmFuc2Zvcm0sIHtcclxuICAgICAgZmlsbDogbGFiZWxlZFBvaW50LnBvaW50Q29sb3JQcm9wZXJ0eVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIGxhYmVsIGZvciB0aGUgcG9pbnRcclxuICAgIGNvbnN0IHRleHQgPSBuZXcgVGV4dCggbGFiZWxlZFBvaW50LnN0cmluZ1Byb3BlcnR5LCB7XHJcbiAgICAgIGZvbnQ6IENhbGN1bHVzR3JhcGhlckNvbnN0YW50cy5QT0lOVF9MQUJFTF9GT05ULFxyXG4gICAgICBtYXhXaWR0aDogNTAsXHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAndGV4dCcgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IGxhYmVsTm9kZSA9IG5ldyBCYWNrZ3JvdW5kTm9kZSggdGV4dCwge1xyXG4gICAgICByZWN0YW5nbGVPcHRpb25zOiB7XHJcbiAgICAgICAgY29ybmVyUmFkaXVzOiAzXHJcbiAgICAgIH1cclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyB1cGRhdGUgdGhlIHBvc2l0aW9ucyBvZiB0aGUgbGFiZWwgTm9kZVxyXG4gICAgLy8gd2UgdXNlIHNvbWUgaGV1cmlzdGljIGFsZ29yaXRobSB0byBwcmV2ZW50IHRoZSBsYWJlbCB0byBvdmVybGFwIHdpdGggdGhlIGN1cnZlXHJcbiAgICBjb25zdCB1cGRhdGVMYWJlbFBvc2l0aW9uID0gKCkgPT4ge1xyXG5cclxuICAgICAgLy8gdmFsdWUgb2YgdGhlIHRhbmdlbnQgKHNsb3BlKSBhdCB0aGUgeSBwb2ludFxyXG4gICAgICBjb25zdCB0YW5nZW50ID0gbGFiZWxlZFBvaW50LmRlcml2YXRpdmVDdXJ2ZVBvaW50UHJvcGVydHkudmFsdWUueTtcclxuXHJcbiAgICAgIC8vIGFuZ2xlICh3aXRoIHJlc3BlY3QgdG8geC1heGlzKSBhc3NvY2lhdGVkIHdpdGggdGhlIG5vcm1hbCB2ZWN0b3IgdG8gdGhlIHRhbmdlbnRcclxuICAgICAgY29uc3QgbW9kZWxQZXJwZW5kaWN1bGFyVGFuZ2VudCA9IE1hdGguYXRhbiggdGFuZ2VudCApICsgTWF0aC5QSSAvIDI7XHJcblxyXG4gICAgICAvLyBkZXRlcm1pbmUgYSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBsYWJlbCBhbmQgcGxvdHRlZFBvaW50IChjZW50ZXIgdG8gY2VudGVyKSAtIHB1dCB0aGVtIGFzIGNsb3NlIGFzIHBvc3NpYmxlXHJcbiAgICAgIGNvbnN0IGRpc3RhbmNlID0gKCBsYWJlbE5vZGUuaGVpZ2h0IC8gMiApICsgKCBwbG90dGVkUG9pbnQuaGVpZ2h0IC8gMiApICsgMTtcclxuXHJcbiAgICAgIC8vIHZlY3RvciBwZXJwZW5kaWN1bGFyIHRvIHRoZSB0YW5nZW50IGluIHZpZXcgKGhlbmNlIHRoZSBtaW51cyBzaWduIGZvciB0aGUgYW5nbGUsIHNpbmNlIHkgaXMgaW52ZXJ0ZWQpXHJcbiAgICAgIGNvbnN0IHBlcnBlbmRpY3VsYXJEaXNwbGFjZW1lbnQgPSBWZWN0b3IyLmNyZWF0ZVBvbGFyKCBkaXN0YW5jZSwgLW1vZGVsUGVycGVuZGljdWxhclRhbmdlbnQgKTtcclxuXHJcbiAgICAgIC8vIHBvc2l0aW9uIHRoZSBsYWJlbCBub2RlIHBlcnBlbmRpY3VsYXIgdG8gdGhlIGN1cnZlXHJcbiAgICAgIGxhYmVsTm9kZS5jZW50ZXIgPSBwbG90dGVkUG9pbnQuY2VudGVyLnBsdXMoIHBlcnBlbmRpY3VsYXJEaXNwbGFjZW1lbnQgKTtcclxuICAgIH07XHJcblxyXG4gICAgTXVsdGlsaW5rLm11bHRpbGluayggWyBwbG90dGVkUG9pbnQuYm91bmRzUHJvcGVydHksIGxhYmVsZWRQb2ludC5kZXJpdmF0aXZlQ3VydmVQb2ludFByb3BlcnR5LCBsYWJlbGVkUG9pbnQuc3RyaW5nUHJvcGVydHkgXSxcclxuICAgICAgKCkgPT4gdXBkYXRlTGFiZWxQb3NpdGlvbigpICk7XHJcblxyXG4gICAgb3B0aW9ucy5jaGlsZHJlbiA9IFsgcGxvdHRlZFBvaW50LCBsYWJlbE5vZGUgXTtcclxuXHJcbiAgICBzdXBlciggb3B0aW9ucyApO1xyXG5cclxuICAgIHRoaXMuYWRkTGlua2VkRWxlbWVudCggbGFiZWxlZFBvaW50LCB7XHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCBsYWJlbGVkUG9pbnQudGFuZGVtLm5hbWUgKVxyXG4gICAgfSApO1xyXG4gIH1cclxufVxyXG5jYWxjdWx1c0dyYXBoZXIucmVnaXN0ZXIoICdMYWJlbGVkUG9pbnROb2RlJywgTGFiZWxlZFBvaW50Tm9kZSApO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBLE9BQU9BLFNBQVMsTUFBNEIsdUNBQXVDO0FBQ25GLFNBQVNDLElBQUksRUFBZUMsSUFBSSxRQUFRLG1DQUFtQztBQUMzRSxPQUFPQyxlQUFlLE1BQU0sMEJBQTBCO0FBQ3RELE9BQU9DLFlBQVksTUFBTSxtQkFBbUI7QUFDNUMsT0FBT0Msd0JBQXdCLE1BQU0sZ0NBQWdDO0FBQ3JFLE9BQU9DLE9BQU8sTUFBTSwrQkFBK0I7QUFDbkQsT0FBT0MsY0FBYyxNQUFNLCtDQUErQztBQUUxRSxPQUFPQyxTQUFTLE1BQU0sMENBQTBDO0FBQ2hFLE9BQU9DLGVBQWUsTUFBTSx3Q0FBd0M7QUFFcEUsT0FBT0MsU0FBUyxNQUFNLGtDQUFrQztBQU94RCxlQUFlLE1BQU1DLGdCQUFnQixTQUFTVixJQUFJLENBQUM7RUFFMUNXLFdBQVdBLENBQUVDLFlBQTBCLEVBQzFC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