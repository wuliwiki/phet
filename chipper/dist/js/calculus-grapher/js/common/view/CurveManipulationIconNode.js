// Copyright 2022-2023, University of Colorado Boulder

/**
 * CurveManipulationIconNode creates the Curve Manipulation Icons for the Radio Buttons
 *
 * @author Martin Veillette
 */

import calculusGrapher from '../../calculusGrapher.js';
import { AlignBox, AlignGroup, Color, Node, Path } from '../../../../scenery/js/imports.js';
import Range from '../../../../dot/js/Range.js';
import CurveManipulationMode from '../model/CurveManipulationMode.js';
import TransformedCurve from '../model/TransformedCurve.js';
import CalculusGrapherConstants from '../CalculusGrapherConstants.js';
import ChartTransform from '../../../../bamboo/js/ChartTransform.js';
import ChartRectangle from '../../../../bamboo/js/ChartRectangle.js';
import CurveNode from './CurveNode.js';
import Tandem from '../../../../tandem/js/Tandem.js';
import CalculusGrapherColors from '../CalculusGrapherColors.js';
import pencilAltSolidShape from '../../../../sherpa/js/fontawesome-5/pencilAltSolidShape.js';
const CHART_TRANSFORM_OPTIONS = {
  viewWidth: 50,
  viewHeight: 28,
  modelXRange: CalculusGrapherConstants.CURVE_X_RANGE,
  modelYRange: new Range(0, 1)
};
const TRANSFORMED_CURVE_OPTIONS = {
  numberOfPoints: 70,
  xRange: CalculusGrapherConstants.CURVE_X_RANGE,
  // Curves for icons are not instrumented. If you decide to instrument in the future, be aware that instrumenting
  // has performance implications, and it's not sufficient to simply add a tandem here. Proceed with caution!
  tandem: Tandem.OPT_OUT
};

// To make all icons have the same effective size, for all screens.
const ALIGN_BOX_OPTIONS = {
  group: new AlignGroup()
};
export default class CurveManipulationIconNode extends AlignBox {
  constructor(mode, stroke) {
    // Chart transform for the graph, the height and Y range will be updated later.
    const chartTransform = new ChartTransform(CHART_TRANSFORM_OPTIONS);

    // Chart Rectangle for the graph
    const chartRectangle = new ChartRectangle(chartTransform, {
      stroke: phet.chipper.queryParameters.dev ? 'red' : null // if running with ?dev, stroke the ChartRectangle
    });

    // Create model for a solid curve.
    const solidCurve = new TransformedCurve(TRANSFORMED_CURVE_OPTIONS);

    // Optional model for a dashed curve, relevant only for some modes.
    let dashedCurve;

    // To improve readability
    const xCenter = chartTransform.modelXRange.getCenter();
    const yCenter = chartTransform.modelYRange.getCenter();
    const xLength = chartTransform.modelXRange.getLength();
    const xMin = chartTransform.modelXRange.getMin();
    const xMax = chartTransform.modelXRange.getMax();
    const yMax = chartTransform.modelYRange.getMax();
    const yMin = chartTransform.modelYRange.getMin();

    // For all width-related modes except SINUSOID
    const width = 0.5 * xLength;

    // Create the icon for the mode.
    if (mode === CurveManipulationMode.HILL) {
      solidCurve.hill(width, xCenter, yMax);
    } else if (mode === CurveManipulationMode.TRIANGLE) {
      solidCurve.triangle(width, xCenter, yMax);
    } else if (mode === CurveManipulationMode.PEDESTAL) {
      solidCurve.pedestal(width, xCenter, yMax);
    } else if (mode === CurveManipulationMode.PARABOLA) {
      solidCurve.parabola(width, xCenter, yMax);
    } else if (mode === CurveManipulationMode.SINUSOID) {
      // Ad hoc variables to create sine function
      const sinusoidWidth = CalculusGrapherConstants.CURVE_MANIPULATION_WIDTH_RANGE.defaultValue * xLength / (2 * Math.PI);
      const y = 0.5 * yMax;
      solidCurve.sinusoid(sinusoidWidth, xLength / 4, y);
      solidCurve.shift(xMin, yCenter);
    } else if (mode === CurveManipulationMode.FREEFORM) {
      CurveManipulationIconNode.freeformIconCurve(solidCurve, yMin, yMax);
    } else if (mode === CurveManipulationMode.TILT) {
      const y = 0.5 * yMax;
      solidCurve.tilt(xMax, y);
      solidCurve.save();
      solidCurve.shift(xMin, yCenter);
      dashedCurve = new TransformedCurve(TRANSFORMED_CURVE_OPTIONS);
      dashedCurve.tilt(xMax, -y);
      dashedCurve.save();
      dashedCurve.shift(xMin, yCenter);
    } else if (mode === CurveManipulationMode.SHIFT) {
      const yOffset = 0.25 * yMax;
      solidCurve.shift(xMax, yMax - yOffset);
      dashedCurve = new TransformedCurve(TRANSFORMED_CURVE_OPTIONS);
      dashedCurve.shift(xMax, yMin + yOffset);
    } else {
      throw new Error(`unsupported mode: ${mode}`);
    }

    // Create the solid curve node.
    const solidCurveNode = new CurveNode(solidCurve, chartTransform, {
      stroke: stroke,
      discontinuousPointsFill: CalculusGrapherColors.panelFillProperty,
      tandem: Tandem.OPT_OUT // CurveNodes for icons are not instrumented
    });

    const children = [chartRectangle, solidCurveNode];

    // Create the Node for the dashed curve.
    if (dashedCurve) {
      const dashedCurveNode = new CurveNode(dashedCurve, chartTransform, {
        stroke: stroke,
        discontinuousPointsFill: CalculusGrapherColors.panelFillProperty,
        continuousLinePlotOptions: {
          lineDash: [4.5, 2],
          lineWidth: 1
        },
        tandem: Tandem.OPT_OUT // CurveNodes for icons are not instrumented
      });

      children.push(dashedCurveNode);
    }
    if (mode === CurveManipulationMode.FREEFORM) {
      // Scale down in the x dimension, so that we have room to add pencil icon. This makes the stroke with a
      // little inconsistent in x vs y dimensions, but looks OK for an icon. More importantly, we want the
      // solidCurveNode part of this icon to match what is shown by CurveManipulationDisplayNode.
      solidCurveNode.setScaleMagnitude(0.5, 1);

      // Pencil to the right of solidCurveNode, with tip of the pencil at the rightmost end of the curve
      // the solidCurveNode renders.
      const pencilNode = new Path(pencilAltSolidShape, {
        scale: 0.05,
        fill: Color.grayColor(75),
        left: solidCurveNode.right,
        bottom: solidCurveNode.bottom
      });
      children.push(pencilNode);
    }
    const node = new Node({
      children: children
    });
    super(node, ALIGN_BOX_OPTIONS);
  }

  /**
   * Sets the y-values of a curve to a shape that is used in the FREEFORM mode icon and display.
   * The shape of this curve was chosen such that a pencil icon could be placed at the rightmost point.
   * @param curve
   * @param yMin - the minimum y-value for the curve
   * @param yMax - the maximum y-value for the curve
   */
  static freeformIconCurve(curve, yMin, yMax) {
    const xLength = curve.xRange.getLength();
    const xMin = curve.xRange.getMin();
    const width = xLength / 4;
    curve.reset();
    curve.triangle(width, xMin + 2 * xLength / 5, 0.65 * yMax);
    curve.save();
    curve.pedestal(width, xMin + 4 * xLength / 5, yMax);
  }
}
calculusGrapher.register('CurveManipulationIconNode', CurveManipulationIconNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjYWxjdWx1c0dyYXBoZXIiLCJBbGlnbkJveCIsIkFsaWduR3JvdXAiLCJDb2xvciIsIk5vZGUiLCJQYXRoIiwiUmFuZ2UiLCJDdXJ2ZU1hbmlwdWxhdGlvbk1vZGUiLCJUcmFuc2Zvcm1lZEN1cnZlIiwiQ2FsY3VsdXNHcmFwaGVyQ29uc3RhbnRzIiwiQ2hhcnRUcmFuc2Zvcm0iLCJDaGFydFJlY3RhbmdsZSIsIkN1cnZlTm9kZSIsIlRhbmRlbSIsIkNhbGN1bHVzR3JhcGhlckNvbG9ycyIsInBlbmNpbEFsdFNvbGlkU2hhcGUiLCJDSEFSVF9UUkFOU0ZPUk1fT1BUSU9OUyIsInZpZXdXaWR0aCIsInZpZXdIZWlnaHQiLCJtb2RlbFhSYW5nZSIsIkNVUlZFX1hfUkFOR0UiLCJtb2RlbFlSYW5nZSIsIlRSQU5TRk9STUVEX0NVUlZFX09QVElPTlMiLCJudW1iZXJPZlBvaW50cyIsInhSYW5nZSIsInRhbmRlbSIsIk9QVF9PVVQiLCJBTElHTl9CT1hfT1BUSU9OUyIsImdyb3VwIiwiQ3VydmVNYW5pcHVsYXRpb25JY29uTm9kZSIsImNvbnN0cnVjdG9yIiwibW9kZSIsInN0cm9rZSIsImNoYXJ0VHJhbnNmb3JtIiwiY2hhcnRSZWN0YW5nbGUiLCJwaGV0IiwiY2hpcHBlciIsInF1ZXJ5UGFyYW1ldGVycyIsImRldiIsInNvbGlkQ3VydmUiLCJkYXNoZWRDdXJ2ZSIsInhDZW50ZXIiLCJnZXRDZW50ZXIiLCJ5Q2VudGVyIiwieExlbmd0aCIsImdldExlbmd0aCIsInhNaW4iLCJnZXRNaW4iLCJ4TWF4IiwiZ2V0TWF4IiwieU1heCIsInlNaW4iLCJ3aWR0aCIsIkhJTEwiLCJoaWxsIiwiVFJJQU5HTEUiLCJ0cmlhbmdsZSIsIlBFREVTVEFMIiwicGVkZXN0YWwiLCJQQVJBQk9MQSIsInBhcmFib2xhIiwiU0lOVVNPSUQiLCJzaW51c29pZFdpZHRoIiwiQ1VSVkVfTUFOSVBVTEFUSU9OX1dJRFRIX1JBTkdFIiwiZGVmYXVsdFZhbHVlIiwiTWF0aCIsIlBJIiwieSIsInNpbnVzb2lkIiwic2hpZnQiLCJGUkVFRk9STSIsImZyZWVmb3JtSWNvbkN1cnZlIiwiVElMVCIsInRpbHQiLCJzYXZlIiwiU0hJRlQiLCJ5T2Zmc2V0IiwiRXJyb3IiLCJzb2xpZEN1cnZlTm9kZSIsImRpc2NvbnRpbnVvdXNQb2ludHNGaWxsIiwicGFuZWxGaWxsUHJvcGVydHkiLCJjaGlsZHJlbiIsImRhc2hlZEN1cnZlTm9kZSIsImNvbnRpbnVvdXNMaW5lUGxvdE9wdGlvbnMiLCJsaW5lRGFzaCIsImxpbmVXaWR0aCIsInB1c2giLCJzZXRTY2FsZU1hZ25pdHVkZSIsInBlbmNpbE5vZGUiLCJzY2FsZSIsImZpbGwiLCJncmF5Q29sb3IiLCJsZWZ0IiwicmlnaHQiLCJib3R0b20iLCJub2RlIiwiY3VydmUiLCJyZXNldCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiQ3VydmVNYW5pcHVsYXRpb25JY29uTm9kZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMi0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBDdXJ2ZU1hbmlwdWxhdGlvbkljb25Ob2RlIGNyZWF0ZXMgdGhlIEN1cnZlIE1hbmlwdWxhdGlvbiBJY29ucyBmb3IgdGhlIFJhZGlvIEJ1dHRvbnNcclxuICpcclxuICogQGF1dGhvciBNYXJ0aW4gVmVpbGxldHRlXHJcbiAqL1xyXG5cclxuaW1wb3J0IGNhbGN1bHVzR3JhcGhlciBmcm9tICcuLi8uLi9jYWxjdWx1c0dyYXBoZXIuanMnO1xyXG5pbXBvcnQgeyBBbGlnbkJveCwgQWxpZ25Hcm91cCwgQ29sb3IsIE5vZGUsIFBhdGgsIFRDb2xvciB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBSYW5nZSBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvUmFuZ2UuanMnO1xyXG5pbXBvcnQgQ3VydmVNYW5pcHVsYXRpb25Nb2RlIGZyb20gJy4uL21vZGVsL0N1cnZlTWFuaXB1bGF0aW9uTW9kZS5qcyc7XHJcbmltcG9ydCBUcmFuc2Zvcm1lZEN1cnZlIGZyb20gJy4uL21vZGVsL1RyYW5zZm9ybWVkQ3VydmUuanMnO1xyXG5pbXBvcnQgQ2FsY3VsdXNHcmFwaGVyQ29uc3RhbnRzIGZyb20gJy4uL0NhbGN1bHVzR3JhcGhlckNvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBDaGFydFRyYW5zZm9ybSBmcm9tICcuLi8uLi8uLi8uLi9iYW1ib28vanMvQ2hhcnRUcmFuc2Zvcm0uanMnO1xyXG5pbXBvcnQgQ2hhcnRSZWN0YW5nbGUgZnJvbSAnLi4vLi4vLi4vLi4vYmFtYm9vL2pzL0NoYXJ0UmVjdGFuZ2xlLmpzJztcclxuaW1wb3J0IEN1cnZlTm9kZSBmcm9tICcuL0N1cnZlTm9kZS5qcyc7XHJcbmltcG9ydCBUYW5kZW0gZnJvbSAnLi4vLi4vLi4vLi4vdGFuZGVtL2pzL1RhbmRlbS5qcyc7XHJcbmltcG9ydCBDYWxjdWx1c0dyYXBoZXJDb2xvcnMgZnJvbSAnLi4vQ2FsY3VsdXNHcmFwaGVyQ29sb3JzLmpzJztcclxuaW1wb3J0IHBlbmNpbEFsdFNvbGlkU2hhcGUgZnJvbSAnLi4vLi4vLi4vLi4vc2hlcnBhL2pzL2ZvbnRhd2Vzb21lLTUvcGVuY2lsQWx0U29saWRTaGFwZS5qcyc7XHJcblxyXG5jb25zdCBDSEFSVF9UUkFOU0ZPUk1fT1BUSU9OUyA9IHtcclxuICB2aWV3V2lkdGg6IDUwLFxyXG4gIHZpZXdIZWlnaHQ6IDI4LFxyXG4gIG1vZGVsWFJhbmdlOiBDYWxjdWx1c0dyYXBoZXJDb25zdGFudHMuQ1VSVkVfWF9SQU5HRSxcclxuICBtb2RlbFlSYW5nZTogbmV3IFJhbmdlKCAwLCAxIClcclxufTtcclxuXHJcbmNvbnN0IFRSQU5TRk9STUVEX0NVUlZFX09QVElPTlMgPSB7XHJcbiAgbnVtYmVyT2ZQb2ludHM6IDcwLFxyXG4gIHhSYW5nZTogQ2FsY3VsdXNHcmFwaGVyQ29uc3RhbnRzLkNVUlZFX1hfUkFOR0UsXHJcblxyXG4gIC8vIEN1cnZlcyBmb3IgaWNvbnMgYXJlIG5vdCBpbnN0cnVtZW50ZWQuIElmIHlvdSBkZWNpZGUgdG8gaW5zdHJ1bWVudCBpbiB0aGUgZnV0dXJlLCBiZSBhd2FyZSB0aGF0IGluc3RydW1lbnRpbmdcclxuICAvLyBoYXMgcGVyZm9ybWFuY2UgaW1wbGljYXRpb25zLCBhbmQgaXQncyBub3Qgc3VmZmljaWVudCB0byBzaW1wbHkgYWRkIGEgdGFuZGVtIGhlcmUuIFByb2NlZWQgd2l0aCBjYXV0aW9uIVxyXG4gIHRhbmRlbTogVGFuZGVtLk9QVF9PVVRcclxufTtcclxuXHJcbi8vIFRvIG1ha2UgYWxsIGljb25zIGhhdmUgdGhlIHNhbWUgZWZmZWN0aXZlIHNpemUsIGZvciBhbGwgc2NyZWVucy5cclxuY29uc3QgQUxJR05fQk9YX09QVElPTlMgPSB7XHJcbiAgZ3JvdXA6IG5ldyBBbGlnbkdyb3VwKClcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEN1cnZlTWFuaXB1bGF0aW9uSWNvbk5vZGUgZXh0ZW5kcyBBbGlnbkJveCB7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggbW9kZTogQ3VydmVNYW5pcHVsYXRpb25Nb2RlLCBzdHJva2U6IFRDb2xvciApIHtcclxuXHJcbiAgICAvLyBDaGFydCB0cmFuc2Zvcm0gZm9yIHRoZSBncmFwaCwgdGhlIGhlaWdodCBhbmQgWSByYW5nZSB3aWxsIGJlIHVwZGF0ZWQgbGF0ZXIuXHJcbiAgICBjb25zdCBjaGFydFRyYW5zZm9ybSA9IG5ldyBDaGFydFRyYW5zZm9ybSggQ0hBUlRfVFJBTlNGT1JNX09QVElPTlMgKTtcclxuXHJcbiAgICAvLyBDaGFydCBSZWN0YW5nbGUgZm9yIHRoZSBncmFwaFxyXG4gICAgY29uc3QgY2hhcnRSZWN0YW5nbGUgPSBuZXcgQ2hhcnRSZWN0YW5nbGUoIGNoYXJ0VHJhbnNmb3JtLCB7XHJcbiAgICAgIHN0cm9rZTogcGhldC5jaGlwcGVyLnF1ZXJ5UGFyYW1ldGVycy5kZXYgPyAncmVkJyA6IG51bGwgLy8gaWYgcnVubmluZyB3aXRoID9kZXYsIHN0cm9rZSB0aGUgQ2hhcnRSZWN0YW5nbGVcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgbW9kZWwgZm9yIGEgc29saWQgY3VydmUuXHJcbiAgICBjb25zdCBzb2xpZEN1cnZlID0gbmV3IFRyYW5zZm9ybWVkQ3VydmUoIFRSQU5TRk9STUVEX0NVUlZFX09QVElPTlMgKTtcclxuXHJcbiAgICAvLyBPcHRpb25hbCBtb2RlbCBmb3IgYSBkYXNoZWQgY3VydmUsIHJlbGV2YW50IG9ubHkgZm9yIHNvbWUgbW9kZXMuXHJcbiAgICBsZXQgZGFzaGVkQ3VydmU7XHJcblxyXG4gICAgLy8gVG8gaW1wcm92ZSByZWFkYWJpbGl0eVxyXG4gICAgY29uc3QgeENlbnRlciA9IGNoYXJ0VHJhbnNmb3JtLm1vZGVsWFJhbmdlLmdldENlbnRlcigpO1xyXG4gICAgY29uc3QgeUNlbnRlciA9IGNoYXJ0VHJhbnNmb3JtLm1vZGVsWVJhbmdlLmdldENlbnRlcigpO1xyXG4gICAgY29uc3QgeExlbmd0aCA9IGNoYXJ0VHJhbnNmb3JtLm1vZGVsWFJhbmdlLmdldExlbmd0aCgpO1xyXG4gICAgY29uc3QgeE1pbiA9IGNoYXJ0VHJhbnNmb3JtLm1vZGVsWFJhbmdlLmdldE1pbigpO1xyXG4gICAgY29uc3QgeE1heCA9IGNoYXJ0VHJhbnNmb3JtLm1vZGVsWFJhbmdlLmdldE1heCgpO1xyXG4gICAgY29uc3QgeU1heCA9IGNoYXJ0VHJhbnNmb3JtLm1vZGVsWVJhbmdlLmdldE1heCgpO1xyXG4gICAgY29uc3QgeU1pbiA9IGNoYXJ0VHJhbnNmb3JtLm1vZGVsWVJhbmdlLmdldE1pbigpO1xyXG5cclxuICAgIC8vIEZvciBhbGwgd2lkdGgtcmVsYXRlZCBtb2RlcyBleGNlcHQgU0lOVVNPSURcclxuICAgIGNvbnN0IHdpZHRoID0gMC41ICogeExlbmd0aDtcclxuXHJcbiAgICAvLyBDcmVhdGUgdGhlIGljb24gZm9yIHRoZSBtb2RlLlxyXG4gICAgaWYgKCBtb2RlID09PSBDdXJ2ZU1hbmlwdWxhdGlvbk1vZGUuSElMTCApIHtcclxuICAgICAgc29saWRDdXJ2ZS5oaWxsKCB3aWR0aCwgeENlbnRlciwgeU1heCApO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoIG1vZGUgPT09IEN1cnZlTWFuaXB1bGF0aW9uTW9kZS5UUklBTkdMRSApIHtcclxuICAgICAgc29saWRDdXJ2ZS50cmlhbmdsZSggd2lkdGgsIHhDZW50ZXIsIHlNYXggKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKCBtb2RlID09PSBDdXJ2ZU1hbmlwdWxhdGlvbk1vZGUuUEVERVNUQUwgKSB7XHJcbiAgICAgIHNvbGlkQ3VydmUucGVkZXN0YWwoIHdpZHRoLCB4Q2VudGVyLCB5TWF4ICk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICggbW9kZSA9PT0gQ3VydmVNYW5pcHVsYXRpb25Nb2RlLlBBUkFCT0xBICkge1xyXG4gICAgICBzb2xpZEN1cnZlLnBhcmFib2xhKCB3aWR0aCwgeENlbnRlciwgeU1heCApO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoIG1vZGUgPT09IEN1cnZlTWFuaXB1bGF0aW9uTW9kZS5TSU5VU09JRCApIHtcclxuXHJcbiAgICAgIC8vIEFkIGhvYyB2YXJpYWJsZXMgdG8gY3JlYXRlIHNpbmUgZnVuY3Rpb25cclxuICAgICAgY29uc3Qgc2ludXNvaWRXaWR0aCA9XHJcbiAgICAgICAgQ2FsY3VsdXNHcmFwaGVyQ29uc3RhbnRzLkNVUlZFX01BTklQVUxBVElPTl9XSURUSF9SQU5HRS5kZWZhdWx0VmFsdWUgKiB4TGVuZ3RoIC8gKCAyICogTWF0aC5QSSApO1xyXG4gICAgICBjb25zdCB5ID0gMC41ICogeU1heDtcclxuICAgICAgc29saWRDdXJ2ZS5zaW51c29pZCggc2ludXNvaWRXaWR0aCwgeExlbmd0aCAvIDQsIHkgKTtcclxuICAgICAgc29saWRDdXJ2ZS5zaGlmdCggeE1pbiwgeUNlbnRlciApO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoIG1vZGUgPT09IEN1cnZlTWFuaXB1bGF0aW9uTW9kZS5GUkVFRk9STSApIHtcclxuICAgICAgQ3VydmVNYW5pcHVsYXRpb25JY29uTm9kZS5mcmVlZm9ybUljb25DdXJ2ZSggc29saWRDdXJ2ZSwgeU1pbiwgeU1heCApO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoIG1vZGUgPT09IEN1cnZlTWFuaXB1bGF0aW9uTW9kZS5USUxUICkge1xyXG5cclxuICAgICAgY29uc3QgeSA9IDAuNSAqIHlNYXg7XHJcbiAgICAgIHNvbGlkQ3VydmUudGlsdCggeE1heCwgeSApO1xyXG4gICAgICBzb2xpZEN1cnZlLnNhdmUoKTtcclxuICAgICAgc29saWRDdXJ2ZS5zaGlmdCggeE1pbiwgeUNlbnRlciApO1xyXG5cclxuICAgICAgZGFzaGVkQ3VydmUgPSBuZXcgVHJhbnNmb3JtZWRDdXJ2ZSggVFJBTlNGT1JNRURfQ1VSVkVfT1BUSU9OUyApO1xyXG4gICAgICBkYXNoZWRDdXJ2ZS50aWx0KCB4TWF4LCAteSApO1xyXG4gICAgICBkYXNoZWRDdXJ2ZS5zYXZlKCk7XHJcbiAgICAgIGRhc2hlZEN1cnZlLnNoaWZ0KCB4TWluLCB5Q2VudGVyICk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICggbW9kZSA9PT0gQ3VydmVNYW5pcHVsYXRpb25Nb2RlLlNISUZUICkge1xyXG5cclxuICAgICAgY29uc3QgeU9mZnNldCA9IDAuMjUgKiB5TWF4O1xyXG4gICAgICBzb2xpZEN1cnZlLnNoaWZ0KCB4TWF4LCB5TWF4IC0geU9mZnNldCApO1xyXG4gICAgICBkYXNoZWRDdXJ2ZSA9IG5ldyBUcmFuc2Zvcm1lZEN1cnZlKCBUUkFOU0ZPUk1FRF9DVVJWRV9PUFRJT05TICk7XHJcbiAgICAgIGRhc2hlZEN1cnZlLnNoaWZ0KCB4TWF4LCB5TWluICsgeU9mZnNldCApO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvciggYHVuc3VwcG9ydGVkIG1vZGU6ICR7bW9kZX1gICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ3JlYXRlIHRoZSBzb2xpZCBjdXJ2ZSBub2RlLlxyXG4gICAgY29uc3Qgc29saWRDdXJ2ZU5vZGUgPSBuZXcgQ3VydmVOb2RlKCBzb2xpZEN1cnZlLCBjaGFydFRyYW5zZm9ybSwge1xyXG4gICAgICBzdHJva2U6IHN0cm9rZSxcclxuICAgICAgZGlzY29udGludW91c1BvaW50c0ZpbGw6IENhbGN1bHVzR3JhcGhlckNvbG9ycy5wYW5lbEZpbGxQcm9wZXJ0eSxcclxuICAgICAgdGFuZGVtOiBUYW5kZW0uT1BUX09VVCAvLyBDdXJ2ZU5vZGVzIGZvciBpY29ucyBhcmUgbm90IGluc3RydW1lbnRlZFxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IGNoaWxkcmVuOiBOb2RlW10gPSBbIGNoYXJ0UmVjdGFuZ2xlLCBzb2xpZEN1cnZlTm9kZSBdO1xyXG5cclxuICAgIC8vIENyZWF0ZSB0aGUgTm9kZSBmb3IgdGhlIGRhc2hlZCBjdXJ2ZS5cclxuICAgIGlmICggZGFzaGVkQ3VydmUgKSB7XHJcbiAgICAgIGNvbnN0IGRhc2hlZEN1cnZlTm9kZSA9IG5ldyBDdXJ2ZU5vZGUoIGRhc2hlZEN1cnZlLCBjaGFydFRyYW5zZm9ybSwge1xyXG4gICAgICAgIHN0cm9rZTogc3Ryb2tlLFxyXG4gICAgICAgIGRpc2NvbnRpbnVvdXNQb2ludHNGaWxsOiBDYWxjdWx1c0dyYXBoZXJDb2xvcnMucGFuZWxGaWxsUHJvcGVydHksXHJcbiAgICAgICAgY29udGludW91c0xpbmVQbG90T3B0aW9uczoge1xyXG4gICAgICAgICAgbGluZURhc2g6IFsgNC41LCAyIF0sXHJcbiAgICAgICAgICBsaW5lV2lkdGg6IDFcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRhbmRlbTogVGFuZGVtLk9QVF9PVVQgLy8gQ3VydmVOb2RlcyBmb3IgaWNvbnMgYXJlIG5vdCBpbnN0cnVtZW50ZWRcclxuICAgICAgfSApO1xyXG4gICAgICBjaGlsZHJlbi5wdXNoKCBkYXNoZWRDdXJ2ZU5vZGUgKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIG1vZGUgPT09IEN1cnZlTWFuaXB1bGF0aW9uTW9kZS5GUkVFRk9STSApIHtcclxuXHJcbiAgICAgIC8vIFNjYWxlIGRvd24gaW4gdGhlIHggZGltZW5zaW9uLCBzbyB0aGF0IHdlIGhhdmUgcm9vbSB0byBhZGQgcGVuY2lsIGljb24uIFRoaXMgbWFrZXMgdGhlIHN0cm9rZSB3aXRoIGFcclxuICAgICAgLy8gbGl0dGxlIGluY29uc2lzdGVudCBpbiB4IHZzIHkgZGltZW5zaW9ucywgYnV0IGxvb2tzIE9LIGZvciBhbiBpY29uLiBNb3JlIGltcG9ydGFudGx5LCB3ZSB3YW50IHRoZVxyXG4gICAgICAvLyBzb2xpZEN1cnZlTm9kZSBwYXJ0IG9mIHRoaXMgaWNvbiB0byBtYXRjaCB3aGF0IGlzIHNob3duIGJ5IEN1cnZlTWFuaXB1bGF0aW9uRGlzcGxheU5vZGUuXHJcbiAgICAgIHNvbGlkQ3VydmVOb2RlLnNldFNjYWxlTWFnbml0dWRlKCAwLjUsIDEgKTtcclxuXHJcbiAgICAgIC8vIFBlbmNpbCB0byB0aGUgcmlnaHQgb2Ygc29saWRDdXJ2ZU5vZGUsIHdpdGggdGlwIG9mIHRoZSBwZW5jaWwgYXQgdGhlIHJpZ2h0bW9zdCBlbmQgb2YgdGhlIGN1cnZlXHJcbiAgICAgIC8vIHRoZSBzb2xpZEN1cnZlTm9kZSByZW5kZXJzLlxyXG4gICAgICBjb25zdCBwZW5jaWxOb2RlID0gbmV3IFBhdGgoIHBlbmNpbEFsdFNvbGlkU2hhcGUsIHtcclxuICAgICAgICBzY2FsZTogMC4wNSxcclxuICAgICAgICBmaWxsOiBDb2xvci5ncmF5Q29sb3IoIDc1ICksXHJcbiAgICAgICAgbGVmdDogc29saWRDdXJ2ZU5vZGUucmlnaHQsXHJcbiAgICAgICAgYm90dG9tOiBzb2xpZEN1cnZlTm9kZS5ib3R0b21cclxuICAgICAgfSApO1xyXG4gICAgICBjaGlsZHJlbi5wdXNoKCBwZW5jaWxOb2RlICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgbm9kZSA9IG5ldyBOb2RlKCB7XHJcbiAgICAgIGNoaWxkcmVuOiBjaGlsZHJlblxyXG4gICAgfSApO1xyXG5cclxuICAgIHN1cGVyKCBub2RlLCBBTElHTl9CT1hfT1BUSU9OUyApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0cyB0aGUgeS12YWx1ZXMgb2YgYSBjdXJ2ZSB0byBhIHNoYXBlIHRoYXQgaXMgdXNlZCBpbiB0aGUgRlJFRUZPUk0gbW9kZSBpY29uIGFuZCBkaXNwbGF5LlxyXG4gICAqIFRoZSBzaGFwZSBvZiB0aGlzIGN1cnZlIHdhcyBjaG9zZW4gc3VjaCB0aGF0IGEgcGVuY2lsIGljb24gY291bGQgYmUgcGxhY2VkIGF0IHRoZSByaWdodG1vc3QgcG9pbnQuXHJcbiAgICogQHBhcmFtIGN1cnZlXHJcbiAgICogQHBhcmFtIHlNaW4gLSB0aGUgbWluaW11bSB5LXZhbHVlIGZvciB0aGUgY3VydmVcclxuICAgKiBAcGFyYW0geU1heCAtIHRoZSBtYXhpbXVtIHktdmFsdWUgZm9yIHRoZSBjdXJ2ZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgZnJlZWZvcm1JY29uQ3VydmUoIGN1cnZlOiBUcmFuc2Zvcm1lZEN1cnZlLCB5TWluOiBudW1iZXIsIHlNYXg6IG51bWJlciApOiB2b2lkIHtcclxuXHJcbiAgICBjb25zdCB4TGVuZ3RoID0gY3VydmUueFJhbmdlLmdldExlbmd0aCgpO1xyXG4gICAgY29uc3QgeE1pbiA9IGN1cnZlLnhSYW5nZS5nZXRNaW4oKTtcclxuICAgIGNvbnN0IHdpZHRoID0geExlbmd0aCAvIDQ7XHJcblxyXG4gICAgY3VydmUucmVzZXQoKTtcclxuICAgIGN1cnZlLnRyaWFuZ2xlKCB3aWR0aCwgeE1pbiArIDIgKiB4TGVuZ3RoIC8gNSwgMC42NSAqIHlNYXggKTtcclxuICAgIGN1cnZlLnNhdmUoKTtcclxuICAgIGN1cnZlLnBlZGVzdGFsKCB3aWR0aCwgeE1pbiArIDQgKiB4TGVuZ3RoIC8gNSwgeU1heCApO1xyXG4gIH1cclxufVxyXG5cclxuY2FsY3VsdXNHcmFwaGVyLnJlZ2lzdGVyKCAnQ3VydmVNYW5pcHVsYXRpb25JY29uTm9kZScsIEN1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