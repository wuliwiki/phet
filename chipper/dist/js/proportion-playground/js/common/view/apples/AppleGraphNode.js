// Copyright 2016-2022, University of Colorado Boulder

/**
 * Shows a vertical representation of the price per apple with moving triangles on the left and right sides to indicate
 * where the simulation is at. Very similar in intent and implementation to GradientIndicatorNode.js
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */

import Multilink from '../../../../../axon/js/Multilink.js';
import Utils from '../../../../../dot/js/Utils.js';
import { Shape } from '../../../../../kite/js/imports.js';
import ArrowNode from '../../../../../scenery-phet/js/ArrowNode.js';
import TriangleNode from '../../../../../scenery-phet/js/TriangleNode.js';
import { Node, Path, Text } from '../../../../../scenery/js/imports.js';
import proportionPlayground from '../../../proportionPlayground.js';
import ProportionPlaygroundStrings from '../../../ProportionPlaygroundStrings.js';
import ProportionPlaygroundConstants from '../../ProportionPlaygroundConstants.js';
import ProportionPlaygroundColors from '../ProportionPlaygroundColors.js';
const appleCostString = ProportionPlaygroundStrings.appleCost;

// constants
const ARROW_OVERSHOOT = 30; // how far the arrowhead goes past the top tick
// const ARROW_WIDTH = 3;
const ARROW_HEIGHT = 290;
const ARROW_LINE_WIDTH = 2;
const TICK_X = 10;
class AppleGraphNode extends Node {
  /**
   * @param {AppleScene} scene - the model
   * @param {Object} [options] - Node options
   */
  constructor(scene, options) {
    // The vertical arrow for the graph
    const arrowNode = new ArrowNode(0, ARROW_HEIGHT, 0, -ARROW_OVERSHOOT, {
      tailWidth: ARROW_LINE_WIDTH
    });

    // Tick marks for 0, 1/2 and 1 up the chart.
    const tickPositions = [0, 0.5, 1].map(ratio => Utils.linear(0, 1, ARROW_HEIGHT, 0, ratio));
    // moveTo/lineTo for each tick
    const tickShape = _.reduce(tickPositions, (shape, position) => shape.moveTo(-TICK_X, position).lineTo(TICK_X, position), new Shape());
    arrowNode.addChild(new Path(tickShape, {
      stroke: 'black',
      lineWidth: ARROW_LINE_WIDTH
    }));

    // Create the triangle indicators
    const leftIndicator = new TriangleNode({
      pointDirection: 'right',
      left: -3.25,
      triangleHeight: 10,
      triangleWidth: 17
    });
    const rightIndicator = new TriangleNode({
      pointDirection: 'left',
      left: 1.25,
      triangleHeight: 10,
      triangleWidth: 17
    });
    const label = new Text(appleCostString, {
      font: ProportionPlaygroundConstants.CONTROL_FONT,
      centerX: arrowNode.centerX,
      bottom: arrowNode.top - 10,
      maxWidth: 170
    });
    const updateLeftIndicator = updateIndicator.bind(undefined, leftIndicator, scene.leftAppleGroup);
    const updateRightIndicator = updateIndicator.bind(undefined, rightIndicator, scene.rightAppleGroup);
    scene.leftAppleGroup.visibleChangeEmitter.addListener(updateLeftIndicator);
    scene.rightAppleGroup.visibleChangeEmitter.addListener(updateRightIndicator);
    updateLeftIndicator();
    updateRightIndicator();

    // Update the indicator fills when salient properties change
    Multilink.multilink(scene.quantityProperties.concat([scene.showBothProperty]), () => {
      const colorProperty = scene.predictMode ? ProportionPlaygroundColors.predictBackgroundProperty : ProportionPlaygroundColors.exploreBackgroundProperty;
      const fill = scene.areRatiosEquivalent() && scene.showBothProperty.value ? 'black' : colorProperty;
      rightIndicator.fill = fill;
      leftIndicator.fill = fill;
    });
    assert && assert(!options.children, 'Unsupported option');
    options.children = [arrowNode, leftIndicator, rightIndicator, label];
    super(options);
  }
}
proportionPlayground.register('AppleGraphNode', AppleGraphNode);

/**
 * Callback to update a triangular indicator.
 * @private
 *
 * @param {Node} indicator - the left/right triangle node
 * @param {AppleGroup} appleGroup - the model
 */
function updateIndicator(indicator, appleGroup) {
  indicator.visible = appleGroup.numberOfApplesProperty.value > 0 && appleGroup.visibleProperty.value;
  const costPerApple = appleGroup.totalCostProperty.value / appleGroup.numberOfApplesProperty.value;
  if (isFinite(costPerApple)) {
    indicator.centerY = Utils.linear(0, 20, ARROW_HEIGHT, 0, costPerApple);
  }
}
export default AppleGraphNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNdWx0aWxpbmsiLCJVdGlscyIsIlNoYXBlIiwiQXJyb3dOb2RlIiwiVHJpYW5nbGVOb2RlIiwiTm9kZSIsIlBhdGgiLCJUZXh0IiwicHJvcG9ydGlvblBsYXlncm91bmQiLCJQcm9wb3J0aW9uUGxheWdyb3VuZFN0cmluZ3MiLCJQcm9wb3J0aW9uUGxheWdyb3VuZENvbnN0YW50cyIsIlByb3BvcnRpb25QbGF5Z3JvdW5kQ29sb3JzIiwiYXBwbGVDb3N0U3RyaW5nIiwiYXBwbGVDb3N0IiwiQVJST1dfT1ZFUlNIT09UIiwiQVJST1dfSEVJR0hUIiwiQVJST1dfTElORV9XSURUSCIsIlRJQ0tfWCIsIkFwcGxlR3JhcGhOb2RlIiwiY29uc3RydWN0b3IiLCJzY2VuZSIsIm9wdGlvbnMiLCJhcnJvd05vZGUiLCJ0YWlsV2lkdGgiLCJ0aWNrUG9zaXRpb25zIiwibWFwIiwicmF0aW8iLCJsaW5lYXIiLCJ0aWNrU2hhcGUiLCJfIiwicmVkdWNlIiwic2hhcGUiLCJwb3NpdGlvbiIsIm1vdmVUbyIsImxpbmVUbyIsImFkZENoaWxkIiwic3Ryb2tlIiwibGluZVdpZHRoIiwibGVmdEluZGljYXRvciIsInBvaW50RGlyZWN0aW9uIiwibGVmdCIsInRyaWFuZ2xlSGVpZ2h0IiwidHJpYW5nbGVXaWR0aCIsInJpZ2h0SW5kaWNhdG9yIiwibGFiZWwiLCJmb250IiwiQ09OVFJPTF9GT05UIiwiY2VudGVyWCIsImJvdHRvbSIsInRvcCIsIm1heFdpZHRoIiwidXBkYXRlTGVmdEluZGljYXRvciIsInVwZGF0ZUluZGljYXRvciIsImJpbmQiLCJ1bmRlZmluZWQiLCJsZWZ0QXBwbGVHcm91cCIsInVwZGF0ZVJpZ2h0SW5kaWNhdG9yIiwicmlnaHRBcHBsZUdyb3VwIiwidmlzaWJsZUNoYW5nZUVtaXR0ZXIiLCJhZGRMaXN0ZW5lciIsIm11bHRpbGluayIsInF1YW50aXR5UHJvcGVydGllcyIsImNvbmNhdCIsInNob3dCb3RoUHJvcGVydHkiLCJjb2xvclByb3BlcnR5IiwicHJlZGljdE1vZGUiLCJwcmVkaWN0QmFja2dyb3VuZFByb3BlcnR5IiwiZXhwbG9yZUJhY2tncm91bmRQcm9wZXJ0eSIsImZpbGwiLCJhcmVSYXRpb3NFcXVpdmFsZW50IiwidmFsdWUiLCJhc3NlcnQiLCJjaGlsZHJlbiIsInJlZ2lzdGVyIiwiaW5kaWNhdG9yIiwiYXBwbGVHcm91cCIsInZpc2libGUiLCJudW1iZXJPZkFwcGxlc1Byb3BlcnR5IiwidmlzaWJsZVByb3BlcnR5IiwiY29zdFBlckFwcGxlIiwidG90YWxDb3N0UHJvcGVydHkiLCJpc0Zpbml0ZSIsImNlbnRlclkiXSwic291cmNlcyI6WyJBcHBsZUdyYXBoTm9kZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNi0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBTaG93cyBhIHZlcnRpY2FsIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwcmljZSBwZXIgYXBwbGUgd2l0aCBtb3ZpbmcgdHJpYW5nbGVzIG9uIHRoZSBsZWZ0IGFuZCByaWdodCBzaWRlcyB0byBpbmRpY2F0ZVxyXG4gKiB3aGVyZSB0aGUgc2ltdWxhdGlvbiBpcyBhdC4gVmVyeSBzaW1pbGFyIGluIGludGVudCBhbmQgaW1wbGVtZW50YXRpb24gdG8gR3JhZGllbnRJbmRpY2F0b3JOb2RlLmpzXHJcbiAqXHJcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IE11bHRpbGluayBmcm9tICcuLi8uLi8uLi8uLi8uLi9heG9uL2pzL011bHRpbGluay5qcyc7XHJcbmltcG9ydCBVdGlscyBmcm9tICcuLi8uLi8uLi8uLi8uLi9kb3QvanMvVXRpbHMuanMnO1xyXG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL2tpdGUvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBBcnJvd05vZGUgZnJvbSAnLi4vLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL0Fycm93Tm9kZS5qcyc7XHJcbmltcG9ydCBUcmlhbmdsZU5vZGUgZnJvbSAnLi4vLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1RyaWFuZ2xlTm9kZS5qcyc7XHJcbmltcG9ydCB7IE5vZGUsIFBhdGgsIFRleHQgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgcHJvcG9ydGlvblBsYXlncm91bmQgZnJvbSAnLi4vLi4vLi4vcHJvcG9ydGlvblBsYXlncm91bmQuanMnO1xyXG5pbXBvcnQgUHJvcG9ydGlvblBsYXlncm91bmRTdHJpbmdzIGZyb20gJy4uLy4uLy4uL1Byb3BvcnRpb25QbGF5Z3JvdW5kU3RyaW5ncy5qcyc7XHJcbmltcG9ydCBQcm9wb3J0aW9uUGxheWdyb3VuZENvbnN0YW50cyBmcm9tICcuLi8uLi9Qcm9wb3J0aW9uUGxheWdyb3VuZENvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBQcm9wb3J0aW9uUGxheWdyb3VuZENvbG9ycyBmcm9tICcuLi9Qcm9wb3J0aW9uUGxheWdyb3VuZENvbG9ycy5qcyc7XHJcblxyXG5jb25zdCBhcHBsZUNvc3RTdHJpbmcgPSBQcm9wb3J0aW9uUGxheWdyb3VuZFN0cmluZ3MuYXBwbGVDb3N0O1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IEFSUk9XX09WRVJTSE9PVCA9IDMwOyAvLyBob3cgZmFyIHRoZSBhcnJvd2hlYWQgZ29lcyBwYXN0IHRoZSB0b3AgdGlja1xyXG4vLyBjb25zdCBBUlJPV19XSURUSCA9IDM7XHJcbmNvbnN0IEFSUk9XX0hFSUdIVCA9IDI5MDtcclxuY29uc3QgQVJST1dfTElORV9XSURUSCA9IDI7XHJcblxyXG5jb25zdCBUSUNLX1ggPSAxMDtcclxuXHJcbmNsYXNzIEFwcGxlR3JhcGhOb2RlIGV4dGVuZHMgTm9kZSB7XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtBcHBsZVNjZW5lfSBzY2VuZSAtIHRoZSBtb2RlbFxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBOb2RlIG9wdGlvbnNcclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvciggc2NlbmUsIG9wdGlvbnMgKSB7XHJcbiAgICAvLyBUaGUgdmVydGljYWwgYXJyb3cgZm9yIHRoZSBncmFwaFxyXG4gICAgY29uc3QgYXJyb3dOb2RlID0gbmV3IEFycm93Tm9kZSggMCwgQVJST1dfSEVJR0hULCAwLCAtQVJST1dfT1ZFUlNIT09ULCB7IHRhaWxXaWR0aDogQVJST1dfTElORV9XSURUSCB9ICk7XHJcblxyXG4gICAgLy8gVGljayBtYXJrcyBmb3IgMCwgMS8yIGFuZCAxIHVwIHRoZSBjaGFydC5cclxuICAgIGNvbnN0IHRpY2tQb3NpdGlvbnMgPSBbIDAsIDAuNSwgMSBdLm1hcCggcmF0aW8gPT4gVXRpbHMubGluZWFyKCAwLCAxLCBBUlJPV19IRUlHSFQsIDAsIHJhdGlvICkgKTtcclxuICAgIC8vIG1vdmVUby9saW5lVG8gZm9yIGVhY2ggdGlja1xyXG4gICAgY29uc3QgdGlja1NoYXBlID0gXy5yZWR1Y2UoIHRpY2tQb3NpdGlvbnMsICggc2hhcGUsIHBvc2l0aW9uICkgPT4gc2hhcGUubW92ZVRvKCAtVElDS19YLCBwb3NpdGlvbiApXHJcbiAgICAgIC5saW5lVG8oIFRJQ0tfWCwgcG9zaXRpb24gKSwgbmV3IFNoYXBlKCkgKTtcclxuICAgIGFycm93Tm9kZS5hZGRDaGlsZCggbmV3IFBhdGgoIHRpY2tTaGFwZSwge1xyXG4gICAgICBzdHJva2U6ICdibGFjaycsXHJcbiAgICAgIGxpbmVXaWR0aDogQVJST1dfTElORV9XSURUSFxyXG4gICAgfSApICk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIHRoZSB0cmlhbmdsZSBpbmRpY2F0b3JzXHJcbiAgICBjb25zdCBsZWZ0SW5kaWNhdG9yID0gbmV3IFRyaWFuZ2xlTm9kZSgge1xyXG4gICAgICBwb2ludERpcmVjdGlvbjogJ3JpZ2h0JyxcclxuICAgICAgbGVmdDogLTMuMjUsXHJcbiAgICAgIHRyaWFuZ2xlSGVpZ2h0OiAxMCxcclxuICAgICAgdHJpYW5nbGVXaWR0aDogMTdcclxuICAgIH0gKTtcclxuICAgIGNvbnN0IHJpZ2h0SW5kaWNhdG9yID0gbmV3IFRyaWFuZ2xlTm9kZSgge1xyXG4gICAgICBwb2ludERpcmVjdGlvbjogJ2xlZnQnLFxyXG4gICAgICBsZWZ0OiAxLjI1LFxyXG4gICAgICB0cmlhbmdsZUhlaWdodDogMTAsXHJcbiAgICAgIHRyaWFuZ2xlV2lkdGg6IDE3XHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgbGFiZWwgPSBuZXcgVGV4dCggYXBwbGVDb3N0U3RyaW5nLCB7XHJcbiAgICAgIGZvbnQ6IFByb3BvcnRpb25QbGF5Z3JvdW5kQ29uc3RhbnRzLkNPTlRST0xfRk9OVCxcclxuICAgICAgY2VudGVyWDogYXJyb3dOb2RlLmNlbnRlclgsXHJcbiAgICAgIGJvdHRvbTogYXJyb3dOb2RlLnRvcCAtIDEwLFxyXG4gICAgICBtYXhXaWR0aDogMTcwXHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgdXBkYXRlTGVmdEluZGljYXRvciA9IHVwZGF0ZUluZGljYXRvci5iaW5kKCB1bmRlZmluZWQsIGxlZnRJbmRpY2F0b3IsIHNjZW5lLmxlZnRBcHBsZUdyb3VwICk7XHJcbiAgICBjb25zdCB1cGRhdGVSaWdodEluZGljYXRvciA9IHVwZGF0ZUluZGljYXRvci5iaW5kKCB1bmRlZmluZWQsIHJpZ2h0SW5kaWNhdG9yLCBzY2VuZS5yaWdodEFwcGxlR3JvdXAgKTtcclxuXHJcbiAgICBzY2VuZS5sZWZ0QXBwbGVHcm91cC52aXNpYmxlQ2hhbmdlRW1pdHRlci5hZGRMaXN0ZW5lciggdXBkYXRlTGVmdEluZGljYXRvciApO1xyXG4gICAgc2NlbmUucmlnaHRBcHBsZUdyb3VwLnZpc2libGVDaGFuZ2VFbWl0dGVyLmFkZExpc3RlbmVyKCB1cGRhdGVSaWdodEluZGljYXRvciApO1xyXG4gICAgdXBkYXRlTGVmdEluZGljYXRvcigpO1xyXG4gICAgdXBkYXRlUmlnaHRJbmRpY2F0b3IoKTtcclxuXHJcbiAgICAvLyBVcGRhdGUgdGhlIGluZGljYXRvciBmaWxscyB3aGVuIHNhbGllbnQgcHJvcGVydGllcyBjaGFuZ2VcclxuICAgIE11bHRpbGluay5tdWx0aWxpbmsoIHNjZW5lLnF1YW50aXR5UHJvcGVydGllcy5jb25jYXQoIFsgc2NlbmUuc2hvd0JvdGhQcm9wZXJ0eSBdICksICgpID0+IHtcclxuICAgICAgY29uc3QgY29sb3JQcm9wZXJ0eSA9IHNjZW5lLnByZWRpY3RNb2RlID8gUHJvcG9ydGlvblBsYXlncm91bmRDb2xvcnMucHJlZGljdEJhY2tncm91bmRQcm9wZXJ0eSA6IFByb3BvcnRpb25QbGF5Z3JvdW5kQ29sb3JzLmV4cGxvcmVCYWNrZ3JvdW5kUHJvcGVydHk7XHJcbiAgICAgIGNvbnN0IGZpbGwgPSAoIHNjZW5lLmFyZVJhdGlvc0VxdWl2YWxlbnQoKSAmJiBzY2VuZS5zaG93Qm90aFByb3BlcnR5LnZhbHVlICkgPyAnYmxhY2snIDogY29sb3JQcm9wZXJ0eTtcclxuICAgICAgcmlnaHRJbmRpY2F0b3IuZmlsbCA9IGZpbGw7XHJcbiAgICAgIGxlZnRJbmRpY2F0b3IuZmlsbCA9IGZpbGw7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggIW9wdGlvbnMuY2hpbGRyZW4sICdVbnN1cHBvcnRlZCBvcHRpb24nICk7XHJcbiAgICBvcHRpb25zLmNoaWxkcmVuID0gW1xyXG4gICAgICBhcnJvd05vZGUsXHJcbiAgICAgIGxlZnRJbmRpY2F0b3IsXHJcbiAgICAgIHJpZ2h0SW5kaWNhdG9yLFxyXG4gICAgICBsYWJlbFxyXG4gICAgXTtcclxuXHJcbiAgICBzdXBlciggb3B0aW9ucyApO1xyXG4gIH1cclxufVxyXG5cclxucHJvcG9ydGlvblBsYXlncm91bmQucmVnaXN0ZXIoICdBcHBsZUdyYXBoTm9kZScsIEFwcGxlR3JhcGhOb2RlICk7XHJcblxyXG4vKipcclxuICogQ2FsbGJhY2sgdG8gdXBkYXRlIGEgdHJpYW5ndWxhciBpbmRpY2F0b3IuXHJcbiAqIEBwcml2YXRlXHJcbiAqXHJcbiAqIEBwYXJhbSB7Tm9kZX0gaW5kaWNhdG9yIC0gdGhlIGxlZnQvcmlnaHQgdHJpYW5nbGUgbm9kZVxyXG4gKiBAcGFyYW0ge0FwcGxlR3JvdXB9IGFwcGxlR3JvdXAgLSB0aGUgbW9kZWxcclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZUluZGljYXRvciggaW5kaWNhdG9yLCBhcHBsZUdyb3VwICkge1xyXG4gIGluZGljYXRvci52aXNpYmxlID0gYXBwbGVHcm91cC5udW1iZXJPZkFwcGxlc1Byb3BlcnR5LnZhbHVlID4gMCAmJiBhcHBsZUdyb3VwLnZpc2libGVQcm9wZXJ0eS52YWx1ZTtcclxuICBjb25zdCBjb3N0UGVyQXBwbGUgPSBhcHBsZUdyb3VwLnRvdGFsQ29zdFByb3BlcnR5LnZhbHVlIC8gYXBwbGVHcm91cC5udW1iZXJPZkFwcGxlc1Byb3BlcnR5LnZhbHVlO1xyXG4gIGlmICggaXNGaW5pdGUoIGNvc3RQZXJBcHBsZSApICkge1xyXG4gICAgaW5kaWNhdG9yLmNlbnRlclkgPSBVdGlscy5saW5lYXIoIDAsIDIwLCBBUlJPV19IRUlHSFQsIDAsIGNvc3RQZXJBcHBsZSApO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQXBwbGVHcmFwaE5vZGU7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFNBQVMsTUFBTSxxQ0FBcUM7QUFDM0QsT0FBT0MsS0FBSyxNQUFNLGdDQUFnQztBQUNsRCxTQUFTQyxLQUFLLFFBQVEsbUNBQW1DO0FBQ3pELE9BQU9DLFNBQVMsTUFBTSw2Q0FBNkM7QUFDbkUsT0FBT0MsWUFBWSxNQUFNLGdEQUFnRDtBQUN6RSxTQUFTQyxJQUFJLEVBQUVDLElBQUksRUFBRUMsSUFBSSxRQUFRLHNDQUFzQztBQUN2RSxPQUFPQyxvQkFBb0IsTUFBTSxrQ0FBa0M7QUFDbkUsT0FBT0MsMkJBQTJCLE1BQU0seUNBQXlDO0FBQ2pGLE9BQU9DLDZCQUE2QixNQUFNLHdDQUF3QztBQUNsRixPQUFPQywwQkFBMEIsTUFBTSxrQ0FBa0M7QUFFekUsTUFBTUMsZUFBZSxHQUFHSCwyQkFBMkIsQ0FBQ0ksU0FBUzs7QUFFN0Q7QUFDQSxNQUFNQyxlQUFlLEdBQUcsRUFBRSxDQUFDLENBQUM7QUFDNUI7QUFDQSxNQUFNQyxZQUFZLEdBQUcsR0FBRztBQUN4QixNQUFNQyxnQkFBZ0IsR0FBRyxDQUFDO0FBRTFCLE1BQU1DLE1BQU0sR0FBRyxFQUFFO0FBRWpCLE1BQU1DLGNBQWMsU0FBU2IsSUFBSSxDQUFDO0VBQ2hDO0FBQ0Y7QUFDQTtBQUNBO0VBQ0VjLFdBQVdBLENBQUVDLEtBQUssRUFBRUMsT0FBTyxFQUFHO0lBQzVCO0lBQ0EsTUFBTUMsU0FBUyxHQUFHLElBQUluQixTQUFTLENBQUUsQ0FBQyxFQUFFWSxZQUFZLEVBQUUsQ0FBQyxFQUFFLENBQUNELGVBQWUsRUFBRTtNQUFFUyxTQUFTLEVBQUVQO0lBQWlCLENBQUUsQ0FBQzs7SUFFeEc7SUFDQSxNQUFNUSxhQUFhLEdBQUcsQ0FBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBRSxDQUFDQyxHQUFHLENBQUVDLEtBQUssSUFBSXpCLEtBQUssQ0FBQzBCLE1BQU0sQ0FBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFWixZQUFZLEVBQUUsQ0FBQyxFQUFFVyxLQUFNLENBQUUsQ0FBQztJQUNoRztJQUNBLE1BQU1FLFNBQVMsR0FBR0MsQ0FBQyxDQUFDQyxNQUFNLENBQUVOLGFBQWEsRUFBRSxDQUFFTyxLQUFLLEVBQUVDLFFBQVEsS0FBTUQsS0FBSyxDQUFDRSxNQUFNLENBQUUsQ0FBQ2hCLE1BQU0sRUFBRWUsUUFBUyxDQUFDLENBQ2hHRSxNQUFNLENBQUVqQixNQUFNLEVBQUVlLFFBQVMsQ0FBQyxFQUFFLElBQUk5QixLQUFLLENBQUMsQ0FBRSxDQUFDO0lBQzVDb0IsU0FBUyxDQUFDYSxRQUFRLENBQUUsSUFBSTdCLElBQUksQ0FBRXNCLFNBQVMsRUFBRTtNQUN2Q1EsTUFBTSxFQUFFLE9BQU87TUFDZkMsU0FBUyxFQUFFckI7SUFDYixDQUFFLENBQUUsQ0FBQzs7SUFFTDtJQUNBLE1BQU1zQixhQUFhLEdBQUcsSUFBSWxDLFlBQVksQ0FBRTtNQUN0Q21DLGNBQWMsRUFBRSxPQUFPO01BQ3ZCQyxJQUFJLEVBQUUsQ0FBQyxJQUFJO01BQ1hDLGNBQWMsRUFBRSxFQUFFO01BQ2xCQyxhQUFhLEVBQUU7SUFDakIsQ0FBRSxDQUFDO0lBQ0gsTUFBTUMsY0FBYyxHQUFHLElBQUl2QyxZQUFZLENBQUU7TUFDdkNtQyxjQUFjLEVBQUUsTUFBTTtNQUN0QkMsSUFBSSxFQUFFLElBQUk7TUFDVkMsY0FBYyxFQUFFLEVBQUU7TUFDbEJDLGFBQWEsRUFBRTtJQUNqQixDQUFFLENBQUM7SUFFSCxNQUFNRSxLQUFLLEdBQUcsSUFBSXJDLElBQUksQ0FBRUssZUFBZSxFQUFFO01BQ3ZDaUMsSUFBSSxFQUFFbkMsNkJBQTZCLENBQUNvQyxZQUFZO01BQ2hEQyxPQUFPLEVBQUV6QixTQUFTLENBQUN5QixPQUFPO01BQzFCQyxNQUFNLEVBQUUxQixTQUFTLENBQUMyQixHQUFHLEdBQUcsRUFBRTtNQUMxQkMsUUFBUSxFQUFFO0lBQ1osQ0FBRSxDQUFDO0lBRUgsTUFBTUMsbUJBQW1CLEdBQUdDLGVBQWUsQ0FBQ0MsSUFBSSxDQUFFQyxTQUFTLEVBQUVoQixhQUFhLEVBQUVsQixLQUFLLENBQUNtQyxjQUFlLENBQUM7SUFDbEcsTUFBTUMsb0JBQW9CLEdBQUdKLGVBQWUsQ0FBQ0MsSUFBSSxDQUFFQyxTQUFTLEVBQUVYLGNBQWMsRUFBRXZCLEtBQUssQ0FBQ3FDLGVBQWdCLENBQUM7SUFFckdyQyxLQUFLLENBQUNtQyxjQUFjLENBQUNHLG9CQUFvQixDQUFDQyxXQUFXLENBQUVSLG1CQUFvQixDQUFDO0lBQzVFL0IsS0FBSyxDQUFDcUMsZUFBZSxDQUFDQyxvQkFBb0IsQ0FBQ0MsV0FBVyxDQUFFSCxvQkFBcUIsQ0FBQztJQUM5RUwsbUJBQW1CLENBQUMsQ0FBQztJQUNyQkssb0JBQW9CLENBQUMsQ0FBQzs7SUFFdEI7SUFDQXhELFNBQVMsQ0FBQzRELFNBQVMsQ0FBRXhDLEtBQUssQ0FBQ3lDLGtCQUFrQixDQUFDQyxNQUFNLENBQUUsQ0FBRTFDLEtBQUssQ0FBQzJDLGdCQUFnQixDQUFHLENBQUMsRUFBRSxNQUFNO01BQ3hGLE1BQU1DLGFBQWEsR0FBRzVDLEtBQUssQ0FBQzZDLFdBQVcsR0FBR3RELDBCQUEwQixDQUFDdUQseUJBQXlCLEdBQUd2RCwwQkFBMEIsQ0FBQ3dELHlCQUF5QjtNQUNySixNQUFNQyxJQUFJLEdBQUtoRCxLQUFLLENBQUNpRCxtQkFBbUIsQ0FBQyxDQUFDLElBQUlqRCxLQUFLLENBQUMyQyxnQkFBZ0IsQ0FBQ08sS0FBSyxHQUFLLE9BQU8sR0FBR04sYUFBYTtNQUN0R3JCLGNBQWMsQ0FBQ3lCLElBQUksR0FBR0EsSUFBSTtNQUMxQjlCLGFBQWEsQ0FBQzhCLElBQUksR0FBR0EsSUFBSTtJQUMzQixDQUFFLENBQUM7SUFFSEcsTUFBTSxJQUFJQSxNQUFNLENBQUUsQ0FBQ2xELE9BQU8sQ0FBQ21ELFFBQVEsRUFBRSxvQkFBcUIsQ0FBQztJQUMzRG5ELE9BQU8sQ0FBQ21ELFFBQVEsR0FBRyxDQUNqQmxELFNBQVMsRUFDVGdCLGFBQWEsRUFDYkssY0FBYyxFQUNkQyxLQUFLLENBQ047SUFFRCxLQUFLLENBQUV2QixPQUFRLENBQUM7RUFDbEI7QUFDRjtBQUVBYixvQkFBb0IsQ0FBQ2lFLFFBQVEsQ0FBRSxnQkFBZ0IsRUFBRXZELGNBQWUsQ0FBQzs7QUFFakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTa0MsZUFBZUEsQ0FBRXNCLFNBQVMsRUFBRUMsVUFBVSxFQUFHO0VBQ2hERCxTQUFTLENBQUNFLE9BQU8sR0FBR0QsVUFBVSxDQUFDRSxzQkFBc0IsQ0FBQ1AsS0FBSyxHQUFHLENBQUMsSUFBSUssVUFBVSxDQUFDRyxlQUFlLENBQUNSLEtBQUs7RUFDbkcsTUFBTVMsWUFBWSxHQUFHSixVQUFVLENBQUNLLGlCQUFpQixDQUFDVixLQUFLLEdBQUdLLFVBQVUsQ0FBQ0Usc0JBQXNCLENBQUNQLEtBQUs7RUFDakcsSUFBS1csUUFBUSxDQUFFRixZQUFhLENBQUMsRUFBRztJQUM5QkwsU0FBUyxDQUFDUSxPQUFPLEdBQUdqRixLQUFLLENBQUMwQixNQUFNLENBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRVosWUFBWSxFQUFFLENBQUMsRUFBRWdFLFlBQWEsQ0FBQztFQUMxRTtBQUNGO0FBRUEsZUFBZTdELGNBQWMifQ==