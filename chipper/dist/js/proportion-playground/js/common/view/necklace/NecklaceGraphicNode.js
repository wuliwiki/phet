// Copyright 2017-2022, University of Colorado Boulder

/**
 * Scenery-Node-based Necklace display based on a Layout property.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Andrea Lin
 */

import Property from '../../../../../axon/js/Property.js';
import Vector2 from '../../../../../dot/js/Vector2.js';
import { Node, Path } from '../../../../../scenery/js/imports.js';
import proportionPlayground from '../../../proportionPlayground.js';
import NecklaceLayout from '../../model/necklace/NecklaceLayout.js';
import ProportionPlaygroundColors from '../ProportionPlaygroundColors.js';
import RoundBeadNode from './RoundBeadNode.js';
import SquareBeadNode from './SquareBeadNode.js';
class NecklaceGraphicNode extends Node {
  /**
   * @param {Property.<NecklaceLayout>} layoutProperty
   * @param {Object} [options] - node options
   */
  constructor(layoutProperty, options) {
    super();

    // @private {Node} - Holds all of the content, so that a translation can be applied to everything (that isn't part
    // of our top-level Node's transform).
    this.container = new Node();
    this.addChild(this.container);

    // @private {Path} - The chain/string behind the beads
    this.chain = new Path(null, {
      stroke: ProportionPlaygroundColors.necklaceStringProperty,
      lineWidth: 2
    });
    this.container.addChild(this.chain);

    // @private {Node} - Holds all of the beads
    this.beadContainer = new Node();
    this.container.addChild(this.beadContainer);

    // @private {Array.<RoundBeadNode>} - Always grows to lazily create, and sets unused ones invisible.
    this.roundBeads = [];

    // @private {Array.<SquareBeadNode>} - Always grows to lazily create, and sets unused ones invisible.
    this.squareBeads = [];
    layoutProperty.link(this.setLayout.bind(this));
    this.mutate(options);
  }

  /**
   * Rebuilds the necklace display to show the given layout.
   * @public
   *
   * @param {NecklaceLayout} layout
   */
  setLayout(layout) {
    const roundBeadCount = layout.roundBeadCount;
    const squareBeadCount = layout.squareBeadCount;

    // Only show the background chain if we have beads.
    this.chain.visible = roundBeadCount > 0 || squareBeadCount > 0;

    // Adds beads up to the amount that we need (don't need to remove extras, they will be set to invisible).
    while (this.roundBeads.length < roundBeadCount) {
      const roundBead = new RoundBeadNode();
      this.beadContainer.addChild(roundBead);
      this.roundBeads.push(roundBead);
    }
    while (this.squareBeads.length < squareBeadCount) {
      const squareBead = new SquareBeadNode(0);
      this.beadContainer.addChild(squareBead);
      this.squareBeads.push(squareBead);
    }

    // Toggle visibilities, repositioning hidden beads so it won't affect our bounds.
    let i;
    for (i = 0; i < this.roundBeads.length; i++) {
      const roundVisible = i < roundBeadCount;
      this.roundBeads[i].visible = i < roundBeadCount;
      if (!roundVisible) {
        this.roundBeads[i].translation = Vector2.ZERO; // Don't have it mess with our bounds
      }
    }

    for (i = 0; i < this.squareBeads.length; i++) {
      const squareVisible = i < squareBeadCount;
      this.squareBeads[i].visible = squareVisible;
      if (!squareVisible) {
        this.squareBeads[i].translation = Vector2.ZERO; // Don't have it mess with our bounds
      }
    }

    // Adjust the chain's shape
    this.chain.shape = layout.shape;

    // Adjust the translation of everything
    this.container.translation = layout.containerTranslation;

    // Update the beads
    for (i = 0; i < layout.roundBeads.length; i++) {
      this.roundBeads[i].translation = layout.roundBeads[i].center;
    }
    for (i = 0; i < layout.squareBeads.length; i++) {
      this.squareBeads[i].translation = layout.squareBeads[i].center;
      this.squareBeads[i].setBeadRotation(layout.squareBeads[i].angle);
    }
  }

  /**
   * Creates a static Necklace graphic.
   * @public
   *
   * @param {number} roundBeadCount
   * @param {number} squareBeadCount
   * @param {Object} [options] - node options
   */
  static createStaticNecklace(roundBeadCount, squareBeadCount, options) {
    return new NecklaceGraphicNode(new Property(NecklaceLayout.getLayout(roundBeadCount, squareBeadCount)), options);
  }
}
proportionPlayground.register('NecklaceGraphicNode', NecklaceGraphicNode);
export default NecklaceGraphicNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQcm9wZXJ0eSIsIlZlY3RvcjIiLCJOb2RlIiwiUGF0aCIsInByb3BvcnRpb25QbGF5Z3JvdW5kIiwiTmVja2xhY2VMYXlvdXQiLCJQcm9wb3J0aW9uUGxheWdyb3VuZENvbG9ycyIsIlJvdW5kQmVhZE5vZGUiLCJTcXVhcmVCZWFkTm9kZSIsIk5lY2tsYWNlR3JhcGhpY05vZGUiLCJjb25zdHJ1Y3RvciIsImxheW91dFByb3BlcnR5Iiwib3B0aW9ucyIsImNvbnRhaW5lciIsImFkZENoaWxkIiwiY2hhaW4iLCJzdHJva2UiLCJuZWNrbGFjZVN0cmluZ1Byb3BlcnR5IiwibGluZVdpZHRoIiwiYmVhZENvbnRhaW5lciIsInJvdW5kQmVhZHMiLCJzcXVhcmVCZWFkcyIsImxpbmsiLCJzZXRMYXlvdXQiLCJiaW5kIiwibXV0YXRlIiwibGF5b3V0Iiwicm91bmRCZWFkQ291bnQiLCJzcXVhcmVCZWFkQ291bnQiLCJ2aXNpYmxlIiwibGVuZ3RoIiwicm91bmRCZWFkIiwicHVzaCIsInNxdWFyZUJlYWQiLCJpIiwicm91bmRWaXNpYmxlIiwidHJhbnNsYXRpb24iLCJaRVJPIiwic3F1YXJlVmlzaWJsZSIsInNoYXBlIiwiY29udGFpbmVyVHJhbnNsYXRpb24iLCJjZW50ZXIiLCJzZXRCZWFkUm90YXRpb24iLCJhbmdsZSIsImNyZWF0ZVN0YXRpY05lY2tsYWNlIiwiZ2V0TGF5b3V0IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJOZWNrbGFjZUdyYXBoaWNOb2RlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE3LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFNjZW5lcnktTm9kZS1iYXNlZCBOZWNrbGFjZSBkaXNwbGF5IGJhc2VkIG9uIGEgTGF5b3V0IHByb3BlcnR5LlxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XHJcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqIEBhdXRob3IgQW5kcmVhIExpblxyXG4gKi9cclxuXHJcbmltcG9ydCBQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi8uLi9heG9uL2pzL1Byb3BlcnR5LmpzJztcclxuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi4vLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjIuanMnO1xyXG5pbXBvcnQgeyBOb2RlLCBQYXRoIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IHByb3BvcnRpb25QbGF5Z3JvdW5kIGZyb20gJy4uLy4uLy4uL3Byb3BvcnRpb25QbGF5Z3JvdW5kLmpzJztcclxuaW1wb3J0IE5lY2tsYWNlTGF5b3V0IGZyb20gJy4uLy4uL21vZGVsL25lY2tsYWNlL05lY2tsYWNlTGF5b3V0LmpzJztcclxuaW1wb3J0IFByb3BvcnRpb25QbGF5Z3JvdW5kQ29sb3JzIGZyb20gJy4uL1Byb3BvcnRpb25QbGF5Z3JvdW5kQ29sb3JzLmpzJztcclxuaW1wb3J0IFJvdW5kQmVhZE5vZGUgZnJvbSAnLi9Sb3VuZEJlYWROb2RlLmpzJztcclxuaW1wb3J0IFNxdWFyZUJlYWROb2RlIGZyb20gJy4vU3F1YXJlQmVhZE5vZGUuanMnO1xyXG5cclxuY2xhc3MgTmVja2xhY2VHcmFwaGljTm9kZSBleHRlbmRzIE5vZGUge1xyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7UHJvcGVydHkuPE5lY2tsYWNlTGF5b3V0Pn0gbGF5b3V0UHJvcGVydHlcclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gbm9kZSBvcHRpb25zXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIGxheW91dFByb3BlcnR5LCBvcHRpb25zICkge1xyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZSB7Tm9kZX0gLSBIb2xkcyBhbGwgb2YgdGhlIGNvbnRlbnQsIHNvIHRoYXQgYSB0cmFuc2xhdGlvbiBjYW4gYmUgYXBwbGllZCB0byBldmVyeXRoaW5nICh0aGF0IGlzbid0IHBhcnRcclxuICAgIC8vIG9mIG91ciB0b3AtbGV2ZWwgTm9kZSdzIHRyYW5zZm9ybSkuXHJcbiAgICB0aGlzLmNvbnRhaW5lciA9IG5ldyBOb2RlKCk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCB0aGlzLmNvbnRhaW5lciApO1xyXG5cclxuICAgIC8vIEBwcml2YXRlIHtQYXRofSAtIFRoZSBjaGFpbi9zdHJpbmcgYmVoaW5kIHRoZSBiZWFkc1xyXG4gICAgdGhpcy5jaGFpbiA9IG5ldyBQYXRoKCBudWxsLCB7XHJcbiAgICAgIHN0cm9rZTogUHJvcG9ydGlvblBsYXlncm91bmRDb2xvcnMubmVja2xhY2VTdHJpbmdQcm9wZXJ0eSxcclxuICAgICAgbGluZVdpZHRoOiAyXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmNvbnRhaW5lci5hZGRDaGlsZCggdGhpcy5jaGFpbiApO1xyXG5cclxuICAgIC8vIEBwcml2YXRlIHtOb2RlfSAtIEhvbGRzIGFsbCBvZiB0aGUgYmVhZHNcclxuICAgIHRoaXMuYmVhZENvbnRhaW5lciA9IG5ldyBOb2RlKCk7XHJcbiAgICB0aGlzLmNvbnRhaW5lci5hZGRDaGlsZCggdGhpcy5iZWFkQ29udGFpbmVyICk7XHJcblxyXG4gICAgLy8gQHByaXZhdGUge0FycmF5LjxSb3VuZEJlYWROb2RlPn0gLSBBbHdheXMgZ3Jvd3MgdG8gbGF6aWx5IGNyZWF0ZSwgYW5kIHNldHMgdW51c2VkIG9uZXMgaW52aXNpYmxlLlxyXG4gICAgdGhpcy5yb3VuZEJlYWRzID0gW107XHJcblxyXG4gICAgLy8gQHByaXZhdGUge0FycmF5LjxTcXVhcmVCZWFkTm9kZT59IC0gQWx3YXlzIGdyb3dzIHRvIGxhemlseSBjcmVhdGUsIGFuZCBzZXRzIHVudXNlZCBvbmVzIGludmlzaWJsZS5cclxuICAgIHRoaXMuc3F1YXJlQmVhZHMgPSBbXTtcclxuXHJcbiAgICBsYXlvdXRQcm9wZXJ0eS5saW5rKCB0aGlzLnNldExheW91dC5iaW5kKCB0aGlzICkgKTtcclxuXHJcbiAgICB0aGlzLm11dGF0ZSggb3B0aW9ucyApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVidWlsZHMgdGhlIG5lY2tsYWNlIGRpc3BsYXkgdG8gc2hvdyB0aGUgZ2l2ZW4gbGF5b3V0LlxyXG4gICAqIEBwdWJsaWNcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7TmVja2xhY2VMYXlvdXR9IGxheW91dFxyXG4gICAqL1xyXG4gIHNldExheW91dCggbGF5b3V0ICkge1xyXG4gICAgY29uc3Qgcm91bmRCZWFkQ291bnQgPSBsYXlvdXQucm91bmRCZWFkQ291bnQ7XHJcbiAgICBjb25zdCBzcXVhcmVCZWFkQ291bnQgPSBsYXlvdXQuc3F1YXJlQmVhZENvdW50O1xyXG5cclxuICAgIC8vIE9ubHkgc2hvdyB0aGUgYmFja2dyb3VuZCBjaGFpbiBpZiB3ZSBoYXZlIGJlYWRzLlxyXG4gICAgdGhpcy5jaGFpbi52aXNpYmxlID0gcm91bmRCZWFkQ291bnQgPiAwIHx8IHNxdWFyZUJlYWRDb3VudCA+IDA7XHJcblxyXG4gICAgLy8gQWRkcyBiZWFkcyB1cCB0byB0aGUgYW1vdW50IHRoYXQgd2UgbmVlZCAoZG9uJ3QgbmVlZCB0byByZW1vdmUgZXh0cmFzLCB0aGV5IHdpbGwgYmUgc2V0IHRvIGludmlzaWJsZSkuXHJcbiAgICB3aGlsZSAoIHRoaXMucm91bmRCZWFkcy5sZW5ndGggPCByb3VuZEJlYWRDb3VudCApIHtcclxuICAgICAgY29uc3Qgcm91bmRCZWFkID0gbmV3IFJvdW5kQmVhZE5vZGUoKTtcclxuICAgICAgdGhpcy5iZWFkQ29udGFpbmVyLmFkZENoaWxkKCByb3VuZEJlYWQgKTtcclxuICAgICAgdGhpcy5yb3VuZEJlYWRzLnB1c2goIHJvdW5kQmVhZCApO1xyXG4gICAgfVxyXG4gICAgd2hpbGUgKCB0aGlzLnNxdWFyZUJlYWRzLmxlbmd0aCA8IHNxdWFyZUJlYWRDb3VudCApIHtcclxuICAgICAgY29uc3Qgc3F1YXJlQmVhZCA9IG5ldyBTcXVhcmVCZWFkTm9kZSggMCApO1xyXG4gICAgICB0aGlzLmJlYWRDb250YWluZXIuYWRkQ2hpbGQoIHNxdWFyZUJlYWQgKTtcclxuICAgICAgdGhpcy5zcXVhcmVCZWFkcy5wdXNoKCBzcXVhcmVCZWFkICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVG9nZ2xlIHZpc2liaWxpdGllcywgcmVwb3NpdGlvbmluZyBoaWRkZW4gYmVhZHMgc28gaXQgd29uJ3QgYWZmZWN0IG91ciBib3VuZHMuXHJcbiAgICBsZXQgaTtcclxuICAgIGZvciAoIGkgPSAwOyBpIDwgdGhpcy5yb3VuZEJlYWRzLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICBjb25zdCByb3VuZFZpc2libGUgPSBpIDwgcm91bmRCZWFkQ291bnQ7XHJcbiAgICAgIHRoaXMucm91bmRCZWFkc1sgaSBdLnZpc2libGUgPSBpIDwgcm91bmRCZWFkQ291bnQ7XHJcbiAgICAgIGlmICggIXJvdW5kVmlzaWJsZSApIHtcclxuICAgICAgICB0aGlzLnJvdW5kQmVhZHNbIGkgXS50cmFuc2xhdGlvbiA9IFZlY3RvcjIuWkVSTzsgLy8gRG9uJ3QgaGF2ZSBpdCBtZXNzIHdpdGggb3VyIGJvdW5kc1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3IgKCBpID0gMDsgaSA8IHRoaXMuc3F1YXJlQmVhZHMubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgIGNvbnN0IHNxdWFyZVZpc2libGUgPSBpIDwgc3F1YXJlQmVhZENvdW50O1xyXG4gICAgICB0aGlzLnNxdWFyZUJlYWRzWyBpIF0udmlzaWJsZSA9IHNxdWFyZVZpc2libGU7XHJcbiAgICAgIGlmICggIXNxdWFyZVZpc2libGUgKSB7XHJcbiAgICAgICAgdGhpcy5zcXVhcmVCZWFkc1sgaSBdLnRyYW5zbGF0aW9uID0gVmVjdG9yMi5aRVJPOyAvLyBEb24ndCBoYXZlIGl0IG1lc3Mgd2l0aCBvdXIgYm91bmRzXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBBZGp1c3QgdGhlIGNoYWluJ3Mgc2hhcGVcclxuICAgIHRoaXMuY2hhaW4uc2hhcGUgPSBsYXlvdXQuc2hhcGU7XHJcblxyXG4gICAgLy8gQWRqdXN0IHRoZSB0cmFuc2xhdGlvbiBvZiBldmVyeXRoaW5nXHJcbiAgICB0aGlzLmNvbnRhaW5lci50cmFuc2xhdGlvbiA9IGxheW91dC5jb250YWluZXJUcmFuc2xhdGlvbjtcclxuXHJcbiAgICAvLyBVcGRhdGUgdGhlIGJlYWRzXHJcbiAgICBmb3IgKCBpID0gMDsgaSA8IGxheW91dC5yb3VuZEJlYWRzLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICB0aGlzLnJvdW5kQmVhZHNbIGkgXS50cmFuc2xhdGlvbiA9IGxheW91dC5yb3VuZEJlYWRzWyBpIF0uY2VudGVyO1xyXG4gICAgfVxyXG4gICAgZm9yICggaSA9IDA7IGkgPCBsYXlvdXQuc3F1YXJlQmVhZHMubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgIHRoaXMuc3F1YXJlQmVhZHNbIGkgXS50cmFuc2xhdGlvbiA9IGxheW91dC5zcXVhcmVCZWFkc1sgaSBdLmNlbnRlcjtcclxuICAgICAgdGhpcy5zcXVhcmVCZWFkc1sgaSBdLnNldEJlYWRSb3RhdGlvbiggbGF5b3V0LnNxdWFyZUJlYWRzWyBpIF0uYW5nbGUgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgYSBzdGF0aWMgTmVja2xhY2UgZ3JhcGhpYy5cclxuICAgKiBAcHVibGljXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge251bWJlcn0gcm91bmRCZWFkQ291bnRcclxuICAgKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlQmVhZENvdW50XHJcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIG5vZGUgb3B0aW9uc1xyXG4gICAqL1xyXG4gIHN0YXRpYyBjcmVhdGVTdGF0aWNOZWNrbGFjZSggcm91bmRCZWFkQ291bnQsIHNxdWFyZUJlYWRDb3VudCwgb3B0aW9ucyApIHtcclxuICAgIHJldHVybiBuZXcgTmVja2xhY2VHcmFwaGljTm9kZSggbmV3IFByb3BlcnR5KCBOZWNrbGFjZUxheW91dC5nZXRMYXlvdXQoIHJvdW5kQmVhZENvdW50LCBzcXVhcmVCZWFkQ291bnQgKSApLCBvcHRpb25zICk7XHJcbiAgfVxyXG59XHJcblxyXG5wcm9wb3J0aW9uUGxheWdyb3VuZC5yZWdpc3RlciggJ05lY2tsYWNlR3JhcGhpY05vZGUnLCBOZWNrbGFjZUdyYXBoaWNOb2RlICk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBOZWNrbGFjZUdyYXBoaWNOb2RlOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsUUFBUSxNQUFNLG9DQUFvQztBQUN6RCxPQUFPQyxPQUFPLE1BQU0sa0NBQWtDO0FBQ3RELFNBQVNDLElBQUksRUFBRUMsSUFBSSxRQUFRLHNDQUFzQztBQUNqRSxPQUFPQyxvQkFBb0IsTUFBTSxrQ0FBa0M7QUFDbkUsT0FBT0MsY0FBYyxNQUFNLHdDQUF3QztBQUNuRSxPQUFPQywwQkFBMEIsTUFBTSxrQ0FBa0M7QUFDekUsT0FBT0MsYUFBYSxNQUFNLG9CQUFvQjtBQUM5QyxPQUFPQyxjQUFjLE1BQU0scUJBQXFCO0FBRWhELE1BQU1DLG1CQUFtQixTQUFTUCxJQUFJLENBQUM7RUFDckM7QUFDRjtBQUNBO0FBQ0E7RUFDRVEsV0FBV0EsQ0FBRUMsY0FBYyxFQUFFQyxPQUFPLEVBQUc7SUFDckMsS0FBSyxDQUFDLENBQUM7O0lBRVA7SUFDQTtJQUNBLElBQUksQ0FBQ0MsU0FBUyxHQUFHLElBQUlYLElBQUksQ0FBQyxDQUFDO0lBQzNCLElBQUksQ0FBQ1ksUUFBUSxDQUFFLElBQUksQ0FBQ0QsU0FBVSxDQUFDOztJQUUvQjtJQUNBLElBQUksQ0FBQ0UsS0FBSyxHQUFHLElBQUlaLElBQUksQ0FBRSxJQUFJLEVBQUU7TUFDM0JhLE1BQU0sRUFBRVYsMEJBQTBCLENBQUNXLHNCQUFzQjtNQUN6REMsU0FBUyxFQUFFO0lBQ2IsQ0FBRSxDQUFD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