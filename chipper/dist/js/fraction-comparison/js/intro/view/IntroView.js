// Copyright 2013-2022, University of Colorado Boulder

//TODO: redo layout so things float to the sides (and bottom)
/**
 * View for the 'Intro' screen.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */

import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import Bounds2 from '../../../../dot/js/Bounds2.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import ScreenView from '../../../../joist/js/ScreenView.js';
import ResetAllButton from '../../../../scenery-phet/js/buttons/ResetAllButton.js';
import { Rectangle } from '../../../../scenery/js/imports.js';
import Checkbox from '../../../../sun/js/Checkbox.js';
import fractionComparison from '../../fractionComparison.js';
import ComparisonRegion from './ComparisonRegion.js';
import FractionNode from './FractionNode.js';
import HorizontalBarContainerNode from './HorizontalBarContainerNode.js';
import LeftRightSpinner from './LeftRightSpinner.js';
import NumberLineNode from './NumberLineNode.js';
import RepresentationPanel from './RepresentationPanel.js';
class IntroView extends ScreenView {
  /**
   * @param {IntroModel} model
   */
  constructor(model) {
    super({
      layoutBounds: new Bounds2(0, 0, 768, 504)
    });

    //Representation panel at the bottom center
    const representationPanel = new RepresentationPanel(model.representationProperty, {
      bottom: this.layoutBounds.maxY - 5,
      centerX: this.layoutBounds.centerX
    });
    this.addChild(representationPanel);
    const numberLineNode = new NumberLineNode(model.leftFractionModel, model.rightFractionModel, model.numberLineVisibleProperty, {
      centerX: this.layoutBounds.centerX,
      bottom: representationPanel.top - 70
    });
    this.addChild(numberLineNode);

    //TODO: Manually tuned to be centered on the number line part.  Could be affected based on the font, would be superior to lay out based on global bounds of number line
    this.addChild(new Checkbox(model.numberLineVisibleProperty, new Rectangle(0, 0, 0, 0), {
      top: numberLineNode.bounds.maxY + 7,
      centerX: numberLineNode.centerX,
      scale: 1.15
    }));
    this.addChild(new ResetAllButton({
      listener: model.reset.bind(model),
      radius: 24,
      right: this.layoutBounds.maxX - 2,
      bottom: this.layoutBounds.maxY - 2
    }));

    //To make it possible to drag pieces from the left over pieces in the right, we cannot just make subtrees for the left and right views
    //So model the pieces individually

    const distanceFromSideToFraction = 50;
    const leftFractionNode = new FractionNode(model.leftFractionModel.numeratorProperty, model.leftFractionModel.denominatorProperty, {
      left: distanceFromSideToFraction,
      bottom: representationPanel.bounds.minY
    });
    this.addChild(leftFractionNode);
    const rightFractionNode = new FractionNode(model.rightFractionModel.numeratorProperty, model.rightFractionModel.denominatorProperty, {
      right: this.layoutBounds.maxX - distanceFromSideToFraction,
      bottom: representationPanel.bounds.minY
    });
    this.addChild(rightFractionNode);
    const compareButtonPressed = () => {
      leftHorizontalBarContainerNode.animateToComparison();
      rightHorizontalBarContainerNode.animateToComparison();
    };
    const separateButtonPressed = () => {
      leftHorizontalBarContainerNode.animateToStart();
      rightHorizontalBarContainerNode.animateToStart();
    };
    const comparisonRegion = new ComparisonRegion(compareButtonPressed, separateButtonPressed, model.bothCompareProperty, model.eitherCompareProperty, {
      top: 10,
      centerX: this.layoutBounds.centerX
    });
    this.addChild(comparisonRegion);

    //Containers
    const leftHorizontalBarContainerNode = new HorizontalBarContainerNode(model.leftFractionModel, '#61c9e4', model.leftFractionModel.stateProperty, model.leftFractionModel.animatingProperty, model.leftFractionModel.divisionsProperty, true, (width, height) => new Vector2(width / 2 + 10, comparisonRegion.bounds.centerY), (width, height) => new Vector2(this.layoutBounds.centerX, comparisonRegion.bounds.centerY));
    const rightHorizontalBarContainerNode = new HorizontalBarContainerNode(model.rightFractionModel, '#dc528d', model.rightFractionModel.stateProperty, model.rightFractionModel.animatingProperty, model.rightFractionModel.divisionsProperty, true, (width, height) => new Vector2(this.layoutBounds.maxX - width / 2 - 10, comparisonRegion.bounds.centerY), (width, height) => new Vector2(this.layoutBounds.centerX, comparisonRegion.bounds.centerY));

    //Show the shadows right behind the originals, and don't let the shadows be moved
    const leftHorizontalBarContainerNodeShadow = new HorizontalBarContainerNode(model.leftFractionModel, '#61c9e4', model.leftFractionModel.stateProperty, model.leftFractionModel.animatingProperty, model.leftFractionModel.divisionsProperty, false, (width, height) => new Vector2(width / 2 + 10, comparisonRegion.bounds.centerY), (width, height) => new Vector2(this.layoutBounds.centerX, comparisonRegion.bounds.centerY));
    const rightHorizontalBarContainerNodeShadow = new HorizontalBarContainerNode(model.rightFractionModel, '#dc528d', model.rightFractionModel.stateProperty, model.rightFractionModel.animatingProperty, model.rightFractionModel.divisionsProperty, false, (width, height) => new Vector2(this.layoutBounds.maxX - width / 2 - 10, comparisonRegion.bounds.centerY), (width, height) => new Vector2(this.layoutBounds.centerX, comparisonRegion.bounds.centerY));
    this.addChild(leftHorizontalBarContainerNodeShadow);
    this.addChild(rightHorizontalBarContainerNodeShadow);
    this.addChild(leftHorizontalBarContainerNode);
    this.addChild(rightHorizontalBarContainerNode);

    //The dotted line to show if the "underneath" (z-order) value is too small to see.
    const lineWidth = 3;
    const leftDottedLineContainerNode = new Rectangle(0, 0, 180, 100, {
      stroke: '#61c9e4',
      lineWidth: lineWidth,
      lineDash: [11, 7]
    });
    model.leftFractionModel.fractionProperty.link(value => {
      leftDottedLineContainerNode.setRectWidth(value * 180);
    });
    leftDottedLineContainerNode.left = leftHorizontalBarContainerNode.comparePosition.x - leftHorizontalBarContainerNode.width / 2 - 1;
    leftDottedLineContainerNode.centerY = leftHorizontalBarContainerNode.comparePosition.y;
    const leftValueSmallerProperty = new DerivedProperty([model.leftFractionModel.fractionProperty, model.rightFractionModel.fractionProperty], (leftFraction, rightFraction) => leftFraction <= rightFraction);

    //Only show the dotted line for the "underneath" shape after animation is complete
    const eitherAnimating = new DerivedProperty([model.leftFractionModel.animatingProperty, model.rightFractionModel.animatingProperty], (leftAnimating, rightAnimating) => leftAnimating || rightAnimating);
    const leftDottedLineContainerVisibleProperty = new DerivedProperty([model.bothCompareProperty, leftValueSmallerProperty, eitherAnimating], (bothCompare, leftValueSmaller, eitherAnimating) => bothCompare && leftValueSmaller && !eitherAnimating);
    leftDottedLineContainerVisibleProperty.linkAttribute(leftDottedLineContainerNode, 'visible');
    this.addChild(leftDottedLineContainerNode);
    const leftDivisionsProperty = model.leftFractionModel.divisionsProperty;
    const leftDivisionSpinner = new LeftRightSpinner(leftDivisionsProperty, new DerivedProperty([leftDivisionsProperty], leftDivisions => leftDivisions > 1), new DerivedProperty([leftDivisionsProperty], leftDivisions => leftDivisions < 10), {
      centerX: leftHorizontalBarContainerNode.centerX,
      top: leftHorizontalBarContainerNode.bottom + 6
    });
    this.addChild(leftDivisionSpinner);
    const rightDivisionsProperty = model.rightFractionModel.divisionsProperty;
    const rightDivisionSpinner = new LeftRightSpinner(rightDivisionsProperty, new DerivedProperty([rightDivisionsProperty], rightDivisions => rightDivisions > 1), new DerivedProperty([rightDivisionsProperty], rightDivisions => rightDivisions < 10), {
      centerX: rightHorizontalBarContainerNode.centerX,
      top: rightHorizontalBarContainerNode.bottom + 6
    });
    this.addChild(rightDivisionSpinner);

    //Move the containers to the start position on "reset all", see #30
    model.leftFractionModel.stateProperty.link(state => {
      if (state === 'start') {
        leftHorizontalBarContainerNode.animateToStart();
      }
    });
    model.rightFractionModel.stateProperty.link(state => {
      if (state === 'start') {
        rightHorizontalBarContainerNode.animateToStart();
      }
    });
  }
}
fractionComparison.register('IntroView', IntroView);
export default IntroView;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJCb3VuZHMyIiwiVmVjdG9yMiIsIlNjcmVlblZpZXciLCJSZXNldEFsbEJ1dHRvbiIsIlJlY3RhbmdsZSIsIkNoZWNrYm94IiwiZnJhY3Rpb25Db21wYXJpc29uIiwiQ29tcGFyaXNvblJlZ2lvbiIsIkZyYWN0aW9uTm9kZSIsIkhvcml6b250YWxCYXJDb250YWluZXJOb2RlIiwiTGVmdFJpZ2h0U3Bpbm5lciIsIk51bWJlckxpbmVOb2RlIiwiUmVwcmVzZW50YXRpb25QYW5lbCIsIkludHJvVmlldyIsImNvbnN0cnVjdG9yIiwibW9kZWwiLCJsYXlvdXRCb3VuZHMiLCJyZXByZXNlbnRhdGlvblBhbmVsIiwicmVwcmVzZW50YXRpb25Qcm9wZXJ0eSIsImJvdHRvbSIsIm1heFkiLCJjZW50ZXJYIiwiYWRkQ2hpbGQiLCJudW1iZXJMaW5lTm9kZSIsImxlZnRGcmFjdGlvbk1vZGVsIiwicmlnaHRGcmFjdGlvbk1vZGVsIiwibnVtYmVyTGluZVZpc2libGVQcm9wZXJ0eSIsInRvcCIsImJvdW5kcyIsInNjYWxlIiwibGlzdGVuZXIiLCJyZXNldCIsImJpbmQiLCJyYWRpdXMiLCJyaWdodCIsIm1heFgiLCJkaXN0YW5jZUZyb21TaWRlVG9GcmFjdGlvbiIsImxlZnRGcmFjdGlvbk5vZGUiLCJudW1lcmF0b3JQcm9wZXJ0eSIsImRlbm9taW5hdG9yUHJvcGVydHkiLCJsZWZ0IiwibWluWSIsInJpZ2h0RnJhY3Rpb25Ob2RlIiwiY29tcGFyZUJ1dHRvblByZXNzZWQiLCJsZWZ0SG9yaXpvbnRhbEJhckNvbnRhaW5lck5vZGUiLCJhbmltYXRlVG9Db21wYXJpc29uIiwicmlnaHRIb3Jpem9udGFsQmFyQ29udGFpbmVyTm9kZSIsInNlcGFyYXRlQnV0dG9uUHJlc3NlZCIsImFuaW1hdGVUb1N0YXJ0IiwiY29tcGFyaXNvblJlZ2lvbiIsImJvdGhDb21wYXJlUHJvcGVydHkiLCJlaXRoZXJDb21wYXJlUHJvcGVydHkiLCJzdGF0ZVByb3BlcnR5IiwiYW5pbWF0aW5nUHJvcGVydHkiLCJkaXZpc2lvbnNQcm9wZXJ0eSIsIndpZHRoIiwiaGVpZ2h0IiwiY2VudGVyWSIsImxlZnRIb3Jpem9udGFsQmFyQ29udGFpbmVyTm9kZVNoYWRvdyIsInJpZ2h0SG9yaXpvbnRhbEJhckNvbnRhaW5lck5vZGVTaGFkb3ciLCJsaW5lV2lkdGgiLCJsZWZ0RG90dGVkTGluZUNvbnRhaW5lck5vZGUiLCJzdHJva2UiLCJsaW5lRGFzaCIsImZyYWN0aW9uUHJvcGVydHkiLCJsaW5rIiwidmFsdWUiLCJzZXRSZWN0V2lkdGgiLCJjb21wYXJlUG9zaXRpb24iLCJ4IiwieSIsImxlZnRWYWx1ZVNtYWxsZXJQcm9wZXJ0eSIsImxlZnRGcmFjdGlvbiIsInJpZ2h0RnJhY3Rpb24iLCJlaXRoZXJBbmltYXRpbmciLCJsZWZ0QW5pbWF0aW5nIiwicmlnaHRBbmltYXRpbmciLCJsZWZ0RG90dGVkTGluZUNvbnRhaW5lclZpc2libGVQcm9wZXJ0eSIsImJvdGhDb21wYXJlIiwibGVmdFZhbHVlU21hbGxlciIsImxpbmtBdHRyaWJ1dGUiLCJsZWZ0RGl2aXNpb25zUHJvcGVydHkiLCJsZWZ0RGl2aXNpb25TcGlubmVyIiwibGVmdERpdmlzaW9ucyIsInJpZ2h0RGl2aXNpb25zUHJvcGVydHkiLCJyaWdodERpdmlzaW9uU3Bpbm5lciIsInJpZ2h0RGl2aXNpb25zIiwic3RhdGUiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkludHJvVmlldy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxMy0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8vVE9ETzogcmVkbyBsYXlvdXQgc28gdGhpbmdzIGZsb2F0IHRvIHRoZSBzaWRlcyAoYW5kIGJvdHRvbSlcclxuLyoqXHJcbiAqIFZpZXcgZm9yIHRoZSAnSW50cm8nIHNjcmVlbi5cclxuICpcclxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcclxuICovXHJcblxyXG5pbXBvcnQgRGVyaXZlZFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvRGVyaXZlZFByb3BlcnR5LmpzJztcclxuaW1wb3J0IEJvdW5kczIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL0JvdW5kczIuanMnO1xyXG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVmVjdG9yMi5qcyc7XHJcbmltcG9ydCBTY3JlZW5WaWV3IGZyb20gJy4uLy4uLy4uLy4uL2pvaXN0L2pzL1NjcmVlblZpZXcuanMnO1xyXG5pbXBvcnQgUmVzZXRBbGxCdXR0b24gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL2J1dHRvbnMvUmVzZXRBbGxCdXR0b24uanMnO1xyXG5pbXBvcnQgeyBSZWN0YW5nbGUgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgQ2hlY2tib3ggZnJvbSAnLi4vLi4vLi4vLi4vc3VuL2pzL0NoZWNrYm94LmpzJztcclxuaW1wb3J0IGZyYWN0aW9uQ29tcGFyaXNvbiBmcm9tICcuLi8uLi9mcmFjdGlvbkNvbXBhcmlzb24uanMnO1xyXG5pbXBvcnQgQ29tcGFyaXNvblJlZ2lvbiBmcm9tICcuL0NvbXBhcmlzb25SZWdpb24uanMnO1xyXG5pbXBvcnQgRnJhY3Rpb25Ob2RlIGZyb20gJy4vRnJhY3Rpb25Ob2RlLmpzJztcclxuaW1wb3J0IEhvcml6b250YWxCYXJDb250YWluZXJOb2RlIGZyb20gJy4vSG9yaXpvbnRhbEJhckNvbnRhaW5lck5vZGUuanMnO1xyXG5pbXBvcnQgTGVmdFJpZ2h0U3Bpbm5lciBmcm9tICcuL0xlZnRSaWdodFNwaW5uZXIuanMnO1xyXG5pbXBvcnQgTnVtYmVyTGluZU5vZGUgZnJvbSAnLi9OdW1iZXJMaW5lTm9kZS5qcyc7XHJcbmltcG9ydCBSZXByZXNlbnRhdGlvblBhbmVsIGZyb20gJy4vUmVwcmVzZW50YXRpb25QYW5lbC5qcyc7XHJcblxyXG5jbGFzcyBJbnRyb1ZpZXcgZXh0ZW5kcyBTY3JlZW5WaWV3IHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtJbnRyb01vZGVsfSBtb2RlbFxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBtb2RlbCApIHtcclxuXHJcbiAgICBzdXBlciggeyBsYXlvdXRCb3VuZHM6IG5ldyBCb3VuZHMyKCAwLCAwLCA3NjgsIDUwNCApIH0gKTtcclxuXHJcbiAgICAvL1JlcHJlc2VudGF0aW9uIHBhbmVsIGF0IHRoZSBib3R0b20gY2VudGVyXHJcbiAgICBjb25zdCByZXByZXNlbnRhdGlvblBhbmVsID0gbmV3IFJlcHJlc2VudGF0aW9uUGFuZWwoIG1vZGVsLnJlcHJlc2VudGF0aW9uUHJvcGVydHksIHtcclxuICAgICAgYm90dG9tOiB0aGlzLmxheW91dEJvdW5kcy5tYXhZIC0gNSxcclxuICAgICAgY2VudGVyWDogdGhpcy5sYXlvdXRCb3VuZHMuY2VudGVyWFxyXG4gICAgfSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggcmVwcmVzZW50YXRpb25QYW5lbCApO1xyXG5cclxuICAgIGNvbnN0IG51bWJlckxpbmVOb2RlID0gbmV3IE51bWJlckxpbmVOb2RlKCBtb2RlbC5sZWZ0RnJhY3Rpb25Nb2RlbCwgbW9kZWwucmlnaHRGcmFjdGlvbk1vZGVsLCBtb2RlbC5udW1iZXJMaW5lVmlzaWJsZVByb3BlcnR5LFxyXG4gICAgICB7IGNlbnRlclg6IHRoaXMubGF5b3V0Qm91bmRzLmNlbnRlclgsIGJvdHRvbTogcmVwcmVzZW50YXRpb25QYW5lbC50b3AgLSA3MCB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBudW1iZXJMaW5lTm9kZSApO1xyXG5cclxuICAgIC8vVE9ETzogTWFudWFsbHkgdHVuZWQgdG8gYmUgY2VudGVyZWQgb24gdGhlIG51bWJlciBsaW5lIHBhcnQuICBDb3VsZCBiZSBhZmZlY3RlZCBiYXNlZCBvbiB0aGUgZm9udCwgd291bGQgYmUgc3VwZXJpb3IgdG8gbGF5IG91dCBiYXNlZCBvbiBnbG9iYWwgYm91bmRzIG9mIG51bWJlciBsaW5lXHJcbiAgICB0aGlzLmFkZENoaWxkKCBuZXcgQ2hlY2tib3goIG1vZGVsLm51bWJlckxpbmVWaXNpYmxlUHJvcGVydHksIG5ldyBSZWN0YW5nbGUoIDAsIDAsIDAsIDAgKSwge1xyXG4gICAgICB0b3A6IG51bWJlckxpbmVOb2RlLmJvdW5kcy5tYXhZICsgNyxcclxuICAgICAgY2VudGVyWDogbnVtYmVyTGluZU5vZGUuY2VudGVyWCxcclxuICAgICAgc2NhbGU6IDEuMTVcclxuICAgIH0gKSApO1xyXG5cclxuICAgIHRoaXMuYWRkQ2hpbGQoIG5ldyBSZXNldEFsbEJ1dHRvbigge1xyXG4gICAgICBsaXN0ZW5lcjogbW9kZWwucmVzZXQuYmluZCggbW9kZWwgKSxcclxuICAgICAgcmFkaXVzOiAyNCxcclxuICAgICAgcmlnaHQ6IHRoaXMubGF5b3V0Qm91bmRzLm1heFggLSAyLFxyXG4gICAgICBib3R0b206IHRoaXMubGF5b3V0Qm91bmRzLm1heFkgLSAyXHJcbiAgICB9ICkgKTtcclxuXHJcbiAgICAvL1RvIG1ha2UgaXQgcG9zc2libGUgdG8gZHJhZyBwaWVjZXMgZnJvbSB0aGUgbGVmdCBvdmVyIHBpZWNlcyBpbiB0aGUgcmlnaHQsIHdlIGNhbm5vdCBqdXN0IG1ha2Ugc3VidHJlZXMgZm9yIHRoZSBsZWZ0IGFuZCByaWdodCB2aWV3c1xyXG4gICAgLy9TbyBtb2RlbCB0aGUgcGllY2VzIGluZGl2aWR1YWxseVxyXG5cclxuICAgIGNvbnN0IGRpc3RhbmNlRnJvbVNpZGVUb0ZyYWN0aW9uID0gNTA7XHJcbiAgICBjb25zdCBsZWZ0RnJhY3Rpb25Ob2RlID0gbmV3IEZyYWN0aW9uTm9kZSggbW9kZWwubGVmdEZyYWN0aW9uTW9kZWwubnVtZXJhdG9yUHJvcGVydHksXHJcbiAgICAgIG1vZGVsLmxlZnRGcmFjdGlvbk1vZGVsLmRlbm9taW5hdG9yUHJvcGVydHksIHtcclxuICAgICAgICBsZWZ0OiBkaXN0YW5jZUZyb21TaWRlVG9GcmFjdGlvbixcclxuICAgICAgICBib3R0b206IHJlcHJlc2VudGF0aW9uUGFuZWwuYm91bmRzLm1pbllcclxuICAgICAgfSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggbGVmdEZyYWN0aW9uTm9kZSApO1xyXG5cclxuICAgIGNvbnN0IHJpZ2h0RnJhY3Rpb25Ob2RlID0gbmV3IEZyYWN0aW9uTm9kZSggbW9kZWwucmlnaHRGcmFjdGlvbk1vZGVsLm51bWVyYXRvclByb3BlcnR5LFxyXG4gICAgICBtb2RlbC5yaWdodEZyYWN0aW9uTW9kZWwuZGVub21pbmF0b3JQcm9wZXJ0eSwge1xyXG4gICAgICAgIHJpZ2h0OiB0aGlzLmxheW91dEJvdW5kcy5tYXhYIC0gZGlzdGFuY2VGcm9tU2lkZVRvRnJhY3Rpb24sXHJcbiAgICAgICAgYm90dG9tOiByZXByZXNlbnRhdGlvblBhbmVsLmJvdW5kcy5taW5ZXHJcbiAgICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHJpZ2h0RnJhY3Rpb25Ob2RlICk7XHJcblxyXG4gICAgY29uc3QgY29tcGFyZUJ1dHRvblByZXNzZWQgPSAoKSA9PiB7XHJcbiAgICAgIGxlZnRIb3Jpem9udGFsQmFyQ29udGFpbmVyTm9kZS5hbmltYXRlVG9Db21wYXJpc29uKCk7XHJcbiAgICAgIHJpZ2h0SG9yaXpvbnRhbEJhckNvbnRhaW5lck5vZGUuYW5pbWF0ZVRvQ29tcGFyaXNvbigpO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBzZXBhcmF0ZUJ1dHRvblByZXNzZWQgPSAoKSA9PiB7XHJcbiAgICAgIGxlZnRIb3Jpem9udGFsQmFyQ29udGFpbmVyTm9kZS5hbmltYXRlVG9TdGFydCgpO1xyXG4gICAgICByaWdodEhvcml6b250YWxCYXJDb250YWluZXJOb2RlLmFuaW1hdGVUb1N0YXJ0KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGNvbXBhcmlzb25SZWdpb24gPSBuZXcgQ29tcGFyaXNvblJlZ2lvbiggY29tcGFyZUJ1dHRvblByZXNzZWQsIHNlcGFyYXRlQnV0dG9uUHJlc3NlZCwgbW9kZWwuYm90aENvbXBhcmVQcm9wZXJ0eSwgbW9kZWwuZWl0aGVyQ29tcGFyZVByb3BlcnR5LCB7XHJcbiAgICAgIHRvcDogMTAsXHJcbiAgICAgIGNlbnRlclg6IHRoaXMubGF5b3V0Qm91bmRzLmNlbnRlclhcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIGNvbXBhcmlzb25SZWdpb24gKTtcclxuXHJcbiAgICAvL0NvbnRhaW5lcnNcclxuICAgIGNvbnN0IGxlZnRIb3Jpem9udGFsQmFyQ29udGFpbmVyTm9kZSA9IG5ldyBIb3Jpem9udGFsQmFyQ29udGFpbmVyTm9kZShcclxuICAgICAgbW9kZWwubGVmdEZyYWN0aW9uTW9kZWwsXHJcbiAgICAgICcjNjFjOWU0JyxcclxuICAgICAgbW9kZWwubGVmdEZyYWN0aW9uTW9kZWwuc3RhdGVQcm9wZXJ0eSxcclxuICAgICAgbW9kZWwubGVmdEZyYWN0aW9uTW9kZWwuYW5pbWF0aW5nUHJvcGVydHksXHJcbiAgICAgIG1vZGVsLmxlZnRGcmFjdGlvbk1vZGVsLmRpdmlzaW9uc1Byb3BlcnR5LFxyXG4gICAgICB0cnVlLFxyXG4gICAgICAoIHdpZHRoLCBoZWlnaHQgKSA9PiBuZXcgVmVjdG9yMiggd2lkdGggLyAyICsgMTAsIGNvbXBhcmlzb25SZWdpb24uYm91bmRzLmNlbnRlclkgKSwgKCB3aWR0aCwgaGVpZ2h0ICkgPT4gbmV3IFZlY3RvcjIoIHRoaXMubGF5b3V0Qm91bmRzLmNlbnRlclgsIGNvbXBhcmlzb25SZWdpb24uYm91bmRzLmNlbnRlclkgKSApO1xyXG5cclxuICAgIGNvbnN0IHJpZ2h0SG9yaXpvbnRhbEJhckNvbnRhaW5lck5vZGUgPSBuZXcgSG9yaXpvbnRhbEJhckNvbnRhaW5lck5vZGUoXHJcbiAgICAgIG1vZGVsLnJpZ2h0RnJhY3Rpb25Nb2RlbCxcclxuICAgICAgJyNkYzUyOGQnLFxyXG4gICAgICBtb2RlbC5yaWdodEZyYWN0aW9uTW9kZWwuc3RhdGVQcm9wZXJ0eSxcclxuICAgICAgbW9kZWwucmlnaHRGcmFjdGlvbk1vZGVsLmFuaW1hdGluZ1Byb3BlcnR5LFxyXG4gICAgICBtb2RlbC5yaWdodEZyYWN0aW9uTW9kZWwuZGl2aXNpb25zUHJvcGVydHksXHJcbiAgICAgIHRydWUsXHJcbiAgICAgICggd2lkdGgsIGhlaWdodCApID0+IG5ldyBWZWN0b3IyKCB0aGlzLmxheW91dEJvdW5kcy5tYXhYIC0gd2lkdGggLyAyIC0gMTAsIGNvbXBhcmlzb25SZWdpb24uYm91bmRzLmNlbnRlclkgKSwgKCB3aWR0aCwgaGVpZ2h0ICkgPT4gbmV3IFZlY3RvcjIoIHRoaXMubGF5b3V0Qm91bmRzLmNlbnRlclgsIGNvbXBhcmlzb25SZWdpb24uYm91bmRzLmNlbnRlclkgKSApO1xyXG5cclxuICAgIC8vU2hvdyB0aGUgc2hhZG93cyByaWdodCBiZWhpbmQgdGhlIG9yaWdpbmFscywgYW5kIGRvbid0IGxldCB0aGUgc2hhZG93cyBiZSBtb3ZlZFxyXG4gICAgY29uc3QgbGVmdEhvcml6b250YWxCYXJDb250YWluZXJOb2RlU2hhZG93ID0gbmV3IEhvcml6b250YWxCYXJDb250YWluZXJOb2RlKFxyXG4gICAgICBtb2RlbC5sZWZ0RnJhY3Rpb25Nb2RlbCxcclxuICAgICAgJyM2MWM5ZTQnLFxyXG4gICAgICBtb2RlbC5sZWZ0RnJhY3Rpb25Nb2RlbC5zdGF0ZVByb3BlcnR5LFxyXG4gICAgICBtb2RlbC5sZWZ0RnJhY3Rpb25Nb2RlbC5hbmltYXRpbmdQcm9wZXJ0eSxcclxuICAgICAgbW9kZWwubGVmdEZyYWN0aW9uTW9kZWwuZGl2aXNpb25zUHJvcGVydHksXHJcbiAgICAgIGZhbHNlLFxyXG4gICAgICAoIHdpZHRoLCBoZWlnaHQgKSA9PiBuZXcgVmVjdG9yMiggd2lkdGggLyAyICsgMTAsIGNvbXBhcmlzb25SZWdpb24uYm91bmRzLmNlbnRlclkgKSwgKCB3aWR0aCwgaGVpZ2h0ICkgPT4gbmV3IFZlY3RvcjIoIHRoaXMubGF5b3V0Qm91bmRzLmNlbnRlclgsIGNvbXBhcmlzb25SZWdpb24uYm91bmRzLmNlbnRlclkgKSApO1xyXG5cclxuICAgIGNvbnN0IHJpZ2h0SG9yaXpvbnRhbEJhckNvbnRhaW5lck5vZGVTaGFkb3cgPSBuZXcgSG9yaXpvbnRhbEJhckNvbnRhaW5lck5vZGUoXHJcbiAgICAgIG1vZGVsLnJpZ2h0RnJhY3Rpb25Nb2RlbCxcclxuICAgICAgJyNkYzUyOGQnLFxyXG4gICAgICBtb2RlbC5yaWdodEZyYWN0aW9uTW9kZWwuc3RhdGVQcm9wZXJ0eSxcclxuICAgICAgbW9kZWwucmlnaHRGcmFjdGlvbk1vZGVsLmFuaW1hdGluZ1Byb3BlcnR5LFxyXG4gICAgICBtb2RlbC5yaWdodEZyYWN0aW9uTW9kZWwuZGl2aXNpb25zUHJvcGVydHksXHJcbiAgICAgIGZhbHNlLFxyXG4gICAgICAoIHdpZHRoLCBoZWlnaHQgKSA9PiBuZXcgVmVjdG9yMiggdGhpcy5sYXlvdXRCb3VuZHMubWF4WCAtIHdpZHRoIC8gMiAtIDEwLCBjb21wYXJpc29uUmVnaW9uLmJvdW5kcy5jZW50ZXJZICksICggd2lkdGgsIGhlaWdodCApID0+IG5ldyBWZWN0b3IyKCB0aGlzLmxheW91dEJvdW5kcy5jZW50ZXJYLCBjb21wYXJpc29uUmVnaW9uLmJvdW5kcy5jZW50ZXJZICkgKTtcclxuXHJcbiAgICB0aGlzLmFkZENoaWxkKCBsZWZ0SG9yaXpvbnRhbEJhckNvbnRhaW5lck5vZGVTaGFkb3cgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHJpZ2h0SG9yaXpvbnRhbEJhckNvbnRhaW5lck5vZGVTaGFkb3cgKTtcclxuXHJcbiAgICB0aGlzLmFkZENoaWxkKCBsZWZ0SG9yaXpvbnRhbEJhckNvbnRhaW5lck5vZGUgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHJpZ2h0SG9yaXpvbnRhbEJhckNvbnRhaW5lck5vZGUgKTtcclxuXHJcbiAgICAvL1RoZSBkb3R0ZWQgbGluZSB0byBzaG93IGlmIHRoZSBcInVuZGVybmVhdGhcIiAoei1vcmRlcikgdmFsdWUgaXMgdG9vIHNtYWxsIHRvIHNlZS5cclxuICAgIGNvbnN0IGxpbmVXaWR0aCA9IDM7XHJcbiAgICBjb25zdCBsZWZ0RG90dGVkTGluZUNvbnRhaW5lck5vZGUgPSBuZXcgUmVjdGFuZ2xlKCAwLCAwLCAxODAsIDEwMCwge1xyXG4gICAgICBzdHJva2U6ICcjNjFjOWU0JyxcclxuICAgICAgbGluZVdpZHRoOiBsaW5lV2lkdGgsXHJcbiAgICAgIGxpbmVEYXNoOiBbIDExLCA3IF1cclxuICAgIH0gKTtcclxuICAgIG1vZGVsLmxlZnRGcmFjdGlvbk1vZGVsLmZyYWN0aW9uUHJvcGVydHkubGluayggdmFsdWUgPT4ge1xyXG4gICAgICBsZWZ0RG90dGVkTGluZUNvbnRhaW5lck5vZGUuc2V0UmVjdFdpZHRoKCB2YWx1ZSAqIDE4MCApO1xyXG4gICAgfSApO1xyXG5cclxuICAgIGxlZnREb3R0ZWRMaW5lQ29udGFpbmVyTm9kZS5sZWZ0ID0gbGVmdEhvcml6b250YWxCYXJDb250YWluZXJOb2RlLmNvbXBhcmVQb3NpdGlvbi54IC0gbGVmdEhvcml6b250YWxCYXJDb250YWluZXJOb2RlLndpZHRoIC8gMiAtIDE7XHJcbiAgICBsZWZ0RG90dGVkTGluZUNvbnRhaW5lck5vZGUuY2VudGVyWSA9IGxlZnRIb3Jpem9udGFsQmFyQ29udGFpbmVyTm9kZS5jb21wYXJlUG9zaXRpb24ueTtcclxuXHJcbiAgICBjb25zdCBsZWZ0VmFsdWVTbWFsbGVyUHJvcGVydHkgPSBuZXcgRGVyaXZlZFByb3BlcnR5KCBbIG1vZGVsLmxlZnRGcmFjdGlvbk1vZGVsLmZyYWN0aW9uUHJvcGVydHksIG1vZGVsLnJpZ2h0RnJhY3Rpb25Nb2RlbC5mcmFjdGlvblByb3BlcnR5IF0sXHJcbiAgICAgICggbGVmdEZyYWN0aW9uLCByaWdodEZyYWN0aW9uICkgPT4gbGVmdEZyYWN0aW9uIDw9IHJpZ2h0RnJhY3Rpb24gKTtcclxuXHJcbiAgICAvL09ubHkgc2hvdyB0aGUgZG90dGVkIGxpbmUgZm9yIHRoZSBcInVuZGVybmVhdGhcIiBzaGFwZSBhZnRlciBhbmltYXRpb24gaXMgY29tcGxldGVcclxuICAgIGNvbnN0IGVpdGhlckFuaW1hdGluZyA9IG5ldyBEZXJpdmVkUHJvcGVydHkoXHJcbiAgICAgIFsgbW9kZWwubGVmdEZyYWN0aW9uTW9kZWwuYW5pbWF0aW5nUHJvcGVydHksIG1vZGVsLnJpZ2h0RnJhY3Rpb25Nb2RlbC5hbmltYXRpbmdQcm9wZXJ0eSBdLFxyXG4gICAgICAoIGxlZnRBbmltYXRpbmcsIHJpZ2h0QW5pbWF0aW5nICkgPT4gbGVmdEFuaW1hdGluZyB8fCByaWdodEFuaW1hdGluZyApO1xyXG5cclxuICAgIGNvbnN0IGxlZnREb3R0ZWRMaW5lQ29udGFpbmVyVmlzaWJsZVByb3BlcnR5ID0gbmV3IERlcml2ZWRQcm9wZXJ0eSggWyBtb2RlbC5ib3RoQ29tcGFyZVByb3BlcnR5LCBsZWZ0VmFsdWVTbWFsbGVyUHJvcGVydHksIGVpdGhlckFuaW1hdGluZyBdLFxyXG4gICAgICAoIGJvdGhDb21wYXJlLCBsZWZ0VmFsdWVTbWFsbGVyLCBlaXRoZXJBbmltYXRpbmcgKSA9PiBib3RoQ29tcGFyZSAmJiBsZWZ0VmFsdWVTbWFsbGVyICYmICFlaXRoZXJBbmltYXRpbmcgKTtcclxuICAgIGxlZnREb3R0ZWRMaW5lQ29udGFpbmVyVmlzaWJsZVByb3BlcnR5LmxpbmtBdHRyaWJ1dGUoIGxlZnREb3R0ZWRMaW5lQ29udGFpbmVyTm9kZSwgJ3Zpc2libGUnICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCBsZWZ0RG90dGVkTGluZUNvbnRhaW5lck5vZGUgKTtcclxuXHJcbiAgICBjb25zdCBsZWZ0RGl2aXNpb25zUHJvcGVydHkgPSBtb2RlbC5sZWZ0RnJhY3Rpb25Nb2RlbC5kaXZpc2lvbnNQcm9wZXJ0eTtcclxuICAgIGNvbnN0IGxlZnREaXZpc2lvblNwaW5uZXIgPSBuZXcgTGVmdFJpZ2h0U3Bpbm5lciggbGVmdERpdmlzaW9uc1Byb3BlcnR5LFxyXG4gICAgICBuZXcgRGVyaXZlZFByb3BlcnR5KCBbIGxlZnREaXZpc2lvbnNQcm9wZXJ0eSBdLCBsZWZ0RGl2aXNpb25zID0+IGxlZnREaXZpc2lvbnMgPiAxICksXHJcbiAgICAgIG5ldyBEZXJpdmVkUHJvcGVydHkoIFsgbGVmdERpdmlzaW9uc1Byb3BlcnR5IF0sIGxlZnREaXZpc2lvbnMgPT4gbGVmdERpdmlzaW9ucyA8IDEwICksXHJcbiAgICAgIHsgY2VudGVyWDogbGVmdEhvcml6b250YWxCYXJDb250YWluZXJOb2RlLmNlbnRlclgsIHRvcDogbGVmdEhvcml6b250YWxCYXJDb250YWluZXJOb2RlLmJvdHRvbSArIDYgfSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggbGVmdERpdmlzaW9uU3Bpbm5lciApO1xyXG5cclxuICAgIGNvbnN0IHJpZ2h0RGl2aXNpb25zUHJvcGVydHkgPSBtb2RlbC5yaWdodEZyYWN0aW9uTW9kZWwuZGl2aXNpb25zUHJvcGVydHk7XHJcbiAgICBjb25zdCByaWdodERpdmlzaW9uU3Bpbm5lciA9IG5ldyBMZWZ0UmlnaHRTcGlubmVyKCByaWdodERpdmlzaW9uc1Byb3BlcnR5LFxyXG4gICAgICBuZXcgRGVyaXZlZFByb3BlcnR5KCBbIHJpZ2h0RGl2aXNpb25zUHJvcGVydHkgXSwgcmlnaHREaXZpc2lvbnMgPT4gcmlnaHREaXZpc2lvbnMgPiAxICksXHJcbiAgICAgIG5ldyBEZXJpdmVkUHJvcGVydHkoIFsgcmlnaHREaXZpc2lvbnNQcm9wZXJ0eSBdLCByaWdodERpdmlzaW9ucyA9PiByaWdodERpdmlzaW9ucyA8IDEwICksXHJcbiAgICAgIHsgY2VudGVyWDogcmlnaHRIb3Jpem9udGFsQmFyQ29udGFpbmVyTm9kZS5jZW50ZXJYLCB0b3A6IHJpZ2h0SG9yaXpvbnRhbEJhckNvbnRhaW5lck5vZGUuYm90dG9tICsgNiB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCByaWdodERpdmlzaW9uU3Bpbm5lciApO1xyXG5cclxuICAgIC8vTW92ZSB0aGUgY29udGFpbmVycyB0byB0aGUgc3RhcnQgcG9zaXRpb24gb24gXCJyZXNldCBhbGxcIiwgc2VlICMzMFxyXG4gICAgbW9kZWwubGVmdEZyYWN0aW9uTW9kZWwuc3RhdGVQcm9wZXJ0eS5saW5rKCBzdGF0ZSA9PiB7XHJcbiAgICAgIGlmICggc3RhdGUgPT09ICdzdGFydCcgKSB7XHJcbiAgICAgICAgbGVmdEhvcml6b250YWxCYXJDb250YWluZXJOb2RlLmFuaW1hdGVUb1N0YXJ0KCk7XHJcbiAgICAgIH1cclxuICAgIH0gKTtcclxuXHJcbiAgICBtb2RlbC5yaWdodEZyYWN0aW9uTW9kZWwuc3RhdGVQcm9wZXJ0eS5saW5rKCBzdGF0ZSA9PiB7XHJcbiAgICAgIGlmICggc3RhdGUgPT09ICdzdGFydCcgKSB7XHJcbiAgICAgICAgcmlnaHRIb3Jpem9udGFsQmFyQ29udGFpbmVyTm9kZS5hbmltYXRlVG9TdGFydCgpO1xyXG4gICAgICB9XHJcbiAgICB9ICk7XHJcbiAgfVxyXG59XHJcblxyXG5mcmFjdGlvbkNvbXBhcmlzb24ucmVnaXN0ZXIoICdJbnRyb1ZpZXcnLCBJbnRyb1ZpZXcgKTtcclxuZXhwb3J0IGRlZmF1bHQgSW50cm9WaWV3O1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxlQUFlLE1BQU0sd0NBQXdDO0FBQ3BFLE9BQU9DLE9BQU8sTUFBTSwrQkFBK0I7QUFDbkQsT0FBT0MsT0FBTyxNQUFNLCtCQUErQjtBQUNuRCxPQUFPQyxVQUFVLE1BQU0sb0NBQW9DO0FBQzNELE9BQU9DLGNBQWMsTUFBTSx1REFBdUQ7QUFDbEYsU0FBU0MsU0FBUyxRQUFRLG1DQUFtQztBQUM3RCxPQUFPQyxRQUFRLE1BQU0sZ0NBQWdDO0FBQ3JELE9BQU9DLGtCQUFrQixNQUFNLDZCQUE2QjtBQUM1RCxPQUFPQyxnQkFBZ0IsTUFBTSx1QkFBdUI7QUFDcEQsT0FBT0MsWUFBWSxNQUFNLG1CQUFtQjtBQUM1QyxPQUFPQywwQkFBMEIsTUFBTSxpQ0FBaUM7QUFDeEUsT0FBT0MsZ0JBQWdCLE1BQU0sdUJBQXVCO0FBQ3BELE9BQU9DLGNBQWMsTUFBTSxxQkFBcUI7QUFDaEQsT0FB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