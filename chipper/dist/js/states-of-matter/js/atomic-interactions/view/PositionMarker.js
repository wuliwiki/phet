// Copyright 2015-2022, University of Colorado Boulder

/**
 * A pseudo-3D sphere with a halo that appears during interactions.  This was highly leveraged from Manipulator.js
 * in the Graphing Lines simulation.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 * @author Siddhartha Chinthapally (Actual Concepts)
 */

import { Shape } from '../../../../kite/js/imports.js';
import merge from '../../../../phet-core/js/merge.js';
import ShadedSphereNode from '../../../../scenery-phet/js/ShadedSphereNode.js';
import { Circle, Color, Node, PressListener, RadialGradient } from '../../../../scenery/js/imports.js';
import Tandem from '../../../../tandem/js/Tandem.js';
import statesOfMatter from '../../statesOfMatter.js';
class PositionMarker extends Node {
  /**
   * @param {number} radius radius of the sphere
   * @param {Color|String} color base color used to shade the sphere
   * @param {Object} [options]
   */
  constructor(radius, color, options) {
    const mainColor = Color.toColor(color);
    options = merge({
      shadedSphereNodeOptions: {
        mainColor: mainColor,
        highlightColor: Color.WHITE,
        shadowColor: mainColor.darkerColor(),
        stroke: mainColor.darkerColor(),
        lineWidth: 1,
        cursor: 'pointer'
      },
      haloAlpha: 0.5,
      // alpha channel of the halo, 0.0 - 1.0
      cursor: 'pointer',
      tandem: Tandem.REQUIRED
    }, options);

    // @private
    const haloNode = new Circle(1.75 * radius, {
      fill: mainColor.withAlpha(options.haloAlpha),
      pickable: false,
      visible: false
    });
    const sphereNode = new ShadedSphereNode(2 * radius, options.shadedSphereNodeOptions);
    super({
      children: [haloNode, sphereNode],
      tandem: options.tandem,
      phetioInputEnabledPropertyInstrumented: true
    });

    // @private
    this.radius = radius;
    this.haloNode = haloNode;
    this.sphereNode = sphereNode;

    // halo visibility
    const highlightPressListener = new PressListener({
      attach: false,
      tandem: options.tandem.createTandem('pressListener')
    });
    this.addInputListener(highlightPressListener);
    this.haloNode.visibleProperty = highlightPressListener.isHighlightedProperty;

    // expand pointer areas
    this.mouseArea = this.touchArea = Shape.circle(0, 0, 1.5 * radius);
  }

  /**
   * @param color
   * @public
   */
  changeColor(color) {
    this.haloNode.fill = Color.toColor(color).withAlpha(0.5);
    const mainColor = Color.toColor(color);
    const highlightColor = Color.WHITE;
    const shadowColor = mainColor.darkerColor();
    this.sphereNode.fill = new RadialGradient(this.radius * -0.4, this.radius * -0.4, 0, this.radius * -0.4, this.radius * -0.4, 2 * this.radius).addColorStop(0, highlightColor).addColorStop(0.5, mainColor).addColorStop(1, shadowColor);
    this.sphereNode.stroke = shadowColor;
  }
}
statesOfMatter.register('PositionMarker', PositionMarker);
export default PositionMarker;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTaGFwZSIsIm1lcmdlIiwiU2hhZGVkU3BoZXJlTm9kZSIsIkNpcmNsZSIsIkNvbG9yIiwiTm9kZSIsIlByZXNzTGlzdGVuZXIiLCJSYWRpYWxHcmFkaWVudCIsIlRhbmRlbSIsInN0YXRlc09mTWF0dGVyIiwiUG9zaXRpb25NYXJrZXIiLCJjb25zdHJ1Y3RvciIsInJhZGl1cyIsImNvbG9yIiwib3B0aW9ucyIsIm1haW5Db2xvciIsInRvQ29sb3IiLCJzaGFkZWRTcGhlcmVOb2RlT3B0aW9ucyIsImhpZ2hsaWdodENvbG9yIiwiV0hJVEUiLCJzaGFkb3dDb2xvciIsImRhcmtlckNvbG9yIiwic3Ryb2tlIiwibGluZVdpZHRoIiwiY3Vyc29yIiwiaGFsb0FscGhhIiwidGFuZGVtIiwiUkVRVUlSRUQiLCJoYWxvTm9kZSIsImZpbGwiLCJ3aXRoQWxwaGEiLCJwaWNrYWJsZSIsInZpc2libGUiLCJzcGhlcmVOb2RlIiwiY2hpbGRyZW4iLCJwaGV0aW9JbnB1dEVuYWJsZWRQcm9wZXJ0eUluc3RydW1lbnRlZCIsImhpZ2hsaWdodFByZXNzTGlzdGVuZXIiLCJhdHRhY2giLCJjcmVhdGVUYW5kZW0iLCJhZGRJbnB1dExpc3RlbmVyIiwidmlzaWJsZVByb3BlcnR5IiwiaXNIaWdobGlnaHRlZFByb3BlcnR5IiwibW91c2VBcmVhIiwidG91Y2hBcmVhIiwiY2lyY2xlIiwiY2hhbmdlQ29sb3IiLCJhZGRDb2xvclN0b3AiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlBvc2l0aW9uTWFya2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE1LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIEEgcHNldWRvLTNEIHNwaGVyZSB3aXRoIGEgaGFsbyB0aGF0IGFwcGVhcnMgZHVyaW5nIGludGVyYWN0aW9ucy4gIFRoaXMgd2FzIGhpZ2hseSBsZXZlcmFnZWQgZnJvbSBNYW5pcHVsYXRvci5qc1xyXG4gKiBpbiB0aGUgR3JhcGhpbmcgTGluZXMgc2ltdWxhdGlvbi5cclxuICpcclxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcclxuICogQGF1dGhvciBTaWRkaGFydGhhIENoaW50aGFwYWxseSAoQWN0dWFsIENvbmNlcHRzKVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSAnLi4vLi4vLi4vLi4va2l0ZS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IG1lcmdlIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9tZXJnZS5qcyc7XHJcbmltcG9ydCBTaGFkZWRTcGhlcmVOb2RlIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9TaGFkZWRTcGhlcmVOb2RlLmpzJztcclxuaW1wb3J0IHsgQ2lyY2xlLCBDb2xvciwgTm9kZSwgUHJlc3NMaXN0ZW5lciwgUmFkaWFsR3JhZGllbnQgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uLy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xyXG5pbXBvcnQgc3RhdGVzT2ZNYXR0ZXIgZnJvbSAnLi4vLi4vc3RhdGVzT2ZNYXR0ZXIuanMnO1xyXG5cclxuY2xhc3MgUG9zaXRpb25NYXJrZXIgZXh0ZW5kcyBOb2RlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyByYWRpdXMgb2YgdGhlIHNwaGVyZVxyXG4gICAqIEBwYXJhbSB7Q29sb3J8U3RyaW5nfSBjb2xvciBiYXNlIGNvbG9yIHVzZWQgdG8gc2hhZGUgdGhlIHNwaGVyZVxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cclxuICAgKi9cclxuICBjb25zdHJ1Y3RvciggcmFkaXVzLCBjb2xvciwgb3B0aW9ucyApIHtcclxuICAgIGNvbnN0IG1haW5Db2xvciA9IENvbG9yLnRvQ29sb3IoIGNvbG9yICk7XHJcbiAgICBvcHRpb25zID0gbWVyZ2UoIHtcclxuICAgICAgc2hhZGVkU3BoZXJlTm9kZU9wdGlvbnM6IHtcclxuICAgICAgICBtYWluQ29sb3I6IG1haW5Db2xvcixcclxuICAgICAgICBoaWdobGlnaHRDb2xvcjogQ29sb3IuV0hJVEUsXHJcbiAgICAgICAgc2hhZG93Q29sb3I6IG1haW5Db2xvci5kYXJrZXJDb2xvcigpLFxyXG4gICAgICAgIHN0cm9rZTogbWFpbkNvbG9yLmRhcmtlckNvbG9yKCksXHJcbiAgICAgICAgbGluZVdpZHRoOiAxLFxyXG4gICAgICAgIGN1cnNvcjogJ3BvaW50ZXInXHJcbiAgICAgIH0sXHJcbiAgICAgIGhhbG9BbHBoYTogMC41LCAvLyBhbHBoYSBjaGFubmVsIG9mIHRoZSBoYWxvLCAwLjAgLSAxLjBcclxuICAgICAgY3Vyc29yOiAncG9pbnRlcicsXHJcbiAgICAgIHRhbmRlbTogVGFuZGVtLlJFUVVJUkVEXHJcbiAgICB9LCBvcHRpb25zICk7XHJcblxyXG4gICAgLy8gQHByaXZhdGVcclxuICAgIGNvbnN0IGhhbG9Ob2RlID0gbmV3IENpcmNsZSggMS43NSAqIHJhZGl1cywge1xyXG4gICAgICBmaWxsOiBtYWluQ29sb3Iud2l0aEFscGhhKCBvcHRpb25zLmhhbG9BbHBoYSApLFxyXG4gICAgICBwaWNrYWJsZTogZmFsc2UsXHJcbiAgICAgIHZpc2libGU6IGZhbHNlXHJcbiAgICB9ICk7XHJcbiAgICBjb25zdCBzcGhlcmVOb2RlID0gbmV3IFNoYWRlZFNwaGVyZU5vZGUoIDIgKiByYWRpdXMsIG9wdGlvbnMuc2hhZGVkU3BoZXJlTm9kZU9wdGlvbnMgKTtcclxuXHJcbiAgICBzdXBlcigge1xyXG4gICAgICBjaGlsZHJlbjogWyBoYWxvTm9kZSwgc3BoZXJlTm9kZSBdLFxyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLFxyXG4gICAgICBwaGV0aW9JbnB1dEVuYWJsZWRQcm9wZXJ0eUluc3RydW1lbnRlZDogdHJ1ZVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIEBwcml2YXRlXHJcbiAgICB0aGlzLnJhZGl1cyA9IHJhZGl1cztcclxuICAgIHRoaXMuaGFsb05vZGUgPSBoYWxvTm9kZTtcclxuICAgIHRoaXMuc3BoZXJlTm9kZSA9IHNwaGVyZU5vZGU7XHJcblxyXG4gICAgLy8gaGFsbyB2aXNpYmlsaXR5XHJcbiAgICBjb25zdCBoaWdobGlnaHRQcmVzc0xpc3RlbmVyID0gbmV3IFByZXNzTGlzdGVuZXIoIHsgYXR0YWNoOiBmYWxzZSwgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdwcmVzc0xpc3RlbmVyJyApIH0gKTtcclxuICAgIHRoaXMuYWRkSW5wdXRMaXN0ZW5lciggaGlnaGxpZ2h0UHJlc3NMaXN0ZW5lciApO1xyXG4gICAgdGhpcy5oYWxvTm9kZS52aXNpYmxlUHJvcGVydHkgPSBoaWdobGlnaHRQcmVzc0xpc3RlbmVyLmlzSGlnaGxpZ2h0ZWRQcm9wZXJ0eTtcclxuXHJcbiAgICAvLyBleHBhbmQgcG9pbnRlciBhcmVhc1xyXG4gICAgdGhpcy5tb3VzZUFyZWEgPSB0aGlzLnRvdWNoQXJlYSA9IFNoYXBlLmNpcmNsZSggMCwgMCwgMS41ICogcmFkaXVzICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0gY29sb3JcclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgY2hhbmdlQ29sb3IoIGNvbG9yICkge1xyXG4gICAgdGhpcy5oYWxvTm9kZS5maWxsID0gQ29sb3IudG9Db2xvciggY29sb3IgKS53aXRoQWxwaGEoIDAuNSApO1xyXG4gICAgY29uc3QgbWFpbkNvbG9yID0gQ29sb3IudG9Db2xvciggY29sb3IgKTtcclxuICAgIGNvbnN0IGhpZ2hsaWdodENvbG9yID0gQ29sb3IuV0hJVEU7XHJcbiAgICBjb25zdCBzaGFkb3dDb2xvciA9IG1haW5Db2xvci5kYXJrZXJDb2xvcigpO1xyXG4gICAgdGhpcy5zcGhlcmVOb2RlLmZpbGwgPSBuZXcgUmFkaWFsR3JhZGllbnQoIHRoaXMucmFkaXVzICogLTAuNCwgdGhpcy5yYWRpdXMgKiAtMC40LCAwLCB0aGlzLnJhZGl1cyAqIC0wLjQsXHJcbiAgICAgIHRoaXMucmFkaXVzICogLTAuNCwgMiAqIHRoaXMucmFkaXVzIClcclxuICAgICAgLmFkZENvbG9yU3RvcCggMCwgaGlnaGxpZ2h0Q29sb3IgKVxyXG4gICAgICAuYWRkQ29sb3JTdG9wKCAwLjUsIG1haW5Db2xvciApXHJcbiAgICAgIC5hZGRDb2xvclN0b3AoIDEsIHNoYWRvd0NvbG9yICk7XHJcbiAgICB0aGlzLnNwaGVyZU5vZGUuc3Ryb2tlID0gc2hhZG93Q29sb3I7XHJcbiAgfVxyXG59XHJcblxyXG5zdGF0ZXNPZk1hdHRlci5yZWdpc3RlciggJ1Bvc2l0aW9uTWFya2VyJywgUG9zaXRpb25NYXJrZXIgKTtcclxuZXhwb3J0IGRlZmF1bHQgUG9zaXRpb25NYXJrZXI7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxTQUFTQSxLQUFLLFFBQVEsZ0NBQWdDO0FBQ3RELE9BQU9DLEtBQUssTUFBTSxtQ0FBbUM7QUFDckQsT0FBT0MsZ0JBQWdCLE1BQU0saURBQWlEO0FBQzlFLFNBQVNDLE1BQU0sRUFBRUMsS0FBSyxFQUFFQyxJQUFJLEVBQUVDLGFBQWEsRUFBRUMsY0FBYyxRQUFRLG1DQUFtQztBQUN0RyxPQUFPQyxNQUFNLE1BQU0saUNBQWlDO0FBQ3BELE9BQU9DLGNBQWMsTUFBTSx5QkFBeUI7QUFFcEQsTUFBTUMsY0FBYyxTQUFTTCxJQUFJLENBQUM7RUFFaEM7QUFDRjtBQUNBO0FBQ0E7QUFDQTtFQUNFTSxXQUFXQSxDQUFFQyxNQUFNLEVBQUVDLEtBQUssRUFBRUMsT0FBTyxFQUFHO0lBQ3BDLE1BQU1DLFNBQVMsR0FBR1gsS0FBSyxDQUFDWSxPQUFPLENBQUVILEtBQU0sQ0FBQztJQUN4Q0MsT0FBTyxHQUFHYixLQUFLLENBQUU7TUFDZmdCLHVCQUF1QixFQUFFO1FBQ3ZCRixTQUFTLEVBQUVBLFNBQVM7UUFDcEJHLGNBQWMs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