// Copyright 2015-2022, University of Colorado Boulder

/**
 * This class extends the Interaction Potential diagram to allow the user to change the curve through direct interaction
 * with both the sigma and epsilon parameter of the LJ potential.
 *
 * @author John Blanco
 */

import Multilink from '../../../../axon/js/Multilink.js';
import Bounds2 from '../../../../dot/js/Bounds2.js';
import Utils from '../../../../dot/js/Utils.js';
import { Shape } from '../../../../kite/js/imports.js';
import merge from '../../../../phet-core/js/merge.js';
import ArrowNode from '../../../../scenery-phet/js/ArrowNode.js';
import { Color, DragListener, Line, Node, PressListener } from '../../../../scenery/js/imports.js';
import Tandem from '../../../../tandem/js/Tandem.js';
import AtomType from '../../common/model/AtomType.js';
import SOMConstants from '../../common/SOMConstants.js';
import InteractionPotentialCanvasNode from '../../common/view/InteractionPotentialCanvasNode.js';
import PotentialGraphNode from '../../common/view/PotentialGraphNode.js';
import SOMColors from '../../common/view/SOMColors.js';
import statesOfMatter from '../../statesOfMatter.js';

// constants
const RESIZE_HANDLE_SIZE_PROPORTION = 0.05; // Size of handles as function of node width.
const EPSILON_HANDLE_OFFSET_PROPORTION = 0.08; // Position of handle as function of node width.
const RESIZE_HANDLE_NORMAL_COLOR = '#32FE00';
const RESIZE_HANDLE_HIGHLIGHTED_COLOR = new Color(153, 255, 0);
const EPSILON_LINE_COLOR = RESIZE_HANDLE_NORMAL_COLOR;
const POTENTIAL_LINE_COLOR = new Color('red');
class InteractivePotentialGraph extends PotentialGraphNode {
  /**
   * @param {DualAtomModel} dualAtomModel - model of the simulation
   * @param {Object} [options] that can be passed on to the underlying node
   */
  constructor(dualAtomModel, options) {
    options = merge({
      tandem: Tandem.REQUIRED
    }, options);
    super(dualAtomModel.getSigma(), dualAtomModel.getEpsilon(), {
      includePositionMarker: true,
      allowInteraction: true,
      wide: true,
      zoomable: options.zoomable,
      tandem: options.tandem
    });

    // @private
    this.dualAtomModel = dualAtomModel;
    this.minXForAtom = Number.NEGATIVE_INFINITY;

    // @public, read-only
    this.interactionEnabled = false;

    // Create a convenience function for adding a drag handler that adjusts epsilon, this is done to avoid code duplication.
    const addEpsilonDragListener = (node, tandem) => {
      let startDragY;
      let startEpsilonValue;
      let currentDragY;
      node.addInputListener(new DragListener({
        start: event => {
          dualAtomModel.setMotionPaused(true);
          startDragY = node.globalToParentPoint(event.pointer.point).y;
          startEpsilonValue = dualAtomModel.getEpsilon();
        },
        drag: event => {
          currentDragY = node.globalToParentPoint(event.pointer.point).y;
          const dy = currentDragY - startDragY;
          dualAtomModel.adjustableAtomInteractionStrengthProperty.value = Utils.clamp(startEpsilonValue + dy / this.verticalScalingFactor / SOMConstants.K_BOLTZMANN, SOMConstants.MIN_EPSILON, SOMConstants.MAX_EPSILON);
        },
        end: () => {
          dualAtomModel.setMotionPaused(false);
        },
        tandem: tandem
      }));
    };

    // Add a parent node for the epsilon controls
    const epsilonLayer = new Node({
      tandem: this.interactiveControlsLayer.tandem.createTandem('epsilon')
    });
    this.interactiveControlsLayer.addChild(epsilonLayer);

    // Add the line that will indicate and control the value of epsilon.
    const epsilonLineLength = EPSILON_HANDLE_OFFSET_PROPORTION * this.widthOfGraph * 1.2;
    this.epsilonControls.line = new Line(-epsilonLineLength / 2, 0, epsilonLineLength, 0, {
      cursor: 'ns-resize',
      pickable: true,
      fill: EPSILON_LINE_COLOR,
      stroke: EPSILON_LINE_COLOR,
      lineWidth: 2,
      tandem: epsilonLayer.tandem.createTandem('epsilonLine'),
      phetioReadOnly: true
    });
    this.epsilonControls.line.touchArea = this.epsilonControls.line.localBounds.dilatedXY(8, 8);
    this.epsilonControls.line.mouseArea = this.epsilonControls.line.localBounds.dilatedXY(0, 4);
    addEpsilonDragListener(this.epsilonControls.line, this.epsilonControls.line.tandem.createTandem('dragListener'));
    epsilonLayer.addChild(this.epsilonControls.line);

    // Highlight this control when the user is hovering over it and/or using it.
    const epsilonLinePressListener = new PressListener({
      attach: false,
      tandem: Tandem.OPT_OUT
    });
    this.epsilonControls.line.addInputListener(epsilonLinePressListener);
    epsilonLinePressListener.isHighlightedProperty.link(isHighlighted => {
      this.epsilonControls.line.stroke = isHighlighted ? RESIZE_HANDLE_HIGHLIGHTED_COLOR : RESIZE_HANDLE_NORMAL_COLOR;
    });

    // Add the arrow nodes that will allow the user to control the epsilon value.
    const arrowNodeOptions = {
      headHeight: 10,
      headWidth: 18,
      tailWidth: 7,
      fill: RESIZE_HANDLE_NORMAL_COLOR,
      stroke: 'black',
      doubleHead: true,
      pickable: true,
      cursor: 'pointer',
      phetioReadOnly: true
    };
    this.epsilonControls.arrow = new ArrowNode(0, -RESIZE_HANDLE_SIZE_PROPORTION * this.widthOfGraph / 2, 0, RESIZE_HANDLE_SIZE_PROPORTION * this.widthOfGraph, merge({
      tandem: epsilonLayer.tandem.createTandem('epsilonArrow')
    }, arrowNodeOptions));
    const epsilonArrowPressListener = new PressListener({
      attach: false,
      tandem: Tandem.OPT_OUT
    });
    this.epsilonControls.arrow.addInputListener(epsilonArrowPressListener);
    epsilonArrowPressListener.isHighlightedProperty.link(isHighlighted => {
      this.epsilonControls.arrow.fill = isHighlighted ? RESIZE_HANDLE_HIGHLIGHTED_COLOR : RESIZE_HANDLE_NORMAL_COLOR;
    });
    epsilonLayer.addChild(this.epsilonControls.arrow);
    this.epsilonControls.arrow.touchArea = this.epsilonControls.arrow.localBounds.dilatedXY(3, 10);
    addEpsilonDragListener(this.epsilonControls.arrow, this.epsilonControls.arrow.tandem.createTandem('dragListener'));

    // add a layer for the sigma controls (for consistency with the epsilon controls)
    const sigmaLayer = new Node({
      tandem: this.interactiveControlsLayer.tandem.createTandem('sigma')
    });
    this.interactiveControlsLayer.addChild(sigmaLayer);

    // add sigma arrow node
    this.sigmaControls.arrow = new ArrowNode(-RESIZE_HANDLE_SIZE_PROPORTION * this.widthOfGraph / 2, 0, RESIZE_HANDLE_SIZE_PROPORTION * this.widthOfGraph * 1.2, 0, merge({
      tandem: sigmaLayer.tandem.createTandem('sigmaArrow')
    }, arrowNodeOptions));
    const sigmaArrowPressListener = new PressListener({
      attach: false,
      tandem: Tandem.OPT_OUT
    });
    this.sigmaControls.arrow.addInputListener(sigmaArrowPressListener);
    sigmaArrowPressListener.isHighlightedProperty.link(isHighlighted => {
      this.sigmaControls.arrow.fill = isHighlighted ? RESIZE_HANDLE_HIGHLIGHTED_COLOR : RESIZE_HANDLE_NORMAL_COLOR;
    });
    sigmaLayer.addChild(this.sigmaControls.arrow);
    this.sigmaControls.arrow.touchArea = this.sigmaControls.arrow.localBounds.dilatedXY(10, 5);

    // Add a drag listener for adjusting the sigma value, also known as the atom diameter.
    let startDragX;
    let currentDragX;
    let atomDiameterAtDragStart;
    this.sigmaControls.arrow.addInputListener(new DragListener({
      start: event => {
        dualAtomModel.setMotionPaused(true);
        startDragX = this.sigmaControls.arrow.globalToParentPoint(event.pointer.point).x;
        atomDiameterAtDragStart = dualAtomModel.adjustableAtomDiameterProperty.value;
      },
      drag: event => {
        currentDragX = this.sigmaControls.arrow.globalToParentPoint(event.pointer.point).x;
        const dx = currentDragX - startDragX;
        const scaleFactor = this.xRange / this.getGraphWidth();
        dualAtomModel.adjustableAtomDiameterProperty.value = Utils.clamp(atomDiameterAtDragStart + dx * scaleFactor, SOMConstants.MIN_SIGMA, SOMConstants.MAX_SIGMA);
      },
      end: () => {
        dualAtomModel.setMotionPaused(false);
      },
      tandem: this.sigmaControls.arrow.tandem.createTandem('dragListener')
    }));

    // Add the ability to grab and move the position marker. This node will need to be pickable so the user can grab it.
    this.positionMarker.setPickable(true);
    this.positionMarker.touchArea = Shape.circle(0, 0, 13);
    let positionMarkerStartDragX;
    let positionMarkerCurrentDragX;
    let atomStartXPosition;
    this.positionMarker.addInputListener(new DragListener({
      allowTouchSnag: true,
      start: event => {
        // Stop the particle from moving in the model.
        dualAtomModel.setMotionPaused(true);
        positionMarkerStartDragX = this.positionMarker.globalToParentPoint(event.pointer.point).x;
        atomStartXPosition = dualAtomModel.movableAtom.getX();
      },
      drag: event => {
        // Make sure the movement hint is now hidden, since the user has figured out what to drag.
        dualAtomModel.movementHintVisibleProperty.set(false);

        // Move the movable atom based on this drag event.
        const atom = dualAtomModel.movableAtom;
        positionMarkerCurrentDragX = this.positionMarker.globalToParentPoint(event.pointer.point).x;
        const xDifference = positionMarkerCurrentDragX - positionMarkerStartDragX;
        const scaleFactor = this.xRange / this.getGraphWidth();
        const newPosX = Math.max(atomStartXPosition + xDifference * scaleFactor, this.minXForAtom);
        atom.setPosition(newPosX, atom.getY());
      },
      end: () => {
        // Let the model move the particle again.  Note that this happens even if the motion was paused by some other
        // means.
        dualAtomModel.setMotionPaused(false);
      },
      tandem: this.positionMarker.tandem.createTandem('dragListener')
    }));

    // update the marker color when the movable atom changes
    dualAtomModel.movableAtom.atomTypeProperty.link(() => {
      this.positionMarker.changeColor(dualAtomModel.movableAtom.color);
    });
    Multilink.multilink([dualAtomModel.atomPairProperty, dualAtomModel.adjustableAtomInteractionStrengthProperty, dualAtomModel.adjustableAtomDiameterProperty], () => {
      this.setLjPotentialParameters(dualAtomModel.getSigma(), dualAtomModel.getEpsilon());
      this.updateInteractivityState();
      this.drawPotentialCurve();
    });
    this.interactionPotentialCanvasNode = new InteractionPotentialCanvasNode(this, {
      canvasBounds: new Bounds2(0, 0, this.graphWidth, this.graphHeight)
    });

    // Update interactivity state.
    this.updateInteractivityState();

    // Redraw the potential curve.
    this.drawPotentialCurve();

    // Add children
    this.addChild(this.horizontalAxisLabel);
    this.addChild(this.verticalAxisLabel);
    this.addChild(this.centerAxis);
    this.addChild(this.interactionPotentialCanvasNode);
    this.addChild(this.verticalAxis);
    this.addChild(this.horizontalAxis);
    this.addChild(this.ljPotentialGraph);

    // applying color scheme to lj graph elements
    this.verticalAxis.fill = SOMColors.ljGraphAxesAndGridColorProperty;
    this.horizontalAxis.fill = SOMColors.ljGraphAxesAndGridColorProperty;
    this.verticalAxis.stroke = SOMColors.ljGraphAxesAndGridColorProperty;
    this.horizontalAxis.stroke = SOMColors.ljGraphAxesAndGridColorProperty;
    this.epsilonArrow.fill = SOMColors.ljGraphAxesAndGridColorProperty;
    this.epsilonArrow.fill = SOMColors.ljGraphAxesAndGridColorProperty;
    this.sigmaArrow.fill = SOMColors.ljGraphAxesAndGridColorProperty;
    this.epsilonLabel.fill = SOMColors.ljGraphAxesAndGridColorProperty;
    this.sigmaLabel.fill = SOMColors.ljGraphAxesAndGridColorProperty;
    this.epsilonArrow.stroke = SOMColors.ljGraphAxesAndGridColorProperty;
    this.horizontalAxisLabel.fill = SOMColors.ljGraphAxesAndGridColorProperty;
    this.verticalAxisLabel.fill = SOMColors.ljGraphAxesAndGridColorProperty;
    this.mutate(options);
  }

  /**
   * This is an override of the method in the base class that draws the curve on the graph, and this override draws
   * the controls that allow the user to interact with the graph.
   * @override
   * @protected
   */
  drawPotentialCurve() {
    //  draw potential curve
    if (this.interactionPotentialCanvasNode !== undefined) {
      this.interactionPotentialCanvasNode.update(POTENTIAL_LINE_COLOR);
    }
  }

  /**
   * Set the lowest allowed X position to which the movable atom can be set.
   * @param {number} minXForAtom
   * @public
   */
  setMinXForAtom(minXForAtom) {
    this.minXForAtom = minXForAtom;
  }

  /**
   * @private
   */
  updateInteractivityState() {
    this.interactionEnabled = this.dualAtomModel.fixedAtom.getType() === AtomType.ADJUSTABLE;
  }

  /**
   * @override
   * @public
   */
  setMolecular(molecular) {
    super.setMolecular(molecular);

    // Move the horizontal label down a little bit from where the superclass puts it, otherwise adjustment arrow can
    // overlap it.
    this.horizontalAxisLabel.top += 8; // amount empirically determined
  }
}

statesOfMatter.register('InteractivePotentialGraph', InteractivePotentialGraph);
export default InteractivePotentialGraph;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNdWx0aWxpbmsiLCJCb3VuZHMyIiwiVXRpbHMiLCJTaGFwZSIsIm1lcmdlIiwiQXJyb3dOb2RlIiwiQ29sb3IiLCJEcmFnTGlzdGVuZXIiLCJMaW5lIiwiTm9kZSIsIlByZXNzTGlzdGVuZXIiLCJUYW5kZW0iLCJBdG9tVHlwZSIsIlNPTUNvbnN0YW50cyIsIkludGVyYWN0aW9uUG90ZW50aWFsQ2FudmFzTm9kZSIsIlBvdGVudGlhbEdyYXBoTm9kZSIsIlNPTUNvbG9ycyIsInN0YXRlc09mTWF0dGVyIiwiUkVTSVpFX0hBTkRMRV9TSVpFX1BST1BPUlRJT04iLCJFUFNJTE9OX0hBTkRMRV9PRkZTRVRfUFJPUE9SVElPTiIsIlJFU0laRV9IQU5ETEVfTk9STUFMX0NPTE9SIiwiUkVTSVpFX0hBTkRMRV9ISUdITElHSFRFRF9DT0xPUiIsIkVQU0lMT05fTElORV9DT0xPUiIsIlBPVEVOVElBTF9MSU5FX0NPTE9SIiwiSW50ZXJhY3RpdmVQb3RlbnRpYWxHcmFwaCIsImNvbnN0cnVjdG9yIiwiZHVhbEF0b21Nb2RlbCIsIm9wdGlvbnMiLCJ0YW5kZW0iLCJSRVFVSVJFRCIsImdldFNpZ21hIiwiZ2V0RXBzaWxvbiIsImluY2x1ZGVQb3NpdGlvbk1hcmtlciIsImFsbG93SW50ZXJhY3Rpb24iLCJ3aWRlIiwiem9vbWFibGUiLCJtaW5YRm9yQXRvbSIsIk51bWJlciIsIk5FR0FUSVZFX0lORklOSVRZIiwiaW50ZXJhY3Rpb25FbmFibGVkIiwiYWRkRXBzaWxvbkRyYWdMaXN0ZW5lciIsIm5vZGUiLCJzdGFydERyYWdZIiwic3RhcnRFcHNpbG9uVmFsdWUiLCJjdXJyZW50RHJhZ1kiLCJhZGRJbnB1dExpc3RlbmVyIiwic3RhcnQiLCJldmVudCIsInNldE1vdGlvblBhdXNlZCIsImdsb2JhbFRvUGFyZW50UG9pbnQiLCJwb2ludGVyIiwicG9pbnQiLCJ5IiwiZHJhZyIsImR5IiwiYWRqdXN0YWJsZUF0b21JbnRlcmFjdGlvblN0cmVuZ3RoUHJvcGVydHkiLCJ2YWx1ZSIsImNsYW1wIiwidmVydGljYWxTY2FsaW5nRmFjdG9yIiwiS19CT0xUWk1BTk4iLCJNSU5fRVBTSUxPTiIsIk1BWF9FUFNJTE9OIiwiZW5kIiwiZXBzaWxvbkxheWVyIiwiaW50ZXJhY3RpdmVDb250cm9sc0xheWVyIiwiY3JlYXRlVGFuZGVtIiwiYWRkQ2hpbGQiLCJlcHNpbG9uTGluZUxlbmd0aCIsIndpZHRoT2ZHcmFwaCIsImVwc2lsb25Db250cm9scyIsImxpbmUiLCJjdXJzb3IiLCJwaWNrYWJsZSIsImZpbGwiLCJzdHJva2UiLCJsaW5lV2lkdGgiLCJwaGV0aW9SZWFkT25seSIsInRvdWNoQXJlYSIsImxvY2FsQm91bmRzIiwiZGlsYXRlZFhZIiwibW91c2VBcmVhIiwiZXBzaWxvbkxpbmVQcmVzc0xpc3RlbmVyIiwiYXR0YWNoIiwiT1BUX09VVCIsImlzSGlnaGxpZ2h0ZWRQcm9wZXJ0eSIsImxpbmsiLCJpc0hpZ2hsaWdodGVkIiwiYXJyb3dOb2RlT3B0aW9ucyIsImhlYWRIZWlnaHQiLCJoZWFkV2lkdGgiLCJ0YWlsV2lkdGgiLCJkb3VibGVIZWFkIiwiYXJyb3ciLCJlcHNpbG9uQXJyb3dQcmVzc0xpc3RlbmVyIiwic2lnbWFMYXllciIsInNpZ21hQ29udHJvbHMiLCJzaWdtYUFycm93UHJlc3NMaXN0ZW5lciIsInN0YXJ0RHJhZ1giLCJjdXJyZW50RHJhZ1giLCJhdG9tRGlhbWV0ZXJBdERyYWdTdGFydCIsIngiLCJhZGp1c3RhYmxlQXRvbURpYW1ldGVyUHJvcGVydHkiLCJkeCIsInNjYWxlRmFjdG9yIiwieFJhbmdlIiwiZ2V0R3JhcGhXaWR0aCIsIk1JTl9TSUdNQSIsIk1BWF9TSUdNQSIsInBvc2l0aW9uTWFya2VyIiwic2V0UGlja2FibGUiLCJjaXJjbGUiLCJwb3NpdGlvbk1hcmtlclN0YXJ0RHJhZ1giLCJwb3NpdGlvbk1hcmtlckN1cnJlbnREcmFnWCIsImF0b21TdGFydFhQb3NpdGlvbiIsImFsbG93VG91Y2hTbmFnIiwibW92YWJsZUF0b20iLCJnZXRYIiwibW92ZW1lbnRIaW50VmlzaWJsZVByb3BlcnR5Iiwic2V0IiwiYXRvbSIsInhEaWZmZXJlbmNlIiwibmV3UG9zWCIsIk1hdGgiLCJtYXgiLCJzZXRQb3NpdGlvbiIsImdldFkiLCJhdG9tVHlwZVByb3BlcnR5IiwiY2hhbmdlQ29sb3IiLCJjb2xvciIsIm11bHRpbGluayIsImF0b21QYWlyUHJvcGVydHkiLCJzZXRMalBvdGVudGlhbFBhcmFtZXRlcnMiLCJ1cGRhdGVJbnRlcmFjdGl2aXR5U3RhdGUiLCJkcmF3UG90ZW50aWFsQ3VydmUiLCJpbnRlcmFjdGlvblBvdGVudGlhbENhbnZhc05vZGUiLCJjYW52YXNCb3VuZHMiLCJncmFwaFdpZHRoIiwiZ3JhcGhIZWlnaHQiLCJob3Jpem9udGFsQXhpc0xhYmVsIiwidmVydGljYWxBeGlzTGFiZWwiLCJjZW50ZXJBeGlzIiwidmVydGljYWxBeGlzIiwiaG9yaXpvbnRhbEF4aXMiLCJsalBvdGVudGlhbEdyYXBoIiwibGpHcmFwaEF4ZXNBbmRHcmlkQ29sb3JQcm9wZXJ0eSIsImVwc2lsb25BcnJvdyIsInNpZ21hQXJyb3ciLCJlcHNpbG9uTGFiZWwiLCJzaWdtYUxhYmVsIiwibXV0YXRlIiwidW5kZWZpbmVkIiwidXBkYXRlIiwic2V0TWluWEZvckF0b20iLCJmaXhlZEF0b20iLCJnZXRUeXBlIiwiQURKVVNUQUJMRSIsInNldE1vbGVjdWxhciIsIm1vbGVjdWxhciIsInRvcCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiSW50ZXJhY3RpdmVQb3RlbnRpYWxHcmFwaC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNS0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBUaGlzIGNsYXNzIGV4dGVuZHMgdGhlIEludGVyYWN0aW9uIFBvdGVudGlhbCBkaWFncmFtIHRvIGFsbG93IHRoZSB1c2VyIHRvIGNoYW5nZSB0aGUgY3VydmUgdGhyb3VnaCBkaXJlY3QgaW50ZXJhY3Rpb25cclxuICogd2l0aCBib3RoIHRoZSBzaWdtYSBhbmQgZXBzaWxvbiBwYXJhbWV0ZXIgb2YgdGhlIExKIHBvdGVudGlhbC5cclxuICpcclxuICogQGF1dGhvciBKb2huIEJsYW5jb1xyXG4gKi9cclxuXHJcbmltcG9ydCBNdWx0aWxpbmsgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9NdWx0aWxpbmsuanMnO1xyXG5pbXBvcnQgQm91bmRzMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvQm91bmRzMi5qcyc7XHJcbmltcG9ydCBVdGlscyBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvVXRpbHMuanMnO1xyXG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gJy4uLy4uLy4uLy4uL2tpdGUvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBtZXJnZSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvbWVyZ2UuanMnO1xyXG5pbXBvcnQgQXJyb3dOb2RlIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9BcnJvd05vZGUuanMnO1xyXG5pbXBvcnQgeyBDb2xvciwgRHJhZ0xpc3RlbmVyLCBMaW5lLCBOb2RlLCBQcmVzc0xpc3RlbmVyIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IFRhbmRlbSBmcm9tICcuLi8uLi8uLi8uLi90YW5kZW0vanMvVGFuZGVtLmpzJztcclxuaW1wb3J0IEF0b21UeXBlIGZyb20gJy4uLy4uL2NvbW1vbi9tb2RlbC9BdG9tVHlwZS5qcyc7XHJcbmltcG9ydCBTT01Db25zdGFudHMgZnJvbSAnLi4vLi4vY29tbW9uL1NPTUNvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBJbnRlcmFjdGlvblBvdGVudGlhbENhbnZhc05vZGUgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvSW50ZXJhY3Rpb25Qb3RlbnRpYWxDYW52YXNOb2RlLmpzJztcclxuaW1wb3J0IFBvdGVudGlhbEdyYXBoTm9kZSBmcm9tICcuLi8uLi9jb21tb24vdmlldy9Qb3RlbnRpYWxHcmFwaE5vZGUuanMnO1xyXG5pbXBvcnQgU09NQ29sb3JzIGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L1NPTUNvbG9ycy5qcyc7XHJcbmltcG9ydCBzdGF0ZXNPZk1hdHRlciBmcm9tICcuLi8uLi9zdGF0ZXNPZk1hdHRlci5qcyc7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgUkVTSVpFX0hBTkRMRV9TSVpFX1BST1BPUlRJT04gPSAwLjA1OyAgLy8gU2l6ZSBvZiBoYW5kbGVzIGFzIGZ1bmN0aW9uIG9mIG5vZGUgd2lkdGguXHJcbmNvbnN0IEVQU0lMT05fSEFORExFX09GRlNFVF9QUk9QT1JUSU9OID0gMC4wODsgLy8gUG9zaXRpb24gb2YgaGFuZGxlIGFzIGZ1bmN0aW9uIG9mIG5vZGUgd2lkdGguXHJcbmNvbnN0IFJFU0laRV9IQU5ETEVfTk9STUFMX0NPTE9SID0gJyMzMkZFMDAnO1xyXG5jb25zdCBSRVNJWkVfSEFORExFX0hJR0hMSUdIVEVEX0NPTE9SID0gbmV3IENvbG9yKCAxNTMsIDI1NSwgMCApO1xyXG5jb25zdCBFUFNJTE9OX0xJTkVfQ09MT1IgPSBSRVNJWkVfSEFORExFX05PUk1BTF9DT0xPUjtcclxuY29uc3QgUE9URU5USUFMX0xJTkVfQ09MT1IgPSBuZXcgQ29sb3IoICdyZWQnICk7XHJcblxyXG5jbGFzcyBJbnRlcmFjdGl2ZVBvdGVudGlhbEdyYXBoIGV4dGVuZHMgUG90ZW50aWFsR3JhcGhOb2RlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtEdWFsQXRvbU1vZGVsfSBkdWFsQXRvbU1vZGVsIC0gbW9kZWwgb2YgdGhlIHNpbXVsYXRpb25cclxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIHRoYXQgY2FuIGJlIHBhc3NlZCBvbiB0byB0aGUgdW5kZXJseWluZyBub2RlXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIGR1YWxBdG9tTW9kZWwsIG9wdGlvbnMgKSB7XHJcblxyXG4gICAgb3B0aW9ucyA9IG1lcmdlKCB7XHJcbiAgICAgIHRhbmRlbTogVGFuZGVtLlJFUVVJUkVEXHJcbiAgICB9LCBvcHRpb25zICk7XHJcblxyXG4gICAgc3VwZXIoXHJcbiAgICAgIGR1YWxBdG9tTW9kZWwuZ2V0U2lnbWEoKSxcclxuICAgICAgZHVhbEF0b21Nb2RlbC5nZXRFcHNpbG9uKCksXHJcbiAgICAgIHtcclxuICAgICAgICBpbmNsdWRlUG9zaXRpb25NYXJrZXI6IHRydWUsXHJcbiAgICAgICAgYWxsb3dJbnRlcmFjdGlvbjogdHJ1ZSxcclxuICAgICAgICB3aWRlOiB0cnVlLFxyXG4gICAgICAgIHpvb21hYmxlOiBvcHRpb25zLnpvb21hYmxlLFxyXG4gICAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW1cclxuICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBAcHJpdmF0ZVxyXG4gICAgdGhpcy5kdWFsQXRvbU1vZGVsID0gZHVhbEF0b21Nb2RlbDtcclxuICAgIHRoaXMubWluWEZvckF0b20gPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XHJcblxyXG4gICAgLy8gQHB1YmxpYywgcmVhZC1vbmx5XHJcbiAgICB0aGlzLmludGVyYWN0aW9uRW5hYmxlZCA9IGZhbHNlO1xyXG5cclxuICAgIC8vIENyZWF0ZSBhIGNvbnZlbmllbmNlIGZ1bmN0aW9uIGZvciBhZGRpbmcgYSBkcmFnIGhhbmRsZXIgdGhhdCBhZGp1c3RzIGVwc2lsb24sIHRoaXMgaXMgZG9uZSB0byBhdm9pZCBjb2RlIGR1cGxpY2F0aW9uLlxyXG4gICAgY29uc3QgYWRkRXBzaWxvbkRyYWdMaXN0ZW5lciA9ICggbm9kZSwgdGFuZGVtICkgPT4ge1xyXG5cclxuICAgICAgbGV0IHN0YXJ0RHJhZ1k7XHJcbiAgICAgIGxldCBzdGFydEVwc2lsb25WYWx1ZTtcclxuICAgICAgbGV0IGN1cnJlbnREcmFnWTtcclxuXHJcbiAgICAgIG5vZGUuYWRkSW5wdXRMaXN0ZW5lciggbmV3IERyYWdMaXN0ZW5lcigge1xyXG5cclxuICAgICAgICBzdGFydDogZXZlbnQgPT4ge1xyXG4gICAgICAgICAgZHVhbEF0b21Nb2RlbC5zZXRNb3Rpb25QYXVzZWQoIHRydWUgKTtcclxuICAgICAgICAgIHN0YXJ0RHJhZ1kgPSBub2RlLmdsb2JhbFRvUGFyZW50UG9pbnQoIGV2ZW50LnBvaW50ZXIucG9pbnQgKS55O1xyXG4gICAgICAgICAgc3RhcnRFcHNpbG9uVmFsdWUgPSBkdWFsQXRvbU1vZGVsLmdldEVwc2lsb24oKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBkcmFnOiBldmVudCA9PiB7XHJcbiAgICAgICAgICBjdXJyZW50RHJhZ1kgPSBub2RlLmdsb2JhbFRvUGFyZW50UG9pbnQoIGV2ZW50LnBvaW50ZXIucG9pbnQgKS55O1xyXG4gICAgICAgICAgY29uc3QgZHkgPSBjdXJyZW50RHJhZ1kgLSBzdGFydERyYWdZO1xyXG4gICAgICAgICAgZHVhbEF0b21Nb2RlbC5hZGp1c3RhYmxlQXRvbUludGVyYWN0aW9uU3RyZW5ndGhQcm9wZXJ0eS52YWx1ZSA9IFV0aWxzLmNsYW1wKFxyXG4gICAgICAgICAgICBzdGFydEVwc2lsb25WYWx1ZSArICggZHkgLyB0aGlzLnZlcnRpY2FsU2NhbGluZ0ZhY3RvciAvIFNPTUNvbnN0YW50cy5LX0JPTFRaTUFOTiApLFxyXG4gICAgICAgICAgICBTT01Db25zdGFudHMuTUlOX0VQU0lMT04sXHJcbiAgICAgICAgICAgIFNPTUNvbnN0YW50cy5NQVhfRVBTSUxPTlxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBlbmQ6ICgpID0+IHtcclxuICAgICAgICAgIGR1YWxBdG9tTW9kZWwuc2V0TW90aW9uUGF1c2VkKCBmYWxzZSApO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHRhbmRlbTogdGFuZGVtXHJcbiAgICAgIH0gKSApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBBZGQgYSBwYXJlbnQgbm9kZSBmb3IgdGhlIGVwc2lsb24gY29udHJvbHNcclxuICAgIGNvbnN0IGVwc2lsb25MYXllciA9IG5ldyBOb2RlKCB7IHRhbmRlbTogdGhpcy5pbnRlcmFjdGl2ZUNvbnRyb2xzTGF5ZXIudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2Vwc2lsb24nICkgfSApO1xyXG4gICAgdGhpcy5pbnRlcmFjdGl2ZUNvbnRyb2xzTGF5ZXIuYWRkQ2hpbGQoIGVwc2lsb25MYXllciApO1xyXG5cclxuICAgIC8vIEFkZCB0aGUgbGluZSB0aGF0IHdpbGwgaW5kaWNhdGUgYW5kIGNvbnRyb2wgdGhlIHZhbHVlIG9mIGVwc2lsb24uXHJcbiAgICBjb25zdCBlcHNpbG9uTGluZUxlbmd0aCA9IEVQU0lMT05fSEFORExFX09GRlNFVF9QUk9QT1JUSU9OICogdGhpcy53aWR0aE9mR3JhcGggKiAxLjI7XHJcbiAgICB0aGlzLmVwc2lsb25Db250cm9scy5saW5lID0gbmV3IExpbmUoIC1lcHNpbG9uTGluZUxlbmd0aCAvIDIsIDAsIGVwc2lsb25MaW5lTGVuZ3RoLCAwLCB7XHJcbiAgICAgIGN1cnNvcjogJ25zLXJlc2l6ZScsXHJcbiAgICAgIHBpY2thYmxlOiB0cnVlLFxyXG4gICAgICBmaWxsOiBFUFNJTE9OX0xJTkVfQ09MT1IsXHJcbiAgICAgIHN0cm9rZTogRVBTSUxPTl9MSU5FX0NPTE9SLFxyXG4gICAgICBsaW5lV2lkdGg6IDIsXHJcbiAgICAgIHRhbmRlbTogZXBzaWxvbkxheWVyLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdlcHNpbG9uTGluZScgKSxcclxuICAgICAgcGhldGlvUmVhZE9ubHk6IHRydWVcclxuICAgIH0gKTtcclxuICAgIHRoaXMuZXBzaWxvbkNvbnRyb2xzLmxpbmUudG91Y2hBcmVhID0gdGhpcy5lcHNpbG9uQ29udHJvbHMubGluZS5sb2NhbEJvdW5kcy5kaWxhdGVkWFkoIDgsIDggKTtcclxuICAgIHRoaXMuZXBzaWxvbkNvbnRyb2xzLmxpbmUubW91c2VBcmVhID0gdGhpcy5lcHNpbG9uQ29udHJvbHMubGluZS5sb2NhbEJvdW5kcy5kaWxhdGVkWFkoIDAsIDQgKTtcclxuICAgIGFkZEVwc2lsb25EcmFnTGlzdGVuZXIoIHRoaXMuZXBzaWxvbkNvbnRyb2xzLmxpbmUsIHRoaXMuZXBzaWxvbkNvbnRyb2xzLmxpbmUudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2RyYWdMaXN0ZW5lcicgKSApO1xyXG4gICAgZXBzaWxvbkxheWVyLmFkZENoaWxkKCB0aGlzLmVwc2lsb25Db250cm9scy5saW5lICk7XHJcblxyXG4gICAgLy8gSGlnaGxpZ2h0IHRoaXMgY29udHJvbCB3aGVuIHRoZSB1c2VyIGlzIGhvdmVyaW5nIG92ZXIgaXQgYW5kL29yIHVzaW5nIGl0LlxyXG4gICAgY29uc3QgZXBzaWxvbkxpbmVQcmVzc0xpc3RlbmVyID0gbmV3IFByZXNzTGlzdGVuZXIoIHsgYXR0YWNoOiBmYWxzZSwgdGFuZGVtOiBUYW5kZW0uT1BUX09VVCB9ICk7XHJcbiAgICB0aGlzLmVwc2lsb25Db250cm9scy5saW5lLmFkZElucHV0TGlzdGVuZXIoIGVwc2lsb25MaW5lUHJlc3NMaXN0ZW5lciApO1xyXG4gICAgZXBzaWxvbkxpbmVQcmVzc0xpc3RlbmVyLmlzSGlnaGxpZ2h0ZWRQcm9wZXJ0eS5saW5rKCBpc0hpZ2hsaWdodGVkID0+IHtcclxuICAgICAgdGhpcy5lcHNpbG9uQ29udHJvbHMubGluZS5zdHJva2UgPSBpc0hpZ2hsaWdodGVkID8gUkVTSVpFX0hBTkRMRV9ISUdITElHSFRFRF9DT0xPUiA6IFJFU0laRV9IQU5ETEVfTk9STUFMX0NPTE9SO1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIEFkZCB0aGUgYXJyb3cgbm9kZXMgdGhhdCB3aWxsIGFsbG93IHRoZSB1c2VyIHRvIGNvbnRyb2wgdGhlIGVwc2lsb24gdmFsdWUuXHJcbiAgICBjb25zdCBhcnJvd05vZGVPcHRpb25zID0ge1xyXG4gICAgICBoZWFkSGVpZ2h0OiAxMCxcclxuICAgICAgaGVhZFdpZHRoOiAxOCxcclxuICAgICAgdGFpbFdpZHRoOiA3LFxyXG4gICAgICBmaWxsOiBSRVNJWkVfSEFORExFX05PUk1BTF9DT0xPUixcclxuICAgICAgc3Ryb2tlOiAnYmxhY2snLFxyXG4gICAgICBkb3VibGVIZWFkOiB0cnVlLFxyXG4gICAgICBwaWNrYWJsZTogdHJ1ZSxcclxuICAgICAgY3Vyc29yOiAncG9pbnRlcicsXHJcbiAgICAgIHBoZXRpb1JlYWRPbmx5OiB0cnVlXHJcbiAgICB9O1xyXG4gICAgdGhpcy5lcHNpbG9uQ29udHJvbHMuYXJyb3cgPSBuZXcgQXJyb3dOb2RlKFxyXG4gICAgICAwLFxyXG4gICAgICAtUkVTSVpFX0hBTkRMRV9TSVpFX1BST1BPUlRJT04gKiB0aGlzLndpZHRoT2ZHcmFwaCAvIDIsXHJcbiAgICAgIDAsXHJcbiAgICAgIFJFU0laRV9IQU5ETEVfU0laRV9QUk9QT1JUSU9OICogdGhpcy53aWR0aE9mR3JhcGgsXHJcbiAgICAgIG1lcmdlKCB7IHRhbmRlbTogZXBzaWxvbkxheWVyLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdlcHNpbG9uQXJyb3cnICkgfSwgYXJyb3dOb2RlT3B0aW9ucyApXHJcbiAgICApO1xyXG4gICAgY29uc3QgZXBzaWxvbkFycm93UHJlc3NMaXN0ZW5lciA9IG5ldyBQcmVzc0xpc3RlbmVyKCB7IGF0dGFjaDogZmFsc2UsIHRhbmRlbTogVGFuZGVtLk9QVF9PVVQgfSApO1xyXG4gICAgdGhpcy5lcHNpbG9uQ29udHJvbHMuYXJyb3cuYWRkSW5wdXRMaXN0ZW5lciggZXBzaWxvbkFycm93UHJlc3NMaXN0ZW5lciApO1xyXG4gICAgZXBzaWxvbkFycm93UHJlc3NMaXN0ZW5lci5pc0hpZ2hsaWdodGVkUHJvcGVydHkubGluayggaXNIaWdobGlnaHRlZCA9PiB7XHJcbiAgICAgIHRoaXMuZXBzaWxvbkNvbnRyb2xzLmFycm93LmZpbGwgPSBpc0hpZ2hsaWdodGVkID8gUkVTSVpFX0hBTkRMRV9ISUdITElHSFRFRF9DT0xPUiA6IFJFU0laRV9IQU5ETEVfTk9STUFMX0NPTE9SO1xyXG4gICAgfSApO1xyXG4gICAgZXBzaWxvbkxheWVyLmFkZENoaWxkKCB0aGlzLmVwc2lsb25Db250cm9scy5hcnJvdyApO1xyXG4gICAgdGhpcy5lcHNpbG9uQ29udHJvbHMuYXJyb3cudG91Y2hBcmVhID0gdGhpcy5lcHNpbG9uQ29udHJvbHMuYXJyb3cubG9jYWxCb3VuZHMuZGlsYXRlZFhZKCAzLCAxMCApO1xyXG4gICAgYWRkRXBzaWxvbkRyYWdMaXN0ZW5lciggdGhpcy5lcHNpbG9uQ29udHJvbHMuYXJyb3csIHRoaXMuZXBzaWxvbkNvbnRyb2xzLmFycm93LnRhbmRlbS5jcmVhdGVUYW5kZW0oICdkcmFnTGlzdGVuZXInICkgKTtcclxuXHJcbiAgICAvLyBhZGQgYSBsYXllciBmb3IgdGhlIHNpZ21hIGNvbnRyb2xzIChmb3IgY29uc2lzdGVuY3kgd2l0aCB0aGUgZXBzaWxvbiBjb250cm9scylcclxuICAgIGNvbnN0IHNpZ21hTGF5ZXIgPSBuZXcgTm9kZSggeyB0YW5kZW06IHRoaXMuaW50ZXJhY3RpdmVDb250cm9sc0xheWVyLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdzaWdtYScgKSB9ICk7XHJcbiAgICB0aGlzLmludGVyYWN0aXZlQ29udHJvbHNMYXllci5hZGRDaGlsZCggc2lnbWFMYXllciApO1xyXG5cclxuICAgIC8vIGFkZCBzaWdtYSBhcnJvdyBub2RlXHJcbiAgICB0aGlzLnNpZ21hQ29udHJvbHMuYXJyb3cgPSBuZXcgQXJyb3dOb2RlKFxyXG4gICAgICAtUkVTSVpFX0hBTkRMRV9TSVpFX1BST1BPUlRJT04gKiB0aGlzLndpZHRoT2ZHcmFwaCAvIDIsXHJcbiAgICAgIDAsXHJcbiAgICAgIFJFU0laRV9IQU5ETEVfU0laRV9QUk9QT1JUSU9OICogdGhpcy53aWR0aE9mR3JhcGggKiAxLjIsXHJcbiAgICAgIDAsXHJcbiAgICAgIG1lcmdlKCB7IHRhbmRlbTogc2lnbWFMYXllci50YW5kZW0uY3JlYXRlVGFuZGVtKCAnc2lnbWFBcnJvdycgKSB9LCBhcnJvd05vZGVPcHRpb25zIClcclxuICAgICk7XHJcbiAgICBjb25zdCBzaWdtYUFycm93UHJlc3NMaXN0ZW5lciA9IG5ldyBQcmVzc0xpc3RlbmVyKCB7IGF0dGFjaDogZmFsc2UsIHRhbmRlbTogVGFuZGVtLk9QVF9PVVQgfSApO1xyXG4gICAgdGhpcy5zaWdtYUNvbnRyb2xzLmFycm93LmFkZElucHV0TGlzdGVuZXIoIHNpZ21hQXJyb3dQcmVzc0xpc3RlbmVyICk7XHJcbiAgICBzaWdtYUFycm93UHJlc3NMaXN0ZW5lci5pc0hpZ2hsaWdodGVkUHJvcGVydHkubGluayggaXNIaWdobGlnaHRlZCA9PiB7XHJcbiAgICAgIHRoaXMuc2lnbWFDb250cm9scy5hcnJvdy5maWxsID0gaXNIaWdobGlnaHRlZCA/IFJFU0laRV9IQU5ETEVfSElHSExJR0hURURfQ09MT1IgOiBSRVNJWkVfSEFORExFX05PUk1BTF9DT0xPUjtcclxuICAgIH0gKTtcclxuXHJcbiAgICBzaWdtYUxheWVyLmFkZENoaWxkKCB0aGlzLnNpZ21hQ29udHJvbHMuYXJyb3cgKTtcclxuICAgIHRoaXMuc2lnbWFDb250cm9scy5hcnJvdy50b3VjaEFyZWEgPSB0aGlzLnNpZ21hQ29udHJvbHMuYXJyb3cubG9jYWxCb3VuZHMuZGlsYXRlZFhZKCAxMCwgNSApO1xyXG5cclxuICAgIC8vIEFkZCBhIGRyYWcgbGlzdGVuZXIgZm9yIGFkanVzdGluZyB0aGUgc2lnbWEgdmFsdWUsIGFsc28ga25vd24gYXMgdGhlIGF0b20gZGlhbWV0ZXIuXHJcbiAgICBsZXQgc3RhcnREcmFnWDtcclxuICAgIGxldCBjdXJyZW50RHJhZ1g7XHJcbiAgICBsZXQgYXRvbURpYW1ldGVyQXREcmFnU3RhcnQ7XHJcbiAgICB0aGlzLnNpZ21hQ29udHJvbHMuYXJyb3cuYWRkSW5wdXRMaXN0ZW5lciggbmV3IERyYWdMaXN0ZW5lcigge1xyXG5cclxuICAgICAgc3RhcnQ6IGV2ZW50ID0+IHtcclxuICAgICAgICBkdWFsQXRvbU1vZGVsLnNldE1vdGlvblBhdXNlZCggdHJ1ZSApO1xyXG4gICAgICAgIHN0YXJ0RHJhZ1ggPSB0aGlzLnNpZ21hQ29udHJvbHMuYXJyb3cuZ2xvYmFsVG9QYXJlbnRQb2ludCggZXZlbnQucG9pbnRlci5wb2ludCApLng7XHJcbiAgICAgICAgYXRvbURpYW1ldGVyQXREcmFnU3RhcnQgPSBkdWFsQXRvbU1vZGVsLmFkanVzdGFibGVBdG9tRGlhbWV0ZXJQcm9wZXJ0eS52YWx1ZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGRyYWc6IGV2ZW50ID0+IHtcclxuICAgICAgICBjdXJyZW50RHJhZ1ggPSB0aGlzLnNpZ21hQ29udHJvbHMuYXJyb3cuZ2xvYmFsVG9QYXJlbnRQb2ludCggZXZlbnQucG9pbnRlci5wb2ludCApLng7XHJcbiAgICAgICAgY29uc3QgZHggPSBjdXJyZW50RHJhZ1ggLSBzdGFydERyYWdYO1xyXG4gICAgICAgIGNvbnN0IHNjYWxlRmFjdG9yID0gdGhpcy54UmFuZ2UgLyB0aGlzLmdldEdyYXBoV2lkdGgoKTtcclxuICAgICAgICBkdWFsQXRvbU1vZGVsLmFkanVzdGFibGVBdG9tRGlhbWV0ZXJQcm9wZXJ0eS52YWx1ZSA9IFV0aWxzLmNsYW1wKFxyXG4gICAgICAgICAgYXRvbURpYW1ldGVyQXREcmFnU3RhcnQgKyAoIGR4ICogc2NhbGVGYWN0b3IgKSxcclxuICAgICAgICAgIFNPTUNvbnN0YW50cy5NSU5fU0lHTUEsXHJcbiAgICAgICAgICBTT01Db25zdGFudHMuTUFYX1NJR01BXHJcbiAgICAgICAgKTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGVuZDogKCkgPT4ge1xyXG4gICAgICAgIGR1YWxBdG9tTW9kZWwuc2V0TW90aW9uUGF1c2VkKCBmYWxzZSApO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgdGFuZGVtOiB0aGlzLnNpZ21hQ29udHJvbHMuYXJyb3cudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2RyYWdMaXN0ZW5lcicgKVxyXG4gICAgfSApICk7XHJcblxyXG4gICAgLy8gQWRkIHRoZSBhYmlsaXR5IHRvIGdyYWIgYW5kIG1vdmUgdGhlIHBvc2l0aW9uIG1hcmtlci4gVGhpcyBub2RlIHdpbGwgbmVlZCB0byBiZSBwaWNrYWJsZSBzbyB0aGUgdXNlciBjYW4gZ3JhYiBpdC5cclxuICAgIHRoaXMucG9zaXRpb25NYXJrZXIuc2V0UGlja2FibGUoIHRydWUgKTtcclxuICAgIHRoaXMucG9zaXRpb25NYXJrZXIudG91Y2hBcmVhID0gU2hhcGUuY2lyY2xlKCAwLCAwLCAxMyApO1xyXG4gICAgbGV0IHBvc2l0aW9uTWFya2VyU3RhcnREcmFnWDtcclxuICAgIGxldCBwb3NpdGlvbk1hcmtlckN1cnJlbnREcmFnWDtcclxuICAgIGxldCBhdG9tU3RhcnRYUG9zaXRpb247XHJcbiAgICB0aGlzLnBvc2l0aW9uTWFya2VyLmFkZElucHV0TGlzdGVuZXIoIG5ldyBEcmFnTGlzdGVuZXIoIHtcclxuICAgICAgICBhbGxvd1RvdWNoU25hZzogdHJ1ZSxcclxuXHJcbiAgICAgICAgc3RhcnQ6IGV2ZW50ID0+IHtcclxuXHJcbiAgICAgICAgICAvLyBTdG9wIHRoZSBwYXJ0aWNsZSBmcm9tIG1vdmluZyBpbiB0aGUgbW9kZWwuXHJcbiAgICAgICAgICBkdWFsQXRvbU1vZGVsLnNldE1vdGlvblBhdXNlZCggdHJ1ZSApO1xyXG4gICAgICAgICAgcG9zaXRpb25NYXJrZXJTdGFydERyYWdYID0gdGhpcy5wb3NpdGlvbk1hcmtlci5nbG9iYWxUb1BhcmVudFBvaW50KCBldmVudC5wb2ludGVyLnBvaW50ICkueDtcclxuICAgICAgICAgIGF0b21TdGFydFhQb3NpdGlvbiA9IGR1YWxBdG9tTW9kZWwubW92YWJsZUF0b20uZ2V0WCgpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGRyYWc6IGV2ZW50ID0+IHtcclxuXHJcbiAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIG1vdmVtZW50IGhpbnQgaXMgbm93IGhpZGRlbiwgc2luY2UgdGhlIHVzZXIgaGFzIGZpZ3VyZWQgb3V0IHdoYXQgdG8gZHJhZy5cclxuICAgICAgICAgIGR1YWxBdG9tTW9kZWwubW92ZW1lbnRIaW50VmlzaWJsZVByb3BlcnR5LnNldCggZmFsc2UgKTtcclxuXHJcbiAgICAgICAgICAvLyBNb3ZlIHRoZSBtb3ZhYmxlIGF0b20gYmFzZWQgb24gdGhpcyBkcmFnIGV2ZW50LlxyXG4gICAgICAgICAgY29uc3QgYXRvbSA9IGR1YWxBdG9tTW9kZWwubW92YWJsZUF0b207XHJcbiAgICAgICAgICBwb3NpdGlvbk1hcmtlckN1cnJlbnREcmFnWCA9IHRoaXMucG9zaXRpb25NYXJrZXIuZ2xvYmFsVG9QYXJlbnRQb2ludCggZXZlbnQucG9pbnRlci5wb2ludCApLng7XHJcbiAgICAgICAgICBjb25zdCB4RGlmZmVyZW5jZSA9IHBvc2l0aW9uTWFya2VyQ3VycmVudERyYWdYIC0gcG9zaXRpb25NYXJrZXJTdGFydERyYWdYO1xyXG4gICAgICAgICAgY29uc3Qgc2NhbGVGYWN0b3IgPSB0aGlzLnhSYW5nZSAvIHRoaXMuZ2V0R3JhcGhXaWR0aCgpO1xyXG4gICAgICAgICAgY29uc3QgbmV3UG9zWCA9IE1hdGgubWF4KCBhdG9tU3RhcnRYUG9zaXRpb24gKyAoIHhEaWZmZXJlbmNlICogc2NhbGVGYWN0b3IgKSwgdGhpcy5taW5YRm9yQXRvbSApO1xyXG4gICAgICAgICAgYXRvbS5zZXRQb3NpdGlvbiggbmV3UG9zWCwgYXRvbS5nZXRZKCkgKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBlbmQ6ICgpID0+IHtcclxuXHJcbiAgICAgICAgICAvLyBMZXQgdGhlIG1vZGVsIG1vdmUgdGhlIHBhcnRpY2xlIGFnYWluLiAgTm90ZSB0aGF0IHRoaXMgaGFwcGVucyBldmVuIGlmIHRoZSBtb3Rpb24gd2FzIHBhdXNlZCBieSBzb21lIG90aGVyXHJcbiAgICAgICAgICAvLyBtZWFucy5cclxuICAgICAgICAgIGR1YWxBdG9tTW9kZWwuc2V0TW90aW9uUGF1c2VkKCBmYWxzZSApO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHRhbmRlbTogdGhpcy5wb3NpdGlvbk1hcmtlci50YW5kZW0uY3JlYXRlVGFuZGVtKCAnZHJhZ0xpc3RlbmVyJyApXHJcbiAgICAgIH1cclxuICAgICkgKTtcclxuXHJcbiAgICAvLyB1cGRhdGUgdGhlIG1hcmtlciBjb2xvciB3aGVuIHRoZSBtb3ZhYmxlIGF0b20gY2hhbmdlc1xyXG4gICAgZHVhbEF0b21Nb2RlbC5tb3ZhYmxlQXRvbS5hdG9tVHlwZVByb3BlcnR5LmxpbmsoICgpID0+IHtcclxuICAgICAgdGhpcy5wb3NpdGlvbk1hcmtlci5jaGFuZ2VDb2xvciggZHVhbEF0b21Nb2RlbC5tb3ZhYmxlQXRvbS5jb2xvciApO1xyXG4gICAgfSApO1xyXG5cclxuICAgIE11bHRpbGluay5tdWx0aWxpbmsoXHJcbiAgICAgIFsgZHVhbEF0b21Nb2RlbC5hdG9tUGFpclByb3BlcnR5LCBkdWFsQXRvbU1vZGVsLmFkanVzdGFibGVBdG9tSW50ZXJhY3Rpb25TdHJlbmd0aFByb3BlcnR5LCBkdWFsQXRvbU1vZGVsLmFkanVzdGFibGVBdG9tRGlhbWV0ZXJQcm9wZXJ0eSBdLFxyXG4gICAgICAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zZXRMalBvdGVudGlhbFBhcmFtZXRlcnMoIGR1YWxBdG9tTW9kZWwuZ2V0U2lnbWEoKSwgZHVhbEF0b21Nb2RlbC5nZXRFcHNpbG9uKCkgKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUludGVyYWN0aXZpdHlTdGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuZHJhd1BvdGVudGlhbEN1cnZlKCk7XHJcbiAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5pbnRlcmFjdGlvblBvdGVudGlhbENhbnZhc05vZGUgPSBuZXcgSW50ZXJhY3Rpb25Qb3RlbnRpYWxDYW52YXNOb2RlKFxyXG4gICAgICB0aGlzLFxyXG4gICAgICB7IGNhbnZhc0JvdW5kczogbmV3IEJvdW5kczIoIDAsIDAsIHRoaXMuZ3JhcGhXaWR0aCwgdGhpcy5ncmFwaEhlaWdodCApIH1cclxuICAgICk7XHJcblxyXG4gICAgLy8gVXBkYXRlIGludGVyYWN0aXZpdHkgc3RhdGUuXHJcbiAgICB0aGlzLnVwZGF0ZUludGVyYWN0aXZpdHlTdGF0ZSgpO1xyXG5cclxuICAgIC8vIFJlZHJhdyB0aGUgcG90ZW50aWFsIGN1cnZlLlxyXG4gICAgdGhpcy5kcmF3UG90ZW50aWFsQ3VydmUoKTtcclxuXHJcbiAgICAvLyBBZGQgY2hpbGRyZW5cclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMuaG9yaXpvbnRhbEF4aXNMYWJlbCApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggdGhpcy52ZXJ0aWNhbEF4aXNMYWJlbCApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggdGhpcy5jZW50ZXJBeGlzICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCB0aGlzLmludGVyYWN0aW9uUG90ZW50aWFsQ2FudmFzTm9kZSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggdGhpcy52ZXJ0aWNhbEF4aXMgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMuaG9yaXpvbnRhbEF4aXMgKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMubGpQb3RlbnRpYWxHcmFwaCApO1xyXG5cclxuICAgIC8vIGFwcGx5aW5nIGNvbG9yIHNjaGVtZSB0byBsaiBncmFwaCBlbGVtZW50c1xyXG4gICAgdGhpcy52ZXJ0aWNhbEF4aXMuZmlsbCA9IFNPTUNvbG9ycy5sakdyYXBoQXhlc0FuZEdyaWRDb2xvclByb3BlcnR5O1xyXG4gICAgdGhpcy5ob3Jpem9udGFsQXhpcy5maWxsID0gU09NQ29sb3JzLmxqR3JhcGhBeGVzQW5kR3JpZENvbG9yUHJvcGVydHk7XHJcbiAgICB0aGlzLnZlcnRpY2FsQXhpcy5zdHJva2UgPSBTT01Db2xvcnMubGpHcmFwaEF4ZXNBbmRHcmlkQ29sb3JQcm9wZXJ0eTtcclxuICAgIHRoaXMuaG9yaXpvbnRhbEF4aXMuc3Ryb2tlID0gU09NQ29sb3JzLmxqR3JhcGhBeGVzQW5kR3JpZENvbG9yUHJvcGVydHk7XHJcbiAgICB0aGlzLmVwc2lsb25BcnJvdy5maWxsID0gU09NQ29sb3JzLmxqR3JhcGhBeGVzQW5kR3JpZENvbG9yUHJvcGVydHk7XHJcbiAgICB0aGlzLmVwc2lsb25BcnJvdy5maWxsID0gU09NQ29sb3JzLmxqR3JhcGhBeGVzQW5kR3JpZENvbG9yUHJvcGVydHk7XHJcbiAgICB0aGlzLnNpZ21hQXJyb3cuZmlsbCA9IFNPTUNvbG9ycy5sakdyYXBoQXhlc0FuZEdyaWRDb2xvclByb3BlcnR5O1xyXG4gICAgdGhpcy5lcHNpbG9uTGFiZWwuZmlsbCA9IFNPTUNvbG9ycy5sakdyYXBoQXhlc0FuZEdyaWRDb2xvclByb3BlcnR5O1xyXG4gICAgdGhpcy5zaWdtYUxhYmVsLmZpbGwgPSBTT01Db2xvcnMubGpHcmFwaEF4ZXNBbmRHcmlkQ29sb3JQcm9wZXJ0eTtcclxuICAgIHRoaXMuZXBzaWxvbkFycm93LnN0cm9rZSA9IFNPTUNvbG9ycy5sakdyYXBoQXhlc0FuZEdyaWRDb2xvclByb3BlcnR5O1xyXG4gICAgdGhpcy5ob3Jpem9udGFsQXhpc0xhYmVsLmZpbGwgPSBTT01Db2xvcnMubGpHcmFwaEF4ZXNBbmRHcmlkQ29sb3JQcm9wZXJ0eTtcclxuICAgIHRoaXMudmVydGljYWxBeGlzTGFiZWwuZmlsbCA9IFNPTUNvbG9ycy5sakdyYXBoQXhlc0FuZEdyaWRDb2xvclByb3BlcnR5O1xyXG5cclxuICAgIHRoaXMubXV0YXRlKCBvcHRpb25zICk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBhbiBvdmVycmlkZSBvZiB0aGUgbWV0aG9kIGluIHRoZSBiYXNlIGNsYXNzIHRoYXQgZHJhd3MgdGhlIGN1cnZlIG9uIHRoZSBncmFwaCwgYW5kIHRoaXMgb3ZlcnJpZGUgZHJhd3NcclxuICAgKiB0aGUgY29udHJvbHMgdGhhdCBhbGxvdyB0aGUgdXNlciB0byBpbnRlcmFjdCB3aXRoIHRoZSBncmFwaC5cclxuICAgKiBAb3ZlcnJpZGVcclxuICAgKiBAcHJvdGVjdGVkXHJcbiAgICovXHJcbiAgZHJhd1BvdGVudGlhbEN1cnZlKCkge1xyXG5cclxuICAgIC8vICBkcmF3IHBvdGVudGlhbCBjdXJ2ZVxyXG4gICAgaWYgKCB0aGlzLmludGVyYWN0aW9uUG90ZW50aWFsQ2FudmFzTm9kZSAhPT0gdW5kZWZpbmVkICkge1xyXG4gICAgICB0aGlzLmludGVyYWN0aW9uUG90ZW50aWFsQ2FudmFzTm9kZS51cGRhdGUoIFBPVEVOVElBTF9MSU5FX0NPTE9SICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXQgdGhlIGxvd2VzdCBhbGxvd2VkIFggcG9zaXRpb24gdG8gd2hpY2ggdGhlIG1vdmFibGUgYXRvbSBjYW4gYmUgc2V0LlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5YRm9yQXRvbVxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBzZXRNaW5YRm9yQXRvbSggbWluWEZvckF0b20gKSB7XHJcbiAgICB0aGlzLm1pblhGb3JBdG9tID0gbWluWEZvckF0b207XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIHVwZGF0ZUludGVyYWN0aXZpdHlTdGF0ZSgpIHtcclxuICAgIHRoaXMuaW50ZXJhY3Rpb25FbmFibGVkID0gKCB0aGlzLmR1YWxBdG9tTW9kZWwuZml4ZWRBdG9tLmdldFR5cGUoKSA9PT0gQXRvbVR5cGUuQURKVVNUQUJMRSApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQG92ZXJyaWRlXHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG4gIHNldE1vbGVjdWxhciggbW9sZWN1bGFyICkge1xyXG4gICAgc3VwZXIuc2V0TW9sZWN1bGFyKCBtb2xlY3VsYXIgKTtcclxuXHJcbiAgICAvLyBNb3ZlIHRoZSBob3Jpem9udGFsIGxhYmVsIGRvd24gYSBsaXR0bGUgYml0IGZyb20gd2hlcmUgdGhlIHN1cGVyY2xhc3MgcHV0cyBpdCwgb3RoZXJ3aXNlIGFkanVzdG1lbnQgYXJyb3cgY2FuXHJcbiAgICAvLyBvdmVybGFwIGl0LlxyXG4gICAgdGhpcy5ob3Jpem9udGFsQXhpc0xhYmVsLnRvcCArPSA4OyAvLyBhbW91bnQgZW1waXJpY2FsbHkgZGV0ZXJtaW5lZFxyXG4gIH1cclxufVxyXG5cclxuc3RhdGVzT2ZNYXR0ZXIucmVnaXN0ZXIoICdJbnRlcmFjdGl2ZVBvdGVudGlhbEdyYXBoJywgSW50ZXJhY3RpdmVQb3RlbnRpYWxHcmFwaCApO1xyXG5leHBvcnQgZGVmYXVsdCBJbnRlcmFjdGl2ZVBvdGVudGlhbEdyYXBoOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFNBQVMsTUFBTSxrQ0FBa0M7QUFDeEQsT0FBT0MsT0FBTyxNQUFNLCtCQUErQjtBQUNuRCxPQUFPQyxLQUFLLE1BQU0sNkJBQTZCO0FBQy9DLFNBQVNDLEtBQUssUUFBUSxnQ0FBZ0M7QUFDdEQsT0FBT0MsS0FBSyxNQUFNLG1DQUFtQztBQUNyRCxPQUFPQyxTQUFTLE1BQU0sMENBQTBDO0FBQ2hFLFNBQVNDLEtBQUssRUFBRUMsWUFBWSxFQUFFQyxJQUFJLEVBQUVDLElBQUksRUFBRUMsYUFBYSxRQUFRLG1DQUFtQztBQUNsRyxPQUFPQyxNQUFNLE1BQU0saUNBQWlDO0FBQ3BELE9BQU9DLFFBQVEsTUFBTSxnQ0FBZ0M7QUFDckQsT0FBT0MsWUFBWSxNQUFNLDhCQUE4QjtBQUN2RCxPQUFPQyw4QkFBOEIsTUFBTSxxREFBcUQ7QUFDaEcsT0FBT0Msa0JBQWtCLE1BQU0seUNBQXlDO0FBQ3hFLE9BQU9DLFNBQVMsTUFBTSxnQ0FBZ0M7QUFDdEQsT0FBT0MsY0FBYyxNQUFNLHlCQUF5Qjs7QUFFcEQ7QUFDQSxNQUFNQyw2QkFBNkIsR0FBRyxJQUFJLENBQUMsQ0FBRTtBQUM3QyxNQUFNQyxnQ0FBZ0MsR0FBRyxJQUFJLENBQUMsQ0FBQztBQUMvQyxNQUFNQywwQkFBMEIsR0FBRyxTQUFTO0FBQzVDLE1BQU1DLCtCQUErQixHQUFHLElBQUlmLEtBQUssQ0FBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUUsQ0FBQztBQUNoRSxNQUFNZ0Isa0JBQWtCLEdBQUdGLDBCQUEwQjtBQUNyRCxNQUFNRyxvQkFBb0IsR0FBRyxJQUFJakIsS0FBSyxDQUFFLEtBQU0sQ0FB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