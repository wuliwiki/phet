// Copyright 2015-2022, University of Colorado Boulder

/**
 * View for the hand node which looks like a cartoonish human hand with thumb and pointing finger expanded and the other
 * three fingers folded.
 *
 * @author Siddhartha Chinthapally (Actual Concepts)
 * @author John Blanco
 */

import merge from '../../../../phet-core/js/merge.js';
import hand_png from '../../../../scenery-phet/images/hand_png.js';
import { DragListener, Image, Node } from '../../../../scenery/js/imports.js';
import Tandem from '../../../../tandem/js/Tandem.js';
import statesOfMatter from '../../statesOfMatter.js';

// constants
const WIDTH = 80; // empirically determined to look good

class HandNode extends Node {
  /**
   * @param {DualAtomModel} dualAtomModel - model of the atomic interactions screen
   * @param {ScaledAtom} particle - model of the atom that is draggable
   * @param {ModelViewTransform2} modelViewTransform to convert between model and view co-ordinates
   * @param {number} minX - grabbable particle min x position
   * @param {Object} [options]
   */
  constructor(dualAtomModel, particle, modelViewTransform, minX, options) {
    options = merge({
      cursor: 'pointer',
      tandem: Tandem.REQUIRED
    }, options);
    super(options);
    this.minX = minX; // @private

    // @private {ScaledAtom} - particle that will be moved if the hand is dragged
    this.particle = particle;

    // add the main image that represents the hand
    this.addChild(new Image(hand_png, {
      minWidth: WIDTH,
      maxWidth: WIDTH,
      y: modelViewTransform.modelToViewY(this.particle.positionProperty.get().y)
    }));

    // control visibility
    const visibilityListener = visible => {
      this.visible = visible;
    };
    dualAtomModel.movementHintVisibleProperty.link(visibilityListener);

    // add the drag handler
    let startDragX;
    let currentDragX;
    let particleStartXPosition;
    const inputListener = new DragListener({
      start: event => {
        // Stop the model from moving the particle at the same time the user is moving it.
        dualAtomModel.setMotionPaused(true);
        startDragX = this.globalToParentPoint(event.pointer.point).x;
        particleStartXPosition = this.particle.getX();
      },
      drag: event => {
        currentDragX = this.globalToParentPoint(event.pointer.point).x;
        const dx = currentDragX - startDragX;
        const newXPosition = Math.max(particleStartXPosition + modelViewTransform.viewToModelDeltaX(dx), modelViewTransform.viewToModelX(this.minX));

        // Move the particle based on the amount of pointer movement.
        this.particle.setPosition(newXPosition, this.particle.getY());
      },
      end: () => {
        // Let the model move the particles again.  Note that this happens even if the motion was paused by some other
        // means.
        dualAtomModel.setMotionPaused(false);
        dualAtomModel.movementHintVisibleProperty.set(false);
      },
      tandem: options.tandem.createTandem('dragListener')
    });
    this.addInputListener(inputListener);
    const positionListener = position => {
      this.x = modelViewTransform.modelToViewX(position.x);
    };

    // move the hint with the particle
    particle.positionProperty.link(positionListener);

    // add a linked element in phet-io to the property that controls this node's visibility
    this.addLinkedElement(dualAtomModel.movementHintVisibleProperty, {
      tandem: options.tandem.createTandem('movementHintVisibleProperty')
    });

    // dispose function
    this.disposeHandNode = () => {
      this.removeInputListener(inputListener);
      particle.positionProperty.unlink(positionListener);
      dualAtomModel.movementHintVisibleProperty.unlink(visibilityListener);
    };
  }

  /**
   * @public
   */
  dispose() {
    this.disposeHandNode();
    super.dispose();
  }

  /**
   * @param {ScaledAtom} particle
   * @public
   */
  setParticle(particle) {
    this.particle = particle;
  }

  /**
   * @returns {number}
   * @public
   */
  getMinX() {
    return this.minX;
  }

  /**
   * @param {number} minX
   * @public
   */
  setMinX(minX) {
    this.minX = minX;
  }
}
statesOfMatter.register('HandNode', HandNode);
export default HandNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtZXJnZSIsImhhbmRfcG5nIiwiRHJhZ0xpc3RlbmVyIiwiSW1hZ2UiLCJOb2RlIiwiVGFuZGVtIiwic3RhdGVzT2ZNYXR0ZXIiLCJXSURUSCIsIkhhbmROb2RlIiwiY29uc3RydWN0b3IiLCJkdWFsQXRvbU1vZGVsIiwicGFydGljbGUiLCJtb2RlbFZpZXdUcmFuc2Zvcm0iLCJtaW5YIiwib3B0aW9ucyIsImN1cnNvciIsInRhbmRlbSIsIlJFUVVJUkVEIiwiYWRkQ2hpbGQiLCJtaW5XaWR0aCIsIm1heFdpZHRoIiwieSIsIm1vZGVsVG9WaWV3WSIsInBvc2l0aW9uUHJvcGVydHkiLCJnZXQiLCJ2aXNpYmlsaXR5TGlzdGVuZXIiLCJ2aXNpYmxlIiwibW92ZW1lbnRIaW50VmlzaWJsZVByb3BlcnR5IiwibGluayIsInN0YXJ0RHJhZ1giLCJjdXJyZW50RHJhZ1giLCJwYXJ0aWNsZVN0YXJ0WFBvc2l0aW9uIiwiaW5wdXRMaXN0ZW5lciIsInN0YXJ0IiwiZXZlbnQiLCJzZXRNb3Rpb25QYXVzZWQiLCJnbG9iYWxUb1BhcmVudFBvaW50IiwicG9pbnRlciIsInBvaW50IiwieCIsImdldFgiLCJkcmFnIiwiZHgiLCJuZXdYUG9zaXRpb24iLCJNYXRoIiwibWF4Iiwidmlld1RvTW9kZWxEZWx0YVgiLCJ2aWV3VG9Nb2RlbFgiLCJzZXRQb3NpdGlvbiIsImdldFkiLCJlbmQiLCJzZXQiLCJjcmVhdGVUYW5kZW0iLCJhZGRJbnB1dExpc3RlbmVyIiwicG9zaXRpb25MaXN0ZW5lciIsInBvc2l0aW9uIiwibW9kZWxUb1ZpZXdYIiwiYWRkTGlua2VkRWxlbWVudCIsImRpc3Bvc2VIYW5kTm9kZSIsInJlbW92ZUlucHV0TGlzdGVuZXIiLCJ1bmxpbmsiLCJkaXNwb3NlIiwic2V0UGFydGljbGUiLCJnZXRNaW5YIiwic2V0TWluWCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiSGFuZE5vZGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTUtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogVmlldyBmb3IgdGhlIGhhbmQgbm9kZSB3aGljaCBsb29rcyBsaWtlIGEgY2FydG9vbmlzaCBodW1hbiBoYW5kIHdpdGggdGh1bWIgYW5kIHBvaW50aW5nIGZpbmdlciBleHBhbmRlZCBhbmQgdGhlIG90aGVyXHJcbiAqIHRocmVlIGZpbmdlcnMgZm9sZGVkLlxyXG4gKlxyXG4gKiBAYXV0aG9yIFNpZGRoYXJ0aGEgQ2hpbnRoYXBhbGx5IChBY3R1YWwgQ29uY2VwdHMpXHJcbiAqIEBhdXRob3IgSm9obiBCbGFuY29cclxuICovXHJcblxyXG5pbXBvcnQgbWVyZ2UgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL21lcmdlLmpzJztcclxuaW1wb3J0IGhhbmRfcG5nIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9pbWFnZXMvaGFuZF9wbmcuanMnO1xyXG5pbXBvcnQgeyBEcmFnTGlzdGVuZXIsIEltYWdlLCBOb2RlIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IFRhbmRlbSBmcm9tICcuLi8uLi8uLi8uLi90YW5kZW0vanMvVGFuZGVtLmpzJztcclxuaW1wb3J0IHN0YXRlc09mTWF0dGVyIGZyb20gJy4uLy4uL3N0YXRlc09mTWF0dGVyLmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBXSURUSCA9IDgwOyAvLyBlbXBpcmljYWxseSBkZXRlcm1pbmVkIHRvIGxvb2sgZ29vZFxyXG5cclxuY2xhc3MgSGFuZE5vZGUgZXh0ZW5kcyBOb2RlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtEdWFsQXRvbU1vZGVsfSBkdWFsQXRvbU1vZGVsIC0gbW9kZWwgb2YgdGhlIGF0b21pYyBpbnRlcmFjdGlvbnMgc2NyZWVuXHJcbiAgICogQHBhcmFtIHtTY2FsZWRBdG9tfSBwYXJ0aWNsZSAtIG1vZGVsIG9mIHRoZSBhdG9tIHRoYXQgaXMgZHJhZ2dhYmxlXHJcbiAgICogQHBhcmFtIHtNb2RlbFZpZXdUcmFuc2Zvcm0yfSBtb2RlbFZpZXdUcmFuc2Zvcm0gdG8gY29udmVydCBiZXR3ZWVuIG1vZGVsIGFuZCB2aWV3IGNvLW9yZGluYXRlc1xyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5YIC0gZ3JhYmJhYmxlIHBhcnRpY2xlIG1pbiB4IHBvc2l0aW9uXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCBkdWFsQXRvbU1vZGVsLCBwYXJ0aWNsZSwgbW9kZWxWaWV3VHJhbnNmb3JtLCBtaW5YLCBvcHRpb25zICkge1xyXG5cclxuICAgIG9wdGlvbnMgPSBtZXJnZSgge1xyXG4gICAgICBjdXJzb3I6ICdwb2ludGVyJyxcclxuICAgICAgdGFuZGVtOiBUYW5kZW0uUkVRVUlSRURcclxuICAgIH0sIG9wdGlvbnMgKTtcclxuXHJcbiAgICBzdXBlciggb3B0aW9ucyApO1xyXG4gICAgdGhpcy5taW5YID0gbWluWDsgLy8gQHByaXZhdGVcclxuXHJcbiAgICAvLyBAcHJpdmF0ZSB7U2NhbGVkQXRvbX0gLSBwYXJ0aWNsZSB0aGF0IHdpbGwgYmUgbW92ZWQgaWYgdGhlIGhhbmQgaXMgZHJhZ2dlZFxyXG4gICAgdGhpcy5wYXJ0aWNsZSA9IHBhcnRpY2xlO1xyXG5cclxuICAgIC8vIGFkZCB0aGUgbWFpbiBpbWFnZSB0aGF0IHJlcHJlc2VudHMgdGhlIGhhbmRcclxuICAgIHRoaXMuYWRkQ2hpbGQoIG5ldyBJbWFnZSggaGFuZF9wbmcsIHtcclxuICAgICAgbWluV2lkdGg6IFdJRFRILFxyXG4gICAgICBtYXhXaWR0aDogV0lEVEgsXHJcbiAgICAgIHk6IG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1koIHRoaXMucGFydGljbGUucG9zaXRpb25Qcm9wZXJ0eS5nZXQoKS55IClcclxuICAgIH0gKSApO1xyXG5cclxuICAgIC8vIGNvbnRyb2wgdmlzaWJpbGl0eVxyXG4gICAgY29uc3QgdmlzaWJpbGl0eUxpc3RlbmVyID0gdmlzaWJsZSA9PiB7dGhpcy52aXNpYmxlID0gdmlzaWJsZTt9O1xyXG4gICAgZHVhbEF0b21Nb2RlbC5tb3ZlbWVudEhpbnRWaXNpYmxlUHJvcGVydHkubGluayggdmlzaWJpbGl0eUxpc3RlbmVyICk7XHJcblxyXG4gICAgLy8gYWRkIHRoZSBkcmFnIGhhbmRsZXJcclxuICAgIGxldCBzdGFydERyYWdYO1xyXG4gICAgbGV0IGN1cnJlbnREcmFnWDtcclxuICAgIGxldCBwYXJ0aWNsZVN0YXJ0WFBvc2l0aW9uO1xyXG4gICAgY29uc3QgaW5wdXRMaXN0ZW5lciA9IG5ldyBEcmFnTGlzdGVuZXIoIHtcclxuXHJcbiAgICAgIHN0YXJ0OiBldmVudCA9PiB7XHJcblxyXG4gICAgICAgIC8vIFN0b3AgdGhlIG1vZGVsIGZyb20gbW92aW5nIHRoZSBwYXJ0aWNsZSBhdCB0aGUgc2FtZSB0aW1lIHRoZSB1c2VyIGlzIG1vdmluZyBpdC5cclxuICAgICAgICBkdWFsQXRvbU1vZGVsLnNldE1vdGlvblBhdXNlZCggdHJ1ZSApO1xyXG4gICAgICAgIHN0YXJ0RHJhZ1ggPSB0aGlzLmdsb2JhbFRvUGFyZW50UG9pbnQoIGV2ZW50LnBvaW50ZXIucG9pbnQgKS54O1xyXG4gICAgICAgIHBhcnRpY2xlU3RhcnRYUG9zaXRpb24gPSB0aGlzLnBhcnRpY2xlLmdldFgoKTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGRyYWc6IGV2ZW50ID0+IHtcclxuXHJcbiAgICAgICAgY3VycmVudERyYWdYID0gdGhpcy5nbG9iYWxUb1BhcmVudFBvaW50KCBldmVudC5wb2ludGVyLnBvaW50ICkueDtcclxuICAgICAgICBjb25zdCBkeCA9IGN1cnJlbnREcmFnWCAtIHN0YXJ0RHJhZ1g7XHJcbiAgICAgICAgY29uc3QgbmV3WFBvc2l0aW9uID0gTWF0aC5tYXgoXHJcbiAgICAgICAgICBwYXJ0aWNsZVN0YXJ0WFBvc2l0aW9uICsgbW9kZWxWaWV3VHJhbnNmb3JtLnZpZXdUb01vZGVsRGVsdGFYKCBkeCApLFxyXG4gICAgICAgICAgbW9kZWxWaWV3VHJhbnNmb3JtLnZpZXdUb01vZGVsWCggdGhpcy5taW5YIClcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBNb3ZlIHRoZSBwYXJ0aWNsZSBiYXNlZCBvbiB0aGUgYW1vdW50IG9mIHBvaW50ZXIgbW92ZW1lbnQuXHJcbiAgICAgICAgdGhpcy5wYXJ0aWNsZS5zZXRQb3NpdGlvbiggbmV3WFBvc2l0aW9uLCB0aGlzLnBhcnRpY2xlLmdldFkoKSApO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgZW5kOiAoKSA9PiB7XHJcblxyXG4gICAgICAgIC8vIExldCB0aGUgbW9kZWwgbW92ZSB0aGUgcGFydGljbGVzIGFnYWluLiAgTm90ZSB0aGF0IHRoaXMgaGFwcGVucyBldmVuIGlmIHRoZSBtb3Rpb24gd2FzIHBhdXNlZCBieSBzb21lIG90aGVyXHJcbiAgICAgICAgLy8gbWVhbnMuXHJcbiAgICAgICAgZHVhbEF0b21Nb2RlbC5zZXRNb3Rpb25QYXVzZWQoIGZhbHNlICk7XHJcbiAgICAgICAgZHVhbEF0b21Nb2RlbC5tb3ZlbWVudEhpbnRWaXNpYmxlUHJvcGVydHkuc2V0KCBmYWxzZSApO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdkcmFnTGlzdGVuZXInIClcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkSW5wdXRMaXN0ZW5lciggaW5wdXRMaXN0ZW5lciApO1xyXG5cclxuICAgIGNvbnN0IHBvc2l0aW9uTGlzdGVuZXIgPSBwb3NpdGlvbiA9PiB7XHJcbiAgICAgIHRoaXMueCA9IG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1goIHBvc2l0aW9uLnggKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gbW92ZSB0aGUgaGludCB3aXRoIHRoZSBwYXJ0aWNsZVxyXG4gICAgcGFydGljbGUucG9zaXRpb25Qcm9wZXJ0eS5saW5rKCBwb3NpdGlvbkxpc3RlbmVyICk7XHJcblxyXG4gICAgLy8gYWRkIGEgbGlua2VkIGVsZW1lbnQgaW4gcGhldC1pbyB0byB0aGUgcHJvcGVydHkgdGhhdCBjb250cm9scyB0aGlzIG5vZGUncyB2aXNpYmlsaXR5XHJcbiAgICB0aGlzLmFkZExpbmtlZEVsZW1lbnQoIGR1YWxBdG9tTW9kZWwubW92ZW1lbnRIaW50VmlzaWJsZVByb3BlcnR5LCB7XHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnbW92ZW1lbnRIaW50VmlzaWJsZVByb3BlcnR5JyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gZGlzcG9zZSBmdW5jdGlvblxyXG4gICAgdGhpcy5kaXNwb3NlSGFuZE5vZGUgPSAoKSA9PiB7XHJcbiAgICAgIHRoaXMucmVtb3ZlSW5wdXRMaXN0ZW5lciggaW5wdXRMaXN0ZW5lciApO1xyXG4gICAgICBwYXJ0aWNsZS5wb3NpdGlvblByb3BlcnR5LnVubGluayggcG9zaXRpb25MaXN0ZW5lciApO1xyXG4gICAgICBkdWFsQXRvbU1vZGVsLm1vdmVtZW50SGludFZpc2libGVQcm9wZXJ0eS51bmxpbmsoIHZpc2liaWxpdHlMaXN0ZW5lciApO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBkaXNwb3NlKCkge1xyXG4gICAgdGhpcy5kaXNwb3NlSGFuZE5vZGUoKTtcclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7U2NhbGVkQXRvbX0gcGFydGljbGVcclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgc2V0UGFydGljbGUoIHBhcnRpY2xlICkge1xyXG4gICAgdGhpcy5wYXJ0aWNsZSA9IHBhcnRpY2xlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHJldHVybnMge251bWJlcn1cclxuICAgKiBAcHVibGljXHJcbiAgICovXHJcbiAgZ2V0TWluWCgpIHtcclxuICAgIHJldHVybiB0aGlzLm1pblg7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge251bWJlcn0gbWluWFxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBzZXRNaW5YKCBtaW5YICkge1xyXG4gICAgdGhpcy5taW5YID0gbWluWDtcclxuICB9XHJcbn1cclxuXHJcbnN0YXRlc09mTWF0dGVyLnJlZ2lzdGVyKCAnSGFuZE5vZGUnLCBIYW5kTm9kZSApO1xyXG5leHBvcnQgZGVmYXVsdCBIYW5kTm9kZTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLEtBQUssTUFBTSxtQ0FBbUM7QUFDckQsT0FBT0MsUUFBUSxNQUFNLDZDQUE2QztBQUNsRSxTQUFTQyxZQUFZLEVBQUVDLEtBQUssRUFBRUMsSUFBSSxRQUFRLG1DQUFtQztBQUM3RSxPQUFPQyxNQUFNLE1BQU0saUNBQWlDO0FBQ3BELE9BQU9DLGNBQWMsTUFBTSx5QkFBeUI7O0FBRXBEO0FBQ0EsTUFBTUMsS0FBSyxHQUFHLEVBQUUsQ0FBQyxDQUFDOztBQUVsQixNQUFNQyxRQUFRLFNBQVNKLElBQUksQ0FBQztFQUUxQjtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFSyxXQUFXQSxDQUFFQyxhQUFhLEVBQUVDLFFBQVEsRUFBRUMsa0JBQWtCLEVBQUVDLElBQUksRUFBRUMsT0FBTyxFQUFHO0lBRXhFQSxPQUFPLEdBQUdkLEtBQUssQ0FBRTtNQUNmZSxNQUFNLEVBQUUsU0FBUztNQUNqQkMsTUFBTSxFQUFFWCxNQUFNLENBQUNZO0lBQ2pCLENBQUMsRUFBRUgsT0FBUSxDQUFDO0lBRVosS0FBSyxDQUFFQSxPQUFRLENBQUM7SUFDaEIsSUFBSSxDQUFDRCxJQUFJLEdBQUdBLElBQUksQ0FBQyxDQUFDOztJQUVsQjtJQUNBLElBQUksQ0FBQ0YsUUFBUSxHQUFHQSxRQUFROztJQUV4QjtJQUNBLElBQUksQ0FBQ08sUUFBUSxDQUFF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