// Copyright 2015-2023, University of Colorado Boulder

/**
 * This class displays a control panel for controlling the display of attractive, repulsive, and total force.
 *
 * @author John Blanco
 * @author Siddhartha Chinthapally (Actual Concepts)
 */

import merge from '../../../../phet-core/js/merge.js';
import ArrowNode from '../../../../scenery-phet/js/ArrowNode.js';
import BracketNode from '../../../../scenery-phet/js/BracketNode.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { HBox, HStrut, Node, Text, VBox, VStrut } from '../../../../scenery/js/imports.js';
import AccordionBox from '../../../../sun/js/AccordionBox.js';
import AquaRadioButtonGroup from '../../../../sun/js/AquaRadioButtonGroup.js';
import Tandem from '../../../../tandem/js/Tandem.js';
import SOMConstants from '../../common/SOMConstants.js';
import statesOfMatter from '../../statesOfMatter.js';
import StatesOfMatterStrings from '../../StatesOfMatterStrings.js';
import ForceDisplayMode from '../model/ForceDisplayMode.js';

//strings
const attractiveString = StatesOfMatterStrings.attractive;
const electronOverlapString = StatesOfMatterStrings.electronOverlap;
const forcesString = StatesOfMatterStrings.forces;
const hideForcesString = StatesOfMatterStrings.hideForces;
const repulsiveString = StatesOfMatterStrings.repulsive;
const totalForceString = StatesOfMatterStrings.totalForce;
const vanderwaalsString = StatesOfMatterStrings.vanderwaals;

// constants
const TEXT_LABEL_MAX_WIDTH = 175; // max width of text label in the panel
const RADIO_BUTTON_RADIUS = 6;
const ICON_PADDING = 35; // empirically determined to put the icons in a good position on the panel

class ForcesAccordionBox extends AccordionBox {
  /**
   * @param {Property.<string>} forcesProperty that determines which forces to display
   * @param {Property.<boolean>} forceControlPanelExpandProperty -true to use force panel expand, false if not
   * @param {Object} [options] for various panel display properties
   */
  constructor(forcesProperty, forceControlPanelExpandProperty, options) {
    // convenience function for creating text with the attributes needed by this panel
    const createTextNode = (string, width, fontSize) => {
      return new Text(string, {
        font: new PhetFont(fontSize),
        fill: options.textFill,
        maxWidth: width
      });
    };
    options = merge({
      xMargin: 5,
      yMargin: 8,
      fill: 'black',
      stroke: 'white',
      tickTextColor: 'black',
      textFill: 'black',
      buttonAlign: 'left',
      lineWidth: 1,
      showTitleWhenExpanded: true,
      minWidth: 0,
      maxWidth: Number.POSITIVE_INFINITY,
      expandedProperty: forceControlPanelExpandProperty,
      contentAlign: 'left',
      titleAlignX: 'left',
      cornerRadius: SOMConstants.PANEL_CORNER_RADIUS,
      contentYSpacing: 1,
      contentXSpacing: 3,
      contentXMargin: 10,
      buttonYMargin: 4,
      buttonXMargin: 10,
      expandCollapseButtonOptions: {
        touchAreaXDilation: 8,
        touchAreaYDilation: 3
      },
      tandem: Tandem.REQUIRED
    }, options);
    const accordionContent = new Node();
    const arrowEndX = 20;
    const arrowStartX = 0;
    const arrowY = 0;
    const arrowNodeOptions = {
      headHeight: 10,
      headWidth: 14,
      tailWidth: 6
    };
    const totalForceArrow = new ArrowNode(arrowEndX, arrowY, arrowStartX, arrowY, merge({
      fill: '#49B649'
    }, arrowNodeOptions));
    const attractiveArrow = new ArrowNode(arrowEndX, arrowY, arrowStartX, arrowY, merge({
      fill: '#FC9732'
    }, arrowNodeOptions));
    const repulsiveArrow = new ArrowNode(arrowStartX, arrowY, arrowEndX, arrowY, merge({
      fill: '#FD17FF'
    }, arrowNodeOptions));
    const hideForcesText = {
      label: createTextNode(hideForcesString, TEXT_LABEL_MAX_WIDTH * 0.65, 12)
    };
    const totalForceText = {
      label: createTextNode(totalForceString, TEXT_LABEL_MAX_WIDTH * 0.65, 12),
      icon: totalForceArrow
    };
    const attractiveText = {
      label: createTextNode(attractiveString, TEXT_LABEL_MAX_WIDTH * 0.6, 12),
      icon: attractiveArrow
    };
    const vanderwaalsText = {
      label: createTextNode(vanderwaalsString, TEXT_LABEL_MAX_WIDTH * 0.8, 11)
    };
    const repulsiveText = {
      label: createTextNode(repulsiveString, TEXT_LABEL_MAX_WIDTH * 0.6, 12),
      icon: repulsiveArrow
    };
    const electronOverlapText = {
      label: createTextNode(electronOverlapString, TEXT_LABEL_MAX_WIDTH * 0.8, 11)
    };

    // compute the maximum item width
    const widestItem = _.maxBy([hideForcesText, totalForceText, attractiveText, vanderwaalsText, repulsiveText, electronOverlapText], item => {
      return item.label.width + (item.icon ? item.icon.width + ICON_PADDING : 0);
    });
    const maxWidth = widestItem.label.width + (widestItem.icon ? widestItem.icon.width + ICON_PADDING : 0);

    // inserts a spacing node (HStrut) so that the text, space and image together occupy a certain fixed width
    const createConsistentlySpacedLabel = labelSpec => {
      if (labelSpec.icon) {
        const strutWidth = maxWidth - labelSpec.label.width - labelSpec.icon.width;
        return new HBox({
          children: [labelSpec.label, new HStrut(strutWidth), labelSpec.icon]
        });
      } else {
        return new HBox({
          children: [labelSpec.label]
        });
      }
    };
    const componentForceText = new VBox({
      spacing: 3,
      children: [createConsistentlySpacedLabel(attractiveText), createConsistentlySpacedLabel(vanderwaalsText), createConsistentlySpacedLabel(repulsiveText), createConsistentlySpacedLabel(electronOverlapText)],
      align: 'left'
    });

    // the bracket at the left - this is tweaked a bit for optimal appearance
    const bracket = new VBox({
      spacing: 0,
      children: [new VStrut(4), new BracketNode({
        orientation: 'left',
        bracketLength: componentForceText.height,
        bracketLineWidth: 2,
        bracketStroke: options.textFill,
        bracketTipPosition: 0.475
      })]
    });
    const bracketToTextSpacing = 2;
    const totalForceStrutWidth = maxWidth - totalForceText.label.width - totalForceText.icon.width + bracket.width + bracketToTextSpacing;
    const totalForceItem = new HBox({
      children: [totalForceText.label, new HStrut(totalForceStrutWidth), totalForceText.icon]
    });
    const radioButtonGroup = new AquaRadioButtonGroup(forcesProperty, [{
      createNode: () => new HBox({
        spacing: 2,
        children: [createConsistentlySpacedLabel(hideForcesText)]
      }),
      value: ForceDisplayMode.HIDDEN,
      tandemName: 'hideForceRadioButton'
    }, {
      createNode: () => new HBox({
        spacing: 2,
        children: [totalForceItem]
      }),
      value: ForceDisplayMode.TOTAL,
      tandemName: 'totalForceRadioButton'
    }, {
      createNode: () => new HBox({
        spacing: bracketToTextSpacing,
        children: [bracket, componentForceText]
      }),
      value: ForceDisplayMode.COMPONENTS,
      tandemName: 'componentForceRadioButton'
    }], {
      radioButtonOptions: {
        radius: RADIO_BUTTON_RADIUS
      },
      tandem: options.tandem.createTandem('radioButtonGroup')
    });
    accordionContent.addChild(radioButtonGroup);
    options.titleNode = createTextNode(forcesString, TEXT_LABEL_MAX_WIDTH * 0.9, 14);
    super(accordionContent, options);
  }

  /**
   * @public
   * @override
   */
  dispose() {
    super.dispose();
  }
}
statesOfMatter.register('ForcesAccordionBox', ForcesAccordionBox);
export default ForcesAccordionBox;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtZXJnZSIsIkFycm93Tm9kZSIsIkJyYWNrZXROb2RlIiwiUGhldEZvbnQiLCJIQm94IiwiSFN0cnV0IiwiTm9kZSIsIlRleHQiLCJWQm94IiwiVlN0cnV0IiwiQWNjb3JkaW9uQm94IiwiQXF1YVJhZGlvQnV0dG9uR3JvdXAiLCJUYW5kZW0iLCJTT01Db25zdGFudHMiLCJzdGF0ZXNPZk1hdHRlciIsIlN0YXRlc09mTWF0dGVyU3RyaW5ncyIsIkZvcmNlRGlzcGxheU1vZGUiLCJhdHRyYWN0aXZlU3RyaW5nIiwiYXR0cmFjdGl2ZSIsImVsZWN0cm9uT3ZlcmxhcFN0cmluZyIsImVsZWN0cm9uT3ZlcmxhcCIsImZvcmNlc1N0cmluZyIsImZvcmNlcyIsImhpZGVGb3JjZXNTdHJpbmciLCJoaWRlRm9yY2VzIiwicmVwdWxzaXZlU3RyaW5nIiwicmVwdWxzaXZlIiwidG90YWxGb3JjZVN0cmluZyIsInRvdGFsRm9yY2UiLCJ2YW5kZXJ3YWFsc1N0cmluZyIsInZhbmRlcndhYWxzIiwiVEVYVF9MQUJFTF9NQVhfV0lEVEgiLCJSQURJT19CVVRUT05fUkFESVVTIiwiSUNPTl9QQURESU5HIiwiRm9yY2VzQWNjb3JkaW9uQm94IiwiY29uc3RydWN0b3IiLCJmb3JjZXNQcm9wZXJ0eSIsImZvcmNlQ29udHJvbFBhbmVsRXhwYW5kUHJvcGVydHkiLCJvcHRpb25zIiwiY3JlYXRlVGV4dE5vZGUiLCJzdHJpbmciLCJ3aWR0aCIsImZvbnRTaXplIiwiZm9udCIsImZpbGwiLCJ0ZXh0RmlsbCIsIm1heFdpZHRoIiwieE1hcmdpbiIsInlNYXJnaW4iLCJzdHJva2UiLCJ0aWNrVGV4dENvbG9yIiwiYnV0dG9uQWxpZ24iLCJsaW5lV2lkdGgiLCJzaG93VGl0bGVXaGVuRXhwYW5kZWQiLCJtaW5XaWR0aCIsIk51bWJlciIsIlBPU0lUSVZFX0lORklOSVRZIiwiZXhwYW5kZWRQcm9wZXJ0eSIsImNvbnRlbnRBbGlnbiIsInRpdGxlQWxpZ25YIiwiY29ybmVyUmFkaXVzIiwiUEFORUxfQ09STkVSX1JBRElVUyIsImNvbnRlbnRZU3BhY2luZyIsImNvbnRlbnRYU3BhY2luZyIsImNvbnRlbnRYTWFyZ2luIiwiYnV0dG9uWU1hcmdpbiIsImJ1dHRvblhNYXJnaW4iLCJleHBhbmRDb2xsYXBzZUJ1dHRvbk9wdGlvbnMiLCJ0b3VjaEFyZWFYRGlsYXRpb24iLCJ0b3VjaEFyZWFZRGlsYXRpb24iLCJ0YW5kZW0iLCJSRVFVSVJFRCIsImFjY29yZGlvbkNvbnRlbnQiLCJhcnJvd0VuZFgiLCJhcnJvd1N0YXJ0WCIsImFycm93WSIsImFycm93Tm9kZU9wdGlvbnMiLCJoZWFkSGVpZ2h0IiwiaGVhZFdpZHRoIiwidGFpbFdpZHRoIiwidG90YWxGb3JjZUFycm93IiwiYXR0cmFjdGl2ZUFycm93IiwicmVwdWxzaXZlQXJyb3ciLCJoaWRlRm9yY2VzVGV4dCIsImxhYmVsIiwidG90YWxGb3JjZVRleHQiLCJpY29uIiwiYXR0cmFjdGl2ZVRleHQiLCJ2YW5kZXJ3YWFsc1RleHQiLCJyZXB1bHNpdmVUZXh0IiwiZWxlY3Ryb25PdmVybGFwVGV4dCIsIndpZGVzdEl0ZW0iLCJfIiwibWF4QnkiLCJpdGVtIiwiY3JlYXRlQ29uc2lzdGVudGx5U3BhY2VkTGFiZWwiLCJsYWJlbFNwZWMiLCJzdHJ1dFdpZHRoIiwiY2hpbGRyZW4iLCJjb21wb25lbnRGb3JjZVRleHQiLCJzcGFjaW5nIiwiYWxpZ24iLCJicmFja2V0Iiwib3JpZW50YXRpb24iLCJicmFja2V0TGVuZ3RoIiwiaGVpZ2h0IiwiYnJhY2tldExpbmVXaWR0aCIsImJyYWNrZXRTdHJva2UiLCJicmFja2V0VGlwUG9zaXRpb24iLCJicmFja2V0VG9UZXh0U3BhY2luZyIsInRvdGFsRm9yY2VTdHJ1dFdpZHRoIiwidG90YWxGb3JjZUl0ZW0iLCJyYWRpb0J1dHRvbkdyb3VwIiwiY3JlYXRlTm9kZSIsInZhbHVlIiwiSElEREVOIiwidGFuZGVtTmFtZSIsIlRPVEFMIiwiQ09NUE9ORU5UUyIsInJhZGlvQnV0dG9uT3B0aW9ucyIsInJhZGl1cyIsImNyZWF0ZVRhbmRlbSIsImFkZENoaWxkIiwidGl0bGVOb2RlIiwiZGlzcG9zZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiRm9yY2VzQWNjb3JkaW9uQm94LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE1LTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFRoaXMgY2xhc3MgZGlzcGxheXMgYSBjb250cm9sIHBhbmVsIGZvciBjb250cm9sbGluZyB0aGUgZGlzcGxheSBvZiBhdHRyYWN0aXZlLCByZXB1bHNpdmUsIGFuZCB0b3RhbCBmb3JjZS5cclxuICpcclxuICogQGF1dGhvciBKb2huIEJsYW5jb1xyXG4gKiBAYXV0aG9yIFNpZGRoYXJ0aGEgQ2hpbnRoYXBhbGx5IChBY3R1YWwgQ29uY2VwdHMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IG1lcmdlIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9tZXJnZS5qcyc7XHJcbmltcG9ydCBBcnJvd05vZGUgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL0Fycm93Tm9kZS5qcyc7XHJcbmltcG9ydCBCcmFja2V0Tm9kZSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvQnJhY2tldE5vZGUuanMnO1xyXG5pbXBvcnQgUGhldEZvbnQgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL1BoZXRGb250LmpzJztcclxuaW1wb3J0IHsgSEJveCwgSFN0cnV0LCBOb2RlLCBUZXh0LCBWQm94LCBWU3RydXQgfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgQWNjb3JkaW9uQm94IGZyb20gJy4uLy4uLy4uLy4uL3N1bi9qcy9BY2NvcmRpb25Cb3guanMnO1xyXG5pbXBvcnQgQXF1YVJhZGlvQnV0dG9uR3JvdXAgZnJvbSAnLi4vLi4vLi4vLi4vc3VuL2pzL0FxdWFSYWRpb0J1dHRvbkdyb3VwLmpzJztcclxuaW1wb3J0IFRhbmRlbSBmcm9tICcuLi8uLi8uLi8uLi90YW5kZW0vanMvVGFuZGVtLmpzJztcclxuaW1wb3J0IFNPTUNvbnN0YW50cyBmcm9tICcuLi8uLi9jb21tb24vU09NQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IHN0YXRlc09mTWF0dGVyIGZyb20gJy4uLy4uL3N0YXRlc09mTWF0dGVyLmpzJztcclxuaW1wb3J0IFN0YXRlc09mTWF0dGVyU3RyaW5ncyBmcm9tICcuLi8uLi9TdGF0ZXNPZk1hdHRlclN0cmluZ3MuanMnO1xyXG5pbXBvcnQgRm9yY2VEaXNwbGF5TW9kZSBmcm9tICcuLi9tb2RlbC9Gb3JjZURpc3BsYXlNb2RlLmpzJztcclxuXHJcbi8vc3RyaW5nc1xyXG5jb25zdCBhdHRyYWN0aXZlU3RyaW5nID0gU3RhdGVzT2ZNYXR0ZXJTdHJpbmdzLmF0dHJhY3RpdmU7XHJcbmNvbnN0IGVsZWN0cm9uT3ZlcmxhcFN0cmluZyA9IFN0YXRlc09mTWF0dGVyU3RyaW5ncy5lbGVjdHJvbk92ZXJsYXA7XHJcbmNvbnN0IGZvcmNlc1N0cmluZyA9IFN0YXRlc09mTWF0dGVyU3RyaW5ncy5mb3JjZXM7XHJcbmNvbnN0IGhpZGVGb3JjZXNTdHJpbmcgPSBTdGF0ZXNPZk1hdHRlclN0cmluZ3MuaGlkZUZvcmNlcztcclxuY29uc3QgcmVwdWxzaXZlU3RyaW5nID0gU3RhdGVzT2ZNYXR0ZXJTdHJpbmdzLnJlcHVsc2l2ZTtcclxuY29uc3QgdG90YWxGb3JjZVN0cmluZyA9IFN0YXRlc09mTWF0dGVyU3RyaW5ncy50b3RhbEZvcmNlO1xyXG5jb25zdCB2YW5kZXJ3YWFsc1N0cmluZyA9IFN0YXRlc09mTWF0dGVyU3RyaW5ncy52YW5kZXJ3YWFscztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBURVhUX0xBQkVMX01BWF9XSURUSCA9IDE3NTsgLy8gbWF4IHdpZHRoIG9mIHRleHQgbGFiZWwgaW4gdGhlIHBhbmVsXHJcbmNvbnN0IFJBRElPX0JVVFRPTl9SQURJVVMgPSA2O1xyXG5jb25zdCBJQ09OX1BBRERJTkcgPSAzNTsgLy8gZW1waXJpY2FsbHkgZGV0ZXJtaW5lZCB0byBwdXQgdGhlIGljb25zIGluIGEgZ29vZCBwb3NpdGlvbiBvbiB0aGUgcGFuZWxcclxuXHJcbmNsYXNzIEZvcmNlc0FjY29yZGlvbkJveCBleHRlbmRzIEFjY29yZGlvbkJveCB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7UHJvcGVydHkuPHN0cmluZz59IGZvcmNlc1Byb3BlcnR5IHRoYXQgZGV0ZXJtaW5lcyB3aGljaCBmb3JjZXMgdG8gZGlzcGxheVxyXG4gICAqIEBwYXJhbSB7UHJvcGVydHkuPGJvb2xlYW4+fSBmb3JjZUNvbnRyb2xQYW5lbEV4cGFuZFByb3BlcnR5IC10cnVlIHRvIHVzZSBmb3JjZSBwYW5lbCBleHBhbmQsIGZhbHNlIGlmIG5vdFxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gZm9yIHZhcmlvdXMgcGFuZWwgZGlzcGxheSBwcm9wZXJ0aWVzXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIGZvcmNlc1Byb3BlcnR5LCBmb3JjZUNvbnRyb2xQYW5lbEV4cGFuZFByb3BlcnR5LCBvcHRpb25zICkge1xyXG5cclxuICAgIC8vIGNvbnZlbmllbmNlIGZ1bmN0aW9uIGZvciBjcmVhdGluZyB0ZXh0IHdpdGggdGhlIGF0dHJpYnV0ZXMgbmVlZGVkIGJ5IHRoaXMgcGFuZWxcclxuICAgIGNvbnN0IGNyZWF0ZVRleHROb2RlID0gKCBzdHJpbmcsIHdpZHRoLCBmb250U2l6ZSApID0+IHtcclxuICAgICAgcmV0dXJuIG5ldyBUZXh0KCBzdHJpbmcsIHtcclxuICAgICAgICBmb250OiBuZXcgUGhldEZvbnQoIGZvbnRTaXplICksXHJcbiAgICAgICAgZmlsbDogb3B0aW9ucy50ZXh0RmlsbCxcclxuICAgICAgICBtYXhXaWR0aDogd2lkdGhcclxuICAgICAgfSApO1xyXG4gICAgfTtcclxuXHJcbiAgICBvcHRpb25zID0gbWVyZ2UoIHtcclxuICAgICAgeE1hcmdpbjogNSxcclxuICAgICAgeU1hcmdpbjogOCxcclxuICAgICAgZmlsbDogJ2JsYWNrJyxcclxuICAgICAgc3Ryb2tlOiAnd2hpdGUnLFxyXG4gICAgICB0aWNrVGV4dENvbG9yOiAnYmxhY2snLFxyXG4gICAgICB0ZXh0RmlsbDogJ2JsYWNrJyxcclxuICAgICAgYnV0dG9uQWxpZ246ICdsZWZ0JyxcclxuICAgICAgbGluZVdpZHRoOiAxLFxyXG4gICAgICBzaG93VGl0bGVXaGVuRXhwYW5kZWQ6IHRydWUsXHJcbiAgICAgIG1pbldpZHRoOiAwLFxyXG4gICAgICBtYXhXaWR0aDogTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLFxyXG4gICAgICBleHBhbmRlZFByb3BlcnR5OiBmb3JjZUNvbnRyb2xQYW5lbEV4cGFuZFByb3BlcnR5LFxyXG4gICAgICBjb250ZW50QWxpZ246ICdsZWZ0JyxcclxuICAgICAgdGl0bGVBbGlnblg6ICdsZWZ0JyxcclxuICAgICAgY29ybmVyUmFkaXVzOiBTT01Db25zdGFudHMuUEFORUxfQ09STkVSX1JBRElVUyxcclxuICAgICAgY29udGVudFlTcGFjaW5nOiAxLFxyXG4gICAgICBjb250ZW50WFNwYWNpbmc6IDMsXHJcbiAgICAgIGNvbnRlbnRYTWFyZ2luOiAxMCxcclxuICAgICAgYnV0dG9uWU1hcmdpbjogNCxcclxuICAgICAgYnV0dG9uWE1hcmdpbjogMTAsXHJcbiAgICAgIGV4cGFuZENvbGxhcHNlQnV0dG9uT3B0aW9uczoge1xyXG4gICAgICAgIHRvdWNoQXJlYVhEaWxhdGlvbjogOCxcclxuICAgICAgICB0b3VjaEFyZWFZRGlsYXRpb246IDNcclxuICAgICAgfSxcclxuICAgICAgdGFuZGVtOiBUYW5kZW0uUkVRVUlSRURcclxuICAgIH0sIG9wdGlvbnMgKTtcclxuXHJcbiAgICBjb25zdCBhY2NvcmRpb25Db250ZW50ID0gbmV3IE5vZGUoKTtcclxuICAgIGNvbnN0IGFycm93RW5kWCA9IDIwO1xyXG4gICAgY29uc3QgYXJyb3dTdGFydFggPSAwO1xyXG4gICAgY29uc3QgYXJyb3dZID0gMDtcclxuICAgIGNvbnN0IGFycm93Tm9kZU9wdGlvbnMgPSB7XHJcbiAgICAgIGhlYWRIZWlnaHQ6IDEwLFxyXG4gICAgICBoZWFkV2lkdGg6IDE0LFxyXG4gICAgICB0YWlsV2lkdGg6IDZcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgdG90YWxGb3JjZUFycm93ID0gbmV3IEFycm93Tm9kZSggYXJyb3dFbmRYLCBhcnJvd1ksIGFycm93U3RhcnRYLCBhcnJvd1ksIG1lcmdlKCB7XHJcbiAgICAgIGZpbGw6ICcjNDlCNjQ5J1xyXG4gICAgfSwgYXJyb3dOb2RlT3B0aW9ucyApICk7XHJcblxyXG4gICAgY29uc3QgYXR0cmFjdGl2ZUFycm93ID0gbmV3IEFycm93Tm9kZSggYXJyb3dFbmRYLCBhcnJvd1ksIGFycm93U3RhcnRYLCBhcnJvd1ksIG1lcmdlKCB7XHJcbiAgICAgIGZpbGw6ICcjRkM5NzMyJ1xyXG4gICAgfSwgYXJyb3dOb2RlT3B0aW9ucyApICk7XHJcblxyXG4gICAgY29uc3QgcmVwdWxzaXZlQXJyb3cgPSBuZXcgQXJyb3dOb2RlKCBhcnJvd1N0YXJ0WCwgYXJyb3dZLCBhcnJvd0VuZFgsIGFycm93WSwgbWVyZ2UoIHtcclxuICAgICAgZmlsbDogJyNGRDE3RkYnXHJcbiAgICB9LCBhcnJvd05vZGVPcHRpb25zICkgKTtcclxuXHJcbiAgICBjb25zdCBoaWRlRm9yY2VzVGV4dCA9IHsgbGFiZWw6IGNyZWF0ZVRleHROb2RlKCBoaWRlRm9yY2VzU3RyaW5nLCBURVhUX0xBQkVMX01BWF9XSURUSCAqIDAuNjUsIDEyICkgfTtcclxuXHJcbiAgICBjb25zdCB0b3RhbEZvcmNlVGV4dCA9IHtcclxuICAgICAgbGFiZWw6IGNyZWF0ZVRleHROb2RlKCB0b3RhbEZvcmNlU3RyaW5nLCBURVhUX0xBQkVMX01BWF9XSURUSCAqIDAuNjUsIDEyICksXHJcbiAgICAgIGljb246IHRvdGFsRm9yY2VBcnJvd1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBhdHRyYWN0aXZlVGV4dCA9IHtcclxuICAgICAgbGFiZWw6IGNyZWF0ZVRleHROb2RlKCBhdHRyYWN0aXZlU3RyaW5nLCBURVhUX0xBQkVMX01BWF9XSURUSCAqIDAuNiwgMTIgKSxcclxuICAgICAgaWNvbjogYXR0cmFjdGl2ZUFycm93XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHZhbmRlcndhYWxzVGV4dCA9IHtcclxuICAgICAgbGFiZWw6IGNyZWF0ZVRleHROb2RlKCB2YW5kZXJ3YWFsc1N0cmluZywgVEVYVF9MQUJFTF9NQVhfV0lEVEggKiAwLjgsIDExIClcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgcmVwdWxzaXZlVGV4dCA9IHtcclxuICAgICAgbGFiZWw6IGNyZWF0ZVRleHROb2RlKCByZXB1bHNpdmVTdHJpbmcsIFRFWFRfTEFCRUxfTUFYX1dJRFRIICogMC42LCAxMiApLFxyXG4gICAgICBpY29uOiByZXB1bHNpdmVBcnJvd1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBlbGVjdHJvbk92ZXJsYXBUZXh0ID0ge1xyXG4gICAgICBsYWJlbDogY3JlYXRlVGV4dE5vZGUoIGVsZWN0cm9uT3ZlcmxhcFN0cmluZywgVEVYVF9MQUJFTF9NQVhfV0lEVEggKiAwLjgsIDExIClcclxuICAgIH07XHJcblxyXG4gICAgLy8gY29tcHV0ZSB0aGUgbWF4aW11bSBpdGVtIHdpZHRoXHJcbiAgICBjb25zdCB3aWRlc3RJdGVtID0gXy5tYXhCeSggWyBoaWRlRm9yY2VzVGV4dCwgdG90YWxGb3JjZVRleHQsIGF0dHJhY3RpdmVUZXh0LCB2YW5kZXJ3YWFsc1RleHQsIHJlcHVsc2l2ZVRleHQsXHJcbiAgICAgIGVsZWN0cm9uT3ZlcmxhcFRleHQgXSwgaXRlbSA9PiB7XHJcbiAgICAgIHJldHVybiBpdGVtLmxhYmVsLndpZHRoICsgKCAoIGl0ZW0uaWNvbiApID8gaXRlbS5pY29uLndpZHRoICsgSUNPTl9QQURESU5HIDogMCApO1xyXG4gICAgfSApO1xyXG4gICAgY29uc3QgbWF4V2lkdGggPSB3aWRlc3RJdGVtLmxhYmVsLndpZHRoICsgKCAoIHdpZGVzdEl0ZW0uaWNvbiApID8gd2lkZXN0SXRlbS5pY29uLndpZHRoICsgSUNPTl9QQURESU5HIDogMCApO1xyXG5cclxuICAgIC8vIGluc2VydHMgYSBzcGFjaW5nIG5vZGUgKEhTdHJ1dCkgc28gdGhhdCB0aGUgdGV4dCwgc3BhY2UgYW5kIGltYWdlIHRvZ2V0aGVyIG9jY3VweSBhIGNlcnRhaW4gZml4ZWQgd2lkdGhcclxuICAgIGNvbnN0IGNyZWF0ZUNvbnNpc3RlbnRseVNwYWNlZExhYmVsID0gbGFiZWxTcGVjID0+IHtcclxuICAgICAgaWYgKCBsYWJlbFNwZWMuaWNvbiApIHtcclxuICAgICAgICBjb25zdCBzdHJ1dFdpZHRoID0gbWF4V2lkdGggLSBsYWJlbFNwZWMubGFiZWwud2lkdGggLSBsYWJlbFNwZWMuaWNvbi53aWR0aDtcclxuICAgICAgICByZXR1cm4gbmV3IEhCb3goIHsgY2hpbGRyZW46IFsgbGFiZWxTcGVjLmxhYmVsLCBuZXcgSFN0cnV0KCBzdHJ1dFdpZHRoICksIGxhYmVsU3BlYy5pY29uIF0gfSApO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBuZXcgSEJveCggeyBjaGlsZHJlbjogWyBsYWJlbFNwZWMubGFiZWwgXSB9ICk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgY29tcG9uZW50Rm9yY2VUZXh0ID0gbmV3IFZCb3goIHtcclxuICAgICAgc3BhY2luZzogMyxcclxuICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICBjcmVhdGVDb25zaXN0ZW50bHlTcGFjZWRMYWJlbCggYXR0cmFjdGl2ZVRleHQgKSxcclxuICAgICAgICBjcmVhdGVDb25zaXN0ZW50bHlTcGFjZWRMYWJlbCggdmFuZGVyd2FhbHNUZXh0ICksXHJcbiAgICAgICAgY3JlYXRlQ29uc2lzdGVudGx5U3BhY2VkTGFiZWwoIHJlcHVsc2l2ZVRleHQgKSxcclxuICAgICAgICBjcmVhdGVDb25zaXN0ZW50bHlTcGFjZWRMYWJlbCggZWxlY3Ryb25PdmVybGFwVGV4dCApIF0sXHJcbiAgICAgIGFsaWduOiAnbGVmdCdcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyB0aGUgYnJhY2tldCBhdCB0aGUgbGVmdCAtIHRoaXMgaXMgdHdlYWtlZCBhIGJpdCBmb3Igb3B0aW1hbCBhcHBlYXJhbmNlXHJcbiAgICBjb25zdCBicmFja2V0ID0gbmV3IFZCb3goIHtcclxuICAgICAgc3BhY2luZzogMCxcclxuICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICBuZXcgVlN0cnV0KCA0ICksXHJcbiAgICAgICAgbmV3IEJyYWNrZXROb2RlKCB7XHJcbiAgICAgICAgICBvcmllbnRhdGlvbjogJ2xlZnQnLFxyXG4gICAgICAgICAgYnJhY2tldExlbmd0aDogY29tcG9uZW50Rm9yY2VUZXh0LmhlaWdodCxcclxuICAgICAgICAgIGJyYWNrZXRMaW5lV2lkdGg6IDIsXHJcbiAgICAgICAgICBicmFja2V0U3Ryb2tlOiBvcHRpb25zLnRleHRGaWxsLFxyXG4gICAgICAgICAgYnJhY2tldFRpcFBvc2l0aW9uOiAwLjQ3NVxyXG4gICAgICAgIH0gKVxyXG4gICAgICBdXHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgYnJhY2tldFRvVGV4dFNwYWNpbmcgPSAyO1xyXG4gICAgY29uc3QgdG90YWxGb3JjZVN0cnV0V2lkdGggPSBtYXhXaWR0aCAtIHRvdGFsRm9yY2VUZXh0LmxhYmVsLndpZHRoIC0gdG90YWxGb3JjZVRleHQuaWNvbi53aWR0aCArIGJyYWNrZXQud2lkdGggKyBicmFja2V0VG9UZXh0U3BhY2luZztcclxuICAgIGNvbnN0IHRvdGFsRm9yY2VJdGVtID0gbmV3IEhCb3goIHtcclxuICAgICAgY2hpbGRyZW46IFsgdG90YWxGb3JjZVRleHQubGFiZWwsXHJcbiAgICAgICAgbmV3IEhTdHJ1dCggdG90YWxGb3JjZVN0cnV0V2lkdGggKSxcclxuICAgICAgICB0b3RhbEZvcmNlVGV4dC5pY29uIF1cclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCByYWRpb0J1dHRvbkdyb3VwID0gbmV3IEFxdWFSYWRpb0J1dHRvbkdyb3VwKFxyXG4gICAgICBmb3JjZXNQcm9wZXJ0eSxcclxuICAgICAgW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNyZWF0ZU5vZGU6ICgpID0+IG5ldyBIQm94KCB7IHNwYWNpbmc6IDIsIGNoaWxkcmVuOiBbIGNyZWF0ZUNvbnNpc3RlbnRseVNwYWNlZExhYmVsKCBoaWRlRm9yY2VzVGV4dCApIF0gfSApLFxyXG4gICAgICAgICAgdmFsdWU6IEZvcmNlRGlzcGxheU1vZGUuSElEREVOLFxyXG4gICAgICAgICAgdGFuZGVtTmFtZTogJ2hpZGVGb3JjZVJhZGlvQnV0dG9uJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY3JlYXRlTm9kZTogKCkgPT4gbmV3IEhCb3goIHsgc3BhY2luZzogMiwgY2hpbGRyZW46IFsgdG90YWxGb3JjZUl0ZW0gXSB9ICksXHJcbiAgICAgICAgICB2YWx1ZTogRm9yY2VEaXNwbGF5TW9kZS5UT1RBTCxcclxuICAgICAgICAgIHRhbmRlbU5hbWU6ICd0b3RhbEZvcmNlUmFkaW9CdXR0b24nXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjcmVhdGVOb2RlOiAoKSA9PiBuZXcgSEJveCgge1xyXG4gICAgICAgICAgICBzcGFjaW5nOiBicmFja2V0VG9UZXh0U3BhY2luZyxcclxuICAgICAgICAgICAgY2hpbGRyZW46IFsgYnJhY2tldCwgY29tcG9uZW50Rm9yY2VUZXh0IF1cclxuICAgICAgICAgIH0gKSxcclxuICAgICAgICAgIHZhbHVlOiBGb3JjZURpc3BsYXlNb2RlLkNPTVBPTkVOVFMsXHJcbiAgICAgICAgICB0YW5kZW1OYW1lOiAnY29tcG9uZW50Rm9yY2VSYWRpb0J1dHRvbidcclxuICAgICAgICB9XHJcbiAgICAgIF0sXHJcbiAgICAgIHtcclxuICAgICAgICByYWRpb0J1dHRvbk9wdGlvbnM6IHtcclxuICAgICAgICAgIHJhZGl1czogUkFESU9fQlVUVE9OX1JBRElVU1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdyYWRpb0J1dHRvbkdyb3VwJyApXHJcbiAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgYWNjb3JkaW9uQ29udGVudC5hZGRDaGlsZCggcmFkaW9CdXR0b25Hcm91cCApO1xyXG4gICAgb3B0aW9ucy50aXRsZU5vZGUgPSBjcmVhdGVUZXh0Tm9kZSggZm9yY2VzU3RyaW5nLCBURVhUX0xBQkVMX01BWF9XSURUSCAqIDAuOSwgMTQgKTtcclxuXHJcbiAgICBzdXBlciggYWNjb3JkaW9uQ29udGVudCwgb3B0aW9ucyApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHB1YmxpY1xyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqL1xyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgfVxyXG59XHJcblxyXG5zdGF0ZXNPZk1hdHRlci5yZWdpc3RlciggJ0ZvcmNlc0FjY29yZGlvbkJveCcsIEZvcmNlc0FjY29yZGlvbkJveCApO1xyXG5leHBvcnQgZGVmYXVsdCBGb3JjZXNBY2NvcmRpb25Cb3g7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsS0FBSyxNQUFNLG1DQUFtQztBQUNyRCxPQUFPQyxTQUFTLE1BQU0sMENBQTBDO0FBQ2hFLE9BQU9DLFdBQVcsTUFBTSw0Q0FBNEM7QUFDcEUsT0FBT0MsUUFBUSxNQUFNLHlDQUF5QztBQUM5RCxTQUFTQyxJQUFJLEVBQUVDLE1BQU0sRUFBRUMsSUFBSSxFQUFFQyxJQUFJLEVBQUVDLElBQUksRUFBRUMsTUFBTSxRQUFRLG1DQUFtQztBQUMxRixPQUFPQyxZQUFZLE1BQU0sb0NBQW9DO0FBQzdELE9BQU9DLG9CQUFvQixNQUFNLDRDQUE0QztBQUM3RSxPQUFPQyxN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