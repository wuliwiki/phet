// Copyright 2014-2022, University of Colorado Boulder

/**
 * This class extends the interaction potential diagram to allow the user to adjust the interaction strength parameter
 * (i.e. epsilon) through direct interaction with the graph.
 *
 * @author John Blanco
 * @author Siddhartha Chinthapally (Actual Concepts)
 */

import Multilink from '../../../../axon/js/Multilink.js';
import Bounds2 from '../../../../dot/js/Bounds2.js';
import Utils from '../../../../dot/js/Utils.js';
import merge from '../../../../phet-core/js/merge.js';
import ArrowNode from '../../../../scenery-phet/js/ArrowNode.js';
import { Color, DragListener, PressListener, Rectangle } from '../../../../scenery/js/imports.js';
import Tandem from '../../../../tandem/js/Tandem.js';
import SOMConstants from '../../common/SOMConstants.js';
import SubstanceType from '../../common/SubstanceType.js';
import InteractionPotentialCanvasNode from '../../common/view/InteractionPotentialCanvasNode.js';
import PotentialGraphNode from '../../common/view/PotentialGraphNode.js';
import statesOfMatter from '../../statesOfMatter.js';

// Size of handles as function of node width.
const RESIZE_HANDLE_SIZE_PROPORTION = 0.18;

// Position of handle as function of node width.
const EPSILON_HANDLE_OFFSET_PROPORTION = 0.08;

// other constants
const RESIZE_HANDLE_NORMAL_COLOR = '#32FE00';
const RESIZE_HANDLE_HIGHLIGHTED_COLOR = new Color(153, 255, 0);
const EPSILON_LINE_COLOR = RESIZE_HANDLE_NORMAL_COLOR;
const POTENTIAL_LINE_COLOR = new Color('red');
class EpsilonControlPotentialGraph extends PotentialGraphNode {
  /**
   * @param {number} sigma - atom diameter
   * @param {number} epsilon - interaction strength
   * @param {PhaseChangesModel} phaseChangesModel - model of the simulation
   * @param {Object} [options] that can be passed on to the underlying node
   */
  constructor(sigma, epsilon, phaseChangesModel, options) {
    options = merge({
      tandem: Tandem.REQUIRED
    }, options);
    super(sigma, epsilon, {
      allowInteraction: true,
      tandem: options.tandem
    });

    // @public, read-only - flag that signifies if interaction is enabled,
    this.interactionEnabled = false;

    // variables used to track dragging of controls related to epsilon value
    let startDragY;
    let endDragY;

    // Add the line that will indicate the value of epsilon.
    const controlLineLength = EPSILON_HANDLE_OFFSET_PROPORTION * this.widthOfGraph * 2.2;
    this.epsilonControls.line = new Rectangle(-controlLineLength / 2, 0, controlLineLength, 1, {
      cursor: 'ns-resize',
      pickable: true,
      fill: EPSILON_LINE_COLOR,
      stroke: EPSILON_LINE_COLOR,
      tandem: this.interactiveControlsLayer.tandem.createTandem('epsilonLine'),
      phetioReadOnly: true
    });
    this.interactiveControlsLayer.addChild(this.epsilonControls.line);
    this.epsilonControls.line.touchArea = this.epsilonControls.line.localBounds.dilatedXY(20, 20);

    // Highlight this control when the user is hovering over it and/or using it.
    const epsilonLinePressListener = new PressListener({
      attach: false,
      tandem: Tandem.OPT_OUT
    });
    this.epsilonControls.line.addInputListener(epsilonLinePressListener);
    epsilonLinePressListener.isHighlightedProperty.link(isHighlighted => {
      this.epsilonControls.line.stroke = isHighlighted ? RESIZE_HANDLE_HIGHLIGHTED_COLOR : RESIZE_HANDLE_NORMAL_COLOR;
    });

    // drag listener
    this.epsilonControls.line.addInputListener(new DragListener({
      start: event => {
        startDragY = this.epsilonControls.line.globalToParentPoint(event.pointer.point).y;
      },
      drag: event => {
        endDragY = this.epsilonControls.line.globalToParentPoint(event.pointer.point).y;
        const d = endDragY - startDragY;
        startDragY = endDragY;
        const scaleFactor = SOMConstants.MAX_EPSILON / (this.getGraphHeight() / 2);
        phaseChangesModel.adjustableAtomInteractionStrengthProperty.set(Utils.clamp(phaseChangesModel.getEpsilon() + d * scaleFactor, SOMConstants.MIN_ADJUSTABLE_EPSILON, SOMConstants.MAX_ADJUSTABLE_EPSILON));
        this.drawPotentialCurve();
      },
      tandem: this.epsilonControls.line.tandem.createTandem('dragListener')
    }));

    // Add the arrow node that will allow the user to control the value of the epsilon parameter.
    this.epsilonControls.arrow = new ArrowNode(0, -RESIZE_HANDLE_SIZE_PROPORTION * this.widthOfGraph / 2, 0, RESIZE_HANDLE_SIZE_PROPORTION * this.widthOfGraph / 2, {
      headHeight: 10,
      headWidth: 15,
      tailWidth: 6,
      fill: RESIZE_HANDLE_NORMAL_COLOR,
      stroke: 'black',
      doubleHead: true,
      pickable: true,
      cursor: 'pointer',
      tandem: this.interactiveControlsLayer.tandem.createTandem('epsilonArrow'),
      phetioReadOnly: true
    });
    this.interactiveControlsLayer.addChild(this.epsilonControls.arrow);
    this.epsilonControls.arrow.addInputListener(new DragListener({
      start: event => {
        startDragY = this.epsilonControls.arrow.globalToParentPoint(event.pointer.point).y;
      },
      drag: event => {
        endDragY = this.epsilonControls.arrow.globalToParentPoint(event.pointer.point).y;
        const d = endDragY - startDragY;
        startDragY = endDragY;
        const scaleFactor = SOMConstants.MAX_EPSILON / (this.getGraphHeight() / 2);
        phaseChangesModel.adjustableAtomInteractionStrengthProperty.set(Utils.clamp(phaseChangesModel.getEpsilon() + d * scaleFactor, SOMConstants.MIN_ADJUSTABLE_EPSILON, SOMConstants.MAX_ADJUSTABLE_EPSILON));
        this.drawPotentialCurve();
      },
      tandem: this.epsilonControls.arrow.tandem.createTandem('dragListener')
    }));
    const epsilonArrowPressListener = new PressListener({
      attach: false,
      tandem: Tandem.OPT_OUT
    });
    this.epsilonControls.arrow.addInputListener(epsilonArrowPressListener);
    epsilonArrowPressListener.isHighlightedProperty.link(isHighlighted => {
      this.epsilonControls.arrow.fill = isHighlighted ? RESIZE_HANDLE_HIGHLIGHTED_COLOR : RESIZE_HANDLE_NORMAL_COLOR;
    });
    this.interactionPotentialCanvasNode = new InteractionPotentialCanvasNode(this, {
      canvasBounds: new Bounds2(0, 0, 125, this.graphHeight)
    });

    // Update the graph when the substance or interaction strength changes.
    Multilink.multilink([phaseChangesModel.substanceProperty, phaseChangesModel.adjustableAtomInteractionStrengthProperty], substance => {
      this.interactionEnabled = substance === SubstanceType.ADJUSTABLE_ATOM;
      this.setLjPotentialParameters(phaseChangesModel.getSigma(), phaseChangesModel.getEpsilon());
      this.drawPotentialCurve();
    });
  }

  /**
   * This is an override of the method in the base class that draws the curve on the graph, and this override draws the
   * controls that allow the user to interact with the graph.
   * @private
   * @override
   */
  drawPotentialCurve() {
    // draw potential curve
    if (this.interactionPotentialCanvasNode !== undefined) {
      this.interactionPotentialCanvasNode.update(POTENTIAL_LINE_COLOR);
    }
  }
}
statesOfMatter.register('EpsilonControlPotentialGraph', EpsilonControlPotentialGraph);
export default EpsilonControlPotentialGraph;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNdWx0aWxpbmsiLCJCb3VuZHMyIiwiVXRpbHMiLCJtZXJnZSIsIkFycm93Tm9kZSIsIkNvbG9yIiwiRHJhZ0xpc3RlbmVyIiwiUHJlc3NMaXN0ZW5lciIsIlJlY3RhbmdsZSIsIlRhbmRlbSIsIlNPTUNvbnN0YW50cyIsIlN1YnN0YW5jZVR5cGUiLCJJbnRlcmFjdGlvblBvdGVudGlhbENhbnZhc05vZGUiLCJQb3RlbnRpYWxHcmFwaE5vZGUiLCJzdGF0ZXNPZk1hdHRlciIsIlJFU0laRV9IQU5ETEVfU0laRV9QUk9QT1JUSU9OIiwiRVBTSUxPTl9IQU5ETEVfT0ZGU0VUX1BST1BPUlRJT04iLCJSRVNJWkVfSEFORExFX05PUk1BTF9DT0xPUiIsIlJFU0laRV9IQU5ETEVfSElHSExJR0hURURfQ09MT1IiLCJFUFNJTE9OX0xJTkVfQ09MT1IiLCJQT1RFTlRJQUxfTElORV9DT0xPUiIsIkVwc2lsb25Db250cm9sUG90ZW50aWFsR3JhcGgiLCJjb25zdHJ1Y3RvciIsInNpZ21hIiwiZXBzaWxvbiIsInBoYXNlQ2hhbmdlc01vZGVsIiwib3B0aW9ucyIsInRhbmRlbSIsIlJFUVVJUkVEIiwiYWxsb3dJbnRlcmFjdGlvbiIsImludGVyYWN0aW9uRW5hYmxlZCIsInN0YXJ0RHJhZ1kiLCJlbmREcmFnWSIsImNvbnRyb2xMaW5lTGVuZ3RoIiwid2lkdGhPZkdyYXBoIiwiZXBzaWxvbkNvbnRyb2xzIiwibGluZSIsImN1cnNvciIsInBpY2thYmxlIiwiZmlsbCIsInN0cm9rZSIsImludGVyYWN0aXZlQ29udHJvbHNMYXllciIsImNyZWF0ZVRhbmRlbSIsInBoZXRpb1JlYWRPbmx5IiwiYWRkQ2hpbGQiLCJ0b3VjaEFyZWEiLCJsb2NhbEJvdW5kcyIsImRpbGF0ZWRYWSIsImVwc2lsb25MaW5lUHJlc3NMaXN0ZW5lciIsImF0dGFjaCIsIk9QVF9PVVQiLCJhZGRJbnB1dExpc3RlbmVyIiwiaXNIaWdobGlnaHRlZFByb3BlcnR5IiwibGluayIsImlzSGlnaGxpZ2h0ZWQiLCJzdGFydCIsImV2ZW50IiwiZ2xvYmFsVG9QYXJlbnRQb2ludCIsInBvaW50ZXIiLCJwb2ludCIsInkiLCJkcmFnIiwiZCIsInNjYWxlRmFjdG9yIiwiTUFYX0VQU0lMT04iLCJnZXRHcmFwaEhlaWdodCIsImFkanVzdGFibGVBdG9tSW50ZXJhY3Rpb25TdHJlbmd0aFByb3BlcnR5Iiwic2V0IiwiY2xhbXAiLCJnZXRFcHNpbG9uIiwiTUlOX0FESlVTVEFCTEVfRVBTSUxPTiIsIk1BWF9BREpVU1RBQkxFX0VQU0lMT04iLCJkcmF3UG90ZW50aWFsQ3VydmUiLCJhcnJvdyIsImhlYWRIZWlnaHQiLCJoZWFkV2lkdGgiLCJ0YWlsV2lkdGgiLCJkb3VibGVIZWFkIiwiZXBzaWxvbkFycm93UHJlc3NMaXN0ZW5lciIsImludGVyYWN0aW9uUG90ZW50aWFsQ2FudmFzTm9kZSIsImNhbnZhc0JvdW5kcyIsImdyYXBoSGVpZ2h0IiwibXVsdGlsaW5rIiwic3Vic3RhbmNlUHJvcGVydHkiLCJzdWJzdGFuY2UiLCJBREpVU1RBQkxFX0FUT00iLCJzZXRMalBvdGVudGlhbFBhcmFtZXRlcnMiLCJnZXRTaWdtYSIsInVuZGVmaW5lZCIsInVwZGF0ZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiRXBzaWxvbkNvbnRyb2xQb3RlbnRpYWxHcmFwaC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNC0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBUaGlzIGNsYXNzIGV4dGVuZHMgdGhlIGludGVyYWN0aW9uIHBvdGVudGlhbCBkaWFncmFtIHRvIGFsbG93IHRoZSB1c2VyIHRvIGFkanVzdCB0aGUgaW50ZXJhY3Rpb24gc3RyZW5ndGggcGFyYW1ldGVyXHJcbiAqIChpLmUuIGVwc2lsb24pIHRocm91Z2ggZGlyZWN0IGludGVyYWN0aW9uIHdpdGggdGhlIGdyYXBoLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvaG4gQmxhbmNvXHJcbiAqIEBhdXRob3IgU2lkZGhhcnRoYSBDaGludGhhcGFsbHkgKEFjdHVhbCBDb25jZXB0cylcclxuICovXHJcblxyXG5pbXBvcnQgTXVsdGlsaW5rIGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvTXVsdGlsaW5rLmpzJztcclxuaW1wb3J0IEJvdW5kczIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL0JvdW5kczIuanMnO1xyXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1V0aWxzLmpzJztcclxuaW1wb3J0IG1lcmdlIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9tZXJnZS5qcyc7XHJcbmltcG9ydCBBcnJvd05vZGUgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL0Fycm93Tm9kZS5qcyc7XHJcbmltcG9ydCB7IENvbG9yLCBEcmFnTGlzdGVuZXIsIFByZXNzTGlzdGVuZXIsIFJlY3RhbmdsZSB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBUYW5kZW0gZnJvbSAnLi4vLi4vLi4vLi4vdGFuZGVtL2pzL1RhbmRlbS5qcyc7XHJcbmltcG9ydCBTT01Db25zdGFudHMgZnJvbSAnLi4vLi4vY29tbW9uL1NPTUNvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBTdWJzdGFuY2VUeXBlIGZyb20gJy4uLy4uL2NvbW1vbi9TdWJzdGFuY2VUeXBlLmpzJztcclxuaW1wb3J0IEludGVyYWN0aW9uUG90ZW50aWFsQ2FudmFzTm9kZSBmcm9tICcuLi8uLi9jb21tb24vdmlldy9JbnRlcmFjdGlvblBvdGVudGlhbENhbnZhc05vZGUuanMnO1xyXG5pbXBvcnQgUG90ZW50aWFsR3JhcGhOb2RlIGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L1BvdGVudGlhbEdyYXBoTm9kZS5qcyc7XHJcbmltcG9ydCBzdGF0ZXNPZk1hdHRlciBmcm9tICcuLi8uLi9zdGF0ZXNPZk1hdHRlci5qcyc7XHJcblxyXG4vLyBTaXplIG9mIGhhbmRsZXMgYXMgZnVuY3Rpb24gb2Ygbm9kZSB3aWR0aC5cclxuY29uc3QgUkVTSVpFX0hBTkRMRV9TSVpFX1BST1BPUlRJT04gPSAwLjE4O1xyXG5cclxuLy8gUG9zaXRpb24gb2YgaGFuZGxlIGFzIGZ1bmN0aW9uIG9mIG5vZGUgd2lkdGguXHJcbmNvbnN0IEVQU0lMT05fSEFORExFX09GRlNFVF9QUk9QT1JUSU9OID0gMC4wODtcclxuXHJcbi8vIG90aGVyIGNvbnN0YW50c1xyXG5jb25zdCBSRVNJWkVfSEFORExFX05PUk1BTF9DT0xPUiA9ICcjMzJGRTAwJztcclxuY29uc3QgUkVTSVpFX0hBTkRMRV9ISUdITElHSFRFRF9DT0xPUiA9IG5ldyBDb2xvciggMTUzLCAyNTUsIDAgKTtcclxuY29uc3QgRVBTSUxPTl9MSU5FX0NPTE9SID0gUkVTSVpFX0hBTkRMRV9OT1JNQUxfQ09MT1I7XHJcbmNvbnN0IFBPVEVOVElBTF9MSU5FX0NPTE9SID0gbmV3IENvbG9yKCAncmVkJyApO1xyXG5cclxuY2xhc3MgRXBzaWxvbkNvbnRyb2xQb3RlbnRpYWxHcmFwaCBleHRlbmRzIFBvdGVudGlhbEdyYXBoTm9kZSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzaWdtYSAtIGF0b20gZGlhbWV0ZXJcclxuICAgKiBAcGFyYW0ge251bWJlcn0gZXBzaWxvbiAtIGludGVyYWN0aW9uIHN0cmVuZ3RoXHJcbiAgICogQHBhcmFtIHtQaGFzZUNoYW5nZXNNb2RlbH0gcGhhc2VDaGFuZ2VzTW9kZWwgLSBtb2RlbCBvZiB0aGUgc2ltdWxhdGlvblxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gdGhhdCBjYW4gYmUgcGFzc2VkIG9uIHRvIHRoZSB1bmRlcmx5aW5nIG5vZGVcclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvciggc2lnbWEsIGVwc2lsb24sIHBoYXNlQ2hhbmdlc01vZGVsLCBvcHRpb25zICkge1xyXG5cclxuICAgIG9wdGlvbnMgPSBtZXJnZSggeyB0YW5kZW06IFRhbmRlbS5SRVFVSVJFRCB9LCBvcHRpb25zICk7XHJcblxyXG4gICAgc3VwZXIoIHNpZ21hLCBlcHNpbG9uLCB7XHJcbiAgICAgIGFsbG93SW50ZXJhY3Rpb246IHRydWUsXHJcbiAgICAgIHRhbmRlbTogb3B0aW9ucy50YW5kZW1cclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBAcHVibGljLCByZWFkLW9ubHkgLSBmbGFnIHRoYXQgc2lnbmlmaWVzIGlmIGludGVyYWN0aW9uIGlzIGVuYWJsZWQsXHJcbiAgICB0aGlzLmludGVyYWN0aW9uRW5hYmxlZCA9IGZhbHNlO1xyXG5cclxuICAgIC8vIHZhcmlhYmxlcyB1c2VkIHRvIHRyYWNrIGRyYWdnaW5nIG9mIGNvbnRyb2xzIHJlbGF0ZWQgdG8gZXBzaWxvbiB2YWx1ZVxyXG4gICAgbGV0IHN0YXJ0RHJhZ1k7XHJcbiAgICBsZXQgZW5kRHJhZ1k7XHJcblxyXG4gICAgLy8gQWRkIHRoZSBsaW5lIHRoYXQgd2lsbCBpbmRpY2F0ZSB0aGUgdmFsdWUgb2YgZXBzaWxvbi5cclxuICAgIGNvbnN0IGNvbnRyb2xMaW5lTGVuZ3RoID0gRVBTSUxPTl9IQU5ETEVfT0ZGU0VUX1BST1BPUlRJT04gKiB0aGlzLndpZHRoT2ZHcmFwaCAqIDIuMjtcclxuICAgIHRoaXMuZXBzaWxvbkNvbnRyb2xzLmxpbmUgPSBuZXcgUmVjdGFuZ2xlKCAtY29udHJvbExpbmVMZW5ndGggLyAyLCAwLCBjb250cm9sTGluZUxlbmd0aCwgMSwge1xyXG4gICAgICBjdXJzb3I6ICducy1yZXNpemUnLFxyXG4gICAgICBwaWNrYWJsZTogdHJ1ZSxcclxuICAgICAgZmlsbDogRVBTSUxPTl9MSU5FX0NPTE9SLFxyXG4gICAgICBzdHJva2U6IEVQU0lMT05fTElORV9DT0xPUixcclxuICAgICAgdGFuZGVtOiB0aGlzLmludGVyYWN0aXZlQ29udHJvbHNMYXllci50YW5kZW0uY3JlYXRlVGFuZGVtKCAnZXBzaWxvbkxpbmUnICksXHJcbiAgICAgIHBoZXRpb1JlYWRPbmx5OiB0cnVlXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmludGVyYWN0aXZlQ29udHJvbHNMYXllci5hZGRDaGlsZCggdGhpcy5lcHNpbG9uQ29udHJvbHMubGluZSApO1xyXG4gICAgdGhpcy5lcHNpbG9uQ29udHJvbHMubGluZS50b3VjaEFyZWEgPSB0aGlzLmVwc2lsb25Db250cm9scy5saW5lLmxvY2FsQm91bmRzLmRpbGF0ZWRYWSggMjAsIDIwICk7XHJcblxyXG4gICAgLy8gSGlnaGxpZ2h0IHRoaXMgY29udHJvbCB3aGVuIHRoZSB1c2VyIGlzIGhvdmVyaW5nIG92ZXIgaXQgYW5kL29yIHVzaW5nIGl0LlxyXG4gICAgY29uc3QgZXBzaWxvbkxpbmVQcmVzc0xpc3RlbmVyID0gbmV3IFByZXNzTGlzdGVuZXIoIHsgYXR0YWNoOiBmYWxzZSwgdGFuZGVtOiBUYW5kZW0uT1BUX09VVCB9ICk7XHJcbiAgICB0aGlzLmVwc2lsb25Db250cm9scy5saW5lLmFkZElucHV0TGlzdGVuZXIoIGVwc2lsb25MaW5lUHJlc3NMaXN0ZW5lciApO1xyXG4gICAgZXBzaWxvbkxpbmVQcmVzc0xpc3RlbmVyLmlzSGlnaGxpZ2h0ZWRQcm9wZXJ0eS5saW5rKCBpc0hpZ2hsaWdodGVkID0+IHtcclxuICAgICAgdGhpcy5lcHNpbG9uQ29udHJvbHMubGluZS5zdHJva2UgPSBpc0hpZ2hsaWdodGVkID8gUkVTSVpFX0hBTkRMRV9ISUdITElHSFRFRF9DT0xPUiA6IFJFU0laRV9IQU5ETEVfTk9STUFMX0NPTE9SO1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIGRyYWcgbGlzdGVuZXJcclxuICAgIHRoaXMuZXBzaWxvbkNvbnRyb2xzLmxpbmUuYWRkSW5wdXRMaXN0ZW5lciggbmV3IERyYWdMaXN0ZW5lcigge1xyXG5cclxuICAgICAgc3RhcnQ6IGV2ZW50ID0+IHtcclxuICAgICAgICBzdGFydERyYWdZID0gdGhpcy5lcHNpbG9uQ29udHJvbHMubGluZS5nbG9iYWxUb1BhcmVudFBvaW50KCBldmVudC5wb2ludGVyLnBvaW50ICkueTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGRyYWc6IGV2ZW50ID0+IHtcclxuICAgICAgICBlbmREcmFnWSA9IHRoaXMuZXBzaWxvbkNvbnRyb2xzLmxpbmUuZ2xvYmFsVG9QYXJlbnRQb2ludCggZXZlbnQucG9pbnRlci5wb2ludCApLnk7XHJcbiAgICAgICAgY29uc3QgZCA9IGVuZERyYWdZIC0gc3RhcnREcmFnWTtcclxuICAgICAgICBzdGFydERyYWdZID0gZW5kRHJhZ1k7XHJcbiAgICAgICAgY29uc3Qgc2NhbGVGYWN0b3IgPSBTT01Db25zdGFudHMuTUFYX0VQU0lMT04gLyAoIHRoaXMuZ2V0R3JhcGhIZWlnaHQoKSAvIDIgKTtcclxuICAgICAgICBwaGFzZUNoYW5nZXNNb2RlbC5hZGp1c3RhYmxlQXRvbUludGVyYWN0aW9uU3RyZW5ndGhQcm9wZXJ0eS5zZXQoXHJcbiAgICAgICAgICBVdGlscy5jbGFtcChcclxuICAgICAgICAgICAgcGhhc2VDaGFuZ2VzTW9kZWwuZ2V0RXBzaWxvbigpICsgKCBkICogc2NhbGVGYWN0b3IgKSxcclxuICAgICAgICAgICAgU09NQ29uc3RhbnRzLk1JTl9BREpVU1RBQkxFX0VQU0lMT04sXHJcbiAgICAgICAgICAgIFNPTUNvbnN0YW50cy5NQVhfQURKVVNUQUJMRV9FUFNJTE9OXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLmRyYXdQb3RlbnRpYWxDdXJ2ZSgpO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgdGFuZGVtOiB0aGlzLmVwc2lsb25Db250cm9scy5saW5lLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdkcmFnTGlzdGVuZXInIClcclxuICAgIH0gKSApO1xyXG5cclxuICAgIC8vIEFkZCB0aGUgYXJyb3cgbm9kZSB0aGF0IHdpbGwgYWxsb3cgdGhlIHVzZXIgdG8gY29udHJvbCB0aGUgdmFsdWUgb2YgdGhlIGVwc2lsb24gcGFyYW1ldGVyLlxyXG4gICAgdGhpcy5lcHNpbG9uQ29udHJvbHMuYXJyb3cgPSBuZXcgQXJyb3dOb2RlKFxyXG4gICAgICAwLFxyXG4gICAgICAtUkVTSVpFX0hBTkRMRV9TSVpFX1BST1BPUlRJT04gKiB0aGlzLndpZHRoT2ZHcmFwaCAvIDIsXHJcbiAgICAgIDAsXHJcbiAgICAgIFJFU0laRV9IQU5ETEVfU0laRV9QUk9QT1JUSU9OICogdGhpcy53aWR0aE9mR3JhcGggLyAyLFxyXG4gICAgICB7XHJcbiAgICAgICAgaGVhZEhlaWdodDogMTAsXHJcbiAgICAgICAgaGVhZFdpZHRoOiAxNSxcclxuICAgICAgICB0YWlsV2lkdGg6IDYsXHJcbiAgICAgICAgZmlsbDogUkVTSVpFX0hBTkRMRV9OT1JNQUxfQ09MT1IsXHJcbiAgICAgICAgc3Ryb2tlOiAnYmxhY2snLFxyXG4gICAgICAgIGRvdWJsZUhlYWQ6IHRydWUsXHJcbiAgICAgICAgcGlja2FibGU6IHRydWUsXHJcbiAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXHJcbiAgICAgICAgdGFuZGVtOiB0aGlzLmludGVyYWN0aXZlQ29udHJvbHNMYXllci50YW5kZW0uY3JlYXRlVGFuZGVtKCAnZXBzaWxvbkFycm93JyApLFxyXG4gICAgICAgIHBoZXRpb1JlYWRPbmx5OiB0cnVlXHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICB0aGlzLmludGVyYWN0aXZlQ29udHJvbHNMYXllci5hZGRDaGlsZCggdGhpcy5lcHNpbG9uQ29udHJvbHMuYXJyb3cgKTtcclxuICAgIHRoaXMuZXBzaWxvbkNvbnRyb2xzLmFycm93LmFkZElucHV0TGlzdGVuZXIoIG5ldyBEcmFnTGlzdGVuZXIoIHtcclxuXHJcbiAgICAgIHN0YXJ0OiBldmVudCA9PiB7XHJcbiAgICAgICAgc3RhcnREcmFnWSA9IHRoaXMuZXBzaWxvbkNvbnRyb2xzLmFycm93Lmdsb2JhbFRvUGFyZW50UG9pbnQoIGV2ZW50LnBvaW50ZXIucG9pbnQgKS55O1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgZHJhZzogZXZlbnQgPT4ge1xyXG4gICAgICAgIGVuZERyYWdZID0gdGhpcy5lcHNpbG9uQ29udHJvbHMuYXJyb3cuZ2xvYmFsVG9QYXJlbnRQb2ludCggZXZlbnQucG9pbnRlci5wb2ludCApLnk7XHJcbiAgICAgICAgY29uc3QgZCA9IGVuZERyYWdZIC0gc3RhcnREcmFnWTtcclxuICAgICAgICBzdGFydERyYWdZID0gZW5kRHJhZ1k7XHJcbiAgICAgICAgY29uc3Qgc2NhbGVGYWN0b3IgPSBTT01Db25zdGFudHMuTUFYX0VQU0lMT04gLyAoIHRoaXMuZ2V0R3JhcGhIZWlnaHQoKSAvIDIgKTtcclxuICAgICAgICBwaGFzZUNoYW5nZXNNb2RlbC5hZGp1c3RhYmxlQXRvbUludGVyYWN0aW9uU3RyZW5ndGhQcm9wZXJ0eS5zZXQoXHJcbiAgICAgICAgICBVdGlscy5jbGFtcChcclxuICAgICAgICAgICAgcGhhc2VDaGFuZ2VzTW9kZWwuZ2V0RXBzaWxvbigpICsgKCBkICogc2NhbGVGYWN0b3IgKSxcclxuICAgICAgICAgICAgU09NQ29uc3RhbnRzLk1JTl9BREpVU1RBQkxFX0VQU0lMT04sXHJcbiAgICAgICAgICAgIFNPTUNvbnN0YW50cy5NQVhfQURKVVNUQUJMRV9FUFNJTE9OXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLmRyYXdQb3RlbnRpYWxDdXJ2ZSgpO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgdGFuZGVtOiB0aGlzLmVwc2lsb25Db250cm9scy5hcnJvdy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnZHJhZ0xpc3RlbmVyJyApXHJcbiAgICB9ICkgKTtcclxuICAgIGNvbnN0IGVwc2lsb25BcnJvd1ByZXNzTGlzdGVuZXIgPSBuZXcgUHJlc3NMaXN0ZW5lciggeyBhdHRhY2g6IGZhbHNlLCB0YW5kZW06IFRhbmRlbS5PUFRfT1VUIH0gKTtcclxuICAgIHRoaXMuZXBzaWxvbkNvbnRyb2xzLmFycm93LmFkZElucHV0TGlzdGVuZXIoIGVwc2lsb25BcnJvd1ByZXNzTGlzdGVuZXIgKTtcclxuICAgIGVwc2lsb25BcnJvd1ByZXNzTGlzdGVuZXIuaXNIaWdobGlnaHRlZFByb3BlcnR5LmxpbmsoIGlzSGlnaGxpZ2h0ZWQgPT4ge1xyXG4gICAgICB0aGlzLmVwc2lsb25Db250cm9scy5hcnJvdy5maWxsID0gaXNIaWdobGlnaHRlZCA/IFJFU0laRV9IQU5ETEVfSElHSExJR0hURURfQ09MT1IgOiBSRVNJWkVfSEFORExFX05PUk1BTF9DT0xPUjtcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLmludGVyYWN0aW9uUG90ZW50aWFsQ2FudmFzTm9kZSA9IG5ldyBJbnRlcmFjdGlvblBvdGVudGlhbENhbnZhc05vZGUoIHRoaXMsIHtcclxuICAgICAgY2FudmFzQm91bmRzOiBuZXcgQm91bmRzMiggMCwgMCwgMTI1LCB0aGlzLmdyYXBoSGVpZ2h0IClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBVcGRhdGUgdGhlIGdyYXBoIHdoZW4gdGhlIHN1YnN0YW5jZSBvciBpbnRlcmFjdGlvbiBzdHJlbmd0aCBjaGFuZ2VzLlxyXG4gICAgTXVsdGlsaW5rLm11bHRpbGluayhcclxuICAgICAgWyBwaGFzZUNoYW5nZXNNb2RlbC5zdWJzdGFuY2VQcm9wZXJ0eSwgcGhhc2VDaGFuZ2VzTW9kZWwuYWRqdXN0YWJsZUF0b21JbnRlcmFjdGlvblN0cmVuZ3RoUHJvcGVydHkgXSxcclxuICAgICAgc3Vic3RhbmNlID0+IHtcclxuICAgICAgICB0aGlzLmludGVyYWN0aW9uRW5hYmxlZCA9IHN1YnN0YW5jZSA9PT0gU3Vic3RhbmNlVHlwZS5BREpVU1RBQkxFX0FUT007XHJcbiAgICAgICAgdGhpcy5zZXRMalBvdGVudGlhbFBhcmFtZXRlcnMoIHBoYXNlQ2hhbmdlc01vZGVsLmdldFNpZ21hKCksIHBoYXNlQ2hhbmdlc01vZGVsLmdldEVwc2lsb24oKSApO1xyXG4gICAgICAgIHRoaXMuZHJhd1BvdGVudGlhbEN1cnZlKCk7XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUaGlzIGlzIGFuIG92ZXJyaWRlIG9mIHRoZSBtZXRob2QgaW4gdGhlIGJhc2UgY2xhc3MgdGhhdCBkcmF3cyB0aGUgY3VydmUgb24gdGhlIGdyYXBoLCBhbmQgdGhpcyBvdmVycmlkZSBkcmF3cyB0aGVcclxuICAgKiBjb250cm9scyB0aGF0IGFsbG93IHRoZSB1c2VyIHRvIGludGVyYWN0IHdpdGggdGhlIGdyYXBoLlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICogQG92ZXJyaWRlXHJcbiAgICovXHJcbiAgZHJhd1BvdGVudGlhbEN1cnZlKCkge1xyXG5cclxuICAgIC8vIGRyYXcgcG90ZW50aWFsIGN1cnZlXHJcbiAgICBpZiAoIHRoaXMuaW50ZXJhY3Rpb25Qb3RlbnRpYWxDYW52YXNOb2RlICE9PSB1bmRlZmluZWQgKSB7XHJcbiAgICAgIHRoaXMuaW50ZXJhY3Rpb25Qb3RlbnRpYWxDYW52YXNOb2RlLnVwZGF0ZSggUE9URU5USUFMX0xJTkVfQ09MT1IgKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbnN0YXRlc09mTWF0dGVyLnJlZ2lzdGVyKCAnRXBzaWxvbkNvbnRyb2xQb3RlbnRpYWxHcmFwaCcsIEVwc2lsb25Db250cm9sUG90ZW50aWFsR3JhcGggKTtcclxuZXhwb3J0IGRlZmF1bHQgRXBzaWxvbkNvbnRyb2xQb3RlbnRpYWxHcmFwaDsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFNBQVMsTUFBTSxrQ0FBa0M7QUFDeEQsT0FBT0MsT0FBTyxNQUFNLCtCQUErQjtBQUNuRCxPQUFPQyxLQUFLLE1BQU0sNkJBQTZCO0FBQy9DLE9BQU9DLEtBQUssTUFBTSxtQ0FBbUM7QUFDckQsT0FBT0MsU0FBUyxNQUFNLDBDQUEwQztBQUNoRSxTQUFTQyxLQUFLLEVBQUVDLFlBQVksRUFBRUMsYUFBYSxFQUFFQyxTQUFTLFFBQVEsbUNBQW1DO0FBQ2pHLE9BQU9DLE1BQU0sTUFBTSxpQ0FBaUM7QUFDcEQsT0FBT0MsWUFBWSxNQUFNLDhCQUE4QjtBQUN2RCxPQUFPQyxhQUFhLE1BQU0sK0JB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