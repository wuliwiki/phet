// Copyright 2014-2023, University of Colorado Boulder

/**
 * panel for selecting the atoms/molecules
 *
 * @author Siddhartha Chinthapally (Actual Concepts)
 * @author John Blanco (PhET Interactive Simulations)
 */

import Bounds2 from '../../../../dot/js/Bounds2.js';
import Dimension2 from '../../../../dot/js/Dimension2.js';
import Range from '../../../../dot/js/Range.js';
import merge from '../../../../phet-core/js/merge.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { Node, Rectangle, Text, VBox } from '../../../../scenery/js/imports.js';
import RectangularRadioButtonGroup from '../../../../sun/js/buttons/RectangularRadioButtonGroup.js';
import Panel from '../../../../sun/js/Panel.js';
import Tandem from '../../../../tandem/js/Tandem.js';
import SOMConstants from '../../common/SOMConstants.js';
import SubstanceType from '../../common/SubstanceType.js';
import AtomAndMoleculeIconFactory from '../../common/view/AtomAndMoleculeIconFactory.js';
import SOMColors from '../../common/view/SOMColors.js';
import SubstanceSelectorNode from '../../common/view/SubstanceSelectorNode.js';
import TitledSlider from '../../common/view/TitledSlider.js';
import statesOfMatter from '../../statesOfMatter.js';
import StatesOfMatterStrings from '../../StatesOfMatterStrings.js';
import PhaseChangesModel from '../PhaseChangesModel.js';

// strings
const adjustableAttractionString = StatesOfMatterStrings.adjustableAttraction;
const argonString = StatesOfMatterStrings.argon;
const atomsAndMoleculesString = StatesOfMatterStrings.AtomsAndMolecules;
const diatomicOxygenString = StatesOfMatterStrings.diatomicOxygen;
const interactionStrengthWithSymbolString = StatesOfMatterStrings.interactionStrengthWithSymbol;
const neonString = StatesOfMatterStrings.neon;
const strongString = StatesOfMatterStrings.strong;
const waterString = StatesOfMatterStrings.water;
const weakString = StatesOfMatterStrings.weak;

// constants
const INSET = 10;
const TICK_TEXT_MAX_WIDTH = 40;
const NORMAL_TEXT_FONT_SIZE = 12;
class PhaseChangesMoleculesControlPanel extends Node {
  /**
   * @param { PhaseChangesModel } phaseChangesModel - model of the simulation
   * @param {Object} [options] options for various panel display properties
   */
  constructor(phaseChangesModel, options) {
    options = merge({
      showAdjustableAttraction: false,
      xMargin: 5,
      yMargin: 5,
      fill: SOMColors.controlPanelBackgroundProperty,
      stroke: SOMColors.controlPanelStrokeProperty,
      lineWidth: 1,
      cornerRadius: SOMConstants.PANEL_CORNER_RADIUS,
      minWidth: 120,
      // somewhat arbitrary, will generally be set by constructor
      tandem: Tandem.REQUIRED
    }, options);
    const selectorWidth = options.minWidth - 2 * options.xMargin;
    super();
    const tickTextOptions = {
      font: SOMConstants.SLIDER_TICK_TEXT_FONT,
      fill: SOMColors.controlPanelTextProperty,
      maxWidth: TICK_TEXT_MAX_WIDTH
    };
    const weakTitle = new Text(weakString, tickTextOptions);
    const strongTitle = new Text(strongString, tickTextOptions);

    // slider (with a title) that can be used to control the interaction strength of the adjustable attraction atoms
    const interactionStrengthSliderVbox = new TitledSlider(phaseChangesModel.adjustableAtomInteractionStrengthProperty, new Range(SOMConstants.MIN_ADJUSTABLE_EPSILON, PhaseChangesModel.MAX_ADJUSTABLE_EPSILON), interactionStrengthWithSymbolString, options.tandem.createTandem('interactionStrengthSlider'), {
      sliderOptions: merge({}, SOMConstants.ADJUSTABLE_ATTRACTION_SLIDER_COMMON_OPTIONS, {
        trackSize: new Dimension2(110, 4)
      }),
      titleOptions: {
        fill: SOMColors.controlPanelTextProperty,
        maxWidth: 140
      },
      phetioDocumentation: 'Used for \'Adjustable Attraction\' only'
    });
    interactionStrengthSliderVbox.slider.addMajorTick(PhaseChangesModel.MAX_ADJUSTABLE_EPSILON, strongTitle);
    interactionStrengthSliderVbox.slider.addMajorTick(SOMConstants.MIN_ADJUSTABLE_EPSILON, weakTitle);

    // pre-create the tandem for the radio button group so that the text nodes can be under it
    const radioButtonGroupTandem = options.tandem.createTandem('radioButtonGroup');

    // text for the radio buttons
    const textOptions = {
      font: new PhetFont(NORMAL_TEXT_FONT_SIZE),
      fill: '#FFFFFF',
      maxWidth: selectorWidth * 0.75
    };
    const neonText = new Text(neonString, merge({
      tandem: radioButtonGroupTandem.createTandem('neonText')
    }, textOptions));
    const argonText = new Text(argonString, merge({
      tandem: radioButtonGroupTandem.createTandem('argonText')
    }, textOptions));
    const waterText = new Text(waterString, merge({
      tandem: radioButtonGroupTandem.createTandem('waterText')
    }, textOptions));
    const oxygenText = new Text(diatomicOxygenString, merge({
      tandem: radioButtonGroupTandem.createTandem('oxygenText')
    }, textOptions));
    const adjustableAttractionText = new Text(adjustableAttractionString, merge({
      tandem: radioButtonGroupTandem.createTandem('adjustableAttractionText')
    }, textOptions));

    // create objects that describe the pieces that make up a selector item in the control panel, conforms to the
    // contract: { label: {Node}, icon: {Node} (optional) }
    const neonSelectorInfo = {
      label: neonText,
      icon: AtomAndMoleculeIconFactory.createIcon(SubstanceType.NEON)
    };
    const argonSelectorInfo = {
      label: argonText,
      icon: AtomAndMoleculeIconFactory.createIcon(SubstanceType.ARGON)
    };
    const waterSelectorInfo = {
      label: waterText,
      icon: AtomAndMoleculeIconFactory.createIcon(SubstanceType.WATER)
    };
    const oxygenSelectorInfo = {
      label: oxygenText,
      icon: AtomAndMoleculeIconFactory.createIcon(SubstanceType.DIATOMIC_OXYGEN)
    };
    const adjustableAttractionSelectorInfo = {
      label: adjustableAttractionText,
      icon: AtomAndMoleculeIconFactory.createIcon(SubstanceType.ADJUSTABLE_ATOM)
    };
    const radioButtonContent = [{
      value: SubstanceType.NEON,
      createNode: () => new SubstanceSelectorNode(neonSelectorInfo.label, neonSelectorInfo.icon, selectorWidth),
      tandemName: 'neonRadioButton'
    }, {
      value: SubstanceType.ARGON,
      createNode: () => new SubstanceSelectorNode(argonSelectorInfo.label, argonSelectorInfo.icon, selectorWidth),
      tandemName: 'argonRadioButton'
    }, {
      value: SubstanceType.DIATOMIC_OXYGEN,
      createNode: () => new SubstanceSelectorNode(oxygenSelectorInfo.label, oxygenSelectorInfo.icon, selectorWidth),
      tandemName: 'oxygenRadioButton'
    }, {
      value: SubstanceType.WATER,
      createNode: () => new SubstanceSelectorNode(waterSelectorInfo.label, waterSelectorInfo.icon, selectorWidth),
      tandemName: 'waterRadioButton'
    }];
    if (options.showAdjustableAttraction) {
      radioButtonContent.push({
        value: SubstanceType.ADJUSTABLE_ATOM,
        createNode: () => new SubstanceSelectorNode(adjustableAttractionSelectorInfo.label, adjustableAttractionSelectorInfo.icon, selectorWidth),
        tandemName: 'adjustableAttractionRadioButton'
      });
    }
    const radioButtonGroup = new RectangularRadioButtonGroup(phaseChangesModel.substanceProperty, radioButtonContent, {
      orientation: 'vertical',
      spacing: 3,
      touchAreaYDilation: 0,
      radioButtonOptions: {
        cornerRadius: 5,
        baseColor: 'black',
        buttonAppearanceStrategyOptions: {
          selectedLineWidth: 1,
          selectedStroke: 'white',
          deselectedLineWidth: 0,
          deselectedContentOpacity: 1
        }
      },
      tandem: radioButtonGroupTandem
    });
    phaseChangesModel.adjustableAtomInteractionStrengthProperty.link(value => {
      if (phaseChangesModel.substanceProperty.get() === SubstanceType.ADJUSTABLE_ATOM) {
        phaseChangesModel.setEpsilon(value);
      }
    });
    const content = new VBox({
      spacing: 4,
      children: [radioButtonGroup]
    });
    const radioButtonPanel = new Panel(content, {
      yMargin: 8,
      stroke: options.stroke,
      align: 'center',
      fill: options.fill,
      cornerRadius: options.cornerRadius,
      minWidth: options.minWidth,
      lineWidth: options.lineWidth
    });
    this.addChild(radioButtonPanel);

    // do some layout now that many of the pieces exist
    interactionStrengthSliderVbox.centerX = radioButtonGroup.centerX;
    interactionStrengthSliderVbox.top = radioButtonGroup.bottom + INSET;

    // make any updates needed to the panel when the selected substance changes
    phaseChangesModel.substanceProperty.link(value => {
      // add or remove the node for controlling interaction strength
      if (value === SubstanceType.ADJUSTABLE_ATOM) {
        content.addChild(interactionStrengthSliderVbox);
      } else if (content.hasChild(interactionStrengthSliderVbox)) {
        content.removeChild(interactionStrengthSliderVbox);
      }
    });

    // title for the panel
    const titleText = new Text(atomsAndMoleculesString, {
      font: new PhetFont(14),
      fill: SOMColors.controlPanelTextProperty,
      maxWidth: options.minWidth * 0.85,
      tandem: options.tandem.createTandem('titleText')
    });

    // create the background for the title - initial size is arbitrary, it will be sized and positioned below
    const titleBackground = new Rectangle(0, 0, 1, 1, {
      fill: options.fill
    });
    this.addChild(new Node({
      children: [titleBackground, titleText]
    }));

    // closure for updating the title background size and overall position
    const updateTitle = () => {
      if (radioButtonPanel.bounds.equals(Bounds2.NOTHING)) {
        titleBackground.visible = false;
        titleText.visible = false;
      } else {
        titleBackground.rectWidth = titleText.width + 5;
        titleBackground.rectHeight = titleText.height;
        titleBackground.centerX = radioButtonPanel.centerX;
        titleBackground.centerY = radioButtonPanel.top;
        titleText.centerX = titleBackground.centerX;
        titleText.centerY = titleBackground.centerY;
        titleBackground.visible = true;
        titleText.visible = true;
      }
    };

    // do the initial update of the title
    updateTitle();

    // Listen for changes to the title text node's bounds and update the title when they occur.  There is no need to
    // unlink this since the panel is permanent.
    titleText.localBoundsProperty.lazyLink(updateTitle);

    // Listen for changes to the panel bounds and update the title.
    radioButtonPanel.localBoundsProperty.link(updateTitle);
    this.mutate(options);
  }
}
statesOfMatter.register('PhaseChangesMoleculesControlPanel', PhaseChangesMoleculesControlPanel);
export default PhaseChangesMoleculesControlPanel;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb3VuZHMyIiwiRGltZW5zaW9uMiIsIlJhbmdlIiwibWVyZ2UiLCJQaGV0Rm9udCIsIk5vZGUiLCJSZWN0YW5nbGUiLCJUZXh0IiwiVkJveCIsIlJlY3Rhbmd1bGFyUmFkaW9CdXR0b25Hcm91cCIsIlBhbmVsIiwiVGFuZGVtIiwiU09NQ29uc3RhbnRzIiwiU3Vic3RhbmNlVHlwZSIsIkF0b21BbmRNb2xlY3VsZUljb25GYWN0b3J5IiwiU09NQ29sb3JzIiwiU3Vic3RhbmNlU2VsZWN0b3JOb2RlIiwiVGl0bGVkU2xpZGVyIiwic3RhdGVzT2ZNYXR0ZXIiLCJTdGF0ZXNPZk1hdHRlclN0cmluZ3MiLCJQaGFzZUNoYW5nZXNNb2RlbCIsImFkanVzdGFibGVBdHRyYWN0aW9uU3RyaW5nIiwiYWRqdXN0YWJsZUF0dHJhY3Rpb24iLCJhcmdvblN0cmluZyIsImFyZ29uIiwiYXRvbXNBbmRNb2xlY3VsZXNTdHJpbmciLCJBdG9tc0FuZE1vbGVjdWxlcyIsImRpYXRvbWljT3h5Z2VuU3RyaW5nIiwiZGlhdG9taWNPeHlnZW4iLCJpbnRlcmFjdGlvblN0cmVuZ3RoV2l0aFN5bWJvbFN0cmluZyIsImludGVyYWN0aW9uU3RyZW5ndGhXaXRoU3ltYm9sIiwibmVvblN0cmluZyIsIm5lb24iLCJzdHJvbmdTdHJpbmciLCJzdHJvbmciLCJ3YXRlclN0cmluZyIsIndhdGVyIiwid2Vha1N0cmluZyIsIndlYWsiLCJJTlNFVCIsIlRJQ0tfVEVYVF9NQVhfV0lEVEgiLCJOT1JNQUxfVEVYVF9GT05UX1NJWkUiLCJQaGFzZUNoYW5nZXNNb2xlY3VsZXNDb250cm9sUGFuZWwiLCJjb25zdHJ1Y3RvciIsInBoYXNlQ2hhbmdlc01vZGVsIiwib3B0aW9ucyIsInNob3dBZGp1c3RhYmxlQXR0cmFjdGlvbiIsInhNYXJnaW4iLCJ5TWFyZ2luIiwiZmlsbCIsImNvbnRyb2xQYW5lbEJhY2tncm91bmRQcm9wZXJ0eSIsInN0cm9rZSIsImNvbnRyb2xQYW5lbFN0cm9rZVByb3BlcnR5IiwibGluZVdpZHRoIiwiY29ybmVyUmFkaXVzIiwiUEFORUxfQ09STkVSX1JBRElVUyIsIm1pbldpZHRoIiwidGFuZGVtIiwiUkVRVUlSRUQiLCJzZWxlY3RvcldpZHRoIiwidGlja1RleHRPcHRpb25zIiwiZm9udCIsIlNMSURFUl9USUNLX1RFWFRfRk9OVCIsImNvbnRyb2xQYW5lbFRleHRQcm9wZXJ0eSIsIm1heFdpZHRoIiwid2Vha1RpdGxlIiwic3Ryb25nVGl0bGUiLCJpbnRlcmFjdGlvblN0cmVuZ3RoU2xpZGVyVmJveCIsImFkanVzdGFibGVBdG9tSW50ZXJhY3Rpb25TdHJlbmd0aFByb3BlcnR5IiwiTUlOX0FESlVTVEFCTEVfRVBTSUxPTiIsIk1BWF9BREpVU1RBQkxFX0VQU0lMT04iLCJjcmVhdGVUYW5kZW0iLCJzbGlkZXJPcHRpb25zIiwiQURKVVNUQUJMRV9BVFRSQUNUSU9OX1NMSURFUl9DT01NT05fT1BUSU9OUyIsInRyYWNrU2l6ZSIsInRpdGxlT3B0aW9ucyIsInBoZXRpb0RvY3VtZW50YXRpb24iLCJzbGlkZXIiLCJhZGRNYWpvclRpY2siLCJyYWRpb0J1dHRvbkdyb3VwVGFuZGVtIiwidGV4dE9wdGlvbnMiLCJuZW9uVGV4dCIsImFyZ29uVGV4dCIsIndhdGVyVGV4dCIsIm94eWdlblRleHQiLCJhZGp1c3RhYmxlQXR0cmFjdGlvblRleHQiLCJuZW9uU2VsZWN0b3JJbmZvIiwibGFiZWwiLCJpY29uIiwiY3JlYXRlSWNvbiIsIk5FT04iLCJhcmdvblNlbGVjdG9ySW5mbyIsIkFSR09OIiwid2F0ZXJTZWxlY3RvckluZm8iLCJXQVRFUiIsIm94eWdlblNlbGVjdG9ySW5mbyIsIkRJQVRPTUlDX09YWUdFTiIsImFkanVzdGFibGVBdHRyYWN0aW9uU2VsZWN0b3JJbmZvIiwiQURKVVNUQUJMRV9BVE9NIiwicmFkaW9CdXR0b25Db250ZW50IiwidmFsdWUiLCJjcmVhdGVOb2RlIiwidGFuZGVtTmFtZSIsInB1c2giLCJyYWRpb0J1dHRvbkdyb3VwIiwic3Vic3RhbmNlUHJvcGVydHkiLCJvcmllbnRhdGlvbiIsInNwYWNpbmciLCJ0b3VjaEFyZWFZRGlsYXRpb24iLCJyYWRpb0J1dHRvbk9wdGlvbnMiLCJiYXNlQ29sb3IiLCJidXR0b25BcHBlYXJhbmNlU3RyYXRlZ3lPcHRpb25zIiwic2VsZWN0ZWRMaW5lV2lkdGgiLCJzZWxlY3RlZFN0cm9rZSIsImRlc2VsZWN0ZWRMaW5lV2lkdGgiLCJkZXNlbGVjdGVkQ29udGVudE9wYWNpdHkiLCJsaW5rIiwiZ2V0Iiwic2V0RXBzaWxvbiIsImNvbnRlbnQiLCJjaGlsZHJlbiIsInJhZGlvQnV0dG9uUGFuZWwiLCJhbGlnbiIsImFkZENoaWxkIiwiY2VudGVyWCIsInRvcCIsImJvdHRvbSIsImhhc0NoaWxkIiwicmVtb3ZlQ2hpbGQiLCJ0aXRsZVRleHQiLCJ0aXRsZUJhY2tncm91bmQiLCJ1cGRhdGVUaXRsZSIsImJvdW5kcyIsImVxdWFscyIsIk5PVEhJTkciLCJ2aXNpYmxlIiwicmVjdFdpZHRoIiwid2lkdGgiLCJyZWN0SGVpZ2h0IiwiaGVpZ2h0IiwiY2VudGVyWSIsImxvY2FsQm91bmRzUHJvcGVydHkiLCJsYXp5TGluayIsIm11dGF0ZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiUGhhc2VDaGFuZ2VzTW9sZWN1bGVzQ29udHJvbFBhbmVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE0LTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIHBhbmVsIGZvciBzZWxlY3RpbmcgdGhlIGF0b21zL21vbGVjdWxlc1xyXG4gKlxyXG4gKiBAYXV0aG9yIFNpZGRoYXJ0aGEgQ2hpbnRoYXBhbGx5IChBY3R1YWwgQ29uY2VwdHMpXHJcbiAqIEBhdXRob3IgSm9obiBCbGFuY28gKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IEJvdW5kczIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL0JvdW5kczIuanMnO1xyXG5pbXBvcnQgRGltZW5zaW9uMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvRGltZW5zaW9uMi5qcyc7XHJcbmltcG9ydCBSYW5nZSBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvUmFuZ2UuanMnO1xyXG5pbXBvcnQgbWVyZ2UgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL21lcmdlLmpzJztcclxuaW1wb3J0IFBoZXRGb250IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9QaGV0Rm9udC5qcyc7XHJcbmltcG9ydCB7IE5vZGUsIFJlY3RhbmdsZSwgVGV4dCwgVkJveCB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBSZWN0YW5ndWxhclJhZGlvQnV0dG9uR3JvdXAgZnJvbSAnLi4vLi4vLi4vLi4vc3VuL2pzL2J1dHRvbnMvUmVjdGFuZ3VsYXJSYWRpb0J1dHRvbkdyb3VwLmpzJztcclxuaW1wb3J0IFBhbmVsIGZyb20gJy4uLy4uLy4uLy4uL3N1bi9qcy9QYW5lbC5qcyc7XHJcbmltcG9ydCBUYW5kZW0gZnJvbSAnLi4vLi4vLi4vLi4vdGFuZGVtL2pzL1RhbmRlbS5qcyc7XHJcbmltcG9ydCBTT01Db25zdGFudHMgZnJvbSAnLi4vLi4vY29tbW9uL1NPTUNvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBTdWJzdGFuY2VUeXBlIGZyb20gJy4uLy4uL2NvbW1vbi9TdWJzdGFuY2VUeXBlLmpzJztcclxuaW1wb3J0IEF0b21BbmRNb2xlY3VsZUljb25GYWN0b3J5IGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L0F0b21BbmRNb2xlY3VsZUljb25GYWN0b3J5LmpzJztcclxuaW1wb3J0IFNPTUNvbG9ycyBmcm9tICcuLi8uLi9jb21tb24vdmlldy9TT01Db2xvcnMuanMnO1xyXG5pbXBvcnQgU3Vic3RhbmNlU2VsZWN0b3JOb2RlIGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L1N1YnN0YW5jZVNlbGVjdG9yTm9kZS5qcyc7XHJcbmltcG9ydCBUaXRsZWRTbGlkZXIgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvVGl0bGVkU2xpZGVyLmpzJztcclxuaW1wb3J0IHN0YXRlc09mTWF0dGVyIGZyb20gJy4uLy4uL3N0YXRlc09mTWF0dGVyLmpzJztcclxuaW1wb3J0IFN0YXRlc09mTWF0dGVyU3RyaW5ncyBmcm9tICcuLi8uLi9TdGF0ZXNPZk1hdHRlclN0cmluZ3MuanMnO1xyXG5pbXBvcnQgUGhhc2VDaGFuZ2VzTW9kZWwgZnJvbSAnLi4vUGhhc2VDaGFuZ2VzTW9kZWwuanMnO1xyXG5cclxuLy8gc3RyaW5nc1xyXG5jb25zdCBhZGp1c3RhYmxlQXR0cmFjdGlvblN0cmluZyA9IFN0YXRlc09mTWF0dGVyU3RyaW5ncy5hZGp1c3RhYmxlQXR0cmFjdGlvbjtcclxuY29uc3QgYXJnb25TdHJpbmcgPSBTdGF0ZXNPZk1hdHRlclN0cmluZ3MuYXJnb247XHJcbmNvbnN0IGF0b21zQW5kTW9sZWN1bGVzU3RyaW5nID0gU3RhdGVzT2ZNYXR0ZXJTdHJpbmdzLkF0b21zQW5kTW9sZWN1bGVzO1xyXG5jb25zdCBkaWF0b21pY094eWdlblN0cmluZyA9IFN0YXRlc09mTWF0dGVyU3RyaW5ncy5kaWF0b21pY094eWdlbjtcclxuY29uc3QgaW50ZXJhY3Rpb25TdHJlbmd0aFdpdGhTeW1ib2xTdHJpbmcgPSBTdGF0ZXNPZk1hdHRlclN0cmluZ3MuaW50ZXJhY3Rpb25TdHJlbmd0aFdpdGhTeW1ib2w7XHJcbmNvbnN0IG5lb25TdHJpbmcgPSBTdGF0ZXNPZk1hdHRlclN0cmluZ3MubmVvbjtcclxuY29uc3Qgc3Ryb25nU3RyaW5nID0gU3RhdGVzT2ZNYXR0ZXJTdHJpbmdzLnN0cm9uZztcclxuY29uc3Qgd2F0ZXJTdHJpbmcgPSBTdGF0ZXNPZk1hdHRlclN0cmluZ3Mud2F0ZXI7XHJcbmNvbnN0IHdlYWtTdHJpbmcgPSBTdGF0ZXNPZk1hdHRlclN0cmluZ3Mud2VhaztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBJTlNFVCA9IDEwO1xyXG5jb25zdCBUSUNLX1RFWFRfTUFYX1dJRFRIID0gNDA7XHJcbmNvbnN0IE5PUk1BTF9URVhUX0ZPTlRfU0laRSA9IDEyO1xyXG5cclxuY2xhc3MgUGhhc2VDaGFuZ2VzTW9sZWN1bGVzQ29udHJvbFBhbmVsIGV4dGVuZHMgTm9kZSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7IFBoYXNlQ2hhbmdlc01vZGVsIH0gcGhhc2VDaGFuZ2VzTW9kZWwgLSBtb2RlbCBvZiB0aGUgc2ltdWxhdGlvblxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gb3B0aW9ucyBmb3IgdmFyaW91cyBwYW5lbCBkaXNwbGF5IHByb3BlcnRpZXNcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvciggcGhhc2VDaGFuZ2VzTW9kZWwsIG9wdGlvbnMgKSB7XHJcblxyXG4gICAgb3B0aW9ucyA9IG1lcmdlKCB7XHJcbiAgICAgIHNob3dBZGp1c3RhYmxlQXR0cmFjdGlvbjogZmFsc2UsXHJcbiAgICAgIHhNYXJnaW46IDUsXHJcbiAgICAgIHlNYXJnaW46IDUsXHJcbiAgICAgIGZpbGw6IFNPTUNvbG9ycy5jb250cm9sUGFuZWxCYWNrZ3JvdW5kUHJvcGVydHksXHJcbiAgICAgIHN0cm9rZTogU09NQ29sb3JzLmNvbnRyb2xQYW5lbFN0cm9rZVByb3BlcnR5LFxyXG4gICAgICBsaW5lV2lkdGg6IDEsXHJcbiAgICAgIGNvcm5lclJhZGl1czogU09NQ29uc3RhbnRzLlBBTkVMX0NPUk5FUl9SQURJVVMsXHJcbiAgICAgIG1pbldpZHRoOiAxMjAsIC8vIHNvbWV3aGF0IGFyYml0cmFyeSwgd2lsbCBnZW5lcmFsbHkgYmUgc2V0IGJ5IGNvbnN0cnVjdG9yXHJcbiAgICAgIHRhbmRlbTogVGFuZGVtLlJFUVVJUkVEXHJcbiAgICB9LCBvcHRpb25zICk7XHJcblxyXG4gICAgY29uc3Qgc2VsZWN0b3JXaWR0aCA9IG9wdGlvbnMubWluV2lkdGggLSAyICogb3B0aW9ucy54TWFyZ2luO1xyXG5cclxuICAgIHN1cGVyKCk7XHJcblxyXG4gICAgY29uc3QgdGlja1RleHRPcHRpb25zID0ge1xyXG4gICAgICBmb250OiBTT01Db25zdGFudHMuU0xJREVSX1RJQ0tfVEVYVF9GT05ULFxyXG4gICAgICBmaWxsOiBTT01Db2xvcnMuY29udHJvbFBhbmVsVGV4dFByb3BlcnR5LFxyXG4gICAgICBtYXhXaWR0aDogVElDS19URVhUX01BWF9XSURUSFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCB3ZWFrVGl0bGUgPSBuZXcgVGV4dCggd2Vha1N0cmluZywgdGlja1RleHRPcHRpb25zICk7XHJcbiAgICBjb25zdCBzdHJvbmdUaXRsZSA9IG5ldyBUZXh0KCBzdHJvbmdTdHJpbmcsIHRpY2tUZXh0T3B0aW9ucyApO1xyXG5cclxuICAgIC8vIHNsaWRlciAod2l0aCBhIHRpdGxlKSB0aGF0IGNhbiBiZSB1c2VkIHRvIGNvbnRyb2wgdGhlIGludGVyYWN0aW9uIHN0cmVuZ3RoIG9mIHRoZSBhZGp1c3RhYmxlIGF0dHJhY3Rpb24gYXRvbXNcclxuICAgIGNvbnN0IGludGVyYWN0aW9uU3RyZW5ndGhTbGlkZXJWYm94ID0gbmV3IFRpdGxlZFNsaWRlcihcclxuICAgICAgcGhhc2VDaGFuZ2VzTW9kZWwuYWRqdXN0YWJsZUF0b21JbnRlcmFjdGlvblN0cmVuZ3RoUHJvcGVydHksXHJcbiAgICAgIG5ldyBSYW5nZSggU09NQ29uc3RhbnRzLk1JTl9BREpVU1RBQkxFX0VQU0lMT04sIFBoYXNlQ2hhbmdlc01vZGVsLk1BWF9BREpVU1RBQkxFX0VQU0lMT04gKSxcclxuICAgICAgaW50ZXJhY3Rpb25TdHJlbmd0aFdpdGhTeW1ib2xTdHJpbmcsXHJcbiAgICAgIG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2ludGVyYWN0aW9uU3RyZW5ndGhTbGlkZXInICksXHJcbiAgICAgIHtcclxuICAgICAgICBzbGlkZXJPcHRpb25zOiBtZXJnZShcclxuICAgICAgICAgIHt9LFxyXG4gICAgICAgICAgU09NQ29uc3RhbnRzLkFESlVTVEFCTEVfQVRUUkFDVElPTl9TTElERVJfQ09NTU9OX09QVElPTlMsXHJcbiAgICAgICAgICB7IHRyYWNrU2l6ZTogbmV3IERpbWVuc2lvbjIoIDExMCwgNCApIH1cclxuICAgICAgICApLFxyXG4gICAgICAgIHRpdGxlT3B0aW9uczoge1xyXG4gICAgICAgICAgZmlsbDogU09NQ29sb3JzLmNvbnRyb2xQYW5lbFRleHRQcm9wZXJ0eSxcclxuICAgICAgICAgIG1heFdpZHRoOiAxNDBcclxuICAgICAgICB9LFxyXG4gICAgICAgIHBoZXRpb0RvY3VtZW50YXRpb246ICdVc2VkIGZvciBcXCdBZGp1c3RhYmxlIEF0dHJhY3Rpb25cXCcgb25seSdcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIGludGVyYWN0aW9uU3RyZW5ndGhTbGlkZXJWYm94LnNsaWRlci5hZGRNYWpvclRpY2soIFBoYXNlQ2hhbmdlc01vZGVsLk1BWF9BREpVU1RBQkxFX0VQU0lMT04sIHN0cm9uZ1RpdGxlICk7XHJcbiAgICBpbnRlcmFjdGlvblN0cmVuZ3RoU2xpZGVyVmJveC5zbGlkZXIuYWRkTWFqb3JUaWNrKCBTT01Db25zdGFudHMuTUlOX0FESlVTVEFCTEVfRVBTSUxPTiwgd2Vha1RpdGxlICk7XHJcblxyXG4gICAgLy8gcHJlLWNyZWF0ZSB0aGUgdGFuZGVtIGZvciB0aGUgcmFkaW8gYnV0dG9uIGdyb3VwIHNvIHRoYXQgdGhlIHRleHQgbm9kZXMgY2FuIGJlIHVuZGVyIGl0XHJcbiAgICBjb25zdCByYWRpb0J1dHRvbkdyb3VwVGFuZGVtID0gb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAncmFkaW9CdXR0b25Hcm91cCcgKTtcclxuXHJcbiAgICAvLyB0ZXh0IGZvciB0aGUgcmFkaW8gYnV0dG9uc1xyXG4gICAgY29uc3QgdGV4dE9wdGlvbnMgPSB7XHJcbiAgICAgIGZvbnQ6IG5ldyBQaGV0Rm9udCggTk9STUFMX1RFWFRfRk9OVF9TSVpFICksXHJcbiAgICAgIGZpbGw6ICcjRkZGRkZGJyxcclxuICAgICAgbWF4V2lkdGg6IHNlbGVjdG9yV2lkdGggKiAwLjc1XHJcbiAgICB9O1xyXG4gICAgY29uc3QgbmVvblRleHQgPSBuZXcgVGV4dChcclxuICAgICAgbmVvblN0cmluZyxcclxuICAgICAgbWVyZ2UoIHsgdGFuZGVtOiByYWRpb0J1dHRvbkdyb3VwVGFuZGVtLmNyZWF0ZVRhbmRlbSggJ25lb25UZXh0JyApIH0sIHRleHRPcHRpb25zIClcclxuICAgICk7XHJcbiAgICBjb25zdCBhcmdvblRleHQgPSBuZXcgVGV4dChcclxuICAgICAgYXJnb25TdHJpbmcsXHJcbiAgICAgIG1lcmdlKCB7IHRhbmRlbTogcmFkaW9CdXR0b25Hcm91cFRhbmRlbS5jcmVhdGVUYW5kZW0oICdhcmdvblRleHQnICkgfSwgdGV4dE9wdGlvbnMgKVxyXG4gICAgKTtcclxuICAgIGNvbnN0IHdhdGVyVGV4dCA9IG5ldyBUZXh0KFxyXG4gICAgICB3YXRlclN0cmluZyxcclxuICAgICAgbWVyZ2UoIHsgdGFuZGVtOiByYWRpb0J1dHRvbkdyb3VwVGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3dhdGVyVGV4dCcgKSB9LCB0ZXh0T3B0aW9ucyApXHJcbiAgICApO1xyXG4gICAgY29uc3Qgb3h5Z2VuVGV4dCA9IG5ldyBUZXh0KFxyXG4gICAgICBkaWF0b21pY094eWdlblN0cmluZyxcclxuICAgICAgbWVyZ2UoIHsgdGFuZGVtOiByYWRpb0J1dHRvbkdyb3VwVGFuZGVtLmNyZWF0ZVRhbmRlbSggJ294eWdlblRleHQnICkgfSwgdGV4dE9wdGlvbnMgKVxyXG4gICAgKTtcclxuICAgIGNvbnN0IGFkanVzdGFibGVBdHRyYWN0aW9uVGV4dCA9IG5ldyBUZXh0KFxyXG4gICAgICBhZGp1c3RhYmxlQXR0cmFjdGlvblN0cmluZyxcclxuICAgICAgbWVyZ2UoIHsgdGFuZGVtOiByYWRpb0J1dHRvbkdyb3VwVGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2FkanVzdGFibGVBdHRyYWN0aW9uVGV4dCcgKSB9LCB0ZXh0T3B0aW9ucyApXHJcbiAgICApO1xyXG5cclxuICAgIC8vIGNyZWF0ZSBvYmplY3RzIHRoYXQgZGVzY3JpYmUgdGhlIHBpZWNlcyB0aGF0IG1ha2UgdXAgYSBzZWxlY3RvciBpdGVtIGluIHRoZSBjb250cm9sIHBhbmVsLCBjb25mb3JtcyB0byB0aGVcclxuICAgIC8vIGNvbnRyYWN0OiB7IGxhYmVsOiB7Tm9kZX0sIGljb246IHtOb2RlfSAob3B0aW9uYWwpIH1cclxuICAgIGNvbnN0IG5lb25TZWxlY3RvckluZm8gPSB7IGxhYmVsOiBuZW9uVGV4dCwgaWNvbjogQXRvbUFuZE1vbGVjdWxlSWNvbkZhY3RvcnkuY3JlYXRlSWNvbiggU3Vic3RhbmNlVHlwZS5ORU9OICkgfTtcclxuICAgIGNvbnN0IGFyZ29uU2VsZWN0b3JJbmZvID0geyBsYWJlbDogYXJnb25UZXh0LCBpY29uOiBBdG9tQW5kTW9sZWN1bGVJY29uRmFjdG9yeS5jcmVhdGVJY29uKCBTdWJzdGFuY2VUeXBlLkFSR09OICkgfTtcclxuICAgIGNvbnN0IHdhdGVyU2VsZWN0b3JJbmZvID0geyBsYWJlbDogd2F0ZXJUZXh0LCBpY29uOiBBdG9tQW5kTW9sZWN1bGVJY29uRmFjdG9yeS5jcmVhdGVJY29uKCBTdWJzdGFuY2VUeXBlLldBVEVSICkgfTtcclxuICAgIGNvbnN0IG94eWdlblNlbGVjdG9ySW5mbyA9IHtcclxuICAgICAgbGFiZWw6IG94eWdlblRleHQsXHJcbiAgICAgIGljb246IEF0b21BbmRNb2xlY3VsZUljb25GYWN0b3J5LmNyZWF0ZUljb24oIFN1YnN0YW5jZVR5cGUuRElBVE9NSUNfT1hZR0VOIClcclxuICAgIH07XHJcbiAgICBjb25zdCBhZGp1c3RhYmxlQXR0cmFjdGlvblNlbGVjdG9ySW5mbyA9IHtcclxuICAgICAgbGFiZWw6IGFkanVzdGFibGVBdHRyYWN0aW9uVGV4dCxcclxuICAgICAgaWNvbjogQXRvbUFuZE1vbGVjdWxlSWNvbkZhY3RvcnkuY3JlYXRlSWNvbiggU3Vic3RhbmNlVHlwZS5BREpVU1RBQkxFX0FUT00gKVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCByYWRpb0J1dHRvbkNvbnRlbnQgPSBbXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZTogU3Vic3RhbmNlVHlwZS5ORU9OLFxyXG4gICAgICAgIGNyZWF0ZU5vZGU6ICgpID0+IG5ldyBTdWJzdGFuY2VTZWxlY3Rvck5vZGUoIG5lb25TZWxlY3RvckluZm8ubGFiZWwsIG5lb25TZWxlY3RvckluZm8uaWNvbiwgc2VsZWN0b3JXaWR0aCApLFxyXG4gICAgICAgIHRhbmRlbU5hbWU6ICduZW9uUmFkaW9CdXR0b24nXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZTogU3Vic3RhbmNlVHlwZS5BUkdPTixcclxuICAgICAgICBjcmVhdGVOb2RlOiAoKSA9PiBuZXcgU3Vic3RhbmNlU2VsZWN0b3JOb2RlKCBhcmdvblNlbGVjdG9ySW5mby5sYWJlbCwgYXJnb25TZWxlY3RvckluZm8uaWNvbiwgc2VsZWN0b3JXaWR0aCApLFxyXG4gICAgICAgIHRhbmRlbU5hbWU6ICdhcmdvblJhZGlvQnV0dG9uJ1xyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWU6IFN1YnN0YW5jZVR5cGUuRElBVE9NSUNfT1hZR0VOLFxyXG4gICAgICAgIGNyZWF0ZU5vZGU6ICgpID0+IG5ldyBTdWJzdGFuY2VTZWxlY3Rvck5vZGUoIG94eWdlblNlbGVjdG9ySW5mby5sYWJlbCwgb3h5Z2VuU2VsZWN0b3JJbmZvLmljb24sIHNlbGVjdG9yV2lkdGggKSxcclxuICAgICAgICB0YW5kZW1OYW1lOiAnb3h5Z2VuUmFkaW9CdXR0b24nXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZTogU3Vic3RhbmNlVHlwZS5XQVRFUixcclxuICAgICAgICBjcmVhdGVOb2RlOiAoKSA9PiBuZXcgU3Vic3RhbmNlU2VsZWN0b3JOb2RlKCB3YXRlclNlbGVjdG9ySW5mby5sYWJlbCwgd2F0ZXJTZWxlY3RvckluZm8uaWNvbiwgc2VsZWN0b3JXaWR0aCApLFxyXG4gICAgICAgIHRhbmRlbU5hbWU6ICd3YXRlclJhZGlvQnV0dG9uJ1xyXG4gICAgICB9XHJcbiAgICBdO1xyXG5cclxuICAgIGlmICggb3B0aW9ucy5zaG93QWRqdXN0YWJsZUF0dHJhY3Rpb24gKSB7XHJcbiAgICAgIHJhZGlvQnV0dG9uQ29udGVudC5wdXNoKCB7XHJcbiAgICAgICAgICB2YWx1ZTogU3Vic3RhbmNlVHlwZS5BREpVU1RBQkxFX0FUT00sXHJcbiAgICAgICAgICBjcmVhdGVOb2RlOiAoKSA9PiBuZXcgU3Vic3RhbmNlU2VsZWN0b3JOb2RlKFxyXG4gICAgICAgICAgICBhZGp1c3RhYmxlQXR0cmFjdGlvblNlbGVjdG9ySW5mby5sYWJlbCxcclxuICAgICAgICAgICAgYWRqdXN0YWJsZUF0dHJhY3Rpb25TZWxlY3RvckluZm8uaWNvbixcclxuICAgICAgICAgICAgc2VsZWN0b3JXaWR0aFxyXG4gICAgICAgICAgKSxcclxuICAgICAgICAgIHRhbmRlbU5hbWU6ICdhZGp1c3RhYmxlQXR0cmFjdGlvblJhZGlvQnV0dG9uJ1xyXG4gICAgICAgIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByYWRpb0J1dHRvbkdyb3VwID0gbmV3IFJlY3Rhbmd1bGFyUmFkaW9CdXR0b25Hcm91cCggcGhhc2VDaGFuZ2VzTW9kZWwuc3Vic3RhbmNlUHJvcGVydHksIHJhZGlvQnV0dG9uQ29udGVudCwge1xyXG4gICAgICBvcmllbnRhdGlvbjogJ3ZlcnRpY2FsJyxcclxuICAgICAgc3BhY2luZzogMyxcclxuICAgICAgdG91Y2hBcmVhWURpbGF0aW9uOiAwLFxyXG4gICAgICByYWRpb0J1dHRvbk9wdGlvbnM6IHtcclxuICAgICAgICBjb3JuZXJSYWRpdXM6IDUsXHJcbiAgICAgICAgYmFzZUNvbG9yOiAnYmxhY2snLFxyXG4gICAgICAgIGJ1dHRvbkFwcGVhcmFuY2VTdHJhdGVneU9wdGlvbnM6IHtcclxuICAgICAgICAgIHNlbGVjdGVkTGluZVdpZHRoOiAxLFxyXG4gICAgICAgICAgc2VsZWN0ZWRTdHJva2U6ICd3aGl0ZScsXHJcbiAgICAgICAgICBkZXNlbGVjdGVkTGluZVdpZHRoOiAwLFxyXG4gICAgICAgICAgZGVzZWxlY3RlZENvbnRlbnRPcGFjaXR5OiAxXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB0YW5kZW06IHJhZGlvQnV0dG9uR3JvdXBUYW5kZW1cclxuICAgIH0gKTtcclxuXHJcbiAgICBwaGFzZUNoYW5nZXNNb2RlbC5hZGp1c3RhYmxlQXRvbUludGVyYWN0aW9uU3RyZW5ndGhQcm9wZXJ0eS5saW5rKCB2YWx1ZSA9PiB7XHJcbiAgICAgIGlmICggcGhhc2VDaGFuZ2VzTW9kZWwuc3Vic3RhbmNlUHJvcGVydHkuZ2V0KCkgPT09IFN1YnN0YW5jZVR5cGUuQURKVVNUQUJMRV9BVE9NICkge1xyXG4gICAgICAgIHBoYXNlQ2hhbmdlc01vZGVsLnNldEVwc2lsb24oIHZhbHVlICk7XHJcbiAgICAgIH1cclxuICAgIH0gKTtcclxuICAgIGNvbnN0IGNvbnRlbnQgPSBuZXcgVkJveCggeyBzcGFjaW5nOiA0LCBjaGlsZHJlbjogWyByYWRpb0J1dHRvbkdyb3VwIF0gfSApO1xyXG4gICAgY29uc3QgcmFkaW9CdXR0b25QYW5lbCA9IG5ldyBQYW5lbCggY29udGVudCwge1xyXG4gICAgICB5TWFyZ2luOiA4LFxyXG4gICAgICBzdHJva2U6IG9wdGlvbnMuc3Ryb2tlLFxyXG4gICAgICBhbGlnbjogJ2NlbnRlcicsXHJcbiAgICAgIGZpbGw6IG9wdGlvbnMuZmlsbCxcclxuICAgICAgY29ybmVyUmFkaXVzOiBvcHRpb25zLmNvcm5lclJhZGl1cyxcclxuICAgICAgbWluV2lkdGg6IG9wdGlvbnMubWluV2lkdGgsXHJcbiAgICAgIGxpbmVXaWR0aDogb3B0aW9ucy5saW5lV2lkdGhcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHJhZGlvQnV0dG9uUGFuZWwgKTtcclxuXHJcbiAgICAvLyBkbyBzb21lIGxheW91dCBub3cgdGhhdCBtYW55IG9mIHRoZSBwaWVjZXMgZXhpc3RcclxuICAgIGludGVyYWN0aW9uU3RyZW5ndGhTbGlkZXJWYm94LmNlbnRlclggPSByYWRpb0J1dHRvbkdyb3VwLmNlbnRlclg7XHJcbiAgICBpbnRlcmFjdGlvblN0cmVuZ3RoU2xpZGVyVmJveC50b3AgPSByYWRpb0J1dHRvbkdyb3VwLmJvdHRvbSArIElOU0VUO1xyXG5cclxuICAgIC8vIG1ha2UgYW55IHVwZGF0ZXMgbmVlZGVkIHRvIHRoZSBwYW5lbCB3aGVuIHRoZSBzZWxlY3RlZCBzdWJzdGFuY2UgY2hhbmdlc1xyXG4gICAgcGhhc2VDaGFuZ2VzTW9kZWwuc3Vic3RhbmNlUHJvcGVydHkubGluayggdmFsdWUgPT4ge1xyXG5cclxuICAgICAgLy8gYWRkIG9yIHJlbW92ZSB0aGUgbm9kZSBmb3IgY29udHJvbGxpbmcgaW50ZXJhY3Rpb24gc3RyZW5ndGhcclxuICAgICAgaWYgKCB2YWx1ZSA9PT0gU3Vic3RhbmNlVHlwZS5BREpVU1RBQkxFX0FUT00gKSB7XHJcbiAgICAgICAgY29udGVudC5hZGRDaGlsZCggaW50ZXJhY3Rpb25TdHJlbmd0aFNsaWRlclZib3ggKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmICggY29udGVudC5oYXNDaGlsZCggaW50ZXJhY3Rpb25TdHJlbmd0aFNsaWRlclZib3ggKSApIHtcclxuICAgICAgICBjb250ZW50LnJlbW92ZUNoaWxkKCBpbnRlcmFjdGlvblN0cmVuZ3RoU2xpZGVyVmJveCApO1xyXG4gICAgICB9XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gdGl0bGUgZm9yIHRoZSBwYW5lbFxyXG4gICAgY29uc3QgdGl0bGVUZXh0ID0gbmV3IFRleHQoIGF0b21zQW5kTW9sZWN1bGVzU3RyaW5nLCB7XHJcbiAgICAgIGZvbnQ6IG5ldyBQaGV0Rm9udCggMTQgKSxcclxuICAgICAgZmlsbDogU09NQ29sb3JzLmNvbnRyb2xQYW5lbFRleHRQcm9wZXJ0eSxcclxuICAgICAgbWF4V2lkdGg6IG9wdGlvbnMubWluV2lkdGggKiAwLjg1LFxyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3RpdGxlVGV4dCcgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIGNyZWF0ZSB0aGUgYmFja2dyb3VuZCBmb3IgdGhlIHRpdGxlIC0gaW5pdGlhbCBzaXplIGlzIGFyYml0cmFyeSwgaXQgd2lsbCBiZSBzaXplZCBhbmQgcG9zaXRpb25lZCBiZWxvd1xyXG4gICAgY29uc3QgdGl0bGVCYWNrZ3JvdW5kID0gbmV3IFJlY3RhbmdsZSggMCwgMCwgMSwgMSwgeyBmaWxsOiBvcHRpb25zLmZpbGwgfSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggbmV3IE5vZGUoIHsgY2hpbGRyZW46IFsgdGl0bGVCYWNrZ3JvdW5kLCB0aXRsZVRleHQgXSB9ICkgKTtcclxuXHJcbiAgICAvLyBjbG9zdXJlIGZvciB1cGRhdGluZyB0aGUgdGl0bGUgYmFja2dyb3VuZCBzaXplIGFuZCBvdmVyYWxsIHBvc2l0aW9uXHJcbiAgICBjb25zdCB1cGRhdGVUaXRsZSA9ICgpID0+IHtcclxuICAgICAgaWYgKCByYWRpb0J1dHRvblBhbmVsLmJvdW5kcy5lcXVhbHMoIEJvdW5kczIuTk9USElORyApICkge1xyXG4gICAgICAgIHRpdGxlQmFja2dyb3VuZC52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgdGl0bGVUZXh0LnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICB0aXRsZUJhY2tncm91bmQucmVjdFdpZHRoID0gdGl0bGVUZXh0LndpZHRoICsgNTtcclxuICAgICAgICB0aXRsZUJhY2tncm91bmQucmVjdEhlaWdodCA9IHRpdGxlVGV4dC5oZWlnaHQ7XHJcbiAgICAgICAgdGl0bGVCYWNrZ3JvdW5kLmNlbnRlclggPSByYWRpb0J1dHRvblBhbmVsLmNlbnRlclg7XHJcbiAgICAgICAgdGl0bGVCYWNrZ3JvdW5kLmNlbnRlclkgPSByYWRpb0J1dHRvblBhbmVsLnRvcDtcclxuICAgICAgICB0aXRsZVRleHQuY2VudGVyWCA9IHRpdGxlQmFja2dyb3VuZC5jZW50ZXJYO1xyXG4gICAgICAgIHRpdGxlVGV4dC5jZW50ZXJZID0gdGl0bGVCYWNrZ3JvdW5kLmNlbnRlclk7XHJcbiAgICAgICAgdGl0bGVCYWNrZ3JvdW5kLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgIHRpdGxlVGV4dC52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBkbyB0aGUgaW5pdGlhbCB1cGRhdGUgb2YgdGhlIHRpdGxlXHJcbiAgICB1cGRhdGVUaXRsZSgpO1xyXG5cclxuICAgIC8vIExpc3RlbiBmb3IgY2hhbmdlcyB0byB0aGUgdGl0bGUgdGV4dCBub2RlJ3MgYm91bmRzIGFuZCB1cGRhdGUgdGhlIHRpdGxlIHdoZW4gdGhleSBvY2N1ci4gIFRoZXJlIGlzIG5vIG5lZWQgdG9cclxuICAgIC8vIHVubGluayB0aGlzIHNpbmNlIHRoZSBwYW5lbCBpcyBwZXJtYW5lbnQuXHJcbiAgICB0aXRsZVRleHQubG9jYWxCb3VuZHNQcm9wZXJ0eS5sYXp5TGluayggdXBkYXRlVGl0bGUgKTtcclxuXHJcbiAgICAvLyBMaXN0ZW4gZm9yIGNoYW5nZXMgdG8gdGhlIHBhbmVsIGJvdW5kcyBhbmQgdXBkYXRlIHRoZSB0aXRsZS5cclxuICAgIHJhZGlvQnV0dG9uUGFuZWwubG9jYWxCb3VuZHNQcm9wZXJ0eS5saW5rKCB1cGRhdGVUaXRsZSApO1xyXG5cclxuICAgIHRoaXMubXV0YXRlKCBvcHRpb25zICk7XHJcbiAgfVxyXG59XHJcblxyXG5zdGF0ZXNPZk1hdHRlci5yZWdpc3RlciggJ1BoYXNlQ2hhbmdlc01vbGVjdWxlc0NvbnRyb2xQYW5lbCcsIFBoYXNlQ2hhbmdlc01vbGVjdWxlc0NvbnRyb2xQYW5lbCApO1xyXG5leHBvcnQgZGVmYXVsdCBQaGFzZUNoYW5nZXNNb2xlY3VsZXNDb250cm9sUGFuZWw7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEs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