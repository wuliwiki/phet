// Copyright 2014-2023, University of Colorado Boulder

/**
 * panel for selecting the atoms/molecules
 *
 * @author Siddhartha Chinthapally (Actual Concepts)
 * @author John Blanco (PhET Interactive Simulations)
 */

import Bounds2 from '../../../../dot/js/Bounds2.js';
import merge from '../../../../phet-core/js/merge.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { HBox, Node, Rectangle, Text } from '../../../../scenery/js/imports.js';
import RectangularRadioButtonGroup from '../../../../sun/js/buttons/RectangularRadioButtonGroup.js';
import Panel from '../../../../sun/js/Panel.js';
import Tandem from '../../../../tandem/js/Tandem.js';
import SOMConstants from '../../common/SOMConstants.js';
import SubstanceType from '../../common/SubstanceType.js';
import AtomAndMoleculeIconFactory from '../../common/view/AtomAndMoleculeIconFactory.js';
import SOMColors from '../../common/view/SOMColors.js';
import SubstanceSelectorNode from '../../common/view/SubstanceSelectorNode.js';
import statesOfMatter from '../../statesOfMatter.js';
import StatesOfMatterStrings from '../../StatesOfMatterStrings.js';
const argonString = StatesOfMatterStrings.argon;
const atomsAndMoleculesString = StatesOfMatterStrings.AtomsAndMolecules;
const diatomicOxygenString = StatesOfMatterStrings.diatomicOxygen;
const neonString = StatesOfMatterStrings.neon;
const waterString = StatesOfMatterStrings.water;

// constants
const DEFAULT_WIDTH = 160;
class StatesMoleculesControlPanel extends Node {
  /**
   * @param {Property.<number>} substanceProperty that tracks the substance selected in the panel
   * @param {Object} [options] for various panel display properties
   */
  constructor(substanceProperty, options) {
    options = merge({
      xMargin: 5,
      yMargin: 8,
      fill: SOMColors.controlPanelBackgroundProperty,
      stroke: SOMColors.controlPanelStrokeProperty,
      lineWidth: 1,
      cornerRadius: SOMConstants.PANEL_CORNER_RADIUS,
      maxWidth: DEFAULT_WIDTH,
      minWidth: DEFAULT_WIDTH,
      tandem: Tandem.REQUIRED
    }, options);
    super();
    const maxTextWidth = options.maxWidth * 0.75;
    const textOptions = {
      font: new PhetFont(12),
      fill: '#FFFFFF',
      maxWidth: maxTextWidth
    };

    // title for the panel
    const titleText = new Text(atomsAndMoleculesString, {
      font: new PhetFont(14),
      fill: SOMColors.controlPanelTextProperty,
      maxWidth: maxTextWidth,
      tandem: options.tandem.createTandem('titleText')
    });

    // pre-create the tandem for the radio button group so that the text nodes can be under it
    const radioButtonGroupTandem = options.tandem.createTandem('radioButtonGroup');

    // text nodes that will be used on the radio buttons
    const neonText = new Text(neonString, merge({
      tandem: radioButtonGroupTandem.createTandem('neonText')
    }, textOptions));
    const argonText = new Text(argonString, merge({
      tandem: radioButtonGroupTandem.createTandem('argonText')
    }, textOptions));
    const waterText = new Text(waterString, merge({
      tandem: radioButtonGroupTandem.createTandem('waterText')
    }, textOptions));
    const oxygenText = new Text(diatomicOxygenString, merge({
      tandem: radioButtonGroupTandem.createTandem('oxygenText')
    }, textOptions));

    // create objects that describe the pieces that make up an item in the control panel, conforms to the contract:
    // { label: {Node}, icon: {Node}, tandem: {Tandem} }
    const neonSelectionNodeSpec = {
      label: neonText,
      icon: AtomAndMoleculeIconFactory.createIcon(SubstanceType.NEON)
    };
    const argonSelectionNodeSpec = {
      label: argonText,
      icon: AtomAndMoleculeIconFactory.createIcon(SubstanceType.ARGON)
    };
    const waterSelectionNodeSpec = {
      label: waterText,
      icon: AtomAndMoleculeIconFactory.createIcon(SubstanceType.WATER)
    };
    const oxygenSelectionNodeSpec = {
      label: oxygenText,
      icon: AtomAndMoleculeIconFactory.createIcon(SubstanceType.DIATOMIC_OXYGEN)
    };
    const selectorWidth = options.minWidth - 2 * options.xMargin;

    // function to create the selector nodes that will go into the radio button group
    const createSelectionNode = selectionNodeSpec => {
      if (selectionNodeSpec.icon) {
        return new SubstanceSelectorNode(selectionNodeSpec.label, selectionNodeSpec.icon, selectorWidth);
      } else {
        return new HBox({
          children: [selectionNodeSpec.label]
        });
      }
    };
    const radioButtonContent = [{
      value: SubstanceType.NEON,
      createNode: () => createSelectionNode(neonSelectionNodeSpec),
      tandemName: 'neonRadioButton'
    }, {
      value: SubstanceType.ARGON,
      createNode: () => createSelectionNode(argonSelectionNodeSpec),
      tandemName: 'argonRadioButton'
    }, {
      value: SubstanceType.DIATOMIC_OXYGEN,
      createNode: () => createSelectionNode(oxygenSelectionNodeSpec),
      tandemName: 'oxygenRadioButton'
    }, {
      value: SubstanceType.WATER,
      createNode: () => createSelectionNode(waterSelectionNodeSpec),
      tandemName: 'waterRadioButton'
    }];
    const radioButtonGroup = new RectangularRadioButtonGroup(substanceProperty, radioButtonContent, {
      orientation: 'vertical',
      radioButtonOptions: {
        cornerRadius: 5,
        baseColor: 'black',
        buttonAppearanceStrategyOptions: {
          selectedLineWidth: 1,
          selectedStroke: 'white',
          deselectedLineWidth: 0,
          deselectedContentOpacity: 1
        }
      },
      tandem: radioButtonGroupTandem
    });
    SOMColors.controlPanelBackgroundProperty.link(color => {
      radioButtonGroup.baseColor = color;
    });
    const radioButtonPanel = new Panel(radioButtonGroup, {
      yMargin: 10,
      stroke: options.stroke,
      align: 'center',
      lineWidth: options.lineWidth,
      cornerRadius: options.cornerRadius,
      fill: options.fill,
      minWidth: options.minWidth,
      maxWidth: options.maxWidth
    });
    this.addChild(radioButtonPanel);

    // create the background for the title - initial size is arbitrary, it will be sized and positioned below
    const titleBackground = new Rectangle(0, 0, 1, 1, {
      fill: options.fill
    });
    this.addChild(new Node({
      children: [titleBackground, titleText]
    }));

    // closure for updating the title background size and overall position
    const updateTitle = () => {
      if (radioButtonPanel.bounds.equals(Bounds2.NOTHING)) {
        titleBackground.visible = false;
        titleText.visible = false;
      } else {
        titleBackground.rectWidth = titleText.width + 5;
        titleBackground.rectHeight = titleText.height;
        titleBackground.centerX = radioButtonPanel.centerX;
        titleBackground.centerY = radioButtonPanel.top;
        titleText.centerX = titleBackground.centerX;
        titleText.centerY = titleBackground.centerY;
        titleBackground.visible = true;
        titleText.visible = true;
      }
    };

    // do the initial update of the title
    updateTitle();

    // Listen for changes to the title text node's bounds and update the title when they occur.  There is no need to
    // unlink this since the panel is permanent.
    titleText.localBoundsProperty.lazyLink(updateTitle);

    // Listen for changes to the panel bounds and update the title.
    radioButtonPanel.localBoundsProperty.link(updateTitle);
    this.mutate(options);
  }
}
statesOfMatter.register('StatesMoleculesControlPanel', StatesMoleculesControlPanel);
export default StatesMoleculesControlPanel;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb3VuZHMyIiwibWVyZ2UiLCJQaGV0Rm9udCIsIkhCb3giLCJOb2RlIiwiUmVjdGFuZ2xlIiwiVGV4dCIsIlJlY3Rhbmd1bGFyUmFkaW9CdXR0b25Hcm91cCIsIlBhbmVsIiwiVGFuZGVtIiwiU09NQ29uc3RhbnRzIiwiU3Vic3RhbmNlVHlwZSIsIkF0b21BbmRNb2xlY3VsZUljb25GYWN0b3J5IiwiU09NQ29sb3JzIiwiU3Vic3RhbmNlU2VsZWN0b3JOb2RlIiwic3RhdGVzT2ZNYXR0ZXIiLCJTdGF0ZXNPZk1hdHRlclN0cmluZ3MiLCJhcmdvblN0cmluZyIsImFyZ29uIiwiYXRvbXNBbmRNb2xlY3VsZXNTdHJpbmciLCJBdG9tc0FuZE1vbGVjdWxlcyIsImRpYXRvbWljT3h5Z2VuU3RyaW5nIiwiZGlhdG9taWNPeHlnZW4iLCJuZW9uU3RyaW5nIiwibmVvbiIsIndhdGVyU3RyaW5nIiwid2F0ZXIiLCJERUZBVUxUX1dJRFRIIiwiU3RhdGVzTW9sZWN1bGVzQ29udHJvbFBhbmVsIiwiY29uc3RydWN0b3IiLCJzdWJzdGFuY2VQcm9wZXJ0eSIsIm9wdGlvbnMiLCJ4TWFyZ2luIiwieU1hcmdpbiIsImZpbGwiLCJjb250cm9sUGFuZWxCYWNrZ3JvdW5kUHJvcGVydHkiLCJzdHJva2UiLCJjb250cm9sUGFuZWxTdHJva2VQcm9wZXJ0eSIsImxpbmVXaWR0aCIsImNvcm5lclJhZGl1cyIsIlBBTkVMX0NPUk5FUl9SQURJVVMiLCJtYXhXaWR0aCIsIm1pbldpZHRoIiwidGFuZGVtIiwiUkVRVUlSRUQiLCJtYXhUZXh0V2lkdGgiLCJ0ZXh0T3B0aW9ucyIsImZvbnQiLCJ0aXRsZVRleHQiLCJjb250cm9sUGFuZWxUZXh0UHJvcGVydHkiLCJjcmVhdGVUYW5kZW0iLCJyYWRpb0J1dHRvbkdyb3VwVGFuZGVtIiwibmVvblRleHQiLCJhcmdvblRleHQiLCJ3YXRlclRleHQiLCJveHlnZW5UZXh0IiwibmVvblNlbGVjdGlvbk5vZGVTcGVjIiwibGFiZWwiLCJpY29uIiwiY3JlYXRlSWNvbiIsIk5FT04iLCJhcmdvblNlbGVjdGlvbk5vZGVTcGVjIiwiQVJHT04iLCJ3YXRlclNlbGVjdGlvbk5vZGVTcGVjIiwiV0FURVIiLCJveHlnZW5TZWxlY3Rpb25Ob2RlU3BlYyIsIkRJQVRPTUlDX09YWUdFTiIsInNlbGVjdG9yV2lkdGgiLCJjcmVhdGVTZWxlY3Rpb25Ob2RlIiwic2VsZWN0aW9uTm9kZVNwZWMiLCJjaGlsZHJlbiIsInJhZGlvQnV0dG9uQ29udGVudCIsInZhbHVlIiwiY3JlYXRlTm9kZSIsInRhbmRlbU5hbWUiLCJyYWRpb0J1dHRvbkdyb3VwIiwib3JpZW50YXRpb24iLCJyYWRpb0J1dHRvbk9wdGlvbnMiLCJiYXNlQ29sb3IiLCJidXR0b25BcHBlYXJhbmNlU3RyYXRlZ3lPcHRpb25zIiwic2VsZWN0ZWRMaW5lV2lkdGgiLCJzZWxlY3RlZFN0cm9rZSIsImRlc2VsZWN0ZWRMaW5lV2lkdGgiLCJkZXNlbGVjdGVkQ29udGVudE9wYWNpdHkiLCJsaW5rIiwiY29sb3IiLCJyYWRpb0J1dHRvblBhbmVsIiwiYWxpZ24iLCJhZGRDaGlsZCIsInRpdGxlQmFja2dyb3VuZCIsInVwZGF0ZVRpdGxlIiwiYm91bmRzIiwiZXF1YWxzIiwiTk9USElORyIsInZpc2libGUiLCJyZWN0V2lkdGgiLCJ3aWR0aCIsInJlY3RIZWlnaHQiLCJoZWlnaHQiLCJjZW50ZXJYIiwiY2VudGVyWSIsInRvcCIsImxvY2FsQm91bmRzUHJvcGVydHkiLCJsYXp5TGluayIsIm11dGF0ZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiU3RhdGVzTW9sZWN1bGVzQ29udHJvbFBhbmVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE0LTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIHBhbmVsIGZvciBzZWxlY3RpbmcgdGhlIGF0b21zL21vbGVjdWxlc1xyXG4gKlxyXG4gKiBAYXV0aG9yIFNpZGRoYXJ0aGEgQ2hpbnRoYXBhbGx5IChBY3R1YWwgQ29uY2VwdHMpXHJcbiAqIEBhdXRob3IgSm9obiBCbGFuY28gKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXHJcbiAqL1xyXG5cclxuaW1wb3J0IEJvdW5kczIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL0JvdW5kczIuanMnO1xyXG5pbXBvcnQgbWVyZ2UgZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL21lcmdlLmpzJztcclxuaW1wb3J0IFBoZXRGb250IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9QaGV0Rm9udC5qcyc7XHJcbmltcG9ydCB7IEhCb3gsIE5vZGUsIFJlY3RhbmdsZSwgVGV4dCB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBSZWN0YW5ndWxhclJhZGlvQnV0dG9uR3JvdXAgZnJvbSAnLi4vLi4vLi4vLi4vc3VuL2pzL2J1dHRvbnMvUmVjdGFuZ3VsYXJSYWRpb0J1dHRvbkdyb3VwLmpzJztcclxuaW1wb3J0IFBhbmVsIGZyb20gJy4uLy4uLy4uLy4uL3N1bi9qcy9QYW5lbC5qcyc7XHJcbmltcG9ydCBUYW5kZW0gZnJvbSAnLi4vLi4vLi4vLi4vdGFuZGVtL2pzL1RhbmRlbS5qcyc7XHJcbmltcG9ydCBTT01Db25zdGFudHMgZnJvbSAnLi4vLi4vY29tbW9uL1NPTUNvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBTdWJzdGFuY2VUeXBlIGZyb20gJy4uLy4uL2NvbW1vbi9TdWJzdGFuY2VUeXBlLmpzJztcclxuaW1wb3J0IEF0b21BbmRNb2xlY3VsZUljb25GYWN0b3J5IGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L0F0b21BbmRNb2xlY3VsZUljb25GYWN0b3J5LmpzJztcclxuaW1wb3J0IFNPTUNvbG9ycyBmcm9tICcuLi8uLi9jb21tb24vdmlldy9TT01Db2xvcnMuanMnO1xyXG5pbXBvcnQgU3Vic3RhbmNlU2VsZWN0b3JOb2RlIGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L1N1YnN0YW5jZVNlbGVjdG9yTm9kZS5qcyc7XHJcbmltcG9ydCBzdGF0ZXNPZk1hdHRlciBmcm9tICcuLi8uLi9zdGF0ZXNPZk1hdHRlci5qcyc7XHJcbmltcG9ydCBTdGF0ZXNPZk1hdHRlclN0cmluZ3MgZnJvbSAnLi4vLi4vU3RhdGVzT2ZNYXR0ZXJTdHJpbmdzLmpzJztcclxuXHJcbmNvbnN0IGFyZ29uU3RyaW5nID0gU3RhdGVzT2ZNYXR0ZXJTdHJpbmdzLmFyZ29uO1xyXG5jb25zdCBhdG9tc0FuZE1vbGVjdWxlc1N0cmluZyA9IFN0YXRlc09mTWF0dGVyU3RyaW5ncy5BdG9tc0FuZE1vbGVjdWxlcztcclxuY29uc3QgZGlhdG9taWNPeHlnZW5TdHJpbmcgPSBTdGF0ZXNPZk1hdHRlclN0cmluZ3MuZGlhdG9taWNPeHlnZW47XHJcbmNvbnN0IG5lb25TdHJpbmcgPSBTdGF0ZXNPZk1hdHRlclN0cmluZ3MubmVvbjtcclxuY29uc3Qgd2F0ZXJTdHJpbmcgPSBTdGF0ZXNPZk1hdHRlclN0cmluZ3Mud2F0ZXI7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgREVGQVVMVF9XSURUSCA9IDE2MDtcclxuXHJcbmNsYXNzIFN0YXRlc01vbGVjdWxlc0NvbnRyb2xQYW5lbCBleHRlbmRzIE5vZGUge1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge1Byb3BlcnR5LjxudW1iZXI+fSBzdWJzdGFuY2VQcm9wZXJ0eSB0aGF0IHRyYWNrcyB0aGUgc3Vic3RhbmNlIHNlbGVjdGVkIGluIHRoZSBwYW5lbFxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gZm9yIHZhcmlvdXMgcGFuZWwgZGlzcGxheSBwcm9wZXJ0aWVzXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoIHN1YnN0YW5jZVByb3BlcnR5LCBvcHRpb25zICkge1xyXG5cclxuICAgIG9wdGlvbnMgPSBtZXJnZSgge1xyXG4gICAgICB4TWFyZ2luOiA1LFxyXG4gICAgICB5TWFyZ2luOiA4LFxyXG4gICAgICBmaWxsOiBTT01Db2xvcnMuY29udHJvbFBhbmVsQmFja2dyb3VuZFByb3BlcnR5LFxyXG4gICAgICBzdHJva2U6IFNPTUNvbG9ycy5jb250cm9sUGFuZWxTdHJva2VQcm9wZXJ0eSxcclxuICAgICAgbGluZVdpZHRoOiAxLFxyXG4gICAgICBjb3JuZXJSYWRpdXM6IFNPTUNvbnN0YW50cy5QQU5FTF9DT1JORVJfUkFESVVTLFxyXG4gICAgICBtYXhXaWR0aDogREVGQVVMVF9XSURUSCxcclxuICAgICAgbWluV2lkdGg6IERFRkFVTFRfV0lEVEgsXHJcbiAgICAgIHRhbmRlbTogVGFuZGVtLlJFUVVJUkVEXHJcbiAgICB9LCBvcHRpb25zICk7XHJcblxyXG4gICAgc3VwZXIoKTtcclxuICAgIGNvbnN0IG1heFRleHRXaWR0aCA9IG9wdGlvbnMubWF4V2lkdGggKiAwLjc1O1xyXG4gICAgY29uc3QgdGV4dE9wdGlvbnMgPSB7IGZvbnQ6IG5ldyBQaGV0Rm9udCggMTIgKSwgZmlsbDogJyNGRkZGRkYnLCBtYXhXaWR0aDogbWF4VGV4dFdpZHRoIH07XHJcblxyXG4gICAgLy8gdGl0bGUgZm9yIHRoZSBwYW5lbFxyXG4gICAgY29uc3QgdGl0bGVUZXh0ID0gbmV3IFRleHQoIGF0b21zQW5kTW9sZWN1bGVzU3RyaW5nLCB7XHJcbiAgICAgIGZvbnQ6IG5ldyBQaGV0Rm9udCggMTQgKSxcclxuICAgICAgZmlsbDogU09NQ29sb3JzLmNvbnRyb2xQYW5lbFRleHRQcm9wZXJ0eSxcclxuICAgICAgbWF4V2lkdGg6IG1heFRleHRXaWR0aCxcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICd0aXRsZVRleHQnIClcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBwcmUtY3JlYXRlIHRoZSB0YW5kZW0gZm9yIHRoZSByYWRpbyBidXR0b24gZ3JvdXAgc28gdGhhdCB0aGUgdGV4dCBub2RlcyBjYW4gYmUgdW5kZXIgaXRcclxuICAgIGNvbnN0IHJhZGlvQnV0dG9uR3JvdXBUYW5kZW0gPSBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdyYWRpb0J1dHRvbkdyb3VwJyApO1xyXG5cclxuICAgIC8vIHRleHQgbm9kZXMgdGhhdCB3aWxsIGJlIHVzZWQgb24gdGhlIHJhZGlvIGJ1dHRvbnNcclxuICAgIGNvbnN0IG5lb25UZXh0ID0gbmV3IFRleHQoXHJcbiAgICAgIG5lb25TdHJpbmcsXHJcbiAgICAgIG1lcmdlKCB7IHRhbmRlbTogcmFkaW9CdXR0b25Hcm91cFRhbmRlbS5jcmVhdGVUYW5kZW0oICduZW9uVGV4dCcgKSB9LCB0ZXh0T3B0aW9ucyApXHJcbiAgICApO1xyXG4gICAgY29uc3QgYXJnb25UZXh0ID0gbmV3IFRleHQoXHJcbiAgICAgIGFyZ29uU3RyaW5nLFxyXG4gICAgICBtZXJnZSggeyB0YW5kZW06IHJhZGlvQnV0dG9uR3JvdXBUYW5kZW0uY3JlYXRlVGFuZGVtKCAnYXJnb25UZXh0JyApIH0sIHRleHRPcHRpb25zIClcclxuICAgICk7XHJcbiAgICBjb25zdCB3YXRlclRleHQgPSBuZXcgVGV4dChcclxuICAgICAgd2F0ZXJTdHJpbmcsXHJcbiAgICAgIG1lcmdlKCB7IHRhbmRlbTogcmFkaW9CdXR0b25Hcm91cFRhbmRlbS5jcmVhdGVUYW5kZW0oICd3YXRlclRleHQnICkgfSwgdGV4dE9wdGlvbnMgKVxyXG4gICAgKTtcclxuICAgIGNvbnN0IG94eWdlblRleHQgPSBuZXcgVGV4dChcclxuICAgICAgZGlhdG9taWNPeHlnZW5TdHJpbmcsXHJcbiAgICAgIG1lcmdlKCB7IHRhbmRlbTogcmFkaW9CdXR0b25Hcm91cFRhbmRlbS5jcmVhdGVUYW5kZW0oICdveHlnZW5UZXh0JyApIH0sIHRleHRPcHRpb25zIClcclxuICAgICk7XHJcblxyXG4gICAgLy8gY3JlYXRlIG9iamVjdHMgdGhhdCBkZXNjcmliZSB0aGUgcGllY2VzIHRoYXQgbWFrZSB1cCBhbiBpdGVtIGluIHRoZSBjb250cm9sIHBhbmVsLCBjb25mb3JtcyB0byB0aGUgY29udHJhY3Q6XHJcbiAgICAvLyB7IGxhYmVsOiB7Tm9kZX0sIGljb246IHtOb2RlfSwgdGFuZGVtOiB7VGFuZGVtfSB9XHJcbiAgICBjb25zdCBuZW9uU2VsZWN0aW9uTm9kZVNwZWMgPSB7XHJcbiAgICAgIGxhYmVsOiBuZW9uVGV4dCxcclxuICAgICAgaWNvbjogQXRvbUFuZE1vbGVjdWxlSWNvbkZhY3RvcnkuY3JlYXRlSWNvbiggU3Vic3RhbmNlVHlwZS5ORU9OIClcclxuICAgIH07XHJcbiAgICBjb25zdCBhcmdvblNlbGVjdGlvbk5vZGVTcGVjID0ge1xyXG4gICAgICBsYWJlbDogYXJnb25UZXh0LFxyXG4gICAgICBpY29uOiBBdG9tQW5kTW9sZWN1bGVJY29uRmFjdG9yeS5jcmVhdGVJY29uKCBTdWJzdGFuY2VUeXBlLkFSR09OIClcclxuICAgIH07XHJcbiAgICBjb25zdCB3YXRlclNlbGVjdGlvbk5vZGVTcGVjID0ge1xyXG4gICAgICBsYWJlbDogd2F0ZXJUZXh0LFxyXG4gICAgICBpY29uOiBBdG9tQW5kTW9sZWN1bGVJY29uRmFjdG9yeS5jcmVhdGVJY29uKCBTdWJzdGFuY2VUeXBlLldBVEVSIClcclxuICAgIH07XHJcbiAgICBjb25zdCBveHlnZW5TZWxlY3Rpb25Ob2RlU3BlYyA9IHtcclxuICAgICAgbGFiZWw6IG94eWdlblRleHQsXHJcbiAgICAgIGljb246IEF0b21BbmRNb2xlY3VsZUljb25GYWN0b3J5LmNyZWF0ZUljb24oIFN1YnN0YW5jZVR5cGUuRElBVE9NSUNfT1hZR0VOIClcclxuICAgIH07XHJcblxyXG4gICAgY29uc3Qgc2VsZWN0b3JXaWR0aCA9IG9wdGlvbnMubWluV2lkdGggLSAyICogb3B0aW9ucy54TWFyZ2luO1xyXG5cclxuICAgIC8vIGZ1bmN0aW9uIHRvIGNyZWF0ZSB0aGUgc2VsZWN0b3Igbm9kZXMgdGhhdCB3aWxsIGdvIGludG8gdGhlIHJhZGlvIGJ1dHRvbiBncm91cFxyXG4gICAgY29uc3QgY3JlYXRlU2VsZWN0aW9uTm9kZSA9IHNlbGVjdGlvbk5vZGVTcGVjID0+IHtcclxuICAgICAgaWYgKCBzZWxlY3Rpb25Ob2RlU3BlYy5pY29uICkge1xyXG4gICAgICAgIHJldHVybiBuZXcgU3Vic3RhbmNlU2VsZWN0b3JOb2RlKCBzZWxlY3Rpb25Ob2RlU3BlYy5sYWJlbCwgc2VsZWN0aW9uTm9kZVNwZWMuaWNvbiwgc2VsZWN0b3JXaWR0aCApO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBuZXcgSEJveCgge1xyXG4gICAgICAgICAgY2hpbGRyZW46IFsgc2VsZWN0aW9uTm9kZVNwZWMubGFiZWwgXVxyXG4gICAgICAgIH0gKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCByYWRpb0J1dHRvbkNvbnRlbnQgPSBbXHJcbiAgICAgIHsgdmFsdWU6IFN1YnN0YW5jZVR5cGUuTkVPTiwgY3JlYXRlTm9kZTogKCkgPT4gY3JlYXRlU2VsZWN0aW9uTm9kZSggbmVvblNlbGVjdGlvbk5vZGVTcGVjICksIHRhbmRlbU5hbWU6ICduZW9uUmFkaW9CdXR0b24nIH0sXHJcbiAgICAgIHsgdmFsdWU6IFN1YnN0YW5jZVR5cGUuQVJHT04sIGNyZWF0ZU5vZGU6ICgpID0+IGNyZWF0ZVNlbGVjdGlvbk5vZGUoIGFyZ29uU2VsZWN0aW9uTm9kZVNwZWMgKSwgdGFuZGVtTmFtZTogJ2FyZ29uUmFkaW9CdXR0b24nIH0sXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZTogU3Vic3RhbmNlVHlwZS5ESUFUT01JQ19PWFlHRU4sXHJcbiAgICAgICAgY3JlYXRlTm9kZTogKCkgPT4gY3JlYXRlU2VsZWN0aW9uTm9kZSggb3h5Z2VuU2VsZWN0aW9uTm9kZVNwZWMgKSxcclxuICAgICAgICB0YW5kZW1OYW1lOiAnb3h5Z2VuUmFkaW9CdXR0b24nXHJcbiAgICAgIH0sXHJcbiAgICAgIHsgdmFsdWU6IFN1YnN0YW5jZVR5cGUuV0FURVIsIGNyZWF0ZU5vZGU6ICgpID0+IGNyZWF0ZVNlbGVjdGlvbk5vZGUoIHdhdGVyU2VsZWN0aW9uTm9kZVNwZWMgKSwgdGFuZGVtTmFtZTogJ3dhdGVyUmFkaW9CdXR0b24nIH1cclxuICAgIF07XHJcblxyXG4gICAgY29uc3QgcmFkaW9CdXR0b25Hcm91cCA9IG5ldyBSZWN0YW5ndWxhclJhZGlvQnV0dG9uR3JvdXAoIHN1YnN0YW5jZVByb3BlcnR5LCByYWRpb0J1dHRvbkNvbnRlbnQsIHtcclxuICAgICAgb3JpZW50YXRpb246ICd2ZXJ0aWNhbCcsXHJcbiAgICAgIHJhZGlvQnV0dG9uT3B0aW9uczoge1xyXG4gICAgICAgIGNvcm5lclJhZGl1czogNSxcclxuICAgICAgICBiYXNlQ29sb3I6ICdibGFjaycsXHJcbiAgICAgICAgYnV0dG9uQXBwZWFyYW5jZVN0cmF0ZWd5T3B0aW9uczoge1xyXG4gICAgICAgICAgc2VsZWN0ZWRMaW5lV2lkdGg6IDEsXHJcbiAgICAgICAgICBzZWxlY3RlZFN0cm9rZTogJ3doaXRlJyxcclxuICAgICAgICAgIGRlc2VsZWN0ZWRMaW5lV2lkdGg6IDAsXHJcbiAgICAgICAgICBkZXNlbGVjdGVkQ29udGVudE9wYWNpdHk6IDFcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHRhbmRlbTogcmFkaW9CdXR0b25Hcm91cFRhbmRlbVxyXG4gICAgfSApO1xyXG5cclxuICAgIFNPTUNvbG9ycy5jb250cm9sUGFuZWxCYWNrZ3JvdW5kUHJvcGVydHkubGluayggY29sb3IgPT4ge1xyXG4gICAgICByYWRpb0J1dHRvbkdyb3VwLmJhc2VDb2xvciA9IGNvbG9yO1xyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IHJhZGlvQnV0dG9uUGFuZWwgPSBuZXcgUGFuZWwoIHJhZGlvQnV0dG9uR3JvdXAsIHtcclxuICAgICAgeU1hcmdpbjogMTAsXHJcbiAgICAgIHN0cm9rZTogb3B0aW9ucy5zdHJva2UsXHJcbiAgICAgIGFsaWduOiAnY2VudGVyJyxcclxuICAgICAgbGluZVdpZHRoOiBvcHRpb25zLmxpbmVXaWR0aCxcclxuICAgICAgY29ybmVyUmFkaXVzOiBvcHRpb25zLmNvcm5lclJhZGl1cyxcclxuICAgICAgZmlsbDogb3B0aW9ucy5maWxsLFxyXG4gICAgICBtaW5XaWR0aDogb3B0aW9ucy5taW5XaWR0aCxcclxuICAgICAgbWF4V2lkdGg6IG9wdGlvbnMubWF4V2lkdGhcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIHJhZGlvQnV0dG9uUGFuZWwgKTtcclxuXHJcbiAgICAvLyBjcmVhdGUgdGhlIGJhY2tncm91bmQgZm9yIHRoZSB0aXRsZSAtIGluaXRpYWwgc2l6ZSBpcyBhcmJpdHJhcnksIGl0IHdpbGwgYmUgc2l6ZWQgYW5kIHBvc2l0aW9uZWQgYmVsb3dcclxuICAgIGNvbnN0IHRpdGxlQmFja2dyb3VuZCA9IG5ldyBSZWN0YW5nbGUoIDAsIDAsIDEsIDEsIHsgZmlsbDogb3B0aW9ucy5maWxsIH0gKTtcclxuICAgIHRoaXMuYWRkQ2hpbGQoIG5ldyBOb2RlKCB7IGNoaWxkcmVuOiBbIHRpdGxlQmFja2dyb3VuZCwgdGl0bGVUZXh0IF0gfSApICk7XHJcblxyXG4gICAgLy8gY2xvc3VyZSBmb3IgdXBkYXRpbmcgdGhlIHRpdGxlIGJhY2tncm91bmQgc2l6ZSBhbmQgb3ZlcmFsbCBwb3NpdGlvblxyXG4gICAgY29uc3QgdXBkYXRlVGl0bGUgPSAoKSA9PiB7XHJcbiAgICAgIGlmICggcmFkaW9CdXR0b25QYW5lbC5ib3VuZHMuZXF1YWxzKCBCb3VuZHMyLk5PVEhJTkcgKSApIHtcclxuICAgICAgICB0aXRsZUJhY2tncm91bmQudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHRpdGxlVGV4dC52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGl0bGVCYWNrZ3JvdW5kLnJlY3RXaWR0aCA9IHRpdGxlVGV4dC53aWR0aCArIDU7XHJcbiAgICAgICAgdGl0bGVCYWNrZ3JvdW5kLnJlY3RIZWlnaHQgPSB0aXRsZVRleHQuaGVpZ2h0O1xyXG4gICAgICAgIHRpdGxlQmFja2dyb3VuZC5jZW50ZXJYID0gcmFkaW9CdXR0b25QYW5lbC5jZW50ZXJYO1xyXG4gICAgICAgIHRpdGxlQmFja2dyb3VuZC5jZW50ZXJZID0gcmFkaW9CdXR0b25QYW5lbC50b3A7XHJcbiAgICAgICAgdGl0bGVUZXh0LmNlbnRlclggPSB0aXRsZUJhY2tncm91bmQuY2VudGVyWDtcclxuICAgICAgICB0aXRsZVRleHQuY2VudGVyWSA9IHRpdGxlQmFja2dyb3VuZC5jZW50ZXJZO1xyXG4gICAgICAgIHRpdGxlQmFja2dyb3VuZC52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICB0aXRsZVRleHQudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gZG8gdGhlIGluaXRpYWwgdXBkYXRlIG9mIHRoZSB0aXRsZVxyXG4gICAgdXBkYXRlVGl0bGUoKTtcclxuXHJcbiAgICAvLyBMaXN0ZW4gZm9yIGNoYW5nZXMgdG8gdGhlIHRpdGxlIHRleHQgbm9kZSdzIGJvdW5kcyBhbmQgdXBkYXRlIHRoZSB0aXRsZSB3aGVuIHRoZXkgb2NjdXIuICBUaGVyZSBpcyBubyBuZWVkIHRvXHJcbiAgICAvLyB1bmxpbmsgdGhpcyBzaW5jZSB0aGUgcGFuZWwgaXMgcGVybWFuZW50LlxyXG4gICAgdGl0bGVUZXh0LmxvY2FsQm91bmRzUHJvcGVydHkubGF6eUxpbmsoIHVwZGF0ZVRpdGxlICk7XHJcblxyXG4gICAgLy8gTGlzdGVuIGZvciBjaGFuZ2VzIHRvIHRoZSBwYW5lbCBib3VuZHMgYW5kIHVwZGF0ZSB0aGUgdGl0bGUuXHJcbiAgICByYWRpb0J1dHRvblBhbmVsLmxvY2FsQm91bmRzUHJvcGVydHkubGluayggdXBkYXRlVGl0bGUgKTtcclxuXHJcbiAgICB0aGlzLm11dGF0ZSggb3B0aW9ucyApO1xyXG4gIH1cclxufVxyXG5cclxuc3RhdGVzT2ZNYXR0ZXIucmVnaXN0ZXIoICdTdGF0ZXNNb2xlY3VsZXNDb250cm9sUGFuZWwnLCBTdGF0ZXNNb2xlY3VsZXNDb250cm9sUGFuZWwgKTtcclxuZXhwb3J0IGRlZmF1bHQgU3RhdGVz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