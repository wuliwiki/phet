// Copyright 2019-2023, University of Colorado Boulder

/**
 * The main view for the Applications screen of the Buoyancy simulation.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import UnitConversionProperty from '../../../../axon/js/UnitConversionProperty.js';
import Dimension2 from '../../../../dot/js/Dimension2.js';
import Range from '../../../../dot/js/Range.js';
import Utils from '../../../../dot/js/Utils.js';
import Vector3 from '../../../../dot/js/Vector3.js';
import { combineOptions } from '../../../../phet-core/js/optionize.js';
import resetArrow_png from '../../../../scenery-phet/images/resetArrow_png.js';
import NumberControl from '../../../../scenery-phet/js/NumberControl.js';
import NumberDisplay from '../../../../scenery-phet/js/NumberDisplay.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { AlignBox, Color, HBox, HSeparator, HStrut, Image, ManualConstraint, Node, Text, VBox } from '../../../../scenery/js/imports.js';
import AccordionBox from '../../../../sun/js/AccordionBox.js';
import RectangularPushButton from '../../../../sun/js/buttons/RectangularPushButton.js';
import RectangularRadioButtonGroup from '../../../../sun/js/buttons/RectangularRadioButtonGroup.js';
import Panel from '../../../../sun/js/Panel.js';
import DensityBuoyancyCommonConstants from '../../common/DensityBuoyancyCommonConstants.js';
import Cube from '../../common/model/Cube.js';
import Material from '../../common/model/Material.js';
import DensityBuoyancyCommonColors from '../../common/view/DensityBuoyancyCommonColors.js';
import DensityBuoyancyScreenView from '../../common/view/DensityBuoyancyScreenView.js';
import DensityControlNode from '../../common/view/DensityControlNode.js';
import DisplayOptionsNode from '../../common/view/DisplayOptionsNode.js';
import MaterialMassVolumeControlNode from '../../common/view/MaterialMassVolumeControlNode.js';
import densityBuoyancyCommon from '../../densityBuoyancyCommon.js';
import DensityBuoyancyCommonStrings from '../../DensityBuoyancyCommonStrings.js';
import { Scene } from '../model/BuoyancyApplicationsModel.js';
import DensityReadoutListNode from './DensityReadoutListNode.js';

// constants
const MARGIN = DensityBuoyancyCommonConstants.MARGIN;
export default class BuoyancyApplicationsScreenView extends DensityBuoyancyScreenView {
  constructor(model, options) {
    const tandem = options.tandem;
    super(model, combineOptions({
      cameraLookAt: DensityBuoyancyCommonConstants.BUOYANCY_CAMERA_LOOK_AT
    }, options));

    // For clipping planes in BottleView
    if (this.sceneNode.stage.threeRenderer) {
      this.sceneNode.stage.threeRenderer.localClippingEnabled = true;
    }
    const bottleControlNode = new MaterialMassVolumeControlNode(model.bottle.interiorMaterialProperty, model.bottle.interiorMassProperty, model.bottle.interiorVolumeProperty, [Material.GASOLINE, Material.OIL, Material.WATER, Material.SAND, Material.CEMENT, Material.COPPER, Material.LEAD, Material.MERCURY], volume => model.bottle.interiorVolumeProperty.set(volume), this.popupLayer, {
      minMass: 0,
      maxCustomMass: 100,
      maxMass: Material.MERCURY.density * 0.01,
      minVolumeLiters: 0,
      maxVolumeLiters: 10,
      minCustomVolumeLiters: 0.5,
      tandem: tandem.createTandem('bottleControlNode')
    });
    const airVolumeLabel = new Text(DensityBuoyancyCommonStrings.airVolumeStringProperty, {
      font: DensityBuoyancyCommonConstants.READOUT_FONT,
      maxWidth: 160
    });

    // DerivedProperty doesn't need disposal, since everything here lives for the lifetime of the simulation
    const airLitersProperty = new DerivedProperty([model.bottle.interiorVolumeProperty], volume => {
      return (0.01 - volume) * 1000;
    });
    const bottleBox = new VBox({
      spacing: 10,
      align: 'left',
      stretch: true,
      children: [new Text(DensityBuoyancyCommonStrings.materialInsideStringProperty, {
        font: DensityBuoyancyCommonConstants.TITLE_FONT,
        maxWidth: 160
      }), bottleControlNode, new HSeparator(), new HBox({
        spacing: 5,
        children: [airVolumeLabel, new NumberDisplay(airLitersProperty, new Range(0, 10), {
          valuePattern: DensityBuoyancyCommonConstants.VOLUME_PATTERN_STRING_PROPERTY,
          useRichText: true,
          decimalPlaces: 2,
          textOptions: {
            font: new PhetFont(12),
            maxWidth: 120
          }
        })]
      })]
    });
    const rightBottleContent = new AlignBox(new Panel(bottleBox, DensityBuoyancyCommonConstants.PANEL_OPTIONS), {
      alignBoundsProperty: this.visibleBoundsProperty,
      xAlign: 'right',
      yAlign: 'bottom',
      xMargin: 10,
      yMargin: 60
    });
    const blockControlNode = new MaterialMassVolumeControlNode(model.block.materialProperty, model.block.massProperty, model.block.volumeProperty, _.sortBy([Material.PYRITE, Material.STEEL, Material.SILVER, Material.TANTALUM, Material.GOLD, Material.PLATINUM, Material.STYROFOAM, Material.WOOD, Material.ICE, Material.BRICK, Material.ALUMINUM], material => material.density), cubicMeters => model.block.updateSize(Cube.boundsFromVolume(cubicMeters)), this.popupLayer, {
      tandem: tandem.createTandem('blockControlNode')
    });
    const resetSceneButton = new RectangularPushButton({
      content: new Node({
        children: [new Image(resetArrow_png, {
          scale: 0.3
        })]
      }),
      xMargin: 5,
      yMargin: 3,
      baseColor: new Color(220, 220, 220),
      listener: () => {
        model.resetBoatScene();
      },
      visibleProperty: new DerivedProperty([model.sceneProperty], scene => scene === Scene.BOAT)
    });
    this.addChild(resetSceneButton);
    this.positionResetSceneButton = () => {
      resetSceneButton.rightTop = this.modelToViewPoint(new Vector3(this.model.poolBounds.maxX, this.model.poolBounds.minY, this.model.poolBounds.maxZ)).plusXY(0, 5);
    };
    this.transformEmitter.addListener(this.positionResetSceneButton);
    this.positionResetSceneButton();
    const boatVolumeRange = new Range(5, 30);
    const boatBox = new VBox({
      spacing: 10,
      align: 'left',
      children: [blockControlNode, new HSeparator(),
      // Convert cubic meters => liters
      new NumberControl(DensityBuoyancyCommonStrings.boatVolumeStringProperty, new UnitConversionProperty(model.boat.displacementVolumeProperty, {
        factor: 1000
      }), boatVolumeRange, combineOptions({
        numberDisplayOptions: {
          valuePattern: DensityBuoyancyCommonConstants.VOLUME_PATTERN_STRING_PROPERTY,
          useRichText: true,
          textOptions: {
            font: DensityBuoyancyCommonConstants.READOUT_FONT,
            maxWidth: 120
          },
          useFullHeight: true
        }
      }, MaterialMassVolumeControlNode.getNumberControlOptions(), {
        sliderOptions: {
          trackSize: new Dimension2(120, 0.5),
          thumbSize: DensityBuoyancyCommonConstants.THUMB_SIZE,
          constrainValue: value => {
            return boatVolumeRange.constrainValue(Utils.roundToInterval(value, 0.1));
          },
          phetioLinkedProperty: model.boat.displacementVolumeProperty,
          majorTickLength: 5,
          majorTicks: [{
            value: boatVolumeRange.min,
            label: new Text(boatVolumeRange.min, {
              font: new PhetFont(12),
              maxWidth: 50
            })
          }, {
            value: boatVolumeRange.max,
            label: new Text(boatVolumeRange.max, {
              font: new PhetFont(12),
              maxWidth: 50
            })
          }]
        }
      }))]
    });
    const rightBoatContent = new AlignBox(new Panel(boatBox, DensityBuoyancyCommonConstants.PANEL_OPTIONS), {
      alignBoundsProperty: this.visibleBoundsProperty,
      xAlign: 'right',
      yAlign: 'bottom',
      xMargin: 10,
      yMargin: 60
    });
    this.addChild(rightBottleContent);
    this.addChild(rightBoatContent);

    // This instance lives for the lifetime of the simulation, so we don't need to remove this listener
    model.sceneProperty.link(scene => {
      rightBottleContent.visible = scene === Scene.BOTTLE;
      rightBoatContent.visible = scene === Scene.BOAT;
    });
    const densityControlPanel = new Panel(new DensityControlNode(model.liquidMaterialProperty, [Material.GASOLINE, Material.OIL, Material.WATER, Material.SEAWATER, Material.HONEY, Material.MERCURY, Material.DENSITY_E, Material.DENSITY_F], this.popupLayer, tandem.createTandem('densityControlNode')), DensityBuoyancyCommonConstants.PANEL_OPTIONS);
    this.addChild(new AlignBox(densityControlPanel, {
      alignBoundsProperty: this.visibleBoundsProperty,
      xAlign: 'center',
      yAlign: 'bottom',
      margin: MARGIN
    }));
    const displayOptionsNode = new DisplayOptionsNode(model);
    const densityContainer = new VBox({
      spacing: 0,
      children: [new HStrut(displayOptionsNode.width - 10),
      // Same internal size as displayOptionsNode
      new DensityReadoutListNode([model.bottle.interiorMaterialProperty, model.bottle.materialProperty])]
    });
    const densityBox = new AccordionBox(densityContainer, combineOptions({
      titleNode: new Text(DensityBuoyancyCommonStrings.densityStringProperty, {
        maxWidth: 160,
        font: DensityBuoyancyCommonConstants.TITLE_FONT
      }),
      expandedProperty: model.densityExpandedProperty
    }, DensityBuoyancyCommonConstants.ACCORDION_BOX_OPTIONS));
    this.addChild(new AlignBox(new VBox({
      spacing: 10,
      children: [densityBox, new Panel(displayOptionsNode, DensityBuoyancyCommonConstants.PANEL_OPTIONS)]
    }), {
      alignBoundsProperty: this.visibleBoundsProperty,
      xAlign: 'left',
      yAlign: 'bottom',
      margin: MARGIN
    }));
    const bottleBoatSelectionNode = new RectangularRadioButtonGroup(model.sceneProperty, [{
      value: Scene.BOTTLE,
      createNode: () => new Text('(bottle)')
    }, {
      value: Scene.BOAT,
      createNode: () => new Text('(boat)')
    }], {
      orientation: 'horizontal',
      touchAreaXDilation: 6,
      touchAreaYDilation: 6,
      radioButtonOptions: {
        baseColor: DensityBuoyancyCommonColors.radioBackgroundColorProperty,
        xMargin: 10,
        yMargin: 10,
        buttonAppearanceStrategyOptions: {
          selectedLineWidth: 2,
          deselectedLineWidth: 1.5,
          selectedStroke: DensityBuoyancyCommonColors.radioBorderColorProperty
        }
      }
    });
    this.addChild(bottleBoatSelectionNode);
    ManualConstraint.create(this, [densityControlPanel, bottleBoatSelectionNode], (panelWrapper, selectionWrapper) => {
      selectionWrapper.bottom = panelWrapper.bottom;
      selectionWrapper.left = panelWrapper.right + MARGIN;
    });
    this.addChild(this.popupLayer);
  }
  step(dt) {
    super.step(dt);
    this.positionResetSceneButton();
  }
}
densityBuoyancyCommon.register('BuoyancyApplicationsScreenView', BuoyancyApplicationsScreenView);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJVbml0Q29udmVyc2lvblByb3BlcnR5IiwiRGltZW5zaW9uMiIsIlJhbmdlIiwiVXRpbHMiLCJWZWN0b3IzIiwiY29tYmluZU9wdGlvbnMiLCJyZXNldEFycm93X3BuZyIsIk51bWJlckNvbnRyb2wiLCJOdW1iZXJEaXNwbGF5IiwiUGhldEZvbnQiLCJBbGlnbkJveCIsIkNvbG9yIiwiSEJveCIsIkhTZXBhcmF0b3IiLCJIU3RydXQiLCJJbWFnZSIsIk1hbnVhbENvbnN0cmFpbnQiLCJOb2RlIiwiVGV4dCIsIlZCb3giLCJBY2NvcmRpb25Cb3giLCJSZWN0YW5ndWxhclB1c2hCdXR0b24iLCJSZWN0YW5ndWxhclJhZGlvQnV0dG9uR3JvdXAiLCJQYW5lbCIsIkRlbnNpdHlCdW95YW5jeUNvbW1vbkNvbnN0YW50cyIsIkN1YmUiLCJNYXRlcmlhbCIsIkRlbnNpdHlCdW95YW5jeUNvbW1vbkNvbG9ycyIsIkRlbnNpdHlCdW95YW5jeVNjcmVlblZpZXciLCJEZW5zaXR5Q29udHJvbE5vZGUiLCJEaXNwbGF5T3B0aW9uc05vZGUiLCJNYXRlcmlhbE1hc3NWb2x1bWVDb250cm9sTm9kZSIsImRlbnNpdHlCdW95YW5jeUNvbW1vbiIsIkRlbnNpdHlCdW95YW5jeUNvbW1vblN0cmluZ3MiLCJTY2VuZSIsIkRlbnNpdHlSZWFkb3V0TGlzdE5vZGUiLCJNQVJHSU4iLCJCdW95YW5jeUFwcGxpY2F0aW9uc1NjcmVlblZpZXciLCJjb25zdHJ1Y3RvciIsIm1vZGVsIiwib3B0aW9ucyIsInRhbmRlbSIsImNhbWVyYUxvb2tBdCIsIkJVT1lBTkNZX0NBTUVSQV9MT09LX0FUIiwic2NlbmVOb2RlIiwic3RhZ2UiLCJ0aHJlZVJlbmRlcmVyIiwibG9jYWxDbGlwcGluZ0VuYWJsZWQiLCJib3R0bGVDb250cm9sTm9kZSIsImJvdHRsZSIsImludGVyaW9yTWF0ZXJpYWxQcm9wZXJ0eSIsImludGVyaW9yTWFzc1Byb3BlcnR5IiwiaW50ZXJpb3JWb2x1bWVQcm9wZXJ0eSIsIkdBU09MSU5FIiwiT0lMIiwiV0FURVIiLCJTQU5EIiwiQ0VNRU5UIiwiQ09QUEVSIiwiTEVBRCIsIk1FUkNVUlkiLCJ2b2x1bWUiLCJzZXQiLCJwb3B1cExheWVyIiwibWluTWFzcyIsIm1heEN1c3RvbU1hc3MiLCJtYXhNYXNzIiwiZGVuc2l0eSIsIm1pblZvbHVtZUxpdGVycyIsIm1heFZvbHVtZUxpdGVycyIsIm1pbkN1c3RvbVZvbHVtZUxpdGVycyIsImNyZWF0ZVRhbmRlbSIsImFpclZvbHVtZUxhYmVsIiwiYWlyVm9sdW1lU3RyaW5nUHJvcGVydHkiLCJmb250IiwiUkVBRE9VVF9GT05UIiwibWF4V2lkdGgiLCJhaXJMaXRlcnNQcm9wZXJ0eSIsImJvdHRsZUJveCIsInNwYWNpbmciLCJhbGlnbiIsInN0cmV0Y2giLCJjaGlsZHJlbiIsIm1hdGVyaWFsSW5zaWRlU3RyaW5nUHJvcGVydHkiLCJUSVRMRV9GT05UIiwidmFsdWVQYXR0ZXJuIiwiVk9MVU1FX1BBVFRFUk5fU1RSSU5HX1BST1BFUlRZIiwidXNlUmljaFRleHQiLCJkZWNpbWFsUGxhY2VzIiwidGV4dE9wdGlvbnMiLCJyaWdodEJvdHRsZUNvbnRlbnQiLCJQQU5FTF9PUFRJT05TIiwiYWxpZ25Cb3VuZHNQcm9wZXJ0eSIsInZpc2libGVCb3VuZHNQcm9wZXJ0eSIsInhBbGlnbiIsInlBbGlnbiIsInhNYXJnaW4iLCJ5TWFyZ2luIiwiYmxvY2tDb250cm9sTm9kZSIsImJsb2NrIiwibWF0ZXJpYWxQcm9wZXJ0eSIsIm1hc3NQcm9wZXJ0eSIsInZvbHVtZVByb3BlcnR5IiwiXyIsInNvcnRCeSIsIlBZUklURSIsIlNURUVMIiwiU0lMVkVSIiwiVEFOVEFMVU0iLCJHT0xEIiwiUExBVElOVU0iLCJTVFlST0ZPQU0iLCJXT09EIiwiSUNFIiwiQlJJQ0siLCJBTFVNSU5VTSIsIm1hdGVyaWFsIiwiY3ViaWNNZXRlcnMiLCJ1cGRhdGVTaXplIiwiYm91bmRzRnJvbVZvbHVtZSIsInJlc2V0U2NlbmVCdXR0b24iLCJjb250ZW50Iiwic2NhbGUiLCJiYXNlQ29sb3IiLCJsaXN0ZW5lciIsInJlc2V0Qm9hdFNjZW5lIiwidmlzaWJsZVByb3BlcnR5Iiwic2NlbmVQcm9wZXJ0eSIsInNjZW5lIiwiQk9BVCIsImFkZENoaWxkIiwicG9zaXRpb25SZXNldFNjZW5lQnV0dG9uIiwicmlnaHRUb3AiLCJtb2RlbFRvVmlld1BvaW50IiwicG9vbEJvdW5kcyIsIm1heFgiLCJtaW5ZIiwibWF4WiIsInBsdXNYWSIsInRyYW5zZm9ybUVtaXR0ZXIiLCJhZGRMaXN0ZW5lciIsImJvYXRWb2x1bWVSYW5nZSIsImJvYXRCb3giLCJib2F0Vm9sdW1lU3RyaW5nUHJvcGVydHkiLCJib2F0IiwiZGlzcGxhY2VtZW50Vm9sdW1lUHJvcGVydHkiLCJmYWN0b3IiLCJudW1iZXJEaXNwbGF5T3B0aW9ucyIsInVzZUZ1bGxIZWlnaHQiLCJnZXROdW1iZXJDb250cm9sT3B0aW9ucyIsInNsaWRlck9wdGlvbnMiLCJ0cmFja1NpemUiLCJ0aHVtYlNpemUiLCJUSFVNQl9TSVpFIiwiY29uc3RyYWluVmFsdWUiLCJ2YWx1ZSIsInJvdW5kVG9JbnRlcnZhbCIsInBoZXRpb0xpbmtlZFByb3BlcnR5IiwibWFqb3JUaWNrTGVuZ3RoIiwibWFqb3JUaWNrcyIsIm1pbiIsImxhYmVsIiwibWF4IiwicmlnaHRCb2F0Q29udGVudCIsImxpbmsiLCJ2aXNpYmxlIiwiQk9UVExFIiwiZGVuc2l0eUNvbnRyb2xQYW5lbCIsImxpcXVpZE1hdGVyaWFsUHJvcGVydHkiLCJTRUFXQVRFUiIsIkhPTkVZIiwiREVOU0lUWV9FIiwiREVOU0lUWV9GIiwibWFyZ2luIiwiZGlzcGxheU9wdGlvbnNOb2RlIiwiZGVuc2l0eUNvbnRhaW5lciIsIndpZHRoIiwiZGVuc2l0eUJveCIsInRpdGxlTm9kZSIsImRlbnNpdHlTdHJpbmdQcm9wZXJ0eSIsImV4cGFuZGVkUHJvcGVydHkiLCJkZW5zaXR5RXhwYW5kZWRQcm9wZXJ0eSIsIkFDQ09SRElPTl9CT1hfT1BUSU9OUyIsImJvdHRsZUJvYXRTZWxlY3Rpb25Ob2RlIiwiY3JlYXRlTm9kZSIsIm9yaWVudGF0aW9uIiwidG91Y2hBcmVhWERpbGF0aW9uIiwidG91Y2hBcmVhWURpbGF0aW9uIiwicmFkaW9CdXR0b25PcHRpb25zIiwicmFkaW9CYWNrZ3JvdW5kQ29sb3JQcm9wZXJ0eSIsImJ1dHRvbkFwcGVhcmFuY2VTdHJhdGVneU9wdGlvbnMiLCJzZWxlY3RlZExpbmVXaWR0aCIsImRlc2VsZWN0ZWRMaW5lV2lkdGgiLCJzZWxlY3RlZFN0cm9rZSIsInJhZGlvQm9yZGVyQ29sb3JQcm9wZXJ0eSIsImNyZWF0ZSIsInBhbmVsV3JhcHBlciIsInNlbGVjdGlvbldyYXBwZXIiLCJib3R0b20iLCJsZWZ0IiwicmlnaHQiLCJzdGVwIiwiZHQiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkJ1b3lhbmN5QXBwbGljYXRpb25zU2NyZWVuVmlldy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOS0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBUaGUgbWFpbiB2aWV3IGZvciB0aGUgQXBwbGljYXRpb25zIHNjcmVlbiBvZiB0aGUgQnVveWFuY3kgc2ltdWxhdGlvbi5cclxuICpcclxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxyXG4gKi9cclxuXHJcbmltcG9ydCBEZXJpdmVkUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9EZXJpdmVkUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgVW5pdENvbnZlcnNpb25Qcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1VuaXRDb252ZXJzaW9uUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgRGltZW5zaW9uMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvRGltZW5zaW9uMi5qcyc7XHJcbmltcG9ydCBSYW5nZSBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvUmFuZ2UuanMnO1xyXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1V0aWxzLmpzJztcclxuaW1wb3J0IFZlY3RvcjMgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1ZlY3RvcjMuanMnO1xyXG5pbXBvcnQgeyBjb21iaW5lT3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgcmVzZXRBcnJvd19wbmcgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2ltYWdlcy9yZXNldEFycm93X3BuZy5qcyc7XHJcbmltcG9ydCBOdW1iZXJDb250cm9sLCB7IE51bWJlckNvbnRyb2xPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL051bWJlckNvbnRyb2wuanMnO1xyXG5pbXBvcnQgTnVtYmVyRGlzcGxheSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvTnVtYmVyRGlzcGxheS5qcyc7XHJcbmltcG9ydCBQaGV0Rm9udCBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvUGhldEZvbnQuanMnO1xyXG5pbXBvcnQgeyBBbGlnbkJveCwgQ29sb3IsIEhCb3gsIEhTZXBhcmF0b3IsIEhTdHJ1dCwgSW1hZ2UsIE1hbnVhbENvbnN0cmFpbnQsIE5vZGUsIFRleHQsIFZCb3ggfSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5L2pzL2ltcG9ydHMuanMnO1xyXG5pbXBvcnQgQWNjb3JkaW9uQm94LCB7IEFjY29yZGlvbkJveE9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvQWNjb3JkaW9uQm94LmpzJztcclxuaW1wb3J0IFJlY3Rhbmd1bGFyUHVzaEJ1dHRvbiBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvYnV0dG9ucy9SZWN0YW5ndWxhclB1c2hCdXR0b24uanMnO1xyXG5pbXBvcnQgUmVjdGFuZ3VsYXJSYWRpb0J1dHRvbkdyb3VwIGZyb20gJy4uLy4uLy4uLy4uL3N1bi9qcy9idXR0b25zL1JlY3Rhbmd1bGFyUmFkaW9CdXR0b25Hcm91cC5qcyc7XHJcbmltcG9ydCBQYW5lbCBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvUGFuZWwuanMnO1xyXG5pbXBvcnQgRGVuc2l0eUJ1b3lhbmN5Q29tbW9uQ29uc3RhbnRzIGZyb20gJy4uLy4uL2NvbW1vbi9EZW5zaXR5QnVveWFuY3lDb21tb25Db25zdGFudHMuanMnO1xyXG5pbXBvcnQgQ3ViZSBmcm9tICcuLi8uLi9jb21tb24vbW9kZWwvQ3ViZS5qcyc7XHJcbmltcG9ydCBNYXRlcmlhbCBmcm9tICcuLi8uLi9jb21tb24vbW9kZWwvTWF0ZXJpYWwuanMnO1xyXG5pbXBvcnQgRGVuc2l0eUJ1b3lhbmN5Q29tbW9uQ29sb3JzIGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L0RlbnNpdHlCdW95YW5jeUNvbW1vbkNvbG9ycy5qcyc7XHJcbmltcG9ydCBEZW5zaXR5QnVveWFuY3lTY3JlZW5WaWV3LCB7IERlbnNpdHlCdW95YW5jeVNjcmVlblZpZXdPcHRpb25zIH0gZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvRGVuc2l0eUJ1b3lhbmN5U2NyZWVuVmlldy5qcyc7XHJcbmltcG9ydCBEZW5zaXR5Q29udHJvbE5vZGUgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvRGVuc2l0eUNvbnRyb2xOb2RlLmpzJztcclxuaW1wb3J0IERpc3BsYXlPcHRpb25zTm9kZSBmcm9tICcuLi8uLi9jb21tb24vdmlldy9EaXNwbGF5T3B0aW9uc05vZGUuanMnO1xyXG5pbXBvcnQgTWF0ZXJpYWxNYXNzVm9sdW1lQ29udHJvbE5vZGUgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvTWF0ZXJpYWxNYXNzVm9sdW1lQ29udHJvbE5vZGUuanMnO1xyXG5pbXBvcnQgZGVuc2l0eUJ1b3lhbmN5Q29tbW9uIGZyb20gJy4uLy4uL2RlbnNpdHlCdW95YW5jeUNvbW1vbi5qcyc7XHJcbmltcG9ydCBEZW5zaXR5QnVveWFuY3lDb21tb25TdHJpbmdzIGZyb20gJy4uLy4uL0RlbnNpdHlCdW95YW5jeUNvbW1vblN0cmluZ3MuanMnO1xyXG5pbXBvcnQgQnVveWFuY3lBcHBsaWNhdGlvbnNNb2RlbCwgeyBTY2VuZSB9IGZyb20gJy4uL21vZGVsL0J1b3lhbmN5QXBwbGljYXRpb25zTW9kZWwuanMnO1xyXG5pbXBvcnQgRGVuc2l0eVJlYWRvdXRMaXN0Tm9kZSBmcm9tICcuL0RlbnNpdHlSZWFkb3V0TGlzdE5vZGUuanMnO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IE1BUkdJTiA9IERlbnNpdHlCdW95YW5jeUNvbW1vbkNvbnN0YW50cy5NQVJHSU47XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCdW95YW5jeUFwcGxpY2F0aW9uc1NjcmVlblZpZXcgZXh0ZW5kcyBEZW5zaXR5QnVveWFuY3lTY3JlZW5WaWV3PEJ1b3lhbmN5QXBwbGljYXRpb25zTW9kZWw+IHtcclxuXHJcbiAgcHJpdmF0ZSBwb3NpdGlvblJlc2V0U2NlbmVCdXR0b246ICgpID0+IHZvaWQ7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggbW9kZWw6IEJ1b3lhbmN5QXBwbGljYXRpb25zTW9kZWwsIG9wdGlvbnM6IERlbnNpdHlCdW95YW5jeVNjcmVlblZpZXdPcHRpb25zICkge1xyXG5cclxuICAgIGNvbnN0IHRhbmRlbSA9IG9wdGlvbnMudGFuZGVtO1xyXG5cclxuICAgIHN1cGVyKCBtb2RlbCwgY29tYmluZU9wdGlvbnM8RGVuc2l0eUJ1b3lhbmN5U2NyZWVuVmlld09wdGlvbnM+KCB7XHJcbiAgICAgIGNhbWVyYUxvb2tBdDogRGVuc2l0eUJ1b3lhbmN5Q29tbW9uQ29uc3RhbnRzLkJVT1lBTkNZX0NBTUVSQV9MT09LX0FUXHJcbiAgICB9LCBvcHRpb25zICkgKTtcclxuXHJcbiAgICAvLyBGb3IgY2xpcHBpbmcgcGxhbmVzIGluIEJvdHRsZVZpZXdcclxuICAgIGlmICggdGhpcy5zY2VuZU5vZGUuc3RhZ2UudGhyZWVSZW5kZXJlciApIHtcclxuICAgICAgdGhpcy5zY2VuZU5vZGUuc3RhZ2UudGhyZWVSZW5kZXJlci5sb2NhbENsaXBwaW5nRW5hYmxlZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYm90dGxlQ29udHJvbE5vZGUgPSBuZXcgTWF0ZXJpYWxNYXNzVm9sdW1lQ29udHJvbE5vZGUoIG1vZGVsLmJvdHRsZS5pbnRlcmlvck1hdGVyaWFsUHJvcGVydHksIG1vZGVsLmJvdHRsZS5pbnRlcmlvck1hc3NQcm9wZXJ0eSwgbW9kZWwuYm90dGxlLmludGVyaW9yVm9sdW1lUHJvcGVydHksIFtcclxuICAgICAgTWF0ZXJpYWwuR0FTT0xJTkUsXHJcbiAgICAgIE1hdGVyaWFsLk9JTCxcclxuICAgICAgTWF0ZXJpYWwuV0FURVIsXHJcbiAgICAgIE1hdGVyaWFsLlNBTkQsXHJcbiAgICAgIE1hdGVyaWFsLkNFTUVOVCxcclxuICAgICAgTWF0ZXJpYWwuQ09QUEVSLFxyXG4gICAgICBNYXRlcmlhbC5MRUFELFxyXG4gICAgICBNYXRlcmlhbC5NRVJDVVJZXHJcbiAgICBdLCB2b2x1bWUgPT4gbW9kZWwuYm90dGxlLmludGVyaW9yVm9sdW1lUHJvcGVydHkuc2V0KCB2b2x1bWUgKSwgdGhpcy5wb3B1cExheWVyLCB7XHJcbiAgICAgIG1pbk1hc3M6IDAsXHJcbiAgICAgIG1heEN1c3RvbU1hc3M6IDEwMCxcclxuICAgICAgbWF4TWFzczogTWF0ZXJpYWwuTUVSQ1VSWS5kZW5zaXR5ICogMC4wMSxcclxuICAgICAgbWluVm9sdW1lTGl0ZXJzOiAwLFxyXG4gICAgICBtYXhWb2x1bWVMaXRlcnM6IDEwLFxyXG4gICAgICBtaW5DdXN0b21Wb2x1bWVMaXRlcnM6IDAuNSxcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnYm90dGxlQ29udHJvbE5vZGUnIClcclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCBhaXJWb2x1bWVMYWJlbCA9IG5ldyBUZXh0KCBEZW5zaXR5QnVveWFuY3lDb21tb25TdHJpbmdzLmFpclZvbHVtZVN0cmluZ1Byb3BlcnR5LCB7XHJcbiAgICAgIGZvbnQ6IERlbnNpdHlCdW95YW5jeUNvbW1vbkNvbnN0YW50cy5SRUFET1VUX0ZPTlQsXHJcbiAgICAgIG1heFdpZHRoOiAxNjBcclxuICAgIH0gKTtcclxuXHJcbiAgICAvLyBEZXJpdmVkUHJvcGVydHkgZG9lc24ndCBuZWVkIGRpc3Bvc2FsLCBzaW5jZSBldmVyeXRoaW5nIGhlcmUgbGl2ZXMgZm9yIHRoZSBsaWZldGltZSBvZiB0aGUgc2ltdWxhdGlvblxyXG4gICAgY29uc3QgYWlyTGl0ZXJzUHJvcGVydHkgPSBuZXcgRGVyaXZlZFByb3BlcnR5KCBbIG1vZGVsLmJvdHRsZS5pbnRlcmlvclZvbHVtZVByb3BlcnR5IF0sIHZvbHVtZSA9PiB7XHJcbiAgICAgIHJldHVybiAoIDAuMDEgLSB2b2x1bWUgKSAqIDEwMDA7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgYm90dGxlQm94ID0gbmV3IFZCb3goIHtcclxuICAgICAgc3BhY2luZzogMTAsXHJcbiAgICAgIGFsaWduOiAnbGVmdCcsXHJcbiAgICAgIHN0cmV0Y2g6IHRydWUsXHJcbiAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgbmV3IFRleHQoIERlbnNpdHlCdW95YW5jeUNvbW1vblN0cmluZ3MubWF0ZXJpYWxJbnNpZGVTdHJpbmdQcm9wZXJ0eSwge1xyXG4gICAgICAgICAgZm9udDogRGVuc2l0eUJ1b3lhbmN5Q29tbW9uQ29uc3RhbnRzLlRJVExFX0ZPTlQsXHJcbiAgICAgICAgICBtYXhXaWR0aDogMTYwXHJcbiAgICAgICAgfSApLFxyXG4gICAgICAgIGJvdHRsZUNvbnRyb2xOb2RlLFxyXG4gICAgICAgIG5ldyBIU2VwYXJhdG9yKCksXHJcbiAgICAgICAgbmV3IEhCb3goIHtcclxuICAgICAgICAgIHNwYWNpbmc6IDUsXHJcbiAgICAgICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgICAgICBhaXJWb2x1bWVMYWJlbCxcclxuICAgICAgICAgICAgbmV3IE51bWJlckRpc3BsYXkoIGFpckxpdGVyc1Byb3BlcnR5LCBuZXcgUmFuZ2UoIDAsIDEwICksIHtcclxuICAgICAgICAgICAgICB2YWx1ZVBhdHRlcm46IERlbnNpdHlCdW95YW5jeUNvbW1vbkNvbnN0YW50cy5WT0xVTUVfUEFUVEVSTl9TVFJJTkdfUFJPUEVSVFksXHJcbiAgICAgICAgICAgICAgdXNlUmljaFRleHQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgZGVjaW1hbFBsYWNlczogMixcclxuICAgICAgICAgICAgICB0ZXh0T3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgZm9udDogbmV3IFBoZXRGb250KCAxMiApLFxyXG4gICAgICAgICAgICAgICAgbWF4V2lkdGg6IDEyMFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSApXHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSApXHJcbiAgICAgIF1cclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCByaWdodEJvdHRsZUNvbnRlbnQgPSBuZXcgQWxpZ25Cb3goIG5ldyBQYW5lbCggYm90dGxlQm94LCBEZW5zaXR5QnVveWFuY3lDb21tb25Db25zdGFudHMuUEFORUxfT1BUSU9OUyApLCB7XHJcbiAgICAgIGFsaWduQm91bmRzUHJvcGVydHk6IHRoaXMudmlzaWJsZUJvdW5kc1Byb3BlcnR5LFxyXG4gICAgICB4QWxpZ246ICdyaWdodCcsXHJcbiAgICAgIHlBbGlnbjogJ2JvdHRvbScsXHJcbiAgICAgIHhNYXJnaW46IDEwLFxyXG4gICAgICB5TWFyZ2luOiA2MFxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IGJsb2NrQ29udHJvbE5vZGUgPSBuZXcgTWF0ZXJpYWxNYXNzVm9sdW1lQ29udHJvbE5vZGUoIG1vZGVsLmJsb2NrLm1hdGVyaWFsUHJvcGVydHksIG1vZGVsLmJsb2NrLm1hc3NQcm9wZXJ0eSwgbW9kZWwuYmxvY2sudm9sdW1lUHJvcGVydHksIF8uc29ydEJ5KCBbXHJcbiAgICAgIE1hdGVyaWFsLlBZUklURSxcclxuICAgICAgTWF0ZXJpYWwuU1RFRUwsXHJcbiAgICAgIE1hdGVyaWFsLlNJTFZFUixcclxuICAgICAgTWF0ZXJpYWwuVEFOVEFMVU0sXHJcbiAgICAgIE1hdGVyaWFsLkdPTEQsXHJcbiAgICAgIE1hdGVyaWFsLlBMQVRJTlVNLFxyXG4gICAgICBNYXRlcmlhbC5TVFlST0ZPQU0sXHJcbiAgICAgIE1hdGVyaWFsLldPT0QsXHJcbiAgICAgIE1hdGVyaWFsLklDRSxcclxuICAgICAgTWF0ZXJpYWwuQlJJQ0ssXHJcbiAgICAgIE1hdGVyaWFsLkFMVU1JTlVNXHJcbiAgICBdLCBtYXRlcmlhbCA9PiBtYXRlcmlhbC5kZW5zaXR5ICksIGN1YmljTWV0ZXJzID0+IG1vZGVsLmJsb2NrLnVwZGF0ZVNpemUoIEN1YmUuYm91bmRzRnJvbVZvbHVtZSggY3ViaWNNZXRlcnMgKSApLCB0aGlzLnBvcHVwTGF5ZXIsIHtcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnYmxvY2tDb250cm9sTm9kZScgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IHJlc2V0U2NlbmVCdXR0b24gPSBuZXcgUmVjdGFuZ3VsYXJQdXNoQnV0dG9uKCB7XHJcbiAgICAgIGNvbnRlbnQ6IG5ldyBOb2RlKCB7XHJcbiAgICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICAgIG5ldyBJbWFnZSggcmVzZXRBcnJvd19wbmcsIHsgc2NhbGU6IDAuMyB9IClcclxuICAgICAgICBdXHJcbiAgICAgIH0gKSxcclxuICAgICAgeE1hcmdpbjogNSxcclxuICAgICAgeU1hcmdpbjogMyxcclxuICAgICAgYmFzZUNvbG9yOiBuZXcgQ29sb3IoIDIyMCwgMjIwLCAyMjAgKSxcclxuICAgICAgbGlzdGVuZXI6ICgpID0+IHtcclxuICAgICAgICBtb2RlbC5yZXNldEJvYXRTY2VuZSgpO1xyXG4gICAgICB9LFxyXG4gICAgICB2aXNpYmxlUHJvcGVydHk6IG5ldyBEZXJpdmVkUHJvcGVydHkoIFsgbW9kZWwuc2NlbmVQcm9wZXJ0eSBdLCBzY2VuZSA9PiBzY2VuZSA9PT0gU2NlbmUuQk9BVCApXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCByZXNldFNjZW5lQnV0dG9uICk7XHJcblxyXG4gICAgdGhpcy5wb3NpdGlvblJlc2V0U2NlbmVCdXR0b24gPSAoKSA9PiB7XHJcbiAgICAgIHJlc2V0U2NlbmVCdXR0b24ucmlnaHRUb3AgPSB0aGlzLm1vZGVsVG9WaWV3UG9pbnQoIG5ldyBWZWN0b3IzKFxyXG4gICAgICAgIHRoaXMubW9kZWwucG9vbEJvdW5kcy5tYXhYLFxyXG4gICAgICAgIHRoaXMubW9kZWwucG9vbEJvdW5kcy5taW5ZLFxyXG4gICAgICAgIHRoaXMubW9kZWwucG9vbEJvdW5kcy5tYXhaXHJcbiAgICAgICkgKS5wbHVzWFkoIDAsIDUgKTtcclxuICAgIH07XHJcbiAgICB0aGlzLnRyYW5zZm9ybUVtaXR0ZXIuYWRkTGlzdGVuZXIoIHRoaXMucG9zaXRpb25SZXNldFNjZW5lQnV0dG9uICk7XHJcbiAgICB0aGlzLnBvc2l0aW9uUmVzZXRTY2VuZUJ1dHRvbigpO1xyXG5cclxuICAgIGNvbnN0IGJvYXRWb2x1bWVSYW5nZSA9IG5ldyBSYW5nZSggNSwgMzAgKTtcclxuICAgIGNvbnN0IGJvYXRCb3ggPSBuZXcgVkJveCgge1xyXG4gICAgICBzcGFjaW5nOiAxMCxcclxuICAgICAgYWxpZ246ICdsZWZ0JyxcclxuICAgICAgY2hpbGRyZW46IFtcclxuICAgICAgICBibG9ja0NvbnRyb2xOb2RlLFxyXG4gICAgICAgIG5ldyBIU2VwYXJhdG9yKCksXHJcbiAgICAgICAgLy8gQ29udmVydCBjdWJpYyBtZXRlcnMgPT4gbGl0ZXJzXHJcbiAgICAgICAgbmV3IE51bWJlckNvbnRyb2woIERlbnNpdHlCdW95YW5jeUNvbW1vblN0cmluZ3MuYm9hdFZvbHVtZVN0cmluZ1Byb3BlcnR5LCBuZXcgVW5pdENvbnZlcnNpb25Qcm9wZXJ0eSggbW9kZWwuYm9hdC5kaXNwbGFjZW1lbnRWb2x1bWVQcm9wZXJ0eSwge1xyXG4gICAgICAgICAgZmFjdG9yOiAxMDAwXHJcbiAgICAgICAgfSApLCBib2F0Vm9sdW1lUmFuZ2UsIGNvbWJpbmVPcHRpb25zPE51bWJlckNvbnRyb2xPcHRpb25zPigge1xyXG4gICAgICAgICAgbnVtYmVyRGlzcGxheU9wdGlvbnM6IHtcclxuICAgICAgICAgICAgdmFsdWVQYXR0ZXJuOiBEZW5zaXR5QnVveWFuY3lDb21tb25Db25zdGFudHMuVk9MVU1FX1BBVFRFUk5fU1RSSU5HX1BST1BFUlRZLFxyXG4gICAgICAgICAgICB1c2VSaWNoVGV4dDogdHJ1ZSxcclxuICAgICAgICAgICAgdGV4dE9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICBmb250OiBEZW5zaXR5QnVveWFuY3lDb21tb25Db25zdGFudHMuUkVBRE9VVF9GT05ULFxyXG4gICAgICAgICAgICAgIG1heFdpZHRoOiAxMjBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdXNlRnVsbEhlaWdodDogdHJ1ZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIE1hdGVyaWFsTWFzc1ZvbHVtZUNvbnRyb2xOb2RlLmdldE51bWJlckNvbnRyb2xPcHRpb25zKCksIHtcclxuICAgICAgICAgIHNsaWRlck9wdGlvbnM6IHtcclxuICAgICAgICAgICAgdHJhY2tTaXplOiBuZXcgRGltZW5zaW9uMiggMTIwLCAwLjUgKSxcclxuICAgICAgICAgICAgdGh1bWJTaXplOiBEZW5zaXR5QnVveWFuY3lDb21tb25Db25zdGFudHMuVEhVTUJfU0laRSxcclxuICAgICAgICAgICAgY29uc3RyYWluVmFsdWU6ICggdmFsdWU6IG51bWJlciApID0+IHtcclxuICAgICAgICAgICAgICByZXR1cm4gYm9hdFZvbHVtZVJhbmdlLmNvbnN0cmFpblZhbHVlKCBVdGlscy5yb3VuZFRvSW50ZXJ2YWwoIHZhbHVlLCAwLjEgKSApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBwaGV0aW9MaW5rZWRQcm9wZXJ0eTogbW9kZWwuYm9hdC5kaXNwbGFjZW1lbnRWb2x1bWVQcm9wZXJ0eSxcclxuICAgICAgICAgICAgbWFqb3JUaWNrTGVuZ3RoOiA1LFxyXG4gICAgICAgICAgICBtYWpvclRpY2tzOiBbIHtcclxuICAgICAgICAgICAgICB2YWx1ZTogYm9hdFZvbHVtZVJhbmdlLm1pbixcclxuICAgICAgICAgICAgICBsYWJlbDogbmV3IFRleHQoIGJvYXRWb2x1bWVSYW5nZS5taW4sIHsgZm9udDogbmV3IFBoZXRGb250KCAxMiApLCBtYXhXaWR0aDogNTAgfSApXHJcbiAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICB2YWx1ZTogYm9hdFZvbHVtZVJhbmdlLm1heCxcclxuICAgICAgICAgICAgICBsYWJlbDogbmV3IFRleHQoIGJvYXRWb2x1bWVSYW5nZS5tYXgsIHsgZm9udDogbmV3IFBoZXRGb250KCAxMiApLCBtYXhXaWR0aDogNTAgfSApXHJcbiAgICAgICAgICAgIH0gXVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gKSApXHJcbiAgICAgIF1cclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCByaWdodEJvYXRDb250ZW50ID0gbmV3IEFsaWduQm94KCBuZXcgUGFuZWwoIGJvYXRCb3gsIERlbnNpdHlCdW95YW5jeUNvbW1vbkNvbnN0YW50cy5QQU5FTF9PUFRJT05TICksIHtcclxuICAgICAgYWxpZ25Cb3VuZHNQcm9wZXJ0eTogdGhpcy52aXNpYmxlQm91bmRzUHJvcGVydHksXHJcbiAgICAgIHhBbGlnbjogJ3JpZ2h0JyxcclxuICAgICAgeUFsaWduOiAnYm90dG9tJyxcclxuICAgICAgeE1hcmdpbjogMTAsXHJcbiAgICAgIHlNYXJnaW46IDYwXHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5hZGRDaGlsZCggcmlnaHRCb3R0bGVDb250ZW50ICk7XHJcbiAgICB0aGlzLmFkZENoaWxkKCByaWdodEJvYXRDb250ZW50ICk7XHJcblxyXG4gICAgLy8gVGhpcyBpbnN0YW5jZSBsaXZlcyBmb3IgdGhlIGxpZmV0aW1lIG9mIHRoZSBzaW11bGF0aW9uLCBzbyB3ZSBkb24ndCBuZWVkIHRvIHJlbW92ZSB0aGlzIGxpc3RlbmVyXHJcbiAgICBtb2RlbC5zY2VuZVByb3BlcnR5LmxpbmsoIHNjZW5lID0+IHtcclxuICAgICAgcmlnaHRCb3R0bGVDb250ZW50LnZpc2libGUgPSBzY2VuZSA9PT0gU2NlbmUuQk9UVExFO1xyXG4gICAgICByaWdodEJvYXRDb250ZW50LnZpc2libGUgPSBzY2VuZSA9PT0gU2NlbmUuQk9BVDtcclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCBkZW5zaXR5Q29udHJvbFBhbmVsID0gbmV3IFBhbmVsKCBuZXcgRGVuc2l0eUNvbnRyb2xOb2RlKCBtb2RlbC5saXF1aWRNYXRlcmlhbFByb3BlcnR5LCBbXHJcbiAgICAgIE1hdGVyaWFsLkdBU09MSU5FLFxyXG4gICAgICBNYXRlcmlhbC5PSUwsXHJcbiAgICAgIE1hdGVyaWFsLldBVEVSLFxyXG4gICAgICBNYXRlcmlhbC5TRUFXQVRFUixcclxuICAgICAgTWF0ZXJpYWwuSE9ORVksXHJcbiAgICAgIE1hdGVyaWFsLk1FUkNVUlksXHJcbiAgICAgIE1hdGVyaWFsLkRFTlNJVFlfRSxcclxuICAgICAgTWF0ZXJpYWwuREVOU0lUWV9GXHJcbiAgICBdLCB0aGlzLnBvcHVwTGF5ZXIsIHRhbmRlbS5jcmVhdGVUYW5kZW0oICdkZW5zaXR5Q29udHJvbE5vZGUnICkgKSwgRGVuc2l0eUJ1b3lhbmN5Q29tbW9uQ29uc3RhbnRzLlBBTkVMX09QVElPTlMgKTtcclxuXHJcbiAgICB0aGlzLmFkZENoaWxkKCBuZXcgQWxpZ25Cb3goIGRlbnNpdHlDb250cm9sUGFuZWwsIHtcclxuICAgICAgYWxpZ25Cb3VuZHNQcm9wZXJ0eTogdGhpcy52aXNpYmxlQm91bmRzUHJvcGVydHksXHJcbiAgICAgIHhBbGlnbjogJ2NlbnRlcicsXHJcbiAgICAgIHlBbGlnbjogJ2JvdHRvbScsXHJcbiAgICAgIG1hcmdpbjogTUFSR0lOXHJcbiAgICB9ICkgKTtcclxuXHJcbiAgICBjb25zdCBkaXNwbGF5T3B0aW9uc05vZGUgPSBuZXcgRGlzcGxheU9wdGlvbnNOb2RlKCBtb2RlbCApO1xyXG5cclxuICAgIGNvbnN0IGRlbnNpdHlDb250YWluZXIgPSBuZXcgVkJveCgge1xyXG4gICAgICBzcGFjaW5nOiAwLFxyXG4gICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgIG5ldyBIU3RydXQoIGRpc3BsYXlPcHRpb25zTm9kZS53aWR0aCAtIDEwICksIC8vIFNhbWUgaW50ZXJuYWwgc2l6ZSBhcyBkaXNwbGF5T3B0aW9uc05vZGVcclxuICAgICAgICBuZXcgRGVuc2l0eVJlYWRvdXRMaXN0Tm9kZSggW1xyXG4gICAgICAgICAgbW9kZWwuYm90dGxlLmludGVyaW9yTWF0ZXJpYWxQcm9wZXJ0eSxcclxuICAgICAgICAgIG1vZGVsLmJvdHRsZS5tYXRlcmlhbFByb3BlcnR5XHJcbiAgICAgICAgXSApXHJcbiAgICAgIF1cclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCBkZW5zaXR5Qm94ID0gbmV3IEFjY29yZGlvbkJveCggZGVuc2l0eUNvbnRhaW5lciwgY29tYmluZU9wdGlvbnM8QWNjb3JkaW9uQm94T3B0aW9ucz4oIHtcclxuICAgICAgdGl0bGVOb2RlOiBuZXcgVGV4dCggRGVuc2l0eUJ1b3lhbmN5Q29tbW9uU3RyaW5ncy5kZW5zaXR5U3RyaW5nUHJvcGVydHksIHtcclxuICAgICAgICBtYXhXaWR0aDogMTYwLFxyXG4gICAgICAgIGZvbnQ6IERlbnNpdHlCdW95YW5jeUNvbW1vbkNvbnN0YW50cy5USVRMRV9GT05UXHJcbiAgICAgIH0gKSxcclxuICAgICAgZXhwYW5kZWRQcm9wZXJ0eTogbW9kZWwuZGVuc2l0eUV4cGFuZGVkUHJvcGVydHlcclxuICAgIH0sIERlbnNpdHlCdW95YW5jeUNvbW1vbkNvbnN0YW50cy5BQ0NPUkRJT05fQk9YX09QVElPTlMgKSApO1xyXG5cclxuICAgIHRoaXMuYWRkQ2hpbGQoIG5ldyBBbGlnbkJveCggbmV3IFZCb3goIHtcclxuICAgICAgc3BhY2luZzogMTAsXHJcbiAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgZGVuc2l0eUJveCxcclxuICAgICAgICBuZXcgUGFuZWwoIGRpc3BsYXlPcHRpb25zTm9kZSwgRGVuc2l0eUJ1b3lhbmN5Q29tbW9uQ29uc3RhbnRzLlBBTkVMX09QVElPTlMgKVxyXG4gICAgICBdXHJcbiAgICB9ICksIHtcclxuICAgICAgYWxpZ25Cb3VuZHNQcm9wZXJ0eTogdGhpcy52aXNpYmxlQm91bmRzUHJvcGVydHksXHJcbiAgICAgIHhBbGlnbjogJ2xlZnQnLFxyXG4gICAgICB5QWxpZ246ICdib3R0b20nLFxyXG4gICAgICBtYXJnaW46IE1BUkdJTlxyXG4gICAgfSApICk7XHJcblxyXG4gICAgY29uc3QgYm90dGxlQm9hdFNlbGVjdGlvbk5vZGUgPSBuZXcgUmVjdGFuZ3VsYXJSYWRpb0J1dHRvbkdyb3VwKCBtb2RlbC5zY2VuZVByb3BlcnR5LCBbXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZTogU2NlbmUuQk9UVExFLFxyXG4gICAgICAgIGNyZWF0ZU5vZGU6ICgpID0+IG5ldyBUZXh0KCAnKGJvdHRsZSknIClcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIHZhbHVlOiBTY2VuZS5CT0FULFxyXG4gICAgICAgIGNyZWF0ZU5vZGU6ICgpID0+IG5ldyBUZXh0KCAnKGJvYXQpJyApXHJcbiAgICAgIH1cclxuICAgIF0sIHtcclxuICAgICAgb3JpZW50YXRpb246ICdob3Jpem9udGFsJyxcclxuICAgICAgdG91Y2hBcmVhWERpbGF0aW9uOiA2LFxyXG4gICAgICB0b3VjaEFyZWFZRGlsYXRpb246IDYsXHJcbiAgICAgIHJhZGlvQnV0dG9uT3B0aW9uczoge1xyXG4gICAgICAgIGJhc2VDb2xvcjogRGVuc2l0eUJ1b3lhbmN5Q29tbW9uQ29sb3JzLnJhZGlvQmFja2dyb3VuZENvbG9yUHJvcGVydHksXHJcbiAgICAgICAgeE1hcmdpbjogMTAsXHJcbiAgICAgICAgeU1hcmdpbjogMTAsXHJcbiAgICAgICAgYnV0dG9uQXBwZWFyYW5jZVN0cmF0ZWd5T3B0aW9uczoge1xyXG4gICAgICAgICAgc2VsZWN0ZWRMaW5lV2lkdGg6IDIsXHJcbiAgICAgICAgICBkZXNlbGVjdGVkTGluZVdpZHRoOiAxLjUsXHJcbiAgICAgICAgICBzZWxlY3RlZFN0cm9rZTogRGVuc2l0eUJ1b3lhbmN5Q29tbW9uQ29sb3JzLnJhZGlvQm9yZGVyQ29sb3JQcm9wZXJ0eVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSApO1xyXG4gICAgdGhpcy5hZGRDaGlsZCggYm90dGxlQm9hdFNlbGVjdGlvbk5vZGUgKTtcclxuXHJcbiAgICBNYW51YWxDb25zdHJhaW50LmNyZWF0ZSggdGhpcywgWyBkZW5zaXR5Q29udHJvbFBhbmVsLCBib3R0bGVCb2F0U2VsZWN0aW9uTm9kZSBdLCAoIHBhbmVsV3JhcHBlciwgc2VsZWN0aW9uV3JhcHBlciApID0+IHtcclxuICAgICAgc2VsZWN0aW9uV3JhcHBlci5ib3R0b20gPSBwYW5lbFdyYXBwZXIuYm90dG9tO1xyXG4gICAgICBzZWxlY3Rpb25XcmFwcGVyLmxlZnQgPSBwYW5lbFdyYXBwZXIucmlnaHQgKyBNQVJHSU47XHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5hZGRDaGlsZCggdGhpcy5wb3B1cExheWVyICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb3ZlcnJpZGUgc3RlcCggZHQ6IG51bWJlciApOiB2b2lkIHtcclxuICAgIHN1cGVyLnN0ZXAoIGR0ICk7XHJcblxyXG4gICAgdGhpcy5wb3NpdGlvblJlc2V0U2NlbmVCdXR0b24oKTtcclxuICB9XHJcbn1cclxuXHJcbmRlbnNpdHlCdW95YW5jeUNvbW1vbi5yZWdpc3RlciggJ0J1b3lhbmN5QXBwbGljYXRpb25zU2NyZWVuVmlldycsIEJ1b3lhbmN5QXBwbGljYXRpb25zU2NyZWVuVmlldyApO1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsZUFB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