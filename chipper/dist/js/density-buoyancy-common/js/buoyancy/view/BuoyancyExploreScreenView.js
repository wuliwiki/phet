// Copyright 2019-2023, University of Colorado Boulder

/**
 * The main view for the Explore screen of the Buoyancy simulation.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import { combineOptions } from '../../../../phet-core/js/optionize.js';
import PatternStringProperty from '../../../../axon/js/PatternStringProperty.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { AlignBox, GridBox, HBox, HStrut, Node, RichText, Text, VBox } from '../../../../scenery/js/imports.js';
import AccordionBox from '../../../../sun/js/AccordionBox.js';
import Panel from '../../../../sun/js/Panel.js';
import DensityBuoyancyCommonConstants from '../../common/DensityBuoyancyCommonConstants.js';
import Material from '../../common/model/Material.js';
import DensityBuoyancyCommonColors from '../../common/view/DensityBuoyancyCommonColors.js';
import DensityControlNode from '../../common/view/DensityControlNode.js';
import DisplayOptionsNode from '../../common/view/DisplayOptionsNode.js';
import GravityControlNode from '../../common/view/GravityControlNode.js';
import PrimarySecondaryControlsNode from '../../common/view/PrimarySecondaryControlsNode.js';
import SecondaryMassScreenView from '../../common/view/SecondaryMassScreenView.js';
import densityBuoyancyCommon from '../../densityBuoyancyCommon.js';
import DensityBuoyancyCommonStrings from '../../DensityBuoyancyCommonStrings.js';
// constants
const MARGIN = DensityBuoyancyCommonConstants.MARGIN;
export default class BuoyancyExploreScreenView extends SecondaryMassScreenView {
  constructor(model, options) {
    const tandem = options.tandem;
    super(model, combineOptions({
      cameraLookAt: DensityBuoyancyCommonConstants.BUOYANCY_CAMERA_LOOK_AT
    }, options));
    const displayOptionsNode = new DisplayOptionsNode(model);
    const getMaterialReadoutStringProperty = materialProperty => new PatternStringProperty(DensityBuoyancyCommonConstants.KILOGRAMS_PER_VOLUME_PATTERN_STRING_PROPERTY, {
      value: materialProperty
    }, {
      maps: {
        value: material => material.density / 1000
      },
      decimalPlaces: 2
    });

    // This instance lives for the lifetime of the simulation, so we don't need to remove this listener
    const densityAText = new RichText(getMaterialReadoutStringProperty(model.primaryMass.materialProperty), {
      maxWidth: 120,
      font: DensityBuoyancyCommonConstants.ITEM_FONT,
      fill: DensityBuoyancyCommonColors.labelAProperty,
      layoutOptions: {
        column: 1,
        row: 0
      }
    });
    const densityBText = new RichText(getMaterialReadoutStringProperty(model.secondaryMass.materialProperty), {
      maxWidth: 120,
      font: DensityBuoyancyCommonConstants.ITEM_FONT,
      fill: DensityBuoyancyCommonColors.labelBProperty,
      layoutOptions: {
        column: 1,
        row: 1
      }
    });
    const labelAText = new Text(DensityBuoyancyCommonStrings.blockAStringProperty, {
      font: new PhetFont(14),
      maxWidth: 200,
      layoutOptions: {
        column: 0,
        row: 0
      }
    });
    const labelBText = new Text(DensityBuoyancyCommonStrings.blockBStringProperty, {
      font: new PhetFont(14),
      maxWidth: 200,
      layoutOptions: {
        column: 0,
        row: 1
      }
    });
    const densityReadoutBox = new GridBox({
      children: [densityAText, densityBText, labelAText, labelBText],
      xMargin: 5,
      yMargin: 3,
      xAlign: 'left',
      yAlign: 'center'
    });
    const densityContainer = new Node({
      children: [densityReadoutBox, new HStrut(displayOptionsNode.width - 10) // Same internal size as displayOptionsNode
      ]
    });

    const densityBox = new AccordionBox(densityContainer, combineOptions({
      titleNode: new Text(DensityBuoyancyCommonStrings.densityStringProperty, {
        font: DensityBuoyancyCommonConstants.TITLE_FONT,
        maxWidth: 160
      }),
      expandedProperty: model.densityExpandedProperty
    }, DensityBuoyancyCommonConstants.ACCORDION_BOX_OPTIONS));
    this.addChild(new AlignBox(new VBox({
      spacing: 10,
      children: [
      // Keep the density box at the top of its possible location, even if it reduces in size due to the second mass
      // not being visible.
      new AlignBox(densityBox, {
        alignBounds: densityBox.bounds.copy(),
        localBounds: densityBox.bounds.copy(),
        yAlign: 'top'
      }), new Panel(displayOptionsNode, DensityBuoyancyCommonConstants.PANEL_OPTIONS)]
    }), {
      alignBoundsProperty: this.visibleBoundsProperty,
      xAlign: 'left',
      yAlign: 'bottom',
      margin: MARGIN
    }));

    // Adjust the visibility after, since we want to size the box's location for its "full" bounds
    // This instance lives for the lifetime of the simulation, so we don't need to remove this listener
    model.secondaryMass.visibleProperty.link(visible => {
      labelBText.visible = visible;
      densityBText.visible = visible;
    });
    const bottomNode = new HBox({
      spacing: 2 * MARGIN,
      children: [new Panel(new DensityControlNode(model.liquidMaterialProperty, [Material.GASOLINE, Material.OIL, Material.WATER, Material.SEAWATER, Material.HONEY, Material.MERCURY, Material.DENSITY_A, Material.DENSITY_B], this.popupLayer, tandem.createTandem('densityControlNode')), DensityBuoyancyCommonConstants.PANEL_OPTIONS), new Panel(new GravityControlNode(model.gravityProperty, this.popupLayer, tandem.createTandem('gravityControlNode')), DensityBuoyancyCommonConstants.PANEL_OPTIONS)]
    });
    this.addChild(new AlignBox(bottomNode, {
      alignBoundsProperty: this.visibleBoundsProperty,
      xAlign: 'center',
      yAlign: 'bottom',
      margin: MARGIN
    }));
    this.rightBox = new PrimarySecondaryControlsNode(model.primaryMass, model.secondaryMass, this.popupLayer, {
      tandem: tandem,
      minCustomMass: 0.1,
      maxCustomMass: 27
    });
    this.addChild(new AlignBox(this.rightBox, {
      alignBoundsProperty: this.visibleBoundsProperty,
      xAlign: 'right',
      yAlign: 'top',
      margin: MARGIN
    }));

    // DerivedProperty doesn't need disposal, since everything here lives for the lifetime of the simulation
    this.rightBarrierViewPointProperty.value = new DerivedProperty([this.rightBox.boundsProperty, this.visibleBoundsProperty], (boxBounds, visibleBounds) => {
      // We might not have a box, see https://github.com/phetsims/density/issues/110
      return new Vector2(isFinite(boxBounds.left) ? boxBounds.left : visibleBounds.right, visibleBounds.centerY);
    });
    this.addSecondMassControl(model.modeProperty);
    this.addChild(this.popupLayer);
  }
}
densityBuoyancyCommon.register('BuoyancyExploreScreenView', BuoyancyExploreScreenView);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJWZWN0b3IyIiwiY29tYmluZU9wdGlvbnMiLCJQYXR0ZXJuU3RyaW5nUHJvcGVydHkiLCJQaGV0Rm9udCIsIkFsaWduQm94IiwiR3JpZEJveCIsIkhCb3giLCJIU3RydXQiLCJOb2RlIiwiUmljaFRleHQiLCJUZXh0IiwiVkJveCIsIkFjY29yZGlvbkJveCIsIlBhbmVsIiwiRGVuc2l0eUJ1b3lhbmN5Q29tbW9uQ29uc3RhbnRzIiwiTWF0ZXJpYWwiLCJEZW5zaXR5QnVveWFuY3lDb21tb25Db2xvcnMiLCJEZW5zaXR5Q29udHJvbE5vZGUiLCJEaXNwbGF5T3B0aW9uc05vZGUiLCJHcmF2aXR5Q29udHJvbE5vZGUiLCJQcmltYXJ5U2Vjb25kYXJ5Q29udHJvbHNOb2RlIiwiU2Vjb25kYXJ5TWFzc1NjcmVlblZpZXciLCJkZW5zaXR5QnVveWFuY3lDb21tb24iLCJEZW5zaXR5QnVveWFuY3lDb21tb25TdHJpbmdzIiwiTUFSR0lOIiwiQnVveWFuY3lFeHBsb3JlU2NyZWVuVmlldyIsImNvbnN0cnVjdG9yIiwibW9kZWwiLCJvcHRpb25zIiwidGFuZGVtIiwiY2FtZXJhTG9va0F0IiwiQlVPWUFOQ1lfQ0FNRVJBX0xPT0tfQVQiLCJkaXNwbGF5T3B0aW9uc05vZGUiLCJnZXRNYXRlcmlhbFJlYWRvdXRTdHJpbmdQcm9wZXJ0eSIsIm1hdGVyaWFsUHJvcGVydHkiLCJLSUxPR1JBTVNfUEVSX1ZPTFVNRV9QQVRURVJOX1NUUklOR19QUk9QRVJUWSIsInZhbHVlIiwibWFwcyIsIm1hdGVyaWFsIiwiZGVuc2l0eSIsImRlY2ltYWxQbGFjZXMiLCJkZW5zaXR5QVRleHQiLCJwcmltYXJ5TWFzcyIsIm1heFdpZHRoIiwiZm9udCIsIklURU1fRk9OVCIsImZpbGwiLCJsYWJlbEFQcm9wZXJ0eSIsImxheW91dE9wdGlvbnMiLCJjb2x1bW4iLCJyb3ciLCJkZW5zaXR5QlRleHQiLCJzZWNvbmRhcnlNYXNzIiwibGFiZWxCUHJvcGVydHkiLCJsYWJlbEFUZXh0IiwiYmxvY2tBU3RyaW5nUHJvcGVydHkiLCJsYWJlbEJUZXh0IiwiYmxvY2tCU3RyaW5nUHJvcGVydHkiLCJkZW5zaXR5UmVhZG91dEJveCIsImNoaWxkcmVuIiwieE1hcmdpbiIsInlNYXJnaW4iLCJ4QWxpZ24iLCJ5QWxpZ24iLCJkZW5zaXR5Q29udGFpbmVyIiwid2lkdGgiLCJkZW5zaXR5Qm94IiwidGl0bGVOb2RlIiwiZGVuc2l0eVN0cmluZ1Byb3BlcnR5IiwiVElUTEVfRk9OVCIsImV4cGFuZGVkUHJvcGVydHkiLCJkZW5zaXR5RXhwYW5kZWRQcm9wZXJ0eSIsIkFDQ09SRElPTl9CT1hfT1BUSU9OUyIsImFkZENoaWxkIiwic3BhY2luZyIsImFsaWduQm91bmRzIiwiYm91bmRzIiwiY29weSIsImxvY2FsQm91bmRzIiwiUEFORUxfT1BUSU9OUyIsImFsaWduQm91bmRzUHJvcGVydHkiLCJ2aXNpYmxlQm91bmRzUHJvcGVydHkiLCJtYXJnaW4iLCJ2aXNpYmxlUHJvcGVydHkiLCJsaW5rIiwidmlzaWJsZSIsImJvdHRvbU5vZGUiLCJsaXF1aWRNYXRlcmlhbFByb3BlcnR5IiwiR0FTT0xJTkUiLCJPSUwiLCJXQVRFUiIsIlNFQVdBVEVSIiwiSE9ORVkiLCJNRVJDVVJZIiwiREVOU0lUWV9BIiwiREVOU0lUWV9CIiwicG9wdXBMYXllciIsImNyZWF0ZVRhbmRlbSIsImdyYXZpdHlQcm9wZXJ0eSIsInJpZ2h0Qm94IiwibWluQ3VzdG9tTWFzcyIsIm1heEN1c3RvbU1hc3MiLCJyaWdodEJhcnJpZXJWaWV3UG9pbnRQcm9wZXJ0eSIsImJvdW5kc1Byb3BlcnR5IiwiYm94Qm91bmRzIiwidmlzaWJsZUJvdW5kcyIsImlzRmluaXRlIiwibGVmdCIsInJpZ2h0IiwiY2VudGVyWSIsImFkZFNlY29uZE1hc3NDb250cm9sIiwibW9kZVByb3BlcnR5IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJCdW95YW5jeUV4cGxvcmVTY3JlZW5WaWV3LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE5LTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFRoZSBtYWluIHZpZXcgZm9yIHRoZSBFeHBsb3JlIHNjcmVlbiBvZiB0aGUgQnVveWFuY3kgc2ltdWxhdGlvbi5cclxuICpcclxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxyXG4gKi9cclxuXHJcbmltcG9ydCBEZXJpdmVkUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9EZXJpdmVkUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgVFJlYWRPbmx5UHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9UUmVhZE9ubHlQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBWZWN0b3IyIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9WZWN0b3IyLmpzJztcclxuaW1wb3J0IHsgY29tYmluZU9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuaW1wb3J0IFBhdHRlcm5TdHJpbmdQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1BhdHRlcm5TdHJpbmdQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBQaGV0Rm9udCBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvUGhldEZvbnQuanMnO1xyXG5pbXBvcnQgeyBBbGlnbkJveCwgR3JpZEJveCwgSEJveCwgSFN0cnV0LCBOb2RlLCBSaWNoVGV4dCwgVGV4dCwgVkJveCB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBBY2NvcmRpb25Cb3gsIHsgQWNjb3JkaW9uQm94T3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL3N1bi9qcy9BY2NvcmRpb25Cb3guanMnO1xyXG5pbXBvcnQgUGFuZWwgZnJvbSAnLi4vLi4vLi4vLi4vc3VuL2pzL1BhbmVsLmpzJztcclxuaW1wb3J0IERlbnNpdHlCdW95YW5jeUNvbW1vbkNvbnN0YW50cyBmcm9tICcuLi8uLi9jb21tb24vRGVuc2l0eUJ1b3lhbmN5Q29tbW9uQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IE1hdGVyaWFsIGZyb20gJy4uLy4uL2NvbW1vbi9tb2RlbC9NYXRlcmlhbC5qcyc7XHJcbmltcG9ydCBEZW5zaXR5QnVveWFuY3lDb21tb25Db2xvcnMgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvRGVuc2l0eUJ1b3lhbmN5Q29tbW9uQ29sb3JzLmpzJztcclxuaW1wb3J0IHsgRGVuc2l0eUJ1b3lhbmN5U2NyZWVuVmlld09wdGlvbnMgfSBmcm9tICcuLi8uLi9jb21tb24vdmlldy9EZW5zaXR5QnVveWFuY3lTY3JlZW5WaWV3LmpzJztcclxuaW1wb3J0IERlbnNpdHlDb250cm9sTm9kZSBmcm9tICcuLi8uLi9jb21tb24vdmlldy9EZW5zaXR5Q29udHJvbE5vZGUuanMnO1xyXG5pbXBvcnQgRGlzcGxheU9wdGlvbnNOb2RlIGZyb20gJy4uLy4uL2NvbW1vbi92aWV3L0Rpc3BsYXlPcHRpb25zTm9kZS5qcyc7XHJcbmltcG9ydCBHcmF2aXR5Q29udHJvbE5vZGUgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvR3Jhdml0eUNvbnRyb2xOb2RlLmpzJztcclxuaW1wb3J0IFByaW1hcnlTZWNvbmRhcnlDb250cm9sc05vZGUgZnJvbSAnLi4vLi4vY29tbW9uL3ZpZXcvUHJpbWFyeVNlY29uZGFyeUNvbnRyb2xzTm9kZS5qcyc7XHJcbmltcG9ydCBTZWNvbmRhcnlNYXNzU2NyZWVuVmlldyBmcm9tICcuLi8uLi9jb21tb24vdmlldy9TZWNvbmRhcnlNYXNzU2NyZWVuVmlldy5qcyc7XHJcbmltcG9ydCBkZW5zaXR5QnVveWFuY3lDb21tb24gZnJvbSAnLi4vLi4vZGVuc2l0eUJ1b3lhbmN5Q29tbW9uLmpzJztcclxuaW1wb3J0IERlbnNpdHlCdW95YW5jeUNvbW1vblN0cmluZ3MgZnJvbSAnLi4vLi4vRGVuc2l0eUJ1b3lhbmN5Q29tbW9uU3RyaW5ncy5qcyc7XHJcbmltcG9ydCBCdW95YW5jeUV4cGxvcmVNb2RlbCBmcm9tICcuLi9tb2RlbC9CdW95YW5jeUV4cGxvcmVNb2RlbC5qcyc7XHJcblxyXG4vLyBjb25zdGFudHNcclxuY29uc3QgTUFSR0lOID0gRGVuc2l0eUJ1b3lhbmN5Q29tbW9uQ29uc3RhbnRzLk1BUkdJTjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJ1b3lhbmN5RXhwbG9yZVNjcmVlblZpZXcgZXh0ZW5kcyBTZWNvbmRhcnlNYXNzU2NyZWVuVmlldzxCdW95YW5jeUV4cGxvcmVNb2RlbD4ge1xyXG5cclxuICBwcm90ZWN0ZWQgcmlnaHRCb3g6IE5vZGU7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggbW9kZWw6IEJ1b3lhbmN5RXhwbG9yZU1vZGVsLCBvcHRpb25zOiBEZW5zaXR5QnVveWFuY3lTY3JlZW5WaWV3T3B0aW9ucyApIHtcclxuXHJcbiAgICBjb25zdCB0YW5kZW0gPSBvcHRpb25zLnRhbmRlbTtcclxuXHJcbiAgICBzdXBlciggbW9kZWwsIGNvbWJpbmVPcHRpb25zPERlbnNpdHlCdW95YW5jeVNjcmVlblZpZXdPcHRpb25zPigge1xyXG4gICAgICBjYW1lcmFMb29rQXQ6IERlbnNpdHlCdW95YW5jeUNvbW1vbkNvbnN0YW50cy5CVU9ZQU5DWV9DQU1FUkFfTE9PS19BVFxyXG4gICAgfSwgb3B0aW9ucyApICk7XHJcblxyXG4gICAgY29uc3QgZGlzcGxheU9wdGlvbnNOb2RlID0gbmV3IERpc3BsYXlPcHRpb25zTm9kZSggbW9kZWwgKTtcclxuXHJcbiAgICBjb25zdCBnZXRNYXRlcmlhbFJlYWRvdXRTdHJpbmdQcm9wZXJ0eSA9ICggbWF0ZXJpYWxQcm9wZXJ0eTogVFJlYWRPbmx5UHJvcGVydHk8TWF0ZXJpYWw+ICkgPT4gbmV3IFBhdHRlcm5TdHJpbmdQcm9wZXJ0eSggRGVuc2l0eUJ1b3lhbmN5Q29tbW9uQ29uc3RhbnRzLktJTE9HUkFNU19QRVJfVk9MVU1FX1BBVFRFUk5fU1RSSU5HX1BST1BFUlRZLCB7XHJcbiAgICAgIHZhbHVlOiBtYXRlcmlhbFByb3BlcnR5XHJcbiAgICB9LCB7XHJcbiAgICAgIG1hcHM6IHtcclxuICAgICAgICB2YWx1ZTogbWF0ZXJpYWwgPT4gbWF0ZXJpYWwuZGVuc2l0eSAvIDEwMDBcclxuICAgICAgfSxcclxuICAgICAgZGVjaW1hbFBsYWNlczogMlxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIFRoaXMgaW5zdGFuY2UgbGl2ZXMgZm9yIHRoZSBsaWZldGltZSBvZiB0aGUgc2ltdWxhdGlvbiwgc28gd2UgZG9uJ3QgbmVlZCB0byByZW1vdmUgdGhpcyBsaXN0ZW5lclxyXG4gICAgY29uc3QgZGVuc2l0eUFUZXh0ID0gbmV3IFJpY2hUZXh0KCBnZXRNYXRlcmlhbFJlYWRvdXRTdHJpbmdQcm9wZXJ0eSggbW9kZWwucHJpbWFyeU1hc3MubWF0ZXJpYWxQcm9wZXJ0eSApLCB7XHJcbiAgICAgIG1heFdpZHRoOiAxMjAsXHJcbiAgICAgIGZvbnQ6IERlbnNpdHlCdW95YW5jeUNvbW1vbkNvbnN0YW50cy5JVEVNX0ZPTlQsXHJcbiAgICAgIGZpbGw6IERlbnNpdHlCdW95YW5jeUNvbW1vbkNvbG9ycy5sYWJlbEFQcm9wZXJ0eSxcclxuICAgICAgbGF5b3V0T3B0aW9uczogeyBjb2x1bW46IDEsIHJvdzogMCB9XHJcbiAgICB9ICk7XHJcbiAgICBjb25zdCBkZW5zaXR5QlRleHQgPSBuZXcgUmljaFRleHQoIGdldE1hdGVyaWFsUmVhZG91dFN0cmluZ1Byb3BlcnR5KCBtb2RlbC5zZWNvbmRhcnlNYXNzLm1hdGVyaWFsUHJvcGVydHkgKSwge1xyXG4gICAgICBtYXhXaWR0aDogMTIwLFxyXG4gICAgICBmb250OiBEZW5zaXR5QnVveWFuY3lDb21tb25Db25zdGFudHMuSVRFTV9GT05ULFxyXG4gICAgICBmaWxsOiBEZW5zaXR5QnVveWFuY3lDb21tb25Db2xvcnMubGFiZWxCUHJvcGVydHksXHJcbiAgICAgIGxheW91dE9wdGlvbnM6IHsgY29sdW1uOiAxLCByb3c6IDEgfVxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IGxhYmVsQVRleHQgPSBuZXcgVGV4dCggRGVuc2l0eUJ1b3lhbmN5Q29tbW9uU3RyaW5ncy5ibG9ja0FTdHJpbmdQcm9wZXJ0eSwge1xyXG4gICAgICBmb250OiBuZXcgUGhldEZvbnQoIDE0ICksXHJcbiAgICAgIG1heFdpZHRoOiAyMDAsXHJcbiAgICAgIGxheW91dE9wdGlvbnM6IHsgY29sdW1uOiAwLCByb3c6IDAgfVxyXG4gICAgfSApO1xyXG4gICAgY29uc3QgbGFiZWxCVGV4dCA9IG5ldyBUZXh0KCBEZW5zaXR5QnVveWFuY3lDb21tb25TdHJpbmdzLmJsb2NrQlN0cmluZ1Byb3BlcnR5LCB7XHJcbiAgICAgIGZvbnQ6IG5ldyBQaGV0Rm9udCggMTQgKSxcclxuICAgICAgbWF4V2lkdGg6IDIwMCxcclxuICAgICAgbGF5b3V0T3B0aW9uczogeyBjb2x1bW46IDAsIHJvdzogMSB9XHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgZGVuc2l0eVJlYWRvdXRCb3ggPSBuZXcgR3JpZEJveCgge1xyXG4gICAgICBjaGlsZHJlbjogWyBkZW5zaXR5QVRleHQsIGRlbnNpdHlCVGV4dCwgbGFiZWxBVGV4dCwgbGFiZWxCVGV4dCBdLFxyXG4gICAgICB4TWFyZ2luOiA1LFxyXG4gICAgICB5TWFyZ2luOiAzLFxyXG4gICAgICB4QWxpZ246ICdsZWZ0JyxcclxuICAgICAgeUFsaWduOiAnY2VudGVyJ1xyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IGRlbnNpdHlDb250YWluZXIgPSBuZXcgTm9kZSgge1xyXG4gICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgIGRlbnNpdHlSZWFkb3V0Qm94LFxyXG4gICAgICAgIG5ldyBIU3RydXQoIGRpc3BsYXlPcHRpb25zTm9kZS53aWR0aCAtIDEwICkgLy8gU2FtZSBpbnRlcm5hbCBzaXplIGFzIGRpc3BsYXlPcHRpb25zTm9kZVxyXG4gICAgICBdXHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgZGVuc2l0eUJveCA9IG5ldyBBY2NvcmRpb25Cb3goIGRlbnNpdHlDb250YWluZXIsIGNvbWJpbmVPcHRpb25zPEFjY29yZGlvbkJveE9wdGlvbnM+KCB7XHJcbiAgICAgIHRpdGxlTm9kZTogbmV3IFRleHQoIERlbnNpdHlCdW95YW5jeUNvbW1vblN0cmluZ3MuZGVuc2l0eVN0cmluZ1Byb3BlcnR5LCB7XHJcbiAgICAgICAgZm9udDogRGVuc2l0eUJ1b3lhbmN5Q29tbW9uQ29uc3RhbnRzLlRJVExFX0ZPTlQsXHJcbiAgICAgICAgbWF4V2lkdGg6IDE2MFxyXG4gICAgICB9ICksXHJcbiAgICAgIGV4cGFuZGVkUHJvcGVydHk6IG1vZGVsLmRlbnNpdHlFeHBhbmRlZFByb3BlcnR5XHJcbiAgICB9LCBEZW5zaXR5QnVveWFuY3lDb21tb25Db25zdGFudHMuQUNDT1JESU9OX0JPWF9PUFRJT05TICkgKTtcclxuXHJcbiAgICB0aGlzLmFkZENoaWxkKCBuZXcgQWxpZ25Cb3goIG5ldyBWQm94KCB7XHJcbiAgICAgIHNwYWNpbmc6IDEwLFxyXG4gICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgIC8vIEtlZXAgdGhlIGRlbnNpdHkgYm94IGF0IHRoZSB0b3Agb2YgaXRzIHBvc3NpYmxlIGxvY2F0aW9uLCBldmVuIGlmIGl0IHJlZHVjZXMgaW4gc2l6ZSBkdWUgdG8gdGhlIHNlY29uZCBtYXNzXHJcbiAgICAgICAgLy8gbm90IGJlaW5nIHZpc2libGUuXHJcbiAgICAgICAgbmV3IEFsaWduQm94KCBkZW5zaXR5Qm94LCB7XHJcbiAgICAgICAgICBhbGlnbkJvdW5kczogZGVuc2l0eUJveC5ib3VuZHMuY29weSgpLFxyXG4gICAgICAgICAgbG9jYWxCb3VuZHM6IGRlbnNpdHlCb3guYm91bmRzLmNvcHkoKSxcclxuICAgICAgICAgIHlBbGlnbjogJ3RvcCdcclxuICAgICAgICB9ICksXHJcbiAgICAgICAgbmV3IFBhbmVsKCBkaXNwbGF5T3B0aW9uc05vZGUsIERlbnNpdHlCdW95YW5jeUNvbW1vbkNvbnN0YW50cy5QQU5FTF9PUFRJT05TIClcclxuICAgICAgXVxyXG4gICAgfSApLCB7XHJcbiAgICAgIGFsaWduQm91bmRzUHJvcGVydHk6IHRoaXMudmlzaWJsZUJvdW5kc1Byb3BlcnR5LFxyXG4gICAgICB4QWxpZ246ICdsZWZ0JyxcclxuICAgICAgeUFsaWduOiAnYm90dG9tJyxcclxuICAgICAgbWFyZ2luOiBNQVJHSU5cclxuICAgIH0gKSApO1xyXG5cclxuICAgIC8vIEFkanVzdCB0aGUgdmlzaWJpbGl0eSBhZnRlciwgc2luY2Ugd2Ugd2FudCB0byBzaXplIHRoZSBib3gncyBsb2NhdGlvbiBmb3IgaXRzIFwiZnVsbFwiIGJvdW5kc1xyXG4gICAgLy8gVGhpcyBpbnN0YW5jZSBsaXZlcyBmb3IgdGhlIGxpZmV0aW1lIG9mIHRoZSBzaW11bGF0aW9uLCBzbyB3ZSBkb24ndCBuZWVkIHRvIHJlbW92ZSB0aGlzIGxpc3RlbmVyXHJcbiAgICBtb2RlbC5zZWNvbmRhcnlNYXNzLnZpc2libGVQcm9wZXJ0eS5saW5rKCB2aXNpYmxlID0+IHtcclxuICAgICAgbGFiZWxCVGV4dC52aXNpYmxlID0gdmlzaWJsZTtcclxuICAgICAgZGVuc2l0eUJUZXh0LnZpc2libGUgPSB2aXNpYmxlO1xyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IGJvdHRvbU5vZGUgPSBuZXcgSEJveCgge1xyXG4gICAgICBzcGFjaW5nOiAyICogTUFSR0lOLFxyXG4gICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgIG5ldyBQYW5lbCggbmV3IERlbnNpdHlDb250cm9sTm9kZSggbW9kZWwubGlxdWlkTWF0ZXJpYWxQcm9wZXJ0eSwgW1xyXG4gICAgICAgICAgTWF0ZXJpYWwuR0FTT0xJTkUsXHJcbiAgICAgICAgICBNYXRlcmlhbC5PSUwsXHJcbiAgICAgICAgICBNYXRlcmlhbC5XQVRFUixcclxuICAgICAgICAgIE1hdGVyaWFsLlNFQVdBVEVSLFxyXG4gICAgICAgICAgTWF0ZXJpYWwuSE9ORVksXHJcbiAgICAgICAgICBNYXRlcmlhbC5NRVJDVVJZLFxyXG4gICAgICAgICAgTWF0ZXJpYWwuREVOU0lUWV9BLFxyXG4gICAgICAgICAgTWF0ZXJpYWwuREVOU0lUWV9CXHJcbiAgICAgICAgXSwgdGhpcy5wb3B1cExheWVyLCB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnZGVuc2l0eUNvbnRyb2xOb2RlJyApICksIERlbnNpdHlCdW95YW5jeUNvbW1vbkNvbnN0YW50cy5QQU5FTF9PUFRJT05TICksXHJcbiAgICAgICAgbmV3IFBhbmVsKCBuZXcgR3Jhdml0eUNvbnRyb2xOb2RlKCBtb2RlbC5ncmF2aXR5UHJvcGVydHksIHRoaXMucG9wdXBMYXllciwgdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2dyYXZpdHlDb250cm9sTm9kZScgKSApLCBEZW5zaXR5QnVveWFuY3lDb21tb25Db25zdGFudHMuUEFORUxfT1BUSU9OUyApXHJcbiAgICAgIF1cclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLmFkZENoaWxkKCBuZXcgQWxpZ25Cb3goIGJvdHRvbU5vZGUsIHtcclxuICAgICAgYWxpZ25Cb3VuZHNQcm9wZXJ0eTogdGhpcy52aXNpYmxlQm91bmRzUHJvcGVydHksXHJcbiAgICAgIHhBbGlnbjogJ2NlbnRlcicsXHJcbiAgICAgIHlBbGlnbjogJ2JvdHRvbScsXHJcbiAgICAgIG1hcmdpbjogTUFSR0lOXHJcbiAgICB9ICkgKTtcclxuXHJcbiAgICB0aGlzLnJpZ2h0Qm94ID0gbmV3IFByaW1hcnlTZWNvbmRhcnlDb250cm9sc05vZGUoXHJcbiAgICAgIG1vZGVsLnByaW1hcnlNYXNzLFxyXG4gICAgICBtb2RlbC5zZWNvbmRhcnlNYXNzLFxyXG4gICAgICB0aGlzLnBvcHVwTGF5ZXIsXHJcbiAgICAgIHtcclxuICAgICAgICB0YW5kZW06IHRhbmRlbSxcclxuICAgICAgICBtaW5DdXN0b21NYXNzOiAwLjEsXHJcbiAgICAgICAgbWF4Q3VzdG9tTWFzczogMjdcclxuICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLmFkZENoaWxkKCBuZXcgQWxpZ25Cb3goIHRoaXMucmlnaHRCb3gsIHtcclxuICAgICAgYWxpZ25Cb3VuZHNQcm9wZXJ0eTogdGhpcy52aXNpYmxlQm91bmRzUHJvcGVydHksXHJcbiAgICAgIHhBbGlnbjogJ3JpZ2h0JyxcclxuICAgICAgeUFsaWduOiAndG9wJyxcclxuICAgICAgbWFyZ2luOiBNQVJHSU5cclxuICAgIH0gKSApO1xyXG5cclxuICAgIC8vIERlcml2ZWRQcm9wZXJ0eSBkb2Vzbid0IG5lZWQgZGlzcG9zYWwsIHNpbmNlIGV2ZXJ5dGhpbmcgaGVyZSBsaXZlcyBmb3IgdGhlIGxpZmV0aW1lIG9mIHRoZSBzaW11bGF0aW9uXHJcbiAgICB0aGlzLnJpZ2h0QmFycmllclZpZXdQb2ludFByb3BlcnR5LnZhbHVlID0gbmV3IERlcml2ZWRQcm9wZXJ0eSggWyB0aGlzLnJpZ2h0Qm94LmJvdW5kc1Byb3BlcnR5LCB0aGlzLnZpc2libGVCb3VuZHNQcm9wZXJ0eSBdLCAoIGJveEJvdW5kcywgdmlzaWJsZUJvdW5kcyApID0+IHtcclxuICAgICAgLy8gV2UgbWlnaHQgbm90IGhhdmUgYSBib3gsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvZGVuc2l0eS9pc3N1ZXMvMTEwXHJcbiAgICAgIHJldHVybiBuZXcgVmVjdG9yMiggaXNGaW5pdGUoIGJveEJvdW5kcy5sZWZ0ICkgPyBib3hCb3VuZHMubGVmdCA6IHZpc2libGVCb3VuZHMucmlnaHQsIHZpc2libGVCb3VuZHMuY2VudGVyWSApO1xyXG4gICAgfSApO1xyXG5cclxuICAgIHRoaXMuYWRkU2Vjb25kTWFzc0NvbnRyb2woIG1vZGVsLm1vZGVQcm9wZXJ0eSApO1xyXG5cclxuICAgIHRoaXMuYWRkQ2hpbGQoIHRoaXMucG9wdXBMYXllciApO1xyXG4gIH1cclxufVxyXG5cclxuZGVuc2l0eUJ1b3lhbmN5Q29tbW9uLnJlZ2lzdGVyKCAnQnVveWFuY3lFeHBsb3JlU2NyZWVuVmlldycsIEJ1b3lhbmN5RXhwbG9y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