// Copyright 2019-2023, University of Colorado Boulder

/**
 * Controls the dimensions of different masses with a generic "height/width" control.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import BooleanProperty from '../../../../axon/js/BooleanProperty.js';
import DerivedProperty from '../../../../axon/js/DerivedProperty.js';
import Dimension2 from '../../../../dot/js/Dimension2.js';
import Range from '../../../../dot/js/Range.js';
import optionize from '../../../../phet-core/js/optionize.js';
import NumberControl from '../../../../scenery-phet/js/NumberControl.js';
import NumberDisplay from '../../../../scenery-phet/js/NumberDisplay.js';
import { FlowBox, HBox, HSeparator, Text, VBox } from '../../../../scenery/js/imports.js';
import ComboBox from '../../../../sun/js/ComboBox.js';
import DensityBuoyancyCommonConstants from '../../common/DensityBuoyancyCommonConstants.js';
import { MassShape } from '../../common/model/MassShape.js';
import densityBuoyancyCommon from '../../densityBuoyancyCommon.js';
import DensityBuoyancyCommonStrings from '../../DensityBuoyancyCommonStrings.js';

// constants
const shapeStringMap = {
  [MassShape.BLOCK.name]: DensityBuoyancyCommonStrings.shape.blockStringProperty,
  [MassShape.ELLIPSOID.name]: DensityBuoyancyCommonStrings.shape.ellipsoidStringProperty,
  [MassShape.VERTICAL_CYLINDER.name]: DensityBuoyancyCommonStrings.shape.verticalCylinderStringProperty,
  [MassShape.HORIZONTAL_CYLINDER.name]: DensityBuoyancyCommonStrings.shape.horizontalCylinderStringProperty,
  [MassShape.CONE.name]: DensityBuoyancyCommonStrings.shape.coneStringProperty,
  [MassShape.INVERTED_CONE.name]: DensityBuoyancyCommonStrings.shape.invertedConeStringProperty
};
const tandemNameMap = {
  [MassShape.BLOCK.name]: 'block',
  [MassShape.ELLIPSOID.name]: 'ellipsoid',
  [MassShape.VERTICAL_CYLINDER.name]: 'verticalCylinder',
  [MassShape.HORIZONTAL_CYLINDER.name]: 'horizontalCylinder',
  [MassShape.CONE.name]: 'cone',
  [MassShape.INVERTED_CONE.name]: 'invertedCone'
};
export default class ShapeSizeControlNode extends VBox {
  constructor(massShapeProperty, widthRatioProperty, heightRatioProperty, volumeProperty, listParent, providedOptions) {
    const options = optionize()({
      labelNode: null
    }, providedOptions);
    super({
      spacing: 5,
      align: 'left'
    });
    const comboBox = new ComboBox(massShapeProperty, MassShape.enumeration.values.map(massShape => {
      return {
        value: massShape,
        createNode: () => new Text(shapeStringMap[massShape.name], {
          font: DensityBuoyancyCommonConstants.COMBO_BOX_ITEM_FONT,
          maxWidth: 160
        }),
        tandemName: `${tandemNameMap[massShape.name]}${ComboBox.ITEM_TANDEM_NAME_SUFFIX}`
      };
    }), listParent, {
      xMargin: 8,
      yMargin: 4
    });
    const numberControlOptions = {
      delta: 0.01,
      sliderOptions: {
        trackSize: new Dimension2(120, 0.5),
        thumbSize: DensityBuoyancyCommonConstants.THUMB_SIZE
      },
      numberDisplayOptions: {
        decimalPlaces: 2,
        textOptions: {
          font: DensityBuoyancyCommonConstants.READOUT_FONT
        },
        useFullHeight: true
      },
      layoutFunction: NumberControl.createLayoutFunction4({
        hasReadoutProperty: new BooleanProperty(false),
        sliderPadding: 5
      }),
      titleNodeOptions: {
        font: DensityBuoyancyCommonConstants.ITEM_FONT,
        maxWidth: 160
      }
    };
    const widthNumberControl = new NumberControl(DensityBuoyancyCommonStrings.widthStringProperty, widthRatioProperty, new Range(0, 1), numberControlOptions);
    const heightNumberControl = new NumberControl(DensityBuoyancyCommonStrings.heightStringProperty, heightRatioProperty, new Range(0, 1), numberControlOptions);

    // DerivedProperty doesn't need disposal, since everything here lives for the lifetime of the simulation
    const litersProperty = new DerivedProperty([volumeProperty], volume => {
      return volume * 1000;
    });
    this.children = [
    // TODO: ensure maxWidth for combo box contents so this isn't an issue. How do we want to do layout?
    new HBox({
      spacing: 5,
      children: [comboBox, options.labelNode].filter(_.identity)
    }), heightNumberControl, widthNumberControl, new HSeparator(), new FlowBox({
      layoutOptions: {
        stretch: true
      },
      orientation: 'horizontal',
      align: 'center',
      justify: 'spaceBetween',
      children: [new Text(DensityBuoyancyCommonStrings.volumeStringProperty, {
        font: DensityBuoyancyCommonConstants.READOUT_FONT,
        maxWidth: 120
      }), new NumberDisplay(litersProperty, new Range(0, 10), {
        // TODO: is 10 the most?
        valuePattern: DensityBuoyancyCommonConstants.VOLUME_PATTERN_STRING_PROPERTY,
        useRichText: true,
        decimalPlaces: 2,
        textOptions: {
          font: DensityBuoyancyCommonConstants.READOUT_FONT,
          maxWidth: 160
        }
      })]
    })];
    this.mutate(options);
  }
}
densityBuoyancyCommon.register('ShapeSizeControlNode', ShapeSizeControlNode);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb29sZWFuUHJvcGVydHkiLCJEZXJpdmVkUHJvcGVydHkiLCJEaW1lbnNpb24yIiwiUmFuZ2UiLCJvcHRpb25pemUiLCJOdW1iZXJDb250cm9sIiwiTnVtYmVyRGlzcGxheSIsIkZsb3dCb3giLCJIQm94IiwiSFNlcGFyYXRvciIsIlRleHQiLCJWQm94IiwiQ29tYm9Cb3giLCJEZW5zaXR5QnVveWFuY3lDb21tb25Db25zdGFudHMiLCJNYXNzU2hhcGUiLCJkZW5zaXR5QnVveWFuY3lDb21tb24iLCJEZW5zaXR5QnVveWFuY3lDb21tb25TdHJpbmdzIiwic2hhcGVTdHJpbmdNYXAiLCJCTE9DSyIsIm5hbWUiLCJzaGFwZSIsImJsb2NrU3RyaW5nUHJvcGVydHkiLCJFTExJUFNPSUQiLCJlbGxpcHNvaWRTdHJpbmdQcm9wZXJ0eSIsIlZFUlRJQ0FMX0NZTElOREVSIiwidmVydGljYWxDeWxpbmRlclN0cmluZ1Byb3BlcnR5IiwiSE9SSVpPTlRBTF9DWUxJTkRFUiIsImhvcml6b250YWxDeWxpbmRlclN0cmluZ1Byb3BlcnR5IiwiQ09ORSIsImNvbmVTdHJpbmdQcm9wZXJ0eSIsIklOVkVSVEVEX0NPTkUiLCJpbnZlcnRlZENvbmVTdHJpbmdQcm9wZXJ0eSIsInRhbmRlbU5hbWVNYXAiLCJTaGFwZVNpemVDb250cm9sTm9kZSIsImNvbnN0cnVjdG9yIiwibWFzc1NoYXBlUHJvcGVydHkiLCJ3aWR0aFJhdGlvUHJvcGVydHkiLCJoZWlnaHRSYXRpb1Byb3BlcnR5Iiwidm9sdW1lUHJvcGVydHkiLCJsaXN0UGFyZW50IiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsImxhYmVsTm9kZSIsInNwYWNpbmciLCJhbGlnbiIsImNvbWJvQm94IiwiZW51bWVyYXRpb24iLCJ2YWx1ZXMiLCJtYXAiLCJtYXNzU2hhcGUiLCJ2YWx1ZSIsImNyZWF0ZU5vZGUiLCJmb250IiwiQ09NQk9fQk9YX0lURU1fRk9OVCIsIm1heFdpZHRoIiwidGFuZGVtTmFtZSIsIklURU1fVEFOREVNX05BTUVfU1VGRklYIiwieE1hcmdpbiIsInlNYXJnaW4iLCJudW1iZXJDb250cm9sT3B0aW9ucyIsImRlbHRhIiwic2xpZGVyT3B0aW9ucyIsInRyYWNrU2l6ZSIsInRodW1iU2l6ZSIsIlRIVU1CX1NJWkUiLCJudW1iZXJEaXNwbGF5T3B0aW9ucyIsImRlY2ltYWxQbGFjZXMiLCJ0ZXh0T3B0aW9ucyIsIlJFQURPVVRfRk9OVCIsInVzZUZ1bGxIZWlnaHQiLCJsYXlvdXRGdW5jdGlvbiIsImNyZWF0ZUxheW91dEZ1bmN0aW9uNCIsImhhc1JlYWRvdXRQcm9wZXJ0eSIsInNsaWRlclBhZGRpbmciLCJ0aXRsZU5vZGVPcHRpb25zIiwiSVRFTV9GT05UIiwid2lkdGhOdW1iZXJDb250cm9sIiwid2lkdGhTdHJpbmdQcm9wZXJ0eSIsImhlaWdodE51bWJlckNvbnRyb2wiLCJoZWlnaHRTdHJpbmdQcm9wZXJ0eSIsImxpdGVyc1Byb3BlcnR5Iiwidm9sdW1lIiwiY2hpbGRyZW4iLCJmaWx0ZXIiLCJfIiwiaWRlbnRpdHkiLCJsYXlvdXRPcHRpb25zIiwic3RyZXRjaCIsIm9yaWVudGF0aW9uIiwianVzdGlmeSIsInZvbHVtZVN0cmluZ1Byb3BlcnR5IiwidmFsdWVQYXR0ZXJuIiwiVk9MVU1FX1BBVFRFUk5fU1RSSU5HX1BST1BFUlRZIiwidXNlUmljaFRleHQiLCJtdXRhdGUiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlNoYXBlU2l6ZUNvbnRyb2xOb2RlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE5LTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIENvbnRyb2xzIHRoZSBkaW1lbnNpb25zIG9mIGRpZmZlcmVudCBtYXNzZXMgd2l0aCBhIGdlbmVyaWMgXCJoZWlnaHQvd2lkdGhcIiBjb250cm9sLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XHJcbiAqL1xyXG5cclxuaW1wb3J0IEJvb2xlYW5Qcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL0Jvb2xlYW5Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBEZXJpdmVkUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9EZXJpdmVkUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgVFJlYWRPbmx5UHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9UUmVhZE9ubHlQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1Byb3BlcnR5LmpzJztcclxuaW1wb3J0IERpbWVuc2lvbjIgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL0RpbWVuc2lvbjIuanMnO1xyXG5pbXBvcnQgUmFuZ2UgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL1JhbmdlLmpzJztcclxuaW1wb3J0IG9wdGlvbml6ZSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuaW1wb3J0IE51bWJlckNvbnRyb2wgZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL051bWJlckNvbnRyb2wuanMnO1xyXG5pbXBvcnQgTnVtYmVyRGlzcGxheSBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvTnVtYmVyRGlzcGxheS5qcyc7XHJcbmltcG9ydCB7IEZsb3dCb3gsIEZsb3dCb3hPcHRpb25zLCBIQm94LCBIU2VwYXJhdG9yLCBOb2RlLCBUZXh0LCBWQm94IH0gZnJvbSAnLi4vLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcclxuaW1wb3J0IENvbWJvQm94IGZyb20gJy4uLy4uLy4uLy4uL3N1bi9qcy9Db21ib0JveC5qcyc7XHJcbmltcG9ydCBEZW5zaXR5QnVveWFuY3lDb21tb25Db25zdGFudHMgZnJvbSAnLi4vLi4vY29tbW9uL0RlbnNpdHlCdW95YW5jeUNvbW1vbkNvbnN0YW50cy5qcyc7XHJcbmltcG9ydCB7IE1hc3NTaGFwZSB9IGZyb20gJy4uLy4uL2NvbW1vbi9tb2RlbC9NYXNzU2hhcGUuanMnO1xyXG5pbXBvcnQgZGVuc2l0eUJ1b3lhbmN5Q29tbW9uIGZyb20gJy4uLy4uL2RlbnNpdHlCdW95YW5jeUNvbW1vbi5qcyc7XHJcbmltcG9ydCBEZW5zaXR5QnVveWFuY3lDb21tb25TdHJpbmdzIGZyb20gJy4uLy4uL0RlbnNpdHlCdW95YW5jeUNvbW1vblN0cmluZ3MuanMnO1xyXG5cclxuLy8gY29uc3RhbnRzXHJcbmNvbnN0IHNoYXBlU3RyaW5nTWFwID0ge1xyXG4gIFsgTWFzc1NoYXBlLkJMT0NLLm5hbWUgXTogRGVuc2l0eUJ1b3lhbmN5Q29tbW9uU3RyaW5ncy5zaGFwZS5ibG9ja1N0cmluZ1Byb3BlcnR5LFxyXG4gIFsgTWFzc1NoYXBlLkVMTElQU09JRC5uYW1lIF06IERlbnNpdHlCdW95YW5jeUNvbW1vblN0cmluZ3Muc2hhcGUuZWxsaXBzb2lkU3RyaW5nUHJvcGVydHksXHJcbiAgWyBNYXNzU2hhcGUuVkVSVElDQUxfQ1lMSU5ERVIubmFtZSBdOiBEZW5zaXR5QnVveWFuY3lDb21tb25TdHJpbmdzLnNoYXBlLnZlcnRpY2FsQ3lsaW5kZXJTdHJpbmdQcm9wZXJ0eSxcclxuICBbIE1hc3NTaGFwZS5IT1JJWk9OVEFMX0NZTElOREVSLm5hbWUgXTogRGVuc2l0eUJ1b3lhbmN5Q29tbW9uU3RyaW5ncy5zaGFwZS5ob3Jpem9udGFsQ3lsaW5kZXJTdHJpbmdQcm9wZXJ0eSxcclxuICBbIE1hc3NTaGFwZS5DT05FLm5hbWUgXTogRGVuc2l0eUJ1b3lhbmN5Q29tbW9uU3RyaW5ncy5zaGFwZS5jb25lU3RyaW5nUHJvcGVydHksXHJcbiAgWyBNYXNzU2hhcGUuSU5WRVJURURfQ09ORS5uYW1lIF06IERlbnNpdHlCdW95YW5jeUNvbW1vblN0cmluZ3Muc2hhcGUuaW52ZXJ0ZWRDb25lU3RyaW5nUHJvcGVydHlcclxufTtcclxuY29uc3QgdGFuZGVtTmFtZU1hcCA9IHtcclxuICBbIE1hc3NTaGFwZS5CTE9DSy5uYW1lIF06ICdibG9jaycsXHJcbiAgWyBNYXNzU2hhcGUuRUxMSVBTT0lELm5hbWUgXTogJ2VsbGlwc29pZCcsXHJcbiAgWyBNYXNzU2hhcGUuVkVSVElDQUxfQ1lMSU5ERVIubmFtZSBdOiAndmVydGljYWxDeWxpbmRlcicsXHJcbiAgWyBNYXNzU2hhcGUuSE9SSVpPTlRBTF9DWUxJTkRFUi5uYW1lIF06ICdob3Jpem9udGFsQ3lsaW5kZXInLFxyXG4gIFsgTWFzc1NoYXBlLkNPTkUubmFtZSBdOiAnY29uZScsXHJcbiAgWyBNYXNzU2hhcGUuSU5WRVJURURfQ09ORS5uYW1lIF06ICdpbnZlcnRlZENvbmUnXHJcbn07XHJcblxyXG50eXBlIFNlbGZPcHRpb25zID0ge1xyXG4gIGxhYmVsTm9kZT86IE5vZGUgfCBudWxsO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgU2hhcGVTaXplQ29udHJvbE5vZGVPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBGbG93Qm94T3B0aW9ucztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNoYXBlU2l6ZUNvbnRyb2xOb2RlIGV4dGVuZHMgVkJveCB7XHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBtYXNzU2hhcGVQcm9wZXJ0eTogUHJvcGVydHk8TWFzc1NoYXBlPiwgd2lkdGhSYXRpb1Byb3BlcnR5OiBQcm9wZXJ0eTxudW1iZXI+LCBoZWlnaHRSYXRpb1Byb3BlcnR5OiBQcm9wZXJ0eTxudW1iZXI+LCB2b2x1bWVQcm9wZXJ0eTogVFJlYWRPbmx5UHJvcGVydHk8bnVtYmVyPiwgbGlzdFBhcmVudDogTm9kZSwgcHJvdmlkZWRPcHRpb25zPzogU2hhcGVTaXplQ29udHJvbE5vZGVPcHRpb25zICkge1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8U2hhcGVTaXplQ29udHJvbE5vZGVPcHRpb25zLCBTZWxmT3B0aW9ucywgRmxvd0JveE9wdGlvbnM+KCkoIHtcclxuICAgICAgbGFiZWxOb2RlOiBudWxsXHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICBzdXBlcigge1xyXG4gICAgICBzcGFjaW5nOiA1LFxyXG4gICAgICBhbGlnbjogJ2xlZnQnXHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgY29tYm9Cb3ggPSBuZXcgQ29tYm9Cb3goIG1hc3NTaGFwZVByb3BlcnR5LCBNYXNzU2hhcGUuZW51bWVyYXRpb24udmFsdWVzLm1hcCggbWFzc1NoYXBlID0+IHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB2YWx1ZTogbWFzc1NoYXBlLFxyXG4gICAgICAgIGNyZWF0ZU5vZGU6ICgpID0+IG5ldyBUZXh0KCBzaGFwZVN0cmluZ01hcFsgbWFzc1NoYXBlLm5hbWUgXSwge1xyXG4gICAgICAgICAgZm9udDogRGVuc2l0eUJ1b3lhbmN5Q29tbW9uQ29uc3RhbnRzLkNPTUJPX0JPWF9JVEVNX0ZPTlQsXHJcbiAgICAgICAgICBtYXhXaWR0aDogMTYwXHJcbiAgICAgICAgfSApLFxyXG4gICAgICAgIHRhbmRlbU5hbWU6IGAke3RhbmRlbU5hbWVNYXBbIG1hc3NTaGFwZS5uYW1lIF19JHtDb21ib0JveC5JVEVNX1RBTkRFTV9OQU1FX1NVRkZJWH1gXHJcbiAgICAgIH07XHJcbiAgICB9ICksIGxpc3RQYXJlbnQsIHtcclxuICAgICAgeE1hcmdpbjogOCxcclxuICAgICAgeU1hcmdpbjogNFxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IG51bWJlckNvbnRyb2xPcHRpb25zID0ge1xyXG4gICAgICBkZWx0YTogMC4wMSxcclxuICAgICAgc2xpZGVyT3B0aW9uczoge1xyXG4gICAgICAgIHRyYWNrU2l6ZTogbmV3IERpbWVuc2lvbjIoIDEyMCwgMC41ICksXHJcbiAgICAgICAgdGh1bWJTaXplOiBEZW5zaXR5QnVveWFuY3lDb21tb25Db25zdGFudHMuVEhVTUJfU0laRVxyXG4gICAgICB9LFxyXG4gICAgICBudW1iZXJEaXNwbGF5T3B0aW9uczoge1xyXG4gICAgICAgIGRlY2ltYWxQbGFjZXM6IDIsXHJcbiAgICAgICAgdGV4dE9wdGlvbnM6IHtcclxuICAgICAgICAgIGZvbnQ6IERlbnNpdHlCdW95YW5jeUNvbW1vbkNvbnN0YW50cy5SRUFET1VUX0ZPTlRcclxuICAgICAgICB9LFxyXG4gICAgICAgIHVzZUZ1bGxIZWlnaHQ6IHRydWVcclxuICAgICAgfSxcclxuICAgICAgbGF5b3V0RnVuY3Rpb246IE51bWJlckNvbnRyb2wuY3JlYXRlTGF5b3V0RnVuY3Rpb240KCB7XHJcbiAgICAgICAgaGFzUmVhZG91dFByb3BlcnR5OiBuZXcgQm9vbGVhblByb3BlcnR5KCBmYWxzZSApLFxyXG4gICAgICAgIHNsaWRlclBhZGRpbmc6IDVcclxuICAgICAgfSApLFxyXG4gICAgICB0aXRsZU5vZGVPcHRpb25zOiB7XHJcbiAgICAgICAgZm9udDogRGVuc2l0eUJ1b3lhbmN5Q29tbW9uQ29uc3RhbnRzLklURU1fRk9OVCxcclxuICAgICAgICBtYXhXaWR0aDogMTYwXHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgY29uc3Qgd2lkdGhOdW1iZXJDb250cm9sID0gbmV3IE51bWJlckNvbnRyb2woIERlbnNpdHlCdW95YW5jeUNvbW1vblN0cmluZ3Mud2lkdGhTdHJpbmdQcm9wZXJ0eSwgd2lkdGhSYXRpb1Byb3BlcnR5LCBuZXcgUmFuZ2UoIDAsIDEgKSwgbnVtYmVyQ29udHJvbE9wdGlvbnMgKTtcclxuICAgIGNvbnN0IGhlaWdodE51bWJlckNvbnRyb2wgPSBuZXcgTnVtYmVyQ29udHJvbCggRGVuc2l0eUJ1b3lhbmN5Q29tbW9uU3RyaW5ncy5oZWlnaHRTdHJpbmdQcm9wZXJ0eSwgaGVpZ2h0UmF0aW9Qcm9wZXJ0eSwgbmV3IFJhbmdlKCAwLCAxICksIG51bWJlckNvbnRyb2xPcHRpb25zICk7XHJcblxyXG4gICAgLy8gRGVyaXZlZFByb3BlcnR5IGRvZXNuJ3QgbmVlZCBkaXNwb3NhbCwgc2luY2UgZXZlcnl0aGluZyBoZXJlIGxpdmVzIGZvciB0aGUgbGlmZXRpbWUgb2YgdGhlIHNpbXVsYXRpb25cclxuICAgIGNvbnN0IGxpdGVyc1Byb3BlcnR5ID0gbmV3IERlcml2ZWRQcm9wZXJ0eSggWyB2b2x1bWVQcm9wZXJ0eSBdLCB2b2x1bWUgPT4ge1xyXG4gICAgICByZXR1cm4gdm9sdW1lICogMTAwMDtcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLmNoaWxkcmVuID0gW1xyXG4gICAgICAvLyBUT0RPOiBlbnN1cmUgbWF4V2lkdGggZm9yIGNvbWJvIGJveCBjb250ZW50cyBzbyB0aGlzIGlzbid0IGFuIGlzc3VlLiBIb3cgZG8gd2Ugd2FudCB0byBkbyBsYXlvdXQ/XHJcbiAgICAgIG5ldyBIQm94KCB7XHJcbiAgICAgICAgc3BhY2luZzogNSxcclxuICAgICAgICBjaGlsZHJlbjogW1xyXG4gICAgICAgICAgY29tYm9Cb3gsXHJcbiAgICAgICAgICBvcHRpb25zLmxhYmVsTm9kZVxyXG4gICAgICAgIF0uZmlsdGVyKCBfLmlkZW50aXR5ICkgYXMgTm9kZVtdXHJcbiAgICAgIH0gKSxcclxuICAgICAgaGVpZ2h0TnVtYmVyQ29udHJvbCxcclxuICAgICAgd2lkdGhOdW1iZXJDb250cm9sLFxyXG4gICAgICBuZXcgSFNlcGFyYXRvcigpLFxyXG4gICAgICBuZXcgRmxvd0JveCgge1xyXG4gICAgICAgIGxheW91dE9wdGlvbnM6IHsgc3RyZXRjaDogdHJ1ZSB9LFxyXG4gICAgICAgIG9yaWVudGF0aW9uOiAnaG9yaXpvbnRhbCcsXHJcbiAgICAgICAgYWxpZ246ICdjZW50ZXInLFxyXG4gICAgICAgIGp1c3RpZnk6ICdzcGFjZUJldHdlZW4nLFxyXG4gICAgICAgIGNoaWxkcmVuOiBbXHJcbiAgICAgICAgICBuZXcgVGV4dCggRGVuc2l0eUJ1b3lhbmN5Q29tbW9uU3RyaW5ncy52b2x1bWVTdHJpbmdQcm9wZXJ0eSwge1xyXG4gICAgICAgICAgICBmb250OiBEZW5zaXR5QnVveWFuY3lDb21tb25Db25zdGFudHMuUkVBRE9VVF9GT05ULFxyXG4gICAgICAgICAgICBtYXhXaWR0aDogMTIwXHJcbiAgICAgICAgICB9ICksXHJcbiAgICAgICAgICBuZXcgTnVtYmVyRGlzcGxheSggbGl0ZXJzUHJvcGVydHksIG5ldyBSYW5nZSggMCwgMTAgKSwgeyAvLyBUT0RPOiBpcyAxMCB0aGUgbW9zdD9cclxuICAgICAgICAgICAgdmFsdWVQYXR0ZXJuOiBEZW5zaXR5QnVveWFuY3lDb21tb25Db25zdGFudHMuVk9MVU1FX1BBVFRFUk5fU1RSSU5HX1BST1BFUlRZLFxyXG4gICAgICAgICAgICB1c2VSaWNoVGV4dDogdHJ1ZSxcclxuICAgICAgICAgICAgZGVjaW1hbFBsYWNlczogMixcclxuICAgICAgICAgICAgdGV4dE9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICBmb250OiBEZW5zaXR5QnVveWFuY3lDb21tb25Db25zdGFudHMuUkVBRE9VVF9GT05ULFxyXG4gICAgICAgICAgICAgIG1heFdpZHRoOiAxNjBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSApXHJcbiAgICAgICAgXVxyXG4gICAgICB9IClcclxuICAgIF07XHJcblxyXG4gICAgdGhpcy5tdXRhdGUoIG9wdGlvbnMgKTtcclxuICB9XHJcbn1cclxuXHJcbmRlbnNpdHlCdW95YW5jeUNvbW1vbi5yZWdpc3RlciggJ1NoYXBlU2l6ZUNvbnRyb2xOb2RlJywgU2hhcGVTaXplQ29udHJvbE5vZGUgKTtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGVBQWUsTUFBTSx3Q0FBd0M7QUFDcEUsT0FBT0MsZUFBZSxNQUFNLHdDQUF3QztBQUdwRSxPQUFPQyxVQUFVLE1BQU0sa0NBQWtDO0FBQ3pELE9BQU9DLEtBQUssTUFBTSw2QkFBNkI7QUFDL0MsT0FBT0MsU0FBUyxNQUFNLHVDQUF1QztBQUM3RCxPQUFPQyxhQUFhLE1BQU0sOENBQThDO0FBQ3hFLE9BQU9DLGFBQWEsTUFBTSw4Q0FBOEM7QUFDeEUsU0FBU0MsT0FBTyxFQUFrQkMsSUFBSSxFQUFFQyxVQUFVLEVB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