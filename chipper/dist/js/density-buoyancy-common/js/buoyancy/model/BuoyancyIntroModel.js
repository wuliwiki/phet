// Copyright 2022, University of Colorado Boulder

/**
 * The main model for the Intro screen of the Buoyancy simulation.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import Matrix3 from '../../../../dot/js/Matrix3.js';
import Vector2 from '../../../../dot/js/Vector2.js';
import Enumeration from '../../../../phet-core/js/Enumeration.js';
import EnumerationValue from '../../../../phet-core/js/EnumerationValue.js';
import optionize from '../../../../phet-core/js/optionize.js';
import BlockSetModel from '../../common/model/BlockSetModel.js';
import Cube from '../../common/model/Cube.js';
import Material from '../../common/model/Material.js';
import Scale, { DisplayType } from '../../common/model/Scale.js';
import densityBuoyancyCommon from '../../densityBuoyancyCommon.js';
import { MassTag } from '../../common/model/Mass.js';
export class BlockSet extends EnumerationValue {
  static SAME_MASS = new BlockSet();
  static SAME_VOLUME = new BlockSet();
  static SAME_DENSITY = new BlockSet();
  static enumeration = new Enumeration(BlockSet, {
    phetioDocumentation: 'Block set'
  });
}
export default class BuoyancyIntroModel extends BlockSetModel {
  constructor(providedOptions) {
    const tandem = providedOptions.tandem;
    const blockSetsTandem = tandem.createTandem('blockSets');
    const sameMassTandem = blockSetsTandem.createTandem('sameMass');
    const sameVolumeTandem = blockSetsTandem.createTandem('sameVolume');
    const sameDensityTandem = blockSetsTandem.createTandem('sameDensity');
    const options = optionize()({
      initialMode: BlockSet.SAME_MASS,
      BlockSet: BlockSet.enumeration,
      createMassesCallback: (model, blockSet) => {
        switch (blockSet) {
          case BlockSet.SAME_MASS:
            return [Cube.createWithMass(model.engine, Material.WOOD, Vector2.ZERO, 5, {
              tandem: sameMassTandem.createTandem('blockA'),
              adjustableMaterial: true,
              tag: MassTag.ONE_A
            }), Cube.createWithMass(model.engine, Material.BRICK, Vector2.ZERO, 5, {
              tandem: sameMassTandem.createTandem('blockB'),
              adjustableMaterial: true,
              tag: MassTag.ONE_B
            })];
          case BlockSet.SAME_VOLUME:
            return [Cube.createWithVolume(model.engine, Material.WOOD, Vector2.ZERO, 0.005, {
              tandem: sameVolumeTandem.createTandem('blockA'),
              adjustableMaterial: true,
              tag: MassTag.TWO_A
            }), Cube.createWithVolume(model.engine, Material.BRICK, Vector2.ZERO, 0.005, {
              tandem: sameVolumeTandem.createTandem('blockB'),
              adjustableMaterial: true,
              tag: MassTag.TWO_B
            })];
          case BlockSet.SAME_DENSITY:
            return [Cube.createWithMass(model.engine, Material.WOOD, Vector2.ZERO, 2, {
              tandem: sameDensityTandem.createTandem('blockA'),
              adjustableMaterial: true,
              tag: MassTag.THREE_A
            }), Cube.createWithMass(model.engine, Material.WOOD, Vector2.ZERO, 4, {
              tandem: sameDensityTandem.createTandem('blockB'),
              adjustableMaterial: true,
              tag: MassTag.THREE_B
            })];
          default:
            throw new Error(`unknown blockSet: ${blockSet}`);
        }
      },
      regenerateMassesCallback: (model, blockSet, masses) => {
        // See subclass for implementation
      },
      positionMassesCallback: (model, blockSet, masses) => {
        switch (blockSet) {
          case BlockSet.SAME_MASS:
            model.positionMassesLeft([masses[0]]);
            model.positionMassesRight([masses[1]]);
            break;
          case BlockSet.SAME_VOLUME:
            model.positionMassesLeft([masses[0]]);
            model.positionMassesRight([masses[1]]);
            break;
          case BlockSet.SAME_DENSITY:
            model.positionMassesLeft([masses[0]]);
            model.positionMassesRight([masses[1]]);
            break;
          default:
            throw new Error(`unknown blockSet: ${blockSet}`);
        }
      }
    }, providedOptions);
    super(options);

    // Left scale
    this.availableMasses.push(new Scale(this.engine, this.gravityProperty, {
      matrix: Matrix3.translation(-0.77, -Scale.SCALE_BASE_BOUNDS.minY),
      displayType: DisplayType.NEWTONS,
      canMove: true,
      tandem: providedOptions.tandem.createTandem('leftScale')
    }));

    // Pool scale
    const poolScale = new Scale(this.engine, this.gravityProperty, {
      matrix: Matrix3.translation(0.3, -Scale.SCALE_BASE_BOUNDS.minY + this.poolBounds.minY),
      displayType: DisplayType.NEWTONS,
      canMove: true,
      tandem: providedOptions.tandem.createTandem('poolScale')
    });
    this.availableMasses.push(poolScale);

    // Adjust pool volume so that it's at the desired value WITH the pool scale inside.
    this.pool.liquidVolumeProperty.value -= poolScale.volumeProperty.value;
    this.pool.liquidVolumeProperty.setInitialValue(this.pool.liquidVolumeProperty.value);
  }
}
densityBuoyancyCommon.register('BuoyancyIntroModel', BuoyancyIntroModel);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNYXRyaXgzIiwiVmVjdG9yMiIsIkVudW1lcmF0aW9uIiwiRW51bWVyYXRpb25WYWx1ZSIsIm9wdGlvbml6ZSIsIkJsb2NrU2V0TW9kZWwiLCJDdWJlIiwiTWF0ZXJpYWwiLCJTY2FsZSIsIkRpc3BsYXlUeXBlIiwiZGVuc2l0eUJ1b3lhbmN5Q29tbW9uIiwiTWFzc1RhZyIsIkJsb2NrU2V0IiwiU0FNRV9NQVNTIiwiU0FNRV9WT0xVTUUiLCJTQU1FX0RFTlNJVFkiLCJlbnVtZXJhdGlvbiIsInBoZXRpb0RvY3VtZW50YXRpb24iLCJCdW95YW5jeUludHJvTW9kZWwiLCJjb25zdHJ1Y3RvciIsInByb3ZpZGVkT3B0aW9ucyIsInRhbmRlbSIsImJsb2NrU2V0c1RhbmRlbSIsImNyZWF0ZVRhbmRlbSIsInNhbWVNYXNzVGFuZGVtIiwic2FtZVZvbHVtZVRhbmRlbSIsInNhbWVEZW5zaXR5VGFuZGVtIiwib3B0aW9ucyIsImluaXRpYWxNb2RlIiwiY3JlYXRlTWFzc2VzQ2FsbGJhY2siLCJtb2RlbCIsImJsb2NrU2V0IiwiY3JlYXRlV2l0aE1hc3MiLCJlbmdpbmUiLCJXT09EIiwiWkVSTyIsImFkanVzdGFibGVNYXRlcmlhbCIsInRhZyIsIk9ORV9BIiwiQlJJQ0siLCJPTkVfQiIsImNyZWF0ZVdpdGhWb2x1bWUiLCJUV09fQSIsIlRXT19CIiwiVEhSRUVfQSIsIlRIUkVFX0IiLCJFcnJvciIsInJlZ2VuZXJhdGVNYXNzZXNDYWxsYmFjayIsIm1hc3NlcyIsInBvc2l0aW9uTWFzc2VzQ2FsbGJhY2siLCJwb3NpdGlvbk1hc3Nlc0xlZnQiLCJwb3NpdGlvbk1hc3Nlc1JpZ2h0IiwiYXZhaWxhYmxlTWFzc2VzIiwicHVzaCIsImdyYXZpdHlQcm9wZXJ0eSIsIm1hdHJpeCIsInRyYW5zbGF0aW9uIiwiU0NBTEVfQkFTRV9CT1VORFMiLCJtaW5ZIiwiZGlzcGxheVR5cGUiLCJORVdUT05TIiwiY2FuTW92ZSIsInBvb2xTY2FsZSIsInBvb2xCb3VuZHMiLCJwb29sIiwibGlxdWlkVm9sdW1lUHJvcGVydHkiLCJ2YWx1ZSIsInZvbHVtZVByb3BlcnR5Iiwic2V0SW5pdGlhbFZhbHVlIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJCdW95YW5jeUludHJvTW9kZWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxyXG5cclxuLyoqXHJcbiAqIFRoZSBtYWluIG1vZGVsIGZvciB0aGUgSW50cm8gc2NyZWVuIG9mIHRoZSBCdW95YW5jeSBzaW11bGF0aW9uLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XHJcbiAqL1xyXG5cclxuaW1wb3J0IE1hdHJpeDMgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL01hdHJpeDMuanMnO1xyXG5pbXBvcnQgU3RyaWN0T21pdCBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvU3RyaWN0T21pdC5qcyc7XHJcbmltcG9ydCBWZWN0b3IyIGZyb20gJy4uLy4uLy4uLy4uL2RvdC9qcy9WZWN0b3IyLmpzJztcclxuaW1wb3J0IEVudW1lcmF0aW9uIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9FbnVtZXJhdGlvbi5qcyc7XHJcbmltcG9ydCBFbnVtZXJhdGlvblZhbHVlIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9FbnVtZXJhdGlvblZhbHVlLmpzJztcclxuaW1wb3J0IG9wdGlvbml6ZSwgeyBFbXB0eVNlbGZPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XHJcbmltcG9ydCBCbG9ja1NldE1vZGVsLCB7IEJsb2NrU2V0TW9kZWxPcHRpb25zIH0gZnJvbSAnLi4vLi4vY29tbW9uL21vZGVsL0Jsb2NrU2V0TW9kZWwuanMnO1xyXG5pbXBvcnQgQ3ViZSBmcm9tICcuLi8uLi9jb21tb24vbW9kZWwvQ3ViZS5qcyc7XHJcbmltcG9ydCBNYXRlcmlhbCBmcm9tICcuLi8uLi9jb21tb24vbW9kZWwvTWF0ZXJpYWwuanMnO1xyXG5pbXBvcnQgU2NhbGUsIHsgRGlzcGxheVR5cGUgfSBmcm9tICcuLi8uLi9jb21tb24vbW9kZWwvU2NhbGUuanMnO1xyXG5pbXBvcnQgZGVuc2l0eUJ1b3lhbmN5Q29tbW9uIGZyb20gJy4uLy4uL2RlbnNpdHlCdW95YW5jeUNvbW1vbi5qcyc7XHJcbmltcG9ydCB7IE1hc3NUYWcgfSBmcm9tICcuLi8uLi9jb21tb24vbW9kZWwvTWFzcy5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgQmxvY2tTZXQgZXh0ZW5kcyBFbnVtZXJhdGlvblZhbHVlIHtcclxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFNBTUVfTUFTUyA9IG5ldyBCbG9ja1NldCgpO1xyXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgU0FNRV9WT0xVTUUgPSBuZXcgQmxvY2tTZXQoKTtcclxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFNBTUVfREVOU0lUWSA9IG5ldyBCbG9ja1NldCgpO1xyXG5cclxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGVudW1lcmF0aW9uID0gbmV3IEVudW1lcmF0aW9uKCBCbG9ja1NldCwge1xyXG4gICAgcGhldGlvRG9jdW1lbnRhdGlvbjogJ0Jsb2NrIHNldCdcclxuICB9ICk7XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIEJ1b3lhbmN5SW50cm9Nb2RlbE9wdGlvbnMgPSBTdHJpY3RPbWl0PEJsb2NrU2V0TW9kZWxPcHRpb25zPEJsb2NrU2V0PiwgJ2luaXRpYWxNb2RlJyB8ICdCbG9ja1NldCcgfCAnY3JlYXRlTWFzc2VzQ2FsbGJhY2snIHwgJ3JlZ2VuZXJhdGVNYXNzZXNDYWxsYmFjaycgfCAncG9zaXRpb25NYXNzZXNDYWxsYmFjayc+O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnVveWFuY3lJbnRyb01vZGVsIGV4dGVuZHMgQmxvY2tTZXRNb2RlbDxCbG9ja1NldD4ge1xyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggcHJvdmlkZWRPcHRpb25zOiBCdW95YW5jeUludHJvTW9kZWxPcHRpb25zICkge1xyXG4gICAgY29uc3QgdGFuZGVtID0gcHJvdmlkZWRPcHRpb25zLnRhbmRlbTtcclxuXHJcbiAgICBjb25zdCBibG9ja1NldHNUYW5kZW0gPSB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnYmxvY2tTZXRzJyApO1xyXG4gICAgY29uc3Qgc2FtZU1hc3NUYW5kZW0gPSBibG9ja1NldHNUYW5kZW0uY3JlYXRlVGFuZGVtKCAnc2FtZU1hc3MnICk7XHJcbiAgICBjb25zdCBzYW1lVm9sdW1lVGFuZGVtID0gYmxvY2tTZXRzVGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3NhbWVWb2x1bWUnICk7XHJcbiAgICBjb25zdCBzYW1lRGVuc2l0eVRhbmRlbSA9IGJsb2NrU2V0c1RhbmRlbS5jcmVhdGVUYW5kZW0oICdzYW1lRGVuc2l0eScgKTtcclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPEJ1b3lhbmN5SW50cm9Nb2RlbE9wdGlvbnMsIEVtcHR5U2VsZk9wdGlvbnMsIEJsb2NrU2V0TW9kZWxPcHRpb25zPEJsb2NrU2V0Pj4oKSgge1xyXG4gICAgICBpbml0aWFsTW9kZTogQmxvY2tTZXQuU0FNRV9NQVNTLFxyXG4gICAgICBCbG9ja1NldDogQmxvY2tTZXQuZW51bWVyYXRpb24sXHJcblxyXG4gICAgICBjcmVhdGVNYXNzZXNDYWxsYmFjazogKCBtb2RlbCwgYmxvY2tTZXQgKSA9PiB7XHJcbiAgICAgICAgc3dpdGNoKCBibG9ja1NldCApIHtcclxuICAgICAgICAgIGNhc2UgQmxvY2tTZXQuU0FNRV9NQVNTOlxyXG4gICAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAgIEN1YmUuY3JlYXRlV2l0aE1hc3MoIG1vZGVsLmVuZ2luZSwgTWF0ZXJpYWwuV09PRCwgVmVjdG9yMi5aRVJPLCA1LCB7XHJcbiAgICAgICAgICAgICAgICB0YW5kZW06IHNhbWVNYXNzVGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2Jsb2NrQScgKSxcclxuICAgICAgICAgICAgICAgIGFkanVzdGFibGVNYXRlcmlhbDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRhZzogTWFzc1RhZy5PTkVfQVxyXG4gICAgICAgICAgICAgIH0gKSxcclxuICAgICAgICAgICAgICBDdWJlLmNyZWF0ZVdpdGhNYXNzKCBtb2RlbC5lbmdpbmUsIE1hdGVyaWFsLkJSSUNLLCBWZWN0b3IyLlpFUk8sIDUsIHtcclxuICAgICAgICAgICAgICAgIHRhbmRlbTogc2FtZU1hc3NUYW5kZW0uY3JlYXRlVGFuZGVtKCAnYmxvY2tCJyApLFxyXG4gICAgICAgICAgICAgICAgYWRqdXN0YWJsZU1hdGVyaWFsOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdGFnOiBNYXNzVGFnLk9ORV9CXHJcbiAgICAgICAgICAgICAgfSApXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICBjYXNlIEJsb2NrU2V0LlNBTUVfVk9MVU1FOlxyXG4gICAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAgIEN1YmUuY3JlYXRlV2l0aFZvbHVtZSggbW9kZWwuZW5naW5lLCBNYXRlcmlhbC5XT09ELCBWZWN0b3IyLlpFUk8sIDAuMDA1LCB7XHJcbiAgICAgICAgICAgICAgICB0YW5kZW06IHNhbWVWb2x1bWVUYW5kZW0uY3JlYXRlVGFuZGVtKCAnYmxvY2tBJyApLFxyXG4gICAgICAgICAgICAgICAgYWRqdXN0YWJsZU1hdGVyaWFsOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdGFnOiBNYXNzVGFnLlRXT19BXHJcbiAgICAgICAgICAgICAgfSApLFxyXG4gICAgICAgICAgICAgIEN1YmUuY3JlYXRlV2l0aFZvbHVtZSggbW9kZWwuZW5naW5lLCBNYXRlcmlhbC5CUklDSywgVmVjdG9yMi5aRVJPLCAwLjAwNSwge1xyXG4gICAgICAgICAgICAgICAgdGFuZGVtOiBzYW1lVm9sdW1lVGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2Jsb2NrQicgKSxcclxuICAgICAgICAgICAgICAgIGFkanVzdGFibGVNYXRlcmlhbDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRhZzogTWFzc1RhZy5UV09fQlxyXG4gICAgICAgICAgICAgIH0gKVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgICAgY2FzZSBCbG9ja1NldC5TQU1FX0RFTlNJVFk6XHJcbiAgICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICAgQ3ViZS5jcmVhdGVXaXRoTWFzcyggbW9kZWwuZW5naW5lLCBNYXRlcmlhbC5XT09ELCBWZWN0b3IyLlpFUk8sIDIsIHtcclxuICAgICAgICAgICAgICAgIHRhbmRlbTogc2FtZURlbnNpdHlUYW5kZW0uY3JlYXRlVGFuZGVtKCAnYmxvY2tBJyApLFxyXG4gICAgICAgICAgICAgICAgYWRqdXN0YWJsZU1hdGVyaWFsOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdGFnOiBNYXNzVGFnLlRIUkVFX0FcclxuICAgICAgICAgICAgICB9ICksXHJcbiAgICAgICAgICAgICAgQ3ViZS5jcmVhdGVXaXRoTWFzcyggbW9kZWwuZW5naW5lLCBNYXRlcmlhbC5XT09ELCBWZWN0b3IyLlpFUk8sIDQsIHtcclxuICAgICAgICAgICAgICAgIHRhbmRlbTogc2FtZURlbnNpdHlUYW5kZW0uY3JlYXRlVGFuZGVtKCAnYmxvY2tCJyApLFxyXG4gICAgICAgICAgICAgICAgYWRqdXN0YWJsZU1hdGVyaWFsOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdGFnOiBNYXNzVGFnLlRIUkVFX0JcclxuICAgICAgICAgICAgICB9IClcclxuICAgICAgICAgICAgXTtcclxuICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvciggYHVua25vd24gYmxvY2tTZXQ6ICR7YmxvY2tTZXR9YCApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuXHJcbiAgICAgIHJlZ2VuZXJhdGVNYXNzZXNDYWxsYmFjazogKCBtb2RlbCwgYmxvY2tTZXQsIG1hc3NlcyApID0+IHtcclxuICAgICAgICAvLyBTZWUgc3ViY2xhc3MgZm9yIGltcGxlbWVudGF0aW9uXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBwb3NpdGlvbk1hc3Nlc0NhbGxiYWNrOiAoIG1vZGVsLCBibG9ja1NldCwgbWFzc2VzICkgPT4ge1xyXG4gICAgICAgIHN3aXRjaCggYmxvY2tTZXQgKSB7XHJcbiAgICAgICAgICBjYXNlIEJsb2NrU2V0LlNBTUVfTUFTUzpcclxuICAgICAgICAgICAgbW9kZWwucG9zaXRpb25NYXNzZXNMZWZ0KCBbIG1hc3Nlc1sgMCBdIF0gKTtcclxuICAgICAgICAgICAgbW9kZWwucG9zaXRpb25NYXNzZXNSaWdodCggWyBtYXNzZXNbIDEgXSBdICk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBCbG9ja1NldC5TQU1FX1ZPTFVNRTpcclxuICAgICAgICAgICAgbW9kZWwucG9zaXRpb25NYXNzZXNMZWZ0KCBbIG1hc3Nlc1sgMCBdIF0gKTtcclxuICAgICAgICAgICAgbW9kZWwucG9zaXRpb25NYXNzZXNSaWdodCggWyBtYXNzZXNbIDEgXSBdICk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBCbG9ja1NldC5TQU1FX0RFTlNJVFk6XHJcbiAgICAgICAgICAgIG1vZGVsLnBvc2l0aW9uTWFzc2VzTGVmdCggWyBtYXNzZXNbIDAgXSBdICk7XHJcbiAgICAgICAgICAgIG1vZGVsLnBvc2l0aW9uTWFzc2VzUmlnaHQoIFsgbWFzc2VzWyAxIF0gXSApO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvciggYHVua25vd24gYmxvY2tTZXQ6ICR7YmxvY2tTZXR9YCApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XHJcblxyXG4gICAgc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcbiAgICAvLyBMZWZ0IHNjYWxlXHJcbiAgICB0aGlzLmF2YWlsYWJsZU1hc3Nlcy5wdXNoKCBuZXcgU2NhbGUoIHRoaXMuZW5naW5lLCB0aGlzLmdyYXZpdHlQcm9wZXJ0eSwge1xyXG4gICAgICBtYXRyaXg6IE1hdHJpeDMudHJhbnNsYXRpb24oIC0wLjc3LCAtU2NhbGUuU0NBTEVfQkFTRV9CT1VORFMubWluWSApLFxyXG4gICAgICBkaXNwbGF5VHlwZTogRGlzcGxheVR5cGUuTkVXVE9OUyxcclxuICAgICAgY2FuTW92ZTogdHJ1ZSxcclxuICAgICAgdGFuZGVtOiBwcm92aWRlZE9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2xlZnRTY2FsZScgKVxyXG4gICAgfSApICk7XHJcblxyXG4gICAgLy8gUG9vbCBzY2FsZVxyXG4gICAgY29uc3QgcG9vbFNjYWxlID0gbmV3IFNjYWxlKCB0aGlzLmVuZ2luZSwgdGhpcy5ncmF2aXR5UHJvcGVydHksIHtcclxuICAgICAgbWF0cml4OiBNYXRyaXgzLnRyYW5zbGF0aW9uKCAwLjMsIC1TY2FsZS5TQ0FMRV9CQVNFX0JPVU5EUy5taW5ZICsgdGhpcy5wb29sQm91bmRzLm1pblkgKSxcclxuICAgICAgZGlzcGxheVR5cGU6IERpc3BsYXlUeXBlLk5FV1RPTlMsXHJcbiAgICAgIGNhbk1vdmU6IHRydWUsXHJcbiAgICAgIHRhbmRlbTogcHJvdmlkZWRPcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdwb29sU2NhbGUnIClcclxuICAgIH0gKTtcclxuICAgIHRoaXMuYXZhaWxhYmxlTWFzc2VzLnB1c2goIHBvb2xTY2FsZSApO1xyXG5cclxuICAgIC8vIEFkanVzdCBwb29sIHZvbHVtZSBzbyB0aGF0IGl0J3MgYXQgdGhlIGRlc2lyZWQgdmFsdWUgV0lUSCB0aGUgcG9vbCBzY2FsZSBpbnNpZGUuXHJcbiAgICB0aGlzLnBvb2wubGlxdWlkVm9sdW1lUHJvcGVydHkudmFsdWUgLT0gcG9vbFNjYWxlLnZvbHVtZVByb3BlcnR5LnZhbHVlO1xyXG4gICAgdGhpcy5wb29sLmxpcXVpZFZvbHVtZVByb3BlcnR5LnNldEluaXRpYWxWYWx1ZSggdGhpcy5wb29sLmxpcXVpZFZvbHVtZVByb3BlcnR5LnZhbHVlICk7XHJcbiAgfVxyXG59XHJcblxyXG5kZW5zaXR5QnVveWFuY3lDb21tb24ucmVnaXN0ZXIoICdCdW95YW5jeUludHJvTW9kZWwnLCBCdW95YW5jeUludHJvTW9kZWwgKTtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLE9BQU8sTUFBTSwrQkFBK0I7QUFFbkQsT0FBT0MsT0FBTyxNQUFNLCtCQUErQjtBQUNuRCxPQUFPQyxXQUFXLE1BQU0seUNBQXlDO0FBQ2pFLE9BQU9DLGdCQUFnQixNQUFNLDhDQUE4QztBQUMzRSxPQUFPQyxTQUFTLE1BQTRCLHVDQUF1QztBQUNuRixPQUFPQyxhQUFhLE1BQWdDLHFDQUFxQztBQUN6RixPQUFPQyxJQUFJLE1BQU0sNEJBQTRCO0FBQzdDLE9BQU9DLFFBQVEsTUFBTSxnQ0FBZ0M7QUFDckQsT0FBT0MsS0FBSyxJQUFJQyxXQUFXLFFBQVEsNkJBQTZCO0FBQ2hFLE9BQU9DLHFCQUFxQixNQUFNLGdDQUFnQztBQUNsRSxTQUFTQyxPQUFPLFFBQVEsNEJBQTRCO0FBRXBELE9BQU8sTUFBTUMsUUFBUSxTQUFTVCxnQkFBZ0IsQ0FBQztFQUM3QyxPQUF1QlUsU0FBUyxHQUFHLElBQUlELFFBQVEsQ0FBQyxDQUFDO0VBQ2pELE9BQXVCRSxXQUFXLEdBQUcsSUFBSUYsUUFBUSxDQUFDLENBQUM7RUFDbkQsT0FBdUJHLFlBQVksR0FBRyxJQUFJSCxRQUFRLENBQUMsQ0FBQztFQUVwRCxPQUF1QkksV0FBVyxHQUFHLElBQUlkLFdBQVcsQ0FBRVUsUUFBUSxFQUFFO0lBQzlESyxtQkFBbUIsRUFBRTtFQUN2QixDQUFFLENBQUM7QUFDTDtBQUlBLGVBQWUsTUFBTUMsa0JBQWtCLFNBQVNiLGFBQWEsQ0FBVztFQUMvRGMsV0FBV0EsQ0FBRUMs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