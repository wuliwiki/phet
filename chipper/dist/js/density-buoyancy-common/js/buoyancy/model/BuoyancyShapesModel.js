// Copyright 2019-2023, University of Colorado Boulder

/**
 * The main model for the Shapes screen of the Buoyancy simulation.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

import BooleanProperty from '../../../../axon/js/BooleanProperty.js';
import EnumerationProperty from '../../../../axon/js/EnumerationProperty.js';
import Multilink from '../../../../axon/js/Multilink.js';
import NumberProperty from '../../../../axon/js/NumberProperty.js';
import Property from '../../../../axon/js/Property.js';
import Matrix3 from '../../../../dot/js/Matrix3.js';
import optionize from '../../../../phet-core/js/optionize.js';
import PhetioCapsule from '../../../../tandem/js/PhetioCapsule.js';
import Cone from '../../common/model/Cone.js';
import Cuboid from '../../common/model/Cuboid.js';
import DensityBuoyancyModel from '../../common/model/DensityBuoyancyModel.js';
import Ellipsoid from '../../common/model/Ellipsoid.js';
import HorizontalCylinder from '../../common/model/HorizontalCylinder.js';
import Mass, { MassTag } from '../../common/model/Mass.js';
import Material from '../../common/model/Material.js';
import Scale, { DisplayType } from '../../common/model/Scale.js';
import TwoBlockMode from '../../common/model/TwoBlockMode.js';
import VerticalCylinder from '../../common/model/VerticalCylinder.js';
import densityBuoyancyCommon from '../../densityBuoyancyCommon.js';
import { MassShape } from '../../common/model/MassShape.js';
const MATERIAL = Material.WOOD;
export default class BuoyancyShapesModel extends DensityBuoyancyModel {
  constructor(providedOptions) {
    const options = optionize()({
      initialForceScale: 1 / 4
    }, providedOptions);
    const tandem = options.tandem;
    super(options);
    this.modeProperty = new EnumerationProperty(TwoBlockMode.ONE_BLOCK, {
      tandem: tandem.createTandem('modeProperty')
    });
    this.secondaryMassVisibleProperty = new BooleanProperty(false);
    this.densityExpandedProperty = new BooleanProperty(false);
    this.leftScale = new Scale(this.engine, this.gravityProperty, {
      matrix: Matrix3.translation(-0.7, -Scale.SCALE_BASE_BOUNDS.minY),
      displayType: DisplayType.NEWTONS,
      tandem: tandem.createTandem('leftScale'),
      canMove: true
    });
    this.availableMasses.push(this.leftScale);
    this.poolScale = new Scale(this.engine, this.gravityProperty, {
      matrix: Matrix3.translation(0.3, -Scale.SCALE_BASE_BOUNDS.minY + this.poolBounds.minY),
      displayType: DisplayType.NEWTONS,
      tandem: tandem.createTandem('poolScale'),
      canMove: true
    });
    this.availableMasses.push(this.poolScale);

    // Adjust pool volume so that it's at the desired value WITH the pool scale inside.
    this.pool.liquidVolumeProperty.value -= this.poolScale.volumeProperty.value;
    this.pool.liquidVolumeProperty.setInitialValue(this.pool.liquidVolumeProperty.value);
    this.primaryShapeProperty = new EnumerationProperty(MassShape.BLOCK, {
      tandem: tandem.createTandem('primaryShapeProperty')
    });
    this.secondaryShapeProperty = new EnumerationProperty(MassShape.INVERTED_CONE, {
      tandem: tandem.createTandem('secondaryShapeProperty')
    });
    this.primaryWidthRatioProperty = new NumberProperty(0.25);
    this.secondaryWidthRatioProperty = new NumberProperty(0.25);
    this.primaryHeightRatioProperty = new NumberProperty(0.75);
    this.secondaryHeightRatioProperty = new NumberProperty(0.75);
    const createMass = (tandem, shape, widthRatio, heightRatio, tag) => {
      const massOptions = {
        material: MATERIAL,
        tandem: tandem,
        tag: tag
      };
      switch (shape) {
        case MassShape.BLOCK:
          return new Cuboid(this.engine, Cuboid.getSizeFromRatios(widthRatio, heightRatio), massOptions);
        case MassShape.ELLIPSOID:
          return new Ellipsoid(this.engine, Ellipsoid.getSizeFromRatios(widthRatio, heightRatio), massOptions);
        case MassShape.VERTICAL_CYLINDER:
          return new VerticalCylinder(this.engine, VerticalCylinder.getRadiusFromRatio(widthRatio), VerticalCylinder.getHeightFromRatio(heightRatio), massOptions);
        case MassShape.HORIZONTAL_CYLINDER:
          return new HorizontalCylinder(this.engine, HorizontalCylinder.getRadiusFromRatio(heightRatio), HorizontalCylinder.getLengthFromRatio(widthRatio), massOptions);
        case MassShape.CONE:
          return new Cone(this.engine, Cone.getRadiusFromRatio(widthRatio), Cone.getHeightFromRatio(heightRatio), true, massOptions);
        case MassShape.INVERTED_CONE:
          return new Cone(this.engine, Cone.getRadiusFromRatio(widthRatio), Cone.getHeightFromRatio(heightRatio), false, massOptions);
        default:
          throw new Error(`shape not recognized: ${shape}`);
      }
    };
    const primaryMassCapsule = new PhetioCapsule((tandem, shape) => createMass(tandem, shape, this.primaryWidthRatioProperty.value, this.primaryHeightRatioProperty.value, MassTag.PRIMARY), [this.primaryShapeProperty.initialValue], {
      tandem: tandem.createTandem('objectACapsule'),
      phetioType: PhetioCapsule.PhetioCapsuleIO(Mass.MassIO)
    });
    const secondaryMassCapsule = new PhetioCapsule((tandem, shape) => createMass(tandem, shape, this.secondaryWidthRatioProperty.value, this.secondaryHeightRatioProperty.value, MassTag.SECONDARY), [this.secondaryShapeProperty.initialValue], {
      tandem: tandem.createTandem('objectBCapsule'),
      phetioType: PhetioCapsule.PhetioCapsuleIO(Mass.MassIO)
    });

    // Property doesn't need disposal, since everything here lives for the lifetime of the simulation
    this.primaryMassProperty = new Property(primaryMassCapsule.getElement(this.primaryShapeProperty.value));
    this.primaryShapeProperty.lazyLink(massShape => {
      if (primaryMassCapsule.hasElement() && !phet.joist.sim.isSettingPhetioStateProperty.value) {
        primaryMassCapsule.disposeElement();
      }
      this.primaryMassProperty.value = primaryMassCapsule.getElement(massShape);
    });
    primaryMassCapsule.elementCreatedEmitter.addListener(element => {
      this.primaryMassProperty.value = element;
    });

    // Property doesn't need disposal, since everything here lives for the lifetime of the simulation
    this.secondaryMassProperty = new Property(secondaryMassCapsule.getElement(this.secondaryShapeProperty.value));
    this.secondaryShapeProperty.lazyLink(massShape => {
      if (secondaryMassCapsule.hasElement() && !phet.joist.sim.isSettingPhetioStateProperty.value) {
        secondaryMassCapsule.disposeElement();
      }
      this.secondaryMassProperty.value = secondaryMassCapsule.getElement(massShape);
    });
    secondaryMassCapsule.elementCreatedEmitter.addListener(element => {
      this.secondaryMassProperty.value = element;
    });
    Multilink.lazyMultilink([this.primaryWidthRatioProperty, this.primaryHeightRatioProperty], (widthRatio, heightRatio) => {
      this.primaryMassProperty.value.setRatios(widthRatio, heightRatio);
    });
    Multilink.lazyMultilink([this.secondaryWidthRatioProperty, this.secondaryHeightRatioProperty], (widthRatio, heightRatio) => {
      this.secondaryMassProperty.value.setRatios(widthRatio, heightRatio);
    });

    // When a new mass is created, set up its position to be that of the old mass
    [this.primaryMassProperty, this.secondaryMassProperty].forEach(massProperty => {
      // This instance lives for the lifetime of the simulation, so we don't need to remove this listener
      massProperty.lazyLink((newMass, oldMass) => {
        if (!phet.joist.sim.isSettingPhetioStateProperty.value) {
          newMass.matrix.set(oldMass.matrix);
        }
        newMass.writeData();
        newMass.transformedEmitter.emit();
        if (this.availableMasses.includes(oldMass)) {
          this.availableMasses.remove(oldMass);
          this.availableMasses.add(newMass);
        }
      });
    });
    this.availableMasses.add(this.primaryMassProperty.value);
    this.availableMasses.add(this.secondaryMassProperty.value);
    this.modeProperty.link(mode => {
      this.secondaryMassProperty.value.internalVisibleProperty.value = mode === TwoBlockMode.TWO_BLOCKS;
    });
    this.setInitialPositions();
  }

  /**
   * Sets up the initial positions of the masses (since some resets may not change the mass).
   */
  setInitialPositions() {
    this.primaryMassProperty.value.matrix.setToTranslation(-0.3, 0);
    this.primaryMassProperty.value.writeData();
    this.primaryMassProperty.value.transformedEmitter.emit();
    this.secondaryMassProperty.value.matrix.setToTranslation(0.3, 0);
    this.secondaryMassProperty.value.writeData();
    this.secondaryMassProperty.value.transformedEmitter.emit();
  }

  /**
   * Resets things to their original values.
   */
  reset() {
    this.modeProperty.reset();
    this.secondaryMassVisibleProperty.reset();
    this.densityExpandedProperty.reset();
    this.primaryShapeProperty.reset();
    this.secondaryShapeProperty.reset();
    this.primaryHeightRatioProperty.reset();
    this.secondaryHeightRatioProperty.reset();
    this.primaryWidthRatioProperty.reset();
    this.secondaryWidthRatioProperty.reset();
    this.setInitialPositions();
    super.reset();
  }
}
densityBuoyancyCommon.register('BuoyancyShapesModel', BuoyancyShapesModel);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb29sZWFuUHJvcGVydHkiLCJFbnVtZXJhdGlvblByb3BlcnR5IiwiTXVsdGlsaW5rIiwiTnVtYmVyUHJvcGVydHkiLCJQcm9wZXJ0eSIsIk1hdHJpeDMiLCJvcHRpb25pemUiLCJQaGV0aW9DYXBzdWxlIiwiQ29uZSIsIkN1Ym9pZCIsIkRlbnNpdHlCdW95YW5jeU1vZGVsIiwiRWxsaXBzb2lkIiwiSG9yaXpvbnRhbEN5bGluZGVyIiwiTWFzcyIsIk1hc3NUYWciLCJNYXRlcmlhbCIsIlNjYWxlIiwiRGlzcGxheVR5cGUiLCJUd29CbG9ja01vZGUiLCJWZXJ0aWNhbEN5bGluZGVyIiwiZGVuc2l0eUJ1b3lhbmN5Q29tbW9uIiwiTWFzc1NoYXBlIiwiTUFURVJJQUwiLCJXT09EIiwiQnVveWFuY3lTaGFwZXNNb2RlbCIsImNvbnN0cnVjdG9yIiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsImluaXRpYWxGb3JjZVNjYWxlIiwidGFuZGVtIiwibW9kZVByb3BlcnR5IiwiT05FX0JMT0NLIiwiY3JlYXRlVGFuZGVtIiwic2Vjb25kYXJ5TWFzc1Zpc2libGVQcm9wZXJ0eSIsImRlbnNpdHlFeHBhbmRlZFByb3BlcnR5IiwibGVmdFNjYWxlIiwiZW5naW5lIiwiZ3Jhdml0eVByb3BlcnR5IiwibWF0cml4IiwidHJhbnNsYXRpb24iLCJTQ0FMRV9CQVNFX0JPVU5EUyIsIm1pblkiLCJkaXNwbGF5VHlwZSIsIk5FV1RPTlMiLCJjYW5Nb3ZlIiwiYXZhaWxhYmxlTWFzc2VzIiwicHVzaCIsInBvb2xTY2FsZSIsInBvb2xCb3VuZHMiLCJwb29sIiwibGlxdWlkVm9sdW1lUHJvcGVydHkiLCJ2YWx1ZSIsInZvbHVtZVByb3BlcnR5Iiwic2V0SW5pdGlhbFZhbHVlIiwicHJpbWFyeVNoYXBlUHJvcGVydHkiLCJCTE9DSyIsInNlY29uZGFyeVNoYXBlUHJvcGVydHkiLCJJTlZFUlRFRF9DT05FIiwicHJpbWFyeVdpZHRoUmF0aW9Qcm9wZXJ0eSIsInNlY29uZGFyeVdpZHRoUmF0aW9Qcm9wZXJ0eSIsInByaW1hcnlIZWlnaHRSYXRpb1Byb3BlcnR5Iiwic2Vjb25kYXJ5SGVpZ2h0UmF0aW9Qcm9wZXJ0eSIsImNyZWF0ZU1hc3MiLCJzaGFwZSIsIndpZHRoUmF0aW8iLCJoZWlnaHRSYXRpbyIsInRhZyIsIm1hc3NPcHRpb25zIiwibWF0ZXJpYWwiLCJnZXRTaXplRnJvbVJhdGlvcyIsIkVMTElQU09JRCIsIlZFUlRJQ0FMX0NZTElOREVSIiwiZ2V0UmFkaXVzRnJvbVJhdGlvIiwiZ2V0SGVpZ2h0RnJvbVJhdGlvIiwiSE9SSVpPTlRBTF9DWUxJTkRFUiIsImdldExlbmd0aEZyb21SYXRpbyIsIkNPTkUiLCJFcnJvciIsInByaW1hcnlNYXNzQ2Fwc3VsZSIsIlBSSU1BUlkiLCJpbml0aWFsVmFsdWUiLCJwaGV0aW9UeXBlIiwiUGhldGlvQ2Fwc3VsZUlPIiwiTWFzc0lPIiwic2Vjb25kYXJ5TWFzc0NhcHN1bGUiLCJTRUNPTkRBUlkiLCJwcmltYXJ5TWFzc1Byb3BlcnR5IiwiZ2V0RWxlbWVudCIsImxhenlMaW5rIiwibWFzc1NoYXBlIiwiaGFzRWxlbWVudCIsInBoZXQiLCJqb2lzdCIsInNpbSIsImlzU2V0dGluZ1BoZXRpb1N0YXRlUHJvcGVydHkiLCJkaXNwb3NlRWxlbWVudCIsImVsZW1lbnRDcmVhdGVkRW1pdHRlciIsImFkZExpc3RlbmVyIiwiZWxlbWVudCIsInNlY29uZGFyeU1hc3NQcm9wZXJ0eSIsImxhenlNdWx0aWxpbmsiLCJzZXRSYXRpb3MiLCJmb3JFYWNoIiwibWFzc1Byb3BlcnR5IiwibmV3TWFzcyIsIm9sZE1hc3MiLCJzZXQiLCJ3cml0ZURhdGEiLCJ0cmFuc2Zvcm1lZEVtaXR0ZXIiLCJlbWl0IiwiaW5jbHVkZXMiLCJyZW1vdmUiLCJhZGQiLCJsaW5rIiwibW9kZSIsImludGVybmFsVmlzaWJsZVByb3BlcnR5IiwiVFdPX0JMT0NLUyIsInNldEluaXRpYWxQb3NpdGlvbnMiLCJzZXRUb1RyYW5zbGF0aW9uIiwicmVzZXQiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkJ1b3lhbmN5U2hhcGVzTW9kZWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTktMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXHJcblxyXG4vKipcclxuICogVGhlIG1haW4gbW9kZWwgZm9yIHRoZSBTaGFwZXMgc2NyZWVuIG9mIHRoZSBCdW95YW5jeSBzaW11bGF0aW9uLlxyXG4gKlxyXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XHJcbiAqL1xyXG5cclxuaW1wb3J0IEJvb2xlYW5Qcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL0Jvb2xlYW5Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBFbnVtZXJhdGlvblByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvRW51bWVyYXRpb25Qcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBNdWx0aWxpbmsgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9NdWx0aWxpbmsuanMnO1xyXG5pbXBvcnQgTnVtYmVyUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9OdW1iZXJQcm9wZXJ0eS5qcyc7XHJcbmltcG9ydCBQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi8uLi9heG9uL2pzL1Byb3BlcnR5LmpzJztcclxuaW1wb3J0IE1hdHJpeDMgZnJvbSAnLi4vLi4vLi4vLi4vZG90L2pzL01hdHJpeDMuanMnO1xyXG5pbXBvcnQgb3B0aW9uaXplLCB7IEVtcHR5U2VsZk9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcclxuaW1wb3J0IFRhbmRlbSBmcm9tICcuLi8uLi8uLi8uLi90YW5kZW0vanMvVGFuZGVtLmpzJztcclxuaW1wb3J0IFBoZXRpb0NhcHN1bGUgZnJvbSAnLi4vLi4vLi4vLi4vdGFuZGVtL2pzL1BoZXRpb0NhcHN1bGUuanMnO1xyXG5pbXBvcnQgQ29uZSBmcm9tICcuLi8uLi9jb21tb24vbW9kZWwvQ29uZS5qcyc7XHJcbmltcG9ydCBDdWJvaWQgZnJvbSAnLi4vLi4vY29tbW9uL21vZGVsL0N1Ym9pZC5qcyc7XHJcbmltcG9ydCBEZW5zaXR5QnVveWFuY3lNb2RlbCwgeyBEZW5zaXR5QnVveWFuY3lNb2RlbE9wdGlvbnMgfSBmcm9tICcuLi8uLi9jb21tb24vbW9kZWwvRGVuc2l0eUJ1b3lhbmN5TW9kZWwuanMnO1xyXG5pbXBvcnQgRWxsaXBzb2lkIGZyb20gJy4uLy4uL2NvbW1vbi9tb2RlbC9FbGxpcHNvaWQuanMnO1xyXG5pbXBvcnQgSG9yaXpvbnRhbEN5bGluZGVyIGZyb20gJy4uLy4uL2NvbW1vbi9tb2RlbC9Ib3Jpem9udGFsQ3lsaW5kZXIuanMnO1xyXG5pbXBvcnQgTWFzcywgeyBNYXNzVGFnIH0gZnJvbSAnLi4vLi4vY29tbW9uL21vZGVsL01hc3MuanMnO1xyXG5pbXBvcnQgTWF0ZXJpYWwgZnJvbSAnLi4vLi4vY29tbW9uL21vZGVsL01hdGVyaWFsLmpzJztcclxuaW1wb3J0IFNjYWxlLCB7IERpc3BsYXlUeXBlIH0gZnJvbSAnLi4vLi4vY29tbW9uL21vZGVsL1NjYWxlLmpzJztcclxuaW1wb3J0IFR3b0Jsb2NrTW9kZSBmcm9tICcuLi8uLi9jb21tb24vbW9kZWwvVHdvQmxvY2tNb2RlLmpzJztcclxuaW1wb3J0IFZlcnRpY2FsQ3lsaW5kZXIgZnJvbSAnLi4vLi4vY29tbW9uL21vZGVsL1ZlcnRpY2FsQ3lsaW5kZXIuanMnO1xyXG5pbXBvcnQgZGVuc2l0eUJ1b3lhbmN5Q29tbW9uIGZyb20gJy4uLy4uL2RlbnNpdHlCdW95YW5jeUNvbW1vbi5qcyc7XHJcbmltcG9ydCB7IE1hc3NTaGFwZSB9IGZyb20gJy4uLy4uL2NvbW1vbi9tb2RlbC9NYXNzU2hhcGUuanMnO1xyXG5pbXBvcnQgVFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvVFByb3BlcnR5LmpzJztcclxuXHJcbmNvbnN0IE1BVEVSSUFMID0gTWF0ZXJpYWwuV09PRDtcclxuZXhwb3J0IHR5cGUgQnVveWFuY3lTaGFwZXNNb2RlbE9wdGlvbnMgPSBEZW5zaXR5QnVveWFuY3lNb2RlbE9wdGlvbnM7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCdW95YW5jeVNoYXBlc01vZGVsIGV4dGVuZHMgRGVuc2l0eUJ1b3lhbmN5TW9kZWwge1xyXG5cclxuICBwdWJsaWMgcmVhZG9ubHkgbW9kZVByb3BlcnR5OiBQcm9wZXJ0eTxUd29CbG9ja01vZGU+O1xyXG4gIHB1YmxpYyByZWFkb25seSBzZWNvbmRhcnlNYXNzVmlzaWJsZVByb3BlcnR5OiBQcm9wZXJ0eTxib29sZWFuPjtcclxuICBwdWJsaWMgcmVhZG9ubHkgZGVuc2l0eUV4cGFuZGVkUHJvcGVydHk6IFByb3BlcnR5PGJvb2xlYW4+O1xyXG4gIHB1YmxpYyByZWFkb25seSBsZWZ0U2NhbGU6IFNjYWxlO1xyXG4gIHB1YmxpYyByZWFkb25seSBwb29sU2NhbGU6IFNjYWxlO1xyXG4gIHB1YmxpYyByZWFkb25seSBwcmltYXJ5U2hhcGVQcm9wZXJ0eTogUHJvcGVydHk8TWFzc1NoYXBlPjtcclxuICBwdWJsaWMgcmVhZG9ubHkgc2Vjb25kYXJ5U2hhcGVQcm9wZXJ0eTogUHJvcGVydHk8TWFzc1NoYXBlPjtcclxuICBwdWJsaWMgcmVhZG9ubHkgcHJpbWFyeVdpZHRoUmF0aW9Qcm9wZXJ0eTogUHJvcGVydHk8bnVtYmVyPjtcclxuICBwdWJsaWMgcmVhZG9ubHkgc2Vjb25kYXJ5V2lkdGhSYXRpb1Byb3BlcnR5OiBQcm9wZXJ0eTxudW1iZXI+O1xyXG4gIHB1YmxpYyByZWFkb25seSBwcmltYXJ5SGVpZ2h0UmF0aW9Qcm9wZXJ0eTogUHJvcGVydHk8bnVtYmVyPjtcclxuICBwdWJsaWMgcmVhZG9ubHkgc2Vjb25kYXJ5SGVpZ2h0UmF0aW9Qcm9wZXJ0eTogUHJvcGVydHk8bnVtYmVyPjtcclxuXHJcbiAgcHVibGljIHJlYWRvbmx5IHByaW1hcnlNYXNzUHJvcGVydHk6IFRQcm9wZXJ0eTxNYXNzPjtcclxuICBwdWJsaWMgcmVhZG9ubHkgc2Vjb25kYXJ5TWFzc1Byb3BlcnR5OiBUUHJvcGVydHk8TWFzcz47XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggcHJvdmlkZWRPcHRpb25zOiBCdW95YW5jeVNoYXBlc01vZGVsT3B0aW9ucyApIHtcclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8RGVuc2l0eUJ1b3lhbmN5TW9kZWxPcHRpb25zLCBFbXB0eVNlbGZPcHRpb25zLCBEZW5zaXR5QnVveWFuY3lNb2RlbE9wdGlvbnM+KCkoIHtcclxuICAgICAgaW5pdGlhbEZvcmNlU2NhbGU6IDEgLyA0XHJcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcclxuXHJcbiAgICBjb25zdCB0YW5kZW0gPSBvcHRpb25zLnRhbmRlbTtcclxuXHJcbiAgICBzdXBlciggb3B0aW9ucyApO1xyXG5cclxuICAgIHRoaXMubW9kZVByb3BlcnR5ID0gbmV3IEVudW1lcmF0aW9uUHJvcGVydHkoIFR3b0Jsb2NrTW9kZS5PTkVfQkxPQ0ssIHtcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnbW9kZVByb3BlcnR5JyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5zZWNvbmRhcnlNYXNzVmlzaWJsZVByb3BlcnR5ID0gbmV3IEJvb2xlYW5Qcm9wZXJ0eSggZmFsc2UgKTtcclxuICAgIHRoaXMuZGVuc2l0eUV4cGFuZGVkUHJvcGVydHkgPSBuZXcgQm9vbGVhblByb3BlcnR5KCBmYWxzZSApO1xyXG5cclxuICAgIHRoaXMubGVmdFNjYWxlID0gbmV3IFNjYWxlKCB0aGlzLmVuZ2luZSwgdGhpcy5ncmF2aXR5UHJvcGVydHksIHtcclxuICAgICAgbWF0cml4OiBNYXRyaXgzLnRyYW5zbGF0aW9uKCAtMC43LCAtU2NhbGUuU0NBTEVfQkFTRV9CT1VORFMubWluWSApLFxyXG4gICAgICBkaXNwbGF5VHlwZTogRGlzcGxheVR5cGUuTkVXVE9OUyxcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAnbGVmdFNjYWxlJyApLFxyXG4gICAgICBjYW5Nb3ZlOiB0cnVlXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLmF2YWlsYWJsZU1hc3Nlcy5wdXNoKCB0aGlzLmxlZnRTY2FsZSApO1xyXG5cclxuICAgIHRoaXMucG9vbFNjYWxlID0gbmV3IFNjYWxlKCB0aGlzLmVuZ2luZSwgdGhpcy5ncmF2aXR5UHJvcGVydHksIHtcclxuICAgICAgbWF0cml4OiBNYXRyaXgzLnRyYW5zbGF0aW9uKCAwLjMsIC1TY2FsZS5TQ0FMRV9CQVNFX0JPVU5EUy5taW5ZICsgdGhpcy5wb29sQm91bmRzLm1pblkgKSxcclxuICAgICAgZGlzcGxheVR5cGU6IERpc3BsYXlUeXBlLk5FV1RPTlMsXHJcbiAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3Bvb2xTY2FsZScgKSxcclxuICAgICAgY2FuTW92ZTogdHJ1ZVxyXG4gICAgfSApO1xyXG4gICAgdGhpcy5hdmFpbGFibGVNYXNzZXMucHVzaCggdGhpcy5wb29sU2NhbGUgKTtcclxuXHJcbiAgICAvLyBBZGp1c3QgcG9vbCB2b2x1bWUgc28gdGhhdCBpdCdzIGF0IHRoZSBkZXNpcmVkIHZhbHVlIFdJVEggdGhlIHBvb2wgc2NhbGUgaW5zaWRlLlxyXG4gICAgdGhpcy5wb29sLmxpcXVpZFZvbHVtZVByb3BlcnR5LnZhbHVlIC09IHRoaXMucG9vbFNjYWxlLnZvbHVtZVByb3BlcnR5LnZhbHVlO1xyXG4gICAgdGhpcy5wb29sLmxpcXVpZFZvbHVtZVByb3BlcnR5LnNldEluaXRpYWxWYWx1ZSggdGhpcy5wb29sLmxpcXVpZFZvbHVtZVByb3BlcnR5LnZhbHVlICk7XHJcblxyXG4gICAgdGhpcy5wcmltYXJ5U2hhcGVQcm9wZXJ0eSA9IG5ldyBFbnVtZXJhdGlvblByb3BlcnR5KCBNYXNzU2hhcGUuQkxPQ0ssIHtcclxuICAgICAgdGFuZGVtOiB0YW5kZW0uY3JlYXRlVGFuZGVtKCAncHJpbWFyeVNoYXBlUHJvcGVydHknIClcclxuICAgIH0gKTtcclxuICAgIHRoaXMuc2Vjb25kYXJ5U2hhcGVQcm9wZXJ0eSA9IG5ldyBFbnVtZXJhdGlvblByb3BlcnR5KCBNYXNzU2hhcGUuSU5WRVJURURfQ09ORSwge1xyXG4gICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdzZWNvbmRhcnlTaGFwZVByb3BlcnR5JyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5wcmltYXJ5V2lkdGhSYXRpb1Byb3BlcnR5ID0gbmV3IE51bWJlclByb3BlcnR5KCAwLjI1ICk7XHJcbiAgICB0aGlzLnNlY29uZGFyeVdpZHRoUmF0aW9Qcm9wZXJ0eSA9IG5ldyBOdW1iZXJQcm9wZXJ0eSggMC4yNSApO1xyXG5cclxuICAgIHRoaXMucHJpbWFyeUhlaWdodFJhdGlvUHJvcGVydHkgPSBuZXcgTnVtYmVyUHJvcGVydHkoIDAuNzUgKTtcclxuICAgIHRoaXMuc2Vjb25kYXJ5SGVpZ2h0UmF0aW9Qcm9wZXJ0eSA9IG5ldyBOdW1iZXJQcm9wZXJ0eSggMC43NSApO1xyXG5cclxuICAgIGNvbnN0IGNyZWF0ZU1hc3MgPSAoIHRhbmRlbTogVGFuZGVtLCBzaGFwZTogTWFzc1NoYXBlLCB3aWR0aFJhdGlvOiBudW1iZXIsIGhlaWdodFJhdGlvOiBudW1iZXIsIHRhZzogTWFzc1RhZyApOiBNYXNzID0+IHtcclxuICAgICAgY29uc3QgbWFzc09wdGlvbnMgPSB7XHJcbiAgICAgICAgbWF0ZXJpYWw6IE1BVEVSSUFMLFxyXG4gICAgICAgIHRhbmRlbTogdGFuZGVtLFxyXG4gICAgICAgIHRhZzogdGFnXHJcbiAgICAgIH07XHJcbiAgICAgIHN3aXRjaCggc2hhcGUgKSB7XHJcbiAgICAgICAgY2FzZSBNYXNzU2hhcGUuQkxPQ0s6XHJcbiAgICAgICAgICByZXR1cm4gbmV3IEN1Ym9pZCggdGhpcy5lbmdpbmUsIEN1Ym9pZC5nZXRTaXplRnJvbVJhdGlvcyggd2lkdGhSYXRpbywgaGVpZ2h0UmF0aW8gKSwgbWFzc09wdGlvbnMgKTtcclxuICAgICAgICBjYXNlIE1hc3NTaGFwZS5FTExJUFNPSUQ6XHJcbiAgICAgICAgICByZXR1cm4gbmV3IEVsbGlwc29pZCggdGhpcy5lbmdpbmUsIEVsbGlwc29pZC5nZXRTaXplRnJvbVJhdGlvcyggd2lkdGhSYXRpbywgaGVpZ2h0UmF0aW8gKSwgbWFzc09wdGlvbnMgKTtcclxuICAgICAgICBjYXNlIE1hc3NTaGFwZS5WRVJUSUNBTF9DWUxJTkRFUjpcclxuICAgICAgICAgIHJldHVybiBuZXcgVmVydGljYWxDeWxpbmRlcihcclxuICAgICAgICAgICAgdGhpcy5lbmdpbmUsXHJcbiAgICAgICAgICAgIFZlcnRpY2FsQ3lsaW5kZXIuZ2V0UmFkaXVzRnJvbVJhdGlvKCB3aWR0aFJhdGlvICksXHJcbiAgICAgICAgICAgIFZlcnRpY2FsQ3lsaW5kZXIuZ2V0SGVpZ2h0RnJvbVJhdGlvKCBoZWlnaHRSYXRpbyApLFxyXG4gICAgICAgICAgICBtYXNzT3B0aW9uc1xyXG4gICAgICAgICAgKTtcclxuICAgICAgICBjYXNlIE1hc3NTaGFwZS5IT1JJWk9OVEFMX0NZTElOREVSOlxyXG4gICAgICAgICAgcmV0dXJuIG5ldyBIb3Jpem9udGFsQ3lsaW5kZXIoXHJcbiAgICAgICAgICAgIHRoaXMuZW5naW5lLFxyXG4gICAgICAgICAgICBIb3Jpem9udGFsQ3lsaW5kZXIuZ2V0UmFkaXVzRnJvbVJhdGlvKCBoZWlnaHRSYXRpbyApLFxyXG4gICAgICAgICAgICBIb3Jpem9udGFsQ3lsaW5kZXIuZ2V0TGVuZ3RoRnJvbVJhdGlvKCB3aWR0aFJhdGlvICksXHJcbiAgICAgICAgICAgIG1hc3NPcHRpb25zXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIGNhc2UgTWFzc1NoYXBlLkNPTkU6XHJcbiAgICAgICAgICByZXR1cm4gbmV3IENvbmUoXHJcbiAgICAgICAgICAgIHRoaXMuZW5naW5lLFxyXG4gICAgICAgICAgICBDb25lLmdldFJhZGl1c0Zyb21SYXRpbyggd2lkdGhSYXRpbyApLFxyXG4gICAgICAgICAgICBDb25lLmdldEhlaWdodEZyb21SYXRpbyggaGVpZ2h0UmF0aW8gKSxcclxuICAgICAgICAgICAgdHJ1ZSxcclxuICAgICAgICAgICAgbWFzc09wdGlvbnNcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgY2FzZSBNYXNzU2hhcGUuSU5WRVJURURfQ09ORTpcclxuICAgICAgICAgIHJldHVybiBuZXcgQ29uZShcclxuICAgICAgICAgICAgdGhpcy5lbmdpbmUsXHJcbiAgICAgICAgICAgIENvbmUuZ2V0UmFkaXVzRnJvbVJhdGlvKCB3aWR0aFJhdGlvICksXHJcbiAgICAgICAgICAgIENvbmUuZ2V0SGVpZ2h0RnJvbVJhdGlvKCBoZWlnaHRSYXRpbyApLFxyXG4gICAgICAgICAgICBmYWxzZSxcclxuICAgICAgICAgICAgbWFzc09wdGlvbnNcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvciggYHNoYXBlIG5vdCByZWNvZ25pemVkOiAke3NoYXBlfWAgKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBwcmltYXJ5TWFzc0NhcHN1bGUgPSBuZXcgUGhldGlvQ2Fwc3VsZShcclxuICAgICAgKCB0YW5kZW06IFRhbmRlbSwgc2hhcGU6IE1hc3NTaGFwZSApID0+IGNyZWF0ZU1hc3MoIHRhbmRlbSwgc2hhcGUsIHRoaXMucHJpbWFyeVdpZHRoUmF0aW9Qcm9wZXJ0eS52YWx1ZSwgdGhpcy5wcmltYXJ5SGVpZ2h0UmF0aW9Qcm9wZXJ0eS52YWx1ZSwgTWFzc1RhZy5QUklNQVJZICksXHJcbiAgICAgIFsgdGhpcy5wcmltYXJ5U2hhcGVQcm9wZXJ0eS5pbml0aWFsVmFsdWUgXSwge1xyXG4gICAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ29iamVjdEFDYXBzdWxlJyApLFxyXG4gICAgICAgIHBoZXRpb1R5cGU6IFBoZXRpb0NhcHN1bGUuUGhldGlvQ2Fwc3VsZUlPKCBNYXNzLk1hc3NJTyApXHJcbiAgICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCBzZWNvbmRhcnlNYXNzQ2Fwc3VsZSA9IG5ldyBQaGV0aW9DYXBzdWxlKFxyXG4gICAgICAoIHRhbmRlbTogVGFuZGVtLCBzaGFwZTogTWFzc1NoYXBlICkgPT4gY3JlYXRlTWFzcyggdGFuZGVtLCBzaGFwZSwgdGhpcy5zZWNvbmRhcnlXaWR0aFJhdGlvUHJvcGVydHkudmFsdWUsIHRoaXMuc2Vjb25kYXJ5SGVpZ2h0UmF0aW9Qcm9wZXJ0eS52YWx1ZSwgTWFzc1RhZy5TRUNPTkRBUlkgKSxcclxuICAgICAgWyB0aGlzLnNlY29uZGFyeVNoYXBlUHJvcGVydHkuaW5pdGlhbFZhbHVlIF0sIHtcclxuICAgICAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdvYmplY3RCQ2Fwc3VsZScgKSxcclxuICAgICAgICBwaGV0aW9UeXBlOiBQaGV0aW9DYXBzdWxlLlBoZXRpb0NhcHN1bGVJTyggTWFzcy5NYXNzSU8gKVxyXG4gICAgICB9ICk7XHJcblxyXG4gICAgLy8gUHJvcGVydHkgZG9lc24ndCBuZWVkIGRpc3Bvc2FsLCBzaW5jZSBldmVyeXRoaW5nIGhlcmUgbGl2ZXMgZm9yIHRoZSBsaWZldGltZSBvZiB0aGUgc2ltdWxhdGlvblxyXG4gICAgdGhpcy5wcmltYXJ5TWFzc1Byb3BlcnR5ID0gbmV3IFByb3BlcnR5KCBwcmltYXJ5TWFzc0NhcHN1bGUuZ2V0RWxlbWVudCggdGhpcy5wcmltYXJ5U2hhcGVQcm9wZXJ0eS52YWx1ZSApICk7XHJcbiAgICB0aGlzLnByaW1hcnlTaGFwZVByb3BlcnR5LmxhenlMaW5rKCAoIG1hc3NTaGFwZTogTWFzc1NoYXBlICkgPT4ge1xyXG4gICAgICBpZiAoIHByaW1hcnlNYXNzQ2Fwc3VsZS5oYXNFbGVtZW50KCkgJiYgIXBoZXQuam9pc3Quc2ltLmlzU2V0dGluZ1BoZXRpb1N0YXRlUHJvcGVydHkudmFsdWUgKSB7XHJcbiAgICAgICAgcHJpbWFyeU1hc3NDYXBzdWxlLmRpc3Bvc2VFbGVtZW50KCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5wcmltYXJ5TWFzc1Byb3BlcnR5LnZhbHVlID0gcHJpbWFyeU1hc3NDYXBzdWxlLmdldEVsZW1lbnQoIG1hc3NTaGFwZSApO1xyXG4gICAgfSApO1xyXG4gICAgcHJpbWFyeU1hc3NDYXBzdWxlLmVsZW1lbnRDcmVhdGVkRW1pdHRlci5hZGRMaXN0ZW5lciggZWxlbWVudCA9PiB7XHJcbiAgICAgIHRoaXMucHJpbWFyeU1hc3NQcm9wZXJ0eS52YWx1ZSA9IGVsZW1lbnQ7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgLy8gUHJvcGVydHkgZG9lc24ndCBuZWVkIGRpc3Bvc2FsLCBzaW5jZSBldmVyeXRoaW5nIGhlcmUgbGl2ZXMgZm9yIHRoZSBsaWZldGltZSBvZiB0aGUgc2ltdWxhdGlvblxyXG4gICAgdGhpcy5zZWNvbmRhcnlNYXNzUHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIHNlY29uZGFyeU1hc3NDYXBzdWxlLmdldEVsZW1lbnQoIHRoaXMuc2Vjb25kYXJ5U2hhcGVQcm9wZXJ0eS52YWx1ZSApICk7XHJcbiAgICB0aGlzLnNlY29uZGFyeVNoYXBlUHJvcGVydHkubGF6eUxpbmsoICggbWFzc1NoYXBlOiBNYXNzU2hhcGUgKSA9PiB7XHJcbiAgICAgIGlmICggc2Vjb25kYXJ5TWFzc0NhcHN1bGUuaGFzRWxlbWVudCgpICYmICFwaGV0LmpvaXN0LnNpbS5pc1NldHRpbmdQaGV0aW9TdGF0ZVByb3BlcnR5LnZhbHVlICkge1xyXG4gICAgICAgIHNlY29uZGFyeU1hc3NDYXBzdWxlLmRpc3Bvc2VFbGVtZW50KCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5zZWNvbmRhcnlNYXNzUHJvcGVydHkudmFsdWUgPSBzZWNvbmRhcnlNYXNzQ2Fwc3VsZS5nZXRFbGVtZW50KCBtYXNzU2hhcGUgKTtcclxuICAgIH0gKTtcclxuICAgIHNlY29uZGFyeU1hc3NDYXBzdWxlLmVsZW1lbnRDcmVhdGVkRW1pdHRlci5hZGRMaXN0ZW5lciggZWxlbWVudCA9PiB7XHJcbiAgICAgIHRoaXMuc2Vjb25kYXJ5TWFzc1Byb3BlcnR5LnZhbHVlID0gZWxlbWVudDtcclxuICAgIH0gKTtcclxuXHJcbiAgICBNdWx0aWxpbmsubGF6eU11bHRpbGluayggWyB0aGlzLnByaW1hcnlXaWR0aFJhdGlvUHJvcGVydHksIHRoaXMucHJpbWFyeUhlaWdodFJhdGlvUHJvcGVydHkgXSwgKCB3aWR0aFJhdGlvLCBoZWlnaHRSYXRpbyApID0+IHtcclxuICAgICAgdGhpcy5wcmltYXJ5TWFzc1Byb3BlcnR5LnZhbHVlLnNldFJhdGlvcyggd2lkdGhSYXRpbywgaGVpZ2h0UmF0aW8gKTtcclxuICAgIH0gKTtcclxuICAgIE11bHRpbGluay5sYXp5TXVsdGlsaW5rKCBbIHRoaXMuc2Vjb25kYXJ5V2lkdGhSYXRpb1Byb3BlcnR5LCB0aGlzLnNlY29uZGFyeUhlaWdodFJhdGlvUHJvcGVydHkgXSwgKCB3aWR0aFJhdGlvLCBoZWlnaHRSYXRpbyApID0+IHtcclxuICAgICAgdGhpcy5zZWNvbmRhcnlNYXNzUHJvcGVydHkudmFsdWUuc2V0UmF0aW9zKCB3aWR0aFJhdGlvLCBoZWlnaHRSYXRpbyApO1xyXG4gICAgfSApO1xyXG5cclxuICAgIC8vIFdoZW4gYSBuZXcgbWFzcyBpcyBjcmVhdGVkLCBzZXQgdXAgaXRzIHBvc2l0aW9uIHRvIGJlIHRoYXQgb2YgdGhlIG9sZCBtYXNzXHJcbiAgICBbIHRoaXMucHJpbWFyeU1hc3NQcm9wZXJ0eSwgdGhpcy5zZWNvbmRhcnlNYXNzUHJvcGVydHkgXS5mb3JFYWNoKCBtYXNzUHJvcGVydHkgPT4ge1xyXG4gICAgICAvLyBUaGlzIGluc3RhbmNlIGxpdmVzIGZvciB0aGUgbGlmZXRpbWUgb2YgdGhlIHNpbXVsYXRpb24sIHNvIHdlIGRvbid0IG5lZWQgdG8gcmVtb3ZlIHRoaXMgbGlzdGVuZXJcclxuICAgICAgbWFzc1Byb3BlcnR5LmxhenlMaW5rKCAoIG5ld01hc3MsIG9sZE1hc3MgKSA9PiB7XHJcbiAgICAgICAgaWYgKCAhcGhldC5qb2lzdC5zaW0uaXNTZXR0aW5nUGhldGlvU3RhdGVQcm9wZXJ0eS52YWx1ZSApIHtcclxuICAgICAgICAgIG5ld01hc3MubWF0cml4LnNldCggb2xkTWFzcy5tYXRyaXggKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbmV3TWFzcy53cml0ZURhdGEoKTtcclxuICAgICAgICBuZXdNYXNzLnRyYW5zZm9ybWVkRW1pdHRlci5lbWl0KCk7XHJcblxyXG4gICAgICAgIGlmICggdGhpcy5hdmFpbGFibGVNYXNzZXMuaW5jbHVkZXMoIG9sZE1hc3MgKSApIHtcclxuICAgICAgICAgIHRoaXMuYXZhaWxhYmxlTWFzc2VzLnJlbW92ZSggb2xkTWFzcyApO1xyXG4gICAgICAgICAgdGhpcy5hdmFpbGFibGVNYXNzZXMuYWRkKCBuZXdNYXNzICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9ICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5hdmFpbGFibGVNYXNzZXMuYWRkKCB0aGlzLnByaW1hcnlNYXNzUHJvcGVydHkudmFsdWUgKTtcclxuICAgIHRoaXMuYXZhaWxhYmxlTWFzc2VzLmFkZCggdGhpcy5zZWNvbmRhcnlNYXNzUHJvcGVydHkudmFsdWUgKTtcclxuXHJcbiAgICB0aGlzLm1vZGVQcm9wZXJ0eS5saW5rKCBtb2RlID0+IHtcclxuICAgICAgdGhpcy5zZWNvbmRhcnlNYXNzUHJvcGVydHkudmFsdWUuaW50ZXJuYWxWaXNpYmxlUHJvcGVydHkudmFsdWUgPSBtb2RlID09PSBUd29CbG9ja01vZGUuVFdPX0JMT0NLUztcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLnNldEluaXRpYWxQb3NpdGlvbnMoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgdXAgdGhlIGluaXRpYWwgcG9zaXRpb25zIG9mIHRoZSBtYXNzZXMgKHNpbmNlIHNvbWUgcmVzZXRzIG1heSBub3QgY2hhbmdlIHRoZSBtYXNzKS5cclxuICAgKi9cclxuICBwcml2YXRlIHNldEluaXRpYWxQb3NpdGlvbnMoKTogdm9pZCB7XHJcbiAgICB0aGlzLnByaW1hcnlNYXNzUHJvcGVydHkudmFsdWUubWF0cml4LnNldFRvVHJhbnNsYXRpb24oIC0wLjMsIDAgKTtcclxuICAgIHRoaXMucHJpbWFyeU1hc3NQcm9wZXJ0eS52YWx1ZS53cml0ZURhdGEoKTtcclxuICAgIHRoaXMucHJpbWFyeU1hc3NQcm9wZXJ0eS52YWx1ZS50cmFuc2Zvcm1lZEVtaXR0ZXIuZW1pdCgpO1xyXG5cclxuICAgIHRoaXMuc2Vjb25kYXJ5TWFzc1Byb3BlcnR5LnZhbHVlLm1hdHJpeC5zZXRUb1RyYW5zbGF0aW9uKCAwLjMsIDAgKTtcclxuICAgIHRoaXMuc2Vjb25kYXJ5TWFzc1Byb3BlcnR5LnZhbHVlLndyaXRlRGF0YSgpO1xyXG4gICAgdGhpcy5zZWNvbmRhcnlNYXNzUHJvcGVydHkudmFsdWUudHJhbnNmb3JtZWRFbWl0dGVyLmVtaXQoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlc2V0cyB0aGluZ3MgdG8gdGhlaXIgb3JpZ2luYWwgdmFsdWVzLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBvdmVycmlkZSByZXNldCgpOiB2b2lkIHtcclxuICAgIHRoaXMubW9kZVByb3BlcnR5LnJlc2V0KCk7XHJcblxyXG4gICAgdGhpcy5zZWNvbmRhcnlNYXNzVmlzaWJsZVByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICB0aGlzLmRlbnNpdHlFeHBhbmRlZFByb3BlcnR5LnJlc2V0KCk7XHJcblxyXG4gICAgdGhpcy5wcmltYXJ5U2hhcGVQcm9wZXJ0eS5yZXNldCgpO1xyXG4gICAgdGhpcy5zZWNvbmRhcnlTaGFwZVByb3BlcnR5LnJlc2V0KCk7XHJcbiAgICB0aGlzLnByaW1hcnlIZWlnaHRSYXRpb1Byb3BlcnR5LnJlc2V0KCk7XHJcbiAgICB0aGlzLnNlY29uZGFyeUhlaWdodFJhdGlvUHJvcGVydHkucmVzZXQoKTtcclxuICAgIHRoaXMucHJpbWFyeVdpZHRoUmF0aW9Qcm9wZXJ0eS5yZXNldCgpO1xyXG4gICAgdGhpcy5zZWNvbmRhcnlXaWR0aFJhdGlvUHJvcGVydHkucmVzZXQoKTtcclxuXHJcbiAgICB0aGlzLnNldEluaXRpYWxQb3NpdGlvbnMoKTtcclxuXHJcbiAgICBzdXBlci5yZXNldCgpO1xyXG4gIH1cclxufVxyXG5cclxuZGVuc2l0eUJ1b3lhbmN5Q29tbW9uLnJlZ2lzdGVyKCAnQnVveWFuY3lTaGFwZXNNb2RlbCcsIEJ1b3lhbmN5U2hhcGVzTW9kZWwgKTtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGVBQWUsTUFBTSx3Q0FBd0M7QUFDcEUsT0FBT0MsbUJBQW1CLE1BQU0sNENBQTRDO0FBQzVFLE9BQU9DLFNBQVMsTUFBTSxrQ0FBa0M7QUFDeEQsT0FBT0MsY0FBYyxNQUFNLHVDQUF1QztBQUNsRSxPQUFPQyxRQUFRLE1BQU0saUNBQWlDO0FBQ3RELE9BQU9DLE9BQU8sTUFBTSwrQkFBK0I7QUFDbkQsT0FBT0MsU0FBUyxNQUE0Qix1Q0FBdUM7QUFFbkYsT0FBT0MsYUFBYSxNQUFNLHdDQUF3QztBQUNsRSxPQUFPQyxJQUFJLE1BQU0sNEJBQTRCO0FBQzdDLE9BQU9DLE1BQU0sTUFBTSw4QkFBOEI7QUFDakQsT0FBT0Msb0JBQW9CLE1BQXVDLDRDQUE0QztBQUM5RyxPQUFPQyxTQUFTLE1BQU0saUNBQWlDO0FBQ3ZELE9BQU9DLGtCQUFrQixNQUFNLDBDQUEwQztBQUN6RSxPQUFPQyxJQUFJLElBQUlDLE9BQU8sUUFBUSw0QkFBNEI7QUFDMUQsT0FBT0MsUUFBUSxNQUFNLGdDQUFnQztBQUNyRCxPQUFPQyxLQUFLLElBQUlDLFdBQVcsUUFBUSw2QkFBNkI7QUFDaEUsT0FBT0MsWUFBWSxNQUFNLG9DQUFvQztBQUM3RCxPQUFPQyxnQkFBZ0IsTUFBTSx3Q0FBd0M7QUFDckUsT0FBT0MscUJBQXFCLE1BQU0sZ0NBQWdDO0FBQ2xFLFNBQVNDLFNBQVMsUUFBUSxpQ0FBaUM7QUFHM0QsTUFBTUMsUUFBUSxHQUFHUCxRQUFRLENBQUNRLElBQUk7QUFHOUIsZUFBZSxNQUFNQyxtQkFBbUIsU0FBU2Qs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