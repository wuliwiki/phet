// Copyright 2015-2022, University of Colorado Boulder

/**
 * SpectrometerAccordionBox is the accordion box that contains the spectrometer.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */

import BooleanProperty from '../../../../axon/js/BooleanProperty.js';
import Dimension2 from '../../../../dot/js/Dimension2.js';
import optionize from '../../../../phet-core/js/optionize.js';
import RecordStopButton from '../../../../scenery-phet/js/buttons/RecordStopButton.js';
import ResetButton from '../../../../scenery-phet/js/buttons/ResetButton.js';
import PhetFont from '../../../../scenery-phet/js/PhetFont.js';
import { AlignBox, AlignGroup, HBox, Path, Rectangle, Text, VBox } from '../../../../scenery/js/imports.js';
import cameraSolidShape from '../../../../sherpa/js/fontawesome-5/cameraSolidShape.js';
import AccordionBox from '../../../../sun/js/AccordionBox.js';
import RectangularPushButton from '../../../../sun/js/buttons/RectangularPushButton.js';
import ToggleNode from '../../../../sun/js/ToggleNode.js';
import modelsOfTheHydrogenAtom from '../../modelsOfTheHydrogenAtom.js';
import ModelsOfTheHydrogenAtomStrings from '../../ModelsOfTheHydrogenAtomStrings.js';
import MOTHAColors from '../MOTHAColors.js';
import MOTHAConstants from '../MOTHAConstants.js';

// constants
const DISPLAY_SIZE = new Dimension2(510, 130);
export default class SpectrometerAccordionBox extends AccordionBox {
  constructor(numberOfSnapshotsProperty, providedOptions) {
    const options = optionize()({
      // AccordionBoxOptions
      fill: MOTHAColors.spectrometerAccordionBoxFillProperty,
      stroke: MOTHAColors.spectrometerAccordionBoxStrokeProperty,
      cornerRadius: 5,
      buttonXMargin: 8,
      buttonYMargin: 5,
      contentXMargin: 10,
      contentYMargin: 5,
      contentYSpacing: 0,
      buttonAlign: 'left',
      titleAlignX: 'left',
      titleXSpacing: 10,
      expandCollapseButtonOptions: {
        sideLength: 22,
        touchAreaXDilation: 10,
        touchAreaYDilation: 10
      }
    }, providedOptions);
    options.titleNode = new TitleNode(options.expandedProperty, options.tandem.createTandem('titleNode'));

    //TODO placeholder
    const displayNode = new Rectangle(0, 0, DISPLAY_SIZE.width, DISPLAY_SIZE.height, {
      cornerRadius: options.cornerRadius,
      fill: MOTHAColors.spectrometerFillProperty,
      stroke: MOTHAColors.spectrometerStrokeProperty
    });

    //TODO relocate, handle reset
    //TODO does this belong here?
    const recordingProperty = new BooleanProperty(false, {
      tandem: options.tandem.createTandem('recordingProperty')
    });
    recordingProperty.link(recording => {
      //TODO
    });
    const recordStopButton = new RecordStopButton(recordingProperty, {
      radius: 15,
      xMargin: 8.25,
      yMargin: 8.25,
      baseColor: MOTHAColors.pushButtonBaseColorProperty,
      touchAreaDilation: 5,
      tandem: options.tandem.createTandem('recordStopButton')
    });
    const resetButton = new ResetButton({
      baseColor: MOTHAColors.pushButtonBaseColorProperty,
      arrowColor: 'black',
      radius: recordStopButton.height / 2,
      xMargin: 4,
      yMargin: 4,
      touchAreaDilation: 5,
      listener: () => {
        //TODO
      },
      tandem: options.tandem.createTandem('resetButton')
    });
    const snapshotButton = new RectangularPushButton({
      maxHeight: recordStopButton.height,
      baseColor: MOTHAColors.pushButtonBaseColorProperty,
      content: new Path(cameraSolidShape, {
        fill: 'black',
        scale: 0.08
      }),
      touchAreaXDilation: 10,
      touchAreaYDilation: 5,
      listener: () => {
        numberOfSnapshotsProperty.value = Math.min(MOTHAConstants.MAX_SPECTROMETER_SNAPSHOTS, numberOfSnapshotsProperty.value + 1);
      },
      tandem: options.tandem.createTandem('snapshotButton')
    });
    const buttonGroup = new VBox({
      spacing: 10,
      align: 'center',
      children: [recordStopButton, resetButton, snapshotButton]
    });
    const contentNode = new HBox({
      spacing: 12,
      align: 'bottom',
      children: [displayNode, buttonGroup]
    });
    super(contentNode, options);
  }
  dispose() {
    assert && assert(false, 'dispose is not supported, exists for the lifetime of the sim');
    super.dispose();
  }
}
class TitleNode extends ToggleNode {
  constructor(expandedProperty, tandem) {
    // to ensure that both titles have the same effective size, and are left aligned
    const alignBoxOptions = {
      group: new AlignGroup(),
      xAlign: 'left'
    };
    const titleExpandedText = new AlignBox(new Text(ModelsOfTheHydrogenAtomStrings.spectrometerExpandedStringProperty, {
      font: new PhetFont({
        size: 16,
        weight: 'bold'
      }),
      fill: MOTHAColors.spectrometerTitleFillProperty,
      maxWidth: 290,
      tandem: tandem.createTandem('titleExpandedText')
    }), alignBoxOptions);
    const titleCollapsedText = new AlignBox(new Text(ModelsOfTheHydrogenAtomStrings.spectrometerCollapsedStringProperty, {
      font: new PhetFont({
        size: 16,
        weight: 'bold'
      }),
      fill: MOTHAColors.spectrometerTitleFillProperty,
      maxWidth: 290,
      tandem: tandem.createTandem('titleCollapsedText')
    }), alignBoxOptions);
    const items = [{
      value: true,
      createNode: tandem => titleExpandedText
    }, {
      value: false,
      createNode: tandem => titleCollapsedText
    }];
    super(expandedProperty, items, {
      tandem: tandem
    });
  }
  dispose() {
    assert && assert(false, 'dispose is not supported, exists for the lifetime of the sim');
    super.dispose();
  }
}
modelsOfTheHydrogenAtom.register('SpectrometerAccordionBox', SpectrometerAccordionBox);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb29sZWFuUHJvcGVydHkiLCJEaW1lbnNpb24yIiwib3B0aW9uaXplIiwiUmVjb3JkU3RvcEJ1dHRvbiIsIlJlc2V0QnV0dG9uIiwiUGhldEZvbnQiLCJBbGlnbkJveCIsIkFsaWduR3JvdXAiLCJIQm94IiwiUGF0aCIsIlJlY3RhbmdsZSIsIlRleHQiLCJWQm94IiwiY2FtZXJhU29saWRTaGFwZSIsIkFjY29yZGlvbkJveCIsIlJlY3Rhbmd1bGFyUHVzaEJ1dHRvbiIsIlRvZ2dsZU5vZGUiLCJtb2RlbHNPZlRoZUh5ZHJvZ2VuQXRvbSIsIk1vZGVsc09mVGhlSHlkcm9nZW5BdG9tU3RyaW5ncyIsIk1PVEhBQ29sb3JzIiwiTU9USEFDb25zdGFudHMiLCJESVNQTEFZX1NJWkUiLCJTcGVjdHJvbWV0ZXJBY2NvcmRpb25Cb3giLCJjb25zdHJ1Y3RvciIsIm51bWJlck9mU25hcHNob3RzUHJvcGVydHkiLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwiZmlsbCIsInNwZWN0cm9tZXRlckFjY29yZGlvbkJveEZpbGxQcm9wZXJ0eSIsInN0cm9rZSIsInNwZWN0cm9tZXRlckFjY29yZGlvbkJveFN0cm9rZVByb3BlcnR5IiwiY29ybmVyUmFkaXVzIiwiYnV0dG9uWE1hcmdpbiIsImJ1dHRvbllNYXJnaW4iLCJjb250ZW50WE1hcmdpbiIsImNvbnRlbnRZTWFyZ2luIiwiY29udGVudFlTcGFjaW5nIiwiYnV0dG9uQWxpZ24iLCJ0aXRsZUFsaWduWCIsInRpdGxlWFNwYWNpbmciLCJleHBhbmRDb2xsYXBzZUJ1dHRvbk9wdGlvbnMiLCJzaWRlTGVuZ3RoIiwidG91Y2hBcmVhWERpbGF0aW9uIiwidG91Y2hBcmVhWURpbGF0aW9uIiwidGl0bGVOb2RlIiwiVGl0bGVOb2RlIiwiZXhwYW5kZWRQcm9wZXJ0eSIsInRhbmRlbSIsImNyZWF0ZVRhbmRlbSIsImRpc3BsYXlOb2RlIiwid2lkdGgiLCJoZWlnaHQiLCJzcGVjdHJvbWV0ZXJGaWxsUHJvcGVydHkiLCJzcGVjdHJvbWV0ZXJTdHJva2VQcm9wZXJ0eSIsInJlY29yZGluZ1Byb3BlcnR5IiwibGluayIsInJlY29yZGluZyIsInJlY29yZFN0b3BCdXR0b24iLCJyYWRpdXMiLCJ4TWFyZ2luIiwieU1hcmdpbiIsImJhc2VDb2xvciIsInB1c2hCdXR0b25CYXNlQ29sb3JQcm9wZXJ0eSIsInRvdWNoQXJlYURpbGF0aW9uIiwicmVzZXRCdXR0b24iLCJhcnJvd0NvbG9yIiwibGlzdGVuZXIiLCJzbmFwc2hvdEJ1dHRvbiIsIm1heEhlaWdodCIsImNvbnRlbnQiLCJzY2FsZSIsInZhbHVlIiwiTWF0aCIsIm1pbiIsIk1BWF9TUEVDVFJPTUVURVJfU05BUFNIT1RTIiwiYnV0dG9uR3JvdXAiLCJzcGFjaW5nIiwiYWxpZ24iLCJjaGlsZHJlbiIsImNvbnRlbnROb2RlIiwiZGlzcG9zZSIsImFzc2VydCIsImFsaWduQm94T3B0aW9ucyIsImdyb3VwIiwieEFsaWduIiwidGl0bGVFeHBhbmRlZFRleHQiLCJzcGVjdHJvbWV0ZXJFeHBhbmRlZFN0cmluZ1Byb3BlcnR5IiwiZm9udCIsInNpemUiLCJ3ZWlnaHQiLCJzcGVjdHJvbWV0ZXJUaXRsZUZpbGxQcm9wZXJ0eSIsIm1heFdpZHRoIiwidGl0bGVDb2xsYXBzZWRUZXh0Iiwic3BlY3Ryb21ldGVyQ29sbGFwc2VkU3RyaW5nUHJvcGVydHkiLCJpdGVtcyIsImNyZWF0ZU5vZGUiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlNwZWN0cm9tZXRlckFjY29yZGlvbkJveC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNS0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcclxuXHJcbi8qKlxyXG4gKiBTcGVjdHJvbWV0ZXJBY2NvcmRpb25Cb3ggaXMgdGhlIGFjY29yZGlvbiBib3ggdGhhdCBjb250YWlucyB0aGUgc3BlY3Ryb21ldGVyLlxyXG4gKlxyXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCBCb29sZWFuUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vYXhvbi9qcy9Cb29sZWFuUHJvcGVydHkuanMnO1xyXG5pbXBvcnQgVFByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvVFByb3BlcnR5LmpzJztcclxuaW1wb3J0IFRSZWFkT25seVByb3BlcnR5IGZyb20gJy4uLy4uLy4uLy4uL2F4b24vanMvVFJlYWRPbmx5UHJvcGVydHkuanMnO1xyXG5pbXBvcnQgRGltZW5zaW9uMiBmcm9tICcuLi8uLi8uLi8uLi9kb3QvanMvRGltZW5zaW9uMi5qcyc7XHJcbmltcG9ydCBvcHRpb25pemUsIHsgRW1wdHlTZWxmT3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xyXG5pbXBvcnQgUGlja1JlcXVpcmVkIGZyb20gJy4uLy4uLy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9QaWNrUmVxdWlyZWQuanMnO1xyXG5pbXBvcnQgUmVjb3JkU3RvcEJ1dHRvbiBmcm9tICcuLi8uLi8uLi8uLi9zY2VuZXJ5LXBoZXQvanMvYnV0dG9ucy9SZWNvcmRTdG9wQnV0dG9uLmpzJztcclxuaW1wb3J0IFJlc2V0QnV0dG9uIGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9idXR0b25zL1Jlc2V0QnV0dG9uLmpzJztcclxuaW1wb3J0IFBoZXRGb250IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9QaGV0Rm9udC5qcyc7XHJcbmltcG9ydCB7IEFsaWduQm94LCBBbGlnbkJveE9wdGlvbnMsIEFsaWduR3JvdXAsIEhCb3gsIE5vZGVUcmFuc2xhdGlvbk9wdGlvbnMsIFBhdGgsIFJlY3RhbmdsZSwgVGV4dCwgVkJveCB9IGZyb20gJy4uLy4uLy4uLy4uL3NjZW5lcnkvanMvaW1wb3J0cy5qcyc7XHJcbmltcG9ydCBjYW1lcmFTb2xpZFNoYXBlIGZyb20gJy4uLy4uLy4uLy4uL3NoZXJwYS9qcy9mb250YXdlc29tZS01L2NhbWVyYVNvbGlkU2hhcGUuanMnO1xyXG5pbXBvcnQgQWNjb3JkaW9uQm94LCB7IEFjY29yZGlvbkJveE9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvQWNjb3JkaW9uQm94LmpzJztcclxuaW1wb3J0IFJlY3Rhbmd1bGFyUHVzaEJ1dHRvbiBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvYnV0dG9ucy9SZWN0YW5ndWxhclB1c2hCdXR0b24uanMnO1xyXG5pbXBvcnQgVG9nZ2xlTm9kZSBmcm9tICcuLi8uLi8uLi8uLi9zdW4vanMvVG9nZ2xlTm9kZS5qcyc7XHJcbmltcG9ydCBUYW5kZW0gZnJvbSAnLi4vLi4vLi4vLi4vdGFuZGVtL2pzL1RhbmRlbS5qcyc7XHJcbmltcG9ydCBtb2RlbHNPZlRoZUh5ZHJvZ2VuQXRvbSBmcm9tICcuLi8uLi9tb2RlbHNPZlRoZUh5ZHJvZ2VuQXRvbS5qcyc7XHJcbmltcG9ydCBNb2RlbHNPZlRoZUh5ZHJvZ2VuQXRvbVN0cmluZ3MgZnJvbSAnLi4vLi4vTW9kZWxzT2ZUaGVIeWRyb2dlbkF0b21TdHJpbmdzLmpzJztcclxuaW1wb3J0IE1PVEhBQ29sb3JzIGZyb20gJy4uL01PVEhBQ29sb3JzLmpzJztcclxuaW1wb3J0IE1PVEhBQ29uc3RhbnRzIGZyb20gJy4uL01PVEhBQ29uc3RhbnRzLmpzJztcclxuXHJcbi8vIGNvbnN0YW50c1xyXG5jb25zdCBESVNQTEFZX1NJWkUgPSBuZXcgRGltZW5zaW9uMiggNTEwLCAxMzAgKTtcclxuXHJcbnR5cGUgU2VsZk9wdGlvbnMgPSBFbXB0eVNlbGZPcHRpb25zO1xyXG5cclxudHlwZSBTcGVjdHJvbWV0ZXJBY2NvcmRpb25Cb3hPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBOb2RlVHJhbnNsYXRpb25PcHRpb25zICZcclxuICBQaWNrUmVxdWlyZWQ8QWNjb3JkaW9uQm94T3B0aW9ucywgJ2V4cGFuZGVkUHJvcGVydHknIHwgJ3RhbmRlbSc+O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3BlY3Ryb21ldGVyQWNjb3JkaW9uQm94IGV4dGVuZHMgQWNjb3JkaW9uQm94IHtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBudW1iZXJPZlNuYXBzaG90c1Byb3BlcnR5OiBUUHJvcGVydHk8bnVtYmVyPixcclxuICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVkT3B0aW9ucz86IFNwZWN0cm9tZXRlckFjY29yZGlvbkJveE9wdGlvbnMgKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxTcGVjdHJvbWV0ZXJBY2NvcmRpb25Cb3hPcHRpb25zLCBTZWxmT3B0aW9ucywgQWNjb3JkaW9uQm94T3B0aW9ucz4oKSgge1xyXG5cclxuICAgICAgLy8gQWNjb3JkaW9uQm94T3B0aW9uc1xyXG4gICAgICBmaWxsOiBNT1RIQUNvbG9ycy5zcGVjdHJvbWV0ZXJBY2NvcmRpb25Cb3hGaWxsUHJvcGVydHksXHJcbiAgICAgIHN0cm9rZTogTU9USEFDb2xvcnMuc3BlY3Ryb21ldGVyQWNjb3JkaW9uQm94U3Ryb2tlUHJvcGVydHksXHJcbiAgICAgIGNvcm5lclJhZGl1czogNSxcclxuICAgICAgYnV0dG9uWE1hcmdpbjogOCxcclxuICAgICAgYnV0dG9uWU1hcmdpbjogNSxcclxuICAgICAgY29udGVudFhNYXJnaW46IDEwLFxyXG4gICAgICBjb250ZW50WU1hcmdpbjogNSxcclxuICAgICAgY29udGVudFlTcGFjaW5nOiAwLFxyXG4gICAgICBidXR0b25BbGlnbjogJ2xlZnQnLFxyXG4gICAgICB0aXRsZUFsaWduWDogJ2xlZnQnLFxyXG4gICAgICB0aXRsZVhTcGFjaW5nOiAxMCxcclxuICAgICAgZXhwYW5kQ29sbGFwc2VCdXR0b25PcHRpb25zOiB7XHJcbiAgICAgICAgc2lkZUxlbmd0aDogMjIsXHJcbiAgICAgICAgdG91Y2hBcmVhWERpbGF0aW9uOiAxMCxcclxuICAgICAgICB0b3VjaEFyZWFZRGlsYXRpb246IDEwXHJcbiAgICAgIH1cclxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xyXG5cclxuICAgIG9wdGlvbnMudGl0bGVOb2RlID0gbmV3IFRpdGxlTm9kZSggb3B0aW9ucy5leHBhbmRlZFByb3BlcnR5LCBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICd0aXRsZU5vZGUnICkgKTtcclxuXHJcbiAgICAvL1RPRE8gcGxhY2Vob2xkZXJcclxuICAgIGNvbnN0IGRpc3BsYXlOb2RlID0gbmV3IFJlY3RhbmdsZSggMCwgMCwgRElTUExBWV9TSVpFLndpZHRoLCBESVNQTEFZX1NJWkUuaGVpZ2h0LCB7XHJcbiAgICAgIGNvcm5lclJhZGl1czogb3B0aW9ucy5jb3JuZXJSYWRpdXMsXHJcbiAgICAgIGZpbGw6IE1PVEhBQ29sb3JzLnNwZWN0cm9tZXRlckZpbGxQcm9wZXJ0eSxcclxuICAgICAgc3Ryb2tlOiBNT1RIQUNvbG9ycy5zcGVjdHJvbWV0ZXJTdHJva2VQcm9wZXJ0eVxyXG4gICAgfSApO1xyXG5cclxuICAgIC8vVE9ETyByZWxvY2F0ZSwgaGFuZGxlIHJlc2V0XHJcbiAgICAvL1RPRE8gZG9lcyB0aGlzIGJlbG9uZyBoZXJlP1xyXG4gICAgY29uc3QgcmVjb3JkaW5nUHJvcGVydHkgPSBuZXcgQm9vbGVhblByb3BlcnR5KCBmYWxzZSwge1xyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3JlY29yZGluZ1Byb3BlcnR5JyApXHJcbiAgICB9ICk7XHJcbiAgICByZWNvcmRpbmdQcm9wZXJ0eS5saW5rKCByZWNvcmRpbmcgPT4ge1xyXG4gICAgICAvL1RPRE9cclxuICAgIH0gKTtcclxuXHJcbiAgICBjb25zdCByZWNvcmRTdG9wQnV0dG9uID0gbmV3IFJlY29yZFN0b3BCdXR0b24oIHJlY29yZGluZ1Byb3BlcnR5LCB7XHJcbiAgICAgIHJhZGl1czogMTUsXHJcbiAgICAgIHhNYXJnaW46IDguMjUsXHJcbiAgICAgIHlNYXJnaW46IDguMjUsXHJcbiAgICAgIGJhc2VDb2xvcjogTU9USEFDb2xvcnMucHVzaEJ1dHRvbkJhc2VDb2xvclByb3BlcnR5LFxyXG4gICAgICB0b3VjaEFyZWFEaWxhdGlvbjogNSxcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdyZWNvcmRTdG9wQnV0dG9uJyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgcmVzZXRCdXR0b24gPSBuZXcgUmVzZXRCdXR0b24oIHtcclxuICAgICAgYmFzZUNvbG9yOiBNT1RIQUNvbG9ycy5wdXNoQnV0dG9uQmFzZUNvbG9yUHJvcGVydHksXHJcbiAgICAgIGFycm93Q29sb3I6ICdibGFjaycsXHJcbiAgICAgIHJhZGl1czogcmVjb3JkU3RvcEJ1dHRvbi5oZWlnaHQgLyAyLFxyXG4gICAgICB4TWFyZ2luOiA0LFxyXG4gICAgICB5TWFyZ2luOiA0LFxyXG4gICAgICB0b3VjaEFyZWFEaWxhdGlvbjogNSxcclxuICAgICAgbGlzdGVuZXI6ICgpID0+IHtcclxuICAgICAgICAvL1RPRE9cclxuICAgICAgfSxcclxuICAgICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdyZXNldEJ1dHRvbicgKVxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IHNuYXBzaG90QnV0dG9uID0gbmV3IFJlY3Rhbmd1bGFyUHVzaEJ1dHRvbigge1xyXG4gICAgICBtYXhIZWlnaHQ6IHJlY29yZFN0b3BCdXR0b24uaGVpZ2h0LFxyXG4gICAgICBiYXNlQ29sb3I6IE1PVEhBQ29sb3JzLnB1c2hCdXR0b25CYXNlQ29sb3JQcm9wZXJ0eSxcclxuICAgICAgY29udGVudDogbmV3IFBhdGgoIGNhbWVyYVNvbGlkU2hhcGUsIHtcclxuICAgICAgICBmaWxsOiAnYmxhY2snLFxyXG4gICAgICAgIHNjYWxlOiAwLjA4XHJcbiAgICAgIH0gKSxcclxuICAgICAgdG91Y2hBcmVhWERpbGF0aW9uOiAxMCxcclxuICAgICAgdG91Y2hBcmVhWURpbGF0aW9uOiA1LFxyXG4gICAgICBsaXN0ZW5lcjogKCkgPT4ge1xyXG4gICAgICAgIG51bWJlck9mU25hcHNob3RzUHJvcGVydHkudmFsdWUgPVxyXG4gICAgICAgICAgTWF0aC5taW4oIE1PVEhBQ29uc3RhbnRzLk1BWF9TUEVDVFJPTUVURVJfU05BUFNIT1RTLCBudW1iZXJPZlNuYXBzaG90c1Byb3BlcnR5LnZhbHVlICsgMSApO1xyXG4gICAgICB9LFxyXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3NuYXBzaG90QnV0dG9uJyApXHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgYnV0dG9uR3JvdXAgPSBuZXcgVkJveCgge1xyXG4gICAgICBzcGFjaW5nOiAxMCxcclxuICAgICAgYWxpZ246ICdjZW50ZXInLFxyXG4gICAgICBjaGlsZHJlbjogWyByZWNvcmRTdG9wQnV0dG9uLCByZXNldEJ1dHRvbiwgc25hcHNob3RCdXR0b24gXVxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IGNvbnRlbnROb2RlID0gbmV3IEhCb3goIHtcclxuICAgICAgc3BhY2luZzogMTIsXHJcbiAgICAgIGFsaWduOiAnYm90dG9tJyxcclxuICAgICAgY2hpbGRyZW46IFsgZGlzcGxheU5vZGUsIGJ1dHRvbkdyb3VwIF1cclxuICAgIH0gKTtcclxuXHJcbiAgICBzdXBlciggY29udGVudE5vZGUsIG9wdGlvbnMgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvdmVycmlkZSBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggZmFsc2UsICdkaXNwb3NlIGlzIG5vdCBzdXBwb3J0ZWQsIGV4aXN0cyBmb3IgdGhlIGxpZmV0aW1lIG9mIHRoZSBzaW0nICk7XHJcbiAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgfVxyXG59XHJcblxyXG5jbGFzcyBUaXRsZU5vZGUgZXh0ZW5kcyBUb2dnbGVOb2RlPGJvb2xlYW4+IHtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBleHBhbmRlZFByb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxib29sZWFuPiwgdGFuZGVtOiBUYW5kZW0gKSB7XHJcblxyXG4gICAgLy8gdG8gZW5zdXJlIHRoYXQgYm90aCB0aXRsZXMgaGF2ZSB0aGUgc2FtZSBlZmZlY3RpdmUgc2l6ZSwgYW5kIGFyZSBsZWZ0IGFsaWduZWRcclxuICAgIGNvbnN0IGFsaWduQm94T3B0aW9uczogQWxpZ25Cb3hPcHRpb25zID0ge1xyXG4gICAgICBncm91cDogbmV3IEFsaWduR3JvdXAoKSxcclxuICAgICAgeEFsaWduOiAnbGVmdCdcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgdGl0bGVFeHBhbmRlZFRleHQgPSBuZXcgQWxpZ25Cb3goIG5ldyBUZXh0KCBNb2RlbHNPZlRoZUh5ZHJvZ2VuQXRvbVN0cmluZ3Muc3BlY3Ryb21ldGVyRXhwYW5kZWRTdHJpbmdQcm9wZXJ0eSwge1xyXG4gICAgICBmb250OiBuZXcgUGhldEZvbnQoIHsgc2l6ZTogMTYsIHdlaWdodDogJ2JvbGQnIH0gKSxcclxuICAgICAgZmlsbDogTU9USEFDb2xvcnMuc3BlY3Ryb21ldGVyVGl0bGVGaWxsUHJvcGVydHksXHJcbiAgICAgIG1heFdpZHRoOiAyOTAsXHJcbiAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3RpdGxlRXhwYW5kZWRUZXh0JyApXHJcbiAgICB9ICksIGFsaWduQm94T3B0aW9ucyApO1xyXG5cclxuICAgIGNvbnN0IHRpdGxlQ29sbGFwc2VkVGV4dCA9IG5ldyBBbGlnbkJveCggbmV3IFRleHQoIE1vZGVsc09mVGhlSHlkcm9nZW5BdG9tU3RyaW5ncy5zcGVjdHJvbWV0ZXJDb2xsYXBzZWRTdHJpbmdQcm9wZXJ0eSwge1xyXG4gICAgICBmb250OiBuZXcgUGhldEZvbnQoIHsgc2l6ZTogMTYsIHdlaWdodDogJ2JvbGQnIH0gKSxcclxuICAgICAgZmlsbDogTU9USEFDb2xvcnMuc3BlY3Ryb21ldGVyVGl0bGVGaWxsUHJvcGVydHksXHJcbiAgICAgIG1heFdpZHRoOiAyOTAsXHJcbiAgICAgIHRhbmRlbTogdGFuZGVtLmNyZWF0ZVRhbmRlbSggJ3RpdGxlQ29sbGFwc2VkVGV4dCcgKVxyXG4gICAgfSApLCBhbGlnbkJveE9wdGlvbnMgKTtcclxuXHJcbiAgICBjb25zdCBpdGVtcyA9IFtcclxuICAgICAgeyB2YWx1ZTogdHJ1ZSwgY3JlYXRlTm9kZTogKCB0YW5kZW06IFRhbmRlbSApID0+IHRpdGxlRXhwYW5kZWRUZXh0IH0sXHJcbiAgICAgIHsgdmFsdWU6IGZhbHNlLCBjcmVhdGVOb2RlOiAoIHRhbmRlbTogVGFuZGVtICkgPT4gdGl0bGVDb2xsYXBzZWRUZXh0IH1cclxuICAgIF07XHJcblxyXG4gICAgc3VwZXIoIGV4cGFuZGVkUHJvcGVydHksIGl0ZW1zLCB7XHJcbiAgICAgIHRhbmRlbTogdGFuZGVtXHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb3ZlcnJpZGUgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgIGFzc2VydCAmJiBhc3NlcnQoIGZhbHNlLCAnZGlzcG9zZSBpcyBub3Qgc3VwcG9ydGVkLCBleGlzdHMgZm9yIHRoZSBsaWZldGltZSBvZiB0aGUgc2ltJyApO1xyXG4gICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gIH1cclxufVxyXG5cclxubW9kZWxzT2ZUaGVIeWRyb2dlbkF0b20ucmVnaXN0ZXIoICdTcGVjdHJvbWV0ZXJBY2NvcmRpb25Cb3gnLCBTcGVjdHJvbWV0ZXJBY2NvcmRpb25Cb3ggKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsZUFBZSxNQUFNLHdDQUF3QztBQUdwRSxPQUFPQyxVQUFVLE1BQU0sa0NBQWtDO0FBQ3pELE9BQU9DLFNBQVMsTUFBNEIsdUNBQXVDO0FBRW5GLE9BQU9DLGdCQUFnQixNQUFNLHlEQUF5RDtBQUN0RixPQUFPQyxXQUFXLE1BQU0sb0RBQW9EO0FBQzVFLE9BQU9DLFFBQVEsTUFBTSx5Q0FBeUM7QUFDOUQsU0FBU0MsUUFBUSxFQUFtQkMsVUFBVSxFQUFFQyxJQUFJLEVBQTBCQyxJQUFJLEVB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